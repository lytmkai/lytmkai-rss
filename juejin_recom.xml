<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ç´§æ€¥ä¿®å¤ï¼Dify CVE-2025-55182 é«˜å±æ¼æ´ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å‡çº§é¿å‘]]></title>    <link>https://juejin.cn/post/7581999251368214580</link>    <guid>https://juejin.cn/post/7581999251368214580</guid>    <pubDate>2025-12-10T12:40:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581999251368214580" data-draft-id="7582016579857956898" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç´§æ€¥ä¿®å¤ï¼Dify CVE-2025-55182 é«˜å±æ¼æ´ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å‡çº§é¿å‘"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T12:40:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wwwzhouhui"/> <meta itemprop="url" content="https://juejin.cn/user/3428746411400537"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç´§æ€¥ä¿®å¤ï¼Dify CVE-2025-55182 é«˜å±æ¼æ´ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å‡çº§é¿å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3428746411400537/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wwwzhouhui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T12:40:34.000Z" title="Wed Dec 10 2025 12:40:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨AIåº”ç”¨å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œå¦‚ä½•ä¿éšœç”Ÿäº§ç¯å¢ƒçš„å®‰å…¨æˆä¸ºäº†ä¼ä¸šå…³æ³¨çš„ç„¦ç‚¹ã€‚ä¼ ç»Ÿçš„å¼€å‘æ–¹å¼å¾€å¾€åªå…³æ³¨åŠŸèƒ½å®ç°ï¼Œå´å¿½è§†äº†åº•å±‚æ¡†æ¶çš„ä¾›åº”é“¾å®‰å…¨é£é™©ï¼Œç‰¹åˆ«æ˜¯å½“ä½ ä½¿ç”¨çš„æŠ€æœ¯æ ˆå‡çº§åˆ°æœ€æ–°æ¶æ„æ—¶ï¼Œä¸€äº›éšè—çš„å®‰å…¨æ¼æ´å¯èƒ½åœ¨ä¸ç»æ„é—´å°±è®©ä½ çš„æœåŠ¡å™¨"è£¸å¥”"åœ¨äº’è”ç½‘ä¸Šã€‚</p>
<p>è¿™2å¤©Difyç”¨æˆ·ç‚¸é”…äº†ï¼å·ç§°"å²ä¸Šæœ€ä¸¥é‡"çš„Reactæ¼æ´CVE-2025-55182è¢«æ›å…‰ï¼ŒCVSSè¯„åˆ†é«˜è¾¾10.0æ»¡åˆ†ã€‚è¿™ä¸ªæ¼æ´æºäºReact Server Componentsï¼ˆRSCï¼‰å’ŒNext.js App Routeræ¶æ„çš„ååºåˆ—åŒ–ç¼ºé™·ï¼Œæ”»å‡»è€…æ— éœ€ä»»ä½•èº«ä»½éªŒè¯ï¼Œåªéœ€å‘é€ä¸€ä¸ªç²¾å¿ƒæ„é€ çš„HTTPè¯·æ±‚ï¼Œå°±èƒ½åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»æ„ä»£ç ï¼Œç›´æ¥æ‹¿ä¸‹æœåŠ¡å™¨æƒé™ã€‚æ›´å¯æ€•çš„æ˜¯ï¼Œå…¨çƒå·²æœ‰å¤§é‡Difyè‡ªæ‰˜ç®¡å®ä¾‹è¢«æ¤å…¥æŒ–çŸ¿ç¨‹åºã€çªƒå–APIå¯†é’¥ã€ç”šè‡³å»ºç«‹æŒä¹…åŒ–åé—¨ã€‚å¥½å®¶ä¼™ï¼Œè¿™ä¸å°±æ˜¯ç°ä»£ç‰ˆçš„"ä¸€é”®å¤ºèˆ"å—ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85c1a4f593844cb89f62021410fadfeb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=I73MxHnI1%2FpfPewU2GWNZI7iekE%3D" alt="1765352612636" loading="lazy"/></p>
<p>ä»Šå¤©æˆ‘ä»¬å°±å¸¦å°ä¼™ä¼´ä»¬æ·±å…¥äº†è§£CVE-2025-55182æ¼æ´çš„æ¥é¾™å»è„‰ï¼Œå¹¶æ‰‹æŠŠæ‰‹æ•™å¤§å®¶åœ¨Difyå¹³å°ä¸Šè¿›è¡Œå®‰å…¨ä¿®å¤å‡çº§ï¼Œé¿å¼€å‡çº§è¿‡ç¨‹ä¸­çš„å„ç§å¤§å‘ã€‚å‘µå‘µï¼Œä¿è¯è®©ä½ çš„Difyå®ä¾‹å›ºè‹¥é‡‘æ±¤ï¼</p>
<h2 data-id="heading-1">âœ¨ æ¼æ´æ ¸å¿ƒç‰¹å¾</h2>
<ul>
<li><strong>ğŸ”¥ CVSS 10.0æ»¡åˆ†</strong>: å²ä¸Šæœ€ä¸¥é‡çš„Reactå®‰å…¨æ¼æ´ï¼Œå½±å“èŒƒå›´æå¹¿</li>
<li><strong>ğŸ’€ æ— éœ€èº«ä»½éªŒè¯</strong>: æ”»å‡»è€…ä¸éœ€è¦ç™»å½•ï¼Œåªè¦æœåŠ¡æš´éœ²åœ¨å…¬ç½‘å³å¯æ”»å‡»</li>
<li><strong>âš¡ è¿œç¨‹ä»£ç æ‰§è¡Œ</strong>: ä¸€ä¸ªHTTPè¯·æ±‚ç›´æ¥è·å–æœåŠ¡å™¨Shellæƒé™</li>
<li><strong>ğŸ¯ ç²¾å‡†æ‰“å‡»Dify</strong>: ä½¿ç”¨Next.js App Routerçš„Dify v1.9.x-v1.10.1å…¨çº¿å—å½±å“</li>
<li><strong>ğŸ’° é«˜ä»·å€¼ç›®æ ‡</strong>: å¯çªƒå–OpenAI/Claude APIå¯†é’¥ã€æ•°æ®åº“å‡­è¯ç­‰æ ¸å¿ƒèµ„äº§</li>
<li><strong>ğŸ”— ä¾›åº”é“¾æ”»å‡»</strong>: æºå¤´æ¼æ´åœ¨Reactï¼ŒNext.jsè¿å¸¦å—å½±å“ï¼Œæ³¢åŠæ•´ä¸ªç”Ÿæ€</li>
<li><strong>âš ï¸ å‡çº§æœ‰å‘</strong>: å®˜æ–¹é•œåƒæ ‡ç­¾å­˜åœ¨é”™è¯¯ï¼Œç›²ç›®å‡çº§å¯èƒ½æ— æ•ˆ</li>
<li><strong>ğŸ›¡ï¸ WAFå¯é˜²å¾¡</strong>: é€šè¿‡é›·æ± ç­‰WAFå¯ä¸´æ—¶æ‹¦æˆªæ”»å‡»ï¼Œäº‰å–å‡çº§æ—¶é—´</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba3fb6ddce9f41389d4b0014545b65f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=qiH2tMhPh0zXDbOn1CNxx6eNAvo%3D" alt="1765359233004" loading="lazy"/></p>
<h2 data-id="heading-2">ğŸ› ï¸ æŠ€æœ¯èƒŒæ™¯ï¼šä»CSRåˆ°RSCçš„æ¶æ„æ¼”è¿›</h2>
<p>è¦ç†è§£è¿™ä¸ªæ¼æ´ä¸ºä»€ä¹ˆè¿™ä¹ˆä¸¥é‡ï¼Œæˆ‘ä»¬å¾—å…ˆäº†è§£Reactå’ŒNext.jsçš„æŠ€æœ¯æ¼”è¿›å²ã€‚å‘µå‘µï¼Œåˆ«æ€•ï¼Œæˆ‘ç”¨å¤§ç™½è¯ç»™å¤§å®¶è®²æ¸…æ¥šã€‚</p>
<h3 data-id="heading-3">Reactæ¶æ„çš„ä¸‰æ¬¡è¿›åŒ–</h3>
<p><strong>ç¬¬ä¸€ä»£ï¼šå®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰</strong></p>
<ul>
<li><strong>æ—¶ä»£</strong>: 2013-2016å¹´</li>
<li><strong>ç‰¹ç‚¹</strong>: æœåŠ¡å™¨åªå‘é€ç©ºHTMLï¼Œæµè§ˆå™¨ä¸‹è½½JSååŠ¨æ€ç”Ÿæˆé¡µé¢</li>
<li><strong>é—®é¢˜</strong>: é¦–å±æ…¢ã€SEOå·®ã€JSä½“ç§¯å¤§</li>
</ul>
<p><strong>ç¬¬äºŒä»£ï¼šæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰</strong></p>
<ul>
<li><strong>æ—¶ä»£</strong>: 2016-2022å¹´</li>
<li><strong>ä»£è¡¨</strong>: Next.js Pages Router</li>
<li><strong>ç‰¹ç‚¹</strong>: æœåŠ¡å™¨ç”Ÿæˆå®Œæ•´HTMLï¼Œæµè§ˆå™¨"æ³¨æ°´"(Hydration)å®ç°äº¤äº’</li>
<li><strong>é—®é¢˜</strong>: ä»éœ€ä¸‹è½½å…¨é‡JSï¼ŒHydrationå»¶è¿Ÿé«˜</li>
</ul>
<p><strong>ç¬¬ä¸‰ä»£ï¼šReact Server Componentsï¼ˆRSCï¼‰</strong></p>
<ul>
<li><strong>æ—¶ä»£</strong>: 2022å¹´è‡³ä»Š</li>
<li><strong>ä»£è¡¨</strong>: Next.js 13+ App Router</li>
<li><strong>ç‰¹ç‚¹</strong>: ç»„ä»¶åˆ†ä¸ºæœåŠ¡ç«¯ç»„ä»¶å’Œå®¢æˆ·ç«¯ç»„ä»¶ï¼ŒæœåŠ¡ç«¯ç»„ä»¶ä¸å‘é€åˆ°å®¢æˆ·ç«¯</li>
<li><strong>ä¼˜åŠ¿</strong>: JSä½“ç§¯å‡å°‘90%ï¼Œæ€§èƒ½å¤§å¹…æå‡</li>
<li><strong>é£é™©</strong>: å¼•å…¥äº†æ–°çš„é€šä¿¡åè®®â€”â€”Flight Protocol</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b2af5864b204ccb94dc8eb167b9f927~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=mO3HF%2ByaDHpoaF%2F7y8B2mThl%2F%2Fg%3D" alt="1765359490644" loading="lazy"/></p>
<h3 data-id="heading-4">Flightåè®®ï¼šæ¼æ´çš„"å…ƒå‡¶"</h3>
<p>ä¸ºäº†è®©æœåŠ¡ç«¯ç»„ä»¶å’Œå®¢æˆ·ç«¯ç»„ä»¶èƒ½å¤Ÿæ— ç¼é€šä¿¡ï¼ŒReactå›¢é˜Ÿè®¾è®¡äº†Flight Protocolã€‚è¿™ä¸ªåè®®ä¸ä»…è¦ä¼ è¾“æ•°æ®ï¼Œè¿˜è¦ä¼ è¾“ç»„ä»¶æ ‘ç»“æ„ã€Promiseå¯¹è±¡ã€ç”šè‡³æœåŠ¡ç«¯å‡½æ•°å¼•ç”¨ã€‚ä¼ ç»Ÿçš„JSONæ ¼å¼æ— æ³•æ»¡è¶³è¿™äº›å¤æ‚éœ€æ±‚ï¼Œäºæ˜¯Reactå®ç°äº†ä¸€å¥—è‡ªå®šä¹‰çš„åºåˆ—åŒ–/ååºåˆ—åŒ–æœºåˆ¶ã€‚</p>
<p><strong>é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œï¼</strong> å½“æœåŠ¡å™¨ååºåˆ—åŒ–å®¢æˆ·ç«¯å‘æ¥çš„Flightåè®®æ•°æ®æ—¶ï¼Œæ²¡æœ‰å……åˆ†éªŒè¯æ•°æ®çš„å®‰å…¨æ€§ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„çš„åºåˆ—åŒ–æ•°æ®ï¼Œè§¦å‘æœåŠ¡å™¨æ‰§è¡Œä»»æ„ä»£ç ã€‚</p>



































<table><thead><tr><th>æ¶æ„ç‰¹å¾</th><th>CSR</th><th>SSR</th><th>RSC</th></tr></thead><tbody><tr><td>æ‰§è¡Œä½ç½®</td><td>æµè§ˆå™¨</td><td>æœåŠ¡å™¨+æµè§ˆå™¨</td><td><strong>æœåŠ¡å™¨(Server Components)</strong></td></tr><tr><td>æ•°æ®ä¼ è¾“</td><td>JSON API</td><td>HTMLå­—ç¬¦ä¸²</td><td><strong>Flightåè®®åºåˆ—åŒ–æµ</strong></td></tr><tr><td>ä¸»è¦é£é™©</td><td>XSS, CSRF</td><td>XSS, æ³¨å…¥</td><td><strong>ååºåˆ—åŒ–RCE</strong></td></tr><tr><td>å—æ­¤æ¼æ´å½±å“</td><td>âŒ å¦</td><td>âŒ å¦</td><td>âœ… <strong>æ˜¯</strong></td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2ef3b88e8e94dccb5a73a827d7208a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=rIcvKM7MgPYIzDt7ul1i%2FNgtwgE%3D" alt="unnamed" loading="lazy"/></p>
<h2 data-id="heading-5">ğŸ¯ æ¼æ´å½±å“èŒƒå›´</h2>
<h3 data-id="heading-6">å—å½±å“çš„Difyç‰ˆæœ¬</h3>
<ul>
<li><strong>Dify v1.9.0 - v1.10.1</strong>: å…¨çº¿å—å½±å“</li>
<li><strong>æ ¸å¿ƒå—å®³è€…</strong>: dify-webå®¹å™¨ï¼ˆå‰ç«¯æœåŠ¡ï¼‰</li>
<li><strong>æŠ€æœ¯æ ˆ</strong>: Next.js 15.x + React 19.x (App Routeræ¶æ„)</li>
</ul>
<h3 data-id="heading-7">å—å½±å“çš„Next.jsç‰ˆæœ¬</h3>
<ul>
<li><strong>Next.js 13.4+</strong>: ä½¿ç”¨App Routerçš„æ‰€æœ‰ç‰ˆæœ¬</li>
<li><strong>Next.js 14.x, 15.x, 16.x</strong>: å…¨éƒ¨å—å½±å“</li>
<li><strong>Pages Routerç”¨æˆ·</strong>: å®Œå…¨ä¸å—å½±å“ï¼ˆä½¿ç”¨pages/ç›®å½•ï¼‰</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5776fc850747483cb84ff99bb5fde6eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=jW%2FQggaNk1PRCoT6%2FP0%2FPpoAqUw%3D" alt="1765359829068" loading="lazy"/></p>
<h3 data-id="heading-8">æ”»å‡»åæœ</h3>
<p>æ ¹æ®çœŸå®æ¡ˆä¾‹ï¼Œæ”»å‡»è€…æˆåŠŸå…¥ä¾µåä¼šè¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li><strong>èµ„æºåŠ«æŒ</strong>: éƒ¨ç½²XMRigæŒ–çŸ¿ç¨‹åºï¼ŒCPUå ç”¨é£™å‡è‡³100%</li>
<li><strong>å‡­è¯çªƒå–</strong>: è¯»å–ç¯å¢ƒå˜é‡ä¸­çš„APIå¯†é’¥ï¼ˆOpenAI/Claude/AWSç­‰ï¼‰</li>
<li><strong>æ•°æ®æ³„éœ²</strong>: çªƒå–æ•°æ®åº“å¯†ç ï¼Œè®¿é—®PostgreSQLä¸­çš„æ•æ„Ÿæ•°æ®</li>
<li><strong>æŒä¹…åŒ–åé—¨</strong>: åœ¨.nextç›®å½•å†™å…¥Webshellï¼Œä¿®æ”¹cronä»»åŠ¡</li>
<li><strong>å†…ç½‘æ¸—é€</strong>: ä»¥Difyä¸ºè·³æ¿ï¼Œæ”»å‡»å†…ç½‘å…¶ä»–æœåŠ¡</li>
</ol>
<h2 data-id="heading-9">å®‰å…¨æ¼æ´å¤ç°</h2>
<h3 data-id="heading-10">difyéƒ¨ç½²</h3>
<p>æˆ‘è¿™é‡Œä½¿ç”¨æœ€æ–°çš„dify1.10.1ç‰ˆæœ¬ç»™å¤§å®¶æ¼”ç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/696793f4461d4e6bb7144e94a857821e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=0goLQnWVNDTCtk3GpfmU3iyWulM%3D" alt="image-20251210142140149" loading="lazy"/></p>
<p>æˆ‘ä»¬åœ¨æœ¬åœ°ç”µè„‘ä¸Šä½¿ç”¨docker compose å®‰è£…</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15400be90bf6476f8dee205408ce7f2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=6UImSO6oKh9CrV%2FDuNieKjV1emI%3D" alt="image-20251210142250397" loading="lazy"/></p>
<p>ä¸‹å›¾æˆ‘ä»¬æŒ‰ç…§å®˜æ–¹çš„éƒ¨ç½²æ–¹å¼éƒ¨ç½²äº†ä¸€ä¸ª1.10.1ç‰ˆæœ¬ï¼ˆç®—æ˜¯æ¯”è¾ƒæ–°çš„ç‰ˆæœ¬ï¼‰</p>
<h3 data-id="heading-11">æ¼æ´æ£€æŸ¥</h3>
<p>æˆ‘ä»¬è¿™é‡Œåœ¨githubæœç´¢CVE-2025-55182 æœåˆ°è¿™ä¸ªå¼€æºé¡¹ç›® æŠŠè¿™ä¸ªä»£ç ä¸‹è½½åˆ°æœ¬åœ°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80743f80aa3b4e2b900a549df74e0fc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=f4%2FLXLZIucU7%2B6brm98cfcq7FHI%3D" alt="image-20251210142527875" loading="lazy"/></p>
<p>ä»£ç ä¸‹è½½æœ¬åœ°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06c9f2e623e045fdbc6875a648e4cc0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=swuy7Yjyyhse9mBLm2Niw0SEkbs%3D" alt="image-20251210142556609" loading="lazy"/></p>
<p>è¿™ä¸ªpoc.py ä»£ç éå¸¸ç®€å•ï¼Œæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œçª—å£ç›´æ¥ä¸‹é¢åœ°å€</p>
<pre><code class="hljs language-shell" lang="shell">python poc.py http://127.0.0.1
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0e0912140494c1e94e0f2d51a0bb9d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=HYTo7QLZlga5T4OjnrWRSUXOmv4%3D" alt="image-20251210142741505" loading="lazy"/></p>
<p>å‡ºç°ä¸‹é¢çš„ç”»é¢æˆ‘ä»¬çš„æµ®ç°äº†ä¸Šæ‰‹æ¼æ´ã€‚è„šæœ¬å·²ç»æˆåŠŸæ‹¿åˆ°æ•°æ®åº“è¿”å›uid=1001 ç”¨æˆ·rootã€‚å¦‚æœè¿™ä¸ªæš´éœ²åœ¨äº’è”ç½‘ï¼Œå¦‚æœæ²¡æœ‰å®‰å…¨é˜²æŠ¤WAFç­‰å®‰å…¨è®¾å¤‡ç¡¬ä»¶æˆ–è€…è½¯ä»¶åŸºæœ¬ä¸Šæˆ‘é€šè¿‡è¿™ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥æˆåŠŸæ‹¿åˆ°æœåŠ¡å™¨æƒé™äº†ã€‚</p>
<h3 data-id="heading-12">æ‰«æç”Ÿæˆç¯å¢ƒ</h3>
<p>æˆ‘ä»¬å…¬å¸ä¹Ÿå°‘é‡çš„ä½¿ç”¨çš„difyåšä¸€äº›ä¿¡æ¯æŸ¥è¯¢å’Œç»Ÿè®¡ã€‚æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹ç”Ÿäº§ç¯å¢ƒçš„ç‰ˆæœ¬ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/505762073565409ba3795f8a8d6d1164~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=hdZ2KGWAgpbiDCifrp07V32%2F8hk%3D" alt="image-20251210143144806" loading="lazy"/></p>
<p>æˆ‘ä»¬æ£€æŸ¥ä¸‹é¢å½“å‰ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„æ˜¯1.9.0 ç‰ˆæœ¬ã€‚åˆšæ‰æˆ‘ä»¬ä¸Šé¢ç»™å¤§å®¶æ¼”ç¤ºçš„æ˜¯1.10.1 ç‰ˆæœ¬ä¹Ÿæ˜¯æˆåŠŸæ‹¿ä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨æƒ³è¿™ä¸ªè„šæœ¬æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥æ‹¿ä¸‹ç”Ÿäº§ç¯å¢ƒï¼Ÿç­”æ¡ˆæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œæˆ‘ä»¬æ¥è¯•ä¸€è¯•ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">python poc.py https://xxx.xxx.com
</code></pre>
<p>ç”Ÿäº§ç¯å¢ƒæˆ‘ä»¬ç”¨åŸŸåæ¥å®ç°è®¿é—®çš„æ‰€ä»¥åœ°å€æ˜¯ä¸Šé¢çš„ä¿¡æ¯ï¼ˆæˆ‘è¿™é‡Œå½±è—äº†ã€‚ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7725baac73804b82892e540ad3e817af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=i3XZFO0m6smfRrksfmUWhX0Idk0%3D" alt="image-20251210143455362" loading="lazy"/></p>
<p>è¿”å›äº†ä¸€ä¸²ä¿¡æ¯è¿˜æœ‰ä¸€ä¸ª403ã€‚è¿”å›ä¿¡æ¯æ˜¯ä¸€ä¸ªHTMLï¼Œæˆ‘ä»¬æŠ“å‡ºæ¥ä¿å­˜HTML</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae4119049fdc4a1f914087a2356fd8f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=yH1g7Z0%2B0HAFsYmWvjKHo8N45Cs%3D" alt="image-20251210143608687" loading="lazy"/></p>
<p>æˆ‘ä»¬çœ‹åˆ°è¿™é‡Œçš„POCè¯·æ±‚è¢«æˆ‘ä»¬çš„é›·æ± WAFæˆåŠŸæ‹¦æˆªäº†ã€‚å› ä¸ºè¿™ä¸ªæ˜¯ä¸€ä¸ªååºåˆ—åŒ–æ¼æ´ï¼ŒWAFé€šè¿‡åˆ¤æ–­æˆåŠŸæ‹¦æˆªäº†ä¸€äº›éæ³•è¯·æ±‚ã€‚æˆåŠŸä¿æŠ¤äº†æˆ‘ä»¬åç«¯ç¨‹åºä¸ç»™å…¶ä»–éæ³•å·¥å…·æ”»å‡»æˆåŠŸã€‚</p>
<p>æ‰€ä»¥ç”Ÿäº§ç¯å¢ƒä¸­æˆ‘ä»¬åœ¨å‰ç«¯å¢åŠ ä¸€ä¸ªWAFé˜²æŠ¤æ‹¦æˆªè¿˜æ˜¯æœ‰å¿…è¦çš„ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥ç»™åç«¯ç¨‹åºäº‰å–å‡çº§çš„æ—¶é—´ï¼Œæœ‰æ•ˆçš„åŒ…å«æˆ‘ä»¬çš„ä¿¡æ¯èµ„äº§ä¸ä¼šè¢«æ”»å‡»åˆ°ã€‚</p>
<h2 data-id="heading-13">å‡çº§æ¼æ´ä¿®å¤</h2>
<h3 data-id="heading-14">å‡çº§åŒ…ä»‹ç»</h3>
<p>çŸ¥é“äº†ä¸Šé¢çš„å®‰å…¨æ¼æ´æˆ‘ä»¬æŒ‰ç…§å®˜æ–¹æä¾›çš„å®‰å…¨æ¼æ´é•œåƒåŒ…å‡çº§å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬åœ¨difyå®˜æ–¹é•œåƒåŒ…</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05dbd70c3d9b45c7a2ac72ad74d12527~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=qCLre2thsUXuv3Y%2Bky9W%2B9Imqlw%3D" alt="image-20251210144155082" loading="lazy"/></p>
<p>æˆ‘ä»¬æŠŠä»£ç ä¸‹è½½åˆ°æœ¬åœ°</p>
<p>æˆ‘ä»¬æ‰“å¼€ä»£ç è¿›å…¥dockeræ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°docker-compose.yaml å¹¶æ‰“å¼€å®ƒã€‚è¿™ä¸ªåœ°æ–¹å…¶å®æœ‰ä¸€ä¸ªå‘ï¼Œä¸Šå‘¨å®˜æ–¹ç´§æ€¥ä¿®æ”¹äº†BUGï¼Œä½†æ˜¯è¿™ä¸ªdocker-compose.yamlé‡Œé¢çš„é•œåƒæ–‡ä»¶å¹¶æ²¡æœ‰ä¿®å¤è¿˜æ˜¯è€çš„langgenius/dify-api:1.10.1ã€langgenius/dify-web:1.10.1</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2360905e55e14333821cb2a64ecf07ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=muTDAXELtkAlbrhO2Y2yGASDS7A%3D" alt="image-20251210145019818" loading="lazy"/></p>
<p>æˆ‘ä»¬éœ€è¦æ³¨æ„è¿™ä¸ªåœ°æ–¹åº”è¯¥æ˜¯langgenius/dify-web:1.10.1-fix.1ã€langgenius/dify-api:1.10.1-fix.1</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4802dceb49644ef6bc73a24e846716c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=oBNcZkPUKfluXkWLTO97ihyBYkk%3D" alt="image-20251210145142608" loading="lazy"/></p>
<p>å¾ˆå¤šå°ä¼™ä¼´è¢«å‘äº†ä¸€æŠŠï¼ŒæœåŠ¡å™¨æˆ‘æ˜¯å‘¨æœ«æ‰‹å·¥å‡çº§çš„ï¼Œå…¬å¸çš„ç¯å¢ƒæˆ‘å‘¨ä¸€ï¼ˆ2025å¹´12æœˆ8æ—¥ï¼‰å®‰æ’å…¶ä»–äººå‡çº§çš„ï¼Œç»“æœå‡çº§åæ²¡æœ‰ä¿®å¤è¿™ä¸ªæ¼æ´å¤ç°äº†ã€‚æˆ‘ä»Šå¤©ä»”ç»†æ£€æŸ¥äº†å‡çº§çš„è®°å½•å‘ç°ä¸Šè¿°é—®é¢˜ã€‚</p>
<p>æ–°çš„å‡çº§åŒ…å·²ç»ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘çœ‹å‡çº§æ—¶é—´å¤§æ¦‚æ˜¯æ˜¨å¤©</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb09e74d74e4426683964437001b17df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=71U2JH2rTVLV1y7cbwaZ7SiZaak%3D" alt="image-20251210145510508" loading="lazy"/></p>
<p>å¤§å®¶å¯ä»¥ä½¿ç”¨æ¯”è¾ƒå·¥å…·æ¯”è¾ƒï¼ˆæˆ‘å¹³æ—¶å‡çº§éƒ½ä¸æ˜¯å®‰è£…å®˜æ–¹æ–¹å¼å‡çº§ï¼Œå®˜æ–¹å‡çº§å‘å¤šï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a69845cbef74c92b981f7ba0d276a07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=S9gjUnSkOi680M8yHiVIeXkkA64%3D" alt="image-20251210145742384" loading="lazy"/></p>
<p>ç¡®ä¿ä»¥ä¸Šç‰ˆæœ¬æ˜¯langgenius/dify-web:1.10.1-fix.1ã€langgenius/dify-api:1.10.1-fix.1 å‡çº§åæ‰ä¸ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>é¡ºä¾¿æä¸€å˜´ï¼Œæˆ‘ä½¿ç”¨çš„æ¯”è¾ƒå·¥å…·åå­—å«åšBCompareï¼Œå†™ä»£ç ã€åˆ†æä»£ç æ¯”è¾ƒæ–‡æ¡£ç¥å™¨ã€‚æˆ‘è¿™ä¸ªå·¥å…·æˆ‘ç”¨äº†å¾ˆå¤šå¹´äº†æ¨èç»™å¤§å®¶ã€‚ï¼ˆå·¥å…·ä¸‹è½½å¤§å®¶å¯ä»¥ç½‘ä¸Šæœï¼Œè¿™é‡Œå°±ä¸ç»™æä¾›ä¸‹è½½åŒ…äº†ï¼ŒåŒ…æˆ‘ä¹Ÿæ²¡æœ‰ã€‚ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f88b807a23c45b1b71a3011597f6b7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=qm7Wf8EXFGxMiNvhwsfm9l1zicM%3D" alt="image-20251210153213972" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9666bd409caf442fb6fcaff70121b6b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=sjYGLb6w3cM8wAuUu3peble3se4%3D" alt="image-20251210153151439" loading="lazy"/></p>
<h3 data-id="heading-15">å‡çº§å¤æµ‹</h3>
<p>æˆ‘ä»¬ç¡®ä¿å‡çº§ç‰ˆæœ¬æ˜¯langgenius/dify-web:1.10.1-fix.1ã€langgenius/dify-api:1.10.1-fix.1 æ­£ç¡®çš„ä¿®å¤é•œåƒåå¯åŠ¨dify, æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨å‰é¢çš„éªŒè¯è„šæœ¬æµ‹è¯•</p>
<pre><code class="hljs language-shell" lang="shell">python poc.py  http://192.168.210.10
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f21b69f5d4240689b9122b33507ed7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=irbi7Dae%2FfYskOBA2skGKd8N19A%3D" alt="image-20251210150011032" loading="lazy"/></p>
<p>å‡ºç°404äº†ã€‚è¿™ä¸ªæµ‹è¯•æ–¹æ³•æˆ‘æ˜¯ç»•è¿‡å…¬å¸ç½‘ç»œå®‰å…¨é˜²æŠ¤WAFéªŒè¯çš„ã€‚è¿™POC æ²¡æœ‰è¿”å›ä¿¡æ¯ï¼Œè¯´æ˜å®‰å…¨æ¼æ´å·²ç»ä¿®å¤æ²¡æœ‰å‡ºç°åå¼¹çš„åºåˆ—åŒ–æ¼æ´äº†ã€‚</p>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>ä»Šå¤©ä¸»è¦å¸¦å¤§å®¶äº†è§£å¹¶å®ç°äº†Difyå¹³å°CVE-2025-55182é«˜å±å®‰å…¨æ¼æ´çš„å®Œæ•´æ£€æµ‹ä¸ä¿®å¤æµç¨‹ï¼Œè¯¥æ¼æ´ä»¥"React Server Componentsååºåˆ—åŒ–ç¼ºé™· + CVSS 10.0æ»¡åˆ†è¯„çº§"ä¸ºæ ¸å¿ƒç‰¹å¾ï¼Œç»“åˆNext.js App Routeræ¶æ„å’ŒFlightåè®®çš„ä¸å®‰å…¨ååºåˆ—åŒ–æœºåˆ¶ï¼Œé€šè¿‡æ— éœ€èº«ä»½éªŒè¯çš„æ¶æ„HTTPè¯·æ±‚ç›´æ¥è§¦å‘è¿œç¨‹ä»£ç æ‰§è¡Œï¼Œå½¢æˆäº†ä¸€å¥—ä»æ¼æ´æ£€æµ‹åˆ°å®‰å…¨åŠ å›ºçš„å…¨é“¾è·¯é˜²å¾¡æ–¹æ¡ˆã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¯¥ä¿®å¤æ–¹æ¡ˆä¸ä»…è§£å†³äº†Reactç”Ÿæ€å²ä¸Šæœ€ä¸¥é‡çš„å®‰å…¨æ¼æ´å¨èƒï¼Œè¿˜é€šè¿‡å¯¹æ¯”CSR/SSR/RSCä¸‰ä»£æ¶æ„æ¼”è¿›æ­ç¤ºäº†Flightåè®®è®¾è®¡ç¼ºé™·çš„æ ¹æœ¬åŸå› ï¼ŒæŠ€æœ¯æ·±åº¦è¿œè¶…ç®€å•çš„"æ‰“è¡¥ä¸"æ“ä½œï¼›ç‰¹åˆ«æ˜¯é€šè¿‡çœŸå®çš„ç”Ÿäº§ç¯å¢ƒWAFæ‹¦æˆªæ¡ˆä¾‹ã€å®˜æ–¹é•œåƒæ ‡ç­¾é”™è¯¯è¸©å‘ç»å†ã€å‘¨æœ«ç´§æ€¥å‡çº§ä¸å‘¨ä¸€å¤æµ‹å¤±è´¥çš„è¡€æ³ªæ•™è®­ç­‰å…³é”®ä¿¡æ¯ç‚¹ï¼Œæœ‰æ•ˆå¸®åŠ©å°ä¼™ä¼´ä»¬é¿å¼€å‡çº§è¿‡ç¨‹ä¸­12æœˆ6-8æ—¥æœŸé—´docker-compose.yamlé…ç½®æ–‡ä»¶æœªæ›´æ–°-fix.1åç¼€çš„è‡´å‘½é™·é˜±ã€‚</p>
<p>æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æŒ‰ç…§æ–‡ä¸­æä¾›çš„æ­¥éª¤è¿›è¡Œå®è·µï¼Œæ ¹æ®å®é™…éƒ¨ç½²æ¶æ„è°ƒæ•´é•œåƒç‰ˆæœ¬æ£€æŸ¥å’ŒPOCæµ‹è¯•æ–¹æ³•ã€‚ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œç»“æŸäº†ï¼Œæˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘é¸¿è’™è·¨è®¾å¤‡å®æ—¶æ»¤é•œåŒæ­¥çš„å®Œæ•´æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7581858890608476196</link>    <guid>https://juejin.cn/post/7581858890608476196</guid>    <pubDate>2025-12-10T11:14:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581858890608476196" data-draft-id="7581995152190783530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘é¸¿è’™è·¨è®¾å¤‡å®æ—¶æ»¤é•œåŒæ­¥çš„å®Œæ•´æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="HarmonyOS,ArkTS,ArkUI"/> <meta itemprop="datePublished" content="2025-12-10T11:14:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨å“¥çˆ±ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2242659450109575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘é¸¿è’™è·¨è®¾å¤‡å®æ—¶æ»¤é•œåŒæ­¥çš„å®Œæ•´æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659450109575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨å“¥çˆ±ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:14:37.000Z" title="Wed Dec 10 2025 11:14:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ V å“¥ã€‚é¸¿è’™åœ¨è·¨è®¾å¤‡æ•°æ®ä¼ è¾“çš„èƒ½åŠ›ï¼Œå³ä¸æ»‘åˆé…·ç‚«ï¼Œä»Šå¤©çš„å†…å®¹ï¼ŒV å“¥æƒ³åˆ†äº«ä¸€ä¸‹åŸºäºé¸¿è’™ 6.0ï¼ˆAPI21ï¼‰å®ç°è·¨è®¾å¤‡å®æ—¶æ»¤é•œåŒæ­¥çš„å®Œæ•´æ–¹æ¡ˆï¼Œç»“åˆåˆ†å¸ƒå¼è½¯æ€»çº¿ä¸ <code>PixelMap</code> çš„ååŒå¤„ç†æµç¨‹ï¼š</p>
<p>è”ç³»Vå“¥è·å– <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2F042cb1cc4d7d44ecbdbd902fd1275dcc%3Ftype%3D1%3Fha_source%3Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/042cb1cc4d7d44ecbdbd902fd1275dcc?type=1?ha_source=hmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">é¸¿è’™å­¦ä¹ èµ„æ–™</a></p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€æŠ€æœ¯æ¶æ„è®¾è®¡</h3>

























<table><thead><tr><th>å±‚çº§</th><th>ç»„ä»¶</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åº”ç”¨å±‚</strong></td><td>æ‰‹æœºï¼ˆå®¢æˆ·ç«¯ï¼‰</td><td>è°ƒç”¨ç›¸æœºç”Ÿæˆ <code>PixelMap</code>ï¼Œåº”ç”¨æ»¤é•œç®—æ³•ï¼Œé€šè¿‡ RPC å‘é€æ•°æ®</td></tr><tr><td><strong>ä¼ è¾“å±‚</strong></td><td>åˆ†å¸ƒå¼è½¯æ€»çº¿ï¼ˆSoftBusï¼‰</td><td>è®¾å¤‡è‡ªåŠ¨å‘ç°ã€ä½å»¶è¿Ÿä¼ è¾“æ¸²æŸ“æŒ‡ä»¤æµ</td></tr><tr><td><strong>æ¸²æŸ“å±‚</strong></td><td>å¹³æ¿ï¼ˆæœåŠ¡ç«¯ï¼‰</td><td>æ¥æ”¶ <code>PixelMap</code> æ•°æ®æµï¼Œé€šè¿‡ <code>CanvasRenderer</code> å®æ—¶æ¸²æŸ“</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-1">äºŒã€æ ¸å¿ƒå®ç°æ­¥éª¤</h3>
<h4 data-id="heading-2">1. <strong>ç¯å¢ƒé…ç½®ä¸æƒé™å£°æ˜</strong></h4>
<p>åœ¨ <code>module.json5</code> ä¸­æ·»åŠ åˆ†å¸ƒå¼èƒ½åŠ›ä¸ç›¸æœºæƒé™ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;module&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;requestPermissions&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        &amp;#<span class="hljs-number">34</span>;name&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;ohos.permission.DISTRIBUTED_DATASYNC&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åˆ†å¸ƒå¼æ•°æ®åŒæ­¥</span>
        &amp;#<span class="hljs-number">34</span>;reason&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;è·¨è®¾å¤‡ä¼ è¾“PixelMapæ•°æ®&amp;#<span class="hljs-number">34</span>;
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        &amp;#<span class="hljs-number">34</span>;name&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;ohos.permission.CAMERA&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
        &amp;#<span class="hljs-number">34</span>;usedScene&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> &amp;#<span class="hljs-number">34</span>;abilities&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&amp;#<span class="hljs-number">34</span>;CameraAbility&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;abilities&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        &amp;#<span class="hljs-number">34</span>;name&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;CameraAbility&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
        &amp;#<span class="hljs-number">34</span>;distributedEnabled&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>  <span class="hljs-comment">// å¯ç”¨åˆ†å¸ƒå¼èƒ½åŠ›</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-3">2. <strong>è®¾å¤‡å‘ç°ä¸è¿æ¥ç®¡ç†</strong></h4>
<p>ä½¿ç”¨ <code>DistributedDeviceManager</code> è·å–ç›®æ ‡è®¾å¤‡ NetworkIdï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> distributedDeviceManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.distributedDeviceManager'</span>;

<span class="hljs-comment">// å‘ç°å¯ç”¨è®¾å¤‡</span>
<span class="hljs-keyword">let</span> deviceManager = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(context);
<span class="hljs-keyword">let</span> deviceList = deviceManager.<span class="hljs-title function_">getTrustedDeviceListSync</span>();
<span class="hljs-keyword">let</span> targetDevice = deviceList.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">device</span> =&gt;</span> device.<span class="hljs-property">deviceName</span> === &amp;#<span class="hljs-number">34</span>;å¹³æ¿è®¾å¤‡&amp;#<span class="hljs-number">34</span>;);
<span class="hljs-keyword">let</span> networkId = targetDevice.<span class="hljs-property">networkId</span>;
</code></pre>
<h4 data-id="heading-4">3. <strong>æ‰‹æœºç«¯ï¼šç›¸æœºæ•è·ä¸æ»¤é•œå¤„ç†</strong></h4>
<p>é€šè¿‡ <code>@ohos.multimedia.camera</code> è·å–ç›¸æœºå¸§æ•°æ®å¹¶è½¬æ¢ä¸º <code>PixelMap</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> camera <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.multimedia.camera'</span>;

<span class="hljs-comment">// åˆ›å»ºç›¸æœºé¢„è§ˆæµ</span>
camera.<span class="hljs-title function_">createPreviewOutput</span>(cameraManager, surfaceId).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">previewOutput</span>) =&gt;</span> {
  previewOutput.<span class="hljs-title function_">on</span>(<span class="hljs-string">'frameStart'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// è·å–å›¾åƒæ•°æ®å¹¶åº”ç”¨æ»¤é•œ</span>
    <span class="hljs-keyword">let</span> pixelMap = <span class="hljs-keyword">await</span> image.<span class="hljs-title function_">createPixelMapFromSurface</span>(surfaceId);
    <span class="hljs-keyword">let</span> filteredPixelMap = <span class="hljs-title function_">applySepiaFilter</span>(pixelMap);  <span class="hljs-comment">// ç¤ºä¾‹ï¼šæ£•è¤è‰²æ»¤é•œ</span>
    <span class="hljs-title function_">sendToTablet</span>(filteredPixelMap, networkId);
  });
});

<span class="hljs-comment">// æ»¤é•œç®—æ³•ç¤ºä¾‹ï¼ˆæ£•è¤è‰²è°ƒï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">applySepiaFilter</span>(<span class="hljs-params">pixelMap: image.PixelMap</span>): image.<span class="hljs-property">PixelMap</span> {
  <span class="hljs-keyword">let</span> arrayBuffer = <span class="hljs-keyword">await</span> pixelMap.<span class="hljs-title function_">getImageData</span>();
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arrayBuffer.<span class="hljs-property">length</span>; i += <span class="hljs-number">4</span>) {
    <span class="hljs-keyword">let</span> r = arrayBuffer[i], g = arrayBuffer[i+<span class="hljs-number">1</span>], b = arrayBuffer[i+<span class="hljs-number">2</span>];
    arrayBuffer[i] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">255</span>, (r * <span class="hljs-number">0.393</span>) + (g * <span class="hljs-number">0.769</span>) + (b * <span class="hljs-number">0.189</span>));
    arrayBuffer[i+<span class="hljs-number">1</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">255</span>, (r * <span class="hljs-number">0.349</span>) + (g * <span class="hljs-number">0.686</span>) + (b * <span class="hljs-number">0.168</span>));
    arrayBuffer[i+<span class="hljs-number">2</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">255</span>, (r * <span class="hljs-number">0.272</span>) + (g * <span class="hljs-number">0.534</span>) + (b * <span class="hljs-number">0.131</span>));
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> image.<span class="hljs-title function_">createPixelMapFromData</span>(arrayBuffer, pixelMap.<span class="hljs-title function_">getImageInfo</span>());
}
</code></pre>
<h4 data-id="heading-5">4. <strong>è·¨è®¾å¤‡æ•°æ®ä¼ è¾“ï¼ˆRPC è°ƒç”¨ï¼‰</strong></h4>
<p><strong>æœåŠ¡ç«¯ï¼ˆå¹³æ¿ï¼‰å®šä¹‰è¿œç¨‹æ¥å£</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> rpc <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.rpc'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FilterService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">rpc.RemoteObject</span> {
  <span class="hljs-comment">// æ¥æ”¶æ‰‹æœºç«¯å‘é€çš„PixelMapæ•°æ®</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onRemoteMessageRequest</span>(<span class="hljs-params">code: <span class="hljs-built_in">number</span>, data: rpc.MessageSequence, reply: rpc.MessageSequence</span>) {
    <span class="hljs-keyword">if</span> (code === <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">let</span> pixelMapData = data.<span class="hljs-title function_">readObject</span>() <span class="hljs-keyword">as</span> image.<span class="hljs-property">PixelMap</span>;  <span class="hljs-comment">// ååºåˆ—åŒ–æ•°æ®</span>
      <span class="hljs-title function_">renderOnCanvas</span>(pixelMapData);  <span class="hljs-comment">// åœ¨å¹³æ¿ç«¯æ¸²æŸ“</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}
</code></pre>
<p><strong>å®¢æˆ·ç«¯ï¼ˆæ‰‹æœºï¼‰ç»‘å®šæœåŠ¡å¹¶å‘é€æ•°æ®</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ„é€ Wantå¯¹è±¡ç»‘å®šå¹³æ¿æœåŠ¡</span>
<span class="hljs-keyword">let</span> want = {
  <span class="hljs-attr">bundleName</span>: &amp;#<span class="hljs-number">34</span>;com.<span class="hljs-property">example</span>.<span class="hljs-property">tabletapp</span>&amp;#<span class="hljs-number">34</span>;,
  <span class="hljs-attr">abilityName</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-title class_">FilterServiceAbility</span>&amp;#<span class="hljs-number">34</span>;,
  <span class="hljs-attr">deviceId</span>: networkId  <span class="hljs-comment">// ç›®æ ‡è®¾å¤‡æ ‡è¯†</span>
};

<span class="hljs-comment">// å‘é€æ»¤é•œå¤„ç†åçš„PixelMap</span>
<span class="hljs-keyword">let</span> proxy = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Context</span>.<span class="hljs-title function_">connectService</span>(want);
<span class="hljs-keyword">let</span> data = rpc.<span class="hljs-property">MessageSequence</span>.<span class="hljs-title function_">create</span>();
data.<span class="hljs-title function_">writeObject</span>(pixelMap);
proxy.<span class="hljs-title function_">sendMessageRequest</span>(<span class="hljs-number">1</span>, data);
</code></pre>
<h4 data-id="heading-6">5. <strong>å¹³æ¿ç«¯ï¼šå®æ—¶æ¸²æŸ“ä¸æ˜¾ç¤º</strong></h4>
<p>ä½¿ç”¨ <code>CanvasRenderer</code> æ¸²æŸ“æ¥æ”¶åˆ°çš„ <code>PixelMap</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> ui <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.arkui.ui'</span>;

<span class="hljs-comment">// åˆ›å»ºç”»å¸ƒç»„ä»¶</span>
struct <span class="hljs-title class_">FilterCanvas</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Canvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">onCanvasReady</span>)
      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
  }

  <span class="hljs-title function_">onCanvasReady</span>(<span class="hljs-params">ctx: CanvasRenderingContext2D</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span>) {
      ctx.<span class="hljs-title function_">drawImage</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">360</span>, <span class="hljs-number">640</span>);  <span class="hljs-comment">// æ¸²æŸ“å›¾åƒ</span>
    }
  }

  <span class="hljs-comment">// æ¥æ”¶æ‰‹æœºç«¯æ•°æ®æ›´æ–°UI</span>
  <span class="hljs-title function_">updatePixelMap</span>(<span class="hljs-params">newPixelMap: image.PixelMap</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span> = newPixelMap;
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€æ€§èƒ½ä¼˜åŒ–å…³é”®ç‚¹</h3>
<ol>
<li>
<p><strong>æ•°æ®å‹ç¼©ä¼ è¾“</strong></p>
<ul>
<li>å°† <code>PixelMap</code> è½¬æ¢ä¸º <code>ArrayBuffer</code> åä½¿ç”¨ LZ4 å‹ç¼©ï¼Œå‡å°‘è½¯æ€»çº¿å¸¦å®½å ç”¨ã€‚</li>
<li>ä»£ç ç¤ºä¾‹ï¼š
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> compressedData = zlib.<span class="hljs-title function_">compress</span>(pixelMap.<span class="hljs-title function_">getImageData</span>(), { <span class="hljs-attr">level</span>: <span class="hljs-number">3</span> });
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>æ¸²æŸ“å¸§ç‡æ§åˆ¶</strong></p>
<ul>
<li>é€šè¿‡ <code>requestAnimationFrame</code> é™åˆ¶åˆ·æ–°ç‡ï¼ˆå¦‚ 30fpsï¼‰ï¼Œé¿å…å¹³æ¿ç«¯è¿‡è½½ã€‚</li>
</ul>
</li>
<li>
<p><strong>é”™è¯¯å¤„ç†ä¸é‡è¿</strong></p>
<ul>
<li>ç›‘å¬è®¾å¤‡æ–­å¼€äº‹ä»¶ï¼Œè‡ªåŠ¨åˆ‡æ¢è‡³æœ¬åœ°æ¸²æŸ“ï¼š
<pre><code class="hljs language-typescript" lang="typescript">deviceManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'deviceOffline'</span>, <span class="hljs-function">(<span class="hljs-params">device</span>) =&gt;</span> {
  <span class="hljs-title function_">showDialog</span>(<span class="hljs-string">'è®¾å¤‡æ–­å¼€ï¼Œå·²åˆ‡æ¢æœ¬åœ°æ¨¡å¼'</span>);
  <span class="hljs-title function_">switchToLocalRender</span>();
});
</code></pre>
</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-8">å››ã€å®Œæ•´æµç¨‹ç¤ºæ„å›¾</h3>
<pre><code class="hljs language-css" lang="css">æ‰‹æœºç«¯é‡‡é›† â†’ æ»¤é•œå¤„ç† â†’ è½¯æ€»çº¿ä¼ è¾“ â†’ å¹³æ¿æ¸²æŸ“ â†’ æ˜¾ç¤ºåé¦ˆ
    â†“          â†“           â†“           â†“         â†“
  Camera â†’ PixelMap â†’ RPCè°ƒç”¨ â†’ <span class="hljs-selector-tag">Canvas</span> â†’ UIæ›´æ–°
</code></pre>
<hr/>
<h3 data-id="heading-9">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>è®¾å¤‡å…¼å®¹æ€§</strong>ï¼šéœ€ç¡®ä¿åŒç«¯è®¾å¤‡ä¸º HarmonyOS 6.0 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œä¸”ç™»å½•åŒä¸€åä¸ºè´¦å·ã€‚</li>
<li><strong>å»¶è¿Ÿä¼˜åŒ–</strong>ï¼šè‹¥ä¼ è¾“å»¶è¿Ÿ &gt;100msï¼Œå¯é™ä½å›¾åƒåˆ†è¾¨ç‡ï¼ˆå¦‚ 720pâ†’480pï¼‰ã€‚</li>
<li><strong>éšç§å®‰å…¨</strong>ï¼šä¼ è¾“çš„ <code>PixelMap</code> æ•°æ®éœ€åœ¨æœ¬åœ°å®Œæˆè„±æ•å¤„ç†ï¼Œé¿å…æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚</li>
</ol>
<p>é€šè¿‡ä»¥ä¸Šæ–¹æ¡ˆï¼Œå¯å®ç°æ‰‹æœºæ‹æ‘„åæ»¤é•œæ•ˆæœå®æ—¶åŒæ­¥è‡³å¹³æ¿æ¸²æŸ“ï¼Œå……åˆ†å‘æŒ¥é¸¿è’™åˆ†å¸ƒå¼èƒ½åŠ›ä¸å›¾åƒå¤„ç†æ€§èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter Path.computeMetrics() çš„ä½¿ç”¨æ³¨æ„ç‚¹]]></title>    <link>https://juejin.cn/post/7582003642191937578</link>    <guid>https://juejin.cn/post/7582003642191937578</guid>    <pubDate>2025-12-10T11:20:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582003642191937578" data-draft-id="7581858890608492580" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter Path.computeMetrics() çš„ä½¿ç”¨æ³¨æ„ç‚¹"/> <meta itemprop="keywords" content="Flutter,Android"/> <meta itemprop="datePublished" content="2025-12-10T11:20:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«æŸ´å°±æ˜¯æˆ‘"/> <meta itemprop="url" content="https://juejin.cn/user/272334614705575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter Path.computeMetrics() çš„ä½¿ç”¨æ³¨æ„ç‚¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/272334614705575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«æŸ´å°±æ˜¯æˆ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:20:00.000Z" title="Wed Dec 10 2025 11:20:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€ä¸ªPathè½¬è™šçº¿çš„æ‰©å±•</p>
<pre><code class="hljs language-java" lang="java">extension DashedPathExtension on Path {
  <span class="hljs-comment">/// è½¬æ¢ä¸ºè™šçº¿ Pathï¼ˆå®‰å…¨ç‰ˆï¼‰</span>
  <span class="hljs-comment">/// [solidLength]ï¼šå®çº¿æ®µé•¿åº¦ï¼ˆåƒç´ ï¼‰</span>
  <span class="hljs-comment">/// [gapLength]ï¼šç©ºçº¿æ®µé•¿åº¦ï¼ˆåƒç´ ï¼‰</span>
  <span class="hljs-comment">/// è¿”å›ï¼šæ–°çš„è™šçº¿ Pathï¼ˆåŸ Path ä¸å˜ï¼‰</span>
  Path <span class="hljs-title function_">toDashedPath</span><span class="hljs-params">({
    required <span class="hljs-type">double</span> solidLength,
    required <span class="hljs-type">double</span> gapLength,
  })</span> {
    <span class="hljs-comment">// å‰ç½®å‚æ•°æ ¡éªŒ</span>
    <span class="hljs-keyword">assert</span>(solidLength &gt; <span class="hljs-number">0</span>, &amp;#<span class="hljs-number">34</span>;å®çº¿æ®µé•¿åº¦å¿…é¡»å¤§äº<span class="hljs-number">0</span>&amp;#<span class="hljs-number">34</span>;);
    <span class="hljs-keyword">assert</span>(gapLength &gt;= <span class="hljs-number">0</span>, &amp;#<span class="hljs-number">34</span>;ç©ºçº¿æ®µé•¿åº¦ä¸èƒ½ä¸ºè´Ÿæ•°&amp;#<span class="hljs-number">34</span>;);

    <span class="hljs-comment">// 1. å®‰å…¨è·å– PathMetrics å¹¶æ ¡éªŒ</span>
    <span class="hljs-comment">//final PathMetrics metrics = computeMetrics();</span>
    <span class="hljs-comment">// // æ ¡éªŒ1ï¼šPathMetrics ä¸ºç©º â†’ è¿”å›ç©º Path</span>
    <span class="hljs-comment">//if (metrics.isEmpty) return Path();</span>

    <span class="hljs-comment">// 2. éå† metricsï¼ˆå…¼å®¹å¤šæ®µè·¯å¾„ï¼‰ï¼Œé¿å… first ç›´æ¥æŠ¥é”™</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">Path</span> <span class="hljs-variable">dashedPath</span> <span class="hljs-operator">=</span> Path();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> PathMetric metric in <span class="hljs-title function_">computeMetrics</span><span class="hljs-params">()</span>) {
      <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> <span class="hljs-variable">totalLength</span> <span class="hljs-operator">=</span> metric.length;
      <span class="hljs-comment">// æ ¡éªŒ2ï¼šå•æ®µè·¯å¾„é•¿åº¦ä¸º0 â†’ è·³è¿‡</span>
      <span class="hljs-keyword">if</span> (totalLength &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>;

      <span class="hljs-comment">// 3. å¾ªç¯ç»˜åˆ¶å®çº¿æ®µï¼ˆå§‹ç»ˆä»å®çº¿å¼€å§‹ï¼‰</span>
      <span class="hljs-type">double</span> <span class="hljs-variable">currentDistance</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>;
      <span class="hljs-keyword">while</span> (currentDistance &lt; totalLength) {
        <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> <span class="hljs-variable">solidEnd</span> <span class="hljs-operator">=</span> currentDistance + solidLength;
        <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> <span class="hljs-variable">actualEnd</span> <span class="hljs-operator">=</span> solidEnd &gt; totalLength ? totalLength : solidEnd;

        <span class="hljs-comment">// æå–å®çº¿æ®µå¹¶æ·»åŠ åˆ°è™šçº¿ Path</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">Path</span> <span class="hljs-variable">segment</span> <span class="hljs-operator">=</span> metric.extractPath(currentDistance, actualEnd);
        dashedPath.addPath(segment, Offset.zero);

        <span class="hljs-comment">// è·³è¿‡ç©ºçº¿æ®µ</span>
        currentDistance = solidEnd + gapLength;
      }
    }

    <span class="hljs-keyword">return</span> dashedPath;
  }
}
</code></pre>
<p>æ³¨æ„ç‚¹æ˜¯è¿™ä¸ª</p>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-comment">// 1. å®‰å…¨è·å– PathMetrics å¹¶æ ¡éªŒ</span>
    <span class="hljs-comment">// final PathMetrics metrics = computeMetrics();</span>
    <span class="hljs-comment">// // // æ ¡éªŒ1ï¼šPathMetrics ä¸ºç©º â†’ è¿”å›ç©º Path</span>
    <span class="hljs-comment">// if (metrics.isEmpty) return Path();</span>
</code></pre>
<p>è¿™é‡Œè°ƒç”¨äº† metrics.isEmpty()</p>
<pre><code class="hljs language-js" lang="js">  bool get isEmpty =&gt; !iterator.<span class="hljs-title function_">moveNext</span>();
</code></pre>
<p>ä¹Ÿå°±æ˜¯è°ƒç”¨äº†è¿­ä»£å™¨çš„moveNext() å†æ¬¡éå†metrics å°±ä¼šä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹ã€‚
å¦‚æœè¿­ä»£å™¨æœ¬èº«åªæœ‰ä¸€ä¸ªå…ƒç´ ,è¿™ä¸ªæ—¶å€™è°ƒç”¨metrics.first æ•‘æŠ¤æŠ¥é”™no elementã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Expo (React Native) æœ¬åœ°å­˜å‚¨å…¨æ”»ç•¥ï¼šæ™®é€šæ•°æ®ä¸æ•æ„Ÿæ•°æ®è¯¥å­˜å“ªï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582036070159269888</link>    <guid>https://juejin.cn/post/7582036070159269888</guid>    <pubDate>2025-12-10T11:29:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582036070159269888" data-draft-id="7581876069609504811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Expo (React Native) æœ¬åœ°å­˜å‚¨å…¨æ”»ç•¥ï¼šæ™®é€šæ•°æ®ä¸æ•æ„Ÿæ•°æ®è¯¥å­˜å“ªï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,React Native"/> <meta itemprop="datePublished" content="2025-12-10T11:29:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®è›‹å°ç²¾çµ"/> <meta itemprop="url" content="https://juejin.cn/user/219558056559278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Expo (React Native) æœ¬åœ°å­˜å‚¨å…¨æ”»ç•¥ï¼šæ™®é€šæ•°æ®ä¸æ•æ„Ÿæ•°æ®è¯¥å­˜å“ªï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/219558056559278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®è›‹å°ç²¾çµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:29:43.000Z" title="Wed Dec 10 2025 11:29:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ä¸­ï¼Œ<strong>æ•°æ®æŒä¹…åŒ–</strong>ï¼ˆData Persistenceï¼‰æ˜¯ç»•ä¸å¼€çš„è¯é¢˜ã€‚æ— è®ºæ˜¯ä¸ºäº†è®©ç”¨æˆ·å…äºé‡å¤ç™»å½•ï¼Œè¿˜æ˜¯ä¿å­˜ç”¨æˆ·çš„åå¥½è®¾ç½®ï¼ˆå¦‚æ·±è‰²æ¨¡å¼ï¼‰ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å°†æ•°æ®å­˜å‚¨åœ¨ç”¨æˆ·çš„è®¾å¤‡ä¸Šã€‚</p>
<p>å¯¹äºä½¿ç”¨ Expo å¼€å‘çš„ React Native é¡¹ç›®ï¼Œå®˜æ–¹æ¨èäº†ä¸¤ç§æˆªç„¶ä¸åŒçš„å­˜å‚¨æ–¹æ¡ˆï¼š<strong><code>AsyncStorage</code></strong> å’Œ <strong><code>expo-secure-store</code></strong>ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥è§£æè¿™ä¸¤è€…çš„åŒºåˆ«ã€é€‚ç”¨åœºæ™¯ï¼Œå¹¶æ•™ä½ å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä¼˜é›…åœ°å°è£…å®ƒä»¬ã€‚</p>
<hr/>
<h2 data-id="heading-0">æ–¹æ¡ˆä¸€ï¼šAsyncStorageï¼ˆé€šç”¨å­˜å‚¨ï¼‰</h2>
<p><strong>AsyncStorage</strong> æ˜¯ React Native ç¤¾åŒºç»´æŠ¤çš„ä¸€ä¸ªå¼‚æ­¥ã€éåŠ å¯†çš„é”®å€¼å¯¹ï¼ˆKey-Valueï¼‰å­˜å‚¨ç³»ç»Ÿã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆæµè§ˆå™¨ç«¯çš„ <code>localStorage</code>ã€‚</p>
<h3 data-id="heading-1">1. é€‚ç”¨åœºæ™¯</h3>
<p>ç”±äºå®ƒæ˜¯<strong>æœªåŠ å¯†</strong>çš„ï¼Œä»»ä½•æ‹¥æœ‰è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿè®¿é—®æƒé™çš„äººï¼ˆæˆ–æ¶æ„è½¯ä»¶ï¼‰éƒ½èƒ½è¯»å–è¿™äº›æ•°æ®ã€‚å› æ­¤ï¼Œå®ƒ<strong>åªé€‚åˆ</strong>å­˜å‚¨ï¼š</p>
<ul>
<li>âœ… ç”¨æˆ·åå¥½è®¾ç½®ï¼ˆå¦‚ï¼šæ˜¯å¦å¼€å¯æ¨é€ã€è¯­è¨€è®¾ç½®ã€ä¸»é¢˜è‰²ï¼‰</li>
<li>âœ… åº”ç”¨ç¼“å­˜æ•°æ®ï¼ˆå¦‚ï¼šé¦–é¡µçš„ä¸´æ—¶æ•°æ®åˆ—è¡¨ï¼‰</li>
<li>âœ… Redux/Zustand çŠ¶æ€çš„æŒä¹…åŒ–</li>
<li>âŒ <strong>ç»å¯¹ä¸è¦å­˜</strong>ï¼šç”¨æˆ·å¯†ç ã€èº«ä»½è®¤è¯ Tokenã€ä¿¡ç”¨å¡ä¿¡æ¯</li>
</ul>
<h3 data-id="heading-2">2. å®‰è£…</h3>
<pre><code class="hljs language-Bash" lang="Bash">npx expo install @react-native-async-storage/async-storage
</code></pre>
<h3 data-id="heading-3">3. ä½¿ç”¨ç¤ºä¾‹</h3>
<p>AsyncStorage åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ã€‚å¦‚æœä½ è¦å­˜å‚¨å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨ <code>JSON.stringify</code> å’Œ <code>JSON.parse</code> è¿›è¡Œè½¬æ¢ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">AsyncStorage</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@react-native-async-storage/async-storage'</span>;

<span class="hljs-comment">// 1. å­˜å‚¨æ•°æ® (Key å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼ŒValue ä¹Ÿå¿…é¡»æ˜¯å­—ç¬¦ä¸²)</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">saveSettings</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'app_theme'</span>, <span class="hljs-string">'dark'</span>);
    <span class="hljs-comment">// å­˜å‚¨å¯¹è±¡éœ€åºåˆ—åŒ–</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'user_profile'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> }));
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä¿å­˜å¤±è´¥'</span>, e);
  }
};

<span class="hljs-comment">// 2. è¯»å–æ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadSettings</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> theme = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'app_theme'</span>);
    
    <span class="hljs-keyword">const</span> jsonValue = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'user_profile'</span>);
    <span class="hljs-keyword">const</span> userProfile = jsonValue != <span class="hljs-literal">null</span> ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(jsonValue) : <span class="hljs-literal">null</span>;
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(theme, userProfile);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–å¤±è´¥'</span>, e);
  }
};

<span class="hljs-comment">// 3. åˆ é™¤/æ¸…ç©º</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">clearData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'app_theme'</span>); <span class="hljs-comment">// åˆ é™¤å•ä¸ª</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">clear</span>(); <span class="hljs-comment">// æ¸…ç©ºæ‰€æœ‰ï¼ˆæ…ç”¨ï¼‰</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-4">æ–¹æ¡ˆäºŒï¼šexpo-secure-storeï¼ˆå®‰å…¨å­˜å‚¨ï¼‰</h2>
<p><strong>SecureStore</strong> æ˜¯ Expo æä¾›çš„ä¸€ä¸ªåº“ï¼Œå®ƒåˆ©ç”¨äº†æ“ä½œç³»ç»Ÿåº•å±‚çš„å®‰å…¨æœºåˆ¶æ¥åŠ å¯†å­˜å‚¨æ•°æ®ã€‚</p>
<ul>
<li><strong>iOS</strong>: ä½¿ç”¨ <strong>Keychain Services</strong>ï¼ˆé’¥åŒ™ä¸²ï¼‰ã€‚</li>
<li><strong>Android</strong>: ä½¿ç”¨ <strong>SharedPreferences</strong>ï¼ˆé…åˆ Keystore åŠ å¯†ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-5">1. é€‚ç”¨åœºæ™¯</h3>
<p>è¿™æ˜¯å­˜å‚¨æ•æ„Ÿæ•°æ®çš„å”¯ä¸€æ­£ç¡®é€‰æ‹©ï¼š</p>
<ul>
<li>âœ… èº«ä»½è®¤è¯ Token (Auth Token / Refresh Token)</li>
<li>âœ… ç”¨æˆ·å¯†ç  (Password)</li>
<li>âœ… API å¯†é’¥ (API Keys)</li>
</ul>
<h3 data-id="heading-6">2. å®‰è£…</h3>
<pre><code class="hljs language-Bash" lang="Bash">npx expo install expo-secure-store
</code></pre>
<h3 data-id="heading-7">3. ä½¿ç”¨ç¤ºä¾‹</h3>
<p>API ä¸ AsyncStorage éå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒä¿è¯äº†æ•°æ®æ˜¯åŠ å¯†è½ç›˜çš„ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">SecureStore</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'expo-secure-store'</span>;

<span class="hljs-comment">// 1. å­˜å‚¨æ•æ„Ÿæ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">saveToken</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">token: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-comment">// æ³¨æ„ï¼šKey å’Œ Value éƒ½å¿…é¡»æ˜¯å­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">setItemAsync</span>(<span class="hljs-string">'user_token'</span>, token);
};

<span class="hljs-comment">// 2. è¯»å–æ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getToken</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">getItemAsync</span>(<span class="hljs-string">'user_token'</span>);
  <span class="hljs-keyword">if</span> (token) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–åˆ° Token:'</span>, token);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœªæ‰¾åˆ° Token'</span>);
  }
};

<span class="hljs-comment">// 3. åˆ é™¤æ•°æ® (å¦‚ç”¨æˆ·ç™»å‡ºæ—¶)</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">removeToken</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">deleteItemAsync</span>(<span class="hljs-string">'user_token'</span>);
};
</code></pre>
<hr/>
<h2 data-id="heading-8">æ·±åº¦å¯¹æ¯”ï¼šè¯¥é€‰å“ªä¸€ä¸ªï¼Ÿ</h2>



































<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>AsyncStorage</strong></th><th><strong>SecureStore</strong></th></tr></thead><tbody><tr><td><strong>å®‰å…¨æ€§</strong></td><td>ğŸš¨ <strong>ä½</strong> (æ˜æ–‡å­˜å‚¨ï¼Œç±»ä¼¼ TXT æ–‡ä»¶)</td><td>ğŸ”’ <strong>é«˜</strong> (OS çº§ç¡¬ä»¶åŠ å¯†)</td></tr><tr><td><strong>å­˜å‚¨å®¹é‡</strong></td><td>è¾ƒå¤§ (å‡  MB åˆ°å‡ å MB æ²¡é—®é¢˜)</td><td>æå° (å»ºè®®åªå­˜ &lt; 2KB çš„çŸ­å­—ç¬¦ä¸²)</td></tr><tr><td><strong>è¯»å†™é€Ÿåº¦</strong></td><td>å¿«</td><td>ç¨æ…¢ (æ¶‰åŠè§£å¯†è¿‡ç¨‹)</td></tr><tr><td><strong>æ•°æ®ç±»å‹</strong></td><td>ä»…å­—ç¬¦ä¸² (éœ€æ‰‹åŠ¨ JSON åºåˆ—åŒ–)</td><td>ä»…å­—ç¬¦ä¸²</td></tr><tr><td><strong>æ ¸å¿ƒç”¨é€”</strong></td><td>ç¼“å­˜ã€è®¾ç½®ã€éæ•æ„ŸçŠ¶æ€</td><td><strong>Tokenã€å¯†ç ã€è¯ä¹¦</strong></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-9">æœ€ä½³å®è·µï¼šå°è£…ç»Ÿä¸€çš„å­˜å‚¨å·¥å…·</h2>
<p>åœ¨çœŸå®çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸åº”è¯¥åœ¨ UI ç»„ä»¶é‡Œç›´æ¥è°ƒç”¨ <code>AsyncStorage</code> æˆ– <code>SecureStore</code>ï¼Œè€Œæ˜¯åº”è¯¥å°è£…ä¸€ä¸ªå·¥å…·æ¨¡å—ã€‚è¿™æ ·æ—¢èƒ½ç»Ÿä¸€ç®¡ç† Keyï¼Œåˆèƒ½å±è”½åº•å±‚å®ç°çš„å·®å¼‚ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ¨èçš„ <strong><code>utils/storage.ts</code></strong> å°è£…ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// utils/storage.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AsyncStorage</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@react-native-async-storage/async-storage'</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">SecureStore</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'expo-secure-store'</span>;

<span class="hljs-comment">// å®šä¹‰æ‰€æœ‰çš„ Keyï¼Œé˜²æ­¢æ‰‹è¯¯å†™é”™</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEYS</span> = {
  <span class="hljs-attr">TOKEN</span>: <span class="hljs-string">'auth_token'</span>,
  <span class="hljs-attr">USER_INFO</span>: <span class="hljs-string">'user_info'</span>,
  <span class="hljs-attr">THEME</span>: <span class="hljs-string">'app_theme'</span>,
};

<span class="hljs-comment">/**
 * æ•æ„Ÿæ•°æ®å­˜å‚¨å·¥å…· (ä½¿ç”¨ SecureStore)
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AuthStorage</span> = {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">setToken</span>(<span class="hljs-params">token: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">setItemAsync</span>(<span class="hljs-variable constant_">KEYS</span>.<span class="hljs-property">TOKEN</span>, token);
  },

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getToken</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">getItemAsync</span>(<span class="hljs-variable constant_">KEYS</span>.<span class="hljs-property">TOKEN</span>);
  },

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">clearToken</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">deleteItemAsync</span>(<span class="hljs-variable constant_">KEYS</span>.<span class="hljs-property">TOKEN</span>);
  },
};

<span class="hljs-comment">/**
 * æ™®é€šæ•°æ®å­˜å‚¨å·¥å…· (ä½¿ç”¨ AsyncStorage)
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AppStorage</span> = {
  <span class="hljs-comment">// å°è£…å¯¹è±¡å­˜å‚¨ï¼Œè‡ªåŠ¨å¤„ç† JSON è½¬æ¢</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">setUser</span>(<span class="hljs-params">user: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> jsonValue = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(user);
      <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-variable constant_">KEYS</span>.<span class="hljs-property">USER_INFO</span>, jsonValue);
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Saving user failed'</span>, e);
    }
  },

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> jsonValue = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable constant_">KEYS</span>.<span class="hljs-property">USER_INFO</span>);
      <span class="hljs-keyword">return</span> jsonValue != <span class="hljs-literal">null</span> ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(jsonValue) : <span class="hljs-literal">null</span>;
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Loading user failed'</span>, e);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
  },
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">clearAll</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">clear</span>();
  }
};
</code></pre>
<h3 data-id="heading-10">å¦‚ä½•åœ¨ä¸šåŠ¡ä¸­ä½¿ç”¨ï¼Ÿ</h3>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthStorage</span>, <span class="hljs-title class_">AppStorage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/storage'</span>;

<span class="hljs-comment">// ç™»å½•æˆåŠŸå</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLoginSuccess</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">apiResponse</span>) =&gt; {
    <span class="hljs-keyword">const</span> { token, user } = apiResponse;
    
    <span class="hljs-comment">// 1. Token è¿›ä¿é™©ç®±</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AuthStorage</span>.<span class="hljs-title function_">setToken</span>(token);
    
    <span class="hljs-comment">// 2. ç”¨æˆ·ä¿¡æ¯è¿›æ™®é€šä»“åº“</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setUser</span>(user);
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç™»å½•æ•°æ®å·²æŒä¹…åŒ–'</span>);
};

<span class="hljs-comment">// é€€å‡ºç™»å½•æ—¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogout</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AuthStorage</span>.<span class="hljs-title function_">clearToken</span>();
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setUser</span>(<span class="hljs-literal">null</span>); 
};
</code></pre>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>åœ¨ React Native (Expo) å¼€å‘ä¸­ï¼Œè¯·åŠ¡å¿…éµå®ˆ <strong>â€œæ•°æ®åˆ†çº§â€</strong> åŸåˆ™ï¼š</p>
<ol>
<li><strong>Token å’Œå¯†ç </strong>ï¼šå¿…é¡»é€šè¿‡ <code>expo-secure-store</code> æ”¾å…¥ç³»ç»Ÿçš„â€œä¿é™©ç®±â€ã€‚</li>
<li><strong>è®¾ç½®å’Œç¼“å­˜</strong>ï¼šå¯ä»¥é€šè¿‡ <code>@react-native-async-storage/async-storage</code> æ”¾å…¥æ™®é€šçš„â€œå‚¨ç‰©æŸœâ€ã€‚</li>
</ol>
<p>é€šè¿‡åˆç†çš„å°è£…ï¼Œä½ å¯ä»¥è®©ä»£ç æ›´å®‰å…¨ã€æ›´æ•´æ´ï¼Œä¹Ÿæ›´æ˜“äºç»´æŠ¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VS Codeç»ˆç«¯ä»å…¥é—¨åˆ°ç²¾é€šå®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7581995152190849066</link>    <guid>https://juejin.cn/post/7581995152190849066</guid>    <pubDate>2025-12-10T11:32:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581995152190849066" data-draft-id="7582003642191986730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VS Codeç»ˆç«¯ä»å…¥é—¨åˆ°ç²¾é€šå®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T11:32:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VS Codeç»ˆç«¯ä»å…¥é—¨åˆ°ç²¾é€šå®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:32:13.000Z" title="Wed Dec 10 2025 11:32:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“å‰ï¼ŒVisual Studio Codeçš„é›†æˆç»ˆç«¯å·²æˆä¸ºå¼€å‘è€…æ—¥å¸¸å·¥ä½œä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚å®ƒä¸ä»…èƒ½è¿è¡Œ <code>echo</code>ã€ <code>ls</code> å’Œ <code>git</code> ç­‰å‘½ä»¤ï¼Œè¿˜ä¸ç¼–è¾‘å™¨æ·±åº¦é›†æˆï¼Œæ”¯æŒå·¥ä½œåŒºæ–‡ä»¶é“¾æ¥å’Œé”™è¯¯æ£€æµ‹ç­‰åŠŸèƒ½ã€‚æ— è®ºä½ æ˜¯ä½¿ç”¨Bashã€Zshè¿˜æ˜¯PowerShellï¼ŒVS Codeç»ˆç«¯éƒ½èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚</p>
<p>æ‰“å¼€ç»ˆç«¯çš„ä¸‰ç§æ–¹å¼ï¼š</p>
<ul>
<li>å¿«æ·é”®ï¼š <code>Ctrl+``ï¼ˆWindows/Linuxï¼‰æˆ–</code>Cmd+``ï¼ˆmacOSï¼‰</li>
<li>èœå•æ ï¼š<strong>æŸ¥çœ‹ &gt; ç»ˆç«¯</strong></li>
<li>å‘½ä»¤é¢æ¿ï¼š <code>Ctrl+Shift+P</code> è¾“å…¥<strong>ç»ˆç«¯ï¼šæ–°å»ºç»ˆç«¯</strong></li>
</ul>
<p>ç»ˆç«¯é»˜è®¤å·¥ä½œç›®å½•ä¸ºå½“å‰æ‰“å¼€çš„VS Codeé¡¹ç›®æ ¹ç›®å½•ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç›´æ¥è¿è¡Œä¸é¡¹ç›®ç›¸å…³çš„å‘½ä»¤ï¼Œæ— éœ€é¢å¤–åˆ‡æ¢è·¯å¾„ã€‚</p>
<h2 data-id="heading-0">åŸºç¡€æ“ä½œ</h2>
<p>VS Codeç»ˆç«¯æä¾›ä¸°å¯Œçš„äº¤äº’åŠŸèƒ½ï¼Œè®©ä½ èƒ½å¤Ÿé«˜æ•ˆåœ°ä¸å‘½ä»¤è¾“å‡ºè¿›è¡Œäº¤äº’ã€‚å‘½ä»¤é€šå¸¸ä¼šè¾“å‡ºæ–‡ä»¶è·¯å¾„æˆ–URLï¼Œä½ åªéœ€æŒ‰ä½Ctrl/Cmdé”®ï¼Œå°†é¼ æ ‡æ‚¬åœåœ¨æ–‡ä»¶åä¸Šï¼Œç„¶åç‚¹å‡»é“¾æ¥ï¼ŒVS Codeä¼šè‡ªåŠ¨åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€è¯¥æ–‡ä»¶ã€‚å¯¹äºURLï¼Œç‚¹å‡»åä¼šåœ¨é»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84d6c57dd60b450e92beef7718da6538~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqL5ryr6LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765971132&amp;x-signature=4H%2FOhO%2FDF18%2BzKMRRk2OyHbSps8%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¸å¿ƒå¿«æ·é”®ä¸€è§ˆï¼š</p>
<ul>
<li>æ–°å»ºç»ˆç«¯ï¼š `Ctrl+Shift+``</li>
<li>åˆ‡æ¢ç»ˆç«¯ï¼š <code>Ctrl+PageUp/PageDown</code></li>
<li>åˆ†å±ç»ˆç«¯ï¼š <code>Ctrl+\</code>ï¼ˆWindows/Linuxï¼‰æˆ– <code>Cmd+\</code>ï¼ˆmacOSï¼‰</li>
<li>å…³é—­ç»ˆç«¯ï¼š <code>Ctrl+Shift+W</code></li>
</ul>
<p>å‘½ä»¤å†å²å¯¼èˆªï¼š</p>
<ul>
<li>å‘ä¸ŠæŸ¥çœ‹å†å²å‘½ä»¤ï¼š <code>â†‘</code> é”®</li>
<li>å‘ä¸‹æŸ¥çœ‹å†å²å‘½ä»¤ï¼š <code>â†“</code> é”®</li>
<li>æœç´¢å†å²å‘½ä»¤ï¼š <code>Ctrl+R</code>ï¼ˆBash/Zshï¼‰æˆ– <code>F8</code>ï¼ˆPowerShellï¼‰</li>
</ul>
<p>åˆ›å»ºå‘½ä»¤åˆ—è¡¨æ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Bash/Zsh</span>
<span class="hljs-built_in">ls</span> -l /usr/bin &gt; Command.txt

<span class="hljs-comment"># PowerShell</span>
Get-Command | Out-File -FilePath .\Command.txt
</code></pre>
<h2 data-id="heading-1">é…ç½®æ–‡ä»¶</h2>
<p>ç»ˆç«¯é…ç½®æ–‡ä»¶æ˜¯ç‰¹å®šäºå¹³å°çš„shellé…ç½®ï¼Œç”±å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ã€å‚æ•°å’Œå…¶ä»–è‡ªå®šä¹‰é¡¹ç»„æˆã€‚VS Codeä¼šè‡ªåŠ¨æ£€æµ‹å‡ ä¸ªå¸¸è§çš„é…ç½®æ–‡ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè‡ªå®šä¹‰æˆ–æ·»åŠ æ–°çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>è®¾ç½®é»˜è®¤é…ç½®æ–‡ä»¶æ­¥éª¤ï¼š</p>
<ul>
<li>æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆ <code>Ctrl+Shift+P</code>ï¼‰</li>
<li>æœç´¢"ç»ˆç«¯: é€‰æ‹©é»˜è®¤é…ç½®æ–‡ä»¶"</li>
<li>ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©ä½ å¸¸ç”¨çš„shell</li>
</ul>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒLinuxå’ŒmacOSä¸Šçš„é»˜è®¤shellæ˜¯ <code>$SHELL</code> ç¯å¢ƒå˜é‡æŒ‡å®šçš„ç¨‹åºï¼ŒWindowsç³»ç»Ÿé»˜è®¤ä½¿ç”¨PowerShellã€‚</p>
<p>è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼ˆsettings.jsonï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.profiles.windows&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;PowerShell - NoProfile&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      &amp;#<span class="hljs-number">34</span>;source&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;PowerShell&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
      &amp;#<span class="hljs-number">34</span>;args&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&amp;#<span class="hljs-number">34</span>;-NoProfile&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;Git Bash&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      &amp;#<span class="hljs-number">34</span>;path&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;C<span class="hljs-punctuation">:</span>\\Program Files\\Git\\bin\\bash.exe&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
      &amp;#<span class="hljs-number">34</span>;args&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&amp;#<span class="hljs-number">34</span>;--login&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.defaultProfile.windows&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;Git Bash&amp;#<span class="hljs-number">34</span>;
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-2">Shellé›†æˆ</h2>
<p>VS Codeèƒ½å¤Ÿä¸å¸¸è§çš„Shellé›†æˆï¼Œä½¿ç»ˆç«¯å¯ä»¥æ›´æ·±å…¥åœ°äº†è§£Shellå†…éƒ¨çš„æƒ…å†µã€‚è¿™ç§é›†æˆå¯ç”¨äº†å·¥ä½œç›®å½•æ£€æµ‹ã€å‘½ä»¤æ£€æµ‹ã€è£…é¥°å’Œå¯¼èˆªç­‰æœ‰ç”¨åŠŸèƒ½ã€‚</p>
<p>æ”¯æŒçš„ShellåŒ…æ‹¬Linux/macOSä¸Šçš„bashã€fishã€pwshã€zshï¼Œä»¥åŠWindowsä¸Šçš„Git Bashå’Œpwshã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä»VS Codeå¯åŠ¨å—æ”¯æŒçš„Shellæ—¶ï¼ŒShellé›†æˆè„šæœ¬ä¼šè‡ªåŠ¨æ¿€æ´»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44b355fbec424e5e8275491b8a54f1f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqL5ryr6LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765971132&amp;x-signature=NXlmF6%2Fyz06hJSfBTsrjT04vTVs%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰‹åŠ¨å®‰è£…Shellé›†æˆï¼ˆä»¥bashä¸ºä¾‹ï¼‰ï¼š</p>
<ul>
<li>æ‰“å¼€é…ç½®æ–‡ä»¶ï¼š <code>code ~/.bashrc</code></li>
<li>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">[[ &amp;<span class="hljs-comment">#34;$TERM_PROGRAM&amp;#34; == &amp;#34;vscode&amp;#34; ]] &amp;&amp; . &amp;#34;$(code --locate-shell-integration-path bash)&amp;#34;</span>
</code></pre>
<ul>
<li>é‡æ–°åŠ è½½é…ç½®ï¼š <code>source ~/.bashrc</code></li>
</ul>
<p>Shellé›†æˆè´¨é‡åˆ†ä¸º"æ— "ã€"ä¸°å¯Œ"å’Œ"åŸºæœ¬"ä¸‰ä¸ªç­‰çº§ã€‚å°†é¼ æ ‡æ‚¬åœåœ¨ç»ˆç«¯é€‰é¡¹å¡ä¸Šå¯ä»¥æŸ¥çœ‹å½“å‰çš„é›†æˆè´¨é‡çŠ¶æ€ã€‚</p>
<h2 data-id="heading-3">å¤–è§‚è®¾ç½®</h2>
<p>VS Codeç»ˆç«¯çš„å¤–è§‚å¯ä»¥è¿›è¡Œå¹¿æ³›çš„è‡ªå®šä¹‰ï¼ŒåŒ…æ‹¬æ–‡æœ¬æ ·å¼ã€å…‰æ ‡æ ·å¼å’Œé€‰é¡¹å¡ç­‰ã€‚é€šè¿‡è°ƒæ•´è¿™äº›è®¾ç½®ï¼Œä½ å¯ä»¥æ‰“é€ ä¸€ä¸ªæ—¢ç¾è§‚åˆç¬¦åˆä¸ªäººä¹ æƒ¯çš„ç»ˆç«¯ç¯å¢ƒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae78ca4728114d5d88c0be960dc88101~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqL5ryr6LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765971132&amp;x-signature=h5QGs71bzL1R1B1B3xBrAw6u6bY%3D" alt="image.png" loading="lazy"/></p>
<p>å¸¸ç”¨å¤–è§‚è®¾ç½®ï¼ˆsettings.jsonï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.fontFamily&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;'Fira Code'<span class="hljs-punctuation">,</span> 'Hack NF'<span class="hljs-punctuation">,</span> monospace&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.fontSize&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">14</span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.lineHeight&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">1.2</span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.cursorStyle&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;line&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.cursorWidth&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.cursorBlinking&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;workbench.colorCustomizations&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;terminal.background&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;#<span class="hljs-number">1e1</span>e1e&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;terminal.foreground&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;#e0e0e0&amp;#<span class="hljs-number">34</span>;
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Powerlineå’ŒNerd Fontsé…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json">&amp;#<span class="hljs-number">34</span>;terminal.integrated.fontFamily&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;'DejaVu Sans Mono for Powerline'<span class="hljs-punctuation">,</span> 'Hack NF'&amp;#<span class="hljs-number">34</span>;
</code></pre>
<h2 data-id="heading-4">é«˜çº§åŠŸèƒ½</h2>
<p>VS Codeç»ˆç«¯æä¾›äº†è®¸å¤šé«˜çº§åŠŸèƒ½ï¼Œå¸®åŠ©ä½ è¿›ä¸€æ­¥æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-5">æŒä¹…ä¼šè¯</h3>
<p>ç»ˆç«¯æ”¯æŒä¸¤ç§æŒä¹…ä¼šè¯ç±»å‹ï¼š</p>
<ul>
<li>è¿›ç¨‹é‡æ–°è¿æ¥ï¼šé‡æ–°åŠ è½½çª—å£æ—¶é‡æ–°è¿æ¥åˆ°å…ˆå‰çš„è¿›ç¨‹</li>
<li>è¿›ç¨‹æ¢å¤ï¼šé‡æ–°å¯åŠ¨VS Codeæ—¶æ¢å¤ç»ˆç«¯å†…å®¹å¹¶é‡æ–°å¯åŠ¨è¿›ç¨‹</li>
</ul>
<p>ç¦ç”¨æŒä¹…ä¼šè¯ï¼š</p>
<pre><code class="hljs language-json" lang="json">&amp;#<span class="hljs-number">34</span>;terminal.integrated.enablePersistentSessions&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
</code></pre>
<h3 data-id="heading-6">å‘½ä»¤åˆ«åè®¾ç½®</h3>
<p>é€šè¿‡shellé…ç½®æ–‡ä»¶å®ç°å¸¸ç”¨å‘½ä»¤çš„å¿«æ·æ–¹å¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Bash/Zshç”¨æˆ·ç¼–è¾‘~/.bashrcæˆ–~/.zshrc</span>
<span class="hljs-built_in">alias</span> ll=<span class="hljs-string">'ls -la'</span>
<span class="hljs-built_in">alias</span> gs=<span class="hljs-string">'git status'</span>
<span class="hljs-built_in">alias</span> gp=<span class="hljs-string">'git push'</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/787d064309364ed6968e86f8009678a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqL5ryr6LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765971132&amp;x-signature=BjsdY09agq3FF9p5UzyLkJ4TOyc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">è‡ªå®šä¹‰é”®ç›˜å¿«æ·é”®</h3>
<p>åœ¨keybindings.jsonä¸­é…ç½®ç»ˆç«¯å¿«æ·é”®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;key&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;ctrl+shift+t&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;command&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;workbench.action.terminal.sendSequence&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;args&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> &amp;#<span class="hljs-number">34</span>;text&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;npm run dev\n&amp;#<span class="hljs-number">34</span>; <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-8">å¤šç»ˆç«¯ç®¡ç†</h3>
<ul>
<li>é‡å‘½åç»ˆç«¯ï¼šå³é”®ç»ˆç«¯é€‰é¡¹å¡ &gt; <strong>é‡å‘½å</strong></li>
<li>ç§»åŠ¨ç»ˆç«¯ï¼šæ‹–æ‹½ç»ˆç«¯é€‰é¡¹å¡åˆ°ç¼–è¾‘å™¨åŒºåŸŸæˆ–æ–°çª—å£</li>
<li>ç»ˆç«¯åˆ†ç»„ï¼šå³é”®ç»ˆç«¯ &gt; <strong>ç§»åŠ¨åˆ°æ–°ç»„</strong></li>
</ul>
<h3 data-id="heading-9">ä»»åŠ¡è‡ªåŠ¨åŒ–</h3>
<p>åœ¨å·¥ä½œåŒºæ ¹ç›®å½•åˆ›å»º <code>.vscode/tasks.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;version&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">2.0</span><span class="hljs-number">.0</span>&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;tasks&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      &amp;#<span class="hljs-number">34</span>;label&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;å¯åŠ¨å¼€å‘æœåŠ¡å™¨&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
      &amp;#<span class="hljs-number">34</span>;type&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;shell&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
      &amp;#<span class="hljs-number">34</span>;command&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;npm run dev&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
      &amp;#<span class="hljs-number">34</span>;group&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        &amp;#<span class="hljs-number">34</span>;kind&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;build&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
        &amp;#<span class="hljs-number">34</span>;isDefault&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      &amp;#<span class="hljs-number">34</span>;problemMatcher&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä½¿ç”¨ <code>Ctrl+Shift+B</code> å¿«é€Ÿè¿è¡Œä»»åŠ¡ã€‚</p>
<p>VS Codeç»ˆç«¯ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå·¥å…·ï¼Œå®ƒæ˜¯ä½ å¼€å‘å·¥ä½œæµçš„æ ¸å¿ƒéƒ¨åˆ†ã€‚èŠ±æ—¶é—´é…ç½®å¥½ç»ˆç«¯ï¼Œæ¯å¤©èŠ‚çœçš„æ“ä½œæ—¶é—´ä¼šç´¯ç§¯æˆæ˜¾è‘—çš„æ•ˆç‡ä¼˜åŠ¿ã€‚æ— è®ºä½ æ˜¯åˆšå…¥é—¨çš„æ–°æ‰‹è¿˜æ˜¯ç»éªŒä¸°å¯Œçš„å¼€å‘è€…ï¼ŒæŒæ¡è¿™äº›ç»ˆç«¯æŠ€å·§éƒ½å°†ä½¿ä½ çš„VS Codeä½“éªŒæ›´åŠ æµç•…å’Œé«˜æ•ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç°ä»£C++ç³»ç»Ÿç¼–ç¨‹ä¸­ç±»å‹é‡è§£é‡Šçš„å†…å­˜å®‰å…¨èŒƒå¼]]></title>    <link>https://juejin.cn/post/7581858890608574500</link>    <guid>https://juejin.cn/post/7581858890608574500</guid>    <pubDate>2025-12-10T11:35:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581858890608574500" data-draft-id="7581876069609553963" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç°ä»£C++ç³»ç»Ÿç¼–ç¨‹ä¸­ç±»å‹é‡è§£é‡Šçš„å†…å­˜å®‰å…¨èŒƒå¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T11:35:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç°ä»£C++ç³»ç»Ÿç¼–ç¨‹ä¸­ç±»å‹é‡è§£é‡Šçš„å†…å­˜å®‰å…¨èŒƒå¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:35:30.000Z" title="Wed Dec 10 2025 11:35:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åº•å±‚ç³»ç»Ÿç¼–ç¨‹é¢†åŸŸï¼ŒæŒ‡é’ˆè¿ç®—å’Œç±»å‹é‡è§£é‡Šæ˜¯æ„å»ºé«˜æ€§èƒ½ç¡¬ä»¶æ¥å£å’Œæ•°æ®å¤„ç†ç®¡é“çš„åŸºçŸ³ã€‚ç„¶è€Œï¼Œä¸€ä¸ªæ™®éå­˜åœ¨çš„ç¼–ç æ¨¡å¼â€”â€”<code>reinterpret_cast(byte_buffer[offset])</code>â€”â€”æ­ç¤ºäº†ç¨‹åºå‘˜å¯¹C++æŒ‡é’ˆè¯­ä¹‰çš„æ·±å±‚æ¬¡è¯¯è§£ã€‚æœ¬æ–‡é€šè¿‡å½¢å¼åŒ–åˆ†æè¿™ä¸€åæ¨¡å¼ï¼Œæ¢è®¨äº†åœ°å€ç©ºé—´æ“ä½œä¸å€¼è¯­ä¹‰çš„æ··æ·†ç°è±¡ï¼Œæå‡ºäº†åŸºäºç°ä»£C++ç±»å‹ç³»ç»Ÿçš„å®‰å…¨è®¿é—®èŒƒå¼ï¼Œå¹¶å»ºç«‹äº†é˜²å¾¡æ€§æŒ‡é’ˆè¿ç®—çš„å·¥ç¨‹å®è·µæ¡†æ¶ã€‚</p>
<h2 data-id="heading-0">1. ä¸€ä¸ªå·¥ä¸šçº§åæ¨¡å¼</h2>
<h3 data-id="heading-1">1.1 åæ¨¡å¼å®šä¹‰</h3>
<p>è€ƒè™‘ä»¥ä¸‹ç¡¬ä»¶æ•°æ®é‡‡é›†ç³»ç»Ÿçš„å…¸å‹ä»£ç ç‰‡æ®µï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// PCIe DMAç¼“å†²åŒºæ•°æ®æµå¤„ç†</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">SensorData</span> {
    <span class="hljs-type">float</span> real_component;
    <span class="hljs-type">float</span> imag_component;
    <span class="hljs-type">uint32_t</span> timestamp;
    <span class="hljs-type">uint16_t</span> quality_flag;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DataPipeline</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessHardwareData</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* dma_buffer, <span class="hljs-type">size_t</span> buffer_capacity)</span> </span>{
        <span class="hljs-keyword">constexpr</span> <span class="hljs-type">size_t</span> protocol_overhead = <span class="hljs-number">64</span>;  <span class="hljs-comment">// åè®®å¤´éƒ¨å¤§å°</span>
        
        <span class="hljs-comment">// åæ¨¡å¼ï¼šå±é™©çš„ç±»å‹é‡è§£é‡Š</span>
        SensorData* sensor_stream = 
            <span class="hljs-built_in">reinterpret_cast</span>(dma_buffer[protocol_overhead]);
        
        <span class="hljs-built_in">ExtractTelemetry</span>(sensor_stream);
    }
};
</code></pre>
<h3 data-id="heading-2">1.2 è¯­ä¹‰åˆ†æ</h3>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œç¨‹åºå‘˜æ„å›¾è·³è¿‡64å­—èŠ‚çš„åè®®å¤´éƒ¨ï¼Œå°†åç»­æ•°æ®è§£é‡Šä¸º<code>SensorData</code>ç»“æ„æµã€‚ç„¶è€Œï¼Œè¡¨è¾¾å¼çš„å®é™…è¯­ä¹‰æ˜¯ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è¯­æ³•æ ‘åˆ†è§£</span>
dma_buffer[protocol_overhead]           <span class="hljs-comment">// 1. æ•°ç»„ä¸‹æ ‡æ“ä½œç¬¦ï¼Œè¿”å›uint8_tå€¼</span>
<span class="hljs-built_in">reinterpret_cast</span>(... )     <span class="hljs-comment">// 2. å°†8ä½æ•´æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºæŒ‡é’ˆ</span>

<span class="hljs-comment">// ç­‰ä»·å±•å¼€</span>
<span class="hljs-type">uint8_t</span> temporary_byte = *(dma_buffer + protocol_overhead);
SensorData* misinterpreted_ptr = <span class="hljs-built_in">reinterpret_cast</span>(
    <span class="hljs-built_in">static_cast</span>(temporary_byte)
);
</code></pre>
<p><strong>å…³é”®æ´å¯Ÿ</strong>ï¼šç¨‹åºå‘˜æ‰§è¡Œçš„æ˜¯<strong>å€¼çš„ç±»å‹é‡è§£é‡Š</strong>è€Œé<strong>åœ°å€çš„ç±»å‹é‡è§£é‡Š</strong>ï¼Œè¿™è¿åäº†æŒ‡é’ˆä»£æ•°çš„åŸºæœ¬å…¬ç†ã€‚</p>
<h2 data-id="heading-3">2. ç†è®ºåŸºç¡€</h2>
<h3 data-id="heading-4">2.1 å†…å­˜å¯¹è±¡æ¨¡å‹ï¼ˆC++17 Â§6.7ï¼‰</h3>
<p>C++æ ‡å‡†å°†å­˜å‚¨åˆ†ä¸º<strong>å­—èŠ‚</strong>ï¼ˆbyteï¼‰å’Œ<strong>å¯¹è±¡</strong>ï¼ˆobjectï¼‰ä¸¤ä¸ªæŠ½è±¡å±‚æ¬¡ã€‚ç±»å‹ç³»ç»Ÿåœ¨è¿™ä¸¤ä¸ªå±‚æ¬¡é—´å»ºç«‹äº†æ˜ å°„å…³ç³»ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å†…å­˜å¸ƒå±€çš„æ•°å­¦æè¿°</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">concept</span> ByteRepresentable = <span class="hljs-keyword">requires</span> {
    <span class="hljs-built_in">sizeof</span>(T) &gt;= <span class="hljs-number">1</span>;
    <span class="hljs-built_in">alignof</span>(T) &gt;= <span class="hljs-number">1</span>;
};

<span class="hljs-comment">// å¯¹è±¡åˆ›å»ºçš„å…¬ç†</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryObject</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å…¬ç†1ï¼šå¯¹è±¡å æ®è¿ç»­çš„å­—èŠ‚åºåˆ—</span>
    <span class="hljs-built_in">static_assert</span>(is_trivially_copyable_v);
    
    <span class="hljs-comment">// å…¬ç†2ï¼šå¯¹è±¡åœ°å€ç­‰äºå…¶é¦–å­—èŠ‚åœ°å€</span>
    <span class="hljs-function"><span class="hljs-type">uint8_t</span>* <span class="hljs-title">begin_bytes</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(<span class="hljs-built_in">const_cast</span>(<span class="hljs-keyword">this</span>));
    }
    
    <span class="hljs-comment">// å…¬ç†3ï¼šç±»å‹å®‰å…¨çš„é‡è§£é‡Šå¿…é¡»åŸºäºåœ°å€è€Œéå€¼</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>
    <span class="hljs-type">static</span> U* <span class="hljs-title">ReinterpretAtAddress</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* byte_address)</span> </span>{
        <span class="hljs-comment">// æ­£ç¡®ï¼šåœ°å€è½¬æ¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>&lt;u&gt;(byte_address);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">template</span>
    <span class="hljs-type">static</span> U* <span class="hljs-title">ReinterpretAtValue</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> byte_value)</span> </span>{  <span class="hljs-comment">// å±é™©ï¼</span>
        <span class="hljs-comment">// é”™è¯¯ï¼šå€¼è½¬æ¢ï¼ˆè¿åå†…å­˜å®‰å…¨ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>&lt;u&gt;(<span class="hljs-built_in">static_cast</span>(byte_value));
    }
};
</code></pre>
<h3 data-id="heading-5">2.2 æŒ‡é’ˆè¿ç®—çš„å½¢å¼è¯­ä¹‰</h3>
<p>æŒ‡é’ˆè¿ç®—åœ¨C++æ ‡å‡†ä¸­å®šä¹‰ä¸º<strong>åŸºäºç±»å‹çš„åœ°å€ç®—æœ¯</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æŒ‡é’ˆè¿ç®—çš„å½¢å¼å®šä¹‰</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FormalPointer</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">uintptr_t</span> base_address;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å®šä¹‰ï¼šæŒ‡é’ˆåŠ æ³• â‰¡ åœ°å€åç§» + ç±»å‹å¤§å°ç¼©æ”¾</span>
    FormalPointer <span class="hljs-keyword">operator</span>+(<span class="hljs-type">ptrdiff_t</span> n) <span class="hljs-type">const</span> {
        <span class="hljs-type">uintptr_t</span> raw_offset = n * <span class="hljs-built_in">sizeof</span>(T);
        <span class="hljs-type">uintptr_t</span> new_address = base_address + raw_offset;
        
        <span class="hljs-comment">// æ»¡è¶³ï¼šp + n â‰¡ reinterpret_cast(reinterpret_cast(p) + n * sizeof(T))</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">FormalPointer</span>(new_address);
    }
    
    <span class="hljs-comment">// å…³é”®åŒºåˆ«ï¼šä¸‹æ ‡æ“ä½œç¬¦è¿”å›çš„æ˜¯å€¼ï¼Œä¸æ˜¯åœ°å€</span>
    T <span class="hljs-keyword">operator</span>[](<span class="hljs-type">ptrdiff_t</span> n) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">return</span> *(<span class="hljs-keyword">this</span> + n);  <span class="hljs-comment">// è§£å¼•ç”¨æ“ä½œ</span>
    }
};
</code></pre>
<h2 data-id="heading-6">3. å·¥ç¨‹å½±å“</h2>
<h3 data-id="heading-7">3.1 å±é™©åœºæ™¯åˆ†ç±»</h3>



































<table><thead><tr><th>åœºæ™¯ç±»å‹</th><th>é”™è¯¯æ¨¡å¼</th><th>æ½œåœ¨åæœ</th><th>å‘ç”Ÿæ¦‚ç‡</th></tr></thead><tbody><tr><td><strong>ç¡¬ä»¶æ¥å£</strong></td><td><code>reinterpret_cast(mmio_base[offset])</code></td><td>æ€»çº¿é”™è¯¯ï¼Œç¡¬ä»¶é”æ­»</td><td>é«˜</td></tr><tr><td><strong>ç½‘ç»œåè®®</strong></td><td><code>reinterpret_cast(rx_buffer[header_len])</code></td><td>æ•°æ®æŸåï¼Œå®‰å…¨æ¼æ´</td><td>ä¸­</td></tr><tr><td><strong>æ–‡ä»¶æ˜ å°„</strong></td><td><code>reinterpret_cast&lt;header&gt;(file_view[magic_size])</code></td><td>æ®µé”™è¯¯ï¼Œæ–‡ä»¶æŸå</td><td>é«˜</td></tr><tr><td><strong>è·¨è¯­è¨€æ¥å£</strong></td><td><code>reinterpret_cast(c_buffer[alignment])</code></td><td>ABIä¸åŒ¹é…ï¼Œæ ˆç ´å</td><td>ä¸­</td></tr></tbody></table>
<h3 data-id="heading-8">3.2 çœŸå®æ¡ˆä¾‹åˆ†æ</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ¡ˆä¾‹ï¼šåŒ»ç–—æˆåƒè®¾å¤‡å›ºä»¶æ¼æ´ï¼ˆå·²åŒ¿ååŒ–å¤„ç†ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UltrasoundImageProcessor</span> {
    <span class="hljs-comment">// å†å²æ¼æ´ä»£ç </span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessEchoData</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* pcie_payload)</span> </span>{
        <span class="hljs-comment">// é”™è¯¯ï¼šå°†FIRST_SAMPLE_OFFSETå¤„çš„å­—èŠ‚å€¼å½“ä½œæŒ‡é’ˆ</span>
        ComplexFloat* echo_samples = 
            <span class="hljs-built_in">reinterpret_cast</span>(pcie_payload[FIRST_SAMPLE_OFFSET]);
        
        <span class="hljs-comment">// å½“pcie_payload[32] = 0x80æ—¶</span>
        <span class="hljs-comment">// å®é™…è®¿é—®åœ°å€0x00000080ï¼Œå±äºå†…æ ¸ç©ºé—´</span>
        <span class="hljs-comment">// å¯¼è‡´ç‰¹æƒçº§å¼‚å¸¸ï¼Œç³»ç»Ÿå´©æºƒ</span>
    }
    
    <span class="hljs-comment">// ä¿®å¤å</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessEchoDataSafe</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* pcie_payload)</span> </span>{
        <span class="hljs-comment">// æ­£ç¡®ï¼šè®¡ç®—åç§»åœ°å€åè¿›è¡Œç±»å‹é‡è§£é‡Š</span>
        <span class="hljs-type">uint8_t</span>* samples_start = pcie_payload + FIRST_SAMPLE_OFFSET;
        ComplexFloat* echo_samples = 
            <span class="hljs-built_in">reinterpret_cast</span>(samples_start);
        
        <span class="hljs-comment">// æ·»åŠ è¾¹ç•ŒéªŒè¯</span>
        <span class="hljs-type">size_t</span> available_bytes = <span class="hljs-built_in">CalculateAvailableBytes</span>(pcie_payload);
        <span class="hljs-keyword">if</span> (samples_start + <span class="hljs-built_in">sizeof</span>(ComplexFloat) &gt; pcie_payload + available_bytes) {
            <span class="hljs-built_in">LogFault</span>(FAULT_BOUNDARY_VIOLATION);
            <span class="hljs-keyword">return</span>;
        }
    }
};
</code></pre>
<p><strong>åæœåˆ†æ</strong>ï¼šåŸå§‹æ¼æ´å¯¼è‡´è®¾å¤‡åœ¨ç‰¹å®šæ•°æ®æ¨¡å¼ä¸‹ï¼ˆæ¦‚ç‡çº¦0.4%ï¼‰å‘ç”Ÿç³»ç»Ÿçº§å´©æºƒï¼Œéœ€è¦ç°åœºå·¥ç¨‹å¸ˆé‡å¯ã€‚ä¿®å¤åå®ç°äº†é›¶æ•…éšœè¿è¡Œè¶…è¿‡18ä¸ªæœˆã€‚</p>
<h2 data-id="heading-9">4. ç±»å‹å®‰å…¨çš„è§£å†³æ–¹æ¡ˆæ¡†æ¶</h2>
<h3 data-id="heading-10">4.1 ç¼–è¯‘æ—¶éªŒè¯ç³»ç»Ÿ</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ¦‚å¿µï¼šå¯å®‰å…¨é‡è§£é‡Šçš„å†…å­˜åŒºåŸŸ</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">concept</span> SafelyReinterpretable = <span class="hljs-keyword">requires</span> {
    <span class="hljs-keyword">requires</span> is_trivially_copyable_v;
    <span class="hljs-keyword">requires</span> is_trivially_copyable_v;
    <span class="hljs-keyword">requires</span> is_standard_layout_v;
    <span class="hljs-function"><span class="hljs-keyword">requires</span> <span class="hljs-title">sizeof</span><span class="hljs-params">(To)</span> &lt;</span>= <span class="hljs-built_in">sizeof</span>(From);  <span class="hljs-comment">// æˆ–æ»¡è¶³ç‰¹å®šå¯¹é½</span>
};

<span class="hljs-comment">// å®‰å…¨æŒ‡é’ˆå°è£…å™¨</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CheckedReinterpretPtr</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">uint8_t</span>* base_ptr_;
    <span class="hljs-type">size_t</span> capacity_;
    
    <span class="hljs-comment">// ç¼–è¯‘æ—¶æ£€æŸ¥ï¼šé˜²æ­¢å€¼åˆ°æŒ‡é’ˆçš„é”™è¯¯è½¬æ¢</span>
    <span class="hljs-keyword">template</span>
    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">bool</span> IsValueToPointerConversion = 
        is_pointer_v&lt;u&gt; &amp;&amp; !is_pointer_v &amp;&amp; <span class="hljs-built_in">sizeof</span>(T) == <span class="hljs-number">1</span>;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>
    <span class="hljs-keyword">explicit</span> <span class="hljs-title">CheckedReinterpretPtr</span><span class="hljs-params">(ByteSource* source, <span class="hljs-type">size_t</span> capacity)</span>
        : base_ptr_(reinterpret_cast(source))
        , capacity_(capacity) {</span>
        
        <span class="hljs-built_in">static_assert</span>(!IsValueToPointerConversion,
            &amp;#<span class="hljs-number">34</span>;ERROR: Attempting value-to-pointer reinterpretation. &amp;#<span class="hljs-number">34</span>;
            &amp;#<span class="hljs-number">34</span>;Use pointer arithmetic instead.&amp;#<span class="hljs-number">34</span>;);
    }
    
    <span class="hljs-comment">// å®‰å…¨çš„åç§»è®¿é—®ï¼ˆç¼–è¯‘æ—¶+è¿è¡Œæ—¶æ£€æŸ¥ï¼‰</span>
    <span class="hljs-keyword">template</span>
    [[nodiscard]] <span class="hljs-function">Expected 
    <span class="hljs-title">OffsetAs</span><span class="hljs-params">(<span class="hljs-type">size_t</span> byte_offset)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-comment">// ç¼–è¯‘æ—¶éªŒè¯</span>
        <span class="hljs-built_in">static_assert</span>(SafelyReinterpretable,
            &amp;#<span class="hljs-number">34</span>;Target type <span class="hljs-keyword">not</span> safely reinterpretable from bytes&amp;#<span class="hljs-number">34</span>;);
        
        <span class="hljs-comment">// è¿è¡Œæ—¶è¾¹ç•Œæ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (byte_offset + <span class="hljs-built_in">sizeof</span>(TargetType) &gt; capacity_) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Unexpected</span>(AccessError::OutOfBounds);
        }
        
        <span class="hljs-type">uint8_t</span>* target_address = base_ptr_ + byte_offset;
        
        <span class="hljs-comment">// å¯¹é½æ£€æŸ¥ï¼ˆå¦‚æœä¸¥æ ¼è¦æ±‚ï¼‰</span>
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(<span class="hljs-keyword">alignof</span>(TargetType) &gt; <span class="hljs-number">1</span>)</span> </span>{
            <span class="hljs-type">uintptr_t</span> addr = <span class="hljs-built_in">reinterpret_cast</span>(target_address);
            <span class="hljs-keyword">if</span> (addr % <span class="hljs-built_in">alignof</span>(TargetType) != <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">Unexpected</span>(AccessError::Misaligned);
            }
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(target_address);
    }
};
</code></pre>
<h3 data-id="heading-11">4.2 å·¥ä¸šçº§æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å®è·µ1ï¼šåˆ†å±‚æŠ½è±¡æ¶æ„</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HardwareDataChannel</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// ç¬¬ä¸€å±‚ï¼šåŸå§‹å­—èŠ‚è®¿é—®ï¼ˆéš”ç¦»å±é™©æ“ä½œï¼‰</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">RawByteAccessor</span> {
        <span class="hljs-type">uint8_t</span>* <span class="hljs-type">const</span> buffer_;
        <span class="hljs-type">const</span> <span class="hljs-type">size_t</span> capacity_;
        
    <span class="hljs-keyword">public</span>:
        <span class="hljs-comment">// ä»…æä¾›å®‰å…¨çš„åŸå§‹æ“ä½œ</span>
        <span class="hljs-function">Span <span class="hljs-title">SliceBytes</span><span class="hljs-params">(<span class="hljs-type">size_t</span> offset, <span class="hljs-type">size_t</span> length)</span> <span class="hljs-type">const</span> </span>{
            <span class="hljs-keyword">if</span> (offset + length &gt; capacity_) {
                <span class="hljs-built_in">ThrowBoundaryError</span>(offset, length, capacity_);
            }
            <span class="hljs-keyword">return</span> {buffer_ + offset, length};  <span class="hljs-comment">// æ­£ç¡®ï¼šæŒ‡é’ˆç®—æœ¯</span>
        }
    };
    
    <span class="hljs-comment">// ç¬¬äºŒå±‚ï¼šç±»å‹å®‰å…¨è§†å›¾</span>
    <span class="hljs-keyword">template</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypedDataView</span> {
        Span raw_span_;
        
    <span class="hljs-keyword">public</span>:
        <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">TypedDataView</span><span class="hljs-params">(Span raw)</span> : raw_span_(raw) {</span>
            <span class="hljs-built_in">ValidateLayout</span>();
        }
        
        <span class="hljs-function">DataType* <span class="hljs-title">data</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-comment">// å®‰å…¨çš„å•ç‚¹è½¬æ¢</span>
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(raw_span_.<span class="hljs-built_in">data</span>());
        }
    };
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>
    TypedDataView <span class="hljs-title">GetDataView</span><span class="hljs-params">(<span class="hljs-type">size_t</span> byte_offset)</span> </span>{
        <span class="hljs-keyword">auto</span> raw_slice = raw_accessor_.<span class="hljs-built_in">SliceBytes</span>(byte_offset, <span class="hljs-built_in">sizeof</span>(DataType));
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">TypedDataView</span>(raw_slice);
    }
};

<span class="hljs-comment">// å®è·µ2ï¼šåŸºäºç­–ç•¥çš„è®¾è®¡æ¨¡å¼</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PolicyBasedReinterpreter</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>
    <span class="hljs-type">static</span> TargetType* <span class="hljs-title">Reinterpret</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* source, <span class="hljs-type">size_t</span> offset)</span> </span>{
        <span class="hljs-comment">// ç­–ç•¥é©±åŠ¨çš„å®‰å…¨æ£€æŸ¥</span>
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(SafetyPolicy::requires_bounds_check)</span> </span>{
            SafetyPolicy::<span class="hljs-built_in">ValidateBounds</span>(source, offset, <span class="hljs-built_in">sizeof</span>(TargetType));
        }
        
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(SafetyPolicy::requires_alignment_check)</span> </span>{
            SafetyPolicy::<span class="hljs-built_in">ValidateAlignment</span>(source + offset);
        }
        
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(SafetyPolicy::requires_type_safety)</span> </span>{
            SafetyPolicy::<span class="hljs-built_in">ValidateTypeCompatibility</span>();
        }
        
        <span class="hljs-comment">// å®‰å…¨çš„æ ¸å¿ƒè½¬æ¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(source + offset);
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹ï¼šåŒ»ç–—è®¾å¤‡çš„é«˜å®‰å…¨æ€§ç­–ç•¥</span>
<span class="hljs-keyword">using</span> MedicalImagingPolicy = SafetyPolicy&lt;
    bounds_check = Strict,
    alignment_check = Strict,
    type_safety = Strict,
    logging = Detailed
&gt;;

<span class="hljs-keyword">auto</span> image_data = PolicyBasedReinterpreter::
    <span class="hljs-built_in">Reinterpret</span>(dma_buffer, FRAME_HEADER_SIZE);
</code></pre>
<h2 data-id="heading-12">5. éªŒè¯ä¸æµ‹è¯•æ–¹æ³•è®º</h2>
<h3 data-id="heading-13">5.1 é™æ€åˆ†æè§„åˆ™</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Clang-Tidyè‡ªå®šä¹‰æ£€æŸ¥è§„åˆ™</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ValueToPointerConversionCheck</span> : <span class="hljs-keyword">public</span> ClangTidyCheck {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">registerMatchers</span><span class="hljs-params">(MatchFinder* Finder)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-comment">// åŒ¹é…æ¨¡å¼ï¼šreinterpret_cast(buffer[index])</span>
        Finder-&gt;<span class="hljs-built_in">addMatcher</span>(
            <span class="hljs-built_in">reinterpretCastExpr</span>(
                <span class="hljs-built_in">hasSourceExpression</span>(
                    <span class="hljs-built_in">arraySubscriptExpr</span>(
                        <span class="hljs-built_in">hasBase</span>(<span class="hljs-built_in">expr</span>().<span class="hljs-built_in">bind</span>(&amp;#<span class="hljs-number">34</span>;base&amp;#<span class="hljs-number">34</span>;)),
                        <span class="hljs-built_in">hasIndex</span>(<span class="hljs-built_in">expr</span>().<span class="hljs-built_in">bind</span>(&amp;#<span class="hljs-number">34</span>;index&amp;#<span class="hljs-number">34</span>;))
                    )
                )
            ).<span class="hljs-built_in">bind</span>(&amp;#<span class="hljs-number">34</span>;reinterpret&amp;#<span class="hljs-number">34</span>;),
            <span class="hljs-keyword">this</span>
        );
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">const</span> MatchResult&amp; Result)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>* Reinterpret = Result.Nodes.<span class="hljs-built_in">getNodeAs</span>(&amp;#<span class="hljs-number">34</span>;reinterpret&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-built_in">diag</span>(Reinterpret-&gt;<span class="hljs-built_in">getBeginLoc</span>(), 
            &amp;#<span class="hljs-number">34</span>;å±é™©ï¼šå°†æ•°ç»„å…ƒç´ çš„å€¼è½¬æ¢ä¸ºæŒ‡é’ˆã€‚&amp;#<span class="hljs-number">34</span>;
            &amp;#<span class="hljs-number">34</span>;è¿™é€šå¸¸æ„å‘³ç€æ„å›¾è¿›è¡ŒæŒ‡é’ˆåç§»è€Œéå€¼è½¬æ¢ã€‚\n&amp;#<span class="hljs-number">34</span>;
            &amp;#<span class="hljs-number">34</span>;å»ºè®®ä½¿ç”¨ï¼š<span class="hljs-built_in">reinterpret_cast</span>(buffer + offset)&amp;#<span class="hljs-number">34</span>;)
            &lt;&lt; FixItHint::<span class="hljs-built_in">CreateReplacement</span>(
                Reinterpret-&gt;<span class="hljs-built_in">getSourceRange</span>(),
                <span class="hljs-built_in">GenerateFix</span>(Result));
    }
};

<span class="hljs-comment">// LLVMç¼–è¯‘å™¨æ’ä»¶ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PointerSemanticsSanitizer</span> : <span class="hljs-keyword">public</span> llvm::ModulePass {
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">runOnModule</span><span class="hljs-params">(llvm::Module&amp; M)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; F : M) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; BB : F) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; I : BB) {
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span>* CI = <span class="hljs-built_in">dyn_cast</span>(&amp;I)) {
                        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsValueToPointerCast</span>(CI)) {
                            <span class="hljs-built_in">InsertRuntimeCheck</span>(CI);  <span class="hljs-comment">// æ’å…¥è¿è¡Œæ—¶æ£€æŸ¥</span>
                            ++InstrumentedCasts;
                        }
                    }
                }
            }
        }
        <span class="hljs-keyword">return</span> InstrumentedCasts &gt; <span class="hljs-number">0</span>;
    }
};
</code></pre>
<h3 data-id="heading-14">5.2 è¿è¡Œæ—¶é˜²æŠ¤æœºåˆ¶</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å†…å­˜ä¿æŠ¤ä»£ç†</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProtectedMemoryAllocator</span> : <span class="hljs-keyword">public</span> UnderlyingAllocator {
<span class="hljs-keyword">private</span>:
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">AllocationMetadata</span> {
        <span class="hljs-type">uintptr_t</span> base_address;
        <span class="hljs-type">size_t</span> total_size;
        std::array canary_value;  <span class="hljs-comment">// è¾¹ç•Œä¿æŠ¤</span>
    };
    
    std::unordered_map allocation_map_;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span>* <span class="hljs-title">allocate</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size, <span class="hljs-type">size_t</span> alignment)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-type">void</span>* raw_mem = UnderlyingAllocator::<span class="hljs-built_in">allocate</span>(
            size + <span class="hljs-built_in">sizeof</span>(AllocationMetadata) + <span class="hljs-number">64</span>,  <span class="hljs-comment">// é¢å¤–ç©ºé—´</span>
            alignment
        );
        
        <span class="hljs-comment">// è®¾ç½®ä¿æŠ¤åŒºåŸŸ</span>
        <span class="hljs-built_in">SetupMemoryProtection</span>(raw_mem, size);
        
        <span class="hljs-comment">// è®°å½•å…ƒæ•°æ®ç”¨äºéªŒè¯</span>
        AllocationMetadata meta = {
            .base_address = <span class="hljs-built_in">reinterpret_cast</span>(raw_mem),
            .total_size = size
        };
        <span class="hljs-built_in">GenerateCanary</span>(meta.canary_value);
        
        allocation_map_[raw_mem] = meta;
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">CalculateUserPointer</span>(raw_mem);
    }
    
    <span class="hljs-comment">// éªŒè¯æ‰€æœ‰æŒ‡é’ˆè®¿é—®</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>
    T* <span class="hljs-title">ValidateAndTranslate</span><span class="hljs-params">(<span class="hljs-type">void</span>* user_ptr, <span class="hljs-type">size_t</span> offset)</span> </span>{
        <span class="hljs-keyword">auto</span>* actual_base = <span class="hljs-built_in">FindAllocationBase</span>(user_ptr);
        <span class="hljs-keyword">if</span> (!actual_base) {
            <span class="hljs-built_in">TriggerSecurityViolation</span>(SecurityEvent::InvalidPointer);
        }
        
        <span class="hljs-type">uint8_t</span>* target_address = 
            <span class="hljs-built_in">reinterpret_cast</span>(actual_base) + offset;
        
        <span class="hljs-comment">// éªŒè¯è¾¹ç•Œ</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">IsWithinAllocation</span>(target_address, <span class="hljs-built_in">sizeof</span>(T))) {
            <span class="hljs-built_in">TriggerSecurityViolation</span>(SecurityEvent::BoundaryOverflow);
        }
        
        <span class="hljs-comment">// éªŒè¯canaryå®Œæ•´æ€§</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">VerifyCanaryIntegrity</span>(actual_base)) {
            <span class="hljs-built_in">TriggerSecurityViolation</span>(SecurityEvent::BufferCorruption);
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(target_address);
    }
};
</code></pre>
<h2 data-id="heading-15">6. ç»“è®ºå»ºè®®</h2>
<h3 data-id="heading-16">6.1 æ ¸å¿ƒå‘ç°</h3>
<ol>
<li>
<p><strong>è¯­ä¹‰é¸¿æ²Ÿ</strong>ï¼š<code>buffer[offset]</code>ä¸<code>buffer + offset</code>ä¹‹é—´çš„å·®å¼‚åæ˜ äº†C++ä¸­å€¼è¯­ä¹‰ä¸åœ°å€è¯­ä¹‰çš„æ ¹æœ¬åŒºåˆ«ï¼Œè¿™ç§åŒºåˆ«åœ¨ç±»å‹é‡è§£é‡Šæ—¶å°¤ä¸ºå±é™©ã€‚</p>
</li>
<li>
<p><strong>ç³»ç»Ÿæ€§é£é™©</strong>ï¼šå€¼åˆ°æŒ‡é’ˆçš„é”™è¯¯è½¬æ¢é€šå¸¸ä¸ä¼šåœ¨å•å…ƒæµ‹è¯•ä¸­æš´éœ²ï¼Œä½†åœ¨ç‰¹å®šç¡¬ä»¶çŠ¶æ€æˆ–æ•°æ®æ¨¡å¼ä¸‹ä¼šå¯¼è‡´ç³»ç»Ÿæ€§å´©æºƒï¼Œæ„æˆ<strong>é—´æ­‡æ€§æ•…éšœ</strong>æ¨¡å¼ã€‚</p>
</li>
<li>
<p><strong>é˜²å¾¡æ€§æ¶æ„</strong>ï¼šé€šè¿‡ç¼–è¯‘æ—¶çº¦æŸã€è¿è¡Œæ—¶éªŒè¯å’Œåˆ†å±‚æŠ½è±¡ï¼Œå¯ä»¥å®Œå…¨æ¶ˆé™¤æ­¤ç±»é”™è¯¯ï¼ŒåŒæ—¶ä¿æŒç³»ç»Ÿæ€§èƒ½ã€‚</p>
</li>
</ol>
<h3 data-id="heading-17">6.2 è¡Œä¸šæ ‡å‡†å»ºè®®</h3>
<p><strong>ISO C++å§”å‘˜ä¼šææ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æè®®ï¼šåœ¨C++26ä¸­å¼•å…¥[[pointer_arithmetic]]å±æ€§</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">hardware_interface</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ˜ç¡®æ ‡è®°åº”ä½¿ç”¨æŒ‡é’ˆç®—æœ¯çš„åœºæ™¯</span>
    [[pointer_arithmetic]]
    <span class="hljs-function">T* <span class="hljs-title">access_register</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* mmio_base, <span class="hljs-type">size_t</span> offset)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(mmio_base + offset);  <span class="hljs-comment">// ç¼–è¯‘å™¨éªŒè¯</span>
    }
    
    <span class="hljs-comment">// ç¦æ­¢å€¼åˆ°æŒ‡é’ˆçš„éšå¼è½¬æ¢</span>
    [[<span class="hljs-built_in">deprecated</span>(&amp;#<span class="hljs-number">34</span>;value-to-pointer conversion is unsafe&amp;#<span class="hljs-number">34</span>;)]]
    <span class="hljs-function">T* <span class="hljs-title">unsafe_access</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* mmio_base, <span class="hljs-type">size_t</span> offset)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(mmio_base[offset]);  <span class="hljs-comment">// ç¼–è¯‘è­¦å‘Š</span>
    }
};
</code></pre>
<p><strong>å·¥ä¸šç¼–ç æ ‡å‡†</strong>ï¼š</p>
<ol>
<li><strong>è§„åˆ™P.101</strong>ï¼šç¦æ­¢åœ¨<code>reinterpret_cast</code>ä¸­ä½¿ç”¨æ•°ç»„ä¸‹æ ‡æ“ä½œç¬¦çš„ç»“æœ</li>
<li><strong>è§„åˆ™P.202</strong>ï¼šæ‰€æœ‰ç¡¬ä»¶æ¥å£è®¿é—®å¿…é¡»é€šè¿‡ç±»å‹å®‰å…¨çš„åŒ…è£…å™¨</li>
<li><strong>è§„åˆ™P.303</strong>ï¼šå…³é”®ç³»ç»Ÿå¿…é¡»ä½¿ç”¨å¸¦æœ‰è¾¹ç•Œæ£€æŸ¥çš„ä¸“ç”¨åˆ†é…å™¨</li>
<li><strong>è§„åˆ™T.404</strong>ï¼šæŒ‡é’ˆè¿ç®—ä»£ç å¿…é¡»åŒ…å«ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶åŒé‡éªŒè¯</li>
</ol>
<h3 data-id="heading-18">6.3 æœªæ¥ç ”ç©¶æ–¹å‘</h3>
<ol>
<li><strong>å½¢å¼åŒ–éªŒè¯</strong>ï¼šå¼€å‘èƒ½å¤Ÿè¯æ˜æŒ‡é’ˆè¿ç®—å®‰å…¨æ€§çš„å½¢å¼åŒ–æ–¹æ³•</li>
<li><strong>ç¡¬ä»¶æ”¯æŒ</strong>ï¼šç ”ç©¶CPUçº§åˆ«çš„æŒ‡é’ˆè¯­ä¹‰æ£€æŸ¥æœºåˆ¶</li>
<li><strong>è¯­è¨€æ‰©å±•</strong>ï¼šè®¾è®¡æ›´å®‰å…¨çš„æŒ‡é’ˆè¿ç®—åŸè¯­ï¼Œå¯èƒ½ä½œä¸ºC++çš„æœªæ¥æ‰©å±•</li>
</ol>
<p>æŒ‡é’ˆè¿ç®—çš„ç±»å‹å®‰å…¨ä¸ä»…æ˜¯ä¸€ä¸ªç¼–ç é£æ ¼é—®é¢˜ï¼Œæ›´æ˜¯ç³»ç»Ÿå¯é æ€§çš„åŸºçŸ³ã€‚é€šè¿‡æ·±åˆ»ç†è§£åœ°å€ä¸å€¼çš„è¯­ä¹‰åŒºåˆ«ï¼Œå¹¶é‡‡ç”¨ç³»ç»Ÿæ€§çš„é˜²æŠ¤æªæ–½ï¼Œå·¥ç¨‹å¸ˆå¯ä»¥æ„å»ºæ—¢é«˜æ€§èƒ½åˆé«˜å¯é çš„åº•å±‚ç³»ç»Ÿï¼Œä¸ºå…³é”®åŸºç¡€è®¾æ–½æä¾›åšå®çš„æŠ€æœ¯åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘é¸¿è’™6.0è®¡ç®—å™¨å®ç°è¯¦è§£]]></title>    <link>https://juejin.cn/post/7581858890608623652</link>    <guid>https://juejin.cn/post/7581858890608623652</guid>    <pubDate>2025-12-10T11:45:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581858890608623652" data-draft-id="7581858890608607268" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘é¸¿è’™6.0è®¡ç®—å™¨å®ç°è¯¦è§£"/> <meta itemprop="keywords" content="HarmonyOS,ArkTS,ArkUI"/> <meta itemprop="datePublished" content="2025-12-10T11:45:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨å“¥çˆ±ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2242659450109575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘é¸¿è’™6.0è®¡ç®—å™¨å®ç°è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659450109575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨å“¥çˆ±ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:45:46.000Z" title="Wed Dec 10 2025 11:45:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ V å“¥ã€‚å¬è¯´å°ç™½å…¥é—¨é¸¿è’™å¿…å†™çš„å°åº”ç”¨å°±æ˜¯è®¡ç®—å™¨ï¼Œä¸ä»…å¯ä»¥ç»ƒæ‰‹å°åº”ç”¨ï¼Œè¿˜èƒ½åœ¨åˆšå¼€å§‹å­¦ä¹ çš„æ—¶å€™é”»ç‚¼è‡ªå·±çš„é€»è¾‘èƒ½åŠ›ï¼Œå¯è°“æ˜¯ä¸€ä¸¾ä¸¤å¾—ï¼Œå¯¹ï¼Œå¯¹ï¼Œå¯¹ï¼Œä¸¾èµ·æ¥ï¼Œä½ æ‡‚çš„ã€‚</p>
<p>ä¸‹é¢æ˜¯åŸºäºåŸºç¡€ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶æ¥ç»ƒç»ƒæ‰‹ï¼ŒVå“¥å°†è¯¦ç»†å®ç°ä¸€ä¸ªæ”¯æŒåŠ å‡ä¹˜é™¤æ··åˆè¿ç®—çš„è®¡ç®—å™¨ã€‚</p>
<p>è”ç³»Vå“¥è·å– <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2F042cb1cc4d7d44ecbdbd902fd1275dcc%3Ftype%3D1%3Fha_source%3Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/042cb1cc4d7d44ecbdbd902fd1275dcc?type=1?ha_source=hmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">é¸¿è’™å­¦ä¹ èµ„æ–™</a></p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€é¡¹ç›®ç»“æ„ä¸æ ¸å¿ƒè®¾è®¡</h3>
<h4 data-id="heading-1">æŠ€æœ¯æ ˆ</h4>
<ul>
<li><strong>APIç‰ˆæœ¬</strong>ï¼šHarmonyOS 6.0.0 Release (API 21)</li>
<li><strong>å¼€å‘å·¥å…·</strong>ï¼šDevEco Studio 6</li>
<li><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼šTextInputã€Buttonã€ForEachã€Gridã€Stack</li>
</ul>
<h4 data-id="heading-2">ç›®å½•ç»“æ„</h4>
<pre><code class="hljs language-bash" lang="bash">Calculator/
â”œâ”€â”€ entry/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main/
â”‚       â”‚   â”œâ”€â”€ ets/
â”‚       â”‚   â”‚   â”œâ”€â”€ pages/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ Index.ets        <span class="hljs-comment"># ä¸»é¡µé¢</span>
â”‚       â”‚   â”‚   â”œâ”€â”€ utils/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ Calculator.ts    <span class="hljs-comment"># è®¡ç®—é€»è¾‘</span>
â”‚       â”‚   â”‚   â””â”€â”€ CommonConstants.ts   <span class="hljs-comment"># å¸¸é‡å®šä¹‰</span>
â”‚       â”‚   â””â”€â”€ resources/               <span class="hljs-comment"># èµ„æºæ–‡ä»¶</span>
</code></pre>
<hr/>
<h3 data-id="heading-3">äºŒã€æ ¸å¿ƒä»£ç å®ç°</h3>
<h4 data-id="heading-4">1. å¸¸é‡å®šä¹‰ï¼ˆCommonConstants.tsï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonConstants</span> {
  <span class="hljs-comment">// è¿ç®—ç¬¦å¸¸é‡</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">ADD</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'+'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">SUB</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'-'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">MUL</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Ã—'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">DIV</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Ã·'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">EQUAL</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'='</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">CLEAR</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'C'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">BACKSPACE</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'âŒ«'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">DOT</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'.'</span>;
  
  <span class="hljs-comment">// æŒ‰é’®å¸ƒå±€</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">BUTTONS</span>: <span class="hljs-built_in">string</span>[][] = [
    [<span class="hljs-string">'C'</span>, <span class="hljs-string">'âŒ«'</span>, <span class="hljs-string">'Ã·'</span>, <span class="hljs-string">'Ã—'</span>],
    [<span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'-'</span>],
    [<span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'+'</span>],
    [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'='</span>],
    [<span class="hljs-string">'0'</span>, <span class="hljs-string">'.'</span>, <span class="hljs-string">'='</span>]
  ];
}
</code></pre>
<h4 data-id="heading-5">2. è®¡ç®—é€»è¾‘æ ¸å¿ƒï¼ˆCalculator.tsï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">currentInput</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'0'</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">previousInput</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">operator</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">shouldResetInput</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;

  <span class="hljs-comment">// å¤„ç†æŒ‰é’®ç‚¹å‡»</span>
  <span class="hljs-title function_">handleButtonClick</span>(<span class="hljs-attr">button</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isNumber</span>(button)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleNumber</span>(button);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isOperator</span>(button)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleOperator</span>(button);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">DOT</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleDot</span>();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">CLEAR</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleClear</span>();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">BACKSPACE</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleBackspace</span>();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">EQUAL</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleEqual</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span>;
  }

  <span class="hljs-comment">// æ•°å­—å¤„ç†ï¼ˆè§£å†³ç²¾åº¦é—®é¢˜ï¼‰</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">handleNumber</span>(<span class="hljs-attr">num</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldResetInput</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span> === <span class="hljs-string">'0'</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span> = num;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldResetInput</span> = <span class="hljs-literal">false</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span> += num;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span>;
  }

  <span class="hljs-comment">// è¿ç®—ç¬¦å¤„ç†</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">handleOperator</span>(<span class="hljs-attr">op</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">operator</span> &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldResetInput</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculate</span>();
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">previousInput</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">operator</span> = op;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldResetInput</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span>;
  }

  <span class="hljs-comment">// ç­‰äºå·å¤„ç†</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">handleEqual</span>(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">operator</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">previousInput</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculate</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">operator</span> = <span class="hljs-string">''</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldResetInput</span> = <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span>;
  }

  <span class="hljs-comment">// æ ¸å¿ƒè®¡ç®—é€»è¾‘ï¼ˆè§£å†³æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ï¼‰</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">calculate</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> prev = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">previousInput</span>);
    <span class="hljs-keyword">const</span> current = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span>);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(prev) || <span class="hljs-built_in">isNaN</span>(current)) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-keyword">switch</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">operator</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">ADD</span>:
        <span class="hljs-comment">// å°æ•°ç²¾åº¦å¤„ç†ï¼šè½¬æ¢ä¸ºæ•´æ•°è®¡ç®—</span>
        result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">add</span>(prev, current);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">SUB</span>:
        result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">subtract</span>(prev, current);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">MUL</span>:
        result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">multiply</span>(prev, current);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">DIV</span>:
        result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">divide</span>(prev, current);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// å¤„ç†å¤§æ•°æ˜¾ç¤ºï¼ˆç§‘å­¦è®¡æ•°æ³•ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">formatResult</span>(result);
  }

  <span class="hljs-comment">// ç²¾ç¡®åŠ æ³•ï¼ˆè§£å†³0.1+0.2â‰ 0.3é—®é¢˜ï¼‰</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">const</span> multiplier = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">10</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(a), <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(b)));
    <span class="hljs-keyword">return</span> (a * multiplier + b * multiplier) / multiplier;
  }

  <span class="hljs-comment">// ç²¾ç¡®ä¹˜æ³•</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">const</span> decimalLength = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(a) + <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(b);
    <span class="hljs-keyword">const</span> multiplier = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">10</span>, decimalLength);
    <span class="hljs-keyword">return</span> (a * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">10</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(a))) * 
           (b * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">10</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(b))) / multiplier;
  }

  <span class="hljs-comment">// è·å–å°æ•°ä½æ•°</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getDecimalLength</span>(<span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">const</span> str = num.<span class="hljs-title function_">toString</span>();
    <span class="hljs-keyword">return</span> str.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'.'</span>) ? str.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-property">length</span> : <span class="hljs-number">0</span>;
  }

  <span class="hljs-comment">// ç»“æœæ ¼å¼åŒ–ï¼ˆå¤§æ•°è½¬ç§‘å­¦è®¡æ•°æ³•ï¼‰</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">formatResult</span>(<span class="hljs-attr">result</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(result) &gt; <span class="hljs-number">1e15</span> || (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(result) &lt; <span class="hljs-number">1e-6</span> &amp;&amp; result !== <span class="hljs-number">0</span>)) {
      <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toExponential</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/(\.\d*?[1-9])0+e/</span>, <span class="hljs-string">'$1e'</span>);
    }
    <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toString</span>();
  }

  <span class="hljs-comment">// å…¶ä»–è¾…åŠ©æ–¹æ³•</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">isNumber</span>(<span class="hljs-attr">str</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> { <span class="hljs-keyword">return</span> !<span class="hljs-built_in">isNaN</span>(<span class="hljs-title class_">Number</span>(str)); }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">isOperator</span>(<span class="hljs-attr">str</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> { 
    <span class="hljs-keyword">return</span> [<span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">ADD</span>, <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">SUB</span>, <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">MUL</span>, <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">DIV</span>].<span class="hljs-title function_">includes</span>(str); 
  }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">handleDot</span>(): <span class="hljs-built_in">string</span> { <span class="hljs-comment">/* å®ç°å°æ•°ç‚¹é€»è¾‘ */</span> }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">handleClear</span>(): <span class="hljs-built_in">string</span> { <span class="hljs-comment">/* å®ç°æ¸…ç©ºé€»è¾‘ */</span> }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">handleBackspace</span>(): <span class="hljs-built_in">string</span> { <span class="hljs-comment">/* å®ç°é€€æ ¼é€»è¾‘ */</span> }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">subtract</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> { <span class="hljs-comment">/* ç²¾ç¡®å‡æ³• */</span> }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">divide</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> { <span class="hljs-comment">/* ç²¾ç¡®é™¤æ³• */</span> }
}
</code></pre>
<h4 data-id="heading-6">3. ä¸»é¡µé¢UIå®ç°ï¼ˆIndex.etsï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">CalculatorPage</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">displayText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'0'</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">calculator</span>: <span class="hljs-title class_">Calculator</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>()

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {
      <span class="hljs-comment">// æ˜¾ç¤ºåŒºåŸŸ</span>
      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">displayText</span> })
        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)
        .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">32</span>)
        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">End</span>)
        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)
        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span> })

      <span class="hljs-comment">// æŒ‰é’®åŒºåŸŸ - ä½¿ç”¨Gridå¸ƒå±€</span>
      <span class="hljs-title class_">Grid</span>() {
        <span class="hljs-title class_">ForEach</span>(<span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">BUTTONS</span>, <span class="hljs-function">(<span class="hljs-params">row: <span class="hljs-built_in">string</span>[], rowIndex: <span class="hljs-built_in">number</span></span>) =&gt;</span> {
          <span class="hljs-title class_">GridItem</span>() {
            <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {
              <span class="hljs-title class_">ForEach</span>(row, <span class="hljs-function">(<span class="hljs-params">button: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
                <span class="hljs-title class_">Button</span>(button)
                  .<span class="hljs-title function_">width</span>(<span class="hljs-number">70</span>)
                  .<span class="hljs-title function_">height</span>(<span class="hljs-number">70</span>)
                  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)
                  .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getButtonColor</span>(button))
                  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getButtonBgColor</span>(button))
                  .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)
                  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onButtonClick</span>(button)
                  })
              })
            }
          }
        })
      }
      .<span class="hljs-title function_">columnsTemplate</span>(<span class="hljs-string">'1fr 1fr 1fr 1fr'</span>)
      .<span class="hljs-title function_">rowsTemplate</span>(<span class="hljs-string">'1fr 1fr 1fr 1fr 1fr'</span>)
      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)
      .<span class="hljs-title function_">height</span>(<span class="hljs-number">400</span>)
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)
    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#F5F5F5'</span>)
  }

  <span class="hljs-comment">// æŒ‰é’®ç‚¹å‡»å¤„ç†</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">onButtonClick</span>(<span class="hljs-attr">button</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">displayText</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">calculator</span>.<span class="hljs-title function_">handleButtonClick</span>(button)
  }

  <span class="hljs-comment">// æŒ‰é’®é¢œè‰²é…ç½®</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getButtonColor</span>(<span class="hljs-attr">button</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Color</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isOperator</span>(button) || button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">EQUAL</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getButtonBgColor</span>(<span class="hljs-attr">button</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Color</span> {
    <span class="hljs-keyword">if</span> (button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">CLEAR</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isOperator</span>(button) || button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">EQUAL</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">isOperator</span>(<span class="hljs-attr">button</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> [<span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">ADD</span>, <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">SUB</span>, <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">MUL</span>, <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">DIV</span>].<span class="hljs-title function_">includes</span>(button)
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€å…³é”®æŠ€æœ¯ç‰¹æ€§</h3>
<h4 data-id="heading-8">1. ç²¾åº¦å¤„ç†æœºåˆ¶</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¤ºä¾‹ï¼š0.2 + 2.22 çš„æ­£ç¡®è®¡ç®—</span>
<span class="hljs-keyword">private</span> <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">const</span> decimalA = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(a)  <span class="hljs-comment">// 1ä½å°æ•°</span>
  <span class="hljs-keyword">const</span> decimalB = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(b)  <span class="hljs-comment">// 2ä½å°æ•°</span>
  <span class="hljs-keyword">const</span> multiplier = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">10</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(decimalA, decimalB))  <span class="hljs-comment">// 100</span>
  
  <span class="hljs-keyword">return</span> (a * multiplier + b * multiplier) / multiplier
  <span class="hljs-comment">// è®¡ç®—è¿‡ç¨‹ï¼š(0.2*100 + 2.22*100)/100 = (20 + 222)/100 = 242/100 = 2.42</span>
}
</code></pre>
<h4 data-id="heading-9">2. å¤§æ•°æ˜¾ç¤ºä¼˜åŒ–</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 9007199254740992 + 1 æ˜¾ç¤ºä¸ºç§‘å­¦è®¡æ•°æ³•</span>
<span class="hljs-keyword">private</span> <span class="hljs-title function_">formatResult</span>(<span class="hljs-attr">result</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">if</span> (result &gt; <span class="hljs-number">1e15</span>) {
    <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toExponential</span>(<span class="hljs-number">10</span>)  <span class="hljs-comment">// &amp;#34;9.007199254740993e15&amp;#34;</span>
  }
  <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toString</span>()
}
</code></pre>
<h4 data-id="heading-10">3. è¿ç»­è¿ç®—æ”¯æŒ</h4>
<ul>
<li>æ”¯æŒè¡¨è¾¾å¼ï¼š<code>3 + 5 Ã— 2 - 1 = 12</code></li>
<li>çŠ¶æ€ç®¡ç†ï¼šé€šè¿‡<code>previousInput</code>ã€<code>currentInput</code>ã€<code>operator</code>è·Ÿè¸ªè¿ç®—çŠ¶æ€</li>
</ul>
<hr/>
<h3 data-id="heading-11">å››ã€è¿è¡Œæ•ˆæœä¸æµ‹è¯•ç”¨ä¾‹</h3>
<h4 data-id="heading-12">æµ‹è¯•åœºæ™¯</h4>
<ol>
<li><strong>åŸºç¡€è¿ç®—</strong>ï¼š<code>5 + 3 = 8</code> âœ“</li>
<li><strong>å°æ•°ç²¾åº¦</strong>ï¼š<code>0.1 + 0.2 = 0.3</code> âœ“</li>
<li><strong>æ··åˆè¿ç®—</strong>ï¼š<code>3 + 5 Ã— 2 = 13</code> âœ“</li>
<li><strong>å¤§æ•°å¤„ç†</strong>ï¼š<code>999999999999999 + 1 = 1e+15</code> âœ“</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼š<code>5 Ã· 0 = Infinity</code> âœ“</li>
</ol>
<hr/>
<h3 data-id="heading-13">äº”ã€æ‰©å±•åŠŸèƒ½å»ºè®®</h3>
<ol>
<li><strong>å†å²è®°å½•</strong>ï¼šæ·»åŠ Stackç»„ä»¶ä¿å­˜è®¡ç®—å†å²</li>
<li><strong>ä¸»é¢˜åˆ‡æ¢</strong>ï¼šä½¿ç”¨@StorageLinkå®ç°æ·±è‰²æ¨¡å¼</li>
<li><strong>è¯­éŸ³æ’­æŠ¥</strong>ï¼šé›†æˆTTSåŠŸèƒ½æœ—è¯»è®¡ç®—ç»“æœ</li>
<li><strong>å•ä½è½¬æ¢</strong>ï¼šæ‰©å±•ç§‘å­¦è®¡ç®—å™¨åŠŸèƒ½</li>
</ol>
<p>è¿™ä¸ªå®ç°å®Œæ•´å±•ç¤ºäº†é¸¿è’™6.0ä¸‹åŸºäºåŸºç¡€ç»„ä»¶çš„è®¡ç®—å™¨å¼€å‘ï¼Œé‡ç‚¹è§£å†³äº†æµ®ç‚¹æ•°ç²¾åº¦å’Œå¤§æ•°æ˜¾ç¤ºç­‰æ ¸å¿ƒé—®é¢˜ã€‚å…„å¼Ÿä»¬ï¼Œå¯ä»¥å»è¯•è¯•å“¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/371c356c5ce840e885ede120f750f6d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aiB5ZOl54ix57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765971946&amp;x-signature=7ow6SslISoa2pK%2BmRLOUYmr6cvo%3D" alt="å·äºŒ_å‰¯æœ¬2.jpg" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Expo (React Native) æœ€ä½³å®è·µï¼šTanStack Query æ·±åº¦é›†æˆæŒ‡å—]]></title>    <link>https://juejin.cn/post/7581876069609603115</link>    <guid>https://juejin.cn/post/7581876069609603115</guid>    <pubDate>2025-12-10T11:53:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581876069609603115" data-draft-id="7582047623738687542" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Expo (React Native) æœ€ä½³å®è·µï¼šTanStack Query æ·±åº¦é›†æˆæŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,React Native"/> <meta itemprop="datePublished" content="2025-12-10T11:53:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®è›‹å°ç²¾çµ"/> <meta itemprop="url" content="https://juejin.cn/user/219558056559278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Expo (React Native) æœ€ä½³å®è·µï¼šTanStack Query æ·±åº¦é›†æˆæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/219558056559278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®è›‹å°ç²¾çµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:53:19.000Z" title="Wed Dec 10 2025 11:53:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Expo å¼€å‘ä¸­ï¼Œå¼•å…¥ <strong>TanStack Query (React Query)</strong> æ˜¯ç§»åŠ¨ç«¯å¼€å‘çš„<strong>å¼ºçƒˆæ¨èæ–¹æ¡ˆ</strong>ã€‚</p>
<p>å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªè¯·æ±‚åº“ï¼Œè€Œæ˜¯ä¸€å¥—å®Œæ•´çš„<strong>å¼‚æ­¥çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ</strong>ï¼Œä¸“é—¨è§£å†³äº† React Native ä¸­æœ€æ£˜æ‰‹çš„ç½‘ç»œä¸ç¼“å­˜é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆå®ƒæ˜¯å¿…é€‰é¡¹ï¼Ÿ</h2>
<p>åœ¨ç§»åŠ¨ç«¯åœºæ™¯ä¸‹ï¼ŒTanStack Query è§£å†³äº†ä¼ ç»Ÿ <code>useEffect</code> + <code>useState</code> éš¾ä»¥å¤„ç†çš„å››å¤§ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>æ™ºèƒ½ç¼“å­˜ä¸ç¦»çº¿æ”¯æŒ</strong>ï¼šåœ¨ç½‘ç»œä¸ç¨³å®šæˆ–ç¦»çº¿æ—¶å±•ç¤ºç¼“å­˜æ•°æ®ï¼Œé¿å…ç™½å±ï¼›ç½‘ç»œæ¢å¤åè‡ªåŠ¨åœ¨åå°é™é»˜æ›´æ–°ã€‚</li>
<li><strong>åº”ç”¨æ¿€æ´»è‡ªåŠ¨åˆ·æ–° (Focus Refetch)</strong> ï¼šå½“ç”¨æˆ·ä»åå°ï¼ˆå¦‚å›å¤å¾®ä¿¡åï¼‰åˆ‡å› App æ—¶ï¼Œè‡ªåŠ¨æ£€æµ‹å¹¶åˆ·æ–°è¿‡æœŸæ•°æ®ï¼Œç¡®ä¿ç”¨æˆ·çœ‹åˆ°çš„ä¿¡æ¯æ°¸è¿œæ˜¯æœ€æ–°çš„ã€‚</li>
<li><strong>çŠ¶æ€ç®¡ç†è‡ªåŠ¨åŒ–</strong>ï¼šå½»åº•å‘Šåˆ«æ‰‹å†™ <code>isLoading</code>ã€<code>isError</code>ã€<code>data</code> ç­‰ç¹ççš„æ ·æ¿ä»£ç ã€‚</li>
<li><strong>åˆ—è¡¨äº¤äº’é›†æˆ</strong>ï¼šå†…ç½®äº†å¯¹ <strong>ä¸‹æ‹‰åˆ·æ–°</strong>ã€<strong>æ— é™æ»šåŠ¨ (Infinite Scroll)</strong> çš„å®Œç¾æ”¯æŒï¼Œä¸ <code>FlatList</code> é…åˆå¤©è¡£æ— ç¼ã€‚</li>
</ul>
<h2 data-id="heading-1">2. æ¨èçš„æŠ€æœ¯æ ˆæ¶æ„</h2>
<p>åœ¨ React Native åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬æ¨èä»¥ä¸‹çš„â€œé»„é‡‘ä¸‰è§’â€ç»„åˆï¼š</p>
<ul>
<li><strong>çŠ¶æ€ç®¡ç† (Server State)</strong> ï¼š<strong>TanStack Query</strong> (è´Ÿè´£è¯·æ±‚å»é‡ã€ç¼“å­˜ã€è¿‡æœŸç­–ç•¥)</li>
<li><strong>ç½‘ç»œè¯·æ±‚ (Fetcher)</strong> ï¼š<strong>Axios</strong> æˆ– <strong>Fetch</strong> (è´Ÿè´£å‘é€ HTTP è¯·æ±‚)</li>
<li><strong>å®‰å…¨å­˜å‚¨ (Auth)</strong> ï¼š<strong>Expo Secure Store</strong> (è´Ÿè´£å­˜å‚¨ Token)</li>
</ul>
<h2 data-id="heading-2">3. ç”Ÿäº§ç¯å¢ƒé›†æˆæŒ‡å— (å…³é”®)</h2>
<p>åœ¨ React Native ä¸­ä½¿ç”¨ TanStack Queryï¼Œå¿…é¡»æ‰‹åŠ¨é…ç½® <strong>App çŠ¶æ€ç›‘å¬</strong> å’Œ <strong>ç½‘ç»œçŠ¶æ€ç›‘å¬</strong>ï¼Œå¦åˆ™â€œåˆ‡åå°è‡ªåŠ¨åˆ·æ–°â€ç­‰æ ¸å¿ƒåŠŸèƒ½åœ¨çœŸæœºä¸Šå°†å¤±æ•ˆã€‚</p>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-Bash" lang="Bash"><span class="hljs-comment"># æ ¸å¿ƒåº“</span>
npm install @tanstack/react-query

<span class="hljs-comment"># ç”¨äºç›‘å¬ç½‘ç»œçŠ¶æ€ï¼ˆå¿…é¡»ï¼‰</span>
npx expo install @react-native-community/netinfo
</code></pre>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šé…ç½®å…¨å±€ Provider (<code>app/_layout.tsx</code>)</h3>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚æˆ‘ä»¬éœ€è¦å‘Šè¯‰ TanStack Query ä½•æ—¶ App å¤„äºâ€œå‰å°â€ï¼Œä»¥åŠä½•æ—¶â€œè”ç½‘â€ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppStateStatus</span>, <span class="hljs-title class_">Platform</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Slot</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'expo-router'</span>;
<span class="hljs-keyword">import</span> { 
  <span class="hljs-title class_">QueryClient</span>, 
  <span class="hljs-title class_">QueryClientProvider</span>, 
  focusManager, 
  onlineManager 
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@tanstack/react-query'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">NetInfo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@react-native-community/netinfo'</span>;
<span class="hljs-keyword">import</span> { useAppState } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useAppState'</span>; <span class="hljs-comment">// å‡è®¾ä½ æœ‰ä¸€ä¸ª AppState Hookï¼Œæˆ–è€…ç›´æ¥å†™åœ¨ä¸‹é¢</span>

<span class="hljs-comment">// 1. é…ç½®ç½‘ç»œçŠ¶æ€ç›‘å¬ (è§£å†³æ–­ç½‘é‡è¿è‡ªåŠ¨åˆ·æ–°)</span>
onlineManager.<span class="hljs-title function_">setEventListener</span>(<span class="hljs-function">(<span class="hljs-params">setOnline</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NetInfo</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
    <span class="hljs-title function_">setOnline</span>(!!state.<span class="hljs-property">isConnected</span>);
  });
});

<span class="hljs-comment">// 2. é…ç½® App ç„¦ç‚¹ç›‘å¬ (è§£å†³åˆ‡å›å‰å°è‡ªåŠ¨åˆ·æ–°)</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">onAppStateChange</span>(<span class="hljs-params">status: AppStateStatus</span>) {
  <span class="hljs-comment">// Web ç«¯è‡ªå¸¦ç›‘å¬ï¼ŒRN ç«¯éœ€è¦æ‰‹åŠ¨è§¦å‘</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> !== <span class="hljs-string">'web'</span>) {
    focusManager.<span class="hljs-title function_">setFocused</span>(status === <span class="hljs-string">'active'</span>);
  }
}

<span class="hljs-comment">// 3. åˆå§‹åŒ– QueryClient (é…ç½®å…¨å±€é»˜è®¤ç­–ç•¥)</span>
<span class="hljs-keyword">const</span> queryClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryClient</span>({
  <span class="hljs-attr">defaultOptions</span>: {
    <span class="hljs-attr">queries</span>: {
      <span class="hljs-attr">retry</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// è¯·æ±‚å¤±è´¥è‡ªåŠ¨é‡è¯• 2 æ¬¡</span>
      <span class="hljs-attr">staleTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span>, <span class="hljs-comment">// æ•°æ® 1 åˆ†é’Ÿå†…è®¤ä¸ºæ˜¯â€œæ–°é²œâ€çš„ï¼Œä¸è§¦å‘è‡ªåŠ¨è¯·æ±‚</span>
      <span class="hljs-attr">gcTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">5</span>, <span class="hljs-comment">// ç¼“å­˜åƒåœ¾å›æ”¶æ—¶é—´ (5åˆ†é’Ÿ)</span>
    },
  },
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç›‘å¬ App çŠ¶æ€å˜åŒ–</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> subscription = <span class="hljs-title class_">AppState</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, onAppStateChange);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> subscription.<span class="hljs-title function_">remove</span>();
  }, []);

  <span class="hljs-keyword">return</span> (
    
       {<span class="hljs-comment">/* ä½ çš„é¡µé¢å…¥å£ */</span>}
    
  );
}
</code></pre>
<h3 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šåœ¨é¡µé¢ä¸­ä½¿ç”¨</h3>
<p>é…åˆ <code>RefreshControl</code> å®ç°ä¸‹æ‹‰åˆ·æ–°å˜å¾—éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> { useQuery } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tanstack/react-query'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">View</span>, <span class="hljs-title class_">Text</span>, <span class="hljs-title class_">FlatList</span>, <span class="hljs-title class_">RefreshControl</span>, <span class="hljs-title class_">ActivityIndicator</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// å®šä¹‰è¯·æ±‚å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchTodos</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'https://api.example.com/todos'</span>);
  <span class="hljs-keyword">return</span> data;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoListScreen</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { data, isLoading, isError, refetch } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'todos'</span>],
    <span class="hljs-attr">queryFn</span>: fetchTodos,
  });

  <span class="hljs-keyword">if</span> (isLoading) <span class="hljs-keyword">return</span> ;
  <span class="hljs-keyword">if</span> (isError) <span class="hljs-keyword">return</span> åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•;

  <span class="hljs-keyword">return</span> (
     item.<span class="hljs-property">id</span>.<span class="hljs-title function_">toString</span>()}
      renderItem={<span class="hljs-function">(<span class="hljs-params">{ item }</span>) =&gt;</span> {item.<span class="hljs-property">title</span>}}
      <span class="hljs-comment">// é›†æˆä¸‹æ‹‰åˆ·æ–°ï¼Œåªéœ€ä¸€è¡Œä»£ç </span>
      refreshControl={
        
      }
    /&gt;
  );
}
</code></pre>
<h2 data-id="heading-6">4. æ€»ç»“</h2>
<p>å¼•å…¥ TanStack Query æ˜¯ Expo åº”ç”¨è¿ˆå‘<strong>é«˜æ€§èƒ½</strong>å’Œ<strong>é«˜å¯ç”¨æ€§</strong>çš„å…³é”®ä¸€æ­¥ã€‚</p>
<ul>
<li><strong>å¯¹äºå¼€å‘è€…</strong>ï¼šå®ƒæ¶ˆé™¤äº† 90% çš„å†—ä½™ä»£ç å’Œæ‰‹åŠ¨çŠ¶æ€ç®¡ç†ã€‚</li>
<li><strong>å¯¹äºç”¨æˆ·</strong>ï¼šå®ƒæä¾›äº†ä¸æ»‘çš„â€œåˆ‡åå°åˆ·æ–°â€å’Œâ€œæ–­ç½‘é‡è¿â€ä½“éªŒã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[@contextlib.contextmanager çš„ä½œç”¨æ˜¯ä»€ä¹ˆ]]></title>    <link>https://juejin.cn/post/7581470169840058406</link>    <guid>https://juejin.cn/post/7581470169840058406</guid>    <pubDate>2025-12-09T03:34:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581470169840058406" data-draft-id="7581448482544943130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="@contextlib.contextmanager çš„ä½œç”¨æ˜¯ä»€ä¹ˆ"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-09T03:34:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Xier"/> <meta itemprop="url" content="https://juejin.cn/user/1152710585356295"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            @contextlib.contextmanager çš„ä½œç”¨æ˜¯ä»€ä¹ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1152710585356295/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Xier
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T03:34:37.000Z" title="Tue Dec 09 2025 03:34:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong><code>with</code> è¯­å¥æ ¹æœ¬å¬ä¸æ‡‚å‡½æ•°çš„è¯­è¨€ï¼Œå®ƒåªå¬å¾—æ‡‚â€œç±»â€çš„è¯­è¨€ï¼ˆå³ <code>__enter__</code> å’Œ <code>__exit__</code>ï¼‰ã€‚</strong></p>
<p><code>@contextlib.contextmanager</code> çš„ä½œç”¨å°±æ˜¯<strong>æŠŠä½ çš„ç”Ÿæˆå™¨å‡½æ•°â€œåŒ…è£…â€æˆä¸€ä¸ª <code>with</code> è¯­å¥èƒ½å¬æ‡‚çš„ç±»</strong>ã€‚</p>
<p>ä¸‹é¢æˆ‘ä¸ºä½ æ‹†è§£å®ƒçš„æ ¸å¿ƒæœºåˆ¶ï¼š</p>
<h3 data-id="heading-0">1. ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ç”¨ï¼Ÿ</h3>
<p>å¦‚æœä½ ç›´æ¥æŠŠä¸€ä¸ªåŒ…å« <code>try...finally</code> å’Œ <code>yield</code> çš„æ™®é€šç”Ÿæˆå™¨å‡½æ•°æ”¾åˆ° <code>with</code> åé¢ï¼Œç¨‹åºä¼šç›´æ¥<strong>æŠ¥é”™</strong>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">my_gen</span>():
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ¸…ç†å·¥ä½œ"</span>)

<span class="hljs-comment"># âŒ è¿™æ ·å†™ä¼šæŠ¥é”™ï¼</span>
<span class="hljs-comment"># AttributeError: __enter__</span>
<span class="hljs-comment"># with my_gen() as x:</span>
<span class="hljs-comment">#     pass</span>
</code></pre>
<p><strong>åŸå› ï¼š</strong> <code>with</code> è¯­å¥æœŸæœ›åé¢çš„å¯¹è±¡å¿…é¡»æœ‰ <code>__enter__</code> å’Œ <code>__exit__</code> æ–¹æ³•ã€‚æ™®é€šçš„ç”Ÿæˆå™¨å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ï¼Œå®ƒæ²¡æœ‰è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
<h3 data-id="heading-1">2. <code>@contextlib.contextmanager</code> åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ</h3>
<p>å½“ä½ ç»™å‡½æ•°åŠ ä¸Šè¿™ä¸ªè£…é¥°å™¨æ—¶ï¼ŒPython åœ¨èƒŒååšäº†ä¸€ä¸ªâ€œå·å¤©æ¢æ—¥â€çš„æ“ä½œï¼š</p>
<ol>
<li>å®ƒæ•è·äº†ä½ çš„ç”Ÿæˆå™¨å‡½æ•°ã€‚</li>
<li>å®ƒè¿”å›äº†ä¸€ä¸ª<strong>æ–°çš„å¯¹è±¡</strong>ï¼ˆHelper Classï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡å†…éƒ¨å®ç°äº† <code>__enter__</code> å’Œ <code>__exit__</code>ã€‚</li>
<li>å®ƒåœ¨ <code>__exit__</code> æ–¹æ³•é‡Œï¼Œå¸®ä½ å»<strong>æ‰‹åŠ¨è§¦å‘</strong>äº†ç”Ÿæˆå™¨çš„åç»­ä»£ç ï¼ˆä¹Ÿå°±æ˜¯ä½ çš„ <code>finally</code> éƒ¨åˆ†ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-2">3. æ‰§è¡Œæµç¨‹å›¾è§£ï¼ˆæ ¸å¿ƒåŸç†ï¼‰</h3>
<p>ä¸ºäº†è®©ä½ æ˜ç™½ <code>finally</code> æ˜¯æ€ä¹ˆè¢«è§¦å‘çš„ï¼Œè¯·çœ‹è¿™ä¸ªæµç¨‹ï¼š</p>
<ol>
<li>
<p><strong><code>with</code> å¼€å§‹</strong> -&gt; è°ƒç”¨è£…é¥°å™¨ç”Ÿæˆçš„å¯¹è±¡çš„ <code>__enter__</code>ã€‚</p>
</li>
<li>
<p><strong><code>__enter__</code> å†…éƒ¨</strong> -&gt; è°ƒç”¨ <code>next(your_generator)</code>ã€‚</p>
<ul>
<li>ç”Ÿæˆå™¨å¼€å§‹è¿è¡Œ -&gt; é‡åˆ° <code>yield</code> æš‚åœã€‚</li>
<li><code>__enter__</code> æ‹¿åˆ° <code>yield</code> å‡ºæ¥çš„å€¼ï¼Œå¹¶è¿”å›ç»™ <code>as</code> åçš„å˜é‡ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç”¨æˆ·ä»£ç å— (<code>with</code> å†…éƒ¨)</strong> -&gt; æ‰§è¡Œä½ çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>
</li>
<li>
<p><strong><code>with</code> ç»“æŸ</strong> -&gt; è‡ªåŠ¨è°ƒç”¨è£…é¥°å™¨ç”Ÿæˆçš„å¯¹è±¡çš„ <code>__exit__</code>ã€‚</p>
</li>
<li>
<p><strong><code>__exit__</code> å†…éƒ¨</strong> -&gt; <strong>å…³é”®ç‚¹æ¥äº†ï¼</strong></p>
<ul>
<li>å®ƒä¼šå†æ¬¡è°ƒç”¨ <code>next(your_generator)</code> (æˆ–è€… <code>throw</code> å¦‚æœæœ‰å¼‚å¸¸)ã€‚</li>
<li><strong>è¿™å¯¼è‡´ç”Ÿæˆå™¨ä» <code>yield</code> åé¢ç»§ç»­è¿è¡Œã€‚</strong></li>
<li>å› æ­¤ï¼Œä½ çš„ <code>finally</code> ä»£ç å—æ‰å¾—ä»¥æ‰§è¡Œã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-3">4. è‡ªå·±æ¨¡æ‹Ÿä¸€ä¸ª <code>contextmanager</code></h3>
<p>ä¸ºäº†è¯æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ç±»ï¼Œæ¥å®ç°å’Œ <code>@contextlib.contextmanager</code> ä¸€æ ·çš„åŠŸèƒ½ã€‚çœ‹å®Œè¿™ä¸ªä½ å°±å½»åº•æ‡‚äº†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyContextManagerWrapper</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, generator_func, *args, **kwargs</span>):
        <span class="hljs-comment"># 1. åˆå§‹åŒ–æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡</span>
        self.gen = generator_func(*args, **kwargs)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__enter__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># 2. è¿›å…¥ with æ—¶ï¼Œè¿è¡Œç”Ÿæˆå™¨ç›´åˆ°é‡åˆ° yield</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">next</span>(self.gen)
        <span class="hljs-keyword">except</span> StopIteration:
            <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"ç”Ÿæˆå™¨æ²¡æœ‰ yield ä»»ä½•å€¼ï¼"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__exit__</span>(<span class="hljs-params">self, exc_type, exc_value, traceback</span>):
        <span class="hljs-comment"># 3. é€€å‡º with æ—¶ï¼Œæ ¸å¿ƒé€»è¾‘åœ¨è¿™é‡Œï¼</span>
        <span class="hljs-keyword">if</span> exc_type <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># å¦‚æœæ²¡æœ‰å¼‚å¸¸ï¼Œè®©ç”Ÿæˆå™¨ç»§ç»­è¿è¡Œï¼ˆæ‰§è¡Œ yield åé¢çš„ä»£ç ï¼Œå³ finallyï¼‰</span>
                <span class="hljs-built_in">next</span>(self.gen)
            <span class="hljs-keyword">except</span> StopIteration:
                <span class="hljs-comment"># ç”Ÿæˆå™¨æ­£å¸¸ç»“æŸæ˜¯é¢„æœŸçš„</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># å¦‚æœæœ‰å¼‚å¸¸ï¼ŒæŠŠå¼‚å¸¸æ‰”å›ç»™ç”Ÿæˆå™¨</span>
                self.gen.throw(exc_type, exc_value, traceback)
            <span class="hljs-keyword">except</span> (StopIteration, exc_type):
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
            <span class="hljs-keyword">except</span> Exception:
                <span class="hljs-comment"># å¤„ç†ç”Ÿæˆå™¨å†…éƒ¨çš„æ–°å¼‚å¸¸</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

<span class="hljs-comment"># --- æµ‹è¯• ---</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_func</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"1. setup"</span>)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">yield</span> <span class="hljs-string">"èµ„æº"</span>
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"3. teardown (finally æ‰§è¡Œäº†)"</span>)

<span class="hljs-comment"># ä½¿ç”¨æˆ‘ä»¬è¦åŒ…è£…çš„ç±»</span>
<span class="hljs-keyword">with</span> MyContextManagerWrapper(simple_func) <span class="hljs-keyword">as</span> res:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"2. inside with: <span class="hljs-subst">{res}</span>"</span>)
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<p>Plaintext</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> setup
<span class="hljs-bullet">2.</span> inside with: èµ„æº
<span class="hljs-bullet">3.</span> teardown (finally æ‰§è¡Œäº†)
</code></pre>
<h3 data-id="heading-4">æ€»ç»“</h3>
<p><code>@contextlib.contextmanager</code> <strong>ä¸æ˜¯ä»…ä»…ä¸ºäº†æ‰§è¡Œ <code>finally</code></strong>ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼š</p>
<ol>
<li><strong>æ¡¥æ¥ (Bridge)ï¼š</strong> æŠŠâ€œç”Ÿæˆå™¨â€è½¬æ¢æˆç¬¦åˆâ€œä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®â€çš„å¯¹è±¡ã€‚</li>
<li><strong>é©±åŠ¨ (Driver)ï¼š</strong> å®ƒè´Ÿè´£åœ¨ <code>__enter__</code> æ—¶å¯åŠ¨ç”Ÿæˆå™¨ï¼Œåœ¨ <code>__exit__</code> æ—¶<strong>æ¢å¤</strong>ç”Ÿæˆå™¨çš„æ‰§è¡Œã€‚</li>
</ol>
<p>æ­£æ˜¯å› ä¸ºå®ƒåœ¨ <code>__exit__</code> é‡Œæ‰‹åŠ¨å¸®ä½ â€œè¸¹â€äº†ç”Ÿæˆå™¨ä¸€è„šï¼ˆè°ƒç”¨äº† <code>next()</code>ï¼‰ï¼Œç”Ÿæˆå™¨æ‰å¾—ä»¥ä» <code>yield</code> é†’æ¥å¹¶å¾€ä¸‹èµ°ï¼Œä»è€Œæ‰§è¡Œåˆ°äº†ä½ çš„ <code>finally</code> ä»£ç å—ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–°é¡¹ç›®ä¸ºä»€ä¹ˆæ¨èWebFluxï¼Œè€ŒéSpringMVC?]]></title>    <link>https://juejin.cn/post/7581381365494366262</link>    <guid>https://juejin.cn/post/7581381365494366262</guid>    <pubDate>2025-12-09T03:41:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581381365494366262" data-draft-id="7581324707481305129" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–°é¡¹ç›®ä¸ºä»€ä¹ˆæ¨èWebFluxï¼Œè€ŒéSpringMVC?"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-09T03:41:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–°é¡¹ç›®ä¸ºä»€ä¹ˆæ¨èWebFluxï¼Œè€ŒéSpringMVC?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T03:41:39.000Z" title="Tue Dec 09 2025 03:41:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»æ—©æœŸçš„ Struts åˆ°ç»Ÿæ²»å¤šå¹´çš„ Spring MVCï¼Œæˆ‘è§è¯äº†æ•´ä¸ª Java Web å¼€å‘æ¡†æ¶çš„æ¼”è¿›ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘æƒ³å’Œå¤§å®¶æ·±å…¥èŠèŠ Spring 5 å¸¦æ¥çš„è¿™ä¸ªâ€œæ–°æˆå‘˜â€â€”â€” <strong>WebFlux</strong>ã€‚</p>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å·¥ä½œä¸­å¯èƒ½å¬è¯´è¿‡å®ƒï¼ŒçŸ¥é“å®ƒâ€œæ€§èƒ½é«˜â€ã€â€œå¼‚æ­¥éé˜»å¡â€ï¼Œä½†çœŸè¦ä¸Šæ‰‹ï¼Œå¿ƒé‡Œå´ç›´æ‰“é¼“ï¼šè¿™å’Œ Spring MVC åˆ°åº•æœ‰å•¥ä¸åŒï¼Ÿæˆ‘çš„é¡¹ç›®çœŸçš„éœ€è¦å®ƒå—ï¼Ÿ</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»åº•å±‚åŸç†åˆ°å®æˆ˜ä»£ç ï¼Œå½»åº•æŠŠ WebFlux è®²æ˜ç™½ã€‚</p>
<p><a href="https://link.juejin.cn/?target=http%3A%2F%2Fsusan.net.cn%2Fproject" title="https://link.juejin.cn/?target=http%3A%2F%2Fsusan.net.cn%2Fproject" target="_blank">æœ€è¿‘å‡†å¤‡é¢è¯•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªå®è—ç½‘ç«™ï¼ˆJavaçªå‡»é˜Ÿï¼‰ï¼šwww.susan.net.cnï¼Œé‡Œé¢ï¼šé¢è¯•å…«è‚¡æ–‡ã€åœºæ™¯è®¾è®¡é¢˜ã€Springæºç è§£è¯»ã€8ä¸ªé¡¹ç›®å®æˆ˜ã€å·¥ä½œå†…æ¨ä»€ä¹ˆéƒ½æœ‰</a>ã€‚</p>
<h2 data-id="heading-1">01 ä¸ºä»€ä¹ˆæ˜¯WebFluxï¼Ÿ</h2>
<p>è¦ç†è§£ WebFluxï¼Œå¿…é¡»å…ˆçœ‹æ¸…æ¥šå®ƒè¦è§£å†³çš„é—®é¢˜ã€‚æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ Spring MVCï¼Œå…¶æ ¸å¿ƒæ˜¯å»ºç«‹åœ¨ Servlet API ä¹‹ä¸Šçš„<strong>åŒæ­¥é˜»å¡æ¨¡å‹</strong>ã€‚</p>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä½ çš„æ§åˆ¶å™¨é‡Œæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œéœ€è¦è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨æ¥å£è·å–æ•°æ®ï¼Œè¿™ä¸ªæ¥å£å“åº”å¾ˆæ…¢ï¼Œå¯èƒ½éœ€è¦ 2 ç§’ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ ç»Ÿçš„Spring MVCæ§åˆ¶å™¨</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraditionalController</span> {
    <span class="hljs-meta">@GetMapping("/slow")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">slowApi</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶2ç§’çš„è¿œç¨‹è°ƒç”¨</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> someSlowRemoteService.call(); <span class="hljs-comment">// çº¿ç¨‹åœ¨è¿™é‡Œè¢«é˜»å¡2ç§’ï¼</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Data: "</span> + data;
    }
}
</code></pre>
<p><strong>é—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Ÿ</strong> å½“è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨æ—¶ï¼ŒServlet å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰ä¼šä»å®ƒçš„çº¿ç¨‹æ± ä¸­åˆ†é…ä¸€ä¸ªå·¥ä½œçº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚</p>
<p>åœ¨è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œ <code>someSlowRemoteService.call()</code> çš„æ•´æ•´ 2 ç§’é’Ÿé‡Œï¼Œ<strong>è¿™ä¸ªçº¿ç¨‹ä»€ä¹ˆä¹Ÿåšä¸äº†ï¼Œåªèƒ½ç©ºè½¬ã€ç­‰å¾…</strong>ã€‚</p>
<p>å®ƒæ— æ³•å»å¤„ç†å…¶ä»–å·²ç»åˆ°è¾¾çš„è¯·æ±‚ã€‚å¦‚æœåŒä¸€æ—¶é—´æœ‰ 1000 ä¸ªè¿™æ ·çš„å¹¶å‘è¯·æ±‚ï¼ŒTomcat å°±éœ€è¦å‡†å¤‡è‡³å°‘ 1000 ä¸ªçº¿ç¨‹æ¥åº”å¯¹ã€‚</p>
<p>æ¯ä¸ªçº¿ç¨‹éƒ½æ¶ˆè€—å†…å­˜ï¼ˆçº¦ 1MB æ ˆå†…å­˜ï¼‰å’Œ CPU è°ƒåº¦èµ„æºã€‚å½“çº¿ç¨‹æ•°è¶…è¿‡ç‰©ç†æ ¸å¿ƒæ‰¿è½½èƒ½åŠ›ï¼Œå¤§é‡çš„æ—¶é—´å°†æµªè´¹åœ¨çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ä¸Šï¼Œå¯¼è‡´å“åº”å˜æ…¢ï¼Œæœ€ç»ˆå¯èƒ½å› èµ„æºè€—å°½è€Œå´©æºƒã€‚</p>
<p>è¿™å°±æ˜¯ <strong>â€œä¸€ä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªçº¿ç¨‹â€çš„é˜»å¡æ¨¡å‹åœ¨ I/O å¯†é›†å‹åœºæ™¯ä¸‹çš„å¤©ç„¶ç“¶é¢ˆ</strong>ã€‚æˆ‘ä»¬æŠ•å…¥äº†å¤§é‡èµ„æºï¼ˆçº¿ç¨‹ï¼‰ï¼Œä»…ä»…æ˜¯ä¸ºäº†â€œç­‰å¾…â€ï¼Œè€Œä¸æ˜¯â€œè®¡ç®—â€ã€‚</p>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å·¥ä½œä¸­ï¼Œå¯èƒ½å·²ç»é€šè¿‡å¢å¤§çº¿ç¨‹æ± ã€æœåŠ¡æ‹†åˆ†ç­‰æ–¹å¼ç¼“è§£äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†è¿™æœ¬è´¨ä¸Šæ˜¯â€œç”¨èµ„æºæ¢ååé‡â€ï¼Œå¹¶éæœ€ä¼˜è§£ã€‚</p>
<h2 data-id="heading-2">02 WebFluxçš„æ ¸å¿ƒï¼šå¼‚æ­¥éé˜»å¡ä¸å“åº”å¼æµ</h2>
<p>WebFlux çš„å“²å­¦æˆªç„¶ä¸åŒã€‚å®ƒæºäº<strong>å“åº”å¼ç¼–ç¨‹èŒƒå¼</strong>ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ï¼š<strong>ç”¨å°‘é‡ã€å›ºå®šçš„çº¿ç¨‹ï¼Œå¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚</strong>ã€‚</p>
<p>å¦‚ä½•åšåˆ°ï¼Ÿç­”æ¡ˆæ˜¯ <strong>äº‹ä»¶é©±åŠ¨</strong> å’Œ <strong>å¼‚æ­¥éé˜»å¡ I/O</strong>ã€‚å®ƒä¸å†è®©çº¿ç¨‹å‚»ç­‰ï¼Œè€Œæ˜¯å‘Šè¯‰ç³»ç»Ÿï¼šâ€œæˆ‘å»åšç‚¹åˆ«çš„ï¼Œç­‰æ•°æ®å‡†å¤‡å¥½äº†ï¼Œä½ å†å›è°ƒé€šçŸ¥æˆ‘â€ã€‚</p>
<h3 data-id="heading-3">Reactor ä¸ Mono/Flux</h3>
<p>è¿™æ˜¯ç†è§£ WebFlux çš„ç¬¬ä¸€é“åã€‚WebFlux æ„å»ºåœ¨ Project Reactor å“åº”å¼åº“ä¹‹ä¸Šï¼Œå¼•å…¥äº†ä¸¤ä¸ªæ ¸å¿ƒç±»å‹ï¼š</p>
<ul>
<li><strong>Mono</strong>ï¼š ä»£è¡¨ <strong>0 æˆ– 1 ä¸ª</strong> ç»“æœçš„å¼‚æ­¥åºåˆ—ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªâ€œæœªæ¥å¯èƒ½åˆ°æ¥çš„å•ä¸ªæ•°æ®åŒ…â€çš„æ‰¿è¯ºã€‚</li>
<li><strong>Flux</strong>ï¼š ä»£è¡¨ <strong>0 åˆ° N ä¸ª</strong> ç»“æœçš„å¼‚æ­¥åºåˆ—ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªâ€œæ•°æ®æµâ€ï¼Œæ•°æ®é¡¹ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å¼‚æ­¥å‘å¸ƒå‡ºæ¥ã€‚</li>
</ul>
<p>çœ‹ä¸€ä¸ªä»£ç å¯¹æ¯”ï¼Œç«‹åˆ»å°±èƒ½æ˜ç™½ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Spring MVC: ç›´æ¥è¿”å›å¯¹è±¡</span>
<span class="hljs-meta">@GetMapping("/user/{id}")</span>
<span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String id)</span> {
    <span class="hljs-keyword">return</span> userService.findById(id); <span class="hljs-comment">// é˜»å¡å¼ï¼Œçº¿ç¨‹ç­‰å¾…æ•°æ®åº“è¿”å›</span>
}

<span class="hljs-comment">// WebFlux: è¿”å›Monoï¼Œä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ‰¿è¯º</span>
<span class="hljs-meta">@GetMapping("/user/{id}")</span>
<span class="hljs-keyword">public</span> Mono&lt;User&gt; <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String id)</span> {
    <span class="hljs-keyword">return</span> userService.findByIdReactive(id); <span class="hljs-comment">// éé˜»å¡ï¼Œç«‹å³è¿”å›Monoï¼Œæ•°æ®ç¨åå¡«å……</span>
}
</code></pre>
<p>åœ¨ WebFlux ç‰ˆæœ¬ä¸­ï¼Œ<code>getUser</code> æ–¹æ³•<strong>å‡ ä¹ç¬é—´è¿”å›</strong>ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª <code>Mono&lt;User&gt;</code> çš„ç©ºå£³ã€‚å½“åº•å±‚éé˜»å¡æ•°æ®åº“é©±åŠ¨çœŸæ­£è·å–åˆ°æ•°æ®åï¼Œä¼šè‡ªåŠ¨å°†æ•°æ®â€œå¡«å……â€åˆ°è¿™ä¸ª <code>Mono</code> é‡Œï¼Œå¹¶æœ€ç»ˆå‘é€ç»™å®¢æˆ·ç«¯ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œçº¿ç¨‹æ²¡æœ‰è¢«æŒ‚èµ·ï¼Œå®ƒå¯ä»¥ç«‹åˆ»å»å¤„ç†å…¶ä»–è¯·æ±‚ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢è¿™å¼ å›¾ï¼Œç›´è§‚æ„Ÿå—ä¸¤ç§æ¨¡å‹å¤„ç†å¤šä¸ªæ…¢è¯·æ±‚æ—¶çš„å·¨å¤§å·®å¼‚ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47208efe6f154e3e9c0f4f454f51dc87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765856499&amp;x-signature=sy9F4uC%2FtkQMfAFsd4sOfs8AZ4g%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">èƒŒå‹ï¼ˆBackpressureï¼‰ï¼šå“åº”å¼æµçš„ç²¾é«“</h3>
<p>è¿™æˆ–è®¸æ˜¯ WebFlux æœ€ç²¾å¦™ä¹Ÿæœ€å®¹æ˜“è¢«å¿½è§†çš„ç‰¹æ€§ã€‚åœ¨ä¼ ç»Ÿçš„æ‹‰å–æ¨¡å‹ä¸­ï¼Œæ¶ˆè´¹è€…æ§åˆ¶èŠ‚å¥ã€‚è€Œåœ¨å“åº”å¼æµä¸­ï¼Œæ•°æ®ç”±ç”Ÿäº§è€…ä¸»åŠ¨æ¨é€ï¼Œå¦‚æœç”Ÿäº§è€…å¤ªå¿«ï¼Œæ¶ˆè´¹è€…æ¥ä¸åŠå¤„ç†æ€ä¹ˆåŠï¼Ÿ</p>
<p><strong>èƒŒå‹æœºåˆ¶</strong>å…è®¸æ¶ˆè´¹è€…ï¼ˆå¦‚ä¸‹æ¸¸æœåŠ¡ï¼‰ä¸»åŠ¨å‘ŠçŸ¥ç”Ÿäº§è€…ï¼ˆå¦‚ä¸Šæ¸¸æ•°æ®æºï¼‰â€œæˆ‘æœ€å¤šè¿˜èƒ½å¤„ç†å¤šå°‘â€ï¼Œç”Ÿäº§è€…æ®æ­¤è°ƒæ•´æ¨é€é€Ÿç‡ï¼Œé¿å…æ¶ˆè´¹è€…è¢«å‹å®ã€‚è¿™ä¸ºæ„å»ºå¥å£®çš„æµå¤„ç†ç³»ç»Ÿæä¾›äº†åŸºç¡€ä¿éšœï¼Œæ˜¯ Reactive Streams è§„èŒƒçš„æ ¸å¿ƒã€‚</p>
<h2 data-id="heading-5">03 ä¸¤ç§ç¼–ç¨‹æ¨¡å‹ï¼šæ³¨è§£ä¸å‡½æ•°å¼</h2>
<p>æœ‰äº›å°ä¼™ä¼´ä¸€å¬è¦å­¦æ–°æ¡†æ¶å°±å¤´å¤§ï¼Œç”Ÿæ€•è¿‡å» Spring MVC çš„ç»éªŒç™½è´¹ã€‚åˆ«æ‹…å¿ƒï¼ŒWebFlux è´´å¿ƒåœ°æä¾›äº†ä¸¤ç§ç¼–ç¨‹æ¨¡å‹ï¼Œå¹³æ»‘è¿‡æ¸¡ã€‚</p>
<h3 data-id="heading-6">1. æ³¨è§£æ¨¡å‹ï¼šæœ€ç†Ÿæ‚‰çš„é™Œç”Ÿäºº</h3>
<p>è¿™ç§æ–¹å¼å’Œ Spring MVC <strong>å‡ ä¹ä¸€æ¨¡ä¸€æ ·</strong>ï¼Œå­¦ä¹ æˆæœ¬æä½ã€‚ä¸»è¦åŒºåˆ«ä»…åœ¨äºè¿”å›å€¼å’Œéƒ¨åˆ†å‚æ•°ç±»å‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactiveOrderController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ReactiveOrderService orderService;

    <span class="hljs-comment">// è¿”å›Fluxï¼Œä»£è¡¨å¤šä¸ªè®¢å•çš„æµ</span>
    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> Flux&lt;Order&gt; <span class="hljs-title function_">getAllOrders</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> orderService.findAll();
    }

    <span class="hljs-comment">// è¿”å›Mono</span>
    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> Mono&lt;Order&gt; <span class="hljs-title function_">getOrderById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String id)</span> {
        <span class="hljs-keyword">return</span> orderService.findById(id);
    }

    <span class="hljs-comment">// å‚æ•°ä¹Ÿå¯ä»¥æ˜¯Mono</span>
    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> Mono&lt;Void&gt; <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Mono&lt;Order&gt; orderMono)</span> {
        <span class="hljs-keyword">return</span> orderMono.flatMap(orderService::save).then();
    }
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº† <code>Flux</code> å’Œ <code>Mono</code> è¿™äº›ç±»å‹ï¼Œå…¶ä»–æ³¨è§£ <code>@RestController</code>ã€<code>@GetMapping</code> éƒ½æ˜¯è€ç†Ÿäººã€‚è¿™å¯¹äºç°æœ‰é¡¹ç›®è¿›è¡Œéƒ¨åˆ†é‡æ„æˆ–æ–°é¡¹ç›®å¯åŠ¨éå¸¸å‹å¥½ã€‚</p>
<h3 data-id="heading-7">2. å‡½æ•°å¼æ¨¡å‹ï¼šæ›´çµæ´»è½»é‡çš„é€‰æ‹©</h3>
<p>è¿™æ˜¯ WebFlux çš„å¦ä¸€é¢ï¼Œæ›´åƒæ˜¯åœ¨ç”¨ <strong>Java 8 çš„ Lambda è¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£æ¥å®šä¹‰è·¯ç”±å’Œå¤„ç†é€»è¾‘</strong>ï¼Œå®ƒä¸ä¾èµ–äºæ³¨è§£ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RouterFunctionConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RouterFunction&lt;ServerResponse&gt; <span class="hljs-title function_">routeOrder</span><span class="hljs-params">(ReactiveOrderHandler orderHandler)</span> {
        <span class="hljs-keyword">return</span> RouterFunctions.route()
                .GET(<span class="hljs-string">"/fn/orders"</span>, orderHandler::getAll)
                .GET(<span class="hljs-string">"/fn/orders/{id}"</span>, orderHandler::getById)
                .POST(<span class="hljs-string">"/fn/orders"</span>, orderHandler::create)
                .build();
    }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactiveOrderHandler</span> {
    <span class="hljs-keyword">public</span> Mono&lt;ServerResponse&gt; <span class="hljs-title function_">getAll</span><span class="hljs-params">(ServerRequest request)</span> {
        Flux&lt;Order&gt; orders = ... <span class="hljs-comment">// è·å–è®¢å•æµ</span>
        <span class="hljs-keyword">return</span> ServerResponse.ok()
                .contentType(MediaType.APPLICATION_JSON)
                .body(orders, Order.class);
    }
    <span class="hljs-comment">// ... å…¶ä»–å¤„ç†æ–¹æ³•</span>
}
</code></pre>
<p>å‡½æ•°å¼æ¨¡å‹å°†æ‰€æœ‰è·¯ç”±å’Œå¤„ç†å™¨æš´éœ²ä¸ºæ˜ç¡®çš„ Beanï¼Œ<strong>å£°æ˜æ¸…æ™°ï¼Œæ˜“äºæµ‹è¯•ï¼Œä¸”è¿è¡Œæ—¶å¼€é”€æ›´å°</strong>ï¼Œç‰¹åˆ«é€‚åˆå¾®æœåŠ¡åœºæ™¯ä¸­åŠŸèƒ½æ˜ç¡®ã€ç»“æ„ç®€æ´çš„ç«¯ç‚¹ã€‚</p>
<p>æœ€è¿‘ä¸ºäº†å¸®åŠ©å¤§å®¶æ‰¾å·¥ä½œï¼Œä¸“é—¨å»ºäº†ä¸€äº›å·¥ä½œå†…æ¨ç¾¤ï¼Œå„å¤§åŸå¸‚éƒ½æœ‰ï¼Œæ¬¢è¿å„ä½HRå’Œæ‰¾å·¥ä½œçš„å°ä¼™ä¼´è¿›ç¾¤äº¤æµï¼Œç¾¤é‡Œç›®å‰å·²ç»æ”¶é›†äº†20å¤šå®¶å¤§å‚çš„å·¥ä½œå†…æ¨å²—ä½ã€‚åŠ è‹ä¸‰çš„å¾®ä¿¡ï¼šli_su223ï¼Œå¤‡æ³¨ï¼šæ˜é‡‘+æ‰€åœ¨åŸå¸‚ï¼Œå³å¯è¿›ç¾¤ã€‚</p>
<h2 data-id="heading-8">04 æ·±å…¥æ ¸å¿ƒï¼šWebFluxå¦‚ä½•è¿è½¬</h2>
<p>ç†è§£äº†è¡¨é¢ç”¨æ³•ï¼Œæˆ‘ä»¬ä»¥æ³¨è§£æ¨¡å‹ä¸ºä¾‹ï¼Œæ·±å…¥ä¸€å±‚ï¼Œçœ‹çœ‹ä¸€ä¸ªè¯·æ±‚åœ¨ WebFlux å†…éƒ¨æ˜¯å¦‚ä½•æµè½¬çš„ã€‚</p>
<p>WebFlux çš„æ ¸å¿ƒè°ƒåº¦å™¨ä¸å†æ˜¯ Servlet å®¹å™¨çš„çº¿ç¨‹æ± ï¼Œè€Œæ˜¯ä¸€ä¸ªåä¸º <code>DispatcherHandler</code> çš„ç»„ä»¶ï¼Œå®ƒæ‰®æ¼”ç€ç±»ä¼¼ Spring MVC ä¸­ <code>DispatcherServlet</code> çš„è§’è‰²ã€‚</p>
<ol>
<li><strong>è¯·æ±‚æ¥æ”¶</strong>ï¼š ä»¥ Netty ä¸ºä¾‹ï¼ŒI/O çº¿ç¨‹æ¥æ”¶åˆ° HTTP è¯·æ±‚ï¼Œå°†å…¶å°è£…ä¸º <code>ServerWebExchange</code>ï¼ˆä¸€ä¸ªéé˜»å¡çš„è¯·æ±‚-å“åº”äº¤æ¢å¯¹è±¡ï¼‰ã€‚</li>
<li><strong>å¯»æ‰¾å¤„ç†å™¨</strong>ï¼š <code>DispatcherHandler</code> è°ƒç”¨ä¸€ç»„ <code>HandlerMapping</code>ï¼Œæ ¹æ®è¯·æ±‚è·¯å¾„ç­‰ä¿¡æ¯ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•ï¼ˆå°±æ˜¯ä¸€ä¸ª <code>Handler</code>ï¼‰ã€‚</li>
<li><strong>æ‰§è¡Œå¤„ç†</strong>ï¼š <code>DispatcherHandler</code> å†é€šè¿‡ <code>HandlerAdapter</code> å»å®é™…æ‰§è¡Œè¿™ä¸ªæ§åˆ¶å™¨æ–¹æ³•ã€‚æˆ‘ä»¬çš„æ–¹æ³•è¿”å›ä¸€ä¸ª <code>Mono</code> æˆ– <code>Flux</code>ã€‚</li>
<li><strong>å¤„ç†ç»“æœ</strong>ï¼š <code>HandlerResultHandler</code> è´Ÿè´£å¤„ç†è¿™ä¸ªååº”å¼è¿”å›ç±»å‹ï¼Œå°†æµä¸­çš„æ•°æ®åºåˆ—åŒ–ï¼ˆå¦‚è½¬ä¸º JSONï¼‰ï¼Œå¹¶é€šè¿‡éé˜»å¡ I/O å†™å›å“åº”ã€‚</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<strong>æ‰€æœ‰ç¯èŠ‚éƒ½æ˜¯éé˜»å¡çš„</strong>ã€‚çº¿ç¨‹åªåœ¨æœ‰ CPU è®¡ç®—ä»»åŠ¡æ—¶æ‰å¿™ç¢Œï¼Œä¸€æ—¦é‡åˆ° I/O ç­‰å¾…ï¼Œå°±ä¼šå»å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œä»è€Œå®ç°æé«˜çš„èµ„æºåˆ©ç”¨ç‡ã€‚</p>
<p>ä¸‹é¢æ˜¯ WebFlux æ ¸å¿ƒç»„ä»¶ååŒå¤„ç†è¯·æ±‚çš„æ¶æ„å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/999baa7b71514b11b705d8981fd15709~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765856499&amp;x-signature=dwDZ8W7t5nyQ6VhZVjQESCP2TgU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">05 æ€§èƒ½ä¸é€‰æ‹©ï¼šå¹¶éé“¶å¼¹</h2>
<p>è¯»åˆ°è¿™é‡Œï¼Œæœ‰äº›å°ä¼™ä¼´å¯èƒ½æ‘©æ‹³æ“¦æŒï¼Œå‡†å¤‡æŠŠç°æœ‰é¡¹ç›®å…¨ç›˜è¿ç§»åˆ° WebFluxã€‚<strong>ä¸”æ…¢ï¼æŠ€æœ¯é€‰å‹æœ€å¿Œâ€œä¸ºäº†ç”¨è€Œç”¨â€</strong>ã€‚</p>
<p>WebFlux å’Œ Spring MVC ä¸æ˜¯æ›¿ä»£å…³ç³»ï¼Œè€Œæ˜¯äº’è¡¥å…³ç³»ï¼Œå®ƒä»¬å…±åŒæ‰©å±•äº† Spring ç”Ÿæ€çš„èƒ½åŠ›è¾¹ç•Œã€‚</p>
<h3 data-id="heading-10">æ€§èƒ½çœŸç›¸</h3>
<ul>
<li><strong>WebFlux çš„ä¼˜åŠ¿åœ¨äºé«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„ I/O å¯†é›†å‹åœºæ™¯</strong>ã€‚å½“ä½ çš„åº”ç”¨æœ‰å¤§é‡å¤–éƒ¨è°ƒç”¨ï¼ˆæ•°æ®åº“ã€å¾®æœåŠ¡ã€APIï¼‰ã€æ…¢è¿æ¥æˆ–é•¿è½®è¯¢ï¼ˆå¦‚èŠå¤©ï¼‰æ—¶ï¼ŒWebFlux èƒ½ç”¨æ›´å°‘çš„èµ„æºæä¾›æ›´ç¨³å®šçš„ååé‡ã€‚</li>
<li><strong>WebFlux ä¸ä¼šè®©ä½ çš„ CPU å¯†é›†å‹è®¡ç®—æ›´å¿«</strong>ã€‚å¦‚æœä¸šåŠ¡é€»è¾‘æœ¬èº«å°±æ˜¯å¤æ‚çš„è®¡ç®—ï¼Œæ²¡æœ‰å¤ªå¤š I/O ç­‰å¾…ï¼Œé‚£ä¹ˆåˆ‡æ¢åˆ° WebFlux å¯èƒ½çœ‹ä¸åˆ°æ”¶ç›Šï¼Œç”šè‡³å› ä¸ºå“åº”å¼é“¾çš„å¼€é”€è€Œç•¥æœ‰ä¸‹é™ã€‚</li>
<li><strong>èµ„æºåˆ©ç”¨ç‡æ˜¯æ ¸å¿ƒä¼˜åŠ¿</strong>ã€‚WebFlux é€šè¿‡å‡å°‘çº¿ç¨‹æ•°é‡ï¼Œé™ä½äº†å†…å­˜æ¶ˆè€—å’Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ï¼Œä½¿ç³»ç»Ÿåœ¨å‹åŠ›ä¸‹çš„è¡¨ç°æ›´åŠ å¯é¢„æµ‹å’Œç¨³å®šã€‚</li>
</ul>
<h3 data-id="heading-11">ä»£ä»·ä¸æŒ‘æˆ˜</h3>
<ul>
<li><strong>ç¼–ç¨‹èŒƒå¼è½¬æ¢</strong>ï¼š ä»â€œæŒ‡ä»¤å¼â€æ€ç»´åˆ‡æ¢åˆ°â€œå£°æ˜å¼â€ã€â€œå‡½æ•°å¼â€çš„ååº”å¼æ€ç»´æ˜¯ä¸€å¤§æŒ‘æˆ˜ã€‚è°ƒè¯•é“¾å¼è°ƒç”¨çš„ <code>Mono/Flux</code> ä¹Ÿæ¯”è°ƒè¯•æ™®é€šä»£ç æ›´å›°éš¾ã€‚</li>
<li><strong>ç”Ÿæ€å…¼å®¹æ€§</strong>ï¼š ä½ çš„æ•´ä¸ªæŠ€æœ¯æ ˆéƒ½éœ€è¦æ”¯æŒéé˜»å¡ã€‚<strong>è¿™æ„å‘³ç€ä½ å¸¸ç”¨çš„é˜»å¡å¼æ•°æ®åº“é©±åŠ¨ï¼ˆå¦‚ JDBCï¼‰ã€Redis å®¢æˆ·ç«¯ç­‰å¯èƒ½æ— æ³•ç›´æ¥ä½¿ç”¨</strong>ï¼Œå¿…é¡»å¯»æ‰¾å…¶ååº”å¼ç‰ˆæœ¬ï¼ˆå¦‚ R2DBCã€Lettuceï¼‰ã€‚è¿™æ˜¯ä¸€æ¡â€œå…¨æ ˆååº”å¼â€çš„ä¸å½’è·¯ã€‚</li>
<li><strong>å­¦ä¹ æ›²çº¿</strong>ï¼š å›¢é˜Ÿéœ€è¦æ—¶é—´å­¦ä¹  Reactor ä¸°å¯Œçš„æ“ä½œç¬¦ï¼ˆ<code>map</code>, <code>flatMap</code>, <code>zip</code> ç­‰ï¼‰å’Œé”™è¯¯å¤„ç†æœºåˆ¶ã€‚</li>
</ul>
<h3 data-id="heading-12">å¦‚ä½•é€‰æ‹©ï¼Ÿ</h3>
<p>ä½ å¯ä»¥éµå¾ªä»¥ä¸‹çš„å†³ç­–æµç¨‹ï¼Œæ¥åˆ¤æ–­ä½ çš„é¡¹ç›®æ˜¯å¦çœŸçš„éœ€è¦ WebFluxï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/015ef95dff174171918d00a929c206a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765856499&amp;x-signature=qn%2BeB3u21kXBa2mzSMZMaLDKsJE%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å¯¹äºæ–°é¡¹ç›®</strong>ï¼š å¦‚æœæ˜¯å¾®æœåŠ¡ç½‘å…³ï¼ˆSpring Cloud Gateway å°±æ˜¯åŸºäº WebFluxï¼‰ã€å®æ—¶ç›‘æ§ã€æ¶ˆæ¯æ¨é€ç­‰åœºæ™¯ï¼ŒWebFlux æ˜¯ç»ä½³é€‰æ‹©ã€‚</p>
<p><strong>å¯¹äºç°æœ‰é¡¹ç›®</strong>ï¼š <strong>ä¸è¦è½»æ˜“é‡æ„ï¼</strong> å¦‚æœ Spring MVC è¿è¡Œè‰¯å¥½ï¼Œé‡æ„çš„æˆæœ¬å’Œé£é™©æé«˜ã€‚</p>
<p>ä¸€ä¸ªæ›´åŠ¡å®çš„åˆ‡å…¥ç‚¹æ˜¯ï¼š<strong>å…ˆåœ¨ Spring MVC é¡¹ç›®ä¸­ä½¿ç”¨ <code>WebClient</code>ï¼ˆWebFlux æä¾›çš„éé˜»å¡ HTTP å®¢æˆ·ç«¯ï¼‰æ¥è°ƒç”¨å¤–éƒ¨æ…¢æœåŠ¡</strong>ï¼Œè¿™èƒ½ç«‹å³ä¸ºä½ çš„åº”ç”¨å¸¦æ¥éƒ¨åˆ†éé˜»å¡çš„ä¼˜åŠ¿ã€‚</p>
<hr/>
<h2 data-id="heading-13">06 æ€»ç»“</h2>
<p>WebFlux æ˜¯ Spring åº”å¯¹ç°ä»£é«˜å¹¶å‘ã€ä½å»¶è¿Ÿåº”ç”¨éœ€æ±‚äº¤å‡ºçš„ä¸€ä»½ä¼˜ç§€ç­”å·ã€‚</p>
<p>å®ƒé€šè¿‡å¼‚æ­¥éé˜»å¡å’Œå“åº”å¼æµçš„æŠ€æœ¯ï¼Œåœ¨ I/O å¯†é›†å‹é¢†åŸŸå±•ç°å‡ºå·¨å¤§ä¼˜åŠ¿ã€‚</p>
<p>ä½†å®ƒä¸æ˜¯ä¸€ä¸ªâ€œå‚»ç“œå¼â€çš„æ€§èƒ½æå‡æŒ‰é’®ï¼Œè€Œæ˜¯ä¸€å¥—å®Œæ•´çš„ã€æœ‰é—¨æ§›çš„æ–°ç¼–ç¨‹èŒƒå¼ã€‚</p>
<p>æˆ‘ä»¬çš„èŒè´£ä¸æ˜¯è¿½é€æœ€é…·çš„æŠ€æœ¯ï¼Œè€Œæ˜¯<strong>ä¸ºä¸šåŠ¡åœºæ™¯é€‰æ‹©æœ€åˆé€‚çš„æŠ€æœ¯</strong>ã€‚</p>
<p>åœ¨ä½ å†³å®šæ‹¥æŠ± WebFlux ä¹‹å‰ï¼Œä¸å¦¨å…ˆé—®è‡ªå·±ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>æˆ‘çš„åº”ç”¨ç“¶é¢ˆçœŸçš„æ˜¯ I/O å—ï¼Ÿ</li>
<li>æˆ‘çš„å›¢é˜Ÿå’ŒæŠ€æœ¯æ ˆå‡†å¤‡å¥½â€œå…¨æ ˆååº”å¼â€äº†å—ï¼Ÿ</li>
<li>é¢„æœŸçš„æ”¶ç›Šèƒ½å¦è¦†ç›–å­¦ä¹ å’Œæ”¹é€ æˆæœ¬ï¼Ÿ</li>
</ol>
<p>æƒ³æ¸…æ¥šè¿™äº›é—®é¢˜ï¼Œä½ çš„é€‰æ‹©è‡ªç„¶ä¼šæ¸…æ™°èµ·æ¥ã€‚</p>
<p>æŠ€æœ¯ä¸–ç•Œæ²¡æœ‰é“¶å¼¹ï¼Œ<strong>ç†è§£åŸç†ï¼Œæƒè¡¡åˆ©å¼Šï¼Œæ–¹æ˜¯é•¿æœŸä¸»ä¹‰è€…çš„ç”Ÿå­˜ä¹‹é“</strong>ã€‚</p>
<h2 data-id="heading-14">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 2 ç¯‡ï¼šè®© AI æˆä¸ºä½ çš„å‰ç«¯æ¶æ„å¸ˆ - UniApp + Vue3 é¡¹ç›®åˆå§‹åŒ–]]></title>    <link>https://juejin.cn/post/7581437632855015464</link>    <guid>https://juejin.cn/post/7581437632855015464</guid>    <pubDate>2025-12-09T06:40:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581437632855015464" data-draft-id="7581545175508598836" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 2 ç¯‡ï¼šè®© AI æˆä¸ºä½ çš„å‰ç«¯æ¶æ„å¸ˆ - UniApp + Vue3 é¡¹ç›®åˆå§‹åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-09T06:40:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HashTang"/> <meta itemprop="url" content="https://juejin.cn/user/1117561754756488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 2 ç¯‡ï¼šè®© AI æˆä¸ºä½ çš„å‰ç«¯æ¶æ„å¸ˆ - UniApp + Vue3 é¡¹ç›®åˆå§‹åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1117561754756488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HashTang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T06:40:54.000Z" title="Tue Dec 09 2025 06:40:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="vs2015">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-link,.hljs-literal,.hljs-name,.hljs-symbol{color:#569cd6}.hljs-link{text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-class,.hljs-number{color:#b8d7a3}.hljs-meta-string,.hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta-keyword,.hljs-tag{color:#9b9b9b}.hljs-template-variable,.hljs-variable{color:#bd63c5}.hljs-attr,.hljs-attribute,.hljs-builtin-name{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag{color:#d7ba7d}.hljs-addition{background-color:#144212}.hljs-addition,.hljs-deletion{display:inline-block;width:100%}.hljs-deletion{background-color:#600}</style><blockquote>
<p>ä¼ ç»Ÿæ–¹å¼æ­å»ºå‰ç«¯é¡¹ç›®ï¼šæŸ¥æ–‡æ¡£ã€è¯•é”™ã€è°ƒè¯•ï¼Œè€—æ—¶ 1 å¤©èµ·æ­¥ã€‚AI è¾…åŠ©ï¼šå¯¹è¯å¼é…ç½®ï¼Œ1 å°æ—¶æå®šã€‚è¿™æ˜¯ã€Š<a href="https://juejin.cn/column/7579556047783624756" target="_blank" title="https://juejin.cn/column/7579556047783624756">AI ç¼–ç¨‹å®æˆ˜ï¼šTRAE SOLO å…¨æ ˆå¼€å‘æŒ‡å—</a>ã€‹ä¸“æ çš„ç¬¬äºŒç¯‡æ–‡ç« ï¼Œå¸¦ä½ ç”¨ AI å¿«é€Ÿæ­å»ºä¸“ä¸šçº§å‰ç«¯é¡¹ç›®æ¶æ„ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€å¼€ç¯‡ï¼šä¸ºä»€ä¹ˆé¡¹ç›®åˆå§‹åŒ–è¿™ä¹ˆè®©äººå¤´ç–¼ï¼Ÿ</h2>
<p>è¿˜è®°å¾—ä¸Šä¸€ç¯‡æ–‡ç« é‡Œæåˆ°çš„å°ä½•å—ï¼Ÿä»–åœ¨"å¿ƒåŠ¨æ‹èŠ"é¡¹ç›®ä¸­é‡åˆ°çš„ç¬¬ä¸€ä¸ªæŒ‘æˆ˜ï¼Œå°±æ˜¯å‰ç«¯é¡¹ç›®åˆå§‹åŒ–ã€‚</p>
<h3 data-id="heading-1">1.1 ä¼ ç»Ÿæ–¹å¼çš„ç—›ç‚¹</h3>
<p>å¦‚æœä½ åšè¿‡å‰ç«¯é¡¹ç›®ï¼Œä¸€å®šæ·±æœ‰ä½“ä¼šï¼š</p>
<p><strong>æŠ€æœ¯é€‰å‹è¿·èŒ«</strong>ï¼š</p>
<pre><code class="hljs">UniApp vs Taro vs åŸç”Ÿï¼Ÿ
Vue3 è¿˜æ˜¯ Reactï¼Ÿ
Vite è¿˜æ˜¯ Webpackï¼Ÿ
UnoCSS è¿˜æ˜¯ Tailwind CSSï¼Ÿ
</code></pre>
<p>æ¯ä¸ªé€‰æ‹©èƒŒåéƒ½æ˜¯æ— æ•°çš„æ–‡æ¡£ã€åšå®¢ã€è¸©å‘è®°å½•ã€‚å…‰æ˜¯æŠ€æœ¯é€‰å‹ï¼Œå°±èƒ½è®©äººçº ç»“åŠå¤©ã€‚</p>
<p><strong>é…ç½®åœ°ç‹±</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">vite.config.ts
tsconfig.json
uno.config.ts
.eslintrc.js
.prettierrc
pages.json
manifest.json
...
</code></pre>
<p>æ¯ä¸€ä¸ªé…ç½®æ–‡ä»¶éƒ½æœ‰è‡ªå·±çš„è¯­æ³•ã€è§„åˆ™ã€å‘ç‚¹ã€‚é…ç½®å®Œä¸€ä¸ªï¼Œè¿˜æœ‰ä¸‹ä¸€ä¸ªåœ¨ç­‰ç€ä½ ã€‚</p>
<p><strong>æ—¶é—´é»‘æ´</strong>ï¼š</p>
<p>å°ä½•æœ€åˆçš„ä¼°ç®—ï¼š</p>

















































<table><thead><tr><th>ä»»åŠ¡</th><th>é¢„è®¡æ—¶é—´</th></tr></thead><tbody><tr><td>æŠ€æœ¯è°ƒç ”</td><td>2 å°æ—¶</td></tr><tr><td>é¡¹ç›®åˆ›å»º</td><td>0.5 å°æ—¶</td></tr><tr><td>Vite é…ç½®</td><td>1 å°æ—¶</td></tr><tr><td>TypeScript é…ç½®</td><td>1 å°æ—¶</td></tr><tr><td>UI æ¡†æ¶é›†æˆ</td><td>2 å°æ—¶</td></tr><tr><td>è‡ªåŠ¨å¯¼å…¥é…ç½®</td><td>1 å°æ—¶</td></tr><tr><td>è·¯ç”±é…ç½®</td><td>1 å°æ—¶</td></tr><tr><td>ç¯å¢ƒå˜é‡é…ç½®</td><td>0.5 å°æ—¶</td></tr><tr><td>ä»£ç è§„èŒƒé…ç½®</td><td>2 å°æ—¶</td></tr><tr><td><strong>æ€»è®¡</strong></td><td><strong>11 å°æ—¶</strong></td></tr></tbody></table>
<p>å®é™…ä¸Šï¼Œå› ä¸ºå„ç§é—®é¢˜ã€ç‰ˆæœ¬å†²çªã€é…ç½®ä¸å…¼å®¹ï¼Œå¾€å¾€éœ€è¦ <strong>1.5-2 å¤©</strong>ã€‚</p>
<h3 data-id="heading-2">1.2 AI è¾…åŠ©çš„é©å‘½æ€§å˜åŒ–</h3>
<p>æœ‰äº† TRAE SOLOï¼Œä¸€åˆ‡éƒ½ä¸åŒäº†ã€‚</p>
<p><strong>å°ä½•çš„å®é™…ä½“éªŒ</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">å°ä½•ï¼šå¸®æˆ‘åˆ›å»ºä¸€ä¸ª UniApp + Vue3 + TypeScript é¡¹ç›®ï¼Œ
      ä½¿ç”¨ Vite æ„å»ºï¼Œæ”¯æŒå¾®ä¿¡å°ç¨‹åºã€H5ã€App ä¸‰ç«¯ï¼Œ
      é›†æˆ UnoCSS å’Œ UView Pro ç»„ä»¶åº“

AIï¼šå¥½çš„ï¼Œæˆ‘æ¥å¸®ä½ æ­å»ºå®Œæ•´çš„é¡¹ç›®æ¶æ„ï¼š

    âœ“ åˆ†æéœ€æ±‚ï¼Œç¡®å®šæŠ€æœ¯é€‰å‹
    âœ“ åˆ›å»º Monorepo é¡¹ç›®ç»“æ„
    âœ“ é…ç½® Vite æ„å»ºå·¥å…·
    âœ“ é›†æˆ TypeScript ä¸¥æ ¼æ¨¡å¼
    âœ“ é…ç½® UnoCSS åŸå­åŒ– CSS
    âœ“ é›†æˆ UView Pro ç»„ä»¶åº“
    âœ“ è®¾ç½®è‡ªåŠ¨å¯¼å…¥
    âœ“ é…ç½®å¤šç¯å¢ƒå˜é‡
    âœ“ æ·»åŠ ä»£ç è§„èŒƒå·¥å…·

    é¡¹ç›®ç»“æ„å·²ç”Ÿæˆï¼Œè¯·æŸ¥çœ‹...
</code></pre>
<p><strong>ä¸€å¤©çš„å·¥ä½œï¼Œä¸åˆ°ä¸€å°æ—¶å®Œæˆã€‚</strong> è¿™å°±æ˜¯ AI è¾…åŠ©å¼€å‘çš„é­”åŠ›ã€‚</p>
<h2 data-id="heading-3">äºŒã€æŠ€æœ¯é€‰å‹ï¼šè®© AI å¸®ä½ åšå†³ç­–</h2>
<h3 data-id="heading-4">2.1 æ¡†æ¶å¯¹æ¯”åˆ†æ</h3>
<p>é¡¹ç›®å¼€å§‹å‰ï¼Œå°ä½•éœ€è¦ç¡®å®šæŠ€æœ¯é€‰å‹ã€‚ä¼ ç»Ÿåšæ³•æ˜¯æœç´¢å„ç§åšå®¢æ–‡ç« ã€æŠ€æœ¯å¯¹æ¯”ï¼Œç„¶åçº ç»“åŠå¤©ã€‚</p>
<p><strong>TRAE SOLO çš„åšæ³•</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">å°ä½•ï¼šå¸®æˆ‘å¯¹æ¯” UniAppã€Taroã€åŸç”Ÿå°ç¨‹åºçš„ä¼˜åŠ£ï¼Œ
      é¡¹ç›®éœ€æ±‚ï¼šç¤¾äº¤ç±»å°ç¨‹åºï¼Œéœ€è¦æ”¯æŒå¾®ä¿¡å°ç¨‹åºã€H5ã€App ä¸‰ç«¯

AIï¼šï¼ˆé€šè¿‡ MCP å®æ—¶æŸ¥é˜…æœ€æ–°æ–‡æ¡£ï¼‰

      åˆ†æç»“è®ºï¼š

      1. UniApp ä¼˜åŠ¿ï¼š
         - ä¸€å¥—ä»£ç ï¼Œæ”¯æŒå¾®ä¿¡/H5/App/é¸¿è’™ç­‰å¤šç«¯
         - Vue3 æŠ€æœ¯æ ˆï¼Œå­¦ä¹ æˆæœ¬ä½
         - ç”Ÿæ€å®Œå–„ï¼Œç»„ä»¶åº“ä¸°å¯Œ
         - æ–‡æ¡£å®Œå–„ï¼Œç¤¾åŒºæ´»è·ƒ

      2. Taro ä¼˜åŠ¿ï¼š
         - React æŠ€æœ¯æ ˆå‹å¥½
         - é€‚åˆå·²æœ‰ React ç»éªŒçš„å›¢é˜Ÿ

      3. åŸç”Ÿå°ç¨‹åºï¼š
         - æ€§èƒ½æœ€ä¼˜
         - ä½†åªèƒ½åœ¨å•ä¸€å¹³å°è¿è¡Œ

      æ¨èï¼šUniApp + Vue3

      ç†ç”±ï¼š
      1. é¡¹ç›®éœ€è¦ä¸‰ç«¯å‘å¸ƒï¼ŒUniApp è·¨ç«¯èƒ½åŠ›æœ€å¼º
      2. ç¤¾äº¤ç±»åº”ç”¨è¿­ä»£å¿«ï¼ŒUniApp å¼€å‘æ•ˆç‡é«˜
      3. åç»­è¿˜è¦æ‰©å±•åˆ°é¸¿è’™ã€å®‰å“ã€iOSï¼ŒUniApp æ”¯æŒæœ€å…¨
</code></pre>
<p><strong>5 åˆ†é’Ÿï¼Œå¾—åˆ°äº†ä¸“ä¸šçº§çš„æŠ€æœ¯é€‰å‹åˆ†ææŠ¥å‘Šã€‚</strong></p>
<h3 data-id="heading-5">2.2 æ„å»ºå·¥å…·é€‰æ‹©</h3>
<pre><code class="hljs language-txt" lang="txt">å°ä½•ï¼šUniApp åº”è¯¥ç”¨ Vite è¿˜æ˜¯ Webpackï¼Ÿ

AIï¼šå¼ºçƒˆæ¨è Viteï¼

      å¯¹æ¯”åˆ†æï¼š
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   ç»´åº¦     â”‚     Vite       â”‚    Webpack     â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚ å†·å¯åŠ¨     â”‚ æ¯«ç§’çº§         â”‚ ç§’çº§           â”‚
      â”‚ çƒ­æ›´æ–°     â”‚ å³æ—¶           â”‚ æœ‰å»¶è¿Ÿ         â”‚
      â”‚ é…ç½®å¤æ‚åº¦ â”‚ ç®€å•           â”‚ å¤æ‚           â”‚
      â”‚ ç”Ÿæ€æ”¯æŒ   â”‚ å®Œå–„           â”‚ éå¸¸å®Œå–„       â”‚
      â”‚ æ„å»ºé€Ÿåº¦   â”‚ å¿«             â”‚ è¾ƒæ…¢           â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

      å®æµ‹æ•°æ®ï¼ˆå¿ƒåŠ¨æ‹èŠé¡¹ç›®ï¼‰ï¼š
      - Vite å†·å¯åŠ¨ï¼š1.2 ç§’
      - Webpack å†·å¯åŠ¨ï¼š8.5 ç§’

      ç»“è®ºï¼šVite å¼€å‘ä½“éªŒå®Œèƒœï¼Œé€‰å®ƒï¼
</code></pre>
<h3 data-id="heading-6">2.3 æœ€ç»ˆæŠ€æœ¯æ ˆç¡®å®š</h3>
<p>é€šè¿‡ AI è¾…åŠ©åˆ†æï¼Œ"å¿ƒåŠ¨æ‹èŠ"é¡¹ç›®ç¡®å®šäº†ä»¥ä¸‹æŠ€æœ¯æ ˆï¼š</p>
<pre><code class="hljs language-txt" lang="txt">å‰ç«¯æŠ€æœ¯æ ˆï¼š
â”œâ”€â”€ æ¡†æ¶ï¼šUniApp + Vue 3.4.21
â”œâ”€â”€ æ„å»ºå·¥å…·ï¼šVite 5.2.8
â”œâ”€â”€ è¯­è¨€ï¼šTypeScript 5.7
â”œâ”€â”€ çŠ¶æ€ç®¡ç†ï¼šPinia 2.0.36 + æŒä¹…åŒ–
â”œâ”€â”€ åŸå­åŒ– CSSï¼šUnoCSS 66.0
â”œâ”€â”€ UI ç»„ä»¶åº“ï¼šUView Pro
â”œâ”€â”€ HTTP è¯·æ±‚ï¼šè‡ªå®šä¹‰å°è£…ï¼ˆåŸºäº uni.requestï¼‰
â”œâ”€â”€ åˆ—è¡¨ä¼˜åŒ–ï¼šz-paging 2.8.7
â””â”€â”€ æ•°æ®è¯·æ±‚ï¼š@tanstack/vue-query
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€é¡¹ç›®åˆå§‹åŒ–ï¼šAI ä¸€é”®ç”Ÿæˆ</h2>
<h3 data-id="heading-8">3.1 Monorepo é¡¹ç›®ç»“æ„</h3>
<p>"å¿ƒåŠ¨æ‹èŠ"é‡‡ç”¨ Monorepo æ¶æ„ï¼Œè¿™æ˜¯ç°ä»£å‰ç«¯é¡¹ç›®çš„æœ€ä½³å®è·µã€‚</p>
<p><strong>æç¤ºè¯</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">å¸®æˆ‘åˆ›å»ºä¸€ä¸ª Monorepo é¡¹ç›®ç»“æ„ï¼ŒåŒ…å«ï¼š
1. apps/unibest-mp - UniApp å°ç¨‹åºç«¯
2. apps/xindong-server - Next.js æœåŠ¡ç«¯
3. packages/shared-types - å…±äº«ç±»å‹å®šä¹‰
ä½¿ç”¨ pnpm ç®¡ç†ä¾èµ–ï¼ŒTurborepo ç¼–æ’ä»»åŠ¡
</code></pre>
<p><strong>AI ç”Ÿæˆçš„é¡¹ç›®ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">xingdong/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ unibest-mp/              # UniApp å¤šç«¯åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ api/             # API æ¥å£å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ components/      # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ composables/     # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/           # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ http/            # HTTP è¯·æ±‚å°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ layouts/         # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/           # é¡µé¢æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ store/           # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ subPackages/     # åˆ†åŒ…é¡µé¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ agreement/   # åè®®ç›¸å…³
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ vip/         # ä¼šå‘˜ç›¸å…³
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ planForm/    # è®¡åˆ’è¡¨å•
â”‚   â”‚   â”‚   â”œâ”€â”€ tabbar/          # åº•éƒ¨å¯¼èˆª
â”‚   â”‚   â”‚   â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ env/                 # ç¯å¢ƒå˜é‡
â”‚   â”‚   â”œâ”€â”€ vite.config.ts       # Vite é…ç½®
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ xingdong-server/         # Next.js æœåŠ¡ç«¯
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â””â”€â”€ app/             # App Router
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ shared-types/            # å…±äº«ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â””â”€â”€ index.ts
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ pnpm-workspace.yaml          # pnpm å·¥ä½œåŒºé…ç½®
â”œâ”€â”€ turbo.json                   # Turborepo é…ç½®
â””â”€â”€ package.json                 # æ ¹é…ç½®
</code></pre>
<p><strong>pnpm-workspace.yaml</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">packages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">apps/*</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">packages/*</span>
</code></pre>
<p><strong>turbo.json</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"$schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://turbo.build/schema.json"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"tasks"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"dependsOn"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"^build"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"outputs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"apps/unibest-mp/dist/**"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"apps/xingdong-server/.next/**"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"cache"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"persistent"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ä¸ªç»“æ„çš„å¥½å¤„ï¼š</p>
<ol>
<li><strong>ä»£ç å¤ç”¨</strong>ï¼šshared-types åŒ…è®©å‰åç«¯ç±»å‹ä¸€è‡´</li>
<li><strong>ç‹¬ç«‹å¼€å‘</strong>ï¼šå‰åç«¯å¯ä»¥ç‹¬ç«‹å¯åŠ¨ã€ç‹¬ç«‹éƒ¨ç½²</li>
<li><strong>å¹¶è¡Œæ„å»º</strong>ï¼šTurborepo è‡ªåŠ¨å¹¶è¡Œæ‰§è¡Œä¸ç›¸å…³çš„ä»»åŠ¡</li>
</ol>
<h3 data-id="heading-9">3.2 é…ç½® Vite</h3>
<p>Vite é…ç½®æ˜¯å‰ç«¯é¡¹ç›®çš„æ ¸å¿ƒã€‚è®©æˆ‘ä»¬çœ‹çœ‹ AI ç”Ÿæˆçš„å®é™…é…ç½®ï¼š</p>
<p><strong>æç¤ºè¯</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">å¸®æˆ‘é…ç½® UniApp çš„ Vite é…ç½®æ–‡ä»¶ï¼Œéœ€è¦ï¼š
1. è‡ªåŠ¨å¯¼å…¥ Vue API
2. è‡ªåŠ¨å¯¼å…¥ uni-app API
3. è‡ªåŠ¨å¯¼å…¥è‡ªå®šä¹‰ hooks
4. é…ç½®è·¯å¾„åˆ«å
5. æ”¯æŒå¤šç¯å¢ƒå˜é‡
6. é›†æˆ UnoCSS
7. é…ç½®åˆ†åŒ…ä¼˜åŒ–
</code></pre>
<p><strong>ç”Ÿæˆçš„ vite.config.tsï¼ˆå®é™…é¡¹ç›®é…ç½®ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts æ ¸å¿ƒé…ç½®ç‰‡æ®µ</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ({ command, mode }) =&gt; {
  <span class="hljs-comment">// ... ç¯å¢ƒå˜é‡åŠ è½½é€»è¾‘ ...</span>

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">defineConfig</span>({
    <span class="hljs-attr">plugins</span>: [
      <span class="hljs-comment">// 1. é¡µé¢è·¯ç”±è‡ªåŠ¨ç”Ÿæˆ</span>
      <span class="hljs-title class_">UniPages</span>({
        <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'**/components/**/**.*'</span>],
        <span class="hljs-attr">subPackages</span>: [
          <span class="hljs-string">'src/subPackages/agreement'</span>,
          <span class="hljs-string">'src/subPackages/vip'</span>,
          <span class="hljs-string">'src/subPackages/planForm'</span>,
        ],
      }),

      <span class="hljs-comment">// 2. å¸ƒå±€ç³»ç»Ÿ &amp; å¹³å°é€‚é…</span>
      <span class="hljs-title class_">UniLayouts</span>(),
      <span class="hljs-title class_">UniPlatform</span>(),
      <span class="hljs-title class_">UniManifest</span>(),

      <span class="hljs-comment">// 3. ä¿®å¤ Vue ç¼–è¯‘é—®é¢˜ï¼ˆAI è‡ªåŠ¨ç”Ÿæˆçš„è¡¥ä¸ï¼‰</span>
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'fix-vite-plugin-vue'</span>,
        <span class="hljs-title function_">configResolved</span>(<span class="hljs-params">config</span>) {
          <span class="hljs-keyword">const</span> plugin = config.<span class="hljs-property">plugins</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> p.<span class="hljs-property">name</span> === <span class="hljs-string">'vite:vue'</span>);
          <span class="hljs-keyword">if</span> (plugin &amp;&amp; plugin.<span class="hljs-property">api</span> &amp;&amp; plugin.<span class="hljs-property">api</span>.<span class="hljs-property">options</span>) {
            plugin.<span class="hljs-property">api</span>.<span class="hljs-property">options</span>.<span class="hljs-property">devToolsEnabled</span> = <span class="hljs-literal">false</span>;
          }
        },
      },

      <span class="hljs-comment">// 4. UnoCSS åŸå­åŒ– CSS</span>
      <span class="hljs-title class_">UnoCSS</span>(),

      <span class="hljs-comment">// 5. è‡ªåŠ¨å¯¼å…¥</span>
      <span class="hljs-title class_">AutoImport</span>({
        <span class="hljs-attr">imports</span>: [<span class="hljs-string">'vue'</span>, <span class="hljs-string">'uni-app'</span>],
        <span class="hljs-attr">dirs</span>: [<span class="hljs-string">'src/hooks'</span>],
        <span class="hljs-attr">vueTemplate</span>: <span class="hljs-literal">true</span>,
      }),

      <span class="hljs-comment">// ... å…¶ä»–æ’ä»¶</span>
      <span class="hljs-title class_">Uni</span>(),
    ],
    <span class="hljs-comment">// ...</span>
  });
};
</code></pre>
<p><strong>è¿™ä¸ªé…ç½®åŒ…å«äº†</strong>ï¼š</p>
<ol>
<li><strong>@uni-helper æ’ä»¶ç”Ÿæ€</strong>ï¼šé¡µé¢è·¯ç”±ã€å¸ƒå±€ã€å¹³å°ã€manifest å…¨è‡ªåŠ¨åŒ–</li>
<li><strong>UnoCSS</strong>ï¼šåŸå­åŒ– CSSï¼Œå¼€å‘æ•ˆç‡ç¿»å€</li>
<li><strong>AutoImport</strong>ï¼šVue APIã€uni-app APIã€è‡ªå®šä¹‰ hooks è‡ªåŠ¨å¯¼å…¥</li>
<li><strong>Hack ä¿®å¤</strong>ï¼šAI ç”šè‡³å¸®æˆ‘ç”Ÿæˆäº†ä¸€ä¸ª <code>fix-vite-plugin-vue</code> æ’ä»¶æ¥è§£å†³ç‰¹å®šçš„ç¼–è¯‘ Bugï¼Œè¿™åœ¨ä¼ ç»Ÿå¼€å‘ä¸­å¯èƒ½è¦æ’æŸ¥åŠå¤©ã€‚</li>
</ol>
<h3 data-id="heading-10">3.3 TypeScript é…ç½®</h3>
<p><strong>æç¤ºè¯</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">å¸®æˆ‘é…ç½® TypeScript ä¸¥æ ¼æ¨¡å¼ï¼Œç¡®ä¿ç±»å‹å®‰å…¨ï¼Œæ”¯æŒ Vue3 å’Œ uni-app
</code></pre>
<p><strong>ç”Ÿæˆçš„é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"extends"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@vue/tsconfig/tsconfig.dom.json"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"strict"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"noImplicitAny"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"strictNullChecks"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"moduleResolution"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bundler"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"jsx"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"preserve"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"jsxImportSource"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vue"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"@/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"./src/*"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"@img/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"./src/static/images/*"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"@dcloudio/types"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"@uni-helper/uni-types"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"miniprogram-api-typings"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/**/*.ts"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"src/**/*.vue"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exclude"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"node_modules"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"dist"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-11">å››ã€UI æ¡†æ¶é›†æˆï¼šUnoCSS + UView Pro</h2>
<h3 data-id="heading-12">4.1 UnoCSS é…ç½®ï¼šAI ä¹Ÿä¼š"ç¿»è½¦"</h3>
<p>UnoCSS æ˜¯åŸå­åŒ– CSS çš„æœ€ä½³é€‰æ‹©ï¼Œä½†åœ¨å°ç¨‹åºç¯å¢ƒä¸­ä½¿ç”¨æ—¶ï¼ŒAI ä¸€å¼€å§‹ç»™å‡ºçš„é…ç½®å¹¶ä¸å®Œç¾ã€‚</p>
<p><strong>ç¬¬ä¸€æ¬¡å°è¯•</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">å°ä½•ï¼šé…ç½® UnoCSS
AIï¼šç”Ÿæˆäº†æ ‡å‡†çš„ Web ç«¯é…ç½®ï¼ˆpresetUnoï¼‰ã€‚
ç»“æœï¼šå°ç¨‹åºç«¯æ ·å¼å®Œå…¨ä¸ç”Ÿæ•ˆã€‚
</code></pre>
<p><strong>ä¿®æ­£åçš„äº¤äº’</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">å°ä½•ï¼šè¿™ä¸ªé…ç½®åœ¨å¾®ä¿¡å°ç¨‹åºé‡Œä¸ç”Ÿæ•ˆï¼Œè¯·æ£€æŸ¥æ˜¯å¦éœ€è¦ä¸“ç”¨é¢„è®¾ï¼Ÿ

AIï¼šæŠ±æ­‰ï¼Œä½ æ˜¯å¯¹çš„ã€‚åœ¨ UniApp ä¸­éœ€è¦ä½¿ç”¨ `@uni-helper/unocss-preset-uni`ã€‚
    æˆ‘å·²æ›´æ–°é…ç½®ï¼š
</code></pre>
<p><strong>æœ€ç»ˆç”Ÿæˆçš„ uno.config.ts</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineConfig, presetIcons } <span class="hljs-keyword">from</span> <span class="hljs-string">'unocss'</span>;
<span class="hljs-keyword">import</span> { presetUni } <span class="hljs-keyword">from</span> <span class="hljs-string">'@uni-helper/unocss-preset-uni'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">presets</span>: [
    <span class="hljs-comment">// ä½¿ç”¨ UniApp ä¸“ç”¨é¢„è®¾ï¼Œè§£å†³å°ç¨‹åºå…¼å®¹æ€§é—®é¢˜</span>
    <span class="hljs-title function_">presetUni</span>({
      <span class="hljs-attr">attributify</span>: {
        <span class="hljs-attr">prefixedOnly</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// é¿å…å±æ€§å†²çª</span>
      },
    }),
    <span class="hljs-title function_">presetIcons</span>({
      <span class="hljs-attr">scale</span>: <span class="hljs-number">1.2</span>,
      <span class="hljs-attr">warn</span>: <span class="hljs-literal">true</span>,
    }),
  ],
  <span class="hljs-attr">theme</span>: {
    <span class="hljs-attr">colors</span>: {
      <span class="hljs-comment">// ä½¿ç”¨ CSS å˜é‡ï¼Œæ”¯æŒåŠ¨æ€æ¢è‚¤</span>
      <span class="hljs-attr">primary</span>: <span class="hljs-string">'var(--wot-color-theme,#0957DE)'</span>,
    },
  },
});
</code></pre>
<p>è¿™é‡Œçš„é‡ç‚¹æ˜¯ <strong><code>presetUni</code></strong> å’Œ <strong><code>prefixedOnly</code></strong>ï¼Œè¿™æ˜¯ AI åœ¨è¢«æŒ‡å‡ºé”™è¯¯åè¿…é€Ÿä¿®æ­£çš„å…³é”®ç‚¹ã€‚</p>
<p><strong>UnoCSS çš„ä¼˜åŠ¿</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- ä¼ ç»Ÿ CSS å†™æ³• --&gt;
&lt;template&gt;
  &lt;view class="container"&gt;
    &lt;text class="title"&gt;å¿ƒåŠ¨æ‹èŠ&lt;/text&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.container {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 16px;
}
.title {
  font-size: 24px;
  font-weight: bold;
  color: #ff6b9d;
}
&lt;/style&gt;

&lt;!-- UnoCSS å†™æ³• --&gt;
&lt;template&gt;
  &lt;view class="flex-center p-4"&gt;
    &lt;text class="text-24px font-bold text-primary"&gt;å¿ƒåŠ¨æ‹èŠ&lt;/text&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre>
<p><strong>ä»£ç é‡å‡å°‘ 70%ï¼Œå¼€å‘æ•ˆç‡å¤§å¹…æå‡ï¼</strong></p>
<h3 data-id="heading-13">4.2 UView Pro é›†æˆ</h3>
<p>UView Pro æ˜¯ UniApp æœ€å¥½ç”¨çš„ç»„ä»¶åº“ä¹‹ä¸€ã€‚</p>
<p><strong>æç¤ºè¯</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">å¸®æˆ‘é›†æˆ UView Pro ç»„ä»¶åº“ï¼Œé…ç½®æŒ‰éœ€å¯¼å…¥å’Œä¸»é¢˜å®šåˆ¶
</code></pre>
<p><strong>package.json ä¾èµ–</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"uview-pro"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^0.0.3"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;view class="page"&gt;
    &lt;!-- å¯¼èˆªæ  --&gt;
    &lt;u-navbar title="å¿ƒåŠ¨æ‹èŠ" :placeholder="true" /&gt;

    &lt;!-- è¡¨å• --&gt;
    &lt;u-form ref="formRef" :model="formData" :rules="rules"&gt;
      &lt;u-form-item label="æ˜µç§°" prop="nickname"&gt;
        &lt;u-input v-model="formData.nickname" placeholder="è¯·è¾“å…¥æ˜µç§°" /&gt;
      &lt;/u-form-item&gt;
      &lt;u-form-item label="æ€§åˆ«" prop="gender"&gt;
        &lt;u-radio-group v-model="formData.gender"&gt;
          &lt;u-radio label="ç”·" :name="1" /&gt;
          &lt;u-radio label="å¥³" :name="2" /&gt;
        &lt;/u-radio-group&gt;
      &lt;/u-form-item&gt;
    &lt;/u-form&gt;

    &lt;!-- æŒ‰é’® --&gt;
    &lt;u-button type="primary" @click="handleSubmit"&gt;æäº¤&lt;/u-button&gt;

    &lt;!-- å¼¹çª— --&gt;
    &lt;u-popup v-model:show="showPopup" mode="bottom"&gt;
      &lt;view class="p-4"&gt;å¼¹çª—å†…å®¹&lt;/view&gt;
    &lt;/u-popup&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
const formRef = ref();
const showPopup = ref(false);

const formData = reactive({
  nickname: '',
  gender: 1,
});

const rules = {
  nickname: [{ required: true, message: 'è¯·è¾“å…¥æ˜µç§°' }],
  gender: [{ required: true, message: 'è¯·é€‰æ‹©æ€§åˆ«' }],
};

const handleSubmit = async () =&gt; {
  const valid = await formRef.value.validate();
  if (valid) {
    // æäº¤é€»è¾‘
  }
};
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-14">äº”ã€è‡ªåŠ¨å¯¼å…¥é…ç½®ï¼šæå‡å¼€å‘ä½“éªŒ</h2>
<h3 data-id="heading-15">5.1 Vue API è‡ªåŠ¨å¯¼å…¥</h3>
<p>ä¼ ç»Ÿå†™æ³•æ¯ä¸ªæ–‡ä»¶éƒ½è¦å¯¼å…¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¼ ç»Ÿå†™æ³•</span>
<span class="hljs-keyword">import</span> { ref, reactive, computed, watch, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">''</span> });
</code></pre>
<p>é…ç½®è‡ªåŠ¨å¯¼å…¥åï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è‡ªåŠ¨å¯¼å…¥åï¼Œç›´æ¥ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">''</span> });
<span class="hljs-keyword">const</span> double = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>);

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'mounted'</span>);
});
</code></pre>
<p><strong>AutoImport é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">AutoImport</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-string">'vue'</span>, <span class="hljs-string">'uni-app'</span>],
  <span class="hljs-attr">dts</span>: <span class="hljs-string">'src/types/auto-import.d.ts'</span>,
  <span class="hljs-attr">dirs</span>: [<span class="hljs-string">'src/hooks'</span>],
  <span class="hljs-attr">vueTemplate</span>: <span class="hljs-literal">true</span>,
});
</code></pre>
<p>è¿™ä¼šè‡ªåŠ¨ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶ <code>src/types/auto-import.d.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Auto generated by unplugin-auto-import</span>
<span class="hljs-keyword">export</span> {};
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">computed</span>: (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'vue'</span>))[<span class="hljs-string">'computed'</span>];
  <span class="hljs-keyword">const</span> <span class="hljs-attr">onMounted</span>: (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'vue'</span>))[<span class="hljs-string">'onMounted'</span>];
  <span class="hljs-keyword">const</span> <span class="hljs-attr">onUnmounted</span>: (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'vue'</span>))[<span class="hljs-string">'onUnmounted'</span>];
  <span class="hljs-keyword">const</span> <span class="hljs-attr">reactive</span>: (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'vue'</span>))[<span class="hljs-string">'reactive'</span>];
  <span class="hljs-keyword">const</span> <span class="hljs-attr">ref</span>: (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'vue'</span>))[<span class="hljs-string">'ref'</span>];
  <span class="hljs-keyword">const</span> <span class="hljs-attr">watch</span>: (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'vue'</span>))[<span class="hljs-string">'watch'</span>];
  <span class="hljs-comment">// uni-app APIs</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">onLaunch</span>: (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'uni-app'</span>))[<span class="hljs-string">'onLaunch'</span>];
  <span class="hljs-keyword">const</span> <span class="hljs-attr">onShow</span>: (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'uni-app'</span>))[<span class="hljs-string">'onShow'</span>];
  <span class="hljs-keyword">const</span> <span class="hljs-attr">onHide</span>: (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'uni-app'</span>))[<span class="hljs-string">'onHide'</span>];
  <span class="hljs-comment">// ... æ›´å¤š</span>
}
</code></pre>
<h3 data-id="heading-16">5.2 è‡ªå®šä¹‰ Hooks è‡ªåŠ¨å¯¼å…¥</h3>
<p>åœ¨ <code>src/hooks/</code> ç›®å½•ä¸‹åˆ›å»ºçš„ hooks ä¹Ÿä¼šè‡ªåŠ¨å¯¼å…¥ï¼š</p>
<p><strong>src/hooks/useRequest.ts</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Ref</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UseRequestOptions</span>&lt;T&gt; {
  immediate?: <span class="hljs-built_in">boolean</span>;
  onSuccess?: <span class="hljs-function">(<span class="hljs-params">data: T</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  onError?: <span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useRequest&lt;T&gt;(<span class="hljs-attr">fn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;, <span class="hljs-attr">options</span>: <span class="hljs-title class_">UseRequestOptions</span>&lt;T&gt; = {}) {
  <span class="hljs-keyword">const</span> { immediate = <span class="hljs-literal">false</span>, onSuccess, onError } = options;

  <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">Ref</span>&lt;T | <span class="hljs-literal">null</span>&gt; = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> error = ref&lt;<span class="hljs-title class_">Error</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">execute</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
    error.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">try</span> {
      data.<span class="hljs-property">value</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fn</span>();
      onSuccess?.(data.<span class="hljs-property">value</span>);
    } <span class="hljs-keyword">catch</span> (e) {
      error.<span class="hljs-property">value</span> = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>;
      onError?.(error.<span class="hljs-property">value</span>);
    } <span class="hljs-keyword">finally</span> {
      loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    }
  };

  <span class="hljs-keyword">if</span> (immediate) {
    <span class="hljs-title function_">execute</span>();
  }

  <span class="hljs-keyword">return</span> { data, loading, error, execute };
}
</code></pre>
<p><strong>ä½¿ç”¨æ—¶æ— éœ€å¯¼å…¥</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
// ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€ import
const { data, loading, execute } = useRequest(() =&gt; apiGetUserInfo(), { immediate: true });
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-17">5.3 ç»„ä»¶è‡ªåŠ¨æ³¨å†Œ</h3>
<p>é…ç½® <code>@uni-helper/vite-plugin-uni-components</code> åï¼Œç»„ä»¶ä¹Ÿè‡ªåŠ¨æ³¨å†Œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Components</span>({
  <span class="hljs-attr">extensions</span>: [<span class="hljs-string">'vue'</span>],
  <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">directoryAsNamespace</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">dts</span>: <span class="hljs-string">'src/types/components.d.ts'</span>,
});
</code></pre>
<p><strong>src/components/UserCard.vue</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;view class="user-card"&gt;
    &lt;image :src="user.avatar" class="avatar" /&gt;
    &lt;text class="name"&gt;{{ user.name }}&lt;/text&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
defineProps&lt;{
  user: {
    avatar: string;
    name: string;
  };
}&gt;();
&lt;/script&gt;
</code></pre>
<p><strong>ä½¿ç”¨æ—¶æ— éœ€æ³¨å†Œ</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€ import å’Œ components æ³¨å†Œ --&gt;
  &lt;UserCard :user="userInfo" /&gt;
&lt;/template&gt;
</code></pre>
<h2 data-id="heading-18">å…­ã€è·¯ç”±é…ç½®ï¼špages.json ä¼˜åŒ–</h2>
<h3 data-id="heading-19">6.1 é¡µé¢è·¯ç”±è‡ªåŠ¨ç”Ÿæˆ</h3>
<p>ä½¿ç”¨ <code>@uni-helper/vite-plugin-uni-pages</code>ï¼Œé¡µé¢è·¯ç”±å¯ä»¥è‡ªåŠ¨ç”Ÿæˆã€‚</p>
<p><strong>åœ¨é¡µé¢æ–‡ä»¶ä¸­é…ç½®è·¯ç”±</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/pages/index/index.vue --&gt;
&lt;route lang="json"&gt;
{
  "style": {
    "navigationBarTitleText": "é¦–é¡µ"
  }
}
&lt;/route&gt;

&lt;template&gt;
  &lt;view class="page"&gt;
    &lt;!-- é¡µé¢å†…å®¹ --&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre>
<p><strong>è‡ªåŠ¨ç”Ÿæˆçš„ pages.json</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"pages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/index/index"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"navigationBarTitleText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¦–é¡µ"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/my/my"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"navigationBarTitleText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"subPackages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"root"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"subPackages/agreement"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"pages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"privacy"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"navigationBarTitleText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"éšç§åè®®"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user-agreement"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"navigationBarTitleText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”¨æˆ·åè®®"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"root"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"subPackages/vip"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"pages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"index"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"navigationBarTitleText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¼šå‘˜ä¸­å¿ƒ"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"tabBar"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#999999"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"selectedColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#FF6B9D"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"backgroundColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#ffffff"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"list"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"pagePath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/index/index"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¦–é¡µ"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"iconPath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"static/tabbar/home.png"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"selectedIconPath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"static/tabbar/home-active.png"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"pagePath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/my/my"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"iconPath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"static/tabbar/my.png"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"selectedIconPath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"static/tabbar/my-active.png"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"globalStyle"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"navigationBarTextStyle"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"black"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"navigationBarTitleText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¿ƒåŠ¨æ‹èŠ"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"navigationBarBackgroundColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#ffffff"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"backgroundColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#F5F5F5"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-20">6.2 åˆ†åŒ…é…ç½®</h3>
<p>å°ç¨‹åºæœ‰åŒ…ä½“ç§¯é™åˆ¶ï¼ˆä¸»åŒ… 2MBï¼Œæ€»åŒ… 20MBï¼‰ï¼Œåˆ†åŒ…æ˜¯å¿…é¡»çš„ã€‚</p>
<p><strong>é…ç½®åˆ†åŒ…</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-title class_">UniPages</span>({
  <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'**/components/**/**.*'</span>],
  <span class="hljs-attr">dts</span>: <span class="hljs-string">'src/types/uni-pages.d.ts'</span>,
  <span class="hljs-attr">subPackages</span>: [
    <span class="hljs-string">'src/subPackages/agreement'</span>, <span class="hljs-comment">// åè®®ç›¸å…³é¡µé¢</span>
    <span class="hljs-string">'src/subPackages/vip'</span>, <span class="hljs-comment">// ä¼šå‘˜ç›¸å…³é¡µé¢</span>
    <span class="hljs-string">'src/subPackages/planForm'</span>, <span class="hljs-comment">// è®¡åˆ’è¡¨å•é¡µé¢</span>
  ],
});
</code></pre>
<p><strong>åˆ†åŒ…ä¼˜åŒ–æ’ä»¶</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// @uni-ku/bundle-optimizer è‡ªåŠ¨ä¼˜åŒ–</span>
<span class="hljs-title class_">Optimization</span>({
  <span class="hljs-attr">enable</span>: {
    <span class="hljs-attr">optimization</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¼€å¯ä¼˜åŒ–</span>
    <span class="hljs-string">'async-import'</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¼‚æ­¥å¯¼å…¥</span>
    <span class="hljs-string">'async-component'</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¼‚æ­¥ç»„ä»¶</span>
  },
  <span class="hljs-attr">dts</span>: {
    <span class="hljs-attr">base</span>: <span class="hljs-string">'src/types'</span>,
  },
});
</code></pre>
<h2 data-id="heading-21">ä¸ƒã€ç¯å¢ƒå˜é‡é…ç½®</h2>
<h3 data-id="heading-22">7.1 å¤šç¯å¢ƒé…ç½®</h3>
<p>"å¿ƒåŠ¨æ‹èŠ"é¡¹ç›®æ”¯æŒå¤šç¯å¢ƒã€å¤šé¡¹ç›®é…ç½®ï¼š</p>
<p><strong>ç›®å½•ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">env/
â”œâ”€â”€ .env                           # åŸºç¡€é…ç½®
â”œâ”€â”€ .env.development               # å¼€å‘ç¯å¢ƒ
â””â”€â”€ .env.production                # ç”Ÿäº§ç¯å¢ƒ
</code></pre>
<p><strong>.env.development</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"> <span class="hljs-comment"># åŸºç¡€é…ç½®</span>
 VITE_APP_PORT=5173
 VITE_APP_PUBLIC_BASE=/

 <span class="hljs-comment"># API é…ç½®</span>
 VITE_SERVER_BASEURL=http://localhost:3000
 VITE_APP_PROXY=<span class="hljs-literal">true</span>

 <span class="hljs-comment"># ä¸šåŠ¡é…ç½®</span>
 VITE_APP_SOURCE_ID=your_source_id
 VITE_APP_CHANNEL_ID=weixin
</code></pre>
<h3 data-id="heading-23">7.2 ç¯å¢ƒå˜é‡ä½¿ç”¨</h3>
<p><strong>åœ¨ä»£ç ä¸­ä½¿ç”¨</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç›´æ¥ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> apiBaseUrl = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_SERVER_BASEURL</span>;
<span class="hljs-keyword">const</span> sourceId = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_APP_SOURCE_ID</span>;

<span class="hljs-comment">// ç±»å‹å®‰å…¨</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ImportMetaEnv</span> {
  <span class="hljs-attr">VITE_APP_PORT</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">VITE_SERVER_BASEURL</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">VITE_APP_SOURCE_ID</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">VITE_APP_CHANNEL_ID</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">VITE_APP_BRAND_KEY</span>: <span class="hljs-built_in">string</span>;
}
</code></pre>
<p><strong>å¯åŠ¨å‘½ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev:mp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uni -p mp-weixin --mode development"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build:mp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uni build -p mp-weixin --mode production"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-24">å…«ã€ä»£ç è§„èŒƒé…ç½®</h2>
<h3 data-id="heading-25">8.1 ESLint é…ç½®</h3>
<p><strong>æç¤ºè¯</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">é…ç½® ESLintï¼Œé€‚åˆ Vue3 + TypeScript + UniApp é¡¹ç›®
</code></pre>
<p><strong>ä½¿ç”¨ @uni-helper/eslint-config</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// eslint.config.js</span>
<span class="hljs-keyword">import</span> uniHelper <span class="hljs-keyword">from</span> <span class="hljs-string">'@uni-helper/eslint-config'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">uniHelper</span>({
  <span class="hljs-attr">typescript</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">vue</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">unocss</span>: <span class="hljs-literal">true</span>,
});
</code></pre>
<h3 data-id="heading-26">8.2 Prettier é…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// .prettierrc</span>
{
  <span class="hljs-string">"printWidth"</span>: <span class="hljs-number">100</span>,
  <span class="hljs-string">"singleQuote"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"trailingComma"</span>: <span class="hljs-string">"all"</span>,
  <span class="hljs-string">"semi"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"tabWidth"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"endOfLine"</span>: <span class="hljs-string">"lf"</span>
}
</code></pre>
<h3 data-id="heading-27">8.3 Git Hooks</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"lint-staged"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"*"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint --fix"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-28">ä¹ã€å®æˆ˜æ¼”ç¤ºï¼šé¦–é¡µæ ¸å¿ƒé€»è¾‘å¼€å‘</h2>
<p>"å¿ƒåŠ¨æ‹èŠ"çš„é¦–é¡µå¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„å±•ç¤ºé¡µï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªå¤æ‚çš„äº¤äº’é€»è¾‘ï¼š<strong>æ–‡å­—/å›¾ç‰‡è¾“å…¥æ¨¡å¼åˆ‡æ¢</strong>ã€‚</p>
<h3 data-id="heading-29">9.1 éœ€æ±‚æè¿°</h3>
<pre><code class="hljs language-txt" lang="txt">å°ä½•ï¼šé¦–é¡µéœ€è¦ä¸€ä¸ªè¾“å…¥åŒºåŸŸï¼Œæ”¯æŒä¸¤ç§æ¨¡å¼ï¼š
1. æ–‡å­—æ¨¡å¼ï¼šè¾“å…¥å¯¹æ–¹è¯´çš„è¯ã€‚
2. å›¾ç‰‡æ¨¡å¼ï¼šä¸Šä¼ èŠå¤©æˆªå›¾ã€‚

åˆ‡æ¢æ¨¡å¼æ—¶ï¼Œè¾“å…¥æ¡†å’Œä¸Šä¼ åŒºåŸŸè¦äº’æ–¥æ˜¾ç¤ºã€‚
å¹¶ä¸”éœ€è¦ä¸€ä¸ª"æ¸…é™¤è®°å¿†"çš„åŠŸèƒ½ï¼Œä½†åªåœ¨æ–‡å­—æ¨¡å¼ä¸‹æ˜¾ç¤ºã€‚
</code></pre>
<h3 data-id="heading-30">9.2 AI çš„é€æ­¥å®ç°</h3>
<p>è¿™æ˜¯ä¸€ä¸ªæ¶‰åŠçŠ¶æ€ç®¡ç†ã€UI äº¤äº’å’Œä¸šåŠ¡é€»è¾‘çš„å¤æ‚éœ€æ±‚ã€‚AI æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥å®ç°çš„å‘¢ï¼Ÿ</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šå®šä¹‰çŠ¶æ€</strong></p>
<p>AI é¦–å…ˆå®šä¹‰äº†æ ¸å¿ƒçš„å“åº”å¼çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/pages/index/index.vue</span>
<span class="hljs-keyword">const</span> showUploadArea = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>); <span class="hljs-comment">// æ§åˆ¶æ¨¡å¼åˆ‡æ¢</span>
<span class="hljs-keyword">const</span> inputText = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>); <span class="hljs-comment">// æ–‡å­—è¾“å…¥</span>
<span class="hljs-keyword">const</span> selectedImages = <span class="hljs-title function_">ref</span>([]); <span class="hljs-comment">// å›¾ç‰‡åˆ—è¡¨</span>

<span class="hljs-comment">// åˆ‡æ¢æ¨¡å¼é€»è¾‘</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleInputMode</span> = (<span class="hljs-params"/>) =&gt; {
  showUploadArea.<span class="hljs-property">value</span> = !showUploadArea.<span class="hljs-property">value</span>;
  <span class="hljs-comment">// åˆ‡æ¢æ—¶æ¸…ç©ºçŠ¶æ€ï¼Œé¿å…æ•°æ®æ··æ·†</span>
  <span class="hljs-keyword">if</span> (showUploadArea.<span class="hljs-property">value</span>) {
    inputText.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
  } <span class="hljs-keyword">else</span> {
    selectedImages.<span class="hljs-property">value</span> = [];
  }
};
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šæ„å»ºåŠ¨æ€ UI</strong></p>
<p>åˆ©ç”¨ Vue çš„ <code>v-if/v-show</code> æŒ‡ä»¤å¤„ç†å¤æ‚çš„æ˜¾ç¤ºé€»è¾‘ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- æ¨¡å¼åˆ‡æ¢æŒ‰é’® --&gt;
  &lt;view class="flex justify-between items-center"&gt;
    &lt;text&gt;{{ showUploadArea ? 'ä¸Taçš„èŠå¤©æˆªå›¾ï¼š' : 'Taè¯´ï¼š' }}&lt;/text&gt;
    &lt;view @click="toggleInputMode"&gt;
      &lt;text&gt;{{ showUploadArea ? 'åˆ‡æ¢æ–‡å­—' : 'åˆ‡æ¢å›¾ç‰‡' }}&lt;/text&gt;
    &lt;/view&gt;
  &lt;/view&gt;

  &lt;!-- ä¸Šä¼ åŒºåŸŸ (å›¾ç‰‡æ¨¡å¼) --&gt;
  &lt;view v-show="showUploadArea" class="upload-area"&gt;
    &lt;ImageGrid :images="selectedImages" @add="addImages" /&gt;
  &lt;/view&gt;

  &lt;!-- è¾“å…¥æ¡† (æ–‡å­—æ¨¡å¼) --&gt;
  &lt;view v-show="!showUploadArea" class="input-wrapper"&gt;
    &lt;u-input type="textarea" v-model="inputText" :autoHeight="true" /&gt;
  &lt;/view&gt;

  &lt;!-- æ¸…é™¤è®°å¿† (ä»…æ–‡å­—æ¨¡å¼) --&gt;
  &lt;view v-if="!showUploadArea" class="clear-memory-btn" @click="handleClearMemory"&gt;
    &lt;text&gt;æ¸…é™¤è®°å¿†&lt;/text&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘</strong></p>
<p>ç”Ÿæˆå›å¤æ—¶ï¼Œéœ€è¦æ ¹æ®å½“å‰æ¨¡å¼è°ƒç”¨ä¸åŒçš„æ¥å£ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleGenerate</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// 1. é‰´æƒæ£€æŸ¥</span>
  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">await</span> <span class="hljs-title function_">checkAuth</span>())) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// 2. æ¨¡å¼åˆ¤æ–­</span>
  <span class="hljs-keyword">if</span> (showUploadArea.<span class="hljs-property">value</span>) {
    <span class="hljs-comment">// å›¾ç‰‡æ¨¡å¼é€»è¾‘</span>
    <span class="hljs-keyword">if</span> (selectedImages.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> toast.<span class="hljs-title function_">info</span>(<span class="hljs-string">'è¯·ä¸Šä¼ æˆªå›¾'</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateByImage</span>(selectedImages.<span class="hljs-property">value</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ–‡å­—æ¨¡å¼é€»è¾‘</span>
    <span class="hljs-keyword">if</span> (!inputText.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span> toast.<span class="hljs-title function_">info</span>(<span class="hljs-string">'è¯·è¾“å…¥å†…å®¹'</span>);
    <span class="hljs-comment">// è°ƒç”¨å¸¦è®°å¿†çš„æ¥å£</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateByText</span>({
      <span class="hljs-attr">text</span>: inputText.<span class="hljs-property">value</span>,
      <span class="hljs-attr">sessionId</span>: chatSessionStore.<span class="hljs-property">sessionId</span>,
    });
  }
};
</code></pre>
<h3 data-id="heading-31">9.3 çœŸå®ä»£ç ç‰‡æ®µ</h3>
<p>æœ€ç»ˆç”Ÿæˆçš„ä»£ç ä¸ä»…é€»è¾‘æ¸…æ™°ï¼Œè¿˜å¤„ç†äº†å¾ˆå¤šç»†èŠ‚ï¼Œæ¯”å¦‚ iOS çš„æ ·å¼é€‚é…ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é€‚é… iOS çš„è¾“å…¥æ¡†æ ·å¼</span>
<span class="hljs-keyword">const</span> inputCustomStyle = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> isIOS = systemInfo?.<span class="hljs-property">platform</span> === <span class="hljs-string">'ios'</span>;
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">padding</span>: isIOS ? <span class="hljs-string">'12rpx'</span> : <span class="hljs-string">'20rpx'</span>,
    <span class="hljs-attr">minHeight</span>: <span class="hljs-string">'240rpx'</span>,
    <span class="hljs-attr">borderRadius</span>: <span class="hljs-string">'12px'</span>,
  };
});
</code></pre>
<p>è¿™å°±æ˜¯ AI è¾…åŠ©å¼€å‘çš„å¨åŠ›ï¼š<strong>å®ƒä¸ä»…èƒ½å†™å‡ºè·‘é€šçš„ä»£ç ï¼Œè¿˜èƒ½è€ƒè™‘åˆ°å¹³å°å·®å¼‚å’Œè¾¹ç•Œæƒ…å†µã€‚</strong></p>
<h3 data-id="heading-32">9.3 è¿è¡Œæµ‹è¯•</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¾®ä¿¡å°ç¨‹åº</span>
pnpm --filter unibest-mp dev:mp

<span class="hljs-comment"># H5</span>
pnpm --filter unibest-mp dev:h5

<span class="hljs-comment"># App</span>
pnpm --filter unibest-mp dev:app
</code></pre>
<h2 data-id="heading-33">åã€æ€»ç»“ä¸ä¸‹ä¸€æ­¥</h2>
<h3 data-id="heading-34">10.1 æœ¬ç¯‡å®Œæˆçš„å·¥ä½œ</h3>
<p>é€šè¿‡ AI è¾…åŠ©ï¼Œæˆ‘ä»¬åœ¨ <strong>ä¸åˆ° 1 å°æ—¶</strong> å†…å®Œæˆäº†ï¼š</p>

















































<table><thead><tr><th>ä»»åŠ¡</th><th>å®Œæˆæƒ…å†µ</th></tr></thead><tbody><tr><td>âœ… Monorepo é¡¹ç›®ç»“æ„</td><td>æ ‡å‡†çš„ pnpm + Turborepo æ¶æ„</td></tr><tr><td>âœ… Vite é…ç½®</td><td>å®Œæ•´çš„æ’ä»¶é“¾å’Œä¼˜åŒ–é…ç½®</td></tr><tr><td>âœ… TypeScript é…ç½®</td><td>ä¸¥æ ¼æ¨¡å¼ï¼Œå®Œæ•´ç±»å‹æ”¯æŒ</td></tr><tr><td>âœ… UnoCSS é›†æˆ</td><td>åŸå­åŒ– CSSï¼Œä¸»é¢˜å®šåˆ¶</td></tr><tr><td>âœ… UView Pro é›†æˆ</td><td>ç»„ä»¶åº“å®Œæ•´æ¥å…¥</td></tr><tr><td>âœ… è‡ªåŠ¨å¯¼å…¥é…ç½®</td><td>Vue APIã€uni-app APIã€Hooks</td></tr><tr><td>âœ… è·¯ç”±ç³»ç»Ÿ</td><td>è‡ªåŠ¨ç”Ÿæˆï¼Œåˆ†åŒ…ä¼˜åŒ–</td></tr><tr><td>âœ… ç¯å¢ƒå˜é‡</td><td>å¤šç¯å¢ƒã€å¤šé¡¹ç›®æ”¯æŒ</td></tr><tr><td>âœ… ä»£ç è§„èŒƒ</td><td>ESLint + Prettier</td></tr><tr><td>âœ… é¦–é¡µå¼€å‘</td><td>å®Œæ•´çš„é¡µé¢å®ç°</td></tr></tbody></table>
<h3 data-id="heading-35">10.2 æ ¸å¿ƒæç¤ºè¯æ¨¡æ¿</h3>
<p><strong>é¡¹ç›®åˆå§‹åŒ–</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">åˆ›å»º [æ¡†æ¶] + [æŠ€æœ¯æ ˆ] é¡¹ç›®ï¼Œ
åŒ…å« [ç›®å½•ç»“æ„]ï¼Œ
é…ç½® [æ„å»ºå·¥å…·]
</code></pre>
<p><strong>é…ç½®æ–‡ä»¶ç”Ÿæˆ</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">é…ç½® [å·¥å…·åç§°]ï¼Œéœ€è¦ï¼š
1. [åŠŸèƒ½ç‚¹ 1]
2. [åŠŸèƒ½ç‚¹ 2]
3. [åŠŸèƒ½ç‚¹ 3]
</code></pre>
<p><strong>é¡µé¢ç”Ÿæˆ</strong>ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">åˆ›å»º [é¡µé¢åç§°]ï¼ŒåŒ…æ‹¬ï¼š
- [åŠŸèƒ½æè¿°]
ä½¿ç”¨ [UI æ¡†æ¶] å’Œ [æ ·å¼æ–¹æ¡ˆ]
</code></pre>
<h3 data-id="heading-36">10.4 ä¸‹ä¸€ç¯‡é¢„å‘Š</h3>
<p><strong>ã€Šã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 3 ç¯‡ï¼šAI è¾…åŠ©åç«¯å¼€å‘ - Next.js 15 API å¿«é€Ÿæ­å»ºã€‹</strong></p>
<p>æˆ‘ä»¬å°†å­¦ä¹ ï¼š</p>
<ul>
<li>Next.js 15 App Router æ¶æ„</li>
<li>Prisma ORM æ•°æ®åº“æ“ä½œ</li>
<li>RESTful API è®¾è®¡</li>
<li>JWT è®¤è¯ä¸­é—´ä»¶</li>
<li>å‰åç«¯ç±»å‹å…±äº«</li>
</ul>
<p><strong>å…³æ³¨æˆ‘ï¼Œä¸é”™è¿‡æ¯ä¸€ç¯‡å®æˆ˜å¹²è´§ï¼</strong></p>
<hr/>
<blockquote>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€è½¬å‘ï¼Œè®©æ›´å¤šäººäº†è§£ AI ç¼–ç¨‹çš„å¼ºå¤§ï¼</p>
<p>æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­¼20å±…ç„¶æ˜¯ä¸ªæ¡†æ¶-åŸºäº Signals ä¿¡å·çš„å‰ç«¯æ¡†æ¶è®¾è®¡]]></title>    <link>https://juejin.cn/post/7581348660824768512</link>    <guid>https://juejin.cn/post/7581348660824768512</guid>    <pubDate>2025-12-09T01:31:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581348660824768512" data-draft-id="7581251003330134042" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­¼20å±…ç„¶æ˜¯ä¸ªæ¡†æ¶-åŸºäº Signals ä¿¡å·çš„å‰ç«¯æ¡†æ¶è®¾è®¡"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯æ¡†æ¶,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-09T01:31:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="anuoua"/> <meta itemprop="url" content="https://juejin.cn/user/4415237335295933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­¼20å±…ç„¶æ˜¯ä¸ªæ¡†æ¶-åŸºäº Signals ä¿¡å·çš„å‰ç«¯æ¡†æ¶è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4415237335295933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    anuoua
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T01:31:50.000Z" title="Tue Dec 09 2025 01:31:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b4af4852d384ab9a20ff89eab34a12b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYW51b3Vh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765848710&amp;x-signature=Tp85S3N8CYamDjPP%2FfiOVBGeq%2FE%3D" alt="logo" loading="lazy"/></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ anuouaï¼Œä»Šå¤©æˆ‘ä»¬æ¥è®²è®²åŸºäº Signal å¦‚ä½•æ„å»ºä¸€ä¸ªå‰ç«¯æ¡†æ¶ã€‚</p>
<p>ä»¥ Vue ä¸ºå“åº”å¼å‰ç«¯æ¡†æ¶çš„ä»£è¡¨ï¼Œä»¥ React åˆ™æ˜¯éå“åº”å¼å‰ç«¯æ¡†æ¶çš„ä»£è¡¨ï¼Œç®—æ˜¯ç›®å‰å‰ç«¯æ¡†æ¶çš„ç¨³å®šæ ¼å±€ã€‚</p>
<p>å“åº”å¼çš„ä¼˜ç‚¹ä¸è¨€è€Œå–»ï¼Œæ˜¯é«˜æ€§èƒ½å‰ç«¯æ¡†æ¶çš„é€‰æ‹©ã€‚</p>
<p>è€Œå“åº”å¼ä¹Ÿæœ‰ä¸åŒçš„è®¾è®¡ç†å¿µï¼ŒåŒºåˆ«äº Vue çš„ reactivityï¼Œpreact çš„ä½œè€…æå‡ºäº† Signal è¿™ç§å“åº”å¼çš„ç†å¿µï¼Œå’Œæ·±åº¦åŠ«æŒçš„ reactivity ä¸åŒï¼ŒSignal æ›´ç®€å•ç›´è§‚ï¼Œå…¶ç†å¿µä¼ æ’­å¹¿æ³›ï¼Œç›®å‰ Signal ä½œä¸º js è¯­è¨€ç‰¹æ€§è¢«æå‡ºæˆä¸º proposalã€‚</p>
<h2 data-id="heading-0">å“åº”å¼å‰ç«¯æ¡†æ¶çš„ç°çŠ¶</h2>
<p>ç›®å‰ä¸€äº›å…·æœ‰ä»£è¡¨æ€§çš„å‰ç«¯æ¡†æ¶ï¼ŒåŸºæœ¬éƒ½èµ°å‘äº†å“åº”å¼ API + çœŸå® DOMï¼Œä¾‹å¦‚ï¼šsvelteã€solidã€vueï¼Œè¿™å‡ ä¸ªå‰ç«¯æ¡†æ¶åœ¨æ€§èƒ½ä¸Šæœ‰äº†å¤§å¹…æå‡ï¼Œä½†æ˜¯ä»ç„¶å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚</p>
<h3 data-id="heading-1">Vue 3</h3>
<p>Vue ä½œä¸ºå“åº”å¼æ¡†æ¶çš„å¼€åˆ›è€…ï¼ŒVue3 ä»ç„¶æ˜¯è™šæ‹Ÿ DOMï¼Œè€Œ Vue 3 vapor è½¬å‘çœŸå® DOMã€‚Vue 3 ç‰ˆæœ¬ä¸­é‡åˆ°æœ€ä¸¥é‡çš„é—®é¢˜æ˜¯<strong>è‡ªåŠ¨è§£åŒ…</strong>ã€**è§£æ„ä»¥åŠç±»å‹ï¼Œ**ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ä½œè€…è¯•éªŒè¿‡å¾ˆå¤šè¯­æ³•ï¼Œæœ€ç»ˆåœ¨æ•°ä¸ªçš„è¿­ä»£åï¼Œè¿˜æ˜¯ä¸Šäº†ç¼–è¯‘æ‰‹æ®µï¼Œåœ¨SFCä¸­ä½¿ç”¨å®ç”¨æ¥è§£å†³å¼€å‘ä½“éªŒä»¥åŠ Typescript ç±»å‹é—®é¢˜ã€‚</p>
<pre><code class="hljs language-markup" lang="markup">&lt;script setup&gt;
const props = defineProps({
  foo: String
})
&lt;/script&gt;
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒVue çš„é—®é¢˜å°±åœ¨äºå®˜æ–¹æ²¡æœ‰å¼•å¯¼ç”¨æˆ·åˆ°ç†æƒ³çš„å¼€å‘æ¨¡å¼ä¸Šå»ï¼Œ<strong>ç»„ä»¶å†™æ³•å¤ªå¤š</strong>ï¼Œå¯¼è‡´ç¤¾åŒºåŠ›é‡åˆ†æ•£ï¼Œå‘åŠ›ä¸åœ¨ä¸€å¤„ã€‚å¦‚æœç»Ÿä¸€ä½¿ç”¨ SFC å¼€å‘ï¼Œç»Ÿä¸€ä½¿ç”¨ composition apiï¼Œé‚£ä¹ˆç¤¾åŒºå°±ä¸ä¼šé™·å…¥ä½¿ç”¨ jsx è¿˜æ˜¯ SFCï¼Œä½¿ç”¨ options è¿˜æ˜¯ composition api çš„çº ç»“ï¼Œé‚£ä¹ˆç¤¾åŒºçš„ç”Ÿæ€ä¼šå¥½å¾ˆå¤šã€‚</p>
<h3 data-id="heading-2">Svelte</h3>
<p>Svelte å€ŸåŠ©ç¼–è¯‘æ‰‹æ®µå°†è§†å›¾è½¬æ¢æˆçœŸå®DOMå®ç°ï¼Œåœ¨ Svelte 5 ä¸­è½¬å‘äº†å’Œ Vue ç±»ä¼¼çš„æ·±åº¦åŠ«æŒçš„å“åº”å¼APIã€‚å®ƒè®¾è®¡äº†ä¸€ç§å« runes çš„æ¦‚å¿µï¼Œé€šè¿‡ç¼–è¯‘æŠ€æœ¯è¿½è¸ªç”±ç‰¹æ®Šå‡½æ•°ååˆ›å»ºçš„å˜é‡ï¼Œå°†å…¶ç¼–è¯‘æˆå“åº”å¼ä»£ç ï¼ŒåŸºæœ¬è§£å†³äº†ç±»ä¼¼ Vue çš„å›°æ‰°ï¼Œæ— éœ€æ‰‹åŠ¨è§£åŒ…ï¼Œå¼€å‘ä½“éªŒä¸é”™ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> message = $state(<span class="hljs-string">'hello'</span>);
</code></pre>
<p>æˆ‘è®¤ä¸º Svelte çš„ runes å·²ç»å¾ˆæ¥è¿‘å®Œç¾äº†ï¼Œå¼€å‘ä½“éªŒå¾ˆä¸é”™ã€‚</p>
<p>ä½† Svelte æœ¬èº«ä»ç„¶æœ‰ä»¥ä¸‹å‡ ç‚¹é—®é¢˜ï¼š</p>
<p><strong>ç¬¬ä¸€</strong>ï¼šå®ƒæœ‰è‡ªå·±çš„ DSL <code>.svelte</code>ï¼Œæˆ‘è®¤ä¸º JSX æ›´ä½³ï¼ŒTypescript å¯¹ JSX çš„æ”¯æŒéå¸¸å¥½ï¼ŒDSL æ”¯æŒ TS æ€»æ˜¯éœ€è¦ä»˜å‡ºæ›´å¤šçš„ä»£ä»·ï¼Œè€Œä¸”éœ€è¦æ”¯ä»˜æ›´å¤šçš„å­¦ä¹ æˆæœ¬ã€‚</p>
<p><strong>ç¬¬äºŒ</strong>ï¼šå®ƒçš„å“åº”å¼ä»ç„¶æ˜¯å’Œ Vue ä¸€æ ·çš„é»˜è®¤æ·±åº¦åŠ«æŒï¼Œå¦‚æœæ˜¯å¤æ‚åµŒå¥—å¯¹è±¡ï¼ŒåŠ«æŒå†…éƒ¨å¯¹è±¡ä¼šè¢«åŒ…è£…å¸¦æ¥ä¼šæœ‰éšæ™¦çš„debugè´Ÿæ‹…å’Œç†è§£æˆæœ¬ã€‚æˆ‘è®¤ä¸º Signal ä¿¡å·çš„æµ…åŠ«æŒç†å¿µæ›´åŠ ç®€å•å’Œç›´è§‚ã€‚</p>
<p><strong>ç¬¬ä¸‰</strong>ï¼šrunes è¿˜ä¸å¤Ÿå®Œç¾ï¼Œè‹¥åœ¨å¤§å‹åº”ç”¨ä¸­ä½¿ç”¨å…¶åˆ›å»ºçš„å˜é‡ï¼Œä¼šå¯¼è‡´å’Œæ™®é€šå˜é‡æ··æ·†ï¼Œç¼–è¯‘å™¨å¯ä»¥è¿½è¸ªå˜é‡ï¼Œä½†æ˜¯åœ¨å¤šæ–‡ä»¶ä»£ç å¤æ‚ç»„åˆçš„æ—¶å€™ï¼Œå¾ˆéš¾åŒºåˆ†æ˜¯æ™®é€šå˜é‡è¿˜æ˜¯å“åº”å¼å˜é‡ï¼Œç»™debugå¸¦æ¥å›°éš¾ã€‚</p>
<h3 data-id="heading-3">Solid</h3>
<p>Solidjsï¼Œå®ƒåˆ™æ˜¯è§†å›¾éƒ¨åˆ†é‡‡å–ç¼–è¯‘æ‰‹æ®µï¼ŒAPIéƒ¨åˆ†ä¿æŒåŸç”Ÿï¼Œè®©ç”¨æˆ·è£¸ä½¿ç”¨åŸç”Ÿ Signal APIï¼ŒSolidjs çš„ API æ˜¯ç¬¦åˆ Signal ç†å¿µçš„ï¼Œæ²¡æœ‰æ·±åº¦åŠ«æŒã€‚ä½†æ˜¯åŸç”Ÿçš„ Signal API çœ‹èµ·æ¥ä½¿ç”¨è¾ƒä¸ºç¹çã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createSignal } <span class="hljs-keyword">from</span> <span class="hljs-string">"solid-js"</span>;
<span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-number">0</span>);
</code></pre>
<p>Solid æ€§èƒ½ä¸é”™ï¼ŒJSX + TS çš„å¼€å‘ä½“éªŒåŸºæœ¬æ‹‰æ»¡ï¼Œå”¯ä¸€çš„é—®é¢˜æ˜¯è£¸ Signal API çš„ä½¿ç”¨ä¸å¤Ÿä¼˜é›…ï¼Œç•¥æ˜¾ç¹çã€‚</p>
<p>ä¾‹å¦‚å®ƒä¹Ÿä¸èƒ½ç›´æ¥è§£æ„ propsï¼Œéœ€è¦å€ŸåŠ©å¸®åŠ©å‡½æ•°æ‰èƒ½ç»´æŒå“åº”æ€§ã€‚</p>
<h3 data-id="heading-4">é€šç—…</h3>
<p>å®ƒä»¬åœ¨æ”¯æŒ Web Component è¿™ç‚¹ä¸Šï¼Œéƒ½æ²¡æœ‰åšå¥½æ— ç¼çš„å¼€å‘ä½“éªŒï¼Œæœ‰é¢å¤–çš„ä½¿ç”¨æˆæœ¬ã€‚</p>
<h3 data-id="heading-5">æ€»ç»“</h3>
<p>ä»¥ä¸Šä¸‰ä¸ªæ¡†æ¶éƒ½æŠ›å¼ƒäº†è™šæ‹ŸDOMï¼Œé…åˆå“åº”å¼APIï¼Œæ€§èƒ½è¡¨ç°éƒ½éå¸¸å¥½ï¼Œä½†å®ƒä»¬éƒ½æˆ–å¤šæˆ–å°‘éƒ½æœ‰ä»¤äººåœ¨æ„çš„é—®é¢˜ï¼Œå¾ˆéš¾æ‰¾åˆ°ç†æƒ³ä¸­çš„å‰ç«¯æ¡†æ¶ã€‚</p>

































<table><thead><tr><th>æ¡†æ¶</th><th>çœŸå® DOM</th><th>Signal</th><th>JSX</th><th>Signal API ç¼–è¯‘</th></tr></thead><tbody><tr><td>Vue</td><td>æ”¯æŒï¼ˆVapor Modeï¼‰</td><td>å…¼å®¹ï¼ˆshallowRefï¼‰</td><td>å…¼å®¹</td><td>æ··åˆ</td></tr><tr><td>Svelte</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>Solid</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr></tbody></table>
<h2 data-id="heading-6">ç†æƒ³çš„å‰ç«¯æ¡†æ¶</h2>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„å‰ç«¯æ¡†æ¶ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆè®¾è®¡ï¼Ÿ</p>
<p>æ ¹æ®ä¸Šè¿°æ€»ç»“ï¼Œæˆ‘è®¤ä¸º <strong>çœŸå® DOM +</strong> <strong>JSX + Signal API ç¼–è¯‘ç­–ç•¥ + Web Component ä¸€ç­‰æ”¯æŒ</strong> æ‰æ˜¯æœ€æ¥è¿‘å®Œç¾çš„æ–¹æ¡ˆã€‚</p>
<p>è€Œ Solid å·²ç»æ¥è¿‘æˆ‘ä»¬æƒ³è¦çš„äº†ï¼Œç»™å®ƒåŠ ä¸Šå‰©ä¸‹ä¸¤ä¸ªç‰¹æ€§åŸºæœ¬ä¸Šå°±æ»¡è¶³æˆ‘ä»¬éœ€è¦äº†ã€‚</p>
<p>æ‰€ä»¥æ€ä¹ˆå®ç°ä¸€ä¸ªâ€œå®Œç¾â€çš„æ¡†æ¶å‘¢ï¼Ÿ</p>
<h2 data-id="heading-7">ä»ç»†ç²’åº¦ç»‘å®šåˆ°ç»„ä»¶</h2>
<p>signal å¦‚ä½•ç»†ç²’åº¦ç»‘å®š DOM æ›´æ–°å‘¢ï¼Ÿåˆæ˜¯æ€ä¹ˆä»åŸºæœ¬çš„ç»‘å®šæ¼”åŒ–ä¸ºæ¡†æ¶ç»„ä»¶å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å…ˆä» Signal çš„ç”¨æ³•è¯´èµ·ã€‚</p>
<h3 data-id="heading-8">Signal çš„åŸºæœ¬ç”¨æ–¹æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å£°æ˜ä¿¡å·</span>
<span class="hljs-keyword">const</span> name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-comment">// æ´¾ç”Ÿä¿¡å·</span>
<span class="hljs-keyword">const</span> displayName = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> name.<span class="hljs-property">value</span> + <span class="hljs-string">" world"</span>);
<span class="hljs-comment">// å‰¯ä½œç”¨ç»‘å®š</span>
<span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// å½“ name.value = "hello2";</span>
  <span class="hljs-comment">// console =&gt; 1. "hello world" 2. "hello2 world"</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(displayName);
});
</code></pre>
<h3 data-id="heading-9">ç»‘å®šDOMå…ƒç´ </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å£°æ˜ä¿¡å·</span>
<span class="hljs-keyword">const</span> name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-comment">// æ´¾ç”Ÿä¿¡å·</span>
<span class="hljs-keyword">const</span> displayName = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> name.<span class="hljs-property">value</span> + <span class="hljs-string">" world"</span>);

<span class="hljs-keyword">const</span> text = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(<span class="hljs-string">""</span>);

<span class="hljs-comment">// å‰¯ä½œç”¨ç»‘å®š</span>
<span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
  text.<span class="hljs-property">nodeValue</span>= displayName.<span class="hljs-property">value</span>;
});
</code></pre>
<h3 data-id="heading-10">æ¼”åŒ–æˆç»„ä»¶</h3>
<p>ä¸€ä¸ªåªæœ‰ text èŠ‚ç‚¹çš„ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">"hello"</span>);
  <span class="hljs-keyword">const</span> displayName = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> name.<span class="hljs-property">value</span> + <span class="hljs-string">" world"</span>);
  <span class="hljs-keyword">return</span> (<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> text = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(<span class="hljs-string">""</span>);
    <span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
      text.<span class="hljs-property">nodeValue</span>= displayName.<span class="hljs-property">value</span>;
    });
    <span class="hljs-keyword">return</span> text;
  })();
}
</code></pre>
<h3 data-id="heading-11">æ›´å¤æ‚çš„ç»„ä»¶</h3>
<p>åœ¨ div ä¸­æ·»åŠ  text èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">"hello"</span>);
  <span class="hljs-keyword">const</span> displayName = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> name.<span class="hljs-property">value</span> + <span class="hljs-string">" world"</span>);
  <span class="hljs-keyword">return</span> (<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> el1 = (<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> text = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(<span class="hljs-string">""</span>);
      <span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
        text.<span class="hljs-property">nodeValue</span>= displayName.<span class="hljs-property">value</span>;
      });
      <span class="hljs-keyword">return</span> text;
    })();
    <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"div"</span>);
    div.<span class="hljs-title function_">append</span>(el1);
    <span class="hljs-keyword">return</span> div;
  })();
}
</code></pre>
<h3 data-id="heading-12">æ¼”åŒ–æˆ JSX</h3>
<p>Solid çš„ç¼–è¯‘ç­–ç•¥å’Œä¸Šè¿°æ˜¯ç±»ä¼¼çš„ï¼Œè§†å›¾çš„ç¼–è¯‘æ˜¯æœ‰è§„å¾‹çš„ï¼Œåˆ›å»º - ç»‘å®š - æŒ‚è½½ï¼Œåªè¦æ˜¯æœ‰è§„å¾‹çš„ï¼Œé‚£å°±å¯ä»¥é€šè¿‡ DSL æ¥æè¿°ï¼ŒJSX æ­£å¥½å¯ä»¥è¡¨è¾¾è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">"hello"</span>);
  <span class="hljs-keyword">const</span> displayName = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> name.<span class="hljs-property">value</span> + <span class="hljs-string">" world"</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{displayName.value}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°å¤æ‚çš„è§†å›¾åˆ›å»ºæµç¨‹é€šè¿‡ DSL çš„ä½¿ç”¨é…åˆç¼–è¯‘æ‰‹æ®µï¼Œå¼€å‘ä½“éªŒå¯ä»¥å¤§å¹…æå‡ã€‚</p>
<p>åŒæ—¶éœ€è¦æŒ‡å‡º Solid çš„ç¼–è¯‘æ–¹å¼æœªå¿…æ˜¯æœ€å¥½çš„ï¼Œç¼–è¯‘åçš„ä»£ç é‡æŒºå¤§ï¼Œè¿˜æœ‰å„ç§é—­åŒ…åµŒå¥—ï¼Œå¯ä»¥ç¨å¾®æ”¹è¿›ä¸€ä¸‹ï¼Œç¼–è¯‘æˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { jsx, template } <span class="hljs-keyword">from</span> <span class="hljs-string">"some/jsx-runtime"</span>

<span class="hljs-keyword">const</span> temp1 = <span class="hljs-title function_">template</span>(<span class="hljs-string">"&lt;div&gt;"</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">"hello"</span>);
  <span class="hljs-keyword">const</span> displayName = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> name.<span class="hljs-property">value</span> + <span class="hljs-string">" world"</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">jsx</span>(<span class="hljs-title function_">temp1</span>(), {
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">children</span>() {
      <span class="hljs-keyword">return</span> displayName.<span class="hljs-property">value</span>;
    }
  });
}
</code></pre>
<p>Solid æŠŠä¸€éƒ¨åˆ† DOM æ“ä½œè¿‡ç¨‹ä¹Ÿç¼–è¯‘å‡ºæ¥äº†ï¼Œäº‹å®ä¸Šåˆ›å»ºçœŸå® DOM çš„è¿‡ç¨‹å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯é€šç”¨çš„ï¼Œæˆ‘ä»¬æŠŠåˆ›å»ºå…ƒç´ çš„æ–¹æ³•æŠ½å‡ºæ¥ <code>jsx</code>ï¼Œç”¨äºåˆ›å»ºå’Œç»„è£…å…ƒç´ ï¼Œè¿™æ ·ç¼–è¯‘å‡ºæ¥çš„ä»£ç ä¹Ÿä¼šç›¸å¯¹ç›´è§‚ã€‚</p>
<p>åŒæ—¶éœ€è¦æ³¨æ„åˆ° template æ–¹æ³•ï¼Œå®ƒåšäº†ä¸€ä»¶äº‹ï¼Œå†…éƒ¨ä½¿ç”¨ cloneNode å»åˆ›å»ºé™æ€èŠ‚ç‚¹ï¼Œè¿™æ ·å¯ä»¥æå‡æ€§èƒ½ã€‚</p>
<h3 data-id="heading-13">æ€»ç»“</h3>
<p>è¿™å¥—ç¼–è¯‘ç­–ç•¥ï¼Œä»æ¼”åŒ–ä¸­æ€»ç»“ç¼–è¯‘ç­–ç•¥ï¼Œç„¶åå®Œæˆ JSX AST è½¬æ¢å®ç°ï¼Œç¡®å®æ˜¯æœ‰åˆ›æ–°æ€ç»´å’Œéš¾åº¦çš„ï¼Œå±äºæ¡†æ¶çš„åˆ›æ–°ç‚¹æ ¸å¿ƒã€‚</p>
<p>æœ€å…ˆæè§†å›¾è½¬çœŸå® DOM ç¼–è¯‘çš„æ˜¯ Svelteï¼Œè€Œ Solid å®Œæˆäº†æ›´é«˜æ•ˆçš„å®ç°ï¼Œåˆæœ€ç»ˆä¿ƒè¿›äº† Svelte 5 çš„è¯ç”Ÿï¼Œä½¿ Web æ¡†æ¶åœ¨æ€§èƒ½å¾—åˆ°äº†ä¸Šå¤§å¹…å‡çº§ã€‚</p>
<h2 data-id="heading-14">å®Œæ•´çš„æ¡†æ¶è¦è€ƒè™‘çš„æ›´å¤š</h2>
<p>åªé ä¸Šé¢çš„ç¼–è¯‘ç­–ç•¥æ˜¾ç„¶æ˜¯ä¸å¤Ÿçš„ï¼Œéœ€è¦è€ƒè™‘å¾ˆå¤šç»†èŠ‚é—®é¢˜ã€‚</p>
<p>ç»„ä»¶çš„åˆ›å»ºï¼Œäº‹å®ä¸ŠæŒºå¤æ‚çš„ï¼Œç»„ä»¶æ˜¯æœ‰å®ä¾‹çš„ï¼Œåˆå§‹åŒ–å®ä¾‹çš„è¿‡ç¨‹ä¸­éœ€è¦åšå¾ˆå¤šå·¥ä½œã€‚</p>
<p>æ¯”å¦‚ï¼šåˆ©ç”¨æ’æ¡©æ¥å®šä½ç»„ä»¶ç»„ä»¶çš„è¾¹ç•Œï¼Œå‡è®¾ç»„ä»¶ç›´æ¥è¿”å› <code>&lt;&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/&gt;</code> ï¼Œå¦‚æœæ²¡æœ‰æ’æ¡©æ¡†æ¶å°†æ— æ³•è¯†åˆ«è¾¹ç•Œï¼Œåœ¨åšåˆ—è¡¨ diff çš„æ—¶å€™ï¼Œç»„ä»¶å†…å…ƒç´ é›†åˆçš„ç§»é™¤ã€æ·»åŠ ã€ç§»åŠ¨ç­‰æ“ä½œå°†é”™ä¹±ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>();
  <span class="hljs-keyword">const</span> instance = {
    <span class="hljs-attr">range</span>: [
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(<span class="hljs-string">""</span>),
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(<span class="hljs-string">""</span>),
    ]
  }
  <span class="hljs-keyword">const</span> span1 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"span"</span>);
  <span class="hljs-keyword">const</span> span2 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"span"</span>);
  fragment.<span class="hljs-title function_">append</span>(instance.<span class="hljs-property">range</span>[<span class="hljs-number">0</span>]);
  fragment.<span class="hljs-title function_">append</span>(span1);
  fragment.<span class="hljs-title function_">append</span>(span2);
  fragment.<span class="hljs-title function_">append</span>(instance.<span class="hljs-property">range</span>[<span class="hljs-number">1</span>]);
  <span class="hljs-keyword">return</span> fragment;
}
</code></pre>
<h2 data-id="heading-15"><strong>ç•Œé¢çªå˜å’Œ diff ç®—æ³•</strong></h2>
<p>å’Œ React å’Œ Vue ä¸€æ ·ï¼Œè¿™ç±»ç¼–è¯‘å‹çš„å‰ç«¯æ¡†æ¶ä»ç„¶æœ‰ diff è¿‡ç¨‹ã€‚</p>
<p>ç•Œé¢çªå˜çš„æ ¹æœ¬é€»è¾‘å°±æ˜¯<strong>åˆ—è¡¨æ¸²æŸ“</strong>ï¼Œè€Œåˆ—è¡¨æ¸²æŸ“ä¸€å®šä¼šæ¶‰åŠ diffï¼Œè€Œ Vue é«˜æ•ˆçš„ diff ç®—æ³•ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œç®—æ³•å’Œå®ç°åˆ†ç¦»ï¼Œä¸åŒçš„æ¡†æ¶æœ‰ä¸åŒçš„å®ç°ã€‚</p>
<h3 data-id="heading-16"><strong>ä¸ºä»€ä¹ˆè¯´ç•Œé¢çªå˜çš„æ ¹æœ¬é€»è¾‘æ˜¯åˆ—è¡¨æ¸²æŸ“ï¼Ÿ</strong></h3>
<p>æ¡ä»¶æ¸²æŸ“æœ¬è´¨ä¹Ÿæ˜¯åˆ—è¡¨æ¸²æŸ“ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¸‰ç›®é€»è¾‘ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">List</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [toggle, setToggle] = <span class="hljs-number">0</span>;
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setToggle</span>((toggle[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>) % <span class="hljs-number">2</span>);
  });
  
  <span class="hljs-keyword">return</span> [toggle].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Fragment</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{i}<span class="hljs-tag">&lt;/<span class="hljs-name">Fragment</span>&gt;</span></span>))
}
</code></pre>
<p>å®é™…ä¸Šå°±æ˜¯åˆ—è¡¨ <code>[0]</code> å’Œ <code>[1]</code> ä¹‹é—´ç›¸äº’åˆ‡æ¢ã€‚</p>
<p>Switch Case é€»è¾‘ä¹Ÿç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">List</span> = (<span class="hljs-params">{ value }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [list, setList] = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>];
  
  <span class="hljs-keyword">const</span> deriveList = list.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i === value).<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
  
  <span class="hljs-keyword">return</span> [deriveList].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Fragment</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{i}<span class="hljs-tag">&lt;/<span class="hljs-name">Fragment</span>&gt;</span></span>));
}
</code></pre>
<p>æ ¹æ® value çš„å€¼è¿‡æ»¤åˆ—è¡¨ï¼Œå³å¯ä»¥å®ç° Switch Case é€»è¾‘ã€‚</p>
<h3 data-id="heading-17"><strong>è™šæ‹Ÿ DOM å’Œ çœŸå® DOM çš„ diff å®ç°å·®å¼‚</strong></h3>
<p>è™šæ‹Ÿ DOM çš„ diff æ˜¯ä»çš„ç»„ä»¶èŠ‚ç‚¹ï¼ˆVueï¼‰æˆ–è€…æ ¹èŠ‚ç‚¹ï¼ˆReactï¼‰å¼€å§‹ï¼Œéå†ä¸€éï¼ŒæŠ½ç¦»å‡º DOM æŒ‡ä»¤ä»¥æ›´æ–°è§†å›¾ã€‚</p>
<p>ä½†æ˜¯çœŸå® DOM çš„æ¡†æ¶ï¼Œåˆ—è¡¨æ˜¯ç»†ç²’åº¦ç»‘å®šçš„ï¼Œå½“åˆ—è¡¨å˜åŒ–åï¼Œæ›´æ–°è§†å›¾æ˜¯åœ¨å‰¯ä½œç”¨å†…æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å®ƒéœ€è¦ä¸€ä¸ªç‰¹å®šçš„ç»„ä»¶æˆ–è€…å‡½æ•°æ¥å°è£…è¿™ä¸ªå‰¯ä½œç”¨çš„é€»è¾‘ï¼Œåœ¨ Solid ä¸­å°±æ˜¯ <code>&lt;For&gt;</code> ç»„ä»¶ï¼Œ Vue Vapor å’Œ Svelte æ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™ç¼–è¯‘æˆäº†ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°ã€‚</p>
<p>svelte:</p>
<pre><code class="hljs language-html" lang="html">$.each(node, 16, () =&gt; expression, $.index, ($$anchor, name, index, $$array) =&gt; {
    $.next();
    var text_2 = $.text('...');
    $.append($$anchor, text_2);
});
</code></pre>
<p>diff ç®—æ³•å¯ä»¥å€Ÿé‰´ï¼Œä½†æ˜¯è™šæ‹Ÿ DOM å’Œ çœŸå® DOM æ¡†æ¶åœ¨ diff ç®—æ³•ä¸­è¿›è¡Œçš„æ“ä½œå¹¶ä¸ä¸€æ ·ï¼Œç†è®ºä¸Š Solid ä¹Ÿå¯ä»¥ç”¨ Vue 3 çš„ç®—æ³•ã€‚</p>
<h2 data-id="heading-18">å¼€å‘ä½“éªŒå‡çº§</h2>
<p>ä¸Šé¢æŒ‡å‡º Solid ä½“éªŒå·²ç»å¾ˆå¥½çš„ï¼Œä½†æ˜¯ä»æœ‰ä¸è¶³ï¼Œè£¸ Signal API çš„ä½¿ç”¨ä¸å¤Ÿä¼˜é›…ï¼Œgetter setter æ»¡å±å¹•è·‘ï¼ŒVue Svelte ä¸ºäº†è§£å†³ä½“éªŒé—®é¢˜éƒ½é€šè¿‡å¯¹åº”çš„ç¼–è¯‘ç­–ç•¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€Œ Solid æ²¡æœ‰ï¼Œæœ‰ç‚¹é—æ†¾ã€‚</p>
<p>äº‹å®ä¸Šå¼€å‘ä½“éªŒè¿™å—ï¼ŒReact é™¤äº†éœ€è¦æ‰‹åŠ¨ç®¡ç†ä¾èµ–è¿™å—è¿‡äºé€†å¤©ä¹‹å¤–ï¼Œå®ƒçš„å¼€å‘ä½“éªŒçœŸçš„ä¸é”™ã€‚</p>
<p>React çš„ç»„ä»¶çŠ¶æ€å†™æ³•å·²ç»å¾ˆç®€æ´äº†ï¼Œä¸ç”¨åƒ Vueï¼ŒSolid é‚£æ ·å¥— computedã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [name, setName] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">""</span>);
  
  <span class="hljs-keyword">const</span> displayName = <span class="hljs-string">"Info: "</span> + name
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setName(name + "world")}&gt;{displayName}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬èƒ½æ”¹è¿› Solidï¼Œç»™å®ƒåŠ ä¸Šä¸€ç»„ç¼–è¯‘æ‰‹æ®µï¼Œæ”¹è¿› Signal çš„ä½¿ç”¨ä½“éªŒï¼Œæ˜¯ä¸æ˜¯ä¼šæå‡å¼€å‘ä½“éªŒå‘¢ï¼Ÿ</p>
<p>è®©æˆ‘ä»¬å°è¯•æ¨æ¼”ä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-19">ç†æƒ³çš„ç»„ä»¶å½¢æ€</h2>
<p>æˆ‘ä»¬å…ˆæå‡ºä¸€ä¸ªç†æƒ³ä¸­çš„ç»„ä»¶å½¢æ€ï¼Œè¦æ±‚è¶³å¤Ÿç®€æ´ï¼Œå¼€å‘ä½“éªŒè¶³å¤Ÿå¥½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">let</span> name = <span class="hljs-string">"hello"</span>;
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {name = name + "world"}}&gt;{name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>æˆ‘ä»¬å¸Œæœ›æ”¹å˜ name  çš„æ—¶å€™ï¼Œè§†å›¾å°±ä¼šæ›´æ–°ï¼Œä½†æ˜¯è¿™æ ·æ˜¯åšä¸åˆ°çš„ï¼Œæ”¹å˜ä¸€ä¸ªå˜é‡æ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚</p>
<p>ä½†æ˜¯å¦‚æœæ˜¯ä¿¡å·å°±ä¸ä¸€æ ·äº†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">""</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> name.value = name.value + "xxx"}&gt;{name.value}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>æˆ‘ä»¬æ ¹æ®ä¸Šæ–‡æ‰€è¯´çš„ JSX ç¼–è¯‘æ‰‹æ®µï¼Œåˆ›å»ºå…ƒç´ å¯ä»¥ç»‘å®šå‰¯ä½œç”¨ï¼Œ<code>name.value</code>æ˜¯å¯ä»¥è¢«å‰¯ä½œç”¨æ”¶é›†åˆ°ï¼Œå¹¶åœ¨name.value æ›´æ–°çš„æ—¶å€™é¡ºä¾¿æ›´æ–°è§†å›¾ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { jsx, template } <span class="hljs-keyword">from</span> <span class="hljs-string">"some/jsx-runtime"</span>

<span class="hljs-keyword">const</span> temp1 = <span class="hljs-title function_">template</span>(<span class="hljs-string">"&lt;div&gt;"</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">""</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">jsx</span>(<span class="hljs-title function_">temp1</span>(), {
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">onClick</span>() {
      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
        name.<span class="hljs-property">value</span> = name.<span class="hljs-property">value</span> + <span class="hljs-string">"xxx"</span>;
      }
    },
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">children</span>() {
      <span class="hljs-keyword">return</span> name.<span class="hljs-property">value</span>;
    }
  });
}
</code></pre>
<p>è¿™æ—¶å€™å°±éœ€è¦ç¼–è¯‘æ¥å®Œæˆæˆ‘ä»¬çš„ä»£ç è½¬æ¢ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æŠŠ<strong>ä¿¡å·å˜é‡ä½¿ç”¨</strong> <code>**$**</code> <strong>æ ‡è®°</strong>ã€‚ç„¶åå°±ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">let</span> $name = <span class="hljs-string">"hello"</span>;
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {$name = $name + "world"}}&gt;{$name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¿™ä¸ªä»£ç å’Œæˆ‘ä»¬ç†æƒ³ä¸­çš„ç»„ä»¶ä»£ç éå¸¸æ¥è¿‘äº†ï¼Œè¦æ˜¯çœŸçš„èƒ½è¿™æ ·å†™ä»£ç ï¼Œé‚£ä¹ˆå¼€å‘ä½“éªŒå°±èƒ½å¾—åˆ°å¤§å¹…æå‡ã€‚</p>
<h2 data-id="heading-20"><strong>Signal ä¿¡å·ç¼–è¯‘ç­–ç•¥</strong></h2>
<p>å‰é¢æåˆ°ä½¿ç”¨ $ æ ‡è®°ä¿¡å·ï¼Œå°±æ˜¯ä¸€ç§åˆ›æ–°çš„ç¼–è¯‘ç­–ç•¥ï¼Œé€šè¿‡<strong>ç‰¹æ®Šå‘½åæ ‡è®°å˜é‡</strong>ï¼Œå°†å˜é‡ç¼–è¯‘æˆå“åº”å¼ä¿¡å·ä»£ç ã€‚</p>
<h3 data-id="heading-21">ç¼–è¯‘ç­–ç•¥è¯´æ˜</h3>
<blockquote>
<p>è¿™é‡Œæˆ‘ä»¬æŒ‰ç…§ preact/signals åº“çš„ api åšç¤ºä¾‹ã€‚</p>
</blockquote>
<h3 data-id="heading-22">ç¼–è¯‘ç­–ç•¥ä¸€ï¼šlet æ­é… $ å¼€å¤´çš„å˜é‡ï¼Œå³ä¸ºå£°æ˜ä¿¡å·ã€‚</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> $name = <span class="hljs-string">"hello"</span>
<span class="hljs-comment">// ç¼–è¯‘æˆ</span>
<span class="hljs-keyword">import</span> { signal } <span class="hljs-keyword">from</span> <span class="hljs-string">"@preact/signal"</span>;
<span class="hljs-keyword">let</span> $name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">"hello"</span>);
</code></pre>
<h3 data-id="heading-23">ç¼–è¯‘ç­–ç•¥äºŒï¼šè¯»å– $ å¼€å¤´çš„å˜é‡ä¼šé»˜è®¤è§£åŒ…</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> $name = <span class="hljs-string">"hello"</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>($name);
<span class="hljs-comment">// ç¼–è¯‘æˆ</span>
<span class="hljs-keyword">let</span> $name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>($name.<span class="hljs-property">value</span>);
</code></pre>
<h3 data-id="heading-24">ç¼–è¯‘ç­–ç•¥ä¸‰ï¼šconst æ­é… $ å¼€å¤´çš„å˜é‡ï¼Œä¸ºå£°æ˜æ´¾ç”Ÿä¿¡å·ã€‚</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> $name = <span class="hljs-string">"hello"</span>;
<span class="hljs-keyword">const</span> $display = $name + <span class="hljs-string">"world"</span>;
<span class="hljs-comment">// ç¼–è¯‘æˆ</span>
<span class="hljs-keyword">import</span> { signal, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">"@preact/signal"</span>;
<span class="hljs-keyword">let</span> $name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-keyword">const</span> $display = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> $name.<span class="hljs-property">value</span> + <span class="hljs-string">"world"</span>);
</code></pre>
<h3 data-id="heading-25">ç¼–è¯‘ç­–ç•¥å››ï¼š$use å¼€å¤´çš„ä¸ºè‡ªå®šä¹‰ hooks ã€‚</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">$useName</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">let</span> $name = <span class="hljs-string">"hello"</span>;
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">name</span>: $name
  }
}

<span class="hljs-comment">// ç¼–è¯‘æˆ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">$useName</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">let</span> $name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">"hello"</span>);
  
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">name</span>: $name.<span class="hljs-property">value</span>
  }))
}
</code></pre>
<h3 data-id="heading-26">ç¼–è¯‘ç­–ç•¥äº”ï¼šè§£æ„ + å˜é‡ä¼ é€’ã€‚</h3>
<p>å‡½æ•°å…¥å‚ï¼Œå…¥å‚çš„å“åº”ä¼ é€’ï¼Œè§£æ„å˜é‡éœ€è¦è®¾ç½®<code>$</code>å‰ç¼€</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params">{ name: $name, ...$rest }</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>($rest);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{$name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-comment">// ç¼–è¯‘ä¸º</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params">$__0</span>) =&gt; {
  <span class="hljs-keyword">const</span> $name = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> $__0.<span class="hljs-property">value</span>.<span class="hljs-property">name</span>);
  <span class="hljs-keyword">const</span> $rest = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> { name, ...rest } = $__0.<span class="hljs-property">value</span>;
    <span class="hljs-keyword">return</span> rest;
  });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>($rest.<span class="hljs-property">value</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{$name.value}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>è‡ªå®šä¹‰ hook è¿”å›ï¼Œè§£æ„çš„æ—¶å€™ä¸ºäº†ä¸ä¸¢å¤±å“åº”ï¼ŒåŒæ ·ä¹Ÿè¦è§£æ„å˜é‡è®¾ç½®<code>$</code>å‰ç¼€ï¼Œè¿™æ ·å°±èƒ½è§¦å‘ç¼–è¯‘ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">$useName</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">let</span> $name = <span class="hljs-string">"hello"</span>;
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">name</span>: $name
  }
}

<span class="hljs-comment">// è§£æ„åçš„å˜é‡ä¹Ÿå¿…é¡»æ˜¯ $ å¼€å¤´ï¼Œå¦åˆ™ä¸¢å¤±å“åº”ï¼Œé€€åŒ–ä¸ºæ™®é€šå˜é‡ï¼ˆåŸå§‹ä¿¡å·å¯¹è±¡ï¼Œå¯æ‰‹åŠ¨.valueä½¿ç”¨ï¼‰</span>
<span class="hljs-keyword">const</span> { <span class="hljs-attr">name</span>: $name } = $useName();
<span class="hljs-comment">// è‡ªå®šä¹‰ hook è¿”å›èµ‹å€¼çš„å˜é‡ä¹Ÿå¿…é¡»æ˜¯ $ å¼€å¤´ï¼Œå¦åˆ™ä¸¢å¤±å“åº”ï¼Œé€€åŒ–ä¸ºæ™®é€šå˜é‡ï¼ˆåŸå§‹ä¿¡å·å¯¹è±¡ï¼Œå¯æ‰‹åŠ¨.valueä½¿ç”¨ï¼‰</span>
<span class="hljs-keyword">const</span> $nameSignal = $useName();

<span class="hljs-comment">// ç¼–è¯‘æˆ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">$useName</span>= (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">let</span> $name = <span class="hljs-title function_">signal</span>(<span class="hljs-string">"hello"</span>);
  
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">name</span>: $name.<span class="hljs-property">value</span>
  }))
}

<span class="hljs-keyword">const</span> $__0 = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> $useName().<span class="hljs-property">value</span>);
<span class="hljs-keyword">const</span> $name = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> $__0.<span class="hljs-property">value</span>.<span class="hljs-property">name</span>);
<span class="hljs-keyword">const</span> $nameSignal = $useName();
</code></pre>
<h3 data-id="heading-27">æ­¤ç¼–è¯‘ç­–ç•¥çš„ä¼˜ç‚¹</h3>
<ol>
<li>æ— éœ€æ‰‹åŠ¨å¯¼å…¥ APIï¼Œåƒæ™®é€šå˜é‡ä¸€æ ·ä½¿ç”¨ Signal</li>
<li>å’Œ TS ç±»å‹çš„ç»“åˆéå¸¸å¥½ï¼Œç‰¹åˆ«å’Œ JSX çš„ç±»å‹ç»“åˆéå¸¸å®Œç¾</li>
<li>ä¸æ€•è§£æ„</li>
<li>æ ‡è®°å˜é‡å’Œå¸¸è§„å˜é‡ä¸€èµ·ç”¨ä¸ä¼šæœ‰æ··æ·†</li>
</ol>
<h2 data-id="heading-28">ä¸€ä¸ªç®€å•çš„é¼ æ ‡ä½ç½®hook</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">$usePosition</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">let</span> $x = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> $y = <span class="hljs-number">0</span>;
  
  <span class="hljs-keyword">const</span> $pos = {
    <span class="hljs-attr">x</span>: $x,
    <span class="hljs-attr">y</span>: $y
  };
  
  <span class="hljs-title function_">mounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      $x = e.<span class="hljs-property">pageX</span>;
      $y = e.<span class="hljs-property">pageY</span>;
    });
  })
  
  <span class="hljs-keyword">return</span> {
    $pos,
  }
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { $pos } = $usePosition();
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>x: {$pos.x}; y:{$pos.y}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>æ˜¯ä¸æ˜¯æ¸…çˆ½å¾ˆå¤šï¼Œç®€å•åº”ç”¨çš„ä»£ç é‡å·®è·ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼Œä½†æ˜¯å¦‚æœä»£ç é‡å¢åŠ ï¼Œé‚£ä¹ˆä»£ç é‡çš„å·®è·è¿˜æ˜¯éå¸¸å¯è§‚çš„ã€‚</p>
<p>åŒæ—¶è¿™æ ·çš„è®¾è®¡ï¼Œç”šè‡³ä¸éœ€è¦æ‰‹åŠ¨å¯¼å…¥ API ï¼Œå®ƒåœ¨ç¼–è¯‘æœŸé—´è‡ªåŠ¨å¯¼å…¥ï¼Œè®©äººæ— éœ€å…³å¿ƒ Signal æœ¬èº«ï¼ŒçœŸæ­£åšåˆ°äº†æ— æ„Ÿï¼Œå¼€å‘ä½“éªŒå¾—åˆ°äº†æå‡ã€‚</p>
<h2 data-id="heading-29">Web Component æ”¯æŒ</h2>
<p>Vue Solid Svelte éƒ½æ”¯æŒå°è£… Web Componentï¼Œä½†æ˜¯åœ¨å¼€å‘ä½“éªŒä¸Šå¹¶æ²¡æœ‰å¤šå¥½ï¼Œéœ€è¦é¢å¤–æ“ä½œæ‰èƒ½é›†æˆåˆ°æ¡†æ¶ä¸­ä½¿ç”¨ï¼Œåšä¸åˆ°åœ¨æ¡†æ¶å†…æ— ç¼ä½¿ç”¨ï¼Œè¿™æ ·ä¹Ÿé™åˆ¶äº† Web Component çš„æ¨å¹¿å’Œä½¿ç”¨ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¸Œæœ›æ¡†æ¶èƒ½å¤Ÿåšå¥½ä»¥ä¸‹å‡ ç‚¹æ¥æ”¯æŒ Web Componentï¼š</p>
<ul>
<li>å’Œæ¡†æ¶æœ¬èº«å¯ä»¥æ— ç¼é›†æˆï¼Œåƒæ™®é€šç»„ä»¶ä¸€æ ·æ–¹ä¾¿ä½¿ç”¨</li>
<li>ç»„ä»¶ TS ç±»å‹æ˜“ç”¨ä¸”å®Œå–„</li>
<li>å¯ä»¥æŒ‰ç…§å¸¸è§„ Web Component ä¸€æ ·å¯ä»¥ç‹¬ç«‹ä½¿ç”¨</li>
<li>å¯ä»¥ä¾›ç»™åŸç”Ÿ HTML æˆ–è€…å…¶ä»–æ¡†æ¶ä½¿ç”¨</li>
</ul>
<h2 data-id="heading-30">æœ‰è¿™æ ·çš„æ¡†æ¶å—ï¼Ÿ</h2>
<p>æœ‰å•Š J20 æ¡†æ¶ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanuoua%2Fj20" target="_blank" title="https://github.com/anuoua/j20" ref="nofollow noopener noreferrer">J20</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b4af4852d384ab9a20ff89eab34a12b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYW51b3Vh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765848710&amp;x-signature=Tp85S3N8CYamDjPP%2FfiOVBGeq%2FE%3D" alt="logo" loading="lazy"/></p>
<p>ç‚¹ä¸ª Star å§ã€‚</p>
<h2 data-id="heading-31">è¯´åœ¨æœ€å</h2>
<p>è¿™å¤§æ¦‚æ˜¯æˆ‘æœ€åä¸€ä¸ªå‰ç«¯æ¡†æ¶äº†ï¼Œä¹Ÿç®—æ˜¯å®Œæˆäº†ä¹‹å‰å¯¹å‰ç«¯æ¡†æ¶çš„æƒ³æ³•ï¼ˆä¸­é—´éš”äº†å¾ˆä¹…æ‰æƒ³èµ·æ¥è¿˜æœ‰ä¸ªä¸œè¥¿æ²¡å®Œæˆï¼‰ã€‚</p>
<p>æ­¼20æ¡†æ¶å¤§é‡ä»£ç éƒ½æ˜¯AIå†™çš„ï¼Œæˆ‘è´Ÿè´£è®¾è®¡ï¼Œå®ƒè´Ÿè´£å®ç°ï¼ŒåŒæ—¶å¸®æˆ‘å†™æµ‹è¯•ï¼Œé€Ÿåº¦å¤§å¹…æå‡ã€‚</p>
<p>AI æ—¶ä»£ï¼Œä¹Ÿè®¸æ¡†æ¶ä¸å†é‡è¦äº†å§ã€‚å“ˆå“ˆ</p>
<p>è°¢è°¢å¤§å®¶ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†äº«ä¸‹æˆ‘åˆ›ä¸šçƒ§äº† å‡ åä¸‡çš„ AI Coding ç»éªŒ]]></title>    <link>https://juejin.cn/post/7581545175509434420</link>    <guid>https://juejin.cn/post/7581545175509434420</guid>    <pubDate>2025-12-09T07:39:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581545175509434420" data-draft-id="7581477397507948578" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†äº«ä¸‹æˆ‘åˆ›ä¸šçƒ§äº† å‡ åä¸‡çš„ AI Coding ç»éªŒ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,åç«¯"/> <meta itemprop="datePublished" content="2025-12-09T07:39:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘æ³¥çŸ³æµ"/> <meta itemprop="url" content="https://juejin.cn/user/3421335914034983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†äº«ä¸‹æˆ‘åˆ›ä¸šçƒ§äº† å‡ åä¸‡çš„ AI Coding ç»éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3421335914034983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘æ³¥çŸ³æµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T07:39:38.000Z" title="Tue Dec 09 2025 07:39:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    204
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å·®ä¸å¤š 1 å¹´æ²¡å†™äº†ï¼Œè¿™ä¸¤å¹´ä¸€ç›´å¿™ç€åˆ›ä¸šï¼ŒæŠ½ä¸ªç©ºç»™å¤§å®¶èŠèŠï¼Œæ‰¯æ‰¯é—²å¤©ã€‚</p>
<p>æˆ‘æ€æ¥æƒ³å»èƒ½å†™çš„ä¸œè¥¿å…¶å®å¾ˆå¤šï¼Œæ¯”å¦‚</p>
<ul>
<li>ä¸€ä¸ªå‰ç«¯è€é¸Ÿæ˜¯å¦‚ä½•å¼€å§‹åˆ›ä¸šä¸å½’è·¯çš„</li>
<li>ææŠ€æœ¯çš„åˆ›ä¸šè¦æ³¨æ„å“ªäº›æ˜¯</li>
<li>åˆ›ä¸šä¸Šç­æœ‰å•¥ä¸åŒ</li>
<li>æ€ä¹ˆèèµ„ï¼ŒæŠ•èµ„äººéƒ½æ˜¯ä»€ä¹ˆè·¯å­</li>
<li>åˆ›ä¸š 2 å¹´éƒ½è¸©è¿‡ä»€ä¹ˆå‘</li>
<li>å¦‚ä½•æ‰¾å®¢æˆ·</li>
<li>å¦‚ä½•åšäº§å“</li>
<li>AI æ¥äº†æ”¹å˜äº†ä»€ä¹ˆ</li>
</ul>
<p>ä¸è¿‡æˆ‘æƒ³äº†æƒ³ï¼Œæ˜é‡‘æ¯•ç«Ÿæ˜¯ä¸ªå¼€å‘è€…ç¤¾åŒºï¼Œè¿˜æ˜¯å…ˆèŠèŠå¤§å®¶æ¯”è¾ƒå®¹æ˜“ç†è§£çš„æŠ€æœ¯ä¾§çš„å†…å®¹</p>
<p>é¦–å…ˆæ˜¯ç»™ä¸ªç»“è®º <strong>ä¼ ç»Ÿè½¯ä»¶å¼€å‘åŸºæœ¬è¦å˜äº†</strong></p>
<p>åˆ«çš„å…¬å¸ä¸çŸ¥é“ï¼Œä½†æ˜¯æˆ‘ä»¬ç¡®å®åšåˆ°äº†åœ¨æ²¡æœ‰äº§å“ï¼Œæµ‹è¯•ï¼ŒUIï¼Œå‰ç«¯ï¼Œåç«¯ä¼ ç»Ÿåˆ†å·¥çš„æƒ…å†µä¸‹ï¼Œå®Œå…¨é€šè¿‡ AI Coding å¼€å‘äº§å“ï¼Œä¸Šçº¿ï¼Œæ‹¿é’±ï¼Œäº¤ä»˜ï¼Œå¢é•¿ï¼Œè¿­ä»£ã€‚</p>
<p>å°±æ˜¯å¦‚æœä½ è¿˜çº ç»“ AI åŸç”Ÿç»„ç»‡ï¼Œå»æ‰æ‰€æœ‰å²—ä½åˆ†å·¥è§’è‰²ï¼Œåªç”¨ AI Coding åˆ°åº•èƒ½ä¸èƒ½ä»£æ›¿ä¼ ç»Ÿè½¯ä»¶å¼€å‘æ¨¡å¼ï¼Œèƒ½ä¸èƒ½ä¸Šç”Ÿäº§ï¼Œèƒ½ä¸èƒ½åšå‡ºçœŸçš„äº§å“ï¼Œé‚£ä¹ˆæˆ‘ç›´æ¥å‘Šè¯‰ä½ </p>
<p><strong>å®Œå…¨å¯ä»¥</strong> å‰ææ˜¯ä» 0 å¼€å§‹ï¼Œä¸¢æ‰æ‰€æœ‰çš„å†å²åŒ…è¢±ï¼Œæ‰€ä»¥åˆ›ä¸šå…¬å¸å¯ä»¥è¿™ä¹ˆå¹²ã€‚</p>
<p>ä¸‹é¢çš„å†…å®¹åˆ†äº«ç»™é‚£äº›ç”¨è¿‡ï¼Œæ²¡ç”¨è¿‡ï¼Œæƒ³ç”¨ AI Coding ç»„ç»‡æˆ–è€…åŒå­¦ä»¬ï¼Œè¿™ä¸€ç¯‡æˆ‘å°±åªèŠæˆ‘çš„ç»éªŒï¼Œåé¢æœ‰æ—¶é—´æˆ‘å†å±•å¼€è¯´ã€‚</p>
<h2 data-id="heading-0">AI Coding é‡Œçš„ä¸Šä¸‹æ–‡å·¥ç¨‹æ€ä¹ˆåš</h2>
<p>å¦‚æœä½ ç¿»ä¸€äº›å¼€å‘å›¢é˜Ÿçš„å…¬ä¼—å·ï¼Œå¯èƒ½ä¼šæŠŠä¸Šä¸‹æ–‡å·¥ç¨‹ç»™ä½ è¯´çš„ç¥ä¹å…¶ç¥ï¼Œæˆ–è€…é•¿ç¯‡å¤§è®ºï¼Œä½†æ˜¯å¯¹æˆ‘çš„ç†è§£ï¼Œæˆ‘ä» AI ä½œä¸ºç¼–ç å·¥å…·åˆ° AI æˆä¸ºæˆ‘çš„åŒäº‹è¿™ä¸ªæ¼«é•¿çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘çš„ä½“éªŒæ˜¯ï¼Œä¸Šä¸‹æ–‡å·¥ç¨‹åªè§£å†³ä¸€ä¸ªé—®é¢˜ã€‚</p>
<p>å°±æ˜¯è§£å†³ AI åœ¨æ²¡æœ‰è®°å¿†çš„æƒ…å†µä¸‹å¦‚ä½•è·å–æœ€æ–°çš„ç»“æœï¼Œæ¯”å¦‚ä½ å‘é€äº†ä¸ªéœ€æ±‚è®© AI Codingï¼ŒAI èƒ½ä¸èƒ½çŸ¥é“ä¸Šä¸€æ¬¡çš„ä¿®æ”¹ç»“æœï¼Œèƒ½ä¸èƒ½åŸºäºæœ€æ–°çš„ä»£ç å»æ¨ç†æ¥æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚</p>
<p>é‚£ä¹ˆè¦è§£å†³è¿™ä¸ªé—®é¢˜æœ‰å‡ æ¡è·¯å¾„</p>
<ul>
<li>è®© AI è¯»å†™æŸ¥è¯¢æœç´¢è‡ªå·±å»ç»„ç»‡ä¸Šä¸‹æ–‡ï¼Œç›®å‰ä¸»æµ AI IDE çš„åšæ³•ï¼Œä¼˜ç‚¹æ˜¯è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜ï¼Œç¼ºç‚¹æ˜¯æ…¢ï¼Œè´¹é’±ï¼Œè€Œä¸”å‡†ç¡®æ€§å’Œéœ€æ±‚çš„å¤æ‚åº¦æˆåæ¯”ï¼Œéœ€æ±‚è¶Šå¤æ‚ï¼Œæ€§èƒ½è¶Šå·®</li>
<li>ç»“åˆ RAG åšç´¢å¼•ï¼Œæ—©æœŸ Cursor ç±»äº§å“çš„ä¸»æµåšæ³•ï¼Œä¼˜ç‚¹æ˜¯ä¾¿å®œï¼Œç†è®ºä¸Šä¸‹æ–‡æ— é™ï¼Œç°åœ¨ç”¨ google çš„ api æˆæœ¬å¤§å¹…ä¸‹é™ï¼Œç¼ºç‚¹ä¹ˆå°±æ˜¯åŸºæœ¬æ²¡å•¥ç”¨ï¼Œå°¤å…¶æ˜¯æ¨ç†æ¨¡å‹å‡ºæ¥åï¼Œä»£ç åˆ‡ç‰‡å°±è·Ÿç›²äººæ‘¸è±¡å·®ä¸å¤šï¼Œåè€Œå¢åŠ äº† AI çš„æ¨ç†éš¾åº¦ï¼ŒAI è¿˜å¾—æƒ³æƒ³ä½ è¿™åˆ‡çš„æ”¯ç¦»ç ´ç¢çš„ä»£ç åˆ°åº•æƒ³è¡¨è¾¾å•¥ï¼Ÿå› ä¸ºå¤§éƒ¨åˆ†çš„é¡¹ç›®éƒ½æ˜¯ä¸šåŠ¡é¡¹ç›®ï¼Œä¸å…¶è¯´é‡Œé¢æ˜¯ä»£ç ï¼Œä¸å¦‚è¯´é‡Œé¢å°±æ˜¯ä¸šåŠ¡çš„ä¸€ä¸ª know how çš„è¡¨è¾¾æ–¹å¼ã€‚ä»£ç çš„è€¦åˆæ€§æ˜¯å¾ˆé«˜çš„åŸºæœ¬åˆ‡å¼€å°±ç©å®Œã€‚</li>
<li>æ‰‹å·¥é€‰æ‹© + è‡ªåŠ¨æ³¨å…¥ï¼Œè¿™æ˜¯ç›®å‰æˆ‘ä»¬çš„åšæ³•ï¼Œç®€å•ç²—æš´ï¼Œç›´æ¥å°†æ•´ä¸ªé¡¹ç›®çš„ä»£ç åºåˆ—åŒ–ç»“æ„åŒ–å˜æˆä¸€ä¸ª markdown ä¸¢è¿‡å»ï¼Œç„¶åå…è®¸å·¥ç¨‹å¸ˆæ‰‹å·¥é€‰æ‹©ï¼Œä¼˜ç‚¹å°±æ˜¯å‡†ç¡®æ€§æä½³ï¼Œæ¨ç†é€Ÿåº¦å¿«ï¼Œç”Ÿæˆæ•ˆæœå¥½ï¼Œå®Œå…¨èƒ½æ»¡è¶³ç”Ÿæˆè¦æ±‚ï¼Œç¼ºç‚¹ä¹ˆå°±æ˜¯è´¹é’±ï¼Œè¶…çº§è´¹é’±ï¼ŒåŸºæœ¬ä¸Šå¯†é›†å¼€å‘å‘¨æœŸå†…ï¼Œå•æ—¥æ¶ˆè€—å¯ä»¥è¾¾åˆ°æ•°ç™¾ç¾é‡‘ï¼Œè¿˜æ˜¯åœ¨æ‰‹å·¥é€‰æ‹©åŠ æŒçš„æƒ…å†µä¸‹ï¼Œå®Œå…¨ä¸ç®¡çš„è¯å¤§å‡ åƒç¾é‡‘ä¹Ÿæ‰“ä¸ä½ã€‚</li>
</ul>
<p>ç„¶åç°åœ¨å„å®¶ AI Coding äº§å“å…¶å®åšçš„ä¸Šä¸‹æ–‡å·¥ç¨‹å°±æ˜¯å›´ç»•æ€ä¹ˆæŠŠæ‰€æœ‰æƒ³è®© AI çŸ¥é“çš„çš„ä¸œè¥¿å˜æˆæ–‡æœ¬ä¸¢è¿›å»ï¼Œéš¾ç‚¹åœ¨äºå¾ˆå¤šå†…å®¹å¾ˆéš¾æ–‡æœ¬åŒ–ï¼Œå¹¶ä¸”ä¸¢ä¸€æ¬¡æ˜¯ä¸å¤Ÿçš„ï¼Œå¦‚ä½•å¢é‡çš„ä¸¢ï¼Œä½æˆæœ¬çš„ä¸¢ï¼Œå¿«é€Ÿçš„ä¸¢ï¼Œéƒ½æ˜¯æŠ€æœ¯ï¼Œè¿™æ–¹é¢çš„å·¥ç¨‹å¤æ‚åº¦å®Œå…¨æ˜¯ä¸€ä¸ªå…¨æ–°çš„é—®é¢˜å’Œé¢†åŸŸ</p>
<p>è¦åšå¥½ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼Œäº§å“å’ŒæŠ€æœ¯å¿…é¡»åˆäºŒä¸ºä¸€ï¼Œä¸èƒ½åˆ†å·¥ï¼Œå›½å†…å¾ˆå¤šäº§å“ä½“éªŒåšçš„ä¸å¥½å’Œæˆ‘ä»¬é•¿æœŸçš„åˆ†å·¥æ¨¡å¼æœ‰å…³ç³»ï¼Œç°åœ¨ AI äº§å“çš„è®¾è®¡ï¼Œè§’è‰²åˆ†å·¥åè€Œæˆäº†æœ€å¤§æ£è‚˜ï¼Œä»å°±ä¸šè§’åº¦çœ‹ï¼Œæˆ‘è§‰å¾—å•ç‹¬çš„äº§å“å’Œå·¥ç¨‹å¸ˆä»¥åéƒ½æ²¡å•¥æ´»è·¯ï¼Œæœ€å¥½å°±æ˜¯å˜æˆ <strong>äº§å“å·¥ç¨‹å¸ˆ</strong> AI å¹²æ´»ä½ ä¸»å¯¼è®¾è®¡</p>
<h2 data-id="heading-1">AI Coding  å¯¹ä¼ ç»Ÿè½¯ä»¶å¼€å‘æ–¹å¼çš„å½±å“</h2>
<p>å…ˆç»™ç»“è®ºï¼Œå½±å“æ˜¯é¢ è¦†æ€§çš„é©å‘½æ€§çš„ï¼Œå’Œè¿‡å»æˆ‘ä»¬ç»å†çš„ä½ä»£ç /æ— ä»£ç é‚£ä¸€æ³¢ä¸ä¸€æ ·ï¼Œä½ä»£ç æ— ä»£ç è¿˜æ˜¯ä¼ ç»Ÿå¼€å‘ä¸­é’ˆå¯¹ä¸šåŠ¡åœºæ™¯çš„è§£å†³æ–¹æ¡ˆï¼Œæ˜¯ä¸€ä¸ªå­é›†ï¼Œäººè¿˜æ˜¯é‚£äº›äººï¼Œæœ€ååˆåŠ äº†ä¸€æ‰¹è„šæœ¬å·¥ç¨‹å¸ˆã€‚</p>
<p>ä½†æ˜¯ AI Coding æ˜¯æ€æ¡Œå­äº†ï¼Œä»Šå¤©å¦‚æœæ‰€æœ‰çš„å…¬å¸æ˜¯ AI åŸç”Ÿï¼ŒAI Coding çš„é‚£ä¹ˆé™¤äº†ä¸€æ‰¹æ¶æ„ï¼Œè½¬å‹å¿«çš„è¿˜æœ‰æ´»å¹²ï¼Œ90% çš„å²—ä½éƒ½ä¸å­˜åœ¨äº†ï¼Œæ²¡æœ‰ä»»ä½•ç‹¬ç«‹çš„åˆ†å·¥ï¼Œå‚ç›´çš„å·¥ä½œç»™ä½ ï¼Œä½ æƒ³å½“èºä¸é’‰ï¼ŒAI æ¯”ä½ æ›´é€‚åˆæ‹§èºä¸ã€‚</p>
<p>æœ€å¤§çš„å½±å“æ˜¯åˆ†å·¥æ²¡äº†ï¼ŒAI çš„çŸ¥è¯†ç»“æ„å’ŒåŸºäºç®—åŠ›çš„ç‰¹ç‚¹ï¼Œä»èµ„æœ¬æ•ˆç‡ä¸Šå®Œå…¨æ˜¯ç¢¾å‹äººç±»çš„ï¼ŒAI æ¬ ç¼ºçš„éƒ¨åˆ†è¿˜éœ€è¦äººå»è¡¥è¶³ï¼Œä½†æ˜¯è¿™ä¸ªè¡¥ä»–ä¸éœ€è¦ä¸€ä¸ªå›¢é˜Ÿï¼Œåªéœ€è¦ä¸€ä¸ªäººå°±å¤Ÿäº†ï¼Œè¿™æ„å‘³ç€åˆ†å·¥çš„æ¶ˆå¤±ã€‚</p>
<p>åŸºäº AI çš„ç ”å‘å›¢é˜Ÿï¼Œç»“æ„æ˜¯é«˜åº¦æ‰å¹³ï¼Œå®ç°äº†æˆ‘ä»¬æœ€ç†æƒ³çš„æ¨¡å¼ï¼Œå°±æ˜¯å·¥ç¨‹å¸ˆæµåŠ¨çš„è‡ªç”±æ€§ï¼Œä¸åƒè¿‡å»ä½ çš„å·¥ä½œæ˜¯è¢«ç»‘æ­»åœ¨ä¸€ä¸ªé¡¹ç›®å’Œä»£ç ä¸Šçš„ã€‚ä½†æ˜¯è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œå°±å¿…é¡»æ”¾æ‰‹è®© AI å»å†™ä»£ç ã€‚</p>
<p>å¿…é¡»æ˜¯ 100% è®© AI å†™ï¼Œä»»ä½•æ··åˆå¼å†™æ³•æœ€åçš„ç»“æœå°±æ˜¯ï¼ŒAI å’Œ äººçš„èƒ½åŠ›éƒ½å‘æŒ¥ä¸å‡ºæ¥ï¼Œä»Šå¤©è¿˜æƒ³ç€ç»™å›¢é‡Œçš„äººé…ä¸ª AI æå‡æ•ˆç‡çš„ï¼Œæˆ‘å°±ç›´æ¥å‘Šè¯‰ä½ ä»¬ï¼ŒçŸ­æœŸæœ‰æ•ˆï¼Œé•¿æœŸæ— æ•ˆï¼Œè¿˜ä¸å¦‚ä¿æŒåŸæ¥çš„ä¼ ç»Ÿæ¨¡å¼ï¼ŒæŠŠ AI å°±å½“æˆä¸€æ¬¡æ€§å·¥å…·ï¼Œå’Œä½ä»£ç æ— ä»£ç ä¸€æ ·è§£å†³ä¸€äº›ä¸šåŠ¡åœºæ™¯çš„é—®é¢˜ï¼ŒAI åªæ˜¯æ›´æ™ºèƒ½è€Œå·²ï¼Œä½†æ˜¯ä½ä»£ç /æ— ä»£ç è§£å†³ä¸äº†çš„ AI ä¸€æ ·è§£å†³ä¸äº†ï¼Œä¸ç”¨æŒ‡æœ›å¤§åŠ›å‡ºå¥‡è¿¹ï¼Œäººæ•ˆé£ä¸Šå¤©ï¼Œå¦‚æœä½ ä»¬è€æ¿æœ‰è¿™ç§æƒ³æ³•ï¼Œè®©ä»–æ¥æ‰¾æˆ‘ï¼Œæˆ‘å…è´¹ç»™ä»–ä¸Šè¯¾ï¼Œå‘Šè¯‰ä»–â€œåˆ«åšæ¢¦ï¼â€ã€‚</p>
<p>æ€»ç»“ä¸‹ï¼Œå½±å“æ˜¯å¤šæ–¹é¢çš„ï¼Œä¸€ä¸ªæ˜¯å›¢é˜Ÿçš„åˆ†å·¥ï¼Œè¦æƒ³æœ€å¤§åŒ–æ”¶ç›Šï¼Œå°±æ˜¯å…¨å¹²æ‰ï¼Œå˜æˆä¸€ä¸ªå·¥ç¨‹å¸ˆ + AI çš„æ¨¡å¼ï¼Œå…¶æ¬¡æ˜¯ååŒæ–¹å¼ï¼Œå¿…é¡»æ•°å­—åŒ–ï¼Œå¹³å°åŒ–ï¼Œä¾èµ– IDE ä½ æ•ˆç‡è·‘ä¸èµ·æ¥ã€‚å¯¹ AI æ¥è¯´ï¼ŒIDEçš„ä¸Šä¸‹æ–‡å¾ˆä¸å®Œæ•´ï¼Œå¦‚æœè¦è‡ªç ”ä¸€å¥—åŸºäº AI çš„æ•ˆç‡å¹³å°ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯ä» AI å‡ºå‘ä¸º AI æ‰“é€ ã€‚</p>
<p>å…ˆå†™è¿™äº›ï¼Œ1 å¹´æ²¡å†™äº†ï¼Œæ°´ä¸¤å¥è®©å…å¾—æ˜é‡‘æŠŠæˆ‘ç»™å¿˜äº†ğŸ˜„</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter TolyUI æ¡†æ¶#11 | æ ‡ç­¾ tolyui_tag]]></title>    <link>https://juejin.cn/post/7581385235964870690</link>    <guid>https://juejin.cn/post/7581385235964870690</guid>    <pubDate>2025-12-09T01:30:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581385235964870690" data-draft-id="7581386627676209192" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter TolyUI æ¡†æ¶#11 | æ ‡ç­¾ tolyui_tag  "/> <meta itemprop="keywords" content="å‰ç«¯,Flutter,UI Kit"/> <meta itemprop="datePublished" content="2025-12-09T01:30:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼ é£æ·ç‰¹çƒˆ"/> <meta itemprop="url" content="https://juejin.cn/user/149189281194766"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter TolyUI æ¡†æ¶#11 | æ ‡ç­¾ tolyui_tag  
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189281194766/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼ é£æ·ç‰¹çƒˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T01:30:13.000Z" title="Tue Dec 09 2025 01:30:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e1b2f7d2ec8b4ca0ac1b5feadf97637b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=800&amp;h=450&amp;s=33895&amp;e=jpg&amp;b=031126" alt="" loading="lazy"/></p>
<h4 data-id="heading-0">ã€ŠFlutter TolyUI æ¡†æ¶ã€‹ç³»åˆ—å‰è¨€:</h4>
<p><strong>TolyUI</strong> æ˜¯ <a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">å¼ é£æ·ç‰¹çƒˆ</a> æ‰“é€ çš„ Fluter å…¨å¹³å°åº”ç”¨å¼€å‘ UI æ¡†æ¶ã€‚å…·å¤‡ <strong>å…¨å¹³å°</strong>ã€<strong>ç»„ä»¶åŒ–</strong>ã€<strong>æºç å¼€æ”¾</strong>ã€<strong>å“åº”å¼</strong> å››å¤§ç‰¹ç‚¹ã€‚å¯ä»¥å¸®åŠ©å¼€å‘è€…è¿…é€Ÿæ„å»ºå…·æœ‰å“åº”å¼å…¨å¹³å°åº”ç”¨è½¯ä»¶ï¼š</p>
<blockquote>
<p>å¼€æºåœ°å€ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTolyFx%2Ftoly_ui" target="_blank" title="https://github.com/TolyFx/toly_ui" ref="nofollow noopener noreferrer">github.com/TolyFx/tolyâ€¦</a></p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/de8c6bed9bfe46b3865accea7d493d4c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1563&amp;h=409&amp;s=62505&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-1">1. æ ‡ç­¾ç»„ä»¶çš„è®¾è®¡åŠ¨æœº</h4>
<p>åœ¨åº”ç”¨å¼€å‘ä¸­ï¼Œæ ‡ç­¾æ˜¯ä¸€ç§å¸¸è§çš„ç•Œé¢å…ƒç´ ï¼Œç”¨äºåˆ†ç±»æ ‡è®°ã€çŠ¶æ€å±•ç¤ºã€ç­›é€‰æ¡ä»¶ç­‰åœºæ™¯ã€‚ä¸€ä¸ªå¥½çš„æ ‡ç­¾ç»„ä»¶ä¸ä»…è¦æœ‰ç¾è§‚çš„è§†è§‰æ•ˆæœï¼Œæ›´è¦æä¾›çµæ´»çš„äº¤äº’èƒ½åŠ›ã€‚ä»ç®€å•çš„é™æ€å±•ç¤ºåˆ°å¤æ‚çš„åŠ¨æ€ç®¡ç†ï¼Œä»å•ä¸€çš„æ ·å¼åˆ°å¤šæ ·çš„å˜ä½“ï¼Œæ ‡ç­¾ç»„ä»¶æ‰¿è½½ç€ä¸°å¯Œçš„åŠŸèƒ½éœ€æ±‚ã€‚</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb72f53c2632447581d12f12fa6c890f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=980&amp;h=454&amp;s=66029&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>TolyUI çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Ftolyui_tag" target="_blank" title="https://pub.dev/packages/tolyui_tag" ref="nofollow noopener noreferrer">tolyui_tag</a> æ¨¡å—æ­£æ˜¯ä¸ºæ­¤è€Œè®¾è®¡ã€‚å®ƒä¸ä»…æä¾›äº†åŸºç¡€çš„æ ‡ç­¾å±•ç¤ºèƒ½åŠ›ï¼Œè¿˜æ”¯æŒå¯å…³é—­ã€å¯é€‰æ‹©ã€åŠ¨æ€æ·»åŠ ç­‰é«˜çº§åŠŸèƒ½ã€‚é€šè¿‡åˆç†çš„ API è®¾è®¡å’Œçµæ´»çš„é…ç½®é€‰é¡¹ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿè½»æ¾åº”å¯¹å„ç§æ ‡ç­¾ä½¿ç”¨åœºæ™¯ã€‚å…¶ä¸­åŒ…å«ä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶:</p>
<ul>
<li><strong>TolyTag</strong> å±•ç¤ºç‹¬ç«‹çš„æ ‡ç­¾ï¼Œå¯ä»¥è®¾ç½®æ ‡ç­¾ç±»å‹ã€æ˜¯å¦å¯å…³é—­ç­‰ã€‚</li>
<li><strong>TolyTagGroup</strong> å±•ç¤ºæ ‡ç­¾ç»„ï¼Œå¯ä»¥æ”¯æŒå•é€‰ã€å¤šé€‰ç­‰åŠŸèƒ½ã€‚</li>
</ul>
<p>ä½¿ç”¨è€…å¯ä»¥ç‹¬ç«‹å¼•å…¥æ¨¡å—åŒ…ï¼Œæˆ–è€…ä½¿ç”¨ tolyui å…¨å®¶æ¡¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># ä»…ä½¿ç”¨ tolyui_tag</span>
<span class="hljs-attr">dependencies:</span> 
   <span class="hljs-attr">tolyui_tag:</span> <span class="hljs-string">^last_version</span>

<span class="hljs-comment"># ä½¿ç”¨ tolyui å…¨å®¶æ¡¶ </span>
<span class="hljs-attr">dependencies:</span> 
    <span class="hljs-attr">tolyui:</span> <span class="hljs-string">^last_version</span>
</code></pre>
<p>ä¸‹é¢æ¥ä»‹ç»ç›¸å…³ç»„ä»¶çš„å…·ä½“ç”¨æ³•ã€‚</p>
<hr/>
<h4 data-id="heading-2">2. åŸºç¡€æ ‡ç­¾å±•ç¤º</h4>
<p>æœ€åŸºæœ¬çš„ç”¨æ³•æ˜¯ä½¿ç”¨ Tag ç»„ä»¶å±•ç¤ºé™æ€æ ‡ç­¾ã€‚ç»„ä»¶æ”¯æŒä¸åŒçš„é¢œè‰²å’Œå˜ä½“æ ·å¼ï¼Œé€šè¿‡ç®€å•çš„é…ç½®å°±èƒ½å®ç°ä¸°å¯Œçš„è§†è§‰æ•ˆæœã€‚</p>
<p>ç¬¬ä¸€è¡Œå±•ç¤ºäº†ä¸åŒé¢œè‰²çš„æ ‡ç­¾æ•ˆæœï¼Œé€šè¿‡ <code>color</code> å±æ€§å¯ä»¥å¿«é€Ÿè®¾ç½®æ ‡ç­¾çš„ä¸»é¢˜è‰²ã€‚ç¬¬äºŒè¡Œå±•ç¤ºäº†å››ç§å˜ä½“æ ·å¼ï¼šå¡«å……ã€è¾¹æ¡†ã€å®å¿ƒã€è™šçº¿ã€‚æ¯ç§æ ·å¼éƒ½æœ‰å…¶ç‹¬ç‰¹çš„è§†è§‰ç‰¹å¾ï¼Œé€‚ç”¨äºä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2532493a16f44e80af150d155aecef49~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=721&amp;h=179&amp;s=14817&amp;e=png&amp;b=fefefe" alt="" loading="lazy"/></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ä¸åŒé¢œè‰²çš„æ ‡ç­¾</span>
TolyTag(child: Text(<span class="hljs-string">'é»˜è®¤æ ·å¼'</span>))
TolyTag(color: Colors.red, child: Text(<span class="hljs-string">'çº¢è‰² red'</span>))
TolyTag(color: Colors.purple, child: Text(<span class="hljs-string">'ç´«è‰² purple'</span>))
TolyTag(color: Colors.green, child: Text(<span class="hljs-string">'ç»¿è‰² green'</span>))

<span class="hljs-comment">// ä¸åŒå˜ä½“çš„æ ‡ç­¾</span>
TolyTag(variant: TagVariant.filled, color: Colors.blue, child: Text(<span class="hljs-string">'å¡«å…… filled'</span>))
TolyTag(variant: TagVariant.outlined, color: Colors.green, child: Text(<span class="hljs-string">'è¾¹æ¡† outlined'</span>))
TolyTag(variant: TagVariant.solid, color: Colors.orange, child: Text(<span class="hljs-string">'å®å¿ƒ TolyTag'</span>))
TolyTag(variant: TagVariant.dashed, color: Colors.grey, child: Text(<span class="hljs-string">'è™šçº¿ dashed'</span>))
</code></pre>
<p>é€šè¿‡é¢œè‰²å’Œæ ·å¼çš„ç»„åˆï¼Œå¯ä»¥çµæ´»åº”ç”¨äºåˆ†ç±»æ ‡è®°ã€çŠ¶æ€å±•ç¤ºã€æ ‡ç­¾ç®¡ç†ç­‰åœºæ™¯ã€‚</p>
<hr/>
<h4 data-id="heading-3">3. å¯å…³é—­æ ‡ç­¾</h4>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ ‡ç­¾å¾€å¾€éœ€è¦æ”¯æŒåŠ¨æ€åˆ é™¤ã€‚Tag ç»„ä»¶é€šè¿‡ <code>closable</code> å±æ€§æä¾›äº†å…³é—­åŠŸèƒ½ï¼Œé…åˆ <code>onClose</code> å›è°ƒå¯ä»¥å®ç°å®Œæ•´çš„åˆ é™¤äº¤äº’ã€‚</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9f38908045974c498fb2738111f9ee3d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=717&amp;h=135&amp;s=9693&amp;e=png&amp;b=fefefe" alt="" loading="lazy"/></p>
<p>åŸºäºæ•°æ®é©±åŠ¨çš„æ–¹å¼ï¼Œå¯ä»¥è½»æ¾å®ç°æ ‡ç­¾çš„åŠ¨æ€ç®¡ç†ã€‚æ¯ä¸ªæ ‡ç­¾éƒ½å¯ä»¥ç‹¬ç«‹å…³é—­åˆ é™¤ï¼Œç‚¹å‡»å…³é—­æŒ‰é’®åæ ‡ç­¾ä»åˆ—è¡¨ä¸­ç§»é™¤å¹¶æ˜¾ç¤ºæç¤ºä¿¡æ¯ã€‚å½“æœ‰æ ‡ç­¾è¢«åˆ é™¤æ—¶ï¼Œå³ä¾§ä¼šå‡ºç°é‡ç½®æ ‡ç­¾ï¼Œç‚¹å‡»å¯æ¢å¤æ‰€æœ‰å·²åˆ é™¤çš„æ ‡ç­¾ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_TagDemo2State</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">TagDemo2</span>&gt; </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;TagData&gt; _initialTags = [
    TagData(label: <span class="hljs-string">'ç¼–ç¨‹æŠ€æœ¯'</span>, variant: TagVariant.outlined),
    TagData(label: <span class="hljs-string">'æ‹æ‘„å½±åƒ'</span>, icon: Icons.camera, color: Colors.green),
    TagData(label: <span class="hljs-string">'Dartè¯­è¨€'</span>, icon: Icons.code, variant: TagVariant.outlined),
    TagData(label: <span class="hljs-string">'ç¦ç”¨çŠ¶æ€'</span>, variant: TagVariant.filled, disabled: <span class="hljs-keyword">true</span>),
  ];

  <span class="hljs-keyword">late</span> <span class="hljs-built_in">List</span>&lt;TagData&gt; tags;

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
    tags = <span class="hljs-built_in">List</span>.from(_initialTags);
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Wrap(
      spacing: <span class="hljs-number">8</span>,
      runSpacing: <span class="hljs-number">8</span>,
      children: [
        ...tags.map((tag) {
          <span class="hljs-keyword">return</span> TolyTag(
            variant: tag.variant,
            closable: <span class="hljs-keyword">true</span>,
            disabled: tag.disabled,
            color: tag.color,
            icon: tag.icon != <span class="hljs-keyword">null</span> ? Icon(tag.icon, size: <span class="hljs-number">14</span>) : <span class="hljs-keyword">null</span>,
            onClose: () {
              setState(() =&gt; tags.remove(tag));
              $message.success(message: <span class="hljs-string">'å·²åˆ é™¤: <span class="hljs-subst">${tag.label}</span>'</span>);
            },
            child: Text(tag.label),
          );
        }),
        <span class="hljs-keyword">if</span> (tags.length &lt; _initialTags.length)
          GestureDetector(
            onTap: () {
              setState(() =&gt; tags = <span class="hljs-built_in">List</span>.from(_initialTags));
              $message.success(message: <span class="hljs-string">'å·²é‡ç½®æ‰€æœ‰æ ‡ç­¾'</span>);
            },
            child: TolyTag(
              variant: TagVariant.filled,
              color: Colors.blue,
              icon: Icon(Icons.refresh, size: <span class="hljs-number">14</span>),
              child: Text(<span class="hljs-string">'é‡ç½®'</span>),
            ),
          ),
      ],
    );
  }
}
</code></pre>
<p>è¿™ç§æ•°æ®é©±åŠ¨çš„æ¨¡å¼è®©æ ‡ç­¾ç®¡ç†å˜å¾—ç®€å•è€Œä¼˜é›…ï¼Œç¤ºä¾‹åŒ…å«äº†ä¸åŒæ ·å¼ã€é¢œè‰²ã€å›¾æ ‡çš„æ ‡ç­¾ç»„åˆï¼Œä»¥åŠç¦ç”¨çŠ¶æ€çš„å±•ç¤ºï¼Œé€‚ç”¨äºæ ‡ç­¾ç®¡ç†ã€ç­›é€‰æ¡ä»¶ã€å…³é”®è¯ç¼–è¾‘ç­‰éœ€è¦åŠ¨æ€å¢åˆ çš„äº¤äº’åœºæ™¯ã€‚</p>
<hr/>
<h4 data-id="heading-4">4. åŠ¨æ€æ·»åŠ æ ‡ç­¾</h4>
<p>é™¤äº†åˆ é™¤ï¼Œæ ‡ç­¾çš„åŠ¨æ€æ·»åŠ ä¹Ÿæ˜¯å¸¸è§éœ€æ±‚ã€‚é€šè¿‡ç»“åˆè¾“å…¥æ¡†å’Œæ ‡ç­¾ç»„ä»¶ï¼Œå¯ä»¥å®ç°å®Œæ•´çš„æ ‡ç­¾å¢åˆ åŠŸèƒ½ã€‚</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4eb0daa4c33044638db62e34dfe6d771~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=623&amp;h=419&amp;s=916037&amp;e=gif&amp;f=176&amp;b=fbfbf9" alt="" loading="lazy"/></p>
<p>ç”¨æˆ·å¯ä»¥é€šè¿‡å…³é—­æŒ‰é’®åˆ é™¤å·²æœ‰æ ‡ç­¾ï¼Œä¹Ÿå¯ä»¥ç‚¹å‡»è™šçº¿è¾¹æ¡†çš„æ·»åŠ æŒ‰é’®åˆ›å»ºæ–°æ ‡ç­¾ã€‚ç‚¹å‡»æ·»åŠ åä¼šå‡ºç°è¾“å…¥æ¡†ï¼Œè¾“å…¥å†…å®¹å¹¶å›è½¦æˆ–å¤±ç„¦å³å¯å®Œæˆæ·»åŠ ã€‚æ–°æ ‡ç­¾ä¼šè‡ªåŠ¨å»é‡å’Œå»é™¤ç©ºç™½ï¼Œç¡®ä¿æ ‡ç­¾åˆ—è¡¨çš„æ•´æ´æ€§ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_TagDemo3State</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">TagDemo3</span>&gt; </span>{
  <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">String</span>&gt; tags = [<span class="hljs-string">'ä¸Šè¿›'</span>, <span class="hljs-string">'åŠªåŠ›'</span>, <span class="hljs-string">'æˆåŠŸ'</span>, <span class="hljs-string">'åˆ›æ–°'</span>, <span class="hljs-string">'çƒ­æƒ…'</span>];
  <span class="hljs-built_in">bool</span> _isAdding = <span class="hljs-keyword">false</span>;
  <span class="hljs-keyword">final</span> TextEditingController _tagInputController = TextEditingController();
  <span class="hljs-keyword">final</span> FocusNode _tagInputFocusNode = FocusNode();

  <span class="hljs-keyword">void</span> _handleSubmitted(<span class="hljs-built_in">String</span> value) {
    setState(() {
      <span class="hljs-keyword">final</span> newTag = value.trim();
      <span class="hljs-keyword">if</span> (newTag.isNotEmpty &amp;&amp; !tags.contains(newTag)) {
        tags.add(newTag);
      }
      _isAdding = <span class="hljs-keyword">false</span>;
      _tagInputController.clear();
    });
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Wrap(
      spacing: <span class="hljs-number">8</span>,
      runSpacing: <span class="hljs-number">8</span>,
      children: [
        ...tags.map((tag) {
          <span class="hljs-keyword">return</span> TolyTag(
            closable: <span class="hljs-keyword">true</span>,
            color: Colors.blue,
            onClose: () =&gt; setState(() =&gt; tags.remove(tag)),
            child: Text(tag),
          );
        }),
        <span class="hljs-keyword">if</span> (_isAdding)
          SizedBox(
            width: <span class="hljs-number">90</span>,
            height: <span class="hljs-number">24</span>,
            child: TextField(
              controller: _tagInputController,
              focusNode: _tagInputFocusNode,
              onSubmitted: _handleSubmitted,
            ),
          )
        <span class="hljs-keyword">else</span>
          Tag(
            variant: TagVariant.dashed,
            onTap: () {
              setState(() =&gt; _isAdding = <span class="hljs-keyword">true</span>);
              _tagInputFocusNode.requestFocus();
            },
            child: Row(
              mainAxisSize: MainAxisSize.min,
              children: [
                Icon(Icons.add, size: <span class="hljs-number">14</span>),
                SizedBox(width: <span class="hljs-number">4</span>),
                Text(<span class="hljs-string">'æ·»åŠ æ ‡ç­¾'</span>),
              ],
            ),
          ),
      ],
    );
  }
}
</code></pre>
<p>è¿™ç§äº¤äº’æ¨¡å¼å¸¸ç”¨äºä¸ªäººä¿¡æ¯ç¼–è¾‘ã€å…´è¶£æ ‡ç­¾ç®¡ç†ã€æŠ€èƒ½æ ‡ç­¾è®¾ç½®ç­‰éœ€è¦ç”¨æˆ·è‡ªå®šä¹‰æ ‡ç­¾å†…å®¹çš„åœºæ™¯ã€‚</p>
<hr/>
<h4 data-id="heading-5">5. å¯é€‰æ‹©æ ‡ç­¾</h4>
<p>å¯¹äºç­›é€‰å’Œåˆ†ç±»åœºæ™¯ï¼Œæ ‡ç­¾éœ€è¦æ”¯æŒé€‰æ‹©åŠŸèƒ½ã€‚TolyUI æä¾›äº† TolyTagGroup ç»„ä»¶ï¼Œæ”¯æŒå•é€‰å’Œå¤šé€‰ä¸¤ç§æ¨¡å¼ã€‚</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e73d7bc4dc04bebad27e867ed29b895~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=623&amp;h=419&amp;s=369664&amp;e=gif&amp;f=84&amp;b=fcfcfa" alt="" loading="lazy"/></p>
<p>å•é€‰æ¨¡å¼ä¸‹ï¼Œç‚¹å‡»æ ‡ç­¾ä¼šå–æ¶ˆå…¶ä»–æ ‡ç­¾çš„é€‰ä¸­çŠ¶æ€ï¼Œåªä¿ç•™å½“å‰é€‰ä¸­é¡¹ã€‚å¤šé€‰æ¨¡å¼ä¸‹ï¼Œå¯ä»¥åŒæ—¶é€‰ä¸­å¤šä¸ªæ ‡ç­¾ã€‚æ¯ä¸ªæ¨¡å¼éƒ½å®æ—¶æ˜¾ç¤ºå½“å‰é€‰ä¸­çš„å†…å®¹ï¼Œæä¾›ç›´è§‚çš„è§†è§‰åé¦ˆã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_TagDemo4State</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">TagDemo4</span>&gt; </span>{
  <span class="hljs-built_in">String?</span> selectedCategory;
  <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">String</span>&gt; selectedTags = [];

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">const</span> TextStyle style = TextStyle(fontSize: <span class="hljs-number">14</span>,fontWeight: FontWeight.bold);
    <span class="hljs-keyword">const</span> TextStyle greyStyle = TextStyle(fontSize: <span class="hljs-number">12</span>,color: Colors.grey);
    <span class="hljs-keyword">return</span> Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Wrap(
          children: [
            <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'å•é€‰æ¨¡å¼ï¼š'</span>,style: style),
            <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
            Text(<span class="hljs-string">'å·²é€‰æ‹©ï¼š<span class="hljs-subst">${selectedCategory ?? <span class="hljs-string">"æ— "</span>}</span>'</span>,style: greyStyle),
          ],
        ),
        <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
        TolyTagGroup&lt;<span class="hljs-built_in">String</span>&gt;(
          options: <span class="hljs-keyword">const</span> [
            TagOption(value: <span class="hljs-string">'frontend'</span>, label: Text(<span class="hljs-string">'å‰ç«¯'</span>)),
            TagOption(value: <span class="hljs-string">'backend'</span>, label: Text(<span class="hljs-string">'åç«¯'</span>)),
            TagOption(value: <span class="hljs-string">'mobile'</span>, label: Text(<span class="hljs-string">'ç§»åŠ¨ç«¯'</span>)),
            TagOption(value: <span class="hljs-string">'ai'</span>, label: Text(<span class="hljs-string">'äººå·¥æ™ºèƒ½'</span>)),
          ],
          value: selectedCategory,
          onChange: (value) =&gt; setState(() =&gt; selectedCategory = value),
        ),
        <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">24</span>),
        Wrap(
          children: [
            <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'å¤šé€‰æ¨¡å¼ï¼š'</span>,style: style),
            <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
            Text(<span class="hljs-string">'å·²é€‰æ‹©ï¼š<span class="hljs-subst">${selectedTags.isEmpty ? <span class="hljs-string">"æ— "</span> : selectedTags.join(<span class="hljs-string">", "</span>)}</span>'</span>,style: greyStyle),

          ],
        ),

        <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
        TolyTagGroup&lt;<span class="hljs-built_in">String</span>&gt;(
          multiple: <span class="hljs-keyword">true</span>,
          options: <span class="hljs-keyword">const</span> [
            TagOption(value: <span class="hljs-string">'flutter'</span>, label: Text(<span class="hljs-string">'Flutter'</span>)),
            TagOption(value: <span class="hljs-string">'react'</span>, label: Text(<span class="hljs-string">'React'</span>)),
            TagOption(value: <span class="hljs-string">'vue'</span>, label: Text(<span class="hljs-string">'Vue'</span>)),
            TagOption(value: <span class="hljs-string">'angular'</span>, label: Text(<span class="hljs-string">'Angular'</span>)),
            TagOption(value: <span class="hljs-string">'nodejs'</span>, label: Text(<span class="hljs-string">'Node.js'</span>)),
          ],
          values: selectedTags,
          onChangeMultiple: (values) =&gt; setState(() =&gt; selectedTags = values),
        ),
      ],
    );
  }
}
</code></pre>
<p>ç¤ºä¾‹ä¸­å•é€‰ç”¨äºæŠ€æœ¯æ–¹å‘é€‰æ‹©ï¼Œå¤šé€‰ç”¨äºæŠ€æœ¯æ ˆé€‰æ‹©ã€‚è¿™ç§äº¤äº’æ¨¡å¼å¹¿æ³›åº”ç”¨äºç­›é€‰å™¨ã€åˆ†ç±»é€‰æ‹©ã€é—®å·è°ƒæŸ¥ã€åå¥½è®¾ç½®ç­‰éœ€è¦ç”¨æˆ·é€‰æ‹©çš„åœºæ™¯ã€‚</p>
<hr/>
<h4 data-id="heading-6">6. çŠ¶æ€æ ‡ç­¾</h4>
<p>åœ¨ç³»ç»Ÿä¸­ï¼Œæ ‡ç­¾å¸¸ç”¨äºå±•ç¤ºå„ç§çŠ¶æ€ä¿¡æ¯ã€‚é€šè¿‡ä¸åŒçš„é¢œè‰²å’Œå›¾æ ‡ç»„åˆï¼Œå¯ä»¥ç›´è§‚åœ°ä¼ è¾¾çŠ¶æ€å«ä¹‰ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aa87719ba9114dcc8ea95de35c2873f6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=721&amp;h=141&amp;s=9142&amp;e=png&amp;b=fffefe" alt="" loading="lazy"/></p>
<p>TolyUI çš„ TolyTag ç»„ä»¶æ”¯æŒè‡ªå®šä¹‰å›¾æ ‡ï¼Œé…åˆåˆé€‚çš„é¢œè‰²ï¼Œå¯ä»¥åˆ›å»ºå‡ºè¯­ä¹‰æ˜ç¡®çš„çŠ¶æ€æ ‡ç­¾ã€‚ç¤ºä¾‹åŒ…å«å…­ç§å¸¸è§çŠ¶æ€ï¼šæˆåŠŸã€é”™è¯¯ã€è­¦å‘Šã€ä¿¡æ¯ã€ç­‰å¾…ä¸­ã€å¤„ç†ä¸­ã€‚æ¯ä¸ªçŠ¶æ€éƒ½é‡‡ç”¨äº†ç¬¦åˆç›´è§‰çš„é¢œè‰²å’Œå›¾æ ‡æ­é…ï¼Œç‰¹åˆ«æ˜¯å¤„ç†ä¸­çŠ¶æ€ä½¿ç”¨äº†åŠ¨æ€çš„åŠ è½½æŒ‡ç¤ºå™¨ï¼Œæä¾›æ›´ç”ŸåŠ¨çš„è§†è§‰åé¦ˆã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">const</span> TolyTag(
  icon: Icon(Icons.check_circle, size: <span class="hljs-number">12</span>, color: Colors.green),
  color: Colors.green,
  child: Text(<span class="hljs-string">'æˆåŠŸ'</span>),
)

<span class="hljs-keyword">const</span> TolyTag(
  icon: Icon(Icons.error, size: <span class="hljs-number">12</span>, color: Colors.red),
  color: Colors.red,
  child: Text(<span class="hljs-string">'é”™è¯¯'</span>),
)

<span class="hljs-keyword">const</span> TolyTag(
  icon: Icon(Icons.warning, size: <span class="hljs-number">12</span>, color: Colors.orange),
  color: Colors.orange,
  child: Text(<span class="hljs-string">'è­¦å‘Š'</span>),
)

<span class="hljs-keyword">const</span> TolyTag(
  icon: Icon(Icons.info, size: <span class="hljs-number">12</span>, color: Colors.blue),
  color: Colors.blue,
  child: Text(<span class="hljs-string">'ä¿¡æ¯'</span>),
)

<span class="hljs-keyword">const</span> TolyTag(
  icon: Icon(Icons.schedule, size: <span class="hljs-number">12</span>, color: Colors.grey),
  color: Colors.grey,
  child: Text(<span class="hljs-string">'ç­‰å¾…ä¸­'</span>),
)

<span class="hljs-keyword">const</span> TolyTag(
  icon: CupertinoActivityIndicator(color: Colors.purple, radius: <span class="hljs-number">6</span>),
  color: Colors.purple,
  child: Text(<span class="hljs-string">'å¤„ç†ä¸­'</span>),
)
</code></pre>
<p>è¿™ç§æ¨¡å¼å¹¿æ³›åº”ç”¨äºä»»åŠ¡çŠ¶æ€è·Ÿè¸ªã€å®¡æ‰¹æµç¨‹ã€è®¢å•çŠ¶æ€ã€ç³»ç»Ÿé€šçŸ¥ç­‰éœ€è¦æ˜ç¡®çŠ¶æ€è¡¨è¾¾çš„åœºæ™¯ã€‚</p>
<hr/>
<h4 data-id="heading-7">å°¾å£°</h4>
<p>toly_tag æ¨¡å—ä¸º Flutter åº”ç”¨æä¾›äº†å®Œæ•´çš„æ ‡ç­¾å±•ç¤ºå’Œäº¤äº’èƒ½åŠ›ã€‚ä»åŸºç¡€çš„é™æ€å±•ç¤ºåˆ°åŠ¨æ€çš„å¢åˆ ç®¡ç†ï¼Œä»å•ä¸€çš„æ ·å¼é…ç½®åˆ°ä¸°å¯Œçš„çŠ¶æ€è¡¨è¾¾ï¼Œå®ƒéƒ½èƒ½å¤Ÿèƒœä»»ã€‚æ— è®ºä½ æ˜¯åœ¨æ„å»ºå†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œè¿˜æ˜¯å¼€å‘ç¤¾äº¤åº”ç”¨ï¼Œè¿™ä¸ªç»„ä»¶éƒ½èƒ½å¸®åŠ©ä½ åˆ›å»ºå‡ºæ—¢ç¾è§‚åˆå®ç”¨çš„æ ‡ç­¾ç•Œé¢ã€‚</p>
<p>éšç€ tolyui çš„é€æ­¥è¿­ä»£ï¼Œè¶Šæ¥è¶Šå¤šçš„æ–°åŠŸèƒ½å°†ä¼šæ”¯æŒã€‚æ„Ÿè°¢ä½ å…³æ³¨ tolyui çš„æˆé•¿ï¼Œå¦‚æœå–œæ¬¢ï¼Œä¹Ÿå¸Œæœ›ä½ èƒ½åœ¨ github ä¸­ç‚¹èµæ”¯æŒ~</p>
<blockquote>
<p>github å¼€æºåœ°å€ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTolyFx%2Ftoly_ui" target="_blank" title="https://github.com/TolyFx/toly_ui" ref="nofollow noopener noreferrer">github.com/TolyFx/tolyâ€¦</a></p>
</blockquote>
<hr/>
<p>æ›´å¤šæ–‡ç« å’Œè§†é¢‘çŸ¥è¯†èµ„è®¯ï¼Œå¤§å®¶å¯ä»¥å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€æ˜é‡‘å’Œ B ç«™ ã€‚è®©æˆ‘ä»¬ä¸€èµ·æˆé•¿ï¼Œå˜å¾—æ›´å¼ºã€‚æˆ‘ä»¬ä¸‹æ¬¡å†è§~</p>
<ul>
<li>QQäº¤æµç¾¤ï¼š 1046304516</li>
<li>æ˜é‡‘è´¦å·ï¼š <a href="https://juejin.cn/user/149189281194766" title="https://juejin.cn/user/149189281194766" target="_blank">å¼ é£æ·ç‰¹çƒˆ</a></li>
<li>bilibli è´¦å·ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fspace.bilibili.com%2F390457600" title="https://link.juejin.cn?target=https%3A%2F%2Fspace.bilibili.com%2F390457600" target="_blank">å¼ é£æ·ç‰¹çƒˆ</a></li>
<li>å…¬ä¼—å·ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fq8Vs5i3SU-4QPoU3-0xOSg" title="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fq8Vs5i3SU-4QPoU3-0xOSg" target="_blank">ç¼–ç¨‹ä¹‹ç‹</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Tiptap ç¼–å†™ä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸ºä»€ä¹ˆå¯¹å¾ˆå¤šäººæ¥è¯´å¾ˆéš¾ ğŸ¤”ğŸ¤”ğŸ¤”]]></title>    <link>https://juejin.cn/post/7581385235964510242</link>    <guid>https://juejin.cn/post/7581385235964510242</guid>    <pubDate>2025-12-08T23:47:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581385235964510242" data-draft-id="7581385235964395554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Tiptap ç¼–å†™ä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸ºä»€ä¹ˆå¯¹å¾ˆå¤šäººæ¥è¯´å¾ˆéš¾ ğŸ¤”ğŸ¤”ğŸ¤”"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,GitHub"/> <meta itemprop="datePublished" content="2025-12-08T23:47:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Moment"/> <meta itemprop="url" content="https://juejin.cn/user/3782764966460398"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Tiptap ç¼–å†™ä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸ºä»€ä¹ˆå¯¹å¾ˆå¤šäººæ¥è¯´å¾ˆéš¾ ğŸ¤”ğŸ¤”ğŸ¤”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3782764966460398/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Moment
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T23:47:48.000Z" title="Mon Dec 08 2025 23:47:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>æˆ‘æ­£åœ¨å¼€å‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxun082%2FDocFlow" target="_blank" title="https://github.com/xun082/DocFlow" ref="nofollow noopener noreferrer">DocFlow</a>ï¼Œä¸€ä¸ªå®Œæ•´çš„ AI å…¨æ ˆååŒæ–‡æ¡£é¡¹ç›®ã€‚è¿™ä¸ªé¡¹ç›®æ¶µç›–äº†å‰ç«¯å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆåŸºäº Tiptapï¼‰ã€åç«¯æœåŠ¡ã€AI é›†æˆã€å®æ—¶åä½œç­‰å¤šä¸ªæŠ€æœ¯æ ˆã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ç§¯ç´¯äº†ä¸°å¯Œçš„å®æˆ˜ç»éªŒï¼ŒåŒ…æ‹¬ Tiptap çš„æ·±åº¦å®šåˆ¶ã€æ€§èƒ½ä¼˜åŒ–ã€åä½œåŠŸèƒ½å®ç°ç­‰æ ¸å¿ƒéš¾ç‚¹ã€‚å¦‚æœä½ å¯¹ AI å…¨æ ˆå¼€å‘ã€Tiptap å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å®šåˆ¶ã€æˆ–è€… DocFlow é¡¹ç›®çš„å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆæ„Ÿå…´è¶£ï¼Œæƒ³ç³»ç»Ÿå­¦ä¹ ç›¸å…³æŠ€æœ¯æ ˆå’Œæœ€ä½³å®è·µï¼Œæ¬¢è¿åŠ æˆ‘å¾®ä¿¡ <code>yunmz777</code> ç§èŠå’¨è¯¢ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edf437a5ed804b62b407246cbbfd9574~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9tZW50:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765842468&amp;x-signature=H6pEszCPtXo3pprOvi6u4Ur2YwQ%3D" alt="20251209053826" loading="lazy"/></p>
<p>ç”¨ Tiptap åšå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¬èµ·æ¥æŒºç¾å¥½ï¼Œå®é™…ä¸Šå´è®©ä¸å°‘äººå¤´ç–¼ã€‚è™½ç„¶å®ƒæ¯”ä»é›¶å¼€å§‹å†™ç¼–è¾‘å™¨è¦å‹å¥½å¾—å¤šï¼Œä½†çœŸæ­£ä¸Šæ‰‹åä½ ä¼šå‘ç°ï¼Œæƒ³è¦åšå‡ºä¸€ä¸ªèƒ½ç”¨çš„ç¼–è¾‘å™¨ï¼Œéš¾åº¦è¿œè¶…é¢„æœŸã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æƒ³èŠèŠï¼Œä¸ºä»€ä¹ˆ Tiptap å¯¹å¾ˆå¤šäººæ¥è¯´è¿™ä¹ˆéš¾ï¼Œä»¥åŠåœ¨å®é™…é¡¹ç›®ä¸­ä¼šé‡åˆ°å“ªäº›å‘ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆå¾ˆå¤šäººé€‰æ‹© Tiptap</h2>
<p>å…ˆè¯´è¯´ Tiptap å¸å¼•äººçš„åœ°æ–¹ã€‚</p>
<p><code>åŸºäº ProseMirror çš„ç¨³å¥åŸºç¡€</code> æ˜¯å®ƒæœ€å¤§çš„å–ç‚¹ã€‚ProseMirror è¿™ä¸ªåº•å±‚æ¡†æ¶è¢« Notionã€Linear è¿™äº›äº§å“éªŒè¯è¿‡ï¼Œç¨³å®šæ€§æ²¡é—®é¢˜ã€‚Tiptap åœ¨å®ƒä¸Šé¢åšäº†å°è£…ï¼Œæä¾›äº† starter-kitã€åŸºç¡€æ‰©å±•ã€getHTMLã€getJSON è¿™äº›å¸¸ç”¨ APIï¼Œè®©ä½ ä¸ç”¨ç›´æ¥é¢å¯¹ ProseMirror çš„å¤æ‚æ€§ã€‚</p>
<p><code>æ¨¡å—åŒ–è®¾è®¡</code> ä¹Ÿå¾ˆè®¨å–œã€‚æŒ‰éœ€åŠ è½½ï¼ŒåŸºç¡€åŠŸèƒ½å¯ä»¥ä¿æŒ bundle å¾ˆå°ï¼Œéœ€è¦çš„æ—¶å€™å†æ‰©å±•ã€‚è¿™ç§è®¾è®¡ç¬¦åˆç°ä»£å‰ç«¯å¼€å‘ä¹ æƒ¯ï¼Œä½ å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚çµæ´»é€‰æ‹©åŠŸèƒ½ã€‚</p>
<p><code>æ¡†æ¶é›†æˆ</code> åšå¾—ä¸é”™ã€‚Reactã€Vueã€Svelte éƒ½æœ‰å®˜æ–¹åŒ…ï¼Œå¯ä»¥åœ¨ç†Ÿæ‚‰çš„æ¡†æ¶ç”Ÿæ€é‡Œå·¥ä½œï¼Œä¸ç”¨é‡æ–°å­¦ä¹ ä¸€å¥—ä¸œè¥¿ã€‚</p>
<p><code>ç¤¾åŒºæ´»è·ƒåº¦</code> ä¹Ÿè¿˜è¡Œã€‚GitHub ä¸Š star ä¸å°‘ï¼Œissue è®¨è®ºä¹Ÿå¾ˆå¤šï¼Œé‡åˆ°é—®é¢˜è‡³å°‘èƒ½æ‰¾åˆ°ä¸€äº›çº¿ç´¢ã€‚</p>
<p>æ‰€ä»¥ Tiptap ç¡®å®é™ä½äº†é—¨æ§›ï¼Œä½†é™ä½é—¨æ§›ä¸ç­‰äºæ¶ˆé™¤å¤æ‚æ€§ã€‚è¿™æ˜¯ç†è§£å®ƒä¸ºä»€ä¹ˆä»ç„¶å›°éš¾çš„å…³é”®ã€‚</p>
<h2 data-id="heading-1">ç„¶è€Œï¼Œ"éš¾"çš„åŸå› å¾ˆå¤š</h2>
<p>"é™ä½é—¨æ§›" â‰  "å˜æˆå®¹æ˜“"ã€‚ä¸‹é¢è¿™äº›æŒ‘æˆ˜ï¼Œå¾€å¾€åœ¨é¡¹ç›®æ¨è¿›è¿‡ç¨‹ä¸­æ‰ä¼šé€æ¸æš´éœ²ã€‚</p>
<h3 data-id="heading-2">1. åº•å±‚å¤æ‚ï¼šProseMirror çš„æŠ½è±¡ä¸å¤æ‚æ€§</h3>
<p>Tiptap è™½ç„¶å°è£…äº† ProseMirrorï¼Œä½†æœ¬è´¨ä¸Šè¿˜æ˜¯åŸºäºå®ƒã€‚æœ‰æ–‡ç« æåˆ°ï¼š</p>
<blockquote>
<p>"Tiptap is built on top of ProseMirror, a robust yet difficult to master editor."</p>
</blockquote>
<p>è¿™è¯ä¸å‡ã€‚ä¸€æ—¦ä½ éœ€è¦åšé«˜çº§å®šåˆ¶ï¼Œæ¯”å¦‚è‡ªå®šä¹‰èŠ‚ç‚¹ã€æ’ä»¶ã€å‘½ä»¤ã€åä½œåŒæ­¥ï¼Œä½ å°±å¾—æ·±å…¥ ProseMirrorã€‚é‚£äº›æŠ½è±¡æ¦‚å¿µå¯¹å¾ˆå¤šå‰ç«¯å·¥ç¨‹å¸ˆæ¥è¯´å¹¶ä¸ç›´è§‚ã€‚</p>
<h4 data-id="heading-3">æŠ½è±¡æ¦‚å¿µçš„å­¦ä¹ æ›²çº¿</h4>
<p><code>Document Model</code> æ˜¯ç¬¬ä¸€ä¸ªåã€‚ProseMirror ç”¨è‡ªå·±çš„ä¸€å¥—æ–‡æ¡£æ¨¡å‹ï¼Œä¸æ˜¯ç›´æ¥æ“ä½œ DOMã€‚è¿™æ˜¯ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰ç±»å‹ã€å±æ€§ã€å†…å®¹ã€‚ç†è§£è¿™ä¸ªæ¨¡å‹éœ€è¦æ€ç»´è½¬æ¢ï¼Œä¹ æƒ¯äº† DOM æ“ä½œçš„äººä¸€å¼€å§‹ä¼šä¸é€‚åº”ã€‚</p>
<p><code>Schema</code> è®¾è®¡ä¹Ÿä¸ç®€å•ã€‚å®ƒå®šä¹‰äº†æ–‡æ¡£é‡Œèƒ½æœ‰å“ªäº›èŠ‚ç‚¹å’Œæ ‡è®°ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚è®¾è®¡ä¸€ä¸ªåˆç†çš„ schema éœ€è¦æ·±å…¥ç†è§£æ–‡æ¡£ç»“æ„ï¼Œé‡åˆ°è¡¨æ ¼åµŒå¥—ã€åˆ—è¡¨åµŒå¥—è¿™äº›å¤æ‚æƒ…å†µæ—¶å°¤å…¶å¤´ç–¼ã€‚</p>
<p><code>Transaction</code> ç³»ç»Ÿæ˜¯å¦ä¸€ä¸ªéš¾ç‚¹ã€‚ProseMirror ç”¨ transaction å¤„ç†æ‰€æœ‰æ–‡æ¡£å˜æ›´ï¼Œæ¯ä¸ªç¼–è¾‘æ“ä½œéƒ½ä¼šåˆ›å»ºä¸€ä¸ª transactionï¼Œæè¿°ä»æ—§çŠ¶æ€åˆ°æ–°çŠ¶æ€çš„å˜åŒ–ã€‚è¦å®ç°æ’¤é”€ã€é‡åšã€åä½œè¿™äº›åŠŸèƒ½ï¼Œå¿…é¡»ç†è§£ transaction çš„å·¥ä½œåŸç†ã€‚</p>
<p><code>Selection</code> ç®¡ç†æ¯”æƒ³è±¡ä¸­å¤æ‚ã€‚ä¸åŒæµè§ˆå™¨å¯¹ selection çš„å¤„ç†ä¸ä¸€è‡´ï¼Œæ–‡æ¡£ç»“æ„å¤æ‚æ—¶ï¼ˆæ¯”å¦‚è¡¨æ ¼ã€åˆ—è¡¨ï¼‰ï¼Œselection çš„è¡Œä¸ºç»å¸¸ä¸ç¬¦åˆé¢„æœŸã€‚ä½ ä»¥ä¸ºé€‰ä¸­äº†ï¼Œå®é™…ä¸Šå¯èƒ½é€‰ä¸­çš„æ˜¯åˆ«çš„ä¸œè¥¿ã€‚</p>
<p><code>Node View</code> æ›´éº»çƒ¦ã€‚å½“ä½ éœ€è¦è‡ªå®šä¹‰èŠ‚ç‚¹æ¸²æŸ“å’Œäº¤äº’æ—¶ï¼ˆæ¯”å¦‚ä»£ç å—ã€è¡¨æ ¼ã€åµŒå…¥å†…å®¹ï¼‰ï¼Œä½ å¾—åŒæ—¶ç†è§£ Reactã€Vue ç»„ä»¶ç³»ç»Ÿå’Œ ProseMirror çš„èŠ‚ç‚¹ç³»ç»Ÿï¼Œä¸¤è€…ä¹‹é—´çš„æ¡¥æ¥å¹¶ä¸æ€»æ˜¯ç›´è§‚ã€‚</p>
<h4 data-id="heading-4">å®é™…å¼€å‘ä¸­çš„å…·ä½“å›°éš¾</h4>
<p>å¾ˆå¤šäººä¸€å¼€å§‹è§‰å¾—"å†™ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸å°±æ˜¯ä¸ª textarea + toolbar å—"ï¼Œç­‰çœŸæ­£è¦å…¼å®¹å¤šä¸ªæ ¼å¼ã€æ’å…¥å›¾ç‰‡è¡¨æ ¼ã€æ’¤é”€é‡åšã€åä½œã€ç²˜è´´å¤„ç†ã€HTML å’Œ JSON è½¬æ¢æ—¶ï¼Œæ‰å‘ç°å‘æ·±å¦‚æµ·ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå®ç°ä¸€ä¸ªç®€å•çš„å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼Œä½ éœ€è¦ï¼š</p>
<ol>
<li>åˆ›å»ºè‡ªå®šä¹‰ Image èŠ‚ç‚¹ç±»å‹</li>
<li>å®ç° Node View æ¥æ¸²æŸ“å›¾ç‰‡</li>
<li>å¤„ç†å›¾ç‰‡ä¸Šä¼ é€»è¾‘ï¼ˆæ‹–æ‹½ã€ç²˜è´´ã€URL è¾“å…¥ç­‰å¤šç§æ–¹å¼ï¼‰</li>
<li>å¤„ç†å›¾ç‰‡åŠ è½½å¤±è´¥çš„æƒ…å†µ</li>
<li>å®ç°å›¾ç‰‡å¤§å°è°ƒæ•´ã€å¯¹é½ç­‰åŠŸèƒ½</li>
<li>å¤„ç†å“åº”å¼å¸ƒå±€</li>
<li>å¤„ç†å›¾ç‰‡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–</li>
</ol>
<p>è¿™è¿˜åªæ˜¯å›¾ç‰‡åŠŸèƒ½ã€‚å¦‚æœå†åŠ ä¸Šè¡¨æ ¼ã€ä»£ç å—ã€åµŒå…¥å†…å®¹ï¼Œå¤æ‚åº¦ä¼šæˆå€å¢åŠ ã€‚</p>
<h3 data-id="heading-5">2. åŠŸèƒ½å¤šæ ·ï¼Œéœ€æ±‚åœºæ™¯å·®å¼‚æå¤§</h3>
<p>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸æ˜¯"ä¸€ä¸ªæŒ‰é’®èƒ½è§£å†³æ‰€æœ‰é—®é¢˜"ã€‚ä¸åŒåº”ç”¨å¯¹æ–‡æ¡£ç¼–è¾‘çš„éœ€æ±‚åƒå·®ä¸‡åˆ«ï¼Œè¿™ç§å¤šæ ·æ€§è®©"ä¸‡èƒ½"è§£å†³æ–¹æ¡ˆå˜å¾—ä¸ç°å®ã€‚</p>
<h4 data-id="heading-6">ä» Wordã€Google Docs å¤åˆ¶ç²˜è´´çš„å™©æ¢¦</h4>
<p>ä» Word å¤åˆ¶å†…å®¹åˆ°ç¼–è¾‘å™¨ï¼Œå¬èµ·æ¥ç®€å•ï¼Œå®é™…ä¸Šæ˜¯ä¸ªå™©æ¢¦ã€‚</p>
<p>æµè§ˆå™¨æ¥æ”¶åˆ°çš„æ˜¯ä¸€å †å†…è”æ ·å¼ã€åµŒå¥—çš„ div å’Œ spanã€å­—ä½“ä¿¡æ¯ã€é¢œè‰²ä¿¡æ¯ã€‚è¿™äº›å†…å®¹éœ€è¦è¢«"æ¸…æ´—"å’Œè½¬æ¢ä¸ºä½ ç¼–è¾‘å™¨ä¸­çš„èŠ‚ç‚¹ç»“æ„ã€‚ä½ å¾—è¯†åˆ«å’Œè½¬æ¢æ®µè½ã€æ ‡é¢˜ã€åˆ—è¡¨ï¼Œå¤„ç†è¡¨æ ¼ï¼ˆåŒ…æ‹¬åˆå¹¶å•å…ƒæ ¼ã€åµŒå¥—è¡¨æ ¼ï¼‰ï¼Œå¤„ç†å›¾ç‰‡å’ŒåµŒå…¥å†…å®¹ï¼Œæ¸…ç†ä¸å¿…è¦çš„æ ·å¼å’Œæ ‡ç­¾ï¼Œå¤„ç†ç‰¹æ®Šå­—ç¬¦å’Œç¼–ç é—®é¢˜ã€‚</p>
<p>å¾ˆå¤šç¼–è¾‘å™¨ï¼ˆåŒ…æ‹¬ Tiptapï¼‰å¯¹æ­¤å¤„ç†å¹¶ä¸ç†æƒ³ã€‚ä½ å¾€å¾€éœ€è¦è‡ªå·±å®ç°æˆ–æ‰©å±•ç²˜è´´å¤„ç†é€»è¾‘ï¼Œè¿™éœ€è¦æ·±å…¥ç†è§£ ProseMirror çš„ paste rules å’Œ clipboard å¤„ç†æœºåˆ¶ã€‚</p>
<h4 data-id="heading-7">åª’ä½“ä¸å¤æ‚å†…å®¹æ”¯æŒçš„å·¥ä½œé‡è¢«ä½ä¼°</h4>
<p>ä½ å¯èƒ½éœ€è¦æ”¯æŒå›¾ç‰‡ã€è§†é¢‘ã€embedã€é™„ä»¶ã€è¡¨æ ¼ã€è¡¨å•ï¼Œè¿˜è¦æ”¯æŒæ‹–æ‹½ã€ä¸Šä¼ ã€è°ƒæ•´ã€é‡æ’ã€è‡ªå®šä¹‰æ ·å¼ã€å“åº”å¼ã€å…¼å®¹å¤šç«¯ã€‚è¿™æ„å‘³ç€ä¸ä»…æ˜¯æ–‡æœ¬ï¼Œè¿˜è¦ç®¡ç†å¤æ‚ç»“æ„ã€‚</p>
<p>ä»¥è¡¨æ ¼ä¸ºä¾‹ï¼Œå®ç°ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è¡¨æ ¼ç¼–è¾‘å™¨éœ€è¦ï¼š</p>
<ul>
<li>è¡¨æ ¼çš„åˆ›å»ºã€åˆ é™¤ã€è¡Œåˆ—çš„å¢åˆ </li>
<li>å•å…ƒæ ¼çš„åˆå¹¶å’Œæ‹†åˆ†</li>
<li>è¡¨æ ¼æ ·å¼çš„è‡ªå®šä¹‰ï¼ˆè¾¹æ¡†ã€èƒŒæ™¯è‰²ã€å¯¹é½æ–¹å¼ç­‰ï¼‰</li>
<li>è¡¨æ ¼å†…å®¹çš„ç¼–è¾‘ï¼ˆåŒ…æ‹¬åµŒå¥—å…¶ä»–èŠ‚ç‚¹ç±»å‹ï¼‰</li>
<li>è¡¨æ ¼çš„å“åº”å¼å¤„ç†ï¼ˆåœ¨å°å±å¹•ä¸Šå¦‚ä½•æ˜¾ç¤ºï¼‰</li>
<li>è¡¨æ ¼çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–</li>
<li>è¡¨æ ¼çš„å¤åˆ¶ç²˜è´´å¤„ç†</li>
</ul>
<p>è¿™è¿˜åªæ˜¯è¡¨æ ¼ã€‚å¦‚æœå†åŠ ä¸Šå›¾ç‰‡çš„æ‹–æ‹½è°ƒæ•´å¤§å°ã€è§†é¢‘çš„æ’­æ”¾æ§åˆ¶ã€åµŒå…¥å†…å®¹çš„äº¤äº’ï¼Œå·¥ä½œé‡ä¼šæ€¥å‰§å¢åŠ ã€‚å¾ˆå¤šäººä½ä¼°äº†è¿™éƒ¨åˆ†å·¥ä½œé‡ï¼Œä»¥ä¸º"ç”¨ä¸ªæ‰©å±•å°±è¡Œ"ï¼Œå®é™…ä¸Šå¾€å¾€éœ€è¦å¤§é‡çš„å®šåˆ¶å¼€å‘ã€‚</p>
<h4 data-id="heading-8">åä½œåŠŸèƒ½çš„æŒ‡æ•°çº§å¤æ‚åº¦</h4>
<p>å¦‚æœè¿˜è¦åŠ åä½œï¼ˆå¤šäººå®æ—¶ç¼–è¾‘ï¼‰ã€ç‰ˆæœ¬å†å²ã€è¯„è®ºã€å»ºè®®ç¼–è¾‘ã€åˆå¹¶ã€å†²çªè§£å†³ï¼Œé‚£å°±æ›´å¤æ‚äº†ã€‚æœ‰æ–‡ç« æŒ‡å‡ºï¼š"æ— è®ºä½ é€‰æ‹©å“ªç§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ŒæŠŠåä½œåŠŸèƒ½åŠ è¿›å»éƒ½æ˜¯ä¸€ä»¶éå¸¸å…·æœ‰æŒ‘æˆ˜æ€§çš„äº‹æƒ…ã€‚"</p>
<p>åä½œç¼–è¾‘æ¶‰åŠï¼š</p>
<ul>
<li><code>å®æ—¶åŒæ­¥</code>ï¼šéœ€è¦ WebSocket æˆ–ç±»ä¼¼æŠ€æœ¯æ¥å®æ—¶åŒæ­¥ç¼–è¾‘æ“ä½œ</li>
<li><code>å†²çªè§£å†³</code>ï¼šå½“å¤šä¸ªç”¨æˆ·åŒæ—¶ç¼–è¾‘åŒä¸€éƒ¨åˆ†æ—¶ï¼Œå¦‚ä½•è§£å†³å†²çª</li>
<li><code>æ“ä½œè½¬æ¢ï¼ˆOTï¼‰æˆ– CRDT</code>ï¼šéœ€è¦ç®—æ³•æ¥ä¿è¯æœ€ç»ˆä¸€è‡´æ€§</li>
<li><code>ç‰ˆæœ¬å†å²</code>ï¼šéœ€è¦è®°å½•æ¯æ¬¡å˜æ›´ï¼Œæ”¯æŒå›æ»šå’ŒæŸ¥çœ‹å†å²</li>
<li><code>æƒé™ç®¡ç†</code>ï¼šä¸åŒç”¨æˆ·å¯èƒ½æœ‰ä¸åŒçš„ç¼–è¾‘æƒé™</li>
<li><code>è¯„è®ºç³»ç»Ÿ</code>ï¼šéœ€è¦åœ¨æ–‡æ¡£ä¸­æ’å…¥è¯„è®ºï¼Œå¹¶ç®¡ç†è¯„è®ºçš„ç”Ÿå‘½å‘¨æœŸ</li>
<li><code>å»ºè®®ç¼–è¾‘</code>ï¼šå…è®¸ç”¨æˆ·æå‡ºç¼–è¾‘å»ºè®®ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹</li>
</ul>
<p>å³ä½¿ä½¿ç”¨ Y.js è¿™æ ·çš„åä½œæ¡†æ¶ï¼Œä½ ä»ç„¶éœ€è¦å¤„ç†å¾ˆå¤šç»†èŠ‚ï¼Œæ¯”å¦‚å¦‚ä½•å°† ProseMirror çš„ transaction è½¬æ¢ä¸º Y.js çš„æ“ä½œï¼Œå¦‚ä½•å¤„ç†ç½‘ç»œå»¶è¿Ÿå’Œæ–­çº¿é‡è¿ï¼Œå¦‚ä½•å¤„ç†å†²çªç­‰ã€‚</p>
<p><code>é€šç”¨ + ä¸‡èƒ½ + é«˜å¯å®šåˆ¶ + å¤šåŠŸèƒ½</code>ï¼Œæ˜¯ä¸ª"ç†æƒ³"ä¸"é­”é¬¼"å¹¶å­˜çš„ç»„åˆã€‚å¾ˆå¤šå›¢é˜Ÿå’Œä¸ªäººåœ¨æœ€åˆæ²¡è¯„ä¼°æ¸…æ¥šå°±ä¸Šäº†è½¦ï¼Œæœ€åæ‰å‘ç°é—®é¢˜ã€‚</p>
<h3 data-id="heading-9">3. æ€§èƒ½ã€UXã€æµè§ˆå™¨å…¼å®¹çš„å¤æ‚åº¦</h3>
<h4 data-id="heading-10">æ€§èƒ½é—®é¢˜çš„çœŸå®å­˜åœ¨</h4>
<p>æœ‰äººåæ˜ ï¼Œå½“æ–‡æ¡£å¾ˆé•¿ï¼ˆä¸Šç™¾ã€å‡ ç™¾æ¡ç›®ã€å¤æ‚ç»“æ„ï¼‰ä¸”å«å¤šç§æ ¼å¼ã€åµŒå…¥ã€æ ·å¼ã€å—æ—¶ï¼ŒTiptap çš„å“åº”ä¼šå˜æ…¢ã€‚æœ‰ä½¿ç”¨è€…è¯´ï¼š</p>
<blockquote>
<p>"One of the big gotchas I've had with TipTap is that it's extremely sluggish once you get to more than 300 words or so and you're using different formatting options."</p>
</blockquote>
<p>è¿™ä¸ªé—®é¢˜çš„æ ¹æºåœ¨äºï¼š</p>
<ul>
<li><code>DOM æ“ä½œçš„å¼€é”€</code>ï¼šæ¯æ¬¡ç¼–è¾‘æ“ä½œéƒ½å¯èƒ½è§¦å‘ DOM çš„æ›´æ–°ï¼Œå½“æ–‡æ¡£å¾ˆå¤§æ—¶ï¼Œè¿™äº›æ›´æ–°ä¼šå˜å¾—å¾ˆæ…¢</li>
<li><code>é‡æ¸²æŸ“çš„æˆæœ¬</code>ï¼šReactã€Vue ç»„ä»¶çš„é‡æ¸²æŸ“å¯èƒ½ä¸å¤Ÿä¼˜åŒ–ï¼Œå¯¼è‡´ä¸å¿…è¦çš„æ›´æ–°</li>
<li><code>å†…å­˜å ç”¨</code>ï¼šå¤§æ–‡æ¡£ä¼šå ç”¨å¤§é‡å†…å­˜ï¼Œç‰¹åˆ«æ˜¯åœ¨ç§»åŠ¨è®¾å¤‡ä¸Š</li>
</ul>
<p>è§£å†³æ€§èƒ½é—®é¢˜éœ€è¦æŒ‰éœ€æ¸²æŸ“ã€è™šæ‹Ÿæ»šåŠ¨ã€ä¼˜åŒ–æ›´æ–°ç­–ç•¥ã€åƒåœ¾å›æ”¶ä¼˜åŒ–ã€é˜²æŠ–å’ŒèŠ‚æµã€‚è¿™äº›ä¼˜åŒ–éƒ½éœ€è¦æ·±å…¥ç†è§£ ProseMirror å’Œæ¡†æ¶çš„å·¥ä½œåŸç†ï¼Œä¸æ˜¯ç®€å•çš„é…ç½®å°±èƒ½è§£å†³çš„ã€‚</p>
<h4 data-id="heading-11">è·¨æµè§ˆå™¨å…¼å®¹æ€§çš„æŒ‘æˆ˜</h4>
<p>ä¸åŒæµè§ˆå™¨å¯¹ content-editableã€selectionã€å¤åˆ¶ç²˜è´´è¡Œä¸ºçš„å¤„ç†å¹¶ä¸ä¸€è‡´ã€‚å…¼å®¹æ€§é—®é¢˜ã€å‰ªè´´æ¿è¡Œä¸ºå·®å¼‚ã€æ ·å¼å†²çªã€é»˜è®¤æ ·å¼è¦†ç›–ã€CSS resetã€å“åº”å¼å¸ƒå±€ç­‰ç­‰ï¼Œéƒ½å®¹æ˜“è®©äººå¤´ç–¼ã€‚</p>
<p>å…·ä½“é—®é¢˜åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>Selection API çš„å·®å¼‚</code>ï¼šä¸åŒæµè§ˆå™¨å¯¹ selection çš„å¤„ç†æ–¹å¼ä¸åŒï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤æ‚èŠ‚ç‚¹ï¼ˆå¦‚è¡¨æ ¼ã€åˆ—è¡¨ï¼‰æ—¶</li>
<li><code>Clipboard API çš„å·®å¼‚</code>ï¼šå¤åˆ¶ç²˜è´´çš„è¡Œä¸ºåœ¨ä¸åŒæµè§ˆå™¨ä¸­å¯èƒ½ä¸åŒ</li>
<li><code>ContentEditable çš„è¡Œä¸ºå·®å¼‚</code>ï¼šä¸åŒæµè§ˆå™¨å¯¹ content-editable å…ƒç´ çš„å¤„ç†æ–¹å¼ä¸åŒ</li>
<li><code>ç§»åŠ¨ç«¯çš„ç‰¹æ®Šé—®é¢˜</code>ï¼šç§»åŠ¨ç«¯çš„é”®ç›˜ã€è§¦æ‘¸äº‹ä»¶ã€è¾“å…¥æ³•ç­‰éƒ½ä¼šå½±å“ç¼–è¾‘ä½“éªŒ</li>
<li><code>æ ·å¼å…¼å®¹æ€§</code>ï¼šä¸åŒæµè§ˆå™¨çš„é»˜è®¤æ ·å¼ä¸åŒï¼Œéœ€è¦å¤§é‡çš„ CSS reset å’Œå…¼å®¹æ€§å¤„ç†</li>
</ul>
<p>è¿™æ­£æ˜¯å¾ˆå¤šäººä¸æƒ³"ä»å¤´æä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨"çš„åŸå› ã€‚</p>
<h4 data-id="heading-12">ç”Ÿäº§ç¯å¢ƒçš„é¢å¤–å¤æ‚åº¦</h4>
<p>å¦‚æœä½ çš„ç¼–è¾‘å™¨ç”¨äºç”Ÿäº§ç³»ç»Ÿï¼Œè¿˜å¯èƒ½æ¶‰åŠæ•°æ®æŒä¹…åŒ–ã€å­˜å‚¨æ ¼å¼é€‰æ‹©ã€è§£æå’Œå›æ˜¾ã€ç‰ˆæœ¬æ§åˆ¶ã€è¿ç§»ã€ä¸åç«¯å…¼å®¹ã€å®‰å…¨ï¼ˆXSSï¼‰ã€å›½é™…åŒ–ã€å¤šè¯­è¨€ã€å­—ä½“ã€æ’ç‰ˆã€æ–¹å‘ï¼ˆRTLï¼‰ç­‰ã€‚</p>
<p>å½“è¿™äº›ç§¯ç´¯èµ·æ¥ï¼Œè¿œè¶…"å‡ è¡Œä»£ç  + ä¸€ä¸ª toolbar + ä¸€ä¸ªå¯Œæ–‡æœ¬è¾“å…¥æ¡†"çš„å¤æ‚åº¦ã€‚</p>
<h3 data-id="heading-13">4. ç¤¾åŒºä¸æ–‡æ¡£ â‰  "è¦†ç›–æ‰€æœ‰åœºæ™¯"</h3>
<p>è™½ç„¶ Tiptap æœ¬èº«æ–‡æ¡£ã€ç¤ºä¾‹ã€ç¤¾åŒºä¸é”™ï¼Œä½†å¯¹äºç‰¹å®šå¤æ‚åœºæ™¯ï¼ˆæ¯”å¦‚"å¸¦è¡¨æ ¼ + åµŒå…¥ + è‡ªå®šä¹‰ node + åä½œ + Undoã€Redo + å¯¼å‡º + æ’ä»¶ç³»ç»Ÿ + è‡ªå®šä¹‰æ ·å¼ã€ä¸»é¢˜ã€å¸ƒå±€ã€å“åº”å¼ã€å¤šç«¯"ï¼‰ï¼Œå‡ ä¹ä¸å­˜åœ¨ä¸€ä¸ª"ç°æˆè§£å†³æ–¹æ¡ˆ"ã€‚</p>
<h4 data-id="heading-14">æ–‡æ¡£çš„å±€é™æ€§</h4>
<p>Tiptap çš„å®˜æ–¹æ–‡æ¡£ä¸»è¦è¦†ç›–äº†åŸºç¡€ç”¨æ³•å’Œå¸¸è§åœºæ™¯ï¼Œä½†å¯¹äºå¤æ‚åœºæ™¯ï¼Œæ–‡æ¡£å¾€å¾€åªèƒ½æä¾›æ–¹å‘æ€§çš„æŒ‡å¯¼ï¼Œå…·ä½“çš„å®ç°ç»†èŠ‚éœ€è¦ä½ è‡ªå·±å»æ¢ç´¢ã€‚</p>
<p>æ¯”å¦‚å¦‚ä½•å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„è¡¨æ ¼ç¼–è¾‘å™¨ï¼Œæ”¯æŒåˆå¹¶å•å…ƒæ ¼ã€è°ƒæ•´åˆ—å®½ç­‰åŠŸèƒ½ï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªä»£ç å—ç¼–è¾‘å™¨ï¼Œæ”¯æŒè¯­æ³•é«˜äº®ã€è¡Œå·ã€ä»£ç æŠ˜å ï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªåä½œç¼–è¾‘ç³»ç»Ÿï¼Œå¤„ç†å†²çªå’ŒåŒæ­¥ï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªå¯¼å‡ºç³»ç»Ÿï¼Œå°†ç¼–è¾‘å™¨å†…å®¹å¯¼å‡ºä¸º PDFã€Word ç­‰æ ¼å¼ï¼Ÿ</p>
<p>è¿™äº›åœºæ™¯çš„æ–‡æ¡£å¾€å¾€ä¸å¤Ÿè¯¦ç»†ï¼Œæˆ–è€…æ ¹æœ¬æ²¡æœ‰æ–‡æ¡£ã€‚ä½ éœ€è¦é˜…è¯»æºç æ¥ç†è§£å·¥ä½œåŸç†ï¼Œåœ¨ GitHub ä¸Šæœç´¢ç›¸å…³çš„ issue å’Œè®¨è®ºï¼Œåœ¨ç¤¾åŒºä¸­æé—®ï¼ˆä½†å¯èƒ½å¾—ä¸åˆ°åŠæ—¶å›å¤ï¼‰ï¼Œè‡ªå·±å®éªŒå’Œè°ƒè¯•ã€‚</p>
<h4 data-id="heading-15">éœ€è¦è‡ªå·±è®¾è®¡çš„éƒ¨åˆ†</h4>
<p>å¤šæ•°æ—¶å€™ä½ å¾—è‡ªå·±è®¾è®¡ Schemaã€Node Viewã€Commandsã€æ’ä»¶ä½“ç³»ã€äº¤äº’é€»è¾‘ã€å‰ç«¯-åç«¯åŒæ­¥ã€æ•°æ®åº“å­˜å‚¨æ–¹æ¡ˆç­‰ã€‚</p>
<p><code>å¤æ‚åº¦è¢«éšè—åœ¨"æºç  + é…ç½® + æ‰©å±• + å…¼å®¹æ€§ + æ€§èƒ½è°ƒä¼˜ + æµ‹è¯• + è¾¹ç•Œ case å¤„ç†"</code> åé¢ã€‚</p>
<h4 data-id="heading-16">ä»"ç”¨ä¸ªåº“å°±å¥½"åˆ°"å‘å¤ªå¤š"çš„è½¬å˜</h4>
<p>å¾ˆå¤šäººåœ¨åˆšå¼€å§‹æŠ±ç€"ç”¨ä¸ªåº“å°±å¥½"çš„æƒ³æ³•ï¼Œä½†ä¸åˆ°çœŸæ­£è¦æ»¡è¶³å¤æ‚éœ€æ±‚çš„æ—¶å€™ï¼Œå°±å‘ç°å‘å¤ªå¤šã€‚</p>
<p>ä½ ä»¥ä¸ºæ’å…¥å›¾ç‰‡å¾ˆç®€å•ï¼Œç»“æœå‘ç°éœ€è¦å¤„ç†ä¸Šä¼ ã€åŠ è½½å¤±è´¥ã€å“åº”å¼ã€æ‹–æ‹½è°ƒæ•´å¤§å°ç­‰å¤šä¸ªé—®é¢˜ã€‚ä½ ä»¥ä¸ºå®ç°è¡¨æ ¼å¾ˆç®€å•ï¼Œç»“æœå‘ç°éœ€è¦å¤„ç†åˆå¹¶å•å…ƒæ ¼ã€åµŒå¥—è¡¨æ ¼ã€å¤åˆ¶ç²˜è´´ç­‰å¤æ‚æƒ…å†µã€‚ä½ ä»¥ä¸ºå®ç°åä½œå¾ˆç®€å•ï¼Œç»“æœå‘ç°éœ€è¦å¤„ç†å†²çªã€åŒæ­¥ã€æƒé™ç­‰å¤šä¸ªé—®é¢˜ã€‚</p>
<p>æœ‰äººç”šè‡³å»ºè®®ï¼Œå¦‚æœä½ çš„éœ€æ±‚å¾ˆåŸºç¡€ï¼ˆåªæ˜¯ç®€å•æ–‡å­— + ç²—ä½“æ–œä½“ + åˆ—è¡¨ + å°‘é‡å›¾ç‰‡ï¼‰ï¼Œç”¨ Markdown ç¼–è¾‘å™¨ + è½»é‡å¯Œæ–‡æœ¬æˆ–ç®€æ˜“é…ç½®åè€Œæ›´ç¨³ã€‚</p>
<h3 data-id="heading-17">5. å¿ƒç†é¢„æœŸ vs ç°å®è½åœ°</h3>
<p>å¾ˆå¤šäº§å“ç»ç†æˆ–ä¸ç†Ÿæ‚‰å¯Œæ–‡æœ¬åº•å±‚çš„äººï¼Œä¼šæŠŠå¯Œæ–‡æœ¬ç¼–è¾‘å™¨å½“æˆ"è½»é‡ç‰ˆ Wordã€Google Docsã€æ‰€è§å³æ‰€å¾—ç¼–è¾‘å™¨"ã€‚ä½†äº‹å®æ˜¯ï¼Œæµè§ˆå™¨é‡Œçš„ contenteditable + å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå—é™äº DOMã€Selectionã€æ ·å¼ã€å¤šç«¯å·®å¼‚ã€å¤åˆ¶ç²˜è´´è¡Œä¸ºã€HTML â†’ Model â†’ HTML çš„ round-tripã€æ ‡å‡†å…¼å®¹æ€§ã€æ€§èƒ½ã€æ’ä»¶ç”Ÿæ€ç­‰ç­‰ã€‚</p>
<h4 data-id="heading-18">Word çº§åˆ«çš„åŠŸèƒ½éœ€è¦ Word çº§åˆ«çš„æŠ•å…¥</h4>
<p>è¦åšåˆ°"åƒ Word é‚£ä¹ˆå¼ºå¤§åˆç¨³å®š"ï¼Œå°±ç®—ç”¨äº† Tiptapï¼Œä¹Ÿè‡³å°‘è¦æŠ•å…¥éå¸¸å¤šå¼€å‘ + æµ‹è¯• + å…¼å®¹ + ä¼˜åŒ– + ç»´æŠ¤æˆæœ¬ã€‚</p>
<p>Word çš„è¡¨æ ¼ç¼–è¾‘å™¨æ˜¯å‡ åå¹´çš„ç§¯ç´¯ï¼Œè€Œ Web ç¼–è¾‘å™¨è¦å®ç°ç±»ä¼¼åŠŸèƒ½éœ€è¦ä»é›¶å¼€å§‹ã€‚Word çš„åä½œåŠŸèƒ½æ˜¯ Microsoft å›¢é˜Ÿå¤šå¹´ç ”å‘çš„ç»“æœï¼Œè€Œ Web ç¼–è¾‘å™¨è¦å®ç°ç±»ä¼¼åŠŸèƒ½éœ€è¦è‡ªå·±å®ç°æˆ–é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡ã€‚Word çš„å¯¼å‡ºåŠŸèƒ½æ”¯æŒå¤šç§æ ¼å¼ï¼Œè€Œ Web ç¼–è¾‘å™¨è¦å®ç°ç±»ä¼¼åŠŸèƒ½éœ€è¦é›†æˆå¤šä¸ªåº“æˆ–è‡ªå·±å®ç°ã€‚</p>
<h4 data-id="heading-19">"è·³è¿›å…”å­æ´"çš„é£é™©</h4>
<p>è¿™æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šä»å¤´æçš„äººï¼ˆå°¤å…¶ä¸šåŠ¡æ–¹ã€éç¼–è¾‘å™¨ä¸“æ³¨å›¢é˜Ÿï¼‰æœ€ç»ˆæ”¾å¼ƒçš„åŸå› ã€‚ç”šè‡³æœ‰å¼€å‘è€…åœ¨è®¨è®ºé‡Œç›´è¨€ï¼šæ„å»ºå¯Œæ–‡æœ¬ç¼–è¾‘å™¨"åƒè·³è¿› rabbit hole"ï¼ˆå…”å­æ´ï¼‰ï¼Œé£é™©å¤ªå¤§ï¼Œä¸é è°±ã€‚</p>
<p>è¿™ä¸ªæ¯”å–»å¾ˆå½¢è±¡ï¼šä½ ä»¥ä¸ºåªæ˜¯æŒ–ä¸€ä¸ªå°æ´ï¼Œç»“æœå‘ç°ä¸‹é¢æ˜¯ä¸€ä¸ªæ·±ä¸è§åº•çš„å…”å­æ´ï¼Œè¶ŠæŒ–è¶Šæ·±ï¼Œè¶ŠæŒ–è¶Šå¤æ‚ï¼Œæœ€ç»ˆå‘ç°è‡ªå·±æŠ•å…¥çš„æ—¶é—´å’Œç²¾åŠ›è¿œè¶…é¢„æœŸã€‚</p>
<h2 data-id="heading-20">å¯¹å¼€å‘è€…ã€é¡¹ç›®ç»ç†ã€å†…å®¹ç”Ÿäº§è€…æ¥è¯´ï¼šä¸ºä»€ä¹ˆä¾æ—§å®¹æ˜“è¢«éš¾ä½</h2>
<p>å¯¹äºä¸åŒç±»å‹çš„è§’è‰²ï¼ŒTiptap çš„å›°éš¾ç‚¹å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œä½†éƒ½ä¼šé¢ä¸´ä¸€äº›å…±åŒçš„æŒ‘æˆ˜ã€‚</p>
<h3 data-id="heading-21">å†…å®¹å­˜å‚¨æ ¼å¼çš„å¤æ‚æ€§</h3>
<p>ä½ éœ€è¦è€ƒè™‘ HTMLã€JSONã€markdownã€è‡ªå®šä¹‰æ ¼å¼ã€‚Tiptap æ”¯æŒ JSONã€HTML è¾“å‡ºã€å›æ˜¾ï¼Œä½†å¦‚æœä½ è¦è‡ªå®šä¹‰èŠ‚ç‚¹ï¼ˆä¾‹å¦‚ embedã€å›¾æ–‡æ··æ’ã€ç‰¹æ®Š blockã€meta æ•°æ®ã€AI-è¾…åŠ©å†…å®¹ï¼‰ï¼Œé‚£å°±éœ€è¦ä½ è®¾è®¡ schemaï¼Œå¤„ç†åºåˆ—åŒ–ã€ååºåˆ—åŒ–é€»è¾‘ï¼Œä»¥åŠå‰åç«¯å¦‚ä½•ç»Ÿä¸€å¤„ç†è¿™äº›å†…å®¹ç»“æ„ã€‚</p>
<h4 data-id="heading-22">æ ¼å¼é€‰æ‹©çš„æƒè¡¡</h4>
<p>æ¯ç§æ ¼å¼éƒ½æœ‰å…¶ä¼˜ç¼ºç‚¹ï¼š</p>
<ul>
<li><code>HTML</code>ï¼šæœ€ç›´è§‚ï¼Œä½†å¯èƒ½åŒ…å«å¤§é‡å†—ä½™ä¿¡æ¯ï¼Œä¸åˆ©äºå­˜å‚¨å’Œä¼ è¾“</li>
<li><code>JSON</code>ï¼šç»“æ„åŒ–å¥½ï¼Œæ˜“äºå¤„ç†ï¼Œä½†éœ€è¦è‡ªå®šä¹‰è§£æé€»è¾‘</li>
<li><code>Markdown</code>ï¼šç®€æ´ï¼Œä½†è¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼Œä¸é€‚åˆå¤æ‚å†…å®¹</li>
<li><code>è‡ªå®šä¹‰æ ¼å¼</code>ï¼šæœ€çµæ´»ï¼Œä½†éœ€è¦è‡ªå·±å®ç°æ‰€æœ‰é€»è¾‘</li>
</ul>
<p>é€‰æ‹©å“ªç§æ ¼å¼éœ€è¦æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚æ¥å†³å®šï¼Œè¿™ä¸ªå†³å®šä¼šå½±å“æ•´ä¸ªç³»ç»Ÿçš„æ¶æ„ã€‚</p>
<h4 data-id="heading-23">Schema è®¾è®¡çš„æŒ‘æˆ˜</h4>
<p>è®¾è®¡ä¸€ä¸ªå¥½çš„ schema éœ€è¦è€ƒè™‘å“ªäº›èŠ‚ç‚¹ç±»å‹æ˜¯å¿…éœ€çš„ã€èŠ‚ç‚¹ä¹‹é—´çš„åŒ…å«å…³ç³»ã€èŠ‚ç‚¹çš„å±æ€§ã€èŠ‚ç‚¹çš„é»˜è®¤æ ·å¼å’Œè¡Œä¸ºã€å¦‚ä½•æ‰©å±• schema ä»¥æ”¯æŒæœªæ¥éœ€æ±‚ã€‚è¿™éœ€è¦æ·±å…¥ç†è§£ä½ çš„å†…å®¹æ¨¡å‹å’Œä¸šåŠ¡éœ€æ±‚ã€‚</p>
<p>Tiptap æ–‡æ¡£ä¸­è™½æœ‰åŸºç¡€ APIï¼Œä½†è‡ªå®šä¹‰è¶Šæ·±ï¼Œä½ è¦å†™çš„ä¸œè¥¿å°±è¶Šå¤šã€‚</p>
<h3 data-id="heading-24">å¯è§†åŒ–ä¸å‘å¸ƒçš„å¤šä¸ªå±‚é¢</h3>
<p>å¦‚æœä½ å¸Œæœ›æ”¯æŒå¯è§†åŒ–ã€å¯å‘å¸ƒï¼ˆç±»ä¼¼å…¬ä¼—å·ã€ç¤¾äº¤åª’ä½“ã€Markdown è½¬ HTMLã€æ–‡ç« å¯¼å‡ºã€é™æ€é¡µé¢ï¼‰ï¼Œä½ è¿˜å¯èƒ½æ¶‰åŠæ ·å¼æ¸²æŸ“ã€å“åº”å¼ã€å…¼å®¹æ€§ã€å¤šç«¯é€‚é…ã€HTML sanitationã€å®‰å…¨ï¼ˆXSSï¼‰ã€å›¾ç‰‡ã€èµ„æºç®¡ç†ã€SEOã€å¯¼å‡ºä¸é¢„è§ˆç­‰ã€‚</p>
<p>æ¯ä¸ªå±‚é¢éƒ½éœ€è¦æ·±å…¥çš„å·¥ä½œï¼Œä¸æ˜¯ç®€å•çš„é…ç½®å°±èƒ½è§£å†³çš„ã€‚</p>
<h3 data-id="heading-25">åä½œåŠŸèƒ½çš„æŒ‡æ•°çº§å¤æ‚åº¦</h3>
<p>è‹¥ä½ è¿˜æƒ³åŠ åä½œï¼ˆå¤šäººç¼–è¾‘ã€å®æ—¶ã€å†å²ã€è¯„è®ºã€AI è¾…åŠ©ã€ç‰ˆæœ¬ã€å¯¼å‡ºã€å›æ»šï¼‰ï¼Œé‚£å¤æ‚åº¦å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚</p>
<h4 data-id="heading-26">åŸºç¡€æ¡†æ¶åªæ˜¯å¼€å§‹</h4>
<p>å³ä¾¿ Tiptap + Y.js + WebSocketã€åç«¯ï¼Œä¹Ÿåªæ˜¯åŸºç¡€æ¡†æ¶ã€‚ä½ å¯èƒ½è¿˜éœ€è¦é¢å¤–å¤„ç†å†²çªè§£å†³ã€æ•°æ®åŒæ­¥ã€æƒé™ç®¡ç†ã€undoã€redoã€ç‰ˆæœ¬å­˜å‚¨ã€åˆå¹¶é€»è¾‘ã€å¹¶å‘æ§åˆ¶ã€UIã€UX ä½“éªŒã€å¤šç«¯åä½œï¼ˆæ¡Œé¢ã€ç§»åŠ¨ï¼‰ç­‰ã€‚</p>
<h4 data-id="heading-27">"è¦ä¹ˆä½ è‡ªå·±å†™ï¼Œè¦ä¹ˆå¦¥å"</h4>
<p>å¾ˆå¤šç»†èŠ‚æ˜¯"è¦ä¹ˆä½ è‡ªå·±å†™ï¼Œè¦ä¹ˆå¦¥å"ã€‚å¦‚æœä½ éœ€è¦æ˜¾ç¤ºå…¶ä»–ç”¨æˆ·çš„å…‰æ ‡ä½ç½®ï¼Œä½ éœ€è¦è‡ªå·±å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚å¦‚æœä½ éœ€è¦æ”¯æŒè¯„è®ºå’Œå»ºè®®ç¼–è¾‘ï¼Œä½ éœ€è¦è‡ªå·±å®ç°è¿™äº›åŠŸèƒ½ã€‚å¦‚æœä½ éœ€è¦æ”¯æŒç‰ˆæœ¬å†å²ï¼Œä½ éœ€è¦è‡ªå·±å®ç°ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿã€‚</p>
<p>äº‹å®è¯æ˜ï¼Œå“ªæ€•æ˜¯ç»éªŒä¸°å¯Œçš„å›¢é˜Ÿä¹Ÿè¦èŠ±è´¹ç›¸å½“å¤šæ—¶é—´ã€‚</p>
<h3 data-id="heading-28">æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒçš„æŒç»­æŒ‘æˆ˜</h3>
<p>å½“æ–‡æ¡£è¾ƒå¤§ã€æ ¼å¼å¤æ‚ã€åŒ…å«å¤šç§èŠ‚ç‚¹ã€åµŒå…¥ã€å›¾ç‰‡ã€è¡¨æ ¼ã€æ ·å¼æ—¶ï¼Œè¦ä¿è¯ç¼–è¾‘ä½“éªŒæµç•…ã€ä¸å¡é¡¿ã€ä¸é—ªçƒã€ä¸å»¶è¿Ÿï¼Œæ˜¯ä¸ªæŒ‘æˆ˜ã€‚</p>
<p>æ€§èƒ½é—®é¢˜å¯èƒ½å‡ºç°åœ¨è¾“å…¥å»¶è¿Ÿã€æ»šåŠ¨å¡é¡¿ã€æ¸²æŸ“å»¶è¿Ÿã€å†…å­˜å ç”¨ã€CPU å ç”¨ç­‰å¤šä¸ªç»´åº¦ã€‚</p>
<p>å°¤å…¶å¯¹ç§»åŠ¨ç«¯ã€ä½æ€§èƒ½è®¾å¤‡ï¼Œæˆ–è€…éœ€è¦å³æ—¶æ¸²æŸ“ã€åŒæ­¥ã€é¢„è§ˆæ—¶ï¼Œå¡é¡¿ä½“éªŒå¯¹ç”¨æˆ·å‹å¥½åº¦ä¼¤å®³å¾ˆå¤§ã€‚ç§»åŠ¨ç«¯çš„æŒ‘æˆ˜åŒ…æ‹¬æ€§èƒ½æ›´æœ‰é™ã€è§¦æ‘¸äº¤äº’ä¸é¼ æ ‡äº¤äº’ä¸åŒã€é”®ç›˜è¾“å…¥ä½“éªŒä¸åŒã€ç½‘ç»œå¯èƒ½ä¸ç¨³å®šã€ç”µæ± ç»­èˆªéœ€è¦è€ƒè™‘ç­‰ã€‚</p>
<h3 data-id="heading-29">è¿™äº›æŒ‘æˆ˜æ˜¯æ ¸å¿ƒéœ€æ±‚ï¼Œä¸æ˜¯è¾¹ç¼˜ç”¨ä¾‹</h3>
<p>å¦‚æœä½ æœªæ¥å¯èƒ½ä¼šåš"å¤æ‚å†…å®¹ + ç¤¾äº¤ã€å…¬ä¼—å·ã€æ–‡ç« ã€AI è¾…åŠ©ã€å¯èƒ½å¤šäººåä½œã€æ’ç‰ˆå¯¼å‡º"çš„ç³»ç»Ÿï¼Œè¿™äº›æŒ‘æˆ˜å¹¶ä¸æ˜¯è¾¹ç¼˜ç”¨ä¾‹ï¼Œè€Œå¯èƒ½æ˜¯æ ¸å¿ƒéœ€æ±‚ã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½ç®€å•åœ°"å…ˆåšä¸€ä¸ªç®€å•ç‰ˆæœ¬ï¼Œä»¥åå†ä¼˜åŒ–"ï¼Œè€Œæ˜¯éœ€è¦åœ¨è®¾è®¡é˜¶æ®µå°±è€ƒè™‘è¿™äº›æŒ‘æˆ˜ã€‚</p>
<h2 data-id="heading-30">æ€»ç»“ï¼šä¸ºä»€ä¹ˆ"å¯¹å¾ˆå¤šäººæ¥è¯´ï¼ŒTiptap å¾ˆéš¾"</h2>
<h3 data-id="heading-31">å¯Œæ–‡æœ¬ç¼–è¾‘æœ¬èº«æ˜¯é«˜åº¦å¤æ‚çš„é—®é¢˜</h3>
<p>æ ¼å¼å¤šæ ·ï¼ˆæ–‡æœ¬ã€æ®µè½ã€åˆ—è¡¨ã€æ ·å¼ã€åµŒå…¥ã€åª’ä½“ã€è¡¨æ ¼...ï¼‰+ ç”¨æˆ·æœŸæœ›é«˜ï¼ˆåƒ Wordã€Google Docsã€CMS ç¼–è¾‘é‚£æ ·è‡ªç„¶ï¼‰+ æµè§ˆå™¨ã€DOMã€æ ‡å‡†ã€å…¼å®¹æ€§ã€æ€§èƒ½å„ç±»é™åˆ¶ï¼Œè¿™äº›å› ç´ å åŠ åœ¨ä¸€èµ·ï¼Œä½¿å¾—å¯Œæ–‡æœ¬ç¼–è¾‘æˆä¸ºä¸€ä¸ªé«˜åº¦å¤æ‚çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-32">åº•å±‚å¤æ‚åº¦ä¾ç„¶å­˜åœ¨</h3>
<p>è™½ç„¶ Tiptap å°è£…äº†ä¸€äº›åŸºç¡€ï¼Œä½†åº•å±‚ä»æ˜¯å¤æ‚ï¼Œé«˜åº¦å®šåˆ¶ã€å¤æ‚åŠŸèƒ½ã€å®ç”¨çº§éœ€æ±‚åŸºæœ¬éƒ½éœ€è¦"æ·±å…¥ ProseMirror + è‡ªå·±å®ç°"ã€‚Tiptap é™ä½äº†å…¥é—¨é—¨æ§›ï¼Œä½†æ²¡æœ‰æ¶ˆé™¤å¤æ‚æ€§ã€‚</p>
<h3 data-id="heading-33">æˆæœ¬å‹åŠ›å¤§</h3>
<p>å¯¹å¤§å¤šæ•°ä¸­å°å›¢é˜Ÿã€ä¸ªäººå¼€å‘è€…ã€å¸Œæœ›å¿«é€Ÿä¸Šçº¿çš„äººæ¥è¯´ï¼ŒçœŸæ­£æŠŠå¯Œæ–‡æœ¬ç¼–è¾‘å™¨"åšå¥½ã€åšç¨³ã€åšå¯ç»´æŠ¤"ï¼Œå·¥æ—¶ã€æµ‹è¯•ã€å…¼å®¹æ€§ã€æ€§èƒ½ã€ç»´æŠ¤ã€è¾¹ç¼˜ case å…¨éƒ½å‹å¾—äººå–˜ä¸è¿‡æ°”ã€‚è¿™ä¸ªæˆæœ¬å¾€å¾€è¢«ä½ä¼°ã€‚</p>
<h3 data-id="heading-34">ç»´æŠ¤æˆæœ¬æŒç»­ç´¯ç§¯</h3>
<p>å½“éœ€æ±‚ä¸æ–­å˜åŒ–ï¼ˆæ–°åŠŸèƒ½ã€æ–°æ ¼å¼ã€æ–°åª’ä½“ã€æ–°åä½œã€æ–°å¯¼å‡ºã€æ–°å…¼å®¹ï¼‰çš„æ—¶å€™ï¼Œç»´æŠ¤æˆæœ¬ä¼šä¸æ–­ç´¯ç§¯ï¼Œå¾ˆå¤šäººæœ€ç»ˆå‘ç°"å†ä¹Ÿä¸æƒ³ç¢°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨"ã€‚è¿™æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œä¸æ˜¯ä¸€æ¬¡æ€§çš„æŠ•å…¥ã€‚</p>
<h3 data-id="heading-35">å¿ƒç†é¢„æœŸä¸ç°å®çš„å·®è·</h3>
<p>å¾ˆå¤šäººå¯¹å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„æœŸæœ›æ˜¯"åƒ Word é‚£æ ·å¼ºå¤§"ï¼Œä½†ç°å®æ˜¯ Web ç¼–è¾‘å™¨çš„èƒ½åŠ›æœ‰é™ï¼Œè¦å®ç°ç±»ä¼¼åŠŸèƒ½éœ€è¦å¤§é‡æŠ•å…¥ã€‚è¿™ä¸ªå·®è·å¯¼è‡´äº†å¾ˆå¤šé¡¹ç›®çš„å¤±è´¥ã€‚</p>
<h2 data-id="heading-36">å»ºè®®ï¼šåŸºäºå®é™…éœ€æ±‚çš„å®è·µè·¯å¾„</h2>
<p>è™½ç„¶ Tiptap å¾ˆéš¾ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ä½ ä¸åº”è¯¥ä½¿ç”¨å®ƒã€‚å…³é”®æ˜¯è¦æœ‰æ­£ç¡®çš„é¢„æœŸå’Œåˆç†çš„è§„åˆ’ã€‚</p>
<h3 data-id="heading-37">1. å…ˆåš Minimal Viable Editor (MVE)</h3>
<p>ç”¨ Tiptap + StarterKit åšåŸºç¡€ï¼ˆæ®µè½ã€æ ‡é¢˜ã€ç²—ä½“ã€æ–œä½“ã€åˆ—è¡¨ã€é“¾æ¥ã€å›¾ç‰‡ï¼‰ã€‚å¦‚æœä½ ä¸»è¦æ˜¯å‘æ–‡ã€å†™æ–‡ç« ã€æœ‰ä¸€å®šæ ·å¼è¦æ±‚ï¼Œè¿™è¶³å¤Ÿã€‚ä¸è¦ä¸€å¼€å§‹å°±è¯•å›¾å®ç°æ‰€æœ‰åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-38">2. æ ¹æ®éœ€è¦é€æ­¥æ‰©å±•</h3>
<p>åªå½“ç¡®å®éœ€è¦"åµŒå…¥ã€è¡¨æ ¼ã€ç‰¹æ®Šå¸ƒå±€ã€å¯¼å‡ºã€åä½œã€AI æ’ä»¶ã€è‡ªå®šä¹‰ node"æ—¶ï¼Œå†è€ƒè™‘æ‰©å±•ï¼Œè€Œä¸æ˜¯ä¸€å¼€å§‹å°±è®¾è®¡"ä¸‡èƒ½ + æ‰€æœ‰å¯èƒ½åŠŸèƒ½"ã€‚æ¯ä¸ªåŠŸèƒ½çš„æ·»åŠ éƒ½éœ€è¦è¯„ä¼°å…¶æˆæœ¬å’Œæ”¶ç›Šã€‚</p>
<h3 data-id="heading-39">3. æŠŠ Schemaã€æ•°æ®ç»“æ„è®¾è®¡åšå¥½</h3>
<p>é€‰å¥½å†…å®¹å­˜å‚¨æ ¼å¼ï¼ˆJSONã€HTMLã€è‡ªå®šä¹‰ + metadataï¼‰ï¼Œå¹¶ç¡®ä¿å‰åç«¯ã€å¯¼å…¥å¯¼å‡ºã€å…¼å®¹ã€æœªæ¥æ‰©å±•éƒ½è€ƒè™‘è¿›å»ã€‚ä¸€ä¸ªå¥½çš„æ•°æ®ç»“æ„è®¾è®¡å¯ä»¥é¿å…å¾ˆå¤šåç»­é—®é¢˜ã€‚</p>
<h3 data-id="heading-40">4. æƒè¡¡æ”¶ç›Š vs æˆæœ¬</h3>
<p>å¯¹äºä¸€äº›ä¸å¸¸ç”¨æˆ–å¤æ‚åŠŸèƒ½ï¼ˆæ¯”å¦‚å¤æ‚è¡¨æ ¼ã€æ‹–æ‹½å¸ƒå±€ã€å¤šäººåä½œã€ç‰ˆæœ¬æ§åˆ¶ã€å¤æ‚å¯¼å‡º...ï¼‰è¦è¯„ä¼°æ¸…æ¥šï¼Œæ˜¯ä¸æ˜¯å€¼å¾—æŠ•å…¥ï¼Œæˆ–è€…å¯ä»¥é€šè¿‡ Markdown + æ’ä»¶ + åå¤„ç†å¯¼å‡ºæ¥æ›¿ä»£ã€‚ä¸æ˜¯æ‰€æœ‰åŠŸèƒ½éƒ½éœ€è¦åœ¨ç¼–è¾‘å™¨ä¸­å®ç°ã€‚</p>
<h3 data-id="heading-41">5. åšå¥½æµ‹è¯•ä¸å›é€€ã€å…¼å®¹ç­–ç•¥</h3>
<p>åŒ…æ‹¬æµè§ˆå™¨å…¼å®¹ã€ç§»åŠ¨ç«¯ã€è‡ªå®šä¹‰æ ·å¼ã€themeã€å†…å®¹å¯¼å‡ºã€æ¸…æ´—ï¼ˆsanitizeï¼‰ã€æœªæ¥è¿ç§»ã€å‡çº§ã€‚è¿™äº›å·¥ä½œè™½ç„¶ç¹çï¼Œä½†å¯¹äºç”Ÿäº§ç¯å¢ƒæ˜¯å¿…éœ€çš„ã€‚</p>
<h3 data-id="heading-42">6. è€ƒè™‘æ›¿ä»£æ–¹æ¡ˆ</h3>
<p>å¦‚æœä½ çš„éœ€æ±‚ç›¸å¯¹ç®€å•ï¼Œè€ƒè™‘ä½¿ç”¨ Markdown ç¼–è¾‘å™¨ + åå¤„ç†çš„æ–¹å¼ï¼Œå¯èƒ½æ¯”ç›´æ¥ä½¿ç”¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ›´ç®€å•ã€æ›´ç¨³å®šã€‚Markdown è™½ç„¶è¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼Œä½†å¯¹äºå¾ˆå¤šåœºæ™¯å·²ç»è¶³å¤Ÿï¼Œè€Œä¸”å®ç°å’Œç»´æŠ¤æˆæœ¬è¦ä½å¾—å¤šã€‚</p>
<h3 data-id="heading-43">7. å¯»æ±‚ä¸“ä¸šå¸®åŠ©</h3>
<p>å¦‚æœé¡¹ç›®é¢„ç®—å…è®¸ï¼Œè€ƒè™‘å¯»æ±‚ä¸“ä¸šçš„ç¼–è¾‘å™¨å¼€å‘å›¢é˜Ÿæˆ–å’¨è¯¢æœåŠ¡çš„å¸®åŠ©ã€‚å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯ä¸€ä¸ªä¸“ä¸šé¢†åŸŸï¼Œæœ‰ç»éªŒçš„äººå¯ä»¥å¸®ä½ é¿å…å¾ˆå¤šå‘ã€‚</p>
<h2 data-id="heading-44">æ€»ç»“</h2>
<p>Tiptap æ˜¯ä¸€ä¸ªä¼˜ç§€çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ¡†æ¶ï¼Œå®ƒç¡®å®é™ä½äº†å¼€å‘é—¨æ§›ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒç®€å•ã€‚ç†è§£å…¶å¤æ‚æ€§ï¼Œæœ‰æ­£ç¡®çš„é¢„æœŸï¼Œåšå¥½è§„åˆ’ï¼Œæ˜¯æˆåŠŸä½¿ç”¨ Tiptap çš„å…³é”®ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨è€ƒè™‘ä½¿ç”¨ Tiptapï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°è¯„ä¼°é¡¹ç›®çš„å¤æ‚åº¦å’Œæˆæœ¬ï¼Œåšå‡ºæ˜æ™ºçš„å†³ç­–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ£€æµ‹å¼€å‘è€…å·¥å…·æ˜¯å¦æ‰“å¼€ï¼Ÿè¿™å‡ ç§æ–¹æ³•è®©é»‘å®¢æ— å¤„éå½¢ğŸ¤£]]></title>    <link>https://juejin.cn/post/7581619505584128051</link>    <guid>https://juejin.cn/post/7581619505584128051</guid>    <pubDate>2025-12-09T02:54:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581619505584128051" data-draft-id="7581374664327315507" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ£€æµ‹å¼€å‘è€…å·¥å…·æ˜¯å¦æ‰“å¼€ï¼Ÿè¿™å‡ ç§æ–¹æ³•è®©é»‘å®¢æ— å¤„éå½¢ğŸ¤£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-09T02:54:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ£€æµ‹å¼€å‘è€…å·¥å…·æ˜¯å¦æ‰“å¼€ï¼Ÿè¿™å‡ ç§æ–¹æ³•è®©é»‘å®¢æ— å¤„éå½¢ğŸ¤£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:54:42.000Z" title="Tue Dec 09 2025 02:54:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5be74d43fd534de5a4dd96ea18a2075a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853682&amp;x-signature=OiOSXoPShXsr5SztLkLwb%2Fh3A4I%3D" alt="image.png" loading="lazy"/></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ¥äº†ğŸ˜ã€‚</p>
<p><strong>å‰ç«¯ä»£ç åœ¨æµè§ˆå™¨é‡Œæ˜¯è£¸å¥”çš„ã€‚</strong>â€”â€”è¿™å‡ ä¹æ˜¯æ‰€æœ‰å¼€å‘è€…çš„å…±è¯†ã€‚</p>
<p>åªè¦ç”¨æˆ·æŒ‰ä¸€ä¸‹ <code>F12</code>ï¼Œä½ çš„æºç ã€ä½ çš„æ¥å£ã€ä½ çš„æ•°æ®ç»“æ„ï¼Œå…¨éƒ¨ä¸€è§ˆæ— ä½™ã€‚é»‘å®¢å¯ä»¥ä¿®æ”¹ä½ çš„å˜é‡ï¼Œè„šæœ¬å°å­å¯ä»¥åˆ·ä½ çš„æ¥å£ï¼Œç«å“å¯ä»¥åˆ†æä½ çš„é€»è¾‘ã€‚</p>
<p>å¾ˆå¤šè€æ¿ä¼šé—®ï¼šèƒ½ä¸èƒ½ç¦æ­¢ç”¨æˆ·æ‰“å¼€æ§åˆ¶å°ï¼Ÿ</p>
<p>é€šå¸¸æˆ‘ä»¬çš„å›ç­”æ˜¯ï¼šä¸èƒ½ã€‚æµè§ˆå™¨æ˜¯ç”¨æˆ·çš„åœ°ç›˜ï¼Œæˆ‘ä»¬æ— æƒå¹²æ¶‰ã€‚</p>
<p>ä½†æ˜¯ï¼Œ <strong>ç¦æ­¢ä¸äº†ï¼Œä¸ä»£è¡¨æˆ‘ä»¬æ£€æµ‹ä¸åˆ°ã€‚</strong></p>
<p>å¦‚æœåœ¨æ£€æµ‹åˆ°ç”¨æˆ·æ‰“å¼€ DevTools çš„é‚£ä¸€ç¬é—´ï¼Œæˆ‘ä»¬ç«‹é©¬<strong>æ¸…ç©ºæ•æ„Ÿæ•°æ®</strong>ã€<strong>åœæ­¢è§†é¢‘æ’­æ”¾</strong>ã€æˆ–è€…<strong>æ— é™ debugger å¡æ­»é¡µé¢</strong>ï¼Œæ˜¯ä¸æ˜¯å°±èƒ½æå¤§åœ°æé«˜æ”»å‡»è€…çš„é—¨æ§›ï¼ŸğŸ¤”</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°±æ¥åˆ†äº«å‡ ç§åˆ©ç”¨æµè§ˆå™¨APIæŠ€å·§å®ç°çš„ <strong>DevTools æ£€æµ‹æŠ€æœ¯</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-0"><strong>1.åˆ©ç”¨ <code>debugger</code> çš„æ—¶é—´å·®</strong></h4>
<p>è¿™æ˜¯æœ€å¤è€ã€æœ€æš´åŠ›ï¼Œä½†ä¹Ÿæœ€æœ‰æ•ˆçš„æ–¹æ³•ä¹‹ä¸€ã€‚</p>
<p>åŸç†ï¼š</p>
<p>å½“ DevTools æ‰“å¼€ï¼Œå¹¶ä¸”å¼€å¯äº†æ–­ç‚¹è°ƒè¯•åŠŸèƒ½æ—¶ï¼Œä»£ç æ‰§è¡Œåˆ° debugger è¯­å¥ä¼šæš‚åœã€‚</p>
<p>è€Œä¸æ‰“å¼€ DevTools æ—¶ï¼Œdebugger è¯­å¥ä¼šè¢«æµè§ˆå™¨å¿½ç•¥ï¼Œä»£ç ç¬é—´æ‰§è¡Œè¿‡å»ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è®°å½• <code>debugger</code> è¯­å¥å‰åçš„<strong>æ—¶é—´æˆ³</strong>ã€‚å¦‚æœå·®å€¼è¿‡å¤§ï¼Œè¯´æ˜ä»£ç è¢«æš‚åœäº†â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼ŒDevTools è‚¯å®šæ˜¯å¼€ç€çš„ã€‚</p>
<p><strong>å…·ä½“ä»£ç ğŸ‘‡ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">checkDevTools</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> start = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  
  <span class="hljs-comment">// æ ¸å¿ƒï¼šè¿™å°±å¥½æ¯”åœ¨è·¯ä¸Šè®¾ä¸ªå¡</span>
  <span class="hljs-keyword">debugger</span>; 
  
  <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  
  <span class="hljs-comment">// å¦‚æœæš‚åœæ—¶é—´è¶…è¿‡ 100msï¼Œåˆ¤å®šä¸ºæœ‰äººåœ¨è°ƒè¯•</span>
  <span class="hljs-keyword">if</span> (end - start &gt; <span class="hljs-number">100</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è­¦å‘Šï¼šæ£€æµ‹åˆ°å¼€å‘è€…å·¥å…·å·²æ‰“å¼€ï¼"</span>);
    <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ‰§è¡Œä½ çš„é˜²å¾¡é€»è¾‘ï¼š</span>
    <span class="hljs-comment">// window.location.reload(); </span>
    <span class="hljs-comment">// clearSensitiveData();</span>
  }
}

<span class="hljs-comment">// æä¸ªå®šæ—¶å™¨ï¼Œæ¯ç§’æŸ¥å²—ä¸€æ¬¡</span>
<span class="hljs-built_in">setInterval</span>(checkDevTools, <span class="hljs-number">1000</span>);
</code></pre>
<p>ä¼˜ç‚¹æ˜¯ç®€å•ç²—æš´ï¼Œå¯¹ä»˜å°ç™½æœ‰æ•ˆã€‚</p>
<p>ç¼ºç‚¹çš„è¯ æœ‰ç‚¹æ‰°æ°‘ğŸ˜–ã€‚å¦‚æœæ”»å‡»è€…ç¦ç”¨äº†æ–­ç‚¹åŠŸèƒ½ï¼ˆDeactivate breakpointsï¼‰ï¼Œæˆ–è€…è®¾ç½®âš™ä¸­é…ç½®äº†Never pause hereï¼Œè¿™æ‹›å°±åºŸäº†ã€‚</p>
<hr/>
<h4 data-id="heading-1"><strong>2.åˆ©ç”¨ <code>console.log</code> çš„å¯¹è±¡æ‡’åŠ è½½</strong></h4>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸éªšçš„æ£€æµ‹æ–¹æ³•ï¼Œåˆ©ç”¨äº† Chrome æ§åˆ¶å°çš„ä¸€ä¸ªç‰¹æ€§ï¼š<strong>å¯¹è±¡æ±‚å€¼ï¼ˆObject Evaluationï¼‰</strong> ã€‚</p>
<p>åŸç†ï¼š</p>
<p>å½“ä½ æ‰§è¡Œ console.log(obj) æ—¶ï¼Œæµè§ˆå™¨ä¸ºäº†æ€§èƒ½ï¼Œå¹¶ä¸ä¼šç«‹åˆ»æŠŠ obj çš„æ‰€æœ‰å±æ€§æ‰“å°å‡ºæ¥ã€‚å®ƒåªæ‰“å°ä¸€ä¸ªå¼•ç”¨ã€‚</p>
<p>åªæœ‰å½“æ§åˆ¶å°çœŸçš„æ˜¯æ‰“å¼€çŠ¶æ€ï¼Œå¹¶ä¸”éœ€è¦æ˜¾ç¤ºå†…å®¹æ—¶ï¼Œæµè§ˆå™¨æ‰ä¼šå»è¯»å–è¿™ä¸ªå¯¹è±¡çš„å±æ€§ï¼ˆgettersï¼‰ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç»™ä¸€ä¸ªå¯¹è±¡å®šä¹‰ä¸€ä¸ª <code>getter</code>ï¼ˆè¯»å–å™¨ï¼‰ã€‚å¦‚æœè¿™ä¸ª <code>getter</code> è¢«è§¦å‘äº†ï¼Œå°±è¯´æ˜<strong>æœ‰ä¸€ä¸ªè§‚å¯Ÿè€…ï¼ˆDevToolsï¼‰æ­£åœ¨çœ‹å®ƒ</strong>ã€‚</p>
<p><strong>ç›´æ¥ä¸Šä»£ç ğŸ‘‡ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> element = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();

<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(element, <span class="hljs-string">'id'</span>, {
  <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-comment">// åªæœ‰å½“ DevTools æ‰“å¼€æ—¶ï¼Œæµè§ˆå™¨å°è¯•è·å– element.id æ¥æ˜¾ç¤ºè¯¦æƒ…</span>
    <span class="hljs-comment">// è¿™ä¸ª getter æ‰ä¼šæ‰§è¡Œ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŠ“åˆ°ä½ äº†ï¼DevTools æ˜¯å¼€ç€çš„ï¼'</span>);
    
    <span class="hljs-comment">// æ‰§è¡Œé˜²å¾¡é€»è¾‘</span>
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·å…³é—­å¼€å‘è€…å·¥å…·ç»§ç»­æµè§ˆï¼'</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">'detected'</span>;
  }
});

<span class="hljs-comment">// å®šæ—¶æ‰“å°è¿™ä¸ª element</span>
<span class="hljs-comment">// å¦‚æœæ§åˆ¶å°æ²¡å¼€ï¼Œlog åªæ˜¯é™é»˜æ‰§è¡Œï¼Œä¸ä¼šè§¦å‘ getter</span>
<span class="hljs-comment">// å¦‚æœæ§åˆ¶å°å¼€äº†ï¼Œlog ä¸ºäº†æ˜¾ç¤º element çš„è¯¦æƒ…ï¼Œä¼šè§¦å‘ getter</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(element);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">clear</span>(); <span class="hljs-comment">// åˆ·å±æ¸…ç©ºï¼Œé˜²æ­¢ç”¨æˆ·å‘ç°</span>
}, <span class="hljs-number">1000</span>);
</code></pre>
<hr/>
<p>ä¼˜ç‚¹æ˜¯éšè”½æ€§æå¼ºï¼Œä¸éœ€è¦ <code>debugger</code>ï¼Œä¸ä¼šæ‰“æ–­ä»£ç æ‰§è¡Œã€‚ç¼ºç‚¹å‘¢ï¼Ÿä¸¥é‡ä¾èµ–æµè§ˆå™¨å®ç°ã€‚Chrome ä¸Šæ•ˆæœæœ€å¥½ï¼ŒFirefox/Safari çš„è¡Œä¸ºå¯èƒ½ä¸åŒã€‚</p>
<hr/>
<h4 data-id="heading-2"><strong>3.æ— é™ Debugger (é˜²è°ƒè¯•)</strong></h4>
<p>è¿™å…¶å®ä¸æ˜¯æ£€æµ‹ï¼Œè€Œæ˜¯åŠé€€ã€‚</p>
<p>å¾ˆå¤šç½‘ç«™ï¼ˆæ¯”å¦‚æŸäº›è§†é¢‘ç«™ã€åŠ å¯†å°è¯´ç«™ï¼‰ï¼Œä¼šç”¨ä¸€ç§è®©é»‘å®¢æå…¶æ¶å¿ƒçš„æ‰‹æ®µï¼š<strong>åªè¦ä½ æ•¢å¼€æ§åˆ¶å°ï¼Œæˆ‘å°±è®©ä½ å¡æ­»ã€‚</strong></p>
<p>åŸç†ï¼š</p>
<p>åˆ©ç”¨ Function.constructor æˆ– evalï¼Œåœ¨ä¸€ä¸ªé«˜é¢‘å¾ªç¯é‡Œä¸æ–­ç”Ÿæˆæ–°çš„ debuggerã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// æ”¾åœ¨ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°é‡Œ</span>
(<span class="hljs-keyword">function</span> <span class="hljs-title function_">anonymous</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªç”Ÿæˆ debugger çš„å‡½æ•°</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">debuggerLoop</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// é€šè¿‡æ„é€ å‡½æ•°ç”Ÿæˆ debuggerï¼Œé˜²æ­¢æºç è¢«é™æ€æœç´¢åˆ°</span>
      (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">"debugger"</span>))(); 
    } <span class="hljs-keyword">catch</span> (e) {}
  }

  <span class="hljs-comment">// åªè¦æ²¡è¢«æ‹¦æˆªï¼Œæˆ‘å°±ä¸€ç›´é€’å½’è°ƒç”¨</span>
  <span class="hljs-comment">// ä¹Ÿå¯ä»¥é…åˆ setInterval</span>
  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">debuggerLoop</span>();
  }, <span class="hljs-number">50</span>); <span class="hljs-comment">// æ¯ 50ms ç‚¸ä½ ä¸€æ¬¡ğŸ¤£</span>
})();
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95b25ac655bc43f3b46e61f5047b6d30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853682&amp;x-signature=W2t%2FIZzyiwQLlfrTGmqzhbPxZMI%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸€æ—¦ä½ æ‰“å¼€ F12ï¼Œä½ çš„æµè§ˆå™¨å°±ä¼šç«‹åˆ»è¢«æ— æ•°ä¸ªæ–­ç‚¹æš‚åœã€‚ç‚¹å‡»ç»§ç»­è¿è¡Œï¼Ÿæ²¡ç”¨ï¼Œ50ms åä¸‹ä¸€ä¸ªæ–­ç‚¹åˆæ¥äº†ã€‚ä½ çš„é¡µé¢åŸºæœ¬å¤„äºå‡æ­»çŠ¶æ€ï¼Œæ ¹æœ¬æ²¡æ³•æ“ä½œ DOM æˆ–å‘è¯·æ±‚ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½ åœ¨è°ƒè¯•æŸäº›ç½‘ç«™æ—¶ï¼Œä¼šå‘ç° <code>Sources</code> é¢æ¿é‡Œå…¨æ˜¯ <code>VMxxxx</code> å¼€å¤´çš„åŒ¿åè„šæœ¬ï¼Œè€Œä¸”ä¸€ç›´å¡åœ¨ <code>debugger</code> ä¸Šã€‚</p>
<hr/>
<h4 data-id="heading-3"><strong>å¦‚ä½•ç»•è¿‡å‘¢ï¼ŸğŸ¤”</strong></h4>
<p>ä½œä¸ºè¡¥å……ï¼Œæˆ‘å¿…é¡»å‘Šè¯‰ä½ ï¼Œè¿™äº›é˜²å¾¡<strong>éƒ½ä¸æ˜¯æ— æ•Œçš„</strong>ã€‚</p>
<p><strong>å¯¹äºæ— é™ Debuggerï¼š</strong></p>
<ol>
<li><strong>ç¦ç”¨æ–­ç‚¹</strong>ï¼šåœ¨ Chrome DevTools é‡Œç‚¹å‡»é‚£ä¸ªç¦ç”¨æ‰€æœ‰æ–­ç‚¹çš„å›¾æ ‡ï¼Œä¸–ç•Œç¬é—´æ¸…å‡€äº†ã€‚</li>
</ol>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eb18ae20bbb452f9ac906bb4fa0c82b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853682&amp;x-signature=JP0Vx2iUWpG7igBV971gsR%2FC7WY%3D" alt="image.png" loading="lazy"/></p>
<ol start="2">
<li><strong>æ¡ä»¶æ–­ç‚¹</strong>ï¼šåœ¨é‚£ä¸ª <code>debugger</code> è¡Œå³é”® -&gt; åœç”¨æ–­ç‚¹ã€‚</li>
</ol>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17b75a3b47e340a0bb1f118572367334~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853682&amp;x-signature=Q0qCbHYJlla8dBibXIy3XHSfSjc%3D" alt="image.png" loading="lazy"/></p>
<ol start="3">
<li><strong>æœ¬åœ°æ›¿æ¢</strong>ï¼šç”¨ Chrome çš„ æœ¬åœ°æ›¿æ¢åŠŸèƒ½ï¼ŒæŠŠé‚£æ®µ JS ä»£ç æ›¿æ¢æˆæœ¬åœ°ç©ºæ–‡ä»¶ã€‚</li>
</ol>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4f16fb8bcdf4bb092e764b0aabcc5af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853682&amp;x-signature=inXbW7V5BQUA7XBACLC08Bg%2Btk8%3D" alt="image.png" loading="lazy"/></p>
<p>å¯¹äºGetter æ£€æµ‹å‘¢ï¼ŸğŸ¤”</p>
<p>é»‘å®¢å¯ä»¥ç›´æ¥ Hook console.logï¼Œè®©å®ƒå¤±æ•ˆğŸ˜–ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// ä½ çš„æ£€æµ‹é€»è¾‘å°±åºŸäº†</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">console</span>.<span class="hljs-property">log</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {}; 
</code></pre>
<hr/>
<p>ä»»ä½•å‰ç«¯å®‰å…¨æ‰‹æ®µï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ <strong>é˜²å›å­ï¼Œé˜²ä¸äº†å°äºº</strong>ï¼Œæˆ–è€…è¯´æ˜¯<strong>æé«˜æ”»å‡»é—¨æ§›</strong>ã€‚</p>
<p>åœ¨æµè§ˆå™¨è¿™ä¸ªå®Œå…¨å¼€æ”¾çš„ç¯å¢ƒé‡Œï¼Œæ²¡æœ‰ä»€ä¹ˆç§˜å¯†èƒ½çœŸæ­£è—å¾—ä½ã€‚</p>
<p><strong>ä¸è¦æŠŠæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆæ¯”å¦‚é‡‘é¢è®¡ç®—ã€æƒé™æ ¡éªŒï¼‰æ”¾åœ¨å‰ç«¯ã€‚</strong></p>
<p>è¿™äº›æ£€æµ‹æ‰‹æ®µï¼Œæ›´å¤šæ˜¯ç”¨æ¥ä¿æŠ¤<strong>çŸ¥è¯†äº§æƒ</strong>ï¼ˆé˜²æ­¢å°ç™½æ‰’ä»£ç ï¼‰æˆ–è€…<strong>åçˆ¬è™«</strong>ï¼ˆæ£€æµ‹åˆ°è°ƒè¯•å°±åœæ­¢æ¸²æŸ“æ•°æ®ï¼‰ã€‚</p>
<p><strong>å­¦ä¼šè¿™å‡ æ‹›ï¼Œèµ·ç èƒ½æŒ¡ä½ 90% çš„è„šæœ¬å°å­ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83eae55c2df64ab283a86d5162441714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853682&amp;x-signature=1xxNUyL4wG5IZ6cg7xW3%2FcA%2FqHI%3D" alt="è°¢è°¢å¤§å®¶.gif" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gitæäº¤ä¿¡æ¯å¤ªä¹±ï¼ŸAIä¸€é”®ç¾åŒ–ï¼ä¸€è¡Œå‘½ä»¤æ‹¯æ•‘ä½ çš„é¡¹ç›®å†å²ğŸš€]]></title>    <link>https://juejin.cn/post/7581428845683179563</link>    <guid>https://juejin.cn/post/7581428845683179563</guid>    <pubDate>2025-12-09T07:35:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581428845683179563" data-draft-id="7581408984415977491" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gitæäº¤ä¿¡æ¯å¤ªä¹±ï¼ŸAIä¸€é”®ç¾åŒ–ï¼ä¸€è¡Œå‘½ä»¤æ‹¯æ•‘ä½ çš„é¡¹ç›®å†å²ğŸš€"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-09T07:35:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”è¯—"/> <meta itemprop="url" content="https://juejin.cn/user/712139266339694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gitæäº¤ä¿¡æ¯å¤ªä¹±ï¼ŸAIä¸€é”®ç¾åŒ–ï¼ä¸€è¡Œå‘½ä»¤æ‹¯æ•‘ä½ çš„é¡¹ç›®å†å²ğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/712139266339694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”è¯—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T07:35:54.000Z" title="Tue Dec 09 2025 07:35:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‘ç°äº†ä¸€ä¸ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ff%2Fgit-rewrite-commits" target="_blank" title="https://github.com/f/git-rewrite-commits" ref="nofollow noopener noreferrer">git-rewrite-commits</a> çš„ä»“åº“ï¼Œç›®å‰ 1.1k ğŸŒŸ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f1fe86aff7244a5976971c5b4a25b12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZSQ6K-X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870554&amp;x-signature=dEm312DTNp7b4bPZr3TUdf2l0y0%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥ä½¿ç”¨ ai æ¥é‡å†™å·²ç»æäº¤çš„ git commit ä¿¡æ¯ï¼Œ<strong>ä¿®æ”¹åéœ€è¦å¼ºåˆ¶æäº¤</strong></p>
<p>è¿™å¯¹äºä¹‹å‰ git commit ä¿¡æ¯å†™çš„ä¹±ä¸ƒå…«ç³Ÿçš„é¡¹ç›®ï¼Œåˆä¸æƒ³æ‰‹åŠ¨æ”¹ï¼Œç°åœ¨ä¸€è¡Œå‘½ä»¤å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼</p>
<p>å†™è¿™ä¸ªæ–‡ç« çš„åŸå› æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ff%2Fgit-rewrite-commits" target="_blank" title="https://github.com/f/git-rewrite-commits" ref="nofollow noopener noreferrer">git-rewrite-commits</a> æˆ‘è§‰å¾—å¥¹è¿™ä¸ªä½¿ç”¨è¯´æ˜å†™çš„ä¸æ˜¯å¾ˆå¥½æ‡‚ï¼Œä½†è¿˜æ˜¯å»ºè®®é˜…è¯»ä¸‹ï¼</p>
<h2 data-id="heading-0">å‡†å¤‡å·¥ä½œ</h2>
<p>å¯ä»¥ä½¿ç”¨ OpenAI GPT æˆ–æœ¬åœ° Ollama æ¨¡å‹è¿›è¡Œ AI é©±åŠ¨çš„æäº¤ä¿¡æ¯ç”Ÿæˆ</p>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Ollama æ¨¡å‹è¿›è¡Œ AI é©±åŠ¨çš„æäº¤ä¿¡æ¯ç”Ÿæˆ</p>
<p>é¦–å…ˆä½ éœ€è¦å®‰è£… Ollama <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.ollama.com%2Fquickstart" target="_blank" title="https://docs.ollama.com/quickstart" ref="nofollow noopener noreferrer">çŒ›å‡»å‚è€ƒå®˜æ–¹æ–‡æ¡£å®‰è£…</a></p>
<p>ç„¶å Ollama ç°åœ¨æœ‰ä¸€ä¸ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.ollama.com%2Fcloud" target="_blank" title="https://docs.ollama.com/cloud" ref="nofollow noopener noreferrer">Cloud äº‘æ¨¡å‹</a>ï¼Œå¤§æ¦‚å°±æ˜¯ä½¿ç”¨ Ollama è°ƒç”¨äº‘ç«¯æ¨¡å‹è¾¾æˆå’Œæœ¬åœ°è¿è¡Œä¸€æ ·çš„æ•ˆæœã€‚</p>
<p>è¿è¡Œäº‘æ¨¡å‹éœ€è¦ä¸€ä¸ª ollama.com ä¸Šçš„è´¦æˆ·ï¼Œæ‰§è¡Œ <code>ollama signin</code> ç™»å½•æˆ–åˆ›å»ºè´¦æˆ·ï¼Œç™»å½•å®Œæˆåç‚¹å‡»å¤´åƒ-&gt;è®¾ç½®ï¼Œå¯ä»¥çœ‹åˆ°é™é¢æƒ…å†µ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bef29bd75d6405087e6680eb64b49df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZSQ6K-X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870554&amp;x-signature=KGLdfIx3JUCf6ijWXol%2FSoq1Dd0%3D" alt="image.png" loading="lazy"/></p>
<p>äº‘æ¨¡å‹åè¾¹ä¼šæœ‰æ ‡è¯†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5320cb60121d42c4a0a7404aabb329cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZSQ6K-X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870554&amp;x-signature=NxIFShBmFVUgf4G3t7i70KvvtgE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">å¼€å§‹ä½¿ç”¨</h2>
<pre><code class="hljs language-bash" lang="bash">npx git-rewrite-commits --provider ollama --model qwen3-coder:480b-cloud --min-quality-score 10 --language zh --verbose
</code></pre>









































<table><thead><tr><th>å‚æ•°</th><th>ç®€å†™</th><th>å€¼</th><th>ä½œç”¨è¯´æ˜</th></tr></thead><tbody><tr><td><code>--provider</code></td><td>æ— </td><td><code>ollama</code></td><td>æŒ‡å®š AI æœåŠ¡æä¾›å•†ï¼Œé€‰æ‹©ä½¿ç”¨æœ¬åœ°è¿è¡Œçš„ Ollama æœåŠ¡å¤„ç†è¯·æ±‚</td></tr><tr><td><code>--model</code></td><td><code>-m</code></td><td><code>qwen3-coder:480b-cloud</code></td><td>æŒ‡å®šä½¿ç”¨çš„ AI æ¨¡å‹åç§°ï¼Œæ­¤å¤„ä¸º Qwen3 Coder äº‘ç«¯ç‰ˆæœ¬</td></tr><tr><td><code>--min-quality-score</code></td><td>æ— </td><td><code>10</code></td><td>è®¾ç½®è´¨é‡è¯„åˆ†é˜ˆå€¼ï¼Œæäº¤è¯„åˆ†ä½äºæ­¤å€¼çš„å°†è¢«é‡å†™ï¼Œè®¾ç½®ä¸º 10 è¡¨ç¤ºå¼ºåˆ¶é‡å†™æ‰€æœ‰æäº¤</td></tr><tr><td><code>--language</code></td><td><code>-l</code></td><td><code>zh</code></td><td>è®¾ç½®ç”Ÿæˆæäº¤ä¿¡æ¯çš„è¯­è¨€ï¼Œæ­¤å¤„ä¸ºä¸­æ–‡ï¼ˆç®€ä½“ï¼‰</td></tr><tr><td><code>--verbose</code></td><td><code>-v</code></td><td>æ— ï¼ˆæ ‡å¿—å‚æ•°ï¼‰</td><td>å¯ç”¨è¯¦ç»†è¾“å‡ºæ¨¡å¼ï¼Œæ˜¾ç¤ºå¤„ç†è¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ã€è¯„åˆ†ç»“æœã€AI å“åº”å†…å®¹ç­‰</td></tr></tbody></table>
<p>å…¶ä»–è¿˜æœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥æ‰§è¡Œ <code>npx git-rewrite-commits --help</code> æŸ¥çœ‹</p>
<p>ä»¥æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvaebe%2Fblog" target="_blank" title="https://github.com/vaebe/blog" ref="nofollow noopener noreferrer">blog</a> é¡¹ç›®ä¸ºä¾‹</p>
<ol>
<li>
<p>è¾“å…¥ y ç¡®è®¤
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a02bc06fdb5c45939b6beb7c5b91bb3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZSQ6K-X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870554&amp;x-signature=DSOSifQdc3W0xqDsaJYwk8SnZWM%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p>å¼€å§‹æ‰§è¡Œ
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7be3fa573a042248833163032f7d776~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZSQ6K-X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870554&amp;x-signature=gDmWANALt7m4Kb5FU06XnZr2oaU%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p>æ‰§è¡Œç»“æŸä¼šè®©ä½ ç¡®è®¤æ˜¯å¦é‡å†™ git commit è®°å½•ï¼Œè¾“å…¥ y ç¡®è®¤åå¼€å§‹æ‰§è¡Œ
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e733dc70ad0468c911359f3bdb42091~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZSQ6K-X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870554&amp;x-signature=G5vkQh1fpiOhqWfduk82RCB059I%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p>é‡å†™å®Œæˆåä¼šæç¤ºä½ éœ€è¦å¼ºåˆ¶æ¨é€
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32f35931f22c49cfb60c4fe10be67017~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZSQ6K-X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870554&amp;x-signature=lcA1pQLZxnUfmyq5LiTApB2p%2Bq0%3D" alt="image.png" loading="lazy"/>
ç¿»è¯‘ä¸€ä¸‹ï¼š</p>
<ol>
<li>æŸ¥çœ‹æ›´æ”¹ï¼šgit log --oneline</li>
<li>å¦‚æœæ»¡æ„ï¼Œå¼ºåˆ¶æ¨é€ï¼šgit push --force-with-lease</li>
<li>å¦‚æœå‡ºç°é—®é¢˜ï¼Œæ¢å¤ï¼šgit reset --hard backup-main-1765263878856</li>
<li>å®Œæˆåæ¸…ç†å¤‡ä»½ï¼šgit branch -D backup-main-176526387885</li>
</ol>
</li>
<li>
<p>æ‰§è¡Œ <code>git push --force-with-lease</code> å¼€å§‹å¼ºåˆ¶æ¨é€
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7eae3c13e6c14d8abe5b9bc375546b37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZSQ6K-X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870554&amp;x-signature=BHZAo%2BOYn6vTbMGezZGj31bLYqM%3D" alt="image.png" loading="lazy"/>
æ²¡æœ‰æƒé™ä¼šæœ‰è¿™ç§æç¤ºï¼Œä¿®æ”¹ä»“åº“æ¨é€æƒé™åé‡æ–°æ¨é€å³å¯</p>
</li>
</ol>
<h2 data-id="heading-2">æ€»ç»“</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ff%2Fgit-rewrite-commits" target="_blank" title="https://github.com/f/git-rewrite-commits" ref="nofollow noopener noreferrer">git-rewrite-commits</a> æ˜¯ä¸€ä¸ªå¯ä»¥ä½¿ç”¨ ai æ¥é‡å†™å·²ç»æäº¤çš„ git commit ä¿¡æ¯çš„å·¥å…·ï¼Œå¯¹äºä¹‹å‰é¡¹ç›®ä¸­ git æäº¤ä¿¡æ¯ä¸è§„èŒƒåˆä¸æƒ³æ‰‹åŠ¨å»ä¿®æ”¹æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¸€è¡Œå‘½ä»¤è§£å†³ï¼Œååˆ†æ–¹ä¾¿ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Bean Searcher é‡â€œé¬¼â€è®°ï¼šä¸ºä½•æˆ‘çš„æŸ¥è¯¢æ¡ä»¶å·å·è·‘è¿›äº† HAVINGï¼Ÿ]]></title>    <link>https://juejin.cn/post/7581437632855081000</link>    <guid>https://juejin.cn/post/7581437632855081000</guid>    <pubDate>2025-12-09T06:42:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581437632855081000" data-draft-id="7581437632854458408" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Bean Searcher é‡â€œé¬¼â€è®°ï¼šä¸ºä½•æˆ‘çš„æŸ¥è¯¢æ¡ä»¶å·å·è·‘è¿›äº† HAVINGï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Java,ORM"/> <meta itemprop="datePublished" content="2025-12-09T06:42:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‡è§ä»£ç "/> <meta itemprop="url" content="https://juejin.cn/user/2928754709235800"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Bean Searcher é‡â€œé¬¼â€è®°ï¼šä¸ºä½•æˆ‘çš„æŸ¥è¯¢æ¡ä»¶å·å·è·‘è¿›äº† HAVINGï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2928754709235800/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‡è§ä»£ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T06:42:21.000Z" title="Tue Dec 09 2025 06:42:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    107
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸€è¡Œä»£ç å®ç°å¤æ‚æŸ¥è¯¢çš„ä¼˜é›…èƒŒåï¼Œè—ç€ SQL è¯­ä¹‰çš„ä¸¥æ ¼å®ˆå«è€…ã€‚å½“ä½ ä¸äº†è§£å®ƒçš„è§„åˆ™æ—¶ï¼Œå®ƒå°±ä¼šç”¨çœ‹ä¼¼è¯¡å¼‚çš„è¡Œä¸ºæé†’ä½ ã€‚</p>
</blockquote>
<h2 data-id="heading-0">1. ä¼˜é›…æ¡†æ¶çš„æ„å¤–éš¾é¢˜</h2>
<p>Bean Searcher åœ¨ Java å¼€å‘è€…ä¸­æ­£è·å¾—è¶Šæ¥è¶Šå¤šçš„å…³æ³¨ã€‚å®ƒè¢«æè¿°ä¸º â€œæ¯” MyBatis å¼€å‘æ•ˆç‡ <strong>å¿« 100 å€</strong> çš„åªè¯» ORMï¼Œå¤©ç”Ÿæ”¯æŒè”è¡¨â€ï¼Œåªéœ€è¦ä¸€è¡Œä»£ç å°±èƒ½å®ç°å¤šè¡¨è”æŸ¥ã€åˆ†é¡µæœç´¢ã€ç»„åˆè¿‡æ»¤ç­‰å¤æ‚åŠŸèƒ½ã€‚</p>
<p>æˆ‘å¾ˆå¿«å°±åœ¨é¡¹ç›®ä¸­åº”ç”¨äº†è¿™ä¸ªæ¡†æ¶ï¼Œå¤„ç†é‚£äº›å¸¸è§„çš„åˆ—è¡¨æŸ¥è¯¢ç¡®å®å¾—å¿ƒåº”æ‰‹ã€‚ç›´åˆ°æˆ‘é‡åˆ°äº†éœ€è¦åˆ†ç»„ç»Ÿè®¡çš„åœºæ™¯ã€‚</p>
<h2 data-id="heading-1">2. é—®é¢˜çš„æ˜¾ç°</h2>
<blockquote>
<p>ä¸ºäº†ä¸šåŠ¡è„±æ•ï¼Œæˆ‘å°†ä¸šåŠ¡è¡¨ç®€åŒ–ä¸ºå­¦æ ¡é‡Œå¸¸ç”¨çš„ è¯¾ç¨‹ã€æ•™å¸ˆã€åˆ†æ•° æ¨¡å‹è¡¨</p>
</blockquote>
<p>æˆ‘çš„éœ€æ±‚å¾ˆæ˜ç¡®ï¼šç»Ÿè®¡æ¯é—¨è¯¾ç¨‹çš„å¹³å‡åˆ†ï¼ŒåŒæ—¶åªå…³æ³¨ç‰¹å®šæ•™å¸ˆæ•™æˆçš„è¯¾ç¨‹ã€‚æˆ‘è®¾è®¡äº†å¦‚ä¸‹ SearchBeanï¼ˆæ£€ç´¢å®ä½“ç±»ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SearchBean(
    tables = "course c, teacher t, score s",
    where = "c.teacher_id = t.id and c.id = s.course_id",
    groupBy = "c.id"   // æŒ‰è¯¾ç¨‹ ID åˆ†ç»„
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AvgScoreVO</span> {

    <span class="hljs-meta">@DbField("c.id")</span>
    <span class="hljs-keyword">private</span> Integer courseId;

    <span class="hljs-meta">@DbField("avg(s.score)")</span>
    <span class="hljs-keyword">private</span> Float averageScore;

    <span class="hljs-meta">@DbField("t.id")</span>  <span class="hljs-comment">// æˆ‘æƒ³ç”¨è¿™ä¸ªå­—æ®µç­›é€‰ç‰¹å®šæ•™å¸ˆçš„è¯¾ç¨‹</span>
    <span class="hljs-keyword">private</span> Integer teacherId;

    <span class="hljs-comment">// çœç•¥getter/setter</span>
}
</code></pre>
<p>åœ¨æ§åˆ¶å™¨ä¸­ï¼Œæˆ‘åƒå¾€å¸¸ä¸€æ ·ä½¿ç”¨ä¸€è¡Œä»£ç è¿›è¡ŒæŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping("/avgScores")</span>
<span class="hljs-keyword">public</span> List&lt;AvgScoreVO&gt; <span class="hljs-title function_">getAvgScores</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> beanSearcher.searchAll(AvgScoreVO.class);
}
</code></pre>
<blockquote>
<p>è¿™é‡Œæˆ‘ä½¿ç”¨äº† Bean Searcher å®˜æ–¹æ–‡æ¡£ä¸­æ¨èçš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fbs.zhxu.cn%2Fguide%2Fusage%2Fothers.html" target="_blank" title="https://bs.zhxu.cn/guide/usage/others.html" ref="nofollow noopener noreferrer"><strong>è‡ªåŠ¨æ¥æ”¶å‰ç«¯è¯·æ±‚å‚æ•°</strong></a> çš„æœºåˆ¶ã€‚æ‰€ä»¥è¿™é‡ŒçœŸçš„åªå‰©ä¸€è¡Œä»£ç äº†ã€‚</p>
</blockquote>
<p>é€»è¾‘çœ‹èµ·æ¥æ— æ‡ˆå¯å‡»ï¼šæŒ‰è¯¾ç¨‹åˆ†ç»„ï¼Œè®¡ç®—å¹³å‡åˆ†ï¼ŒåŒæ—¶ç­›é€‰å‡ºæŒ‡å®šæ•™å¸ˆçš„è¯¾ç¨‹ã€‚æˆ‘ç”¨ HTTP å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76f944b95db04b52912302caaa512773~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YGH6KeB5Luj56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765873186&amp;x-signature=KzIFUF6w0ij6%2FfrwaSu5VdckJ9U%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶è€Œè¯·æ±‚å‘èµ·åï¼Œæˆ‘å´å¾—åˆ°äº†è¿™æ ·çš„é”™è¯¯ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">SQLSyntaxErrorException: <span class="hljs-literal">Unknown</span> <span class="hljs-keyword">column</span> <span class="hljs-string">'t.id'</span> <span class="hljs-keyword">in</span> <span class="hljs-string">'having clause'</span>
</code></pre>
<p>ç”Ÿæˆçš„ SQL å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">select</span> c.id c_0, <span class="hljs-built_in">avg</span>(s.score) c_1, t.id c_2
<span class="hljs-keyword">from</span> course c, teacher t, score s
<span class="hljs-keyword">where</span> c.teacher_id <span class="hljs-operator">=</span> t.id <span class="hljs-keyword">and</span> c.id <span class="hljs-operator">=</span> s.course_id
<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> c.id
<span class="hljs-keyword">HAVING</span> c_2 <span class="hljs-operator">=</span> ?  <span class="hljs-comment">-- é—®é¢˜åœ¨è¿™é‡Œï¼</span>
</code></pre>
<p>ä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆæˆ‘çš„Â <code>teacherId</code>Â æ¡ä»¶è¢«æ”¾åœ¨Â <code>HAVING</code>Â å­å¥è€Œä¸æ˜¯Â <code>WHERE</code>Â å­å¥ï¼ŸæŒ‰ç…§ SQL æ‰§è¡Œé¡ºåºï¼Œ<code>WHERE</code>Â åœ¨åˆ†ç»„å‰æ‰§è¡Œï¼Œ<code>HAVING</code>Â åœ¨åˆ†ç»„åæ‰§è¡Œã€‚å°†æ•™å¸ˆç­›é€‰æ¡ä»¶æ”¾åœ¨Â <code>HAVING</code>Â ä¸­ä¸ä»…é€»è¾‘é”™è¯¯ï¼Œè€Œä¸”æ˜¯ SQL è¯­æ³•é”™è¯¯ï¼</p>
<h2 data-id="heading-2">3. æ·±å…¥æ¢ç´¢ï¼šå®˜æ–¹æ–‡æ¡£çš„çº¿ç´¢</h2>
<p>é¢å¯¹è¿™ä¸ªçœ‹ä¼¼è¯¡å¼‚çš„é—®é¢˜ï¼Œæˆ‘å¼€å§‹ä»”ç»†æŸ¥é˜… Bean Searcher çš„å®˜æ–¹æ–‡æ¡£ã€‚åœ¨å…¶ <a href="https://link.juejin.cn?target=https%3A%2F%2Fbs.zhxu.cn%2Fguide%2Fbean%2Ffields.html" target="_blank" title="https://bs.zhxu.cn/guide/bean/fields.html" ref="nofollow noopener noreferrer"><strong>æ¡ä»¶å±æ€§</strong></a> ç« èŠ‚ï¼Œæˆ‘å‘ç°äº†å…³äºÂ <code>@DbField</code>Â æ³¨è§£çš„Â <code>cluster</code>Â å±æ€§çš„å…³é”®è¯´æ˜ã€‚</p>
<p><code>cluster</code>Â å±æ€§æœ‰ä¸‰ç§å–å€¼ï¼š</p>

























<table><thead><tr><th>å–å€¼</th><th>å«ä¹‰</th><th>GroupBy æ—¶æ¡ä»¶ç”Ÿæˆä½ç½®</th></tr></thead><tbody><tr><td><code>Cluster.TRUE</code></td><td>è¡¨æ˜è¯¥å±æ€§æ˜¯èšåˆå­—æ®µ</td><td>åªä¼šç”ŸæˆÂ <code>HAVING</code>Â æ¡ä»¶</td></tr><tr><td><code>Cluster.FALSE</code></td><td>è¡¨æ˜è¯¥å±æ€§æ˜¯éèšåˆå­—æ®µ</td><td>åªä¼šç”ŸæˆÂ <code>WHERE</code>Â æ¡ä»¶</td></tr><tr><td><code>Cluster.AUTO</code></td><td>é»˜è®¤å€¼ï¼Œè‡ªåŠ¨æ¨æ–­</td><td>æ ¹æ®è§„åˆ™æ¨æ–­</td></tr></tbody></table>
<p>æ–‡æ¡£è¿›ä¸€æ­¥è§£é‡Šäº†Â <code>Cluster.AUTO</code>Â çš„æ¨æ–­é€»è¾‘ï¼š</p>
<ul>
<li>å½“æ¡ä»¶å±æ€§ <strong>åœ¨Â <code>groupBy</code>Â åˆ—è¡¨ä¸­æ—¶</strong>ï¼Œè‡ªåŠ¨æ¨æ–­ä¸ºÂ <code>FALSE</code>ï¼ˆç”ŸæˆÂ <code>WHERE</code>Â æ¡ä»¶ï¼‰</li>
<li>å½“æ¡ä»¶å±æ€§ <strong>ä¸åœ¨Â <code>groupBy</code>Â åˆ—è¡¨ä¸­</strong>ï¼Œå¹¶ä¸” <strong>è¯¥å±æ€§åŒæ—¶æ˜¯ Java ç±»ä¸­çš„å­—æ®µ</strong> æ—¶ï¼Œè‡ªåŠ¨æ¨æ–­ä¸ºÂ <code>TRUE</code>ï¼ˆç”ŸæˆÂ <code>HAVING</code>Â æ¡ä»¶ï¼‰</li>
<li>å…¶ä»–æƒ…å†µéƒ½æ¨æ–­ä¸ºÂ <code>FALSE</code></li>
</ul>
<p>è¿™å°±æ˜¯å…³é”®ï¼æˆ‘çš„Â <code>teacherId</code>Â å­—æ®µä¸åœ¨Â <code>groupBy</code>Â åˆ—è¡¨ä¸­ï¼Œä½†å®ƒæ˜¯ Java ç±»ä¸­çš„å­—æ®µï¼Œå› æ­¤è¢«è‡ªåŠ¨æ¨æ–­ä¸ºÂ <code>Cluster.TRUE</code>ï¼Œæ¡ä»¶è¢«ç”Ÿæˆåœ¨Â <code>HAVING</code>Â å­å¥ä¸­ã€‚</p>
<h2 data-id="heading-3">4. è®¾è®¡è€…çš„ç²¾å¦™è€ƒé‡</h2>
<p>ä¸ºä»€ä¹ˆ Bean Searcher çš„ä½œè€…è¦è¿™æ ·è®¾è®¡ï¼Ÿèµ·åˆæˆ‘è§‰å¾—è¿™æ˜¯åç›´è§‰çš„ï¼Œä½†æ·±å…¥æ€è€ƒåï¼Œæˆ‘å‘ç°è¿™èƒŒåæœ‰ç€ä¸¥è°¨çš„é€»è¾‘ã€‚</p>
<p>é¦–å…ˆï¼Œéœ€è¦ç†è§£ Bean Searcher ä¸­ä¸¤ç§ä¸åŒç±»å‹ æ¡ä»¶å±æ€§ çš„åŒºåˆ«ï¼š</p>
<ul>
<li><strong>å­—æ®µå±æ€§</strong>ï¼šå£°æ˜åœ¨ Java ç±» (<code>@SearchBean</code>) ä¸­çš„å­—æ®µï¼Œæ—¢å¯ä»¥æ ¹æ®å‚æ•°ç”Ÿæˆæ¡ä»¶ï¼Œåˆç”¨äº <strong>æ‰¿è½½æŸ¥è¯¢ç»“æœ</strong>ï¼Œä¼šå‡ºç°åœ¨Â <code>SELECT</code>Â åˆ—è¡¨ä¸­</li>
<li><strong>é™„åŠ å±æ€§</strong>ï¼šé€šè¿‡Â <code>@SearchBean.fields</code>Â å®šä¹‰çš„å±æ€§ï¼Œä¸æ‰¿è½½æŸ¥è¯¢ç»“æœï¼Œ<strong>ä¸ä¼š</strong>å‡ºç°åœ¨Â <code>SELECT</code>Â åˆ—è¡¨ä¸­ï¼Œä»…ä½œä¸ºåŠ¨æ€æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨</li>
</ul>
<p>å½“æ‰§è¡Œå¸¦æœ‰Â <code>GROUP BY</code>Â çš„æŸ¥è¯¢æ—¶ï¼Œ<strong>SQL-92</strong>Â å’ŒÂ <strong>SQL:1999</strong> è§„èŒƒé‡Œéƒ½æœ‰ä¸€ä¸ªä¸¥æ ¼çš„è¯­ä¹‰è§„åˆ™ï¼š<strong><code>SELECT</code>Â åˆ—è¡¨ä¸­çš„ä»»ä½•éèšåˆåˆ—ï¼Œå¿…é¡»å‡ºç°åœ¨Â <code>GROUP BY</code>Â å­å¥ä¸­</strong>ã€‚</p>
<p>Bean Searcher çš„è®¾è®¡è€…é¢ä¸´ä¸€ä¸ªæŠ‰æ‹©ï¼šå½“æ¡†æ¶æ£€æµ‹åˆ°ä¸€ä¸ª"æ™®é€šJavaå­—æ®µ"å‡ºç°åœ¨åˆ†ç»„æŸ¥è¯¢ä¸­ï¼Œä½†åˆä¸å‚ä¸åˆ†ç»„æ—¶ï¼Œè¯¥å¦‚ä½•å¤„ç†ï¼Ÿ</p>
<p>å¦‚æœæ¡†æ¶å°†å…¶æ¡ä»¶ç”Ÿæˆåœ¨Â <code>WHERE</code>Â å­å¥ï¼Œè¿™åœ¨è¯­ä¹‰ä¸Šæ˜¯æ­£ç¡®çš„ï¼Œä½†å¦‚æœå¼€å‘è€…æœ¬æ„æ˜¯æƒ³ç”¨è¿™ä¸ªå­—æ®µè¿‡æ»¤åˆ†ç»„åçš„ç»“æœï¼Œæ¡†æ¶å°†å…¶æ”¾åœ¨Â <code>WHERE</code>Â å°±ä¼šå¯¼è‡´é€»è¾‘é”™è¯¯ã€‚</p>
<p><code>Cluster.AUTO</code>Â é€‰æ‹©æ¨æ–­ä¸ºÂ <code>TRUE</code>ï¼Œå®é™…ä¸Šæ˜¯ä¸€ç§"å®‰å…¨ä¾§"è®¾è®¡ã€‚è¿™ç§æ¨æ–­å¾ˆå¤§æ¦‚ç‡ä¼šå¯¼è‡´è¿è¡Œæ—¶æ•°æ®åº“æŠ¥é”™ï¼Œä½†è¿™ä¸ª<strong>é”™è¯¯ä¼šå¼ºåˆ¶å¼€å‘è€…åœä¸‹æ¥æ€è€ƒ</strong>ï¼š"æˆ‘åˆ°åº•æƒ³ç”¨è¿™ä¸ªå­—æ®µåšä»€ä¹ˆï¼Ÿ"</p>
<p>ç„¶åå¼€å‘è€…å¿…é¡»åšå‡ºæ˜ç¡®çš„å†³å®šï¼š</p>
<ul>
<li>å¦‚æœè¿™ä¸ªå­—æ®µåªæ˜¯ç”¨äºåŠ¨æ€ç”Ÿæˆæ¡ä»¶ï¼Œä¸æ‰¿è½½æ£€ç´¢ç»“æœï¼Œå°±åº”è¯¥å°†å…¶å£°æ˜å†é™„åŠ å±æ€§ä¸­</li>
<li>å¦‚æœç¡®å®æƒ³åŸºäºè¯¥å­—æ®µçš„èšåˆç»“æœè¿‡æ»¤ï¼šåˆ™éœ€è¦æ”¹å†™ SQLï¼Œä¾‹å¦‚ä½¿ç”¨Â <code>avg(s.score)</code>Â ç­‰èšåˆå‡½æ•°</li>
<li>å¦‚æœç¡®å®ç”¨ä¸äº†èšåˆå‡½æ•°ï¼Œä½†æ—¢æƒ³æ‰¿è½½æ£€ç´¢ç»“æœï¼Œåˆæƒ³åœ¨åˆ†ç»„å‰è¿‡æ»¤ï¼šé‚£æ˜¯å¦è€ƒè™‘å°†å…¶å£°æ˜åˆ° <code>groupBy</code> åˆ—è¡¨ä¸­å»ï¼ˆéµå®ˆ SQL è§„èŒƒï¼‰</li>
<li>å¦‚æœå°± <strong>ä¸æƒ³éµå®ˆ SQL è§„èŒƒ</strong>ï¼Œå°±åº”æ˜¾å¼è®¾ç½®ä¸ºÂ <code>@DbField(cluster = Cluster.FALSE)</code></li>
</ul>
<h2 data-id="heading-4">5. é—®é¢˜çš„æœ¬è´¨ä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>åŸºäºä¸Šè¿°ç†è§£ï¼Œæˆ‘æ„è¯†åˆ°æˆ‘çš„é—®é¢˜æœ¬è´¨æ˜¯ï¼š<code>teacherId</code>Â æ˜¯ä¸€ä¸ª<strong>å­—æ®µå±æ€§</strong>ï¼ˆJavaç±»ä¸­çš„å­—æ®µï¼‰ï¼Œå®ƒä¼šå‡ºç°åœ¨Â <code>SELECT</code>Â åˆ—è¡¨ä¸­ï¼Œä½†åœ¨Â <code>GROUP BY</code>Â æŸ¥è¯¢ä¸­ï¼Œå®ƒæ—¢ä¸åœ¨åˆ†ç»„åˆ—è¡¨ä¸­ï¼Œä¹Ÿä¸æ˜¯èšåˆå‡½æ•°ã€‚</p>
<p>æ ¹æ® SQL è¯­ä¹‰ï¼Œè¿™æ ·çš„å­—æ®µåœ¨Â <code>SELECT</code>Â ä¸­æ˜¯éæ³•çš„ã€‚Bean Searcher çš„Â <code>Cluster.AUTO</code>Â æ¨æ–­é€»è¾‘åœ¨è¿™ç§æƒ…å†µä¸‹é€‰æ‹©å°†å…¶è§†ä¸ºèšåˆå­—æ®µï¼ˆ<code>TRUE</code>ï¼‰ï¼Œå› æ­¤å°†è¿‡æ»¤æ¡ä»¶æ”¾åœ¨Â <code>HAVING</code>Â ä¸­ã€‚</p>
<p>è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<h3 data-id="heading-5">æ–¹æ³•ä¸€ï¼šå°†å­—æ®µæ”¹ä¸ºé™„åŠ å±æ€§</h3>
<p>å¦‚æœè¿™ä¸ªå­—æ®µä¸éœ€è¦å‡ºç°åœ¨æŸ¥è¯¢ç»“æœä¸­ï¼Œåªä½œä¸ºè¿‡æ»¤æ¡ä»¶ï¼Œå¯ä»¥å°†å…¶å®šä¹‰ä¸ºé™„åŠ å±æ€§ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SearchBean(
    tables = "course c, teacher t, score s",
    joinCond = "c.teacher_id = t.id and c.id = s.course_id",
    groupBy = "c.id",
    fields = {
        @DbField(name = "teacherId", value = "t.id")    // å®šä¹‰é™„åŠ å±æ€§
    }
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CourseScoreVO</span> {

    <span class="hljs-meta">@DbField("c.id")</span>
    <span class="hljs-keyword">private</span> Long courseId;

    <span class="hljs-meta">@DbField("AVG(s.score)")</span>
    <span class="hljs-keyword">private</span> Double averageScore;

    <span class="hljs-comment">// teacherId ç°åœ¨æ˜¯é™„åŠ å±æ€§ï¼Œä¸ä¼šå‡ºç°åœ¨SELECTä¸­</span>
    <span class="hljs-comment">// å®ƒå°†è¢«è‡ªåŠ¨æ¨æ–­ä¸º Cluster.FALSEï¼Œæ¡ä»¶ç”Ÿæˆåœ¨WHEREä¸­</span>

    <span class="hljs-comment">// çœç•¥å…¶ä»–å­—æ®µå’Œgetter/setter</span>
}
</code></pre>
<h3 data-id="heading-6">æ–¹æ³•äºŒï¼šæ˜¾å¼æŒ‡å®š cluster å±æ€§</h3>
<p>å¦‚æœç¡®å® <strong>ä¸æƒ³éµå®ˆ SQL è§„èŒƒ</strong>ï¼Œå¹¶ä¸”ä¹Ÿç¡®å®šæˆ‘çš„æ•°æ®åº“æ”¯æŒè¿è¡Œè¿™ç§ä¸è§„èŒƒçš„ SQLï¼Œé‚£ä¹ˆåªéœ€æŒ‡å®š <code>cluster</code> å±æ€§ä¸º <code>FALSE</code> å³å¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@DbField(value = "t.id", cluster = Cluster.FALSE)</span>
<span class="hljs-keyword">private</span> Long teacherId;
</code></pre>
<p>è¿™æ ·æ˜ç¡®å‘Šè¯‰æ¡†æ¶ï¼Œè¿™ä¸ªå­—æ®µæ˜¯éèšåˆå­—æ®µï¼Œæ¡ä»¶åº”è¯¥æ”¾åœ¨Â <code>WHERE</code>Â å­å¥ä¸­ã€‚</p>
<h2 data-id="heading-7">6. ä½œè€…çš„è®¾è®¡å“²å­¦ï¼š"å¥½ç±»" ä¸ "åç±»"</h2>
<p>ä¸ Bean Searcher ä½œè€…æ²Ÿé€šåï¼Œæˆ‘è·å¾—äº†æ›´æ·±å±‚æ¬¡çš„ç†è§£ã€‚ä½œè€…å°†åˆ†ç»„æŸ¥è¯¢åœºæ™¯ä¸‹çš„Â <code>@SearchBean</code>Â ç±»åˆ†ä¸ºä¸¤ç§ï¼š</p>
<h3 data-id="heading-8">ä»€ä¹ˆæ˜¯"å¥½ç±»"ï¼Ÿ</h3>
<p>ä¸€ä¸ªè¢«å¼€å‘è€…æ·±æ€ç†Ÿè™‘çš„"å¥½ç±»"ï¼Œåœ¨åˆ†ç»„æŸ¥è¯¢ä¸­ï¼Œå…¶æ¯ä¸ªå­—æ®µéƒ½ä¸¥æ ¼éµå®ˆ SQL è¯­ä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SearchBean(
    tables = "student_course sc",
    groupBy = "sc.course_id"
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CourseScore</span> {

    <span class="hljs-comment">// è¿™ä¸ªå­—æ®µåœ¨ groupBy åˆ—è¡¨ä¸­ï¼Œåˆæ³•</span>
    <span class="hljs-meta">@DbField("sc.course_id")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> courseId;

    <span class="hljs-comment">// è¿™ä¸ªå­—æ®µæ˜¯èšåˆå‡½æ•°ï¼Œåˆæ³•</span>
    <span class="hljs-meta">@DbField("sum(sc.score)")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> totalScore;

    <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª"å¥½ç±»"ï¼Œæ— éœ€æ‰‹åŠ¨æŒ‡å®š cluster å±æ€§</span>
}
</code></pre>
<p>"å¥½ç±»" çš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li>æ¯ä¸ªå­—æ®µè¦ä¹ˆåœ¨Â <code>groupBy</code>Â åˆ—è¡¨ä¸­</li>
<li>è¦ä¹ˆä½¿ç”¨äº†èšåˆå‡½æ•°ï¼ˆå¦‚Â <code>SUM</code>,Â <code>AVG</code>,Â <code>COUNT</code>Â ç­‰ï¼‰</li>
<li>æ¡†æ¶çš„ <strong>è‡ªåŠ¨æ¨æ–­</strong> èƒ½å®Œç¾å·¥ä½œï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„</li>
</ol>
<h3 data-id="heading-9">ä»€ä¹ˆæ˜¯"åç±»"ï¼Ÿ</h3>
<p>ä¸€ä¸ªæœªè¢«å¼€å‘è€…æ·±æ€ç†Ÿè™‘çš„"åç±»"ï¼ŒåŒ…å«ä¸ç¬¦åˆåˆ†ç»„æŸ¥è¯¢è¯­ä¹‰çš„å­—æ®µï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SearchBean(
    tables = "course c, teacher t, score s",
    joinCond = "c.teacher_id = t.id AND c.id = s.course_id",
    groupBy = "c.id"
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CourseScoreVO</span> {

    <span class="hljs-comment">// è¿™ä¸ªå­—æ®µåœ¨ groupBy åˆ—è¡¨ä¸­ï¼Œåˆæ³•</span>
    <span class="hljs-meta">@DbField("c.id")</span>
    <span class="hljs-keyword">private</span> Long courseId;

    <span class="hljs-comment">// è¿™ä¸ªå­—æ®µæ˜¯èšåˆå‡½æ•°ï¼Œåˆæ³•</span>
    <span class="hljs-meta">@DbField("AVG(s.score)")</span>
    <span class="hljs-keyword">private</span> Double averageScore;

    <span class="hljs-comment">// è¿™ä¸ªå­—æ®µæ—¢ä¸åœ¨ groupBy åˆ—è¡¨ä¸­ï¼Œä¹Ÿä¸æ˜¯èšåˆå‡½æ•°</span>
    <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª "åç±»" çš„å…¸å‹è¡¨ç°</span>
    <span class="hljs-meta">@DbField("t.id")</span>
    <span class="hljs-keyword">private</span> Long teacherId;
}
</code></pre>
<p>"åç±»"çš„é—®é¢˜ï¼š</p>
<ol>
<li>åŒ…å«æ—¢ä¸åœ¨Â <code>groupBy</code>Â åˆ—è¡¨ä¸­ï¼Œä¹Ÿä¸æ˜¯èšåˆå‡½æ•°çš„å­—æ®µ</li>
<li>è¿™äº›å­—æ®µåœ¨åˆ†ç»„æŸ¥è¯¢çš„Â <code>SELECT</code>Â å­å¥ä¸­æ˜¯ä¸åˆæ³•çš„ï¼Œæ²¡æœ‰éµå¾ª SQL è§„èŒƒ</li>
<li>æ¡†æ¶æ— æ³•è‡ªåŠ¨ç¡®å®šå¦‚ä½•å¤„ç†è¿™äº›å­—æ®µçš„è¿‡æ»¤æ¡ä»¶</li>
</ol>
<h3 data-id="heading-10">ä½œè€…çš„æ„å›¾</h3>
<p>ä½œè€…çš„è®¾è®¡å“²å­¦æ˜¯ï¼š<strong>å¼•å¯¼å¼€å‘è€…è®¾è®¡ "å¥½ç±»"ï¼Œè€Œä¸æ˜¯è¿å°± "åç±»"</strong> ã€‚</p>
<p>å½“ä¸€ä¸ªç±»è¢«æ¡†æ¶æ ‡è®°ä¸º"åç±»"ï¼ˆé€šè¿‡æ¡ä»¶è¢«é”™è¯¯æ”¾å…¥Â <code>HAVING</code>Â æ¥æç¤ºï¼‰æ—¶ï¼Œæ¡†æ¶å®é™…ä¸Šåœ¨è¯´ï¼š</p>
<blockquote>
<p>"ä½ çš„ç±»è®¾è®¡å¯èƒ½å­˜åœ¨é—®é¢˜ã€‚è¯·é‡æ–°æ€è€ƒï¼šè¿™ä¸ªå­—æ®µçœŸçš„åº”è¯¥åœ¨åˆ†ç»„æŸ¥è¯¢çš„ç»“æœä¸­å‡ºç°å—ï¼Ÿ"</p>
</blockquote>
<p>å¦‚æœå¼€å‘è€…ç»è¿‡æ€è€ƒåï¼Œè®¤ä¸ºè¿™ä¸ªå­—æ®µç¡®å®éœ€è¦ï¼Œé‚£ä¹ˆå°±åº”è¯¥æ˜ç¡®å‘Šè¯‰æ¡†æ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç»è¿‡æ€è€ƒï¼Œæˆ‘ç¡®å®éœ€è¦è¿™ä¸ªå­—æ®µï¼Œä½†å®ƒåº”è¯¥ä½œä¸ºåˆ†ç»„å‰è¿‡æ»¤æ¡ä»¶</span>
<span class="hljs-meta">@DbField(value = "t.id", cluster = Cluster.FALSE)</span>
<span class="hljs-keyword">private</span> Long teacherId;
</code></pre>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¡†æ¶æ—¢ä¿è¯äº† SQL çš„è¯­ä¹‰æ­£ç¡®æ€§ï¼Œåˆç»™äº†å¼€å‘è€…çµæ´»å¤„ç†ç‰¹æ®Šæƒ…å†µçš„ç©ºé—´ã€‚</p>
<h2 data-id="heading-11">7. æœ€ä½³å®è·µä¸æ€»ç»“</h2>
<p>é€šè¿‡è¿™æ¬¡ç»å†ï¼Œæˆ‘æ€»ç»“äº†åœ¨ä½¿ç”¨ Bean Searcher è¿›è¡Œåˆ†ç»„æŸ¥è¯¢æ—¶çš„æœ€ä½³å®è·µï¼š</p>
<ol>
<li><strong>è®¾è®¡"å¥½ç±»"ä¼˜å…ˆ</strong>ï¼šåœ¨è®¾è®¡åˆ†ç»„æŸ¥è¯¢çš„å®ä½“ç±»æ—¶ï¼Œä¼˜å…ˆç¡®ä¿æ¯ä¸ªå­—æ®µè¦ä¹ˆåœ¨Â <code>groupBy</code>Â åˆ—è¡¨ä¸­ï¼Œè¦ä¹ˆæ˜¯èšåˆå‡½æ•°ã€‚è¿™æ ·çš„"å¥½ç±»"èƒ½è®©æ¡†æ¶çš„è‡ªåŠ¨æ¨æ–­å®Œç¾å·¥ä½œã€‚</li>
<li><strong>ç†è§£"åç±»"çš„ä»£ä»·</strong>ï¼šå¦‚æœç¡®å®éœ€è¦åŒ…å«éåˆ†ç»„ã€éèšåˆçš„å­—æ®µï¼Œç†è§£è¿™æ˜¯"åç±»"ï¼Œå¹¶æ¥å—éœ€è¦æ‰‹åŠ¨æŒ‡å®šÂ <code>cluster</code>Â å±æ€§çš„ä»£ä»·ã€‚</li>
<li><strong>ç†è§£æ¡†æ¶è®¾è®¡å“²å­¦</strong>ï¼šBean Searcher çš„è®¾è®¡è€…åœ¨"ä¾¿åˆ©æ€§"å’Œ"è¯­ä¹‰æ­£ç¡®æ€§"ä¹‹é—´é€‰æ‹©äº†åè€…ã€‚è¿™å¯èƒ½å¯¼è‡´åˆæœŸçš„å­¦ä¹ æ›²çº¿ï¼Œä½†é•¿æœŸæ¥çœ‹ï¼Œå®ƒ <strong>é¿å…äº†æ›´éšè”½çš„é€»è¾‘é”™è¯¯</strong>ã€‚</li>
<li><strong>åŒºåˆ†å­—æ®µç”¨é€”</strong>ï¼šæ˜ç¡®åŒºåˆ†å“ªäº›å­—æ®µç”¨äºå±•ç¤ºç»“æœï¼ˆéœ€è¦åœ¨Â <code>SELECT</code>Â ä¸­ï¼‰ï¼Œå“ªäº›ä»…ç”¨äºè¿‡æ»¤ï¼ˆå¯ä»¥å®šä¹‰ä¸ºé™„åŠ å±æ€§ï¼‰ã€‚</li>
</ol>
<p>å›é¡¾æ•´ä¸ªæ¢ç´¢è¿‡ç¨‹ï¼Œé‚£ä¸ªçœ‹ä¼¼"è¯¡å¼‚"çš„é”™è¯¯å®é™…ä¸Šæ˜¯æŒ‡å¼•æˆ‘æ·±å…¥ç†è§£ SQL è¯­ä¹‰å’Œæ¡†æ¶è®¾è®¡ç†å¿µçš„è·¯æ ‡ã€‚Bean Searcher é€šè¿‡è¿™ç§ <strong>"å¿«é€Ÿå¤±è´¥"</strong> çš„è®¾è®¡ï¼Œç¡®ä¿å¼€å‘è€…åœ¨æ—©æœŸå°±èƒ½å‘ç°å¹¶ä¿®å¤æ½œåœ¨çš„é€»è¾‘é—®é¢˜ã€‚</p>
<p>è¿™ä¸ªæ¡†æ¶ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€åŒ–ä»£ç çš„å·¥å…·ï¼Œå®ƒæ›´æ˜¯ä¸€ä¸ªå¼•å¯¼å¼€å‘è€…å†™å‡ºæ›´ä¸¥è°¨ SQL çš„è‰¯å¸ˆç›Šå‹ã€‚ä¸‹æ¬¡å½“ä½ çš„æŸ¥è¯¢æ¡ä»¶"å·å·"è·‘è¿›Â <code>HAVING</code>Â å­å¥æ—¶ï¼Œä¸è¦æƒŠæ…Œï¼Œè¿™æ˜¯æ¡†æ¶åœ¨æé†’ä½ ï¼šæ˜¯æ—¶å€™ä»”ç»†æ€è€ƒä½ çš„æŸ¥è¯¢é€»è¾‘äº†ã€‚</p>
<p>æ¯•ç«Ÿï¼Œåœ¨ç¼–ç¨‹çš„ä¸–ç•Œé‡Œï¼Œæ²¡æœ‰æ— ç¼˜æ— æ•…çš„"è¯¡å¼‚"ï¼Œåªæœ‰å°šæœªç†è§£çš„ç²¾å¦™è®¾è®¡ï¼</p>
<blockquote>
<p><strong>å¼€æºä»£ç ï¼š</strong></p>
<ul>
<li>Gitee: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Ftroyzhxu%2Fbean-searcher" target="_blank" title="https://gitee.com/troyzhxu/bean-searcher" ref="nofollow noopener noreferrer">gitee.com/troyzhxu/beâ€¦</a></li>
<li>Github: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftroyzhxu%2Fbean-searcher" target="_blank" title="https://github.com/troyzhxu/bean-searcher" ref="nofollow noopener noreferrer">github.com/troyzhxu/beâ€¦</a></li>
<li>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbs.zhxu.cn%2F" target="_blank" title="https://bs.zhxu.cn/" ref="nofollow noopener noreferrer">bs.zhxu.cn/</a></li>
</ul>
<p><strong>å¾€æœŸé˜…è¯»ï¼š</strong></p>
<ul>
<li><a href="https://juejin.cn/post/7027733039299952676" target="_blank" title="https://juejin.cn/post/7027733039299952676">æˆ‘è¿™æ ·å†™ä»£ç ï¼Œæ¯”ç›´æ¥ä½¿ç”¨ MyBatis æ•ˆç‡æé«˜äº† 100 å€</a></li>
<li><a href="https://juejin.cn/post/7092411551507808264" target="_blank" title="https://juejin.cn/post/7092411551507808264">æœ€è¿‘ç«èµ·çš„ Bean Searcher ä¸ MyBatis Plus å€’åº•æœ‰å•¥åŒºåˆ«ï¼Ÿ</a></li>
<li><a href="https://juejin.cn/post/7116736773065343012" target="_blank" title="https://juejin.cn/post/7116736773065343012">Bean Searcher v3.8.0 ä¸€å¤§æ³¢æ–°ç‰¹æ€§æ¥è¢­</a></li>
<li><a href="https://juejin.cn/post/7379667550504517643" target="_blank" title="https://juejin.cn/post/7379667550504517643">ä½ çŸ¥é“åªè¯» ORM å—ï¼ŒBean Searcher v4.3.0 æ¥å•¦ï¼</a></li>
</ul>
</blockquote>
<p>å¦‚æœè§‰å¾—æ–‡æœ¬ä¸é”™ï¼ŒåŠ¨æ‰‹ç‚¹ä¸ªèµå§ ^_^</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Context çŸ¥å¤šå°‘ï¼Œç»„ä»¶é€šè”æœ‰é—¨é“]]></title>    <link>https://juejin.cn/post/7581348660824506368</link>    <guid>https://juejin.cn/post/7581348660824506368</guid>    <pubDate>2025-12-09T00:29:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581348660824506368" data-draft-id="7577345758036066304" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Context çŸ¥å¤šå°‘ï¼Œç»„ä»¶é€šè”æœ‰é—¨é“"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2025-12-09T00:29:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Context çŸ¥å¤šå°‘ï¼Œç»„ä»¶é€šè”æœ‰é—¨é“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T00:29:48.000Z" title="Tue Dec 09 2025 00:29:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><em>æœ¬ç³»åˆ—ä¸º Android æŠ€æœ¯èŒåœºé¢˜æè™šæ„å°è¯´ï¼Œæ‰€æœ‰ç™»åœºäººç‰©ã€å…¬å¸åç§°ã€ç»„ç»‡æ¶æ„åŠç›¸å…³æƒ…èŠ‚å‡ä¸ºåˆ›ä½œæ‰€éœ€è™šæ„è€Œæ¥ï¼Œè‹¥æœ‰é›·åŒï¼Œçº¯å±å¶ç„¶ã€‚ä¹¦ä¸­æ¶‰åŠçš„æŠ€æœ¯çŸ¥è¯†ç»ä¸“ä¸šæ¢³ç†ï¼Œä»…ä¾›å‚è€ƒã€‚</em></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/844bf0f4350a4e488ceae20d66f4dfce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765844987&amp;x-signature=hqjJxjm%2B1%2FnQsG0jEQxcQOYQDww%3D" alt="0.png" loading="lazy"/></p>
<h2 data-id="heading-0">å››ï¼‰Context çŸ¥å¤šå°‘ï¼Œç»„ä»¶é€šè”æœ‰é—¨é“</h2>
<p>ä¸Šæ¬¡é¢è¯•çš„å¤±è´¥åƒç›†å†·æ°´ï¼Œå½»åº•æµ‡é†’äº†æµ‘æµ‘å™©å™©çš„æ—å“ã€‚é¢è¯•å®˜éšæ„æŠ›å‡ºçš„Androidç›¸å…³é—®é¢˜ï¼Œä»–ç­”å¾—æ”¯æ”¯å¾å¾ï¼Œé‚£ä¸€åˆ»ä»–æ‰æ˜ç™½ï¼Œåªé æ”¹UIã€è°ƒæ¥å£çš„è¡¨é¢åŠŸå¤«ï¼Œæ ¹æœ¬æ’‘ä¸èµ·èŒä¸šé“è·¯ã€‚</p>
<p>å›åˆ°ç»„é‡Œï¼Œä»–æ”¶èµ·äº†æ‘¸é±¼çš„å¿ƒæ€ï¼Œå¼€å§‹æ²‰ä¸‹å¿ƒé’»ç ”æ ¸å¿ƒæŠ€æœ¯ã€‚æ°é€¢ç»„é‡Œå¯åŠ¨â€œç”¨æˆ·ä¸­å¿ƒæ¨¡å—é‡æ„â€ï¼Œè€æ¨è§ä»–æ€åº¦è½¬å˜ï¼Œä¾¿æŠŠâ€œå…¨å±€é€šçŸ¥å·¥å…·ç±»å¼€å‘â€è¿™ä¸ªåŸºç¡€å­ä»»åŠ¡äº¤ç»™ä»–ç»ƒæ‰‹ã€‚æ—å“ç£•ç£•ç»Šç»Šå¹²äº†å¿«ä¸€å‘¨ï¼ŒåˆšæŠŠåŸºç¡€åŠŸèƒ½è·‘é€šï¼Œéº»çƒ¦å°±æ‰¾ä¸Šé—¨äº†ã€‚</p>
<p>â€œæ—å“ï¼Œä½ è´Ÿè´£çš„é€šçŸ¥æ¨¡å—æµ‹å‡ºé—®é¢˜äº†ï¼â€å°å®‰æŠ±ç€æµ‹è¯•æœºæ€¥åŒ†åŒ†è·‘è¿‡æ¥ï¼Œé«˜é©¬å°¾éšç€è„šæ­¥æ™ƒå¾—å‰å®³ï¼Œâ€œå¸¸è§„æ“ä½œéƒ½æ²¡é—®é¢˜ï¼Œä½†æˆ‘åšåå°ä¿æ´»æµ‹è¯•æ—¶å‘ç°ï¼Œé€€åˆ°åå°ç­‰å¾…ä¸€ä¼šå„¿å†è§¦å‘æ¨é€ï¼ŒAPPç›´æ¥å†…å­˜æ³„æ¼ï¼Œæ—¶é—´é•¿äº†è¿˜ä¼šå´©æºƒï¼Œæ—¥å¿—é‡Œå…¨æ˜¯ <strong>LeakCanary</strong> æ£€æµ‹åˆ°å†…å­˜æ³„æ¼çš„è­¦å‘Šã€‚â€</p>
<p>æ—å“èµ¶ç´§æ¥è¿‡æµ‹è¯•æœºï¼Œå±å¹•ä¸Šâ€œåº”ç”¨å·²åœæ­¢è¿è¡Œâ€çš„æç¤ºæ ¼å¤–åˆºçœ¼ã€‚ä»–æ‰“å¼€æ—¥å¿—ï¼Œ<code>Activity Context leaked</code> çš„çº¢è‰²å­—æ ·åƒæ ¹åˆºæ‰åœ¨çœ¼å‰ã€‚è¿™ä¸ªé€šçŸ¥å·¥å…·ç±»ä»–ç”¨äº†å•ä¾‹æ¨¡å¼ï¼Œä¸ºäº†æ–¹ä¾¿è°ƒç”¨ <code>Toast</code>ï¼Œç›´æ¥æŠŠ <code>Activity</code> çš„ <code>this</code> ä¼ äº†è¿›å»ã€‚</p>
<p>â€œæˆ‘æ˜æ˜åœ¨å·¥å…·ç±»é‡ŒåŠ äº†åˆ¤ç©ºå•Šã€‚â€æ—å“çš±ç€çœ‰ç¿»ä»£ç ï¼Œâ€œ<code>if (context != null) { Toast.makeText(context, msg, Toast.LENGTH_SHORT).show() }</code>ï¼Œæ€ä¹ˆè¿˜ä¼šæ³„æ¼ï¼Ÿâ€</p>
<p>â€œä½ è¿™æ˜¯æŠŠ <code>Activity</code> çš„å‘½é—¨æ”¥æ‰‹é‡Œäº†ã€‚â€è€æ¨ç«¯ç€æªç“·æ¯è·¯è¿‡ï¼Œæ¯æ²¿è¿˜æ²¾ç€ç‚¹èŒ¶å¶ã€‚</p>
<p>ä»–ç›´æŒ‡é—®é¢˜æ ¸å¿ƒï¼šâ€œå•ä¾‹æ˜¯å…¨å±€ç”Ÿå‘½å‘¨æœŸï¼Œ<code>Activity</code> ä¸€é”€æ¯ï¼Œå®ƒè¿˜æŠ±ç€ <code>Activity</code> çš„ <code>Context</code> ä¸æ”¾ï¼Œåƒåœ¾å›æ”¶å™¨æ”¶ä¸äº†ï¼Œå¯ä¸å°±æ³„æ¼äº†ï¼Ÿâ€</p>
<p>æ—å“é¡ºç€è€æ¨çš„è¯å¾€ä¸‹æƒ³ï¼Œçœ‰å¤´æ‹§å¾—æ›´ç´§ï¼šâ€œé‚£è¦æ˜¯æœ‰äº›åœºæ™¯ç¡®å®ç»•ä¸å¼€ï¼Œéå¾—åœ¨å•ä¾‹è¿™ç§é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡é‡Œç”¨åˆ° <code>Activity Context</code>ï¼Œå°±æ²¡åˆ«çš„åŠæ³•äº†å—ï¼Ÿâ€</p>
<p>â€œä¹Ÿä¸æ˜¯å®Œå…¨ä¸èƒ½ç”¨ï¼Œæ ¸å¿ƒæ˜¯åˆ«è®©é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡â€˜æ­»æŠ“ç€â€™<code>Activity Context</code> ä¸æ”¾ã€‚â€è€æ¨æ‹‰è¿‡æ¤…å­åä¸‹ï¼Œé¡ºåŠ¿æ¥è¿‡æ—å“çš„ä»£ç æœ¬ã€‚</p>
<p>ä»–ç»™å‡ºè§£å†³æ–¹æ¡ˆï¼šâ€œçœŸç¢°åˆ°è¿™ç§éœ€æ±‚ï¼Œå°±å¾—ç”¨ <code>WeakReference</code> æŠŠ <code>Context</code> åŒ…èµ·æ¥ã€‚å®ƒå°±åƒä¸ªâ€˜ä¸´æ—¶æŠ“æ‰‹â€™ï¼Œåªåœ¨éœ€è¦çš„æ—¶å€™å…³è” <code>Activity</code>ï¼Œåƒåœ¾å›æ”¶å™¨è¦æ¸…ç† <code>Activity</code> æ—¶ï¼Œå®ƒä¸ä¼šæ‹¦ç€ï¼Œè¿™æ ·å°±èƒ½ä»æ ¹ä¸Šå‡å°‘æ³„æ¼é£é™©ã€‚â€</p>
<p>å¬ç€è€æ¨çš„è®²è§£ï¼Œæ—å“çªç„¶æƒ³èµ·ä¹‹å‰çœ‹è¿‡è€æ¨ç»™çš„ã€ŠAndroidæ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‹ï¼Œèµ¶ç´§è¿½é—®ï¼šâ€œæ‚¨è¿™ä¹ˆä¸€è¯´æˆ‘å°±æ˜ç™½äº†ï¼é‚£ç»“åˆä½ çš„æ–‡æ¡£é‡Œè®²çš„ <code>Context</code> ç±»å‹ï¼Œæˆ‘è¿™ä¸ªå•ä¾‹å·¥å…·ç±»ï¼Œæ˜¯ä¸æ˜¯ç›´æ¥ç”¨ <code>Application Context</code> æœ€ç¨³å¦¥ï¼Ÿâ€</p>
<p>â€œå…ˆåˆ«æ€¥ç€ä¸‹ç»“è®ºã€‚â€è€æ¨æ‹‰è¿‡æ¤…å­åä¸‹ï¼Œç‚¹å¼€å·¥å…·ç±»ä»£ç ï¼Œâ€œä½ è¿™å·¥å…·ç±»åˆå¼¹ <code>Toast</code> åˆæ˜¾ç¤º <code>Dialog</code>ï¼Œå¾—å…ˆææ¸…æ¥šä¸åŒåœºæ™¯è¯¥ç”¨å•¥ <code>Context</code>ã€‚â€</p>
<p>ä»–æŒ‡ç€å±å¹•ï¼Œç»™å‡ºå…³é”®åŒºåˆ†ï¼šâ€œåƒ <code>Toast</code> è¿™ç§è½»é‡çº§æç¤ºï¼Œç”¨ <code>Application Context</code> å®Œå…¨æ²¡é—®é¢˜ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†çª—å£å…³è”ã€‚â€</p>
<p>â€œä½†åƒ <code>AlertDialog</code>ã€è‡ªå®šä¹‰ä¸»é¢˜çš„ <code>TextView</code> è¿™ç±»å’Œç•Œé¢ä¸»é¢˜å¼ºç›¸å…³çš„ç»„ä»¶ï¼Œå°±å¿…é¡»ç”¨ <code>Activity Context</code>ã€‚â€</p>
<p>è€æ¨å¼ºè°ƒæ ¸å¿ƒåŸå› ï¼šâ€œ<code>Application Context</code> æ²¡æœ‰æ‰¿è½½ç•Œé¢ä¸»é¢˜çš„èƒ½åŠ›ï¼Œè¿™æ‰æ˜¯æ–°æ‰‹å¸¸è¸©çš„å‘ã€‚â€</p>
<p>å°å®‰åœ¨æ—è¾¹è¿è¿ç‚¹å¤´ï¼šâ€œå¯¹å¯¹ï¼Œæˆ‘ä¸Šæ¬¡æµ‹ä¸ªå¼¹çª—åŠŸèƒ½ï¼ŒæŒ‰é’®å­—ä½“å’Œé¢œè‰²å…¨ä¸å¯¹ï¼Œè·Ÿè®¾è®¡å›¾å·®è€è¿œã€‚å¼€å‘æ”¹äº†æ”¹è°ƒç”¨æ–¹å¼ï¼Œæ¢æˆè·Ÿé¡µé¢ç»‘å®šçš„é‚£ç§ï¼Œç«‹é©¬å°±æ­£å¸¸äº†ã€‚â€å¥¹æ’‡æ’‡å˜´åæ§½ï¼Œâ€œè¿™Androidä¹Ÿå¤ªå¥‡æ€ªäº†ï¼ŒåŒæ ·æ˜¯å¼¹ä¸ªä¸œè¥¿ï¼Œæ¢ä¸ªåœ°æ–¹è§¦å‘å°±å‡ºå¹ºè›¾å­ã€‚â€</p>
<p>â€œå—¯ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šæ–°æ‰‹è¸©å‘çš„åœ°æ–¹ã€‚â€</p>
<p>è€æ¨æ¥è¿‡è¯å¤´ï¼ŒæŠ›å‡ºä¸€ä¸ªéšè—çŸ¥è¯†ç‚¹ï¼šâ€œå°±è¯´ <code>Dialog</code> è¿™ä¸ªç±»ï¼Œæ„é€ å‡½æ•°æ˜æ™ƒæ™ƒå†™ç€è¦ <code>Context</code>ï¼Œä½†ä½ å»ç¿»æºç å°±çŸ¥é“ï¼Œå®ƒè¦æ±‚çš„æ˜¯ <code>@UIContext</code>ã€‚â€</p>
<p>ä»–è¿›ä¸€æ­¥è§£é‡Šï¼šâ€œè¿™ç§ä¸Šä¸‹æ–‡ä¸€èˆ¬åªæœ‰ <code>Activity</code> æ‰æœ‰ï¼Œ<code>Application</code> å’Œ <code>Service</code> æ ¹æœ¬ä¸å…·å¤‡ã€‚â€</p>
<p>ä»–æ¥ç€æ‰“å¼€æ—å“çš„å•ä¾‹ä»£ç ï¼Œç”¨é¼ æ ‡åœˆå‡º <code>private var mContext: Context? = null</code>ï¼šâ€œä½ æŠŠ <code>Activity</code> ä¼ è¿›æ¥ï¼Œå•ä¾‹å°±æˆäº† <code>Activity</code> çš„â€˜å¯„ç”Ÿè™«â€™ã€‚â€</p>
<p>â€œå°±ç®— <code>Activity</code> <code>finish</code> äº†ï¼Œå•ä¾‹è¿˜æ‹¿ç€å®ƒçš„å¼•ç”¨ï¼Œå†…å­˜èƒ½ä¸æ³„æ¼å—ï¼Ÿâ€</p>
<p>è€æ¨é¡¿äº†é¡¿ï¼Œç»™å‡ºæ˜ç¡®è§£å†³æ–¹æ¡ˆï¼šâ€œæ”¹æˆå°±ç”¨ <code>getApplicationContext()</code>ã€‚â€</p>
<p>ä»–ç‰¹æ„å¼ºè°ƒæ³¨æ„äº‹é¡¹ï¼šâ€œä½†è¦è®°æ­»ï¼Œè¿™ä¸ª <code>Context</code> ä¸èƒ½åšUIç›¸å…³çš„æ“ä½œï¼Œæ¯”å¦‚å¼¹å¯¹è¯æ¡†ã€åŠ è½½å¸ƒå±€ï¼Œåˆšå¥½é¿å¼€å®ƒçš„çŸ­æ¿ã€‚â€</p>
<p>æ—å“æç„¶å¤§æ‚Ÿï¼Œèµ¶ç´§ç¿»å›å·¥å…·ç±»ä»£ç ï¼Œæ‰‹æŒ‡åœ¨å±å¹•ä¸Šåˆ’ç€é€»è¾‘ï¼šâ€œæˆ‘æ˜ç™½æ‚¨çš„æ„æ€äº†ï¼<code>Toast</code> ç”¨ <code>Application Context</code> å°±è¡Œï¼Œä½†å·¥å…·ç±»é‡Œè¿˜ç•™ç€å¼¹ <code>AlertDialog</code> çš„åŠŸèƒ½ï¼Œè¿™æ€»ä¸èƒ½è·Ÿ <code>Toast</code> å…±ç”¨ä¸€å¥—ä¸Šä¸‹æ–‡å§ï¼Ÿæ˜¯ä¸æ˜¯å¾—è®©è°ƒç”¨æ–¹æ¯æ¬¡ä¼  <code>Activity Context</code> è¿‡æ¥ï¼Ÿâ€</p>
<p>â€œåˆ†åœºæ™¯å¤„ç†ã€‚â€è€æ¨æ‹¿èµ·ç¬”åœ¨æ—å“çš„ç¬”è®°æœ¬ä¸Šç”»èµ·æ¥ï¼Œç»™å‡ºæ¸…æ™°çš„ä½¿ç”¨å‡†åˆ™ã€‚</p>
<p>é€‚ç”¨ <code>Application Context</code> çš„åœºæ™¯ï¼šâ€œå·¥å…·ç±»é‡Œå­˜ <code>Application Context</code>ï¼Œç”¨äºåˆå§‹åŒ–é€šçŸ¥ç®¡ç†å™¨ã€è®¿é—®å…¨å±€èµ„æºï¼Œè¿˜æœ‰ <code>Toast</code> è¿™ç§é€šç”¨æç¤ºã€‚â€</p>
<p>å¿…é¡»ç”¨ <code>Activity Context</code> çš„åœºæ™¯ï¼šâ€œ<code>AlertDialog</code>ã€å¸¦è‡ªå®šä¹‰ä¸»é¢˜çš„UIç»„ä»¶è¿™äº›å’Œç•Œé¢å¼ºç»‘å®šçš„æ“ä½œï¼Œå¿…é¡»è®©è°ƒç”¨æ–¹ä¼  <code>Activity</code> é‡Œçš„ <code>Context</code>ï¼Œå¹¶ä¸”æ¯æ¬¡ç”¨çš„æ—¶å€™å®æ—¶ä¼ ï¼Œåˆ«å­˜èµ·æ¥ã€‚â€</p>
<p>ä»–é¡¿äº†é¡¿ï¼Œè¡¥å……ä¸€ä¸ª <code>Service</code> ä¸“å±çŸ¥è¯†ç‚¹ï¼šâ€œè¿˜æœ‰ä¸ª <code>Service</code> é‡Œå¸¸è¸©çš„ç¡¬å‘â€”â€”<code>Service</code> æœ¬èº«æ²¡æœ‰ç‹¬ç«‹çš„ä»»åŠ¡æ ˆï¼Œå®ƒè·‘åœ¨åå°ï¼Œä¸å±äºä»»ä½•ç•Œé¢çš„ä»»åŠ¡æ ˆã€‚â€</p>
<p>æ ¸å¿ƒè¦æ±‚ï¼šâ€œæ‰€ä»¥åœ¨ <code>Service</code> é‡Œå¯åŠ¨ <code>Activity</code> æ—¶ï¼Œå¿…é¡»ç»™ <code>Intent</code> åŠ <code>Intent.FLAG_ACTIVITY_NEW_TASK</code>è¿™ä¸ªæ ‡è®°ã€‚â€</p>
<p>æ ‡è®°ä½œç”¨ä¸å¼‚å¸¸åæœï¼šâ€œè¿™ä¸ªæ ‡è®°çš„ä½œç”¨æ˜¯å¸®æ–°å¯åŠ¨çš„ <code>Activity</code> åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä»»åŠ¡æ ˆæ¥æ‰¿è½½å®ƒï¼Œè¦æ˜¯ä¸åŠ ï¼Œç³»ç»Ÿæ‰¾ä¸åˆ°æ”¾ <code>Activity</code> çš„åœ°æ–¹ï¼Œå°±ä¼šæŠ›å‡º<code>AndroidRuntimeException</code>ã€‚â€</p>
<p>ä»–çœ‹å‘å°å®‰ï¼šâ€œè¿™ä¸ªå°å®‰æµ‹è¯•çš„æ—¶å€™è‚¯å®šç¢°åˆ°è¿‡ã€‚â€</p>
<p>å°å®‰ç«‹åˆ»ç‚¹å¤´æ‘†æ‰‹ï¼Œæœ‰ç‚¹ä¸å¥½æ„æ€åœ°ç¬‘ï¼šâ€œåæ­£å°±æ˜¯è¿™ä¹ˆä¸ªç†å„¿ï¼æˆ‘ä¹‹å‰æµ‹è¿‡ç±»ä¼¼çš„åå°åŠŸèƒ½ï¼Œå¼€å‘æ²¡åŠ ä¸œè¥¿å°±å´©äº†ï¼Œæˆ‘æŠŠå´©çš„æƒ…å†µæŠ¥ä¸Šå»ï¼Œä»–ä»¬æ”¹äº†ä¸ªæ ‡è®°å°±å¥½äº†ã€‚å…·ä½“å•¥åŸç†æˆ‘ä¹Ÿè®°ä¸å¤ªæ¸…ï¼Œä½ ä»¬è¯´çš„è¿™äº› <code>Context</code> ç›¸å…³çš„ï¼Œæˆ‘å¬ç€éƒ½å¤´å¤§ã€‚â€</p>
<p>æ—å“ç«‹åˆ»æŒ‰è¿™ä¸ªæ€è·¯é‡æ„ä»£ç ï¼šå•ä¾‹åˆå§‹åŒ–æ—¶é€šè¿‡ <code>context.applicationContext</code> å­˜å…¨å±€ä¸Šä¸‹æ–‡ï¼Œå¼¹ <code>AlertDialog</code> çš„æ–¹æ³•åˆ™æ–°å¢ <code>Activity Context</code> å‚æ•°ï¼Œè¦æ±‚è°ƒç”¨æ–¹å®æ—¶ä¼ å…¥ã€‚æ”¹å®Œåå°å®‰å½“åœºæµ‹è¯•â€”â€”å‰å°å¼¹é€šçŸ¥ã€å¼¹çª—éƒ½æ­£å¸¸ï¼Œåå°è§¦å‘æ¨é€ä¹Ÿæ²¡å†å‡ºç°å†…å­˜æ³„æ¼ï¼Œ<strong>LeakCanary</strong> çš„è­¦å‘Šå½»åº•æ¶ˆå¤±äº†ã€‚</p>
<p>æ—å“æŠŠè€æ¨çš„è¯è®°åœ¨ç¬”è®°æœ¬ä¸Šï¼Œç‰¹æ„ç”¨çº¢ç¬”æ ‡æ³¨ï¼šâ€œå•ä¾‹å­˜ <code>Application Context</code>ï¼ŒUIæ“ä½œä¼  <code>Activity Context</code>ï¼Œå®æ—¶è°ƒç”¨ä¸ç¼“å­˜â€ã€‚æ¥ä¸‹æ¥çš„å‡ å¤©ï¼Œä»–ä¸ä»…é‡æ„äº†é€šçŸ¥å·¥å…·ç±»ï¼Œè¿˜ä¸»åŠ¨æŠŠç»„é‡Œå‡ ä¸ªè€æ¨¡å—çš„<code>Context</code>ä½¿ç”¨é€»è¾‘éƒ½æ’æŸ¥äº†ä¸€éâ€”â€”ä¹‹å‰æ€»è¢«å¿½ç•¥çš„â€œå†…å­˜æ³„æ¼éšæ‚£â€â€œä¸»é¢˜é”™ä¹±â€ç­‰å°é—®é¢˜ï¼Œå¦‚ä»Šéƒ½æˆäº†ä»–é‡ç‚¹å…³æ³¨çš„å¯¹è±¡ã€‚</p>
<p>æ—å“æ’æŸ¥å®Œæœ€åä¸€ä¸ªè€æ¨¡å—ï¼Œæ‰ç€è„–å­è·Ÿè€æ¨åé¦ˆï¼šâ€œæ¨å·¥ï¼Œæˆ‘å‘ç°å¥½å¤šæ—§ä»£ç é‡Œï¼Œ<code>Activity</code> é‡Œæ—¢ç”¨ <code>this</code> åˆç”¨ <code>baseContext</code>ï¼Œçœ‹å¾—æˆ‘æœ‰ç‚¹ä¹±ï¼Œè¿™ä¿©åˆ°åº•å•¥å…³ç³»å•Šï¼Ÿâ€</p>
<p>è€æ¨æ­£æ”¶æ‹¾ç€æ–‡æ¡£ï¼Œé—»è¨€åœä¸‹åŠ¨ä½œï¼Œå¹²è„†æŠŠæ—å“çš„ä»£ç æœ¬æ‹‰åˆ°è‡ªå·±é¢å‰ï¼šâ€œæ­£å¥½ä½ é—®åˆ°ç‚¹å­ä¸Šäº†ï¼Œå…‰ä¼šç”¨è¿˜ä¸å¤Ÿï¼Œå¾—çŸ¥é“åº•å±‚é€»è¾‘æ‰ä¸å®¹æ˜“è¸©å‘ã€‚â€</p>
<p>ä»–æ‰“å¼€ <code>ContextWrapper</code> çš„æºç ï¼Œç”¨æŒ‡å°–ç‚¹ç€å±å¹•ï¼šâ€œä½ çœ‹ï¼Œ<code>ContextWrapper</code> é‡Œæœ‰ä¸ª <code>mBase</code> å­—æ®µï¼Œè¿™å°±æ˜¯çœŸæ­£çš„ä¸Šä¸‹æ–‡å®ç°ï¼Œä¸ç®¡æ˜¯ <code>Activity</code> è¿˜æ˜¯ <code>Service</code>ï¼Œæœ€ç»ˆéƒ½è¦å§”æ‰˜ç»™å®ƒã€‚<code>Activity</code> çš„ <code>mBase</code> æ˜¯ <code>ContextImpl</code>ï¼Œè¿˜é™„åŠ äº†ä¸»é¢˜ä¿¡æ¯ï¼›ä½† <code>Service</code> çš„ <code>mBase</code> ä¹Ÿæ˜¯ <code>ContextImpl</code>ï¼Œå´æ²¡æœ‰ä¸»é¢˜æ‰©å±•â€”â€”è¿™å°±æ˜¯ä¸ºå•¥ <code>Service</code> ä¸èƒ½å¼¹å¼¹çª—ã€‚â€</p>
<p>æ—å“ç›¯ç€æºç è‹¥æœ‰æ‰€æ€ï¼Œçªç„¶æŒ‡ç€ <code>baseContext</code> ç›¸å…³çš„æ³¨é‡Šé—®ï¼šâ€œé‚£ <code>Activity</code> é‡Œçš„ <code>this</code> å’Œ <code>baseContext</code> å…·ä½“æœ‰å•¥åŒºåˆ«ï¼Ÿâ€</p>
<p>â€œè¿™é—®é¢˜é—®å¾—å¥½ï¼Œæ­£å¥½ç»“åˆä»£ç ç»™ä½ è®²æ˜ç™½ã€‚â€è€æ¨å¹²è„†æ‹‰è¿‡æ—å“çš„å·¥ä½æ¤…ï¼Œæ‰“å¼€ä»–çš„IDEï¼Œè°ƒå‡ºä¸¤æ®µä»£ç â€”â€”æ­£æ˜¯ç»„é‡Œå‰è¾ˆå†™è¿‡çš„ä¸»é¢˜åŒ…è£…ç±»ä»£ç ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomThemeContextWrapper</span>(base: Context) : ContextWrapper(base) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getTheme</span><span class="hljs-params">()</span></span>: Resources.Theme {
        <span class="hljs-keyword">val</span> theme = <span class="hljs-keyword">super</span>.getTheme()
        theme.applyStyle(R.style.CustomTheme, <span class="hljs-literal">true</span>) <span class="hljs-comment">// Apply a custom theme</span>
        <span class="hljs-keyword">return</span> theme
    }
}
</code></pre>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">attachBaseContext</span><span class="hljs-params">(newBase: <span class="hljs-type">Context</span>)</span></span> {
        <span class="hljs-keyword">super</span>.attachBaseContext(CustomThemeContextWrapper(newBase))
    }
}
</code></pre>
<p>è€æ¨é€è¡Œè§£æä»£ç ï¼šâ€œä½ å…ˆçœ‹è¿™æ®µ <code>CustomThemeContextWrapper</code>ï¼Œå®ƒç»§æ‰¿äº† <code>ContextWrapper</code>ï¼Œæ ¸å¿ƒæ˜¯é‡å†™ <code>getTheme()</code> æ–¹æ³•ï¼Œç»™ä¸Šä¸‹æ–‡é™„åŠ äº†è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼ã€‚â€</p>
<p>â€œå†çœ‹ <code>MyActivity</code>ï¼Œé€šè¿‡ <code>attachBaseContext</code> æ–¹æ³•ï¼ŒæŠŠ <code>newBase</code> åŒ…è£…æˆäº†è¿™ä¸ªè‡ªå®šä¹‰ä¸Šä¸‹æ–‡ã€‚â€</p>
<p>æ—å“ç›¯ç€ä»£ç é‡Œçš„ <code>newBase</code> å…³é”®è¯ï¼Œçœ‰å¤´æ‹§äº†èµ·æ¥ï¼šâ€œè¿™ä¸ª <code>newBase</code> å°±æ˜¯ <code>baseContext</code> å§ï¼Ÿé‚£ <code>Activity</code> çš„ <code>this</code> æ‹¿åˆ°çš„ä¸Šä¸‹æ–‡ï¼Œæ˜¯ä¸æ˜¯åœ¨å®ƒåŸºç¡€ä¸ŠåŒ…è£…å‡ºæ¥çš„ï¼Ÿâ€</p>
<p>â€œå¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä½† <code>this</code> æ˜¯æ¯” <code>baseContext</code> æ›´å®Œæ•´çš„å­˜åœ¨ã€‚â€è€æ¨æŒ‡ç€ä»£ç è§£é‡Šã€‚</p>
<p>â€œ<code>baseContext</code> æ˜¯ <code>Activity</code> çš„â€˜åº•å±‚ä¸Šä¸‹æ–‡â€™ï¼Œè´Ÿè´£å’Œç³»ç»Ÿåº•å±‚äº¤äº’ï¼Œæ¯”å¦‚è·å–èµ„æºã€å¯åŠ¨æœåŠ¡è¿™äº›åŸºç¡€æ“ä½œï¼Œä½ çœ‹åˆ°çš„ <code>newBase</code> å°±æ˜¯ç³»ç»Ÿç»™ <code>Activity</code> åˆ†é…çš„åˆå§‹ <code>baseContext</code>ã€‚â€</p>
<p>ä»–é¡¿äº†é¡¿ï¼Œæ•²äº†æ•² <code>attachBaseContext</code> æ–¹æ³•ï¼Œè®²è§£ <code>this</code> çš„ä½œç”¨ï¼šâ€œè€Œ <code>Activity</code> çš„ <code>this</code>ï¼Œæ˜¯åœ¨ <code>baseContext</code> çš„åŸºç¡€ä¸Šåšäº†â€˜å¢å¼ºâ€™â€”â€”å®ƒå°è£…äº†ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€ç•Œé¢ä¸»é¢˜ã€çª—å£ç»˜åˆ¶è¿™äº›æ ¸å¿ƒèƒ½åŠ›ã€‚â€</p>
<p>ç»“åˆä»£ç ä¸¾ä¾‹ï¼šâ€œå°±åƒè¿™æ®µä»£ç ï¼Œæˆ‘ä»¬ç»™ <code>baseContext</code> åŒ…äº†ä¸€å±‚è‡ªå®šä¹‰ä¸»é¢˜ï¼Œæœ€ç»ˆ <code>this</code> æ‹¿åˆ°çš„ä¸Šä¸‹æ–‡ï¼Œå°±å¸¦ç€è¿™ä¸ªä¸»é¢˜æ ·å¼äº†ã€‚â€</p>
<p>ä¸ºäº†è®©æ—å“æ›´ç›´è§‚ï¼Œè€æ¨ä¸¾äº†ä¸ªå¯¹æ¯”ä¾‹å­ã€‚</p>
<p><code>this</code> çš„ä¼˜åŠ¿ï¼šâ€œä½ ç”¨ <code>this</code> å»åˆ›å»º <code>AlertDialog</code>ï¼Œå®ƒèƒ½è‡ªåŠ¨é€‚é… <code>Activity</code> çš„ä¸»é¢˜ï¼Œå› ä¸º <code>this</code> é‡ŒåŒ…å«äº†ä¸»é¢˜ä¿¡æ¯ã€‚â€</p>
<p><code>baseContext</code> çš„å±€é™ï¼šâ€œä½†ä½ è¦æ˜¯ç”¨ <code>baseContext</code> å»åˆ›å»ºï¼Œå®ƒåªä¼šç”¨ç³»ç»Ÿé»˜è®¤ä¸»é¢˜â€”â€”ç”šè‡³åœ¨æŸäº›ç‰ˆæœ¬é‡Œä¼šå´©æºƒï¼Œå› ä¸º <code>baseContext</code> æ²¡æœ‰ <code>Activity</code> é‚£ç§çª—å£å…³è”èƒ½åŠ›ã€‚â€</p>
<p>â€œé‚£ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ <code>baseContext</code> å•Šï¼Ÿâ€æ—å“è¿½é—®ï¼Œé¡ºæ‰‹æŠŠè€æ¨çš„è¯è®°åœ¨ç¬”è®°æœ¬ä¸Šï¼Œç‰¹æ„ç•™å‡ºè¡¥å……æ¡ˆä¾‹çš„ç©ºç™½ã€‚</p>
<p>â€œç”¨åœ¨ä¸éœ€è¦ç•Œé¢ä¸»é¢˜å’Œç”Ÿå‘½å‘¨æœŸçš„åœºæ™¯ã€‚â€è€æ¨è¡¥å……é“ã€‚</p>
<p>ä»–ç»™å‡ºä¸€å¥æ€»ç»“ï¼Œè¿˜ä¸¾äº†ä¸ªå…·ä½“ä¾‹å­ï¼šâ€œç®€å•è¯´ï¼Œ<code>this</code> æ˜¯â€˜å…¨èƒ½é€‰æ‰‹â€™ï¼Œå¸¦ç•Œé¢å±æ€§ï¼›<code>baseContext</code> æ˜¯â€˜åŸºç¡€å·¥å…·äººâ€™ï¼Œåªå¹²åº•å±‚æ´»ã€‚æ¯”å¦‚ä½ åœ¨ <code>Activity</code> é‡Œæ³¨å†Œé™æ€å¹¿æ’­ï¼Œç”¨ <code>baseContext</code> å°±å¤Ÿäº†â€</p>
<p>å°å®‰å‡‘è¿‡æ¥çœ‹çƒ­é—¹ï¼Œå¬å®Œæç„¶å¤§æ‚Ÿï¼šâ€œæ€ªä¸å¾—æˆ‘ä¸Šæ¬¡æµ‹ä¸€ä¸ªè‡ªå®šä¹‰æŒ‰é’®ï¼Œå¼€å‘çš„æ ·å¼æ€»å‡ºé—®é¢˜ï¼Œæ¢ä¸ªè°ƒç”¨æ–¹å¼å°±å¥½äº†ï¼ŒåŸæ¥é—®é¢˜åœ¨è¿™ï¼â€</p>
<p>è€æ¨ç¬‘ç€çœ‹å‘å°å®‰ï¼Œåˆè½¬å¤´å¯¹æ—å“è¯´ï¼šâ€œå…¶å®æµ‹è¯•å’Œå¼€å‘æ’æŸ¥é—®é¢˜çš„æ€è·¯æ˜¯ç›¸é€šçš„ï¼Œéƒ½èƒ½ä»åœºæ™¯åæ¨ã€‚â€</p>
<p>æ ¸å¿ƒæ’æŸ¥åœºæ™¯ï¼šâ€œä½ å°±ç›¯ç€é‚£äº›å…³é”®åœºæ™¯æµ‹ï¼šæ¯”å¦‚å¯åŠ¨æ–°é¡µé¢ã€å¼¹å¼¹çª—çš„æ ·å¼ï¼Œåå°æ“ä½œç­‰ç­‰ï¼Œå¦‚æœå‡ºé—®é¢˜ï¼Œå¤§æ¦‚ç‡æ˜¯ <code>Context</code> ç”¨é”™äº†ã€‚â€</p>
<p>ä»–è¡¥å……æµ‹è¯•è¦ç‚¹ï¼šâ€œè¿˜æœ‰é‚£äº›å…¨å±€éƒ½èƒ½ç”¨çš„å·¥å…·ï¼Œè¦æ˜¯åœ¨åå°ç”¨å°±å‡ºé—®é¢˜ï¼Œä¹Ÿå¯èƒ½æ˜¯è¿™ä¸ªåŸå› ã€‚ä½ å¤šæ¢å‡ ç§æœºå‹ã€å¤šæµ‹å‡ ä¸ªå‰åå°åˆ‡æ¢çš„åœºæ™¯ï¼Œé—®é¢˜è‡ªç„¶å°±éœ²å‡ºæ¥äº†ã€‚â€</p>
<p>å¸¦ç€è¿™äº›æ”¶è·ï¼Œæ—å“åœ¨æ¥ä¸‹æ¥çš„ä¸€å‘¨é‡Œï¼ŒæŠŠé¡¹ç›®é‡Œæ‰€æœ‰æ¶‰åŠ <code>Context</code> çš„åœ°æ–¹éƒ½ç³»ç»Ÿæ¢³ç†äº†ä¸€éã€‚</p>
<p>ä»–ç”šè‡³æ€»ç»“å‡ºä¸‰æ¡è§„èŒƒè®°åœ¨å›¢é˜Ÿå…±äº«æ–‡æ¡£é‡Œï¼šâ€œ1. å…¨å±€å·¥å…·ç±»å­˜ <code>Application Context</code>ï¼›2. ç•Œé¢ç›¸å…³æ“ä½œå¿…é¡»ä¼  <code>Activity Context</code> ä¸”å®æ—¶è°ƒç”¨ï¼›3. åå°ç¨‹åºç¦ç”¨ç•Œé¢ç±» <code>Context</code>ã€‚â€</p>
<p>å°å®‰åˆ™å‘æŒ¥æµ‹è¯•ä¼˜åŠ¿ï¼Œè®¾è®¡äº†ä¸€å¥—â€œå…¨åœºæ™¯è¦†ç›–ç”¨ä¾‹â€ï¼Œä»å‰å°æ“ä½œã€åå°é©»ç•™ã€è¿›ç¨‹é‡å¯åˆ°ä½ç”µé‡æ¨¡å¼ï¼Œåå¤æµ‹è¯•ï¼Œç¡®ä¿ <code>Context</code> ç›¸å…³çš„å´©æºƒå’Œæ³„æ¼é—®é¢˜å½»åº•ç»è¿¹ã€‚</p>
<p>å‘¨äº”å‚æ™šçš„ç ”å‘åŒºæ¸æ¸å®‰é™ï¼Œå·¥ä½ç¯ä¸€ç›ç›ç†„ç­ï¼Œåªå‰©æ—å“ã€è€æ¨å’Œå°å®‰çš„åº§ä½è¿˜äº®ç€ã€‚å°å®‰ä¸€è¾¹æ”¶æ‹¾æµ‹è¯•æœºä¸€è¾¹éšå£è¯´é“ï¼šâ€œæ—å“ï¼Œå¼ ç»„é•¿ä»Šå¤©Reviewä½ æäº¤çš„ä»£ç ï¼Œè·Ÿæˆ‘è¯´â€˜è¿™å°å­ç°åœ¨å†™çš„ä¸œè¥¿è¶Šæ¥è¶Šç¨³äº†â€™ï¼Œè¿˜è¿½é—®æ˜¯è°å¸¦çš„ä½ å‘¢ã€‚â€</p>
<p>æ—å“åˆšæ”¹å®Œæœ€åä¸€è¡Œæ³¨é‡Šï¼Œé—»è¨€æŠ¬å¤´çœ‹å‘æ­£åœ¨æ•´ç†æ–‡æ¡£çš„è€æ¨ï¼Œè„¸ä¸Šå¸¦ç€ç‚¹ä¸å¥½æ„æ€çš„ç¬‘ï¼Œä»æŠ½å±‰é‡Œæ‘¸å‡ºä¸€ç“¶å¯ä¹é€’è¿‡å»ï¼šâ€œå…¨é æ¨å·¥æŒ‡ç‚¹ï¼Œä¸ç„¶æˆ‘ç°åœ¨è¿˜åœ¨ <code>Context</code> çš„è¿·é›¾é‡Œæ‰“è½¬å‘¢ã€‚â€</p>
<p>è€æ¨æ²¡ç›´æ¥å–ï¼Œé¡ºæ‰‹æŠŠå¯ä¹å¡è¿›äº†å£è¢‹ï¼šâ€œæˆ‘ä¸çˆ±å–ç”œçš„ã€‚â€</p>
<p>ä»–ç«¯èµ·æªç“·æ¯ç»§ç»­å–ï¼Œè¤è‰²æ¶²ä½“åœ¨æ¯å£ä¸Šç•™ä¸‹æ·¡æ·¡çš„æ¸ç—•ã€‚</p>
<p>â€œä¸æ˜¯æˆ‘æŒ‡ç‚¹å¾—å¥½ï¼Œæ˜¯ä½ è‚¯é’»ã€‚â€è€æ¨æ”¾ä¸‹æ¯å­ï¼Œæ¯åº•ä¸æ¡Œé¢ç¢°æ’å‘å‡ºè½»å“ï¼Œä¸€è‚¡æ··æ‚ç€ç„¦é¦™å’ŒèŒ¶é¦™çš„å‘³é“é£˜äº†è¿‡æ¥ï¼Œâ€œæŠ€æœ¯è¿™ä¸œè¥¿ï¼Œå…‰çœ‹ç†è®ºæ²¡ç”¨ï¼Œå¾—è‡ªå·±è¯•é”™æ‰çŸ¥é“å•¥é€‚åˆè‡ªå·±ã€‚â€</p>
<p>å°å®‰æ­£æ”¶æ‹¾åˆ°ä¸€åŠï¼ŒæŠ½ç€é¼»å­å‡‘è¿‡æ¥ï¼šâ€œæ¨å·¥ï¼Œä½ è¿™æ¯å­é‡Œæ³¡çš„å•¥å‘€ï¼Ÿé—»ç€ä¸åƒçº¯èŒ¶ã€‚â€</p>
<p>æ—å“ä¹Ÿå¥½å¥‡åœ°ç¥äº†çœ¼æ¯å­é‡Œæ·±è¤è‰²çš„æ¶²ä½“ï¼Œè´¨åœ°æ¯”èŒ¶æ°´æµ“ç¨ äº›ã€‚</p>
<p>è€æ¨æœ‰ç‚¹ä¸å¥½æ„æ€åœ°æŒ æŒ å¤´ï¼šâ€œå‰å‡ å¤©èµ¶ç‰ˆæœ¬ç†¬å¤§å¤œï¼Œå›°å¾—æ…Œå°±çå…‘çš„â€”â€”ç»¿èŒ¶åŠ å’–å•¡ï¼Œæç¥åŠ²å„¿ç¿»å€ã€‚â€</p>
<p>â€œå•Šï¼ŸèŒ¶å’Œå’–å•¡æ··ç€å–ï¼Ÿâ€å°å®‰çœ¼ç›çªåœ†äº†ï¼Œâ€œé‚£æ˜¯ä»€ä¹ˆå¥‡æ€ªå‘³é“ï¼Ÿåˆè‹¦åˆæ¶©å—ï¼Ÿâ€</p>
<p>â€œè¿˜è¡Œï¼Œå–æƒ¯äº†å°±å¥½ï¼Œæ¯”çº¯å’–å•¡å°‘ç‚¹é…¸å‘³å„¿ï¼Œæ¯”æµ“èŒ¶å¤šè‚¡åŠ²å„¿ã€‚â€è€æ¨ç¬‘ç€æ‘†æ‰‹ï¼ŒæŠŠè¯é¢˜æ‹‰å›æŠ€æœ¯ã€‚</p>
<p>ä»–ç”¨è¿™ä¸ªä¾‹å­æ‰“æ¯”æ–¹ï¼šâ€œå°±åƒ <code>Context</code> è¿™çŸ¥è¯†ç‚¹ï¼ŒèƒŒä¸€ä¸‡éç†è®ºä¸å¦‚è¸©ä¸€æ¬¡å‘ï¼Œè¸©ä¸€æ¬¡å‘ä¸å¦‚è§£å†³ä¸€æ¬¡é—®é¢˜ã€‚â€</p>
<p>â€œå°±åƒ <code>Context</code> è¿™çŸ¥è¯†ç‚¹ï¼ŒèƒŒä¸€ä¸‡éç†è®ºä¸å¦‚è¸©ä¸€æ¬¡å‘ï¼Œè¸©ä¸€æ¬¡å‘ä¸å¦‚è§£å†³ä¸€æ¬¡é—®é¢˜ã€‚â€</p>
<p>ä»–è¯é”‹ä¸€è½¬è¯´èµ·æ­£äº‹ï¼Œçœ¼ç¥é‡Œå¸¦ç€ç‚¹æœŸè®¸ï¼šâ€œå¯¹äº†ï¼Œä¸‹å‘¨ç»„é‡Œä¼šæ¥å‡ ä¸ªå®ä¹ ç”Ÿï¼ŒåŸºç¡€æœ‰ç‚¹è–„å¼±ï¼Œæˆ‘è·Ÿå¼ ç»„é•¿åˆè®¡è¿‡ï¼Œè®©ä½ å¸¦å¸¦å®ƒä»¬ã€‚ä½ è¶è¿™ä¸¤å¤©æŠŠAndroidå››å¤§ç»„ä»¶çš„çŸ¥è¯†ç‚¹è¿‡ä¸€éï¼Œå°¤å…¶æ˜¯ <code>Activity</code> å’Œ <code>Service</code> çš„ç”Ÿå‘½å‘¨æœŸâ€”â€”æ­£å¥½æŠŠä½ è¿™æ®µæ—¶é—´è¸©çš„å‘ï¼Œéƒ½è½¬åŒ–æˆç»éªŒæ•™ç»™ä»–ä»¬ã€‚â€</p>
<p>æ—å“çœ¼ç›ä¸€äº®ï¼Œç”¨åŠ›ç‚¹å¤´ï¼Œæ‰‹æŒ‡æ— æ„è¯†åœ°æ‘©æŒ²ç€æ‰‹æœºé‡Œçš„ <code>Context</code> ç¬”è®°â€”â€”ä»å‰è¿ <code>Context</code> ç±»å‹éƒ½åˆ†ä¸æ¸…çš„è‡ªå·±ï¼Œå¦‚ä»Šå±…ç„¶èƒ½æŒ‡å¯¼æ–°äººäº†ï¼Œè¿™ç§æˆé•¿çš„è¸å®æ„Ÿæ ¼å¤–çœŸåˆ‡ã€‚</p>
<p>ä»–ä½å¤´çœ‹å‘æ‰‹æœºé‡Œåˆšæ•´ç†çš„ <code>Context</code> ç¬”è®°ï¼Œä¸Šé¢è€æ¨çš„æ‰¹æ³¨æ ¼å¤–é†’ç›®ï¼šâ€œ<code>Context</code> æ˜¯åº”ç”¨çš„æ ¹ï¼Œç”¨å¯¹äº†æ˜¯æ¡¥æ¢ï¼Œç”¨é”™äº†æ˜¯é™·é˜±ã€‚â€</p>
<p>è¥¿äºŒæ——çš„ç ”å‘åŒºç¯å…‰é€è¿‡ç»ç’ƒçª—æ´’ä¸‹æ¥ï¼Œç…§äº®äº†ç¬”è®°ä¸Šçš„å­—è¿¹ï¼Œä¹Ÿç…§äº®äº†ä»–ä»â€œè¸©å‘è€…â€åˆ°â€œå¼•è·¯äººâ€çš„é€†è¢­æ–¹å‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nest.js / hono.js ä¸€èµ·å­¦ï¼å¼€å‘å‰å¿…å¤‡ï¼]]></title>    <link>https://juejin.cn/post/7581448482544713754</link>    <guid>https://juejin.cn/post/7581448482544713754</guid>    <pubDate>2025-12-09T02:56:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581448482544713754" data-draft-id="7580197740963151898" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nest.js / hono.js ä¸€èµ·å­¦ï¼å¼€å‘å‰å¿…å¤‡ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2025-12-09T02:56:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nest.js / hono.js ä¸€èµ·å­¦ï¼å¼€å‘å‰å¿…å¤‡ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:56:16.000Z" title="Tue Dec 09 2025 02:56:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æ¬¢è¿åˆ°æˆ‘ä»¬çš„äº¤æµç¾¤ä¸€èµ·äº¤æµå„ç§å‰ç«¯æŠ€æœ¯ï¼ŒåŒæ—¶æ¬¢è¿è®¿é—®æˆ‘çš„ headless ç»„ä»¶åº“ï¼ŒåŒæ—¶æ„Ÿè°¢ä½ çš„ starï¼š</p>
<ul>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.frontlight.tech%2F" title="https://link.juejin.cn/?target=https%3A%2F%2Fwww.frontlight.tech%2F" target="_blank">å›½å†…å®˜ç½‘</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank">æ„Ÿè°¢ github star</a></li>
</ul>
<hr/>
<p>nest.js / hono.js ä¸€èµ·å­¦ç³»åˆ—ï¼Œæœ€ç»ˆä¼šå°è£…ä¸€ä¸ªé€šç”¨çš„æ¶å­ï¼Œä¾‹å¦‚æœ‰é‰´æƒï¼Œæ—¥å¿—æ”¶é›†ï¼Œå¤šç¯å¢ƒé…ç½®ç­‰ç­‰åŠŸèƒ½ï¼Œç”¨ä¸¤ç§æ¡†æ¶å»å®ç°ã€‚
ä¹‹å‰å†™äº†ä¸¤ç¯‡å…³äºè¿™ä¸¤ä¸ªæ¡†æ¶ç¼–ç¨‹æ€æƒ³ç›¸å…³çš„</p>
<ul>
<li><a href="https://juejin.cn/post/7576555431943503882" target="_blank" title="https://juejin.cn/post/7576555431943503882">æ·±å…¥ Nestjs åº•å±‚æ¦‚å¿µï¼ˆ1ï¼‰ï¼šä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP</a></li>
<li><a href="https://juejin.cn/post/7580564126403362866" target="_blank" title="https://juejin.cn/post/7580564126403362866">nest.js / hono.js ä¸€èµ·â€¦</a></li>
</ul>
<p>è¿™ä¸€ç¯‡ä¸»è¦æ˜¯æ¶‰åŠåˆ°æˆ‘ä»¬é©¬ä¸Šå¼€å‘å‰éœ€è¦å…·å¤‡çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>å‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨</li>
<li>æœ€ä½³å·¥ç¨‹å®è·µï¼ˆç›®å½•è§„åˆ’ç¯‡ï¼‰</li>
<li>å¦‚ä½•è°ƒè¯•</li>
<li>docker å…¥é—¨ + æ·±å…¥ docker åŸºæœ¬åŸç†</li>
</ul>
<h2 data-id="heading-1">å‘½ä»¤è¡Œä¸Šæ‰‹</h2>
<h3 data-id="heading-2">å…¨å±€å®‰è£… CLI</h3>
<p>å»ºè®®ï¼Œå…¨å±€å®‰è£… CLIï¼Œ ç„¶åè¯•ç€åˆ›å»ºä¸€ä¸ªé¡¹ç›®è¯•è¯•ï¼š</p>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> -g <span class="hljs-keyword">@nestjs</span>/cli
nest new project-name
</code></pre>
<p>åç»­ï¼Œä½ æŒ‰ç…§å‘½ä»¤è¡Œæç¤ºå³å¯å®Œæˆé¡¹ç›®åˆå§‹åŒ–ï¼Œç„¶åå®‰è£…å®ŒåŒ…ï¼Œæœ€åçœ‹ä¸€ä¸‹ package.json ä¸­ scripts ä¸­çš„å¯åŠ¨å‘½ä»¤æ˜¯ä»€ä¹ˆï¼Œå¯åŠ¨é¡¹ç›®å³å¯ã€‚</p>
<p>hono.js åˆå§‹åŒ–é¡¹ç›®æ˜¯é‡‡ç”¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">npm <span class="hljs-keyword">create</span> hono<span class="hljs-variable">@latest</span> project<span class="hljs-operator">-</span>name
</code></pre>
<p>åŒæ ·ï¼Œä½ æŒ‰ç…§å‘½ä»¤è¡Œæç¤ºå³å¯å®Œæˆé¡¹ç›®åˆå§‹åŒ–ï¼Œç„¶åå®‰è£…å¯¹åº”çš„åŒ…å³å¯ï¼Œæœ€åçœ‹ä¸€ä¸‹ package.json ä¸­ scripts ä¸­çš„å¯åŠ¨å‘½ä»¤æ˜¯ä»€ä¹ˆï¼Œå¯åŠ¨é¡¹ç›®å³å¯ã€‚</p>
<p>ä½†æ˜¯ hono.js å¹¶æ²¡æœ‰ç±»ä¼¼ nest çš„ cli ç®¡ç†å·¥å…·ï¼Œæ¯•ç«Ÿ nest çš„å†™æ³•è¦ç¹çå¾ˆå¤šï¼Œæ‰€ä»¥å®˜æ–¹æä¾›äº†ä¸€äº›å¿«é€Ÿåˆ›å»ºæ¨¡æ¿çš„å‘½ä»¤ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">nest --<span class="hljs-built_in">help</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3e3c9b3dd31474a853e6b51c3365065~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=wYeiPJuoEG94qx8PJq0%2F1sQmZ4M%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€å¸¸è§çš„ä½¿ç”¨ generate æˆ–è€… g æ¥ç”Ÿæˆæ¨¡æ¿, æˆ‘ä»¬å¯ä»¥ç”¨ -d å‘½ä»¤ï¼Œæ¥è®© cli å‘Šè¯‰ä½ ï¼Œä½ çš„ generate æˆ–è€… g å‘½ä»¤ä¼šç”Ÿæˆä»€ä¹ˆæ–‡ä»¶ï¼Œå’±ä»¬æ¥è¯•è¯•ï¼Œå‡è®¾æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ª åå­—ä¸º user çš„ class</p>
<pre><code class="hljs language-kotlin" lang="kotlin">nest g <span class="hljs-keyword">class</span> <span class="hljs-title class_">user</span> -<span class="hljs-title">d</span> 
</code></pre>
<p>æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss">CREATE <span class="hljs-attribute">src</span>/user/user<span class="hljs-selector-class">.spec</span><span class="hljs-selector-class">.ts</span> (<span class="hljs-number">139</span> bytes)
CREATE <span class="hljs-attribute">src</span>/user/user<span class="hljs-selector-class">.ts</span> (<span class="hljs-number">21</span> bytes)
Dry run enabled. No files written to disk.
</code></pre>
<p>æ³¨æ„æœ€åä¸€è¡Œï¼š No files written to disk. ä¹Ÿå°±æ˜¯æ²¡æœ‰çœŸçš„æŠŠæ–‡ä»¶å†™å…¥ï¼Œè€Œæ˜¯æç¤ºå¦‚æœä½ ä½¿ç”¨<code>nest g class user</code> å¯èƒ½åˆ›å»ºçš„æ–‡ä»¶æœ‰å“ªäº›ã€‚</p>
<p>è¿˜æœ‰ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™ä¸å¤ªå–œæ¬¢æµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨</p>
<pre><code class="hljs language-kotlin" lang="kotlin">nest g <span class="hljs-keyword">class</span> <span class="hljs-title class_">user</span> --<span class="hljs-title">no</span>-<span class="hljs-title">spec</span>
</code></pre>
<p>æ¥çœå»æµ‹è¯•æ–‡ä»¶çš„åˆ›å»ºã€‚</p>
<h2 data-id="heading-3">æœ€ä½³å·¥ç¨‹å®è·µ</h2>
<p>æˆ‘ä»¬è¿™é‡Œåˆ—ä¸¾ä¸€äº›æ¯”è¾ƒå¥½çš„å·¥ç¨‹å®è·µçš„ç‚¹ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·è®¨è®ºã€‚</p>
<h3 data-id="heading-4">å·¥ç¨‹ç›®å½•</h3>
<p>æˆ‘ä»¬é‡‡ç”¨â€çº¦å®šå¤§äºé…ç½®â€œçš„æ€æƒ³ï¼Œæ— è®ºä½¿ç”¨ä»€ä¹ˆ node.js åç«¯æ¡†æ¶ï¼Œæˆ‘ä»¬çš„ç›®å½•åå°½å¯èƒ½ä¸€è‡´ã€‚</p>
<p>nest.js çš„å»ºè®®ï¼Œå¦‚æœä»¥ä¸‹ç›®å½•åæ„æ€ä¸æ¸…æ¥šæ²¡å…³ç³»ï¼Œåç»­å­¦åˆ°æ§åˆ¶å™¨ï¼Œservice ç­‰ç­‰ç« èŠ‚çš„æ—¶å€™ï¼Œå°±ä¼šæ˜ç™½äº†ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">src/
â”œâ”€â”€ modules/              <span class="hljs-comment"># æ ¸å¿ƒï¼šæŒ‰ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†çš„æ¨¡å—</span>
â”‚   â”œâ”€â”€ users/            <span class="hljs-comment"># ç”¨æˆ·æ¨¡å—</span>
â”‚   â”‚   â”œâ”€â”€ dto/          <span class="hljs-comment"># æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆè¯·æ±‚/å“åº”ç»“æ„ï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ entities/     <span class="hljs-comment"># æ•°æ®åº“å®ä½“</span>
â”‚   â”‚   â”œâ”€â”€ users.controller.ts
â”‚   â”‚   â”œâ”€â”€ users.service.ts
â”‚   â”‚   â””â”€â”€ users.<span class="hljs-keyword">module</span>.ts
â”‚   â””â”€â”€ products/         <span class="hljs-comment"># äº§å“æ¨¡å—ï¼ˆç»“æ„ç±»ä¼¼ç”¨æˆ·æ¨¡å—ï¼‰</span>
â”œâ”€â”€ common/               <span class="hljs-comment"># å…±äº«èµ„æº</span>
â”‚   â”œâ”€â”€ filters/          <span class="hljs-comment"># å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨</span>
â”‚   â”œâ”€â”€ interceptors/     <span class="hljs-comment"># æ‹¦æˆªå™¨</span>
â”‚   â””â”€â”€ guards/           <span class="hljs-comment"># å®ˆå«</span>
â”œâ”€â”€ config/               <span class="hljs-comment"># å…¨å±€é…ç½®</span>
â”œâ”€â”€ database/             <span class="hljs-comment"># æ•°æ®åº“è¿æ¥é…ç½®        </span>
â””â”€â”€ app.<span class="hljs-keyword">module</span>.ts         <span class="hljs-comment"># åº”ç”¨æ ¹æ¨¡å—</span>
</code></pre>
<p>æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼š</p>
<ul>
<li>åŠŸèƒ½å†…èšï¼šä¸â€œç”¨æˆ·â€ç›¸å…³çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆæ§åˆ¶å™¨ã€æœåŠ¡ã€å®ä½“ã€DTOï¼‰éƒ½åº”æ”¾åœ¨ users ç›®å½•ä¸‹ã€‚</li>
<li>åˆ†å±‚ç®¡ç†ï¼šä½¿ç”¨ commonã€core ç­‰ç›®å½•ç®¡ç†è·¨æ¨¡å—å…±äº«çš„ç»„ä»¶å’Œå…¨å±€é…ç½®ã€‚</li>
</ul>
<p>hono.js çš„å»ºè®®å¦‚ä¸‹ï¼Œå½“ç„¶ config ,utils è¿™äº›æ¯”è¾ƒå¸¸è§çš„å…¨å±€æ¨¡å—ä¹Ÿå¯ä»¥æåˆ°ç¬¬ä¸€å±‚çº§ï¼Œä¹Ÿå°±æ˜¯ src ç›®å½•ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">src/
â”œâ”€â”€ modules/                <span class="hljs-meta"># æ¯ä¸ªæ¨¡å—ç‹¬ç«‹</span>
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ routes.ts       <span class="hljs-meta"># åªæ”¾è·¯ç”±æ³¨å†Œï¼ˆè–„å±‚ï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ controller/     <span class="hljs-meta"># handlers æ§åˆ¶å™¨å±‚</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="hljs-keyword">get</span>-user.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ list-users.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ create-user.ts
â”‚   â”‚   â”‚   â””â”€â”€ update-user.ts
â”‚   â”‚   â”œâ”€â”€ service/        <span class="hljs-meta"># ä¸šåŠ¡é€»è¾‘</span>
â”‚   â”‚   â”‚   â””â”€â”€ user.service.ts
â”‚   â”‚   â”œâ”€â”€ repository/     <span class="hljs-meta"># DB / å¤–éƒ¨API</span>
â”‚   â”‚   â”‚   â””â”€â”€ user.repo.ts
â”‚   â”‚   â”œâ”€â”€ middleware/     <span class="hljs-meta"># ä¸ user æ¨¡å—å¼ºç›¸å…³çš„ä¸­é—´ä»¶</span>
â”‚   â”‚   â”‚   â””â”€â”€ user-auth.middleware.ts
â”‚   â”‚   â”œâ”€â”€ validators/     <span class="hljs-meta"># DTO / æ ¡éªŒå™¨ï¼ˆzod / valibotï¼‰</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ create-user.validator.ts
â”‚   â”‚   â”‚   â””â”€â”€ update-user.validator.ts
â”‚   â”‚   â”œâ”€â”€ dto/            <span class="hljs-meta"># è¯·æ±‚ / å“åº”ç±»å‹</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ user.dto.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ constants.ts    <span class="hljs-meta"># ä¸ user ç›¸å…³çš„å¸¸é‡</span>
â”‚   â”‚   â”œâ”€â”€ index.ts        <span class="hljs-meta"># æ¨¡å—æ€»å‡ºå£</span>
â”‚   â”‚   â””â”€â”€ types.ts        <span class="hljs-meta"># æ¨¡å—ç›¸å…³ç±»å‹</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ product/
â”‚   â”‚   â”œâ”€â”€ routes.ts
â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ validators/
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚
â”‚   â””â”€â”€ auth/
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ common/                 <span class="hljs-meta"># å…¨å±€å¤ç”¨å±‚ï¼ˆä¸å±äºä»»ä½•æ¨¡å—ï¼‰</span>
â”‚   â”œâ”€â”€ app.ts              <span class="hljs-meta"># app åˆå§‹åŒ–ï¼ˆå…¨å±€ä¸­é—´ä»¶ã€é”™è¯¯å¤„ç†ï¼‰</span>
â”‚   â”œâ”€â”€ router.ts           <span class="hljs-meta"># åˆå¹¶ modules çš„ routes</span>
â”‚   â”œâ”€â”€ middlewares/        <span class="hljs-meta"># å…¨å±€ä¸­é—´ä»¶</span>
â”‚   â”œâ”€â”€ config/             <span class="hljs-meta"># é…ç½®ï¼ˆDBã€ENVç­‰ï¼‰</span>
â”‚   â”œâ”€â”€ utils/              <span class="hljs-meta"># å·¥å…·</span>
â”‚   â”œâ”€â”€ errors/             <span class="hljs-meta"># å…¨å±€é”™è¯¯ç±»</span>
â”‚   â”œâ”€â”€ types/              <span class="hljs-meta"># å…¨å±€ç±»å‹</span>
â”‚   â””â”€â”€ logging/            <span class="hljs-meta"># æ—¥å¿—ç³»ç»Ÿ</span>
|    <span class="hljs-meta"># ä¹Ÿå¯ä»¥æŠŠä¸€äº›é‡è¦æ¨¡å—å•ç‹¬æ”¾åœ¨æ ¹ç›®å½•ï¼Œä¾‹å¦‚ config ï¼Œ log</span>
â”‚
â””â”€â”€ index.ts                <span class="hljs-meta"># å¯åŠ¨æ–‡ä»¶</span>
</code></pre>
<p>æ³¨æ„ï¼šä¹Ÿå¯ä»¥æŠŠä¸€äº›é‡è¦æ¨¡å—å•ç‹¬æ”¾åœ¨æ ¹ç›®å½•ï¼Œä¾‹å¦‚ config ï¼Œ logç­‰ç­‰ï¼Œçœ‹ä¸šåŠ¡éœ€è¦ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å€Ÿé‰´ä¸€ä¸‹ angular å›¢é˜Ÿçš„ä¸€äº›ä»£ç é£æ ¼æŒ‡å—ã€‚ä¾‹å¦‚</p>
<ul>
<li>
<p>æ€»åˆ™</p>
<ul>
<li>åšæŒæ¯ä¸ªæ–‡ä»¶åªå®šä¹‰ä¸€æ ·ä¸œè¥¿ï¼ˆä¾‹å¦‚æœåŠ¡æˆ–è€…ç»„ä»¶ï¼‰</li>
<li>è€ƒè™‘æŠŠæ–‡ä»¶å¤§å°é™åˆ¶åœ¨ 400 è¡Œä»£ç ä»¥å†…</li>
<li>åšæŒå®šä¹‰ç®€å•å‡½æ•°æ¥ç»„è£…å¤æ‚å‡½æ•°</li>
</ul>
</li>
<li>
<p>å‘½å</p>
<ul>
<li>ä½¿ç”¨ç‚¹å’Œæ¨ªæ æ¥é£æ ¼æ–‡ä»¶åï¼Œä¸å»ºè®®é©¼å³°</li>
<li>åšæŒåœ¨æè¿°æ€§åå­—ä¸­ï¼Œç”¨æ¨ªæ åˆ†å‰²å•è¯</li>
<li>åšæŒéµå®ˆå…ˆæè¿°ç»„ä»¶ç‰¹æ€§ï¼Œå†æè¿°å®ƒçš„ç±»å‹çš„æ¨¡å¼ï¼Œä¾‹å¦‚ <code>feature.type.ts</code></li>
</ul>
</li>
</ul>
<h2 data-id="heading-5">è°ƒè¯•</h2>
<p>æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹ï¼Œå¦‚ä½•å€ŸåŠ© vscode(å…¶å®ƒç¼–è¾‘å™¨ï¼Œcursorï¼Œtrae æ˜¯åŒæ ·çš„æ–¹å¼)ï¼Œæ¥è°ƒè¯• nest.js å’Œ hono.js ä»£ç </p>
<p>é¦–å…ˆæˆ‘ä»¬ç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•è°ƒè¯•å•æ–‡ä»¶ node.js æ–‡ä»¶ï¼Œè¿™ä¸ªå¯¹äºæˆ‘ä»¬ demo ä¹Ÿç®—æ¯”è¾ƒæœ‰ç”¨ã€‚</p>
<p>é¦–å…ˆï¼Œéšä¾¿åœ¨è·Ÿç›®å½•å»ºä¸€ä¸ª index.js</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c45d47e0ad943d790c6d0a8139d3c44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=yOeuyBtLV8icdUet5MkUMcBGtGs%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åæˆ‘ä»¬åœ¨ç¬¬ 6 è¡Œï¼Œæ‰“äº†ä¸€ä¸ªæ–­ç‚¹ï¼Œå¯ä»¥çœ‹åˆ°çº¢è‰²æ ‡è®°ã€‚ç„¶åå†æ ¹ç›®å½•ï¼Œå»ºç«‹ä¸€ä¸ª .vscode æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹å†…å»ºç«‹ä¸€ä¸ª launch.json</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2479c2b99bcf4a659b9474a83bc76302~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=KknRi82WS8CjI46HtBnJhc3ho7s%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ç€ç‚¹å‡» å¦‚ä¸‹çš„ bug æŒ‰é’®ï¼Œå°±å¯ä»¥è°ƒè¯•äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7dd4671a138a4eff9be825e236830162~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=FvNBsGJMUCkWds6vY4ykzaodzBc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">è°ƒè¯• nest</h3>
<p>è°ƒè¯• nest å’Œ hono éƒ½å¾ˆç›¸ä¼¼ï¼Œåªæ˜¯ launch.json çš„é…ç½®ä¸ä¸€æ ·ï¼Œ</p>
<p>æˆ‘ä»¬ launch.json çš„é…ç½®å¦‚ä¸‹ï¼ˆè°ƒè¯• nest çš„ï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-comment">// é…ç½®æ–‡ä»¶çš„ç‰ˆæœ¬å·ï¼Œéµå¾ªVSCodeè°ƒè¯•åè®®ã€‚0.2.0æ˜¯å½“å‰å¸¸ç”¨ç‰ˆæœ¬ã€‚</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// å®šä¹‰è°ƒè¯•é…ç½®çš„æ•°ç»„ï¼Œä¸€ä¸ªæ–‡ä»¶å¯ä»¥åŒ…å«å¤šä¸ªç‹¬ç«‹çš„è°ƒè¯•é…ç½®ã€‚</span>
  <span class="hljs-attr">"configurations"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// æŒ‡å®šè°ƒè¯•å™¨ç±»å‹ã€‚`node` è¡¨ç¤ºä½¿ç”¨Node.jsè°ƒè¯•é€‚é…å™¨ï¼Œç”¨äºè°ƒè¯•JavaScript/TypeScriptã€‚</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-comment">// è°ƒè¯•è¯·æ±‚ç±»å‹ã€‚`launch` è¡¨ç¤ºå¯åŠ¨ä¸€ä¸ªæ–°ç¨‹åºè¿›è¡Œè°ƒè¯•ï¼›å¦ä¸€ç§æ˜¯`attach`ï¼ˆé™„åŠ åˆ°å·²è¿è¡Œè¿›ç¨‹ï¼Œ è¿™ä¸ªä¸çº ç»“ï¼Œæˆ‘ä»¬éƒ½ç”¨ launchï¼‰ã€‚</span>
      <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"launch"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-comment">// åœ¨VSCodeè°ƒè¯•ä¸‹æ‹‰èœå•ä¸­æ˜¾ç¤ºçš„åç§°ï¼Œéšä¾¿èµ·ä¸ªå°±è¡Œã€‚</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Launch Program"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-comment">// æŒ‡å®šå®é™…ç”¨æ¥è¿è¡Œç¨‹åºçš„å‘½ä»¤ã€‚è¿™é‡Œä½¿ç”¨`pnpm`åŒ…ç®¡ç†å™¨ä½œä¸ºå¯åŠ¨å™¨ã€‚</span>
      <span class="hljs-comment">// å¦‚æœä¸è®¾ç½®æ­¤é¡¹ï¼Œé»˜è®¤å€¼ä¸º`node`ã€‚</span>
      <span class="hljs-attr">"runtimeExecutable"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-comment">// ä¼ é€’ç»™`runtimeExecutable`ï¼ˆpnpmï¼‰çš„å‘½ä»¤è¡Œå‚æ•°ã€‚</span>
      <span class="hljs-comment">// ç­‰åŒäºåœ¨ç»ˆç«¯æ‰§è¡Œï¼š`pnpm run start:dev`</span>
      <span class="hljs-attr">"runtimeArgs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"run"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"start:dev"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-comment">// `runtimeVersion`ä¸»è¦ç”¨äºé€šè¿‡`nvm`ç­‰ç‰ˆæœ¬ç®¡ç†å™¨åˆ‡æ¢Nodeç‰ˆæœ¬ã€‚</span>
      <span class="hljs-attr">"runtimeVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"20.16.0"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-comment">// è°ƒè¯•æ—¶è·³è¿‡ï¼ˆä¸è¿›å…¥ï¼‰çš„æ–‡ä»¶ã€‚</span>
      <span class="hljs-comment">// `&lt;node_internals&gt;/**` è¡¨ç¤ºè·³è¿‡æ‰€æœ‰Node.jså†…ç½®æ ¸å¿ƒæ¨¡å—ä»£ç ï¼Œä½¿è°ƒè¯•æ›´èšç„¦äºåº”ç”¨è‡ªèº«ã€‚</span>
      <span class="hljs-attr">"skipFiles"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"&lt;node_internals&gt;/**"</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™é‡Œçš„å…³é”®æ˜¯ä»€ä¹ˆå‘¢ï¼Œå°±æ˜¯ runtimeExecutable + runtimeArgsï¼Œ runtimeExecutable ä»£è¡¨æˆ‘ä»¬æ‰§è¡Œçš„å‘½ä»¤ä½¿ç”¨ pnpm, ä½ å¯ä»¥æ”¹ä¸º yarnï¼Œ npmï¼Œéƒ½è¡Œï¼Œç„¶åæ‰§è¡Œçš„å‘½ä»¤å‚æ•°runtimeArgsï¼Œåˆèµ·æ¥å°±æ˜¯</p>
<pre><code class="hljs language-arduino" lang="arduino">pnpm run start:dev
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼Œå› ä¸º start:dev æ˜¯ nest.js çš„ package.json ä¸­æ³¨æ˜çš„å¯åŠ¨å¼€å‘ç¯å¢ƒçš„å‘½ä»¤,å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">"scripts": {
    "build": "nest build",
    "format": "prettier --write \"src<span class="hljs-comment">/**/</span><span class="hljs-operator">*</span>.ts\" \"test<span class="hljs-comment">/**/</span><span class="hljs-operator">*</span>.ts\"",
    "start": "nest start",
    "start:dev": "nest start --watch",
    "start:debug": "nest start --debug --watch",
    "start:prod": "node dist/main",
    "lint": "eslint \"{src,apps,libs,test}<span class="hljs-comment">/**/</span><span class="hljs-operator">*</span>.ts\" --fix",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:cov": "jest --coverage",
    "test:debug": "node --inspect-brk -r tsconfig-paths/register -r ts-node/register node_modules/.bin/jest --runInBand",
    "test:e2e": "jest --config ./test/jest-e2e.json"
  },
</code></pre>
<p>å½“ç„¶ï¼Œä½ å¯ä»¥ç”¨ start å‘½ä»¤ï¼Œstart:debug å‘½ä»¤éƒ½è¡Œï¼Œå‡è®¾å°±ç”¨</p>
<pre><code class="hljs language-perl" lang="perl"> // æŒ‡å®šå®é™…ç”¨æ¥è¿è¡Œç¨‹åºçš„å‘½ä»¤ã€‚è¿™é‡Œä½¿ç”¨<span class="hljs-string">`pnpm`</span>åŒ…ç®¡ç†å™¨ä½œä¸ºå¯åŠ¨å™¨ã€‚
      // å¦‚æœä¸è®¾ç½®æ­¤é¡¹ï¼Œé»˜è®¤å€¼ä¸º<span class="hljs-string">`node`</span>ã€‚
      <span class="hljs-string">"runtimeExecutable"</span>: <span class="hljs-string">"pnpm"</span>,
      <span class="hljs-regexp">//</span> ä¼ é€’ç»™<span class="hljs-string">`runtimeExecutable`</span>ï¼ˆpnpmï¼‰çš„å‘½ä»¤è¡Œå‚æ•°ã€‚
      // ç­‰åŒäºåœ¨ç»ˆç«¯æ‰§è¡Œï¼š<span class="hljs-string">`pnpm run start:dev`</span>
      <span class="hljs-string">"runtimeArgs"</span>: [<span class="hljs-string">"run"</span>, <span class="hljs-string">"start:dev"</span>],
</code></pre>
<p>ç„¶åæˆ‘ä»¬åœ¨ app.controller.ts ä¸Šæ‰“ä¸ªæ–­ç‚¹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22e4a980696b4ae8a32969ac00d971e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=BPXY5c9i2v2IuwJKzxFvL6yNvTQ%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åå¯åŠ¨è°ƒè¯•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac8175fe89d64b72ac1d012bf2de2cd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=yAXY6G2hgJeDVkCshKlu1aOKOfs%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»åï¼Œç›¸å½“äºåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">pnpm run start:dev
</code></pre>
<p>æ¥ç€ä½ æµè§ˆå™¨è®¿é—® <code>http://localhost:3000</code> å°±èƒ½è§¦å‘æ–­ç‚¹äº†ï¼</p>
<h3 data-id="heading-7">è°ƒè¯• hono</h3>
<p>æ‰€ä»¥æ ¹æ®ä¸Šé¢çš„ç†è®ºï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ª launch.jsonï¼Œç”¨æ¥è°ƒè¯• hono</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"configurations"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"launch"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Launch Program"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"runtimeExecutable"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ ¸å¿ƒï¼šå‘Šè¯‰è°ƒè¯•å™¨ç”¨pnpmæ¥è¿è¡Œ</span>
      <span class="hljs-attr">"runtimeArgs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"run"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"dev"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä¼ ç»™pnpmçš„å‚æ•°ï¼šè¿è¡Œâ€œdevâ€è„šæœ¬</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>

</code></pre>
<p>åŒç†ï¼Œå…¶å®å°±æ˜¯è§¦å‘äº†ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">pnpm run dev
</code></pre>
<p>å‘½ä»¤ï¼Œ dev è¿™ä¸ªå‘½ä»¤å…¶å®å°±æ˜¯ hono é¡¹ç›® package.json ä¸­çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-json" lang="json">  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsx watch src/index.ts"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsc"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node dist/index.js"</span>
  <span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-8">å®¹å™¨éƒ¨ç½²</h2>
<p>æ¥ä¸‹æ¥æ˜¯å¾ˆé•¿çš„å…³äº docker å’Œæˆ‘ä»¬å‰ç«¯å…¨æ ˆç›¸å…³çš„çŸ¥è¯†ï¼Œæœ‰æ·±å…¥çš„åŸç†ä»‹ç»ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ä¸€èµ·äº¤æµã€‚</p>
<h3 data-id="heading-9">ä¸ºä»€ä¹ˆéœ€è¦ Dockerï¼Ÿ</h3>
<p>å³ä¾¿æ˜¯çº¯å‰ç«¯å¼€å‘è€…ï¼Œä¸æ¶‰åŠ Node.jsã€Nginx æˆ–æ•°æ®åº“ç­‰æœåŠ¡å™¨ç›¸å…³è½¯ä»¶ï¼Œåœ¨ä¸­å°ä¼ä¸šéƒ¨ç½²åº”ç”¨æ—¶ï¼Œåç«¯å›¢é˜Ÿæˆ–é¡¹ç›®ç»ç†å¸¸å¸¸ä¼šè¦æ±‚å‰ç«¯å›¢é˜Ÿæä¾›ä¸€ä¸ª Dockerfileï¼Œä»¥ä¾¿å°†å‰ç«¯åº”ç”¨éƒ¨ç½²åˆ° Nginx ä¸Šã€‚è¿™ç§è¦æ±‚åœ¨å®¹å™¨åŒ–æ—¶ä»£å˜å¾—è¶Šæ¥è¶Šæ™®éã€‚æ‰€ä»¥æ˜¯æœ‰å¿…è¦äº†è§£å®¹å™¨çš„çŸ¥è¯†çš„ã€‚</p>
<h3 data-id="heading-10">å®¹å™¨åŒ–çš„åŸºæœ¬æ¦‚å¿µ</h3>
<p>åœ¨å®¹å™¨åŒ–æ—¶ä»£ï¼Œé€šå¸¸é€šè¿‡ Dockerfileï¼ˆç”¨äºæè¿°å¦‚ä½•æ„å»º Docker å®¹å™¨çš„é…ç½®æ–‡ä»¶ï¼‰æ„å»ºå¼€å‘æˆ–ç”Ÿäº§ç¯å¢ƒçš„ Docker é•œåƒï¼Œç„¶åå¯åŠ¨è¿™äº›é•œåƒï¼Œä½¿å¤–éƒ¨ç½‘ç»œå¯ä»¥è®¿é—®å¯¹åº”çš„åº”ç”¨ã€‚</p>
<p>åœ¨ Docker æµè¡Œä¹‹å‰ï¼Œå‰ç«¯åº”ç”¨çš„éƒ¨ç½²æ–¹å¼ä¸€èˆ¬æ˜¯ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šä¸‹è½½ç›¸å…³è½¯ä»¶ï¼ˆå¦‚ Nginxã€MySQL æˆ– PostgreSQLï¼‰ï¼Œé…ç½®å¹¶å¯åŠ¨æœåŠ¡ï¼Œå†å°†æ‰“åŒ…åçš„å‰ç«¯å†…å®¹æ”¾å…¥ Nginx çš„æŒ‡å®šç›®å½•ï¼Œä»¥ä¾¿å¤–éƒ¨è®¿é—®ã€‚è¿™ç§æ–¹å¼è¢«ç§°ä¸ºç‰©ç†æœºç›´æ¥éƒ¨ç½²ã€‚</p>
<h3 data-id="heading-11">ä¸ºä½•è½¬å‘å®¹å™¨åŒ–éƒ¨ç½²ï¼Ÿ</h3>
<p>å®¹å™¨åŒ–éƒ¨ç½²çš„ä¼˜åŠ¿ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼Œæˆ‘ä»¬ç”¨å‰ç«¯çš„è§†è§’å»ç†è§£ï¼š</p>
<ol>
<li><strong>ç¯å¢ƒä¸€è‡´æ€§</strong>ï¼š</li>
</ol>
<ul>
<li>å‰ç«¯å¸¸è§çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆåœ¨ Chrome ä¸­åŠŸèƒ½æ­£å¸¸ï¼Œä½†åœ¨å…¶ä»–æµè§ˆå™¨ä¸­å´æ— æ³•è¿è¡Œï¼Ÿ</li>
</ul>
<ol start="2">
<li><strong>ç®€åŒ–ç¯å¢ƒé…ç½®</strong>ï¼š</li>
</ol>
<ul>
<li>å‰ç«¯é¡¹ç›®é€šå¸¸éœ€è¦é…ç½® ESLintã€Prettierã€TSConfigã€Vite/Webpack ç­‰å·¥å…·ã€‚è¿™äº›é…ç½®ç¹çï¼Œä¸”éœ€è¦ä¸€å®šçš„çŸ¥è¯†æ‰èƒ½å®šåˆ¶é€‚åˆé¡¹ç›®çš„é…ç½®ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå‰ç«¯ç¤¾åŒºæä¾›äº†è®¸å¤š CLI å·¥å…·ï¼Œå¦‚ React çš„ create-react-appã€Vue çš„ Vue CLIã€Next.js çš„ @nextjs/cli ç­‰ï¼Œè¿™äº›å·¥å…·ä¸ºé¡¹ç›®æä¾›äº†ç°æˆçš„æ¨¡æ¿ï¼Œå¹¶åœ¨ Babel/SWC å’Œ Browserslist çš„é…ç½®ä¸­è§£å†³äº†å…¼å®¹æ€§é—®é¢˜ã€‚</li>
</ul>
<p>åŒæ ·ï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿé¢ä¸´ç¯å¢ƒä¸€è‡´æ€§å’Œé…ç½®ç¹ççš„é—®é¢˜ï¼Œå¹¶ä¸”è¿™äº›é—®é¢˜ç›¸å½“æ£˜æ‰‹ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å›é¡¾ä¸€ä¸‹ Docker æµè¡Œä¹‹å‰çš„ PaaS é¡¹ç›®ã€‚</p>
<h3 data-id="heading-12">PaaS çš„èƒŒæ™¯</h3>
<p>PaaSï¼ˆPlatform as a Serviceï¼‰æ˜¯äº‘è®¡ç®—çš„é‡è¦æœåŠ¡æ¨¡å‹ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨å¼€å‘ã€è¿è¡Œå’Œç®¡ç†ç¯å¢ƒï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºç¼–å†™ä»£ç ï¼Œè€Œæ— éœ€æ‹…å¿ƒåº•å±‚åŸºç¡€è®¾æ–½æˆ–æ“ä½œç³»ç»Ÿã€‚</p>
<h3 data-id="heading-13">PaaS å—æ¬¢è¿çš„åŸå› </h3>
<p>PaaS é¡¹ç›®å—åˆ°å¹¿æ³›æ¥çº³çš„ä¸€ä¸ªä¸»è¦åŸå› æ˜¯å®ƒæä¾›äº†â€œåº”ç”¨æ‰˜ç®¡â€èƒ½åŠ›ã€‚å¦‚ä»Šï¼Œè®¸å¤šäººä½¿ç”¨é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€AWS ç­‰äº‘æœåŠ¡ï¼Œå®é™…ä¸Šå°±æ˜¯å°†æœ¬åœ°åº”ç”¨æ‰˜ç®¡åˆ°äº‘ç«¯ã€‚ç„¶è€Œï¼Œè¿™ä¸€éƒ¨ç½²è¿‡ç¨‹å¸¸å¸¸ä¼šé‡åˆ°äº‘ç«¯è™šæ‹Ÿæœºä¸æœ¬åœ°ç¯å¢ƒä¸ä¸€è‡´çš„é—®é¢˜ã€‚å› æ­¤ï¼Œå½“æ—¶çš„äº‘è®¡ç®—æœåŠ¡ç«äº‰çš„ç„¦ç‚¹åœ¨äºè°èƒ½æ›´å¥½åœ°æ¨¡æ‹Ÿæœ¬åœ°æœåŠ¡å™¨ç¯å¢ƒï¼Œä»è€Œæä¾›æ›´ä¼˜è´¨çš„â€œä¸Šäº‘â€ä½“éªŒã€‚è€Œå¼€æº PaaS é¡¹ç›®çš„å‡ºç°ï¼Œæ­£æ˜¯ä¸ºäº†æœ‰æ•ˆè§£å†³è¿™ä¸€é—®é¢˜ã€‚</p>
<h3 data-id="heading-14">docker çš„å‡ºç°</h3>
<p>æ­£å½“å¤§å®¶æ¯”è°èƒ½æ›´å¥½æ¨¡æ‹Ÿæœ¬åœ°æœåŠ¡å™¨ç¯å¢ƒçš„æ—¶å€™ï¼Œdocker è·³å‡ºæ¥è¯´ï¼Œå¯¹ä¸èµ·ï¼Œåœ¨åšçš„å„ä½éƒ½æ˜¯åƒåœ¾ã€‚ã€‚ã€‚æˆ‘èƒ½å®Œå…¨æ¨¡æ‹Ÿæœ¬åœ°æœåŠ¡å™¨ç¯å¢ƒï¼Œå˜¿å˜¿ï¼</p>
<p><strong>å¹¶ä¸” docker æä¾›äº†éå¸¸ä¾¿æ·çš„æ‰“åŒ…æœºåˆ¶ï¼Œ</strong> å¹¶ä¸”è¿™ä¸ªå‹ç¼©åŒ…åŒ…å«äº†å®Œæ•´çš„æ“ä½œç³»ç»Ÿæ–‡ä»¶å’Œç›®å½•ï¼Œä¹Ÿå°±æ˜¯åŒ…å«äº†è¿™ä¸ªåº”ç”¨è¿è¡Œæ‰€éœ€è¦çš„æ‰€æœ‰ä¾èµ–ã€‚åªéœ€ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">docker build æ‰“åŒ…è‡ªå·±çš„æœåŠ¡
docker run å¯åŠ¨è‡ªå·±çš„æœåŠ¡
</code></pre>
<p>å¦‚æ­¤ï¼Œdocker è½»æ¾å‡»è´¥äº† pass æœ¬èº«çš„æ‰“åŒ…æœºåˆ¶ï¼Œåæ¥é€æ¸ä½¿å®¹å™¨æŠ€æœ¯æˆä¸ºäº‘æœåŠ¡çš„åŸºç¡€è®¾æ–½ä¹‹ä¸€ã€‚</p>
<p>ä½ å¯ä»¥æƒ³è±¡ï¼Œå°±è·Ÿå‰ç«¯ä½¿ç”¨ vite å’Œ webpack ä¸€æ ·ï¼Œä¸€é”® <code>npm run build xxx</code> æ‰“åŒ…åï¼Œä½ çš„å‰ç«¯åº”ç”¨èƒ½åœ¨å„ä¸ªæµè§ˆå™¨ä¸Šè¿è¡Œï¼Œå¹¶å¸®åŠ©æˆ‘ä»¬è§£å†³äº†æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ï¼Œå¦‚æ­¤ä¾¿æ·ï¼Œè°èƒ½ä¸å–œæ¬¢è¿™æ ·çš„æŠ€æœ¯å‘¢ï¼Ÿ</p>
<p>æ‰€ä»¥è¿™ä¸ªå°èŠ‚æˆ‘ä»¬å¯ä»¥å›ç­”å¸¸è§çš„é¢è¯•é¢˜ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆéœ€è¦å®¹å™¨åŒ– ï¼ˆdockerï¼‰ï¼Ÿ</li>
</ul>
<p>æ—¢ç„¶ docker è¿™ä¹ˆå¥½ç”¨ï¼Œé‚£ docker é•œåƒï¼Œdocker å®¹å™¨ï¼Œdocker é•œåƒä»“åº“ç­‰ç­‰å¸¸è§æ¦‚å¿µæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬æ‹¿å‰ç«¯çš„ npm åŒ…ç®¡ç†æ¥å¸®åŠ©æˆ‘ä»¬ç†è§£ã€‚</p>
<h2 data-id="heading-15">Docker å¿…éœ€äº†è§£çš„åŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-16">1. Docker é•œåƒå’Œ Docker å®¹å™¨</h3>
<p>é•œåƒï¼ˆ<code>Image</code>ï¼‰å’Œå®¹å™¨ï¼ˆ<code>Container</code>ï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ <code>ç±»</code> å’Œ <code>å®ä¾‹</code> ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚</p>
<ul>
<li><strong>Docker é•œåƒ</strong> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚</li>
<li><strong>Docker å®¹å™¨</strong>çš„å®è´¨å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œä½†æ˜¯è·Ÿæ™®é€šè¿›ç¨‹ä¸ä¸€æ ·çš„æ˜¯ï¼Œå› æ­¤å®¹å™¨å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„ <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€è‡ªå·±çš„ç½‘ç»œé…ç½®ã€è‡ªå·±çš„è¿›ç¨‹ç©ºé—´ï¼Œç”šè‡³è‡ªå·±çš„ç”¨æˆ· ID ç©ºé—´ã€‚å®¹å™¨å†…çš„è¿›ç¨‹æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒé‡Œï¼Œä½¿ç”¨èµ·æ¥ï¼Œå°±å¥½åƒæ˜¯åœ¨ä¸€ä¸ªç‹¬ç«‹äºå®¿ä¸»çš„ç³»ç»Ÿä¸‹æ“ä½œä¸€æ ·ã€‚</li>
</ul>
<h3 data-id="heading-17">2. Dockerfile</h3>
<p>dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯ç”¨è¿™ä¸ªæ–‡ä»¶é…åˆ docker build å‘½ä»¤æ¥æ„å»º docker é•œåƒã€‚</p>
<h3 data-id="heading-18">3. Docker Clientã€Docker hubã€Docker Daemon</h3>
<p>å…³ç³»å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a570165d395b4ae7927cb22d8824e443~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=Jkiiqfu%2BDqq%2F89BYaaYnBznEq5A%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7885b08b51d74326a891fbaf1776b273~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=FLhngk35eljrOBOBGdauK%2FvhUSA%3D" alt="" loading="lazy"/></p>
<p>ä¸Šå›¾ä¸­æ¶‰åŠ 3 ä¸ªé‡è¦çš„æ¦‚å¿µ</p>
<ul>
<li>Docker Hubï¼šDocker Hub æ˜¯ä¸€ä¸ªäº‘ç«¯æ‰˜ç®¡çš„Dockeré•œåƒåº“ï¼Œç”¨æˆ·å¯ä»¥åœ¨å…¶ä¸­å­˜å‚¨å’Œå…±äº« docker é•œåƒã€‚å®ƒç±»ä¼¼äº npm ä»“åº“ã€‚</li>
<li>Docker Daemonï¼šå®ˆæŠ¤è¿›ç¨‹æ˜¯ä¸€ä¸ªåå°æœåŠ¡ï¼Œè´Ÿè´£ç®¡ç† docker å®¹å™¨å’Œé•œåƒã€‚å®ƒç›‘å¬æ¥è‡ªçš„ docker å®¢æˆ·ç«¯çš„å‘½ä»¤ï¼Œå¹¶æ‰§è¡Œç›¸åº”æ“ä½œã€‚</li>
<li>Docker Clientï¼šå…è®¸ç”¨æˆ·ä¸å®ˆæŠ¤è¿›ç¨‹äº¤äº’çš„å‘½ä»¤è¡Œå·¥å…·ã€‚</li>
</ul>
<h2 data-id="heading-19">ã€å»¶ä¼¸è¡¥å……ã€‘æ·±å…¥åŸç†1ï¼šä¸€å®šè¦ç†è§£ Docker é•œåƒçš„åˆ†å±‚çš„åŸç†</h2>
<p>ä¸Šé¢æˆ‘ä»¬è¯´äº†ï¼Œ<strong>Docker é•œåƒ</strong> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„ç‰¹æ€§ï¼Œç§°ä¹‹ä¸ºæ–‡ä»¶ç³»ç»Ÿåˆ†å±‚ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸ªåŸç†ï¼Œæˆ‘ä»¬éœ€è¦ä» linux æœ¬èº«çš„æ–‡ä»¶ç³»ç»Ÿè®²èµ·ã€‚</p>
<p>é¦–å…ˆ linux å¯åŠ¨çš„æ—¶å€™ï¼Œé¦–å…ˆåŠ è½½çš„æ˜¯ bootfs æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒåŒ…å«äº† boot åŠ è½½å™¨å’Œ kernel å†…æ ¸ã€‚kernel å†…æ ¸ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“è®¡ç®—æœºæ˜¯ç”±ç¡¬ä»¶æ„æˆçš„ï¼Œä¾‹å¦‚ cpuã€ä¸»æ¿ã€å¤–è®¾ã€å†…å­˜ç­‰ç­‰ï¼Œæœ€ç»ˆè¿™äº›ç¡¬ä»¶ä¼šè¢«æ“ä½œç³»ç»Ÿæ¥æ‰‹ç®¡ç†ï¼Œä¾‹å¦‚ï¼Œå°†åœ¨ç¡¬ç›˜çš„ç¨‹åºæ˜ å°„ä¸ºä¸€ä¸ªä¸ªåŠ¨æ€çš„è¿›ç¨‹ï¼Œç„¶åå¢åŠ  cpu è°ƒåº¦ç®—æ³•ï¼Œè®©æ¯ä¸ªè¿›ç¨‹æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™ä¸æ–­è¿è¡Œï¼Œè¿˜éœ€è¦ç®¡ç†å†…å­˜ï¼Œä¸æ–­çš„è¯»å–å†…å­˜æŒ‡ä»¤ç»™ cpu è¿è¡Œã€‚ã€‚ã€‚</p>
<p>ç„¶å linux ä¼šæŒ‚åœ¨ rootfs æ–‡ä»¶ç³»ç»Ÿï¼Œä»€ä¹ˆæ˜¯ rootfs å‘¢ï¼Ÿä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“åœ¨ç© windows æ“ä½œç³»ç»Ÿçš„æ—¶å€™ï¼ŒC ç›˜ä¸€èˆ¬éƒ½æ˜¯ç”¨æ¥å­˜å‚¨æ“ä½œç³»ç»Ÿç›¸å…³çš„æ–‡ä»¶çš„ï¼Œä¾‹å¦‚ C ç›˜ä¸‹çš„ Program Files ä¸€èˆ¬ç”¨æ¥å­˜æ”¾æ“ä½œç³»ç»Ÿç›¸å…³çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>è€Œ linux ä¸­çš„ rootfs åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯æŠŠæ“ä½œç³»ç»Ÿç›¸å…³çš„æ–‡ä»¶æ”¾å…¥å…¶ä¸­ã€‚linux æœ‰å¾ˆå¤šä¸åŒçš„å‘è¡Œç‰ˆæœ¬ï¼Œä¾‹å¦‚ centosï¼Œubantu ç­‰ç­‰ï¼Œä»–ä»¬éƒ½æœ‰è‡ªå·±çš„ rootfsï¼Œè§„åˆ™æœ‰æ‰€ä¸åŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/460a739ec5904cf49ccf1ef798882f92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=O65Hc%2F%2F%2FaD9Lg2MZZ0F8yyhiLSo%3D" alt="" loading="lazy"/></p>
<p>è€Œä¸Šé¢è¯´çš„ä¸¤ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨ docker ä¸­ï¼Œå¹¶ä¸æ˜¯æ··åœ¨ä¸€èµ·çš„ï¼Œè€Œæ˜¯å¦‚ä¸Šå›¾åˆ†å±‚äº†çš„ï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœæ­£åœ¨ä½¿ç”¨ä¸åŒçš„ docker é•œåƒï¼Œä»–ä»¬æœ€åº•å±‚çš„ bootfs å¾ˆå¯èƒ½æ˜¯ä¸€æ ·çš„ï¼ˆç›¸åŒçš„ linux ç‰ˆæœ¬ï¼‰ï¼Œé‚£ä¹ˆè¿™äº›é•œåƒå°±å¯ä»¥å…±äº«è¿™ä¸€å±‚ï¼Œè€Œä¸æ˜¯æ¯ä¸ªé•œåƒéƒ½åˆ†åˆ«æœ‰ä¸€ä¸ª bootfsã€‚</p>
<p>åŒç† rootfs ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„é•œåƒéƒ½æ˜¯åŸºäº ubantu çš„ linux å‘è¡Œç‰ˆæœ¬ï¼Œç‰ˆæœ¬å·ä¹Ÿæ˜¯ä¸€æ ·çš„è¯ï¼Œé‚£ä¹ˆ rootfs ä¹Ÿæ˜¯å¯ä»¥å…±äº«çš„ã€‚</p>
<p>è¿™æ ·å°±ä¼šå¤§å¤§é™ä½ docker çš„ä½“ç§¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¤§å®¶è¯´ docker è½»é‡çš„åŸå› ã€‚</p>
<p>docker é•œåƒæœ¬èº«æä¾›çš„è¿™äº›æ•°æ®å±‚æ˜¯åªè¯»çš„ï¼Œæˆ‘ä»¬åç»­ç”¨ dockerfile å»è‡ªå®šä¹‰æˆ‘ä»¬è‡ªå·±çš„é•œåƒæ—¶ï¼Œå®åœ¨å¯è¯»å±‚ä¸Šé¢åŠ ä¸€ä¸ªè¯»å†™å±‚ï¼Œä½†æ˜¯ä¿®æ”¹ docker çš„ï¼Œæ‰€ä»¥å…±äº«åº•å±‚çš„æ•°æ®å±‚ä¹Ÿä¸ä¼šå½±å“æˆ‘ä»¬å®šåˆ¶åŒ–çš„ docker é•œåƒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15b4b8bedf384df983393bdfe87b3b4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=KAp6f5ZN1Rw6QuAFT%2FEfTCb0Fac%3D" alt="" loading="lazy"/></p>
<p>ä¸ºä»€ä¹ˆç†è§£åˆ†å±‚å¦‚æ­¤é‡è¦å‘¢ï¼Ÿæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼ˆä»¥ä¸‹ dockerfile æ–‡ä»¶æ¯ä¸ªå‘½ä»¤æ˜¯ä»€ä¹ˆæ„æ€ä¼šè¯¦ç»†è®²è§£ï¼Œç°åœ¨ä¸ç”¨åœ¨æ„ï¼‰ï¼Œä»¥ä¸‹ docker file ä¸­ï¼Œæˆ‘ä»¬æ³¨æ„ RUN å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">20.04</span>

RUN apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> <span class="hljs-keyword">update</span>
RUN apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> install <span class="hljs-operator">-</span>y python3
RUN apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> install <span class="hljs-operator">-</span>y python3<span class="hljs-operator">-</span>pip
RUN apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> clean
</code></pre>
<p>è¿™é‡Œæ‰§è¡Œäº† 4 ä¸ª RUN å‘½ä»¤ï¼Œè€Œæ¯ä¸ª RUN å‘½ä»¤éƒ½ä¼šå•ç‹¬åœ¨ docker é•œåƒä¸Šå»ºç«‹ä¸€ä¸ªå•ç‹¬çš„è¯»å†™å±‚ï¼Œè¿™æ ·ä¼šå¢å¤§æ„å»ºåçš„ docker é•œåƒä½“ç§¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆå¹¶ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">20.04</span>

RUN apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> <span class="hljs-keyword">update</span> <span class="hljs-operator">&amp;&amp;</span> \
    apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> install <span class="hljs-operator">-</span>y python3 python3<span class="hljs-operator">-</span>pip <span class="hljs-operator">&amp;&amp;</span> \
    apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> clean <span class="hljs-operator">&amp;&amp;</span> \
    rm <span class="hljs-operator">-</span>rf <span class="hljs-operator">/</span>var<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>apt<span class="hljs-operator">/</span>lists<span class="hljs-comment">/*
</span></code></pre>
<p>åŒæ ·çš„ï¼Œå¦‚æœåˆ†å±‚ä¸­ï¼Œåˆ†å±‚çš„å†…å®¹æ²¡æœ‰å˜ï¼Œdocker ä¼šé‡å¤åˆ©ç”¨è¿™äº›å·²ç»æ‰“åŒ…å¥½çš„å±‚ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬å‰ç«¯åº”ç”¨æ‰“åŒ…çš„æ—¶å€™ï¼Œå¾€å¾€ package.json/package.lock.json çš„ä¾èµ–æ˜¯æ²¡æœ‰å˜åŒ–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¦‚æœèƒ½åˆ©ç”¨ä¹‹å‰å·²ç»ä¸‹è½½å¥½çš„ npm åŒ…çš„å±‚ï¼Œå°±ä¸ç”¨é‡å¤ä¸‹è½½äº†ã€‚</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># ä½¿ç”¨ Node.js ä½œä¸ºåŸºç¡€é•œåƒ</span>
FROM node:<span class="hljs-number">22</span>-slim

<span class="hljs-comment"># å°† package.json å’Œ package-lock.json å¤åˆ¶åˆ°å®¹å™¨ä¸­</span>
COPY <span class="hljs-keyword">package</span>*.json ./

<span class="hljs-comment"># å®‰è£…ä¾èµ–ï¼ˆä¼šåœ¨æ­¤å±‚ç¼“å­˜ node_modulesï¼‰</span>
RUN npm install

<span class="hljs-comment"># å¤åˆ¶åº”ç”¨ç¨‹åºçš„å…¶ä»–æºä»£ç åˆ°å®¹å™¨ä¸­</span>
COPY . .

<span class="hljs-comment"># æš´éœ²åº”ç”¨ç¨‹åºè¿è¡Œçš„ç«¯å£</span>
EXPOSE <span class="hljs-number">3000</span>

<span class="hljs-comment"># å¯åŠ¨åº”ç”¨ç¨‹åº</span>
CMD [<span class="hljs-string">"npm"</span>, <span class="hljs-string">"start"</span>]
</code></pre>
<p>ä»¥ä¸Šæˆ‘ä»¬ä¼šçœ‹åˆ° <code>RUN npm install</code> è¿™ä¸€æ­¥ï¼Œå¦‚æœå‘½ä»¤è·Ÿä»¥å‰ä¸€æ ·ï¼Œä¼šåˆ©ç”¨ç¼“å­˜ï¼Œä¸ä¼šä¸‹è½½ npm åŒ…ï¼Œå…·ä½“ç¼“å­˜è§„åˆ™ï¼Œå®˜æ–¹å™è¿°å¦‚ä¸‹ï¼ˆå»ºè®®åç»­çœ‹å®Œ dockerfile ç« èŠ‚åå†å›æ¥çœ‹è¿™éƒ¨åˆ†ï¼Œéå¸¸é‡è¦ï¼‰ï¼š</p>
<p>åœ¨é•œåƒçš„æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒDocker ä¼šéå† <code>Dockerfile</code> æ–‡ä»¶ä¸­çš„æŒ‡ä»¤ï¼Œç„¶åæŒ‰é¡ºåºæ‰§è¡Œã€‚åœ¨æ‰§è¡Œæ¯æ¡æŒ‡ä»¤ä¹‹å‰ï¼ŒDocker éƒ½ä¼šåœ¨ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦å·²ç»å­˜åœ¨å¯é‡ç”¨çš„é•œåƒï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ç°å­˜çš„é•œåƒï¼Œä¸å†é‡å¤åˆ›å»ºã€‚å¦‚æœä½ ä¸æƒ³åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨ç¼“å­˜ï¼Œä½ å¯ä»¥åœ¨ <code>docker build</code> å‘½ä»¤ä¸­ä½¿ç”¨ <code>--no-cache=true</code> é€‰é¡¹ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³åœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­ä½¿ç”¨ç¼“å­˜ï¼Œä½ å¾—æ˜ç™½ä»€ä¹ˆæ—¶å€™ä¼šï¼Œä»€ä¹ˆæ—¶å€™ä¸ä¼šæ‰¾åˆ°åŒ¹é…çš„é•œåƒï¼Œéµå¾ªçš„åŸºæœ¬è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä»ä¸€ä¸ªåŸºç¡€é•œåƒå¼€å§‹ï¼ˆ<code>FROM</code> æŒ‡ä»¤æŒ‡å®šï¼‰ï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤å°†å’Œè¯¥åŸºç¡€é•œåƒçš„æ‰€æœ‰å­é•œåƒè¿›è¡ŒåŒ¹é…ï¼Œæ£€æŸ¥è¿™äº›å­é•œåƒè¢«åˆ›å»ºæ—¶ä½¿ç”¨çš„æŒ‡ä»¤æ˜¯å¦å’Œè¢«æ£€æŸ¥çš„æŒ‡ä»¤å®Œå…¨ä¸€æ ·ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™ç¼“å­˜å¤±æ•ˆã€‚</li>
<li>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåªéœ€è¦ç®€å•åœ°å¯¹æ¯” <code>Dockerfile</code> ä¸­çš„æŒ‡ä»¤å’Œå­é•œåƒã€‚ç„¶è€Œï¼Œæœ‰äº›æŒ‡ä»¤éœ€è¦æ›´å¤šçš„æ£€æŸ¥å’Œè§£é‡Šã€‚</li>
<li>å¯¹äº <code>ADD</code> å’Œ <code>COPY</code> æŒ‡ä»¤ï¼Œé•œåƒä¸­å¯¹åº”æ–‡ä»¶çš„å†…å®¹ä¹Ÿä¼šè¢«æ£€æŸ¥ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½ä¼šè®¡ç®—å‡ºä¸€ä¸ªæ ¡éªŒå’Œã€‚æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´å’Œæœ€åè®¿é—®æ—¶é—´ä¸ä¼šçº³å…¥æ ¡éªŒã€‚åœ¨ç¼“å­˜çš„æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼Œä¼šå°†è¿™äº›æ ¡éªŒå’Œå’Œå·²å­˜åœ¨é•œåƒä¸­çš„æ–‡ä»¶æ ¡éªŒå’Œè¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœæ–‡ä»¶æœ‰ä»»ä½•æ”¹å˜ï¼Œæ¯”å¦‚å†…å®¹å’Œå…ƒæ•°æ®ï¼Œåˆ™ç¼“å­˜å¤±æ•ˆã€‚</li>
<li>é™¤äº† <code>ADD</code> å’Œ <code>COPY</code> æŒ‡ä»¤ï¼Œç¼“å­˜åŒ¹é…è¿‡ç¨‹ä¸ä¼šæŸ¥çœ‹ä¸´æ—¶å®¹å™¨ä¸­çš„æ–‡ä»¶æ¥å†³å®šç¼“å­˜æ˜¯å¦åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œå½“æ‰§è¡Œå®Œ <code>RUN apt-get -y update</code> æŒ‡ä»¤åï¼Œå®¹å™¨ä¸­ä¸€äº›æ–‡ä»¶è¢«æ›´æ–°ï¼Œä½† Docker ä¸ä¼šæ£€æŸ¥è¿™äº›æ–‡ä»¶ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œåªæœ‰æŒ‡ä»¤å­—ç¬¦ä¸²æœ¬èº«è¢«ç”¨æ¥åŒ¹é…ç¼“å­˜ã€‚</li>
</ul>
<p>ä¸€æ—¦ç¼“å­˜å¤±æ•ˆï¼Œæ‰€æœ‰åç»­çš„ Dockerfile æŒ‡ä»¤éƒ½å°†äº§ç”Ÿæ–°çš„é•œåƒï¼Œç¼“å­˜ä¸ä¼šè¢«ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-20">ã€å»¶ä¼¸è¡¥å……ã€‘æ·±å…¥åŸç†2ï¼šä¸€å®šè¦ç†è§£ä»€ä¹ˆæ˜¯æ„å»ºä¸Šä¸‹æ–‡</h2>
<p>ä¸Šé¢æœ‰ä¸€ä¸ªå¾ˆå®¹æ˜“æ··æ·†çš„è·¯å¾„é—®é¢˜ï¼Œ<code>COPY package*.json ./</code> ä¸­ package*.json æŒ‡çš„å¹¶ä¸æ˜¯ docker build å‘½ä»¤çš„ç›®å½•ï¼Œä¹Ÿä¸æ˜¯ <code>Dockerfile</code> æ‰€åœ¨çš„ç›®å½•ï¼Œè€Œæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç›®å½•ã€‚æ‰§è¡Œä¸Šä¸‹æ–‡ç›®å½•æˆ‘ä»¬æ˜¯åœ¨ docker build çš„æ—¶å€™æŒ‡å®šçš„ï¼Œè¿™é‡Œæˆ‘ä»¬æŒ‡å®šçš„ <code>.</code>ï¼Œè¡¨ç¤ºæ‰§è¡Œ docker build å‘½ä»¤æ—¶çš„ç›®å½•ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¸ªæ¦‚å¿µå¦‚æ­¤é‡è¦ï¼Œå¾ˆæœ‰å¯èƒ½ä½ ä½ è®¾ç½®çš„ä¸å¯¹ï¼Œæ ¹æœ¬æ‰¾ä¸åˆ° package*.jsonï¼Œä¾‹å¦‚ä½ è¿™æ ·</p>
<pre><code class="hljs language-bash" lang="bash">COPY ../package*.json ./
</code></pre>
<p><code>../package*.json</code>ï¼ŒæŒ‡çš„æ˜¯æ„å»ºä¸Šä¸‹æ–‡ä¸Šä¸€å±‚ç›®å½•çš„ package*.jsonï¼Œå…¶å®æ˜¯æ‰¾ä¸åˆ°çš„ï¼Œå› ä¸ºæˆ‘ä»¬å°†æ„å»ºä¸Šä¸‹æ–‡å¤åˆ¶åˆ° docker host çš„æ—¶å€™ï¼Œdocker åªä¼šå¤åˆ¶æ„å»ºä¸Šä¸‹æ–‡å†…çš„å†…å®¹ï¼ˆå¹¶ä¸”é™¤å¼€ .dockerignore file æŒ‡å®šçš„æ’é™¤çš„å†…å®¹ï¼‰ã€‚</p>
<p>æ‰€ä»¥ä½ åœ¨æ„å»ºä¸Šä¸‹æ–‡ä¹‹å¤–æ‰¾ package*.jsonï¼Œè‚¯å®šæ˜¯æ‰¾ä¸åˆ°çš„ã€‚</p>
<p>å¹¶ä¸”æœ‰ç›¸å½“å¤šç½‘ä¸Šçš„äººè¯¯ä»¥ä¸º <code>.</code> æ˜¯æŒ‡å®š <code>Dockerfile</code> æ‰€åœ¨ç›®å½•å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä¸é¢å¤–æŒ‡å®š <code>Dockerfile</code> çš„è¯ï¼Œä¼šå°†ä¸Šä¸‹æ–‡ç›®å½•ä¸‹çš„åä¸º <code>Dockerfile</code> çš„æ–‡ä»¶ä½œä¸º Dockerfileã€‚</p>
<p>è¿™åªæ˜¯é»˜è®¤è¡Œä¸ºï¼Œå®é™…ä¸Š <code>Dockerfile</code> çš„æ–‡ä»¶åå¹¶ä¸è¦æ±‚å¿…é¡»ä¸º <code>Dockerfile</code>ï¼Œè€Œä¸”å¹¶ä¸è¦æ±‚å¿…é¡»ä½äºä¸Šä¸‹æ–‡ç›®å½•ä¸­ï¼Œæ¯”å¦‚å¯ä»¥ç”¨ <code>-f ../Dockerfile.php</code> å‚æ•°æŒ‡å®šæŸä¸ªæ–‡ä»¶ä½œä¸º <code>Dockerfile</code>ã€‚</p>
<p>å½“ç„¶ï¼Œä¸€èˆ¬å¤§å®¶ä¹ æƒ¯æ€§çš„ä¼šä½¿ç”¨é»˜è®¤çš„æ–‡ä»¶å <code>Dockerfile</code>ï¼Œä»¥åŠä¼šå°†å…¶ç½®äºé•œåƒæ„å»ºä¸Šä¸‹æ–‡ç›®å½•ä¸­ã€‚</p>
<p>æœ€åæœ€æœ€é‡è¦çš„å°±æ˜¯éœ€è¦å†™ä¸€ä»½ .dockerignore æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å‰ç«¯é¡¹ç›®å¾€å¾€éƒ½æœ‰ node_modules ç›®å½•ï¼Œè€Œä¸”ä½“ç§¯ç›¸å½“å¤§ï¼Œæ‰€ä»¥æ²¡å¿…è¦å°†å…¶å¤åˆ¶åˆ° docker hostã€‚</p>
<ul>
<li>è¿™ä¼šæ˜¾è‘—å¢åŠ é•œåƒçš„ä½“ç§¯ï¼Œä»è€Œå½±å“é•œåƒæ„å»ºæ—¶é—´å’Œä¼ è¾“æ•ˆç‡ã€‚</li>
<li><code>node_modules</code> ä¸­çš„æŸäº›ä¾èµ–å¯èƒ½æ˜¯å¹³å°ç›¸å…³çš„ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨äº†åŸç”Ÿä»£ç æˆ–ç¼–è¯‘æ­¥éª¤ï¼‰ï¼Œåœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼ˆå¦‚ Windows å’Œ Linuxï¼‰ä¸Šä¼šæœ‰æ‰€ä¸åŒã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/751edbf1964d4253a777394992781d8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=Kno%2FN33OujwUu5h4MQTmHus7seQ%3D" alt="" loading="lazy"/></p>
<p>å¥½äº†ï¼Œæˆ‘ä»¬æ¥ç€ç¼–å†™å®Œ dockerfile æ–‡ä»¶ç»§ç»­è¯´ã€‚</p>
<p>ç„¶åï¼Œå°±å¯ä»¥è¿è¡Œ docker é•œåƒ</p>
<pre><code class="hljs language-arduino" lang="arduino">docker run -d -p <span class="hljs-number">3000</span>:<span class="hljs-number">80</span> react-app
</code></pre>
<ul>
<li><code>-d</code>ï¼šä»¥åå°æ¨¡å¼è¿è¡Œå®¹å™¨ã€‚</li>
<li><code>-p 3000:80</code>ï¼šå°†æœ¬åœ°çš„ 8080 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 80 ç«¯å£ã€‚</li>
</ul>
<p>ç„¶åæœ¬åœ°è®¿é—® localhost: 3000ï¼Œæˆ–è€…ä½ çš„æœºå™¨æœ‰å¤–ç½‘åœ°å€ï¼Œä½¿ç”¨ &lt;å¤–ç½‘åœ°å€&gt;: 3000ï¼Œè®¿é—®å³å¯ã€‚</p>
<p>è¿™é‡Œè¿˜ä¼šç‰µæ‰¯åˆ°ä¸€ä¸ªéœ€è¦æ·±å…¥è®¨è®ºçš„å†…å®¹ï¼Œå°±æ˜¯å®¹å™¨ç½‘ç»œçš„åŸç†ï¼Œæˆ‘ä»¬åç»­å†è°ˆã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ä¸€äº›å¸¸ç”¨çš„ docker å‘½ä»¤ï¼Œå¸®åŠ©å¤§å®¶å¿«é€Ÿç”¨èµ·æ¥ dockerã€‚</p>
<h3 data-id="heading-21">å¸¸ç”¨å‘½ä»¤æ€»ç»“</h3>
<p><strong>ä¸‹è½½é•œåƒ</strong>ï¼šdocker pull &lt;é•œåƒå&gt;ï¼Œä¾‹å¦‚ä¸‹è½½ node.js 22 ç‰ˆæœ¬çš„é•œåƒ</p>
<pre><code class="hljs">docker pull node:22-slim
</code></pre>
<p>æ³¨ï¼šå¯ä»¥ç”¨ docker hub æ¥æœç´¢æ”¯æŒçš„ç‰ˆæœ¬ã€‚æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>è¿›å…¥docker hubçš„å®˜ç½‘ï¼Œåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhub.docker.com%2F" target="_blank" title="https://hub.docker.com/" ref="nofollow noopener noreferrer">hub.docker.com</a></li>
<li>ç„¶åæœç´¢éœ€è¦çš„é•œåƒï¼š</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3988f9ef8e46490ab302e31d3871e483~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=FD2TnK6Lpe1Bne3QaP8KKcKh0vA%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>æŸ¥çœ‹é•œåƒæ”¯æŒçš„ç‰ˆæœ¬ï¼š</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eac86c6febf940ce994e34bd32a0f5e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=dxY5IlqwXvRbaKbeAl8j%2F5%2BqX%2Fs%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<p><strong>åˆ—å‡ºé•œåƒï¼š</strong></p>
<pre><code class="hljs">docker images 
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38688a35f24a4f9b92c81398c2ba463d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=IafRLnpcdUvZBbkcYRHmrYb6cno%3D" alt="" loading="lazy"/></p>
<p><strong>åˆ é™¤é•œåƒ</strong>ï¼šdocker rmi -f &lt;é•œåƒå&gt;ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs">docker rmi -f nginx
</code></pre>
<p><strong>æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨ï¼šdocker run -d -p &lt;æœ¬åœ°ç«¯å£&gt;:&lt;å®¹å™¨ç«¯å£&gt; &lt;é•œåƒå&gt;ï¼Œä¾‹å¦‚</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">docker run -d -p <span class="hljs-number">80</span>:<span class="hljs-number">80</span> --name nginx nginx:<span class="hljs-number">1.17</span><span class="hljs-number">.0</span>
</code></pre>
<ul>
<li>
<p>-d é€‰é¡¹ï¼šè¡¨ç¤ºåå°è¿è¡Œ</p>
</li>
<li>
<p>--name é€‰é¡¹ï¼šæŒ‡å®šè¿è¡Œåå®¹å™¨çš„åå­—ä¸ºnginx,ä¹‹åå¯ä»¥é€šè¿‡åå­—æ¥æ“ä½œå®¹å™¨</p>
</li>
<li>
<p>-p é€‰é¡¹ï¼šæŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼šhostPort:containerPort</p>
</li>
</ul>
<p><strong>åˆ—å‡ºå®¹å™¨ï¼š</strong></p>
<pre><code class="hljs">docker ps
</code></pre>
<p><strong>æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</strong>ï¼š</p>
<pre><code class="hljs">docker ps
</code></pre>
<p>å¦‚æœåŠ å…¥ -a å‚æ•°ï¼Œå³ä½¿æš‚åœçš„å®¹å™¨ä¹Ÿä¼šè¢«åˆ—å‡ºæ¥ã€‚</p>
<p><strong>åœæ­¢å®¹å™¨</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">docker stop &lt;å®¹å™¨ID | å®¹å™¨åå­—&gt;
</code></pre>
<hr/>
<p><strong>åˆ é™¤å®¹å™¨</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">rm</span> &lt;å®¹å™¨ID | å®¹å™¨åå­—&gt;
</code></pre>
<p><strong>åœ¨å®¿ä¸»æœºæŸ¥çœ‹dockerä½¿ç”¨cpuã€å†…å­˜ã€ç½‘ç»œã€ioæƒ…å†µï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml">docker stats <span class="hljs-tag">&lt;<span class="hljs-name">å®¹å™¨ID</span> | <span class="hljs-attr">å®¹å™¨åå­—</span>&gt;</span>
</code></pre>
<p><strong>è¿›å…¥Dockerå®¹å™¨å†…éƒ¨çš„bash</strong></p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">exec</span> -it &lt;å®¹å™¨åå­—&gt; /bin/bash
</code></pre>
<p>æ³¨æ„ï¼Œæœ‰çš„é•œåƒé‡Œé¢æ²¡æœ‰ bash å‘½ä»¤ï¼Œä¾‹å¦‚ nginxï¼Œå¯ä»¥å°† /bin/bash æ”¹ä¸º /bin/sh</p>
<p>ä»¥ä¸Šçš„çŸ¥è¯†ï¼Œè¶³å¤Ÿå‰ç«¯åº”ä»˜å¸¸è§çš„åœºæ™¯äº†ï¼Œé‡åˆ°é—®é¢˜æœç´¢ä¸€ä¸‹ï¼Œçœ‹æ‡‚ä¹Ÿä¸æ˜¯éš¾äº‹ã€‚å…¶å®å®¹å™¨çš„ç½‘ç»œï¼Œæ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ï¼Œå› ä¸ºå®¹å™¨å®é™…ä¸Šçœ‹èµ·æ¥æ˜¯æœ‰è‡ªå·±ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Œç‹¬ç«‹çš„ç½‘ç»œï¼Œç‹¬ç«‹çš„è¿›ç¨‹çš„ï¼ˆä¹Ÿå°±æ˜¯åœ¨å®¹å™¨ä¸­ï¼Œä½ ä¼šçœ‹æ‡‚å®¹å™¨è¿›ç¨‹çš„ id æ˜¯ 1ï¼‰ç­‰ç­‰ã€‚</p>
<p>æ—¢ç„¶æœ‰è‡ªå·±ç‹¬ç«‹çš„ç½‘ç»œï¼Œé‚£ä¹ˆå®¹å™¨çš„ç½‘ç»œå¦‚ä½•è·Ÿå¤–ç•Œæ‰“é€šï¼ŒåŸç†åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿï¼ˆè¿™ä¸ªé—®é¢˜ç‰¹åˆ«é‡è¦ï¼Œæ— è®ºå¯¹äºä½ è‡ªå·±æœ¬åœ°è°ƒè¯•ï¼Œè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒè§£å†³å®¹å™¨æ— æ³•è®¿é—®çš„é—®é¢˜ï¼‰</p>
<p>æ—¢ç„¶æœ‰è‡ªå·±ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Œé‚£ä¹ˆå®¹å™¨é”€æ¯ï¼Œå®¹å™¨é‡Œé¢çš„æ–‡ä»¶ä¹Ÿéšä¹‹é”€æ¯ï¼Œé‚£ä¹ˆå®¹å™¨å¦‚ä½•åšåˆ°å°†æ–‡ä»¶è·Ÿç‰©ç†æœºä¸Šçš„æ–‡ä»¶ç³»ç»Ÿå…±äº«çš„å‘¢ï¼Ÿ</p>
<h2 data-id="heading-22">ã€å»¶ä¼¸è¡¥å……ã€‘æ·±å…¥åŸç†3ï¼šdocker å®¹å™¨çš„åº•å±‚ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯</h2>
<p>ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯åˆ†åˆ«æ˜¯ namespaceã€Cgroup ä»¥åŠè”åˆæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆæ–‡ä»¶ç³»ç»Ÿä¸Šé¢å·²ç»è®²äº†ï¼Œç°åœ¨å°±å‰©ä¸‹ namespace å’Œ Cgroup äº†ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ pid namespace æ˜¯ä»€ä¹ˆã€‚</p>
<p>é¦–å…ˆå†æ¬¡å¼ºè°ƒï¼Œå®¹å™¨å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚ä¸¾ä¸ªä¾‹å­</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9caf1f5712394135bd6b369da0e82fdd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=IUHJUSoVcTJf%2FK2%2FPPFFPFMXH0A%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬é¦–å…ˆä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è·å–åˆ°å®¹å™¨çš„è¿›ç¨‹ id ä¸º 2526</p>
<pre><code class="hljs language-bash" lang="bash">docker inspect &lt;å®¹å™¨ <span class="hljs-built_in">id</span>&gt; | grep Pid 
</code></pre>
<p>ç„¶åä½¿ç”¨ ps å‘½ä»¤æ¥è¿‡æ»¤å‡º 2526 è¿›ç¨‹</p>
<pre><code class="hljs language-perl" lang="perl">ps -ef | <span class="hljs-keyword">grep</span> <span class="hljs-number">2526</span>
</code></pre>
<p>å‘ç°ç¡®å®æœ‰å¯¹åº”çš„è¿›ç¨‹ã€‚</p>
<p>ä½†æ˜¯è·Ÿæ™®é€šè¿›ç¨‹ä¸ä¸€æ ·çš„æ˜¯ï¼Œå®¹å™¨çš„è¿›ç¨‹åˆ©ç”¨ namespace æŠ€æœ¯ï¼Œè®©æˆ‘ä»¬è¿›å…¥å®¹å™¨åï¼Œå‘ç°å®¹å™¨ä¸»è¿›ç¨‹çš„ pid æ˜¯ 1 ï¼Œè€Œä¸æ˜¯ 2526ã€‚ä¹Ÿå°±æ˜¯å®¹å™¨ä½¿ç”¨äº†"éšœçœ¼æ³•"ï¼Œæ¥è®©è‡ªå·±è·Ÿåˆ«çš„å®¹å™¨éƒ½éš”ç¦»å¼€ã€‚å°±æ‹¿è¿›ç¨‹éš”ç¦»æ¥è¯´ï¼Œå®¹å™¨æ˜¯å¦‚ä½•ä¿®æ”¹è¿›ç¨‹è§†å›¾çš„å‘¢ï¼Ÿå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0ce66bf43fd47d09fe3052a5b27d14c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=9tkQXP8lYTyx9Wi9GjGU5CD4vCU%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾ï¼Œ1ã€2ã€3ã€4ã€5ã€6ã€7ã€8ã€9ã€10ï¼Œéƒ½æ˜¯åœ¨ç‰©ç†æœºæ“ä½œç³»ç»Ÿä¸Šçš„è¿›ç¨‹å·ï¼ˆPIDï¼‰ï¼Œè€Œè¿›å…¥å®¹å™¨åï¼ŒPID 8 æ˜¯å®¹å™¨çš„ä¸»è¿›ç¨‹ï¼Œlinux å°†å…¶ä¿®æ”¹ä¸ºè¿›ç¨‹å·ï¼ˆPIDï¼‰ä¸º 1ï¼Œå­è¿›ç¨‹ä¹ŸåŒæ ·ä¿®æ”¹ PIDï¼Œè¿™æ ·ä½ åœ¨å®¹å™¨é‡Œï¼Œçœ‹åˆ°ä¸»è¿›ç¨‹æ˜¯ PID 1ï¼Œä½†æ˜¯ä½ é€€å‡ºå®¹å™¨ï¼ŒæŸ¥çœ‹è¿™ä¸ªå®¹å™¨çš„è¿›ç¨‹å·ï¼Œå°±æ˜¯ 8ã€‚</p>
<p>namespace ä¸ä»…ä»…éš”ç¦»äº†è¿›ç¨‹çš„ pidï¼Œè¿˜åŒ…æ‹¬ç½‘ç»œã€ç”¨æˆ·ã€IPC ç­‰ç­‰ã€‚æ¥ç€æˆ‘ä»¬çœ‹çœ‹ Cgroup æ˜¯ä»€ä¹ˆã€‚</p>
<p>ä½ æƒ³æƒ³ï¼Œè™½ç„¶è§†å›¾å¯ä»¥æ”¹å˜ï¼Œä½†æ˜¯å´æ²¡æ³•é™åˆ¶è¿™ä¸ªå®¹å™¨å¯¹ cpu çš„ä½¿ç”¨ï¼Œæ‰€ä»¥æ˜¯æœ‰å¯èƒ½å•ä¸ªå®¹å™¨æŠŠ cpu è·‘æ»¡çš„ã€‚æ‰€ä»¥å¦‚æœèƒ½é™åˆ¶ cpuã€å†…å­˜çš„ä½¿ç”¨å°±æ›´å¥½äº†ï¼ŒCgroup å°±æ˜¯åšè¿™ä¸ªäº‹çš„ã€‚</p>
<p>Cgroup çš„åŸç†å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40a2e69605244305bc66a7e45fb5b267~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=9y8Zn7iHzfraJpWX37bPGDJoWfQ%3D" alt="" loading="lazy"/></p>
<p>Cgroup å¯¹ä¸åŒèµ„æºè¿›è¡Œäº†åˆ†ç»„ï¼Œä¾‹å¦‚ cpu æ€»å…±æ˜¯ 100%ï¼Œå‡è®¾åˆ†é…ç»™æŸä¸ªå®¹å™¨æ˜¯ 25%ï¼Œå½“ä½ è¿›å…¥å®¹å™¨ä¸­ï¼Œä½ çœ‹åˆ°çš„è‡ªå·± cpu æ€»å…±æ˜¯ 100% ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå®¹å™¨é‡Œçš„ 100% æ˜¯å‡çš„ï¼Œå…¶å®æ˜¯ä»çœŸå®çš„ 25% é‡Œé¢å»åˆ†çš„ã€‚</p>
<p>Cgroup å¦‚ä½•æ“ä½œæ˜¯æœ‰å¯¹åº”çš„ linux å‘½ä»¤çš„ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸æ·±å…¥äº†ï¼Œå› ä¸ºæ€§ä»·æ¯”å¹¶ä¸é«˜ï¼Œç”¨å¥½ docker å°±å¯ä»¥äº†ã€‚</p>
<h2 data-id="heading-23">ã€å»¶ä¼¸è¡¥å……ã€‘æ·±å…¥åŸç†4ï¼šdocker å®¹å™¨ç½‘ç»œçš„ç§˜å¯†</h2>
<p>ä¸ºäº†æ›´é€šä¿—çš„è§£é‡Š docker çš„æ¡¥æ¥ç½‘ç»œï¼Œæˆ‘ä»¬å…ˆä»è®¡ç®—æœºç½‘ç»œåŸºæœ¬çš„çŸ¥è¯†è®²èµ·ï¼š</p>
<p>å¦‚ä¸‹å›¾ï¼Œåªéœ€è¦ä¸€æ ¹ç½‘çº¿ç›¸äº’è¿æ¥ï¼Œç„¶ååœ¨è®¡ç®—æœºä¸Šé…ç½®ä¸€ä¸‹è‡ªå·±çš„ ip åœ°å€ï¼ˆåœ¨ä¸€ä¸ªç½‘æ®µé‡Œï¼‰ï¼Œä¸¤å°è®¡ç®—æœºå°±å¯ä»¥ç›¸äº’é€šä¿¡äº†ã€‚ä¾‹å¦‚ A è®¡ç®—æœºçš„ ip æˆ‘ä»¬å†™æ­» ip åˆ°ç½‘å¡ï¼Œåœ°å€ä¸º 192.168.1.1/24ï¼ŒB è®¡ç®—æœºæ˜¯ 192.168.1.2/24 ï¼Œä»–ä»¬éƒ½æ˜¯ 192.168.1.xxx ç½‘æ®µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8d93afb2a4e41fcaab4fc1775deb8ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=sDm3sjgDlsFnfCwugXRdy%2B8RmjE%3D" alt="" loading="lazy"/></p>
<p>æœ‰äº›åŒå­¦å¯èƒ½ä¸ç†è§£ï¼Œä¸ºå•¥è¦åˆ†é… ip åœ°å€ï¼Ÿå› ä¸ºæˆ‘ä»¬å¾ˆå¤šé€šä¿¡åè®®æ˜¯åŸºäº ip åè®®çš„ï¼Œä¾‹å¦‚ httpï¼Œtcpã€‚æ‰€ä»¥å¿…é¡»åˆ†é… ip åœ°å€ï¼Œæ‰èƒ½è®©æ•°æ®åŒ…èµ°å‡ºç½‘å¡ã€‚æˆ‘ä»¬æ¥ç€èŠ:</p>
<p>ç°åœ¨æˆ‘ä»¬å¤šåŠ ä¸€äº›ç”µè„‘ï¼Œè¿™æ—¶å€™ä¸€æ ¹ç½‘çº¿è‚¯å®šå°±ä¸å¤Ÿäº†ï¼Œæˆ‘ä»¬å°±åŠ å…¥ä¸€ä¸ªäº¤æ¢æœºï¼ˆè™šæ‹Ÿäº¤æ¢æœºæ˜¯æœ‰ ip çš„ï¼Œä½†æ˜¯ç°å®ç”Ÿæ´»ä¸­çš„äº¤æ¢æœºæ˜¯æ²¡æœ‰ ipï¼‰ï¼Œå¦‚ä¸‹å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8329e75a78ee43bd83f814a96565e1e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=%2B7BU4vfRoF7tpIT3h7fF8fwW2OE%3D" alt="" loading="lazy"/></p>
<p>å‡è®¾äº¤æ¢æœºçš„ ip æ˜¯ 192.168.1.1/24ï¼Œè¿™ä¸ªäº¤æ¢æœºè¿˜å¯ä»¥è‡ªåŠ¨åˆ†é… ipï¼ˆdhcpåè®®ï¼‰ï¼Œåªè¦è®¡ç®—æœºè¿æ¥äº¤æ¢æœºï¼Œå°±ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªä¸é‡å¤çš„ ip åœ°å€ï¼Œé‚£ä¹ˆå¤šå°è®¡ç®—æœºäº’ç›¸é€šä¿¡å°±è§£å†³äº†ã€‚</p>
<p>å…¶å® docker å†…éƒ¨é»˜è®¤æœ‰ä¸€ä¸ªå«åš docker0 çš„ç½‘æ¡¥ï¼Œè¿™ä¸ªç½‘æ¡¥å·¥ä½œæœºåˆ¶å°±è·Ÿæˆ‘ä»¬ä¸Šé¢è¯´çš„äº¤æ¢æœºç±»ä¼¼ã€‚è€Œå®¹å™¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šè¿æ¥ docker 0 ç½‘æ¡¥ã€‚å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32d6362471ac450492a7a8be0f5f9368~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=HHoBlHiBNSVLrarn8RgpPDg8AmE%3D" alt="" loading="lazy"/></p>
<p><strong>è¿™æ ·å®¹å™¨ä¹‹é—´äº’é€šçš„é—®é¢˜æˆ‘ä»¬å°±è§£å†³äº†ã€‚</strong></p>
<p>é‚£ä¹ˆå¦‚ä½•è§£å†³å®¹å™¨è·Ÿå¤–éƒ¨ç½‘ç»œé€šä¿¡çš„é—®é¢˜ï¼Œä¾‹å¦‚æŸä¸ªå®¹å™¨å»è®¿é—®å¾®ä¿¡ç™»å½•ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼Œå…¶å® docker0 æ˜¯è¿æ¥åˆ°æˆ‘ä»¬çœŸå®ç‰©ç†æœºçš„ç½‘å¡ eth0 æ¥è½¬å‘æ•°æ®ï¼Œä»è€Œè®©å®¹å™¨çš„æ•°æ®é€šè¿‡ -&gt; docker0 -&gt; eth0 å‘é€åˆ°è®¡ç®—æœºå¤–éƒ¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/619e592a6b874215b0bcb41f17da744f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=PZPhQEYZ91jX7fsMbKKyTY4fADw%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œåˆæœ‰é—®é¢˜äº†ï¼Œå®¹å™¨å†…éƒ¨çš„ ip å¾€å¾€æ˜¯ä¸€ä¸ªå†…éƒ¨åœ°å€ï¼Œä»€ä¹ˆæ˜¯å†…éƒ¨åœ°å€ï¼Ÿä½ ä¼šçœ‹åˆ°ï¼Œæˆ‘ä»¬å‰ç«¯å¯åŠ¨å‰ç«¯åº”ç”¨ï¼Œç»å¸¸çœ‹åˆ°å¯åŠ¨çš„ ip åœ°å€æ˜¯ 192.168.x.xï¼Œä½ å›åˆ°å®¶å¯åŠ¨å‰ç«¯åº”ç”¨åˆ†é…çš„åœ°å€å±…ç„¶æ˜¯ä¸€æ ·çš„ 192.168.x.xã€‚æˆ‘ä»¬çŸ¥é“ ip åœ°å€å¿…é¡»å…¨ç½‘å”¯ä¸€ï¼Œä¸ºå•¥åœ¨å®¶é‡Œåˆ†é…çš„ ip å’Œåœ¨å…¬å¸åˆ†é…çš„ ip ä¸€æ ·å‘¢ï¼Ÿ</p>
<p>è¿™æ˜¯å› ä¸º ip åœ°å€è§„å®šäº†ä¸€äº›åªèƒ½åœ¨å†…ç½‘é€šè®¯çš„åœ°å€ï¼Œä¸èƒ½ç”¨åœ¨å¤–ç½‘ï¼Œä¾‹å¦‚ 192.168.x.x å°±æ˜¯ä¸ä¼šç”¨åœ¨å¤–éƒ¨ç½‘ç»œè®¿é—®çš„ ip åœ°å€ã€‚</p>
<p>è¿™å¯¹äº docker å®¹å™¨è®¿é—®å¤–éƒ¨ç½‘ç»œå°±æœ‰é—®é¢˜äº†ï¼Œä½ æƒ³æƒ³ dockerå®¹å™¨ -&gt; docker0 -&gt; eth0 å°†æ•°æ®åŒ…ä¼ ç»™äº†å¾®ä¿¡æœåŠ¡å™¨ï¼Œå¾®ä¿¡æœåŠ¡ä¸èƒ½è¯´æˆ‘å›ä¼ çš„ ip åœ°å€æ˜¯ dockerå®¹å™¨çš„ ipï¼Œå› ä¸º dockerå®¹å™¨çš„ ip æ˜¯å†…éƒ¨åœ°å€ï¼Œä¸èƒ½åœ¨ç½‘ç»œä¸Šä¼ è¾“ã€‚</p>
<p>è¿™é‡Œåˆæ¶‰åŠä¸€ä¸ªæ¦‚å¿µï¼Œå« nat è½¬æ¢ï¼Œä¹Ÿå°±æ˜¯ docker å®¹å™¨å°†æ•°æ®åŒ…ä¼ ç»™ eth0 çš„æ—¶å€™ï¼Œä¼šæ”¹å†™è‡ªå·±æ•°æ®åŒ…å‘é€ç«¯çš„ ip åœ°å€ä¸º eth0 çš„å…¬ç½‘åœ°å€ã€‚</p>
<p><strong>è¿™æ ·å°±è§£å†³äº†å®¹å™¨è®¿é—®å¤–éƒ¨ç½‘ç»œçš„é—®é¢˜äº†ã€‚</strong></p>
<p>é—®é¢˜åˆæ¥äº†å“¦ï¼Œé‚£è¿”å›ç»™ eth0 çš„æ•°æ®ï¼Œå¦‚ä½•çŸ¥é“è¿™ä¸ªæ•°æ®åŒ…æœ€ç»ˆè½¬å‘ç»™å“ªä¸ªå®¹å™¨å‘¢ï¼Ÿè¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªå«åš iptables çš„å·¥å…·ï¼ˆNAT è½¬æ¢ä¹Ÿæ˜¯ä¾èµ–å®ƒï¼‰ï¼Œå®ƒå¯ä»¥è®°å½•è½¬å‘è§„åˆ™ï¼Œä¾‹å¦‚å¦‚æœè¿™ä¸ªæ•°æ®æ˜¯ä» 80 ç«¯å£å‡ºå»çš„ï¼Œé‚£ä¹ˆè¿”å›çš„æ—¶å€™ï¼Œå°±è¿”å›ç»™ A å®¹å¯¹åº”çš„å†…éƒ¨ ipã€‚</p>
<h2 data-id="heading-24">ã€å»¶ä¼¸è¡¥å……ã€‘æ·±å…¥åŸç†5ï¼šdocker å®¹å™¨æ–‡ä»¶éš”ç¦»å’Œå…±äº«çš„ç§˜å¯†</h2>
<p><strong>æ–‡ä»¶éš”ç¦»</strong></p>
<p>docker å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿæ˜¯è·Ÿå®¿ä¸»æœºéš”ç¦»çš„ï¼Œåœ¨ docker é‡Œï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ä¸€ä»½ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿã€‚linux å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p>
<p>å®é™…ä¸Š linux ä¹Ÿæ˜¯ç”¨äº†éšœçœ¼æ³•åšåˆ°çš„ï¼Œå¦‚ä¸‹å›¾ï¼Œé¦–å…ˆå‡è®¾ä¸‹å›¾æ˜¯æ­£å¸¸çš„æŸå° linux æœºå™¨çš„ç›®å½•ç»“æ„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2ba4a7f3e82450689860ceac12ac9a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=lVn%2Fidbfvt6nXwvpv6%2BgosHvcVs%3D" alt="" loading="lazy"/></p>
<p>ç„¶åæˆ‘ä»¬å¸Œæœ› docker å®¹å™¨è·Ÿ joe ç›®å½•ï¼ˆæœ€å³è¾¹æœ€åä¸€ä¸ªç›®å½•ï¼‰æ‹¿æ¥ä½œä¸ºå®¹å™¨çš„æ ¹ç›®å½•ï¼Œä½¿ç”¨ linux çš„ Mount Namespac åŠŸèƒ½ + chroot å‘½ä»¤ï¼Œç»“æœå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/224342bce84c4d8f808c3cdcf12aa387~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=mzAa52GcFrI1Yv92LJOZUEVqALw%3D" alt="" loading="lazy"/></p>
<p>å®¹å™¨çš„æ ¹ç›®å½•ï¼ŒæŒ‚è½½åˆ°äº†å®¿ä¸»æœºçš„ joe ç›®å½•ã€‚ç”±äº Mount Namespace æŠ€æœ¯çš„ç‰¹æ€§ï¼Œè¿™ä¸ªå®¹å™¨çš„æ ¹ç›®å½•å¯¹äºå®¿ä¸»æœºæ˜¯çœ‹ä¸è§çš„ã€‚</p>
<p>è€Œè¿™åœ¨æŸäº›æƒ…å†µä¸‹ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æ¯”å¦‚æ•°æ®åº“æ–‡ä»¶ï¼Œæˆ‘ä»¬æƒ³ç•™åœ¨å®¿ä¸»æœºä¸Šï¼Œè¿™æ ·é‡å¯å®¹å™¨çš„æ—¶å€™ï¼Œä¾ç„¶ä¿ç•™äº†æ•°æ®åº“çš„æ•°æ®ã€‚</p>
<p>è€Œè¿™é‡Œè¦ä½¿ç”¨åˆ°çš„æŒ‚è½½æŠ€æœ¯ï¼Œå°±æ˜¯Linuxçš„<strong>ç»‘å®šæŒ‚è½½ï¼ˆbind mountï¼‰æœºåˆ¶</strong>ã€‚å®ƒçš„ä¸»è¦ä½œç”¨å°±æ˜¯ï¼Œå…è®¸ä½ å°†ä¸€ä¸ªç›®å½•æˆ–è€…æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ•´ä¸ªè®¾å¤‡ï¼ŒæŒ‚è½½åˆ°ä¸€ä¸ªæŒ‡å®šçš„ç›®å½•ä¸Šã€‚å¹¶ä¸”ï¼Œè¿™æ—¶ä½ åœ¨è¯¥æŒ‚è½½ç‚¹ä¸Šè¿›è¡Œçš„ä»»ä½•æ“ä½œï¼Œåªæ˜¯å‘ç”Ÿåœ¨è¢«æŒ‚è½½çš„ç›®å½•æˆ–è€…æ–‡ä»¶ä¸Šï¼Œè€ŒåŸæŒ‚è½½ç‚¹çš„å†…å®¹åˆ™ä¼šè¢«éšè—èµ·æ¥ä¸”ä¸å—å½±å“ã€‚</p>
<p><strong>æ–‡ä»¶å…±äº«</strong></p>
<p>ç”±äºå®¹å™¨çš„ç‰¹æ€§ï¼Œå¦‚æœå®¹å™¨åˆ é™¤ï¼Œé‚£ä¹ˆå®¹å™¨é‡Œçš„æ•°æ®ä¹Ÿä¼šåˆ é™¤ï¼Œä¹‹å‰çš„æŒ‚è½½åŠŸèƒ½ä¹Ÿä¼šè§£é™¤ã€‚å¯æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›ä¿ç•™å®¹å™¨é‡Œçš„æ•°æ®ï¼Œä¾‹å¦‚æ•°æ®åº“ï¼Œæ–¹ä¾¿å†ä¸‹ä¸€æ¬¡å¯åŠ¨é•œåƒçš„æ—¶å€™èƒ½å…±äº«ä¹‹å‰å®¹å™¨çš„æ•°æ®ã€‚</p>
<p>è¿™ä¸ªåŠŸèƒ½åœ¨ docker å«åšç»‘å®š <strong>Volume åŠŸèƒ½ã€‚</strong> è¿™ä¸ªåŠŸèƒ½çš„å®ç°å…¶å®å¾ˆç®€å•ï¼Œä¹‹é—´æˆ‘ä»¬è®²çš„ç»‘å®šæŒ‚è½½ï¼Œå…¶å®éœ€è¦åˆ†ä¸ºä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥å¼€å¯ Mount Namespaceï¼Œæ­¤æ—¶å®¹å™¨å†…éƒ¨ä»ç„¶å¯ä»¥çœ‹åˆ°å®¿ä¸»æœºçš„ç›®å½•ï¼Œä½†æ˜¯å®¿ä¸»æœºçœ‹ä¸åˆ°å®¹å™¨çš„ç›®å½•ï¼Œç¬¬äºŒæ­¥æ‰§è¡Œç±»ä¼¼ chroot å‘½ä»¤ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºæ‰§è¡Œåï¼Œå®¹å™¨å°±çœ‹ä¸åˆ°å®¿ä¸»æœºç›®å½•äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ç¬¬ä¸€æ­¥ä¹‹å‰ï¼ŒæŠŠ Volume æŒ‡å®šçš„å®¿ä¸»æœºç›®å½•ï¼ˆæ¯”å¦‚/homeç›®å½•ï¼‰ï¼ŒæŒ‚è½½åˆ°æŒ‡å®šçš„å®¹å™¨ç›®å½•ï¼ˆæ¯”å¦‚/testç›®å½•ï¼‰åœ¨å®¿ä¸»æœºä¸Šå¯¹åº”çš„ç›®å½•ä¸Šï¼Œè¿™ä¸ª Volume çš„æŒ‚è½½å·¥ä½œå°±å®Œæˆäº†ã€‚</p>
<h2 data-id="heading-25">æœ€åè¡¥å……</h2>
<p>è¡¥å……ï¼Œä¹‹å‰å‰ç«¯éƒ¨ç½²çš„ dockerfile ä¸€èˆ¬éƒ½ä¼šç”¨åˆ†é˜¶æ®µæ„å»ºçš„æ–¹æ³•ï¼Œé¦–å…ˆå€ŸåŠ© node.js é•œåƒæ‰“åŒ…å‰ç«¯åº”ç”¨ï¼Œç„¶åå°†æ‰“åŒ…å¥½çš„å†…å®¹æ”¾å…¥ nginx é•œåƒä¸­ï¼Œæœ€åå€ŸåŠ© nginx ä½œä¸º web æœåŠ¡å™¨ï¼Œæ¥è®©å¤–ç½‘è®¿é—®ã€‚æˆ‘ä»¬ç®€å•å®ç°ä¸€ä¸‹ï¼Œå¯ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Use the official Node.js runtime as the base image</span>
FROM node:20-slim as build

<span class="hljs-comment"># Set the working directory in the container</span>
WORKDIR /app

<span class="hljs-comment"># Copy package.json and package-lock.json to the working directory</span>
COPY package*.json ./

<span class="hljs-comment"># Install dependencies</span>
RUN npm install

<span class="hljs-comment"># Copy the entire application code to the container</span>
COPY . .

<span class="hljs-comment"># Build the React app for production</span>
RUN npm run build

<span class="hljs-comment"># Use Nginx as the production server</span>
FROM nginx:alpine

<span class="hljs-comment"># Copy the built React app to Nginx's web server directory</span>
COPY --from=build /app/build /usr/share/nginx/html

<span class="hljs-comment"># Expose port 80 for the Nginx server</span>
EXPOSE 80

<span class="hljs-comment"># Start Nginx when the container runs</span>
CMD [<span class="hljs-string">"nginx"</span>, <span class="hljs-string">"-g"</span>, <span class="hljs-string">"daemon off;"</span>]
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯</p>
<pre><code class="hljs language-bash" lang="bash">COPY --from=build /app/build /usr/share/nginx/html
</code></pre>
<p>--from build , è¿™ä¸ª build å°±æ˜¯ <code>FROM node:20-slim as build</code> ä¸­ï¼Œnode.js é•œåƒçš„åˆ«åã€‚æ„æ€æ˜¯æŠŠè¿™ä¸ªé•œåƒä¸­ /app/build ç›®å½•ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ° nginx:alpine é•œåƒçš„ /usr/share/nginx/html æ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<h2 data-id="heading-26">æ¬¢è¿åŠ å…¥äº¤æµç¾¤</h2>
<p>æ¬¢è¿å¤§å®¶ä¸€èµ·è¿›ç¾¤è®¨è®ºå‰ç«¯å…¨æ ˆæŠ€æœ¯å’Œ ai agent ï¼Œä¸€èµ·è¿›æ­¥ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•°æ®åº“AIæ–¹å‘æ¢ç´¢-MCPåŸç†è§£æ&DBæ–¹å‘å®æˆ˜ï½œå¾—ç‰©æŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7581670270844174376</link>    <guid>https://juejin.cn/post/7581670270844174376</guid>    <pubDate>2025-12-09T08:55:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581670270844174376" data-draft-id="7581415427516661802" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•°æ®åº“AIæ–¹å‘æ¢ç´¢-MCPåŸç†è§£æ&amp;DBæ–¹å‘å®æˆ˜ï½œå¾—ç‰©æŠ€æœ¯"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-09T08:55:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾—ç‰©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2392954206960247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•°æ®åº“AIæ–¹å‘æ¢ç´¢-MCPåŸç†è§£æ&amp;DBæ–¹å‘å®æˆ˜ï½œå¾—ç‰©æŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392954206960247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾—ç‰©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T08:55:49.000Z" title="Tue Dec 09 2025 08:55:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»40åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€MCPè®¾è®¡ç†å¿µ</h2>
<p>åœ¨æµ…æ MCP åŸç†ä¹‹å‰ï¼Œæœ‰å¿…è¦ææ¸…æ¥šä¸¤ä¸ªé—®é¢˜ï¼š<strong>MCP æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ</strong> ä»¥æ­¤æ˜æ™°å®ƒå­˜åœ¨çš„ä»·å€¼å’Œæ„ä¹‰ã€‚</p>
<p>é¦–å…ˆï¼ŒMCPï¼ˆModel Context Protocolï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æ˜¯ç”±äººå·¥æ™ºèƒ½å…¬å¸ Anthropic ä¸»å¯¼æ¨å‡ºçš„ä¸€ç§<strong>å¼€æ”¾æ ‡å‡†åè®®ï¼Œæ—¨åœ¨ç»Ÿä¸€å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸å¤–éƒ¨æ•°æ®æºã€å·¥å…·åŠæœåŠ¡ä¹‹é—´çš„äº¤äº’æ–¹å¼</strong>ã€‚è¯¥åè®®<strong>é€šè¿‡JSON-RPC 2.0 æ ‡å‡†æ¶ˆæ¯æ ¼å¼</strong>å®šä¹‰é€šä¿¡è§„åˆ™ï¼Œä½¿æ¨¡å‹èƒ½åƒä½¿ç”¨"ä¸‡èƒ½æ¥å£"ï¼ˆç±»æ¯” Type-C æ¥å£ï¼‰ä¸€æ ·å³æ’å³ç”¨åœ°è¿æ¥å¼‚æ„èµ„æºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74f31e19dded49d8b56103dc2523e504~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=qXKKS6mABMUC3yGTTRPZnCB5s%2Fc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å›¾ç‰‡æ¥æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F598749792" target="_blank" title="https://zhuanlan.zhihu.com/p/598749792" ref="nofollow noopener noreferrer">zhuanlan.zhihu.com/p/598749792</a></p>
<p>å…¶æ¶æ„é‡‡ç”¨<strong>å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼ï¼ŒåŒ…å«ä¸‰ä¸ªå…³é”®ç»„ä»¶</strong>ï¼šÂ </p>
<ul>
<li><strong>MCP Host</strong>ï¼šè¿è¡Œå¤§æ¨¡å‹åº”ç”¨ï¼ˆå¦‚ Cursorã€Clineã€Cherry Studioã€Claude Desktop ç­‰ï¼‰ï¼Œè´Ÿè´£å‘èµ·ä»»åŠ¡è¯·æ±‚ã€‚</li>
<li><strong>MCP Client</strong>ï¼šé›†æˆåœ¨ Host ä¸­çš„åè®®å®¢æˆ·ç«¯ï¼Œè§£æä»»åŠ¡éœ€æ±‚å¹¶ä¸æœåŠ¡å™¨åè°ƒèµ„æºè°ƒç”¨ã€‚</li>
<li><strong>MCP Server</strong>ï¼š<strong>è½»é‡çº§</strong>æœåŠ¡ç¨‹åºï¼ŒåŠ¨æ€æ³¨å†Œä¸æš´éœ²æœ¬åœ°èµ„æºï¼ˆä¾‹å¦‚æ–‡ä»¶ã€æ•°æ®åº“ï¼‰æˆ–è¿œç¨‹æœåŠ¡ï¼ˆå¦‚äº‘APIï¼‰ï¼Œå¤„ç†å®¢æˆ·ç«¯è¯·æ±‚å¹¶è¿”å›ç»“æ„åŒ–æ•°æ®ï¼ŒåŒæ—¶æä¾›å®‰å…¨æ§åˆ¶ï¼ŒåŒ…æ‹¬è®¿é—®æƒé™ç®¡ç†å’Œèµ„æºéš”ç¦»ã€‚</li>
</ul>
<p>ç®€å•æ¦‚æ‹¬ä¸º MCP æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡†ï¼Œæœ¬è´¨æ˜¯åº”ç”¨å±‚åè®®ï¼ˆProtocalï¼‰ï¼Œè·Ÿæˆ‘ä»¬ç†ŸçŸ¥çš„ TCP/IPï¼ŒHTTP åè®®ç±»ä¼¼ã€‚å€ŸåŠ©å®ƒå¼€å‘è€…å¯ä»¥å®‰å…¨åœ°åœ¨æ•°æ®æºå’Œ AI å·¥å…·ä¹‹é—´å»ºç«‹åŒå‘è¿æ¥ã€‚å…¶æ¶æ„æ¦‚æ‹¬èµ·æ¥å°±æ˜¯ï¼š</p>
<ul>
<li><strong>å¼€å‘è€…å¯ä»¥é€šè¿‡ MCP æœåŠ¡å™¨å…¬å¼€ä»–ä»¬çš„æ•°æ®ï¼›</strong></li>
<li><strong>AI åº”ç”¨ï¼ˆMCP å®¢æˆ·ç«¯ï¼‰ å¯ä»¥è¿æ¥åˆ° MCP æœåŠ¡å™¨ï¼Œè·å–æ‰€éœ€æ•°æ®ï¼ŒLLMs å†åˆ†ææŠ•å–‚çš„æ•°æ®ã€‚</strong></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2a345ca9dbd4ff9851b7b321178f042~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=TRBAEFK%2B%2BCasoc7fVFlxszzXMK8%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>é‚£ä¸ºä»€ä¹ˆä¼šå‡ºç°å‘¢ï¼Ÿè¿™å°±è¦è¯´åˆ°<strong>RAGå’ŒFunction Calling</strong>Â æŠ€æœ¯äº†ã€‚</p>
<p><strong>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</strong> é€šè¿‡æ£€ç´¢å¤–éƒ¨çŸ¥è¯†åº“è·å–ä¸é—®é¢˜ç›¸å…³çš„å®æ—¶ä¿¡æ¯å¹¶å°†å…¶æ³¨å…¥æ¨¡å‹æç¤ºè¯ï¼Œç”Ÿæˆæ›´ç²¾å‡†ã€æ—¶æ•ˆæ€§æ›´å¼ºçš„å›ç­”ã€‚Â <strong>å…¶å·¥ä½œåŸç†ä¸º</strong>ï¼šå½“ç”¨æˆ·å‘å‡ºæé—®æ—¶ï¼ŒAI åº”ç”¨é€šè¿‡å‘é‡æ£€ç´¢ã€å…³é”®è¯åŒ¹é…ç­‰æ–¹å¼ï¼Œä»å¤–éƒ¨çŸ¥è¯†åº“æˆ–æ•°æ®æºä¸­æœç´¢ç›¸å…³ä¿¡æ¯ï¼Œå†æŠŠæ£€ç´¢åˆ°çš„ä¿¡æ¯ä½œä¸ºä¸Šä¸‹æ–‡æä¾›ç»™å¤§æ¨¡å‹ï¼Œè®©å¤§æ¨¡å‹åŸºäºè¡¥å……çš„ä¿¡æ¯è¿›è¡Œå›ç­”ã€‚<strong>æŠ€æœ¯æµç¨‹ï¼š</strong> ç”¨æˆ·æé—®â†’é—®é¢˜å‘é‡åŒ–â†’å‘é‡æ•°æ®åº“ç›¸ä¼¼åº¦æ£€ç´¢â†’æ‹¼æ¥ä¸Šä¸‹æ–‡æç¤ºè¯â†’æ¨¡å‹ç”Ÿæˆç­”æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c83eef56bd64d45b58a24f1d8e244f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=O21RxrzyhDSnSU8%2B8t4wFp%2BuKhs%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å›¾ç‰‡æ¥æºï¼šailydoseofds</p>
<p>è€Œ<strong>Function Callingï¼ˆå‡½æ•°è°ƒç”¨ï¼‰</strong> æ‹“å±•äº†æ¨¡å‹æ‰§è¡ŒåŠ¨ä½œçš„èƒ½åŠ›ï¼Œè§£å†³çº¯æ–‡æœ¬äº¤äº’çš„å±€é™æ€§ï¼Œå³æ¨¡å‹è§£æç”¨æˆ·æ„å›¾åç”Ÿæˆç»“æ„åŒ–æŒ‡ä»¤ï¼Œè°ƒç”¨é¢„å®šä¹‰å¤–éƒ¨å‡½æ•°æˆ– APIï¼ˆå¦‚å‘é€é‚®ä»¶ã€æŸ¥è¯¢å¤©æ°”ï¼‰ã€‚<strong>å…¶å·¥ä½œåŸç†ä¸º</strong>ï¼šå½“ç”¨æˆ·å‘å‡ºæé—®æ—¶ï¼Œåº”ç”¨ä¼šå°†é›†æˆçš„å‡½æ•°åˆ—è¡¨ä½œä¸ºä¸Šä¸‹æ–‡å‘é€ç»™å¤§æ¨¡å‹ã€‚<strong>å¤§æ¨¡å‹æ ¹æ®ç”¨æˆ·è¾“å…¥åˆ¤æ–­åº”è°ƒç”¨çš„å‡½æ•°ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„è°ƒç”¨å‚æ•°ã€‚éšåï¼Œåº”ç”¨æ‰§è¡Œè¯¥å‡½æ•°å¹¶å°†ç»“æœå‘é€ç»™å¤§æ¨¡å‹ï¼Œä½œä¸ºè¡¥å……ä¿¡æ¯ä¾›å…¶ç”Ÿæˆæœ€ç»ˆçš„æ€»ç»“æˆ–å›ç­”ã€‚æŠ€æœ¯æµç¨‹</strong>ï¼šç”¨æˆ·æŒ‡ä»¤â†’ æ¨¡å‹è¯†åˆ«éœ€è°ƒç”¨çš„å‡½æ•°â†’ ç”Ÿæˆå‚æ•°åŒ–è°ƒç”¨æŒ‡ä»¤â†’ å¤–éƒ¨ç³»ç»Ÿæ‰§è¡Œâ†’ è¿”å›ç»“æœè‡³æ¨¡å‹â†’ ç”Ÿæˆç”¨æˆ·å“åº”ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d27ecb8622774e31a9d55f343b2cf835~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=IOrPuYT00cXNEtB76jxJ8puWxUs%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å›¾ç‰‡æ¥æºï¼šailydoseofds</p>
<p>ä½†ä¸åŒçš„ API éœ€è¦å°è£…æˆä¸åŒçš„æ–¹æ³•ï¼Œä¸”å‚æ•°ç¡®å®šåï¼ŒåæœŸå˜æ›´å›°éš¾ï¼Œå¾ˆéš¾åœ¨ä¸åŒçš„å¹³å°çµæ´»å¤ç”¨ã€‚ Â è€Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼ŒMCP æ˜¯åœ¨ Function Calling çš„åŸºç¡€ä¸Šåšäº†è¿›ä¸€æ­¥çš„æŠ½è±¡ï¼Œç›®çš„æ˜¯è®©åº”ç”¨æ›´åŠ ç®€å•ã€é«˜æ•ˆã€å®‰å…¨åœ°å¯¹æ¥å¤–éƒ¨èµ„æºï¼Œæ›´å¥½åœ°ä¸ºå¤§æ¨¡å‹è¡¥å……ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚æ€»ç»“èµ·æ¥å°±æ˜¯ï¼ŒMCP æŠŠå¤§æ¨¡å‹è¿è¡Œç¯å¢ƒç§°ä½œ MCP Clientï¼Œä¹Ÿå°±æ˜¯ MCP å®¢æˆ·ç«¯ï¼ŒåŒæ—¶ï¼ŒæŠŠå¤–éƒ¨å‡½æ•°è¿è¡Œç¯å¢ƒç§°ä½œ MCP Serverï¼Œä¹Ÿå°±æ˜¯ MCP æœåŠ¡å™¨ï¼Œç„¶åï¼Œç»Ÿä¸€ MCP å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„è¿è¡Œè§„èŒƒï¼Œå¹¶ä¸”è¦æ±‚ MCP å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ï¼Œä¹Ÿç»Ÿä¸€æŒ‰ç…§æŸä¸ªæ—¢å®šçš„æç¤ºè¯æ¨¡æ¿è¿›è¡Œé€šä¿¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59cb5bafe20c4e9789aec4cf53229b4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=BDXwn2lvg1fRwAuCKYEQ2PK0Mxc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>MCP vs Function Calling å¯¹æ¯”ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dec37bae08374502b247877f4b91eced~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=5xv0r5R54HDaJDRztnE1EGaFzoM%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ç»¼ä¸Šï¼ŒRAGä¸Function Calling äº’è¡¥ï¼Œå‰è€…ç”¨äºçŸ¥è¯†æ£€ç´¢ï¼Œåè€…ç”¨äºæ‰§è¡Œæ“ä½œï¼ŒäºŒè€…å‡å¯æå‡æ¨¡å‹å®ç”¨æ€§ï¼Œä½†ç›®æ ‡ç»´åº¦ä¸åŒï¼Œä¸”å­˜åœ¨éš¾é›†æˆï¼Œæ‰©å±•æ€§å·®çš„é—®é¢˜ï¼Œå¼€å‘è€…å¾€å¾€éœ€ä¸ºä¸åŒæ¨¡å‹é‡å¤å®ç°å·¥å…·è°ƒç”¨é€»è¾‘ã€‚</p>
<p><strong>MCP åˆ™æ˜¯å¯¹ä¸¤è€…çš„æ•´åˆä¸æ ‡å‡†çš„è§„èŒƒåŒ–ï¼š</strong></p>
<ul>
<li><strong>æ ‡å‡†åŒ–æ¥å£</strong>ï¼šMCP ä¸º RAG çš„æ£€ç´¢æºæ¥å…¥ï¼ˆå¦‚æ•°æ®åº“ã€æ–‡æ¡£åº“ï¼‰å’Œ Function Calling çš„å·¥å…·è°ƒç”¨ï¼ˆå¦‚ API æœåŠ¡ï¼‰æä¾›ç»Ÿä¸€æ¥å…¥è§„èŒƒï¼Œé¿å…ä¸ºæ¯ä¸ªå·¥å…·å¼€å‘å®šåˆ¶åŒ–é€‚é…ã€‚ æ¯”å¦‚ MCP å·¥å…·çš„inputSchemaå¯å®šä¹‰å¤šä¸ªå‚æ•°ï¼Œé€šè¿‡requiredæ ‡è®°å¿…ä¼ å‚æ•°ã€‚å¤§æ¨¡å‹åœ¨è§£æç”¨æˆ·æé—®æ—¶ï¼Œä¼šæ ¹æ®å·¥å…·çš„æè¿°å’Œå‚æ•°å®šä¹‰ï¼Œè‡ªåŠ¨è§£æå¹¶æä¾›ç›¸åº”å‚æ•°å€¼æ¥è°ƒç”¨å·¥å…·ã€‚è¿™ç§å‚æ•°åŒ–è®¾è®¡æ–¹å¼æé«˜äº†å·¥å…·è°ƒç”¨çš„çµæ´»æ€§ï¼Œé™ä½äº† Function Calling çš„å¼€å‘å¤æ‚åº¦ã€‚</li>
</ul>

<pre><code class="hljs language-lua" lang="lua"><span class="hljs-keyword">return</span>Â Tool(
Â  Â  name=<span class="hljs-built_in">self</span>.name,
Â  Â  description=<span class="hljs-built_in">self</span>.description,
Â  Â  inputSchema={
Â  Â  Â  Â Â <span class="hljs-string">"type"</span>:Â <span class="hljs-string">"object"</span>,
Â  Â  Â  Â Â <span class="hljs-string">"properties"</span>: {
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"host"</span>: {<span class="hljs-string">"type"</span>:Â <span class="hljs-string">"string"</span>,Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"æ•°æ®åº“ä¸»æœºåœ°å€"</span>},
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"port"</span>: {<span class="hljs-string">"type"</span>:Â <span class="hljs-string">"integer"</span>,Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"æ•°æ®åº“ç«¯å£"</span>},
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"user"</span>: {<span class="hljs-string">"type"</span>:Â <span class="hljs-string">"string"</span>,Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"æ•°æ®åº“ç”¨æˆ·å"</span>},
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"password"</span>: {<span class="hljs-string">"type"</span>:Â <span class="hljs-string">"string"</span>,Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"æ•°æ®åº“å¯†ç "</span>},
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"database"</span>: {<span class="hljs-string">"type"</span>:Â <span class="hljs-string">"string"</span>,Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"æ•°æ®åº“åç§°"</span>}
Â  Â  Â  Â  },
Â  Â  Â  Â Â <span class="hljs-string">"required"</span>: [<span class="hljs-string">"host"</span>,Â <span class="hljs-string">"port"</span>,Â <span class="hljs-string">"user"</span>,Â <span class="hljs-string">"password"</span>,Â <span class="hljs-string">"database"</span>]
Â  Â  }
)
</code></pre>
<ul>
<li><strong>èƒ½åŠ›æ‰©å±•</strong>ï¼š</li>
<li>
<ul>
<li>RAG é€šè¿‡ MCP æ¥å…¥å®æ—¶æ•°æ®æµï¼ˆå¦‚è¯åˆ¸è¡Œæƒ…ï¼‰ï¼Œçªç ´é™æ€çŸ¥è¯†åº“é™åˆ¶ï¼›</li>
<li>Function Callingé€šè¿‡ MCP è°ƒç”¨å¼‚æ„å·¥å…·ï¼ˆå¦‚ IoT è®¾å¤‡ï¼‰ï¼Œæ— éœ€ä¾èµ–ç‰¹å®šæ¨¡å‹çš„æ”¯æŒã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><strong>ç³»ç»Ÿæ•ˆç‡</strong>ï¼šMCP é™ä½å¼€å‘å¤æ‚åº¦ï¼ˆå¦‚å¼€å‘è€…æ— éœ€ä¸ºä¸åŒæ¨¡å‹é‡å¤å®ç°å·¥å…·è°ƒç”¨é€»è¾‘ï¼‰ï¼Œä¿ƒè¿›å·¥å…·ç”Ÿæ€å…±äº«ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f6b876f522f42c6a42ea7fda515ca11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=fwfts7tQjWrE4gncBcspiVDLKao%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æŠ€æœ¯æ¼”è¿›æ€»ç»“</strong>ï¼š</p>
<ul>
<li>RAG â†’ Function Calling â†’ MCP ä»£è¡¨äº† AI èƒ½åŠ›çš„ä¸‰ä¸ªé‡è¦ç»´åº¦ï¼šä»é™æ€çŸ¥è¯†æ£€ç´¢åˆ°åŠ¨æ€è¡ŒåŠ¨æ‰§è¡Œï¼Œå†åˆ°æ ‡å‡†åŒ–ç”Ÿæ€æ„å»ºï¼Œæ ‡å¿—ç€ AI ä»çŸ¥è¯†å¢å¼ºåˆ°è¡ŒåŠ¨æ‰©å±•å†åˆ°ç”Ÿæ€æ ‡å‡†åŒ–çš„å‘å±•è¶‹åŠ¿ã€‚</li>
<li>åœ¨ AI Agent æ¶æ„ä¸­ï¼šRAG å……å½“çŸ¥è¯†ä¸­æ¢ï¼ŒFunction Calling ä¸ºæ‰§è¡Œæ‰‹æ®µï¼ŒMCP åˆ™æ˜¯è¿æ¥å†…å¤–çš„â€œç¥ç»æ¢çº½â€ã€‚</li>
<li><strong>æœªæ¥æ„ä¹‰</strong>ï¼šMCP çš„å¼€æ”¾æ€§å°†åŠ é€Ÿå·¥å…·äº’æ“ä½œæ€§ï¼Œæ¨åŠ¨å¤æ‚ä»»åŠ¡ï¼ˆå¦‚å¤š Agent åä½œï¼‰çš„è§„æ¨¡åŒ–è½åœ°ï¼Œæˆä¸º AI åŸºç¡€è®¾æ–½çš„å…³é”®ç»„ä»¶ã€‚</li>
</ul>
<h2 data-id="heading-1">äºŒã€MCP æ¶æ„è¯¦è§£</h2>
<p>äº†è§£ MCP å­˜åœ¨çš„ä»·å€¼åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä½ MCP åœ¨æ•´ä¸ª AI ä½“ç³»ä¸­æ‰€å¤„çš„ä½ç½®ï¼Œå¦‚ä»¥ Agent ä¸ºä¾‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e03f1b22573640d89fe8bab08ebeb377~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=JhtFb7mDb7CgmWyyAlDocaqbolU%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>äº†è§£å®Œå…¶åœ¨ç”Ÿæ€ä¸­æ‰€å¤„çš„ä½ç½®åï¼Œæœ¬èŠ‚å°†ç»“åˆ Python ç‰ˆ SDK æºç å’Œå¼€æº MCP for DB é¡¹ç›®è§£è¯»å¦‚ä½•è¿ç”¨ MCP ä»¥æ­¤äº†è§£å…¶æ¶æ„åŸç†åŠä½¿ç”¨æ–¹æ³•ã€‚MCP Python SDK æä¾›äº†ä¸€ä¸ªåˆ†å±‚æ¶æ„ï¼Œé€šè¿‡å¤šç§ä¼ è¾“åè®®å°† LLM åº”ç”¨ç¨‹åºè¿æ¥åˆ° MCP æœåŠ¡å™¨ï¼ŒåŒæ—¶å…·æœ‰é«˜çº§å’Œä½çº§å¼€å‘ APIã€‚</p>
<p>å‚è€ƒé¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FEliot-Shen%2FMCP-DB-GPT" target="_blank" title="https://github.com/Eliot-Shen/MCP-DB-GPT" ref="nofollow noopener noreferrer">github.com/Eliot-Shen/â€¦</a></p>
<p>Python SDKï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmodelcontextprotocol%2Fpython-sdk" target="_blank" title="https://github.com/modelcontextprotocol/python-sdk" ref="nofollow noopener noreferrer">github.com/modelcontexâ€¦</a></p>
<h3 data-id="heading-2">2.1MCPè¿è¡Œè¿‡ç¨‹</h3>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œæœ‰å¿…è¦å¯¹ MCP æ•´ä½“è¿è¡Œæœ‰ä¸ªå®è§‚ä¸Šçš„è®¤çŸ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé¦–å…ˆï¼Œéœ€ç”¨æˆ·åœ¨ä¸»æœºä¸Šé…ç½® MCP æœåŠ¡ï¼Œæ¯”å¦‚å€ŸåŠ© VSCode æ’ä»¶ Clineï¼Œæ ¹æ®ä½¿ç”¨çš„åè®®é…ç½®å¥½ JSONæ–‡ä»¶å³å¯ã€‚ç„¶åï¼Œç”¨æˆ·è¾“å…¥é—®é¢˜ï¼Œå®¢æˆ·ç«¯è®©å¤§è¯­è¨€æ¨¡å‹é€‰æ‹© MCP å·¥å…·ï¼Œå¤§æ¨¡å‹é€‰æ‹©å¥½å·¥å…·åï¼Œå®¢æˆ·ç«¯å¯»æ±‚ç”¨æˆ·åŒæ„ï¼Œç„¶åå†è¯·æ±‚ MCP æœåŠ¡å™¨ï¼Œ MCP æœåŠ¡å™¨è°ƒç”¨å·¥å…·å¹¶å°†å·¥å…·çš„ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°†æ¨¡å‹è°ƒç”¨ç»“æœå’Œç”¨æˆ·çš„æŸ¥è¯¢å‘é€ç»™å¤§è¯­è¨€æ¨¡å‹ï¼Œå¤§è¯­è¨€æ¨¡å‹ç»„ç»‡ç­”æ¡ˆç»™ç”¨æˆ·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb752df059f6441cad887e2257e6820b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=b7GUZlDlmC0DX8XCILVr4CseCZ4%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å¯è§ï¼Œæ•´ä¸ªæµç¨‹ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†å°±æ˜¯<strong>Client å’Œ Serverçš„äº¤äº’</strong>ï¼Œè€Œåœ¨ä½¿ç”¨åƒ Cline è¿™ç§ä¸»æœºç«¯è½¯ä»¶æ—¶ï¼Œæ•´ä½“æ„ŸçŸ¥å¦‚ä¸‹å›¾ï¼ŒClient å·²ç»è¢«åµŒåœ¨ MCP Host ä¸­ï¼Œåªéœ€å¼€å‘å‡ºå¯¹åº”çš„ MCP Serverï¼Œåœ¨ä¸»æœºä¸­é…ç½®å¥½ JSONå³å¯ä½¿ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9013370e13eb4d62a5c47895d684da5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=7oqjho3E1IUGnUW771YPC4guyoU%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ¥ä¸‹æ¥å°†ç»“åˆé¡¹ç›®å’Œ SDK æºç è¯¦ç»†è§£è¯» MCP æ¶æ„åŸç†ã€‚</p>
<h3 data-id="heading-3">2.2MCPè¿è¡ŒåŸç†</h3>
<p>MCP Serverä½œä¸º MCP æ¶æ„çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œåœ¨æå‡AIåº”ç”¨æ€§èƒ½æ–¹é¢å‘æŒ¥ç€ä¸å¯æ›¿ä»£çš„å…³é”®ä½œç”¨ã€‚å…¶ Python ç‰ˆ SDK æä¾›çš„æ¡†æ¶å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94d71e641dde4fc2b8087a79642f4e9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=InGZ%2FYZuwlRBZmpQucE3l21LfPc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æˆ‘ä»¬ç€é‡å…³æ³¨å…¶æä¾›çš„ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šèµ„æº@mcp.resourceã€å·¥å…·@mcp.toolã€æç¤ºè¯@mcp.promptã€‚è€Œè¿™ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½ä¹‹é—´çš„åä½œé€»è¾‘å¤§è‡´å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>èµ„æºä¸ºå·¥å…·æä¾›ä¸Šä¸‹æ–‡</strong>ï¼šæ‰‹åŠ¨æ³¨å…¥èµ„æºå¯å¢å¼ºæ¨¡å‹å¯¹ä»»åŠ¡çš„ç†è§£ï¼ˆå¦‚æä¾›å‚è€ƒæ–‡æ¡£ï¼‰è¾…åŠ©å…¶æ›´å‡†ç¡®è°ƒç”¨å·¥å…·ã€‚</li>
<li><strong>å·¥å…·æ‰§è¡Œä¾èµ–èµ„æºè¾“å…¥</strong>ï¼šå½“å·¥å…·æ“ä½œå¤–éƒ¨æ•°æ®æ—¶ï¼Œå¦‚æ–‡ä»¶å¤„ç†å·¥å…·ï¼Œå¯å°†æŒ‡å®šæ–‡ä»¶ URI ä½œä¸ºå·¥å…·å‚æ•°è¾“å…¥ã€‚</li>
<li><strong>æç¤ºè¯å°è£…å·¥å…·ä¸èµ„æºè°ƒç”¨</strong>ï¼šå¤æ‚ Prompt å¯é¢„è®¾å·¥å…·è°ƒç”¨é¡ºåºæˆ–èµ„æºä½¿ç”¨è§„åˆ™ï¼Œå½¢æˆè‡ªåŠ¨åŒ–å·¥ä½œæµã€‚</li>
</ul>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åœ¨å·¥å…·ä¸­å°è£…æç¤ºè¯æ¨¡ç‰ˆå­˜åœ¨çš„é—®é¢˜æ˜¯è¯¥å·¥å…·ä¸ä¸€å®šèƒ½è¢«LLMè°ƒç”¨ï¼Œå¯¼è‡´ä¸ä¸€å®šèƒ½è¾¾åˆ°é¢„æœŸæ•ˆæœï¼Œä½†ä½¿ç”¨clineè¿™ä¸­å®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯çš„æç¤ºè¯åˆä¸èƒ½è¢«åŠ è½½è°ƒç”¨</span>
asyncÂ defÂ run_tool(self, arguments:Â Dict<span class="hljs-section">[str,Â Any]</span>) -&gt;Â Sequence<span class="hljs-section">[TextContent]</span>:
Â  Â  <span class="hljs-attr">prompt</span> =Â f<span class="hljs-string">"""
Â  Â  Â  Â  Â  Â  - Workflow:
Â  Â  Â  Â  Â  Â  Â  1. è§£æç”¨æˆ·è¾“å…¥çš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œæå–å…³é”®ä¿¡æ¯ï¼Œå¦‚è¡¨æè¿°å’ŒæŸ¥è¯¢æ¡ä»¶ã€‚
Â  Â  Â  Â  Â  Â  Â  2. åˆ¤æ–­æ˜¯å¦è·¨åº“æŸ¥è¯¢ã€æ˜¯å¦æ˜ç¡®æŒ‡å®šäº†ç›®æ ‡è¡¨åï¼ˆä¾‹å¦‚æ˜¯ä¸­æ–‡çš„æè¿°ã€è‹±æ–‡çš„æè¿°ï¼Œåå‘è¯­ä¹‰åŒ–çš„æè¿°åˆ™åˆ¤æ–­ä¸ºæœªæ˜ç¡®è¡¨åï¼‰
Â  Â  Â  Â  Â  Â  Â  3. æœªæ˜ç¡®æŒ‡å®šç›®æ ‡è¡¨ååˆ™è°ƒç”¨â€œget_table_nameâ€å·¥å…·ï¼Œè·å–å¯¹åº”çš„è¡¨åã€‚
Â  Â  Â  Â  Â  Â  Â  4. è°ƒç”¨â€œget_table_descâ€å·¥å…·ï¼Œè·å–è¡¨çš„ç»“æ„ä¿¡æ¯ã€‚
Â  Â  Â  Â  Â  Â  Â  5. æ ¹æ®è¡¨ç»“æ„ä¿¡æ¯å’Œç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢æ¡ä»¶ï¼Œç”ŸæˆSQLæŸ¥è¯¢è¯­å¥å¹¶è°ƒç”¨â€œexecute_sqlâ€å·¥å…·ï¼Œè¿”å›æŸ¥è¯¢ç»“æœã€‚
Â  Â  Â  Â  Â  Â  - Examples:
Â  Â  Â  Â  Â  Â  Â  - ä¾‹å­1ï¼šç”¨æˆ·è¾“å…¥â€œæŸ¥è¯¢ç”¨æˆ·è¡¨å¼ ä¸‰çš„æ•°æ®â€
Â  Â  Â  Â  Â  Â  Â  Â  è§£æç»“æœï¼šè¡¨æè¿°ä¸ºâ€œç”¨æˆ·è¡¨â€ï¼ŒæŸ¥è¯¢æ¡ä»¶ä¸ºâ€œå¼ ä¸‰â€ã€‚
Â  Â  Â  Â  Â  Â  Â  Â  åˆ¤æ–­ç»“æœï¼š1.æ²¡æœ‰å‡ºç°è·¨åº“çš„æƒ…å†µ 2.æœªæ˜ç¡®æŒ‡å®šè¡¨åï¼Œå½“å‰ä¸ºè¡¨çš„æè¿°ï¼Œéœ€è°ƒç”¨å·¥å…·è·å–è¡¨å
Â  Â  Â  Â  Â  Â  Â  Â  è°ƒç”¨å·¥å…·â€œget_table_nameâ€ï¼šæ ¹æ®â€œç”¨æˆ·è¡¨â€æè¿°è·å–è¡¨åï¼Œå‡è®¾è¿”å›è¡¨åä¸ºâ€œuser_tableâ€ã€‚
Â  Â  Â  Â  Â  Â  Â  Â  è°ƒç”¨å·¥å…·â€œget_table_descâ€ï¼šæ ¹æ®â€œuser_tableâ€è·å–è¡¨ç»“æ„ï¼Œå‡è®¾è¡¨ç»“æ„åŒ…å«å­—æ®µâ€œidâ€ã€â€œnameâ€ã€â€œageâ€ã€‚
Â  Â  Â  Â  Â  Â  Â  Â  ç”ŸæˆSQLæŸ¥è¯¢è¯­å¥ï¼š`SELECT * FROM user_table WHERE name = 'å¼ ä¸‰';`
Â  Â  Â  Â  Â  Â  Â  Â  è°ƒç”¨å·¥å…·â€œexecute_sqlâ€ï¼šæ ¹æ®ç”Ÿæˆçš„SQL,è·å–ç»“æœã€‚
Â  Â  Â  Â  Â  Â  Â  Â  æŸ¥è¯¢ç»“æœï¼šè¿”å›å¼ ä¸‰çš„ç›¸å…³æ•°æ®ã€‚
Â  Â  Â  Â  Â  Â  - task:Â 
Â  Â  Â  Â  Â  Â  Â  - è°ƒç”¨å·¥å…·â€œget_table_nameâ€ï¼Œ
Â  Â  Â  Â  Â  Â  Â  - è°ƒç”¨å·¥å…·â€œget_table_descâ€ï¼Œ
Â  Â  Â  Â  Â  Â  Â  - è°ƒç”¨å·¥å…·â€œexecute_sqlâ€
Â  Â  Â  Â  Â  Â  Â  - ä»¥markdownæ ¼å¼è¿”å›æ‰§è¡Œç»“æœ
Â  Â  Â  Â  Â  Â  """</span>
Â  Â Â 
Â  Â Â returnÂ <span class="hljs-section">[TextContent(type="text", text=prompt)]</span>
</code></pre>
<p><strong>ä½†å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå¤§æ¨¡å‹å¯¹èµ„æº/å·¥å…·çš„è®¿é—®èƒ½åŠ›å—åˆ°é™åˆ¶ï¼š</strong></p>
<ul>
<li><strong>å·¥å…·ï¼šæ”¯æŒè‡ªä¸»è°ƒç”¨</strong>ã€‚å¤§æ¨¡å‹é€šè¿‡è§£ææœåŠ¡ç«¯å…¬å¼€çš„å·¥å…·æè¿°ï¼Œèƒ½ä¸»åŠ¨å‘èµ·å·¥å…·è°ƒç”¨è¯·æ±‚ ï¼Œæ— éœ€ç”¨æˆ·é€æ¡æŒ‡ä»¤å¹²é¢„ã€‚æ­¤èƒ½åŠ›ä¾èµ–æ¨¡å‹çš„ Function Calling æ”¯æŒï¼Œå¦åˆ™éœ€é€šè¿‡æç¤ºè¯å·¥ç¨‹å®ç°ã€‚</li>
<li><strong>èµ„æºï¼šç¦æ­¢è‡ªä¸»è®¿é—®</strong>ã€‚èµ„æºå§‹ç»ˆç”±åº”ç”¨å±‚æˆ–ç”¨æˆ·ç®¡æ§ ï¼Œæ¨¡å‹ä»…èƒ½ä½¿ç”¨å·²æ³¨å…¥çš„èµ„æºå†…å®¹ã€‚é¿å…æ¨¡å‹éšæ„è®¿é—®æ•æ„Ÿæ•°æ®ï¼Œä¿éšœå®‰å…¨æ€§ã€‚</li>
</ul>
<p><strong>èµ„æºï¼ˆResourcesï¼‰</strong></p>
<p>èµ„æºæ˜¯æŒ‡ç”± MCP Server å‘å®¢æˆ·ç«¯æä¾›çš„æ•°æ®å®ä½“ï¼Œè¿™äº›å®ä½“ä½œä¸ºç»Ÿä¸€çš„ä¿¡æ¯è½½ä½“ï¼Œæ—¨åœ¨æ‰©å±• AI æ¨¡å‹çš„æ•°æ®è®¿é—®è¾¹ç•Œï¼Œå¹¶æ”¯æ’‘å…¶å¯¹åŠ¨æ€ã€ç»“æ„åŒ–ä¸éç»“æ„åŒ–æ•°æ®çš„å®æ—¶å¤„ç†èƒ½åŠ›ã€‚<strong>ç±»ä¼¼äº REST APIä¸­çš„ GET ç«¯ç‚¹</strong>â€”â€”æä¾›æ•°æ®ï¼Œä½†ä¸åº”æ‰§è¡Œå¤§é‡è®¡ç®—æˆ–äº§ç”Ÿå‰¯ä½œç”¨ã€‚</p>
<p>èµ„æºä»£è¡¨ä»»ä½•å¯ä¾› AI æ¨¡å‹è¯»å–çš„æ•°æ®å½¢å¼ï¼Œæ˜¯ä½ å‘LLM æš´éœ²æ•°æ®çš„æ–¹å¼ï¼Œæ¶µç›–ï¼š</p>
<ul>
<li><strong>æ–‡ä»¶å†…å®¹</strong>ï¼šåŒ…æ‹¬æ–‡æœ¬æ–‡ä»¶ã€JSONã€XML ç­‰ç»“æ„åŒ–æ–‡æ¡£ï¼Œä»¥åŠæºä»£ç ã€é…ç½®æ–‡ä»¶ç­‰æ–‡æœ¬æ•°æ®ï¼ˆUTF-8 ç¼–ç ï¼‰ã€‚</li>
<li><strong>æ•°æ®åº“è®°å½•</strong>ï¼šå…³ç³»å‹æˆ–éå…³ç³»å‹æ•°æ®åº“æŸ¥è¯¢ç»“æœï¼ˆe.g. PostgreSQLæˆ–MySQLï¼‰ã€‚</li>
<li><strong>åŠ¨æ€ç³»ç»Ÿæ•°æ®</strong>ï¼šåŒ…æ‹¬å®æ—¶æ—¥å¿—ã€å±å¹•æˆªå›¾ã€å¤šåª’ä½“ï¼ˆå›¾åƒã€è§†é¢‘ï¼‰ã€ä¼ æ„Ÿå™¨è¾“å‡ºç­‰äºŒè¿›åˆ¶æ•°æ®ã€‚</li>
</ul>
<p><strong>å¦‚ MCP-DB-GPT é¡¹ç›®ä¸­å®šä¹‰çš„è®¿é—®æœ¬åœ° JSON æ ¼å¼çš„æ—¥å¿—æ•°æ®èµ„æºæ¥å£å¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@mcp.resource(<span class="hljs-params"><span class="hljs-string">"logs://{session_id}/{limit}"</span></span>)</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_query_logs</span>(<span class="hljs-params">limit:Â <span class="hljs-built_in">str</span>Â =Â <span class="hljs-string">"5"</span>, session_id:Â <span class="hljs-built_in">str</span>Â =Â <span class="hljs-string">"anonymous"</span></span>) -&gt;Â <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-type">Any</span>]:
Â  Â Â <span class="hljs-string">"""è·å–æŸ¥è¯¢æ—¥å¿—
Â  Â Â 
Â  Â  Args:
Â  Â  Â  Â  limit: å¯é€‰å‚æ•°ï¼ŒæŒ‡å®šè¿”å›çš„æ—¥å¿—æ•°é‡ï¼Œé»˜è®¤ä¸º5
Â  Â  Â  Â  session_id: å¯é€‰å‚æ•°ï¼ŒæŒ‡å®šè¦è·å–çš„ä¼šè¯ID
Â  Â  """</span>
Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  limit_val =Â <span class="hljs-built_in">int</span>(limit)
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â limit_val &lt;=Â <span class="hljs-number">0</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â {<span class="hljs-string">"success"</span>:Â <span class="hljs-literal">False</span>,Â <span class="hljs-string">"error"</span>:Â <span class="hljs-string">"Limit must be a positive integer"</span>}
Â  Â  Â  Â Â 
Â  Â  Â  Â  logs = query_logger.get_logs(session_id=session_id, limit=limit_val)
Â  Â  Â  Â  total = query_logger.total_query_count(session_id=session_id)
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â {<span class="hljs-string">"success"</span>:Â <span class="hljs-literal">True</span>,Â <span class="hljs-string">"logs"</span>: logs,Â <span class="hljs-string">"total_queries"</span>: total}
Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â {<span class="hljs-string">"success"</span>:Â <span class="hljs-literal">False</span>,Â <span class="hljs-string">"error"</span>:Â <span class="hljs-built_in">str</span>(e)}
</code></pre>
<ul>
<li><strong>è£…é¥°å™¨ä¸­èµ„æºç±»å‹ä»¥ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ä¸ºå”¯ä¸€å¯»å€æœºåˆ¶</strong>ï¼Œæ ¼å¼ä¸º[åè®®]://[ä¸»æœº]/[è·¯å¾„]ï¼ˆå¦‚Â file://home/user/report.pdfÂ æˆ–Â postgres://database/customers/schemaï¼‰ã€‚æ­¤è®¾è®¡å…è®¸èµ„æºåè®®ã€ä¸»æœºä¸è·¯å¾„çš„çµæ´»å®šåˆ¶ï¼Œæ”¯æŒè·¨æœ¬åœ°ä¸è¿œç¨‹ç¯å¢ƒçš„æ— ç¼é›†æˆã€‚</li>
</ul>
<p><strong>é€šè¿‡æ•´åˆå¤šæ¨¡æ€æ•°æ®ï¼ˆæ–‡æœ¬ä¸äºŒè¿›åˆ¶ï¼‰èµ„æºä½¿ AI æ¨¡å‹èƒ½è®¿é—®ç§æœ‰æˆ–ä¸“å±çŸ¥è¯†åº“ï¼ˆå¦‚ä¼ä¸šå†…éƒ¨æ–‡æ¡£ï¼‰ã€å®æ—¶å¤–éƒ¨ API åŠç³»ç»ŸåŠ¨æ€ä¿¡æ¯ï¼Œæœ‰æ•ˆçªç ´å•ä¸€å¤§æ¨¡å‹æ•°æ®å­¤å²›ã€‚</strong></p>
<p><strong>å·¥å…·ï¼ˆToolsï¼‰</strong></p>
<p>å·¥å…·æ˜¯æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æš´éœ²çš„å¯æ‰§è¡Œå‡½æ•°é›†åˆï¼Œç”¨äºæ‹“å±•å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ“ä½œèƒ½åŠ›ï¼Œä½¿å…¶çªç ´çº¯æ–‡æœ¬ç”Ÿæˆçš„å±€é™ï¼Œå®ç°å¯¹å¤–éƒ¨ç³»ç»Ÿçš„ä¸»åŠ¨äº¤äº’ã€‚<strong>å…¶æœ¬è´¨å°±æ˜¯å‡½æ•°æŠ½è±¡</strong>ï¼Œé€šè¿‡JSON Schema ä¸¥æ ¼å®šä¹‰è¾“å…¥/è¾“å‡ºå‚æ•°ç»“æ„ï¼ˆå¦‚å¤©æ°”æŸ¥è¯¢éœ€è¾“å…¥ä½ç½®å‚æ•°ï¼Œè¾“å‡ºç»“æ„åŒ–å¤©æ°”æ•°æ®ï¼‰ã€‚</p>
<p><strong>å¦‚ MCP-DB-GPT é¡¹ç›®ä¸­å®šä¹‰çš„åªè¯» SQL æŸ¥è¯¢å·¥å…·æ¥å£å¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">query_data</span>(<span class="hljs-params">sql:Â <span class="hljs-built_in">str</span>, session_id:Â <span class="hljs-built_in">str</span>Â =Â <span class="hljs-string">"anonymous"</span></span>) -&gt;Â <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-type">Any</span>]:
Â  Â Â <span class="hljs-string">"""Execute read-only SQL queries"""</span>
Â  Â  logger.info(<span class="hljs-string">f"Executing query:Â <span class="hljs-subst">{sql}</span>"</span>)
Â  Â  conn = get_connection()
Â  Â  cursor =Â <span class="hljs-literal">None</span>
Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â Â <span class="hljs-comment"># Create dictionary cursor</span>
Â  Â  Â  Â  cursor = conn.cursor(pymysql.cursors.DictCursor)
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-comment"># Start read-only transaction</span>
Â  Â  Â  Â  cursor.execute(<span class="hljs-string">"SET TRANSACTION READ ONLY"</span>)
Â  Â  Â  Â  cursor.execute(<span class="hljs-string">"START TRANSACTION"</span>)
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  Â  Â  cursor.execute(sql)
Â  Â  Â  Â  Â  Â  results = cursor.fetchall()
Â  Â  Â  Â  Â  Â  conn.commit()
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># è®°å½•æˆåŠŸæŸ¥è¯¢</span>
Â  Â  Â  Â  Â  Â  log_query(operation=sql, success=<span class="hljs-literal">True</span>, session_id=session_id)
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># Convert results to serializable format</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"success"</span>:Â <span class="hljs-literal">True</span>,
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"results"</span>: results,
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"rowCount"</span>:Â <span class="hljs-built_in">len</span>(results)
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â  Â  Â  Â  Â  Â  conn.rollback()
Â  Â  Â  Â  Â  Â  log_query(operation=sql, success=<span class="hljs-literal">False</span>, error=<span class="hljs-built_in">str</span>(e), session_id=session_id)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"success"</span>:Â <span class="hljs-literal">False</span>,
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"error"</span>:Â <span class="hljs-built_in">str</span>(e)
Â  Â  Â  Â  Â  Â  }
Â  Â Â <span class="hljs-keyword">finally</span>:
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â cursor:
Â  Â  Â  Â  Â  Â  cursor.close()
Â  Â  Â  Â  conn.close()
</code></pre>
<p>å®¢æˆ·ç«¯é€šè¿‡æ ‡å‡†åè®®æ¥å£ï¼ˆtools/listå‘ç°å·¥å…·ã€tools/callÂ è°ƒç”¨å·¥å…·ï¼‰ä¸æœåŠ¡å™¨äº¤äº’ï¼Œå½¢æˆæœºå™¨å¯è¯»çš„è‡ªåŠ¨åŒ–æ“ä½œé“¾è·¯ã€‚<strong>å…¶å®‰å…¨æ§åˆ¶æœºåˆ¶é‡‡ç”¨ â€œæ¨¡å‹æ§åˆ¶ + äººç±»ç›‘ç£â€ åŒè½¨åˆ¶ï¼š</strong></p>
<ul>
<li>LLM è‡ªä¸»å†³å®šå·¥å…·è°ƒç”¨çš„å¿…è¦æ€§ï¼ˆå¦‚è¯†åˆ«ç”¨æˆ·è¯·æ±‚ä¸­çš„æŸ¥è¯¢æ•°æ®åº“è¡¨ä¿¡æ¯æ„å›¾ï¼‰ï¼›</li>
<li>æ¯æ¬¡æ‰§è¡Œéœ€ç”¨æˆ·æ˜¾å¼æˆæƒï¼ˆå¦‚å¼¹å‡ºç¡®è®¤æ¡†ï¼‰ï¼Œç¡®ä¿æ•°æ®éšç§ä¸æ“ä½œåˆè§„ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29b0c8dcc03e43eb906fc79577185c3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=dI6UP%2Bd9qxOLZvazhAwqjWQ7a8E%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æç¤ºè¯ï¼ˆPromptsï¼‰</strong></p>
<p>æç¤ºè¯æ˜¯æœåŠ¡å™¨ç«¯é¢„å®šä¹‰çš„å¯é‡ç”¨äº¤äº’æ¨¡æ¿ï¼Œç”¨äºæ ‡å‡†åŒ–å’Œå¼•å¯¼å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„ä»»åŠ¡æ‰§è¡Œã€‚è¿™äº›æ¨¡æ¿é€šè¿‡<strong>åŠ¨æ€å‚æ•°åŒ–è®¾è®¡</strong>ï¼Œå…è®¸ä¼ å…¥ç‰¹å®šå€¼ï¼ˆå¦‚ä»»åŠ¡å˜é‡æˆ–ä¸Šä¸‹æ–‡æ•°æ®ï¼‰ç”Ÿæˆå®šåˆ¶åŒ–æŒ‡ä»¤ï¼Œä»è€Œå®ç°é«˜æ•ˆã€ä¸€è‡´çš„æ¨¡å‹äº¤äº’ã€‚å…¶æ ¸å¿ƒæœºåˆ¶å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>ç»“æ„åŒ–è¦ç´ </strong>ï¼šæ¯ä¸ªæç¤ºæ¨¡æ¿åŒ…å«å”¯ä¸€æ ‡è¯†ç¬¦ã€ä»»åŠ¡æè¿°ã€å‚æ•°åˆ—è¡¨ï¼ˆå¦‚è¾“å…¥å˜é‡ï¼‰ä»¥åŠå¯é€‰çš„èµ„æºå¼•ç”¨ï¼ˆå¦‚å¤–éƒ¨æ–‡ä»¶æˆ–APIæ•°æ®ï¼‰ã€‚è¿™ç§ç»“æ„ç¡®ä¿æŒ‡ä»¤çš„æ˜ç¡®æ€§å’Œå¯æ‰©å±•æ€§ï¼Œå‡å°‘æ¨¡å‹è¾“å‡ºæ­§ä¹‰ã€‚ä¾‹å¦‚ï¼Œåœ¨æ–‡æœ¬ç”Ÿæˆä»»åŠ¡ä¸­ï¼Œæ¨¡æ¿å¯èƒ½å®šä¹‰è¾“å‡ºæ ¼å¼è¦æ±‚ï¼ˆå¦‚å­—æ•°é™åˆ¶æˆ–å“åº”é£æ ¼ï¼‰ï¼Œå¹¶åŠ¨æ€æ•´åˆç”¨æˆ·è¾“å…¥æ•°æ®ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡å¼•å¯¼</strong>ï¼šæç¤ºè¯åµŒå…¥ä¸Šä¸‹æ–‡å…³è”æœºåˆ¶ï¼ˆå¦‚å†å²å¯¹è¯ç‰‡æ®µæˆ–å¤–éƒ¨èµ„æºå¼•ç”¨ï¼‰ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£ä»»åŠ¡èƒŒæ™¯ã€‚ä¾‹å¦‚ï¼Œåœ¨é—®ç­”åœºæ™¯ä¸­ï¼Œæ¨¡æ¿å¯å¼•å…¥ç›¸å…³æ•°æ®æºï¼ˆå¦‚çŸ¥è¯†åº“ï¼‰ï¼Œæå‡å“åº”å‡†ç¡®æ€§å’Œç›¸å…³æ€§ã€‚</li>
<li><strong>å·¥ä½œæµæ”¯æŒ</strong>ï¼šæ”¯æŒé“¾å¼äº¤äº’è®¾è®¡ï¼Œå…è®¸å¤šä¸ªæç¤ºæ¨¡æ¿ç»„åˆä»¥å¤„ç†å¤æ‚ä»»åŠ¡ï¼ˆå¦‚å¤šæ­¥éª¤åˆ†ææˆ–è¿­ä»£ä¼˜åŒ–ï¼‰ã€‚åŒæ—¶ï¼Œæ¨¡æ¿å¸¸ä½œä¸ºç”¨æˆ·ç•Œé¢å…ƒç´ ï¼ˆå¦‚æ–œæ å‘½ä»¤ï¼‰é›†æˆï¼Œå¢å¼ºå¯ç”¨æ€§ã€‚</li>
<li>âš ï¸ï¼šæç¤ºè¯æ¨¡ç‰ˆéœ€è¦ä¸å®¢æˆ·ç«¯è”åŠ¨ï¼Œå³æœåŠ¡ç«¯å®šä¹‰å¥½ä¹‹åï¼Œåœ¨ä¸å®¢æˆ·ç«¯äº¤äº’æ—¶ï¼Œå®¢æˆ·ç«¯è·å–æœåŠ¡å™¨ç«¯åŠ¨æ€å¡«å……å¥½çš„æç¤ºè¯æ¨¡ç‰ˆå†å‘ç»™å¤§æ¨¡å‹ï¼Œå¤§æ¨¡å‹æŒ‰ç…§æç¤ºè¯è¦æ±‚è¿›è¡Œå›ç­”ã€‚<strong>å¦‚æœåµŒåœ¨å·¥å…·ä¸­è§¦å‘æ¡ä»¶å¾€å¾€æ˜¯è¢«åŠ¨çš„</strong>ã€‚</li>
</ul>
<p><strong>å¦‚MCP-DB-GPT é¡¹ç›®ä¸­æœåŠ¡ç«¯å®šä¹‰å¥½çš„æç¤ºè¯æ¥å£å¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@mcp.prompt()</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">generate_db_gpt_prompt</span>() -&gt;Â <span class="hljs-built_in">str</span>:
Â  Â Â <span class="hljs-string">"""Generate a prompt for LLM to interact with database."""</span>
Â  Â Â <span class="hljs-comment"># è·å–æ•°æ®åº“è¡¨åˆ—è¡¨</span>
Â  Â  tables_info = get_tables()
Â  Â  database_name = tables_info[<span class="hljs-string">"database"</span>]
Â  Â  tables = tables_info[<span class="hljs-string">"tables"</span>]
Â  Â Â 
Â  Â Â <span class="hljs-comment"># è·å–æ‰€æœ‰è¡¨çš„æè¿°ä¿¡æ¯</span>
Â  Â  table_definitions = []
Â  Â Â <span class="hljs-keyword">for</span>Â tableÂ <span class="hljs-keyword">in</span>Â tables:
Â  Â  Â  Â  table_desc = get_table_description(table)
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â table_desc.get(<span class="hljs-string">"success"</span>):
Â  Â  Â  Â  Â  Â  table_definitions.append(table_desc[<span class="hljs-string">"table_definition"</span>])
Â  Â Â <span class="hljs-keyword">return</span>Â DB_GPT_SYSTEM_PROMPT.<span class="hljs-built_in">format</span>(
Â  Â  Â  Â  database_name=database_name,
Â  Â  Â  Â  table_definitions=<span class="hljs-string">"\n"</span>.join(table_definitions),
Â  Â  )
</code></pre>
<p>DB_GPT_SYSTEM_PROMPT å³æ˜¯é¢„å…ˆç¼–å†™å¥½çš„æç¤ºè¯æ¨¡æ¿ï¼Œå½“ä½ åŠ¨æ€çš„è·å–å‚æ•°åè¿›è¡Œæ›¿æ¢å³å¯ã€‚ä¸€ä¸ªç®€æ˜“çš„æç¤ºè¯æ¨¡æ¿å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Baseline_SYSTEM_PROMPT</span>Â =Â <span class="hljs-string">"""
è¯·æ ¹æ®ç”¨æˆ·é€‰æ‹©çš„æ•°æ®åº“å’Œè¯¥åº“çš„æ‰€æœ‰å¯ç”¨è¡¨ç»“æ„å®šä¹‰æ¥å›ç­”ç”¨æˆ·é—®é¢˜.
æ•°æ®åº“å:
Â  Â  {database_name}
è¡¨ç»“æ„å®šä¹‰:
Â  Â  {table_definitions}


çº¦æŸ:
Â  Â  1. è¯·æ ¹æ®ç”¨æˆ·é—®é¢˜ç†è§£ç”¨æˆ·æ„å›¾ï¼Œä½¿ç”¨ç»™å‡ºè¡¨ç»“æ„å®šä¹‰åˆ›å»ºä¸€ä¸ªè¯­æ³•æ­£ç¡®çš„mysql sqlã€‚
Â  Â  2. å°†æŸ¥è¯¢é™åˆ¶ä¸ºæœ€å¤š10000ä¸ªç»“æœã€‚
Â  Â  3. åªèƒ½ä½¿ç”¨è¡¨ç»“æ„ä¿¡æ¯ä¸­æä¾›çš„è¡¨æ¥ç”Ÿæˆ sqlã€‚
Â  Â  4. è¯·æ£€æŸ¥SQLçš„æ­£ç¡®æ€§ã€‚
Â  Â  5. åˆ†æåŸºäºç°æœ‰è¡¨ç»“æ„å’Œå…ƒæ•°æ®ä¿¡æ¯ï¼Œä¼°ç®—ç”¨æˆ·æä¾›çš„ DQL è¯­å¥çš„ç´¢å¼•æ¨èç­–ç•¥,å¹¶è¿”å›ç»™ç”¨æˆ·explainæ‰§è¡Œç»“æœ


ç”¨æˆ·é—®é¢˜:
Â  Â  {user_question}


è¯·æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼å›å¤ï¼š
{{
Â  Â  "thoughts": "åˆ†ææ€è·¯",
Â  Â  "sql": "SQLæŸ¥è¯¢è¯­å¥",
Â  Â  "explain": "ä¼˜åŒ–åçš„DQLè¯­å¥æ‰§è¡Œç»“æœ"
}}
"""</span>
</code></pre>
<p>ç„¶åå®¢æˆ·ç«¯å»ºç«‹é€šä¿¡è¿æ¥åè·å–ç›¸å…³çš„èµ„æºã€å·¥å…·å’Œæç¤ºè¯æ¨¡ç‰ˆï¼š</p>
<pre><code class="hljs language-python" lang="python">Â  Â Â <span class="hljs-comment"># methods will go here</span>
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">connect_to_server</span>(<span class="hljs-params">self, server_script_path:Â <span class="hljs-built_in">str</span></span>):
Â  Â  Â  Â Â <span class="hljs-string">"""Connect to an MCP server
Â  Â  Â  Â Â 
Â  Â  Â  Â  Args:
Â  Â  Â  Â  Â  Â  server_script_path: Path to the server script (.py or .js)
Â  Â  Â  Â  """</span>
Â  Â  Â  Â Â <span class="hljs-comment"># try:</span>
Â  Â  Â  Â  is_python = server_script_path.endswith(<span class="hljs-string">'.py'</span>)
Â  Â  Â  Â  is_js = server_script_path.endswith(<span class="hljs-string">'.js'</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â (is_pythonÂ <span class="hljs-keyword">or</span>Â is_js):
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>Â ValueError(<span class="hljs-string">"Server script must be a .py or .js file"</span>)
Â  Â  Â  Â Â 
Â  Â  Â  Â  command =Â <span class="hljs-string">"python"</span>Â <span class="hljs-keyword">if</span>Â is_pythonÂ <span class="hljs-keyword">else</span>Â <span class="hljs-string">"node"</span>
Â  Â  Â  Â  server_params = StdioServerParameters(
Â  Â  Â  Â  Â  Â  command=command,
Â  Â  Â  Â  Â  Â  args=[server_script_path],
Â  Â  Â  Â  Â  Â  env=<span class="hljs-literal">None</span>
Â  Â  Â  Â  )
Â  Â  Â  Â  stdio_transport =Â <span class="hljs-keyword">await</span>Â self.exit_stack.enter_async_context(stdio_client(server_params))
Â  Â  Â  Â Â self.stdio,Â self.write = stdio_transport
Â  Â  Â  Â Â self.session =Â <span class="hljs-keyword">await</span>Â self.exit_stack.enter_async_context(ClientSession(self.stdio,Â self.write))
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â self.session.initialize()
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Session_id:Â <span class="hljs-subst">{self.session_id}</span>"</span>)
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-comment"># List available tools</span>
Â  Â  Â  Â  response =Â <span class="hljs-keyword">await</span>Â self.session.list_tools()
Â  Â  Â  Â  tools = response.tools
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nConnected to server with tools:"</span>, [tool.nameÂ <span class="hljs-keyword">for</span>Â toolÂ <span class="hljs-keyword">in</span>Â tools])
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-comment"># List available resources</span>
Â  Â  Â  Â  resources_response =Â <span class="hljs-keyword">await</span>Â self.session.list_resources()
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â resources_responseÂ <span class="hljs-keyword">and</span>Â resources_response.resources:
Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"Available resources:"</span>, [resource.uriÂ <span class="hljs-keyword">for</span>Â resourceÂ <span class="hljs-keyword">in</span>Â resources_response.resources])
Â  Â  Â  Â Â <span class="hljs-keyword">else</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"Available resources templates: ['logs']"</span>)


Â  Â  Â  Â  prompts =Â <span class="hljs-keyword">await</span>Â self.session.list_prompts()
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â promptsÂ <span class="hljs-keyword">and</span>Â prompts.prompts:
Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"Available prompts:"</span>, [prompt.nameÂ <span class="hljs-keyword">for</span>Â promptÂ <span class="hljs-keyword">in</span>Â prompts.prompts])
Â  Â  Â  Â Â <span class="hljs-keyword">else</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"No available prompts found."</span>)
</code></pre>
<p><strong>MCP Client</strong></p>
<p>MCP Client åœ¨æ•´ä¸ªæ¨¡å‹äº¤äº’è¿‡ç¨‹ä¸­åˆ™èµ·ç€è‡³å…³é‡è¦çš„æ¡¥æ¢ä½œç”¨ï¼Œè¿æ¥ç€ LLM ä¸ MCP Serverã€‚å…¶Pythonç‰ˆ SDK æä¾›çš„æ¡†æ¶å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe301a6e62f546e59ec19f92b2be6b82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=kGn7fMjngzWsTYelfewwR48QOmQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ­¤å¤„ï¼Œæˆ‘ä»¬å…ˆä¸çœ‹ä»–çš„é€šä¿¡æœºåˆ¶ï¼Œç»“åˆ MCP-DB-GPT é¡¹ç›®ä»…å…³æ³¨ ClientSession æ˜¯å¦‚ä½•ä¸æœåŠ¡å™¨å±‚äº¤äº’çš„ã€‚ä»å®è§‚ä¸Šçœ‹ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„æ¶ˆæ¯æµå¤§è‡´å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f4e561364b142b4be20a9632cf40714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=AaP6H8LbbUF5ibw7n75dhLQ%2BSSQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è€Œåœ¨ MCP-DB-GPTé¡¹ç›®ä¸­å®šä¹‰äº†ä¸€ä¸ªé›†æˆé˜¿é‡Œé€šä¹‰åƒé—®å¤§æ¨¡å‹æ¥å£çš„ MCPClientç±»ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">MCPClient</span>:
Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
Â  Â  Â  Â Â <span class="hljs-comment"># Initialize session and client objects</span>
Â  Â  Â  Â Â self.session:Â <span class="hljs-type">Optional</span>[ClientSession] =Â <span class="hljs-literal">None</span>
Â  Â  Â  Â Â self.exit_stack = AsyncExitStack()
Â  Â  Â  Â Â self.llm = TongYiAPI()
Â  Â  Â  Â Â self.session_id =Â <span class="hljs-built_in">str</span>(uuid.uuid4())
Â  Â  Â  Â Â self.use_few_shot =Â <span class="hljs-literal">True</span>
Â  Â  Â  Â Â self.conversation_history = FEW_SHOT_EXAMPLESÂ <span class="hljs-keyword">if</span>Â self.use_few_shotÂ <span class="hljs-keyword">else</span>Â []
Â  Â Â 
Â  Â Â <span class="hljs-comment"># methods will go here</span>
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">connect_to_server</span>(<span class="hljs-params">self, server_script_path:Â <span class="hljs-built_in">str</span></span>):
Â  Â  Â  Â Â <span class="hljs-string">"""Connect to an MCP server
Â  Â Â 
Â  Â  async def get_query_logs(self, limit: int = 5) -&gt; str:
Â  Â  Â  Â  """</span>è·å–æŸ¥è¯¢æ—¥å¿—<span class="hljs-string">"""
Â  Â Â 
Â  Â  async def get_schema(self, table_names: Optional[List[str]] = None) -&gt; str:
Â  Â  Â  Â  """</span>è·å–æ•°æ®åº“ç»“æ„ä¿¡æ¯<span class="hljs-string">"""


Â  Â  async def process_query(self, query: str) -&gt; str:
Â  Â  Â  Â  """</span>ä½¿ç”¨é€šä¹‰åƒé—®å¤„ç†æ•°æ®åº“ç›¸å…³æŸ¥è¯¢<span class="hljs-string">"""
</span></code></pre>
<p>å®¢æˆ·ç«¯å°±æ˜¯é€šè¿‡ClientSessionå¯¹è±¡ä¸æœåŠ¡å™¨äº¤äº’ï¼Œä¸»è¦åŒ…æ‹¬åˆå§‹åŒ–è¿æ¥ã€å·¥å…·è°ƒç”¨å’Œèµ„æºè®¿é—®ï¼š</p>
<ul>
<li><strong>è¿æ¥å»ºç«‹</strong>ï¼š</li>
<li>
<ul>
<li>åœ¨connect_to_serveræ–¹æ³•ä¸­ï¼Œå®¢æˆ·ç«¯åŸºäºæœåŠ¡å™¨è„šæœ¬è·¯å¾„ï¼ˆå¦‚ Python æˆ– Node.js è„šæœ¬ï¼‰åˆå§‹åŒ–StdioServerParametersã€‚</li>
<li>ä½¿ç”¨stdio_clientå»ºç«‹æ ‡å‡†è¾“å…¥è¾“å‡ºï¼ˆStdioï¼‰ä¼ è¾“é€šé“ï¼Œåˆ›å»ºClientSessionå¯¹è±¡ã€‚è°ƒç”¨session.initialize()åˆå§‹ä¼šè¯ï¼Œç”Ÿæˆå”¯ä¸€ä¼šè¯ IDï¼ˆsession_idï¼‰ï¼Œç”¨äºåŠ å¯†é€šä¿¡å’Œæ—¥å¿—è·Ÿè¸ªã€‚</li>
<li>éšåé€šè¿‡session.list_tools()è·å–å¯ç”¨å·¥å…·åˆ—è¡¨ï¼ˆå¦‚query_dataã€get_schemaï¼‰ï¼Œå¹¶é€šè¿‡session.list_resources()åˆ—å‡ºå¯è®¿é—®èµ„æºï¼ˆå¦‚æ—¥å¿—ï¼‰ã€‚æ­¤é˜¶æ®µå®ç°åè®®ä¸­çš„â€œå·¥å…·å‘ç°â€é˜¶æ®µï¼Œç¡®ä¿å®¢æˆ·ç«¯äº†è§£æœåŠ¡å™¨åŠŸèƒ½ã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><strong>å·¥å…·è°ƒç”¨è¿‡ç¨‹</strong>ï¼š</li>
<li>
<ul>
<li>å½“æ‰§è¡Œå…·ä½“æ“ä½œæ—¶ï¼ˆå¦‚æ‰§è¡Œ SQL æˆ–è·å– Schemaï¼‰ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨session.call_tool(tool_name, params)æ–¹æ³•å‘é€ JSON-RPC è¯·æ±‚ã€‚Â </li>
<li>
<ul>
<li><strong>è¯·æ±‚ç»“æ„</strong>ï¼šä»¥get_schemaä¸ºä¾‹ï¼Œå‚æ•°åŒ…æ‹¬session_idå’Œå¯é€‰table_namesï¼Œåºåˆ—åŒ–ä¸º JSON æ ¼å¼ã€‚</li>
<li><strong>æœåŠ¡å™¨å“åº”</strong>ï¼šæœåŠ¡å™¨æ‰§è¡Œå·¥å…·ï¼ˆå¦‚æŸ¥è¯¢æ•°æ®åº“ç»“æ„ï¼‰ï¼Œè¿”å›JSON-RPCå“åº”ã€‚å“åº”åŒ…å«contentå­—æ®µï¼ˆå¦‚æ•°æ®åº“ç»“æ„ä¿¡æ¯ï¼‰ï¼Œå®¢æˆ·ç«¯è§£æ JSON ä»¥æå–ç»“æœã€‚</li>
</ul>
</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šè‹¥å“åº”åŒ…å«success: falseæˆ–errorå­—æ®µï¼ˆå¦‚æ— æ³•è·å–Schemaï¼‰ï¼Œå®¢æˆ·ç«¯è¿”å›é”™è¯¯ä¿¡æ¯ã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><strong>èµ„æºè®¿é—®æœºåˆ¶</strong>ï¼š</li>
<li>
<ul>
<li>é€šè¿‡session.read_resource(uri)è®¿é—®èµ„æºï¼ˆå¦‚æ—¥å¿—ï¼‰ã€‚æ—¥å¿— URI æ ¼å¼ä¸ºlogs://{session_id}/{limit}ï¼ŒæœåŠ¡å™¨è¿”å›ç»“æ„åŒ–çš„æ—¥å¿—æ•°æ®ï¼ˆJSON æ ¼å¼ï¼‰ã€‚</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šæ‰€æœ‰äº¤äº’ä¾èµ–ä¼šè¯çº§åŠ å¯†ï¼ˆsession_idï¼‰ï¼Œå¹¶é€šè¿‡æƒé™éªŒè¯ï¼ˆç”¨æˆ·éœ€æ˜¾å¼æˆæƒæ•æ„Ÿæ“ä½œï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p><strong>å…¸å‹æ¡ˆä¾‹è¿ç”¨</strong></p>
<p>MCP-DB-GPT é¡¹ç›®çš„ä¸€å¤§äº®ç‚¹åœ¨äºï¼Œå…¶å®ç°äº†ç»“åˆæç¤ºè¯åï¼Œå¦‚ä½•å€ŸåŠ©å¤§æ¨¡å‹è§£æè‡ªç„¶è¯­è¨€ç”Ÿæˆ SQL è¯­å¥å†ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’å¹¶è¿”å›æŸ¥è¯¢ç»“æœçš„å®Œæ•´è¿‡ç¨‹ã€‚è¯¥åŠŸèƒ½èƒ½è®©åˆå­¦è€…ä¸€æ­¥æ„ŸçŸ¥åˆ° MCP çš„å·¥ä½œæµç¨‹ä»¥åŠå®ƒçš„çµæ´»ä¸å¼ºå¤§ã€‚</p>
<p><strong>é€šè¿‡LLMè§£æè‡ªç„¶è¯­è¨€ç”ŸæˆSQLè¯­å¥çš„æµç¨‹</strong>ï¼šåœ¨process_queryæ–¹æ³•ä¸­ï¼ŒLLMï¼ˆé€šä¹‰åƒé—® APIï¼‰ç”¨äºç”Ÿæˆç»“æ„åŒ–å·¥å…·è°ƒç”¨ï¼ˆå¦‚ SQL è¯­å¥ï¼‰ã€‚æ ¸å¿ƒä»£ç å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">process_query</span>(<span class="hljs-params">self, query:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-built_in">str</span>:
Â  Â Â <span class="hljs-string">"""ä½¿ç”¨é€šä¹‰åƒé—®å¤„ç†æ•°æ®åº“ç›¸å…³æŸ¥è¯¢"""</span>
Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â Â <span class="hljs-comment"># è°ƒç”¨æœåŠ¡å™¨å±‚çš„æç¤ºè¯æ–¹æ³•</span>
Â  Â  Â  Â  prompt =Â <span class="hljs-keyword">await</span>Â self.session.get_prompt(<span class="hljs-string">"generate_db_gpt_prompt"</span>)
Â  Â  Â  Â  prompt = prompt.messages[<span class="hljs-number">0</span>].content.text
Â  Â  Â  Â Â <span class="hljs-comment"># å°†å°è£…å¥½çš„æç¤ºè¯æŠ•å–‚ç»™å¤§æ¨¡å‹</span>
Â  Â  Â  Â  llm_response =Â self.llm.chat(system_prompt=prompt, content=query, response_format=<span class="hljs-string">"json_object"</span>,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â conversation_history=self.conversation_history)
Â  Â  Â  Â  response_data = json.loads(llm_response)
</code></pre>
<ul>
<li>å®¢æˆ·ç«¯é€šè¿‡session.get_prompt("generate_db_gpt_prompt")è·å–é¢„å®šä¹‰æç¤ºæ¨¡æ¿ï¼ˆpromptï¼‰ï¼Œè¯¥æ¨¡æ¿æè¿°å¯ç”¨å·¥å…·ï¼ˆå¦‚query_dataï¼‰å’Œä»»åŠ¡è§„èŒƒï¼Œä¼˜åŒ– LLM å¯¹æŸ¥è¯¢çš„ç†è§£å’Œå·¥å…·çš„è°ƒç”¨ã€‚</li>
<li><strong>LLM åŸºäºæç¤ºå’Œå¯¹è¯å†å²ï¼Œæ‰§è¡Œâ€œæ„å›¾è§£æâ€</strong> ï¼š</li>
<li>
<ul>
<li>åˆ†æè‡ªç„¶è¯­è¨€ï¼ŒåŒ¹é…å·¥å…·ï¼ˆå¦‚è‡ªåŠ¨é€‰æ‹©query_dataå·¥å…·ï¼‰ã€‚</li>
<li>è¾“å‡º JSON åŒ…å«sqlå­—æ®µï¼ˆç”Ÿæˆçš„ SQL è¯­å¥ï¼‰ã€direct_responseï¼ˆå½“æ— éœ€ SQLï¼‰æˆ–thoughtsï¼ˆæ¨ç†è¿‡ç¨‹ï¼‰ã€‚</li>
<li>ç¤ºä¾‹ï¼šæŸ¥è¯¢â€œé‡‘é¢æœ€é«˜çš„è®¢å•â€å¯èƒ½ç”Ÿæˆ"sql": "SELECT * FROM orders ORDER BY amount DESC LIMIT 1"ã€‚</li>
</ul>
</li>
<li><strong>å¯¹è¯æ›´æ–°</strong>ï¼šç”¨æˆ·æŸ¥è¯¢å’Œ LLM å“åº”æ·»åŠ åˆ°conversation_historyï¼Œä¿æŒä¸Šä¸‹æ–‡ä¸€è‡´æ€§ã€‚</li>
</ul>
<p><strong>ç”Ÿæˆ SQL åä¸æœåŠ¡å™¨å±‚çš„äºŒæ¬¡äº¤äº’</strong>ï¼šåœ¨process_queryä¸­ï¼Œå¦‚æœ LLM å“åº”åŒ…å«sqlå­—æ®µï¼ˆå¦‚"sql":"SELECT * FROM users"ï¼‰ï¼Œå®¢æˆ·ç«¯è‡ªåŠ¨è°ƒç”¨session.call_tool("query_data", params)ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¦‚æœæœ‰SQLæŸ¥è¯¢ï¼Œæ‰§è¡Œå®ƒ</span>
<span class="hljs-keyword">if</span>Â response_data.get(<span class="hljs-string">"sql"</span>):
Â  Â Â <span class="hljs-comment"># æ‰§è¡ŒSQLæŸ¥è¯¢</span>
Â  Â  query_result =Â <span class="hljs-keyword">await</span>Â self.session.call_tool(<span class="hljs-string">"query_data"</span>, {
Â  Â  Â  Â Â <span class="hljs-string">"sql"</span>: response_data[<span class="hljs-string">"sql"</span>],
Â  Â  Â  Â Â <span class="hljs-string">"session_id"</span>:Â self.session_id
Â  Â  })
Â  Â Â <span class="hljs-comment"># æ„å»ºæœ€ç»ˆå“åº”</span>
Â  Â  final_response = {
Â  Â  Â  Â Â <span class="hljs-string">"thoughts"</span>: response_data[<span class="hljs-string">"thoughts"</span>],
Â  Â  Â  Â Â <span class="hljs-string">"sql"</span>: response_data[<span class="hljs-string">"sql"</span>],
Â  Â  Â  Â Â <span class="hljs-string">"display_type"</span>: response_data.get(<span class="hljs-string">"display_type"</span>,Â <span class="hljs-string">"Table"</span>),
Â  Â  Â  Â Â <span class="hljs-string">"results"</span>: json.loads(query_result.content[<span class="hljs-number">0</span>].text)Â <span class="hljs-keyword">if</span>Â query_result.content[<span class="hljs-number">0</span>].textÂ <span class="hljs-keyword">else</span>Â <span class="hljs-literal">None</span>
Â  Â  }
Â  Â Â 
Â  Â Â <span class="hljs-keyword">return</span>Â json.dumps(final_response, ensure_ascii=<span class="hljs-literal">False</span>, indent=<span class="hljs-number">2</span>)
</code></pre>
<ul>
<li>æ‰€æœ‰æŸ¥è¯¢ï¼ˆåŒ…æ‹¬ LLM ç”Ÿæˆçš„ SQLï¼‰é€šè¿‡write_resourceè®°å½•åˆ°æ—¥å¿—èµ„æºï¼ŒURI ä¸ºlogs://{session_id}/{limit}ï¼Œæ”¯æŒåç»­å®¡è®¡ã€‚</li>
</ul>
<p><strong>æ­¤äº¤äº’å®Œæˆ MCP çš„â€œæ‰§è¡Œ-å“åº”â€é—­ç¯ï¼šSQL ä½œä¸ºå·¥å…·è°ƒç”¨çš„å‚æ•°ï¼ŒæœåŠ¡å™¨æ‰§è¡Œåè¿”å›ç»“æ„åŒ–æ•°æ®ï¼Œå®¢æˆ·ç«¯æ•´åˆä¸ºæœ€ç»ˆå“åº”ã€‚</strong></p>
<h2 data-id="heading-4">ä¸‰ã€åº•å±‚é€šä¿¡åŸç†</h2>
<h3 data-id="heading-5">3.1åè®®å±‚ï¼šJSON-RPC 2.0åŸºç¡€</h3>
<p>MCP çš„æ ¸å¿ƒæ¶ˆæ¯æ ¼å¼é‡‡ç”¨ JSON-RPC 2.0 åè®®ï¼Œè¿™æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ RPC æ¡†æ¶ï¼Œç”¨äºç»“æ„åŒ–è¯·æ±‚ã€å“åº”å’Œé€šçŸ¥ã€‚åœ¨ Python SDK ä¸­ï¼š</p>
<ul>
<li><strong>æ¶ˆæ¯ç»“æ„</strong>ï¼šæ¯æ¡æ¶ˆæ¯éƒ½æ˜¯ JSON å¯¹è±¡ï¼ŒåŒ…å«Â methodï¼ˆæ–¹æ³•åï¼Œå¦‚Â tool_executeï¼‰ã€paramsï¼ˆå‚æ•°ï¼‰å’ŒÂ idï¼ˆè¯·æ±‚ IDï¼‰ã€‚</li>
</ul>

<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">JSONRPCRequest</span>(Request[<span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-type">Any</span>] |Â <span class="hljs-literal">None</span>,Â <span class="hljs-built_in">str</span>]):
Â  Â Â <span class="hljs-string">"""A request that expects a response."""</span>
Â  Â  jsonrpc:Â <span class="hljs-type">Literal</span>[<span class="hljs-string">"2.0"</span>]
Â  Â Â <span class="hljs-built_in">id</span>: RequestId
Â  Â  method:Â <span class="hljs-built_in">str</span>
Â  Â  params:Â <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-type">Any</span>] |Â <span class="hljs-literal">None</span>Â =Â <span class="hljs-literal">None</span>
</code></pre>
<ul>
<li><strong>äº¤äº’ç±»å‹</strong>ï¼š</li>
<li>
<ul>
<li>è¯·æ±‚ï¼ˆJSONRPCRequestï¼‰ ï¼šå®¢æˆ·ç«¯ï¼ˆå¦‚ AI åº”ç”¨ï¼‰å‘é€æ“ä½œæŒ‡ä»¤ï¼ˆå¦‚æ‰§è¡Œå·¥å…·ï¼‰ã€‚</li>
<li>å“åº”ï¼ˆJSONRPCResponseï¼‰ ï¼šæœåŠ¡å™¨è¿”å›ç»“æœã€‚</li>
<li>é”™è¯¯å“åº”ï¼ˆJSONRPCErrorï¼‰ï¼šæœåŠ¡å™¨è¿”å›é”™è¯¯ä¿¡æ¯ã€‚</li>
<li>é€šçŸ¥ï¼ˆJSONRPCNotificationï¼‰ ï¼šç”¨äºå¼‚æ­¥äº‹ä»¶ï¼ˆå¦‚æœåŠ¡å™¨ä¸»åŠ¨æ¨é€ä¸Šä¸‹æ–‡æ›´æ–°ï¼‰ï¼Œæ— éœ€å“åº”ã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><strong>ä¼˜åŠ¿</strong>ï¼šJSON-RPC 2.0 çš„æ ‡å‡†åŒ–ç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§ï¼Œæºç ä¸­é€šè¿‡Â JsonRPCRequestå’ŒJsonRPCResponseÂ ç±»å®ç°è§£æå’ŒéªŒè¯ï¼Œå‡å°‘æ¶ˆæ¯è§£æå¼€é”€ã€‚å¦‚åœ¨ STDIO ä¼ è¾“ä¸­ï¼Œæ¶ˆæ¯çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹å¦‚ä¸‹ï¼š</li>
</ul>
<p><strong>å‘é€æ¶ˆæ¯æ—¶</strong>ï¼šæ¶ˆæ¯è¢«åºåˆ—åŒ–ä¸º JSON å¹¶æ·»åŠ æ¢è¡Œç¬¦ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">try</span>:
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â write_stream_reader:
Â  Â  Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">for</span>Â session_messageÂ <span class="hljs-keyword">in</span>Â write_stream_reader:
Â  Â  Â  Â  Â  Â  json = session_message.message.model_dump_json(by_alias=<span class="hljs-literal">True</span>, exclude_none=<span class="hljs-literal">True</span>)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â process.stdin.send(
Â  Â  Â  Â  Â  Â  Â  Â  (json +Â <span class="hljs-string">"\n"</span>).encode(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  encoding=server.encoding,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errors=server.encoding_error_handler,
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  )
<span class="hljs-keyword">except</span>Â anyio.ClosedResourceError:
Â  Â Â <span class="hljs-keyword">await</span>Â anyio.lowlevel.checkpoint()
</code></pre>
<p><strong>æ¥æ”¶æ¶ˆæ¯æ—¶</strong>ï¼šä»è¾“å…¥æµè¯»å–è¡Œï¼Œè§£æä¸ºJSON-RPCæ¶ˆæ¯ ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">try</span>:
Â  Â  message = types.JSONRPCMessage.model_validate_json(line)
<span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â exc:
Â  Â Â <span class="hljs-keyword">await</span>Â read_stream_writer.send(exc)
Â  Â Â <span class="hljs-keyword">continue</span>


session_message = SessionMessage(message)
<span class="hljs-keyword">await</span>Â read_stream_writer.send(session_message)
</code></pre>
<h3 data-id="heading-6">3.2ä¼ è¾“å±‚ï¼šåŒå‘é€šä¿¡å®ç°</h3>
<p>MCP Python SDK æä¾›äº†å¤šç§ä¼ è¾“æœºåˆ¶ï¼Œæ¯ç§æœºåˆ¶éƒ½é’ˆå¯¹ä¸åŒçš„éƒ¨ç½²åœºæ™¯å’Œé€šä¿¡æ¨¡å¼è¿›è¡Œäº†ä¼˜åŒ–ã€‚æ‰€æœ‰ä¼ è¾“æœºåˆ¶éƒ½æŠ½è±¡ä¸ºä¸€ä¸ªåŸºäºæµçš„é€šç”¨æ¥å£ï¼ŒåŒæ—¶æ”¯æŒç‰¹å®šäºåè®®çš„åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18278ce7850a4df0910a8a34573852b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=Yxs3GvFFNbluVWIqwcAj3ZucujQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>Stdioä¼ è¾“</strong></p>
<p>é€šè¿‡æ ‡å‡†è¾“å…¥/è¾“å‡ºï¼ˆstdin/stdoutï¼‰æµè¿›è¡ŒåŒæ­¥æˆ–å¼‚æ­¥é€šä¿¡ã€‚æºç ä¸­è¯»å–å’Œå†™å…¥æµç”±å¦‚ä¸‹å‡½æ•°å®ç°ï¼š</p>
<ul>
<li><strong>è¯»å–æµ</strong>ï¼šMemoryObjectReceiveStream[SessionMessage | Exception]-ä»æœåŠ¡å™¨æ ‡å‡†è¾“å‡ºæ¥æ”¶æ¶ˆæ¯</li>
<li><strong>å†™å…¥æµ</strong>ï¼šMemoryObjectSendStream[SessionMessage]- å°†æ¶ˆæ¯å‘é€åˆ°æœåŠ¡å™¨æ ‡å‡†è¾“å…¥</li>
</ul>
<p><strong>å…¶é€‚ç”¨äºæœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ï¼ˆå¦‚ IDE æ’ä»¶ï¼‰ï¼Œä½å»¶è¿Ÿä½†ä»…é™å•æœºã€‚</strong> å…³é”®ä»£ç åŒ…æ‹¬stdin_reader()å’Œstdout_writeræ–¹æ³•ï¼Œè´Ÿè´£åå°å¤„ç†åŒå‘é€šä¿¡ã€‚<strong>å…¶é€šä¿¡æµç¨‹å¤§è‡´ä¸ºä»¥ä¸‹ä¸ƒæ­¥</strong>ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯ä»¥å­è¿›ç¨‹çš„æ–¹å¼å¯åŠ¨æœåŠ¡å™¨</li>
<li>å®¢æˆ·ç«¯å¾€æœåŠ¡å™¨çš„ stdin å†™å…¥æ¶ˆæ¯</li>
<li>æœåŠ¡å™¨ä»è‡ªèº«çš„ stdin è¯»å–æ¶ˆæ¯</li>
<li>æœåŠ¡ç«¯å¾€è‡ªèº«çš„ stdout å†™å…¥æ¶ˆæ¯</li>
<li>å®¢æˆ·ç«¯ä»æœåŠ¡å™¨çš„ stdout è¯»å–æ¶ˆæ¯</li>
<li>å®¢æˆ·ç«¯ç»ˆæ­¢å­è¿›ç¨‹ï¼Œå…³é—­æœåŠ¡å™¨çš„ stdin</li>
<li>æœåŠ¡å™¨å…³é—­è‡ªèº«çš„ stdout</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f613241f67b64e839f79f78785ba82c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=qKCcegowaJOiuJBGki3AacYWAs0%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<ul>
<li>âš ï¸âš ï¸âš ï¸ï¼š<strong>å½“å®¢æˆ·ç«¯è°ƒç”¨mcp.tool()Â è£…é¥°çš„å‡½æ•°æ—¶ï¼ŒSDK å†…éƒ¨å°è£…è¯·æ±‚ä¸º JSON-RPCï¼Œé€šè¿‡ stdio å‘é€ç»™æœåŠ¡å™¨è¿›ç¨‹ï¼ŒæœåŠ¡ç«¯é€šè¿‡è£…é¥°å™¨è£…é¥°çš„å‡½æ•°åœ¨å»ºç«‹è¿æ¥åè¢«è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œæ³¨å…¥å¹¶è½¬æ¢æˆ JSONæ ¼å¼çš„æ•°æ®ä¸å®¢æˆ·ç«¯è¿›è¡Œè‡ªåŠ¨äº¤äº’ã€‚</strong></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/699be87066ba4ae682db893131642374~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=JcwFyrtnIzFRmzkUUfqwdLgQTSc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æœåŠ¡ç«¯ä»£ç å‚è€ƒï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">run_stdio</span>():
Â  Â Â <span class="hljs-string">"""è¿è¡Œæ ‡å‡†è¾“å…¥è¾“å‡ºæ¨¡å¼çš„æœåŠ¡å™¨
Â  Â Â 
Â  Â  ä½¿ç”¨æ ‡å‡†è¾“å…¥è¾“å‡ºæµ(stdio)è¿è¡ŒæœåŠ¡å™¨ï¼Œä¸»è¦ç”¨äºå‘½ä»¤è¡Œäº¤äº’æ¨¡å¼
Â  Â Â 
Â  Â  Raises:
Â  Â  Â  Â  Exception: å½“æœåŠ¡å™¨è¿è¡Œå‡ºé”™æ—¶æŠ›å‡ºå¼‚å¸¸
Â  Â  """</span>
Â  Â Â <span class="hljs-keyword">from</span>Â mcp.server.stdioÂ <span class="hljs-keyword">import</span>Â stdio_server
Â  Â Â 
Â  Â  logger.info(<span class="hljs-string">"å¯åŠ¨æ ‡å‡†è¾“å…¥è¾“å‡º(stdio)æ¨¡å¼æœåŠ¡å™¨"</span>)
Â  Â Â 
Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â Â <span class="hljs-comment"># åˆå§‹åŒ–èµ„æº</span>
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â initialize_global_resources()
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â stdio_server()Â <span class="hljs-keyword">as</span>Â (read_stream, write_stream):
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  Â  Â  Â  Â  logger.debug(<span class="hljs-string">"åˆå§‹åŒ–æµå¼ä¼ è¾“æ¥å£"</span>)
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â app.run(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  read_stream,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  write_stream,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  app.create_initialization_options()
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  logger.info(<span class="hljs-string">"æ ‡å‡†è¾“å…¥è¾“å‡ºæ¨¡å¼æœåŠ¡ç»“æŸ"</span>)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â  Â  Â  Â  Â  Â  Â  Â  logger.critical(<span class="hljs-string">f"æ ‡å‡†è¾“å…¥è¾“å‡ºæ¨¡å¼æœåŠ¡å™¨é”™è¯¯:Â <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  logger.exception(<span class="hljs-string">"æœåŠ¡å¼‚å¸¸ç»ˆæ­¢"</span>)
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>
Â  Â Â <span class="hljs-keyword">finally</span>:
Â  Â  Â  Â Â <span class="hljs-comment"># å…³é—­èµ„æº</span>
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â close_global_resources()
</code></pre>
<p><strong>Main å‡½æ•°ä¸­è°ƒç”¨ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">try:
Â  Â  if mode ==Â <span class="hljs-string">"stdio"</span>:
Â  Â  Â  Â  asyncio.<span class="hljs-built_in">run</span>(<span class="hljs-built_in">run_stdio</span>())
</code></pre>
<p><strong>é…ç½® Cline çš„JSONæ–‡ä»¶å³å¯è®¿é—®ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"mcp_db"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â  Â  Â Â <span class="hljs-attr">"timeout"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-number">60</span><span class="hljs-punctuation">,</span>
Â  Â  Â Â <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"stdio"</span><span class="hljs-punctuation">,</span>
Â  Â  Â Â <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"uv"</span><span class="hljs-punctuation">,</span>
Â  Â  Â Â <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">[</span>
Â  Â  Â  Â Â <span class="hljs-string">"--directory"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â Â <span class="hljs-string">"/Users/admin/Downloads/Codes/MCP/mcp_for_db/src/"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â Â <span class="hljs-string">"run"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â Â <span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â Â <span class="hljs-string">"server.mcp.server_mysql"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â Â <span class="hljs-string">"--mode"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â Â <span class="hljs-string">"stdio"</span>
Â  Â  Â Â <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
Â  Â  Â Â <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â  Â  Â  Â Â <span class="hljs-attr">"MYSQL_HOST"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"localhost"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â Â <span class="hljs-attr">"MYSQL_PORT"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"3306"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â Â <span class="hljs-attr">"MYSQL_USER"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"root"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â Â <span class="hljs-attr">"MYSQL_PASSWORD"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"password"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â Â <span class="hljs-attr">"MYSQL_DATABASE"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"mcp_db"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â Â <span class="hljs-attr">"MYSQL_ROLE"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"admin"</span><span class="hljs-punctuation">,</span>
Â  Â  Â  Â Â <span class="hljs-attr">"PYTHONPATH"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"/Users/admin/Downloads/Codes/MCP/MCP-DB/"</span>
Â  Â  Â Â <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>SSE ä¼ è¾“</strong></p>
<p>SSE ä¼ è¾“ä½¿ç”¨æœåŠ¡å™¨å‘é€äº‹ä»¶ (SSE) ä¼ è¾“æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„æ¶ˆæ¯ï¼Œå¹¶ä½¿ç”¨ HTTP POST è¯·æ±‚ä¼ è¾“å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„æ¶ˆæ¯ï¼Œæä¾›åŸºäº HTTP çš„é€šä¿¡ã€‚å…¶æœ¬è´¨æ˜¯åŒå‘æ¨¡æ‹Ÿï¼Œå³ SSE æœ¬è´¨ä¸ºå•å‘ï¼ŒSDK é€šè¿‡â€œè¯·æ±‚/å“åº”â€å¯¹æ¨¡æ‹ŸåŒå‘é€šä¿¡ï¼ˆå®¢æˆ·ç«¯å‘é€ HTTP POST è¯·æ±‚æºå¸¦JSON-RPCï¼ŒæœåŠ¡å™¨è¿”å› SSE æµï¼‰ã€‚å…¶é€šä¿¡æµç¨‹ä¹Ÿå¯æ¦‚æ‹¬ä¸ºä¸ƒæ­¥ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨çš„ /sse ç«¯ç‚¹å‘é€è¯·æ±‚ï¼ˆä¸€èˆ¬æ˜¯ GET è¯·æ±‚ï¼‰ï¼Œå»ºç«‹ SSE è¿æ¥ï¼›</li>
<li>æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªåŒ…å«æ¶ˆæ¯ç«¯ç‚¹åœ°å€çš„äº‹ä»¶æ¶ˆæ¯ï¼›</li>
<li>å®¢æˆ·ç«¯ç»™æ¶ˆæ¯ç«¯ç‚¹å‘é€æ¶ˆæ¯ï¼›</li>
<li>æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å“åº”æ¶ˆæ¯å·²æ¥æ”¶çŠ¶æ€ç ï¼›</li>
<li>æœåŠ¡å™¨ç»™åŒæ–¹å»ºç«‹çš„ SSE è¿æ¥æ¨é€äº‹ä»¶æ¶ˆæ¯ï¼›</li>
<li>å®¢æˆ·ç«¯ä» SSE è¿æ¥è¯»å–æœåŠ¡å™¨å‘é€çš„äº‹ä»¶æ¶ˆæ¯ï¼›</li>
<li>å®¢æˆ·ç«¯å…³é—­ SSE è¿æ¥ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e93fb80a910e4cdabb1f6c1bd3d95938~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=mpBSd0tWXQcjHBzRJ3WvA4%2BJ6to%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æœåŠ¡å™¨ç«¯</strong>ï¼šSseServerTransportä¸ºæœåŠ¡å™¨ç«¯ SSE ä¼ è¾“å®ç°æä¾›äº†ä¸¤ä¸ªä¸»è¦çš„ ASGI åº”ç”¨ç¨‹åºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b831d81cec6d4d4e81d44555874bb264~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=nYwNrpa0iwp%2F22Vr929kkbKTXP4%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>å®¢æˆ·ç«¯</strong>ï¼šsse_clientå‡½æ•°æä¾›å®¢æˆ·ç«¯ SSE ä¼ è¾“å®ç°ã€‚</p>
<p><strong>äºŒè€…é€šä¿¡çš„æ¶ˆæ¯æ ¼å¼å¦‚ä¸‹</strong>ï¼šæ¯æ¡ SSE æ¶ˆæ¯ä»¥Â data:Â å‰ç¼€æºå¸¦ JSON-RPC è´Ÿè½½ï¼Œå®¢æˆ·ç«¯ç›‘å¬äº‹ä»¶æµã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æœåŠ¡ç«¯</span>
logger.debug(<span class="hljs-string">"Starting SSE writer"</span>)
<span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â sse_stream_writer, write_stream_reader:
Â  Â Â <span class="hljs-keyword">await</span>Â sse_stream_writer.send({<span class="hljs-string">"event"</span>:Â <span class="hljs-string">"endpoint"</span>,Â <span class="hljs-string">"data"</span>: client_post_uri_data})
Â  Â  logger.debug(<span class="hljs-string">f"Sent endpoint event:Â <span class="hljs-subst">{client_post_uri_data}</span>"</span>)
Â  Â Â 
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">for</span>Â session_messageÂ <span class="hljs-keyword">in</span>Â write_stream_reader:
Â  Â  Â  Â  logger.debug(<span class="hljs-string">f"Sending message via SSE:Â <span class="hljs-subst">{session_message}</span>"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â sse_stream_writer.send(
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"event"</span>:Â <span class="hljs-string">"message"</span>,
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"data"</span>: session_message.message.model_dump_json(by_alias=<span class="hljs-literal">True</span>, exclude_none=<span class="hljs-literal">True</span>),
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  )
</code></pre>
<p><strong>å…¶ä¸­æ¶‰åŠä¸¤ç§ä¸»è¦äº‹ä»¶ç±»å‹ï¼š</strong></p>
<ul>
<li><strong>endpointäº‹ä»¶</strong>ï¼šåœ¨è¿æ¥å»ºç«‹æ—¶å‘é€ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯ POST æ¶ˆæ¯çš„ç«¯ç‚¹ URLã€‚</li>
<li><strong>messageäº‹ä»¶</strong>ï¼šä¼ è¾“å®é™…çš„ JSON-RPC æ¶ˆæ¯ã€‚</li>
</ul>
<p><strong>å®¢æˆ·ç«¯é€šè¿‡Â sse_readerÂ å‡½æ•°å¤„ç†æ¥æ”¶åˆ°çš„ SSE äº‹ä»¶ï¼š</strong></p>
<ul>
<li><strong>endpointäº‹ä»¶å¤„ç†</strong>ï¼šéªŒè¯ç«¯ç‚¹ URL çš„å®‰å…¨æ€§ï¼Œç¡®ä¿ä¸è¿æ¥æºåŒ¹é…ã€‚</li>
</ul>

<pre><code class="hljs language-css" lang="css">match sse<span class="hljs-selector-class">.event</span>:
Â  Â  caseÂ <span class="hljs-string">"endpoint"</span>:
Â  Â  Â  Â  endpoint_url =Â <span class="hljs-built_in">urljoin</span>(url, sse.data)
Â  Â  Â  Â  logger.<span class="hljs-built_in">debug</span>(f<span class="hljs-string">"Received endpoint URL: {endpoint_url}"</span>)
Â  Â  Â  Â Â 
Â  Â  Â  Â  url_parsed =Â <span class="hljs-built_in">urlparse</span>(url)
Â  Â  Â  Â  endpoint_parsed =Â <span class="hljs-built_in">urlparse</span>(endpoint_url)
Â  Â  Â  Â  if (
Â  Â  Â  Â  Â  Â  url_parsed.netloc != endpoint_parsed.netloc
Â  Â  Â  Â  Â  Â  or url_parsed.scheme != endpoint_parsed.scheme
Â  Â  Â  Â  ):
Â  Â  Â  Â  Â  Â  error_msg = (
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"Endpoint origin does not match "</span>Â f<span class="hljs-string">"connection origin: {endpoint_url}"</span>
Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  logger.<span class="hljs-built_in">error</span>(error_msg)
Â  Â  Â  Â  Â  Â  raiseÂ <span class="hljs-built_in">ValueError</span>(error_msg)
Â  Â  Â  Â Â 
Â  Â  Â  Â  task_status.<span class="hljs-built_in">started</span>(endpoint_url)
</code></pre>
<ul>
<li><strong>messageäº‹ä»¶å¤„ç†</strong>ï¼šè§£æ JSON-RPC æ¶ˆæ¯å¹¶è½¬æ¢ä¸ºÂ SessionMessageã€‚</li>
</ul>

<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">case</span>Â <span class="hljs-string">"message"</span>:
Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  message = types.JSONRPCMessage.model_validate_json( Â <span class="hljs-comment"># noqa: E501</span>
Â  Â  Â  Â  Â  Â  sse.data
Â  Â  Â  Â  )
Â  Â  Â  Â  logger.debug(<span class="hljs-string">f"Received server message:Â <span class="hljs-subst">{message}</span>"</span>)
Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â exc:
Â  Â  Â  Â  logger.error(<span class="hljs-string">f"Error parsing server message:Â <span class="hljs-subst">{exc}</span>"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â read_stream_writer.send(exc)
Â  Â  Â  Â Â <span class="hljs-keyword">continue</span>
Â  Â Â 
Â  Â  session_message = SessionMessage(message)
Â  Â Â <span class="hljs-keyword">await</span>Â read_stream_writer.send(session_message)
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šè¿œç¨‹æˆ–äº‘ç«¯éƒ¨ç½²ï¼Œæ”¯æŒé«˜å¹¶å‘å’Œå®æ—¶æ›´æ–°ï¼ˆå¦‚å·¥å…·è°ƒç”¨çš„ç»“æœæ¨é€ï¼‰ã€‚é”™è¯¯å¤„ç†åŒ…æ‹¬è¿æ¥è¶…æ—¶é‡è¯•ï¼ˆæºç ä¸­Â retryÂ æœºåˆ¶ï¼‰ã€‚</p>
<p><strong>æœåŠ¡ç«¯ä»£ç å‚è€ƒ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">run_sse</span>():
Â  Â Â <span class="hljs-string">"""è¿è¡ŒSSE(Server-Sent Events)æ¨¡å¼çš„æœåŠ¡å™¨
Â  Â Â 
Â  Â  å¯åŠ¨ä¸€ä¸ªæ”¯æŒSSEçš„WebæœåŠ¡å™¨ï¼Œå…è®¸å®¢æˆ·ç«¯é€šè¿‡HTTPé•¿è¿æ¥æ¥æ”¶æœåŠ¡å™¨æ¨é€çš„æ¶ˆæ¯
Â  Â  æœåŠ¡å™¨é»˜è®¤ç›‘å¬0.0.0.0:9000
Â  Â  """</span>
Â  Â  logger.info(<span class="hljs-string">"å¯åŠ¨SSE(Server-Sent Events)æ¨¡å¼æœåŠ¡å™¨"</span>)
Â  Â  sse = SseServerTransport(<span class="hljs-string">"/messages/"</span>)
Â  Â Â 
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">handle_sse</span>(<span class="hljs-params">request</span>):
Â  Â  Â  Â Â <span class="hljs-string">"""å¤„ç†SSEè¿æ¥è¯·æ±‚
Â  Â  Â  Â Â 
Â  Â  Â  Â  Args:
Â  Â  Â  Â  Â  Â  request: HTTPè¯·æ±‚å¯¹è±¡
Â  Â  Â  Â  """</span>
Â  Â  Â  Â  logger.info(<span class="hljs-string">f"æ–°çš„SSEè¿æ¥ [client=<span class="hljs-subst">{request.client}</span>]"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â sse.connect_sse(
Â  Â  Â  Â  Â  Â  Â  Â  request.scope, request.receive, request.send
Â  Â  Â  Â  )Â <span class="hljs-keyword">as</span>Â streams:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â app.run(streams[<span class="hljs-number">0</span>], streams[<span class="hljs-number">1</span>], app.create_initialization_options())
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â  Â  Â  Â  Â  Â  Â  Â  logger.error(<span class="hljs-string">f"SSEè¿æ¥å¤„ç†å¼‚å¸¸:Â <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>
Â  Â  Â  Â  logger.info(<span class="hljs-string">f"SSEè¿æ¥æ–­å¼€ [client=<span class="hljs-subst">{request.client}</span>]"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â Response(status_code=<span class="hljs-number">204</span>)
Â  Â Â 
Â  Â  @contextlib.asynccontextmanager
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">lifespan</span>(<span class="hljs-params">app: Starlette</span>) -&gt; AsyncIterator[<span class="hljs-literal">None</span>]:
Â  Â  Â  Â Â <span class="hljs-string">"""SSEåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†"""</span>
Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># åˆå§‹åŒ–èµ„æº</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â initialize_global_resources()
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">yield</span>
Â  Â  Â  Â Â <span class="hljs-keyword">finally</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># å…³é—­èµ„æº</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â close_global_resources()
Â  Â Â 
Â  Â  starlette_app = Starlette(
Â  Â  Â  Â  debug=<span class="hljs-literal">True</span>,
Â  Â  Â  Â  routes=[
Â  Â  Â  Â  Â  Â  Route(<span class="hljs-string">"/sse"</span>, endpoint=handle_sse),
Â  Â  Â  Â  Â  Â  Mount(<span class="hljs-string">"/messages/"</span>, app=sse.handle_post_message)
Â  Â  Â  Â  ],
Â  Â  Â  Â  lifespan=lifespan
Â  Â  )
Â  Â Â 
Â  Â  logger.info(<span class="hljs-string">"SSEæœåŠ¡å™¨å¯åŠ¨ä¸­ [host=0.0.0.0, port=9000]"</span>)
Â  Â Â <span class="hljs-comment"># åˆ›å»ºé…ç½®å¹¶è¿è¡Œ</span>
Â  Â  config = uvicorn.Config(
Â  Â  Â  Â  app=starlette_app,
Â  Â  Â  Â  host=<span class="hljs-string">"0.0.0.0"</span>,
Â  Â  Â  Â  port=<span class="hljs-number">9000</span>,
Â  Â  Â  Â  loop=<span class="hljs-string">"asyncio"</span>,
Â  Â  Â  Â  log_config=<span class="hljs-literal">None</span>Â Â <span class="hljs-comment"># ç¦ç”¨uvicorné»˜è®¤æ—¥å¿—é…ç½®</span>
Â  Â  )
Â  Â Â 
Â  Â  server = uvicorn.Server(config)
Â  Â  server.run()
</code></pre>
<p><strong>Mainå‡½æ•°ä¸­è°ƒç”¨</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">try:
Â  Â Â ifÂ <span class="hljs-attr">mode</span> ==Â <span class="hljs-string">"sse"</span>:
Â  Â  Â  Â  run_sse()
</code></pre>
<p><strong>é…ç½® Cline çš„ JSONæ–‡ä»¶å³å¯è®¿é—®ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"mysql_mcp_server"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â Â <span class="hljs-attr">"disabled"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
Â Â <span class="hljs-attr">"timeout"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-number">60</span><span class="hljs-punctuation">,</span>
Â Â <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"sse"</span><span class="hljs-punctuation">,</span>
Â Â <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"http://localhost:9000/sse"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-7">3.3é€šä¿¡å·¥ä½œæµç¨‹</h3>
<p>MCPé€šä¿¡éµå¾ª JSON-RPC 2.0æ¨¡å¼ï¼Œä¸»è¦åŒ…å«ä¸‰ä¸ªæ¶ˆæ¯ç±»åˆ«ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15cc40200832463294bb9305e8877ce1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=6srulcbfkV3b7%2FvzWo3yaI%2BBQW4%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>åŒæ—¶ï¼Œç†è§£ MCP è¿æ¥ç”Ÿå‘½å‘¨æœŸå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°å¼€å‘ MCP æœåŠ¡å™¨å’Œ AI åº”ç”¨ã€‚MCP è¿æ¥ç”Ÿå‘½å‘¨æœŸè·Ÿ TCP çš„ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹æœ‰ç‚¹ç±»ä¼¼ï¼Œä¹Ÿè¦ç»å†å»ºç«‹è¿æ¥ã€äº¤æ¢æ¶ˆæ¯ã€æ–­å¼€è¿æ¥ç­‰é˜¶æ®µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fa1a26d463440ae9583b47c283ecd3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=ImgXpfMxLIGbDvuYHFY8jbD2HAs%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ¥ä¸‹æ¥ï¼Œä»¥ StreamableHTTP æœºåˆ¶ä¸ºä¾‹ï¼Œåˆ†æé€šä¿¡å·¥ä½œæµç¨‹ã€‚StreamableHTTP ä¼ è¾“æœºåˆ¶å®ç°äº†åŸºäº HTTP çš„åŒå‘é€šä¿¡ï¼Œç»“åˆäº† HTTP POST è¯·æ±‚å’Œ Server-Sent Events (SSE) æµæ¥æä¾›å®Œæ•´çš„å®¢æˆ·ç«¯-æœåŠ¡å™¨é€šä¿¡è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>æ•´ä½“æ¶æ„æµç¨‹</strong></p>
<p>StreamableHTTP é€šä¿¡æœºåˆ¶åŒ…å«ä¼šè¯ç®¡ç†ã€åŒå‘æ¶ˆæ¯ä¼ è¾“å’Œå¯é€‰çš„äº‹ä»¶é‡æ”¾åŠŸèƒ½ï¼š</p>
<ul>
<li>å®¢æˆ·ç«¯ä¼ è¾“åˆå§‹åŒ–</li>
<li>
<ul>
<li>å®¢æˆ·ç«¯é€šè¿‡Â streamablehttp_clientÂ å‡½æ•°å»ºç«‹è¿æ¥ã€‚</li>
<li>æ ¸å¿ƒç»„ä»¶Â StreamableHTTPTransportÂ è´Ÿè´£ç®¡ç†ä¼šè¯çŠ¶æ€å’Œæ¶ˆæ¯è·¯ç”±ã€‚</li>
<li/>
</ul>
</li>
<li>æœåŠ¡å™¨ç«¯ä¼šè¯ç®¡ç†</li>
<li>
<ul>
<li>æœåŠ¡å™¨ç«¯ä½¿ç”¨Â StreamableHTTPSessionManagerÂ ç®¡ç†å¤šä¸ªå¹¶å‘ä¼šè¯ã€‚æ”¯æŒæœ‰çŠ¶æ€å’Œæ— çŠ¶æ€ä¸¤ç§æ¨¡å¼ï¼š</li>
<li><strong>æœ‰çŠ¶æ€æ¨¡å¼</strong>ï¼šç»´æŠ¤ä¼šè¯çŠ¶æ€ï¼Œæ”¯æŒè¿æ¥æ¢å¤ã€‚</li>
<li><strong>æ— çŠ¶æ€æ¨¡å¼</strong>ï¼šæ¯ä¸ªè¯·æ±‚åˆ›å»ºæ–°çš„ä¼ è¾“å®ä¾‹ã€‚</li>
</ul>
</li>
</ul>
<p><strong>é€šä¿¡å·¥ä½œæµç¨‹è¯¦è§£</strong></p>
<p><strong>åˆå§‹åŒ–å’Œä¼šè¯å»ºç«‹</strong></p>
<ul>
<li>åˆå§‹åŒ–è¯·æ±‚ï¼šå®¢æˆ·ç«¯å‘é€Â initializeÂ æ–¹æ³•çš„ POST è¯·æ±‚ã€‚</li>
<li>ä¼šè¯ ID åˆ†é…ï¼šæœåŠ¡å™¨ç”Ÿæˆå”¯ä¸€ä¼šè¯ ID å¹¶é€šè¿‡Â mcp-session-idÂ å¤´è¿”å›ã€‚</li>
</ul>

<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_maybe_extract_session_id_from_response</span>(<span class="hljs-params">
Â  Â  self,
Â  Â  response: httpx.Response,
</span>) -&gt;Â <span class="hljs-literal">None</span>:
Â  Â Â <span class="hljs-string">"""Extract and store session ID from response headers."""</span>
Â  Â  new_session_id = response.headers.get(MCP_SESSION_ID)
Â  Â Â <span class="hljs-keyword">if</span>Â new_session_id:
Â  Â  Â  Â Â self.session_id = new_session_id
Â  Â  Â  Â  logger.info(<span class="hljs-string">f"Received session ID:Â <span class="hljs-subst">{self.session_id}</span>"</span>)
</code></pre>
<p><strong>åŒå‘æ¶ˆæ¯ä¼ è¾“</strong></p>
<p>å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ï¼ˆPOST è¯·æ±‚ï¼‰ï¼šå®¢æˆ·ç«¯çš„post_writerÂ æ–¹æ³•å¤„ç†å‡ºç«™æ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">post_writer</span>(<span class="hljs-params">
Â  Â  self,
Â  Â  client: httpx.AsyncClient,
Â  Â  write_stream_reader: StreamReader,
Â  Â  read_stream_writer: StreamWriter,
Â  Â  write_stream: MemoryObjectSendStream[SessionMessage],
Â  Â  start_get_stream:Â <span class="hljs-type">Callable</span>[[],Â <span class="hljs-literal">None</span>],
Â  Â  tg: TaskGroup,
</span>) -&gt;Â <span class="hljs-literal">None</span>:
Â  Â Â <span class="hljs-string">"""Handle writing requests to the server."""</span>
</code></pre>
<ul>
<li><strong>æ¶ˆæ¯åºåˆ—åŒ–</strong>ï¼šå°† JSON-RPC æ¶ˆæ¯åºåˆ—åŒ–ä¸º HTTP POST è¯·æ±‚ä½“ã€‚</li>
<li><strong>è¯·æ±‚å¤„ç†</strong>ï¼šæ ¹æ®æ¶ˆæ¯ç±»å‹é€‰æ‹©å¤„ç†æ–¹å¼ - æ™®é€šè¯·æ±‚æˆ–æ¢å¤è¯·æ±‚ã€‚</li>
</ul>

<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">handle_request_async</span>():
Â  Â Â <span class="hljs-keyword">if</span>Â is_resumption:
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â self._handle_resumption_request(ctx)
Â  Â Â <span class="hljs-keyword">else</span>:
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â self._handle_post_request(ctx)
<span class="hljs-comment"># If this is a request, start a new task to handle it</span>
<span class="hljs-keyword">if</span>Â <span class="hljs-built_in">isinstance</span>(message.root, JSONRPCRequest):
Â  Â  tg.start_soon(handle_request_async)
<span class="hljs-keyword">else</span>:
Â  Â Â <span class="hljs-keyword">await</span>Â handle_request_async()
</code></pre>
<ul>
<li><strong>å“åº”å¤„ç†</strong>ï¼šæ”¯æŒ JSON å“åº”å’Œ SSE æµå“åº”ä¸¤ç§æ¨¡å¼ã€‚</li>
</ul>
<p><strong>æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯ï¼ˆSSE æµï¼‰</strong></p>
<p>æœåŠ¡å™¨ç«¯é€šè¿‡ä¸åŒçš„ HTTP æ–¹æ³•å¤„ç†æ¶ˆæ¯ï¼š</p>
<ul>
<li><strong>POST è¯·æ±‚å¤„ç†</strong>ï¼šæ¥æ”¶å®¢æˆ·ç«¯æ¶ˆæ¯å¹¶é€šè¿‡ SSE æˆ– JSON å“åº”</li>
</ul>

<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span>Â self.is_json_response_enabled:
Â  Â Â <span class="hljs-comment"># Process the message</span>
Â  Â  metadata = ServerMessageMetadata(request_context=request)
Â  Â  session_message = SessionMessage(message, metadata=metadata)
Â  Â Â <span class="hljs-keyword">await</span>Â writer.send(session_message)
Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â Â <span class="hljs-comment"># Process messages from the request-specific stream</span>
Â  Â  Â  Â Â <span class="hljs-comment"># We need to collect all messages until we get a response</span>
Â  Â  Â  Â Â <span class="hljs-keyword">pass</span>
Â  Â Â <span class="hljs-keyword">finally</span>:
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â self._clean_up_memory_streams(request_id)
<span class="hljs-keyword">else</span>:
Â  Â Â <span class="hljs-comment"># Create SSE stream</span>
Â  Â  sse_stream_writer, sse_stream_reader = anyio.create_memory_object_stream[<span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-built_in">str</span>]](<span class="hljs-number">0</span>)
Â  Â Â 
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">sse_writer</span>():
Â  Â  Â  Â Â <span class="hljs-comment"># Get the request ID from the incoming request message</span>
</code></pre>
<ul>
<li><strong>GET è¯·æ±‚å¤„ç†</strong>ï¼šå»ºç«‹ç‹¬ç«‹çš„ SSE æµç”¨äºæœåŠ¡å™¨ä¸»åŠ¨æ¨é€ streamable_http.py:511-601</li>
</ul>

<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_handle_get_request</span>(<span class="hljs-params">self, request: Request, send: Send</span>) -&gt;Â <span class="hljs-literal">None</span>:
Â  Â Â <span class="hljs-string">"""
Â  Â  Handle GET request to establish SSE.
Â  Â Â 
Â  Â  This allows the server to communicate to the client without the client
Â  Â  first sending data via HTTP POST. The server can send JSON-RPC requests
Â  Â  and notifications on this stream.
Â  Â  """</span>
</code></pre>
<p><strong>å®é™…ä½¿ç”¨ç¤ºä¾‹</strong></p>
<p>ä»æµ‹è¯•ä»£ç ä¸­å¯ä»¥çœ‹åˆ°å®Œæ•´çš„ä½¿ç”¨æµç¨‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@pytest.mark.anyio</span>
<span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">test_streamablehttp_client_basic_connection</span>(<span class="hljs-params">basic_server, basic_server_url</span>):
Â  Â Â <span class="hljs-string">"""Test basic client connection with initialization."""</span>
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â streamablehttp_client(<span class="hljs-string">f"<span class="hljs-subst">{basic_server_url}</span>/mcp"</span>)Â <span class="hljs-keyword">as</span>Â (
Â  Â  Â  Â  read_stream,
Â  Â  Â  Â  write_stream,
Â  Â  Â  Â  _,
Â  Â  ):
Â  Â  Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â ClientSession(
Â  Â  Â  Â  Â  Â  read_stream,
Â  Â  Â  Â  Â  Â  write_stream,
Â  Â  Â  Â  )Â <span class="hljs-keyword">as</span>Â session:
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># Test initialization</span>
Â  Â  Â  Â  Â  Â  result =Â <span class="hljs-keyword">await</span>Â session.initialize()
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">assert</span>Â <span class="hljs-built_in">isinstance</span>(result, InitializeResult)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">assert</span>Â result.serverInfo.name == SERVER_NAME
</code></pre>
<ol>
<li>ä½¿ç”¨Â streamablehttp_clientÂ å»ºç«‹è¿æ¥</li>
<li>é€šè¿‡Â ClientSessionÂ è¿›è¡Œåˆå§‹åŒ–</li>
<li>æ‰§è¡Œå„ç§ MCP æ“ä½œï¼ˆå·¥å…·è°ƒç”¨ã€èµ„æºè®¿é—®ç­‰ï¼‰</li>
</ol>
<h3 data-id="heading-8">3.4å„åè®®å¯¹æ¯”åˆ†æ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/785e811b64234854bfa08f6c5c04ccc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=anWdBMNmIdWTD7raJ1Z%2B1OStFA8%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>MCP vs REST API</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c46a32a3d7ca4fffbf19fadf0137b464~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=Es2s2DTqEmfvx47xFKsSfizhius%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>MCP vs WebSocket</p>
<h2 data-id="heading-9">å››ã€é¡¹ç›®åˆå§‹åŒ–&amp;å®æˆ˜è§£æ</h2>
<p>æœ¬èŠ‚ï¼Œå°†ä½¿ç”¨ uv å¿«é€Ÿæ­å»º MCP æœåŠ¡ï¼Œç„¶åç»“åˆ DW-DBA-MCP å®æˆ˜é¡¹ç›®è¿›è¡Œä»‹ç»ã€‚</p>
<h3 data-id="heading-10">4.1ç¯å¢ƒå®‰è£…</h3>
<p>å®˜æ–¹æ¨èä½¿ç”¨ uv è¿›è¡Œè™šæ‹Ÿç¯å¢ƒåŠä¾èµ–çš„ç®¡ç†ã€‚uv çš„å®‰è£…å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.astral.sh%2Fuv%2F%23highlights%25E3%2580%2582%25E5%2585%25B6%25E4%25BB%2596%25E5%25AE%2589%25E8%25A3%2585%25E6%2596%25B9%25E5%25BC%258F%25E5%258F%25AF%25E5%258F%2582%25E8%2580%2583%25EF%25BC%259Ahttps%3A%2F%2Fdocs.astral.sh%2Fuv%2Fgetting-started%2Finstallation%2F%23standalone-installer%25E3%2580%2582" target="_blank" title="https://docs.astral.sh/uv/#highlights%E3%80%82%E5%85%B6%E4%BB%96%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F%E5%8F%AF%E5%8F%82%E8%80%83%EF%BC%9Ahttps://docs.astral.sh/uv/getting-started/installation/#standalone-installer%E3%80%82" ref="nofollow noopener noreferrer">docs.astral.sh/uv/#highligâ€¦</a></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># macos</span>
curl -LsSf https://astral.sh/uv/install.sh | sh
<span class="hljs-built_in">source</span>Â <span class="hljs-variable">$HOME</span>/.local/bin/env


(base) Dewu-GK234XWXCT:~ admin$ uv --version
uv 0.7.13 (62ed17b23 2025-06-12)
</code></pre>
<p>åŒæ—¶ï¼Œéœ€è¦æ³¨æ„âš ï¸ï¼šSDK éœ€è¦ Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œæ”¯æŒ Python 3.10 è‡³ 3.13ã€‚</p>
<ul>
<li><strong>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š</strong></li>
</ul>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆå§‹åŒ–è™šæ‹Ÿç¯å¢ƒ</span>
uv init MCP-DB


<span class="hljs-comment"># åˆ‡æ¢ç›®å½•</span>
<span class="hljs-built_in">cd</span>Â MCP-DB


<span class="hljs-comment"># å®‰è£…mcp clientä¾èµ–</span>
uv addÂ <span class="hljs-string">"mcp[cli]"</span>


<span class="hljs-comment"># ä½¿ç”¨ uv è¿è¡Œ mcp å‘½ä»¤</span>
uv run mcp -<span class="hljs-built_in">help</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28668b7469de44c2ba8874402248c92f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=g8SWYGvQxG%2BOUN0T6nxvfX8wTc0%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-11">4.2DW-DBA-MCPå®æˆ˜è§£æ</h3>
<p>æœ¬é¡¹ç›®æ—¨åœ¨ä¸ºæ•°æ®åº“ä¾§å¼€å‘ MCP Serverã€‚åŒæ—¶ï¼Œè€ƒè™‘åˆ°é«˜å¯æ‰©å±•æ€§ï¼Œé¡¹ç›®é‡‡ç”¨å¾®æœåŠ¡æ¶æ„è¿›è¡Œè®¾è®¡å¼€å‘ï¼Œè¿™ä¹Ÿä¾¿äºä¸ Nacos MCP Server è¿›è¡Œé›†æˆï¼Œå®¢æˆ·ç«¯é…ç½®Nacos MCP Server æœåŠ¡ï¼ŒLLM å³å¯é€šè¿‡è¯¥ç½‘å…³é«˜æ•ˆè·¯ç”±åˆ°åˆé€‚å·¥å…·ï¼›è€ƒè™‘åˆ°æ˜“ç”¨æ€§ï¼Œé€šè¿‡å°è£… MCP Client å’Œ MCP Serverï¼Œæä¾› FastAPI æ¥å£å¤„ç†ç”¨æˆ·çš„æé—®ã€‚é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">DW-DBA-MCP/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md Â Â 
â”œâ”€â”€ datas Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-meta"># å­˜æ”¾é¡¹ç›®æ—¥å¿—æ–‡ä»¶</span>
â”‚ Â  â”œâ”€â”€ files Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-meta"># å­˜æ”¾å·¥å…·æ‰§è¡Œçš„ SQL è¯­å¥</span>
â”‚ Â  â”œâ”€â”€ logs Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-meta"># å­˜æ”¾æ—¥å¿—æ–‡ä»¶</span>
â”‚ Â  â””â”€â”€ version Â Â 
â”œâ”€â”€ mcp_for_db
â”‚ Â  â”œâ”€â”€ __init__.py
â”‚ Â  â”œâ”€â”€ client Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-meta"># è‡ªå»ºå®¢æˆ·ç«¯</span>
â”‚ Â  â”‚ Â  â”œâ”€â”€ __init__.py
â”‚ Â  â”‚ Â  â”œâ”€â”€ api.py Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-meta"># FastAPI æœåŠ¡</span>
â”‚ Â  â”‚ Â  â””â”€â”€ client.py Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-meta"># MCP Client</span>
â”‚ Â  â”œâ”€â”€ debug
â”‚ Â  â”‚ Â  â”œâ”€â”€ __init__.py
â”‚ Â  â”‚ Â  â””â”€â”€ mcp_logger.py Â  Â  Â  Â  Â  Â  Â <span class="hljs-meta"># è®°å½• MCP Client ä¸ MCP Server é€šä¿¡æ•°æ®ï¼Œç”¨äºç™½ç›’è§£æ MCP é€šä¿¡åè®®</span>
â”‚ Â  â”œâ”€â”€ envs
â”‚ Â  â”‚ Â  â”œâ”€â”€ common.env Â  Â  Â  Â  Â Â <span class="hljs-meta"># å¤šæœåŠ¡ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶</span>
â”‚ Â  â”‚ Â  â”œâ”€â”€ dify.env
â”‚ Â  â”‚ Â  â””â”€â”€ mysql.env
â”‚ Â  â”œâ”€â”€ server
â”‚ Â  â”‚ Â  â”œâ”€â”€ __init__.py
â”‚ Â  â”‚ Â  â”œâ”€â”€ cli
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ __init__.py
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ dify_cli.py Â  Â Â <span class="hljs-meta"># cli æ–¹å¼å¯åŠ¨ dify æœåŠ¡</span>
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ mysql_cli.py Â  Â <span class="hljs-meta"># cli æ–¹å¼å¯åŠ¨ mysql æœåŠ¡</span>
â”‚ Â  â”‚ Â  â”‚ Â  â””â”€â”€ server.py
â”‚ Â  â”‚ Â  â”œâ”€â”€ common
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ __init__.py
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€Â <span class="hljs-keyword">base</span>Â  Â  Â  Â  Â  Â Â <span class="hljs-meta"># å…¬å…±çš„èµ„æºã€å·¥å…·å’Œæç¤ºè¯è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°çš„åŸºç±»åŒ…</span>
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ prompts.py Â  Â  Â <span class="hljs-meta"># å­˜æ”¾æç¤ºè¯æ¨¡ç‰ˆ</span>
â”‚ Â  â”‚ Â  â”‚ Â  â””â”€â”€ tools.py Â  Â  Â  Â <span class="hljs-meta"># å­˜æ”¾å·¥å…·æè¿°</span>
â”‚ Â  â”‚ Â  â”œâ”€â”€ core
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ __init__.py
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ base_server.py Â  Â  Â Â <span class="hljs-meta"># å¾®æœåŠ¡åŸºç±»</span>
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ config_manager.py Â  Â <span class="hljs-meta"># ç¯å¢ƒå˜é‡é…ç½®å™¨</span>
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ env_distribute.py Â  Â <span class="hljs-meta"># stdioé€šä¿¡æœºåˆ¶ä¸‹å¤šæœåŠ¡ç¯å¢ƒå˜é‡åˆ†å‘å™¨</span>
â”‚ Â  â”‚ Â  â”‚ Â  â””â”€â”€ service_manager.py Â Â <span class="hljs-meta"># å¤šæœåŠ¡ç®¡ç†å™¨</span>
â”‚ Â  â”‚ Â  â”œâ”€â”€ server_dify Â  Â  Â  Â  Â  Â  Â <span class="hljs-meta"># dify æœåŠ¡å®ç°åŒ…</span>
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ __init__.py
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ config
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ dify_server.py Â  Â  Â <span class="hljs-meta"># dify æœåŠ¡å®ç°ç±»</span>
â”‚ Â  â”‚ Â  â”‚ Â  â””â”€â”€ tools
â”‚ Â  â”‚ Â  â”œâ”€â”€ server_mysql Â  Â  Â  Â  Â  Â Â <span class="hljs-meta"># mysql æœåŠ¡å®ç°åŒ…</span>
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ __init__.py
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ config
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ mysql_server.py Â  Â Â <span class="hljs-meta"># mysql æœåŠ¡å®ç°ç±»</span>
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ prompts
â”‚ Â  â”‚ Â  â”‚ Â  â”œâ”€â”€ resources
â”‚ Â  â”‚ Â  â”‚ Â  â””â”€â”€ tools
â”‚ Â  â”‚ Â  â””â”€â”€ shared
â”‚ Â  â”‚ Â  Â  Â  â”œâ”€â”€ __init__.py
â”‚ Â  â”‚ Â  Â  Â  â”œâ”€â”€ oauth
â”‚ Â  â”‚ Â  Â  Â  â”œâ”€â”€ security Â  Â <span class="hljs-meta"># SQLé‰´æƒ</span>
â”‚ Â  â”‚ Â  Â  Â  â”œâ”€â”€ templates
â”‚ Â  â”‚ Â  Â  Â  â””â”€â”€ utils
â”‚ Â  â””â”€â”€ test
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ requirements.txt
â””â”€â”€ uv.<span class="hljs-keyword">lock</span>
</code></pre>
<p><strong>é¡¹ç›®è®¾è®¡æ€è·¯</strong></p>
<p>æœ¬é¡¹ç›®åŸå…ˆå‚è€ƒäºå¼€æºé¡¹ç›®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwenb1n-dev%2Fmysql_mcp_server_pro%25EF%25BC%258C%25E4%25BD%2586%25E9%2592%2588%25E5%25AF%25B9%25E5%25BE%25AE%25E6%259C%258D%25E5%258A%25A1%25E5%25BC%258F%25E7%259A%2584%25E6%259E%25B6%25E6%259E%2584%25E8%25AE%25BE%25E8%25AE%25A1%25EF%25BC%258C%25E5%258F%2588%25E5%2581%259A%25E4%25BA%2586%25E8%25BF%259B%25E4%25B8%2580%25E6%25AD%25A5%25E6%2594%25B9%25E8%25BF%259B%25EF%25BC%258C%25E7%258E%25B0%25E9%2598%25B6%25E6%25AE%25B5%25E4%25BA%258C%25E8%2580%2585%25E7%259A%2584%25E5%25B7%25AE%25E5%25BC%2582%25E5%25A6%2582%25E4%25B8%258B%25EF%25BC%259A" target="_blank" title="https://github.com/wenb1n-dev/mysql_mcp_server_pro%EF%BC%8C%E4%BD%86%E9%92%88%E5%AF%B9%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%8F%E7%9A%84%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%EF%BC%8C%E5%8F%88%E5%81%9A%E4%BA%86%E8%BF%9B%E4%B8%80%E6%AD%A5%E6%94%B9%E8%BF%9B%EF%BC%8C%E7%8E%B0%E9%98%B6%E6%AE%B5%E4%BA%8C%E8%80%85%E7%9A%84%E5%B7%AE%E5%BC%82%E5%A6%82%E4%B8%8B%EF%BC%9A" ref="nofollow noopener noreferrer">github.com/wenb1n-dev/â€¦</a></p>
<p>é’ˆå¯¹å¦‚ä½•å€ŸåŠ© Low-Level æ¥å£è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°èµ„æºã€å·¥å…·å’Œæç¤ºè¯ï¼Œæ¥ä¸‹æ¥åˆ™ä»¥æˆ‘ä»¬æ‰©å±•å°è£…çš„èµ„æºä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚</p>
<p>åœ¨å¤šæœåŠ¡åŸºç±»è„šæœ¬base_server.pyä¸­åªéœ€å±•ç¤ºå’Œè¯»å–èµ„æºå³å¯ï¼Œå¯¹åº”çš„ç±»ä¼šè‡ªåŠ¨å°†èµ„æºè¿›è¡Œæ³¨å†Œå’Œè¯»å–ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">setup_server</span>(<span class="hljs-params">self</span>):
Â  Â Â <span class="hljs-string">"""è®¾ç½®æœåŠ¡å™¨è·¯ç”±"""</span>
Â  Â Â <span class="hljs-keyword">if</span>Â self.server_setup_completed:
Â  Â  Â  Â Â self.logger.debug(<span class="hljs-string">"æœåŠ¡å™¨è·¯ç”±å·²è®¾ç½®ï¼Œè·³è¿‡é‡å¤è®¾ç½®"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>
Â  Â Â 
Â  Â Â self.logger.info(<span class="hljs-string">"å¼€å§‹è®¾ç½®æœåŠ¡å™¨è·¯ç”±"</span>)
Â  Â Â 
Â  Â Â <span class="hljs-comment"># æ³¨å†Œèµ„æºå¤„ç†å™¨</span>
Â  Â  @self.server.list_resources()
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">handle_list_resources</span>() -&gt;Â <span class="hljs-type">List</span>[Resource]:
Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  Â  Â  registry =Â self.get_resource_registry()
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â registryÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â  Â  Â  Â  Â  Â  Â  Â Â self.logger.warning(<span class="hljs-string">"èµ„æºæ³¨å†Œè¡¨æœªåˆå§‹åŒ–ï¼Œè¿”å›ç©ºåˆ—è¡¨"</span>)
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â []
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">hasattr</span>(registry,Â <span class="hljs-string">'get_all_resources'</span>):
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â asyncio.iscoroutinefunction(registry.get_all_resources):
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">await</span>Â registry.get_all_resources()
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">else</span>:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â registry.get_all_resources()
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â []
Â  Â  Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â  Â  Â  Â  Â  Â Â self.logger.error(<span class="hljs-string">f"è·å–èµ„æºåˆ—è¡¨å¤±è´¥:Â <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â []
Â  Â Â 
Â  Â  @self.server.read_resource()
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">handle_read_resource</span>(<span class="hljs-params">uri: AnyUrl</span>) -&gt;Â <span class="hljs-built_in">str</span>:
Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  Â  Â Â self.logger.info(<span class="hljs-string">f"å¼€å§‹è¯»å–èµ„æº:Â <span class="hljs-subst">{uri}</span>"</span>)
Â  Â  Â  Â  Â  Â  registry =Â self.get_resource_registry()
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â registryÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>Â ValueError(<span class="hljs-string">"èµ„æºæ³¨å†Œè¡¨æœªåˆå§‹åŒ–"</span>)
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">hasattr</span>(registry,Â <span class="hljs-string">'get_resource'</span>):
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â asyncio.iscoroutinefunction(registry.get_resource):
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  content =Â <span class="hljs-keyword">await</span>Â registry.get_resource(uri)
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">else</span>:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  content = registry.get_resource(uri)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">else</span>:
Â  Â  Â  Â  Â  Â  Â  Â  content =Â <span class="hljs-literal">None</span>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â contentÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â  Â  Â  Â  Â  Â  Â  Â  content =Â <span class="hljs-string">"null"</span>
Â  Â  Â  Â  Â  Â Â self.logger.info(<span class="hljs-string">f"èµ„æºÂ <span class="hljs-subst">{uri}</span>Â è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(content)}</span>"</span>)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â content
Â  Â  Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â  Â  Â  Â  Â  Â Â self.logger.error(<span class="hljs-string">f"è¯»å–èµ„æºå¤±è´¥:Â <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>
</code></pre>
<p><strong>èµ„æºæ³¨å†Œç±»ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">

<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ResourceRegistry</span>:
Â  Â Â <span class="hljs-string">"""èµ„æºæ³¨å†Œè¡¨ï¼Œç”¨äºç®¡ç†æ‰€æœ‰èµ„æºå®ä¾‹"""</span>
Â  Â  _resources: ClassVar[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-string">'BaseResource'</span>]] = {}
Â  Â Â 
Â  Â  @<span class="hljs-built_in">classmethod</span>
Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">register</span>(<span class="hljs-params">cls, resource_class:Â <span class="hljs-type">Type</span>[<span class="hljs-string">'BaseResource'</span>]</span>):
Â  Â  Â  Â Â <span class="hljs-string">"""æ³¨å†Œèµ„æºå®ä¾‹"""</span>
Â  Â  Â  Â  resource = resource_class()
Â  Â  Â  Â  logger.info(<span class="hljs-string">f"æ³¨å†Œèµ„æº:Â <span class="hljs-subst">{resource.name}</span>Â (URI:Â <span class="hljs-subst">{resource.uri}</span>)"</span>)
Â  Â  Â  Â  cls._resources[<span class="hljs-built_in">str</span>(resource.uri)] = resource
Â  Â Â 
Â  Â  @<span class="hljs-built_in">classmethod</span>
Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">register_instance</span>(<span class="hljs-params">cls, resource:Â <span class="hljs-string">'BaseResource'</span></span>):
Â  Â  Â  Â Â <span class="hljs-string">"""æ‰‹åŠ¨æ³¨å†Œèµ„æºå®ä¾‹"""</span>
Â  Â  Â  Â  uri_str =Â <span class="hljs-built_in">str</span>(resource.uri)
Â  Â  Â  Â  logger.info(<span class="hljs-string">f"æ³¨å†Œèµ„æºå®ä¾‹:Â <span class="hljs-subst">{resource.name}</span>Â (URI:Â <span class="hljs-subst">{uri_str}</span>)"</span>)
Â  Â  Â  Â  cls._resources[uri_str] = resource
Â  Â Â 
Â  Â  @<span class="hljs-built_in">classmethod</span>
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_resource</span>(<span class="hljs-params">cls, uri: AnyUrl</span>) -&gt;Â <span class="hljs-built_in">str</span>:
Â  Â  Â  Â Â <span class="hljs-string">"""è·å–èµ„æºå†…å®¹"""</span>
Â  Â  Â  Â  logger.info(<span class="hljs-string">f"è¯·æ±‚èµ„æº:Â <span class="hljs-subst">{uri}</span>"</span>)
Â  Â  Â  Â  parsed = urlparse(<span class="hljs-built_in">str</span>(uri))
Â  Â  Â  Â  uri_str =Â <span class="hljs-string">f"<span class="hljs-subst">{parsed.scheme}</span>://<span class="hljs-subst">{parsed.netloc}</span>/<span class="hljs-subst">{parsed.path}</span>"</span>
Â  Â  Â  Â  path_parts = parsed.path.strip(<span class="hljs-string">'/'</span>).split(<span class="hljs-string">'/'</span>)
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â path_partsÂ <span class="hljs-keyword">or</span>Â <span class="hljs-keyword">not</span>Â path_parts[<span class="hljs-number">0</span>]:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>Â ValueError(<span class="hljs-string">f"æ— æ•ˆçš„URIæ ¼å¼:Â <span class="hljs-subst">{uri_str}</span>ï¼ŒæœªæŒ‡å®šè¡¨å"</span>)
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-comment"># ä¼˜å…ˆå°è¯•ç²¾ç¡®åŒ¹é…</span>
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â resourceÂ <span class="hljs-keyword">in</span>Â cls._resources.values():
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">str</span>(resource.uri) == uri_str:
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">await</span>Â resource.read_resource(uri)
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-comment"># å°è¯•åç¼€åŒ¹é…</span>
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â resourceÂ <span class="hljs-keyword">in</span>Â cls._resources.values():
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">str</span>(resource.uri).endswith(path_parts[<span class="hljs-number">0</span>]):
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">await</span>Â resource.read_resource(uri)
Â  Â  Â  Â Â 
Â  Â  Â  Â  logger.error(<span class="hljs-string">f"æœªæ‰¾åˆ°èµ„æº:Â <span class="hljs-subst">{uri}</span>ï¼Œå·²æ³¨å†Œèµ„æº:Â <span class="hljs-subst">{[r.uriÂ <span class="hljs-keyword">for</span>Â k, rÂ <span class="hljs-keyword">in</span>Â cls._resources.items()]}</span>"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>Â ValueError(<span class="hljs-string">f"æœªæ³¨å†Œçš„èµ„æº:Â <span class="hljs-subst">{uri}</span>"</span>)
Â  Â Â 
Â  Â  @<span class="hljs-built_in">classmethod</span>
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_all_resources</span>(<span class="hljs-params">cls</span>) -&gt;Â <span class="hljs-type">List</span>[Resource]:
Â  Â  Â  Â Â <span class="hljs-string">"""è·å–æ‰€æœ‰èµ„æºçš„æè¿°"""</span>
Â  Â  Â  Â  result = []
Â  Â  Â  Â Â <span class="hljs-comment"># åˆ›å»ºèµ„æºå‰¯æœ¬é¿å…åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¿®æ”¹åŸå­—å…¸:æ‰«æåº“æ—¶è¿˜ä¼šæ³¨å†Œè¡¨èµ„æº</span>
Â  Â  Â  Â  resources_copy =Â <span class="hljs-built_in">list</span>(cls._resources.values())
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â resourceÂ <span class="hljs-keyword">in</span>Â resources_copy:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  Â  Â  Â  Â  logger.info(<span class="hljs-string">f"è·å–Â <span class="hljs-subst">{resource.name}</span>Â çš„èµ„æºæè¿°"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  descriptions =Â <span class="hljs-keyword">await</span>Â resource.get_resource_descriptions()
Â  Â  Â  Â  Â  Â  Â  Â  result.extend(descriptions)
Â  Â  Â  Â  Â  Â  Â  Â  logger.debug(<span class="hljs-string">f"<span class="hljs-subst">{resource.name}</span>Â æä¾›äº†Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(descriptions)}</span>Â ä¸ªèµ„æºæè¿°"</span>)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â  Â  Â  Â  Â  Â  Â  Â  logger.error(<span class="hljs-string">f"è·å–Â <span class="hljs-subst">{resource.name}</span>Â çš„æè¿°å¤±è´¥:Â <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â result
</code></pre>
<p><strong>å°è£…åçš„èµ„æºåŸºç±»ï¼šä¸»è¦æ˜¯å€ŸåŠ©__init_subclass__æ–¹æ³•è‡ªåŠ¨æ³¨å†Œ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">BaseResource</span>:
Â  Â Â <span class="hljs-string">"""èµ„æºåŸºç±»"""</span>
Â  Â  name:Â <span class="hljs-built_in">str</span>Â =Â <span class="hljs-string">""</span>
Â  Â  description:Â <span class="hljs-built_in">str</span>Â =Â <span class="hljs-string">""</span>
Â  Â  uri: AnyUrl
Â  Â  mimeType:Â <span class="hljs-built_in">str</span>Â =Â <span class="hljs-string">"text/plain"</span>
Â  Â  auto_register:Â <span class="hljs-built_in">bool</span>Â =Â <span class="hljs-literal">True</span>
Â  Â Â 
Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init_subclass__</span>(<span class="hljs-params">cls, **kwargs</span>):
Â  Â  Â  Â Â <span class="hljs-string">"""å­ç±»åˆå§‹åŒ–æ—¶è‡ªåŠ¨æ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨"""</span>
Â  Â  Â  Â Â <span class="hljs-built_in">super</span>().__init_subclass__(**kwargs)
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â cls.auto_registerÂ <span class="hljs-keyword">and</span>Â cls.uriÂ <span class="hljs-keyword">is</span>Â <span class="hljs-keyword">not</span>Â <span class="hljs-literal">None</span>: Â <span class="hljs-comment"># åªæ³¨å†Œæœ‰ uri çš„èµ„æº</span>
Â  Â  Â  Â  Â  Â  ResourceRegistry.register(cls)
Â  Â Â 
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_resource_descriptions</span>(<span class="hljs-params">self</span>) -&gt;Â <span class="hljs-type">List</span>[Resource]:
Â  Â  Â  Â Â <span class="hljs-string">"""è·å–èµ„æºæè¿°ï¼Œå­ç±»å¿…é¡»å®ç°"""</span>
Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>Â NotImplementedError
Â  Â Â 
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">read_resource</span>(<span class="hljs-params">self, uri: AnyUrl</span>) -&gt;Â <span class="hljs-built_in">str</span>:
Â  Â  Â  Â Â <span class="hljs-string">"""è¯»å–èµ„æºå†…å®¹ï¼Œå­ç±»å¿…é¡»å®ç°"""</span>
Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>Â NotImplementedError
</code></pre>
<p><strong>å®ç° MySQL èµ„æºç±»ï¼šå€¼å¾—æ³¨æ„çš„æ˜¯æ­¤å¤„æˆ‘ä»¬åœ¨è®¾è®¡æ—¶è¿«äºä¸Šé¢çš„æœºåˆ¶åˆè®¾è®¡äº†è¡¨èµ„æºç±»TableResource</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">TableResource</span>(<span class="hljs-title class_ inherited__">BaseResource</span>):
Â  Â Â <span class="hljs-string">"""ä»£è¡¨å…·ä½“è¡¨èµ„æºçš„ç±»"""</span>
Â  Â  auto_register:Â <span class="hljs-built_in">bool</span>Â =Â <span class="hljs-literal">False</span>
Â  Â Â 
Â  Â  TABLE_EXISTS_QUERY =Â <span class="hljs-string">"""
Â  Â  Â  Â  SELECT COUNT(*) AS table_exists
Â  Â  Â  Â  FROM information_schema.tables
Â  Â  Â  Â  WHERE table_schema = %s AND table_name = %s
Â  Â  """</span>
Â  Â Â 
Â  Â  COLUMN_METADATA_QUERY =Â <span class="hljs-string">"""
Â  Â  Â  Â  SELECT COLUMN_NAME, DATA_TYPE
Â  Â  Â  Â  FROM information_schema.columns
Â  Â  Â  Â  WHERE table_schema = %s AND table_name = %s
Â  Â  Â  Â  ORDER BY ORDINAL_POSITION
Â  Â  """</span>
Â  Â Â 
Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, db_name:Â <span class="hljs-built_in">str</span>, table_name:Â <span class="hljs-built_in">str</span>, description:Â <span class="hljs-built_in">str</span></span>):
Â  Â  Â  Â Â <span class="hljs-built_in">super</span>().__init__()
Â  Â  Â  Â Â self.db_name = db_name
Â  Â  Â  Â Â self.table_name = table_name
Â  Â  Â  Â Â self.name =Â <span class="hljs-string">f"table:Â <span class="hljs-subst">{table_name}</span>"</span>
Â  Â  Â  Â Â self.uri = AnyUrl(<span class="hljs-string">f"mysql://<span class="hljs-subst">{db_name}</span>/<span class="hljs-subst">{table_name}</span>"</span>)
Â  Â  Â  Â Â self.description = description
Â  Â  Â  Â Â self.mimeType =Â <span class="hljs-string">"text/csv"</span>
Â  Â Â 
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_resource_descriptions</span>(<span class="hljs-params">self</span>) -&gt;Â <span class="hljs-type">List</span>[Resource]:
Â  Â  Â  Â Â <span class="hljs-string">"""è¿”å›æ•°æ®åº“è¡¨èµ„æºçš„æè¿°:å·²è¿”å›"""</span>
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â []
Â  Â Â 
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">read_resource</span>(<span class="hljs-params">self, uri: AnyUrl</span>) -&gt;Â <span class="hljs-built_in">str</span>:
Â  Â  Â  Â Â <span class="hljs-string">"""å®‰å…¨è¯»å–æ•°æ®åº“è¡¨æ•°æ®ä¸ºCSVæ ¼å¼ï¼ˆå¸¦åˆ—ç±»å‹ä¿¡æ¯ï¼‰"""</span>
Â  Â  Â  Â  logger.info(<span class="hljs-string">f"å¼€å§‹è¯»å–èµ„æº:Â <span class="hljs-subst">{uri}</span>"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># å®‰å…¨è§£æè¡¨å</span>
Â  Â  Â  Â  Â  Â  table_name = extract_table_name(uri)
Â  Â  Â  Â  Â  Â  logger.info(<span class="hljs-string">f"å‡†å¤‡æŸ¥è¯¢è¡¨:Â <span class="hljs-subst">{table_name}</span>"</span>)
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># è·å–åˆ—å…ƒæ•°æ®ï¼ˆç”¨äºä¼˜åŒ–CSVç”Ÿæˆï¼‰</span>
Â  Â  Â  Â  Â  Â  column_metadata =Â <span class="hljs-keyword">await</span>Â self.get_table_metadata(table_name)
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â get_current_database_manager().get_connection()Â <span class="hljs-keyword">as</span>Â conn:
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â conn.cursor(aiomysql.DictCursor)Â <span class="hljs-keyword">as</span>Â cursor:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é¿å…SQLæ³¨å…¥</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  safe_query = _build_safe_query(table_name)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â cursor.execute(safe_query)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># ç›´æ¥è·å–åˆ—å</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  columns = [col[<span class="hljs-number">0</span>]Â <span class="hljs-keyword">for</span>Â colÂ <span class="hljs-keyword">in</span>Â cursor.description]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rows =Â <span class="hljs-keyword">await</span>Â cursor.fetchall()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  logger.info(<span class="hljs-string">f"è·å–åˆ°Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(rows)}</span>Â è¡Œæ•°æ®"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># ä½¿ç”¨ä¼˜åŒ–çš„CSVç”Ÿæˆ</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â generate_csv(columns, rows, column_metadata)
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â  Â  Â  Â  Â  Â  logger.error(<span class="hljs-string">f"è¯»å–èµ„æºå¤±è´¥:Â <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>
Â  Â Â 
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_table_metadata</span>(<span class="hljs-params">self, table_name:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-type">List</span>[<span class="hljs-built_in">tuple</span>]:
Â  Â  Â  Â Â <span class="hljs-string">"""è·å–è¡¨åˆ—åå’Œæ•°æ®ç±»å‹"""</span>
Â  Â  Â  Â  db_name = get_current_database_manager().get_current_config()[<span class="hljs-string">"database"</span>]
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â get_current_database_manager().get_connection()Â <span class="hljs-keyword">as</span>Â conn:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â conn.cursor(aiomysql.DictCursor)Â <span class="hljs-keyword">as</span>Â cursor:
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># é¦–å…ˆéªŒè¯è¡¨å­˜åœ¨</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â cursor.execute(self.TABLE_EXISTS_QUERY, (db_name, table_name))
Â  Â  Â  Â  Â  Â  Â  Â  exists =Â <span class="hljs-keyword">await</span>Â cursor.fetchone()
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â existsÂ <span class="hljs-keyword">or</span>Â <span class="hljs-keyword">not</span>Â exists[<span class="hljs-string">'table_exists'</span>]:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>Â ValueError(<span class="hljs-string">f"è¡¨ '<span class="hljs-subst">{table_name}</span>' åœ¨æ•°æ®åº“ '<span class="hljs-subst">{db_name}</span>' ä¸­ä¸å­˜åœ¨"</span>)
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># è·å–åˆ—å…ƒæ•°æ®</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â cursor.execute(self.COLUMN_METADATA_QUERY, (db_name, table_name))
Â  Â  Â  Â  Â  Â  Â  Â  metadata = [(row[<span class="hljs-string">'COLUMN_NAME'</span>], row[<span class="hljs-string">'DATA_TYPE'</span>])Â <span class="hljs-keyword">for</span>Â rowÂ <span class="hljs-keyword">in</span>Â <span class="hljs-keyword">await</span>Â cursor.fetchall()]
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â metadata




<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">MySQLResource</span>(<span class="hljs-title class_ inherited__">BaseResource</span>):
Â  Â Â <span class="hljs-string">"""MySQLæ•°æ®åº“èµ„æºå®ç°"""</span>
Â  Â  name =Â <span class="hljs-string">"MySQLæ•°æ®åº“"</span>
Â  Â  uri = AnyUrl(<span class="hljs-string">f"mysql://localhost/default"</span>)
Â  Â  description =Â <span class="hljs-string">"æä¾›å¯¹MySQLæ•°æ®åº“è¡¨çš„è®¿é—®ä¸æŸ¥è¯¢"</span>
Â  Â  mimeType =Â <span class="hljs-string">"text/csv"</span>
Â  Â  auto_register =Â <span class="hljs-literal">True</span>
Â  Â Â 
Â  Â Â <span class="hljs-comment"># é‡ç”¨è¿™äº›å¸¸é‡æŸ¥è¯¢</span>
Â  Â  TABLE_QUERY =Â <span class="hljs-string">"""
Â  Â  Â  Â  SELECT TABLE_NAME AS table_name,
Â  Â  Â  Â  Â  Â  Â  Â TABLE_COMMENT AS table_comment,
Â  Â  Â  Â  Â  Â  Â  Â TABLE_ROWS AS estimated_rows
Â  Â  Â  Â  FROM information_schema.tables
Â  Â  Â  Â  WHERE table_schema = %s
Â  Â  """</span>
Â  Â Â 
Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
Â  Â  Â  Â Â <span class="hljs-string">"""åˆå§‹åŒ–èµ„æºç®¡ç†"""</span>
Â  Â  Â  Â Â <span class="hljs-built_in">super</span>().__init__()
Â  Â  Â  Â Â self.cache = {} Â <span class="hljs-comment"># æŸ¥è¯¢ç»“æœç¼“å­˜</span>
Â  Â Â 
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_resource_descriptions</span>(<span class="hljs-params">self</span>) -&gt;Â <span class="hljs-type">List</span>[Resource]:
Â  Â  Â  Â Â <span class="hljs-string">"""è·å–æ•°æ®åº“è¡¨èµ„æºæè¿°ï¼ˆå¸¦ç¼“å­˜æœºåˆ¶ï¼‰"""</span>
Â  Â  Â  Â  logger.info(<span class="hljs-string">"è·å–æ•°æ®åº“èµ„æºæè¿°"</span>)
Â  Â  Â  Â Â 
Â  Â  Â  Â  db_manager = get_current_database_manager()
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â db_managerÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â  Â  Â  Â  Â  Â  logger.error(<span class="hljs-string">"æ— æ³•è·å–æ•°æ®åº“ç®¡ç†å™¨ï¼Œä¸Šä¸‹æ–‡æœªè®¾ç½®ï¼Ÿ"</span>)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â []
Â  Â  Â  Â Â 
Â  Â  Â  Â  db_name = db_manager.get_current_config().get(<span class="hljs-string">"database"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â db_name:
Â  Â  Â  Â  Â  Â  logger.error(<span class="hljs-string">"æ•°æ®åº“é…ç½®ä¸­æœªæŒ‡å®šæ•°æ®åº“åç§°"</span>)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â []
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-comment"># ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤æŸ¥è¯¢</span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-string">'table_descriptions'</span>Â <span class="hljs-keyword">in</span>Â self.cache:
Â  Â  Â  Â  Â  Â  logger.debug(<span class="hljs-string">"ä½¿ç”¨ç¼“å­˜çš„è¡¨æè¿°"</span>)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â self.cache[<span class="hljs-string">'table_descriptions'</span>]
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â db_manager.get_connection()Â <span class="hljs-keyword">as</span>Â conn:
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â conn.cursor(aiomysql.DictCursor)Â <span class="hljs-keyword">as</span>Â cursor:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â cursor.execute(self.TABLE_QUERY, (db_name,))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tables =Â <span class="hljs-keyword">await</span>Â cursor.fetchall()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  logger.info(<span class="hljs-string">f"å‘ç°Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tables)}</span>Â ä¸ªæ•°æ®åº“è¡¨"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resources = []
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â tableÂ <span class="hljs-keyword">in</span>Â tables:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  table_name = table[<span class="hljs-string">'table_name'</span>]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æ·»åŠ è¡¨è¡Œæ•°ç»Ÿè®¡</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  description = table[<span class="hljs-string">'table_comment'</span>]Â <span class="hljs-keyword">or</span>Â <span class="hljs-string">f"<span class="hljs-subst">{table_name}</span>Â è¡¨"</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â table[<span class="hljs-string">'estimated_rows'</span>]:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  description +=Â <span class="hljs-string">f" (~<span class="hljs-subst">{table[<span class="hljs-string">'estimated_rows'</span>]}</span>è¡Œ)"</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># åˆ›å»ºè¡¨èµ„æº</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  table_resource = TableResource(db_name, table_name, description)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æ‰‹åŠ¨æ³¨å†Œè¡¨èµ„æºå®ä¾‹</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ResourceRegistry.register_instance(table_resource)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># åˆ›å»ºèµ„æºæè¿°å¯¹è±¡</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resource_desc = Resource(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  uri=table_resource.uri,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name=table_resource.name,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mimeType=table_resource.mimeType,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  description=table_resource.description
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resources.append(resource_desc)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># ç¼“å­˜ç»“æœ</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â self.cache[<span class="hljs-string">'table_descriptions'</span>] = resources
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  logger.info(<span class="hljs-string">f"åˆ›å»ºäº†Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(resources)}</span>Â ä¸ªè¡¨èµ„æºæè¿°"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â resources
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â  Â  Â  Â  Â  Â  logger.error(<span class="hljs-string">f"è·å–èµ„æºæè¿°å¤±è´¥:Â <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â []
Â  Â Â 
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">read_resource</span>(<span class="hljs-params">self, uri: AnyUrl</span>) -&gt;Â <span class="hljs-built_in">str</span>:
Â  Â  Â  Â Â <span class="hljs-string">"""è¯»å–æ ¹èµ„æºå†…å®¹ - è¿”å›æ•°æ®åº“ä¿¡æ¯"""</span>
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â json.dumps({
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"name"</span>:Â self.name,
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"uri"</span>:Â self.uri,
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"description"</span>:Â self.description,
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"type"</span>:Â <span class="hljs-string">"database_root"</span>
Â  Â  Â  Â  })
</code></pre>
<p>æƒ³å®ç°å…¶ä»–èµ„æºï¼Œå°±ç¼–å†™å¯¹åº”çš„è„šæœ¬ï¼Œç„¶åå°†åŒ…åŠ å…¥åˆ°å¯¹åº”çš„__init__.pyè„šæœ¬ä¸­ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">from</span>Â <span class="hljs-selector-class">.db_resource</span>Â importÂ MySQLResource,Â TableResource


__all__ = <span class="hljs-selector-attr">[Â  Â Â <span class="hljs-string">"MySQLResource"</span>,Â  Â Â <span class="hljs-string">"TableResource"</span>,]</span>
</code></pre>
<p>è¿™æ ·ä»£ç å…·æœ‰è¾ƒé«˜å¯æ‰©å±•æ€§ï¼Œç»„ç»‡ç»“æ„ä¹Ÿå¾ˆæ¸…æ™°ã€‚å½“ç„¶ï¼Œä¹Ÿä¼šæœ‰å…¶ä»–æ›´å¥½çš„å®ç°æ–¹å¼ã€‚</p>
<p><strong>æ•ˆæœå±•ç¤º</strong></p>
<p>MCP Server ä¸»è¦æ˜¯é€šè¿‡å·¥å…·æš´éœ²æ•°æ®ç»™LLMsï¼Œæ•…åŸºäºä¸Šè¿°çš„è®¾è®¡æ€è·¯ï¼Œå®ç°èµ·æ¥ç›¸å¯¹ç®€å•ä¸”ä¸“ä¸€ï¼Œä¸»è¦å°±æ˜¯å®ç°å·¥å…·æ‰€å¯¹åº”çš„ SQL è¯­å¥ç¼–å†™å’Œå¯¹åº”çš„æç¤ºè¯å³å¯ï¼Œé‰´äºç¯‡å¹…å’Œä»£ç é‡ï¼Œæ­¤å¤„ä¸å†å±•ç¤ºæºç ï¼Œä»…æä¾›å†å²æµ‹è¯•æ•ˆæœå›¾ã€‚</p>
<p><strong>æŸ¥è¯¢è¡¨ä¸­æ•°æ®</strong></p>
<p>åœ¨ Cline ä¸­é…ç½®å¥½é˜¿é‡Œé€šä¹‰åƒé—®å¤§æ¨¡å‹ API-KEY åï¼Œè¿›è¡Œæé—®ï¼šÂ </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82b11e5bc2c7454b82729de5c276b7d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=c6Hgf0s9SC0M2FC%2BZ1oc4naFxzs%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>âš ï¸ï¼šé˜¿é‡Œé€šä¹‰åƒé—®å¤§æ¨¡å‹é…ç½®å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fmodel-studio%2Fcline" target="_blank" title="https://help.aliyun.com/zh/model-studio/cline" ref="nofollow noopener noreferrer">help.aliyun.com/zh/model-stâ€¦</a></p>
<p>éšåï¼Œå¤§æ¨¡å‹å¼€å§‹è§£ææ‰§è¡Œä»»åŠ¡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23489474801042e5988413b59ef3ec08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=Gqh9f%2By5j2mjKnT4RblRt7rukaQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å‘ç°è§£æé”™äº†ï¼Œå¼€å§‹è‡ªåŠ¨çŸ«æ­£ï¼šÂ </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b50aee3b8af426990c420eaed7fe63a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=oCSNDPEUdOBsHAikBZydqm8gNdQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>OKï¼Œç°åœ¨çœ‹èµ·æ¥å°±å¯¹å¤šäº†ï¼Œå¼€å§‹æ‰§è¡Œå·¥å…·è¿è¡ŒæŒ‡ä»¤å¹¶è¿”å›ç»“æœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a30e51011094d87933fa45a04439b88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=fJeROGH%2F7ZK7EWsisdHcLTfLUU4%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æœ€ç»ˆæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61ad13ea574344aba8bc40dd57c26f08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=k8sIx3h8zjwQ7hxhaoLEZ4sGU88%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>å…¶ä»–çš„æ¯”å¦‚ï¼šæŸ¥è¯¢æŸè¡¨ä¸­å‘Šè­¦ä¿¡æ¯ã€‚æ­¤å¤„ç»™å‡ºäº†æ˜ç¡®çš„åº“è¡¨ä¿¡æ¯ï¼Œå›ç­”çš„å°±å¾ˆç²¾å‡†ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7713b0a8cfc94bb7938dc5917e85c9b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=KrQg3AfNZkd8eNSB4sQtVetaOvo%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æ…¢SQLä¼˜åŒ–</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb4164be51a7496891a351ff091b844e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=4TUEajo1PYSTiTb%2BNl2KpHnigpA%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å¤§æ¨¡å‹åœ¨æ‰§è¡Œä¸€äº›å·¥å…·ä¹‹åï¼Œç»™å‡ºäº†å›ç­”ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1fbb3b0cef84d83a63f9635591cf56c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=%2FzcZB7jnSQhwZysnreVp66cSjnc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å¹¶æœ€ç»ˆç»™å‡ºäº†å¦‚ä¸‹é¢„æœŸæ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d63453dbb4324438abe4f5aa7dca1e92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=UtPdSA7KLY%2B1Z63L00SQ8r32cC4%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>é«˜å±æ“ä½œéªŒè¯</strong></p>
<p>åœ¨æ‰§è¡Œé«˜å± SQL è¯­å¥å‰ï¼Œä¼šæ‹¦æˆªå¹¶ä½œè§£æï¼Œåˆ¤æ–­æ˜¯å¦ä¸é¢„å…ˆå…è®¸çš„æ“ä½œä¸€è‡´ï¼Œä¸ä¸€è‡´åˆ™ä¸æ”¾è¡Œï¼Œæ¨¡å‹æ— æ³•æ“ä½œæ•°æ®åº“ï¼ŒæŠ¥é”™ç»ˆæ­¢ä»»åŠ¡ã€‚<strong>ç›®å‰æƒé™é™å®šä¸ºæŸ¥è¯¢æ“ä½œ DQL</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7ddbb08c32c416f977c3142833563da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=fLUSeumR2B6Sml5uzJfezzd7LBk%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å½“æƒ³æ›´æ–°è¡¨ä¸­æ•°æ®æ—¶ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16b9b5ddb3ad47f49d346f17057bebea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=jGDuPa%2F5Kat2qP%2FWn4uKnrSAhl8%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d535c51b76304dc5a652278af834f9aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=Uh5uvUicf4%2B4ToQoMI2P%2Bvic%2Fek%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>è‡ªå»ºå®¢æˆ·ç«¯æé—®</strong></p>
<p>å®ç°è‡ªå®šä¹‰å®¢æˆ·ç«¯æ—¶å¯è°ƒç”¨æœåŠ¡ç«¯æç¤ºè¯è¿›è¡Œä»»åŠ¡ç¼–æ’ï¼Œæé«˜å·¥å…·è°ƒç”¨å‡†ç¡®åº¦å’Œè§„é¿ä¸€è¿ä¸²çš„å®¢æˆ·ç«¯continueæ“ä½œï¼Œé€šè¿‡è¯·æ±‚å®ç°çš„FastAPIæ¥å£å¯ç›´æ¥è¿è¡Œå‡ºç»“æœã€‚</p>
<pre><code class="hljs">å½“å‰æ•°æ®åº“åŸºæœ¬ä¿¡æ¯ï¼Œä»¥åŠåŒ…å«å“ªäº›è¡¨ï¼ŒåŒæ—¶ç”¨æˆ·è¡¨æœ‰å“ªäº›å­—æ®µã€‚
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d798e78e854a4594b455b7bd1166c4e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=pfvotBHzn44Jl8EsAMNyD5QeD6w%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6f043da60d74dfc9f33127198c09f53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=yy%2F7JITZaN3V2%2FX8q89I17NZTRM%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>çº¿ä¸Šéƒ¨ç½²æµ‹è¯•æ•ˆæœ</strong></p>
<p>æˆ‘ä»¬åœ¨ MCP åº”ç”¨å¸‚åœºä¸­ä¸Šæ¶äº†ä¸€ä¸ªç‰ˆæœ¬çš„ DW-DBA-MCP æœåŠ¡ï¼Œåœ¨ VSCode ä¸­å®‰è£… EP-Copilot æ’ä»¶å³å¯å®‰è£…ä½¿ç”¨è¯¥æœåŠ¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c9791bcc29d45a6abc5c91807fe470d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=jIjYiw6O4WnADzXic%2B7abAG%2F%2FWE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ç„¶ååœ¨èŠå¤©ç•Œé¢ä¸­é€‰æ‹©agentæ¨¡å¼å³å¯è®© LLMs é€‰æ‹©åˆé€‚çš„å·¥å…·å¤„ç†æ‚¨çš„æé—®ï¼ˆæ³¨æ„ä¸ºæœåŠ¡é…ç½®ç¯å¢ƒå˜é‡ï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e08c232d8d24503950d0c2a62c2a294~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=wdkJYOzj9BjdanrAPmDAHgpMEQY%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/972c44c730ba4100bb96417007464ae4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875349&amp;x-signature=Q4sCax34ZrykWl%2FjHBp3vwfGYd0%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h2 data-id="heading-12">äº”ã€æœªæ¥è§„åˆ’</h2>
<p>åœ¨<strong>AI4DB</strong>ï¼ˆAI for Databaseï¼‰é¢†åŸŸï¼ŒAI æŠ€æœ¯æ­£é¢ è¦†ä¼ ç»Ÿæ•°æ®åº“çš„è¿ç»´ä¸è°ƒä¼˜é€»è¾‘ï¼Œæ¨åŠ¨å…¶ä»ä¾èµ–äººå·¥ä»‹å…¥çš„è¢«åŠ¨å“åº”æ¨¡å¼ï¼Œå…¨é¢è¿ˆå‘å¯è‡ªä¸»è¯Šæ–­ã€æ™ºèƒ½è°ƒä¼˜ã€æ•…éšœè‡ªæ„ˆçš„å…¨é“¾è·¯æ™ºèƒ½è‡ªæ²»æ–°é˜¶æ®µï¼Œå¤§å¹…é™ä½è¿ç»´æˆæœ¬çš„åŒæ—¶æå‡äº†æ•°æ®åº“ç³»ç»Ÿçš„ç¨³å®šæ€§ä¸è¿è¡Œæ•ˆç‡ã€‚</p>
<p>è€Œåœ¨<strong>DB4AI</strong>ï¼ˆDatabase for AIï¼‰æ–¹å‘ï¼Œé€‚é… AI åœºæ™¯çš„æ•°æ®åº“è§£å†³æ–¹æ¡ˆå·²å®ç°å…³é”®çªç ´ï¼šä¸ä»…å…·å¤‡é«˜æ€§èƒ½å‘é‡æ£€ç´¢ã€å¤æ‚åˆ†æè®¡ç®—åŠå¼ºäº‹åŠ¡ä¸€è‡´æ€§ç­‰æ ¸å¿ƒèƒ½åŠ›ï¼Œè¿˜èƒ½åŸç”Ÿæ”¯æŒæ–‡æœ¬ã€å›¾åƒç­‰å¤šæ¨¡æ€æ•°æ®çš„ä¸€ä½“åŒ–å­˜å‚¨ä¸ç®¡ç†ï¼Œä¸º AI æ¨¡å‹è®­ç»ƒä¸æ¨ç†æä¾›äº†é«˜æ•ˆã€å¯é çš„æ•°æ®åŸºåº§ã€‚</p>
<p>åœ¨æŠ€æœ¯æ ¼å±€å‰§å˜çš„èƒŒæ™¯ä¸‹ï¼ŒDBA çš„è§’è‰²å®šä½ä¹Ÿè¿æ¥é‡æ„ã€‚ä¼ ç»Ÿæ„ä¹‰ä¸Šï¼ŒDBA å³ Database Administratorï¼ˆæ•°æ®åº“ç®¡ç†å‘˜ï¼‰ï¼Œæ ¸å¿ƒèšç„¦äºæ•°æ®åº“çš„æ—¥å¸¸è¿ç»´ä¸æŠ€æœ¯ä¿éšœï¼›ä½†éšç€ AI æŠ€æœ¯çš„äº•å–·å¼å‘å±•ï¼ŒDBA å·²çªç ´å•ä¸€è¿ç»´å±æ€§ï¼Œå¯è¿›é˜¶ä¸º<strong>Data Business Architectï¼ˆæ•°æ®ä¸šåŠ¡æ¶æ„å¸ˆ</strong>ï¼‰â€”â€” å€ŸåŠ© AI å·¥å…·ä¸èƒ½åŠ›ï¼ŒDBA èƒ½ä»æµ·é‡æ•°æ®ä¸­æŒ–æ˜æ½œè—ä»·å€¼ï¼Œæ‰“é€šæ•°æ®ä¸ä¸šåŠ¡çš„é“¾è·¯ï¼Œå®ç°æŠ€æœ¯èƒ½åŠ›å‘ä¸šåŠ¡ä»·å€¼çš„è½¬åŒ–ã€‚</p>
<p>é¢å‘æœªæ¥ï¼ŒDBA å›¢é˜Ÿå°†æŒç»­å¼ºåŒ–ä¸¤å¤§æ ¸å¿ƒèƒ½åŠ›ï¼šä¸€æ˜¯ç­‘ç‰¢æ•°æ®å®‰å…¨é˜²çº¿ï¼Œæ„å»ºå…¨å‘¨æœŸæ•°æ®å®‰å…¨æ²»ç†ä½“ç³»ï¼›äºŒæ˜¯å¤¯å®å·¥ç¨‹åŒ–è½åœ°èƒ½åŠ›ï¼Œæ¨åŠ¨æ™ºèƒ½æŠ€æœ¯ä¸ä¸šåŠ¡åœºæ™¯çš„æ·±åº¦èåˆã€‚ä»¥æ­¤ä¸ºåŸºç¡€ï¼Œå……åˆ†é‡Šæ”¾ DBA åœ¨æ•°æ®åº“ â€œæ™ºèƒ½è‡ªæ²»è¿ç»´â€ ä¸ â€œå…¨åŸŸæ•°æ®ä»·å€¼æŒ–æ˜â€ é¢†åŸŸçš„åŒé‡ä»·å€¼ï¼Œä¸ºä¼ä¸šæ•°å­—åŒ–ä¸æ™ºèƒ½åŒ–è½¬å‹æä¾›åšå®çš„æ•°æ®æ”¯æ’‘ã€‚</p>
<h2 data-id="heading-13">å…­ã€èµ„æºæ¨è</h2>

























<table><thead><tr><th><strong>èµ„æº</strong></th><th><strong>å†…å®¹</strong></th></tr></thead><tbody><tr><td><strong>MCP Server ç¤¾åŒºä»“åº“æ¨è</strong></td><td>-   <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmodelcontextprotocol%2Fservers" target="_blank" title="https://github.com/modelcontextprotocol/servers" ref="nofollow noopener noreferrer">github.com/modelcontexâ€¦</a>  <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpunkpeye%2Fawesome-mcp-servers" target="_blank" title="https://github.com/punkpeye/awesome-mcp-servers" ref="nofollow noopener noreferrer">github.com/punkpeye/awâ€¦</a></td></tr><tr><td><strong>å½“å‰æ”¯æŒ MCP åè®®çš„å®¢æˆ·ç«¯åº”ç”¨</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fclients" target="_blank" title="https://modelcontextprotocol.io/clients" ref="nofollow noopener noreferrer">modelcontextprotocol.io/clients</a></td></tr><tr><td><strong>MCP å¸‚åœº</strong></td><td>-   <strong>ModelScopeï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelscope.cn%2Fmcp" target="_blank" title="https://modelscope.cn/mcp" ref="nofollow noopener noreferrer">modelscope.cn/mcp</a></td></tr><tr><td><strong>ç™¾ç‚¼ MCP å¸‚åœºï¼š</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2F%3Ftab%3Dmcp%23%2Fmcp-market" target="_blank" title="https://bailian.console.aliyun.com/?tab=mcp#/mcp-market" ref="nofollow noopener noreferrer">bailian.console.aliyun.com/?tab=mcp#/mâ€¦</a></td></tr></tbody></table>
<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<p>[1] ä¸€æ–‡å¸¦ä½  "çœ‹è§" MCP çš„è¿‡ç¨‹ï¼Œå½»åº•ç†è§£ MCP çš„æ¦‚å¿µï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.aliyun.com%2Farticle%2F1665090%25EF%25BC%2589" target="_blank" title="https://developer.aliyun.com/article/1665090%EF%BC%89" ref="nofollow noopener noreferrer">developer.aliyun.com/article/166â€¦</a></p>
<p>[2] 100è¡Œä»£ç è®²é€MCPåŸç†ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fai.programnotes.cn%2Fp%2F100%25E8%25A1%258C%25E4%25BB%25A3%25E7%25A0%2581%25E8%25AE%25B2%25E9%2580%258Fmcp%25E5%258E%259F%25E7%2590%2586%2F%25EF%25BC%2589" target="_blank" title="https://ai.programnotes.cn/p/100%E8%A1%8C%E4%BB%A3%E7%A0%81%E8%AE%B2%E9%80%8Fmcp%E5%8E%9F%E7%90%86/%EF%BC%89" ref="nofollow noopener noreferrer">ai.programnotes.cn/p/100%E8%A1â€¦</a></p>
<h3 data-id="heading-14">å¾€æœŸå›é¡¾</h3>
<p>1.Â é¡¹ç›®æ€§èƒ½ä¼˜åŒ–å®è·µï¼šæ·±å…¥FMPç®—æ³•åŸç†æ¢ç´¢ï½œå¾—ç‰©æŠ€æœ¯</p>
<p>2.Â Dragonboatç»Ÿä¸€å­˜å‚¨LogDBå®ç°åˆ†æï½œå¾—ç‰©æŠ€æœ¯</p>
<p>3.Â ä»æ•°å­—åˆ°ç‰ˆé¢ï¼šå¾—ç‰©æ•°æ®äº§å“é‡Œæ•°å­—æ ¼å¼åŒ–çš„é‚£äº›äº‹</p>
<p>4.Â ä¸€æ–‡è§£æå¾—ç‰©è‡ªå»º Redis æœ€æ–°æŠ€æœ¯æ¼”è¿›</p>
<p>5.Â Golang HTTPè¯·æ±‚è¶…æ—¶ä¸é‡è¯•ï¼šæ„å»ºé«˜å¯é ç½‘ç»œè¯·æ±‚ï½œå¾—ç‰©æŠ€æœ¯</p>
<h3 data-id="heading-15">æ–‡ /å°‘æ™–ã€æ´ªå…†</h3>
<p>å…³æ³¨å¾—ç‰©æŠ€æœ¯ï¼Œæ¯å‘¨æ›´æ–°æŠ€æœ¯å¹²è´§</p>
<p>è¦æ˜¯è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿è¯„è®ºè½¬å‘ç‚¹èµï½</p>
<p>æœªç»å¾—ç‰©æŠ€æœ¯è®¸å¯ä¸¥ç¦è½¬è½½ï¼Œå¦åˆ™ä¾æ³•è¿½ç©¶æ³•å¾‹è´£ä»»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çŸ¥è¯†åº“åˆ›ä¸šå¤ç›˜ï¼šä»é—­æºåˆ°å¼€æºï¼Œè¿™3ä¸ªæ•™è®­ä»·å€¼ç™¾ä¸‡]]></title>    <link>https://juejin.cn/post/7581872532363755529</link>    <guid>https://juejin.cn/post/7581872532363755529</guid>    <pubDate>2025-12-10T10:33:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581872532363755529" data-draft-id="7582041304654512174" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çŸ¥è¯†åº“åˆ›ä¸šå¤ç›˜ï¼šä»é—­æºåˆ°å¼€æºï¼Œè¿™3ä¸ªæ•™è®­ä»·å€¼ç™¾ä¸‡"/> <meta itemprop="keywords" content="JavaScript,GitHub,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T10:33:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾å°å¤•"/> <meta itemprop="url" content="https://juejin.cn/user/3808363978429613"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çŸ¥è¯†åº“åˆ›ä¸šå¤ç›˜ï¼šä»é—­æºåˆ°å¼€æºï¼Œè¿™3ä¸ªæ•™è®­ä»·å€¼ç™¾ä¸‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363978429613/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾å°å¤•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T10:33:48.000Z" title="Wed Dec 10 2025 10:33:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>"æŠŠçŸ¥è¯†åº“ä»£ç å…¬å¼€åˆ° github ä¸Šçš„é‚£å¤©ï¼Œæˆ‘å¤±çœ åˆ°å‡Œæ™¨å››ç‚¹ã€‚</p>
<p>ä¸æ˜¯å› ä¸ºæ¿€åŠ¨ï¼Œæ˜¯å®³æ€•â€”â€”å®³æ€•ä¸€å¹´å¿ƒè¡€è¢«ä¸€é”®å¤åˆ¶ï¼Œå®³æ€•å®¢æˆ·éƒ¨ç½²äº†å°±æ²¡æœ‰é‡‡è´­çš„æ¬²æœ›äº†ã€‚</p>
<p>120 å¤©åå†å›å¤´çœ‹ï¼Œæ­£æ˜¯é‚£æ¬¡'è£¸å¥”'ï¼Œæ‰æ•‘æ´»äº†å…¬å¸ï¼Œä¹Ÿé‡å¡‘äº†æˆ‘å¯¹å•†ä¸šæŠ¤åŸæ²³çš„æ‰€æœ‰è®¤çŸ¥ã€‚</p>
<p>ä»Šå¤©æŠŠå†³ç­–å‰åæœ€ç—›çš„ 3 ä¸ªæ•™è®­æå‡ºæ¥ï¼Œèƒ½å¸®ä½ çœä¸‹è‡³å°‘ 100 ä¸‡è¯•é”™æˆæœ¬ã€‚"</p>
</blockquote>
<p>å…³æ³¨æˆ‘çš„æœ‹å‹ä¹Ÿè®¸äº†è§£ï¼Œæˆ‘ä»¬24å¹´å¹´åˆï¼Œä¸Šçº¿äº†ä¸€æ¬¾çŸ¥è¯†åº“äº§å“â€”â€”æ©™å­è½»æ–‡æ¡£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9710aa201d0e482792e40d2f1df3cf4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765967628&amp;x-signature=poXiskH2ppEm70OaAKQLGVsJmds%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>githubåœ°å€ï¼š</p>
<p>æˆ‘ä¸€ç›´è§‰å¾—ã€Œåœ¨çº¿åŠå…¬å·¥å…·ã€æ˜¯ä¸ªçŸ›ç›¾ä½“ï¼šè¦ä¹ˆåŠŸèƒ½å…¨ä½†æ”¶è´¹è´µï¼ˆæ¯”å¦‚æŸé’‰ã€æŸé£ï¼‰ï¼Œè¦ä¹ˆå…è´¹ä½†åŠŸèƒ½é›¶æ•£ï¼ˆæ¯”å¦‚å•ç‹¬çš„åœ¨çº¿æ–‡æ¡£ã€ç‹¬ç«‹çš„æ€ç»´å¯¼å›¾å·¥å…·ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬å†³å®šèŠ±åŠå¹´æ—¶é—´æ‰“é€ Â <strong>OfficeHub</strong>Â è¿™ä¸ªé¡¹ç›®ï¼ŒæŠŠã€Œæ–‡æ¡£ + è¡¨æ ¼ + æ€ç»´å¯¼å›¾ + AI + çŸ¥è¯†åº“ã€å®Œç¾çš„èåˆæˆä¸€ä¸ªåŠå…¬æ™ºèƒ½ä½“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d7de8d946214c1b903d6f30f53495cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765967628&amp;x-signature=u5ow0Nttm4T1JZfHsAW94OIRcJU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>æ ¸å¿ƒå®šä½ï¼šåŸºäº Web çš„å¼€æºåœ¨çº¿åŠå…¬åä½œå¹³å°ï¼Œé›†æˆæ–‡æ¡£ç¼–è¾‘ã€æ€ç»´å¯¼å›¾ã€ç”µå­è¡¨æ ¼ã€AI åˆ›ä½œã€æ¨¡æ¿ç®¡ç†å’ŒçŸ¥è¯†åº“åŠŸèƒ½ã€‚</strong> <strong>ç®€å•è¯´ï¼ŒOfficeHubÂ æƒ³åšçš„æ˜¯ã€ŒåŠå…¬å·¥å…·ç•Œçš„ç‘å£«å†›åˆ€ã€ï¼šä¸ç”¨åˆ‡æ¢å¤šä¸ªå¹³å°ï¼Œä¸€ä¸ªç³»ç»Ÿæå®šä»å†…å®¹åˆ›ä½œåˆ°çŸ¥è¯†æ²‰æ·€çš„å…¨æµç¨‹ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/627e4a066e2c4971825cd9841f87e489~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765967628&amp;x-signature=TZVDKeYXyGgz98oVREksTS%2B1iMo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½†æ˜¯ä¸Šçº¿è¿è¥äº†3ä¸ªæœˆä¹‹åï¼Œè™½ç„¶ç§¯ç´¯äº†ä¸Šåƒçš„ç”¨æˆ·ä½¿ç”¨ï¼Œä½†æ˜¯ä¹Ÿå‘ç°äº†å¾ˆå¤šå•†ä¸šä¸Šçš„é—®é¢˜ã€‚æ¥ä¸‹æ¥æˆ‘ä¼šç³»ç»Ÿå¤ç›˜ä¸€ä¸‹ï¼Œæ©™å­è½»æ–‡æ¡£åˆ›ä¸šçš„ä¸€äº›ç»éªŒå’Œæ•™è®­ã€‚</p>
<h2 data-id="heading-0">01 æ•™è®­ä¸€ï¼šæŠŠ"é—­æº"å½“æŠ¤åŸæ²³ï¼Œå…¶å®æ˜¯ç»™è‡ªå·±æŒ–åŸ</h2>
<h3 data-id="heading-1">1. è‡ªå—¨å¼å£å’</h3>
<ul>
<li>æˆ‘ä»¬æ›¾èŠ± 2 ä¸ªæœˆè‡ªç ”ã€Œæ–‡æ¡£æ­å»ºå¼•æ“ã€ï¼Œä½“éªŒç±»æ¯” Notionï¼ŒPPT é‡Œå†™æ»¡"æŠ€æœ¯å£å’"ã€‚</li>
<li>é—­æº 6 ä¸ªæœˆï¼ŒGitHub åªæœ‰ 12 ä¸ª starï¼Œå…¶ä¸­ 3 ä¸ªè¿˜æ˜¯å›¢é˜Ÿæˆå‘˜å°å·ã€‚</li>
</ul>
<h3 data-id="heading-2">2. å®¢æˆ·ç”¨è„šæŠ•ç¥¨</h3>
<ul>
<li>ä¼ä¸šç‰ˆå®¢å•ä»· 3 ä¸‡ï¼Œæˆäº¤å‘¨æœŸ 60 å¤©ï¼Œæˆ‘å¤©å¤©è¢«å®¢æˆ·é—®ï¼š"æœ‰æ²¡æœ‰ APIï¼Ÿèƒ½ä¸èƒ½äºŒå¼€ï¼Ÿ"</li>
<li>ä¸€æ¬¡ POCï¼Œå®¢æˆ· IT æ€»ç›‘ç›´æ¥ç”©å‡ºé£ä¹¦çŸ¥è¯†åº“ç»„ä»¶ï¼š"ä½ ä»¬ä¸å¼€æ”¾ï¼Œæˆ‘å°±ä¸ä¹°ã€‚"</li>
</ul>
<h3 data-id="heading-3">3. è‡´å‘½ç¬é—´</h3>
<p>å»å¹´ 9 æœˆï¼Œè´¦ä¸Šç°é‡‘åªå‰© 2 ä¸ªæœˆï¼Œä¸€ä½ä¹Ÿåœ¨åˆ›ä¸šçš„æœ‹å‹é—®æˆ‘ï¼š</p>
<blockquote>
<p>"å¦‚æœ Notion æ˜å¤©å¼€æºï¼Œä½ ä»¬è¿˜å‰©ä»€ä¹ˆï¼Ÿ" æˆ‘ç­”ä¸ä¸Šæ¥ï¼Œé‚£ä¸€åˆ»æˆ‘çŸ¥é“ï¼šé—­æºä¸æ˜¯å¢™ï¼Œæ˜¯ç‰¢ç¬¼ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">02 æ•™è®­äºŒï¼šå¼€æºä¸æ˜¯"åšæ…ˆå–„"ï¼Œæ˜¯"æ”¾é±¼é¥µ"</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22a44e91fc154610a38690d58bf3ecd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765967628&amp;x-signature=NgKxzcJEcsWSVtfaJ1ieY%2BkzqQU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-5">ä¸Šé¢æ˜¯æˆ‘ä»¬å¼€æºäº†ç¼–è¯‘ç‰ˆä¹‹åçš„Â githubÂ æˆªå›¾ã€‚</h2>
<h3 data-id="heading-6">1. 120 å¤©æ•°æ®å¯¹æ¯”</h3>

























<table><thead><tr><th align="left">æŒ‡æ ‡</th><th align="left">é—­æºæœ«æœŸ</th><th align="left">å¼€æº +120 å¤©</th></tr></thead><tbody><tr><td align="left">æ–°å¢çº¿ç´¢</td><td align="left">68 æ¡</td><td align="left">300 æ¡</td></tr><tr><td align="left">ä¼ä¸šç‰ˆæ¼”ç¤º</td><td align="left">1-3 æ¬¡/æœˆ</td><td align="left">10 æ¬¡/æœˆ</td></tr><tr><td align="left"/><td align="left"/><td align="left"/></tr></tbody></table>
<h3 data-id="heading-7">2. é±¼é¥µé…æ–¹</h3>
<p>æˆ‘ä»¬æŠŠçŸ¥è¯†åº“ç¼–è¯‘ç‰ˆä»£ç å¼€æºäº†ï¼Œè®©ç”¨æˆ·å¯ä»¥ç›´æ¥æœ¬åœ°å®‰è£…å’Œéƒ¨ç½²ï¼Œä¿è¯æ•°æ®çš„ç»å¯¹å®‰å…¨ï¼ŒåŒæ—¶è¿˜èƒ½åœ¨æœ¬åœ°ç¯å¢ƒä½“éªŒï¼Œæµ‹è¯•ã€‚</p>
<ul>
<li><strong>Apache æ¨¡å—</strong>Â â†’ å®¡è®¡æ—¥å¿—ã€åˆè§„ï¼Œä¼ä¸šåˆšéœ€ï¼›</li>
<li><strong>äº‘åŸç”Ÿæ’ä»¶</strong>Â â†’ åªç»™äºŒè¿›åˆ¶ï¼Œè®¢é˜…è§£é”ã€‚</li>
</ul>
<blockquote>
<p>å¼€å‘è€…çˆ½äº†ï¼Œä¼ä¸šæ…Œäº†ï¼Œæˆ‘ä»¬ç¬‘äº†ã€‚å¼€æºç¬¬ 7 å¤©ï¼Œä¸€å®¶å¤´éƒ¨åˆ¸å•†ä¸»åŠ¨çº¦æ¼”ç¤ºï¼š"æˆ‘ä»¬å‘ç°æœ¬åœ°ä½“éªŒä¸é”™ï¼Œæƒ³äºŒæ¬¡å¼€å‘ï¼Œä¹°å•†ä¸šæºç æˆæƒå¤šå°‘é’±ï¼Ÿ"</p>
</blockquote>
<h3 data-id="heading-8">è¿™ä¸ªæ—¶å€™æˆ‘æ‰å‘ç°ï¼Œè®©å®¢æˆ·èƒ½ç”¨èµ·æ¥ï¼Œæ¯”è¯´äº§å“äº®ç‚¹è¯´1ä¸‡ééƒ½æœ‰ç”¨ã€‚</h3>
<p>è™½ç„¶å¼€æºåï¼Œå¾ˆå¤šæ²¡æœ‰äºŒæ¬¡å¼€å‘éœ€æ±‚çš„ä¼ä¸šï¼Œç›´æ¥ç”¨æˆ‘ä»¬çš„æºç éƒ¨ç½²åˆ°è‡ªå·±æœåŠ¡å™¨ä¸Šä½œä¸ºç§æœ‰çŸ¥è¯†åº“ä½¿ç”¨ï¼Œä½†æ˜¯è¿™é—´æ¥çš„æé«˜äº†æˆ‘ä»¬äº§å“çš„å½±å“åŠ›ï¼Œè¿›è€Œå¸¦æ¥äº†çœŸæ­£æœ‰äºŒæ¬¡å¼€å‘éœ€æ±‚çš„æ½œåœ¨å®¢æˆ·ã€‚</p>
<h2 data-id="heading-9">03 æ•™è®­ä¸‰ï¼šå¼€æºèŠ‚å¥é”™äº†ï¼ŒåŒæ ·ä¼šæ­»</h2>
<h3 data-id="heading-10">1. ä¸€æ­¥é”™ï¼Œå…¨ç›˜è¾“</h3>
<p>åŒæœŸå‹å•† B ç›´æ¥æŠŠ 100% ä»£ç  GPL å¼€æºï¼Œç»“æœï¼š</p>
<ul>
<li>ä¼ä¸šå®¢æˆ·æ‹…å¿ƒ"è¢«ä¼ æŸ“"ï¼Œä¸æ•¢ç”¨ï¼›</li>
<li>ç¤¾åŒºå¼€å‘è€…å‘ç°æ²¡"é«˜çº§åŠŸèƒ½"ï¼Œstar æ•°æš´æ¶¨å´æ— äººç»­è´¹ï¼›</li>
<li>3 ä¸ªæœˆåèµ„é‡‘é“¾æ–­è£‚ï¼Œæ ¸å¿ƒå›¢é˜Ÿè¢«å¤§å‚æ‰“åŒ…æŒ–èµ°ã€‚</li>
</ul>
<h3 data-id="heading-11">2. ä¸‰æŠŠå°ºå­ï¼Œå†³å®š"å…ˆå¼€å“ªå—"</h3>

























<table><thead><tr><th align="left">å°ºå­</th><th align="left">å…ˆå¼€æº</th><th align="left">åé—­æº</th></tr></thead><tbody><tr><td align="left">æŠ€æœ¯å£å’ä½</td><td align="left">âœ“ ç¼–è¾‘å™¨ UI</td><td align="left">âœ— ååŒç®—æ³•</td></tr><tr><td align="left">è·å®¢éœ€æ±‚å¼º</td><td align="left">âœ“ å¯¼å…¥å·¥å…·</td><td align="left">âœ— å®¡è®¡æ—¥å¿—</td></tr><tr><td align="left">åˆè§„é£é™©é«˜</td><td align="left">âœ— å›½å¯†åŠ å¯†</td><td align="left">âœ“ ç§æœ‰éƒ¨ç½²è„šæœ¬</td></tr></tbody></table>
<blockquote>
<p>ä¸€å¥è¯ï¼š<strong>è®©å¼€å‘è€…çˆ½åœ¨å…ˆï¼Œè®©ä¼ä¸šæ€•åœ¨åã€‚</strong></p>
</blockquote>
<h3 data-id="heading-12">3. èŠ‚å¥è¡¨</h3>
<ul>
<li><strong>0-3 ä¸ªæœˆ</strong>ï¼šæ”¾ç¼–è¾‘å™¨ + åŸºç¡€ APIï¼Œæ‹‰ starã€æ‹‰ç¤¾ç¾¤ï¼›</li>
<li><strong>3-6 ä¸ªæœˆ</strong>ï¼šæ”¾æƒé™æ¡†æ¶ 50%ï¼Œç•™ GPL æš—é’©ï¼Œé”€å”®è·Ÿè¿›ï¼›</li>
<li><strong>6 ä¸ªæœˆå</strong>ï¼šé€æ­¥é—­æºé«˜é˜¶åˆè§„æ¨¡å—ï¼Œæ¨å‡ºè®¢é˜…åˆ¶ã€‚</li>
</ul>
<h2 data-id="heading-13">04 å½©è›‹ï¼šå¼€æºé‚£æ™šï¼Œæˆ‘ä»¬åœ¨ä»£ç é‡Œè—äº†ä¸€å¥ joke</h2>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// If you find this line, call cxzk_168,// we will send you a crate of oranges.</span>
</code></pre>
<p>ç»“æœçœŸæœ‰ 3 ä¸ªå¼€å‘è€…è”ç³»æˆ‘ï¼Œæˆ‘ä»¬æŒ‰çº¦å¯„å‡ºæ©™å­ï¼Œå…¶ä¸­ä¸€äººåæ¥æˆäº†æ©™å­è½»æ–‡æ¡£çš„å®¢æˆ·ã€‚</p>
<p><strong>ä½ çœ‹ï¼Œè¯šæ„æ°¸è¿œæ˜¯æœ€ä¾¿å®œçš„ PRã€‚</strong></p>
<h2 data-id="heading-14">05 å¦‚æœä½ åªèƒ½è®°ä½ä¸‰å¥è¯</h2>
<ol>
<li>é—­æºä¸æ˜¯æŠ¤åŸæ²³ï¼Œæ˜¯æ‹¦è·¯å¢™ï¼Œè¶Šæ—©æ¨å€’è¶Šçœé’±ã€‚</li>
<li>å¼€æºä¸æ˜¯å…¨è£¸ï¼Œæ˜¯"æ¯”åŸºå°¼"â€”â€”éœ²å¾—æ°åˆ°å¥½å¤„ï¼Œæ‰è®©äººæƒ³èŠ±é’±çœ‹é‡Œé¢ã€‚</li>
<li>èŠ‚å¥ &gt; å†³å¿ƒï¼Œå…ˆè®©ç¤¾åŒºçˆ½ï¼Œå†è®©å®¢æˆ·æ€•ï¼Œæœ€åè®©å…¬å¸æ´»ä¸‹æ¥ã€‚</li>
</ol>
<p>æŠŠä»£ç å…¬å¼€é‚£å¤©ï¼Œæˆ‘ä»¥ä¸ºä¼šå¤±å»ä¸€åˆ‡ï¼›<br/>
120 å¤©åæ‰å‘ç°ï¼Œ<strong>çœŸæ­£çš„æŠ¤åŸæ²³ï¼Œæ˜¯ä¸å®¢æˆ·ä¸€èµ·è¿›åŒ–å’Œæˆé•¿ã€‚</strong></p>
<p>æ„¿è¿™ 3 æ¡ä»·å€¼ç™¾ä¸‡çš„æ•™è®­ï¼Œå¸®ä½ å°‘å¤±çœ  180 ä¸ªå¤œæ™šã€‚</p>
<p>æ©™å­å·²ç†Ÿï¼Œç­‰ä½ æ¥æ‘˜ã€‚</p>
<p>githubåœ°å€ï¼š</p>
<p>ç›®Â æ©™å­è½»æ–‡æ¡£Â ç”±äºç”¨æˆ·é‡è¿‡å¤šï¼Œç›®å‰åªåšä¸ºæ¼”ç¤ºä½¿ç”¨ï¼Œåˆ‡å‹¿ä¼ ä¸ªäººæ•æ„Ÿæ•°æ®ã€‚</p>
<p>å¦‚æœå¤§å®¶æƒ³çº¿ä¸Šç®¡ç†çŸ¥è¯†ç¬”è®°ï¼Œå¤§å®¶å¯ä»¥ç§»æ­¥æˆ‘ä»¬çš„æ–°äº§å“â€”â€”<strong>FlowmixAI</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React æ’æ§½ï¼ˆSlotï¼‰å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°å®æˆ˜çš„çµæ´»ç»„ä»¶é€šä¿¡æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7581412054903128073</link>    <guid>https://juejin.cn/post/7581412054903128073</guid>    <pubDate>2025-12-09T03:57:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581412054903128073" data-draft-id="7581412607060951086" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React æ’æ§½ï¼ˆSlotï¼‰å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°å®æˆ˜çš„çµæ´»ç»„ä»¶é€šä¿¡æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-09T03:57:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰å°æ²³"/> <meta itemprop="url" content="https://juejin.cn/user/4222562141210478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React æ’æ§½ï¼ˆSlotï¼‰å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°å®æˆ˜çš„çµæ´»ç»„ä»¶é€šä¿¡æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4222562141210478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰å°æ²³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T03:57:40.000Z" title="Tue Dec 09 2025 03:57:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    37
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç»„ä»¶åŒ–å¼€å‘ä¸­ï¼Œæ’æ§½ï¼ˆSlotï¼‰æ˜¯å®ç°ç»„ä»¶å†…å®¹åˆ†å‘ä¸çµæ´»æ‰©å±•çš„æ ¸å¿ƒæŠ€æœ¯ã€‚Vueã€Angular ç­‰æ¡†æ¶åŸç”Ÿæ”¯æŒæ’æ§½è¯­æ³•ï¼Œè€Œ React è™½æœªæä¾›å†…ç½®çš„Â <code>&lt;slot&gt;</code>Â æ ‡ç­¾ï¼Œä½†é€šè¿‡Â <code>props</code>ã€ç»„ä»¶ç»„åˆç­‰åŸç”Ÿèƒ½åŠ›ï¼Œèƒ½å®ç°æ›´çµæ´»ã€æ›´å¼ºå¤§çš„æ’æ§½æ•ˆæœã€‚æœ¬æ–‡å°†ç³»ç»Ÿæ‹†è§£ React æ’æ§½çš„å®ç°æ–¹æ¡ˆï¼Œè¾¨æå¸¸è§ç”¨æ³•çš„åˆç†æ€§ï¼Œç»“åˆå…¨æ–°å®ä¾‹è¯¦è§£ä»åŸºç¡€åˆ°é«˜çº§çš„åº”ç”¨åœºæ™¯ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡ç»„ä»¶å¤ç”¨ä¸æ‰©å±•çš„æ ¸å¿ƒæŠ€å·§ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€React æ’æ§½çš„æ ¸å¿ƒåŸç†ä¸åˆç†æ€§è¾¨æ</h2>
<p>React æ’æ§½çš„æœ¬è´¨æ˜¯<strong>ç»„ä»¶é—´çš„å†…å®¹ä¼ é€’ä¸æ¸²æŸ“æ§åˆ¶</strong>ï¼Œæ ¸å¿ƒä¾èµ– React çš„Â <code>children</code>Â å±æ€§ã€props ä¼ é€’æœºåˆ¶ä»¥åŠç»„ä»¶ç»„åˆæ€æƒ³ã€‚åœ¨åˆ†æå¸¸è§å®ç°æ–¹æ¡ˆå‰ï¼Œå…ˆæ˜ç¡®æ ¸å¿ƒåŸåˆ™ï¼š</p>
<ul>
<li>æ­£ç¡®æ–¹å‘ï¼šåˆ©ç”¨ React åŸç”Ÿç‰¹æ€§ï¼ˆ<code>children</code>ã€propsã€Context ç­‰ï¼‰å®ç°å†…å®¹åˆ†å‘ï¼Œä¸ä¾èµ–éæ ‡å‡† APIï¼Œä¿è¯ç»„ä»¶å¤ç”¨æ€§ä¸å¯ç»´æŠ¤æ€§ï¼›</li>
<li>å¸¸è§è¯¯åŒºï¼šè¿‡åº¦å°è£…å¤æ‚é€»è¾‘ï¼ˆå¦‚ä¸å¿…è¦çš„ Context åµŒå¥—ï¼‰ã€å¿½ç•¥æ€§èƒ½ä¼˜åŒ–ï¼ˆå¦‚æ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°ç»„ä»¶ï¼‰ã€æ··æ·†æ’æ§½ä¸æ™®é€š props çš„ä½¿ç”¨åœºæ™¯ã€‚</li>
</ul>
<p>ä¸‹é¢å°†é€šè¿‡ã€ŒåŸºç¡€â†’è¿›é˜¶â†’é«˜çº§ã€çš„é¡ºåºï¼Œè¯¦è§£å„ç±»æ’æ§½çš„æ­£ç¡®å®ç°æ–¹å¼ï¼Œå¹¶è¡¥å……å…¨æ–°å®ä¾‹è¯´æ˜ã€‚</p>
<h2 data-id="heading-1">äºŒã€åŸºç¡€æ’æ§½ï¼š<code>children</code>Â prop ï¼ˆé»˜è®¤æ’æ§½ï¼‰</h2>
<p><code>children</code>Â æ˜¯ React ç»„ä»¶çš„å†…ç½® propï¼Œç”¨äºæ¥æ”¶ç»„ä»¶æ ‡ç­¾åŒ…è£¹çš„æ‰€æœ‰å†…å®¹ï¼Œæ˜¯å®ç°ã€Œé»˜è®¤æ’æ§½ã€çš„æœ€ç®€æ–¹æ¡ˆï¼Œé€‚ç”¨äºæ— éœ€åˆ†åŒºçš„ç®€å•å†…å®¹ä¼ é€’åœºæ™¯ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒç‰¹æ€§ä¸æ­£ç¡®ç”¨æ³•</h3>
<ul>
<li>è‡ªåŠ¨æ¥æ”¶ç»„ä»¶åŒ…è£¹çš„æ‰€æœ‰èŠ‚ç‚¹ï¼ˆå…ƒç´ ã€æ–‡æœ¬ã€ç»„ä»¶ç­‰ï¼‰ï¼›</li>
<li>æ”¯æŒè®¾ç½®é»˜è®¤å†…å®¹ï¼Œå¤„ç†æ— ä¼ å…¥å†…å®¹çš„è¾¹ç•Œæƒ…å†µï¼›</li>
<li>æ— éœ€é¢å¤–é…ç½®ï¼ŒåŸç”Ÿæ”¯æŒï¼Œæ€§èƒ½æœ€ä¼˜ã€‚</li>
<li>
<h3 data-id="heading-3">å®ä¾‹ 1ï¼šåŸºç¡€å¡ç‰‡ç»„ä»¶ï¼ˆé»˜è®¤æ’æ§½ï¼‰</h3>
</li>
</ul>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å­ç»„ä»¶ï¼šåŸºç¡€å¡ç‰‡ï¼ˆæ”¯æŒé»˜è®¤å†…å®¹ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">BasicCard</span>(<span class="hljs-params">{ children, className }</span>) {
  <span class="hljs-comment">// è¾¹ç•Œå¤„ç†ï¼šæ— ä¼ å…¥å†…å®¹æ—¶æ˜¾ç¤ºé»˜è®¤æç¤º</span>
  <span class="hljs-keyword">const</span> defaultContent = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card-default"</span>&gt;</span>æš‚æ— å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">card</span> ${<span class="hljs-attr">className</span> || ''}`} <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
      <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">eee</span>', 
      <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">8px</span>', 
      <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', 
      <span class="hljs-attr">maxWidth:</span> '<span class="hljs-attr">300px</span>' 
    }}&gt;</span>
      {children || defaultContent}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶ï¼šä½¿ç”¨å¡ç‰‡ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>', <span class="hljs-attr">gap:</span> '<span class="hljs-attr">20px</span>', <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
      {/* ä¼ å…¥è‡ªå®šä¹‰å†…å®¹ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">BasicCard</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"user-card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> 
          <span class="hljs-attr">src</span>=<span class="hljs-string">"https://via.placeholder.com/80"</span> 
          <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç”¨æˆ·å¤´åƒ"</span> 
          <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">50</span>%', <span class="hljs-attr">marginBottom:</span> '<span class="hljs-attr">10px</span>' }}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">8px</span> <span class="hljs-attr">0</span>' }}&gt;</span>æå<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> '<span class="hljs-attr">0</span>', <span class="hljs-attr">color:</span> '#<span class="hljs-attr">666</span>' }}&gt;</span>å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">BasicCard</span>&gt;</span>

      {/* æœªä¼ å…¥å†…å®¹ï¼ˆæ˜¾ç¤ºé»˜è®¤å€¼ï¼‰ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">BasicCard</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"empty-card"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-4">å®ä¾‹ 2ï¼šå¸¦æ¡ä»¶æ¸²æŸ“çš„é»˜è®¤æ’æ§½</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å­ç»„ä»¶ï¼šé€šçŸ¥ç»„ä»¶ï¼ˆæ ¹æ®ç±»å‹æ˜¾ç¤ºä¸åŒé»˜è®¤å›¾æ ‡ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Notification</span>(<span class="hljs-params">{ children, type = <span class="hljs-string">'info'</span> }</span>) {
  <span class="hljs-comment">// æ ¹æ®ç±»å‹ç”Ÿæˆé»˜è®¤å›¾æ ‡</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDefaultIcon</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">switch</span>(type) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'success'</span>: <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">green</span>' }}&gt;</span>âœ…<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'error'</span>: <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">red</span>' }}&gt;</span>âŒ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'warning'</span>: <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">orange</span>' }}&gt;</span>âš ï¸<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
      <span class="hljs-attr">default</span>: <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">blue</span>' }}&gt;</span>â„¹ï¸<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
      <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>', 
      <span class="hljs-attr">alignItems:</span> '<span class="hljs-attr">center</span>', 
      <span class="hljs-attr">gap:</span> '<span class="hljs-attr">8px</span>', 
      <span class="hljs-attr">padding:</span> '<span class="hljs-attr">12px</span>', 
      <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">f5f5f5</span>', 
      <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>' 
    }}&gt;</span>
      {getDefaultIcon()}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>', <span class="hljs-attr">flexDirection:</span> '<span class="hljs-attr">column</span>', <span class="hljs-attr">gap:</span> '<span class="hljs-attr">10px</span>' }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Notification</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"success"</span>&gt;</span>æ“ä½œæˆåŠŸï¼<span class="hljs-tag">&lt;/<span class="hljs-name">Notification</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Notification</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"error"</span>&gt;</span>æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•<span class="hljs-tag">&lt;/<span class="hljs-name">Notification</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Notification</span>&gt;</span>è¿™æ˜¯ä¸€æ¡æ™®é€šé€šçŸ¥<span class="hljs-tag">&lt;/<span class="hljs-name">Notification</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€å‘½åæ’æ§½ï¼šå¤šåŒºåŸŸå†…å®¹ç²¾å‡†åˆ†å‘</h2>
<p>å½“ç»„ä»¶éœ€è¦åˆ’åˆ†å¤šä¸ªå›ºå®šåŒºåŸŸï¼ˆå¦‚å¤´éƒ¨ã€ä¸»ä½“ã€åº•éƒ¨ï¼‰æ—¶ï¼Œä½¿ç”¨ã€Œå‘½åæ’æ§½ã€å®ç°ç²¾å‡†å†…å®¹åˆ†å‘ã€‚React ä¸­æ— åŸç”Ÿã€Œå‘½åæ’æ§½ã€è¯­æ³•ï¼Œä½†é€šè¿‡ã€Œå¤š props ä¼ é€’ã€æˆ–ã€Œchildren å¯¹è±¡ã€ä¸¤ç§æ–¹æ¡ˆå‡å¯å®ç°ï¼Œé€‚ç”¨äºå¸ƒå±€ç»„ä»¶ã€å¤æ‚å¡ç‰‡ç­‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-6">æ–¹æ¡ˆ 1ï¼šå¤š props ä¼ é€’ï¼ˆæ¨èï¼Œç®€æ´ç›´è§‚ï¼‰</h3>
<p>é€šè¿‡ä¸åŒåç§°çš„ props æ¥æ”¶ä¸åŒåŒºåŸŸçš„å†…å®¹ï¼Œæ˜¯æœ€å¸¸ç”¨çš„å‘½åæ’æ§½å®ç°æ–¹å¼ï¼Œå¯è¯»æ€§å¼ºï¼Œæ˜“äºç»´æŠ¤ã€‚</p>
<h4 data-id="heading-7">å®ä¾‹ï¼šé¡µé¢å¸ƒå±€ç»„ä»¶ï¼ˆå¤´éƒ¨ã€ä¾§è¾¹æ ã€ä¸»ä½“ã€åº•éƒ¨ï¼‰</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å­ç»„ä»¶ï¼šå¸ƒå±€ç»„ä»¶ï¼ˆå®šä¹‰ 4 ä¸ªå‘½åæ’æ§½ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">PageLayout</span>(<span class="hljs-params">{ header, sidebar, content, footer, isSidebarLeft = <span class="hljs-literal">true</span> }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>', <span class="hljs-attr">flexDirection:</span> '<span class="hljs-attr">column</span>', <span class="hljs-attr">minHeight:</span> '<span class="hljs-attr">100vh</span>' }}&gt;</span>
      {/* å¤´éƒ¨æ’æ§½ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
        <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">2c3e50</span>', 
        <span class="hljs-attr">color:</span> '<span class="hljs-attr">white</span>', 
        <span class="hljs-attr">padding:</span> '<span class="hljs-attr">16px</span>', 
        <span class="hljs-attr">textAlign:</span> '<span class="hljs-attr">center</span>' 
      }}&gt;</span>
        {header}
      <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

      {/* ä¸»ä½“+ä¾§è¾¹æ å®¹å™¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>', <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span> }}&gt;</span>
        {/* ä¾§è¾¹æ æ’æ§½ï¼ˆæ”¯æŒå·¦å³åˆ‡æ¢ï¼‰ */}
        {isSidebarLeft &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
            <span class="hljs-attr">width:</span> '<span class="hljs-attr">200px</span>', 
            <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">ecf0f1</span>', 
            <span class="hljs-attr">padding:</span> '<span class="hljs-attr">16px</span>', 
            <span class="hljs-attr">borderRight:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ddd</span>' 
          }}&gt;</span>
            {sidebar}
          <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
        )}

        {/* ä¸»ä½“å†…å®¹æ’æ§½ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span>, <span class="hljs-attr">padding:</span> '<span class="hljs-attr">24px</span>' }}&gt;</span>
          {content}
        <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

        {!isSidebarLeft &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
            <span class="hljs-attr">width:</span> '<span class="hljs-attr">200px</span>', 
            <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">ecf0f1</span>', 
            <span class="hljs-attr">padding:</span> '<span class="hljs-attr">16px</span>', 
            <span class="hljs-attr">borderLeft:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ddd</span>' 
          }}&gt;</span>
            {sidebar}
          <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {/* åº•éƒ¨æ’æ§½ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
        <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">2c3e50</span>', 
        <span class="hljs-attr">color:</span> '<span class="hljs-attr">white</span>', 
        <span class="hljs-attr">padding:</span> '<span class="hljs-attr">8px</span>', 
        <span class="hljs-attr">textAlign:</span> '<span class="hljs-attr">center</span>' 
      }}&gt;</span>
        {footer}
      <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">PageLayout</span>
      // <span class="hljs-attr">å¤´éƒ¨æ’æ§½å†…å®¹</span>
      <span class="hljs-attr">header</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">h1</span>&gt;</span>æˆ‘çš„åšå®¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>}
      // ä¾§è¾¹æ æ’æ§½å†…å®¹
      sidebar={
        <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>', <span class="hljs-attr">flexDirection:</span> '<span class="hljs-attr">column</span>', <span class="hljs-attr">gap:</span> '<span class="hljs-attr">12px</span>' }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '#<span class="hljs-attr">333</span>', <span class="hljs-attr">textDecoration:</span> '<span class="hljs-attr">none</span>' }}&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/article"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '#<span class="hljs-attr">333</span>', <span class="hljs-attr">textDecoration:</span> '<span class="hljs-attr">none</span>' }}&gt;</span>æ–‡ç« åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '#<span class="hljs-attr">333</span>', <span class="hljs-attr">textDecoration:</span> '<span class="hljs-attr">none</span>' }}&gt;</span>å…³äºæˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      }
      // ä¸»ä½“æ’æ§½å†…å®¹
      content={
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>React æ’æ§½è¯¦è§£<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æœ¬æ–‡ä»‹ç» React ä¸­æ’æ§½çš„å¤šç§å®ç°æ–¹å¼ï¼Œå¸®åŠ©å¼€å‘è€…çµæ´»æ‰©å±•ç»„ä»¶...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      }
      // åº•éƒ¨æ’æ§½å†…å®¹
      footer={<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Â© 2025 æˆ‘çš„åšå®¢ ç‰ˆæƒæ‰€æœ‰<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
      // ä¾§è¾¹æ åœ¨å³ä¾§
      isSidebarLeft={false}
    /&gt;</span>
  );
}
</code></pre>
<h3 data-id="heading-8">æ–¹æ¡ˆ 2ï¼šchildren å¯¹è±¡ï¼ˆæ¨¡æ‹Ÿ Vue å…·åæ’æ§½è¯­æ³•ï¼‰</h3>
<p>å°†Â <code>children</code>Â è®¾è®¡ä¸ºå¯¹è±¡ï¼Œé”®åä¸ºæ’æ§½åç§°ï¼Œé”®å€¼ä¸ºæ’æ§½å†…å®¹ï¼Œè¯­æ³•æ›´æ¥è¿‘ Vue çš„å…·åæ’æ§½ï¼Œé€‚ç”¨äºä¹ æƒ¯ Vue è¯­æ³•çš„å¼€å‘è€…ï¼Œ ä¸æ¨èä½¿ç”¨ï¼Œä¸ç›´è§‚å¤šæ­¤ä¸€ä¸¾</p>
<h4 data-id="heading-9">å®ä¾‹ï¼šå•†å“å¡ç‰‡ç»„ä»¶ï¼ˆæ ‡é¢˜ã€æè¿°ã€ä»·æ ¼ã€æ“ä½œåŒºï¼‰</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å­ç»„ä»¶ï¼šå•†å“å¡ç‰‡ï¼ˆæ¥æ”¶ children å¯¹è±¡ä½œä¸ºå‘½åæ’æ§½ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductCard</span>(<span class="hljs-params">{ children, style }</span>) {
  <span class="hljs-comment">// è§£æ„æ’æ§½å†…å®¹ï¼Œè®¾ç½®é»˜è®¤å€¼</span>
  <span class="hljs-keyword">const</span> { 
    title = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>é»˜è®¤å•†å“åç§°<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span>,
    description = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æš‚æ— å•†å“æè¿°<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>,
    price = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">red</span>' }}&gt;</span>Â¥0.00<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>,
    action = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>åŠ å…¥è´­ç‰©è½¦<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  } = children || {};

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
      <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">eee</span>', 
      <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">8px</span>', 
      <span class="hljs-attr">padding:</span> '<span class="hljs-attr">16px</span>', 
      <span class="hljs-attr">width:</span> '<span class="hljs-attr">280px</span>',
      <span class="hljs-attr">...style</span>
    }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginBottom:</span> '<span class="hljs-attr">12px</span>' }}&gt;</span>{title}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginBottom:</span> '<span class="hljs-attr">12px</span>', <span class="hljs-attr">color:</span> '#<span class="hljs-attr">666</span>', <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">14px</span>' }}&gt;</span>{description}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginBottom:</span> '<span class="hljs-attr">16px</span>', <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">18px</span>', <span class="hljs-attr">fontWeight:</span> '<span class="hljs-attr">bold</span>' }}&gt;</span>{price}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">textAlign:</span> '<span class="hljs-attr">center</span>' }}&gt;</span>{action}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>', <span class="hljs-attr">gap:</span> '<span class="hljs-attr">20px</span>', <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ProductCard</span>&gt;</span>
        {{
          title: <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> '<span class="hljs-attr">0</span>' }}&gt;</span>æ— çº¿è“ç‰™è€³æœº<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>,
          description: <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> '<span class="hljs-attr">0</span>' }}&gt;</span>é™å™ªåŠŸèƒ½ | ç»­èˆª24å°æ—¶ | é˜²æ°´é˜²æ±—<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>,
          price: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">red</span>' }}&gt;</span>Â¥399.00<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>,
          action: (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>', <span class="hljs-attr">gap:</span> '<span class="hljs-attr">8px</span>', <span class="hljs-attr">justifyContent:</span> '<span class="hljs-attr">center</span>' }}&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">6px</span> <span class="hljs-attr">12px</span>', <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">42b983</span>', <span class="hljs-attr">color:</span> '<span class="hljs-attr">white</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">none</span>', <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>' }}&gt;</span>
                åŠ å…¥è´­ç‰©è½¦
              <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">6px</span> <span class="hljs-attr">12px</span>', <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">fff</span>', <span class="hljs-attr">color:</span> '#<span class="hljs-attr">42b983</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">42b983</span>', <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>' }}&gt;</span>
                ç«‹å³è´­ä¹°
              <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          )
        }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ProductCard</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">ProductCard</span>&gt;</span>
        {{
          title: <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> '<span class="hljs-attr">0</span>' }}&gt;</span>æ™ºèƒ½æ‰‹è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>,
          price: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">red</span>' }}&gt;</span>Â¥899.00<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          // æœªä¼ å…¥ description å’Œ actionï¼Œä½¿ç”¨é»˜è®¤å€¼
        }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ProductCard</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-10">å››ã€ä½œç”¨åŸŸæ’æ§½ï¼šå­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®</h2>
<p>ä½œç”¨åŸŸæ’æ§½ï¼ˆScoped Slotï¼‰çš„æ ¸å¿ƒæ˜¯ã€Œå­ç»„ä»¶æä¾›æ•°æ®ï¼Œçˆ¶ç»„ä»¶å†³å®šå¦‚ä½•æ¸²æŸ“ã€ï¼Œé€‚ç”¨äºå­ç»„ä»¶æŒæœ‰æ•°æ®ä½†æ¸²æŸ“é€»è¾‘éœ€çµæ´»å®šåˆ¶çš„åœºæ™¯ï¼ˆå¦‚åˆ—è¡¨æ¸²æŸ“ã€æ•°æ®å±•ç¤ºæ ¼å¼åŒ–ï¼‰ã€‚React ä¸­é€šè¿‡ã€Œrender propsã€æˆ–ã€Œå‡½æ•°ä½œä¸º childrenã€å®ç°ï¼Œä¸¤è€…æœ¬è´¨ä¸€è‡´ï¼Œå‡æ˜¯å°†æ•°æ®é€šè¿‡å‡½æ•°å‚æ•°ä¼ é€’ç»™çˆ¶ç»„ä»¶ã€‚</p>
<h3 data-id="heading-11">æ–¹æ¡ˆ 1ï¼šå‡½æ•°ä½œä¸º childrenï¼ˆæ›´ç®€æ´ï¼Œæ¨èï¼‰</h3>
<p>ç›´æ¥å°†Â <code>children</code>Â è®¾è®¡ä¸ºå‡½æ•°ï¼Œå­ç»„ä»¶è°ƒç”¨è¯¥å‡½æ•°æ—¶ä¼ å…¥æ•°æ®ï¼Œçˆ¶ç»„ä»¶é€šè¿‡å‡½æ•°å‚æ•°æ¥æ”¶æ•°æ®å¹¶æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-12">å®ä¾‹ï¼šç”¨æˆ·åˆ—è¡¨ç»„ä»¶ï¼ˆå­ç»„ä»¶æä¾›ç”¨æˆ·æ•°æ®ï¼Œçˆ¶ç»„ä»¶å®šåˆ¶æ¸²æŸ“ï¼‰</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// å­ç»„ä»¶ï¼šç”¨æˆ·åˆ—è¡¨ï¼ˆæä¾›æ•°æ®ï¼Œæš´éœ²ç»™çˆ¶ç»„ä»¶æ¸²æŸ“ï¼‰</span>
<span class="hljs-selector-tag">function</span> <span class="hljs-selector-tag">UserList</span>({ <span class="hljs-selector-tag">data</span>, <span class="hljs-selector-tag">children</span> }) {
  <span class="hljs-selector-tag">if</span> (!data || data.length === <span class="hljs-number">0</span>) {
    <span class="hljs-selector-tag">return</span> &lt;<span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">style</span>={{ <span class="hljs-attribute">padding</span>: <span class="hljs-string">'20px'</span>, <span class="hljs-attribute">textAlign</span>: <span class="hljs-string">'center'</span>, <span class="hljs-attribute">color</span>: <span class="hljs-string">'#666'</span> }}&gt;æš‚æ— ç”¨æˆ·æ•°æ®&lt;/div&gt;;
  }

  return (
    &lt;div style={{ <span class="hljs-attribute">border</span>: <span class="hljs-string">'1px solid #eee'</span>, <span class="hljs-attribute">borderRadius</span>: <span class="hljs-string">'8px'</span>, <span class="hljs-attribute">overflow</span>: <span class="hljs-string">'hidden'</span> }}&gt;
      {data.<span class="hljs-built_in">map</span>((user, index) =&gt; (
        <span class="hljs-comment">// è°ƒç”¨ children å‡½æ•°ï¼Œä¼ é€’ç”¨æˆ·æ•°æ®å’Œç´¢å¼•</span>
        &lt;div 
          key={user.id} 
          style={{ 
            <span class="hljs-attribute">padding</span>: <span class="hljs-string">'16px'</span>, 
            <span class="hljs-attribute">borderBottom</span>: index &lt; data.length - <span class="hljs-number">1</span> ? <span class="hljs-string">'1px solid #eee'</span> : <span class="hljs-string">'none'</span>,
            <span class="hljs-attribute">backgroundColor</span>: index % <span class="hljs-number">2</span> === <span class="hljs-number">0</span> ? <span class="hljs-string">'#fff'</span> : <span class="hljs-string">'#f9f9f9'</span>
          }}
        &gt;
          {<span class="hljs-built_in">children</span>(user, index)}
        &lt;/div&gt;
      ))}
    &lt;/div&gt;
  );
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶ä½¿ç”¨ï¼šå®šåˆ¶ä¸åŒçš„æ¸²æŸ“é€»è¾‘</span>
function <span class="hljs-built_in">App</span>() {
  <span class="hljs-comment">// æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®</span>
  <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">userData</span> = <span class="hljs-selector-attr">[    { id: 1, name: <span class="hljs-string">'å¼ ä¸‰'</span>, age: 28, role: <span class="hljs-string">'ç®¡ç†å‘˜'</span>, avatar: <span class="hljs-string">'https://via.placeholder.com/40'</span> },    { id: 2, name: <span class="hljs-string">'æå››'</span>, age: 24, role: <span class="hljs-string">'æ™®é€šç”¨æˆ·'</span>, avatar: <span class="hljs-string">'https://via.placeholder.com/40'</span> },    { id: 3, name: <span class="hljs-string">'ç‹äº”'</span>, age: 32, role: <span class="hljs-string">'VIPç”¨æˆ·'</span>, avatar: <span class="hljs-string">'https://via.placeholder.com/40'</span> }  ]</span>;

  <span class="hljs-selector-tag">return</span> (
    &lt;div style={{ <span class="hljs-attribute">padding</span>: <span class="hljs-string">'20px'</span>, <span class="hljs-attribute">display</span>: <span class="hljs-string">'flex'</span>, <span class="hljs-attribute">gap</span>: <span class="hljs-string">'20px'</span> }}&gt;
      {<span class="hljs-comment">/* æ¸²æŸ“æ–¹å¼ 1ï¼šç®€æ´å¡ç‰‡å¼ */</span>}
      &lt;UserList data={<span class="hljs-selector-tag">userData</span>}&gt;
        {(<span class="hljs-selector-tag">user</span>) =&gt; (
          &lt;div style={{ <span class="hljs-attribute">display</span>: <span class="hljs-string">'flex'</span>, <span class="hljs-attribute">alignItems</span>: <span class="hljs-string">'center'</span>, <span class="hljs-attribute">gap</span>: <span class="hljs-string">'12px'</span> }}&gt;
            &lt;img src={<span class="hljs-selector-tag">user</span><span class="hljs-selector-class">.avatar</span>} <span class="hljs-selector-tag">alt</span>={<span class="hljs-selector-tag">user</span><span class="hljs-selector-class">.name</span>} <span class="hljs-selector-tag">style</span>={{ borderRadius: '50%' }} /&gt;
            &lt;div&gt;
              &lt;div style={{ fontWeight: 'bold' }}&gt;{<span class="hljs-selector-tag">user</span><span class="hljs-selector-class">.name</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;
              &lt;<span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">style</span>={{ fontSize: '12px', <span class="hljs-attribute">color</span>: <span class="hljs-string">'#666'</span> }}&gt;{<span class="hljs-selector-tag">user</span><span class="hljs-selector-class">.role</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;
            &lt;/<span class="hljs-selector-tag">div</span>&gt;
          &lt;/<span class="hljs-selector-tag">div</span>&gt;
        )}
      &lt;/<span class="hljs-selector-tag">UserList</span>&gt;

      {<span class="hljs-comment">/* æ¸²æŸ“æ–¹å¼ 2ï¼šè¯¦ç»†ä¿¡æ¯å¼ */</span>}
      &lt;UserList data={<span class="hljs-selector-tag">userData</span>}&gt;
        {(<span class="hljs-selector-tag">user</span>, <span class="hljs-selector-tag">index</span>) =&gt; (
          &lt;div&gt;
            &lt;div style={{ <span class="hljs-attribute">display</span>: <span class="hljs-string">'flex'</span>, <span class="hljs-attribute">alignItems</span>: <span class="hljs-string">'center'</span>, <span class="hljs-attribute">gap</span>: <span class="hljs-string">'8px'</span>, <span class="hljs-attribute">marginBottom</span>: <span class="hljs-string">'8px'</span> }}&gt;
              &lt;span style={{ backgroundColor: '#42b983', <span class="hljs-attribute">color</span>: <span class="hljs-string">'white'</span>, <span class="hljs-attribute">padding</span>: <span class="hljs-string">'2px 8px'</span>, <span class="hljs-attribute">borderRadius</span>: <span class="hljs-string">'12px'</span>, <span class="hljs-attribute">fontSize</span>: <span class="hljs-string">'12px'</span> }}&gt;
                {<span class="hljs-selector-tag">index</span> + <span class="hljs-number">1</span>}
              &lt;/<span class="hljs-selector-tag">span</span>&gt;
              &lt;<span class="hljs-selector-tag">h4</span> <span class="hljs-selector-tag">style</span>={{ <span class="hljs-attribute">margin</span>: <span class="hljs-string">'0'</span> }}&gt;{<span class="hljs-selector-tag">user</span><span class="hljs-selector-class">.name</span>}&lt;/<span class="hljs-selector-tag">h4</span>&gt;
            &lt;/<span class="hljs-selector-tag">div</span>&gt;
            &lt;<span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">style</span>={{ fontSize: '14px', <span class="hljs-attribute">color</span>: <span class="hljs-string">'#666'</span> }}&gt;å¹´é¾„ï¼š{<span class="hljs-selector-tag">user</span><span class="hljs-selector-class">.age</span>}å²&lt;/<span class="hljs-selector-tag">div</span>&gt;
            &lt;<span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">style</span>={{ fontSize: '14px', <span class="hljs-attribute">color</span>: <span class="hljs-string">'#666'</span> }}&gt;èº«ä»½ï¼š{<span class="hljs-selector-tag">user</span><span class="hljs-selector-class">.role</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;
          &lt;/<span class="hljs-selector-tag">div</span>&gt;
        )}
      &lt;/<span class="hljs-selector-tag">UserList</span>&gt;
    &lt;/<span class="hljs-selector-tag">div</span>&gt;
  );
}
</code></pre>
<h3 data-id="heading-13">æ–¹æ¡ˆ 2ï¼šrender propsï¼ˆæ˜¾å¼å£°æ˜æ¸²æŸ“å‡½æ•°ï¼‰</h3>
<p>é€šè¿‡ä¸“é—¨çš„ propsï¼ˆå¦‚Â <code>renderItem</code>ï¼‰ä¼ é€’æ¸²æŸ“å‡½æ•°ï¼Œè¯­ä¹‰æ›´æ˜ç¡®ï¼Œé€‚ç”¨äºéœ€è¦å¤šä¸ªæ¸²æŸ“å‡½æ•°çš„å¤æ‚ç»„ä»¶ã€‚</p>
<h4 data-id="heading-14">å®ä¾‹ï¼šæ•°æ®è¡¨æ ¼ç»„ä»¶ï¼ˆæ”¯æŒè¡¨å¤´å’Œè¡Œæ¸²æŸ“å®šåˆ¶ï¼‰</h4>
<pre><code class="hljs language-css" lang="css">// å­ç»„ä»¶ï¼šæ•°æ®è¡¨æ ¼ï¼ˆé€šè¿‡ render props æš´éœ²è¡¨å¤´å’Œè¡Œæ•°æ®ï¼‰
function DataTable({ <span class="hljs-attribute">columns</span>, data, renderHeader, renderRow }) {
  return (
    &lt;<span class="hljs-selector-tag">table</span> style={{ <span class="hljs-attribute">width</span>: <span class="hljs-string">'100%'</span>, borderCollapse: <span class="hljs-string">'collapse'</span>, border: <span class="hljs-string">'1px solid #eee'</span> }}&gt;
      {<span class="hljs-comment">/* è¡¨å¤´æ¸²æŸ“ï¼šè°ƒç”¨ renderHeader ä¼ é€’åˆ—é…ç½® */</span>}
      &lt;<span class="hljs-selector-tag">thead</span>&gt;
        &lt;<span class="hljs-selector-tag">tr</span> style={{ backgroundColor: <span class="hljs-string">'#f5f5f5'</span> }}&gt;
          {<span class="hljs-attribute">columns</span><span class="hljs-selector-class">.map</span>((col) =&gt; (
            &lt;&lt;<span class="hljs-selector-tag">th</span> key={col<span class="hljs-selector-class">.key</span>} style={{ <span class="hljs-attribute">padding</span>: <span class="hljs-string">'12px'</span>, border: <span class="hljs-string">'1px solid #eee'</span>, textAlign: <span class="hljs-string">'left'</span> }}&gt;
              {renderHeader(col)}
            &lt;/&lt;/<span class="hljs-selector-tag">th</span>&gt;
          ))}
        &lt;/<span class="hljs-selector-tag">tr</span>&gt;
      &lt;/<span class="hljs-selector-tag">thead</span>&gt;
      {<span class="hljs-comment">/* è¡¨ä½“æ¸²æŸ“ï¼šè°ƒç”¨ renderRow ä¼ é€’è¡Œæ•°æ® */</span>}
      &lt;<span class="hljs-selector-tag">tbody</span>&gt;
        {data<span class="hljs-selector-class">.map</span>((row) =&gt; (
          &lt;<span class="hljs-selector-tag">tr</span> key={row<span class="hljs-selector-class">.id</span>} style={{ backgroundColor: <span class="hljs-string">'#fff'</span> }}&gt;
            {<span class="hljs-attribute">columns</span><span class="hljs-selector-class">.map</span>((col) =&gt; (
              &lt;<span class="hljs-selector-tag">td</span> key={col<span class="hljs-selector-class">.key</span>} style={{ <span class="hljs-attribute">padding</span>: <span class="hljs-string">'12px'</span>, border: <span class="hljs-string">'1px solid #eee'</span> }}&gt;
                {renderRow(row, col)}
              &lt;/<span class="hljs-selector-tag">td</span>&gt;
            ))}
          &lt;/<span class="hljs-selector-tag">tr</span>&gt;
        ))}
      &lt;/<span class="hljs-selector-tag">tbody</span>&gt;
    &lt;/<span class="hljs-selector-tag">table</span>&gt;
  );
}

// çˆ¶ç»„ä»¶ä½¿ç”¨
function App() {
  const tableColumns = <span class="hljs-selector-attr">[    { key: <span class="hljs-string">'name'</span>, label: <span class="hljs-string">'å•†å“åç§°'</span> },    { key: <span class="hljs-string">'price'</span>, label: <span class="hljs-string">'ä»·æ ¼'</span> },    { key: <span class="hljs-string">'stock'</span>, label: <span class="hljs-string">'åº“å­˜'</span> },    { key: <span class="hljs-string">'action'</span>, label: <span class="hljs-string">'æ“ä½œ'</span> }  ]</span>;

  const tableData = <span class="hljs-selector-attr">[    { id: 1, name: <span class="hljs-string">'æ— çº¿é¼ æ ‡'</span>, price: 99, stock: 120 },    { id: 2, name: <span class="hljs-string">'æœºæ¢°é”®ç›˜'</span>, price: 299, stock: 86 },    { id: 3, name: <span class="hljs-string">'æ˜¾ç¤ºå™¨'</span>, price: 1299, stock: 34 }  ]</span>;

  return (
    &lt;<span class="hljs-selector-tag">div</span> style={{ <span class="hljs-attribute">padding</span>: <span class="hljs-string">'20px'</span> }}&gt;
      &lt;DataTable
        <span class="hljs-attribute">columns</span>={tableColumns}
        data={tableData}
        // å®šåˆ¶è¡¨å¤´æ¸²æŸ“ï¼ˆæ·»åŠ å›¾æ ‡ï¼‰
        renderHeader={(col) =&gt; (
          &lt;<span class="hljs-selector-tag">div</span> style={{ <span class="hljs-attribute">display</span>: <span class="hljs-string">'flex'</span>, alignItems: <span class="hljs-string">'center'</span>, gap: <span class="hljs-string">'6px'</span> }}&gt;
            &lt;<span class="hljs-selector-tag">span</span>&gt;ğŸ“‹&lt;/<span class="hljs-selector-tag">span</span>&gt;
            {col<span class="hljs-selector-class">.label</span>}
          &lt;/<span class="hljs-selector-tag">div</span>&gt;
        )}
        // å®šåˆ¶è¡Œæ¸²æŸ“ï¼ˆä»·æ ¼é«˜äº®ã€åº“å­˜çŠ¶æ€æ˜¾ç¤ºï¼‰
        renderRow={(row, col) =&gt; {
          switch (col<span class="hljs-selector-class">.key</span>) {
            case 'price':
              return &lt;span style={{ <span class="hljs-attribute">color</span>: <span class="hljs-string">'red'</span>, fontWeight: <span class="hljs-string">'bold'</span> }}&gt;Â¥{row<span class="hljs-selector-class">.price</span>}&lt;/<span class="hljs-selector-tag">span</span>&gt;;
            case 'stock':
              return row.stock &gt; <span class="hljs-number">50</span> ? (
                &lt;span style={{ <span class="hljs-attribute">color</span>: <span class="hljs-string">'green'</span> }}&gt;å……è¶³&lt;/<span class="hljs-selector-tag">span</span>&gt;
              ) : (
                &lt;span style={{ <span class="hljs-attribute">color</span>: <span class="hljs-string">'orange'</span> }}&gt;ç´§å¼ &lt;/<span class="hljs-selector-tag">span</span>&gt;
              );
            case 'action':
              return (
                &lt;button style={{ <span class="hljs-attribute">padding</span>: <span class="hljs-string">'4px 8px'</span>, backgroundColor: <span class="hljs-string">'#42b983'</span>, color: <span class="hljs-string">'white'</span>, border: <span class="hljs-string">'none'</span>, borderRadius: <span class="hljs-string">'4px'</span> }}&gt;
                  ç¼–è¾‘
                &lt;/<span class="hljs-selector-tag">button</span>&gt;
              );
            default:
              return row[col.key];
          }
        }}
      /&gt;
    &lt;/<span class="hljs-selector-tag">div</span>&gt;
  );
}
</code></pre>
<h2 data-id="heading-15">äº”ã€é«˜çº§æ’æ§½ï¼šç»„ä»¶ç»„åˆ + Context</h2>
<p>å¯¹äºå¤æ‚ç»„ä»¶ï¼ˆå¦‚å¼¹çª—ã€è¡¨å•ï¼‰ï¼Œéœ€è¦å¤šä¸ªåˆ†æ•£çš„æ’æ§½ä¸”æ’æ§½å†…å®¹å¯èƒ½åµŒå¥—è¾ƒæ·±æ—¶ï¼Œå¯é€šè¿‡ã€Œä¸“ç”¨æ’æ§½ç»„ä»¶ + Contextã€å®ç°ï¼Œé€‚ç”¨äºå¤§å‹ç»„ä»¶åº“å¼€å‘ã€‚</p>
<h3 data-id="heading-16">æ ¸å¿ƒæ€è·¯</h3>
<ol>
<li>å®šä¹‰å®¹å™¨ç»„ä»¶ï¼ˆå¦‚Â <code>Modal</code>ï¼‰ï¼Œåˆ›å»º Context ç”¨äºä¼ é€’æ’æ§½æ³¨å†Œå‡½æ•°ï¼›</li>
<li>å®šä¹‰ä¸“ç”¨æ’æ§½ç»„ä»¶ï¼ˆå¦‚Â <code>ModalHeader</code>ã€<code>ModalBody</code>ï¼‰ï¼Œé€šè¿‡ Context æ³¨å†Œè‡ªèº«å†…å®¹åˆ°å®¹å™¨ç»„ä»¶ï¼›</li>
<li>å®¹å™¨ç»„ä»¶æ”¶é›†æ‰€æœ‰æ’æ§½å†…å®¹ï¼ŒæŒ‰å›ºå®šç»“æ„æ¸²æŸ“ã€‚</li>
</ol>
<h3 data-id="heading-17">å®ä¾‹ï¼šå¤šåŠŸèƒ½å¼¹çª—ç»„ä»¶ï¼ˆæ”¯æŒå¤´éƒ¨ã€ä¸»ä½“ã€åº•éƒ¨ã€å³ä¸Šè§’æ’æ§½ï¼‰</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { createContext, useContext, useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// 1. åˆ›å»º Context ç”¨äºä¼ é€’æ’æ§½æ³¨å†Œå‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ModalContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// 2. å®šä¹‰å®¹å™¨ç»„ä»¶ï¼šModal</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Modal</span>(<span class="hljs-params">{ isOpen, onClose, children }</span>) {
  <span class="hljs-comment">// å­˜å‚¨æ‰€æœ‰æ’æ§½å†…å®¹</span>
  <span class="hljs-keyword">const</span> [slots, setSlots] = <span class="hljs-title function_">useState</span>({
    <span class="hljs-attr">header</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">body</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">footer</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">closeBtn</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClose}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">background:</span> '<span class="hljs-attr">none</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">none</span>', <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">18px</span>', <span class="hljs-attr">cursor:</span> '<span class="hljs-attr">pointer</span>' }}&gt;</span>Ã—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  });

  <span class="hljs-comment">// æ³¨å†Œæ’æ§½çš„å‡½æ•°ï¼šæ¥æ”¶æ’æ§½åç§°å’Œå†…å®¹ï¼Œåˆå¹¶åˆ° slots ä¸­</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">registerSlot</span> = (<span class="hljs-params">name, content</span>) =&gt; {
    <span class="hljs-title function_">setSlots</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({ ...prev, [name]: content }));
  };

  <span class="hljs-comment">// æœªæ‰“å¼€æ—¶ä¸æ¸²æŸ“</span>
  <span class="hljs-keyword">if</span> (!isOpen) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// æä¾› Contextï¼Œè®©å­æ’æ§½ç»„ä»¶èƒ½è®¿é—® registerSlot</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ModalContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">registerSlot</span> }}&gt;</span>
      {/* é®ç½©å±‚ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
        <span class="hljs-attr">position:</span> '<span class="hljs-attr">fixed</span>', 
        <span class="hljs-attr">top:</span> <span class="hljs-attr">0</span>, 
        <span class="hljs-attr">left:</span> <span class="hljs-attr">0</span>, 
        <span class="hljs-attr">right:</span> <span class="hljs-attr">0</span>, 
        <span class="hljs-attr">bottom:</span> <span class="hljs-attr">0</span>, 
        <span class="hljs-attr">backgroundColor:</span> '<span class="hljs-attr">rgba</span>(<span class="hljs-attr">0</span>,<span class="hljs-attr">0</span>,<span class="hljs-attr">0</span>,<span class="hljs-attr">0.5</span>)', 
        <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>', 
        <span class="hljs-attr">alignItems:</span> '<span class="hljs-attr">center</span>', 
        <span class="hljs-attr">justifyContent:</span> '<span class="hljs-attr">center</span>' 
      }} <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClose}</span>&gt;</span>
        {/* å¼¹çª—å®¹å™¨ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
          <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">fff</span>', 
          <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">8px</span>', 
          <span class="hljs-attr">width:</span> '<span class="hljs-attr">500px</span>', 
          <span class="hljs-attr">maxWidth:</span> '<span class="hljs-attr">90vw</span>', 
          <span class="hljs-attr">position:</span> '<span class="hljs-attr">relative</span>',
          <span class="hljs-attr">onClick:</span> (<span class="hljs-attr">e</span>) =&gt;</span> e.stopPropagation() // é˜»æ­¢å†’æ³¡å…³é—­å¼¹çª—
        }}&gt;
          {/* å³ä¸Šè§’æ’æ§½ï¼ˆé»˜è®¤å…³é—­æŒ‰é’®ï¼‰ */}
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">position:</span> '<span class="hljs-attr">absolute</span>', <span class="hljs-attr">top:</span> '<span class="hljs-attr">16px</span>', <span class="hljs-attr">right:</span> '<span class="hljs-attr">16px</span>' }}&gt;</span>
            {slots.closeBtn}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

          {/* å¤´éƒ¨æ’æ§½ */}
          {slots.header &amp;&amp; (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">16px</span> <span class="hljs-attr">24px</span>', <span class="hljs-attr">borderBottom:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">eee</span>' }}&gt;</span>
              {slots.header}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          )}

          {/* ä¸»ä½“æ’æ§½ */}
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">24px</span>' }}&gt;</span>
            {slots.body || children} {/* å…¼å®¹é»˜è®¤æ’æ§½ */}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

          {/* åº•éƒ¨æ’æ§½ */}
          {slots.footer &amp;&amp; (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">16px</span> <span class="hljs-attr">24px</span>', <span class="hljs-attr">borderTop:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">eee</span>', <span class="hljs-attr">textAlign:</span> '<span class="hljs-attr">right</span>' }}&gt;</span>
              {slots.footer}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ModalContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// 3. å®šä¹‰ä¸“ç”¨æ’æ§½ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ModalHeader</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> { registerSlot } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ModalContext</span>);

  <span class="hljs-comment">// ç»„ä»¶æŒ‚è½½æ—¶æ³¨å†Œæ’æ§½ï¼Œå¸è½½æ—¶æ¸…é™¤</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">registerSlot</span>(<span class="hljs-string">'header'</span>, children);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">registerSlot</span>(<span class="hljs-string">'header'</span>, <span class="hljs-literal">null</span>);
  }, [children, registerSlot]);

  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// è‡ªèº«ä¸æ¸²æŸ“ï¼Œä»…æ³¨å†Œå†…å®¹</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ModalBody</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> { registerSlot } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ModalContext</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">registerSlot</span>(<span class="hljs-string">'body'</span>, children);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">registerSlot</span>(<span class="hljs-string">'body'</span>, <span class="hljs-literal">null</span>);
  }, [children, registerSlot]);

  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ModalFooter</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> { registerSlot } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ModalContext</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">registerSlot</span>(<span class="hljs-string">'footer'</span>, children);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">registerSlot</span>(<span class="hljs-string">'footer'</span>, <span class="hljs-literal">null</span>);
  }, [children, registerSlot]);

  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ModalCloseBtn</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> { registerSlot } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ModalContext</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">registerSlot</span>(<span class="hljs-string">'closeBtn'</span>, children);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">registerSlot</span>(<span class="hljs-string">'closeBtn'</span>, <span class="hljs-literal">null</span>);
  }, [children, registerSlot]);

  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}

<span class="hljs-comment">// 4. çˆ¶ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [isModalOpen, setIsModalOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsModalOpen(true)}
        style={{ padding: '8px 16px', backgroundColor: '#42b983', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}
      &gt;
        æ‰“å¼€å¼¹çª—
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">Modal</span> <span class="hljs-attr">isOpen</span>=<span class="hljs-string">{isModalOpen}</span> <span class="hljs-attr">onClose</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsModalOpen(false)}&gt;
        {/* ä¸“ç”¨æ’æ§½ç»„ä»¶ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">ModalHeader</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> '<span class="hljs-attr">0</span>', <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">18px</span>' }}&gt;</span>ä¿®æ”¹ä¸ªäººä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">ModalHeader</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">ModalBody</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>', <span class="hljs-attr">flexDirection:</span> '<span class="hljs-attr">column</span>', <span class="hljs-attr">gap:</span> '<span class="hljs-attr">16px</span>' }}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> '<span class="hljs-attr">block</span>', <span class="hljs-attr">marginBottom:</span> '<span class="hljs-attr">4px</span>', <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">14px</span>' }}&gt;</span>å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
                <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
                <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">"å¼ ä¸‰"</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> '<span class="hljs-attr">100</span>%', <span class="hljs-attr">padding:</span> '<span class="hljs-attr">8px</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ddd</span>', <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>' }}
              /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> '<span class="hljs-attr">block</span>', <span class="hljs-attr">marginBottom:</span> '<span class="hljs-attr">4px</span>', <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">14px</span>' }}&gt;</span>é‚®ç®±<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
                <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span> 
                <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">"zhangsan@example.com"</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> '<span class="hljs-attr">100</span>%', <span class="hljs-attr">padding:</span> '<span class="hljs-attr">8px</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ddd</span>', <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>' }}
              /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">ModalBody</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">ModalFooter</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>', <span class="hljs-attr">gap:</span> '<span class="hljs-attr">8px</span>', <span class="hljs-attr">justifyContent:</span> '<span class="hljs-attr">flex-end</span>' }}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsModalOpen(false)}
              style={{ padding: '8px 16px', backgroundColor: '#fff', color: '#333', border: '1px solid #ddd', borderRadius: '4px' }}
            &gt;
              å–æ¶ˆ
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
              <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">8px</span> <span class="hljs-attr">16px</span>', <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">42b983</span>', <span class="hljs-attr">color:</span> '<span class="hljs-attr">white</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">none</span>', <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>' }}
            &gt;</span>
              ä¿å­˜ä¿®æ”¹
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">ModalFooter</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">ModalCloseBtn</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsModalOpen(false)}
            style={{ background: 'none', border: 'none', fontSize: '18px', cursor: 'pointer', color: '#666' }}
          &gt;
            å…³é—­
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">ModalCloseBtn</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-18">å…­ã€ç¬¬ä¸‰æ–¹åº“è¾…åŠ©ï¼šreact-slotï¼ˆç®€åŒ–å‘½åæ’æ§½ï¼‰</h2>
<p>å¦‚æœé¡¹ç›®ä¸­éœ€è¦å¤§é‡ä½¿ç”¨å‘½åæ’æ§½ï¼Œå¯å€ŸåŠ©ç¬¬ä¸‰æ–¹åº“Â <code>react-slot</code>Â ç®€åŒ–ä»£ç ï¼Œå…¶æä¾›äº†Â <code>&lt;Slot&gt;</code>Â å’ŒÂ <code>&lt;Fill&gt;</code>Â ç»„ä»¶ï¼Œè¯­æ³•æ›´æ¥è¿‘åŸç”Ÿæ’æ§½ï¼Œé€‚ç”¨äºè¿½æ±‚ç®€æ´è¯­æ³•çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-19">ç”¨æ³•ç¤ºä¾‹ï¼šå¯¼èˆªæ ç»„ä»¶</h3>
<p>jsx</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// 1. å®‰è£…ä¾èµ–</span>
<span class="hljs-comment">// npm install react-slot</span>

<span class="hljs-comment">// 2. å¯¼å…¥ç»„ä»¶</span>
<span class="hljs-selector-tag">import</span> { <span class="hljs-selector-tag">Slot</span>, <span class="hljs-selector-tag">Fill</span> } <span class="hljs-selector-tag">from</span> '<span class="hljs-selector-tag">react-slot</span>';

<span class="hljs-comment">// 3. å­ç»„ä»¶ï¼šå¯¼èˆªæ ï¼ˆå®šä¹‰æ’æ§½ï¼‰</span>
<span class="hljs-selector-tag">function</span> <span class="hljs-selector-tag">Navbar</span>() {
  <span class="hljs-selector-tag">return</span> (
    &lt;nav style={{ 
      backgroundColor: '#2c3e50', 
      <span class="hljs-attribute">padding</span>: <span class="hljs-string">'16px 24px'</span>, 
      <span class="hljs-attribute">display</span>: <span class="hljs-string">'flex'</span>, 
      <span class="hljs-attribute">justifyContent</span>: <span class="hljs-string">'space-between'</span>, 
      <span class="hljs-attribute">alignItems</span>: <span class="hljs-string">'center'</span> 
    }}&gt;
      {<span class="hljs-comment">/* å·¦ä¾§æ’æ§½ */</span>}
      &lt;div style={{ <span class="hljs-attribute">display</span>: <span class="hljs-string">'flex'</span>, <span class="hljs-attribute">alignItems</span>: <span class="hljs-string">'center'</span> }}&gt;
        &lt;Slot name=<span class="hljs-string">"logo"</span> /&gt;
      &lt;/div&gt;

      {<span class="hljs-comment">/* ä¸­é—´æ’æ§½ */</span>}
      &lt;div style={{ <span class="hljs-attribute">display</span>: <span class="hljs-string">'flex'</span>, <span class="hljs-attribute">gap</span>: <span class="hljs-string">'24px'</span> }}&gt;
        &lt;Slot name=<span class="hljs-string">"menu"</span> /&gt;
      &lt;/div&gt;

      {<span class="hljs-comment">/* å³ä¾§æ’æ§½ */</span>}
      &lt;div style={{ <span class="hljs-attribute">display</span>: <span class="hljs-string">'flex'</span>, <span class="hljs-attribute">alignItems</span>: <span class="hljs-string">'center'</span> }}&gt;
        &lt;Slot name=<span class="hljs-string">"user"</span> /&gt;
      &lt;/div&gt;
    &lt;/nav&gt;
  );
}

<span class="hljs-comment">// 4. çˆ¶ç»„ä»¶ä½¿ç”¨ï¼šå¡«å……æ’æ§½</span>
<span class="hljs-selector-tag">function</span> <span class="hljs-selector-tag">App</span>() {
  <span class="hljs-selector-tag">return</span> (
    &lt;Navbar&gt;
      {<span class="hljs-comment">/* å¡«å…… logo æ’æ§½ */</span>}
      &lt;Fill name=<span class="hljs-string">"logo"</span>&gt;
        &lt;h1 style={{ <span class="hljs-attribute">margin</span>: <span class="hljs-string">'0'</span>, <span class="hljs-attribute">color</span>: <span class="hljs-string">'white'</span>, <span class="hljs-attribute">fontSize</span>: <span class="hljs-string">'20px'</span> }}&gt;Logo&lt;/h1&gt;
      &lt;/Fill&gt;

      {<span class="hljs-comment">/* å¡«å…… menu æ’æ§½ */</span>}
      &lt;Fill name=<span class="hljs-string">"menu"</span>&gt;
        &lt;a href=<span class="hljs-string">"/"</span> style={{ <span class="hljs-attribute">color</span>: <span class="hljs-string">'white'</span>, <span class="hljs-attribute">textDecoration</span>: <span class="hljs-string">'none'</span> }}&gt;é¦–é¡µ&lt;/a&gt;
        &lt;a href=<span class="hljs-string">"/products"</span> style={{ <span class="hljs-attribute">color</span>: <span class="hljs-string">'white'</span>, <span class="hljs-attribute">textDecoration</span>: <span class="hljs-string">'none'</span> }}&gt;äº§å“&lt;/a&gt;
        &lt;a href=<span class="hljs-string">"/contact"</span> style={{ <span class="hljs-attribute">color</span>: <span class="hljs-string">'white'</span>, <span class="hljs-attribute">textDecoration</span>: <span class="hljs-string">'none'</span> }}&gt;è”ç³»æˆ‘ä»¬&lt;/a&gt;
      &lt;/Fill&gt;

      {<span class="hljs-comment">/* å¡«å…… user æ’æ§½ */</span>}
      &lt;Fill name=<span class="hljs-string">"user"</span>&gt;
        &lt;button style={{ 
          <span class="hljs-attribute">padding</span>: <span class="hljs-string">'6px 12px'</span>, 
          <span class="hljs-attribute">backgroundColor</span>: <span class="hljs-string">'#42b983'</span>, 
          <span class="hljs-attribute">color</span>: <span class="hljs-string">'white'</span>, 
          <span class="hljs-attribute">border</span>: <span class="hljs-string">'none'</span>, 
          <span class="hljs-attribute">borderRadius</span>: <span class="hljs-string">'4px'</span> 
        }}&gt;
          ç™»å½•
        &lt;/button&gt;
      &lt;/Fill&gt;
    &lt;/Navbar&gt;
  );
}
</code></pre>
<h2 data-id="heading-20">ä¸ƒã€æœ€ä½³å®è·µä¸æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-21">1. æ’æ§½æ–¹æ¡ˆé€‰æ‹©æŒ‡å—</h3>
<ul>
<li>ç®€å•å†…å®¹ä¼ é€’ï¼ˆæ— åˆ†åŒºï¼‰â†’Â <code>children</code>Â propï¼ˆé»˜è®¤æ’æ§½ï¼‰ï¼›</li>
<li>å›ºå®šå¤šåŒºåŸŸï¼ˆå¦‚å¸ƒå±€ã€å¡ç‰‡ï¼‰â†’ å¤š props å‘½åæ’æ§½ï¼ˆç®€æ´é«˜æ•ˆï¼‰ï¼›</li>
<li>å­ç»„ä»¶ä¼ æ•°æ® + çˆ¶ç»„ä»¶å®šåˆ¶æ¸²æŸ“ â†’ å‡½æ•°ä½œä¸º childrenï¼ˆä½œç”¨åŸŸæ’æ§½ï¼‰ï¼›</li>
<li>å¤æ‚ç»„ä»¶ï¼ˆå¤šæ’æ§½ã€æ·±åµŒå¥—ï¼‰â†’ ç»„ä»¶ç»„åˆ + Contextï¼›</li>
<li>è¿½æ±‚ Vue å¼ç®€æ´è¯­æ³• â†’ react-slot ç¬¬ä¸‰æ–¹åº“ã€‚</li>
</ul>
<h3 data-id="heading-22">2. æ€§èƒ½ä¼˜åŒ–å…³é”®è¦ç‚¹</h3>
<ul>
<li>é¿å…æ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°ç»„ä»¶ï¼šå°†æ’æ§½å†…å®¹æå–åˆ°ç»„ä»¶å¤–éƒ¨æˆ–ä½¿ç”¨Â <code>useMemo</code>Â ç¼“å­˜ï¼›</li>
</ul>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šæ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°å¯¹è±¡/ç»„ä»¶</span>
&lt;<span class="hljs-title class_">ProductCard</span>&gt;
  {{
    <span class="hljs-attr">title</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å•†å“åç§°<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span>, <span class="hljs-comment">// æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯æ–°å…ƒç´ </span>
    <span class="hljs-attr">action</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>è´­ä¹°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  }}
&lt;/<span class="hljs-title class_">ProductCard</span>&gt;

<span class="hljs-comment">// æ­£ç¡®ç¤ºä¾‹ï¼šç¼“å­˜æ’æ§½å†…å®¹</span>
<span class="hljs-keyword">const</span> productSlots = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">title</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å•†å“åç§°<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span>,
  <span class="hljs-attr">action</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>è´­ä¹°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}), []); <span class="hljs-comment">// æ— ä¾èµ–é¡¹ï¼Œä»…æ¸²æŸ“ä¸€æ¬¡</span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ProductCard</span>&gt;</span>{productSlots}<span class="hljs-tag">&lt;/<span class="hljs-name">ProductCard</span>&gt;</span></span>
</code></pre>
<ul>
<li>é¿å…ä¸å¿…è¦çš„ Context åµŒå¥—ï¼šContext ä¼šå¢åŠ ç»„ä»¶æ¸²æŸ“å¼€é”€ï¼Œç®€å•åœºæ™¯ä¼˜å…ˆä½¿ç”¨ propsï¼›</li>
<li>è¾¹ç•Œå¤„ç†ï¼šä¸ºæ‰€æœ‰æ’æ§½è®¾ç½®é»˜è®¤å€¼ï¼Œé¿å…ç©ºæ¸²æŸ“å¯¼è‡´çš„å¸ƒå±€é”™ä¹±ï¼›</li>
<li>å‡å°‘æ’æ§½å†…å®¹çš„é‡æ¸²æŸ“ï¼šé€šè¿‡Â <code>React.memo</code>Â åŒ…è£…æ’æ§½ç»„ä»¶ï¼Œé¿å…æ— å…³æ›´æ–°ã€‚</li>
</ul>
<h2 data-id="heading-23">å…«ã€æ€»ç»“</h2>
<p>React è™½æ— åŸç”Ÿæ’æ§½è¯­æ³•ï¼Œä½†é€šè¿‡Â <code>children</code>Â propã€å¤š propsã€å‡½æ•°ä½œä¸º childrenã€ç»„ä»¶ç»„åˆ + Context ç­‰åŸç”Ÿèƒ½åŠ›ï¼Œèƒ½å®ç°æ¯” Vue æ›´çµæ´»çš„æ’æ§½æ•ˆæœã€‚æ ¸å¿ƒåœ¨äºç†è§£ã€Œæ’æ§½æ˜¯ç»„ä»¶é—´å†…å®¹ä¸æ•°æ®çš„åŒå‘ä¼ é€’ã€â€”â€” ç®€å•åœºæ™¯ç”¨Â <code>children</code>ï¼Œå¤šåŒºåŸŸç”¨å‘½åæ’æ§½ï¼Œéœ€ä¼ æ•°æ®ç”¨ä½œç”¨åŸŸæ’æ§½ï¼Œå¤æ‚åœºæ™¯ç”¨ç»„ä»¶ç»„åˆ + Contextã€‚</p>
<p>æŒæ¡ React æ’æ§½çš„æ ¸å¿ƒæ˜¯ã€Œæ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„å®ç°æ–¹æ¡ˆã€ï¼Œå¹¶æ³¨é‡æ€§èƒ½ä¼˜åŒ–ï¼Œé¿å…è¿‡åº¦å°è£…ã€‚åˆç†ä½¿ç”¨æ’æ§½èƒ½å¤§å¹…æå‡ç»„ä»¶çš„å¤ç”¨æ€§ä¸æ‰©å±•æ€§ï¼Œæ˜¯ React ç»„ä»¶åŒ–å¼€å‘ä¸­çš„å¿…å¤‡æŠ€å·§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¶Šå—å¼€å‘è€…ç”¨ TRAE åšäº†ä¸ªå¤å¤ç›¸æœºï¼Œè¿˜åŸæ‹ç«‹å¾—æ˜¾å½±è¿‡ç¨‹]]></title>    <link>https://juejin.cn/post/7581423932612706344</link>    <guid>https://juejin.cn/post/7581423932612706344</guid>    <pubDate>2025-12-09T02:25:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581423932612706344" data-draft-id="7581386627676602408" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¶Šå—å¼€å‘è€…ç”¨ TRAE åšäº†ä¸ªå¤å¤ç›¸æœºï¼Œè¿˜åŸæ‹ç«‹å¾—æ˜¾å½±è¿‡ç¨‹"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-12-09T02:25:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TRAE_ai"/> <meta itemprop="url" content="https://juejin.cn/user/3048259110571032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¶Šå—å¼€å‘è€…ç”¨ TRAE åšäº†ä¸ªå¤å¤ç›¸æœºï¼Œè¿˜åŸæ‹ç«‹å¾—æ˜¾å½±è¿‡ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3048259110571032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TRAE_ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:25:32.000Z" title="Tue Dec 09 2025 02:25:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70e7c23621bd4723945c72f1c5488e6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=vILflovwPv7UQU7KryZ%2BNnru%2Fnw%3D" alt="" loading="lazy"/></p>
<p><strong>Flashback æ˜¯ä¸€æ¬¾æ¨¡æ‹Ÿå¤å¤å³æ—¶ç›¸æœºï¼ˆPolaroidï¼‰ä½“éªŒçš„ Web åº”ç”¨ã€‚</strong></p>
<p>ä½œå“æ¥è‡ªè¶Šå—çš„ TRAE ç”¨æˆ· <strong>The Vibe Coders</strong>ï¼ˆæˆå‘˜ï¼šMai Nguyen &amp; Son Leï¼‰ï¼Œä»–ä»¬æ˜¯ä¸¤ä½åç«¯å¼€å‘è€…ï¼Œåœ¨å‚ä¸ 11/22 TRAE è¶Šå— Vibe Coding ä½“éªŒæ´»åŠ¨æ—¶ï¼Œç”¨ TRAE SOLO å®ç°äº†è¿™æ¬¾åŸºäºç½‘é¡µçš„åº”ç”¨ã€‚è¿™æ¬¾ç›¸æœºå¯ä»¥å°†ä½ çš„æ™®é€šæ‘„åƒå¤´å˜æˆä¸€å°è™šæ‹Ÿçš„å¤å¤æ‹ç«‹å¾—ï¼Œå®Œæ•´è¿˜åŸä»æŒ‰ä¸‹å¿«é—¨åˆ°ç…§ç‰‡æ˜¾å½±çš„æ•´ä¸ªè¿‡ç¨‹ã€‚ç”¨æˆ·åªéœ€ä¸€ä¸ªå¸¦æ‘„åƒå¤´çš„è®¾å¤‡ï¼Œå°±å¯ä»¥æ‹æ‘„å¸¦æœ‰å¤å¤æ»¤é•œçš„ç…§ç‰‡ï¼Œå¹¶é€šè¿‡åŠ¨ç”»æ•ˆæœè§‚çœ‹ç…§ç‰‡â€œæ˜¾å½±â€çš„è¿‡ç¨‹ï¼Œä»¿ä½›å›åˆ°äº†èƒ¶ç‰‡å¹´ä»£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/feff18ef033b4d65a505a5d04950771a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=6FseLeTNRO9w5E6KcFC7Vdzg61E%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb515381fe9040f6bf6adf0696bef401~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=ioLvH9T6FnTn26azA1I9tocc7bc%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>ä½œè€…ï¼šMai Nguyen &amp; Son Leï¼ŒTRAE å¼€å‘è€…ç”¨æˆ·</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b668f893d0fb468b9af411bed2dea758~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=NdirerMaUz9MBw2N2qqgoXJV3Dc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>ä¸ºä»€ä¹ˆåšè¿™ä¸ªé¡¹ç›®</strong></h2>
<h3 data-id="heading-1"><strong>é¡¹ç›®èµ·æº</strong></h3>
<p>èµ·åˆï¼Œè¿™åªæ˜¯ä¸€ä¸ªæºäºæœ‹å‹çš„æ‹ç«‹å¾—ç›¸æœºå¸¦æ¥çš„çµæ„Ÿã€‚å›¢é˜Ÿæˆå‘˜ä¹‹ä¸€è¯´ï¼š</p>
<blockquote>
<p>â€œæˆ‘ä»¬æœ‰ä¸ªæœ‹å‹æ‹¥æœ‰ä¸€å°çœŸæ­£çš„å¤å¤æ‹ç«‹å¾—ï¼Œæˆ‘ä»¬éå¸¸å–œæ¬¢å®ƒæ‹ç…§çš„è¿‡ç¨‹å’Œæ„Ÿè§‰ã€‚ä½†ç°å®æ˜¯ï¼Œè¿™ç§ç›¸æœºä»·æ ¼ä¸ä½ï¼Œæˆ‘ä»¬ä¹Ÿä¹°ä¸èµ·ã€‚æ‰€ä»¥æˆ‘ä»¬å†³å®šï¼Œè‡ªå·±åŠ¨æ‰‹ï¼Œç”¨ä»£ç é€ ä¸€å°ã€‚â€</p>
</blockquote>
<p>äºæ˜¯ï¼ŒFlashback åº”è¿è€Œç”Ÿã€‚å®ƒä¸ä»…è§£å†³äº†æ˜‚è´µè®¾å¤‡é—¨æ§›çš„é—®é¢˜ï¼Œè¿˜å¸¦æ¥äº†å¦‚ä¸‹å‡ ç‚¹ä»·å€¼ï¼š</p>
<ul>
<li>
<p><strong>è®©å¤å¤æ‘„å½±é›¶é—¨æ§›ï¼š</strong> åªè¦æœ‰æ‘„åƒå¤´ï¼Œäººäººéƒ½èƒ½å…è´¹ä½“éªŒæ‹ç«‹å¾—çš„ä¹è¶£ã€‚</p>
</li>
<li>
<p><strong>æ¨¡æ‹ŸçœŸå®äº¤äº’ï¼š</strong> ç”¨æˆ·éœ€è¦æ‰‹åŠ¨å¼€æœºã€å–æ™¯ã€æŒ‰å¿«é—¨ï¼Œä»¿ä½›çœŸçš„åœ¨ç”¨ä¸€å°ç‰©ç†ç›¸æœºã€‚</p>
</li>
<li>
<p><strong>è¿˜åŸæ˜¾å½±è¿‡ç¨‹ï¼š</strong> ç…§ç‰‡ä»é»‘å±é€æ¸æ¸…æ™°ï¼Œä»…éœ€çŸ­çŸ­ 3 ç§’ï¼Œå´è®©äººæ„Ÿå—åˆ°ç­‰å¾…çš„ä»ªå¼æ„Ÿã€‚</p>
</li>
<li>
<p><strong>æå‡æƒ…ç»ªä»·å€¼ï¼š</strong> æ…¢ä¸‹æ¥çš„ä¸€æ‹ä¸€æ˜¾ï¼Œæ¯”æ»¤é•œä¸€é”®ç”Ÿæˆæ›´å€¼å¾—çè—ã€‚</p>
</li>
<li>
<p><strong>ä¿ç•™å¤å¤ç¾æ„Ÿï¼š</strong> å¤šç§æ»¤é•œè®©ç…§ç‰‡æ›´å…·â€œè€ç…§ç‰‡â€çš„è´¨æ„Ÿã€‚</p>
</li>
</ul>
<h3 data-id="heading-2"><strong>ç”¨åˆ° TRAE çš„èƒ½åŠ›</strong></h3>
<ul>
<li>
<p><strong>TRAE IDE çš„ SOLO æ¨¡å¼ï¼š</strong> AI è¾…åŠ©å¼€å‘ï¼Œå¸®åŠ©å¿«é€Ÿå®ŒæˆåŸå‹ã€ç”Ÿæˆä»£ç ï¼Œè§£å†³å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„å„ç§é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>ä¸€é”®éƒ¨ç½²åˆ° Vercelï¼š</strong> ç®€åŒ–äº†éƒ¨ç½²æµç¨‹ï¼Œè®©åº”ç”¨å¿«é€Ÿä¸Šçº¿ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e257b8a180374540a8284b971480b39c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=dIm1jsBeXzL57vzTO01cKybbODs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>æ¶æ„è®¾è®¡ï¼šç®€å•æŠ€æœ¯ï¼Œå®Œæ•´ä½“éªŒ</strong></h2>
<h3 data-id="heading-4"><strong>åº”ç”¨æ¶æ„</strong></h3>
<p>Flashback æ˜¯ä¸€ä¸ªçº¯å‰ç«¯æ„å»ºçš„å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ï¼ŒæŠ€æœ¯æ ˆéå¸¸è½»é‡ï¼š</p>
<ul>
<li><strong>HTML + CSS + JavaScriptï¼š</strong> ä¸ä¾èµ–å¤§å‹æ¡†æ¶ï¼Œå…¼å®¹æ€§å¼ºï¼ŒåŠ è½½è¿…é€Ÿã€‚</li>
</ul>
<h3 data-id="heading-5"><strong>æ ¸å¿ƒæµç¨‹</strong></h3>
<ol>
<li>
<p><strong>æƒé™è·å–</strong> - ç”¨æˆ·ç‚¹å‡»ç”µæºæŒ‰é’®ï¼Œæˆæƒä½¿ç”¨æ‘„åƒå¤´</p>
</li>
<li>
<p><strong>å®æ—¶é¢„è§ˆ</strong> - è§†é¢‘æµå®æ—¶æ˜¾ç¤ºï¼Œå¯é¢„è§ˆé€‰ä¸­çš„æ»¤é•œæ•ˆæœ</p>
</li>
<li>
<p><strong>å›¾åƒæ•è·</strong> - ç‚¹å‡»å¿«é—¨ï¼Œå°†å½“å‰ç”»é¢æ•è·åˆ°ç”»å¸ƒ</p>
</li>
<li>
<p><strong>æ»¤é•œå¤„ç†</strong> - å¯¹å›¾åƒåº”ç”¨æ»¤é•œå¹¶è¿›è¡Œå¤„ç†</p>
</li>
<li>
<p><strong>æ˜¾å½±åŠ¨ç”»</strong> - ç…§ç‰‡å¸¦ç€åŠ¨ç”»æ•ˆæœâ€œå¼¹å‡ºâ€ï¼Œç„¶åé€æ¸â€œæ˜¾å½±â€</p>
</li>
<li>
<p><strong>ç…§ç‰‡æ”¶è—</strong> - ç”¨æˆ·å¯ä»¥æŠŠç…§ç‰‡æ‹–åˆ°é’‰æ¿ä¸Šæ”¶è—</p>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e275473036c440cda25d2b544cd114aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=8MhqrcWPNDoEg6jw2PV1NF1G2PU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6"><strong>æ•ˆæœå±•ç¤º</strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3af0ea6537844c38ec130b4e9644952~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=xKDhZYOCdCEgtmpkkdm%2By5oSA7g%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7"><strong>åœ¨çº¿ä½“éªŒ</strong></h3>
<p><strong>åœ¨çº¿æ¼”ç¤ºåœ°å€ï¼š</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fflashbackcamera.vercel.app%2F" target="_blank" title="https://flashbackcamera.vercel.app/" ref="nofollow noopener noreferrer">flashbackcamera.vercel.app/</a></p>
<h3 data-id="heading-8"><strong>ä¸»è¦åŠŸèƒ½å±•ç¤º</strong></h3>
<ul>
<li>
<p>ç›¸æœºå¼€æœºåŠ¨ç”»å’Œå®æ—¶é¢„è§ˆ</p>
</li>
<li>
<p>å››ç§å¤å¤æ»¤é•œï¼šæ­£å¸¸ã€æŸ¯è¾¾å½©è‰²ã€è¤ªè‰²å“‘å…‰ã€8mm èƒ¶ç‰‡</p>
</li>
<li>
<p>ç…§ç‰‡å¼¹å‡ºå’Œæ˜¾å½±åŠ¨ç”»æ•ˆæœ</p>
</li>
<li>
<p>æ‹–æ”¾å¼ç…§ç‰‡é’‰æ¿</p>
</li>
<li>
<p>ç§»åŠ¨ç«¯å“åº”å¼é€‚é…</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c46c0a8b50434e5cb4910fe54c738f09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=v5d7xM%2BGoJz%2BO6O5iGiyTqfW68Y%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9"><strong>æŒ‘æˆ˜ä¸ç»éªŒæ€»ç»“</strong></h2>
<h3 data-id="heading-10"><strong>é‡åˆ°çš„æŠ€æœ¯éš¾é¢˜</strong></h3>
<p><strong>1. è·¨æµè§ˆå™¨çš„æ‘„åƒå¤´æƒé™é—®é¢˜</strong></p>
<ul>
<li>
<p><strong>é‡åˆ°çš„æŒ‘æˆ˜ï¼š</strong> Chromeã€Firefox å’Œ Safari å¤„ç†åª’ä½“æƒé™çš„æ–¹å¼å„ä¸ç›¸åŒï¼Œå¾ˆéš¾åšåˆ°ç»Ÿä¸€ä½“éªŒã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> é’ˆå¯¹ä¸åŒæµè§ˆå™¨åšäº†å¤§é‡æµ‹è¯•ï¼Œå¹¶å®ç°äº†å¤šå¥—åå¤‡æ–¹æ¡ˆæ¥ç¡®ä¿å…¼å®¹æ€§ã€‚</p>
</li>
</ul>
<p><strong>2. å®æ—¶æ»¤é•œçš„æ€§èƒ½ä¼˜åŒ–</strong></p>
<ul>
<li>
<p><strong>é‡åˆ°çš„æŒ‘æˆ˜ï¼š</strong> éœ€è¦åœ¨è§†é¢‘æµä¸Šå®æ—¶åº”ç”¨æ»¤é•œï¼ŒåŒæ—¶ä¿æŒ 60fps çš„æµç•…åº¦ï¼Œè¿™å¯¹æ€§èƒ½è¦æ±‚å¾ˆé«˜ã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> ç»è¿‡æµ‹è¯•å‘ç°ï¼ŒCSS æ»¤é•œåœ¨å®æ—¶é¢„è§ˆåœºæ™¯ä¸‹æ¯” Canvas æ»¤é•œæ€§èƒ½æ›´å¥½ï¼Œæœ€ç»ˆé‡‡ç”¨äº† CSS æ–¹æ¡ˆã€‚</p>
</li>
</ul>
<p><strong>3. æ‹–æ”¾åŠŸèƒ½çš„å®ç°</strong></p>
<ul>
<li>
<p><strong>é‡åˆ°çš„æŒ‘æˆ˜ï¼š</strong> è¦è®©æ‹–æ”¾åŠŸèƒ½åœ¨æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯éƒ½èƒ½æµç•…ä½¿ç”¨ï¼Œéœ€è¦å¤„ç†å¤šç§äº‹ä»¶ç±»å‹ï¼Œè¿˜è¦é˜»æ­¢æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> å¼€å‘äº†è‡ªå®šä¹‰çš„æ‹–æ”¾ç³»ç»Ÿï¼Œç»Ÿä¸€å¤„ç†ä¸åŒè®¾å¤‡çš„äº¤äº’é€»è¾‘ã€‚</p>
</li>
</ul>
<h3 data-id="heading-11"><strong>é‡åˆ°çš„è®¾è®¡éš¾é¢˜</strong></h3>
<p><strong>4. å¦‚ä½•åšå‡ºçœŸå®çš„å¤å¤æ„Ÿ</strong></p>
<ul>
<li>
<p><strong>é‡åˆ°çš„æŒ‘æˆ˜ï¼š</strong> æ—¢è¦æœ‰å¤å¤ç¾å­¦ï¼Œåˆè¦ä¿è¯ç°ä»£ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œè¿™ä¸¤è€…ä¹‹é—´å¾ˆéš¾å¹³è¡¡ã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> åœ¨ç›¸æœºè®¾è®¡ã€åŠ¨ç”»æ•ˆæœå’Œäº¤äº’æ–¹å¼ä¸Šåå¤æ‰“ç£¨ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†åˆé€‚çš„å¹³è¡¡ç‚¹ã€‚</p>
</li>
</ul>
<p><strong>5. å“åº”å¼ 3D æ•ˆæœçš„é€‚é…</strong></p>
<ul>
<li>
<p><strong>é‡åˆ°çš„æŒ‘æˆ˜ï¼š</strong> 3D ç›¸æœºçš„è§†å·®æ•ˆæœéœ€è¦åœ¨å„ç§å±å¹•å°ºå¯¸ä¸Šéƒ½çœ‹èµ·æ¥è‡ªç„¶ï¼Œä»å°æ‰‹æœºåˆ°å¤§æ˜¾ç¤ºå™¨éƒ½è¦å…¼é¡¾ã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> é’ˆå¯¹ä¸åŒå±å¹•å°ºå¯¸è°ƒæ•´äº† 3D æ•ˆæœå‚æ•°ï¼Œç¡®ä¿åœ¨å„ç§è®¾å¤‡ä¸Šéƒ½æœ‰å¥½çš„è§†è§‰ä½“éªŒã€‚</p>
</li>
</ul>
<h3 data-id="heading-12"><strong>æ ¸å¿ƒç»éªŒæ€»ç»“</strong></h3>
<h4 data-id="heading-13"><strong>ç”¨æˆ·ä½“éªŒæ°¸è¿œæ˜¯ç¬¬ä¸€ä½çš„</strong></h4>
<p>æ¯”èµ·å®ç°å¤šä¹ˆé«˜çº§çš„å›¾åƒå¤„ç†æŠ€æœ¯ï¼Œè®©ç”¨æˆ·æ„Ÿå—åˆ°æ€€æ—§æ°›å›´å’Œæµç•…äº¤äº’æ›´é‡è¦</p>
<h4 data-id="heading-14"><strong>éŸ³æ•ˆèƒ½å¤§å¹…æå‡çœŸå®æ„Ÿ</strong></h4>
<p>ç®€å•çš„éŸ³æ•ˆå°±èƒ½è®©æ•´ä¸ªä½“éªŒçš„çœŸå®åº¦æå‡ä¸€å¤§æˆª</p>
<h3 data-id="heading-15"/>
<p>Flashback Camera ä¸åªæ˜¯ä¸€ä¸ªç©å…·é¡¹ç›®ï¼Œå®ƒæ˜¯ä¸€æ¬¡å…³äºâ€œæ•°å­—æ€€æ—§â€çš„å®éªŒï¼Œä¹Ÿæ˜¯å¯¹ Web æŠ€æœ¯å¯ç©æ€§çš„ä¸€æ¬¡ç²¾å½©æ¼”ç»ã€‚The Vibe Coders å›¢é˜Ÿç”¨æœ€æœ´ç´ çš„æŠ€æœ¯ï¼Œåˆ›é€ äº†æœ€å¯Œæƒ…æ„Ÿçš„ä½“éªŒï¼Œä»¤äººçœ¼å‰ä¸€äº®ã€‚</p>
<p>åœ¨è¿™ä¸ªäººäººè¿½æ±‚â€œæ•ˆç‡æœ€å¤§åŒ–â€çš„ä¸–ç•Œï¼Œè¿™ç§å¸¦ç‚¹ä»ªå¼æ„Ÿå’Œæµªæ¼«æ°”æ¯çš„å°å·¥å…·ï¼Œåè€Œæ›´å€¼å¾—è¢«è®°ä½ã€‚</p>
<p>æœŸå¾…æœªæ¥ï¼Œä»–ä»¬è¿˜èƒ½ç”¨ä»£ç å¸¦æ¥æ›´å¤šâ€œæœ‰æ¸©åº¦â€çš„åˆ›æ„é¡¹ç›®ã€‚</p>
<h5 data-id="heading-16"><strong>æ›´å¤šé¡¹ç›®å±•ç¤ºï¼š</strong></h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/881d17522ab24d1984883250c17dd350~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=%2B58Jnx4pcX0K8xkoD2uvigu9LNk%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3792d10814094bab8148f0e1373c9948~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=9gCLUmS%2BMQYzpJOpKls3XXwA%2BnY%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b827f3faf97140909172d44ed85aedab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=sW%2FGYj1XS2R0h5Ez0bgP6FC9wfE%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5490b380a8b4884bd316434d448e3c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=wg7VlmQElGYyGFJwDBxRzwxmcPM%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dc7766b471d4049bde849fece7ae194~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=d3pttTxQyIwcpRdZZtK8DZBjyyQ%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a557870b8c304aefab53bef75e4bc072~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765851931&amp;x-signature=dRqvfTDVLeKN75EoGnaw253iwBw%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[gemini3æ‰‹åŠ¿äº’åŠ¨åœ£è¯æ ‘ä¿å§†çº§æ•™ç¨‹æ¥äº†ï¼é™„æç¤ºè¯]]></title>    <link>https://juejin.cn/post/7581545175508762676</link>    <guid>https://juejin.cn/post/7581545175508762676</guid>    <pubDate>2025-12-09T06:31:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581545175508762676" data-draft-id="7581486065996169251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="gemini3æ‰‹åŠ¿äº’åŠ¨åœ£è¯æ ‘ä¿å§†çº§æ•™ç¨‹æ¥äº†ï¼é™„æç¤ºè¯"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-09T06:31:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ˜ŸAIå·¥ä½œå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2250051536050763"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            gemini3æ‰‹åŠ¿äº’åŠ¨åœ£è¯æ ‘ä¿å§†çº§æ•™ç¨‹æ¥äº†ï¼é™„æç¤ºè¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2250051536050763/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ˜ŸAIå·¥ä½œå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T06:31:29.000Z" title="Tue Dec 09 2025 06:31:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8d0b888c054489cab9d69619cfc65e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765866689&amp;x-signature=O8ZyRMXmGWkSDuPxtzU17mIet1Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å“ˆå–½ï¼Œå¤§å®¶å¥½</p>
<p>æˆ‘æ˜¯é˜¿æ˜ŸğŸ‘‹</p>
<p>ç ´é˜²äº†ï¼è°è¿˜åœ¨ç”»äºŒç»´åœ£è¯æ ‘ï¼Ÿ</p>
<p>Gemini3ç›´æ¥è®©å¤§å®¶ç”¨æ‰‹åŠ¿éš”ç©ºæ“æ§3Dä¸–ç•Œï¼ğŸ‘‡ï¼ˆæç¤ºè¯2000å­—å®Œæ•´ç‰ˆpinglunåŒºæˆ‘åˆ†äº«ç»™å¤§å®¶ï¼‰ç‚¹å‡»æ’­æ”¾çœ‹æ•ˆæœğŸ‘€</p>
<p>å®ƒä¸»è¦å®ç°çš„æ•ˆæœå¦‚ä¸‹ğŸ‘‡ğŸ»</p>
<p>ğŸŒŒéš”ç©ºæåˆï¼Œç²’å­ç¬é—´èšç„¦åˆ°ä½ ä¸Šä¼ çš„èŠ‚æ—¥ç…§ç‰‡ä¸Š</p>
<p>ğŸ‘‹å¼ å¼€æ‰‹æŒ - 1500ä¸ªé‡‘è‰²ç²’å­â€œç °â€åœ°ç‚¸å¼€æˆæ˜Ÿäº‘</p>
<p>âœŠè½»æ¾æ¡æ‹³ - ç²’å­èºæ—‹æ±‡èš</p>
<p>ğŸ›°æ‰‹éƒ¨è¿½è¸ª - æ•´ä¸ª3Dåœºæ™¯è·Ÿç€ä½ çš„æ‰‹æ—‹è½¬ï¼</p>
<h2 data-id="heading-0">ç¬¬ä¸€æ­¥ï¼šå¤åˆ¶è¿™æ®µæç¤ºè¯</h2>
<p>æç¤ºè¯æ”¾åœ¨è¿™é‡Œäº†</p>
<p>å‘ç»™gemini3çš„builderå°±å¯ä»¥å•¦</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ba7feafa4984ae191c15a4ec27f5651~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765866689&amp;x-signature=hJ5jT8080XPBbHq0M9BpVklXqnA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ï¼ˆæç¤ºè¯2000å­—å®Œæ•´ç‰ˆï¼ŒpinglunåŒºæˆ‘åˆ†äº«ç»™å¤§å®¶ï¼‰</p>
<pre><code class="hljs language-typescript" lang="typescript">ğŸš€ <span class="hljs-title class_">Prompt</span>:
è§’è‰²è®¾å®šï¼š 
ä½ æ˜¯ä¸€ä½ä¸–ç•Œçº§çš„ <span class="hljs-title class_">Creative</span> <span class="hljs-title class_">Technologist</span>ï¼Œç²¾é€š <span class="hljs-title class_">Three</span>.<span class="hljs-property">js</span> (<span class="hljs-title class_">WebGL</span>)ã€<span class="hljs-variable constant_">GLSL</span> ç€è‰²å™¨é€»è¾‘ä»¥åŠ <span class="hljs-title class_">Google</span> <span class="hljs-title class_">MediaPipe</span> è®¡ç®—æœºè§†è§‰é›†æˆã€‚
ä»»åŠ¡ç›®æ ‡ï¼š 
è¯·ç¼–å†™ä¸€ä¸ªå•æ–‡ä»¶ ( <span class="hljs-title class_">Single</span>-<span class="hljs-title class_">File</span> )  çš„ <span class="hljs-variable constant_">HTML</span> é¡¹ç›®ï¼Œæ–‡ä»¶åä¸ºåœ£è¯æ ‘ã€‚è¯¥é¡¹ç›®å¿…é¡»åŒ…å«å®Œæ•´çš„ <span class="hljs-variable constant_">HTML</span> ç»“æ„ã€<span class="hljs-variable constant_">CSS</span> æ ·å¼å’ŒåŸºäº <span class="hljs-variable constant_">ES</span> <span class="hljs-title class_">Module</span> çš„ <span class="hljs-title class_">JavaScript</span> ä»£ç ã€‚
æ ¸å¿ƒæŠ€æœ¯æ ˆçº¦æŸ (å¿…é¡»ä¸¥æ ¼éµå®ˆ)ï¼š 
ä¾èµ–ç®¡ç†ï¼š  ä½¿ç”¨ &lt;script <span class="hljs-keyword">type</span>=<span class="hljs-string">"importmap"</span>&gt; å¼•å…¥ï¼š
<span class="hljs-attr">three</span>: <span class="hljs-attr">https</span>:<span class="hljs-comment">//cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js</span>
three/addons/: <span class="hljs-attr">https</span>:<span class="hljs-comment">//cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/</span>
<span class="hljs-meta">@mediapipe</span>/tasks-<span class="hljs-attr">vision</span>: <span class="hljs-attr">https</span>:<span class="hljs-comment">//cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/+esm</span>
ä»£ç é£æ ¼ï¼š  ä½¿ç”¨ç°ä»£ <span class="hljs-title class_">ES6</span>+ è¯­æ³•ï¼Œç±» (<span class="hljs-title class_">Class</span>) ç»“æ„ç®¡ç†ç²’å­ï¼Œå¼‚æ­¥/ç­‰å¾… (<span class="hljs-title class_">Async</span>/<span class="hljs-title class_">Await</span>) å¤„ç†åŠ è½½ã€‚
ğŸ“ è¯¦ç»†å¼€å‘è§„æ ¼è¯´æ˜ä¹¦
<span class="hljs-number">1.</span> <span class="hljs-variable constant_">UI</span> è®¾è®¡ä¸ <span class="hljs-variable constant_">CSS</span> æ ·å¼ (<span class="hljs-title class_">Visual</span> <span class="hljs-title class_">Identity</span>)
å­—ä½“ï¼š  å¼•å…¥ <span class="hljs-title class_">Google</span> <span class="hljs-title class_">Fonts</span> <span class="hljs-string">'Cinzel'</span> (æ ‡é¢˜) å’Œ <span class="hljs-string">'Times New Roman'</span> (æ­£æ–‡)ã€‚
é…è‰²ï¼š  èƒŒæ™¯ #<span class="hljs-number">000000</span>ã€‚ä¸»è‰²è°ƒï¼šé¦™æ§Ÿé‡‘ #d4af37ï¼Œå¥¶æ²¹ç™½ #fceea7ã€‚
<span class="hljs-variable constant_">UI</span> ç»„ä»¶ï¼š 
<span class="hljs-title class_">Loader</span> ï¼š  é»‘è‰²å…¨å±é®ç½©ï¼Œä¸­é—´ä¸º 40px çš„é‡‘è‰²æ—‹è½¬ <span class="hljs-title class_">Spinner</span> (border-<span class="hljs-attr">top</span>: 1px solid #d4af37)ï¼Œä¸‹æ–¹æ–‡å­— <span class="hljs-string">"LOADING HOLIDAY MAGIC"</span>ã€‚åˆå§‹åŒ–å®Œæˆåæ·¡å‡ºã€‚
æ ‡é¢˜ï¼š  é¡¶éƒ¨å±…ä¸­ &lt;h1&gt; <span class="hljs-string">"Merry Christmas"</span>ï¼Œå­—å· 56pxï¼Œä½¿ç”¨ <span class="hljs-variable constant_">CSS</span> linear-gradient (ç™½åˆ°é‡‘) å®ç°æ–‡å­—æ¸å˜è‰²ï¼Œå¹¶åŠ è¾‰å…‰é˜´å½±ã€‚
ä¸Šä¼ æ§ä»¶ï¼š  ä¸€ä¸ªå¸¦æœ‰ .<span class="hljs-property">upload</span>-wrapper ç±»çš„å®¹å™¨ã€‚æŒ‰é’®æ ·å¼ä¸ºåŠé€æ˜ç£¨ç ‚ç»ç’ƒ (backdrop-<span class="hljs-attr">filter</span>: blur)ï¼Œè¾¹æ¡†é‡‘è‰²ï¼Œæ–‡å­— <span class="hljs-string">"ADD MEMORIES"</span>ã€‚
æç¤ºæ–‡æœ¬ï¼š  æŒ‰é’®ä¸‹æ–¹æ˜¾ç¤º <span class="hljs-string">"Press 'H' to Hide Controls"</span>ã€‚
éšè—é€»è¾‘ï¼š  å®šä¹‰ <span class="hljs-variable constant_">CSS</span> ç±» .<span class="hljs-property">ui</span>-hidden (<span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>; pointer-<span class="hljs-attr">events</span>: none)ã€‚ç›‘å¬é”®ç›˜ H é”®åˆ‡æ¢æ­¤çŠ¶æ€ã€‚
<span class="hljs-title class_">Webcam</span> ï¼š  åœ¨å³ä¸‹è§’åˆ›å»ºä¸€ä¸ªä¸å¯è§çš„å®¹å™¨ (<span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>)ï¼ŒåŒ…å« &lt;video&gt; å’Œ 160x120 çš„ &lt;canvas&gt; ç”¨äº <span class="hljs-variable constant_">CV</span> æ¨ç†ã€‚
<span class="hljs-number">2.</span> <span class="hljs-title class_">Three</span>.<span class="hljs-property">js</span> åœºæ™¯æ„å»º (<span class="hljs-title class_">Scene</span> <span class="hljs-title class_">Setup</span>)
æ¸²æŸ“å™¨ï¼š  <span class="hljs-title class_">WebGLRenderer</span> (<span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span>)ï¼ŒtoneMapping è®¾ç½®ä¸º <span class="hljs-title class_">ReinhardToneMapping</span> (æ›å…‰ <span class="hljs-number">2.2</span>)ã€‚
ç›¸æœºï¼š  é€è§†ç›¸æœºï¼Œä½ç½® (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">50</span>)ã€‚
ç¯å¢ƒ ( <span class="hljs-title class_">Environment</span> )ï¼š  ä½¿ç”¨ <span class="hljs-title class_">RoomEnvironment</span> é…åˆ <span class="hljs-title class_">PMREMGenerator</span> ç”Ÿæˆé«˜åå°„é‡‘å±ç¯å¢ƒè´´å›¾ã€‚
åæœŸå¤„ç† ( <span class="hljs-title class_">Post</span>-<span class="hljs-title class_">Processing</span> )ï¼š 
ä½¿ç”¨ <span class="hljs-title class_">EffectComposer</span>ã€‚
æ·»åŠ  <span class="hljs-title class_">UnrealBloomPass</span> (è¾‰å…‰ç‰¹æ•ˆ)ã€‚å‚æ•°å¿…é¡»ä¸ºï¼š  resolution (<span class="hljs-variable language_">window</span> size), <span class="hljs-attr">strength</span>: <span class="hljs-number">0.45</span>, <span class="hljs-attr">radius</span>: <span class="hljs-number">0.4</span>, <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.7</span>ã€‚
ç¯å…‰ç³»ç»Ÿï¼š 
<span class="hljs-title class_">AmbientLight</span> (<span class="hljs-number">0.6</span>)ã€‚
å†…éƒ¨ <span class="hljs-title class_">PointLight</span> (æ©™è‰², å¼ºåº¦ <span class="hljs-number">2</span>)ã€‚
<span class="hljs-title class_">SpotLight</span> (é‡‘è‰², å¼ºåº¦ <span class="hljs-number">1200</span>, ä½ç½® <span class="hljs-number">30</span>,<span class="hljs-number">40</span>,<span class="hljs-number">40</span>)ã€‚
<span class="hljs-title class_">SpotLight</span> (è“è‰², å¼ºåº¦ <span class="hljs-number">600</span>, ä½ç½® -<span class="hljs-number">30</span>,<span class="hljs-number">20</span>,-<span class="hljs-number">30</span>) ç”¨äºå†·æš–å¯¹æ¯”ã€‚
<span class="hljs-number">3.</span> ç²’å­ç³»ç»Ÿä¸å†…å®¹ (<span class="hljs-title class_">Content</span> <span class="hljs-title class_">Generation</span>)
ç²’å­æ€»æ•°ï¼š  çº¦ <span class="hljs-number">1500</span> ä¸ªä¸»ä½“ç²’å­ + <span class="hljs-number">2500</span> ä¸ªå°˜åŸƒç²’å­ã€‚
å‡ ä½•ä½“æ··åˆï¼š 
<span class="hljs-title class_">BoxGeometry</span> :  æè´¨ä¸ºé‡‘è‰²å’Œæ·±ç»¿è‰² <span class="hljs-title class_">MeshStandardMaterial</span>ã€‚
<span class="hljs-title class_">SphereGeometry</span> :  æè´¨ä¸ºé‡‘è‰²å’Œçº¢è‰² <span class="hljs-title class_">MeshPhysicalMaterial</span> (çº¢è‰²å¸¦ clearcoat)ã€‚
<span class="hljs-title class_">Candy</span> <span class="hljs-title class_">Cane</span> (ç³–æœæ‰‹æ–):  ä½¿ç”¨ <span class="hljs-title class_">CatmullRomCurve3</span> ç”Ÿæˆå¼¯é’©è·¯å¾„ï¼Œé…åˆ <span class="hljs-title class_">TubeGeometry</span>ã€‚å¿…é¡»ç¨‹åºåŒ–ç”Ÿæˆçº¹ç†ï¼šä½¿ç”¨ <span class="hljs-title class_">Canvas</span> 2D <span class="hljs-variable constant_">API</span> ç»˜åˆ¶ç™½åº•çº¢æ–œçº¹ï¼Œåˆ›å»º <span class="hljs-title class_">CanvasTexture</span>ã€‚
ç…§ç‰‡å¢™åŠŸèƒ½ï¼š 
é»˜è®¤ç”Ÿæˆä¸€å¼ å†™æœ‰ <span class="hljs-string">"JOYEUX NOEL"</span> çš„ <span class="hljs-title class_">Canvas</span> çº¹ç†ç…§ç‰‡ã€‚
ç…§ç‰‡å¿…é¡»åŒ…è£¹åœ¨é‡‘è‰²çš„ç›¸æ¡† (<span class="hljs-title class_">BoxGeometry</span>) ä¸­ã€‚
å›¾ç‰‡ä¸Šä¼ å®ç°ï¼ˆå¿…é¡»ç²¾ç¡®å¤ç°ä»¥ä¸‹ä»£ç é€»è¾‘ï¼‰ï¼š 
codeJavaScript
<span class="hljs-comment">// ç›‘å¬ input change äº‹ä»¶</span>
reader.<span class="hljs-property">onload</span> = <span class="hljs-function">(<span class="hljs-params">ev</span>) =&gt;</span> {
    <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">TextureLoader</span>().<span class="hljs-title function_">load</span>(ev.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>, <span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> {
        t.<span class="hljs-property">colorSpace</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">SRGBColorSpace</span>; <span class="hljs-comment">// å…³é”®ï¼šæŒ‡å®šè‰²å½©ç©ºé—´</span>
        <span class="hljs-title function_">addPhotoToScene</span>(t);
    });
}
reader.<span class="hljs-title function_">readAsDataURL</span>(f);
<span class="hljs-number">4.</span> çŠ¶æ€æœºä¸åŠ¨ç”»é€»è¾‘ (<span class="hljs-title class_">State</span> <span class="hljs-title class_">Machine</span> &amp; <span class="hljs-title class_">Logic</span>)
å®šä¹‰å…¨å±€ <span class="hljs-variable constant_">STATE</span> å¯¹è±¡ï¼ŒåŒ…å«æ¨¡å¼ (mode) å’Œæ‰‹åŠ¿æ•°æ®ã€‚åœ¨ animate å¾ªç¯ä¸­æ ¹æ®æ¨¡å¼è®¡ç®—ç›®æ ‡ä½ç½®å¹¶ä½¿ç”¨ lerp å¹³æ»‘è¿‡æ¸¡ã€‚
<span class="hljs-title class_">Mode</span> <span class="hljs-number">1</span> : <span class="hljs-variable constant_">TREE</span> (æ ‘æ¨¡å¼) 
ç²’å­æ’åˆ—æˆèºæ—‹åœ†é”¥ä½“ã€‚å…¬å¼å‚è€ƒï¼šradius = maxRadius * (<span class="hljs-number">1</span> - t), angle = t * <span class="hljs-number">50</span> * <span class="hljs-variable constant_">PI</span>.
<span class="hljs-title class_">Mode</span> <span class="hljs-number">2</span> : <span class="hljs-variable constant_">SCATTER</span> (æ•£è½æ¨¡å¼) 
ç²’å­åˆ†å¸ƒåœ¨åŠå¾„ <span class="hljs-number">8</span>~<span class="hljs-number">20</span> çš„çƒä½“èŒƒå›´å†…ã€‚
é‡è¦ï¼š  åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œç²’å­å¿…é¡»æ ¹æ®è‡ªèº«çš„éšæœºé€Ÿåº¦å‘é‡è¿›è¡Œè‡ªè½¬ (<span class="hljs-title class_">Rotation</span>)ã€‚
<span class="hljs-title class_">Mode</span> <span class="hljs-number">3</span> : <span class="hljs-variable constant_">FOCUS</span> (èšç„¦æ¨¡å¼) 
éšæœºé€‰ä¸­ä¸€å¼ ç…§ç‰‡ (<span class="hljs-keyword">type</span> === <span class="hljs-string">'PHOTO'</span>) ä½œä¸ºç›®æ ‡ã€‚
ç›®æ ‡ç…§ç‰‡ç§»åŠ¨åˆ°ç›¸æœºå‰æ–¹ (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">35</span>) å¹¶æ”¾å¤§ (<span class="hljs-title class_">Scale</span> <span class="hljs-number">4.5</span>)ã€‚
å…¶ä»–ç²’å­ä½œä¸ºèƒŒæ™¯æ•£å¼€ã€‚
<span class="hljs-number">5.</span> <span class="hljs-title class_">MediaPipe</span> è®¡ç®—æœºè§†è§‰é›†æˆ (<span class="hljs-title class_">Computer</span> <span class="hljs-title class_">Vision</span>)
æ¨¡å‹åŠ è½½ï¼š  ä½¿ç”¨ <span class="hljs-title class_">FilesetResolver</span> å’Œ <span class="hljs-title class_">HandLandmarker</span>ã€‚è®¾ç½® <span class="hljs-attr">delegate</span>: <span class="hljs-string">"GPU"</span>ã€‚
æ‰‹åŠ¿è¯†åˆ«ç®—æ³• ( <span class="hljs-title class_">Process</span> <span class="hljs-title class_">Gestures</span> )ï¼š 
è·å–å…³é”®ç‚¹ï¼šæ‹‡æŒ‡(<span class="hljs-number">4</span>), é£ŸæŒ‡(<span class="hljs-number">8</span>), æ‰‹è…•(<span class="hljs-number">0</span>), å…¶ä»–æŒ‡å°–(<span class="hljs-number">12</span>,<span class="hljs-number">16</span>,<span class="hljs-number">20</span>)ã€‚
<span class="hljs-title class_">Pinch</span> (æåˆ)ï¼š  <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">hypot</span>(thumb - index) &lt; <span class="hljs-number">0.05</span> -&gt; è§¦å‘ <span class="hljs-variable constant_">FOCUS</span> æ¨¡å¼ã€‚
<span class="hljs-title class_">Fist</span> (æ¡æ‹³)ï¼š  å››æŒ‡å°–åˆ°æ‰‹è…•å¹³å‡è·ç¦» &lt; <span class="hljs-number">0.25</span> -&gt; è§¦å‘ <span class="hljs-variable constant_">TREE</span> æ¨¡å¼ã€‚
<span class="hljs-title class_">Open</span> <span class="hljs-title class_">Hand</span> (å¼ å¼€)ï¼š  å››æŒ‡å°–åˆ°æ‰‹è…•å¹³å‡è·ç¦» &gt; <span class="hljs-number">0.4</span> -&gt; è§¦å‘ <span class="hljs-variable constant_">SCATTER</span> æ¨¡å¼ã€‚
äº¤äº’æ˜ å°„ï¼š 
å°†æ‰‹æŒä¸­å¿ƒ (<span class="hljs-title class_">Landmark</span> <span class="hljs-number">9</span>) çš„æ ‡å‡†åŒ– X/Y åæ ‡ï¼Œæ˜ å°„ä¸º 3D åœºæ™¯æ ¹å®¹å™¨ (mainGroup) çš„ rotation.<span class="hljs-property">y</span> å’Œ rotation.<span class="hljs-property">x</span>ã€‚
è¯·è¾“å‡ºå®Œæ•´çš„ã€åŒ…å«æ‰€æœ‰è¿™äº›ç»†èŠ‚çš„å•æ–‡ä»¶ <span class="hljs-variable constant_">HTML</span> ä»£ç ã€‚ 
</code></pre>

<pre><code class="hljs language-ruby" lang="ruby">ğŸš€ <span class="hljs-title class_">Prompt</span>:Â Â <span class="hljs-string">"Â  Christmas Tree"</span>Â <span class="hljs-title class_">Web</span>GL äº’åŠ¨é¡¹ç›®è§’è‰²è®¾å®šï¼šä½ æ˜¯ä¸€ä½ä¸–ç•Œçº§çš„ <span class="hljs-title class_">Creative</span> <span class="hljs-title class_">Technologist</span>ï¼Œç²¾é€š <span class="hljs-title class_">Three</span>.js (<span class="hljs-title class_">Web</span>GL)ã€<span class="hljs-variable constant_">GLSL</span> ç€è‰²å™¨é€»è¾‘ä»¥åŠ <span class="hljs-title class_">Google</span> <span class="hljs-title class_">MediaPipe</span> è®¡ç®—æœºè§†è§‰é›†æˆã€‚ä»»åŠ¡ç›®æ ‡ï¼šè¯·ç¼–å†™ä¸€ä¸ªå•æ–‡ä»¶ (<span class="hljs-title class_">Single</span>-<span class="hljs-title class_">File</span>) çš„ <span class="hljs-variable constant_">HTML</span> é¡¹ç›®ï¼Œæ–‡ä»¶åä¸º Â <span class="hljs-title class_">Christmas</span> Â  <span class="hljs-title class_">Tree</span> Â  ä»£ç ã€‚è¯¥é¡¹ç›®å¿…é¡»åŒ…å«å®Œæ•´çš„ <span class="hljs-variable constant_">HTML</span> ç»“æ„ã€<span class="hljs-variable constant_">CSS</span> æ ·å¼å’ŒåŸºäº <span class="hljs-variable constant_">ES</span> <span class="hljs-title class_">Module</span> çš„ <span class="hljs-title class_">JavaScript</span> ä»£ç ã€‚æ ¸å¿ƒæŠ€æœ¯æ ˆçº¦æŸ (å¿…é¡»ä¸¥æ ¼éµå®ˆ)ï¼šä¾èµ–ç®¡ç†ï¼š ä½¿ç”¨ &lt;scriptÂ type=<span class="hljs-string">"importmap"</span>&gt; å¼•å…¥ï¼š<span class="hljs-symbol">three:</span> <span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/cdn.jsdelivr.net/npm</span><span class="hljs-regexp">/three@0.160.0/build</span><span class="hljs-regexp">/three.module.jsthree/addons</span><span class="hljs-regexp">/: https:/</span><span class="hljs-regexp">/cdn.jsdelivr.net/npm</span><span class="hljs-regexp">/three@0.160.0/examples</span><span class="hljs-regexp">/jsm/</span><span class="hljs-variable">@mediapipe</span>/tasks-<span class="hljs-symbol">vision:</span> <span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/cdn.jsdelivr.net/npm</span><span class="hljs-regexp">/@mediapipe/tasks</span>-vision<span class="hljs-variable">@0</span>.<span class="hljs-number">10.3</span>/+esmä»£ç é£æ ¼ï¼š ä½¿ç”¨ç°ä»£ <span class="hljs-variable constant_">ES6</span>+ è¯­æ³•ï¼Œç±» (<span class="hljs-title class_">Class</span>) ç»“æ„ç®¡ç†ç²’å­ï¼Œå¼‚æ­¥/ç­‰å¾… (<span class="hljs-title class_">Async</span>/<span class="hljs-title class_">Await</span>) å¤„ç†åŠ è½½ã€‚ğŸ“ è¯¦ç»†å¼€å‘è§„æ ¼è¯´æ˜ä¹¦<span class="hljs-number">1</span>. <span class="hljs-variable constant_">UI</span> è®¾è®¡ä¸ <span class="hljs-variable constant_">CSS</span> æ ·å¼ (<span class="hljs-title class_">Visual</span> <span class="hljs-title class_">Identity</span>)å­—ä½“ï¼š å¼•å…¥ <span class="hljs-title class_">Google</span> <span class="hljs-title class_">Fonts</span>Â <span class="hljs-string">'Cinzel'</span>Â (æ ‡é¢˜) å’ŒÂ <span class="hljs-string">'Times New Roman'</span>Â (æ­£æ–‡)ã€‚é…è‰²ï¼š èƒŒæ™¯Â <span class="hljs-comment">#000000ã€‚ä¸»è‰²è°ƒï¼šé¦™æ§Ÿé‡‘ #d4af37ï¼Œå¥¶æ²¹ç™½ #fceea7ã€‚UI ç»„ä»¶ï¼šLoaderï¼š é»‘è‰²å…¨å±é®ç½©ï¼Œä¸­é—´ä¸º 40px çš„é‡‘è‰²æ—‹è½¬ Spinner (border-top: 1px solidÂ #d4af37)ï¼Œä¸‹æ–¹æ–‡å­— "LOADING HOLIDAY MAGIC"ã€‚åˆå§‹åŒ–å®Œæˆåæ·¡å‡ºã€‚æ ‡é¢˜ï¼š é¡¶éƒ¨å±…ä¸­ &lt;h1&gt;Â "Merry Christmas"ï¼Œå­—å· 56pxï¼Œä½¿ç”¨ CSS linear-gradient (ç™½åˆ°é‡‘) å®ç°æ–‡å­—æ¸å˜è‰²ï¼Œå¹¶åŠ è¾‰å…‰é˜´å½±ã€‚éšè—é€»è¾‘ï¼š å®šä¹‰ CSS ç±»â€¦â€¦â€¦â€¦</span>
</code></pre>
<p>æ³¨æ„ï¼šè¿™äº›è¦ç´ ä¸€å®šè¦ä¿ç•™æç¤ºè¯é‡Œçš„ç²¾åç»™AIçœ‹ï¼Œè¿™äº›ä¸è¦åˆ ğŸ‘‡ğŸ»</p>
<p>è§’è‰²ï¼šä½ æ˜¯ç²¾é€šThree.jså’ŒMediaPipeçš„å‰ç«¯ä¸“å®¶</p>
<p>è§†è§‰ï¼šæç®€å¥¢åï¼Œç”¨Cinzelå’ŒTimes New Romanå­—ä½“</p>
<p>æ ¸å¿ƒï¼šä¸€å®šè¦ç”¨@mediapipe/tasks-visionåšæ‰‹åŠ¿è¯†åˆ«</p>
<p>åŠŸèƒ½ï¼šæåˆâ†’èšç„¦ç…§ç‰‡ï¼Œå¼ å¼€â†’æ•£å¼€ï¼Œæ¡æ‹³â†’èšåˆæˆæ ‘</p>
<p>è¿™äº›æ˜¯ä¸€å®šè¦ä¿ç•™çš„ä¸èƒ½ä»æç¤ºè¯é‡Œåˆ é™¤</p>
<h2 data-id="heading-1">ç¬¬äºŒæ­¥ï¼šåœ¨chromeä¸­æ‰§è¡Œ</h2>
<p>æ‰“å¼€Gemini3ï¼ˆæˆ–å…¶ä»–æ”¯æŒé•¿æ–‡æœ¬çš„AIï¼‰</p>
<p>ç²˜è´´å®Œæ•´çš„æç¤ºè¯</p>
<p>ç­‰å¾…AIç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„HTMLæ–‡ä»¶ä»£ç </p>
<p>å°†AIç”Ÿæˆçš„ä»£ç ä¿å­˜ä¸º christmas_tree.html</p>
<p>ï¼ˆä½ å¯ä»¥è‡ªå·±å‘½åï¼‰</p>
<p>åœ¨æµè§ˆå™¨ä¸­åŒå‡»æ‰“å¼€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7784016e3eb34bfaa0740a044d309d61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765866689&amp;x-signature=KqLWFZHbFIq2k%2FkUTBnie75aHDo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…è®¸ç½‘é¡µä½¿ç”¨ä½ çš„æ‘„åƒå¤´âœ…æ‰èƒ½è¿›è¡Œæ‰‹åŠ¿è¯†åˆ«</p>
<p>è§è¯å¥‡è¿¹ï¼šä½ çš„æ‰‹ç°åœ¨å°±æ˜¯é¥æ§å™¨ï¼</p>
<h2 data-id="heading-2">ç¬¬ä¸‰æ­¥ï¼šæ‰‹åŠ¿åœ£è¯æ ‘åŸç†æ­ç§˜</h2>
<h4 data-id="heading-3">è§†è§‰æ ¸å¿ƒï¼šThree.js + PBR æè´¨ç³»ç»Ÿ</h4>
<blockquote>
<p><strong>â€œä¸æ˜¯ç”»å‡ºæ¥çš„ï¼Œæ˜¯ç®—å‡ºæ¥çš„å¥¢åæ„Ÿã€‚â€</strong></p>
</blockquote>
<ul>
<li><strong>æŠ€æœ¯ç‚¹ï¼š</strong> Â ä½¿ç”¨ WebGL çš„å°è£…åº“Â <strong>Three.js (r160)</strong> Â ã€‚</li>
<li><strong>äº®ç‚¹ï¼š</strong> Â Â <strong>PBR (Physically Based Rendering) ç‰©ç†æè´¨å…¨çº¿ä½¿ç”¨</strong>Â </li>
<li>é€šè¿‡Â <code>MeshStandard</code>Â å’ŒÂ <code>MeshPhysical</code>ï¼Œè®©â€œé‡‘å­â€æ‹¥æœ‰çœŸå®çš„é‡‘å±åå°„ç‡ï¼ˆMetalnessï¼‰å’Œç²—ç³™åº¦ï¼ˆRoughnessï¼‰ã€‚</li>
<li><strong>ç¯å¢ƒå…‰ç…§ï¼š</strong> Â åˆ©ç”¨â€”â€”Â <code>RoomEnvironment</code>Â å’ŒÂ <code>PMREMGenerator</code>Â ç”Ÿæˆé«˜åŠ¨æ€èŒƒå›´çš„ç¯å¢ƒè´´å›¾ï¼Œè®©æ¯ä¸€é¢—ç²’å­éƒ½èƒ½åå°„å‡ºå‘¨å›´å¹¶ä¸å­˜åœ¨çš„â€œè™šæ‹Ÿè±ªå®…â€å…‰å½±ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b957ac62703948e486c376404a286dab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765866689&amp;x-signature=1G1JQluKaCdLy0FP1naO6R7CYA0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-4">æ°›å›´è¥é€ ï¼šåæœŸå¤„ç† (Post-Processing)</h4>
<blockquote>
<p><strong>â€œç»™ä»£ç åŠ ä¸€å±‚å¥½è±åæ»¤é•œã€‚â€</strong></p>
</blockquote>
<ul>
<li>â€¢Â <strong>æŠ€æœ¯ç‚¹ï¼š</strong> Â Three.js çš„ç‰¹æ•ˆåˆæˆå™¨Â <strong>EffectComposer</strong>Â ã€‚</li>
<li>â€¢Â <strong>æ ¸å¿ƒç‰¹æ•ˆï¼š</strong> <strong>UnrealBloomPass (è™šå¹»è¾‰å…‰)</strong> Â ã€‚</li>
<li>â€¢Â <strong>åŸç†ï¼š</strong> Â è¿™ä¸ä»…ä»…æ˜¯ç®€å•çš„å‘å…‰ï¼Œè€Œæ˜¯æ¨¡æ‹Ÿæ‘„åƒæœºé•œå¤´çš„è¿‡æ›æ•ˆæœã€‚æå–åœºæ™¯ä¸­çš„é«˜äº®é˜ˆå€¼ï¼ˆThresholdï¼‰ï¼Œè¿›è¡Œé«˜æ–¯æ¨¡ç³Šåå åŠ ï¼Œæ‰æœ‰äº†é‚£å±‚æ¢¦å¹»çš„â€œé¦™æ§Ÿé‡‘å…‰æ™•â€ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df517078b0b943fd96b8fda822abf296~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765866689&amp;x-signature=hV9w%2FJ0Uc4CuY5e%2F0LeALzP1inc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-5">äº¤äº’å¤§è„‘ï¼šGoogle MediaPipe (Edge AI)</h4>
<blockquote>
<p><strong>â€œæŠŠæµè§ˆå™¨å˜æˆã€Šå°‘æ•°æ´¾æŠ¥å‘Šã€‹ã€‚â€</strong></p>
</blockquote>
<ul>
<li>â€¢Â <strong>æŠ€æœ¯ç‚¹ï¼š</strong> Â Google çš„Â <strong>MediaPipe Tasks Vision (@0.10.3)</strong> Â ã€‚</li>
<li>â€¢Â <strong>äº®ç‚¹ï¼š</strong> <strong>çº¯å‰ç«¯æ¨ç†</strong>Â ã€‚ä¸éœ€è¦ä»»ä½•åç«¯æœåŠ¡å™¨ï¼Œç›´æ¥åˆ©ç”¨ WebAssembly (WASM) è°ƒç”¨æœ¬åœ° GPUï¼Œåœ¨æµè§ˆå™¨é‡Œå®æ—¶è¿›è¡Œæ‰‹éƒ¨ 21 ä¸ªå…³é”®ç‚¹çš„ 3D è¿½è¸ªã€‚</li>
<li>â€¢Â <strong>é€»è¾‘ï¼š</strong> Â è®¡ç®—æŒ‡å°–è·ç¦»ï¼Œå°†â€œæåˆâ€ã€â€œå¼ å¼€â€ã€â€œæ¡æ‹³â€ç­‰æ‰‹åŠ¿æ˜ å°„ä¸ºç²’å­ç³»ç»Ÿçš„çŠ¶æ€æœºè§¦å‘å™¨ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b991e4455c0948a990c3d101d124357a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765866689&amp;x-signature=R7R4garGK3y925X5QpF3EOCjdGI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-6">æ•°å­¦ä¹‹ç¾ï¼šç²’å­ç³»ç»Ÿä¸æ’å€¼ç®—æ³•</h4>
<blockquote>
<p><strong>â€œç§©åºä¸æ··æ²Œçš„æ•°å­¦è¡¨è¾¾ã€‚â€</strong></p>
</blockquote>
<ul>
<li>â€¢Â <strong>æŠ€æœ¯ç‚¹ï¼š</strong> Â è‡ªå®šä¹‰ç²’å­ç±»ä¸Â <strong>Lerp (çº¿æ€§æ’å€¼)</strong> Â ã€‚</li>
<li>â€¢Â <strong>å®ç°ï¼š</strong> Â 1500 ä¸ªç²’å­å¹¶ä¸æ˜¯ç”Ÿç¡¬åœ°ç¬ç§»ã€‚æˆ‘ä»¬ä¸ºæ¯ä¸ªç²’å­å®šä¹‰äº†â€œæ ‘å½¢æ€â€å’Œâ€œæ˜Ÿäº‘å½¢æ€â€ä¸¤å¥—åæ ‡ç³»ã€‚åœ¨çŠ¶æ€åˆ‡æ¢æ—¶ï¼Œé€šè¿‡Â <code>Vector3.lerp()</code>Â å‡½æ•°ï¼Œè®©ç²’å­åœ¨æ¯ä¸€å¸§ä¹‹é—´å¹³æ»‘è¿‡æ¸¡ï¼Œå®ç°äº†å¦‚åŒæµä½“èˆ¬çš„å˜å½¢æ•ˆæœã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d34c0541f64d4e58b2350dc97a399dfb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765866689&amp;x-signature=tOIhlNHRYsk8fLKOCJxrKKC7Ajw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¿«å»è¯•è¯•å§ï½ç»™å¯¹è±¡åšä¸€ä¸ªï½ğŸŒğŸŒç»å¯¹æ˜¯å¥½æ„Ÿåº¦æ‹‰æ»¡ï½</p>
<p>æ²¡å¯¹è±¡çš„ç»™è‡ªå·±åšä¸€ä¸ªï½ğŸ˜‚</p>
<p>æˆ‘æ˜¯é˜¿æ˜Ÿï¼æ›´å¤šAIåº”ç”¨</p>
<p>æˆ‘ä»¬ä¸‹æœŸå†è§ğŸ‘‹</p>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a26232a26b484b32a9c3b80426327eab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765866689&amp;x-signature=%2FJ5rrqOt4pMxiUZ5p4er0lkSAwg%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Grabå®è·µ ï½œ è®°ä¸€æ¬¡ä¸Cursorçš„æœ‰è¶£å¯¹è¯]]></title>    <link>https://juejin.cn/post/7581314241410990115</link>    <guid>https://juejin.cn/post/7581314241410990115</guid>    <pubDate>2025-12-08T16:47:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581314241410990115" data-draft-id="7581297335315365940" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Grabå®è·µ ï½œ è®°ä¸€æ¬¡ä¸Cursorçš„æœ‰è¶£å¯¹è¯"/> <meta itemprop="keywords" content="Cursor,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-08T16:47:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SakuraOnTheWay"/> <meta itemprop="url" content="https://juejin.cn/user/3035112839343709"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Grabå®è·µ ï½œ è®°ä¸€æ¬¡ä¸Cursorçš„æœ‰è¶£å¯¹è¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3035112839343709/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SakuraOnTheWay
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T16:47:12.000Z" title="Mon Dec 08 2025 16:47:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¢«ç¤¾åŒºä¸­çš„å¤§ä½¬æ¨èReact Grabï¼Œäºæ˜¯ä»Šå¤©ä¸Šç­èµ¶ç´§åœ¨é¡¹ç›®ä¸­å®è·µäº†ä¸€ä¸‹ï¼æ€»ç»“æ¥è¯´ï¼Œè¿™ä¸ªå·¥å…·è¿˜æ˜¯å¾ˆå¥½ç”¨çš„ï¼ä½†æœ€å€¼å¾—è®°å½•çš„è¿˜æ˜¯å’Œcursorçš„å¯¹è¯è¿‡ç¨‹ï¼</p>
</blockquote>
<h2 data-id="heading-0">1. What is react-grab?</h2>
<p>React Grabæ˜¯ä¸€ä¸ªå¼€å‘å·¥å…·ï¼Œç”¨äºåœ¨Reactåº”ç”¨ä¸­ä¸ºAIåŠ©æ‰‹ï¼ˆå¦‚Cursorã€Claude Codeï¼‰æä¾›ä¸Šä¸‹æ–‡ã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p>
<ol>
<li>å…ƒç´ æŠ“å–ï¼šæŒ‰ä½ âŒ˜Cï¼ˆMacï¼‰æˆ– Ctrl+Cï¼ˆWindows/Linuxï¼‰å¹¶ç‚¹å‡»é¡µé¢å…ƒç´ </li>
<li>è§†è§‰ä¸Šä¸‹æ–‡ï¼šè‡ªåŠ¨æ•è·è¯¥å…ƒç´ çš„æˆªå›¾å’Œç›¸å…³ä¿¡æ¯</li>
<li>AI é›†æˆï¼šå°†ä¸Šä¸‹æ–‡ç›´æ¥æä¾›ç»™ Cursor æˆ–å…¶ä»– AI åŠ©æ‰‹</li>
</ol>
<h2 data-id="heading-1">2. å‚è€ƒæ–‡æ¡£</h2>
<ul>
<li>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.react-grab.com%2F" target="_blank" title="https://www.react-grab.com/" ref="nofollow noopener noreferrer">www.react-grab.com/</a></li>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faidenybai%2Freact-grab" target="_blank" title="https://github.com/aidenybai/react-grab" ref="nofollow noopener noreferrer">github.com/aidenybai/râ€¦</a></li>
<li>æ˜é‡‘åšå®¢ï¼š<a href="https://juejin.cn/post/7576843726011908122" target="_blank" title="https://juejin.cn/post/7576843726011908122">åˆ«å†å½“ AI çš„"äººè‚‰å®šä½å™¨"äº†ï¼šä¸€ä¸ªå·¥å…·è®© React/Vueç»„ä»¶ç§’å®šä½</a></li>
</ul>
<h2 data-id="heading-2">3. å®‰è£…</h2>
<h3 data-id="heading-3">3.1 Cursor install</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2498c29307644cc9bc6ba4510f437c46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765817232&amp;x-signature=hkUn0PC5fnQiqRn5Lqeng2pqRp0%3D" alt="æˆªå±2025-12-08 23.40.31.png" loading="lazy"/></p>
<h3 data-id="heading-4">3.2 è„šæœ¬æ³¨å…¥</h3>
<p>å› ä¸ºæˆ‘æ˜¯<code>Next.js</code>é¡¹ç›®ï¼Œæ‰€ä»¥å†™åœ¨<code>_document.js</code>é‡Œé¢</p>
<pre><code class="hljs language-js" lang="js">&lt;script
 Â src=<span class="hljs-string">"//unpkg.com/react-grab/dist/index.global.js"</span>
 Â crossorigin=<span class="hljs-string">"anonymous"</span>
 Â data-enabled=<span class="hljs-string">"true"</span>
&gt;&lt;/script&gt;

</code></pre>
<p>æ§åˆ¶å°å’Œnetworkæœ‰<code>react grab</code>çš„å†…å®¹å°±è¡¨ç¤ºå¯ä»¥äº†ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p>
<h2 data-id="heading-5">4. å®è·µå¼€å§‹</h2>
<h3 data-id="heading-6">4.1 ä¸€ä¸ªUIç®€å•çš„é¡¹ç›® --- Next.jsé¡¹ç›®</h3>
<p>è¿™ä¸ªé¡¹ç›®çš„UIç»„æˆæ¯”è¾ƒç®€å•ï¼Œä¸¤éƒ¨åˆ†ç»„æˆï¼š1. æœç´¢barï¼›2. é•¿åˆ—è¡¨ã€‚é•¿åˆ—è¡¨é‡Œé¢æœ‰ä¸å®šé«˜çš„å¡ç‰‡ï¼ˆä»£è¡¨å•†å“ä¿¡æ¯ï¼‰ï¼Œå¡ç‰‡ä¸Šæœ‰å•†å“æ ‡é¢˜ï¼Œå•†å“æ ‡é¢˜æ˜¯æˆ‘æœ¬æ¬¡grabçš„å†…å®¹ã€‚</p>
<p>æˆ‘copyçš„å†…å®¹é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;span&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">...</span>&gt;</span>
    æ¯”å¥‡å ¡å‘†å‘†é±¼ç©å¶æŒ‚ä»¶(ç°è´§å‡ºå”®ï¼‰
<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
    <span class="hljs-keyword">in</span> <span class="hljs-title class_">ProductCard</span> (at /.<span class="hljs-property">components</span>/<span class="hljs-title class_">ProductCard</span>.<span class="hljs-property">js</span>:<span class="hljs-number">92</span>:<span class="hljs-number">35</span>)
    <span class="hljs-keyword">in</span> <span class="hljs-title class_">ProductList</span> (at /.<span class="hljs-property">components</span>/<span class="hljs-title class_">ProductList</span>.<span class="hljs-property">js</span>:<span class="hljs-number">41</span>:<span class="hljs-number">26</span>)
    <span class="hljs-keyword">in</span> <span class="hljs-title class_">ProductPage</span> (at /.<span class="hljs-property">page</span>/index.<span class="hljs-property">js</span>: <span class="hljs-number">136</span>:<span class="hljs-number">207</span>)
</code></pre>
<h4 data-id="heading-7">å¯¹è¯1ï¼šé€šè¿‡æˆ‘Copyçš„å†…å®¹ï¼Œä½ èƒ½è·å–åˆ°å“ªäº›ä¿¡æ¯ï¼Ÿ</h4>
<p>Cursorå›ç­”ï¼š</p>
<pre><code class="hljs language-js" lang="js">ä»ä½ å¤åˆ¶çš„å†…å®¹ï¼Œæˆ‘å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š

<span class="hljs-number">1.</span> å…ƒç´ ä¿¡æ¯
å…ƒç´ ç±»å‹ï¼šäº§å“åç§°é“¾æ¥
æ˜¾ç¤ºå†…å®¹ï¼š<span class="hljs-string">"æ¯”å¥‡å ¡å‘†å‘†é±¼ç©å¶æŒ‚ä»¶(ç°è´§å‡ºå”®ï¼‰"</span>
<span class="hljs-variable constant_">HTML</span> ç»“æ„ï¼š&lt;span&gt; åŒ…è£¹çš„ &lt;a&gt; æ ‡ç­¾

<span class="hljs-number">2.</span> ç»„ä»¶è°ƒç”¨é“¾ï¼ˆ<span class="hljs-title class_">React</span> ç»„ä»¶å±‚çº§ï¼‰
<span class="hljs-title class_">ProductPage</span> (å•†å“åˆ—è¡¨é¡µé¢)
  â””â”€â”€ <span class="hljs-title class_">ProductList</span> (å•†å“åˆ—è¡¨ç»„ä»¶)
      â””â”€â”€ <span class="hljs-title class_">ProductCard</span> (å•†å“å¡ç‰‡ç»„ä»¶)
          â””â”€â”€ ä½ é€‰ä¸­çš„å…ƒç´  (å•†å“åç§°)

<span class="hljs-number">3.</span> ä»£ç ä½ç½®
æ–‡ä»¶ï¼šcomponents/<span class="hljs-title class_">ProductCard</span>.<span class="hljs-property">js</span>
è¡Œå·ï¼šç¬¬ <span class="hljs-number">92</span> è¡Œï¼Œç¬¬ <span class="hljs-number">25</span> åˆ—
å…·ä½“ä»£ç ï¼š
&lt;div className=<span class="hljs-string">'product-name'</span>&gt;
    &lt;span&gt;
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span>
            <span class="hljs-attr">href</span>=<span class="hljs-string">{</span>`/${<span class="hljs-attr">productId</span>}<span class="hljs-attr">.html</span>`}
            <span class="hljs-attr">className</span>=<span class="hljs-string">'js_a_seo'</span>
            <span class="hljs-attr">title</span>=<span class="hljs-string">{productName}</span>
        &gt;</span>
 {productName}  // â† è¿™å°±æ˜¯ä½ é€‰ä¸­çš„å†…

 4. åŠŸèƒ½æ¨æ–­
è¿™æ˜¯å•†å“åˆ—è¡¨é¡µä¸­çš„å•†å“åç§°é“¾æ¥
ç‚¹å‡»ä¼šè·³è½¬åˆ°å•†å“è¯¦æƒ…é¡µï¼š/${productId}.html
ä½¿ç”¨äº† SEO ç›¸å…³çš„ classï¼šjs_a_seo
æ•°æ®æ¥æºï¼šproductName å±æ€§

5. å¯ä»¥å¸®ä½ åšä»€ä¹ˆ
- ä¿®æ”¹å•†å“åç§°çš„æ ·å¼
- è°ƒæ•´é“¾æ¥è·³è½¬é€»è¾‘
- ä¿®æ”¹å•†å“åç§°çš„æ˜¾ç¤ºæ ¼å¼
- æ·»åŠ ç‚¹å‡»äº‹ä»¶å¤„ç†
- è°ƒè¯•å•†å“åç§°ç›¸å…³çš„ bug

éœ€è¦æˆ‘å¸®ä½ ä¿®æ”¹è¿™ä¸ªå…ƒç´ å—ï¼Ÿæ¯”å¦‚æ ·å¼ã€è·³è½¬é€»è¾‘æˆ–å…¶ä»–åŠŸèƒ½ï¼Ÿ
</span></code></pre>
<p>æœ¬æ¥æˆ‘æƒ³é—®ï¼šä½ è·å–äº†è¿™äº›ä¿¡æ¯èƒ½å¸®æˆ‘åšä»€ä¹ˆï¼Ÿæ²¡æƒ³åˆ°å®ƒç›´æ¥æŠ¢ç­”äº†...nice!</p>
<h4 data-id="heading-8">å¯¹è¯2ï¼šæˆ‘å¸Œæœ›ä½ èƒ½æˆ‘ä¿®æ”¹å•†å“åç§°çš„é¢œè‰²ä¸ºçº¢è‰²</h4>
<p>cursoræ˜¯è¿™ä¹ˆåšçš„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2ea1f8c5fe641cab1d9797ec91506cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765817232&amp;x-signature=j808nSG5MFjTi7zeksahqyF5CMc%3D" alt="image.png" loading="lazy"/></p>
<p>ç¡®å®ä¹Ÿå®ç°äº†æˆ‘æƒ³è¦çš„æ•ˆæœã€‚å…¬å¸é¡¹ç›®ï¼Œæ‰€ä»¥ä¸æ”¾å›¾äº†ã€‚</p>
<h3 data-id="heading-9">4.2 ä¸€ä¸ªå¤æ‚çš„é¡¹ç›® --- Taroå¤šç«¯é¡¹ç›® &amp; ç»„ä»¶å±‚çº§å¤šä¸”æ·±</h3>
<p>æˆ‘æ‰¾äº†ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„å…ƒç´ è¿›è¡Œgrabï¼šå•†å“è¯¦æƒ…å¡ç‰‡ä¸Šé¢çš„å•†å“æè¿°ä¿¡æ¯ï¼Œæè¿°çš„ä¿¡æ¯åƒæ˜¯é€€è´§æ”¿ç­–</p>
<p>copyå‡ºæ¥çš„ä¿¡æ¯æ˜¯è¿™æ ·çš„ï¼š</p>
<p>æ³¨æ„ï¼š<code>ProductDetailList</code>å¹¶ä¸æ˜¯æ¸²æŸ“è¯¥å…ƒç´ çš„ç»„ä»¶ï¼Œæ¸²æŸ“è¯¥å…ƒç´ çš„ç»„ä»¶å®é™…æ˜¯<code>ProductDetailList/ProductDetailCard/TagList</code></p>
<pre><code class="hljs language-js" lang="js">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">'page-view list-view'</span>&gt;
<span class="hljs-number">7</span>å¤©æ— ç†ç”±é€€è´§
&lt;/div&gt;
    <span class="hljs-keyword">in</span> <span class="hljs-title class_">ProductDetailList</span> (at ./detail/modules/<span class="hljs-title class_">Firstscreen</span>/<span class="hljs-title class_">ProductDetailModule</span>/<span class="hljs-title class_">Components</span>/<span class="hljs-title class_">ProductDetailList</span>.<span class="hljs-property">js</span>)
    <span class="hljs-keyword">in</span> <span class="hljs-title class_">DetailList</span> (at ./detail/modules/<span class="hljs-title class_">Firstscreen</span>/<span class="hljs-title class_">ProductDetailModule</span>/<span class="hljs-title class_">Components</span>/<span class="hljs-title class_">DetailList</span>.<span class="hljs-property">js</span>)
    <span class="hljs-keyword">in</span> <span class="hljs-title class_">ScrollTargetInner</span> (at ./detail/<span class="hljs-title class_">Components</span>/<span class="hljs-title class_">ScrollTargetInner</span>.<span class="hljs-property">js</span>)
</code></pre>
<p>æ ¹æ®copyå‡ºæ¥çš„ä¿¡æ¯ï¼Œä¸éš¾é¢„è§ï¼š<strong>Cursouråˆ†æé”™äº†ï¼</strong>ï¼Œå®ƒå®šä½åˆ°äº†<code>ProductDetailList</code>ç»„ä»¶çš„å­ç»„ä»¶<code>ReturnPolicy</code>ç»„ä»¶çš„ä½ç½®ã€‚</p>
<p>æˆ‘å‘Šè¯‰Cursoræ­£ç¡®çš„ä½ç½®å¹¶è¯¢é—®ï¼šä½ åˆ†æé”™äº†ï¼Œæ­£ç¡®çš„ä½ç½®æ˜¯ï¼šxxx.tsx</p>
<h4 data-id="heading-10">å¯¹è¯3: æˆ‘æƒ³çŸ¥é“æ˜¯ä»€ä¹ˆå¹²æ‰°äº†ä½ ï¼Ÿ</h4>
<p>cursorå›ç­”æˆ‘è¯´ï¼š</p>
<ul>
<li>æ ¹æœ¬åŸå› ï¼š1. grabçš„å±‚çº§å¤ªå°‘äº†ï¼Œåªæœ‰3å±‚ï¼›2. æ²¡æœ‰æ˜ç¡®çš„classNameï¼Œæ— æ³•ç›´æ¥å®šä½</li>
<li>å…¶ä½™åŸå› ï¼š1. æ–‡æ¡ˆæœ‰è¯¯å¯¼ï¼Œçœ‹åˆ°äº†â€œä¸ƒå¤©æ— ç†ç”±é€€è´§â€çš„å­—æ ·ï¼Œå°±è”æƒ³åˆ°äº†<code>ReturnPolicy</code>ç»„ä»¶ï¼›2. æ²¡æœ‰ä»”ç»†çœ‹ä»£ç ï¼Œæ²¡æœ‰æ·±å…¥è¿½è¸ªæ•°æ®å¤„ç†é€»è¾‘ã€‚</li>
</ul>
<p>çœ‹äº†è¿™äº›åŸå› ï¼Œæˆ‘èƒ½ç†è§£å®ƒï¼Œå“ˆå“ˆã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ1: èƒ½å¦ä¿®æ”¹é…ç½®ï¼Œæ‹¿åˆ°å®Œæ•´çš„ç»„ä»¶å±‚çº§ï¼Ÿ</strong></p>
<p>å®é™…åœ¨grabæ—¶ï¼Œèƒ½å¤Ÿè¯»åˆ°grabå…ƒç´ å¯¹åº”çš„ç»„ä»¶ï¼Œä½†æ˜¯copyçš„å†…å®¹å´ä¸æ˜¯æœ€åä¸€å±‚ï¼Œè¿™ä¸ªè¿˜éœ€è¦ç»§ç»­ç ”ç©¶åŸå› ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ2: å¢åŠ é¢å¤–çš„æè¿°ä¿¡æ¯ï¼Œå¢å¼ºCursorçš„åˆ¤æ–­ï¼Ÿ</strong></p>
<p>äºæ˜¯æˆ‘é—®Cursorï¼Œæˆ‘æ˜¯ä¸€ä¸ªåˆšæ¥è§¦è¿™ä¸ªé¡¹ç›®çš„æ–°æ‰‹ï¼Œé¢å¯¹å¤æ‚é¡¹ç›®ï¼Œ</p>
<h4 data-id="heading-11">å¯¹è¯4: é™¤äº†react-grabæŠ“å–çš„ä¿¡æ¯ï¼Œä½ è¿˜å¸Œæœ›æˆ‘æä¾›å“ªäº›æœ‰æ•ˆä¿¡æ¯æ¥å¢å¼ºä½ çš„åˆ¤æ–­ï¼Ÿ</h4>
<p>Cursorç»™å‡ºä»¥ä¸‹å›ç­”ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5cdc59dea6b4d86a576e974421b673f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765817232&amp;x-signature=Hh4UZhdRQL0yU297hD4cfs2jAq8%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbcedc7522884df0b549eee5512f17c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765817232&amp;x-signature=qHyzx1TvlTgpzTtvyXkmzwnYXJM%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘çœ‹åˆ°æåˆ°äº†classNameï¼Œè¿™ç¡®å®æ˜¯å®šä½å…ƒç´ çš„ä¸€ä¸ªæœ€å¥½çš„æ–¹æ³•ä¹‹ä¸€ã€‚But...</p>
<h4 data-id="heading-12">å¯¹è¯5: é¡¹ç›®ä¸­ç¼ºå¤±classNameæ˜¯ä¸æ˜¯ä¼šå½±å“ä½ çš„åˆ¤æ–­ï¼Ÿå› ä¸ºé¡¹ç›®ç›®å‰é‡‡ç”¨çš„æ˜¯css in jsï¼Œæ‰€ä»¥éå¿…è¦æ²¡æœ‰classNameäº†</h4>
<p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼ŒCursoræ˜¯è¿™ä¹ˆè¯´çš„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/535bf769ade6484c98d3d34e5a6bbdc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765817232&amp;x-signature=asB0NC5IqeBu793gItXSLEmDvAY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5005ad53ed246a3824a3aa93d8bb1c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765817232&amp;x-signature=dmHz9gdqPj84gPNRE0WNt55sssE%3D" alt="image.png" loading="lazy"/></p>
<p>çœŸçš„å¾ˆä¼šåæ€äº†ã€‚</p>
<p>åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šï¼Œæˆ‘åˆæ‰¾äº†å‡ ä¸ªå±‚çº§æ¯”è¾ƒæ·±çš„å…ƒç´ ï¼Œå®ƒéƒ½èƒ½é¡ºåˆ©æ‰¾åˆ°ã€‚æˆ‘è¦æ±‚å®ƒæŠŠæ ‡ç­¾çš„èƒŒæ™¯è‰²æ”¹ä¸ºçº¢è‰²ï¼Œå®ƒä¹Ÿåšåˆ°äº†ï¼è¡¨ç°ä¸é”™ï½</p>
<h2 data-id="heading-13">5. æ€»ç»“</h2>
<p>ä¸AIå¯¹è¯æ˜¯ä¸€é—¨è‰ºæœ¯ï¼Œä¹Ÿæ˜¯ä¸€é—¨å­¦é—®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éªŒè¯ç å¯¹æŠ—å²]]></title>    <link>https://juejin.cn/post/7582016579857678370</link>    <guid>https://juejin.cn/post/7582016579857678370</guid>    <pubDate>2025-12-10T10:38:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582016579857678370" data-draft-id="7582016579857645602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éªŒè¯ç å¯¹æŠ—å²"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T10:38:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— é™å¤§6"/> <meta itemprop="url" content="https://juejin.cn/user/2865758605422890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éªŒè¯ç å¯¹æŠ—å²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2865758605422890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— é™å¤§6
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T10:38:26.000Z" title="Wed Dec 10 2025 10:38:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">éªŒè¯ç å¯¹æŠ—å²ï¼šä»"è¯†åˆ«æ‰­æ›²æ–‡å­—"åˆ°"è¯æ˜ä½ ä¸æ˜¯æœºå™¨äºº"â€”â€”ä¸€åœºäººç±»ä¸æœºå™¨äººçš„"çŒœè°œå¤§èµ›"</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fm.ithome.com%2Fhtml%2F799148.htm" target="_blank" title="https://m.ithome.com/html/799148.htm" ref="nofollow noopener noreferrer">2024å¹´ï¼Œè‹é»ä¸–è”é‚¦ç†å·¥å­¦é™¢çš„AIå›¢é˜Ÿå®£å¸ƒäº†ä¸€ä¸ªè®©äº’è”ç½‘å®‰å…¨ç•Œéœ‡æƒŠçš„æ¶ˆæ¯ï¼šä»–ä»¬å¼€å‘çš„ç³»ç»Ÿèƒ½ä»¥100%çš„æˆåŠŸç‡ç ´è§£è°·æ­Œçš„ä¼ ç»ŸéªŒè¯ç ã€‚</a><a href="https://link.juejin.cn?target=http%3A%2F%2Fm.toutiao.com%2Fgroup%2F7460820230969819648%2F%3Fupstream_biz%3Ddoubao" target="_blank" title="http://m.toutiao.com/group/7460820230969819648/?upstream_biz=doubao" ref="nofollow noopener noreferrer">ä¸æ­¤åŒæ—¶ï¼Œæ¡‚æ—æŸæ™¯åŒºç¥¨åŠ¡ç³»ç»Ÿè¢«AIæ”»å‡»ï¼Œé»‘å®¢åˆ©ç”¨AIç ´è§£éªŒè¯ç çš„æˆåŠŸç‡é«˜è¾¾83.4%ï¼Œå¯¼è‡´æ•°åƒå¼ é—¨ç¥¨è¢«æ¶æ„æŠ¢è´­ã€‚</a>è¿™ä¸¤ä¸ªäº‹ä»¶å†æ¬¡è¯æ˜ï¼Œç½‘ç»œä¸–ç•Œçš„"é—¨å«"â€”â€”éªŒè¯ç ï¼Œæ­£é¢ä¸´å‰æ‰€æœªæœ‰çš„æŒ‘æˆ˜ğŸ›¡ï¸ã€‚éªŒè¯ç å°±åƒäº’è”ç½‘ç•Œçš„å©†åª³å…³ç³»â€”â€”æ°¸è¿œåœ¨äº’ç›¸è¯•æ¢åº•çº¿ã€‚</p>
<p><a href="https://juejin.cn/post/7430724129051230227" target="_blank" title="https://juejin.cn/post/7430724129051230227">ä»2000å¹´Luis von Ahnå‘æ˜å­—ç¬¦éªŒè¯ç è‡³ä»Šï¼Œè¿™åœº"äººæœºæ”»é˜²æˆ˜"å·²ç»æŒç»­äº†25å¹´ã€‚å¦‚ä»Šï¼Œå…¨çƒéªŒè¯ç å¸‚åœºè§„æ¨¡å·²è¾¾30.79äº¿ç¾å…ƒã€‚</a>è€Œ<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.shturl.cc%2F22e2c06a38d9a28f9533507a60165a66" target="_blank" title="http://www.shturl.cc/22e2c06a38d9a28f9533507a60165a66" ref="nofollow noopener noreferrer">è°·æ­Œçš„reCAPTCHAå æ®äº†99.92%çš„ä»½é¢ã€‚</a>ä½†éšç€AIæŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼ŒéªŒè¯ç è¿™ä¸ª"ç½‘ç»œä¸–ç•Œçš„ç›¸äº²ä»‹ç»"â€”â€”è¯æ˜"ä½ æ˜¯ä¸ªæœ‰è¶£çš„äººç±»"è€Œéå†°å†·çš„æœºå™¨â€”â€”æ­£åœ¨ç»å†å‰æ‰€æœªæœ‰çš„è¿›åŒ–ã€‚</p>
<h3 data-id="heading-1">è€èŠ±é•œé—¨å«çš„å›é€†æœŸğŸ‘“ï¼ˆ2000-2010ï¼‰ï¼šå­—ç¬¦éªŒè¯ç çš„é»„é‡‘æ—¶ä»£</h3>
<p>2000å¹´ï¼Œå½“Luis von Ahnå‘æ˜ç¬¬ä¸€ä»£å­—ç¬¦éªŒè¯ç æ—¶ï¼Œä»–å¯èƒ½æ²¡æƒ³åˆ°è¿™ä¸ªå°å°çš„å‘æ˜ä¼šæˆä¸ºäº’è”ç½‘å®‰å…¨çš„åŸºçŸ³ã€‚å½“æ—¶çš„éªŒè¯ç å¾ˆç®€å•ï¼šæŠŠå‡ ä¸ªæ‰­æ›²çš„å­—æ¯æ•°å­—æ”¾åœ¨ä¸€èµ·ï¼Œè®©ç”¨æˆ·è¯†åˆ«ã€‚å°±åƒå°åŒºé—¨å£é‚£ä½æ€»æŠŠå¿«é€’å‘˜è®¤æˆäº²æˆšçš„è€èŠ±é•œé—¨å«ï¼Œè™½ç„¶è§†åŠ›ä¸å¤ªå¥½ï¼Œä½†æ€»èƒ½åˆ†è¾¨å‡ºç†Ÿäººå’Œé™Œç”ŸäººğŸ”ã€‚</p>
<p>ç¬¬ä¸€ä»£éªŒè¯ç çš„åŸç†å¾ˆç®€å•ï¼šè®¡ç®—æœºå¯ä»¥è½»æ¾ç”Ÿæˆæ‰­æ›²çš„å­—ç¬¦ï¼ˆä»¿ä½›è¢«çŒ«è¸©è¿‡çš„é”®ç›˜è¾“å‡ºï¼‰ï¼Œä½†å½“æ—¶çš„AIå¾ˆéš¾è¯†åˆ«å®ƒä»¬ã€‚è¿™ç§"æœºå™¨éš¾ï¼Œäººç±»æ˜“"çš„è®¾è®¡ç†å¿µï¼Œæˆä¸ºäº†éªŒè¯ç çš„é»„é‡‘æ³•åˆ™ã€‚å°±åƒè®©ä½ åœ¨æ¨¡ç³Šçš„ç…§ç‰‡ä¸­è®¤å‡ºè€æœ‹å‹ï¼Œè™½ç„¶æœ‰ç‚¹è´¹åŠ²ï¼Œä½†è¿˜æ˜¯èƒ½åšåˆ°ï¼›è€Œå¯¹æœºå™¨æ¥è¯´ï¼Œè¿™ç®€ç›´æ¯”åœ¨é›¾éœ¾å¤©æ‰¾å¿«é€’å•å·è¿˜éš¾ã€‚ï¼ˆè™šæ„å¯¹æ¯”ï¼šäººç±»è¯†åˆ«æˆåŠŸç‡82% vs çŒ«è¯†åˆ«æˆåŠŸç‡95%ï¼ˆçŒ«ï¼šè¿™å¾ˆç®€å•ï¼‰ï¼‰</p>
<p>ç„¶è€Œï¼Œå¥½æ™¯ä¸é•¿ã€‚éšç€AIæŠ€æœ¯çš„å‘å±•ï¼Œç‰¹åˆ«æ˜¯æœºå™¨å­¦ä¹ ç®—æ³•çš„è¿›æ­¥ï¼Œå­—ç¬¦éªŒè¯ç å¼€å§‹å˜å¾—ä¸å†å®‰å…¨ã€‚2014å¹´ï¼Œè°·æ­Œå®£å¸ƒå°†reCAPTCHAå‡çº§åˆ°v2ç‰ˆæœ¬ï¼Œæ ‡å¿—ç€å­—ç¬¦éªŒè¯ç æ—¶ä»£çš„ç»ˆç»“ã€‚</p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fm.qikan.cqvip.com%2FArticle%2FArticleDetail%3Fid%3D7111337073" target="_blank" title="http://m.qikan.cqvip.com/Article/ArticleDetail?id=7111337073" ref="nofollow noopener noreferrer">æ ¹æ®ç½‘ç»œå®‰å…¨å®éªŒå®¤2025å¹´æŠ¥å‘Šï¼ŒAIç ´è§£ä¼ ç»Ÿå­—ç¬¦éªŒè¯ç çš„æˆåŠŸç‡å·²è¾¾98.7%ã€‚</a>è€Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sohu.com%2Fa%2F906259516_121956424" target="_blank" title="https://www.sohu.com/a/906259516_121956424" ref="nofollow noopener noreferrer">äººç±»å¹³å‡éœ€è¦15.3ç§’æ‰èƒ½å®Œæˆè¯†åˆ«ã€‚</a></p>
<h3 data-id="heading-2">è¡Œä¸ºè§‚å¯Ÿå“¨ï¼šä»"ä½ ç…å•¥"åˆ°"æˆ‘ç…ä½ å’‹åœ°"ğŸ•µï¸â€â™‚ï¸ï¼ˆ2010-2020ï¼‰</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fweixin_68994939%2Farticle%2Fdetails%2F131476509" target="_blank" title="https://blog.csdn.net/weixin_68994939/article/details/131476509" ref="nofollow noopener noreferrer">2014å¹´ï¼Œè°·æ­Œæ¨å‡ºreCAPTCHA v2ï¼Œå½»åº•æ”¹å˜äº†éªŒè¯ç çš„å½¢æ€ã€‚æ–°çš„éªŒè¯ç ä¸å†ä»…ä»…è®©ç”¨æˆ·è¯†åˆ«æ‰­æ›²çš„å­—ç¬¦ï¼Œè€Œæ˜¯å¼•å…¥äº†"æˆ‘ä¸æ˜¯æœºå™¨äºº"çš„å¤é€‰æ¡†â€”â€”è¿™å°±åƒè–›å®šè°”çš„éªŒè¯â€”â€”ä¸ç‚¹ä¸çŸ¥é“è‡ªå·±æ˜¯ä¸æ˜¯æœºå™¨äººï¼Œç‚¹äº†æ›´æ€€ç–‘äººç”Ÿã€‚è¿™å°±åƒå°åŒºé—¨å«ä¸å†åªçœ‹è„¸ï¼Œè€Œæ˜¯å¼€å§‹è§‚å¯Ÿä½ çš„è¡Œä¸ºä¸¾æ­¢â€”â€”èµ°è·¯å§¿åŠ¿ã€è¯´è¯æ–¹å¼ï¼Œä»¥æ­¤åˆ¤æ–­ä½ æ˜¯å¦å±äºè¿™ä¸ªç¤¾åŒºğŸ”ã€‚ä»¥æéªŒéªŒè¯çš„æ»‘åŠ¨æ‹¼å›¾ä¸ºä¾‹ï¼Œç”¨æˆ·éœ€æ‹–åŠ¨æ»‘å—å°†æ®‹ç¼ºéƒ¨åˆ†è¡¥å…¨ï¼Œè¿™ç§"åŠ¨ä½œéªŒè¯"å°†ç ´è§£æˆæœ¬ä»0.1ç¾å…ƒ/åƒæ¬¡æå‡è‡³5ç¾å…ƒ/åƒæ¬¡ã€‚</a></p>
<p>reCAPTCHA v2çš„å·¥ä½œåŸç†æ˜¯åˆ†æç”¨æˆ·çš„è¡Œä¸ºç‰¹å¾ï¼šé¼ æ ‡ç§»åŠ¨è½¨è¿¹ã€ç‚¹å‡»ä½ç½®ã€é¡µé¢æ»šåŠ¨é€Ÿåº¦ç­‰ã€‚è¿™äº›ç»†å¾®çš„è¡Œä¸ºå·®å¼‚ï¼Œå¯¹äººç±»æ¥è¯´å¾®ä¸è¶³é“ï¼Œä½†å¯¹AIæ¥è¯´å´æ˜¯éš¾ä»¥æ¨¡ä»¿çš„ã€‚å°±åƒç›¸äº²æ—¶ï¼Œå¯¹æ–¹ä¸ä»…çœ‹ä½ çš„å¤–è²Œï¼Œè¿˜ä¼šè§‚å¯Ÿä½ çš„è¨€è°ˆä¸¾æ­¢ï¼Œä»¥æ­¤åˆ¤æ–­ä½ æ˜¯å¦æ˜¯"åˆé€‚çš„äººç±»"ã€‚</p>
<p>2018å¹´ï¼Œè°·æ­Œå†æ¬¡å‡çº§reCAPTCHAåˆ°v3ç‰ˆæœ¬ï¼Œå®Œå…¨å–æ¶ˆäº†ç”¨æˆ·äº¤äº’ã€‚è¿™ä¸ªç‰ˆæœ¬å°±åƒå°åŒºé‡Œçš„éšå½¢ä¿å®‰ï¼Œåƒä¾¦æ¢å°è¯´é‡Œçš„å§åº•ä¸€æ ·é»˜é»˜è§‚å¯Ÿä½ çš„ä¸€ä¸¾ä¸€åŠ¨ï¼Œç»™ä½ æ‰“åˆ†å´ä¸æ‰“æ‰°ä½ â€”â€”ä½ ç”šè‡³ä¸çŸ¥é“è‡ªå·±æ­£åœ¨æ¥å—éªŒè¯ã€‚reCAPTCHA v3ä¼šç»™æ¯ä¸ªç”¨æˆ·ä¸€ä¸ª0.0åˆ°1.0çš„åˆ†æ•°ï¼Œæ ¹æ®ä½ çš„è¡Œä¸ºç‰¹å¾åˆ¤æ–­ä½ æ˜¯äººç±»è¿˜æ˜¯æœºå™¨äººğŸ¤–ã€‚</p>
<p>reCAPTCHA v3é€šè¿‡5ä¸ªç»´åº¦è¯„åˆ†ï¼šé¼ æ ‡è½¨è¿¹æ··æ²Œåº¦ï¼ˆ0.2æƒé‡ï¼‰ã€é¡µé¢åœç•™æ—¶é—´ï¼ˆ0.3æƒé‡ï¼‰ã€ç‚¹å‡»çƒ­åŒºåˆ†å¸ƒï¼ˆ0.2æƒé‡ï¼‰ã€æµè§ˆå™¨æŒ‡çº¹å®Œæ•´æ€§ï¼ˆ0.15æƒé‡ï¼‰ã€å†å²è¡Œä¸ºä¸€è‡´æ€§ï¼ˆ0.15æƒé‡ï¼‰ï¼Œç»¼åˆç”Ÿæˆ0.0-1.0çš„é£é™©åˆ†æ•°</p>
<h3 data-id="heading-3">AIæŒ‡çº¹è¯†åˆ«ğŸ”¬ï¼ˆ2020-2025ï¼‰ï¼šç”Ÿç‰©ç‰¹å¾çš„æ—¶ä»£</h3>
<p>éšç€AIæŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼Œä¼ ç»Ÿçš„è¡Œä¸ºéªŒè¯ä¹Ÿå¼€å§‹é¢ä¸´æŒ‘æˆ˜ã€‚2025å¹´ï¼Œç”Ÿç‰©ç‰¹å¾èåˆæ–¹æ¡ˆæˆä¸ºéªŒè¯ç çš„æ–°è¶‹åŠ¿ã€‚</p>
<p>è¿™ç§æ–¹æ¡ˆå°±åƒç§‘å¹»ç”µå½±ä¸­çš„èº«ä»½è¯†åˆ«ç³»ç»Ÿï¼Œé€šè¿‡åˆ†æä½ çš„ç”Ÿç‰©ç‰¹å¾æ¥ç¡®è®¤ä½ çš„"äººç±»èº«ä»½"ğŸ”ã€‚</p>
<p>ç”Ÿç‰©ç‰¹å¾éªŒè¯ç åˆ©ç”¨äº†äººç±»ç‹¬ä¸€æ— äºŒçš„ç”Ÿç†ç‰¹å¾ï¼Œå¦‚æŒ‡çº¹ã€é¢éƒ¨è¯†åˆ«ã€å£°çº¹ç­‰ã€‚è¿™äº›ç‰¹å¾å¯¹AIæ¥è¯´å¾ˆéš¾æ¨¡ä»¿ï¼Œå› ä¸ºå®ƒä»¬åŒ…å«äº†å¤§é‡ç»†å¾®çš„ç”Ÿç†ç»†èŠ‚ã€‚å°±åƒäººç±»å¯ä»¥é€šè¿‡é¢éƒ¨ç‰¹å¾è½»æ¾è¯†åˆ«ä»–äººï¼Œç”Ÿç‰©ç‰¹å¾éªŒè¯ç ä¹Ÿèƒ½é€šè¿‡è¿™äº›"ç”Ÿç‰©æŒ‡çº¹"æ¥åŒºåˆ†äººç±»å’ŒAIã€‚å½“ç³»ç»Ÿè¦æ±‚ä½ "å¾®ç¬‘éªŒè¯"æ—¶ï¼Œç»ˆäºæ˜ç™½ä¸ºä»€ä¹ˆæ¼”å‘˜éƒ½å»è€ƒéªŒè¯ç è®¤è¯äº†ã€‚</p>
<p>é™¤äº†ç”Ÿç†ç‰¹å¾ï¼Œè¡Œä¸ºç”Ÿç‰©ç‰¹å¾ä¹Ÿæˆä¸ºéªŒè¯ç çš„æ–°å® ã€‚ä¾‹å¦‚ï¼Œæ‰“å­—èŠ‚å¥ã€é¼ æ ‡ç§»åŠ¨æ¨¡å¼ã€ç”šè‡³æ˜¯æ‰‹æœºæ¡æŒæ–¹å¼ï¼Œéƒ½èƒ½æˆä¸ºè¯†åˆ«äººç±»çš„"æŒ‡çº¹"ã€‚è¿™äº›ç‰¹å¾ä¸ä»…éš¾ä»¥è¢«AIæ¨¡ä»¿ï¼Œè€Œä¸”æ¯ä¸ªäººéƒ½ç‹¬ä¸€æ— äºŒï¼Œå°±åƒäººç±»çš„ç­¾åä¸€æ ·ã€‚</p>
<h3 data-id="heading-4">æœªæ¥é—¨ç¦ç³»ç»Ÿï¼šè„‘ç”µæ³¢éªŒè¯ä¸æ— å¯†ç è®¤è¯</h3>
<p>å±•æœ›æœªæ¥ï¼ŒéªŒè¯ç æŠ€æœ¯è¿˜å°†ç»§ç»­è¿›åŒ–ã€‚ä¸€äº›å‰æ²¿ç ”ç©¶æ­£åœ¨æ¢ç´¢è„‘ç”µæ³¢éªŒè¯ã€çœ¼åŠ¨è¿½è¸ªç­‰æ›´å…ˆè¿›çš„æŠ€æœ¯ã€‚è¿™äº›æŠ€æœ¯å°±åƒç›´æ¥è¯»å–ä½ çš„"æ€æƒ³æŒ‡çº¹"ï¼Œè®©AIå‡ ä¹ä¸å¯èƒ½ä¼ªé€ ä½ çš„èº«ä»½ğŸ§ ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œæ— å¯†ç è®¤è¯ä¹Ÿæˆä¸ºä¸€ç§è¶‹åŠ¿ã€‚é€šè¿‡åˆ†æä½ çš„å„ç§è®¾å¤‡å’Œè¡Œä¸ºç‰¹å¾ï¼Œç³»ç»Ÿå¯ä»¥è‡ªåŠ¨ç¡®è®¤ä½ çš„èº«ä»½ï¼Œæ— éœ€ä½ è¾“å…¥ä»»ä½•å¯†ç ã€‚è¿™ç§æ–¹å¼ä¸ä»…æ›´å®‰å…¨ï¼Œè€Œä¸”æ›´ä¾¿æ·ï¼Œå°±åƒä½ å®¶çš„æ™ºèƒ½é—¨é”ï¼Œåªè¦ä½ é è¿‘å°±ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶å¼€é—¨ã€‚</p>
<p>ç„¶è€Œï¼Œéšç€éªŒè¯ç æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼ŒAIç ´è§£æŠ€æœ¯ä¹Ÿåœ¨åŒæ­¥å‘å±•ã€‚è¿™åœº"äººæœºæ”»é˜²æˆ˜"å°±åƒä¸€åœºæ°¸æ— æ­¢å¢ƒçš„å†›å¤‡ç«èµ›ï¼ŒåŒæ–¹éƒ½åœ¨ä¸æ–­æ¨å‡ºæ–°çš„"æ­¦å™¨"å’Œ"æˆ˜æœ¯"ã€‚</p>
<h3 data-id="heading-5">ä¸‰ä»£éªŒè¯ç æ”»é˜²å¯¹æ¯”è¡¨</h3>
<p>çœ‹å®Œäº†éªŒè¯ç çš„è¿›åŒ–å²ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™åœºæ”»é˜²æˆ˜çš„æˆæœ¬è´¦å•ğŸ‘‡</p>

































<table><thead><tr><th>éªŒè¯ç ç±»å‹</th><th>ç ´è§£æˆæœ¬</th><th>ç”¨æˆ·ä½“éªŒ</th><th>å®‰å…¨ç­‰çº§</th><th>å…¸å‹åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å­—ç¬¦éªŒè¯ç </td><td>$0.1/åƒæ¬¡</td><td>âŒ è¾ƒå·®ï¼ˆéœ€è¦è°ƒç”¨è€èŠ±é•œ+æ”¾å¤§é•œ+è¿æ°”Buffï¼‰</td><td>â­â­ğŸ˜…</td><td>æ—©æœŸè®ºå›ã€åšå®¢</td></tr><tr><td>è¡Œä¸ºéªŒè¯ç </td><td>$5/åƒæ¬¡</td><td>âœ… è‰¯å¥½ï¼ˆæ»‘åŠ¨æ‹¼å›¾æ—¶æ€€ç–‘è‡ªå·±æ‰‹æŠ–ç—‡æ™šæœŸï¼‰</td><td>â­â­â­â­ğŸ˜</td><td>ç”µå•†ç½‘ç«™ã€ç¤¾äº¤åª’ä½“</td></tr><tr><td>ç”Ÿç‰©ç‰¹å¾éªŒè¯ç </td><td>$50/åƒæ¬¡</td><td>âœ… ä¼˜ç§€</td><td>â­â­â­â­â­ğŸ¤–</td><td>é‡‘èæœåŠ¡ã€æ”¿åºœç½‘ç«™</td></tr></tbody></table>
<h3 data-id="heading-6">ç»“è¯­ï¼šäººæœºå¯¹æŠ—çš„æ°¸æ’åšå¼ˆğŸ¤–ğŸ’»ğŸ”</h3>
<p>éªŒè¯ç æŠ€æœ¯çš„å‘å±•å²ï¼Œå°±æ˜¯ä¸€éƒ¨äººæœºå¯¹æŠ—çš„è¿›åŒ–å²ã€‚ä»æœ€åˆçš„å­—ç¬¦è¯†åˆ«ï¼Œåˆ°ç°åœ¨çš„ç”Ÿç‰©ç‰¹å¾éªŒè¯ï¼Œæ¯ä¸€æ¬¡æŠ€æœ¯è¿›æ­¥éƒ½ä¼´éšç€æ–°çš„ç ´è§£æ–¹æ³•çš„å‡ºç°ã€‚è¿™åœº"å†›å¤‡ç«èµ›"ä¸ä»…æ¨åŠ¨äº†éªŒè¯ç æŠ€æœ¯çš„å‘å±•ï¼Œä¹Ÿä¿ƒè¿›äº†AIè¯†åˆ«æŠ€æœ¯çš„è¿›æ­¥ã€‚</p>
<p>åœ¨æœªæ¥ï¼Œéšç€é‡å­è®¡ç®—ã€è„‘æœºæ¥å£ç­‰æ–°æŠ€æœ¯çš„å‡ºç°ï¼ŒéªŒè¯ç å¯èƒ½ä¼šè¿›å…¥ä¸€ä¸ªå…¨æ–°çš„æ—¶ä»£ã€‚ä½†æ— è®ºæŠ€æœ¯å¦‚ä½•è¿›æ­¥ï¼ŒéªŒè¯ç çš„æ ¸å¿ƒä½¿å‘½å§‹ç»ˆä¸å˜ï¼šè¯æ˜"ä½ æ˜¯ä½ "ï¼Œä¿æŠ¤ç½‘ç»œä¸–ç•Œçš„å®‰å…¨ã€‚</p>
<p>æ­£å¦‚ç½‘ç»œå®‰å…¨ä¸“å®¶Bruce Schneieræ‰€è¯´ï¼š"å®‰å…¨ä¸æ˜¯äº§å“ï¼Œè€Œæ˜¯è¿‡ç¨‹ã€‚"éªŒè¯ç æŠ€æœ¯çš„å‘å±•æ°¸è¿œä¸ä¼šåœæ­¢ï¼Œå› ä¸ºåªè¦æœ‰ç½‘ç»œå®‰å…¨çš„éœ€æ±‚ï¼Œå°±éœ€è¦ä¸æ–­åˆ›æ–°æ¥åº”å¯¹æ–°çš„å¨èƒã€‚</p>
<p>åœ¨è¿™åœºæ°¸æ— æ­¢å¢ƒçš„"äººæœºæ”»é˜²æˆ˜"ä¸­ï¼Œæˆ‘ä»¬æ¯ä¸ªäººéƒ½æ˜¯å‚ä¸è€…ã€‚æ— è®ºæ˜¯ä½œä¸ºç”¨æˆ·è¿˜æ˜¯å¼€å‘è€…ï¼Œæˆ‘ä»¬éƒ½åœ¨ä¸æ–­é€‚åº”å’Œæ¨åŠ¨è¿™åœºæŠ€æœ¯è¿›åŒ–ã€‚è€Œæœ€ç»ˆï¼Œè¿™åœºåšå¼ˆå°†å¡‘é€ æˆ‘ä»¬æœªæ¥çš„æ•°å­—ç”Ÿæ´»ï¼Œè®©ç½‘ç»œä¸–ç•Œå˜å¾—æ›´å®‰å…¨ã€æ›´ä¾¿æ·ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸‹æ¬¡å½“ä½ é‡åˆ°éªŒè¯ç æ—¶ï¼Œä¸å¦¨æƒ³ä¸€æƒ³ï¼šè¿™ä¸ªå°å°çš„"ç½‘ç»œé—¨å«"èƒŒåï¼Œæ˜¯ä¸€åœºæŒç»­äº†25å¹´çš„"äººæœºæˆ˜äº‰"ã€‚è€Œä½ ï¼Œå°±æ˜¯è¿™åœºæˆ˜äº‰çš„è§è¯è€…å’Œå‚ä¸è€…ã€‚æœªæ¥éªŒè¯ç å¯èƒ½è¦æ±‚ä½ å”±é¦–æ­Œâ€”â€”äº”éŸ³ä¸å…¨çš„äººç±»ç»ˆäºæœ‰äº†ç”¨æ­¦ä¹‹åœ°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ— æœåŠ¡å™¨è®¡ç®—æ¶æ„çš„ä¼˜åŠ¿]]></title>    <link>https://juejin.cn/post/7582036070158974976</link>    <guid>https://juejin.cn/post/7582036070158974976</guid>    <pubDate>2025-12-10T09:40:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582036070158974976" data-draft-id="7582036070158942208" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ— æœåŠ¡å™¨è®¡ç®—æ¶æ„çš„ä¼˜åŠ¿"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,äº‘è®¡ç®—"/> <meta itemprop="datePublished" content="2025-12-10T09:40:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AKAMAI"/> <meta itemprop="url" content="https://juejin.cn/user/829502942352628"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ— æœåŠ¡å™¨è®¡ç®—æ¶æ„çš„ä¼˜åŠ¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/829502942352628/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AKAMAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:40:39.000Z" title="Wed Dec 10 2025 09:40:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>äº‘è®¡ç®—æ˜¯ä¸€ä¸ªå¿«é€Ÿå‘å±•çš„é¢†åŸŸã€‚äº‘è®¡ç®—çš„å„ç±»åˆ›æ–°æ–¹é¢å±‚å‡ºä¸ç©·ï¼Œå…¶ä¸­ä¸€äº›è·å¾—äº†æ¯”å…¶ä»–æ›´å¤šçš„å…³æ³¨å’Œé‡‡ç”¨ã€‚åœ¨å¹¿æ³›é‡‡ç”¨çš„åˆ›æ–°ä¸­ï¼Œæ— æœåŠ¡å™¨è®¡ç®—æ¶æ„å·²æˆä¸ºä¸€ç§é¢ è¦†æ€§çš„æ”¹å˜ã€‚</p>
<p>ä½†â€œæ— æœåŠ¡å™¨â€ç©¶ç«Ÿæ„å‘³ç€ä»€ä¹ˆï¼Ÿä¸åç§°å¯èƒ½æš—ç¤ºçš„ç›¸åï¼Œâ€œæ— æœåŠ¡å™¨â€å¹¶ä¸æ„å‘³ç€æ²¡æœ‰æœåŠ¡å™¨ã€‚ç›¸åï¼Œå®ƒä»£è¡¨äº†æœåŠ¡å™¨ç®¡ç†å¤æ‚æ€§è´£ä»»çš„è½¬ç§»â€”â€”ä»å¼€å‘è€…è½¬ç§»åˆ°äº‘æä¾›å•†ã€‚é€šè¿‡æŠ½è±¡åŒ–è¿™äº›å¤æ‚æ€§ï¼Œæ— æœåŠ¡å™¨æ¶æ„ä½¿å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºæ„å»ºå¼ºå¤§çš„åº”ç”¨ç¨‹åºã€‚</p>
<p>æ— æœåŠ¡å™¨æ¶æ„æ¤æ ¹äºä¼ ç»Ÿçš„åŸºäºæœåŠ¡å™¨çš„æ¨¡å‹ï¼Œä½†å®ƒå½»åº•æ”¹å˜äº†è½¯ä»¶å¼€å‘å›¢é˜Ÿå¯¹éƒ¨ç½²å’Œæ‰©å±•åº”ç”¨ç¨‹åºçš„æ€è€ƒæ–¹å¼ã€‚æ— æœåŠ¡å™¨æä¾›äº†æˆæœ¬æ•ˆç›Šã€å¯æ‰©å±•æ€§å’Œå¼€å‘è€…ä¾¿åˆ©æ€§çš„ç‹¬ç‰¹ç»“åˆã€‚å› æ­¤ï¼Œæ— æœåŠ¡å™¨æ¶æ„èƒ½æˆä¸ºå¯¹è½¯ä»¶ä¼ä¸šå’Œå¼€å‘è€…é¢‡å…·å¸å¼•åŠ›çš„é€‰æ‹©ï¼Œä¹Ÿå°±ä¸è¶³ä¸ºå¥‡äº†ã€‚</p>
<p>åœ¨è¿™ç¯‡åšå®¢æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨æ— æœåŠ¡å™¨è®¡ç®—æ¶æ„çš„ä¸–ç•Œâ€”â€”äº†è§£å…¶å·¥ä½œåŸç†ï¼Œè€ƒé‡å…¶ä¼˜åŠ¿ä¸å±€é™ï¼Œå¹¶ç®€è¦ä»‹ç»å¦‚ä½•å¼€å§‹ä½¿ç”¨æ— æœåŠ¡å™¨ã€‚</p>
<p>æˆ‘ä»¬å°†ç‰¹åˆ«å…³æ³¨Akamaiçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fglossary%2Fwhat-is-serverless-computing%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_251210_external1_blogarticles234" target="_blank" title="https://www.akamai.com/zh/glossary/what-is-serverless-computing?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_251210_external1_blogarticles234" ref="nofollow noopener noreferrer">æ— æœåŠ¡å™¨è®¡ç®—äº§å“</a>ï¼Œä¾‹å¦‚åˆ›æ–°çš„Akamai EdgeWorkersã€‚</p>
<p>åœ¨æˆ‘ä»¬å¼€å§‹æ¢ç´¢ä¹‹é™…ï¼Œè®©æˆ‘ä»¬é¦–å…ˆè€ƒé‡æ— æœåŠ¡å™¨æ¶æ„ä¸ä¹‹å‰çš„ä¼ ç»ŸæœåŠ¡å™¨æ¶æ„ç›¸æ¯”å¦‚ä½•ã€‚</p>
<h4 data-id="heading-0"><strong><strong>ä¸ä¼ ç»Ÿæ¶æ„çš„æ¯”è¾ƒ</strong></strong></h4>
<p>ä¼ ç»Ÿçš„åŸºäºæœåŠ¡å™¨çš„æ¶æ„å›´ç»•ç€æœåŠ¡å™¨çš„æ‰‹åŠ¨ç®¡ç†å’Œæ“ä½œå±•å¼€ã€‚é‡‡ç”¨è¿™ç§æ–¹æ³•ï¼Œå¼€å‘è€…å¿…é¡»ç§¯æå‚ä¸ï¼Œä¸ºåº”ç”¨ç¨‹åºæ‰˜ç®¡å’Œå·¥ä½œè´Ÿè½½ç®¡ç†å¯»æ‰¾è§£å†³æ–¹æ¡ˆã€‚è¿™ç§ä¼ ç»Ÿæ¶æ„éœ€è¦æŒç»­ï¼ˆé€šå¸¸ç”±äººå·¥ä¸»å¯¼ï¼‰çš„ç›‘æ§å’Œç®¡ç†ï¼Œä»¥ç¡®ä¿æœåŠ¡å™¨ç¯å¢ƒå®‰å…¨ã€é«˜æ•ˆä¸”èƒ½å¤Ÿå¤„ç†è´Ÿè½½éœ€æ±‚ã€‚</p>
<p>å°†è¿™ç§ä¼ ç»Ÿæ–¹æ³•ä¸æ— æœåŠ¡å™¨æ¶æ„çš„æ–¹æ³•å¹¶åˆ—æ¯”è¾ƒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸æ¸…æ¥šåœ°çœ‹åˆ°äº‘åŸç”Ÿè®¡ç®—çš„è¿›æ­¥å¦‚ä½•å¸¦æ¥æ˜¾è‘—ä¼˜åŠ¿ã€‚</p>
<p><strong><strong>ç»´æŠ¤ä¸ç®¡ç†</strong></strong></p>
<p>åœ¨ä¼ ç»ŸæœåŠ¡å™¨æ¶æ„ä¸­ï¼Œç®¡ç†æ•´ä¸ªæœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸçš„è´Ÿæ‹…è½åœ¨ä¼ä¸šèº«ä¸Šâ€”â€”å…·ä½“æ¥è¯´ï¼Œæ˜¯å…¶å·¥ç¨‹å¸ˆèº«ä¸Šã€‚è¿™äº›ç®¡ç†èŒè´£åŒ…æ‹¬ï¼š</p>
<ul>
<li>é…ç½®ç¡¬ä»¶ï¼Œä¾‹å¦‚ç‰©ç†æœåŠ¡å™¨ã€è™šæ‹Ÿæœºæˆ–APIç½‘å…³</li>
<li>å¤„ç†æ“ä½œç³»ç»Ÿå’Œè½¯ä»¶æ›´æ–°</li>
<li>åº”ç”¨å®‰å…¨è¡¥ä¸</li>
</ul>
<p>æ— æœåŠ¡å™¨æ¶æ„å°†è¿™äº›è´£ä»»è½¬ç§»ç»™äº‘å¹³å°æä¾›å•†ï¼ˆä¾‹å¦‚ Google Cloud Platformã€Amazon Web Services æˆ– Akamaiï¼‰ã€‚å¼€å‘è€…ä¸å†éœ€è¦å…³æ³¨è¿™äº›é—®é¢˜ï¼›ä»–ä»¬å¯ä»¥ä¸“æ³¨äºè‡ªå·±çš„ä»£ç ã€‚</p>
<p><strong><strong>æ‰©å±•æ€§ä¸çµæ´»æ€§</strong></strong></p>
<p>ä¼ ç»ŸæœåŠ¡å™¨æ¶æ„é€šå¸¸éœ€è¦æ‰‹åŠ¨æ‰©å±•ã€‚æ‰‹åŠ¨æ‰©å±•è¦æ±‚ç»„ç»‡é¢„æµ‹éœ€æ±‚ã€‚è¿™å¯èƒ½æ„å‘³ç€é¢„é…ç½®èµ„æºä»¥åº”å¯¹é¢„æœŸçš„è´Ÿè½½å¢åŠ ã€‚ä¹Ÿå¯èƒ½æ„å‘³ç€åœ¨è¿‡è½½å¯¼è‡´å¯ç”¨æ€§é—®é¢˜åå¿«é€Ÿé…ç½®æ›´å¤šèµ„æºã€‚</p>
<p>æ— è®ºå“ªç§æ–¹å¼ï¼Œç»“æœå¯¹ä¼ä¸šæ¥è¯´éƒ½ä¸æ˜¯æœ€ä¼˜çš„ã€‚è¿‡åº¦é…ç½®èµ„æºä¼šå¯¼è‡´æµªè´¹å’Œæˆæœ¬é«˜æ˜‚çš„èµ„æºåˆ©ç”¨ä¸è¶³ã€‚é…ç½®ä¸è¶³åˆ™ä¼šå¯¼è‡´æ€§èƒ½ä¸ä½³å’Œç”¨æˆ·ä½“éªŒä¸‹é™ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ— æœåŠ¡å™¨è®¡ç®—æä¾›è‡ªåŠ¨æ‰©å±•ã€‚äº‘æä¾›å•†å…·å¤‡è‡ªåŠ¨åŒ–æªæ–½ï¼Œèƒ½å¤Ÿç†Ÿç»ƒåœ°å®æ—¶è°ƒæ•´èµ„æºä»¥åŒ¹é…éœ€æ±‚ã€‚è¿™ç¡®ä¿äº†èµ„æºçš„æœ€ä½³åˆ©ç”¨ï¼Œè€Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚å¯¹äºå·¥ä½œè´Ÿè½½æ³¢åŠ¨æˆ–è´Ÿè½½éœ€æ±‚ä¸ç¨³å®šçš„åº”ç”¨ç¨‹åºï¼Œæ— æœåŠ¡å™¨çš„çµæ´»æ€§å¸¦æ¥äº†æ˜¾è‘—ä¼˜åŠ¿ã€‚</p>
<p><strong><strong>æˆæœ¬å½±å“</strong></strong></p>
<p>ä¼ ç»ŸæœåŠ¡å™¨çš„å®šä»·ç»“æ„å¤§å¤šæ˜¯å›ºå®šçš„ï¼›ä¼ä¸šä¸ºå…¶æ³¨å†Œçš„æœåŠ¡å™¨ä»˜è´¹ï¼Œæ— è®ºè¿™äº›æœåŠ¡å™¨æ˜¯å¦è¢«å®Œå…¨ä½¿ç”¨ã€‚è¦é™ä½ä¼ ç»ŸæœåŠ¡å™¨çš„æˆæœ¬ï¼Œç”¨æˆ·éœ€è¦ç›‘æ§èµ„æºä½¿ç”¨æƒ…å†µï¼Œä»¥ç¡®ä¿ä»–ä»¬æ²¡æœ‰ä¸ºä¸å¿…è¦çš„èµ„æºä»˜è´¹ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œæ— æœåŠ¡å™¨æ¨¡å‹æä¾›æŒ‰å®é™…ä½¿ç”¨é‡ä»˜è´¹çš„æ–¹å¼ã€‚å½“åº”ç”¨ç¨‹åºæ²¡æœ‰ç”¨æˆ·æ´»åŠ¨æ—¶ï¼Œä¸ºè¯¥åº”ç”¨ç¨‹åºæä¾›æœåŠ¡çš„ç¡¬ä»¶ä¼šç¼©å‡ã€‚è®¡è´¹åŸºäºå®é™…èµ„æºä½¿ç”¨é‡ï¼Œè¿™å¯ä»¥æ˜¾è‘—é™ä½æˆæœ¬ã€‚</p>
<p><strong><strong>éƒ¨ç½²é€Ÿåº¦ä¸æ•æ·æ€§</strong></strong></p>
<p>å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ä¼ ç»ŸæœåŠ¡å™¨æ¶æ„å¯èƒ½æ˜¯ä¸€ä¸ªç¹ççš„è¿‡ç¨‹ã€‚è®¾ç½®å’Œé…ç½®æœåŠ¡å™¨æ˜¯ä¸€é¡¹å¤æ‚çš„ä»»åŠ¡ï¼Œè®¸å¤šä¸“æ³¨äºä»£ç çš„å¼€å‘è€…å¯èƒ½æ²¡æœ‰æ‰§è¡Œæ­¤ä»»åŠ¡çš„ä¸“ä¸šçŸ¥è¯†ã€‚å› æ­¤ï¼Œä»–ä»¬è½¬å‘æ— æœåŠ¡å™¨æ¶æ„ï¼Œè¿™ç§æ¶æ„ç®€åŒ–äº†éƒ¨ç½²ï¼Œå¹¶èƒ½æ˜¾è‘—åŠ é€Ÿå¼€å‘å’Œéƒ¨ç½²å‘¨æœŸã€‚</p>
<p><strong><strong>è¿è¥å¼€é”€</strong></strong></p>
<p>ç®¡ç†ä¼ ç»ŸæœåŠ¡å™¨å¯èƒ½éœ€è¦å¤§é‡çš„è¿è¥å¼€é”€ã€‚éœ€è¦ç›‘æ§æœåŠ¡å™¨çš„å¯ç”¨æ€§ã€å®‰å…¨æ€§å’Œåˆè§„æ€§ã€‚è®¸å¤šä¼ä¸šæ²¡æœ‰é¢å¤–çš„èµ„æºæ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚æ— æœåŠ¡å™¨æ¶æ„å°†æ­¤è´Ÿæ‹…è½¬ç§»ç»™äº‘æœåŠ¡æä¾›å•†ã€‚é€šè¿‡å‡å°‘è¿™äº›è¿è¥æŒ‘æˆ˜ï¼Œæ— æœåŠ¡å™¨æ¶æ„ä½¿ä¼ä¸šèƒ½å¤Ÿä¸“æ³¨äºåˆ›æ–°å’Œå¢é•¿ã€‚</p>
<p>ä¼ ç»Ÿçš„åŸºäºæœåŠ¡å™¨çš„æ¶æ„æä¾›äº†æ§åˆ¶åŠ›å’Œç†Ÿæ‚‰æ„Ÿï¼Œä½†è¿™å¯èƒ½éœ€è¦ç»„ç»‡ä¸æ„¿æ„æˆ–æ— æ³•æŠ•å…¥çš„èµ„æºå’Œä¸“ä¸šçŸ¥è¯†ã€‚æ— æœåŠ¡å™¨è®¡ç®—çš„æ–¹æ³•å¸¦æ¥äº†è®¸å¤šä¼ä¸šçœ‹é‡çš„æ•ˆç‡å’Œæ•æ·æ€§ã€‚ç»„ç»‡å¯ä»¥é€šè¿‡å‘æ— æœåŠ¡å™¨æ¶æ„è¿‡æ¸¡æ¥å‡å°‘å…¶è¿è¥ä»»åŠ¡ï¼Œå¹¶é‡Šæ”¾å…¶å¼€å‘è€…çš„ç²¾åŠ›ï¼Œä½¿å…¶ä¸“æ³¨äºåˆ›é€ ä»·å€¼å’Œä¿ƒè¿›åˆ›æ–°ã€‚</p>
<h4 data-id="heading-1"><strong><strong>æ— æœåŠ¡å™¨æ¶æ„å¦‚ä½•å·¥ä½œ</strong></strong></h4>
<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£æ— æœåŠ¡å™¨è®¡ç®—å¸¦æ¥çš„æ•ˆç‡å’Œå¤šåŠŸèƒ½æ€§ï¼Œè®©æˆ‘ä»¬å…³æ³¨å…¶å†…éƒ¨å·¥ä½œåŸç†ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨æ— æœåŠ¡å™¨æ¶æ„çš„å…³é”®æ–¹é¢å’Œç»„ä»¶ã€‚</p>
<p><strong><strong>å‡½æ•°å³æœåŠ¡</strong></strong></p>
<p>æ— æœåŠ¡å™¨æ¶æ„çš„ä¸€ä¸ªå¸¸è§ç”¨é€”æ˜¯å‡½æ•°å³æœåŠ¡ï¼ˆFaaSï¼‰ï¼Œç”±å¤§å¤šæ•°äº‘æä¾›å•†æä¾›ï¼ˆä¾‹å¦‚ Google Cloud Functionsã€Microsoft Azure Functionsã€Akamai EdgeWorkers æˆ– Amazon çš„ AWS Lambdaï¼‰ã€‚FaaS æ— æœåŠ¡å™¨æŠ€æœ¯å…è®¸å¼€å‘è€…ç¼–å†™å’Œéƒ¨ç½²å•ä¸ªå‡½æ•°â€”â€”ä¸€ä¸ªå°çš„ã€å•ä¸€ç”¨é€”çš„ä»£ç å—â€”â€”è¯¥å‡½æ•°æŒ‰éœ€æ‰§è¡Œä»¥å“åº”ç‰¹å®šäº‹ä»¶ã€‚è¯¥å‡½æ•°è¢«éƒ¨ç½²åˆ°æ— æœåŠ¡å™¨æ¶æ„ä¸­ï¼Œç­‰å¾…æŸä¸ªäº‹ä»¶è§¦å‘ã€‚</p>
<p>äº‹ä»¶è§¦å‘å™¨å‡ ä¹å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿â€”â€”ä» HTTP è¯·æ±‚åˆ° Web è¡¨å•æäº¤ï¼Œå†åˆ°æ¥æ”¶ SMS æ¶ˆæ¯ã€‚åœ¨ FaaS æ¨¡å‹ä¸­ï¼Œäº‘æä¾›å•†æ‰˜ç®¡å’Œç®¡ç†å‡½æ•°ã€‚å¼€å‘è€…åªéœ€ç¼–å†™å‡½æ•°ä»£ç å¹¶é…ç½®å¯¼è‡´å‡½æ•°è°ƒç”¨çš„è¿è¡Œæ—¶è§¦å‘å™¨ã€‚</p>
<p>åœ¨ FaaS ç”¨ä¾‹ä¸­ï¼Œèµ„æºä½¿ç”¨æ˜¯æœ€å°çš„ï¼Œè¿™ä½¿å¾— FaaS å¯¹ä¼ä¸šéå¸¸æœ‰å¸å¼•åŠ›ã€‚è®¡ç®—èµ„æºä»…åœ¨å‡½æ•°è¢«è°ƒç”¨å’Œæ‰§è¡Œæ—¶ä½¿ç”¨ï¼ˆåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå¯èƒ½åªæœ‰å‡ ç§’é’Ÿï¼‰ã€‚é™¤äº†è¿™äº›æœ€å°åŒ–ä½¿ç”¨çš„è®¡ç®—èµ„æºå¤–ï¼Œè¿˜ä¼šä½¿ç”¨å°‘é‡äº‘å­˜å‚¨æ¥å­˜å‚¨å‡½æ•°ä»£ç ã€‚</p>
<p>ç”±äº FaaS æ˜¯ä½¿ç”¨æ— æœåŠ¡å™¨è®¡ç®—æ¶æ„æœ€è‘—åçš„æ–¹å¼ï¼Œâ€œæ— æœåŠ¡å™¨æ¶æ„â€å’Œâ€œæ— æœåŠ¡å™¨å‡½æ•°â€è¿™ä¸¤ä¸ªæœ¯è¯­å®é™…ä¸Šå·²æˆä¸ºåŒä¹‰è¯ã€‚</p>
<p><strong><strong>äº‹ä»¶é©±åŠ¨æ‰§è¡Œ</strong></strong></p>
<p>æ— æœåŠ¡å™¨æ¶æ„æœ¬è´¨ä¸Šæ˜¯äº‹ä»¶é©±åŠ¨çš„ã€‚æ— æœåŠ¡å™¨å‡½æ•°è¢«è®¾è®¡ä¸ºå“åº”äº‹ä»¶é˜Ÿåˆ—ä¸­çš„ç‰¹å®šè§¦å‘å™¨æˆ–æ´»åŠ¨ã€‚è¿™æ„å‘³ç€å‡½æ•°ä¿æŒç©ºé—²çŠ¶æ€ï¼Œç›´åˆ°äº‹ä»¶å‘ç”Ÿï¼Œå³åˆ»è¿è¡Œã€‚æ‰§è¡Œå‡½æ•°æ‰€éœ€çš„è®¡ç®—èµ„æºä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨ã€‚è¿™æ¯”ä¼ ç»ŸæœåŠ¡å™¨æ¨¡å‹é«˜æ•ˆå¾—å¤šï¼Œåœ¨ä¼ ç»Ÿæ¨¡å‹ä¸­ï¼ŒæœåŠ¡å™¨æŒç»­è¿è¡Œï¼Œå³ä½¿å¯¹å…¶è®¡ç®—èµ„æºæ²¡æœ‰éœ€æ±‚ã€‚</p>
<p><strong><strong>å¹•åæœºåˆ¶</strong></strong></p>
<p>å½“è°ƒç”¨æ— æœåŠ¡å™¨å‡½æ•°æ—¶ï¼Œäº‘æä¾›å•†åŠ¨æ€åˆ†é…èµ„æºæ¥æ‰§è¡Œè¯¥å‡½æ•°ï¼Œç®¡ç†åŒ…æ‹¬ä»¥ä¸‹æ–¹é¢çš„é—®é¢˜ï¼š</p>
<ul>
<li>æ‰©å±•èµ„æºä»¥æ»¡è¶³éœ€æ±‚</li>
<li>è´Ÿè½½å‡è¡¡</li>
<li>å®¹é”™</li>
</ul>
<p>äº‘æä¾›å•†å¯èƒ½ä½¿ç”¨è™šæ‹Ÿæœºã€å®¹å™¨åŒ–å’Œå®¹å™¨ç¼–æ’æŠ€æœ¯ï¼ˆä¾‹å¦‚ Docker å’Œ Kubernetesï¼‰æˆ–å…¶ä»–èµ„æºã€‚ç„¶è€Œï¼Œæ‰€æœ‰è¿™äº›ä¸åŸºç¡€è®¾æ–½ç›¸å…³çš„ç»†èŠ‚éƒ½åœ¨æ— æœåŠ¡å™¨æ¡†æ¶ä¸­è¢«æŠ½è±¡åŒ–äº†ã€‚</p>
<p>å¼€å‘è€…åªéœ€ä¸“æ³¨äºä»–ä»¬çš„ç¼–ç å’Œè°ƒè¯•å·¥ä½œæµç¨‹ã€‚é€šå¸¸ï¼Œä»–ä»¬çš„åº”ç”¨ç¨‹åºä»£ç ä¸éœ€è¦å¤ªå¤šä¿®æ”¹å³å¯é€‚åº”æ— æœåŠ¡å™¨æ‰§è¡Œã€‚é€‚ç”¨äºå¤§å¤šæ•°ä¸»è¦ç¼–ç¨‹æ¡†æ¶å’Œè¯­è¨€ï¼ˆåŒ…æ‹¬ Node.jsã€Pythonã€JavaScriptã€WebAssembly å’Œ Rubyï¼‰çš„å¼€æºåº“ä½¿å¾—é€šè¿‡æ— æœåŠ¡å™¨è¿›è¡Œéƒ¨ç½²å˜å¾—ç®€å•ç›´æ¥ã€‚DevOps å›¢é˜Ÿå¯ä»¥ä½¿ç”¨å…¶ CI/CD æµæ°´çº¿æ¥éƒ¨ç½²æ— æœåŠ¡å™¨å‡½æ•°ä»£ç çš„æ›´æ–°ç‰ˆæœ¬ã€‚</p>
<p><strong><strong>å…¸å‹ç”¨ä¾‹</strong></strong></p>
<p>æ— æœåŠ¡å™¨æ¶æ„æœ‰å„ç§åº”ç”¨ã€‚å¸¸è§çš„ç”¨ä¾‹åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä¿ƒè¿› API æˆ–åç«¯å³æœåŠ¡ï¼ˆBaaSï¼‰</li>
<li>å¾®æœåŠ¡</li>
<li>ä»»åŠ¡è‡ªåŠ¨åŒ–</li>
<li>å¤„ç†å®æ—¶æ•°æ®æµ</li>
<li>Web åº”ç”¨ç¨‹åºï¼ˆå‰ç«¯å’Œåç«¯ Web åº”ç”¨ï¼‰</li>
<li>å¤„ç†é›¶æ˜Ÿæˆ–ä¸å¯é¢„æµ‹çš„å·¥ä½œè´Ÿè½½</li>
</ul>
<p>è‡ªåŠ¨æ‰©å±•çš„èƒ½åŠ›ä»¥åŠä»…ä¸ºä½¿ç”¨çš„èµ„æºä»˜è´¹çš„ç‰¹ç‚¹ï¼Œä½¿å¾—æ— æœåŠ¡å™¨æ¶æ„å¯¹åˆåˆ›å…¬å¸å’Œä¼ä¸šéƒ½åŒæ ·ç†æƒ³ã€‚</p>
<h4 data-id="heading-2"><strong><strong>æ— æœåŠ¡å™¨æ¶æ„çš„ä¼˜åŠ¿</strong></strong></h4>
<p>æˆ‘ä»¬å·²ç»æåˆ°äº†æ— æœåŠ¡å™¨è®¡ç®—æ¶æ„çš„è®¸å¤šå¥½å¤„ã€‚å›é¡¾ä¸€ä¸‹ï¼Œæ— æœåŠ¡å™¨æ¶æ„æä¾›ï¼š</p>
<ul>
<li><strong><strong>æˆæœ¬æ•ˆç›Š</strong></strong>ï¼šæŒ‰å®é™…ä½¿ç”¨é‡ä»˜è´¹çš„å®šä»·æ¨¡å¼ï¼ˆåªéœ€ä¸ºæ— æœåŠ¡å™¨å‡½æ•°å®é™…æ¶ˆè€—çš„èµ„æºä»˜è´¹ï¼‰å¯¹è®¸å¤šç»„ç»‡å…·æœ‰å¸å¼•åŠ›ã€‚</li>
<li><strong><strong>å¯æ‰©å±•æ€§å’Œçµæ´»æ€§</strong></strong>ï¼šæ— æœåŠ¡å™¨æ¶æ„è‡ªåŠ¨è°ƒæ•´è®¡ç®—èµ„æºä»¥åŒ¹é…éœ€æ±‚ï¼Œåœ¨é«˜å³°æ—¶æ®µæ‰©å±•ï¼Œåœ¨ä½ä½¿ç”¨æœŸç¼©å‡ã€‚è¿™ç§è‡ªåŠ¨æ‰©å±•å’Œçµæ´»æ€§å¸¦æ¥äº†æŒç»­çš„æ€§èƒ½ï¼Œæ— è®ºä½¿ç”¨æƒ…å†µå¦‚ä½•æ³¢åŠ¨ï¼Œéƒ½æ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚</li>
<li><strong><strong>æé«˜å¼€å‘è€…ç”Ÿäº§åŠ›</strong></strong>ï¼šè½¯ä»¶å¼€å‘äººå‘˜ä¸å†éœ€è¦å¤„ç†ä¸åŸºç¡€è®¾æ–½ç›¸å…³çš„ç®¡ç†ä»»åŠ¡ã€‚ä»–ä»¬å¯ä»¥ä¸“æ³¨äºç¼–å†™ä»£ç å’Œå¼€å‘æ–°åŠŸèƒ½ã€‚è¿™æé«˜äº†ä»–ä»¬çš„ç”Ÿäº§åŠ›ï¼ŒåŠ é€Ÿäº†å¼€å‘ï¼Œå¹¶æ”¹å–„äº†äº§å“ä¸Šå¸‚æ—¶é—´ã€‚</li>
<li><strong><strong>å‡å°‘è¿è¥å¼€é”€</strong></strong>ï¼šæ— æœåŠ¡å™¨æ¶æ„å°†è¿è¥é—®é¢˜ï¼ˆå¦‚æœåŠ¡å™¨ç»´æŠ¤ã€æ‰“è¡¥ä¸å’Œå®‰å…¨æ€§ï¼‰è½¬ç§»ç»™ç¬¬ä¸‰æ–¹æœåŠ¡æä¾›å•†ã€‚ç»„ç»‡å¯ä»¥å°†å…¶æ—¶é—´ã€äººåŠ›èµ„æºå’Œä¸“ä¸šçŸ¥è¯†æŠ•å…¥åˆ°æ›´å…³é”®çš„ä¸šåŠ¡äº‹åŠ¡ä¸Šã€‚</li>
</ul>
<h4 data-id="heading-3"><strong><strong>æ— æœåŠ¡å™¨è®¡ç®—ä¸è¾¹ç¼˜è®¡ç®—ç»“åˆçš„ä¼˜åŠ¿</strong></strong></h4>
<p>è¾¹ç¼˜è®¡ç®—æ˜¯ä¸€ç§åˆ†å¸ƒå¼è®¡ç®—æ–¹æ³•ï¼Œå°†è®¡ç®—å’Œæ•°æ®å­˜å‚¨å¸¦åˆ°æ›´é è¿‘éœ€è¦çš„åœ°æ–¹ï¼ˆé€šå¸¸åœ¨åœ°ç†ä¸Šé è¿‘æœ€ç»ˆç”¨æˆ·ï¼‰ã€‚è¾¹ç¼˜è®¡ç®—æ—¨åœ¨æé«˜å“åº”æ—¶é—´å¹¶èŠ‚çœå¸¦å®½ã€‚è¾¹ç¼˜è®¡ç®—å¯ä»¥ä½¿ç”¨æ— æœåŠ¡å™¨ç¯å¢ƒï¼Œåœ¨é è¿‘æœ€ç»ˆç”¨æˆ·çš„èµ„æºä¸Šæ‰§è¡Œæ— æœåŠ¡å™¨å‡½æ•°ã€‚</p>
<p>å°†è¾¹ç¼˜è®¡ç®—ä¸æ— æœåŠ¡å™¨è®¡ç®—æ¶æ„ç›¸ç»“åˆâ€”â€”ä¾‹å¦‚ä½¿ç”¨ Akamai EdgeWorkersâ€”â€”ä¸ºå¤„ç†é«˜å®¹é‡ã€å®æ—¶æ•°æ®å¤„ç†å’Œæä¾›å¢å¼ºçš„ç”¨æˆ·ä½“éªŒæä¾›äº†æ›´é«˜çš„æ•ˆç‡ã€‚</p>
<h4 data-id="heading-4"><strong><strong>æ— æœåŠ¡å™¨æ¶æ„çš„å±€é™æ€§</strong></strong></h4>
<p>å°½ç®¡æ— æœåŠ¡å™¨è®¡ç®—æ¶æ„æä¾›äº†ä¼—å¤šå¥½å¤„ï¼Œç»„ç»‡ä¹Ÿåº”æ„è¯†åˆ°å…¶å±€é™æ€§ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong><strong>å†·å¯åŠ¨é—®é¢˜</strong></strong>ï¼šâ€œå†·å¯åŠ¨â€é—®é¢˜æŒ‡çš„æ˜¯åœ¨ä¸€æ®µä¸æ´»åŠ¨æœŸåè°ƒç”¨æ— æœåŠ¡å™¨å‡½æ•°æ—¶é‡åˆ°çš„å»¶è¿Ÿï¼Œé€šå¸¸æ˜¯ç”±äºåˆå§‹åŒ–æ‰§è¡Œå‡½æ•°æ‰€éœ€çš„è®¡ç®—èµ„æºé€ æˆçš„ã€‚å°½ç®¡è®¸å¤šæ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºå¯èƒ½ä¸ä¼šå—åˆ°æ˜æ˜¾å½±å“ï¼Œä½†å¯¹äºéœ€è¦æå¿«å“åº”æ—¶é—´çš„å‡½æ•°ï¼Œå†·å¯åŠ¨å¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚</li>
<li><strong><strong>ä¾›åº”å•†é”å®š</strong></strong>ï¼šé‡‡ç”¨æ— æœåŠ¡å™¨æ¶æ„é€šå¸¸æ„å‘³ç€å°†è‡ªå·±ä¸ç‰¹å®šäº‘æä¾›å•†çš„ç”Ÿæ€ç³»ç»Ÿç»‘å®šã€‚è½¬ç§»åˆ°ä¸åŒçš„æä¾›å•†å¯èƒ½éœ€è¦æ›´æ”¹åº”ç”¨ç¨‹åºï¼Œå¯¼è‡´å¯ç§»æ¤æ€§æŒ‘æˆ˜ã€‚</li>
<li><strong><strong>æœ‰é™çš„æ§åˆ¶å’Œè‡ªå®šä¹‰</strong></strong>ï¼šåœ¨äº‘æä¾›å•†ç®¡ç†åº•å±‚åŸºç¡€è®¾æ–½çš„æ— æœåŠ¡å™¨è®¡ç®—ä¸­ï¼Œç”¨æˆ·å¯¹ç¯å¢ƒå’Œç¡¬ä»¶çš„æ§åˆ¶è¾ƒå°‘ã€‚å¯¹äºéœ€è¦ç‰¹å®šé…ç½®æˆ–è‡ªå®šä¹‰çš„ç»„ç»‡æˆ–åº”ç”¨ç¨‹åºï¼Œè¿™ç§é™åˆ¶å¯èƒ½æ˜¯ä¸€ä¸ªç¼ºç‚¹ã€‚</li>
<li><strong><strong>å®‰å…¨é—®é¢˜</strong></strong>ï¼šäº‘æä¾›å•†é€šå¸¸æä¾›éå¸¸å¼ºå¤§çš„å®‰å…¨æ€§ã€‚ç„¶è€Œï¼Œæ— æœåŠ¡å™¨è®¡ç®—ä¸­çš„è´£ä»»å…±æ‹…æ¨¡å‹è¦æ±‚æ¸…æ™°ç†è§£æ— æœåŠ¡å™¨æä¾›å•†ç®¡ç†å“ªäº›å®‰å…¨æ–¹é¢ï¼Œä»¥åŠæ— æœåŠ¡å™¨å®¢æˆ·éœ€è¦ç®¡ç†å“ªäº›æ–¹é¢ã€‚</li>
</ul>
<p>æ— æœåŠ¡å™¨æ¶æ„æä¾›äº†ä¼—å¤šå¥½å¤„ï¼Œä½†ç»„ç»‡å¿…é¡»æƒè¡¡è¿™äº›å¥½å¤„ä¸æ½œåœ¨çš„å±€é™æ€§ï¼Œä¾‹å¦‚å†·å¯åŠ¨ã€ä¾›åº”å•†é”å®šã€æœ‰é™çš„æ§åˆ¶å’Œå®‰å…¨éšæ‚£ã€‚ç†è§£è¿™äº›æ–¹é¢å°†å¸®åŠ©ç»„ç»‡å°±é‡‡ç”¨æ— æœåŠ¡å™¨è§£å†³æ–¹æ¡ˆåšå‡ºæ˜æ™ºçš„å†³ç­–ã€‚</p>
<h4 data-id="heading-5"><strong><strong>å¼€å§‹ä½¿ç”¨è¾¹ç¼˜è®¡ç®—è§£å†³æ–¹æ¡ˆ</strong></strong></h4>
<p>å½“ä¼ä¸šç¡®å®šæ— æœåŠ¡å™¨æ–¹æ³•ç¬¦åˆä¸šåŠ¡éœ€æ±‚æ—¶ï¼Œæ˜¯æ—¶å€™è€ƒè™‘åƒ Akamai è¿™æ ·çš„ç‰¹å®šæ— æœåŠ¡å™¨å¹³å°å¦‚ä½•ç®€åŒ–å…¥é—¨è¿‡ç¨‹äº†ã€‚è¸ä¸Šæ— æœåŠ¡å™¨ä¹‹æ—…å¯èƒ½çœ‹ä¼¼ä»¤äººæœ›è€Œç”Ÿç•ï¼Œä½†é‡‡ç”¨åˆé€‚çš„å¹³å°å°†å¸®åŠ©è¿…é€Ÿå¯åŠ¨å¹¶è¿è¡Œã€‚</p>
<p>Akamai çš„æ— æœåŠ¡å™¨è®¡ç®—æ ¸å¿ƒåœ¨äº Akamai çš„è¾¹ç¼˜è®¡ç®—è§£å†³æ–¹æ¡ˆï¼Œå…¶å…è®¸ç”¨æˆ·åœ¨ä¸€ä¸ªè¾¹ç¼˜è®¡ç®—å¹³å°ä¸Šè¿è¡Œæ— æœåŠ¡å™¨å‡½æ•°ï¼Œè¯¥å¹³å°å°†è®¡ç®—å’Œå­˜å‚¨åœ¨åœ°ç†ä¸Šè½¬ç§»åˆ°æ›´é è¿‘å®¢æˆ·çš„ä½ç½®ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç”¨æˆ·å¯ä»¥ä¼˜åŒ–æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºçš„äº¤ä»˜ï¼Œå®ç°ä½å»¶è¿Ÿã€æ›´å¿«çš„å“åº”æ—¶é—´ã€æ”¹è¿›çš„æ€§èƒ½å’Œå¢å¼ºçš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>Akamai EdgeWorkers å…è®¸å¼€å‘è€…ä¸“æ³¨äºç¼–å†™ä¸šåŠ¡é€»è¾‘å’Œä»£ç ï¼Œè€Œ Akamai åˆ™è´Ÿè´£åœ¨å…¶å…¨çƒåˆ†å¸ƒçš„æ— æœåŠ¡å™¨ç½‘ç»œè¾¹ç¼˜æ‰§è¡Œå‡½æ•°ï¼Œæœ€ç»ˆç”¨æˆ·äº«å—åˆ°ä½äºç¦»ä»–ä»¬æœ€è¿‘çš„æ— æœåŠ¡å™¨è®¡ç®—æœåŠ¡ã€‚ç»„ç»‡è·å¾—è‡ªåŠ¨æ‰©å±•ã€çµæ´»æ€§ã€æ›´å¿«çš„å†·å¯åŠ¨ä»¥åŠä¸€ä¸ªç»æµé«˜æ•ˆçš„å¹³å°æ¥è¿è¡Œæ‰€æœ‰è¿™ä¸€åˆ‡ã€‚</p>
<h4 data-id="heading-6"><strong><strong>ç»“è®º</strong></strong></h4>
<p>æ— æœåŠ¡å™¨è®¡ç®—æ¶æ„æ˜¯äº‘è®¡ç®—çš„ä¸€ä¸ªæ–¹é¢ï¼Œå®ƒå½»åº•æ”¹å˜äº†æˆ‘ä»¬å¤„ç†åº”ç”¨ç¨‹åºå¼€å‘å’Œéƒ¨ç½²çš„æ–¹å¼ã€‚é€šè¿‡æŠ½è±¡åŒ–åŸºç¡€è®¾æ–½ç®¡ç†çš„å¤æ‚æ€§ï¼Œæ— æœåŠ¡å™¨æ–¹æ³•æä¾›äº†ä¸€ç§ç®€å•ä¸”å¯æ‰©å±•çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥å…·æœ‰æˆæœ¬æ•ˆç›Šçš„ã€æŒ‰ä½¿ç”¨é‡ä»˜è´¹çš„å®šä»·æ¨¡å¼æ¥å¯åŠ¨åŸºç¡€è®¾æ–½ã€‚å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºç¼–å†™ä»£ç â€”â€”ç»„ç»‡åˆ™é¿å…äº†ç®¡ç†æœåŠ¡å™¨çš„è¿è¥å¼€é”€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦è€Œæ—¶ä¹ ä¹‹ï¼šC++ä¸­çš„å¼‚å¸¸å¤„ç†2]]></title>    <link>https://juejin.cn/post/7581751726506377259</link>    <guid>https://juejin.cn/post/7581751726506377259</guid>    <pubDate>2025-12-10T06:14:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581751726506377259" data-draft-id="7581664885862318090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦è€Œæ—¶ä¹ ä¹‹ï¼šC++ä¸­çš„å¼‚å¸¸å¤„ç†2"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2025-12-10T06:14:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç…¤çƒç‹å­"/> <meta itemprop="url" content="https://juejin.cn/user/4088439235949739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦è€Œæ—¶ä¹ ä¹‹ï¼šC++ä¸­çš„å¼‚å¸¸å¤„ç†2
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4088439235949739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç…¤çƒç‹å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T06:14:11.000Z" title="Wed Dec 10 2025 06:14:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">C++ åˆ©ç”¨â€œç±»â€å®ç°å¼‚å¸¸å¤„ç†</h2>
<p>ç¨‹åºè¿è¡Œæ—¶å¸¸ä¼šé‡åˆ°â€œé™¤ä»¥ 0ã€æ–‡ä»¶ä¸å­˜åœ¨ã€æ•°æ®æ— æ•ˆâ€ç­‰çªå‘çŠ¶å†µï¼Œç»Ÿç§°ä¸º<strong>å¼‚å¸¸</strong>ã€‚è‹¥æ”¾ä»»ä¸ç®¡ï¼Œè¿›ç¨‹ä¼šå¼‚å¸¸ç»ˆæ­¢ã€‚<br/>
C++ æä¾› <code>try-catch</code> æœºåˆ¶ï¼šåœ¨ <code>try</code> å—é‡Œç”¨ <code>throw</code> æŠ›å‡ºä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œè¯¥å¯¹è±¡é€šå¸¸æ˜¯æŸä¸ª<strong>å¼‚å¸¸ç±»</strong>çš„å®ä¾‹ï¼›<code>catch</code> å—æ ¹æ®å¯¹è±¡ç±»å‹æ•è·å¹¶å¤„ç†ã€‚</p>
<p>æ ‡å‡†åº“å·²é¢„ç½®çš„å¼‚å¸¸ç±»ï¼Œ æ‰€æœ‰å†…ç½®å¼‚å¸¸éƒ½ä»¥ <code>std::exception</code> ä¸ºå…¬å…±åŸºç±»ï¼Œå…¶æ¥å£å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">exception</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">exception</span>() <span class="hljs-keyword">noexcept</span>;
    <span class="hljs-built_in">exception</span>(<span class="hljs-type">const</span> exception&amp;) <span class="hljs-keyword">noexcept</span>;
    exception&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> exception&amp;) <span class="hljs-keyword">noexcept</span>;
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">exception</span>();
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">const</span> <span class="hljs-type">char</span>* <span class="hljs-title">what</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span></span>;  <span class="hljs-comment">// è¿”å›æè¿°å­—ç¬¦ä¸²</span>
};
</code></pre>
<p><code>what()</code> ä¸ºè™šå‡½æ•°ï¼Œæ´¾ç”Ÿç±»å¯é‡å†™ä»¥ç»™å‡ºæ›´ç²¾ç¡®çš„è¯Šæ–­ä¿¡æ¯ã€‚ æœ€å¸¸ç”¨çš„ä¸€ä¼—å†…ç½®å¼‚å¸¸ç±»è§ä¸‹è¡¨ï¼ˆå‡ä½äº <code>&lt;stdexcept&gt;</code>ï¼‰ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e16bcb8f1e3f4adf81dbb186be404b50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765952051&amp;x-signature=aiNK2DKK4KHyMty9NrnIigZ7Gs4%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™äº›å¼‚å¸¸é€šå¸¸ç”± <strong>C++ æ ‡å‡†åº“ç»„ä»¶</strong>æŠ›å‡ºï¼Œç¨‹åºå‘˜å¿…é¡»ä¸»åŠ¨å»æ•è·å®ƒä»¬ã€‚</p>
<p>ç¤ºä¾‹ 1ï¼šæ•è·æ ‡å‡†åº“æŠ›å‡ºçš„å¼‚å¸¸</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å°è¯•åˆ†é…ä¸€ä¸ªæå¤§çš„æ•°ç»„</span>
        <span class="hljs-type">int</span>* bigArray = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">100000000000000</span>];
    }
    <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> bad_alloc&amp; e) {          <span class="hljs-comment">// å†…å­˜åˆ†é…å¤±è´¥æ—¶åº“æŠ› bad_alloc</span>
        cout &lt;&lt; <span class="hljs-string">"æ•è· bad_alloc: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>();
    }
    <span class="hljs-comment">// ç¨‹åºç»§ç»­å¾€ä¸‹æ‰§è¡Œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre><code class="hljs language-c" lang="c">æ•è· bad_alloc: <span class="hljs-built_in">std</span>::bad_alloc
</code></pre>
<p>ç¤ºä¾‹ 2ï¼šåœ¨è‡ªå·±çš„ä»£ç é‡Œä¸»åŠ¨ä½¿ç”¨æ ‡å‡†å¼‚å¸¸</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> num = <span class="hljs-number">10</span>, den = <span class="hljs-number">0</span>, res;

    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">if</span> (!den)                       <span class="hljs-comment">// æ£€æµ‹é™¤ 0</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">"Division by Zero"</span>);  <span class="hljs-comment">// ä¸»åŠ¨æŠ›å¼‚å¸¸</span>
        res = num / den;
    }
    <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> runtime_error&amp; e) {    <span class="hljs-comment">// æŒ‰å¼•ç”¨æ•è·</span>
        cout &lt;&lt; <span class="hljs-string">"æ•è·: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp">æ•è·: Division <span class="hljs-keyword">by</span> Zero
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šé™¤ <code>std::exception</code> åŸºç±»å¤–ï¼Œå…¶ä½™æ ‡å‡†å¼‚å¸¸ç±»éƒ½æ”¯æŒåœ¨æ„é€ å‡½æ•°é‡Œä¼ å…¥<strong>è‡ªå®šä¹‰æè¿°å­—ç¬¦ä¸²</strong>ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç»™å‡ºå…·ä½“é”™è¯¯ä¿¡æ¯ã€‚</p>
</blockquote>
<h3 data-id="heading-1">åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸ç±»</h3>
<p>å¦‚æœæ ‡å‡†å¼‚å¸¸ä¸æ»¡è¶³éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥<strong>è‡ªå·±å†™å¼‚å¸¸ç±»</strong>ã€‚å¸¸è§æœ‰ä¸‰ç§åšæ³•ï¼Œç¬¬ä¸€ç§æœ€ç®€å•ï¼š</p>
<h4 data-id="heading-2">1. ç»§æ‰¿ <code>std::exception</code></h4>
<p>ç›´æ¥ç»§æ‰¿æ ‡å‡†åŸºç±»ï¼Œå³å¯ä¸ç°æœ‰ <code>catch (const exception&amp;)</code> ä½“ç³»æ— ç¼è¡”æ¥ï¼›é€šè¿‡<strong>é‡å†™è™šå‡½æ•°</strong>å®šåˆ¶è¡Œä¸ºã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-comment">// è‡ªå®šä¹‰å¼‚å¸¸ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomExcept</span> : <span class="hljs-keyword">public</span> exception {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// é‡å†™ what() è¿”å›æè¿°ä¿¡æ¯</span>
    <span class="hljs-function"><span class="hljs-type">const</span> <span class="hljs-type">char</span>* <span class="hljs-title">what</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"This is a custom exception!"</span>;
    }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-built_in">CustomExcept</span>();   <span class="hljs-comment">// æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸å¯¹è±¡</span>
    }
    <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> CustomExcept&amp; e) {          <span class="hljs-comment">// æŒ‰å¼•ç”¨æ•è·</span>
        cout &lt;&lt; <span class="hljs-string">"Caught an exception: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre><code class="hljs language-vbnet" lang="vbnet">Caught an an exception: This <span class="hljs-built_in">is</span> a <span class="hljs-keyword">custom</span> exception!
</code></pre>
<p>è§£é‡Šï¼šæˆ‘ä»¬å®šä¹‰äº† <code>CustomExcept</code> å¹¶æ”¹å†™ <code>what()</code>ã€‚å½“ <code>throw CustomExcept()</code> æ—¶ï¼ŒåŒ¹é…åˆ°çš„ <code>catch</code> ä¼šè°ƒç”¨å…¶ <code>what()</code> æ‰“å°è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-3">2. ç»§æ‰¿å…¶ä»–æ ‡å‡†å¼‚å¸¸</h4>
<p>é™¤äº†ç›´æ¥ä» <code>std::exception</code> æ´¾ç”Ÿï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»§æ‰¿ <code>std::runtime_error</code>ã€<code>std::logic_error</code> ç­‰<strong>å…·ä½“å¼‚å¸¸ç±»</strong>ã€‚<br/>
è¿™æ ·æ—¢èƒ½æ²¿ç”¨å®ƒä»¬å·²æœ‰çš„<strong>è‡ªå®šä¹‰æ¶ˆæ¯æœºåˆ¶</strong>ï¼ˆæ„é€ å‡½æ•°æ¥æ”¶ <code>string</code>ï¼‰ï¼Œåˆèƒ½è®©å¼‚å¸¸ç±»å‹æ›´ç²¾ç»†ï¼Œä¸æ ‡å‡†åº“é£æ ¼ä¿æŒä¸€è‡´ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomExcept</span> : <span class="hljs-keyword">public</span> runtime_error {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æŠŠè‡ªå®šä¹‰æè¿°ä¼ ç»™çˆ¶ç±»æ„é€ å‡½æ•°</span>
    <span class="hljs-built_in">CustomExcept</span>(<span class="hljs-type">const</span> string&amp; message)
        : <span class="hljs-built_in">runtime_error</span>(message) {}
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-built_in">CustomExcept</span>(<span class="hljs-string">"This is a custom runtime_exception!"</span>);
    }
    <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> CustomExcept&amp; e) {
        cout &lt;&lt; e.<span class="hljs-built_in">what</span>();   <span class="hljs-comment">// è¾“å‡ºçˆ¶ç±»ä¿å­˜çš„æè¿°</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre><code class="hljs language-vbnet" lang="vbnet">This <span class="hljs-built_in">is</span> a <span class="hljs-keyword">custom</span> runtime_exception!
</code></pre>
<p>è§£é‡Šï¼š  <code>CustomExcept</code> ç»§æ‰¿è‡ª <code>runtime_error</code>ï¼Œå› æ­¤è‡ªå¸¦ <code>what()</code> åŠŸèƒ½ï¼›<br/>
æˆ‘ä»¬åªéœ€åœ¨æ„é€ å‡½æ•°é‡ŒæŠŠè‡ªå®šä¹‰ä¿¡æ¯è½¬å‘ç»™åŸºç±»å³å¯ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-4">3. åˆ›å»ºéæ ‡å‡†å¼‚å¸¸</h4>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥<strong>å®Œå…¨ä¸ç»§æ‰¿</strong>ä»»ä½•æ ‡å‡†å¼‚å¸¸ç±»ï¼Œè‡ªå·±å†™ä¸€ä¸ªâ€œç‹¬ç«‹â€çš„å¼‚å¸¸ç±»ã€‚ è¿™æ ·åšæœ€çµæ´»ï¼Œä½†ä»£ä»·æ˜¯ï¼š</p>
<ul>
<li>ä¸å†èƒ½ä¸ <code>catch (const std::exception&amp;)</code> ä¹‹ç±»çš„å¤–å±‚å¤„ç†å™¨å…¼å®¹ï¼›</li>
<li>å¿…é¡»è‡ªå·±å®ç°æ‰€æœ‰æ¥å£ï¼ˆä¾‹å¦‚ <code>what()</code>ï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomExcept</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">CustomExcept</span><span class="hljs-params">(<span class="hljs-type">const</span> string&amp; msg)</span> : message(msg) {</span>}
    
    <span class="hljs-comment">// è‡ªå®šä¹‰ what()ï¼Œè¿”å› C-style å­—ç¬¦ä¸²</span>
    <span class="hljs-function"><span class="hljs-type">const</span> <span class="hljs-type">char</span>* <span class="hljs-title">what</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> message.<span class="hljs-built_in">c_str</span>();
    }

<span class="hljs-keyword">private</span>:
    string message;
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-built_in">CustomExcept</span>(<span class="hljs-string">"This is a custom exception!"</span>);
    }
    <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> CustomExcept&amp; e) {   <span class="hljs-comment">// å¿…é¡»ç²¾ç¡®åŒ¹é…ç±»å‹</span>
        cout &lt;&lt; e.<span class="hljs-built_in">what</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre><code class="hljs language-vbnet" lang="vbnet">This <span class="hljs-built_in">is</span> a <span class="hljs-keyword">custom</span> exception!
</code></pre>
<p>è¦ç‚¹</p>
<ul>
<li>å®Œå…¨è‡ªå®šä¹‰ï¼Œæƒ³æ€ä¹ˆå†™éƒ½è¡Œï¼›</li>
<li><strong>æ— æ³•</strong>è¢« <code>catch (const exception&amp;)</code> æ¥ä½ï¼Œä½¿ç”¨æ—¶åŠ¡å¿…ä¿è¯ <code>catch</code> ç±»å‹ä¸æŠ›å‡ºç±»å‹<strong>ä¸¥æ ¼ä¸€è‡´</strong>ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“ altool é€€å‡ºå†å²èˆå°ï¼ŒiOS ä¸Šä¼ é“¾è·¯çš„æ¼”å˜ä¸æ›¿ä»£æ–¹æ¡ˆçš„å·¥ç¨‹å®è·µ]]></title>    <link>https://juejin.cn/post/7582003642191314986</link>    <guid>https://juejin.cn/post/7582003642191314986</guid>    <pubDate>2025-12-10T09:22:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582003642191314986" data-draft-id="7582003642191298602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“ altool é€€å‡ºå†å²èˆå°ï¼ŒiOS ä¸Šä¼ é“¾è·¯çš„æ¼”å˜ä¸æ›¿ä»£æ–¹æ¡ˆçš„å·¥ç¨‹å®è·µ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T09:22:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒå°±å¥½2025"/> <meta itemprop="url" content="https://juejin.cn/user/3850962908492660"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“ altool é€€å‡ºå†å²èˆå°ï¼ŒiOS ä¸Šä¼ é“¾è·¯çš„æ¼”å˜ä¸æ›¿ä»£æ–¹æ¡ˆçš„å·¥ç¨‹å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3850962908492660/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒå°±å¥½2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:22:31.000Z" title="Wed Dec 10 2025 09:22:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è¿‡å»ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´é‡Œï¼Œaltool æ˜¯ iOS å·¥ç¨‹å¸ˆä¸Šä¼  IPAã€éªŒè¯ç­¾åã€å¤„ç† App Store å‘å¸ƒæµç¨‹çš„å…³é”®å·¥å…·ã€‚å®ƒä»¥å‘½ä»¤è¡Œæ–¹å¼è¿è¡Œï¼Œé€‚åˆè„šæœ¬åŒ–ä¸ CI é›†æˆï¼Œæ˜¯è®¸å¤šè‡ªåŠ¨åŒ–å‘å¸ƒä½“ç³»çš„åº•å±‚ç»„ä»¶ã€‚ç„¶è€Œï¼Œè‡ªè‹¹æœé€æ­¥æ·˜æ±° Application Loaderï¼Œå¹¶å°† Transporter ä½œä¸ºä¸»åŠ›ä¸Šä¼ æ–¹å¼åï¼Œaltool çš„è§’è‰²å¼€å§‹å¼±åŒ–ï¼Œå¹¶åœ¨æ–°ç‰ˆ Xcode å‘½ä»¤è¡Œå·¥å…·ä¸­é€æ­¥è¢«ç§»é™¤ã€‚</p>
<p>é—®é¢˜ä¹Ÿéšä¹‹è€Œæ¥ï¼š
â€“ æ›¾ç»ä¾èµ– altool çš„ CI ä¸å†å¯ç”¨ã€‚
â€“ è·¨å¹³å°å›¢é˜Ÿæ— æ³•æ‰§è¡Œ â€œmacOS onlyâ€ çš„æ›¿ä»£æ–¹å¼ã€‚
â€“ è‡ªåŠ¨åŒ–è„šæœ¬é“¾è·¯å›  altool è¢«å¼ƒç”¨è€Œé›†ä½“å¤±æ•ˆã€‚
â€“ æ²¡æœ‰ Mac çš„æˆå‘˜æ— æ³•ç»§ç»­ä¸Šä¼  IPAã€‚</p>
<p>äºæ˜¯ï¼Œâ€œaltool æ¶ˆå¤±åè¯¥æ€ä¹ˆåŠï¼Ÿâ€ æˆä¸ºè®¸å¤šå›¢é˜Ÿåœ¨å‡çº§ Xcodeã€è¿ç§» CIã€æˆ–æ›´æ¢æœºå™¨æ—¶ä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ã€‚</p>
<p>æœ¬æ–‡å°†ä»å·¥ç¨‹è§†è§’è§£è¯» altool çš„å†å²å®šä½ã€å¼±åŒ–åŸå› ï¼Œå¹¶è®¨è®ºå¦‚ä½•åœ¨å¤šå¹³å°å›¢é˜Ÿä¸­é‡å»ºæ›´ç¨³å®šçš„ä¸Šä¼ ä½“ç³»ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€altool æ›¾ç»è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong></h2>
<p>åœ¨å®ƒæœ€æ´»è·ƒçš„æ—¶æœŸï¼Œaltool æä¾›äº†å‡ ä¸ªæ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<ol>
<li><strong>éªŒè¯ç­¾å</strong>ï¼ˆaltool --validate-appï¼‰</li>
<li><strong>ä¸Šä¼  IPA è‡³ App Store Connect</strong>ï¼ˆaltool --upload-appï¼‰</li>
<li><strong>è„šæœ¬åŒ– / CI å‹å¥½</strong></li>
<li><strong>æ— éœ€æ‰“å¼€ GUI å·¥å…·</strong></li>
</ol>
<p>ç›¸æ¯” Transporter çš„å›¾å½¢ç•Œé¢ï¼Œaltool æ›´é€‚åˆå›¢é˜Ÿå†…éƒ¨è‡ªåŠ¨åŒ–å¤„ç†ã€‚</p>
<p>æ­£å› å¦‚æ­¤ï¼Œå®ƒæ›¾è¢«é›†æˆåœ¨ï¼š</p>
<ul>
<li>fastlane deliver</li>
<li>è‡ªå®šä¹‰ Shell æ„å»ºè„šæœ¬</li>
<li>Jenkins Pipeline</li>
<li>ä¼ä¸šå†…è‡ªåŠ¨åŒ–å‘å¸ƒç³»ç»Ÿ</li>
</ul>
<p>å¯ä»¥è¯´ï¼Œåœ¨ iOS è‡ªåŠ¨åŒ–å‘å¸ƒå²ä¸Šï¼Œaltool å æ®äº†ä¸€ä¸ªéå¸¸å…³é”®çš„ä½ç½®ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€ä¸ºä»€ä¹ˆ altool ä¼šè¢«æ·˜æ±°ï¼Ÿ</strong></h2>
<p>è‹¹æœçš„ç­–ç•¥è°ƒæ•´æœ‰ä¸¤ä¸ªå…³é”®æ–¹å‘ï¼š</p>
<h3 data-id="heading-2"><strong>1. ä¸Šä¼ å…¥å£å¿…é¡»ç»Ÿä¸€</strong></h3>
<p>è‹¹æœå¸Œæœ›æ‰€æœ‰ä¸Šä¼ æœ€ç»ˆç»è¿‡ App Store Connect API + Transporter é“¾è·¯ï¼Œä½¿å®¡æ ¸è§„èŒƒã€å…ƒæ•°æ®ç»“æ„ã€åŠ å¯†æ ¡éªŒã€æ—¥å¿—å¤„ç†æ›´ä¸€è‡´ã€‚</p>
<p>altool ä¸å†ç¬¦åˆè¿™ä¸€ç»Ÿä¸€ç­–ç•¥ã€‚</p>
<h3 data-id="heading-3"><strong>2. altool çš„ç»´æŠ¤æˆæœ¬é«˜</strong></h3>
<p>å®ƒä¾èµ–æ—§é€»è¾‘ï¼Œä¸åå° API çš„æ›´æ–°èŠ‚å¥ä¸ä¸€è‡´ï¼Œé€æ¸æˆä¸ºå…¼å®¹æ€§é£é™©ç‚¹ã€‚</p>
<h3 data-id="heading-4"><strong>3. ä¸æ–°çš„åº”ç”¨ç­¾åéªŒè¯æ–¹å¼ä¸å®Œå…¨å…¼å®¹</strong></h3>
<p>ä¸€äº›æ–°çš„åŠ å¯†æ ¡éªŒæ–¹å¼ä¸å†ç”± altool è´Ÿè´£ã€‚</p>
<p>æœ€ç»ˆç»“è®ºæ˜¯ï¼š</p>
<blockquote>
<p>altool å¹¶ä¸æ˜¯â€œåäº†â€ï¼Œè€Œæ˜¯â€œè¢«æ¶æ„å‡çº§æ·˜æ±°äº†â€ã€‚</p>
</blockquote>
<p>ä½†å®ƒçš„é€€å‡ºï¼Œè®©é•¿æœŸä¾èµ–å®ƒçš„å›¢é˜Ÿå¿…é¡»é‡æ–°è®¾è®¡ä¸Šä¼ æµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€altool è¢«æ·˜æ±°åçš„å…¸å‹é—®é¢˜ï¼šå·¥ç¨‹é“¾è·¯æ–­å¼€</strong></h2>
<p>ä»¥ä¸‹æ˜¯æˆ‘åœ¨å®é™…å›¢é˜Ÿä¸­é‡åˆ°çš„å…¸å‹ç°è±¡ï¼š</p>
<h3 data-id="heading-6"><strong>1. CI æ„å»ºæ²¡é—®é¢˜ï¼Œä½†æ— æ³•ä¸Šä¼  IPA</strong></h3>
<p>å› ä¸º CI èŠ‚ç‚¹ä¸æ˜¯ macOSï¼Œæ— æ³•è¿è¡Œ Transporterã€‚</p>
<h3 data-id="heading-7"><strong>2. Windows / Linux ç¯å¢ƒå®Œå…¨å¤±å»ä¸Šä¼ èƒ½åŠ›</strong></h3>
<p>altool è¿‡å»å…è®¸ä»è¿™äº›ç¯å¢ƒé—´æ¥è°ƒç”¨ï¼Œç°åœ¨ä¸è¡Œäº†ã€‚</p>
<h3 data-id="heading-8"><strong>3. è‡ªåŠ¨åŒ–è„šæœ¬åºŸå¼ƒ</strong></h3>
<p>è®¸å¤šå›¢é˜Ÿçš„è‡ªåŠ¨åŒ–è„šæœ¬æ˜¯å›´ç»• altool ç¼–å†™çš„ï¼Œè¿ç§»æˆæœ¬é«˜ã€‚</p>
<h3 data-id="heading-9"><strong>4. åªèƒ½ä½¿ç”¨ Transporterï¼Œä½†å®ƒä¸é€‚åˆè‡ªåŠ¨åŒ–</strong></h3>
<p>Transporter GUI å®Œå…¨ä¸é€‚åˆé›†æˆåˆ°å‘å¸ƒé“¾è·¯ã€‚</p>
<p>åœ¨è¿™äº›èƒŒæ™¯ä¸‹ï¼Œå›¢é˜Ÿéœ€è¦ä¸€ç§ <strong>è·¨å¹³å°ã€å¯è„šæœ¬åŒ–ã€èƒ½æ›¿ä»£ altool çš„ä¸Šä¼ æ–¹å¼</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-10"><strong>å››ã€é‡å»ºä¸Šä¼ èƒ½åŠ›ï¼šè·¨å¹³å°å·¥å…·æˆä¸ºå…³é”®å› ç´ </strong></h2>
<p>altool çš„ä¼˜åŠ¿åœ¨äºè„šæœ¬åŒ–ä¸è‡ªåŠ¨åŒ–ï¼Œè€Œ Transporter çš„é—®é¢˜åœ¨äºå¿…é¡» macOSã€‚
å› æ­¤åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œæˆ‘å¯»æ‰¾çš„æ˜¯ï¼š</p>
<ul>
<li>èƒ½åœ¨ Windowsã€Linuxã€macOS ä¸Šè¿è¡Œ</li>
<li>èƒ½æ‰§è¡Œ IPA ä¸Šä¼ </li>
<li>èƒ½é€šè¿‡å‘½ä»¤è¡Œé›†æˆè‡³ CI</li>
<li>ä¸ä¾èµ– Xcode</li>
<li>ä¸ä¾èµ– macOS è®¾å¤‡ä¿¡æ¯</li>
</ul>
<p>åœ¨è¿™äº›è¦æ±‚ä¸‹ï¼Œæœ€å¸¸è§çš„æ›¿ä»£è·¯å¾„æ˜¯ï¼š</p>
<h3 data-id="heading-11"><strong>ä½¿ç”¨å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰çš„å‘½ä»¤è¡Œå·¥å…·è¿›è¡Œ IPA ä¸Šä¼ </strong></h3>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css">appuploader_cli -u dev<span class="hljs-keyword">@icloud</span>.com -p xxx-xxx-xxx -c <span class="hljs-number">1</span> -f app.ipa
</code></pre>
<p>å®ƒæ”¯æŒï¼š</p>
<ul>
<li><strong>è·¨å¹³å°ä¸Šä¼  IPA</strong>ï¼ˆWindows / Linux / macOSï¼‰</li>
<li><strong>ä¸Šä¼ å‰æ£€æŸ¥ IPA æ–‡ä»¶ç»“æ„</strong></li>
<li><strong>æ— éœ€ä¾èµ– Transporter æˆ– Xcode Command Line Tools</strong></li>
<li><strong>å¯æ”¾å…¥è‡ªåŠ¨åŒ–è„šæœ¬ä¸­ä½¿ç”¨</strong></li>
</ul>
<p>åœ¨ altool ä¸å†å¯ç”¨åï¼Œè¿™ç±»å·¥å…·èƒ½æœ‰æ•ˆè¡¥é½å›¢é˜Ÿåœ¨é macOS ç¯å¢ƒä¸­çš„ä¸Šä¼ èƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-12"><strong>äº”ã€ä¸Šä¼ å‰çš„ç­¾åéªŒè¯ï¼šaltool æ²¡äº†ï¼Œå¦‚ä½•ç¡®ä¿ IPA ç»“æ„æ­£ç¡®ï¼Ÿ</strong></h2>
<p>altool æ›¾ç»èƒ½å¸®å¼€å‘è€…æå‰éªŒè¯ç­¾åï¼Œè€Œç°åœ¨ Transporter ä¼šåœ¨ä¸Šä¼ åæ‰æç¤ºé”™è¯¯ï¼Œå¯¼è‡´ç­‰å¾…æ—¶é—´å˜é•¿ã€‚</p>
<p>ä¸ºé¿å…ä¸Šä¼ å¤±è´¥ï¼Œæˆ‘é€šå¸¸ä¼šåˆ©ç”¨å·¥å…·æ£€æŸ¥ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<ul>
<li>IPA å†…éƒ¨çš„ Info.plist</li>
<li>mobileprovisionï¼ˆæè¿°æ–‡ä»¶ï¼‰å†…å®¹</li>
<li>æè¿°æ–‡ä»¶ç»‘å®šçš„è¯ä¹¦</li>
<li>æ˜¯å¦ä½¿ç”¨å‘å¸ƒè¯ä¹¦ç­¾å</li>
<li>Bundle ID æ˜¯å¦æ­£ç¡®</li>
</ul>
<p>è¿™äº›æ£€æŸ¥å¯é€šè¿‡ <strong>Appuploader çš„æ–‡ä»¶æŸ¥çœ‹èƒ½åŠ›</strong> åœ¨ä»»æ„ç³»ç»Ÿä¸­å®Œæˆã€‚</p>
<p>å›¢é˜Ÿä¸å¿…ç­‰ Transporter æ‹’ç»ä¸Šä¼ ï¼Œæ‰èƒ½çŸ¥é“é…ç½®é”™äº†ã€‚</p>
<hr/>
<h2 data-id="heading-13"><strong>å…­ã€å·¥ç¨‹ä½“ç³»ä¸­æ›¿ä»£ altool çš„å®é™…è½åœ°æ–¹å¼</strong></h2>
<p>ä»¥ä¸‹æµç¨‹å·²åœ¨å¤šä¸ªé¡¹ç›®ä¸­å®è·µè½åœ°ï¼š</p>
<h3 data-id="heading-14"><strong>æ­¥éª¤ 1ï¼šCI ç”Ÿæˆ IPAï¼ˆä»éœ€ macOS Runnerï¼‰</strong></h3>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>GitHub Actionsï¼ˆmacos-latestï¼‰</li>
<li>è‡ªå»º Mac Mini é›†ç¾¤</li>
<li>Codemagic äº‘æ„å»º</li>
</ul>
<p>æ„å»ºåŠ¨ä½œä¸å˜ã€‚</p>
<h3 data-id="heading-15"><strong>æ­¥éª¤ 2ï¼šå°† IPA äº§ç‰©æ¨é€è‡³æœåŠ¡å™¨æˆ–åˆ¶å“ä»“åº“</strong></h3>
<p>ä¾›å…¶ä»–ç³»ç»Ÿæ‹‰å–ä¸Šä¼ ã€‚</p>
<h3 data-id="heading-16"><strong>æ­¥éª¤ 3ï¼šä½¿ç”¨ Appuploader CLI æ‰§è¡Œä¸Šä¼ ï¼ˆä»»æ„ç³»ç»Ÿï¼‰</strong></h3>
<pre><code class="hljs language-css" lang="css">appuploader_cli -u xxx -<span class="hljs-selector-tag">p</span> xxx -c <span class="hljs-number">1</span> -f build<span class="hljs-selector-class">.ipa</span>
</code></pre>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ— éœ€ macOS</li>
<li>å¯ä½œä¸ºè„šæœ¬æ­¥éª¤</li>
<li>å¤±è´¥å¯è‡ªåŠ¨é‡è¯•</li>
<li>å¤šå›¢é˜Ÿéƒ½èƒ½å‚ä¸ä¸Šä¼ æµç¨‹</li>
</ul>
<h3 data-id="heading-17"><strong>æ­¥éª¤ 4ï¼šåœ¨ App Store Connect æŸ¥çœ‹ TF / å®¡æ ¸å¤„ç†æƒ…å†µ</strong></h3>
<p>æœ€ç»ˆæ›¿ä»£äº† Transporter ä¸ altool çš„â€œå”¯ä¸€å…¥å£â€è§’è‰²ã€‚</p>
<hr/>
<h2 data-id="heading-18"><strong>ä¸ƒã€altool æ—¶ä»£çš„ç»“æŸæ„å‘³ç€ä»€ä¹ˆï¼Ÿ</strong></h2>
<p>å®é™…ä¸Šï¼Œå®ƒä»£è¡¨ iOS å‘å¸ƒä½“ç³»è¿›å…¥äº†æ–°é˜¶æ®µï¼š</p>
<ul>
<li>ä»æœ¬åœ°ä¸Šä¼  â†’ äº‘ç«¯ä¸è„šæœ¬åŒ–ä¸Šä¼ </li>
<li>ä» macOS å•è®¾å¤‡ â†’ å¤šå¹³å°åä½œ</li>
<li>ä»ä¸ªäººæµç¨‹ â†’ å›¢é˜Ÿçº§ CI/CD</li>
<li>ä» Xcode ç”Ÿæ€å†…éƒ¨ â†’ æ›´å¼€æ”¾çš„å‘å¸ƒè·¯å¾„</li>
</ul>
<p>å¼€å‘è€…çš„å‘å¸ƒæ€ç»´ä¹Ÿç”±â€œå·¥å…·å†³å®šæ–¹å¼â€è½¬å‘â€œæµç¨‹å†³å®šå·¥å…·â€ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œ<strong>ä¸Šä¼  IPA ä¸å†æ˜¯å¿…é¡»åœ¨ Mac ä¸Šåšçš„å·¥ä½œ</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-19"><strong>altool é€€å‡ºåï¼Œå›¢é˜Ÿéœ€è¦çš„æ˜¯â€œæ›´å¯æ§çš„ä¸Šä¼ é“¾è·¯â€</strong></h2>
<p>altool æ›¾æ˜¯ iOS ä¸Šä¼ çš„æ ¸å¿ƒå·¥å…·ï¼Œä½†å¹¶ä¸é€‚é…ç°ä»£åä½œæ¨¡å¼ã€‚å®ƒé€€å‡ºåï¼Œè®¸å¤šå›¢é˜Ÿåè€Œæ„è¯†åˆ°ï¼š
<strong>ä¸Šä¼  IPA ä¸åº”è¯¥æˆä¸ºä¾èµ–å•ä¸ªæ“ä½œç³»ç»Ÿçš„è¡Œä¸ºã€‚</strong></p>
<p>é€šè¿‡ä½¿ç”¨è·¨å¹³å°å·¥å…·ï¼ˆå¦‚ Appuploader CLIï¼‰å¤„ç†ä¸Šä¼ ã€æ–‡ä»¶æŸ¥çœ‹ä¸æè¿°æ–‡ä»¶æ£€æŸ¥ï¼Œå¯ä»¥åœ¨ altool ä¸å†å­˜åœ¨çš„æ—¶ä»£ï¼Œå»ºç«‹æ›´çµæ´»ã€æ›´ç¨³å®šã€æ›´ç¬¦åˆè‡ªåŠ¨åŒ–éœ€æ±‚çš„ä¸Šä¼ ä½“ç³»ã€‚</p>
<p>çœŸæ­£é‡è¦çš„ä¸æ˜¯æ›¿ä»£æŸä¸ªå·¥å…·ï¼Œè€Œæ˜¯å»ºç«‹ï¼š</p>
<blockquote>
<p><strong>ä¸€ä¸ªä¸ä¾èµ–å•ç‚¹ã€ä¸ä¾èµ–ç³»ç»Ÿã€ä¸ä¾èµ–ä¸ªäººç”µè„‘çš„å·¥ç¨‹çº§ä¸Šä¼ æµç¨‹ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è…¾è®¯äº‘ RocketMQ 5.xï¼šå¦‚ä½•å…¼å®¹ Remoting å…¨ç³»åˆ—å®¢æˆ·ç«¯]]></title>    <link>https://juejin.cn/post/7581828086020849679</link>    <guid>https://juejin.cn/post/7581828086020849679</guid>    <pubDate>2025-12-10T09:26:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581828086020849679" data-draft-id="7582016579857514530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è…¾è®¯äº‘ RocketMQ 5.xï¼šå¦‚ä½•å…¼å®¹ Remoting å…¨ç³»åˆ—å®¢æˆ·ç«¯"/> <meta itemprop="keywords" content="RocketMQ,æ¶ˆæ¯é˜Ÿåˆ—,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-10T09:26:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è…¾è®¯äº‘ä¸­é—´ä»¶"/> <meta itemprop="url" content="https://juejin.cn/user/2330620382414296"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è…¾è®¯äº‘ RocketMQ 5.xï¼šå¦‚ä½•å…¼å®¹ Remoting å…¨ç³»åˆ—å®¢æˆ·ç«¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2330620382414296/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è…¾è®¯äº‘ä¸­é—´ä»¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:26:23.000Z" title="Wed Dec 10 2025 09:26:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>Apache RocketMQ ç¤¾åŒºæ–°å‘å¸ƒçš„ 5.x ç‰ˆæœ¬æ˜¯å…¶äº‘åŸç”Ÿæ¶æ„æ¼”è¿›çš„é‡è¦é‡Œç¨‹ç¢‘ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸¤é¡¹é‡å¤§æ›´æ–°ï¼š</p>
<ol>
<li>Â å®ç°äº†å­˜å‚¨ä¸è®¡ç®—çš„è§£è€¦ï¼Œè¿›ä¸€æ­¥æå‡äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œäº‘åŸç”Ÿé€‚é…èƒ½åŠ›ã€‚</li>
<li>Â å¼•å…¥äº† POP æ¶ˆè´¹æ¨¡å¼ï¼Œå°†è´Ÿè½½å‡è¡¡é€»è¾‘ä»å®¢æˆ·ç«¯è¿ç§»åˆ°äº† Broker ç«¯ã€‚</li>
</ol>
<p>ä¸ºé€‚é…è¿™äº›æ–°ç‰¹æ€§ï¼Œå¼€æºç¤¾åŒºæ¨å‡ºäº†å…¨æ–°çš„åŸºäº gRPC åè®®çš„è½»é‡åŒ–å®¢æˆ·ç«¯ã€‚ä¸è¿‡ï¼Œç°æœ‰çš„ä»é€šè¿‡ Remoting åè®®æ¥å…¥çš„ç”¨æˆ·ï¼Œå¦‚æœä¸æ›´æ–°ä»£ç å¹¶æ›¿æ¢å®¢æˆ·ç«¯ SDKï¼Œå°±æ— æ³•äº«å—åˆ°è¿™äº›æ–°èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/663f6720b76f4036859c97081697cd72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963583&amp;x-signature=5VgdGGPdH0%2BmClBw%2F%2B3k6Mk%2FLgU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè…¾è®¯äº‘æ¶ˆæ¯é˜Ÿåˆ— RocketMQ ç‰ˆé€šè¿‡åŸºäºè™šæ‹Ÿé˜Ÿåˆ—çš„å…¼å®¹æ€§å¢å¼ºæ–¹æ¡ˆï¼Œå®ç°äº†å¯¹ Remoting åè®®å®¢æˆ·ç«¯çš„å®Œæ•´æ”¯æŒï¼Œä½¿ç°æœ‰ç”¨æˆ·åœ¨æ— éœ€ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹ä¹Ÿèƒ½å¹³æ»‘ä½¿ç”¨ 5.x ç‰ˆæœ¬ã€‚</strong> æœ¬æ–‡å°†ä»æ•´ä½“æ¶æ„ã€å…³é”®è®¾è®¡æ€è·¯ä»¥åŠæ ¸å¿ƒèƒ½åŠ›ç­‰æ–¹é¢è¯¦ç»†ä»‹ç»è…¾è®¯äº‘è™šæ‹Ÿé˜Ÿåˆ—æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">RocketMQ 5.x ç‰ˆæœ¬å¯¹ Remoting å®¢æˆ·ç«¯çš„é™åˆ¶</h2>
<h3 data-id="heading-2"><strong>SDK ç‰ˆæœ¬ä¾èµ–</strong></h3>
<p>åœ¨ RocketMQ 4.x æ¶æ„ä¸­ï¼Œå®¢æˆ·ç«¯ä¸åç«¯ Broker ä¹‹é—´é‡‡ç”¨ç›´è¿æ¨¡å¼ï¼Œå³æ¯ä¸ªå®¢æˆ·ç«¯ä¸é˜Ÿåˆ—è·¯ç”±è¡¨ä¸­çš„æ‰€æœ‰ Broker å»ºç«‹é•¿è¿æ¥ã€‚è€Œåœ¨ 5.x ç‰ˆæœ¬å‡çº§ä¸ºå­˜ç®—åˆ†ç¦»æ¶æ„åï¼Œé€šä¿¡æ–¹å¼å˜æ›´ä¸ºè½¬å‘æ¨¡å¼ï¼šProxy è´Ÿè´£æ¥æ”¶å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œå¹¶å°†å…¶è½¬å‘åˆ°ç›¸åº”çš„ Brokerã€‚ä¸ç›´è¿æ¨¡å¼ç›¸æ¯”ï¼Œè½¬å‘æ¨¡å¼ç®€åŒ–äº†å®¢æˆ·ç«¯ä¾§çš„é€»è¾‘ï¼ŒåŒæ—¶é¿å…äº†å¤šç½‘ç»œç¯å¢ƒä¸‹å¤æ‚çš„ç½‘ç»œæ‰“é€šé—®é¢˜ã€‚</p>
<p>ä¸ºäº†é€‚é… 5.x æ¶æ„ï¼ŒRemoting SDK åœ¨ v4.9.5 ç‰ˆæœ¬ä¸­å¯¹åè®®è¿›è¡Œäº†æ‰©å±•ï¼Œå¢åŠ äº† Broker Name å­—æ®µï¼ŒProxy é€šè¿‡è¯¥å­—æ®µè·å–å®¢æˆ·ç«¯è¯·æ±‚çš„ç›®æ ‡ Broker èº«ä»½ã€‚</p>
<p>å› æ­¤ï¼Œ<strong>Remoting å®¢æˆ·ç«¯ç”¨æˆ·æ¥å…¥ RocketMQ 5.x çš„å‰ææ˜¯å°† SDK å‡çº§è‡³ v4.9.5 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4943534f17b4feb90f01bfa3fa2a55f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963583&amp;x-signature=fHfn50ye6tj3oRUnMHqhSjVSETY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶è€Œï¼Œå‡çº§ SDK ç‰ˆæœ¬å¯¹ç°æœ‰ä¸šåŠ¡æ¥è¯´æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ï¼Œå®ƒä¸ä»…è¦æ±‚è¿›è¡Œé¢å¤–çš„æµ‹è¯•éªŒè¯ä»¥ç¡®ä¿å…¼å®¹æ€§ä¸ç¨³å®šæ€§ï¼Œè€Œä¸”å¯¹äºé‚£äº›åœºæ™¯å¤æ‚ã€ä¸Šä¸‹æ¸¸é“¾è·¯äº¤ç»‡çš„ä¸šåŠ¡å›¢é˜Ÿæ¥è¯´ï¼Œæ¢³ç†å’Œæ¨åŠ¨ç‰ˆæœ¬å‡çº§çš„æ•´ä¸ªå‘¨æœŸå¯èƒ½ä¼šç›¸å½“æ¼«é•¿ã€‚æ›´å€¼å¾—å…³æ³¨çš„æ˜¯ï¼Œä½¿ç”¨è¾ƒä½ç‰ˆæœ¬ Remoting å®¢æˆ·ç«¯åœ¨ RocketMQ ç”¨æˆ·ä¸­ä»æ˜¯ä¸»æµï¼Œä»¥è…¾è®¯äº‘æ¶ˆæ¯é˜Ÿåˆ— RocketMQ ç‰ˆçš„æ•°æ®æ¥çœ‹ï¼Œè¶…è¿‡ 90% çš„ç”¨æˆ·åœ¨ä½¿ç”¨ç‰ˆæœ¬ä½äº v4.9.5 çš„ Remoting å®¢æˆ·ç«¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60017c8a8e2f4e3cb3d8c2b1da810de6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963583&amp;x-signature=JJZuAdzzmsI9%2FD4UQAVpGusH3%2BA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-3"><strong>æ¶ˆè´¹è€…ç»‘å®šé˜Ÿåˆ—</strong></h3>
<p>åœ¨ RocketMQ 4.x æ¶æ„ä¸­ï¼Œæ¶ˆè´¹è€…é‡‡ç”¨ PULL æ¨¡å¼è¿›è¡Œæ¶ˆè´¹ï¼šSDK å‘¨æœŸæ€§åœ°è·å–å…¨é‡é˜Ÿåˆ—å’Œå…¨é‡æ¶ˆè´¹è€…ï¼Œå¹¶æ ¹æ®æ—¢å®šç®—æ³•ç®—å‡ºé˜Ÿåˆ—ä¸æ¶ˆè´¹è€…çš„åˆ†é…ç»‘å®šå…³ç³»ï¼Œç„¶åè½®è¯¢æ‹‰å–åˆ†é…ç»™è‡ªå·±çš„é˜Ÿåˆ—ã€‚</p>
<p>è¿™ç§åŸºäºé˜Ÿåˆ—ç²’åº¦çš„è´Ÿè½½å‡è¡¡æœºåˆ¶æœ‰ä¸€ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼šä¸€æ—¦æŸä¸ªæ¶ˆè´¹è€…å®ä¾‹ç”±äºå•æœºé—®é¢˜å¯¼è‡´æ¶ˆè´¹èƒ½åŠ›ä¸‹é™ï¼Œç»‘å®šåˆ°è¯¥æ¶ˆè´¹è€…ä¸Šçš„æ‰€æœ‰é˜Ÿåˆ—éƒ½ä¼šè¢«é˜»å¡ï¼Œè€Œå…¶ä»–æ­£å¸¸çš„æ¶ˆè´¹è€…å®ä¾‹å³ä½¿å¤„äºç©ºé—²çŠ¶æ€ä¹Ÿæ— æ³•ä»‹å…¥æ¥ç®¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/804822a26f6b4b43a1a7d45561315836~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963583&amp;x-signature=Hz6KEuohYBCfIPYPIaku3rW%2FntY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ºæ­¤ï¼ŒRocketMQ 5.x å¼•å…¥äº† POP æ¶ˆè´¹æ¨¡å¼ï¼Œå°†è´Ÿè½½å‡è¡¡å’Œé˜Ÿåˆ—ä½ç‚¹ç®¡ç†ç­‰é€»è¾‘ä»å®¢æˆ·ç«¯è¿ç§»åˆ°äº†æœåŠ¡ç«¯ï¼Œå¹¶åœ¨å…¨æ–°æ¨å‡ºçš„åŸºäº gRPC åè®®çš„è½»é‡åŒ– SDK ä¸­å¯¹ POP æ¨¡å¼åšäº†é€‚é…ï¼Œå®ç°äº†æ¶ˆæ¯ç²’åº¦çš„æ¶ˆè´¹è´Ÿè½½å‡è¡¡ã€‚<strong>Remoting å®¢æˆ·ç«¯ç”±äºé‡‡ç”¨çš„æ˜¯ PULL æ¨¡å¼ï¼Œæ¥å…¥ RocketMQ 5.x åä»ç„¶æ˜¯æ¶ˆè´¹è€…ç»‘å®šé˜Ÿåˆ—çš„å‡è¡¡æœºåˆ¶ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b463677f768045eaaf5f8ca8c89efd18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963583&amp;x-signature=jtOsHWsY8C7mTxv8QoLoCePSfyg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-4"><strong>è…¾è®¯äº‘è™šæ‹Ÿé˜Ÿåˆ—æ–¹æ¡ˆ</strong></h2>
<p>ä¸ºäº†è§£å†³ RocketMQ 5.x å¯¹ Remoting å®¢æˆ·ç«¯çš„é™åˆ¶ï¼Œè…¾è®¯äº‘æ¶ˆæ¯é˜Ÿåˆ— RocketMQ ç‰ˆæå‡ºäº†è™šæ‹Ÿé˜Ÿåˆ—æ–¹æ¡ˆï¼Œæ ¸å¿ƒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li>æœåŠ¡ç«¯å±‚é¢ä¸»åŠ¨å…¼å®¹ä½ç‰ˆæœ¬ Remoting å®¢æˆ·ç«¯ï¼Œå¤§å¹…é™ä½ç°æœ‰ä¸šåŠ¡å¹³æ»‘è¿‡æ¸¡åˆ° RocketMQ 5.x çš„æˆæœ¬å’Œé£é™©ã€‚</li>
<li>å°†é€‚é… POP æ¶ˆè´¹æ¨¡å¼çš„é€»è¾‘ä¸Šç§»åˆ°äº†æœåŠ¡ç«¯ï¼Œä½¿å¾— Remoting å®¢æˆ·ç«¯ä¹Ÿèƒ½å®ç°æ¶ˆæ¯ç²’åº¦çš„æ¶ˆè´¹è´Ÿè½½å‡è¡¡ã€‚</li>
</ul>
<p>è™šæ‹Ÿé˜Ÿåˆ—æ–¹æ¡ˆçš„æ ¸å¿ƒæ€æƒ³æ˜¯åœ¨å®¢æˆ·ç«¯å’Œ Broker ä¹‹é—´å»ºç«‹ä¸€å±‚æŠ½è±¡ï¼Œç„¶ååœ¨æŠ½è±¡å±‚å®ç° Remoting åè®®çš„å‘ä¸‹å…¼å®¹å’Œæ¶ˆè´¹æ¨¡å¼çš„é€æ˜è½¬æ¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c93fbd17e29d4fa0a40834fea88a77dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963583&amp;x-signature=KUck%2FK5aySVyzCvhA1sXEyw1%2BU4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-5"><strong>è™šæ‹Ÿé˜Ÿåˆ—å®šä¹‰</strong></h3>
<p>RocketMQ ä¸­çš„ä¸€ä¸ªä¸»é¢˜ç”±åˆ†å¸ƒåœ¨å¤šä¸ª Broker ä¸Šçš„å¤šä¸ªé˜Ÿåˆ—ç»„æˆï¼Œå®¢æˆ·ç«¯é€šè¿‡è·¯ç”±æŸ¥è¯¢æ¥å£è·å–ä¸»é¢˜çš„é˜Ÿåˆ—åˆ—è¡¨æ¥è¿›è¡Œæ¶ˆæ¯æ”¶å‘ã€‚<strong>è™šæ‹Ÿé˜Ÿåˆ—æŒ‡çš„æ˜¯å°†è¿”å›ç»™å®¢æˆ·ç«¯çš„é˜Ÿåˆ—è™šæ‹ŸåŒ–ï¼Œå³å­˜å‚¨å±‚çœŸå®é˜Ÿåˆ—ä¸å†å¯¹å®¢æˆ·ç«¯å¯è§ã€‚</strong></p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸»é¢˜åœ¨ Broker-0ã€ Broker-1 å’Œ Broker-2 ä¸Šå„æœ‰ N ä¸ªé˜Ÿåˆ—ï¼Œè€Œ Remoting å®¢æˆ·ç«¯æŸ¥è¯¢åˆ°çš„æ˜¯ vBroker ä¸Š M ä¸ªé˜Ÿåˆ—ã€‚è™šæ‹ŸåŒ–åçš„é˜Ÿåˆ—ä¸çœŸå®é˜Ÿåˆ—çš„æ˜ å°„å…³ç³»ç”±æœåŠ¡ç«¯ç®¡ç†ï¼Œå› æ­¤ Remoting å®¢æˆ·ç«¯æ— éœ€åœ¨è¯·æ±‚ä¸­æ ‡è¯†ç›®æ ‡ Broker èº«ä»½ï¼Œå³è§£é™¤äº† 5.x å¯¹ Remoting SDK ç‰ˆæœ¬çš„ä¾èµ–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/272d212cef9a45099328b1e03ce6675a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963583&amp;x-signature=ZSjfeMvXAV8Pi6ImwTUsd1nfLtU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-6"><strong>æ¶ˆè´¹æ¨¡å¼é€æ˜è½¬æ¢</strong></h3>
<p>æœåŠ¡ç«¯é€šè¿‡å°† Remoting å®¢æˆ·ç«¯çš„ PULL æ¨¡å¼æ— æ„Ÿè½¬æ¢ä¸º POP æ¨¡å¼æ¥å®ç°æ¶ˆæ¯ç²’åº¦çš„æ¶ˆè´¹è´Ÿè½½å‡è¡¡ã€‚</p>
<p>Remoting æ¶ˆè´¹è€…ä¸æœåŠ¡ç«¯çš„äº¤äº’ä¸»è¦åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼š</p>
<ul>
<li>
<p>é€šè¿‡è™šæ‹Ÿé˜Ÿåˆ—å‘æœåŠ¡ç«¯å‘é€ PULL è¯·æ±‚ï¼Œæ‹‰å–é˜Ÿåˆ—ä¸­å¾…æ¶ˆè´¹çš„æ¶ˆæ¯ã€‚</p>
</li>
<li>
<p>æ¶ˆè´¹å®Œæˆåå‘æœåŠ¡ç«¯æäº¤è™šæ‹Ÿé˜Ÿåˆ—æ¶ˆè´¹ä½ç‚¹ï¼Œé‡‡ç”¨ç´¯ç§¯ç¡®è®¤çš„å®šæ—¶åŒæ­¥æœºåˆ¶ã€‚</p>
</li>
</ul>
<p>é¦–å…ˆï¼ŒæœåŠ¡ç«¯ä¼šå°† Remoting å®¢æˆ·ç«¯å¯¹è™šæ‹Ÿé˜Ÿåˆ—çš„ PULL è¯·æ±‚è½¬æ¢ä¸ºå¯¹å­˜å‚¨å±‚çœŸå®é˜Ÿåˆ—çš„ POP è¯·æ±‚ã€‚è¯·æ±‚è½¬æ¢è¿‡ç¨‹ä¸­çš„é˜Ÿåˆ—æ˜ å°„å…³ç³»ç”±é˜Ÿåˆ—é€‰æ‹©å™¨å†³ç­–ï¼Œå¹¶ä¸”æ”¯æŒåŠ¨æ€è°ƒæ•´ç­–ç•¥ï¼Œè¿™æ ·èƒ½å¤Ÿåšåˆ°åœ¨ä¿è¯æ¶ˆæ¯æ—¶å»¶çš„å‰æä¸‹å°½å¯èƒ½é™ä½ POP è½®è¯¢å¯¹ Broker çš„è´Ÿè½½å‹åŠ›ã€‚</p>
<p>æ­¤å¤–ï¼ŒæœåŠ¡ç«¯è¿˜ä¼šä¸ºæ¯ä¸ªå®¢æˆ·ç«¯è™šæ‹Ÿé˜Ÿåˆ—ç»´æŠ¤ä¸€ä¸ªå†…å­˜é˜Ÿåˆ—ï¼Œä»¥é€‚é… POP æ¨¡å¼çš„ä¸å¯è§æ—¶é—´æœºåˆ¶å’Œé€‰æ‹©ç¡®è®¤æœºåˆ¶ï¼š</p>
<ul>
<li>
<p>å°† Remoting å®¢æˆ·ç«¯å¯¹ Offset çš„ç´¯ç§¯ç¡®è®¤è½¬æ¢ä¸ºå¯¹ POP ReceiptHandle çš„é€‰æ‹©ç¡®è®¤ã€‚</p>
</li>
<li>
<p>è‡ªåŠ¨ç»­æœŸå·²æ‹‰å–æœªç¡®è®¤æ¶ˆæ¯çš„ä¸å¯è§æ—¶é—´ï¼Œç›´è‡³å®¢æˆ·ç«¯ç¡®è®¤æˆ–æ¶ˆè´¹è¶…æ—¶ã€‚</p>
</li>
</ul>
<p>æ¶ˆè´¹æ¨¡å¼è½¬æ¢åœ¨æœåŠ¡ç«¯è®¡ç®—å±‚ Proxy ä¸Šå®ç°ï¼Œå¯¹ Remoting å®¢æˆ·ç«¯å’Œå­˜å‚¨å±‚ Broker è€Œè¨€æ˜¯å®Œå…¨é€æ˜ã€æ— æ„ŸçŸ¥çš„ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸ä¾èµ–ä»»ä½•æŒä¹…åŒ–çš„çŠ¶æ€æ•°æ®ï¼Œå¯¹ Proxy çš„éƒ¨ç½²æ¶æ„å’Œæ°´å¹³æ‰©å±•æ€§æ²¡æœ‰ä»»ä½•å½±å“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/065e7174bd1e417abd3e97191ef0ebed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963583&amp;x-signature=nsKpbExTssXF%2FemRBJRFV1YYFT8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-7"><strong>æ¶ˆé™¤å®¢æˆ·ç«¯é‡å¹³è¡¡</strong></h3>
<p>å½“ Remoting å®¢æˆ·ç«¯æ£€æµ‹åˆ°æ¶ˆè´¹ç»„å‘ç”Ÿå˜åŒ–ï¼ˆé˜Ÿåˆ—æ•°é‡å˜åŒ–ã€æ¶ˆè´¹è€…åˆ—è¡¨å˜åŒ–ï¼‰æ—¶ä¼šæ‰§è¡Œé‡å¹³è¡¡ï¼ˆRebalanceï¼‰è¿‡ç¨‹ï¼šé‡æ–°è®¡ç®—é˜Ÿåˆ—åˆ†é…ç»“æœ -&gt; è½¬ç§»é˜Ÿåˆ—æ¶ˆè´¹æ‰€æœ‰æƒã€‚</p>
<p>åœ¨å¤§è§„æ¨¡é›†ç¾¤æˆ–é¢‘ç¹éƒ¨ç½²çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæ¶ˆè´¹è€…çš„ä¸Šä¸‹çº¿ä¼šå¯¼è‡´ Rebalance é¢‘ç¹è§¦å‘ï¼Œå¯¹ç³»ç»Ÿç¨³å®šæ€§æœ‰ä¸å¯å¿½è§†çš„å½±å“ã€‚å®é™…ä¸Šï¼Œå¼€å¯è™šæ‹Ÿé˜Ÿåˆ—åï¼ŒçœŸå®é˜Ÿåˆ—çš„æ•°é‡å˜åŒ–å·²ç»å¯¹å®¢æˆ·ç«¯å±è”½äº†ï¼Œè€Œä¸”ä¹Ÿä¸å†éœ€è¦å®¢æˆ·ç«¯ä¾§çš„ Rebalance æœºåˆ¶äº†ï¼Œå› ä¸ºæ¶ˆè´¹çš„è´Ÿè½½å‡è¡¡å®Œå…¨ç”±æœåŠ¡ç«¯æ§åˆ¶ã€‚</p>
<p>äºæ˜¯ï¼Œè…¾è®¯äº‘æ¶ˆæ¯é˜Ÿåˆ— RocketMQ ç‰ˆé€šè¿‡ç²¾å‡†æ§åˆ¶æ¶ˆè´¹è€…åˆ—è¡¨æŸ¥è¯¢æ¥å£çš„å“åº”å®ç°äº† Remoting æ¶ˆè´¹è€…ä¹‹é—´çš„ç›¸äº’ä¸å¯è§ï¼Œå³å±è”½äº†æ¶ˆè´¹è€…åˆ—è¡¨å˜åŒ–ï¼Œä»è€Œå®Œå…¨æ¶ˆé™¤äº†å®¢æˆ·ç«¯é‡å¹³è¡¡ï¼Œæ˜¾è‘—æé«˜äº†ç³»ç»Ÿç¨³å®šæ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6216f2d341c847b293b6c72fbea55ae9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963583&amp;x-signature=aaCp3rw7woNuDSxIUs%2FZQdbdKPI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-8"><strong>é˜Ÿåˆ—é¡ºåºæ¶ˆè´¹</strong></h3>
<p>RocketMQ æ”¯æŒé˜Ÿåˆ—é¡ºåºæ¶ˆè´¹ä»¥æ»¡è¶³éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ã€‚å¼€å¯è™šæ‹Ÿé˜Ÿåˆ—åï¼ŒRemoting å®¢æˆ·ç«¯é¡ºåºæ¶ˆè´¹ç”±ä¸¤éƒ¨åˆ†ä¿è¯ï¼š</p>
<ul>
<li>æœåŠ¡ç«¯è®¡ç®—å±‚è´Ÿè´£å°†é˜Ÿåˆ—åˆ†é…ç»™åœ¨çº¿å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”ç¡®ä¿æ¯ä¸ªé˜Ÿåˆ—çš„æ¶ˆæ¯åªä¼šè¢«ä¸€ä¸ªå®¢æˆ·ç«¯æ‹‰å–ã€‚</li>
<li>Remoting SDK æ‹‰å–åˆ°æ¶ˆæ¯åï¼Œè´Ÿè´£å°†æ¶ˆæ¯æœ‰åºåœ°ã€ä¸²è¡Œåœ°æŠ•é€’ç»™ä¸šåŠ¡æ¶ˆè´¹ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ff6db4b19514a349f1dcc545c561a0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963583&amp;x-signature=Mz%2F97B28U5XZ69984nh%2FowAFVPg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-9"><strong>ç»“è¯­</strong></h2>
<p>æœ¬æ–‡ç³»ç»Ÿé˜è¿°äº† Apache RocketMQ 5.x åœ¨å­˜ç®—åˆ†ç¦»æ¶æ„ä¸ POP æ¶ˆè´¹æ¨¡å¼ä¸‹çš„æ¼”è¿›ï¼Œå¹¶é‡ç‚¹åˆ†æäº† Remoting åè®®å®¢æˆ·ç«¯é¢ä¸´çš„ä¸¤å¤§å…¼å®¹æ€§æŒ‘æˆ˜ï¼šSDK ç‰ˆæœ¬ä¾èµ–ä»¥åŠæ¶ˆè´¹è€…é˜Ÿåˆ—ç»‘å®šæœºåˆ¶çš„é™åˆ¶ã€‚</p>
<p>é’ˆå¯¹ä¸Šè¿°æŒ‘æˆ˜ï¼Œè…¾è®¯äº‘æ¶ˆæ¯é˜Ÿåˆ— RocketMQ ç‰ˆæå‡ºäº†è™šæ‹Ÿé˜Ÿåˆ—å…¼å®¹æ–¹æ¡ˆï¼Œé€šè¿‡é˜Ÿåˆ—è™šæ‹ŸåŒ–å’Œæ¶ˆè´¹æ¨¡å¼çš„æ— æ„Ÿåˆ‡æ¢ï¼Œå®ç°äº†å¯¹ Remoting åè®®å®¢æˆ·ç«¯çš„å®Œæ•´æ”¯æŒï¼Œä¸ºå¤§è§„æ¨¡å­˜é‡ç”¨æˆ·å¿«é€Ÿè·å–æ–°æ¶æ„å¸¦æ¥çš„æŠ€æœ¯çº¢åˆ©æä¾›äº†é«˜æ•ˆè·¯å¾„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kafka é›†ç¾¤ä¸Šäº‘æ–°çªç ´ï¼šè…¾è®¯äº‘ CKafka è”é‚¦è¿ç§»æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7581999251367755828</link>    <guid>https://juejin.cn/post/7581999251367755828</guid>    <pubDate>2025-12-10T09:30:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581999251367755828" data-draft-id="7581999251367739444" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kafka é›†ç¾¤ä¸Šäº‘æ–°çªç ´ï¼šè…¾è®¯äº‘ CKafka è”é‚¦è¿ç§»æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Kafka,äº‘åŸç”Ÿ,æ¶ˆæ¯é˜Ÿåˆ—"/> <meta itemprop="datePublished" content="2025-12-10T09:30:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è…¾è®¯äº‘ä¸­é—´ä»¶"/> <meta itemprop="url" content="https://juejin.cn/user/2330620382414296"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kafka é›†ç¾¤ä¸Šäº‘æ–°çªç ´ï¼šè…¾è®¯äº‘ CKafka è”é‚¦è¿ç§»æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2330620382414296/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è…¾è®¯äº‘ä¸­é—´ä»¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:30:16.000Z" title="Wed Dec 10 2025 09:30:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¼ä¸šè‡ªå»º Kafka é›†ç¾¤ä¸Šäº‘çš„æ ¸å¿ƒæŒ‘æˆ˜</strong></h2>
<p>éšç€ä¼ä¸šæ•°å­—åŒ–è¿›ç¨‹åŠ é€Ÿï¼ŒKafka é›†ç¾¤ä¸Šäº‘æˆä¸ºæå‡ç³»ç»Ÿå¼¹æ€§ä¸æ•°æ®å¯é æ€§çš„å…³é”®è·¯å¾„ã€‚ä¼ ç»Ÿè¿ç§»æ–¹æ¡ˆå¦‚å•å†™åŒæ¶ˆè´¹ã€å…ˆåˆ‡å†™å†åˆ‡è¯»ã€Mirrormaker åŒæ­¥ç­‰ï¼Œè™½ç„¶åœ¨æŸäº›åœºæ™¯ä¸‹èƒ½å¤Ÿæ»¡è¶³åŸºæœ¬éœ€æ±‚ï¼Œä½†æ™®éå­˜åœ¨ä»¥ä¸‹å…±æ€§é—®é¢˜ï¼š</p>
<ol>
<li>è¿ç§»éš¾åº¦é«˜ã€‚</li>
<li>é«˜é˜¶ç‰¹æ€§å…¼å®¹æ€§å·®ã€‚</li>
<li>æ•°æ®ä¸€è‡´æ€§å’Œä¸šåŠ¡è¿ç»­æ€§éš¾ä»¥ä¿è¯ã€‚</li>
</ol>
<p>é’ˆå¯¹ä¸Šè¿°è¿ç§»éš¾é¢˜ï¼Œ<strong>è…¾è®¯äº‘ CKafka é¦–æ¬¡å‘å¸ƒé›†ç¾¤è”é‚¦è¿ç§»æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆé€šè¿‡å¤šé›†ç¾¤è”é‚¦æ¶æ„ä¸ç²¾ç»†åŒ–åŒæ­¥æœºåˆ¶ï¼Œå®ç°è‡ªå»º Kafka é›†ç¾¤æ— æŸä¸Šäº‘ã€‚</strong> ä¸ºä¸Šä¸‹æ¸¸ä¾èµ–å¤æ‚ã€å¯¹æ•°æ®ä¸€è‡´æ€§ä¸ä¸šåŠ¡è¿ç»­æ€§æœ‰æé«˜è¦æ±‚çš„åœºæ™¯æä¾›â€œå¹³æ»‘è¿‡æ¸¡ã€æ— æ„Ÿåˆ‡æ¢â€çš„å…¨æµç¨‹æ”¯æ’‘ã€‚</p>
<h2 data-id="heading-1"><strong>æ–¹æ¡ˆå¯¹æ¯”ï¼šä¸ºä»€ä¹ˆé€‰æ‹© CKafka è”é‚¦è¿ç§»ï¼Ÿ</strong></h2>
<h3 data-id="heading-2"><strong>ä¼ ç»Ÿè¿ç§»æ–¹æ¡ˆçš„å±€é™æ€§</strong></h3>
<h4 data-id="heading-3"><strong>æ–¹æ¡ˆä¸€ï¼šå•å†™åŒæ¶ˆè´¹</strong></h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc42d2fef67a4e69aca9e2608a1f79d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963816&amp;x-signature=%2BiDr7KF0bGJvo6iIPRpDaeqnNck%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>1. èµ„æºå‡†å¤‡ï¼š</strong> åˆ›å»º CKafka é›†ç¾¤ï¼Œåœ¨è…¾è®¯äº‘ CKafka ä¸­åˆ›å»º Topicã€ACL ç­‰èµ„æºï¼ˆå¯é€šè¿‡ Connect/Mirrormaker åŒæ­¥ï¼‰ã€‚</p>
<p><strong>2. æ–°æ¶ˆè´¹è€…æ¥å…¥ï¼š</strong> å¯åŠ¨æ–°æ¶ˆè´¹è€…åŠ å…¥ CKafka é›†ç¾¤ï¼Œæ­¤æ—¶ CKafka é›†ç¾¤æš‚æ— æ¶ˆæ¯ï¼Œæ–°é›†ç¾¤å’Œæ–°æ¶ˆè´¹è€…å¤„äºç©ºç½®çŠ¶æ€ã€‚</p>
<p><strong>3. ç”Ÿäº§è€…åˆ‡æ¢ï¼š</strong> å°†ç”Ÿäº§è€…åˆ‡æ¢åˆ° CKafka é›†ç¾¤ï¼Œæ­¤æ—¶æ–°å¢æµé‡å†™å…¥ CKafka é›†ç¾¤ï¼Œå†å²æ•°æ®ä¿ç•™åœ¨è‡ªå»º Kafka é›†ç¾¤ã€‚</p>
<p><strong>4. æ—§æ¶ˆè´¹è€…å¤„ç†ï¼š</strong> æ—§æ¶ˆè´¹è€…ç»§ç»­æ¶ˆè´¹ï¼Œç›´è‡³å†å²æ•°æ®å…¨éƒ¨æ¶ˆè´¹å®Œæˆã€‚</p>
<p><strong>5. è‡ªå»ºé›†ç¾¤ä¸‹çº¿ï¼š</strong> è§‚å¯Ÿä¸€æ®µæ—¶é—´ï¼ˆè‡ªå»ºé›†ç¾¤æ¶ˆæ¯è¿‡æœŸåï¼‰ï¼Œä¸‹çº¿è‡ªå»º Kafka é›†ç¾¤ã€‚</p>
<h4 data-id="heading-4"><strong>æ–¹æ¡ˆäºŒï¼šå…ˆåˆ‡å†™å†åˆ‡è¯»</strong></h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b954c346ea04ea5a8fdeb5cf2d463a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963816&amp;x-signature=GAjC%2B4ap4KG%2BPE913ch7EigVHME%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>1. èµ„æºå‡†å¤‡ï¼š</strong> åˆ›å»º CKafka é›†ç¾¤ï¼Œåœ¨è…¾è®¯äº‘ CKafka ä¸­åˆ›å»º Topicã€ACL ç­‰èµ„æºï¼ˆå¯é€šè¿‡ Connect/Mirrormaker åŒæ­¥ï¼‰ã€‚</p>
<p><strong>2. ç”Ÿäº§è€…åˆ‡æ¢ï¼š</strong> å°†ç”Ÿäº§è€…åˆ‡æ¢åˆ° CKafka é›†ç¾¤ï¼ŒCKafka é›†ç¾¤å¼€å§‹æ‰¿è½½æ–°å¢æµé‡ã€‚</p>
<p><strong>3. æ—§æ•°æ®å¤„ç†ï¼š</strong> æ—§æ¶ˆè´¹è€…æŒç»­æ¶ˆè´¹è‡ªå»º Kafka é›†ç¾¤æ•°æ®ï¼Œç›´åˆ°æ•°æ®å…¨éƒ¨æ¶ˆè´¹å®Œæ¯•ï¼Œæ­¤æ—¶å¯ä¸‹çº¿æ—§æ¶ˆè´¹è€…ã€‚</p>
<p><strong>4. æ–°æ¶ˆè´¹è€…æ¥å…¥ï¼š</strong> å¯åŠ¨æ–°æ¶ˆè´¹è€…åŠ å…¥ CKafka é›†ç¾¤ï¼Œå¼€å§‹æ¶ˆè´¹æ–°æ•°æ®ã€‚</p>
<p><strong>5. è‡ªå»ºé›†ç¾¤ä¸‹çº¿ï¼š</strong> è§‚å¯Ÿä¸€æ®µæ—¶é—´ï¼ˆè‡ªå»ºé›†ç¾¤æ¶ˆæ¯è¿‡æœŸåï¼‰ï¼Œä¸‹çº¿è‡ªå»º Kafka é›†ç¾¤ã€‚</p>
<h4 data-id="heading-5"><strong>æ–¹æ¡ˆä¸‰ï¼šMirrormaker è¿ç§»</strong></h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a760848e230d447e8ec24c83a63e4fba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963816&amp;x-signature=X5MCbhHM6zh0BlAaZqkHDdjGi38%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>1. èµ„æºå‡†å¤‡ï¼š</strong> åˆ›å»º CKafka é›†ç¾¤ï¼Œåœ¨è…¾è®¯äº‘ CKafka ä¸­åˆ›å»º Topicã€ACL ç­‰èµ„æºï¼ˆå¯é€šè¿‡ Connect/Mirrormaker åŒæ­¥ï¼‰ã€‚</p>
<p><strong>2. æ•°æ®åŒæ­¥ï¼š</strong> å»ºç«‹ Mirrormaker æ•°æ®åŒæ­¥é“¾è·¯ï¼Œä»è‡ªå»º Kafka é›†ç¾¤åŒæ­¥æ•°æ®åˆ° CKafka é›†ç¾¤ï¼Œæ”¯æŒåŒæ­¥æ¶ˆæ¯å’Œæ¶ˆè´¹ç»„ä½ç‚¹æ•°æ®ã€‚</p>
<p><strong>3. æ¶ˆè´¹è€…åˆ‡æ¢ï¼š</strong> å…³é—­æ—§æ¶ˆè´¹è€…ï¼Œå¹¶å¯åŠ¨æ–°æ¶ˆè´¹è€…åŠ å…¥ CKafka é›†ç¾¤ï¼ˆæ–°æ•°æ®é€šè¿‡ Mirrormaker åŒæ­¥åˆ° CKafka é›†ç¾¤ï¼‰ã€‚</p>
<p><strong>4. ç”Ÿäº§è€…åˆ‡æ¢ï¼š</strong> å°†ç”Ÿäº§è€…åˆ‡æ¢åˆ° CKafka é›†ç¾¤ã€‚</p>
<p><strong>5. èµ„æºæ¸…ç†ï¼š</strong> è§‚å¯Ÿä¸€æ®µæ—¶é—´ï¼ˆMirrormaker æ— åŒæ­¥æµé‡åï¼‰ï¼Œä¸‹çº¿è‡ªå»º Kafka é›†ç¾¤å’Œ Mirrormaker é›†ç¾¤ã€‚</p>
<h4 data-id="heading-6"><strong>ä¼ ç»Ÿè¿ç§»æ–¹æ¡ˆç—›ç‚¹æ€»ç»“</strong></h4>









































<table><thead><tr><th><strong>å¯¹æ¯”é¡¹ç›®</strong></th><th><strong>å•å†™åŒæ¶ˆè´¹</strong></th><th><strong>å…ˆåˆ‡å†™å†åˆ‡è¯»</strong></th><th><strong>Mirrormaker è¿ç§»</strong></th></tr></thead><tbody><tr><td>CKafka é›†ç¾¤æ•°æ®å®Œæ•´æ€§</td><td>æ— å†å²æ•°æ®</td><td>æ— å†å²æ•°æ®</td><td>æ•°æ®å®Œæ•´</td></tr><tr><td>æ¶ˆè´¹ä¹±åº</td><td>å­˜åœ¨ä¹±åº</td><td>ä¸ä¹±åº</td><td>å­˜åœ¨ä¹±åº</td></tr><tr><td>æ¶ˆæ¯å®æ—¶æ€§</td><td>é«˜</td><td>ä½</td><td>é«˜</td></tr><tr><td>é«˜é˜¶ç‰¹æ€§å…¼å®¹</td><td>å¹‚ç­‰/äº‹åŠ¡ä¸å…¼å®¹</td><td>å¹‚ç­‰/äº‹åŠ¡ä¸å…¼å®¹</td><td>å¹‚ç­‰/äº‹åŠ¡ä¸å…¼å®¹</td></tr><tr><td>è¿ç§»å¤æ‚åº¦</td><td>è¾ƒé«˜</td><td>é«˜</td><td>è¾ƒé«˜</td></tr></tbody></table>
<p>å¯¹æ¯”å„ç±»è¿ç§»æ–¹å¼åå¯è§ï¼Œæ¯ç§æ–¹æ¡ˆéƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä¼˜åŠ£åŠ¿ï¼Œå®¢æˆ·å¯æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯è¿›è¡Œé€‰æ‹©ï¼Œå¦‚ï¼š</p>
<ul>
<li>éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ä¸è¦æ±‚æ¶ˆè´¹æœ‰åºï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©<strong>å…ˆåˆ‡å†™å†åˆ‡è¯»çš„</strong>æ–¹å¼ï¼›</li>
<li>éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯éœ€è¦æ•°æ®å®Œæ•´æ€§ï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©Â <strong>Mirrormaker è¿ç§»</strong>æ–¹æ¡ˆã€‚</li>
</ul>
<p>ç„¶è€Œï¼Œå¸¸è§„è¿ç§»æ–¹æ¡ˆè™½ç„¶åœ¨æŸäº›åœºæ™¯ä¸‹èƒ½å¤Ÿæ»¡è¶³åŸºæœ¬éœ€æ±‚ï¼Œä½†æ™®éå­˜åœ¨è¿ç§»æˆæœ¬é«˜ã€é«˜é˜¶ç‰¹æ€§å…¼å®¹æ€§å·®ã€æ•°æ®ä¸€è‡´æ€§ã€ä¸šåŠ¡è¿ç»­æ€§éš¾ä»¥ä¿è¯ç­‰å…±æ€§é—®é¢˜ã€‚</p>
<h3 data-id="heading-7"><strong>è…¾è®¯äº‘ CKafka è”é‚¦è¿ç§»æ–¹æ¡ˆä¼˜åŠ¿</strong></h3>
<p>è…¾è®¯äº‘ CKafka è”é‚¦é›†ç¾¤è¿ç§»æ–¹æ¡ˆè§£å†³äº†ä¼ ç»Ÿæ–¹æ¡ˆçš„ç—›ç‚¹é—®é¢˜ï¼Œå…¶å¯¹æ¯”ä¼˜åŠ¿å…·ä½“ä½“ç°åœ¨ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<p>âœ…Â <strong>è¿ç§»å¤æ‚åº¦ï¼šä»"äººå·¥æ¢³ç†"åˆ°"è‡ªåŠ¨é€‚é…"</strong></p>
<ul>
<li>
<p>ä¼ ç»Ÿæ–¹æ¡ˆåœ¨è¿ç§»å‰ï¼Œéœ€è¦ç›˜ç‚¹ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…åº”ç”¨ç­‰ä¸Šä¸‹æ¸¸ä¾èµ–ï¼Œå¹¶è¿›è¡Œå½±å“èŒƒå›´è¯„ä¼°ï¼Œä¸€æ—¦è¯„ä¼°ä¸åˆ°ä½å¯èƒ½ä¼šå‡ºç°ç”Ÿäº§/æ¶ˆè´¹å¼‚å¸¸ã€‚</p>
</li>
<li>
<p><strong>è…¾è®¯äº‘ CKafka è”é‚¦æ–¹æ¡ˆä¸éœ€è¦æ¢³ç†ä¸Šä¸‹æ¸¸ä¾èµ–é¡¹ï¼ŒäººåŠ›æŠ•å…¥é™ä½ï¼Œè¿ç§»å‘¨æœŸæ˜æ˜¾ç¼©çŸ­ã€‚</strong></p>
</li>
</ul>
<p><strong>âœ… è¿ç§»é£é™©ï¼šä»"é«˜é£é™©å›æ»š"åˆ°"å®‰å…¨å¯é€†"</strong></p>
<ul>
<li>
<p>ä¼ ç»Ÿæ–¹æ¡ˆå›æ»šé£é™©é«˜ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®å»¶è¿Ÿæˆ–ä¸¢å¤±ã€‚</p>
</li>
<li>
<p><strong>è…¾è®¯äº‘ CKafka è”é‚¦æ–¹æ¡ˆå›æ»šæ—¶ä¸ä¼šä¸¢å¤±ä¸šåŠ¡æ•°æ®ï¼Œå¹¶æ”¯æŒç°åº¦ç­–ç•¥ï¼Œå¯æ¸è¿›å¼å®Œæˆæµé‡åˆ‡æ¢ã€‚</strong></p>
</li>
</ul>
<p><strong>âœ… ä¸šåŠ¡æ”¹åŠ¨ï¼šä»"åŠŸèƒ½å¦¥å"åˆ°"å®Œå…¨å…¼å®¹"</strong></p>
<ul>
<li>
<p>ä¼ ç»Ÿè¿ç§»æ–¹æ¡ˆä¼šå¯¼è‡´å¹‚ç­‰æ€§ã€äº‹åŠ¡ç­‰é«˜çº§åŠŸèƒ½å¤±æ•ˆï¼Œéœ€è¦å…ˆå…³é—­ï¼Œè¿ç§»å®Œæˆåé‡æ–°å¼€å¯ã€‚</p>
</li>
<li>
<p>è…¾è®¯äº‘ CKafka è”é‚¦æ–¹æ¡ˆæ— éœ€ä¿®æ”¹ç°æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œå…³é”®ä¸šåŠ¡åŠŸèƒ½ä¸å—å½±å“ï¼Œé¿å…åŠŸèƒ½é‡æ–°å¼€å‘ã€‚</p>
</li>
</ul>
<p><strong>âœ… å†³ç­–æˆæœ¬ï¼šä»"å¤šæ–¹æ¡ˆæƒè¡¡"åˆ°"ç»Ÿä¸€è§£å†³"</strong></p>
<ul>
<li>
<p>ä¼ ç»Ÿæ–¹æ¡ˆéœ€è¦è¯„ä¼°å„ä¸ªä¸šåŠ¡åœºæ™¯å¯¹æ¶ˆæ¯é¡ºåºã€æ¶ˆæ¯å®æ—¶æ€§ã€æ•°æ®ä¸€è‡´æ€§çš„è¦æ±‚ï¼Œæ–¹æ¡ˆé€‰æ‹©å¤æ‚ã€‚</p>
</li>
<li>
<p>è…¾è®¯äº‘ CKafka è”é‚¦æ–¹æ¡ˆå…¼é¡¾æ¶ˆæ¯é¡ºåºä¸æ•°æ®ä¸€è‡´æ€§ï¼Œæ— éœ€æƒè¡¡å–èˆï¼Œå®ç°æ— æŸåˆ‡æ¢ã€‚</p>
</li>
</ul>
<p><strong>âœ…</strong> <strong>ä¸šåŠ¡è¿ç»­æ€§ï¼šä»"ç”Ÿäº§/æ¶ˆè´¹æš‚åœ"åˆ°"æ•°æ®å±‚é¢é›¶ä¸­æ–­"</strong></p>
<ul>
<li>
<p>ä¼ ç»Ÿæ–¹æ¡ˆå¯èƒ½å¯¼è‡´ä¸šåŠ¡ç”Ÿäº§/æ¶ˆè´¹æš‚åœæˆ–æ•°æ®ä¹±åº</p>
</li>
<li>
<p>è…¾è®¯äº‘ CKafka è”é‚¦æ–¹æ¡ˆç”Ÿäº§ã€æ¶ˆè´¹å¯ä»¥æŒç»­è¿›è¡Œï¼Œæ•°æ®å±‚é¢æ— ä¸­æ–­ï¼Œè¿æ¥å±‚é¢å­˜åœ¨åˆ†é’Ÿçº§åˆ«çš„çŸ­æš‚åˆ‡æ¢ã€‚è€Œæ­£åœ¨è§„åˆ’ä¸­çš„æ¥å…¥ç‚¹ IP å¤ç”¨åŠŸèƒ½å°†çœŸæ­£å®ç°ä¸šåŠ¡é›¶ä¸­æ–­ã€‚</p>
</li>
</ul>
<h2 data-id="heading-8"><strong>è…¾è®¯äº‘ CKafka è”é‚¦è¿ç§»æ–¹æ¡ˆè¯¦è§£</strong></h2>
<p>é›†ç¾¤è”é‚¦æ˜¯è…¾è®¯äº‘ç ”å‘çš„ï¼Œèƒ½å¤Ÿå°†å¤šå¥— Kafka é›†ç¾¤æ„æˆå®Œæ•´è”é‚¦é›†ç¾¤çš„æ ¸å¿ƒèƒ½åŠ›ã€‚è¯¥æ–¹æ¡ˆä¸ºå®¢æˆ·æä¾›ä»¥ä¸‹ä»·å€¼ï¼š</p>
<p><strong>1. è‡ªå»º Kafka é›†ç¾¤å¹³æ»‘æ— æŸä¸Šäº‘</strong></p>
<ol start="2">
<li>
<p>é›†ç¾¤çº§åˆ«å®¹ç¾ï¼ˆæ”¯æŒåŒåœ°åŸŸ/è·¨åœ°åŸŸå¤šé›†ç¾¤å®¹ç¾ï¼‰</p>
</li>
<li>
<p>è¶…å¤§é›†ç¾¤æ‹†åˆ†ï¼ˆå¤§é›†ç¾¤æ‹†åˆ†ä¸ºè‹¥å¹²ä¸ªå°é›†ç¾¤ï¼‰</p>
</li>
</ol>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»è‡ªå»º Kafka é›†ç¾¤å¹³æ»‘æ— æŸä¸Šäº‘çš„åœºæ™¯ï¼Œè…¾è®¯äº‘ CKafka è”é‚¦é›†ç¾¤è¿ç§»æ–¹æ¡ˆæ”¯æŒé€šè¿‡å°†è‡ªå»º Kafka é›†ç¾¤ä¸äº‘ä¸Š CKafka é›†ç¾¤æ„å»ºæˆä¸€ä¸ªé€»è¾‘ç»Ÿä¸€çš„è”é‚¦é›†ç¾¤ï¼Œå®ç°å¹³æ»‘æ— æŸçš„é›†ç¾¤è¿ç§»ã€‚</p>
<h3 data-id="heading-9"><strong>æŠ€æœ¯æ¶æ„ä¸åŸç†</strong></h3>
<p>è…¾è®¯äº‘ CKafka è”é‚¦è¿ç§»å·¥å…·åŸºäºå¼€æº Kafka çš„å‰¯æœ¬ ISR æœºåˆ¶å®ç°æ•°æ®å’Œå…ƒæ•°æ®ä¸€è‡´æ€§ä¿éšœï¼Œè¯¥æœºåˆ¶å·²åœ¨å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒä¸­å¾—åˆ°å……åˆ†éªŒè¯ã€‚é€šè¿‡å¤ç”¨è¿™ä¸€æˆç†Ÿçš„è¿ç§»é€»è¾‘ï¼Œè”é‚¦è¿ç§»èƒ½å¤Ÿæä¾›ä¸æ—¥å¸¸ Kafka é›†ç¾¤æ‰©ç¼©å®¹ç›¸åŒçš„æ“ä½œä½“éªŒï¼Œç¡®ä¿æŠ€æœ¯å¯é æ€§ä¸æ˜“ç”¨æ€§çš„ç»Ÿä¸€ã€‚</p>
<p><strong>1. è”é‚¦é›†ç¾¤æ„å»ºï¼š</strong> é€šè¿‡è‡ªå»º Kafka é›†ç¾¤çš„ä¿¡æ¯ï¼Œè…¾è®¯äº‘è”é‚¦å·¥å…·ä¼šå°† CKafka é›†ç¾¤ä¸è‡ªå»ºé›†ç¾¤æ„å»ºæˆè”é‚¦é›†ç¾¤ï¼ŒåŒä¸€ä¸ªè”é‚¦é›†ç¾¤å†…çš„èŠ‚ç‚¹å¯äº’ç›¸é€šè®¯ã€‚</p>
<p><strong>2. è”é‚¦è¿ç§»ï¼š</strong> è”é‚¦å·¥å…·ä¼šè·å– Partition æ•°æ®ä»¥åŠåŸä¿¡æ¯ï¼Œå¹¶é€šè¿‡ Kafka ISR é€»è¾‘å°†çŠ¶æ€ä»è‡ªå»º Kafka èŠ‚ç‚¹åŒæ­¥åˆ° CKafka èŠ‚ç‚¹ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acac8d22d9f34a299444caacd6f32ded~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963816&amp;x-signature=UwNpUJ%2BYDAeSRa6zJy0KWBA4Da0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-10"><strong>è¿ç§»æµç¨‹</strong></h3>
<h4 data-id="heading-11"><strong>è¿ç§»å‰</strong></h4>
<p><strong>1. é›†ç¾¤é€‰å‹ï¼š</strong> å®¢æˆ·æ ¹æ®å½“å‰è‡ªå»ºé›†ç¾¤æµé‡ã€Topic æ•°ã€åˆ†åŒºæ•°ã€Group è§„æ¨¡è¿›è¡Œ CKafka é›†ç¾¤é€‰å‹ï¼Œå»ºè®®åœ¨ç›®æ ‡è§„æ ¼åŸºç¡€ä¸Šä¸Šæµ® 30%ï¼Œä»¥åº”å¯¹çªå‘æƒ…å†µã€‚</p>
<p><strong>2. è‡ªå»ºé›†ç¾¤çŠ¶æ€æ ¡éªŒï¼š</strong> ç¡®è®¤è‡ªå»ºé›†ç¾¤çŠ¶æ€ã€æµé‡æ˜¯å¦æ­£å¸¸ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨æœªåŒæ­¥å‰¯æœ¬ç­‰é—®é¢˜ã€‚</p>
<p><strong>3. é…ç½®è°ƒæ•´ï¼š</strong> å®¢æˆ·æŒ‰è¦æ±‚è¿›è¡Œè‡ªå»ºé›†ç¾¤é…ç½®å¾®è°ƒï¼Œå¦‚ï¼šç‹¬ç«‹ä¸€ä¸ªè¿ç§»ç«¯å£ã€å¼€æ”¾å¯¹åº”æƒé™ã€‚</p>
<p><strong>4. æä¾›è‡ªå»ºé›†ç¾¤ä¿¡æ¯ï¼š</strong> å¦‚è‡ªå»ºé›†ç¾¤ Broker IPã€VPC IDï¼Œè‡ªå»ºé›†ç¾¤ ZK IPã€VPC IDã€æƒé™ä¿¡æ¯ç­‰ã€‚</p>
<h4 data-id="heading-12"><strong>è¿ç§»ä¸­</strong></h4>
<p><strong>1. æ„å»ºè”é‚¦é›†ç¾¤ï¼š</strong> ä½¿ç”¨è…¾è®¯äº‘è”é‚¦å·¥å…·ï¼Œå°†è‡ªå»º Kafka é›†ç¾¤ä¸ CKafka é›†ç¾¤ç»„æˆä¸€ä¸ªè”é‚¦é›†ç¾¤ã€‚</p>
<p><strong>2. çŠ¶æ€åŒæ­¥ï¼š</strong> è”é‚¦é›†ç¾¤ç»„ä»¶å®Œæˆåï¼Œè”é‚¦å·¥å…·ä¼šåŒæ­¥è‡ªå»º Kafka é›†ç¾¤çš„æ•°æ®/å…ƒæ•°æ®ã€‚</p>
<p>a. æ•°æ®/å…ƒæ•°æ®å¯ä»¥ä¿è¯å¼ºä¸€è‡´æ€§</p>
<p>b. åŒæ­¥è¿‡ç¨‹ä¸­éœ€é¿å…æ–°å»º Topicã€ACL ç­‰ã€‚</p>
<h4 data-id="heading-13"><strong>è¿ç§»å</strong></h4>
<p><strong>1. ä¸‹çº¿éªŒè¯ï¼š</strong> å®¢æˆ·ç¡®è®¤æ¥å…¥ç‚¹æ˜¯å¦å®Œæˆå˜æ›´ã€æµé‡æ˜¯å¦ç¬¦åˆé¢„æœŸã€CKafka å®ä¾‹è´Ÿè½½æ˜¯å¦æ­£å¸¸ï¼Œè¿ç§»å®Œæˆåè§‚å¯Ÿè‡³å°‘10åˆ†é’Ÿã€‚</p>
<p><strong>2. ä¸‹çº¿è‡ªå»ºé›†ç¾¤ï¼š</strong> ç¬¬ä¸€æ­¥éªŒè¯æ— è¯¯åï¼Œå¯æ“ä½œè‡ªå»º Kafka é›†ç¾¤çš„èŠ‚ç‚¹ä¸‹çº¿ã€‚</p>
<p><strong>3. é›†ç¾¤æ ‡å‡†åŒ–ï¼š</strong> è¿ç§»å®Œæˆåï¼Œè…¾è®¯äº‘ CKafka å®ä¾‹ä¼šè¿›è¡Œä¸€è½®å‡çº§ï¼Œè¿›è¡Œé€šè®¯åè®®ã€æ¶ˆæ¯åè®®ç­‰é…ç½®çš„æ ‡å‡†åŒ–ã€‚</p>
<h3 data-id="heading-14"><strong>æœªæ¥è§„åˆ’</strong></h3>
<p>æœªæ¥ï¼Œæˆ‘ä»¬å°†æŒç»­ä¼˜åŒ–è¿ç§»ä½“éªŒã€‚å½“å‰ç‰ˆæœ¬æ–¹æ¡ˆåœ¨è¿ç§»å®Œæˆåï¼Œä»éœ€å®¢æˆ·æ‰‹åŠ¨åˆ‡æ¢æ¥å…¥ç‚¹ï¼Œå¯¹äºéƒ¨åˆ†å…¨é‡åˆ‡æ¢çš„å®¢æˆ·è€Œè¨€ï¼Œç›˜ç‚¹ Kafka é›†ç¾¤çš„ä¸Šä¸‹æ¸¸çš„æ¥å…¥æƒ…å†µï¼Œä¿®æ”¹æ¥å…¥ç‚¹å¹¶é‡å¯æ˜¯å¼‚å¸¸å›°éš¾çš„ã€‚å› æ­¤ï¼Œè…¾è®¯äº‘è®¡åˆ’åœ¨åç»­ç‰ˆæœ¬ä¸­æ”¯æŒ<strong>æ¥å…¥ç‚¹ IP å¤ç”¨</strong>åŠŸèƒ½ã€‚åªè¦å®¢æˆ·ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ol>
<li>
<p>è‡ªå»º Kafka é›†ç¾¤éƒ¨ç½²åœ¨è…¾è®¯äº‘ä¸Šï¼›</p>
</li>
<li>
<p>è‡ªå»º Kafka é›†ç¾¤ Broker èŠ‚ç‚¹ä¸‹çº¿åï¼Œå¯¹åº”çš„å­ç½‘ IP èƒ½æä¾›ç»™è…¾è®¯äº‘ CKafka ä¾§ã€‚</p>
</li>
</ol>
<p>å®¢æˆ·ä¾¿æ— éœ€ä¿®æ”¹ä»»ä½•å®¢æˆ·ç«¯é…ç½®æˆ–é‡å¯åº”ç”¨ï¼ŒçœŸæ­£å®ç°ä»£ç é›¶æ”¹åŠ¨çš„é€æ˜è¿ç§»ï¼Œè¿›ä¸€æ­¥é™ä½ç”¨æˆ·çš„æ“ä½œæˆæœ¬ä¸è¿ç§»é£é™©ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4080e60a1584bba869cc8944a52091b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5Lit6Ze05Lu2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765963816&amp;x-signature=56acON0lOgV3N0VMUVuNm8zBZdo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-15"><strong>è…¾è®¯äº‘ CKafka è”é‚¦è¿ç§»å®¢æˆ·ä»·å€¼</strong></h2>
<p>é€šè¿‡è”é‚¦é›†ç¾¤è¿ç§»æ–¹æ¡ˆï¼Œå®¢æˆ·èƒ½å¤Ÿä»¥æ›´å¹³æ»‘ã€æ›´ä½æˆæœ¬ã€æ›´ä½é£é™©çš„æ–¹å¼å®ç°è‡ªå»º Kafka é›†ç¾¤ä¸Šäº‘ï¼ŒçœŸæ­£åšåˆ°"ä¸šåŠ¡æ— æ„ŸçŸ¥"çš„å¹³æ»‘è¿ç§»ã€‚</p>
<p><strong>æˆæœ¬æ•ˆç›Šä¼˜åŒ–</strong></p>
<ol>
<li>
<p>æ˜¾è‘—é™ä½è¿ç§»å¤æ‚åº¦ä¸æˆæœ¬ï¼Œæ— éœ€æ¢³ç†å¤æ‚çš„ä¸šåŠ¡ä¸Šä¸‹æ¸¸ä¾èµ–å…³ç³»ï¼Œé™ä½äººåŠ›æˆæœ¬ã€‚</p>
</li>
<li>
<p>é¿å…ä¸šåŠ¡é‡æ„æˆæœ¬ï¼Œä¸šåŠ¡é€»è¾‘é›¶æ”¹åŠ¨ã€‚</p>
</li>
<li>
<p>é¿å…å› è¿ç§»äº§ç”Ÿçš„é¢å¤–æŠ€æœ¯æ”¹é€ æˆæœ¬ï¼Œå…¼å®¹äº‹åŠ¡ã€å¹‚ç­‰ç­‰é«˜é˜¶ç‰¹æ€§ï¼Œå…³é”®ä¸šåŠ¡åŠŸèƒ½ä¸å—å½±å“ï¼Œé¿å…åŠŸèƒ½é‡æ–°å¼€å‘ã€‚</p>
</li>
</ol>
<p><strong>é£é™©æ§åˆ¶</strong></p>
<ol>
<li>
<p>é™ä½è¿ç§»å†³ç­–é£é™©ä¸æˆæœ¬ï¼Œå…¼é¡¾æ¶ˆæ¯é¡ºåºä¸æ•°æ®ä¸€è‡´æ€§ï¼Œå®ç°çœŸæ­£çš„æ— æŸåˆ‡æ¢ã€‚</p>
</li>
<li>
<p>æ”¯æŒæ›´å®‰å…¨çš„å›æ»šæœºåˆ¶ï¼Œå›æ»šæ—¶ä¸ä¼šä¸¢å¤±ä¸šåŠ¡æ•°æ®ã€‚</p>
</li>
<li>
<p>æ”¯æŒç°åº¦ç­–ç•¥ï¼Œå¯æ¸è¿›å¼å®Œæˆæµé‡åˆ‡æ¢ã€‚</p>
</li>
</ol>
<p><strong>ä¸šåŠ¡è¿ç»­æ€§ä¿éšœ</strong></p>
<ol>
<li>
<p>å½“å‰ç‰ˆæœ¬çš„è”é‚¦è¿ç§»æ–¹æ¡ˆï¼Œè¿ç§»è¿‡ç¨‹ä¸­å¯æ­£å¸¸ç”Ÿäº§æ¶ˆè´¹ï¼Œæ•°æ®å±‚é¢æ— ä¸­æ–­ï¼Œè¿æ¥å±‚é¢ä»…å­˜åœ¨çŸ­æš‚è¿æ¥åˆ‡æ¢ã€‚</p>
</li>
<li>
<p>è§„åˆ’ä¸­çš„æ¥å…¥ç‚¹ IP å¤ç”¨èƒ½åŠ›ï¼Œå¯è®©è¿æ¥å±‚é¢é›¶æ„ŸçŸ¥ï¼ŒçœŸæ­£å®ç°ä»£ç é›¶æ”¹åŠ¨çš„é€æ˜è¿ç§»ã€‚</p>
</li>
</ol>
<h2 data-id="heading-16"><strong>æ€»ç»“</strong></h2>
<p>åœ¨æ—¥å¸¸å®¢æˆ·äº¤æµä¸­ï¼Œæˆ‘ä»¬æ·±åˆ‡æ„Ÿå—åˆ°å®¢æˆ·å¯¹ Kafka ä¸Šäº‘çš„ä»·å€¼æ™®éè®¤åŒï¼Œç„¶è€Œï¼Œå¦‚ä½•å®ç°å¹³æ»‘æ— æ„Ÿçš„è¿ç§»æˆä¸ºä¸Šäº‘è¿‡ç¨‹ä¸­çš„ä¸»è¦æŒ‘æˆ˜ã€‚</p>
<p>ç›®å‰ï¼Œè…¾è®¯äº‘ CKafka é¦–å‘çš„é›†ç¾¤è”é‚¦è¿ç§»æ–¹æ¡ˆå·²è¿›å…¥ç°åº¦é˜¶æ®µï¼Œå·²å®Œæˆå¤šä¸ªå¤§å‹å®¢æˆ·ä¸Šäº‘åœºæ™¯çš„æ”¯æŒã€‚å¯¹äºä¸Šä¸‹æ¸¸ä¾èµ–é“¾è·¯å¤æ‚ã€æ•°æ®ä¸€è‡´æ€§ã€ä¸šåŠ¡è¿ç»­æ€§è¦æ±‚æœ‰æé«˜è¦æ±‚çš„å®¢æˆ·ï¼Œå¯ä»¥è”ç³»è…¾è®¯äº‘ CKafka å›¢é˜Ÿï¼Œæˆ‘ä»¬å°†é€šè¿‡é›†ç¾¤è”é‚¦çš„æ–¹å¼ä¸ºæ‚¨æä¾› Kafka é›†ç¾¤æ— æ„Ÿæ— æŸä¸Šäº‘æ”¯æŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Anthropic æ”¶è´­ Bunï¼šå½“ AI å·¨å¤´å†³å®šæŒæ§åº•å±‚ä»£ç åŸºå»º]]></title>    <link>https://juejin.cn/post/7581888578538373158</link>    <guid>https://juejin.cn/post/7581888578538373158</guid>    <pubDate>2025-12-10T09:40:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581888578538373158" data-draft-id="7582048028392161330" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Anthropic æ”¶è´­ Bunï¼šå½“ AI å·¨å¤´å†³å®šæŒæ§åº•å±‚ä»£ç åŸºå»º"/> <meta itemprop="keywords" content="Bun,Claude"/> <meta itemprop="datePublished" content="2025-12-10T09:40:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨"/> <meta itemprop="url" content="https://juejin.cn/user/64217584778579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Anthropic æ”¶è´­ Bunï¼šå½“ AI å·¨å¤´å†³å®šæŒæ§åº•å±‚ä»£ç åŸºå»º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/64217584778579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:40:24.000Z" title="Wed Dec 10 2025 09:40:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç¡…è°·çš„ AI ç«èµ›å·²ç»è¿›å…¥ next level äº†ï¼ŒåŸæœ¬å·æ¨¡å‹å‚æ•°ï¼Œç°åœ¨å¼€å§‹å·åº”ç”¨ç”Ÿæ€å’Œåº•å±‚åŸºå»ºã€‚</p>
<p>å½“åœ°æ—¶é—´ 12 æœˆ 2 æ—¥ï¼ŒAnthropic å®£å¸ƒæ”¶è´­çƒ­é—¨ JavaScript è¿è¡Œæ—¶å·¥å…· Bunã€‚è¿™å¹¶éä¸€æ¬¡ç®€å•çš„äººæ‰æ”¶è´­ï¼ˆAcqui-hireï¼‰ï¼Œè€Œæ˜¯ä¸€åœºç»è¿‡æ·±æ€ç†Ÿè™‘çš„æˆ˜ç•¥å¸ƒå±€ã€‚å¯¹äºåˆšåˆšå®£å¸ƒ Claude Code å¹´åŒ–è¥æ”¶çªç ´ 10 äº¿ç¾å…ƒçš„ Anthropic è€Œè¨€ï¼Œæ‹¿ä¸‹ Bunï¼Œä»–ä»¬ä¸å†æ»¡è¶³äºä»…ä»…æä¾› AI æ¨¡å‹ï¼Œè€Œæ˜¯è¦å°† AI ç¼–ç¨‹çš„åº•å±‚å‘åŠ¨æœºæ¡åœ¨è‡ªå·±æ‰‹ä¸­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f49a545dba0469fadcd95e83a13ba30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964424&amp;x-signature=WuTevKF%2FHZlE8H0JKR6yY5qdECk%3D" alt="" loading="lazy"/></p>
<p>è¿™åœºæ”¶è´­ä¸ä»…å…³ä¹ä¸¤å®¶å…¬å¸çš„å‘½è¿ï¼Œæ›´é¢„ç¤ºç€åœ¨ AI ç¼–ç¨‹æ—¶ä»£ï¼Œå¼€å‘å·¥å…·é“¾å°†å‘ç”Ÿæœ¬è´¨æ€§çš„å˜åŒ–ã€‚</p>
<h3 data-id="heading-0">ä¸ºä»€ä¹ˆæ˜¯ Bunï¼Ÿ</h3>
<p>åœ¨å¤–ç•Œçœ‹æ¥ï¼ŒBun æ˜¯ä¸€ä¸ªä»¥å¿«è‘—ç§°çš„ Node.js æ›¿ä»£å“ï¼›ä½†åœ¨ Anthropic çœ¼ä¸­ï¼ŒBun æ˜¯ AI Agentæœ€ä½³çš„è½½ä½“ã€‚</p>
<p>Claude Codeã€FactoryAIã€OpenCode ç­‰æ–°ä¸€ä»£ AI ç¼–ç¨‹å·¥å…·ï¼Œå…¶æ ¸å¿ƒè¿è¡Œé€»è¾‘ä¸ä¼ ç»Ÿçš„ Web å¼€å‘æˆªç„¶ä¸åŒã€‚ä¼ ç»Ÿçš„ Web å¼€å‘ä¾èµ–æœåŠ¡å™¨ç¯å¢ƒï¼Œè€Œ AI ç¼–ç¨‹å·¥å…·å¾€å¾€éœ€è¦ä»¥ CLI çš„å½¢å¼åˆ†å‘åˆ°ç”¨æˆ·çš„æœ¬åœ°ç¯å¢ƒä¸­è¿è¡Œã€‚</p>
<p>é‚£é—®é¢˜å°±æ¥äº†ã€‚å¦‚æœç”¨ Node.js ç¼–å†™å·¥å…·ï¼Œç”¨æˆ·å¿…é¡»å…ˆå®‰è£… <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com%2Fnodejs" target="_blank" title="https://www.servbay.com/nodejs" ref="nofollow noopener noreferrer">Node ç¯å¢ƒ</a>ï¼Œä¸”é¢ä¸´ä¾èµ–ç®¡ç†çš„æ··ä¹±ã€‚</p>
<p>Bun å®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å®ƒæ”¯æŒå°† JavaScript é¡¹ç›®ç¼–è¯‘æˆå•æ–‡ä»¶å¯æ‰§è¡Œç¨‹åºï¼ˆSingle-file Executablesï¼‰ã€‚é‚£å¼€å‘è€…å¯ä»¥æŠŠä¸€ä¸ªå¤æ‚çš„ AI æ™ºèƒ½ä½“æ‰“åŒ…æˆä¸€ä¸ªç‹¬ç«‹çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç”¨æˆ·æ— éœ€å®‰è£…ä»»ä½•ç¯å¢ƒå³å¯ç›´æ¥è¿è¡Œã€‚åŠ ä¸Š Bun åŸç”Ÿæ”¯æŒ TypeScript ä¸”å¯åŠ¨é€Ÿåº¦æå¿«ï¼Œå®ƒå¤©ç„¶å¥‘åˆäº† AI æ™ºèƒ½ä½“éšå¤„è¿è¡Œã€å¿«é€Ÿå“åº”çš„éœ€æ±‚ã€‚</p>
<p>å®é™…ä¸Šï¼ŒClaude Code çš„åº•å±‚æ­£æ˜¯ç”± Bun æ„å»ºã€‚åœ¨è¿‡å»å‡ ä¸ªæœˆä¸­ï¼ŒBun å›¢é˜Ÿä¸ Anthropic ä¿æŒäº†ç´§å¯†åˆä½œï¼Œç”šè‡³ Bun ä»£ç åº“ä¸­è´¡çŒ®ä»£ç æœ€å¤šçš„ç”¨æˆ·ä¹‹ä¸€ï¼Œå°±æ˜¯ Claude Code çš„è‡ªåŠ¨ä¿®å¤æœºå™¨äººã€‚è¿™ç§æ·±åº¦çš„æŠ€æœ¯ä¾èµ–ï¼Œè®©æ”¶è´­å˜å¾—é¡ºç†æˆç« â€”â€”Anthropic ä¸å¸Œæœ›è‡ªå·±æ ¸å¿ƒäº§å“çš„åœ°åŸºæŒæ¡åœ¨ä¸€å®¶ä¸ç¡®å®šçš„åˆåˆ›å…¬å¸æ‰‹ä¸­ã€‚</p>
<h3 data-id="heading-1">å‘Šåˆ«äº‘æ‰˜ç®¡ç„¦è™‘ï¼Œå›å½’æŠ€æœ¯æœ¬æº</h3>
<p>å¯¹äº Bun çš„åˆ›å§‹äºº Jarred Sumner åŠå…¶å›¢é˜Ÿæ¥è¯´ï¼ŒåŠ å…¥ Anthropic æˆ–è®¸æ˜¯æœ€å¥½çš„å½’å®¿ã€‚</p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒBunæ˜¯å¼€æºå·¥å…·ï¼Œæ‰€ä»¥å…¶å•†ä¸šåŒ–å§‹ç»ˆæ˜¯ä¸€ä¸ªéš¾é¢˜ã€‚æŒ‰ç…§ä¼ ç»Ÿçš„å‰§æœ¬ï¼ŒBun æœ€ç»ˆä¸å¾—ä¸èµ°ä¸Š Deno æˆ– Vercel çš„è€è·¯ï¼Œé‚£å°±æ˜¯é€šè¿‡å”®å–äº‘æ‰˜ç®¡æœåŠ¡æ¥å˜ç°ã€‚</p>
<p>Jarred æ•é”åœ°æ„è¯†åˆ°ï¼Œè¿™æ¡è·¯å·²ç»è¿‡æ—¶äº†ã€‚ä»–åœ¨é‡‡è®¿ä¸­å¦è¨€ï¼Œå½“ AI ç¼–ç¨‹å·¥å…·æ­£åœ¨é‡å¡‘è½¯ä»¶ç”Ÿäº§æ–¹å¼æ—¶ï¼Œå¼ºè¿«è‡ªå·±å»é€šè¿‡äº‘æ‰˜ç®¡å˜ç°æ„Ÿè§‰æ˜¯â€œä¸å¯¹çš„â€ã€‚</p>
<p>åŠ å…¥ Anthropic è§£å†³äº† Bun æœ€å¤§çš„åé¡¾ä¹‹å¿§ï¼Œé‚£å°±æ˜¯ç”Ÿå­˜ã€‚Bun ä¸å†éœ€è¦ä¸ºäº†å–æ‚¦æŠ•èµ„äººè€Œä»å¼€æºé¡¹ç›®ä¸­æ¦¨å–åˆ©æ¶¦ï¼Œä¹Ÿä¸å¿…ä¸ºäº†å•†ä¸šåŒ–è€Œå¼ºè¡Œæ†ç»‘äº‘æœåŠ¡ã€‚Anthropic æ‹¥æœ‰å……è¶³çš„èµ„é‡‘ï¼Œä»–ä»¬éœ€è¦çš„åªæ˜¯ Bun å˜å¾—æ›´å¿«ã€æ›´ç¨³ã€æ›´å¥½ç”¨ã€‚</p>
<p>è¿™ä¸ä»…è®© Bun è·å¾—äº†é•¿æœŸçš„ç¨³å®šæ€§ï¼Œä¹Ÿè®© JavaScript ç¤¾åŒºåƒä¸‹äº†ä¸€é¢—å®šå¿ƒä¸¸ï¼ŒBun å°†ç»§ç»­ä¿æŒå¼€æºï¼Œç»´æŒ MIT åè®®ï¼Œå¹¶æ‹¥æœ‰æ›´å¤šçš„èµ„æºæ¥æŒ‘æˆ˜ Node.js çš„åœ°ä½ã€‚</p>
<h3 data-id="heading-2">AI ç¼–ç¨‹æ—¶ä»£çš„å‚ç›´æ•´åˆ</h3>
<p>è¿™æ¬¡æ”¶è´­é‡Šæ”¾äº†ä¸€ä¸ªæ˜ç¡®çš„ä¿¡å·ï¼Œæœªæ¥çš„è½¯ä»¶å·¥ç¨‹ï¼Œä»£ç å°†ä¸»è¦ç”± AI ç¼–å†™ã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚</p>
<p>åœ¨äººç±»ä¸»å¯¼ç¼–ç¨‹çš„æ—¶ä»£ï¼Œæˆ‘ä»¬å®¹å¿å¤æ‚çš„é…ç½®å’Œç¼“æ…¢çš„æ„å»ºé€Ÿåº¦ã€‚ä½†åœ¨ AI ä¸»å¯¼çš„æ—¶ä»£ï¼Œä»£ç ç”Ÿæˆçš„æ•°é‡å’Œé€Ÿåº¦å°†å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚å½“ Agent åœ¨å‡ ç§’é’Ÿå†…ç”Ÿæˆå¹¶æµ‹è¯•æ•°åƒè¡Œä»£ç æ—¶ï¼Œåº•å±‚çš„è¿è¡Œæ—¶ç¯å¢ƒå¿…é¡»å…·å¤‡æé«˜çš„ååé‡å’Œæä½çš„å»¶è¿Ÿã€‚</p>
<p>Anthropic æ”¶è´­ Bunï¼Œå®åˆ™æ˜¯ä¸ºäº†æ‰“é€ ä¸€ä¸ªå‚ç›´æ•´åˆçš„ AI ç¼–ç¨‹æ ˆï¼š</p>
<ul>
<li>
<p><strong>é¡¶å±‚ï¼š</strong> Claude æ¨¡å‹æä¾›æ™ºåŠ›æ”¯æŒã€‚</p>
</li>
<li>
<p><strong>åº”ç”¨å±‚ï¼š</strong> Claude Code æä¾›äº¤äº’ç•Œé¢ã€‚</p>
</li>
<li>
<p><strong>åº•å±‚ï¼š</strong> Bun æä¾›é«˜æ•ˆçš„æ‰§è¡Œç¯å¢ƒå’Œåˆ†å‘æœºåˆ¶ã€‚</p>
</li>
</ul>
<p>è¿™ç§æ•´åˆå°†äº§ç”Ÿå·¨å¤§çš„ååŒæ•ˆåº”ã€‚Claude Code å›¢é˜Ÿå¯ä»¥æ›´æ—©åœ°æ´å¯Ÿ AI ç¼–ç¨‹å¯¹åŸºç¡€è®¾æ–½çš„éœ€æ±‚ï¼Œç›´æ¥åå“º Bun çš„å¼€å‘ï¼›è€Œ Bun çš„æ€§èƒ½æå‡ï¼Œåˆå°†ç›´æ¥è½¬åŒ–ä¸º Claude Code çš„ç”¨æˆ·ä½“éªŒä¼˜åŠ¿ã€‚</p>
<h3 data-id="heading-3">ç»“è¯­ï¼šæ›´ä½çš„é—¨æ§›ï¼Œæ›´å¿«çš„æœªæ¥</h3>
<p>æœ‰è¯„è®ºè®¤ä¸ºï¼Œéšç€ AI æ™ºèƒ½ä½“çš„çˆ†å‘ï¼ŒJavaScriptï¼ˆåŠå…¶è¶…é›† TypeScriptï¼‰æ­£åœ¨æˆä¸ºæœ€é€‚åˆæ™ºèƒ½ä½“çš„è¯­è¨€ã€‚å®ƒæ‹¥æœ‰ V8 å’Œ JavaScriptCore è¿™æ ·æˆç†Ÿä¸”é«˜æ€§èƒ½çš„æ²™ç®±å¼•æ“ï¼Œèƒ½åœ¨ä»»ä½•è®¾å¤‡ä¸Šå®‰å…¨è¿è¡Œã€‚</p>
<p>Anthropic å¯¹ Bun çš„æŠ¼æ³¨ï¼ŒæŸç§ç¨‹åº¦ä¸Šä¹Ÿæ˜¯å¯¹ JavaScript ç”Ÿæ€æœªæ¥çš„æŠ¼æ³¨ã€‚å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œæœªæ¥çš„å›¾æ™¯æ­£åœ¨å˜å¾—æ¸…æ™°ï¼šæˆ‘ä»¬å¯èƒ½ä¸å†éœ€è¦å…³æ³¨ç¹ççš„ Webpack é…ç½®æˆ– Node ç‰ˆæœ¬ç®¡ç†ï¼ŒAI å°†é€šè¿‡åŸºäº Bun çš„é«˜æ•ˆå·¥å…·é“¾ï¼Œå¸®æˆ‘ä»¬å¤„ç†æ‰æ‰€æœ‰è„æ´»ç´¯æ´»ã€‚</p>
<p>è¿™ç§â€œå»é…ç½®åŒ–ã€é«˜æ•ˆç‡â€çš„è¶‹åŠ¿ï¼Œåœ¨å½“ä¸‹çš„å¼€å‘å·¥å…·ä¸­å·²åˆè§ç«¯å€ªã€‚å¯¹äºç°åœ¨å°±æƒ³ä½“éªŒ Bun æè‡´æ€§èƒ½ï¼Œä½†åˆä¸æƒ³é™·å…¥ç¹çç¯å¢ƒé…ç½®çš„å¼€å‘è€…æ¥è¯´ï¼Œå·¥å…·é“¾çš„è¿›åŒ–å¸¦æ¥äº†æå¤§çš„ä¾¿åˆ©ã€‚</p>
<p>ä¾‹å¦‚ <strong>ServBay</strong> è¿™æ ·çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com" target="_blank" title="https://www.servbay.com" ref="nofollow noopener noreferrer">æœ¬åœ°å¼€å‘ç¯å¢ƒç®¡ç†</a>å·¥å…·ï¼Œå·²ç»æ”¯æŒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com%2Ffeatures" target="_blank" title="https://www.servbay.com/features" ref="nofollow noopener noreferrer">ä¸€é”®å®‰è£… Bun</a>ã€‚å®ƒå…å»äº†å¤æ‚çš„ç¯å¢ƒå˜é‡è®¾ç½®å’Œç‰ˆæœ¬å†²çªçƒ¦æ¼ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿè·³è¿‡æ¯ç‡¥çš„å‡†å¤‡å·¥ä½œï¼Œç›´æ¥è¿›å…¥é«˜æ€§èƒ½å¼€å‘çš„ä¸–ç•Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f1b878aeb72480ab746e73c28bd3408~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964424&amp;x-signature=5mZFw9Z4GHwGqSKRDlMIUOBDOMY%3D" alt="" loading="lazy"/></p>
<p>æ— è®ºæ˜¯ Anthropic æ”¶è´­ Bunï¼Œè¿˜æ˜¯ ServBay è¿™æ ·å·¥å…·çš„å‡ºç°ï¼Œéƒ½åœ¨æŒ‡å‘åŒä¸€ä¸ªæ–¹å‘ï¼Œè®©æŠ€æœ¯å›å½’æœåŠ¡äºåˆ›é€ ï¼Œè®©åŸºç¡€è®¾æ–½å˜å¾—éšå½¢ä¸”å¼ºå¤§ã€‚Bun çš„æ•…äº‹æ²¡æœ‰ç»“æŸï¼Œå®ƒåªæ˜¯æ¢äº†ä¸€ä¸ªæ›´å¹¿é˜”çš„èˆå°ã€‚æ­£å¦‚ Jarred æ‰€è¯´ï¼Œè¿™è®©ä»–èƒ½å¤Ÿäº²çœ¼è§è¯å¹¶å‚ä¸å¡‘é€  AI ç¼–ç¨‹çš„æœªæ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js æ ¸å¿ƒæ¦‚å¿µ]]></title>    <link>https://juejin.cn/post/7581876069608964139</link>    <guid>https://juejin.cn/post/7581876069608964139</guid>    <pubDate>2025-12-10T09:36:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581876069608964139" data-draft-id="7581858890607968292" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Node.js æ ¸å¿ƒæ¦‚å¿µ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T09:36:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢¨å­åŒå¿—"/> <meta itemprop="url" content="https://juejin.cn/user/2084329779627965"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Node.js æ ¸å¿ƒæ¦‚å¿µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2084329779627965/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢¨å­åŒå¿—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:36:30.000Z" title="Wed Dec 10 2025 09:36:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Node.js ç®€ä»‹</h2>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯ Node.jsï¼Ÿ</h3>
<p><strong>Node.js</strong> æ˜¯ä¸€ä¸ªå…è´¹ã€å¼€æºçš„è·¨å¹³å° JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨æµè§ˆå™¨ä¹‹å¤–è¿è¡Œ JavaScript ä»£ç ã€‚</p>
<h4 data-id="heading-2">é€šä¿—ç†è§£</h4>
<p>æƒ³è±¡ä¸€ä¸‹ï¼š</p>
<ul>
<li><strong>æµè§ˆå™¨ä¸­çš„ JavaScript</strong>ï¼šåªèƒ½åœ¨ç½‘é¡µä¸­è¿è¡Œï¼Œå—æµè§ˆå™¨é™åˆ¶</li>
<li><strong>Node.js</strong>ï¼šè®© JavaScript å¯ä»¥åœ¨æœåŠ¡å™¨ã€å‘½ä»¤è¡Œã€æ¡Œé¢åº”ç”¨ç­‰ä»»ä½•åœ°æ–¹è¿è¡Œ</li>
</ul>
<p><strong>Node.js çš„æœ¬è´¨</strong>ï¼š</p>
<ul>
<li>âŒ <strong>ä¸æ˜¯</strong>ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼ˆJavaScript æ‰æ˜¯è¯­è¨€ï¼‰</li>
<li>âŒ <strong>ä¸æ˜¯</strong>ä¸€ä¸ªæ¡†æ¶æˆ–åº“ï¼ˆExpressã€Koa æ‰æ˜¯æ¡†æ¶ï¼‰</li>
<li>âœ… <strong>æ˜¯</strong>ä¸€ä¸ªè¿è¡Œæ—¶ï¼ˆRuntimeï¼‰ç¯å¢ƒï¼Œå°±åƒæµè§ˆå™¨æ˜¯ JavaScript åœ¨ç½‘é¡µä¸­çš„è¿è¡Œç¯å¢ƒä¸€æ ·</li>
</ul>
<h4 data-id="heading-3">æŠ€æœ¯å®šä¹‰</h4>
<p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œæ—¶ï¼Œå®ƒä½¿ç”¨äº‹ä»¶é©±åŠ¨ã€éé˜»å¡ I/O æ¨¡å‹ï¼Œä½¿å…¶è½»é‡ä¸”é«˜æ•ˆã€‚</p>
<h3 data-id="heading-4">1.2 æ ¸å¿ƒç‰¹ç‚¹</h3>
<h4 data-id="heading-5">1.2.1 äº‹ä»¶é©±åŠ¨ï¼ˆEvent-drivenï¼‰</h4>
<p><strong>é€šä¿—ç†è§£</strong>ï¼šå°±åƒé¤å…çš„æœåŠ¡æ¨¡å¼</p>
<ul>
<li>ä¼ ç»Ÿæ–¹å¼ï¼šä¸€ä¸ªæœåŠ¡å‘˜æœåŠ¡ä¸€æ¡Œå®¢äººï¼Œå¿…é¡»ç­‰è¿™æ¡Œå®¢äººåƒå®Œæ‰èƒ½æœåŠ¡ä¸‹ä¸€æ¡Œ</li>
<li>äº‹ä»¶é©±åŠ¨ï¼šä¸€ä¸ªæœåŠ¡å‘˜å¯ä»¥åŒæ—¶æœåŠ¡å¤šæ¡Œï¼Œå“ªæ¡Œéœ€è¦æœåŠ¡å°±å»å“ªæ¡Œ</li>
</ul>
<p><strong>æŠ€æœ¯è¯´æ˜</strong>ï¼šé‡‡ç”¨äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œç¨‹åºçš„æ‰§è¡Œæµç¨‹ç”±äº‹ä»¶çš„å‘ç”Ÿæ¥å†³å®šï¼Œèƒ½å¤Ÿé«˜æ•ˆå¤„ç†å¹¶å‘æ“ä½œã€‚</p>
<h4 data-id="heading-6">1.2.2 éé˜»å¡ï¼ˆNon-blockingï¼‰</h4>
<p><strong>é€šä¿—ç†è§£</strong>ï¼šå°±åƒå¤šä»»åŠ¡å¤„ç†</p>
<ul>
<li>é˜»å¡æ–¹å¼ï¼šåšä¸€ä»¶äº‹æ—¶å¿…é¡»ç­‰å®ƒå®Œæˆæ‰èƒ½åšä¸‹ä¸€ä»¶äº‹</li>
<li>éé˜»å¡æ–¹å¼ï¼šå¯ä»¥åŒæ—¶å¤„ç†å¤šä»¶äº‹ï¼Œä¸éœ€è¦ç­‰å¾…</li>
</ul>
<p><strong>æŠ€æœ¯è¯´æ˜</strong>ï¼šä½¿ç”¨éé˜»å¡ I/O æ¨¡å‹ï¼Œä¸ä¼šå› ä¸ºç­‰å¾…ä¸€ä¸ªæ“ä½œå®Œæˆè€Œé˜»å¡å…¶ä»–æ“ä½œã€‚</p>
<h4 data-id="heading-7">1.2.3 é«˜æ€§èƒ½</h4>
<p><strong>é€šä¿—ç†è§£</strong>ï¼šèƒ½å¤ŸåŒæ—¶å¤„ç†å¤§é‡è¿æ¥ï¼Œå°±åƒä¸€å®¶é«˜æ•ˆçš„é¤å…ï¼Œä¸€ä¸ªæœåŠ¡å‘˜å¯ä»¥åŒæ—¶æœåŠ¡å¾ˆå¤šæ¡Œå®¢äººã€‚</p>
<p><strong>æŠ€æœ¯è¯´æ˜</strong>ï¼šéå¸¸é€‚åˆæ„å»ºå®æ—¶åº”ç”¨å’Œé«˜æµé‡ç½‘ç«™ã€‚</p>
<h3 data-id="heading-8">1.3 åº”ç”¨åœºæ™¯</h3>
<p>Node.js å¯ä»¥ç”¨äºæ„å»ºå„ç§ç±»å‹çš„åº”ç”¨ï¼š</p>
<h4 data-id="heading-9">Web å¼€å‘</h4>
<ul>
<li><strong>Web æœåŠ¡å™¨å’Œç½‘ç«™</strong>ï¼šæ„å»ºé«˜æ€§èƒ½çš„ HTTP æœåŠ¡å™¨</li>
<li><strong>REST API</strong>ï¼šå¼€å‘åç«¯ API æœåŠ¡</li>
<li><strong>å®æ—¶åº”ç”¨</strong>ï¼šèŠå¤©åº”ç”¨ã€åœ¨çº¿æ¸¸æˆæœåŠ¡å™¨ã€åä½œå·¥å…·</li>
</ul>
<h4 data-id="heading-10">å·¥å…·å¼€å‘</h4>
<ul>
<li><strong>å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰</strong>ï¼šå¼€å‘å„ç§å¼€å‘å·¥å…·å’Œè„šæœ¬ï¼ˆå¦‚ npmã€webpackï¼‰</li>
<li><strong>æ„å»ºå·¥å…·</strong>ï¼šå‰ç«¯æ„å»ºå·¥å…·ã€æ‰“åŒ…å·¥å…·</li>
</ul>
<h4 data-id="heading-11">ç³»ç»Ÿåº”ç”¨</h4>
<ul>
<li><strong>æ–‡ä»¶æ“ä½œå’Œæ•°æ®åº“æ“ä½œ</strong>ï¼šå¤„ç†æ–‡ä»¶ç³»ç»Ÿå’Œæ•°æ®åº“äº¤äº’</li>
<li><strong>IoT å’Œç¡¬ä»¶æ§åˆ¶</strong>ï¼šç‰©è”ç½‘åº”ç”¨å¼€å‘</li>
<li><strong>æ¡Œé¢åº”ç”¨</strong>ï¼šä½¿ç”¨ Electron æ¡†æ¶å¼€å‘æ¡Œé¢åº”ç”¨ï¼ˆå¦‚ VS Codeï¼‰</li>
</ul>
<h3 data-id="heading-12">1.4 å¦‚ä½•è¿è¡Œ Node.js ä»£ç </h3>
<h4 data-id="heading-13">åŸºæœ¬è¿è¡Œæ–¹å¼</h4>
<p>å°†ä»£ç ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼ˆä¾‹å¦‚ <code>app.js</code>ï¼‰ï¼Œç„¶ååœ¨ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦ä¸­è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node app.js
</code></pre>
<h4 data-id="heading-14">ç¬¬ä¸€ä¸ª Node.js ç¨‹åº</h4>
<p><strong>ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªç®€å•çš„ Web æœåŠ¡å™¨</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);

<span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, {<span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/plain'</span>});
  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">'Hello World!'</span>);
});

server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:8080'</span>);
});
</code></pre>
<p>è¿è¡Œåï¼Œè®¿é—® <code>http://localhost:8080</code> å³å¯çœ‹åˆ° "Hello World!"ã€‚</p>
<h4 data-id="heading-15">REPL äº¤äº’æ¨¡å¼</h4>
<p>Node.js è¿˜æä¾›äº†äº¤äº’å¼ç¯å¢ƒï¼ˆREPL - Read-Eval-Print Loopï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node
&gt; console.log(<span class="hljs-string">'Hello Node.js'</span>)
Hello Node.js
undefined
&gt; 1 + 1
2
</code></pre>
<h4 data-id="heading-16">æ£€æŸ¥ Node.js ç‰ˆæœ¬</h4>
<pre><code class="hljs language-bash" lang="bash">node --version
<span class="hljs-comment"># æˆ–</span>
node -v
</code></pre>
<hr/>
<h2 data-id="heading-17">äºŒã€V8 å¼•æ“</h2>
<h3 data-id="heading-18">2.1 ä»€ä¹ˆæ˜¯ V8 å¼•æ“ï¼Ÿ</h3>
<p><strong>V8 å¼•æ“</strong>å°±åƒæ˜¯ JavaScript ä»£ç çš„"ç¿»è¯‘å®˜"å’Œ"æ‰§è¡Œå™¨"ã€‚æƒ³è±¡ä¸€ä¸‹ï¼š</p>
<ul>
<li><strong>JavaScript ä»£ç </strong>ï¼šä½ å†™çš„ä»£ç æ˜¯äººç±»å¯è¯»çš„æ–‡æœ¬</li>
<li><strong>è®¡ç®—æœº</strong>ï¼šåªèƒ½ç†è§£ 0 å’Œ 1 çš„æœºå™¨ç </li>
<li><strong>V8 å¼•æ“</strong>ï¼šä¸­é—´çš„ç¿»è¯‘å®˜ï¼ŒæŠŠ JavaScript ä»£ç è½¬æ¢æˆè®¡ç®—æœºèƒ½ç†è§£çš„æœºå™¨ç </li>
</ul>
<p><strong>V8</strong> æ˜¯ç”± Google å¼€å‘çš„é«˜æ€§èƒ½ JavaScript å¼•æ“ï¼Œæœ€åˆç”¨äº Chrome æµè§ˆå™¨ã€‚Node.js çš„æ ¸å¿ƒä¾èµ–äº V8 å¼•æ“æ¥æ‰§è¡Œ JavaScript ä»£ç ã€‚</p>
<h3 data-id="heading-19">2.2 ä¸ºä»€ä¹ˆéœ€è¦ V8 å¼•æ“ï¼Ÿ</h3>
<h4 data-id="heading-20">2.2.1 è®¡ç®—æœºä¸èƒ½ç›´æ¥ç†è§£ JavaScript</h4>
<p>è®¡ç®—æœºçš„ CPU åªèƒ½æ‰§è¡Œæœºå™¨ç ï¼ˆç”± 0 å’Œ 1 ç»„æˆçš„äºŒè¿›åˆ¶ä»£ç ï¼‰ï¼Œè€Œ JavaScript æ˜¯äººç±»å¯è¯»çš„é«˜çº§è¯­è¨€ã€‚å› æ­¤éœ€è¦ä¸€ä¸ª"ç¿»è¯‘å™¨"æ¥è½¬æ¢ï¼š</p>
<pre><code class="hljs">JavaScript ä»£ç  â†’ V8 å¼•æ“ â†’ æœºå™¨ç  â†’ CPU æ‰§è¡Œ
</code></pre>
<h4 data-id="heading-21">2.2.2 ä¸¤ç§æ‰§è¡Œæ–¹å¼çš„å¯¹æ¯”</h4>
<p><strong>æ–¹å¼ä¸€ï¼šè§£é‡Šæ‰§è¡Œï¼ˆæ…¢ï¼‰</strong></p>
<pre><code class="hljs">JavaScript ä»£ç  â†’ é€è¡Œè§£é‡Š â†’ æ‰§è¡Œ
</code></pre>
<ul>
<li>å°±åƒåŒå£°ä¼ è¯‘ï¼Œè¯´ä¸€å¥ç¿»è¯‘ä¸€å¥</li>
<li>æ¯æ¬¡è¿è¡Œéƒ½è¦é‡æ–°ç¿»è¯‘</li>
<li>é€Ÿåº¦è¾ƒæ…¢</li>
</ul>
<p><strong>æ–¹å¼äºŒï¼šç¼–è¯‘æ‰§è¡Œï¼ˆå¿«ï¼‰</strong></p>
<pre><code class="hljs">JavaScript ä»£ç  â†’ ç¼–è¯‘æˆæœºå™¨ç  â†’ ç›´æ¥æ‰§è¡Œ
</code></pre>
<ul>
<li>å°±åƒæå‰ç¿»è¯‘å¥½æ•´æœ¬ä¹¦ï¼Œç„¶åç›´æ¥é˜…è¯»</li>
<li>ç¼–è¯‘ä¸€æ¬¡ï¼Œå¯ä»¥å¤šæ¬¡å¿«é€Ÿæ‰§è¡Œ</li>
<li>é€Ÿåº¦æ›´å¿«</li>
</ul>
<p><strong>V8 å¼•æ“é‡‡ç”¨ç¼–è¯‘æ‰§è¡Œ</strong>ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Node.js èƒ½å¤Ÿå¿«é€Ÿè¿è¡Œ JavaScript ä»£ç çš„åŸå› ã€‚</p>
<h3 data-id="heading-22">2.3 V8 å¼•æ“çš„å·¥ä½œåŸç†</h3>
<h4 data-id="heading-23">ç¬¬ä¸€æ­¥ï¼šè§£æä»£ç </h4>
<pre><code class="hljs">ä½ çš„ JavaScript ä»£ç  â†’ V8 è§£æ â†’ æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰
</code></pre>
<p>å°±åƒæŠŠä¸€ç¯‡æ–‡ç« åˆ†è§£æˆå¥å­å’Œè¯è¯­ï¼Œç†è§£ä»£ç çš„ç»“æ„ã€‚</p>
<h4 data-id="heading-24">ç¬¬äºŒæ­¥ï¼šç¼–è¯‘ä¸ºæœºå™¨ç </h4>
<pre><code class="hljs">æŠ½è±¡è¯­æ³•æ ‘ â†’ V8 ç¼–è¯‘ â†’ æœºå™¨ç 
</code></pre>
<p>æŠŠç†è§£åçš„ä»£ç è½¬æ¢æˆè®¡ç®—æœºèƒ½ç›´æ¥æ‰§è¡Œçš„æœºå™¨ç ã€‚</p>
<h4 data-id="heading-25">ç¬¬ä¸‰æ­¥ï¼šå³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰ä¼˜åŒ–</h4>
<p>V8 ä½¿ç”¨ <strong>å³æ—¶ç¼–è¯‘ï¼ˆJust-In-Time, JITï¼‰</strong> æŠ€æœ¯ï¼š</p>
<ol>
<li><strong>é¦–æ¬¡æ‰§è¡Œ</strong>ï¼šå¿«é€Ÿç¼–è¯‘ï¼Œå…ˆè®©ä»£ç èƒ½è¿è¡Œèµ·æ¥</li>
<li><strong>è¿è¡Œç›‘æ§</strong>ï¼šè§‚å¯Ÿå“ªäº›ä»£ç æ‰§è¡Œé¢‘ç¹</li>
<li><strong>ä¼˜åŒ–ç¼–è¯‘</strong>ï¼šå¯¹çƒ­ç‚¹ä»£ç è¿›è¡Œæ·±åº¦ä¼˜åŒ–</li>
<li><strong>æ›¿æ¢æ‰§è¡Œ</strong>ï¼šç”¨ä¼˜åŒ–åçš„ä»£ç æ›¿æ¢åŸæ¥çš„ä»£ç </li>
</ol>
<p><strong>ç±»æ¯”</strong>ï¼šå°±åƒå­¦ä¹ ä¸€é—¨æ–°æŠ€èƒ½ï¼Œå…ˆå¿«é€Ÿä¸Šæ‰‹ï¼Œç„¶åé’ˆå¯¹å¸¸ç”¨éƒ¨åˆ†åå¤ç»ƒä¹ ä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-26">ç¬¬å››æ­¥ï¼šæ‰§è¡Œæœºå™¨ç </h4>
<p>ç¼–è¯‘å¥½çš„æœºå™¨ç ç›´æ¥åœ¨ CPU ä¸Šæ‰§è¡Œï¼Œé€Ÿåº¦æ¥è¿‘åŸç”Ÿä»£ç ã€‚</p>
<h3 data-id="heading-27">2.4 V8 å¼•æ“å¦‚ä½•è®© JavaScript å˜å¿«ï¼Ÿ</h3>
<h4 data-id="heading-28">2.4.1 ç¼–è¯‘ä¼˜åŒ–æŠ€æœ¯</h4>
<p>V8 ä½¿ç”¨å¤šç§ä¼˜åŒ–æŠ€æœ¯æå‡æ€§èƒ½ï¼š</p>
<ul>
<li><strong>å†…è”ç¼“å­˜ï¼ˆInline Cacheï¼‰</strong>ï¼šè®°ä½å¯¹è±¡çš„å±æ€§ä½ç½®ï¼Œä¸‹æ¬¡è®¿é—®æ›´å¿«</li>
<li><strong>éšè—ç±»ï¼ˆHidden Classesï¼‰</strong>ï¼šä¼˜åŒ–å¯¹è±¡å±æ€§çš„è®¿é—®é€Ÿåº¦</li>
<li><strong>åƒåœ¾å›æ”¶ä¼˜åŒ–</strong>ï¼šé«˜æ•ˆç®¡ç†å†…å­˜ï¼Œè‡ªåŠ¨æ¸…ç†ä¸ç”¨çš„å¯¹è±¡</li>
</ul>
<h4 data-id="heading-29">2.4.2 æ€§èƒ½å¯¹æ¯”ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿™æ®µä»£ç ä¼šè¢« V8 ä¼˜åŒ–</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼šç¼–è¯‘å¹¶æ‰§è¡Œï¼ˆç¨æ…¢ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)); <span class="hljs-comment">// 3</span>

<span class="hljs-comment">// åç»­è°ƒç”¨ï¼šä½¿ç”¨ä¼˜åŒ–åçš„æœºå™¨ç ï¼ˆå¾ˆå¿«ï¼‰</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000000</span>; i++) {
  <span class="hljs-title function_">add</span>(i, i + <span class="hljs-number">1</span>);
}
</code></pre>
<h3 data-id="heading-30">2.5 V8 åœ¨ Node.js ä¸­çš„ä½œç”¨</h3>
<p>V8 å¼•æ“åœ¨ Node.js ä¸­æ‰®æ¼”ç€æ ¸å¿ƒè§’è‰²ï¼š</p>
<ol>
<li>
<p><strong>JavaScript æ‰§è¡Œå™¨</strong></p>
<ul>
<li>è´Ÿè´£è§£æå’Œæ‰§è¡Œä½ å†™çš„ JavaScript ä»£ç </li>
<li>æ²¡æœ‰ V8ï¼ŒNode.js å°±æ— æ³•è¿è¡Œ JavaScript</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½åŠ é€Ÿå™¨</strong></p>
<ul>
<li>é€šè¿‡ç¼–è¯‘ä¼˜åŒ–ï¼Œè®© JavaScript ä»£ç è¿è¡Œå¾—æ›´å¿«</li>
<li>ä½¿å¾— Node.js èƒ½å¤Ÿå¤„ç†é«˜å¹¶å‘è¯·æ±‚</li>
</ul>
</li>
<li>
<p><strong>å†…å­˜ç®¡ç†å‘˜</strong></p>
<ul>
<li>è‡ªåŠ¨ç®¡ç†å†…å­˜åˆ†é…å’Œå›æ”¶</li>
<li>å½“å¯¹è±¡ä¸å†ä½¿ç”¨æ—¶ï¼Œè‡ªåŠ¨æ¸…ç†å†…å­˜ï¼ˆåƒåœ¾å›æ”¶ï¼‰</li>
</ul>
</li>
<li>
<p><strong>è·¨å¹³å°æ”¯æŒ</strong></p>
<ul>
<li>V8 æ”¯æŒ Windowsã€macOSã€Linux ç­‰å¤šä¸ªå¹³å°</li>
<li>ä½¿ Node.js èƒ½å¤Ÿåœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œ</li>
</ul>
</li>
</ol>
<h3 data-id="heading-31">2.6 æ€»ç»“ï¼šV8 å¼•æ“çš„é‡è¦æ€§</h3>
<ul>
<li><strong>V8 æ˜¯ Node.js çš„å¿ƒè„</strong>ï¼šæ²¡æœ‰ V8ï¼ŒNode.js å°±æ— æ³•è¿è¡Œ JavaScript</li>
<li><strong>V8 è®© JavaScript å˜å¿«</strong>ï¼šé€šè¿‡ç¼–è¯‘ä¼˜åŒ–ï¼Œæ€§èƒ½æ¥è¿‘åŸç”Ÿä»£ç </li>
<li><strong>V8 ç®€åŒ–äº†å¼€å‘</strong>ï¼šå¼€å‘è€…åªéœ€å†™ JavaScriptï¼ŒV8 è´Ÿè´£åº•å±‚ä¼˜åŒ–</li>
<li><strong>V8 æ˜¯å¼€æºçš„</strong>ï¼šç”± Google ç»´æŠ¤ï¼ŒæŒç»­ä¼˜åŒ–å’Œæ”¹è¿›</li>
</ul>
<hr/>
<h2 data-id="heading-32">ä¸‰ã€å•çº¿ç¨‹æ¨¡å‹</h2>
<h3 data-id="heading-33">3.1 ä»€ä¹ˆæ˜¯å•çº¿ç¨‹ï¼Ÿ</h3>
<p><strong>å•çº¿ç¨‹æ¨¡å‹</strong>æ˜¯ Node.js çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œç†è§£å®ƒå¯¹äºæŒæ¡ Node.js è‡³å…³é‡è¦ã€‚</p>
<h4 data-id="heading-34">é€šä¿—ç†è§£</h4>
<p>æƒ³è±¡ä¸€ä¸ªé¤å…çš„æœåŠ¡æ¨¡å¼ï¼š</p>
<p><strong>å¤šçº¿ç¨‹æ¨¡å¼ï¼ˆä¼ ç»ŸæœåŠ¡å™¨ï¼‰</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªå®¢äººåˆ†é…ä¸€ä¸ªæœåŠ¡å‘˜</li>
<li>100 ä¸ªå®¢äººéœ€è¦ 100 ä¸ªæœåŠ¡å‘˜</li>
<li>æˆæœ¬é«˜ï¼Œç®¡ç†å¤æ‚</li>
</ul>
<p><strong>å•çº¿ç¨‹æ¨¡å¼ï¼ˆNode.jsï¼‰</strong>ï¼š</p>
<ul>
<li>åªæœ‰ä¸€ä¸ªä¸»æœåŠ¡å‘˜ï¼ˆä¸»çº¿ç¨‹ï¼‰</li>
<li>ä½†è¿™ä¸ªæœåŠ¡å‘˜éå¸¸é«˜æ•ˆï¼Œå¯ä»¥åŒæ—¶å¤„ç†å¾ˆå¤šå®¢äººçš„éœ€æ±‚</li>
<li>æˆæœ¬ä½ï¼Œç®¡ç†ç®€å•</li>
</ul>
<h4 data-id="heading-35">æŠ€æœ¯å®šä¹‰</h4>
<p>Node.js é‡‡ç”¨<strong>å•çº¿ç¨‹æ¨¡å‹</strong>ï¼Œè¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>ä¸»çº¿ç¨‹å•ä¸€</strong>ï¼šJavaScript ä»£ç è¿è¡Œåœ¨å•ä¸€çš„ä¸»çº¿ç¨‹ä¸­</li>
<li><strong>é¿å…é”ç«äº‰</strong>ï¼šå•çº¿ç¨‹é¿å…äº†ä¼ ç»Ÿå¤šçº¿ç¨‹ç¼–ç¨‹ä¸­çš„é”å’Œç«æ€æ¡ä»¶é—®é¢˜</li>
<li><strong>ç®€åŒ–ç¼–ç¨‹æ¨¡å‹</strong>ï¼šå¼€å‘è€…ä¸éœ€è¦æ‹…å¿ƒçº¿ç¨‹åŒæ­¥å’Œæ­»é”é—®é¢˜</li>
</ul>
<h3 data-id="heading-36">3.2 å•çº¿ç¨‹çš„è¯¯åŒºæ¾„æ¸…</h3>
<h4 data-id="heading-37">å¸¸è§è¯¯è§£</h4>
<p>âŒ <strong>è¯¯è§£</strong>ï¼šNode.js åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥æ€§èƒ½å¾ˆå·®
âœ… <strong>çœŸç›¸</strong>ï¼šè™½ç„¶ JavaScript ä»£ç åœ¨å•çº¿ç¨‹ä¸­è¿è¡Œï¼Œä½† Node.js åœ¨åå°ä½¿ç”¨äº†å¤šçº¿ç¨‹</p>
<h4 data-id="heading-38">çœŸç›¸è¯´æ˜</h4>
<p>è™½ç„¶ JavaScript åœ¨ Node.js ä¸­æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li>
<p><strong>åå°çº¿ç¨‹æ± </strong></p>
<ul>
<li>libuv åº“åœ¨åå°ä½¿ç”¨çº¿ç¨‹æ± å¤„ç†æŸäº›æ“ä½œï¼ˆå¦‚æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼‰</li>
<li>é»˜è®¤çº¿ç¨‹æ± å¤§å°ä¸º 4ï¼Œå¯ä»¥é€šè¿‡ <code>UV_THREADPOOL_SIZE</code> ç¯å¢ƒå˜é‡è°ƒæ•´</li>
</ul>
</li>
<li>
<p><strong>ç³»ç»Ÿå†…æ ¸å¤šçº¿ç¨‹</strong></p>
<ul>
<li>ç°ä»£æ“ä½œç³»ç»Ÿå†…æ ¸æ˜¯å¤šçº¿ç¨‹çš„ï¼Œèƒ½å¤Ÿåœ¨åå°å¤„ç†å¤šä¸ªæ“ä½œ</li>
<li>I/O æ“ä½œç”±æ“ä½œç³»ç»Ÿå†…æ ¸å¤„ç†ï¼Œä¸å ç”¨ JavaScript ä¸»çº¿ç¨‹</li>
</ul>
</li>
<li>
<p><strong>éé˜»å¡æ“ä½œ</strong></p>
<ul>
<li>é€šè¿‡éé˜»å¡ I/Oï¼Œå•çº¿ç¨‹ä¹Ÿèƒ½é«˜æ•ˆå¤„ç†å¹¶å‘</li>
<li>ä¸»çº¿ç¨‹åªè´Ÿè´£åè°ƒå’Œè°ƒåº¦ï¼Œå®é™…å·¥ä½œç”±ç³»ç»Ÿå®Œæˆ</li>
</ul>
</li>
</ol>
<h4 data-id="heading-39">æ¶æ„ç¤ºæ„</h4>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    JavaScript ä¸»çº¿ç¨‹ï¼ˆå•çº¿ç¨‹ï¼‰       â”‚
â”‚    - æ‰§è¡Œä½ çš„ä»£ç                     â”‚
â”‚    - åè°ƒå¼‚æ­¥æ“ä½œ                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    libuv çº¿ç¨‹æ± ï¼ˆå¤šçº¿ç¨‹ï¼‰            â”‚
â”‚    - æ–‡ä»¶ç³»ç»Ÿæ“ä½œ                    â”‚
â”‚    - DNS æŸ¥è¯¢                        â”‚
â”‚    - CPU å¯†é›†å‹ä»»åŠ¡                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    æ“ä½œç³»ç»Ÿå†…æ ¸ï¼ˆå¤šçº¿ç¨‹ï¼‰            â”‚
â”‚    - ç½‘ç»œ <span class="hljs-selector-tag">I</span>/O                        â”‚
â”‚    - ç£ç›˜ <span class="hljs-selector-tag">I</span>/O                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-40">3.3 å•çº¿ç¨‹çš„ä¼˜åŠ¿</h3>
<p>æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fzh-cn%2Flearn%2Fasynchronous-work%2Fevent-loop-timers-and-nexttick" target="_blank" title="https://nodejs.org/zh-cn/learn/asynchronous-work/event-loop-timers-and-nexttick" ref="nofollow noopener noreferrer">Node.js å®˜æ–¹æ–‡æ¡£</a>ï¼š</p>
<h4 data-id="heading-41">3.3.1 é¿å…ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€</h4>
<p><strong>é€šä¿—ç†è§£</strong>ï¼šå°±åƒä¸€ä¸ªäººä¸“å¿ƒåšä¸€ä»¶äº‹ï¼Œä¸éœ€è¦åœ¨ä¸åŒä»»åŠ¡é—´åˆ‡æ¢ï¼Œæ•ˆç‡æ›´é«˜ã€‚</p>
<p><strong>æŠ€æœ¯è¯´æ˜</strong>ï¼šä¸éœ€è¦åœ¨çº¿ç¨‹é—´åˆ‡æ¢ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ã€‚</p>
<h4 data-id="heading-42">3.3.2 ç®€åŒ–å¹¶å‘ç¼–ç¨‹</h4>
<p><strong>é€šä¿—ç†è§£</strong>ï¼šä¸éœ€è¦æ‹…å¿ƒ"ä¸¤ä¸ªäººåŒæ—¶ä¿®æ”¹åŒä¸€ä¸ªä¸œè¥¿"çš„é—®é¢˜ã€‚</p>
<p><strong>æŠ€æœ¯è¯´æ˜</strong>ï¼šä¸éœ€è¦å¤„ç†çº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œé¿å…äº†æ­»é”ã€ç«æ€æ¡ä»¶ç­‰å¤æ‚é—®é¢˜ã€‚</p>
<h4 data-id="heading-43">3.3.3 å†…å­˜æ•ˆç‡</h4>
<p><strong>é€šä¿—ç†è§£</strong>ï¼šä¸€ä¸ªäººå·¥ä½œæ¯”å¤šä¸ªäººå·¥ä½œå ç”¨æ›´å°‘çš„èµ„æºã€‚</p>
<p><strong>æŠ€æœ¯è¯´æ˜</strong>ï¼šå•çº¿ç¨‹æ¨¡å‹å†…å­˜å ç”¨æ›´å°‘ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½éœ€è¦ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ã€‚</p>
<h3 data-id="heading-44">3.4 å•çº¿ç¨‹çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-45">3.4.1 CPU å¯†é›†å‹ä»»åŠ¡çš„é—®é¢˜</h4>
<p><strong>é—®é¢˜ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ è¿™ä¼šé˜»å¡äº‹ä»¶å¾ªç¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">heavyComputation</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000000000</span>; i++) {
    sum += i;
  }
  <span class="hljs-keyword">return</span> sum;
}

<span class="hljs-comment">// æ‰§è¡Œè¿™ä¸ªå‡½æ•°ä¼šé˜»å¡æ‰€æœ‰å…¶ä»–æ“ä½œ</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-title function_">heavyComputation</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¡ç®—å®Œæˆ'</span>);
</code></pre>
<p><strong>å½±å“</strong>ï¼šå•çº¿ç¨‹ä¸é€‚åˆ CPU å¯†é›†å‹ä»»åŠ¡ï¼Œä¼šé˜»å¡äº‹ä»¶å¾ªç¯ï¼Œå¯¼è‡´å…¶ä»–è¯·æ±‚æ— æ³•å¤„ç†ã€‚</p>
<h4 data-id="heading-46">3.4.2 è§£å†³æ–¹æ¡ˆ</h4>
<p><strong>æ–¹æ¡ˆä¸€ï¼šWorker Threadsï¼ˆå·¥ä½œçº¿ç¨‹ï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Worker</span>, isMainThread, parentPort } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'worker_threads'</span>);

<span class="hljs-keyword">if</span> (isMainThread) {
  <span class="hljs-comment">// ä¸»çº¿ç¨‹ï¼šåˆ›å»ºå·¥ä½œçº¿ç¨‹</span>
  <span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(__filename);
  worker.<span class="hljs-title function_">on</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¡ç®—ç»“æœ:'</span>, result);
  });
  worker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">end</span>: <span class="hljs-number">10000000000</span> });
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// å·¥ä½œçº¿ç¨‹ï¼šæ‰§è¡Œè®¡ç®—</span>
  parentPort.<span class="hljs-title function_">on</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">{ start, end }</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt; end; i++) {
      sum += i;
    }
    parentPort.<span class="hljs-title function_">postMessage</span>(sum);
  });
}
</code></pre>
<p><strong>æ–¹æ¡ˆäºŒï¼šCluster æ¨¡å—ï¼ˆå¤šè¿›ç¨‹ï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cluster = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cluster'</span>);
<span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">'os'</span>);

<span class="hljs-keyword">if</span> (cluster.<span class="hljs-property">isMaster</span>) {
  <span class="hljs-comment">// ä¸»è¿›ç¨‹ï¼šåˆ›å»ºå·¥ä½œè¿›ç¨‹</span>
  <span class="hljs-keyword">const</span> numCPUs = os.<span class="hljs-title function_">cpus</span>().<span class="hljs-property">length</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; numCPUs; i++) {
    cluster.<span class="hljs-title function_">fork</span>();
  }
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// å·¥ä½œè¿›ç¨‹ï¼šå¤„ç†è¯·æ±‚</span>
  <span class="hljs-built_in">require</span>(<span class="hljs-string">'./app.js'</span>);
}
</code></pre>
<h3 data-id="heading-47">3.5 æ€»ç»“ï¼šå•çº¿ç¨‹çš„é‡è¦æ€§</h3>
<ul>
<li><strong>å•çº¿ç¨‹ç®€åŒ–äº†ç¼–ç¨‹</strong>ï¼šä¸éœ€è¦å¤„ç†å¤æ‚çš„çº¿ç¨‹åŒæ­¥é—®é¢˜</li>
<li><strong>å•çº¿ç¨‹æé«˜äº†æ•ˆç‡</strong>ï¼šé¿å…äº†ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€</li>
<li><strong>å•çº¿ç¨‹ä¸æ˜¯é™åˆ¶</strong>ï¼šé€šè¿‡å¼‚æ­¥ I/O å’Œäº‹ä»¶é©±åŠ¨ï¼Œå•çº¿ç¨‹ä¹Ÿèƒ½é«˜æ•ˆå¤„ç†å¹¶å‘</li>
<li><strong>éœ€è¦æ—¶å¯ä»¥ä½¿ç”¨å¤šçº¿ç¨‹</strong>ï¼šWorker Threads å’Œ Cluster æä¾›äº†å¤šçº¿ç¨‹/å¤šè¿›ç¨‹çš„èƒ½åŠ›</li>
</ul>
<hr/>
<h2 data-id="heading-48">å››ã€éé˜»å¡ I/O</h2>
<h3 data-id="heading-49">4.1 ä»€ä¹ˆæ˜¯éé˜»å¡ I/Oï¼Ÿ</h3>
<p><strong>éé˜»å¡ I/Oï¼ˆNon-blocking I/Oï¼‰</strong> æ˜¯ Node.js çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ Node.js é«˜æ€§èƒ½çš„å…³é”®ã€‚</p>
<h4 data-id="heading-50">é€šä¿—ç†è§£</h4>
<p>æƒ³è±¡ä½ åœ¨é¤å…ç‚¹é¤ï¼š</p>
<p><strong>é˜»å¡æ–¹å¼ï¼ˆåŒæ­¥ï¼‰</strong>ï¼š</p>
<ul>
<li>ä½ ç‚¹å®Œé¤åï¼Œå¿…é¡»ååœ¨åº§ä½ä¸Šç­‰å¾…</li>
<li>èœæ²¡ä¸Šæ¥ä¹‹å‰ï¼Œä½ ä¸èƒ½åšä»»ä½•å…¶ä»–äº‹æƒ…</li>
<li>å¦‚æœç­‰ 10 åˆ†é’Ÿï¼Œä½ å°±æµªè´¹äº† 10 åˆ†é’Ÿ</li>
</ul>
<p><strong>éé˜»å¡æ–¹å¼ï¼ˆå¼‚æ­¥ï¼‰</strong>ï¼š</p>
<ul>
<li>ä½ ç‚¹å®Œé¤åï¼Œå¯ä»¥å»åšå…¶ä»–äº‹æƒ…ï¼ˆçœ‹ä¹¦ã€æ‰“ç”µè¯ï¼‰</li>
<li>èœå¥½äº†ï¼ŒæœåŠ¡å‘˜ä¼šé€šçŸ¥ä½ </li>
<li>ç­‰å¾…çš„æ—¶é—´æ²¡æœ‰è¢«æµªè´¹ï¼Œä½ å¯ä»¥å¤„ç†å…¶ä»–äº‹æƒ…</li>
</ul>
<h4 data-id="heading-51">æŠ€æœ¯å®šä¹‰</h4>
<p>éé˜»å¡ I/O å…è®¸ Node.js åœ¨ç­‰å¾… I/O æ“ä½œï¼ˆå¦‚æ–‡ä»¶è¯»å–ã€ç½‘ç»œè¯·æ±‚ï¼‰å®Œæˆæ—¶ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œè€Œä¸æ˜¯é˜»å¡ç­‰å¾…ã€‚</p>
<h3 data-id="heading-52">4.2 é˜»å¡ vs éé˜»å¡å¯¹æ¯”</h3>
<h4 data-id="heading-53">4.2.1 é˜»å¡æ–¹å¼ï¼ˆåŒæ­¥ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹è¯»å–æ–‡ä»¶...'</span>);

<span class="hljs-comment">// âŒ é˜»å¡ï¼šç¨‹åºä¼šç­‰å¾…æ–‡ä»¶è¯»å–å®Œæˆæ‰ç»§ç»­æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> data = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-string">'utf8'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å†…å®¹:'</span>, data);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿™è¡Œä»£ç ä¼šåœ¨æ–‡ä»¶è¯»å–å®Œæˆåæ‰æ‰§è¡Œ'</span>);
</code></pre>
<p><strong>æ‰§è¡Œé¡ºåº</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> å¼€å§‹è¯»å–æ–‡ä»¶...
<span class="hljs-bullet">2.</span> [ç­‰å¾…æ–‡ä»¶è¯»å–...] â† é˜»å¡åœ¨è¿™é‡Œ
<span class="hljs-bullet">3.</span> æ–‡ä»¶å†…å®¹: ...
<span class="hljs-bullet">4.</span> è¿™è¡Œä»£ç ä¼šåœ¨æ–‡ä»¶è¯»å–å®Œæˆåæ‰æ‰§è¡Œ
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šå¦‚æœæ–‡ä»¶å¾ˆå¤§æˆ–ç½‘ç»œå¾ˆæ…¢ï¼Œç¨‹åºä¼šä¸€ç›´ç­‰å¾…ï¼Œæ— æ³•å¤„ç†å…¶ä»–è¯·æ±‚ã€‚</p>
<h4 data-id="heading-54">4.2.2 éé˜»å¡æ–¹å¼ï¼ˆå¼‚æ­¥ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹è¯»å–æ–‡ä»¶...'</span>);

<span class="hljs-comment">// âœ… éé˜»å¡ï¼šç¨‹åºç«‹å³ç»§ç»­æ‰§è¡Œï¼Œä¸ç­‰å¾…æ–‡ä»¶è¯»å–å®Œæˆ</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–é”™è¯¯:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å†…å®¹:'</span>, data);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿™è¡Œä»£ç ä¼šç«‹å³æ‰§è¡Œï¼Œä¸ç­‰å¾…æ–‡ä»¶è¯»å–'</span>);
</code></pre>
<p><strong>æ‰§è¡Œé¡ºåº</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> å¼€å§‹è¯»å–æ–‡ä»¶...
<span class="hljs-bullet">2.</span> è¿™è¡Œä»£ç ä¼šç«‹å³æ‰§è¡Œï¼Œä¸ç­‰å¾…æ–‡ä»¶è¯»å– â† ç«‹å³æ‰§è¡Œ
<span class="hljs-bullet">3.</span> [æ–‡ä»¶åœ¨åå°è¯»å–ä¸­...]
<span class="hljs-bullet">4.</span> æ–‡ä»¶å†…å®¹: ... â† è¯»å–å®Œæˆåæ‰§è¡Œå›è°ƒ
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼šç¨‹åºå¯ä»¥ç«‹å³å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œä¸ä¼šå› ä¸ºç­‰å¾… I/O è€Œé˜»å¡ã€‚</p>
<h3 data-id="heading-55">4.3 éé˜»å¡ I/O çš„å·¥ä½œåŸç†</h3>
<p>æ ¹æ® Node.js å®˜æ–¹æ–‡æ¡£ï¼Œéé˜»å¡ I/O çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-56">è¯¦ç»†æµç¨‹</h4>
<pre><code class="hljs language-less" lang="less">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">1</span>. å‘èµ· <span class="hljs-selector-tag">I</span>/<span class="hljs-selector-tag">O</span> è¯·æ±‚                        â”‚
â”‚     <span class="hljs-selector-tag">fs</span><span class="hljs-selector-class">.readFile</span>(<span class="hljs-string">'file.txt'</span>, callback)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">2</span>. <span class="hljs-selector-tag">Node</span><span class="hljs-selector-class">.js</span> å°†æ“ä½œäº¤ç»™ç³»ç»Ÿå†…æ ¸           â”‚
â”‚     <span class="hljs-selector-tag">-</span> ä¸ç­‰å¾…ï¼Œç«‹å³è¿”å›                   â”‚
â”‚     <span class="hljs-selector-tag">-</span> ç»§ç»­æ‰§è¡Œåç»­ä»£ç                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">3</span>. ç³»ç»Ÿå†…æ ¸ï¼ˆå¤šçº¿ç¨‹ï¼‰å¤„ç† <span class="hljs-selector-tag">I</span>/<span class="hljs-selector-tag">O</span>           â”‚
â”‚     <span class="hljs-selector-tag">-</span> æ–‡ä»¶ç³»ç»Ÿæ“ä½œ                       â”‚
â”‚     <span class="hljs-selector-tag">-</span> ç½‘ç»œè¯·æ±‚                           â”‚
â”‚     <span class="hljs-selector-tag">-</span> æ•°æ®åº“æŸ¥è¯¢                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">4</span>. <span class="hljs-selector-tag">I</span>/<span class="hljs-selector-tag">O</span> æ“ä½œå®Œæˆ                         â”‚
â”‚     <span class="hljs-selector-tag">-</span> å†…æ ¸é€šçŸ¥ <span class="hljs-selector-tag">Node</span><span class="hljs-selector-class">.js</span>                  â”‚
â”‚     <span class="hljs-selector-tag">-</span> å›è°ƒå‡½æ•°è¢«æ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">5</span>. äº‹ä»¶å¾ªç¯æ‰§è¡Œå›è°ƒ                     â”‚
â”‚     <span class="hljs-selector-tag">-</span> ä»é˜Ÿåˆ—ä¸­å–å‡ºå›è°ƒ                   â”‚
â”‚     <span class="hljs-selector-tag">-</span> åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-57">å®é™…ä¾‹å­</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1. å¼€å§‹'</span>);

<span class="hljs-comment">// å‘èµ·ä¸‰ä¸ªæ–‡ä»¶è¯»å–è¯·æ±‚</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file1.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3. æ–‡ä»¶1è¯»å–å®Œæˆ'</span>);
});

fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file2.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'4. æ–‡ä»¶2è¯»å–å®Œæˆ'</span>);
});

fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file3.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'5. æ–‡ä»¶3è¯»å–å®Œæˆ'</span>);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2. æ‰€æœ‰è¯·æ±‚å·²å‘èµ·ï¼Œç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç '</span>);

<span class="hljs-comment">// è¾“å‡ºé¡ºåºå¯èƒ½æ˜¯ï¼š</span>
<span class="hljs-comment">// 1. å¼€å§‹</span>
<span class="hljs-comment">// 2. æ‰€æœ‰è¯·æ±‚å·²å‘èµ·ï¼Œç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç </span>
<span class="hljs-comment">// 3. æ–‡ä»¶1è¯»å–å®Œæˆï¼ˆå“ªä¸ªå…ˆå®Œæˆå…ˆè¾“å‡ºï¼‰</span>
<span class="hljs-comment">// 4. æ–‡ä»¶2è¯»å–å®Œæˆ</span>
<span class="hljs-comment">// 5. æ–‡ä»¶3è¯»å–å®Œæˆ</span>
</code></pre>
<h3 data-id="heading-58">4.4 éé˜»å¡ I/O çš„ä¼˜åŠ¿</h3>
<h4 data-id="heading-59">4.4.1 é«˜å¹¶å‘å¤„ç†</h4>
<p><strong>å¯¹æ¯”ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é˜»å¡æ–¹å¼ï¼šä¸€æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚</span>
<span class="hljs-keyword">const</span> data1 = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'file1.txt'</span>); <span class="hljs-comment">// ç­‰å¾… 100ms</span>
<span class="hljs-keyword">const</span> data2 = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'file2.txt'</span>); <span class="hljs-comment">// ç­‰å¾… 100ms</span>
<span class="hljs-keyword">const</span> data3 = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'file3.txt'</span>); <span class="hljs-comment">// ç­‰å¾… 100ms</span>
<span class="hljs-comment">// æ€»æ—¶é—´ï¼š300ms</span>

<span class="hljs-comment">// âœ… éé˜»å¡æ–¹å¼ï¼šå¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file1.txt'</span>, callback1); <span class="hljs-comment">// ç«‹å³è¿”å›</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file2.txt'</span>, callback2); <span class="hljs-comment">// ç«‹å³è¿”å›</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file3.txt'</span>, callback3); <span class="hljs-comment">// ç«‹å³è¿”å›</span>
<span class="hljs-comment">// æ€»æ—¶é—´ï¼šçº¦ 100msï¼ˆä¸‰ä¸ªæ–‡ä»¶å¹¶è¡Œè¯»å–ï¼‰</span>
</code></pre>
<h4 data-id="heading-60">4.4.2 èµ„æºé«˜æ•ˆåˆ©ç”¨</h4>
<ul>
<li><strong>CPU æ—¶é—´ä¸è¢«æµªè´¹</strong>ï¼šç­‰å¾… I/O æ—¶å¯ä»¥å¤„ç†å…¶ä»–ä»»åŠ¡</li>
<li><strong>å†…å­˜ä½¿ç”¨æ›´é«˜æ•ˆ</strong>ï¼šä¸éœ€è¦ä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºçº¿ç¨‹</li>
<li><strong>ç³»ç»Ÿèµ„æºå……åˆ†åˆ©ç”¨</strong>ï¼šæ“ä½œç³»ç»Ÿå†…æ ¸å¤„ç† I/Oï¼ŒNode.js å¤„ç†ä¸šåŠ¡é€»è¾‘</li>
</ul>
<h4 data-id="heading-61">4.4.3 é€‚åˆ I/O å¯†é›†å‹åº”ç”¨</h4>
<p>éå¸¸é€‚åˆå¤„ç†ï¼š</p>
<ul>
<li>å¤§é‡ç½‘ç»œè¯·æ±‚ï¼ˆAPI æœåŠ¡ï¼‰</li>
<li>æ–‡ä»¶æ“ä½œï¼ˆæ–‡ä»¶æœåŠ¡å™¨ï¼‰</li>
<li>æ•°æ®åº“æŸ¥è¯¢ï¼ˆæ•°æ®å¯†é›†å‹åº”ç”¨ï¼‰</li>
</ul>
<h3 data-id="heading-62">4.5 ç°ä»£å¼‚æ­¥ç¼–ç¨‹æ–¹å¼</h3>
<h4 data-id="heading-63">4.5.1 å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é”™è¯¯:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†…å®¹:'</span>, data);
});
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šå›è°ƒåµŒå¥—ï¼ˆå›è°ƒåœ°ç‹±ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ å›è°ƒåœ°ç‹±</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file1.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data1</span>) =&gt;</span> {
  fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file2.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data2</span>) =&gt;</span> {
    fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file3.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data3</span>) =&gt;</span> {
      <span class="hljs-comment">// åµŒå¥—å¤ªæ·±ï¼Œéš¾ä»¥ç»´æŠ¤</span>
    });
  });
});
</code></pre>
<h4 data-id="heading-64">4.5.2 Promise</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>).<span class="hljs-property">promises</span>;

fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-string">'utf8'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†…å®¹:'</span>, data);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é”™è¯¯:'</span>, err);
  });

<span class="hljs-comment">// é“¾å¼è°ƒç”¨ï¼Œè§£å†³å›è°ƒåœ°ç‹±</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file1.txt'</span>, <span class="hljs-string">'utf8'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data1</span> =&gt;</span> fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file2.txt'</span>, <span class="hljs-string">'utf8'</span>))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data2</span> =&gt;</span> fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file3.txt'</span>, <span class="hljs-string">'utf8'</span>))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data3</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰æ–‡ä»¶è¯»å–å®Œæˆ'</span>);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é”™è¯¯:'</span>, err));
</code></pre>
<h4 data-id="heading-65">4.5.3 Async/Awaitï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>).<span class="hljs-property">promises</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">readFiles</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> data1 = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file1.txt'</span>, <span class="hljs-string">'utf8'</span>);
    <span class="hljs-keyword">const</span> data2 = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file2.txt'</span>, <span class="hljs-string">'utf8'</span>);
    <span class="hljs-keyword">const</span> data3 = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file3.txt'</span>, <span class="hljs-string">'utf8'</span>);
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰æ–‡ä»¶è¯»å–å®Œæˆ'</span>);
    <span class="hljs-keyword">return</span> { data1, data2, data3 };
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é”™è¯¯:'</span>, err);
    <span class="hljs-keyword">throw</span> err;
  }
}

<span class="hljs-comment">// å¹¶è¡Œè¯»å–ï¼ˆæ›´é«˜æ•ˆï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">readFilesParallel</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> [data1, data2, data3] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
      fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file1.txt'</span>, <span class="hljs-string">'utf8'</span>),
      fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file2.txt'</span>, <span class="hljs-string">'utf8'</span>),
      fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file3.txt'</span>, <span class="hljs-string">'utf8'</span>)
    ]);
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰æ–‡ä»¶å¹¶è¡Œè¯»å–å®Œæˆ'</span>);
    <span class="hljs-keyword">return</span> { data1, data2, data3 };
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é”™è¯¯:'</span>, err);
    <span class="hljs-keyword">throw</span> err;
  }
}
</code></pre>
<h3 data-id="heading-66">4.6 æ€»ç»“ï¼šéé˜»å¡ I/O çš„é‡è¦æ€§</h3>
<ul>
<li><strong>éé˜»å¡æ˜¯ Node.js é«˜æ€§èƒ½çš„åŸºç¡€</strong>ï¼šå…è®¸åŒæ—¶å¤„ç†å¤§é‡ I/O æ“ä½œ</li>
<li><strong>å……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æº</strong>ï¼šæ“ä½œç³»ç»Ÿå†…æ ¸å¤„ç† I/Oï¼ŒNode.js å¤„ç†ä¸šåŠ¡é€»è¾‘</li>
<li><strong>é€‚åˆç°ä»£åº”ç”¨</strong>ï¼šç°ä»£åº”ç”¨å¤§å¤šæ˜¯ I/O å¯†é›†å‹çš„ï¼ˆç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ï¼‰</li>
<li><strong>ä½¿ç”¨ç°ä»£è¯­æ³•</strong>ï¼šæ¨èä½¿ç”¨ async/awaitï¼Œä»£ç æ›´æ¸…æ™°æ˜“è¯»</li>
</ul>
<hr/>
<h2 data-id="heading-67">äº”ã€äº‹ä»¶é©±åŠ¨æ¶æ„</h2>
<h3 data-id="heading-68">5.1 ä»€ä¹ˆæ˜¯äº‹ä»¶é©±åŠ¨ï¼Ÿ</h3>
<p><strong>äº‹ä»¶é©±åŠ¨ï¼ˆEvent-drivenï¼‰</strong> æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œç¨‹åºçš„æ‰§è¡Œæµç¨‹ç”±äº‹ä»¶çš„å‘ç”Ÿæ¥å†³å®šã€‚</p>
<h4 data-id="heading-69">é€šä¿—ç†è§£</h4>
<p>æƒ³è±¡ä¸€ä¸ªé¤å…çš„æœåŠ¡æ¨¡å¼ï¼š</p>
<p><strong>ä¼ ç»Ÿæ–¹å¼ï¼ˆè½®è¯¢ï¼‰</strong>ï¼š</p>
<ul>
<li>æœåŠ¡å‘˜æ¯éš”ä¸€æ®µæ—¶é—´å°±å»æ¯æ¡Œé—®ï¼š"éœ€è¦æœåŠ¡å—ï¼Ÿ"</li>
<li>å³ä½¿å®¢äººä¸éœ€è¦æœåŠ¡ï¼Œä¹Ÿè¦ä¸åœåœ°é—®</li>
<li>æµªè´¹æ—¶é—´å’Œç²¾åŠ›</li>
</ul>
<p><strong>äº‹ä»¶é©±åŠ¨æ–¹å¼</strong>ï¼š</p>
<ul>
<li>å®¢äººéœ€è¦æœåŠ¡æ—¶ï¼ŒæŒ‰é“ƒæˆ–ä¸¾æ‰‹</li>
<li>æœåŠ¡å‘˜å¬åˆ°é“ƒå£°åï¼Œç«‹å³å»æœåŠ¡</li>
<li>ä¸éœ€è¦æœåŠ¡æ—¶ï¼ŒæœåŠ¡å‘˜å¯ä»¥ä¼‘æ¯</li>
<li>é«˜æ•ˆä¸”èŠ‚çœèµ„æº</li>
</ul>
<h4 data-id="heading-70">æŠ€æœ¯å®šä¹‰</h4>
<p>Node.js é‡‡ç”¨äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œç¨‹åºçš„æ‰§è¡Œæµç¨‹ç”±äº‹ä»¶çš„å‘ç”Ÿæ¥å†³å®šã€‚å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ‰§è¡Œç›¸åº”çš„å›è°ƒå‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸»åŠ¨è½®è¯¢æ£€æŸ¥ã€‚</p>
<h3 data-id="heading-71">5.2 äº‹ä»¶é©±åŠ¨çš„æ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-72">5.2.1 äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰</h4>
<p><strong>é€šä¿—ç†è§£</strong>ï¼šäº‹ä»¶å¾ªç¯å°±åƒä¸€ä¸ª"å¾…åŠäº‹é¡¹ç®¡ç†å™¨"</p>
<pre><code class="hljs language-vbnet" lang="vbnet">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        äº‹ä»¶å¾ªç¯ï¼ˆ<span class="hljs-keyword">Event</span> <span class="hljs-keyword">Loop</span>ï¼‰        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-number">1</span>. æ£€æŸ¥æ˜¯å¦æœ‰å¾…å¤„ç†çš„äº‹ä»¶            â”‚
â”‚  <span class="hljs-number">2</span>. å¦‚æœæœ‰ï¼Œå–å‡ºä¸€ä¸ªäº‹ä»¶               â”‚
â”‚  <span class="hljs-number">3</span>. æ‰§è¡Œè¯¥äº‹ä»¶çš„å›è°ƒå‡½æ•°              â”‚
â”‚  <span class="hljs-number">4</span>. é‡å¤æ­¥éª¤ <span class="hljs-number">1</span>-<span class="hljs-number">3</span>                     â”‚
â”‚  <span class="hljs-number">5</span>. å¦‚æœæ²¡æœ‰äº‹ä»¶ï¼Œè¿›å…¥ä¼‘çœ çŠ¶æ€        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æŠ€æœ¯è¯´æ˜</strong>ï¼š</p>
<ul>
<li>Node.js ä½¿ç”¨äº‹ä»¶å¾ªç¯æ¥ç®¡ç†å¼‚æ­¥æ“ä½œ</li>
<li>äº‹ä»¶å¾ªç¯ä¸æ–­æ£€æŸ¥æ˜¯å¦æœ‰å¾…å¤„ç†çš„äº‹ä»¶</li>
<li>å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ‰§è¡Œç›¸åº”çš„å›è°ƒå‡½æ•°</li>
<li>å¦‚æœæ²¡æœ‰äº‹ä»¶ï¼ŒNode.js è¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œç­‰å¾…æ–°äº‹ä»¶</li>
</ul>
<h4 data-id="heading-73">5.2.2 äº‹ä»¶å‘å°„å™¨ï¼ˆEvent Emitterï¼‰</h4>
<p><strong>é€šä¿—ç†è§£</strong>ï¼šå°±åƒå¹¿æ’­ç”µå°</p>
<ul>
<li><strong>å‘å°„å™¨ï¼ˆEmitterï¼‰</strong>ï¼šå¹¿æ’­ç”µå°ï¼Œå¯ä»¥å‘é€ä¿¡å·</li>
<li><strong>ç›‘å¬å™¨ï¼ˆListenerï¼‰</strong>ï¼šæ”¶éŸ³æœºï¼Œå¯ä»¥æ¥æ”¶ä¿¡å·</li>
<li><strong>äº‹ä»¶ï¼ˆEventï¼‰</strong>ï¼šå¹¿æ’­çš„å†…å®¹</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">EventEmitter</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'events'</span>);
<span class="hljs-keyword">const</span> emitter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventEmitter</span>();

<span class="hljs-comment">// ç›‘å¬äº‹ä»¶ï¼ˆå°±åƒæ‰“å¼€æ”¶éŸ³æœºï¼Œè°ƒåˆ°æŸä¸ªé¢‘é“ï¼‰</span>
emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ•°æ®:'</span>, data);
});

emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å‘ç”Ÿé”™è¯¯:'</span>, error);
});

<span class="hljs-comment">// è§¦å‘äº‹ä»¶ï¼ˆå°±åƒå¹¿æ’­ç”µå°å‘é€ä¿¡å·ï¼‰</span>
emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'data'</span>, <span class="hljs-string">'Hello World'</span>);
emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'error'</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Something went wrong'</span>));

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// æ”¶åˆ°æ•°æ®: Hello World</span>
<span class="hljs-comment">// å‘ç”Ÿé”™è¯¯: Error: Something went wrong</span>
</code></pre>
<h4 data-id="heading-74">5.2.3 äº‹ä»¶é˜Ÿåˆ—ï¼ˆEvent Queueï¼‰</h4>
<p><strong>é€šä¿—ç†è§£</strong>ï¼šå°±åƒé“¶è¡Œçš„æ’é˜Ÿç³»ç»Ÿ</p>
<ul>
<li>äº‹ä»¶æŒ‰ç…§å‘ç”Ÿçš„é¡ºåºæ’é˜Ÿ</li>
<li>äº‹ä»¶å¾ªç¯æŒ‰é¡ºåºå¤„ç†é˜Ÿåˆ—ä¸­çš„äº‹ä»¶</li>
<li>å…ˆåˆ°å…ˆå¤„ç†</li>
</ul>
<h3 data-id="heading-75">5.3 äº‹ä»¶é©±åŠ¨çš„å·¥ä½œæµç¨‹</h3>
<h4 data-id="heading-76">è¯¦ç»†æµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. æ¥æ”¶è¯·æ±‚/äº‹ä»¶                        â”‚
â”‚     - HTTP è¯·æ±‚åˆ°è¾¾                      â”‚
â”‚     - æ–‡ä»¶è¯»å–å®Œæˆ                        â”‚
â”‚     - å®šæ—¶å™¨åˆ°æœŸ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. äº‹ä»¶è¢«æ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—                  â”‚
â”‚     - æŒ‰ç…§å‘ç”Ÿçš„é¡ºåºæ’é˜Ÿ                  â”‚
â”‚     - ç­‰å¾…å¤„ç†                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. äº‹ä»¶å¾ªç¯æ£€æŸ¥é˜Ÿåˆ—                      â”‚
â”‚     - å¦‚æœé˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œå–å‡ºä¸€ä¸ªäº‹ä»¶         â”‚
â”‚     - å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿›å…¥ä¼‘çœ çŠ¶æ€          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. æ‰§è¡Œäº‹ä»¶çš„å›è°ƒå‡½æ•°                    â”‚
â”‚     - åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ                      â”‚
â”‚     - æ‰§è¡Œå®Œæˆåç»§ç»­æ£€æŸ¥é˜Ÿåˆ—              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. é‡å¤æ­¥éª¤ 3-4ï¼ŒæŒç»­å¤„ç†äº‹ä»¶            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<h4 data-id="heading-77">å®é™…ä¾‹å­</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);

<span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†è¯·æ±‚:'</span>, req.<span class="hljs-property">url</span>);
  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, {<span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/plain'</span>});
  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">'Hello World!'</span>);
});

server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœåŠ¡å™¨å¯åŠ¨ï¼Œç­‰å¾…äº‹ä»¶...'</span>);
});

<span class="hljs-comment">// å·¥ä½œæµç¨‹ï¼š</span>
<span class="hljs-comment">// 1. æœåŠ¡å™¨å¯åŠ¨ï¼Œè¿›å…¥äº‹ä»¶å¾ªç¯ï¼Œç­‰å¾…äº‹ä»¶</span>
<span class="hljs-comment">// 2. å®¢æˆ·ç«¯å‘é€è¯·æ±‚ â†’ è§¦å‘ 'request' äº‹ä»¶</span>
<span class="hljs-comment">// 3. äº‹ä»¶è¢«æ·»åŠ åˆ°é˜Ÿåˆ—</span>
<span class="hljs-comment">// 4. äº‹ä»¶å¾ªç¯å–å‡ºäº‹ä»¶ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°</span>
<span class="hljs-comment">// 5. å¤„ç†å®Œæˆåï¼Œç»§ç»­ç­‰å¾…ä¸‹ä¸€ä¸ªäº‹ä»¶</span>
</code></pre>
<h3 data-id="heading-78">5.4 äº‹ä»¶é©±åŠ¨çš„ä¼˜åŠ¿</h3>
<h4 data-id="heading-79">5.4.1 é«˜æ•ˆå¤„ç†å¹¶å‘</h4>
<p><strong>å¯¹æ¯”ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä¼ ç»Ÿæ–¹å¼ï¼šè½®è¯¢æ£€æŸ¥</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">checkForNewRequests</span>(); <span class="hljs-comment">// å³ä½¿æ²¡æœ‰è¯·æ±‚ä¹Ÿè¦æ£€æŸ¥</span>
}, <span class="hljs-number">100</span>);

<span class="hljs-comment">// âœ… äº‹ä»¶é©±åŠ¨ï¼šäº‹ä»¶å‘ç”Ÿæ—¶æ‰å¤„ç†</span>
server.<span class="hljs-title function_">on</span>(<span class="hljs-string">'request'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-title function_">handleRequest</span>(req, res); <span class="hljs-comment">// åªåœ¨æœ‰è¯·æ±‚æ—¶æ‰§è¡Œ</span>
});
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>èƒ½å¤ŸåŒæ—¶å¤„ç†å¤§é‡è¿æ¥ï¼Œè€Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹</li>
<li>ä¸éœ€è¦ä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºçº¿ç¨‹</li>
<li>èµ„æºä½¿ç”¨æ›´é«˜æ•ˆ</li>
</ul>
<h4 data-id="heading-80">5.4.2 èµ„æºèŠ‚çº¦</h4>
<p><strong>é€šä¿—ç†è§£</strong>ï¼šå°±åƒæ™ºèƒ½å®¶å±…ç³»ç»Ÿ</p>
<ul>
<li>ä¼ ç»Ÿæ–¹å¼ï¼šä¸åœåœ°æ£€æŸ¥æ‰€æœ‰è®¾å¤‡çš„çŠ¶æ€ï¼ˆæµªè´¹ç”µï¼‰</li>
<li>äº‹ä»¶é©±åŠ¨ï¼šè®¾å¤‡çŠ¶æ€æ”¹å˜æ—¶æ‰é€šçŸ¥ï¼ˆèŠ‚çœç”µï¼‰</li>
</ul>
<p><strong>æŠ€æœ¯è¯´æ˜</strong>ï¼š</p>
<ul>
<li>åªåœ¨æœ‰äº‹ä»¶æ—¶æ‰æ¶ˆè€—èµ„æº</li>
<li>æ²¡æœ‰äº‹ä»¶æ—¶è¿›å…¥ä¼‘çœ çŠ¶æ€</li>
<li>CPU å’Œå†…å­˜ä½¿ç”¨æ›´é«˜æ•ˆ</li>
</ul>
<h4 data-id="heading-81">5.4.3 å®æ—¶å“åº”</h4>
<p>éå¸¸é€‚åˆæ„å»ºï¼š</p>
<ul>
<li><strong>èŠå¤©åº”ç”¨</strong>ï¼šæ¶ˆæ¯åˆ°è¾¾æ—¶ç«‹å³å¤„ç†</li>
<li><strong>åœ¨çº¿æ¸¸æˆ</strong>ï¼šç©å®¶æ“ä½œæ—¶ç«‹å³å“åº”</li>
<li><strong>åä½œå·¥å…·</strong>ï¼šæ–‡æ¡£ä¿®æ”¹æ—¶å®æ—¶åŒæ­¥</li>
<li><strong>ç›‘æ§ç³»ç»Ÿ</strong>ï¼šç³»ç»Ÿäº‹ä»¶å‘ç”Ÿæ—¶ç«‹å³å¤„ç†</li>
</ul>
<h4 data-id="heading-82">5.4.4 å¯æ‰©å±•æ€§</h4>
<ul>
<li>èƒ½å¤Ÿè½»æ¾æ‰©å±•åˆ°å¤„ç†å¤§é‡å¹¶å‘è¿æ¥</li>
<li>å•è¿›ç¨‹å¯ä»¥å¤„ç†æ•°ä¸‡ä¸ªå¹¶å‘è¿æ¥</li>
<li>é€šè¿‡ Cluster æ¨¡å—å¯ä»¥æ‰©å±•åˆ°å¤šè¿›ç¨‹</li>
</ul>
<h3 data-id="heading-83">5.5 äº‹ä»¶é©±åŠ¨çš„å®é™…åº”ç”¨</h3>
<h4 data-id="heading-84">5.5.1 æ–‡ä»¶ç›‘å¬</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// ç›‘å¬æ–‡ä»¶å˜åŒ–äº‹ä»¶</span>
fs.<span class="hljs-title function_">watch</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-function">(<span class="hljs-params">eventType, filename</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ–‡ä»¶ <span class="hljs-subst">${filename}</span> å‘ç”Ÿäº† <span class="hljs-subst">${eventType}</span> äº‹ä»¶`</span>);
  
  <span class="hljs-keyword">if</span> (eventType === <span class="hljs-string">'change'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å†…å®¹å·²ä¿®æ”¹'</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eventType === <span class="hljs-string">'rename'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶è¢«é‡å‘½åæˆ–åˆ é™¤'</span>);
  }
});
</code></pre>
<h4 data-id="heading-85">5.5.2 æµï¼ˆStreamï¼‰äº‹ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// åˆ›å»ºå¯è¯»æµ</span>
<span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'large-file.txt'</span>);

<span class="hljs-comment">// ç›‘å¬ 'data' äº‹ä»¶ï¼ˆæ•°æ®å—åˆ°è¾¾æ—¶è§¦å‘ï¼‰</span>
readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ•°æ®å—ï¼Œå¤§å°:'</span>, chunk.<span class="hljs-property">length</span>);
});

<span class="hljs-comment">// ç›‘å¬ 'end' äº‹ä»¶ï¼ˆæ–‡ä»¶è¯»å–å®Œæˆæ—¶è§¦å‘ï¼‰</span>
readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶è¯»å–å®Œæˆ'</span>);
});

<span class="hljs-comment">// ç›‘å¬ 'error' äº‹ä»¶ï¼ˆå‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ï¼‰</span>
readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–é”™è¯¯:'</span>, err);
});
</code></pre>
<h3 data-id="heading-86">5.6 äº‹ä»¶å¾ªç¯çš„ä¼˜å…ˆçº§</h3>
<p>Node.js äº‹ä»¶å¾ªç¯æœ‰ä¸åŒçš„é˜¶æ®µï¼ŒæŒ‰ä¼˜å…ˆçº§å¤„ç†ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">1.</span> å®šæ—¶å™¨ï¼ˆTimersï¼‰                 â”‚
â”‚     <span class="hljs-operator">-</span> setTimeout, setInterval        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-number">2.</span> å¾…å¤„ç†çš„å›è°ƒï¼ˆPending Callbacksï¼‰â”‚
â”‚     <span class="hljs-operator">-</span> I<span class="hljs-operator">/</span>O å›è°ƒ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-number">3.</span> ç©ºé—²<span class="hljs-operator">/</span>å‡†å¤‡ï¼ˆIdle<span class="hljs-operator">/</span><span class="hljs-keyword">Prepare</span>ï¼‰        â”‚
â”‚     <span class="hljs-operator">-</span> å†…éƒ¨ä½¿ç”¨                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-number">4.</span> è½®è¯¢ï¼ˆPollï¼‰                     â”‚
â”‚     <span class="hljs-operator">-</span> è·å–æ–°çš„ I<span class="hljs-operator">/</span>O äº‹ä»¶              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-number">5.</span> æ£€æŸ¥ï¼ˆ<span class="hljs-keyword">Check</span>ï¼‰                    â”‚
â”‚     <span class="hljs-operator">-</span> setImmediate å›è°ƒ              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-number">6.</span> å…³é—­å›è°ƒï¼ˆ<span class="hljs-keyword">Close</span> Callbacksï¼‰      â”‚
â”‚     <span class="hljs-operator">-</span> socket.on(<span class="hljs-string">'close'</span>)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setTimeout'</span>), <span class="hljs-number">0</span>);
<span class="hljs-title function_">setImmediate</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setImmediate'</span>));

<span class="hljs-comment">// è¾“å‡ºé¡ºåºå¯èƒ½ä¸åŒï¼Œå–å†³äºæ‰§è¡Œä¸Šä¸‹æ–‡</span>
<span class="hljs-comment">// ä½†åœ¨ I/O å›è°ƒä¸­ï¼ŒsetImmediate æ€»æ˜¯å…ˆäº setTimeout æ‰§è¡Œ</span>
</code></pre>
<h3 data-id="heading-87">5.7 æ€»ç»“ï¼šäº‹ä»¶é©±åŠ¨çš„é‡è¦æ€§</h3>
<ul>
<li><strong>äº‹ä»¶é©±åŠ¨æ˜¯ Node.js çš„æ ¸å¿ƒ</strong>ï¼šæ‰€æœ‰å¼‚æ­¥æ“ä½œéƒ½åŸºäºäº‹ä»¶é©±åŠ¨</li>
<li><strong>é«˜æ•ˆä¸”èµ„æºå‹å¥½</strong>ï¼šåªåœ¨éœ€è¦æ—¶å¤„ç†ï¼Œä¸éœ€è¦æ—¶ä¼‘çœ </li>
<li><strong>é€‚åˆç°ä»£åº”ç”¨</strong>ï¼šå®æ—¶åº”ç”¨ã€é«˜å¹¶å‘åº”ç”¨çš„é¦–é€‰</li>
<li><strong>ç®€åŒ–ç¼–ç¨‹æ¨¡å‹</strong>ï¼šé€šè¿‡äº‹ä»¶å’Œå›è°ƒï¼Œä»£ç æ›´æ¸…æ™°æ˜“ç»´æŠ¤</li>
</ul>
<hr/>
<h2 data-id="heading-88">å…­ã€æ ¸å¿ƒæ¦‚å¿µä¹‹é—´çš„å…³ç³»</h2>
<h3 data-id="heading-89">6.1 ååŒå·¥ä½œï¼šå››ä¸ªæ ¸å¿ƒç‰¹æ€§çš„é…åˆ</h3>
<p>Node.js çš„æ ¸å¿ƒç‰¹æ€§ä¸æ˜¯ç‹¬ç«‹å·¥ä½œçš„ï¼Œå®ƒä»¬ç›¸äº’é…åˆï¼Œå…±åŒæ„æˆäº†é«˜æ•ˆçš„è¿è¡Œæ—¶ç¯å¢ƒã€‚</p>
<h4 data-id="heading-90">6.1.1 æ•´ä½“åä½œæµç¨‹</h4>
<pre><code class="hljs language-css" lang="css">ç”¨æˆ·è¯·æ±‚/äº‹ä»¶
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  äº‹ä»¶é©±åŠ¨æ¶æ„                        â”‚
â”‚  - æ¥æ”¶äº‹ä»¶                          â”‚
â”‚  - æ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éé˜»å¡ <span class="hljs-selector-tag">I</span>/O                          â”‚
â”‚  - å‘èµ· <span class="hljs-selector-tag">I</span>/O æ“ä½œ                     â”‚
â”‚  - ä¸ç­‰å¾…ï¼Œç«‹å³è¿”å›                  â”‚
â”‚  - äº¤ç»™ç³»ç»Ÿå†…æ ¸å¤„ç†                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å•çº¿ç¨‹æ¨¡å‹                          â”‚
â”‚  - ä¸»çº¿ç¨‹ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡             â”‚
â”‚  - ä¸é˜»å¡ï¼Œä¿æŒå“åº”                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  V8 å¼•æ“                             â”‚
â”‚  - æ‰§è¡Œ JavaScript ä»£ç               â”‚
â”‚  - ä¼˜åŒ–æ€§èƒ½                          â”‚
â”‚  - ç®¡ç†å†…å­˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-91">6.1.2 å„ç‰¹æ€§çš„ä½œç”¨</h4>
<p><strong>V8 å¼•æ“</strong>ï¼š</p>
<ul>
<li>æä¾›é«˜æ€§èƒ½çš„ JavaScript æ‰§è¡Œèƒ½åŠ›</li>
<li>å°† JavaScript ä»£ç ç¼–è¯‘ä¸ºæœºå™¨ç </li>
<li>ä¼˜åŒ–ä»£ç æ‰§è¡Œï¼Œç®¡ç†å†…å­˜</li>
</ul>
<p><strong>å•çº¿ç¨‹æ¨¡å‹</strong>ï¼š</p>
<ul>
<li>ç®€åŒ–ç¼–ç¨‹æ¨¡å‹ï¼Œé¿å…çº¿ç¨‹åŒæ­¥é—®é¢˜</li>
<li>ä¸»çº¿ç¨‹è´Ÿè´£åè°ƒå’Œè°ƒåº¦</li>
<li>é€šè¿‡å¼‚æ­¥æ“ä½œå®ç°å¹¶å‘</li>
</ul>
<p><strong>éé˜»å¡ I/O</strong>ï¼š</p>
<ul>
<li>å…è®¸é«˜æ•ˆå¤„ç†å¤§é‡å¹¶å‘ I/O æ“ä½œ</li>
<li>å°† I/O æ“ä½œäº¤ç»™ç³»ç»Ÿå†…æ ¸å¤„ç†</li>
<li>ä¸é˜»å¡ä¸»çº¿ç¨‹ï¼Œä¿æŒå“åº”æ€§</li>
</ul>
<p><strong>äº‹ä»¶é©±åŠ¨</strong>ï¼š</p>
<ul>
<li>é€šè¿‡äº‹ä»¶å¾ªç¯ç®¡ç†å¼‚æ­¥æ“ä½œå’Œå›è°ƒ</li>
<li>åè°ƒæ‰€æœ‰å¼‚æ­¥æ“ä½œ</li>
<li>å®ç°é«˜æ•ˆçš„å¹¶å‘å¤„ç†</li>
</ul>
<h3 data-id="heading-92">6.2 æ•´ä½“æ¶æ„ä¸æ•°æ®æµå‘</h3>
<h4 data-id="heading-93">6.2.1 å®Œæ•´æ¶æ„å›¾</h4>
<pre><code class="hljs language-vbnet" lang="vbnet">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ä½ çš„ JavaScript åº”ç”¨ä»£ç               â”‚
â”‚        (ä¸šåŠ¡é€»è¾‘ã€API è·¯ç”±ç­‰)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           V8 JavaScript å¼•æ“                 â”‚
â”‚        - è§£æå’Œæ‰§è¡Œ JavaScript               â”‚
â”‚        - JIT ç¼–è¯‘ä¼˜åŒ–                        â”‚
â”‚        - åƒåœ¾å›æ”¶                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Node.js æ ¸å¿ƒæ¨¡å—                     â”‚
â”‚    fs, http, https, events, stream,          â”‚
â”‚    path, os, crypto, buffer, ...            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           libuv åº“ (C++)                     â”‚
â”‚    - äº‹ä»¶å¾ªç¯ï¼ˆ<span class="hljs-keyword">Event</span> <span class="hljs-keyword">Loop</span>ï¼‰                  â”‚
â”‚    - çº¿ç¨‹æ± ï¼ˆThread Poolï¼‰                   â”‚
â”‚    - å¼‚æ­¥ I/Oï¼ˆ<span class="hljs-keyword">Async</span> I/Oï¼‰                   â”‚
â”‚    - å®šæ—¶å™¨ï¼ˆTimersï¼‰                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           æ“ä½œç³»ç»Ÿå†…æ ¸                       â”‚
â”‚    - æ–‡ä»¶ç³»ç»Ÿ                                â”‚
â”‚    - ç½‘ç»œåè®®æ ˆ                              â”‚
â”‚    - è¿›ç¨‹ç®¡ç†                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-94">6.2.2 æ•°æ®æµå‘ç¤ºä¾‹</h4>
<p><strong>HTTP è¯·æ±‚å¤„ç†æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> å®¢æˆ·ç«¯å‘é€ HTTP è¯·æ±‚
   â†“
<span class="hljs-bullet">2.</span> æ“ä½œç³»ç»Ÿå†…æ ¸æ¥æ”¶ç½‘ç»œæ•°æ®åŒ…
   â†“
<span class="hljs-bullet">3.</span> libuv æ£€æµ‹åˆ°ç½‘ç»œäº‹ä»¶ï¼Œæ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—
   â†“
<span class="hljs-bullet">4.</span> äº‹ä»¶å¾ªç¯å–å‡ºäº‹ä»¶ï¼Œè°ƒç”¨ Node.js HTTP æ¨¡å—
   â†“
<span class="hljs-bullet">5.</span> HTTP æ¨¡å—è§¦å‘ 'request' äº‹ä»¶
   â†“
<span class="hljs-bullet">6.</span> ä½ çš„ä»£ç ï¼ˆäº‹ä»¶ç›‘å¬å™¨ï¼‰å¤„ç†è¯·æ±‚
   â†“
<span class="hljs-bullet">7.</span> V8 å¼•æ“æ‰§è¡Œä½ çš„ JavaScript ä»£ç 
   â†“
<span class="hljs-bullet">8.</span> å¦‚æœéœ€è¦è¯»å–æ–‡ä»¶ï¼Œå‘èµ·éé˜»å¡ I/O
   â†“
<span class="hljs-bullet">9.</span> libuv å°†æ–‡ä»¶æ“ä½œäº¤ç»™çº¿ç¨‹æ± 
   â†“
<span class="hljs-bullet">10.</span> æ–‡ä»¶è¯»å–å®Œæˆï¼Œè§¦å‘å›è°ƒäº‹ä»¶
   â†“
<span class="hljs-bullet">11.</span> äº‹ä»¶å¾ªç¯æ‰§è¡Œå›è°ƒï¼Œè¿”å›å“åº”ç»™å®¢æˆ·ç«¯
</code></pre>
<h3 data-id="heading-95">6.3 æ€§èƒ½å¯¹æ¯”ï¼šä¼ ç»Ÿ vs Node.js</h3>
<p><strong>ä¼ ç»Ÿå¤šçº¿ç¨‹æœåŠ¡å™¨ï¼ˆå¦‚ Apacheï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">1000 ä¸ªå¹¶å‘è¯·æ±‚
  â†“
éœ€è¦ 1000 ä¸ªçº¿ç¨‹ï¼ˆæ¯ä¸ªè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹ï¼‰
  â†“
å†…å­˜å ç”¨ï¼š1000 Ã— <span class="hljs-attr">2MB</span> = <span class="hljs-number">2</span>GB
CPU å¼€é”€ï¼šå¤§é‡ä¸Šä¸‹æ–‡åˆ‡æ¢
</code></pre>
<p><strong>Node.js å•çº¿ç¨‹æœåŠ¡å™¨</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">1000</span> <span class="hljs-string">ä¸ªå¹¶å‘è¯·æ±‚</span>
  <span class="hljs-string">â†“</span>
<span class="hljs-string">åªéœ€è¦</span> <span class="hljs-number">1</span> <span class="hljs-string">ä¸ªä¸»çº¿ç¨‹</span> <span class="hljs-string">+</span> <span class="hljs-string">å°‘é‡å·¥ä½œçº¿ç¨‹</span>
  <span class="hljs-string">â†“</span>
<span class="hljs-string">å†…å­˜å ç”¨ï¼šçº¦</span> <span class="hljs-string">50MB</span>
<span class="hljs-string">CPU</span> <span class="hljs-string">å¼€é”€ï¼šæœ€å°åŒ–ï¼Œæ— ä¸Šä¸‹æ–‡åˆ‡æ¢</span>
</code></pre>
<h3 data-id="heading-96">6.4 æœ€ä½³å®è·µå»ºè®®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… å¥½çš„åšæ³•ï¼šå¹¶è¡Œå¤„ç†å¤šä¸ª I/O æ“ä½œ</span>
<span class="hljs-keyword">const</span> [user, posts, comments] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
  db.<span class="hljs-title function_">getUser</span>(userId),
  db.<span class="hljs-title function_">getPosts</span>(userId),
  db.<span class="hljs-title function_">getComments</span>(userId)
]);

<span class="hljs-comment">// âŒ é¿å…ï¼šåŒæ­¥é˜»å¡æ“ä½œ</span>
<span class="hljs-keyword">const</span> data = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'large-file.txt'</span>);
<span class="hljs-comment">// âœ… å¥½çš„åšæ³•ï¼šå¼‚æ­¥éé˜»å¡æ“ä½œ</span>
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'large-file.txt'</span>, <span class="hljs-string">'utf8'</span>);
</code></pre>
<h3 data-id="heading-97">6.5 æ€»ç»“ï¼šæ ¸å¿ƒç‰¹æ€§çš„ååŒ</h3>
<p>Node.js çš„å››ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼ˆV8 å¼•æ“ã€å•çº¿ç¨‹ã€éé˜»å¡ I/Oã€äº‹ä»¶é©±åŠ¨ï¼‰ä¸æ˜¯ç‹¬ç«‹å·¥ä½œçš„ï¼Œè€Œæ˜¯ç›¸äº’é…åˆï¼š</p>
<ul>
<li><strong>V8 å¼•æ“</strong>æä¾›æ‰§è¡Œèƒ½åŠ›</li>
<li><strong>å•çº¿ç¨‹</strong>ç®€åŒ–ç¼–ç¨‹æ¨¡å‹</li>
<li><strong>éé˜»å¡ I/O</strong>å®ç°é«˜æ•ˆå¹¶å‘</li>
<li><strong>äº‹ä»¶é©±åŠ¨</strong>åè°ƒæ‰€æœ‰æ“ä½œ</li>
</ul>
<p>è¿™ç§è®¾è®¡ä½¿å¾— Node.js èƒ½å¤Ÿï¼š</p>
<ul>
<li>é«˜æ•ˆå¤„ç†å¤§é‡å¹¶å‘è¿æ¥</li>
<li>èµ„æºä½¿ç”¨æ›´é«˜æ•ˆ</li>
<li>ç¼–ç¨‹æ¨¡å‹æ›´ç®€å•</li>
<li>é€‚åˆç°ä»£ Web åº”ç”¨çš„éœ€æ±‚</li>
</ul>
<hr/>
<h2 data-id="heading-98">ä¸ƒã€æ€»ç»“</h2>
<h3 data-id="heading-99">7.1 æ ¸å¿ƒç‰¹æ€§å›é¡¾</h3>
<p>Node.js é€šè¿‡ç»“åˆä»¥ä¸‹å››ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼Œæä¾›äº†ä¸€ä¸ªé«˜æ•ˆã€å¯æ‰©å±•çš„æœåŠ¡å™¨ç«¯ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼š</p>
<h4 data-id="heading-100">1. V8 å¼•æ“</h4>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæä¾›é«˜æ€§èƒ½çš„ JavaScript æ‰§è¡Œèƒ½åŠ›</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šJIT ç¼–è¯‘ã€ä»£ç ä¼˜åŒ–ã€å†…å­˜ç®¡ç†</li>
<li><strong>ä»·å€¼</strong>ï¼šè®© JavaScript åœ¨æœåŠ¡å™¨ç«¯ä¹Ÿèƒ½é«˜æ•ˆè¿è¡Œ</li>
</ul>
<h4 data-id="heading-101">2. å•çº¿ç¨‹æ¨¡å‹</h4>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šç®€åŒ–å¹¶å‘ç¼–ç¨‹ï¼Œé¿å…çº¿ç¨‹åŒæ­¥é—®é¢˜</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¸»çº¿ç¨‹å•ä¸€ã€åå°çº¿ç¨‹æ± ã€ç³»ç»Ÿå†…æ ¸å¤šçº¿ç¨‹</li>
<li><strong>ä»·å€¼</strong>ï¼šç¼–ç¨‹ç®€å•ã€èµ„æºé«˜æ•ˆã€æ— é”ç«äº‰</li>
</ul>
<h4 data-id="heading-102">3. éé˜»å¡ I/O</h4>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šé«˜æ•ˆå¤„ç†å¤§é‡å¹¶å‘ I/O æ“ä½œ</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå¼‚æ­¥æ‰§è¡Œã€ä¸é˜»å¡ä¸»çº¿ç¨‹ã€å……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æº</li>
<li><strong>ä»·å€¼</strong>ï¼šé«˜å¹¶å‘ã€ä½å»¶è¿Ÿã€èµ„æºé«˜æ•ˆ</li>
</ul>
<h4 data-id="heading-103">4. äº‹ä»¶é©±åŠ¨æ¶æ„</h4>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šé€šè¿‡äº‹ä»¶å¾ªç¯ç®¡ç†å¼‚æ­¥æ“ä½œå’Œå›è°ƒ</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šäº‹ä»¶é˜Ÿåˆ—ã€å›è°ƒæœºåˆ¶ã€é«˜æ•ˆè°ƒåº¦</li>
<li><strong>ä»·å€¼</strong>ï¼šå®æ—¶å“åº”ã€èµ„æºèŠ‚çº¦ã€å¯æ‰©å±•</li>
</ul>
<h3 data-id="heading-104">7.2 Node.js çš„ä»·å€¼</h3>
<ul>
<li><strong>ç»Ÿä¸€æŠ€æœ¯æ ˆ</strong>ï¼šå‰åç«¯éƒ½ä½¿ç”¨ JavaScriptï¼Œé™ä½å­¦ä¹ æˆæœ¬</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šäº‹ä»¶é©±åŠ¨å’Œéé˜»å¡ I/O å¸¦æ¥å‡ºè‰²çš„æ€§èƒ½</li>
<li><strong>ç”Ÿæ€ä¸°å¯Œ</strong>ï¼šnpm æ‹¥æœ‰æ•°ç™¾ä¸‡ä¸ªåŒ…ï¼Œç”Ÿæ€éå¸¸ä¸°å¯Œ</li>
<li><strong>å¼€å‘æ•ˆç‡é«˜</strong>ï¼šä»£ç ç®€æ´ã€å¼€å‘å¿«é€Ÿ</li>
<li><strong>æ˜“äºç»´æŠ¤</strong>ï¼šä»£ç ç®€æ´ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤</li>
</ul>
<hr/>
<p><strong>è®°ä½</strong>ï¼šNode.js çš„æ ¸å¿ƒæ˜¯<strong>äº‹ä»¶é©±åŠ¨</strong>å’Œ<strong>éé˜»å¡ I/O</strong>ï¼Œç†è§£è¿™ä¸¤ä¸ªæ¦‚å¿µæ˜¯æŒæ¡ Node.js çš„å…³é”®ã€‚</p>
<hr/>
<h2 data-id="heading-105">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2F" target="_blank" title="https://nodejs.org/" ref="nofollow noopener noreferrer">Node.js å®˜æ–¹ç½‘ç«™</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3schools.com%2Fnodejs%2Fdefault.asp" target="_blank" title="https://www.w3schools.com/nodejs/default.asp" ref="nofollow noopener noreferrer">W3Schools Node.js æ•™ç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fv8.dev%2F" target="_blank" title="https://v8.dev/" ref="nofollow noopener noreferrer">V8 JavaScript å¼•æ“</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é—­åŒ…ã€æ ˆå †ä¸ç±»å‹ä¹‹è°œï¼šJS å†…å­˜æœºåˆ¶å…¨è§£å¯†ï¼Œé¢è¯•å®˜éƒ½æƒŠäº†ï¼]]></title>    <link>https://juejin.cn/post/7581872532363362313</link>    <guid>https://juejin.cn/post/7581872532363362313</guid>    <pubDate>2025-12-10T09:31:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581872532363362313" data-draft-id="7581888578538176550" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é—­åŒ…ã€æ ˆå †ä¸ç±»å‹ä¹‹è°œï¼šJS å†…å­˜æœºåˆ¶å…¨è§£å¯†ï¼Œé¢è¯•å®˜éƒ½æƒŠäº†ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-10T09:31:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é™³é™ˆé™³"/> <meta itemprop="url" content="https://juejin.cn/user/3942169763381875"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é—­åŒ…ã€æ ˆå †ä¸ç±»å‹ä¹‹è°œï¼šJS å†…å­˜æœºåˆ¶å…¨è§£å¯†ï¼Œé¢è¯•å®˜éƒ½æƒŠäº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3942169763381875/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é™³é™ˆé™³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:31:05.000Z" title="Wed Dec 10 2025 09:31:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>â€œé—­åŒ…ã€æ ˆå †ä¸ç±»å‹ä¹‹è°œï¼šJS å†…å­˜æœºåˆ¶å…¨è§£å¯†ï¼Œé¢è¯•å®˜éƒ½æƒŠäº†ï¼â€</strong></h2>
<hr/>
<h3 data-id="heading-1">å¼•å­ï¼šä¸ºä»€ä¹ˆä½ çš„ JS ä»£ç åœ¨â€œå·å·â€æ“ä½œå†…å­˜ï¼Ÿ</h3>
<p>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå½“ä½ å†™ä¸‹ <code>var a = { name: 'æå®¢æ—¶é—´' }</code> çš„æ—¶å€™ï¼ŒJavaScript å¼•æ“å…¶å®åœ¨èƒŒåæ‚„æ‚„åœ°åšäº†ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>åœ¨ <strong>æ ˆå†…å­˜</strong> ä¸­å­˜äº†ä¸€ä¸ªåœ°å€ï¼›</li>
<li>åœ¨ <strong>å †å†…å­˜</strong> ä¸­çœŸæ­£åˆ›å»ºäº†å¯¹è±¡ã€‚</li>
</ol>
<p>è€Œå½“ä½ æ‰§è¡Œ <code>a.name = 'æå®¢é‚¦'</code>ï¼Œä¸ä»…æ”¹å˜äº†å¯¹è±¡å†…å®¹ï¼Œè¿˜å¯èƒ½è®©å¦ä¸€ä¸ªå˜é‡ <code>b</code> åŒæ­¥æ›´æ–°â€”â€”è¿™ä¸€åˆ‡çš„èƒŒåï¼Œæ˜¯ JavaScript å†…å­˜æ¨¡å‹åœ¨é»˜é»˜è¿ä½œã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»ä¸€æ®µçœ‹ä¼¼ç®€å•çš„ä»£ç å‡ºå‘ï¼Œæ·±å…¥å‰–æ JS çš„ <strong>å†…å­˜æœºåˆ¶ã€é—­åŒ…åŸç†ã€ç±»å‹ç³»ç»Ÿ</strong>ï¼Œå¹¶ç»“åˆ V8 å¼•æ“çš„åº•å±‚é€»è¾‘ï¼Œå½»åº•ææ‡‚è¿™äº›å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»æŒæ¡çš„æ ¸å¿ƒçŸ¥è¯†ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè¿™å¯èƒ½æ˜¯ä½ ç¦»å­—èŠ‚/é˜¿é‡Œ/è…¾è®¯å‰ç«¯å²—æœ€è¿‘çš„ä¸€ç¯‡æ–‡ç« ï¼</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€é—®é¢˜å¼•å…¥ï¼šä¸ºä»€ä¹ˆ <code>a = 2</code> ä¸å½±å“ <code>b</code>ï¼Œä½† <code>a.name = 'æå®¢é‚¦'</code> å´å½±å“äº† <code>b</code>ï¼Ÿ</h3>
<p>å…ˆçœ‹è¿™æ®µç»å…¸ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function foo() {
    var <span class="hljs-attr">a</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
    var <span class="hljs-attr">b</span> = a<span class="hljs-comment">; // æ‹·è´</span>
    <span class="hljs-attr">a</span> = <span class="hljs-number">2</span><span class="hljs-comment">;</span>
    console.log(a)<span class="hljs-comment">; // 2</span>
    console.log(b)<span class="hljs-comment">; // 1</span>
}
foo()<span class="hljs-comment">;</span>

function foo() {
    var <span class="hljs-attr">a</span> = {name:&amp;<span class="hljs-comment">#34;æå®¢æ—¶é—´&amp;#34;};</span>
    var <span class="hljs-attr">b</span> = a<span class="hljs-comment">; // å¼•ç”¨å¼æ‹·è´</span>
    <span class="hljs-attr">a.name</span> = <span class="hljs-string">'æå®¢é‚¦'</span><span class="hljs-comment">;</span>
    console.log(a)<span class="hljs-comment">; // {name:&amp;#34;æå®¢é‚¦&amp;#34;}</span>
    console.log(b)<span class="hljs-comment">; // {name:&amp;#34;æå®¢é‚¦&amp;#34;}</span>
}
foo()<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-3">ğŸ” ä¸ºä»€ä¹ˆè¡Œä¸ºä¸åŒï¼Ÿ</h3>
<ul>
<li>
<p><strong>ç¬¬ä¸€æ®µï¼ˆåŸå§‹ç±»å‹ï¼‰</strong>ï¼š<br/>
<code>a</code> å’Œ <code>b</code> æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„æ ˆå˜é‡ï¼Œå„è‡ªä¿å­˜äº†æ•°å€¼ <code>1</code> çš„å‰¯æœ¬ã€‚JavaScript ä¸­çš„åŸå§‹ç±»å‹ï¼ˆå¦‚ numberã€stringã€boolean ç­‰ï¼‰å…·æœ‰ <strong>å€¼è¯­ä¹‰ï¼ˆvalue semanticsï¼‰</strong> â€”â€” èµ‹å€¼æ“ä½œä¼šå°†å½“å‰å€¼å®Œæ•´åœ°å¤åˆ¶ç»™æ–°å˜é‡ã€‚å› æ­¤ï¼Œåç»­ä¿®æ”¹ <code>a</code> ä¸ä¼šå½±å“ <code>b</code>ã€‚</p>
</li>
<li>
<p><strong>ç¬¬äºŒæ®µï¼ˆå¯¹è±¡ç±»å‹ï¼‰</strong>ï¼š<br/>
<code>a</code> å’Œ <code>b</code> éƒ½æ˜¯æ ˆä¸­çš„å˜é‡ï¼Œä½†å®ƒä»¬çš„å€¼å¹¶ä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯<strong>æŒ‡å‘å †ä¸­åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼ˆå³å†…å­˜åœ°å€ï¼‰</strong>ã€‚èµ‹å€¼ <code>b = a</code> åªæ˜¯æŠŠå¼•ç”¨åœ°å€å¤åˆ¶ç»™äº† <code>b</code>ï¼Œä¸¤è€…ä»æŒ‡å‘å †ä¸­çš„åŒä¸€å—å¯¹è±¡å†…å­˜ã€‚å› æ­¤ï¼Œé€šè¿‡ä»»ä¸€å˜é‡ä¿®æ”¹å¯¹è±¡å±æ€§ï¼Œéƒ½ä¼šåæ˜ åˆ°åŒä¸€ä¸ªå¯¹è±¡ä¸Šã€‚</p>
</li>
</ul>
<h4 data-id="heading-4">ğŸ§  è¡¥å……å›¾ç¤ºè¾…åŠ©ç†è§£ï¼ˆæ–‡å­—ç‰ˆï¼‰ï¼š</h4>
<h5 data-id="heading-5">åŸå§‹ç±»å‹ï¼š</h5>
<pre><code class="hljs language-css" lang="css">æ ˆå†…å­˜ï¼š
â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-selector-tag">a</span>=<span class="hljs-number">1</span> â”‚     â”‚ <span class="hljs-selector-tag">b</span>=<span class="hljs-number">1</span> â”‚   â† ä¸¤ä¸ªç‹¬ç«‹çš„å€¼
â””â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”˜
</code></pre>
<h5 data-id="heading-6">å¼•ç”¨ç±»å‹ï¼š</h5>
<pre><code class="hljs language-css" lang="css">æ ˆå†…å­˜ï¼š            å †å†…å­˜ï¼š
â”Œâ”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-selector-tag">a</span> â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ { name: &amp;#<span class="hljs-number">34</span>;æå®¢é‚¦&amp;<span class="hljs-selector-id">#34</span>; }â”‚
â””â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”                   â–²
â”‚ <span class="hljs-selector-tag">b</span> â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”˜
</code></pre>
<blockquote>
<p>ğŸ’¡ å…³é”®ç‚¹ï¼š<strong>å˜é‡ â‰  å¯¹è±¡</strong>ã€‚å˜é‡åªæ˜¯â€œæŒæœ‰â€å€¼æˆ–å¼•ç”¨çš„å®¹å™¨ã€‚</p>
</blockquote>
<blockquote>
<p>âœ… <strong>å…³é”®ç‚¹</strong> åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­å£°æ˜çš„<strong>å±€éƒ¨åŸå§‹ç±»å‹å˜é‡</strong>ï¼Œé€šå¸¸å­˜å‚¨åœ¨æ ˆå†…å­˜ä¸­ï¼›ä½†å¦‚æœè¢«é—­åŒ…å¼•ç”¨ï¼Œæˆ–ä½œä¸ºå…¨å±€å˜é‡ï¼Œåˆ™å¯èƒ½å­˜åœ¨äºå †ä¸­ï¼›<strong>å¤æ‚ç±»å‹ï¼ˆObject, Array, Function ç­‰ï¼‰</strong> å®é™…å­˜å‚¨åœ¨ <strong>å †å†…å­˜</strong>ï¼Œæ ˆä¸­åªå­˜å¼•ç”¨åœ°å€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">äºŒã€JS å†…å­˜æ¨¡å‹ï¼šæ ˆ vs å †ï¼Œè°ä¸»æ²‰æµ®ï¼Ÿ</h3>
<h4 data-id="heading-8">ğŸ§  ä¸ºä»€ä¹ˆè¦æœ‰æ ˆå’Œå †ï¼Ÿâ€”â€”æ€§èƒ½ä¸ç”Ÿå‘½å‘¨æœŸçš„æƒè¡¡</h4>
<p>JavaScript å¼•æ“ï¼ˆå¦‚ V8ï¼‰åœ¨æ‰§è¡Œä»£ç æ—¶ï¼Œéœ€è¦é«˜æ•ˆç®¡ç†å†…å­˜ã€‚ä¸ºäº†å…¼é¡¾<strong>è®¿é—®é€Ÿåº¦</strong>ã€<strong>å†…å­˜å®‰å…¨</strong>å’Œ<strong>èµ„æºå›æ”¶æ•ˆç‡</strong>ï¼Œå®ƒå°†å†…å­˜åˆ’åˆ†ä¸ºä¸¤ä¸ªä¸»è¦åŒºåŸŸï¼š<strong>æ ˆå†…å­˜ï¼ˆStackï¼‰</strong> å’Œ <strong>å †å†…å­˜ï¼ˆHeapï¼‰</strong> ã€‚è¿™ç§è®¾è®¡å¹¶é JS ç‹¬æœ‰ï¼Œè€Œæ˜¯æºäºè®¡ç®—æœºä½“ç³»ç»“æ„çš„ç»å…¸èŒƒå¼ã€‚</p>
<h5 data-id="heading-9">âœ… æ ˆå†…å­˜ï¼ˆStackï¼‰</h5>
<ul>
<li>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>å®¹é‡å°ä½†è®¿é—®æå¿«</strong>ï¼šç”± CPU ç›´æ¥æ”¯æŒï¼Œé€šè¿‡æ ˆæŒ‡é’ˆï¼ˆstack pointerï¼‰è¿›è¡Œå‹æ ˆ/å¼¹æ ˆæ“ä½œã€‚</li>
<li><strong>å†…å­˜è¿ç»­</strong>ï¼šåˆ†é…å’Œé‡Šæ”¾åªéœ€ç§»åŠ¨æ ˆé¡¶æŒ‡é’ˆï¼Œæ— éœ€å¤æ‚å¯»å€ã€‚</li>
<li><strong>è‡ªåŠ¨ç®¡ç†</strong>ï¼šæ— éœ€æ‰‹åŠ¨é‡Šæ”¾ï¼Œéšå‡½æ•°è°ƒç”¨è‡ªåŠ¨å…¥æ ˆ/å‡ºæ ˆã€‚</li>
</ul>
</li>
<li>
<p><strong>å…³é”®æœºåˆ¶ï¼šæ ˆé¡¶æŒ‡é’ˆåç§»</strong><br/>
æ¯å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨ï¼ŒJS å¼•æ“ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ª<strong>æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ï¼Œå¹¶å°†è¯¥ä¸Šä¸‹æ–‡â€œå‹å…¥â€è°ƒç”¨æ ˆã€‚è¿™ä¸ªè¿‡ç¨‹<strong>å¹¶ä¸æ¶‰åŠå†…å­˜å¤åˆ¶æˆ–åŠ¨æ€åˆ†é…</strong>ï¼Œ<strong>å¼•æ“åªéœ€è°ƒæ•´æ ˆé¡¶æŒ‡é’ˆçš„ä½ç½®ï¼ˆé€šå¸¸å‘ä½åœ°å€æ–¹å‘ç§»åŠ¨ï¼‰ï¼Œåˆ’å‡ºä¸€å—è¿ç»­ç©ºé—´â€¦â€¦å‡½æ•°è¿”å›æ—¶ï¼ŒæŒ‡é’ˆæ¢å¤åŸä½ã€‚</strong>ï¼Œåˆ’å‡ºä¸€å—è¿ç»­ç©ºé—´ç”¨äºå­˜æ”¾å±€éƒ¨å˜é‡å’Œæ§åˆ¶ä¿¡æ¯ã€‚<br/>
å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå¼•æ“åªéœ€å°†æ ˆé¡¶æŒ‡é’ˆ<strong>å‘ä¸Šå›ç§»ç›¸åŒé•¿åº¦</strong>ï¼Œå³å¯â€œé‡Šæ”¾â€è¯¥ä¸Šä¸‹æ–‡â€”â€”æ•´ä¸ªè¿‡ç¨‹æ˜¯ O(1) çš„ï¼Œæå…¶é«˜æ•ˆã€‚</p>
</li>
<li>
<p><strong>å­˜æ”¾å†…å®¹</strong>ï¼š</p>
<ul>
<li>å‡½æ•°è°ƒç”¨å½¢æˆçš„<strong>æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ï¼ˆExecution Contextï¼‰</li>
<li>å±€éƒ¨å˜é‡ä¸­çš„<strong>åŸå§‹ç±»å‹å€¼</strong></li>
<li>æŒ‡å‘å †ä¸­å¯¹è±¡çš„<strong>å¼•ç”¨åœ°å€</strong></li>
</ul>
</li>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š<br/>
ä¸¥æ ¼ç»‘å®šäºå‡½æ•°è°ƒç”¨å‘¨æœŸã€‚ç”±äºé‡Šæ”¾ä»…é æŒ‡é’ˆå›é€€ï¼Œ<strong>æ ˆå†…å­˜çš„å›æ”¶æ˜¯å³æ—¶ä¸”é›¶æˆæœ¬çš„</strong>ã€‚</p>
</li>
</ul>
<blockquote>
<p>ğŸ“Œ æ­£å› ä¸ºè¿™ç§åŸºäºæŒ‡é’ˆåç§»çš„æœºåˆ¶ï¼Œæ ˆæ‰èƒ½æ”¯æ’‘ JavaScript é«˜é¢‘çš„å‡½æ•°è°ƒç”¨ï¼ˆæ¯”å¦‚é€’å½’ã€äº‹ä»¶å›è°ƒï¼‰ï¼Œè€Œä¸ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</p>
</blockquote>
<blockquote>
<p>ğŸ“Œ ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">function <span class="hljs-title">foo</span>()</span> {
  <span class="hljs-keyword">var</span> x = <span class="hljs-number">42</span>;           <span class="hljs-comment">// x çš„å€¼ 42 å­˜åœ¨æ ˆä¸­</span>
  <span class="hljs-keyword">var</span> obj = { a: <span class="hljs-number">1</span> };   <span class="hljs-comment">// obj å˜é‡æœ¬èº«ï¼ˆå¼•ç”¨ï¼‰åœ¨æ ˆä¸­ï¼Œ{ a: 1 } åœ¨å †ä¸­</span>
}
</code></pre>
<p>å½“ <code>foo()</code> è¿”å›ï¼Œ<code>x</code> å’Œ <code>obj</code> çš„æ ˆå¸§è¢«æ¸…ç©ºï¼Œä½†å †ä¸­çš„ <code>{ a: 1 }</code> æ˜¯å¦å›æ”¶ï¼Œå–å†³äºæ˜¯å¦æœ‰å…¶ä»–å¼•ç”¨æŒ‡å‘å®ƒã€‚</p>
</blockquote>
<hr/>
<h5 data-id="heading-10">âœ… å †å†…å­˜ï¼ˆHeapï¼‰</h5>
<ul>
<li>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>å®¹é‡å¤§ä½†è®¿é—®è¾ƒæ…¢</strong>ï¼šå†…å­˜åˆ†é…ä¸è¿ç»­ï¼Œéœ€é€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®ã€‚</li>
<li><strong>åŠ¨æ€åˆ†é…</strong>ï¼šå¯¹è±¡å¤§å°ä¸ç¡®å®šï¼Œæ— æ³•é¢„çŸ¥ç”Ÿå‘½å‘¨æœŸã€‚</li>
<li><strong>ä¾èµ–åƒåœ¾å›æ”¶ï¼ˆGCï¼‰</strong> ï¼šå¼•æ“éœ€å®šæœŸæ‰«æå †å†…å­˜ï¼Œå›æ”¶â€œä¸å¯è¾¾â€å¯¹è±¡ã€‚</li>
</ul>
</li>
<li>
<p><strong>å­˜æ”¾å†…å®¹</strong>ï¼š</p>
<ul>
<li>æ‰€æœ‰<strong>å¤æ‚æ•°æ®ç±»å‹</strong>ï¼šå¯¹è±¡ï¼ˆObjectï¼‰ã€æ•°ç»„ï¼ˆArrayï¼‰ã€å‡½æ•°ï¼ˆFunctionï¼‰ç­‰</li>
<li><strong>é—­åŒ…æ•è·çš„è‡ªç”±å˜é‡</strong>ï¼ˆå½“å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å˜é‡æ—¶ï¼Œè¿™äº›å˜é‡ä¼šè¢«â€œæå‡â€åˆ°å †ä¸­ï¼Œå½¢æˆ closure å¯¹è±¡ï¼‰</li>
<li>å­—ç¬¦ä¸²ï¼ˆåœ¨æŸäº›å¼•æ“å®ç°ä¸­ï¼Œé•¿å­—ç¬¦ä¸²ä¹Ÿå¯èƒ½å­˜äºå †ï¼‰</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š</p>
<ul>
<li>ä¸ç”±å‡½æ•°è°ƒç”¨å†³å®šï¼Œè€Œç”±<strong>å¼•ç”¨å¯è¾¾æ€§</strong>å†³å®šã€‚åªè¦è¿˜æœ‰å˜é‡æˆ–ä½œç”¨åŸŸé“¾èƒ½è®¿é—®åˆ°è¯¥å¯¹è±¡ï¼Œå®ƒå°±å­˜æ´»ï¼›å¦åˆ™ï¼Œåœ¨ä¸‹ä¸€æ¬¡ GC æ—¶è¢«å›æ”¶ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h4 data-id="heading-11">ğŸ’¡ V8 å¼•æ“çš„è®¾è®¡å“²å­¦ï¼šä¸ºä»€ä¹ˆä¸èƒ½å…¨æ”¾æ ˆé‡Œï¼Ÿ</h4>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šå¦‚æœæ¯æ¬¡è°ƒç”¨å‡½æ•°éƒ½è¦æŠŠæ•´ä¸ªå¯¹è±¡ï¼ˆæ¯”å¦‚ä¸€ä¸ª 10MB çš„å›¾ç‰‡æ•°æ®ç»“æ„ï¼‰å®Œæ•´æ‹·è´è¿›æ ˆï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<ul>
<li><strong>ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬å‰§å¢</strong>ï¼šå‡½æ•°è°ƒç”¨/è¿”å›æ—¶éœ€å¤åˆ¶å¤§é‡æ•°æ®ï¼Œä¸¥é‡æ‹–æ…¢æ‰§è¡Œé€Ÿåº¦ã€‚</li>
<li><strong>æ ˆæº¢å‡ºé£é™©é«˜</strong>ï¼šæ ˆç©ºé—´é€šå¸¸åªæœ‰å‡  MBï¼ˆå¦‚ Node.js é»˜è®¤çº¦ 1â€“2MBï¼‰ï¼Œå¤§å¯¹è±¡ææ˜“æ’‘çˆ†ã€‚</li>
<li><strong>å†…å­˜æµªè´¹</strong>ï¼šå¤šä¸ªå‡½æ•°è‹¥å…±äº«åŒä¸€å¯¹è±¡ï¼Œå„è‡ªæ‹·è´ä¸€ä»½ï¼Œæ—¢å†—ä½™åˆä½æ•ˆã€‚</li>
</ul>
<p>å› æ­¤ï¼ŒV8 é‡‡ç”¨â€œ<strong>è½»é‡æ”¾æ ˆï¼Œé‡é‡æ‰”å †</strong>â€çš„ç­–ç•¥ï¼š</p>
<ul>
<li>æ ˆåªä¿ç•™<strong>å¿«é€Ÿè®¿é—®çš„å°æ•°æ®</strong>å’Œ<strong>å¯¹è±¡å¼•ç”¨</strong>ï¼›</li>
<li>å †è´Ÿè´£æ‰˜ç®¡<strong>çœŸæ­£çš„æ•°æ®å®ä½“</strong>ï¼Œå¹¶é€šè¿‡é«˜æ•ˆçš„ GC æœºåˆ¶ï¼ˆå¦‚ Scavenger + Mark-Compactï¼‰ç®¡ç†ç”Ÿå‘½å‘¨æœŸã€‚</li>
</ul>
<blockquote>
<p>ğŸ”¥ è¿™ä¸ä»…æ˜¯å·¥ç¨‹å¦¥åï¼Œæ›´æ˜¯å¯¹<strong>æ—¶é—´å¤æ‚åº¦</strong>ä¸<strong>ç©ºé—´å¤æ‚åº¦</strong>çš„ç²¾å¦™å¹³è¡¡â€”â€”ä¹Ÿæ˜¯ç°ä»£é«˜æ€§èƒ½ JS å¼•æ“çš„æ ¸å¿ƒæ€æƒ³ä¹‹ä¸€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-12">ä¸‰ã€åŠ¨æ€å¼±ç±»å‹ï¼Ÿåˆ«è¢«â€œå¼±â€å­—éª—äº†ï¼</h3>
<pre><code class="hljs language-ini" lang="ini">var bar<span class="hljs-comment">;</span>
console.log(typeof bar)<span class="hljs-comment">; // &amp;#34;undefined&amp;#34;</span>
<span class="hljs-attr">bar</span> = <span class="hljs-number">12</span><span class="hljs-comment">;</span>
console.log(typeof bar)<span class="hljs-comment">; // &amp;#34;number&amp;#34;</span>
<span class="hljs-attr">bar</span> = &amp;<span class="hljs-comment">#34;æå®¢æ—¶é—´&amp;#34;;</span>
console.log(typeof bar)<span class="hljs-comment">; // &amp;#34;string&amp;#34;</span>
<span class="hljs-attr">bar</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
console.log(typeof bar)<span class="hljs-comment">; // &amp;#34;boolean&amp;#34;</span>
<span class="hljs-attr">bar</span> = null<span class="hljs-comment">;</span>
console.log(typeof bar)<span class="hljs-comment">; // &amp;#34;object&amp;#34; â† å†å² bugï¼</span>
</code></pre>
<h4 data-id="heading-13">ğŸ¤¯ ä¸ºä»€ä¹ˆ <code>typeof null === 'object'</code>ï¼Ÿ</h4>
<p>è¿™æ˜¯ JavaScript è¯ç”ŸåˆæœŸçš„ä¸€ä¸ª <strong>å†å²æ€§ bug</strong>ï¼š<br/>
åœ¨åº•å±‚å®ç°ä¸­ï¼Œå€¼çš„ç±»å‹é€šè¿‡ä½ä½æ ‡è®°ï¼Œè€Œ <code>null</code> çš„æœºå™¨ç å…¨ä¸º 0ï¼Œè¢«è¯¯åˆ¤ä¸ºå¯¹è±¡ç±»å‹ã€‚<strong>Brendan Eich åæ¥æ‰¿è®¤è¿™æ˜¯ä¸ªé”™è¯¯ï¼Œä½†ä¸ºäº†å…¼å®¹æ€§ä¸€ç›´ä¿ç•™è‡³ä»Šã€‚</strong></p>
<blockquote>
<p>âœ… æ­£ç¡®åˆ¤æ–­ <code>null</code> çš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// &amp;#34;[object Null]&amp;#34;</span>
</code></pre>
</blockquote>
<h4 data-id="heading-14">ğŸ“Œ JS æ˜¯åŠ¨æ€å¼±ç±»å‹è¯­è¨€ï¼Œæ„å‘³ç€ï¼š</h4>
<ul>
<li><strong>åŠ¨æ€</strong>ï¼šç±»å‹åœ¨è¿è¡Œæ—¶ç¡®å®šï¼Œæ— éœ€å£°æ˜</li>
<li><strong>å¼±ç±»å‹</strong>ï¼šéšå¼ç±»å‹è½¬æ¢é¢‘ç¹ï¼ˆå¦‚ <code>&amp;#34;1&amp;#34; + 2 === &amp;#34;12&amp;#34;</code>ï¼‰</li>
</ul>
<p>ä½†æ³¨æ„ï¼š <strong>â€œå¼±â€ â‰  â€œéšæ„â€</strong> ã€‚ç°ä»£ JSï¼ˆå°¤å…¶æ˜¯ TypeScriptï¼‰æ­£æœç€æ›´å¼ºçš„ç±»å‹çº¦æŸæ¼”è¿›ã€‚</p>
<hr/>
<h3 data-id="heading-15">å››ã€é—­åŒ…ï¼šä¸åªæ˜¯â€œèƒ½è®¿é—®å¤–å±‚å˜é‡â€ï¼Œè€Œæ˜¯â€œå†…å­˜çš„é­”æ³•â€</h3>
<p>æ¥çœ‹è¿™ä¸ªé—­åŒ…ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function foo() {
    var <span class="hljs-attr">myName</span> = &amp;<span class="hljs-comment">#34;æå®¢æ—¶é—´&amp;#34;;</span>
    let <span class="hljs-attr">test1</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
    const <span class="hljs-attr">test2</span> = <span class="hljs-number">2</span><span class="hljs-comment">;</span>
    var <span class="hljs-attr">innerBar</span> = { 
        setName: function(newName) { <span class="hljs-attr">myName</span> = newName<span class="hljs-comment">; },</span>
        getName: function() {
            console.log(test1)<span class="hljs-comment">;</span>
            return myName<span class="hljs-comment">;</span>
        }
    }<span class="hljs-comment">;</span>
    return innerBar<span class="hljs-comment">;</span>
}

var <span class="hljs-attr">bar</span> = foo()<span class="hljs-comment">;</span>
bar.setName(&amp;<span class="hljs-comment">#34;æå®¢é‚¦&amp;#34;);</span>
console.log(bar.getName())<span class="hljs-comment">; // &amp;#34;æå®¢é‚¦&amp;#34;</span>
</code></pre>
<h4 data-id="heading-16">ğŸ”¥ é—­åŒ…çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>å¾ˆå¤šäººè¯´ï¼šâ€œé—­åŒ…å°±æ˜¯å†…éƒ¨å‡½æ•°è®¿é—®å¤–éƒ¨å˜é‡â€ã€‚ä½†è¿™åªæ˜¯è¡¨è±¡ã€‚</p>
<p><strong>çœŸæ­£çš„æ ¸å¿ƒæ˜¯ï¼šå½“å†…éƒ¨å‡½æ•°è¢«è¿”å›æˆ–ä¼ é€’å‡ºå»åï¼Œå¤–éƒ¨å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡æœ¬åº”é”€æ¯ï¼Œä½†å› ä¸ºå†…éƒ¨å‡½æ•°ä»å¼•ç”¨äº†å…¶ä¸­çš„å˜é‡ï¼ŒV8 å¼•æ“ä¼šå°†è¿™äº›å˜é‡ä»æ ˆâ€œæå‡â€åˆ°å †ä¸­ï¼Œå½¢æˆä¸€ä¸ªå« <code>closure(foo)</code> çš„ç‰¹æ®Šå¯¹è±¡ã€‚</strong></p>
<blockquote>
<p>âœ… <strong>V8 ä¸­çš„é—­åŒ…å®ç°</strong>ï¼š</p>
<ul>
<li>ç¼–è¯‘é˜¶æ®µæ‰«æå†…éƒ¨å‡½æ•°ï¼Œè¯†åˆ«â€œè‡ªç”±å˜é‡â€ï¼ˆå¦‚ <code>myName</code>, <code>test1</code>ï¼‰</li>
<li>è‹¥å­˜åœ¨é—­åŒ…ï¼Œå°±åœ¨å †ä¸­åˆ›å»º <code>closure</code> å¯¹è±¡</li>
<li>å†…éƒ¨å‡½æ•°çš„ <code>[[Scope]]</code> é“¾æŒ‡å‘è¯¥ <code>closure</code></li>
</ul>
<p>æ³¨æ„ï¼šåªæœ‰è¢«å†…éƒ¨å‡½æ•°<strong>å®é™…ä½¿ç”¨</strong>çš„å¤–éƒ¨å˜é‡æ‰ä¼šè¢«é—­åŒ…æ•è·ï¼Œæœªä½¿ç”¨çš„å˜é‡ï¼ˆå¦‚ <code>test2</code>ï¼‰ä¸ä¼šè¿›å…¥å †ï¼Œé¿å…ä¸å¿…è¦çš„å†…å­˜å ç”¨</p>
</blockquote>
<p>å› æ­¤ï¼Œå³ä½¿ <code>foo()</code> æ‰§è¡Œå®Œæ¯•ï¼Œ<code>myName</code> ä¹Ÿä¸ä¼šè¢«æ ˆå›æ”¶ï¼Œè€Œæ˜¯ç”±å †ä¸­çš„é—­åŒ…æŒæœ‰â€”â€”è¿™å°±æ˜¯ <strong>å†…å­˜æ³„æ¼çš„æ½œåœ¨æºå¤´</strong>ï¼</p>
<hr/>
<h3 data-id="heading-17">äº”ã€å»¶ä¼¸æ€è€ƒï¼šè¿™äº›çŸ¥è¯†ç‚¹å¦‚ä½•å…³è”é«˜é¢‘é¢è¯•é¢˜ï¼Ÿ</h3>





























<table><thead><tr><th>é¢è¯•é¢˜</th><th>å…³è”çŸ¥è¯†ç‚¹</th></tr></thead><tbody><tr><td><strong>JS æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ<code>null</code> ä¸ºä»€ä¹ˆæ˜¯ objectï¼Ÿ</strong></td><td>ç±»å‹ç³»ç»Ÿã€å†å² bug</td></tr><tr><td><strong>åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«ï¼Ÿ</strong></td><td>æ ˆ vs å †å†…å­˜æ¨¡å‹</td></tr><tr><td><strong>ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿé—­åŒ…ä¼šå¯¼è‡´å†…å­˜æ³„æ¼å—ï¼Ÿ</strong></td><td>é—­åŒ…çš„å†…å­˜å®ç°ã€GC æœºåˆ¶</td></tr><tr><td><strong><code>let</code>/<code>const</code> å’Œ <code>var</code> åœ¨å†…å­˜ä¸­æœ‰åŒºåˆ«å—ï¼Ÿ</strong></td><td>è¯æ³•ç¯å¢ƒ vs å˜é‡ç¯å¢ƒï¼ˆES6 å <code>let/const</code> å­˜äºè¯æ³•ç¯å¢ƒï¼Œä¸æå‡ï¼‰</td></tr><tr><td><strong>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºæ•°ç»„ï¼Ÿ</strong></td><td><code>Object.prototype.toString.call(arr)</code> â€”â€” å›  <code>typeof [] === 'object'</code></td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>åŠ åˆ†é¡¹</strong>ï¼šæåˆ° V8 çš„ <strong>Orinoco åƒåœ¾å›æ”¶å™¨</strong>ã€<strong>Scavengerï¼ˆæ–°ç”Ÿä»£ï¼‰</strong> ä¸ <strong>Mark-Compactï¼ˆè€ç”Ÿä»£ï¼‰</strong> ç®—æ³•ï¼Œè¯´æ˜ä½ å¯¹å¼•æ“æœ‰æ·±åº¦ç†è§£ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-18">å…­ã€ä»£ç ä¼˜åŒ–å»ºè®®ï¼šæœ‰æ²¡æœ‰æ›´å¥½çš„å†™æ³•ï¼Ÿ</h3>
<p>åŸé—­åŒ…ä»£ç æ²¡é—®é¢˜ï¼Œä½†å¯æ”¹è¿›ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ›´æ¸…æ™°çš„æ¨¡å—åŒ–å†™æ³•ï¼ˆé¿å…æš´éœ²å†…éƒ¨çŠ¶æ€ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createNameManager</span>(<span class="hljs-params">initialName</span>) {
    <span class="hljs-keyword">let</span> name = initialName;
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">setName</span>: <span class="hljs-function">(<span class="hljs-params">newName</span>) =&gt;</span> { name = newName; },
        <span class="hljs-attr">getName</span>: <span class="hljs-function">() =&gt;</span> name,
        <span class="hljs-comment">// ä¸æš´éœ² test1/test2ï¼Œé™¤éå¿…è¦</span>
    };
}
</code></pre>
<p>æˆ–è€…ä½¿ç”¨ <strong>WeakMap</strong> é¿å…å†…å­˜æ³„æ¼ï¼ˆé«˜çº§æŠ€å·§ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> privateData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NameManager</span>(<span class="hljs-params">name</span>) {
    privateData.<span class="hljs-title function_">set</span>(<span class="hljs-variable language_">this</span>, { name });
}
<span class="hljs-title class_">NameManager</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getName</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> privateData.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>).<span class="hljs-property">name</span>;
};
</code></pre>
<hr/>
<h3 data-id="heading-19">ç»“è¯­ï¼šæŒæ¡å†…å­˜ï¼Œæ‰èƒ½æŒæ§æ€§èƒ½</h3>
<p>JavaScript è™½ç„¶å±è”½äº†ç›´æ¥å†…å­˜æ“ä½œï¼Œä½† <strong>ç†è§£æ ˆä¸å †ã€é—­åŒ…ä¸ GCã€ç±»å‹ä¸å¼•ç”¨</strong>ï¼Œæ˜¯ä½ å†™å‡ºé«˜æ€§èƒ½ã€ä½å†…å­˜å ç”¨åº”ç”¨çš„å…³é”®ã€‚</p>
<p>ä¸‹æ¬¡é¢è¯•å®˜é—®ï¼šâ€œJS æ˜¯æ€ä¹ˆç®¡ç†å†…å­˜çš„ï¼Ÿâ€<br/>
ä½ å¯ä»¥å¾®å¾®ä¸€ç¬‘ï¼Œä»æ ˆå¸§è®²åˆ° V8 çš„ Orinocoï¼Œä»é—­åŒ…è®²åˆ° WeakMapâ€”â€”é‚£ä¸€åˆ»ï¼Œoffer å·²ç»åœ¨è·¯ä¸Šäº†ã€‚</p>
<blockquote>
<p>ğŸš€ <strong>è®°ä½</strong>ï¼šå‰ç«¯ä¸æ­¢æ˜¯å†™é¡µé¢ï¼Œæ›´æ˜¯ä¸å¼•æ“å…±èˆçš„è‰ºæœ¯ã€‚</p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[.NET8 å®æ—¶é€šä¿¡ç§˜ç±ï¼šWebSocket å…¨åŒå·¥é€šä¿¡ + åˆ†å¸ƒå¼æ¨é€ï¼Œä»£ç å®æ“å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7582036070158958592</link>    <guid>https://juejin.cn/post/7582036070158958592</guid>    <pubDate>2025-12-10T09:40:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582036070158958592" data-draft-id="7582021506189623342" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=".NET8 å®æ—¶é€šä¿¡ç§˜ç±ï¼šWebSocket å…¨åŒå·¥é€šä¿¡ + åˆ†å¸ƒå¼æ¨é€ï¼Œä»£ç å®æ“å…¨è§£æ"/> <meta itemprop="keywords" content="åç«¯,.NET"/> <meta itemprop="datePublished" content="2025-12-10T09:40:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¹Œæ‰_loong"/> <meta itemprop="url" content="https://juejin.cn/user/4256947657515320"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            .NET8 å®æ—¶é€šä¿¡ç§˜ç±ï¼šWebSocket å…¨åŒå·¥é€šä¿¡ + åˆ†å¸ƒå¼æ¨é€ï¼Œä»£ç å®æ“å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4256947657515320/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¹Œæ‰_loong
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:40:03.000Z" title="Wed Dec 10 2025 09:40:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨å½“ä»Šå®æ—¶äº¤äº’æ—¥ç›Šæˆä¸ºæ ¸å¿ƒéœ€æ±‚çš„ç½‘ç»œåº”ç”¨ç”Ÿæ€ä¸­ï¼Œä¼ ç»Ÿçš„ HTTP è¯·æ±‚-å“åº”æ¨¡å¼å·²éš¾ä»¥æ»¡è¶³å³æ—¶é€šè®¯ã€åœ¨çº¿åä½œã€å®æ—¶æ•°æ®æ¨é€ç­‰é«˜äº’åŠ¨æ€§åœºæ™¯ã€‚ä¸ºçªç ´è¿™ä¸€ç“¶é¢ˆï¼Œ<strong>WebSocket</strong>Â åè®®åº”è¿è€Œç”Ÿã€‚<br/>
ä½œä¸ºä¸€ç§å»ºç«‹åœ¨ TCP åŸºç¡€ä¸Šçš„å…¨åŒå·¥é€šä¿¡åè®®ï¼ŒWebSocket é€šè¿‡åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´å»ºç«‹æŒä¹…åŒ–çš„å•ä¸€è¿æ¥ï¼Œå®ç°äº†é«˜æ•ˆã€ä½å»¶è¿Ÿçš„åŒå‘å®æ—¶æ•°æ®ä¼ è¾“ã€‚å®ƒä¸ä»…å…‹æœäº†è½®è¯¢ä¸é•¿è½®è¯¢å¸¦æ¥çš„å»¶è¿Ÿé«˜ã€å¤´éƒ¨å¼€é”€å¤§ã€æœåŠ¡å™¨è´Ÿè½½é‡ç­‰å›ºæœ‰ç¼ºé™·ï¼Œæ›´ä»¥è½»é‡çº§çš„å¸§ç»“æ„å–ä»£äº†ç¹å¤çš„ HTTP è¯·æ±‚ï¼ŒçœŸæ­£è®©å®æ—¶äº¤äº’å˜å¾—ç®€æ´è€Œå¼ºå¤§ã€‚ä»å³æ—¶èŠå¤©ã€é‡‘èçœ‹æ¿åˆ°ååŒç¼–è¾‘ã€åœ¨çº¿æ¸¸æˆï¼ŒWebSocket å·²æˆä¸ºæ”¯æ’‘ç°ä»£å®æ—¶ Web åº”ç”¨çš„åŸºçŸ³æŠ€æœ¯ï¼ŒæŒç»­æ¨åŠ¨ç€äº¤äº’ä½“éªŒè¿ˆå‘çœŸæ­£çš„â€œå®æ—¶â€æ—¶ä»£ã€‚</p>
<h2 data-id="heading-1">WebSocketæ˜¯ä»€ä¹ˆ</h2>
<ul>
<li>å®ƒæ˜¯ä¸€ç§æŒä¹…åŒ–è¿æ¥åè®®ï¼šä¸€æ—¦å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹ WebSocket è¿æ¥ï¼Œè¯¥è¿æ¥å°†ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œç›´åˆ°æ˜¾å¼å…³é—­ã€‚</li>
<li>åŸºäº TCPï¼Œä½†ä¸ä¼ ç»Ÿçš„ HTTP ä¸åŒï¼Œå®ƒä¸éœ€è¦æ¯æ¬¡é€šä¿¡éƒ½é‡æ–°å»ºç«‹è¿æ¥ã€‚</li>
<li>ä½¿ç”¨ç®€å•çš„æ¡æ‰‹è¿‡ç¨‹ï¼ˆåŸºäº HTTP å‡çº§æœºåˆ¶ï¼‰ä» HTTP åˆ‡æ¢åˆ° WebSocket åè®®ã€‚</li>
<li>æ•°æ®å¯ä»¥ä»¥â€œæ¶ˆæ¯â€å½¢å¼åŒå‘ä¼ è¾“ï¼Œæ”¯æŒæ–‡æœ¬ï¼ˆå¦‚ JSONï¼‰å’ŒäºŒè¿›åˆ¶æ•°æ®ã€‚</li>
</ul>
<h3 data-id="heading-2">è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h3>
<p>åœ¨ WebSocket å‡ºç°ä¹‹å‰ï¼ŒWeb åº”ç”¨è‹¥æƒ³å®ç°â€œå®æ—¶é€šä¿¡â€ï¼Œé€šå¸¸ä½¿ç”¨ä»¥ä¸‹æŠ€æœ¯ï¼š</p>
<ol>
<li>è½®è¯¢ï¼ˆPollingï¼‰ï¼šå®¢æˆ·ç«¯å®šæ—¶å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¯¢é—®æ˜¯å¦æœ‰æ–°æ•°æ®ã€‚</li>
<li>é•¿è½®è¯¢ï¼ˆLong Pollingï¼‰ï¼šå®¢æˆ·ç«¯å‘é€è¯·æ±‚åï¼ŒæœåŠ¡å™¨ä¿æŒè¿æ¥ç›´åˆ°æœ‰æ•°æ®æ‰è¿”å›ã€‚</li>
<li>SSEï¼ˆServer-Sent Eventsï¼‰ï¼šä»…æ”¯æŒæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å•å‘æ¨é€ã€‚</li>
</ol>
<h3 data-id="heading-3">è¿™äº›æ–¹æ³•å­˜åœ¨æ˜æ˜¾ç¼ºç‚¹</h3>
<ul>
<li>å»¶è¿Ÿé«˜ï¼šè½®è¯¢æ— æ³•åšåˆ°çœŸæ­£å®æ—¶</li>
<li>èµ„æºæµªè´¹ï¼šé¢‘ç¹å»ºç«‹ HTTP è¯·æ±‚ï¼Œå¼€é”€å¤§ï¼ˆå¤´éƒ¨ä¿¡æ¯å¤šã€è¿æ¥åå¤åˆ›å»ºï¼‰</li>
<li>æ— æ³•åŒå‘é€šä¿¡ï¼šSSE ä»…æ”¯æŒæœåŠ¡å™¨æ¨ï¼›è½®è¯¢ä»æ˜¯â€œè¯·æ±‚-å“åº”â€æ¨¡å¼ã€‚</li>
</ul>
<h3 data-id="heading-4">ä¼˜åŠ¿ä¸è§£å†³çš„é—®é¢˜</h3>

























<table><thead><tr><th>é—®é¢˜</th><th>WebSocket å¦‚ä½•è§£å†³</th></tr></thead><tbody><tr><td>å®æ—¶æ€§å·®</td><td>å»ºç«‹æŒä¹…è¿æ¥ï¼Œæ•°æ®å¯å³æ—¶æ¨é€ï¼Œå»¶è¿Ÿæä½</td></tr><tr><td>é€šä¿¡å•å‘</td><td>æ”¯æŒå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä»»æ„ä¸€æ–¹ä¸»åŠ¨å‘é€æ•°æ®ï¼ˆå…¨åŒå·¥ï¼‰</td></tr><tr><td>é«˜å¼€é”€</td><td>æ¡æ‰‹åé€šä¿¡å¤´éƒ¨æå°ï¼ŒèŠ‚çœå¸¦å®½å’ŒæœåŠ¡å™¨èµ„æº</td></tr><tr><td>å¤šæ¬¡è¿æ¥æ¶ˆè€—</td><td>ä¸€ä¸ªè¿æ¥é•¿æœŸå¤ç”¨ï¼Œå‡å°‘ TCP æ¡æ‰‹å’Œ HTTP å¼€é”€</td></tr></tbody></table>
<h3 data-id="heading-5">å…¸å‹åº”ç”¨åœºæ™¯</h3>
<ul>
<li>èŠå¤©åº”ç”¨ï¼ˆå¦‚å¾®ä¿¡ç½‘é¡µç‰ˆï¼‰</li>
<li>åœ¨çº¿åä½œæ–‡æ¡£ç¼–è¾‘</li>
<li>å®æ—¶æ¸¸æˆ</li>
<li>è‚¡ç¥¨è¡Œæƒ…ã€å®æ—¶æ•°æ®ä»ªè¡¨ç›˜</li>
<li>è§†é¢‘å¼¹å¹•ç³»ç»Ÿ</li>
</ul>
<h2 data-id="heading-6">ä»£ç å®è·µ</h2>
<p>åˆ›å»ºwebsocketçš„ä¸­é—´ä»¶ <code>WebSocketMiddleware</code></p>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span>  `<span class="hljs-title">WebSocketMiddleware</span>`
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> RequestDelegate _next;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> WebSocketHandler _webSocketHandler;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">WebSocketMiddleware</span>(<span class="hljs-params">RequestDelegate next, WebSocketHandler webSocketHandler</span>)</span>
    {
        _next = next;
        _webSocketHandler = webSocketHandler;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">InvokeAsync</span>(<span class="hljs-params">HttpContext context</span>)</span>
    {
        <span class="hljs-keyword">if</span> (context.Request.Path == &amp;<span class="hljs-meta">#34;/ws&amp;#34;)</span>
        {
            <span class="hljs-keyword">if</span> (context.WebSockets.IsWebSocketRequest)
            {
                <span class="hljs-keyword">await</span> _webSocketHandler.HandleWebSocketAsync(context);
            }
            <span class="hljs-keyword">else</span>
            {
                context.Response.StatusCode = <span class="hljs-number">400</span>;
            }
        }
        <span class="hljs-keyword">else</span>
        {
            <span class="hljs-keyword">await</span> _next(context);
        }
    }
}
</code></pre>
<p>websocketå¤„ç†ç±»<code>WebSocketHandler</code>ï¼Œä»<code>cookie</code>ä¸­è·å–ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯æ¥é‰´æƒï¼ˆé¢„ç•™ä»£ç ï¼‰</p>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WebSocketHandler</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> WebSocketConnectionManager _connectionManager;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">WebSocketHandler</span>(<span class="hljs-params">WebSocketConnectionManager connectionManager</span>)</span>
    {
        _connectionManager = connectionManager;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">HandleWebSocketAsync</span>(<span class="hljs-params">HttpContext context</span>)</span>
    {
        <span class="hljs-comment">// ä» Cookie ä¸­è·å–èº«ä»½ä¿¡æ¯</span>
        <span class="hljs-keyword">var</span> userInfo = <span class="hljs-keyword">await</span> ValidateAndExtractUserInfo(context);
        <span class="hljs-keyword">if</span> (userInfo == <span class="hljs-literal">null</span>)
        {
            context.Response.StatusCode = <span class="hljs-number">401</span>;
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> webSocket = <span class="hljs-keyword">await</span> context.WebSockets.AcceptWebSocketAsync();
        <span class="hljs-keyword">var</span> connectionId = Guid.NewGuid().ToString();

        <span class="hljs-comment">// å°†è¿æ¥ä¸ç”¨æˆ·ä¿¡æ¯å…³è”å¹¶å­˜å‚¨</span>
        _connectionManager.AddConnection(connectionId, webSocket, userInfo);

        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-keyword">await</span> ProcessWebSocketMessages(connectionId, webSocket);
        }
        <span class="hljs-keyword">finally</span>
        {
            <span class="hljs-comment">// ç¡®ä¿è¿æ¥æ–­å¼€æ—¶æ¸…ç†èµ„æº</span>
            _connectionManager.RemoveConnection(connectionId);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">ValidateAndExtractUserInfo</span>(<span class="hljs-params">HttpContext context</span>)</span>
    {
        <span class="hljs-comment">// ä»è¯·æ±‚ä¸­æå– Cookie</span>
        <span class="hljs-comment">//if (!context.Request.Cookies.TryGetValue(&amp;#34;auth_token&amp;#34;, out var authToken))</span>
        <span class="hljs-comment">//{</span>
        <span class="hljs-comment">//    return null;</span>
        <span class="hljs-comment">//}</span>

        <span class="hljs-comment">// éªŒè¯èº«ä»½ä¿¡æ¯ï¼ˆæ­¤å¤„ä¸ºé¢„ç•™å®ç°ï¼‰</span>
        <span class="hljs-keyword">var</span> userInfo = <span class="hljs-keyword">await</span> ValidateAuthTokenAsync(&amp;<span class="hljs-meta">#34;authToken&amp;#34;);</span>
        <span class="hljs-keyword">return</span> userInfo;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">ValidateAuthTokenAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> authToken</span>)</span>
    {
        <span class="hljs-comment">// èº«ä»½éªŒè¯é€»è¾‘é¢„ç•™</span>
        <span class="hljs-comment">// å®é™…å®ç°å¯èƒ½åŒ…æ‹¬ JWT è§£æã€æ•°æ®åº“æŸ¥è¯¢ç­‰</span>
        <span class="hljs-keyword">await</span> Task.CompletedTask;

        <span class="hljs-comment">// ç¤ºä¾‹è¿”å›ï¼Œå®é™…åº”æ ¹æ®éªŒè¯ç»“æœè¿”å›</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UserInfo
        {
            Id = &amp;<span class="hljs-meta">#34;user123&amp;#34;,</span>
            UserName = &amp;<span class="hljs-meta">#34;zhangsan&amp;#34;,</span>
            ConnectedAt = DateTime.UtcNow
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">ProcessWebSocketMessages</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> connectionId, WebSocket webSocket</span>)</span>
    {
        <span class="hljs-keyword">var</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[<span class="hljs-number">1024</span> * <span class="hljs-number">4</span>];

        <span class="hljs-keyword">while</span> (webSocket.State == WebSocketState.Open)
        {
            <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> webSocket.ReceiveAsync(
                <span class="hljs-keyword">new</span> ArraySegment(buffer), CancellationToken.None);

            <span class="hljs-keyword">if</span> (result.MessageType == WebSocketMessageType.Close)
            {
                <span class="hljs-keyword">await</span> webSocket.CloseAsync(
                    WebSocketCloseStatus.NormalClosure,
                    &amp;<span class="hljs-meta">#34;Connection closed by client&amp;#34;,</span>
                    CancellationToken.None);
                <span class="hljs-keyword">break</span>;
            }

            <span class="hljs-comment">// å¤„ç†æ”¶åˆ°çš„æ¶ˆæ¯</span>
            <span class="hljs-keyword">await</span> HandleReceivedMessage(connectionId, buffer, result);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">HandleReceivedMessage</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> connectionId, <span class="hljs-built_in">byte</span>[] buffer, WebSocketReceiveResult result</span>)</span>
    {
        <span class="hljs-keyword">if</span> (result.MessageType == WebSocketMessageType.Text)
        {
            <span class="hljs-built_in">string</span> message = Encoding.UTF8.GetString(buffer, <span class="hljs-number">0</span>, result.Count);
            Console.WriteLine($&amp;<span class="hljs-meta">#34;Received message from {connectionId}: {message}&amp;#34;);</span>
        }
        <span class="hljs-comment">// æ¶ˆæ¯å¤„ç†é€»è¾‘</span>
        <span class="hljs-keyword">await</span> Task.CompletedTask;
    }
}
</code></pre>
<p><code>WebSocketConnectionManager</code>å­˜å‚¨ç”¨æˆ·çš„websocketè¿æ¥ä¿¡æ¯</p>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WebSocketConnectionManager</span>
{
    <span class="hljs-comment">// ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„å­—å…¸å­˜å‚¨ç”¨æˆ·è¿æ¥</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> ConcurrentDictionary&gt; _connections = <span class="hljs-keyword">new</span>();

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddConnection</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> connectionId, WebSocket webSocket, UserInfo user</span>)</span>
    {

        <span class="hljs-keyword">if</span> (_connections.ContainsKey(connectionId))
        {
            _connections[connectionId].Add(webSocket);
        }
        <span class="hljs-keyword">else</span>
        {
            _connections.TryAdd(connectionId, <span class="hljs-keyword">new</span> List() { webSocket });
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RemoveConnection</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> connectionId</span>)</span>
    {
        _connections.TryRemove(connectionId, <span class="hljs-keyword">out</span> _);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> List <span class="hljs-title">GetWebSocket</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> connectionId</span>)</span>
    {
        <span class="hljs-keyword">if</span> (!_connections.ContainsKey(connectionId))
        {
            <span class="hljs-keyword">return</span> [];
        }
        <span class="hljs-keyword">return</span> _connections.TryGetValue(connectionId, <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> socket) ? socket : [];
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerable <span class="hljs-title">GetAllSockets</span>()</span>
    {
        <span class="hljs-keyword">return</span> _connections.Values.SelectMany(list =&gt; list).ToList();
    }
}
</code></pre>
<p>program é…ç½®</p>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        <span class="hljs-keyword">var</span> builder = WebApplication.CreateBuilder(args);

        <span class="hljs-comment">// Add services to the container.</span>

        builder.Services.AddControllers();
        <span class="hljs-comment">// Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle</span>
        builder.Services.AddEndpointsApiExplorer();
        builder.Services.AddSwaggerGen();

        <span class="hljs-comment">// æ³¨å†ŒWebSocketHandlerä¸WebSocketConnectionManageråˆ°DI</span>
        builder.Services.AddTransient();
        <span class="hljs-comment">// WebSocketConnectionManagerè¦ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œå› ä¸ºWebSocketConnectionManagerä¸­å­˜å‚¨äº†æ‰€æœ‰WebSocketè¿æ¥</span>
        builder.Services.AddSingleton();

        <span class="hljs-keyword">var</span> app = builder.Build();

        <span class="hljs-comment">// Configure the HTTP request pipeline.</span>
        <span class="hljs-keyword">if</span> (app.Environment.IsDevelopment())
        {
            app.UseSwagger();
            app.UseSwaggerUI();
        }

        app.UseHttpsRedirection();

        app.UseAuthorization();

        app.MapControllers();
        <span class="hljs-comment">// å¯ç”¨websocket</span>
        app.UseWebSockets();
        <span class="hljs-comment">// æ³¨å†Œwebsocketä¸­é—´ä»¶</span>
        app.UseMiddleware();

        app.Run();
    }
}
</code></pre>
<p>å‰ç«¯è°ƒç”¨</p>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-comment">// åˆ›å»º WebSocket è¿æ¥</span>
    <span class="hljs-keyword">const</span> socket = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">'wss://localhost:7233/ws'</span>);

    <span class="hljs-comment">// è¿æ¥æ‰“å¼€æ—¶çš„å¤„ç†</span>
    socket.<span class="hljs-property">onopen</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocket è¿æ¥å·²å»ºç«‹'</span>);
    };

    <span class="hljs-comment">// æ¥æ”¶æ¶ˆæ¯æ—¶çš„å¤„ç†</span>
    socket.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ¶ˆæ¯:'</span>, event.<span class="hljs-property">data</span>);
    };

    <span class="hljs-comment">// è¿æ¥å…³é—­æ—¶çš„å¤„ç†</span>
    socket.<span class="hljs-property">onclose</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocket è¿æ¥å·²å…³é—­'</span>);
    };

    <span class="hljs-comment">// å‘ç”Ÿé”™è¯¯æ—¶çš„å¤„ç†</span>
    socket.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WebSocket é”™è¯¯:'</span>, error);
    };

    <span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendMessage1</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'message'</span>).<span class="hljs-property">value</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‘é€æ¶ˆæ¯:'</span>, message);
        <span class="hljs-keyword">if</span> (socket.<span class="hljs-property">readyState</span> === <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span>) {
            socket.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(message));
        }
    }

    <span class="hljs-comment">// å…³é—­è¿æ¥</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">closeConnection</span>(<span class="hljs-params"/>) {
        socket.<span class="hljs-title function_">close</span>();
    }
    
    &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"text-center"</span>&gt;
   
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"display-4"</span>&gt;</span>webSocket<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        
        
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/div&gt;
</code></pre>
<h2 data-id="heading-7">å®é™…æ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbe3956bbbc64306b05f17594ebaf3f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bmM5omNX2xvb25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964587&amp;x-signature=g4ljxcYNBVtk89VNtWQr5dyoym4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50d652a36f1d47b78d9cd089c18582a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bmM5omNX2xvb25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964587&amp;x-signature=OKSWC5elA8zHBSgLCyN%2Bk3Ce%2BqI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-8">åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨</h2>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„ä¸­ï¼Œä¸ºå®ç°é«˜æ•ˆã€å¯æ‰©å±•çš„å®æ—¶æ¶ˆæ¯æ¨é€ï¼Œç»“åˆÂ <strong>WebSocket</strong>Â ä¸Â <strong>Redis Pub/Sub</strong>Â æ˜¯ä¸€ç§ç»å…¸ä¸”å¼ºå¤§çš„è®¾è®¡æ¨¡å¼ã€‚è¯¥æ¨¡å¼çš„æ ¸å¿ƒæ€è·¯æ˜¯é€šè¿‡ Redis çš„å‘å¸ƒè®¢é˜…æœºåˆ¶ï¼Œè§£è€¦ WebSocket è¿æ¥æ‰€åœ¨çš„ä¸šåŠ¡æœåŠ¡å™¨ä¸è§¦å‘æ¶ˆæ¯çš„äº‹ä»¶æºï¼Œä»è€Œå®ç°è·¨è¿›ç¨‹ã€è·¨æœåŠ¡å™¨çš„å®æ—¶æ¶ˆæ¯å¹¿æ’­ã€‚</p>
<p>å…¶å·¥ä½œæµç¨‹å¯ç²¾ç‚¼ä¸ºä»¥ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š</p>
<ol>
<li><strong>è¿æ¥å»ºç«‹ä¸è®¢é˜…</strong>ï¼šå½“ç”¨æˆ·å®¢æˆ·ç«¯ä¸æŸå°ä¸šåŠ¡æœåŠ¡å™¨æˆåŠŸå»ºç«‹ WebSocket è¿æ¥åï¼Œè¯¥æœåŠ¡å™¨ä¼šç«‹å³ä»¥ç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ UserIDï¼‰ä¸ºé¢‘é“åï¼Œå‘ Redis å‘èµ·è®¢é˜…ï¼ˆ<code>SUBSCRIBE</code>ï¼‰ã€‚</li>
<li><strong>ç»Ÿä¸€çš„äº‹ä»¶å‘å¸ƒ</strong>ï¼šç³»ç»Ÿä¸­ä»»ä½•æœåŠ¡ï¼ˆå¦‚ä¸šåŠ¡é€»è¾‘æœåŠ¡ã€æ•°æ®åº“å˜æ›´ç›‘å¬å™¨ï¼‰åœ¨æ£€æµ‹åˆ°ä¸è¯¥ç”¨æˆ·ç›¸å…³çš„æ•°æ®å˜åŒ–æ—¶ï¼Œæ— éœ€æ„ŸçŸ¥è¯¥ç”¨æˆ·å®é™…è¿æ¥åœ¨å“ªå°æœåŠ¡å™¨ï¼Œåªéœ€å‘ Redis å¯¹åº”çš„ç”¨æˆ·é¢‘é“å‘å¸ƒï¼ˆ<code>PUBLISH</code>ï¼‰ä¸€æ¡å˜æ›´æ¶ˆæ¯ã€‚</li>
<li><strong>ç²¾å‡†çš„æ¶ˆæ¯è·¯ç”±ä¸æ¨é€</strong>ï¼šRedis ä¼šå°†è¯¥æ¶ˆæ¯æ¨é€è‡³æ‰€æœ‰è®¢é˜…äº†è¯¥é¢‘é“çš„ä¸šåŠ¡æœåŠ¡å™¨ã€‚æ¯å°æœåŠ¡å™¨åœ¨æ”¶åˆ°æ¶ˆæ¯åï¼Œé€šè¿‡å…¶å†…éƒ¨ç»´æŠ¤çš„Â <strong>ç”¨æˆ·-WebSocket è¿æ¥æ˜ å°„è¡¨</strong>ï¼Œç²¾å‡†å®šä½åˆ°å½“å‰è¿æ¥åœ¨æœ¬æœºçš„è¯¥ç”¨æˆ·æ‰€æœ‰ WebSocket ä¼šè¯ï¼Œå¹¶å³æ—¶å°†æ¶ˆæ¯ä¸‹å‘è‡³å¯¹åº”çš„å®¢æˆ·ç«¯ã€‚</li>
</ol>
<p>è¿™ç§æ¶æ„çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>è§£è€¦ä¸æ‰©å±•æ€§</strong>ï¼šå‘å¸ƒè€…ä¸è®¢é˜…è€…ï¼ˆWebSocket æœåŠ¡å™¨ï¼‰å®Œå…¨è§£è€¦ï¼Œä¾¿äºç³»ç»Ÿæ°´å¹³æ‰©å±•ã€‚</li>
<li><strong>ç²¾å‡†æ¨é€</strong>ï¼šæ¶ˆæ¯ä»…è¢«æ¨é€ç»™å…³è”ç”¨æˆ·å½“å‰æ‰€åœ¨çš„æœåŠ¡èŠ‚ç‚¹ï¼Œé¿å…å¹¿æ’­é£æš´ã€‚</li>
<li><strong>çŠ¶æ€åˆ†æ•£</strong>ï¼šå„WebSocketæœåŠ¡å™¨ä»…ç»´æŠ¤è¿æ¥åˆ°è‡ªèº«çš„ä¼šè¯ï¼Œæ— éœ€å…¨å±€ä¸­å¤®å­˜å‚¨ï¼Œæ¶æ„æ›´æ¸…æ™°ã€‚</li>
</ul>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œé€šè¿‡Â <strong>WebSocket ç»´æŒå®æ—¶è¿æ¥</strong>ï¼Œå¹¶å€ŸåŠ©Â <strong>Redis Pub/Sub è¿›è¡Œé«˜æ•ˆçš„æ¶ˆæ¯åˆ†å‘</strong>ï¼Œå…±åŒæ„å»ºäº†ä¸€ä¸ªé€‚åˆåˆ†å¸ƒå¼ç¯å¢ƒçš„å®æ—¶é€šä¿¡åŸºç¡€è®¾æ–½ï¼Œæœ‰åŠ›æ”¯æ’‘äº†èŠå¤©ã€é€šçŸ¥ã€å®æ—¶æ•°æ®åŒæ­¥ç­‰é«˜å¹¶å‘å®æ—¶åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openEuleré›†ç¾¤ Chrony æ—¶é—´åŒæ­¥å®æˆ˜ï¼šä»é›¶æ„å»ºé«˜ç²¾åº¦åˆ†å¸ƒå¼æ—¶é’Ÿä½“ç³»]]></title>    <link>https://juejin.cn/post/7581314241410924579</link>    <guid>https://juejin.cn/post/7581314241410924579</guid>    <pubDate>2025-12-08T16:14:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581314241410924579" data-draft-id="7581348660823801856" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openEuleré›†ç¾¤ Chrony æ—¶é—´åŒæ­¥å®æˆ˜ï¼šä»é›¶æ„å»ºé«˜ç²¾åº¦åˆ†å¸ƒå¼æ—¶é’Ÿä½“ç³»"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-08T16:14:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="chian_ocean"/> <meta itemprop="url" content="https://juejin.cn/user/969096773255898"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openEuleré›†ç¾¤ Chrony æ—¶é—´åŒæ­¥å®æˆ˜ï¼šä»é›¶æ„å»ºé«˜ç²¾åº¦åˆ†å¸ƒå¼æ—¶é’Ÿä½“ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/969096773255898/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    chian_ocean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T16:14:46.000Z" title="Mon Dec 08 2025 16:14:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é›†ç¾¤ç¯å¢ƒä¸åŸºç¡€æ¶æ„è¯´æ˜</h2>
<p>é›†ç¾¤æ‹“æ‰‘æ¶æ„</p>
<p>å®éªŒç¯å¢ƒä¸ºä¸‰èŠ‚ç‚¹æ¬§æ‹‰é›†ç¾¤ï¼ŒåŒ…å« 1 ä¸ªä¸»æ§èŠ‚ç‚¹ä¸ 2 ä¸ªä»èŠ‚ç‚¹ï¼Œå…·ä½“è§’è‰²åˆ†é…å¦‚ä¸‹ï¼š</p>
<ul>
<li>Euler01ï¼ˆä¸»æ§èŠ‚ç‚¹ï¼‰ï¼šå…¼ä»»æ—¶é—´æœåŠ¡å™¨</li>
<li>Euler02ï¼ˆä»èŠ‚ç‚¹ï¼‰ï¼šä½œä¸ºæ—¶é—´åŒæ­¥å®¢æˆ·ç«¯</li>
<li>Euler03ï¼ˆä»èŠ‚ç‚¹ï¼‰ï¼šä½œä¸ºæ—¶é—´åŒæ­¥å®¢æˆ·ç«¯</li>
</ul>
<p>è¯¥æ¶æ„é€šè¿‡å±‚æ¬¡åŒ–è®¾è®¡ï¼Œä¸ºä»å¼æ—¶é—´åŒæ­¥æ­å»ºäº†ç¨³å®šåŸºç¡€ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ—¶é—´åŒæ­¥æ˜¯èŠ‚ç‚¹åè°ƒå·¥ä½œçš„æ ¸å¿ƒå‰æï¼Œå°¤å…¶é€‚ç”¨äºåˆ†å¸ƒå¼æ•°æ®åº“ã€å¤§æ•°æ®å¤„ç†ã€AI è®­ç»ƒé›†ç¾¤ç­‰å¯¹æ—¶åºè¦æ±‚ä¸¥æ ¼çš„åœºæ™¯ã€‚</p>
<p>ä¸»æœºåé…ç½®éªŒè¯</p>
<p>ä¸ºç¡®ä¿é›†ç¾¤èŠ‚ç‚¹é—´èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å’Œé€šä¿¡ï¼Œé¦–å…ˆéœ€è¦éªŒè¯å„èŠ‚ç‚¹çš„ä¸»æœºåé…ç½®ï¼š</p>
<p><strong>Euler01èŠ‚ç‚¹ä¸»æœºåéªŒè¯ï¼š</strong></p>
<pre><code class="hljs">hostname
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a671b8700f94f9ab413316ce4f01ca1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=kQpe1D%2FyQYk6b5xhG4JTL%2F0S4Ds%3D" alt="" loading="lazy"/></p>
<p><strong>Euler02èŠ‚ç‚¹ä¸»æœºåéªŒè¯ï¼š</strong></p>
<pre><code class="hljs">hostname
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df6a79fab11a48ab92deb6833304c071~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=%2BrH%2FL9Vl%2FxlaeHMpaFrV%2FAG%2FowY%3D" alt="" loading="lazy"/></p>
<p><strong>Euler03èŠ‚ç‚¹ä¸»æœºåéªŒè¯ï¼š</strong></p>
<pre><code class="hljs">hostname
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b6ee964068f4583aa7c911ed446fb58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=e6Mz7tdryMsaBdiep32vrpuJGRU%3D" alt="" loading="lazy"/></p>
<p>ä¸»æœºåé…ç½®çš„æ­£ç¡®æ€§ç›´æ¥å½±å“åˆ°åç»­çš„æœåŠ¡å‘ç°å’ŒèŠ‚ç‚¹é—´é€šä¿¡ã€‚åœ¨å¤§å‹é›†ç¾¤ç¯å¢ƒä¸­ï¼Œè§„èŒƒçš„ä¸»æœºåå‘½åè§„åˆ™æœ‰åŠ©äºè‡ªåŠ¨åŒ–ç®¡ç†å’Œæ•…éšœæ’æŸ¥ã€‚</p>
<p>ç½‘ç»œåœ°å€é…ç½®æ£€æŸ¥</p>
<p>ç½‘ç»œè¿é€šæ€§æ˜¯æ—¶é—´åŒæ­¥æœåŠ¡çš„åŸºç¡€ï¼Œéœ€è¦ç¡®è®¤å„èŠ‚ç‚¹çš„IPåœ°å€é…ç½®ï¼š</p>
<p><strong>Euler01èŠ‚ç‚¹IPåœ°å€ï¼š</strong></p>
<pre><code class="hljs">ip addr
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c81e1f4ae68e4b4b8fc9edce306963a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=F5r2%2F1bmTOUYm0sFZ7XgnGKvVUk%3D" alt="" loading="lazy"/></p>
<p><strong>Euler02èŠ‚ç‚¹IPåœ°å€ï¼š</strong></p>
<pre><code class="hljs">ip addr
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11c04634de2a422a9ae25f293726443a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=pWCB%2FTvdEF4x%2FmSH4Rclr8d%2FD1s%3D" alt="" loading="lazy"/></p>
<p><strong>Euler03èŠ‚ç‚¹IPåœ°å€ï¼š</strong></p>
<pre><code class="hljs">ip addr
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94f97ee662854e90a99125e7f01c7553~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=oAJazf1uS9jIA34bc%2FNyDekFpSw%3D" alt="" loading="lazy"/></p>
<p>IPåœ°å€çš„è§„åˆ’åº”å½“éµå¾ªé›†ç¾¤ç½‘ç»œè®¾è®¡è§„èŒƒï¼Œç¡®ä¿åŒä¸€ç½‘æ®µå†…çš„èŠ‚ç‚¹èƒ½å¤Ÿç›´æ¥é€šä¿¡ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®ä¸ºç®¡ç†ç½‘ç»œã€å­˜å‚¨ç½‘ç»œå’Œæ•°æ®ç½‘ç»œåˆ†åˆ«é…ç½®ä¸åŒçš„ç½‘æ®µã€‚</p>
<p>ä¸»æœºæ˜ å°„æ–‡ä»¶é…ç½®</p>
<p>æ­£ç¡®çš„ä¸»æœºåè§£ææ˜¯é›†ç¾¤é€šä¿¡çš„å‰æï¼Œéœ€è¦æ£€æŸ¥å„èŠ‚ç‚¹çš„/etc/hostsæ–‡ä»¶é…ç½®ï¼š</p>
<p><strong>Euler01èŠ‚ç‚¹ä¸»æœºæ˜ å°„ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> /etc/hosts
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f326a73e71646c8a4385b17be175959~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=r8LBWsDH7EjcVCINOhVmxGXpuEA%3D" alt="" loading="lazy"/></p>
<p><strong>Euler02èŠ‚ç‚¹ä¸»æœºæ˜ å°„ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> /etc/hosts
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e179204a9ffa41d5861487e454e2383e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=OROBKqjpqcf4nttCR%2BXW0fGjJEM%3D" alt="" loading="lazy"/></p>
<p><strong>Euler03èŠ‚ç‚¹ä¸»æœºæ˜ å°„ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> /etc/hosts
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4146e5f60d004249a8e1a57d1b037370~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=SpNOolFvprTyetxPfWXgMyNB8b8%3D" alt="" loading="lazy"/></p>
<p>ä¸»æœºæ˜ å°„æ–‡ä»¶çš„ç»Ÿä¸€é…ç½®ç¡®ä¿äº†é›†ç¾¤å†…éƒ¨èŠ‚ç‚¹èƒ½å¤Ÿé€šè¿‡ä¸»æœºåç›¸äº’è®¿é—®ï¼Œé¿å…äº†DNSè§£æå¯èƒ½å¸¦æ¥çš„å»¶è¿Ÿå’Œä¸ç¡®å®šæ€§ã€‚åœ¨å¤§å‹é›†ç¾¤ä¸­ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨DNSæœåŠ¡å™¨æˆ–é…ç½®ç®¡ç†å·¥å…·æ¥è‡ªåŠ¨ç»´æŠ¤ä¸»æœºåè§£æ</p>
<p>é˜²ç«å¢™çŠ¶æ€ç¡®è®¤</p>
<p>ä¸ºç¡®ä¿æ—¶é—´åŒæ­¥æœåŠ¡æ­£å¸¸é€šä¿¡ï¼Œéœ€è¦æ£€æŸ¥å„èŠ‚ç‚¹çš„é˜²ç«å¢™çŠ¶æ€ï¼š</p>
<p><strong>Euler01é˜²ç«å¢™çŠ¶æ€ï¼š</strong></p>
<pre><code class="hljs language-lua" lang="lua">systemctl <span class="hljs-built_in">status</span> firewalld
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afaa6567febf45a688b93f7cf87ac076~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=c9ej4U3EOLf%2FnjI7bSBoYhH6DBQ%3D" alt="" loading="lazy"/></p>
<p><strong>Euler02é˜²ç«å¢™çŠ¶æ€ï¼š</strong></p>
<pre><code class="hljs language-lua" lang="lua">systemctl <span class="hljs-built_in">status</span> firewalld
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ea531717fad4c8e89e118ce11c8351a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=HzHoy26OXYVdJjm%2FS5QoGvZvTg8%3D" alt="" loading="lazy"/></p>
<p><strong>Euler03é˜²ç«å¢™çŠ¶æ€ï¼š</strong></p>
<pre><code class="hljs language-lua" lang="lua">systemctl <span class="hljs-built_in">status</span> firewalld
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0886a7e04bfa42b8ae9f9505b00a8214~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=ZlbKkfsdBpcvS%2FuZWgCrMfSo%2BP8%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœé˜²ç«å¢™å¤„äºå¼€å¯çŠ¶æ€ï¼Œéœ€è¦ç¡®ä¿NTPæœåŠ¡ç«¯å£ï¼ˆUDP 123ï¼‰åœ¨é›†ç¾¤å†…éƒ¨æ˜¯å¼€æ”¾çš„ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåº”æ ¹æ®å®‰å…¨ç­–ç•¥åˆç†é…ç½®é˜²ç«å¢™è§„åˆ™ï¼Œæ—¢è¦ä¿è¯æœåŠ¡æ­£å¸¸é€šä¿¡ï¼Œåˆè¦é˜²æ­¢æœªæˆæƒè®¿é—®ã€‚</p>
<p>é›†ç¾¤ç½‘ç»œè¿é€šæ€§æµ‹è¯•</p>
<p>å…¨é¢çš„ç½‘ç»œè¿é€šæ€§æµ‹è¯•æ˜¯éƒ¨ç½²æ—¶é—´åŒæ­¥æœåŠ¡å‰çš„å¿…è¦æ­¥éª¤ï¼š</p>
<p><strong>Euler01èŠ‚ç‚¹è¿é€šæ€§æµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs">ping euler01
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/282a82a09d134aea9a03b839ab50a675~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=6KUNUR4tzX1yPuHOv9mbjhzgZp8%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs">ping euler02
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afb17eb4eba042de9f6376612218e37c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=x9CZMHV69ofPr51k0RT%2FaXQXGhk%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs">ping euler03
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db64fb6d6e4141cdb58870403397aee8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=PkBkxfangyjpZOWUl0dRUuOtvh4%3D" alt="" loading="lazy"/></p>
<p><strong>Euler02èŠ‚ç‚¹è¿é€šæ€§æµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs">ping euler01
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c9d6f3fbb88434ab968ac39eb0221f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=508pkC2d5fqIm7JZYFlFCCVP%2BRU%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs">ping euler02
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1699b7b7cf1a489a9b6870fc54b0a8f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=sJiZYEn9DyMAUFtbG8Ge%2FLNyA4c%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs">ping euler03
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d140b669dc4342208d35eef07b28215a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=r9IuReIvXl94IRZPjLm0F8jrcmQ%3D" alt="" loading="lazy"/></p>
<p><strong>Euler03èŠ‚ç‚¹è¿é€šæ€§æµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs">ping euler01
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e53d8a18d054896af00939219da9d88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=kjk%2FdPWWwN1F8zbTMXzZNL0xkk0%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs">ping euler02
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/026a7d725ad4401a8f2301b579dedb5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=sFrmO%2BBydtpTHDQFo7EpyF%2F5r7Y%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs">ping euler03
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a3c10fba6834441b0f0a6e6f54322cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=q%2F5U01ErXRjgYeqLFAVj1N24e%2Fk%3D" alt="" loading="lazy"/></p>
<p>ç½‘ç»œè¿é€šæ€§æµ‹è¯•åº”å½“åŒ…æ‹¬åŒå‘æµ‹è¯•ï¼Œç¡®ä¿ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´éƒ½èƒ½å¤Ÿæ­£å¸¸é€šä¿¡ã€‚åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œè¿˜éœ€è¦å…³æ³¨ç½‘ç»œå»¶è¿Ÿå’Œä¸¢åŒ…ç‡ï¼Œè¿™äº›å› ç´ ä¼šç›´æ¥å½±å“æ—¶é—´åŒæ­¥çš„ç²¾åº¦ã€‚</p>
<h3 data-id="heading-1">æ—¶é—´åŒæ­¥çš„é‡è¦æ€§ä¸å®æ–½ç›®æ ‡</h3>
<p>æ—¶é—´åŒæ­¥æ˜¯åˆ†å¸ƒå¼é›†ç¾¤ç¨³å®šè¿è¡Œçš„æ ¸å¿ƒå‰æï¼ŒèŠ‚ç‚¹é—´çš„æ—¶é—´åå·®ä¼šå¼•å‘å¤šé‡å…³é”®é—®é¢˜ï¼š</p>
<ol>
<li>æ—¥å¿—æ—¶é—´æˆ³é”™ä¹±ï¼Œå¢åŠ æ•…éšœæ’æŸ¥ä¸ç³»ç»Ÿç›‘æ§éš¾åº¦</li>
<li>å¹²æ‰°åˆ†å¸ƒå¼äº‹åŠ¡æ‰§è¡Œï¼Œç ´åæ•°æ®åº“ä¸€è‡´æ€§</li>
<li>å¯¼è‡´å®šæ—¶ä»»åŠ¡è°ƒåº¦å¼‚å¸¸ï¼Œæ— æ³•æŒ‰é¢„æœŸè§¦å‘</li>
<li>ä½¿åŸºäºæ—¶é—´æˆ³çš„è®¤è¯æˆæƒæœºåˆ¶å¤±æ•ˆ</li>
<li>å½±å“æ•°æ®å¤‡ä»½ã€å¤åˆ¶ç­‰æ“ä½œçš„å¯é æ€§ï¼Œå¼•å‘æ•°æ®ä¸€è‡´æ€§é£é™©</li>
</ol>
<h3 data-id="heading-2">Chrony æ—¶é—´åŒæ­¥æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡</h3>
<p>é€‰ç”¨ Chrony ä½œä¸ºæ—¶é—´åŒæ­¥è§£å†³æ–¹æ¡ˆï¼Œæ ¸å¿ƒä¼˜åŠ¿å¦‚ä¸‹ï¼š</p>
<ul>
<li>é«˜ç²¾åº¦åŒæ­¥ï¼šç†æƒ³æ¡ä»¶ä¸‹å¯è¾¾å¾®ç§’çº§</li>
<li>å¿«é€Ÿæ”¶æ•›ï¼šèƒ½å¿«é€Ÿå®Œæˆç³»ç»Ÿæ—¶é’Ÿæ ¡å‡†</li>
<li>å¼ºç½‘ç»œé€‚åº”æ€§ï¼šå¯¹ç½‘ç»œå»¶è¿Ÿå’ŒæŠ–åŠ¨å®¹å¿åº¦é«˜</li>
<li>é«˜çµæ´»æ€§ï¼šæ”¯æŒå¤šç§æ—¶é—´æºä¸å¤æ‚ç½‘ç»œæ‹“æ‰‘</li>
</ul>
<p>æ–¹æ¡ˆé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼šä¸»æ§èŠ‚ç‚¹ Euler01 ä½œä¸ºæ—¶é—´æœåŠ¡å™¨ï¼ŒåŒæ­¥å¤–éƒ¨å¯é æ—¶é—´æºï¼›ä»èŠ‚ç‚¹ Euler02ã€Euler03 ä»¥å®¢æˆ·ç«¯èº«ä»½ï¼Œä»ä¸»èŠ‚ç‚¹åŒæ­¥æ—¶é—´ã€‚è¯¥æ¶æ„æ—¢ä¿éšœäº†æ—¶é—´å‡†ç¡®æ€§ï¼Œåˆé™ä½äº†å¯¹å¤–éƒ¨ç½‘ç»œçš„ä¾èµ–ã€‚</p>
<h3 data-id="heading-3">Chrony æ—¶é—´åŒæ­¥æœåŠ¡éƒ¨ç½²å®æ–½</h3>
<p>ä¸»èŠ‚ç‚¹æ—¶é—´æœåŠ¡å™¨é…ç½®</p>
<p><strong>æœåŠ¡çŠ¶æ€æ£€æŸ¥ï¼š</strong></p>
<p>é¦–å…ˆç¡®è®¤ChronyæœåŠ¡çš„å½“å‰çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">systemctl <span class="hljs-built_in">status</span> chronyd
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e5ea225baad40b18a95b17f429c3425~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=OPIIEuvQhyrV4RPKggDaRR7i%2B3w%3D" alt="" loading="lazy"/></p>
<p><strong>é…ç½®æ–‡ä»¶ç¼–è¾‘ï¼š</strong></p>
<p>ç¼–è¾‘ä¸»èŠ‚ç‚¹çš„Chronyé…ç½®æ–‡ä»¶ï¼Œé…ç½®æ—¶é—´åŒæ­¥ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">vim /etc/chrony.conf
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b982832673be4e55b701491a99102633~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=gfhwda8TKUzP8XEIV2ZfyoZI%2BBE%3D" alt="" loading="lazy"/></p>
<p>é…ç½®å†…å®¹è¯¦è§£ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨å…¬å…±NTPæ—¶é—´æœåŠ¡å™¨æ± ï¼Œibursté€‰é¡¹åŠ é€Ÿåˆå§‹åŒæ­¥</span>
pool pool.ntp.org iburst

<span class="hljs-comment"># é…ç½®å›½å†…å¯é çš„NTPæœåŠ¡å™¨ï¼Œæé«˜åŒæ­¥æˆåŠŸç‡</span>
server ntp1.aliyun.com iburst
server ntp2.aliyun.com iburst
server ntp3.aliyun.com iburst

<span class="hljs-comment"># å…è®¸é›†ç¾¤å†…éƒ¨ç½‘ç»œé€šè¿‡æœ¬æœºåŒæ­¥æ—¶é—´</span>
allow 192.168.1.0/24

<span class="hljs-comment"># åœ¨å¤–ç½‘ä¸å¯ç”¨æ—¶ï¼Œä½¿ç”¨æœ¬åœ°æ—¶é’Ÿä½œä¸ºå¤‡ç”¨æ—¶é—´æº</span>
<span class="hljs-built_in">local</span> stratum 1
</code></pre>
<p><strong>é…ç½®å‚æ•°æŠ€æœ¯è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>iburst</code>å‚æ•°ï¼šåœ¨æœåŠ¡å¯åŠ¨æ—¶å‘é€å¤šä¸ªæ•°æ®åŒ…ï¼ŒåŠ é€Ÿåˆå§‹æ—¶é—´åŒæ­¥è¿‡ç¨‹</li>
<li><code>allow</code>æŒ‡ä»¤ï¼šé™åˆ¶å¯è®¿é—®æœ¬NTPæœåŠ¡çš„ç½‘ç»œèŒƒå›´ï¼Œå¢å¼ºå®‰å…¨æ€§</li>
<li><code>local stratum 1</code>ï¼šè®¾ç½®æœ¬åœ°æ—¶é’Ÿå±‚çº§ï¼Œå½“å¤–éƒ¨æ—¶é—´æºä¸å¯ç”¨æ—¶ï¼Œæœ¬æœºå¯ä½œä¸ºæ—¶é—´æº</li>
<li>å±‚çº§(Stratum)æ¦‚å¿µï¼šStratum 1è¡¨ç¤ºç›´æ¥è¿æ¥åˆ°åŸå­é’Ÿç­‰é«˜ç²¾åº¦æ—¶é—´æºï¼Œæ¯ç»è¿‡ä¸€å±‚ç½‘ç»œè®¾å¤‡ï¼Œå±‚çº§æ•°åŠ 1</li>
</ul>
<p><strong>æœåŠ¡é‡å¯ä¸ç”Ÿæ•ˆï¼š</strong></p>
<p>é…ç½®å®Œæˆåéœ€è¦é‡å¯æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs">systemctl restart chronyd
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/395cd26b6a8b4620a7913d69bc4ac265~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=%2FnRHjMet0%2F7iTI4dk7cVGPJ0wys%3D" alt="" loading="lazy"/></p>
<p>ä»èŠ‚ç‚¹æ—¶é—´å®¢æˆ·ç«¯é…ç½®</p>
<p><strong>Euler02èŠ‚ç‚¹é…ç½®ï¼š</strong></p>
<p>ç¼–è¾‘ä»èŠ‚ç‚¹çš„Chronyé…ç½®æ–‡ä»¶ï¼ŒæŒ‡å‘ä¸»èŠ‚ç‚¹ä½œä¸ºæ—¶é—´æºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">vim /etc/chrony.conf
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95539d60ddcf46bdba7dd2d433ceee26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=vSA%2Bkz%2BGEqApItfT%2BnwfHrIlADc%3D" alt="" loading="lazy"/></p>
<p>é…ç½®æ ¸å¿ƒå†…å®¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŒ‡å®šä¸»èŠ‚ç‚¹ä½œä¸ºæ—¶é—´åŒæ­¥æº</span>
server euler01 iburst

<span class="hljs-comment"># å¯é€‰ï¼šé…ç½®å¤‡ç”¨æ—¶é—´æœåŠ¡å™¨</span>
<span class="hljs-comment"># server ntp1.aliyun.com iburst</span>
</code></pre>
<p>é‡å¯æ—¶é—´åŒæ­¥æœåŠ¡ï¼š</p>
<pre><code class="hljs">systemctl restart chronyd
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11281f8aa5f54112b9dfce9acb7bc9ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=7ghTKgGUqSAW6l2uKpJSAY%2BQXo0%3D" alt="" loading="lazy"/></p>
<p><strong>Euler03èŠ‚ç‚¹é…ç½®ï¼š</strong></p>
<p>é‡‡ç”¨ç›¸åŒçš„é…ç½®æ¨¡å¼ï¼Œç¡®ä¿é…ç½®ä¸€è‡´æ€§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">vim /etc/chrony.conf
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09b7621fa2304979aaeb1c70afed3cd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=qQ%2B5Wh0qydDButPlZ4lz4wGk0LI%3D" alt="" loading="lazy"/></p>
<p>é‡å¯æ—¶é—´åŒæ­¥æœåŠ¡ï¼š</p>
<pre><code class="hljs">systemctl restart chronyd
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c03ee3adfec420396fcb5a2db1b41cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=RaYdltS9stypvi1mrd4a1noo45s%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">æ—¶é—´åŒæ­¥çŠ¶æ€éªŒè¯ä¸ç›‘æ§</h3>
<p>Chronycç›‘æ§å·¥å…·ä»‹ç»</p>
<p>chronycæ˜¯ChronyæœåŠ¡çš„å‘½ä»¤è¡Œæ§åˆ¶å·¥å…·ï¼Œæä¾›ä¸°å¯Œçš„ç›‘æ§å’Œç®¡ç†åŠŸèƒ½ï¼š</p>
<ul>
<li><strong>å®æ—¶çŠ¶æ€æŸ¥è¯¢</strong>ï¼šç›‘æ§æ—¶é—´åŒæ­¥çŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡</li>
<li><strong>åŠ¨æ€é…ç½®</strong>ï¼šæ”¯æŒè¿è¡Œæ—¶è°ƒæ•´åŒæ­¥å‚æ•°</li>
<li><strong>æ•…éšœè¯Šæ–­</strong>ï¼šæä¾›è¯¦ç»†çš„è°ƒè¯•å’Œè¯Šæ–­ä¿¡æ¯</li>
<li><strong>æ€§èƒ½ç»Ÿè®¡</strong>ï¼šè®°å½•å†å²åŒæ­¥æ€§èƒ½å’Œç²¾åº¦æ•°æ®</li>
</ul>
<p>ä»èŠ‚ç‚¹åŒæ­¥çŠ¶æ€æ£€æŸ¥</p>
<p><strong>Euler02èŠ‚ç‚¹åŒæ­¥çŠ¶æ€ï¼š</strong></p>
<pre><code class="hljs">chronyc sources
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05ab726ec7784ff6a41a06e5ac52fe00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=tZEphgp%2FMQCkTCakKSLl1r3HEwI%3D" alt="" loading="lazy"/></p>
<p>Chrony æ—¶é—´åŒæ­¥æ ¸å¿ƒçŠ¶æ€å‚æ•°è¯´æ˜</p>
<ul>
<li><strong>MS çŠ¶æ€æ ‡å¿—</strong>ï¼š<code>^</code> è¡¨ç¤ºè¯¥æºä¸ºå½“å‰ä¸»æ—¶é—´æºï¼›<code>*</code> è¡¨ç¤ºè¯¥æºæ˜¯å½“å‰æœ€ä½³å‚è€ƒæºï¼Œæ­£ç”¨äºæ—¶é—´åŒæ­¥ã€‚</li>
<li><strong>Stratum å±‚çº§</strong>ï¼šæ•°å€¼ 3 ä»£è¡¨æ—¶é—´æºè·ç¦»æƒå¨æ—¶é—´æºæœ‰ä¸¤è·³ï¼Œç¬¦åˆå†…éƒ¨ç½‘ç»œç¯å¢ƒçš„åˆç†å±‚çº§é…ç½®ã€‚</li>
<li><strong>Poll è½®è¯¢é—´éš”</strong>ï¼šå€¼ 6 å¯¹åº” (2^6=64) ç§’è½®è¯¢å‘¨æœŸï¼ŒåŒæ­¥ç¨³å®šåæ•°å€¼ä¼šé€æ­¥å¢å¤§ï¼Œä»¥é™ä½ç½‘ç»œè´Ÿè½½ã€‚</li>
<li><strong>Reach å¯è¾¾æ€§</strong>ï¼šå…«è¿›åˆ¶ 377ï¼ˆäºŒè¿›åˆ¶ 11111111ï¼‰è¡¨ç¤ºæœ€è¿‘ 8 æ¬¡è½®è¯¢å…¨éƒ¨æˆåŠŸï¼Œç½‘ç»œè¿æ¥çŠ¶æ€ç¨³å®šã€‚</li>
<li><strong>LastRx æœ€åæ¥æ”¶</strong>ï¼š39 åˆ†é’Ÿå‰æ¥æ”¶æœ€åä¸€æ¬¡å“åº”ï¼Œå±äºç¨³å®šåŒæ­¥çŠ¶æ€ä¸‹çš„æ­£å¸¸æƒ…å†µã€‚</li>
<li><strong>Last sample æ—¶é—´åå·®</strong>ï¼š+389us è¡¨ç¤ºä¸Šæ¬¡åŒæ­¥æ—¶æœ¬åœ°æ—¶é’Ÿæ¯”æœåŠ¡å™¨æ…¢ 389 å¾®ç§’ï¼›Â±24ms ä»£è¡¨åŒæ­¥ç²¾åº¦æ§åˆ¶åœ¨ 24 æ¯«ç§’èŒƒå›´å†…ã€‚</li>
</ul>
<p><strong>Euler03èŠ‚ç‚¹åŒæ­¥çŠ¶æ€ï¼š</strong></p>
<pre><code class="hljs">chronyc sources
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce3107316370483588b13b732c660437~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hpYW5fb2NlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765815286&amp;x-signature=LUignj2rOOjtzRQsWdxN75%2Bp5%2Bw%3D" alt="" loading="lazy"/></p>
<p>Euler03èŠ‚ç‚¹çš„åŒæ­¥çŠ¶æ€æ˜¾ç¤ºï¼š</p>
<ul>
<li>æˆåŠŸä¸Euler01å»ºç«‹åŒæ­¥å…³ç³»</li>
<li>æ—¶é—´åå·®ä»…ä¸º+144å¾®ç§’ï¼ŒåŒæ­¥ç²¾åº¦è‰¯å¥½</li>
<li>ç½‘ç»œè¿æ¥ç¨³å®šï¼Œå¯è¾¾æ€§æŒ‡æ ‡æœ€ä¼˜</li>
<li>åŒæ­¥ç²¾åº¦è¾¾åˆ°Â±23æ¯«ç§’ï¼Œæ»¡è¶³å¤§å¤šæ•°åº”ç”¨åœºæ™¯éœ€æ±‚</li>
</ul>
<p>é«˜çº§ç›‘æ§ä¸è¯Šæ–­</p>
<p>é™¤äº†åŸºæœ¬çš„<code>sources</code>å‘½ä»¤ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ·±å…¥è¯Šæ–­ï¼š</p>
<p><strong>æ£€æŸ¥è·Ÿè¸ªçŠ¶æ€ï¼š</strong></p>
<pre><code class="hljs">chronyc tracking
</code></pre>
<p><strong>éªŒè¯æ—¶é—´æºå‡†ç¡®æ€§ï¼š</strong></p>
<pre><code class="hljs">chronyc sourcestats
</code></pre>
<p><strong>æ‰‹åŠ¨æ—¶é—´è°ƒæ•´ï¼š</strong></p>
<pre><code class="hljs">chronyc makestep
</code></pre>
<h3 data-id="heading-5">æ—¶é—´åŒæ­¥æœåŠ¡æ€§èƒ½ä¼˜åŒ–ä¸é«˜å¯ç”¨å»ºè®®</h3>
<p>æ€§èƒ½è°ƒä¼˜å‚æ•°</p>
<p>æ ¹æ®å®é™…ç½‘ç»œç¯å¢ƒå’Œç²¾åº¦è¦æ±‚ï¼Œå¯ä»¥è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š</p>
<p><strong>ç½‘ç»œå»¶è¿Ÿè¡¥å¿ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨chrony.confä¸­æ·»åŠ </span>
driftfile /var/lib/chrony/drift
makestep 1.0 3
</code></pre>
<p><strong>æœåŠ¡å™¨é€‰æ‹©ç­–ç•¥ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¼˜å…ˆé€‰æ‹©ä½å»¶è¿ŸæœåŠ¡å™¨</span>
minsources 2
</code></pre>
<p>é«˜å¯ç”¨æ€§é…ç½®</p>
<p>å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œå»ºè®®é…ç½®å¤šä¸ªæ—¶é—´æœåŠ¡å™¨ï¼š</p>
<p><strong>å¤šä¸»èŠ‚ç‚¹é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-vbscript" lang="vbscript"><span class="hljs-built_in">server</span> ntp-server1 iburst
<span class="hljs-built_in">server</span> ntp-server2 iburst
<span class="hljs-built_in">server</span> ntp-server3 iburst
</code></pre>
<p><strong>ç›‘æ§å‘Šè­¦é›†æˆï¼š</strong></p>
<ul>
<li>é…ç½®æ—¶é—´åå·®ç›‘æ§å‘Šè­¦</li>
<li>é›†æˆåˆ°ç°æœ‰çš„ç›‘æ§ç³»ç»Ÿä¸­</li>
<li>è®¾ç½®è‡ªåŠ¨æ•…éšœè½¬ç§»æœºåˆ¶</li>
</ul>
<p>å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾é¢å‘æœªæ¥çš„å¼€æºæ“ä½œç³»ç»Ÿï¼Œä¸å¦¨çœ‹çœ‹DistroWatch æ¦œå•ä¸­å¿«é€Ÿä¸Šå‡çš„ openEulerï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdistrowatch.com%2Ftable-mobile.php%3Fdistribution%3Dopeneuler" target="_blank" title="https://distrowatch.com/table-mobile.php?distribution=openeuler" ref="nofollow noopener noreferrer"><strong>https://distrowatch.com/table-mobile.php?distribution=openeuler</strong></a>ï¼Œä¸€ä¸ªç”±å¼€æ”¾åŸå­å¼€æºåŸºé‡‘ä¼šå­µåŒ–ã€æ”¯æŒâ€œè¶…èŠ‚ç‚¹â€åœºæ™¯çš„Linux å‘è¡Œç‰ˆã€‚ openEulerå®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.openeuler.openatom.cn%2Fzh%2F" target="_blank" title="https://www.openeuler.openatom.cn/zh/" ref="nofollow noopener noreferrer"><strong>https://www.openeuler.openatom.cn/zh/</strong></a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HTTPSå’ŒHTTPçš„åŒºåˆ«åŠè‡ªå®šä¹‰è¯ä¹¦ä½¿ç”¨æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7582048028392194098</link>    <guid>https://juejin.cn/post/7582048028392194098</guid>    <pubDate>2025-12-10T09:45:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582048028392194098" data-draft-id="7581872532363493385" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HTTPSå’ŒHTTPçš„åŒºåˆ«åŠè‡ªå®šä¹‰è¯ä¹¦ä½¿ç”¨æ•™ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T09:45:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒçŒ´çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2179705232165364"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HTTPSå’ŒHTTPçš„åŒºåˆ«åŠè‡ªå®šä¹‰è¯ä¹¦ä½¿ç”¨æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2179705232165364/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒçŒ´çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:45:13.000Z" title="Wed Dec 10 2025 09:45:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>HTTPS(å…¨ç§°:Hyper Text Transfer Protocol over Secure Socket Layer)ï¼Œæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼Œç®€å•è®²æ˜¯HTTPçš„å®‰å…¨ç‰ˆã€‚å³HTTPä¸‹åŠ å…¥SSLå±‚ï¼ŒHTTPSçš„å®‰å…¨åŸºç¡€æ˜¯SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦SSLã€‚ å®ƒæ˜¯ä¸€ä¸ªURI scheme(æŠ½è±¡æ ‡è¯†ç¬¦ä½“ç³»)ï¼Œå¥æ³•ç±»åŒhttp:ä½“ç³»ã€‚ç”¨äºå®‰å…¨çš„HTTPæ•°æ®ä¼ è¾“ã€‚https:URLè¡¨æ˜å®ƒä½¿ç”¨äº†HTTPï¼Œä½†HTTPSå­˜åœ¨ä¸åŒäºHTTPçš„é»˜è®¤ ç«¯å£ åŠä¸€ä¸ªåŠ å¯†/èº«ä»½éªŒè¯å±‚(åœ¨HTTPä¸TCPä¹‹é—´)ã€‚è¿™ä¸ªç³»ç»Ÿçš„æœ€åˆç ”å‘ç”±ç½‘æ™¯å…¬å¸(Netscape)è¿›è¡Œï¼Œå¹¶å†…ç½®äºå…¶æµè§ˆå™¨Netscape Navigatorä¸­ï¼Œæä¾›äº†èº«ä»½éªŒè¯ä¸åŠ å¯† é€šè®¯ æ–¹æ³•ã€‚ç°åœ¨å®ƒè¢«å¹¿æ³›ç”¨äº ä¸‡ç»´ç½‘ ä¸Šå®‰å…¨æ•æ„Ÿçš„é€šè®¯ï¼Œä¾‹å¦‚äº¤æ˜“æ”¯ä»˜æ–¹é¢ã€‚</p>
<p>HTTPSå’ŒHTTPçš„åŒºåˆ«</p>
<p>ä¸€ã€httpsåè®®éœ€è¦åˆ° ca ç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹ è¯ä¹¦ å¾ˆå°‘ï¼Œéœ€è¦äº¤è´¹ã€‚</p>
<p>äºŒã€httpæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œhttps åˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„sslåŠ å¯†ä¼ è¾“åè®®ã€‚</p>
<p>ä¸‰ã€httpå’Œhttpsä½¿ç”¨çš„æ˜¯å®Œå…¨ä¸åŒçš„è¿æ¥æ–¹å¼ï¼Œç”¨çš„ ç«¯å£ ä¹Ÿä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯80ï¼Œåè€…æ˜¯443ã€‚</p>
<p>å››ã€httpçš„è¿æ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ï¼›HTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œæ¯”httpåè®®å®‰å…¨ã€‚</p>
<p>å¯¹äºç½‘ç»œæŠ“åŒ…å’Œåˆ†æï¼Œå·¥å…·å¦‚ Sniffmaster å¯ä»¥ç®€åŒ– HTTPS æµé‡çš„è§£å¯†è¿‡ç¨‹ï¼Œå®ƒæ”¯æŒå…¨å¹³å°æŠ“åŒ…ï¼Œæ— éœ€ä»£ç†æˆ–è¶Šç‹±ã€‚</p>
<p>ç¬¬ä¸€ç§ä½¿ç”¨è‡ªå®šä¹‰è¯ä¹¦</p>
<pre><code class="hljs language-scss" lang="scss">SSLSocketFactory<span class="hljs-selector-class">.getSocketFactory</span>() ä½¿ç”¨è‡ªå®šä¹‰è¯ä¹¦ä¸è¢«ç³»ç»Ÿæ‰¿è®¤
</code></pre>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">GetNetWork</span><span class="hljs-params">()</span> {
<span class="hljs-keyword">try</span> {
<span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;https:<span class="hljs-comment">//192.168.0.102:8443/123.html&amp;#34;;</span>
<span class="hljs-type">BasicHttpParams</span> <span class="hljs-variable">params</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicHttpParams</span>();
			HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
			HttpProtocolParams.setContentCharset(params,
					HTTP.DEFAULT_CONTENT_CHARSET);
			HttpProtocolParams.setUseExpectContinue(params, <span class="hljs-literal">true</span>);
			SSLSocketFactory.getSocketFactory().setHostnameVerifier(
<span class="hljs-keyword">new</span> <span class="hljs-title class_">AllowAllHostnameVerifier</span>());
<span class="hljs-type">SchemeRegistry</span> <span class="hljs-variable">schReg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SchemeRegistry</span>();
			schReg.register(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Scheme</span>(&amp;#<span class="hljs-number">34</span>;http&amp;#<span class="hljs-number">34</span>;, PlainSocketFactory
					.getSocketFactory(), <span class="hljs-number">80</span>));
			schReg.register(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Scheme</span>(&amp;#<span class="hljs-number">34</span>;https&amp;#<span class="hljs-number">34</span>;, SSLTrustAllSocketFactory
					.getSocketFactory(), <span class="hljs-number">443</span>));
<span class="hljs-type">ClientConnectionManager</span> <span class="hljs-variable">connMgr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadSafeClientConnManager</span>(
					params, schReg);
<span class="hljs-type">DefaultHttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultHttpClient</span>(connMgr, params);
<span class="hljs-type">HttpGet</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpGet</span>(path);
<span class="hljs-type">HttpResponse</span> <span class="hljs-variable">httpResponse</span> <span class="hljs-operator">=</span> client.execute(request);
<span class="hljs-type">int</span> <span class="hljs-variable">responseCode</span> <span class="hljs-operator">=</span> httpResponse.getStatusLine().getStatusCode();
<span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> httpResponse.getStatusLine().getReasonPhrase();
<span class="hljs-type">HttpEntity</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> httpResponse.getEntity();
<span class="hljs-keyword">if</span> (responseCode == <span class="hljs-number">200</span> &amp;&amp; entity != <span class="hljs-literal">null</span>) {
				Log.e(&amp;#<span class="hljs-number">34</span>;log&amp;#<span class="hljs-number">34</span>;, entity.toString());
			}
		} <span class="hljs-keyword">catch</span> (MalformedURLException e) {
			e.printStackTrace();
		} <span class="hljs-keyword">catch</span> (ClientProtocolException e) {
			e.printStackTrace();
		} <span class="hljs-keyword">catch</span> (IOException e) {
			e.printStackTrace();
		}
	}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SSLTrustAllSocketFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SSLSocketFactory</span> {
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;SSLTrustAllSocketFactory&amp;#<span class="hljs-number">34</span>;;
<span class="hljs-keyword">private</span> SSLContext mCtx;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SSLTrustAllManager</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">X509TrustManager</span> {
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkClientTrusted</span><span class="hljs-params">(X509Certificate[] arg0, String arg1)</span>
<span class="hljs-keyword">throws</span> CertificateException {
			}
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkServerTrusted</span><span class="hljs-params">(X509Certificate[] arg0, String arg1)</span>
<span class="hljs-keyword">throws</span> CertificateException {
			}
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> X509Certificate[] getAcceptedIssuers() {
<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
			}
		}
<span class="hljs-keyword">public</span> <span class="hljs-title function_">SSLTrustAllSocketFactory</span><span class="hljs-params">(KeyStore truststore)</span> <span class="hljs-keyword">throws</span> Throwable {
<span class="hljs-built_in">super</span>(truststore);
<span class="hljs-keyword">try</span> {
				mCtx = SSLContext.getInstance(&amp;#<span class="hljs-number">34</span>;TLS&amp;#<span class="hljs-number">34</span>;);
				mCtx.init(<span class="hljs-literal">null</span>,
<span class="hljs-keyword">new</span> <span class="hljs-title class_">TrustManager</span>[] { <span class="hljs-keyword">new</span> <span class="hljs-title class_">SSLTrustAllManager</span>() }, <span class="hljs-literal">null</span>);
				setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
			} <span class="hljs-keyword">catch</span> (Exception ex) {
			}
		}
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> Socket <span class="hljs-title function_">createSocket</span><span class="hljs-params">(Socket socket, String host, <span class="hljs-type">int</span> port,
<span class="hljs-type">boolean</span> autoClose)</span> <span class="hljs-keyword">throws</span> IOException, UnknownHostException {
<span class="hljs-keyword">return</span> mCtx.getSocketFactory().createSocket(socket, host, port,
					autoClose);
		}
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> Socket <span class="hljs-title function_">createSocket</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException {
<span class="hljs-keyword">return</span> mCtx.getSocketFactory().createSocket();
		}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SSLSocketFactory <span class="hljs-title function_">getSocketFactory</span><span class="hljs-params">()</span> {
<span class="hljs-keyword">try</span> {
<span class="hljs-type">KeyStore</span> <span class="hljs-variable">trustStore</span> <span class="hljs-operator">=</span> KeyStore.getInstance(KeyStore
						.getDefaultType());
				trustStore.load(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
<span class="hljs-type">SSLSocketFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SSLTrustAllSocketFactory</span>(
						trustStore);
<span class="hljs-keyword">return</span> factory;
			} <span class="hljs-keyword">catch</span> (Throwable e) {
				Log.d(TAG, e.getMessage());
				e.printStackTrace();
			}
<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
		}
	}
</code></pre>
<p>ç¬¬äºŒç§ Â ç›´æ¥ä»
<a href="https://link.juejin.cn?target=https%3A%2F%2Fkyfw.12306.cn%2Fotn%2F" target="_blank" title="https://kyfw.12306.cn/otn/" ref="nofollow noopener noreferrer">kyfw.12306.cn/otn/</a>Â ä¸‹è½½æ ¹è¯ä¹¦ å¯¼å…¥åº”ç”¨ä¸­ éªŒè¯</p>
<pre><code class="hljs language-ini" lang="ini">
public static void GetNetWork2(Context context) {
try {
String <span class="hljs-attr">path</span> = &amp;<span class="hljs-comment">#34;https://kyfw.12306.cn/otn/&amp;#34;;</span>
BasicHttpParams <span class="hljs-attr">params</span> = new BasicHttpParams()<span class="hljs-comment">;</span>
			HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1)<span class="hljs-comment">;</span>
			HttpProtocolParams.setContentCharset(params,
					HTTP.DEFAULT_CONTENT_CHARSET)<span class="hljs-comment">;</span>
			HttpProtocolParams.setUseExpectContinue(params, true)<span class="hljs-comment">;</span>
			SSLSocketFactory.getSocketFactory().setHostnameVerifier(
new AllowAllHostnameVerifier())<span class="hljs-comment">;</span>
SchemeRegistry <span class="hljs-attr">schReg</span> = new SchemeRegistry()<span class="hljs-comment">;</span>
			schReg.register(new Scheme(&amp;<span class="hljs-comment">#34;http&amp;#34;, PlainSocketFactory</span>
					.getSocketFactory(), 80))<span class="hljs-comment">;</span>
			schReg.register(new Scheme(&amp;<span class="hljs-comment">#34;https&amp;#34;, SSLCustomSocketFactory</span>
					.getSocketFactory(context), 443))<span class="hljs-comment">;</span>
ClientConnectionManager <span class="hljs-attr">connMgr</span> = new ThreadSafeClientConnManager(
					params, schReg)<span class="hljs-comment">;</span>
DefaultHttpClient <span class="hljs-attr">client</span> = new DefaultHttpClient(connMgr, params)<span class="hljs-comment">;</span>
HttpGet <span class="hljs-attr">request</span> = new HttpGet(path)<span class="hljs-comment">;</span>
HttpResponse <span class="hljs-attr">httpResponse</span> = client.execute(request)<span class="hljs-comment">;</span>
int <span class="hljs-attr">responseCode</span> = httpResponse.getStatusLine().getStatusCode()<span class="hljs-comment">;</span>
String <span class="hljs-attr">message</span> = httpResponse.getStatusLine().getReasonPhrase()<span class="hljs-comment">;</span>
HttpEntity <span class="hljs-attr">entity</span> = httpResponse.getEntity()<span class="hljs-comment">;</span>
if (<span class="hljs-attr">responseCode</span> == <span class="hljs-number">200</span> &amp;&amp; entity != null) {
				Log.e(&amp;<span class="hljs-comment">#34;log&amp;#34;, entity.toString());</span>
			}
		} catch (MalformedURLException e) {
			e.printStackTrace()<span class="hljs-comment">;</span>
		} catch (ClientProtocolException e) {
			e.printStackTrace()<span class="hljs-comment">;</span>
		} catch (IOException e) {
			e.printStackTrace()<span class="hljs-comment">;</span>
		}
	}
public static class SSLCustomSocketFactory extends SSLSocketFactory {
private static final String <span class="hljs-attr">TAG</span> = &amp;<span class="hljs-comment">#34;SSLCustomSocketFactory&amp;#34;;</span>
private static final String <span class="hljs-attr">KEY_PASS</span> = &amp;<span class="hljs-comment">#34;123456&amp;#34;;</span>
public SSLCustomSocketFactory(KeyStore trustStore) throws Throwable {
super(trustStore)<span class="hljs-comment">;</span>
		}
public static SSLCustomSocketFactory getSocketFactory(Context context) {
InputStream <span class="hljs-attr">ins</span> = null<span class="hljs-comment">;</span>
			KeyStore trustStore<span class="hljs-comment">;</span>
try {
				<span class="hljs-attr">ins</span> = context.getResources().openRawResource(R.raw.srca)<span class="hljs-comment">;</span>
				<span class="hljs-attr">trustStore</span> = KeyStore.getInstance(KeyStore.getDefaultType())<span class="hljs-comment">;</span>
				trustStore.load(null)<span class="hljs-comment">;</span>
CertificateFactory <span class="hljs-attr">certificateFactory</span> = CertificateFactory
						.getInstance(&amp;<span class="hljs-comment">#34;X.509&amp;#34;);</span>
String <span class="hljs-attr">certificateAlias</span> = Integer.toString(<span class="hljs-number">2</span>)<span class="hljs-comment">;</span>
				trustStore.setCertificateEntry(certificateAlias,
						certificateFactory.generateCertificate(ins))<span class="hljs-comment">;</span>
				ins.close()<span class="hljs-comment">;</span>
SSLCustomSocketFactory <span class="hljs-attr">factory</span> = new SSLCustomSocketFactory(
						trustStore)<span class="hljs-comment">;</span>
return factory<span class="hljs-comment">;</span>
			} catch (KeyStoreException e) {
				e.printStackTrace()<span class="hljs-comment">;</span>
			} catch (IOException e) {
				e.printStackTrace()<span class="hljs-comment">;</span>
			} catch (CertificateException e) {
				e.printStackTrace()<span class="hljs-comment">;</span>
			} catch (NoSuchAlgorithmException e) {
				e.printStackTrace()<span class="hljs-comment">;</span>
			} catch (Throwable e) {
				e.printStackTrace()<span class="hljs-comment">;</span>
			}finally{
if(ins!=null){
try {
						ins.close()<span class="hljs-comment">;</span>
					} catch (IOException e) {
						e.printStackTrace()<span class="hljs-comment">;</span>
					}
				}
			}
return null<span class="hljs-comment">;</span>
		}
	}
</code></pre>
<p>ä¸è®ºæ˜¯æµè§ˆå™¨å¯¼å‡ºï¼Œè¿˜æ˜¯æœåŠ¡å™¨ç«¯è·å¾—ï¼Œéƒ½æ˜¯å…¬é’¥è¯ä¹¦ï¼Œæœ‰ä¸¤ç§æ ¼å¼ï¼šçº¯æ–‡æœ¬çš„.crtæ ¼å¼æˆ–æ˜¯äºŒè¿›åˆ¶çš„.ceræ ¼å¼ã€‚ä¸¤ç§éƒ½å¯ä»¥ç”¨ã€‚</p>
<p>ç„¶åï¼Œä½ å¦‚æœéœ€è¦ä¸€ä¸ªç‰¹å®šç‰ˆæœ¬çš„JCE Providerï¼Œç„¶ååœ¨è¿™ä¸ªç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š keytoolÂ -importcertÂ -vÂ -trustcacertsÂ -aliasÂ cert12306Â -fileÂ srca.cerÂ -keystoreÂ cert12306.bksÂ -storetypeÂ BKSÂ -providerclassÂ org.bouncycastle.jce.provider.BouncyCastleProviderÂ -providerpathÂ bcprov-jdk15on-148.jarrÂ -storepassÂ 123456</p>
<p>ç”Ÿæˆcert12306.bksæ–‡ä»¶ å¯¼å…¥åº”ç”¨ä¸­</p>
<pre><code class="hljs language-ini" lang="ini">
public static void GetNetWork3(Context context) {
try {
String <span class="hljs-attr">path</span> = &amp;<span class="hljs-comment">#34;https://kyfw.12306.cn/otn/&amp;#34;;</span>
BasicHttpParams <span class="hljs-attr">params</span> = new BasicHttpParams()<span class="hljs-comment">;</span>
			HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1)<span class="hljs-comment">;</span>
			HttpProtocolParams.setContentCharset(params,
					HTTP.DEFAULT_CONTENT_CHARSET)<span class="hljs-comment">;</span>
			HttpProtocolParams.setUseExpectContinue(params, true)<span class="hljs-comment">;</span>
			SSLSocketFactory.getSocketFactory().setHostnameVerifier(
new AllowAllHostnameVerifier())<span class="hljs-comment">;</span>
SchemeRegistry <span class="hljs-attr">schReg</span> = new SchemeRegistry()<span class="hljs-comment">;</span>
			schReg.register(new Scheme(&amp;<span class="hljs-comment">#34;http&amp;#34;, PlainSocketFactory</span>
					.getSocketFactory(), 80))<span class="hljs-comment">;</span>
			schReg.register(new Scheme(&amp;<span class="hljs-comment">#34;https&amp;#34;, SSLCustomSocketFactory2</span>
					.getSocketFactory(context), 443))<span class="hljs-comment">;</span>
ClientConnectionManager <span class="hljs-attr">connMgr</span> = new ThreadSafeClientConnManager(
					params, schReg)<span class="hljs-comment">;</span>
DefaultHttpClient <span class="hljs-attr">client</span> = new DefaultHttpClient(connMgr, params)<span class="hljs-comment">;</span>
HttpGet <span class="hljs-attr">request</span> = new HttpGet(path)<span class="hljs-comment">;</span>
HttpResponse <span class="hljs-attr">httpResponse</span> = client.execute(request)<span class="hljs-comment">;</span>
int <span class="hljs-attr">responseCode</span> = httpResponse.getStatusLine().getStatusCode()<span class="hljs-comment">;</span>
String <span class="hljs-attr">message</span> = httpResponse.getStatusLine().getReasonPhrase()<span class="hljs-comment">;</span>
HttpEntity <span class="hljs-attr">entity</span> = httpResponse.getEntity()<span class="hljs-comment">;</span>
if (<span class="hljs-attr">responseCode</span> == <span class="hljs-number">200</span> &amp;&amp; entity != null) {
				Log.e(&amp;<span class="hljs-comment">#34;log&amp;#34;, entity.toString());</span>
			}
		} catch (MalformedURLException e) {
			e.printStackTrace()<span class="hljs-comment">;</span>
		} catch (ClientProtocolException e) {
			e.printStackTrace()<span class="hljs-comment">;</span>
		} catch (IOException e) {
			e.printStackTrace()<span class="hljs-comment">;</span>
		}
	}
public static class SSLCustomSocketFactory2 extends SSLSocketFactory {
private static final String <span class="hljs-attr">TAG</span> = &amp;<span class="hljs-comment">#34;SSLCustomSocketFactory&amp;#34;;</span>
private static final String <span class="hljs-attr">KEY_PASS</span> = &amp;<span class="hljs-comment">#34;123456&amp;#34;;</span>
public SSLCustomSocketFactory2(KeyStore trustStore) throws Throwable {
super(trustStore)<span class="hljs-comment">;</span>
		}
public static SSLCustomSocketFactory2 getSocketFactory(Context context) {
InputStream <span class="hljs-attr">ins</span> = null<span class="hljs-comment">;</span>
			KeyStore trustStore<span class="hljs-comment">;</span>
try {
				<span class="hljs-attr">ins</span> = context.getResources().openRawResource(R.raw.cert12306)<span class="hljs-comment">;</span>
				<span class="hljs-attr">trustStore</span> = KeyStore.getInstance(KeyStore.getDefaultType())<span class="hljs-comment">;</span>
				trustStore.load(ins, KEY_PASS.toCharArray())<span class="hljs-comment">;</span>
SSLCustomSocketFactory2 <span class="hljs-attr">factory</span> = new SSLCustomSocketFactory2(
						trustStore)<span class="hljs-comment">;</span>
return factory<span class="hljs-comment">;</span>
			} catch (KeyStoreException e) {
				e.printStackTrace()<span class="hljs-comment">;</span>
			} catch (IOException e) {
				e.printStackTrace()<span class="hljs-comment">;</span>
			} catch (CertificateException e) {
				e.printStackTrace()<span class="hljs-comment">;</span>
			} catch (NoSuchAlgorithmException e) {
				e.printStackTrace()<span class="hljs-comment">;</span>
			} catch (Throwable e) {
				e.printStackTrace()<span class="hljs-comment">;</span>
			}finally{
if(ins!=null){
try {
						ins.close()<span class="hljs-comment">;</span>
					} catch (IOException e) {
						e.printStackTrace()<span class="hljs-comment">;</span>
					}
				}
			}
return null<span class="hljs-comment">;</span>
		}
	}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOSåº”ç”¨å‘å¸ƒï¼šApp Storeä¸Šæ¶å®Œæ•´æ­¥éª¤ä¸é”€å”®èŒƒå›´ç®¡ç†]]></title>    <link>https://juejin.cn/post/7582016579857580066</link>    <guid>https://juejin.cn/post/7582016579857580066</guid>    <pubDate>2025-12-10T09:47:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582016579857580066" data-draft-id="7581828086020898831" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOSåº”ç”¨å‘å¸ƒï¼šApp Storeä¸Šæ¶å®Œæ•´æ­¥éª¤ä¸é”€å”®èŒƒå›´ç®¡ç†"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T09:47:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒçŒ´çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2179705232165364"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOSåº”ç”¨å‘å¸ƒï¼šApp Storeä¸Šæ¶å®Œæ•´æ­¥éª¤ä¸é”€å”®èŒƒå›´ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2179705232165364/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒçŒ´çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:47:56.000Z" title="Wed Dec 10 2025 09:47:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç®¡ç† App çš„é”€å”®èŒƒå›´</p>
<p>åœ¨ App Store ä¸Šå‘å¸ƒ App çš„ä¸€èˆ¬æµç¨‹å¦‚ä¸‹ã€‚</p>
<h2 data-id="heading-0">ç¬¬ 1 æ­¥ï¼šé€‰æ‹©æ„å»ºç‰ˆæœ¬</h2>
<p>æ¯ä¸ª App å¯ä»¥æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬ä¹Ÿå¯ä»¥åŒ…å«å¤šä¸ªæ„å»ºç‰ˆæœ¬ã€‚è‹¥è¦å‘å¸ƒ Appï¼Œè¯· <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Fmanage-builds%2Fchoose-a-build-to-submit" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/manage-builds/choose-a-build-to-submit" ref="nofollow noopener noreferrer">é€‰æ‹©ä¸€ä¸ªæ„å»ºç‰ˆæœ¬å¹¶æäº¤è‡³å®¡æ ¸</a>ã€‚</p>
<p>ä½¿ç”¨AppUploaderå·¥å…·ï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾ä¸Šä¼ IPAæ–‡ä»¶åˆ°App Storeï¼Œæ”¯æŒWindowsã€Linuxå’ŒMacç³»ç»Ÿï¼Œæ— éœ€Xcodeï¼Œç®€åŒ–æ„å»ºç‰ˆæœ¬çš„é€‰æ‹©å’Œæäº¤è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-1">ç¬¬ 2 æ­¥ï¼šè®¾ç½® App Store ä»·æ ¼ä¸é”€å”®èŒƒå›´</h2>
<p>è¯·è®¾å®š App çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Fmanage-app-pricing%2Fset-a-price" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/manage-app-pricing/set-a-price" ref="nofollow noopener noreferrer">ä»·æ ¼</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Fmanage-app-information%2Fset-a-tax-category" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/manage-app-information/set-a-tax-category" ref="nofollow noopener noreferrer">ç¨åŠ¡ç±»åˆ«</a>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒApp çš„é”€å”®èŒƒå›´ä¸ºæ‰€æœ‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Freference%2Fapp-store-localizations" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/reference/app-store-localizations" ref="nofollow noopener noreferrer">App Store å›½å®¶æˆ–åœ°åŒº</a>ï¼Œä½†ä½ å¯ä»¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Fmanage-your-apps-availability%2Fmanage-availability-for-your-app-on-the-app-store" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/manage-your-apps-availability/manage-availability-for-your-app-on-the-app-store" ref="nofollow noopener noreferrer">ä¿®æ”¹æ­¤èŒƒå›´</a>ã€‚ä½ è¿˜å¯ä»¥é€‰æ‹© <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Fmanage-your-apps-availability%2Fpublish-for-pre-order" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/manage-your-apps-availability/publish-for-pre-order" ref="nofollow noopener noreferrer">ä»¥é¢„è´­å½¢å¼å‘å¸ƒ App</a>ã€‚</p>
<p>AppUploaderæä¾›äº†æ‰¹é‡ä¸Šä¼ åº”ç”¨æˆªå›¾å’Œæœ¬åœ°åŒ–ä¿¡æ¯çš„åŠŸèƒ½ï¼Œå¸®åŠ©å¿«é€Ÿè®¾ç½®å¤šè¯­è¨€ç‰ˆæœ¬çš„é”€å”®èŒƒå›´å’Œå…ƒæ•°æ®ï¼Œæå‡æ•ˆç‡ã€‚</p>
<h2 data-id="heading-2">ç¬¬ 3 æ­¥ï¼šæäº¤ App ä»¥ä¾›å®¡æ ¸</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Fmanage-submissions-to-app-review%2Foverview-of-submitting-for-review" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/manage-submissions-to-app-review/overview-of-submitting-for-review" ref="nofollow noopener noreferrer">æäº¤ App è‡³å®¡æ ¸</a>ï¼Œå¼€å¯â€œApp å®¡æ ¸â€æµç¨‹ã€‚App é€šè¿‡å®¡æ ¸åæ‰èƒ½åœ¨ App Store ä¸Šæ¶ã€‚åœ¨æäº¤ App ä¹‹å‰ï¼Œè¯· <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Freference%2Frequired-localizable-and-editable-properties" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/reference/required-localizable-and-editable-properties" ref="nofollow noopener noreferrer">è¾“å…¥æ‰€æœ‰å¿…å¡«çš„å…ƒæ•°æ®</a> å¹¶é€‰æ‹© App çš„å‘å¸ƒæ–¹å¼ï¼ŒåŒ…æ‹¬ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Fmanage-your-apps-availability%2Fselect-an-app-store-version-release-option" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/manage-your-apps-availability/select-an-app-store-version-release-option" ref="nofollow noopener noreferrer">æ‰‹åŠ¨å‘å¸ƒã€è‡ªåŠ¨å‘å¸ƒ</a> ä»¥åŠ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Fupdate-your-app%2Frelease-a-version-update-in-phases" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/update-your-app/release-a-version-update-in-phases" ref="nofollow noopener noreferrer">åˆ†é˜¶æ®µå‘å¸ƒ</a>ã€‚</p>
<p>é€šè¿‡AppUploaderï¼Œå¯ä»¥é«˜æ•ˆæäº¤åº”ç”¨è‡³App Storeå®¡æ ¸ï¼Œæ”¯æŒåœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸Šæ“ä½œï¼Œæ¯”ä¼ ç»Ÿæ–¹å¼æ›´ä¾¿æ·ï¼ŒåŠ é€Ÿä¸Šæ¶æµç¨‹ã€‚</p>
<h2 data-id="heading-3">ç¬¬ 4 æ­¥ï¼šæŸ¥çœ‹ App çŠ¶æ€å¹¶è§£å†³å®¡æ ¸é—®é¢˜</h2>
<p>æäº¤ App åï¼Œå…¶çŠ¶æ€ä¼šå˜ä¸ºâ€œæ­£åœ¨ç­‰å¾…å®¡æ ¸â€ã€‚å¦‚æœ App å­˜åœ¨ä»»ä½•é—®é¢˜ï¼Œè¯· <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Fmanage-submissions-to-app-review%2Freply-to-app-review-messages" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/manage-submissions-to-app-review/reply-to-app-review-messages" ref="nofollow noopener noreferrer">é˜…è¯»å¹¶å›å¤â€œApp å®¡æ ¸â€æ¶ˆæ¯</a>ã€‚App é€šè¿‡å®¡æ ¸åï¼Œå°†äº 24 å°æ—¶å†…ä¸Šæ¶è‡³ App Storeã€‚</p>
<h2 data-id="heading-4">ç¬¬ 5 æ­¥ï¼šç”³è¯· App Store ä¿ƒé”€ä»£ç </h2>
<p>App é€šè¿‡å®¡æ ¸åï¼Œä½ å¯ä»¥åœ¨ App ä¸Šæ¶ App Store ä¹‹å‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Foffer-promo-codes%2Frequest-and-manage-promo-codes" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/offer-promo-codes/request-and-manage-promo-codes" ref="nofollow noopener noreferrer">ç”³è¯·ä¿ƒé”€ä»£ç </a>ï¼Œç„¶åé€šè¿‡ç”µå­é‚®ä»¶ç­‰æ–¹å¼åˆ†äº«ç»™ç”¨æˆ·ã€‚ç”¨æˆ·åœ¨ App Store ä¸­è´­ä¹°ä½ çš„ App æ—¶è¾“å…¥ä¿ƒé”€ä»£ç å³å¯å…‘æ¢ã€‚</p>
<p><strong>ç›¸å…³å†…å®¹</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Freference%2Fin-app-purchase-and-subscriptions-pricing-and-availability" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/reference/in-app-purchase-and-subscriptions-pricing-and-availability" ref="nofollow noopener noreferrer">App å†…è´­ä¹°é¡¹ç›®å’Œè®¢é˜…çš„ä»·æ ¼ä¸é”€å”®èŒƒå›´</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fcn%2Fhelp%2Fapp-store-connect%2Freference%2Fapp-store-localizations" target="_blank" title="https://developer.apple.com/cn/help/app-store-connect/reference/app-store-localizations" ref="nofollow noopener noreferrer">App Store æœ¬åœ°åŒ–</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜ï¼šDNS è§£æè¿‡ç¨‹ä½ èƒ½è¯´æ¸…å—ï¼ŸDNS è§£æå…¨æµç¨‹æ·±åº¦å‰–æ]]></title>    <link>https://juejin.cn/post/7581876069609062443</link>    <guid>https://juejin.cn/post/7581876069609062443</guid>    <pubDate>2025-12-10T09:47:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581876069609062443" data-draft-id="7581876069609046059" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜ï¼šDNS è§£æè¿‡ç¨‹ä½ èƒ½è¯´æ¸…å—ï¼ŸDNS è§£æå…¨æµç¨‹æ·±åº¦å‰–æ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-10T09:47:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜ï¼šDNS è§£æè¿‡ç¨‹ä½ èƒ½è¯´æ¸…å—ï¼ŸDNS è§£æå…¨æµç¨‹æ·±åº¦å‰–æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:47:37.000Z" title="Wed Dec 10 2025 09:47:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿™ç¯‡æ–‡ç« å¯ä»¥å½“æˆä¸€æ¬¡ã€ŒDNS å¤ç›˜ã€ï¼šä»æµè§ˆå™¨æ•²ä¸‹å›è½¦ï¼Œåˆ°çœŸæ­£æ‹¿åˆ° IPï¼Œä¸­é—´æ¯ä¸€æ­¥éƒ½æ‘Šå¼€è®²æ¸…æ¥šã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>ç¿»é¢è¯•è®°å½•çš„æ—¶å€™ï¼Œè¿™é“é¢˜å‡ ä¹æ˜¯å¸¸å®¢ï¼š"è®²è®² DNS è§£æçš„è¿‡ç¨‹"ã€‚èƒ½è®²åˆ°å°¾çš„äººï¼Œå…¶å®ä¸å¤šã€‚</p>
<p>å¤§å¤šæ•°å›ç­”å¬èµ·æ¥éƒ½å·®ä¸å¤šï¼š</p>
<ul>
<li>"å°±æ˜¯æŠŠåŸŸåè½¬æ¢æˆ IP åœ°å€"</li>
<li>"å…ˆæŸ¥æœ¬åœ°ç¼“å­˜ï¼Œç„¶åæŸ¥ DNS æœåŠ¡å™¨"</li>
<li>"æœ‰ä¸ªé€’å½’æŸ¥è¯¢çš„è¿‡ç¨‹..."</li>
</ul>
<p>æ–¹å‘éƒ½å¯¹ï¼Œä½†æ›´åƒæ˜¯èƒŒè¯µç‰ˆç­”æ¡ˆâ€”â€”é¢è¯•å®˜å¬å®Œï¼Œå¤§æ¦‚çŸ¥é“ä½ å­¦è¿‡è¿™å—ï¼Œä½†å¾ˆéš¾åˆ¤æ–­ä½ æ˜¯çœŸçš„æƒ³æ˜ç™½äº†ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æƒ³åšçš„äº‹æ˜¯ï¼šæŠŠ DNS è§£æè¿™ä»¶äº‹æ‹†å¼€ã€è®²é€ã€‚æˆ‘ä»¬ä¸åªæŠŠå®Œæ•´æµç¨‹è¿‡ä¸€éï¼Œè¿˜é¡ºå¸¦æŠŠèƒŒåçš„è®¾è®¡æ€è·¯ã€ç¼“å­˜ç­–ç•¥å’Œå¸¸è§é¢è¯•è¿½é—®ä¸€å¹¶ç†ä¸€éã€‚çœ‹å®Œä¹‹åï¼Œä½ åœ¨é¢è¯•é‡Œä¸åªâ€œç­”å¾—å‡ºæ¥â€ï¼Œè€Œæ˜¯èƒ½é¡ºç€é¢è¯•å®˜çš„è¿½é—®ç»§ç»­å¾€ä¸‹èŠã€‚</p>
<h2 data-id="heading-1">ç›®å½•</h2>
<ul>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81dns%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E8%A7%A3%E6%9E%90" title="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81dns%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E8%A7%A3%E6%9E%90">ä¸ºä»€ä¹ˆéœ€è¦DNSï¼Ÿè®¾è®¡å“²å­¦è§£æ</a></li>
<li><a href="#dns%E8%A7%A3%E6%9E%90%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3" title="#dns%E8%A7%A3%E6%9E%90%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3">DNSè§£æå®Œæ•´æµç¨‹è¯¦è§£</a></li>
<li><a href="#%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90" title="#%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90">é«˜é¢‘é¢è¯•é¢˜æ·±åº¦å‰–æ</a></li>
<li><a href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8" title="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8">æ€§èƒ½ä¼˜åŒ–ä¸å®é™…åº”ç”¨</a></li>
<li><a href="#%E9%9D%A2%E8%AF%95%E5%AE%98%E4%BC%9A%E8%BF%BD%E9%97%AE%E7%9A%84%E8%BF%9B%E9%98%B6%E9%97%AE%E9%A2%98" title="#%E9%9D%A2%E8%AF%95%E5%AE%98%E4%BC%9A%E8%BF%BD%E9%97%AE%E7%9A%84%E8%BF%9B%E9%98%B6%E9%97%AE%E9%A2%98">é¢è¯•å®˜ä¼šè¿½é—®çš„è¿›é˜¶é—®é¢˜</a></li>
</ul>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆéœ€è¦DNSï¼Ÿè®¾è®¡å“²å­¦è§£æ</h2>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆéœ€è¦åŸŸåç³»ç»Ÿï¼Ÿ</h3>
<p>åœ¨ DNS å‡ºç°ä¹‹å‰ï¼Œç½‘ç»œä¸­çš„ä¸»æœºè¯†åˆ«ä¾èµ–äº hosts æ–‡ä»¶ï¼š</p>
<p><strong>æ—©æœŸçš„ hosts æ–‡ä»¶æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ¯å°æœºå™¨ç»´æŠ¤ä¸€ä¸ªæœ¬åœ°çš„åå­—-åœ°å€æ˜ å°„æ–‡ä»¶</li>
<li>éœ€è¦æ‰‹åŠ¨åŒæ­¥æ›´æ–°</li>
<li>æ— æ³•æ‰©å±•åˆ°å¤§è§„æ¨¡ç½‘ç»œ</li>
</ul>
<p><strong>é—®é¢˜æ˜¾è€Œæ˜“è§</strong>ï¼š</p>
<ul>
<li>ç®¡ç†å¤æ‚ï¼šæ¯å°æœºå™¨éƒ½è¦æ›´æ–°</li>
<li>å†²çªé¢‘ç¹ï¼šæ²¡æœ‰ç»Ÿä¸€çš„å‘½åè§„èŒƒ</li>
<li>æ‰©å±•å›°éš¾ï¼šæ— æ³•æ”¯æŒäº’è”ç½‘è§„æ¨¡</li>
</ul>
<h3 data-id="heading-4">DNS çš„åˆ†å±‚è®¾è®¡å“²å­¦</h3>
<p>DNS é‡‡ç”¨äº†<strong>åˆ†å±‚åˆ†å¸ƒ</strong>çš„è®¾è®¡ï¼š</p>
<p><strong>å±‚æ¬¡åŒ–å‘½åç©ºé—´</strong>ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">.                    (æ ¹åŸŸ)
â”œâ”€â”€ com.             (é¡¶çº§åŸŸ)
â”‚   â”œâ”€â”€ google.com.  (äºŒçº§åŸŸ)
â”‚   â””â”€â”€ github.com.
â”œâ”€â”€ org.
â””â”€â”€ cn.
    â””â”€â”€ baidu.cn.
</code></pre>
<p><strong>åˆ†å¸ƒå¼ç®¡ç†</strong>ï¼š</p>
<ul>
<li>æ¯ä¸€å±‚ç”±ä¸åŒçš„æœºæ„ç®¡ç†</li>
<li>æ ¹åŸŸç”± ICANN ç®¡ç†</li>
<li>é¡¶çº§åŸŸç”±å„å›½æ”¿åºœæˆ–å•†ä¸šæœºæ„ç®¡ç†</li>
<li>äºŒçº§åŸŸç”±åŸŸåæ³¨å†Œå•†å’Œç”¨æˆ·ç®¡ç†</li>
</ul>
<p>è¿™å°±åƒç°å®ä¸–ç•Œçš„åœ°å€ç³»ç»Ÿï¼šå›½å®¶â†’çœä»½â†’åŸå¸‚â†’è¡—é“â†’é—¨ç‰Œå·ã€‚</p>
<h2 data-id="heading-5">DNSè§£æå®Œæ•´æµç¨‹è¯¦è§£</h2>
<h3 data-id="heading-6">é¢è¯•æ ‡å‡†ç­”æ¡ˆï¼š8æ­¥å®Œæ•´æµç¨‹</h3>
<p>å½“ä½ åœ¨æµè§ˆå™¨è¾“å…¥ <code>www.example.com</code> å¹¶æŒ‰ä¸‹å›è½¦ï¼ŒèƒŒåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»¥è®¿é—® www.example.com ä¸ºä¾‹</span>
<span class="hljs-comment">// å®Œæ•´çš„DNSè§£ææµç¨‹å¦‚ä¸‹ï¼š</span>

<span class="hljs-keyword">const</span> dnsResolution = {
    <span class="hljs-attr">step1</span>: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥æµè§ˆå™¨<span class="hljs-variable constant_">DNS</span>ç¼“å­˜&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step2</span>: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥æ“ä½œç³»ç»Ÿ<span class="hljs-variable constant_">DNS</span>ç¼“å­˜&amp;#<span class="hljs-number">34</span>;,  
    <span class="hljs-attr">step3</span>: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥è·¯ç”±å™¨ç¼“å­˜&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step4</span>: &amp;#<span class="hljs-number">34</span>;æŸ¥è¯¢æœ¬åœ°<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨ï¼ˆé€šå¸¸æ˜¯<span class="hljs-variable constant_">ISP</span>æä¾›ï¼‰&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step5</span>: &amp;#<span class="hljs-number">34</span>;æœ¬åœ°<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨æŸ¥è¯¢æ ¹åŸŸåæœåŠ¡å™¨&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step6</span>: &amp;#<span class="hljs-number">34</span>;æŸ¥è¯¢é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼ˆ.<span class="hljs-property">com</span>ï¼‰&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step7</span>: &amp;#<span class="hljs-number">34</span>;æŸ¥è¯¢æƒå¨åŸŸåæœåŠ¡å™¨ï¼ˆexample.<span class="hljs-property">com</span>ï¼‰&amp;#<span class="hljs-number">34</span>;, 
    <span class="hljs-attr">step8</span>: &amp;#<span class="hljs-number">34</span>;è¿”å›<span class="hljs-variable constant_">IP</span>åœ°å€å¹¶ç¼“å­˜&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<h3 data-id="heading-7">è¯¦ç»†æµç¨‹å›¾è§£</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·è¾“å…¥ www.example.com] --&gt; B{æµè§ˆå™¨ç¼“å­˜?}
    B --&gt;|å‘½ä¸­| I[è¿”å›IPåœ°å€]
    B --&gt;|æœªå‘½ä¸­| C{æ“ä½œç³»ç»Ÿç¼“å­˜?}
    C --&gt;|å‘½ä¸­| I
    C --&gt;|æœªå‘½ä¸­| D{è·¯ç”±å™¨ç¼“å­˜?}
    D --&gt;|å‘½ä¸­| I
    D --&gt;|æœªå‘½ä¸­| E[æŸ¥è¯¢æœ¬åœ°DNSæœåŠ¡å™¨]
    E --&gt; F[æŸ¥è¯¢æ ¹åŸŸåæœåŠ¡å™¨]
    F --&gt; G[æŸ¥è¯¢.comé¡¶çº§åŸŸæœåŠ¡å™¨]
    G --&gt; H[æŸ¥è¯¢example.comæƒå¨æœåŠ¡å™¨]
    H --&gt; I
    I --&gt; J[å»ºç«‹TCPè¿æ¥]
</code></pre>
<h3 data-id="heading-8">ç¼“å­˜å±‚æ¬¡æ·±åº¦è§£æ</h3>
<p>DNS ç³»ç»Ÿçš„å¦ä¸€ä¸ªæ ¸å¿ƒè®¾è®¡æ˜¯<strong>å¤šçº§ç¼“å­˜</strong>ï¼š</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ</strong></p>
<ul>
<li>å‡å°‘ç½‘ç»œè¯·æ±‚ï¼šé¿å…æ¯æ¬¡éƒ½æŸ¥è¯¢æƒå¨æœåŠ¡å™¨</li>
<li>æé«˜å“åº”é€Ÿåº¦ï¼šæœ¬åœ°ç¼“å­˜å‡ ä¹æ˜¯ç¬æ—¶å“åº”</li>
<li>é™ä½ç³»ç»Ÿè´Ÿè½½ï¼šå‡å°‘æ ¹æœåŠ¡å™¨å’Œæƒå¨æœåŠ¡å™¨çš„å‹åŠ›</li>
</ul>
<p><strong>ç¼“å­˜çš„å±‚æ¬¡</strong>ï¼š</p>
<ol>
<li>æµè§ˆå™¨ç¼“å­˜ï¼šæœ€å¿«çš„å“åº”</li>
<li>æ“ä½œç³»ç»Ÿç¼“å­˜ï¼šç³»ç»Ÿçº§åˆ«çš„ç¼“å­˜</li>
<li>è·¯ç”±å™¨ç¼“å­˜ï¼šç½‘ç»œè®¾å¤‡çš„ç¼“å­˜</li>
<li>ISP ç¼“å­˜ï¼šè¿è¥å•†çš„é€’å½’æœåŠ¡å™¨</li>
<li>æƒå¨æœåŠ¡å™¨ï¼šæœ€ç»ˆçš„æ•°æ®æº</li>
</ol>
<h2 data-id="heading-9">é«˜é¢‘é¢è¯•é¢˜æ·±åº¦å‰–æ</h2>
<h3 data-id="heading-10">é¢è¯•é¢˜1ï¼šé€’å½’æŸ¥è¯¢ vs è¿­ä»£æŸ¥è¯¢çš„åŒºåˆ«</h3>
<p>è¿™æ˜¯é¢è¯•å®˜æœ€çˆ±é—®çš„é—®é¢˜ï¼</p>
<p><strong>é€’å½’æŸ¥è¯¢</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®¢æˆ·ç«¯çš„è§†è§’ï¼šæˆ‘åªé—®ä¸€æ¬¡ï¼Œä½ å¸®æˆ‘æå®šä¸€åˆ‡</span>
<span class="hljs-keyword">const</span> recursiveQuery = {
    <span class="hljs-attr">client</span>: &amp;#<span class="hljs-number">34</span>;æœ¬åœ°<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨ï¼Œå¸®æˆ‘æŸ¥ www.<span class="hljs-property">example</span>.<span class="hljs-property">com</span> çš„<span class="hljs-variable constant_">IP</span>&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">localDNS</span>: &amp;#<span class="hljs-number">34</span>;å¥½çš„ï¼Œæˆ‘æ¥å¸®ä½ æå®šï¼Œç¨ç­‰...&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-comment">// æœ¬åœ°DNSæœåŠ¡å™¨ä»£æ›¿å®¢æˆ·ç«¯å®Œæˆæ‰€æœ‰æŸ¥è¯¢</span>
    <span class="hljs-attr">process</span>: &amp;#<span class="hljs-number">34</span>;æœ¬åœ°<span class="hljs-variable constant_">DNS</span> â†’ æ ¹æœåŠ¡å™¨ â†’ .<span class="hljs-property">com</span>æœåŠ¡å™¨ â†’ example.<span class="hljs-property">com</span>æœåŠ¡å™¨&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">response</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<p><strong>è¿­ä»£æŸ¥è¯¢</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®¢æˆ·ç«¯çš„è§†è§’ï¼šæ¯ä¸€æ­¥éƒ½è¦è‡ªå·±é—®</span>
<span class="hljs-keyword">const</span> iterativeQuery = {
    <span class="hljs-attr">step1</span>: &amp;#<span class="hljs-number">34</span>;å®¢æˆ·ç«¯é—®æ ¹æœåŠ¡å™¨ï¼šwww.<span class="hljs-property">example</span>.<span class="hljs-property">com</span>åœ¨å“ªï¼Ÿ&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step1Response</span>: &amp;#<span class="hljs-number">34</span>;æˆ‘ä¸çŸ¥é“ï¼Œä½†æ˜¯.<span class="hljs-property">com</span>åŸŸçš„æœåŠ¡å™¨åœ¨è¿™é‡Œ&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step2</span>: &amp;#<span class="hljs-number">34</span>;å®¢æˆ·ç«¯é—®.<span class="hljs-property">com</span>æœåŠ¡å™¨ï¼šwww.<span class="hljs-property">example</span>.<span class="hljs-property">com</span>åœ¨å“ªï¼Ÿ&amp;#<span class="hljs-number">34</span>;, 
    <span class="hljs-attr">step2Response</span>: &amp;#<span class="hljs-number">34</span>;æˆ‘ä¸çŸ¥é“ï¼Œä½†æ˜¯example.<span class="hljs-property">com</span>çš„æœåŠ¡å™¨åœ¨è¿™é‡Œ&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step3</span>: &amp;#<span class="hljs-number">34</span>;å®¢æˆ·ç«¯é—®example.<span class="hljs-property">com</span>æœåŠ¡å™¨ï¼šwww.<span class="hljs-property">example</span>.<span class="hljs-property">com</span>çš„<span class="hljs-variable constant_">IP</span>æ˜¯ï¼Ÿ&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step3Response</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<p><strong>é¢è¯•åŠ åˆ†ç‚¹</strong>ï¼šç°å®ä¸­ï¼Œå®¢æˆ·ç«¯åˆ°æœ¬åœ°DNSæ˜¯é€’å½’æŸ¥è¯¢ï¼Œæœ¬åœ°DNSåˆ°å…¶ä»–æœåŠ¡å™¨æ˜¯è¿­ä»£æŸ¥è¯¢ã€‚</p>
<h3 data-id="heading-11">é¢è¯•é¢˜2ï¼šä¸ºä»€ä¹ˆéœ€è¦13ä¸ªæ ¹æœåŠ¡å™¨ï¼Ÿ</h3>
<p><strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>æŠ€æœ¯é™åˆ¶</strong>ï¼šUDPåŒ…å¤§å°é™åˆ¶ä¸º512å­—èŠ‚ï¼Œåªèƒ½å®¹çº³13ä¸ªæ ¹æœåŠ¡å™¨çš„IPåœ°å€</li>
<li><strong>è¶³å¤Ÿå†—ä½™</strong>ï¼š13ä¸ªå·²ç»æä¾›äº†å……åˆ†çš„å†—ä½™å’Œè´Ÿè½½åˆ†æ•£</li>
<li><strong>å…¨çƒåˆ†å¸ƒ</strong>ï¼šé€šè¿‡ä»»æ’­æŠ€æœ¯ï¼Œå®é™…æœ‰æ•°ç™¾ä¸ªæ ¹æœåŠ¡å™¨èŠ‚ç‚¹</li>
</ul>
<p><strong>åŠ åˆ†å›ç­”</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> rootServers = {
    <span class="hljs-attr">technical</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">UDP</span>åŒ…<span class="hljs-number">512</span>å­—èŠ‚é™åˆ¶ï¼Œ<span class="hljs-number">13</span>ä¸ª<span class="hljs-title class_">IPv4</span>åœ°å€åˆšå¥½è£…å¾—ä¸‹&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">practical</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">13</span>ä¸ªå·²ç»è¶³å¤Ÿå®ç°å…¨çƒè´Ÿè½½å‡è¡¡å’Œå®¹é”™&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">evolution</span>: &amp;#<span class="hljs-number">34</span>;ç°ä»£é€šè¿‡<span class="hljs-title class_">IPv6</span>å’Œ<span class="hljs-variable constant_">EDNS</span>å¯ä»¥æ”¯æŒæ›´å¤šï¼Œä½†å†å²åŒ…è¢±&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<h3 data-id="heading-12">é¢è¯•é¢˜3ï¼šDNSè§£æå¤±è´¥çš„å¸¸è§åŸå› </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> dnsFailureReasons = {
    <span class="hljs-comment">// ç½‘ç»œå±‚é¢</span>
    <span class="hljs-attr">networkIssues</span>: {
        &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨å®•æœº&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;ä½¿ç”¨å¤‡ç”¨<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨<span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>&amp;#<span class="hljs-number">34</span>;,
        &amp;#<span class="hljs-number">34</span>;ç½‘ç»œä¸é€š&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥ç½‘ç»œè¿æ¥&amp;#<span class="hljs-number">34</span>;,
        &amp;#<span class="hljs-number">34</span>;é˜²ç«å¢™æ‹¦æˆª&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥<span class="hljs-number">53</span>ç«¯å£æ˜¯å¦å¼€æ”¾&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// é…ç½®å±‚é¢  </span>
    <span class="hljs-attr">configIssues</span>: {
        &amp;#<span class="hljs-number">34</span>;åŸŸåè¿‡æœŸ&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;åŠæ—¶ç»­è´¹åŸŸå&amp;#<span class="hljs-number">34</span>;,
        &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">DNS</span>è®°å½•é…ç½®é”™è¯¯&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥Aè®°å½•ã€<span class="hljs-variable constant_">CNAME</span>è®°å½•&amp;#<span class="hljs-number">34</span>;,
        &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">TTL</span>è®¾ç½®è¿‡é•¿&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;æ›´æ–°åéœ€è¦ç­‰å¾…<span class="hljs-variable constant_">TTL</span>è¿‡æœŸ&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// ç¼“å­˜å±‚é¢</span>
    <span class="hljs-attr">cacheIssues</span>: {
        &amp;#<span class="hljs-number">34</span>;ç¼“å­˜æ±¡æŸ“&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;æ¸…ç©º<span class="hljs-variable constant_">DNS</span>ç¼“å­˜&amp;#<span class="hljs-number">34</span>;,
        &amp;#<span class="hljs-number">34</span>;ç¼“å­˜è¿‡æœŸ&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;ç­‰å¾…è‡ªåŠ¨æ›´æ–°æˆ–æ‰‹åŠ¨åˆ·æ–°&amp;#<span class="hljs-number">34</span>;
    }
};
</code></pre>
<h3 data-id="heading-13">è®°å½•ç±»å‹çš„è®¾è®¡æ„å›¾</h3>
<p>DNS ä¸åªæ˜¯ç®€å•çš„åå­—åˆ° IP çš„æ˜ å°„ï¼Œå®ƒæ”¯æŒå¤šç§è®°å½•ç±»å‹ï¼š</p>
<p><strong>A è®°å½•</strong>ï¼šåŸŸååˆ° IPv4 åœ°å€</p>
<ul>
<li><code>www.example.com â†’ 192.168.1.1</code></li>
<li>æœ€åŸºç¡€çš„æ˜ å°„å…³ç³»</li>
</ul>
<p><strong>AAAA è®°å½•</strong>ï¼šåŸŸååˆ° IPv6 åœ°å€</p>
<ul>
<li>ä¸ºäº†æ”¯æŒ IPv6 è€Œè®¾è®¡</li>
<li>æœªæ¥ç½‘ç»œçš„åŸºç¡€</li>
</ul>
<p><strong>CNAME è®°å½•</strong>ï¼šåŸŸååˆ°åŸŸåçš„åˆ«å</p>
<ul>
<li><code>blog.example.com â†’ www.example.com</code></li>
<li>ä¾¿äºç®¡ç†å’Œé‡å®šå‘</li>
</ul>
<p><strong>MX è®°å½•</strong>ï¼šé‚®ä»¶æœåŠ¡å™¨æŒ‡å‘</p>
<ul>
<li>æŒ‡å®šåŸŸåçš„é‚®ä»¶æœåŠ¡å™¨</li>
<li>æ”¯æŒä¼˜å…ˆçº§è®¾ç½®</li>
</ul>
<p><strong>TXT è®°å½•</strong>ï¼šä»»æ„æ–‡æœ¬ä¿¡æ¯</p>
<ul>
<li>åŸŸåéªŒè¯ã€SPF è®°å½•ç­‰</li>
<li>æ‰©å±•æ€§å¾ˆå¼ºçš„è®¾è®¡</li>
</ul>
<h3 data-id="heading-14">TTL çš„ç¼“å­˜ç­–ç•¥</h3>
<p>TTLï¼ˆTime To Liveï¼‰ä½“ç°äº†ç¼“å­˜ç­–ç•¥çš„ç²¾å¦™è®¾è®¡ï¼š</p>
<p><strong>TTL çš„ä½œç”¨</strong>ï¼š</p>
<ul>
<li>æ§åˆ¶ç¼“å­˜æ—¶é—´ï¼šå¹³è¡¡æ€§èƒ½å’Œä¸€è‡´æ€§</li>
<li>æƒå¨æœåŠ¡å™¨å¯ä»¥æ§åˆ¶ç¼“å­˜ç­–ç•¥</li>
<li>ä¸åŒè®°å½•å¯ä»¥æœ‰ä¸åŒçš„ TTL</li>
</ul>
<p><strong>TTL è®¾ç½®çš„æƒè¡¡</strong>ï¼š</p>
<ul>
<li><strong>çŸ­ TTL</strong>ï¼šæ›´æ–°å¿«ï¼Œä½†æŸ¥è¯¢é¢‘ç¹</li>
<li><strong>é•¿ TTL</strong>ï¼šæ€§èƒ½å¥½ï¼Œä½†æ›´æ–°æ…¢</li>
<li><strong>åŠ¨æ€è°ƒæ•´</strong>ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚çµæ´»è®¾ç½®</li>
</ul>
<h2 data-id="heading-15">æ€§èƒ½ä¼˜åŒ–ä¸å®é™…åº”ç”¨</h2>
<h3 data-id="heading-16">å‰ç«¯DNSä¼˜åŒ–ç­–ç•¥</h3>
<p><strong>1. DNSé¢„è§£æ</strong>ï¼š</p>
<pre><code class="hljs language-html" lang="html">






</code></pre>
<p><strong>2. JavaScript DNSé¢„çƒ­</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŠ¨æ€é¢„è§£æ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">prefetchDNS</span>(<span class="hljs-params">hostname</span>) {
    <span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'link'</span>);
    link.<span class="hljs-property">rel</span> = <span class="hljs-string">'dns-prefetch'</span>;
    link.<span class="hljs-property">href</span> = <span class="hljs-string">`//<span class="hljs-subst">${hostname}</span>`</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(link);
}

<span class="hljs-comment">// åœ¨ç”¨æˆ·å¯èƒ½è®¿é—®å‰é¢„çƒ­</span>
<span class="hljs-title function_">prefetchDNS</span>(<span class="hljs-string">'next-page-api.com'</span>);
</code></pre>
<p><strong>3. æ™ºèƒ½DNSé…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> dnsOptimization = {
    <span class="hljs-comment">// å‡å°‘DNSæŸ¥è¯¢æ¬¡æ•°</span>
    <span class="hljs-attr">domainSharding</span>: &amp;#<span class="hljs-number">34</span>;é¿å…è¿‡å¤šå­åŸŸåï¼Œå‡å°‘<span class="hljs-variable constant_">DNS</span>æŸ¥è¯¢&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// é€‰æ‹©å¿«é€ŸDNSæœåŠ¡å™¨  </span>
    <span class="hljs-attr">publicDNS</span>: [&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span>&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">114.114</span><span class="hljs-number">.114</span><span class="hljs-number">.114</span>&amp;#<span class="hljs-number">34</span>;],
    
    <span class="hljs-comment">// æœ¬åœ°DNSç¼“å­˜</span>
    <span class="hljs-attr">localCache</span>: &amp;#<span class="hljs-number">34</span>;åˆç†è®¾ç½®æµè§ˆå™¨<span class="hljs-variable constant_">DNS</span>ç¼“å­˜æ—¶é—´&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<h3 data-id="heading-17">å®‰å…¨è€ƒè™‘</h3>
<p><strong>DNS åŠ«æŒé˜²æŠ¤</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨å¯ä¿¡çš„ DNS æœåŠ¡å™¨ï¼ˆå¦‚ 8.8.8.8ã€1.1.1.1ï¼‰</li>
<li>å¯ç”¨ DNS over HTTPS (DoH) æˆ– DNS over TLS (DoT)</li>
<li>ç›‘æ§ DNS è§£æç»“æœçš„å¼‚å¸¸</li>
</ul>
<p><strong>åŸŸåå®‰å…¨ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>åŠæ—¶ç»­è´¹åŸŸåï¼Œé¿å…è¢«æ¶æ„æŠ¢æ³¨</li>
<li>ä½¿ç”¨åŸŸåé”å®šæœåŠ¡</li>
<li>ç›‘æ§åŸŸåè§£æå˜åŒ–</li>
</ul>
<h3 data-id="heading-18">æ€§èƒ½ç›‘æ§</h3>
<p><strong>DNS è§£ææ—¶é—´ç›‘æ§</strong>ï¼š</p>
<ul>
<li>ç›‘æ§ä¸åŒåœ°åŒºçš„ DNS è§£æé€Ÿåº¦</li>
<li>è¯†åˆ« DNS è§£æç“¶é¢ˆ</li>
<li>ä¼˜åŒ– DNS é…ç½®</li>
</ul>
<p><strong>ç¼“å­˜å‘½ä¸­ç‡åˆ†æ</strong>ï¼š</p>
<ul>
<li>åˆ†æç¼“å­˜æ•ˆæœ</li>
<li>è°ƒæ•´ TTL è®¾ç½®</li>
<li>ä¼˜åŒ–ç¼“å­˜ç­–ç•¥</li>
</ul>
<h2 data-id="heading-19">é¢è¯•å®˜ä¼šè¿½é—®çš„è¿›é˜¶é—®é¢˜</h2>
<h3 data-id="heading-20">è¿½é—®1ï¼šå¦‚æœDNSæœåŠ¡å™¨å…¨éƒ¨æŒ‚äº†æ€ä¹ˆåŠï¼Ÿ</h3>
<p><strong>å±‚å±‚é€’è¿›çš„å›ç­”</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> dnsFailureHandling = {
    <span class="hljs-attr">level1</span>: &amp;#<span class="hljs-number">34</span>;æµè§ˆå™¨ç¼“å­˜å…œåº•&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">level2</span>: &amp;#<span class="hljs-number">34</span>;æ“ä½œç³»ç»Ÿç¼“å­˜å…œåº•&amp;#<span class="hljs-number">34</span>;, 
    <span class="hljs-attr">level3</span>: &amp;#<span class="hljs-number">34</span>;è·¯ç”±å™¨ç¼“å­˜å…œåº•&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">level4</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">ISP</span>å¤šä¸ª<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨è½®è¯¢&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">level5</span>: &amp;#<span class="hljs-number">34</span>;ä½¿ç”¨å¤‡ç”¨å…¬å…±<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">level6</span>: &amp;#<span class="hljs-number">34</span>;æœ€åæƒ…å†µï¼šç›´æ¥ä½¿ç”¨<span class="hljs-variable constant_">IP</span>åœ°å€è®¿é—®&amp;#<span class="hljs-number">34</span>;
};

<span class="hljs-comment">// å®é™…å¤„ç†ç­–ç•¥</span>
<span class="hljs-keyword">const</span> fallbackStrategy = {
    <span class="hljs-attr">primary</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">119.29</span><span class="hljs-number">.29</span><span class="hljs-number">.29</span>&amp;#<span class="hljs-number">34</span>;,    <span class="hljs-comment">// è…¾è®¯DNS</span>
    <span class="hljs-attr">secondary</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>&amp;#<span class="hljs-number">34</span>;,       <span class="hljs-comment">// Google DNS  </span>
    <span class="hljs-attr">tertiary</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span>&amp;#<span class="hljs-number">34</span>;,       <span class="hljs-comment">// Cloudflare DNS</span>
    <span class="hljs-attr">emergency</span>: &amp;#<span class="hljs-number">34</span>;ç›´æ¥<span class="hljs-variable constant_">IP</span>è®¿é—®æˆ–ç¦»çº¿é¡µé¢&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<p><strong>åŠ åˆ†ç‚¹</strong>ï¼šæåˆ°DNSçš„åˆ†å¸ƒå¼è®¾è®¡å’Œä»»æ’­æŠ€æœ¯è®©æ•´ä½“æœåŠ¡å¾ˆéš¾å®Œå…¨æŒ‚æ‰ã€‚</p>
<h3 data-id="heading-21">è¿½é—®2ï¼šä¸ºä»€ä¹ˆæœ‰äº›ç½‘ç«™æ‰“å¼€å¾ˆæ…¢ï¼ŒDNSè§£æéœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ</h3>
<p><strong>æ€§èƒ½æ•°æ®åˆ†æ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> dnsPerformanceData = {
    <span class="hljs-comment">// å„é˜¶æ®µè€—æ—¶ï¼ˆå…¸å‹å€¼ï¼‰</span>
    <span class="hljs-attr">browserCache</span>: &amp;#<span class="hljs-number">34</span>;0msï¼ˆå¦‚æœå‘½ä¸­ï¼‰&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">osCache</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">1</span>-5msï¼ˆå¦‚æœå‘½ä¸­ï¼‰&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">localDNSQuery</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">10</span>-50msï¼ˆä¸­å›½å¤§é™†ï¼‰&amp;#<span class="hljs-number">34</span>;, 
    <span class="hljs-attr">recursiveQuery</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">50</span>-200msï¼ˆé¦–æ¬¡æŸ¥è¯¢ï¼‰&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// å½±å“å› ç´ </span>
    <span class="hljs-attr">factors</span>: {
        <span class="hljs-attr">networkLatency</span>: &amp;#<span class="hljs-number">34</span>;ç½‘ç»œå»¶è¿Ÿæ˜¯ä¸»è¦å› ç´ &amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">dnsServerLocation</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨åœ°ç†ä½ç½®&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">cacheHitRate</span>: &amp;#<span class="hljs-number">34</span>;ç¼“å­˜å‘½ä¸­ç‡&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">queryType</span>: &amp;#<span class="hljs-number">34</span>;æŸ¥è¯¢ç±»å‹ï¼ˆA/<span class="hljs-variable constant_">AAAA</span>/<span class="hljs-variable constant_">CNAME</span>ï¼‰&amp;#<span class="hljs-number">34</span>;
    }
};
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨CDNå‡å°‘DNSæŸ¥è¯¢é“¾é•¿åº¦</li>
<li>é€‰æ‹©åœ°ç†ä½ç½®æ›´è¿‘çš„DNSæœåŠ¡å™¨</li>
<li>åˆç†è®¾ç½®TTLå¹³è¡¡æ›´æ–°é€Ÿåº¦å’Œæ€§èƒ½</li>
</ul>
<h3 data-id="heading-22">è¿½é—®3ï¼šHTTPSç½‘ç«™çš„DNSè§£ææœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„ï¼Ÿ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> httpsSpecialHandling = {
    <span class="hljs-comment">// DNSè§£æé˜¶æ®µç›¸åŒ</span>
    <span class="hljs-attr">dnsPhase</span>: &amp;#<span class="hljs-number">34</span>;ä¸<span class="hljs-variable constant_">HTTP</span>å®Œå…¨ä¸€æ ·ï¼Œéƒ½æ˜¯è§£æåŸŸååˆ°<span class="hljs-variable constant_">IP</span>&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// ä½†åç»­æ­¥éª¤ä¸åŒ</span>
    <span class="hljs-attr">afterDNS</span>: {
        <span class="hljs-attr">tlsHandshake</span>: &amp;#<span class="hljs-number">34</span>;éœ€è¦é¢å¤–çš„<span class="hljs-variable constant_">TLS</span>æ¡æ‰‹è¿‡ç¨‹&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">certificateValidation</span>: &amp;#<span class="hljs-number">34</span>;éœ€è¦éªŒè¯<span class="hljs-variable constant_">SSL</span>è¯ä¹¦&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">sni</span>: &amp;#<span class="hljs-number">34</span>;å¯èƒ½éœ€è¦<span class="hljs-variable constant_">SNI</span>ï¼ˆ<span class="hljs-title class_">Server</span> <span class="hljs-title class_">Name</span> <span class="hljs-title class_">Indication</span>ï¼‰&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// æ€§èƒ½å½±å“</span>
    <span class="hljs-attr">performance</span>: {
        <span class="hljs-attr">additionalRoundTrips</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">TLS</span>æ¡æ‰‹å¢åŠ <span class="hljs-number">1</span>-<span class="hljs-number">2</span>ä¸ª<span class="hljs-variable constant_">RTT</span>&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">certificateChain</span>: &amp;#<span class="hljs-number">34</span>;ä¸‹è½½å’ŒéªŒè¯è¯ä¹¦é“¾&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">ocspStapling</span>: &amp;#<span class="hljs-number">34</span>;å¯èƒ½çš„<span class="hljs-variable constant_">OCSP</span>æ£€æŸ¥&amp;#<span class="hljs-number">34</span>;
    }
};
</code></pre>
<h3 data-id="heading-23">è¿½é—®4ï¼šCDNæ˜¯å¦‚ä½•é€šè¿‡DNSå®ç°æ™ºèƒ½è°ƒåº¦çš„ï¼Ÿ</h3>
<p><strong>æ™ºèƒ½DNSè°ƒåº¦åŸç†</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cdnDnsStrategy = {
    <span class="hljs-comment">// ç”¨æˆ·è¯·æ±‚è¿‡ç¨‹</span>
    <span class="hljs-attr">userRequest</span>: &amp;#<span class="hljs-number">34</span>;ç”¨æˆ·è¯·æ±‚ www.<span class="hljs-property">example</span>.<span class="hljs-property">com</span>&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// DNSæ™ºèƒ½å“åº”</span>
    <span class="hljs-attr">dnsResponse</span>: {
        <span class="hljs-attr">step1</span>: &amp;#<span class="hljs-number">34</span>;æ£€æµ‹ç”¨æˆ·<span class="hljs-variable constant_">IP</span>åœ°ç†ä½ç½®&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">step2</span>: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥å„<span class="hljs-variable constant_">CDN</span>èŠ‚ç‚¹å¥åº·çŠ¶æ€&amp;#<span class="hljs-number">34</span>;, 
        <span class="hljs-attr">step3</span>: &amp;#<span class="hljs-number">34</span>;è®¡ç®—æœ€ä¼˜èŠ‚ç‚¹ï¼ˆå»¶è¿Ÿ+è´Ÿè½½ï¼‰&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">step4</span>: &amp;#<span class="hljs-number">34</span>;è¿”å›æœ€ä¼˜èŠ‚ç‚¹<span class="hljs-variable constant_">IP</span>åœ°å€&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// å®ç°æŠ€æœ¯</span>
    <span class="hljs-attr">implementation</span>: {
        <span class="hljs-attr">geoDNS</span>: &amp;#<span class="hljs-number">34</span>;åŸºäºåœ°ç†ä½ç½®çš„<span class="hljs-variable constant_">DNS</span>è§£æ&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">healthCheck</span>: &amp;#<span class="hljs-number">34</span>;å®æ—¶ç›‘æ§èŠ‚ç‚¹çŠ¶æ€&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">loadBalancing</span>: &amp;#<span class="hljs-number">34</span>;æ ¹æ®è´Ÿè½½åŠ¨æ€è°ƒæ•´&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">anycast</span>: &amp;#<span class="hljs-number">34</span>;ä»»æ’­æŠ€æœ¯ä¼˜åŒ–è·¯ç”±&amp;#<span class="hljs-number">34</span>;
    }
};
</code></pre>
<h2 data-id="heading-24">DNSè®¾è®¡æƒè¡¡åˆ†æ</h2>
<h3 data-id="heading-25">ä¸€è‡´æ€§ vs æ€§èƒ½</h3>
<p>DNS ç³»ç»Ÿä½“ç°äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç»å…¸æƒè¡¡ï¼š</p>
<p><strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼š</p>
<ul>
<li>DNS æ›´æ–°ä¸æ˜¯å®æ—¶çš„</li>
<li>ä¸åŒåœ°åŒºå¯èƒ½çœ‹åˆ°ä¸åŒçš„ç»“æœ</li>
<li>é€šè¿‡ TTL æ§åˆ¶ä¸€è‡´æ€§çª—å£</li>
</ul>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>å¤šçº§ç¼“å­˜æå‡å“åº”é€Ÿåº¦</li>
<li>åˆ†å¸ƒå¼æ¶æ„æé«˜å¯ç”¨æ€§</li>
<li>å°±è¿‘è®¿é—®å‡å°‘ç½‘ç»œå»¶è¿Ÿ</li>
</ul>
<h3 data-id="heading-26">å¯ç”¨æ€§ vs å®‰å…¨æ€§</h3>
<p><strong>é«˜å¯ç”¨è®¾è®¡</strong>ï¼š</p>
<ul>
<li>13 ä¸ªæ ¹æœåŠ¡å™¨åˆ†å¸ƒå…¨çƒ</li>
<li>ä»»æ’­æŠ€æœ¯å®ç°å°±è¿‘è®¿é—®</li>
<li>å†—ä½™è®¾è®¡é¿å…å•ç‚¹æ•…éšœ</li>
</ul>
<p><strong>å®‰å…¨æŒ‘æˆ˜</strong>ï¼š</p>
<ul>
<li>DNS æŸ¥è¯¢é»˜è®¤æ˜¯æ˜æ–‡çš„</li>
<li>å®¹æ˜“è¢«ç›‘å¬å’Œç¯¡æ”¹</li>
<li>éœ€è¦é¢å¤–çš„å®‰å…¨æœºåˆ¶</li>
</ul>
<h3 data-id="heading-27">æ‰©å±•æ€§ vs å¤æ‚æ€§</h3>
<p><strong>æ‰©å±•æ€§è®¾è®¡</strong>ï¼š</p>
<ul>
<li>åˆ†å±‚æ¶æ„æ”¯æŒæ— é™æ‰©å±•</li>
<li>æ–°çš„è®°å½•ç±»å‹å¯ä»¥éšæ—¶æ·»åŠ </li>
<li>æ”¯æŒå›½é™…åŒ–åŸŸå</li>
</ul>
<p><strong>å¤æ‚æ€§ç®¡ç†</strong>ï¼š</p>
<ul>
<li>å¤šçº§æŸ¥è¯¢å¢åŠ äº†å¤æ‚åº¦</li>
<li>ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜</li>
<li>æ•…éšœæ’æŸ¥å›°éš¾</li>
</ul>
<h2 data-id="heading-28">é¢è¯•æ€»ç»“ï¼šå¦‚ä½•è·å¾—é«˜åˆ†</h2>
<h3 data-id="heading-29">90åˆ†ç­”æ¡ˆçš„ç»“æ„</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> perfectAnswer = {
    <span class="hljs-comment">// ç¬¬ä¸€å±‚ï¼šåŸºç¡€æµç¨‹ï¼ˆ60åˆ†ï¼‰</span>
    <span class="hljs-attr">basicFlow</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">8</span>æ­¥å®Œæ•´æµç¨‹ï¼Œä»æµè§ˆå™¨ç¼“å­˜åˆ°æƒå¨æœåŠ¡å™¨&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// ç¬¬äºŒå±‚ï¼šæŠ€æœ¯ç»†èŠ‚ï¼ˆ75åˆ†ï¼‰</span>
    <span class="hljs-attr">technicalDetails</span>: {
        <span class="hljs-attr">recursiveVsIterative</span>: &amp;#<span class="hljs-number">34</span>;é€’å½’æŸ¥è¯¢vsè¿­ä»£æŸ¥è¯¢çš„åŒºåˆ«&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">cacheStrategy</span>: &amp;#<span class="hljs-number">34</span>;å¤šçº§ç¼“å­˜æœºåˆ¶å’Œ<span class="hljs-variable constant_">TTL</span>ç­–ç•¥&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">recordTypes</span>: &amp;#<span class="hljs-number">34</span>;A/<span class="hljs-variable constant_">AAAA</span>/<span class="hljs-variable constant_">CNAME</span>/<span class="hljs-variable constant_">MX</span>è®°å½•çš„ä½œç”¨&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// ç¬¬ä¸‰å±‚ï¼šè®¾è®¡æ€è€ƒï¼ˆ85åˆ†ï¼‰</span>
    <span class="hljs-attr">designThinking</span>: {
        <span class="hljs-attr">distributedSystem</span>: &amp;#<span class="hljs-number">34</span>;åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§æƒè¡¡&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">performanceOptimization</span>: &amp;#<span class="hljs-number">34</span>;ç¼“å­˜ä¸å®æ—¶æ€§çš„å¹³è¡¡&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">securityConsideration</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">DNS</span>åŠ«æŒå’Œå®‰å…¨é˜²æŠ¤&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// ç¬¬å››å±‚ï¼šå®é™…åº”ç”¨ï¼ˆ90åˆ†+ï¼‰</span>
    <span class="hljs-attr">practicalApplication</span>: {
        <span class="hljs-attr">frontendOptimization</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">DNS</span>é¢„è§£æå’Œæ€§èƒ½ä¼˜åŒ–&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">troubleshooting</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">DNS</span>è§£æå¤±è´¥çš„æ’æŸ¥æ€è·¯&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">modernTechnology</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-title class_">DoH</span>/<span class="hljs-title class_">DoT</span>ç­‰æ–°æŠ€æœ¯è¶‹åŠ¿&amp;#<span class="hljs-number">34</span>;
    }
};
</code></pre>
<h3 data-id="heading-30">å¸¸è§æ‰£åˆ†ç‚¹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> commonMistakes = {
    <span class="hljs-comment">// æµç¨‹ä¸å®Œæ•´</span>
    <span class="hljs-attr">incompleteFlow</span>: &amp;#<span class="hljs-number">34</span>;åªè¯´äº†<span class="hljs-string">'æŸ¥ç¼“å­˜ç„¶åæŸ¥DNSæœåŠ¡å™¨'</span>&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// æ¦‚å¿µæ··æ·†</span>
    <span class="hljs-attr">conceptConfusion</span>: {
        <span class="hljs-attr">mistake1</span>: &amp;#<span class="hljs-number">34</span>;åˆ†ä¸æ¸…é€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">mistake2</span>: &amp;#<span class="hljs-number">34</span>;ä¸çŸ¥é“æœ¬åœ°<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨çš„ä½œç”¨&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">mistake3</span>: &amp;#<span class="hljs-number">34</span>;æ··æ·†<span class="hljs-variable constant_">DNS</span>è®°å½•ç±»å‹&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// ç¼ºä¹æ·±åº¦</span>
    <span class="hljs-attr">lackDepth</span>: &amp;#<span class="hljs-number">34</span>;åªåœç•™åœ¨è¡¨é¢ï¼Œæ²¡æœ‰åˆ†æè®¾è®¡åŸç†&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// è„±ç¦»å®é™…</span>
    <span class="hljs-attr">lackPractical</span>: &amp;#<span class="hljs-number">34</span>;ä¸çŸ¥é“å¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­ä¼˜åŒ–<span class="hljs-variable constant_">DNS</span>æ€§èƒ½&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<h3 data-id="heading-31">é¢è¯•åŠ åˆ†æŠ€å·§</h3>
<ol>
<li><strong>ç”¨æ•°æ®è¯´è¯</strong>ï¼šæåˆ°å…·ä½“çš„å»¶è¿Ÿæ•°æ®å’Œä¼˜åŒ–æ•ˆæœ</li>
<li><strong>ç»“åˆå®é™…é¡¹ç›®</strong>ï¼šè¯´è¯´ä½ åœ¨é¡¹ç›®ä¸­å¦‚ä½•ä¼˜åŒ–DNSè§£æ</li>
<li><strong>å±•ç¤ºç³»ç»Ÿæ€ç»´</strong>ï¼šä»è®¾è®¡æƒè¡¡çš„è§’åº¦åˆ†æDNSç³»ç»Ÿ</li>
<li><strong>å…³æ³¨æ–°æŠ€æœ¯</strong>ï¼šäº†è§£DoHã€DoTç­‰æ–°å…´æŠ€æœ¯</li>
</ol>
<h2 data-id="heading-32">æ€»ç»“</h2>
<p>DNSè§£æä¸ä»…ä»…æ˜¯"æŠŠåŸŸåè½¬æ¢æˆIPåœ°å€"è¿™ä¹ˆç®€å•ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¤æ‚çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä½“ç°äº†ç½‘ç»œæ¶æ„è®¾è®¡çš„æ™ºæ…§ã€‚</p>
<h3 data-id="heading-33">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li><strong>8æ­¥å®Œæ•´æµç¨‹</strong>ï¼šä»æµè§ˆå™¨ç¼“å­˜åˆ°æƒå¨æœåŠ¡å™¨çš„å®Œæ•´é“¾è·¯</li>
<li><strong>åˆ†å±‚ç¼“å­˜æœºåˆ¶</strong>ï¼šå¤šçº§ç¼“å­˜æå‡æ€§èƒ½çš„åŒæ—¶ä¿è¯ä¸€è‡´æ€§</li>
<li><strong>é€’å½’vsè¿­ä»£</strong>ï¼šç†è§£ä¸¤ç§æŸ¥è¯¢æ–¹å¼çš„åŒºåˆ«å’Œåº”ç”¨åœºæ™¯</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</strong>ï¼šå‰ç«¯DNSé¢„è§£æã€æ™ºèƒ½DNSé€‰æ‹©ç­‰</li>
<li><strong>å®‰å…¨è€ƒè™‘</strong>ï¼šDNSåŠ«æŒé˜²æŠ¤å’Œæ–°å…´å®‰å…¨æŠ€æœ¯</li>
</ol>
<h3 data-id="heading-34">å®é™…åº”ç”¨å»ºè®®</h3>
<ul>
<li><strong>å¼€å‘é˜¶æ®µ</strong>ï¼šåˆç†ä½¿ç”¨DNSé¢„è§£æï¼Œå‡å°‘ä¸å¿…è¦çš„åŸŸåæŸ¥è¯¢</li>
<li><strong>éƒ¨ç½²é˜¶æ®µ</strong>ï¼šé€‰æ‹©åˆé€‚çš„TTLå€¼ï¼Œå¹³è¡¡æ€§èƒ½å’Œæ›´æ–°é€Ÿåº¦</li>
<li><strong>ç›‘æ§é˜¶æ®µ</strong>ï¼šå…³æ³¨DNSè§£ææ—¶é—´ï¼ŒåŠæ—¶å‘ç°æ€§èƒ½ç“¶é¢ˆ</li>
<li><strong>ä¼˜åŒ–é˜¶æ®µ</strong>ï¼šç»“åˆCDNå’Œæ™ºèƒ½DNSï¼Œæå‡ç”¨æˆ·ä½“éªŒ</li>
</ul>
<p>æŒæ¡äº†è¿™äº›çŸ¥è¯†ç‚¹ï¼Œä½ å°±èƒ½åœ¨é¢è¯•ä¸­æ¸¸åˆƒæœ‰ä½™ï¼Œå±•ç°å‡ºæ·±åšçš„æŠ€æœ¯åŠŸåº•å’Œç³»ç»Ÿæ€§æ€ç»´ã€‚</p>
<hr/>
<h2 data-id="heading-35">ç›¸å…³èµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc1035" target="_blank" title="https://tools.ietf.org/html/rfc1035" ref="nofollow noopener noreferrer">RFC 1035 - DNS åè®®è§„èŒƒ</a>ï¼šDNS åè®®çš„åŸºç¡€å®šä¹‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc4033" target="_blank" title="https://tools.ietf.org/html/rfc4033" ref="nofollow noopener noreferrer">DNS å®‰å…¨æ‰©å±• (DNSSEC)</a>ï¼šDNS å®‰å…¨æœºåˆ¶</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cloudflare.com%2Flearning%2Fdns%2F" target="_blank" title="https://www.cloudflare.com/learning/dns/" ref="nofollow noopener noreferrer">Cloudflare DNS å­¦ä¹ ä¸­å¿ƒ</a>ï¼šDNS æ¦‚å¿µçš„é€šä¿—è§£é‡Š</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fspeed%2Fpublic-dns" target="_blank" title="https://developers.google.com/speed/public-dns" ref="nofollow noopener noreferrer">Google Public DNS</a>ï¼šå…¬å…±DNSæœåŠ¡è¯¦è§£</li>
</ul>
<hr/>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¸®ä½ åœ¨é¢è¯•ä¸­æ‹¿åˆ°äº†é«˜åˆ†ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼æœ‰ä»»ä½•DNSç›¸å…³çš„é—®é¢˜ï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>é¢è¯•æŠ€å·§</strong>ï¼šå‡†å¤‡é¢è¯•æ—¶ä¸è¦åªèƒŒç­”æ¡ˆï¼Œè¦ç†è§£åŸç†ã€‚é¢è¯•å®˜æ›´çœ‹é‡ä½ çš„æ€è€ƒè¿‡ç¨‹å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜ï¼šDNS è§£æè¿‡ç¨‹ä½ èƒ½è¯´æ¸…å—ï¼ŸDNS è§£æå…¨æµç¨‹æ·±åº¦å‰–æ]]></title>    <link>https://juejin.cn/post/7582003642191544362</link>    <guid>https://juejin.cn/post/7582003642191544362</guid>    <pubDate>2025-12-10T09:48:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582003642191544362" data-draft-id="7581876069609078827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜ï¼šDNS è§£æè¿‡ç¨‹ä½ èƒ½è¯´æ¸…å—ï¼ŸDNS è§£æå…¨æµç¨‹æ·±åº¦å‰–æ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-10T09:48:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜ï¼šDNS è§£æè¿‡ç¨‹ä½ èƒ½è¯´æ¸…å—ï¼ŸDNS è§£æå…¨æµç¨‹æ·±åº¦å‰–æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:48:48.000Z" title="Wed Dec 10 2025 09:48:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿™ç¯‡æ–‡ç« å¯ä»¥å½“æˆä¸€æ¬¡ã€ŒDNS å¤ç›˜ã€ï¼šä»æµè§ˆå™¨æ•²ä¸‹å›è½¦ï¼Œåˆ°çœŸæ­£æ‹¿åˆ° IPï¼Œä¸­é—´æ¯ä¸€æ­¥éƒ½æ‘Šå¼€è®²æ¸…æ¥šã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>ç¿»é¢è¯•è®°å½•çš„æ—¶å€™ï¼Œè¿™é“é¢˜å‡ ä¹æ˜¯å¸¸å®¢ï¼š"è®²è®² DNS è§£æçš„è¿‡ç¨‹"ã€‚èƒ½è®²åˆ°å°¾çš„äººï¼Œå…¶å®ä¸å¤šã€‚</p>
<p>å¤§å¤šæ•°å›ç­”å¬èµ·æ¥éƒ½å·®ä¸å¤šï¼š</p>
<ul>
<li>"å°±æ˜¯æŠŠåŸŸåè½¬æ¢æˆ IP åœ°å€"</li>
<li>"å…ˆæŸ¥æœ¬åœ°ç¼“å­˜ï¼Œç„¶åæŸ¥ DNS æœåŠ¡å™¨"</li>
<li>"æœ‰ä¸ªé€’å½’æŸ¥è¯¢çš„è¿‡ç¨‹..."</li>
</ul>
<p>æ–¹å‘éƒ½å¯¹ï¼Œä½†æ›´åƒæ˜¯èƒŒè¯µç‰ˆç­”æ¡ˆâ€”â€”é¢è¯•å®˜å¬å®Œï¼Œå¤§æ¦‚çŸ¥é“ä½ å­¦è¿‡è¿™å—ï¼Œä½†å¾ˆéš¾åˆ¤æ–­ä½ æ˜¯çœŸçš„æƒ³æ˜ç™½äº†ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æƒ³åšçš„äº‹æ˜¯ï¼šæŠŠ DNS è§£æè¿™ä»¶äº‹æ‹†å¼€ã€è®²é€ã€‚æˆ‘ä»¬ä¸åªæŠŠå®Œæ•´æµç¨‹è¿‡ä¸€éï¼Œè¿˜é¡ºå¸¦æŠŠèƒŒåçš„è®¾è®¡æ€è·¯ã€ç¼“å­˜ç­–ç•¥å’Œå¸¸è§é¢è¯•è¿½é—®ä¸€å¹¶ç†ä¸€éã€‚çœ‹å®Œä¹‹åï¼Œä½ åœ¨é¢è¯•é‡Œä¸åªâ€œç­”å¾—å‡ºæ¥â€ï¼Œè€Œæ˜¯èƒ½é¡ºç€é¢è¯•å®˜çš„è¿½é—®ç»§ç»­å¾€ä¸‹èŠã€‚</p>
<h2 data-id="heading-1">ç›®å½•</h2>
<ul>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81dns%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E8%A7%A3%E6%9E%90" title="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81dns%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E8%A7%A3%E6%9E%90">ä¸ºä»€ä¹ˆéœ€è¦DNSï¼Ÿè®¾è®¡å“²å­¦è§£æ</a></li>
<li><a href="#dns%E8%A7%A3%E6%9E%90%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3" title="#dns%E8%A7%A3%E6%9E%90%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3">DNSè§£æå®Œæ•´æµç¨‹è¯¦è§£</a></li>
<li><a href="#%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90" title="#%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90">é«˜é¢‘é¢è¯•é¢˜æ·±åº¦å‰–æ</a></li>
<li><a href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8" title="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8">æ€§èƒ½ä¼˜åŒ–ä¸å®é™…åº”ç”¨</a></li>
<li><a href="#%E9%9D%A2%E8%AF%95%E5%AE%98%E4%BC%9A%E8%BF%BD%E9%97%AE%E7%9A%84%E8%BF%9B%E9%98%B6%E9%97%AE%E9%A2%98" title="#%E9%9D%A2%E8%AF%95%E5%AE%98%E4%BC%9A%E8%BF%BD%E9%97%AE%E7%9A%84%E8%BF%9B%E9%98%B6%E9%97%AE%E9%A2%98">é¢è¯•å®˜ä¼šè¿½é—®çš„è¿›é˜¶é—®é¢˜</a></li>
</ul>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆéœ€è¦DNSï¼Ÿè®¾è®¡å“²å­¦è§£æ</h2>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆéœ€è¦åŸŸåç³»ç»Ÿï¼Ÿ</h3>
<p>åœ¨ DNS å‡ºç°ä¹‹å‰ï¼Œç½‘ç»œä¸­çš„ä¸»æœºè¯†åˆ«ä¾èµ–äº hosts æ–‡ä»¶ï¼š</p>
<p><strong>æ—©æœŸçš„ hosts æ–‡ä»¶æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ¯å°æœºå™¨ç»´æŠ¤ä¸€ä¸ªæœ¬åœ°çš„åå­—-åœ°å€æ˜ å°„æ–‡ä»¶</li>
<li>éœ€è¦æ‰‹åŠ¨åŒæ­¥æ›´æ–°</li>
<li>æ— æ³•æ‰©å±•åˆ°å¤§è§„æ¨¡ç½‘ç»œ</li>
</ul>
<p><strong>é—®é¢˜æ˜¾è€Œæ˜“è§</strong>ï¼š</p>
<ul>
<li>ç®¡ç†å¤æ‚ï¼šæ¯å°æœºå™¨éƒ½è¦æ›´æ–°</li>
<li>å†²çªé¢‘ç¹ï¼šæ²¡æœ‰ç»Ÿä¸€çš„å‘½åè§„èŒƒ</li>
<li>æ‰©å±•å›°éš¾ï¼šæ— æ³•æ”¯æŒäº’è”ç½‘è§„æ¨¡</li>
</ul>
<h3 data-id="heading-4">DNS çš„åˆ†å±‚è®¾è®¡å“²å­¦</h3>
<p>DNS é‡‡ç”¨äº†<strong>åˆ†å±‚åˆ†å¸ƒ</strong>çš„è®¾è®¡ï¼š</p>
<p><strong>å±‚æ¬¡åŒ–å‘½åç©ºé—´</strong>ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">.                    (æ ¹åŸŸ)
â”œâ”€â”€ com.             (é¡¶çº§åŸŸ)
â”‚   â”œâ”€â”€ google.com.  (äºŒçº§åŸŸ)
â”‚   â””â”€â”€ github.com.
â”œâ”€â”€ org.
â””â”€â”€ cn.
    â””â”€â”€ baidu.cn.
</code></pre>
<p><strong>åˆ†å¸ƒå¼ç®¡ç†</strong>ï¼š</p>
<ul>
<li>æ¯ä¸€å±‚ç”±ä¸åŒçš„æœºæ„ç®¡ç†</li>
<li>æ ¹åŸŸç”± ICANN ç®¡ç†</li>
<li>é¡¶çº§åŸŸç”±å„å›½æ”¿åºœæˆ–å•†ä¸šæœºæ„ç®¡ç†</li>
<li>äºŒçº§åŸŸç”±åŸŸåæ³¨å†Œå•†å’Œç”¨æˆ·ç®¡ç†</li>
</ul>
<p>è¿™å°±åƒç°å®ä¸–ç•Œçš„åœ°å€ç³»ç»Ÿï¼šå›½å®¶â†’çœä»½â†’åŸå¸‚â†’è¡—é“â†’é—¨ç‰Œå·ã€‚</p>
<h2 data-id="heading-5">DNSè§£æå®Œæ•´æµç¨‹è¯¦è§£</h2>
<h3 data-id="heading-6">é¢è¯•æ ‡å‡†ç­”æ¡ˆï¼š8æ­¥å®Œæ•´æµç¨‹</h3>
<p>å½“ä½ åœ¨æµè§ˆå™¨è¾“å…¥ <code>www.example.com</code> å¹¶æŒ‰ä¸‹å›è½¦ï¼ŒèƒŒåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»¥è®¿é—® www.example.com ä¸ºä¾‹</span>
<span class="hljs-comment">// å®Œæ•´çš„DNSè§£ææµç¨‹å¦‚ä¸‹ï¼š</span>

<span class="hljs-keyword">const</span> dnsResolution = {
    <span class="hljs-attr">step1</span>: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥æµè§ˆå™¨<span class="hljs-variable constant_">DNS</span>ç¼“å­˜&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step2</span>: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥æ“ä½œç³»ç»Ÿ<span class="hljs-variable constant_">DNS</span>ç¼“å­˜&amp;#<span class="hljs-number">34</span>;,  
    <span class="hljs-attr">step3</span>: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥è·¯ç”±å™¨ç¼“å­˜&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step4</span>: &amp;#<span class="hljs-number">34</span>;æŸ¥è¯¢æœ¬åœ°<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨ï¼ˆé€šå¸¸æ˜¯<span class="hljs-variable constant_">ISP</span>æä¾›ï¼‰&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step5</span>: &amp;#<span class="hljs-number">34</span>;æœ¬åœ°<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨æŸ¥è¯¢æ ¹åŸŸåæœåŠ¡å™¨&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step6</span>: &amp;#<span class="hljs-number">34</span>;æŸ¥è¯¢é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼ˆ.<span class="hljs-property">com</span>ï¼‰&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step7</span>: &amp;#<span class="hljs-number">34</span>;æŸ¥è¯¢æƒå¨åŸŸåæœåŠ¡å™¨ï¼ˆexample.<span class="hljs-property">com</span>ï¼‰&amp;#<span class="hljs-number">34</span>;, 
    <span class="hljs-attr">step8</span>: &amp;#<span class="hljs-number">34</span>;è¿”å›<span class="hljs-variable constant_">IP</span>åœ°å€å¹¶ç¼“å­˜&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<h3 data-id="heading-7">è¯¦ç»†æµç¨‹å›¾è§£</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·è¾“å…¥ www.example.com] --&gt; B{æµè§ˆå™¨ç¼“å­˜?}
    B --&gt;|å‘½ä¸­| I[è¿”å›IPåœ°å€]
    B --&gt;|æœªå‘½ä¸­| C{æ“ä½œç³»ç»Ÿç¼“å­˜?}
    C --&gt;|å‘½ä¸­| I
    C --&gt;|æœªå‘½ä¸­| D{è·¯ç”±å™¨ç¼“å­˜?}
    D --&gt;|å‘½ä¸­| I
    D --&gt;|æœªå‘½ä¸­| E[æŸ¥è¯¢æœ¬åœ°DNSæœåŠ¡å™¨]
    E --&gt; F[æŸ¥è¯¢æ ¹åŸŸåæœåŠ¡å™¨]
    F --&gt; G[æŸ¥è¯¢.comé¡¶çº§åŸŸæœåŠ¡å™¨]
    G --&gt; H[æŸ¥è¯¢example.comæƒå¨æœåŠ¡å™¨]
    H --&gt; I
    I --&gt; J[å»ºç«‹TCPè¿æ¥]
</code></pre>
<h3 data-id="heading-8">ç¼“å­˜å±‚æ¬¡æ·±åº¦è§£æ</h3>
<p>DNS ç³»ç»Ÿçš„å¦ä¸€ä¸ªæ ¸å¿ƒè®¾è®¡æ˜¯<strong>å¤šçº§ç¼“å­˜</strong>ï¼š</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ</strong></p>
<ul>
<li>å‡å°‘ç½‘ç»œè¯·æ±‚ï¼šé¿å…æ¯æ¬¡éƒ½æŸ¥è¯¢æƒå¨æœåŠ¡å™¨</li>
<li>æé«˜å“åº”é€Ÿåº¦ï¼šæœ¬åœ°ç¼“å­˜å‡ ä¹æ˜¯ç¬æ—¶å“åº”</li>
<li>é™ä½ç³»ç»Ÿè´Ÿè½½ï¼šå‡å°‘æ ¹æœåŠ¡å™¨å’Œæƒå¨æœåŠ¡å™¨çš„å‹åŠ›</li>
</ul>
<p><strong>ç¼“å­˜çš„å±‚æ¬¡</strong>ï¼š</p>
<ol>
<li>æµè§ˆå™¨ç¼“å­˜ï¼šæœ€å¿«çš„å“åº”</li>
<li>æ“ä½œç³»ç»Ÿç¼“å­˜ï¼šç³»ç»Ÿçº§åˆ«çš„ç¼“å­˜</li>
<li>è·¯ç”±å™¨ç¼“å­˜ï¼šç½‘ç»œè®¾å¤‡çš„ç¼“å­˜</li>
<li>ISP ç¼“å­˜ï¼šè¿è¥å•†çš„é€’å½’æœåŠ¡å™¨</li>
<li>æƒå¨æœåŠ¡å™¨ï¼šæœ€ç»ˆçš„æ•°æ®æº</li>
</ol>
<h2 data-id="heading-9">é«˜é¢‘é¢è¯•é¢˜æ·±åº¦å‰–æ</h2>
<h3 data-id="heading-10">é¢è¯•é¢˜1ï¼šé€’å½’æŸ¥è¯¢ vs è¿­ä»£æŸ¥è¯¢çš„åŒºåˆ«</h3>
<p>è¿™æ˜¯é¢è¯•å®˜æœ€çˆ±é—®çš„é—®é¢˜ï¼</p>
<p><strong>é€’å½’æŸ¥è¯¢</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®¢æˆ·ç«¯çš„è§†è§’ï¼šæˆ‘åªé—®ä¸€æ¬¡ï¼Œä½ å¸®æˆ‘æå®šä¸€åˆ‡</span>
<span class="hljs-keyword">const</span> recursiveQuery = {
    <span class="hljs-attr">client</span>: &amp;#<span class="hljs-number">34</span>;æœ¬åœ°<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨ï¼Œå¸®æˆ‘æŸ¥ www.<span class="hljs-property">example</span>.<span class="hljs-property">com</span> çš„<span class="hljs-variable constant_">IP</span>&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">localDNS</span>: &amp;#<span class="hljs-number">34</span>;å¥½çš„ï¼Œæˆ‘æ¥å¸®ä½ æå®šï¼Œç¨ç­‰...&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-comment">// æœ¬åœ°DNSæœåŠ¡å™¨ä»£æ›¿å®¢æˆ·ç«¯å®Œæˆæ‰€æœ‰æŸ¥è¯¢</span>
    <span class="hljs-attr">process</span>: &amp;#<span class="hljs-number">34</span>;æœ¬åœ°<span class="hljs-variable constant_">DNS</span> â†’ æ ¹æœåŠ¡å™¨ â†’ .<span class="hljs-property">com</span>æœåŠ¡å™¨ â†’ example.<span class="hljs-property">com</span>æœåŠ¡å™¨&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">response</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<p><strong>è¿­ä»£æŸ¥è¯¢</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®¢æˆ·ç«¯çš„è§†è§’ï¼šæ¯ä¸€æ­¥éƒ½è¦è‡ªå·±é—®</span>
<span class="hljs-keyword">const</span> iterativeQuery = {
    <span class="hljs-attr">step1</span>: &amp;#<span class="hljs-number">34</span>;å®¢æˆ·ç«¯é—®æ ¹æœåŠ¡å™¨ï¼šwww.<span class="hljs-property">example</span>.<span class="hljs-property">com</span>åœ¨å“ªï¼Ÿ&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step1Response</span>: &amp;#<span class="hljs-number">34</span>;æˆ‘ä¸çŸ¥é“ï¼Œä½†æ˜¯.<span class="hljs-property">com</span>åŸŸçš„æœåŠ¡å™¨åœ¨è¿™é‡Œ&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step2</span>: &amp;#<span class="hljs-number">34</span>;å®¢æˆ·ç«¯é—®.<span class="hljs-property">com</span>æœåŠ¡å™¨ï¼šwww.<span class="hljs-property">example</span>.<span class="hljs-property">com</span>åœ¨å“ªï¼Ÿ&amp;#<span class="hljs-number">34</span>;, 
    <span class="hljs-attr">step2Response</span>: &amp;#<span class="hljs-number">34</span>;æˆ‘ä¸çŸ¥é“ï¼Œä½†æ˜¯example.<span class="hljs-property">com</span>çš„æœåŠ¡å™¨åœ¨è¿™é‡Œ&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step3</span>: &amp;#<span class="hljs-number">34</span>;å®¢æˆ·ç«¯é—®example.<span class="hljs-property">com</span>æœåŠ¡å™¨ï¼šwww.<span class="hljs-property">example</span>.<span class="hljs-property">com</span>çš„<span class="hljs-variable constant_">IP</span>æ˜¯ï¼Ÿ&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">step3Response</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<p><strong>é¢è¯•åŠ åˆ†ç‚¹</strong>ï¼šç°å®ä¸­ï¼Œå®¢æˆ·ç«¯åˆ°æœ¬åœ°DNSæ˜¯é€’å½’æŸ¥è¯¢ï¼Œæœ¬åœ°DNSåˆ°å…¶ä»–æœåŠ¡å™¨æ˜¯è¿­ä»£æŸ¥è¯¢ã€‚</p>
<h3 data-id="heading-11">é¢è¯•é¢˜2ï¼šä¸ºä»€ä¹ˆéœ€è¦13ä¸ªæ ¹æœåŠ¡å™¨ï¼Ÿ</h3>
<p><strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>æŠ€æœ¯é™åˆ¶</strong>ï¼šUDPåŒ…å¤§å°é™åˆ¶ä¸º512å­—èŠ‚ï¼Œåªèƒ½å®¹çº³13ä¸ªæ ¹æœåŠ¡å™¨çš„IPåœ°å€</li>
<li><strong>è¶³å¤Ÿå†—ä½™</strong>ï¼š13ä¸ªå·²ç»æä¾›äº†å……åˆ†çš„å†—ä½™å’Œè´Ÿè½½åˆ†æ•£</li>
<li><strong>å…¨çƒåˆ†å¸ƒ</strong>ï¼šé€šè¿‡ä»»æ’­æŠ€æœ¯ï¼Œå®é™…æœ‰æ•°ç™¾ä¸ªæ ¹æœåŠ¡å™¨èŠ‚ç‚¹</li>
</ul>
<p><strong>åŠ åˆ†å›ç­”</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> rootServers = {
    <span class="hljs-attr">technical</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">UDP</span>åŒ…<span class="hljs-number">512</span>å­—èŠ‚é™åˆ¶ï¼Œ<span class="hljs-number">13</span>ä¸ª<span class="hljs-title class_">IPv4</span>åœ°å€åˆšå¥½è£…å¾—ä¸‹&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">practical</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">13</span>ä¸ªå·²ç»è¶³å¤Ÿå®ç°å…¨çƒè´Ÿè½½å‡è¡¡å’Œå®¹é”™&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">evolution</span>: &amp;#<span class="hljs-number">34</span>;ç°ä»£é€šè¿‡<span class="hljs-title class_">IPv6</span>å’Œ<span class="hljs-variable constant_">EDNS</span>å¯ä»¥æ”¯æŒæ›´å¤šï¼Œä½†å†å²åŒ…è¢±&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<h3 data-id="heading-12">é¢è¯•é¢˜3ï¼šDNSè§£æå¤±è´¥çš„å¸¸è§åŸå› </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> dnsFailureReasons = {
    <span class="hljs-comment">// ç½‘ç»œå±‚é¢</span>
    <span class="hljs-attr">networkIssues</span>: {
        &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨å®•æœº&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;ä½¿ç”¨å¤‡ç”¨<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨<span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>&amp;#<span class="hljs-number">34</span>;,
        &amp;#<span class="hljs-number">34</span>;ç½‘ç»œä¸é€š&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥ç½‘ç»œè¿æ¥&amp;#<span class="hljs-number">34</span>;,
        &amp;#<span class="hljs-number">34</span>;é˜²ç«å¢™æ‹¦æˆª&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥<span class="hljs-number">53</span>ç«¯å£æ˜¯å¦å¼€æ”¾&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// é…ç½®å±‚é¢  </span>
    <span class="hljs-attr">configIssues</span>: {
        &amp;#<span class="hljs-number">34</span>;åŸŸåè¿‡æœŸ&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;åŠæ—¶ç»­è´¹åŸŸå&amp;#<span class="hljs-number">34</span>;,
        &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">DNS</span>è®°å½•é…ç½®é”™è¯¯&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥Aè®°å½•ã€<span class="hljs-variable constant_">CNAME</span>è®°å½•&amp;#<span class="hljs-number">34</span>;,
        &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">TTL</span>è®¾ç½®è¿‡é•¿&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;æ›´æ–°åéœ€è¦ç­‰å¾…<span class="hljs-variable constant_">TTL</span>è¿‡æœŸ&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// ç¼“å­˜å±‚é¢</span>
    <span class="hljs-attr">cacheIssues</span>: {
        &amp;#<span class="hljs-number">34</span>;ç¼“å­˜æ±¡æŸ“&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;æ¸…ç©º<span class="hljs-variable constant_">DNS</span>ç¼“å­˜&amp;#<span class="hljs-number">34</span>;,
        &amp;#<span class="hljs-number">34</span>;ç¼“å­˜è¿‡æœŸ&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;ç­‰å¾…è‡ªåŠ¨æ›´æ–°æˆ–æ‰‹åŠ¨åˆ·æ–°&amp;#<span class="hljs-number">34</span>;
    }
};
</code></pre>
<h3 data-id="heading-13">è®°å½•ç±»å‹çš„è®¾è®¡æ„å›¾</h3>
<p>DNS ä¸åªæ˜¯ç®€å•çš„åå­—åˆ° IP çš„æ˜ å°„ï¼Œå®ƒæ”¯æŒå¤šç§è®°å½•ç±»å‹ï¼š</p>
<p><strong>A è®°å½•</strong>ï¼šåŸŸååˆ° IPv4 åœ°å€</p>
<ul>
<li><code>www.example.com â†’ 192.168.1.1</code></li>
<li>æœ€åŸºç¡€çš„æ˜ å°„å…³ç³»</li>
</ul>
<p><strong>AAAA è®°å½•</strong>ï¼šåŸŸååˆ° IPv6 åœ°å€</p>
<ul>
<li>ä¸ºäº†æ”¯æŒ IPv6 è€Œè®¾è®¡</li>
<li>æœªæ¥ç½‘ç»œçš„åŸºç¡€</li>
</ul>
<p><strong>CNAME è®°å½•</strong>ï¼šåŸŸååˆ°åŸŸåçš„åˆ«å</p>
<ul>
<li><code>blog.example.com â†’ www.example.com</code></li>
<li>ä¾¿äºç®¡ç†å’Œé‡å®šå‘</li>
</ul>
<p><strong>MX è®°å½•</strong>ï¼šé‚®ä»¶æœåŠ¡å™¨æŒ‡å‘</p>
<ul>
<li>æŒ‡å®šåŸŸåçš„é‚®ä»¶æœåŠ¡å™¨</li>
<li>æ”¯æŒä¼˜å…ˆçº§è®¾ç½®</li>
</ul>
<p><strong>TXT è®°å½•</strong>ï¼šä»»æ„æ–‡æœ¬ä¿¡æ¯</p>
<ul>
<li>åŸŸåéªŒè¯ã€SPF è®°å½•ç­‰</li>
<li>æ‰©å±•æ€§å¾ˆå¼ºçš„è®¾è®¡</li>
</ul>
<h3 data-id="heading-14">TTL çš„ç¼“å­˜ç­–ç•¥</h3>
<p>TTLï¼ˆTime To Liveï¼‰ä½“ç°äº†ç¼“å­˜ç­–ç•¥çš„ç²¾å¦™è®¾è®¡ï¼š</p>
<p><strong>TTL çš„ä½œç”¨</strong>ï¼š</p>
<ul>
<li>æ§åˆ¶ç¼“å­˜æ—¶é—´ï¼šå¹³è¡¡æ€§èƒ½å’Œä¸€è‡´æ€§</li>
<li>æƒå¨æœåŠ¡å™¨å¯ä»¥æ§åˆ¶ç¼“å­˜ç­–ç•¥</li>
<li>ä¸åŒè®°å½•å¯ä»¥æœ‰ä¸åŒçš„ TTL</li>
</ul>
<p><strong>TTL è®¾ç½®çš„æƒè¡¡</strong>ï¼š</p>
<ul>
<li><strong>çŸ­ TTL</strong>ï¼šæ›´æ–°å¿«ï¼Œä½†æŸ¥è¯¢é¢‘ç¹</li>
<li><strong>é•¿ TTL</strong>ï¼šæ€§èƒ½å¥½ï¼Œä½†æ›´æ–°æ…¢</li>
<li><strong>åŠ¨æ€è°ƒæ•´</strong>ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚çµæ´»è®¾ç½®</li>
</ul>
<h2 data-id="heading-15">æ€§èƒ½ä¼˜åŒ–ä¸å®é™…åº”ç”¨</h2>
<h3 data-id="heading-16">å‰ç«¯DNSä¼˜åŒ–ç­–ç•¥</h3>
<p><strong>1. DNSé¢„è§£æ</strong>ï¼š</p>
<pre><code class="hljs language-html" lang="html">






</code></pre>
<p><strong>2. JavaScript DNSé¢„çƒ­</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŠ¨æ€é¢„è§£æ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">prefetchDNS</span>(<span class="hljs-params">hostname</span>) {
    <span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'link'</span>);
    link.<span class="hljs-property">rel</span> = <span class="hljs-string">'dns-prefetch'</span>;
    link.<span class="hljs-property">href</span> = <span class="hljs-string">`//<span class="hljs-subst">${hostname}</span>`</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(link);
}

<span class="hljs-comment">// åœ¨ç”¨æˆ·å¯èƒ½è®¿é—®å‰é¢„çƒ­</span>
<span class="hljs-title function_">prefetchDNS</span>(<span class="hljs-string">'next-page-api.com'</span>);
</code></pre>
<p><strong>3. æ™ºèƒ½DNSé…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> dnsOptimization = {
    <span class="hljs-comment">// å‡å°‘DNSæŸ¥è¯¢æ¬¡æ•°</span>
    <span class="hljs-attr">domainSharding</span>: &amp;#<span class="hljs-number">34</span>;é¿å…è¿‡å¤šå­åŸŸåï¼Œå‡å°‘<span class="hljs-variable constant_">DNS</span>æŸ¥è¯¢&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// é€‰æ‹©å¿«é€ŸDNSæœåŠ¡å™¨  </span>
    <span class="hljs-attr">publicDNS</span>: [&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span>&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">114.114</span><span class="hljs-number">.114</span><span class="hljs-number">.114</span>&amp;#<span class="hljs-number">34</span>;],
    
    <span class="hljs-comment">// æœ¬åœ°DNSç¼“å­˜</span>
    <span class="hljs-attr">localCache</span>: &amp;#<span class="hljs-number">34</span>;åˆç†è®¾ç½®æµè§ˆå™¨<span class="hljs-variable constant_">DNS</span>ç¼“å­˜æ—¶é—´&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<h3 data-id="heading-17">å®‰å…¨è€ƒè™‘</h3>
<p><strong>DNS åŠ«æŒé˜²æŠ¤</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨å¯ä¿¡çš„ DNS æœåŠ¡å™¨ï¼ˆå¦‚ 8.8.8.8ã€1.1.1.1ï¼‰</li>
<li>å¯ç”¨ DNS over HTTPS (DoH) æˆ– DNS over TLS (DoT)</li>
<li>ç›‘æ§ DNS è§£æç»“æœçš„å¼‚å¸¸</li>
</ul>
<p><strong>åŸŸåå®‰å…¨ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>åŠæ—¶ç»­è´¹åŸŸåï¼Œé¿å…è¢«æ¶æ„æŠ¢æ³¨</li>
<li>ä½¿ç”¨åŸŸåé”å®šæœåŠ¡</li>
<li>ç›‘æ§åŸŸåè§£æå˜åŒ–</li>
</ul>
<h3 data-id="heading-18">æ€§èƒ½ç›‘æ§</h3>
<p><strong>DNS è§£ææ—¶é—´ç›‘æ§</strong>ï¼š</p>
<ul>
<li>ç›‘æ§ä¸åŒåœ°åŒºçš„ DNS è§£æé€Ÿåº¦</li>
<li>è¯†åˆ« DNS è§£æç“¶é¢ˆ</li>
<li>ä¼˜åŒ– DNS é…ç½®</li>
</ul>
<p><strong>ç¼“å­˜å‘½ä¸­ç‡åˆ†æ</strong>ï¼š</p>
<ul>
<li>åˆ†æç¼“å­˜æ•ˆæœ</li>
<li>è°ƒæ•´ TTL è®¾ç½®</li>
<li>ä¼˜åŒ–ç¼“å­˜ç­–ç•¥</li>
</ul>
<h2 data-id="heading-19">é¢è¯•å®˜ä¼šè¿½é—®çš„è¿›é˜¶é—®é¢˜</h2>
<h3 data-id="heading-20">è¿½é—®1ï¼šå¦‚æœDNSæœåŠ¡å™¨å…¨éƒ¨æŒ‚äº†æ€ä¹ˆåŠï¼Ÿ</h3>
<p><strong>å±‚å±‚é€’è¿›çš„å›ç­”</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> dnsFailureHandling = {
    <span class="hljs-attr">level1</span>: &amp;#<span class="hljs-number">34</span>;æµè§ˆå™¨ç¼“å­˜å…œåº•&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">level2</span>: &amp;#<span class="hljs-number">34</span>;æ“ä½œç³»ç»Ÿç¼“å­˜å…œåº•&amp;#<span class="hljs-number">34</span>;, 
    <span class="hljs-attr">level3</span>: &amp;#<span class="hljs-number">34</span>;è·¯ç”±å™¨ç¼“å­˜å…œåº•&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">level4</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">ISP</span>å¤šä¸ª<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨è½®è¯¢&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">level5</span>: &amp;#<span class="hljs-number">34</span>;ä½¿ç”¨å¤‡ç”¨å…¬å…±<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">level6</span>: &amp;#<span class="hljs-number">34</span>;æœ€åæƒ…å†µï¼šç›´æ¥ä½¿ç”¨<span class="hljs-variable constant_">IP</span>åœ°å€è®¿é—®&amp;#<span class="hljs-number">34</span>;
};

<span class="hljs-comment">// å®é™…å¤„ç†ç­–ç•¥</span>
<span class="hljs-keyword">const</span> fallbackStrategy = {
    <span class="hljs-attr">primary</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">119.29</span><span class="hljs-number">.29</span><span class="hljs-number">.29</span>&amp;#<span class="hljs-number">34</span>;,    <span class="hljs-comment">// è…¾è®¯DNS</span>
    <span class="hljs-attr">secondary</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>&amp;#<span class="hljs-number">34</span>;,       <span class="hljs-comment">// Google DNS  </span>
    <span class="hljs-attr">tertiary</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span>&amp;#<span class="hljs-number">34</span>;,       <span class="hljs-comment">// Cloudflare DNS</span>
    <span class="hljs-attr">emergency</span>: &amp;#<span class="hljs-number">34</span>;ç›´æ¥<span class="hljs-variable constant_">IP</span>è®¿é—®æˆ–ç¦»çº¿é¡µé¢&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<p><strong>åŠ åˆ†ç‚¹</strong>ï¼šæåˆ°DNSçš„åˆ†å¸ƒå¼è®¾è®¡å’Œä»»æ’­æŠ€æœ¯è®©æ•´ä½“æœåŠ¡å¾ˆéš¾å®Œå…¨æŒ‚æ‰ã€‚</p>
<h3 data-id="heading-21">è¿½é—®2ï¼šä¸ºä»€ä¹ˆæœ‰äº›ç½‘ç«™æ‰“å¼€å¾ˆæ…¢ï¼ŒDNSè§£æéœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ</h3>
<p><strong>æ€§èƒ½æ•°æ®åˆ†æ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> dnsPerformanceData = {
    <span class="hljs-comment">// å„é˜¶æ®µè€—æ—¶ï¼ˆå…¸å‹å€¼ï¼‰</span>
    <span class="hljs-attr">browserCache</span>: &amp;#<span class="hljs-number">34</span>;0msï¼ˆå¦‚æœå‘½ä¸­ï¼‰&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">osCache</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">1</span>-5msï¼ˆå¦‚æœå‘½ä¸­ï¼‰&amp;#<span class="hljs-number">34</span>;,
    <span class="hljs-attr">localDNSQuery</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">10</span>-50msï¼ˆä¸­å›½å¤§é™†ï¼‰&amp;#<span class="hljs-number">34</span>;, 
    <span class="hljs-attr">recursiveQuery</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">50</span>-200msï¼ˆé¦–æ¬¡æŸ¥è¯¢ï¼‰&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// å½±å“å› ç´ </span>
    <span class="hljs-attr">factors</span>: {
        <span class="hljs-attr">networkLatency</span>: &amp;#<span class="hljs-number">34</span>;ç½‘ç»œå»¶è¿Ÿæ˜¯ä¸»è¦å› ç´ &amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">dnsServerLocation</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨åœ°ç†ä½ç½®&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">cacheHitRate</span>: &amp;#<span class="hljs-number">34</span>;ç¼“å­˜å‘½ä¸­ç‡&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">queryType</span>: &amp;#<span class="hljs-number">34</span>;æŸ¥è¯¢ç±»å‹ï¼ˆA/<span class="hljs-variable constant_">AAAA</span>/<span class="hljs-variable constant_">CNAME</span>ï¼‰&amp;#<span class="hljs-number">34</span>;
    }
};
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨CDNå‡å°‘DNSæŸ¥è¯¢é“¾é•¿åº¦</li>
<li>é€‰æ‹©åœ°ç†ä½ç½®æ›´è¿‘çš„DNSæœåŠ¡å™¨</li>
<li>åˆç†è®¾ç½®TTLå¹³è¡¡æ›´æ–°é€Ÿåº¦å’Œæ€§èƒ½</li>
</ul>
<h3 data-id="heading-22">è¿½é—®3ï¼šHTTPSç½‘ç«™çš„DNSè§£ææœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„ï¼Ÿ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> httpsSpecialHandling = {
    <span class="hljs-comment">// DNSè§£æé˜¶æ®µç›¸åŒ</span>
    <span class="hljs-attr">dnsPhase</span>: &amp;#<span class="hljs-number">34</span>;ä¸<span class="hljs-variable constant_">HTTP</span>å®Œå…¨ä¸€æ ·ï¼Œéƒ½æ˜¯è§£æåŸŸååˆ°<span class="hljs-variable constant_">IP</span>&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// ä½†åç»­æ­¥éª¤ä¸åŒ</span>
    <span class="hljs-attr">afterDNS</span>: {
        <span class="hljs-attr">tlsHandshake</span>: &amp;#<span class="hljs-number">34</span>;éœ€è¦é¢å¤–çš„<span class="hljs-variable constant_">TLS</span>æ¡æ‰‹è¿‡ç¨‹&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">certificateValidation</span>: &amp;#<span class="hljs-number">34</span>;éœ€è¦éªŒè¯<span class="hljs-variable constant_">SSL</span>è¯ä¹¦&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">sni</span>: &amp;#<span class="hljs-number">34</span>;å¯èƒ½éœ€è¦<span class="hljs-variable constant_">SNI</span>ï¼ˆ<span class="hljs-title class_">Server</span> <span class="hljs-title class_">Name</span> <span class="hljs-title class_">Indication</span>ï¼‰&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// æ€§èƒ½å½±å“</span>
    <span class="hljs-attr">performance</span>: {
        <span class="hljs-attr">additionalRoundTrips</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">TLS</span>æ¡æ‰‹å¢åŠ <span class="hljs-number">1</span>-<span class="hljs-number">2</span>ä¸ª<span class="hljs-variable constant_">RTT</span>&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">certificateChain</span>: &amp;#<span class="hljs-number">34</span>;ä¸‹è½½å’ŒéªŒè¯è¯ä¹¦é“¾&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">ocspStapling</span>: &amp;#<span class="hljs-number">34</span>;å¯èƒ½çš„<span class="hljs-variable constant_">OCSP</span>æ£€æŸ¥&amp;#<span class="hljs-number">34</span>;
    }
};
</code></pre>
<h3 data-id="heading-23">è¿½é—®4ï¼šCDNæ˜¯å¦‚ä½•é€šè¿‡DNSå®ç°æ™ºèƒ½è°ƒåº¦çš„ï¼Ÿ</h3>
<p><strong>æ™ºèƒ½DNSè°ƒåº¦åŸç†</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cdnDnsStrategy = {
    <span class="hljs-comment">// ç”¨æˆ·è¯·æ±‚è¿‡ç¨‹</span>
    <span class="hljs-attr">userRequest</span>: &amp;#<span class="hljs-number">34</span>;ç”¨æˆ·è¯·æ±‚ www.<span class="hljs-property">example</span>.<span class="hljs-property">com</span>&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// DNSæ™ºèƒ½å“åº”</span>
    <span class="hljs-attr">dnsResponse</span>: {
        <span class="hljs-attr">step1</span>: &amp;#<span class="hljs-number">34</span>;æ£€æµ‹ç”¨æˆ·<span class="hljs-variable constant_">IP</span>åœ°ç†ä½ç½®&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">step2</span>: &amp;#<span class="hljs-number">34</span>;æ£€æŸ¥å„<span class="hljs-variable constant_">CDN</span>èŠ‚ç‚¹å¥åº·çŠ¶æ€&amp;#<span class="hljs-number">34</span>;, 
        <span class="hljs-attr">step3</span>: &amp;#<span class="hljs-number">34</span>;è®¡ç®—æœ€ä¼˜èŠ‚ç‚¹ï¼ˆå»¶è¿Ÿ+è´Ÿè½½ï¼‰&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">step4</span>: &amp;#<span class="hljs-number">34</span>;è¿”å›æœ€ä¼˜èŠ‚ç‚¹<span class="hljs-variable constant_">IP</span>åœ°å€&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// å®ç°æŠ€æœ¯</span>
    <span class="hljs-attr">implementation</span>: {
        <span class="hljs-attr">geoDNS</span>: &amp;#<span class="hljs-number">34</span>;åŸºäºåœ°ç†ä½ç½®çš„<span class="hljs-variable constant_">DNS</span>è§£æ&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">healthCheck</span>: &amp;#<span class="hljs-number">34</span>;å®æ—¶ç›‘æ§èŠ‚ç‚¹çŠ¶æ€&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">loadBalancing</span>: &amp;#<span class="hljs-number">34</span>;æ ¹æ®è´Ÿè½½åŠ¨æ€è°ƒæ•´&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">anycast</span>: &amp;#<span class="hljs-number">34</span>;ä»»æ’­æŠ€æœ¯ä¼˜åŒ–è·¯ç”±&amp;#<span class="hljs-number">34</span>;
    }
};
</code></pre>
<h2 data-id="heading-24">DNSè®¾è®¡æƒè¡¡åˆ†æ</h2>
<h3 data-id="heading-25">ä¸€è‡´æ€§ vs æ€§èƒ½</h3>
<p>DNS ç³»ç»Ÿä½“ç°äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç»å…¸æƒè¡¡ï¼š</p>
<p><strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼š</p>
<ul>
<li>DNS æ›´æ–°ä¸æ˜¯å®æ—¶çš„</li>
<li>ä¸åŒåœ°åŒºå¯èƒ½çœ‹åˆ°ä¸åŒçš„ç»“æœ</li>
<li>é€šè¿‡ TTL æ§åˆ¶ä¸€è‡´æ€§çª—å£</li>
</ul>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>å¤šçº§ç¼“å­˜æå‡å“åº”é€Ÿåº¦</li>
<li>åˆ†å¸ƒå¼æ¶æ„æé«˜å¯ç”¨æ€§</li>
<li>å°±è¿‘è®¿é—®å‡å°‘ç½‘ç»œå»¶è¿Ÿ</li>
</ul>
<h3 data-id="heading-26">å¯ç”¨æ€§ vs å®‰å…¨æ€§</h3>
<p><strong>é«˜å¯ç”¨è®¾è®¡</strong>ï¼š</p>
<ul>
<li>13 ä¸ªæ ¹æœåŠ¡å™¨åˆ†å¸ƒå…¨çƒ</li>
<li>ä»»æ’­æŠ€æœ¯å®ç°å°±è¿‘è®¿é—®</li>
<li>å†—ä½™è®¾è®¡é¿å…å•ç‚¹æ•…éšœ</li>
</ul>
<p><strong>å®‰å…¨æŒ‘æˆ˜</strong>ï¼š</p>
<ul>
<li>DNS æŸ¥è¯¢é»˜è®¤æ˜¯æ˜æ–‡çš„</li>
<li>å®¹æ˜“è¢«ç›‘å¬å’Œç¯¡æ”¹</li>
<li>éœ€è¦é¢å¤–çš„å®‰å…¨æœºåˆ¶</li>
</ul>
<h3 data-id="heading-27">æ‰©å±•æ€§ vs å¤æ‚æ€§</h3>
<p><strong>æ‰©å±•æ€§è®¾è®¡</strong>ï¼š</p>
<ul>
<li>åˆ†å±‚æ¶æ„æ”¯æŒæ— é™æ‰©å±•</li>
<li>æ–°çš„è®°å½•ç±»å‹å¯ä»¥éšæ—¶æ·»åŠ </li>
<li>æ”¯æŒå›½é™…åŒ–åŸŸå</li>
</ul>
<p><strong>å¤æ‚æ€§ç®¡ç†</strong>ï¼š</p>
<ul>
<li>å¤šçº§æŸ¥è¯¢å¢åŠ äº†å¤æ‚åº¦</li>
<li>ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜</li>
<li>æ•…éšœæ’æŸ¥å›°éš¾</li>
</ul>
<h2 data-id="heading-28">é¢è¯•æ€»ç»“ï¼šå¦‚ä½•è·å¾—é«˜åˆ†</h2>
<h3 data-id="heading-29">90åˆ†ç­”æ¡ˆçš„ç»“æ„</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> perfectAnswer = {
    <span class="hljs-comment">// ç¬¬ä¸€å±‚ï¼šåŸºç¡€æµç¨‹ï¼ˆ60åˆ†ï¼‰</span>
    <span class="hljs-attr">basicFlow</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">8</span>æ­¥å®Œæ•´æµç¨‹ï¼Œä»æµè§ˆå™¨ç¼“å­˜åˆ°æƒå¨æœåŠ¡å™¨&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// ç¬¬äºŒå±‚ï¼šæŠ€æœ¯ç»†èŠ‚ï¼ˆ75åˆ†ï¼‰</span>
    <span class="hljs-attr">technicalDetails</span>: {
        <span class="hljs-attr">recursiveVsIterative</span>: &amp;#<span class="hljs-number">34</span>;é€’å½’æŸ¥è¯¢vsè¿­ä»£æŸ¥è¯¢çš„åŒºåˆ«&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">cacheStrategy</span>: &amp;#<span class="hljs-number">34</span>;å¤šçº§ç¼“å­˜æœºåˆ¶å’Œ<span class="hljs-variable constant_">TTL</span>ç­–ç•¥&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">recordTypes</span>: &amp;#<span class="hljs-number">34</span>;A/<span class="hljs-variable constant_">AAAA</span>/<span class="hljs-variable constant_">CNAME</span>/<span class="hljs-variable constant_">MX</span>è®°å½•çš„ä½œç”¨&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// ç¬¬ä¸‰å±‚ï¼šè®¾è®¡æ€è€ƒï¼ˆ85åˆ†ï¼‰</span>
    <span class="hljs-attr">designThinking</span>: {
        <span class="hljs-attr">distributedSystem</span>: &amp;#<span class="hljs-number">34</span>;åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§æƒè¡¡&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">performanceOptimization</span>: &amp;#<span class="hljs-number">34</span>;ç¼“å­˜ä¸å®æ—¶æ€§çš„å¹³è¡¡&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">securityConsideration</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">DNS</span>åŠ«æŒå’Œå®‰å…¨é˜²æŠ¤&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// ç¬¬å››å±‚ï¼šå®é™…åº”ç”¨ï¼ˆ90åˆ†+ï¼‰</span>
    <span class="hljs-attr">practicalApplication</span>: {
        <span class="hljs-attr">frontendOptimization</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">DNS</span>é¢„è§£æå’Œæ€§èƒ½ä¼˜åŒ–&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">troubleshooting</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-variable constant_">DNS</span>è§£æå¤±è´¥çš„æ’æŸ¥æ€è·¯&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">modernTechnology</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-title class_">DoH</span>/<span class="hljs-title class_">DoT</span>ç­‰æ–°æŠ€æœ¯è¶‹åŠ¿&amp;#<span class="hljs-number">34</span>;
    }
};
</code></pre>
<h3 data-id="heading-30">å¸¸è§æ‰£åˆ†ç‚¹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> commonMistakes = {
    <span class="hljs-comment">// æµç¨‹ä¸å®Œæ•´</span>
    <span class="hljs-attr">incompleteFlow</span>: &amp;#<span class="hljs-number">34</span>;åªè¯´äº†<span class="hljs-string">'æŸ¥ç¼“å­˜ç„¶åæŸ¥DNSæœåŠ¡å™¨'</span>&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// æ¦‚å¿µæ··æ·†</span>
    <span class="hljs-attr">conceptConfusion</span>: {
        <span class="hljs-attr">mistake1</span>: &amp;#<span class="hljs-number">34</span>;åˆ†ä¸æ¸…é€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">mistake2</span>: &amp;#<span class="hljs-number">34</span>;ä¸çŸ¥é“æœ¬åœ°<span class="hljs-variable constant_">DNS</span>æœåŠ¡å™¨çš„ä½œç”¨&amp;#<span class="hljs-number">34</span>;,
        <span class="hljs-attr">mistake3</span>: &amp;#<span class="hljs-number">34</span>;æ··æ·†<span class="hljs-variable constant_">DNS</span>è®°å½•ç±»å‹&amp;#<span class="hljs-number">34</span>;
    },
    
    <span class="hljs-comment">// ç¼ºä¹æ·±åº¦</span>
    <span class="hljs-attr">lackDepth</span>: &amp;#<span class="hljs-number">34</span>;åªåœç•™åœ¨è¡¨é¢ï¼Œæ²¡æœ‰åˆ†æè®¾è®¡åŸç†&amp;#<span class="hljs-number">34</span>;,
    
    <span class="hljs-comment">// è„±ç¦»å®é™…</span>
    <span class="hljs-attr">lackPractical</span>: &amp;#<span class="hljs-number">34</span>;ä¸çŸ¥é“å¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­ä¼˜åŒ–<span class="hljs-variable constant_">DNS</span>æ€§èƒ½&amp;#<span class="hljs-number">34</span>;
};
</code></pre>
<h3 data-id="heading-31">é¢è¯•åŠ åˆ†æŠ€å·§</h3>
<ol>
<li><strong>ç”¨æ•°æ®è¯´è¯</strong>ï¼šæåˆ°å…·ä½“çš„å»¶è¿Ÿæ•°æ®å’Œä¼˜åŒ–æ•ˆæœ</li>
<li><strong>ç»“åˆå®é™…é¡¹ç›®</strong>ï¼šè¯´è¯´ä½ åœ¨é¡¹ç›®ä¸­å¦‚ä½•ä¼˜åŒ–DNSè§£æ</li>
<li><strong>å±•ç¤ºç³»ç»Ÿæ€ç»´</strong>ï¼šä»è®¾è®¡æƒè¡¡çš„è§’åº¦åˆ†æDNSç³»ç»Ÿ</li>
<li><strong>å…³æ³¨æ–°æŠ€æœ¯</strong>ï¼šäº†è§£DoHã€DoTç­‰æ–°å…´æŠ€æœ¯</li>
</ol>
<h2 data-id="heading-32">æ€»ç»“</h2>
<p>DNSè§£æä¸ä»…ä»…æ˜¯"æŠŠåŸŸåè½¬æ¢æˆIPåœ°å€"è¿™ä¹ˆç®€å•ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¤æ‚çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä½“ç°äº†ç½‘ç»œæ¶æ„è®¾è®¡çš„æ™ºæ…§ã€‚</p>
<h3 data-id="heading-33">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li><strong>8æ­¥å®Œæ•´æµç¨‹</strong>ï¼šä»æµè§ˆå™¨ç¼“å­˜åˆ°æƒå¨æœåŠ¡å™¨çš„å®Œæ•´é“¾è·¯</li>
<li><strong>åˆ†å±‚ç¼“å­˜æœºåˆ¶</strong>ï¼šå¤šçº§ç¼“å­˜æå‡æ€§èƒ½çš„åŒæ—¶ä¿è¯ä¸€è‡´æ€§</li>
<li><strong>é€’å½’vsè¿­ä»£</strong>ï¼šç†è§£ä¸¤ç§æŸ¥è¯¢æ–¹å¼çš„åŒºåˆ«å’Œåº”ç”¨åœºæ™¯</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</strong>ï¼šå‰ç«¯DNSé¢„è§£æã€æ™ºèƒ½DNSé€‰æ‹©ç­‰</li>
<li><strong>å®‰å…¨è€ƒè™‘</strong>ï¼šDNSåŠ«æŒé˜²æŠ¤å’Œæ–°å…´å®‰å…¨æŠ€æœ¯</li>
</ol>
<h3 data-id="heading-34">å®é™…åº”ç”¨å»ºè®®</h3>
<ul>
<li><strong>å¼€å‘é˜¶æ®µ</strong>ï¼šåˆç†ä½¿ç”¨DNSé¢„è§£æï¼Œå‡å°‘ä¸å¿…è¦çš„åŸŸåæŸ¥è¯¢</li>
<li><strong>éƒ¨ç½²é˜¶æ®µ</strong>ï¼šé€‰æ‹©åˆé€‚çš„TTLå€¼ï¼Œå¹³è¡¡æ€§èƒ½å’Œæ›´æ–°é€Ÿåº¦</li>
<li><strong>ç›‘æ§é˜¶æ®µ</strong>ï¼šå…³æ³¨DNSè§£ææ—¶é—´ï¼ŒåŠæ—¶å‘ç°æ€§èƒ½ç“¶é¢ˆ</li>
<li><strong>ä¼˜åŒ–é˜¶æ®µ</strong>ï¼šç»“åˆCDNå’Œæ™ºèƒ½DNSï¼Œæå‡ç”¨æˆ·ä½“éªŒ</li>
</ul>
<p>æŒæ¡äº†è¿™äº›çŸ¥è¯†ç‚¹ï¼Œä½ å°±èƒ½åœ¨é¢è¯•ä¸­æ¸¸åˆƒæœ‰ä½™ï¼Œå±•ç°å‡ºæ·±åšçš„æŠ€æœ¯åŠŸåº•å’Œç³»ç»Ÿæ€§æ€ç»´ã€‚</p>
<hr/>
<h2 data-id="heading-35">ç›¸å…³èµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc1035" target="_blank" title="https://tools.ietf.org/html/rfc1035" ref="nofollow noopener noreferrer">RFC 1035 - DNS åè®®è§„èŒƒ</a>ï¼šDNS åè®®çš„åŸºç¡€å®šä¹‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc4033" target="_blank" title="https://tools.ietf.org/html/rfc4033" ref="nofollow noopener noreferrer">DNS å®‰å…¨æ‰©å±• (DNSSEC)</a>ï¼šDNS å®‰å…¨æœºåˆ¶</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cloudflare.com%2Flearning%2Fdns%2F" target="_blank" title="https://www.cloudflare.com/learning/dns/" ref="nofollow noopener noreferrer">Cloudflare DNS å­¦ä¹ ä¸­å¿ƒ</a>ï¼šDNS æ¦‚å¿µçš„é€šä¿—è§£é‡Š</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fspeed%2Fpublic-dns" target="_blank" title="https://developers.google.com/speed/public-dns" ref="nofollow noopener noreferrer">Google Public DNS</a>ï¼šå…¬å…±DNSæœåŠ¡è¯¦è§£</li>
</ul>
<hr/>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¸®ä½ åœ¨é¢è¯•ä¸­æ‹¿åˆ°äº†é«˜åˆ†ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼æœ‰ä»»ä½•DNSç›¸å…³çš„é—®é¢˜ï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>é¢è¯•æŠ€å·§</strong>ï¼šå‡†å¤‡é¢è¯•æ—¶ä¸è¦åªèƒŒç­”æ¡ˆï¼Œè¦ç†è§£åŸç†ã€‚é¢è¯•å®˜æ›´çœ‹é‡ä½ çš„æ€è€ƒè¿‡ç¨‹å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‹¹æœæ‰‹æœºiOSåº”ç”¨ç®¡ç†å…¨æŒ‡å—ä¸éšè—åŠŸèƒ½è¯¦è§£]]></title>    <link>https://juejin.cn/post/7581893894175899658</link>    <guid>https://juejin.cn/post/7581893894175899658</guid>    <pubDate>2025-12-10T09:53:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581893894175899658" data-draft-id="7582048028392259634" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‹¹æœæ‰‹æœºiOSåº”ç”¨ç®¡ç†å…¨æŒ‡å—ä¸éšè—åŠŸèƒ½è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T09:53:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bcbnb"/> <meta itemprop="url" content="https://juejin.cn/user/895474073078377"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‹¹æœæ‰‹æœºiOSåº”ç”¨ç®¡ç†å…¨æŒ‡å—ä¸éšè—åŠŸèƒ½è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474073078377/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bcbnb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:53:03.000Z" title="Wed Dec 10 2025 09:53:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è‹¹æœæ‰‹æœºçš„åº”ç”¨ç®¡ç†åœ¨å“ªé‡Œï¼ŸiOSéšè—åŠŸèƒ½å¤§å…¬å¼€ï¼</p>
<h3 data-id="heading-0">ä½ çš„iPhoneè¿˜åªä¼šé•¿æŒ‰åˆ åº”ç”¨ï¼Ÿè¿™5ä¸ªé«˜é˜¶ç®¡ç†æŠ€å·§ï¼Œè®©æ‰‹æœºæµç•…åº¦ç¿»å€ï¼</h3>
<p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿé‡åˆ°è¿‡è¿™äº›çƒ¦æ¼ï¼Ÿ</p>
<p>128Gæ‰‹æœºæ€»æç¤ºå­˜å‚¨ç©ºé—´ä¸è¶³</p>
<p>æƒ³æ‰¹é‡å¸è½½å´æ‰¾ä¸åˆ°å…¥å£</p>
<p>åå°å·å·è€—ç”µçš„APPæŸ¥ä¸å‡ºæ¥</p>
<p><strong>åˆ«æ€¥ï¼iOSçš„åº”ç”¨ç®¡ç†æ¯”ä½ æƒ³è±¡çš„å¼ºå¤§å¾—å¤š</strong>ï¼Œä»Šå¤©æ‰‹æŠŠæ‰‹æ•™ä½ ä»åŸºç¡€åˆ°é«˜é˜¶çš„å…¨å¥—æŠ€å·§ï¼Œè¿åº“å…‹éƒ½æ²¡è®²è¿™ä¹ˆç»†è¿‡ï¼</p>
<h3 data-id="heading-1">1ï¸âƒ£ ã€åŸºç¡€ç‰ˆã€‘æ¡Œé¢ç®¡ç†</h3>
<p>é•¿æŒ‰å›¾æ ‡â†’é€‰æ‹©"ç¼–è¾‘ä¸»å±å¹•"</p>
<p>å¯æ“ä½œï¼šåˆ é™¤/ç§»åŠ¨/åˆ›å»ºæ–‡ä»¶å¤¹</p>
<p>2ï¸âƒ£ ã€è¿›é˜¶ç‰ˆã€‘è®¾ç½®ä¸­å¿ƒ</p>
<p>è·¯å¾„ï¼šè®¾ç½®â†’é€šç”¨â†’iPhoneå‚¨å­˜ç©ºé—´</p>
<p>ç‹¬å®¶åŠŸèƒ½ï¼š</p>
<ul>
<li>
<p>æŒ‰å ç”¨æ’åºï¼ˆæªå‡ºå†…å­˜æ€æ‰‹ï¼‰</p>
</li>
<li>
<p>æŸ¥çœ‹ä¸Šæ¬¡ä½¿ç”¨æ—¶é—´</p>
</li>
<li>
<p>é€‰æ‹©æ€§æ¸…é™¤ç¼“å­˜</p>
</li>
</ul>
<p>å¯¹äºéœ€è¦æ›´æ·±å…¥æ–‡ä»¶ç®¡ç†å’Œæ€§èƒ½ç›‘æ§çš„ç”¨æˆ·ï¼ŒKeymobæä¾›äº†ä¸“ä¸šçš„iOSå·¥å…·ï¼Œæ”¯æŒå®æ—¶æŸ¥çœ‹åº”ç”¨æ•°æ®å’Œèµ„æºä½¿ç”¨æƒ…å†µã€‚</p>
<p>3ï¸âƒ£ ã€éšè—ç‰ˆã€‘åå°ç®¡ç†</p>
<p>è¿ç»­æ“ä½œï¼šè®¾ç½®â†’å±å¹•ä½¿ç”¨æ—¶é—´â†’æŸ¥çœ‹æ‰€æœ‰æ´»åŠ¨</p>
<p>å¯æŸ¥çœ‹ï¼š</p>
<ul>
<li>
<p>å„APPåå°æ´»åŠ¨æ—¶é•¿</p>
</li>
<li>
<p>é€šçŸ¥è§¦å‘æ¬¡æ•°</p>
</li>
</ul>
<p>Keymobå·¥å…·èƒ½è¿›ä¸€æ­¥åˆ†æåå°èƒ½è€—å’Œæ€§èƒ½æŒ‡æ ‡ï¼Œå¸®åŠ©ä¼˜åŒ–åº”ç”¨è¡Œä¸ºã€‚</p>
<h3 data-id="heading-2">5ä¸ªå¿…å­¦é«˜é˜¶æŠ€å·§</h3>
<ol>
<li>
<p>æ‰¹é‡å¸è½½ï¼šå‚¨å­˜ç©ºé—´ç•Œé¢å·¦æ»‘å¤šé€‰</p>
</li>
<li>
<p>ä¿ç•™æ•°æ®åˆ APPï¼šé€‰æ‹©"å¸è½½åº”ç”¨"è€Œé"åˆ é™¤åº”ç”¨"</p>
</li>
<li>
<p>é™åˆ¶åå°åˆ·æ–°ï¼šè®¾ç½®â†’é€šç”¨â†’åå°APPåˆ·æ–°</p>
</li>
<li>
<p>æŸ¥æ‰¾æ®‹ç•™æ–‡ä»¶ï¼šæ–‡ä»¶APPâ†’æµè§ˆâ†’æˆ‘çš„iPhone</p>
</li>
<li>
<p>ç¦æ­¢è‡ªåŠ¨å®‰è£…ï¼šApp Storeâ†’å…³é—­è‡ªåŠ¨ä¸‹è½½</p>
</li>
</ol>
<p>ã€Šè‹¹æœæ‰‹æœºçš„åº”ç”¨ç®¡ç†åœ¨å“ªé‡Œã€‹å®Œæ•´æŒ‡å—ï¼š</p>
<p>ä¸‰å¤§å…¥å£ï¼š</p>
<p>â€¢ æ¡Œé¢ç›´æ¥ç®¡ç†</p>
<p>â€¢ è®¾ç½®-å‚¨å­˜ç©ºé—´</p>
<p>â€¢ å±å¹•ä½¿ç”¨æ—¶é—´</p>
<p>æ ¸å¿ƒä»·å€¼ï¼š</p>
<p>ç²¾å‡†æŒæ§æ¯ä¸ªAPP</p>
<p>æ·±åº¦æ¸…ç†éšè—ç¼“å­˜</p>
<p>æœç»åå°å·è·‘æµé‡</p>
<p>é•¿æŒ‰æ¡Œé¢æœ€å¿«æ·ï¼Œå‚¨å­˜ç©ºé—´æœ€ä¸“ä¸šï¼Œå±å¹•æ—¶é—´æœ€å…¨é¢</p>
<p><strong>ä½ çš„iPhoneè¿˜å‰©å¤šå°‘å†…å­˜ï¼Ÿ</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[umi3 â†’ umi4 å‡çº§ï¼šè¸©å‘ä¸è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7581999251367804980</link>    <guid>https://juejin.cn/post/7581999251367804980</guid>    <pubDate>2025-12-10T09:49:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581999251367804980" data-draft-id="7581814484066435124" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="umi3 â†’ umi4 å‡çº§ï¼šè¸©å‘ä¸è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,Cursor"/> <meta itemprop="datePublished" content="2025-12-10T09:49:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WindStormrage"/> <meta itemprop="url" content="https://juejin.cn/user/1776409189557053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            umi3 â†’ umi4 å‡çº§ï¼šè¸©å‘ä¸è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1776409189557053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WindStormrage
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:49:41.000Z" title="Wed Dec 10 2025 09:49:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å½“å‰é¡¹ç›®ä½¿ç”¨ umi3ï¼Œä¸ºäº†æå‡å¼€å‘æ•ˆç‡å’Œä½“éªŒï¼Œå†³å®šå°†é¡¹ç›®ä» umi3 å‡çº§åˆ° umi4ã€‚æœ¬æ–‡è®°å½•å‡çº§è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">ä¸€ã€umi4 çš„æ ¸å¿ƒå˜åŒ–</h2>
<p>åœ¨å¼€å§‹è¸©å‘ä¹‹å‰ï¼Œå…ˆç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹å‡çº§ umi4 åä¸¤ä¸ªå˜åŒ–æœ€å¤§çš„éƒ¨åˆ†ï¼š</p>
<h3 data-id="heading-2">1.1 è·¯ç”±ç³»ç»Ÿï¼šReact Router v5 â†’ v6</h3>
<p>è¿™æ˜¯å½±å“æœ€å¤§çš„å˜åŒ–ï¼Œå¯¼è‡´äº†å¤§é‡ API éœ€è¦è¿ç§»ï¼Œå…·ä½“æ”¹åŠ¨ç‚¹åœ¨ umi çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fumijs.org%2Fdocs%2Fintroduce%2Fupgrade-to-umi-4" target="_blank" title="https://umijs.org/docs/introduce/upgrade-to-umi-4" ref="nofollow noopener noreferrer">å‡çº§æ–‡æ¡£</a>é‡Œé¢æœ‰åˆ—å‡ºï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// umi3 (React Router v5)</span>
<span class="hljs-keyword">import</span> { useHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'umi'</span>;
<span class="hljs-keyword">const</span> history = <span class="hljs-title function_">useHistory</span>();
history.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/path'</span>);

<span class="hljs-comment">// umi4 (React Router v6)</span>
<span class="hljs-keyword">import</span> { useNavigate } <span class="hljs-keyword">from</span> <span class="hljs-string">'umi'</span>;
<span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();
<span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/path'</span>);
</code></pre>
<h3 data-id="heading-3">1.2 Layout æ’ä»¶æœºåˆ¶</h3>
<p>umi4 æ”¹æˆäº†è‡ªåŠ¨æŸ¥æ‰¾ layoutï¼Œå­è·¯ç”±é€»è¾‘ä¹Ÿåšäº†ä¿®æ”¹ï¼Œç›´æ¥æ›¿æ¢å°±è¡Œã€‚</p>




















<table><thead><tr><th>ç»´åº¦</th><th>umi3</th><th>umi4</th></tr></thead><tbody><tr><td>å¸ƒå±€å‘ç°</td><td>éœ€è¦åœ¨è·¯ç”±ä¸­æŒ‡å®š<code>component</code></td><td>è‡ªåŠ¨æŸ¥æ‰¾<code>src/layouts/index.tsx</code></td></tr><tr><td>å­è·¯ç”±æ¸²æŸ“</td><td><code>props.children</code></td><td><code>Outlet</code> æ ‡ç­¾</td></tr></tbody></table>
<h2 data-id="heading-4">äºŒã€è¸©å‘å®å½•</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä¼šé€ä¸ªä»‹ç»è¿™æ¬¡å‡çº§é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Œå¯èƒ½å„ä¸ªé¡¹ç›®çš„æƒ…å†µæœ‰æ‰€ä¸åŒï¼Œä¸ä¸€å®šé‡åˆ°ç›¸åŒçš„é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥åœ¨ç›®å½•ä¸­æ‰¾åˆ°é‡åˆ°çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-5">2.1 SSO 401 è·³è½¬é—®é¢˜</h3>
<p>æœ¬åœ°å¯åŠ¨åè·³è½¬ sso ç™»å½•é¡µé¢ï¼Œç‚¹å‡»ç™»å½•åè¿˜æ˜¯ä¼šè°ƒåˆ°ssoç™»å½•é¡µé¢ï¼Œåæ¥å»æ’æŸ¥æ¥å£è¯·æ±‚ï¼Œå‘ç°æ˜¯é¡µé¢ä¸Šçš„è¯·æ±‚éƒ½è¿”å›401ï¼Œåœ¨ç¡®è®¤æ¥å£æ²¡é—®é¢˜åï¼Œå¯¹æ¯”äº†ä¸€ä¸‹è¯·æ±‚å¤´ï¼Œå‘ç°è¯·æ±‚å¤´ç¼ºå°‘ accessTokenï¼Œæ‰€ä»¥é—®é¢˜æ˜¯è¯·æ±‚æ²¡å¸¦ä¸Š accessTokenã€‚</p>
<p><strong>åŸå› </strong>ï¼šumi3 ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚ä¸­æ·»åŠ  accessTokenï¼Œumi4 ä¸å†è‡ªåŠ¨æ³¨å…¥ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­æ‰‹åŠ¨æ·»åŠ  accessTokenã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ff0b7a27bed445a8d61d9fdcba9bca5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2luZFN0b3JtcmFnZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965596&amp;x-signature=dJ3%2BBeR8oM5U8KfbYWpnZDxZQIY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">2.2 å¯¼èˆªåµŒå¥—é—®é¢˜</h3>
<p>é¡µé¢å‡ºç°ä¸¤å±‚å¯¼èˆªæ äº’ç›¸åµŒå¥—ã€‚</p>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>umi4 ä¼šè‡ªåŠ¨æŸ¥æ‰¾å¹¶åº”ç”¨ <code>src/layouts/index.tsx</code>ã€‚</li>
<li>umi4 ä¼šé€šè¿‡  æ¸²æŸ“å­è·¯ç”±ï¼Œå¦‚æœè·¯ç”±é…ç½®ä¸­åˆæŒ‡å®šäº† <code>component: '@/layouts'</code>ï¼Œä¼šå¯¼è‡´å¸ƒå±€æ¸²æŸ“ä¸¤æ¬¡ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p>å»æ‰ä¹‹å‰åœ¨ routes æ–‡ä»¶é‡Œé¢å®šä¹‰çš„ layoutã€‚</p>
<pre><code class="hljs language-ts" lang="ts">{
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
  <span class="hljs-comment">// component: '@/layouts',  // æ³¨é‡Šæ‰è¿™è¡Œ</span>
  <span class="hljs-attr">routes</span>: [...]
}
</code></pre>
<h3 data-id="heading-7">2.3 SVG å›¾æ ‡ä¸æ˜¾ç¤º</h3>
<p>éƒ¨åˆ†å›¾æ ‡æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ï¼Œæ’æŸ¥å‘ç°æ²¡æ˜¾ç¤ºå‡ºæ¥çš„éƒ½æ˜¯ iconfont çš„ SVG å›¾æ ‡ã€‚æ¥ç€æ£€æŸ¥èµ„æºé‡Œé¢æ²¡æœ‰ iconfont.jsã€‚</p>
<p><strong>åŸå› ï¼š</strong> åœ¨ä»£ç ä¸­æŸ¥çœ‹ iconfont å¼•ç”¨çš„åœ°æ–¹ document.ejsï¼Œå‘ç°ä½¿ç”¨äº† <code>&lt;%= context.config.publicPath %&gt;iconfont.js</code>å¼•å…¥æ–‡ä»¶ï¼Œåœ¨ umi4 ä¸­ï¼Œ<code>context.config.publicPath</code> è¿™ä¸ªæ¨¡æ¿å˜é‡ä¸å†å¯ç”¨ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåœ¨ <code>app.tsx</code> ä¸­è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
  <span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
  script.<span class="hljs-property">src</span> = <span class="hljs-string">'/iconfont.js'</span>;
  script.<span class="hljs-property">async</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(script);
}
</code></pre>
<h3 data-id="heading-8">2.4 KeepAlive + useModel ç™½å±</h3>
<p>å½“å­è·¯ç”±æ›¿æ¢æˆ Outlet æ ‡ç­¾åï¼Œé¡µé¢å‡ºç°ç™½å±ï¼Œæ§åˆ¶å°å‡ºç°æŠ¥é”™ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e569ecbe60c40e4b4ec3c06cd2222d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2luZFN0b3JtcmFnZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965596&amp;x-signature=noO1lkht1A4p0Lb%2BGazy6plr0bE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51bb08e14d9142e08a40e824462fc274~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2luZFN0b3JtcmFnZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965596&amp;x-signature=ZCQhRHdB%2BbQmH7%2FiLqNhKAYlLSE%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ’æŸ¥è¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>æ ¹æ®æŠ¥é”™ä¿¡æ¯ï¼Œå®šä½åˆ°æŠ¥é”™å‘ç”Ÿåœ¨ useModel è°ƒç”¨å¤„</li>
<li>é€šè¿‡æœç´¢ GitHub Issue æ‰¾åˆ°ç›¸å…³è®¨è®ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fumijs%2Fumi%2Fissues%2F10334" target="_blank" title="https://github.com/umijs/umi/issues/10334" ref="nofollow noopener noreferrer">umi#10334</a></li>
<li>ç¡®è®¤æ˜¯ KeepAlive çš„ç¼“å­˜æœºåˆ¶å¯¼è‡´ React Context ä¼ é€’é“¾æ–­è£‚</li>
</ol>
<p><strong>åŸå› ï¼š</strong> å½“ useModel åœ¨ KeepAlive åŒ…è£¹çš„ç»„ä»¶å†…éƒ¨è°ƒç”¨æ—¶ï¼Œå¯èƒ½æ— æ³•æ­£ç¡®è®¿é—®åˆ° umi æä¾›çš„å…¨å±€ Contextï¼Œä»è€Œå¯¼è‡´ dispatcher ä¸º nullã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå°† useModel è°ƒç”¨ç§»åˆ° KeepAlive å¤–éƒ¨ï¼Œé€šè¿‡ props å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49c28bfabbb44de8b11131d21d491199~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2luZFN0b3JtcmFnZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965596&amp;x-signature=%2B5%2Fxs%2BwN8rsnTHiaiDydR3MPRnI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">2.5 React Router v6 å¸¦æ¥çš„ API å˜æ›´</h3>
<p>umi4 å‡çº§äº† React Router åˆ° v6ï¼Œå¯¼è‡´ä¸€ç³»åˆ— API å˜åŒ–ï¼Œå…·ä½“å¯ä»¥å‚è€ƒumiçš„å®˜æ–¹å‡çº§æ–‡æ¡£ã€‚</p>
<h4 data-id="heading-10">useHistory â†’ useNavigate</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// umi3</span>
<span class="hljs-keyword">import</span> { useHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'umi'</span>;
<span class="hljs-keyword">const</span> history = <span class="hljs-title function_">useHistory</span>();
history.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/path'</span>);
history.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'/path'</span>);

<span class="hljs-comment">// umi4</span>
<span class="hljs-keyword">import</span> { useNavigate } <span class="hljs-keyword">from</span> <span class="hljs-string">'umi'</span>;
<span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();
<span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/path'</span>);
<span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/path'</span>, { <span class="hljs-attr">replace</span>: <span class="hljs-literal">true</span> });
</code></pre>
<h4 data-id="heading-11">location.query ä¸å†æ”¯æŒ</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// umi3</span>
<span class="hljs-keyword">const</span> { id } = location.<span class="hljs-property">query</span>;

<span class="hljs-comment">// umi4</span>
<span class="hljs-keyword">import</span> { parse } <span class="hljs-keyword">from</span> <span class="hljs-string">'query-string'</span>;
<span class="hljs-keyword">const</span> query = <span class="hljs-title function_">parse</span>(location.<span class="hljs-property">search</span>);
</code></pre>
<h4 data-id="heading-12">props ä¸­çš„å‚æ•°ä¸èƒ½ç›´æ¥è·å–</h4>
<p>umi4 ä¸­ <code>props</code> é»˜è®¤ä¸ºç©ºå¯¹è±¡ï¼Œ<code>location</code>ã€<code>history</code>ã€<code>match</code> ç­‰éƒ½ä¸èƒ½ç›´æ¥ä» props è·å–ï¼Œéœ€è¦ä½¿ç”¨å¯¹åº”çš„ hooksã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// umi3</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-keyword">const</span> { location, history, match } = props;
  props.<span class="hljs-property">location</span>;
  props.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'list'</span>);
  props.<span class="hljs-property">match</span>
}

<span class="hljs-comment">// umi4</span>
<span class="hljs-keyword">import</span> { useLocation, history, useMatch } <span class="hljs-keyword">from</span> <span class="hljs-string">'umi'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();
  history.<span class="hljs-title function_">push</span>(<span class="hljs-string">'list'</span>);
  <span class="hljs-keyword">const</span> match = <span class="hljs-title function_">useMatch</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'list/:id'</span> });
}
</code></pre>
<h3 data-id="heading-13">2.6 ProLayout headerRender ä¸ç”Ÿæ•ˆ</h3>
<p><strong>ç°è±¡</strong>ï¼šProLayout çš„ <code>headerRender</code> å±æ€§è®¾ç½®åï¼Œè‡ªå®šä¹‰ header ä¸æ˜¾ç¤ºã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä¸ä½¿ç”¨ <code>headerRender</code>ï¼Œæ”¹ä¸ºå°† header ç»„ä»¶æ”¾åœ¨ ProLayout çš„ children ä¸­ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/063097c144ba45baaf8a24bdd83bc96f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2luZFN0b3JtcmFnZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965596&amp;x-signature=odo2oK4flUBSp9ZV5RR7mtBPyYY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-14">2.7 Cursor ç¼–è¾‘å™¨å¡é¡¿</h3>
<p><strong>ç°è±¡</strong>ï¼šå‡çº§åä½¿ç”¨ Cursor æ‰“å¼€é¡¹ç›®éå¸¸å¡ã€‚</p>
<p><strong>åŸå› </strong>ï¼šumi4 æœ¬åœ°å¯åŠ¨çš„æ—¶å€™ä¼šç”Ÿæˆ <code>.umi</code> çš„ä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œå†…å®¹æ¯”è¾ƒå¤šï¼ŒCursor ç´¢å¼•æ—¶ä¼šæ¶ˆè€—å¤§é‡èµ„æºã€‚åŒæ—¶ VSCode ä¹Ÿä¼šç›‘å¬ <code>.umi</code> çš„æ–‡ä»¶å¯¼è‡´å¡é¡¿ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.cursorignore</code> æ–‡ä»¶è®© Cursor å¿½ç•¥ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">.umi
.umi-production
</code></pre>
<p>åŒæ—¶åœ¨ .vscode çš„ settings.json ä¸­ä¹Ÿè¦æ·»åŠ å¯¹.umiçš„å¿½ç•¥ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15f98951377a4fcb9da90bb1956485ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2luZFN0b3JtcmFnZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965596&amp;x-signature=tkNrbtmCjmymXypkrqF2N8nwhnw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-15"><strong>2.8 æ— æ³•ä» 'umi' å¯¼å…¥çš„é—®é¢˜</strong></h3>
<p><strong>ç°è±¡</strong>ï¼šä¹‹å‰ä» 'umi' å¯¼å…¥çš„æŸäº›å‡½æ•°æŠ¥é”™æ‰¾ä¸åˆ°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fec23106a3894ff586f472c50e7beeb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2luZFN0b3JtcmFnZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965596&amp;x-signature=2TtlnSFsBwOBdbsTAcQ8bW6729c%3D" alt="" loading="lazy"/></p>
<p><strong>åŸå› </strong>ï¼šé¡¹ç›®ä¸­è‡ªå®šä¹‰çš„ model åˆå§‹åŒ–å‡½æ•°ï¼ˆå¦‚ <code>getIndicatorInitState</code>ã€<code>getDatasetInitState</code>ï¼‰åœ¨ umi3 ä¸­å¯èƒ½é€šè¿‡æ’ä»¶æŒ‚è½½åˆ° umi å‘½åç©ºé—´ï¼Œumi4 ä¸å†æ”¯æŒã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// Before: umi3</span>
<span class="hljs-keyword">import</span> { getIndicatorInitState, getDatasetInitState } <span class="hljs-keyword">from</span> <span class="hljs-string">'umi'</span>;

<span class="hljs-comment">// After: umi4</span>
<span class="hljs-keyword">import</span> { getIndicatorInitState } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/models/indicator'</span>;
<span class="hljs-keyword">import</span> { getDatasetInitState } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/models/dataset'</span>;
</code></pre>
<h2 data-id="heading-16">ä¸‰ã€å‡çº§ Checklist</h2>
<p>æœ€åè´´ä¸€ä¸‹æˆ‘æœ¬æ¬¡ umi å‡çº§çš„ä¸»è¦æµç¨‹</p>
<ol>
<li>å‡†å¤‡å·¥ä½œ</li>
</ol>
<ul>
<li>é¡¹ç›®å¤‡ä»½</li>
<li>æ¸…ç†ç¼“å­˜</li>
</ul>
<ol start="2">
<li>ä¾èµ–å‡çº§</li>
</ol>
<ul>
<li>æ›´æ–° package.json ä¾èµ–</li>
<li>æ›´æ–°è„šæœ¬å‘½ä»¤</li>
</ul>
<ol start="3">
<li>é…ç½®æ–‡ä»¶è°ƒæ•´</li>
</ol>
<ul>
<li>æ›´æ–° config.ts é…ç½®ï¼Œåˆ›å»º .env æ–‡ä»¶</li>
<li>æ›´æ–° routers å’Œ layouts æ–‡ä»¶</li>
</ul>
<ol start="4">
<li>æŠ¥é”™å¤„ç†</li>
</ol>
<ul>
<li>æœ¬åœ°å¯åŠ¨ï¼Œæ£€æŸ¥å‘½ä»¤è¡ŒæŠ¥é”™</li>
<li>æ£€æŸ¥æ§åˆ¶å°æŠ¥é”™</li>
<li>å¯åŠ¨åï¼Œæ£€æŸ¥æ ·å¼é—®é¢˜</li>
</ul>
<ol start="5">
<li>æ„å»ºå’Œæµ‹è¯•</li>
</ol>
<ul>
<li>node ç‰ˆæœ¬å‡çº§</li>
<li>æ„å»ºæµ‹è¯•ç¯å¢ƒ</li>
</ul>
<h2 data-id="heading-17">å››ã€æ€»ç»“</h2>
<p>æœ¬æ¬¡å‡çº§é™¤äº†ä¸Šè¿°é—®é¢˜è¿˜é‡åˆ°äº†å…¶ä»–å¾ˆå¤šé—®é¢˜ï¼Œç¯‡å¹…æœ‰é™ç®€å•é—®é¢˜å°±æ²¡æäº†ï¼Œå‡çº§ä¸­å¾ˆå¤šçš„æ­¥éª¤éƒ½æ˜¯ä¾é  Cursor æ¥ååŠ©å®Œæˆçš„ï¼Œæ¯”å¦‚ä¾èµ–çš„å˜æ›´ï¼Œé…ç½®æ–‡ä»¶çš„è¿ç§»ï¼ŒCursor ä¼šæ¯”æˆ‘æ›´åŠ çš„äº†è§£ umi4 çš„æ–‡æ¡£ä¸€äº›ï¼Œå‡ºç°çš„å¾ˆå¤šé—®é¢˜ä¹Ÿä¼šå¾ˆå¥½çš„è§£å†³ï¼Œä½†æ˜¯ä¹Ÿä¼šæœ‰ä¸€äº›å±€é™æ€§ï¼Œæ¯”å¦‚ KeepAlive å¯¼è‡´ç™½å±çš„é—®é¢˜ï¼Œåå¤æé—®éƒ½æ— æ³•æ­£ç¡®è§£å†³ï¼Œæœ€ç»ˆæ˜¯æœåˆ°äº†ç›¸åŒçš„æŠ¥é”™ï¼Œæä¾›äº† Issue ç»™ Cursor æ‰èƒ½æ­£ç¡®è§£å†³é—®é¢˜ã€‚æ€»çš„æ¥è¯´è¦å–„ç”¨ Cursor æå‡æ•ˆç‡è¿˜æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„ã€‚</p>
<h2 data-id="heading-18">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fumijs.org%2Fdocs%2Fintroduce%2Fupgrade-to-umi-4" target="_blank" title="https://umijs.org/docs/introduce/upgrade-to-umi-4" ref="nofollow noopener noreferrer">UmiJS å®˜æ–¹å‡çº§æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Freactrouter.com%2Fdocs%2Fen%2Fv6%2Fupgrading%2Fv5" target="_blank" title="https://reactrouter.com/docs/en/v6/upgrading/v5" ref="nofollow noopener noreferrer">React Router v6 è¿ç§»æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fumijs%2Fumi%2Fissues%2F10334" target="_blank" title="https://github.com/umijs/umi/issues/10334" ref="nofollow noopener noreferrer">KeepAlive + useModel Issue</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¯å’–å•¡æˆæœ¬æå®šå¤šæ¨¡æ€å¾®è°ƒï¼šFC DevPod + Llama-Factory æé€Ÿå®æˆ˜]]></title>    <link>https://juejin.cn/post/7581858890608050212</link>    <guid>https://juejin.cn/post/7581858890608050212</guid>    <pubDate>2025-12-10T09:57:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581858890608050212" data-draft-id="7581858890607247396" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¯å’–å•¡æˆæœ¬æå®šå¤šæ¨¡æ€å¾®è°ƒï¼šFC DevPod + Llama-Factory æé€Ÿå®æˆ˜"/> <meta itemprop="keywords" content="Serverless"/> <meta itemprop="datePublished" content="2025-12-10T09:57:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¯å’–å•¡æˆæœ¬æå®šå¤šæ¨¡æ€å¾®è°ƒï¼šFC DevPod + Llama-Factory æé€Ÿå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:57:40.000Z" title="Wed Dec 10 2025 09:57:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šç‹éªœ</p>
<p>ä½œä¸ºä¸€ä¸ª AI å¼€å‘è€…ï¼Œä½ ä¸€å®šç»å†è¿‡è¿™æ ·çš„ç»æœ›æ—¶åˆ»ï¼šå…´è‡´å‹ƒå‹ƒåœ°ä¸‹è½½äº†æœ€æ–°çš„ Qwen2-VL æƒé‡ï¼Œå‡†å¤‡ç”¨è‡ªå·±çš„å‚ç›´é¢†åŸŸæ•°æ®è·‘ä¸€æ¬¡ SFTï¼ˆç›‘ç£å¾®è°ƒï¼‰ã€‚ç„¶è€Œï¼Œç°å®å´æ˜¯æ®‹é…·çš„â€”â€”</p>
<ul>
<li><code>RuntimeError: CUDA out of memory</code>â€”â€” æ˜¾å­˜ä¸å¤Ÿï¼Œæ¨¡å‹åŠ è½½å¤±è´¥ã€‚</li>
<li><code>Driver/Library version mismatch</code>â€”â€” é©±åŠ¨ç‰ˆæœ¬ä¸å¯¹ï¼Œç¯å¢ƒé…ç½®é™·å…¥æ­»å¾ªç¯ã€‚</li>
<li>çœ‹ç€äº‘å‚å•† GPU å®ä¾‹é«˜æ˜‚çš„åŒ…æœˆè´¦å•ï¼ŒçŠ¹è±«ç€è¦ä¸è¦ä¸ºäº†è¿™å‡ å°æ—¶çš„å®éªŒæŒ‰ä¸‹â€œè´­ä¹°â€é”®ã€‚</li>
</ul>
<p>æŠ€æœ¯çš„è¿›æ­¥æœ¬è¯¥æ˜¯ä¸ºäº†é‡Šæ”¾åˆ›é€ åŠ›ï¼Œè€Œä¸æ˜¯å¢åŠ é—¨æ§›ã€‚åœ¨ Serverless æ—¶ä»£ï¼Œç®—åŠ›åº”è¯¥åƒæ°´ç”µä¸€æ ·ï¼Œæ‰­å¼€æ°´é¾™å¤´å°±æœ‰ï¼Œå…³ä¸Šå°±åœï¼ŒæŒ‰éœ€ä»˜è´¹ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†æ‰“ç ´â€œå¾®è°ƒ=æ˜‚è´µ+éº»çƒ¦â€çš„åˆ»æ¿å°è±¡ã€‚ä¸éœ€è¦å›¤ç§¯æ˜¾å¡ï¼Œä¹Ÿä¸éœ€è¦ç²¾é€šè¿ç»´ï¼Œæˆ‘ä»¬å°†å¸¦ä½ ä½“éªŒä¸€å¥—â€œ<strong>DevPod + Llama-Factoryçš„æé€Ÿç»„åˆæ‹³</strong>â€œã€‚</p>
<h2 data-id="heading-0">æ–¹æ¡ˆæ­ç§˜ï¼šFC+Llama-Factory çš„â€œé»„é‡‘æ­æ¡£â€</h2>
<p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚åœ¨å¼€å§‹å®æˆ˜ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ‹†è§£ä¸€ä¸‹è¿™å¥—â€œå¼€ç®±å³ç”¨â€çš„å¾®è°ƒæµæ°´çº¿èƒŒåçš„ä¸‰ä½ä¸»è§’ã€‚å½“å®ƒä»¬åœ¨ Serverless æ¶æ„ä¸‹ç›¸é‡ï¼Œå¤æ‚çš„æ¨¡å‹è®­ç»ƒå°±å˜æˆäº†ä¸€åœºæµç•…çš„æ­ç§¯æœ¨æ¸¸æˆã€‚</p>
<h4 data-id="heading-1">1. ä¸»è§’ï¼šQwen VL æ¨¡å‹ â€”â€” å¤šæ¨¡æ€é¢†åŸŸçš„â€œå…­è¾¹å½¢æˆ˜å£«â€</h4>
<ul>
<li><strong>çœ‹å¾—æ›´æ¸…ï¼š</strong> å®ƒä¸ä»…èƒ½è¯†åˆ«å›¾ç‰‡ä¸­çš„ç‰©ä½“ï¼Œè¿˜èƒ½ç²¾å‡†æå–å¤æ‚çš„å›¾è¡¨æ•°æ®ã€é˜…è¯»å¯†é›†çš„æ–‡æ¡£æ–‡å­—ï¼ˆOCRï¼‰ï¼Œç”šè‡³ç†è§£é•¿è§†é¢‘ä¸­çš„æ—¶åºé€»è¾‘ã€‚</li>
<li><strong>æ‡‚ä½ æ‰€æƒ³ï¼š</strong> åœ¨æŒ‡ä»¤éµå¾ªï¼ˆInstruction Followingï¼‰èƒ½åŠ›ä¸Šå¤§å¹…å¢å¼ºï¼Œè¿™æ„å‘³ç€é€šè¿‡å¾®è°ƒï¼Œä½ å¯ä»¥æ›´å®¹æ˜“åœ°è®©å®ƒå­¦ä¼šä½ ç‰¹å®šä¸šåŠ¡åœºæ™¯ä¸‹çš„â€œè¡Œè¯â€å’Œè§„åˆ™ã€‚</li>
<li><strong>ä»·å€¼ç‚¹ï¼š</strong> é€‰æ‹© Qwen2-VLï¼Œæ„å‘³ç€ä½ çš„èµ·ç‚¹å·²ç»æ˜¯è¡Œä¸šé¡¶å°–æ°´å¹³ï¼Œå¾®è°ƒåªæ˜¯ä¸ºäº†è®©å®ƒæ›´æ‡‚ä½ çš„ç§æœ‰æ•°æ®ã€‚</li>
</ul>
<h4 data-id="heading-2">2. å·¥å…·ï¼šLlama-Factory â€”â€” å¾®è°ƒç•Œçš„â€œç‘å£«å†›åˆ€â€</h4>
<p>å¯¹äºè®¸å¤šå¼€å‘è€…æ¥è¯´ï¼Œå¾®è°ƒæœ€å¤§çš„é—¨æ§›ä¸æ˜¯ä¸æ‡‚åŸç†ï¼Œè€Œæ˜¯ä¸æƒ³å†™é‚£å‡ åƒè¡Œçš„ PyTorch è®­ç»ƒä»£ç ã€‚Llama-Factory çš„å‡ºç°ï¼Œå®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<ul>
<li><strong>é›¶ä»£ç é—¨æ§›ï¼š</strong> å®ƒæä¾›äº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„ WebUI ç•Œé¢ã€‚åŠ è½½æ¨¡å‹ã€é…ç½®å‚æ•°ã€ç›‘æ§ Loss æ›²çº¿ã€è¯„ä¼°æ•ˆæœï¼Œæ‰€æœ‰æ“ä½œéƒ½å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é€šè¿‡ç‚¹å‡»å®Œæˆã€‚</li>
<li><strong>å…¨æµç¨‹è¦†ç›–ï¼š</strong> ä»é¢„è®­ç»ƒï¼ˆPTï¼‰ã€æŒ‡ä»¤ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰åˆ°å¥–åŠ±æ¨¡å‹è®­ç»ƒï¼ˆRMï¼‰å’Œ PPO/DPOï¼Œå®ƒé›†æˆäº†ä¸šç•Œæœ€ä¸»æµçš„å¾®è°ƒæ–¹æ³•ï¼ˆå¦‚ LoRAã€QLoRAï¼‰ã€‚</li>
<li><strong>ä»·å€¼ç‚¹ï¼š</strong> å®ƒå±è”½äº†åº•å±‚ DeepSpeedã€Accelerate ç­‰æ¡†æ¶çš„å¤æ‚é…ç½®ï¼Œè®©ä½ èƒ½æŠŠç²¾åŠ›é›†ä¸­åœ¨â€œæ•°æ®è´¨é‡â€å’Œâ€œæ¨¡å‹æ•ˆæœâ€ä¸Šã€‚</li>
</ul>
<h4 data-id="heading-3">3. èˆå°ï¼šé˜¿é‡Œäº‘å‡½æ•°è®¡ç®— FC â€”â€” ä¸º AI è€Œç”Ÿçš„ Serverless ç®—åŠ›</h4>
<p>æœ‰äº†å¥½æ¨¡å‹å’Œå¥½å·¥å…·ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªèƒ½è·‘å¾—åŠ¨å®ƒä»¬çš„â€œèˆå°â€ã€‚ä¼ ç»Ÿçš„ GPU æœåŠ¡å™¨ç§Ÿèµæ¨¡å¼å¾€å¾€é¢ä¸´â€œéƒ¨ç½²éš¾ã€é—²ç½®è´µâ€çš„å°´å°¬ï¼Œè€Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Ffc%3Fspm%3Da1z389.11499242.0.0.65452413RXCQWs%26utm_content%3Dg_1000408146" target="_blank" title="https://www.aliyun.com/product/fc?spm=a1z389.11499242.0.0.65452413RXCQWs&amp;utm_content=g_1000408146" ref="nofollow noopener noreferrer">å‡½æ•°è®¡ç®—ï¼ˆFCï¼‰</a>ç»™å‡ºäº†å…¨æ–°çš„è§£æ³•ï¼š</p>
<ul>
<li><strong>æè‡´å¼¹æ€§ï¼ŒæŒ‰é‡ä»˜è´¹ï¼š</strong> è¿™æ˜¯ Serverless çš„çµé­‚ã€‚ä½ åªéœ€è¦ä¸ºè®­ç»ƒçš„é‚£å‡ ä¸ªå°æ—¶ä»˜è´¹ã€‚è®­ç»ƒç»“æŸï¼Œå®ä¾‹å¯è½»æ¾é‡Šæ”¾ï¼Œä¸å†äº§ç”Ÿä»»ä½•é—²ç½®è´¹ç”¨ã€‚å¯¹äºå®éªŒæ€§è´¨çš„å¾®è°ƒä»»åŠ¡ï¼Œæˆæœ¬å¯ä»¥é™ä½ 50% ä»¥ä¸Šã€‚</li>
<li><strong>ç¯å¢ƒé¢„ç½®ï¼Œæ‹’ç»â€œé…ç¯å¢ƒâ€ï¼š</strong> æˆ‘ä»¬åœ¨ FC çš„åº”ç”¨ä¸­å¿ƒé¢„ç½®äº†åŒ…å« CUDAã€PyTorch ä»¥åŠ Llama-Factory ä¾èµ–çš„å®˜æ–¹é•œåƒã€‚è¿™ä¸€æ­¥è‡³å…³é‡è¦â€”â€”å®ƒæ„å‘³ç€ä½ ä¸éœ€è¦å¤„ç†ä»»ä½•é©±åŠ¨å†²çªï¼Œç‚¹å‡»éƒ¨ç½²ï¼Œç¯å¢ƒå³åˆ»å°±ç»ªã€‚</li>
<li><strong>å¼‚æ„ç®—åŠ›æ”¯æŒï¼š</strong> FC æä¾›äº†ä¸°å¯Œçš„ GPU è§„æ ¼ä¾›ä½ é€‰æ‹©ï¼Œæ»¡è¶³ä¸åŒè§„æ¨¡çš„å¾®è°ƒéœ€æ±‚ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d449f0c469f34cab849b86746359a22e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=rVgJZtI4gSZ47Q9p3FmTnWKmMw4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><em>â€œå½“ Llama-Factory çš„å¯è§†åŒ–äº¤äº’é‡ä¸Š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Ffc%3Fspm%3Da1z389.11499242.0.0.65452413RXCQWs%26utm_content%3Dg_1000408146" target="_blank" title="https://www.aliyun.com/product/fc?spm=a1z389.11499242.0.0.65452413RXCQWs&amp;utm_content=g_1000408146" ref="nofollow noopener noreferrer">FC</a> çš„æè‡´å¼¹æ€§ï¼Œå¾®è°ƒ Qwen2-VL å°±å˜æˆäº†ä¸€åœºâ€˜ç‚¹å‡»å³å¾—â€™çš„æµç•…ä½“éªŒã€‚æˆ‘ä»¬ä¸å†éœ€è¦åƒè¿ç»´å·¥ç¨‹å¸ˆä¸€æ ·ç›¯ç€é»‘åº•ç™½å­—çš„ç»ˆç«¯çª—å£ï¼Œè€Œæ˜¯å¯ä»¥åƒä¿®å›¾å¸ˆä¸€æ ·ï¼Œåœ¨ Web ç•Œé¢ä¸Šä¼˜é›…åœ°æ‰“ç£¨æˆ‘ä»¬çš„æ¨¡å‹ã€‚â€</em></p>
<h2 data-id="heading-4">æåº¦éƒ¨ç½²ï¼š5 åˆ†é’Ÿæ­å»ºå¾®è°ƒæµæ°´çº¿</h2>
<p>ä¼ ç»Ÿå¾®è°ƒçš„ç¬¬ä¸€æ­¥é€šå¸¸æ˜¯â€œç§ŸæœåŠ¡å™¨ã€è£…é©±åŠ¨ã€é…ç¯å¢ƒâ€ï¼Œè€Œåœ¨ Serverless æ¶æ„ä¸‹ï¼Œæˆ‘ä»¬ç›´æ¥ä»â€œåº”ç”¨â€å¼€å§‹ã€‚</p>
<h4 data-id="heading-5">Step 1ï¼šDevPod å¼€å‘ç¯å¢ƒä¸€é”®æ‹‰èµ·</h4>
<p>ç™»å½• Function AI æ§åˆ¶å° - Fun Model - æ¨¡å‹å¸‚åœºï¼Œç‚¹å‡»é¡µé¢çš„ã€Œè‡ªå®šä¹‰å¼€å‘ã€ï¼Œåœ¨ã€Œæ¨¡å‹ç¯å¢ƒä¸‹ã€é€‰æ‹©ã€Œè‡ªå®šä¹‰ç¯å¢ƒã€ï¼Œåœ¨å®¹å™¨é•œåƒåœ°å€ä¸­å¡«å…¥Â <code>serverless-registry.cn-hangzhou.cr.aliyuncs.com/functionai/devpod-presets:llama-factory-v0.9.4-v1</code>ã€‚è¯¥é•œåƒå·²å†…ç½® llama-factory v0.9.4 çš„ç‰ˆæœ¬ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/496f1509dc4b48c295d5bd9d02c1619c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=Fyul11xoJCFdMBrSaOLCgS5KU5E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-6">Step 2ï¼šèµ„æºä¸å­˜å‚¨é…ç½®ï¼ˆå…³é”®ä¸€æ­¥ï¼‰</h4>
<p>åªéœ€å…³æ³¨ GPU ç±»å‹ã€‚å¯¹äº Qwen3-VL çš„ LoRA å¾®è°ƒï¼Œæ¨èé€‰æ‹© GPU æ€§èƒ½å‹å•å¡å³å¯æ»¡è¶³éœ€æ±‚ï¼Œæ€§ä»·æ¯”æé«˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f84d56ae42b148c0ac43c8674ff94246~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=1gxObfna3TERPXhe0oYq8Wz9Dzw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-7">Step 3ï¼šä¸€é”®æ‹‰èµ·ç¯å¢ƒï¼Œç‚¹å‡»ã€ŒDevPod å¼€å‘è°ƒè¯•ã€</h4>
<p>FC ä¼šè‡ªåŠ¨æ‹‰å–åŒ…å« CUDA ç¯å¢ƒå’Œ Llama-Factory æ¡†æ¶çš„é•œåƒã€‚å¤§çº¦ç­‰å¾… 1-3 åˆ†é’Ÿï¼Œé¡µé¢è‡ªåŠ¨è·³è½¬åˆ° DevPod é¡µé¢ï¼Œæˆ‘ä»¬è¿›å…¥ Terminal ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤Â USE_MODELSCOPE_HUB=1 lmf webui<code>Â </code>å¯åŠ¨ llama-factory çš„è¿›ç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61498ba49fcb4bdc851b33b1036a06a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=m21UGgrm4TsoraLhVdyhBx05q3Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/021835339e0347bc96a6f8963862d27b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=k2AG1o77y6xWS6gdzrZh0lztHgA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ ¹æ®ã€Œå¿«é€Ÿè®¿é—®ã€é¡µç­¾çš„æç¤ºï¼Œå°† uri ä¸­çš„ {port} æ›¿æ¢ä¸º 7860 å³å¯ï¼ˆllama-factory é»˜è®¤ä½¿ç”¨ 7860 ç«¯å£ï¼‰ã€‚ç›´æ¥ä½¿ç”¨è¯¥ uri åœ¨æµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼Œè¿›å…¥ llama-factory çš„ webui ç•Œé¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18ff05aaf8314ebea7067f972fe221b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=uf6KSGJA72y4KXkfhMXiJu6jTX4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88498f7eaca048d2b8dc6aee417e6f8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=y%2FqFKpNGPXTtNUnMAoZKiDZfAkk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-8">å®æˆ˜ SFTï¼šåƒ P å›¾ä¸€æ ·ç®€å•åœ°å¾®è°ƒæ¨¡å‹</h4>
<p>æ‰“å¼€ WebUI ç•Œé¢ï¼Œä½ ä¼šå‘ç°å¾®è°ƒå¤§æ¨¡å‹å¹¶ä¸æ¯”ä½¿ç”¨ Photoshop å¤æ‚å¤šå°‘ã€‚æˆ‘ä»¬ä¸éœ€è¦æ•²ä¸€è¡Œ Python ä»£ç ï¼Œåªéœ€åœ¨é¢æ¿ä¸Šè¿›è¡Œâ€œå‹¾é€‰â€å’Œâ€œå¡«ç©ºâ€ã€‚</p>
<h4 data-id="heading-9">Step 1ï¼šæ¨¡å‹ä¸æ•°æ®å‡†å¤‡</h4>
<ul>
<li><strong>æ¨¡å‹åç§°ï¼š</strong> åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©Â <code>Qwen2-VL</code>ï¼ˆæˆ–æ‰‹åŠ¨è¾“å…¥æ¨¡å‹è·¯å¾„ï¼‰ã€‚</li>
<li><strong>æ•°æ®é›†ï¼š</strong> Llama-Factory æ”¯æŒæ ‡å‡†çš„ Alpaca æ ¼å¼æˆ– ShareGPT æ ¼å¼ã€‚å¯¹äºå¤šæ¨¡æ€ä»»åŠ¡ï¼Œç¡®ä¿ä½ çš„ JSON æ–‡ä»¶ä¸­åŒ…å«å›¾ç‰‡è·¯å¾„ã€‚
<ul>
<li><em>æ“ä½œï¼šåœ¨ WebUI çš„â€œæ•°æ®é›†â€é€‰é¡¹ä¸­é€‰æ‹©å‡†å¤‡å¥½çš„æ•°æ®é›†ï¼Œæœ¬æ–‡çš„æ•°æ®é›†è·¯å¾„å¦‚å›¾æ‰€ç¤ºï¼š</em></li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec3a2dce444f44b9a202d983214b6a71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=icrVhOnPvrJnVg3gSnAkEnuRYmw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-10">Step 2ï¼šå‚æ•°é…ç½®ï¼ˆLoRA å¤§æ³•å¥½ï¼‰</h4>
<p>ä¸ºäº†åœ¨ Serverless ç¯å¢ƒä¸‹é«˜æ•ˆå¾®è°ƒï¼Œæˆ‘ä»¬é‡‡ç”¨Â <strong>LoRA (Low-Rank Adaptation)</strong> Â æŠ€æœ¯ã€‚å®ƒåªè®­ç»ƒæ¨¡å‹çš„ä¸€å°éƒ¨åˆ†å‚æ•°ï¼Œå´èƒ½è¾¾åˆ°æƒŠäººçš„æ•ˆæœã€‚</p>
<ul>
<li><strong>å¾®è°ƒæ–¹æ³•ï¼š</strong> å‹¾é€‰Â <code>full</code>ã€‚</li>
<li><strong>å­¦ä¹ ç‡ (Learning Rate)ï¼š</strong> æ¨èÂ <code>1e-4</code>Â æˆ–Â <code>5e-5</code>ã€‚</li>
<li><strong>è½®æ•° (Epochs)ï¼š</strong> å»ºè®®å…ˆè®¾ä¸ºÂ <code>3</code>Â æˆ–Â <code>5</code>Â è½®ï¼Œå¿«é€ŸéªŒè¯æ•ˆæœã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/695afe225fe44e4588a014ad312d1daa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=JkFSsXwlQAYYk1okSx12UXUo5gE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-11">Step 3ï¼šå¯åŠ¨è®­ç»ƒä¸ç›‘æ§</h4>
<p>ä¸€åˆ‡å°±ç»ªï¼Œç‚¹å‡»é²œè‰³çš„ <strong>â€œå¼€å§‹è®­ç»ƒâ€</strong> æŒ‰é’®ã€‚ç•Œé¢ä¸‹æ–¹ä¼šè‡ªåŠ¨å¼¹å‡ºæ—¥å¿—çª—å£å’Œ Lossï¼ˆæŸå¤±ï¼‰æ›²çº¿å›¾ã€‚çœ‹ç€ Loss æ›²çº¿åƒæ»‘æ¢¯ä¸€æ ·ç¨³æ­¥ä¸‹é™ï¼Œä»£è¡¨æ¨¡å‹æ­£åœ¨åŠªåŠ›å­¦ä¹ ä½ æ•™ç»™å®ƒçš„æ–°çŸ¥è¯†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dec4c5ad7613437a95769407b5dfd915~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=XX3%2Bq%2F7BnZoEOQWp5Qo8CdTFVKA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-12">æ•ˆæœéªŒè¯ä¸æ¨¡å‹å¯¼å‡ºï¼šè§è¯â€œä¸“å®¶â€è¯ç”Ÿ</h2>
<p>çœ‹ç€ Loss æ›²çº¿æ”¶æ•›åªæ˜¯ç¬¬ä¸€æ­¥ï¼ŒçœŸæ­£çš„è€ƒéªŒåœ¨äºï¼šå®ƒçœŸçš„å˜èªæ˜äº†å—ï¼ŸLlama-Factory è´´å¿ƒåœ°é›†æˆäº†è¯„ä¼°ä¸æ¨ç†æ¨¡å—ï¼Œè®©æˆ‘ä»¬èƒ½å³æ—¶éªŒæ”¶æˆæœã€‚</p>
<h4 data-id="heading-13">Step 1ï¼šChat é¡µç­¾åœ¨çº¿æ¨ç†</h4>
<p>è®­ç»ƒå®Œæˆåï¼Œæ— éœ€é‡å¯æœåŠ¡ï¼Œç›´æ¥ç‚¹å‡» WebUI é¡¶éƒ¨çš„ <strong>â€œChatâ€</strong> é¡µç­¾ã€‚</p>
<ul>
<li><strong>æ£€æŸ¥ç‚¹é€‰æ‹©ï¼š</strong> åœ¨ <code>Checkpoint</code> ä¸‹æ‹‰æ¡†ä¸­ï¼Œé€‰æ‹©åˆšæ‰è®­ç»ƒå¥½çš„ Adapter æƒé‡ã€‚</li>
<li><strong>åŠ è½½æ¨¡å‹ï¼š</strong> ç‚¹å‡»â€œåŠ è½½æ¨¡å‹â€ï¼Œå‡ ç§’é’Ÿåï¼Œå³ä¸‹è§’æ˜¾ç¤ºâ€œæ¨¡å‹åŠ è½½æˆåŠŸâ€ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/975efd96a6e84691a0f0870aa3a30afc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=e0ylXfN7bAS5186x3eh%2FpFBcfqA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-14">Step 2ï¼šå¾®è°ƒå‰åæ•ˆæœâ€œå¤§æ¯”æ­¦â€</h4>
<p>ä¸ºäº†éªŒè¯æ•ˆæœï¼Œæˆ‘ä»¬ä¸Šä¼ ä¸€å¼ ç‰¹å®šä¸šåŠ¡åœºæ™¯çš„å›¾ç‰‡ï¼ˆä¾‹å¦‚ä¸€å¼ å¤æ‚çš„æŠ¥é”€å•æ®ï¼‰ï¼Œå¹¶è¾“å…¥åŒæ ·çš„ Promptï¼šâ€œè¯·æå–å›¾ä¸­çš„å…³é”®ä¿¡æ¯â€ã€‚</p>
<p>å¾®è°ƒå‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f4e762d4b664596b469f33dcf37a7e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=MMq4OCTfzNUYSWtHaIpKu38xJ44%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¾®è°ƒå‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7922b28bc62d4abebfb1947918eef223~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=FbEiMJGIEEYoqu9x0XM3haYh7SU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™å°±æ˜¯ SFT çš„é­”åŠ›â€”â€”è®©é€šç”¨çš„å¤©æ‰å˜æˆå‚ç›´é¢†åŸŸçš„ä¸“å®¶ã€‚</p>
<h4 data-id="heading-15">Step 3ï¼šæ¨¡å‹å¯¼å‡ºä¸è½åœ°</h4>
<p>éªŒè¯æ»¡æ„åï¼Œç‚¹å‡» <strong>â€œExportâ€</strong> é¡µç­¾ã€‚</p>
<ul>
<li><strong>æœ€å¤§åˆ†å—å¤§å°ï¼š</strong> å»ºè®®è®¾ç½®ä¸º <code>2GB</code> æˆ–Â <code>4GB</code>ã€‚</li>
<li><strong>å¯¼å‡ºç›®å½•ï¼š</strong> æŒ‡å‘ä½ çš„ OSS è·¯å¾„æˆ–è€…æœ¬åœ°è·¯å¾„ã€‚ç‚¹å‡»â€œå¼€å§‹å¯¼å‡ºâ€ï¼ŒLlama-Factory ä¼šè‡ªåŠ¨å°† LoRA æƒé‡ä¸åŸå§‹æ¨¡å‹åˆå¹¶ã€‚ç°åœ¨ï¼Œä½ æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ã€å¯ç›´æ¥éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„ä¸“å± Qwen2-VL æ¨¡å‹ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b57bff2a912542f99056bbc6d2c06adb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=%2B%2BPJWxSTGssdCnbOPjoUvP%2FTYtA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bbcd7ae1786420ba93ecf340eb34f91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=mrdORu4taNFTrcaL80r3r2LEUlE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-16">ç»“è¯­ï¼šServerless AIï¼Œè®©åˆ›æ–°è§¦æ‰‹å¯åŠ</h2>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬åªç”¨äº†ä¸€æ¯å’–å•¡çš„æ—¶é—´ï¼Œå°±å®Œæˆäº†ä»ç¯å¢ƒæ­å»ºã€æ¨¡å‹å¾®è°ƒåˆ°æ•ˆæœéªŒè¯çš„å…¨æµç¨‹ã€‚</p>
<p><strong>æœ€åï¼Œè®©æˆ‘ä»¬ç®—ä¸€ç¬”è´¦ï¼š</strong> å¦‚æœä½ ä¸ºäº†è¿™æ¬¡å®éªŒå»ç§Ÿèµä¸€å° L20 æœåŠ¡å™¨ï¼Œé€šå¸¸éœ€è¦æŒ‰æœˆä»˜è´¹ï¼Œæˆæœ¬å¯èƒ½é«˜è¾¾æ•°åƒå…ƒï¼Œä¸”å¤§éƒ¨åˆ†æ—¶é—´æ˜¾å¡éƒ½åœ¨ç©ºè½¬ã€‚è€Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Ffc%3Fspm%3Da1z389.11499242.0.0.65452413RXCQWs%26utm_content%3Dg_1000408146" target="_blank" title="https://www.aliyun.com/product/fc?spm=a1z389.11499242.0.0.65452413RXCQWs&amp;utm_content=g_1000408146" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ï¼ˆFCï¼‰</a>ä¸Šï¼Œä½ åªéœ€è¦ä¸ºè®­ç»ƒçš„é‚£Â <strong>2 å°æ—¶</strong>ä»˜è´¹ã€‚<strong>æŒ‰é‡ä»˜è´¹ï¼Œç”¨å®Œå³èµ°ï¼Œæˆæœ¬å¯èƒ½ä¸åˆ°ä¸€æ¯å¥¶èŒ¶é’±ã€‚</strong></p>
<p><strong>Serverless GPU çš„æ ¸å¿ƒä»·å€¼ï¼Œä¸ä»…ä»…æ˜¯çœé’±ï¼Œæ›´æ˜¯â€œè§£æ”¾â€ã€‚</strong> å®ƒæŠŠå¼€å‘è€…ä»ç¹ççš„è¿ç»´æ³¥æ½­ä¸­è§£æ”¾å‡ºæ¥ï¼Œä¸å†éœ€è¦æ‹…å¿ƒ CUDA ç‰ˆæœ¬ã€æ˜¾å­˜æº¢å‡ºæˆ–èµ„æºé—²ç½®ã€‚ä½ åªéœ€è¦å…³æ³¨æœ€æ ¸å¿ƒçš„èµ„äº§â€”â€”<strong>æ•°æ®</strong>ä¸<strong>åˆ›æ„</strong>ã€‚</p>
<p>å¤šæ¨¡æ€çš„æ—¶ä»£å·²ç»åˆ°æ¥ï¼ŒQwen2-VL çš„å¤§é—¨å·²ç»æ•å¼€ã€‚ç°åœ¨ï¼Œè½®åˆ°ä½ äº†ã€‚</p>
<h2 data-id="heading-17">äº†è§£å‡½æ•°è®¡ç®—æ¨¡å‹æœåŠ¡ FunModel</h2>
<p>FunModel æ˜¯ä¸€ä¸ªé¢å‘ AI æ¨¡å‹å¼€å‘ã€éƒ¨ç½²ä¸è¿ç»´çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†å¹³å°ã€‚æ‚¨åªéœ€æä¾›æ¨¡å‹æ–‡ä»¶ï¼ˆä¾‹å¦‚æ¥è‡ª ModelScopeã€Hugging Face ç­‰ç¤¾åŒºçš„æ¨¡å‹ä»“åº“ï¼‰ï¼Œå³å¯åˆ©ç”¨ FunModel çš„è‡ªåŠ¨åŒ–å·¥å…·å¿«é€Ÿå®Œæˆæ¨¡å‹æœåŠ¡çš„å°è£…ä¸éƒ¨ç½²ï¼Œå¹¶è·å¾—å¯ç›´æ¥è°ƒç”¨çš„æ¨ç† APIã€‚å¹³å°åœ¨è®¾è®¡ä¸Šæ—¨åœ¨æå‡èµ„æºä½¿ç”¨æ•ˆç‡å¹¶ç®€åŒ–å¼€å‘éƒ¨ç½²æµç¨‹ã€‚</p>
<p>FunModel ä¾æ‰˜ Serverless + GPUï¼Œå¤©ç„¶æä¾›äº†ç®€å•ï¼Œè½»é‡ï¼Œ0 é—¨æ§›çš„æ¨¡å‹é›†æˆæ–¹æ¡ˆï¼Œç»™ä¸ªäººå¼€å‘è€…è‰¯å¥½çš„ç©è½¬æ¨¡å‹çš„ä½“éªŒï¼Œä¹Ÿè®©ä¼ä¸šçº§å¼€å‘è€…å¿«é€Ÿé«˜æ•ˆçš„éƒ¨ç½²ã€è¿ç»´å’Œè¿­ä»£æ¨¡å‹ã€‚</p>
<p>åœ¨é˜¿é‡Œäº‘ FunModel å¹³å°ï¼Œå¼€å‘è€…å¯ä»¥åšåˆ°ï¼š</p>
<ul>
<li><strong>æ¨¡å‹çš„å¿«é€Ÿéƒ¨ç½²ä¸Šçº¿ï¼š</strong> ä»åŸæ¥çš„ä»¥å‘¨ä¸ºå•ä½çš„æ¨¡å‹æ¥å…¥å‘¨æœŸé™ä½åˆ° 5 åˆ†é’Ÿï¼Œ0 å¼€å‘ï¼Œæ— æ’æœŸ</li>
<li><strong>ä¸€é”®æ‰©ç¼©å®¹ï¼Œè®©è¿ç»´ä¸å†æ˜¯è´Ÿæ‹…ï¼š</strong> å¤šç§æ‰©ç¼©å®¹ç­–ç•¥é«˜åº¦é€‚é…ä¸šåŠ¡æµé‡ï¼Œå®ç°â€œæ— ç—›è¿ç»´â€</li>
</ul>
<p><strong>æŠ€æœ¯ä¼˜åŠ¿ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4730493c3384f13b7a964cd3c0ad37a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765965459&amp;x-signature=%2B7nx%2FQAwVHr2LIX6cGeAcmkiy0o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>æ›´å¤šå†…å®¹è¯·å‚è€ƒï¼š</strong></p>
<p>[1] æ¨¡å‹æœåŠ¡ FunModel äº§å“æ–‡æ¡£</p>
<p>[2] FunModel å¿«é€Ÿå…¥é—¨</p>
<p>[3] FunModel è‡ªå®šä¹‰éƒ¨ç½²</p>
<p>[4] FunModel æ¨¡å‹å¹¿åœº</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æ¥å…¥sseï¼ˆEventSourceï¼‰ï¼ˆ@fortaine/fetch-event-sourceï¼‰]]></title>    <link>https://juejin.cn/post/7581888578538422310</link>    <guid>https://juejin.cn/post/7581888578538422310</guid>    <pubDate>2025-12-10T09:47:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581888578538422310" data-draft-id="7574045294612496419" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ¥å…¥sseï¼ˆEventSourceï¼‰ï¼ˆ@fortaine/fetch-event-sourceï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T09:47:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¢å½¤å½¤"/> <meta itemprop="url" content="https://juejin.cn/user/2963939079500461"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ¥å…¥sseï¼ˆEventSourceï¼‰ï¼ˆ@fortaine/fetch-event-sourceï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2963939079500461/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¢å½¤å½¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:47:23.000Z" title="Wed Dec 10 2025 09:47:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1ã€ä½¿ç”¨åŸç”Ÿçš„åŸç”Ÿ EventSource</h3>
<p>ç‰¹æ€§ï¼š1ã€è‡ªåŠ¨é‡è¿ï¼ˆå›ºå®š3ç§’é‡è¯•ï¼‰  2ã€æ— æ³•æ‰‹åŠ¨è®¾ç½®headerå¤´ä¿¡æ¯ï¼Œåªèƒ½ä½¿ç”¨getè¯·æ±‚</p>
<pre><code class="hljs language-typescript" lang="typescript">    <span class="hljs-comment">// SSE è¿æ¥</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">sse</span>: <span class="hljs-title class_">InfoStore</span>[<span class="hljs-string">'sse'</span>] = <span class="hljs-function">(<span class="hljs-params">
        onMessage?: (data: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">void</span>,
        onError?: (error: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">void</span>,
        onOpen?: () =&gt; <span class="hljs-built_in">void</span>,
        onClose?: () =&gt; <span class="hljs-built_in">void</span>
    </span>) =&gt;</span> {
        <span class="hljs-comment">// ä» LocalStorage è·å–è®¤è¯ä»¤ç‰Œ</span>
        <span class="hljs-keyword">const</span> token = ä½ çš„token
        <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ä»¤ç‰Œï¼Œæç¤ºé”™è¯¯å¹¶è¿”å›</span>
        <span class="hljs-keyword">if</span> (!token) {
            message.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æœªè·å–åˆ°è®¤è¯ä»¤ç‰Œï¼Œæ— æ³•å»ºç«‹ SSE è¿æ¥'</span>);
            <span class="hljs-keyword">if</span> (onError) {
                <span class="hljs-title function_">onError</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æœªè·å–åˆ°è®¤è¯ä»¤ç‰Œ'</span>));
            }
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// å®¢æˆ·ç«¯ ID</span>
        <span class="hljs-comment">// æ„å»ºå®Œæ•´çš„è¯·æ±‚ URLï¼ŒåŒ…å«æŸ¥è¯¢å‚æ•°</span>
        <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'/api/resource/sse'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span>);
        url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">append</span>(<span class="hljs-string">'tokenValue'</span>, <span class="hljs-string">`<span class="hljs-subst">${token}</span>`</span>);
        <span class="hljs-keyword">const</span> en = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(url)
        en.<span class="hljs-property">onmessage</span> = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'e.data'</span>, event.<span class="hljs-property">data</span>)
            <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span> = event.<span class="hljs-property">data</span>;
            <span class="hljs-keyword">try</span> {
                data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'event--æ¶ˆæ¯æ¥æ”¶æˆåŠŸ'</span>, data)
            } <span class="hljs-keyword">catch</span> {
                <span class="hljs-comment">// å¦‚æœä¸æ˜¯ JSON æ ¼å¼ï¼Œç›´æ¥ä½¿ç”¨åŸå§‹æ•°æ®</span>
            }
        }
        en.<span class="hljs-property">onerror</span> = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'err'</span>, e)
        }
        en.<span class="hljs-property">onopen</span> = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'onopen'</span>, e)
        }
        <span class="hljs-keyword">return</span>
    }
</code></pre>
<h3 data-id="heading-1">fetch + ReadableStream æ‰‹åŠ¨å®ç°</h3>
<p>ç‰¹ç‚¹ï¼šå¯æ“ä½œæ€§æ›´åŠ é«˜ä¸€ç‚¹</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">sse</span>: <span class="hljs-title class_">DocumentLibInfoStore</span>[<span class="hljs-string">'sse'</span>] = <span class="hljs-function">(<span class="hljs-params">
  onMessage?: (data: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">void</span>,
  onError?: (error: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">void</span>,
  onOpen?: () =&gt; <span class="hljs-built_in">void</span>,
  onClose?: () =&gt; <span class="hljs-built_in">void</span>
</span>) =&gt;</span> {
<span class="hljs-keyword">const</span> token = <span class="hljs-title class_">LocalStorage</span>.<span class="hljs-title function_">getToken</span>();
  <span class="hljs-keyword">if</span> (!token) {
    message.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æœªè·å–åˆ°è®¤è¯ä»¤ç‰Œï¼Œæ— æ³•å»ºç«‹ SSE è¿æ¥'</span>);
    onError?.(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æœªè·å–åˆ°è®¤è¯ä»¤ç‰Œ'</span>));
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {};
  }
<span class="hljs-keyword">const</span> clientid = <span class="hljs-string">'e5cd7e4891bf95d1d19206ce24a7b32e'</span>;
  <span class="hljs-comment">// é‡è¿é…ç½®ï¼ˆå¯æ ¹æ®ä¸šåŠ¡è°ƒæ•´ï¼‰</span>
  <span class="hljs-keyword">let</span> reconnectCount = <span class="hljs-number">0</span>; <span class="hljs-comment">// å½“å‰é‡è¿æ¬¡æ•°</span>
  <span class="hljs-keyword">const</span> maxReconnectTimes = <span class="hljs-number">10</span>; <span class="hljs-comment">// æœ€å¤§é‡è¿æ¬¡æ•°ï¼ˆ0 è¡¨ç¤ºæ— é™é‡è¿ï¼‰</span>
  <span class="hljs-keyword">let</span> baseReconnectInterval = <span class="hljs-number">3000</span>; <span class="hljs-comment">// åˆå§‹é‡è¿é—´éš”ï¼ˆ3ç§’ï¼Œå’ŒåŸç”ŸEventSourceä¸€è‡´ï¼‰</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">abortController</span>: <span class="hljs-title class_">AbortController</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">let</span> isManualClose = <span class="hljs-literal">false</span>; <span class="hljs-comment">// ä¸»åŠ¨å…³é—­æ ‡è¯†ï¼ˆé¿å…ä¸»åŠ¨å…³äº†è¿˜é‡è¿ï¼‰</span>

  <span class="hljs-comment">// æ ¸å¿ƒï¼šå°è£… SSE è¿æ¥å‡½æ•°ï¼ˆåŒ…å«é‡è¿é€»è¾‘ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">connectSSE</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// é‡ç½®æ§åˆ¶å™¨</span>
    abortController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// 1. å‰ç½®å¤„ç†ï¼šè‹¥é‡è¿æ—¶ token è¿‡æœŸï¼Œå¯å…ˆåˆ·æ–° tokenï¼ˆå¯é€‰ï¼‰</span>
      <span class="hljs-keyword">const</span> currentToken = <span class="hljs-title class_">LocalStorage</span>.<span class="hljs-title function_">getToken</span>();
      <span class="hljs-keyword">if</span> (!currentToken) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'token å·²è¿‡æœŸï¼Œåœæ­¢é‡è¿'</span>);
      }

      <span class="hljs-comment">// 2. å‘èµ· fetch è¯·æ±‚ï¼ˆæ”¯æŒè‡ªå®šä¹‰ Headerï¼‰</span>
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/resource/sse'</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${currentToken}</span>`</span>,
          <span class="hljs-string">'Clientid'</span>: clientid,
          <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'text/event-stream'</span>,
        },
        <span class="hljs-attr">signal</span>: abortController.<span class="hljs-property">signal</span>,
        <span class="hljs-attr">credentials</span>: <span class="hljs-string">'include'</span>,
      });

      <span class="hljs-comment">// 3. å¤„ç† HTTP é”™è¯¯ï¼ˆåŒºåˆ†æ˜¯å¦é‡è¿ï¼‰</span>
      <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-string">`SSE è¿æ¥å¤±è´¥ï¼š<span class="hljs-subst">${response.status}</span> <span class="hljs-subst">${response.statusText}</span>`</span>;
        <span class="hljs-comment">// è§„åˆ™ï¼š401/403ï¼ˆé‰´æƒå¤±è´¥ï¼‰ä¸é‡è¿ï¼Œ5xxï¼ˆæœåŠ¡ç«¯ä¸´æ—¶é”™è¯¯ï¼‰é‡è¿ï¼Œ4xx å…¶ä»–ä¸é‡è¿</span>
        <span class="hljs-keyword">if</span> (response.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">500</span> &amp;&amp; response.<span class="hljs-property">status</span> &lt; <span class="hljs-number">600</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`æœåŠ¡å™¨ä¸´æ—¶é”™è¯¯ï¼š<span class="hljs-subst">${errorMsg}</span>ï¼Œå°†å°è¯•é‡è¿`</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (response.<span class="hljs-property">status</span> === <span class="hljs-number">401</span>) {
          <span class="hljs-title class_">LocalStorage</span>.<span class="hljs-title function_">removeToken</span>(); <span class="hljs-comment">// æ¸…é™¤è¿‡æœŸ token</span>
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'token å¤±æ•ˆï¼Œåœæ­¢é‡è¿'</span>);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(errorMsg + <span class="hljs-string">'ï¼Œä¸é‡è¿'</span>);
        }
      }

      <span class="hljs-comment">// 4. è¿æ¥æˆåŠŸï¼šé‡ç½®é‡è¿è®¡æ•°å’Œé—´éš”</span>
      reconnectCount = <span class="hljs-number">0</span>;
      baseReconnectInterval = <span class="hljs-number">3000</span>;
      onOpen?.();
      message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'SSE è¿æ¥æˆåŠŸ'</span>);

      <span class="hljs-comment">// 5. è¯»å–æµå¼å“åº”ï¼ˆå’Œä¹‹å‰é€»è¾‘ä¸€è‡´ï¼‰</span>
      <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
      <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>(<span class="hljs-string">'utf-8'</span>);
      <span class="hljs-keyword">let</span> buffer = <span class="hljs-string">''</span>;

      <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
        <span class="hljs-keyword">if</span> (done) {
          <span class="hljs-comment">// æµæ­£å¸¸å…³é—­ï¼šè‹¥ä¸æ˜¯ä¸»åŠ¨å…³é—­ï¼Œè§¦å‘é‡è¿</span>
          <span class="hljs-keyword">if</span> (!isManualClose) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'SSE æµæ­£å¸¸å…³é—­ï¼Œå°è¯•é‡è¿'</span>);
          }
          <span class="hljs-keyword">break</span>;
        }

        <span class="hljs-comment">// è§£æ SSE æ¶ˆæ¯ï¼ˆåŸæœ‰ä¸šåŠ¡é€»è¾‘ï¼‰</span>
        buffer += decoder.<span class="hljs-title function_">decode</span>(value, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> });
        <span class="hljs-keyword">const</span> messages = buffer.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n\n'</span>);
        buffer = messages.<span class="hljs-title function_">pop</span>() || <span class="hljs-string">''</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> msg <span class="hljs-keyword">of</span> messages) {
          <span class="hljs-keyword">if</span> (msg.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'data: '</span>)) {
            <span class="hljs-keyword">const</span> dataStr = msg.<span class="hljs-title function_">slice</span>(<span class="hljs-number">6</span>);
            <span class="hljs-keyword">try</span> {
              <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(dataStr);
              onMessage?.(data);
              <span class="hljs-comment">// ä½ çš„ä¸šåŠ¡é€»è¾‘ï¼ˆæ›´æ–°è¿›åº¦ã€åˆ·æ–°åˆ—è¡¨ç­‰ï¼‰</span>
              <span class="hljs-keyword">const</span> flagProcessingList = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state.<span class="hljs-property">processingList</span>));
              flagProcessingList.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
                <span class="hljs-keyword">if</span> (item.<span class="hljs-property">documentId</span> === data.<span class="hljs-property">documentId</span>) {
                  item.<span class="hljs-property">progress</span> = data.<span class="hljs-property">progress</span>;
                  item.<span class="hljs-property">status</span> = data.<span class="hljs-property">status</span>;
                  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">progress</span> === <span class="hljs-number">100</span> || data.<span class="hljs-property">message</span> === <span class="hljs-string">'error'</span>) {
                    api.<span class="hljs-title function_">fetchDocumentLibList</span>(<span class="hljs-number">0</span>);
                    api.<span class="hljs-title function_">fetchDocumentLibList</span>(<span class="hljs-number">1</span>);
                  }
                }
              });
              actions.<span class="hljs-title function_">setProcessingList</span>(flagProcessingList);
            } <span class="hljs-keyword">catch</span> (e) {
              onMessage?.(dataStr);
            }
          }
        }
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>;
      <span class="hljs-comment">// æ’é™¤ä¸»åŠ¨å…³é—­çš„é”™è¯¯ï¼ˆAbortErrorï¼‰</span>
      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span> &amp;&amp; isManualClose) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SSE ä¸»åŠ¨å…³é—­ï¼Œä¸é‡è¿'</span>);
        onClose?.();
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-comment">// è§¦å‘é”™è¯¯å›è°ƒ</span>
      onError?.(err);
      message.<span class="hljs-title function_">error</span>(<span class="hljs-string">`SSE è¿æ¥å¼‚å¸¸ï¼š<span class="hljs-subst">${err.message}</span>`</span>);

      <span class="hljs-comment">// é‡è¿é€»è¾‘ï¼šæœªè¾¾æœ€å¤§æ¬¡æ•° + ä¸æ˜¯ä¸»åŠ¨å…³é—­ + ä¸æ˜¯é‰´æƒå¤±è´¥</span>
      <span class="hljs-keyword">if</span> (!isManualClose &amp;&amp; reconnectCount &lt; maxReconnectTimes) {
        reconnectCount++;
        <span class="hljs-comment">// æŒ‡æ•°é€€é¿ï¼šé‡è¿é—´éš”ç¿»å€ï¼ˆ3sâ†’6sâ†’12s...ï¼‰ï¼Œä¸Šé™ 30s</span>
        <span class="hljs-keyword">const</span> currentInterval = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(baseReconnectInterval * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, reconnectCount - <span class="hljs-number">1</span>), <span class="hljs-number">30000</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`SSE å°†åœ¨ <span class="hljs-subst">${currentInterval/<span class="hljs-number">1000</span>}</span> ç§’åé‡è¿ï¼ˆç¬¬ <span class="hljs-subst">${reconnectCount}</span> æ¬¡ï¼‰`</span>);
        
        <span class="hljs-comment">// å»¶è¿Ÿé‡è¿</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title function_">connectSSE</span>();
        }, currentInterval);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (reconnectCount &gt;= maxReconnectTimes) {
        message.<span class="hljs-title function_">error</span>(<span class="hljs-string">'SSE é‡è¿æ¬¡æ•°å·²è¾¾ä¸Šé™ï¼Œåœæ­¢é‡è¿'</span>);
        onClose?.();
      }
    }
  };

  <span class="hljs-comment">// å¯åŠ¨é¦–æ¬¡è¿æ¥</span>
  <span class="hljs-title function_">connectSSE</span>();

  <span class="hljs-comment">// è¿”å›æ‰‹åŠ¨å…³é—­å‡½æ•°ï¼ˆæ ‡è®°ä¸»åŠ¨å…³é—­ï¼Œç»ˆæ­¢é‡è¿ï¼‰</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    isManualClose = <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ ‡è®°ä¸ºä¸»åŠ¨å…³é—­</span>
    <span class="hljs-keyword">if</span> (abortController) {
      abortController.<span class="hljs-title function_">abort</span>(); <span class="hljs-comment">// å–æ¶ˆ fetch è¯·æ±‚</span>
    }
    onClose?.();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SSE å·²æ‰‹åŠ¨å…³é—­ï¼Œç»ˆæ­¢é‡è¿'</span>);
  };
};
</code></pre>
<h3 data-id="heading-2">ä½¿ç”¨ @fortaine/fetch-event-source</h3>
<p>è¿™ä¸ªæ’ä»¶çš„ä½¿ç”¨å°±æ¯”è¾ƒç®€å•ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿å¯ä»¥å‚è€ƒå®˜æ–¹APIåœ°å€</p>
<p>@fortaine/fetch-event-sourceå’Œä½¿ç”¨åŸç”Ÿçš„åŸç”Ÿ EventSourceå¯¹æ¯”å¦‚ä¸‹å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79d94ae614e840cbb90d8267e45a314c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi5b2k5b2k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964842&amp;x-signature=wnPgYTQEfDhamnG9UYNq2%2FT4ogg%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>å½“æˆ‘å®é™…ä½¿ç”¨çš„æ—¶å€™é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼š
@fortaine/fetch-event-source è°ƒç”¨çš„è¿™ä¸ªåº“sseæ–¹æ³•çš„æ—¶å€™ï¼Œç¬¬äºŒæ¬¡å»ºç«‹çš„æ—¶å€™ä¼šæŠŠç›´æ¥èµ°oncloseæ–¹æ³•å…³é—­æ‰çš„åŒæ—¶æˆ‘å°±æ¥æ”¶ä¸åˆ°æ¶ˆæ¯äº†ï¼Œè€Œä½¿ç”¨ const useEventSource: typeof import('@vueuse/core')['useEventSource'] vue3æ ¸å¿ƒåº“é‡Œé¢çš„è¿™ä¸ªæ–¹æ³•æ—¶å€™æ˜¯å¯ä»¥çš„ï¼Œä¸‹é¢æ˜¯å®é™…åŸå› å’Œè§£å†³æ–¹æ¡ˆ</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfa392daf0da4423a3018833cf08e3b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi5b2k5b2k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964842&amp;x-signature=OU2V0f4u80cF0vQLXsObtkUzt3g%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4c19c55d98a490fb033c02f22d7518b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi5b2k5b2k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964842&amp;x-signature=X706pPd0v2Gmj%2F4TIECAUEiSrSY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f483c57cb0064866bcef32e99fce84e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi5b2k5b2k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964842&amp;x-signature=Z2yDNI%2FqyYCREjvZ0OXi2IO5W1o%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4780e751c2b478a8b04a0f7572311d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi5b2k5b2k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964842&amp;x-signature=VRDEN%2FxKvcq%2BCRiOmMi9j5Yf0wg%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b9979276fca4fb591d0bbf683112b1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi5b2k5b2k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964842&amp;x-signature=IGlzH0%2FKP8vh%2FJ%2B625vVhtkzFZQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2da1764372374dc58f959f03596c5a62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi5b2k5b2k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964842&amp;x-signature=pY%2FSzSozTnnekNgz6xAyGokHoho%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eda9f41fd6244d9af597e044bfd4c4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi5b2k5b2k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964842&amp;x-signature=MAxFXQI28YucSL5spQr2CXWpR2c%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a95e292753da4479951f0e811e81e757~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qi5b2k5b2k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964842&amp;x-signature=LrdPxIgsGYGbHrmuv%2FYq5ry6zwM%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•è·å–è·¨ç³»ç»Ÿè°ƒç”¨çš„å‡½æ•°è°ƒç”¨æ ˆ]]></title>    <link>https://juejin.cn/post/7581888578538274854</link>    <guid>https://juejin.cn/post/7581888578538274854</guid>    <pubDate>2025-12-10T09:29:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581888578538274854" data-draft-id="7582021506189656110" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•è·å–è·¨ç³»ç»Ÿè°ƒç”¨çš„å‡½æ•°è°ƒç”¨æ ˆ"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2025-12-10T09:29:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èƒ¡å…ˆç”Ÿä¸å§“èƒ¡"/> <meta itemprop="url" content="https://juejin.cn/user/3257200782356605"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•è·å–è·¨ç³»ç»Ÿè°ƒç”¨çš„å‡½æ•°è°ƒç”¨æ ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3257200782356605/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èƒ¡å…ˆç”Ÿä¸å§“èƒ¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:29:21.000Z" title="Wed Dec 10 2025 09:29:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è¿›è¡ŒåŠŸèƒ½è°ƒè¯•æˆ–è€…é—®é¢˜å®šä½æ—¶ï¼Œç»å¸¸éœ€è¦æ‰¾ä¸€ä¸‹å“ªé‡Œè§¦å‘çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå¹¶è·Ÿè¸ªä¸€ä¸‹ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹ã€‚</p>
<p>ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨<code>simpleperf</code> ï¼š</p>
<pre><code class="hljs language-css" lang="css">simpleperf record -g -o  -- 
python3 /android-ndk-r27c/simpleperf/gecko_profile_generator<span class="hljs-selector-class">.py</span> \
      -<span class="hljs-selector-tag">i</span>  \
      <span class="hljs-attr">--symfs</span>  \
      <span class="hljs-attr">--kallsyms</span>   | gzip &gt; 
</code></pre>
<p>æµè§ˆå™¨æ‰“å¼€<code>https://profiler.firefox.com/</code>å°†ç”Ÿæˆçš„<code>add_client.perf.json.gz</code>æ‹–è¿›å»ï¼Œå°±å¯ä»¥æŸ¥çœ‹è°ƒç”¨æ ‘ã€ç«ç„°å›¾ã€æ ˆå›¾ç­‰è¿›ä¸€æ­¥åˆ†æå‡½æ•°è°ƒç”¨å…³ç³»ã€‚</p>
<blockquote>
<p>å‚è€ƒå¦ä¸€ç¯‡æ–‡ç«  å°è¯•é€šè¿‡ä¸€ä¸ªdemoåˆ†æbinderçš„æ‰§è¡Œæµç¨‹  çš„ä½¿ç”¨simpleperfæŠ“å–é€šè®¯åŒæ–¹çš„å‡½æ•°è°ƒç”¨æ ˆå°èŠ‚</p>
</blockquote>
<p>æˆ–è€…ä½¿ç”¨åŸºäºeBPFçš„å·¥å…·æ¯”å¦‚stackplz å‚è€ƒ ï¼š</p>
<p>è¿™ä¸¤ç§æ–¹å¼åœ¨å°è¯•å®šä½æŸäº›é—®é¢˜æ—¶æ¯”è¾ƒå—é™ï¼Œæ¯”å¦‚kernelå¯åŠ¨æ—©æœŸæ—¶ã€‚å› æ­¤æœ¬æ–‡å°è¯•ä¸€ç§æ›´åŠ ç›´æ¥çš„æ–¹å¼ï¼šç›´æ¥åœ¨ç›®æ ‡ä½ç½®æ‰“å°å‡½æ•°è°ƒç”¨æ ˆã€‚</p>
<h2 data-id="heading-0">è·å–ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„å‡½æ•°è°ƒç”¨æ ˆ</h2>
<p>é¦–å…ˆç¡®ä¿
<code>CONFIG_STACKTRACE</code> <code>CONFIG_KALLSYMS</code>å’Œ<code>CONFIG_USER_STACKTRACE_SUPPORT</code>å†…æ ¸å®æ‰“å¼€</p>
<p>å¯ä»¥é€šè¿‡ <code>zcat /proc/config.gz | grep -E &amp;#34;STACKTRACE|KALLSYMS&amp;#34;</code>  ç¡®è®¤ã€‚</p>
<p>åœ¨ä»£ç ä¸­æ’å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">if</span> IS_ENABLED(CONFIG_STACKTRACE)</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> </span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> STACK_ENTRIES 64</span>

<span class="hljs-comment">/*
 * æ‰“å°å½“å‰è¿›ç¨‹çš„
 * 1) å†…æ ¸è°ƒç”¨æ ˆï¼ˆç¬¦å·åï¼‰
 * 2) ç”¨æˆ·ç©ºé—´è°ƒç”¨æ ˆï¼ˆåŸå§‹ PC åœ°å€ï¼‰
 */</span>
<span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">dump_all_stacks</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    <span class="hljs-type">int</span> i;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> nr;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> entries[STACK_ENTRIES];

    <span class="hljs-comment">/* åŸºæœ¬è¿›ç¨‹ä¿¡æ¯ */</span>
    pr_info(&amp;#<span class="hljs-number">34</span>;pid=%d comm=%s\n&amp;#<span class="hljs-number">34</span>;,
            current-&gt;pid, current-&gt;comm);

    <span class="hljs-built_in">memset</span>(entries, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(entries));
    nr = stack_trace_save(entries, ARRAY_SIZE(entries), <span class="hljs-number">0</span>);

    pr_info(&amp;#<span class="hljs-number">34</span>;kernel backtrace:\n&amp;#<span class="hljs-number">34</span>;);
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; nr; i++) {
        <span class="hljs-comment">/* %pS ä¾èµ– CONFIG_KALLSYMSï¼Œå¯ä»¥æ‰“å°å‡ºç¬¦å·å */</span>
        pr_info(&amp;#<span class="hljs-number">34</span>;  [k%<span class="hljs-number">02</span>d] %pS\n&amp;#<span class="hljs-number">34</span>;, i, (<span class="hljs-type">void</span> *)entries[i]);
    }

<span class="hljs-meta">#<span class="hljs-keyword">if</span> IS_ENABLED(CONFIG_USER_STACKTRACE_SUPPORT)</span>
    <span class="hljs-comment">/* -------- ç”¨æˆ·ç©ºé—´è°ƒç”¨æ ˆ -------- */</span>
    <span class="hljs-built_in">memset</span>(entries, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(entries));

    <span class="hljs-comment">/*
     * æ³¨æ„ï¼šsave_stack_trace_user() åªèƒ½å¯¹ current ç”Ÿæ•ˆï¼Œ
     * ä¼šä¿å­˜ä»ç”¨æˆ·æ€è¿›å…¥å†…æ ¸æ—¶çš„é‚£ä¸€ç»„è¿”å›åœ°å€ã€‚
     */</span>
    nr = stack_trace_save_user(entries, ARRAY_SIZE(entries));

    pr_info(&amp;#<span class="hljs-number">34</span>;user backtrace (raw user PCs):\n&amp;#<span class="hljs-number">34</span>;);
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; nr; i++) {
        <span class="hljs-comment">/*
         * è¿™äº›æ˜¯ç”¨æˆ·è™šæ‹Ÿåœ°å€ï¼Œéœ€è¦ offline ç”¨ addr2line ç­‰å·¥å…·
         * ç»“åˆ /proc//maps çš„æ˜ å°„åŸºå€è¿˜åŸæˆå…·ä½“å‡½æ•°å/è¡Œå·ã€‚
         */</span>
        pr_info(&amp;#<span class="hljs-number">34</span>;  [u%<span class="hljs-number">02</span>d] <span class="hljs-number">0</span>x%<span class="hljs-number">016l</span>x\n&amp;#<span class="hljs-number">34</span>;, i, entries[i]);
    }
<span class="hljs-meta">#<span class="hljs-keyword">else</span></span>
    pr_info(&amp;#<span class="hljs-number">34</span>;user <span class="hljs-built_in">stack</span> trace not supported &amp;#<span class="hljs-number">34</span>;
            &amp;#<span class="hljs-number">34</span>;(CONFIG_USER_STACKTRACE_SUPPORT is disabled)\n&amp;#<span class="hljs-number">34</span>;);
<span class="hljs-meta">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">/* CONFIG_USER_STACKTRACE_SUPPORT */</span></span>
}
<span class="hljs-meta">#<span class="hljs-keyword">else</span></span>
<span class="hljs-type">static</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title function_">dump_all_stacks</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {}
<span class="hljs-meta">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">/* CONFIG_STACKTRACE */</span></span>
</code></pre>
<p>å¯ä»¥åœ¨ç›®æ ‡ä½ç½®æ’å…¥è°ƒç”¨<code>dump_all_stacks()</code>ã€‚ æŠ“å†…æ ¸æ—¥å¿—ã€‚</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f0697fb210541f7b7cd3cfd1955b8a6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=455&amp;h=542&amp;s=23144&amp;e=png&amp;b=fffefe" alt="v2-8231221c3528c29fe62e04edde02358c_720w.png" loading="lazy"/></p>
<h2 data-id="heading-1">è§£æç”¨æˆ·æ€è°ƒç”¨æ ˆ</h2>
<p>å‡†å¤‡äº†ä¸€ä¸ª<code>python</code>è„šæœ¬æ¥è§£æç”¨æˆ·æ€çš„å †æ ˆï¼Œè¯¥è„šæœ¬ä¼šè®¡ç®—å †æ ˆä¸­åœ°å€ç›¸å¯¹äºç¬¦å·æ–‡ä»¶çš„åç§»ï¼Œå¹¶ç”¨<code>addr2line</code>å°è¯•è§£æç¬¦å·ã€‚</p>
<pre><code class="hljs language-python3" lang="python3">#!/usr/bin/env python3
# -*- coding: utf-8 -*-
&amp;#34;&amp;#34;&amp;#34;
binder_user_stack_resolver.py

ç”¨æ³•ç¤ºä¾‹ï¼š

1) å…ˆæŠŠå†…æ ¸æ—¥å¿—å¯¼å‡ºæ¥ï¼š
   adb shell dmesg | grep binder_open &gt; binder.log

2) æŠŠ /proc//maps å¯¼å‡ºæ¥ï¼š
   adb shell cat /proc/1234/maps &gt; maps_1234.txt

3) åœ¨å®¿ä¸»æœºä¸Šæ‰§è¡Œï¼ˆå‡è®¾å·²æå– system æ˜ åƒåˆ° /path/to/symbolsï¼‰ï¼š

   python3 binder_user_stack_resolver.py \
       --pid 1234 \
       --log binder.log \
       --maps maps_1234.txt \
       --sym-root /path/to/symbols \
       --addr2line aarch64-linux-android-addr2line

è¯´æ˜ï¼š
- sym-root ç›®å½•ä¸‹åº”å½“èƒ½æ‰¾åˆ°ç±»ä¼¼ /system/bin/surfaceflinger è¿™æ ·çš„è·¯å¾„
  ï¼ˆä¾‹å¦‚è§£åŒ… system.img åçš„æ ¹ç›®å½•ï¼‰
- addr2line å¯ä»¥æ˜¯ aarch64-linux-android-addr2line æˆ– llvm-addr2line ç­‰
&amp;#34;&amp;#34;&amp;#34;

import argparse
import os
import re
import subprocess
import sys
from typing import List, Tuple, Dict, Optional


class MapEntry:
    def __init__(self, start: int, end: int, offset: int, path: str):
        self.start = start
        self.end = end
        self.offset = offset
        self.path = path

    def contains(self, addr: int) -&gt; bool:
        return self.start &lt;= addr &lt; self.end

    def file_offset(self, addr: int) -&gt; int:
        &amp;#34;&amp;#34;&amp;#34;
        è®¡ç®— addr åœ¨ ELF æ–‡ä»¶å†…çš„åç§»ï¼š
        file_off = (addr - start_vma) + file_offset_column
        &amp;#34;&amp;#34;&amp;#34;
        return (addr - self.start) + self.offset


def parse_maps(maps_path: str) -&gt; List[MapEntry]:
    entries: List[MapEntry] = []
    with open(maps_path, &amp;#34;r&amp;#34;, encoding=&amp;#34;utf-8&amp;#34;, errors=&amp;#34;ignore&amp;#34;) as f:
        for line in f:
            line = line.strip()
            if not line:
                continue
            # å½¢å¦‚ï¼š
            # start-end perms offset dev inode pathname
            # 0000007f8a100000-0000007f8a200000 r-xp 00000000 08:01 123456 /system/bin/surfaceflinger
            parts = line.split()
            if len(parts) &lt; 5:
                continue

            addr_range = parts[0]
            perms = parts[1]
            offset_str = parts[2]
            path = parts[5] if len(parts) &gt;= 6 else &amp;#34;&amp;#34;

            # åªå…³å¿ƒå¯æ‰§è¡Œæ˜ å°„
            if &amp;#34;x&amp;#34; not in perms:
                continue

            try:
                start_str, end_str = addr_range.split(&amp;#34;-&amp;#34;)
                start = int(start_str, 16)
                end = int(end_str, 16)
                offset = int(offset_str, 16)
            except ValueError:
                continue

            if not path or path == &amp;#34;[vdso]&amp;#34; or path.startswith('['):
                continue

            entries.append(MapEntry(start, end, offset, path))
    return entries


def find_mapping(maps: List[MapEntry], addr: int) -&gt; Optional[MapEntry]:
    for m in maps:
        if m.contains(addr):
            return m
    return None


def resolve_addr(addr: int, maps: List[MapEntry], sym_root: str, addr2line_bin: str) -&gt; str:
    m = find_mapping(maps, addr)
    if not m:
        return f&amp;#34;0x{addr:016x} &amp;#34;

    file_off = m.file_offset(addr)

    # æŠŠ /system/bin/surfaceflinger è¿™ç§è·¯å¾„æ˜ å°„åˆ° sym_root/system/bin/surfaceflinger
    rel_path = m.path.lstrip(&amp;#34;/&amp;#34;)  # å»æ‰å¼€å¤´çš„ '/'
    elf_path = os.path.join(sym_root, rel_path)

    if not os.path.exists(elf_path):
        return f&amp;#34;0x{addr:016x} {m.path}+0x{file_off:x} (ELF not found: {elf_path})&amp;#34;

    cmd = [addr2line_bin, &amp;#34;-C&amp;#34;, &amp;#34;-f&amp;#34;, &amp;#34;-e&amp;#34;, elf_path, f&amp;#34;0x{file_off:x}&amp;#34;]
    try:
        out = subprocess.check_output(cmd, stderr=subprocess.STDOUT)
        decoded = out.decode(&amp;#34;utf-8&amp;#34;, errors=&amp;#34;ignore&amp;#34;).strip().splitlines()
        if len(decoded) &gt;= 2:
            func = decoded[0]
            loc = decoded[1]
            return f&amp;#34;0x{addr:016x} {m.path}+0x{file_off:x} =&gt; {func} @ {loc}&amp;#34;
        elif decoded:
            return f&amp;#34;0x{addr:016x} {m.path}+0x{file_off:x} =&gt; {decoded[0]}&amp;#34;
        else:
            return f&amp;#34;0x{addr:016x} {m.path}+0x{file_off:x} (no addr2line output)&amp;#34;
    except subprocess.CalledProcessError as e:
        return f&amp;#34;0x{addr:016x} {m.path}+0x{file_off:x} (addr2line error: {e})&amp;#34;


def parse_log_for_pid(log_path: str, pid: int) -&gt; List[int]:
    &amp;#34;&amp;#34;&amp;#34;
    ä» binder log ä¸­æŠ½å–æŒ‡å®š pid çš„ [uXX] è¡Œçš„åœ°å€
    &amp;#34;&amp;#34;&amp;#34;
    addrs: List[int] = []
    current_pid: Optional[int] = None
    in_user_bt = False

    pid_line_re = re.compile(r&amp;#34;binder_open:\s+pid=(\d+)\s+comm=&amp;#34;)
    user_bt_re = re.compile(r&amp;#34;binder_open:\s+user backtrace&amp;#34;)
    addr_re = re.compile(r&amp;#34;\[u\d+\]\s+0x([0-9a-fA-F]+)&amp;#34;)

    with open(log_path, &amp;#34;r&amp;#34;, encoding=&amp;#34;utf-8&amp;#34;, errors=&amp;#34;ignore&amp;#34;) as f:
        for line in f:
            line = line.rstrip(&amp;#34;\n&amp;#34;)

            m = pid_line_re.search(line)
            if m:
                current_pid = int(m.group(1))
                in_user_bt = False
                continue

            if current_pid == pid and user_bt_re.search(line):
                in_user_bt = True
                continue

            if in_user_bt and current_pid == pid:
                m2 = addr_re.search(line)
                if m2:
                    addr_str = m2.group(1)
                    addr = int(addr_str, 16)
                    addrs.append(addr)
                else:
                    # é‡åˆ°ä¸æ˜¯ [uXX] çš„è¡Œï¼Œè®¤ä¸ºæœ¬æ¬¡ user backtrace ç»“æŸ
                    if line.strip() == &amp;#34;&amp;#34; or line.startswith(&amp;#34;binder_open:&amp;#34;):
                        in_user_bt = False

    return addrs


def main():
    parser = argparse.ArgumentParser(description=&amp;#34;Resolve SurfaceFlinger binder_open user stacks&amp;#34;)
    parser.add_argument(&amp;#34;--pid&amp;#34;, type=int, required=True, help=&amp;#34;surfaceflinger çš„ pid&amp;#34;)
    parser.add_argument(&amp;#34;--log&amp;#34;, required=True, help=&amp;#34;åŒ…å« binder_open æ‰“å°çš„ log æ–‡ä»¶&amp;#34;)
    parser.add_argument(&amp;#34;--maps&amp;#34;, required=True, help=&amp;#34;/proc//maps å¯¼å‡ºçš„æ–‡ä»¶è·¯å¾„&amp;#34;)
    parser.add_argument(&amp;#34;--sym-root&amp;#34;, required=True, help=&amp;#34;å¸¦ç¬¦å· system/so/root çš„æ ¹ç›®å½•&amp;#34;)
    parser.add_argument(&amp;#34;--addr2line&amp;#34;, default=&amp;#34;addr2line&amp;#34;,
                        help=&amp;#34;addr2line å¯æ‰§è¡Œæ–‡ä»¶åï¼ˆé»˜è®¤: addr2lineï¼Œå¯æ”¹ä¸º aarch64-linux-android-addr2lineï¼‰&amp;#34;)

    args = parser.parse_args()

    maps = parse_maps(args.maps)
    if not maps:
        print(&amp;#34;ERROR: no executable mappings parsed from maps file&amp;#34;, file=sys.stderr)
        sys.exit(1)

    addrs = parse_log_for_pid(args.log, args.pid)
    if not addrs:
        print(f&amp;#34;ERROR: no user backtrace addresses found in log for pid={args.pid}&amp;#34;, file=sys.stderr)
        sys.exit(1)

    print(f&amp;#34;# binder_open user stack for pid={args.pid}&amp;#34;)
    for addr in addrs:
        resolved = resolve_addr(addr, maps, args.sym_root, args.addr2line)
        print(resolved)


if __name__ == &amp;#34;__main__&amp;#34;:
    main()
</code></pre>
<p>è§£æç¤ºä¾‹</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/feb930f59b384d90a80014e927befe32~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1440&amp;h=205&amp;s=381507&amp;e=png&amp;b=1e1d1d" alt="v2-1c6ad1e9a49a4784aacec07f570deefd~resize_1440_q75.png" loading="lazy"/></p>
<h2 data-id="heading-2">åŸç†åˆ†æ</h2>
<h3 data-id="heading-3">1. å‘ç”Ÿç³»ç»Ÿè°ƒç”¨æ—¶ä¿å­˜ç°åœº</h3>
<p>ä»¥ç”¨æˆ·ç©ºé—´æ‰§è¡Œ <code>open(&amp;#34;34;/dev/binder&amp;#34;;)</code> çš„ç³»ç»Ÿè°ƒç”¨ä¸ºä¾‹ï¼ŒæŒ‡ä»¤æ˜¯ï¼š
<code>svc #0</code></p>
<p>CPU ç¡¬ä»¶åšçš„äº‹æƒ…:</p>
<ul>
<li>å½“ EL0 æ‰§è¡Œ svc #immï¼š</li>
<li>CPU åˆ‡æ¢å¼‚å¸¸çº§ï¼šEL0 â†’ EL1ï¼›</li>
<li>ç”¨æˆ· PSTATE ä¿å­˜åˆ° SPSR_EL1</li>
<li>ç”¨æˆ· PCï¼ˆsvc ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ï¼‰ä¿å­˜åˆ° ELR_EL1</li>
<li>ä½¿ç”¨å¼‚å¸¸å‘é‡è¡¨ä¸­ EL0 åŒæ­¥å¼‚å¸¸çš„å…¥å£åœ°å€ï¼ˆVBAR_EL1 æŒ‡å‘çš„ä¸€å¼ è¡¨ï¼‰ï¼š</li>
<li>è·³è½¬åˆ° el0_syncï¼ˆæˆ–ç±»ä¼¼åå­—ï¼‰çš„å…¥å£</li>
<li>åˆ‡æ¢æ ˆæŒ‡é’ˆï¼š</li>
<li>ä½¿ç”¨ SP_EL1 ä½œä¸ºæ ˆæŒ‡é’ˆï¼ˆè¿™æ—¶å·²ç»æ˜¯å†…æ ¸æ ˆï¼‰</li>
<li>SP_EL0 ä¿ç•™çš„æ˜¯ç”¨æˆ·æ€æ ˆï¼Œæš‚æ—¶ä¸ä¼šåŠ¨</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šæ­¤æ—¶ x0â€“x30 é‡Œçš„å€¼ä»ç„¶æ˜¯ç”¨æˆ·æ€çš„å¯„å­˜å™¨å€¼ï¼ŒCPU æ²¡å¸®ä½ ä¿å­˜åˆ°å†…å­˜ï¼Œå¿…é¡»é å†…æ ¸æ±‡ç¼–è‡ªå·±å­˜ã€‚</p>
</blockquote>
<pre><code class="hljs language-assemble" lang="assemble">arch/arm64/kernel/head.S
__HEAD
    primary_entry
        __primary_switched
            adr_l	x8, vectors			// load VBAR_EL1 with virtual
            msr	        vbar_el1, x8			// vector table address
</code></pre>
<p>å°†<code>vectors</code>å¡«å…¥<code>vbar_el1</code>å¯„å­˜å™¨ä¸­ï¼Œå…¶ä¸­<code>vectors</code>æ˜¯ä¸€ä¸ªå…¨å±€æ ‡è®°ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">arch</span>/<span class="hljs-selector-tag">arm64</span>/<span class="hljs-selector-tag">kernel</span>/<span class="hljs-selector-tag">entry</span><span class="hljs-selector-class">.S</span>
<span class="hljs-comment">/*
 * Exception vectors.
 */</span>
	<span class="hljs-selector-class">.pushsection</span> <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-class">.entry</span><span class="hljs-selector-class">.text</span><span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;, <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">ax</span><span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;

	<span class="hljs-selector-class">.align</span>	<span class="hljs-number">11</span>
<span class="hljs-selector-tag">SYM_CODE_START</span>(vectors)
	<span class="hljs-selector-tag">kernel_ventry</span>	<span class="hljs-number">0</span>, <span class="hljs-selector-tag">t</span>, <span class="hljs-number">64</span>, <span class="hljs-selector-tag">sync</span>		<span class="hljs-comment">// Synchronous 64-bit EL0</span>
<span class="hljs-selector-tag">SYM_CODE_END</span>(vectors)
</code></pre>
<p><code>vectors</code>å¤„é€šè¿‡<code>kernel_ventry</code>å®šä¹‰äº†å¤šä¸ªå…¥å£:</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-class">.macro</span> <span class="hljs-selector-tag">kernel_ventry</span>, <span class="hljs-selector-tag">el</span>:<span class="hljs-selector-tag">req</span>, <span class="hljs-selector-tag">ht</span>:<span class="hljs-selector-tag">req</span>, <span class="hljs-selector-tag">regsize</span>:<span class="hljs-selector-tag">req</span>, <span class="hljs-selector-tag">label</span>:<span class="hljs-selector-tag">req</span>
<span class="hljs-selector-class">.align</span> <span class="hljs-number">7</span>
<span class="hljs-selector-tag">sub</span>	<span class="hljs-selector-tag">sp</span>, <span class="hljs-selector-tag">sp</span>, <span class="hljs-selector-id">#PT_REGS_SIZE</span>
<span class="hljs-selector-tag">b</span>	<span class="hljs-selector-tag">el</span>\<span class="hljs-selector-tag">el</span>\<span class="hljs-selector-tag">ht</span>\()<span class="hljs-selector-tag">_</span>\<span class="hljs-selector-tag">regsize</span>\()<span class="hljs-selector-tag">_</span>\<span class="hljs-selector-tag">label</span>
</code></pre>
<p>å…ˆé¢„ç•™<code>PT_REGS_SIZE</code>å¤§å°çš„æ ˆç©ºé—´ï¼Œç„¶åè·³è½¬åˆ°<code>el0t_64_sync</code>å¤„æ‰§è¡Œ</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">SYM_CODE_START_LOCAL</span>(el\el\ht\()_\regsize\()_\<span class="hljs-selector-tag">label</span>)
	kernel_entry \el, \regsize
	mov	x0, sp
	bl	el\el\ht\()_\regsize\()_\<span class="hljs-selector-tag">label</span>\()_handler
	<span class="hljs-selector-class">.if</span> \el == <span class="hljs-number">0</span>
	<span class="hljs-selector-tag">b</span>	ret_to_user
	<span class="hljs-selector-class">.else</span>
	<span class="hljs-selector-tag">b</span>	ret_to_kernel
	<span class="hljs-selector-class">.endif</span>
<span class="hljs-built_in">SYM_CODE_END</span>(el\el\ht\()_\regsize\()_\<span class="hljs-selector-tag">label</span>)
	<span class="hljs-selector-class">.endm</span>
</code></pre>
<p><code>kernel_entry \el, \regsize</code>å®å¤„ä¿å­˜å¯„å­˜å™¨ä¿¡æ¯åˆ°å†…æ ¸æ ˆä¸­</p>
<pre><code class="hljs language-csharp" lang="csharp">.macro	kernel_entry, el, regsize = <span class="hljs-number">64</span>
	stp	x0, x1, [sp, <span class="hljs-meta">#16 * 0]</span>
	stp	x2, x3, [sp, <span class="hljs-meta">#16 * 1]</span>
	stp	x4, x5, [sp, <span class="hljs-meta">#16 * 2]</span>
	stp	x6, x7, [sp, <span class="hljs-meta">#16 * 3]</span>
	stp	x8, x9, [sp, <span class="hljs-meta">#16 * 4]</span>
	stp	x10, x11, [sp, <span class="hljs-meta">#16 * 5]</span>
	stp	x12, x13, [sp, <span class="hljs-meta">#16 * 6]</span>
	stp	x14, x15, [sp, <span class="hljs-meta">#16 * 7]</span>
	stp	x16, x17, [sp, <span class="hljs-meta">#16 * 8]</span>
	stp	x18, x19, [sp, <span class="hljs-meta">#16 * 9]</span>
	stp	x20, x21, [sp, <span class="hljs-meta">#16 * 10]</span>
	stp	x22, x23, [sp, <span class="hljs-meta">#16 * 11]</span>
	stp	x24, x25, [sp, <span class="hljs-meta">#16 * 12]</span>
	stp	x26, x27, [sp, <span class="hljs-meta">#16 * 13]</span>
	stp	x28, x29, [sp, <span class="hljs-meta">#16 * 14]</span>

	.<span class="hljs-keyword">if</span>	\el == <span class="hljs-number">0</span>
	clear_gp_regs
	mrs	x21, sp_el0
	ldr_this_cpu	tsk, __entry_task, x20
	msr	sp_el0, tsk
	.<span class="hljs-keyword">else</span>
	<span class="hljs-keyword">add</span>	x21, sp, <span class="hljs-meta">#PT_REGS_SIZE</span>
	get_current_task tsk
	.endif <span class="hljs-comment">/* \el == 0 */</span>
	mrs	x22, elr_el1
	mrs	x23, spsr_el1
	stp	lr, x21, [sp, <span class="hljs-meta">#S_LR]</span>

	<span class="hljs-comment">/*
	 * For exceptions from EL0, create a final frame record.
	 * For exceptions from EL1, create a synthetic frame record so the
	 * interrupted code shows up in the backtrace.
	 */</span>
	.<span class="hljs-keyword">if</span> \el == <span class="hljs-number">0</span>
	stp	xzr, xzr, [sp, <span class="hljs-meta">#S_STACKFRAME] //  pt_regs åŒºåŸŸé‡Œå†™ä¸€ä¸ªç»ˆæ­¢ frame recordï¼ˆFPã€LR = 0ï¼‰ï¼Œæ–¹ä¾¿ unwinder çŸ¥é“åˆ°å¤´äº†ã€‚</span>
	.<span class="hljs-keyword">else</span>
	stp	x29, x22, [sp, <span class="hljs-meta">#S_STACKFRAME]</span>
	.endif
	<span class="hljs-keyword">add</span>	x29, sp, <span class="hljs-meta">#S_STACKFRAME</span>
</code></pre>
<p>ä¹‹åæ ˆå¸ƒå±€å¦‚ä¸‹</p>
<pre><code class="hljs language-go" lang="go">ä½åœ°å€
+-------------------------+
| <span class="hljs-keyword">struct</span> thread_info      |  flags &amp; PF_KTHREAD)
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;

arch_stack_walk_user(consume_entry, &amp;c, task_pt_regs(current));

<span class="hljs-keyword">return</span> c.<span class="hljs-built_in">len</span>;
</code></pre>
<p>}
#endif</p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-string">`arch_stack_walk_user`</span>æ˜¯ä¸€ä¸ªæ¶æ„ç›¸å…³çš„å‡½æ•°ï¼Œå®šä¹‰åœ¨<span class="hljs-string">`arch/arm64/kernel/stacktrace.c`</span>ä¸­ï¼š

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">arch_stack_walk_user</span>(<span class="hljs-params">stack_trace_consume_fn consume_entry, <span class="hljs-keyword">void</span> *cookie,
    					<span class="hljs-keyword">const</span> struct pt_regs *regs</span>)
    {
    	<span class="hljs-keyword">if</span> (!<span class="hljs-title function_">consume_entry</span>(cookie, regs-&gt;pc))
    		<span class="hljs-keyword">return</span>;

    	<span class="hljs-keyword">if</span> (!<span class="hljs-title function_">compat_user_mode</span>(regs)) {
    		<span class="hljs-comment">/* AARCH64 mode */</span>
    		struct frame_tail __user *tail;

    		tail = (struct frame_tail __user *)regs-&gt;regs[<span class="hljs-number">29</span>];
    		<span class="hljs-keyword">while</span> (tail &amp;&amp; !((unsigned long)tail &amp; <span class="hljs-number">0x7</span>))
    			tail = <span class="hljs-title function_">unwind_user_frame</span>(tail, cookie, consume_entry);
    	} <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">/* ...... */</span>
    	}
    }

<span class="hljs-string">`task_pt_regs(current) `</span>

    #define <span class="hljs-title function_">task_pt_regs</span>(p) \
    	((struct pt_regs *)(<span class="hljs-variable constant_">THREAD_SIZE</span> + <span class="hljs-title function_">task_stack_page</span>(p)) - <span class="hljs-number">1</span>)



    <span class="hljs-comment">/*
     * When accessing the stack of a non-current task that might exit, use
     * try_get_task_stack() instead.  task_stack_page will return a pointer
     * that could get freed out from under you.
     */</span>
    <span class="hljs-keyword">static</span> __always_inline <span class="hljs-keyword">void</span> *<span class="hljs-title function_">task_stack_page</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> struct task_struct *task</span>)
    {
    	<span class="hljs-keyword">return</span> task-&gt;stack;
    }

å…¶ä¸­<span class="hljs-string">`THREAD_SIZE`</span> æ˜¯å†…æ ¸æ ˆçš„å¤§å°ï¼Œ<span class="hljs-string">`task_stack_page`</span>æ‹¿åˆ°çš„æ˜¯æ ˆçš„åœ°å€ã€‚
å› æ­¤<span class="hljs-string">`task_pt_regs(current)`</span>æ‹¿åˆ°çš„å°±æ˜¯å½“å‰è¿›ç¨‹å†…æ ¸æ ˆä¸Šä¿å­˜çš„ä¸­æ–­çº¿ç¨‹ï¼Œç„¶å <span class="hljs-string">`arch_stack_walk_user`</span>ä»ä¸­æ‰¾åˆ°<span class="hljs-string">`x29`</span>å¯„å­˜å™¨ï¼Œå¹¶ä¾æ¬¡å»æ‰¾<span class="hljs-string">`lr`</span>æŒ‡é’ˆå’Œ<span class="hljs-string">`fp`</span>æŒ‡é’ˆï¼Œå°±å¯ä»¥æŠ“åˆ°ç”¨æˆ·æ€çš„è°ƒç”¨æ ˆã€‚
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutteræ‰“åŒ…APKè®°å½•]]></title>    <link>https://juejin.cn/post/7581814484066500660</link>    <guid>https://juejin.cn/post/7581814484066500660</guid>    <pubDate>2025-12-10T09:49:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581814484066500660" data-draft-id="7581828086020882447" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutteræ‰“åŒ…APKè®°å½•"/> <meta itemprop="keywords" content="Flutter,Dart"/> <meta itemprop="datePublished" content="2025-12-10T09:49:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç­‰ä½ ç­‰äº†é‚£ä¹ˆä¹…"/> <meta itemprop="url" content="https://juejin.cn/user/1688446223025927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutteræ‰“åŒ…APKè®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1688446223025927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç­‰ä½ ç­‰äº†é‚£ä¹ˆä¹…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:49:21.000Z" title="Wed Dec 10 2025 09:49:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Flutteræ‰“åŒ…APKè®°å½•</h2>
<p>ç¬¬ä¸€æ¬¡æ‰“åŒ…Flutter APKï¼Œè¿˜æ˜¯æœ‰ç‚¹å°æ¿€åŠ¨çš„hhã€‚</p>
<h3 data-id="heading-1">1.é€šè¿‡ CMD / ç»ˆç«¯å‘½ä»¤ç”Ÿæˆ jks</h3>
<ul>
<li>åˆ‡æ¢åˆ°ä½ æƒ³å­˜æ”¾ jks æ–‡ä»¶çš„ç›®å½•ï¼ˆæ¯”å¦‚é¡¹ç›®æ ¹ç›®å½•çš„ <code>android/key</code> æ–‡ä»¶å¤¹ï¼Œå…ˆæ‰‹åŠ¨åˆ›å»º <code>key</code> æ–‡ä»¶å¤¹ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-cmd" lang="cmd">cd D:\ljhwork\android_project\warm_todo\android\key
</code></pre>
<ul>
<li>
<h5 data-id="heading-2">æ‰§è¡Œç”Ÿæˆå‘½ä»¤</h5>
</li>
</ul>
<pre><code class="hljs language-cmd" lang="cmd">keytool -genkey -v -keystore warm_todo.jks -keyalg RSA -keysize 2048 -validity 10000 -alias warm_todo_alias
</code></pre>
<h5 data-id="heading-3">å‘½ä»¤å‚æ•°è§£é‡Šï¼ˆæŒ‰éœ€ä¿®æ”¹ï¼‰ï¼š</h5>





























<table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>-keystore warm_todo.jks</code></td><td>ç”Ÿæˆçš„ jks æ–‡ä»¶åï¼ˆè‡ªå®šä¹‰ï¼Œæ¯”å¦‚ä½ çš„é¡¹ç›®åï¼‰</td></tr><tr><td><code>-keyalg RSA</code></td><td>åŠ å¯†ç®—æ³•ï¼ˆå›ºå®š RSAï¼‰</td></tr><tr><td><code>-keysize 2048</code></td><td>å¯†é’¥é•¿åº¦ï¼ˆå›ºå®š 2048ï¼‰</td></tr><tr><td><code>-validity 10000</code></td><td>æœ‰æ•ˆæœŸï¼ˆ10000 å¤©ï¼Œçº¦ 27 å¹´ï¼‰</td></tr><tr><td><code>-alias warm_todo_alias</code></td><td>åˆ«åï¼ˆè‡ªå®šä¹‰ï¼Œè®°ä½å³å¯ï¼‰</td></tr></tbody></table>
<ul>
<li>
<h5 data-id="heading-4">å¡«å†™ä¿¡æ¯å¹¶è®¾ç½®å¯†ç </h5>
</li>
</ul>
<p>æ‰§è¡Œå‘½ä»¤åï¼Œä¼šä¾æ¬¡æç¤ºä½ è¾“å…¥ï¼š</p>
<ol>
<li>å¯†é’¥åº“å¯†ç ï¼ˆjks æ–‡ä»¶çš„å¯†ç ï¼ŒåŠ¡å¿…è®°ä½ï¼Œæ¯”å¦‚ <code>123456</code>ï¼‰ï¼›</li>
<li>ç¡®è®¤å¯†ç ï¼›</li>
<li>å§“åã€ç»„ç»‡ã€åŸå¸‚ç­‰ä¿¡æ¯ï¼ˆå¯éšä¾¿å¡«ï¼Œä¸å½±å“ç­¾åï¼‰ï¼›</li>
<li>å¯†é’¥å¯†ç ï¼ˆå»ºè®®å’Œå¯†é’¥åº“å¯†ç ä¸€è‡´ï¼‰ï¼›</li>
<li>ç¡®è®¤åï¼Œä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆ <code>warm_todo.jks</code> æ–‡ä»¶ã€‚</li>
</ol>
<h3 data-id="heading-5">2. é…ç½® Flutter æ‰“åŒ…æ—¶ä½¿ç”¨ jks</h3>
<ul>
<li>åœ¨ <code>android</code> ç›®å½•ä¸‹åˆ›å»º <code>key.properties</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆæ›¿æ¢ä¸ºä½ çš„ä¿¡æ¯ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-properties" lang="properties">storePassword=123456
keyPassword=123456
keyAlias=warm_todo_alias
# æ›¿æ¢ä¸º jks æ–‡ä»¶è·¯å¾„ï¼ˆç›¸å¯¹äº android ç›®å½•ï¼‰
# æ¯”å¦‚ä½ æŠŠ jks æ”¾åœ¨ android/app/key/warm_todo.jksï¼Œå°±å†™ key/warm_todo.jks
storeFile=key/warm_todo.jks
</code></pre>
<p>æ‰“å¼€ <code>android/app/build.gradle.jks</code>ï¼Œæ·»åŠ ç­¾åé…ç½®ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ğŸ”¥ æ­¥éª¤1ï¼šå¯¼å…¥å¿…è¦çš„ Java æ ¸å¿ƒç±»ï¼ˆè§£å†³ Properties/FileInputStream æœªè§£æï¼‰</span>
<span class="hljs-keyword">import</span> java.util.Properties
<span class="hljs-keyword">import</span> java.io.FileInputStream

plugins {
    id(&amp;#<span class="hljs-number">34</span>;com.android.application&amp;#<span class="hljs-number">34</span>;)
    id(&amp;#<span class="hljs-number">34</span>;kotlin-android&amp;#<span class="hljs-number">34</span>;)
    <span class="hljs-comment">// The Flutter Gradle Plugin must be applied after the Android and Kotlin Gradle plugins.</span>
    id(&amp;#<span class="hljs-number">34</span>;dev.flutter.flutter-gradle-plugin&amp;#<span class="hljs-number">34</span>;)
}

<span class="hljs-comment">// ğŸ”¥ è¯»å– key.propertiesï¼ˆä¿®å¤ç±»å‹è½¬æ¢è­¦å‘Šï¼‰</span>
<span class="hljs-keyword">val</span> keystoreProperties = Properties()
<span class="hljs-keyword">val</span> keystorePropertiesFile = rootProject.file(&amp;#<span class="hljs-number">34</span>;key.properties&amp;#<span class="hljs-number">34</span>;)
<span class="hljs-keyword">if</span> (keystorePropertiesFile.exists()) {
    keystoreProperties.load(FileInputStream(keystorePropertiesFile))
}

android {
    namespace = &amp;#<span class="hljs-number">34</span>;com.hluck.warm_todo&amp;#<span class="hljs-number">34</span>;
    compileSdk = flutter.compileSdkVersion
    ndkVersion = flutter.ndkVersion

    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_17
        targetCompatibility = JavaVersion.VERSION_17
    }

    <span class="hljs-comment">// ğŸ”¥ æ­¥éª¤2ï¼šæ›¿æ¢åºŸå¼ƒçš„ jvmTargetï¼Œä½¿ç”¨ compilerOptions</span>
    kotlin {
        jvmToolchain(<span class="hljs-number">17</span>)
        compilerOptions {
            jvmTarget.<span class="hljs-keyword">set</span>(org.jetbrains.kotlin.gradle.dsl.JvmTarget.JVM_17)
        }
    }

    <span class="hljs-comment">// ğŸ”¥ ç­¾åé…ç½®ï¼ˆç§»é™¤å¤šä½™çš„ç±»å‹è½¬æ¢ï¼‰</span>
    signingConfigs {
        create(&amp;#<span class="hljs-number">34</span>;release&amp;#<span class="hljs-number">34</span>;) {
            keyAlias = keystoreProperties[&amp;#<span class="hljs-number">34</span>;keyAlias&amp;#<span class="hljs-number">34</span>;] <span class="hljs-keyword">as</span> String? ?: &amp;#<span class="hljs-number">34</span>;&amp;#<span class="hljs-number">34</span>;
            keyPassword = keystoreProperties[&amp;#<span class="hljs-number">34</span>;keyPassword&amp;#<span class="hljs-number">34</span>;] <span class="hljs-keyword">as</span> String? ?: &amp;#<span class="hljs-number">34</span>;&amp;#<span class="hljs-number">34</span>;
            storeFile = file(keystoreProperties[&amp;#<span class="hljs-number">34</span>;storeFile&amp;#<span class="hljs-number">34</span>;] <span class="hljs-keyword">as</span> String? ?: &amp;#<span class="hljs-number">34</span>;&amp;#<span class="hljs-number">34</span>;)
            storePassword = keystoreProperties[&amp;#<span class="hljs-number">34</span>;storePassword&amp;#<span class="hljs-number">34</span>;] <span class="hljs-keyword">as</span> String? ?: &amp;#<span class="hljs-number">34</span>;&amp;#<span class="hljs-number">34</span>;
        }
    }

    defaultConfig {
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).</span>
        applicationId = &amp;#<span class="hljs-number">34</span>;com.hluck.warm_todo&amp;#<span class="hljs-number">34</span>;
        <span class="hljs-comment">// You can update the following values to match your application needs.</span>
        <span class="hljs-comment">// For more information, see: https://flutter.dev/to/review-gradle-config.</span>
        minSdk = flutter.minSdkVersion
        targetSdk = flutter.targetSdkVersion
        versionCode = flutter.versionCode
        versionName = flutter.versionName
    }

    buildTypes {
        release {
            <span class="hljs-comment">// ğŸ”¥ æ­¥éª¤3ï¼šæ›¿æ¢ä¸º release ç­¾åé…ç½®ï¼ˆåŸæ˜¯ debugï¼‰</span>
            signingConfig = signingConfigs.getByName(&amp;#<span class="hljs-number">34</span>;release&amp;#<span class="hljs-number">34</span>;)
        }
    }
}

flutter {
    source = &amp;#<span class="hljs-number">34</span>;../..&amp;#<span class="hljs-number">34</span>;
}
</code></pre>
<h3 data-id="heading-6">3.æ‰“åŒ…å‘å¸ƒç‰ˆ APK</h3>
<ul>
<li>æ‰§è¡Œ Flutter æ‰“åŒ…å‘½ä»¤å³å¯ç”Ÿæˆç­¾ååçš„ APKï¼š</li>
</ul>
<pre><code class="hljs language-cmd" lang="cmd">flutter build apk --release
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6f5b1aa38ec4061ab237e2731b0449a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg562J5L2g562J5LqG6YKj5LmI5LmF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765964961&amp;x-signature=KiS3qaqDOJqCIrCFwAJNO%2Fr5RMU%3D" alt="1.png" loading="lazy"/></p>
<h3 data-id="heading-7">åˆ›å»ºæ‰“åŒ…è„šæœ¬</h3>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>build_apk.sh</code> æ–‡ä»¶</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># æ‰“åŒ…å¹¶è‡ªå®šä¹‰æ–‡ä»¶å</span>
flutter build apk --release

<span class="hljs-comment"># è¯»å–ç‰ˆæœ¬å·</span>
VERSION=$(grep -o <span class="hljs-string">'version: [0-9.]*'</span> pubspec.yaml | <span class="hljs-built_in">cut</span> -d<span class="hljs-string">' '</span> -f2 | <span class="hljs-built_in">cut</span> -d<span class="hljs-string">'+'</span> -f1)

<span class="hljs-comment"># é‡å‘½å</span>
<span class="hljs-built_in">cp</span> build/app/outputs/flutter-apk/app-release.apk build/app/outputs/flutter-apk/warm_todo_v<span class="hljs-variable">${VERSION}</span>-release.apk

<span class="hljs-comment"># æç¤º</span>
<span class="hljs-built_in">echo</span> &amp;<span class="hljs-comment">#34;âœ… æ‰“åŒ…å®Œæˆï¼æ–‡ä»¶è·¯å¾„ï¼š&amp;#34;</span>
<span class="hljs-built_in">echo</span> &amp;<span class="hljs-comment">#34;build/app/outputs/flutter-apk/warm_todo_v${VERSION}-release.apk&amp;#34;</span>
</code></pre>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-cmd" lang="cmd">sh build_apk.sh
</code></pre>
<p>æ­å–œï¼ä½ å·²ç»å­¦ä¼šäº†Flutteræ‰“åŒ…APk!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[IOSå¼€å‘SwiftUIç›¸å…³å­¦ä¹ è®°å½•]]></title>    <link>https://juejin.cn/post/7582021506189705262</link>    <guid>https://juejin.cn/post/7582021506189705262</guid>    <pubDate>2025-12-10T09:27:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582021506189705262" data-draft-id="7581765536372260873" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="IOSå¼€å‘SwiftUIç›¸å…³å­¦ä¹ è®°å½•"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2025-12-10T09:27:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¦‚æ­¤é£æ™¯"/> <meta itemprop="url" content="https://juejin.cn/user/342703355996926"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            IOSå¼€å‘SwiftUIç›¸å…³å­¦ä¹ è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/342703355996926/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¦‚æ­¤é£æ™¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T09:27:41.000Z" title="Wed Dec 10 2025 09:27:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">UIå¸ƒå±€</h3>
<ul>
<li>Swiftå¼€å‘ä¸ä½¿ç”¨StoryBoardå’Œxibæ¥è¿›è¡ŒUIå¸ƒç½®ï¼Œå±æ€§å’Œäº‹ä»¶ä¹Ÿä¸éœ€è¦è¿çº¿ã€‚æ²¡æœ‰å•ç‹¬çš„UIViewControllerçš„æ¦‚å¿µã€‚æ˜¯ä½¿ç”¨SwiftUIï¼Œå£°æ˜å¼å¸ƒå±€ã€‚</li>
</ul>
<h4 data-id="heading-1">ä¸€ä¸ªæœ€ç®€å•çš„å¸ƒå±€</h4>
<pre><code class="hljs language-css" lang="css">struct ContentView:View {
Â  Â  <span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">body</span>: some View {
Â  Â  Â  Â  Text(&amp;<span class="hljs-selector-id">#34</span>;hello word&amp;<span class="hljs-selector-id">#34</span>;)
Â  Â  }
}
</code></pre>
<ul>
<li><code>ContentView</code>Â æ˜¯ä¸€ä¸ª<strong>ç»“æ„ä½“</strong>ï¼Œå®ƒéµå¾ªäº†Â <code>View</code>Â åè®®ã€‚</li>
<li>åè®®å”¯ä¸€çš„è¦æ±‚æ˜¯æä¾›ä¸€ä¸ªÂ <code>body</code>Â è®¡ç®—å±æ€§ï¼Œå…¶ç±»å‹æ˜¯Â <code>some View</code>ï¼ˆæŸç§è§†å›¾ï¼‰ã€‚</li>
<li><code>body</code>Â æè¿°äº†Â <code>ContentView</code>Â è¿™ä¸ªè§†å›¾å…·ä½“<strong>ç”±ä»€ä¹ˆæ„æˆ</strong>ï¼ˆè¿™é‡Œæ˜¯ä¸€ä¸ªhello wordæ–‡æœ¬ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-2">iOSä¸­çš„è·¯ç”± NavigationView</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// å¯¼èˆªå®¹å™¨</span>
NavigationView {
    <span class="hljs-comment">// æ ¹è§†å›¾</span>
    VStack {
        <span class="hljs-built_in">NavigationLink</span>(&amp;#<span class="hljs-number">34</span>;è·³è½¬åˆ°è¯¦æƒ…é¡µ&amp;#<span class="hljs-number">34</span>;, destination: DetailView())
    }
    <span class="hljs-selector-class">.navigationTitle</span>(&amp;#<span class="hljs-number">34</span>;é¦–é¡µ&amp;#<span class="hljs-number">34</span>;) <span class="hljs-comment">// å¯¼èˆªæ æ ‡é¢˜</span>
    <span class="hljs-selector-class">.navigationBarTitleDisplayMode</span>(.inline) <span class="hljs-comment">// æ ‡é¢˜æ˜¾ç¤ºæ¨¡å¼ï¼ˆlarge/inline/automaticï¼‰</span>
    <span class="hljs-selector-class">.navigationBarItems</span>(trailing: Button(&amp;#<span class="hljs-number">34</span>;è®¾ç½®&amp;#<span class="hljs-number">34</span>;) {
        <span class="hljs-built_in">print</span>(&amp;#<span class="hljs-number">34</span>;ç‚¹å‡»è®¾ç½®&amp;#<span class="hljs-number">34</span>;)
    }) <span class="hljs-comment">// å³ä¾§æŒ‰é’®</span>
}
</code></pre>
<ul>
<li>è¿™é‡Œçš„è·¯ç”±å¾ˆç®€å•ï¼Œåˆ©ç”¨NavigationViewåŒ…å«æ ¹è§†å›¾ã€‚åˆ©ç”¨NavigationLinkï¼Œè¿›è¡Œç‚¹å‡»è·³è½¬åˆ°ç›®æ ‡è§†å›¾ã€‚</li>
</ul>
<h3 data-id="heading-3">è§†å›¾çš„ä¸‰å¤§æ”¯æŸ±</h3>
<h4 data-id="heading-4">å±æ€§</h4>
<ul>
<li><strong>å±æ€§ï¼šå­˜å‚¨è§†å›¾çš„çŠ¶æ€ä¸æ•°æ®</strong></li>
</ul>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">GreetingView</span>: <span class="hljs-title class_">View</span> {
   <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span> <span class="hljs-comment">// ä¼ å…¥çš„å¸¸é‡å±æ€§</span>
   <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isOn <span class="hljs-operator">=</span> <span class="hljs-literal">false</span> <span class="hljs-comment">// ç§æœ‰çš„å¯å˜çŠ¶æ€</span>
   
   <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> { <span class="hljs-operator">...</span> }
}
</code></pre>
<ol>
<li>ç”¨å¸¸è§„å±æ€§ï¼ˆå¦‚Â <code>let name</code>ï¼‰å­˜å‚¨<strong>ä¼ å…¥çš„ã€ä¸å˜çš„æ•°æ®</strong>ã€‚</li>
<li>ç”¨Â <code>@State</code>,Â <code>@Binding</code>,Â <code>@ObservedObject</code>Â ç­‰<strong>å±æ€§åŒ…è£…å™¨</strong>æ¥ç®¡ç†<strong>å¯å˜çŠ¶æ€</strong>ï¼Œè¿™æ˜¯ SwiftUI æ•°æ®é©±åŠ¨çš„æ ¸å¿ƒã€‚</li>
</ol>
<h4 data-id="heading-5">ä¿®é¥°ç¬¦</h4>
<ul>
<li><strong>ä¿®é¥°ç¬¦ï¼šä¿®æ”¹è§†å›¾çš„å¤–è§‚ä¸è¡Œä¸º</strong></li>
</ul>
<pre><code class="hljs language-scss" lang="scss">Text(&amp;#<span class="hljs-number">34</span>;ç¤ºä¾‹&amp;#<span class="hljs-number">34</span>;)
    <span class="hljs-selector-class">.font</span>(.headline) <span class="hljs-comment">// ä¿®æ”¹å­—ä½“</span>
    <span class="hljs-selector-class">.padding</span>()       <span class="hljs-comment">// æ·»åŠ å†…è¾¹è·</span>
    <span class="hljs-selector-class">.background</span>(.yellow) <span class="hljs-comment">// è®¾ç½®èƒŒæ™¯</span>
    <span class="hljs-selector-class">.onTapGesture</span> {  <span class="hljs-comment">// æ·»åŠ äº¤äº’æ‰‹åŠ¿</span>
        <span class="hljs-built_in">print</span>(&amp;#<span class="hljs-number">34</span>;è¢«ç‚¹å‡»&amp;#<span class="hljs-number">34</span>;)
    }
</code></pre>
<ol>
<li><strong>é“¾å¼è°ƒç”¨</strong>ï¼Œé¡ºåºæœ‰æ—¶ä¼šå½±å“æ•ˆæœã€‚</li>
<li>æ¯ä¸ªä¿®é¥°ç¬¦ï¼ˆå¦‚Â <code>.font</code>,Â <code>.padding</code>ï¼‰é€šå¸¸ä¼šè¿”å›ä¸€ä¸ª<strong>æ–°çš„è§†å›¾</strong>ï¼Œè€Œéä¿®æ”¹åŸè§†å›¾ã€‚</li>
</ol>
<h4 data-id="heading-6">è§†å›¾æ„å»º</h4>
<ul>
<li><strong>è§†å›¾æ„å»ºå™¨ï¼šç»„åˆå¤šä¸ªè§†å›¾</strong></li>
</ul>
<p><code>body</code>Â ä¸­ä½¿ç”¨ç‰¹å®šçš„è¯­æ³•ï¼ˆç”±Â <code>@ViewBuilder</code>Â é©±åŠ¨ï¼‰æ¥ç»„åˆè§†å›¾ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">body</span>: some View {
    VStack { <span class="hljs-comment">// å‚ç›´å †å å¤šä¸ªå­è§†å›¾</span>
        <span class="hljs-built_in">Image</span>(systemName: &amp;#<span class="hljs-number">34</span>;star&amp;#<span class="hljs-number">34</span>;)
        Text(&amp;#<span class="hljs-number">34</span>;æ ‡é¢˜&amp;#<span class="hljs-number">34</span>;)
        HStack { <span class="hljs-comment">// å†…åµŒä¸€ä¸ªæ°´å¹³å †å </span>
            Text(&amp;#<span class="hljs-number">34</span>;å·¦&amp;#<span class="hljs-number">34</span>;)
            Text(&amp;#<span class="hljs-number">34</span>;å³&amp;#<span class="hljs-number">34</span>;)
        }
    }
}
</code></pre>
<ol>
<li>å¸¸ç”¨çš„å®¹å™¨è§†å›¾ï¼š<code>VStack</code>ï¼ˆå‚ç›´ï¼‰ã€<code>HStack</code>ï¼ˆæ°´å¹³ï¼‰ã€<code>ZStack</code>ï¼ˆé‡å ï¼‰ã€<code>List</code>ï¼ˆåˆ—è¡¨ï¼‰ã€<code>Group</code>ï¼ˆé€»è¾‘åˆ†ç»„ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-7">SwiftUIäº¤äº’äº‹ä»¶</h3>
<p>SwiftUIä¸­å¤„ç†ç‚¹å‡»äº‹ä»¶ä¸»è¦æœ‰<strong>Buttonæ§ä»¶</strong>å’Œ<strong>æ‰‹åŠ¿ä¿®é¥°ç¬¦</strong>ä¸¤ç§æ ¸å¿ƒæ–¹å¼ã€‚ä¸ºå¸®åŠ©ä½ å¿«é€Ÿé€‰æ‹©ï¼Œä¸‹è¡¨æ±‡æ€»äº†å®ƒä»¬çš„ç‰¹ç‚¹å’Œå…¸å‹ç”¨é€”ï¼š</p>





























<table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">æ ¸å¿ƒç»„ä»¶/ä¿®é¥°ç¬¦</th><th align="left">ä¸»è¦ç‰¹ç‚¹</th><th align="left">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong>æ§ä»¶è§¦å‘</strong></td><td align="left"><code>Button</code></td><td align="left"><strong>è¯­ä¹‰åŒ–æ§ä»¶</strong>ï¼Œå†…ç½®äº¤äº’æ ·å¼ï¼ˆå¦‚æŒ‰å‹æ•ˆæœï¼‰</td><td align="left">æŒ‰é’®ã€æ˜ç¡®çš„ç”¨æˆ·æ“ä½œ</td></tr><tr><td align="left"><strong>æ‰‹åŠ¿è¯†åˆ«</strong></td><td align="left"><code>onTapGesture</code></td><td align="left"><strong>é€šç”¨ç‚¹å‡»æ£€æµ‹</strong>ï¼Œå¯åŠ åœ¨ä»»ä½•è§†å›¾ä¸Š</td><td align="left">è‡ªå®šä¹‰è§†å›¾ã€å›¾ç‰‡ã€æ–‡æœ¬ç­‰éæŒ‰é’®å…ƒç´ çš„ç‚¹å‡»</td></tr><tr><td align="left"><strong>æ‰‹åŠ¿è¯†åˆ«</strong></td><td align="left"><code>TapGesture</code></td><td align="left"><strong>æ›´çµæ´»çš„æ‰‹åŠ¿é…ç½®</strong>ï¼Œå¯ç»„åˆä½¿ç”¨</td><td align="left">éœ€è¦ä¸å…¶å®ƒæ‰‹åŠ¿ï¼ˆå¦‚é•¿æŒ‰ï¼‰é…åˆçš„åœºæ™¯</td></tr></tbody></table>
<h4 data-id="heading-8">æ–¹æ³•ä¸€ï¼šä½¿ç”¨Buttonæ§ä»¶</h4>
<p><code>Button</code> æ˜¯ç”¨äºè§¦å‘æ“ä½œçš„æ ‡å‡†æ§ä»¶ï¼Œä½¿ç”¨ <code>action</code> é—­åŒ…æ¥å¤„ç†ç‚¹å‡»äº‹ä»¶ã€‚ä½ å¯ä»¥æ–¹ä¾¿åœ°è‡ªå®šä¹‰å…¶å¤–è§‚ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Button</span>(action: {
    <span class="hljs-comment">// ç‚¹å‡»åæ‰§è¡Œçš„æ“ä½œ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;æŒ‰é’®è¢«ç‚¹å‡»<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
}) {
    <span class="hljs-comment">// å®šä¹‰æŒ‰é’®å¤–è§‚</span>
    <span class="hljs-type">Text</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;ç‚¹å‡»æˆ‘<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
        .padding()
        .background(<span class="hljs-type">Color</span>.blue)
        .foregroundColor(.white)
        .cornerRadius(<span class="hljs-number">10</span>)
}
</code></pre>
<p>å¦‚æœä½ æƒ³<strong>ä»¥ç¼–ç¨‹æ–¹å¼è§¦å‘æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶</strong>ï¼ˆä¾‹å¦‚åœ¨ä¸€å®šæ—¶é—´åè‡ªåŠ¨ç‚¹å‡»ï¼‰ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨è¯¥æŒ‰é’®<code>action</code>é—­åŒ…ä¸­çš„é€»è¾‘ã€‚</p>
<h4 data-id="heading-9">æ–¹æ³•äºŒï¼šä½¿ç”¨æ‰‹åŠ¿ä¿®é¥°ç¬¦</h4>
<p><strong>1. ä½¿ç”¨ <code>onTapGesture</code> ä¿®é¥°ç¬¦</strong>
è¿™æ˜¯ä¸ºä»»ä½•è§†å›¾ï¼ˆå¦‚<code>Text</code>ã€<code>Image</code>ï¼‰æ·»åŠ ç‚¹å‡»ç›‘å¬æœ€å¿«æ·çš„æ–¹å¼ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Text</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;ç‚¹å‡»è¿™æ®µæ–‡å­—<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
    .onTapGesture {
        <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;æ–‡å­—è¢«ç‚¹å‡»<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
    }
</code></pre>
<p><strong>2. ä½¿ç”¨ <code>TapGesture</code> æ‰‹åŠ¿ç±»å‹</strong>
å®ƒæ¯”<code>onTapGesture</code>æ›´çµæ´»ï¼Œå…è®¸ä½ ä½¿ç”¨ <code>count</code> å‚æ•°æ¥ç›‘å¬åŒå‡»æˆ–å¤šå‡»äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Text</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;åŒå‡»æˆ‘<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
    .gesture(
        <span class="hljs-type">TapGesture</span>(count: <span class="hljs-number">2</span>)
            .onEnded { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;æ£€æµ‹åˆ°åŒå‡»<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
            }
    )
</code></pre>
<h4 data-id="heading-10">æ–¹æ³•ä¸‰ï¼š</h4>
<ul>
<li>ç”¨NavigationLinkåŒ…è£…çš„ç»„ä»¶ï¼Œå¯ä»¥ç›´æ¥è·³è½¬è‡³ç›®æ ‡é¡µã€‚</li>
<li>ç”¨LinkåŒ…è£…çš„ç»„ä»¶ï¼Œå¯ç›´æ¥è·³è½¬è‡³ç›®æ ‡ç½‘å€ã€‚</li>
</ul>
<h4 data-id="heading-11">è¿›é˜¶æŠ€å·§ä¸å¸¸è§é—®é¢˜</h4>
<p>æŒæ¡äº†åŸºæœ¬ç”¨æ³•åï¼Œäº†è§£ä»¥ä¸‹æŠ€å·§èƒ½å¸®ä½ è§£å†³æ›´å¤æ‚çš„éœ€æ±‚ï¼š</p>
<ul>
<li><strong>æ§åˆ¶æŒ‰é’®ç‚¹å‡»é¢‘ç‡</strong>ï¼šé€šè¿‡<code>disabled(_:)</code>ä¿®é¥°ç¬¦å’ŒçŠ¶æ€å˜é‡ï¼Œå¯ä»¥é˜²æ­¢æŒ‰é’®åœ¨çŸ­æ—¶é—´å†…è¢«é‡å¤æäº¤ã€‚</li>
<li><strong>åœ¨åŠ¨æ€åˆ—è¡¨ï¼ˆForEachï¼‰ä¸­å¤„ç†ç‚¹å‡»</strong>ï¼šå…³é”®åœ¨äºç¡®ä¿æ•°æ®æ¨¡å‹ï¼ˆå¦‚<code>@State</code>æ•°ç»„ï¼‰æ˜¯å¯å˜çš„ï¼Œè¿™æ ·ç‚¹å‡»åæ›´æ–°æ•°æ®ï¼Œè§†å›¾æ‰ä¼šéšä¹‹åˆ·æ–°ã€‚</li>
<li><strong>å¤„ç†æ‰‹åŠ¿å†²çª</strong>ï¼šå½“å¤šä¸ªæ‰‹åŠ¿é‡å æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>highPriorityGesture()</code> æˆ– <code>simultaneousGesture()</code> æ¥ç®¡ç†ä¼˜å…ˆçº§æˆ–å…è®¸åŒæ—¶è¯†åˆ«ã€‚</li>
<li><strong>é«˜çº§æ‰‹åŠ¿</strong>ï¼šé™¤äº†ç‚¹å‡»ï¼ŒSwiftUIè¿˜å†…ç½®äº†<code>LongPressGesture</code>ï¼ˆé•¿æŒ‰ï¼‰ã€<code>DragGesture</code>ï¼ˆæ‹–æ‹½ï¼‰ç­‰ï¼Œå¯é€šè¿‡<code>.gesture()</code>ä¿®é¥°ç¬¦ä½¿ç”¨ã€‚</li>
</ul>
<h4 data-id="heading-12">å®é™…å¼€å‘æ³¨æ„äº‹é¡¹</h4>
<p>åœ¨åº”ç”¨ä¸­å¤„ç†ç‚¹å‡»äº‹ä»¶æ—¶ï¼Œè¿˜éœ€è¦ç•™æ„ä¸¤ç‚¹ï¼š</p>
<ul>
<li><strong>è§†å›¾å±‚æ¬¡å½±å“</strong>ï¼šå¦‚æœçˆ¶è§†å›¾æœ‰æ‰‹åŠ¿ï¼Œå¯èƒ½ä¼šè¢«å­è§†å›¾æ‹¦æˆªã€‚ç¡®ä¿æ‰‹åŠ¿æ·»åŠ åœ¨äº†æ­£ç¡®çš„è§†å›¾å±‚çº§ä¸Šã€‚</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šç‚¹å‡»æ“ä½œå¸¸ä¼´éšç•Œé¢å˜åŒ–ï¼ˆå¦‚é¢œè‰²ã€æ˜¾ç¤ºå†…å®¹ï¼‰ã€‚åŠ¡å¿…ä½¿ç”¨<code>@State</code>ã€<code>@ObservedObject</code>ç­‰å°†ç›¸å…³æ•°æ®å£°æ˜ä¸ºå“åº”å¼ï¼Œè¿™æ ·è§†å›¾æ‰ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</li>
</ul>
<h3 data-id="heading-13">Link æ§ä»¶è§£æ</h3>
<h3 data-id="heading-14">Link æ§ä»¶è§£æ</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Link</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;lil.software<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;, destination: <span class="hljs-type">URL</span>(string: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;https:<span class="hljs-comment">//lil.software&amp;#34;)!)</span>
</code></pre>
<ul>
<li><strong>ç¬¬ä¸€ä¸ªå‚æ•°</strong> <code>&amp;#34;lil.software&amp;#34;</code>ï¼šæ˜¯ç”¨æˆ·åœ¨ç•Œé¢ä¸Šçœ‹åˆ°çš„å¯ç‚¹å‡»æ–‡æœ¬ã€‚</li>
<li><strong>ç¬¬äºŒä¸ªå‚æ•°</strong> <code>destination</code>ï¼šæŒ‡å®šç‚¹å‡»åè¦è·³è½¬çš„ç›®æ ‡ç½‘å€ï¼ˆURLï¼‰ã€‚è¿™é‡Œæ˜¯ <code>https://lil.software</code>ã€‚</li>
</ul>
<p>ç”¨æˆ·ç‚¹å‡»è“è‰²ã€å¸¦ä¸‹åˆ’çº¿çš„ â€œlil.softwareâ€ æ–‡å­—åï¼Œç³»ç»Ÿä¼š<strong>è‡ªåŠ¨æ‰“å¼€ Safari æµè§ˆå™¨</strong>å¹¶è·³è½¬åˆ°è¿™ä¸ªç½‘ç«™ã€‚</p>
<h3 data-id="heading-15">Link ä¸ Button çš„æ ¸å¿ƒåŒºåˆ«</h3>
<p>è™½ç„¶çœ‹èµ·æ¥åƒæŒ‰é’®ï¼Œä½† <code>Link</code> å’Œ <code>Button</code> æœ‰æ˜ç¡®åˆ†å·¥ï¼š</p>























<table><thead><tr><th align="left">æ§ä»¶</th><th align="left">æ ¸å¿ƒç”¨é€”</th><th align="left">ç³»ç»Ÿè¡Œä¸º</th><th align="left">é»˜è®¤æ ·å¼</th></tr></thead><tbody><tr><td align="left"><strong><code>Link</code></strong></td><td align="left"><strong>ä¸“ç”¨äºæ‰“å¼€æœ¬åœ°/ç½‘ç»œURL</strong></td><td align="left">è·³è½¬ Safari æˆ–ç›¸åº” App</td><td align="left">è“è‰²æ–‡å­—ï¼Œå¸¦ä¸‹åˆ’çº¿</td></tr><tr><td align="left"><strong><code>Button</code></strong></td><td align="left"><strong>è§¦å‘åº”ç”¨å†…ä»»æ„æ“ä½œ</strong></td><td align="left">æ‰§è¡Œä½ å®šä¹‰çš„ä»£ç ï¼ˆå¦‚å¼¹çª—ã€å¯¼èˆªï¼‰</td><td align="left">æ— é»˜è®¤æ ·å¼ï¼Œéœ€å®Œå…¨è‡ªå®šä¹‰</td></tr></tbody></table>
<p><strong>ç®€å•æ¥è¯´</strong>ï¼š<code>Link</code> = ä¸“ç”¨äºâ€œè·³è½¬å‡ºå»â€çš„å¿«æ·å·¥å…·ï¼›<code>Button</code> = å¤„ç†â€œå†…éƒ¨äº‹åŠ¡â€çš„é€šç”¨è§¦å‘å™¨ã€‚</p>
<h3 data-id="heading-16">å¦‚ä½•è‡ªå®šä¹‰ Link æ ·å¼</h3>
<p>å’Œ <code>Button</code> ä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ä¿®é¥°ç¬¦æ¥æ”¹å˜ <code>Link</code> çš„å¤–è§‚ï¼Œè®©å®ƒæ›´ç¬¦åˆä½ çš„åº”ç”¨è®¾è®¡ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Link</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;è®¿é—®å®˜ç½‘<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;, destination: <span class="hljs-type">URL</span>(string: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;https:<span class="hljs-comment">//www.example.com&amp;#34;)!)</span>
    .font(.headline)
    .foregroundColor(.white)
    .padding()
    .background(<span class="hljs-type">Color</span>.orange)
    .cornerRadius(<span class="hljs-number">8</span>)
<span class="hljs-comment">// è¿™æ ·å®ƒå°±çœ‹èµ·æ¥åƒä¸€ä¸ªåœ†è§’æ©™è‰²æŒ‰é’®ï¼Œä½†ç‚¹å‡»åŠŸèƒ½ä»æ˜¯æ‰“å¼€ç½‘é¡µ</span>
</code></pre>
<h3 data-id="heading-17">ä½¿ç”¨æç¤º</h3>
<ol>
<li><strong>ç¡®ä¿ URL æœ‰æ•ˆ</strong>ï¼šå¦‚æœæä¾›çš„ <code>URL(string:)</code> åˆå§‹åŒ–å¤±è´¥ï¼ˆæ¯”å¦‚é“¾æ¥æ ¼å¼é”™è¯¯ï¼‰ï¼Œ<code>Link</code> åœ¨ç‚¹å‡»æ—¶å¯èƒ½ä¸ä¼šæœ‰ä»»ä½•ååº”ã€‚</li>
<li><strong>å¹³å°å·®å¼‚</strong>ï¼šåœ¨ iOS/iPadOS ä¸Šç‚¹å‡»ä¼šè·³è½¬è‡³ Safariï¼›åœ¨ macOS ä¸Šä¼šä½¿ç”¨é»˜è®¤æµè§ˆå™¨æ‰“å¼€ã€‚</li>
</ol>
<h3 data-id="heading-18">çŠ¶æ€ç®¡ç†</h3>
<p>ä¸€ä¸ªæœ€å°çš„çŠ¶æ€ç®¡ç†å®ä¾‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">import SwiftUI

struct CounterView: View {
    <span class="hljs-comment">// 1. ä½¿ç”¨ @State åˆ›å»ºå¯è§‚å¯Ÿçš„çŠ¶æ€</span>
    <span class="hljs-keyword">@State</span> private var <span class="hljs-attribute">count</span>: Int = <span class="hljs-number">0</span>
    
    var <span class="hljs-attribute">body</span>: some View {
        <span class="hljs-built_in">VStack</span>(spacing: <span class="hljs-number">20</span>) {
            <span class="hljs-comment">// 2. æ˜¾ç¤ºçŠ¶æ€å€¼</span>
            Text(&amp;#<span class="hljs-number">34</span>;ç‚¹å‡»æ¬¡æ•°: \(count)&amp;<span class="hljs-selector-id">#34</span>;)
                <span class="hljs-selector-class">.font</span>(.largeTitle)
            
            <span class="hljs-comment">// 3. æŒ‰é’®ä¿®æ”¹çŠ¶æ€å€¼</span>
            <span class="hljs-selector-tag">Button</span>(&amp;#<span class="hljs-number">34</span>;ç‚¹æˆ‘å¢åŠ &amp;#<span class="hljs-number">34</span>;) {
                <span class="hljs-comment">// ä¿®æ”¹çŠ¶æ€ï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°</span>
                count += <span class="hljs-number">1</span>
            }
            <span class="hljs-selector-class">.padding</span>()
            <span class="hljs-selector-class">.background</span>(Color.blue)
            <span class="hljs-selector-class">.foregroundColor</span>(.white)
            <span class="hljs-selector-class">.cornerRadius</span>(<span class="hljs-number">10</span>)
            
            <span class="hljs-comment">// 4. å¦ä¸€ä¸ªæŒ‰é’®é‡ç½®çŠ¶æ€</span>
            <span class="hljs-selector-tag">Button</span>(&amp;#<span class="hljs-number">34</span>;é‡ç½®&amp;#<span class="hljs-number">34</span>;) {
                count = <span class="hljs-number">0</span>
            }
            <span class="hljs-selector-class">.foregroundColor</span>(.red)
        }
        <span class="hljs-selector-class">.padding</span>()
    }
}

<span class="hljs-comment">// é¢„è§ˆ</span>
<span class="hljs-selector-id">#Preview</span> {
    <span class="hljs-built_in">CounterView</span>()
}
</code></pre>
<h3 data-id="heading-19">SwiftåŠ¨ç”»ç›¸å…³</h3>
<p>SwiftUI çš„åŠ¨ç”»æ˜¯<strong>å£°æ˜å¼</strong>ä¸”<strong>çŠ¶æ€é©±åŠ¨</strong>çš„ã€‚ä¸ç›´æ¥æè¿°åŠ¨ç”»è¿‡ç¨‹ä¸åŒï¼Œä½ åªéœ€å£°æ˜è§†å›¾çš„æœ€ç»ˆçŠ¶æ€ï¼ŒSwiftUI ä¼šè‡ªåŠ¨è®¡ç®—å¹¶æ¸²æŸ“å‡ºå¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœã€‚</p>
<h4 data-id="heading-20">æ ¸å¿ƒæ¦‚å¿µï¼šéšå¼åŠ¨ç”» vs. æ˜¾å¼åŠ¨ç”»</h4>























<table><thead><tr><th align="left">ç±»å‹</th><th align="left">ä½¿ç”¨æ–¹æ³•</th><th align="left">ç‰¹ç‚¹</th><th align="left">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong>éšå¼åŠ¨ç”»</strong></td><td align="left"><code>.animation(_:)</code> ä¿®é¥°ç¬¦</td><td align="left"><strong>è‡ªåŠ¨ä¸ºæŒ‡å®šè§†å›¾çš„æ‰€æœ‰åˆæ ¼å˜åŒ–æ·»åŠ åŠ¨ç”»</strong>ã€‚</td><td align="left">è§†å›¾çš„ç®€å•å±æ€§å˜åŒ–ï¼ˆå¦‚ç¼©æ”¾ã€é¢œè‰²ï¼‰ã€‚</td></tr><tr><td align="left"><strong>æ˜¾å¼åŠ¨ç”»</strong></td><td align="left"><code>withAnimation { }</code> é—­åŒ…</td><td align="left"><strong>æ˜ç¡®åœ°åŒ…è£¹è§¦å‘çŠ¶æ€å˜åŒ–çš„ä»£ç </strong>ï¼Œä½œç”¨èŒƒå›´æ›´ç²¾ç¡®ã€‚</td><td align="left">å“åº”äº‹ä»¶ï¼ˆå¦‚æŒ‰é’®ç‚¹å‡»ï¼‰ï¼Œéœ€è¦åŒæ­¥åŠ¨ç”»å¤šä¸ªè§†å›¾ã€‚</td></tr></tbody></table>
<h4 data-id="heading-21">éšå¼åŠ¨ç”»ç¤ºä¾‹</h4>
<p>åœ¨è§†å›¾ä¸Šæ·»åŠ  <code>.animation</code> ä¿®é¥°ç¬¦ï¼Œè¯¥è§†å›¾æ‰€æœ‰å¯åŠ¨ç”»çš„å˜åŒ–éƒ½ä¼šç”Ÿæ•ˆã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ImplicitAnimationView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isScaled <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> angle: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>

    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span>(spacing: <span class="hljs-number">30</span>) {
            <span class="hljs-comment">// 1. ç¼©æ”¾åŠ¨ç”»</span>
            <span class="hljs-type">Circle</span>()
                .fill(isScaled <span class="hljs-operator">?</span> .orange : .blue)
                .frame(width: isScaled <span class="hljs-operator">?</span> <span class="hljs-number">150</span> : <span class="hljs-number">100</span>, 
                       height: isScaled <span class="hljs-operator">?</span> <span class="hljs-number">150</span> : <span class="hljs-number">100</span>)
                .scaleEffect(isScaled <span class="hljs-operator">?</span> <span class="hljs-number">1.5</span> : <span class="hljs-number">1.0</span>)
                .animation(.spring(response: <span class="hljs-number">0.3</span>, dampingFraction: <span class="hljs-number">0.6</span>), 
                           value: isScaled) <span class="hljs-comment">// æŒ‡å®šç›‘å¬ isScaled å˜åŒ–</span>
            
            <span class="hljs-comment">// 2. æ—‹è½¬åŠ¨ç”»</span>
            <span class="hljs-type">Rectangle</span>()
                .fill(.green)
                .frame(width: <span class="hljs-number">100</span>, height: <span class="hljs-number">100</span>)
                .rotationEffect(.degrees(angle))
                .animation(.linear(duration: <span class="hljs-number">2</span>), value: angle) <span class="hljs-comment">// çº¿æ€§æ—‹è½¬</span>
            
            <span class="hljs-comment">// 3. æ§åˆ¶æŒ‰é’®</span>
            <span class="hljs-type">Button</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;è§¦å‘åŠ¨ç”»<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;) {
                <span class="hljs-comment">// æ”¹å˜çŠ¶æ€ï¼Œè§†å›¾ä¼šè‡ªåŠ¨äº§ç”ŸåŠ¨ç”»</span>
                isScaled.toggle()
                angle <span class="hljs-operator">+=</span> <span class="hljs-number">180</span>
            }
            .padding()
            .background(<span class="hljs-type">Color</span>.blue)
            .foregroundColor(.white)
            .cornerRadius(<span class="hljs-number">10</span>)
        }
        .padding()
    }
}
</code></pre>
<h4 data-id="heading-22">æ˜¾å¼åŠ¨ç”»ç¤ºä¾‹</h4>
<p>ä½¿ç”¨ <code>withAnimation</code> å‡½æ•°åŒ…è£¹çŠ¶æ€å˜åŒ–çš„ä»£ç ï¼Œå¯ä»¥æ›´ç²¾ç¡®åœ°æ§åˆ¶ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ExplicitAnimationView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isExpanded <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> offsetX: <span class="hljs-type">CGFloat</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span>(spacing: <span class="hljs-number">40</span>) {
            <span class="hljs-comment">// 1. å¤šä¸ªè§†å›¾åŒæ­¥åŠ¨ç”»</span>
            <span class="hljs-type">RoundedRectangle</span>(cornerRadius: isExpanded <span class="hljs-operator">?</span> <span class="hljs-number">50</span> : <span class="hljs-number">10</span>)
                .fill(isExpanded <span class="hljs-operator">?</span> .purple : .pink)
                .frame(width: isExpanded <span class="hljs-operator">?</span> <span class="hljs-number">300</span> : <span class="hljs-number">100</span>, 
                       height: isExpanded <span class="hljs-operator">?</span> <span class="hljs-number">300</span> : <span class="hljs-number">100</span>)
                .offset(x: offsetX)
                .animation(.easeInOut(duration: <span class="hljs-number">0.6</span>), value: isExpanded)
            
            <span class="hljs-type">HStack</span>(spacing: <span class="hljs-number">20</span>) {
                <span class="hljs-type">Button</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;å±•å¼€å¹¶å³ç§»<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;) {
                    <span class="hljs-comment">// ç”¨ä¸€ä¸ªåŠ¨ç”»é—­åŒ…æ§åˆ¶ä¸¤ä¸ªçŠ¶æ€å˜åŒ–</span>
                    withAnimation(.spring(dampingFraction: <span class="hljs-number">0.6</span>)) {
                        isExpanded <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
                        offsetX <span class="hljs-operator">=</span> <span class="hljs-number">100</span>
                    }
                }
                
                <span class="hljs-type">Button</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;é‡ç½®<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;) {
                    <span class="hljs-comment">// è¿™ä¸ªé‡ç½®æ“ä½œä¹Ÿæœ‰åŠ¨ç”»</span>
                    withAnimation(.easeOut(duration: <span class="hljs-number">0.8</span>)) {
                        isExpanded <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
                        offsetX <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
                    }
                }
                .tint(.red)
            }
            .buttonStyle(.borderedProminent)
        }
        .padding()
    }
}
</code></pre>
<h4 data-id="heading-23">è½¬åœºåŠ¨ç”»</h4>
<p>å½“è§†å›¾æ’å…¥æˆ–ç§»é™¤è§†å›¾å±‚æ¬¡æ—¶ï¼Œä½¿ç”¨ <code>.transition</code> æŒ‡å®šåŠ¨ç”»æ•ˆæœã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TransitionView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> showMessage <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-type">Button</span>(showMessage <span class="hljs-operator">?</span> <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;éšè—æ¶ˆæ¯<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>; : <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;æ˜¾ç¤ºæ¶ˆæ¯<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;) {
                withAnimation(.easeInOut(duration: <span class="hljs-number">0.8</span>)) {
                    showMessage.toggle()
                }
            }
            .padding()
            
            <span class="hljs-keyword">if</span> showMessage {
                <span class="hljs-type">Text</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;ä½ å¥½ï¼Œ<span class="hljs-type">SwiftUIï¼</span><span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
                    .font(.title)
                    .padding()
                    .background(<span class="hljs-type">Color</span>.yellow)
                    .cornerRadius(<span class="hljs-number">10</span>)
                    .transition(
                        .asymmetric( <span class="hljs-comment">// è¿›å…¥å’Œé€€å‡ºä½¿ç”¨ä¸åŒåŠ¨ç”»</span>
                            insertion: .scale.combined(with: .opacity), <span class="hljs-comment">// è¿›å…¥ï¼šç¼©æ”¾+æ·¡å…¥</span>
                            removal: .move(edge: .leading).combined(with: .opacity) <span class="hljs-comment">// é€€å‡ºï¼šå‘å·¦æ»‘å‡º+æ·¡å‡º</span>
                        )
                    )
            }
            
            <span class="hljs-type">Spacer</span>()
        }
        .padding()
    }
}
</code></pre>
<h4 data-id="heading-24">åŠ¨ç”»æ›²çº¿ä¸æ—¶é•¿é¢„è®¾</h4>
<p>SwiftUI æä¾›å¤šç§å†…ç½®åŠ¨ç”»æ›²çº¿ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">VStack</span>(spacing: <span class="hljs-number">20</span>) {
    <span class="hljs-comment">// 1. åŸºç¡€ç¼“åŠ¨æ›²çº¿</span>
    <span class="hljs-type">Circle</span>()
        .animation(.easeIn(duration: <span class="hljs-number">1</span>), value: isAnimated) <span class="hljs-comment">// å…ˆæ…¢åå¿«</span>
    <span class="hljs-type">Circle</span>()
        .animation(.easeOut(duration: <span class="hljs-number">1</span>), value: isAnimated) <span class="hljs-comment">// å…ˆå¿«åæ…¢</span>
    <span class="hljs-type">Circle</span>()
        .animation(.easeInOut(duration: <span class="hljs-number">1</span>), value: isAnimated) <span class="hljs-comment">// æ…¢-å¿«-æ…¢</span>
    
    <span class="hljs-comment">// 2. å¼¹æ€§åŠ¨ç”»</span>
    <span class="hljs-type">Circle</span>()
        .animation(.spring(
            response: <span class="hljs-number">0.5</span>,    <span class="hljs-comment">// åŠ¨ç”»æŒç»­æ—¶é—´ (seconds)</span>
            dampingFraction: <span class="hljs-number">0.6</span>, <span class="hljs-comment">// é˜»å°¼ï¼šè¶Šå°å¼¹åŠ›è¶Šå¼º (0-1)</span>
            blendDuration: <span class="hljs-number">0.25</span> <span class="hljs-comment">// æ··åˆæ—¶é—´</span>
        ), value: isAnimated)
    
    <span class="hljs-comment">// 3. é‡å¤åŠ¨ç”»</span>
    <span class="hljs-type">Circle</span>()
        .animation(
            .linear(duration: <span class="hljs-number">1</span>)
            .repeatForever(autoreverses: <span class="hljs-literal">true</span>), <span class="hljs-comment">// æ°¸ä¹…é‡å¤ä¸”è‡ªåŠ¨åå‘</span>
            value: isAnimated
        )
    
    <span class="hljs-comment">// 4. å»¶è¿ŸåŠ¨ç”»</span>
    <span class="hljs-type">Circle</span>()
        .animation(
            .easeInOut(duration: <span class="hljs-number">1</span>)
            .delay(<span class="hljs-number">0.5</span>), <span class="hljs-comment">// å»¶è¿Ÿ 0.5 ç§’æ‰§è¡Œ</span>
            value: isAnimated
        )
}
</code></pre>
<h3 data-id="heading-25">å®é™…åº”ç”¨ï¼šåŠ è½½åŠ¨ç”»</h3>
<p>ä¸€ä¸ªå®ç”¨çš„åŠ è½½æŒ‡ç¤ºå™¨åŠ¨ç”»ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoadingAnimationView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> progress: <span class="hljs-type">CGFloat</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>
    
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span>(spacing: <span class="hljs-number">40</span>) {
            <span class="hljs-comment">// 1. æ—‹è½¬åŠ è½½æŒ‡ç¤ºå™¨</span>
            <span class="hljs-type">Circle</span>()
                .trim(from: <span class="hljs-number">0</span>, to: <span class="hljs-number">0.7</span>) <span class="hljs-comment">// å‰ªè£å‡ºç¼ºå£</span>
                .stroke(<span class="hljs-type">Color</span>.blue, lineWidth: <span class="hljs-number">5</span>)
                .frame(width: <span class="hljs-number">50</span>, height: <span class="hljs-number">50</span>)
                .rotationEffect(<span class="hljs-type">Angle</span>(degrees: isLoading <span class="hljs-operator">?</span> <span class="hljs-number">360</span> : <span class="hljs-number">0</span>))
                .animation(
                    .linear(duration: <span class="hljs-number">1</span>)
                    .repeatForever(autoreverses: <span class="hljs-literal">false</span>),
                    value: isLoading
                )
            
            <span class="hljs-comment">// 2. è¿›åº¦æ¡åŠ¨ç”»</span>
            <span class="hljs-type">VStack</span> {
                <span class="hljs-type">GeometryReader</span> { geometry <span class="hljs-keyword">in</span>
                    <span class="hljs-type">ZStack</span>(alignment: .leading) {
                        <span class="hljs-type">Rectangle</span>()
                            .frame(width: geometry.size.width, height: <span class="hljs-number">8</span>)
                            .opacity(<span class="hljs-number">0.3</span>)
                            .foregroundColor(.gray)
                        
                        <span class="hljs-type">Rectangle</span>()
                            .frame(
                                width: <span class="hljs-built_in">min</span>(progress <span class="hljs-operator">*</span> geometry.size.width, 
                                         geometry.size.width),
                                height: <span class="hljs-number">8</span>
                            )
                            .foregroundColor(.blue)
                            .animation(.linear(duration: <span class="hljs-number">0.5</span>), value: progress)
                    }
                    .cornerRadius(<span class="hljs-number">4</span>)
                }
                .frame(height: <span class="hljs-number">20</span>)
                
                <span class="hljs-type">Text</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;\(<span class="hljs-type">Int</span>(progress <span class="hljs-operator">*</span> <span class="hljs-number">100</span>))<span class="hljs-operator">%&amp;</span>#<span class="hljs-number">34</span>;)
                    .font(.caption)
            }
            .frame(width: <span class="hljs-number">200</span>)
            
            <span class="hljs-comment">// 3. æ§åˆ¶æŒ‰é’®</span>
            <span class="hljs-type">Button</span>(isLoading <span class="hljs-operator">?</span> <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;åœæ­¢åŠ è½½<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>; : <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;å¼€å§‹åŠ è½½<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;) {
                <span class="hljs-keyword">if</span> isLoading {
                    stopLoading()
                } <span class="hljs-keyword">else</span> {
                    startLoading()
                }
            }
            .buttonStyle(.borderedProminent)
        }
        .onAppear {
            startLoading()
        }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">startLoading</span>() {
        isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
        progress <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
        <span class="hljs-comment">// æ¨¡æ‹Ÿè¿›åº¦æ›´æ–°</span>
        <span class="hljs-type">Timer</span>.scheduledTimer(withTimeInterval: <span class="hljs-number">0.1</span>, repeats: <span class="hljs-literal">true</span>) { timer <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">if</span> progress <span class="hljs-operator">&gt;=</span> <span class="hljs-number">1.0</span> {
                timer.invalidate()
                isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
            } <span class="hljs-keyword">else</span> {
                withAnimation(.linear(duration: <span class="hljs-number">0.1</span>)) {
                    progress <span class="hljs-operator">+=</span> <span class="hljs-number">0.05</span>
                }
            }
        }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">stopLoading</span>() {
        isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    }
}
</code></pre>
<h4 data-id="heading-26">åŠ¨ç”»æœ€ä½³å®è·µ</h4>
<ol>
<li><strong>æ˜ç¡®åŠ¨ç”»ä¾èµ–å€¼</strong>ï¼šä½¿ç”¨ <code>.animation(.easeInOut, value: someState)</code> æŒ‡å®šåŠ¨ç”»ç›‘å¬çš„çŠ¶æ€ï¼Œé¿å…ä¸å¿…è¦çš„åŠ¨ç”»ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜å…ˆ</strong>ï¼šä¼˜å…ˆåŠ¨ç”»ç®€å•å±æ€§ï¼ˆä½ç½®ã€å¤§å°ã€é€æ˜åº¦ã€æ—‹è½¬ï¼‰ï¼Œå¤æ‚çš„å½¢çŠ¶è·¯å¾„åŠ¨ç”»å¯èƒ½å½±å“æ€§èƒ½ã€‚</li>
<li><strong>ç»„åˆä½¿ç”¨</strong>ï¼šå°† <code>.transition</code> ä¸ <code>.animation</code> ç»“åˆï¼Œåˆ›å»ºæ›´ä¸°å¯Œçš„è§†å›¾å±‚çº§å˜åŒ–æ•ˆæœã€‚</li>
<li><strong>æµ‹è¯•ä¸­æ–­</strong>ï¼šç¡®ä¿ç”¨æˆ·èƒ½éšæ—¶ä¸­æ–­åŠ¨ç”»ï¼ˆå¦‚å¿«é€Ÿç‚¹å‡»ï¼‰ï¼Œé¿å…ç•Œé¢â€œå¡æ­»â€ã€‚</li>
</ol>
<h3 data-id="heading-27">Swiftç½‘ç»œè¯·æ±‚ç›¸å…³</h3>
<p>Swift æœ€å¸¸ç”¨çš„ç½‘ç»œè¯·æ±‚æ¡†æ¶æ˜¯ <strong>Alamofire</strong>ï¼ˆç¬¬ä¸‰æ–¹ï¼‰å’Œ <strong>URLSession</strong>ï¼ˆè‹¹æœå®˜æ–¹ï¼‰ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„ç‰¹ç‚¹å¯¹æ¯”å’Œç®€å•ç”¨æ³•ï¼š</p>
<h4 data-id="heading-28">æ¡†æ¶å¯¹æ¯”</h4>























<table><thead><tr><th>æ¡†æ¶</th><th>ç±»å‹</th><th>ç‰¹ç‚¹</th><th>é€‚åˆåœºæ™¯</th></tr></thead><tbody><tr><td><strong>Alamofire</strong></td><td>ç¬¬ä¸‰æ–¹æ¡†æ¶</td><td>è¯­æ³•ä¼˜é›…ã€åŠŸèƒ½ä¸°å¯Œã€ç¤¾åŒºæ´»è·ƒ</td><td>å¿«é€Ÿå¼€å‘ã€å¤æ‚ç½‘ç»œéœ€æ±‚</td></tr><tr><td><strong>URLSession</strong></td><td>è‹¹æœå®˜æ–¹</td><td>æ— éœ€ä¾èµ–ã€è½»é‡å¯æ§ã€å®‰å…¨å¯é </td><td>ç®€å•éœ€æ±‚ã€ä¸æƒ³å¼•å…¥ç¬¬ä¸‰æ–¹åº“</td></tr></tbody></table>
<h4 data-id="heading-29">Alamofireï¼ˆæœ€æµè¡Œï¼‰</h4>
<h4 data-id="heading-30">å®‰è£…ä¾èµ–ï¼ˆSwift Package Managerï¼‰</h4>
<p>åœ¨ Xcode é¡¹ç›®ä¸­ï¼š</p>
<ol>
<li><strong>File â†’ Add Packages...</strong></li>
<li>è¾“å…¥ URLï¼š<code>https://github.com/Alamofire/Alamofire.git</code></li>
<li>é€‰æ‹©ç‰ˆæœ¬è§„åˆ™ï¼ˆæ¨è "Up to Next Major"ï¼‰</li>
<li>ç‚¹å‡» <strong>Add Package</strong></li>
</ol>
<h4 data-id="heading-31">ç®€å•ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Alamofire

<span class="hljs-comment">// 1. åŸºç¡€ GET è¯·æ±‚</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchDataWithAlamofire</span>() {
    <span class="hljs-type">AF</span>.request(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;https:<span class="hljs-comment">//jsonplaceholder.typicode.com/posts/1&amp;#34;)</span>
        .responseJSON { response <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">switch</span> response.result {
            <span class="hljs-keyword">case</span> .success(<span class="hljs-keyword">let</span> value):
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;è¯·æ±‚æˆåŠŸ: \(value)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
            <span class="hljs-keyword">case</span> .failure(<span class="hljs-keyword">let</span> error):
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;è¯·æ±‚å¤±è´¥: \(error)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
            }
        }
}

<span class="hljs-comment">// 2. å¸¦å‚æ•°çš„ GET è¯·æ±‚</span>
<span class="hljs-keyword">func</span> fetchDataWithParameters() {
    <span class="hljs-keyword">let</span> parameters <span class="hljs-operator">=</span> [<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;userId<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;<span class="hljs-number">1</span><span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;]
    
    <span class="hljs-type">AF</span>.request(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;https:<span class="hljs-comment">//jsonplaceholder.typicode.com/posts&amp;#34;,</span>
               parameters: parameters)
        .responseDecodable(of: [<span class="hljs-type">Post</span>].<span class="hljs-keyword">self</span>) { response <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">switch</span> response.result {
            <span class="hljs-keyword">case</span> .success(<span class="hljs-keyword">let</span> posts):
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;è·å–åˆ° \(posts.count) æ¡å¸–å­<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
            <span class="hljs-keyword">case</span> .failure(<span class="hljs-keyword">let</span> error):
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;é”™è¯¯: \(error)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
            }
        }
}

<span class="hljs-comment">// 3. POST è¯·æ±‚</span>
<span class="hljs-keyword">func</span> postData() {
    <span class="hljs-keyword">let</span> parameters <span class="hljs-operator">=</span> [
        <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;title<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;æµ‹è¯•æ ‡é¢˜<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;,
        <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;body<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;æµ‹è¯•å†…å®¹<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;,
        <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;userId<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;: <span class="hljs-number">1</span>
    ] <span class="hljs-keyword">as</span> [String : <span class="hljs-keyword">Any</span>]
    
    <span class="hljs-type">AF</span>.request(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;https:<span class="hljs-comment">//jsonplaceholder.typicode.com/posts&amp;#34;,</span>
               method: .post,
               parameters: parameters,
               encoding: <span class="hljs-type">JSONEncoding</span>.default)
        .responseJSON { response <span class="hljs-keyword">in</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;<span class="hljs-type">POST</span> å“åº”: \(response)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
        }
}

<span class="hljs-comment">// 4. é…åˆ Codable æ¨¡å‹</span>
<span class="hljs-keyword">struct</span> Post: <span class="hljs-type">Codable</span> {
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">Int</span>?
    <span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> body: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> userId: <span class="hljs-type">Int</span>
}

<span class="hljs-keyword">func</span> fetchDecodableData() {
    <span class="hljs-type">AF</span>.request(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;https:<span class="hljs-comment">//jsonplaceholder.typicode.com/posts/1&amp;#34;)</span>
        .responseDecodable(of: <span class="hljs-type">Post</span>.<span class="hljs-keyword">self</span>) { response <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> post <span class="hljs-operator">=</span> response.value {
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;å¸–å­æ ‡é¢˜: \(post.title)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
            }
        }
}
</code></pre>
<h4 data-id="heading-32">URLSessionï¼ˆè‹¹æœå®˜æ–¹ï¼Œæ— éœ€ä¾èµ–ï¼‰</h4>
<h4 data-id="heading-33">ç®€å•ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Foundation

<span class="hljs-comment">// 1. åŸºç¡€ GET è¯·æ±‚</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchDataWithURLSession</span>() {
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;https:<span class="hljs-comment">//jsonplaceholder.typicode.com/posts/1&amp;#34;) else {</span>
        <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-keyword">let</span> task <span class="hljs-operator">=</span> <span class="hljs-type">URLSession</span>.shared.dataTask(with: url) { data, response, error <span class="hljs-keyword">in</span>
        <span class="hljs-comment">// ç¡®ä¿åœ¨ä¸»çº¿ç¨‹æ›´æ–° UI</span>
        <span class="hljs-type">DispatchQueue</span>.main.async {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error <span class="hljs-operator">=</span> error {
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;è¯·æ±‚å¤±è´¥: \(error)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
                <span class="hljs-keyword">return</span>
            }
            
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> data <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;æ²¡æœ‰æ•°æ®<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
                <span class="hljs-keyword">return</span>
            }
            
            <span class="hljs-keyword">do</span> {
                <span class="hljs-comment">// è§£æ JSON</span>
                <span class="hljs-keyword">let</span> json <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONSerialization</span>.jsonObject(with: data, options: [])
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;è¯·æ±‚æˆåŠŸ: \(json)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
            } <span class="hljs-keyword">catch</span> {
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;<span class="hljs-type">JSON</span> è§£æå¤±è´¥: \(error)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
            }
        }
    }
    
    task.resume() <span class="hljs-comment">// å¼€å§‹è¯·æ±‚</span>
}

<span class="hljs-comment">// 2. é…åˆ Codable çš„æ”¹è¿›ç‰ˆæœ¬</span>
<span class="hljs-keyword">func</span> fetchDataWithCodable() {
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;https:<span class="hljs-comment">//jsonplaceholder.typicode.com/posts/1&amp;#34;) else {</span>
        <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-keyword">let</span> task <span class="hljs-operator">=</span> <span class="hljs-type">URLSession</span>.shared.dataTask(with: url) { data, response, error <span class="hljs-keyword">in</span>
        <span class="hljs-type">DispatchQueue</span>.main.async {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error <span class="hljs-operator">=</span> error {
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;é”™è¯¯: \(error)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
                <span class="hljs-keyword">return</span>
            }
            
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> data <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;æ²¡æœ‰æ•°æ®<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
                <span class="hljs-keyword">return</span>
            }
            
            <span class="hljs-keyword">do</span> {
                <span class="hljs-comment">// ä½¿ç”¨ JSONDecoder è§£ç åˆ°æ¨¡å‹</span>
                <span class="hljs-keyword">let</span> decoder <span class="hljs-operator">=</span> <span class="hljs-type">JSONDecoder</span>()
                <span class="hljs-keyword">let</span> post <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> decoder.decode(<span class="hljs-type">Post</span>.<span class="hljs-keyword">self</span>, from: data)
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;è·å–åˆ°å¸–å­: \(post.title)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
            } <span class="hljs-keyword">catch</span> {
                <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;è§£ç å¤±è´¥: \(error)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
            }
        }
    }
    
    task.resume()
}

<span class="hljs-comment">// 3. POST è¯·æ±‚</span>
<span class="hljs-keyword">func</span> postWithURLSession() {
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;https:<span class="hljs-comment">//jsonplaceholder.typicode.com/posts&amp;#34;) else {</span>
        <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-keyword">var</span> request <span class="hljs-operator">=</span> <span class="hljs-type">URLRequest</span>(url: url)
    request.httpMethod <span class="hljs-operator">=</span> <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;<span class="hljs-type">POST</span><span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;
    request.setValue(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;application<span class="hljs-operator">/</span>json<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;, forHTTPHeaderField: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;<span class="hljs-type">Content</span><span class="hljs-operator">-</span><span class="hljs-type">Type</span><span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
    
    <span class="hljs-keyword">let</span> body <span class="hljs-operator">=</span> [
        <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;title<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;æµ‹è¯•æ ‡é¢˜<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;,
        <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;body<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;æµ‹è¯•å†…å®¹<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;,
        <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;userId<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;: <span class="hljs-number">1</span>
    ] <span class="hljs-keyword">as</span> [String: <span class="hljs-keyword">Any</span>]
    
    <span class="hljs-keyword">do</span> {
        request.httpBody <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONSerialization</span>.data(withJSONObject: body, options: [])
    } <span class="hljs-keyword">catch</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;åˆ›å»ºè¯·æ±‚ä½“å¤±è´¥: \(error)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
        <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-keyword">let</span> task <span class="hljs-operator">=</span> <span class="hljs-type">URLSession</span>.shared.dataTask(with: request) { data, response, error <span class="hljs-keyword">in</span>
        <span class="hljs-type">DispatchQueue</span>.main.async {
            <span class="hljs-comment">// å¤„ç†å“åº”...</span>
        }
    }
    
    task.resume()
}
</code></pre>
<h4 data-id="heading-34">ç½‘ç»œå±‚å°è£…ç¤ºä¾‹ï¼ˆå®ç”¨ç‰ˆï¼‰</h4>
<p>å¯¹äºçœŸå®é¡¹ç›®ï¼Œå»ºè®®è¿›è¡Œç®€å•å°è£…ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Alamofire

<span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkManager</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">NetworkManager</span>()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">init</span>() {}
    
    <span class="hljs-comment">// é€šç”¨è¯·æ±‚æ–¹æ³•</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">request</span>(
        <span class="hljs-keyword">_</span> <span class="hljs-params">url</span>: <span class="hljs-type">String</span>,
        <span class="hljs-params">method</span>: <span class="hljs-type">HTTPMethod</span> <span class="hljs-operator">=</span> .get,
        <span class="hljs-params">parameters</span>: <span class="hljs-type">Parameters</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>,
        <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Result</span>) -&gt; <span class="hljs-type">Void</span>
    ) {
        <span class="hljs-type">AF</span>.request(url,
                   method: method,
                   parameters: parameters,
                   encoding: <span class="hljs-type">JSONEncoding</span>.default)
            .validate() <span class="hljs-comment">// éªŒè¯å“åº”çŠ¶æ€ç </span>
            .responseDecodable(of: <span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>) { response <span class="hljs-keyword">in</span>
                <span class="hljs-keyword">switch</span> response.result {
                <span class="hljs-keyword">case</span> .success(<span class="hljs-keyword">let</span> value):
                    completion(.success(value))
                <span class="hljs-keyword">case</span> .failure(<span class="hljs-keyword">let</span> error):
                    completion(.failure(error))
                }
            }
    }
}

<span class="hljs-comment">// ä½¿ç”¨å°è£…åçš„æ–¹æ³•</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchUserData</span>() {
    <span class="hljs-type">NetworkManager</span>.shared.request(
        <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;https:<span class="hljs-comment">//jsonplaceholder.typicode.com/users/1&amp;#34;</span>
    ) { (result: <span class="hljs-type">Result</span>) <span class="hljs-keyword">in</span>
        <span class="hljs-keyword">switch</span> result {
        <span class="hljs-keyword">case</span> .success(<span class="hljs-keyword">let</span> user):
            <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;ç”¨æˆ·: \(user.name)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
        <span class="hljs-keyword">case</span> .failure(<span class="hljs-keyword">let</span> error):
            <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;é”™è¯¯: \(error)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
        }
    }
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span>: <span class="hljs-title class_">Codable</span> {
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> email: <span class="hljs-type">String</span>
}
</code></pre>
<h4 data-id="heading-35">é€‰æ‹©å»ºè®®</h4>
<ol>
<li><strong>æ–°æ‰‹æˆ–ç®€å•é¡¹ç›®</strong>ï¼šä» <strong>URLSession</strong> å¼€å§‹ï¼Œç†è§£åŸºç¡€åŸç†</li>
<li><strong>ç”Ÿäº§ç¯å¢ƒæˆ–å¤æ‚éœ€æ±‚</strong>ï¼šä½¿ç”¨ <strong>Alamofire</strong>ï¼Œæå‡å¼€å‘æ•ˆç‡</li>
<li><strong>éœ€è¦é«˜çº§åŠŸèƒ½</strong>ï¼šAlamofire æ”¯æŒï¼š
<ul>
<li>è¯·æ±‚/å“åº”æ‹¦æˆªå™¨</li>
<li>ç½‘ç»œçŠ¶æ€ç›‘å¬</li>
<li>è‡ªåŠ¨é‡è¯•</li>
<li>æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½è¿›åº¦</li>
<li>è¯ä¹¦éªŒè¯</li>
</ul>
</li>
</ol>
<h4 data-id="heading-36">å®é™…é¡¹ç›®ä½¿ç”¨æŠ€å·§</h4>
<h4 data-id="heading-37">Alamofire è¿›é˜¶ç”¨æ³•ï¼š</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ·»åŠ è¯·æ±‚å¤´</span>
<span class="hljs-keyword">let</span> headers: <span class="hljs-type">HTTPHeaders</span> <span class="hljs-operator">=</span> [
    <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;<span class="hljs-type">Authorization</span><span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;<span class="hljs-type">Bearer</span> token123<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;,
    <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;<span class="hljs-type">Accept</span><span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;application<span class="hljs-operator">/</span>json<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;
]

<span class="hljs-type">AF</span>.request(url, headers: headers).responseJSON { response <span class="hljs-keyword">in</span>
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// ä¸Šä¼ å›¾ç‰‡</span>
<span class="hljs-type">AF</span>.upload(multipartFormData: { multipartFormData <span class="hljs-keyword">in</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> imageData <span class="hljs-operator">=</span> image.jpegData(compressionQuality: <span class="hljs-number">0.8</span>) {
        multipartFormData.append(imageData, 
                                 withName: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;image<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;, 
                                 fileName: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;photo.jpg<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;, 
                                 mimeType: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;image<span class="hljs-operator">/</span>jpeg<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
    }
}, to: <span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;https:<span class="hljs-comment">//api.example.com/upload&amp;#34;).responseJSON { response in</span>
    <span class="hljs-comment">// å¤„ç†ä¸Šä¼ ç»“æœ</span>
}
</code></pre>
<h4 data-id="heading-38">é”™è¯¯å¤„ç†å¢å¼ºï¼š</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">NetworkError</span>: <span class="hljs-title class_">Error</span> {
    <span class="hljs-keyword">case</span> invalidURL
    <span class="hljs-keyword">case</span> noData
    <span class="hljs-keyword">case</span> decodingError
    <span class="hljs-keyword">case</span> serverError(<span class="hljs-type">String</span>)
}

<span class="hljs-keyword">func</span> <span class="hljs-title function_">handleNetworkError</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">error</span>: <span class="hljs-type">AFError</span>) -&gt; <span class="hljs-type">NetworkError</span> {
    <span class="hljs-keyword">if</span> error.isResponseSerializationError {
        <span class="hljs-keyword">return</span> .decodingError
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> statusCode <span class="hljs-operator">=</span> error.responseCode {
        <span class="hljs-keyword">return</span> .serverError(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;æœåŠ¡å™¨é”™è¯¯: \(statusCode)<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> .serverError(error.localizedDescription)
    }
}
</code></pre>
<h4 data-id="heading-39">å»ºè®®</h4>
<ul>
<li><strong>å­¦ä¹ é˜¶æ®µ</strong>ï¼šå…ˆæŒæ¡ URLSessionï¼Œç†è§£ç½‘ç»œè¯·æ±‚åŸºæœ¬åŸç†</li>
<li><strong>å¼€å‘é˜¶æ®µ</strong>ï¼šæ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©æ¡†æ¶ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ Alamofire æ›´é«˜æ•ˆ</li>
<li><strong>ä¿æŒæ›´æ–°</strong>ï¼šå…³æ³¨ Swift å®˜æ–¹ç½‘ç»œåº“çš„æ›´æ–°ï¼Œæœªæ¥å¯èƒ½ä¼šæœ‰æ›´å¥½ç”¨çš„åŸç”Ÿæ–¹æ¡ˆ</li>
</ul>
<h3 data-id="heading-40">Swift æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤</h3>
<h4 data-id="heading-41">ä¸€ã€<code>#if os(iOS)</code> æ ¸å¿ƒæœ¬è´¨ï¼šSwift æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤</h4>
<p><code>#if os(iOS)</code> æ˜¯ Swift æä¾›çš„<strong>ç¼–è¯‘æ—¶æ¡ä»¶åˆ¤æ–­æŒ‡ä»¤</strong>ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯ï¼š<strong>æ ¹æ®ç¼–è¯‘ç›®æ ‡çš„æ“ä½œç³»ç»Ÿï¼ˆå¹³å°ï¼‰ï¼Œå†³å®šæ˜¯å¦ç¼–è¯‘æŸä¸€æ®µä»£ç </strong>â€”â€”åªæœ‰å½“å·¥ç¨‹çš„ç¼–è¯‘ç›®æ ‡æ˜¯ iOS æ—¶ï¼Œ<code>#if os(iOS)</code> å’Œ <code>#else</code> ä¹‹é—´çš„ä»£ç æ‰ä¼šè¢«ç¼–è¯‘è¿›æœ€ç»ˆäº§ç‰©ï¼›é iOS å¹³å°ï¼ˆå¦‚ macOSã€watchOSã€tvOSã€visionOS ç­‰ï¼‰åˆ™ç¼–è¯‘ <code>#else</code> åˆ†æ”¯çš„ä»£ç ã€‚</p>
<h4 data-id="heading-42">äºŒã€è¿™æ®µä»£ç ä¸­è¯¥æŒ‡ä»¤çš„å…·ä½“ä½œç”¨</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">#if</span> os(iOS)
<span class="hljs-comment">// ä»… iOS å¹³å°æ‰§è¡Œï¼šLabel åŠ å­—ä½“+å‚ç›´å†…è¾¹è·</span>
<span class="hljs-type">Label</span>(title, systemImage: icon).font(.headline).padding(.vertical, <span class="hljs-number">8</span>)
<span class="hljs-keyword">#else</span>
<span class="hljs-comment">// é iOS å¹³å°ï¼ˆmacOS/watchOS/tvOS ç­‰ï¼‰æ‰§è¡Œï¼šä»…åŸºç¡€ Label</span>
<span class="hljs-type">Label</span>(title, systemImage: icon)
<span class="hljs-keyword">#endif</span>
</code></pre>
<ul>
<li><strong>iOS å¹³å°</strong>ï¼šç»™ <code>Label</code> å¢åŠ  <code>font(.headline)</code>ï¼ˆæ ‡é¢˜å­—ä½“ï¼‰å’Œ <code>padding(.vertical, 8)</code>ï¼ˆå‚ç›´æ–¹å‘8ptå†…è¾¹è·ï¼‰ï¼Œé€‚é… iOS ç³»ç»Ÿçš„ UI è®¾è®¡è§„èŒƒï¼ˆæ¯”å¦‚ iOS åˆ—è¡¨é¡¹é€šå¸¸éœ€è¦å†…è¾¹è·å’Œé†’ç›®å­—ä½“ï¼Œè´´åˆ Settings/å¤‡å¿˜å½•ç­‰åŸç”Ÿ App é£æ ¼ï¼‰ï¼›</li>
<li><strong>é iOS å¹³å°</strong>ï¼šä»…ä¿ç•™åŸºç¡€ <code>Label</code>ï¼Œä¸æ·»åŠ é¢å¤–æ ·å¼â€”â€”å› ä¸ºä¸åŒå¹³å°çš„ UI é€»è¾‘ä¸åŒï¼ˆæ¯”å¦‚ macOS çš„ <code>Label</code> åµŒå…¥ <code>NavigationLink</code> æ—¶ï¼Œé»˜è®¤æ ·å¼å·²é€‚é…ä¾§è¾¹æ /åˆ—è¡¨å¸ƒå±€ï¼Œé¢å¤– padding ä¼šå¯¼è‡´å¸ƒå±€æ‹¥æŒ¤ï¼›watchOS å±å¹•å°ºå¯¸æå°ï¼Œå¤šä½™å†…è¾¹è·ä¼šæµªè´¹ç©ºé—´ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-43">ä¸‰ã€å…³é”®è¯­æ³•ç»†èŠ‚</h4>
<h5 data-id="heading-44">1. å®Œæ•´è¯­æ³•ç»“æ„</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">#if</span> æ¡ä»¶
    <span class="hljs-comment">// æ¡ä»¶æ»¡è¶³æ—¶ç¼–è¯‘çš„ä»£ç </span>
<span class="hljs-keyword">#else</span>
    <span class="hljs-comment">// æ¡ä»¶ä¸æ»¡è¶³æ—¶ç¼–è¯‘çš„ä»£ç </span>
<span class="hljs-keyword">#endif</span> <span class="hljs-comment">// å¿…é¡»é…å¯¹ç»“æŸï¼Œå¦åˆ™ç¼–è¯‘æŠ¥é”™</span>
</code></pre>
<ul>
<li><code>#if</code>/<code>#else</code>/<code>#endif</code> æ˜¯ Swift ä¿ç•™çš„<strong>ç¼–è¯‘æŒ‡ä»¤</strong>ï¼Œä¸æ˜¯æ™®é€šçš„è¿è¡Œæ—¶ <code>if-else</code>ï¼›</li>
<li>ç¼–è¯‘é˜¶æ®µå°±å†³å®šä»£ç æ˜¯å¦è¢«åŒ…å«ï¼Œè€Œéè¿è¡Œæ—¶åˆ¤æ–­ï¼ˆè¿™æ˜¯å’Œ <code>if #available(...)</code> çš„æ ¸å¿ƒåŒºåˆ«ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-45">2. æ”¯æŒçš„å¹³å°å‚æ•°</h5>
<p><code>os(å¹³å°)</code> ä¸­å¯å¡«å†™çš„å¸¸ç”¨å¹³å°å€¼ï¼š</p>








































<table><thead><tr><th>å‚æ•°</th><th>å¯¹åº”å¹³å°</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>iOS</td><td>iOS/iPadOS</td><td>iPadOS ç¼–è¯‘æ—¶ä»è¯†åˆ«ä¸º iOS</td></tr><tr><td>macOS</td><td>macOS</td><td>åŒ…æ‹¬ Intel/Apple Silicon æœºå‹</td></tr><tr><td>watchOS</td><td>watchOS</td><td>è‹¹æœæ‰‹è¡¨ç³»ç»Ÿ</td></tr><tr><td>tvOS</td><td>tvOS</td><td>è‹¹æœç”µè§†ç³»ç»Ÿ</td></tr><tr><td>visionOS</td><td>visionOS</td><td>Vision Pro ç³»ç»Ÿ</td></tr><tr><td>Linux/Windows</td><td>Linux/Windows</td><td>Swift è·¨å¹³å°æ”¯æŒ</td></tr></tbody></table>
<h5 data-id="heading-46">3. å¤šæ¡ä»¶ç»„åˆ</h5>
<p>å¯é€šè¿‡ <code>||</code>ï¼ˆæˆ–ï¼‰ã€<code>&amp;&amp;</code>ï¼ˆä¸ï¼‰ç»„åˆå¤šä¸ªæ¡ä»¶ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">#if</span> os(iOS) <span class="hljs-operator">||</span> os(visionOS) <span class="hljs-comment">// iOS æˆ– Vision Pro å¹³å°</span>
    <span class="hljs-type">Label</span>(title, systemImage: icon).font(.headline).padding(.vertical, <span class="hljs-number">8</span>)
<span class="hljs-keyword">#elseif</span> os(macOS) <span class="hljs-comment">// macOS å¹³å°å•ç‹¬å¤„ç†</span>
    <span class="hljs-type">Label</span>(title, systemImage: icon).font(.subheadline).padding(.horizontal, <span class="hljs-number">4</span>)
<span class="hljs-keyword">#else</span> <span class="hljs-comment">// å…¶ä»–å¹³å°ï¼ˆwatchOS/tvOSï¼‰</span>
    <span class="hljs-type">Label</span>(title, systemImage: icon)
<span class="hljs-keyword">#endif</span>
</code></pre>
<h4 data-id="heading-47">å››ã€å’Œ <code>#available</code> çš„æ ¸å¿ƒåŒºåˆ«ï¼ˆæ˜“é”™ç‚¹ï¼‰</h4>
<p>å¾ˆå¤šå¼€å‘è€…ä¼šæ··æ·† <code>#if os(...)</code> å’Œ <code>#available</code>ï¼Œä¸¤è€…å®Œå…¨ä¸åŒï¼š</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th><code>#if os(iOS)</code>ï¼ˆæ¡ä»¶ç¼–è¯‘ï¼‰</th><th><code>#available(iOS 17.0, *)</code>ï¼ˆè¿è¡Œæ—¶åˆ¤æ–­ï¼‰</th></tr></thead><tbody><tr><td>æ‰§è¡Œé˜¶æ®µ</td><td>ç¼–è¯‘æ—¶ï¼ˆå†³å®šä»£ç æ˜¯å¦è¢«æ‰“åŒ…ï¼‰</td><td>è¿è¡Œæ—¶ï¼ˆä»£ç å·²æ‰“åŒ…ï¼Œä»…åˆ¤æ–­æ˜¯å¦æ‰§è¡Œï¼‰</td></tr><tr><td>ä½œç”¨</td><td>åŒºåˆ†<strong>ä¸åŒå¹³å°</strong>ç¼–è¯‘ä¸åŒä»£ç </td><td>åŒºåˆ†<strong>åŒä¸€å¹³å°çš„ä¸åŒç³»ç»Ÿç‰ˆæœ¬</strong>æ‰§è¡Œä»£ç </td></tr><tr><td>äº§ç‰©ä½“ç§¯</td><td>éç›®æ ‡å¹³å°ä»£ç ä¸ä¼šè¢«ç¼–è¯‘ï¼Œä½“ç§¯å°</td><td>æ‰€æœ‰åˆ†æ”¯ä»£ç éƒ½ç¼–è¯‘ï¼Œä½“ç§¯ç¨å¤§</td></tr><tr><td>ç¤ºä¾‹åœºæ™¯</td><td>iOS åŠ  paddingï¼ŒmacOS ä¸åŠ </td><td>iOS 17+ ç”¨æ–° APIï¼ŒiOS 16- ç”¨å…¼å®¹ä»£ç </td></tr></tbody></table>
<p>ç¤ºä¾‹å¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// 1. æ¡ä»¶ç¼–è¯‘ï¼ˆä¸åŒå¹³å°ç¼–è¯‘ä¸åŒä»£ç ï¼‰</span>
<span class="hljs-keyword">#if</span> os(iOS)
    <span class="hljs-comment">// ä»… iOS ç¼–è¯‘è¿™æ®µä»£ç ï¼ŒmacOS äº§ç‰©ä¸­æ— æ­¤ä»£ç </span>
    <span class="hljs-type">Label</span>(<span class="hljs-comment">/* iOS æ ·å¼ */</span>)
<span class="hljs-keyword">#endif</span>

<span class="hljs-comment">// 2. è¿è¡Œæ—¶åˆ¤æ–­ï¼ˆåŒä¸€å¹³å°ä¸åŒç‰ˆæœ¬æ‰§è¡Œä¸åŒä»£ç ï¼‰</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">#available</span>(<span class="hljs-keyword">iOS</span> <span class="hljs-number">17.0</span>, <span class="hljs-operator">*</span>) {
    <span class="hljs-comment">// iOS 17+ è®¾å¤‡è¿è¡Œæ—¶æ‰§è¡Œ</span>
    <span class="hljs-type">Label</span>(<span class="hljs-comment">/* iOS 17 æ–°æ ·å¼ */</span>)
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// iOS 16- è®¾å¤‡è¿è¡Œæ—¶æ‰§è¡Œ</span>
    <span class="hljs-type">Label</span>(<span class="hljs-comment">/* å…¼å®¹æ ·å¼ */</span>)
}
</code></pre>
<h4 data-id="heading-48">äº”ã€è¯¥å†™æ³•çš„è®¾è®¡åˆè¡·ï¼ˆä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼‰</h4>
<p>è¿™æ®µä»£ç æ˜¯ SwiftUI è·¨å¹³å°å¼€å‘çš„å…¸å‹å®è·µï¼š</p>
<ol>
<li><strong>SwiftUI å¤©ç„¶è·¨å¹³å°</strong>ï¼šåŒä¸€ä»½ä»£ç å¯è¿è¡Œåœ¨ iOS/macOS/watchOS ç­‰å¹³å°ï¼Œä½†ä¸åŒå¹³å°çš„ UI è§„èŒƒã€å±å¹•å°ºå¯¸ã€äº¤äº’é€»è¾‘å·®å¼‚å¤§ï¼›</li>
<li><strong>æŒ‰éœ€å®šåˆ¶æ ·å¼</strong>ï¼šiOS å¹³å°éœ€è¦é¢å¤–çš„ padding/font ä¼˜åŒ–è§†è§‰ï¼Œå…¶ä»–å¹³å°ä¿æŒåŸç”Ÿæ ·å¼å³å¯ï¼Œé¿å…â€œä¸€åˆ€åˆ‡â€å¯¼è‡´çš„è·¨å¹³å°å¸ƒå±€é—®é¢˜ï¼›</li>
<li><strong>å‡å°‘å†—ä½™ä»£ç </strong>ï¼šé€šè¿‡æ¡ä»¶ç¼–è¯‘ï¼Œéç›®æ ‡å¹³å°çš„æ ·å¼ä»£ç ä¸ä¼šè¢«ç¼–è¯‘ï¼Œé™ä½æœ€ç»ˆäº§ç‰©ä½“ç§¯ï¼Œä¸”ä»£ç ç»“æ„æ›´æ¸…æ™°ã€‚</li>
</ol>
<h4 data-id="heading-49">å…­ã€æ‹“å±•ï¼šå…¶ä»–å¸¸ç”¨æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤</h4>
<p>é™¤äº† <code>os(...)</code>ï¼ŒSwift è¿˜æ”¯æŒå…¶ä»–å®ç”¨çš„æ¡ä»¶ç¼–è¯‘ï¼š</p>
<ol>
<li>åˆ¤æ–­æ˜¯å¦ä¸ºæ¨¡æ‹Ÿå™¨ï¼š
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">#if</span> targetEnvironment(simulator)
    <span class="hljs-comment">// ä»…æ¨¡æ‹Ÿå™¨ç¼–è¯‘çš„ä»£ç ï¼ˆæ¯”å¦‚æµ‹è¯•æ—¥å¿—ï¼‰</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;è¿è¡Œåœ¨æ¨¡æ‹Ÿå™¨ä¸­<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
<span class="hljs-keyword">#else</span>
    <span class="hljs-comment">// çœŸæœºç¼–è¯‘çš„ä»£ç </span>
    <span class="hljs-built_in">print</span>(<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;è¿è¡Œåœ¨çœŸæœºä¸­<span class="hljs-operator">&amp;</span>#<span class="hljs-number">34</span>;)
<span class="hljs-keyword">#endif</span>
</code></pre>
</li>
<li>åˆ¤æ–­ç¼–è¯‘å™¨ç‰ˆæœ¬ï¼š
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">#if</span> compiler(<span class="hljs-operator">&gt;=</span><span class="hljs-number">5.9</span>)
    <span class="hljs-comment">// Swift 5.9+ ç¼–è¯‘å™¨æ”¯æŒçš„è¯­æ³•ï¼ˆæ¯”å¦‚æ–°çš„å®ï¼‰</span>
<span class="hljs-keyword">#endif</span>
</code></pre>
</li>
<li>åˆ¤æ–­è°ƒè¯•/å‘å¸ƒæ¨¡å¼ï¼š
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">#if</span> <span class="hljs-type">DEBUG</span>
    <span class="hljs-comment">// è°ƒè¯•æ¨¡å¼ç¼–è¯‘ï¼ˆæ¯”å¦‚æ‰“å°è°ƒè¯•æ—¥å¿—ï¼‰</span>
    <span class="hljs-type">Label</span>(title, systemImage: icon).border(.red) <span class="hljs-comment">// è°ƒè¯•æ—¶æ˜¾ç¤ºè¾¹æ¡†</span>
<span class="hljs-keyword">#else</span>
    <span class="hljs-comment">// å‘å¸ƒæ¨¡å¼ç¼–è¯‘</span>
    <span class="hljs-type">Label</span>(title, systemImage: icon)
<span class="hljs-keyword">#endif</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-50">æ€»ç»“</h4>
<p>è¿™æ®µä»£ç ä¸­çš„ <code>#if os(iOS)</code> æ˜¯ä¸ºäº†<strong>åœ¨ç¼–è¯‘é˜¶æ®µåŒºåˆ† iOS å’Œå…¶ä»–å¹³å°</strong>ï¼Œç»™ iOS ç«¯çš„ <code>Label</code> å¢åŠ ä¸“å±çš„å­—ä½“å’Œå†…è¾¹è·æ ·å¼ï¼Œå…¶ä»–å¹³å°ä¿æŒåŸºç¡€æ ·å¼ï¼Œæ—¢å…¼é¡¾ SwiftUI è·¨å¹³å°çš„ä»£ç å¤ç”¨ï¼Œåˆé€‚é…ä¸åŒå¹³å°çš„ UI è§„èŒƒã€‚æ ¸å¿ƒè¦è®°ä½ï¼šå®ƒæ˜¯<strong>ç¼–è¯‘æ—¶æŒ‡ä»¤</strong>ï¼Œè€Œéè¿è¡Œæ—¶åˆ¤æ–­ï¼Œè¿™æ˜¯å’Œ <code>#available</code> æœ€å…³é”®çš„åŒºåˆ«ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uniapp BLEä½åŠŸè€—è“ç‰™æ’ä»¶ æ”¯æŒå®‰å“ iOS é¸¿è’™NEXT å¾®ä¿¡å°ç¨‹åº]]></title>    <link>https://juejin.cn/post/7582003642190872618</link>    <guid>https://juejin.cn/post/7582003642190872618</guid>    <pubDate>2025-12-10T08:13:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582003642190872618" data-draft-id="7581876069608521771" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uniapp BLEä½åŠŸè€—è“ç‰™æ’ä»¶ æ”¯æŒå®‰å“ iOS é¸¿è’™NEXT å¾®ä¿¡å°ç¨‹åº"/> <meta itemprop="keywords" content="uni-app,è“ç‰™"/> <meta itemprop="datePublished" content="2025-12-10T08:13:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lvha"/> <meta itemprop="url" content="https://juejin.cn/user/4286335910412464"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uniapp BLEä½åŠŸè€—è“ç‰™æ’ä»¶ æ”¯æŒå®‰å“ iOS é¸¿è’™NEXT å¾®ä¿¡å°ç¨‹åº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4286335910412464/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lvha
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T08:13:53.000Z" title="Wed Dec 10 2025 08:13:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fext.dcloud.net.cn%2Fplugin%3Fid%3D24675" target="_blank" title="https://ext.dcloud.net.cn/plugin?id=24675" ref="nofollow noopener noreferrer">xl-bleæ’ä»¶</a></p>
<h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>æœ¬SDKæä¾›äº†ä¸€å¥—å®Œæ•´çš„è“ç‰™ä½åŠŸè€—(BLE)è®¾å¤‡äº¤äº’æ¥å£ï¼Œé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œå°†åŠŸèƒ½æ¥å£ä¸å›è°ƒç›‘å¬åˆ†ç¦»ï¼Œä¾¿äºå¼€å‘è€…çµæ´»ä½¿ç”¨ã€‚</p>
<ul>
<li>
<p>æ”¯æŒè“ç‰™æ‰«æã€è¿æ¥ã€æ–­å¼€;</p>
</li>
<li>
<p>æ”¯æŒå­—èŠ‚æ•°æ®ã€å­—ç¬¦ä¸²æ•°æ®å†™å…¥;</p>
</li>
<li>
<p>è“ç‰™çŠ¶æ€ç›‘å¬ã€è¿æ¥çŠ¶æ€ç›‘å¬ã€æ•°æ®å›ä¼ ç›‘å¬ã€æ•°æ®å†™å…¥æ˜¯å¦å®Œæˆç›‘å¬;</p>
</li>
<li>
<p>æ”¯æŒGBKç¼–ç ;</p>
</li>
</ul>
<h2 data-id="heading-1">å¯¼å…¥</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> ble <span class="hljs-keyword">from</span> <span class="hljs-string">'@/uni_modules/xl-ble'</span>;
</code></pre>
<h2 data-id="heading-2">åŠŸèƒ½æ¥å£è¯´æ˜</h2>
<h4 data-id="heading-3">æ‰«æè®¾å¤‡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// callback: å‘ç°è®¾å¤‡å›è°ƒ</span>
ble.<span class="hljs-title function_">startScan</span>(<span class="hljs-function">(<span class="hljs-params">device</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å‘ç°è®¾å¤‡: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(device)}</span>`</span>);
});
</code></pre>
<h4 data-id="heading-4">åœæ­¢æ‰«æ</h4>
<pre><code class="hljs language-javascript" lang="javascript">ble.<span class="hljs-title function_">stopScan</span>();
</code></pre>
<h4 data-id="heading-5">è¿æ¥è®¾å¤‡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‚æ•°1: è®¾å¤‡id</span>
<span class="hljs-comment">// å‚æ•°2(å¯é€‰):æŒ‡å®šæœåŠ¡ä¸ç‰¹å¾ï¼ŒæœªæŒ‡å®šå†…éƒ¨ä¼šè‡ªåŠ¨åŒ¹é…</span>
ble.<span class="hljs-title function_">connect</span>(
  deviceId,
  <span class="hljs-comment">// {</span>
  <span class="hljs-comment">// 	seviceUuid: '0000ff00-0000-1000-8000-00805f9b34fb',</span>
  <span class="hljs-comment">// 	writeUuid: '0000ff02-0000-1000-8000-00805f9b34fb',</span>
  <span class="hljs-comment">// 	notifyUuid: '0000ff01-0000-1000-8000-00805f9b34fb'</span>
  <span class="hljs-comment">// },</span>
)
</code></pre>
<h4 data-id="heading-6">æ–­å¼€è®¾å¤‡</h4>
<pre><code class="hljs language-javascript" lang="javascript">ble.<span class="hljs-title function_">disconnect</span>()
</code></pre>
<h4 data-id="heading-7">å†™å…¥æ•°æ®</h4>
<ul>
<li>
<p>å†™å…¥å­—èŠ‚æ•°ç»„</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‚æ•°ä¸ºå­—èŠ‚æ•°ç»„ï¼Œéœ€è®¾å¤‡æ”¯æŒçš„æŒ‡ä»¤ï¼Œè¿™ç‚¹å¾ˆé‡è¦</span>
ble.<span class="hljs-title function_">writeBytes</span>([<span class="hljs-number">0x10</span>, <span class="hljs-number">0xff</span>, <span class="hljs-number">0x30</span>])
</code></pre>
</li>
<li>
<p>å†™å…¥å­—ç¬¦ä¸²</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‚æ•°1: å­—ç¬¦ä¸²å†…å®¹ï¼Œä¼ çš„å­—ç¬¦ä¸²éœ€è®¾å¤‡æ”¯æŒçš„æŒ‡ä»¤ï¼Œè¿™ç‚¹å¾ˆé‡è¦</span>
<span class="hljs-comment">// å‚æ•°2(å¯é€‰): å­—ç¬¦ä¸²ç¼–ç , é»˜è®¤ "UTF_8" ç¼–ç , ä¼  "GBK" ä½¿ç”¨GBKç¼–ç </span>
ble.<span class="hljs-title function_">writeString</span>(<span class="hljs-string">'ABC'</span>)
ble.<span class="hljs-title function_">writeString</span>(<span class="hljs-string">'ABC'</span>, <span class="hljs-string">'GBK'</span>)
</code></pre>
</li>
</ul>
<h4 data-id="heading-8">è®¾ç½®MTUåˆ†åŒ…å¤§å°</h4>
<pre><code class="hljs language-javascript" lang="javascript">ble.<span class="hljs-title function_">setMtu</span>(<span class="hljs-number">100</span>)
</code></pre>
<h4 data-id="heading-9">è“ç‰™äº‹ä»¶ç›‘å¬</h4>
<h5 data-id="heading-10">è“ç‰™çŠ¶æ€ç›‘å¬</h5>
<pre><code class="hljs language-javascript" lang="javascript">ble.<span class="hljs-title function_">onBluetoothStatusChanged</span>(<span class="hljs-function">(<span class="hljs-params">isOn</span>) =&gt;</span> {
  uni.<span class="hljs-title function_">showToast</span>({
    <span class="hljs-attr">title</span>: isOn ? <span class="hljs-string">"è“ç‰™å·²å¼€å¯"</span> : <span class="hljs-string">"è“ç‰™å·²å…³é—­"</span>,
    <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>
  });
});
</code></pre>
<h5 data-id="heading-11">è“ç‰™è¿æ¥çŠ¶æ€ç›‘å¬</h5>
<pre><code class="hljs language-javascript" lang="javascript">ble.<span class="hljs-title function_">onConnectionStateChange</span>(<span class="hljs-function">(<span class="hljs-params">connectionState</span>) =&gt;</span> {
  uni.<span class="hljs-title function_">showToast</span>({
    <span class="hljs-attr">title</span>: connectionState.<span class="hljs-property">msg</span>,
    <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>
  })
  <span class="hljs-keyword">switch</span> (connectionState.<span class="hljs-property">state</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'connectFail'</span>:
				<span class="hljs-comment">// è¿æ¥å¤±è´¥</span>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'disconnected'</span>:
				<span class="hljs-comment">// æ–­å¼€è¿æ¥</span>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'connected'</span>:
      <span class="hljs-comment">// æ–­å¼€æˆåŠŸ</span>
      <span class="hljs-keyword">break</span>;
  }
});
</code></pre>
<h5 data-id="heading-12">è“ç‰™æ•°æ®å›ä¼ ç›‘å¬</h5>
<pre><code class="hljs language-javascript" lang="javascript">ble.<span class="hljs-title function_">onDataReceived</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  <span class="hljs-keyword">let</span> result = <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(...data);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ”¶åˆ°è“ç‰™æ•°æ®: <span class="hljs-subst">${data}</span>`</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ”¶åˆ°è“ç‰™æ•°æ®è½¬å­—ç¬¦ä¸²: <span class="hljs-subst">${result}</span>`</span>);
});

</code></pre>
<h5 data-id="heading-13">æ•°æ®å†™å…¥æ˜¯å¦å®Œæˆç›‘å¬</h5>
<pre><code class="hljs language-javascript" lang="javascript">ble.<span class="hljs-title function_">onWriteComplete</span>(<span class="hljs-function">(<span class="hljs-params">isComplete</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(isComplete ? <span class="hljs-string">"å†™å…¥å®Œæˆ"</span> : <span class="hljs-string">"å†™å…¥å¤±è´¥"</span>);
})
</code></pre>
<h4 data-id="heading-14">è“ç‰™æƒé™</h4>
<ul>
<li>
<p><strong>å®‰å“</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.BLUETOOTH"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.BLUETOOTH_ADMIN"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.BLUETOOTH_CONNECT"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.BLUETOOTH_SCAN"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.ACCESS_FINE_LOCATION"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.ACCESS_COARSE_LOCATION"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.BLUETOOTH_SCAN"</span> /&gt;</span>
</code></pre>
</li>
<li>
<p><strong>iOS</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>NSBluetoothAlwaysUsageDescription<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>å¼€å¯è“ç‰™<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>NSBluetoothPeripheralUsageDescription<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>è“ç‰™<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>UIBackgroundModes<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>bluetooth-central<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span>
</code></pre>
</li>
</ul>
<h2 data-id="heading-15">ç±»å‹å®šä¹‰</h2>
<h3 data-id="heading-16">è®¾å¤‡ä¿¡æ¯</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">BLEDevice</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>       <span class="hljs-comment">// è®¾å¤‡åç§°</span>
  <span class="hljs-attr">deviceId</span>: <span class="hljs-built_in">string</span>   <span class="hljs-comment">// è®¾å¤‡å”¯ä¸€æ ‡è¯†</span>
  <span class="hljs-attr">rssi</span>: <span class="hljs-built_in">number</span>       <span class="hljs-comment">// ä¿¡å·å¼ºåº¦</span>
}
</code></pre>
<h3 data-id="heading-17">è¿æ¥é…ç½®</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ConnectOptions</span> {
  <span class="hljs-attr">serviceUuid</span>: <span class="hljs-built_in">string</span>   <span class="hljs-comment">// ä¸»æœåŠ¡UUID</span>
  <span class="hljs-attr">writeUuid</span>: <span class="hljs-built_in">string</span>     <span class="hljs-comment">// å†™å…¥ç‰¹å¾UUID</span>
  <span class="hljs-attr">notifyUuid</span>: <span class="hljs-built_in">string</span>    <span class="hljs-comment">// é€šçŸ¥ç‰¹å¾UUID</span>
  autoConnect?: <span class="hljs-built_in">boolean</span> <span class="hljs-comment">// æ˜¯å¦è‡ªåŠ¨é‡è¿</span>
}
</code></pre>
<h3 data-id="heading-18">æœåŠ¡ä¿¡æ¯</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ServiceAndCharacteristics</span> {
  <span class="hljs-attr">service</span>: <span class="hljs-built_in">string</span>         <span class="hljs-comment">// æœåŠ¡UUID</span>
  <span class="hljs-attr">characteristics</span>: <span class="hljs-built_in">string</span>[] <span class="hljs-comment">// ç‰¹å¾å€¼åˆ—è¡¨</span>
}
</code></pre>
<h3 data-id="heading-19">è¿æ¥çŠ¶æ€</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ConnectionState</span> = {
  <span class="hljs-attr">status</span>: <span class="hljs-string">'connected'</span> | <span class="hljs-string">'disconnected'</span> | <span class="hljs-string">'failed'</span>
  message?: <span class="hljs-built_in">string</span>
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>