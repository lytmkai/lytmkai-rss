<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ğŸ› ï¸ ä¿®å¤ macOS é¢„è§ˆä¹±ç  PDF çš„ç»ˆææ–¹æ¡ˆï¼šç”¨ Python æ‰¹é‡â€œå›¾åƒåŒ–â€æ‹¯æ•‘æ— æ³•æ‰“å¼€çš„ PDF]]></title>    <link>https://juejin.cn/post/7587252766832001066</link>    <guid>https://juejin.cn/post/7587252766832001066</guid>    <pubDate>2025-12-24T13:51:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587252766832001066" data-draft-id="7587265840065675270" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ğŸ› ï¸ ä¿®å¤ macOS é¢„è§ˆä¹±ç  PDF çš„ç»ˆææ–¹æ¡ˆï¼šç”¨ Python æ‰¹é‡â€œå›¾åƒåŒ–â€æ‹¯æ•‘æ— æ³•æ‰“å¼€çš„ PDF"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-24T13:51:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="90åæ™¨ä»”"/> <meta itemprop="url" content="https://juejin.cn/user/2717648476705773"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ğŸ› ï¸ ä¿®å¤ macOS é¢„è§ˆä¹±ç  PDF çš„ç»ˆææ–¹æ¡ˆï¼šç”¨ Python æ‰¹é‡â€œå›¾åƒåŒ–â€æ‹¯æ•‘æ— æ³•æ‰“å¼€çš„ PDF
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648476705773/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    90åæ™¨ä»”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T13:51:00.000Z" title="Wed Dec 24 2025 13:51:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>é€‚ç”¨äººç¾¤</strong>ï¼šMac ç”¨æˆ·ã€åŠå…¬æ—ã€ç§‘ç ”äººå‘˜ã€PDF å¤„ç†çˆ±å¥½è€…<br/>
<strong>å…³é”®è¯</strong>ï¼šmacOS PDF ä¹±ç ã€é¢„è§ˆæ‰“ä¸å¼€ PDFã€Python æ‰¹é‡ä¿®å¤ PDFã€PyMuPDFã€PDF è½¬å›¾åƒ</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ” é—®é¢˜èƒŒæ™¯</h2>
<p>ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼Ÿ</p>
<ul>
<li>åœ¨ Chromeã€Safari ç­‰<strong>æµè§ˆå™¨ä¸­èƒ½æ­£å¸¸æŸ¥çœ‹ PDF</strong>ï¼›</li>
<li>ä½†ç”¨ macOS è‡ªå¸¦çš„ <strong>â€œé¢„è§ˆâ€ï¼ˆPreviewï¼‰æˆ– PDF é˜…è¯»å™¨æ‰“å¼€æ—¶ï¼Œé¡µé¢ç©ºç™½æˆ–æ˜¾ç¤ºä¹±ç </strong>ï¼Ÿ</li>
</ul>
<p>è¿™é€šå¸¸ä¸æ˜¯æ–‡ä»¶æŸåï¼Œè€Œæ˜¯ PDF ä½¿ç”¨äº†<strong>éæ ‡å‡†å­—ä½“åµŒå…¥ã€JavaScriptã€è¡¨å•å­—æ®µæˆ–ç‰¹æ®Šç¼–ç </strong>ï¼Œè€Œ macOS é¢„è§ˆå¯¹è¿™äº›ç‰¹æ€§æ”¯æŒæœ‰é™ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>æ ¹æœ¬åŸå› </strong>ï¼šPDF ç»“æ„ä¸è§„èŒƒï¼Œä½†æµè§ˆå™¨â€œå®¹é”™èƒ½åŠ›å¼ºâ€ï¼Œæœ¬åœ°é˜…è¯»å™¨åˆ™ä¸¥æ ¼è§£æå¤±è´¥ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">âœ… è§£å†³æ€è·¯ï¼šç”¨â€œå›¾åƒåŒ–â€ç»•è¿‡æ‰€æœ‰å…¼å®¹æ€§é—®é¢˜</h2>
<p>æœ€å¯é ã€é€šç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š</p>
<blockquote>
<p><strong>å°†æ¯ä¸€é¡µ PDF æ¸²æŸ“ä¸ºé«˜åˆ†è¾¨ç‡å›¾ç‰‡ï¼Œå†é‡æ–°å°è£…æˆæ–°çš„ PDF æ–‡ä»¶</strong>ã€‚</p>
</blockquote>
<p>è¿™æ ·ç”Ÿæˆçš„ PDFï¼š</p>
<ul>
<li>ä¸ä¾èµ–ä»»ä½•å­—ä½“ï¼›</li>
<li>æ—  JavaScript/è¡¨å•ç­‰å¤æ‚å…ƒç´ ï¼›</li>
<li><strong>100% å…¼å®¹æ‰€æœ‰è®¾å¤‡å’Œé˜…è¯»å™¨</strong>ï¼ˆåŒ…æ‹¬ iPhoneã€iPadã€Windowsã€Macï¼‰ï¼›</li>
<li>å”¯ä¸€ä»£ä»·ï¼š<strong>æ–‡ä»¶ä½“ç§¯ç•¥å¤§ + æ— æ³•å¤åˆ¶æ–‡æœ¬</strong>ï¼ˆè‹¥åŸå§‹æ˜¯æ‰«æä»¶åˆ™æ— å½±å“ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ è‡ªåŠ¨åŒ–è„šæœ¬ï¼šä¸€é”®æ‰¹é‡ä¿®å¤</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨ <strong>Python + PyMuPDFï¼ˆfitzï¼‰</strong> ç¼–å†™çš„è„šæœ¬ï¼Œä¸“ä¸º Mac ç”¨æˆ·è®¾è®¡ï¼Œæ”¯æŒï¼š</p>
<ul>
<li>è‡ªåŠ¨ä» <code>PDF/</code> æ–‡ä»¶å¤¹è¯»å–é—®é¢˜æ–‡ä»¶ï¼›</li>
<li>ä¿®å¤åç»Ÿä¸€è¾“å‡ºåˆ° <code>repairPdf/</code> æ–‡ä»¶å¤¹ï¼›</li>
<li>å¯é…ç½® DPIã€æ–‡ä»¶ååç¼€ã€è¾“å…¥/è¾“å‡ºç›®å½•åï¼›</li>
<li><strong>æ— éœ€å‘½ä»¤è¡Œå‚æ•°ï¼Œå¼€ç®±å³ç”¨</strong>ï¼</li>
</ul>
<hr/>
<h3 data-id="heading-3">ğŸ“œ å®Œæ•´è„šæœ¬ï¼ˆå«è¯¦ç»†ä¸­æ–‡æ³¨é‡Šï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-comment"># -*- coding: utf-8 -*-</span>

<span class="hljs-string">"""
ã€Mac PDF ä¹±ç ä¿®å¤å·¥å…·ã€‘
åŠŸèƒ½ï¼šå°†æ— æ³•åœ¨â€œé¢„è§ˆâ€ä¸­æ­£å¸¸æ˜¾ç¤ºçš„ PDF è½¬æ¢ä¸ºçº¯å›¾åƒ PDFï¼Œç¡®ä¿å…¨å¹³å°å…¼å®¹ã€‚
åŸç†ï¼šé€é¡µæ¸²æŸ“ PDF ä¸º PNG å›¾åƒï¼Œå†åˆæˆæ–° PDFã€‚

âœ… ä½¿ç”¨æ–¹æ³•ï¼š
1. å°†æœ¬è„šæœ¬æ”¾åœ¨ä»»æ„æ–‡ä»¶å¤¹ï¼ˆå¦‚ ~/Desktop/AITools/ï¼‰
2. åœ¨åŒçº§ç›®å½•åˆ›å»º "originalPDF" æ–‡ä»¶å¤¹ï¼Œæ”¾å…¥æ‰€æœ‰æœ‰é—®é¢˜çš„ PDF
3. ç»ˆç«¯è¿è¡Œï¼špython3 repair_pdf.py
4. ä¿®å¤åçš„æ–‡ä»¶è‡ªåŠ¨ä¿å­˜åˆ°åŒçº§ "repairPDF" æ–‡ä»¶å¤¹

ğŸ”§ é…ç½®è¯´æ˜ï¼š
- æ‰€æœ‰å¯è°ƒå‚æ•°é›†ä¸­åœ¨é¡¶éƒ¨ï¼Œä¿®æ”¹æ–¹ä¾¿
- æ”¯æŒè‡ªå®šä¹‰ DPIï¼ˆæ¸…æ™°åº¦ï¼‰ã€æ˜¯å¦åŠ  "_fixed" åç¼€ç­‰

ä½œè€…ï¼šJCodeï¼ˆåŸºäº Qwen æŠ€æœ¯æ”¯æŒï¼‰
"""</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> fitz  <span class="hljs-comment"># PyMuPDFï¼šå¼ºå¤§çš„ PDF å¤„ç†åº“</span>


<span class="hljs-comment"># ==============================</span>
<span class="hljs-comment"># ğŸ”§ ç”¨æˆ·é…ç½®åŒºï¼ˆæŒ‰éœ€ä¿®æ”¹è¿™é‡Œï¼‰</span>
<span class="hljs-comment"># ==============================</span>
INPUT_FOLDER_NAME = <span class="hljs-string">"originalPDF"</span>          <span class="hljs-comment"># åŸå§‹ PDF æ‰€åœ¨çš„å­æ–‡ä»¶å¤¹åï¼ˆå¿…é¡»å­˜åœ¨ï¼‰</span>
OUTPUT_FOLDER_NAME = <span class="hljs-string">"repairPDF"</span>   <span class="hljs-comment"># ä¿®å¤å PDF ä¿å­˜çš„å­æ–‡ä»¶å¤¹åï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºï¼‰</span>
DPI = <span class="hljs-number">150</span>                          <span class="hljs-comment"># æ¸²æŸ“åˆ†è¾¨ç‡ï¼ˆå•ä½ï¼šdots per inchï¼‰</span>
                                   <span class="hljs-comment"># æ¨èå€¼ï¼š150ï¼ˆæ™®é€šæ–‡æ¡£ï¼‰ã€200ï¼ˆå°å­—å·/å›¾è¡¨ï¼‰ã€300ï¼ˆå°åˆ·çº§ï¼‰</span>
ADD_FIXED_SUFFIX = <span class="hljs-literal">True</span>            <span class="hljs-comment"># æ˜¯å¦åœ¨è¾“å‡ºæ–‡ä»¶ååæ·»åŠ  "_fixed" åç¼€</span>
                                   <span class="hljs-comment"># è®¾ä¸º False åˆ™ä¿ç•™åŸæ–‡ä»¶åï¼ˆæ³¨æ„ï¼šå¯èƒ½è¦†ç›–ï¼ï¼‰</span>
<span class="hljs-comment"># ==============================</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">repair_pdf</span>(<span class="hljs-params">input_path, output_path, dpi=<span class="hljs-number">150</span></span>):
    <span class="hljs-string">"""
    ä¿®å¤å•ä¸ª PDF æ–‡ä»¶ï¼šå°†å…¶æ¯ä¸€é¡µè½¬ä¸ºå›¾åƒï¼Œå†åˆå¹¶ä¸ºæ–° PDF
    
    :param input_path: åŸå§‹ PDF çš„å®Œæ•´è·¯å¾„
    :param output_path: ä¿®å¤å PDF çš„å®Œæ•´è·¯å¾„
    :param dpi: æ¸²æŸ“åˆ†è¾¨ç‡ï¼Œè¶Šé«˜è¶Šæ¸…æ™°ä½†æ–‡ä»¶è¶Šå¤§
    """</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># æ‰“å¼€åŸå§‹ PDF æ–‡æ¡£</span>
        doc = fitz.<span class="hljs-built_in">open</span>(input_path)
        <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„ç©º PDF æ–‡æ¡£ç”¨äºè¾“å‡º</span>
        new_doc = fitz.<span class="hljs-built_in">open</span>()
        <span class="hljs-comment"># åˆ›å»ºç¼©æ”¾çŸ©é˜µï¼šPDF é»˜è®¤ DPI æ˜¯ 72ï¼Œæ‰€ä»¥ (dpi / 72) æ˜¯ç¼©æ”¾æ¯”ä¾‹</span>
        mat = fitz.Matrix(dpi / <span class="hljs-number">72</span>, dpi / <span class="hljs-number">72</span>)

        <span class="hljs-comment"># éå†æ¯ä¸€é¡µ</span>
        <span class="hljs-keyword">for</span> page_num <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(doc.page_count):
            page = doc[page_num]
            <span class="hljs-comment"># å°†é¡µé¢æ¸²æŸ“ä¸ºä½å›¾ï¼ˆalpha=False è¡¨ç¤ºä¸å¸¦é€æ˜é€šé“ï¼Œå‡å°ä½“ç§¯ï¼‰</span>
            pix = page.get_pixmap(matrix=mat, alpha=<span class="hljs-literal">False</span>)
            <span class="hljs-comment"># å°†å›¾åƒè½¬ä¸º PNG å­—èŠ‚æµï¼ˆä¹Ÿå¯ç”¨ "jpeg"ï¼Œä½† PNG æ— æŸæ›´å®‰å…¨ï¼‰</span>
            img_data = pix.tobytes(<span class="hljs-string">"png"</span>)
            <span class="hljs-comment"># å®šä¹‰å›¾åƒæ’å…¥åŒºåŸŸï¼ˆä»å·¦ä¸Šè§’ 0,0 å¼€å§‹ï¼Œå®½é«˜ä¸ºå›¾åƒå°ºå¯¸ï¼‰</span>
            img_rect = fitz.Rect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, pix.width, pix.height)

            <span class="hljs-comment"># åœ¨æ–° PDF ä¸­æ–°å»ºä¸€é¡µï¼Œå°ºå¯¸ä¸å›¾åƒä¸€è‡´</span>
            new_page = new_doc.new_page(width=pix.width, height=pix.height)
            <span class="hljs-comment"># å°†å›¾åƒæ’å…¥è¯¥é¡µ</span>
            new_page.insert_image(img_rect, stream=img_data)

        <span class="hljs-comment"># ä¿å­˜æ–° PDFï¼ˆgarbage=4 æ¸…ç†å†—ä½™å¯¹è±¡ï¼Œdeflate=True å‹ç¼©ï¼‰</span>
        new_doc.save(output_path, garbage=<span class="hljs-number">4</span>, deflate=<span class="hljs-literal">True</span>)
        new_doc.close()
        doc.close()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… å·²ä¿®å¤: <span class="hljs-subst">{os.path.basename(output_path)}</span>"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ å¤„ç†å¤±è´¥ <span class="hljs-subst">{input_path}</span>: <span class="hljs-subst">{e}</span>"</span>)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">batch_repair</span>(<span class="hljs-params">input_folder, output_folder, dpi=<span class="hljs-number">150</span>, add_suffix=<span class="hljs-literal">True</span></span>):
    <span class="hljs-string">"""
    æ‰¹é‡å¤„ç†æŒ‡å®šæ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰ PDF æ–‡ä»¶
    
    :param input_folder: è¾“å…¥æ–‡ä»¶å¤¹è·¯å¾„
    :param output_folder: è¾“å‡ºæ–‡ä»¶å¤¹è·¯å¾„ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºï¼‰
    :param dpi: æ¸²æŸ“ DPI
    :param add_suffix: æ˜¯å¦æ·»åŠ  "_fixed" åç¼€
    """</span>
    <span class="hljs-comment"># æ£€æŸ¥è¾“å…¥æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.isdir(input_folder):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”™è¯¯ï¼šè¾“å…¥æ–‡ä»¶å¤¹ä¸å­˜åœ¨ â†’ <span class="hljs-subst">{input_folder}</span>"</span>)
        <span class="hljs-keyword">return</span>

    <span class="hljs-comment"># è‡ªåŠ¨åˆ›å»ºè¾“å‡ºæ–‡ä»¶å¤¹ï¼ˆexist_ok=True è¡¨ç¤ºå¦‚æœå·²å­˜åœ¨ä¹Ÿä¸æŠ¥é”™ï¼‰</span>
    os.makedirs(output_folder, exist_ok=<span class="hljs-literal">True</span>)

    <span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰ .pdf æ–‡ä»¶ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰</span>
    pdf_files = [
        f <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> os.listdir(input_folder)
        <span class="hljs-keyword">if</span> f.lower().endswith(<span class="hljs-string">'.pdf'</span>)
    ]

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> pdf_files:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸  è¾“å…¥æ–‡ä»¶å¤¹ä¸­æ²¡æœ‰æ‰¾åˆ° PDF æ–‡ä»¶"</span>)
        <span class="hljs-keyword">return</span>

    <span class="hljs-comment"># é€ä¸ªå¤„ç†</span>
    <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> pdf_files:
        input_file = os.path.join(input_folder, filename)
        base_name = os.path.splitext(filename)[<span class="hljs-number">0</span>]  <span class="hljs-comment"># å»æ‰ .pdf åç¼€</span>
        <span class="hljs-keyword">if</span> add_suffix:
            output_filename = <span class="hljs-string">f"<span class="hljs-subst">{base_name}</span>_fixed.pdf"</span>
        <span class="hljs-keyword">else</span>:
            output_filename = <span class="hljs-string">f"<span class="hljs-subst">{base_name}</span>.pdf"</span>  <span class="hljs-comment"># è°¨æ…ï¼šå¯èƒ½è¦†ç›–åŸå§‹æ–‡ä»¶ï¼</span>
        output_file = os.path.join(output_folder, output_filename)
        repair_pdf(input_file, output_file, dpi=dpi)


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># è‡ªåŠ¨è·å–è„šæœ¬æ‰€åœ¨ç›®å½•</span>
    script_dir = os.path.dirname(os.path.abspath(__file__))
    <span class="hljs-comment"># æ„å»ºè¾“å…¥/è¾“å‡ºæ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„</span>
    input_dir = os.path.join(script_dir, INPUT_FOLDER_NAME)
    output_dir = os.path.join(script_dir, OUTPUT_FOLDER_NAME)

    <span class="hljs-comment"># æ‰“å°å½“å‰é…ç½®ï¼Œä¾¿äºç”¨æˆ·ç¡®è®¤</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âš™ï¸  é…ç½®:"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   è¾“å…¥æ–‡ä»¶å¤¹: <span class="hljs-subst">{input_dir}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   è¾“å‡ºæ–‡ä»¶å¤¹: <span class="hljs-subst">{output_dir}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   DPI: <span class="hljs-subst">{DPI}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   æ·»åŠ  '_fixed' åç¼€: <span class="hljs-subst">{ADD_FIXED_SUFFIX}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">50</span>)

    <span class="hljs-comment"># æ‰§è¡Œæ‰¹é‡ä¿®å¤</span>
    batch_repair(
        input_folder=input_dir,
        output_folder=output_dir,
        dpi=DPI,
        add_suffix=ADD_FIXED_SUFFIX
    )

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ‰ ä¿®å¤å®Œæˆï¼ç»“æœå·²ä¿å­˜è‡³:\n<span class="hljs-subst">{output_dir}</span>"</span>)
</code></pre>
<hr/>
<h2 data-id="heading-4">â–¶ï¸ ä½¿ç”¨æ­¥éª¤ï¼ˆè¶…ç®€å•ï¼‰</h2>
<ol>
<li>
<p><strong>å®‰è£…ä¾èµ–</strong>ï¼ˆåªéœ€ä¸€æ¬¡ï¼‰ï¼š</p>
<pre><code class="hljs">pip3 install PyMuPDF
</code></pre>
</li>
<li>
<p><strong>å‡†å¤‡æ–‡ä»¶å¤¹ç»“æ„</strong>ï¼ˆä»¥æ¡Œé¢ä¸ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">~<span class="hljs-regexp">/Desktop/</span><span class="hljs-title class_">AITools</span>/
â”œâ”€â”€ originalPDF/         â† æŠŠä¹±ç  <span class="hljs-variable constant_">PDF</span> å…¨æ”¾è¿™é‡Œ
â”œâ”€â”€ repairPDF/           â† ä¿®å¤å¥½çš„ <span class="hljs-variable constant_">PDF</span> ä¼šæ”¾è¿™é‡Œ
â””â”€â”€ repair_pdf.<span class="hljs-property">py</span>        â† æœ¬è„šæœ¬
</code></pre>
</li>
<li>
<p><strong>è¿è¡Œè„šæœ¬</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">cd ~<span class="hljs-regexp">/Desktop/</span><span class="hljs-title class_">AITools</span>
python3 repair_pdf.<span class="hljs-property">py</span>
</code></pre>
</li>
<li>
<p><strong>æŸ¥çœ‹ç»“æœ</strong>ï¼š</p>
<ul>
<li>ä¿®å¤åçš„ PDF ä¼šå‡ºç°åœ¨ <code>AITools/repairPdf/</code>ï¼›</li>
<li>æ–‡ä»¶åå¦‚ <code>report_fixed.pdf</code>ï¼›</li>
<li>ç”¨â€œé¢„è§ˆâ€æ‰“å¼€ï¼Œä¸€åˆ‡æ­£å¸¸ï¼</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-5">âš ï¸ æ³¨æ„äº‹é¡¹</h2>
<ul>
<li><strong>æ–‡æœ¬ä¸å¯å¤åˆ¶</strong>ï¼šå› ä¸º PDF å·²è½¬ä¸ºå›¾åƒã€‚å¦‚æœä½ éœ€è¦å¯æœç´¢æ–‡æœ¬ï¼Œè¯·è€ƒè™‘ <code>ocrmypdf</code>ï¼ˆéœ€é¢å¤–å®‰è£… Tesseract OCRï¼‰ã€‚</li>
<li><strong>æ–‡ä»¶ä½“ç§¯å¢å¤§</strong>ï¼š150 DPI ä¸‹ï¼Œä¸€é¡µçº¦ 200~500 KBã€‚å¯é€šè¿‡é™ä½ DPIï¼ˆå¦‚ 120ï¼‰å‡å°ä½“ç§¯ã€‚</li>
<li><strong>ä¸é€‚ç”¨äºåŠ å¯† PDF</strong>ï¼šè„šæœ¬æ— æ³•å¤„ç†å¯†ç ä¿æŠ¤çš„æ–‡ä»¶ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ğŸ’¡ è¿›é˜¶å»ºè®®</h2>
<ul>
<li><strong>æ·»åŠ å³é”®æœåŠ¡</strong>ï¼šç”¨ Automator å°è£…æ­¤è„šæœ¬ï¼Œå®ç°â€œé€‰ä¸­æ–‡ä»¶å¤¹ â†’ å³é”®ä¿®å¤â€ï¼›</li>
<li><strong>é›†æˆ OCR</strong>ï¼šåœ¨å›¾åƒ PDF ä¸Šå åŠ  OCR å±‚ï¼Œå…¼é¡¾å…¼å®¹æ€§ä¸å¯æœç´¢æ€§ï¼›</li>
<li><strong>GUI ç‰ˆæœ¬</strong>ï¼šç”¨ Tkinter æˆ– PyQt åšå›¾å½¢ç•Œé¢ï¼Œé€‚åˆéæŠ€æœ¯ç”¨æˆ·ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">ğŸ™Œ ç»“è¯­</h2>
<p>è¿™ä¸ªå°å·¥å…·è§£å†³äº†æˆ‘åœ¨ Mac ä¸Šé•¿æœŸè¢« PDF ä¹±ç å›°æ‰°çš„é—®é¢˜ã€‚å¸Œæœ›å®ƒä¹Ÿèƒ½å¸®åˆ°ä½ ï¼å¦‚æœä½ è§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€è½¬å‘ç»™åŒæ ·è¢«â€œé¢„è§ˆæ‰“ä¸å¼€ PDFâ€æŠ˜ç£¨çš„æœ‹å‹ã€‚</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Ffengziii%2Fscript-tool" target="_blank" title="https://gitee.com/fengziii/script-tool" ref="nofollow noopener noreferrer">è„šæœ¬ä¸‹è½½åœ°å€</a></p>
</blockquote>
<hr/>
<p><strong>ç¥ä½  PDF ä»æ­¤ä¸å†ä¹±ç ï¼Œå·¥ä½œæ›´é«˜æ•ˆï¼</strong> ğŸ„ï¼ˆæ­£å¥½ä»Šå¤©æ˜¯å¹³å®‰å¤œ ğŸ˜Šï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å‰ç«¯å­¦ä¹ AIã€‘å¤§æ¨¡å‹è°ƒç”¨å®æˆ˜]]></title>    <link>https://juejin.cn/post/7587284708946657295</link>    <guid>https://juejin.cn/post/7587284708946657295</guid>    <pubDate>2025-12-24T12:10:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587284708946657295" data-draft-id="7586855770505379874" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å‰ç«¯å­¦ä¹ AIã€‘å¤§æ¨¡å‹è°ƒç”¨å®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-24T12:10:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æ³¥ç§è·èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289442030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å‰ç«¯å­¦ä¹ AIã€‘å¤§æ¨¡å‹è°ƒç”¨å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289442030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æ³¥ç§è·èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T12:10:41.000Z" title="Wed Dec 24 2025 12:10:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="arduino-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff}.hljs-subst,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#434f54}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-name,.hljs-selector-tag{color:#00979d}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-literal{color:#d35400}.hljs-link,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#00979d}.hljs-deletion,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#005c5f}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-comment{color:rgba(149,165,166,.8)}.hljs-meta-keyword{color:#728e00}.hljs-meta{color:#434f54}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-function{color:#728e00}.hljs-number{color:#8a7b52}</style><h2 data-id="heading-0">æœ¬åœ°éƒ¨ç½²ï¼šåŸºäºOllamaè°ƒç”¨å¼€æºå¤§æ¨¡å‹</h2>
<p>Ollama æ˜¯è½»é‡çº§æœ¬åœ°å¤§æ¨¡å‹è¿è¡Œæ¡†æ¶ï¼Œæ— éœ€ä¾èµ–äº‘ç«¯æœåŠ¡ï¼Œå¯å¿«é€Ÿéƒ¨ç½²é€šä¹‰åƒé—®ã€Llama ç­‰å¼€æºå¤§æ¨¡å‹ï¼Œç‰¹åˆ«é€‚åˆæ— ç½‘ç»œç¯å¢ƒæˆ–éšç§æ•æ„Ÿåœºæ™¯ã€‚</p>
<h3 data-id="heading-1">æ­¥éª¤1ï¼šå®‰è£…Ollama</h3>
<p>ä»å®˜æ–¹ç½‘ç«™ä¸‹è½½å¹¶å®‰è£…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Follama.com%2F" target="_blank" title="https://ollama.com/" ref="nofollow noopener noreferrer">ollama.com/</a></p>
<h3 data-id="heading-2">æ­¥éª¤2ï¼šæ‹‰å–å¹¶è¿è¡Œå¤§æ¨¡å‹ï¼ˆä»¥é€šä¹‰åƒé—®3-vl 2Bä¸ºä¾‹ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‹‰å–å¹¶è¿è¡Œæ¨¡å‹ï¼ˆé¦–æ¬¡æ‰§è¡Œä¼šè‡ªåŠ¨ä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼‰</span>
ollama run qwen3-vl:2b

<span class="hljs-comment"># æŸ¥çœ‹æœ¬åœ°å·²ä¸‹è½½çš„æ‰€æœ‰å¤§æ¨¡å‹</span>
ollama <span class="hljs-built_in">ls</span>
</code></pre>
<blockquote>
<p><strong>å…³é”®æç¤º</strong>ï¼šé¦–æ¬¡è¿è¡Œéœ€ä¿æŒç½‘ç»œé€šç•…ï¼Œä¸‹è½½è€—æ—¶å–å†³äºæ¨¡å‹å¤§å°å’Œç½‘ç»œé€Ÿåº¦ï¼›<code>2b</code> ä»£è¡¨æ¨¡å‹å‚æ•°é‡ï¼ˆ20äº¿å‚æ•°ï¼‰ï¼Œå‚æ•°é‡è¶Šå°ï¼Œå¯¹æœ¬åœ°ç¡¬ä»¶ï¼ˆå†…å­˜ã€æ˜¾å¡ï¼‰çš„è¦æ±‚è¶Šä½ï¼Œè¿è¡Œé€Ÿåº¦ä¹Ÿè¶Šå¿«ã€‚</p>
</blockquote>
<h3 data-id="heading-3">æ­¥éª¤3ï¼šç”¨LangChainè°ƒç”¨Ollama</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®‰è£…LangChainå¯¹æ¥Ollamaçš„ä¾èµ–åŒ…</span>
pip install langchain-ollama
<span class="hljs-keyword">from</span> langchain_ollama.chat_models <span class="hljs-keyword">import</span> ChatOllama

<span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹ï¼ˆæ¨¡å‹åç§°éœ€ä¸æœ¬åœ°è¿è¡Œçš„æ¨¡å‹ä¸€è‡´ï¼‰</span>
llm = ChatOllama(model=<span class="hljs-string">"qwen3:0.6b"</span>)
<span class="hljs-comment"># è°ƒç”¨æ¨¡å‹å¹¶æ‰“å°ç»“æœ</span>
output = llm.invoke(<span class="hljs-string">"ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±"</span>)
<span class="hljs-built_in">print</span>(output.content)
</code></pre>
<blockquote>
<p><strong>å‰ç½®æ¡ä»¶</strong>ï¼šè¿è¡Œä¸Šè¿°ä»£ç å‰ï¼Œéœ€ç¡®ä¿ Ollama æœåŠ¡å·²å¯åŠ¨ï¼ˆå¯é€šè¿‡ç»ˆç«¯æ‰§è¡Œ <code>ollama run æ¨¡å‹å</code> å¯åŠ¨å¯¹åº”æ¨¡å‹æœåŠ¡ï¼‰ã€‚</p>
</blockquote>
<h2 data-id="heading-4">äºŒã€äº‘ç«¯è°ƒç”¨ï¼šé˜¿é‡Œç™¾ç‚¼å¤§æ¨¡å‹ï¼ˆé€šä¹‰åƒé—®ï¼‰</h2>
<p>é˜¿é‡Œç™¾ç‚¼æ˜¯é˜¿é‡Œäº‘æ¨å‡ºçš„ä¼ä¸šçº§å¤§æ¨¡å‹æœåŠ¡å¹³å°ï¼Œæ”¯æŒé€šè¿‡ OpenAI å…¼å®¹æ¥å£ã€LangChain ç­‰æ–¹å¼è°ƒç”¨é€šä¹‰åƒé—®ç³»åˆ—æ¨¡å‹ï¼Œå…·å¤‡ç¨³å®šç®—åŠ›ã€çµæ´»æ‰©å±•çš„ä¼˜åŠ¿ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒæˆ–å¼ºç®—åŠ›éœ€æ±‚çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-5">æ­¥éª¤1ï¼šè·å–API Keyï¼ˆæ ¸å¿ƒé‰´æƒå‡­è¯ï¼‰</h3>
<ol>
<li>ç™»å½•é˜¿é‡Œç™¾ç‚¼æ§åˆ¶å°ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2F" target="_blank" title="https://bailian.console.aliyun.com/" ref="nofollow noopener noreferrer">bailian.console.aliyun.com/</a></li>
<li>å®Œæˆå®åè®¤è¯åï¼Œåœ¨æ§åˆ¶å°çš„ã€ŒAPI-KEY ç®¡ç†ã€æ¨¡å—åˆ›å»ºå¹¶è·å– API Keyï¼ˆç”¨äºæ¥å£è°ƒç”¨çš„èº«ä»½é‰´æƒï¼‰ã€‚</li>
</ol>
<blockquote>
<p><strong>å…³é”®æç¤º</strong>ï¼šAPI Key å±äºæ•æ„Ÿä¿¡æ¯ï¼Œéœ€å¦¥å–„ä¿ç®¡ï¼Œé¿å…å…¬å¼€æ³„éœ²ï¼ˆå¦‚æäº¤è‡³å¼€æºä»“åº“ã€éšæ„åˆ†äº«ï¼‰ã€‚
è°ƒç”¨å‰éœ€ç¡®ä¿é˜¿é‡Œäº‘è´¦å·æœ‰å¯ç”¨é¢åº¦ï¼Œå¦åˆ™ä¼šæç¤ºæƒé™ä¸è¶³æˆ–é¢åº¦è€—å°½ã€‚</p>
</blockquote>
<h3 data-id="heading-6">æ­¥éª¤2ï¼šè°ƒç”¨å¤§æ¨¡å‹ï¼ˆä¸¤ç§å¸¸ç”¨æ–¹å¼ï¼‰</h3>
<h4 data-id="heading-7">æ–¹å¼ä¸€ï¼šé€šè¿‡OpenAI SDKè°ƒç”¨</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®‰è£…OpenAI SDKä¾èµ–åŒ…</span>
pip install openai
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI

<span class="hljs-comment"># åˆå§‹åŒ–å®¢æˆ·ç«¯ï¼ˆé…ç½®é˜¿é‡Œç™¾ç‚¼çš„é‰´æƒä¿¡æ¯å’Œå…¼å®¹æ¥å£ï¼‰</span>
client = OpenAI(
	<span class="hljs-comment"># æ›¿æ¢ä¸ºè‡ªå·±çš„API Key</span>
    api_key=<span class="hljs-string">"ä½ çš„é˜¿é‡Œç™¾ç‚¼API Key"</span>,  
    <span class="hljs-comment"># é˜¿é‡Œç™¾ç‚¼OpenAIå…¼å®¹æ¥å£åœ°å€</span>
    base_url=<span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>,  
)

<span class="hljs-comment"># è°ƒç”¨æ¨¡å‹ç”Ÿæˆå›å¤</span>
completion = client.chat.completions.create(
	<span class="hljs-comment"># æŒ‡å®šé€šä¹‰åƒé—®æ¨¡å‹ç‰ˆæœ¬ï¼ˆå¦‚qwen-pluså¢å¼ºç‰ˆã€qwen-turboè½»é‡ç‰ˆï¼‰</span>
    model=<span class="hljs-string">"qwen-plus"</span>,  
    messages=[
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ å«å°Qï¼Œæ˜¯ä¸€åä¸“ä¸šçš„ç¿»è¯‘åŠ©æ‰‹"</span>},
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ æ˜¯è°ï¼Ÿ"</span>},
    ],
)

<span class="hljs-comment"># æ‰“å°æ¨¡å‹å›å¤å†…å®¹</span>
<span class="hljs-built_in">print</span>(completion.choices[<span class="hljs-number">0</span>].message.content)
</code></pre>
<h4 data-id="heading-8">æ–¹å¼äºŒï¼šé€šè¿‡LangChainè°ƒç”¨</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®‰è£…LangChainå¯¹æ¥OpenAIçš„ä¾èµ–åŒ…ï¼ˆé€‚é…é˜¿é‡Œç™¾ç‚¼å…¼å®¹æ¥å£ï¼‰</span>
pip install langchain-openai
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI

<span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹ï¼ˆé€‚é…é˜¿é‡Œç™¾ç‚¼æ¥å£ï¼‰</span>
llm = ChatOpenAI(
	<span class="hljs-comment"># é˜¿é‡Œç™¾ç‚¼çš„é€šä¹‰åƒé—®æ¨¡å‹åç§°</span>
    model_name=<span class="hljs-string">"qwen-plus"</span>,  
    <span class="hljs-comment"># é˜¿é‡Œç™¾ç‚¼OpenAIå…¼å®¹æ¥å£åœ°å€</span>
    base_url=<span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>,  
    <span class="hljs-comment"># æ›¿æ¢ä¸ºè‡ªå·±çš„API Key</span>
    api_key=<span class="hljs-string">"ä½ çš„é˜¿é‡Œç™¾ç‚¼API Key"</span>,  
)

<span class="hljs-comment"># è°ƒç”¨æ¨¡å‹å¹¶æ‰“å°ç»“æœ</span>
response = llm.invoke(
    [
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ å«å°Qï¼Œæ˜¯ä¸€åä¸“ä¸šçš„ç¿»è¯‘åŠ©æ‰‹"</span>},
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ æ˜¯è°ï¼Ÿ"</span>},
    ],
)
<span class="hljs-built_in">print</span>(response.content)
</code></pre>
<h2 data-id="heading-9">ä¸‰ã€æ ¸å¿ƒæ³¨æ„äº‹é¡¹</h2>
<ul>
<li>å¤§æ¨¡å‹è°ƒç”¨ä¸»è¦åˆ†ä¸ºä¸¤ç§æ¨¡å¼ï¼š<strong>åŒæ­¥è°ƒç”¨</strong>ï¼ˆä¸€æ¬¡æ€§è·å–å®Œæ•´å›å¤ç»“æœï¼Œé€‚åˆç®€å•é—®ç­”ï¼‰å’Œ <strong>æµå¼è°ƒç”¨</strong>ï¼ˆé€å­—/é€æ®µå®æ—¶è¾“å‡ºï¼Œè´´è¿‘çœŸå®èŠå¤©ä½“éªŒï¼Œé€‚åˆé•¿æ–‡æœ¬ç”Ÿæˆåœºæ™¯ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-10">å››ã€å‚è€ƒæ–‡æ¡£</h2>
<ul>
<li>Ollama å®˜æ–¹å¤§æ¨¡å‹åˆ—è¡¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Follama.com%2Fsearch" target="_blank" title="https://ollama.com/search" ref="nofollow noopener noreferrer">ollama.com/search</a></li>
<li>LangChain å¯¹æ¥ Ollama å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Foss%2Fpython%2Fintegrations%2Fchat%2Follama" target="_blank" title="https://docs.langchain.com/oss/python/integrations/chat/ollama" ref="nofollow noopener noreferrer">docs.langchain.com/oss/python/â€¦</a></li>
<li>é˜¿é‡Œç™¾ç‚¼å¼€æ”¾å¹³å°æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2F%3Ftab%3Ddoc%23%2Fdoc" target="_blank" title="https://bailian.console.aliyun.com/?tab=doc#/doc" ref="nofollow noopener noreferrer">bailian.console.aliyun.com/?tab=doc#/dâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†è®© AI è‡ªç”±å‘æŒ¥äº†ï¼ç”¨ LangChain + Zod å¼ºåˆ¶å®ƒè¾“å‡ºåˆæ³• JSON]]></title>    <link>https://juejin.cn/post/7587074669818003482</link>    <guid>https://juejin.cn/post/7587074669818003482</guid>    <pubDate>2025-12-24T12:39:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587074669818003482" data-draft-id="7587074669817921562" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†è®© AI è‡ªç”±å‘æŒ¥äº†ï¼ç”¨ LangChain + Zod å¼ºåˆ¶å®ƒè¾“å‡ºåˆæ³• JSON"/> <meta itemprop="keywords" content="LangChain,LLM,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-24T12:39:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xhxxx"/> <meta itemprop="url" content="https://juejin.cn/user/3235201610941578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†è®© AI è‡ªç”±å‘æŒ¥äº†ï¼ç”¨ LangChain + Zod å¼ºåˆ¶å®ƒè¾“å‡ºåˆæ³• JSON
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3235201610941578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xhxxx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T12:39:37.000Z" title="Wed Dec 24 2025 12:39:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”¨ LangChain + Zod æ„å»ºç±»å‹å®‰å…¨çš„ AI ç»“æ„åŒ–è¾“å‡º â€”â€” ä»â€œä¸€å¥è¯è§£é‡Š Promiseâ€å¼€å§‹</h2>
<p>å¤§æ¨¡å‹å¾ˆèªæ˜ï¼Œä½†ä¹Ÿå¾ˆâ€œè‡ªç”±â€ã€‚<br/>
ä½ è®©å®ƒè§£é‡Š <code>Promise</code>ï¼Œå®ƒå¯èƒ½å›ä½ ä¸€æ®µä¼˜ç¾çš„æ•£æ–‡ï¼›<br/>
ä½ æƒ³è¦ä¸€ä¸ªå¹²å‡€çš„ JSONï¼Œå®ƒå´åœ¨å‰ååŠ ä¸Šâ€œå¥½çš„ï¼â€â€œå¸Œæœ›è¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼â€ã€‚</p>
<p>è¿™ç§â€œè‡ªç”±å‘æŒ¥â€åœ¨èŠå¤©åœºæ™¯å¾ˆå‹å¥½ï¼Œä½†åœ¨å·¥ç¨‹å®è·µä¸­å´æ˜¯ç¾éš¾â€”â€”  <strong>æˆ‘ä»¬æ— æ³•æŠŠä¸€æ®µä¸ç¡®å®šçš„æ–‡æœ¬ï¼Œç›´æ¥å½“ä½œç»“æ„åŒ–æ•°æ®ä½¿ç”¨ã€‚</strong></p>
<p>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå¦‚ä½•è®©å¤§æ¨¡å‹ï¼ˆLLMï¼‰ä¸åªæ˜¯â€œèŠå¤©â€ï¼Œè€Œæ˜¯æˆä¸ºä¸€ä¸ª<strong>å¯é çš„æ•°æ®ç”Ÿæˆå™¨</strong>ï¼Ÿ</p>
<p>æ¯”å¦‚ï¼šè¾“å…¥ <code>"Promise"</code>ï¼Œè®©å®ƒè¿”å›ä¸€ä¸ªä¸¥æ ¼ç¬¦åˆä»¥ä¸‹æ ¼å¼çš„ JSONï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Promise"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"core"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„å¯¹è±¡"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"useCase"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"AJAX è¯·æ±‚"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"å®šæ—¶å™¨å°è£…"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"difficulty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸­ç­‰"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™å¬èµ·æ¥ç®€å•ï¼Œä½†å®é™…å¼€å‘ä¸­ä¼šé‡åˆ°ä¸‰å¤§éš¾é¢˜ï¼š</p>
<ol>
<li><strong>æ¨¡å‹æ€»çˆ±åŠ è§£é‡Šæ–‡å­—</strong>ï¼Œå¯¼è‡´æ— æ³•ç›´æ¥ <code>JSON.parse</code></li>
<li><strong>å­—æ®µåæˆ–ç±»å‹å¯èƒ½å‡ºé”™</strong>ï¼ˆæ¯”å¦‚æŠŠ <code>useCase</code> å†™æˆ <code>usecase</code>ï¼‰</li>
<li><strong>TypeScript æ‹¿ä¸åˆ°ç²¾ç¡®ç±»å‹</strong>ï¼Œåªèƒ½ç”¨ <code>any</code></li>
</ol>
<p>è€Œè§£å†³è¿™äº›é—®é¢˜çš„ç­”æ¡ˆï¼Œå°±è—åœ¨ä¸‰è¡Œä»£ç é‡Œï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> schema = z.<span class="hljs-title function_">object</span>({ ... });
<span class="hljs-keyword">const</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonOutputParser</span>(schema);
<span class="hljs-keyword">const</span> instructions = parser.<span class="hljs-title function_">getFormatInstructions</span>();
</code></pre>
<p>æœ¬æ–‡å°†å¸¦ä½ ä¸€æ­¥æ­¥æ‹†è§£è¿™æ®µä»£ç èƒŒåçš„åŸç†ï¼Œç†è§£ <strong>LangChain + Zod å¦‚ä½•ååŒå·¥ä½œ</strong>ï¼Œå®ç°<strong>ç«¯åˆ°ç«¯çš„ç±»å‹å®‰å…¨ã€ç»“æ„åŒ– AI è¾“å‡º</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸ§© ä¸€ã€Zodï¼šä¸åªæ˜¯æ ¡éªŒï¼Œæ›´æ˜¯â€œæ•°æ®å¥‘çº¦â€</h3>
<h4 data-id="heading-2">â“ ä»€ä¹ˆæ˜¯ Zodï¼Ÿ</h4>
<p>Zod æ˜¯ä¸€ä¸ª <strong>TypeScript ä¼˜å…ˆçš„è¿è¡Œæ—¶æ ¡éªŒåº“</strong>ã€‚å®ƒå…è®¸ä½ ç”¨ä»£ç å®šä¹‰â€œåˆæ³•æ•°æ®é•¿ä»€ä¹ˆæ ·â€ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">FrontendConceptSchema</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">name</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">'æ¦‚å¿µåç§°'</span>),
  <span class="hljs-attr">core</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">'æ ¸å¿ƒè¦ç‚¹'</span>),
  <span class="hljs-attr">useCase</span>: z.<span class="hljs-title function_">array</span>(z.<span class="hljs-title function_">string</span>()).<span class="hljs-title function_">describe</span>(<span class="hljs-string">'å¸¸è§ä½¿ç”¨åœºæ™¯'</span>),
  <span class="hljs-attr">difficulty</span>: z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">'ç®€å•'</span>, <span class="hljs-string">'ä¸­ç­‰'</span>, <span class="hljs-string">'å¤æ‚'</span>]).<span class="hljs-title function_">describe</span>(<span class="hljs-string">'å­¦ä¹ éš¾åº¦'</span>)
});
</code></pre>
<h4 data-id="heading-3">âœ… <code>z.object()</code> åˆ°åº•åˆ›å»ºäº†ä»€ä¹ˆï¼Ÿ</h4>
<p>å®ƒ<strong>ä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ™®é€šå¯¹è±¡</strong>ï¼Œè€Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ª <strong>Zod Schemaï¼ˆæ ¡éªŒè§„åˆ™ï¼‰</strong> ï¼Œè¿™ä¸ª schema å…·å¤‡ä¸‰é‡èƒ½åŠ›ï¼š</p>





















<table><thead><tr><th>èƒ½åŠ›</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è¿è¡Œæ—¶æ ¡éªŒ</strong></td><td>é€šè¿‡ <code>.parse(data)</code> éªŒè¯æ•°æ®æ˜¯å¦åˆæ³•</td></tr><tr><td><strong>é™æ€ç±»å‹æ¨å¯¼</strong></td><td><code>type T = z.infer&lt;typeof schema&gt;</code> è‡ªåŠ¨è·å¾— TypeScript ç±»å‹</td></tr><tr><td><strong>å…ƒä¿¡æ¯æè¿°</strong></td><td><code>.describe()</code> å¯è¢«å…¶ä»–å·¥å…·ï¼ˆå¦‚ LangChainï¼‰è¯»å–</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ æ‰€ä»¥ï¼Œ<code>FrontendConceptSchema</code> æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <strong>â€œæ•°æ®å¥‘çº¦â€</strong> â€”â€” å®ƒå‘Šè¯‰å…¨ä¸–ç•Œï¼šâ€œåªæœ‰ç¬¦åˆè¿™ä¸ªç»“æ„çš„æ•°æ®ï¼Œæ‰æ˜¯åˆæ³•çš„ã€‚â€</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">ğŸ” äºŒã€<code>JsonOutputParser</code>ï¼šç¿»è¯‘å®˜ + è´¨æ£€å‘˜</h3>
<p>ç°åœ¨é—®é¢˜æ¥äº†ï¼š<strong>å¦‚ä½•è®© LLM ç†è§£è¿™ä¸ªâ€œå¥‘çº¦â€ï¼Ÿ</strong></p>
<p>ç­”æ¡ˆæ˜¯ï¼š<code>JsonOutputParser</code>ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> jsonParser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonOutputParser</span>(<span class="hljs-title class_">FrontendConceptSchema</span>);
</code></pre>
<p>å¾ˆå¤šäººä»¥ä¸ºå®ƒåªæ˜¯ä¸€ä¸ªâ€œJSON è§£æå™¨â€ï¼Œå…¶å®å®ƒçš„è§’è‰²æ›´ä¸°å¯Œï¼š</p>
<h4 data-id="heading-5">ğŸ‘¨â€ğŸ« è§’è‰²ä¸€ï¼šç¿»è¯‘å®˜ï¼ˆæŒ‡å¯¼æ¨¡å‹æ€ä¹ˆå†™ï¼‰</h4>
<p>å®ƒè°ƒç”¨ <code>.getFormatInstructions()</code>ï¼ŒæŠŠ Zod Schema <strong>è‡ªåŠ¨ç¿»è¯‘æˆä¸€æ®µè‡ªç„¶è¯­è¨€æŒ‡ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> string <span class="hljs-comment">// æ¦‚å¿µåç§°</span>
  <span class="hljs-attr">"core"</span><span class="hljs-punctuation">:</span> string <span class="hljs-comment">// æ ¸å¿ƒè¦ç‚¹</span>
  <span class="hljs-attr">"useCase"</span><span class="hljs-punctuation">:</span> string<span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// å¸¸è§ä½¿ç”¨åœºæ™¯</span>
  <span class="hljs-attr">"difficulty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç®€å•"</span> | <span class="hljs-string">"ä¸­ç­‰"</span> | <span class="hljs-string">"å¤æ‚"</span> <span class="hljs-comment">// å­¦ä¹ éš¾åº¦</span>
<span class="hljs-punctuation">}</span>
*/
</code></pre>
<p>è¿™æ®µæ–‡æœ¬ä¼šè¢«æ’å…¥åˆ°æç¤ºè¯ä¸­ï¼Œ<strong>æ˜ç¡®å‘Šè¯‰æ¨¡å‹ï¼šâ€œä½ å¿…é¡»æŒ‰è¿™ä¸ªæ ¼å¼è¾“å‡ºï¼Œä¸èƒ½å¤šã€ä¸èƒ½å°‘ã€ä¸èƒ½é”™ã€‚â€</strong></p>
<blockquote>
<p>ğŸŒŸ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ éœ€è¦æ˜¾å¼ä¼ å…¥ <code>format_instructions: jsonParser.getFormatInstructions()</code> â€”â€”<br/>
<strong>LangChain ä¸ä¼šè‡ªåŠ¨å¡«å……å®ƒï¼Œè¿™æ˜¯ä½ ä¸»åŠ¨è¿æ¥â€œschemaâ€å’Œâ€œæç¤ºè¯â€çš„æ¡¥æ¢ã€‚</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-6">ğŸ‘® è§’è‰²äºŒï¼šè´¨æ£€å‘˜ï¼ˆæ£€æŸ¥æ¨¡å‹æœ‰æ²¡æœ‰å†™å¯¹ï¼‰</h4>
<p>å½“æ¨¡å‹è¿”å›æ–‡æœ¬åï¼Œ<code>JsonOutputParser</code> ä¼šï¼š</p>
<ol>
<li>å°è¯•æå– JSONï¼ˆå¦‚åŒ¹é… <code>json{...}</code>ï¼‰</li>
<li>ç”¨ <code>FrontendConceptSchema.parse(...)</code> è¿›è¡Œ Zod æ ¡éªŒ</li>
<li>å¦‚æœå­—æ®µç¼ºå¤±ã€ç±»å‹é”™è¯¯ã€æšä¸¾å€¼éæ³• â†’ æŠ›å‡º <code>ZodError</code></li>
<li>åªæœ‰å®Œå…¨åˆè§„çš„æ•°æ®æ‰ä¼šè¿”å›</li>
</ol>
<blockquote>
<p>âœ… è¿™ç›¸å½“äºåŒé‡ä¿é™©ï¼š</p>
<ul>
<li><strong>å‰éªŒ</strong>ï¼šç”¨æç¤ºè¯å¼•å¯¼æ¨¡å‹è¾“å‡ºåˆè§„æ ¼å¼</li>
<li><strong>åéªŒ</strong>ï¼šç”¨ Zod æ ¡éªŒå…œåº•ï¼Œé˜²æ­¢â€œå¹»è§‰â€æ±¡æŸ“ä¸šåŠ¡é€»è¾‘</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-7">âš™ï¸ ä¸‰ã€å®Œæ•´æµç¨‹ï¼šä»æç¤ºè¯åˆ°ç±»å‹å®‰å…¨å¯¹è±¡</h3>
<p>è®©æˆ‘ä»¬æŠŠæ‰€æœ‰é›¶ä»¶ç»„è£…èµ·æ¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. åˆå§‹åŒ–æ¨¡å‹</span>
<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-reasoner'</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>,
});

<span class="hljs-comment">// 2. æ„å»ºå¼ºçº¦æŸæç¤ºè¯</span>
<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">PromptTemplate</span>.<span class="hljs-title function_">fromTemplate</span>(<span class="hljs-string">`
  ä½ æ˜¯ä¸€ä¸ªåªä¼šè¾“å‡º JSON çš„ APIï¼Œä¸å…è®¸è¾“å‡ºä»»ä½•è§£é‡Šæ€§æ–‡å­—ã€‚
  âš ï¸ ä½ å¿…é¡»ã€åªè¿”å›ã€‘ç¬¦åˆä»¥ä¸‹ Schema çš„ JSONï¼š
  {format_instructions}
  å‰ç«¯æ¦‚å¿µï¼š{topic}
`</span>);

<span class="hljs-comment">// 3. åˆ›å»ºè§£æé“¾</span>
<span class="hljs-keyword">const</span> chain = prompt.<span class="hljs-title function_">pipe</span>(model).<span class="hljs-title function_">pipe</span>(jsonParser);

<span class="hljs-comment">// 4. è°ƒç”¨</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>({
  <span class="hljs-attr">topic</span>: <span class="hljs-string">'Promise'</span>,
  <span class="hljs-attr">format_instructions</span>: jsonParser.<span class="hljs-title function_">getFormatInstructions</span>(),
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response);
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   name: 'Promise',</span>
<span class="hljs-comment">//   core: '...',</span>
<span class="hljs-comment">//   useCase: [...],</span>
<span class="hljs-comment">//   difficulty: 'ä¸­ç­‰'</span>
<span class="hljs-comment">// }</span>
</code></pre>
<p>æ­¤æ—¶ï¼Œ<code>response</code> çš„ç±»å‹å·²è¢« TypeScript ç²¾ç¡®æ¨å¯¼ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css">{
  name: string;
  core: string;
  useCase: string[];
  difficulty: <span class="hljs-string">"ç®€å•"</span> | <span class="hljs-string">"ä¸­ç­‰"</span> | <span class="hljs-string">"å¤æ‚"</span>;
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bde1a0e0ec64041bc7f081ee59442c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGh4eHg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767184776&amp;x-signature=CKIPPMHisC8odfZbNX19fnCuNWg%3D" alt="image.png" loading="lazy"/>
<strong>æ— éœ€æ‰‹å†™ interfaceï¼Œç±»å‹ä¸æ ¡éªŒé€»è¾‘å®Œå…¨åŒæ­¥ï¼</strong></p>
<hr/>
<h3 data-id="heading-8">ğŸ§± å››ã€è¿™ä¸€åˆ‡ï¼Œéƒ½å»ºç«‹åœ¨ JavaScript æ¨¡å—åŒ–ä¹‹ä¸Š</h3>
<p>ä½ å¯èƒ½æ²¡æ³¨æ„åˆ°ï¼Œä½†è¿™æ®µä»£ç æœ¬èº«å°±æ˜¯ <strong>ç°ä»£ JS æ¨¡å—åŒ–æ€æƒ³çš„å…¸èŒƒ</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>;           <span class="hljs-comment">// æ¨¡å‹æ¨¡å—</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;    <span class="hljs-comment">// æç¤ºè¯æ¨¡å—</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JsonOutputParser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/output_parsers'</span>; <span class="hljs-comment">// è§£ææ¨¡å—</span>
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">'zod'</span>;                                     <span class="hljs-comment">// æ ¡éªŒæ¨¡å—</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>;                                      <span class="hljs-comment">// é…ç½®æ¨¡å—</span>
</code></pre>
<p>æ¯ä¸ª <code>import</code> éƒ½ä»£è¡¨ä¸€ä¸ª<strong>ç‹¬ç«‹ã€å¯å¤ç”¨ã€èŒè´£å•ä¸€</strong>çš„åŠŸèƒ½å•å…ƒã€‚è¿™ç§è®¾è®¡ä½¿å¾—ï¼š</p>
<ul>
<li>ä¾èµ–æ¸…æ™°ï¼Œæ— å…¨å±€æ±¡æŸ“</li>
<li>åŠŸèƒ½è§£è€¦ï¼Œæ˜“äºæµ‹è¯•å’Œæ›¿æ¢ï¼ˆæ¯”å¦‚æ¢ <code>ChatOpenAI</code> åªéœ€æ”¹ä¸€è¡Œï¼‰</li>
<li>æ”¯æŒ tree-shakingï¼Œæ‰“åŒ…ä½“ç§¯æ›´å°</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>æ²¡æœ‰ ES Modulesï¼Œå°±æ²¡æœ‰ç°ä»£ AI åº”ç”¨çš„å·¥ç¨‹åŒ–ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-9">âœ… äº”ã€ä¸ºä»€ä¹ˆè¿™å¥—æ–¹æ¡ˆå€¼å¾—åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Ÿ</h3>





























<table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ç±»å‹å®‰å…¨</strong></td><td>ç¼–è¯‘æ—¶ + è¿è¡Œæ—¶åŒé‡ä¿éšœï¼Œå‘Šåˆ« <code>any</code></td></tr><tr><td><strong>æŠ—å¹»è§‰</strong></td><td>å¼ºæç¤º + Zod æ ¡éªŒï¼Œå¤§å¹…é™ä½æ— æ•ˆè¾“å‡º</td></tr><tr><td><strong>å¯ç»´æŠ¤</strong></td><td>ä¿®æ”¹ schemaï¼Œæç¤ºè¯å’Œæ ¡éªŒè‡ªåŠ¨åŒæ­¥</td></tr><tr><td><strong>å¯æ‰©å±•</strong></td><td>æ˜“äºæ‹†åˆ†ä¸º <code>schemas/</code>ã€<code>chains/</code>ã€<code>services/</code> ç­‰æ¨¡å—</td></tr><tr><td><strong>å›½äº§å‹å¥½</strong></td><td>DeepSeek ç­‰å›½äº§æ¨¡å‹å®Œç¾æ”¯æŒ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-10">ğŸš€ ç»“è¯­ï¼šè®© AI æˆä¸ºå¯é çš„â€œæ•°æ®å·¥äººâ€</h3>
<p>è¿‡å»ï¼Œæˆ‘ä»¬æŠŠ LLM å½“ä½œâ€œèªæ˜çš„èŠå¤©æœºå™¨äººâ€ï¼›<br/>
ç°åœ¨ï¼Œå€ŸåŠ© LangChain + Zodï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå˜æˆ<strong>éµå®ˆå¥‘çº¦çš„æ•°æ®ç”Ÿæˆå™¨</strong>ã€‚</p>
<p>è€Œè¿™èƒŒåçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<blockquote>
<p><strong>ç”¨ä»£ç å®šä¹‰ç»“æ„ï¼ˆZodï¼‰ï¼Œç”¨æç¤ºè¯å¼•å¯¼è¡Œä¸ºï¼ˆLangChainï¼‰ï¼Œç”¨æ ¡éªŒç¡®ä¿ç»“æœï¼ˆJsonOutputParserï¼‰ã€‚</strong></p>
</blockquote>
<p>è¿™ä¸ä»…æ˜¯æŠ€æœ¯ç»„åˆï¼Œæ›´æ˜¯ä¸€ç§<strong>AI å·¥ç¨‹åŒ–æ€ç»´</strong>â€”â€”<br/>
<strong>ä¸ä¿¡ä»»é»‘ç›’è¾“å‡ºï¼Œç”¨å¥‘çº¦å’ŒéªŒè¯æ„å»ºå¯é ç³»ç»Ÿã€‚</strong></p>
<p>ä¸‹æ¬¡å½“ä½ éœ€è¦ä» AI ä¸­æå–ç»“æ„åŒ–æ•°æ®æ—¶ï¼Œä¸å¦¨è¯•è¯•è¿™å¥—æ¨¡å¼ã€‚ä½ ä¼šå‘ç°ï¼ŒAI ä¸ä»…èƒ½â€œè¯´äººè¯â€ï¼Œè¿˜èƒ½â€œå†™å¯¹æ•°æ®â€ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å¤§æ•°æ® & AIã€‘Flink Agents æºç è§£è¯» --- (1) --- è®¾è®¡]]></title>    <link>https://juejin.cn/post/7587254134401089545</link>    <guid>https://juejin.cn/post/7587254134401089545</guid>    <pubDate>2025-12-24T12:33:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587254134401089545" data-draft-id="7587245616754458675" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (1) --- è®¾è®¡"/> <meta itemprop="keywords" content="ç®—æ³•,äººå·¥æ™ºèƒ½,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-24T12:33:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç½—è¥¿çš„æ€è€ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/351470467691175"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (1) --- è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/351470467691175/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç½—è¥¿çš„æ€è€ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T12:33:52.000Z" title="Wed Dec 24 2025 12:33:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (1) --- è®¾è®¡</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x00 æ¦‚è¿°</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x01 ç›®æ ‡</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.1 äº‹ä»¶é©±åŠ¨çš„æ™ºèƒ½ä½“</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.2 å…¸å‹åº”ç”¨åœºæ™¯</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.3 äº‹ä»¶é©±åŠ¨æ™ºèƒ½ä½“çš„æŠ€æœ¯è¦æ±‚</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.4 æ ¸å¿ƒè®¾è®¡ç†å¿µ</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.5 äº‹ä»¶é©±åŠ¨ç¼–æ’æ¶æ„</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.6 æŠ€æœ¯å±•æœ›</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x02 è®¾è®¡åˆ†æ</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.1 Flink Agents è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.2 é’ˆå¯¹é—®é¢˜çš„æ ¸å¿ƒè®¾è®¡</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.3 å…³é”®è®¾è®¡çš„è½åœ°ç¤ºä¾‹</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.4 æ€»ç»“</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0xFF å‚è€ƒ</a></p>
</li>
</ul>
<h3 data-id="heading-1">0x00 æ¦‚è¿°</h3>
<p>Flink Agents æ˜¯Apache Flinkç¤¾åŒºæœ€è¿‘æ¨å‡ºçš„ä¸€ä¸ªå…¨æ–°çš„é¡¹ç›®ï¼Œä¸€ä¸ªä¸“é—¨ä¸ºäº‹ä»¶é©±åŠ¨åœºæ™¯è®¾è®¡çš„æ™ºèƒ½ä½“æ¡†æ¶ã€‚è¯¥é¡¹ç›®èšç„¦äº‹ä»¶é©±åŠ¨å‹AIæ™ºèƒ½ä½“ï¼Œç»“åˆFlinkçš„å®æ—¶å¤„ç†èƒ½åŠ›ï¼Œæ¨åŠ¨AIåœ¨å·¥ä¸šåœºæ™¯ä¸­çš„å·¥ç¨‹åŒ–è½åœ°ï¼Œæ¶µç›–æ™ºèƒ½è¿ç»´ã€ç›´æ’­åˆ†æç­‰å…¸å‹åº”ç”¨ï¼Œå±•ç°å…¶åœ¨AIå‘å±•ç¬¬å››å±‚æ¬¡â€”â€”æ™ºèƒ½ä½“AIä¸­çš„é‡è¦æ„ä¹‰ã€‚</p>
<p>æœ¬ç³»åˆ—ä»æºç å…¥æ‰‹ï¼Œæ·±å…¥è§£æ / åæ¨ Flink Agentsé¡¹ç›®çš„æ¶æ„è®¾è®¡ã€‚å› ä¸ºå±äºåæ¨ï¼Œè‚¯å®šå­˜åœ¨å„ç§é”™è¯¯ï¼Œè¿˜è¯·å¤§å®¶ä¸åæŒ‡å‡ºã€‚</p>
<h3 data-id="heading-2">0x01 ç›®æ ‡</h3>
<p>æœ¬èŠ‚å†…å®¹ æ‘˜å½•äºå®˜æ–¹åˆ†äº«"Flink Agentsï¼šåŸºäºApache Flinkçš„äº‹ä»¶é©±åŠ¨AIæ™ºèƒ½ä½“æ¡†æ¶"ã€‚</p>
<p>åœ¨äººå·¥æ™ºèƒ½æŠ€æœ¯å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼ŒAIåº”ç”¨ä»ç®€å•çš„å¯¹è¯äº¤äº’æ­£åœ¨å‘æ›´åŠ å¤æ‚å’Œæ™ºèƒ½åŒ–çš„æ–¹å‘æ¼”è¿›ã€‚æ™ºèƒ½ä½“AIå°±åƒç»™AIçš„"å¤§è„‘"é…ä¸Šäº†"èº«ä½“"ã€‚AIä¸ä»…èƒ½å¤Ÿæ€è€ƒå’Œåˆ†æï¼Œè¿˜èƒ½å¤Ÿåƒäººä¸€æ ·ä»¥ç‰¹å®šç›®æ ‡ä¸ºå¯¼å‘ï¼Œè‡ªä¸»åˆ†æåº”è¯¥é‡‡å–ä»€ä¹ˆè¡ŒåŠ¨ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒAIå¯ä»¥ä¸»åŠ¨è·å–æ‰€éœ€çš„ä¿¡æ¯ï¼ŒæŸ¥é˜…ç›¸å…³èµ„æ–™ï¼Œç”šè‡³ä½¿ç”¨å„ç§å·¥å…·æ¥çœŸæ­£å¯¹å¤–ç•Œäº§ç”Ÿå½±å“ã€‚</p>
<h4 data-id="heading-3">1.1 äº‹ä»¶é©±åŠ¨çš„æ™ºèƒ½ä½“</h4>
<p>Flink Agentsé¡¹ç›®ä¸“æ³¨äºæ™ºèƒ½ä½“AIçš„å·¥ç¨‹åŒ–å®ç°ã€‚</p>
<p>ä¸ºä»€ä¹ˆApache Flinkç¤¾åŒºè¿˜è¦å¼€å‘ä¸€ä¸ªæ–°çš„æ¡†æ¶å‘¢ï¼Ÿç­”æ¡ˆåœ¨äºFlink Agentsä¸“æ³¨äºä¸€ä¸ªç‰¹æ®Šçš„åº”ç”¨åœºæ™¯â€”â€”äº‹ä»¶é©±åŠ¨çš„æ™ºèƒ½ä½“ã€‚</p>
<p>ä¼ ç»Ÿçš„AIåº”ç”¨å¤§å¤šå±äºå¯¹è¯å¼ï¼ˆConversationalï¼‰æ™ºèƒ½ä½“ï¼Œè¿™ç§æ¨¡å¼ä¸‹ç”¨æˆ·é€šè¿‡å¯¹è¯æ¡†ç”¨è‡ªç„¶è¯­è¨€æè¿°é—®é¢˜æˆ–ä»»åŠ¡ï¼Œç„¶åè®©AIå»æ‰§è¡Œã€‚è¿™æ˜¯ä¸€ç§ç”¨æˆ·ä¸»åŠ¨è§¦å‘çš„äº¤äº’æ¨¡å¼ï¼Œæ¯”å¦‚å¸¸è§çš„ AI Codingã€ChatBIã€DeepResearchç­‰äº§å“éƒ½å±äºè¿™ä¸€ç±»å‹ã€‚</p>
<p>ä¸ä¹‹ç›¸å¯¹çš„æ˜¯äº‹ä»¶é©±åŠ¨ï¼ˆEvent-Drivenï¼‰æ™ºèƒ½ä½“ï¼Œè¿™ç§åº”ç”¨ç”±ç³»ç»Ÿè‡ªåŠ¨äº§ç”Ÿçš„å®æ—¶äº‹ä»¶æˆ–æ•°æ®æ›´æ–°æ¥è§¦å‘AIçš„å¤„ç†è¿‡ç¨‹ã€‚éšç€AIæŠ€æœ¯çš„å‘å±•å’Œæˆç†Ÿï¼Œæœªæ¥æ™ºèƒ½ä½“çš„å‘å±•æ–¹å‘å¿…ç„¶æ˜¯å·¥ä¸šåŒ–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼šæœ‰æ›´å¤šçš„AIè¯·æ±‚ç”±ç³»ç»Ÿè‡ªåŠ¨è§¦å‘ï¼Œè€Œä¸éœ€è¦äººå·¥æ‰‹åŠ¨æ“ä½œã€‚è¿™ä¸ªè¶‹åŠ¿å°±åƒæ•°æ®åˆ†æé¢†åŸŸçš„å‘å±•å†ç¨‹ä¸€æ ·ï¼Œä»æœ€åˆçš„äººå·¥ç¼–å†™SQLæŸ¥è¯¢ï¼Œå‘å±•åˆ°ä»Šå¤©å¤§é‡çš„OLAPåˆ†æéƒ½åŸºäºæ¨¡æ¿è‡ªåŠ¨ç”Ÿæˆï¼Œèƒ½å¤Ÿè¾¾åˆ°æ¯ç§’æ•°ç™¾QPSçš„å¤„ç†èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-4">1.2 å…¸å‹åº”ç”¨åœºæ™¯</h4>
<p>ä¸€ä¸ªå…¸å‹åº”ç”¨åœºæ™¯æ˜¯å®æ—¶ç›´æ’­åˆ†æã€‚åœ¨ç½‘ç»œç›´æ’­æˆ–ç›´æ’­å¸¦è´§è¿‡ç¨‹ä¸­ï¼Œçƒ­é—¨ç›´æ’­é—´ä¼šäº§ç”Ÿå¤§é‡çš„è§‚ä¼—è¯„è®ºå’Œå¼¹å¹•ã€‚ä¸»æ’­æ— æ³•å®æ—¶é€æ¡é˜…è¯»å’Œåˆ†ææ‰€æœ‰å†…å®¹ï¼Œä¼ ç»Ÿåšæ³•éœ€è¦é…å¤‡åå°åˆ†æå›¢é˜Ÿå’Œå¯¼æ’­æ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚</p>
<p>é€šè¿‡äº‹ä»¶é©±åŠ¨çš„AIæ™ºèƒ½ä½“ï¼Œç³»ç»Ÿå¯ä»¥å®æ—¶åˆ†ææœ€è¿‘å‡ åˆ†é’Ÿå†…çš„æ‰€æœ‰å¼¹å¹•è¯„è®ºï¼Œè¿›è¡Œä¿¡æ¯æå–å’Œæ±‡æ€»ã€‚æ¯”å¦‚è¯†åˆ«å‡ºè§‚ä¼—è¯¢é—®æœ€å¤šçš„é—®é¢˜ï¼Œæˆ–è€…åŠæ—¶å‘ç°æŠ€æœ¯é—®é¢˜ï¼ˆå¦‚éŸ³ç”»ä¸åŒæ­¥ã€å£°éŸ³å»¶è¿Ÿç­‰ï¼‰ï¼Œè®©ä¸»æ’­èƒ½å¤ŸåŠæ—¶å“åº”å’Œè§£å†³ã€‚</p>
<p>æ›´è¿›ä¸€æ­¥ï¼Œç»“åˆå¤šæ¨¡æ€AIæ¨¡å‹ï¼Œç³»ç»Ÿè¿˜å¯ä»¥è¯†åˆ«å½“å‰ç›´æ’­çš„ä¸»é¢˜å’Œå•†å“ï¼Œåˆ†æè§‚ä¼—çš„ç”¨æˆ·ç”»åƒã€‚åŸºäºè¿™äº›åˆ†æç»“æœï¼ŒAIå¯ä»¥æä¾›æœ‰ä»·å€¼çš„å»ºè®®ï¼Œæ¯”å¦‚æ ¹æ®è§‚ä¼—çš„æ€§åˆ«å’Œå¹´é¾„åˆ†å¸ƒæ¥è°ƒæ•´å•†å“æ¨èç­–ç•¥ï¼Œæˆ–è€…æ ¹æ®è§‚ä¼—çš„å¹´é¾„ç‰¹å¾æ¥é€‰æ‹©åˆé€‚çš„èƒŒæ™¯éŸ³ä¹ã€‚</p>
<h4 data-id="heading-5">1.3 äº‹ä»¶é©±åŠ¨æ™ºèƒ½ä½“çš„æŠ€æœ¯è¦æ±‚</h4>
<p>äº‹ä»¶é©±åŠ¨æ™ºèƒ½ä½“çš„å‡ ä¸ªå…³é”®æŠ€æœ¯ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>é¦–å…ˆæ˜¯å®æ—¶æ€§è¦æ±‚ï¼Œäº‹ä»¶äº§ç”Ÿåé€šå¸¸éœ€è¦å®æ—¶å¤„ç†ã€‚å…¶æ¬¡æ˜¯è§„æ¨¡å¤„ç†èƒ½åŠ›ï¼Œç³»ç»Ÿè‡ªåŠ¨è§¦å‘çš„äº‹ä»¶æ•°é‡å’Œé¢‘ç‡è¿œå¤§äºäººå·¥è§¦å‘çš„è¯·æ±‚ï¼Œéœ€è¦å¤§è§„æ¨¡åˆ†å¸ƒå¼è®¡ç®—èƒ½åŠ›æ”¯æ’‘ã€‚</li>
<li>ç¨³å®šæ€§æ˜¯å¦ä¸€ä¸ªé‡è¦è¦æ±‚ã€‚ä¸å¯¹è¯å¼æ™ºèƒ½ä½“ä¸åŒï¼Œäº‹ä»¶é©±åŠ¨çš„æ™ºèƒ½ä½“éœ€è¦7Ã—24å°æ—¶é•¿æ—¶é—´è¿è¡Œï¼Œæ²¡æœ‰äººèƒ½å¤ŸæŒç»­ç›‘æ§ï¼Œå› æ­¤å¿…é¡»å…·å¤‡å¼ºå¤§çš„å®¹é”™å’Œè‡ªæˆ‘æ¢å¤èƒ½åŠ›ã€‚æ•°æ®å¤„ç†èƒ½åŠ›ä¹Ÿå¿…ä¸å¯å°‘ï¼Œå› ä¸ºåœ¨æ•´ä¸ªåº”ç”¨çš„ç«¯åˆ°ç«¯æµç¨‹ä¸­ï¼Œå¾€å¾€ä¼´éšç€AIæ¨¡å‹çš„éç»“æ„åŒ–å¤„ç†å’Œä¼ ç»Ÿçš„ç»“æ„åŒ–æ•°æ®å¤„ç†ã€‚</li>
<li>æœ€åæ˜¯è¿æ¥èƒ½åŠ›ï¼Œéœ€è¦èƒ½å¤Ÿä»ä¸åŒç³»ç»Ÿä¸­æ¶ˆè´¹å„ç§å®æ—¶äº‹ä»¶ã€‚è¿™äº›æŠ€æœ¯è¦æ±‚æ°å¥½ä¸Apache Flinkçš„æ ¸å¿ƒèƒ½åŠ›é«˜åº¦å»åˆï¼šæ¯«ç§’çº§å®æ—¶æ€§ã€å¤§è§„æ¨¡åˆ†å¸ƒå¼å¤„ç†ã€çŠ¶æ€ç®¡ç†å’Œå®¹é”™èƒ½åŠ›ã€ä¸°å¯Œçš„æ•°æ®å¤„ç†åŠŸèƒ½ï¼Œä»¥åŠå¯¹ä¸»æµå­˜å‚¨ç³»ç»Ÿçš„å¹¿æ³›æ”¯æŒã€‚</li>
</ul>
<h4 data-id="heading-6">1.4 æ ¸å¿ƒè®¾è®¡ç†å¿µ</h4>
<p>Flink Agentsçš„æ¶æ„è®¾è®¡ä½“ç°äº†å‡ ä¸ªæ ¸å¿ƒè®¾è®¡ç†å¿µã€‚åœ¨æ™ºèƒ½ä½“æ ¸å¿ƒæ¦‚å¿µæ–¹é¢ï¼Œæ²¿ç”¨ AI Agent çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¯¹ç†Ÿæ‚‰ Agent çš„å¼€å‘è€…æ²¡æœ‰é¢å¤–å­¦ä¹ æˆæœ¬ã€‚åœ¨APIå±‚é¢ï¼Œé¡¹ç›®æ”¯æŒPythonå’ŒJavaä¸¤ç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒæ—¶æä¾›ä¸åŒæ¥å£æ¥æ”¯æŒWorkflowå’ŒReActä¸¤ç§ç¼–ç¨‹æ¨¡å¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e884a19e535d45768ebc9bad89d8251d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767184432&amp;x-signature=A5A2Za%2FhF7bMGYx7zesWBvfCPug%3D" alt="1-1" loading="lazy"/></p>
<p>1-1</p>
<p>åœ¨ç”Ÿæ€ç³»ç»Ÿæ–¹é¢ï¼Œé¡¹ç›®é›†æˆäº†å¸‚é¢ä¸Šä¸»æµçš„æ¨¡å‹æä¾›å•†ï¼Œæ”¯æŒMCPåè®®å…¼å®¹ä»¥åŠJavaã€Pythonå‡½æ•°ç›´æ¥ä½œä¸ºå·¥å…·ä½¿ç”¨ã€‚å¯¹äºå‘é‡å­˜å‚¨ç­‰å¸¸ç”¨ç»„ä»¶ï¼Œä¹Ÿæä¾›äº†ç›¸åº”çš„æŠ½è±¡å’Œæ ‡å‡†å®ç°ï¼ŒåŒæ—¶æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰æ‰©å±•ã€‚</p>
<p>åœ¨è¿è¡Œæ—¶å±‚é¢ï¼Œé¡¹ç›®æä¾›äº†è½»é‡çº§çš„Pythonè¿è¡Œæ—¶ç”¨äºæœ¬åœ°å¼€å‘æµ‹è¯•ï¼Œä»¥åŠåŸºäºå®Œæ•´Flinkè¿è¡Œæ—¶çš„åˆ†å¸ƒå¼ç‰ˆæœ¬ï¼Œèƒ½å¤Ÿæä¾›å®Œæ•´çš„åˆ†å¸ƒå¼æ‰§è¡Œã€çŠ¶æ€ç®¡ç†ã€å®¹é”™å’Œç«¯åˆ°ç«¯ä¸€è‡´æ€§ä¿éšœã€‚</p>
<h4 data-id="heading-7">1.5 äº‹ä»¶é©±åŠ¨ç¼–æ’æ¶æ„</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a576a703e2e43ee99ee8c1ea407bca5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767184432&amp;x-signature=ttbFGMDmskr5uR3YABFm5VrG9KQ%3D" alt="1-2" loading="lazy"/></p>
<p>1-2</p>
<p>åœ¨æ™ºèƒ½ä½“å†…éƒ¨ï¼ŒFlink Agentsé‡‡ç”¨äº†ä»¥äº‹ä»¶ä¸ºä¸­å¿ƒçš„ç¼–æ’æ–¹å¼ã€‚æ¯ä¸ªAgentç”±ä¸€ç³»åˆ—Actionç»„æˆï¼Œæ¯ä¸ªActionç”±ç‰¹å®šçš„äº‹ä»¶è§¦å‘ï¼ŒåŒæ—¶åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¹Ÿå¯ä»¥é€šè¿‡å‘å‡ºæ–°çš„äº‹ä»¶æ¥è§¦å‘å…¶ä»–Actionçš„æ‰§è¡Œã€‚</p>
<p>è¿™ç§æ¶æ„æä¾›äº†è¶³å¤Ÿçš„çµæ´»æ€§ï¼Œèƒ½å¤ŸåŒæ—¶æ”¯æŒWorkflowå’ŒReActä¸¤ç§ä¸»æµçš„æ™ºèƒ½ä½“å¼€å‘æ–¹å¼ã€‚Workflowæ¨¡å¼å…è®¸ç”¨æˆ·å¯¹æ™ºèƒ½ä½“è¡Œä¸ºè¿›è¡Œç²¾ç»†åŒ–æ§åˆ¶ï¼Œæ˜ç¡®å®šä¹‰å…ˆåšä»€ä¹ˆã€ååšä»€ä¹ˆï¼Œä½†ç¼–ç¨‹å¤æ‚åº¦ç›¸å¯¹è¾ƒé«˜ã€‚ReActæ¨¡å¼åˆ™å°†æ›´å¤šæ§åˆ¶æƒäº¤ç»™AIæ¨¡å‹ï¼Œç”¨æˆ·åªéœ€è¦æŒ‡å®šæ¨¡å‹ç‰ˆæœ¬ã€æç¤ºè¯å’Œå¯ç”¨å·¥å…·ï¼Œå…¶ä½™å·¥ä½œäº¤ç»™AIè‡ªåŠ¨å¤„ç†ã€‚</p>
<p>é¡¹ç›®ä¸­æåˆ°çš„Actionå’Œäº‹ä»¶æ—¢å¯ä»¥æ˜¯æ¡†æ¶å†…ç½®çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ï¼Œè¿˜æ”¯æŒä¸¤è€…æ··åˆä½¿ç”¨ã€‚è¿™ç§è®¾è®¡æ—¢æ”¯æŒæ¡†æ¶æœ¬èº«çš„å¼€å‘æ‰©å±•ï¼Œä¹Ÿæ»¡è¶³äº†ä¼ä¸šçº§åº”ç”¨ä¸­å¹³å°å‹éƒ¨é—¨æä¾›é€šç”¨åº“ä¾›ä¸šåŠ¡éƒ¨é—¨ä½¿ç”¨çš„éœ€æ±‚ã€‚</p>
<p>æ‰€æœ‰æ™ºèƒ½ä½“å†…éƒ¨å‘ç”Ÿçš„äº‹æƒ…éƒ½ä»¥äº‹ä»¶ä¸ºè½½ä½“è¿›è¡Œä¼ é€’ï¼Œæ¡†æ¶ç”šè‡³å¯ä»¥æä¾›å…³äºäº‹ä»¶æ›´æ–°ã€Actionæ‰§è¡Œå¼€å§‹å’Œç»“æŸç­‰å…ƒäº‹ä»¶ã€‚ç»“åˆè¿™äº›äº‹ä»¶ä¿¡æ¯ï¼Œç³»ç»Ÿèƒ½å¤Ÿæä¾›è¯¦ç»†çš„äº‹ä»¶æ—¥å¿—æ¥å¸®åŠ©ç”¨æˆ·ç†è§£æ™ºèƒ½ä½“çš„æ‰§è¡Œè¿‡ç¨‹ï¼ŒåŒæ—¶æ”¯æŒåœ¨çº¿å›è°ƒæœºåˆ¶è¿›è¡Œè¿è¡Œæ—¶ç›‘æ§ã€‚</p>
<h4 data-id="heading-8">1.6 æŠ€æœ¯å±•æœ›</h4>
<p>Flink Agentsé¡¹ç›®çš„æ¨å‡ºæ ‡å¿—ç€Apache Flinkç¤¾åŒºåœ¨AIé¢†åŸŸçš„é‡è¦å¸ƒå±€ã€‚é€šè¿‡å°†Flinkå¼ºå¤§çš„æµå¤„ç†èƒ½åŠ›ä¸AIæ™ºèƒ½ä½“æŠ€æœ¯ç›¸ç»“åˆï¼Œä¸ºäº‹ä»¶é©±åŠ¨çš„AIåº”ç”¨æä¾›äº†ä¸€ä¸ªå·¥ä¸šçº§çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å¯¹äºå¸Œæœ›æ„å»ºå¤§è§„æ¨¡ã€é«˜å¯é æ€§AIåº”ç”¨çš„å¼€å‘è€…å’Œä¼ä¸šæ¥è¯´ï¼ŒFlink Agentsæä¾›äº†ä¸€ä¸ªå…¨æ–°çš„æŠ€æœ¯é€‰æ‹©ã€‚å®ƒä¸ä»…ç»§æ‰¿äº†Apache Flinkåœ¨æµå¤„ç†é¢†åŸŸçš„æŠ€æœ¯ä¼˜åŠ¿ï¼Œè¿˜é’ˆå¯¹AIåº”ç”¨çš„ç‰¹æ®Šéœ€æ±‚è¿›è¡Œäº†ä¸“é—¨çš„è®¾è®¡å’Œä¼˜åŒ–ï¼Œæœ‰æœ›æˆä¸ºä¸‹ä¸€ä»£AIåº”ç”¨å¼€å‘çš„é‡è¦å·¥å…·ã€‚</p>
<h3 data-id="heading-9">0x02 è®¾è®¡åˆ†æ</h3>
<p>æ—¢ç„¶åˆæ­¥äº†è§£äº†Flink Agentsä¸‹é¢ï¼Œæˆ‘ä»¬æ¥åæ¨ä¸‹å…¶è®¾è®¡ã€‚çœ‹çœ‹ Flink Agents æ¡†æ¶çš„æ ¸å¿ƒè§£å†³ç›®æ ‡ï¼Œä»¥åŠé’ˆå¯¹è¿™äº›é—®é¢˜çš„æ ¸å¿ƒè®¾è®¡æ€è·¯å’Œå…·ä½“æ–¹æ¡ˆï¼Œæœ¬è´¨æ˜¯ç†è§£è¯¥æ¡†æ¶çš„ â€œé—®é¢˜ - è®¾è®¡â€ å¯¹åº”é€»è¾‘ã€‚</p>
<p>Flink Agents æ˜¯åŸºäº Flink æµå¤„ç†èƒ½åŠ›æ„å»ºçš„ Agent è¿è¡Œæ—¶æ¡†æ¶ï¼Œæ ¸å¿ƒè§£å†³<strong>ä¼ ç»Ÿ Agent æ¡†æ¶åœ¨åˆ†å¸ƒå¼ã€é«˜å¹¶å‘ã€æµå¤„ç†åœºæ™¯ä¸‹çš„çŸ­æ¿</strong>ï¼ŒåŒæ—¶é€‚é… Agent ç‰¹æœ‰çš„ â€œäº‹ä»¶é©±åŠ¨ã€åŠ¨ä½œæ‰§è¡Œã€çŠ¶æ€ç®¡ç†â€ éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯é—®é¢˜ä¸è®¾è®¡çš„å¯¹åº”åˆ†æï¼š</p>
<h4 data-id="heading-10">2.1 Flink Agents è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜</h4>
<h5 data-id="heading-11">2.1.1 é—®é¢˜1ï¼šå•æœºå±€é™</h5>
<p>ä¼ ç»Ÿ Agent æ¡†æ¶ï¼ˆå¦‚ LangChainã€AutoGPTï¼‰å¤šåŸºäºå•æœºè¿è¡Œï¼Œå­˜åœ¨ â€œå•æœºå±€é™â€â€”â€” æ— æ³•åº”å¯¹å¤§è§„æ¨¡æµæ•°æ® / é«˜å¹¶å‘äº‹ä»¶ã€‚å…·ä½“è€Œè¨€ï¼Œä¼ ç»Ÿ Agent æ¡†æ¶é¢å¯¹<strong>å®æ—¶æµæ•°æ®ï¼ˆå¦‚ç”¨æˆ·æŒ‡ä»¤æµã€è®¾å¤‡äº‹ä»¶æµï¼‰</strong> æˆ–é«˜å¹¶å‘ Agent è°ƒç”¨æ—¶ï¼Œå­˜åœ¨å¦‚ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>æ— æ³•æ¨ªå‘æ‰©å±•ï¼Œå¹¶å‘é‡å—é™ï¼›</li>
<li>æ— å†…ç½®çš„æµå¤„ç†èƒ½åŠ›ï¼Œéš¾ä»¥å¤„ç†æŒç»­è¾“å…¥çš„äº‹ä»¶æµï¼›</li>
<li>ç¼ºä¹åˆ†å¸ƒå¼å®¹é”™æœºåˆ¶ï¼Œå•ç‚¹æ•…éšœå¯¼è‡´ Agent æ‰§è¡Œä¸­æ–­ã€‚</li>
</ul>
<h5 data-id="heading-12">2.1.2 é—®é¢˜2ï¼šå¼‚æ­¥ / åˆ†é˜¶æ®µå¤„ç†</h5>
<p>Agent æ‰§è¡Œæ—¶å­˜åœ¨ â€œå¼‚æ­¥ / åˆ†é˜¶æ®µå¤„ç†â€ éš¾é¢˜ â€”â€” éš¾ä»¥ç®¡ç†å¤æ‚åŠ¨ä½œçš„ç”Ÿå‘½å‘¨æœŸã€‚å…·ä½“è€Œè¨€ï¼ŒAgent çš„æ ¸å¿ƒæ˜¯ â€œäº‹ä»¶â†’å†³ç­–â†’åŠ¨ä½œæ‰§è¡Œâ†’ç»“æœåé¦ˆâ€ çš„å¾ªç¯ï¼Œè€ŒåŠ¨ä½œæ‰§è¡Œå¸¸åŒ…å«ï¼š</p>
<ul>
<li>å¼‚æ­¥æ“ä½œï¼ˆå¦‚è°ƒç”¨å¤–éƒ¨ APIã€æ‰§è¡Œ Python è„šæœ¬ï¼‰ï¼›</li>
<li>åˆ†é˜¶æ®µä»»åŠ¡ï¼ˆå¦‚å…ˆå‘èµ· HTTP è¯·æ±‚ï¼Œç­‰å¾…å“åº”åå†å¤„ç†ï¼‰ï¼›</li>
<li>åŠ¨æ€ç”Ÿæˆåç»­ä»»åŠ¡ï¼ˆå¦‚ä¸€æ¬¡å†³ç­–è§¦å‘å¤šä¸ªåŠ¨ä½œï¼‰ï¼›</li>
</ul>
<p>ä¼ ç»Ÿæ¡†æ¶éš¾ä»¥æ ‡å‡†åŒ–ç®¡ç†è¿™ç±» â€œéåŸå­åŒ–â€ çš„åŠ¨ä½œæ‰§è¡Œï¼Œæ˜“å‡ºç°ä»»åŠ¡ä¸¢å¤±ã€çŠ¶æ€æ··ä¹±ã€‚</p>
<h5 data-id="heading-13">2.1.3 é—®é¢˜3ï¼šé€‚é…é¸¿æ²Ÿ</h5>
<p>Agent ä¸æµå¤„ç†åœºæ™¯ä¹‹é—´å­˜åœ¨ â€œé€‚é…é¸¿æ²Ÿâ€â€”â€” åŸç”Ÿ Flink ä¸æ”¯æŒ Agent è¯­ä¹‰ã€‚å…·ä½“è€Œè¨€ï¼ŒåŸç”Ÿ Flink æ˜¯é€šç”¨æµå¤„ç†å¼•æ“ï¼Œç¼ºä¹ Agent ç‰¹æœ‰çš„è¯­ä¹‰æŠ½è±¡ï¼š</p>
<ul>
<li>æ—  â€œAgentâ€â€œActionï¼ˆåŠ¨ä½œï¼‰â€â€œEventï¼ˆäº‹ä»¶ï¼‰â€ çš„åŸç”Ÿå®šä¹‰ï¼Œç”¨æˆ·éœ€æ‰‹åŠ¨å°è£…ï¼›</li>
<li>æ— å†…ç½®çš„ Agent çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ä¼šè¯ä¸Šä¸‹æ–‡ã€å·¥å…·è°ƒç”¨è®°å½•ï¼‰ï¼›</li>
<li>æ— å·¥å…· / èµ„æºçš„ç»Ÿä¸€æ³¨å†Œä¸è°ƒåº¦æœºåˆ¶ï¼Œéœ€é‡å¤å¼€å‘é€‚é…é€»è¾‘ã€‚</li>
</ul>
<h5 data-id="heading-14">2.1.4 é—®é¢˜4ï¼šçŠ¶æ€ä¸€è‡´æ€§</h5>
<p>Agent æ‰§è¡Œå­˜åœ¨ â€œçŠ¶æ€ä¸€è‡´æ€§â€ é—®é¢˜ â€”â€” åˆ†å¸ƒå¼åœºæ™¯ä¸‹çŠ¶æ€æ˜“ä¸¢å¤± / ä¸ä¸€è‡´ã€‚å…·ä½“è€Œè¨€ï¼ŒAgent æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€ç»´æŠ¤ï¼š</p>
<ul>
<li>çŸ­æœŸçŠ¶æ€ï¼ˆå¦‚å½“å‰ä¼šè¯çš„åŠ¨ä½œæ‰§è¡Œä¸Šä¸‹æ–‡ï¼‰ï¼›</li>
<li>é•¿æœŸçŠ¶æ€ï¼ˆå¦‚ Agent å®ä¾‹çš„è¿è¡ŒçŠ¶æ€ã€å·¥å…·è°ƒç”¨è®°å½•ï¼‰ï¼›</li>
</ul>
<p>ä¼ ç»Ÿåˆ†å¸ƒå¼æ¡†æ¶è‹¥ç›´æ¥é€‚é… Agentï¼Œæ˜“å‡ºç°çŠ¶æ€åˆ†ç‰‡æ··ä¹±ã€æ•…éšœæ¢å¤åçŠ¶æ€ä¸¢å¤±çš„é—®é¢˜ã€‚</p>
<h5 data-id="heading-15">2.1.5 é—®é¢˜5ï¼šå…¼å®¹æ€§</h5>
<p>ç›®å‰ä»å­˜åœ¨â€œå¤šè¯­è¨€åŠ¨ä½œæ‰§è¡Œâ€çš„å…¼å®¹éš¾é¢˜â€”â€”Agent çš„ Tool/Function å¯èƒ½åˆ†åˆ«ç”¨ Javaï¼ˆé«˜æ€§èƒ½ï¼‰æˆ– Pythonï¼ˆç”Ÿæ€ä¸°å¯Œï¼‰å®ç°ï¼Œä¼ ç»Ÿæ¡†æ¶æš´éœ²å‡ºä¸¤ç±»å¼±ç‚¹ï¼š</p>
<ul>
<li>è¿›ç¨‹é€šä¿¡æˆ– RPC éœ€æ‰‹å·¥ç¼–å†™ï¼Œå¼€å‘æˆæœ¬é«˜ï¼›</li>
<li>ç¼ºä¹ç»Ÿä¸€çš„å¤šè¯­è¨€ä»»åŠ¡è°ƒåº¦å™¨ï¼Œæ˜“å½¢æˆæ‰§è¡Œé˜»å¡ã€‚</li>
</ul>
<h4 data-id="heading-16">2.2 é’ˆå¯¹é—®é¢˜çš„æ ¸å¿ƒè®¾è®¡</h4>
<h5 data-id="heading-17">2.2.1 é—®é¢˜1ï¼šå•æœºå±€é™</h5>
<p>æ ¸å¿ƒè®¾è®¡æ€è·¯ä¸ºï¼šåŸºäº Flink åˆ†å¸ƒå¼æµå¤„ç†å†…æ ¸ï¼Œå°è£… Agent è¯­ä¹‰çš„æµå¤„ç†èƒ½åŠ›ã€‚</p>
<p>å…·ä½“å®ç°æ–¹æ¡ˆä¸ºï¼š</p>
<ul>
<li><strong>Agent ä½œä¸ºæµä½œä¸šæŠ½è±¡</strong>ï¼šå°† Agent é€»è¾‘å°è£…ä¸º Flink DataStream ä½œä¸šï¼Œå¤©ç„¶æ”¯æŒæ¨ªå‘æ‰©å±•ã€å¹¶è¡Œæ‰§è¡Œï¼›</li>
<li><strong>äº‹ä»¶é©±åŠ¨çš„æµè¾“å…¥é€‚é…</strong>ï¼šå®šä¹‰ InputEvent / OutputEvent ç­‰æ ‡å‡†åŒ–äº‹ä»¶ï¼Œç›´æ¥å¯¹æ¥ Flink çš„æµæ•°æ®è¾“å…¥ï¼Œå¤„ç†å®æ—¶äº‹ä»¶æµï¼›</li>
<li><strong>Flink åŸç”Ÿå®¹é”™</strong>ï¼šå¤ç”¨ Flink çš„ Checkpoint/StateBackend æœºåˆ¶ï¼Œå®ç° Agent æ‰§è¡Œçš„æ•…éšœæ¢å¤ã€‚</li>
</ul>
<h5 data-id="heading-18">2.2.2 é—®é¢˜2ï¼šå¼‚æ­¥ / åˆ†é˜¶æ®µå¤„ç†</h5>
<p>æ ¸å¿ƒè®¾è®¡æ€è·¯ä¸ºï¼šæ ‡å‡†åŒ– â€œåŠ¨ä½œæ‰§è¡Œ - ä»»åŠ¡æ‹†åˆ† - é˜Ÿåˆ—è°ƒåº¦â€ çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<p>å…·ä½“å®ç°æ–¹æ¡ˆä¸ºï¼š</p>
<ul>
<li>
<p><strong>ActionTask åŸå­åŒ–æ‹†åˆ†</strong>ï¼šå°†å¤æ‚ Action æ‹†åˆ†ä¸ºæœ€å°æ‰§è¡Œå•å…ƒï¼ˆActionTaskï¼‰ï¼Œæ”¯æŒå¼‚æ­¥ / åˆ†é˜¶æ®µæ‰§è¡Œï¼›</p>
</li>
<li>
<p><strong>åŠ¨æ€ä»»åŠ¡ç”Ÿæˆä¸é˜Ÿåˆ—ç®¡ç†</strong>ï¼š</p>
<ul>
<li>ActionTask.invoke () å¯è¿”å›æ–°çš„ ActionTaskï¼Œå®ç°ä»»åŠ¡çš„åŠ¨æ€æ‰©å±•ï¼›</li>
<li>åŸºäº <code>ListState</code> å­˜å‚¨å¾…æ‰§è¡Œä»»åŠ¡ï¼Œé€šè¿‡ Mailbox æœºåˆ¶è°ƒåº¦ï¼Œé¿å…é˜»å¡ï¼›</li>
</ul>
</li>
<li>
<p><strong>ä»»åŠ¡æ‰§è¡Œé—­ç¯</strong>ï¼š<code>processActionTaskForKey</code> å®ç° â€œæ‰§è¡Œâ†’ç»“æœå¤„ç†â†’æ–°ä»»åŠ¡å…¥é˜Ÿâ†’å¾ªç¯è°ƒåº¦â€ï¼Œç¡®ä¿ä»»åŠ¡ä¸ä¸¢å¤±ã€‚</p>
</li>
</ul>
<h5 data-id="heading-19">2.2.3 é—®é¢˜3ï¼šé€‚é…é¸¿æ²Ÿ</h5>
<p>æ ¸å¿ƒè®¾è®¡æ€è·¯ä¸ºï¼šæŠ½è±¡ Agent æ ¸å¿ƒè¯­ä¹‰å±‚ï¼Œé€‚é…åŸç”Ÿ Flink æ‰§è¡Œå¼•æ“ã€‚</p>
<p>å…·ä½“å®ç°æ–¹æ¡ˆä¸ºï¼š</p>
<ul>
<li>
<p><strong>æ ¸å¿ƒè¯­ä¹‰æŠ½è±¡</strong>ï¼š</p>
<ul>
<li><code>Agent</code>ï¼šå°è£… Agent é€»è¾‘ï¼ˆåŠ¨ä½œã€èµ„æºã€äº‹ä»¶ç»‘å®šï¼‰ï¼›</li>
<li><code>AgentPlan</code>ï¼šå°† Agent ç¼–è¯‘ä¸º Flink å¯æ‰§è¡Œçš„è®¡åˆ’ï¼ˆå¯¹åº” JobGraphï¼‰ï¼›</li>
<li><code>Action</code>ï¼šå®šä¹‰ Agent å¯æ‰§è¡Œçš„åŠ¨ä½œï¼Œé€šè¿‡ <code>@action</code> è£…é¥°å™¨ç»‘å®šäº‹ä»¶ï¼›</li>
</ul>
</li>
<li>
<p><strong>äº‹ä»¶ - åŠ¨ä½œç»‘å®šæœºåˆ¶</strong>ï¼šAction ä¸ Event è§£è€¦ç»‘å®šï¼ˆå¦‚ <code>@action(UserCommandEvent)</code>ï¼‰ï¼Œæ”¯æŒäº‹ä»¶è§¦å‘æŒ‡å®šåŠ¨ä½œï¼›</p>
</li>
<li>
<p><strong>èµ„æºç»Ÿä¸€æ³¨å†Œ</strong>ï¼šé€šè¿‡ <code>ResourceProvider</code> æ³¨å†Œå·¥å…· / èµ„æºï¼ˆå¦‚ <code>menu_db</code>ï¼‰ï¼ŒAgent æŒ‰éœ€è·å–ï¼Œæ— éœ€é‡å¤åˆå§‹åŒ–ã€‚</p>
</li>
</ul>
<h5 data-id="heading-20">2.2.4 é—®é¢˜4ï¼šçŠ¶æ€ä¸€è‡´æ€§</h5>
<p>æ ¸å¿ƒè®¾è®¡æ€è·¯ä¸ºï¼šåŸºäº Flink é”®æ§çŠ¶æ€å®ç° Agent çŠ¶æ€éš”ç¦»ä¸æŒä¹…åŒ–ã€‚</p>
<p>å…·ä½“å®ç°æ–¹æ¡ˆä¸ºï¼š</p>
<ul>
<li>
<p><strong>Keyed State çŠ¶æ€éš”ç¦»</strong>ï¼šæŒ‰ Agent å®ä¾‹ / ä¼šè¯ ID ä½œä¸º keyï¼Œéš”ç¦»ä¸åŒ Agent çš„çŠ¶æ€ï¼ˆå¦‚ä¸Šä¸‹æ–‡ã€ä»»åŠ¡é˜Ÿåˆ—ï¼‰ï¼›</p>
</li>
<li>
<p><strong>åˆ†å±‚çŠ¶æ€ç®¡ç†</strong>ï¼š</p>
<ul>
<li>çŸ­æœŸçŠ¶æ€ï¼š<code>LocalRunnerContext</code> å­˜å‚¨ä¼šè¯çº§ä¸´æ—¶æ•°æ®ï¼›</li>
<li>é•¿æœŸçŠ¶æ€ï¼šå¤ç”¨ Flink çš„ StateBackendï¼ˆå¦‚ RocksDBï¼‰æŒä¹…åŒ– Agent è¿è¡ŒçŠ¶æ€ï¼›</li>
</ul>
</li>
<li>
<p><strong>Checkpoint çŠ¶æ€å¿«ç…§</strong>ï¼šå®šæœŸå¿«ç…§ Agent çŠ¶æ€ï¼Œæ•…éšœæ¢å¤æ—¶è¿˜åŸæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p>
</li>
</ul>
<h5 data-id="heading-21">2.2.5 é—®é¢˜5ï¼šå…¼å®¹æ€§</h5>
<p>æ ¸å¿ƒè®¾è®¡æ€è·¯ä¸ºï¼šç»Ÿä¸€çš„å¤šè¯­è¨€ ActionTask å°è£…ä¸è°ƒåº¦ã€‚</p>
<p>å…·ä½“å®ç°æ–¹æ¡ˆä¸ºï¼š</p>
<ul>
<li>
<p><strong>å¤šè¯­è¨€ ActionTask å®ç°</strong>ï¼š</p>
<ul>
<li><code>JavaActionTask</code>ï¼šå¤„ç† Java å®ç°çš„ Actionï¼›</li>
<li><code>PythonActionTask</code>ï¼šå°è£… Python è„šæœ¬æ‰§è¡Œï¼Œæ”¯æŒå¼‚æ­¥è°ƒç”¨ï¼›</li>
</ul>
</li>
<li>
<p><strong>è·¨è¯­è¨€é€šä¿¡æ ‡å‡†åŒ–</strong>ï¼šé€šè¿‡ç»“æ„åŒ–æ•°æ®ï¼ˆJSONï¼‰ä¼ é€’å‚æ•° / ç»“æœï¼Œé¿å…è¯­è¨€é—´é€‚é…æˆæœ¬ï¼›</p>
</li>
<li>
<p><strong>Python ç”Ÿæˆå™¨é€‚é…</strong>ï¼š<code>PythonGeneratorActionTask</code> æ”¯æŒ Python ç”Ÿæˆå™¨çš„åˆ†é˜¶æ®µæ‰§è¡Œï¼Œé€‚é…å¼‚æ­¥åœºæ™¯ã€‚</p>
</li>
</ul>
<h4 data-id="heading-22">2.3 å…³é”®è®¾è®¡çš„è½åœ°ç¤ºä¾‹</h4>
<p>æˆ‘ä»¬ä»¥ â€œç”¨æˆ·å‘é€â€˜æ˜¾ç¤ºèœå•â€™æŒ‡ä»¤â€ ä¸ºä¾‹ï¼Œè®¾è®¡å¦‚ä½•è§£å†³é—®é¢˜ï¼š</p>
<ol>
<li><strong>æµå¤„ç†é€‚é…</strong>ï¼šç”¨æˆ·æŒ‡ä»¤ä»¥äº‹ä»¶å½¢å¼è¿›å…¥ Flink æµï¼ŒAgent ä½œä¸šå¹¶è¡Œå¤„ç†è¯¥äº‹ä»¶æµï¼Œæ”¯æŒé«˜å¹¶å‘ï¼›</li>
<li><strong>ä»»åŠ¡æ‹†åˆ†</strong>ï¼šä»»åŠ¡åŠ¨ä½œè¢«å°è£…ä¸º <code>PythonActionTask</code>ï¼Œæ‰§è¡Œæ—¶å…ˆè·å– <code>menu_db</code> èµ„æºï¼ˆç»Ÿä¸€æ³¨å†Œçš„èµ„æºï¼‰ï¼Œå†å‘é€ <code>MenuDisplayEvent</code>ï¼›</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šæŒ‰ç”¨æˆ· ID ä½œä¸º keyï¼Œéš”ç¦»ä¸åŒç”¨æˆ·çš„èœå•æŸ¥è¯¢çŠ¶æ€ï¼ŒCheckpoint ç¡®ä¿çŠ¶æ€ä¸ä¸¢å¤±ï¼›</li>
<li><strong>åˆ†å¸ƒå¼æ‰§è¡Œ</strong>ï¼šActionExecutionOperator è¿è¡Œåœ¨å¤šä¸ª TaskManager ä¸Šï¼Œæ¨ªå‘æ‰©å±•å¤„ç†æµ·é‡ç”¨æˆ·æŒ‡ä»¤ã€‚</li>
</ol>
<h4 data-id="heading-23">2.4 æ€»ç»“</h4>
<ol>
<li>Flink Agents çš„æ ¸å¿ƒç›®æ ‡æ˜¯<strong>è®© Agent æ¡†æ¶å…·å¤‡åˆ†å¸ƒå¼ã€é«˜å¹¶å‘ã€æµå¤„ç†èƒ½åŠ›</strong>ï¼ŒåŒæ—¶è§£å†³ Agent ç‰¹æœ‰çš„ä»»åŠ¡ç®¡ç†ã€çŠ¶æ€ä¸€è‡´æ€§ã€å¤šè¯­è¨€æ‰§è¡Œé—®é¢˜ï¼›</li>
<li>æ ¸å¿ƒè®¾è®¡é€»è¾‘æ˜¯ <strong>â€œAgent è¯­ä¹‰æŠ½è±¡ + Flink åŸç”Ÿèƒ½åŠ›å¤ç”¨â€</strong> ï¼šæ—¢å°è£… Agent æ‰€éœ€çš„ Event/Action/State è¯­ä¹‰ï¼Œåˆå¤ç”¨ Flink çš„åˆ†å¸ƒå¼ã€å®¹é”™ã€æµå¤„ç†å†…æ ¸ï¼›</li>
<li>å…³é”®è®¾è®¡è½åœ°ï¼šActionTask è§£å†³ä»»åŠ¡æ‹†åˆ†ï¼ŒActionExecutionOperator è§£å†³æ‰§è¡Œè°ƒåº¦ï¼ŒKeyed State è§£å†³çŠ¶æ€ä¸€è‡´æ€§ï¼Œå¤šè¯­è¨€ ActionTask è§£å†³è·¨è¯­è¨€æ‰§è¡Œã€‚</li>
</ol>
<h3 data-id="heading-24">0xFF å‚è€ƒ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.aliyun.com%2Farticle%2F1681147" target="_blank" title="https://developer.aliyun.com/article/1681147" ref="nofollow noopener noreferrer">Flink Agentsï¼šåŸºäºApache Flinkçš„äº‹ä»¶é©±åŠ¨AIæ™ºèƒ½ä½“æ¡†æ¶</a></p>
<p>æœ¬æ–‡ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarkdown.com.cn" target="_blank" title="https://markdown.com.cn" ref="nofollow noopener noreferrer">markdown.com.cn</a> æ’ç‰ˆ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºæ·±åº¦å­¦ä¹ çš„å†œä¸šè™«å®³è‡ªåŠ¨è¯†åˆ«ç³»ç»Ÿï¼šYOLOv8 çš„å®Œæ•´å·¥ç¨‹]]></title>    <link>https://juejin.cn/post/7587252766831738922</link>    <guid>https://juejin.cn/post/7587252766831738922</guid>    <pubDate>2025-12-24T12:56:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587252766831738922" data-draft-id="7587299443643121727" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºæ·±åº¦å­¦ä¹ çš„å†œä¸šè™«å®³è‡ªåŠ¨è¯†åˆ«ç³»ç»Ÿï¼šYOLOv8 çš„å®Œæ•´å·¥ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-24T12:56:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯æ°å°¼"/> <meta itemprop="url" content="https://juejin.cn/user/4200579899599495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºæ·±åº¦å­¦ä¹ çš„å†œä¸šè™«å®³è‡ªåŠ¨è¯†åˆ«ç³»ç»Ÿï¼šYOLOv8 çš„å®Œæ•´å·¥ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4200579899599495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯æ°å°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T12:56:00.000Z" title="Wed Dec 24 2025 12:56:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäºæ·±åº¦å­¦ä¹ çš„å†œä¸šè™«å®³è‡ªåŠ¨è¯†åˆ«ç³»ç»Ÿï¼šYOLOv8 çš„å®Œæ•´å·¥ç¨‹</h2>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ç ”ç©¶èƒŒæ™¯ï¼šå†œä¸šè™«å®³è¯†åˆ«ä¸ºä½•éœ€è¦ AIï¼Ÿ</h3>
<p>åœ¨å†œä¸šç”Ÿäº§è¿‡ç¨‹ä¸­ï¼Œ<strong>ç—…è™«å®³æ˜¯å½±å“ä½œç‰©äº§é‡å’Œè´¨é‡çš„æ ¸å¿ƒå› ç´ ä¹‹ä¸€</strong>ã€‚æ®ç»Ÿè®¡ï¼Œå…¨çƒæ¯å¹´å› è™«å®³é€ æˆçš„ç²®é£ŸæŸå¤±é«˜è¾¾ 20% ä»¥ä¸Šã€‚ä¼ ç»Ÿçš„è™«å®³é˜²æ²»æ–¹å¼ä¸»è¦ä¾èµ–ï¼š</p>
<ul>
<li>äººå·¥å·¡ç”°è§‚å¯Ÿ</li>
<li>ä¸“å®¶ç»éªŒåˆ¤æ–­</li>
<li>äº‹åç”¨è¯å¤„ç†</li>
</ul>
<p>è¿™ç§æ–¹å¼å­˜åœ¨æ˜æ˜¾é—®é¢˜ï¼š</p>
<ul>
<li>ğŸ <strong>è¯†åˆ«æ•ˆç‡ä½</strong>ï¼šäººå·¥å·¡æ£€éš¾ä»¥è¦†ç›–å¤§é¢ç§¯å†œç”°</li>
<li>ğŸ <strong>ä¸»è§‚æ€§å¼º</strong>ï¼šä¸åŒäººå‘˜åˆ¤æ–­æ ‡å‡†ä¸ä¸€è‡´</li>
<li>ğŸ <strong>å“åº”æ»å</strong>ï¼šå¾€å¾€åœ¨è™«å®³çˆ†å‘åæ‰å‘ç°</li>
</ul>
<p>éšç€è®¡ç®—æœºè§†è§‰ä¸æ·±åº¦å­¦ä¹ æŠ€æœ¯çš„æˆç†Ÿï¼Œ<strong>åŸºäºç›®æ ‡æ£€æµ‹çš„å†œä¸šè™«å®³è‡ªåŠ¨è¯†åˆ«ç³»ç»Ÿ</strong> æ­£é€æ¸æˆä¸ºæ™ºæ…§å†œä¸šçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»ä¸€ä¸ª <strong>åŸºäº YOLOv8 çš„å†œä¸šè™«å®³æ£€æµ‹ç³»ç»Ÿ</strong>ï¼Œè¦†ç›– <strong>102 ç±»å¸¸è§å†œä¸šå®³è™«</strong>ï¼Œå¹¶æä¾›ä»æ¨¡å‹è®­ç»ƒåˆ° PyQt5 å›¾å½¢åŒ–éƒ¨ç½²çš„å®Œæ•´å·¥ç¨‹æ–¹æ¡ˆï¼ŒçœŸæ­£å®ç° <strong>â€œæ¨¡å‹å³å·¥å…·ï¼ŒAI å³ç”Ÿäº§åŠ›â€</strong>ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfcafbc25a074ae4b75f2d8139b4df53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767185760&amp;x-signature=YERUtGauVkOKSPISJG2P09OpgKI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-2">æºç ä¸‹è½½ä¸æ•ˆæœæ¼”ç¤º</h3>
<p>å“”å“©å“”å“©è§†é¢‘ä¸‹æ–¹è§‚çœ‹ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1ux7rzbEqw" target="_blank" title="https://www.bilibili.com/video/BV1ux7rzbEqw" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1uxâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53ef3b0da12e48ecbbdd7802497d867a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767185760&amp;x-signature=5hzgr6X1ECJqNGltmPqq6tWkz%2F0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-3">äºŒã€ç³»ç»Ÿæ•´ä½“è®¾è®¡ä¸æŠ€æœ¯è·¯çº¿</h3>
<h4 data-id="heading-4">2.1 ç³»ç»Ÿæ¶æ„è®¾è®¡</h4>
<p>æœ¬é¡¹ç›®é‡‡ç”¨å…¸å‹çš„ <strong>ç«¯åˆ°ç«¯è§†è§‰è¯†åˆ«ç³»ç»Ÿæ¶æ„</strong>ï¼Œæ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">å›¾åƒ / è§†é¢‘ / æ‘„åƒå¤´
<span class="hljs-code">        â†“
YOLOv8 è™«å®³æ£€æµ‹æ¨¡å‹
        â†“
ç›®æ ‡æ¡† + ç±»åˆ« + ç½®ä¿¡åº¦
        â†“
PyQt5 å›¾å½¢ç•Œé¢å®æ—¶å±•ç¤º
        â†“
ç»“æœä¿å­˜ / åç»­åˆ†æ
</span></code></pre>
<h4 data-id="heading-5">2.2 æ ¸å¿ƒæŠ€æœ¯é€‰å‹</h4>






























<table><thead><tr><th>æ¨¡å—</th><th>æŠ€æœ¯æ–¹æ¡ˆ</th><th>é€‰æ‹©åŸå› </th></tr></thead><tbody><tr><td>ç›®æ ‡æ£€æµ‹æ¨¡å‹</td><td>YOLOv8</td><td>å®æ—¶æ€§å¼ºã€ç²¾åº¦é«˜ã€å·¥ç¨‹æˆç†Ÿ</td></tr><tr><td>æ·±åº¦å­¦ä¹ æ¡†æ¶</td><td>PyTorch</td><td>ç¤¾åŒºæ´»è·ƒã€æ˜“æ‰©å±•</td></tr><tr><td>GUI ç•Œé¢</td><td>PyQt5</td><td>è·¨å¹³å°ã€å¼€å‘æ•ˆç‡é«˜</td></tr><tr><td>æ¨ç†éƒ¨ç½²</td><td>Ultralytics API</td><td>ä¸€è¡Œä»£ç å³å¯æ¨ç†</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-6">ä¸‰ã€ç³»ç»ŸåŠŸèƒ½æ¦‚è¿°</h3>
<h4 data-id="heading-7">3.1 å¤šè¾“å…¥æºè™«å®³æ£€æµ‹</h4>
<p>ç³»ç»Ÿæ”¯æŒå¤šç§æ•°æ®è¾“å…¥æ–¹å¼ï¼Œèƒ½å¤Ÿé€‚é…ä¸åŒå†œä¸šåº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>ğŸ“· <strong>å•å¼ å›¾ç‰‡æ£€æµ‹</strong>ï¼šç”¨äºæ ·æœ¬åˆ†æä¸ç§‘ç ”æ ‡æ³¨</li>
<li>ğŸ“ <strong>æ–‡ä»¶å¤¹æ‰¹é‡æ£€æµ‹</strong>ï¼šé€‚åˆå†å²æ•°æ®å¤„ç†</li>
<li>ğŸ¥ <strong>è§†é¢‘æ£€æµ‹</strong>ï¼šç”¨äºç›‘æ§è§†é¢‘å›æ”¾åˆ†æ</li>
<li>ğŸ“¹ <strong>æ‘„åƒå¤´å®æ—¶æ£€æµ‹</strong>ï¼šé€‚ç”¨äºæ¸©å®¤ã€ç”°é—´ç›‘æ§
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efb91583835a4e39ab3ca2d23043beb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767185760&amp;x-signature=lOEIvd1CdZL%2BkekheoMVQbmTNXE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ul>
<h4 data-id="heading-8">3.2 æ£€æµ‹ç»“æœå¯è§†åŒ–</h4>
<p>æ‰€æœ‰æ£€æµ‹ç»“æœå‡æ”¯æŒï¼š</p>
<ul>
<li>è‡ªåŠ¨ç»˜åˆ¶è™«å®³ç›®æ ‡æ¡†</li>
<li>æ˜¾ç¤ºè™«å®³ç±»åˆ«åç§°</li>
<li>æ˜¾ç¤ºç½®ä¿¡åº¦è¯„åˆ†</li>
<li>ä¸€é”®ä¿å­˜æ£€æµ‹ç»“æœ</li>
</ul>
<p>å³ä½¿ä¸å…·å¤‡æ·±åº¦å­¦ä¹ èƒŒæ™¯ï¼Œä¹Ÿèƒ½å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87431f1af6534264bf720c7103875513~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767185760&amp;x-signature=8cGg4jks0Hg2DJaFd6mCaaogl2A%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddaaee2145d94c319cb4137af96131ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767185760&amp;x-signature=rMN%2BCNGfWtSFkQu%2FBHB5hKFcSN4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-9">å››ã€YOLOv8 åœ¨å†œä¸šè™«å®³æ£€æµ‹ä¸­çš„ä¼˜åŠ¿</h3>
<h4 data-id="heading-10">4.1 YOLOv8 æ ¸å¿ƒç‰¹ç‚¹</h4>
<p>YOLOv8 æ˜¯ Ultralytics æ¨å‡ºçš„æ–°ä¸€ä»£ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œåœ¨å†œä¸šè™«å®³è¯†åˆ«åœºæ™¯ä¸­å…·å¤‡æ˜æ˜¾ä¼˜åŠ¿ï¼š</p>
<ul>
<li>âœ… <strong>Anchor-Free ç»“æ„</strong>ï¼šæ›´é€‚åˆè™«å®³å°ºåº¦å˜åŒ–å¤§çš„åœºæ™¯</li>
<li>âœ… <strong>é«˜é€Ÿæ¨ç†</strong>ï¼šæ”¯æŒå®æ—¶ç›‘æµ‹</li>
<li>âœ… <strong>å¤šå°ºåº¦ç‰¹å¾èåˆ</strong>ï¼šå¯¹å°ç›®æ ‡è™«å®³æ›´å‹å¥½</li>
<li>âœ… <strong>å·¥ç¨‹éƒ¨ç½²ç®€å•</strong>ï¼šé€‚åˆéç®—æ³•äººå‘˜ä½¿ç”¨</li>
</ul>
<h4 data-id="heading-11">4.2 æ£€æµ‹ä»»åŠ¡ç‰¹ç‚¹åˆ†æ</h4>
<p>å†œä¸šè™«å®³æ£€æµ‹ç›¸æ¯”é€šç”¨ç›®æ ‡æ£€æµ‹ï¼Œæ›´å…·æŒ‘æˆ˜æ€§ï¼š</p>
<ul>
<li>è™«å®³ä½“ç§¯å°ã€å½¢æ€å¤šæ ·</li>
<li>èƒŒæ™¯å¤æ‚ï¼ˆå¶ç‰‡ã€åœŸå£¤ã€æå¹²ï¼‰</li>
<li>åŒä¸€å›¾åƒä¸­å¯èƒ½å­˜åœ¨å¤šç±»è™«å®³</li>
</ul>
<p>YOLOv8 çš„å¤šå°ºåº¦ç‰¹å¾æå–èƒ½åŠ›ï¼Œæ­£å¥½å¥‘åˆè¯¥ç±»éœ€æ±‚ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16af87c5a44e4725b22debf82dd1acb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767185760&amp;x-signature=L5zAMpQOvmHErU1oUvCLkvu4dqc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-12">äº”ã€102 ç±»å†œä¸šè™«å®³æ•°æ®é›†æ„å»º</h3>
<h4 data-id="heading-13">5.1 æ•°æ®é›†è§„æ¨¡ä¸æ¥æº</h4>
<p>æœ¬é¡¹ç›®æ„å»ºå¹¶æ•´ç†äº†ä¸€å¥— <strong>é«˜è´¨é‡å†œä¸šè™«å®³æ£€æµ‹æ•°æ®é›†</strong>ï¼š</p>
<ul>
<li>ğŸ“Š å›¾åƒæ€»é‡ï¼š<strong>20,000+</strong></li>
<li>ğŸ› è™«å®³ç±»åˆ«ï¼š<strong>102 ç±»</strong></li>
<li>ğŸ·ï¸ å…¨éƒ¨äººå·¥ç²¾æ ‡ï¼ˆYOLO æ ¼å¼ï¼‰</li>
</ul>
<p>è¦†ç›–æ°´ç¨»ã€å°éº¦ã€ç‰ç±³ã€æœæ ‘ã€è”¬èœç­‰å¤šç§ä½œç‰©çš„å¸¸è§è™«å®³ã€‚</p>
<hr/>
<h4 data-id="heading-14">5.2 æ•°æ®é›†ç»„ç»‡ç»“æ„</h4>
<pre><code class="hljs language-text" lang="text">dataset/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ val/
â”œâ”€â”€ labels/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ val/
</code></pre>
<p>æ ‡ç­¾æ–‡ä»¶é‡‡ç”¨ YOLO æ ‡å‡†æ ¼å¼ï¼Œé€‚é… YOLOv8 è®­ç»ƒæµç¨‹ã€‚</p>
<hr/>
<h4 data-id="heading-15">5.3 å¤šç±»åˆ«è™«å®³æ ‡æ³¨æŒ‘æˆ˜</h4>
<p>åœ¨ 102 ç±»è™«å®³æ ‡æ³¨è¿‡ç¨‹ä¸­ï¼Œé‡ç‚¹è§£å†³äº†ï¼š</p>
<ul>
<li>ç±»åˆ«ç›¸ä¼¼åº¦é«˜çš„é—®é¢˜</li>
<li>ä¸åŒç”Ÿé•¿é˜¶æ®µè™«æ€å·®å¼‚</li>
<li>å¤šè™«åŒæ¡†é®æŒ¡æƒ…å†µ</li>
</ul>
<p>è¿™äº›é—®é¢˜çš„è§£å†³æ˜¾è‘—æå‡äº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</p>
<hr/>
<h3 data-id="heading-16">å…­ã€æ¨¡å‹è®­ç»ƒä¸æ€§èƒ½è¯„ä¼°</h3>
<h4 data-id="heading-17">6.1 è®­ç»ƒé…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash">yolo detect train \
data=data.yaml \
model=yolov8n.pt \
epochs=100 \
batch=16 \
imgsz=640
</code></pre>
<h4 data-id="heading-18">6.2 è®­ç»ƒè¿‡ç¨‹ç›‘æ§</h4>
<p>YOLOv8 åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸»è¦å…³æ³¨ä¸‰ç±»æŸå¤±å‡½æ•°ï¼š</p>
<ul>
<li><strong>box_loss</strong>ï¼šç›®æ ‡å®šä½ç²¾åº¦</li>
<li><strong>cls_loss</strong>ï¼šç±»åˆ«è¯†åˆ«å‡†ç¡®ç‡</li>
<li><strong>dfl_loss</strong>ï¼šè¾¹ç•Œæ¡†åˆ†å¸ƒå­¦ä¹ </li>
</ul>
<p>è®­ç»ƒæ—¥å¿—ä¸å¯è§†åŒ–ç»“æœå°†è‡ªåŠ¨ä¿å­˜åœ¨ <code>runs/detect/train</code> ç›®å½•ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c31cdb164ab142ba9de5abf5b1ef5266~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767185760&amp;x-signature=JExsS9flb6kktAtLPXh664npX%2FY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-19">6.3 æ¨¡å‹æ•ˆæœè¯„ä¼°</h4>
<p>è¯„ä¼°æŒ‡æ ‡åŒ…æ‹¬ï¼š</p>
<ul>
<li>Precision / Recall</li>
<li>mAP@0.5</li>
<li>æ··æ·†çŸ©é˜µåˆ†æ</li>
</ul>
<p>åœ¨éªŒè¯é›†ä¸Šï¼Œå½“ <strong>mAP@0.5 è¶…è¿‡ 90%</strong>ï¼Œæ¨¡å‹å·²å…·å¤‡å®é™…éƒ¨ç½²ä»·å€¼ã€‚</p>
<hr/>
<h3 data-id="heading-20">ä¸ƒã€æ¨¡å‹æ¨ç†ä¸å·¥ç¨‹åŒ–éƒ¨ç½²</h3>
<h4 data-id="heading-21">7.1 æ¨ç†ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> ultralytics <span class="hljs-keyword">import</span> YOLO

model = YOLO(<span class="hljs-string">"best.pt"</span>)
results = model(<span class="hljs-string">"test.jpg"</span>, conf=<span class="hljs-number">0.25</span>, save=<span class="hljs-literal">True</span>)
</code></pre>
<h4 data-id="heading-22">7.2 æ¨ç†ç»“æœè¯´æ˜</h4>
<p>è¾“å‡ºç»“æœåŒ…å«ï¼š</p>
<ul>
<li>è™«å®³ç±»åˆ«åç§°</li>
<li>ç½®ä¿¡åº¦åˆ†æ•°</li>
<li>è¾¹ç•Œæ¡†åæ ‡</li>
<li>ç»“æœä¿å­˜è·¯å¾„</li>
</ul>
<p>å¯ç›´æ¥ç”¨äºåç»­ç»Ÿè®¡åˆ†ææˆ–é¢„è­¦ç³»ç»Ÿã€‚</p>
<hr/>
<h3 data-id="heading-23">å…«ã€PyQt5 å›¾å½¢ç•Œé¢å®ç°</h3>
<h4 data-id="heading-24">8.1 GUI è®¾è®¡ç›®æ ‡</h4>
<ul>
<li>ğŸ–±ï¸ é›¶å‘½ä»¤è¡Œæ“ä½œ</li>
<li>ğŸ§‘â€ğŸŒ¾ é¢å‘å†œä¸šç”¨æˆ·å‹å¥½</li>
<li>âš¡ å®æ—¶æ£€æµ‹åé¦ˆ</li>
<li>ğŸ’¾ ç»“æœå¯è¿½æº¯ä¿å­˜</li>
</ul>
<h4 data-id="heading-25">8.2 å®æ—¶æ£€æµ‹æµç¨‹</h4>
<ol>
<li>é‡‡é›†å›¾åƒå¸§</li>
<li>è°ƒç”¨ YOLOv8 æ¨ç†</li>
<li>ç»˜åˆ¶æ£€æµ‹æ¡†</li>
<li>æ˜¾ç¤ºå¹¶ä¿å­˜ç»“æœ</li>
</ol>
<p>ç³»ç»Ÿæ•´ä½“å“åº”æµç•…ï¼Œé€‚åˆè¿ç»­ç›‘æµ‹åœºæ™¯ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5db01747c958471b99f3f45089ef98c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767185760&amp;x-signature=FD0XFcyfrPdu%2B88otCWhXt5s1gA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-26">ä¹ã€åº”ç”¨åœºæ™¯ä¸æ‰©å±•æ–¹å‘</h3>
<h4 data-id="heading-27">9.1 å®é™…åº”ç”¨åœºæ™¯</h4>
<ul>
<li>ğŸŒ¾ æ™ºæ…§å†œç”°è™«å®³ç›‘æµ‹</li>
<li>ğŸ”¬ å†œä¸šç§‘ç ”æ•°æ®åˆ†æ</li>
<li>ğŸšœ æ— äººæœºè™«å®³å·¡æ£€</li>
<li>ğŸ“¡ æ¸©å®¤è™«å®³è‡ªåŠ¨é¢„è­¦</li>
</ul>
<h4 data-id="heading-28">9.2 æœªæ¥æ‰©å±•æ–¹å‘</h4>
<ul>
<li>ç»“åˆ <strong>OCR / åˆ†ç±»æ¨¡å‹</strong> åšç²¾ç»†åŒ–è¯†åˆ«</li>
<li>éƒ¨ç½²è‡³ <strong>Jetson / è¾¹ç¼˜è®¾å¤‡</strong></li>
<li>è”åˆæ°”è±¡æ•°æ®å®ç°è™«å®³é¢„æµ‹</li>
<li>æ¥å…¥å†œä¸šç®¡ç†å¹³å°å½¢æˆé—­ç¯ç³»ç»Ÿ</li>
</ul>
<hr/>
<h3 data-id="heading-29">åã€æ€»ç»“</h3>
<p>æœ¬æ–‡ä»‹ç»äº†ä¸€ä¸ª <strong>åŸºäº YOLOv8 çš„ 102 ç±»å†œä¸šè™«å®³æ™ºèƒ½æ£€æµ‹ç³»ç»Ÿ</strong>ï¼Œä»æ•°æ®é›†æ„å»ºã€æ¨¡å‹è®­ç»ƒåˆ° PyQt5 å›¾å½¢åŒ–éƒ¨ç½²ï¼Œå®Œæ•´å±•ç¤ºäº† AI æŠ€æœ¯åœ¨æ™ºæ…§å†œä¸šä¸­çš„å·¥ç¨‹åŒ–è½åœ°è¿‡ç¨‹ã€‚</p>
<p>è¯¥é¡¹ç›®çš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š</p>
<ul>
<li>ğŸŒŸ å¤§è§„æ¨¡å¤šç±»åˆ«è™«å®³è¯†åˆ«èƒ½åŠ›</li>
<li>ğŸŒŸ å®Œæ•´å¯å¤ç°çš„å·¥ç¨‹æ–¹æ¡ˆ</li>
<li>ğŸŒŸ å¯¹éæŠ€æœ¯äººå‘˜å‹å¥½çš„æ“ä½œä½“éªŒ</li>
<li>ğŸŒŸ å…·å¤‡çœŸå®å†œä¸šåœºæ™¯åº”ç”¨æ½œåŠ›</li>
</ul>
<p>åœ¨æ™ºæ…§å†œä¸šå¿«é€Ÿå‘å±•çš„èƒŒæ™¯ä¸‹ï¼Œè¿™ç±»ç³»ç»Ÿå°†æˆä¸º <strong>æ•°å­—å†œä¸šã€ç²¾å‡†æ–½è¯ã€ç—…è™«å®³é¢„è­¦ä½“ç³»</strong> ä¸­çš„é‡è¦åŸºç¡€è®¾æ–½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªå¤§é¾„ç¨‹åºå‘˜çš„åœ°é“æ—¥è®°ï¼ˆç¬¬5æœŸï¼‰ï¼Œå‡ ä¹éƒ½å…³äºè¯»ä¹¦]]></title>    <link>https://juejin.cn/post/7587245616754343987</link>    <guid>https://juejin.cn/post/7587245616754343987</guid>    <pubDate>2025-12-24T11:52:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587245616754343987" data-draft-id="7587264707283943434" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªå¤§é¾„ç¨‹åºå‘˜çš„åœ°é“æ—¥è®°ï¼ˆç¬¬5æœŸï¼‰ï¼Œå‡ ä¹éƒ½å…³äºè¯»ä¹¦"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-24T11:52:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘è¦æ”¹åå«å˜Ÿå˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1698109849624061"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªå¤§é¾„ç¨‹åºå‘˜çš„åœ°é“æ—¥è®°ï¼ˆç¬¬5æœŸï¼‰ï¼Œå‡ ä¹éƒ½å…³äºè¯»ä¹¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1698109849624061/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘è¦æ”¹åå«å˜Ÿå˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T11:52:00.000Z" title="Wed Dec 24 2025 11:52:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ä¸€ä¸ªæœˆåœ°é“ä¸Šï¼Œè¾“å‡ºå†…å®¹å‡ ä¹éƒ½å›´ç»•ç€æŸä¸ªä¸»é¢˜ï¼Œäºæ˜¯æœ¬ç¯‡å†…å®¹å½“ä¸­éƒ½æœ‰å°æ ‡é¢˜ã€‚</p>
<h3 data-id="heading-0">1ã€è¯»ä»€ä¹ˆä¹¦å¯ä»¥è®©äººå˜å¾—å¹³é™ã€æ·¡å®šï¼Ÿ</h3>
<p>ä»¥æˆ‘çš„ç»éªŒâ€”â€”è¿‡å»5å¹´ï¼Œè¯»äº†ä¸€äº›ä¹¦ï¼Œæ•´ä¸ªäººå˜å¾—å†…æ•›æ²‰ç¨³å®‰é™å¾ˆå¤šâ€”â€”æ¥çœ‹ï¼Œä¼¼ä¹å˜åŒ–ä¸æŸä¸€æœ¬ä¹¦çš„å…³ç³»ä¸å¤§ï¼Œè€Œä»…ä»…åªå…³äºæŒç»­é˜…è¯»è¿™ä»¶äº‹ï¼Œåªè¦æŒç»­é˜…è¯»ï¼Œè¿‡ä¸ªä¸‰äº”å¹´ï¼Œæ•´ä¸ªäººä¾¿ä¼šå¹³é™ã€æ·¡å®šè®¸å¤šã€‚</p>
<p>æˆ‘è¿™ç»“è®ºï¼Œå¤§æ¦‚æ˜¯å¾ˆä¸»è§‚çš„ï¼Œæˆ‘ä¸€æ—¶è¯´ä¸å¤ªæ¸…å˜åŒ–å¦‚ä½•å‘ç”Ÿï¼Œä½†æˆ‘å°†å°½é‡å°†å‘ç”Ÿåœ¨æˆ‘èº«ä¸Šçš„å˜åŒ–è¯´æ¸…æ¥šã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¥ä¸ºä»…ä»…è¯»ä¸€æœ¬ä¹¦ï¼Œæ˜¯ä¸èƒ½åšåˆ°æ”¹å˜çš„ï¼Œä¸ç®¡æ˜¯è®¤çŸ¥è¿˜æ˜¯è¡Œä¸ºï¼Œéƒ½ä¸è¡Œã€‚</p>
<p>ä»¥ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247484824%26idx%3D1%26sn%3D248e953335962f291844655ce0afdc2f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247484824&amp;idx=1&amp;sn=248e953335962f291844655ce0afdc2f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å­¦ä¹ ä¹‹é“</a>ã€‹å’Œã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247484213%26idx%3D1%26sn%3D46ddc3d51191cfabf18a8784f3996c44%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247484213&amp;idx=1&amp;sn=46ddc3d51191cfabf18a8784f3996c44&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">äººæ€§çš„å¼±ç‚¹</a>ã€‹ä¸ºä¾‹ã€‚</p>
<p>ã€Šå­¦ä¹ ä¹‹é“ã€‹ï¼Œæ˜¯ä¸€ä½ä¸–ç•Œå† å†›ä¸¤æ¬¡å¤ºå¾—å† å†›çš„ä¸ªäººä¼ è®°ï¼Œä½œè€…åœ¨ä¹¦ä¸­åˆ†äº«äº†ä»–çš„å­¦ä¹ ä¹‹é“â€”â€”ä¸€åˆ‡éƒ½åŸºäºé‡å¤ç»ƒä¹ ï¼Œç»ƒä¹ è¿‡ç¨‹ä¸­éœ€è¦è¾…ä»¥çƒ­çˆ±ã€‚è¯»å®Œæœ¬ä¹¦å‰åå‡ ä¸ªæœˆï¼Œæˆ‘æ˜¯çœŸæœ‰æŒ‰ç…§ä½œè€…çš„åˆ†äº«å»è¡Œäº‹çš„ï¼Œç¯®çƒä»å¾®å°åŠ¨ä½œè°ƒæ•´ï¼Œå°çƒä¹Ÿä¸€ç‚¹ä¸€æ»´è¿›æ­¥ï¼Œä½†è¿™äº›å¾®å°è°ƒæ•´åªæŒç»­ä¸¤ä¸‰ä¸ªæœˆä¾¿è¢«æŠ›ä¹‹è„‘åã€‚</p>
<p>ã€Šäººæ€§çš„å¼±ç‚¹ã€‹ï¼Œæ˜¯æ•™å¯¼ä¸äººä¸ºå–„çš„ä¸€æœ¬ä¹¦ã€‚é˜…è¯»å½“æ—¶çš„æˆ‘ï¼Œå¤©å¤©è„¸å¸¦ç¬‘æ„ï¼Œè®¤çœŸå€¾å¬ï¼Œè€çƒ¦è®¨è®ºã€‚ä½†è¿™äº›å–„è‰¯çš„ç‰¹ç‚¹ï¼Œåœ¨å‡ ä¸ªæœˆåä¹Ÿæ…¢æ…¢æ¶ˆé€€ã€‚</p>
<p>å³ä»ä¹¦ä¸­æ”¶è·çš„è®¤çŸ¥å½±å“è‡ªå·±ä¸€æ®µæ—¶é—´è¡Œä¸ºåï¼Œå¹¶ä¸èƒ½æŒç»­ã€‚</p>
<p>ç„¶åï¼Œæ˜¯â€œå‡ ä¹æ‰€æœ‰çš„ä¹¦éƒ½æ˜¯æœ‰å…³è”çš„â€ã€‚è¿™äº›æ…¢æ…¢é€€åŒ–çš„è®¤çŸ¥ï¼Œåœ¨åæ¥çš„è¯»ä¹¦å½“ä¸­ï¼Œåˆè¢«å¼ºåŒ–ä¸å·©å›ºã€‚</p>
<p>ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247485376%26idx%3D1%26sn%3D73a55563bfc591b9c5fc819eaa607dd4%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247485376&amp;idx=1&amp;sn=73a55563bfc591b9c5fc819eaa607dd4&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å¤©æ‰å‡è±¡</a>ã€‹ä¹Ÿåœ¨è¯´é‡å¤ç»ƒä¹ ä¸çƒ­çˆ±ï¼Œã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247485188%26idx%3D1%26sn%3Debbbd8b5f355ce65a89eaf3903229e04%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247485188&amp;idx=1&amp;sn=ebbbd8b5f355ce65a89eaf3903229e04&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¹”å¸ƒæ–¯ä¼ </a>ã€‹ç”šè‡³å°†çƒ­çˆ±åŒ–ä½œæè‡´ï¼Œã€ŠåºŸé‚®å­˜åº•ã€‹è¯´è¯»ä¹¦å†™ä½œå¦‚æ˜¯ã€‚æ€»ä¹‹ï¼Œè¿™â€œåŸºäºçƒ­çˆ±çš„é‡å¤ç»ƒä¹ æ˜¯æˆåŠŸ/ç†Ÿç»ƒçš„å¿…è¦æ¡ä»¶â€è®¤çŸ¥ï¼Œæ…¢æ…¢åœ¨æˆ‘å†…å¿ƒå˜å¾—å·©å›ºã€‚</p>
<p>ç±»ä¼¼çš„è®¤çŸ¥ï¼Œå¦‚æ²‰ç¨³ã€å¦‚å®‰é™ã€å¦‚ä¸‰æ€è€Œåè¡Œã€å¦‚æ¢ä½æ€è€ƒâ€¦â€¦éƒ½åœ¨è¯»ä¹¦å½“ä¸­æ…¢æ…¢å˜å¾—å·©å›ºã€‚è¢«å·©å›ºçš„è®¤çŸ¥ï¼Œä¼šä¸è‡ªè§‰ä½“ç°åœ¨è¡Œä¸ºå½“ä¸­ï¼Œäºæ˜¯ï¼Œä¾¿è‡ªç„¶è€Œç„¶çš„å¹³é™ä¸”æ·¡å®šäº†ã€‚</p>
<p>è¿™è¿‡ç¨‹æ— å…³æŸä¸€æœ¬ä¹¦ï¼Œåªåœ¨äºæŒç»­é˜…è¯»ã€‚</p>
<h3 data-id="heading-1">2ã€çœ‹è¿‡çš„äººç‰©ä¼ è®°å½“ä¸­ï¼Œä½ æœ€æ¨èçš„æ˜¯å“ªä¸€æœ¬ï¼Ÿ</h3>
<p>æˆ‘ç›®å‰çœ‹è¿‡çš„äººç‰©ä¼ è®°ï¼Œæœ‰è¿™æ ·å‡ æœ¬ï¼šã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247484860%26idx%3D1%26sn%3D86e75da8951708f40996548980361630%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247484860&amp;idx=1&amp;sn=86e75da8951708f40996548980361630&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æ›¾å›½è—©ä¼ </a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247484637%26idx%3D2%26sn%3D333113d87ab3080e4e288f04f2d6808f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247484637&amp;idx=2&amp;sn=333113d87ab3080e4e288f04f2d6808f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">äººç”Ÿéšæ—¶å¯ä»¥é‡æ¥</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247484979%26idx%3D1%26sn%3D42cd3716c384045d497004a57693fdd6%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247484979&amp;idx=1&amp;sn=42cd3716c384045d497004a57693fdd6&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä»æ–‡è‡ªä¼ </a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247485177%26idx%3D1%26sn%3D47e4d29e34639dca2aabfca279369026%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247485177&amp;idx=1&amp;sn=47e4d29e34639dca2aabfca279369026&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€ä¸ªç‘œä¼½è¡Œè€…çš„è‡ªä¼ </a>ã€‹ã€Šä¹”å¸ƒæ–¯ä¼ ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247485199%26idx%3D1%26sn%3D90dac5fd75f47a63714041a34e19e2d2%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247485199&amp;idx=1&amp;sn=90dac5fd75f47a63714041a34e19e2d2&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æ¼«æ¼«å›å®¶è·¯</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247485233%26idx%3D1%26sn%3D2131400b109af41d0e62c3bb78b27e05%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247485233&amp;idx=1&amp;sn=2131400b109af41d0e62c3bb78b27e05&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸ºå¥´åäºŒå¹´</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247485587%26idx%3D1%26sn%3De44da3e0c3418d6f7edeef23cfb5bc3c%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247485587&amp;idx=1&amp;sn=e44da3e0c3418d6f7edeef23cfb5bc3c&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å¤šä½™çš„è¯</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247485685%26idx%3D1%26sn%3D1a8d59c9d14bc95ad6fdb1915ffab143%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247485685&amp;idx=1&amp;sn=1a8d59c9d14bc95ad6fdb1915ffab143&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">äººç”Ÿç”±æˆ‘</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247485714%26idx%3D1%26sn%3Df70ff6e505a2eeb74af71b277e0637b3%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247485714&amp;idx=1&amp;sn=f70ff6e505a2eeb74af71b277e0637b3&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æˆ‘çš„å‰åŠç”Ÿ</a>ã€‹ä»¥åŠã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247487166%26idx%3D1%26sn%3D45fcc533f4dbe9a1d3799a0d85e43d6c%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247487166&amp;idx=1&amp;sn=45fcc533f4dbe9a1d3799a0d85e43d6c&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æˆ‘æ›¾èµ°åœ¨å´©æºƒçš„è¾¹ç¼˜</a>ã€‹ã€‚</p>
<p>è¿™äº›ä¹¦å½“ä¸­ï¼Œæˆ‘æœ€å–œæ¬¢çš„ï¼Œæ˜¯æ²ˆä»æ–‡å…ˆç”Ÿçš„ã€Šä»æ–‡è‡ªä¼ ã€‹ï¼Œå–œæ¬¢çš„ç¼˜ç”±å¾ˆç®€å•ï¼Œä¸€æ˜¯æ²ˆå…ˆç”Ÿçš„æ–‡å­—ç®€å•çœŸå®ä¸”çœŸè¯šï¼ŒäºŒæ˜¯ä»è¿™ä¼ è®°å½“ä¸­æ‰€æ„Ÿå—åˆ°çš„å®‰é™ä¸é¡½å¼ºã€‚</p>
<p>å¯¹çš„ï¼Œæ²ˆå…ˆç”Ÿç”Ÿå‘½ä¸­çš„é‚£äº›å˜åŒ–ï¼Œåœ¨ä»–çš„æ–‡å­—å½“ä¸­æ˜¾å¾—å®‰é™è‡ªç„¶ï¼›é¡½å¼ºï¼Œåˆ™æ¥è‡ªäºå®‰é™èƒŒåçš„å˜åŒ–ï¼Œé‚£äº›å˜åŒ–ï¼ˆæ¯”å¦‚çœŸæ­£æˆä¸ºä¸€ä¸ªé æ–‡å­—å…»æ´»è‡ªå·±çš„ä½œå®¶ï¼‰ï¼Œæ˜¯éœ€è¦å¾ˆå¼ºç”Ÿå‘½åŠ›å¾ˆå¼ºæ‰§è¡ŒåŠ›çš„ã€‚</p>
<p>è¿™äº›ä¹¦å½“ä¸­ï¼Œæˆ‘æœ€æƒ³è¦æ¨èçš„ï¼Œæ˜¯æº¥ä»ªå…ˆç”Ÿçš„ã€Šæˆ‘çš„å‰åŠç”Ÿã€‹ã€‚</p>
<p>è¯šç„¶ï¼Œæœ«ä»£çš‡å¸åšè¿‡è®¸å¤šäºä¸­å›½å¾ˆä¸å¥½çš„é”™äº‹ï¼Œä½†ä»–ç»ˆäºåœ¨äººç”ŸååŠæ®µæ„è¯†åˆ°è‡ªå·±é”™è¯¯å¹¶åçœå¹¶ç»™äºˆåäººä»¥åçœã€‚</p>
<p>æˆ‘è‡ªå·±è¯»ã€Šæˆ‘çš„å‰åŠç”Ÿã€‹è¿‡ç¨‹ï¼Œæ°ä¼¼ä»¥ç¬¬ä¸€äººç§°è§†è§’çœ‹æ­£å‘ç”Ÿçš„å†å²ã€‚çš‡å¸åˆ°åº•æ¯å¤©åœ¨æƒ³ä»€ä¹ˆï¼Ÿçš‡å¸å¤±åŠ¿åä¼šæ€æ ·ï¼Ÿ</p>
<p>åŸæ¥çš‡å¸ä¹Ÿæ…Œå¼ è’å”ï¼Œçš‡å¸ä¹Ÿä¼šç„¦è™‘åˆ°ç¡ä¸ç€è§‰ã€‚</p>
<p>æˆ‘æƒ³è‡ªå·±ï¼Œçœ‹åˆ°äº†ä¸€ä½å¾ˆçœŸå®çš„çš‡å¸ã€‚</p>
<p>åˆ°å…¨ä¹¦æœ€æœ«å°¾ï¼Œæº¥ä»ªå…ˆç”Ÿæœ‰ä½“éªŒåˆ°ä¸€ç§äººç”ŸçœŸè°›ï¼Œå³â€œåƒå¾—ä¸‹é¥­ï¼Œç¡å¾—ç€è§‰â€æ˜¯äººç”Ÿæœ€å®Œç¾çŠ¶æ€ã€‚çœ‹å®Œå…¨ä¹¦ï¼Œæˆ‘æ˜¯æœ‰æ„Ÿå—åˆ°è‡ªå·±å¤šå‡ºä¸€ç§â€œä»»å…¶è‡ªç„¶â€æ€åº¦çš„ï¼šâ€œæ—¢ç„¶è¿çš‡å¸éƒ½è¿½æ±‚åƒé¥±ç©¿æš–ç¡å¥½ï¼Œä¸ºä½•æˆ‘è‡ªå·±ä¸çæƒœæ­£æ‹¥æœ‰çš„äººç”ŸçŠ¶æ€å‘¢ï¼Ÿâ€</p>
<p>ã€Šæˆ‘çš„å‰åŠç”Ÿã€‹å·²ç»çœ‹äº†è®¸ä¹…ï¼Œå¥½äº›å³æ—¶ä½“éªŒè®°ä¸å¤ªä½ï¼Œä½†å½“ä¸‹è¿™ä¸€åˆ»ï¼Œå®ƒæ˜¯æˆ‘çœ‹è¿‡äººç‰©ä¼ è®°å½“ä¸­æœ€è¢«æ¨èçš„é‚£æœ¬ã€‚</p>
<h3 data-id="heading-2">3ã€ä»Šå¹´çœ‹äº†å“ªäº›ä¹¦ï¼Ÿ</h3>
<p>ä»Šå¹´è¯»å®Œçš„ä¹¦ï¼Œå¤§æ¦‚ï¼ˆä¸ç¡®å®šçš„æ„æ€ï¼Œæ˜¯å…¶ä¸­æœ‰ä¸¤æœ¬ä¹¦å¤§æ¦‚æ˜¯å‰äº›å¹´è¯»å®Œä½†æ²¡è®°å½•çš„ï¼‰æ˜¯25æœ¬ï¼Œå®ƒä»¬åˆ†ä½œè¿™æ ·å‡ ä¸ªç±»åˆ«ï¼š</p>
<p>å¿ƒç†å­¦æœ‰ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247486833%26idx%3D1%26sn%3D76a087c56b7d1a03724c3deb155bff39%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247486833&amp;idx=1&amp;sn=76a087c56b7d1a03724c3deb155bff39&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">è¡Œä¸ºä¸»ä¹‰</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247487003%26idx%3D1%26sn%3Dd0f5fdd5d3d7292d0aaeca0de2e61d10%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247487003&amp;idx=1&amp;sn=d0f5fdd5d3d7292d0aaeca0de2e61d10&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æ— æ¡ä»¶å…»è‚²</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247487051%26idx%3D1%26sn%3D338d1d2c99fbfa7377c402322b98534d%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247487051&amp;idx=1&amp;sn=338d1d2c99fbfa7377c402322b98534d&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ååˆ†é’Ÿå†¥æƒ³</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247487071%26idx%3D1%26sn%3D3d0c48bc4da1dff0a391491be629c097%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247487071&amp;idx=1&amp;sn=3d0c48bc4da1dff0a391491be629c097&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å¹¸ç¦çš„å‹‡æ°”</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247487091%26idx%3D1%26sn%3Dff194b8ee00e41475b09cfe1419dcee4%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247487091&amp;idx=1&amp;sn=ff194b8ee00e41475b09cfe1419dcee4&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç”˜äºå¹³å‡¡çš„å‹‡æ°”</a>ã€‹ã€Šçˆ±çš„è‰ºæœ¯ã€‹å’Œã€Šäº²å¯†å…³ç³»ã€‹ã€‚å¿ƒç†å­¦ä¹¦ç±ï¼Œä¾ç„¶å¸®åŠ©æˆ‘æ›´å¥½çš„è®¤è¯†è‡ªå·±ã€‚</p>
<p>å†å²æœ‰ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247486826%26idx%3D1%26sn%3D953c7a408f4ed77e8d1703d72e86d288%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247486826&amp;idx=1&amp;sn=953c7a408f4ed77e8d1703d72e86d288&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç§¦è°œ</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247486916%26idx%3D1%26sn%3Da182c454037a9de9fc5638381f3519b6%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247486916&amp;idx=1&amp;sn=a182c454037a9de9fc5638381f3519b6&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">äº”ä»£åå›½å…¨å²</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247487160%26idx%3D1%26sn%3D0b46be43eab9b02943a9e471f31be86a%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247487160&amp;idx=1&amp;sn=0b46be43eab9b02943a9e471f31be86a&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç»†è¯´å®‹æœ</a>ã€‹ã€‚è¿™äº›ä¹¦ï¼Œæˆ‘ä¾ç„¶å¯¹ç…§ç€ã€Šå›½å²å¤§çº²ã€‹æ¥çœ‹ï¼Œæˆ‘ä»¥ä¸ºç°åœ¨çš„è‡ªå·±ï¼Œè™½ç„¶ä¾ç„¶è®°ä¸ä½äº”ä»£åå›½æœ‰å“ªäº›äººã€å®‹æœå¦‚ä½•å˜åŒ–ï¼Œä½†å¿ƒä¸­å¯¹è¿™ä¸¤ä¸ªæœä»£æ˜¯å¤šå‡ºè®¸å¤šå°è±¡çš„ï¼Œäº”ä»£åå›½æœ€é»‘æš—ï¼Œè€Œå®‹ç§¯è´«ç§¯å¼±ã€‚</p>
<p>ä¼ è®°ä»¥åŠè®°å½•è‡ªå·±æˆ–ä»–äººç”Ÿæ´»äº‹çš„ä¹¦æœ‰ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247486775%26idx%3D1%26sn%3D8febe91b349f10f51119777f0e4586ae%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247486775&amp;idx=1&amp;sn=8febe91b349f10f51119777f0e4586ae&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">é—­ç»è®°</a>ã€‹ã€Šæˆ‘æ›¾èµ°åœ¨å´©æºƒçš„è¾¹ç¼˜ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247487405%26idx%3D1%26sn%3Db29454f463aae06415b5ae802f408f0b%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247487405&amp;idx=1&amp;sn=b29454f463aae06415b5ae802f408f0b&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç“¦å°”ç™»æ¹–</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247487424%26idx%3D1%26sn%3D3133242fda8f1a1d1661734fb68f7bbc%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247487424&amp;idx=1&amp;sn=3133242fda8f1a1d1661734fb68f7bbc&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">åˆè€çš„å¥³äºº</a>ã€‹ã€Šæ²ˆä»æ–‡è¯„ä¼ ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247487330%26idx%3D1%26sn%3Dae49ac0abf9984c051faf259660b148a%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247487330&amp;idx=1&amp;sn=ae49ac0abf9984c051faf259660b148a&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æˆ‘çš„è€å¸ˆæ²ˆä»æ–‡</a>ã€‹ã€‚</p>
<p>æˆ‘ä¾ç„¶å–œæ¬¢çœ‹äººç‰©ä¼ è®°ï¼Œæˆ‘ä»¥ä¸ºè¯»äººç‰©ä¼ è®°è¿™é€‰æ‹©çœŸä¸é”™ï¼Œå®ƒä»¬æ€»ç»™äºˆæˆ‘ä¸€ç§å€Ÿé‰´ï¼šæˆ‘ç»å†è¿‡çš„ï¼Œå‰äººä¹Ÿç»å†è¿‡ã€‚</p>
<p>å…³äºæ²ˆä»æ–‡å…ˆç”Ÿçš„ä¹¦ï¼Œæˆ‘æ–°åŠ å…¥ä¹¦æ¶çš„è¿˜æœ‰ã€Šæ‰§æ‹—çš„æ‹“è’è€…ã€‹ä»¥åŠã€Šæ²ˆä»æ–‡å…¨ä¼ ã€‹ã€‚</p>
<p>å°è¯´æœ‰ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247486851%26idx%3D1%26sn%3D70c46b4fa18b866456587477babcc823%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247486851&amp;idx=1&amp;sn=70c46b4fa18b866456587477babcc823&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">é¢å°”å¤çº³æ²³å³å²¸</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247486946%26idx%3D1%26sn%3Dec5abb657f9070a26059a051008ae16a%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247486946&amp;idx=1&amp;sn=ec5abb657f9070a26059a051008ae16a&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æ´»ç€</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247486991%26idx%3D1%26sn%3Da0b97519ba38f0f736ad840693bc8ff1%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247486991&amp;idx=1&amp;sn=a0b97519ba38f0f736ad840693bc8ff1&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å¤šæƒ…å‰‘å®¢æ— æƒ…å‰‘</a>ã€‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247487041%26idx%3D1%26sn%3D73f32f2ff37e643ca45ec7e228aeef61%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247487041&amp;idx=1&amp;sn=73f32f2ff37e643ca45ec7e228aeef61&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">é•¿å®‰çš„è”æ</a>ã€‹ã€‚è¿™å‡ æœ¬å°è¯´ï¼Œéƒ½çŸ­çŸ­çš„ï¼›ã€Šé¢å°”å¤çº³æ²³å³å²¸ã€‹å’Œã€Šæ´»ç€ã€‹ï¼Œæˆ‘éƒ½å“­ç€è¯»å®Œã€‚</p>
<p>å…¶å®ƒç±»åˆ«æš‚æ—¶åªæœ‰ä¸€æœ¬ï¼Œåªæ˜¯ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247487057%26idx%3D1%26sn%3Dc18d4c7dd1846a64696d701dc8bfcd72%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247487057&amp;idx=1&amp;sn=c18d4c7dd1846a64696d701dc8bfcd72&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">äººä½“ç®€å²</a>ã€‹ï¼Œè¿™æ˜¯ä¸€æœ¬å¾ˆå€¼å¾—æ¨èçš„å…³äºäººä½“çš„ç§‘æ™®ä¹¦ã€‚</p>
<p>æˆ‘æ­£åœ¨é˜…è¯»ï¼Œæˆ–è®¸åœ¨ä¸ä¹…å°†æ¥ä¼šè¯»å®Œçš„ä¹¦ï¼Œæœ‰ã€Šæˆ‘çœ‹è§çš„ä¸–ç•Œã€‹ã€Šè‹ä¸œå¡æ–°ä¼ ã€‹ã€Šæè‡ªæˆã€‹ã€Šå®‰å¨œÂ·å¡åˆ—å°¼å¨œã€‹ã€Šé‡‘é’±å¿ƒç†å­¦ã€‹ä»¥åŠã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ã€‚</p>
<h3 data-id="heading-3">4ã€ç”µå­ä¹¦æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</h3>
<p>å¯¹æˆ‘æ¥è¯´ï¼Œç°åœ¨ç”µå­ä¹¦å·²ç»å®Œå®Œå…¨å…¨ä»£æ›¿äº†çº¸è´¨ä¹¦ã€‚æˆ‘ä¹°çº¸è´¨ä¹¦ï¼Œæ›´å¤šåªä¸ºâ€œæ”¶è—â€ï¼Œæˆ‘æƒ³è¦çš„ï¼Œåªæ˜¯åœ¨æŸä¸ªæ¯”è¾ƒé—²æ•£æ—¶é—´ï¼Œæ‰¾ä¸€æ‰¾ç¿»ä¹¦çš„æ„Ÿè§‰ã€‚</p>
<p>å¯¹æˆ‘æ¥è¯´ï¼Œç”µå­ä¹¦ç›¸è¾ƒçº¸è´¨ä¹¦æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p>
<p>é¦–å…ˆï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„é‚£ä¸€ç‚¹ï¼Œç”µå­ä¹¦å¾ˆæ–¹ä¾¿ã€‚ç°åœ¨æˆ‘å·²ç»åœ¨ã€Šå¾®ä¿¡è¯»ä¹¦ã€‹ä¸Šè¿ç»­é˜…è¯»ä¸‰å¹´å¤šï¼ˆä¹‹å‰åœ¨ã€Šäº¬ä¸œè¯»ä¹¦ã€‹è¿ç»­é˜…è¯»ä¸€å¹´å¤šï¼‰ï¼Œæˆ‘çš„ç¢ç‰‡æ—¶é—´â€”â€”åœ°é“ä¸Šã€å«ç”Ÿé—´ã€ç­‰ç”µæ¢¯â€”â€”éƒ½èƒ½æ‹¿å‡ºæ‰‹æœºçœ‹ä¹¦ï¼Œä½¿ç”¨æ‰‹æœºè¯»ä¹¦ï¼Œé‚£è®¸å¤šçš„ç¢ç‰‡æ—¶é—´éƒ½æ…¢æ…¢æ”’æˆå¸®åŠ©æˆ‘è¿›æ­¥çš„é˜¶æ¢¯ã€‚</p>
<p>å…¶æ¬¡ï¼ŒåŸºäºç¢ç‰‡åŒ–é˜…è¯»ï¼Œç”µå­ä¹¦æ›´å®¹æ˜“å¸®åŠ©å…»æˆè¯»ä¹¦ä¹ æƒ¯ã€‚ä¸ç®¡çº¸è´¨ä¹¦æˆ–è€…Kindleï¼Œèº«ä¸Šå¤šå¸¦ä¸€ä¸ªè®¾å¤‡ï¼Œçœ‹ä¹¦çš„é—¨æ§›æ€»æ˜¯é«˜äº†è®¸å¤šã€‚</p>
<p>ç„¶åï¼Œæ˜¯ç”µå­ä¹¦ç›¸è¾ƒçº¸è´¨ä¹¦ä¾¿å®œè®¸å¤šã€‚æˆ‘åœ¨å¾®è¯»çš„ç¬¬ä¸€å¹´ï¼Œä¹°ä¸€å¹´ä»˜è´¹ä¼šå‘˜åªèŠ±168å…ƒï¼Œè¿™ä¼šå‘˜å¯ä»¥é˜…è¯»æ‰€æœ‰åœ¨å¾®è¯»ä¸Šæ¶çš„å‡ºç‰ˆä¹¦ã€‚åæ¥ï¼Œå¾®è¯»å¼€é€šäº†50å—é’±æŒ‘æˆ˜èµ›ï¼ˆèŠ±50å—é’±ï¼Œæ¯å¤©é˜…è¯»æŒç»­ä¸€å¹´ï¼Œç´¯ç§¯æ—¶é•¿è¾¾åˆ°300å°æ—¶ï¼‰ï¼Œæˆ‘ä¾¿åªéœ€è¦50å—é’±ï¼Œä¾¿èƒ½è¯»æˆåƒä¸Šä¸‡æœ¬æˆ‘æƒ³è¯»çš„ä¹¦äº†ã€‚</p>
<p>ç„¶åï¼Œæ˜¯ç¬”è®°ä¸é‡æ–°ç¿»é˜…çš„æ–¹ä¾¿ã€‚å¾®è¯»ä¸Šé¢è¯»ä¹¦ï¼Œå¯ä»¥åœ¨ç»™äºˆè‡ªå·±æ„Ÿè§¦å†…å®¹ä¸‹æ–¹åˆ’çº¿æˆ–è€…å†™ä¸Šè‡ªå·±çš„å³æ—¶æ„Ÿæ‚Ÿï¼Œè¿™äº›æ„Ÿæ‚Ÿè¢«æ”¶é›†åœ¨ä¸€èµ·ï¼Œå¯ä»¥æœç´¢ï¼Œå¯ä»¥ç›´æ¥å®šä½ã€‚å½“ä¹¦ä¸­å†…å®¹è®°ä¸å¤ªæ¸…éœ€è¦å›é¡¾æ—¶ï¼Œç›´æ¥æœç´¢ç¬”è®°ï¼Œç›´æ¥æœç´¢å…¨ä¹¦å³å¯ã€‚</p>
<p>æ€»ä¹‹ï¼Œç”µå­ä¹¦äºæˆ‘ï¼Œæ˜¯æ–¹ä¾¿è®¸å¤šçš„ã€‚</p>
<h3 data-id="heading-4">5ã€ä¸€ç¯‡æ—¥è®°</h3>
<p>ç°åœ¨æ—¶é—´æ˜¯æ™šä¸Šçš„9ç‚¹05åˆ†ï¼Œæˆ‘å·²ç»åœ¨å›å®¶åœ°é“ä¸Šå‰è¿›ä¸¤ç«™ã€‚ä¸‰ç«™è¿‡åæˆ‘è¦è½¬è½¦ï¼Œæˆ‘æ‰“ç®—å†å»æ‹¼ä¸€æ‹¼ä¸‹ä¸€è¶Ÿåˆ—è½¦çš„åŠæ—¶â€”â€”åœ¨å®ƒå…³é—¨ä¹‹å‰â€”â€”ä¸Šè½¦ï¼Œæˆ‘äºæ˜¯ç«™åœ¨è·ç¦»è½¬ç«™è·¯çº¿æœ€è¿‘é‚£ä¸ªå£å­ï¼Œåªå¾…åˆ—è½¦åˆ°ç«™ã€‚</p>
<p>æˆ‘çš„å³æ‰‹è¾¹ï¼Œå¤§æ¦‚æ˜¯ä¸¤ä¸ªå°å­¦ç”Ÿï¼ˆæˆ–è€…æ˜¯åˆä¸­ç”Ÿï¼‰æ­£ååœ°ä¸Šï¼Œä»–ä»¬çš„å¯¹è¯å†…å®¹ï¼Œæˆ‘æœ‰å¬åˆ°ä¸¤ä¸‰å¥ï¼š</p>
<p>â€œé‚£ä¸ªåˆ«äººåˆšèµ°äº†çš„åº§ä½è¿˜æ˜¯çƒ­ä¹çš„ï¼Œå¦‚æœåäº†å°±ä¼šé•¿ç—”ç–®ã€‚â€</p>
<p>â€œæˆ‘ä¸‹ä¸€ç«™å°±åˆ°çº¢æ——æ²³æ²Ÿäº†ã€‚åæ­£æ²¡ä½œä¸šâ€¦â€¦åæ­£æ²¡ä½œä¸šã€‚â€</p>
<p>å¯¹äºä»Šå¤©çš„å‡†æ—¶ä¸Šè½¦ï¼Œæˆ‘æ˜¯å¾ˆæœ‰äº›éª„å‚²çš„ã€‚æˆ‘ä¼¼ä¹å·²ç»å¥½ä¹…å¥½ä¹…ï¼Œæ²¡æœ‰9ç‚¹å‡†æ—¶ä¸‹ç­ã€‚</p>
<p>ï¼ˆæˆ‘è·‘è¿‡æ¢ä¹˜è·¯çº¿ï¼Œä¸‹ä¸€è¶Ÿåˆ—è½¦è¿˜æœ‰ä¸€åˆ†é’Ÿï¼Œä»Šå¤©çš„æ¢ä¹˜è®¡åˆ’æˆåŠŸäº†ã€‚ï¼‰</p>
<p>ä»Šå¤©çš„å·¥ä½œï¼Œåˆæ˜¯å’Œæç¤ºè¯ä½œæ–—äº‰çš„ä¸€å¤©ã€‚</p>
<p>ä»Šå¤©çš„æ–°é—»ï¼Œå¤§æ¦‚åªæœ‰ä¸€æ¡ï¼šæˆ‘çš„åŒäº‹è¯´ï¼Œä»–çš„ä¸€ä½æœ‹å‹ä»å¤–åœ°å›é‡åº†ï¼ŒOfferå¹´åŒ…å·²ç»è¿‡äº†60ã€‚å•Šå“ˆï¼Ÿæ‰€ä»¥é‡åº†è¿˜æ˜¯å¼€å¾—èµ·å·¥èµ„çš„ï¼Ÿ</p>
<p>å—ï¼åˆæœ‰äººåœ¨åœ°é“ä¸Šå¼€å¾ˆå¤§å£°çš„å¤–æ”¾ï¼Œä»–åº”è¯¥æ­£åœ¨ç©æŸä¸€ç§æ‰“æªæ¸¸æˆã€‚</p>
<p>è¯´èµ·åœ°é“å¤–æ”¾ï¼Œæˆ‘æƒ³é‡åº†å’ŒåŒ—äº¬ï¼ˆä¸Šå‘¨å»äº†åŒ—äº¬å‡ºå·®ï¼‰æ˜¯çœŸæœ‰ä¸€äº›å·®è·çš„ï¼Œæˆ‘åœ¨åŒ—äº¬ä¸€å‘¨ååœ°é“æ¬¡æ•°ä¸å¤šï¼ˆå¤§æ¦‚äº”å…­ä¸ƒæ¬¡ï¼‰ï¼Œä»æ²¡å¬åˆ°è¿‡æ‰‹æœºå¤–æ”¾ï¼Œè€Œé‡åº†ï¼Ÿæ¯ä¸€è¶Ÿåœ°é“ï¼Œæˆ‘éƒ½å¾—å’Œå¤–æ”¾ä¾ åšä¸€ç‚¹å°å°æ–—äº‰ï¼šé‚£äº›ä¸èƒ½ä¸“å¿ƒçš„æ—¶é—´ï¼Œæˆ‘æ€»å‘Šè¯‰è‡ªå·±â€œæ²¡å…³ç³»çš„ï¼Œä¸å¬ä¸å¬â€ã€‚</p>
<p>æœ€è¿‘ä¸¤å¤©çš„æ™šé¥­ï¼Œéƒ½æ˜¯åœ°é“å£çš„ä¸€ç¢—æ´‹èŠ‹ï¼Œ7å—é’±ã€‚åƒæ´‹èŠ‹å¾ˆå¿«ï¼Œäºæ˜¯æˆ‘å¯ä»¥åœ¨æ™šé¥­æ—¶é—´å‘å®¶é‡Œæ‰“å‡ ä¸ªç”µè¯ã€‚èº«ä½“å¥åº·ï¼Œå°±è¯¥æ˜¯æœ€é«˜ä¼˜çš„äº‹æƒ…ã€‚</p>
<p>è¿˜æœ‰å…¶å®ƒçš„åº”è¯¥è®°å½•çš„å†…å®¹ä¹ˆï¼Ÿå¥½åƒæ²¡æœ‰çš„ã€‚</p>
<p>ä¸å¯¹ï¼Œè¿˜æœ‰ä¸€æ¡ã€‚</p>
<p>æœ€è¿‘çš„è¯»ä¹¦æ—¶é—´ï¼Œå…¨éƒ¨ç»™äº†å°è¯´ï¼Œä¸€æœ¬æ˜¯ã€Šå®‰å¨œÂ·å¡åˆ—å°¼å¨œã€‹ï¼Œä¸€æœ¬æ˜¯ã€Šæè‡ªæˆã€‹ã€‚è¿™ä¸¤æœ¬å°è¯´ï¼Œéƒ½å¥½é•¿å¥½é•¿ã€‚</p>
<h3 data-id="heading-5">6ã€è¯»ä¹¦ä¼šå¿˜è®°åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</h3>
<p>åŸºäºæˆ‘ç°åœ¨çš„è¯»ä¹¦è®¤çŸ¥ï¼ˆè¿‡å»äº”å¹´æ—¥å‡é˜…è¯»ä¸€å°æ—¶å¤šä¸€ç‚¹ï¼Œè¯»ä¹¦ç±»å‹å¤šç§å¤šæ ·ï¼Œç´¯ç§¯è¯»å®Œå¤§æ¦‚120æœ¬ä¹¦ï¼‰æ¥çœ‹ï¼Œæˆ‘ä»¥ä¸ºè®°ä½ä¹¦ä¸­å†…å®¹è¿™ä»¶äº‹ï¼Œä»¿ä½›æ˜¯å¯ä»¥ä¸éœ€è¦åˆ»æ„è¿½æ±‚çš„ã€‚</p>
<p>é‚£äº›æˆ‘ä»¬æƒ³è¦è®°ä½çš„ï¼Œæ€»èƒ½å¤Ÿå°è±¡ä¸ç†„ã€‚</p>
<p>ä»¥ã€Šå­¦ä¹ ä¹‹é“ã€‹é‡Œé¢çš„â€œZoneæ¦‚å¿µâ€ä¸ºä¾‹ï¼ŒæŠ•ç¯®ä¸ç®¡æ€ä¹ˆæŠ•éƒ½æœ‰ï¼Œå°çƒä¸ç®¡æ€ä¹ˆæ‰“éƒ½è¿›ï¼Œå…¨æ²¡æœ‰æŠ€å·§ï¼Œåªå‡­å€Ÿç€ä¸€ç§æ„Ÿè§‰ï¼Œè¿™ç§æ„Ÿè§‰æ˜¯å¯ä»¥æœ‰æ–¹æ³•åšåˆ°é¢‘ç¹è¿›å…¥çš„ã€‚</p>
<p>å¦‚ä½•è¿›å…¥ï¼Œå¸¦ç€çƒ­çˆ±ï¼Œç»ƒä¹ ä¸æ­¢å³å¯ã€‚</p>
<p>è¿˜æœ‰äº›å†…å®¹ï¼Œæ˜¯è¯»è¿‡ä¾¿å¿˜è®°çš„ï¼Œä½†è¿™å¿˜è®°çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡ä¸€ç§ç®€å•çš„æ–¹æ³•è¢«è®°ä½ã€‚è¿™ç®€å•çš„æ–¹æ³•æ˜¯ä¸åœåœ°è¯»ï¼Œè¯»ç›¸å…³è”çš„ä¹¦ï¼Œçœ‹ç›¸å…³è”çš„å†…å®¹ã€‚</p>
<p>è¿™å†…å®¹å½“ä¸­çš„ä¸€ä¸ªç¤ºä¾‹ï¼Œæ˜¯ç®—æ³•â€œå¿«æ…¢æŒ‡é’ˆâ€ï¼Œæœ€åˆæˆ‘å¹¶ä¸çŸ¥é“å¦‚ä½•æ¢æµ‹é“¾è¡¨æ˜¯å¦å¾ªç¯ï¼Œç¬¬ä¸€æ¬¡åˆ·é¢˜åä¹Ÿå¾ˆå¿«å¿˜è®°ã€‚ç›´åˆ°åœ¨ã€Šå‰‘æŒ‡Offerã€‹ã€Šæˆ‘çš„ç¬¬ä¸€æœ¬ç®—æ³•ä¹¦ã€‹ã€Šç¨‹åºå‘˜é¢è¯•é‡‘å…¸ã€‹ä¸­å¤šæ¬¡å¼ºåŒ–ï¼Œå®ƒè¢«åˆ»åœ¨è„‘å­é‡Œã€‚</p>
<p>æˆ‘æƒ³è‡ªå·±ï¼Œè¯»è¿‡ä¹¦å½“ä¸­å¯èƒ½è¶…è¿‡99ï¼…ï¼Œæ˜¯éƒ½è¢«æˆ‘å¿˜è®°çš„ã€‚è¿™äº›è¢«å¿˜è®°çš„å†…å®¹ï¼Œå¦‚ä½•èƒ½å¤Ÿè¢«æ›´å¥½çš„è®°ä½ï¼Œæˆ‘çŸ¥é“çš„æ–¹æ³•æ¥è‡ªäºã€Šæ´¥å·´å¤šæ™®é€šå¿ƒç†å­¦ã€‹åå«â€œç²¾ç»†å¤è¿°â€ï¼Œå³å°†è‡ªå·±å­¦åˆ°çš„çŸ¥è¯†ï¼Œç”¨è‡ªå·±çš„è¯è®¤çœŸåœ°é‡æ–°ç»„ç»‡ä¸€éï¼Œè¿™ä»¶äº‹åšå®Œï¼Œä¾¿èƒ½å°†çŸ¥è¯†è®°å¾—æ›´ä¹…äº›ã€‚</p>
<p>è¿™æ ·è®°ä½çš„å†…å®¹ï¼Œæœ‰â€œå°†æ„¤æ€’æˆ–è€…æ‚²ä¼¤å†™æˆæ–‡å­—ï¼Œèƒ½å¤Ÿç¼“è§£è‡ªå·±çš„æƒ…ç»ªâ€â€œè®°å¿†èƒ½åŠ›å¯ä»¥ä¸éšå¹´é¾„å˜åŒ–ï¼Œåªéœ€è¦ä¸€äº›ç»„è£…æŠ€å·§â€â€¦â€¦</p>
<p>æœ€åï¼Œç°åœ¨çš„æˆ‘çœŸçš„ä»¥ä¸ºâ€œè¯»ä¹¦æƒ³è¦è®°ä½â€è¿™ä»¶äº‹æ˜¯å¯ä»¥ä¸å¼ºæ±‚çš„ï¼Œåªè¦ä¸åœçœ‹ï¼Œå¤–åŠ ä¸€äº›æ€è€ƒï¼Œå°±å¥½çš„ã€‚</p>
<h3 data-id="heading-6">7ã€æ¨èå‡ æœ¬èƒ½å¤Ÿå¿«é€Ÿè¯»å®Œçš„å°ä¹¦å§ï¼Ÿ</h3>
<p>çœ‹åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘è„‘å­é‡Œå†’å‡ºæ¥ä¸¤ä¸‰æœ¬å°ä¹¦ï¼Œå®ƒä»¬éƒ½æ˜¯æˆ‘è¯»å®Œè®¤ä¸ºä¸é”™ä¸åšç”šè‡³å¾ˆè–„çš„ä¸‰æœ¬å°ä¹¦ï¼šã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247486071%26idx%3D1%26sn%3D4aacbe10662555f68f3fedc27f0a11b8%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247486071&amp;idx=1&amp;sn=4aacbe10662555f68f3fedc27f0a11b8&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å®è´µçš„äººç”Ÿå»ºè®®</a>ã€‹ã€Šå—æˆ’ã€‹ä»¥åŠã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5ODczOTMzMA%3D%3D%26mid%3D2247486182%26idx%3D1%26sn%3De46c9ca86a99e80fedd8da36006c9e27%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MjM5ODczOTMzMA==&amp;mid=2247486182&amp;idx=1&amp;sn=e46c9ca86a99e80fedd8da36006c9e27&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æ´»å‡ºç”Ÿå‘½çš„æ„ä¹‰</a>ã€‹ã€‚</p>
<p>ã€Šå®è´µçš„äººç”Ÿå»ºè®®ã€‹ï¼Œæ˜¯ä¸€ä½è€è€…ï¼ˆä½œè€…åå­—ä»¥åŠç”Ÿå¹³æˆ‘å¹¶ä¸èƒ½è®°ä½ï¼Œè®°ä½çš„åªæ˜¯ä½œè€…æ˜¯ä¸€ä½å…­åå¤šå²çš„è€äººï¼‰å†™ç»™ä»–å­å¥³ä»¥åŠå­™è¾ˆçš„äººç”Ÿå»ºè®®ã€‚æ¯ä¸€æ¡å»ºè®®ï¼Œéƒ½ä¸é•¿ã€‚</p>
<p>æˆ‘è®°ä½çš„å»ºè®®æœ‰å¥½äº›ï¼Œæ¯”å¦‚è€ç”Ÿå¸¸è°ˆçš„â€œç§ä¸€æ£µæ ‘çš„æœ€å¥½æ—¶æœºæ˜¯åå¹´å‰ï¼Œå…¶æ¬¡æ˜¯ç°åœ¨â€ï¼Œæ¯”å¦‚â€œå†™ä¸å‡ºæ–‡ç« æ—¶ï¼Œå‡è£…ä»¥è®²æ•…äº‹å½¢å¼è¯´ç»™æœ‹å‹å¬ï¼Œå½“å†™å®Œååˆ å»æœ‹å‹åå­—ï¼Œä¾¿æ˜¯ä¸€ç¯‡ä¸é”™è‰ç¨¿â€ã€‚ï¼ˆæ­¤å¤„åªæ˜¯è‡ªå·±çš„å¤è¿°ï¼Œå¹¶éä¹¦ä¸­åŸæ–‡ã€‚ï¼‰</p>
<p>æˆ‘ä»¥ä¸ºã€Šå®è´µçš„äººç”Ÿå»ºè®®ã€‹æ˜¯ä¸€æœ¬å¥½ä¹¦çš„ç¼˜ç”±åœ¨äºä½œè€…åœ¨æœ«å°¾æ‰€è¯´â€œä¹¦ä¸­å»ºè®®æ°ä¼¼å¸½å­ï¼Œå¯èƒ½å¹¶ä¸é€‚ç”¨æ¯ä¸€ä¸ªäººï¼Œé€‰æ‹©è‡ªå·±å–œæ¬¢çš„é‚£é¡¶å°±å¥½â€ï¼Œå³ä½œè€…å¹¶ä¸å¼ºè¿«è¯»è€…æ¥å—ä»–çš„è®¤çŸ¥ã€‚</p>
<p>ä¸å¼ºè¿«ï¼Œä¾¿æ˜¯é•¿è€…é£èŒƒã€‚</p>
<p>ã€Šå—æˆ’ã€‹æ˜¯æ±ªæ›¾ç¥ºå…ˆç”Ÿçš„çŸ­ç¯‡å°è¯´ï¼Œæˆ‘å¤§æ¦‚çœ‹å®Œè¿‡ä¸ä¸‹äº”éï¼Œå…¨ä¹¦å¾ˆçŸ­ï¼Œæˆ–è®¸ä¸åˆ°ä¸€å°æ—¶ä¾¿èƒ½è¯»å®Œã€‚æ¯ä¸€éé˜…è¯»ï¼Œæˆ‘éƒ½æ„Ÿå—åˆ°ä¸€ç§ç®€å•çš„ç¾å¥½ï¼šæ˜å­å’Œè‹±å­çš„çˆ±æƒ…ï¼Œå”¯ç¾ã€è‡ªç„¶ï¼Œå……æ»¡æ´»åŠ›ã€‚</p>
<p>ã€Šæ´»å‡ºç”Ÿå‘½çš„æ„ä¹‰ã€‹ï¼Œæ˜¯ä¸€æœ¬çŸ­çŸ­ä¼ è®°ï¼Œæˆ‘ä»ä¹¦ä¸­æ”¶è·çš„è®¤çŸ¥æœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li>æ‹¥æœ‰å¸Œæœ›æ˜¯ä¸€ä¸ªäººæ´»ä¸‹å»çš„æœ€åŸºæœ¬æ¡ä»¶ï¼›</li>
<li>ä¸ç®¡æ€æ ·çš„ç»æœ›åœºæ™¯ï¼Œæˆ‘ä»¬éƒ½æ‹¥æœ‰æœ€åçš„è‡ªç”±ï¼Œé€‰æ‹©ä»¥ä½•ç§æ€åº¦é¢å¯¹è¿™ç»æœ›çš„è‡ªç”±ã€‚</li>
</ol>
<p>ä»¥ä¸Šä¸‰æœ¬ä¹¦ï¼Œå¦‚æœå¿«ä¸€ç‚¹ï¼Œæˆ–è®¸ä¸€ä¸¤å¤©å†…å¯ä»¥å…¨éƒ¨è¯»å®Œã€‚ä½†å›å‘³æ— ç©·ã€‚</p>
<h3 data-id="heading-7">8ã€æ€æ ·åšåˆ°åšæŒé˜…è¯»ï¼Ÿ</h3>
<p>å¤§æ¦‚é ä¸€ç‚¹æƒ¯æ€§ï¼Œä¸€ç‚¹è´ªå¿µï¼Œä»¥åŠå¯¹ä¹¦ä¸­å†…å®¹çš„è®¸å¤šæœŸå¾…ã€‚</p>
<p>æƒ¯æ€§ï¼Œæ¥æºäºè¿‡å»äº”å¹´çš„ä½œæ¯ï¼Œä»¥åŠç”¨æ‰‹æœºçš„ä¹ æƒ¯ã€‚</p>
<p>è¿‡å»äº”å¹´ä»¥æ¥ï¼Œæˆ‘æœ‰ä¸¤å¹´åŠä¸Šç­é€šå‹¤æ˜¯ååœ°é“çš„ã€‚åœ°é“ä¸Šçš„æ—¶é—´ï¼Œéƒ½è¢«æˆ‘ç”¨æ¥çœ‹ä¹¦ï¼Œè¿™æ—¶é—´çš„çœ‹ä¹¦ï¼Œæ¯«æ— å¿ƒç†è´Ÿæ‹…ã€‚</p>
<p>ä¸Šç­è·¯ä¸Šï¼šâ€œæˆ‘æ­£è¦å»å…¬å¸å¹²æ´»å‘¢ï¼Œç°åœ¨é€šå‹¤è·¯ä¸Šè‚¯å®šä¸ä¼šæœ‰äººæ‰¾ã€‚â€</p>
<p>ä¸‹ç­è·¯ä¸Šï¼šâ€œä»Šå¤©çš„äº‹æƒ…å·²ç»éƒ½æœ‰äº†äº¤ä»£ï¼Œçœ‹ç‚¹è½»æ¾çš„ä¹¦æ‰“å‘ä¸‹æ—¶é—´å§ã€‚â€</p>
<p>äºæ˜¯çœ‹ä¹¦ï¼Œä¸“æ³¨ä¸”æœ‰è¶£ã€‚</p>
<p>å½“çœ‹ä¹¦æ¬¡æ•°å˜å¤šï¼Œå¾ˆè‡ªç„¶ä¾¿ä¼šæ‰“å¼€æ‰‹æœºä¸Šçš„ã€Šå¾®ä¿¡è¯»ä¹¦ã€‹ï¼Œäºæ˜¯å†çœ‹ä¸¤åˆ†é’Ÿã€‚</p>
<p>è´ªå¿µï¼Œä¹Ÿå¯ä»¥è¯´æˆæ˜¯å¯¹è®¤çŸ¥çš„æ¸´æ±‚ã€‚äº”å¹´ä»¥å‰ï¼Œæˆ‘æƒ³ç€é è‡ªå·±çš„ç”Ÿæ´»æ—¥è®°æ¢å–æµé‡ï¼Œåªå†™ä¸¤å‘¨ä¾¿å‘ç°æ²¡äº†ä¸œè¥¿å¯å†™ï¼Œäºæ˜¯æ‰¾ä¹¦æ¥çœ‹ã€‚</p>
<p>æˆ‘çš„çœ‹ä¹¦ï¼Œæ˜¯ä¸ºå†™ä½œè¨€ä¹‹æœ‰ç‰©ï¼Œæ˜¯ä¸ºæ›´æ–°ï¼ˆæˆ‘ç»™è‡ªå·±å®šä¸‹ç›®æ ‡ï¼Œä¸ç®¡æ˜¯æ€æ ·å†…å®¹ï¼Œæ¯å‘¨å¿…é¡»å®Œæˆä¸€ç¯‡æ›´æ–°ï¼‰æœ‰å†…å®¹å¯å†™ï¼Œæ˜¯ä¸ºå†…å®¹èƒ½å¤Ÿè¢«äººé˜…è¯»æ¢æˆæ”¶å…¥ã€‚</p>
<p>äºæ˜¯çœ‹ä¹¦ï¼Œä¸å†™ä½œç›¸è¾…ç›¸æˆï¼Œä¸–ä¿—åˆå¸¦ç›®çš„ã€‚</p>
<p>æœŸå¾…ï¼Œæ˜¯å¯¹ä¹¦ä¸­å†…å®¹æœ€çº¯ç²¹çš„æœŸå¾…ï¼Œæˆ‘ä»…ä»…æƒ³çŸ¥é“ï¼Œä¹¦ä¸­é‚£äººç‰©ã€äº‹ç‰©ã€ç†è®ºçš„æœªæ¥æ˜¯æ€æ ·çš„ã€‚</p>
<p>ã€Šå´‡ç¥¯ä¼ ã€‹é‡Œçš„å´‡ç¥¯æ€ä¹ˆå°±äº¡å›½äº†ï¼Ÿã€Šå®‰å¨œÂ·å¡åˆ—å°¼å¨œã€‹é‡Œçš„å®‰å¨œå’Œå¼—éš†æ–¯åŸºæœ‰æœªæ¥ä¹ˆï¼Ÿã€Šæˆ‘æ›¾èµ°åœ¨å´©æºƒçš„è¾¹ç¼˜ã€‹ä¸­ä¿æ•æ´ªè€å¸ˆæ˜¯æ€æ ·ä¸å´©æºƒçš„ï¼Ÿã€Šä¹Ÿè®¸ä½ è¯¥æ‰¾ä¸ªäººèŠèŠã€‹å½“ä¸­å¿ƒç†å’¨è¯¢å¸ˆæ¯å¤©éƒ½åšäº›ä»€ä¹ˆï¼Ÿ</p>
<p>æ€»ä¹‹ï¼Œé‚£äº›æ— å°½çš„æœŸç›¼ä¸å¥½å¥‡ç‰µç€æˆ‘ï¼Œçœ‹ä¹¦ä¸åœã€‚</p>
<h3 data-id="heading-8">9ã€ç³–é†‹æ’éª¨æ€ä¹ˆåšå‘¢ï¼Ÿ</h3>
<p>æœ€è¿‘åˆšåˆšè¯•è¿‡å†åšä¸€æ¬¡ç³–é†‹æ’éª¨ï¼Œä¸è„†ï¼Œä½†ä¾ç„¶æœ‰ç‚¹å¥½åƒã€‚åˆ¶ä½œæ­¥éª¤å¦‚ä¸‹ï¼Œæ¯ä¸€æ­¥éª¤åé¢æ‹¬å·ä¸­æ˜¯æˆ‘å½“ä¸‹å­˜åœ¨çš„ç–‘æƒ‘ï¼š</p>
<p>é€‰æ’éª¨ã€‚ï¼ˆè¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œä¸Šä¸€æ¬¡åšæ—¶æ’éª¨éƒ½éª¨å¤´ä¸­é—´è‚‰åŒ…å‘¨è¾¹ï¼Œæˆå“å¥½çœ‹è®¸å¤šã€‚è¿™ä¸€æ¬¡ä¹°çš„æ‰“å…­æŠ˜çš„æ’éª¨ï¼Œæˆå“åˆ™å¾ˆä¸è§„åˆ™ã€‚ï¼‰</p>
<p>æ’éª¨æ´—å‡€ç„¯æ°´å†ç”¨çƒ­æ°´æ´—ä¸€æ´—ã€‚ï¼ˆè¿™ä¸ªæ­¥éª¤æˆ‘ä»ç½‘ä¸Šå­¦æ¥çš„ï¼Œå…¶å®æ²¡æŒæ¡åŸç†ï¼Œä¹Ÿä¸ç¡®å®šä¸ç„¯æ°´å‘³é“æ˜¯å¦ä¸ä¸€æ ·ï¼Ÿç„¯æ°´å‡ºé”…åç”¨å†·æ°´æ´—æ˜¯å¦çœŸçš„ä¼šæŸ´ï¼Ÿç”šè‡³ç„¯æ°´ä¹‹åæœ‰å¿…è¦æ´—ä¹ˆï¼Ÿï¼‰</p>
<p>é”…ä¸­æ”¾æ²¹ï¼Œå°ç«æ”¾ç³–ï¼ŒæŠŠç³–ç‚’å‡ºç³–è‰²ã€‚ï¼ˆè¿™ä¸ªæ­¥éª¤æˆ‘æƒ³è‡ªå·±æ²¹æ”¾å¤šäº†äº›è€Œç³–æ”¾å°‘äº†ç‚¹ï¼Œäºæ˜¯ç³–è‰²ä¸é»‘ï¼Œæ’éª¨ä¸ç”œã€‚å½“ç„¶ï¼Œæ²¡æœ‰é¥­åº—é‡Œé¢çš„ç”œï¼Œå´ä¼¼ä¹æ›´ç¬¦åˆè‡ªå·±çš„å£å‘³ã€‚ï¼‰</p>
<p>ä¸‹æ’éª¨ï¼Œä¸åœåœ°ç¿»ç¿»ç¿»ç¿»ï¼Œç›´åˆ°æ’éª¨æœ‰äº›ç„¦é»„ã€‚</p>
<p>ä¸‹å…¥æ²¡è¿‡æ’éª¨å†æ·±ä¸€æŒ‡çš„çƒ­æ°´ï¼ŒåŠ å…¥è°ƒå‘³çš„ç›ã€é†‹ã€é…±æ²¹ï¼Œç„–ã€‚ï¼ˆä»€ä¹ˆæ—¶å€™æ”¾ç›ä¾ç„¶æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘çœ‹åˆ°ä¸€æ¡é«˜èµè§†é¢‘è¯´æå‰æ”¾ç›æ’éª¨ä¼šæŸ´ï¼Œä½†çœŸæ­£åˆ¶ä½œæ—¶ï¼Œä¼šå¿˜è®°è¿™æ³¨æ„äº‹é¡¹ã€‚åˆç”±äºæ²¡æœ‰å¤©å¤©åšï¼Œäºæ˜¯ä¸èƒ½éªŒè¯ã€‚ï¼‰</p>
<p>æ°´å¿«å¹²ï¼Œå†ç¿»ç¿»ç¿»ï¼Œæ”¶æ±ã€‚å°ä¸€ä¸‹ï¼Œä¸å¤Ÿç”œå†åŠ ä¸€ç‚¹ç³–ã€‚å‡ºé”…ï¼Œæ’’ä¸€ç‚¹è‘±ç²’ã€çº¢æ¤’ç²’ï¼Œå¢é¦™å¢è‰²ã€‚</p>
<p>æœ€ç»ˆæˆå“ï¼Œä¸å«©ï¼Œæœ‰ä¸€ç‚¹æŸ´ï¼Œæœ‰åš¼åŠ²ï¼Œé¢œè‰²ä¸æ·±ï¼Œä½†ä¾ç„¶å¥½åƒçš„ã€‚</p>
<p>ä¸‹æ¬¡åšæ—¶çš„ä¼˜åŒ–ï¼šå°‘ä¸€ç‚¹æ²¹å¤šä¸€ç‚¹ç³–ã€‚</p>
<h3 data-id="heading-9">10ã€æœ€è¿‘æ­£é˜…è¯»çš„ä¹¦æœ‰å“ªäº›ï¼Ÿ</h3>
<p>æˆ‘æœ€è¿‘æ­£é˜…è¯»çš„ä¹¦ï¼Œæ˜¯è¿™å‡ æœ¬ï¼š</p>
<p>ã€Šæè‡ªæˆã€‹å’Œã€Šå´‡ç¥¯ä¼ ã€‹ï¼Œã€Šå®‰å¨œÂ·å¡åˆ—å°¼å¨œã€‹ï¼Œã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ï¼Œä»¥åŠã€Šäº²å¯†å…³ç³»ã€‹ã€‚</p>
<p>ç›®å‰ã€Šæè‡ªæˆã€‹åˆšåˆšçœ‹åˆ°å››åˆ†ä¹‹ä¸€ï¼Œæˆ‘å¯¹äºä¹¦ä¸­ä½œè€…å¯¹å´‡ç¥¯çš„è¯„ä»·â€”â€”åˆšæ„è‡ªç”¨ã€çŠ¹ç–‘çŒœå¿Œâ€”â€”ä¸å¤ªç›¸ä¿¡ï¼Œäºæ˜¯å…ˆè¯»ã€Šå´‡ç¥¯ä¼ ã€‹ã€‚</p>
<p>ã€Šå´‡ç¥¯ä¼ ã€‹ä¹Ÿæ­£è¯»åˆ°å››åˆ†ä¹‹ä¸€å¤„ï¼Œå´‡ç¥¯ç­äº†é­å¿ è´¤ï¼Œå·²ç»æ€æ‰è¢å´‡ç„•ï¼Œç°åœ¨ä¸ä¿¡ä»»å¤§è‡£ï¼Œæ­£å¯ç”¨å®¦å®˜åˆ°å„å¤„ç›‘ç£ã€‚</p>
<p>ç°åœ¨å´‡ç¥¯ç»™äºˆæˆ‘çš„å°è±¡ï¼Œæ˜¯å‹¤åŠ³çš‡å¸åšäº†ä¸€ä¸ªé”™è¯¯å†³å®šï¼ˆæ€è¢å´‡ç„•ï¼‰ï¼Œä»¥åŠèº«è¾¹å¸®æ‰‹å¾ˆä¸å¤Ÿã€‚</p>
<p>ã€Šå®‰å¨œÂ·å¡åˆ—å°¼å¨œã€‹æ­£å¬åˆ°å…­åˆ†ä¹‹äº”å¤„ï¼ŒåŸºè¿ªå’Œåˆ—æ–‡æ­£åœ¨è«æ–¯ç§‘ç­‰å¾…ä»–ä»¬çš„ç¬¬ä¸€ä¸ªå°å­©å‡ºç”Ÿï¼›å®‰å¨œå’Œå¼—éš†æ–¯åŸºåœ¨ä¹¡ä¸‹ç”Ÿæ´»ï¼Œå¼—éš†æ–¯åŸºæ„Ÿå—åˆ°å®‰å¨œé™åˆ¶ç€ä»–ï¼Œå®‰å¨œåˆšåˆšç»™ä¸ˆå¤«å¡åˆ—å®å†™ä¿¡ç”³è¯·ç¦»å©šã€‚</p>
<p>åˆ°ç°åœ¨ï¼Œæˆ‘ä»¥ä¸ºå®‰å¨œå’Œå¼—éš†æ–¯åŸºä¹‹é—´ï¼Œä¼¼ä¹ä¹Ÿå¹¶éæ˜¯çœŸæ­£çš„çˆ±æƒ…ï¼Œåœ¨æœ€åˆçš„æ¿€æƒ…ã€æ¸©æƒ…è¿‡åï¼Œå½“çœŸæ­£å›åˆ°ç”Ÿæ´»å½“ä¸­ï¼Œä»–ä»¬çš„å…³ç³»ä¹Ÿæ˜¯å¹¶ä¸ç¨³å®šçš„ã€‚æˆ–è®¸å®‰å¨œå¹¶ä¸æ˜¯å‡ºè½¨çŠ¶æ€ï¼Œæ­¤ç§æƒ…å†µä¼šå¥½ä¸€äº›ï¼Ÿ</p>
<p>ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹å·²ç»çœ‹åˆ°æœ€åä¸€ä¸ªä¹ æƒ¯â€”â€”ä¸æ–­æ›´æ–°â€”â€”äº†ã€‚è™½ç„¶æˆ‘å¯¹ä½œè€…åœ¨ä¹¦ä¸­çš„é‚£äº›ä½è¯å¹¶ä¸å¾ˆä¿¡æœï¼Œä½†éšç€é˜…è¯»æ—¶é•¿å¢åŠ ï¼Œæˆ‘ä»¥ä¸ºè¿™ä¸ƒä¸ªä¹ æƒ¯æ˜¯çœŸæœ‰æ•ˆçš„ï¼Œå®ƒä»¬æ˜¯æ™ºæ…§ï¼Œæ¥è‡ªäºç”Ÿæ´»ã€å†å²ä¸­ç§¯æ”’çš„ç»éªŒã€‚</p>
<p>ã€Šäº²å¯†å…³ç³»ã€‹ï¼Œæˆ‘ä¹‹å‰å·²ç»å¬å®Œä¸€éæœ‰å£°ä¹¦ï¼Œç°åœ¨åˆšåˆšè¯»åˆ°ç¬¬äºŒç« ã€‚æˆ‘æƒ³è¦çš„ï¼Œæ˜¯åœ¨æœªæ¥å°†è¿™æœ¬ä¹¦ä¸­å†…å®¹ç†è§£çš„æ›´å¤šäº›ã€‚</p>
<p>å¯¹çš„ï¼Œã€Šäº²å¯†å…³ç³»ã€‹çœ‹ä¸¤éçš„åŸå› æ˜¯ï¼Œå®ƒæ˜¯æˆ‘è¶…çº§æ¨èçš„ä¸€æœ¬ä¹¦ï¼Œæˆ‘æƒ³è‡ªå·±ç†è§£æ›´å¤šäº›åå†ç»™å‡ºæœ‰ç†æœ‰æ®çš„æ¨èç†ç”±ã€‚</p>
<p>å¯¹çš„ï¼Œä¹¦è¯»ç¬¬äºŒéï¼Œé€Ÿåº¦æ…¢è®¸å¤šè®¸å¤šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘çš„é¦–æ¬¾ Spec AI ç¼–è¾‘å™¨ï¼šKiro å®æˆ˜æµ‹è¯„ä¸ Trae å¯¹æ¯”åˆ†æ]]></title>    <link>https://juejin.cn/post/7587265840065150982</link>    <guid>https://juejin.cn/post/7587265840065150982</guid>    <pubDate>2025-12-24T10:06:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587265840065150982" data-draft-id="7587231644802596883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘çš„é¦–æ¬¾ Spec AI ç¼–è¾‘å™¨ï¼šKiro å®æˆ˜æµ‹è¯„ä¸ Trae å¯¹æ¯”åˆ†æ"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-12-24T10:06:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰åªèŒæ–°"/> <meta itemprop="url" content="https://juejin.cn/user/360295544400973"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘çš„é¦–æ¬¾ Spec AI ç¼–è¾‘å™¨ï¼šKiro å®æˆ˜æµ‹è¯„ä¸ Trae å¯¹æ¯”åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/360295544400973/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰åªèŒæ–°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T10:06:19.000Z" title="Wed Dec 24 2025 10:06:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¶ç„¶é‡åˆ°Kiro</h2>
<p>ç¬”è€…å§‹ç»ˆå…³æ³¨å„ç±»å·¥å…·åœ¨å·¥ç¨‹åŒ–åœºæ™¯ä¸­çš„å®é™…è¡¨ç°ã€‚è¿‘æœŸåœ¨ç¤¾åŒºå¶ç„¶æ¥è§¦åˆ° AWS æ¨å‡ºçš„ AI IDE Kiroï¼Œå…¶æ ¸å¿ƒå–ç‚¹ä¹‹ä¸€çš„ Spec æ¨¡å¼å¼•å‘å…³æ³¨ â€”â€” æ­¤å‰åœ¨ Trae å¹³å°ä½¿ç”¨åŒç±»åŠŸèƒ½æ—¶ï¼Œæ›¾é­é‡è§„èŒƒé€‚é…ä¸è¶³ã€æµç¨‹å†—ä½™ç­‰é—®é¢˜ï¼Œä¸¥æ ¼æ¥è¯´Trae å¹¶æœªé›†æˆ spec åŠŸèƒ½ï¼Œå¯ä½¿ç”¨ Spec kit æ¥æ›²çº¿æ•‘å›½ï¼Œå¯¹ä¸¤æ¬¾å·¥å…·çš„ Spec æ¨¡å¼è¿›è¡Œç³»ç»Ÿæ€§å®æµ‹ï¼Œæ—¨åœ¨ä¸ºå›¢é˜Ÿé€‰å‹æä¾›å®¢è§‚å‚è€ƒã€‚</p>
<h2 data-id="heading-1">ä½¿ç”¨ Spec æ¨¡å¼</h2>
<p>åŸºæœ¬ç•Œé¢</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71531c33dc28412180a079548866cae9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=bOq2iFAeq%2BMpAsjk%2FKsbJLN6ptc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">éœ€æ±‚æè¿°</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6faf281b8f7d4066a7a42de0d31e52ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=i7UNIUWOL27n890XDXShkhcrYUY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">è®¾è®¡</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c97169d794474a5883ca4e45602a2c9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=%2Bu92vzVdgouMdBHJgRO6lskqE9g%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">ä»»åŠ¡æ‹†è§£</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a85f47f46794065afe1b028c023c7f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=fXmmjEtVk91x%2FIPhOK8lXW3QkAg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">æ‰§è¡Œä»»åŠ¡</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f4e7d06503f485fb793fee6c49be79d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=dwoXpHH0cnqCnOV0nOSmyXHsqCc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d381f82f8f542319060dc8f3e071571~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=BvY7S1vRJnrIVdb7TxafFxqjK3U%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">æœ€ç»ˆäº§ç‰©</h3>
<p>åŒ…å«æ–‡æ¡£è®°å½•å’Œä»£ç ä»¥åŠé™æ€èµ„æºæ–‡ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b05a4598e0e34920b97f7d232c75c3c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=QTtSj9ActWFWGMUNaOk4s5HpBA4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">Kiro å’Œ Trae CN æ•ˆæœå¯¹æ¯”</h2>
<h3 data-id="heading-8">Kiro å®Œæˆæ•ˆæœ</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74056e28ec894d2b874b5c198392952a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=h9fUtSJalUfjpmc3N48dZC3wJgQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">Trae CN ä½¿ç”¨ spec kit å®Œæˆæ•ˆæœã€‚</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebaccccd01644e4598e4e5db0ba1d089~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=HRRYKqlYnt97uh0umw1dmp5ae6Y%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">ä»£ç å¯¹æ¯”</h2>
<h3 data-id="heading-11">kiro å®Œæˆçš„ä»£ç </h3>
<p>kiro åœ¨æœ¬æ¬¡å¼€å‘ä»»åŠ¡ä¸­ï¼Œæ ¸å¿ƒéµå¾ª<strong>å¤ç”¨ç°æœ‰èµ„æº</strong>çš„åŸåˆ™å¼€å±•ä»£ç ç¼–å†™å·¥ä½œï¼Œå…·ä½“å®æ–½ç»†èŠ‚å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>ç»„ä»¶å±‚é¢</strong>ï¼šä¼˜å…ˆé€‰ç”¨é¡¹ç›®ä¸­å·²å°è£…å®Œæˆçš„é€šç”¨ç»„ä»¶ï¼ˆå¦‚åŸºç¡€å¸ƒå±€ç»„ä»¶ã€è¡¨å•ç»„ä»¶ã€åˆ—è¡¨å±•ç¤ºç»„ä»¶ç­‰ï¼‰ï¼Œæœªé‡æ–°å¼€å‘æ–°çš„ç»„ä»¶æ¨¡å—ã€‚æ­¤ä¸¾æ—¢ä¿è¯äº†ç»„ä»¶é£æ ¼ä¸é¡¹ç›®æ•´ä½“çš„ä¸€è‡´æ€§ï¼Œä¹Ÿå‡å°‘äº†é‡å¤å¼€å‘çš„å·¥ä½œé‡ï¼Œæå‡äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</li>
<li><strong>å·¥å…·å‡½æ•°å±‚é¢</strong>ï¼šå……åˆ†è°ƒç”¨é¡¹ç›®ä¸­å·²æ²‰æ·€çš„å·¥å…·å‡½æ•°åº“ï¼ˆå¦‚æ•°æ®æ ¼å¼åŒ–å‡½æ•°ã€è¯·æ±‚å°è£…å‡½æ•°ã€æ ¡éªŒå‡½æ•°ç­‰ï¼‰ï¼Œé¿å…äº†åŒç±»åŠŸèƒ½çš„é‡å¤ç¼–ç ï¼ŒåŒæ—¶ä¾æ‰˜ç»è¿‡éªŒè¯çš„å·¥å…·å‡½æ•°ï¼Œæå‡äº†ä»£ç çš„ç¨³å®šæ€§ä¸æ‰§è¡Œæ•ˆç‡ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8014cf267a6b454b867df3c5b192cde9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=zHJKpMT8XJ%2BM%2BjEl5%2FkBxV63xoM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62a1019dca4047ed99e11a527b4438d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=u0Si3QXEehwAGyKYTsP%2Frsc22s4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">Trae å®Œæˆçš„ä»£ç </h3>
<p>trae åœ¨æœ¬æ¬¡å¼€å‘ä»»åŠ¡ä¸­ï¼Œé‡‡ç”¨<strong>ç›´æ¥é›†æˆ Element UI ç»„ä»¶åº“</strong>çš„æ–¹å¼è¿›è¡Œä»£ç å®ç°ï¼Œå…·ä½“ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>ç»„ä»¶åº“é€‰ç”¨</strong>ï¼šç›´æ¥å¼•å…¥ Element UI å®˜æ–¹ç»„ä»¶åº“ä¸­çš„å„ç±»ç»„ä»¶</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f6ad2479c1c41ccbbab40080a278949~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=9oOK%2BV%2BwOtWtOdgAjfbC4SuQX44%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1d3c52e4d0f46df96a3f5f0acb98504~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=26lhTMuMrEQKNmGzzY7AijGtb%2Bs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-13">äº§ç‰©å¯¹æ¯”</h2>
<p>kiro</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2867214d9501451c8c3ab3a484fd4063~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=tiwqrb%2BHWEWhdkgt%2FU0xyyrvgRI%3D" alt="" loading="lazy"/></p>
<p>trae</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87def4451c3d4ac49b51d40c2b8308f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175742&amp;x-signature=%2FwuISTlwVd7KjBeJKqgJiA7fO%2FM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14">ç»“å°¾</h2>
<p>ä»å®æµ‹ä½“éªŒæ¥çœ‹ï¼ŒSpec æ¨¡å¼ç»é AI ç¼–ç¨‹å·¥å…·çš„é™„åŠ åŠŸèƒ½ï¼Œè€Œæ˜¯æœªæ¥å·¥ç¨‹åŒ–å¼€å‘çš„æ ¸å¿ƒèŒƒå¼ â€”â€” å®ƒæ­£åœ¨é‡æ„ â€œéœ€æ±‚ - è®¾è®¡ - å¼€å‘ - ç»´æŠ¤â€ çš„å…¨é“¾è·¯é€»è¾‘ï¼Œè®© â€œæ–‡æ¡£å³è§„èŒƒã€è§„èŒƒå³ä»£ç â€ æˆä¸ºç°å®ã€‚éšç€ AI å¯¹ç»“æ„åŒ–æŒ‡ä»¤çš„ç†è§£èƒ½åŠ›æŒç»­æå‡ï¼Œç²¾å‡†ã€å®Œæ•´çš„æ–‡æ¡£æè¿°å°†é€æ¸å–ä»£é‡å¤çš„ä»£ç ç¼–å†™å·¥ä½œï¼Œæˆä¸ºå¼€å‘æµç¨‹ä¸­çš„æ ¸å¿ƒäº§å‡ºç‰©ï¼Œå…¶ä»·å€¼ç”šè‡³ä¼šè¶…è¶Šä»£ç æœ¬èº«ã€‚</p>
<p>Kiro ä¸ Trae å‡æä¾›å…è´¹è¯•ç”¨é€šé“ï¼Œè¿™ä¸ºå¼€å‘è€…é™ä½äº†æ¢ç´¢æ–°èŒƒå¼çš„é—¨æ§› â€”â€” æ— éœ€ä»˜è´¹å³å¯åœ¨çœŸå®é¡¹ç›®ä¸­éªŒè¯å·¥å…·çš„é€‚é…æ€§ï¼Œäº²èº«æ„Ÿå—ä¸åŒ Spec æ¨¡å¼çš„è®¾è®¡é€»è¾‘ä¸è½åœ°èƒ½åŠ›ã€‚è®©æˆ‘ä»¬å¾—ä»¥é›¶æˆæœ¬å¯¹æ¯”å·¥å…·å·®å¼‚ï¼Œæ ¹æ®è‡ªèº«é¡¹ç›®åœºæ™¯ï¼ˆå¦‚å›¢é˜Ÿè§„æ¨¡ã€è§„èŒƒè¦æ±‚ã€æŠ€æœ¯æ ˆç±»å‹ï¼‰é€‰æ‹©æœ€é€‚åˆçš„ AI ç¼–è¾‘å™¨ã€‚</p>
<h2 data-id="heading-15">ç›¸å…³é“¾æ¥</h2>
<p><a href="https://juejin.cn/post/7564227311511076904" target="_blank" title="https://juejin.cn/post/7564227311511076904">TRAE Ã— Spec Kit å®æˆ˜ï¼šäº”æ­¥æ„å»ºæµå¼ AI å¯¹è¯ Web åº”ç”¨</a><br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fkiro.dev%2F" target="_blank" title="https://kiro.dev/" ref="nofollow noopener noreferrer">kiro ä¸‹è½½åœ°å€</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ HBuilder ä¸Šæ¶ iOS åº”ç”¨æ—¶å¸¸è§çš„é—®é¢˜ä¸åº”å¯¹æ–¹å¼]]></title>    <link>https://juejin.cn/post/7587021119255658523</link>    <guid>https://juejin.cn/post/7587021119255658523</guid>    <pubDate>2025-12-24T10:02:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587021119255658523" data-draft-id="7587245616753885235" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ HBuilder ä¸Šæ¶ iOS åº”ç”¨æ—¶å¸¸è§çš„é—®é¢˜ä¸åº”å¯¹æ–¹å¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-24T10:02:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒå°±å¥½2025"/> <meta itemprop="url" content="https://juejin.cn/user/3850962908492660"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ HBuilder ä¸Šæ¶ iOS åº”ç”¨æ—¶å¸¸è§çš„é—®é¢˜ä¸åº”å¯¹æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3850962908492660/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒå°±å¥½2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T10:02:17.000Z" title="Wed Dec 24 2025 10:02:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¾ˆå¤š uni-app æˆ– HBuilder é¡¹ç›®ä¸­ï¼Œâ€œä¸Šæ¶ iOSâ€å¸¸è¢«ç†è§£ä¸ºä¸€ä¸ªé¡ºå»¶åŠ¨ä½œï¼š
é¡µé¢å†™å®Œ â†’ äº‘æ‰“åŒ… â†’ æäº¤ App Storeã€‚</p>
<p>ä½†å®é™…å‚ä¸è¿‡å®Œæ•´æµç¨‹ä¹‹åä¼šå‘ç°ï¼ŒHBuilder è§£å†³çš„æ˜¯å¼€å‘å’Œæ‰“åŒ…å…¥å£çš„é—®é¢˜ï¼Œè€Œ çœŸæ­£å½±å“ä¸Šæ¶æ˜¯å¦é¡ºåˆ©çš„ï¼Œä»ç„¶æ˜¯ iOS åŸç”Ÿå‘å¸ƒä½“ç³»é‚£ä¸€æ®µã€‚</p>
<p>å¾ˆå¤šå¡ç‚¹ï¼Œå¹¶ä¸æ˜¯ HBuilder æ²¡æœ‰èƒ½åŠ›ï¼Œè€Œæ˜¯è·¨ç«¯å·¥å…·ä¸åŸç”Ÿå‘å¸ƒæµç¨‹ä¹‹é—´ï¼Œå­˜åœ¨ä¸€äº›é»˜è®¤è¢«å¿½ç•¥çš„ç»†èŠ‚ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>HBuilder äº§å‡ºçš„ IPAï¼Œå¹¶ä¸ç­‰åŒäºå·²å‡†å¤‡å¥½ä¸Šæ¶</strong></h2>
<p>åœ¨å·¥ç¨‹å®è·µä¸­ï¼Œæˆ‘è§è¿‡ä¸å°‘æƒ…å†µï¼š
HBuilder äº‘æ‰“åŒ…æˆåŠŸã€IPA ç”Ÿæˆæ­£å¸¸ï¼Œä½†åœ¨ä¸Šä¼ æˆ–å®¡æ ¸é˜¶æ®µåå¤å¤±è´¥ã€‚</p>
<p>åŸå› å¾€å¾€é›†ä¸­åœ¨å‡ ä¸ªåœ°æ–¹ï¼š</p>
<ul>
<li>Bundle ID ä¸å¼€å‘è€…è´¦å·ä¸­å·²æœ‰åº”ç”¨ä¸ä¸€è‡´</li>
<li>ä½¿ç”¨äº†ä¸ç¬¦åˆå‘å¸ƒè¦æ±‚çš„è¯ä¹¦æˆ–æè¿°æ–‡ä»¶</li>
<li>æ„å»ºäº§ç‰©æºå¸¦äº†æµ‹è¯•é˜¶æ®µé…ç½®</li>
</ul>
<p>è¿™äº›é—®é¢˜åœ¨ HBuilder æ‰“åŒ…é˜¶æ®µä¸ä¸€å®šä¼šè¢«æç¤ºï¼Œä½†åœ¨ App Store æµç¨‹ä¸­ä¸€å®šä¼šè¢«æ”¾å¤§ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>åœ¨ä¸Šæ¶ä¹‹å‰ï¼Œå…ˆæŠŠåº”ç”¨èº«ä»½çœ‹æ¸…æ¥š</strong></h2>
<p>HBuilder é¡¹ç›®ä¸­ï¼ŒBundle ID é€šå¸¸åœ¨æ—©æœŸé…ç½®åå°±å¾ˆå°‘å†åŠ¨ã€‚
ä½†åœ¨å‡†å¤‡ä¸Šæ¶æ—¶ï¼Œæˆ‘æ›´å€¾å‘äºé‡æ–°ç¡®è®¤è¿™ä»¶äº‹ï¼š</p>
<ul>
<li>è¿™ä¸ª Bundle ID æ˜¯å¦å·²ç»åœ¨è´¦å·ä¸­å­˜åœ¨</li>
<li>æ˜¯å¦æ›¾è¢«å…¶ä»–é¡¹ç›®ä½¿ç”¨</li>
<li>æ˜¯å¦ä¸å½“å‰ IPA å†…çš„ä¿¡æ¯ä¸€è‡´</li>
</ul>
<p>åœ¨æ²¡æœ‰ macOS ç¯å¢ƒçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ <strong>å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰æŸ¥çœ‹ Apple å¼€å‘è€…è´¦å·ä¸­çš„ Bundle ID åˆ—è¡¨</strong>ï¼Œå¿«é€Ÿäº†è§£å½“å‰è´¦å·çš„çœŸå®çŠ¶æ€ã€‚è¿™ä¸€æ­¥å¹¶ä¸ä¼šå½±å“ HBuilder çš„æ‰“åŒ…æ–¹å¼ï¼Œä½†èƒ½é¿å…åœ¨é”™è¯¯çš„åº”ç”¨æ ‡è¯†ä¸Šç»§ç»­æŠ•å…¥æ—¶é—´ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47718c6fca154cc99df647e57c3e4254~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-D5bCx5aW9MjAyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175337&amp;x-signature=wIm3tc1yx2VAUk6Z5jLBD%2FnPv0c%3D" alt="æŸ¥çœ‹bid" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2"><strong>è¯ä¹¦é—®é¢˜ï¼Œåœ¨ HBuilder é¡¹ç›®é‡ŒåŒæ ·ä¸ä¼šè‡ªåŠ¨æ­£ç¡®</strong></h2>
<p>ä¸å°‘å¼€å‘è€…åœ¨ä½¿ç”¨ HBuilder æ—¶ï¼Œå¯¹è¯ä¹¦çš„æ„ŸçŸ¥ä¼šå˜å¼±ï¼Œå› ä¸ºå¾ˆå¤šæ“ä½œè¢«äº‘æœåŠ¡åŒ…è£¹èµ·æ¥äº†ã€‚
ä½†è¯ä¹¦ä¾ç„¶æ˜¯ iOS ä¸Šæ¶çš„ç¡¬å‰æã€‚</p>
<p>æˆ‘é‡åˆ°è¿‡çš„æƒ…å†µåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ„å»ºé˜¶æ®µä½¿ç”¨çš„æ˜¯å¼€å‘è¯ä¹¦</li>
<li>å‘å¸ƒè¯ä¹¦åªå­˜åœ¨äºæŸä¸€å° Mac</li>
<li>æ— æ³•ç¡®è®¤å½“å‰ IPA ä½¿ç”¨çš„æ˜¯å“ªä¸€ä»½è¯ä¹¦</li>
</ul>
<p>åœ¨ä¸€äº›è·¨å¹³å°æˆ–å¤šäººåä½œçš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡ å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰åˆ›å»º iOS è¯ä¹¦ï¼Œç”Ÿæˆå¯å¤ç”¨çš„ <code>.p12</code> æ–‡ä»¶ï¼Œç”¨äºæ„å»ºå’Œå‘å¸ƒæµç¨‹ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34bd1bca928e486d91a6f276fcbc2e2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-D5bCx5aW9MjAyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175337&amp;x-signature=LLce8SIRHH%2BvxT98%2FmZkUWxHsqg%3D" alt="åˆ›å»ºè¯ä¹¦" loading="lazy"/></p>
<p>è¿™ç§æ–¹å¼å¹¶ä¸æ˜¯å¦å®š HBuilder çš„äº‘æ‰“åŒ…èƒ½åŠ›ï¼Œè€Œæ˜¯è®©è¯ä¹¦ä»â€œå·¥å…·å†…éƒ¨çŠ¶æ€â€å˜æˆâ€œå·¥ç¨‹å¯ç®¡ç†èµ„æºâ€ã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>æè¿°æ–‡ä»¶ï¼Œæ˜¯ HBuilder ä¸Šæ¶ä¸­æœ€å®¹æ˜“è¢«å¿½ç•¥çš„ä¸€ç¯</strong></h2>
<p>æè¿°æ–‡ä»¶åœ¨ HBuilder é¡¹ç›®ä¸­é€šå¸¸æ˜¯è‡ªåŠ¨ç”Ÿæˆæˆ–è‡ªåŠ¨åŒ¹é…çš„ï¼Œå¾ˆå°‘æœ‰äººä¼šä¸»åŠ¨æŸ¥çœ‹å®ƒçš„å†…å®¹ã€‚
ä½†åœ¨æ’æŸ¥é—®é¢˜æ—¶ï¼Œå®ƒç»å¸¸æ˜¯å…³é”®çº¿ç´¢ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>æè¿°æ–‡ä»¶ç±»å‹ä¸º Developmentï¼Œå´ç”¨äºä¸Šæ¶</li>
<li>æè¿°æ–‡ä»¶ç»‘å®šçš„ Bundle ID ä¸åº”ç”¨ä¸ä¸€è‡´</li>
<li>æ–°å¢è®¾å¤‡åæœªæ›´æ–°æè¿°æ–‡ä»¶</li>
</ul>
<p>åœ¨ä¸Šæ¶å‰ï¼Œæˆ‘æ›´å€¾å‘äºç›´æ¥æŸ¥çœ‹æè¿°æ–‡ä»¶æœ¬èº«ã€‚
é€šè¿‡ å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰æŸ¥çœ‹ mobileprovision æ–‡ä»¶å†…å®¹ï¼Œå¯ä»¥æ˜ç¡®çœ‹åˆ°æè¿°æ–‡ä»¶ç±»å‹ã€ç»‘å®šå…³ç³»ä»¥åŠä½¿ç”¨çš„è¯ä¹¦æ˜¯å¦ç¬¦åˆå½“å‰é˜¶æ®µéœ€æ±‚ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15ce4500bf174228950a2f215635fecc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-D5bCx5aW9MjAyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175337&amp;x-signature=2EfExQWUnZOM6MPjzeIJ97TcKPw%3D" alt="æŸ¥çœ‹æè¿°æ–‡ä»¶" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-4"><strong>IPA æœ¬èº«ï¼Œå€¼å¾—åœ¨ä¸Šä¼ å‰è¢«ç‹¬ç«‹æ£€æŸ¥</strong></h2>
<p>åœ¨ä¸€äº›å›¢é˜Ÿé‡Œï¼ŒHBuilder ç”Ÿæˆçš„ IPA åªæ˜¯è¢«å½“ä½œä¸€ä¸ªâ€œç­‰ä¸Šä¼ çš„æ–‡ä»¶â€ã€‚
ä½†ä»å·¥ç¨‹ç»éªŒæ¥çœ‹ï¼ŒIPA æœ¬èº«å°±æ˜¯ä¸€ä¸ªéœ€è¦éªŒè¯çš„ç»“æœã€‚</p>
<p>æˆ‘é‡åˆ°è¿‡çš„é—®é¢˜åŒ…æ‹¬ï¼š</p>
<ul>
<li>IPA å†…çš„ Bundle ID ä¸ App Store Connect ä¸­ä¸ä¸€è‡´</li>
<li>Info.plist ä¸­æ®‹ç•™æµ‹è¯•é…ç½®</li>
<li>å›¾æ ‡æˆ–èµ„æºç¼ºå¤±</li>
</ul>
<p>åœ¨é macOS ç¯å¢ƒä¸‹ï¼Œå¯ä»¥é€šè¿‡ å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰æŸ¥çœ‹ IPA å†…å®¹ï¼Œåœ¨ä¸Šä¼ å‰ç¡®è®¤è¿™äº›å…³é”®ä¿¡æ¯ã€‚è¿™ä¸€æ­¥å¹¶ä¸ä¼šæ”¹å˜ IPAï¼Œä½†èƒ½å‡å°‘å®¡æ ¸é˜¶æ®µçš„ä¸ç¡®å®šæ€§ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66eeefefb59740f0be38ee75cbf31987~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-D5bCx5aW9MjAyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175337&amp;x-signature=pbiFYEP2piRd6X%2FSc5sNiV4XWyo%3D" alt="æŸ¥çœ‹ipa" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸Šä¼ æ–¹å¼ï¼Œå¾€å¾€å†³å®š HBuilder é¡¹ç›®çš„åä½œæ•ˆç‡</strong></h2>
<p>åœ¨å•äººé¡¹ç›®ä¸­ï¼Œé€šè¿‡ Xcode æˆ–å®˜æ–¹æ¨èæ–¹å¼ä¸Šä¼  IPA å¹¶ä¸å¤æ‚ã€‚
ä½†åœ¨å¤šäººæˆ–è·¨å¹³å°å›¢é˜Ÿä¸­ï¼Œä¸Šä¼ æ­¥éª¤å¾ˆå®¹æ˜“æˆä¸ºç“¶é¢ˆã€‚</p>
<p>å½“æ„å»ºå‘ç”Ÿåœ¨äº‘ç«¯ï¼Œè€Œä¸Šä¼ åªèƒ½ä¾èµ–æŸä¸€å° Mac æ—¶ï¼Œå‘å¸ƒèŠ‚å¥å°±ä¼šè¢«äººä¸ºé™åˆ¶ã€‚</p>
<p>åœ¨ä¸€äº›é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰çš„ä¸Šä¼ æ–¹å¼ï¼Œåœ¨ Windows æˆ– Linux ç¯å¢ƒä¸­å®Œæˆ IPA æäº¤ï¼Œä½¿ HBuilder çš„æ„å»ºç»“æœå¯ä»¥è¢«ä¸åŒç³»ç»Ÿçš„æˆå‘˜æ¥æ‰‹å¤„ç†ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1991266f62cb4a9e935581dfc785f52b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-D5bCx5aW9MjAyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175337&amp;x-signature=eG1xH35A8HZfCOYr2bYdgxZg9oU%3D" alt="ipaä¸Šä¼ " loading="lazy"/></p>
<hr/>
<h2 data-id="heading-6"><strong>ç”¨ HBuilder ä¸Šæ¶ iOSï¼Œæœ¬è´¨ä»ç„¶æ˜¯ä¸€æ¬¡åŸç”Ÿå‘å¸ƒ</strong></h2>
<p>ç»å†è¿‡å¤šæ¬¡æµç¨‹ä¹‹åï¼Œæˆ‘é€æ¸å½¢æˆä¸€ä¸ªå…±è¯†ï¼š
HBuilder å¹¶æ²¡æœ‰ç»•è¿‡ iOS ä¸Šæ¶ï¼Œå®ƒåªæ˜¯æ”¹å˜äº†å¼€å‘å’Œæ‰“åŒ…çš„å…¥å£ã€‚</p>
<p>çœŸæ­£å†³å®šä¸Šæ¶æ˜¯å¦é¡ºåˆ©çš„ï¼Œä¾ç„¶æ˜¯è¿™äº›åŸç”Ÿå¯¹è±¡æ˜¯å¦æ¸…æ™°ï¼š</p>
<ul>
<li>åº”ç”¨æ ‡è¯†</li>
<li>è¯ä¹¦ä¸æè¿°æ–‡ä»¶</li>
<li>æ„å»ºäº§ç‰©</li>
<li>ä¸Šä¼ è·¯å¾„</li>
</ul>
<p>ç»“åˆHBuilderã€äº‘æ‰“åŒ…ã€å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰å¤šå·¥å…·ç»„åˆå®Œæˆä¸Šæ¶ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´é¡ºåˆ©åœ°å®Œæˆ HBuilder é¡¹ç›®çš„ä¸Šæ¶æµç¨‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[9 ä¸ª è¶…ç»çš„ AI æ§åˆ¶ç”µè„‘ GitHub å¼€æºé¡¹ç›®ã€‚]]></title>    <link>https://juejin.cn/post/7586680977854906431</link>    <guid>https://juejin.cn/post/7586680977854906431</guid>    <pubDate>2025-12-23T06:10:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586680977854906431" data-draft-id="7586585688004755497" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="9 ä¸ª è¶…ç»çš„ AI æ§åˆ¶ç”µè„‘ GitHub å¼€æºé¡¹ç›®ã€‚"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-12-23T06:10:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            9 ä¸ª è¶…ç»çš„ AI æ§åˆ¶ç”µè„‘ GitHub å¼€æºé¡¹ç›®ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T06:10:55.000Z" title="Tue Dec 23 2025 06:10:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">01ã€é€šè¿‡ç»ˆç«¯æ§åˆ¶ç”µè„‘</h2>
<p>æŠŠè¿™ä¸ªå¼€æºé¡¹ç›®è£…è¿›ç”µè„‘ï¼Œä½ çš„ç»ˆç«¯å°±æˆäº†è´¾ç»´æ–¯ã€‚è¿™ä¸ªÂ 61K Star çš„å¼€æºé¡¹ç›®é€šè¿‡ç»ˆç«¯æ¥æ§åˆ¶ç”µè„‘ã€‚</p>
<p>Open Interpreter æ˜¯ä¸€ä¸ªè®© AI å¤§æ¨¡å‹åœ¨æœ¬åœ°è¿è¡Œä»£ç çš„è§£é‡Šå™¨ï¼Œæ”¯æŒè¿è¡Œ Python, JavaScript, Shell å•¥çš„ï¼Œç›´æ¥è¿è¡Œåœ¨ä½ çš„ç»ˆç«¯é‡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0598db8a504f47e6b04af7cb3e05df30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=Jl%2FNHmCfCdP8CkloLMSIOazZq00%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€šè¿‡å’Œå®ƒå¯¹è¯ï¼Œå®ƒå¯ä»¥è®¿é—®äº’è”ç½‘ï¼Œä¸ä»…ä»…æ˜¯ Bing æœç´¢ï¼Œè€Œæ˜¯å®Œå…¨è‡ªç”±çš„è”ç½‘ã€‚Â </p>
<p>æ“ä½œä½ çš„æœ¬åœ°æ–‡ä»¶ï¼Œæ¯”å¦‚æ‰¹é‡é‡å‘½åã€è½¬æ¢æ ¼å¼ã€å¤„ç† Excelã€‚ è¿˜èƒ½æ§åˆ¶ä½ çš„ç”µè„‘ï¼Œæ¯”å¦‚æ‰“å¼€æµè§ˆå™¨ã€å‘é‚®ä»¶ã€ç”šè‡³è°ƒæ•´ç³»ç»Ÿè®¾ç½®ã€‚</p>
<p>è¿˜æ”¯æŒæ¥å…¥æœ¬åœ°çš„æ¨¡å‹ï¼Œæ¯”å¦‚ Ollamaã€Janã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19a2e39d959948dd9b8e4d7bd3c12920~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=CzsQqLgu3mg11nGc48gnY%2F97Pk0%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>æ¯”å¦‚è¾“å…¥ï¼šæŠŠæˆ‘çš„ç³»ç»Ÿè®¾ä¸ºæ·±è‰²æ¨¡å¼ï¼Œç„¶åæ‰“å¼€æµè§ˆå™¨å»æŸ¥ä¸€ä¸‹æ˜å¤©çš„å¤©æ°”ã€‚</p>
<p>å®ƒä¼šæ‰§è¡Œ Shell å‘½ä»¤æ¥ä¿®æ”¹ç³»ç»Ÿè®¾ç½®ï¼Œå¹¶è°ƒç”¨æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…· Selenium æˆ– Playwright å»æŸ¥è¯¢ä¿¡æ¯ã€‚</p>
<p>ä½ è¿˜å¯ä»¥æŠŠä¸€ä¸ª 500MB çš„ Excel è¡¨æ ¼æ‰”ç»™å®ƒï¼šåˆ†æè¿™ä¸ªè¡¨æ ¼ï¼Œç”»å‡ºè¿‡å»ä¸€å¹´é”€å”®é¢çš„è¶‹åŠ¿å›¾ï¼Œå¹¶ä¿å­˜ä¸º report.pngã€‚</p>
<p>ä¸ç”¨ä¸Šä¼ äº‘ç«¯ï¼Œæ•°æ®éšç§ç»å¯¹å®‰å…¨ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby">å¼€æºåœ°å€<span class="hljs-symbol">:https</span><span class="hljs-symbol">://github</span>.com/openinterpreter/open-interpreter
</code></pre>
<h2 data-id="heading-1">02ã€å¾®è½¯å¼€æºï¼šOmniParser</h2>
<p>OmniParser æ˜¯å¾®è½¯å¼€æºçš„ä¸€ä¸ªä¸“é—¨ç”¨æ¥çœ‹å±å¹•çš„ç¥å™¨ã€‚</p>
<p>ä»Šå¹´æœ€æ–°çš„ V2 ç‰ˆæœ¬ï¼Œéœ¸æ¦œäº† Hugging Face å¥½ä¹…ï¼ŒçœŸçš„æŠŠ GUI Agent çš„èƒ½åŠ›æ‹‰å‡äº†ä¸€ä¸ªå°é˜¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66c1ed28ef4341fc8054e14f313e2cd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=dmtzjwH8J%2BZce0IGUEwWD3bk6iw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ä¸ªå±å¹•è§£æå·¥å…·ï¼Œå¯ä»¥æŠŠå±å¹•æˆªå›¾è½¬åŒ–ä¸ºç»“æ„åŒ–çš„æ•°æ®ï¼Œè¿™æ˜¯æ„å»º AI æ§åˆ¶ç”µè„‘ Agent çš„æ ¸å¿ƒç»„ä»¶ã€‚è®¸å¤šåŸºäºè§†è§‰çš„è‡ªåŠ¨åŒ–é¡¹ç›®éƒ½ä¾èµ–è¿™ç±»æŠ€æœ¯æ¥ç²¾å‡†å®šä½å±å¹•å…ƒç´ ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/286789e14d604f2ba13c64d2ccd006f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=%2Bvg3%2BP%2BBce9lOQcvpIUFp7rSlTg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c7e75c713494afc8581efa23512a27f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=qGhMnTdE5bozi4GA1ZWnKSD2GBY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒçš„å·¥ä½œæµç¨‹æ˜¯è¿™æ ·çš„ï¼šDetectï¼šé€šè¿‡è®­ç»ƒå¥½çš„ YOLO æ¨¡å‹ï¼Œç²¾å‡†æ¡†é€‰å‡ºå±å¹•ä¸Šæ‰€æœ‰çš„<strong>å¯äº¤äº’åŒºåŸŸï¼Œæ¯”å¦‚</strong>æŒ‰é’®ã€è¾“å…¥æ¡†ã€å›¾æ ‡ã€ä¾§è¾¹æ å•¥çš„ã€‚å³ä¾¿å›¾æ ‡éå¸¸å¾®å°ï¼ŒV2 ç‰ˆæœ¬ä¹Ÿèƒ½ç²¾å‡†æ•æ‰ã€‚</p>
<p><strong>Caption</strong>ï¼šåˆ©ç”¨å¾®è½¯è‡ªå®¶çš„ Florence-2 æˆ– BLIP-2 æ¨¡å‹ï¼Œç»™æ¯ä¸€ä¸ªæ¡†é€‰å‡ºæ¥çš„å…ƒç´ åŠ ä¸Š<strong>åŠŸèƒ½æè¿°ï¼Œ</strong> æ¯”å¦‚â€œè¿™æ˜¯ä¸€ä¸ªæœç´¢å›¾æ ‡â€ã€â€œè¿™æ˜¯ä¸€ä¸ªè®¾ç½®æŒ‰é’®â€ã€‚</p>
<p><strong>Grounding</strong>ï¼šå°†è¿™äº›åæ ‡å’Œæè¿°æ‰“åŒ…å–‚ç»™ GPT-4V æˆ– DeepSeekï¼Œè®©å¤§æ¨¡å‹çŸ¥é“æŸæŒ‰é’®çš„åæ ‡åœ¨ (800, 600)ä½ å¯ä»¥æŠŠè¿™ä¸ªå¼€æºé¡¹ç›®ç†è§£æˆè¿æ¥å¤§æ¨¡å‹å¤§è„‘å’Œç”µè„‘å±å¹•ä¹‹é—´çš„é‚£å‰¯é«˜ç²¾åº¦çœ¼é•œã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby">å¼€æºåœ°å€<span class="hljs-symbol">:https</span><span class="hljs-symbol">://github</span>.com/microsoft/<span class="hljs-title class_">OmniParser</span>
</code></pre>
<h2 data-id="heading-2">03ã€è‡ªæ“ä½œè®¡ç®—æœºæ¡†æ¶</h2>
<p>è¿™ä¸ªå¼€æºæ¡†æ¶ï¼Œä¹Ÿæ˜¯è®©å¤šæ¨¡æ€ AI æ¨¡å‹åƒäººç±»ä¸€æ ·æ“ä½œè®¡ç®—æœºã€‚ç°åœ¨å·²ç»æ–©è·äº† 1 ä¸‡çš„ Starã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea56d10d367f48be84799ca398bbcde7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=fujjDyHTKrr8KPloXm8Q4YxqQ%2FQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¨¡å‹é€šè¿‡æˆªå›¾çš„æ–¹å¼è§†è§‰è¯†åˆ«å±å¹•å†…å®¹ï¼Œç›´æ¥è°ƒç”¨ç³»ç»Ÿçš„é¼ æ ‡å’Œé”®ç›˜æ¥å£ï¼Œä½¿ç”¨ pyautogui åº“è¿›è¡Œäº¤äº’ï¼Œè€Œéä¾èµ–åå° APIã€‚</p>
<p>è€Œä¸”è¿™ä¸ªå¼€æºé¡¹ç›®å…¼å®¹ macOSã€Windows å’Œ Linuxã€‚</p>
<p>ä¸ºäº†è§£å†³å¤§æ¨¡å‹çœ‹ä¸å‡†æˆ–ç‚¹ä¸å‡†å±å¹•å…ƒç´ çš„é—®é¢˜ï¼Œå®ƒå¼•å…¥äº†å‡ ç§å…³é”®æ¨¡å¼ï¼š</p>
<p>OCR æ¨¡å¼ï¼šç”Ÿæˆå±å¹•ä¸Šå¯ç‚¹å‡»å…ƒç´ çš„åæ ‡å“ˆå¸Œå›¾ã€‚å½“æ¨¡å‹å†³å®šç‚¹å‡»æŸæ®µæ–‡å­—æ—¶ï¼Œç³»ç»Ÿèƒ½ç²¾ç¡®æ˜ å°„åˆ°å…·ä½“åæ ‡ï¼Œæ˜¾è‘—æé«˜äº†ç‚¹å‡»å‡†ç¡®ç‡ã€‚</p>
<p>Set-of-Mark (SoM) æç¤ºï¼šåœ¨å±å¹•æˆªå›¾ä¸Šçš„UIå…ƒç´ æ‰“ä¸Šæ•°å­—æ ‡è®° Labelï¼Œè®©æ¨¡å‹åªéœ€è¾“å‡ºæ•°å­—å³å¯å®šä½å…ƒç´ ï¼Œç±»ä¼¼äºç‰¹æ–¯æ‹‰è‡ªåŠ¨é©¾é©¶çš„è§†è§‰æ ‡æ³¨é€»è¾‘ã€‚</p>
<p>Voice Modeï¼šæ”¯æŒè¯­éŸ³è¾“å…¥æŒ‡ä»¤ï¼Œå¢åŠ äº¤äº’çš„ä¾¿æ·æ€§ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">å¼€æºåœ°å€: https://github.com/OthersideAI/self-operating-computer
</code></pre>
<h2 data-id="heading-3">04ã€å‰æ²¿çš„ GUI æ™ºèƒ½ä½“ï¼šAgent S</h2>
<p>è¿™ä¸ª Agent S æ˜¯ç›®å‰æ¯”è¾ƒå‰æ²¿çš„å¼€æº GUI æ™ºèƒ½ä½“æ¡†æ¶ã€‚S3 æ˜¯é¦–ä¸ªåœ¨ OSWorld ä¸Šè¶…è¶Šäººç±»æ°´å¹³çš„æ¨¡å‹ï¼Œå–å¾—äº†å¾—åˆ† 72.60%ã€‚</p>
<p>ç›®å‰å·²ç»åœ¨ GitHub ä¸Šè·å¾— 9k çš„ Starã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5bfc3a41bbe4543ade547e2b236b290~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=qA5yYFe0a0WJEGjXy8oTNnVJJ%2B8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸æ™®é€šè„šæœ¬ä¸ä¸€æ ·ï¼ŒAgent-S å¼•å…¥äº†ç±»ä¼¼äººç±»çš„è®¤çŸ¥æ¶æ„ï¼š</p>
<p>ç»éªŒå¢å¼ºçš„å±‚æ¬¡åŒ–è§„åˆ’ï¼šå®ƒä¸æ˜¯ç›²ç›®åœ°ä¸€æ­¥æ­¥æ“ä½œï¼Œè€Œæ˜¯å…ˆæœç´¢å¤–éƒ¨çŸ¥è¯†ï¼ˆå¦‚åœ¨çº¿æ•™ç¨‹ï¼‰å’Œæ£€ç´¢å†…éƒ¨è®°å¿†ï¼Œå°†å¤§ä»»åŠ¡æ‹†è§£ä¸ºå­ä»»åŠ¡ã€‚</p>
<p>Agent-è®¡ç®—æœºæ¥å£ï¼šå®ƒä¸ç›´æ¥çœ‹åŸå§‹åƒç´ ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªä¸­é—´å±‚æ›´ç²¾ç¡®åœ°æ„ŸçŸ¥ GUI å…ƒç´ ï¼Œå¢å¼ºäº†æ¨¡å‹å¯¹å±å¹•çš„ç†è§£èƒ½åŠ›ã€‚</p>
<p>åŒé‡è®°å¿†æœºåˆ¶ï¼šå™äº‹è®°å¿†ï¼Œå­˜å‚¨é«˜å±‚æ¬¡çš„ä»»åŠ¡ç»éªŒï¼›æƒ…æ™¯è®°å¿†ï¼Œå­˜å‚¨å…·ä½“çš„æ­¥éª¤æ“ä½œã€‚å®ƒç”¨å¾—è¶Šå¤šï¼Œè¶Šæ“…é•¿å¤„ç†å¤æ‚ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/simular-ai/Agent-S</span>
</code></pre>
<h2 data-id="heading-4">05ã€å¾®è½¯å¼€æºï¼šUFO</h2>
<p>ä¹‹å‰æåˆ°è¿‡ï¼Œè¿™ä¸ªå« UFO çš„æ¡†æ¶ä¹Ÿæ˜¯å¾®è½¯å¼€æºçš„ã€‚</p>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®æ˜¯ä¸“ä¸º Windows ç”Ÿæ€æ·±åº¦å®šåˆ¶çš„åŸç”Ÿçº§æ™ºèƒ½ä½“ç³»ç»Ÿã€‚å®ƒåˆ©ç”¨å¾®è½¯å¯¹è‡ªå®¶ç³»ç»Ÿçš„ç†è§£ï¼Œå®ç°äº†æ¯”æ™®é€šè§†è§‰æ–¹æ¡ˆæ›´æ·±å±‚çš„æ§åˆ¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/362ee22af5394cd9a202f37a275943a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=R9ioc6CjNJ52XOu2wOguARt%2Fx6s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸åŒäºè§†è§‰æ–¹æ¡ˆçš„æ¡†æ¶ä»…ä¾èµ–æˆªå›¾+é¼ æ ‡æ¨¡æ‹Ÿï¼ŒUFOÂ ç»“åˆäº†è§†è§‰ä¸åº•å±‚ç³»ç»Ÿæ¥å£ Windows UI Automation, Win32, COM APIã€‚</p>
<p>å®ƒä¸ä»…çœ‹å±å¹•ï¼Œè¿˜èƒ½ç›´æ¥è¯»æ§ä»¶æ ‘ã€‚å®ƒèƒ½å‡†ç¡®çŸ¥é“ä¸€ä¸ªæŒ‰é’®çš„åå­—ã€çŠ¶æ€å’Œéšè—å±æ€§ï¼Œç‚¹å‡»å‡†ç¡®ç‡æé«˜ã€‚</p>
<p>è€Œä¸”ï¼Œå®ƒä¸“é—¨é’ˆå¯¹ Windows å¸¸ç”¨è½¯ä»¶ Office å…¨å®¶æ¡¶ã€æ–‡ä»¶èµ„æºç®¡ç†å™¨ å•¥çš„è¿›è¡Œäº†ä¼˜åŒ–ï¼Œèƒ½ç†è§£åº”ç”¨ç¨‹åºå†…éƒ¨çš„é€»è¾‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d1a6f6d3ade45f2b1263f40afba5bc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=tJGbAm6HFUzT%2BsuLYSY%2BHwG67do%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒé‡‡ç”¨åŒä»£ç†æ¶æ„ï¼ˆAppAgent å’Œ OSWorld Agentï¼‰ï¼Œæ·±å…¥ç†è§£ Windows åº”ç”¨ç¨‹åºçš„ UI ç»“æ„ï¼Œè·¨å¤šä¸ªåº”ç”¨ç¨‹åºæ‰§è¡Œå¤æ‚è¯·æ±‚ï¼Œæ¯”å¦‚ä» PPT ä¸­æå–å†…å®¹å¹¶å‘é‚®ä»¶ã€‚</p>
<p>ä¸“ä¸º Windows ä¼˜åŒ–ï¼Œèƒ½å¤Ÿåˆ©ç”¨ Windows åŸç”Ÿ API è¿›è¡Œæ›´ç¨³å®šçš„æ§åˆ¶ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/microsoft/UFO</span>
</code></pre>
<h2 data-id="heading-5">06ã€AI ç©è’é‡å¤§é•–å®¢</h2>
<p><strong>Cradle</strong>Â æ˜¯ç”±<strong>æ™ºæºç ”ç©¶é™¢ (BAAI)</strong> Â å›¢é˜Ÿå¼€å‘çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c793ebeedb0b4965b0b651203d310776~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=hUwda5jd9H4Aw8urrFque%2FH%2FxGs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è®© AI æ™ºèƒ½ä½“èƒ½å¤Ÿåƒäººç±»ä¸€æ ·ï¼Œä»…é€šè¿‡å±å¹•æˆªå›¾å’Œ<strong>æ ‡å‡†è¾“å…¥/è¾“å‡ºæ¥å£</strong>æ¥æ“ä½œä»»ä½•è½¯ä»¶å’Œæ¸¸æˆï¼Œè€Œä¸éœ€è¦ä¾èµ–åç«¯çš„ API æˆ–å†…éƒ¨ä»£ç è®¿é—®ã€‚</p>
<p>å¯ä»¥ç©è’é‡å¤§é•–å®¢ã€åŸå¸‚å¤©é™…çº¿ï¼Œä¹Ÿä¼šç”¨é£ä¹¦ã€Chromeã€å‰ªæ˜ è½¯ä»¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f96996c2247a47c484d11e65b5d4d714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=KB%2BpHkTUhrK0Lckgi8lkTee5mT8%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>å®ƒæä¾›äº†ä¸€ä¸ªæ ‡å‡†åŒ–çš„æ¡†æ¶ï¼Œå°†æ§åˆ¶è¿‡ç¨‹åˆ†ä¸ºå‡ ä¸ªå…³é”®æ¨¡å—ï¼š</p>
<p>æ„ŸçŸ¥ï¼šæå–å±å¹•ä¸­çš„å…³é”®ä¿¡æ¯ï¼Œè¯†åˆ« UI ç•Œé¢ã€å›¾æ ‡ã€æ–‡æœ¬æˆ–æ¸¸æˆä¸­çš„ 3D åœºæ™¯ã€‚</p>
<p>å†³ç­–ä¸è§„åˆ’ï¼šÂ æ ¹æ®å½“å‰ä»»åŠ¡ç›®æ ‡å’Œå±å¹•çŠ¶æ€ï¼Œè§„åˆ’ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚è‡ªæˆ‘åæ€ï¼Œå¦‚æœæ“ä½œå¤±è´¥ï¼Œå®ƒä¼šåˆ†æåŸå› å¹¶ä¿®æ­£ç­–ç•¥ã€‚</p>
<p>è®°å¿†ç³»ç»Ÿï¼šçŸ­æœŸè®°å¿†ï¼Œè®°å½•æœ€è¿‘çš„æ“ä½œåºåˆ—å’Œæˆªå›¾ï¼›é•¿æœŸè®°å¿†ï¼Œ å­˜å‚¨æˆåŠŸç»éªŒå’Œå·¥å…·ä½¿ç”¨æ‰‹å†Œï¼ˆRAGï¼‰ï¼Œä»¥ä¾¿åœ¨ç±»ä¼¼åœºæ™¯ä¸‹å¿«é€Ÿè°ƒç”¨ã€‚</p>
<p>æ‰§è¡Œï¼šÂ å°†è§„åˆ’è½¬æ¢ä¸ºå…·ä½“çš„é”®ç›˜å’Œé¼ æ ‡æŒ‡ä»¤ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/BAAI-Agents/Cradle</span>
</code></pre>
<h2 data-id="heading-6">07ã€OS-Copilot</h2>
<p>ä¸€ä¸ªæ„å»ºé€šç”¨æ“ä½œç³»ç»Ÿä»£ç†çš„æ¡†æ¶ã€‚å¼ºè°ƒ Agent çš„è‡ªæˆ‘å­¦ä¹ å’Œè‡ªæˆ‘æ”¹è¿›èƒ½åŠ›ï¼Œèƒ½å¤Ÿå¤„ç†ä»æœªè§è¿‡çš„åº”ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7932a5f34a7459f826a4543b682645e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=pMxrNZtdjiKZbEmm97s2QSZvOtY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶æ ¸å¿ƒ Agent FRIDAY èƒ½å¤Ÿé€šè¿‡è‡ªæˆ‘æ”¹è¿›æœºåˆ¶æ¥å­¦ä¹ å¦‚ä½•æ“ä½œ Excelã€PPT ä»¥åŠæµè§ˆç½‘é¡µã€‚</p>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®çš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªæ— ç¼é›†æˆåˆ°æ“ä½œç³»ç»Ÿä¸­çš„ä¸ªäººåŠ©ç†ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/OS-Copilot/OS-Copilot</span>
</code></pre>
<h2 data-id="heading-7">08ã€ShowUI</h2>
<p>è¿™æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ç«¯åˆ°ç«¯è§†è§‰-è¯­è¨€-åŠ¨ä½œï¼ˆVision-Language-Actionï¼‰æ¨¡å‹ï¼Œä¸“ä¸º GUI æ™ºèƒ½ä½“è®¾è®¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8dc1d392254d43c2b228681274fd2c05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=QWQy8DctkdLD9%2BkRJZPT9jVi9ZE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒæƒ³è§£å†³å¤§æ¨¡å‹åœ¨å¤„ç† UI ç•Œé¢æ—¶çš„é«˜å»¶è¿Ÿå’Œè®¡ç®—æˆæœ¬é—®é¢˜ï¼Œæä¾›æ›´å¿«é€Ÿã€æ›´ç²¾å‡†çš„å±å¹•å…ƒç´ å®šä½å’Œæ“ä½œã€‚</p>
<p>æ¨¡å‹å°å·§é«˜æ•ˆï¼Œé€‚åˆåœ¨æœ¬åœ°éƒ¨ç½²è¿›è¡Œä½å»¶è¿Ÿçš„ UI è‡ªåŠ¨åŒ–æ§åˆ¶ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/showlab/ShowUI</span>
</code></pre>
<h2 data-id="heading-8">09ã€UI-TARS Desktop</h2>
<p>ä¹‹å‰ä»‹ç»è¿‡ï¼Œå­—èŠ‚è·³åŠ¨å¼€æºçš„åŸºäºÂ UI-TARSÂ è§†è§‰è¯­è¨€æ¨¡å‹çš„ GUI æ™ºèƒ½ä½“æ¡Œé¢åº”ç”¨ã€‚</p>
<p>å®ƒå…è®¸ç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€ç›´æ¥æ§åˆ¶ Windows æˆ– macOS ç”µè„‘ã€‚</p>
<p>è¯¥é¡¹ç›®ç»“åˆäº†ç«¯åˆ°ç«¯çš„è§†è§‰æ¨¡å‹ï¼Œæ— éœ€å¤æ‚çš„ä¸­é—´ä»£ç è§£æï¼Œç›´æ¥åƒäººç±»ä¸€æ ·çœ‹å±å¹•å¹¶æ“ä½œé¼ æ ‡é”®ç›˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ff7a35c69f54c90afcf46ac32377df0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767075055&amp;x-signature=ItG2XzVU08B5u93hNC0kFvK02QY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‰¹ç‚¹æ˜¯å¼€ç®±å³ç”¨ï¼Œæ”¯æŒè¿œç¨‹è®¡ç®—æœºæ§åˆ¶ï¼Œæ˜¯ç›®å‰è¾ƒæ–°çš„é«˜æ€§èƒ½ GUI Agent å®ç°ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/bytedance/UI-TARS-desktop</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AOP çš„çœŸç›¸ï¼šæ³¨è§£åªæ˜¯å£°æ˜ï¼Œä»£ç†æ‰æ˜¯æ‰§è¡Œ]]></title>    <link>https://juejin.cn/post/7586585688005115945</link>    <guid>https://juejin.cn/post/7586585688005115945</guid>    <pubDate>2025-12-23T03:41:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586585688005115945" data-draft-id="7586585498744684598" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AOP çš„çœŸç›¸ï¼šæ³¨è§£åªæ˜¯å£°æ˜ï¼Œä»£ç†æ‰æ˜¯æ‰§è¡Œ"/> <meta itemprop="keywords" content="é¢è¯•,æ¶æ„,Spring"/> <meta itemprop="datePublished" content="2025-12-23T03:41:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AOP çš„çœŸç›¸ï¼šæ³¨è§£åªæ˜¯å£°æ˜ï¼Œä»£ç†æ‰æ˜¯æ‰§è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:41:28.000Z" title="Tue Dec 23 2025 03:41:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¾ˆå¤šäººç”¨Spring AOPæ—¶ï¼Œä»¥ä¸ºåªè¦åœ¨æ–¹æ³•ä¸ŠåŠ ä¸ª<code>@Transactional</code>ã€<code>@Retry</code>ï¼Œå°±èƒ½è‡ªåŠ¨æœ‰äº‹åŠ¡ã€é‡è¯•åŠŸèƒ½ã€‚ä½†å½“ä»£ç å‡ºé—®é¢˜æ—¶ï¼Œå¾€å¾€ä¸€è„¸æ‡µé€¼ï¼šä¸ºä»€ä¹ˆæ³¨è§£æ²¡ç”Ÿæ•ˆï¼Ÿä¸ºä»€ä¹ˆä»£ç†å¤±è´¥äº†ï¼Ÿ</p>
<p>è¿™æ¬¡æˆ‘ç”¨ä¸åˆ°1000è¡Œä»£ç ï¼Œæ‰‹å†™äº†ä¸€ä¸ªMini-AOPæ¡†æ¶ï¼Œçº¯JDKå®ç°ï¼Œ0ä¾èµ–ã€‚ç›®çš„å¾ˆç®€å•ï¼š<strong>çœ‹æ¸…æ¥šAOPåˆ°åº•æ˜¯æ€ä¹ˆè¿ä½œçš„</strong>ã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒè®¤çŸ¥ï¼šAOPä¸æ˜¯ä½ æƒ³çš„é‚£æ ·</h2>
<h3 data-id="heading-2">å¸¸è§è¯¯è§£</h3>
<p>å¾ˆå¤šäººä»¥ä¸ºAOPæ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAspect</span> {
    <span class="hljs-meta">@Before("UserService.*")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(JoinPoint jp)</span> {
        System.out.println(<span class="hljs-string">"æ‰“æ—¥å¿—"</span>);
    }
}

<span class="hljs-comment">// ç„¶åå†™ä¸šåŠ¡ä»£ç </span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-comment">// è‡ªåŠ¨å°±æœ‰æ—¥å¿—äº†ï¼Ÿ</span>
    }
}
</code></pre>
<p>ä»¥ä¸ºåŠ äº†æ³¨è§£å°±è‡ªåŠ¨åœ¨æ–¹æ³•å‰åæ’å…¥ä»£ç äº†ã€‚<strong>è¿™æ˜¯é”™çš„ï¼</strong></p>
<h3 data-id="heading-3">çœŸå®æƒ…å†µ</h3>
<p>AOPçš„æœ¬è´¨æ˜¯<strong>ä¸‰å±‚ç»“æ„</strong>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3952679a3a564030a456894b89ca990a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LiP5rWq5peg55eV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066313&amp;x-signature=GuWiuKyLUtXpVgM%2F9v7BnwgT3uQ%3D" alt="115.jpg" loading="lazy"/></p>
<ol>
<li><strong>å£°æ˜å±‚</strong>ï¼šä½ å†™çš„<code>@Before</code>ã€<code>@Around</code>ç­‰æ³¨è§£ï¼Œåªæ˜¯é…ç½®ï¼Œä¸æ‰§è¡Œä»»ä½•é€»è¾‘</li>
<li><strong>è§¦å‘å±‚</strong>ï¼šä»£ç†å¯¹è±¡åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œé€šè¿‡è¡¨è¾¾å¼åŒ¹é…å†³å®šå“ªäº›åˆ‡é¢è¦æ‰§è¡Œ</li>
<li><strong>ä¸šåŠ¡å±‚</strong>ï¼šè¢«AOPåŒ…è£¹çš„çœŸå®ä¸šåŠ¡ä»£ç </li>
</ol>
<p>ç”¨å¤§ç™½è¯è¯´ï¼š<strong>æ³¨è§£ä¸ä¼šè‡ªåŠ¨ç”Ÿæ•ˆï¼Œå¿…é¡»æœ‰ä¸€ä¸ªä»£ç†å±‚æ¥è¯†åˆ«æ³¨è§£ã€åŒ¹é…è¡¨è¾¾å¼ã€å†³å®šæ‰§è¡Œé¡ºåº</strong>ã€‚</p>
<h2 data-id="heading-4">Mini-AOPçš„æ ¸å¿ƒå®ç°</h2>
<h3 data-id="heading-5">æ•´ä½“æ¶æ„</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç”¨æˆ·è°ƒç”¨] --&gt; B[ä»£ç†å¯¹è±¡]
    B --&gt; C{åˆ‡ç‚¹åŒ¹é…}
    C --&gt;|åŒ¹é…æˆåŠŸ| D[æ”¶é›†é€šçŸ¥]
    D --&gt; E[æ‰§è¡ŒBefore]
    E --&gt; F[æ‰§è¡ŒAround]
    F --&gt; G[çœŸå®æ–¹æ³•]
    G --&gt; H[æ‰§è¡ŒAfter]
    C --&gt;|ä¸åŒ¹é…| G
</code></pre>
<h3 data-id="heading-6">å…³é”®ç±»è¯´æ˜</h3>
<p><strong>1. BeanFactory - å®¹å™¨å’Œä»£ç†åˆ›å»ºè€…</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BeanFactory</span> {
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; beans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> List&lt;Object&gt; aspects = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-comment">// æ³¨å†ŒBeanæ—¶ï¼Œè¯†åˆ«å‡ºåˆ‡é¢ç±»</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">(Class&lt;?&gt; clazz)</span> {
        <span class="hljs-type">Object</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> clazz.newInstance();
        <span class="hljs-keyword">if</span> (clazz.isAnnotationPresent(Aspect.class)) {
            aspects.add(instance);  <span class="hljs-comment">// æ”¶é›†åˆ‡é¢</span>
        }
        beans.put(getBeanName(clazz), instance);
    }
    
    <span class="hljs-comment">// è·å–Beanæ—¶ï¼Œå†³å®šæ˜¯å¦åˆ›å»ºä»£ç†</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getBean</span><span class="hljs-params">(String name, Class&lt;T&gt; type)</span> {
        <span class="hljs-type">Object</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> beans.get(name);
        <span class="hljs-keyword">if</span> (needProxy(bean)) {
            <span class="hljs-keyword">return</span> AopProxy.createProxy(bean, aspects);  <span class="hljs-comment">// åˆ›å»ºä»£ç†</span>
        }
        <span class="hljs-keyword">return</span> (T) bean;
    }
}
</code></pre>
<p><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š</p>
<ul>
<li>æ³¨å†Œæ—¶æ”¶é›†æ‰€æœ‰<code>@Aspect</code>ç±»</li>
<li>è·å–Beanæ—¶åˆ¤æ–­æ˜¯å¦éœ€è¦ä»£ç†ï¼Œå¦‚æœéœ€è¦å°±è¿”å›ä»£ç†å¯¹è±¡è€Œä¸æ˜¯åŸå§‹å¯¹è±¡</li>
</ul>
<p><strong>2. AopProxy - ä»£ç†å’Œåˆ‡ç‚¹åŒ¹é…æ ¸å¿ƒ</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AopProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InvocationHandler</span> {
    <span class="hljs-keyword">private</span> Object target;
    <span class="hljs-keyword">private</span> List&lt;Object&gt; aspects;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> {
        <span class="hljs-comment">// 1. éå†æ‰€æœ‰åˆ‡é¢</span>
        <span class="hljs-keyword">for</span> (Object aspect : aspects) {
            <span class="hljs-keyword">for</span> (Method aspectMethod : aspect.getClass().getDeclaredMethods()) {
                <span class="hljs-comment">// 2. æ£€æŸ¥æ³¨è§£å’Œåˆ‡ç‚¹è¡¨è¾¾å¼</span>
                <span class="hljs-keyword">if</span> (aspectMethod.isAnnotationPresent(Before.class)) {
                    <span class="hljs-type">String</span> <span class="hljs-variable">pointcut</span> <span class="hljs-operator">=</span> aspectMethod.getAnnotation(Before.class).value();
                    <span class="hljs-comment">// 3. åŒ¹é…è¡¨è¾¾å¼</span>
                    <span class="hljs-keyword">if</span> (matches(pointcut, method)) {
                        beforeAdvices.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Advice</span>(aspect, aspectMethod));
                    }
                }
            }
        }
        
        <span class="hljs-comment">// 4. æŒ‰é¡ºåºæ‰§è¡Œé€šçŸ¥é“¾</span>
        <span class="hljs-keyword">return</span> executeAdvices(method, args, beforeAdvices, afterAdvices);
    }
    
    <span class="hljs-comment">// ç®€å•çš„åˆ‡ç‚¹åŒ¹é…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">matches</span><span class="hljs-params">(String pointcut, Method method)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">fullName</span> <span class="hljs-operator">=</span> method.getDeclaringClass().getSimpleName() 
                        + <span class="hljs-string">"."</span> + method.getName();
        <span class="hljs-type">String</span> <span class="hljs-variable">regex</span> <span class="hljs-operator">=</span> pointcut.replace(<span class="hljs-string">"*"</span>, <span class="hljs-string">".*"</span>);
        <span class="hljs-keyword">return</span> fullName.matches(regex);
    }
}
</code></pre>
<p><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š</p>
<ul>
<li>æ–¹æ³•è°ƒç”¨æ—¶ï¼Œéå†æ‰€æœ‰åˆ‡é¢ç±»</li>
<li>è¯»å–åˆ‡é¢æ–¹æ³•ä¸Šçš„æ³¨è§£å’Œè¡¨è¾¾å¼</li>
<li>ç”¨è¡¨è¾¾å¼åŒ¹é…å½“å‰æ–¹æ³•ï¼Œå†³å®šæ˜¯å¦æ‰§è¡Œ</li>
<li>æ”¶é›†æ‰€æœ‰åŒ¹é…çš„é€šçŸ¥ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ</li>
</ul>
<h3 data-id="heading-7">å®Œæ•´çš„è°ƒç”¨æµç¨‹</h3>
<p>ä»¥è¿™æ®µä»£ç ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ³¨å†Œ</span>
factory.register(LogAspect.class);
factory.register(UserServiceImpl.class);

<span class="hljs-comment">// è·å–</span>
<span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> factory.getBean(<span class="hljs-string">"userService"</span>, UserService.class);

<span class="hljs-comment">// è°ƒç”¨</span>
userService.saveUser(<span class="hljs-string">"å¼ ä¸‰"</span>);
</code></pre>
<p>å®é™…æ‰§è¡Œæµç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant U as ç”¨æˆ·ä»£ç 
    participant P as ä»£ç†å¯¹è±¡
    participant A as AopProxy.invoke
    participant L as LogAspect
    participant R as RetryAspect
    participant T as çœŸå®å¯¹è±¡

    U-&gt;&gt;P: saveUser(&amp;#34;å¼ ä¸‰&amp;#34;)
    P-&gt;&gt;A: invoke(method, args)
    A-&gt;&gt;A: åŒ¹é…åˆ‡ç‚¹è¡¨è¾¾å¼
    A-&gt;&gt;L: @BeforeåŒ¹é…æˆåŠŸ
    L--&gt;&gt;A: logBefore()
    A-&gt;&gt;R: @AroundåŒ¹é…æˆåŠŸ
    R-&gt;&gt;A: retry { proceed() }
    A-&gt;&gt;T: method.invoke(target, args)
    T--&gt;&gt;A: è¿”å›ç»“æœ
    A-&gt;&gt;L: @Afteræ‰§è¡Œ
    L--&gt;&gt;A: logAfter()
    A--&gt;&gt;P: è¿”å›æœ€ç»ˆç»“æœ
    P--&gt;&gt;U: è¿”å›ç»™ç”¨æˆ·
</code></pre>
<h3 data-id="heading-8">åˆ‡ç‚¹è¡¨è¾¾å¼çš„åŒ¹é…æœºåˆ¶</h3>
<p>è¿™æ˜¯æœ€å®¹æ˜“è¢«å¿½ç•¥çš„éƒ¨åˆ†ã€‚å¾ˆå¤šäººä»¥ä¸ºå†™äº†<code>@Before("UserService.*")</code>å°±è‡ªåŠ¨ç”Ÿæ•ˆï¼Œä½†å®é™…ä¸Šï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ‡é¢å®šä¹‰</span>
<span class="hljs-meta">@Before("UserService.*")</span>  <span class="hljs-comment">// åªæ˜¯å£°æ˜äº†ä¸€ä¸ªå­—ç¬¦ä¸²</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(JoinPoint jp)</span> { }

<span class="hljs-comment">// å¿…é¡»æœ‰ä»£ç æ¥è§£æè¿™ä¸ªå­—ç¬¦ä¸²</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">matches</span><span class="hljs-params">(String pointcut, Method method)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> method.getDeclaringClass().getSimpleName();
    <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> method.getName();
    <span class="hljs-type">String</span> <span class="hljs-variable">fullName</span> <span class="hljs-operator">=</span> className + <span class="hljs-string">"."</span> + methodName;  <span class="hljs-comment">// å¦‚ "UserService.saveUser"</span>
    
    <span class="hljs-comment">// æŠŠè¡¨è¾¾å¼è½¬æˆæ­£åˆ™</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">regex</span> <span class="hljs-operator">=</span> pointcut.replace(<span class="hljs-string">"*"</span>, <span class="hljs-string">".*"</span>);  <span class="hljs-comment">// "UserService.*" -&gt; "UserService\..*"</span>
    
    <span class="hljs-comment">// åŒ¹é…</span>
    <span class="hljs-keyword">return</span> fullName.matches(regex);
}
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ol>
<li>è¡¨è¾¾å¼åªæ˜¯å­—ç¬¦ä¸²ï¼Œä¸ä¼šè‡ªåŠ¨åŒ¹é…</li>
<li>å¿…é¡»åœ¨è¿è¡Œæ—¶è§£æè¡¨è¾¾å¼å¹¶å’Œæ–¹æ³•åæ¯”å¯¹</li>
<li>è¿™ä¸ªåŒ¹é…å‘ç”Ÿåœ¨æ¯æ¬¡æ–¹æ³•è°ƒç”¨æ—¶</li>
</ol>
<h3 data-id="heading-9">é€šçŸ¥çš„æ‰§è¡Œé¡ºåº</h3>
<p>å¤šä¸ªåˆ‡é¢å åŠ æ—¶ï¼Œæ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d2454105344494a8a442d28ff982197~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LiP5rWq5peg55eV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066313&amp;x-signature=d5Ic2AYQldRmHVRx7BNHWx92Qxs%3D" alt="116.jpg" loading="lazy"/></p>
<p>ä»£ç å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Object <span class="hljs-title function_">executeAdvices</span><span class="hljs-params">(Method method, Object[] args, 
                              List&lt;Advice&gt; beforeAdvices,
                              List&lt;Advice&gt; afterAdvices,
                              List&lt;Advice&gt; aroundAdvices)</span> {
    
    <span class="hljs-comment">// æ„å»ºè°ƒç”¨é“¾</span>
    Supplier&lt;Object&gt; chain = () -&gt; {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡Œ@Before</span>
            <span class="hljs-keyword">for</span> (Advice advice : beforeAdvices) {
                advice.method.invoke(advice.aspect, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JoinPoint</span>(target, method, args));
            }
            
            <span class="hljs-comment">// æ‰§è¡ŒçœŸå®æ–¹æ³•</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> method.invoke(target, args);
            
            <span class="hljs-comment">// æ‰§è¡Œ@After</span>
            <span class="hljs-keyword">for</span> (Advice advice : afterAdvices) {
                advice.method.invoke(advice.aspect, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JoinPoint</span>(target, method, args));
            }
            
            <span class="hljs-keyword">return</span> result;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    };
    
    <span class="hljs-comment">// @AroundåŒ…è£¹æ•´ä¸ªé“¾æ¡</span>
    <span class="hljs-keyword">for</span> (Advice around : aroundAdvices) {
        <span class="hljs-type">Object</span> <span class="hljs-variable">finalChain</span> <span class="hljs-operator">=</span> chain;
        chain = () -&gt; around.method.invoke(around.aspect, 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProceedingJoinPoint</span>(target, method, args, finalChain));
    }
    
    <span class="hljs-keyword">return</span> chain.get();
}
</code></pre>
<h2 data-id="heading-10">ä¸€ä¸ªå®Œæ•´ç¤ºä¾‹</h2>
<h3 data-id="heading-11">åˆ‡é¢å®šä¹‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Order(1)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAspect</span> {
    <span class="hljs-meta">@Before("UserService.*")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logBefore</span><span class="hljs-params">(JoinPoint jp)</span> {
        System.out.println(<span class="hljs-string">"[æ—¥å¿—] æ–¹æ³•: "</span> + jp.getSignature());
    }
    
    <span class="hljs-meta">@After("UserService.*")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAfter</span><span class="hljs-params">(JoinPoint jp)</span> {
        System.out.println(<span class="hljs-string">"[æ—¥å¿—] æ–¹æ³•æ‰§è¡Œå®Œæ¯•"</span>);
    }
}

<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Order(2)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryAspect</span> {
    <span class="hljs-meta">@Around("UserService.save*")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">retry</span><span class="hljs-params">(ProceedingJoinPoint pjp)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
            <span class="hljs-keyword">try</span> {
                System.out.println(<span class="hljs-string">"[é‡è¯•] ç¬¬ "</span> + (i + <span class="hljs-number">1</span>) + <span class="hljs-string">" æ¬¡"</span>);
                <span class="hljs-keyword">return</span> pjp.proceed();
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-keyword">if</span> (i == <span class="hljs-number">2</span>) <span class="hljs-keyword">throw</span> e;
                Thread.sleep(<span class="hljs-number">1000</span>);
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<h3 data-id="heading-12">ä¸šåŠ¡ä»£ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(String name)</span>;
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(String name)</span> {
        count++;
        System.out.println(<span class="hljs-string">"==&gt; ä¿å­˜ç”¨æˆ·: "</span> + name);
        <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">3</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ä¿å­˜å¤±è´¥"</span>);
        }
    }
}
</code></pre>
<h3 data-id="heading-13">è¿è¡Œç»“æœ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BeanFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanFactory</span>();
factory.register(LogAspect.class);
factory.register(RetryAspect.class);
factory.register(UserServiceImpl.class);

<span class="hljs-type">UserService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> factory.getBean(<span class="hljs-string">"userService"</span>, UserService.class);
service.saveUser(<span class="hljs-string">"å¼ ä¸‰"</span>);
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[æ—¥å¿—]</span> æ–¹æ³•: UserService.saveUser
<span class="hljs-section">[é‡è¯•]</span> ç¬¬ 1 æ¬¡
==&gt; ä¿å­˜ç”¨æˆ·: å¼ ä¸‰
<span class="hljs-section">[é‡è¯•]</span> ç¬¬ 2 æ¬¡
==&gt; ä¿å­˜ç”¨æˆ·: å¼ ä¸‰
<span class="hljs-section">[é‡è¯•]</span> ç¬¬ 3 æ¬¡
==&gt; ä¿å­˜ç”¨æˆ·: å¼ ä¸‰
<span class="hljs-section">[æ—¥å¿—]</span> æ–¹æ³•æ‰§è¡Œå®Œæ¯•
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼š</p>
<ol>
<li>æ—¥å¿—åˆ‡é¢å…ˆæ‰§è¡Œï¼ˆOrder=1ï¼‰</li>
<li>é‡è¯•åˆ‡é¢åŒ…è£¹åœ¨å¤–é¢ï¼ˆOrder=2ï¼‰</li>
<li>å¤±è´¥ä¸¤æ¬¡åç¬¬ä¸‰æ¬¡æˆåŠŸ</li>
</ol>
<h2 data-id="heading-14">å’ŒSpring AOPçš„å¯¹æ¯”</h2>
<h3 data-id="heading-15">ç›¸åŒç‚¹</h3>
<ol>
<li>éƒ½ä½¿ç”¨JDKåŠ¨æ€ä»£ç†</li>
<li>éƒ½é€šè¿‡åˆ‡ç‚¹è¡¨è¾¾å¼åŒ¹é…æ–¹æ³•</li>
<li>éƒ½æ”¯æŒå¤šç§é€šçŸ¥ç±»å‹å’Œä¼˜å…ˆçº§</li>
</ol>
<h3 data-id="heading-16">ä¸åŒç‚¹</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Mini-AOP</th><th>Spring AOP</th></tr></thead><tbody><tr><td>ä»£ç†æ–¹å¼</td><td>åªæœ‰JDKä»£ç†</td><td>JDK + CGLIB</td></tr><tr><td>åˆ‡ç‚¹è¡¨è¾¾å¼</td><td>ç®€å•é€šé…ç¬¦</td><td>å®Œæ•´AspectJè¯­æ³•</td></tr><tr><td>å®¹å™¨</td><td>æ‰‹åŠ¨æ³¨å†Œ</td><td>è‡ªåŠ¨æ‰«æ</td></tr><tr><td>ä¾èµ–æ³¨å…¥</td><td>ä¸æ”¯æŒ</td><td>å®Œæ•´æ”¯æŒ</td></tr><tr><td>ä»£ç é‡</td><td>800è¡Œ</td><td>10ä¸‡è¡Œ+</td></tr></tbody></table>
<h3 data-id="heading-17">æœ¬è´¨æ˜¯ä¸€æ ·çš„</h3>
<p>Spring AOPçš„æ ¸å¿ƒæµç¨‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fa4ed1312ad44bea8df2cfbbc312ef4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LiP5rWq5peg55eV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066313&amp;x-signature=oB45fePje47IQs5MRzWivlqok8w%3D" alt="117.jpg" loading="lazy"/></p>
<p>å’ŒMini-AOPå¯¹æ¯”ï¼š</p>






























<table><thead><tr><th>æ­¥éª¤</th><th>Mini-AOP</th><th>Spring AOP</th></tr></thead><tbody><tr><td>æ‰«æåˆ‡é¢</td><td><code>factory.register(LogAspect.class)</code></td><td><code>@ComponentScan + @Aspect</code></td></tr><tr><td>åˆ¤æ–­æ˜¯å¦éœ€è¦ä»£ç†</td><td><code>needProxy(bean)</code></td><td><code>AbstractAutoProxyCreator.wrapIfNecessary</code></td></tr><tr><td>åˆ›å»ºä»£ç†</td><td><code>AopProxy.createProxy</code></td><td><code>ProxyFactory.getProxy</code></td></tr><tr><td>åˆ‡ç‚¹åŒ¹é…</td><td><code>matches(pointcut, method)</code></td><td><code>AspectJExpressionPointcut.matches</code></td></tr></tbody></table>
<p><strong>ç»“è®º</strong>ï¼šSpringåªæ˜¯æŠŠè¿™å¥—é€»è¾‘åšå¾—æ›´é€šç”¨ã€æ›´çµæ´»ï¼Œä½†åº•å±‚æ€æƒ³å®Œå…¨ä¸€è‡´ã€‚</p>
<h2 data-id="heading-18">å…³é”®æ”¶è·</h2>
<h3 data-id="heading-19">1. æ³¨è§£ä¸æ˜¯é­”æ³•</h3>
<p>å†™äº†<code>@Before</code>ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œå¿…é¡»æœ‰ä»£ç å»ï¼š</p>
<ol>
<li>è¯»å–æ³¨è§£</li>
<li>è§£æè¡¨è¾¾å¼</li>
<li>åŒ¹é…æ–¹æ³•</li>
<li>æ‰§è¡Œé€»è¾‘</li>
</ol>
<h3 data-id="heading-20">2. ä»£ç†æ˜¯æ ¸å¿ƒ</h3>
<p>AOPçš„æœ¬è´¨å°±æ˜¯åŠ¨æ€ä»£ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨æˆ·ä»¥ä¸ºè°ƒç”¨çš„æ˜¯</span>
<span class="hljs-type">UserService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();

<span class="hljs-comment">// å®é™…æ‹¿åˆ°çš„æ˜¯</span>
<span class="hljs-type">UserService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> Proxy.newProxyInstance(...);
</code></pre>
<p>æ‰€æœ‰AOPé€»è¾‘éƒ½åœ¨è¿™ä¸ªä»£ç†å¯¹è±¡çš„<code>invoke</code>æ–¹æ³•é‡Œã€‚</p>
<h3 data-id="heading-21">3. è¡¨è¾¾å¼åŒ¹é…æ˜¯å…³é”®</h3>
<p>åˆ‡é¢èƒ½ä¸èƒ½ç”Ÿæ•ˆï¼Œå–å†³äºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (matches(<span class="hljs-string">"UserService.*"</span>, method)) {
    <span class="hljs-comment">// æ‰§è¡Œåˆ‡é¢é€»è¾‘</span>
}
</code></pre>
<p>è¿™ä¸ªåŒ¹é…é€»è¾‘æ‰æ˜¯å†³å®š"å“ªäº›æ–¹æ³•è¢«æ‹¦æˆª"çš„çœŸæ­£åŸå› ã€‚</p>
<h3 data-id="heading-22">4. ä¸‰å±‚ç»“æ„</h3>
<p>æ°¸è¿œè®°ä½ï¼š</p>
<pre><code class="hljs">æ³¨è§£ï¼ˆå£°æ˜ï¼‰ + ä»£ç†ï¼ˆè§¦å‘ï¼‰ + åŒ¹é…ï¼ˆå†³ç­–ï¼‰ = AOP
</code></pre>
<p>ç¼ºå°‘ä»»ä½•ä¸€å±‚ï¼ŒAOPéƒ½ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<h2 data-id="heading-23">æ€»ç»“</h2>
<p>æ‰‹å†™è¿™ä¸ªMini-AOPæ¡†æ¶åï¼Œå¯¹Spring AOPçš„ç†è§£å½»åº•é€šé€äº†ï¼š</p>
<ol>
<li>AOPä¸æ˜¯æ³¨è§£çš„é­”æ³•ï¼Œæ˜¯ä»£ç†å¯¹è±¡åœ¨è¿è¡Œæ—¶çš„åŠ¨æ€åŒ¹é…å’Œè°ƒç”¨</li>
<li>åˆ‡ç‚¹è¡¨è¾¾å¼åªæ˜¯å­—ç¬¦ä¸²ï¼Œéœ€è¦æœ‰åŒ¹é…å™¨æ¥è§£æå’Œåˆ¤æ–­</li>
<li>é€šçŸ¥çš„æ‰§è¡Œé¡ºåºç”±ä»£ç†å¯¹è±¡æ§åˆ¶ï¼Œä¸æ˜¯æ³¨è§£å†³å®šçš„</li>
<li>Spring AOPåªæ˜¯æŠŠè¿™å¥—æœºåˆ¶åšå¾—æ›´å®Œå–„ï¼Œæœ¬è´¨å’Œ800è¡Œä»£ç æ²¡åŒºåˆ«</li>
</ol>
<p>ä¸‹æ¬¡é‡åˆ°"ä¸ºä»€ä¹ˆ@Transactionalæ²¡ç”Ÿæ•ˆ"è¿™ç§é—®é¢˜ï¼Œå°±èƒ½å¿«é€Ÿå®šä½ï¼šæ˜¯ä¸æ˜¯ä»£ç†æ²¡åˆ›å»ºï¼Ÿæ˜¯ä¸æ˜¯è¡¨è¾¾å¼æ²¡åŒ¹é…ä¸Šï¼Ÿæ˜¯ä¸æ˜¯è°ƒç”¨æ–¹å¼ä¸å¯¹ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SSEä¸æµå¼ä¼ è¾“(Streamable HTTP)]]></title>    <link>https://juejin.cn/post/7587023071067635764</link>    <guid>https://juejin.cn/post/7587023071067635764</guid>    <pubDate>2025-12-24T10:10:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587023071067635764" data-draft-id="7582528397865041947" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SSEä¸æµå¼ä¼ è¾“(Streamable HTTP)"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-24T10:10:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸ƒåˆ—ç‘Ÿå†œçš„æ˜Ÿç©º"/> <meta itemprop="url" content="https://juejin.cn/user/976022056218471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SSEä¸æµå¼ä¼ è¾“(Streamable HTTP)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976022056218471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸ƒåˆ—ç‘Ÿå†œçš„æ˜Ÿç©º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T10:10:28.000Z" title="Wed Dec 24 2025 10:10:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>SSEè¢«å†·è½äº†åå¤šå¹´ï¼Œç»ˆäºéšAIç«äº†ä¸€æŠŠã€‚è¿‡å»å¤§å®¶å®å¯ç”¨websocketä¹Ÿä¸æ„¿æ„ä½¿ç”¨SSEï¼Œä»¥è‡³äºAIå‡ºæ¥åï¼Œå¾ˆå¤šäººè®¤ä¸ºè¿™æ˜¯ä¸ªæ–°æŠ€æœ¯ã€‚å®é™…ä¸Šå®ƒå¾ˆä¹…ä»¥å‰å°±æ˜¯HTML5æ ‡å‡†ä¸­çš„ä¸€éƒ¨åˆ†äº†ã€‚</p>
<p>MCPå…´èµ·åï¼Œæœ‰äº›äººè®¤ä¸ºSSEä¸Streamable HTTPæ˜¯ä¸¤ä¸ªæ¦‚å¿µï¼Œå…¶å®ä¸ç„¶ã€‚æœ¬æ–‡å°†ç†æ¸…SSEå’ŒStreamalbe HTTPä¸¤è€…çš„æ¦‚å¿µä¸å…³ç³»ï¼Œå¹¶ç»™å‡ºå®è·µä¸­çš„ä¸€äº›å°å»ºè®®ã€‚</p>
<h2 data-id="heading-0">SSE</h2>
<p>SSEæ˜¯Streamable HTTPçš„ä¸€ä¸ªå®ç°:SSEä¸ä»…å¯¹è¯·æ±‚å¤´æœ‰è¦æ±‚â€”â€”å¿…é¡»è®¾ç½®Content-Type: text/event-streamï¼Œè€Œä¸”å¯¹ä¼ è¾“æ ¼å¼ã€æ•°æ®è§£æåšäº†è¯¦ç»†çº¦å®šï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe10c5ef22b045d98a17c0a349114f3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5biD5YiX55Gf5Yac55qE5pif56m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175827&amp;x-signature=lvjhzi7NswjvKtHfnHeWIG%2B2kKk%3D" alt="image.png" loading="lazy"/></p>
<p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼Œå…·ä½“å¯è§HTML5æ ‡å‡† <a href="https://link.juejin.cn?target=https%3A%2F%2Fhtml.spec.whatwg.org%2Fmultipage%2Fserver-sent-events.html%23concept-eventsource-url" target="_blank" title="https://html.spec.whatwg.org/multipage/server-sent-events.html#concept-eventsource-url" ref="nofollow noopener noreferrer">html.spec.whatwg.org/multipage/sâ€¦</a></p>
<p>é™¤äº†è¿™äº›å…·ä½“çš„è§„èŒƒå¤–ï¼ŒSSEåªèƒ½å‘é€getè¯·æ±‚ï¼Œå¹¶ä¸”åªèƒ½ç”±å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­ã€‚å¦å¤–ï¼Œä»"text/event-stream"ä¸Šå¯ä»¥çœ‹å‡ºï¼ŒSSEèšç„¦äºæ–‡æœ¬å†…å®¹ä¼ è¾“ï¼Œè¦ä¼ äºŒè¿›åˆ¶å†…å®¹å°±æ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼ŒSSEæ˜¯ç”±HTML5æ ‡å‡†è§„å®šï¼Œé’ˆå¯¹å‰ç«¯åœºæ™¯ç‰¹æ®Šè§„å®šçš„æµå¼ä¼ è¾“åè®®ã€‚åŸºäºSSEçš„æµå¼ä¼ è¾“ï¼Œå¯ä»¥é€šè¿‡EventSourceå¯¹è±¡å®ç°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡fetchè‡ªè¡Œå¤„ç†è¯·æ±‚/è§£æ/é‡è¿ã€‚</p>
<h2 data-id="heading-1">Streamable HTTP</h2>
<p>Streamable HTTPè™½ç„¶ä¸SSEä¸€æ ·ä¾èµ–httpåè®®ä¸­çš„keep-aliveï¼Œä½†æ›´åº•å±‚å’Œä¸­ç«‹ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒæ˜¯Transfer-Encoding: chunkedï¼ˆhttp1.1ï¼‰ï¼Œæ­¤å¤–æ²¡æœ‰å…¶ä»–çº¦æŸã€‚</p>
<p>å¦‚æœä½¿ç”¨http2ï¼Œå¯ä»¥ä¸å£°æ˜Transfer-Encodingï¼Œåªè¦æŒç»­å†™å°±è¡Œäº†ï¼Œå› ä¸ºhttp2èƒ½è‡ªåŠ¨åˆ†å¸§ã€‚</p>
<p>å½“æœåŠ¡å™¨è¿”å›çš„å“åº”ä¸­ç¼ºå°‘<code>Content-Length</code>å¤´éƒ¨ï¼Œä¸”è¿æ¥ä¿æŒå¼€æ”¾ï¼ˆ<code>Connection: keep-alive</code>ï¼‰æ—¶ï¼ŒHTTP/1.1 åè®®ä¼šé»˜è®¤ä½¿ç”¨<code>Transfer-Encoding: chunked</code>ç¼–ç æ¥ä¼ è¾“å“åº”æ•°æ®ï¼ŒSSEåˆšå¥½æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œå› æ­¤ä¹Ÿæ˜¯chunked transferä¼ è¾“çš„ã€‚</p>
<p>ä»è¿™ä¸ªè§’åº¦æ¥è¯´ï¼ŒSSEå°±æ˜¯Streamable HTTPä¼ è¾“çš„ä¸€ä¸ªå®ç°â€”â€”<strong>SSE = Streamable HTTP + äº‹ä»¶ç¼–ç è§„èŒƒ</strong>ã€‚</p>
<p>ç”±äºStreamable HTTPå¹¶æ²¡æœ‰è§„å®šæ•°æ®æ ¼å¼å’Œè§£ææ–¹æ³•ï¼Œå› æ­¤ä½¿ç”¨è€…å¯ä»¥æ ¹æ®åœºæ™¯è‡ªè¡Œåå•†ï¼š</p>
<pre><code class="hljs language-css" lang="css">SSEä¼ è¾“ï¼š
data: {"token":<span class="hljs-string">"Hello"</span>}
data: {"token":<span class="hljs-string">"world"</span>}
data: [DONE]

Streamable HTTPä¼ è¾“ï¼š
{"type":<span class="hljs-string">"token"</span>,<span class="hljs-string">"content"</span>:<span class="hljs-string">"Hello"</span>}
{"type":<span class="hljs-string">"token"</span>,<span class="hljs-string">"content"</span>:<span class="hljs-string">"world"</span>}
{"type":<span class="hljs-string">"done"</span>}

</code></pre>
<p>ä»å†…å®¹ä¸Šå¯ä»¥çœ‹å‡ºï¼ŒSSEå¿…é¡»è§£ædata:å¼€å¤´ï¼Œè€ŒStreamableå¯ä¼ è¾“json string lineç­‰å¤šç§æ ¼å¼ã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆMCPæ›´é’çStreamable HTTP</h3>





























<table><thead><tr><th>åŸå› </th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸŒ <strong>è·¨è¯­è¨€å…¼å®¹</strong></td><td>SSE åŸç”Ÿä»…é™æµè§ˆå™¨ï¼›Streamable HTTP é€‚é… SDKã€CLIã€æœåŠ¡ç«¯</td></tr><tr><td>ğŸ§± <strong>ç»“æ„çµæ´»</strong></td><td>æ”¯æŒ NDJSONã€JSON Linesã€Protocol Buffers</td></tr><tr><td>âš™ï¸ <strong>æ›´è´´è¿‘åº•å±‚ I/O</strong></td><td>æ–¹ä¾¿æ§åˆ¶ chunk å¤§å°ã€æµé€Ÿã€å…³é—­æœºåˆ¶</td></tr><tr><td>ğŸ§© <strong>å¤šç±»å‹è¾“å‡º</strong></td><td>AI ä¸æ­¢å‘æ–‡æœ¬ï¼Œè¿˜è¦å‘å›¾åƒã€è¯­éŸ³ã€å‡½æ•°è°ƒç”¨ç­‰</td></tr><tr><td>ğŸ“¦ <strong>å·¥å…·é“¾ç»Ÿä¸€</strong></td><td>ä¸ç°ä»£ fetch/Response API ä¸€è‡´</td></tr></tbody></table>
<p>å¯¹aiåº”ç”¨æ¥è¯´ï¼ŒSSEè¿‡äºæ­»æ¿ã€‚å®ƒè§„å®šäº†ä¼ è¾“æ ¼å¼ï¼Œç¼–ç æ–¹å¼ï¼Œæ— æ³•ä»¥äºŒè¿›åˆ¶ä¼ è¾“ã€‚åœ¨éæµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œä½¿ç”¨æ›´åŸå§‹çš„Streamable HTTPæ˜¾ç„¶æ›´åˆé€‚ã€‚</p>
<h2 data-id="heading-3">æµå¼ä¼ è¾“çš„å®è·µå»ºè®®</h2>
<ol>
<li>å¦‚æœæ²¡æœ‰äºŒè¿›åˆ¶ä¼ è¾“éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨SSEåè®®ï¼ŒæœåŠ¡ç«¯ç¬¬ä¸‰æ–¹å¼€æºå·¥å…·ä¹Ÿè¾ƒå¤š</li>
<li>æµè§ˆå™¨ç«¯å»ºè®®ä½¿ç”¨fetchè€Œä¸æ˜¯EventSourceï¼Œä¾¿äºä¼ å‚å’Œè®¤è¯</li>
<li>æµè§ˆå™¨ç«¯ä½¿ç”¨AbortControllerå–æ¶ˆæµå¼ä¼ è¾“</li>
<li>æœåŠ¡ç«¯æ ¹æ®è¯·æ±‚å¤´çš„ Accept: 'text/event-stream' åˆ¤æ–­æ˜¯å¦ä»¥SSEæ ¼å¼ä¼ è¾“ï¼ˆå¦‚æœéœ€è¦åŒæ—¶æ”¯æŒæµå¼ä¼ è¾“å’Œæ™®é€šåˆ†é¡µä¼ è¾“ï¼‰</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[# Vue3 å›¾ç‰‡æ ‡æ³¨æ’ä»¶ AILabel]]></title>    <link>https://juejin.cn/post/7586615716907073536</link>    <guid>https://juejin.cn/post/7586615716907073536</guid>    <pubDate>2025-12-23T07:58:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586615716907073536" data-draft-id="7586610067568820224" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="# Vue3 å›¾ç‰‡æ ‡æ³¨æ’ä»¶ AILabel"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-23T07:58:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å«æˆ‘AddV"/> <meta itemprop="url" content="https://juejin.cn/user/4860749051150"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            # Vue3 å›¾ç‰‡æ ‡æ³¨æ’ä»¶ AILabel
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4860749051150/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å«æˆ‘AddV
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T07:58:40.000Z" title="Tue Dec 23 2025 07:58:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue3 å›¾ç‰‡æ ‡æ³¨æ’ä»¶ AILabel</h2>
<blockquote>
<p>è¿‘æœŸåœ¨åšä¸€ä¸ªå›¾ç‰‡æ ‡æ³¨çš„é¡¹ç›®ï¼Œå°±æ˜¯å±•ç¤ºä¸€å¼ å›¾ç‰‡ï¼Œç„¶ååœ¨å›¾ç‰‡ä¸Šæ‹–æ‹–æ‹½æ‹½ç»˜åˆ¶ä¸€ä¸ªä¸€ä¸ªçš„æ¡†æ¡†ï¼Œç„¶åæŠŠæ¡†æ¡†çš„ä½ç½®æ•°æ®ä¿å­˜èµ·æ¥ã€‚</p>
</blockquote>
<h3 data-id="heading-1">æ’ä»¶ AILabel</h3>
<p>NPMï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Failabel%3FactiveTab%3Dreadme" target="_blank" title="https://www.npmjs.com/package/ailabel?activeTab=readme" ref="nofollow noopener noreferrer">www.npmjs.com/package/ailâ€¦</a>
GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjlifeng%2Failabel" target="_blank" title="https://github.com/jlifeng/ailabel" ref="nofollow noopener noreferrer">github.com/jlifeng/ailâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ce4e65032a648a2b3f94f24018d3712~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767081520&amp;x-signature=BptN%2FDjEmIcO5FggX0D6TSUbqCE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜å•Šï¼Œå°±æ˜¯è¿™ä¸ª github ä¸Šé¢æˆ–è€…æ˜¯ npm ä¸Šé¢çš„é“¾æ¥éƒ½æ˜¯å¤±æ•ˆçš„äº†ï¼Œæ–‡æ¡£éƒ½æ‰¾ä¸åˆ°ï¼Œä¸‹é¢è´´ä¸€ä¸ªæˆ‘å¼„åˆ°çš„æ–‡æ¡£ï¼Œèµ·ç æˆ‘å‘æ–‡çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥æŸ¥çœ‹çš„ï¼Œä¸çŸ¥é“åæœŸè¿˜èƒ½ä¸èƒ½ä¿ä½ï¼</p>
<p>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fluchuanqi.github.io%2FAILabel%2Fdoc%2Fpreview%2F%231" target="_blank" title="https://luchuanqi.github.io/AILabel/doc/preview/#1" ref="nofollow noopener noreferrer">luchuanqi.github.io/AILabel/docâ€¦</a></p>
<h3 data-id="heading-2">å®‰è£… AILabel æ’ä»¶</h3>
<p>å®‰è£…æ’ä»¶å¾ˆç®€å•å“ˆï¼Œä¸€è¡Œå‘½ä»¤å®Œäº‹å„¿äº†ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm i ailabel
</code></pre>
<p>é™å¾…å®‰è£…å®Œæˆå°±å¯ä»¥äº†ã€‚</p>
<h3 data-id="heading-3">ä½¿ç”¨ï¼ˆå…³é”®ä»£ç ï¼‰</h3>
<p><code>AILabel</code> ä½¿ç”¨ç±»ä¼¼äº<code>openlayer</code>ï¼Œä¹Ÿæ˜¯é‚£ç§ä¸€ä¸ªä¸€ä¸ªçš„å›¾å±‚å¾€ä¸ŠåŠ ï¼Œä¸‹é¢ç®€å•æ¥ä¸ªæ¡ˆä¾‹å“ˆï¼</p>
<h4 data-id="heading-4">1. è·å–å›¾ç‰‡ï¼Œè·å–åŸå§‹å›¾ç‰‡çš„å®½é«˜</h4>
<p>æ¯”å¦‚æˆ‘æœ‰ä¸€å¼ å›¾ç‰‡ï¼Œæˆ‘éœ€è¦è·å–è¿™ä¸ªå›¾ç‰‡çš„<code>å®½é«˜</code>æ˜¯å¤šå°‘ï¼Œå› ä¸ºæˆ‘å¿…é¡»äºåŸå§‹å›¾ç‰‡å¤§å°ä¸€æ ·ï¼Œä¸ç„¶çš„è¯æˆ‘æ ‡æ³¨å‡ºæ¥çš„ä½ç½®å°±æ˜¯ä¸å‡†çš„ï¼Œå› æ­¤éœ€è¦å…ˆè·å–åŸå§‹å›¾ç‰‡å®½é«˜ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> url = <span class="hljs-title function_">ref</span>(<span class="hljs-string">"http://192.168.78.17:5173/static/images/1.jpg"</span>)  <span class="hljs-comment">// å›¾ç‰‡åœ°å€</span>

<span class="hljs-comment">// åŠ è½½å›¾ç‰‡ è·å–å›¾ç‰‡å®½é«˜</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadImage</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>()
  img.<span class="hljs-property">src</span> = url.<span class="hljs-property">value</span>
  img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
    imageWidth.<span class="hljs-property">value</span> = img.<span class="hljs-property">width</span>  <span class="hljs-comment">// å›¾ç‰‡å®½åº¦</span>
    imageHeight.<span class="hljs-property">value</span> = img.<span class="hljs-property">height</span>   <span class="hljs-comment">// å›¾ç‰‡é«˜åº¦</span>
  }
}
</code></pre>
<h4 data-id="heading-5">2. åˆå§‹åŒ– AILabel</h4>
<p>åˆå§‹åŒ–æ ‡æ³¨å°±æ˜¯ä½¿ç”¨ AILabelï¼Œç„¶åæŠŠå›¾ç‰‡ä½œä¸ºå›¾å±‚ä¸­æ·»åŠ åˆ° AILabel ä¸­ï¼ŒåŒæ—¶éœ€è¦åœ¨ AILabel ä¸­æ·»åŠ ä¸€ä¸ªæ ‡æ³¨å›¾å±‚ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆå§‹åŒ–æ ‡æ³¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">initAnno</span> = (<span class="hljs-params"/>) =&gt; {
  gMap.<span class="hljs-property">value</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AILabel</span>.<span class="hljs-title class_">Map</span>(<span class="hljs-string">'ed-video-mask'</span>, {
    <span class="hljs-attr">center</span>: { <span class="hljs-attr">x</span>: imageWidth.<span class="hljs-property">value</span> / <span class="hljs-number">2</span>, <span class="hljs-attr">y</span>: imageHeight.<span class="hljs-property">value</span> / <span class="hljs-number">2</span> },  <span class="hljs-comment">// è®¾ç½®ä¸€ä¸‹ä¸­å¿ƒç‚¹ä½ç½®</span>
    <span class="hljs-attr">zoom</span>: imageWidth.<span class="hljs-property">value</span>,  <span class="hljs-comment">// zoomä¸‹é¢å•ç‹¬è¯´ï¼Œå¾ˆé‡è¦</span>
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'PAN'</span>,   <span class="hljs-comment">// è®¾ç½®ç±»å‹ä¸ºå¹³ç§»ï¼ˆå¯ä»¥è®¾ç½®ç»˜åˆ¶çŸ©å½¢ã€å¤šè¾¹å½¢ã€åœ†å½¢ç­‰ç­‰ï¼Œé»˜è®¤æ‹–æ‹½å°±è¡Œäº†ï¼‰</span>
    <span class="hljs-attr">refreshDelayWhenZooming</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// è¿™äº›åœ¨æ–‡æ¡£é‡Œé¢çœ‹å°±è¡Œ</span>
    <span class="hljs-attr">zoomWhenDrawing</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">panWhenDrawing</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">withHotKeys</span>: <span class="hljs-literal">false</span>
  })

  <span class="hljs-comment">// å›¾ç‰‡å›¾å±‚ ï¼ˆç”¨äºå±•ç¤ºå›¾ç‰‡ï¼‰</span>
  gImageLayer.<span class="hljs-property">value</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AILabel</span>.<span class="hljs-property">Layer</span>.<span class="hljs-title class_">Image</span>(<span class="hljs-string">'image-layer'</span>, {
    <span class="hljs-attr">src</span>: url.<span class="hljs-property">value</span>,  <span class="hljs-comment">// å›¾ç‰‡åœ°å€url ï¼ˆæ¯”å¦‚ï¼šhttps://xxx.com/1.pngï¼‰</span>
    <span class="hljs-attr">width</span>: imageWidth.<span class="hljs-property">value</span>,  <span class="hljs-comment">// å›¾ç‰‡å®é™…å®½åº¦</span>
    <span class="hljs-attr">height</span>: imageHeight.<span class="hljs-property">value</span>,   <span class="hljs-comment">// å›¾ç‰‡å®é™…é«˜åº¦</span>
    <span class="hljs-attr">crossOrigin</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">position</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }  <span class="hljs-comment">// åˆå§‹ä½ç½®</span>
  },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'å›¾ç‰‡å›¾å±‚'</span> },
    { <span class="hljs-attr">zIndex</span>: <span class="hljs-number">1</span> })

  gMap.<span class="hljs-property">value</span>.<span class="hljs-title function_">addLayer</span>(gImageLayer.<span class="hljs-property">value</span>)  <span class="hljs-comment">// å›¾ç‰‡å›¾å±‚æ·»åŠ åˆ° AILabel</span>

  <span class="hljs-comment">// æ ‡æ³¨å›¾å±‚ ï¼ˆç»˜åˆ¶çš„æ¡†æ¡†åœ¨è¿™ä¸ªå›¾å±‚ä¸Šï¼‰</span>
  gFeatureLayer.<span class="hljs-property">value</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AILabel</span>.<span class="hljs-property">Layer</span>.<span class="hljs-title class_">Feature</span>(
    <span class="hljs-string">'feature-layer'</span>,
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'æ ‡æ³¨å›¾å±‚'</span> },
    { <span class="hljs-attr">zIndex</span>: <span class="hljs-number">2</span> }
  )
  gMap.<span class="hljs-property">value</span>.<span class="hljs-title function_">addLayer</span>(gFeatureLayer.<span class="hljs-property">value</span>)   <span class="hljs-comment">// æ ‡æ³¨å›¾å±‚æ·»åŠ åˆ° AILabel</span>
}
</code></pre>
<p>è¿™æ ·å°±å¯ä»¥äº†ã€‚</p>
<p>é‚£ä¸ª zoom æ˜¯å•¥æ„æ€å“ˆï¼Œå¾ˆé‡è¦ï¼Œæ¯”å¦‚æˆ‘çš„å›¾ç‰‡åŸå§‹åˆ†è¾¨ç‡å°ºå¯¸æ˜¯ <code>3000 * 2000</code>ï¼Œä½†æ˜¯æˆ‘ä»¬æ ‡æ³¨ç»™çš„å¯æ˜¯åŒºåŸŸä¸ä¸€å®šè¿™ä¹ˆå¤§å•Šï¼Œä¹Ÿè®¸åªæœ‰1000* 500ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥æ ‡æ³¨çš„è¯å¯èƒ½å°±æœ‰é—®é¢˜ï¼Œæ ‡æ³¨å‡ºæ¥çš„æ¡†æ¡†ä½ç½®å¯èƒ½å’Œå®é™…ç…§ç‰‡çš„ä½ç½®ä¸åŒ¹é…ï¼Œè¿™ä¸ªzoomå°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p>
<p>è¿™ä¸ª <code>zoom å°±æ˜¯å›¾ç‰‡å®½åº¦çš„å®é™…å¤§å°</code>ã€‚</p>
<p>æ¯”å¦‚ï¼Œæˆ‘çš„æ ‡æ³¨å¯è§†åŒºåŸŸå¯èƒ½åªæœ‰1000pxï¼Œä½†æ˜¯å›¾ç‰‡å®é™…å®½åº¦æ˜¯3000pxï¼Œå›¾ç‰‡ä¸ºäº†åœ¨å¯è§†åŒºåŸŸæ”¾å¾—ä¸‹ï¼Œä¼šè‡ªåŠ¨æŠŠå›¾ç‰‡ç¼©å°ï¼Œè®©å›¾ç‰‡å¯ä»¥åœ¨å¯è§†åŒºåŸŸå®Œæ•´å¾—æ”¾ä¸‹ã€‚è¿™æ—¶å€™å…¶å®å›¾ç‰‡æ˜¯è¢«ç¼©å°çš„ï¼Œä½†æ˜¯æˆ‘ä»¬æ ‡æ³¨å‡ºæ¥çš„ä½ç½®å’Œå¤§å°å°±å’ŒåŸå°ºå¯¸çš„å¯¹åº”ä¸ä¸Šäº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è®¾ç½® <code>zoom ä¸º 3000</code>ï¼Œé‚£ä¹ˆå°±å¯¹åº”ä¸Šäº†ï¼Œæ‰€ä»¥ï¼Œ<code>zoom è®¾ç½®ä¸ºåŸå§‹å›¾ç‰‡å®½åº¦å°±å¯ä»¥</code>ï¼åˆ‡è®°åˆ‡è®°ï¼ä¸ç„¶æ ‡æ³¨å‡ºæ¥çš„ä½ç½®æ˜¯é”™çš„ï¼ï¼ï¼</p>
<h4 data-id="heading-6">3. ä¿®æ”¹ AILabel çš„æ¨¡å¼</h4>
<p>ä¸Šé¢é»˜è®¤è®¾ç½®äº† <code>PAN</code>ï¼Œå°±æ˜¯å¹³ç§»ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯å¯ä»¥æ‹–æ‹½å›¾ç‰‡ä½ç½®ï¼Œæ»šè½®å®ç°å›¾ç‰‡ç¼©æ”¾çš„ã€‚</p>
<p>å½“éœ€è¦é¼ æ ‡æ‹–æ‹½ç»˜åˆ¶çš„æ—¶å€™ï¼Œéœ€è¦æ”¹ä¸ºå…¶ä»–çš„æ¨¡å¼ï¼Œä¿®æ”¹æ–¹å¼ä¸ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">gMap.<span class="hljs-property">value</span>.<span class="hljs-title function_">setMode</span>(mode)
</code></pre>
<p>å…¶ä¸­ mode çš„å€¼å¯ä»¥æ˜¯ï¼š<code>RECT</code>ã€<code>CIRCLE</code>ã€<code>POLYGON</code>ã€<code>POINT</code>ã€<code>LINE</code>ã€‚</p>

































<table><thead><tr><th>å€¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>RECT</td><td>çŸ©å½¢</td></tr><tr><td>CIRCLE</td><td>åœ†å½¢</td></tr><tr><td>POLYGON</td><td>å¤šè¾¹å½¢</td></tr><tr><td>POINT</td><td>ç‚¹</td></tr><tr><td>LINE</td><td>çº¿æ®µ</td></tr><tr><td>PAN</td><td>å¹³ç§»</td></tr></tbody></table>
<h4 data-id="heading-7">4. è®¾ç½®æ‹–æ‹½æ ·å¼</h4>
<p>åœ¨æˆ‘ä»¬è®¾ç½®äº† <code>gMap.value.setMode('RECT')</code>  ç»˜åˆ¶çŸ©å½¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬æŒ‰ä¸‹é¼ æ ‡å·¦é”®æ‹–æ‹½çš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªé»˜è®¤æ ·å¼ï¼Œå½“ç„¶è¿™æ˜¯å¯ä»¥è®¾ç½®çš„ï¼Œè®¾ç½®èµ·æ¥å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">gMap.<span class="hljs-property">value</span>.<span class="hljs-title function_">setDrawingStyle</span>({
	<span class="hljs-attr">strokeStyle</span>: <span class="hljs-string">'#409EFF'</span>,  <span class="hljs-comment">// è®¾ç½®è¾¹æ¡†é¢œè‰²</span>
  <span class="hljs-attr">lineWidth</span>: <span class="hljs-number">2</span>,   <span class="hljs-comment">// è®¾ç½®è¾¹æ¡†å®½åº¦</span>
  <span class="hljs-attr">fillStyle</span>: <span class="hljs-string">'#409EFF44'</span>,   <span class="hljs-comment">// è®¾ç½®å¡«å……é¢œè‰²</span>
  <span class="hljs-attr">fill</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// å¯ç”¨å¡«å……</span>
  <span class="hljs-attr">stroke</span>: <span class="hljs-literal">true</span>   <span class="hljs-comment">// å¯ç”¨è¾¹æ¡†</span>
})
</code></pre>
<h4 data-id="heading-8">5. äº‹ä»¶</h4>
<p>äº‹ä»¶æ˜¯å•¥å‘¢ï¼Œæ¯”å¦‚ï¼Œæˆ‘ç»˜åˆ¶å®Œä¼šèµ°å“ªä¸ªå‡½æ•°ï¼Œé€‰ä¸­ä¼šèµ°é‚£ä¸ªå‡½æ•°ï¼Œä¿®æ”¹ä¹‹åä¼šèµ°å“ªä¸ªå‡½æ•°ç­‰ç­‰ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªå‡½æ•°ç»‘å®šè¿™äº›äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»‘å®šäº‹ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">bindEvents</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ç»˜åˆ¶å®Œæˆå›è°ƒç›‘å¬</span>
  gMap.<span class="hljs-property">value</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'drawDone'</span>, <span class="hljs-function">(<span class="hljs-params">type, data</span>) =&gt;</span> {
    <span class="hljs-title function_">createAnnotation</span>(type, data)  <span class="hljs-comment">// èµ°äº†ä¸€ä¸ªå‡½æ•°</span>
  })
  <span class="hljs-comment">// è¦ç´ é€‰ä¸­å›è°ƒç›‘å¬(éPANæ¨¡å¼ä¸‹åŒå‡»é€‰ä¸­)</span>
  gMap.<span class="hljs-property">value</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'featureSelected'</span>, <span class="hljs-function">(<span class="hljs-params">feature</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (feature) { gMap.<span class="hljs-property">value</span>.<span class="hljs-title function_">setActiveFeature</span>(feature) }
  })
  <span class="hljs-comment">// è¦ç´ å–æ¶ˆé€‰ä¸­å›è°ƒç›‘å¬(é€‰ä¸­åç‚¹å‡»å…¶ä»–ä½ç½®å–æ¶ˆé€‰ä¸­)</span>
  gMap.<span class="hljs-property">value</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'featureUnselected'</span>, <span class="hljs-function">() =&gt;</span> {
    gMap.<span class="hljs-property">value</span>.<span class="hljs-title function_">setActiveFeature</span>(<span class="hljs-literal">null</span>)
  })
  <span class="hljs-comment">// è¦ç´ æ›´æ–°å›è°ƒç›‘å¬(é€‰ä¸­åç¼–è¾‘å®Œæˆå›è°ƒ)</span>
  gMap.<span class="hljs-property">value</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'featureUpdated'</span>, <span class="hljs-function">(<span class="hljs-params">feature, shape</span>) =&gt;</span> {
    feature.<span class="hljs-title function_">updateShape</span>(shape)
  })
}
</code></pre>
<p>æˆ‘ä»¬å¼€å¯ç»˜åˆ¶ä¹‹åï¼Œç»˜åˆ¶å®Œä¸€æ¾æ‰‹å‘ç°æ¡†æ¡†æ²¡äº†ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ç»˜åˆ¶ä¸Šå»ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ç»˜åˆ¶å®Œæˆä¹‹åçš„å›è°ƒé‡Œé¢ï¼Œè·å¾—äº†ç»˜åˆ¶çš„æ•°æ®ï¼Œç„¶åæŠŠè¿™ä¸ªæ•°æ®è‡ªå·±æ‰‹å†™ä¸€ä¸ªæ¡†æ¡†æ”¾åˆ°å›¾å±‚ä¸Šé¢å»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ·»åŠ è¦ç´ </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createAnnotation</span> = (<span class="hljs-params">type, shape</span>) =&gt; {
  <span class="hljs-keyword">const</span> id = <span class="hljs-string">`<span class="hljs-subst">${type}</span>_<span class="hljs-subst">${uuid4()}</span>`</span>  <span class="hljs-comment">// éšæœºID</span>
  <span class="hljs-keyword">let</span> feature = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">let</span> style = {
    <span class="hljs-attr">strokeStyle</span>: <span class="hljs-string">'#409EFF'</span>,  <span class="hljs-comment">// è®¾ç½®è¾¹æ¡†é¢œè‰²</span>
 		<span class="hljs-attr">lineWidth</span>: <span class="hljs-number">2</span>,   <span class="hljs-comment">// è®¾ç½®è¾¹æ¡†å®½åº¦</span>
    <span class="hljs-attr">fillStyle</span>: <span class="hljs-string">'#409EFF44'</span>,   <span class="hljs-comment">// è®¾ç½®å¡«å……é¢œè‰²</span>
    <span class="hljs-attr">fill</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// å¯ç”¨å¡«å……</span>
    <span class="hljs-attr">stroke</span>: <span class="hljs-literal">true</span>   <span class="hljs-comment">// å¯ç”¨è¾¹æ¡†</span>
  }
  <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'RECT'</span>) {   <span class="hljs-comment">// ç»˜åˆ¶çŸ©å½¢</span>
    feature = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AILabel</span>.<span class="hljs-property">Feature</span>.<span class="hljs-title class_">Rect</span>(id, shape, <span class="hljs-literal">null</span>, style)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'CIRCLE'</span>) {  <span class="hljs-comment">// ç»˜åˆ¶åœ†å½¢</span>
    feature = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AILabel</span>.<span class="hljs-property">Feature</span>.<span class="hljs-title class_">Circle</span>(id, shape, <span class="hljs-literal">null</span>, style)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'POLYGON'</span>) {  <span class="hljs-comment">// ç»˜åˆ¶å¤šè¾¹å½¢</span>
    feature = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AILabel</span>.<span class="hljs-property">Feature</span>.<span class="hljs-title class_">Polygon</span>(id, { <span class="hljs-attr">points</span>: shape }, <span class="hljs-literal">null</span>, style)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'POINT'</span>) {  <span class="hljs-comment">// ç»˜åˆ¶ç‚¹</span>
    feature = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AILabel</span>.<span class="hljs-property">Feature</span>.<span class="hljs-title class_">Point</span>(id, shape, <span class="hljs-literal">null</span>, style)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'LINE'</span>) {   <span class="hljs-comment">// ç»˜åˆ¶çº¿</span>
    feature = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AILabel</span>.<span class="hljs-property">Feature</span>.<span class="hljs-title class_">Line</span>(id, shape, <span class="hljs-literal">null</span>, style)
  }
  gFeatureLayer.<span class="hljs-property">value</span>.<span class="hljs-title function_">addFeature</span>(feature)
  <span class="hljs-keyword">return</span> feature;
}
</code></pre>
<p>ç„¶åå°±å¯ä»¥äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acd4b27437f4493e8fb6f0711774ae71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767081520&amp;x-signature=KWeIW3cwZWib8UY%2BfcG%2BwOdXgHA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸åªæ˜¯ä½œå“é›†ï¼šç”¨ Next.js æ‰“é€ æˆ‘çš„æ•°å­—ä½œå“åº“]]></title>    <link>https://juejin.cn/post/7586540799251333174</link>    <guid>https://juejin.cn/post/7586540799251333174</guid>    <pubDate>2025-12-23T01:31:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586540799251333174" data-draft-id="7586504691846447113" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸åªæ˜¯ä½œå“é›†ï¼šç”¨ Next.js æ‰“é€ æˆ‘çš„æ•°å­—ä½œå“åº“"/> <meta itemprop="keywords" content="Next.js,React.js"/> <meta itemprop="datePublished" content="2025-12-23T01:31:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™½é›¾èŒ«èŒ«ä¸¶"/> <meta itemprop="url" content="https://juejin.cn/user/1917147257534279"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸åªæ˜¯ä½œå“é›†ï¼šç”¨ Next.js æ‰“é€ æˆ‘çš„æ•°å­—ä½œå“åº“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1917147257534279/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™½é›¾èŒ«èŒ«ä¸¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T01:31:51.000Z" title="Tue Dec 23 2025 01:31:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p><strong>Hiï¼Œå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç™½é›¾èŒ«èŒ«ä¸¶ï¼</strong></p>
<p>å¾ˆä¹…æ²¡å’Œå¤§å®¶è§é¢äº†ï¼Œè¯´æ¥æƒ­æ„§ï¼Œè‡ªä»AIæˆäº†â€œå…¨èƒ½åŠ©æ‰‹â€ï¼Œæˆ‘è¿™ä¸ªâ€œç å­—å·¥â€çš„ç¬”å°±æœ‰ç‚¹é”ˆäº†â€”â€”æ„Ÿè§‰å¾ˆå¤šæŠ€æœ¯é—®é¢˜ï¼Œè¿˜æ²¡ç­‰æˆ‘å†™å®Œæ–‡ç« ï¼ŒAIä¸‰è¨€ä¸¤è¯­å°±è§£é‡Šæ¸…æ¥šäº†ã€‚å°‘äº†ç‚¹è¾“å‡ºæ·±åº¦å†…å®¹çš„åŠ¨åŠ›ï¼Œæ‰‹ä¹Ÿå°±æ…¢æ…¢æ‡’äº†ã€‚</p>
<p>ä¸è¿‡æœ€è¿‘ï¼Œæˆ‘åˆæ‰¾åˆ°äº†ä¸€ç‚¹ä¸ä¸€æ ·çš„æ„Ÿè§‰ã€‚å·¥ä½œä¸Šæ¥è§¦ä¸åˆ°ï¼Œæˆ‘å°±è‡ªå·±åŠ¨æ‰‹â€”â€”è¿™æ®µæ—¶é—´ä¸€ç›´åœ¨æŠ˜è…¾ <strong>Next.js + Shadcn UI</strong> è¿™å¥—ç»„åˆã€‚ä¸å¾—ä¸è¯´ï¼Œç¡®å®å¾ˆç«ï¼Œç”¨èµ·æ¥ä¹Ÿå¾ˆé¡ºæ‰‹ï¼Œä»å¤´æ­ä¸€ä¸ªé¡¹ç›®çš„è¿‡ç¨‹ï¼Œåè€Œè®©æˆ‘æ‰¾å›äº†é‚£ç§è¾¹è¸©å‘è¾¹å­¦ä¹ çš„è¸å®æ„Ÿã€‚</p>
<p>ä»Šå¤©æƒ³å’Œå¤§å®¶åˆ†äº«çš„ï¼Œæ˜¯æˆ‘åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­åšå‡ºæ¥çš„ä¸€ä¸ªå°æˆæœï¼š<strong>ä¸€ä¸ªä¸ªäººä½œå“ä¿¡æ¯å±•ç¤ºçš„æ¨¡æ¿</strong>ã€‚æˆ‘è§‰å¾—å®ƒè®¾è®¡å¾—æŒºå¹²å‡€ï¼Œç»“æ„ä¹Ÿæ¸…æ™°ï¼Œä¸ç®¡æ˜¯æ‹¿æ¥å³ç”¨ï¼Œè¿˜æ˜¯å½“ä½œå­¦ä¹ å‚è€ƒï¼Œåº”è¯¥éƒ½è¿˜ä¸é”™ã€‚å¦‚æœä½ ä¹Ÿåœ¨æ‰¾ç±»ä¼¼çš„çµæ„Ÿæˆ–æ¨¡ç‰ˆï¼Œä¸å¦¨çœ‹çœ‹ï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ ã€‚</p>
<h2 data-id="heading-1"><strong>çµæ„Ÿæ¥æº</strong></h2>
<p>åœ¨æˆ‘æ¢ç´¢ Shadcn UI çš„è¿‡ç¨‹ä¸­ï¼Œå¶ç„¶å‘ç°äº†ä¸€ä¸ªè®¾è®¡éå¸¸å‡ºè‰²çš„æ¨¡æ¿ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmagicui.design%2Fdocs%2Ftemplates%2Fportfolio" target="_blank" title="https://magicui.design/docs/templates/portfolio" ref="nofollow noopener noreferrer">magicui.design/docs/templaâ€¦</a></p>
<p>æœ€åˆæˆ‘åªæ˜¯æŠŠå®ƒé›†æˆåœ¨è‡ªå·±æ­£åœ¨æ£é¼“çš„é¡¹ç›®é‡Œè¯•è¯•æ°´ï¼Œä½†å¾ˆå¿«å‘ç°ï¼Œè¿™ä¸ªé¡µé¢æœ¬èº«å°±è¶³å¤Ÿå®Œæ•´å’Œä¼˜é›…â€”â€”å³ä½¿ç‹¬ç«‹å‡ºæ¥ï¼Œä¹Ÿå®Œå…¨èƒ½ä½œä¸ºä¸€ä¸ªä¸“ä¸šçš„ä½œå“å±•ç¤ºç«™ç‚¹ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘å†³å®šæŠŠå®ƒå•ç‹¬æŠ½ç¦»å‡ºæ¥ï¼Œæ­å»ºæˆäº†ä¸€ä¸ªä¸“æ³¨çš„ä½œå“å±•ç¤ºé¡¹ç›®ã€‚åœ¨ä¿ç•™å…¶åŸè®¾è®¡ç²¾é«“çš„åŸºç¡€ä¸Šï¼Œæˆ‘æ ¹æ®è‡ªå·±çš„åå¥½åšäº†ä¸€äº›è°ƒæ•´ï¼ŒåŠ å…¥äº†ä¸€äº›ä¸ªæ€§åŒ–çš„äº¤äº’ç»†èŠ‚å’ŒåŠ¨ç”»æ•ˆæœï¼Œè®©æ•´ä¸ªç•Œé¢åœ¨ç®€æ´ä¹‹ä¸­å¤šäº†ä¸€ç‚¹çµåŠ¨çš„æ°”æ¯ã€‚</p>
<p>æœ€ç»ˆå‘ˆç°å‡ºæ¥çš„ï¼Œå°±æ˜¯ç°åœ¨è¿™ä¸ªç‰ˆæœ¬â€”â€”æ•´ä½“ä¿æŒå¹²å‡€åˆ©è½ï¼Œåˆä¸å¤±ç»†èŠ‚å¤„çš„å·§æ€ã€‚å¦‚æœä½ ä¹Ÿåœ¨å¯»æ‰¾ä¸€ä¸ªè½»é‡ã€ç°ä»£ä¸”æ˜“äºå®šåˆ¶çš„ä½œå“é›†æ¨¡æ¿ï¼Œæˆ–è®¸è¿™ä¸ªå®ç°èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›çµæ„Ÿã€‚</p>
<h2 data-id="heading-2"><strong>ä¸ºä»€ä¹ˆæ¯ä¸ªå¼€å‘è€…éƒ½éœ€è¦ä¸€ä¸ªä½œå“ç«™ç‚¹ï¼Ÿ</strong></h2>
<p>ä½œä¸ºå¼€ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨åˆ›é€ ä»·å€¼ï¼šåœ¨ GitHub æäº¤ä»£ç ã€åœ¨æ˜é‡‘å†™æŠ€æœ¯æ–‡ç« ã€åœ¨å¼€æºç¤¾åŒºè´¡çŒ®æ–¹æ¡ˆâ€¦â€¦</p>
<blockquote>
<p>ä½†è¿™äº›æˆæœå¾€å¾€æ•£è½åœ¨ä¸åŒçš„å¹³å°ï¼Œåƒä¸€åº§åº§ä¿¡æ¯å­¤å²›ã€‚é¢è¯•æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åå¤è§£é‡Šè¿™äº›åˆ†æ•£çš„å†…å®¹ï¼›æ±‚èŒæ—¶ï¼Œç®€å†ä¸Šçš„çŸ­çŸ­å‡ è¡Œæè¿°ï¼Œéš¾ä»¥æ‰¿è½½æˆ‘ä»¬çœŸå®çš„æŠ€æœ¯æ€è€ƒä¸é¡¹ç›®æ·±åº¦ã€‚</p>
</blockquote>
<p>æ„å»ºä¸€ä¸ª<strong>ç»Ÿä¸€çš„æŠ€æœ¯èº«ä»½</strong>ï¼Œå°†åˆ†æ•£çš„é¡¹ç›®ã€æ–‡ç« ã€æ•°æ®å¯è§†åŒ–æ•´åˆåœ¨ä¸€ä¸ªä¸“ä¸šã€å¯è®¿é—®çš„ç©ºé—´ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªä½œå“é›†ï¼Œæ›´æ˜¯ï¼š</p>
<p>â€¢ <strong>é¢è¯•çš„éšå½¢åŠ åˆ†é¡¹</strong>â€”â€”å½“é¢è¯•å®˜é€šè¿‡ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„ç«™ç‚¹çœ‹åˆ°ä½ çš„å®Œæ•´æŠ€æœ¯è·¯å¾„ã€çœŸå®çš„é¡¹ç›®æ€è€ƒè¿‡ç¨‹ï¼Œè¿™ç§ä½“éªŒè¿œèƒœè¿‡åƒç¯‡ä¸€å¾‹çš„ç®€å†</p>
<p>â€¢ <strong>æŠ€æœ¯èƒ½åŠ›çš„ç³»ç»Ÿè¯æ˜</strong>â€”â€”å¯è§†åŒ–ä½ çš„ GitHub è´¡çŒ®ã€æŠ€èƒ½é›·è¾¾å›¾ã€é¡¹ç›®è¿­ä»£å†å²ï¼Œè®©æŠ½è±¡çš„èƒ½åŠ›å˜å¾—å…·ä½“å¯è§</p>
<h2 data-id="heading-3">æŠ€æœ¯æ ˆ</h2>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- æ¡†æ¶ï¼šNext.js 16ã€React 19ã€TypeScript 5</span>
<span class="hljs-deletion">- æ ·å¼ï¼šTailwind CSS v4ã€tw-animate-css</span>
<span class="hljs-deletion">- å¯è§†åŒ–ï¼šRecharts</span>
<span class="hljs-deletion">- å…¶ä»–ï¼šahooksã€enum-plusã€lucide-react</span>
</code></pre>
<h2 data-id="heading-4">ç‰¹æ€§</h2>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span> åŸºäº <span class="hljs-code">`Next.js App Router`</span> çš„ç°ä»£æ¶æ„
<span class="hljs-bullet">-</span> ä½¿ç”¨ <span class="hljs-code">`Tailwind CSS v4`</span> ä¸è‡ªå®šä¹‰ä¸»é¢˜å˜é‡ï¼Œæ”¯æŒæš—è‰²æ¨¡å¼
<span class="hljs-bullet">-</span> GitHub ä»“åº“ä¸è´¡çŒ®ç»Ÿè®¡ API
<span class="hljs-bullet">-</span> Halo æ–‡ç« åˆ—è¡¨èšåˆ API
<span class="hljs-bullet">-</span> Recharts æ•°æ®å›¾è¡¨å¯è§†åŒ–
<span class="hljs-bullet">-</span> å®Œæ•´ SEO æ–‡ä»¶ï¼š<span class="hljs-code">`robots`</span>ã€<span class="hljs-code">`sitemap`</span>ã€<span class="hljs-code">`manifest`</span>
<span class="hljs-bullet">-</span> é›†æˆ Umamiã€Microsoft Clarityã€Google Analyticsï¼ˆç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨å¯ç”¨ï¼‰
</code></pre>
<h2 data-id="heading-5">ç¯å¢ƒå˜é‡</h2>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.env</code>ï¼Œç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç«™ç‚¹ä¿¡æ¯</span>
<span class="hljs-attr">NEXT_PUBLIC_NAME</span>=<span class="hljs-string">"ä½ çš„åå­—"</span>
<span class="hljs-attr">NEXT_PUBLIC_APP_NAME</span>=<span class="hljs-string">"Portfolio"</span>
<span class="hljs-attr">NEXT_PUBLIC_DESC</span>=<span class="hljs-string">"ä¸€å¥è¯ç®€ä»‹/ç«™ç‚¹æè¿°"</span>
<span class="hljs-attr">NEXT_PUBLIC_APP_DOMAIN</span>=<span class="hljs-string">"https://your-domain.com"</span>
<span class="hljs-attr">NEXT_PUBLIC_THEME</span>=<span class="hljs-string">"light"</span> <span class="hljs-comment"># å¯é€‰ï¼šlight | dark | system</span>

<span class="hljs-comment"># åˆ†æç»Ÿè®¡ï¼ˆç”Ÿäº§ç¯å¢ƒç”Ÿæ•ˆï¼‰</span>
<span class="hljs-attr">NEXT_PUBLIC_UMAMI_ID</span>=<span class="hljs-string">""</span>
<span class="hljs-attr">NEXT_PUBLIC_CLARITY_ID</span>=<span class="hljs-string">""</span>
<span class="hljs-attr">NEXT_PUBLIC_GA_ID</span>=<span class="hljs-string">""</span>

<span class="hljs-comment"># GitHub API</span>
<span class="hljs-attr">GITHUB_TOKEN</span>=<span class="hljs-string">""</span> <span class="hljs-comment"># åªè¯» Token</span>
<span class="hljs-attr">NEXT_PUBLIC_GITHUB_USERNAME</span>=<span class="hljs-string">"your-github-username"</span>

<span class="hljs-comment"># Halo API</span>
<span class="hljs-attr">HALO_TOKEN</span>=<span class="hljs-string">""</span> <span class="hljs-comment"># åªè¯» Token</span>
</code></pre>
<h2 data-id="heading-6">æ•ˆæœé¢„è§ˆ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/950a3c041940463abe0c22cf41401586~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m96Zu-6Iyr6Iyr5Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767058990&amp;x-signature=6LfXOaKkPm6krsu4phL7HK%2BKWas%3D" alt="PixPin_2025-12-23_09-27-56.png" loading="lazy"/></p>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>è¿™ä¸ªåŸºäº Next.js + Shadcn UI æ„å»ºçš„ä¸ªäººä½œå“å±•ç¤ºæ¨¡æ¿ï¼Œæ˜¯æˆ‘åœ¨æ¢ç´¢ç°ä»£å‰ç«¯æŠ€æœ¯æ ˆè¿‡ç¨‹ä¸­çš„ä¸€æ¬¡å®è·µä¸æ²‰æ·€ã€‚</p>
<p>æŠ€æœ¯æœ¬èº«æ˜¯å·¥å…·ï¼Œä½†å¦‚ä½•ç”¨å®ƒæ›´å¥½åœ°è¡¨è¾¾è‡ªå·±ã€å‘ˆç°ä»·å€¼ï¼Œæ‰æ˜¯æ›´æœ‰æ„ä¹‰çš„æ¢ç´¢ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨æ„å»ºä¸ªäººé¡¹ç›®ã€æ•´ç†ä½œå“é›†ï¼Œæˆ–å•çº¯æƒ³å­¦ä¹  Next.js å…¨æ ˆå®è·µï¼Œè¿™ä¸ªé¡¹ç›®æˆ–è®¸èƒ½ç»™ä½ ä¸€äº›å‚è€ƒã€‚</p>
<p>åœ¨çº¿é¢„è§ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fportfolio.baiwumm.com" target="_blank" title="https://portfolio.baiwumm.com" ref="nofollow noopener noreferrer">portfolio.baiwumm.com</a></p>
<p>Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbaiwumm%2Fportfolio" target="_blank" title="https://github.com/baiwumm/portfolio" ref="nofollow noopener noreferrer">github.com/baiwumm/porâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Tauri (22)â€”â€”è®© `Esc` å¿«æ·é”®ä¸€å±‚å±‚é€€å‡ºçš„åˆ†å±‚å…³é—­æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7586585688004411433</link>    <guid>https://juejin.cn/post/7586585688004411433</guid>    <pubDate>2025-12-23T02:15:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586585688004411433" data-draft-id="7586555198115594246" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Tauri (22)â€”â€”è®© `Esc` å¿«æ·é”®ä¸€å±‚å±‚é€€å‡ºçš„åˆ†å±‚å…³é—­æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,APP"/> <meta itemprop="datePublished" content="2025-12-23T02:15:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨å¤œå¯»æ™´å¤©"/> <meta itemprop="url" content="https://juejin.cn/user/1943592288391496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Tauri (22)â€”â€”è®© `Esc` å¿«æ·é”®ä¸€å±‚å±‚é€€å‡ºçš„åˆ†å±‚å…³é—­æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592288391496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨å¤œå¯»æ™´å¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T02:15:10.000Z" title="Tue Dec 23 2025 02:15:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆ <code>Esc</code> ä¼šå˜å¾—â€œä¸å¯æ§â€</h2>
<p>åœ¨ Coco é‡Œï¼Œ<code>Esc</code> åŒæ—¶æ‰¿æ‹…äº†å¾ˆå¤šâ€œé€€å‡º/å…³é—­â€çš„èŒè´£ï¼š</p>
<ul>
<li>é€€å‡ºè¾“å…¥ï¼ˆInput/Textareaï¼‰ç¼–è¾‘æ€</li>
<li>å…³é—­å¼¹å±‚ï¼ˆPopover / èœå•ï¼‰</li>
<li>å…³é—­å†å²é¢æ¿ï¼ˆHistory Panelï¼‰</li>
<li>æœ€åéšè—çª—å£ï¼ˆTauri <code>hideWindow</code>ï¼‰</li>
</ul>
<p><strong>é—®é¢˜åœ¨äº</strong>ï¼šè¿™äº›å±‚çº§çš„ UI å¾€å¾€åŒæ—¶å­˜åœ¨ã€‚å¦‚æœä¸åšäº‹ä»¶éš”ç¦»ï¼Œ<code>Esc</code> å¯èƒ½ â€œä¸€é”®å…³é—­æ‰€æœ‰â€ï¼Œæˆ–è€…è¢«æŸä¸€å±‚åæ‰å¯¼è‡´ â€œè¯¥å…³çš„ä¸å…³â€ã€‚</p>
<p>æœ¬æ¬¡æ”¹åŠ¨çš„æ ¸å¿ƒï¼Œå°±æ˜¯æŠŠ <code>Esc</code> åšæˆ<strong>å¯é¢„æœŸçš„ä¼˜å…ˆçº§é“¾è·¯</strong>ï¼Œå¹¶é€šè¿‡ <strong><code>stopPropagation</code> + DOM çŠ¶æ€åˆ¤å®š</strong>è®©å„å±‚å„å¸å…¶èŒã€‚</p>
<hr/>
<h2 data-id="heading-1">è®¾è®¡ç›®æ ‡ï¼š<code>Esc</code> çš„å±‚çº§ä¼˜å…ˆçº§ï¼ˆä»è¿‘åˆ°è¿œï¼‰</h2>
<p>æˆ‘ä»¬æŠŠ <code>Esc</code> å®šä¹‰ä¸º â€œä»ç”¨æˆ·å½“å‰æ“ä½œç‚¹å¼€å§‹é€å±‚é€€å‡ºâ€ï¼Œä¼˜å…ˆçº§å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å¦‚æœæ­£åœ¨è¾“å…¥</strong>ï¼šå…ˆ blurï¼ˆé€€å‡ºè¾“å…¥æ€ï¼‰ï¼Œä¸åšå…¶å®ƒå…³é—­</li>
<li><strong>å¦‚æœåœ¨ Popover é‡Œ</strong>ï¼šå…³é—­å½“å‰ Popoverï¼ˆä½†ç¬¬ä¸€ä¸‹ <code>Esc</code> è‹¥åœ¨è¾“å…¥æ¡†é‡Œï¼Œä»å…ˆ blurï¼‰</li>
<li><strong>å¦‚æœä¸Šä¸‹æ–‡èœå•æ‰“å¼€</strong>ï¼šå…³é—­ä¸Šä¸‹æ–‡èœå•</li>
<li><strong>å¦‚æœ History Panel æ‰“å¼€</strong>ï¼šå…³é—­ History Panel</li>
<li><strong>å¦‚æœ Extension View æ‰“å¼€</strong>ï¼šä¸éšè—çª—å£ï¼ˆäº¤ç»™ Extension è‡ªå·±å¤„ç†æˆ–ä¿æŒç°çŠ¶ï¼‰</li>
<li><strong>å¦åˆ™</strong>ï¼šéšè—çª—å£ï¼ˆ<code>hideWindow()</code>ï¼‰</li>
</ol>
<p>è¿™æ¡é“¾è·¯çš„å…³é”®ç‚¹æ˜¯ï¼š<strong>â€œå†…å±‚ UI å¿…é¡»èƒ½æ‹¦æˆªå¹¶æ¶ˆè´¹ Escï¼Œé¿å…å†’æ³¡åˆ°å…¨å±€å¯¼è‡´ç›´æ¥ hideWindowâ€</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">å…¨å±€ <code>Esc</code>ï¼šç»Ÿä¸€å…¥å£ä¸â€œæœ€åå…œåº•â€</h2>
<p>å…¨å±€ <code>Esc</code> ç”± <code>LayoutOutlet</code> åˆå§‹åŒ–ï¼ˆ<code>src/routes/outlet.tsx</code> è°ƒç”¨ <code>useEscape()</code>ï¼‰ï¼Œæ ¸å¿ƒé€»è¾‘åœ¨ <code>src/hooks/useEscape.ts</code>ï¼š</p>
<ul>
<li>å…ˆåš <code>event.preventDefault()</code> + <code>event.stopPropagation()</code>ï¼ˆ<code>src/hooks/useEscape.ts</code>ï¼‰</li>
<li>å†æŒ‰ä¼˜å…ˆçº§å¤„ç†ï¼š
<ul>
<li>è¾“å…¥ blurï¼ˆ<code>src/hooks/useEscape.ts</code>ï¼‰</li>
<li>å…³é—­å³é”®èœå•ï¼ˆ<code>src/hooks/useEscape.ts</code>ï¼‰</li>
<li>å…³é—­ History Panelï¼ˆ<code>src/hooks/useEscape.ts</code>ï¼‰</li>
<li>Extension æ‰“å¼€æ—¶ç›´æ¥ <code>return</code>ï¼Œé¿å…è¯¯éšè—ï¼ˆ<code>src/hooks/useEscape.ts</code>ï¼‰</li>
<li>æœ€åéšè—çª—å£ï¼ˆ<code>src/hooks/useEscape.ts</code>ï¼‰</li>
</ul>
</li>
</ul>
<p>è¿™é‡Œæœ‰ä¸ªé‡è¦çš„å°ä¼˜åŒ–ï¼šå›è°ƒé‡Œç”¨ <code>useSearchStore.getState()</code> å–æœ€æ–°çŠ¶æ€ï¼ˆ<code>src/hooks/useEscape.ts</code>ï¼‰ï¼Œé¿å…å¿«æ·é”®å›è°ƒæ•è·æ—§çŠ¶æ€å¯¼è‡´ â€œæŒ‰äº†æ²¡ååº”â€ã€‚</p>
<hr/>
<h2 data-id="heading-3">Popover çš„ <code>Esc</code>ï¼šæŠŠâ€œå…³é—­å¼¹å±‚â€ä»å…¨å±€å‰¥ç¦»å‡ºæ¥</h2>
<p>çœŸæ­£å†³å®š â€œEsc æ˜¯å¦ä¸€å±‚å±‚é€€å‡ºâ€ çš„å…³é”®ï¼Œæ˜¯ Popover å¯¹ Esc çš„æ¶ˆè´¹ã€‚</p>
<p>åœ¨ Radix Popover ä¸­ï¼Œ<code>PopoverContent</code> æä¾›äº† <code>onEscapeKeyDown</code>ã€‚æœ¬æ¬¡åœ¨ç»„ä»¶å°è£…å±‚ç»Ÿä¸€åŠ å…¥ï¼š</p>
<ul>
<li>æ–‡ä»¶ï¼š<code>src/components/ui/popover.tsx</code></li>
<li>é€»è¾‘ï¼š<code>src/components/ui/popover.tsx</code></li>
</ul>
<p>è¡Œä¸ºæ˜¯ï¼š</p>
<ol>
<li><code>stopPropagation</code> + <code>preventDefault</code>ï¼ˆé¿å… Esc å†’æ³¡åˆ°å…¨å±€ <code>useEscape</code>ï¼Œä¹Ÿé¿å…æµè§ˆå™¨é»˜è®¤è¡Œä¸ºï¼‰</li>
<li>å¦‚æœç„¦ç‚¹åœ¨è¾“å…¥æ¡†/æ–‡æœ¬åŸŸï¼šåª blurï¼ˆ<code>src/components/ui/popover.tsx</code>ï¼‰
<ul>
<li>è¿™ä¿è¯äº†â€œç¬¬ä¸€ä¸‹ Esc é€€å‡ºè¾“å…¥â€ï¼Œè€Œä¸æ˜¯ç›´æ¥å…³æ‰ popover</li>
</ul>
</li>
<li>å¦åˆ™ï¼šæ‰¾åˆ°å½“å‰æ‰“å¼€çš„ popover trigger å¹¶ <code>click()</code>ï¼Œä»è€Œèµ° Radix çš„æ­£å¸¸å…³é—­æµç¨‹ï¼ˆ<code>src/components/ui/popover.tsx</code>ï¼‰</li>
</ol>
<p>ä¸ºäº†æ‰¾åˆ° â€œå½“å‰æ‰“å¼€çš„ triggerâ€ï¼Œæ–°å¢äº†é€‰æ‹©å™¨å¸¸é‡ï¼š</p>
<ul>
<li><code>OPENED_POPOVER_TRIGGER_SELECTOR</code>ï¼š<code>src/constants/index.ts</code></li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆè¦æ”¹é€‰æ‹©å™¨ï¼šä»â€œè‡ªå®šä¹‰æ ‡è®°â€åˆ° Radix çš„çœŸå® DOM</h2>
<p>è¿™æ¬¡å¯¹ Popover çš„è¯†åˆ«æ–¹å¼ä¹Ÿåšäº†ç»Ÿä¸€è°ƒæ•´ï¼š</p>
<ul>
<li><code>POPOVER_PANEL_SELECTOR</code> æ”¹ä¸º Radix wrapperï¼š<code>src/constants/index.ts</code>
<ul>
<li>å˜æˆ <code>"[data-radix-popper-content-wrapper]"</code>ï¼Œç”¨äºæ›´å¯é åœ°åˆ¤æ–­â€œç°åœ¨æ˜¯å¦å­˜åœ¨ popoverâ€</li>
</ul>
</li>
<li><code>HISTORY_PANEL_ID</code> / <code>CONTEXT_MENU_PANEL_ID</code> ä» <code>headlessui-...</code> å‘½åè¿ç§»åˆ° <code>popover-panel:...</code>ï¼ˆ<code>src/constants/index.ts</code>ï¼‰
<ul>
<li>é…åˆå½“å‰å®é™…æ¸²æŸ“ç»“æ„ï¼Œé¿å… ID ä¸ä¸€è‡´å¯¼è‡´å…³é—­é€»è¾‘å¤±æ•ˆ</li>
</ul>
</li>
</ul>
<p>å¯¹åº”çš„ History å…³é—­åŠ¨ä½œèµ°çš„æ˜¯ç‚¹å‡» triggerï¼š</p>
<ul>
<li><code>closeHistoryPanel()</code>ï¼š<code>src/utils/index.ts</code></li>
<li>å®ƒé€šè¿‡ <code>[aria-controls="${HISTORY_PANEL_ID}"]</code> æ‰¾åˆ°æŒ‰é’®å¹¶ç‚¹å‡»ï¼ˆ<code>src/utils/index.ts</code>ï¼‰</li>
<li><code>useEscape</code> ç”¨ <code>document.getElementById(HISTORY_PANEL_ID)</code> åˆ¤æ–­å†å²é¢æ¿æ˜¯å¦å­˜åœ¨ï¼ˆ<code>src/hooks/useEscape.ts</code>ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-5"><code>VisibleKey</code> ä¸ â€œåœ¨ Popover é‡Œæ˜¾ç¤ºå¿«æ·é”®æç¤ºâ€</h2>
<p><code>VisibleKey</code> éœ€è¦çŸ¥é“ â€œå½“å‰å¿«æ·é”®æç¤ºæ˜¯å¦åº”è¯¥æ˜¾ç¤ºâ€ï¼Œå°¤å…¶æ˜¯åœ¨ popover æ‰“å¼€æ—¶ï¼Œåªåœ¨ popover å†…çš„å…ƒç´ ä¸Šæ˜¾ç¤ºã€‚</p>
<p>å®ƒé€šè¿‡ï¼š</p>
<ul>
<li><code>POPOVER_PANEL_SELECTOR</code> è·å– popover é¢æ¿ wrapperï¼ˆ<code>src/components/Common/VisibleKey.tsx</code>ï¼‰</li>
<li><code>OPENED_POPOVER_TRIGGER_SELECTOR</code> è·å–æ‰“å¼€çš„ triggerï¼ˆ<code>src/components/Common/VisibleKey.tsx</code>ï¼‰</li>
<li>åˆ¤æ–­å½“å‰ç»„ä»¶æ˜¯å¦åœ¨ panel æˆ– trigger å†…ï¼ˆ<code>src/components/Common/VisibleKey.tsx</code>ï¼‰</li>
</ul>
<p>è¿™æ ·ä¸€æ¥ï¼Œâ€œæ‰“å¼€ popover åï¼Œå¿«æ·é”®æç¤ºåªåœ¨å½“å‰ popover çš„äº¤äº’åŒºåŸŸå‡ºç°â€ï¼Œä¸ä¼šæ±¡æŸ“å¤–å±‚ UIã€‚</p>
<hr/>
<h2 data-id="heading-6">è¾“å…¥æ¡†ç»„ä»¶æ”¶æ•›ï¼šåˆ é™¤ <code>PopoverInput</code>ï¼Œç»Ÿä¸€ç”¨ shadcn <code>Input</code></h2>
<p><code>src/components/Common/PopoverInput.tsx</code> è¢«åˆ é™¤ï¼Œç›¸å…³ä½ç½®æ”¹ä¸ºç›´æ¥ä½¿ç”¨ <code>src/components/ui/input</code>ï¼š</p>
<ul>
<li><code>SearchPopover</code>ï¼š<code>src/components/Search/SearchPopover.tsx</code></li>
<li><code>MCPPopover</code>ï¼š<code>src/components/Search/MCPPopover.tsx</code></li>
<li><code>AssistantList</code>ï¼š<code>src/components/Assistant/AssistantList.tsx</code></li>
</ul>
<p>åŒæ—¶ç»Ÿä¸€åŠ äº† <code>autoCorrect="off"</code>ï¼Œå‡å°‘è¾“å…¥è”æƒ³å¸¦æ¥çš„å¹²æ‰°ï¼ˆä¾‹å¦‚è‹±æ–‡å…³é”®å­—/ID æœç´¢åœºæ™¯ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-7">å°ç»“</h2>
<p>æœ¬æ¬¡æ”¹åŠ¨å°† <code>Esc</code> ä»â€œä¸å¯æ§çš„ä¸€é”®é€€å‡ºâ€é‡æ„ä¸º<strong>æœ‰æ˜ç¡®ä¼˜å…ˆçº§çš„é€å±‚é€€å‡ºæœºåˆ¶</strong>ï¼š</p>
<p><strong>è¾“å…¥æ€ â†’ Popover â†’ èœå• / History â†’ Extension â†’ çª—å£éšè—</strong></p>
<p>æ ¸å¿ƒåšæ³•æ˜¯ï¼š</p>
<ul>
<li><strong>å…¨å±€ <code>useEscape</code> åªä½œä¸ºæœ€åå…œåº•</strong>ï¼ŒæŒ‰ä¼˜å…ˆçº§å¤„ç†å…³é—­é€»è¾‘</li>
<li><strong>Popover å†…éƒ¨æ¶ˆè´¹ <code>Esc</code></strong>ï¼ˆä¼˜å…ˆ blur è¾“å…¥ï¼Œå…¶æ¬¡å…³é—­å¼¹å±‚ï¼‰ï¼Œé˜²æ­¢äº‹ä»¶å†’æ³¡åˆ°å…¨å±€</li>
<li>åŸºäº <strong>Radix å®é™… DOM</strong> ç»Ÿä¸€åˆ¤æ–­ popover / history æ˜¯å¦æ‰“å¼€</li>
<li><code>VisibleKey</code> åªåœ¨å½“å‰ popover äº¤äº’åŒºåŸŸå†…æ˜¾ç¤º</li>
<li>ç»Ÿä¸€è¾“å…¥ç»„ä»¶ï¼Œå‡å°‘å¹²æ‰°</li>
</ul>
<p>ç»“æœæ˜¯ï¼š<strong>Esc è¡Œä¸ºç¨³å®šã€å¯é¢„æœŸï¼Œä¸å†è¯¯å…³ã€ä¸å†æ¼å…³ã€‚</strong></p>
<h2 data-id="heading-8">å¼€æº</h2>
<p>å¦‚æœä½ å¯¹æˆ‘ä»¬çš„æŠ€æœ¯ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæˆ–è€…æƒ³ä½“éªŒä¸€ä¸‹è¿™æ¬¾å…¨èƒ½çš„ç”Ÿäº§åŠ›å·¥å…·ï¼Œæ¬¢è¿è®¿é—®æˆ‘ä»¬çš„å¼€æºä»“åº“å’Œå®˜ç½‘ï¼š</p>
<ul>
<li><strong>GitHub</strong>:Â <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fcoco-app" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fcoco-app" target="_blank">github.com/infinilabs/â€¦</a></li>
<li><strong>Website</strong>:Â <a href="https://link.juejin.cn/?target=https%3A%2F%2Fcoco.rs" title="https://link.juejin.cn/?target=https%3A%2F%2Fcoco.rs" target="_blank">coco.rs</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç®€å•å¯¹æ¯”glm4.6ä¸minimaxm2.1]]></title>    <link>https://juejin.cn/post/7587256133790924840</link>    <guid>https://juejin.cn/post/7587256133790924840</guid>    <pubDate>2025-12-24T10:03:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587256133790924840" data-draft-id="7587243886427570191" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç®€å•å¯¹æ¯”glm4.6ä¸minimaxm2.1"/> <meta itemprop="keywords" content="äº§å“"/> <meta itemprop="datePublished" content="2025-12-24T10:03:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Charlo"/> <meta itemprop="url" content="https://juejin.cn/user/1239904845853870"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç®€å•å¯¹æ¯”glm4.6ä¸minimaxm2.1
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904845853870/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Charlo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T10:03:24.000Z" title="Wed Dec 24 2025 10:03:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç®€å•å¯¹æ¯”glm4.6ä¸minimaxm2.1</p>
<p>æ¨¡ä»¿CMIç½‘ç«™çš„åŠŸèƒ½å†™çš„prdæ–‡æ¡£</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c521eaa0eb3483ab81873ae6fd8f6ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=uPtCqNLyV5wYYWtWhdA74WY%2BRu4%3D" alt="image.png" loading="lazy"/>
ç›´æ¥åœ¨treaä¸­è¾“å…¥ï¼šæŒ‰ç…§éœ€æ±‚æ–‡æ¡£ä½¿ç”¨reactå†™å‡ºç½‘é¡µ</p>
<h2 data-id="heading-0">Trea ä¸­çš„ minimax</h2>
<p>é¦–æ¬¡å®Œæˆæœ‰é—®é¢˜
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/427f21c382e34a269baec82827fe107f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=0w5iGq3SGVJ9UwOghQW80741ngs%3D" alt="image.png" loading="lazy"/>
ä¸€è½®ä¿®æ”¹å</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/254d919b12404694847c8b399ad8e537~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=2nIY1%2B7sORoOYxNGIwPMZx5gxsk%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eefe86d790d04b8ca917134acb421feb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=c9s4Oa2xWZcwXFX3Q83DPlQ2uBc%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11496a2e8d2345b6a883a6627fc0fae4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=q6KK77nGx9en29xF0UVA6P2Bl8Q%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">Trea ä¸­çš„ GLM4.7</h2>
<p>é™¤äº†ä¸­é—´æ–­äº†ä¸€æ¬¡ï¼Œæ•´ä½“æ•ˆæœå…¶å®è¿˜å¯ä»¥ï¼Œæœ‰äº›ç»†èŠ‚å¾ˆå¥‡æ€ªï¼Œä¼šæœ‰è«åå¥‡å¦™çš„è¾¹æ¡†çº¿å’Œæ¸å˜
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/464a2fb93d784afdbda2caef76a392ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=sD%2BR%2FLUWoOpFmY7nvF7u9Qqs%2B9o%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/583de70d63614ee19be264a3a133e2d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=kIlS8Fji5s%2B9N83cvqybsC1RK3M%3D" alt="image.png" loading="lazy"/></p>
<p>å¸ƒå±€ä¹Ÿæœ‰ä¸€äº›é”™è¯¯</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b10b966e4a2497a8da0e7ea9b93a106~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=tUhuCGIhfg%2FwKdZuCMAuiJbruao%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">Winsurf ä¸­çš„ gpt 5.2 high reasoning</h2>
<p>è™½ç„¶æ…¢ï¼Œä½†ä¹Ÿæ˜¯ä¸€æ¬¡æå¯¹</p>
<p>ä½†åæ¥å‘ç°ç”¨çš„æ˜¯ ant ui å¹¶ä¸æ˜¯shadcn</p>
<p>åé¢è®©æ”¹æˆshadcnï¼Œæ”¹äº†åŠå¤©ä¸ƒç»•å…«ç»•</p>
<p>è¿˜æŠŠæˆ‘é»˜è®¤çš„llm.txtæ”¹äº†</p>
<p>ä¹Ÿæ²¡æ”¹æ˜ç™½ postcss çš„bug</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2e173fc30c54656a9ff3c99e1e57590~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=grltR4tNd3XMUIBRolSMpMz4R4o%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">Winsurf ä¸­çš„ swe pro</h2>
<p>ä¸æä¹Ÿç½¢ï¼Œé™·å…¥æ­»å¾ªç¯äº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d7f729dfc67435a958ad82df9a2aafa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=qVThwbSPv7b8HacIwF6u1EpaElE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">Winsurf ä¸­çš„ Sonnet 3.7</h2>
<p>ä¹Ÿé‡åˆ°äº†postcssçš„é—®é¢˜ï¼Œä¸è¿‡åœ¨ä¿®æ”¹äº†å››äº”è½®ä¹‹åæˆåŠŸäº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a83a4ea9a564e888c8daf6cade32d17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=YpMZ5pcnV3oweyfq%2ByGb48JvySc%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cd99c88c2874b9f8b9c5f0f91f752ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=ukU126KPsA5JIJS9mYMpk5XeDjo%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">Winsur ä¸­çš„ Sonnet 4.5</h2>
<p>ä¸€æ¬¡æå®š</p>
<p>ä¸è¿‡å•†å“é€è§†æ²¡å†™ï¼Œè€Œä¸”å¸ƒå±€å’Œæ„æƒ³çš„æœ‰åŒºåˆ«</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa438b76928a498aba2f2d623cb41c0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=AZJP1Sk3gbKZjRvusWuNuJtJgjU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6">Ai Studio Gemini 3.0 pro</h2>
<p>ä¸ªäººæœ€å–œæ¬¢çš„</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7b12351586d4ae9b4334b527dec10f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=f7GfjCqm0gnjK1dQ5VzupWXtb4E%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-7">Google Antigravity é‡Œçš„ Opus4.5 thinking</h2>
<p>æˆ‘å®Œå…¨ä¸çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆã€‚ã€‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f4dd9a7a4644f7aa4aef2c9e0bc9e0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=7pTGgYiRRft9tvMcmeTuqMFbxMQ%3D" alt="image.png" loading="lazy"/></p>
<p>å…¶å®æ˜¯å¤´åƒ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8aaa3b23806846cba20c41ef51379a1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhcmxv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767175694&amp;x-signature=ABnS7lAtzw9qet%2FNzvCpCT0UZN0%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» Guava ListenableFuture å­¦ä¹ ç”Ÿäº§çº§å¹¶å‘è°ƒç”¨å®è·µ]]></title>    <link>https://juejin.cn/post/7586942589321183268</link>    <guid>https://juejin.cn/post/7586942589321183268</guid>    <pubDate>2025-12-23T11:26:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586942589321183268" data-draft-id="7586940555403952169" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» Guava ListenableFuture å­¦ä¹ ç”Ÿäº§çº§å¹¶å‘è°ƒç”¨å®è·µ"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-23T11:26:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» Guava ListenableFuture å­¦ä¹ ç”Ÿäº§çº§å¹¶å‘è°ƒç”¨å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T11:26:18.000Z" title="Tue Dec 23 2025 11:26:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    25
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¹‹å‰ä» Elasticsearch æºç å­¦åˆ°äº†çº¿ç¨‹æ± é…ç½®çš„è®¾è®¡æ€æƒ³ï¼Œä½† ES çš„ä»£ç å¤ªåº•å±‚ï¼Œéš¾ä»¥ç›´æ¥è¿ç§»åˆ°ä¸šåŠ¡ç³»ç»Ÿã€‚ä»Šå¤©åœ¨ Guava æ¡†æ¶ä¸­æ‰¾åˆ°äº†æ›´å®ç”¨çš„æ–¹æ¡ˆï¼šç›¸æ¯” <code>CompletableFuture</code> å¤æ‚çš„é“¾å¼è°ƒç”¨ï¼Œ<code>ListenableFuture</code> æä¾›äº†æ›´æ¸…æ™°çš„å¹¶å‘ç¼–æ’æ¨¡å¼ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹© Guava ListenableFuture</h2>
<h3 data-id="heading-2">CompletableFuture çš„ç—›ç‚¹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// allOf è¿”å› Voidï¼Œè¿˜è¦æ‰‹åŠ¨ join</span>
CompletableFuture.allOf(productFuture, inventoryFuture)
    .thenApply(v -&gt; {
        <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> productFuture.join();  <span class="hljs-comment">// è¿˜è¦å†æ¬¡ join</span>
        <span class="hljs-type">Inventory</span> <span class="hljs-variable">inventory</span> <span class="hljs-operator">=</span> inventoryFuture.join();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProductDetailDTO</span>(product, inventory);
    });
</code></pre>
<h3 data-id="heading-3">Guava çš„ä¼˜åŠ¿</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æäº¤ä»»åŠ¡</span>
ListenableFuture&lt;Product&gt; productFuture = executor.submit(() -&gt; 
    productService.getProduct(id));
ListenableFuture&lt;Inventory&gt; inventoryFuture = executor.submit(() -&gt; 
    inventoryService.getInventory(id));

<span class="hljs-comment">// ç­‰å¾…å…¨éƒ¨æˆåŠŸåç»„è£…</span>
<span class="hljs-keyword">return</span> Futures.whenAllSucceed(productFuture, inventoryFuture)
    .call(() -&gt; {
        <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> Futures.getDone(productFuture);
        <span class="hljs-type">Inventory</span> <span class="hljs-variable">inventory</span> <span class="hljs-operator">=</span> Futures.getDone(inventoryFuture);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProductDetailDTO</span>(product, inventory);
    }, executor);
</code></pre>
<p>æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>èŒè´£åˆ†ç¦»</strong>ï¼šæäº¤å’Œå¤„ç†åˆ†å¼€</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼š<code>getDone()</code> ç›´æ¥è¿”å›ç»“æœ</li>
<li><strong>è¯­ä¹‰æ¸…æ™°</strong>ï¼š<code>whenAllSucceed</code> æ˜ç¡®è¡¨è¾¾æ„å›¾</li>
</ul>
<hr/>
<h2 data-id="heading-4">äºŒã€ä¸šåŠ¡åœºæ™¯ï¼šç”µå•†å•†å“è¯¦æƒ…é¡µ</h2>
<p>ç”¨æˆ·è®¿é—®å•†å“è¯¦æƒ…é¡µï¼Œéœ€è¦å¹¶è¡ŒæŸ¥è¯¢å•†å“æœåŠ¡å’Œåº“å­˜æœåŠ¡ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[GET /product/123] --&gt; B[ProductFacade]
    B --&gt; C[å•†å“æœåŠ¡ 80ms]
    B --&gt; D[åº“å­˜æœåŠ¡ 60ms]
    C --&gt; E[ç»„è£…ç»“æœ]
    D --&gt; E
    E --&gt; F[è¿”å›DTO]
</code></pre>
<ul>
<li>ä¸²è¡Œè€—æ—¶ï¼š80ms + 60ms = 140ms</li>
<li>å¹¶è¡Œè€—æ—¶ï¼šmax(80ms, 60ms) â‰ˆ 80ms</li>
</ul>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€å®Œæ•´ä»£ç å®ç°</h2>
<h3 data-id="heading-6">æ•°æ®æ¨¡å‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å•†å“ä¿¡æ¯</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String id;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> priceInCents;
    
    Product(String id, String name, <span class="hljs-type">int</span> priceInCents) {
        <span class="hljs-built_in">this</span>.id = id;
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.priceInCents = priceInCents;
    }
    
    String <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> id; }
    String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> name; }
    <span class="hljs-type">int</span> <span class="hljs-title function_">getPriceInCents</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> priceInCents; }
}

<span class="hljs-comment">// åº“å­˜ä¿¡æ¯</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inventory</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String productId;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> quantity;
    
    Inventory(String productId, <span class="hljs-type">int</span> quantity) {
        <span class="hljs-built_in">this</span>.productId = productId;
        <span class="hljs-built_in">this</span>.quantity = quantity;
    }
    
    String <span class="hljs-title function_">getProductId</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> productId; }
    <span class="hljs-type">int</span> <span class="hljs-title function_">getQuantity</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> quantity; }
}

<span class="hljs-comment">// è¿”å›çš„ DTO</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductDetailDTO</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String productId;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> priceInCents;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> quantity;
    
    ProductDetailDTO(String productId, String name, <span class="hljs-type">int</span> priceInCents, <span class="hljs-type">int</span> quantity) {
        <span class="hljs-built_in">this</span>.productId = productId;
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.priceInCents = priceInCents;
        <span class="hljs-built_in">this</span>.quantity = quantity;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ProductDetailDTO{"</span> +
                <span class="hljs-string">"productId='"</span> + productId + <span class="hljs-string">'\''</span> +
                <span class="hljs-string">", name='"</span> + name + <span class="hljs-string">'\''</span> +
                <span class="hljs-string">", priceInCents="</span> + priceInCents +
                <span class="hljs-string">", quantity="</span> + quantity +
                <span class="hljs-string">'}'</span>;
    }
}
</code></pre>
<h3 data-id="heading-7">æ¨¡æ‹ŸæœåŠ¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {
    Product <span class="hljs-title function_">getProduct</span><span class="hljs-params">(String productId)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        TimeUnit.MILLISECONDS.sleep(<span class="hljs-number">80</span>);  <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè°ƒç”¨</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(productId, <span class="hljs-string">"MacBook Pro 14"</span>, <span class="hljs-number">149900</span>);
    }
}

<span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InventoryService</span> {
    Inventory <span class="hljs-title function_">getInventory</span><span class="hljs-params">(String productId)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        TimeUnit.MILLISECONDS.sleep(<span class="hljs-number">60</span>);  <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè°ƒç”¨</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inventory</span>(productId, <span class="hljs-number">42</span>);
    }
}
</code></pre>
<h3 data-id="heading-8">æ ¸å¿ƒé—¨é¢ç±»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductFacade</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ProductService productService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> InventoryService inventoryService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ListeningExecutorService executor;
    
    ProductFacade(ProductService productService,
                  InventoryService inventoryService,
                  ListeningExecutorService executor) {
        <span class="hljs-built_in">this</span>.productService = productService;
        <span class="hljs-built_in">this</span>.inventoryService = inventoryService;
        <span class="hljs-built_in">this</span>.executor = executor;
    }
    
    <span class="hljs-comment">/**
     * å¹¶è¡Œè·å–å•†å“ä¿¡æ¯å’Œåº“å­˜ä¿¡æ¯ï¼Œç„¶åç»„è£…æˆ ProductDetailDTO
     */</span>
    ListenableFuture&lt;ProductDetailDTO&gt; <span class="hljs-title function_">getProductDetail</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String productId)</span> {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šFan-Out å¹¶è¡ŒæŸ¥è¯¢</span>
        ListenableFuture&lt;Product&gt; productFuture = executor.submit(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Callable</span>&lt;Product&gt;() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
                    <span class="hljs-keyword">return</span> productService.getProduct(productId);
                }
            }
        );
        
        ListenableFuture&lt;Inventory&gt; inventoryFuture = executor.submit(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Callable</span>&lt;Inventory&gt;() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> Inventory <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
                    <span class="hljs-keyword">return</span> inventoryService.getInventory(productId);
                }
            }
        );
        
        <span class="hljs-comment">// æ­¥éª¤2ï¼šFan-In æ±‡æ€»ç»“æœ</span>
        <span class="hljs-comment">// whenAllSucceedï¼šåªæœ‰ä¸¤ä¸ª Future éƒ½æˆåŠŸï¼Œæ‰æ‰§è¡Œ call é‡Œçš„é€»è¾‘</span>
        <span class="hljs-keyword">return</span> Futures.whenAllSucceed(productFuture, inventoryFuture)
            .call(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callable</span>&lt;ProductDetailDTO&gt;() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> ProductDetailDTO <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
                    <span class="hljs-comment">// getDoneï¼šå®‰å…¨è·å–å·²å®Œæˆçš„ Future ç»“æœ</span>
                    <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> Futures.getDone(productFuture);
                    <span class="hljs-type">Inventory</span> <span class="hljs-variable">inventory</span> <span class="hljs-operator">=</span> Futures.getDone(inventoryFuture);
                    
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProductDetailDTO</span>(
                        product.getId(),
                        product.getName(),
                        product.getPriceInCents(),
                        inventory.getQuantity()
                    );
                }
            }, executor);
    }
}
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ol>
<li><strong><code>executor.submit(Callable)</code></strong>ï¼šæäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± å¼‚æ­¥æ‰§è¡Œï¼Œç«‹å³è¿”å› <code>ListenableFuture</code></li>
<li><strong><code>Futures.whenAllSucceed(f1, f2)</code></strong>ï¼šç­‰å¾…æ‰€æœ‰ Future éƒ½æˆåŠŸå®Œæˆï¼Œä»»ä½•ä¸€ä¸ªå¤±è´¥æ•´ä½“å°±å¤±è´¥</li>
<li><strong><code>Futures.getDone(future)</code></strong>ï¼šå®‰å…¨è·å–å·²å®Œæˆçš„ç»“æœï¼Œå› ä¸º <code>whenAllSucceed</code> ä¿è¯äº†æˆåŠŸ</li>
</ol>
<h3 data-id="heading-9">ç¨‹åºå…¥å£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹æ± </span>
    <span class="hljs-type">ListeningExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> MoreExecutors.listeningDecorator(
        Executors.newFixedThreadPool(<span class="hljs-number">4</span>)
    );
    
    <span class="hljs-comment">// åˆå§‹åŒ–æœåŠ¡</span>
    <span class="hljs-type">ProductService</span> <span class="hljs-variable">productService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProductService</span>();
    <span class="hljs-type">InventoryService</span> <span class="hljs-variable">inventoryService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InventoryService</span>();
    <span class="hljs-type">ProductFacade</span> <span class="hljs-variable">facade</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProductFacade</span>(
        productService, inventoryService, executor
    );
    
    <span class="hljs-type">String</span> <span class="hljs-variable">productId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"P123"</span>;
    <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.nanoTime();
    
    <span class="hljs-comment">// å‘èµ·å¹¶è¡ŒæŸ¥è¯¢</span>
    ListenableFuture&lt;ProductDetailDTO&gt; future = facade.getProductDetail(productId);
    
    <span class="hljs-comment">// é˜»å¡ç­‰å¾…ç»“æœï¼ˆDemo æ¼”ç¤ºç”¨ï¼Œå®é™… Web åœºæ™¯å¯ä»¥ç”¨å›è°ƒå¼‚æ­¥å¤„ç†ï¼‰</span>
    <span class="hljs-type">ProductDetailDTO</span> <span class="hljs-variable">dto</span> <span class="hljs-operator">=</span> future.get();
    
    <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.nanoTime();
    <span class="hljs-type">long</span> <span class="hljs-variable">costMillis</span> <span class="hljs-operator">=</span> (end - start) / <span class="hljs-number">1_000_000L</span>;
    
    System.out.println(<span class="hljs-string">"Result = "</span> + dto);
    System.out.println(<span class="hljs-string">"Cost   = "</span> + costMillis + <span class="hljs-string">" ms"</span>);
    
    executor.shutdown();
}
</code></pre>
<p>æ‰§è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Result</span> = ProductDetailDTO{productId=<span class="hljs-string">'P123'</span>, name=<span class="hljs-string">'MacBook Pro 14'</span>, priceInCents=<span class="hljs-number">149900</span>, quantity=<span class="hljs-number">42</span>}
<span class="hljs-attr">Cost</span>   = <span class="hljs-number">85</span> ms
</code></pre>
<hr/>
<h2 data-id="heading-10">å››ã€æ‰§è¡Œæµç¨‹</h2>
<h3 data-id="heading-11">æ—¶åºå›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant C as Controller
    participant F as ProductFacade
    participant E as çº¿ç¨‹æ± 
    participant PS as ProductService
    participant IS as InventoryService
    
    C-&gt;&gt;F: getProductDetail(&amp;#34;P123&amp;#34;)
    F-&gt;&gt;E: submit(æŸ¥å•†å“)
    F-&gt;&gt;E: submit(æŸ¥åº“å­˜)
    
    par å¹¶è¡Œæ‰§è¡Œ
        E-&gt;&gt;PS: getProduct(&amp;#34;P123&amp;#34;)
        PS--&gt;&gt;E: Product(80ms)
    and
        E-&gt;&gt;IS: getInventory(&amp;#34;P123&amp;#34;)
        IS--&gt;&gt;E: Inventory(60ms)
    end
    
    E-&gt;&gt;F: ä¸¤ä¸ªç»“æœéƒ½å®Œæˆ
    F-&gt;&gt;F: ç»„è£… ProductDetailDTO
    F--&gt;&gt;C: è¿”å›ç»“æœ(~85ms)
</code></pre>
<h3 data-id="heading-12">Fan-Out / Fan-In æ¨¡å¼</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è¯·æ±‚] --&gt; B[Fan-Out]
    B --&gt; C[ä»»åŠ¡1]
    B --&gt; D[ä»»åŠ¡2]
    C --&gt; E[Fan-In]
    D --&gt; E
    E --&gt; F[ç»“æœ]
    
    style B fill:#e1f5ff
    style E fill:#fff4e1
</code></pre>
<p>è¿™æ˜¯å¹¶å‘ç¼–ç¨‹çš„ç»å…¸æ¨¡å¼ï¼š</p>
<ul>
<li><strong>Fan-Out</strong>ï¼šå°†ä¸€ä¸ªä»»åŠ¡æ‹†åˆ†æˆå¤šä¸ªå¹¶è¡Œå­ä»»åŠ¡</li>
<li><strong>Fan-In</strong>ï¼šç­‰å¾…æ‰€æœ‰å­ä»»åŠ¡å®Œæˆåæ±‡æ€»ç»“æœ</li>
</ul>
<hr/>
<h2 data-id="heading-13">äº”ã€ä¸ Elasticsearch çš„å¯¹æ¯”</h2>
<h3 data-id="heading-14">ES çš„åœºæ™¯ï¼šå¤šç´¢å¼•å¹¶è¡ŒæŸ¥è¯¢</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æœç´¢è¯·æ±‚] --&gt; B[logs-2024-01]
    A --&gt; C[logs-2024-02]
    A --&gt; D[logs-2024-03]
    B --&gt; E[åˆå¹¶æ’åº]
    C --&gt; E
    D --&gt; E
    E --&gt; F[Top 10]
</code></pre>
<h3 data-id="heading-15">ç”µå•†åœºæ™¯ï¼šå¤šæœåŠ¡å¹¶è¡ŒæŸ¥è¯¢</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è¯¦æƒ…è¯·æ±‚] --&gt; B[å•†å“æœåŠ¡]
    A --&gt; C[åº“å­˜æœåŠ¡]
    B --&gt; D[ç®€å•ç»„è£…]
    C --&gt; D
    D --&gt; E[è¿”å›DTO]
</code></pre>
<h3 data-id="heading-16">å…±åŒç‚¹</h3>






























<table><thead><tr><th>ç»´åº¦</th><th>Elasticsearch</th><th>ç”µå•†å•†å“è¯¦æƒ…</th></tr></thead><tbody><tr><td>æ¨¡å¼</td><td>Fan-Out / Fan-In</td><td>Fan-Out / Fan-In</td></tr><tr><td>å¹¶è¡Œç›®æ ‡</td><td>å¤šä¸ªç´¢å¼•/åˆ†ç‰‡</td><td>å¤šä¸ªå¾®æœåŠ¡</td></tr><tr><td>æ±‡æ€»æ–¹å¼</td><td>åˆå¹¶æ’åº</td><td>ç®€å•ç»„è£…</td></tr><tr><td>æ ¸å¿ƒè¯‰æ±‚</td><td>æ­£ç¡®æ€§ + æ€§èƒ½</td><td>å“åº”æ—¶é—´</td></tr></tbody></table>
<p>è™½ç„¶åœºæ™¯ä¸åŒï¼Œä½†åº•å±‚æ€æƒ³ä¸€è‡´ï¼š</p>
<ol>
<li><strong>åˆ†è§£</strong>ï¼šæŠŠå¤§ä»»åŠ¡æ‹†æˆå¤šä¸ªç‹¬ç«‹å°ä»»åŠ¡</li>
<li><strong>å¹¶è¡Œ</strong>ï¼šåˆ©ç”¨çº¿ç¨‹æ± åŒæ—¶æ‰§è¡Œ</li>
<li><strong>æ±‡æ€»</strong>ï¼šç­‰å¾…å…¨éƒ¨å®Œæˆåç»„è£…ç»“æœ</li>
</ol>
<hr/>
<h2 data-id="heading-17">å…­ã€æ›´å¤šåº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-18">è®¢å•è¯¦æƒ…é¡µ</h3>
<pre><code class="hljs language-java" lang="java">ListenableFuture&lt;Order&gt; orderFuture = getOrder(orderId);
ListenableFuture&lt;User&gt; userFuture = getUser(userId);
ListenableFuture&lt;List&lt;OrderItem&gt;&gt; itemsFuture = getOrderItems(orderId);
ListenableFuture&lt;Logistics&gt; logisticsFuture = getLogistics(orderId);

<span class="hljs-keyword">return</span> Futures.whenAllSucceed(orderFuture, userFuture, itemsFuture, logisticsFuture)
    .call(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderDetailDTO</span>(...), executor);
</code></pre>
<h3 data-id="heading-19">ç”¨æˆ·ä¸ªäººä¸­å¿ƒ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¹¶è¡ŒæŸ¥è¯¢ï¼šç”¨æˆ·ä¿¡æ¯ã€è®¢å•ç»Ÿè®¡ã€ä¼˜æƒ åˆ¸ã€ç§¯åˆ†</span>
ListenableFuture&lt;UserInfo&gt; userFuture = getUserInfo(userId);
ListenableFuture&lt;OrderStats&gt; statsFuture = getOrderStats(userId);
ListenableFuture&lt;List&lt;Coupon&gt;&gt; couponFuture = getCoupons(userId);
ListenableFuture&lt;Points&gt; pointsFuture = getPoints(userId);

<span class="hljs-keyword">return</span> Futures.whenAllSucceed(userFuture, statsFuture, couponFuture, pointsFuture)
    .call(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserCenterVO</span>(...), executor);
</code></pre>
<h3 data-id="heading-20">æ•°æ®æŠ¥è¡¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¹¶è¡ŒæŸ¥è¯¢ï¼šé”€å”®æ•°æ®ã€ç”¨æˆ·æ•°æ®ã€åº“å­˜æ•°æ®</span>
ListenableFuture&lt;SalesData&gt; salesFuture = getSalesData(startDate, endDate);
ListenableFuture&lt;UserData&gt; userDataFuture = getUserData(startDate, endDate);
ListenableFuture&lt;InventoryData&gt; inventoryFuture = getInventoryData();

<span class="hljs-keyword">return</span> Futures.whenAllSucceed(salesFuture, userDataFuture, inventoryFuture)
    .call(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReportVO</span>(...), executor);
</code></pre>
<hr/>
<h2 data-id="heading-21">ä¸ƒã€å¼‚å¸¸å¤„ç†ä¸é™çº§</h2>
<h3 data-id="heading-22">å•ä¸ªæœåŠ¡é™çº§</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ Futures.catching å¤„ç†å¼‚å¸¸</span>
ListenableFuture&lt;Product&gt; productWithFallback = Futures.catching(
    productFuture,
    Exception.class,
    ex -&gt; {
        log.error(<span class="hljs-string">"æŸ¥è¯¢å•†å“å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼"</span>, ex);
        <span class="hljs-keyword">return</span> getDefaultProduct(productId);
    },
    executor
);
</code></pre>
<h3 data-id="heading-23">è¶…æ—¶æ§åˆ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ Futures.withTimeout æ·»åŠ è¶…æ—¶</span>
ListenableFuture&lt;Product&gt; productFuture = Futures.withTimeout(
    executor.submit(() -&gt; productService.getProduct(id)),
    <span class="hljs-number">2</span>, TimeUnit.SECONDS,
    scheduledExecutor  <span class="hljs-comment">// éœ€è¦ä¸€ä¸ª ScheduledExecutorService</span>
);
</code></pre>
<h3 data-id="heading-24">éƒ¨åˆ†å¤±è´¥å…è®¸</h3>
<p>å¦‚æœå…è®¸éƒ¨åˆ†æŸ¥è¯¢å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨ <code>Futures.successfulAsList()</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å³ä½¿éƒ¨åˆ†å¤±è´¥ï¼Œä¹Ÿè¿”å›æˆåŠŸçš„ç»“æœï¼ˆå¤±è´¥çš„ä¸º nullï¼‰</span>
ListenableFuture&lt;List&lt;Object&gt;&gt; results = Futures.successfulAsList(
    productFuture, 
    inventoryFuture
);

<span class="hljs-keyword">return</span> Futures.transform(results, list -&gt; {
    <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> (Product) list.get(<span class="hljs-number">0</span>);
    <span class="hljs-type">Inventory</span> <span class="hljs-variable">inventory</span> <span class="hljs-operator">=</span> (Inventory) list.get(<span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// å¤„ç†å¯èƒ½ä¸º null çš„æƒ…å†µ</span>
    <span class="hljs-keyword">if</span> (product == <span class="hljs-literal">null</span>) product = getDefaultProduct();
    <span class="hljs-keyword">if</span> (inventory == <span class="hljs-literal">null</span>) inventory = getDefaultInventory();
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProductDetailDTO</span>(...);
}, executor);
</code></pre>
<hr/>
<h2 data-id="heading-25">å…«ã€ç”Ÿäº§ç¯å¢ƒé…ç½®å»ºè®®</h2>
<h3 data-id="heading-26">çº¿ç¨‹æ± é…ç½®</h3>
<p>åŸºäº ES çš„ç»éªŒï¼ˆè¯¦è§æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ï¼‰ï¼Œæ¨èé…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span> <span class="hljs-variable">processors</span> <span class="hljs-operator">=</span> Runtime.getRuntime().availableProcessors();

<span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">threadPool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
    processors,                          <span class="hljs-comment">// æ ¸å¿ƒçº¿ç¨‹æ•° = CPU æ ¸å¿ƒæ•°</span>
    processors * <span class="hljs-number">2</span>,                      <span class="hljs-comment">// æœ€å¤§çº¿ç¨‹æ•°ï¼ˆIO å¯†é›†å‹ï¼‰</span>
    <span class="hljs-number">60</span>, TimeUnit.SECONDS,
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="hljs-number">256</span> * processors * <span class="hljs-number">2</span>),  <span class="hljs-comment">// æœ‰ç†è®ºä¾æ®çš„é˜Ÿåˆ—å¤§å°</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadFactoryBuilder</span>()
        .setNameFormat(<span class="hljs-string">"ProductQuery-%d"</span>)  <span class="hljs-comment">// çº¿ç¨‹å‘½å</span>
        .build(),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy()  <span class="hljs-comment">// ä¸šåŠ¡ç³»ç»Ÿç”¨é™çº§ç­–ç•¥</span>
);

<span class="hljs-type">ListeningExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> MoreExecutors.listeningDecorator(threadPool);
</code></pre>
<h3 data-id="heading-27">Spring Bean é…ç½®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExecutorConfig</span> {
    
    <span class="hljs-meta">@Bean("productQueryExecutor")</span>
    <span class="hljs-keyword">public</span> ListeningExecutorService <span class="hljs-title function_">productQueryExecutor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">processors</span> <span class="hljs-operator">=</span> Runtime.getRuntime().availableProcessors();
        
        <span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">threadPool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
            processors,
            processors * <span class="hljs-number">2</span>,
            <span class="hljs-number">60</span>, TimeUnit.SECONDS,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="hljs-number">256</span> * processors * <span class="hljs-number">2</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadFactoryBuilder</span>()
                .setNameFormat(<span class="hljs-string">"ProductQuery-%d"</span>)
                .build(),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy()
        );
        
        <span class="hljs-keyword">return</span> MoreExecutors.listeningDecorator(threadPool);
    }
}
</code></pre>
<h3 data-id="heading-28">ç›‘æ§æŒ‡æ ‡</h3>
<p>å…³é”®ç›‘æ§ç‚¹ï¼š</p>
<ul>
<li><strong>æ´»è·ƒçº¿ç¨‹æ•°</strong>ï¼šå½“å‰æ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹æ•°</li>
<li><strong>é˜Ÿåˆ—å¤§å°</strong>ï¼šç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡æ•°</li>
<li><strong>æ‹’ç»æ¬¡æ•°</strong>ï¼šçº¿ç¨‹æ± æ»¡äº†è¢«æ‹’ç»çš„ä»»åŠ¡æ•°</li>
<li><strong>å¹³å‡æ‰§è¡Œæ—¶é—´</strong>ï¼šä»»åŠ¡çš„å¹³å‡è€—æ—¶</li>
</ul>
<p>å‘Šè­¦é˜ˆå€¼ï¼š</p>
<ul>
<li>é˜Ÿåˆ—å †ç§¯ &gt; æœ€å¤§çº¿ç¨‹æ•° Ã— 100ï¼šå¯èƒ½æœ‰æ…¢æŸ¥è¯¢</li>
<li>æ‹’ç»æ¬¡æ•°çªå¢ï¼šæµé‡è¶…è¿‡å¤„ç†èƒ½åŠ›</li>
<li>æ´»è·ƒçº¿ç¨‹æ•°é•¿æœŸ = æœ€å¤§çº¿ç¨‹æ•°ï¼šéœ€è¦æ‰©å®¹</li>
</ul>
<hr/>
<h2 data-id="heading-29">ä¹ã€ä½•æ—¶ä½¿ç”¨å¹¶å‘</h2>
<h3 data-id="heading-30">é€‚åˆçš„åœºæ™¯</h3>
<ol>
<li><strong>å¤šä¸ªç‹¬ç«‹çš„ IO æ“ä½œ</strong>ï¼šæŸ¥è¯¢å¤šä¸ªæ•°æ®è¡¨ã€è°ƒç”¨å¤šä¸ªå¤–éƒ¨ API</li>
<li><strong>æ“ä½œä¹‹é—´æ— ä¾èµ–</strong>ï¼šæŸ¥å•†å“å’ŒæŸ¥è¯„è®ºæ²¡æœ‰å…ˆåé¡ºåº</li>
<li><strong>å¯¹å“åº”æ—¶é—´æ•æ„Ÿ</strong>ï¼šç”¨æˆ·ç­‰å¾…çš„æ¥å£</li>
</ol>
<h3 data-id="heading-31">ä¸é€‚åˆçš„åœºæ™¯</h3>
<ol>
<li><strong>æœ‰ä¾èµ–å…³ç³»çš„æ“ä½œ</strong>ï¼šç¬¬äºŒæ­¥ä¾èµ–ç¬¬ä¸€æ­¥çš„ç»“æœï¼ˆåº”è¯¥ç”¨ <code>transformAsync</code>ï¼‰</li>
<li><strong>éœ€è¦äº‹åŠ¡ä¸€è‡´æ€§</strong>ï¼šæ‰£åº“å­˜å’Œåˆ›å»ºè®¢å•å¿…é¡»åœ¨åŒä¸€äº‹åŠ¡</li>
<li><strong>çº¯ CPU å¯†é›†è®¡ç®—</strong>ï¼šåº”è¯¥ç”¨ <code>ParallelStream</code> æˆ– <code>ForkJoinPool</code></li>
<li><strong>éœ€è¦æ¶ˆæ¯å¯é æ€§ä¿è¯</strong>ï¼šç”¨ MQï¼ˆRabbitMQã€RocketMQï¼‰</li>
</ol>
<hr/>
<h2 data-id="heading-32">åã€æ€»ç»“</h2>
<h3 data-id="heading-33">æ ¸å¿ƒæ”¶è·</h3>
<ol>
<li>
<p><strong>Guava ListenableFuture æ¯” CompletableFuture æ›´æ¸…æ™°</strong></p>
<ul>
<li><code>whenAllSucceed</code> è¯­ä¹‰æ˜ç¡®</li>
<li><code>getDone</code> ç±»å‹å®‰å…¨</li>
<li>èŒè´£åˆ†ç¦»ï¼Œä»£ç å¯è¯»æ€§å¼º</li>
</ul>
</li>
<li>
<p><strong>Fan-Out / Fan-In æ˜¯é€šç”¨æ¨¡å¼</strong></p>
<ul>
<li>ES ç”¨äºå¤šç´¢å¼•æŸ¥è¯¢</li>
<li>ä¸šåŠ¡ç³»ç»Ÿç”¨äºå¤šæœåŠ¡èšåˆ</li>
<li>åº•å±‚æ€æƒ³ä¸€è‡´</li>
</ul>
</li>
<li>
<p><strong>çº¿ç¨‹æ± é…ç½®æœ‰ç†è®ºä¾æ®</strong></p>
<ul>
<li>æ ¸å¿ƒçº¿ç¨‹æ•° = CPU æ ¸å¿ƒæ•°</li>
<li>æœ€å¤§çº¿ç¨‹æ•° = CPU æ ¸å¿ƒæ•° Ã— 2ï¼ˆIO å¯†é›†å‹ï¼‰</li>
<li>é˜Ÿåˆ—å¤§å° = 256 Ã— æœ€å¤§çº¿ç¨‹æ•°</li>
</ul>
</li>
</ol>
<h3 data-id="heading-34">å®è·µå»ºè®®</h3>
<ol>
<li><strong>ä»ç®€å•åœºæ™¯å¼€å§‹</strong>ï¼šå…ˆç”¨åœ¨å•†å“è¯¦æƒ…è¿™ç±»å…¸å‹åœºæ™¯</li>
<li><strong>åŠ å¼ºç›‘æ§</strong>ï¼šå…³æ³¨çº¿ç¨‹æ± çŠ¶æ€å’Œä»»åŠ¡æ‰§è¡Œæ—¶é—´</li>
<li><strong>åšå¥½é™çº§</strong>ï¼šè€ƒè™‘å¼‚å¸¸å’Œè¶…æ—¶æƒ…å†µ</li>
<li><strong>å‹æµ‹éªŒè¯</strong>ï¼šç”¨çœŸå®æµé‡éªŒè¯é…ç½®åˆç†æ€§</li>
</ol>
<p>è¿™å¥—æ¨¡å¼å¯ä»¥ä½œä¸ºä½ ä»¥åæ‰€æœ‰"å¤šæœåŠ¡å¹¶è¡ŒæŸ¥è¯¢ + èšåˆè¿”å›"åœºæ™¯çš„æ¨¡æ¿ï¼šä»£ç æ¸…æ™°ã€æ€è·¯ç®€å•ã€è¶³å¤Ÿè´´è¿‘çœŸå®ä¸šåŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Laravel Workflow ä½œä¸º MCP å·¥å…·æä¾›ç»™ AI å®¢æˆ·ç«¯]]></title>    <link>https://juejin.cn/post/7586500093844733994</link>    <guid>https://juejin.cn/post/7586500093844733994</guid>    <pubDate>2025-12-23T01:02:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586500093844733994" data-draft-id="7586555198115348486" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Laravel Workflow ä½œä¸º MCP å·¥å…·æä¾›ç»™ AI å®¢æˆ·ç«¯"/> <meta itemprop="keywords" content="Laravel,PHP,åç«¯"/> <meta itemprop="datePublished" content="2025-12-23T01:02:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Laravel Workflow ä½œä¸º MCP å·¥å…·æä¾›ç»™ AI å®¢æˆ·ç«¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T01:02:52.000Z" title="Tue Dec 23 2025 01:02:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="arduino-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff}.hljs-subst,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#434f54}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-name,.hljs-selector-tag{color:#00979d}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-literal{color:#d35400}.hljs-link,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#00979d}.hljs-deletion,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#005c5f}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-comment{color:rgba(149,165,166,.8)}.hljs-meta-keyword{color:#728e00}.hljs-meta{color:#434f54}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-function{color:#728e00}.hljs-number{color:#8a7b52}</style><h2 data-id="heading-0">ä½¿ç”¨ Laravel Workflow ä½œä¸º MCP å·¥å…·æä¾›ç»™ AI å®¢æˆ·ç«¯</h2>
<p><code>Model Context Protocol</code> (MCP) æ­£åœ¨è¿…é€Ÿæˆä¸º AI åŠ©æ‰‹(å¦‚ Claudeã€ChatGPT å’Œ GitHub Copilot)ä¸å¤–éƒ¨å·¥å…·å’ŒæœåŠ¡äº¤äº’çš„æ ‡å‡†æ–¹å¼ã€‚é€šè¿‡ Laravel MCP,ä½ å¯ä»¥å°† Laravel Workflow æµç¨‹æš´éœ²ä¸ºå¯è°ƒç”¨çš„å·¥å…·,ä»»ä½•å…¼å®¹ MCP çš„ AI å®¢æˆ·ç«¯éƒ½å¯ä»¥å‘ç°ã€è°ƒç”¨å’Œç›‘æ§è¿™äº›å·¥å…·ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­,æˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•æ„å»ºä¸€ä¸ª MCP æœåŠ¡å™¨,ä½¿ AI å®¢æˆ·ç«¯èƒ½å¤Ÿ:</p>
<ul>
<li>å‘ç°å¯ç”¨çš„å·¥ä½œæµ</li>
<li>å¼‚æ­¥å¯åŠ¨å·¥ä½œæµ</li>
<li>è½®è¯¢çŠ¶æ€å¹¶æ£€ç´¢ç»“æœ</li>
</ul>
<p>è¿™åˆ›å»ºäº†ä¸€ä¸ªå¼ºå¤§çš„æ¨¡å¼,AI ä»£ç†å¯ä»¥ç¼–æ’é•¿æ—¶é—´è¿è¡Œçš„æŒä¹…åŒ–å·¥ä½œæµ,éå¸¸é€‚åˆæ— æ³•åœ¨å•ä¸ªè¯·æ±‚ä¸­å®Œæˆçš„å¤æ‚ä»»åŠ¡ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2025-12%2Flaravel-workflows-mcp-tools-ai-clients" target="_blank" title="https://catchadmin.com/post/2025-12/laravel-workflows-mcp-tools-ai-clients" ref="nofollow noopener noreferrer">åŸæ–‡é“¾æ¥ ä½¿ç”¨ Laravel Workflow ä½œä¸º MCP å·¥å…·æä¾›ç»™ AI å®¢æˆ·ç«¯</a></p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰æ‹© MCP + Laravel Workflow?</h3>
<p>Laravel Workflow æ“…é•¿æŒä¹…åŒ–ã€æœ‰çŠ¶æ€çš„æ‰§è¡Œã€‚MCP æ“…é•¿ä¸º AI å®¢æˆ·ç«¯æä¾›å¯¹å¤–éƒ¨èƒ½åŠ›çš„ç»“æ„åŒ–è®¿é—®ã€‚ä¸¤è€…ç»“åˆå¯ä»¥å®ç°:</p>
<ul>
<li><strong>å¼‚æ­¥ AI æ“ä½œ</strong>:å¯åŠ¨å·¥ä½œæµ,ç»§ç»­å¯¹è¯,ç¨åæ£€æŸ¥ç»“æœ</li>
<li><strong>å¯é æ‰§è¡Œ</strong>:å·¥ä½œæµå¯ä»¥åœ¨å´©æºƒã€é‡è¯•å’Œé•¿æ—¶é—´ç­‰å¾…ä¸­å­˜æ´»</li>
<li><strong>å¯è§‚å¯Ÿæ€§</strong>:é€šè¿‡ Waterline çš„ä»ªè¡¨æ¿è·Ÿè¸ªæ¯ä¸ªå·¥ä½œæµ</li>
<li><strong>æ— çŠ¶æ€æœåŠ¡å™¨</strong>:MCP æœåŠ¡å™¨ä¸ä¿å­˜çŠ¶æ€ã€‚å®¢æˆ·ç«¯è·Ÿè¸ªå·¥ä½œæµ ID</li>
</ul>
<p>è¿™ç±»ä¼¼äºäººç±»å§”æ´¾ä»»åŠ¡çš„æ–¹å¼:"å¼€å§‹è¿™ä¸ªæŠ¥å‘Š,æˆ‘ç¨åå†æ£€æŸ¥ã€‚"</p>
<h3 data-id="heading-2">æˆ‘ä»¬è¦æ„å»ºä»€ä¹ˆ</h3>
<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå·¥å…·çš„ MCP æœåŠ¡å™¨:</p>





















<table><thead><tr><th>å·¥å…·</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>list_workflows</td><td>å‘ç°å¯ç”¨çš„å·¥ä½œæµå¹¶æŸ¥çœ‹æœ€è¿‘çš„è¿è¡Œè®°å½•</td></tr><tr><td>start_workflow</td><td>å¯åŠ¨å·¥ä½œæµå¹¶è·å–è·Ÿè¸ª ID</td></tr><tr><td>get_workflow_result</td><td>æ£€æŸ¥çŠ¶æ€å¹¶åœ¨å®Œæˆæ—¶æ£€ç´¢è¾“å‡º</td></tr></tbody></table>
<h3 data-id="heading-3">åˆ†æ­¥å®ç°</h3>
<h4 data-id="heading-4">å®‰è£… Laravel MCP</h4>
<pre><code class="hljs language-bash" lang="bash">composer require laravel/mcp
php artisan vendor:publish --tag=ai-routes
</code></pre>
<p>è¿™ä¼šä¸ºä½ æä¾› <code>routes/ai.php</code>,ä½ å°†åœ¨å…¶ä¸­æ³¨å†Œ MCP æœåŠ¡å™¨ã€‚</p>
<h4 data-id="heading-5">åˆ›å»º MCP æœåŠ¡å™¨</h4>
<pre><code class="hljs language-bash" lang="bash">php artisan make:mcp-server WorkflowServer
</code></pre>
<p>ä¸º AI é…ç½®è¯´æ˜:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Mcp</span>\<span class="hljs-title class_">Servers</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Tools</span>\<span class="hljs-title">GetWorkflowResultTool</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Tools</span>\<span class="hljs-title">ListWorkflowsTool</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Tools</span>\<span class="hljs-title">StartWorkflowTool</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laravel</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Server</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WorkflowServer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Server</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$name</span> = <span class="hljs-string">'Laravel Workflow Server'</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$version</span> = <span class="hljs-string">'1.0.0'</span>;

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$instructions</span> = &lt;&lt;&lt;<span class="hljs-string">'MARKDOWN'</span>
        This server allows you to start <span class="hljs-keyword">and</span> monitor Laravel Workflows.

        <span class="hljs-comment">## Typical Usage Pattern</span>

        <span class="hljs-number">1</span>. Call `list_workflows` to see what workflows are available.
        <span class="hljs-number">2</span>. Call `start_workflow` with the workflow name <span class="hljs-keyword">and</span> arguments.
        <span class="hljs-number">3</span>. Store the returned `workflow_id`.
        <span class="hljs-number">4</span>. Call `get_workflow_result` until status is `WorkflowCompletedStatus`.
        <span class="hljs-number">5</span>. Read the `output` field <span class="hljs-keyword">for</span> the result.

        <span class="hljs-comment">## Status Values</span>

        - `WorkflowCreatedStatus` - Workflow has been created
        - `WorkflowPendingStatus` - Queued <span class="hljs-keyword">for</span> execution
        - `WorkflowRunningStatus` - Currently executing
        - `WorkflowWaitingStatus` - <span class="hljs-title function_ invoke__">Waiting</span> (timer, signal, etc.)
        - `WorkflowCompletedStatus` - Finished successfully
        - `WorkflowFailedStatus` - Encountered an error
    MARKDOWN;

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">array</span> <span class="hljs-variable">$tools</span> = [
        <span class="hljs-title class_">ListWorkflowsTool</span>::<span class="hljs-variable language_">class</span>,
        <span class="hljs-title class_">StartWorkflowTool</span>::<span class="hljs-variable language_">class</span>,
        <span class="hljs-title class_">GetWorkflowResultTool</span>::<span class="hljs-variable language_">class</span>,
    ];
}
</code></pre>
<h4 data-id="heading-6">åˆ›å»ºå¯åŠ¨å·¥ä½œæµå·¥å…·</h4>
<pre><code class="hljs language-bash" lang="bash">php artisan make:mcp-tool StartWorkflowTool
</code></pre>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Mcp</span>\<span class="hljs-title class_">Tools</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Contracts</span>\<span class="hljs-title">JsonSchema</span>\<span class="hljs-title">JsonSchema</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Arr</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laravel</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Request</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laravel</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Response</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laravel</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Server</span>\<span class="hljs-title">Tool</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Workflow</span>\<span class="hljs-title">Workflow</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Workflow</span>\<span class="hljs-title">WorkflowStub</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StartWorkflowTool</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tool</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$description</span> = &lt;&lt;&lt;<span class="hljs-string">'MARKDOWN'</span>
        Start a Laravel Workflow asynchronously <span class="hljs-keyword">and</span> <span class="hljs-keyword">return</span> its workflow ID.
        
        The workflow will execute in the background on the queue. Use the
        `get_workflow_result` tool to poll <span class="hljs-keyword">for</span> status <span class="hljs-keyword">and</span> retrieve results
        once the workflow completes.
    MARKDOWN;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handle</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>): <span class="hljs-title">Response</span>
    </span>{
        <span class="hljs-variable">$data</span> = <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">validate</span>([
            <span class="hljs-string">'workflow'</span> =&gt; [<span class="hljs-string">'required'</span>, <span class="hljs-string">'string'</span>],
            <span class="hljs-string">'args'</span> =&gt; [<span class="hljs-string">'nullable'</span>, <span class="hljs-string">'array'</span>],
            <span class="hljs-string">'external_id'</span> =&gt; [<span class="hljs-string">'nullable'</span>, <span class="hljs-string">'string'</span>, <span class="hljs-string">'max:255'</span>],
        ]);

        <span class="hljs-variable">$workflowKey</span> = <span class="hljs-variable">$data</span>[<span class="hljs-string">'workflow'</span>];
        <span class="hljs-variable">$args</span> = <span class="hljs-title class_">Arr</span>::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-variable">$data</span>, <span class="hljs-string">'args'</span>, []);
        <span class="hljs-variable">$externalId</span> = <span class="hljs-variable">$data</span>[<span class="hljs-string">'external_id'</span>] ?? <span class="hljs-literal">null</span>;

        <span class="hljs-variable">$workflowClass</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">resolveWorkflowClass</span>(<span class="hljs-variable">$workflowKey</span>);

        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$workflowClass</span> === <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>::<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-string">"Unknown workflow: <span class="hljs-subst">{$workflowKey}</span>"</span>);
        }

        <span class="hljs-keyword">if</span> (! <span class="hljs-title function_ invoke__">class_exists</span>(<span class="hljs-variable">$workflowClass</span>) || ! <span class="hljs-title function_ invoke__">is_subclass_of</span>(<span class="hljs-variable">$workflowClass</span>, <span class="hljs-title class_">Workflow</span>::<span class="hljs-variable language_">class</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>::<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-string">"Invalid workflow class: <span class="hljs-subst">{$workflowClass}</span>"</span>);
        }

        <span class="hljs-variable">$stub</span> = <span class="hljs-title class_">WorkflowStub</span>::<span class="hljs-title function_ invoke__">make</span>(<span class="hljs-variable">$workflowClass</span>);
        <span class="hljs-variable">$stub</span>-&gt;<span class="hljs-title function_ invoke__">start</span>(...<span class="hljs-title function_ invoke__">array_values</span>(<span class="hljs-variable">$args</span>));

        <span class="hljs-variable">$status</span> = <span class="hljs-variable">$stub</span>-&gt;<span class="hljs-title function_ invoke__">status</span>();
        <span class="hljs-variable">$statusName</span> = <span class="hljs-title function_ invoke__">is_object</span>(<span class="hljs-variable">$status</span>) ? <span class="hljs-title function_ invoke__">class_basename</span>(<span class="hljs-variable">$status</span>) : <span class="hljs-title function_ invoke__">class_basename</span>((<span class="hljs-keyword">string</span>) <span class="hljs-variable">$status</span>);

        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>::<span class="hljs-title function_ invoke__">json</span>([
            <span class="hljs-string">'workflow_id'</span> =&gt; <span class="hljs-variable">$stub</span>-&gt;<span class="hljs-title function_ invoke__">id</span>(),
            <span class="hljs-string">'workflow'</span> =&gt; <span class="hljs-variable">$workflowKey</span>,
            <span class="hljs-string">'status'</span> =&gt; <span class="hljs-variable">$statusName</span>,
            <span class="hljs-string">'external_id'</span> =&gt; <span class="hljs-variable">$externalId</span>,
            <span class="hljs-string">'message'</span> =&gt; <span class="hljs-string">'Workflow started. Use get_workflow_result to poll status.'</span>,
        ]);
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolveWorkflowClass</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$key</span></span>): ?<span class="hljs-title">string</span>
    </span>{
        <span class="hljs-variable">$mapped</span> = <span class="hljs-title function_ invoke__">config</span>(<span class="hljs-string">"workflow_mcp.workflows.<span class="hljs-subst">{$key}</span>"</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$mapped</span> !== <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-variable">$mapped</span>;
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">config</span>(<span class="hljs-string">'workflow_mcp.allow_fqcn'</span>, <span class="hljs-literal">false</span>) &amp;&amp; <span class="hljs-title function_ invoke__">str_contains</span>(<span class="hljs-variable">$key</span>, <span class="hljs-string">'\\'</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-variable">$key</span>;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">schema</span>(<span class="hljs-params">JsonSchema <span class="hljs-variable">$schema</span></span>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-variable">$workflows</span> = <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">', '</span>, <span class="hljs-title function_ invoke__">array_keys</span>(<span class="hljs-title function_ invoke__">config</span>(<span class="hljs-string">'workflow_mcp.workflows'</span>, [])));

        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'workflow'</span> =&gt; <span class="hljs-variable">$schema</span>-&gt;<span class="hljs-keyword">string</span>()
                -&gt;<span class="hljs-title function_ invoke__">description</span>(<span class="hljs-string">"The workflow to start. Available: <span class="hljs-subst">{$workflows}</span>"</span>),
            <span class="hljs-string">'args'</span> =&gt; <span class="hljs-variable">$schema</span>-&gt;<span class="hljs-keyword">object</span>()
                -&gt;<span class="hljs-title function_ invoke__">description</span>(<span class="hljs-string">'Arguments for the workflow execute() method.'</span>),
            <span class="hljs-string">'external_id'</span> =&gt; <span class="hljs-variable">$schema</span>-&gt;<span class="hljs-keyword">string</span>()
                -&gt;<span class="hljs-title function_ invoke__">description</span>(<span class="hljs-string">'Optional idempotency key for tracking.'</span>),
        ];
    }
}
</code></pre>
<h4 data-id="heading-7">åˆ›å»ºè·å–ç»“æœå·¥å…·</h4>
<pre><code class="hljs language-bash" lang="bash">php artisan make:mcp-tool GetWorkflowResultTool
</code></pre>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Mcp</span>\<span class="hljs-title class_">Tools</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">StoredWorkflow</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Contracts</span>\<span class="hljs-title">JsonSchema</span>\<span class="hljs-title">JsonSchema</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laravel</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Request</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laravel</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Response</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laravel</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Server</span>\<span class="hljs-title">Tool</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Workflow</span>\<span class="hljs-title">States</span>\<span class="hljs-title">WorkflowCompletedStatus</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Workflow</span>\<span class="hljs-title">States</span>\<span class="hljs-title">WorkflowFailedStatus</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Workflow</span>\<span class="hljs-title">WorkflowStub</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GetWorkflowResultTool</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tool</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$description</span> = &lt;&lt;&lt;<span class="hljs-string">'MARKDOWN'</span>
        Fetch the status <span class="hljs-keyword">and</span>, <span class="hljs-keyword">if</span> completed, the output of a Laravel Workflow.
        
        Use the workflow_id returned by `start_workflow` to check progress.
        Once status is `WorkflowCompletedStatus`, the output field contains the result.
    MARKDOWN;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handle</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>): <span class="hljs-title">Response</span>
    </span>{
        <span class="hljs-variable">$data</span> = <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">validate</span>([
            <span class="hljs-string">'workflow_id'</span> =&gt; [<span class="hljs-string">'required'</span>],
        ]);

        <span class="hljs-variable">$workflowId</span> = <span class="hljs-variable">$data</span>[<span class="hljs-string">'workflow_id'</span>];
        <span class="hljs-variable">$stored</span> = <span class="hljs-title class_">StoredWorkflow</span>::<span class="hljs-title function_ invoke__">find</span>(<span class="hljs-variable">$workflowId</span>);

        <span class="hljs-keyword">if</span> (! <span class="hljs-variable">$stored</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>::<span class="hljs-title function_ invoke__">json</span>([
                <span class="hljs-string">'found'</span> =&gt; <span class="hljs-literal">false</span>,
                <span class="hljs-string">'message'</span> =&gt; <span class="hljs-string">"Workflow <span class="hljs-subst">{$workflowId}</span> not found."</span>,
            ]);
        }

        <span class="hljs-variable">$workflow</span> = <span class="hljs-title class_">WorkflowStub</span>::<span class="hljs-title function_ invoke__">load</span>(<span class="hljs-variable">$workflowId</span>);
        <span class="hljs-variable">$status</span> = <span class="hljs-variable">$workflow</span>-&gt;<span class="hljs-title function_ invoke__">status</span>();
        <span class="hljs-variable">$statusName</span> = <span class="hljs-title function_ invoke__">is_object</span>(<span class="hljs-variable">$status</span>) ? <span class="hljs-title function_ invoke__">class_basename</span>(<span class="hljs-variable">$status</span>) : <span class="hljs-title function_ invoke__">class_basename</span>((<span class="hljs-keyword">string</span>) <span class="hljs-variable">$status</span>);
        <span class="hljs-variable">$running</span> = <span class="hljs-variable">$workflow</span>-&gt;<span class="hljs-title function_ invoke__">running</span>();

        <span class="hljs-variable">$result</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-variable">$error</span> = <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">if</span> (! <span class="hljs-variable">$running</span> &amp;&amp; <span class="hljs-title function_ invoke__">str_contains</span>(<span class="hljs-variable">$statusName</span>, <span class="hljs-string">'Completed'</span>)) {
            <span class="hljs-variable">$result</span> = <span class="hljs-variable">$workflow</span>-&gt;<span class="hljs-title function_ invoke__">output</span>();
        }

        <span class="hljs-keyword">if</span> (! <span class="hljs-variable">$running</span> &amp;&amp; <span class="hljs-title function_ invoke__">str_contains</span>(<span class="hljs-variable">$statusName</span>, <span class="hljs-string">'Failed'</span>)) {
            <span class="hljs-variable">$exception</span> = <span class="hljs-variable">$stored</span>-&gt;<span class="hljs-title function_ invoke__">exceptions</span>()-&gt;<span class="hljs-title function_ invoke__">latest</span>()-&gt;<span class="hljs-title function_ invoke__">first</span>();
            <span class="hljs-variable">$error</span> = <span class="hljs-variable">$exception</span>?-&gt;exception ?? <span class="hljs-string">'Unknown error'</span>;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>::<span class="hljs-title function_ invoke__">json</span>([
            <span class="hljs-string">'found'</span> =&gt; <span class="hljs-literal">true</span>,
            <span class="hljs-string">'workflow_id'</span> =&gt; <span class="hljs-variable">$workflowId</span>,
            <span class="hljs-string">'status'</span> =&gt; <span class="hljs-variable">$statusName</span>,
            <span class="hljs-string">'running'</span> =&gt; <span class="hljs-variable">$running</span>,
            <span class="hljs-string">'output'</span> =&gt; <span class="hljs-variable">$result</span>,
            <span class="hljs-string">'error'</span> =&gt; <span class="hljs-variable">$error</span>,
            <span class="hljs-string">'created_at'</span> =&gt; <span class="hljs-variable">$stored</span>-&gt;created_at?-&gt;<span class="hljs-title function_ invoke__">toIso8601String</span>(),
            <span class="hljs-string">'updated_at'</span> =&gt; <span class="hljs-variable">$stored</span>-&gt;updated_at?-&gt;<span class="hljs-title function_ invoke__">toIso8601String</span>(),
        ]);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">schema</span>(<span class="hljs-params">JsonSchema <span class="hljs-variable">$schema</span></span>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'workflow_id'</span> =&gt; <span class="hljs-variable">$schema</span>-&gt;<span class="hljs-keyword">string</span>()
                -&gt;<span class="hljs-title function_ invoke__">description</span>(<span class="hljs-string">'The workflow ID returned by start_workflow.'</span>),
        ];
    }
}
</code></pre>
<h4 data-id="heading-8">åˆ›å»ºåˆ—è¡¨å·¥ä½œæµå·¥å…·</h4>
<pre><code class="hljs language-bash" lang="bash">php artisan make:mcp-tool ListWorkflowsTool
</code></pre>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Mcp</span>\<span class="hljs-title class_">Tools</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">StoredWorkflow</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Contracts</span>\<span class="hljs-title">JsonSchema</span>\<span class="hljs-title">JsonSchema</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laravel</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Request</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laravel</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Response</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laravel</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Server</span>\<span class="hljs-title">Tool</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListWorkflowsTool</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tool</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$description</span> = &lt;&lt;&lt;<span class="hljs-string">'MARKDOWN'</span>
        List available workflow types <span class="hljs-keyword">and</span> optionally show recent workflow runs.
        
        Use this to discover what workflows can be started, <span class="hljs-keyword">or</span> to see
        the status of recent executions.
    MARKDOWN;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handle</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>): <span class="hljs-title">Response</span>
    </span>{
        <span class="hljs-variable">$data</span> = <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">validate</span>([
            <span class="hljs-string">'show_recent'</span> =&gt; [<span class="hljs-string">'nullable'</span>, <span class="hljs-string">'boolean'</span>],
            <span class="hljs-string">'limit'</span> =&gt; [<span class="hljs-string">'nullable'</span>, <span class="hljs-string">'integer'</span>, <span class="hljs-string">'min:1'</span>, <span class="hljs-string">'max:50'</span>],
            <span class="hljs-string">'status'</span> =&gt; [<span class="hljs-string">'nullable'</span>, <span class="hljs-string">'string'</span>],
        ]);

        <span class="hljs-variable">$showRecent</span> = <span class="hljs-variable">$data</span>[<span class="hljs-string">'show_recent'</span>] ?? <span class="hljs-literal">false</span>;
        <span class="hljs-variable">$limit</span> = <span class="hljs-variable">$data</span>[<span class="hljs-string">'limit'</span>] ?? <span class="hljs-number">10</span>;
        <span class="hljs-variable">$statusFilter</span> = <span class="hljs-variable">$data</span>[<span class="hljs-string">'status'</span>] ?? <span class="hljs-literal">null</span>;

        <span class="hljs-variable">$availableWorkflows</span> = [];
        <span class="hljs-keyword">foreach</span> (<span class="hljs-title function_ invoke__">config</span>(<span class="hljs-string">'workflow_mcp.workflows'</span>, []) <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$class</span>) {
            <span class="hljs-variable">$availableWorkflows</span>[] = [<span class="hljs-string">'key'</span> =&gt; <span class="hljs-variable">$key</span>, <span class="hljs-string">'class'</span> =&gt; <span class="hljs-variable">$class</span>];
        }

        <span class="hljs-variable">$response</span> = [
            <span class="hljs-string">'available_workflows'</span> =&gt; <span class="hljs-variable">$availableWorkflows</span>,
        ];

        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$showRecent</span>) {
            <span class="hljs-variable">$query</span> = <span class="hljs-title class_">StoredWorkflow</span>::<span class="hljs-title function_ invoke__">query</span>()
                -&gt;<span class="hljs-title function_ invoke__">orderBy</span>(<span class="hljs-string">'created_at'</span>, <span class="hljs-string">'desc'</span>)
                -&gt;<span class="hljs-title function_ invoke__">limit</span>(<span class="hljs-variable">$limit</span>);

            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$statusFilter</span>) {
                <span class="hljs-variable">$query</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'status'</span>, <span class="hljs-string">'like'</span>, <span class="hljs-string">"%<span class="hljs-subst">{$statusFilter}</span>%"</span>);
            }

            <span class="hljs-variable">$response</span>[<span class="hljs-string">'recent_workflows'</span>] = <span class="hljs-variable">$query</span>-&gt;<span class="hljs-title function_ invoke__">get</span>()-&gt;<span class="hljs-title function_ invoke__">map</span>(function (<span class="hljs-variable">$w</span>) {
                <span class="hljs-variable">$status</span> = <span class="hljs-variable">$w</span>-&gt;status;
                <span class="hljs-variable">$statusName</span> = <span class="hljs-title function_ invoke__">is_object</span>(<span class="hljs-variable">$status</span>) ? <span class="hljs-title function_ invoke__">class_basename</span>(<span class="hljs-variable">$status</span>) : <span class="hljs-title function_ invoke__">class_basename</span>((<span class="hljs-keyword">string</span>) <span class="hljs-variable">$status</span>);

                <span class="hljs-keyword">return</span> [
                    <span class="hljs-string">'id'</span> =&gt; <span class="hljs-variable">$w</span>-&gt;id,
                    <span class="hljs-string">'class'</span> =&gt; <span class="hljs-variable">$w</span>-&gt;<span class="hljs-class"><span class="hljs-keyword">class</span>,
                    '<span class="hljs-title">status</span>' =&gt; $<span class="hljs-title">statusName</span>,
                    '<span class="hljs-title">created_at</span>' =&gt; $<span class="hljs-title">w</span>-&gt;<span class="hljs-title">created_at</span>?-&gt;<span class="hljs-title">toIso8601String</span>(),
                ];
            });
        }

        <span class="hljs-title">return</span> <span class="hljs-title">Response</span>::<span class="hljs-title">json</span>($<span class="hljs-title">response</span>);
    }

    <span class="hljs-title">public</span> <span class="hljs-title">function</span> <span class="hljs-title">schema</span>(<span class="hljs-title">JsonSchema</span> $<span class="hljs-title">schema</span>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'show_recent'</span> =&gt; <span class="hljs-variable">$schema</span>-&gt;<span class="hljs-keyword">boolean</span>()
                -&gt;<span class="hljs-title function_ invoke__">description</span>(<span class="hljs-string">'Include recent workflow runs in response.'</span>),
            <span class="hljs-string">'limit'</span> =&gt; <span class="hljs-variable">$schema</span>-&gt;<span class="hljs-keyword">integer</span>()
                -&gt;<span class="hljs-title function_ invoke__">description</span>(<span class="hljs-string">'Max recent workflows to return (default: 10).'</span>),
            <span class="hljs-string">'status'</span> =&gt; <span class="hljs-variable">$schema</span>-&gt;<span class="hljs-keyword">string</span>()
                -&gt;<span class="hljs-title function_ invoke__">description</span>(<span class="hljs-string">'Filter by status (e.g., "Completed", "Failed").'</span>),
        ];
    }
}
</code></pre>
<h4 data-id="heading-9">é…ç½®å¯ç”¨çš„å·¥ä½œæµ</h4>
<p>åˆ›å»º <code>config/workflow_mcp.php</code> æ¥å°† AI å®¢æˆ·ç«¯å¯ä»¥å¯åŠ¨çš„å·¥ä½œæµåŠ å…¥ç™½åå•:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">return</span> [
    <span class="hljs-string">'allow_fqcn'</span> =&gt; <span class="hljs-title function_ invoke__">env</span>(<span class="hljs-string">'WORKFLOW_MCP_ALLOW_FQCN'</span>, <span class="hljs-literal">false</span>),

    <span class="hljs-string">'workflows'</span> =&gt; [
        <span class="hljs-string">'simple'</span> =&gt; <span class="hljs-title class_">App\Workflows\Simple\SimpleWorkflow</span>::<span class="hljs-variable language_">class</span>,
        <span class="hljs-string">'prism'</span> =&gt; <span class="hljs-title class_">App\Workflows\Prism\PrismWorkflow</span>::<span class="hljs-variable language_">class</span>,
    ],
];
</code></pre>
<p>è¿™å¯ä»¥é˜²æ­¢ä»»æ„ç±»æ‰§è¡Œã€‚åªæœ‰æ˜ å°„çš„å·¥ä½œæµå¯ä»¥è®¿é—®ã€‚</p>
<h4 data-id="heading-10">æ³¨å†Œ MCP æœåŠ¡å™¨</h4>
<p>æ›´æ–° <code>routes/ai.php</code>:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Servers</span>\<span class="hljs-title">WorkflowServer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laravel</span>\<span class="hljs-title">Mcp</span>\<span class="hljs-title">Facades</span>\<span class="hljs-title">Mcp</span>;

<span class="hljs-title class_">Mcp</span>::<span class="hljs-title function_ invoke__">web</span>(<span class="hljs-string">'/mcp/workflows'</span>, <span class="hljs-title class_">WorkflowServer</span>::<span class="hljs-variable language_">class</span>);
</code></pre>
<h3 data-id="heading-11">è¿æ¥ AI å®¢æˆ·ç«¯</h3>
<h4 data-id="heading-12">VS Code / GitHub Copilot</h4>
<p>åœ¨é¡¹ç›®ä¸­åˆ›å»º <code>.vscode/mcp.json</code>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"servers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"laravel-workflow"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://localhost/mcp/workflows"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ­¤é…ç½®é€‚ç”¨äºæœ¬åœ°å¼€å‘å’Œ GitHub Codespacesã€‚åœ¨ Codespaces ä¸­,VS Code æœåŠ¡å™¨åœ¨å®¹å™¨å†…è¿è¡Œ,å› æ­¤ localhost å¯ä»¥æ­£ç¡®è®¿é—® Laravel æœåŠ¡å™¨,æ— éœ€å…¬å…±ç«¯å£æˆ– <code>*.app.github.dev</code> URLã€‚</p>
<p>é‡æ–°åŠ è½½ VS Code(Cmd/Ctrl+Shift+P â†’ "Developer: Reload Window")å,Copilot å¯ä»¥ç›´æ¥åœ¨èŠå¤©ä¸­ä½¿ç”¨å·¥ä½œæµå·¥å…·ã€‚</p>
<h3 data-id="heading-13">å®é™…ä½¿ç”¨</h3>
<p>è¿æ¥å,ä½ å¯ä»¥ä¸ AI åŠ©æ‰‹è¿›è¡Œè‡ªç„¶å¯¹è¯:</p>
<p><strong>ä½ </strong>:"æœ‰å“ªäº›å·¥ä½œæµå¯ç”¨?"</p>
<p><strong>AI</strong>:è°ƒç”¨ <code>list_workflows</code> "æˆ‘æ‰¾åˆ°äº† 2 ä¸ªå·¥ä½œæµ:simple å’Œ prismã€‚"</p>
<p><strong>ä½ </strong>:"å¯åŠ¨ prism å·¥ä½œæµ"</p>
<p><strong>AI</strong>:è°ƒç”¨ <code>start_workflow</code> "å·²å¯åŠ¨å·¥ä½œæµ ID 42ã€‚æˆ‘ä¼šæ£€æŸ¥å®ƒçš„çŠ¶æ€ã€‚"</p>
<p><strong>AI</strong>:è°ƒç”¨ <code>get_workflow_result</code> "å·¥ä½œæµå·²å®Œæˆ!è¿™æ˜¯ç”Ÿæˆçš„ç”¨æˆ·é…ç½®æ–‡ä»¶:{ name: 'Elena', hobbies: [...] }"</p>
<p>è¿™åˆ›é€ äº†ä¸€ç§æ— ç¼ä½“éªŒ,AI åŠ©æ‰‹å¯ä»¥ç¼–æ’å¤æ‚çš„é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œ,åŒæ—¶è®©ç”¨æˆ·äº†è§£æƒ…å†µã€‚</p>
<h3 data-id="heading-14">è¿™ç§æ¨¡å¼çš„å¼ºå¤§ä¹‹å¤„</h3>
<ul>
<li><strong>æŒä¹…åŒ–</strong>:å·¥ä½œæµå¯ä»¥åœ¨æœåŠ¡å™¨é‡å¯å’Œç½‘ç»œæ•…éšœä¸­å­˜æ´»</li>
<li><strong>å¼‚æ­¥è®¾è®¡</strong>:AI å®¢æˆ·ç«¯ä¸ä¼šé˜»å¡ç­‰å¾…å®Œæˆ</li>
<li><strong>å¯è§‚å¯Ÿ</strong>:æ¯ä¸ªå·¥ä½œæµéƒ½åœ¨ Waterline çš„ä»ªè¡¨æ¿ä¸­è·Ÿè¸ª</li>
<li><strong>å®‰å…¨</strong>:åŸºäºç™½åå•çš„å·¥ä½œæµè®¿é—®é˜²æ­¢ä»»æ„æ‰§è¡Œ</li>
<li><strong>æ— çŠ¶æ€ MCP</strong>:æœåŠ¡å™¨ä¸ä¿å­˜çŠ¶æ€ã€‚å®¢æˆ·ç«¯è·Ÿè¸ªå·¥ä½œæµ ID</li>
</ul>
<h3 data-id="heading-15">åœ¨æµè§ˆå™¨ä¸­ç«‹å³è¯•ç”¨</h3>
<p>æ­¤ MCP é›†æˆå·²åŒ…å«å¹¶é¢„é…ç½®åœ¨ Laravel Workflow Sample App ä¸­ã€‚</p>
<p>è¦è¯•ç”¨:</p>
<ol>
<li>åœ¨ GitHub ä¸Šæ‰“å¼€ sample-app ä»“åº“</li>
<li>ç‚¹å‡» Code â†’ Codespaces â†’ Create codespace on main</li>
<li>ç­‰å¾…ç¯å¢ƒæ„å»º</li>
<li>è®¾ç½®åº”ç”¨å¹¶å¯åŠ¨é˜Ÿåˆ—å·¥ä½œå™¨:</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">php artisan app:init
php artisan queue:work
</code></pre>
<ol start="5">
<li>å¯ç”¨ Laravel Workflow Server MCP å·¥å…·</li>
<li>è®©ä½ çš„ AI åˆ—å‡ºå¹¶è¿è¡Œå·¥ä½œæµ!</li>
</ol>
<h3 data-id="heading-16">æ¥ä¸‹æ¥å¯ä»¥åšä»€ä¹ˆ</h3>
<p>ä½ å¯ä»¥æ‰©å±•æ­¤æ¨¡å¼ä»¥å®ç°:</p>
<ul>
<li><strong>å‚æ•°åŒ–å·¥ä½œæµ</strong>:å°†ç”¨æˆ·è¾“å…¥ä¼ é€’ç»™å·¥ä½œæµå‚æ•°</li>
<li><strong>Webhook é€šçŸ¥</strong>:æ¨é€å®Œæˆäº‹ä»¶è€Œä¸æ˜¯è½®è¯¢</li>
<li><strong>å·¥ä½œæµä¿¡å·</strong>:è®© AI å®¢æˆ·ç«¯å‘ç­‰å¾…çš„å·¥ä½œæµå‘é€ä¿¡å·</li>
<li><strong>è¿›åº¦æµå¼ä¼ è¾“</strong>:ä½¿ç”¨ SSE å®æ—¶æµå¼ä¼ è¾“å·¥ä½œæµè¿›åº¦</li>
<li><strong>å¤šæ­¥éª¤ä»£ç†</strong>:åœ¨å¯¹è¯ä¸­å°†å¤šä¸ªå·¥ä½œæµé“¾æ¥åœ¨ä¸€èµ·</li>
</ul>
<p>Laravel Workflow çš„æŒä¹…åŒ–æ‰§è¡Œä¸ MCP çš„å·¥å…·åè®®ç›¸ç»“åˆ,ä¸ºçœŸæ­£æœ‰èƒ½åŠ›çš„ AI ä»£ç†åˆ›å»ºäº†ä¸€ä¸ªåŸºç¡€,è¿™äº›ä»£ç†å¯ä»¥å¤„ç†ç°å®ä¸–ç•Œçš„å¤æ‚æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº¬ä¸œé‡‘èé¸¿è’™ç«¯éƒ¨ç½²AIè¶…åˆ†æ¨¡å‹å®è·µ]]></title>    <link>https://juejin.cn/post/7586877892467277851</link>    <guid>https://juejin.cn/post/7586877892467277851</guid>    <pubDate>2025-12-23T10:11:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586877892467277851" data-draft-id="7586865729702920230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº¬ä¸œé‡‘èé¸¿è’™ç«¯éƒ¨ç½²AIè¶…åˆ†æ¨¡å‹å®è·µ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-23T10:11:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº¬ä¸œé‡‘èé¸¿è’™ç«¯éƒ¨ç½²AIè¶…åˆ†æ¨¡å‹å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T10:11:17.000Z" title="Tue Dec 23 2025 10:11:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>1. èƒŒæ™¯</strong></h2>
<p><strong>è¿™å¯èƒ½æ˜¯å…¨ç½‘ç¬¬ä¸€ç¯‡å®Œæ•´è®²è§£é¸¿è’™ç«¯ä½¿ç”¨CANNéƒ¨ç½²AIæ¨¡å‹çš„æ–‡ç« , æ»¡æ»¡å¹²è´§ã€‚</strong></p>
<p>ç¤¾åŒºä½œä¸ºç”¨æˆ·äº¤æµã€ä¿¡æ¯ä¼ é€’çš„æ ¸å¿ƒè½½ä½“ï¼Œå›¾ç‰‡å†…å®¹ï¼ˆå¦‚ç†è´¢äº§å“æˆªå›¾ã€æŠ•èµ„ç»éªŒåˆ†äº«é…å›¾ã€ç”¨æˆ·äº’åŠ¨è¯„è®ºå›¾ç‰‡ç­‰ï¼‰çš„å±•ç¤ºè´¨é‡ç›´æ¥å½±å“ç”¨æˆ·çš„ä¿¡æ¯è·å–æ•ˆç‡ä¸å¹³å°ä¿¡ä»»æ„Ÿã€‚ä»äº¬ä¸œé‡‘èAppç¤¾åŒºçš„ä¸šåŠ¡éœ€æ±‚æ¥çœ‹ï¼Œå½“å‰ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡æ™®éå­˜åœ¨å¤šæ ·æ€§å¤±çœŸé—®é¢˜ï¼šéƒ¨åˆ†ç”¨æˆ·é€šè¿‡è€æ—§è®¾å¤‡æ‹æ‘„çš„å›¾ç‰‡åˆ†è¾¨ç‡è¾ƒä½ï¼Œéƒ¨åˆ†ç”¨æˆ·ä¸ºèŠ‚çœæµé‡é€‰æ‹©ä½ç”»è´¨å‹ç¼©ä¸Šä¼ ï¼Œè¿˜æœ‰éƒ¨åˆ†æˆªå›¾ç±»å†…å®¹å› åŸå§‹æ¥æºæ¸…æ™°åº¦ä¸è¶³å¯¼è‡´ä¿¡æ¯æ¨¡ç³Šï¼ˆå¦‚ç†è´¢äº§å“æ”¶ç›Šç‡æ•°å­—ã€åˆåŒæ¡æ¬¾ç»†èŠ‚ç­‰ï¼‰ï¼Œè¿™äº›é—®é¢˜ä¸ä»…é™ä½äº†å†…å®¹å¯è¯»æ€§ï¼Œè¿˜å¯èƒ½å› ä¿¡æ¯ä¼ é€’ä¸æ¸…æ™°å¼•å‘ç”¨æˆ·è¯¯è§£ã€‚</p>
<p>äº¬ä¸œé‡‘èAppå›¢é˜Ÿå·²å®ŒæˆReal-ESRGAN-General-x4v3è¶…åˆ†è¾¨ç‡æ¨¡å‹åœ¨å®‰å“ç«¯çš„éƒ¨ç½²ï¼Œèƒ½å¤Ÿé’ˆå¯¹æ€§æå‡è¯„è®ºåŒºã€å†…å®¹è¯¦æƒ…é¡µã€ä¸ªäººä¸»é¡µç­‰æ ¸å¿ƒåœºæ™¯çš„å›¾ç‰‡æ¸…æ™°åº¦ï¼Œä»è§†è§‰ä½“éªŒå±‚é¢ä¼˜åŒ–ç”¨æˆ·ç•™å­˜ä¸äº’åŠ¨æ„æ„¿ã€‚</p>
<p>ESRGAN-General-x4v3æ¨¡å‹åœ¨å®‰å“ç«¯çš„éƒ¨ç½²ï¼Œé‡‡ç”¨çš„æ˜¯ONNXæ¡†æ¶ï¼Œè¯¥æ–¹æ¡ˆå·²æœ‰å¤§é‡å…¬å¼€èµ„æ–™å¯å‚è€ƒï¼Œä¸”å–å¾—æ˜¾è‘—ä¸šåŠ¡æˆæ•ˆã€‚ä½†é¸¿è’™ç«¯éƒ¨ç½²é¢ä¸´æ ¸å¿ƒæŠ€æœ¯ç“¶é¢ˆï¼šé¸¿è’™ç³»ç»Ÿä¸æ”¯æŒONNXæ¡†æ¶ï¼Œéƒ¨ç½²ç«¯ä¾§AIä»…èƒ½ä½¿ç”¨åä¸ºè‡ªç ”çš„CANNï¼ˆCompute Architecture for Neural Networksï¼‰æ¶æ„ï¼Œä¸”å½“å‰è¡Œä¸šå†…ç¼ºä¹åŸºäºCANNéƒ¨ç½²ç«¯ä¾§AIçš„å…¬å¼€èµ„æ–™ä¸æˆç†Ÿæ–¹æ¡ˆï¼Œå…¨ç¨‹éœ€æŠ€æœ¯å›¢é˜Ÿè‡ªä¸»æ¢ç´¢ã€‚æ¥ä¸‹æ¥æˆ‘ä¼šä»¥ESRGAN-General-x4v3ä¸ºä¾‹, åˆ†äº«ä»æ¨¡å‹è½¬æ¢(NPUäº²å’Œæ€§æ”¹é€ )åˆ°ç«¯ä¾§ç¦»çº¿æ¨¡å‹éƒ¨ç½²çš„å…¨éƒ¨è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-1"><strong>2. éƒ¨ç½²å‰æœŸå‡†å¤‡</strong></h2>
<h3 data-id="heading-2"><strong>2.1 ç¦»çº¿æ¨¡å‹è½¬æ¢</strong></h3>
<p>CANN Kitå½“å‰ä»…æ”¯æŒCaffeã€TensorFlowã€ONNXå’ŒMindSporeæ¨¡å‹è½¬æ¢ä¸ºç¦»çº¿æ¨¡å‹ï¼Œå…¶ä»–æ ¼å¼çš„æ¨¡å‹éœ€è¦å¼€å‘è€…è‡ªè¡Œè½¬æ¢ä¸ºCANN Kitæ”¯æŒçš„æ¨¡å‹æ ¼å¼ã€‚æ¨¡å‹è½¬æ¢ä¸ºOMç¦»çº¿æ¨¡å‹ï¼Œç§»åŠ¨ç«¯AIç¨‹åºç›´æ¥è¯»å–ç¦»çº¿æ¨¡å‹è¿›è¡Œæ¨ç†ã€‚</p>
<h4 data-id="heading-3"><strong>2.1.1 ä¸‹è½½CANNå·¥å…·</strong></h4>
<p>ä»é¸¿è’™å¼€å‘è€…å®˜ç½‘ä¸‹è½½ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcontentcenter-vali-drcn.dbankcdn.cn%2Fpvt_2%2FDeveloperAlliance_package_901_9%2Fc0%2Fv3%2FEvg84kYpQlOkQvRT-Th0tw%2FDDK-tools-next-5.1.1.1.zip%3FHW-CC-KV%3DV1%26HW-CC-Date%3D20251015T082207Z%26HW-CC-Expire%3D315360000%26HW-CC-Sign%3D8D8CE92B39E6A5353B8A43EB6779C1D79C346C40776F2242593CBD751BE87EE4" target="_blank" title="https://contentcenter-vali-drcn.dbankcdn.cn/pvt_2/DeveloperAlliance_package_901_9/c0/v3/Evg84kYpQlOkQvRT-Th0tw/DDK-tools-next-5.1.1.1.zip?HW-CC-KV=V1&amp;HW-CC-Date=20251015T082207Z&amp;HW-CC-Expire=315360000&amp;HW-CC-Sign=8D8CE92B39E6A5353B8A43EB6779C1D79C346C40776F2242593CBD751BE87EE4" ref="nofollow noopener noreferrer">DDK-tools-5.1.1.1 </a>, è§£å‹ä½¿ç”¨Toolsä¸‹çš„OMGå·¥å…·ï¼Œå°†ONNXã€TensorFlowæ¨¡å‹è½¬æ¢ä¸ºOMæ¨¡å‹ã€‚(OMGå·¥å…·ä½äºToolsä¸‹è½½çš„tools/tools_omgä¸‹ï¼Œ<strong>ä»…å¯è¿è¡Œåœ¨64ä½Linuxå¹³å°ä¸Š</strong>ã€‚)</p>
<p>ï»¿</p>
<h4 data-id="heading-4"><strong>2.1.2 ä¸‹è½½ESRGAN-General-x4v3æ¨¡å‹æ–‡ä»¶</strong></h4>
<p>ä»<a href="https://link.juejin.cn?target=https%3A%2F%2Faihub.qualcomm.com%2Fcompute%2Fmodels%2Freal_esrgan_general_x4v3" target="_blank" title="https://aihub.qualcomm.com/compute/models/real_esrgan_general_x4v3" ref="nofollow noopener noreferrer">aihub.qualcomm.com/compute/modâ€¦</a>ä¸‹è½½æ¨¡å‹çš„onnxæ–‡ä»¶.</p>
<p>æ³¨æ„: ä¸‹è½½é“¾æ¥ä¸­çš„a8a8çš„é‡åŒ–æ¨¡å‹ä½¿ç”¨äº†é«˜é€šçš„ç®—å­(äº²æµ‹æ— æ³•è½¬æ¢), CANNå·¥å…·æ— æ³•è¿›è¡Œè½¬æ¢, å› æ­¤è¯·ä¸‹è½½floatçš„é‡åŒ–æ¨¡å‹ã€‚</p>
<p><strong>ä¸‹è½½åæœ‰ä¸¤ä¸ªæ–‡ä»¶:</strong></p>
<p>â€¢model.onnxæ–‡ä»¶ (æ¨¡å‹ç»“æ„): åŒ…å«è®¡ç®—å›¾ã€opsetç‰ˆæœ¬ã€èŠ‚ç‚¹é…ç½®ç­‰ï¼Œæ–‡ä»¶è¾ƒå°ã€‚</p>
<p>â€¢model.dataæ–‡ä»¶ (æƒé‡æ•°æ®): åŒ…å«ç¥ç»ç½‘ç»œå‚æ•°ã€æƒé‡ç­‰ï¼Œæ–‡ä»¶è¾ƒå¤§ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦æŠŠè¿™ç§åˆ†ç¦»æ–‡ä»¶æ ¼å¼çš„æ¨¡å‹åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶,åç»­çš„æ“ä½œéƒ½ä½¿ç”¨è¿™ä¸ªã€‚</p>
<p><strong>åˆå¹¶æ–‡ä»¶:</strong></p>
<p>è¯·ä½¿ç”¨JoyCodeå†™ä¸ªåˆå¹¶è„šæœ¬å³å¯, æç¤ºè¯: è¯·å†™ä¸€ä¸ªè„šæœ¬, æŠŠonnxæ¨¡å‹æ–‡ä»¶çš„.onnxå’Œ.dataæ–‡ä»¶åˆå¹¶ã€‚</p>
<h4 data-id="heading-5"><strong>2.1.3 OMæ¨¡å‹è½¬æ¢</strong></h4>
<p><strong>1. ONNX opset ç‰ˆæœ¬è½¬æ¢</strong></p>
<p>å½“å‰ä½¿ç”¨CANNè¿›è¡Œæ¨¡å‹è½¬æ¢, æ”¯æŒONNX opsetç‰ˆæœ¬7~18ï¼ˆæœ€é«˜æ”¯æŒåˆ°V1.13.1ï¼‰, é¦–å…ˆéœ€è¦æŸ¥çœ‹åŸå§‹çš„onnxæ¨¡å‹çš„opsetç‰ˆæœ¬æ˜¯å¦åœ¨æ”¯æŒèŒƒå›´, è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flutzroeder%2Fnetron%2Ftags" target="_blank" title="https://github.com/lutzroeder/netron/tags" ref="nofollow noopener noreferrer">Netron</a>(ç‚¹å‡»ä¸‹è½½)å¯è§†åŒ–å·¥å…·è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de53c34107d842da95851d71bc1915d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767089477&amp;x-signature=GTZxPGBS3O3%2FeUQCZKdolPJZiyI%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ç›®å‰è¯¥æ¨¡å‹ä½¿ç”¨çš„opsetç‰ˆæœ¬æ˜¯20, å› æ­¤æˆ‘ä»¬éœ€è¦æŠŠè¯¥æ¨¡å‹çš„opsetç‰ˆæœ¬è½¬æˆ18, æ‰å¯ä»¥ç”¨CANNè½¬æ¢æˆé¸¿è’™ä¸Šå¯éƒ¨ç½²çš„æ¨¡å‹ã€‚è¯·ä½¿ç”¨JoyCodeå†™ä¸ªopsetè½¬æ¢è„šæœ¬å³å¯, æç¤ºè¯: è¯·å†™ä¸€ä¸ªè„šæœ¬, æŠŠonnxæ¨¡å‹æ–‡ä»¶çš„opsetç‰ˆæœ¬ä»20è½¬æ¢æˆ18ã€‚</p>
<p>ï»¿</p>
<p><strong>2. OMç¦»çº¿æ¨¡å‹</strong>****</p>
<p>å‘½ä»¤è¡Œä¸­çš„å‚æ•°è¯´æ˜è¯·å‚è§<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-guides%2Fcannkit-overall-parameter" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-overall-parameter" ref="nofollow noopener noreferrer">OMGå‚æ•°</a>ï¼Œè½¬æ¢å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-css" lang="css">./tools/tools_omg/omg <span class="hljs-attr">--model</span> new_model_opset18<span class="hljs-selector-class">.onnx</span> <span class="hljs-attr">--framework</span> <span class="hljs-number">5</span> <span class="hljs-attr">--output</span> ./model
</code></pre>
<p>è½¬æ¢å®Œæˆå, ç”Ÿæˆmodel.omçš„æ¨¡å‹æ–‡ä»¶, è¯¥æ¨¡å‹æ–‡ä»¶å°±æ˜¯é¸¿è’™ä¸Šå¯ä»¥æ­£å¸¸ä½¿ç”¨çš„æ¨¡å‹æ–‡ä»¶</p>
<h3 data-id="heading-6"><strong>2.2 æŸ¥çœ‹æ¨¡å‹çš„è¾“å…¥/è¾“å‡ºå¼ é‡ä¿¡æ¯</strong></h3>
<p>éƒ¨ç½²AIæ¨¡å¼æ—¶, æˆ‘ä»¬éœ€è¦ç¡®è®¤æ¨¡å‹çš„è¾“å…¥å¼ é‡å’Œè¾“å‡ºå¼ é‡ä¿¡æ¯, è¯·ä½¿ç”¨JoyCodeç¼–å†™ä¸€ä¸ªè„šæœ¬, ç¡®å®šè¾“å…¥è¾“å‡ºå¼ é‡ä¿¡æ¯, æç¤ºè¯: å†™ä¸€ä¸ªè„šæœ¬æŸ¥çœ‹onnxæ¨¡å‹çš„è¾“å…¥è¾“å‡ºå¼ é‡ä¿¡æ¯ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e07ceb9dcfc04f71a9cf179cf399ffb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767089477&amp;x-signature=OaBgcmN8vLYLQUhTU0GiR1jqx6E%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h4 data-id="heading-7"><strong>2.2.1 è¾“å…¥å¼ é‡</strong></h4>
<p>BCHWæ ¼å¼, æ˜¯æ·±åº¦å­¦ä¹ ä¸­å¸¸è§çš„å¼ é‡ç»´åº¦æ’åˆ—æ ¼å¼, åœ¨å›¾åƒå¤„ç†åœºæ™¯ä¸­:</p>
<p>â€¢B (Batch): æ‰¹æ¬¡å¤§å° - ä¸€æ¬¡å¤„ç†å¤šå°‘ä¸ªæ ·æœ¬ã€‚</p>
<p>â€¢C (Channel): é€šé“æ•° - å›¾åƒçš„é¢œè‰²é€šé“æ•°ã€‚</p>
<p>â€¢H (Height): é«˜åº¦ - å›¾åƒçš„åƒç´ é«˜åº¦ã€‚</p>
<p>â€¢W (Width): å®½åº¦ - å›¾åƒçš„åƒç´ å®½åº¦ã€‚</p>
<p>ç”±æ­¤å¯ä»¥å¾—å‡ºç»“è®º, è¯¥æ¨¡å‹1ä¸ªæ‰¹æ¬¡å¤„ç†1å¼ å®½é«˜ä¸º128*128çš„RGBå›¾ç‰‡(å› ä¸ºCæ˜¯3,å› æ­¤ä¸åŒ…å«Ré€šé“)ã€‚</p>
<p>ï»¿</p>
<h4 data-id="heading-8"><strong>2.2.2 è¾“å‡ºå¼ é‡</strong></h4>
<p>è¯¥æ¨¡å‹1ä¸ªæ‰¹æ¬¡è¾“å‡º1å¼ å®½é«˜ä¸º512*512çš„RGBå›¾ç‰‡ã€‚</p>
<p>ï»¿</p>
<h4 data-id="heading-9"><strong>2.2.3 BCHWå’ŒBHWCæ ¼å¼çš„åŒºåˆ«:</strong></h4>
<p>è¶…åˆ†æ¨¡å‹ä¸­çš„BCHWå’ŒBHWCæ˜¯ä¸¤ç§ä¸åŒçš„å¼ é‡å­˜å‚¨æ ¼å¼ï¼Œä¸»è¦åŒºåˆ«åœ¨äºé€šé“ç»´åº¦çš„ä½ç½®ï¼š</p>
<p>ï»¿</p>
<p>â€¢<strong>BCHWæ ¼å¼ï¼ˆBatch-Channel-Height-Widthï¼‰</strong></p>
<p>â—¦ç»´åº¦é¡ºåºï¼š[æ‰¹æ¬¡, é€šé“, é«˜åº¦, å®½åº¦]</p>
<p>â—¦å†…å­˜å¸ƒå±€ï¼šé€šé“ç»´åº¦åœ¨ç©ºé—´ç»´åº¦ä¹‹å‰</p>
<p>â—¦å¸¸ç”¨æ¡†æ¶ï¼šPyTorchã€TensorRTç­‰</p>
<p>ç¤ºä¾‹: å½¢çŠ¶ä¸º (1, 3, 256, 256) çš„RGBå›¾åƒ</p>
<p><strong>å†…å­˜ä¸­çš„å­˜å‚¨é¡ºåºï¼š</strong> Ré€šé“çš„æ‰€æœ‰åƒç´  -&gt; Gé€šé“çš„æ‰€æœ‰åƒç´  -&gt; Bé€šé“çš„æ‰€æœ‰åƒç´ </p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">tensor_bchw</span> = torch.randn(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">256</span>, <span class="hljs-number">256</span>)
è®¿é—®ç¬¬ä¸€ä¸ªåƒç´ çš„RGBå€¼éœ€è¦è·¨è¶Šä¸åŒçš„å†…å­˜åŒºåŸŸ
<span class="hljs-attr">pixel_0_0_r</span> = tensor_bchw[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]  <span class="hljs-comment"># Ré€šé“</span>
<span class="hljs-attr">pixel_0_0_g</span> = tensor_bchw[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]  <span class="hljs-comment"># Gé€šé“  </span>
<span class="hljs-attr">pixel_0_0_b</span> = tensor_bchw[<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]  <span class="hljs-comment"># Bé€šé“</span>
</code></pre>
<p>â€¢<strong>BHWCæ ¼å¼ï¼ˆBatch-Height-Width-Channelï¼‰</strong></p>
<p>â—¦ç»´åº¦é¡ºåºï¼š[æ‰¹æ¬¡, é«˜åº¦, å®½åº¦, é€šé“]</p>
<p>â—¦å†…å­˜å¸ƒå±€ï¼šé€šé“ç»´åº¦åœ¨æœ€åï¼Œåƒç´ çš„æ‰€æœ‰é€šé“è¿ç»­å­˜å‚¨</p>
<p>â—¦å¸¸ç”¨æ¡†æ¶ï¼šTensorFlowã€OpenCVç­‰</p>
<p>ç¤ºä¾‹ï¼šå½¢çŠ¶ä¸º (1, 256, 256, 3) çš„RGBå›¾åƒ</p>
<p>å†…å­˜ä¸­çš„å­˜å‚¨é¡ºåºï¼šåƒç´ (0,0)çš„RGB -&gt; åƒç´ (0,1)çš„RGB -&gt; ... -&gt; åƒç´ (0,255)çš„RGB -&gt; åƒç´ (1,0)çš„RGB...</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">tensor_bhwc</span> = tf.random.normal([<span class="hljs-number">1</span>, <span class="hljs-number">256</span>, <span class="hljs-number">256</span>, <span class="hljs-number">3</span>])
<span class="hljs-comment"># è®¿é—®ç¬¬ä¸€ä¸ªåƒç´ çš„RGBå€¼åœ¨è¿ç»­çš„å†…å­˜ä½ç½®</span>
<span class="hljs-attr">pixel_0_0_rgb</span> = tensor_bhwc[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, :]  <span class="hljs-comment"># [R, G, B]</span>
</code></pre>
<p>ï»¿</p>
<h2 data-id="heading-10"><strong>3. é¸¿è’™ç«¯éƒ¨ç½²æ ¸å¿ƒæ­¥éª¤</strong></h2>
<h3 data-id="heading-11"><strong>3.1 åˆ›å»ºé¡¹ç›®</strong></h3>
<p>1.åˆ›å»ºDevEco Studioé¡¹ç›®ï¼Œé€‰æ‹©â€œNative C++â€æ¨¡æ¿ï¼Œç‚¹å‡»â€œNextâ€ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46f2d4161ef44984881401020f6a30fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767089477&amp;x-signature=FO4ZXb3ysjT2qkzUpotPqVcQOaM%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>2.æŒ‰éœ€å¡«å†™â€œProject nameâ€ã€â€œSave locationâ€å’Œâ€œModule nameâ€ï¼Œé€‰æ‹©â€œCompile SDKâ€ä¸ºâ€œ5.1.0(18)â€åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œç‚¹å‡»â€œFinishâ€ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c8bac1d934c44b7b3daff85617fbb4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767089477&amp;x-signature=P6mxqs%2BLOWtEY%2BGaMsH5jxAlfrQ%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-12"><strong>3.2 é…ç½®é¡¹ç›®NAPI</strong></h3>
<p>CANNéƒ¨ç½²åªæä¾›äº†C++æ¥å£, å› æ­¤éœ€è¦ä½¿ç”¨NAPI, ç¼–è¯‘HAPæ—¶ï¼ŒNAPIå±‚çš„soéœ€è¦ç¼–è¯‘ä¾èµ–NDKä¸­çš„libneural_network_core.soå’Œlibhiai_foundation.soã€‚</p>
<p>ï»¿</p>
<p><strong>å¤´æ–‡ä»¶å¼•ç”¨</strong></p>
<p>æŒ‰éœ€å¼•ç”¨NNCoreå’ŒCANN Kitçš„å¤´æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"neural_network_runtime/neural_network_core.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"CANNKit/hiai_options.h"</span></span>
</code></pre>
<p><strong>ç¼–å†™CMakeLists.txt</strong></p>
<p>CMakeLists.txtç¤ºä¾‹ä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.5</span>.<span class="hljs-number">0</span>)
<span class="hljs-built_in">project</span>(myNpmLib)

<span class="hljs-built_in">set</span>(NATIVERENDER_ROOT_PATH ${CMAKE_CURRENT_SOURCE_DIR})

<span class="hljs-built_in">include_directories</span>(${NATIVERENDER_ROOT_PATH}
                    ${NATIVERENDER_ROOT_PATH}/include)

<span class="hljs-built_in">include_directories</span>(${HMOS_SDK_NATIVE}/sysroot/usr/lib)
<span class="hljs-built_in">FIND_LIBRARY</span>(cann-lib hiai_foundation)

<span class="hljs-built_in">add_library</span>(imagesr SHARED HIAIModelManager.cpp ImageSuperResolution.cpp)
<span class="hljs-built_in">target_link_libraries</span>(imagesr PUBLIC libace_napi.z.so
    libhilog_ndk.z.so
    librawfile.z.so
    ${cann-lib}
    libneural_network_core.so
    )
</code></pre>
<h3 data-id="heading-13"><strong>3.3 é›†æˆæ¨¡å‹</strong></h3>
<p>æ¨¡å‹çš„åŠ è½½ã€ç¼–è¯‘å’Œæ¨ç†ä¸»è¦æ˜¯åœ¨nativeå±‚å®ç°ï¼Œåº”ç”¨å±‚ä¸»è¦ä½œä¸ºæ•°æ®ä¼ é€’å’Œå±•ç¤ºä½œç”¨ã€‚æ¨¡å‹æ¨ç†ä¹‹å‰éœ€è¦å¯¹è¾“å…¥æ•°æ®è¿›è¡Œé¢„å¤„ç†ä»¥åŒ¹é…æ¨¡å‹çš„è¾“å…¥ï¼ŒåŒæ ·å¯¹äºæ¨¡å‹çš„è¾“å‡ºä¹Ÿéœ€è¦åšå¤„ç†è·å–è‡ªå·±æœŸæœ›çš„ç»“æœ</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb2af561a0954b37802f76a57a72b5a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767089477&amp;x-signature=llwQdjDQLIDuprCBEFSSf29%2FQU8%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<h4 data-id="heading-14"><strong>3.3.1 åŠ è½½ç¦»çº¿æ¨¡å‹</strong></h4>
<p>ä¸ºäº†è®©Appè¿è¡Œæ—¶èƒ½å¤Ÿè¯»å–åˆ°æ¨¡å‹æ–‡ä»¶å’Œå¤„ç†æ¨ç†ç»“æœï¼Œéœ€è¦å…ˆæŠŠç¦»çº¿æ¨¡å‹å’Œæ¨¡å‹å¯¹åº”çš„ç»“æœæ ‡ç­¾æ–‡ä»¶é¢„ç½®åˆ°å·¥ç¨‹çš„â€œentry/src/main/resources/rawfileâ€ç›®å½•ä¸­ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3e78a1905514c80af05ac4bbd3c9411~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767089477&amp;x-signature=UB4r11wWFJskohWLsZSQ3QNlSfs%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>åœ¨Appåº”ç”¨åˆ›å»ºæ—¶åŠ è½½æ¨¡å‹:</p>
<p>1.nativeå±‚è¯»å–æ¨¡å‹çš„bufferã€‚</p>
<pre><code class="hljs language-ini" lang="ini">const char* <span class="hljs-attr">modelPath</span> = <span class="hljs-string">"imagesr.om"</span><span class="hljs-comment">;</span>
RawFile *<span class="hljs-attr">rawFile</span> = OH_ResourceManager_OpenRawFile(resourceMgr, modelPath)<span class="hljs-comment">;</span>
long <span class="hljs-attr">modelSize</span> = OH_ResourceManager_GetRawFileSize(rawFile)<span class="hljs-comment">;</span>
std::unique_ptr&lt;uint8_t<span class="hljs-section">[]</span>&gt; <span class="hljs-attr">modelData</span> = std::make_unique&lt;uint8_t[]&gt;(modelSize)<span class="hljs-comment">;</span>
int <span class="hljs-attr">res</span> = OH_ResourceManager_ReadRawFile(rawFile, modelData.get(), modelSize)<span class="hljs-comment">;</span>
</code></pre>
<p>2.ä½¿ç”¨æ¨¡å‹çš„buffer, è°ƒç”¨OH_NNCompilation_ConstructWithOfflineModelBufferåˆ›å»ºæ¨¡å‹çš„ç¼–è¯‘å®ä¾‹</p>
<pre><code class="hljs language-ini" lang="ini">HiAI_Compatibility <span class="hljs-attr">compibility</span> = HMS_HiAICompatibility_CheckFromBuffer(modelData, modelSize)<span class="hljs-comment">;</span>
OH_NNCompilation *<span class="hljs-attr">compilation</span> = OH_NNCompilation_ConstructWith<span class="hljs-literal">Off</span>lineModelBuffer(modelData, modelSize)<span class="hljs-comment">;</span>
</code></pre>
<p>3.ï¼ˆå¯é€‰ï¼‰æ ¹æ®éœ€è¦è°ƒç”¨HMS_HiAIOptions_SetOmOptionsæ¥å£ï¼Œæ‰“å¼€ç»´æµ‹åŠŸèƒ½ï¼ˆå¦‚Profilingï¼‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">const char *<span class="hljs-attr">out_path</span> = <span class="hljs-string">"/data/storage/el2/base/haps/entry/files"</span><span class="hljs-comment">;</span>
HiAI_OmType <span class="hljs-attr">omType</span> = HIAI_OM_TYPE_PROFILING<span class="hljs-comment">;</span>
OH_NN_ReturnCode <span class="hljs-attr">ret</span> = HMS_HiAIOptions_SetOmOptions(compilation, omType, out_path)<span class="hljs-comment">;     </span>
</code></pre>
<p>4.è®¾ç½®æ¨¡å‹çš„deviceIDã€‚</p>
<pre><code class="hljs language-ini" lang="ini">size_t <span class="hljs-attr">deviceID</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
const size_t *<span class="hljs-attr">allDevicesID</span> = nullptr<span class="hljs-comment">;</span>
uint32_t <span class="hljs-attr">deviceCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
OH_NN_ReturnCode <span class="hljs-attr">ret</span> = OH_NNDevice_GetAllDevicesID(&amp;allDevicesID, &amp;deviceCount)<span class="hljs-comment">;</span>

for (uint32_t <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; deviceCount; i++) {</span>
    const char *<span class="hljs-attr">name</span> = nullptr<span class="hljs-comment">;</span>
    <span class="hljs-attr">ret</span> = OH_NNDevice_GetName(allDevicesID[i], &amp;name)<span class="hljs-comment">;</span>
    if (ret != OH_NN_SUCCESS || <span class="hljs-attr">name</span> == nullptr) {
        OH_LOG_ERROR(LOG_APP, "OH_NNDevice_GetName failed")<span class="hljs-comment">;</span>
        return deviceID<span class="hljs-comment">;</span>
    }
    if (std::string(name) == "HIAI_F") {
        <span class="hljs-attr">deviceID</span> = allDevicesID[i]<span class="hljs-comment">;</span>
        break<span class="hljs-comment">;</span>
    }
}

<span class="hljs-attr">ret</span> = OH_NNCompilation_SetDevice(compilation, deviceID)<span class="hljs-comment">;</span>
</code></pre>
<p>5.è°ƒç”¨OH_NNCompilation_Buildï¼Œæ‰§è¡Œæ¨¡å‹ç¼–è¯‘ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">ret</span> = SetModelBuildOptions(compilation)<span class="hljs-comment">;</span>
<span class="hljs-attr">ret</span> = OH_NNCompilation_Build(compilation)<span class="hljs-comment">;</span>
</code></pre>
<p>6.è°ƒç”¨OH_NNExecutor_Constructï¼Œåˆ›å»ºæ¨¡å‹æ‰§è¡Œå™¨ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">executor_</span> = OH_NNExecutor_Construct(compilation)<span class="hljs-comment">;</span>
</code></pre>
<p>7.è°ƒç”¨OH_NNCompilation_Destroyï¼Œé‡Šæ”¾æ¨¡å‹ç¼–è¯‘å®ä¾‹ã€‚</p>
<p>ï»¿</p>
<h4 data-id="heading-15"><strong>3.3.2 å‡†å¤‡è¾“å…¥è¾“å‡º****Tensor</strong></h4>
<p>1.å¤„ç†æ¨¡å‹çš„è¾“å…¥ï¼Œæ¨¡å‹çš„è¾“å…¥ä¸º1<em>3</em>128*128æ ¼å¼(BCHW) Floatç±»å‹çš„æ•°æ®, éœ€è¦æŠŠRGB æ•°æ®è½¬æˆBCHWæ ¼å¼å¹¶è¿›è¡Œå½’ä¸€åŒ–ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">ä»å›¾ç‰‡ä¸­è¯»å–çš„RGBæ•°æ®ä¸ºBHWC,éœ€è¦è½¬æ¢æˆæ¨¡å‹å¯ä»¥è¯†åˆ«çš„BCHW
/**
 * æŠŠbhwcè½¬æˆbchw
 */
uint8_t *<span class="hljs-attr">rgbData</span> = static_cast&lt;uint8_t*&gt;(data)<span class="hljs-comment">;</span>
uint8_t *<span class="hljs-attr">floatData_tmp</span> = new uint8_t[length]<span class="hljs-comment">;</span>
for (int <span class="hljs-attr">c</span> = <span class="hljs-number">0</span><span class="hljs-comment">; c &lt; 3; ++c) {</span>
    for (int <span class="hljs-attr">h</span> = <span class="hljs-number">0</span><span class="hljs-comment">; h &lt; 128; ++h) {</span>
        for (int <span class="hljs-attr">w</span> = <span class="hljs-number">0</span><span class="hljs-comment">; w &lt; 128; ++w) {</span>
            // HWC ç´¢å¼•: h * width * channels + w * channels +c 
            int <span class="hljs-attr">hwc_index</span> = h * <span class="hljs-number">128</span> * <span class="hljs-number">3</span> + w * <span class="hljs-number">3</span> + c<span class="hljs-comment">;</span>
            // CHW ç´¢å¼•: C * height * width + h* width + W
            int <span class="hljs-attr">chw_index</span> = c * <span class="hljs-number">128</span> * <span class="hljs-number">128</span> + h * <span class="hljs-number">128</span> + w<span class="hljs-comment">;</span>
            floatData_tmp<span class="hljs-section">[chw_index]</span> = rgbData<span class="hljs-section">[hwc_index]</span><span class="hljs-comment">;</span>
        }
    }
}
//å½’ä¸€åŒ–
float *<span class="hljs-attr">floatData</span> = new float[length]<span class="hljs-comment">;</span>
for (size_t <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; length; ++i) {</span>
    floatData<span class="hljs-section">[i]</span> = static_cast&lt;float&gt;(floatData_tmp<span class="hljs-section">[i]</span>)/ 255.0f<span class="hljs-comment">;</span>
}
</code></pre>
<p>2.åˆ›å»ºæ¨¡å‹çš„è¾“å…¥å’Œè¾“å‡ºTensorï¼Œå¹¶æŠŠåº”ç”¨å±‚ä¼ é€’çš„æ•°æ®å¡«å……åˆ°è¾“å…¥çš„Tensorä¸­</p>
<pre><code class="hljs language-ini" lang="ini">// å‡†å¤‡è¾“å…¥å¼ é‡
size_t <span class="hljs-attr">inputCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
OH_NN_ReturnCode <span class="hljs-attr">ret</span> = OH_NNExecutor_GetInputCount(executor_, &amp;inputCount)<span class="hljs-comment">;</span>
for (size_t <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; inputCount; ++i) {</span>
    NN_TensorDesc *<span class="hljs-attr">tensorDesc</span> = OH_NNExecutor_CreateInputTensorDesc(executor_, i)<span class="hljs-comment">;</span>
    NN_Tensor *<span class="hljs-attr">tensor</span> = OH_NNTensor_Create(deviceID_, tensorDesc)<span class="hljs-comment">;</span>
    if (tensor != nullptr) {
        inputTensors_.push_back(tensor)<span class="hljs-comment">;</span>
    }
    OH_NNTensorDesc_Destroy(&amp;tensorDesc)<span class="hljs-comment">;</span>
}


<span class="hljs-attr">ret</span> = SetInputTensorData(inputTensors_, inputData)<span class="hljs-comment">;</span>

// å‡†å¤‡è¾“å‡ºå¼ é‡
size_t <span class="hljs-attr">outputCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
<span class="hljs-attr">ret</span> = OH_NNExecutor_GetOutputCount(executor_, &amp;outputCount)<span class="hljs-comment">;</span>

for (size_t <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; outputCount; i++) {</span>
    NN_TensorDesc *<span class="hljs-attr">tensorDesc</span> = OH_NNExecutor_CreateOutputTensorDesc(executor_, i)<span class="hljs-comment">;</span>
    NN_Tensor *<span class="hljs-attr">tensor</span> = OH_NNTensor_Create(deviceID_, tensorDesc)<span class="hljs-comment">;</span>
    if (tensor != nullptr) {
        outputTensors_.push_back(tensor)<span class="hljs-comment">;</span>
    }
    OH_NNTensorDesc_Destroy(&amp;tensorDesc)<span class="hljs-comment">;</span>
}
if (outputTensors_.size() != outputCount) {
    DestroyTensors(inputTensors_)<span class="hljs-comment">;</span>
    DestroyTensors(outputTensors_)<span class="hljs-comment">;</span>
    OH_LOG_ERROR(LOG_APP, "output size mismatch.")<span class="hljs-comment">;</span>
    return OH_NN_FAILED<span class="hljs-comment">;</span>
}
</code></pre>
<p>ï»¿</p>
<h4 data-id="heading-16"><strong>3.3.3 è¿›è¡Œæ¨ç†</strong></h4>
<p>è°ƒç”¨OH_NNExecutor_RunSyncï¼Œå®Œæˆæ¨¡å‹çš„åŒæ­¥æ¨ç†ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">OH_NN_ReturnCode ret = <span class="hljs-built_in">OH_NNExecutor_RunSync</span>(executor_, inputTensors_.data(), inputTensors_<span class="hljs-selector-class">.size</span>(),
                                                 outputTensors_<span class="hljs-selector-class">.data</span>(), outputTensors_<span class="hljs-selector-class">.size</span>());
</code></pre>
<p>è¯´æ˜</p>
<p>â€¢å¦‚æœä¸æ›´æ¢æ¨¡å‹ï¼Œåˆ™é¦–æ¬¡ç¼–è¯‘åŠ è½½å®Œæˆåå¯å¤šæ¬¡æ¨ç†ï¼Œå³ä¸€æ¬¡ç¼–è¯‘åŠ è½½ï¼Œå¤šæ¬¡æ¨ç†ã€‚</p>
<p>â€¢æ‰€æœ‰å…³äºæ¨¡å‹çš„æ“ä½œ, å‡æ— æ³•å¤šçº¿ç¨‹æ‰§è¡Œã€‚</p>
<p>ï»¿</p>
<h4 data-id="heading-17"><strong>3.3.4 è·å–æ¨¡å‹è¾“å‡ºå¹¶å¤„ç†æ•°æ®</strong></h4>
<p>1.è°ƒç”¨OH_NNTensor_GetDataBufferï¼Œè·å–è¾“å‡ºçš„Tensorï¼Œåœ¨è¾“å‡ºTensorä¸­ä¼šå¾—åˆ°æ¨¡å‹çš„è¾“å‡ºæ•°æ®ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// è·å–ç¬¬ä¸€ä¸ªè¾“å‡ºå¼ é‡
NN_Tensor* <span class="hljs-attr">tensor</span> = outputTensors_[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>

// è·å–å¼ é‡æ•°æ®ç¼“å†²åŒº
void *<span class="hljs-attr">tensorData</span> = OH_NNTensor_GetDataBuffer(tensor)<span class="hljs-comment">;</span>

// è·å–å¼ é‡å¤§å°
size_t <span class="hljs-attr">size</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
OH_NN_ReturnCode <span class="hljs-attr">ret</span> = OH_NNTensor_GetSize(tensor, &amp;size)<span class="hljs-comment">;</span>

float *<span class="hljs-attr">tensorDataOutput</span> = (float*)malloc(size)<span class="hljs-comment">;</span>
// å°†tensorDataçš„æ•°æ®ä¸€æ¬¡æ€§å¤åˆ¶åˆ°tensorDataOutputä¸­
memcpy(tensorDataOutput, tensorData, size)<span class="hljs-comment">;</span>
</code></pre>
<p>ï»¿</p>
<p>2.å¯¹Tensorè¾“å‡ºæ•°æ®è¿›è¡Œç›¸åº”çš„å¤„ç†</p>
<p>æŠŠæ¨¡å‹è¾“å‡ºçš„BCHWè½¬æˆBHWC, å¹¶è¿›è¡Œåå½’ä¸€åŒ–å¤„ç†</p>
<p>ï»¿</p>
<pre><code class="hljs language-ini" lang="ini">//æŠŠæ¨¡å‹è¾“å‡ºçš„BCHWè½¬æˆBHWC
float *<span class="hljs-attr">outputResult</span> = static_cast&lt;float *&gt;(tensorData)<span class="hljs-comment">;</span>
float *<span class="hljs-attr">output_tmp</span> = new float[size/sizeof(float)]<span class="hljs-comment">;</span>
for (int <span class="hljs-attr">h</span> = <span class="hljs-number">0</span><span class="hljs-comment">; h &lt; 512; ++h) {</span>
    for (int <span class="hljs-attr">w</span> = <span class="hljs-number">0</span><span class="hljs-comment">; w &lt; 512; ++w) {</span>
        for (int <span class="hljs-attr">c</span> = <span class="hljs-number">0</span><span class="hljs-comment">; c &lt; 3; ++c) {</span>
            output_tmp<span class="hljs-section">[h * 512 * 3 + w* 3 + c]</span> = outputResult<span class="hljs-section">[c * 512 * 512 + h * 512 + w]</span><span class="hljs-comment">;</span>
        }
    }
}
std::vector&lt;float&gt; output(size / sizeof(float), 0.0)<span class="hljs-comment">;</span>
for (size_t <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; size / sizeof(float); ++i) {</span>
    output<span class="hljs-section">[i]</span> = output_tmp<span class="hljs-section">[i]</span><span class="hljs-comment">;</span>
}
delete <span class="hljs-section">[]</span> output_tmp<span class="hljs-comment">;</span>


 // è®¡ç®—æ€»çš„æ•°æ®å¤§å°
size_t <span class="hljs-attr">totalSize</span> = output.size()<span class="hljs-comment">;</span>

// åˆ†é…ç»“æœæ•°æ®å†…å­˜
std::unique_ptr&lt;uint8_t<span class="hljs-section">[]</span>&gt; <span class="hljs-attr">result_data</span> = std::make_unique&lt;uint8_t[]&gt;(totalSize)<span class="hljs-comment">;</span>

// å°†floatæ•°æ®è½¬æ¢ä¸ºuint8_t (åå½’ä¸€åŒ–)
size_t <span class="hljs-attr">index</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
for (float value : result) {
    // å°†floatå€¼è½¬æ¢ä¸ºuint8_t (0-255èŒƒå›´)
    float <span class="hljs-attr">scaledValue</span> = value * <span class="hljs-number">255.0</span>f<span class="hljs-comment">;</span>
    <span class="hljs-attr">scaledValue</span> = std::max(<span class="hljs-number">0.0</span>f, std::min(<span class="hljs-number">255.0</span>f, scaledValue))<span class="hljs-comment">;</span>
    result_data<span class="hljs-section">[index++]</span> = static_cast&lt;uint8_t&gt;(scaledValue)<span class="hljs-comment">;</span>
}

result_data å°±æ˜¯æœ€ç»ˆçš„è¶…åˆ†æ•°æ®,å¯ä»¥æ­£å¸¸æ˜¾ç¤º
</code></pre>
<p>ï»¿</p>
<h2 data-id="heading-18"><strong>4. æ€»ç»“ä¸æŠ€æœ¯å±•æœ›</strong></h2>
<p>äº¬ä¸œé‡‘èAppåœ¨é¸¿è’™ç«¯éƒ¨ç½²Real-ESRGAN-General-x4v3è¶…åˆ†è¾¨ç‡æ¨¡å‹çš„å®Œæ•´å®è·µè¿‡ç¨‹ï¼ŒæˆåŠŸè§£å†³äº†ONNXæ¨¡å‹åˆ°OMç¦»çº¿æ¨¡å‹è½¬æ¢ã€BCHWä¸BHWCå¼ é‡æ ¼å¼å¤„ç†ã€ä»¥åŠåŸºäºCANN Kitå’ŒNAPIçš„å®Œæ•´éƒ¨ç½²é“¾è·¯ç­‰å…³é”®æŠ€æœ¯éš¾é¢˜ã€‚</p>
<p>å±•æœ›ç«¯æ™ºèƒ½çš„æœªæ¥å‘å±•ï¼Œéšç€èŠ¯ç‰‡ç®—åŠ›çš„æŒ‡æ•°çº§å¢é•¿ã€æ¨¡å‹å‹ç¼©æŠ€æœ¯çš„çªç ´æ€§è¿›å±•ä»¥åŠè¾¹ç¼˜è®¡ç®—æ¶æ„çš„æ—¥è¶‹æˆç†Ÿï¼Œç«¯ä¾§è®¾å¤‡å°†ä»å•çº¯çš„æ•°æ®é‡‡é›†ç»ˆç«¯æ¼”è¿›ä¸ºå…·å¤‡å¼ºå¤§æ¨ç†èƒ½åŠ›çš„æ™ºèƒ½è®¡ç®—èŠ‚ç‚¹ï¼Œé€šè¿‡å®ç°å¤šæ¨¡æ€AIèåˆã€å®æ—¶ä¸ªæ€§åŒ–å­¦ä¹ ã€éšç§ä¿æŠ¤è®¡ç®—å’Œè·¨è®¾å¤‡ååŒç­‰æ ¸å¿ƒèƒ½åŠ›ï¼Œå°†å¤§è¯­è¨€æ¨¡å‹ã€è®¡ç®—æœºè§†è§‰ã€è¯­éŸ³è¯†åˆ«ç­‰AIæŠ€æœ¯æ·±åº¦é›†æˆåˆ°ç§»åŠ¨è®¾å¤‡ä¸­ï¼Œæ„å»ºèµ·æ— éœ€è”ç½‘å³å¯æä¾›æ™ºèƒ½æœåŠ¡çš„è‡ªä¸»è®¡ç®—ç”Ÿæ€ï¼Œæ¨åŠ¨äººæœºäº¤äº’ä»è¢«åŠ¨å“åº”å‘ä¸»åŠ¨æ„ŸçŸ¥ã€é¢„æµ‹å’ŒæœåŠ¡çš„èŒƒå¼è½¬å˜ï¼Œæœ€ç»ˆå¼€å¯çœŸæ­£æ„ä¹‰ä¸Šçš„æ™®æƒ äººå·¥æ™ºèƒ½æ—¶ä»£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›é¡¾è®¡ç®—å±æ€§çš„ç¼“å­˜ä¸ç›‘å¬çš„è§¦å‘è¿”å›ç»“æœ]]></title>    <link>https://juejin.cn/post/7586879894207922239</link>    <guid>https://juejin.cn/post/7586879894207922239</guid>    <pubDate>2025-12-23T09:13:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586879894207922239" data-draft-id="7533501485156368418" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›é¡¾è®¡ç®—å±æ€§çš„ç¼“å­˜ä¸ç›‘å¬çš„è§¦å‘è¿”å›ç»“æœ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2025-12-23T09:13:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›é¡¾è®¡ç®—å±æ€§çš„ç¼“å­˜ä¸ç›‘å¬çš„è§¦å‘è¿”å›ç»“æœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T09:13:55.000Z" title="Tue Dec 23 2025 09:13:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-light">.hljs-comment,.hljs-quote{color:#6b7394}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f5f7ff;color:#5e6687}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>ç½‘ä¸Šçš„ç»™å‡ºçš„åŒºåˆ«æœ‰å¾ˆå¤šï¼Œä»Šå¤©åªæ˜¯ç®€å•æ¥å›å½’ä¸‹å…¶ä¸­çš„ä¸€äº›æµç¨‹å’ŒåŒºåˆ«çš„å…³é”®ç‚¹ã€‚</p>
<p><strong>ä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹è¿›è¡Œæ€è€ƒï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"calc"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">"n1"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æ•°å­—1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">"n2"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æ•°å­—2"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å’Œï¼š{{ sum }} å¹³å‡å€¼ï¼š{{ avg }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ç”¨æˆ·å"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{color: tipColor}"</span>&gt;</span>{{ tip }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">n1</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">n2</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">tip</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">tipColor</span>: <span class="hljs-string">'#333'</span> }
    },
    <span class="hljs-attr">computed</span>: {
      <span class="hljs-title function_">sum</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">n1</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">n2</span> },
      <span class="hljs-title function_">avg</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">sum</span> / <span class="hljs-number">2</span> }
    },
    <span class="hljs-attr">watch</span>: {
      <span class="hljs-title function_">name</span>(<span class="hljs-params">v</span>) {
        <span class="hljs-keyword">if</span> (!v.<span class="hljs-title function_">trim</span>()) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">tip</span> = <span class="hljs-string">'ä¸èƒ½ä¸ºç©º'</span>; <span class="hljs-variable language_">this</span>.<span class="hljs-property">tipColor</span> = <span class="hljs-string">'red'</span> }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (v.<span class="hljs-property">length</span> &lt; <span class="hljs-number">3</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">tip</span> = <span class="hljs-string">'ä¸å°‘äº3ä½'</span>; <span class="hljs-variable language_">this</span>.<span class="hljs-property">tipColor</span> = <span class="hljs-string">'orange'</span> }
        <span class="hljs-keyword">else</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-property">tip</span> = <span class="hljs-string">'å¯ç”¨'</span>; <span class="hljs-variable language_">this</span>.<span class="hljs-property">tipColor</span> = <span class="hljs-string">'green'</span> }
      }
    }
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.calc</span> { <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>; <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>; <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto; }
  <span class="hljs-selector-tag">input</span> { <span class="hljs-attribute">display</span>: block; <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">8px</span> <span class="hljs-number">0</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">6px</span>; <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>; <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>å…³äº watch å’Œ computed çš„ä½¿ç”¨æˆ‘ä»¬å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ä¸€ä¸€ä»‹ç»ï¼Œ<strong>ä½†æ˜¯è¯·è®°ä½ï¼šç›‘å¬æ˜¯ä¸éœ€è¦ return çš„ï¼Œè®¡ç®—å±æ€§æ˜¯ç™¾åˆ†ç™¾å¿…é¡»è¦æœ‰çš„ã€‚</strong></p>
<h2 data-id="heading-1">1ã€ç›‘å¬å’Œè®¡ç®—å±æ€§çš„åŒºåˆ«</h2>
<h4 data-id="heading-2"><strong>æœ€å…³é”®çš„åŒºåˆ«ï¼š</strong></h4>
<p><strong>1ã€ç›‘å¬æ˜¯æ²¡æœ‰ç¼“å­˜çš„ï¼Œè®¡ç®—å±æ€§æ˜¯æœ‰ç¼“å­˜çš„</strong></p>
<p><strong>2ã€ç›‘å¬æ˜¯ä¸éœ€è¦æœ‰è¿”å›å€¼çš„ï¼Œä½†æ˜¯æœºæŸå±æ€§æ˜¯å¿…é¡»è¦æœ‰è¿”å›å€¼çš„ã€‚ï¼ˆæé™æƒ…å†µä¸‹ä¸returnåŸºæœ¬æ²¡æ„ä¹‰ï¼‰</strong></p>
<p><strong>å…¶ä»–çš„åŒºåˆ«ï¼š</strong></p>






























<table><thead><tr><th><strong>å¯¹æ¯”ç»´åº¦</strong></th><th><strong>è®¡ç®—å±æ€§ï¼ˆcomputedï¼‰</strong></th><th><strong>ç›‘å¬å™¨ï¼ˆwatchï¼‰</strong></th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒç”¨é€”</strong></td><td>åŸºäºå·²æœ‰æ•°æ®<strong>æ¨å¯¼ / è®¡ç®—æ–°æ•°æ®</strong>ï¼ˆæ•°æ®è½¬æ¢ / ç»„åˆï¼‰</td><td>ç›‘å¬å·²æœ‰æ•°æ®çš„<strong>å˜åŒ–</strong>ï¼Œæ‰§è¡Œå¼‚æ­¥æ“ä½œæˆ–å¤æ‚é€»è¾‘ï¼ˆæ— æ–°æ•°æ®äº§å‡ºï¼Œä¾§é‡ â€œå‰¯ä½œç”¨â€ï¼‰</td></tr><tr><td><strong>ä¾èµ–å…³ç³»</strong></td><td>åªèƒ½ä¾èµ– Vue å®ä¾‹ä¸­çš„å“åº”å¼æ•°æ®ï¼ˆ<code>data</code>/<code>props</code>/ å…¶ä»–Â <code>computed</code>ï¼‰ï¼Œè‡ªåŠ¨æ„ŸçŸ¥ä¾èµ–å˜åŒ–</td><td>å¯ç›‘å¬å•ä¸ªå“åº”å¼æ•°æ®ã€å¯¹è±¡å±æ€§ã€æ•°ç»„ï¼Œç”šè‡³é€šè¿‡Â <code>deep: true</code>ç›‘å¬å¯¹è±¡æ·±å±‚å˜åŒ–ï¼Œæ”¯æŒæ‰‹åŠ¨æŒ‡å®šç›‘å¬ç›®æ ‡</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>1. ç®€å•æ•°æ®æ‹¼æ¥ï¼ˆå¦‚å…¨åï¼š<code>firstName + lastName</code>ï¼‰2. æ•°æ®æ ¼å¼åŒ–ï¼ˆå¦‚æ—¶é—´æˆ³è½¬æ—¥æœŸå­—ç¬¦ä¸²ï¼‰3. ä¾èµ–å¤šæ•°æ®çš„è®¡ç®—ï¼ˆå¦‚æ€»ä»·ï¼š<code>price * count</code>ï¼‰4. éœ€ç¼“å­˜çš„é‡å¤è®¡ç®—åœºæ™¯</td><td>1. å¼‚æ­¥æ“ä½œï¼ˆå¦‚ç›‘å¬è¾“å…¥æ¡†å˜åŒ–ï¼Œå»¶è¿Ÿè¯·æ±‚æ¥å£è·å–è”æƒ³æ•°æ®ï¼‰2. å¤æ‚é€»è¾‘å¤„ç†ï¼ˆå¦‚ç›‘å¬ç”¨æˆ·çŠ¶æ€å˜åŒ–ï¼ŒåŒæ­¥æ›´æ–°æƒé™èœå•ï¼‰3. ç›‘å¬å¯¹è±¡æ·±å±‚å˜åŒ–ï¼ˆå¦‚ç›‘å¬è¡¨å•å¯¹è±¡ï¼Œç»Ÿä¸€å¤„ç†æäº¤å‰æ ¡éªŒï¼‰4. æ•°æ®å˜åŒ–åçš„è”åŠ¨æ“ä½œï¼ˆéæ•°æ®æ¨å¯¼ç±»ï¼‰</td></tr><tr><td><strong>æ˜¯å¦æ”¯æŒå¼‚æ­¥</strong></td><td>ä¸æ”¯æŒå¼‚æ­¥æ“ä½œï¼šè‹¥åœ¨Â <code>computed</code>ä¸­ä½¿ç”¨å¼‚æ­¥ï¼ˆå¦‚å®šæ—¶å™¨ã€æ¥å£è¯·æ±‚ï¼‰ï¼Œæ— æ³•æ­£ç¡®è¿”å›æ¨å¯¼ç»“æœï¼Œä¼šå¾—åˆ°Â <code>undefined</code></td><td>æ”¯æŒå¼‚æ­¥æ“ä½œï¼šè¿™æ˜¯Â <code>watch</code>çš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€ï¼Œå¯åœ¨ç›‘å¬å‡½æ•°ä¸­æ‰§è¡Œä»»æ„å¼‚æ­¥é€»è¾‘</td></tr></tbody></table>
<h2 data-id="heading-3">2ï¼š ç›‘å¬å’Œè®¡ç®—å±æ€§çš„åŸºæœ¬è§¦å‘æµç¨‹ï¼š</h2>
<h3 data-id="heading-4">æ ¸å¿ƒé€»è¾‘ï¼š<code>set</code>Â â†’Â <code>Dep</code>Â â†’Â <code>Watcher</code>Â â†’Â <code>watch</code>/<code>computed</code>Â è”åŠ¨æµç¨‹</h3>
<p>æ— è®ºæ˜¯Â <code>watch</code>Â è¿˜æ˜¯Â <code>computed</code>ï¼Œåº•å±‚è”åŠ¨æµç¨‹çš„æ ¸å¿ƒä¸€è‡´ï¼Œ<strong>ä»…åœ¨</strong> <code>Watcher</code> <strong>æ‰§è¡Œé€»è¾‘ä¸Šæœ‰å·®å¼‚</strong>ï¼Œå®Œæ•´æµç¨‹å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-5">ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–é˜¶æ®µ â€”â€” ä¾èµ–æ”¶é›†ï¼ˆ<code>get</code>Â æ‹¦æˆªå™¨ +Â <code>Dep</code>Â +Â <code>Watcher</code>Â ç»‘å®šï¼‰</h3>
<ol>
<li><code>computed</code> ****<strong>çš„ä¾èµ–æ”¶é›†</strong>ï¼š</li>
</ol>

<ol>
<li>ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œä¼šä¸ºæ¯ä¸ªè®¡ç®—å±æ€§åˆ›å»ºä¸€ä¸ªã€Œè®¡ç®—å±æ€§Â <code>Watcher</code>ã€ï¼›
1.  æ‰§è¡Œè®¡ç®—å±æ€§çš„Â <code>get</code>Â æ–¹æ³•ï¼Œè®¿é—®ä¾èµ–çš„å“åº”å¼æ•°æ®ï¼ˆå¦‚Â <code>this.num1</code>ï¼‰ï¼›
1.  è§¦å‘è¯¥æ•°æ®çš„Â <code>get</code>Â æ‹¦æˆªå™¨ï¼Œ<code>get</code>Â æ‹¦æˆªå™¨ä¼šå°†å½“å‰ã€Œè®¡ç®—å±æ€§Â <code>Watcher</code>ã€æ·»åŠ åˆ°è¯¥æ•°æ®çš„Â <code>Dep</code>Â ä¾èµ–åˆ—è¡¨ä¸­ï¼›
1.  æ‰€æœ‰ä¾èµ–æ•°æ®éƒ½å®ŒæˆÂ <code>Watcher</code>Â ç»‘å®šï¼Œæœ€ç»ˆç¼“å­˜è®¡ç®—å±æ€§çš„åˆå§‹ç»“æœã€‚</li>
</ol>

<ol start="2">
<li><code>watch</code> ****<strong>çš„ä¾èµ–æ”¶é›†</strong>ï¼š</li>
</ol>

<ol>
<li>
<ol>
<li>ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œä¼šä¸ºæ¯ä¸ªÂ <code>watch</code>Â ç›‘å¬ç›®æ ‡åˆ›å»ºä¸€ä¸ªã€Œæ™®é€šÂ <code>Watcher</code>ã€ï¼›</li>
<li>ä¸»åŠ¨è¯»å–ä¸€æ¬¡ç›‘å¬ç›®æ ‡æ•°æ®ï¼ˆå¦‚Â <code>this.username</code>ï¼‰ï¼Œè§¦å‘è¯¥æ•°æ®çš„Â <code>get</code>Â æ‹¦æˆªå™¨ï¼›</li>
<li><code>get</code>Â æ‹¦æˆªå™¨å°†å½“å‰ã€Œæ™®é€šÂ <code>Watcher</code>ã€æ·»åŠ åˆ°è¯¥æ•°æ®çš„Â <code>Dep</code>Â ä¾èµ–åˆ—è¡¨ä¸­ï¼›</li>
<li>è‹¥å¼€å¯Â <code>deep: true</code>ï¼Œä¼šé€’å½’éå†å¯¹è±¡ / æ•°ç»„çš„å†…éƒ¨å±æ€§ï¼Œå®Œæˆæ·±å±‚ä¾èµ–æ”¶é›†ã€‚</li>
</ol>
</li>
</ol>
<h3 data-id="heading-6">ç¬¬äºŒæ­¥ï¼šæ›´æ–°é˜¶æ®µ â€”â€”<code>set</code>Â æ‹¦æˆªå™¨è§¦å‘Â <code>Watcher</code>Â æ‰§è¡Œ</h3>
<p>å½“ä¿®æ”¹å“åº”å¼æ•°æ®æ—¶ï¼ˆå¦‚Â <code>this.num1 = 10</code>ï¼‰ï¼Œè§¦å‘åº•å±‚è”åŠ¨ï¼š</p>
<ol>
<li>æ•°æ®è¢«ä¿®æ”¹ï¼Œè§¦å‘è¯¥æ•°æ®çš„Â <code>set</code>Â æ‹¦æˆªå™¨ï¼›</li>
<li><code>set</code>Â æ‹¦æˆªå™¨è°ƒç”¨å¯¹åº”Â <code>Dep</code>Â çš„Â <code>notify()</code>Â æ–¹æ³•ï¼ˆæ´¾å‘æ›´æ–°é€šçŸ¥ï¼‰ï¼›</li>
<li><code>Dep</code>Â éå†è‡ªèº«çš„ä¾èµ–åˆ—è¡¨ï¼Œé€šçŸ¥æ‰€æœ‰ç»‘å®šçš„Â <code>Watcher</code>ã€Œæ•°æ®å·²æ›´æ–°ã€ï¼›</li>
<li>ä¸åŒç±»å‹çš„Â <code>Watcher</code>Â æ¥æ”¶é€šçŸ¥åï¼Œæ‰§è¡Œå·®å¼‚åŒ–æ“ä½œï¼ˆè¿™æ˜¯Â <code>watch</code>Â å’ŒÂ <code>computed</code>Â è¡¨ç°ä¸åŒçš„æ ¸å¿ƒåŸå› ï¼‰ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li><strong>æ™®é€š</strong> <code>Watcher</code> <strong>ï¼ˆå¯¹åº”</strong> <code>watch</code> <strong>ï¼‰</strong> ï¼šæ”¶åˆ°é€šçŸ¥åï¼Œ<strong>ç«‹å³æ‰§è¡Œ</strong> <code>watch</code> <strong>çš„å›è°ƒå‡½æ•°</strong>ï¼Œä¼ å…¥Â <code>newVal</code>Â å’ŒÂ <code>oldVal</code>ï¼Œæ‰§è¡Œå¼‚æ­¥ / å¤æ‚é€»è¾‘ï¼›</li>
<li><strong>è®¡ç®—å±æ€§</strong> <code>Watcher</code> <strong>ï¼ˆå¯¹åº”</strong> <code>computed</code> <strong>ï¼‰</strong> ï¼šæ”¶åˆ°é€šçŸ¥åï¼Œ<strong>ä»…å°†è‡ªèº«æ ‡è®°ä¸ºã€Œè„çŠ¶æ€ã€ï¼ˆç¼“å­˜å¤±æ•ˆï¼‰</strong> ï¼Œä¸ç«‹å³æ‰§è¡Œè®¡ç®—é€»è¾‘ï¼Œç­‰å¾…ä¸‹æ¬¡è®¿é—®è®¡ç®—å±æ€§æ—¶ï¼Œæ‰é‡æ–°æ‰§è¡ŒÂ <code>get</code>Â æ–¹æ³•è®¡ç®—æ–°ç»“æœå¹¶æ›´æ–°ç¼“å­˜ã€‚</li>
</ul>
</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">  <span class="hljs-attr">watch</span>: {
    <span class="hljs-title function_">num</span>(<span class="hljs-params">newVal, oldVal</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ã€watchã€‘ï¼šnumä»<span class="hljs-subst">${oldVal}</span>å˜ä¸º<span class="hljs-subst">${newVal}</span>ï¼Œæˆ‘ç«‹å³æ‰§è¡Œå›è°ƒ`</span>);
    }
  },
</code></pre>
<p>å½“ set è§¦å‘ watcher åï¼Œwatcher å°±ä¼šç«‹å³è§¦å‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">num</span>(<span class="hljs-params">newVal, oldVal</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ã€watchã€‘ï¼šnumä»<span class="hljs-subst">${oldVal}</span>å˜ä¸º<span class="hljs-subst">${newVal}</span>ï¼Œæˆ‘ç«‹å³æ‰§è¡Œå›è°ƒ`</span>);
    }
</code></pre>
<p><strong>ä»€ä¹ˆå«</strong> <strong>æ”¶åˆ°é€šçŸ¥åï¼Œ</strong> <strong>ä»…å°†è‡ªèº«æ ‡è®°ä¸ºã€Œè„çŠ¶æ€ã€ï¼ˆç¼“å­˜å¤±æ•ˆï¼‰</strong> <strong>ï¼Œä¸ç«‹å³æ‰§è¡Œè®¡ç®—é€»è¾‘ï¼Œç­‰å¾…ä¸‹æ¬¡è®¿é—®è®¡ç®—å±æ€§æ—¶ï¼Œæ‰é‡æ–°æ‰§è¡Œ</strong> <code>get</code> <strong>æ–¹æ³•è®¡ç®—æ–°ç»“æœå¹¶æ›´æ–°ç¼“å­˜ã€‚</strong></p>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è¿™é‡Œå°±æ˜¯ã€Œè®¿é—®è®¡ç®—å±æ€§ã€ï¼šæ¨¡æ¿æ¸²æŸ“æ—¶ä¼šè¯»å– numDouble çš„å€¼ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"num &lt; 2"</span>&gt;</span>ä¸¤å€æ•°ï¼š{{ numDouble }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">num</span>: <span class="hljs-number">1</span> };
  },
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-title function_">numDouble</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è®¡ç®—å±æ€§æ‰§è¡Œè®¡ç®—"</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span> * <span class="hljs-number">2</span>;
    },
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span> = <span class="hljs-number">5</span>; <span class="hljs-comment">// 2ç§’åï¼Œv-ifä¸æˆç«‹</span>
  }, <span class="hljs-number">2000</span>);
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span> = <span class="hljs-number">1</span>; <span class="hljs-comment">// 4ç§’åï¼Œv-ifå†æ¬¡æˆç«‹</span>
  }, <span class="hljs-number">4000</span>);
  },
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

// æ§åˆ¶å°åªä¼šæ‰“å°2æ¬¡â€œè®¡ç®—å±æ€§æ‰§è¡Œ
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆåªæ‰“å° 2 æ¬¡ï¼š</strong></p>
<p><strong>åŸå› å°±æ˜¯æˆ‘ä»¬çš„è®¡ç®—å±æ€§åœ¨ 2s åæ²¡æœ‰æ‰§è¡Œ</strong></p>
<p><strong>1ã€ å½“åˆå§‹åŒ–æ—¶ï¼Œé¡µé¢ä¸­ v-if æ¡ä»¶æ˜¯ç¬¦åˆçš„ï¼Œä¼šæ‰§è¡Œä¸€æ¬¡ get è®¡ç®—å¾—åˆ°è¿”å›å€¼</strong></p>
<p><strong>2ã€å½“ç»è¿‡ä¸¤ç§’åã€</strong> <strong>v-if ä¸ç¬¦åˆæ¡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™è¡¨æ˜numDouble æ˜¯è„æ•°æ®ï¼Œä¼šå¯¹å…¶è¿›è¡Œæ ‡è®°ï¼ˆ</strong> <strong>v-if ä¸ç¬¦åˆæ¡ä»¶ï¼Œæ‰€ä»¥æ— æ³•å¯¹numDouble è¿›è¡Œè®¿é—®ï¼Œ</strong> <strong>è¿™é‡Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ç¼“å­˜ï¼Œç¼“å­˜è®¡ç®—å±æ€§çš„ç»“æœå€¼ï¼Œå½“è„çŠ¶æ€å–æ¶ˆæ—¶æ‰ä¼šè¿›è¡Œæ–°çš„è®¡ç®—</strong> <strong>)</strong></p>
<p><strong>3ã€å½“ ç»è¿‡ 4 ç§’åæ¡ä»¶å†æ¬¡è¢«æ»¡è¶³æ—¶ï¼Œæ‰ä¼šæœ‰æ–°çš„è®¡ç®—ã€‚</strong></p>
<h2 data-id="heading-7">3ï¼š è®¡ç®—å±æ€§ä¸ºä»€ä¹ˆä¸èƒ½å¼‚æ­¥</h2>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨å»¶æ—¶è¿›è¡Œæ¨¡ä»¿ï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è¿™é‡Œå°±æ˜¯ã€Œè®¿é—®è®¡ç®—å±æ€§ã€ï¼šæ¨¡æ¿æ¸²æŸ“æ—¶ä¼šè¯»å– numDouble çš„å€¼ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"num &lt; 2"</span>&gt;</span>ä¸¤å€æ•°ï¼š{{ numDouble }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">num</span>: <span class="hljs-number">1</span> };
  },
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-title function_">numDouble</span>(<span class="hljs-params"/>) {
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span> * <span class="hljs-number">2</span>;
      }, <span class="hljs-number">1000</span>);
    },
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">numDouble</span>);
  },
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e5f59c20b284dd38f6f7325a9e275cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouJ5LiN5Yqo55qE54yq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767086035&amp;x-signature=2Wg17EQIry85cV7xM1hV0RJP8W4%3D" alt="" loading="lazy"/></p>
<p>ä¸ºä»€ä¹ˆä¼šæ‰“å° underfined å‘¢ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªåŸå› ï¼Ÿ</p>
<h3 data-id="heading-8">åŸå›  1ï¼šJavaScript ä¸­ï¼Œä»»ä½•å‡½æ•°å¦‚æœæ²¡æœ‰æ˜¾å¼å†™Â <code>return</code>Â è¯­å¥ï¼Œæˆ–Â <code>return</code>Â åæ²¡æœ‰è·Ÿéšå…·ä½“å€¼ï¼Œéƒ½ä¼šé»˜è®¤è¿”å›Â <code>undefined</code>ï¼Œè¿™æ˜¯è®¡ç®—å±æ€§è¿”å›Â <code>undefined</code>Â çš„åŸºç¡€åŸå› ã€‚</h3>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">return</span> <span class="hljs-number">11</span>;
        }, <span class="hljs-number">1000</span>);
      }
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">test</span>());
      }, <span class="hljs-number">2000</span>);
</code></pre>
<p>è¿™æ ·å†™æ˜¯å±äºè¯­æ³•çš„é”™è¯¯ã€‚</p>
<h3 data-id="heading-9">åŸå›  2ï¼šsetTimeout çš„å¼‚æ­¥ç‰¹æ€§ï¼ˆå…³é”®ï¼‰</h3>
<p>å³ä½¿ä½ åœ¨Â <code>setTimeout</code>Â å›è°ƒä¸­å†™äº†Â <code>return this.num * 2</code>ï¼Œè¿™ä¸ªè¿”å›å€¼ä¹Ÿæ¯«æ— æ„ä¹‰ï¼Œå› ä¸ºÂ <code>setTimeout</code>æ˜¯<strong>å¼‚æ­¥å®ä»»åŠ¡</strong>ï¼š</p>
<ol>
<li>å½“ Vue è®¿é—®Â <code>this.numDouble</code>Â æ—¶ï¼Œä¼šç«‹å³æ‰§è¡Œè®¡ç®—å±æ€§çš„å‡½æ•°ä½“ï¼›</li>
<li>å‡½æ•°ä½“æ‰§è¡Œåˆ°Â <code>setTimeout</code>Â æ—¶ï¼Œåªä¼šã€Œæ³¨å†Œä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ã€ï¼Œç„¶åç›´æ¥è·³è¿‡Â <code>setTimeout</code>Â ç»§ç»­æ‰§è¡Œï¼›</li>
<li>æ­¤æ—¶è®¡ç®—å±æ€§å‡½æ•°ä½“å·²ç»æ‰§è¡Œå®Œæ¯•ï¼ˆæ²¡æœ‰æ˜¾å¼Â <code>return</code>ï¼‰ï¼Œé»˜è®¤è¿”å›Â <code>undefined</code>ï¼Œå¹¶è¢«Â <code>console.log</code>Â æ‰“å°ï¼›</li>
<li>1 ç§’åï¼Œ<code>setTimeout</code>Â çš„å›è°ƒå‡½æ•°æ‰ä¼šæ‰§è¡Œï¼Œæ­¤æ—¶å›è°ƒä¸­çš„Â <code>return this.num * 2</code>Â åªæ˜¯å›è°ƒå‡½æ•°è‡ªèº«çš„è¿”å›å€¼ï¼Œæ— æ³•ä¼ é€’ç»™è®¡ç®—å±æ€§ï¼Œä¹Ÿæ— æ³•æ”¹å˜ä¹‹å‰å·²ç»è¿”å›çš„Â <code>undefined</code>ã€‚</li>
</ol>
<p><strong>ç®€å•è¯´ï¼šå¼‚æ­¥å›è°ƒçš„è¿”å›å€¼ï¼Œæ— æ³•æˆä¸ºè®¡ç®—å±æ€§çš„è¿”å›å€¼ï¼Œè®¡ç®—å±æ€§ä¼šåœ¨å¼‚æ­¥ä»»åŠ¡æ³¨å†Œåï¼Œç›´æ¥é»˜è®¤è¿”å›</strong> <code>undefined</code> <strong>ã€‚</strong></p>
<h3 data-id="heading-10"><strong>ä¹Ÿå¯ä»¥åˆ†ä¸¤æ­¥èµ°</strong></h3>
<h3 data-id="heading-11">ä¸€ã€å…ˆæ˜ç¡®ï¼šè®¡ç®—å±æ€§çš„å‡½æ•°ä½“ï¼Œ<strong>åªåœ¨ â€œè¢«è®¿é—®â€ æ—¶åŒæ­¥æ‰§è¡Œä¸€æ¬¡ï¼ˆé™¤éæ»¡è¶³é‡æ–°è®¡ç®—æ¡ä»¶ï¼‰</strong></h3>
<p>å½“Â <code>mounted</code>Â ä¸­è®¿é—®Â <code>this.numDouble</code>ï¼Œæˆ–è€…æ¨¡æ¿æ¸²æŸ“è®¿é—®Â <code>numDouble</code>Â æ—¶ï¼ŒVue ä¼š<strong>åŒæ­¥ã€å®Œæ•´åœ°æ‰§è¡Œä¸€é</strong> ****<code>numDouble</code> ****<strong>å‡½æ•°ä½“çš„ä»£ç </strong>ï¼Œä½†è¿™ä¸ªæ‰§è¡Œè¿‡ç¨‹å’ŒÂ <code>setTimeout</code>Â å†…éƒ¨çš„å›è°ƒæ˜¯å®Œå…¨åˆ†ç¦»çš„ï¼š</p>
<h4 data-id="heading-12">ç¬¬ä¸€æ­¥ï¼šè®¡ç®—å±æ€§å‡½æ•°ä½“ã€ŒåŒæ­¥æ‰§è¡Œã€ï¼ˆç¬é—´å®Œæˆï¼Œä¸ç­‰å¾…å¼‚æ­¥ï¼‰</h4>
<p>æˆ‘ä»¬æŠŠÂ <code>numDouble</code>Â çš„æ‰§è¡Œè¿‡ç¨‹æ‹†è§£æˆ â€œé€è¡Œæ‰§è¡Œâ€ï¼Œä½ å°±èƒ½çœ‹æ¸…æµç¨‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">numDouble</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç¬¬1æ­¥ï¼šæ‰§è¡Œ setTimeout è¿™è¡Œä»£ç </span>
  <span class="hljs-comment">// ä½œç”¨ï¼šå‘æµè§ˆå™¨â€œæ³¨å†Œä¸€ä¸ª1ç§’åæ‰§è¡Œçš„å¼‚æ­¥ä»»åŠ¡â€ï¼Œä»…æ­¤è€Œå·²</span>
  <span class="hljs-comment">// æ³¨æ„ï¼šè¿™è¡Œä»£ç æ‰§è¡Œæ—¶ï¼Œä¸ä¼šç­‰å¾…1ç§’ï¼Œä¹Ÿä¸ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°å†…éƒ¨çš„ä»£ç </span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// è¿™æ˜¯å›è°ƒå‡½æ•°ï¼Œæ­¤æ—¶å®Œå…¨æ²¡æœ‰æ‰§è¡Œï¼</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å›è°ƒå‡½æ•°å¼€å§‹æ‰§è¡Œ"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span> * <span class="hljs-number">2</span>;
  }, <span class="hljs-number">1000</span>);

  <span class="hljs-comment">// ç¬¬2æ­¥ï¼šè®¡ç®—å±æ€§å‡½æ•°ä½“æ‰§è¡Œåˆ°æœ«å°¾</span>
  <span class="hljs-comment">// æ²¡æœ‰æ˜¾å¼ returnï¼Œé»˜è®¤è¿”å› undefined</span>
  <span class="hljs-comment">// æ­¤æ—¶ï¼ŒnumDouble å·²ç»å®Œæˆäº†â€œè¿”å›å€¼â€çš„ä¼ é€’ï¼Œæ•´ä¸ªå‡½æ•°ä½“æ‰§è¡Œç»“æŸ</span>
}
</code></pre>
<p>ç®€å•æ¥è¯´å°±æ˜¯<code>numDouble</code>Â å‡½æ•°ä½“çš„æ‰§è¡Œï¼Œåªåšäº†ä¸€ä»¶äº‹ â€”â€”â€œå®‰æ’äº†ä¸€ä¸ª 1 ç§’åçš„ä»»åŠ¡â€ï¼Œç„¶åå°±ç›´æ¥è¿”å›äº†Â <code>undefined</code>ï¼Œå®ƒä¸ä¼šåœä¸‹æ¥ç­‰ 1 ç§’åå›è°ƒæ‰§è¡Œå®Œå†è¿”å›å€¼ã€‚</p>
<h4 data-id="heading-13">ç¬¬äºŒæ­¥ï¼š1 ç§’åï¼Œå¼‚æ­¥å›è°ƒæ‰æ‰§è¡Œï¼Œä½†ä¸ºæ—¶å·²æ™š</h4>
<ol>
<li>è®¡ç®—å±æ€§å·²ç»åœ¨ç¬¬ä¸€æ­¥å°±è¿”å›äº†Â <code>undefined</code>ï¼Œè¿™ä¸ªè¿”å›å€¼å·²ç»è¢«Â <code>console.log</code>Â æ‰“å°ï¼Œä¹Ÿè¢« Vue ç¼“å­˜èµ·æ¥äº†ï¼›</li>
<li>1 ç§’åï¼Œæµè§ˆå™¨æ‰ä¼šæ‰§è¡ŒÂ <code>setTimeout</code>Â çš„å›è°ƒå‡½æ•°ï¼Œæ­¤æ—¶å›è°ƒé‡Œçš„Â <code>return this.num * 2</code>Â åªæ˜¯ â€œå›è°ƒå‡½æ•°è‡ªå·±çš„è¿”å›å€¼â€â€”â€”Â <strong>è¿™ä¸ªå€¼æ²¡æœ‰ä»»ä½•æ¥æ”¶è€…ï¼Œæ—¢ä¸èƒ½ä¼ ç»™</strong> <code>numDouble</code> <strong>ï¼Œä¹Ÿä¸èƒ½æ”¹å˜ä¹‹å‰å·²ç»è¿”å›çš„</strong> <code>undefined</code> <strong>ï¼›</strong></li>
<li>æ›´å…³é”®çš„æ˜¯ï¼šå›è°ƒæ‰§è¡Œæ—¶ï¼Œ<code>numDouble</code>Â å‡½æ•°ä½“æ—©å°±æ‰§è¡Œå®Œæ¯•äº†ï¼Œ<strong>ä¸¤è€…æ˜¯å®Œå…¨ç‹¬ç«‹çš„æ‰§è¡Œæµç¨‹</strong>ï¼Œå›è°ƒçš„è¿”å›å€¼æ— æ³• â€œå›æº¯â€ ç»™å·²ç»æ‰§è¡Œå®Œçš„è®¡ç®—å±æ€§ã€‚</li>
</ol>
<h3 data-id="heading-14">ç®€å•æ¥è®²å°±æ˜¯ï¼š</h3>
<p><strong>è®¡ç®—å±æ€§æ˜¯è¦å†…ç½®è¿”å›ä¸€ä¸ªç»“æœçš„ï¼Œå¦‚æœåŠ å…¥å¼‚æ­¥å°±ä¼šå› ä¸ºæ‰§è¡Œé¡ºè®¯è¿”å›ä¸€ä¸ªundefinedï¼Œç›‘å¬æ˜¯åœ¨äº‹ä»¶è§¦å‘åå¯¹å†™å…¥çš„å›è°ƒå‡½æ•°çš„è°ƒç”¨ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ç¯‡æå®š dotnet efï¼šEF Core å¸¸ç”¨å‘½ä»¤ä¸å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7586570254860582952</link>    <guid>https://juejin.cn/post/7586570254860582952</guid>    <pubDate>2025-12-22T22:58:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586570254860582952" data-draft-id="7586518130761728040" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ç¯‡æå®š dotnet efï¼šEF Core å¸¸ç”¨å‘½ä»¤ä¸å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="C#,.NET"/> <meta itemprop="datePublished" content="2025-12-22T22:58:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”é’æ«"/> <meta itemprop="url" content="https://juejin.cn/user/3737995266234280"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ç¯‡æå®š dotnet efï¼šEF Core å¸¸ç”¨å‘½ä»¤ä¸å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3737995266234280/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”é’æ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T22:58:00.000Z" title="Mon Dec 22 2025 22:58:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">åŸºç¡€çŸ¥è¯†</h3>

























<table><thead><tr><th>é¡¹ç›®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>EF Core</strong></td><td>.NET çš„ ORM æ¡†æ¶ï¼Œæ”¯æŒ Code Firstã€Database Firstã€‚</td></tr><tr><td><strong>dotnet ef</strong></td><td>ä¸€ä¸ª <strong>CLI å·¥å…·</strong>ï¼Œç”¨äºç®¡ç† EF Core è¿ç§»ã€æ•°æ®åº“æ“ä½œã€‚</td></tr><tr><td><strong>å®‰è£…æ–¹å¼</strong></td><td>é€šå¸¸å®‰è£…åœ¨é¡¹ç›®ä¸­ï¼ˆæ¨èï¼‰ï¼š<br/><code>dotnet add package Microsoft.EntityFrameworkCore.Design</code><br/>å…¨å±€å·¥å…·ï¼š<code>dotnet tool install --global dotnet-ef</code></td></tr><tr><td><strong>ä½¿ç”¨ä½ç½®</strong></td><td>åœ¨åŒ…å« <code>*.csproj</code> çš„ç›®å½•æ‰§è¡Œï¼Œæˆ–è€…ä½¿ç”¨ <code>--project</code> æŒ‡å®šé¡¹ç›®è·¯å¾„ã€‚</td></tr></tbody></table>
<blockquote>
<p>åœ¨æ‰§è¡Œä»»ä½• dotnet ef å‘½ä»¤å‰ï¼Œéœ€è¦åœ¨ csproj ä¸­åŒ…å« Microsoft.EntityFrameworkCore.Design åŒ…ã€‚</p>
</blockquote>
<h3 data-id="heading-1">å‘½ä»¤æ€»è§ˆ</h3>




























































<table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td><code>dotnet ef migrations add</code></td><td>æ·»åŠ æ–°çš„æ•°æ®åº“è¿ç§»</td><td>å¢åŠ æˆ–ä¿®æ”¹å®ä½“æ¨¡å‹å</td></tr><tr><td><code>dotnet ef migrations list</code></td><td>æŸ¥çœ‹å·²æœ‰è¿ç§»</td><td>ç¡®è®¤æ•°æ®åº“ç‰ˆæœ¬</td></tr><tr><td><code>dotnet ef migrations remove</code></td><td>åˆ é™¤æœ€æ–°è¿ç§»</td><td>å›æ»šåˆšæ·»åŠ ä½†æœªåº”ç”¨çš„è¿ç§»</td></tr><tr><td><code>dotnet ef migrations script</code></td><td>ç”Ÿæˆ SQL è„šæœ¬</td><td>æ‰‹å·¥æ‰§è¡Œè¿ç§»</td></tr><tr><td><code>dotnet ef database update</code></td><td>æ›´æ–°æ•°æ®åº“åˆ°æŒ‡å®šè¿ç§»</td><td>åŒæ­¥æ•°æ®åº“ä¸æ¨¡å‹</td></tr><tr><td><code>dotnet ef database drop</code></td><td>åˆ é™¤æ•°æ®åº“</td><td>é‡ç½®å¼€å‘ç¯å¢ƒ</td></tr><tr><td><code>dotnet ef dbcontext info</code></td><td>æŸ¥çœ‹ DbContext ä¿¡æ¯</td><td>è°ƒè¯•ä¸Šä¸‹æ–‡é…ç½®</td></tr><tr><td><code>dotnet ef dbcontext list</code></td><td>åˆ—å‡ºå¯ç”¨ DbContext</td><td>å¤šä¸Šä¸‹æ–‡é¡¹ç›®</td></tr><tr><td><code>dotnet ef dbcontext scaffold</code></td><td>æ ¹æ®ç°æœ‰æ•°æ®åº“ç”Ÿæˆå®ä½“</td><td>Database First é€†å‘å·¥ç¨‹</td></tr><tr><td><code>dotnet ef dbcontext optimize</code></td><td>é¢„ç”Ÿæˆæ¨¡å‹å¿«ç…§ä»¥æå‡å¯åŠ¨é€Ÿåº¦</td><td>é«˜æ€§èƒ½åœºæ™¯</td></tr></tbody></table>
<h3 data-id="heading-2">å¸¸ç”¨å‘½ä»¤è¯¦è§£ + ç¤ºä¾‹</h3>
<h4 data-id="heading-3">åˆ›å»ºè¿ç§»</h4>
<pre><code class="hljs language-shell" lang="shell">dotnet ef migrations add InitialCreate
</code></pre>
<p>åœ¨ <code>Migrations</code>/ ç›®å½•ä¸‹ç”Ÿæˆï¼š</p>
<ul>
<li>
<p><code>YYYYMMDDHHMMSS_InitialCreate.cs</code>ï¼šè¿ç§»ä»£ç </p>
</li>
<li>
<p><code>AppDbContextModelSnapshot.cs</code>ï¼šæ¨¡å‹å¿«ç…§æ–‡ä»¶</p>
</li>
</ul>
<p>å¸¸ç”¨å‚æ•°ï¼š</p>






























<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>--project</code></td><td>æŒ‡å®šå¯åŠ¨é¡¹ç›®</td><td><code>--project ./MyApp</code></td></tr><tr><td><code>--startup-project</code></td><td>æŒ‡å®šåŒ…å« <code>Program.cs</code> çš„å¯åŠ¨é¡¹ç›®</td><td><code>--startup-project ./MyApp.Web</code></td></tr><tr><td><code>--context</code></td><td>æŒ‡å®š DbContext</td><td><code>--context AppDbContext</code></td></tr><tr><td><code>--output-dir</code></td><td>æŒ‡å®šè¿ç§»æ–‡ä»¶å¤¹</td><td><code>--output-dir Data/Migrations</code></td></tr></tbody></table>
<blockquote>
<p>åœ¨å¤šé¡¹ç›®æ¶æ„ä¸­ï¼ˆå¦‚åˆ†ç¦» <code>DAL</code>/å¯åŠ¨é¡¹ç›®ï¼‰ï¼ŒåŠ¡å¿…åŒæ—¶æŒ‡å®š <code>--project</code> å’Œ <code>--startup-project</code>ã€‚</p>
</blockquote>
<h4 data-id="heading-4">åº”ç”¨è¿ç§»</h4>
<pre><code class="hljs language-shell" lang="shell">dotnet ef database update
</code></pre>
<ul>
<li>
<p>å°†æ•°æ®åº“æ›´æ–°åˆ°æœ€æ–°è¿ç§»ã€‚</p>
</li>
<li>
<p>å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºã€‚</p>
</li>
</ul>
<p>å¯æŒ‡å®šç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">dotnet ef database update InitialCreate
</code></pre>
<p>å°†æ•°æ®åº“å›æ»šåˆ°æŒ‡å®šè¿ç§»ï¼ˆæˆ–å‡çº§åˆ°æŸä¸ªä¸­é—´ç‰ˆæœ¬ï¼‰ã€‚</p>
<h4 data-id="heading-5">æŸ¥çœ‹è¿ç§»</h4>
<pre><code class="hljs language-shell" lang="shell">dotnet ef migrations list
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs">20250922121212_InitialCreate
20250923104530_AddUserTable
</code></pre>
<h4 data-id="heading-6">åˆ é™¤è¿ç§»</h4>
<pre><code class="hljs language-shell" lang="shell">dotnet ef migrations remove
</code></pre>
<ul>
<li>
<p>åˆ é™¤æœ€æ–°è¿ç§»æ–‡ä»¶ã€‚</p>
</li>
<li>
<p>ä»…é™æœªæ‰§è¡Œ <code>database update</code> çš„è¿ç§»ã€‚</p>
</li>
</ul>
<h4 data-id="heading-7">ç”Ÿæˆ SQL è„šæœ¬</h4>
<pre><code class="hljs language-shell" lang="shell">dotnet ef migrations script
</code></pre>
<ul>
<li>
<p>ç”Ÿæˆä»åˆå§‹æ•°æ®åº“åˆ°æœ€æ–°è¿ç§»çš„ <code>SQL</code> è„šæœ¬ã€‚</p>
</li>
<li>
<p>å¯æŒ‡å®šèµ·æ­¢è¿ç§»ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-shell" lang="shell">dotnet ef migrations script InitialCreate AddUserTable -o update.sql
</code></pre>
<h4 data-id="heading-8">åˆ é™¤æ•°æ®åº“</h4>
<pre><code class="hljs language-shell" lang="shell">dotnet ef database drop
</code></pre>
<ul>
<li>
<p>äº¤äº’å¼ç¡®è®¤ååˆ é™¤æ•°æ®åº“ã€‚</p>
</li>
<li>
<p>å¯åŠ  <code>--force</code> è·³è¿‡ç¡®è®¤ã€‚</p>
</li>
</ul>
<h4 data-id="heading-9">æŸ¥çœ‹ DbContext ä¿¡æ¯</h4>
<pre><code class="hljs language-shell" lang="shell">dotnet ef dbcontext info
</code></pre>
<p>è¾“å‡ºæ•°æ®åº“æä¾›ç¨‹åºã€è¿æ¥å­—ç¬¦ä¸²ç­‰ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-10">åˆ—å‡º DbContext</h4>
<pre><code class="hljs language-shell" lang="shell">dotnet ef dbcontext list
</code></pre>
<p>ç”¨äºå¤šä¸Šä¸‹æ–‡é¡¹ç›®ï¼Œå¯å¿«é€Ÿç¡®è®¤å¯ç”¨çš„ <code>DbContext</code>ã€‚</p>
<h4 data-id="heading-11">æ•°æ®åº“é€†å‘ç”Ÿæˆå®ä½“ (Database First)</h4>
<pre><code class="hljs language-shell" lang="shell">dotnet ef dbcontext scaffold \
"Server=localhost;Database=MyDb;User Id=sa;Password=Passw0rd;" \
Microsoft.EntityFrameworkCore.SqlServer \
--output-dir Models --context MyDbContext
</code></pre>
<p>å¸¸ç”¨å‚æ•°ï¼š</p>





























<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>--schema</code></td><td>æŒ‡å®šæ•°æ®åº“æ¨¡å¼</td></tr><tr><td><code>--table</code></td><td>æŒ‡å®šè¡¨ï¼ˆå¯å¤šæ¬¡æŒ‡å®šï¼‰</td></tr><tr><td><code>--context-dir</code></td><td>æŒ‡å®š DbContext æ–‡ä»¶å¤¹</td></tr><tr><td><code>--force</code></td><td>è¦†ç›–å·²æœ‰æ–‡ä»¶</td></tr><tr><td><code>--use-database-names</code></td><td>ä¿ç•™æ•°æ®åº“åŸå§‹å‘½åï¼ˆä¸åš PascalCase è½¬æ¢ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-12">æ¨¡å‹é¢„ç¼–è¯‘ä¼˜åŒ–</h4>
<p><code>EF Core 6+</code> æä¾›ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">dotnet ef dbcontext optimize
</code></pre>
<ul>
<li>
<p>åœ¨ç¼–è¯‘æ—¶é¢„ç”Ÿæˆæ¨¡å‹å…ƒæ•°æ®ï¼Œæå‡å¯åŠ¨é€Ÿåº¦ã€‚</p>
</li>
<li>
<p>é€‚åˆå¤§å‹æ•°æ®åº“æˆ–é«˜æ€§èƒ½åœºæ™¯ã€‚</p>
</li>
</ul>
<h3 data-id="heading-13">å¼€å‘å¸¸ç”¨æµç¨‹ç¤ºä¾‹</h3>
<h4 data-id="heading-14">Code First å¼€å‘æµç¨‹</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">1. æ·»åŠ åˆå§‹è¿ç§»</span>
dotnet ef migrations add InitialCreate
<span class="hljs-meta prompt_">
# </span><span class="bash">2. åˆ›å»º/æ›´æ–°æ•°æ®åº“</span>
dotnet ef database update
<span class="hljs-meta prompt_">
# </span><span class="bash">3. ä¿®æ”¹å®ä½“æ¨¡å‹åç”Ÿæˆæ–°è¿ç§»</span>
dotnet ef migrations add AddUserTable
<span class="hljs-meta prompt_">
# </span><span class="bash">4. åº”ç”¨åˆ°æ•°æ®åº“</span>
dotnet ef database update
</code></pre>
<h4 data-id="heading-15">Database First å¼€å‘æµç¨‹</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ä»ç°æœ‰æ•°æ®åº“ç”Ÿæˆå®ä½“ä¸ä¸Šä¸‹æ–‡</span>
dotnet ef dbcontext scaffold \
"Server=localhost;Database=MyDb;User Id=sa;Password=Passw0rd;" \
Microsoft.EntityFrameworkCore.SqlServer \
--output-dir Models
</code></pre>
<h3 data-id="heading-16">å¸¸è§é—®é¢˜ä¸æŠ€å·§</h3>





























<table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>æ‰¾ä¸åˆ° <code>dotnet ef</code> å‘½ä»¤</strong></td><td><code>dotnet tool install --global dotnet-ef</code></td></tr><tr><td><strong>æç¤ºæ‰¾ä¸åˆ° DbContext</strong></td><td>æ£€æŸ¥ <code>--startup-project</code> æˆ– <code>--context</code> æ˜¯å¦æŒ‡å®šæ­£ç¡®</td></tr><tr><td><strong>è·¨é¡¹ç›®è°ƒç”¨å¤±è´¥</strong></td><td>ä½¿ç”¨ <code>--project</code> æŒ‡å®šåŒ…å«è¿ç§»çš„ç±»åº“é¡¹ç›®ï¼Œ<code>--startup-project</code> æŒ‡å®šå¯åŠ¨é¡¹ç›®</td></tr><tr><td><strong>æ•°æ®åº“è¿æ¥ä¸ç”Ÿæ•ˆ</strong></td><td>æ£€æŸ¥ <code>Program.cs</code> ä¸­ <code>UseSqlServer/UseNpgsql</code> é…ç½®</td></tr><tr><td><strong>ç”Ÿäº§ç¯å¢ƒæ‰‹åŠ¨éƒ¨ç½²</strong></td><td>ä½¿ç”¨ <code>dotnet ef migrations script</code> ç”Ÿæˆ SQL å¹¶åœ¨ DBA å®¡æ ¸åæ‰§è¡Œ</td></tr></tbody></table>
<h3 data-id="heading-17">æ€»ç»“</h3>





























<table><thead><tr><th>å‘½ä»¤</th><th>åœºæ™¯</th></tr></thead><tbody><tr><td><code>dotnet ef migrations add</code></td><td><strong>åˆ›å»ºè¿ç§»</strong></td></tr><tr><td><code>dotnet ef database update</code></td><td><strong>åŒæ­¥æ•°æ®åº“</strong></td></tr><tr><td><code>dotnet ef migrations list</code></td><td><strong>æŸ¥çœ‹è¿ç§»å†å²</strong></td></tr><tr><td><code>dotnet ef dbcontext scaffold</code></td><td><strong>é€†å‘å·¥ç¨‹</strong></td></tr><tr><td><code>dotnet ef migrations script</code></td><td><strong>ç”Ÿæˆ SQL è„šæœ¬</strong></td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹å†™ä¸€ä¸ª Askama æ¨¡æ¿å‹ç¼©å·¥å…·]]></title>    <link>https://juejin.cn/post/7586872817876074522</link>    <guid>https://juejin.cn/post/7586872817876074522</guid>    <pubDate>2025-12-23T13:56:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586872817876074522" data-draft-id="7586877892467916827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹å†™ä¸€ä¸ª Askama æ¨¡æ¿å‹ç¼©å·¥å…·"/> <meta itemprop="keywords" content="æ€§èƒ½ä¼˜åŒ–,Rust,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-23T13:56:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jump_jump"/> <meta itemprop="url" content="https://juejin.cn/user/4230576474692765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹å†™ä¸€ä¸ª Askama æ¨¡æ¿å‹ç¼©å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4230576474692765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jump_jump
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T13:56:07.000Z" title="Tue Dec 23 2025 13:56:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    32
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Web å¼€å‘ä¸­ï¼Œå‰ç«¯èµ„æºçš„å¤§å°ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒã€‚å¤§å‹æ¨¡æ¿æ–‡ä»¶ä¸ä»…å ç”¨å¸¦å®½ï¼Œè¿˜ä¼šå»¶é•¿é¡µé¢åŠ è½½æ—¶é—´ã€‚è™½ç„¶å¸‚é¢ä¸Šæœ‰å¾ˆå¤š HTML å‹ç¼©å·¥å…·ï¼Œä½†å¯¹äºä½¿ç”¨äº†æ¨¡æ¿å¼•æ“çš„ HTML æ–‡ä»¶ï¼ˆå¦‚ Askamaã€Jinja2 ç­‰ï¼‰ï¼Œé€šç”¨å‹ç¼©å™¨å¾€å¾€ä¼šç ´åæ¨¡æ¿è¯­æ³•ã€‚</p>
<p>äºæ˜¯ä¸ªäººå†™äº†ä¸€ä¸ª Askama æ¨¡æ¿å‹ç¼©å·¥å…· askama-minifyï¼Œä¸“é—¨ç”¨äºå‹ç¼© Askama æ¨¡æ¿æ–‡ä»¶ï¼ŒåŒæ—¶å®Œç¾ä¿ç•™æ¨¡æ¿è¯­æ³•ã€‚</p>
<h2 data-id="heading-0">Askama ä¸ºä»€ä¹ˆè¦å‹ç¼©</h2>
<h3 data-id="heading-1">æ¨¡æ¿æ–‡ä»¶å ç”¨çš„ç©ºé—´</h3>
<p>åœ¨å®é™…çš„ Web é¡¹ç›®ä¸­ï¼Œæ¨¡æ¿æ–‡ä»¶å¾€å¾€å æ®ç›¸å½“å¤§çš„ä½“ç§¯ï¼š</p>





























<table><thead><tr><th>é¡¹ç›®ç±»å‹</th><th>æ¨¡æ¿æ•°é‡</th><th>æ€»å¤§å°</th><th>å‹ç¼©åå¤§å°</th></tr></thead><tbody><tr><td>å°å‹ç½‘ç«™</td><td>10-20</td><td>200-500KB</td><td>100-250KB</td></tr><tr><td>ä¸­å‹åº”ç”¨</td><td>50-100</td><td>1-3MB</td><td>500KB-1.5MB</td></tr><tr><td>å¤§å‹ç³»ç»Ÿ</td><td>200+</td><td>5-10MB</td><td>2-5MB</td></tr></tbody></table>
<h3 data-id="heading-2">å‹ç¼©çš„å¥½å¤„</h3>
<ol>
<li><strong>å‡å°‘å¸¦å®½æ¶ˆè€—</strong>ï¼šæ¨¡æ¿å¤§å°å‡å°‘ 40-55%ï¼Œç›´æ¥é™ä½æµé‡æˆæœ¬</li>
<li><strong>åŠ å¿«é¡µé¢åŠ è½½</strong>ï¼šæ›´å°çš„æ–‡ä»¶æ„å‘³ç€æ›´å¿«çš„ä¼ è¾“é€Ÿåº¦</li>
<li><strong>æå‡ç”¨æˆ·ä½“éªŒ</strong>ï¼šé¦–å±æ¸²æŸ“æ—¶é—´ç¼©çŸ­ï¼Œç‰¹åˆ«æ˜¯ç§»åŠ¨ç«¯ç”¨æˆ·</li>
<li><strong>é™ä½æœåŠ¡å™¨è´Ÿè½½</strong>ï¼šä¼ è¾“æ•°æ®é‡å‡å°‘ï¼ŒæœåŠ¡å™¨å‹åŠ›é™ä½</li>
<li><strong>èŠ‚çœå­˜å‚¨ç©ºé—´</strong>ï¼šç”Ÿäº§ç¯å¢ƒçš„æ¨¡æ¿æ–‡ä»¶å ç”¨æ›´å°‘ç©ºé—´</li>
</ol>
<h3 data-id="heading-3">Askama è‡ªå¸¦çš„å‹ç¼©é…ç½®</h3>
<p>Askama æœ¬èº«æä¾›äº† whitespace æ§åˆ¶åŠŸèƒ½ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <code>askama.toml</code> ä¸­é…ç½®ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[general]</span>
<span class="hljs-comment"># ä¸‰ç§æ¨¡å¼å¯é€‰</span>
<span class="hljs-attr">whitespace</span> = <span class="hljs-string">"suppress"</span>   <span class="hljs-comment"># æˆ– "minimize" / "preserve"</span>
</code></pre>
<p><strong>ä¸‰ç§æ¨¡å¼å¯¹æ¯”ï¼š</strong></p>

























<table><thead><tr><th>æ¨¡å¼</th><th>è¡Œä¸º</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>preserve</code></td><td>ä¿ç•™æ‰€æœ‰ç©ºç™½ï¼ˆé»˜è®¤ï¼‰</td><td>å¼€å‘è°ƒè¯•</td></tr><tr><td><code>suppress</code></td><td>æ¿€è¿›ç§»é™¤ç©ºç™½</td><td>ç”Ÿäº§ç¯å¢ƒ</td></tr><tr><td><code>minimize</code></td><td>é€‚åº¦ç§»é™¤ç©ºç™½</td><td>å¹³è¡¡æ¨¡å¼</td></tr></tbody></table>
<p>ä¹Ÿå¯ä»¥åœ¨å•ä¸ªæ¨¡æ¿ä¸Šè¦†ç›–ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Template)]</span>
<span class="hljs-meta">#[template(path = <span class="hljs-string">"example.html"</span>, whitespace = <span class="hljs-string">"suppress"</span>)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ExampleTemplate</span>;
</code></pre>
<h3 data-id="heading-4">Askama è‡ªå¸¦å‹ç¼©çš„å±€é™æ€§</h3>
<p>Askama çš„ whitespace æ§åˆ¶æœ‰ä»¥ä¸‹é™åˆ¶ï¼š</p>
<ol>
<li><strong>åªå¤„ç†ç©ºç™½å­—ç¬¦</strong>ï¼šä¸èƒ½ç§»é™¤ HTML æ³¨é‡Š <code>&lt;!-- --&gt;</code></li>
<li><strong>ä¸å½±å“ CSS</strong>ï¼š<code>&lt;style&gt;</code> æ ‡ç­¾å†…çš„ CSS å®Œå…¨ä¿ç•™</li>
<li><strong>ä¸å½±å“ JavaScript</strong>ï¼š<code>&lt;script&gt;</code> æ ‡ç­¾å†…çš„ JS å®Œå…¨ä¿ç•™</li>
<li><strong>ä¸ä¼˜åŒ–ä»£ç </strong>ï¼šæ— æ³•è¿›è¡Œå±æ€§åˆå¹¶ã€é¢œè‰²ä¼˜åŒ–ç­‰</li>
</ol>
<p><strong>ç¤ºä¾‹å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- åŸå§‹æ¨¡æ¿ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> {
        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0</span>;
        <span class="hljs-comment">/* è¿™æ˜¯ CSS æ³¨é‡Š */</span>
        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ff0000</span>;
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// è¿™æ˜¯ JS æ³¨é‡Š</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello"</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- Askama whitespace = "suppress" çš„ç»“æœ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-tag">body</span>{<span class="hljs-attribute">margin-top</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">margin-bottom</span>:<span class="hljs-number">0</span>;<span class="hljs-comment">/*è¿™æ˜¯CSSæ³¨é‡Š*/</span><span class="hljs-attribute">background-color</span>:<span class="hljs-number">#ff0000</span>;}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"><span class="hljs-comment">//è¿™æ˜¯JSæ³¨é‡Š</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello"</span>);</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- askama-minify çš„ç»“æœ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-tag">body</span>{<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span> <span class="hljs-number">0</span>;<span class="hljs-attribute">background-color</span>:red}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello"</span>);</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œaskama-minify åšå¾—æ›´å½»åº•ï¼š</p>
<ul>
<li>ç§»é™¤äº†æ‰€æœ‰æ³¨é‡Š</li>
<li>åˆå¹¶äº† CSS å±æ€§</li>
<li>ä¼˜åŒ–äº†é¢œè‰²å€¼</li>
<li>å‹ç¼©äº† JavaScript</li>
</ul>
<h2 data-id="heading-5">é¡¹ç›®æ¼”è¿›</h2>
<p>ä»»ä½•é¡¹ç›®éƒ½ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œä¸‹é¢æ˜¯å…³äº askama-minify åº“çš„ç¼–å†™æ€è·¯ã€‚å¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰ä¸€äº›å¸®åŠ©ã€‚</p>
<h2 data-id="heading-6">ä¸ºä»€ä¹ˆéœ€è¦ä¸“é—¨çš„å·¥å…·ï¼ˆè¡¥å……ï¼‰</h2>
<p>åœ¨ä½¿ç”¨ Askama è¿™æ ·çš„ Rust æ¨¡æ¿å¼•æ“æ—¶ï¼Œæˆ‘ä»¬çš„æ¨¡æ¿æ–‡ä»¶ä¸­ä¼šåŒ…å«ç‰¹æ®Šçš„è¯­æ³•ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- Askama æ¨¡æ¿è¯­æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
{% for item in items %}
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
{% endfor %}
</code></pre>
<p>é€šç”¨çš„ HTML å‹ç¼©å™¨ï¼ˆå¦‚ html-minifierï¼‰å¯èƒ½ä¼šï¼š</p>
<ul>
<li>å°† <code>{{ }}</code> è¯†åˆ«ä¸ºæ— æ•ˆè¯­æ³•è€Œç ´å</li>
<li>å°† <code>{% %}</code> ä¸­çš„ç©ºæ ¼é”™è¯¯å¤„ç†</li>
<li>æ— æ³•åŒºåˆ†æ¨¡æ¿è¯­æ³•å’Œæ™®é€šæ–‡æœ¬</li>
</ul>
<p>å› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸“é—¨è®¾è®¡çš„å‹ç¼©å·¥å…·ã€‚</p>
<h2 data-id="heading-7">ç®€å•çš„ HTML å‹ç¼©</h2>
<p>æœ€åŸºç¡€çš„ HTML å‹ç¼©éå¸¸ç®€å•ï¼šç§»é™¤å¤šä½™çš„ç©ºç™½å­—ç¬¦å³å¯ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">minify_html_simple</span>(content: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">result</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(content.<span class="hljs-title function_ invoke__">len</span>());
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">last_was_space</span> = <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">for</span> <span class="hljs-variable">ch</span> <span class="hljs-keyword">in</span> content.<span class="hljs-title function_ invoke__">chars</span>() {
        <span class="hljs-keyword">if</span> ch.<span class="hljs-title function_ invoke__">is_whitespace</span>() {
            <span class="hljs-keyword">if</span> !last_was_space &amp;&amp; !result.<span class="hljs-title function_ invoke__">is_empty</span>() {
                result.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">' '</span>);
                last_was_space = <span class="hljs-literal">true</span>;
            }
        } <span class="hljs-keyword">else</span> {
            result.<span class="hljs-title function_ invoke__">push</span>(ch);
            last_was_space = <span class="hljs-literal">false</span>;
        }
    }

    result
}
</code></pre>
<p>è¿™ä¸ªç®€å•ç‰ˆæœ¬ä¼šå°†ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>   Hello   <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>å‹ç¼©ä¸ºï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> Hello <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>ä½†è¿™æ ·è¿˜ä¸å¤Ÿâ€”â€”æˆ‘ä»¬éœ€è¦ï¼š</p>
<ol>
<li>ç§»é™¤ HTML æ³¨é‡Š</li>
<li>å¤„ç†ç‰¹æ®Šæ ‡ç­¾ï¼ˆ<code>&lt;pre&gt;</code>, <code>&lt;textarea&gt;</code>ï¼‰</li>
<li>ä¿ç•™æ¨¡æ¿è¯­æ³•</li>
</ol>
<h2 data-id="heading-8">ä¿ç•™æ¨¡æ¿è¯­æ³•</h2>
<p>æ¨¡æ¿è¯­æ³•çš„ä¿ç•™æ˜¯æœ¬å·¥å…·çš„æ ¸å¿ƒã€‚æˆ‘ä»¬éœ€è¦åœ¨é‡åˆ° <code>{{</code> å’Œ <code>{%</code> æ—¶ï¼Œä¿æŒåŸæ ·è¾“å‡ºï¼Œç›´åˆ°é‡åˆ°å¯¹åº”çš„ <code>}}</code> å’Œ <code>%}</code>ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">minify_html</span>(content: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">result</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(content.<span class="hljs-title function_ invoke__">len</span>());
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">chars</span> = content.<span class="hljs-title function_ invoke__">chars</span>().<span class="hljs-title function_ invoke__">peekable</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">in_template_brace</span> = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// {{ }}</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">in_template_chevron</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// {% %}</span>

    <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(ch) = chars.<span class="hljs-title function_ invoke__">next</span>() {
        <span class="hljs-comment">// æ£€æµ‹æ¨¡æ¿è¯­æ³•å¼€å§‹</span>
        <span class="hljs-keyword">if</span> ch == <span class="hljs-string">'{'</span> {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(&amp;next_ch) = chars.<span class="hljs-title function_ invoke__">peek</span>() {
                <span class="hljs-keyword">if</span> next_ch == <span class="hljs-string">'{'</span> {
                    in_template_brace = <span class="hljs-literal">true</span>;
                    result.<span class="hljs-title function_ invoke__">push</span>(ch);
                    <span class="hljs-keyword">continue</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> next_ch == <span class="hljs-string">'%'</span> {
                    in_template_chevron = <span class="hljs-literal">true</span>;
                    result.<span class="hljs-title function_ invoke__">push</span>(ch);
                    <span class="hljs-keyword">continue</span>;
                }
            }
        }

        <span class="hljs-comment">// åœ¨æ¨¡æ¿è¯­æ³•å†…ï¼Œä¿æŒåŸæ ·</span>
        <span class="hljs-keyword">if</span> in_template_brace || in_template_chevron {
            result.<span class="hljs-title function_ invoke__">push</span>(ch);
            <span class="hljs-comment">// æ£€æµ‹æ¨¡æ¿è¯­æ³•ç»“æŸ</span>
            <span class="hljs-keyword">if</span> in_template_brace &amp;&amp; ch == <span class="hljs-string">'}'</span> &amp;&amp; result.<span class="hljs-title function_ invoke__">ends_with</span>(<span class="hljs-string">"}}"</span>) {
                in_template_brace = <span class="hljs-literal">false</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> in_template_chevron &amp;&amp; ch == <span class="hljs-string">'}'</span> &amp;&amp; result.<span class="hljs-title function_ invoke__">ends_with</span>(<span class="hljs-string">"%}"</span>) {
                in_template_chevron = <span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-comment">// ... å…¶ä»–å¤„ç†é€»è¾‘</span>
    }

    result
}
</code></pre>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">è¾“å…¥: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
è¾“å‡º: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>  <span class="hljs-comment">// å®Œç¾ä¿ç•™</span>

è¾“å…¥: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>  {{  title  }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
è¾“å‡º: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span> {{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>  <span class="hljs-comment">// æ¨¡æ¿å¤–ç©ºæ ¼å‹ç¼©ï¼Œæ¨¡æ¿å†…ä¿ç•™</span>
</code></pre>
<h2 data-id="heading-9">ç§»é™¤ HTML æ³¨é‡Š</h2>
<p>HTML æ³¨é‡Šçš„ç§»é™¤éœ€è¦å°å¿ƒï¼Œä¸èƒ½ç ´åå­—ç¬¦ä¸²ä¸­çš„ <code>&lt;!--</code>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// HTML æ³¨é‡Šå¤„ç†ï¼ˆåªåœ¨ä¸åœ¨ script/style å†…æ—¶å¤„ç†ï¼‰</span>
<span class="hljs-keyword">if</span> !in_script &amp;&amp; !in_style &amp;&amp; ch == <span class="hljs-string">'&lt;'</span> &amp;&amp; chars.<span class="hljs-title function_ invoke__">peek</span>() == <span class="hljs-title function_ invoke__">Some</span>(&amp;<span class="hljs-string">'!'</span>) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">comment</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"&lt;"</span>);
    comment.<span class="hljs-title function_ invoke__">push</span>(chars.<span class="hljs-title function_ invoke__">next</span>().<span class="hljs-title function_ invoke__">unwrap</span>()); <span class="hljs-comment">// '!'</span>

    <span class="hljs-keyword">if</span> chars.<span class="hljs-title function_ invoke__">peek</span>() == <span class="hljs-title function_ invoke__">Some</span>(&amp;<span class="hljs-string">'-'</span>) {
        comment.<span class="hljs-title function_ invoke__">push</span>(chars.<span class="hljs-title function_ invoke__">next</span>().<span class="hljs-title function_ invoke__">unwrap</span>()); <span class="hljs-comment">// first '-'</span>
        <span class="hljs-keyword">if</span> chars.<span class="hljs-title function_ invoke__">peek</span>() == <span class="hljs-title function_ invoke__">Some</span>(&amp;<span class="hljs-string">'-'</span>) {
            comment.<span class="hljs-title function_ invoke__">push</span>(chars.<span class="hljs-title function_ invoke__">next</span>().<span class="hljs-title function_ invoke__">unwrap</span>()); <span class="hljs-comment">// second '-'</span>
            <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªæ³¨é‡Šï¼Œè·³è¿‡ç›´åˆ° --&gt;</span>
            <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(c) = chars.<span class="hljs-title function_ invoke__">next</span>() {
                comment.<span class="hljs-title function_ invoke__">push</span>(c);
                <span class="hljs-keyword">if</span> comment.<span class="hljs-title function_ invoke__">ends_with</span>(<span class="hljs-string">"--&gt;"</span>) {
                    <span class="hljs-keyword">break</span>;
                }
            }
            <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// è·³è¿‡æ³¨é‡Š</span>
        }
    }
    result.<span class="hljs-title function_ invoke__">push_str</span>(&amp;comment);
    <span class="hljs-keyword">continue</span>;
}
</code></pre>
<h2 data-id="heading-10">å¤„ç†ç‰¹æ®Šæ ‡ç­¾</h2>
<p>æŸäº›æ ‡ç­¾ï¼ˆå¦‚ <code>&lt;pre&gt;</code> å’Œ <code>&lt;textarea&gt;</code>ï¼‰çš„å†…å®¹éœ€è¦å®Œå…¨ä¿ç•™åŸæ ·ï¼ŒåŒ…æ‹¬ç©ºæ ¼å’Œæ¢è¡Œï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">in_pre</span> = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">in_textarea</span> = <span class="hljs-literal">false</span>;

<span class="hljs-comment">// åœ¨æ ‡ç­¾æ£€æµ‹æ—¶</span>
<span class="hljs-keyword">if</span> tag_name == <span class="hljs-string">"pre"</span> {
    in_pre = <span class="hljs-literal">true</span>;
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> tag_name == <span class="hljs-string">"textarea"</span> {
    in_textarea = <span class="hljs-literal">true</span>;
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> tag_name == <span class="hljs-string">"/pre"</span> {
    in_pre = <span class="hljs-literal">false</span>;
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> tag_name == <span class="hljs-string">"/textarea"</span> {
    in_textarea = <span class="hljs-literal">false</span>;
}

<span class="hljs-comment">// åœ¨å­—ç¬¦å¤„ç†æ—¶</span>
<span class="hljs-keyword">if</span> in_pre || in_textarea {
    result.<span class="hljs-title function_ invoke__">push</span>(ch);  <span class="hljs-comment">// å®Œå…¨ä¿ç•™</span>
    <span class="hljs-keyword">continue</span>;
}
</code></pre>
<h2 data-id="heading-11">æ·»åŠ  CSS ä¼˜åŒ–</h2>
<p>HTML ä¸­çš„ <code>&lt;style&gt;</code> æ ‡ç­¾å†…å®¹å¯ä»¥ä½¿ç”¨ä¸“ä¸šçš„ CSS ä¼˜åŒ–å™¨ã€‚è¿™é‡Œé€‰æ‹© lightningcssï¼Œå®ƒæ˜¯ Parcel å›¢é˜Ÿå¼€å‘çš„é«˜æ€§èƒ½ CSS è§£æå™¨ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> lightningcss::stylesheet::{MinifyOptions, ParserOptions, PrinterOptions, StyleSheet};

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">minify_css</span>(css_code: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">stylesheet</span> = StyleSheet::<span class="hljs-title function_ invoke__">parse</span>(css_code, ParserOptions::<span class="hljs-title function_ invoke__">default</span>());

    <span class="hljs-keyword">match</span> stylesheet {
        <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-keyword">mut</span> sheet) =&gt; {
            sheet.<span class="hljs-title function_ invoke__">minify</span>(MinifyOptions::<span class="hljs-title function_ invoke__">default</span>()).<span class="hljs-title function_ invoke__">ok</span>();
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = sheet.<span class="hljs-title function_ invoke__">to_css</span>(PrinterOptions {
                minify: <span class="hljs-literal">true</span>,
                ..PrinterOptions::<span class="hljs-title function_ invoke__">default</span>()
            });

            <span class="hljs-keyword">match</span> result {
                <span class="hljs-title function_ invoke__">Ok</span>(output) =&gt; output.code,
                <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; {
                    eprintln!(<span class="hljs-string">"Warning: Failed to minify CSS: {:?}"</span>, e);
                    css_code.<span class="hljs-title function_ invoke__">to_string</span>()
                },
            }
        }
        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; {
            eprintln!(<span class="hljs-string">"Warning: Failed to parse CSS: {:?}"</span>, e);
            css_code.<span class="hljs-title function_ invoke__">to_string</span>()
        },
    }
}
</code></pre>
<p>lightningcss çš„ä¼˜åŒ–æ•ˆæœéå¸¸å¥½ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* è¾“å…¥ */</span>
<span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ff0000</span>;
}

<span class="hljs-comment">/* è¾“å‡º */</span>
<span class="hljs-selector-tag">body</span>{<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span> <span class="hljs-number">0</span>;<span class="hljs-attribute">background-color</span>:red}
</code></pre>
<ul>
<li>å±æ€§åˆå¹¶ï¼š<code>margin-top: 0; margin-bottom: 0</code> â†’ <code>margin: 0 0</code></li>
<li>é¢œè‰²ä¼˜åŒ–ï¼š<code>#ff0000</code> â†’ <code>red</code></li>
<li>ç§»é™¤æ‰€æœ‰ä¸å¿…è¦çš„ç©ºæ ¼å’Œæ¢è¡Œ</li>
</ul>
<h2 data-id="heading-12">æ·»åŠ  JavaScript å‹ç¼©</h2>
<p>JavaScript çš„å‹ç¼©éœ€è¦æ›´åŠ å°å¿ƒï¼Œå› ä¸ºï¼š</p>
<ol>
<li>å­—ç¬¦ä¸²ä¸­çš„æ³¨é‡Šè¯­æ³•ä¸åº”è¢«å¤„ç†</li>
<li>é™¤æ³•è¿ç®—ç¬¦ <code>/</code> å®¹æ˜“ä¸æ³¨é‡Šæ··æ·†</li>
<li>è½¬ä¹‰å­—ç¬¦éœ€è¦æ­£ç¡®å¤„ç†ï¼ˆ<code>\"</code>, <code>\'</code>ï¼‰</li>
<li>æ­£åˆ™è¡¨è¾¾å¼éœ€è¦ä¿æŠ¤</li>
</ol>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">minify_js</span>(js_code: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">result</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(js_code.<span class="hljs-title function_ invoke__">len</span>());
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">chars</span> = js_code.<span class="hljs-title function_ invoke__">chars</span>().<span class="hljs-title function_ invoke__">peekable</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">in_string</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">in_single_comment</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">in_multi_comment</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">string_char</span> = <span class="hljs-string">'\0'</span>;

    <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(ch) = chars.<span class="hljs-title function_ invoke__">next</span>() {
        <span class="hljs-comment">// å¤„ç†å•è¡Œæ³¨é‡Š</span>
        <span class="hljs-keyword">if</span> !in_string &amp;&amp; !in_multi_comment &amp;&amp; ch == <span class="hljs-string">'/'</span> &amp;&amp; chars.<span class="hljs-title function_ invoke__">peek</span>() == <span class="hljs-title function_ invoke__">Some</span>(&amp;<span class="hljs-string">'/'</span>) {
            in_single_comment = <span class="hljs-literal">true</span>;
            chars.<span class="hljs-title function_ invoke__">next</span>(); <span class="hljs-comment">// è·³è¿‡ç¬¬äºŒä¸ª /</span>
            <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-keyword">if</span> in_single_comment {
            <span class="hljs-keyword">if</span> ch == <span class="hljs-string">'\n'</span> {
                in_single_comment = <span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-comment">// å¤„ç†å¤šè¡Œæ³¨é‡Š</span>
        <span class="hljs-keyword">if</span> !in_string &amp;&amp; !in_single_comment &amp;&amp; ch == <span class="hljs-string">'/'</span> &amp;&amp; chars.<span class="hljs-title function_ invoke__">peek</span>() == <span class="hljs-title function_ invoke__">Some</span>(&amp;<span class="hljs-string">'*'</span>) {
            in_multi_comment = <span class="hljs-literal">true</span>;
            chars.<span class="hljs-title function_ invoke__">next</span>(); <span class="hljs-comment">// è·³è¿‡ *</span>
            <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-keyword">if</span> in_multi_comment {
            <span class="hljs-keyword">if</span> ch == <span class="hljs-string">'*'</span> &amp;&amp; chars.<span class="hljs-title function_ invoke__">peek</span>() == <span class="hljs-title function_ invoke__">Some</span>(&amp;<span class="hljs-string">'/'</span>) {
                in_multi_comment = <span class="hljs-literal">false</span>;
                chars.<span class="hljs-title function_ invoke__">next</span>(); <span class="hljs-comment">// è·³è¿‡ /</span>
            }
            <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-comment">// å¤„ç†å­—ç¬¦ä¸²</span>
        <span class="hljs-keyword">if</span> ch == <span class="hljs-string">'"'</span> || ch == <span class="hljs-string">'\''</span> || ch == <span class="hljs-string">'`'</span> {
            <span class="hljs-keyword">if</span> !in_string {
                in_string = <span class="hljs-literal">true</span>;
                string_char = ch;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ch == string_char {
                <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¢«è½¬ä¹‰ï¼šè®¡ç®—å‰é¢çš„åæ–œæ æ•°é‡</span>
                <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">backslash_count</span> = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">temp_result</span> = result.<span class="hljs-title function_ invoke__">clone</span>();
                <span class="hljs-keyword">while</span> temp_result.<span class="hljs-title function_ invoke__">ends_with</span>(<span class="hljs-string">'\\'</span>) {
                    backslash_count += <span class="hljs-number">1</span>;
                    temp_result.<span class="hljs-title function_ invoke__">pop</span>();
                }
                <span class="hljs-comment">// å¶æ•°ä¸ªåæ–œæ ï¼ˆåŒ…æ‹¬0ä¸ªï¼‰æ„å‘³ç€å¼•å·æ²¡æœ‰è¢«è½¬ä¹‰</span>
                <span class="hljs-keyword">if</span> backslash_count % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> {
                    in_string = <span class="hljs-literal">false</span>;
                }
            }
            result.<span class="hljs-title function_ invoke__">push</span>(ch);
            <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-keyword">if</span> in_string {
            result.<span class="hljs-title function_ invoke__">push</span>(ch);
            <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-comment">// å‹ç¼©ç©ºç™½ï¼ˆä¿ç•™å¿…è¦çš„ç©ºæ ¼ï¼‰</span>
        <span class="hljs-comment">// ...</span>
    }

    result
}
</code></pre>
<p>æµ‹è¯•è½¬ä¹‰å­—ç¬¦å¤„ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¾“å…¥</span>
<span class="hljs-keyword">let</span> s = <span class="hljs-string">"test\\"</span>;  <span class="hljs-comment">// å­—ç¬¦ä¸²ä¸­æœ‰è½¬ä¹‰çš„åæ–œæ </span>
<span class="hljs-keyword">let</span> s2 = <span class="hljs-string">'quote\''</span>;

<span class="hljs-comment">// è¾“å‡º</span>
<span class="hljs-keyword">let</span> s=<span class="hljs-string">"test\\"</span>;   <span class="hljs-comment">// æ­£ç¡®ä¿ç•™è½¬ä¹‰å­—ç¬¦</span>
<span class="hljs-keyword">let</span> s2=<span class="hljs-string">'quote\''</span>;  <span class="hljs-comment">// æ­£ç¡®ä¿ç•™è½¬ä¹‰å­—ç¬¦</span>
</code></pre>
<h2 data-id="heading-13">æ•´åˆä¸‰å±‚å‹ç¼©</h2>
<p>å°† HTMLã€CSSã€JS å‹ç¼©æ•´åˆåœ¨ä¸€èµ·ï¼Œåœ¨è§£æ HTML æ—¶è¯†åˆ« <code>&lt;script&gt;</code> å’Œ <code>&lt;style&gt;</code> æ ‡ç­¾ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">minify_html</span>(content: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">in_script</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">in_style</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">script_content</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">style_content</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();

    <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(ch) = chars.<span class="hljs-title function_ invoke__">next</span>() {
        <span class="hljs-comment">// æ ‡ç­¾å¤„ç†</span>
        <span class="hljs-keyword">if</span> ch == <span class="hljs-string">'&lt;'</span> {
            <span class="hljs-comment">// ... è¯»å–æ ‡ç­¾å</span>

            <span class="hljs-keyword">if</span> tag_name == <span class="hljs-string">"script"</span> {
                in_script = <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> tag_name == <span class="hljs-string">"/script"</span> {
                <span class="hljs-comment">// å‹ç¼©å¹¶è¾“å‡º script å†…å®¹</span>
                <span class="hljs-keyword">if</span> !script_content.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">is_empty</span>() {
                    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">minified</span> = <span class="hljs-title function_ invoke__">minify_js</span>(&amp;script_content);
                    result.<span class="hljs-title function_ invoke__">push_str</span>(&amp;minified);
                }
                script_content.<span class="hljs-title function_ invoke__">clear</span>();
                in_script = <span class="hljs-literal">false</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> tag_name == <span class="hljs-string">"style"</span> {
                in_style = <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> tag_name == <span class="hljs-string">"/style"</span> {
                <span class="hljs-comment">// å‹ç¼©å¹¶è¾“å‡º style å†…å®¹</span>
                <span class="hljs-keyword">if</span> !style_content.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">is_empty</span>() {
                    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">minified</span> = <span class="hljs-title function_ invoke__">minify_css</span>(&amp;style_content);
                    result.<span class="hljs-title function_ invoke__">push_str</span>(&amp;minified);
                }
                style_content.<span class="hljs-title function_ invoke__">clear</span>();
                in_style = <span class="hljs-literal">false</span>;
            }
        }

        <span class="hljs-comment">// æ”¶é›† script/style å†…å®¹</span>
        <span class="hljs-keyword">if</span> !in_tag {
            <span class="hljs-keyword">if</span> in_script {
                script_content.<span class="hljs-title function_ invoke__">push</span>(ch);
                <span class="hljs-keyword">continue</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> in_style {
                style_content.<span class="hljs-title function_ invoke__">push</span>(ch);
                <span class="hljs-keyword">continue</span>;
            }
        }
    }
}
</code></pre>
<h2 data-id="heading-14">å‹ç¼©æ•ˆæœ</h2>
<p>ç»è¿‡ä¸‰å±‚å‹ç¼©ï¼Œæ•´ä½“å‹ç¼©ç‡å¯è¾¾ <strong>40-55%</strong>ï¼š</p>






























<table><thead><tr><th>å±‚çº§</th><th>è´¡çŒ®ç‡</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>CSS ä¼˜åŒ–</td><td>20-30%</td><td><code>margin-top: 0; margin-bottom: 0</code> â†’ <code>margin:0 0</code></td></tr><tr><td>JS å‹ç¼©</td><td>15-25%</td><td>ç§»é™¤æ³¨é‡Šå’Œç©ºç™½</td></tr><tr><td>HTML å‹ç¼©</td><td>10-15%</td><td>ç§»é™¤æ¢è¡Œå’Œç¼©è¿›</td></tr><tr><td>æ³¨é‡Šç§»é™¤</td><td>5-10%</td><td>å–å†³äºæ³¨é‡Šå¯†åº¦</td></tr></tbody></table>
<p>å®Œæ•´ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- è¾“å…¥ï¼š324 å­—èŠ‚ --&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è¿™æ˜¯æ³¨é‡Š --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">body</span> {
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f0f0f0</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ heading }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    {% for item in items %}
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    {% endfor %}
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// è¿™æ˜¯æ³¨é‡Š</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello"</span>);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- è¾“å‡ºï¼š152 å­—èŠ‚ï¼Œ-53% --&gt;</span>
<span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">zh-CN</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">UTF-8</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-tag">body</span>{<span class="hljs-attribute">background-color</span>:<span class="hljs-number">#f0f0f0</span>;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">padding</span>:<span class="hljs-number">20px</span>}</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ heading }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>{% for item in items %} <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>{% endfor %}<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello"</span>);</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-15">å…¶ä»–æŠ€æœ¯ç»†èŠ‚</h2>
<h3 data-id="heading-16">å‘½ä»¤è¡Œå‚æ•°è®¾è®¡</h3>
<p>ä½¿ç”¨ clap åº“æ¥å¤„ç†å‘½ä»¤è¡Œå‚æ•°ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> clap::Parser;

<span class="hljs-meta">#[derive(Parser, Debug)]</span>
<span class="hljs-meta">#[command(name = <span class="hljs-string">"askama-minify"</span>)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Args</span> {
    <span class="hljs-comment">/// è¦å‹ç¼©çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è·¯å¾„</span>
    <span class="hljs-meta">#[arg(value_name = <span class="hljs-string">"PATH"</span>)]</span>
    path: PathBuf,

    <span class="hljs-comment">/// é€’å½’å¤„ç†æ–‡ä»¶å¤¹ï¼ˆé»˜è®¤å¯ç”¨ï¼‰</span>
    <span class="hljs-meta">#[arg(short, long, default_value_t = true)]</span>
    recursive: <span class="hljs-type">bool</span>,

    <span class="hljs-comment">/// è¾“å‡ºæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è·¯å¾„</span>
    <span class="hljs-meta">#[arg(short = 'd', long)]</span>
    output: <span class="hljs-type">Option</span>&lt;PathBuf&gt;,

    <span class="hljs-comment">/// è¾“å‡ºæ–‡ä»¶çš„åç¼€åï¼ˆä¾‹å¦‚: "min" ä¼šç”Ÿæˆ .min.htmlï¼‰</span>
    <span class="hljs-meta">#[arg(short = 's', long)]</span>
    suffix: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
}
</code></pre>
<h3 data-id="heading-17">æ–‡ä»¶å¤„ç†ä¼˜åŒ–</h3>
<p>ä½¿ç”¨ walkdir åº“å®ç°é«˜æ•ˆçš„æ–‡ä»¶å¤¹éå†ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> walkdir::WalkDir;

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">walker</span> = <span class="hljs-keyword">if</span> recursive {
    WalkDir::<span class="hljs-title function_ invoke__">new</span>(path)
} <span class="hljs-keyword">else</span> {
    WalkDir::<span class="hljs-title function_ invoke__">new</span>(path).<span class="hljs-title function_ invoke__">max_depth</span>(<span class="hljs-number">1</span>)
};

<span class="hljs-keyword">for</span> <span class="hljs-variable">entry</span> <span class="hljs-keyword">in</span> walker.<span class="hljs-title function_ invoke__">into_iter</span>().<span class="hljs-title function_ invoke__">filter_map</span>(|e| e.<span class="hljs-title function_ invoke__">ok</span>()) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file_path</span> = entry.<span class="hljs-title function_ invoke__">path</span>();
    <span class="hljs-keyword">if</span> !file_path.<span class="hljs-title function_ invoke__">is_file</span>() || !<span class="hljs-title function_ invoke__">is_template_file</span>(file_path) {
        <span class="hljs-keyword">continue</span>;
    }
    <span class="hljs-comment">// å¤„ç†æ–‡ä»¶...</span>
}
</code></pre>
<h3 data-id="heading-18">ä»£ç è´¨é‡ä¼˜åŒ–</h3>
<ol>
<li><strong>å¸¸é‡æå–</strong>ï¼šé¿å…é­”æ³•å­—ç¬¦ä¸²</li>
</ol>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">const</span> DEFAULT_SUFFIX: &amp;<span class="hljs-type">str</span> = <span class="hljs-string">"min"</span>;
<span class="hljs-keyword">const</span> MIN_MARKER: &amp;<span class="hljs-type">str</span> = <span class="hljs-string">".min."</span>;
<span class="hljs-keyword">const</span> VALID_EXTENSIONS: &amp;[&amp;<span class="hljs-type">str</span>] = &amp;[<span class="hljs-string">"html"</span>, <span class="hljs-string">"htm"</span>, <span class="hljs-string">"xml"</span>, <span class="hljs-string">"svg"</span>];
</code></pre>
<ol start="2">
<li><strong>é¿å…ä¸å¿…è¦çš„å­—ç¬¦ä¸²åˆ†é…</strong>ï¼šä½¿ç”¨ <code>eq_ignore_ascii_case</code> è€Œä¸æ˜¯ <code>to_lowercase()</code></li>
</ol>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä¼˜åŒ–å</span>
ext_str.<span class="hljs-title function_ invoke__">eq_ignore_ascii_case</span>(valid_ext)

<span class="hljs-comment">// ä¼˜åŒ–å‰ï¼ˆä¼šåˆ›å»ºæ–°å­—ç¬¦ä¸²ï¼‰</span>
ext_str.<span class="hljs-title function_ invoke__">to_lowercase</span>() == valid_ext
</code></pre>
<ol start="3">
<li><strong>ç©ºæ–‡ä»¶å¿«é€Ÿå¤„ç†</strong></li>
</ol>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">if</span> original_size == <span class="hljs-number">0</span> {
    fs::<span class="hljs-title function_ invoke__">write</span>(output_path, <span class="hljs-string">""</span>)?;
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Ok</span>((<span class="hljs-number">0</span>, <span class="hljs-number">0</span>));
}
</code></pre>
<h2 data-id="heading-19">ä½¿ç”¨æ–¹å¼</h2>
<h3 data-id="heading-20">å®‰è£…</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†ä»“åº“</span>
git <span class="hljs-built_in">clone</span> https://github.com/wsafight/askama-minify.git
<span class="hljs-built_in">cd</span> askama-minify

<span class="hljs-comment"># ç¼–è¯‘</span>
cargo build --release
</code></pre>
<p>ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶ä½äº <code>target/release/askama-minify</code>ã€‚</p>
<h3 data-id="heading-21">åŸºæœ¬ç”¨æ³•</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‹ç¼©å•ä¸ªæ–‡ä»¶ï¼ˆé»˜è®¤ç”Ÿæˆ .min.html åç¼€ï¼‰</span>
./target/release/askama-minify template.html

<span class="hljs-comment"># æŒ‡å®šè¾“å‡ºæ–‡ä»¶</span>
./target/release/askama-minify -d output.html template.html

<span class="hljs-comment"># å‹ç¼©æ•´ä¸ªæ–‡ä»¶å¤¹</span>
./target/release/askama-minify templates/

<span class="hljs-comment"># è¾“å‡ºåˆ°æŒ‡å®šç›®å½•å¹¶ä¿æŒç›®å½•ç»“æ„</span>
./target/release/askama-minify -d dist/ templates/
</code></pre>
<h3 data-id="heading-22">å‘½ä»¤è¡Œé€‰é¡¹</h3>





























<table><thead><tr><th>é€‰é¡¹</th><th>ç®€å†™</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td><code>--output &lt;PATH&gt;</code></td><td><code>-d</code></td><td>è¾“å‡ºæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è·¯å¾„</td><td>åŸè·¯å¾„</td></tr><tr><td><code>--suffix &lt;SUFFIX&gt;</code></td><td><code>-s</code></td><td>è¾“å‡ºæ–‡ä»¶åç¼€å</td><td><code>min</code></td></tr><tr><td><code>--recursive</code></td><td><code>-r</code></td><td>é€’å½’å¤„ç†å­æ–‡ä»¶å¤¹</td><td><code>true</code></td></tr></tbody></table>
<h3 data-id="heading-23">åç¼€è§„åˆ™</h3>






























<table><thead><tr><th>é…ç½®</th><th>ç»“æœ</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ—  <code>-d</code> æ—  <code>-s</code></td><td>é»˜è®¤åç¼€ <code>min</code></td><td><code>file.html</code> â†’ <code>file.min.html</code></td></tr><tr><td>æ—  <code>-d</code> æœ‰ <code>-s</code></td><td>è‡ªå®šä¹‰åç¼€</td><td><code>file.html</code> + <code>-s prod</code> â†’ <code>file.prod.html</code></td></tr><tr><td>æœ‰ <code>-d</code> æ—  <code>-s</code></td><td>ä¸æ·»åŠ åç¼€</td><td><code>file.html</code> + <code>-d out.html</code> â†’ <code>out.html</code></td></tr><tr><td>æœ‰ <code>-d</code> æœ‰ <code>-s</code></td><td>åç¼€ + è‡ªå®šä¹‰è·¯å¾„</td><td><code>file.html</code> + <code>-d out/</code> + <code>-s prod</code> â†’ <code>out/file.prod.html</code></td></tr></tbody></table>
<h3 data-id="heading-24">é›†æˆåˆ°æ„å»ºæµç¨‹</h3>
<h4 data-id="heading-25">æ–¹å¼ä¸€ï¼šåœ¨ <code>build.rs</code> ä¸­ä½¿ç”¨</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// build.rs</span>
<span class="hljs-keyword">use</span> std::process::Command;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// åœ¨ç”Ÿäº§æ„å»ºæ—¶è‡ªåŠ¨å‹ç¼©æ¨¡æ¿</span>
    <span class="hljs-keyword">if</span> std::env::<span class="hljs-title function_ invoke__">var</span>(<span class="hljs-string">"PROFILE"</span>).<span class="hljs-title function_ invoke__">as_deref</span>() == <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-string">"release"</span>) {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">status</span> = Command::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">"./target/release/askama-minify"</span>)
            .<span class="hljs-title function_ invoke__">args</span>([<span class="hljs-string">"-d"</span>, <span class="hljs-string">"dist/templates/"</span>, <span class="hljs-string">"templates/"</span>])
            .<span class="hljs-title function_ invoke__">status</span>()
            .<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"Failed to execute askama-minify"</span>);

        <span class="hljs-keyword">if</span> !status.<span class="hljs-title function_ invoke__">success</span>() {
            <span class="hljs-built_in">panic!</span>(<span class="hljs-string">"Template minification failed"</span>);
        }
    }
}
</code></pre>
<h4 data-id="heading-26">æ–¹å¼äºŒï¼šåœ¨ Makefile ä¸­ä½¿ç”¨</h4>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># Makefile</span>
<span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: build minify-templates</span>

<span class="hljs-section">build: minify-templates</span>
	cargo build --release

<span class="hljs-section">minify-templates:</span>
	askama-minify -d dist/templates/ -s prod templates/
</code></pre>
<h4 data-id="heading-27">æ–¹å¼ä¸‰ï¼šåœ¨ CI/CD ä¸­ä½¿ç”¨</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># .github/workflows/deploy.yml</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span> [ <span class="hljs-string">main</span> ]

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">deploy:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">Rust</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions-rs/toolchain@v1</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">toolchain:</span> <span class="hljs-string">stable</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">askama-minify</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          git clone https://github.com/wsafight/askama-minify.git
          cd askama-minify
          cargo build --release
</span>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Minify</span> <span class="hljs-string">templates</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">./askama-minify/target/release/askama-minify</span> <span class="hljs-string">-d</span> <span class="hljs-string">dist/</span> <span class="hljs-string">-s</span> <span class="hljs-string">prod</span> <span class="hljs-string">templates/</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span>
        <span class="hljs-attr">run:</span> <span class="hljs-comment"># ä½ çš„éƒ¨ç½²è„šæœ¬</span>
</code></pre>
<h3 data-id="heading-28">åœ¨ Askama ä¸­ä½¿ç”¨å‹ç¼©åçš„æ¨¡æ¿</h3>
<p>æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p>
<h4 data-id="heading-29">æ–¹å¼ä¸€ï¼šåˆ‡æ¢æ¨¡æ¿è·¯å¾„ï¼ˆæ¨èï¼‰</h4>
<p>å¼€å‘ç¯å¢ƒä½¿ç”¨æºæ¨¡æ¿ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‹ç¼©æ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> askama::Template;

<span class="hljs-meta">#[derive(Template)]</span>
<span class="hljs-meta">#[template(
    path = <span class="hljs-string">"{{ template_path }}"</span>,  // é€šè¿‡é…ç½®ä¼ å…¥
    whitespace = <span class="hljs-string">"suppress"</span>
)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">HomePage</span> {
    title: <span class="hljs-type">String</span>,
}

<span class="hljs-comment">// æ ¹æ®ç¯å¢ƒå˜é‡é€‰æ‹©æ¨¡æ¿è·¯å¾„</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_template_path</span>(name: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> {
    <span class="hljs-keyword">if</span> std::env::<span class="hljs-title function_ invoke__">var</span>(<span class="hljs-string">"PROFILE"</span>).<span class="hljs-title function_ invoke__">as_deref</span>() == <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-string">"release"</span>) {
        <span class="hljs-built_in">format!</span>(<span class="hljs-string">"dist/{}.prod.html"</span>, name)  <span class="hljs-comment">// ä½¿ç”¨å‹ç¼©ç‰ˆ</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">format!</span>(<span class="hljs-string">"templates/{}.html"</span>, name)   <span class="hljs-comment">// ä½¿ç”¨æºæ–‡ä»¶</span>
    }
}
</code></pre>
<h4 data-id="heading-30">æ–¹å¼äºŒï¼šæ„å»ºæ—¶æ›¿æ¢</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€å‘ç¯å¢ƒ</span>
<span class="hljs-built_in">cp</span> templates/*.html templates/

<span class="hljs-comment"># ç”Ÿäº§æ„å»ºæ—¶</span>
askama-minify -d templates/ -s prod templates/
</code></pre>
<h3 data-id="heading-31">å®é™…é¡¹ç›®ç¤ºä¾‹</h3>
<p>å‡è®¾ä½ æœ‰ä»¥ä¸‹é¡¹ç›®ç»“æ„ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">my-app/
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ <span class="hljs-keyword">base</span>.html
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ user/
â”‚       â”œâ”€â”€ profile.html
â”‚       â””â”€â”€ settings.html
â”œâ”€â”€ dist/              <span class="hljs-meta"># å‹ç¼©åçš„è¾“å‡ºç›®å½•</span>
â”œâ”€â”€ Cargo.toml
â””â”€â”€ build.rs
</code></pre>
<p><strong>å¼€å‘æ—¶</strong>ï¼šç›´æ¥ä½¿ç”¨ <code>templates/</code> ä¸‹çš„åŸå§‹æ–‡ä»¶</p>
<p><strong>éƒ¨ç½²å‰</strong>ï¼šè¿è¡Œå‹ç¼©å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">askama-minify -d dist/ -s prod templates/
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">dist/
â”œâ”€â”€ <span class="hljs-keyword">base</span>.prod.html
â”œâ”€â”€ index.prod.html
â””â”€â”€ user/
    â”œâ”€â”€ profile.prod.html
    â””â”€â”€ settings.prod.html
</code></pre>
<p><strong>é…ç½® Askama ä½¿ç”¨ç”Ÿäº§æ¨¡æ¿</strong>ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-comment"># askama.toml</span>
<span class="hljs-section">[general]</span>
<span class="hljs-attr">dirs</span> = [<span class="hljs-string">"dist"</span>]  <span class="hljs-comment"># æŒ‡å‘å‹ç¼©åçš„ç›®å½•</span>
</code></pre>
<h2 data-id="heading-32">æ€»ç»“</h2>
<p>askama-minify é€šè¿‡ä»¥ä¸‹æŠ€æœ¯å®ç°äº†é«˜æ•ˆçš„æ¨¡æ¿å‹ç¼©ï¼š</p>
<ol>
<li><strong>æ¨¡æ¿è¯­æ³•ä¿ç•™</strong>ï¼šå®Œæ•´ä¿ç•™ <code>{{ }}</code> å’Œ <code>{% %}</code> è¯­æ³•</li>
<li><strong>ä¸‰å±‚å‹ç¼©ç­–ç•¥</strong>ï¼šHTML å±‚ã€CSS å±‚ã€JS å±‚åˆ†åˆ«ä¼˜åŒ–</li>
<li><strong>æ™ºèƒ½è¾¹ç¼˜å¤„ç†</strong>ï¼šæ­£ç¡®å¤„ç†è½¬ä¹‰å­—ç¬¦ã€è¿ç®—ç¬¦ã€æ­£åˆ™è¡¨è¾¾å¼</li>
<li><strong>ä¸“ä¸š CSS ä¼˜åŒ–</strong>ï¼šä½¿ç”¨ lightningcss è¿›è¡Œå±æ€§åˆå¹¶å’Œé¢œè‰²ä¼˜åŒ–</li>
<li><strong>Rust å®ç°</strong>ï¼šé«˜æ€§èƒ½ã€å†…å­˜å®‰å…¨</li>
</ol>
<h3 data-id="heading-33">ä¸ Askama è‡ªå¸¦å‹ç¼©çš„å¯¹æ¯”</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>Askama whitespace</th><th>askama-minify</th></tr></thead><tbody><tr><td>ç©ºç™½å‹ç¼©</td><td>âœ…</td><td>âœ…</td></tr><tr><td>HTML æ³¨é‡Šç§»é™¤</td><td>âŒ</td><td>âœ…</td></tr><tr><td>CSS å‹ç¼©ä¼˜åŒ–</td><td>âŒ</td><td>âœ…</td></tr><tr><td>JavaScript å‹ç¼©</td><td>âŒ</td><td>âœ…</td></tr><tr><td>æ¨¡æ¿è¯­æ³•ä¿ç•™</td><td>âœ…</td><td>âœ…</td></tr><tr><td>æ„å»ºæ—¶å¤„ç†</td><td>âŒ</td><td>âœ…</td></tr></tbody></table>
<p>é¡¹ç›®å·²å¼€æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwsafight%2Faskama-minify" target="_blank" title="https://github.com/wsafight/askama-minify" ref="nofollow noopener noreferrer">github.com/wsafight/asâ€¦</a></p>
<p>æ¬¢è¿å¤§å®¶æå‡º issue å’Œ prã€‚</p>
<h2 data-id="heading-34">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fparcel-bundler%2Flightningcss" target="_blank" title="https://github.com/parcel-bundler/lightningcss" ref="nofollow noopener noreferrer">lightningcss</a> - å‡ºè‰²çš„ CSS è§£æå’Œä¼˜åŒ–å·¥å…·</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fclap-rs%2Fclap" target="_blank" title="https://github.com/clap-rs/clap" ref="nofollow noopener noreferrer">clap</a> - å¼ºå¤§çš„å‘½ä»¤è¡Œå‚æ•°è§£æåº“</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdjc%2Faskama" target="_blank" title="https://github.com/djc/askama" ref="nofollow noopener noreferrer">Askama</a> - çµæ´»çš„ Rust æ¨¡æ¿å¼•æ“</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çº¯ç®—æ³•AECï¼šæ’­å½•å¹¶è¡Œåœºæ™¯çš„å›å£°æ¶ˆé™¤å®æˆ˜ç¬”è®°]]></title>    <link>https://juejin.cn/post/7586686861390757939</link>    <guid>https://juejin.cn/post/7586686861390757939</guid>    <pubDate>2025-12-23T07:39:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586686861390757939" data-draft-id="7586657335880810523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çº¯ç®—æ³•AECï¼šæ’­å½•å¹¶è¡Œåœºæ™¯çš„å›å£°æ¶ˆé™¤å®æˆ˜ç¬”è®°"/> <meta itemprop="keywords" content="Android,éŸ³è§†é¢‘å¼€å‘"/> <meta itemprop="datePublished" content="2025-12-23T07:39:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æå°è½°_Rex"/> <meta itemprop="url" content="https://juejin.cn/user/3157453124930039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çº¯ç®—æ³•AECï¼šæ’­å½•å¹¶è¡Œåœºæ™¯çš„å›å£°æ¶ˆé™¤å®æˆ˜ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3157453124930039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æå°è½°_Rex
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T07:39:24.000Z" title="Tue Dec 23 2025 07:39:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¼•è¨€</h3>
<p>æœ€è¿‘åœ¨åšä¸€æ¬¾ AI è¯­éŸ³åº”ç”¨ï¼Œåœºæ™¯ç±»ä¼¼â€œå®æ—¶é€šè¯â€ï¼šä¸€è¾¹è®© TTS æ’­æŠ¥ï¼Œä¸€è¾¹æŠŠéº¦å…‹é£æ‰“å¼€åš STTã€‚</p>
<blockquote>
<p>é—®é¢˜åœ¨äºï¼Œæ‰¬å£°å™¨å‡ºæ¥çš„å£°éŸ³ä¸‹ä¸€ç§’å°±ä¼šè¢«éº¦å…‹é£åŸå°ä¸åŠ¨åœ°å½•å›å»ï¼ŒSTT ç«‹åˆ»æŠŠå®ƒå½“æˆç”¨æˆ·å†è¯´ä¸€éï¼Œå½¢æˆâ€œè‡ªå·±å¬æ‡‚è‡ªå·±â€çš„æ— é™å¾ªç¯ã€‚</p>
</blockquote>
<p>ä¸ºäº†åˆ‡æ–­è¿™æ¡å›å£°é€šè·¯ï¼Œæˆ‘è¯•äº†ä¸€åœˆç¡¬ä»¶æ–¹æ¡ˆæ— æœåï¼Œå†³å®šç”¨çº¯ç®—æ³•åœ¨è½¯ä»¶å±‚æŠŠæ’­æŠ¥å£°éŸ³ä»å½•éŸ³é‡Œâ€œæŠ â€æ‰ã€‚</p>
<h3 data-id="heading-1">å‚è€ƒ WebRTC</h3>
<p>åœ¨æˆ‘åŸæœ‰çš„è®¾è®¡é‡Œï¼ŒTTS æ’­æŠ¥èµ°çš„æ˜¯ç³»ç»Ÿè‡ªå¸¦æ’­æ”¾å™¨ï¼Œå½•éŸ³åˆæ¥è‡ª Android ç³»ç»ŸåŸç”Ÿçš„ AudioRecordï¼Œè¿™æ˜¯ä¸¤æ¡å¹¶è¡Œæ²¡æœ‰äº¤é›†çš„æ•°æ®å¤„ç†çº¿ã€‚å¦‚æœç»§ç»­ä¿æŒåŸæœ‰è®¾è®¡ï¼Œæ ¹æœ¬ä¸å¯èƒ½å®ç°æ•ˆæœï¼Œäºæ˜¯æˆ‘å‚è€ƒ <strong>WebRTC</strong> çš„è®¾è®¡ã€‚</p>
<blockquote>
<p>æŠŠ TTS å’Œå½•éŸ³å…¨éƒ¨â€œç»‘æ¶â€è¿› WebRTC çš„è½¨é“ï¼Œè®©å¼•æ“é‡æ–°æŒæ§ç”Ÿå‘½çº¿ã€‚</p>
</blockquote>
<p>è¿™é‡Œæˆ‘ç”¨åˆ°äº†å¼€æºåº“ï¼š</p>
<pre><code class="hljs language-java" lang="java">implementation <span class="hljs-string">'io.github.webrtc-sdk:android:137.7151.05'</span>
</code></pre>
<h3 data-id="heading-2">æ–¹æ¡ˆè®¾è®¡</h3>
<p>æˆ‘ç”»äº†ä¸€å¼ æµç¨‹è®¾è®¡çš„ç®€å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2790ea56133c4f32b20345515a29eaee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5bCP6L2wX1JleA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767081023&amp;x-signature=lT4ZegCYu9L%2Fy5%2FohA6%2FU1%2FX0rA%3D" alt="267cd2b8ae0273f5498dfb21d0509155.png" loading="lazy"/></p>
<ol>
<li>è“è‰²æ³³é“ (TTS) : è´Ÿè´£äº§ç”Ÿå£°éŸ³ã€‚æ•°æ®è¿›å…¥ AECSchedule åï¼Œä¸ä»…æ˜¯ä¸ºäº†è®©ç”¨æˆ·å¬åˆ°ï¼ˆé€šè¿‡æ‰¬å£°å™¨ï¼‰ï¼Œæ›´æ˜¯ä¸ºäº†å‘Šè¯‰ AEC ç®—æ³•â€œè¿™æ˜¯æˆ‘ä»¬è‡ªå·±å‘å‡ºçš„å£°éŸ³ï¼Œè¯·ä¸è¦æŠŠå®ƒå½“æˆç”¨æˆ·è¯´çš„è¯â€ã€‚</li>
<li>æ©™è‰²æ³³é“ (AECSchedule) : æ ¸å¿ƒå¤„ç†åŒºã€‚
<ul>
<li>å…³é”®ç‚¹ : è™šçº¿ç®­å¤´è¡¨ç¤º AudioTrack æ’­æ”¾çš„å£°éŸ³è¢«ç”¨ä½œ å‚è€ƒä¿¡å· (Reference Signal) ã€‚</li>
<li>å¤„ç† : WebRTC å¼•æ“ (ADM) å°† éº¦å…‹é£é‡‡é›†çš„å£°éŸ³ å‡å» å‚è€ƒä¿¡å· ï¼Œä»è€Œæ¶ˆé™¤å›å£°ã€‚</li>
</ul>
</li>
<li>ç»¿è‰²æ³³é“ (STT) : æœ€ç»ˆæ¶ˆè´¹è€…ã€‚å®ƒæ¥æ”¶åˆ°çš„éŸ³é¢‘æ˜¯ç»è¿‡ AECï¼ˆå›å£°æ¶ˆé™¤ï¼‰å’Œ NSï¼ˆé™å™ªï¼‰å¤„ç†åçš„çº¯å‡€äººå£°ï¼Œä»è€Œæé«˜è¯†åˆ«å‡†ç¡®ç‡ã€‚</li>
</ol>
<p>æ–¹æ¡ˆæµç¨‹éå¸¸æ¸…æ™°ç®€å•ï¼Œä¸‹é¢æ˜¯é™„ä¸Šçš„ AECSchedule æºç ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶ä½¿ç”¨</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> android.content.Context
<span class="hljs-keyword">import</span> android.media.AudioAttributes
<span class="hljs-keyword">import</span> android.media.AudioFormat
<span class="hljs-keyword">import</span> android.media.AudioManager
<span class="hljs-keyword">import</span> android.media.AudioTrack
<span class="hljs-keyword">import</span> com.jiale.business_voice.config.TTSAudioConfig
<span class="hljs-keyword">import</span> com.jiale.commom.tools.log.JLog
<span class="hljs-keyword">import</span> org.webrtc.*
<span class="hljs-keyword">import</span> org.webrtc.audio.AudioDeviceModule
<span class="hljs-keyword">import</span> org.webrtc.audio.JavaAudioDeviceModule
<span class="hljs-keyword">import</span> java.util.concurrent.atomic.AtomicBoolean

<span class="hljs-comment">/**
 * åŸºäº WebRTC çš„å›å£°æ¶ˆé™¤è°ƒåº¦å™¨ (AECSchedule)
 *
 * ä¸»è¦èŒè´£:
 * 1. æ’­æ”¾ (Playback): ç®¡ç† AudioTrack ä»¥ VOICE_COMMUNICATION æ¨¡å¼æ’­æ”¾ TTS æ•°æ®ã€‚
 *    è¿™ç¡®ä¿ç³»ç»Ÿ AEC å°†å…¶è§†ä¸ºâ€œå‚è€ƒä¿¡å·â€ (Reference Signal)ã€‚
 * 2. å½•éŸ³ (Recording): ä½¿ç”¨ WebRTC çš„ JavaAudioDeviceModule (ADM) é‡‡é›†éŸ³é¢‘ã€‚
 *    ADM è‡ªåŠ¨å¤„ç†ç³»ç»Ÿç¡¬ä»¶ AEC/NS/AGC é…ç½®ã€‚
 *    é‡‡é›†åˆ°çš„çº¯å‡€éŸ³é¢‘é€šè¿‡å›è°ƒæš´éœ²ç»™å¤–éƒ¨ã€‚
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AECSchedule</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context, <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> outputCallback: (ByteArray) -&gt; <span class="hljs-built_in">Unit</span>) {

    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> TAG = <span class="hljs-string">"AECSchedule"</span>
        
        <span class="hljs-comment">// éŸ³é¢‘é…ç½®</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> SAMPLE_RATE = TTSAudioConfig.SAMPLE_RATE
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> AUDIO_USAGE = AudioAttributes.USAGE_VOICE_COMMUNICATION
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> AUDIO_CONTENT_TYPE = AudioAttributes.CONTENT_TYPE_SPEECH
        
        <span class="hljs-comment">// WebRTC ID</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> AUDIO_TRACK_ID = <span class="hljs-string">"ARDAMSa0"</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> STREAM_ID = <span class="hljs-string">"ARDAMS"</span>

        <span class="hljs-comment">// WebRTC çº¦æŸæ¡ä»¶ Keys</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> CONSTRAINT_ECHO_CANCELLATION = <span class="hljs-string">"googEchoCancellation"</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> CONSTRAINT_AUTO_GAIN_CONTROL = <span class="hljs-string">"googAutoGainControl"</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> CONSTRAINT_NOISE_SUPPRESSION = <span class="hljs-string">"googNoiseSuppression"</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> CONSTRAINT_HIGHPASS_FILTER = <span class="hljs-string">"googHighpassFilter"</span>
    }

    <span class="hljs-comment">// --- æ’­æ”¾ç›¸å…³ (Speaker) ---</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> audioTrack: AudioTrack? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> audioManager: AudioManager <span class="hljs-keyword">by</span> lazy {
        context.getSystemService(Context.AUDIO_SERVICE) <span class="hljs-keyword">as</span> AudioManager
    }

    <span class="hljs-comment">// --- å½•éŸ³ç›¸å…³ (Mic &amp; Processing) ---</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> peerConnectionFactory: PeerConnectionFactory? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> audioDeviceModule: AudioDeviceModule? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> webrtcAudioSource: AudioSource? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> webrtcLocalTrack: org.webrtc.AudioTrack? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> dummyPeerConnection: PeerConnection? = <span class="hljs-literal">null</span>
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> isRecording = AtomicBoolean(<span class="hljs-literal">false</span>)
    <span class="hljs-meta">@Volatile</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> hasLoggedRecordInfo = <span class="hljs-literal">false</span>

    <span class="hljs-comment">// ============================================================================================</span>
    <span class="hljs-comment">// æ’­æ”¾é€»è¾‘ (TTS)</span>
    <span class="hljs-comment">// ============================================================================================</span>

    <span class="hljs-comment">/**
     * æ¥æ”¶ TTS éŸ³é¢‘æ•°æ®å¹¶è¿›è¡Œæ’­æ”¾ã€‚
     * è¿™äº›æ•°æ®å°†ä½œä¸º AEC çš„â€œå‚è€ƒä¿¡å·â€ã€‚
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onTTSAudioData</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">ByteArray</span>)</span></span> {
        <span class="hljs-comment">// ç¡®ä¿éŸ³é¢‘è·¯ç”±åˆ°æ‰¬å£°å™¨ï¼ˆå¹¿æ’­æ¨¡å¼ï¼‰è€Œä¸æ˜¯å¬ç­’</span>
        setSpeakerphoneOn(<span class="hljs-literal">true</span>)
        
        <span class="hljs-keyword">if</span> (audioTrack == <span class="hljs-literal">null</span>) {
            initAudioTrack()
        }
        
        audioTrack?.let { track -&gt;
            <span class="hljs-keyword">if</span> (track.playState != AudioTrack.PLAYSTATE_PLAYING) {
                <span class="hljs-keyword">try</span> {
                    track.play()
                } <span class="hljs-keyword">catch</span> (e: Exception) {
                    JLog.e(TAG, <span class="hljs-string">"å¯åŠ¨ AudioTrack å¤±è´¥"</span>, e)
                    <span class="hljs-keyword">return</span>
                }
            }
            track.write(<span class="hljs-keyword">data</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">data</span>.size)
        }
    }

    <span class="hljs-comment">/**
     * åœæ­¢ TTS æ’­æ”¾å¹¶é‡Šæ”¾ AudioTrack èµ„æºã€‚
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">stopPlay</span><span class="hljs-params">()</span></span> {
        safeExecute(<span class="hljs-string">"åœæ­¢æ’­æ”¾"</span>) {
            audioTrack?.let {
                <span class="hljs-keyword">if</span> (it.playState == AudioTrack.PLAYSTATE_PLAYING) {
                    it.stop()
                }
                it.release()
            }
        }
        audioTrack = <span class="hljs-literal">null</span>
    }

    <span class="hljs-comment">/**
     * è®¾ç½®æ‰¬å£°å™¨çŠ¶æ€ã€‚
     * True: è·¯ç”±åˆ°æ‰¬å£°å™¨ (å¤–æ”¾)ã€‚
     * False: è·¯ç”±åˆ°å¬ç­’ (é€šè¯)ã€‚
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setSpeakerphoneOn</span><span class="hljs-params">(on: <span class="hljs-type">Boolean</span>)</span></span> {
        safeExecute(<span class="hljs-string">"è®¾ç½®æ‰¬å£°å™¨"</span>) {
            <span class="hljs-keyword">if</span> (audioManager.mode != AudioManager.MODE_IN_COMMUNICATION) {
                audioManager.mode = AudioManager.MODE_IN_COMMUNICATION
            }
            <span class="hljs-keyword">if</span> (audioManager.isSpeakerphoneOn != on) {
                audioManager.isSpeakerphoneOn = on
                JLog.i(TAG, <span class="hljs-string">"è®¾ç½®æ‰¬å£°å™¨çŠ¶æ€: <span class="hljs-variable">$on</span>"</span>)
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initAudioTrack</span><span class="hljs-params">()</span></span> {
        safeExecute(<span class="hljs-string">"åˆå§‹åŒ– AudioTrack"</span>) {
            <span class="hljs-keyword">val</span> minBufferSize = AudioTrack.getMinBufferSize(
                SAMPLE_RATE,
                AudioFormat.CHANNEL_OUT_MONO,
                AudioFormat.ENCODING_PCM_16BIT
            )

            <span class="hljs-keyword">val</span> attributes = AudioAttributes.Builder()
                .setUsage(AUDIO_USAGE)
                .setContentType(AUDIO_CONTENT_TYPE)
                .build()

            <span class="hljs-keyword">val</span> format = AudioFormat.Builder()
                .setEncoding(AudioFormat.ENCODING_PCM_16BIT)
                .setSampleRate(SAMPLE_RATE)
                .setChannelMask(AudioFormat.CHANNEL_OUT_MONO)
                .build()

            audioTrack = AudioTrack(
                attributes,
                format,
                minBufferSize,
                AudioTrack.MODE_STREAM,
                AudioManager.AUDIO_SESSION_ID_GENERATE
            )
            
            JLog.i(TAG, <span class="hljs-string">"AudioTrack å·²åˆå§‹åŒ– (VOICE_COMMUNICATION æ¨¡å¼)"</span>)
        }
    }

    <span class="hljs-comment">// ============================================================================================</span>
    <span class="hljs-comment">// å½•éŸ³é€»è¾‘ (WebRTC Engine)</span>
    <span class="hljs-comment">// ============================================================================================</span>

    <span class="hljs-comment">/**
     * å¯åŠ¨ WebRTC å¼•æ“è¿›è¡Œå½•éŸ³ã€‚
     * éŸ³é¢‘æ•°æ®å°†ç»è¿‡å¤„ç† (AEC/NS) å¹¶é€šè¿‡ outputCallback è¿”å›ã€‚
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startRecording</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> (isRecording.<span class="hljs-keyword">get</span>()) {
            JLog.w(TAG, <span class="hljs-string">"å½•éŸ³å·²åœ¨è¿›è¡Œä¸­"</span>)
            <span class="hljs-keyword">return</span>
        }

        JLog.i(TAG, <span class="hljs-string">"æ­£åœ¨å¯åŠ¨ WebRTC å½•éŸ³..."</span>)
        hasLoggedRecordInfo = <span class="hljs-literal">false</span>
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 0. ç¡®ä¿éŸ³é¢‘æ¨¡å¼ä¸º IN_COMMUNICATION ä»¥å¯ç”¨ç¡¬ä»¶ AEC</span>
            setSpeakerphoneOn(<span class="hljs-literal">true</span>)

            <span class="hljs-comment">// 1. åˆå§‹åŒ– WebRTC å…¨å±€ä¸Šä¸‹æ–‡</span>
            initWebRTCContext()

            <span class="hljs-comment">// 2. åˆ›å»ºéŸ³é¢‘è®¾å¤‡æ¨¡å— (å¼•æ“æ ¸å¿ƒ)</span>
            createAudioDeviceModule()

            <span class="hljs-comment">// 3. åˆ›å»º PeerConnectionFactory (åè°ƒè€…)</span>
            createPeerConnectionFactory()

            <span class="hljs-comment">// 4. åˆ›å»ºéŸ³é¢‘æºå’Œè½¨é“ (ç®¡é“)</span>
            createAudioPipeline()

            <span class="hljs-comment">// 5. åˆ›å»ºè™šæ‹Ÿ PeerConnection ä»¥å¼ºåˆ¶ ADM å¼€å§‹å½•éŸ³</span>
            startDummyPeerConnection()

            isRecording.<span class="hljs-keyword">set</span>(<span class="hljs-literal">true</span>)
            JLog.i(TAG, <span class="hljs-string">"WebRTC å½•éŸ³å¯åŠ¨æˆåŠŸ"</span>)

        } <span class="hljs-keyword">catch</span> (e: Exception) {
            JLog.e(TAG, <span class="hljs-string">"å¯åŠ¨ WebRTC å½•éŸ³å¤±è´¥"</span>, e)
            releaseWebRTC() <span class="hljs-comment">// å¤±è´¥æ—¶æ¸…ç†èµ„æº</span>
        }
    }

    <span class="hljs-comment">/**
     * åœæ­¢å½•éŸ³å¹¶é‡Šæ”¾ WebRTC èµ„æºã€‚
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">stopRecording</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> (!isRecording.<span class="hljs-keyword">get</span>()) <span class="hljs-keyword">return</span>
        
        JLog.i(TAG, <span class="hljs-string">"æ­£åœ¨åœæ­¢ WebRTC å½•éŸ³..."</span>)
        isRecording.<span class="hljs-keyword">set</span>(<span class="hljs-literal">false</span>)
        releaseWebRTC()
        JLog.i(TAG, <span class="hljs-string">"WebRTC å½•éŸ³å·²åœæ­¢"</span>)
    }

    <span class="hljs-comment">// --- WebRTC å†…éƒ¨åˆå§‹åŒ–æµç¨‹ ---</span>

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initWebRTCContext</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> options = PeerConnectionFactory.InitializationOptions.builder(context)
            .setEnableInternalTracer(<span class="hljs-literal">false</span>)
            .createInitializationOptions()
        PeerConnectionFactory.initialize(options)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createAudioDeviceModule</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// JavaAudioDeviceModule æ˜¯æ ‡å‡†çš„ Android å®ç°ã€‚</span>
        <span class="hljs-comment">// å®ƒç®¡ç† AudioRecord å’Œ AudioTrackã€‚</span>
        <span class="hljs-comment">// å…³é”®ç‚¹ï¼šå®ƒè´Ÿè´£è®¾ç½®ç¡¬ä»¶ AEC (å¦‚æœå¯ç”¨)ã€‚</span>
        audioDeviceModule = JavaAudioDeviceModule.builder(context)
            .setUseHardwareAcousticEchoCanceler(<span class="hljs-literal">true</span>)
            .setUseHardwareNoiseSuppressor(<span class="hljs-literal">true</span>)
            .setAudioRecordErrorCallback(<span class="hljs-keyword">object</span> : JavaAudioDeviceModule.AudioRecordErrorCallback {
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onWebRtcAudioRecordInitError</span><span class="hljs-params">(p0: <span class="hljs-type">String</span>?)</span></span> = JLog.e(TAG, <span class="hljs-string">"å½•éŸ³åˆå§‹åŒ–é”™è¯¯: <span class="hljs-variable">$p0</span>"</span>)
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onWebRtcAudioRecordStartError</span><span class="hljs-params">(p0: <span class="hljs-type">JavaAudioDeviceModule</span>.<span class="hljs-type">AudioRecordStartErrorCode</span>?, p1: <span class="hljs-type">String</span>?)</span></span> = JLog.e(TAG, <span class="hljs-string">"å½•éŸ³å¯åŠ¨é”™è¯¯: <span class="hljs-variable">$p1</span>"</span>)
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onWebRtcAudioRecordError</span><span class="hljs-params">(p0: <span class="hljs-type">String</span>?)</span></span> = JLog.e(TAG, <span class="hljs-string">"å½•éŸ³è¿è¡Œæ—¶é”™è¯¯: <span class="hljs-variable">$p0</span>"</span>)
            })
            .setAudioRecordStateCallback(<span class="hljs-keyword">object</span> : JavaAudioDeviceModule.AudioRecordStateCallback {
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onWebRtcAudioRecordStart</span><span class="hljs-params">()</span></span> = JLog.i(TAG, <span class="hljs-string">"ADM: å½•éŸ³å·²å¼€å§‹"</span>)
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onWebRtcAudioRecordStop</span><span class="hljs-params">()</span></span> = JLog.i(TAG, <span class="hljs-string">"ADM: å½•éŸ³å·²åœæ­¢"</span>)
            })
            <span class="hljs-comment">// ä½¿ç”¨ SamplesReadyCallback ç›´æ¥ä» ADM è·å–åŸå§‹éŸ³é¢‘æ•°æ®</span>
            <span class="hljs-comment">// è¿™ç»•è¿‡äº†å®Œæ•´çš„ PeerConnection åª’ä½“æµä¼ è¾“ï¼Œæ›´ç›´æ¥é«˜æ•ˆ</span>
            .setSamplesReadyCallback { audioSamples -&gt;
                processAudioSamples(audioSamples)
            }
            .createAudioDeviceModule()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processAudioSamples</span><span class="hljs-params">(audioSamples: <span class="hljs-type">JavaAudioDeviceModule</span>.<span class="hljs-type">AudioSamples</span>)</span></span> {
        <span class="hljs-comment">// æ£€æŸ¥å½•éŸ³çŠ¶æ€ï¼Œé˜²æ­¢å…³é—­è¿‡ç¨‹ä¸­çš„æ•°æ®æ³„æ¼</span>
        <span class="hljs-keyword">if</span> (!isRecording.<span class="hljs-keyword">get</span>()) <span class="hljs-keyword">return</span>

        <span class="hljs-keyword">if</span> (!hasLoggedRecordInfo) {
            JLog.i(TAG, <span class="hljs-string">"WebRTC å½•éŸ³æ ¼å¼: <span class="hljs-subst">${audioSamples.sampleRate}</span>Hz, <span class="hljs-subst">${audioSamples.channelCount}</span> å£°é“, æ ¼å¼=<span class="hljs-subst">${audioSamples.audioFormat}</span>, å¤§å°=<span class="hljs-subst">${audioSamples.data.size}</span>"</span>)
            hasLoggedRecordInfo = <span class="hljs-literal">true</span>
        }

        <span class="hljs-keyword">var</span> processedBytes = audioSamples.<span class="hljs-keyword">data</span>

        <span class="hljs-comment">// 1. ç«‹ä½“å£°è½¬å•å£°é“ (å¦‚æœéœ€è¦)</span>
        <span class="hljs-keyword">if</span> (audioSamples.channelCount == <span class="hljs-number">2</span>) {
            processedBytes = stereoToMono(processedBytes)
        }

        <span class="hljs-comment">// 2. é‡é‡‡æ · (å¦‚æœéœ€è¦)</span>
        <span class="hljs-keyword">if</span> (audioSamples.sampleRate == <span class="hljs-number">48000</span>) {
            processedBytes = resample48kTo16k(processedBytes)
        }

        <span class="hljs-comment">// å›è°ƒç»™ STT</span>
        outputCallback(processedBytes)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createPeerConnectionFactory</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> options = PeerConnectionFactory.Options()
        peerConnectionFactory = PeerConnectionFactory.builder()
            .setOptions(options)
            .setAudioDeviceModule(audioDeviceModule)
            .createPeerConnectionFactory()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createAudioPipeline</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// 4.1 åˆ›å»ºéŸ³é¢‘æº (AudioSource)</span>
        <span class="hljs-comment">// æ·»åŠ  Google ç‰¹å®šçš„çº¦æŸæ¡ä»¶ï¼Œæç¤ºå¼•æ“å¯ç”¨å¤„ç†</span>
        <span class="hljs-keyword">val</span> constraints = MediaConstraints().apply {
            mandatory.add(MediaConstraints.KeyValuePair(CONSTRAINT_ECHO_CANCELLATION, <span class="hljs-string">"true"</span>))
            mandatory.add(MediaConstraints.KeyValuePair(CONSTRAINT_AUTO_GAIN_CONTROL, <span class="hljs-string">"true"</span>))
            mandatory.add(MediaConstraints.KeyValuePair(CONSTRAINT_NOISE_SUPPRESSION, <span class="hljs-string">"true"</span>))
            mandatory.add(MediaConstraints.KeyValuePair(CONSTRAINT_HIGHPASS_FILTER, <span class="hljs-string">"true"</span>))
        }
        webrtcAudioSource = peerConnectionFactory?.createAudioSource(constraints)

        <span class="hljs-comment">// 4.2 åˆ›å»ºæœ¬åœ°éŸ³é¢‘è½¨é“ (AudioTrack)</span>
        webrtcLocalTrack = peerConnectionFactory?.createAudioTrack(AUDIO_TRACK_ID, webrtcAudioSource)
        webrtcLocalTrack?.setEnabled(<span class="hljs-literal">true</span>)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startDummyPeerConnection</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> rtcConfig = PeerConnection.RTCConfiguration(emptyList())
            rtcConfig.sdpSemantics = PeerConnection.SdpSemantics.UNIFIED_PLAN

            dummyPeerConnection = peerConnectionFactory?.createPeerConnection(rtcConfig, <span class="hljs-keyword">object</span> : SimplePeerConnectionObserver() {
                <span class="hljs-comment">// æˆ‘ä»¬ä¸éœ€è¦å¤„ç†ä»»ä½• P2P äº‹ä»¶ï¼Œå› ä¸ºè¿™åªæ˜¯ä¸€ä¸ªæœ¬åœ° Loopback</span>
            })
            
            <span class="hljs-comment">// å°†æœ¬åœ°è½¨é“æ·»åŠ åˆ°è¿æ¥ä¸­ä»¥è§¦å‘ ADM å½•éŸ³</span>
            <span class="hljs-keyword">if</span> (webrtcLocalTrack != <span class="hljs-literal">null</span>) {
                dummyPeerConnection?.addTrack(webrtcLocalTrack, listOf(STREAM_ID))
                JLog.i(TAG, <span class="hljs-string">"å·²æ·»åŠ æœ¬åœ°è½¨é“åˆ°è™šæ‹Ÿ PeerConnection"</span>)
            }

            <span class="hljs-comment">// å…³é”®æ­¥éª¤ï¼šåˆ›å»º Offer å¹¶è®¾ç½® Local Description ä»¥æ¿€æ´»åª’ä½“æµ</span>
            <span class="hljs-keyword">val</span> constraints = MediaConstraints()
            dummyPeerConnection?.createOffer(<span class="hljs-keyword">object</span> : SimpleSdpObserver() {
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateSuccess</span><span class="hljs-params">(sessionDescription: <span class="hljs-type">SessionDescription</span>?)</span></span> {
                    JLog.i(TAG, <span class="hljs-string">"è™šæ‹Ÿ Offer å·²åˆ›å»º"</span>)
                    dummyPeerConnection?.setLocalDescription(<span class="hljs-keyword">object</span> : SimpleSdpObserver() {
                        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSetSuccess</span><span class="hljs-params">()</span></span> {
                            JLog.i(TAG, <span class="hljs-string">"è™šæ‹Ÿæœ¬åœ°æè¿°å·²è®¾ç½® - å¼•æ“åº”å·²æ¿€æ´»"</span>)
                        }
                    }, sessionDescription)
                }
            }, constraints)

        } <span class="hljs-keyword">catch</span> (e: Exception) {
            JLog.e(TAG, <span class="hljs-string">"å¯åŠ¨è™šæ‹Ÿ PeerConnection å¤±è´¥"</span>, e)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">releaseWebRTC</span><span class="hljs-params">()</span></span> {
        JLog.i(TAG, <span class="hljs-string">"æ­£åœ¨é‡Šæ”¾ WebRTC èµ„æº..."</span>)
        
        <span class="hljs-comment">// 1. å…³é—­ PeerConnection (åœæ­¢ç®¡é“)</span>
        safeExecute(<span class="hljs-string">"é‡Šæ”¾ PeerConnection"</span>) {
            dummyPeerConnection?.dispose()
            JLog.i(TAG, <span class="hljs-string">"PeerConnection å·²é‡Šæ”¾"</span>)
        }
        dummyPeerConnection = <span class="hljs-literal">null</span>

        <span class="hljs-comment">// 2. é‡Šæ”¾æœ¬åœ°è½¨é“</span>
        safeExecute(<span class="hljs-string">"é‡Šæ”¾ LocalTrack"</span>) {
            webrtcLocalTrack?.let {
                it.setEnabled(<span class="hljs-literal">false</span>)
                it.dispose()
                JLog.i(TAG, <span class="hljs-string">"LocalTrack å·²é‡Šæ”¾"</span>)
            }
        }
        webrtcLocalTrack = <span class="hljs-literal">null</span>
        
        <span class="hljs-comment">// 3. é‡Šæ”¾éŸ³é¢‘æº</span>
        safeExecute(<span class="hljs-string">"é‡Šæ”¾ AudioSource"</span>) {
            webrtcAudioSource?.dispose()
            JLog.i(TAG, <span class="hljs-string">"AudioSource å·²é‡Šæ”¾"</span>)
        }
        webrtcAudioSource = <span class="hljs-literal">null</span>
        
        <span class="hljs-comment">// 4. é‡Šæ”¾å·¥å‚</span>
        safeExecute(<span class="hljs-string">"é‡Šæ”¾ PeerConnectionFactory"</span>) {
            peerConnectionFactory?.dispose()
            JLog.i(TAG, <span class="hljs-string">"PeerConnectionFactory å·²é‡Šæ”¾"</span>)
        }
        peerConnectionFactory = <span class="hljs-literal">null</span>
        
        <span class="hljs-comment">// 5. é‡Šæ”¾ ADM (å¯¹äºåœæ­¢éº¦å…‹é£è‡³å…³é‡è¦)</span>
        safeExecute(<span class="hljs-string">"é‡Šæ”¾ AudioDeviceModule"</span>) {
            audioDeviceModule?.let {
                <span class="hljs-comment">// è§£é™¤å¯èƒ½çš„çŠ¶æ€é”å®š</span>
                it.setSpeakerMute(<span class="hljs-literal">false</span>) 
                it.setMicrophoneMute(<span class="hljs-literal">false</span>)
                it.release()
                JLog.i(TAG, <span class="hljs-string">"AudioDeviceModule å·²é‡Šæ”¾ - éº¦å…‹é£åº”å·²åœæ­¢"</span>)
            }
        }
        audioDeviceModule = <span class="hljs-literal">null</span>
    }

    <span class="hljs-comment">/**
     * å®Œå…¨é‡Šæ”¾æ‰€æœ‰èµ„æº (æ’­æ”¾å™¨å’Œå½•éŸ³æœº)ã€‚
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">release</span><span class="hljs-params">()</span></span> {
        stopPlay()
        stopRecording()
        <span class="hljs-comment">// é‡ç½®éŸ³é¢‘æ¨¡å¼</span>
        safeExecute(<span class="hljs-string">"é‡ç½®éŸ³é¢‘æ¨¡å¼"</span>) {
            audioManager.isSpeakerphoneOn = <span class="hljs-literal">false</span>
            audioManager.mode = AudioManager.MODE_NORMAL
        }
    }

    <span class="hljs-comment">// ============================================================================================</span>
    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•å’Œç±»</span>
    <span class="hljs-comment">// ============================================================================================</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">safeExecute</span><span class="hljs-params">(actionName: <span class="hljs-type">String</span>, action: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        <span class="hljs-keyword">try</span> {
            action()
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            JLog.e(TAG, <span class="hljs-string">"<span class="hljs-variable">$actionName</span> å¤±è´¥"</span>, e)
        }
    }

    <span class="hljs-comment">/**
     * å°† 16-bit PCM ç«‹ä½“å£°è½¬æ¢ä¸ºå•å£°é“ (ä¸¢å¼ƒå³å£°é“)ã€‚
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">stereoToMono</span><span class="hljs-params">(stereoBytes: <span class="hljs-type">ByteArray</span>)</span></span>: ByteArray {
        <span class="hljs-keyword">val</span> monoBytes = ByteArray(stereoBytes.size / <span class="hljs-number">2</span>)
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until monoBytes.size step <span class="hljs-number">2</span>) {
            <span class="hljs-keyword">val</span> stereoIndex = i * <span class="hljs-number">2</span>
            monoBytes[i] = stereoBytes[stereoIndex]
            monoBytes[i + <span class="hljs-number">1</span>] = stereoBytes[stereoIndex + <span class="hljs-number">1</span>]
        }
        <span class="hljs-keyword">return</span> monoBytes
    }

    <span class="hljs-comment">/**
     * å°† 16-bit PCM 48000Hz é™é‡‡æ ·åˆ° 16000Hz (3:1 æŠ½å–)ã€‚
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">resample48kTo16k</span><span class="hljs-params">(src: <span class="hljs-type">ByteArray</span>)</span></span>: ByteArray {
        <span class="hljs-keyword">val</span> sampleCount = src.size / <span class="hljs-number">2</span>
        <span class="hljs-keyword">val</span> newSampleCount = sampleCount / <span class="hljs-number">3</span>
        <span class="hljs-keyword">val</span> dst = ByteArray(newSampleCount * <span class="hljs-number">2</span>)

        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until newSampleCount) {
            <span class="hljs-keyword">val</span> srcIndex = i * <span class="hljs-number">3</span> * <span class="hljs-number">2</span>
            <span class="hljs-keyword">val</span> dstIndex = i * <span class="hljs-number">2</span>
            dst[dstIndex] = src[srcIndex]
            dst[dstIndex + <span class="hljs-number">1</span>] = src[srcIndex + <span class="hljs-number">1</span>]
        }
        <span class="hljs-keyword">return</span> dst
    }

    <span class="hljs-comment">// --- ç®€åŒ–çš„ Observer å®ç°ï¼Œé¿å…å†—ä½™ä»£ç  ---</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimplePeerConnectionObserver</span> : <span class="hljs-type">PeerConnection.Observer</span> {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSignalingChange</span><span class="hljs-params">(p0: <span class="hljs-type">PeerConnection</span>.<span class="hljs-type">SignalingState</span>?)</span></span> {}
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onIceConnectionChange</span><span class="hljs-params">(p0: <span class="hljs-type">PeerConnection</span>.<span class="hljs-type">IceConnectionState</span>?)</span></span> {}
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onIceConnectionReceivingChange</span><span class="hljs-params">(p0: <span class="hljs-type">Boolean</span>)</span></span> {}
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onIceGatheringChange</span><span class="hljs-params">(p0: <span class="hljs-type">PeerConnection</span>.<span class="hljs-type">IceGatheringState</span>?)</span></span> {}
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onIceCandidate</span><span class="hljs-params">(p0: <span class="hljs-type">IceCandidate</span>?)</span></span> {}
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onIceCandidatesRemoved</span><span class="hljs-params">(p0: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">out</span> <span class="hljs-type">IceCandidate</span>&gt;?)</span></span> {}
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAddStream</span><span class="hljs-params">(p0: <span class="hljs-type">MediaStream</span>?)</span></span> {}
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onRemoveStream</span><span class="hljs-params">(p0: <span class="hljs-type">MediaStream</span>?)</span></span> {}
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDataChannel</span><span class="hljs-params">(p0: <span class="hljs-type">DataChannel</span>?)</span></span> {}
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onRenegotiationNeeded</span><span class="hljs-params">()</span></span> {}
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAddTrack</span><span class="hljs-params">(p0: <span class="hljs-type">RtpReceiver</span>?, p1: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">out</span> <span class="hljs-type">MediaStream</span>&gt;?)</span></span> {}
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleSdpObserver</span> : <span class="hljs-type">SdpObserver</span> {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateSuccess</span><span class="hljs-params">(p0: <span class="hljs-type">SessionDescription</span>?)</span></span> {}
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSetSuccess</span><span class="hljs-params">()</span></span> {}
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateFailure</span><span class="hljs-params">(p0: <span class="hljs-type">String</span>?)</span></span> { JLog.e(TAG, <span class="hljs-string">"SDP Create Error: <span class="hljs-variable">$p0</span>"</span>) }
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSetFailure</span><span class="hljs-params">(p0: <span class="hljs-type">String</span>?)</span></span> { JLog.e(TAG, <span class="hljs-string">"SDP Set Error: <span class="hljs-variable">$p0</span>"</span>) }
    }
}
</code></pre>
<h3 data-id="heading-3">ä½¿ç”¨æ–¹å¼</h3>
<h4 data-id="heading-4">1. åˆå§‹åŒ–</h4>
<p>è°ƒç”¨æ–¹éœ€è¦å®ä¾‹åŒ– AECSchedule ï¼Œå¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥æ¥æ”¶å¤„ç†åçš„çº¯å‡€éŸ³é¢‘æ•°æ®ï¼ˆç”¨äº STTï¼‰ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åœ¨ Activity æˆ– ViewModel ä¸­</span>
<span class="hljs-keyword">val</span> aecSchedule = AECSchedule(context) { processedPcmData -&gt;
    <span class="hljs-comment">// [å›è°ƒ] è¿™é‡Œæ¥æ”¶åˆ°çš„æ˜¯ç»è¿‡å›å£°æ¶ˆé™¤å’Œé™å™ªåçš„çº¯å‡€éŸ³é¢‘</span>
    <span class="hljs-comment">// é€šå¸¸åœ¨è¿™é‡Œå°†æ•°æ®å‘é€ç»™ STT (è¯­éŸ³è¯†åˆ«) å¼•æ“</span>
    sttClient.sendAudio(processedPcmData)
}
</code></pre>
<h4 data-id="heading-5">2. å¯åŠ¨å½•éŸ³ (Start Recording)</h4>
<p>å½“éœ€è¦å¼€å§‹å¬ç”¨æˆ·è¯´è¯æ—¶ï¼ˆä¾‹å¦‚å”¤é†’åï¼Œæˆ–è¿›å…¥å¯¹è¯çŠ¶æ€ï¼‰ï¼Œè°ƒç”¨ startRecording() ã€‚</p>
<ul>
<li>ä½œç”¨ ï¼šå¯åŠ¨ WebRTC å¼•æ“ï¼Œæ‰“å¼€éº¦å…‹é£ï¼Œå¼€å§‹é‡‡é›†å¹¶å¤„ç†éŸ³é¢‘ã€‚</li>
<li>æ—¶æœº ï¼šé€šå¸¸åœ¨ç”¨æˆ·ç‚¹å‡»â€œå¼€å§‹è¯´è¯â€æŒ‰é’®ï¼Œæˆ–ç³»ç»Ÿæ£€æµ‹åˆ°å”¤é†’è¯åã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">aecSchedule.startRecording()
</code></pre>
<h4 data-id="heading-6">3. æ’­æ”¾ TTS éŸ³é¢‘ (Playback)</h4>
<p>å½“æœ‰ TTSï¼ˆè¯­éŸ³åˆæˆï¼‰æ•°æ®éœ€è¦æ’­æ”¾æ—¶ï¼Œ å¿…é¡» é€šè¿‡ AECSchedule æ¥æ’­æ”¾ï¼Œè€Œä¸æ˜¯è‡ªå·±åˆ›å»º AudioTrack ã€‚</p>
<ul>
<li>å…³é”®ç‚¹ ï¼šåªæœ‰é€šè¿‡ onTTSAudioData æ’­æ”¾çš„å£°éŸ³ï¼Œæ‰èƒ½è¢« WebRTC å¼•æ“æ•æ‰ä¸ºâ€œå‚è€ƒä¿¡å·â€ï¼Œä»è€Œåœ¨éº¦å…‹é£é‡‡é›†çš„éŸ³é¢‘ä¸­å°†å…¶æ¶ˆé™¤ï¼ˆé¿å…è‡ªè¨€è‡ªè¯­ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å‡è®¾ ttsData æ˜¯ä» TTS å¼•æ“è·å–çš„ PCM å­—èŠ‚æµï¼Œæˆ‘è¿™è¾¹æ‹¿åˆ°çš„æ˜¯ tts-websocket ä¸­è¿”å›çš„ byte[] ï¼ˆéŸ³é¢‘æ•°æ®ï¼‰</span>
aecSchedule.onTTSAudioData(ttsData)
</code></pre>
<h4 data-id="heading-7">4. åœæ­¢æ’­æ”¾ (Stop Playback)</h4>
<p>å¦‚æœéœ€è¦æ‰“æ–­æ’­æ”¾ï¼ˆä¾‹å¦‚ç”¨æˆ·ç‚¹å‡»â€œåœæ­¢â€æˆ–å¼€å§‹æ–°çš„å¯¹è¯ï¼‰ï¼Œè°ƒç”¨ stopPlay() ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">aecSchedule.stopPlay()
</code></pre>
<h4 data-id="heading-8">5. åœæ­¢å½•éŸ³ (Stop Recording)</h4>
<p>å½“ä¸éœ€è¦å†å¬ç”¨æˆ·è¯´è¯æ—¶ï¼ˆä¾‹å¦‚è¯†åˆ«ç»“æŸï¼Œè¿›å…¥æ€è€ƒçŠ¶æ€ï¼‰ï¼Œè°ƒç”¨ stopRecording() ã€‚</p>
<ul>
<li>æ³¨æ„ ï¼šè¿™å°†é‡Šæ”¾éº¦å…‹é£èµ„æºï¼Œç³»ç»ŸçŠ¶æ€æ çš„å½•éŸ³å›¾æ ‡ï¼ˆå°ç»¿ç‚¹ï¼‰åº”æ¶ˆå¤±ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">aecSchedule.stopRecording()
</code></pre>
<h4 data-id="heading-9">6. é”€æ¯èµ„æº (Release)</h4>
<p>åœ¨é¡µé¢é”€æ¯æˆ–é€€å‡ºåŠŸèƒ½æ—¶ï¼ŒåŠ¡å¿…è°ƒç”¨ release() ä»¥å½»åº•é‡Šæ”¾æ‰€æœ‰ç¡¬ä»¶èµ„æºã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">super</span>.onDestroy()
    aecSchedule.release()
}
</code></pre>
<h4 data-id="heading-10">ä¼ªä»£ç æµç¨‹</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¼ªä»£ç ï¼šAEC è°ƒåº¦æµç¨‹</span>

<span class="hljs-comment">// 1. åˆå§‹åŒ– (Init)</span>
<span class="hljs-comment">// --------------------------------------------------------------------------------</span>
<span class="hljs-comment">// åˆ›å»º AEC è°ƒåº¦å™¨ï¼Œå¹¶å®šä¹‰å¤„ç†åçš„éŸ³é¢‘å»å‘ï¼ˆç»™ STTï¼‰</span>
<span class="hljs-keyword">val</span> aecSchedule = AECSchedule(context) { processedPcmData -&gt;
    <span class="hljs-comment">// å›è°ƒï¼šæ¥æ”¶ç»è¿‡å›å£°æ¶ˆé™¤çš„çº¯å‡€éŸ³é¢‘</span>
    sttClient.sendAudio(processedPcmData)
}

<span class="hljs-comment">// 2. å½•éŸ³æµç¨‹ (Recording Loop)</span>
<span class="hljs-comment">// --------------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startSession</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// å¯åŠ¨ STT å¼•æ“ï¼ˆè®¾ç½®ä¸ºå¤–éƒ¨éŸ³é¢‘æºæ¨¡å¼ï¼‰</span>
    sttClient.startExternalAudioMode()
    
    <span class="hljs-comment">// å¯åŠ¨ AEC å½•éŸ³ï¼ˆæ‰“å¼€éº¦å…‹é£ + WebRTC å¤„ç†ï¼‰</span>
    aecSchedule.startRecording()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">stopSession</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// åœæ­¢å½•éŸ³</span>
    aecSchedule.stopRecording()
    <span class="hljs-comment">// åœæ­¢ STT</span>
    sttClient.stop()
}

<span class="hljs-comment">// 3. æ’­æ”¾æµç¨‹ (Playback with AEC)</span>
<span class="hljs-comment">// --------------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">speak</span><span class="hljs-params">(text: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-comment">// è°ƒç”¨ TTS å¼•æ“ç”ŸæˆéŸ³é¢‘</span>
    ttsClient.synthesize(text, <span class="hljs-keyword">object</span> : TTSCallback {
        
        <span class="hljs-comment">// å…³é”®ç‚¹ï¼šæ‹¦æˆª TTS çš„éŸ³é¢‘æ•°æ®</span>
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAudioData</span><span class="hljs-params">(pcmData: <span class="hljs-type">ByteArray</span>)</span></span> {
            <span class="hljs-comment">// å°† TTS éŸ³é¢‘å–‚ç»™ AECSchedule è¿›è¡Œæ’­æ”¾</span>
            <span class="hljs-comment">// è¿™æ · WebRTC æ‰èƒ½å°†å…¶è¯†åˆ«ä¸ºâ€œå‚è€ƒä¿¡å·â€å¹¶æ¶ˆé™¤</span>
            aecSchedule.onTTSAudioData(pcmData)
        }
    })
}

<span class="hljs-comment">// 4. èµ„æºé‡Šæ”¾ (Cleanup)</span>
<span class="hljs-comment">// --------------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span></span> {
    aecSchedule.release() <span class="hljs-comment">// åŠ¡å¿…é‡Šæ”¾ç¡¬ä»¶èµ„æº</span>
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2389299ab07041b2b6f78cb490922e6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5bCP6L2wX1JleA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767081023&amp;x-signature=bODgNIAO%2F%2FwK2Nx%2F0LREjk0fKCs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-11">æ•ˆæœæ¼”ç¤ºï¼ˆå¸¦å£°éŸ³ï¼‰</h3>
<p>ã€AEC å›å£°æ¶ˆé™¤æµ‹è¯•-è§†é¢‘æ¼”ç¤ºã€‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fb23.tv%2FkUEJYuP" target="_blank" title="https://b23.tv/kUEJYuP" ref="nofollow noopener noreferrer">b23.tv/kUEJYuP</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b40ff934fd3c4879929a01a99e7e3f2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5bCP6L2wX1JleA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767081023&amp;x-signature=9GEksZR388sc72gEtkxKYymBwUk%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”çªç ´LLMæ•ˆç‡ç“¶é¢ˆï¼šå¤šæ ‡è®°é¢„æµ‹(MTP)æŠ€æœ¯æ·±åº¦è§£æä¸å®æˆ˜]]></title>    <link>https://juejin.cn/post/7586615716905746432</link>    <guid>https://juejin.cn/post/7586615716905746432</guid>    <pubDate>2025-12-23T03:29:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586615716905746432" data-draft-id="7586570254861778984" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”çªç ´LLMæ•ˆç‡ç“¶é¢ˆï¼šå¤šæ ‡è®°é¢„æµ‹(MTP)æŠ€æœ¯æ·±åº¦è§£æä¸å®æˆ˜"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-23T03:29:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¾é†’"/> <meta itemprop="url" content="https://juejin.cn/user/708512558088669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”çªç ´LLMæ•ˆç‡ç“¶é¢ˆï¼šå¤šæ ‡è®°é¢„æµ‹(MTP)æŠ€æœ¯æ·±åº¦è§£æä¸å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/708512558088669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¾é†’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:29:20.000Z" title="Tue Dec 23 2025 03:29:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è½åœ°çš„è¿‡ç¨‹ä¸­ï¼Œâ€œç”Ÿæˆæ•ˆç‡â€å§‹ç»ˆæ˜¯ç»•ä¸å¼€çš„æ ¸å¿ƒç—›ç‚¹â€”â€”ä¼ ç»Ÿè‡ªå›å½’æ¨¡å‹åƒâ€œæŒ¤ç‰™è†â€ä¸€æ ·é€è¯å…ƒï¼ˆTokenï¼‰ç”Ÿæˆæ–‡æœ¬ï¼Œä¸ä»…æ¨ç†é€Ÿåº¦æ…¢ï¼Œè®­ç»ƒæ•ˆç‡ä¹Ÿéš¾ä»¥æ»¡è¶³å¤§è§„æ¨¡åº”ç”¨éœ€æ±‚ã€‚è€Œ<strong>å¤šæ ‡è®°é¢„æµ‹ï¼ˆMulti-Token Prediction, MTPï¼‰</strong> ä½œä¸ºè§£å†³è¿™ä¸€é—®é¢˜çš„å…³é”®æŠ€æœ¯ï¼Œæ­£åœ¨æˆä¸ºLLMæ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæ–¹å‘ã€‚æœ¬æ–‡å°†ä»æŠ€æœ¯æœ¬è´¨ã€æ‰§è¡Œæµç¨‹ã€å®æˆ˜ç¤ºä¾‹åˆ°è½åœ°åº”ç”¨ï¼Œå…¨æ–¹ä½æ‹†è§£MTPæŠ€æœ¯ã€‚</p>
<h2 data-id="heading-1">MTPæ ¸å¿ƒå®šä¹‰ï¼šä¸æ­¢äºâ€œä¸€æ¬¡ç”Ÿæˆå¤šä¸ªTokenâ€</h2>
<p>å¤šæ ‡è®°é¢„æµ‹ï¼ˆMTPï¼‰æ˜¯ä¸€ç§è®©å¤§è¯­è¨€æ¨¡å‹åœ¨<strong>å•æ¬¡å‰å‘ä¼ æ’­ä¸­åŒæ—¶é¢„æµ‹å¤šä¸ªåç»­è¯å…ƒ</strong>çš„æŠ€æœ¯ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯æ‰“ç ´ä¼ ç»Ÿâ€œå•Tokené€æ¬¡ç”Ÿæˆâ€çš„æ•ˆç‡æ·é”ã€‚</p>
<p>ä¸ä¼ ç»Ÿå•æ ‡è®°é¢„æµ‹ï¼ˆNTPï¼‰çš„æ ¸å¿ƒå·®å¼‚ï¼š</p>
<ul>
<li>ä¼ ç»ŸNTPï¼šè¾“å…¥æ–‡æœ¬â†’æ¨¡å‹é¢„æµ‹ç¬¬t+1ä¸ªTokenâ†’ä»¥t+1ä¸ºæ–°è¾“å…¥â†’é¢„æµ‹t+2ä¸ªTokenï¼ˆå¾ªç¯å¾€å¤ï¼‰ï¼›</li>
<li>MTPï¼šè¾“å…¥æ–‡æœ¬â†’æ¨¡å‹å•æ¬¡å‰å‘ä¼ æ’­â†’åŒæ—¶é¢„æµ‹t+1ã€t+2â€¦t+nä¸ªTokenï¼Œç›´æ¥å®Œæˆå¤šæ­¥ç”Ÿæˆã€‚</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼ŒMTPè®©æ¨¡å‹ä»â€œä¸€æ­¥èµ°ä¸€æ ¼â€å˜æˆâ€œä¸€æ­¥èµ°å¤šæ ¼â€ï¼Œæ—¢æå‡è®­ç»ƒæ—¶çš„ä¿¡å·å¯†åº¦ï¼Œåˆå¤§å¹…é™ä½æ¨ç†æ—¶çš„è¿­ä»£æ¬¡æ•°ã€‚</p>
<h2 data-id="heading-2">MTPæ ¸å¿ƒæ‰§è¡Œæµç¨‹</h2>
<p>MTPçš„æ‰§è¡Œæµç¨‹åˆ†ä¸º<strong>è®­ç»ƒé˜¶æ®µ</strong>å’Œ<strong>æ¨ç†é˜¶æ®µ</strong>ï¼Œå…¶ä¸­æ¨ç†é˜¶æ®µç»“åˆâ€œæ¨æµ‹è§£ç ï¼ˆSpeculative Decodingï¼‰â€æ—¶æ•ˆæœæœ€ä¼˜ã€‚</p>
<h3 data-id="heading-3">1. åŸºç¡€MTPè®­ç»ƒæµç¨‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8bdb87ed6d14384bfe67b8ae906a43d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YaS:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065360&amp;x-signature=FHOJWkUttJX1tday%2Bfper%2F%2FQVyU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æµç¨‹æ‹†è§£</strong>ï¼š</p>
<ol>
<li>è¾“å…¥æ–‡æœ¬ç»TokenåŒ–è½¬ä¸ºåºåˆ—<code>Xâ‚,Xâ‚‚...Xâ‚œ</code>ï¼›</li>
<li>å…±äº«Transformerç¼–ç å™¨å°†åºåˆ—ç¼–ç ä¸ºä¸Šä¸‹æ–‡è¡¨å¾<code>Hâ‚œ</code>ï¼›</li>
<li>å¤šä¸ªç‹¬ç«‹çš„MTPè¾“å‡ºå¤´åŸºäº<code>Hâ‚œ</code>ï¼Œå¹¶è¡Œé¢„æµ‹<code>t+1</code>åˆ°<code>t+n</code>ä¸ªTokenï¼›</li>
<li>è®¡ç®—æ¯ä¸ªMTPå¤´çš„é¢„æµ‹æŸå¤±ï¼ˆäº¤å‰ç†µï¼‰ï¼Œæ€»æŸå¤±ä¸ºæ‰€æœ‰å¤´æŸå¤±çš„å¹³å‡å€¼ï¼›</li>
<li>åå‘ä¼ æ’­æ›´æ–°æ¨¡å‹å‚æ•°ï¼Œç›´åˆ°æ¨¡å‹æ”¶æ•›ã€‚</li>
</ol>
<h3 data-id="heading-4">2. MTP+æ¨æµ‹è§£ç æ¨ç†æµç¨‹ï¼ˆä¸»æµè½åœ°æ–¹æ¡ˆï¼‰</h3>
<p>å•çº¯çš„MTPå¯èƒ½å­˜åœ¨â€œå¤šTokené¢„æµ‹ä¸è¿è´¯â€çš„é—®é¢˜ï¼Œç»“åˆæ¨æµ‹è§£ç åï¼Œæ—¢èƒ½ä¿æ•ˆç‡åˆèƒ½ä¿è´¨é‡ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75fac2031b92462b86c9ccb07c36a6e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YaS:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065360&amp;x-signature=yBzVOyNIwuotLibktiuEBvZ1pGo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æµç¨‹æ‹†è§£</strong>ï¼š</p>
<ol>
<li>è½»é‡çº§MTPâ€œè‰ç¨¿æ¨¡å‹â€åŸºäºè¾“å…¥ä¸Šä¸‹æ–‡ï¼Œå¹¶è¡Œç”ŸæˆKä¸ªå€™é€‰Tokenï¼ˆæ¯”å¦‚K=4ï¼‰ï¼›</li>
<li>é«˜ç²¾åº¦ä¸»æ¨¡å‹é€šè¿‡<strong>å•æ¬¡å‰å‘ä¼ æ’­</strong>ï¼Œæ‰¹é‡éªŒè¯è¿™Kä¸ªå€™é€‰Tokençš„åˆç†æ€§ï¼›</li>
<li>è‹¥éªŒè¯é€šè¿‡ï¼ˆDeepSeekå®æµ‹æ¥å—ç‡85%-90%ï¼‰ï¼Œç›´æ¥è¾“å‡ºè¿™Kä¸ªTokenï¼Œæ¨¡å‹æ­¥æ•°ä¸€æ¬¡æ€§+Kï¼›</li>
<li>è‹¥éƒ¨åˆ†TokenéªŒè¯å¤±è´¥ï¼Œä»…ä¿ç•™é€šè¿‡çš„Tokenï¼Œé‡æ–°ç”Ÿæˆè¢«æ‹’ç»çš„éƒ¨åˆ†ï¼›</li>
<li>é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°ç”Ÿæˆæ»¡è¶³é•¿åº¦è¦æ±‚çš„æ–‡æœ¬ã€‚</li>
</ol>
<h3 data-id="heading-5">3. DeepSeekä¾èµ–é“¾å¼MTPæ¶æ„ï¼ˆä¿è¿è´¯çš„è¿›é˜¶æ–¹æ¡ˆï¼‰</h3>
<p>ä¸ºè§£å†³â€œç‹¬ç«‹å¤šå¤´MTPç”Ÿæˆä¸è¿è´¯â€çš„é—®é¢˜ï¼ŒDeepSeekè®¾è®¡äº†ä¾èµ–é“¾å¼MTPæ¶æ„ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47f0c2adf901461ea3b724ef06529c95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YaS:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065360&amp;x-signature=%2BtT0LazpV1e%2FixwrjSC8xE0tgrI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ ¸å¿ƒé€»è¾‘ï¼šåä¸€ä¸ªMTPå¤´çš„é¢„æµ‹ä¾èµ–å‰ä¸€ä¸ªå¤´çš„è¾“å‡ºè¡¨å¾ï¼Œæ—¢ä¿ç•™äº†â€œå¤šTokené¢„æµ‹â€çš„æ•ˆç‡ï¼Œåˆä¿è¯äº†æ–‡æœ¬çš„è¯­ä¹‰è¿è´¯æ€§ã€‚</p>
<h2 data-id="heading-6">MTPå®æˆ˜ç¤ºä¾‹ï¼šæç®€PyTorchå®ç°æ¡†æ¶</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„MTPæ¨¡å‹å®ç°ï¼Œå¸®åŠ©ä½ ç†è§£æ ¸å¿ƒä»£ç é€»è¾‘ï¼ˆä»…ä¿ç•™å…³é”®æ¨¡å—ï¼Œæ— å¤æ‚ä¼˜åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn
<span class="hljs-keyword">import</span> torch.optim <span class="hljs-keyword">as</span> optim

<span class="hljs-comment"># è¶…å‚æ•°è®¾ç½®</span>
VOCAB_SIZE = <span class="hljs-number">10000</span>  <span class="hljs-comment"># è¯æ±‡è¡¨å¤§å°</span>
EMBED_DIM = <span class="hljs-number">256</span>     <span class="hljs-comment"># åµŒå…¥ç»´åº¦</span>
HIDDEN_DIM = <span class="hljs-number">512</span>    <span class="hljs-comment"># Transformeréšè—å±‚ç»´åº¦</span>
NUM_HEADS = <span class="hljs-number">8</span>       <span class="hljs-comment"># æ³¨æ„åŠ›å¤´æ•°</span>
NUM_LAYERS = <span class="hljs-number">2</span>      <span class="hljs-comment"># Transformerå±‚æ•°</span>
MTP_NUM = <span class="hljs-number">3</span>         <span class="hljs-comment"># ä¸€æ¬¡é¢„æµ‹3ä¸ªTokenï¼ˆt+1/t+2/t+3ï¼‰</span>

<span class="hljs-comment"># 1. å…±äº«Transformerç¼–ç å™¨ï¼ˆåŸºç¡€ç¼–ç æ¨¡å—ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SharedEncoder</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.embedding = nn.Embedding(VOCAB_SIZE, EMBED_DIM)
        self.transformer_encoder = nn.TransformerEncoder(
            nn.TransformerEncoderLayer(EMBED_DIM, NUM_HEADS, HIDDEN_DIM),
            num_layers=NUM_LAYERS
        )
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-comment"># x: [seq_len, batch_size]</span>
        embed = self.embedding(x)  <span class="hljs-comment"># [seq_len, batch_size, embed_dim]</span>
        enc_out = self.transformer_encoder(embed)  <span class="hljs-comment"># [seq_len, batch_size, embed_dim]</span>
        <span class="hljs-keyword">return</span> enc_out[-<span class="hljs-number">1</span>]  <span class="hljs-comment"># è¿”å›æœ€åä¸€ä¸ªTokençš„è¡¨å¾: [batch_size, embed_dim]</span>

<span class="hljs-comment"># 2. MTPå¤šè¾“å‡ºå¤´ï¼ˆå¹¶è¡Œé¢„æµ‹å¤šä¸ªTokenï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MTPModel</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.encoder = SharedEncoder()
        <span class="hljs-comment"># å®šä¹‰MTP_NUMä¸ªç‹¬ç«‹çš„è¾“å‡ºå¤´</span>
        self.mtp_heads = nn.ModuleList([
            nn.Linear(EMBED_DIM, VOCAB_SIZE) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(MTP_NUM)
        ])
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-comment"># x: [seq_len, batch_size]</span>
        context_feat = self.encoder(x)  <span class="hljs-comment"># [batch_size, embed_dim]</span>
        <span class="hljs-comment"># æ¯ä¸ªå¤´å¹¶è¡Œé¢„æµ‹ä¸€ä¸ªToken</span>
        mtp_outputs = [head(context_feat) <span class="hljs-keyword">for</span> head <span class="hljs-keyword">in</span> self.mtp_heads]
        <span class="hljs-comment"># è¿”å›t+1/t+2/t+3çš„é¢„æµ‹logits: [MTP_NUM, batch_size, vocab_size]</span>
        <span class="hljs-keyword">return</span> torch.stack(mtp_outputs)

<span class="hljs-comment"># 3. è®­ç»ƒæµç¨‹ç¤ºä¾‹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">train_mtp_model</span>():
    model = MTPModel()
    criterion = nn.CrossEntropyLoss()  <span class="hljs-comment"># äº¤å‰ç†µæŸå¤±</span>
    optimizer = optim.Adam(model.parameters(), lr=<span class="hljs-number">1e-4</span>)
    
    <span class="hljs-comment"># æ¨¡æ‹Ÿè®­ç»ƒæ•°æ®ï¼šè¾“å…¥åºåˆ—[1,2,3,4]ï¼Œç›®æ ‡Tokenä¸º[5,6,7]ï¼ˆt+1=5, t+2=6, t+3=7ï¼‰</span>
    batch_size = <span class="hljs-number">2</span>
    input_seq = torch.tensor([[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]]).T  <span class="hljs-comment"># [seq_len=4, batch_size=2]</span>
    target_tokens = torch.tensor([[<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>], [<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>]]).T    <span class="hljs-comment"># [MTP_NUM=3, batch_size=2]</span>
    
    model.train()
    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>):
        optimizer.zero_grad()
        <span class="hljs-comment"># å‰å‘ä¼ æ’­ï¼šè·å–3ä¸ªTokençš„é¢„æµ‹logits</span>
        mtp_logits = model(input_seq)  <span class="hljs-comment"># [3, 2, 10000]</span>
        
        <span class="hljs-comment"># è®¡ç®—æ€»æŸå¤±ï¼šæ¯ä¸ªMTPå¤´çš„æŸå¤±ç›¸åŠ </span>
        total_loss = <span class="hljs-number">0.0</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(MTP_NUM):
            <span class="hljs-comment"># logits: [2, 10000], target: [2]</span>
            loss = criterion(mtp_logits[i], target_tokens[i])
            total_loss += loss
        
        <span class="hljs-comment"># åå‘ä¼ æ’­</span>
        total_loss.backward()
        optimizer.step()
        
        <span class="hljs-keyword">if</span> (epoch+<span class="hljs-number">1</span>) % <span class="hljs-number">20</span> == <span class="hljs-number">0</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Epoch <span class="hljs-subst">{epoch+<span class="hljs-number">1</span>}</span>, Total Loss: <span class="hljs-subst">{total_loss.item():<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment"># æ‰§è¡Œè®­ç»ƒ</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    train_mtp_model()
</code></pre>
<p><strong>ä»£ç å…³é”®è¯´æ˜</strong>ï¼š</p>
<ol>
<li><code>SharedEncoder</code>ï¼šå…±äº«çš„Transformerç¼–ç å™¨ï¼Œä¸ºæ‰€æœ‰MTPå¤´æä¾›ç»Ÿä¸€çš„ä¸Šä¸‹æ–‡è¡¨å¾ï¼›</li>
<li><code>MTPModel</code>ï¼šåŒ…å«3ä¸ªç‹¬ç«‹çš„çº¿æ€§è¾“å‡ºå¤´ï¼Œå¹¶è¡Œé¢„æµ‹<code>t+1</code>ã€<code>t+2</code>ã€<code>t+3</code>ä¸‰ä¸ªTokenï¼›</li>
<li>è®­ç»ƒé˜¶æ®µï¼šè®¡ç®—æ¯ä¸ªMTPå¤´çš„äº¤å‰ç†µæŸå¤±ï¼Œæ±‚å’Œåä½œä¸ºæ€»æŸå¤±åå‘ä¼ æ’­ï¼Œè®©æ¨¡å‹å­¦ä¹ â€œä¸€æ¬¡é¢„æµ‹å¤šä¸ªTokenâ€çš„èƒ½åŠ›ï¼›</li>
<li>è¾“å‡ºç¤ºä¾‹ï¼šè®­ç»ƒ100è½®åæŸå¤±ä¼šé€æ­¥ä¸‹é™ï¼Œè¯´æ˜æ¨¡å‹å·²å­¦ä¼šä»è¾“å…¥<code>[1,2,3,4]</code>é¢„æµ‹ç›®æ ‡<code>[5,6,7]</code>ã€‚</li>
</ol>
<h2 data-id="heading-7">MTP vs ä¼ ç»Ÿå•æ ‡è®°é¢„æµ‹ï¼ˆNTPï¼‰æ ¸å¿ƒå¯¹æ¯”</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>ä¼ ç»Ÿå•æ ‡è®°é¢„æµ‹ï¼ˆNTPï¼‰</th><th>å¤šæ ‡è®°é¢„æµ‹ï¼ˆMTPï¼‰</th></tr></thead><tbody><tr><td>é¢„æµ‹æ–¹å¼</td><td>æ¯æ¬¡ç”Ÿæˆ1ä¸ªToken</td><td>ä¸€æ¬¡ç”Ÿæˆnä¸ªToken</td></tr><tr><td>æ¨ç†é€Ÿåº¦</td><td>åŸºå‡†å€¼ï¼ˆ1å€ï¼‰</td><td>1.8~2.6å€ï¼ˆç»“åˆæ¨æµ‹è§£ç ï¼‰</td></tr><tr><td>è®­ç»ƒä¿¡å·å¯†åº¦</td><td>ä½ï¼ˆæ¯æ­¥1ä¸ªæŸå¤±ï¼‰</td><td>é«˜ï¼ˆæ¯æ­¥nä¸ªæŸå¤±ï¼‰</td></tr><tr><td>æ–‡æœ¬è¿è´¯æ€§</td><td>ä¸€èˆ¬ï¼ˆä»…ä¾èµ–å‰1ä¸ªTokenï¼‰</td><td>ä¼˜ç§€ï¼ˆä¾èµ–é“¾å¼è¡¨å¾ï¼‰</td></tr><tr><td>ç¡¬ä»¶èµ„æºåˆ©ç”¨ç‡</td><td>ä½ï¼ˆå•æ¬¡å‰å‘ä¼ æ’­ä»…ç”¨1æ¬¡ï¼‰</td><td>é«˜ï¼ˆå•æ¬¡å‰å‘ä¼ æ’­ç”¨næ¬¡ï¼‰</td></tr><tr><td>å…¸å‹è½åœ°åœºæ™¯</td><td>å°æ¨¡å‹ã€ä½å»¶è¿Ÿè¦æ±‚åœºæ™¯</td><td>å¤§æ¨¡å‹ã€é•¿æ–‡æœ¬ç”Ÿæˆã€ç§»åŠ¨ç«¯</td></tr></tbody></table>
<h2 data-id="heading-8">MTPçš„è½åœ°åº”ç”¨ä¸æ ¸å¿ƒä¼˜åŠ¿</h2>
<h3 data-id="heading-9">1. æ ¸å¿ƒä¼˜åŠ¿</h3>
<ol>
<li><strong>æ•ˆç‡ç¿»å€</strong>ï¼šæ¨ç†é€Ÿåº¦æå‡1.8~2.6å€ï¼Œè®­ç»ƒæ—¶ä¿¡å·å¯†åº¦æ›´é«˜ï¼Œæ”¶æ•›æ›´å¿«ï¼›</li>
<li><strong>è¯­ä¹‰æ›´è¿è´¯</strong>ï¼šä¾èµ–é“¾å¼æ¶æ„è®©å¤šTokenç”Ÿæˆç¬¦åˆè¯­è¨€é€»è¾‘ï¼Œé¿å…â€œå‰è¨€ä¸æ­åè¯­â€ï¼›</li>
<li><strong>ç¡¬ä»¶é€‚é…æ€§å¥½</strong>ï¼šè”å‘ç§‘å¤©ç‘9400+ç­‰èŠ¯ç‰‡å·²é›†æˆMTPç¡¬ä»¶åŠ é€Ÿï¼Œé€‚é…ç§»åŠ¨ç«¯éƒ¨ç½²ï¼›</li>
<li><strong>æˆæœ¬é™ä½</strong>ï¼šå‡å°‘æ¨ç†æ—¶çš„å‰å‘ä¼ æ’­æ¬¡æ•°ï¼Œå¤§å¹…é™ä½ç®—åŠ›æ¶ˆè€—ï¼ˆå°ç±³MiMoæ¨¡å‹ä»…ç”¨1/50ç®—åŠ›è¾¾åˆ°åŒç­‰æ€§èƒ½ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-10">2. å…¸å‹è½åœ°æ¡ˆä¾‹</h3>
<ul>
<li><strong>DeepSeek-V3</strong>ï¼šä¾èµ–é“¾å¼MTP+æ¨æµ‹è§£ç ï¼Œæ¨ç†é€Ÿåº¦æå‡1.8å€ï¼Œç”Ÿæˆè´¨é‡ä¸åŸç”Ÿæ¨¡å‹æŒå¹³ï¼›</li>
<li><strong>å°ç±³MiMoæ¨¡å‹</strong>ï¼šMTP+åœ¨çº¿ç­–ç•¥è’¸é¦ï¼Œ32å¹¶å‘æ—¶æ¨ç†é€Ÿåº¦è¾¾1146 Tokens/ç§’ï¼›</li>
<li><strong>è”å‘ç§‘å¤©ç‘9400+</strong>ï¼šç¡¬ä»¶çº§MTPåŠ é€Ÿï¼Œæ”¯æŒæ‰‹æœºç«¯é«˜æ•ˆè¿è¡ŒQwen3ç­‰å¤§æ¨¡å‹ã€‚</li>
</ul>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>MTPæŠ€æœ¯çš„æ ¸å¿ƒä»·å€¼ï¼Œæ˜¯åœ¨ä¸ç‰ºç‰²LLMç”Ÿæˆè´¨é‡çš„å‰æä¸‹ï¼Œè§£å†³äº†è‡ªå›å½’æ¨¡å‹â€œé€Tokenç”Ÿæˆâ€çš„æ•ˆç‡ç“¶é¢ˆã€‚ä»æŠ€æœ¯æ¼”è¿›æ¥çœ‹ï¼Œæœªæ¥MTPå°†æœç€â€œæ›´é«˜å¹¶è¡Œåº¦ã€æ›´å¼ºè¯­ä¹‰è¿è´¯æ€§ã€æ›´ä½ç¡¬ä»¶ä¾èµ–â€æ–¹å‘å‘å±•ï¼š</p>
<ol>
<li>ç»“åˆMoEï¼ˆæ··åˆä¸“å®¶æ¨¡å‹ï¼‰ï¼Œè¿›ä¸€æ­¥æå‡MTPçš„å¹¶è¡Œè®¡ç®—æ•ˆç‡ï¼›</li>
<li>ä¼˜åŒ–ä¾èµ–é“¾å¼æ¶æ„ï¼Œå¹³è¡¡â€œå¹¶è¡Œåº¦â€ä¸â€œè¿è´¯æ€§â€ï¼›</li>
<li>è½»é‡åŒ–MTPæ¨¡å—ï¼Œè®©ä¸­å°æ¨¡å‹ä¹Ÿèƒ½äº«å—æ•ˆç‡æå‡ã€‚</li>
</ol>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œç†è§£MTPçš„æ ¸å¿ƒé€»è¾‘ï¼ˆå…±äº«ç¼–ç +å¤šè¾“å‡ºå¤´+æŸå¤±èåˆï¼‰ï¼Œå¹¶æŒæ¡â€œMTP+æ¨æµ‹è§£ç â€çš„è½åœ°èŒƒå¼ï¼Œå°†æˆä¸ºä¼˜åŒ–LLMåº”ç”¨çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI+PySide6å®ç°è‡ªå®šä¹‰çª—å£æ ‡é¢˜æ ç›®(titleBar)]]></title>    <link>https://juejin.cn/post/7587253759091998756</link>    <guid>https://juejin.cn/post/7587253759091998756</guid>    <pubDate>2025-12-24T10:23:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587253759091998756" data-draft-id="7587253759091933220" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI+PySide6å®ç°è‡ªå®šä¹‰çª—å£æ ‡é¢˜æ ç›®(titleBar)"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-24T10:23:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒ_å¼€å¿ƒæ€¥äº†"/> <meta itemprop="url" content="https://juejin.cn/user/2975724155181111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI+PySide6å®ç°è‡ªå®šä¹‰çª—å£æ ‡é¢˜æ ç›®(titleBar)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2975724155181111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒ_å¼€å¿ƒæ€¥äº†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T10:23:34.000Z" title="Wed Dec 24 2025 10:23:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AI+PySide6å®ç°è‡ªå®šä¹‰çª—å£æ ‡é¢˜æ ç›®(titleBar)</h2>
<p>æœ¬æ•™ç¨‹å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨ PySide6 å®ç°ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è‡ªå®šä¹‰æ ‡é¢˜æ ï¼Œé€‚åˆæ²¡æœ‰ PySide åŸºç¡€çš„åˆå­¦è€…å­¦ä¹ ã€‚</p>
<h3 data-id="heading-1">ç›®å½•</h3>
<ol start="0">
<li><a href="#%E6%95%88%E6%9E%9C%E4%B8%8E%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81" title="#%E6%95%88%E6%9E%9C%E4%B8%8E%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81">æ•ˆæœä¸å®Œæ•´ä»£ç </a></li>
<li><a href="#%E7%AA%97%E5%8F%A3%E5%B8%83%E5%B1%80" title="#%E7%AA%97%E5%8F%A3%E5%B8%83%E5%B1%80">çª—å£å¸ƒå±€</a></li>
<li><a href="#%E7%AA%97%E5%8F%A3%E4%BA%8B%E4%BB%B6" title="#%E7%AA%97%E5%8F%A3%E4%BA%8B%E4%BB%B6">çª—å£äº‹ä»¶</a></li>
<li><a href="#%E7%AA%97%E5%8F%A3%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B6" title="#%E7%AA%97%E5%8F%A3%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B6">çª—å£æŒ‰é’®äº‹ä»¶</a></li>
<li><a href="#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90" title="#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90">å®Œæ•´ä»£ç è§£æ</a></li>
</ol>
<h3 data-id="heading-2">æ•ˆæœä¸å®Œæ•´ä»£ç </h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad840f215fc54c64960dc315434413de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-DX-W8gOW_g-aApeS6hg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767176614&amp;x-signature=xT8YOg0ODmTXdKwtZn%2BKkro8Nkk%3D" alt="title_bar" loading="lazy"/></p>
<p>title_bar</p>
<p>å®Œæ•´ä»£ç </p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># title_bar.py</span>
<span class="hljs-keyword">from</span> PySide6.QtWidgets <span class="hljs-keyword">import</span> (
                                QWidget,
                                QVBoxLayout,
                                QHBoxLayout,
                                QLabel,
                                QPushButton,
                                QStyle,
                                QApplication,
                            )
<span class="hljs-keyword">from</span> PySide6.QtGui <span class="hljs-keyword">import</span> QMouseEvent
<span class="hljs-keyword">from</span> PySide6.QtCore <span class="hljs-keyword">import</span> Qt


<span class="hljs-keyword">class</span> <span class="hljs-title class_">TitleBar</span>(<span class="hljs-title class_ inherited__">QWidget</span>):
    <span class="hljs-string">"""
    è‡ªå®šä¹‰æ ‡é¢˜æ 
    """</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, parent=<span class="hljs-literal">None</span></span>):
        <span class="hljs-string">"""æ„é€ å‡½æ•°

        :param parent: çˆ¶ç±»çª—å£
        """</span>
        <span class="hljs-built_in">super</span>().__init__(parent)
        self.setWindowFlags(Qt.WindowType.FramelessWindowHint)
        self.setup_ui()
        self.setup_event_bind()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_ui</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è®¾ç½®ç•Œé¢"""</span>
        <span class="hljs-comment"># å…¨å±€ä½¿ç”¨å‚ç›´å¸ƒå±€</span>
        layout = QVBoxLayout(self)

        <span class="hljs-comment"># æ ‡é¢˜æ ä½¿ç”¨æ°´å¹³å¸ƒå±€</span>
        title_layout = QHBoxLayout()

        <span class="hljs-comment"># çª—å£å›¾æ ‡ çª—å£æ ‡é¢˜ çª—å£æŒ‰é’®</span>
        self.icon_label = QLabel(
            pixmap=self.style().standardPixmap(
                QStyle.StandardPixmap.SP_DialogApplyButton
            )
        )
        self.title_label = QLabel(<span class="hljs-string">"è‡ªå®šä¹‰æ ‡é¢˜æ "</span>)
        self.min_btn = QPushButton(
            icon=self.style().standardPixmap(QStyle.StandardPixmap.SP_TitleBarMinButton)
        )
        self.max_btn = QPushButton(
            icon=self.style().standardPixmap(QStyle.StandardPixmap.SP_TitleBarMaxButton)
        )
        self.close_btn = QPushButton(
            icon=self.style().standardPixmap(
                QStyle.StandardPixmap.SP_TitleBarCloseButton
            )
        )

        <span class="hljs-comment"># æœ€å¤§åŒ–çª—å£ å¯å‹¾é€‰ é»˜è®¤ä¸å‹¾é€‰</span>
        self.max_btn.setCheckable(<span class="hljs-literal">True</span>)
        self.max_btn.setChecked(<span class="hljs-literal">False</span>)

        <span class="hljs-comment"># å›ºå®šæ§ä»¶å¤§å°</span>
        self.min_btn.setFixedSize(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>)
        self.max_btn.setFixedSize(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>)
        self.close_btn.setFixedSize(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>)

        <span class="hljs-comment"># æ·»åŠ å¸ƒå±€ä¸æ§ä»¶</span>
        layout.addLayout(title_layout)
        title_layout.addWidget(self.icon_label)
        title_layout.addWidget(self.title_label)
        title_layout.addWidget(self.min_btn)
        title_layout.addWidget(self.max_btn)
        title_layout.addWidget(self.close_btn)
        layout.addWidget(QLabel(<span class="hljs-string">"Hello World"</span>))

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_event_bind</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è®¾ç½®äº‹ä»¶ç»‘å®š"""</span>
        <span class="hljs-comment"># ç¼©å°çª—å£ æ”¾å¤§çª—å£ä¸æ¢å¤çª—å£ å…³é—­çª—å£</span>
        self.min_btn.clicked.connect(self.showMinimized)
        self.max_btn.clicked.connect(self.toggle_max_restore)
        self.close_btn.clicked.connect(self.close)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">toggle_max_restore</span>(<span class="hljs-params">self, checked: <span class="hljs-built_in">bool</span></span>):
        <span class="hljs-string">"""åˆ‡æ¢çª—å£æœ€å¤§ä¸æ¢å¤"""</span>
        <span class="hljs-keyword">if</span> checked:
            self.max_btn.setIcon(
                self.style().standardPixmap(
                    QStyle.StandardPixmap.SP_TitleBarNormalButton
                )
            )
            self.showMaximized()
        <span class="hljs-keyword">else</span>:
            self.max_btn.setIcon(
                self.style().standardPixmap(QStyle.StandardPixmap.SP_TitleBarMaxButton)
            )
            self.showNormal()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">mousePressEvent</span>(<span class="hljs-params">self, event: QMouseEvent</span>):
        <span class="hljs-keyword">if</span> event.button() == Qt.LeftButton:
            window = self.window().windowHandle()
            <span class="hljs-keyword">if</span> window:
                window.startSystemMove()
            event.accept()


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°"""</span>
    app = QApplication([])
    title_bar = TitleBar()
    title_bar.setStyleSheet(<span class="hljs-string">"background-color:grey;"</span>)
    title_bar.show()
    app.<span class="hljs-built_in">exec</span>()


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h3 data-id="heading-3">çª—å£å¸ƒå±€</h3>
<h4 data-id="heading-4">1.0 å¸ƒå±€ç¤ºæ„å›¾</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed9a01df0b084329990458c81d56788b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-DX-W8gOW_g-aApeS6hg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767176614&amp;x-signature=uVZij43J45%2BaYqITxazpa49FAlA%3D" alt="title_bar" loading="lazy"/></p>
<p>title_bar</p>
<ul>
<li>ç»¿è‰²æ°´å¹³å¸ƒå±€(çª—å£å›¾æ ‡,æ ‡é¢˜æ ,çª—å£å›¾æ ‡)</li>
<li>æ•´ä½“å‚ç›´å¸ƒå±€</li>
</ul>
<h4 data-id="heading-5">1.1 åŸºç¡€æ¦‚å¿µ</h4>
<p>åœ¨ PySide6 ä¸­ï¼Œå¸ƒå±€ç®¡ç†å™¨ç”¨äºè‡ªåŠ¨æ’åˆ—å’Œè°ƒæ•´æ§ä»¶çš„ä½ç½®å’Œå¤§å°ã€‚æˆ‘ä»¬çš„è‡ªå®šä¹‰æ ‡é¢˜æ ä½¿ç”¨äº†ä¸¤ç§å¸ƒå±€ï¼š</p>
<ul>
<li><strong>QVBoxLayout</strong>: å‚ç›´å¸ƒå±€ï¼Œæ§ä»¶ä»ä¸Šåˆ°ä¸‹æ’åˆ—</li>
<li><strong>QHBoxLayout</strong>: æ°´å¹³å¸ƒå±€ï¼Œæ§ä»¶ä»å·¦åˆ°å³æ’åˆ—</li>
</ul>
<h4 data-id="heading-6">1.2 ç•Œé¢ä¸å¸ƒå±€ç»“æ„</h4>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TitleBar</span>(<span class="hljs-title class_">QWidget</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, parent=<span class="hljs-title class_">None</span></span>):
        <span class="hljs-variable language_">super</span>().__init__(parent)
        <span class="hljs-variable language_">self</span>.setWindowFlags(<span class="hljs-title class_">Qt</span>.<span class="hljs-title class_">WindowType</span>.<span class="hljs-title class_">FramelessWindowHint</span>)  <span class="hljs-comment"># ç§»é™¤é»˜è®¤è¾¹æ¡†</span>
        <span class="hljs-variable language_">self</span>.setup_ui()
        <span class="hljs-variable language_">self</span>.setup_event_bind()
</code></pre>
<p><strong>å…³é”®ç‚¹è§£é‡Šï¼š</strong></p>
<ul>
<li><code>QWidget</code>: æ‰€æœ‰ç”¨æˆ·ç•Œé¢å¯¹è±¡çš„åŸºç¡€ç±»</li>
<li><code>setWindowFlags(Qt.WindowType.FramelessWindowHint)</code>: ç§»é™¤ç³»ç»Ÿé»˜è®¤çš„çª—å£è¾¹æ¡†ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½ä½¿ç”¨è‡ªå®šä¹‰æ ‡é¢˜æ </li>
</ul>
<h4 data-id="heading-7">1.3 å¸ƒå±€å±‚æ¬¡ç»“æ„</h4>
<pre><code class="hljs language-scss" lang="scss">TitleBar (QVBoxLayout - ä¸»å¸ƒå±€)
â”œâ”€â”€ title_layout (QHBoxLayout - æ ‡é¢˜æ å¸ƒå±€)
â”‚   â”œâ”€â”€ icon_label (QLabel - çª—å£å›¾æ ‡)
â”‚   â”œâ”€â”€ title_label (QLabel - çª—å£æ ‡é¢˜)
â”‚   â”œâ”€â”€ min_btn (QPushButton - æœ€å°åŒ–æŒ‰é’®)
â”‚   â”œâ”€â”€ max_btn (QPushButton - æœ€å¤§åŒ–æŒ‰é’®)
â”‚   â””â”€â”€ close_btn (QPushButton - å…³é—­æŒ‰é’®)
â””â”€â”€ QLabel ("Hello World" - ç¤ºä¾‹å†…å®¹åŒºåŸŸ)
</code></pre>
<h4 data-id="heading-8">1.4 åˆ›å»ºå¸ƒå±€å’Œæ§ä»¶</h4>
<pre><code class="hljs language-ini" lang="ini">def setup_ui(self):
    """è®¾ç½®ç•Œé¢"""
    <span class="hljs-comment"># å…¨å±€ä½¿ç”¨å‚ç›´å¸ƒå±€</span>
    <span class="hljs-attr">layout</span> = QVBoxLayout(self)

    <span class="hljs-comment"># æ ‡é¢˜æ ä½¿ç”¨æ°´å¹³å¸ƒå±€</span>
    <span class="hljs-attr">title_layout</span> = QHBoxLayout()

    <span class="hljs-comment"># åˆ›å»ºçª—å£å›¾æ ‡</span>
    <span class="hljs-attr">self.icon_label</span> = QLabel(
        <span class="hljs-attr">pixmap</span>=self.style().standardPixmap(
            QStyle.StandardPixmap.SP_DialogApplyButton
        )
    )
    
    <span class="hljs-comment"># åˆ›å»ºçª—å£æ ‡é¢˜</span>
    <span class="hljs-attr">self.title_label</span> = QLabel(<span class="hljs-string">"è‡ªå®šä¹‰æ ‡é¢˜æ "</span>)
    
    <span class="hljs-comment"># åˆ›å»ºçª—å£æŒ‰é’®</span>
    <span class="hljs-attr">self.min_btn</span> = QPushButton(
        <span class="hljs-attr">icon</span>=self.style().standardPixmap(QStyle.StandardPixmap.SP_TitleBarMinButton)
    )
    <span class="hljs-attr">self.max_btn</span> = QPushButton(
        <span class="hljs-attr">icon</span>=self.style().standardPixmap(QStyle.StandardPixmap.SP_TitleBarMaxButton)
    )
    <span class="hljs-attr">self.close_btn</span> = QPushButton(
        <span class="hljs-attr">icon</span>=self.style().standardPixmap(
            QStyle.StandardPixmap.SP_TitleBarCloseButton
        )
    )
</code></pre>
<p><strong>å…³é”®ç‚¹è§£é‡Šï¼š</strong></p>
<ol>
<li>
<p><strong>QLabel</strong>: ç”¨äºæ˜¾ç¤ºæ–‡æœ¬æˆ–å›¾ç‰‡çš„æ§ä»¶</p>
</li>
<li>
<p><strong>QPushButton</strong>: æŒ‰é’®æ§ä»¶</p>
</li>
<li>
<p><strong>self.style().standardPixmap()</strong> : è·å–ç³»ç»Ÿæ ‡å‡†å›¾æ ‡ï¼Œç¡®ä¿åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸Šéƒ½æœ‰åŸç”Ÿå¤–è§‚</p>
</li>
<li>
<p><strong>æ ‡å‡†å›¾æ ‡ç±»å‹</strong>ï¼š</p>
<ul>
<li><code>SP_DialogApplyButton</code>: å¯¹è¯æ¡†åº”ç”¨æŒ‰é’®å›¾æ ‡</li>
<li><code>SP_TitleBarMinButton</code>: æ ‡é¢˜æ æœ€å°åŒ–æŒ‰é’®å›¾æ ‡</li>
<li><code>SP_TitleBarMaxButton</code>: æ ‡é¢˜æ æœ€å¤§åŒ–æŒ‰é’®å›¾æ ‡</li>
<li><code>SP_TitleBarCloseButton</code>: æ ‡é¢˜æ å…³é—­æŒ‰é’®å›¾æ ‡</li>
</ul>
</li>
</ol>
<h4 data-id="heading-9">1.5 æ§ä»¶å±æ€§è®¾ç½®</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æœ€å¤§åŒ–çª—å£ å¯å‹¾é€‰ é»˜è®¤ä¸å‹¾é€‰</span>
self.max_btn.setCheckable(<span class="hljs-literal">True</span>)
self.max_btn.setChecked(<span class="hljs-literal">False</span>)

<span class="hljs-comment"># å›ºå®šæ§ä»¶å¤§å°</span>
self.min_btn.setFixedSize(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>)
self.max_btn.setFixedSize(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>)
self.close_btn.setFixedSize(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>)
</code></pre>
<p><strong>å…³é”®ç‚¹è§£é‡Šï¼š</strong></p>
<ul>
<li><code>setCheckable(True)</code>: ä½¿æŒ‰é’®å¯ä»¥è¢«é€‰ä¸­/å–æ¶ˆé€‰ä¸­</li>
<li><code>setFixedSize(width, height)</code>: è®¾ç½®æ§ä»¶çš„å›ºå®šå¤§å°</li>
</ul>
<h4 data-id="heading-10">1.6 å¸ƒå±€ç®¡ç†</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment"># æ·»åŠ å¸ƒå±€ä¸æ§ä»¶</span>
layout.<span class="hljs-title function_ invoke__">addLayout</span>(title_layout)  <span class="hljs-comment"># å°†æ ‡é¢˜æ å¸ƒå±€æ·»åŠ åˆ°ä¸»å¸ƒå±€</span>
title_layout.<span class="hljs-title function_ invoke__">addWidget</span>(<span class="hljs-built_in">self</span>.icon_label)  <span class="hljs-comment"># æ·»åŠ å›¾æ ‡</span>
title_layout.<span class="hljs-title function_ invoke__">addWidget</span>(<span class="hljs-built_in">self</span>.title_label)  <span class="hljs-comment"># æ·»åŠ æ ‡é¢˜</span>
title_layout.<span class="hljs-title function_ invoke__">addWidget</span>(<span class="hljs-built_in">self</span>.min_btn)  <span class="hljs-comment"># æ·»åŠ æœ€å°åŒ–æŒ‰é’®</span>
title_layout.<span class="hljs-title function_ invoke__">addWidget</span>(<span class="hljs-built_in">self</span>.max_btn)  <span class="hljs-comment"># æ·»åŠ æœ€å¤§åŒ–æŒ‰é’®</span>
title_layout.<span class="hljs-title function_ invoke__">addWidget</span>(<span class="hljs-built_in">self</span>.close_btn)  <span class="hljs-comment"># æ·»åŠ å…³é—­æŒ‰é’®</span>
layout.<span class="hljs-title function_ invoke__">addWidget</span>(<span class="hljs-title function_ invoke__">QLabel</span>(<span class="hljs-string">"Hello World"</span>))  <span class="hljs-comment"># æ·»åŠ å†…å®¹åŒºåŸŸ</span>
</code></pre>
<h3 data-id="heading-11">çª—å£äº‹ä»¶</h3>
<h4 data-id="heading-12">2.1 çª—å£æ‹–åŠ¨åŠŸèƒ½</h4>
<p>ä¸ºäº†å®ç°çª—å£æ‹–åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦é‡å†™ <code>mousePressEvent</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">def <span class="hljs-built_in">mousePressEvent</span>(self, event: QMouseEvent):
    if event.<span class="hljs-built_in">button</span>() == Qt.LeftButton:
        window = self.<span class="hljs-built_in">window</span>().<span class="hljs-built_in">windowHandle</span>()
        if window:
            window.<span class="hljs-built_in">startSystemMove</span>()
        event.<span class="hljs-built_in">accept</span>()
</code></pre>
<p><strong>å…³é”®ç‚¹è§£é‡Šï¼š</strong></p>
<ol>
<li><strong>QMouseEvent</strong>: é¼ æ ‡äº‹ä»¶ç±»ï¼ŒåŒ…å«é¼ æ ‡æ“ä½œçš„æ‰€æœ‰ä¿¡æ¯</li>
<li><code>event.button() == Qt.LeftButton</code>: æ£€æŸ¥æ˜¯å¦ä¸ºé¼ æ ‡å·¦é”®ç‚¹å‡»</li>
<li><code>self.window().windowHandle()</code>: è·å–çª—å£å¥æŸ„</li>
<li><code>window.startSystemMove()</code>: å¯åŠ¨ç³»ç»Ÿçº§åˆ«çš„çª—å£ç§»åŠ¨æ“ä½œ</li>
</ol>
<h4 data-id="heading-13">2.2 è·¨å¹³å°æ”¯æŒ</h4>
<p>è¿™ä¸ªå®ç°æ–¹å¼çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>Linux (Wayland/X11)</strong> : <code>startSystemMove()</code> æ–¹æ³•åœ¨ Linux çš„ä¸¤ç§æ˜¾ç¤ºæœåŠ¡å™¨ä¸Šéƒ½èƒ½æ­£å¸¸å·¥ä½œ</li>
<li><strong>Windows</strong>: åœ¨ Windows ç³»ç»Ÿä¸ŠåŒæ ·æ”¯æŒåŸç”Ÿçª—å£ç§»åŠ¨</li>
<li><strong>macOS</strong>: ä¹Ÿæ”¯æŒ macOS çš„çª—å£ç§»åŠ¨</li>
</ul>
<p>è¿™æ¯”ä¼ ç»Ÿçš„å®ç°æ–¹å¼ï¼ˆå¦‚è®°å½•é¼ æ ‡ä½ç½®å¹¶æ‰‹åŠ¨ç§»åŠ¨çª—å£ï¼‰æ›´åŠ å¯é å’Œè·¨å¹³å°ã€‚</p>
<h4 data-id="heading-14">2.3 äº‹ä»¶å¤„ç†æœºåˆ¶</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">event</span>.accept()  <span class="hljs-meta"># æ¥å—äº‹ä»¶ï¼Œé˜»æ­¢äº‹ä»¶ç»§ç»­ä¼ æ’­</span>
</code></pre>
<p><code>event.accept()</code> å‘Šè¯‰ç³»ç»Ÿæˆ‘ä»¬å·²ç»å¤„ç†äº†è¿™ä¸ªäº‹ä»¶ï¼Œä¸éœ€è¦è¿›ä¸€æ­¥å¤„ç†ã€‚</p>
<h3 data-id="heading-15">çª—å£æŒ‰é’®äº‹ä»¶</h3>
<h4 data-id="heading-16">3.1 äº‹ä»¶ç»‘å®š</h4>
<p>åœ¨ <code>setup_event_bind</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å°†æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶è¿æ¥åˆ°ç›¸åº”çš„å¤„ç†å‡½æ•°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_event_bind</span>(<span class="hljs-params">self</span>):
    <span class="hljs-string">"""è®¾ç½®äº‹ä»¶ç»‘å®š"""</span>
    <span class="hljs-comment"># ç¼©å°çª—å£ æ”¾å¤§çª—å£ä¸æ¢å¤çª—å£ å…³é—­çª—å£</span>
    self.min_btn.clicked.connect(self.showMinimized)
    self.max_btn.clicked.connect(self.toggle_max_restore)
    self.close_btn.clicked.connect(self.close)
</code></pre>
<p><strong>å…³é”®ç‚¹è§£é‡Šï¼š</strong></p>
<ul>
<li><code>clicked.connect()</code>: å°†æŒ‰é’®çš„ç‚¹å‡»ä¿¡å·è¿æ¥åˆ°ç›¸åº”çš„æ§½å‡½æ•°</li>
<li>ä¿¡å·æ§½æœºåˆ¶æ˜¯ PySide6 çš„æ ¸å¿ƒç‰¹æ€§ï¼Œç”¨äºå®ç°å¯¹è±¡é—´çš„é€šä¿¡</li>
</ul>
<h4 data-id="heading-17">3.2 æœ€å°åŒ–çª—å£</h4>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-built_in">self</span>.min_btn.clicked.connect(<span class="hljs-built_in">self</span>.showMinimized)
</code></pre>
<p><code>showMinimized()</code> æ˜¯ QWidget çš„å†…ç½®æ–¹æ³•ï¼Œç›´æ¥å°†çª—å£æœ€å°åŒ–åˆ°ä»»åŠ¡æ ã€‚</p>
<h4 data-id="heading-18">3.3 æœ€å¤§åŒ–ä¸æ¢å¤çª—å£</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">toggle_max_restore</span>(<span class="hljs-params">self, checked: <span class="hljs-built_in">bool</span></span>):
    <span class="hljs-string">"""åˆ‡æ¢çª—å£æœ€å¤§ä¸æ¢å¤"""</span>
    <span class="hljs-keyword">if</span> checked:
        self.max_btn.setIcon(
            self.style().standardPixmap(
                QStyle.StandardPixmap.SP_TitleBarNormalButton
            )
        )
        self.showMaximized()
    <span class="hljs-keyword">else</span>:
        self.max_btn.setIcon(
            self.style().standardPixmap(QStyle.StandardPixmap.SP_TitleBarMaxButton)
        )
        self.showNormal()
</code></pre>
<p><strong>å…³é”®ç‚¹è§£é‡Šï¼š</strong></p>
<ol>
<li>
<p><strong>checked å‚æ•°</strong>: ç”±äºæˆ‘ä»¬è®¾ç½®äº† <code>setCheckable(True)</code>ï¼Œè¿™ä¸ªå‚æ•°è¡¨ç¤ºæŒ‰é’®çš„é€‰ä¸­çŠ¶æ€</p>
</li>
<li>
<p><strong>å›¾æ ‡åˆ‡æ¢</strong>ï¼š</p>
<ul>
<li>æœ€å¤§åŒ–æ—¶æ˜¾ç¤ºæ¢å¤å›¾æ ‡ (<code>SP_TitleBarNormalButton</code>)</li>
<li>æ¢å¤æ—¶æ˜¾ç¤ºæœ€å¤§åŒ–å›¾æ ‡ (<code>SP_TitleBarMaxButton</code>)</li>
</ul>
</li>
<li>
<p><strong>çª—å£çŠ¶æ€æ–¹æ³•</strong>ï¼š</p>
<ul>
<li><code>showMaximized()</code>: å°†çª—å£æœ€å¤§åŒ–</li>
<li><code>showNormal()</code>: å°†çª—å£æ¢å¤åˆ°æ­£å¸¸å¤§å°</li>
</ul>
</li>
</ol>
<h4 data-id="heading-19">3.4 å…³é—­çª—å£</h4>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-built_in">self</span>.close_btn.clicked.connect(<span class="hljs-built_in">self</span>.<span class="hljs-built_in">close</span>)
</code></pre>
<p><code>close()</code> æ˜¯ QWidget çš„å†…ç½®æ–¹æ³•ï¼Œå…³é—­çª—å£å¹¶é€€å‡ºåº”ç”¨ç¨‹åºã€‚</p>
<h3 data-id="heading-20">å®Œæ•´ä»£ç è§£æ</h3>
<h4 data-id="heading-21">4.1 å¯¼å…¥æ¨¡å—</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> PySide6.QtWidgets <span class="hljs-keyword">import</span> (
    QWidget,        <span class="hljs-comment"># åŸºç¡€çª—å£æ§ä»¶</span>
    QVBoxLayout,    <span class="hljs-comment"># å‚ç›´å¸ƒå±€</span>
    QHBoxLayout,    <span class="hljs-comment"># æ°´å¹³å¸ƒå±€</span>
    QLabel,         <span class="hljs-comment"># æ ‡ç­¾æ§ä»¶</span>
    QPushButton,    <span class="hljs-comment"># æŒ‰é’®æ§ä»¶</span>
    QStyle,         <span class="hljs-comment"># æ ·å¼ç›¸å…³ç±»</span>
    QApplication,   <span class="hljs-comment"># åº”ç”¨ç¨‹åºç±»</span>
)
<span class="hljs-keyword">from</span> PySide6.QtGui <span class="hljs-keyword">import</span> QMouseEvent  <span class="hljs-comment"># é¼ æ ‡äº‹ä»¶</span>
<span class="hljs-keyword">from</span> PySide6.QtCore <span class="hljs-keyword">import</span> Qt         <span class="hljs-comment"># æ ¸å¿ƒæšä¸¾å’Œç±»</span>
</code></pre>
<h4 data-id="heading-22">4.2 ä¸»å‡½æ•°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°"""</span>
    app = QApplication([])          <span class="hljs-comment"># åˆ›å»ºåº”ç”¨ç¨‹åºå®ä¾‹</span>
    title_bar = TitleBar()          <span class="hljs-comment"># åˆ›å»ºè‡ªå®šä¹‰æ ‡é¢˜æ å®ä¾‹</span>
    title_bar.setStyleSheet(<span class="hljs-string">"background-color:grey;"</span>)  <span class="hljs-comment"># è®¾ç½®èƒŒæ™¯è‰²</span>
    title_bar.show()                <span class="hljs-comment"># æ˜¾ç¤ºçª—å£</span>
    app.<span class="hljs-built_in">exec</span>()                      <span class="hljs-comment"># è¿›å…¥äº‹ä»¶å¾ªç¯</span>
</code></pre>
<p><strong>å…³é”®ç‚¹è§£é‡Šï¼š</strong></p>
<ol>
<li><code>QApplication([])</code>: åˆ›å»ºåº”ç”¨ç¨‹åºå¯¹è±¡ï¼Œç®¡ç† GUI åº”ç”¨ç¨‹åº</li>
<li><code>setStyleSheet()</code>: è®¾ç½®æ§ä»¶æ ·å¼ï¼Œè¿™é‡Œè®¾ç½®èƒŒæ™¯è‰²ä¸ºç°è‰²</li>
<li><code>show()</code>: æ˜¾ç¤ºçª—å£</li>
<li><code>app.exec()</code>: è¿›å…¥åº”ç”¨ç¨‹åºçš„ä¸»äº‹ä»¶å¾ªç¯</li>
</ol>
<h4 data-id="heading-23">4.3 è¿è¡Œç¨‹åº</h4>
<pre><code class="hljs language-ini" lang="ini">if <span class="hljs-attr">__name__</span> == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<p>è¿™æ˜¯ Python çš„æ ‡å‡†å†™æ³•ï¼Œç¡®ä¿åªæœ‰ç›´æ¥è¿è¡Œæ­¤æ–‡ä»¶æ—¶æ‰ä¼šæ‰§è¡Œ <code>main()</code> å‡½æ•°ã€‚</p>
<h3 data-id="heading-24">æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ•™ç¨‹ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•ï¼š</p>
<ol>
<li><strong>åˆ›å»ºè‡ªå®šä¹‰å¸ƒå±€</strong>: ä½¿ç”¨ QVBoxLayout å’Œ QHBoxLayout ç»„ç»‡ç•Œé¢å…ƒç´ </li>
<li><strong>æ·»åŠ çª—å£æ§ä»¶</strong>: åˆ›å»ºå›¾æ ‡ã€æ ‡é¢˜å’ŒæŒ‰é’®ç­‰ç•Œé¢å…ƒç´ </li>
<li><strong>å®ç°çª—å£æ‹–åŠ¨</strong>: ä½¿ç”¨ <code>startSystemMove()</code> å®ç°è·¨å¹³å°çª—å£æ‹–åŠ¨</li>
<li><strong>å¤„ç†çª—å£æ“ä½œ</strong>: å®ç°æœ€å°åŒ–ã€æœ€å¤§åŒ–/æ¢å¤ã€å…³é—­ç­‰åŠŸèƒ½</li>
</ol>
<p>æœ¬æ–‡ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmd.axiaoxin.com%2F%3Ffrom%3Djuejin" target="_blank" title="https://md.axiaoxin.com/?from=juejin" ref="nofollow noopener noreferrer">äººè¨€å…‘.md-å…¬ä¼—å·æ’ç‰ˆç¼–è¾‘å™¨</a> æ’ç‰ˆ</p>
<ul>
<li>æœ¬æ–‡é‡‡ç”¨ã€Œäººè¨€å…‘.mdã€è‡ªåŠ¨æ’ç‰ˆ -</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AiåŠ Flutterå®ç°è‡ªå®šä¹‰æ ‡é¢˜æ (appBar)]]></title>    <link>https://juejin.cn/post/7587253759092064292</link>    <guid>https://juejin.cn/post/7587253759092064292</guid>    <pubDate>2025-12-24T10:26:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587253759092064292" data-draft-id="7587253759092031524" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AiåŠ Flutterå®ç°è‡ªå®šä¹‰æ ‡é¢˜æ (appBar)"/> <meta itemprop="keywords" content="Flutter,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-24T10:26:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒ_å¼€å¿ƒæ€¥äº†"/> <meta itemprop="url" content="https://juejin.cn/user/2975724155181111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AiåŠ Flutterå®ç°è‡ªå®šä¹‰æ ‡é¢˜æ (appBar)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2975724155181111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒ_å¼€å¿ƒæ€¥äº†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T10:26:51.000Z" title="Wed Dec 24 2025 10:26:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AiåŠ Flutterå®ç°è‡ªå®šä¹‰æ ‡é¢˜æ (appBar)</h2>
<p>åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œç¬”è€…ä¼šè®²è¯‰<strong>ä¸ºä»€ä¹ˆè¦å®ç°è‡ªå®šä¹‰æ ‡é¢˜æ </strong>ï¼Œ<strong>æ ‡é¢˜æ éƒ½æœ‰äº›ä»€ä¹ˆåŠŸèƒ½</strong>ï¼Œç„¶å<strong>ç»“åˆAIç®€å•å®ç°è‡ªå®šä¹‰æ ‡é¢˜æ </strong>ï¼</p>
<p>è¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ç›´æ¥å¼€å§‹å§ï¼</p>
<h3 data-id="heading-1">åŸºç¡€éœ€æ±‚ä¸ç¯å¢ƒå‡†å¤‡</h3>
<p>è¿™ç¯‡æ–‡æ¡£é»˜è®¤ä½ çš„è®¾å¤‡å·²ç»é…ç½®äº†<code>flutter</code>ç¯å¢ƒä¸”è‡ªèº«å…·å¤‡äº†å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¸€å®šçš„<code>Dart</code>è¯­æ³•åŸºç¡€</li>
<li>äº†è§£ç”šè‡³ç†Ÿæ‚‰å…¶ä»–æ¡Œé¢åº”ç”¨å¼€å‘æ¡†æ¶(æ¯”å¦‚:<code>Qt</code>ä»¥åŠå…¶ä»–)</li>
<li>ä¸€ä¸ª<code>flutter</code>ç©ºé¡¹ç›®-&gt; <code>flutter create --empty your_project_name</code></li>
<li>æƒ³è¦å­¦ä¼š<code>flutter</code>çš„å¿ƒ</li>
</ul>
<blockquote>
<p><strong>è¡¥å……è¯´æ˜</strong>ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2F" target="_blank" title="https://docs.flutter.dev/" ref="nofollow noopener noreferrer">å®‰è£…flutterç¯å¢ƒæ¥è¿™é‡Œ</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fdart.cn%2Flanguage%23additional-resources" target="_blank" title="https://dart.cn/language#additional-resources" ref="nofollow noopener noreferrer">dartè¯­æ³•åŸºç¡€æ¥è¿™é‡Œ</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fcodelabs.developers.google.com%2Fcodelabs%2Fflutter-codelab-first%3Fhl%3Dzh-cn%230" target="_blank" title="https://codelabs.developers.google.com/codelabs/flutter-codelab-first?hl=zh-cn#0" ref="nofollow noopener noreferrer">æ–°æ‰‹å…¥é—¨é¡¹ç›®æ¥è¿™é‡Œ</a></p>
</blockquote>
<p><strong>æ³¨æ„:</strong> å­¦ä¹ ç¨‹åº¦å› äººè€Œå¼‚ï¼Œå¦‚æœæ»¡è¶³çš„ç‚¹è¶Šå¤šï¼Œç†è®ºä¸Šå­¦ä¹ æ•ˆç‡è¶Šé«˜ï¼</p>
<p>ç¬”è€…çš„ç¯å¢ƒ:</p>
<ul>
<li><strong>Linux</strong>: <code>64</code>ä½ <code>fedora 43 gnome</code>ï¼Œæ¡Œé¢ç³»ç»Ÿ<code>Wayland</code>ï¼Œå†…æ ¸ç‰ˆæœ¬<code>Linux 6.17.9-300.fc43.x86_64</code></li>
<li><strong>Flutter</strong>: <code>Flutter 3.38.5</code></li>
<li><strong>Dart</strong>: <code>Dart 3.10.4</code></li>
<li><strong>DevTools</strong>: <code>2.51.1</code></li>
<li><strong>å¤§æ¨¡å‹</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.qianwen.com%2F" target="_blank" title="https://www.qianwen.com/" ref="nofollow noopener noreferrer">é€šä¹‰åƒé—®ç½‘é¡µç‰ˆ(<code>Qwen3-Coder</code>æ¨¡å‹)</a></li>
</ul>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰æ ‡é¢˜æ </h3>
<p>æˆ‘ä»¬å¯ä»¥å‚è€ƒå¸¸è§çš„åº”ç”¨<code>vscode</code>ã€<code>QQ</code>ã€<code>å¾®ä¿¡</code>ç­‰è¿™äº›åœ¨(<code>Windows</code>ã€<code>Linux</code>å’Œ<code>macOS</code>)éƒ½æœ‰è¾ƒå¼ºçš„ç»Ÿä¸€é£æ ¼ï¼Œè¿™å°±æ˜¯è‡ªå®šä¹‰æ ‡é¢˜æ çš„ç›®çš„â€”â€”<strong>ç»Ÿä¸€é£æ ¼</strong></p>
<blockquote>
<p><strong>æ’ä¸€å˜´</strong>ï¼šå…¶å®è‡ªå®šä¹‰æ ‡é¢˜æ å¯ä»¥é¿å…å¤§é‡å› æ ‡é¢˜æ æ ·å¼ä¸ç»Ÿä¸€è€Œå¯¼è‡´çš„é—®é¢˜(æ¯”å¦‚:<code>gnome49</code>çš„æ ‡é¢˜æ ä¸æ”¯æŒæš—è‰²ä¸»é¢˜ç­‰)</p>
</blockquote>
<h3 data-id="heading-3">æ€ä¹ˆå®ç°è‡ªå®šä¹‰æ ‡é¢˜æ </h3>
<h4 data-id="heading-4">éœ€æ±‚æ‹†è§£</h4>
<h5 data-id="heading-5">(ç¬¬ä¸€æ€§åŸç†)â€”â€”æ ‡é¢˜æ çš„æ„æˆ</h5>
<p>æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªçœ‹ä¼¼å¤æ‚çš„é—®é¢˜ç®€å•åŒ–ï¼Œå®ç°è‡ªå®šä¹‰æ ‡é¢˜æ é‚£æˆ‘ä»¬å°±è¦çŸ¥é“<strong>æ ‡é¢˜æ </strong>çš„æ„æˆï¼š<strong>çª—å£å›¾æ ‡</strong>ã€<strong>çª—å£æ ‡é¢˜</strong>ã€<strong>çª—å£æŒ‰é’®</strong>(æœ€å°åŒ–ã€æœ€å¤§ä¸è¿˜åŸã€å…³é—­)ï¼è§ä¸‹å›¾ï¼š <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ce8a5d91da24f448cb737f275b079ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-DX-W8gOW_g-aApeS6hg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767176810&amp;x-signature=Lezo7xOtweXVg88aiJ3UC106gjw%3D" alt="æ ‡é¢˜æ " loading="lazy"/></p>
<blockquote>
<p><strong>æ³¨æ„</strong>: <code>gnome</code> å’Œ <code>macOS</code>ä¸æ”¯æŒçª—å£å›¾æ ‡ï¼</p>
</blockquote>
<h5 data-id="heading-6">(ç±»æ¯”æ€ç»´)â€”â€”AppBarçš„æ„æˆ</h5>
<p>äº‹å®çª—å£æ ‡é¢˜æ å’Œ<code>flutter</code>ä¸­çš„<code>appBar</code>æ˜¯å»åˆçš„ï¼Œè§ä¸‹å›¾ <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed57af1654524e358482b293cfff0b26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-DX-W8gOW_g-aApeS6hg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767176810&amp;x-signature=2HKXb21NNJ4J3n%2Bv%2BHIzBi3oWYs%3D" alt="appBar" loading="lazy"/></p>
<h5 data-id="heading-7">(éœ€æ±‚è½¬æ¢)â€”â€”éšè—ç³»ç»Ÿé»˜è®¤æ ‡é¢˜æ ä½¿ç”¨AppBar</h5>
<p>æ—¢ç„¶æˆ‘ä»¬å·²ç»çŸ¥é“<code>AppBar</code>çš„åŠŸèƒ½å¯ä»¥å¹³æ›¿çª—å£æ ‡é¢˜æ ï¼Œ é‚£ä¹ˆæˆ‘ä»¬ç›´æ¥éšè—é»˜è®¤çš„ä½¿ç”¨AppBarè‡ªå®šä¹‰ä¸€ä¸ªä¸å°±å¥½äº†ï¼Ÿ</p>
<h4 data-id="heading-8">è‡ªå®šä¹‰æ ‡é¢˜æ â€”â€”AppBar</h4>
<h5 data-id="heading-9">(éœ€æ±‚æ‹†è§£)â€”â€”éšè—ä¸appBarå®ç°å¯¹åº”åŠŸèƒ½</h5>
<p>å…³é—­ç³»ç»Ÿé»˜è®¤çš„æ ‡é¢˜æ  æ ‡é¢˜æ ä¸AppBarä»¥åŠåŠŸèƒ½æ˜ å°„å…³ç³»</p>
<ul>
<li>çª—å£å›¾æ ‡ -&gt; <code>leading</code>-&gt; æ˜¾ç¤ºçª—å£å›¾æ ‡</li>
<li>çª—å£æ ‡é¢˜ -&gt;<code>title</code>-&gt; æ˜¾ç¤ºçª—å£æ ‡é¢˜</li>
<li>çª—å£å›¾æ ‡ä»¬ -&gt; <code>actions</code> -&gt; æ˜¾ç¤ºå¯¹åº”å›¾æ ‡ä»¥åŠçª—å£çš„éšè—ï¼Œæ”¾å¤§å¤åŸï¼Œå…³é—­</li>
</ul>
<h5 data-id="heading-10">(window_manager)â€”â€”å®‰è£…ä¸å¯¼å…¥è‡ªå®šä¹‰æ ‡é¢˜æ æ’ä»¶</h5>
<ol>
<li>å®‰è£…<code>window_manager</code></li>
</ol>

<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹ï¼š</span>
flutter pub <span class="hljs-keyword">add</span> window_manager
</code></pre>
<p>2.  å¯¼å…¥æ’ä»¶</p>

<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ç¨‹åºé¡¶éƒ¨æ·»åŠ å¦‚ä¸‹</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:window_manager/window_manager.dart'</span>;
</code></pre>
<h5 data-id="heading-11">(window_manager)â€”â€”éšè—é»˜è®¤æ ‡é¢˜æ </h5>
<ol>
<li>æ›¿æ¢ç¨‹åºå…¥å£ä»£ç å—</li>
</ol>

<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span>()</span> {
  runApp(<span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-title">MyApp</span>())</span>;
}
</code></pre>
<p>æ›¿æ¢ä¸º</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span>() <span class="hljs-keyword">async</span></span> {
  WidgetsFlutterBinding.ensureInitialized();

  <span class="hljs-keyword">await</span> windowManager.ensureInitialized();
  WindowOptions windowOptions = WindowOptions(
    titleBarStyle: TitleBarStyle.hidden,
  );
  windowManager.waitUntilReadyToShow(windowOptions, () <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">await</span> windowManager.focus();
  });

  runApp(<span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-title">MainApp</span>())</span>;
}
</code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼š ç¡®ä¿ä½ åˆ›å»ºçš„æ˜¯ç©ºé¡¹ç›® <a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fwindow_manager" target="_blank" title="https://pub.dev/packages/window_manager" ref="nofollow noopener noreferrer">window_manageræ’ä»¶å®˜ç½‘</a></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b549c739d674f44959af263bbb09634~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-DX-W8gOW_g-aApeS6hg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767176810&amp;x-signature=GBaI3cgzXU4fp%2FadzyBdzUOY4%2BU%3D" alt="æ˜¾ç¤ºæ•ˆæœ" loading="lazy"/></p>
<p>æ˜¾ç¤ºæ•ˆæœ</p>
<h5 data-id="heading-12">å€ŸåŠ©window_managerä¸appBarå®ç°è‡ªå®šä¹‰æ ‡é¢˜æ </h5>
<ol>
<li>æ›¿æ¢è„šæ‰‹æ¶é‡Œçš„å†…å®¹</li>
</ol>

<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">body</span>: <span class="hljs-built_in">Center</span>(child: <span class="hljs-built_in">Text</span>(<span class="hljs-string">'Hello World!'</span>))
</code></pre>

<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">//æ›¿æ¢ä¸º</span>
 appBar: AppBar(
          leading: <span class="hljs-attribute">Icon(Icons.favorite),
          title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"è‡ªå®šä¹‰æ ‡é¢˜æ "</span>),
          <span class="hljs-attribute">actions</span>: [
            <span class="hljs-built_in">IconButton</span>(<span class="hljs-attribute">onPressed</span>: () {}, <span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.horizontal_rule)),
            <span class="hljs-built_in">IconButton</span>(<span class="hljs-attribute">onPressed</span>: () {}, <span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.crop_square)),
            <span class="hljs-built_in">IconButton</span>(<span class="hljs-attribute">onPressed</span>: () {}, <span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.close)),
          ],
        ),
</code></pre>
<p><strong>æ˜¾ç¤ºæ•ˆæœ</strong> <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65a1db5dc1904be485c9563c57e8bc54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-DX-W8gOW_g-aApeS6hg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767176810&amp;x-signature=IzPF8cOd63e43essFzy5imqCxwc%3D" alt="æŒ‰é’®" loading="lazy"/></p>
<h5 data-id="heading-13">å€ŸåŠ©window_managerå®ç°appBarçª—å£æŒ‰é’®åŠŸèƒ½</h5>
<ol>
<li>æ·»åŠ æœ€å°åŒ–çª—å£å’Œå…³é—­çª—å£</li>
</ol>

<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// æ›¿æ¢ä¸ºå¦‚ä¸‹ï¼š</span>
appBar: AppBar(
          leading: <span class="hljs-attribute">Icon(Icons.favorite),
          title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"è‡ªå®šä¹‰æ ‡é¢˜æ "</span>),
          <span class="hljs-attribute">actions</span>: [
            <span class="hljs-built_in">IconButton</span>(
              <span class="hljs-attribute">onPressed</span>: () {
                windowManager.<span class="hljs-built_in">minimize</span>();
              },
              <span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.horizontal_rule),
            ),
            <span class="hljs-built_in">IconButton</span>(<span class="hljs-attribute">onPressed</span>: () {}, <span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.crop_square)),
            <span class="hljs-built_in">IconButton</span>(
              <span class="hljs-attribute">onPressed</span>: () {
                windowManager.<span class="hljs-built_in">close</span>();
              },
              <span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.close),
            ),
          ],
        ),
</code></pre>
<p>2.  è¿˜åŸä¸æœ€å¤§åŒ–çª—å£</p>

<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// å°† StatelessWidget è½¬ä¸ºStatefulWidget</span>
<span class="hljs-comment">// vscode é€‰ä¸­StatelessWidget æ˜¾ç¤ºä»£ç æ“ä½œ(ctrl.)StatefulWidget</span>

<span class="hljs-comment">// _MainAppState åˆå§‹åŒ–å˜é‡ç”¨äºè®°å½•æ˜¯å¦æœ€å¤§åŒ–</span>
  <span class="hljs-type">bool</span> _isMaximized = <span class="hljs-literal">false</span>
</code></pre>
<p>æ›¿æ¢appBarä¸ºå¦‚ä¸‹:</p>
<pre><code class="hljs language-less" lang="less">         appBar: AppBar(
          leading: <span class="hljs-attribute">Icon(Icons.favorite),
          title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"è‡ªå®šä¹‰æ ‡é¢˜æ "</span>),
          <span class="hljs-attribute">actions</span>: [
            <span class="hljs-built_in">IconButton</span>(
              <span class="hljs-attribute">onPressed</span>: () {
                windowManager.<span class="hljs-built_in">minimize</span>();
              },
              <span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.horizontal_rule),
            ),
            <span class="hljs-built_in">IconButton</span>(
              <span class="hljs-attribute">onPressed</span>: () {
                if (_isMaximized) {
                  windowManager.<span class="hljs-built_in">unmaximize</span>();
                  <span class="hljs-built_in">setState</span>(() {
                    _isMaximized = !_isMaximized;
                  });
                } else {
                  windowManager.<span class="hljs-built_in">maximize</span>();
                  <span class="hljs-built_in">setState</span>(() {
                    _isMaximized = !_isMaximized;
                  });
                }
              },
              <span class="hljs-attribute">icon</span>: _isMaximized
                  ? <span class="hljs-built_in">Icon</span>(Icons.crop_free)
                  : <span class="hljs-built_in">Icon</span>(Icons.crop_square),
            ),
            <span class="hljs-built_in">IconButton</span>(
              <span class="hljs-attribute">onPressed</span>: () {
                windowManager.<span class="hljs-built_in">close</span>();
              },
              <span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.close),
            ),
          ],
        ),
</code></pre>
<p><strong>æ˜¾ç¤ºæ•ˆæœ</strong><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f20750bf3d4642148459ed0943d7a1bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-DX-W8gOW_g-aApeS6hg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767176810&amp;x-signature=Zl42JT%2FhPJYaHdK%2FDSiWgH6lxsg%3D" alt="æŒ‰é’®äº‹ä»¶" loading="lazy"/></p>
<h5 data-id="heading-14">å€ŸåŠ©window_managerå®ç°æ‹–åŠ¨çª—å£</h5>
<p><strong>ç®€å•çš„åŠæ³•</strong> ç›´æ¥ç›‘å¬é¼ æ ‡äº‹ä»¶</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//AppBaré‡Œæ·»åŠ å¦‚ä¸‹</span>
          flexibleSpace: <span class="hljs-built_in">Listener</span>(
            onPointerDown: (_) =&gt; windowManager.<span class="hljs-built_in">startDragging</span>(),
            child: <span class="hljs-built_in">Container</span>(color: Colors.transparent),
          ),
</code></pre>
<p><strong>å…‰æ ‡å¸¦æ‹–åŠ¨æ•ˆæœ</strong> æˆ‘çš„ç³»ç»Ÿå¹¶ä¸æ”¯æŒ</p>
<pre><code class="hljs language-less" lang="less">          flexibleSpace: MouseRegion(
            <span class="hljs-attribute">cursor</span>: SystemMouseCursors.move,
            <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Listener</span>(
              <span class="hljs-attribute">onPointerDown</span>: (_) =&gt; windowManager.<span class="hljs-built_in">startDragging</span>(),
              <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Container</span>(<span class="hljs-attribute">color</span>: Colors.transparent),
            ),
          ),
</code></pre>
<p><strong>æ˜¾ç¤ºæ•ˆæœ</strong> <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef671ffe05194aedae51163d5001b3a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-DX-W8gOW_g-aApeS6hg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767176810&amp;x-signature=IUdnrBHNm0VsmI5V0%2FIh9Hj8q2I%3D" alt="all" loading="lazy"/></p>
<blockquote>
<p><strong>æ³¨æ„</strong>:</p>
<ul>
<li>éƒ½æ˜¯é•¿æŒ‰é¼ æ ‡å·¦é”®æ‹–åŠ¨çª—å£,å³é”®é¼ æ ‡ è·Ÿéšå…‰æ ‡ç§»åŠ¨</li>
<li>ä¸€å®šè¦åœ¨Container ä¸­æ·»åŠ é¢œè‰²ä¸ºé€æ˜ ä¸ç„¶æ— æ³•ç§»åŠ¨</li>
</ul>
</blockquote>
<h4 data-id="heading-15">æœ€ç»ˆçš„ä»£ç </h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">import</span> '<span class="hljs-selector-tag">package</span>:<span class="hljs-selector-tag">flutter</span>/<span class="hljs-selector-tag">material</span><span class="hljs-selector-class">.dart</span>';
<span class="hljs-selector-tag">import</span> '<span class="hljs-selector-tag">package</span>:<span class="hljs-selector-tag">window_manager</span>/<span class="hljs-selector-tag">window_manager</span><span class="hljs-selector-class">.dart</span>';

<span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>() <span class="hljs-selector-tag">async</span> {
  <span class="hljs-selector-tag">WidgetsFlutterBinding</span><span class="hljs-selector-class">.ensureInitialized</span>();

  <span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">windowManager</span><span class="hljs-selector-class">.ensureInitialized</span>();
  <span class="hljs-selector-tag">WindowOptions</span> <span class="hljs-selector-tag">windowOptions</span> = <span class="hljs-selector-tag">WindowOptions</span>(
    <span class="hljs-attribute">titleBarStyle</span>: TitleBarStyle.hidden,
  );
  <span class="hljs-selector-tag">windowManager</span><span class="hljs-selector-class">.waitUntilReadyToShow</span>(windowOptions, () async {
    <span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">windowManager</span><span class="hljs-selector-class">.focus</span>();
  });

  <span class="hljs-selector-tag">runApp</span>(const <span class="hljs-built_in">MainApp</span>());
}

<span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">MainApp</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">StatefulWidget</span> {
  <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">MainApp</span>({<span class="hljs-selector-tag">super</span><span class="hljs-selector-class">.key</span>});

  @<span class="hljs-selector-tag">override</span>
  <span class="hljs-selector-tag">State</span>&lt;<span class="hljs-selector-tag">MainApp</span>&gt; <span class="hljs-selector-tag">createState</span>() =&gt; <span class="hljs-selector-tag">_MainAppState</span>();
}

<span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">_MainAppState</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">State</span>&lt;<span class="hljs-selector-tag">MainApp</span>&gt; {
  <span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">_isMaximized</span> = <span class="hljs-selector-tag">false</span>;

  <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">_toggleMaximize</span>() {
    <span class="hljs-selector-tag">if</span> (_isMaximized) {
      <span class="hljs-selector-tag">windowManager</span><span class="hljs-selector-class">.unmaximize</span>();
    } <span class="hljs-selector-tag">else</span> {
      <span class="hljs-selector-tag">windowManager</span><span class="hljs-selector-class">.maximize</span>();
    }
    <span class="hljs-selector-tag">setState</span>(() =&gt; _isMaximized = !_isMaximized);
  }

  @<span class="hljs-selector-tag">override</span>
  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">build</span>(BuildContext context) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">MaterialApp</span>(
      <span class="hljs-attribute">home</span>: <span class="hljs-built_in">Scaffold</span>(
        <span class="hljs-attribute">appBar</span>: <span class="hljs-built_in">AppBar</span>(
          <span class="hljs-attribute">leading</span>: <span class="hljs-built_in">Icon</span>(Icons.favorite),
          <span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">'è‡ªå®šä¹‰æ ‡é¢˜æ '</span>),
          <span class="hljs-attribute">flexibleSpace</span>: <span class="hljs-built_in">Listener</span>(
            <span class="hljs-attribute">onPointerDown</span>: (event) =&gt; windowManager.<span class="hljs-built_in">startDragging</span>(),
            <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Container</span>(<span class="hljs-attribute">color</span>: Colors.transparent),
          ),
          <span class="hljs-attribute">actions</span>: [
            <span class="hljs-built_in">IconButton</span>(
              <span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.horizontal_rule),
              <span class="hljs-attribute">onPressed</span>: windowManager.minimize,
            ),
            <span class="hljs-built_in">IconButton</span>(
              <span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(_isMaximized ? Icons.<span class="hljs-attribute">crop_free </span>: Icons.crop_square),
              <span class="hljs-attribute">onPressed</span>: _toggleMaximize,
            ),
            <span class="hljs-built_in">IconButton</span>(<span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.close), <span class="hljs-attribute">onPressed</span>: windowManager.close),
          ],
        ),
        <span class="hljs-attribute">body</span>: <span class="hljs-built_in">Center</span>(<span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">'Hello, World!'</span>)),
      ),
    );
  }
}
</code></pre>
<h4 data-id="heading-16">AIè¯¢é—®è¿‡ç¨‹</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.qianwen.com%2Fshare%3FshareId%3Dbbc837bd-1e9f-4698-9f11-8c7783c31d87" target="_blank" title="https://www.qianwen.com/share?shareId=bbc837bd-1e9f-4698-9f11-8c7783c31d87" ref="nofollow noopener noreferrer">é€šä¹‰AIå¯¹è¯è¿‡ç¨‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯·æ±‚ ID è·Ÿè¸ªæ¨¡å¼ï¼šè§£å†³å¼‚æ­¥è¯·æ±‚ç«æ€æ¡ä»¶]]></title>    <link>https://juejin.cn/post/7587254134400696329</link>    <guid>https://juejin.cn/post/7587254134400696329</guid>    <pubDate>2025-12-24T10:36:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587254134400696329" data-draft-id="7587246055457112091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯·æ±‚ ID è·Ÿè¸ªæ¨¡å¼ï¼šè§£å†³å¼‚æ­¥è¯·æ±‚ç«æ€æ¡ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-24T10:36:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é²«å°é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/1046390798032110"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯·æ±‚ ID è·Ÿè¸ªæ¨¡å¼ï¼šè§£å†³å¼‚æ­¥è¯·æ±‚ç«æ€æ¡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390798032110/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é²«å°é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T10:36:29.000Z" title="Wed Dec 24 2025 10:36:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“‹ ç›®å½•</h2>
<ul>
<li><a href="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF" title="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF">é—®é¢˜èƒŒæ™¯</a></li>
<li><a href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90" title="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90">é—®é¢˜åˆ†æ</a></li>
<li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" title="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">è§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" title="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86">å®ç°åŸç†</a></li>
<li><a href="#%E9%97%AD%E5%8C%85%E4%B8%8E-ref-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3" title="#%E9%97%AD%E5%8C%85%E4%B8%8E-ref-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3">é—­åŒ…ä¸ Ref æ·±å…¥ç†è§£</a></li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æœ€ä½³å®è·µ</a></li>
<li><a href="#%E6%80%BB%E7%BB%93" title="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ul>
<hr/>
<h2 data-id="heading-1">é—®é¢˜èƒŒæ™¯</h2>
<p>åœ¨æœç´¢åœºæ™¯ä¸­ï¼Œç”¨æˆ·å¿«é€Ÿè¾“å…¥å…³é”®è¯æ—¶ä¼šè§¦å‘å¤šä¸ªå¹¶å‘è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”¨æˆ·å¿«é€Ÿè¾“å…¥ï¼ša â†’ ac â†’ acd</span>
<span class="hljs-comment">// ä¼šè§¦å‘ 3 ä¸ªè¯·æ±‚ï¼Œä½†è¿”å›é¡ºåºå¯èƒ½ä¸åŒ</span>
</code></pre>
<p><strong>é—®é¢˜è¡¨ç°ï¼š</strong></p>
<ul>
<li>æ¨èå•†å“åˆ—è¡¨æœ‰æ—¶ä¼šå¤šå‡º 5 ä¸ªå•†å“</li>
<li>æ˜¾ç¤ºçš„å•†å“ä¸å½“å‰å…³é”®è¯ä¸åŒ¹é…</li>
<li>æ—§è¯·æ±‚çš„ç»“æœè¦†ç›–äº†æ–°è¯·æ±‚çš„ç»“æœ</li>
</ul>
<hr/>
<h2 data-id="heading-2">é—®é¢˜åˆ†æ</h2>
<h3 data-id="heading-3">ç«æ€æ¡ä»¶ï¼ˆRace Conditionï¼‰</h3>
<p>å½“å¤šä¸ªå¼‚æ­¥è¯·æ±‚å¹¶å‘æ‰§è¡Œæ—¶ï¼Œç”±äºç½‘ç»œå»¶è¿Ÿä¸åŒï¼Œè¿”å›é¡ºåºå¯èƒ½ä¸å‘èµ·é¡ºåºä¸ä¸€è‡´ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">æ—¶é—´çº¿ï¼š
<span class="hljs-symbol">T1:</span> ç”¨æˆ·è¾“å…¥ <span class="hljs-string">"a"</span>  â†’ è§¦å‘è¯·æ±‚<span class="hljs-number">1</span>
<span class="hljs-symbol">T2:</span> ç”¨æˆ·è¾“å…¥ <span class="hljs-string">"ac"</span> â†’ è§¦å‘è¯·æ±‚<span class="hljs-number">2</span>
<span class="hljs-symbol">T3:</span> è¯·æ±‚<span class="hljs-number">2</span>è¿”å›     â†’ è®¾ç½® productList = [<span class="hljs-string">"acç›¸å…³å•†å“"</span>]
<span class="hljs-symbol">T4:</span> è¯·æ±‚<span class="hljs-number">1</span>è¿”å›     â†’ è®¾ç½® productList = [<span class="hljs-string">"aç›¸å…³å•†å“"</span>] âŒ é”™è¯¯ï¼
</code></pre>
<p><strong>æ ¹æœ¬åŸå› ï¼š</strong></p>
<ul>
<li>React çš„ <code>setState</code> æ˜¯å¼‚æ­¥çš„</li>
<li>å¤šä¸ªè¯·æ±‚åŒæ—¶è¿›è¡Œï¼Œæ— æ³•ä¿è¯å“ªä¸ªå…ˆè¿”å›</li>
<li>æ—§è¯·æ±‚çš„ç»“æœå¯èƒ½è¦†ç›–æ–°è¯·æ±‚çš„ç»“æœ</li>
</ul>
<hr/>
<h2 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-5">è¯·æ±‚ ID è·Ÿè¸ªæœºåˆ¶</h3>
<p>ä½¿ç”¨ä¸€ä¸ªå…¨å±€é€’å¢çš„è¯·æ±‚ ID æ¥è·Ÿè¸ªæ¯ä¸ªè¯·æ±‚ï¼Œç¡®ä¿åªå¤„ç†æœ€æ–°è¯·æ±‚çš„ç»“æœã€‚</p>
<h3 data-id="heading-6">æ ¸å¿ƒæ€è·¯</h3>
<ol>
<li><strong>æ¯ä¸ªè¯·æ±‚åˆ†é…å”¯ä¸€ ID</strong>ï¼šä½¿ç”¨ <code>useRef</code> ä¿å­˜ä¸€ä¸ªé€’å¢çš„è®¡æ•°å™¨</li>
<li><strong>è¯·æ±‚å¼€å§‹æ—¶ä¿å­˜ ID</strong>ï¼šåœ¨é—­åŒ…ä¸­ä¿å­˜å½“å‰è¯·æ±‚çš„ ID</li>
<li><strong>è¯·æ±‚è¿”å›æ—¶éªŒè¯</strong>ï¼šæ¯”è¾ƒä¿å­˜çš„ ID å’Œæœ€æ–°çš„ IDï¼Œåˆ¤æ–­è¯·æ±‚æ˜¯å¦ä»ç„¶æœ‰æ•ˆ</li>
</ol>
<hr/>
<h2 data-id="heading-7">å®ç°åŸç†</h2>
<h3 data-id="heading-8">1. æ·»åŠ è¯·æ±‚ ID è·Ÿè¸ªå™¨</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”¨äºè·Ÿè¸ªå½“å‰è¯·æ±‚çš„ IDï¼Œç¡®ä¿åªå¤„ç†æœ€æ–°è¯·æ±‚çš„ç»“æœ</span>
<span class="hljs-keyword">const</span> requestIdRef = useRef&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>)
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ <code>useRef</code>ï¼Ÿ</strong></p>
<ul>
<li><code>useRef</code> çš„å€¼åœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ä¿æŒä¸å˜</li>
<li><code>.current</code> å±æ€§æ˜¯å¯å˜çš„ï¼Œå¯ä»¥éšæ—¶æ›´æ–°</li>
<li>ä¸ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</li>
</ul>
<h3 data-id="heading-9">2. è¯·æ±‚å¼€å§‹æ—¶ç”Ÿæˆå¹¶ä¿å­˜ ID</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchProductList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ç”Ÿæˆæ–°çš„è¯·æ±‚ IDï¼ˆå…ˆé€’å¢å†å–å€¼ï¼‰</span>
    <span class="hljs-keyword">const</span> currentRequestId = ++requestIdRef.<span class="hljs-property">current</span>

    <span class="hljs-comment">// ä¿å­˜å½“å‰è¯·æ±‚çš„å…³é”®è¯ï¼ˆåŒé‡éªŒè¯ï¼‰</span>
    <span class="hljs-keyword">const</span> currentKeyword = keyWord.<span class="hljs-title function_">trim</span>()

    <span class="hljs-comment">// ... å‘èµ·è¯·æ±‚</span>
  }

  <span class="hljs-title function_">fetchProductList</span>()
}, [keyWord])
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>++requestIdRef.current</code> å…ˆé€’å¢å†å–å€¼</li>
<li><code>currentRequestId</code> è¢«é—­åŒ…æ•è·ï¼Œä¿å­˜è¯·æ±‚å¼€å§‹æ—¶çš„å€¼</li>
<li><code>currentKeyword</code> ä¹Ÿè¢«é—­åŒ…æ•è·ï¼Œç”¨äºåŒé‡éªŒè¯</li>
</ul>
<h3 data-id="heading-10">3. è¯·æ±‚è¿”å›æ—¶éªŒè¯ ID</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPublicSearchFilter</span>(params)

<span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ˜¯æœ€æ–°çš„è¯·æ±‚</span>
<span class="hljs-keyword">if</span> (currentRequestId !== requestIdRef.<span class="hljs-property">current</span>) {
  <span class="hljs-keyword">return</span>  <span class="hljs-comment">// å¿½ç•¥æ—§è¯·æ±‚çš„ç»“æœ</span>
}

<span class="hljs-comment">// åŒé‡éªŒè¯ï¼šæ£€æŸ¥å…³é”®è¯æ˜¯å¦ä»ç„¶åŒ¹é…</span>
<span class="hljs-keyword">if</span> (currentKeyword !== keyWord.<span class="hljs-title function_">trim</span>()) {
  <span class="hljs-keyword">return</span>  <span class="hljs-comment">// å…³é”®è¯å·²æ”¹å˜ï¼Œå¿½ç•¥ç»“æœ</span>
}

<span class="hljs-comment">// åªæœ‰é€šè¿‡æ‰€æœ‰æ£€æŸ¥æ‰è®¾ç½® state</span>
<span class="hljs-title function_">setProductList</span>([...proList])
</code></pre>
<hr/>
<h2 data-id="heading-11">å®Œæ•´ä»£ç ç¤ºä¾‹</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { useState, useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">SearchList</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [productList, setProductList] = useState&lt;<span class="hljs-built_in">any</span>[]&gt;([])
  <span class="hljs-keyword">const</span> [productLoading, setProductLoading] = useState&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-literal">false</span>)

  <span class="hljs-comment">// ç”¨äºè·Ÿè¸ªå½“å‰è¯·æ±‚çš„ ID</span>
  <span class="hljs-keyword">const</span> requestIdRef = useRef&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>)

  <span class="hljs-comment">// è·å–æ¨èå•†å“åˆ—è¡¨</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchProductList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æœç´¢å…³é”®å­—ï¼Œä¸è¯·æ±‚</span>
      <span class="hljs-keyword">if</span> (!keyWord || !keyWord.<span class="hljs-title function_">trim</span>()) {
        <span class="hljs-title function_">setProductList</span>([])
        <span class="hljs-keyword">return</span>
      }

      <span class="hljs-comment">// ç”Ÿæˆæ–°çš„è¯·æ±‚ ID</span>
      <span class="hljs-keyword">const</span> currentRequestId = ++requestIdRef.<span class="hljs-property">current</span>
      <span class="hljs-comment">// ä¿å­˜å½“å‰è¯·æ±‚çš„å…³é”®è¯ï¼Œç”¨äºéªŒè¯ç»“æœæ˜¯å¦ä»ç„¶æœ‰æ•ˆ</span>
      <span class="hljs-keyword">const</span> currentKeyword = keyWord.<span class="hljs-title function_">trim</span>()

      <span class="hljs-title function_">setProductLoading</span>(<span class="hljs-literal">true</span>)
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-attr">params</span>: <span class="hljs-title class_">Search</span>.<span class="hljs-property">SearchParams</span> = {
          <span class="hljs-attr">keyword</span>: currentKeyword,
          <span class="hljs-attr">size</span>: <span class="hljs-number">5</span>,
          <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,
        }

 
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPublicSearchFilter</span>(params)

        <span class="hljs-comment">// âœ… æ£€æŸ¥1ï¼šæ˜¯å¦æ˜¯æœ€æ–°çš„è¯·æ±‚</span>
        <span class="hljs-comment">// å¦‚æœä¸æ˜¯åˆ™å¿½ç•¥ç»“æœï¼Œé¿å…æ—§çš„è¯·æ±‚ç»“æœè¦†ç›–æ–°çš„ç»“æœ</span>
        <span class="hljs-keyword">if</span> (currentRequestId !== requestIdRef.<span class="hljs-property">current</span>) {
          <span class="hljs-keyword">return</span>
        }

        <span class="hljs-comment">// âœ… æ£€æŸ¥2ï¼šå…³é”®è¯æ˜¯å¦ä»ç„¶åŒ¹é…ï¼ˆåŒé‡ä¿é™©ï¼‰</span>
        <span class="hljs-keyword">if</span> (currentKeyword !== keyWord.<span class="hljs-title function_">trim</span>()) {
          <span class="hljs-keyword">return</span>
        }

        <span class="hljs-keyword">const</span> items = response?.<span class="hljs-property">itemList</span>?.<span class="hljs-property">data</span> || []
        <span class="hljs-keyword">const</span> proList = items.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>)

        <span class="hljs-title function_">setProductList</span>([...proList])
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ˜¯æœ€æ–°çš„è¯·æ±‚ï¼Œå¦‚æœä¸æ˜¯åˆ™å¿½ç•¥é”™è¯¯</span>
        <span class="hljs-keyword">if</span> (currentRequestId !== requestIdRef.<span class="hljs-property">current</span>) {
          <span class="hljs-keyword">return</span>
        }
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–æ¨èå•†å“å¤±è´¥:'</span>, error)
        <span class="hljs-title function_">setProductList</span>([])
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// åªæœ‰åœ¨æ˜¯æœ€æ–°è¯·æ±‚æ—¶æ‰æ›´æ–° loading çŠ¶æ€</span>
        <span class="hljs-keyword">if</span> (currentRequestId === requestIdRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">setProductLoading</span>(<span class="hljs-literal">false</span>)
        }
      }
    }

    <span class="hljs-title function_">fetchProductList</span>()
  }, [keyWord])

  <span class="hljs-comment">// ... å…¶ä»–ä»£ç </span>
}
</code></pre>
<hr/>
<h2 data-id="heading-12">é—­åŒ…ä¸ Ref æ·±å…¥ç†è§£</h2>
<h3 data-id="heading-13">å…³é”®æ¦‚å¿µ</h3>
<h4 data-id="heading-14">1. <code>currentRequestId</code> è¢«é—­åŒ…æ•è·</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchProductList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// è¿™ä¸€è¡Œæ‰§è¡Œæ—¶ï¼ŒcurrentRequestId è¢«"å†»ç»“"åœ¨é—­åŒ…ä¸­</span>
  <span class="hljs-keyword">const</span> currentRequestId = ++requestIdRef.<span class="hljs-property">current</span>  <span class="hljs-comment">// å‡è®¾æ­¤æ—¶ = 1</span>

  <span class="hljs-comment">// ... å‘èµ·å¼‚æ­¥è¯·æ±‚ ...</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPublicSearchFilter</span>(params)  <span class="hljs-comment">// è¿™é‡Œç­‰å¾…ï¼Œå¯èƒ½éœ€è¦å‡ ç§’é’Ÿ</span>

  <span class="hljs-comment">// å½“è¯·æ±‚è¿”å›æ—¶ï¼ŒcurrentRequestId ä»ç„¶æ˜¯ 1ï¼ˆé—­åŒ…ä¿å­˜çš„å€¼ï¼‰</span>
  <span class="hljs-comment">// ä½† requestIdRef.current å¯èƒ½å·²ç»æ˜¯ 2ã€3ã€4...ï¼ˆæœ€æ–°å€¼ï¼‰</span>
  <span class="hljs-keyword">if</span> (currentRequestId !== requestIdRef.<span class="hljs-property">current</span>) {
    <span class="hljs-keyword">return</span>
  }
}
</code></pre>
<p><strong>è¦ç‚¹ï¼š</strong></p>
<ul>
<li><code>currentRequestId</code> æ˜¯å±€éƒ¨å¸¸é‡ï¼Œåœ¨å‡½æ•°æ‰§è¡Œæ—¶è¢«èµ‹å€¼</li>
<li>å¼‚æ­¥å‡½æ•°è¿”å›æ—¶ï¼Œå®ƒä»ç„¶ä¿æŒè¯·æ±‚å¼€å§‹æ—¶çš„å€¼</li>
<li><strong>è¿™å°±æ˜¯é—­åŒ…ï¼šå‡½æ•°"è®°ä½"äº†åˆ›å»ºæ—¶çš„å˜é‡å€¼</strong></li>
</ul>
<h4 data-id="heading-15">2. <code>requestIdRef.current</code> å§‹ç»ˆæ˜¯æœ€æ–°çš„</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// requestIdRef æ˜¯ä¸€ä¸ª ref å¯¹è±¡</span>
<span class="hljs-keyword">const</span> requestIdRef = useRef&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>)

<span class="hljs-comment">// ref.current æ˜¯ä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œæ¯æ¬¡è¯»å–éƒ½è¿”å›æœ€æ–°å€¼</span>
requestIdRef.<span class="hljs-property">current</span>  <span class="hljs-comment">// è¯»å–æ—¶æ€»æ˜¯æœ€æ–°å€¼</span>
</code></pre>
<p><strong>è¦ç‚¹ï¼š</strong></p>
<ul>
<li><code>requestIdRef</code> æ˜¯ React çš„ ref å¯¹è±¡ï¼Œ<code>.current</code> æ˜¯å¯å˜çš„</li>
<li>æ¯æ¬¡è¯»å– <code>requestIdRef.current</code> éƒ½ä¼šå¾—åˆ°å½“å‰æœ€æ–°å€¼</li>
<li><strong>ä¸å—é—­åŒ…å½±å“ï¼Œå› ä¸ºå®ƒä¸æ˜¯è¢«æ•è·çš„å˜é‡ï¼Œè€Œæ˜¯é€šè¿‡å¼•ç”¨è®¿é—®</strong></li>
</ul>
<h3 data-id="heading-16">æ—¶é—´çº¿ç¤ºä¾‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// === åˆå§‹çŠ¶æ€ ===</span>
requestIdRef.<span class="hljs-property">current</span> = <span class="hljs-number">0</span>

<span class="hljs-comment">// === T1: ç”¨æˆ·è¾“å…¥ "a"ï¼Œè§¦å‘è¯·æ±‚1 ===</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchProductList1</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> currentRequestId = ++requestIdRef.<span class="hljs-property">current</span>
  <span class="hljs-comment">// æ‰§è¡Œåï¼šcurrentRequestId = 1, requestIdRef.current = 1</span>

  <span class="hljs-comment">// é—­åŒ…æ•è·ï¼šcurrentRequestId = 1ï¼ˆè¢«"å†»ç»“"ï¼‰</span>
  <span class="hljs-comment">// ref å¼•ç”¨ï¼šrequestIdRef.currentï¼ˆéšæ—¶å¯è¯»å–æœ€æ–°å€¼ï¼‰</span>

  <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPublicSearchFilter</span>(...)  <span class="hljs-comment">// ç­‰å¾…å“åº”...</span>
}

<span class="hljs-comment">// === T2: ç”¨æˆ·è¾“å…¥ "ac"ï¼Œè§¦å‘è¯·æ±‚2ï¼ˆè¯·æ±‚1è¿˜åœ¨ç­‰å¾…ä¸­ï¼‰===</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchProductList2</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> currentRequestId = ++requestIdRef.<span class="hljs-property">current</span>
  <span class="hljs-comment">// æ‰§è¡Œåï¼šcurrentRequestId = 2, requestIdRef.current = 2</span>

  <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPublicSearchFilter</span>(...)  <span class="hljs-comment">// ç­‰å¾…å“åº”...</span>
}

<span class="hljs-comment">// === T3: è¯·æ±‚1è¿”å›ï¼ˆæ­¤æ—¶ requestIdRef.current å·²ç»æ˜¯ 2ï¼‰===</span>
<span class="hljs-comment">// åœ¨ fetchProductList1 çš„é—­åŒ…ä¸­ï¼š</span>
<span class="hljs-keyword">if</span> (currentRequestId !== requestIdRef.<span class="hljs-property">current</span>) {
  <span class="hljs-comment">// currentRequestId = 1ï¼ˆé—­åŒ…ä¿å­˜çš„æ—§å€¼ï¼‰</span>
  <span class="hljs-comment">// requestIdRef.current = 2ï¼ˆè¯»å–çš„æœ€æ–°å€¼ï¼‰</span>
  <span class="hljs-comment">// 1 !== 2 âœ… è¿”å›ï¼Œå¿½ç•¥ç»“æœ</span>
  <span class="hljs-keyword">return</span>
}

<span class="hljs-comment">// === T4: è¯·æ±‚2è¿”å› ===</span>
<span class="hljs-comment">// åœ¨ fetchProductList2 çš„é—­åŒ…ä¸­ï¼š</span>
<span class="hljs-keyword">if</span> (currentRequestId !== requestIdRef.<span class="hljs-property">current</span>) {
  <span class="hljs-comment">// currentRequestId = 2ï¼ˆé—­åŒ…ä¿å­˜çš„å€¼ï¼‰</span>
  <span class="hljs-comment">// requestIdRef.current = 2ï¼ˆå¦‚æœæ­¤æ—¶æ²¡æœ‰æ–°è¯·æ±‚ï¼‰</span>
  <span class="hljs-comment">// 2 === 2 âœ… é€šè¿‡æ£€æŸ¥ï¼Œè®¾ç½® state</span>
}
</code></pre>
<h3 data-id="heading-17">å†…å­˜ä¸­çš„çŠ¶æ€</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å†…å­˜å¸ƒå±€ç¤ºæ„ï¼š</span>

<span class="hljs-comment">// å…¨å±€ refï¼ˆæ‰€æœ‰å‡½æ•°å…±äº«ï¼‰</span>
requestIdRef = {
  <span class="hljs-attr">current</span>: <span class="hljs-number">3</span>  <span class="hljs-comment">// â† å§‹ç»ˆæ˜¯æœ€æ–°å€¼ï¼Œéšæ—¶å¯è¯»å–</span>
}

<span class="hljs-comment">// è¯·æ±‚1çš„é—­åŒ…ï¼ˆå·²åºŸå¼ƒï¼‰</span>
fetchProductList1 é—­åŒ…ç¯å¢ƒï¼š
  <span class="hljs-attr">currentRequestId</span>: <span class="hljs-number">1</span>  <span class="hljs-comment">// â† è¢«"å†»ç»“"ï¼Œä¸ä¼šæ”¹å˜</span>

<span class="hljs-comment">// è¯·æ±‚2çš„é—­åŒ…ï¼ˆå·²åºŸå¼ƒï¼‰</span>
fetchProductList2 é—­åŒ…ç¯å¢ƒï¼š
  <span class="hljs-attr">currentRequestId</span>: <span class="hljs-number">2</span>  <span class="hljs-comment">// â† è¢«"å†»ç»“"ï¼Œä¸ä¼šæ”¹å˜</span>

<span class="hljs-comment">// è¯·æ±‚3çš„é—­åŒ…ï¼ˆå½“å‰æœ‰æ•ˆï¼‰</span>
fetchProductList3 é—­åŒ…ç¯å¢ƒï¼š
  <span class="hljs-attr">currentRequestId</span>: <span class="hljs-number">3</span>  <span class="hljs-comment">// â† è¢«"å†»ç»“"ï¼Œä¸ä¼šæ”¹å˜</span>
</code></pre>
<h3 data-id="heading-18">å¯¹æ¯”ï¼šé—­åŒ… vs Ref</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th><code>currentRequestId</code> (é—­åŒ…)</th><th><code>requestIdRef.current</code> (Ref)</th></tr></thead><tbody><tr><td>å€¼çš„å˜åŒ–</td><td>åˆ›å»ºæ—¶èµ‹å€¼åä¸å†æ”¹å˜</td><td>æ¯æ¬¡è¯»å–éƒ½æ˜¯æœ€æ–°å€¼</td></tr><tr><td>ä½œç”¨åŸŸ</td><td>å‡½æ•°é—­åŒ…å†…</td><td>å…¨å±€å¯è®¿é—®</td></tr><tr><td>ç”¨é€”</td><td>ä¿å­˜è¯·æ±‚å¼€å§‹æ—¶çš„ ID</td><td>ä¿å­˜æœ€æ–°çš„è¯·æ±‚ ID</td></tr><tr><td>ç±»æ¯”</td><td>æ‹ç…§ï¼ˆå®šæ ¼ç¬é—´ï¼‰</td><td>å®æ—¶ç›‘æ§ï¼ˆåŠ¨æ€æ›´æ–°ï¼‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-19">ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡æœ‰æ•ˆï¼Ÿ</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å…³é”®ä»£ç </span>
<span class="hljs-keyword">const</span> currentRequestId = ++requestIdRef.<span class="hljs-property">current</span>  <span class="hljs-comment">// é—­åŒ…æ•è·ï¼šä¿å­˜"å¿«ç…§"</span>
<span class="hljs-comment">// ... å¼‚æ­¥æ“ä½œ ...</span>
<span class="hljs-keyword">if</span> (currentRequestId !== requestIdRef.<span class="hljs-property">current</span>) {  <span class="hljs-comment">// æ¯”è¾ƒ"å¿«ç…§"å’Œ"å®æ—¶å€¼"</span>
  <span class="hljs-keyword">return</span>  <span class="hljs-comment">// å¦‚æœä¸åŒï¼Œè¯´æ˜å·²æœ‰æ–°è¯·æ±‚</span>
}
</code></pre>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li><strong>è¯·æ±‚å¼€å§‹æ—¶</strong>ï¼š<code>currentRequestId</code> ä¿å­˜å½“å‰ IDï¼ˆå¿«ç…§ï¼‰</li>
<li><strong>è¯·æ±‚è¿›è¡Œä¸­</strong>ï¼š<code>requestIdRef.current</code> å¯èƒ½è¢«æ–°è¯·æ±‚æ›´æ–°</li>
<li><strong>è¯·æ±‚è¿”å›æ—¶</strong>ï¼šæ¯”è¾ƒå¿«ç…§å’Œæœ€æ–°å€¼
<ul>
<li>âœ… <strong>ç›¸åŒ</strong> â†’ ä»æ˜¯æœ€æ–°è¯·æ±‚ï¼Œå¤„ç†ç»“æœ</li>
<li>âŒ <strong>ä¸åŒ</strong> â†’ å·²è¢«æ–°è¯·æ±‚å–ä»£ï¼Œå¿½ç•¥ç»“æœ</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-20">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-21">1. ä½•æ—¶ä½¿ç”¨è¯·æ±‚ ID è·Ÿè¸ªï¼Ÿ</h3>
<p>âœ… <strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·è¾“å…¥è§¦å‘çš„æœç´¢è¯·æ±‚</li>
<li>ä¸‹æ‹‰é€‰æ‹©è§¦å‘çš„æ•°æ®åŠ è½½</li>
<li>ä»»ä½•å¯èƒ½å¿«é€Ÿè¿ç»­è§¦å‘çš„å¼‚æ­¥æ“ä½œ</li>
</ul>
<p>âŒ <strong>ä¸é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ä¸€æ¬¡æ€§è¯·æ±‚ï¼ˆå¦‚é¡µé¢åˆå§‹åŒ–ï¼‰</li>
<li>æŒ‰é’®ç‚¹å‡»è§¦å‘çš„è¯·æ±‚ï¼ˆç”¨æˆ·ä¸ä¼šå¿«é€Ÿç‚¹å‡»ï¼‰</li>
<li>å®šæ—¶è½®è¯¢è¯·æ±‚ï¼ˆé€šå¸¸éœ€è¦å–æ¶ˆæœºåˆ¶ï¼‰</li>
</ul>
<h3 data-id="heading-22">2. åŒé‡éªŒè¯çš„å¿…è¦æ€§</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ£€æŸ¥1ï¼šè¯·æ±‚ IDï¼ˆä¸»è¦æ£€æŸ¥ï¼‰</span>
<span class="hljs-keyword">if</span> (currentRequestId !== requestIdRef.<span class="hljs-property">current</span>) {
  <span class="hljs-keyword">return</span>
}

<span class="hljs-comment">// æ£€æŸ¥2ï¼šå…³é”®è¯åŒ¹é…ï¼ˆåŒé‡ä¿é™©ï¼‰</span>
<span class="hljs-keyword">if</span> (currentKeyword !== keyWord.<span class="hljs-title function_">trim</span>()) {
  <span class="hljs-keyword">return</span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦åŒé‡éªŒè¯ï¼Ÿ</strong></p>
<ul>
<li>è¯·æ±‚ ID æ£€æŸ¥ï¼šé˜²æ­¢æ—§è¯·æ±‚è¦†ç›–æ–°è¯·æ±‚</li>
<li>å…³é”®è¯æ£€æŸ¥ï¼šé˜²æ­¢è¾¹ç•Œæƒ…å†µï¼ˆå¦‚è¯·æ±‚ ID ç›¸åŒä½†å…³é”®è¯å·²æ”¹å˜ï¼‰</li>
</ul>
<h3 data-id="heading-23">3. é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ˜¯æœ€æ–°çš„è¯·æ±‚ï¼Œå¦‚æœä¸æ˜¯åˆ™å¿½ç•¥é”™è¯¯</span>
  <span class="hljs-keyword">if</span> (currentRequestId !== requestIdRef.<span class="hljs-property">current</span>) {
    <span class="hljs-keyword">return</span>
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–æ¨èå•†å“å¤±è´¥:'</span>, error)
  <span class="hljs-title function_">setProductList</span>([])
}
</code></pre>
<p><strong>è¦ç‚¹ï¼š</strong></p>
<ul>
<li>é”™è¯¯å¤„ç†ä¹Ÿè¦æ£€æŸ¥è¯·æ±‚ ID</li>
<li>é¿å…æ—§è¯·æ±‚çš„é”™è¯¯å½±å“æ–°è¯·æ±‚çš„çŠ¶æ€</li>
</ul>
<h3 data-id="heading-24">4. Loading çŠ¶æ€ç®¡ç†</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">finally</span> {
  <span class="hljs-comment">// åªæœ‰åœ¨æ˜¯æœ€æ–°è¯·æ±‚æ—¶æ‰æ›´æ–° loading çŠ¶æ€</span>
  <span class="hljs-keyword">if</span> (currentRequestId === requestIdRef.<span class="hljs-property">current</span>) {
    <span class="hljs-title function_">setProductLoading</span>(<span class="hljs-literal">false</span>)
  }
}
</code></pre>
<p><strong>è¦ç‚¹ï¼š</strong></p>
<ul>
<li>Loading çŠ¶æ€ä¹Ÿè¦æ£€æŸ¥è¯·æ±‚ ID</li>
<li>é¿å…æ—§è¯·æ±‚çš„ loading çŠ¶æ€å½±å“ UI</li>
</ul>
<hr/>
<h2 data-id="heading-25">å…¶ä»–è§£å†³æ–¹æ¡ˆå¯¹æ¯”</h2>
<h3 data-id="heading-26">æ–¹æ¡ˆ1ï¼šAbortControllerï¼ˆæ¨èç”¨äºå¯å–æ¶ˆçš„è¯·æ±‚ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> abortControllerRef = useRef&lt;<span class="hljs-title class_">AbortController</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>)

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// å–æ¶ˆä¹‹å‰çš„è¯·æ±‚</span>
  <span class="hljs-keyword">if</span> (abortControllerRef.<span class="hljs-property">current</span>) {
    abortControllerRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">abort</span>()
  }

  <span class="hljs-keyword">const</span> abortController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>()
  abortControllerRef.<span class="hljs-property">current</span> = abortController

  <span class="hljs-title function_">fetch</span>(url, { <span class="hljs-attr">signal</span>: abortController.<span class="hljs-property">signal</span> })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (abortController.<span class="hljs-property">signal</span>.<span class="hljs-property">aborted</span>) <span class="hljs-keyword">return</span>
      <span class="hljs-comment">// å¤„ç†å“åº”</span>
    })
}, [deps])
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å¯ä»¥çœŸæ­£å–æ¶ˆç½‘ç»œè¯·æ±‚</li>
<li>èŠ‚çœå¸¦å®½å’ŒæœåŠ¡å™¨èµ„æº</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>éœ€è¦ API æ”¯æŒ <code>AbortController</code></li>
<li>æŸäº›æ—§çš„ API å¯èƒ½ä¸æ”¯æŒ</li>
</ul>
<h3 data-id="heading-27">æ–¹æ¡ˆ2ï¼šè¯·æ±‚ ID è·Ÿè¸ªï¼ˆæœ¬æ–‡æ–¹æ¡ˆï¼‰</h3>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>é€‚ç”¨äºä»»ä½•å¼‚æ­¥æ“ä½œ</li>
<li>ä¸ä¾èµ– API æ”¯æŒ</li>
<li>å®ç°ç®€å•</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>ä¸èƒ½çœŸæ­£å–æ¶ˆç½‘ç»œè¯·æ±‚</li>
<li>è¯·æ±‚ä»ä¼šå ç”¨å¸¦å®½</li>
</ul>
<h3 data-id="heading-28">æ–¹æ¡ˆ3ï¼šé˜²æŠ–ï¼ˆDebounceï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> debouncedSearch = <span class="hljs-title function_">useMemo</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-function">(<span class="hljs-params">keyword: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-title function_">fetchProductList</span>(keyword)
  }, <span class="hljs-number">300</span>),
  []
)
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å‡å°‘è¯·æ±‚æ¬¡æ•°</li>
<li>ç®€å•æ˜“ç”¨</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>å»¶è¿Ÿå“åº”</li>
<li>ç”¨æˆ·å¯èƒ½ç­‰å¾…æ›´é•¿æ—¶é—´</li>
</ul>
<hr/>
<h2 data-id="heading-29">æ€»ç»“</h2>
<h3 data-id="heading-30">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li><strong>é—®é¢˜æ ¹æº</strong>ï¼šå¤šä¸ªå¼‚æ­¥è¯·æ±‚å¹¶å‘æ‰§è¡Œï¼Œè¿”å›é¡ºåºä¸ç¡®å®š</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨è¯·æ±‚ ID è·Ÿè¸ªï¼Œç¡®ä¿åªå¤„ç†æœ€æ–°è¯·æ±‚</li>
<li><strong>å…³é”®æœºåˆ¶</strong>ï¼šé—­åŒ…ä¿å­˜"å¿«ç…§"ï¼ŒRef æä¾›"å®æ—¶å€¼"</li>
<li><strong>éªŒè¯ç­–ç•¥</strong>ï¼šåŒé‡éªŒè¯ï¼ˆè¯·æ±‚ ID + ä¸šåŠ¡å‚æ•°ï¼‰</li>
</ol>
<h3 data-id="heading-31">é€‚ç”¨åœºæ™¯</h3>
<p>âœ… æœç´¢è¾“å…¥æ¡†çš„è”æƒ³è¯/æ¨èå•†å“
âœ… ä¸‹æ‹‰é€‰æ‹©çš„æ•°æ®åŠ è½½
âœ… å¿«é€Ÿè¿ç»­è§¦å‘çš„å¼‚æ­¥æ“ä½œ</p>
<h3 data-id="heading-32">å…³é”®ä»£ç æ¨¡å¼</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. åˆ›å»ºè·Ÿè¸ªå™¨</span>
<span class="hljs-keyword">const</span> requestIdRef = useRef&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>)

<span class="hljs-comment">// 2. è¯·æ±‚å¼€å§‹æ—¶ä¿å­˜ ID</span>
<span class="hljs-keyword">const</span> currentRequestId = ++requestIdRef.<span class="hljs-property">current</span>

<span class="hljs-comment">// 3. è¯·æ±‚è¿”å›æ—¶éªŒè¯</span>
<span class="hljs-keyword">if</span> (currentRequestId !== requestIdRef.<span class="hljs-property">current</span>) {
  <span class="hljs-keyword">return</span>  <span class="hljs-comment">// å¿½ç•¥æ—§è¯·æ±‚</span>
}
</code></pre>
<h3 data-id="heading-33">è®°å¿†å£è¯€</h3>
<blockquote>
<p><strong>"é—­åŒ…ä¿å­˜å¿«ç…§ï¼ŒRef æä¾›å®æ—¶å€¼ï¼Œæ¯”è¾ƒä¸¤è€…åˆ¤æ–­æœ‰æ•ˆæ€§"</strong></p>
</blockquote>
<blockquote>
<p>æœ€åæ„Ÿè°¢é˜…è¯»ï¼æ¬¢è¿å…³æ³¨æˆ‘ï¼Œå¾®ä¿¡å…¬ä¼—å·ï¼šã€Šé²«å°é±¼ä¸æ­£ç»ã€‹ã€‚æ¬¢è¿ç‚¹èµã€æ”¶è—ã€å…³æ³¨ï¼Œä¸€é”®ä¸‰è¿ï¼ï¼ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React çˆ¶å­ç»„ä»¶æ•°æ®ä¼ é€’ï¼šæœºåˆ¶ä¸æ„ä¹‰è§£æ]]></title>    <link>https://juejin.cn/post/7587024296885207090</link>    <guid>https://juejin.cn/post/7587024296885207090</guid>    <pubDate>2025-12-24T09:23:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587024296885207090" data-draft-id="7587021119255347227" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React çˆ¶å­ç»„ä»¶æ•°æ®ä¼ é€’ï¼šæœºåˆ¶ä¸æ„ä¹‰è§£æ"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2025-12-24T09:23:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†»æ¢¨æ”¿å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/2373184444182659"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React çˆ¶å­ç»„ä»¶æ•°æ®ä¼ é€’ï¼šæœºåˆ¶ä¸æ„ä¹‰è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2373184444182659/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†»æ¢¨æ”¿å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:23:07.000Z" title="Wed Dec 24 2025 09:23:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React çˆ¶å­ç»„ä»¶æ•°æ®ä¼ é€’ï¼šæœºåˆ¶ä¸æ„ä¹‰è§£æ</h2>
<p>åœ¨ React ç»„ä»¶åŒ–å¼€å‘ä¸­ï¼Œç»„ä»¶é—´çš„é€šä¿¡æ˜¯æ„å»ºå¤æ‚åº”ç”¨çš„æ ¸å¿ƒç¯èŠ‚ã€‚æœ¬æ–‡ä»¥ä¸€ä¸ª Todo åˆ—è¡¨åº”ç”¨ä¸ºä¾‹ï¼Œè¯¦ç»†è§£æçˆ¶å­ç»„ä»¶çš„æ•°æ®ä¼ é€’æ–¹å¼åŠå…¶èƒŒåçš„è®¾è®¡æ„ä¹‰ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ç»„ä»¶ç»“æ„ä¸é€šä¿¡åœºæ™¯</h3>
<p>åœ¨æä¾›çš„ Todo åº”ç”¨ä¸­ï¼Œå­˜åœ¨æ˜ç¡®çš„ç»„ä»¶å±‚çº§å…³ç³»ï¼š</p>
<ul>
<li><strong>çˆ¶ç»„ä»¶</strong>ï¼š<code>App</code>Â ç»„ä»¶ä½œä¸ºæ ¹ç»„ä»¶ï¼Œæ˜¯æ•´ä¸ªåº”ç”¨çš„æ ¸å¿ƒ</li>
<li><strong>å­ç»„ä»¶</strong>ï¼š<code>TodoInput</code>ï¼ˆè¾“å…¥æ¡†ï¼‰ã€<code>TodoList</code>ï¼ˆåˆ—è¡¨å±•ç¤ºï¼‰ã€<code>TodoStatus</code>ï¼ˆçŠ¶æ€ç»Ÿè®¡ï¼‰ä¸‰ä¸ªå­ç»„ä»¶ï¼Œå‡ç”±Â <code>App</code>Â ç»„ä»¶ç›´æ¥æ¸²æŸ“</li>
</ul>
<p>è¿™äº›ç»„ä»¶éœ€è¦ååŒå·¥ä½œï¼šè¾“å…¥æ¡†æ·»åŠ å¾…åŠé¡¹ã€åˆ—è¡¨å±•ç¤ºæ‰€æœ‰é¡¹ã€ç»Ÿè®¡åŒºæ˜¾ç¤ºæ•°é‡å¹¶æä¾›æ¸…é™¤åŠŸèƒ½ã€‚è¿™ç§ååŒä¾èµ–äºç»„ä»¶é—´çš„æ•°æ®ä¼ é€’ã€‚</p>
<h3 data-id="heading-2">äºŒã€çˆ¶å­ç»„ä»¶æ•°æ®ä¼ é€’çš„æ ¸å¿ƒæ–¹å¼</h3>
<p>React ä¸­çˆ¶å­ç»„ä»¶çš„é€šä¿¡éµå¾ª<strong>å•å‘æ•°æ®æµ</strong>åŸåˆ™ï¼Œé€šè¿‡Â <code>props</code>Â å®ç°æ•°æ®ä¼ é€’ï¼Œå…·ä½“åˆ†ä¸ºä¸¤ç§æ–¹å‘ï¼š</p>
<h4 data-id="heading-3">1. çˆ¶ç»„ä»¶ â†’ å­ç»„ä»¶ï¼šé€šè¿‡ props ä¼ é€’æ•°æ®</h4>
<p>çˆ¶ç»„ä»¶å°†éœ€è¦å…±äº«çš„æ•°æ®é€šè¿‡Â <code>props</code>Â ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡æ¥æ”¶Â <code>props</code>Â æ¥ä½¿ç”¨è¿™äº›æ•°æ®ã€‚</p>
<p><strong>ç¤ºä¾‹è§£æ</strong>ï¼š</p>
<ul>
<li>åœ¨Â <code>App</code>Â ç»„ä»¶ä¸­ï¼Œå®šä¹‰äº†æ ¸å¿ƒæ•°æ®Â <code>todos</code>ï¼ˆå¾…åŠé¡¹åˆ—è¡¨ï¼‰ï¼Œä»¥åŠåŸºäºÂ <code>todos</code>Â è®¡ç®—çš„ç»Ÿè®¡æ•°æ®ï¼ˆ<code>total</code>ã€<code>active</code>ã€<code>completed</code>ï¼‰</li>
<li>çˆ¶ç»„ä»¶é€šè¿‡Â <code>props</code>Â å°†è¿™äº›æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶ï¼š</li>
</ul>
<pre><code class="hljs language-xml" lang="xml">// App.jsx ä¸­ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶
<span class="hljs-tag">&lt;<span class="hljs-name">TodoList</span> <span class="hljs-attr">todos</span>=<span class="hljs-string">{todos}</span> <span class="hljs-attr">...</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">TodoStatus</span> <span class="hljs-attr">total</span>=<span class="hljs-string">{todos.length}</span> <span class="hljs-attr">active</span>=<span class="hljs-string">{activeCount}</span> <span class="hljs-attr">completed</span>=<span class="hljs-string">{completedCount}</span> <span class="hljs-attr">...</span> /&gt;</span>
</code></pre>
<p>å­ç»„ä»¶é€šè¿‡è§£æ„Â <code>props</code>Â æ¥æ”¶å¹¶ä½¿ç”¨æ•°æ®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// TodoList æ¥æ”¶å¹¶å±•ç¤º todos æ•°æ®</span>
<span class="hljs-keyword">const</span> { todos } = props;
<span class="hljs-comment">// æ¸²æŸ“ todos åˆ—è¡¨</span>
todos.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> (...))

<span class="hljs-comment">// TodoStatus æ¥æ”¶å¹¶å±•ç¤ºç»Ÿè®¡æ•°æ®</span>
<span class="hljs-keyword">const</span> { total, active, completed } = props;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Total: {total} | Active: {active} | Completed: {completed}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-4">2. å­ç»„ä»¶ â†’ çˆ¶ç»„ä»¶ï¼šé€šè¿‡å›è°ƒå‡½æ•°ä¼ é€’æ•°æ®å˜æ›´è¯·æ±‚</h4>
<p>å­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®ï¼ˆReact ä¸­ props æ˜¯åªè¯»çš„ï¼‰ï¼Œéœ€é€šè¿‡è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’çš„<strong>å›è°ƒå‡½æ•°</strong>ï¼Œå°†æ•°æ®å˜æ›´çš„éœ€æ±‚ä¼ é€’ç»™çˆ¶ç»„ä»¶ï¼Œç”±çˆ¶ç»„ä»¶è´Ÿè´£æ›´æ–°æ•°æ®ã€‚</p>
<p><strong>ç¤ºä¾‹è§£æ</strong>ï¼š</p>
<ul>
<li>çˆ¶ç»„ä»¶å®šä¹‰ä¿®æ”¹æ•°æ®çš„æ–¹æ³•ï¼ˆå¦‚Â <code>addTodo</code>ã€<code>deleteTodo</code>ï¼‰ï¼Œå¹¶é€šè¿‡Â <code>props</code>Â å°†è¿™äº›æ–¹æ³•ä¼ é€’ç»™å­ç»„ä»¶ï¼š</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">// App.jsx ä¸­å®šä¹‰æ–¹æ³•å¹¶ä¼ é€’
const <span class="hljs-attr">addTodo</span> = (text) =&gt; {
  setTodos(<span class="hljs-section">[...todos, { id: Date.now(), text, completed: false }]</span>)<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

&lt;TodoInput <span class="hljs-attr">onAdd</span>={addTodo} /&gt;
&lt;TodoList <span class="hljs-attr">onDelete</span>={deleteTodo} <span class="hljs-literal">on</span>Toggle={toggleTodo} /&gt;
</code></pre>
<p>å­ç»„ä»¶è§¦å‘ç”¨æˆ·æ“ä½œæ—¶ï¼Œè°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’çš„å›è°ƒå‡½æ•°ï¼Œä¼ é€’éœ€è¦å˜æ›´çš„æ•°æ®ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// TodoInput æ¥æ”¶ onAdd æ–¹æ³•ï¼Œåœ¨æäº¤æ—¶è°ƒç”¨</span>
const { onAdd } = props;
const handleSubmit = (e) =&gt; {
  e<span class="hljs-selector-class">.preventDefault</span>();
  <span class="hljs-built_in">onAdd</span>(inputValue); <span class="hljs-comment">// å°†è¾“å…¥çš„æ–‡æœ¬ä¼ é€’ç»™çˆ¶ç»„ä»¶</span>
  <span class="hljs-built_in">setInputValue</span>('');
};

<span class="hljs-comment">// TodoList æ¥æ”¶ onDelete æ–¹æ³•ï¼Œåœ¨ç‚¹å‡»åˆ é™¤æ—¶è°ƒç”¨</span>
&lt;<span class="hljs-selector-tag">button</span> onClick={() =&gt; <span class="hljs-built_in">onDelete</span>(todo.id)}&gt;X&lt;/<span class="hljs-selector-tag">button</span>&gt;
</code></pre>
<h3 data-id="heading-5">ä¸‰ã€è¿™ç§ä¼ é€’æ–¹å¼çš„æ ¸å¿ƒæ„ä¹‰</h3>
<ol>
<li>
<p><strong>æ•°æ®é›†ä¸­ç®¡ç†ï¼Œä¿æŒå•ä¸€æ•°æ®æº</strong>æ‰€æœ‰æ ¸å¿ƒæ•°æ®ï¼ˆ<code>todos</code>ï¼‰ç”±çˆ¶ç»„ä»¶Â <code>App</code>Â ç»Ÿä¸€æŒæœ‰å’Œç®¡ç†ï¼Œå­ç»„ä»¶ä»…é€šè¿‡Â <code>props</code>Â è·å–æ•°æ®æˆ–è¯·æ±‚ä¿®æ”¹ã€‚è¿™ç§è®¾è®¡é¿å…äº†æ•°æ®åˆ†æ•£åœ¨å¤šä¸ªç»„ä»¶ä¸­å¯¼è‡´çš„ "æ•°æ®æ··ä¹±"ï¼Œä¾¿äºè¿½è¸ªæ•°æ®çš„å˜æ›´å†å²ã€‚</p>
</li>
<li>
<p><strong>æ˜ç¡®ç»„ä»¶èŒè´£ï¼Œå®ç°å…³æ³¨ç‚¹åˆ†ç¦»</strong></p>
<ul>
<li>çˆ¶ç»„ä»¶ï¼šä¸“æ³¨äºæ•°æ®çš„å­˜å‚¨ã€è®¡ç®—å’Œæ›´æ–°é€»è¾‘ï¼ˆå¦‚Â <code>addTodo</code>ã€<code>deleteTodo</code>Â æ–¹æ³•ï¼‰</li>
<li>å­ç»„ä»¶ï¼šä¸“æ³¨äº UI å±•ç¤ºå’Œç”¨æˆ·äº¤äº’ï¼ˆå¦‚Â <code>TodoInput</code>Â å¤„ç†è¾“å…¥ã€<code>TodoList</code>Â å±•ç¤ºåˆ—è¡¨ï¼‰èŒè´£åˆ†ç¦»è®©ç»„ä»¶æ›´æ˜“äºç»´æŠ¤å’Œå¤ç”¨ï¼Œä¾‹å¦‚Â <code>TodoList</code>Â ä»…ä¾èµ–ä¼ å…¥çš„Â <code>todos</code>Â å’Œå›è°ƒå‡½æ•°ï¼Œå¯åœ¨å…¶ä»–åœºæ™¯ä¸­ç›´æ¥å¤ç”¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>å•å‘æ•°æ®æµï¼Œæå‡å¯é¢„æµ‹æ€§</strong>æ•°æ®åªèƒ½ä»çˆ¶ç»„ä»¶æµå‘å­ç»„ä»¶ï¼Œå­ç»„ä»¶çš„å˜æ›´éœ€æ±‚å¿…é¡»é€šè¿‡çˆ¶ç»„ä»¶å¤„ç†ã€‚è¿™ç§å•å‘æµåŠ¨è®©åº”ç”¨çš„çŠ¶æ€å˜åŒ–å¯é¢„æµ‹ï¼Œå½“å‡ºç°é—®é¢˜æ—¶ï¼Œèƒ½å¿«é€Ÿå®šä½åˆ°æ•°æ®å˜æ›´çš„æºå¤´ï¼ˆçˆ¶ç»„ä»¶çš„æ–¹æ³•ï¼‰ï¼Œé™ä½è°ƒè¯•éš¾åº¦ã€‚</p>
</li>
<li>
<p><strong>é—´æ¥å®ç°å…„å¼Ÿç»„ä»¶é€šä¿¡</strong>å…„å¼Ÿç»„ä»¶ï¼ˆå¦‚Â <code>TodoInput</code>Â å’ŒÂ <code>TodoList</code>ï¼‰æœ¬èº«æ— æ³•ç›´æ¥é€šä¿¡ï¼Œä½†é€šè¿‡çˆ¶ç»„ä»¶ä½œä¸º "ä¸­ä»‹"ï¼Œå¯é—´æ¥å®ç°æ•°æ®åŒæ­¥ã€‚ä¾‹å¦‚ï¼š<code>TodoInput</code>Â æ·»åŠ æ–°é¡¹åï¼Œçˆ¶ç»„ä»¶æ›´æ–°Â <code>todos</code>ï¼Œ<code>TodoList</code>Â å› æ¥æ”¶çš„Â <code>todos</code>Â å˜åŒ–è€Œé‡æ–°æ¸²æŸ“ï¼Œå®ç°äº†å…„å¼Ÿç»„ä»¶çš„çŠ¶æ€ååŒã€‚</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Viteé¡¹ç›®ä¸­processæŠ¥çº¢é—®é¢˜çš„æ·±å±‚åŸå› ä¸è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7587028972246695971</link>    <guid>https://juejin.cn/post/7587028972246695971</guid>    <pubDate>2025-12-24T09:25:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587028972246695971" data-draft-id="7587243886433386530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Viteé¡¹ç›®ä¸­processæŠ¥çº¢é—®é¢˜çš„æ·±å±‚åŸå› ä¸è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-24T09:25:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="shanLion"/> <meta itemprop="url" content="https://juejin.cn/user/2788017217477048"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Viteé¡¹ç›®ä¸­processæŠ¥çº¢é—®é¢˜çš„æ·±å±‚åŸå› ä¸è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2788017217477048/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    shanLion
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:25:47.000Z" title="Wed Dec 24 2025 09:25:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä½¿ç”¨Viteæ„å»ºçš„å‰ç«¯é¡¹ç›®ä¸­ï¼Œ<code>process</code>å¯¹è±¡åœ¨æŸäº›æ–‡ä»¶ä¸­æŠ¥çº¢ï¼ˆå¦‚VSCodeä¸­æ˜¾ç¤ºé”™è¯¯ï¼‰æ˜¯å¸¸è§é—®é¢˜ã€‚æœ¬æ–‡å°†ç³»ç»Ÿé˜è¿°è¯¥é—®é¢˜çš„æ·±å±‚åŸå› åŠè§£å†³æ–¹æ¡ˆï¼Œæ¶µç›–ç¯å¢ƒé…ç½®ã€ä¾èµ–ç®¡ç†ä¸ä»£ç å…¼å®¹æ€§ä¸‰å¤§æ ¸å¿ƒç¯èŠ‚ã€‚é€šè¿‡è§„èŒƒåŒ–æµç¨‹ï¼Œç¡®ä¿<code>process</code>å¯¹è±¡åœ¨æ‰€æœ‰æ–‡ä»¶ä¸­ç¨³å®šå¯ç”¨ï¼Œé¿å…å¼€å‘ä¸­æ–­ã€‚</p>
<h2 data-id="heading-0">æ·±å±‚åŸå› åˆ†æ</h2>
<h3 data-id="heading-1">1. â€Œ<strong>TypeScriptç±»å‹æ£€æŸ¥æœºåˆ¶</strong>â€Œ</h3>
<ul>
<li>â€Œ<strong>TypeScriptçš„ä¸¥æ ¼ç±»å‹æ£€æŸ¥</strong>â€Œï¼šTypeScripté»˜è®¤ä¸è¯†åˆ«Node.jså†…ç½®å¯¹è±¡ï¼ˆå¦‚<code>process</code>ï¼‰ï¼Œå¯¼è‡´åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­æŠ¥çº¢ã€‚ä¾‹å¦‚ï¼Œ<code>process</code>ä»…åœ¨Node.jsç¯å¢ƒä¸­æœ‰æ•ˆï¼Œè€ŒViteé»˜è®¤å°†ä»£ç è§†ä¸ºæµè§ˆå™¨ç¯å¢ƒï¼Œå¼•å‘ç±»å‹å†²çªã€‚</li>
<li>â€Œ<strong>ç¯å¢ƒéš”ç¦»é—®é¢˜</strong>â€Œï¼šViteé€šè¿‡ESMæ¨¡å—ç³»ç»Ÿè¿è¡Œä»£ç ï¼Œä¸Node.jsçš„CommonJSç¯å¢ƒéš”ç¦»ï¼Œå¯¼è‡´TypeScriptæ— æ³•è¯†åˆ«<code>process</code>çš„å…¨å±€å˜é‡ã€‚</li>
</ul>
<h3 data-id="heading-2">2. â€Œ<strong>Viteçš„é¢„æ„å»ºæœºåˆ¶</strong>â€Œ</h3>
<ul>
<li>â€Œ<strong>é¢„æ„å»ºå†²çª</strong>â€Œï¼šViteåœ¨æ„å»ºæ—¶ä¼šé¢„å¤„ç†ä¾èµ–ï¼Œè‹¥æœªæ­£ç¡®é…ç½®ï¼Œå¯èƒ½å¯¼è‡´Node.jså†…ç½®æ¨¡å—ï¼ˆå¦‚<code>process</code>ï¼‰ä¸æµè§ˆå™¨ç¯å¢ƒå†²çªã€‚ä¾‹å¦‚ï¼Œ<code>process</code>åœ¨é¢„æ„å»ºé˜¶æ®µè¢«è¯¯åˆ¤ä¸ºæµè§ˆå™¨ç¯å¢ƒå˜é‡ï¼Œå¼•å‘æŠ¥çº¢ã€‚</li>
<li>â€Œ<strong>ç¯å¢ƒå˜é‡å¤„ç†</strong>â€Œï¼šViteçš„<code>import.meta.env</code>æœºåˆ¶ä»…æ”¯æŒé™æ€ç¯å¢ƒå˜é‡ï¼ˆå¦‚<code>.env</code>æ–‡ä»¶ï¼‰ï¼Œè€Œ<code>process</code>æ˜¯åŠ¨æ€å…¨å±€å¯¹è±¡ï¼Œéœ€æ˜¾å¼å£°æ˜ã€‚</li>
</ul>
<h2 data-id="heading-3">è§£å†³æ–¹æ¡ˆ</h2>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<h3 data-id="heading-4">1. â€Œ<strong>ç¯å¢ƒé…ç½®è°ƒæ•´</strong>â€Œ</h3>
<ul>
<li>
<p>â€Œ<strong>å¼ºåˆ¶å£°æ˜å…¨å±€å˜é‡</strong>â€Œï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º<code>vite.env.d.ts</code>æ–‡ä»¶ï¼Œæ˜¾å¼å£°æ˜<code>process</code>ç±»å‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">typescriptCopy Code
<span class="hljs-comment">// vite.env.d.ts</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;reference types="node" /&gt;</span></span>
</code></pre>
<p>æ­¤å£°æ˜å‘ŠçŸ¥TypeScript<code>process</code>æ˜¯Node.jså†…ç½®å¯¹è±¡ï¼Œé¿å…ç±»å‹å†²çªã€‚</p>
</li>
<li>
<p>â€Œ<strong>æ’é™¤Node.jsæ¨¡å—</strong>â€Œï¼šåœ¨<code>vite.config.ts</code>ä¸­æ’é™¤<code>process</code>æ¨¡å—ï¼Œé¿å…é¢„æ„å»ºå†²çªï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">javascriptCopy Code
<span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  optimizeDeps: {
    exclude: [<span class="hljs-string">'process'</span>]
  }
}
</code></pre>
<p>æ­¤é…ç½®ç¡®ä¿<code>process</code>ä»…åœ¨Node.jsç¯å¢ƒä¸­ç”Ÿæ•ˆï¼Œé¿å…æµè§ˆå™¨ç¯å¢ƒæŠ¥é”™ã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">2. â€Œ<strong>ä¾èµ–ç®¡ç†ä¼˜åŒ–</strong>â€Œ</h3>
<ul>
<li>
<p>â€Œ<strong>å®‰è£…ç±»å‹å®šä¹‰</strong>â€Œï¼šè¿è¡Œ<code>pnpm i @types/node -D</code>å®‰è£…Node.jsç±»å‹å®šä¹‰ï¼Œå¢å¼ºTypeScriptè¯†åˆ«èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œåœ¨Vue3é¡¹ç›®ä¸­ï¼Œæ­¤å‘½ä»¤å¯è§£å†³<code>process</code>æŠ¥çº¢é—®é¢˜ã€‚</p>
</li>
<li>
<p>â€Œ<strong>åŠ¨æ€å¯¼å…¥å¤„ç†</strong>â€Œï¼šåœ¨å…³é”®é€»è¾‘ä¸­æ·»åŠ ç¯å¢ƒåˆ¤æ–­ï¼Œé¿å…<code>process</code>åœ¨æµè§ˆå™¨ä¸­æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">javascriptCopy Code
<span class="hljs-comment">// utils.js</span>
<span class="hljs-keyword">if</span> (typeof process !== <span class="hljs-string">'undefined'</span> &amp;&amp; process.env.NODE_ENV === <span class="hljs-string">'development'</span>) {
  console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'Development mode'</span>);
}
</code></pre>
<p>æ­¤æ–¹æ³•ç¡®ä¿<code>process</code>ä»…åœ¨Node.jsç¯å¢ƒä¸­ç”Ÿæ•ˆï¼Œé¿å…æµè§ˆå™¨ç¯å¢ƒæŠ¥é”™ã€‚</p>
</li>
</ul>
<h3 data-id="heading-6">3. â€Œ<strong>ä»£ç å…¼å®¹æ€§å¢å¼º</strong>â€Œ</h3>
<ul>
<li>
<p>â€Œ<strong>ç¯å¢ƒå˜é‡å£°æ˜</strong>â€Œï¼šåœ¨é¡¹ç›®å…¥å£æ–‡ä»¶ï¼ˆå¦‚<code>main.js</code>ï¼‰ä¸­æ˜¾å¼å£°æ˜<code>process</code>å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">javascriptCopy Code
<span class="hljs-comment">// main.js</span>
globalThis.process = globalThis.process || { env: {} };
</code></pre>
<p>æ­¤å£°æ˜ç¡®ä¿<code>process</code>åœ¨æ‰€æœ‰æ–‡ä»¶ä¸­å¯ç”¨ï¼Œé¿å…ç¼–è¯‘å™¨è¯¯åˆ¤ã€‚</p>
</li>
<li>
<p>â€Œ<strong>æ¡ä»¶ç¼–è¯‘å¤„ç†</strong>â€Œï¼šåœ¨å…³é”®é€»è¾‘ä¸­æ·»åŠ ç¯å¢ƒåˆ¤æ–­ï¼Œé¿å…<code>process</code>åœ¨æµè§ˆå™¨ä¸­æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">javascriptCopy Code
<span class="hljs-comment">// utils.js</span>
<span class="hljs-keyword">if</span> (typeof process !== <span class="hljs-string">'undefined'</span> &amp;&amp; process.env.NODE_ENV === <span class="hljs-string">'development'</span>) {
  console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'Development mode'</span>);
}
</code></pre>
<p>æ­¤æ–¹æ³•ç¡®ä¿<code>process</code>ä»…åœ¨Node.jsç¯å¢ƒä¸­ç”Ÿæ•ˆï¼Œé¿å…æµè§ˆå™¨ç¯å¢ƒæŠ¥é”™ã€‚</p>
</li>
</ul>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>Vite çš„é…ç½®æ–‡ä»¶ <code>vite.config.js</code> æœ¬è´¨ä¸Šæ˜¯ â€Œ<strong>Node.js ç¯å¢ƒä¸‹çš„ JavaScript æ–‡ä»¶</strong>â€Œï¼Œå®ƒåœ¨æ„å»ºæ—¶ç”± Node.js ç›´æ¥æ‰§è¡Œï¼Œè€Œéç»è¿‡ TypeScript ç¼–è¯‘å™¨ï¼ˆtscï¼‰ç±»å‹æ£€æŸ¥ã€‚å³ä½¿ä½ ä½¿ç”¨çš„æ˜¯ <code>.js</code> åç¼€ï¼ŒVite ä¹Ÿä¼šåœ¨ Node.js è¿è¡Œæ—¶ç¯å¢ƒä¸­åŠ è½½å®ƒï¼Œæ­¤æ—¶ <code>process</code> æ˜¯ Node.js å†…ç½®çš„å…¨å±€å¯¹è±¡ï¼Œå³ä½¿æœªåœ¨tsconfig.jsonä¸­æ˜¾å¼æ·»åŠ <code>"types": ["node"]</code>ï¼Œä¹Ÿä¼šé»˜è®¤æ³¨å…¥Node.jsçš„å…¨å±€ç±»å‹å®šä¹‰ï¼ˆå¦‚<code>process</code>ã€<code>__dirname</code>ç­‰ï¼‰ã€‚æ— éœ€ç±»å‹å£°æ˜å³å¯ä½¿ç”¨ã€‚</p>
<p>æ­¤å¤–ï¼ŒVite åœ¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ³¨å…¥ <code>process.env</code> çš„ç¯å¢ƒå˜é‡ï¼Œå¹¶åœ¨æ„å»ºé˜¶æ®µå°†å…¶æ›¿æ¢ä¸ºé™æ€å€¼ï¼Œå› æ­¤å®ƒå¤©ç„¶æ”¯æŒ <code>process</code> å¯¹è±¡ï¼Œæ— éœ€é¢å¤–ç±»å‹å®šä¹‰ã€‚</p>
<p>è€Œå…¶ä»– <code>.ts</code> æˆ– <code>.tsx</code> æ–‡ä»¶ä¸­ä½¿ç”¨ <code>process.env.NODE_ENV</code> æ—¶ï¼ŒTypeScript ä¼šè¿›è¡Œä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥ã€‚æ­¤æ—¶ï¼ŒTypeScript å¹¶ä¸çŸ¥é“ <code>process</code> æ˜¯ä»€ä¹ˆâ€”â€”å› ä¸ºå®ƒé»˜è®¤ä¸åŒ…å« Node.js çš„å…¨å±€ç±»å‹å®šä¹‰ã€‚é™¤éä½ æ˜¾å¼å‘Šè¯‰ TypeScriptï¼šâ€œè¿™ä¸ªé¡¹ç›®è¿è¡Œåœ¨ Node.js ç¯å¢ƒä¸­â€ï¼Œå¦åˆ™å®ƒä¼šè®¤ä¸º <code>process</code> æœªå®šä¹‰ï¼Œä»è€ŒæŠ¥é”™ï¼šâ€œæ‰¾ä¸åˆ°åç§°â€˜processâ€™â€ã€‚</p>























<table><thead><tr><th>åœºæ™¯</th><th>æ–‡ä»¶ç±»å‹</th><th>æ‰§è¡Œç¯å¢ƒ</th><th>æ˜¯å¦éœ€è¦ <code>@types/node</code></th></tr></thead><tbody><tr><td><code>vite.config.js</code></td><td>JavaScript</td><td>Node.js è¿è¡Œæ—¶</td><td>âŒ ä¸éœ€è¦ï¼ˆç”± Node.js ç›´æ¥æ‰§è¡Œï¼‰</td></tr><tr><td><code>src/*.ts</code></td><td>TypeScript</td><td>TypeScript ç¼–è¯‘å™¨æ£€æŸ¥</td><td>âœ… å¿…é¡»å®‰è£…å¹¶é…ç½®</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶æ­å»ºä¸€ä¸ª React Todo åº”ç”¨ï¼šçˆ¶å­é€šä¿¡ã€çŠ¶æ€ç®¡ç†ä¸æœ¬åœ°æŒä¹…åŒ–]]></title>    <link>https://juejin.cn/post/7587254134400286729</link>    <guid>https://juejin.cn/post/7587254134400286729</guid>    <pubDate>2025-12-24T09:30:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587254134400286729" data-draft-id="7587062584165580838" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶æ­å»ºä¸€ä¸ª React Todo åº”ç”¨ï¼šçˆ¶å­é€šä¿¡ã€çŠ¶æ€ç®¡ç†ä¸æœ¬åœ°æŒä¹…åŒ–"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2025-12-24T09:30:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‰å®‡å¤•è½"/> <meta itemprop="url" content="https://juejin.cn/user/3323164053734988"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶æ­å»ºä¸€ä¸ª React Todo åº”ç”¨ï¼šçˆ¶å­é€šä¿¡ã€çŠ¶æ€ç®¡ç†ä¸æœ¬åœ°æŒä¹…åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3323164053734988/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‰å®‡å¤•è½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:30:50.000Z" title="Wed Dec 24 2025 09:30:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-scss" lang="scss">text
ç¼–è¾‘
<span class="hljs-attribute">src</span>/
â”œâ”€â”€ App<span class="hljs-selector-class">.jsx</span>
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ TodoInput<span class="hljs-selector-class">.jsx</span>    <span class="hljs-comment">// æ·»åŠ ä»»åŠ¡è¾“å…¥æ¡†</span>
â”‚   â”œâ”€â”€ TodoList<span class="hljs-selector-class">.jsx</span>     <span class="hljs-comment">// ä»»åŠ¡åˆ—è¡¨å±•ç¤º</span>
â”‚   â””â”€â”€ TodoStats<span class="hljs-selector-class">.jsx</span>    <span class="hljs-comment">// ç»Ÿè®¡ä¿¡æ¯ä¸æ¸…é™¤å·²å®Œæˆ</span>
â””â”€â”€ styles/
    â””â”€â”€ app<span class="hljs-selector-class">.styl</span>         <span class="hljs-comment">// å…¨å±€æ ·å¼ï¼ˆä½¿ç”¨ Stylusï¼‰</span>
</code></pre>
<p>æ•´ä¸ªåº”ç”¨å›´ç»• <strong>â€œçˆ¶ç»„ä»¶æŒæœ‰çŠ¶æ€ï¼Œå­ç»„ä»¶é€šè¿‡ props æ¥æ”¶æ•°æ®å’Œå›è°ƒâ€</strong> çš„å•å‘æ•°æ®æµåŸåˆ™æ„å»ºã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ“¦ çˆ¶ç»„ä»¶ï¼š<code>App.jsx</code>Â â€”â€” çŠ¶æ€ç®¡ç†ä¸­å¿ƒ</h2>
<pre><code class="hljs language-javascript" lang="javascript">jsx
ç¼–è¾‘
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./styles/app.styl'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TodoList'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoInput</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TodoInput'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoStats</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TodoStats'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// âœ… å…³é”®ï¼šåˆå§‹åŒ–æ—¶ä» localStorage è¯»å–æ•°æ®ï¼Œå½¢æˆæŒä¹…åŒ–é—­ç¯çš„ç¬¬ä¸€æ­¥</span>
  <span class="hljs-keyword">const</span> [todos, setTodos] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> saved = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'todos'</span>)
    <span class="hljs-keyword">return</span> saved ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(saved) : []
  })

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">addTodo</span> = (<span class="hljs-params">text</span>) =&gt; {
    <span class="hljs-keyword">if</span> (!text.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span>
    <span class="hljs-title function_">setTodos</span>([...todos, {
      <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      text,
      <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>,
    }])
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteTodo</span> = (<span class="hljs-params">id</span>) =&gt; {
    <span class="hljs-title function_">setTodos</span>(todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">id</span> !== id))
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTodo</span> = (<span class="hljs-params">id</span>) =&gt; {
    <span class="hljs-title function_">setTodos</span>(todos.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span>
      todo.<span class="hljs-property">id</span> === id ? { ...todo, <span class="hljs-attr">completed</span>: !todo.<span class="hljs-property">completed</span> } : todo
    ))
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearCompleted</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setTodos</span>(todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> !todo.<span class="hljs-property">completed</span>))
  }

  <span class="hljs-keyword">const</span> activeCount = todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> !t.<span class="hljs-property">completed</span>).<span class="hljs-property">length</span>
  <span class="hljs-keyword">const</span> completedCount = todos.<span class="hljs-property">length</span> - activeCount

  <span class="hljs-comment">// âš ï¸ æ³¨æ„ï¼šè¿™æ®µä»£ç ä»…å®Œæˆã€Œå†™å…¥ã€ï¼Œå¿…é¡»é…åˆåˆå§‹åŒ–è¯»å–æ‰èƒ½å®ç°å®Œæ•´æŒä¹…åŒ–</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'todos'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(todos))
  }, [todos])

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"todo-app"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>My Todo List<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoInput</span> <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{addTodo}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoList</span> 
        <span class="hljs-attr">todos</span>=<span class="hljs-string">{todos}</span>  
        <span class="hljs-attr">onDelete</span>=<span class="hljs-string">{deleteTodo}</span>
        <span class="hljs-attr">onToggle</span>=<span class="hljs-string">{toggleTodo}</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoStats</span> 
        <span class="hljs-attr">total</span>=<span class="hljs-string">{todos.length}</span>
        <span class="hljs-attr">active</span>=<span class="hljs-string">{activeCount}</span>
        <span class="hljs-attr">completed</span>=<span class="hljs-string">{completedCount}</span>
        <span class="hljs-attr">onClearCompleted</span>=<span class="hljs-string">{clearCompleted}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>
</code></pre>
<h3 data-id="heading-1">ğŸ” æœ¬åœ°å­˜å‚¨çš„å®Œæ•´é—­ç¯ï¼šè¯» + å†™ç¼ºä¸€ä¸å¯</h3>
<p>ä½ å¯èƒ½ä¼šé—®ï¼š<strong>ä»…é  <code>useEffect</code> ä¸­çš„ <code>localStorage.setItem</code> èƒ½å®ç°æœ¬åœ°å­˜å‚¨å—ï¼Ÿ</strong></p>
<p><strong>ç­”æ¡ˆæ˜¯ï¼šä¸èƒ½ã€‚</strong></p>
<ul>
<li><strong><code>useEffect</code>Â éƒ¨åˆ†åªè´Ÿè´£â€œå†™å…¥â€</strong> ï¼šå½“Â <code>todos</code>Â å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨åŒæ­¥åˆ°Â <code>localStorage</code>ã€‚</li>
<li><strong>ä½†ç¼ºå°‘â€œè¯»å–â€ç¯èŠ‚</strong>ï¼šé¡µé¢åˆ·æ–°åï¼Œè‹¥ä¸ä»Â <code>localStorage</code>Â æ¢å¤æ•°æ®ï¼Œ<code>todos</code>Â ä¼šé‡ç½®ä¸ºç©ºæ•°ç»„ï¼Œå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</li>
</ul>
<p>âœ… <strong>å®Œæ•´æŒä¹…åŒ– = åˆå§‹åŒ–è¯»å– + å˜åŒ–æ—¶å†™å…¥</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">js
ç¼–è¾‘
<span class="hljs-comment">// 1. åˆå§‹åŒ–è¯»å–ï¼ˆå…³é”®ï¼ï¼‰</span>
<span class="hljs-keyword">const</span> [todos, setTodos] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> saved = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'todos'</span>);
  <span class="hljs-keyword">return</span> saved ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(saved) : [];
});

<span class="hljs-comment">// 2. å˜åŒ–æ—¶å†™å…¥ï¼ˆä½ å·²æœ‰çš„ä»£ç ï¼‰</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'todos'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(todos));
}, [todos]);
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>æœ¬è´¨</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªâ€œå†…å­˜ â†” æœ¬åœ°å­˜å‚¨â€çš„åŒå‘åŒæ­¥é—­ç¯ã€‚<strong>åªæœ‰ä¸¤è€…éƒ½å­˜åœ¨ï¼Œæ‰èƒ½å®ç°â€œåˆ·æ–°ä¸ä¸¢æ•°æ®â€</strong> ã€‚</p>
</blockquote>
<h4 data-id="heading-2">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>JSON åºåˆ—åŒ–é™åˆ¶</strong>ï¼š<code>todos</code>Â ä¸­åªèƒ½åŒ…å«å¯åºåˆ—åŒ–çš„æ•°æ®ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ã€æ™®é€šå¯¹è±¡/æ•°ç»„ï¼‰ï¼Œä¸èƒ½åŒ…å«å‡½æ•°ã€Symbol ç­‰ã€‚</li>
<li><strong>å­˜å‚¨å®¹é‡</strong>ï¼š<code>localStorage</code>Â é€šå¸¸é™åˆ¶ä¸º 5MBï¼Œé€‚åˆè½»é‡çº§æ•°æ®ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé¿å…å› çŠ¶æ€å¼•ç”¨å˜åŒ–å¯¼è‡´Â <code>useEffect</code>Â é¢‘ç¹è§¦å‘ï¼ˆå¯é€šè¿‡Â <code>useMemo</code>Â æˆ–æ·±æ¯”è¾ƒä¼˜åŒ–ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">âœ… çŠ¶æ€ç®¡ç†çš„æ ¸å¿ƒåŸåˆ™ï¼šå­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹æ•°æ®</h3>
<p>ä½ çš„ç†è§£å®Œå…¨æ­£ç¡®ï¼š<strong>å­ç»„ä»¶ä¸å¯ä»¥ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œåªèƒ½â€œæäº¤ä¿®æ”¹è¯·æ±‚â€</strong> ã€‚è¿™æ˜¯ React <strong>å•å‘æ•°æ®æµ</strong>çš„åŸºçŸ³ã€‚</p>
<h4 data-id="heading-4">ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</h4>
<ol>
<li><strong>çŠ¶æ€ä¸å¯å˜æ€§ï¼ˆImmutabilityï¼‰</strong><br/>
React è¦æ±‚çŠ¶æ€æ›´æ–°å¿…é¡»é€šè¿‡ <code>setState</code> è¿”å›æ–°å¯¹è±¡ï¼Œè€Œéç›´æ¥ä¿®æ”¹åŸå¯¹è±¡ã€‚è‹¥å­ç»„ä»¶ç›´æ¥æ“ä½œ <code>props.todos.push(...)</code>ï¼Œæ—¢è¿åæ­¤åŸåˆ™ï¼Œä¹Ÿæ— æ³•è§¦å‘é‡æ¸²æŸ“ã€‚</li>
<li><strong>çŠ¶æ€å˜æ›´å¯è¿½æº¯</strong><br/>
æ‰€æœ‰ä¿®æ”¹é€»è¾‘é›†ä¸­åœ¨çˆ¶ç»„ä»¶ï¼ˆå¦‚ <code>addTodo</code>, <code>deleteTodo</code>ï¼‰ï¼Œä¾¿äºè°ƒè¯•ã€æµ‹è¯•å’Œç»´æŠ¤ã€‚</li>
<li><strong>è§£è€¦ä¸å¤ç”¨</strong><br/>
å­ç»„ä»¶åªéœ€å…³å¿ƒâ€œä½•æ—¶è§¦å‘â€ï¼Œæ— éœ€å…³å¿ƒâ€œå¦‚ä½•ä¿®æ”¹â€ï¼Œé™ä½è€¦åˆåº¦ã€‚</li>
</ol>
<h4 data-id="heading-5">å·¥ä½œæµç¨‹æ¯”å–»</h4>
<ul>
<li><strong>çˆ¶ç»„ä»¶ = ä»“åº“ç®¡ç†å‘˜</strong><br/>
æŒæœ‰ <code>todos</code>ï¼ˆè´§ç‰©æ¸…å•ï¼‰ï¼ŒæŒæ¡æ‰€æœ‰æ“ä½œæƒé™ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ï¼Œå¹¶è´Ÿè´£åŒæ­¥åˆ° <code>localStorage</code>ï¼ˆçº¸è´¨å°è´¦ï¼‰ã€‚</li>
<li><strong>å­ç»„ä»¶ = å‰å°æ¥å¾…å‘˜</strong><br/>
æ— æƒç›´æ¥æ“ä½œä»“åº“ï¼Œåªè´Ÿè´£æ¥æ”¶ç”¨æˆ·æŒ‡ä»¤ï¼ˆç‚¹å‡»æŒ‰é’®ï¼‰ï¼Œå¹¶é€šè¿‡é¢„è®¾çš„â€œçƒ­çº¿ç”µè¯â€ï¼ˆå›è°ƒå‡½æ•°å¦‚ <code>onAdd</code>ï¼‰å°†è¯·æ±‚è½¬è¾¾ç»™ç®¡ç†å‘˜ã€‚</li>
<li><strong>æµç¨‹</strong>ï¼š<br/>
ç”¨æˆ·æ“ä½œ â†’ å­ç»„ä»¶è°ƒç”¨å›è°ƒ â†’ çˆ¶ç»„ä»¶æ›´æ–°çŠ¶æ€ â†’ è§¦å‘é‡æ¸²æŸ“ + åŒæ­¥æœ¬åœ°å­˜å‚¨ â†’ å­ç»„ä»¶æ¥æ”¶æ–° <code>props</code> å¹¶æ›´æ–°è§†å›¾ã€‚</li>
</ul>
<blockquote>
<p>âœ… è¿™ç§è®¾è®¡è®©æ•´ä¸ªåº”ç”¨<strong>çŠ¶æ€æ¸…æ™°ã€é€»è¾‘é›†ä¸­ã€æ˜“äºæ‰©å±•</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">ğŸ“ å­ç»„ä»¶ 1ï¼š<code>TodoInput</code>Â â€”â€” è¾“å…¥æ–°ä»»åŠ¡</h2>
<pre><code class="hljs language-javascript" lang="javascript">jsx
ç¼–è¾‘
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoInput</span> = (<span class="hljs-params">{ onAdd }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [inputValue, setInputValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">e</span>) =&gt; {
    e.<span class="hljs-title function_">preventDefault</span>() <span class="hljs-comment">// é˜»æ­¢è¡¨å•é»˜è®¤æäº¤ï¼ˆé¡µé¢åˆ·æ–°ï¼‰</span>
    <span class="hljs-title function_">onAdd</span>(inputValue)
    <span class="hljs-title function_">setInputValue</span>(<span class="hljs-string">''</span>) <span class="hljs-comment">// æ¸…ç©ºè¾“å…¥æ¡†</span>
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"todo-input"</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
        <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
        <span class="hljs-attr">value</span>=<span class="hljs-string">{inputValue}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setInputValue(e.target.value)}
        placeholder="What needs to be done?"
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TodoInput</span>
</code></pre>
<h3 data-id="heading-7">ğŸ” æ·±å…¥ç†è§£ä¸¤ä¸ªæ ¸å¿ƒæœºåˆ¶</h3>
<h4 data-id="heading-8">1. ä¸ºä»€ä¹ˆéœ€è¦Â <code>e.preventDefault()</code>ï¼Ÿ</h4>
<ul>
<li><strong>æ ¹æœ¬åŸå› </strong>ï¼š<code>&lt;form&gt;</code>Â æäº¤ä¼šè§¦å‘æµè§ˆå™¨<strong>é»˜è®¤è¡Œä¸ºâ€”â€”åˆ·æ–°é¡µé¢</strong>ã€‚</li>
<li>è‹¥ä¸é˜»æ­¢ï¼Œåˆšæ·»åŠ çš„ todo ä¼šå› é¡µé¢åˆ·æ–°è€Œä¸¢å¤±ã€‚</li>
<li><strong>å…³é”®åŸåˆ™</strong>ï¼š<code>e.preventDefault()</code>Â çš„ä½¿ç”¨<strong>å–å†³äºäº‹ä»¶æ˜¯å¦æœ‰é»˜è®¤è¡Œä¸º</strong>ï¼Œä¸â€œæ˜¯å¦æ˜¯æ·»åŠ æ“ä½œâ€æ— å…³ã€‚</li>
</ul>
<p>âœ… <strong>ä¸éœ€è¦ <code>preventDefault</code> çš„æ·»åŠ åœºæ™¯</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">jsx
ç¼–è¾‘
// æŒ‰é’®ç‚¹å‡»ï¼ˆæ— é»˜è®¤è¡Œä¸ºï¼‰
&lt;button <span class="hljs-attr">onClick</span>={() =&gt; { <span class="hljs-literal">on</span>Add(text)<span class="hljs-comment">; }}&gt;æ·»åŠ &lt;/button&gt;</span>

// è¾“å…¥æ¡†å›è½¦ç›‘å¬ï¼ˆéè¡¨å•æäº¤ï¼‰
&lt;input <span class="hljs-attr">onKeyDown</span>={(e) =&gt; {
  if (<span class="hljs-attr">e.key</span> === <span class="hljs-string">'Enter'</span>) <span class="hljs-literal">on</span>Add(inputValue)<span class="hljs-comment">;</span>
}} /&gt;
</code></pre>
<h4 data-id="heading-9">2. ä¸ºä»€ä¹ˆÂ <code>setInputValue('')</code>Â èƒ½æ¸…ç©ºè¾“å…¥æ¡†ï¼Ÿ</h4>
<p>å› ä¸ºè¿™æ˜¯ <strong>å—æ§ç»„ä»¶ï¼ˆControlled Componentï¼‰</strong> ï¼š</p>
<ul>
<li><code>value={inputValue}</code>ï¼šè¾“å…¥æ¡†æ˜¾ç¤ºç”± React çŠ¶æ€é©±åŠ¨ã€‚</li>
<li><code>onChange</code>ï¼šç”¨æˆ·è¾“å…¥æ—¶åŒæ­¥æ›´æ–°çŠ¶æ€ã€‚</li>
<li>æ‰§è¡ŒÂ <code>setInputValue('')</code>Â â†’ çŠ¶æ€å˜ç©º â†’ ç»„ä»¶é‡æ¸²æŸ“ â†’ è¾“å…¥æ¡†æ˜¾ç¤ºä¸ºç©ºã€‚</li>
</ul>
<blockquote>
<p>âŒ éå—æ§ç»„ä»¶ï¼ˆç”¨ <code>ref</code>ï¼‰æ— æ³•é€šè¿‡æ­¤æ–¹å¼æ¸…ç©ºï¼Œéœ€ç›´æ¥æ“ä½œ DOMã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-10">ğŸ“‹ å­ç»„ä»¶ 2ï¼š<code>TodoList</code>Â â€”â€” æ¸²æŸ“ä»»åŠ¡é¡¹</h2>
<pre><code class="hljs language-ini" lang="ini">jsx
ç¼–è¾‘
const <span class="hljs-attr">TodoList</span> = ({ todos, <span class="hljs-literal">on</span>Delete, <span class="hljs-literal">on</span>Toggle }) =&gt; {
  return (
    &lt;ul <span class="hljs-attr">className</span>=<span class="hljs-string">"todo-list"</span>&gt;
      {<span class="hljs-attr">todos.length</span> === <span class="hljs-number">0</span> ? (
        &lt;li&gt;&lt;p <span class="hljs-attr">className</span>=<span class="hljs-string">"empty"</span>&gt;<span class="hljs-literal">No</span> todos, yet!&lt;/p&gt;&lt;/li&gt;
      ) : (
        todos.map(<span class="hljs-attr">todo</span> =&gt; (
          &lt;li 
            <span class="hljs-attr">key</span>={todo.id} 
            <span class="hljs-attr">className</span>={todo.completed ? <span class="hljs-string">'completed'</span> : <span class="hljs-string">''</span>}
          &gt;
            &lt;label&gt;
              &lt;input 
                <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> 
                <span class="hljs-attr">checked</span>={todo.completed}
                <span class="hljs-attr">onChange</span>={() =&gt; <span class="hljs-literal">on</span>Toggle(todo.id)}
              /&gt;
              &lt;span&gt;{todo.text}&lt;/span&gt;
            &lt;/label&gt;
            &lt;button <span class="hljs-attr">onClick</span>={() =&gt; <span class="hljs-literal">on</span>Delete(todo.id)}&gt;Ã—&lt;/button&gt;
          &lt;/li&gt;
        ))
      )}
    &lt;/ul&gt;
  )
}

export default TodoList
</code></pre>
<h3 data-id="heading-11">ğŸ” åˆ é™¤é€»è¾‘æ·±åº¦è§£æ</h3>
<h4 data-id="heading-12">1.Â <code>filter</code>Â å¦‚ä½•å®ç°â€œåˆ é™¤â€ï¼Ÿ</h4>
<ul>
<li><code>filter</code>Â è¿”å›æ–°æ•°ç»„ï¼Œä¿ç•™Â <code>todo.id !== id</code>Â çš„é¡¹ã€‚</li>
<li>ç›®æ ‡é¡¹å› Â <code>id</code>Â ç›¸ç­‰è¢«è¿‡æ»¤æ‰ â†’ é—´æ¥å®ç°åˆ é™¤ã€‚</li>
<li>ç¬¦åˆ ReactÂ <strong>ä¸å¯å˜æ›´æ–°</strong>åŸåˆ™ã€‚</li>
</ul>
<h4 data-id="heading-13">2. ä¸ºä»€ä¹ˆä¾èµ–Â <code>id</code>Â çš„å”¯ä¸€æ€§ï¼Ÿ</h4>
<ul>
<li><code>id: Date.now()</code>Â <strong>ä»…åœ¨åˆ›å»ºæ—¶æ‰§è¡Œä¸€æ¬¡</strong>ï¼Œä½œä¸ºè¯¥ todo çš„æ°¸ä¹…æ ‡è¯†ã€‚</li>
<li>åˆ é™¤æ—¶ä¼ é€’çš„æ˜¯<strong>åŸå§‹ id</strong>ï¼Œä¸æ˜¯å½“å‰æ—¶é—´æˆ³ã€‚</li>
<li>å› æ­¤Â <code>todo.id !== id</code>Â èƒ½ç²¾å‡†åŒ¹é…å”¯ä¸€ç›®æ ‡ã€‚</li>
</ul>
<blockquote>
<p>âš ï¸ <strong>é£é™©</strong>ï¼šè‹¥å¤šä¸ª todo å…±äº«ç›¸åŒ idï¼Œä¼šå¯¼è‡´è¯¯åˆ ã€‚ç”Ÿäº§ç¯å¢ƒå»ºè®®ç”¨ <code>uuid</code>ã€‚</p>
</blockquote>
<h4 data-id="heading-14">3. â€œå”¯ä¸€ idâ€ ä¸ â€œid ä¸åŒâ€ æ˜¯å¦çŸ›ç›¾ï¼Ÿ</h4>
<p><strong>ä¸çŸ›ç›¾ï¼</strong></p>
<ul>
<li><strong>å”¯ä¸€ id</strong>ï¼šç¡®ä¿æ¯ä¸ª todo æœ‰å”¯ä¸€èº«ä»½ï¼ˆç›®æ ‡é¡¹åªæœ‰ä¸€ä¸ªï¼‰ã€‚</li>
<li><strong>id â‰  ç›®æ ‡ id</strong>ï¼šæ˜¯Â <code>filter</code>Â çš„ç­›é€‰æ¡ä»¶ï¼ˆä¿ç•™éç›®æ ‡é¡¹ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>ğŸ§© ç±»æ¯”ï¼šä» [å°æ˜(id=1), å°çº¢(id=2)] ä¸­åˆ é™¤å°çº¢ â†’ ç­›é€‰â€œid â‰  2â€ â†’ ç»“æœï¼š[å°æ˜]</p>
</blockquote>
<hr/>
<h2 data-id="heading-15">ğŸ“Š å­ç»„ä»¶ 3ï¼š<code>TodoStats</code>Â â€”â€” æ˜¾ç¤ºç»Ÿè®¡ &amp; æ¸…é™¤æ“ä½œ</h2>
<pre><code class="hljs language-javascript" lang="javascript">jsx
ç¼–è¾‘
<span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoStats</span> = (<span class="hljs-params">{ total, active, completed, onClearCompleted }</span>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"todo-stats"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Total: {total} | Active: {active} | Completed: {completed}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      {completed &gt; 0 &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClearCompleted}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"clear-btn"</span>&gt;</span>
          Clear Completed
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TodoStats</span>
</code></pre>
<blockquote>
<p>âœ… æ¡ä»¶æ¸²æŸ“æå‡ç”¨æˆ·ä½“éªŒã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-16">ğŸ” ç»„ä»¶é€šä¿¡æœºåˆ¶æ€»ç»“</h2>





















<table><thead><tr><th>é€šä¿¡æ–¹å‘</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>çˆ¶ â†’ å­</td><td><code>props</code>Â ä¼ é€’æ•°æ®</td></tr><tr><td>å­ â†’ çˆ¶</td><td><code>props</code>Â ä¼ é€’å›è°ƒå‡½æ•°</td></tr><tr><td>å…„å¼Ÿç»„ä»¶</td><td>é€šè¿‡çˆ¶ç»„ä»¶çŠ¶æ€ä¸­è½¬</td></tr></tbody></table>
<blockquote>
<p>æ ¸å¿ƒï¼š<strong>æ•°æ®è‡ªä¸Šè€Œä¸‹ï¼Œäº‹ä»¶è‡ªä¸‹è€Œä¸Š</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-17">ğŸ§ª æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>çŠ¶æ€ä¸å¯å˜æ€§</strong>ï¼šå§‹ç»ˆè¿”å›æ–°æ•°ç»„/å¯¹è±¡ã€‚</li>
<li><strong>ID ç”Ÿæˆå¯é æ€§</strong>ï¼šé«˜é¢‘åœºæ™¯ç”¨Â <code>uuid</code>Â æ›¿ä»£Â <code>Date.now()</code>ã€‚</li>
<li><strong>è¡¨å•é˜²ç©ºæäº¤</strong>ï¼š<code>disabled={!inputValue.trim()}</code></li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š<code>React.memo</code>Â +Â <code>useCallback</code>ï¼ˆæŒ‰éœ€ï¼‰</li>
</ol>
<hr/>
<h2 data-id="heading-18">ğŸ” æ‹“å±•æ€è€ƒï¼šçŠ¶æ€ç®¡ç†æ–¹æ¡ˆå¯¹æ¯”</h2>

























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>çŠ¶æ€æå‡</strong></td><td>å°å‹åº”ç”¨</td><td>âœ… ç®€å•ï¼›âŒ çŠ¶æ€é›†ä¸­</td></tr><tr><td><strong>Context</strong></td><td>è·¨å¤šå±‚ç»„ä»¶</td><td>âœ… é¿å… props drillingï¼›âŒ æ›´æ–°ç²’åº¦ç²—</td></tr><tr><td><strong>Zustand/Redux</strong></td><td>å¤§å‹åº”ç”¨</td><td>âœ… å¼ºå¤§ï¼›âŒ æˆæœ¬é«˜</td></tr></tbody></table>
<blockquote>
<p>âœ… Todo åº”ç”¨ï¼šçŠ¶æ€æå‡ + localStorage æœ€ä½³ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-19">âœ… æ€»ç»“è¦ç‚¹</h2>
<ul>
<li>âœ…Â <strong>æœ¬åœ°å­˜å‚¨ = åˆå§‹åŒ–è¯»å– + å˜åŒ–æ—¶å†™å…¥</strong>ï¼Œç¼ºä¸€ä¸å¯ã€‚</li>
<li>âœ…Â <strong><code>e.preventDefault()</code></strong> Â ä»…ç”¨äºé˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸ºï¼ˆå¦‚è¡¨å•åˆ·æ–°ï¼‰ã€‚</li>
<li>âœ…Â <strong>å—æ§ç»„ä»¶</strong>Â æ˜¯Â <code>setInputValue('')</code>Â æ¸…ç©ºè¾“å…¥æ¡†çš„æ ¹æœ¬åŸå› ã€‚</li>
<li>âœ…Â <strong><code>filter</code>Â åˆ é™¤</strong>Â ä¾èµ–Â <strong>å”¯ä¸€ä¸”ä¸å˜çš„ ID</strong>ï¼Œæœ¬è´¨æ˜¯â€œä¿ç•™éç›®æ ‡é¡¹â€ã€‚</li>
<li>âœ…Â <strong>å­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹çŠ¶æ€</strong>ï¼Œåªèƒ½é€šè¿‡å›è°ƒâ€œæäº¤è¯·æ±‚â€ï¼Œçˆ¶ç»„ä»¶ç»Ÿä¸€å¤„ç†ã€‚</li>
<li>âœ…Â <strong>çˆ¶ç»„ä»¶æŒæœ‰çŠ¶æ€</strong>Â æ˜¯å®ç°çŠ¶æ€å…±äº«ä¸æŒä¹…åŒ–çš„ç®€æ´è½½ä½“ï¼Œä½†æ ¸å¿ƒæ˜¯<strong>å®Œæ•´çš„æŒä¹…åŒ–é—­ç¯</strong>ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ æ•ˆç‡æš´å¢ï¼Vue.jså¼€å‘å¿…çŸ¥çš„15ä¸ªç¥çº§ææ•ˆå·¥å…·]]></title>    <link>https://juejin.cn/post/7587252766830854186</link>    <guid>https://juejin.cn/post/7587252766830854186</guid>    <pubDate>2025-12-24T09:34:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587252766830854186" data-draft-id="7587238733503676459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ æ•ˆç‡æš´å¢ï¼Vue.jså¼€å‘å¿…çŸ¥çš„15ä¸ªç¥çº§ææ•ˆå·¥å…·"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-24T09:34:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Mr_chiu"/> <meta itemprop="url" content="https://juejin.cn/user/1644525124592974"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ æ•ˆç‡æš´å¢ï¼Vue.jså¼€å‘å¿…çŸ¥çš„15ä¸ªç¥çº§ææ•ˆå·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1644525124592974/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Mr_chiu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:34:50.000Z" title="Wed Dec 24 2025 09:34:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å‘Šåˆ«996ï¼Œä»å–„ç”¨å·¥å…·å¼€å§‹</p>
</blockquote>
<h2 data-id="heading-0">å¼€ç¯‡ï¼šé‚£äº›å¹´æˆ‘ä»¬æµªè´¹çš„æ—¶é—´</h2>
<p>ä½œä¸ºä¸€åæœ‰äº”å¹´ç»éªŒçš„Vueå·¥ç¨‹å¸ˆï¼Œæˆ‘æ›¾æ— æ•°æ¬¡åœ¨é‡å¤åŠ³åŠ¨ä¸­æŒ£æ‰ï¼šæ‰‹åŠ¨å¤åˆ¶ç›¸ä¼¼çš„ç»„ä»¶ä»£ç ã€åœ¨æµè§ˆå™¨å’Œç¼–è¾‘å™¨ä¹‹é—´åå¤åˆ‡æ¢è°ƒè¯•ã€ä¸ºé¡¹ç›®åˆå§‹åŒ–é…ç½®èŠ±è´¹åŠå¤©æ—¶é—´â€¦â€¦ç›´åˆ°æˆ‘å¼€å§‹ç³»ç»Ÿæ€§åœ°æ”¶é›†å’Œæ•´åˆææ•ˆå·¥å…·ï¼Œæˆ‘çš„å¼€å‘æ•ˆç‡æ‰æœ‰äº†è´¨çš„é£è·ƒã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘åˆ†äº«çš„è¿™äº›å·¥å…·ï¼Œæ˜¯æˆ‘ä»æ— æ•°å·¥å…·ä¸­ç­›é€‰å‡ºçš„ç²¾åï¼Œæ¯ä¸ªéƒ½åœ¨æˆ‘çš„æ—¥å¸¸Vueå¼€å‘å·¥ä½œä¸­æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€è„šæ‰‹æ¶ä¸é¡¹ç›®å¯åŠ¨å·¥å…·</h2>
<h3 data-id="heading-2">1. <strong>Plop.js + Vueæ¨¡æ¿ - ä»£ç ç”Ÿæˆå™¨ä¸­çš„ç‘å£«å†›åˆ€</strong></h3>
<p>Plop.js æ˜¯æˆ‘Vueé¡¹ç›®ä¸­çš„æ ‡é…ã€‚å®ƒåŸºäºæ¨¡æ¿å¿«é€Ÿç”Ÿæˆç»„ä»¶ã€é¡µé¢æˆ–æ¨¡å—ï¼Œç¡®ä¿å›¢é˜Ÿä»£ç ä¸€è‡´æ€§ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// plopfile.js é…ç½®ç¤ºä¾‹ - Vueç‰ˆæœ¬</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">plop</span>) {
  plop.<span class="hljs-title function_">setGenerator</span>(<span class="hljs-string">'component'</span>, {
    <span class="hljs-attr">description</span>: <span class="hljs-string">'åˆ›å»ºä¸€ä¸ªVueç»„ä»¶'</span>,
    <span class="hljs-attr">prompts</span>: [{
      <span class="hljs-attr">type</span>: <span class="hljs-string">'input'</span>,
      <span class="hljs-attr">name</span>: <span class="hljs-string">'name'</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'ç»„ä»¶åç§°ï¼ˆä½¿ç”¨å¤§é©¼å³°å‘½åï¼‰:'</span>
    }],
    <span class="hljs-attr">actions</span>: [{
      <span class="hljs-attr">type</span>: <span class="hljs-string">'add'</span>,
      <span class="hljs-attr">path</span>: <span class="hljs-string">'src/components/{{properCase name}}/{{properCase name}}.vue'</span>,
      <span class="hljs-attr">templateFile</span>: <span class="hljs-string">'templates/component.hbs'</span>
    }, {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'add'</span>,
      <span class="hljs-attr">path</span>: <span class="hljs-string">'src/components/{{properCase name}}/index.js'</span>,
      <span class="hljs-attr">templateFile</span>: <span class="hljs-string">'templates/index.hbs'</span>
    }]
  });
};

<span class="hljs-comment">// component.hbs æ¨¡æ¿ç¤ºä¾‹</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"{{kebabCase name}}"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç»„ä»¶å†…å®¹ --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-title function_">defineProps</span>({
  <span class="hljs-comment">// propså®šä¹‰</span>
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
.{{kebabCase name}} {
  <span class="hljs-comment">/* æ ·å¼ */</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<p><strong>æŠ€æœ¯è¦ç‚¹</strong>ï¼šPlopä½¿ç”¨Handlebarsæ¨¡æ¿å¼•æ“ï¼Œç»“åˆInquirer.jså®ç°äº¤äº’å¼ç”Ÿæˆã€‚æˆ‘ä»¬å¯ä»¥ä¸ºä¸åŒç±»å‹çš„Vueç»„ä»¶ï¼ˆå¦‚ç»„ä»¶ã€é¡µé¢ã€ç»„åˆå¼å‡½æ•°ï¼‰é¢„è®¾ä¸åŒçš„æ¨¡æ¿ã€‚</p>
<h3 data-id="heading-3">2. <strong>Vite + Vue 3 - æ–°ä¸€ä»£Vueæ„å»ºä½“éªŒ</strong></h3>
<p>Viteçš„é—ªç”µèˆ¬çš„çƒ­æ›´æ–°é€Ÿåº¦ï¼Œè®©Vueå¼€å‘ä½“éªŒè¾¾åˆ°äº†æ–°é«˜åº¦ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºVueé¡¹ç›®</span>
npm create vue@latest my-vue-app

<span class="hljs-comment"># é€‰æ‹©éœ€è¦çš„ç‰¹æ€§</span>
<span class="hljs-comment"># âˆš æ˜¯å¦ä½¿ç”¨ TypeScript? Yes</span>
<span class="hljs-comment"># âˆš æ˜¯å¦å¯ç”¨ JSX æ”¯æŒ? Yes  </span>
<span class="hljs-comment"># âˆš æ˜¯å¦æ·»åŠ  Vue Router? Yes</span>
<span class="hljs-comment"># âˆš æ˜¯å¦æ·»åŠ  Pinia? Yes</span>
<span class="hljs-comment"># âˆš æ˜¯å¦æ·»åŠ  Vitest? Yes</span>

<span class="hljs-comment"># å¼€å‘æ¨¡å¼å¯åŠ¨ï¼ˆæ¯«ç§’çº§ï¼‰</span>
npm run dev
</code></pre>
<p><strong>æ·±åº¦ä¼˜åŒ–æŠ€å·§</strong>ï¼šé€šè¿‡é…ç½®<code>vite.config.js</code>ä¸­çš„<code>vue</code>æ’ä»¶é€‰é¡¹ï¼Œå¼€å¯å“åº”å¼è¯­æ³•ç³–å’Œæ€§èƒ½ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">vue</span>({
      <span class="hljs-attr">reactivityTransform</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨å“åº”å¼è¯­æ³•ç³–</span>
      <span class="hljs-attr">template</span>: {
        <span class="hljs-attr">compilerOptions</span>: {
          <span class="hljs-comment">// è‡ªå®šä¹‰ç¼–è¯‘å™¨é€‰é¡¹</span>
        }
      }
    })
  ]
})
</code></pre>
<h2 data-id="heading-4">äºŒã€å¼€å‘ä¸è°ƒè¯•åˆ©å™¨</h2>
<h3 data-id="heading-5">3. <strong>Vue.js devtools 6.0 - Vueå¼€å‘è€…çš„è¶…çº§æ­¦å™¨</strong></h3>
<p>Vue.js devtoolsæ˜¯Vueå¼€å‘è€…ä¸å¯æˆ–ç¼ºçš„è°ƒè¯•å·¥å…·ï¼Œæ–°ç‰ˆæ”¯æŒVue 3å’Œç»„åˆå¼APIï¼š</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p>
<ul>
<li><strong>ç»„ä»¶æ ‘</strong>ï¼šå¯è§†åŒ–æŸ¥çœ‹ç»„ä»¶å±‚çº§å’ŒçŠ¶æ€</li>
<li><strong>æ—¶é—´æ—…è¡Œ</strong>ï¼šè·Ÿè¸ªçŠ¶æ€å˜åŒ–å¹¶å›é€€åˆ°ä»»æ„çŠ¶æ€</li>
<li><strong>ç»„åˆå¼å‡½æ•°è°ƒè¯•</strong>ï¼šç›‘æ§<code>ref</code>ã€<code>reactive</code>ã€<code>computed</code>ç­‰å“åº”å¼æ•°æ®</li>
<li><strong>è·¯ç”±è°ƒè¯•</strong>ï¼šVue Routerçš„çŠ¶æ€å’Œå¯¼èˆªå†å²</li>
<li><strong>Piniaé›†æˆ</strong>ï¼šç›´æ¥æŸ¥çœ‹å’Œä¿®æ”¹Pinia storeçŠ¶æ€</li>
</ul>
<p><strong>é«˜çº§æŠ€å·§</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨"Open in editor"åŠŸèƒ½å¿«é€Ÿå®šä½ç»„ä»¶æºç </li>
<li>é€šè¿‡æ—¶é—´è½´åŠŸèƒ½åˆ†æç»„ä»¶æ›´æ–°æ€§èƒ½</li>
<li>è‡ªå®šä¹‰é¢æ¿æ‰©å±•ï¼Œå¦‚VueUseçŠ¶æ€ç›‘æ§</li>
</ul>
<h3 data-id="heading-6">4. <strong>Volar + TypeScript - æ™ºèƒ½Vueå¼€å‘ä½“éªŒ</strong></h3>
<p>Volaræ˜¯Vue 3å®˜æ–¹æ¨èçš„VSCodeæ’ä»¶ï¼Œæä¾›æè‡´çš„TypeScriptæ”¯æŒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®Œæ•´çš„TypeScriptæ™ºèƒ½æç¤º</span>
&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// ç±»å‹æ¨æ–­å’Œè‡ªåŠ¨è¡¥å…¨</span>
<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>) <span class="hljs-comment">// ç±»å‹ä¸ºRef&lt;number&gt;</span>

<span class="hljs-comment">// Propsç±»å‹æ£€æŸ¥</span>
defineProps&lt;{
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>
  value?: <span class="hljs-built_in">number</span>
}&gt;()

<span class="hljs-comment">// äº‹ä»¶ç±»å‹å®šä¹‰</span>
<span class="hljs-keyword">const</span> emit = defineEmits&lt;{
  (<span class="hljs-attr">e</span>: <span class="hljs-string">'update'</span>, <span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span>
  (<span class="hljs-attr">e</span>: <span class="hljs-string">'change'</span>, <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span>
}&gt;()
&lt;/script&gt;
</code></pre>
<p><strong>é…ç½®ä¼˜åŒ–</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// .vscode/settings.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"volar.tsPlugin"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"volar.completion.preferredTagNameCase"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pascal"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"volar.autoCompleteRefs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"volar.codeLens.scriptSetupTools"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€ä»£ç è´¨é‡ä¸è‡ªåŠ¨åŒ–</h2>
<h3 data-id="heading-8">5. <strong>Vue ESLintæ’ä»¶ + lint-staged - Vueä»£ç è´¨é‡å«å£«</strong></h3>
<p>é’ˆå¯¹Vueçš„ä¸“é—¨åŒ–ä»£ç æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// .eslintrc.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">extends</span>: [
    <span class="hljs-string">'plugin:vue/vue3-recommended'</span>,
    <span class="hljs-string">'@vue/typescript/recommended'</span>
  ],
  <span class="hljs-attr">rules</span>: {
    <span class="hljs-string">'vue/multi-word-component-names'</span>: <span class="hljs-string">'off'</span>,
    <span class="hljs-string">'vue/no-v-html'</span>: <span class="hljs-string">'warn'</span>,
    <span class="hljs-string">'vue/component-tags-order'</span>: [<span class="hljs-string">'error'</span>, {
      <span class="hljs-attr">order</span>: [<span class="hljs-string">'script'</span>, <span class="hljs-string">'template'</span>, <span class="hljs-string">'style'</span>]
    }]
  }
}

<span class="hljs-comment">// ç»“åˆHuskyå’Œlint-staged</span>
{
  <span class="hljs-string">"husky"</span>: {
    <span class="hljs-string">"hooks"</span>: {
      <span class="hljs-string">"pre-commit"</span>: <span class="hljs-string">"lint-staged"</span>,
      <span class="hljs-string">"commit-msg"</span>: <span class="hljs-string">"commitlint -E HUSKY_GIT_PARAMS"</span>
    }
  },
  <span class="hljs-string">"lint-staged"</span>: {
    <span class="hljs-string">"*.{vue,js,jsx,ts,tsx}"</span>: [
      <span class="hljs-string">"eslint --fix"</span>,
      <span class="hljs-string">"prettier --write"</span>
    ]
  }
}
</code></pre>
<h3 data-id="heading-9">6. <strong>Vue Test Utils + Vitest - ç°ä»£åŒ–Vueæµ‹è¯•æ–¹æ¡ˆ</strong></h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Component.test.ts</span>
<span class="hljs-keyword">import</span> { mount } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/test-utils'</span>
<span class="hljs-keyword">import</span> { describe, it, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vitest'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Counter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Counter.vue'</span>

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'Counter.vue'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'renders correctly'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">Counter</span>, {
      <span class="hljs-attr">props</span>: { <span class="hljs-attr">initialValue</span>: <span class="hljs-number">5</span> }
    })
    
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'5'</span>)
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'button'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">true</span>)
  })
  
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'increments count on button click'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">Counter</span>)
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'button'</span>).<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'click'</span>)
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'1'</span>)
  })
})
</code></pre>
<h2 data-id="heading-10">å››ã€APIä¸æ•°æ®æ¨¡æ‹Ÿ</h2>
<h3 data-id="heading-11">7. <strong>Mirage JS - Vueåº”ç”¨çš„å…¨åŠŸèƒ½APIæ¨¡æ‹Ÿ</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨Vueåº”ç”¨ä¸­é…ç½®Mirage</span>
<span class="hljs-keyword">import</span> { createServer } <span class="hljs-keyword">from</span> <span class="hljs-string">'miragejs'</span>

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">DEV</span>) {
  <span class="hljs-title function_">createServer</span>({
    <span class="hljs-title function_">routes</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">namespace</span> = <span class="hljs-string">'api'</span>
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/users'</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">return</span> [
          { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'ç”¨æˆ·1'</span> },
          { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'ç”¨æˆ·2'</span> }
        ]
      })
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/users'</span>, <span class="hljs-function">(<span class="hljs-params">schema, request</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> attrs = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(request.<span class="hljs-property">requestBody</span>)
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, ...attrs }
      })
    }
  })
}
</code></pre>
<h2 data-id="heading-12">äº”ã€è§†è§‰ä¸è®¾è®¡åä½œ</h2>
<h3 data-id="heading-13">8. <strong>Vue Figmaæ’ä»¶ + Vue Design System</strong></h3>
<p>å¯¹äºè®¾è®¡ç¨¿è½¬Vueä»£ç çš„å®Œæ•´æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨Vue Design System</span>
<span class="hljs-keyword">import</span> { defineComponent, h } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { 
  <span class="hljs-title class_">VButton</span>, 
  <span class="hljs-title class_">VInput</span>, 
  <span class="hljs-title class_">VCard</span>,
  tokens 
} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-design-system'</span>

<span class="hljs-comment">// ä»Figmaæ’ä»¶å¯¼å‡ºçš„è®¾è®¡Token</span>
<span class="hljs-keyword">const</span> figmaTokens = {
  <span class="hljs-attr">colors</span>: {
    <span class="hljs-attr">primary</span>: <span class="hljs-string">'#007AFF'</span>,
    <span class="hljs-attr">secondary</span>: <span class="hljs-string">'#5856D6'</span>
  },
  <span class="hljs-attr">spacing</span>: {
    <span class="hljs-attr">xs</span>: <span class="hljs-string">'4px'</span>,
    <span class="hljs-attr">sm</span>: <span class="hljs-string">'8px'</span>,
    <span class="hljs-attr">md</span>: <span class="hljs-string">'16px'</span>
  }
}

<span class="hljs-comment">// è‡ªåŠ¨ç”ŸæˆVueç»„ä»¶é…ç½®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> designSystem = {
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">VButton</span>,
    <span class="hljs-title class_">VInput</span>,
    <span class="hljs-title class_">VCard</span>
  },
  <span class="hljs-attr">tokens</span>: { ...tokens, ...figmaTokens }
}
</code></pre>
<h2 data-id="heading-14">å…­ã€æ–‡æ¡£ä¸ç»„ä»¶ç®¡ç†</h2>
<h3 data-id="heading-15">9. <strong>VitePress + Vue Demoblock - ç»„ä»¶æ–‡æ¡£è‡ªåŠ¨åŒ–</strong></h3>
<p>åŸºäºVitePressçš„Vueç»„ä»¶æ–‡æ¡£æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
<span class="hljs-section">title: Buttonç»„ä»¶
---</span>

<span class="hljs-section"># Button</span>

é€šç”¨çš„æŒ‰é’®ç»„ä»¶

<span class="hljs-section">## åŸºç¡€ç”¨æ³•</span>

:::demo
<span class="hljs-code">```vue
&lt;template&gt;
  &lt;v-button type="primary"&gt;ä¸»è¦æŒ‰é’®&lt;/v-button&gt;
&lt;/template&gt;
</span></code></pre>
<p>:::</p>
<h2 data-id="heading-16">API</h2>

```
<p><strong>è‡ªåŠ¨åŒ–è„šæœ¬</strong>ï¼šè‡ªåŠ¨ä»Vueç»„ä»¶ä¸­æå–Propsã€Eventsã€Slotsä¿¡æ¯ç”ŸæˆAPIæ–‡æ¡£ã€‚</p>
<h2 data-id="heading-17">ä¸ƒã€ç»ˆç«¯ä¸å·¥ä½œæµä¼˜åŒ–</h2>
<h3 data-id="heading-18">10. <strong>Vue CLIæ’ä»¶å¼€å‘ - è‡ªå®šä¹‰é¡¹ç›®ç”Ÿæˆå™¨</strong></h3>
<p>åˆ›å»ºè‡ªå·±çš„Vueé¡¹ç›®æ¨¡æ¿å’Œç”Ÿæˆå™¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// generator.js - è‡ªå®šä¹‰Vue CLIæ’ä»¶</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">api, options</span>) =&gt;</span> {
  api.<span class="hljs-title function_">render</span>(<span class="hljs-string">'./template'</span>)
  
  api.<span class="hljs-title function_">extendPackage</span>({
    <span class="hljs-attr">dependencies</span>: {
      <span class="hljs-string">'pinia'</span>: <span class="hljs-string">'^2.0.0'</span>,
      <span class="hljs-string">'vue-router'</span>: <span class="hljs-string">'^4.0.0'</span>
    },
    <span class="hljs-attr">scripts</span>: {
      <span class="hljs-string">'analyze'</span>: <span class="hljs-string">'vue-cli-service build --report'</span>
    }
  })
  
  api.<span class="hljs-title function_">injectImports</span>(api.<span class="hljs-property">entryFile</span>, <span class="hljs-string">`import router from './router'`</span>)
  api.<span class="hljs-title function_">afterInvoke</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ç”Ÿæˆåå¤„ç†é€»è¾‘</span>
  })
}
</code></pre>
<h3 data-id="heading-19">11. <strong>VueUse - ç»„åˆå¼å‡½æ•°å·¥å…·é›†</strong></h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨VueUseæå‡å¼€å‘æ•ˆç‡</span>
<span class="hljs-keyword">import</span> { 
  useMouse, 
  useLocalStorage, 
  useFetch,
  useDebounceFn
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@vueuse/core'</span>

<span class="hljs-comment">// åœ¨ç»„åˆå¼å‡½æ•°ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useUserData</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è‡ªåŠ¨æŒä¹…åŒ–çš„çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">useLocalStorage</span>(<span class="hljs-string">'user'</span>, <span class="hljs-literal">null</span>)
  
  <span class="hljs-comment">// é˜²æŠ–è¯·æ±‚</span>
  <span class="hljs-keyword">const</span> { data, error } = <span class="hljs-title function_">useFetch</span>(<span class="hljs-string">'/api/user'</span>)
    .<span class="hljs-title function_">debounced</span>(<span class="hljs-number">300</span>)
  
  <span class="hljs-keyword">return</span> { user, data, error }
}
</code></pre>
<h2 data-id="heading-20">å…«ã€æµè§ˆå™¨æ‰©å±•å®è—</h2>
<h3 data-id="heading-21">12. <strong>Vue.js devtools 6.0ï¼ˆæµè§ˆå™¨æ‰©å±•ï¼‰</strong></h3>
<p>å‰é¢æåˆ°çš„Vue devtoolsçš„æµè§ˆå™¨æ‰©å±•ç‰ˆæœ¬ï¼Œæ”¯æŒChromeã€Firefoxã€Edgeç­‰ä¸»æµæµè§ˆå™¨ã€‚</p>
<h3 data-id="heading-22">13. <strong>Vue Metaè°ƒè¯•å™¨ - SEOå’Œç®¡ç†å·¥å…·</strong></h3>
<p>å¯¹äºä½¿ç”¨Vue Metaçš„åº”ç”¨ï¼Œè¿™æ¬¾æ‰©å±•å¯ä»¥å®æ—¶æŸ¥çœ‹å’Œä¿®æ”¹é¡µé¢å…ƒä¿¡æ¯ã€‚</p>
<h2 data-id="heading-23">ä¹ã€é«˜çº§ä»£ç æœç´¢ä¸å¯¼èˆª</h2>
<h3 data-id="heading-24">14. <strong>Vue Language Tools + TypeScript - æ™ºèƒ½ä»£ç å¯¼èˆª</strong></h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// tsconfig.json ä¼˜åŒ–é…ç½®</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"vueCompilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"@vue/language-plugin-pug"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"experimentalRuntimeMode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"runtime-agnostic"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"experimentalTemplateCompilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"isCustomElement"</span><span class="hljs-punctuation">:</span> tag =&gt; tag.startsWith('x-')
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-25">15. <strong>StackBlitz Vueé¡¹ç›® - äº‘ç«¯Vueå¼€å‘ç¯å¢ƒ</strong></h3>
<p>ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„å®Œæ•´Vueå¼€å‘ç¯å¢ƒï¼š</p>
<ul>
<li>æ”¯æŒVite + Vue 3 + TypeScript</li>
<li>GitHubå®æ—¶åŒæ­¥</li>
<li>å®æ—¶åä½œåŠŸèƒ½</li>
<li>è‡ªå®šä¹‰æ¨¡æ¿åˆ†äº«</li>
</ul>
<h2 data-id="heading-26">åã€æ€§èƒ½åˆ†æä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-27">16. <strong>Vue Performance Devtool - ç»„ä»¶æ€§èƒ½åˆ†æ</strong></h3>
<p>ä¸“é—¨é’ˆå¯¹Vueåº”ç”¨çš„æ€§èƒ½åˆ†æå·¥å…·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®‰è£…å’Œä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { createPerformanceMonitor } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-performance-devtool'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">DEV</span>) {
  <span class="hljs-keyword">const</span> monitor = <span class="hljs-title function_">createPerformanceMonitor</span>(app, {
    <span class="hljs-attr">maxComponents</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">trackHooks</span>: <span class="hljs-literal">true</span>
  })
  monitor.<span class="hljs-title function_">start</span>()
}
</code></pre>
<h2 data-id="heading-28">åä¸€ã€çŠ¶æ€ç®¡ç†å¢å¼º</h2>
<h3 data-id="heading-29">17. <strong>Pinia + Pinia Plugin - ç°ä»£åŒ–çŠ¶æ€ç®¡ç†</strong></h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨Piniaæ’ä»¶å¢å¼ºå¼€å‘ä½“éªŒ</span>
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> { createPersistedState } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia-plugin-persistedstate'</span>

<span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()
pinia.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createPersistedState</span>({
  <span class="hljs-attr">storage</span>: <span class="hljs-variable language_">localStorage</span>,
  <span class="hljs-attr">serializer</span>: {
    <span class="hljs-attr">serialize</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-property">stringify</span>,
    <span class="hljs-attr">deserialize</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-property">parse</span>
  }
}))

<span class="hljs-comment">// è‡ªåŠ¨ç”ŸæˆTypeScriptç±»å‹</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">email</span>: <span class="hljs-string">''</span>
  }),
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-attr">displayName</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">name</span> || <span class="hljs-string">'åŒ¿åç”¨æˆ·'</span>
  },
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchUser</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// å¼‚æ­¥æ“ä½œ</span>
    }
  }
})
</code></pre>
<h2 data-id="heading-30">æˆ‘çš„Vueå·¥å…·åŒ–å¼€å‘å“²å­¦</h2>
<p>å·¥å…·é€‰æ‹©çš„æ ¸å¿ƒåŸåˆ™ï¼š</p>
<ol>
<li><strong>Vueç”Ÿæ€ä¼˜å…ˆ</strong> - ä¼˜å…ˆé€‰æ‹©ä¸“é—¨ä¸ºVueä¼˜åŒ–çš„å·¥å…·</li>
<li><strong>ç»„åˆå¼APIå…¼å®¹</strong> - ç¡®ä¿å·¥å…·æ”¯æŒVue 3ç»„åˆå¼API</li>
<li><strong>TypeScriptå‹å¥½</strong> - å®Œæ•´çš„ç±»å‹æ”¯æŒæ˜¯å¿…å¤‡æ¡ä»¶</li>
<li><strong>å¼€å‘ä½“éªŒè‡³ä¸Š</strong> - çƒ­æ›´æ–°é€Ÿåº¦ã€æ™ºèƒ½æç¤ºè´¨é‡æ˜¯å…³é”®</li>
</ol>
<h2 data-id="heading-31">å®æˆ˜ï¼šæ­å»ºVueææ•ˆç³»ç»Ÿ</h2>
<p>æˆ‘å»ºè®®çš„é€æ­¥å®æ–½è®¡åˆ’ï¼š</p>
<p><strong>ç¬¬ä¸€å‘¨</strong>ï¼šé…ç½®Volar + TypeScript + Vue ESLintï¼Œå»ºç«‹å¼€å‘åŸºç¡€<br/>
<strong>ç¬¬äºŒå‘¨</strong>ï¼šé›†æˆPinia + Vue Routerï¼Œæ­å»ºçŠ¶æ€ç®¡ç†å’Œè·¯ç”±<br/>
<strong>ç¬¬ä¸‰å‘¨</strong>ï¼šé…ç½®Vitest + Vue Test Utilsï¼Œå»ºç«‹æµ‹è¯•ä½“ç³»<br/>
<strong>ç¬¬å››å‘¨</strong>ï¼šå¼•å…¥VitePress + ç»„ä»¶è‡ªåŠ¨åŒ–æ–‡æ¡£<br/>
<strong>ç¬¬äº”å‘¨</strong>ï¼šæ ¹æ®å›¢é˜Ÿéœ€æ±‚å®šåˆ¶ä»£ç ç”Ÿæˆå™¨å’Œå·¥ä½œæµ</p>
<h2 data-id="heading-32">ç»“è¯­ï¼šVueå·¥å…·é“¾çš„è¿›åŒ–</h2>
<p>ä»Vue 2åˆ°Vue 3ï¼ŒVueçš„å·¥å…·ç”Ÿæ€ç»å†äº†é©å‘½æ€§çš„å˜åŒ–ã€‚ç°ä»£Vueå¼€å‘ä¸å†æ˜¯ç®€å•çš„æ¨¡æ¿ç¼–å†™ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„å·¥ç¨‹åŒ–ä½“ç³»ã€‚æŒæ¡è¿™äº›å·¥å…·ï¼Œä¸ä»…èƒ½æå‡å¼€å‘æ•ˆç‡ï¼Œæ›´èƒ½æ·±å…¥ç†è§£Vueçš„è®¾è®¡å“²å­¦å’Œæœ€ä½³å®è·µã€‚</p>
<p>çœŸæ­£çš„é«˜çº§Vueå·¥ç¨‹å¸ˆï¼Œä¸ä»…è¦ä¼šå†™ç»„ä»¶ï¼Œæ›´è¦æ‡‚å¾—å¦‚ä½•åˆ©ç”¨å·¥å…·é“¾æ„å»ºå¯ç»´æŠ¤ã€é«˜æ€§èƒ½ã€å›¢é˜Ÿå‹å¥½çš„Vueåº”ç”¨ã€‚</p>
<hr/>
<p><strong>äº’åŠ¨è¯é¢˜</strong>ï¼šä½ åœ¨Vueå¼€å‘ä¸­æœ‰å“ªäº›ç§è—çš„ææ•ˆå·¥å…·ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«äº¤æµï¼å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµæ”¶è—ï¼Œåç»­æˆ‘ä¼šåˆ†äº«æ›´å¤šVue 3å·¥ç¨‹åŒ–å®è·µå’Œæ€§èƒ½ä¼˜åŒ–æŠ€å·§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åå°æœåŠ¡Serviceé”€æ¯é€»è¾‘+å•ä¾‹é€ æˆçš„å†…å­˜æ³„éœ²]]></title>    <link>https://juejin.cn/post/7586983243926863910</link>    <guid>https://juejin.cn/post/7586983243926863910</guid>    <pubDate>2025-12-24T08:41:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586983243926863910" data-draft-id="7587020682011377691" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åå°æœåŠ¡Serviceé”€æ¯é€»è¾‘+å•ä¾‹é€ æˆçš„å†…å­˜æ³„éœ²"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-24T08:41:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GoldenPlayer"/> <meta itemprop="url" content="https://juejin.cn/user/2999123453948119"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åå°æœåŠ¡Serviceé”€æ¯é€»è¾‘+å•ä¾‹é€ æˆçš„å†…å­˜æ³„éœ²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2999123453948119/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GoldenPlayer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T08:41:55.000Z" title="Wed Dec 24 2025 08:41:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ä»½æ€»ç»“å®Œå…¨åŸºäºä½ çš„ <code>GlobalTaskService</code> å’Œ <code>AirIMEngine</code> çš„ç°åœºé—®é¢˜ã€‚æˆ‘ä»¬å°†è¿™ä¸ªé—®é¢˜æ‹†è§£ä¸ºä¸‰ä¸ªæ ¸å¿ƒç»´åº¦ï¼š<strong>ä¿æ´»æœºåˆ¶å¤±æ•ˆ</strong>ã€<strong>å•ä¾‹å†…å­˜æ³„éœ²</strong>ã€<strong>Android 14 åˆè§„é™·é˜±</strong>ã€‚</p>
<p>ä½ å¯ä»¥æŠŠè¿™ä»½æ€»ç»“ä½œä¸ºåç»­å¼€å‘åå°ç±»åº”ç”¨çš„æŠ€æœ¯å¤‡å¿˜å½•ã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€ ç°åœºè¿˜åŸï¼šä¸ºä»€ä¹ˆâ€œæ¯å±å³æ­»ï¼Œäº®å±è¯ˆå°¸â€ï¼Ÿ</h3>
<p><strong>ç°è±¡æè¿°ï¼š</strong>
ä½ è§‚å¯Ÿåˆ° <code>GlobalTaskService</code> åœ¨æ¯å±æ—¶æ‰“å° <code>onDestroy</code>ï¼Œäº®å±æ—¶æ‰“å° <code>onCreate</code>ã€‚ç‰¹åˆ«æ˜¯å½“ IM è¿æ¥å»ºç«‹ï¼ˆæŒæœ‰ Socketï¼‰åï¼Œè¿™ç§ç°è±¡æ›´é¢‘ç¹ã€‚</p>
<p><strong>æ ¸å¿ƒåŸå› ï¼šè¿™ä¹Ÿæ˜¯ Android ç³»ç»Ÿçš„â€œæ€æ‰‹â€é€»è¾‘</strong></p>
<ol>
<li><strong>ä¼ªåå°æœåŠ¡</strong>ï¼šä½ çš„ä»£ç ä¸­ <code>startForeground</code> è¢«æ³¨é‡Šæ‰äº†ã€‚å¯¹ç³»ç»Ÿè€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„åå° Serviceã€‚</li>
<li><strong>çœç”µç­–ç•¥ (Doze Mode)</strong>ï¼šå½“å±å¹•å…³é—­ï¼Œç³»ç»Ÿè¿›å…¥æ‰“ç›¹æ¨¡å¼ã€‚ç³»ç»Ÿæ£€æµ‹åˆ°ä½ çš„ App åœ¨åå°è·‘ç€ï¼Œè¿˜æŒæœ‰ä¸€ä¸ªé«˜è€—ç”µçš„ Socket è¿æ¥ï¼ˆIMï¼‰ï¼Œä½†ç”¨æˆ·ç•Œé¢ä¸Šæ²¡æœ‰ä»»ä½•é€šçŸ¥ï¼ˆNotificationï¼‰æ˜¾ç¤ºä½ åœ¨è¿è¡Œã€‚</li>
<li><strong>ç³»ç»Ÿåˆ¤å®š</strong>ï¼šâ€œè¿™ä¸ª App åœ¨å·å·æ‘¸æ‘¸è€—ç”µï¼Œæ€æ‰å®ƒã€‚â€ -&gt; è§¦å‘ <code>onDestroy</code>ã€‚</li>
<li><strong>è¯ˆå°¸é‡å¯</strong>ï¼šå› ä¸ºä½ åœ¨ <code>onStartCommand</code> è¿”å›äº† <code>START_STICKY</code>ã€‚å½“äº®å±ç³»ç»Ÿèµ„æºå®½è£•æ—¶ï¼Œç³»ç»Ÿä¼šå°è¯•é‡å»ºæœåŠ¡ -&gt; è§¦å‘ <code>onCreate</code>ã€‚</li>
</ol>
<p><strong>ç»“è®º</strong>ï¼šä¸è°ƒç”¨ <code>startForeground</code>ï¼ŒService åœ¨ç°ä»£ Android ç³»ç»Ÿä¸­å°±åƒâ€œæ— è¯é©¾é©¶â€ï¼Œéšæ—¶ä¼šè¢«äº¤è­¦ï¼ˆç³»ç»Ÿï¼‰æ‰£è½¦ã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒã€ éšå½¢æ€æ‰‹ï¼šLambda å¯¼è‡´çš„å†…å­˜æ³„éœ²</h3>
<p><strong>ç°è±¡æè¿°ï¼š</strong>
è™½ç„¶ Service è¢«é”€æ¯é‡å»ºäº†ï¼Œä½†æ—§çš„ Service å°¸ä½“å¹¶æ²¡æœ‰ä»å†…å­˜ä¸­æ¸…é™¤ã€‚</p>
<p><strong>ä»£ç ç°åœºï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// GlobalTaskService.onCreate</span>
AirIMEngine.addMsgObserver { msg, sender -&gt; 
    <span class="hljs-comment">// è¿™ä¸ª Lambda å†…éƒ¨éšå¼æŒæœ‰äº† Service çš„å¼•ç”¨ (this)</span>
    dispatchMsgScene(...) 
}
</code></pre>
<p><strong>æ³„éœ²é€»è¾‘é—­ç¯ï¼š</strong></p>
<ol>
<li><strong>è°æ´»ç€ï¼Ÿ</strong> <code>AirIMEngine</code> æ˜¯ <code>object</code> (å•ä¾‹)ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸ = App è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼ˆå®ƒæ°¸è¿œæ´»ç€ï¼‰ã€‚</li>
<li><strong>è°è¢«æŠ“ä½äº†ï¼Ÿ</strong> å½“ä½ æ³¨å†Œ Lambda æ—¶ï¼Œ<code>AirIMEngine</code> é‡Œçš„åˆ—è¡¨ï¼ˆæˆ–å˜é‡ï¼‰å°±å¼•ç”¨äº†è¿™ä¸ª Lambdaã€‚è€Œ Lambda ä¸ºäº†èƒ½è°ƒç”¨ <code>dispatchMsgScene</code>ï¼Œå¿…é¡»æŒæœ‰ <code>GlobalTaskService</code> çš„å®ä¾‹ã€‚</li>
<li><strong>æ‚²å‰§å‘ç”Ÿï¼š</strong>
<ul>
<li>ç¬¬ä¸€æ¬¡ Service å¯åŠ¨ -&gt; <code>AirIMEngine</code> æŠ“ä½ <code>Service_V1</code>ã€‚</li>
<li>æ¯å±ï¼Œç³»ç»Ÿæ€æ‰ Service -&gt; <code>Service_V1</code> èµ° <code>onDestroy</code>ã€‚<strong>ä½†åœ¨å†…å­˜ä¸­ï¼Œå› ä¸º <code>AirIMEngine</code> è¿˜æŠ“ç€å®ƒï¼Œå®ƒæ— æ³•è¢«å›æ”¶ï¼ˆGCï¼‰ã€‚</strong></li>
<li>äº®å±ï¼ŒService é‡å¯ -&gt; åˆ›å»º <code>Service_V2</code>ã€‚</li>
<li><code>Service_V2</code> å†æ¬¡å‘ <code>AirIMEngine</code> æ³¨å†Œã€‚</li>
</ul>
</li>
<li><strong>ç»“æœ</strong>ï¼šå†…å­˜é‡ŒåŒæ—¶å­˜åœ¨ <code>Service_V1</code> (åƒµå°¸) å’Œ <code>Service_V2</code> (æ´»ä½“)ã€‚å¦‚æœä¸æ”¹ï¼Œåœ¨è¿™ä¸ª App çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œåƒµå°¸ä¼šè¶Šå †è¶Šå¤šã€‚</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒ</strong>ï¼š
ä» Lambda æ”¹ä¸º <strong>æ¥å£ (<code>interface</code>)</strong>ã€‚å› ä¸ºæ¥å£å…è®¸æˆ‘ä»¬æ˜ç¡®åœ°ä¼ å…¥ <code>this</code>ï¼Œä¹Ÿå…è®¸æˆ‘ä»¬åœ¨ <code>onDestroy</code> ä¸­æ˜ç¡®åœ°è°ƒç”¨ <code>removeListener(this)</code>ï¼Œæ‰“æ–­å•ä¾‹å¯¹ Service çš„å¼•ç”¨é“¾ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸‰ã€ åˆè§„é™·é˜±ï¼šAndroid 14 çš„â€œç±»å‹â€å¼ºæ ¡éªŒ</h3>
<p><strong>æ½œåœ¨é£é™©ï¼š</strong>
ä½ çš„ Manifest å£°æ˜äº† <code>foregroundServiceType="phoneCall"</code>ï¼Œè¿™åœ¨ Android 14+ æ˜¯é«˜å±æ“ä½œã€‚</p>
<p><strong>é€»è¾‘å†²çªï¼š</strong></p>
<ol>
<li><strong>åœºæ™¯ Aï¼ˆå¾…æœºï¼‰</strong>ï¼šApp å¯åŠ¨ï¼ŒIM è¿æ¥ä¸­ï¼Œä½†æ²¡æ‰“ç”µè¯ã€‚
<ul>
<li>ç³»ç»Ÿæ£€æŸ¥ï¼šä½ å¯åŠ¨äº†å‰å°æœåŠ¡ï¼Œå£°æ˜æ˜¯ <code>phoneCall</code>ã€‚</li>
<li>ç³»ç»Ÿè´¨é—®ï¼šä½ ç°åœ¨çš„ <code>TelecomManager</code> é‡Œæœ‰é€šè¯ä¼šè¯å—ï¼Ÿ</li>
<li>å›ç­”ï¼šæ²¡æœ‰ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šæŠ›å‡º <code>ForegroundServiceStartNotAllowedException</code> æˆ–ç›´æ¥ Crashã€‚</li>
</ul>
</li>
<li><strong>åœºæ™¯ Bï¼ˆé€šè¯ï¼‰</strong>ï¼šApp çœŸçš„åœ¨è‡ªåŠ¨æ‹¨æ‰“ç”µè¯ã€‚
<ul>
<li>æ­¤æ—¶ç”¨ <code>phoneCall</code> æ‰æ˜¯åˆæ³•çš„ã€‚</li>
</ul>
</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
é‡‡ç”¨ <strong>â€œåŒæ¨¡åˆ‡æ¢â€</strong> ç­–ç•¥ã€‚</p>
<ul>
<li><strong>å¾…æœºæ¨¡å¼</strong>ï¼šä½¿ç”¨ <code>dataSync</code> ç±»å‹ï¼ˆæ•°æ®åŒæ­¥ï¼‰ï¼Œå‘Šè¯‰ç³»ç»Ÿæˆ‘åœ¨ç»´æŒ IM è¿æ¥ï¼Œè¿™æ˜¯åˆæ³•çš„åå°è¡Œä¸ºã€‚</li>
<li><strong>é€šè¯æ¨¡å¼</strong>ï¼šæ£€æµ‹åˆ°æ‹¨å·æŒ‡ä»¤åï¼ŒåŠ¨æ€æ›´æ–° Notificationï¼Œå°†ç±»å‹åˆ‡æ¢ä¸º <code>phoneCall</code>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">å››ã€ æ€»ç»“æ¶æ„å›¾ï¼ˆæŠ€æœ¯å¤ç›˜ï¼‰</h3>
<p>è¿™æ˜¯æˆ‘ä»¬æœ€ç»ˆä¿®å¤åçš„æ¶æ„é€»è¾‘ï¼Œä½ å¯ä»¥å¯¹ç…§ä»£ç ç†è§£ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[GlobalTaskService å¯åŠ¨] --&gt; B(onCreate);
    
    B --&gt; C{ä¿®å¤ç‚¹1: ç«‹å³å¯åŠ¨å‰å°æœåŠ¡};
    C --&gt;|å¾…æœºçŠ¶æ€| D[startForeground type=DATA_SYNC];
    D -- è¯´æ˜ --&gt; E[ç³»ç»Ÿä¸å†æ€åå°, å…è®¸æŒæœ‰Socket];
    
    B --&gt; F{ä¿®å¤ç‚¹2: æ³¨å†ŒIMç›‘å¬};
    F --&gt;|AirIMEngine.addListener this | G[AirIMEngine (å•ä¾‹)];
    G -- å…³é”® --&gt; H[ä½¿ç”¨ WeakReference æˆ– æ˜ç¡®çš„ Remove];
    
    I[æ”¶åˆ°æ‹¨å·æŒ‡ä»¤] --&gt; J{ä¿®å¤ç‚¹3: åŠ¨æ€åˆ‡æ¢ç±»å‹};
    J --&gt; K[æ›´æ–° Notification type=PHONE_CALL];
    K -- è¯´æ˜ --&gt; L[Android 14 å…è®¸ä½¿ç”¨é€šè¯API];
    
    M[GlobalTaskService é”€æ¯] --&gt; N(onDestroy);
    N --&gt; O[AirIMEngine.removeListener this];
    O -- ç»“æœ --&gt; P[æ–­å¼€å¼•ç”¨é“¾, Serviceå†…å­˜æˆåŠŸå›æ”¶];
    N --&gt; Q[stopForeground];
</code></pre>
<h3 data-id="heading-4">æ ¸å¿ƒå¿ƒæ³•ï¼ˆè®°å¿†å£è¯€ï¼‰</h3>
<ol>
<li><strong>è¦ä¿æ´»ï¼Œå¿…å‰å°</strong>ï¼šæ²¡æœ‰ Notification çš„ Service åœ¨æ¯å±æ—¶å°±æ˜¯ç³»ç»Ÿçš„â€œçŒç‰©â€ã€‚</li>
<li><strong>ç”¨å•ä¾‹ï¼Œå¿…æœ‰å€Ÿæœ‰è¿˜</strong>ï¼šåœ¨ <code>onCreate</code> é‡Œ <code>add</code> è¿›å•ä¾‹çš„ä¸œè¥¿ï¼Œå¿…é¡»åœ¨ <code>onDestroy</code> é‡Œ <code>remove</code> æ‰ï¼Œå¦åˆ™å°±æ˜¯å†…å­˜æ³„éœ²ã€‚</li>
<li><strong>Android 14ï¼Œç±»å‹è¦å¯¹ç‰ˆ</strong>ï¼šå¹²ä»€ä¹ˆäº‹æŒ‚ä»€ä¹ˆç‰Œï¼ˆTypeï¼‰ï¼Œæ²¡æ‰“ç”µè¯åˆ«æŒ‚â€œæ­£åœ¨é€šè¯â€çš„ç‰Œå­ï¼Œä¼šè¢«ç³»ç»Ÿå°æ€ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‡ªå®šä¹‰APK&gradleå…¨å±€é…ç½®æ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7587239837972299827</link>    <guid>https://juejin.cn/post/7587239837972299827</guid>    <pubDate>2025-12-24T09:36:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587239837972299827" data-draft-id="7587074669817315354" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‡ªå®šä¹‰APK&amp;gradleå…¨å±€é…ç½®æ–‡ä»¶"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-24T09:36:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GoldenPlayer"/> <meta itemprop="url" content="https://juejin.cn/user/2999123453948119"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‡ªå®šä¹‰APK&amp;gradleå…¨å±€é…ç½®æ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2999123453948119/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GoldenPlayer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:36:19.000Z" title="Wed Dec 24 2025 09:36:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éå¸¸ç†è§£ä½ çš„æ„Ÿå—ï¼Gradle çš„ Groovy è¯­æ³•ç¡®å®ä¹Ÿæ˜¯å¾ˆå¤š Android å¼€å‘è€…çš„â€œå™©æ¢¦â€ã€‚å®ƒå±äºä¸€ç§<strong>åŠ¨æ€è¯­è¨€ DSL (é¢†åŸŸç‰¹å®šè¯­è¨€)</strong>ï¼Œå†™èµ·æ¥çµæ´»ä½†è¯»èµ·æ¥æ™¦æ¶©ï¼Œè€Œä¸” IDE çš„ä»£ç æç¤ºå¾€å¾€ä¹Ÿä¸å¤ªå¥½ç”¨ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç°åœ¨ Google æ­£åœ¨å¤§åŠ›æ¨è¡Œ <strong>KTS (Kotlin DSL)</strong> çš„åŸå› ï¼ˆç”¨ Kotlin å†™ Gradle è„šæœ¬ï¼Œæœ‰ç±»å‹æ£€æŸ¥å’Œè‡ªåŠ¨è¡¥å…¨ï¼‰ã€‚</p>
<p>ä¸‹é¢æˆ‘é’ˆå¯¹ä½ æå‡ºçš„ä¸¤ä¸ªé—®é¢˜ï¼Œç”¨â€œè¯´äººè¯â€çš„æ–¹å¼æ‹†è§£ä¸€ä¸‹å®ƒä»¬çš„åŸç†ã€‚</p>
<hr/>
<h3 data-id="heading-0">ç¬¬ä¸€ä¸ªè¯é¢˜ï¼šè‡ªå®šä¹‰ APK åç§°</h3>
<p>è¿™æ®µä»£ç çœ‹èµ·æ¥å¤æ‚ï¼Œå…¶å®å®ƒæ˜¯ Android Gradle Plugin (AGP) æä¾›çš„ä¸€å¥—<strong>éå†é€»è¾‘</strong>ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">applicationVariants.all { variant -&gt;
    // ...
}
</code></pre>
<h4 data-id="heading-1">åŸç†è§£æï¼š</h4>
<ol>
<li>
<p><strong><code>applicationVariants</code></strong>ï¼š
è¿™æ˜¯ Android æ’ä»¶æä¾›çš„ä¸€ä¸ªé›†åˆï¼Œé‡Œé¢è£…ç€ä½ æ‰€æœ‰çš„â€œå˜ä½“â€ã€‚</p>
<ul>
<li>ä»€ä¹ˆæ˜¯å˜ä½“ï¼Ÿå°±æ˜¯ <code>BuildType</code> (Debug/Release) å’Œ <code>Flavor</code> (æ¸ é“åŒ…) ç»„åˆåçš„äº§ç‰©ã€‚æ¯”å¦‚ï¼š<code>debug</code>, <code>release</code>, <code>demoDebug</code>, <code>fullRelease</code> ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>.all { variant -&gt; ... }</code></strong>ï¼š
è¿™æ˜¯ Groovy çš„è¯­æ³•ï¼Œç›¸å½“äº Java çš„ <code>forEach</code> å¾ªç¯ã€‚å®ƒåœ¨è¯´ï¼šâ€œ<strong>å¯¹äºæ¯ä¸€ä¸ªç”Ÿæˆçš„å˜ä½“ï¼Œéƒ½æ‰§è¡Œä¸‹é¢çš„ä»£ç </strong>â€ã€‚</p>
</li>
<li>
<p><strong><code>variant.outputs.all { ... }</code></strong>ï¼š
æ¯ä¸ªå˜ä½“æœ€ç»ˆå¯èƒ½ä¼šè¾“å‡ºå¤šä¸ªæ–‡ä»¶ï¼ˆè™½ç„¶ç»å¤§å¤šæ•°æƒ…å†µæˆ‘ä»¬åªè¾“å‡ºä¸€ä¸ª APKï¼Œä½† Android æ”¯æŒæ ¹æ® CPU æ¶æ„æˆ–å±å¹•å¯†åº¦æ‹†åˆ†è¾“å‡ºå¤šä¸ª APKï¼‰ã€‚
ä¸ºäº†ä¿é™©èµ·è§ï¼Œè¿™é‡Œåˆåšäº†ä¸€å±‚å¾ªç¯ï¼šâ€œ<strong>å¯¹äºè¿™ä¸ªå˜ä½“ä¸‹çš„æ¯ä¸€ä¸ªè¾“å‡ºæ–‡ä»¶...</strong>â€ã€‚</p>
</li>
<li>
<p><strong><code>outputFileName = "..."</code></strong>ï¼š
è¿™å°±æ˜¯æœ€ç»ˆçš„ç›®çš„ã€‚ä¿®æ”¹è¿™ä¸ªè¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶åå±æ€§ã€‚</p>
</li>
</ol>
<h4 data-id="heading-2">ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™ï¼Ÿ</h4>
<p>å› ä¸º Gradle åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒAPK çš„åç§°æ˜¯åœ¨æ„å»ºçš„ä¸­é€”ç”Ÿæˆçš„ã€‚ä½ ä¸èƒ½ç›´æ¥å†™ <code>outputFileName = "xxx"</code>ï¼Œå¿…é¡»æŒ‚è½½åˆ° <code>variant</code> çš„å¤„ç†æµç¨‹ä¸­ï¼Œç­‰ Gradle ç®—å‡ºå½“å‰æ˜¯å“ªä¸ªå˜ä½“åï¼Œä½ æ‰æœ‰æœºä¼šå»ä¿®æ”¹å®ƒçš„åå­—ã€‚</p>
<p><strong>æ€»ç»“å°±æ˜¯ï¼š</strong></p>
<blockquote>
<p>â€œGradleï¼Œè¯·ç›‘å¬æ„å»ºè¿‡ç¨‹ã€‚æ¯å½“ä½ å‡†å¤‡å¥½ä¸€ä¸ªå˜ä½“ï¼ˆæ¯”å¦‚ Release ç‰ˆï¼‰ï¼Œå°±å»æŠŠé‚£ä¸ªå˜ä½“å³å°†ç”Ÿæˆçš„ APK æ”¹ä¸ªåå­—ï¼Œåå­—æ ¼å¼æˆ‘å®šã€‚â€</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">ç¬¬äºŒä¸ªè¯é¢˜ï¼šç»Ÿä¸€ç‰ˆæœ¬ç®¡ç† (config.gradle)</h3>
<p>ä½ çš„ç†è§£åŸºæœ¬æ˜¯æ­£ç¡®çš„ï¼Œä½†æœ‰ä¸€ç‚¹ç‚¹åå·®ï¼Œæˆ‘æ¥å¸®ä½ ç†æ¸…â€œå®ƒæ˜¯æ€ä¹ˆä¼ å¯¼çš„â€ã€‚</p>
<h4 data-id="heading-4">1. ä¸ºä»€ä¹ˆ <code>config.gradle</code> èƒ½è¢«å¼•ç”¨ï¼Ÿ</h4>
<p>åœ¨ <code>build.gradle</code> (Root) ä¸­ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">apply from: 'config.gradle'
</code></pre>
<p>è¿™å¥è¯çš„æ„æ€æ˜¯ï¼š<strong>æŠŠ <code>config.gradle</code> é‡Œçš„ä»£ç ï¼ŒåŸå°ä¸åŠ¨åœ°æ‹¿è¿‡æ¥ï¼Œåœ¨è¿™ä¸ªä½ç½®æ‰§è¡Œä¸€éã€‚</strong></p>
<p><em>æ³¨æ„ï¼šä½ æåˆ°ä½ æŠŠå®ƒæ”¾åœ¨äº† <code>buildscript { ... }</code> é‡Œé¢ã€‚é€šå¸¸çš„åšæ³•æ˜¯ç›´æ¥æ”¾åœ¨æ–‡ä»¶çš„æœ€å¤–å±‚ã€‚å¦‚æœæ”¾åœ¨ <code>buildscript</code> é‡Œè¿˜èƒ½ç”Ÿæ•ˆï¼Œå¯èƒ½æ˜¯å› ä¸º Groovy çš„ä½œç”¨åŸŸç©¿é€æˆ–è€… Gradle ç‰ˆæœ¬çš„ç‰¹æ€§ï¼Œä½†<strong>æ ‡å‡†åšæ³•æ˜¯æ”¾åœ¨æ ¹ç›®å½• build.gradle çš„ç¬¬ä¸€è¡Œæˆ– buildscript é—­åŒ…ä¹‹å</strong>ã€‚</em></p>
<h4 data-id="heading-5">2. <code>ext { ... }</code> æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p><code>ext</code> æ˜¯ Gradle çš„ä¸€ä¸ªç‰¹æ®Šå±æ€§ï¼Œå…¨ç§°å« <strong>ExtraPropertiesExtension</strong>ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ª <strong>Map (é”®å€¼å¯¹å­—å…¸)</strong>ã€‚
æ‰€æœ‰çš„ Gradle å¯¹è±¡ï¼ˆProject, Task ç­‰ï¼‰éƒ½æœ‰è¿™ä¸ª <code>ext</code>ã€‚</p>
<p>å½“ä½ åœ¨ <code>config.gradle</code> é‡Œå†™ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">ext {
    versionCode = 123
}
</code></pre>
<p>å› ä¸ºè¿™ä¸ªè„šæœ¬æ˜¯åº”ç”¨åœ¨ <strong>Root Project</strong> ä¸Šçš„ï¼Œæ‰€ä»¥ç›¸å½“äºç»™ <strong>æ ¹å·¥ç¨‹å¯¹è±¡</strong> æŒ‚è½½äº†ä¸€ä¸ªå…¨å±€å˜é‡ <code>rootProject.ext.versionCode = 123</code>ã€‚</p>
<h4 data-id="heading-6">3. <code>rootProject.versionCode</code> åŸç†</h4>
<p>åœ¨ä½ çš„ App Module (<code>app/build.gradle</code>) ä¸­ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">versionCode rootProject.versionCode
</code></pre>
<p>è¿™é‡Œçš„é€»è¾‘é“¾æ¡æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li><strong><code>rootProject</code></strong>ï¼šæŒ‡ä»£ä½ çš„æ ¹å·¥ç¨‹å¯¹è±¡ï¼ˆå°±æ˜¯æœ€å¤–å±‚çš„é‚£ä¸ªï¼‰ã€‚</li>
<li><strong><code>.versionCode</code></strong>ï¼šåœ¨ Java/Kotlin ä¸­ï¼Œå¹¶æ²¡æœ‰ <code>versionCode</code> è¿™ä¸ªå­—æ®µã€‚ä½†æ˜¯ Groovy æ˜¯åŠ¨æ€è¯­è¨€ï¼Œå½“å®ƒåœ¨ <code>rootProject</code> å¯¹è±¡é‡Œæ‰¾ä¸åˆ° <code>versionCode</code> å±æ€§æ—¶ï¼Œå®ƒä¼š<strong>è‡ªåŠ¨å» <code>ext</code> é‡Œé¢æ‰¾</strong>ã€‚
<ul>
<li>æ‰€ä»¥ <code>rootProject.versionCode</code> å…¶å®æ˜¯ <code>rootProject.ext.versionCode</code> çš„ç¼©å†™ï¼ˆè¯­æ³•ç³–ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-7">å›ç­”ä½ çš„ç–‘é—®ï¼š</h4>
<blockquote>
<p>è¿™é‡Œ rootProject å°±ä»£è¡¨ config.gradle çš„ ext { äº†æ˜¯å—ï¼Ÿ</p>
</blockquote>
<p><strong>ä¸å®Œå…¨æ˜¯ï¼Œä½†æ•ˆæœä¸€æ ·ã€‚</strong></p>
<ul>
<li><code>rootProject</code> ä»£è¡¨<strong>æ ¹å·¥ç¨‹å¯¹è±¡</strong>ã€‚</li>
<li><code>config.gradle</code> é‡Œçš„å†…å®¹é€šè¿‡ <code>apply from</code> è¢«æ³¨å…¥åˆ°äº†æ ¹å·¥ç¨‹å¯¹è±¡é‡Œçš„ <code>ext</code> å±æ€§ä¸­ã€‚</li>
<li>æ‰€ä»¥ä½ æ˜¯é€šè¿‡æ ¹å·¥ç¨‹å¯¹è±¡ï¼Œè®¿é—®åˆ°äº†è¢«æ³¨å…¥è¿›å»çš„å˜é‡ã€‚</li>
</ul>
<h4 data-id="heading-8">ä¸ºä»€ä¹ˆéªŒè¯æˆåŠŸä½†ä½ ä¸ç¡®å®šï¼Ÿ</h4>
<p>ä½ å®šä¹‰çš„é‚£å‡ ä¸ªæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">def getVersionCode(build){ ... }
</code></pre>
<p>è¿™äº›å®šä¹‰åœ¨ <code>config.gradle</code> é‡Œçš„æ–¹æ³•ï¼Œå› ä¸º <code>apply from</code> çš„ä½œç”¨ï¼Œå˜æˆäº†æ ¹å·¥ç¨‹è„šæœ¬çš„ä¸€éƒ¨åˆ†ã€‚å½“ä½ è°ƒç”¨ <code>ext.versionCode = getVersionCode(...)</code> æ—¶ï¼Œå®ƒåªæ˜¯åœ¨è„šæœ¬æ‰§è¡ŒæœŸé—´è®¡ç®—å‡ºäº†ä¸€ä¸ªæ•´æ•°ï¼Œå¹¶èµ‹å€¼ç»™äº† <code>versionCode</code> å˜é‡ã€‚å­æ¨¡å—æ‹¿åˆ°çš„æ˜¯è®¡ç®—å¥½çš„<strong>ç»“æœï¼ˆé‚£ä¸ªæ•´æ•°ï¼‰</strong>ï¼Œè€Œä¸æ˜¯é‚£ä¸ªå‡½æ•°ã€‚</p>
<hr/>
<h3 data-id="heading-9">æ€»ç»“ä¸å»ºè®®</h3>
<p>Gradle çš„ Groovy è¯­æ³•ç¡®å®å¾ˆâ€œä¹±â€ï¼Œå› ä¸ºå®ƒä¸ä»…æ˜¯é…ç½®ï¼Œè¿˜æ˜¯è„šæœ¬ä»£ç ï¼Œæ··æ‚äº†å£°æ˜å¼ï¼ˆé…ç½®ï¼‰å’Œå‘½ä»¤å¼ï¼ˆé€»è¾‘ï¼‰çš„ä»£ç ã€‚</p>
<p><strong>ç»™ä½ çš„å»ºè®®ï¼š</strong></p>
<ol>
<li>
<p><strong>å…³äº config.gradle çš„å¼•ç”¨ä½ç½®</strong>ï¼š
å»ºè®®å°† <code>apply from: 'config.gradle'</code> ç§»å‡º <code>buildscript {}</code> å—ï¼Œç›´æ¥æ”¾åœ¨æ ¹ç›®å½• <code>build.gradle</code> çš„é¡¶éƒ¨ã€‚è¿™æ ·é€»è¾‘æ›´ç¬¦åˆå®˜æ–¹è§„èŒƒï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">// æ ¹ç›®å½• build.gradle
apply from: 'config.gradle' // æ”¾åœ¨æœ€é¡¶å±‚

buildscript {
   // ...
}
</code></pre>
</li>
<li>
<p><strong>æ‹¥æŠ± Kotlin DSL (KTS)</strong>ï¼š
å¦‚æœä½ è§‰å¾— Groovy å¾ˆéš¾æ‡‚ï¼Œå¦‚æœæ˜¯æ–°é¡¹ç›®ï¼Œå¼ºçƒˆå»ºè®®å°è¯• <strong>Kotlin DSL (<code>build.gradle.kts</code>)</strong>ã€‚</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šä½ å†™çš„ <code>android { ... }</code> éƒ½å¯ä»¥ç‚¹è¿›å»çœ‹æºç ï¼ŒçŸ¥é“é‡Œé¢æœ‰ä»€ä¹ˆå±æ€§ï¼Œéœ€è¦ä»€ä¹ˆç±»å‹ï¼ŒIDE ä¼šæ™ºèƒ½æç¤ºã€‚</li>
<li><strong>Version Catalog</strong>ï¼šç°åœ¨ Android å®˜æ–¹æ¨èç”¨ <code>libs.versions.toml</code> æ–‡ä»¶æ¥ç®¡ç†ç‰ˆæœ¬å·ï¼Œæ¯” <code>config.gradle</code> è¿™ç§æ–¹å¼æ›´æ¸…æ™°ã€æ›´è§„èŒƒï¼ŒAndroid Studio å¯¹å®ƒçš„æ”¯æŒä¹Ÿæ›´å¥½ã€‚</li>
</ul>
</li>
</ol>
<p>ç›®å‰çš„å†™æ³•è™½ç„¶â€œä¹±â€ï¼Œä½†åœ¨è¿™ä¸ªé¡¹ç›®ä¸­æ˜¯å¥æ•ˆä¸”æˆç†Ÿçš„æ–¹æ¡ˆï¼ˆå›½å†…å¾ˆå¤šæ—§é¡¹ç›®éƒ½è¿™ä¹ˆå¹²ï¼‰ï¼Œä½ å¯ä»¥æ”¾å¿ƒåœ°ç»§ç»­ä½¿ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3è‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼šåŸç†å‰–æä¸å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7587017021315399715</link>    <guid>https://juejin.cn/post/7587017021315399715</guid>    <pubDate>2025-12-24T09:42:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587017021315399715" data-draft-id="7587023071067209780" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3è‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼šåŸç†å‰–æä¸å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,three.js"/> <meta itemprop="datePublished" content="2025-12-24T09:42:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç™½èœçš„ç¼–ç¨‹æ—¥è®°"/> <meta itemprop="url" content="https://juejin.cn/user/1302259794456120"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3è‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼šåŸç†å‰–æä¸å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1302259794456120/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç™½èœçš„ç¼–ç¨‹æ—¥è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:42:22.000Z" title="Wed Dec 24 2025 09:42:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="vs2015">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-link,.hljs-literal,.hljs-name,.hljs-symbol{color:#569cd6}.hljs-link{text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-class,.hljs-number{color:#b8d7a3}.hljs-meta-string,.hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta-keyword,.hljs-tag{color:#9b9b9b}.hljs-template-variable,.hljs-variable{color:#bd63c5}.hljs-attr,.hljs-attribute,.hljs-builtin-name{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag{color:#d7ba7d}.hljs-addition{background-color:#144212}.hljs-addition,.hljs-deletion{display:inline-block;width:100%}.hljs-deletion{background-color:#600}</style><blockquote>
<p>Vue3çš„è‡ªå®šä¹‰æ¸²æŸ“å™¨æ˜¯æ¡†æ¶æ¶æ„ä¸­çš„ä¸€é¡¹é©å‘½æ€§ç‰¹æ€§ï¼Œå®ƒæ‰“ç ´äº†Vueåªèƒ½ç”¨äºDOMæ¸²æŸ“çš„é™åˆ¶ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå°†Vueç»„ä»¶æ¸²æŸ“åˆ°ä»»æ„ç›®æ ‡å¹³å°ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Vue3è‡ªå®šä¹‰æ¸²æŸ“å™¨çš„æ ¸å¿ƒåŸç†ï¼Œå¹¶é€šè¿‡TresJSè¿™ä¸ªä¼˜ç§€çš„3Dæ¸²æŸ“åº“æ¥å±•ç¤ºå…¶å®é™…åº”ç”¨ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰æ¸²æŸ“å™¨</h2>
<p>åœ¨ä¼ ç»Ÿçš„Vueåº”ç”¨ä¸­ï¼Œæ¸²æŸ“å™¨è´Ÿè´£å°†Vueç»„ä»¶è½¬æ¢ä¸ºDOMå…ƒç´ ã€‚è€ŒVue3å¼•å…¥çš„è‡ªå®šä¹‰æ¸²æŸ“å™¨APIå…è®¸æˆ‘ä»¬åˆ›å»ºä¸“é—¨çš„æ¸²æŸ“å™¨ï¼Œå°†Vueç»„ä»¶è½¬æ¢ä¸ºä»»æ„ç±»å‹çš„ç›®æ ‡å¯¹è±¡ã€‚TresJSæ­£æ˜¯åˆ©ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œå°†Vueç»„ä»¶è½¬æ¢ä¸ºThree.jsçš„3Då¯¹è±¡ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨å£°æ˜å¼çš„Vueè¯­æ³•æ¥æ„å»º3Dåœºæ™¯ã€‚</p>
<h3 data-id="heading-1">ä¼ ç»ŸDOMæ¸²æŸ“å™¨ vs è‡ªå®šä¹‰æ¸²æŸ“å™¨</h3>
<p>ä¼ ç»ŸDOMæ¸²æŸ“å™¨çš„æ“ä½œæµç¨‹éå¸¸ç›´è§‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue DOMæ¸²æŸ“å™¨æ“ä½œ</span>
<span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)  <span class="hljs-comment">// åˆ›å»ºå…ƒç´ </span>
div.<span class="hljs-property">textContent</span> = <span class="hljs-string">'Hello World'</span>           <span class="hljs-comment">// è®¾ç½®å±æ€§</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div)            <span class="hljs-comment">// æŒ‚è½½åˆ°çˆ¶å…ƒç´ </span>
div.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'red'</span>                   <span class="hljs-comment">// æ›´æ–°å±æ€§</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div)            <span class="hljs-comment">// å¸è½½å…ƒç´ </span>
</code></pre>
<p>è€ŒTresJSçš„è‡ªå®šä¹‰æ¸²æŸ“å™¨æ‰§è¡Œç±»ä¼¼çš„æ“ä½œï¼Œä½†ç›®æ ‡å¯¹è±¡æ˜¯Three.jså¯¹è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// TresJSæ¸²æŸ“å™¨æ“ä½œ</span>
<span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>()                    <span class="hljs-comment">// åˆ›å»ºThree.jså¯¹è±¡</span>
mesh.<span class="hljs-property">material</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>()    <span class="hljs-comment">// è®¾ç½®å±æ€§</span>
scene.<span class="hljs-title function_">add</span>(mesh)                                  <span class="hljs-comment">// æ·»åŠ åˆ°åœºæ™¯</span>
mesh.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)                       <span class="hljs-comment">// æ›´æ–°å±æ€§</span>
scene.<span class="hljs-title function_">remove</span>(mesh)                               <span class="hljs-comment">// ä»åœºæ™¯ç§»é™¤</span>
</code></pre>
<h2 data-id="heading-2">è‡ªå®šä¹‰æ¸²æŸ“å™¨APIæ ¸å¿ƒ</h2>
<p>TresJSçš„è‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼ˆnodeOpsï¼‰å®ç°äº†ä¸€å¥—æ“ä½œæ¥å£ï¼Œå½“Vueéœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œæ—¶ä¼šè°ƒç”¨è¿™äº›æ¥å£ï¼š</p>
<ul>
<li>åˆ›å»ºæ–°çš„Three.jså¯¹è±¡</li>
<li>å°†å¯¹è±¡æ·»åŠ åˆ°åœºæ™¯æˆ–å…¶ä»–å¯¹è±¡ä¸­</li>
<li>æ›´æ–°å¯¹è±¡å±æ€§</li>
<li>ä»åœºæ™¯ä¸­ç§»é™¤å¯¹è±¡</li>
</ul>
<p>è¿™ç§æ¶æ„è®¾è®¡è®©Vueçš„ç»„ä»¶ç³»ç»Ÿä¸å…·ä½“çš„æ¸²æŸ“ç›®æ ‡è§£è€¦ï¼Œä½¿å¾—åŒä¸€ä¸ªç»„ä»¶æ¨¡å‹å¯ä»¥é©±åŠ¨ä¸åŒçš„æ¸²æŸ“åç«¯ã€‚</p>
<h2 data-id="heading-3">å“åº”å¼ç³»ç»Ÿåœ¨3Dæ¸²æŸ“ä¸­çš„æŒ‘æˆ˜</h2>
<p>Vueçš„å“åº”å¼ç³»ç»Ÿè™½ç„¶å¼ºå¤§ï¼Œä½†åœ¨3Dåœºæ™¯ä¸­éœ€è¦è°¨æ…ä½¿ç”¨ã€‚åœ¨60FPSçš„æ¸²æŸ“å¾ªç¯ä¸­ï¼Œä¸å½“çš„å“åº”å¼ä½¿ç”¨ä¼šå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<h3 data-id="heading-4">æ€§èƒ½æŒ‘æˆ˜</h3>
<p>Vueçš„å“åº”å¼åŸºäºJavaScript Proxyï¼Œæ¯æ¬¡å±æ€§è®¿é—®å’Œä¿®æ”¹éƒ½ä¼šè¢«æ‹¦æˆªã€‚åœ¨3Dæ¸²æŸ“å¾ªç¯ä¸­ï¼Œè¿™æ„å‘³ç€æ¯ç§’60æ¬¡è§¦å‘å“åº”å¼ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ è¿™ç§åšæ³•ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜</span>
<span class="hljs-keyword">const</span> position = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> })

<span class="hljs-keyword">const</span> { onBeforeRender } = <span class="hljs-title function_">useLoop</span>()
<span class="hljs-title function_">onBeforeRender</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æ¯ç§’è§¦å‘Vueå“åº”å¼ç³»ç»Ÿ60æ¬¡</span>
  position.<span class="hljs-property">x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() * <span class="hljs-number">0.001</span>) * <span class="hljs-number">3</span>
  position.<span class="hljs-property">y</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() * <span class="hljs-number">0.001</span>) * <span class="hljs-number">2</span>
})
</code></pre>
<p>æ€§èƒ½å¯¹æ¯”æ•°æ®ä»¤äººè­¦é†’ï¼šæ™®é€šå¯¹è±¡çš„å±æ€§è®¿é—®å¯è¾¾æ¯ç§’5000ä¸‡æ¬¡ï¼Œè€Œå“åº”å¼å¯¹è±¡ç”±äºä»£ç†å¼€é”€åªèƒ½è¾¾åˆ°æ¯ç§’200ä¸‡æ¬¡ã€‚</p>
<h3 data-id="heading-5">è§£å†³æ–¹æ¡ˆï¼šæ¨¡æ¿å¼•ç”¨çš„è‰ºæœ¯</h3>
<p>æ¨¡æ¿å¼•ç”¨ï¼ˆTemplate Refsï¼‰æä¾›äº†ç›´æ¥è®¿é—®Three.jså®ä¾‹çš„èƒ½åŠ›ï¼Œé¿å…äº†å“åº”å¼å¼€é”€ï¼Œæ˜¯åŠ¨ç”»å’Œé¢‘ç¹æ›´æ–°çš„æœ€ä½³é€‰æ‹©ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ¨èåšæ³•ï¼šä½¿ç”¨æ¨¡æ¿å¼•ç”¨</span>
<span class="hljs-keyword">const</span> meshRef = <span class="hljs-title function_">shallowRef</span>(<span class="hljs-literal">null</span>)

<span class="hljs-keyword">const</span> { onBeforeRender } = <span class="hljs-title function_">useLoop</span>()
<span class="hljs-title function_">onBeforeRender</span>(<span class="hljs-function">(<span class="hljs-params">{ elapsed }</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (meshRef.<span class="hljs-property">value</span>) {
    <span class="hljs-comment">// ç›´æ¥å±æ€§ä¿®æ”¹ï¼Œæ— å“åº”å¼å¼€é”€</span>
    meshRef.<span class="hljs-property">value</span>.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> = elapsed * <span class="hljs-number">0.5</span>
    meshRef.<span class="hljs-property">value</span>.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> = elapsed * <span class="hljs-number">0.3</span>
    meshRef.<span class="hljs-property">value</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(elapsed) * <span class="hljs-number">2</span>
  }
})
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;TresCanvas&gt;
    &lt;TresPerspectiveCamera :position="[0, 0, 5]" /&gt;
    &lt;TresAmbientLight /&gt;
    
    &lt;!-- æ¨¡æ¿å¼•ç”¨è¿æ¥åˆ°Three.jså®ä¾‹ --&gt;
    &lt;TresMesh ref="meshRef"&gt;
      &lt;TresBoxGeometry /&gt;
      &lt;TresMeshStandardMaterial color="#ff6b35" /&gt;
    &lt;/TresMesh&gt;
  &lt;/TresCanvas&gt;
&lt;/template&gt;
</code></pre>
<h2 data-id="heading-6">æµ…å±‚å“åº”å¼ï¼šå¹³è¡¡çš„è‰ºæœ¯</h2>
<p>å½“éœ€è¦éƒ¨åˆ†å“åº”å¼æ—¶ï¼Œ<code>shallowRef</code>å’Œ<code>shallowReactive</code>æä¾›äº†å®Œç¾çš„å¹³è¡¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… åªè®©é¡¶å±‚å±æ€§å…·æœ‰å“åº”æ€§</span>
<span class="hljs-keyword">const</span> meshProps = <span class="hljs-title function_">shallowReactive</span>({
  <span class="hljs-attr">color</span>: <span class="hljs-string">'#ff6b35'</span>,
  <span class="hljs-attr">wireframe</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">visible</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">position</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> }  <span class="hljs-comment">// è¿™ä¸ªå¯¹è±¡ä¸æ˜¯æ·±åº¦å“åº”å¼çš„</span>
})

<span class="hljs-comment">// UIæ§åˆ¶ä¿®æ”¹å¤–è§‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleWireframe</span> = (<span class="hljs-params"/>) =&gt; {
  meshProps.<span class="hljs-property">wireframe</span> = !meshProps.<span class="hljs-property">wireframe</span>  <span class="hljs-comment">// å“åº”å¼æ›´æ–°</span>
}

<span class="hljs-keyword">const</span> { onBeforeRender } = <span class="hljs-title function_">useLoop</span>()
<span class="hljs-title function_">onBeforeRender</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (meshRef.<span class="hljs-property">value</span>) {
    <span class="hljs-comment">// ç›´æ¥ä½ç½®ä¿®æ”¹ï¼Œæ— å“åº”å¼å¼€é”€</span>
    meshRef.<span class="hljs-property">value</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() * <span class="hljs-number">0.001</span>) * <span class="hljs-number">2</span>
  }
})
</code></pre>
<h2 data-id="heading-7">æœ€ä½³å®è·µæ¨¡å¼</h2>
<h3 data-id="heading-8">1. åˆå§‹å®šä½ä¸åŠ¨ç”»åˆ†ç¦»</h3>
<p>ä½¿ç”¨å“åº”å¼å±æ€§è¿›è¡Œåˆå§‹å®šä½ï¼Œä½¿ç”¨æ¨¡æ¿å¼•ç”¨è¿›è¡ŒåŠ¨ç”»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… å“åº”å¼åˆå§‹çŠ¶æ€</span>
<span class="hljs-keyword">const</span> initialPosition = <span class="hljs-title function_">ref</span>([<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>])
<span class="hljs-keyword">const</span> color = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'#ff6b35'</span>)

<span class="hljs-comment">// âœ… æ¨¡æ¿å¼•ç”¨ç”¨äºåŠ¨ç”»</span>
<span class="hljs-keyword">const</span> meshRef = <span class="hljs-title function_">shallowRef</span>(<span class="hljs-literal">null</span>)

<span class="hljs-keyword">const</span> { onBeforeRender } = <span class="hljs-title function_">useLoop</span>()
<span class="hljs-title function_">onBeforeRender</span>(<span class="hljs-function">(<span class="hljs-params">{ elapsed }</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (meshRef.<span class="hljs-property">value</span>) {
    <span class="hljs-comment">// ç›¸å¯¹äºåˆå§‹ä½ç½®è¿›è¡ŒåŠ¨ç”»</span>
    meshRef.<span class="hljs-property">value</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = initialPosition.<span class="hljs-property">value</span>[<span class="hljs-number">1</span>] + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(elapsed) * <span class="hljs-number">2</span>
  }
})
</code></pre>
<h3 data-id="heading-9">2. è®¡ç®—å±æ€§ä¼˜åŒ–å¤æ‚è®¡ç®—</h3>
<p>å¯¹äºä¸åº”åœ¨æ¯å¸§è¿è¡Œçš„æ˜‚è´µè®¡ç®—ï¼Œä½¿ç”¨è®¡ç®—å±æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… è®¡ç®—å±æ€§åªåœ¨ä¾èµ–æ”¹å˜æ—¶é‡æ–°è®¡ç®—</span>
<span class="hljs-keyword">const</span> orbitPositions = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> positions = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; settings.<span class="hljs-property">objects</span>; i++) {
    <span class="hljs-keyword">const</span> angle = (i / settings.<span class="hljs-property">objects</span>) * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>
    positions.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">x</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(angle) * settings.<span class="hljs-property">radius</span>,
      <span class="hljs-attr">z</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(angle) * settings.<span class="hljs-property">radius</span>
    })
  }
  <span class="hljs-keyword">return</span> positions
})
</code></pre>
<h3 data-id="heading-10">3. åŸºäºç”Ÿå‘½å‘¨æœŸçš„æ›´æ–°</h3>
<p>ä½¿ç”¨Vueçš„ç”Ÿå‘½å‘¨æœŸé’©å­å¤„ç†æ€§èƒ½æ•æ„Ÿçš„æ›´æ–°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> animationState = {
  <span class="hljs-attr">time</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">amplitude</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">frequency</span>: <span class="hljs-number">1</span>
}

<span class="hljs-keyword">const</span> { onBeforeRender } = <span class="hljs-title function_">useLoop</span>()
<span class="hljs-title function_">onBeforeRender</span>(<span class="hljs-function">(<span class="hljs-params">{ delta }</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (!isAnimating.<span class="hljs-property">value</span> || !meshRef.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>
  
  <span class="hljs-comment">// æ›´æ–°éå“åº”å¼çŠ¶æ€</span>
  animationState.<span class="hljs-property">time</span> += delta
  
  <span class="hljs-comment">// åº”ç”¨åˆ°Three.jså®ä¾‹</span>
  meshRef.<span class="hljs-property">value</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(animationState.<span class="hljs-property">time</span> * animationState.<span class="hljs-property">frequency</span>) * animationState.<span class="hljs-property">amplitude</span>
})
</code></pre>
<h2 data-id="heading-11">å¸¸è§é™·é˜±ä¸è§„é¿</h2>
<h3 data-id="heading-12">é™·é˜±1ï¼šåœ¨åŠ¨ç”»ä¸­ä½¿ç”¨å“åº”å¼æ•°æ®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é¿å…ï¼šåœ¨æ¸²æŸ“å¾ªç¯ä¸­ä½¿ç”¨å“åº”å¼å¯¹è±¡</span>
<span class="hljs-keyword">const</span> rotation = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> })

<span class="hljs-title function_">onBeforeRender</span>(<span class="hljs-function">(<span class="hljs-params">{ elapsed }</span>) =&gt;</span> {
  rotation.<span class="hljs-property">x</span> = elapsed * <span class="hljs-number">0.5</span>  <span class="hljs-comment">// æ¯å¸§è§¦å‘Vueå“åº”å¼ç³»ç»Ÿ</span>
  rotation.<span class="hljs-property">y</span> = elapsed * <span class="hljs-number">0.3</span>
})
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨æ¨¡æ¿å¼•ç”¨</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ¨èï¼šç›´æ¥å®ä¾‹æ“ä½œ</span>
<span class="hljs-keyword">const</span> meshRef = <span class="hljs-title function_">shallowRef</span>(<span class="hljs-literal">null</span>)

<span class="hljs-title function_">onBeforeRender</span>(<span class="hljs-function">(<span class="hljs-params">{ elapsed }</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (meshRef.<span class="hljs-property">value</span>) {
    meshRef.<span class="hljs-property">value</span>.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> = elapsed * <span class="hljs-number">0.5</span>
    meshRef.<span class="hljs-property">value</span>.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> = elapsed * <span class="hljs-number">0.3</span>
  }
})
</code></pre>
<h3 data-id="heading-13">é™·é˜±2ï¼šæ·±åº¦å“åº”å¼æ•°ç»„</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é¿å…ï¼šæ·±åº¦å“åº”å¼æ•°ç»„æ›´æ–°</span>
<span class="hljs-keyword">const</span> particles = <span class="hljs-title function_">reactive</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">100</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
  <span class="hljs-attr">position</span>: { <span class="hljs-attr">x</span>: i, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> },
  <span class="hljs-attr">velocity</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> }
})))

<span class="hljs-title function_">onBeforeRender</span>(<span class="hljs-function">() =&gt;</span> {
  particles.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">particle</span>) =&gt;</span> {
    <span class="hljs-comment">// 100ä¸ªå“åº”å¼å¯¹è±¡çš„å¼€é”€æå¤§</span>
    particle.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> += particle.<span class="hljs-property">velocity</span>.<span class="hljs-property">x</span>
  })
})
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šéå“åº”å¼æ•°æ®+æ¨¡æ¿å¼•ç”¨</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ¨èï¼šæ™®é€šå¯¹è±¡+æ¨¡æ¿å¼•ç”¨</span>
<span class="hljs-keyword">const</span> particleData = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">100</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
  <span class="hljs-attr">position</span>: { <span class="hljs-attr">x</span>: i, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> },
  <span class="hljs-attr">velocity</span>: { <span class="hljs-attr">x</span>: (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * <span class="hljs-number">0.1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> }
}))

<span class="hljs-keyword">const</span> particleRefs = <span class="hljs-title function_">shallowRef</span>([])

<span class="hljs-title function_">onBeforeRender</span>(<span class="hljs-function">() =&gt;</span> {
  particleData.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">particle, index</span>) =&gt;</span> {
    <span class="hljs-comment">// æ›´æ–°æ™®é€šå¯¹è±¡æ•°æ®</span>
    particle.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> += particle.<span class="hljs-property">velocity</span>.<span class="hljs-property">x</span>
    
    <span class="hljs-comment">// åº”ç”¨åˆ°Three.jså®ä¾‹</span>
    <span class="hljs-keyword">const</span> mesh = particleRefs.<span class="hljs-property">value</span>[index]
    <span class="hljs-keyword">if</span> (mesh) {
      mesh.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(particle.<span class="hljs-property">position</span>.<span class="hljs-property">x</span>, particle.<span class="hljs-property">position</span>.<span class="hljs-property">y</span>, particle.<span class="hljs-property">position</span>.<span class="hljs-property">z</span>)
    }
  })
})
</code></pre>
<h2 data-id="heading-14">æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–</h2>
<p>ä½¿ç”¨æ€§èƒ½ç›‘æ§å·¥å…·å¦‚<code>@tresjs/leches</code>æ¥å®æ—¶ç›‘æ§FPSï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">TresLeches</span>, useControls } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tresjs/leches'</span>

<span class="hljs-comment">// å¯ç”¨FPSç›‘æ§</span>
<span class="hljs-title function_">useControls</span>(<span class="hljs-string">'fpsgraph'</span>)
</code></pre>
<h2 data-id="heading-15">æ ¸å¿ƒè¦ç‚¹æ€»ç»“</h2>
<p>Vue3è‡ªå®šä¹‰æ¸²æŸ“å™¨ä¸ºè·¨å¹³å°æ¸²æŸ“å¼€è¾Ÿäº†å…¨æ–°çš„å¯èƒ½æ€§ï¼Œä½†åœ¨3Dæ¸²æŸ“è¿™æ ·çš„é«˜æ€§èƒ½åœºæ™¯ä¸­ï¼Œéœ€è¦æ˜æ™ºåœ°é€‰æ‹©å“åº”å¼ç­–ç•¥ï¼š</p>
<ol>
<li><strong>æ¨¡æ¿å¼•ç”¨ä¼˜å…ˆ</strong>ï¼šåœ¨æ¸²æŸ“å¾ªç¯ä¸­ä½¿ç”¨æ¨¡æ¿å¼•ç”¨ç›´æ¥æ“ä½œThree.jså®ä¾‹ï¼Œé¿å…å“åº”å¼å¼€é”€</li>
<li><strong>æµ…å±‚å“åº”å¼</strong>ï¼šå½“éœ€è¦éƒ¨åˆ†å“åº”å¼æ—¶ï¼Œä½¿ç”¨<code>shallowRef</code>å’Œ<code>shallowReactive</code>è·å¾—å¹³è¡¡</li>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šä¿æŒUIçŠ¶æ€çš„å“åº”æ€§å’ŒåŠ¨ç”»çŠ¶æ€çš„éå“åº”æ€§ï¼Œä»¥è·å¾—æœ€ä½³æ€§èƒ½</li>
<li><strong>æŒç»­ç›‘æ§</strong>ï¼šä½¿ç”¨æ€§èƒ½ç›‘æ§å·¥å…·è¯†åˆ«3Dåœºæ™¯ä¸­çš„å“åº”å¼ç“¶é¢ˆ</li>
</ol>
<p>é€šè¿‡ç†è§£å¹¶åº”ç”¨è¿™äº›æ¨¡å¼ï¼Œå¼€å‘è€…å¯ä»¥åˆ›å»ºæ—¢å…·æœ‰Vueå¼€å‘ä½“éªŒä¼˜åŠ¿ï¼Œåˆèƒ½åœ¨é«˜æ€§èƒ½3Dç¯å¢ƒä¸­æµç•…è¿è¡Œçš„åº”ç”¨ã€‚Vue3è‡ªå®šä¹‰æ¸²æŸ“å™¨ä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯ç‰¹æ€§ï¼Œæ›´æ˜¯è¿æ¥å£°æ˜å¼ç¼–ç¨‹ä¸å¤šæ ·åŒ–æ¸²æŸ“ç›®æ ‡çš„æ¡¥æ¢ï¼Œä¸ºå‰ç«¯å¼€å‘å¼€å¯äº†å…¨æ–°çš„åˆ›ä½œç©ºé—´ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æ¸¸ iOS SDK æ”¹ç”¨ CocoaPods é›†æˆ]]></title>    <link>https://juejin.cn/post/7587208390483197958</link>    <guid>https://juejin.cn/post/7587208390483197958</guid>    <pubDate>2025-12-24T08:47:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587208390483197958" data-draft-id="7587208390482837510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æ¸¸ iOS SDK æ”¹ç”¨ CocoaPods é›†æˆ"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2025-12-24T08:47:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LorrestGump"/> <meta itemprop="url" content="https://juejin.cn/user/1822323383742587"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æ¸¸ iOS SDK æ”¹ç”¨ CocoaPods é›†æˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1822323383742587/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LorrestGump
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T08:47:41.000Z" title="Wed Dec 24 2025 08:47:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç›®å‰æ‰‹æ¸¸ iOS SDK æ™®éä½¿ç”¨æ‰‹åŠ¨é›†æˆæ–¹æ¡ˆã€‚ä½†éšç€è¿‘å‡ å¹´å‡ºæµ·çƒ­ï¼ŒSDK éœ€è¦é›†æˆå¤§é‡ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚ AppsFlyerã€Firebaseã€Admobã€Facebookã€Twitterã€AppLovin ç­‰ç­‰ã€‚å…¶ä¸­ä¸€äº›ä¸‰æ–¹åº“ä¸æ”¯æŒ CocoaPods é›†æˆï¼Œæ‰€ä»¥æˆ‘ä¹Ÿéƒ½ä½¿ç”¨æ‰‹åŠ¨é›†æˆã€‚</p>
<p>å› ä¸ºä¸åŒçš„æ¸¸æˆéœ€è¦æ¥å…¥çš„ç¬¬ä¸‰æ–¹åº“ä¸ä¸€æ ·ï¼Œå½“ç”¨ä¸åˆ°çš„æ—¶å€™ï¼ŒSDK é‡Œå°±éœ€è¦å‰”é™¤ç›¸å…³ä»£ç ï¼Œä¸ç„¶ç¼–è¯‘ä¹Ÿä¼šæŠ¥é”™ã€‚æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡å®æ¥è¿›è¡Œå¼€å…³éš”ç¦»ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">define</span> AppsFlyer 1</span>

<span class="hljs-meta">#<span class="hljs-keyword">if</span> AppsFlyer</span>
<span class="hljs-comment">// è°ƒç”¨ç›¸å…³æ¥å£</span>
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre>
<p>åƒè¿™æ ·é€šè¿‡è®¾ç½®Â <code>AppsFlyer</code>Â ä¸º 1 æˆ–è€… 0 æ¥å¯ç”¨å’Œå…³é—­ç›¸å…³ä»£ç ï¼Œå…³é—­æ—¶ç¼–è¯‘å™¨ä¼šè¿‡æ»¤æ‰è¿™äº›ä»£ç ã€‚æ­¤å¤–ï¼Œå½“ä¸åŒçš„æ¸¸æˆæ¥å…¥çš„ SDK å‡ºç°ä¸€äº›é—®é¢˜éœ€è¦æµ‹è¯•æ—¶ï¼Œå°±éœ€è¦é¢‘ç¹æ”¹å‚æ•°ã€æ”¹å®å¼€å…³ã€‚è¿™äº›æ“ä½œç›¸å½“ç¹çï¼Œæ‰€ä»¥æˆ‘éƒ½æ˜¯æ¯ä¸ªåŒ…å¤åˆ¶ä¸€ä»½ SDK ä»£ç è¿›è¡Œè®¾ç½®ï¼Œç”¨ç©ºé—´æ¢æ–¹ä¾¿ã€‚</p>
<p>å¤åˆ¶ SDK æ—¶ä¸‰æ–¹åº“ä¹Ÿä¼šå¤åˆ¶ï¼Œä¸‰æ–¹åº“å¯å ç©ºé—´äº†ã€‚ä»¥è‹¹æœé‚£é‡‘å­èˆ¬çš„å†…å­˜ï¼Œè¿‡ä¸äº†å¤šä¹…ç”µè„‘å­˜å‚¨ç©ºé—´å°±ä¸å¤Ÿç”¨äº†ï¼Œå¿…é¡»å®šæœŸæ¸…ç†ã€‚</p>
<p>éšç€ SDK è¶‹è¿‘ç¨³å®šï¼Œä¸‰æ–¹åº“ä¹Ÿéœ€è¦ä¿æŒæ›´æ–°ï¼Œæˆ‘è®¡åˆ’å°† SDK æ”¹ç”¨ CocoaPods é›†æˆã€‚è¿™æ ·ä¸ç”¨æ¯æ¬¡éƒ½ç”Ÿæˆ SDK å‰¯æœ¬ï¼Œä¹Ÿæ–¹ä¾¿ç ”å‘æ¥å…¥ã€‚</p>
<p>æœ€å¼€å§‹æ˜¯è®¡åˆ’æŠŠ SDK é‡Œçš„ä¸‰æ–¹åº“ç›¸å…³ä»£ç æ‹†åˆ†æˆå•ç‹¬çš„åº“ï¼Œè®©å®ƒä»¬å•ç‹¬å»ä¾èµ–å¯¹åº”çš„ä¸‰æ–¹åº“ï¼Œæä¾›æ¥å£ç»™ SDK è°ƒç”¨ã€‚è¿™æ ·ä¸åŒçš„æ¸¸æˆç”¨åˆ°å“ªä¸ªä¸‰æ–¹åº“å°±å¯¼å…¥å¯¹åº”çš„åº“ï¼Œä¸å†ç”¨ SDK å†…éƒ¨å®å®šä¹‰å¼€å…³ã€‚</p>
<p>å› ä¸ºä¹‹å‰ä»æœªç”¨ Pod æ¥ç®¡ç†è‡ªå·±çš„åº“ï¼Œæˆ‘ä»¥ä¸ºè¿™ä¸ªäº‹åº”è¯¥å¾ˆå¿«å¼„å®Œï¼Œç»“æœæ„å¤–çš„æŠ˜è…¾äº†å¥½é•¿æ—¶é—´â€¦â€¦</p>
<p>æˆ‘é‡åˆ°çš„é—®é¢˜ä¸»è¦å½’ä¸ºä¸¤ç±»ï¼š</p>
<ol>
<li>ä¾èµ–å¯¼è‡´çš„é“¾æ¥å’Œé…ç½®é”™è¯¯ï¼›</li>
<li>é‡å¤å¼•ç”¨è­¦å‘Šï¼ˆå³æŠŠä¾èµ–çš„ä¸‰æ–¹åº“ä»£ç ä¹Ÿç¼–è¯‘åˆ°æˆ‘çš„æ‹†åˆ†åº“é‡Œï¼Œè€Œæ¸¸æˆå·¥ç¨‹é€šè¿‡ Pod ä¹Ÿä¼šå¼•å…¥ä¸€ä»½ï¼‰ã€‚</li>
</ol>
<p>ä»¥ä¸‹æ˜¯æˆ‘å°†å°è£…å±‚ä»é™æ€åº“æ”¹æˆåŠ¨æ€åº“å†æ”¹æˆæºç ä¾èµ–çš„è¿‡ç¨‹å’Œé‡åˆ°çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">1. é™æ€åº“é˜¶æ®µ</h2>
<p>æˆ‘é¦–å…ˆæŠŠ SDK é‡Œçš„ä¸‰æ–¹åº“ç›¸å…³ä»£ç æ‹†åˆ†æˆäº†ä¸€ä¸ªä¸ªé™æ€åº“ï¼Œç›¸å½“äºæŠŠéœ€è¦ç”¨åˆ°çš„ä¸‰æ–¹åº“æ¥å£å°è£…äº†ä¸€å±‚ã€‚ä¸ºä»€ä¹ˆä¸ç”¨åŠ¨æ€åº“ï¼Ÿå› ä¸ºæˆ‘ä¸æƒ³è¦ ipa åŒ…é‡Œçš„ Framework é‡Œæœ‰å¤ªå¤šè‡ªå®šä¹‰åº“ã€‚å¦‚æœæ˜¯é™æ€åº“ï¼Œé‚£è¿™äº›ä»£ç ä¼šç¼–è¯‘åˆ°ä¸»äºŒè¿›åˆ¶é‡Œã€‚</p>
<p>åœ¨é™æ€åº“å¼€å‘å·¥ç¨‹é‡Œæµ‹è¯•ç¼–è¯‘éƒ½æ­£å¸¸ï¼Œä½†åœ¨éªŒè¯Â <code>podspec</code>Â æ—¶æŠ¥å„ç§é”™è¯¯ã€‚åŸå› æ˜¯ä¾èµ–å„ç§ç±»å‹çš„ä¸‰æ–¹åº“å¯¼è‡´çš„å¤æ‚çš„é“¾æ¥å’Œé…ç½®é”™è¯¯ï¼Œè¿˜è¦æºæ‚ä¸åŒç¼–ç¨‹è¯­è¨€ã€‚æŠ˜è…¾äº†ä¸¤ä¸‰å¤©æœ€ç»ˆæ”¾å¼ƒäº†ï¼Œæ”¹ä¸ºåŠ¨æ€åº“ã€‚</p>
<blockquote>
<p><strong>æ³¨</strong>ï¼š<code>podspec</code>Â æ–‡ä»¶å°±æ˜¯åº“çš„é…ç½®å’Œå¯¼å…¥è¯´æ˜ä¹¦ï¼Œéœ€è¦åœ¨é‡Œé¢è®¾ç½®åº“çš„åç§°ã€ç‰ˆæœ¬ã€æ”¯æŒç³»ç»Ÿç‰ˆæœ¬ã€åº“æ–‡ä»¶ä½ç½®ã€ç³»ç»Ÿåº“å’Œä¸‰æ–¹åº“ä¾èµ–ï¼Œä»¥åŠä¸€äº›å·¥ç¨‹é…ç½®å¦‚Â <code>Other Link Flag</code>Â çš„è®¾ç½®ç­‰ã€‚æŠŠè¿™ä¸ªæ–‡ä»¶æˆåŠŸå‘å¸ƒåˆ° Pod åï¼Œå¤§å®¶å°±å¯ä»¥é€šè¿‡ Pod æ¥å¼•å…¥ä½ çš„åº“äº†ã€‚</p>
</blockquote>
<h2 data-id="heading-1">2. åŠ¨æ€åº“é˜¶æ®µ</h2>
<p>æŠŠæ‹†åˆ†åº“æ”¹æˆåŠ¨æ€åº“åï¼Œå°±å°‘äº†å¾ˆå¤šé“¾æ¥å’Œé…ç½®é”™è¯¯ã€‚æœ‰ä¸€éƒ¨åˆ†ä¸‰æ–¹åº“å¹¶æœªæä¾› Pod å¼•å…¥ï¼Œåªæä¾›äº†ä¸‹è½½é“¾æ¥ï¼Œè¿™ç§å°±æ— æ³•è‡ªåŠ¨ä¿æŒæ›´æ–°äº†ï¼Œåªèƒ½æˆ‘æ‰‹åŠ¨å»æ›¿æ¢ä¸‰æ–¹åº“ã€‚</p>
<p>ç†è®ºä¸Šå¯ä»¥åœ¨Â <code>podspec</code>Â é‡Œç›´æ¥æŠŠä¸‰æ–¹åº“çš„ä¸‹è½½é“¾æ¥è®¾ç½®ä¸ºå®ƒä»¬å®˜ç½‘çš„ä¸‹è½½é“¾æ¥ï¼Œå‰ææ˜¯ä»–ä»¬é“¾æ¥ä¿æŒä¸å˜å¹¶ä¸”é‡Œé¢çš„æ–‡ä»¶è·¯å¾„ä¸æ”¹ã€‚ä½†æ˜¯è¿™æ ·æˆ‘æ„Ÿè§‰ä¸å¤ªç¨³ï¼Œæ‰€ä»¥è¿˜æ˜¯æ‰‹åŠ¨æ›¿æ¢æ›´æ–°ã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘çš„åº“éƒ½æ˜¯ç”¨ OC å†™çš„ï¼Œæœ‰ä¸€éƒ¨åˆ†ä¸‰æ–¹åº“æ˜¯ç”¨ Swift å†™çš„æˆ–è€…æ··åˆäº† Swiftï¼Œè¿™ç§æƒ…å†µéœ€è¦åœ¨Â <code>build setting</code>Â é‡Œè°ƒæ•´ä¸€äº›è®¾ç½®ã€‚è¿˜å¥½æœ‰ AI å¯ä»¥é—®ï¼Œä¸ç„¶æœ‰å¾—æŠ˜è…¾äº†ã€‚</p>
<p>SDK å†…éƒ¨ä¹‹å‰ä¼šè°ƒç”¨å¾ˆå¤šä¸‰æ–¹åº“ä»£ç ï¼Œä½†æ˜¯æˆ‘å¸Œæœ›è¿™äº›ä¸‰æ–¹å°è£…å±‚ç‹¬ç«‹äº SDKï¼Œå³ SDK ä¸è¦ä¾èµ–è¿™äº›åº“ã€‚äºæ˜¯åŸæœ¬åœ¨ SDK å†…éƒ¨è°ƒç”¨çš„æ¥å£å°±æ”¾åˆ°å¤–éƒ¨ç”±ç ”å‘æ¥è°ƒç”¨ï¼Œåé¢å‘ç°å¤–éƒ¨æ¥å…¥å˜å¾—å¤æ‚äº†å¥½å¤šã€‚è€Œä¸”å¾ˆå¤šæ¥å£è·Ÿç ”å‘ä¹Ÿæ²¡ä»€ä¹ˆå…³ç³»ï¼Œè¿™æ ·åšå¢åŠ äº†ä»–ä»¬çš„æ¥å…¥éš¾åº¦ï¼Œå’Œæ—§ç‰ˆ SDK æ¥å…¥å˜åŒ–å¾ˆå¤§ã€‚</p>
<p>æˆ‘æŠŠè¿™ä¸ªæƒ…å†µé—®äº†ä¸‹ AIï¼ŒAI ç»™çš„æ–¹æ¡ˆæ˜¯é€šè¿‡ä»£ç†å®ç°ï¼šå³æŠŠ SDK ç”¨åˆ°çš„ä¸‰æ–¹åº“å°è£…å±‚æ–¹æ³•å®šä¹‰æˆä¸€ä¸ªåè®®ï¼Œè®©å°è£…å±‚è‡ªè¡Œé€‰æ‹©å®ç°åè®®é‡Œçš„æ–¹æ³•ã€‚åœ¨ SDK å†…éƒ¨è°ƒç”¨å®ç°äº†ç›¸å…³åè®®æ–¹æ³•çš„ä»£ç†ï¼Œä»£ç†æŒ‡å®šç”±ç ”å‘åœ¨å¤–éƒ¨åˆå§‹åŒ–å°è£…å±‚åè®¾ç½®ã€‚</p>
<p>å½“ç„¶è¿™ä¸ªæ“ä½œåé¢ä¹Ÿçœç•¥äº†ï¼Œæ”¹æˆåœ¨ SDK å†…éƒ¨é€šè¿‡ç‰¹å®šæ–¹æ³•åœ¨åˆ¤æ–­ä¸‰æ–¹å°è£…å±‚ç±»å­˜åœ¨æ—¶åˆ›å»ºå°è£…å±‚å®ä¾‹å¹¶è®¾ç½®ä¸ºä»£ç†ã€‚ç»è¿‡è¿™äº›æ“ä½œï¼ŒSDK æ¥å£å¯¹æ¯”æ—§ç‰ˆå˜åŒ–å°±æ¯”è¾ƒå°äº†ã€‚</p>
<p>objectivec</p>
<pre><code class="hljs language-ini" lang="ini">// é€šè¿‡è¿è¡Œæ—¶è®¾ç½®ä»£ç†
SEL <span class="hljs-attr">sharef</span> = NSSelectorFromString(@<span class="hljs-string">"shared"</span>)<span class="hljs-comment">;</span>
// AppsFlyer
if (NSClassFromString(SDK_APPSFLYER)) {
    <span class="hljs-attr">self.appsFlyerDelegate</span> = [NSClassFromString(SDK_APPSFLYER) performSelector:sharef]<span class="hljs-comment">;</span>
}
</code></pre>
<p>ä»å‰é¢åˆ°è¿™é‡Œï¼Œæˆ‘çš„åº“çš„å¼€å‘å·¥ç¨‹éƒ½æ˜¯ç”¨ CocoaPod æ¥å¼•å…¥çš„ä¸‰æ–¹åº“ã€‚CocoaPod ä¼šåœ¨æˆ‘ç¼–è¯‘æ‹†åˆ†åº“çš„ Target ç”Ÿæˆ framework æ–‡ä»¶æ—¶ï¼ŒæŠŠä¾èµ–çš„ä¸‰æ–¹åº“ä»£ç å’Œæ–‡ä»¶éƒ½æ‰“åŒ…è¿›æ¥ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“æˆ‘å‘å¸ƒåˆ° Pod åç”¨ SDK Demo å·¥ç¨‹æµ‹è¯•æ—¶ä¼šæŠ¥è­¦å‘Šï¼Œå†…å®¹æ˜¯ä¸‰æ–¹åº“åœ¨æˆ‘çš„æ‹†åˆ†åº“é‡Œä¹Ÿæœ‰å®ç°ä»£ç ã€‚åœ¨è¯•äº† AI ç»™çš„å¾ˆå¤šè§£å†³æ–¹æ³•éƒ½æ²¡èƒ½è§£å†³è¿™ä¸ªé—®é¢˜åï¼Œæˆ‘åªèƒ½åœ¨åº“å¼€å‘å·¥ç¨‹é‡Œç§»é™¤äº† Podsï¼Œå°†ä¸‰æ–¹åº“æ”¹ä¸ºæ‰‹åŠ¨å¯¼å…¥ï¼Œä»¥æ­¤é¿å…ä¸‰æ–¹åº“æ‰“è¿›æˆ‘çš„å°è£…åº“é‡Œã€‚</p>
<p>è¿™é‡Œé¢æœ‰ä¸ªæ„å¤–å°±æ˜¯ VKID åº“ï¼ˆä¿„ç½—æ–¯å¾®ä¿¡ï¼‰ä»ç„¶å¾—ç”¨ Pods æ¥å¼•å…¥ï¼Œå› ä¸ºå®ƒæ˜¯ä»¥çº¯ Swift æºç å¯¼å…¥çš„ã€‚æˆ‘åœ¨æ‰‹åŠ¨å¯¼å…¥ Swift æºç æ—¶ä¼šæŠ¥ç¼ºå¤±æŸä¸ªä»£ç æ–‡ä»¶ï¼Œç”¨ Pod å°±æ­£å¸¸ï¼ŒæŒ‰ä½ command èƒ½æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ä»£ç ï¼Œä½†æˆ‘çœ‹ä¸åˆ°å®ƒåœ¨å“ªâ€”â€”æ ¹æœ¬æ²¡æœ‰è·¯å¾„â€¦â€¦</p>
<p>æ­¤æ—¶æˆ‘ä¹Ÿå‘ç°åœ¨ OC åŠ¨æ€åº“é‡Œä¾èµ–çš„ä¸‰æ–¹ Swift åº“ä¼šè¢«æ‰“åŒ…è¿›æ¥ï¼Œè®¾ç½®ä¸ºÂ <code>Do not embed</code>Â ä¹Ÿæ²¡æœ‰ç”¨ã€‚AI ç¡®è®¤äº†è¿™ä¸€ç‚¹å¹¶å»ºè®®æˆ‘æ”¹å›é™æ€åº“â€¦â€¦</p>
<p>æ— å¥ˆæˆ‘æœ€ç»ˆåªèƒ½æŠŠå°è£…åº“æ”¹æˆç”¨ Pod æºä»£ç å¼•å…¥ï¼Œè€Œä¸”è¦æ”¹å°±æŠŠæ‰€æœ‰ä¸‰æ–¹å°è£…åº“éƒ½æ”¹æˆæºç å¼•å…¥ç®—äº†ã€‚</p>
<h2 data-id="heading-2">3. æºä»£ç é˜¶æ®µ</h2>
<p>å½“æˆ‘æŠŠå…¶ä»–å°è£…åº“éƒ½æˆåŠŸå‘å¸ƒåˆ° Pod å®˜æ–¹åï¼Œæœ€åè½®åˆ° VKID æ—¶åˆæŠ¥é”™äº†ã€‚Swift å†™çš„ VKID å¹¶æœªæä¾› OC è°ƒç”¨çš„æ¥å£ï¼Œæˆ‘åœ¨å°è£…å±‚ç”¨Â <code>@objc</code>Â åšäº†ä¸‹æ¡¥æ¥ï¼Œç„¶åç”¨ OC å†™çš„ä¸€ä¸ª Manager ç±»æ¥è°ƒç”¨è½¬æ¥å£ï¼Œå¾ˆåˆç†å§ï¼Ÿè¿™æ ·å°±ä¸è¡Œï¼Œ<code>podspec</code>Â éªŒè¯ä¸é€šè¿‡ã€‚</p>
<p>æŠ˜è…¾æ¥æŠ˜è…¾å»ï¼Œæœ€ç»ˆ AI ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯æŠŠå°è£…å±‚çš„ Swift æ‹†åˆ†å‡ºæ¥å•ç‹¬æˆåº“ï¼Œä¸è¦è·Ÿ OC æ··åˆåœ¨ä¸€èµ·ã€‚æœç„¶æ‹†å¼€åå°±éªŒè¯é€šè¿‡äº†ï¼ŒæˆåŠŸå‘å¸ƒåˆ° Pod å®˜æ–¹ã€‚</p>
<h2 data-id="heading-3">å…³äºåº“ç­¾åå’Œéšç§æ–‡ä»¶</h2>
<p>ä¹‹å‰æ˜¯åŠ¨æ€åº“çš„æ—¶å€™ï¼Œéœ€è¦æŠŠå•ç‹¬ç¼–è¯‘æˆçš„çœŸæœºå’Œæ¨¡æ‹Ÿå™¨ framework åˆå¹¶æˆ xcframeworkï¼Œç„¶åå†å¯¹è¿™äº›åº“è¿›è¡Œç­¾åã€‚åŠ¨æ€åº“ç­¾åæ˜¯è‹¹æœè¿‘ä¸¤å¹´çš„è¦æ±‚ï¼Œä¸ç­¾åæåŒ…ä¼šè¢«æ‰“å›ã€‚æ”¹æˆæºç å¯¼å…¥åå°±çœå»è¿™äº›éº»çƒ¦äº†ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿™ç§æºç åº“çš„éšç§æ–‡ä»¶è¦ä¸è¦åŠ æš‚æ—¶ä¸ç¡®å®šã€‚ç†è®ºä¸Šä¸ç”¨ï¼Œæˆ‘æš‚æœªæåŒ…æµ‹è¯•è¿‡ï¼Œä½† AI å»ºè®®åŠ ä¸Šï¼Œçœ‹äº†ä¸‹ä¸€äº›ä¸‰æ–¹åº“ä¹Ÿæ˜¯åŠ äº†çš„ã€‚</p>
<h2 data-id="heading-4">å…³äº AI</h2>
<p>æˆ‘ç”¨åˆ°çš„ AI ä¸»è¦æ˜¯ DeepSeek å’Œ Geminiï¼Œéƒ½æ˜¯å…è´¹çš„ç‰ˆæœ¬ã€‚ä¹‹å‰ç”¨ AI å…»æˆä¹ æƒ¯å¼€æ–°å¯¹è¯ï¼Œè¿™æ¬¡å’¨è¯¢çš„é—®é¢˜æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä¼šåœ¨ä¸€ä¸ªå¯¹è¯é‡Œç»§ç»­æ¥å›é—®å¾ˆå¤šæ¬¡ï¼Œå‘ç° AI å˜å¼ºå¥½å¤šï¼Œé—®åˆ°åé¢è¿˜ä¼šè®°å¾—å‰é¢çš„æ¨ç†ã€‚</p>
<p>è¯´å¥é¢˜å¤–è¯ï¼ŒAIç¼–ç¨‹éƒ½å‡ºæ¥è¿™ä¹ˆä¹…äº†ï¼ŒXcodeä»ç„¶æ²¡æœ‰å®˜æ–¹æ”¯æŒAIï¼ŒçœŸæ˜¯ä½äººä¸€ç­‰ã€‚éšä¾¿ç”¨ä¸€ä¸‹å…¶ä»–AIç¼–ç¨‹å·¥å…·ï¼Œæ„Ÿè§‰éƒ½ä¸æ˜¯ä¸€ä¸ªæ—¶ä»£çš„ä¸œè¥¿ã€‚è‹¹æœå…¬å¸çš„AIéƒ¨é—¨è²Œä¼¼å†…æ–—ä¸¥é‡ï¼Œè‡³ä»Šæ‹¿ä¸å‡ºåƒæ ·çš„ä¸œè¥¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[KTSè¯­æ³•]]></title>    <link>https://juejin.cn/post/7587254134400450569</link>    <guid>https://juejin.cn/post/7587254134400450569</guid>    <pubDate>2025-12-24T09:43:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587254134400450569" data-draft-id="7587239837972365363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="KTSè¯­æ³•"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-24T09:43:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GoldenPlayer"/> <meta itemprop="url" content="https://juejin.cn/user/2999123453948119"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            KTSè¯­æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2999123453948119/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GoldenPlayer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:43:45.000Z" title="Wed Dec 24 2025 09:43:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…¶å® KTS (Kotlin Script) å¹¶æ²¡æœ‰é‚£ä¹ˆå¯æ€•ï¼Œå®ƒçš„æ ¸å¿ƒé€»è¾‘å’Œ Groovy æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯â€œæ–¹è¨€â€å˜äº†</p>
<p>Groovy åƒæ˜¯<strong>æ–‡è¨€æ–‡æˆ–è€…ç‹‚è‰</strong>ï¼ˆå†™æ„ï¼Œå°‘å†™ä¸€ä¸ªæ‹¬å·ä¹Ÿèƒ½è·‘ï¼Œä½†åœ¨å“ªé‡Œè·‘æˆ‘ä¹Ÿå¾—çŒœï¼‰ï¼›
KTS åƒæ˜¯<strong>æ³•å¾‹æ–‡ä¹¦æˆ–è€…æ¥·ä¹¦</strong>ï¼ˆä¸¥è°¨ï¼Œå¿…é¡»åŠ æ‹¬å·ï¼Œå¿…é¡»åŠ ç­‰å·ï¼Œä½†å“ªé‡Œå†™é”™äº† IDE ç«‹é©¬æ ‡çº¢ï¼‰</p>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ª HelloWorld çº§åˆ«çš„å·¥ç¨‹ï¼Œ<strong>å·¦è¾¹ Groovyï¼Œå³è¾¹ KTS</strong>ï¼Œæ¥ä¸€åœºé¢å¯¹é¢çš„â€œç¿»è¯‘â€</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€ ä¸‰æ¡æ ¸å¿ƒâ€œç¿»è¯‘â€æ³•åˆ™</h3>
<p>åœ¨çœ‹ä»£ç å‰ï¼Œåªéœ€è¦è®°ä½è¿™ä¸‰æ¡æ³•åˆ™ï¼Œå°±èƒ½è¯»æ‡‚ 80% çš„ KTS ä»£ç ï¼š</p>
<ol>
<li><strong>å­—ç¬¦ä¸²å¿…é¡»ç”¨åŒå¼•å·</strong>ï¼š
<ul>
<li>Groovy: <code>'Hello'</code> æˆ– <code>"Hello"</code> éƒ½å¯ä»¥ã€‚</li>
<li>KTS: å¿…é¡»æ˜¯ <code>"Hello"</code>ã€‚</li>
</ul>
</li>
<li><strong>èµ‹å€¼å¿…é¡»ç”¨ <code>=</code></strong>ï¼š
<ul>
<li>Groovy: <code>compileSdkVersion 30</code> (åƒæ˜¯åœ¨å–Šå‘½ä»¤)ã€‚</li>
<li>KTS: <code>compileSdk = 30</code> (è¿™æ˜¯åœ¨ç»™å±æ€§èµ‹å€¼)ã€‚</li>
</ul>
</li>
<li><strong>å‡½æ•°è°ƒç”¨å°½é‡åŠ  <code>()</code></strong>ï¼š
<ul>
<li>Groovy: <code>implementation 'com.xxx'</code>ã€‚</li>
<li>KTS: <code>implementation("com.xxx")</code>ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-1">äºŒã€ æ ¹ç›®å½• build.gradle å¯¹ç…§</h3>
<p>è¿™æ˜¯é¡¹ç›®çš„å…¥å£é…ç½®</p>
<h4 data-id="heading-2">1. å£°æ˜æ’ä»¶ (Plugins)</h4>
<p><strong>Groovy (<code>build.gradle</code>):</strong></p>
<pre><code class="hljs language-groovy" lang="groovy">// ä»¥å‰çš„æ—§å†™æ³•æ˜¯ buildscript { dependencies { classpath ... } }
// ç°åœ¨çš„å†™æ³•ï¼š
plugins {
    id 'com.android.application' version '8.2.0' apply false
    id 'com.android.library' version '8.2.0' apply false
    id 'org.jetbrains.kotlin.android' version '1.9.20' apply false
}
</code></pre>
<p><strong>KTS (<code>build.gradle.kts</code>):</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">plugins {
    <span class="hljs-comment">// åŒºåˆ«1ï¼šå¿…é¡»ç”¨åŒå¼•å·</span>
    <span class="hljs-comment">// åŒºåˆ«2ï¼šå¿…é¡»ç”¨æ‹¬å· id(...)</span>
    id(<span class="hljs-string">"com.android.application"</span>) version <span class="hljs-string">"8.2.0"</span> apply <span class="hljs-literal">false</span>
    id(<span class="hljs-string">"com.android.library"</span>) version <span class="hljs-string">"8.2.0"</span> apply <span class="hljs-literal">false</span>
    id(<span class="hljs-string">"org.jetbrains.kotlin.android"</span>) version <span class="hljs-string">"1.9.20"</span> apply <span class="hljs-literal">false</span>
}
</code></pre>
<p><em>æ„Ÿå—ï¼šè¿™é‡Œå·®åˆ«ä¸å¤§ï¼Œä¸»è¦æ˜¯åŠ äº†æ‹¬å·å’ŒåŒå¼•å·ã€‚</em></p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€ App æ¨¡å— build.gradle å¯¹ç…§ (é‡å¤´æˆ)</h3>
<p>è¿™é‡Œæ˜¯å·®å¼‚æœ€å¤§çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯<strong>IDE æç¤ºä¼˜åŠ¿</strong>ä½“ç°æœ€æ˜æ˜¾çš„åœ°æ–¹</p>
<h4 data-id="heading-4">1. æ’ä»¶å¼•ç”¨</h4>
<p><strong>Groovy:</strong></p>
<pre><code class="hljs language-groovy" lang="groovy">plugins {
    id 'com.android.application'
    id 'kotlin-android'
}
</code></pre>
<p><strong>KTS:</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">plugins {
    id(<span class="hljs-string">"com.android.application"</span>)
    id(<span class="hljs-string">"kotlin-android"</span>)
}
</code></pre>
<h4 data-id="heading-5">2. Android é…ç½®å— (æœ€èƒ½ä½“ç°èµ‹å€¼è¯­æ³•çš„åŒºåˆ«)</h4>
<p><strong>Groovy:</strong></p>
<pre><code class="hljs language-groovy" lang="groovy">android {
    namespace 'com.example.myapp' // åªæœ‰ç©ºæ ¼
    compileSdkVersion 34          // åªæœ‰ç©ºæ ¼

    defaultConfig {
        applicationId "com.example.myapp"
        minSdkVersion 24
        targetSdkVersion 34
        versionCode 1
        versionName "1.0"
    }
    
    // ç­¾åé…ç½®ç­‰...
}
</code></pre>
<p><strong>KTS:</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">android {
    namespace = <span class="hljs-string">"com.example.myapp"</span> <span class="hljs-comment">// å¿…é¡»åŠ  = å·</span>
    compileSdk = <span class="hljs-number">34</span>                 <span class="hljs-comment">// å±æ€§åå˜äº†(æ›´ç®€æ´)ï¼Œä¸”å¿…é¡»åŠ  = å·</span>

    defaultConfig {
        applicationId = <span class="hljs-string">"com.example.myapp"</span>
        minSdk = <span class="hljs-number">24</span>                 <span class="hljs-comment">// å¿…é¡»åŠ  = </span>
        targetSdk = <span class="hljs-number">34</span>              <span class="hljs-comment">// å¿…é¡»åŠ  =</span>
        versionCode = <span class="hljs-number">1</span>
        versionName = <span class="hljs-string">"1.0"</span>
    }
}
</code></pre>
<blockquote>
<p><strong>ğŸ”¥ IDE æç¤ºä¼˜åŠ¿æ—¶åˆ»ï¼š</strong>
åœ¨ KTS ä¸­ï¼Œä½ æŠŠé¼ æ ‡æ”¾åœ¨ <code>compileSdk</code> ä¸Šï¼ŒæŒ‰ Ctrl+å·¦é”®ï¼ˆMac æ˜¯ Cmd+å·¦é”®ï¼‰ï¼Œ<strong>ä½ æ˜¯å¯ä»¥ç‚¹è¿›æºç çš„ï¼</strong>
ä½ ä¼šçœ‹åˆ°å®ƒæ˜¯ <code>BaseExtension</code> ç±»ä¸‹çš„ä¸€ä¸ª <code>var compileSdk: Int</code> å±æ€§ã€‚
<strong>è¿™æ„å‘³ç€ï¼š</strong> å¦‚æœä½ æ•² <code>compileSdk = "34"</code> (å­—ç¬¦ä¸²)ï¼ŒIDE ä¼š<strong>ç›´æ¥çˆ†çº¢</strong>å‘Šè¯‰ä½ ç±»å‹é”™è¯¯ï¼Œè€Œåœ¨ Groovy ä¸­å¯èƒ½è¦ç­‰åˆ°ç¼–è¯‘å¤±è´¥æ‰å‘Šè¯‰ä½ ã€‚</p>
</blockquote>
<h4 data-id="heading-6">3. BuildTypes (æ„å»ºç±»å‹)</h4>
<p>è¿™æ˜¯æœ€å®¹æ˜“è®©äººæ‡µçš„åœ°æ–¹ï¼Œå› ä¸º Groovy å¤ªåŠ¨æ€äº†</p>
<p><strong>Groovy:</strong></p>
<pre><code class="hljs language-groovy" lang="groovy">buildTypes {
    release { // è¿™é‡Œçš„ release æ˜¯å‡­ç©ºå†™å‡ºæ¥çš„ï¼ŒGroovy ä¼šåŠ¨æ€åˆ›å»º
        minifyEnabled true
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
}
</code></pre>
<p><strong>KTS:</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">buildTypes {
    <span class="hljs-comment">// KTS æ˜¯é™æ€è¯­è¨€ï¼Œä¸èƒ½å‡­ç©ºå˜å‡º releaseã€‚</span>
    <span class="hljs-comment">// å¿…é¡»ç”¨ getByName æˆ–è€… create æ¥è·å–å·²ç»å­˜åœ¨çš„ release é…ç½®</span>
    getByName(<span class="hljs-string">"release"</span>) {
        isMinifyEnabled = <span class="hljs-literal">true</span> <span class="hljs-comment">// å¸ƒå°”å€¼é€šå¸¸åŠ  is å‰ç¼€ï¼Œä¸”å¿…é¡»ç”¨ =</span>
        
        <span class="hljs-comment">// å‡½æ•°è°ƒç”¨å¿…é¡»åŠ æ‹¬å·</span>
        proguardFiles(
            getDefaultProguardFile(<span class="hljs-string">"proguard-android-optimize.txt"</span>),
            <span class="hljs-string">"proguard-rules.pro"</span>
        )
    }
}
</code></pre>
<h4 data-id="heading-7">4. ä¾èµ– (Dependencies)</h4>
<p><strong>Groovy:</strong></p>
<pre><code class="hljs language-groovy" lang="groovy">dependencies {
    implementation 'androidx.core:core-ktx:1.12.0'
    implementation 'androidx.appcompat:appcompat:1.6.1'
    testImplementation 'junit:junit:4.13.2'
}
</code></pre>
<p><strong>KTS:</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">dependencies {
    <span class="hljs-comment">// å¿…é¡»åŠ æ‹¬å·ï¼Œå¿…é¡»åŒå¼•å·</span>
    implementation(<span class="hljs-string">"androidx.core:core-ktx:1.12.0"</span>)
    implementation(<span class="hljs-string">"androidx.appcompat:appcompat:1.6.1"</span>)
    testImplementation(<span class="hljs-string">"junit:junit:4.13.2"</span>)
}
</code></pre>
<hr/>
<h3 data-id="heading-8">å››ã€ å›åº”â€œç—›ç‚¹â€ï¼šConfig.gradle åœ¨ KTS é‡Œæ€ä¹ˆåŠï¼Ÿ</h3>
<p>ä¹‹å‰ç”¨äº† <code>config.gradle</code> æ¥ç»Ÿä¸€ç®¡ç†ç‰ˆæœ¬å·ã€‚åœ¨ KTS æ—¶ä»£ï¼ˆä»¥åŠ 2025 å¹´ç°åœ¨çš„æ ‡å‡†ï¼‰ï¼Œæˆ‘ä»¬æœ‰äº†å®˜æ–¹é’¦å®šçš„æ›¿ä»£å“ï¼š<strong>Version Catalog (libs.versions.toml)</strong>ã€‚</p>
<p>è¿™æ¯” <code>config.gradle</code> çˆ½å¤ªå¤šäº†ï¼Œè€Œä¸”æ”¯æŒ KTS çš„ä»£ç æç¤º</p>
<p><strong>1. åˆ›å»º <code>gradle/libs.versions.toml</code> æ–‡ä»¶ï¼š</strong></p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[versions]</span>
<span class="hljs-attr">kotlin</span> = <span class="hljs-string">"1.9.20"</span>
<span class="hljs-attr">coreKtx</span> = <span class="hljs-string">"1.12.0"</span>

<span class="hljs-section">[libraries]</span>
<span class="hljs-attr">androidx-core-ktx</span> = { group = <span class="hljs-string">"androidx.core"</span>, name = <span class="hljs-string">"core-ktx"</span>, version.ref = <span class="hljs-string">"coreKtx"</span> }
</code></pre>
<p><strong>2. åœ¨ KTS ä¸­ä½¿ç”¨ (IDE æ™ºèƒ½æç¤ºç‚¸è£‚)ï¼š</strong></p>
<p>å½“åœ¨ <code>build.gradle.kts</code> é‡Œæ‰“å­—æ—¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">dependencies {
    <span class="hljs-comment">// å½“ä½ æ•²ä¸‹ libs. æ—¶ï¼ŒIDE ä¼šè‡ªåŠ¨å¼¹å‡º androidxï¼Œç„¶åå¼¹å‡º core...</span>
    <span class="hljs-comment">// å°±åƒå†™ Java ä»£ç ä¸€æ ·çˆ½ï¼Œå®Œå…¨ä¸ç”¨å»è®°åå­—ï¼</span>
    implementation(libs.androidx.core.ktx) 
}
</code></pre>
<p>è¿™æ¯”ç”¨ <code>rootProject.ext.versionName</code> è¿™ç§â€œç›²çŒœâ€çš„å†™æ³•è¦å®‰å…¨èˆ’æœå¾—å¤š</p>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>KTS å¹¶æ²¡æœ‰å¢åŠ å¤æ‚åº¦ï¼Œå®ƒåªæ˜¯å¢åŠ äº†<strong>ä¸¥è°¨åº¦</strong></p>
<p><strong>ä¸ºä»€ä¹ˆå€¼å¾—è½¬ï¼Ÿ</strong></p>
<ol>
<li><strong>å†™ä»£ç çš„æ„Ÿè§‰</strong>ï¼šåœ¨å†™ Gradle è„šæœ¬æ—¶ï¼Œä¸å†æ˜¯â€œæŠ„ä»£ç â€ï¼Œè€Œæ˜¯åƒå†™ Kotlin ä¸šåŠ¡ä»£ç ä¸€æ ·ï¼Œæœ‰ç±»ã€æœ‰å¯¹è±¡ã€æœ‰æ–¹æ³•ã€‚</li>
<li><strong>æ’é”™</strong>ï¼šå°‘å†™ä¸ªæ‹¬å·ï¼ŒIDE ç•Œé¢ä¸Šç›´æ¥æ ‡çº¢ï¼Œä¸ç”¨ç­‰åˆ°ç‚¹äº† Run è·‘äº†ä¸€åŠæ‰æŠ¥é”™ã€‚</li>
<li><strong>è·³è½¬</strong>ï¼šæŒ‰ä½ Ctrl/Cmd ç‚¹å‡»ä»»ä½•é…ç½®é¡¹ï¼Œç›´æ¥çœ‹æ–‡æ¡£æºç ï¼Œä¸å†éœ€è¦ç™¾åº¦â€œcompileSdkVersion æ¥å—ä»€ä¹ˆç±»å‹â€ã€‚</li>
</ol>
<p><strong>å»ºè®®</strong>ï¼šä¸‹æ¬¡æ–°å¼€ä¸€ä¸ªå° Demo é¡¹ç›®æ—¶ï¼Œå‹¾é€‰ "Kotlin DSL"ï¼Œç…§ç€ä¸Šé¢çš„å¯¹ç…§è¡¨è¯•ä¸€æ¬¡ï¼Œä¼šå‘ç°â€œçœŸé¦™â€çš„</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°·æ­ŒGemini"Something went wrong"é”™è¯¯è§£å†³æ–¹æ³•ï¼š2æ­¥å¿«é€Ÿè§£é™¤é™åˆ¶ï¼ˆ2025æœ€æ–°æ•™ç¨‹ï¼‰]]></title>    <link>https://juejin.cn/post/7586973107322568744</link>    <guid>https://juejin.cn/post/7586973107322568744</guid>    <pubDate>2025-12-23T22:10:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586973107322568744" data-draft-id="7586869907067093027" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°·æ­ŒGemini&quot;Something went wrong&quot;é”™è¯¯è§£å†³æ–¹æ³•ï¼š2æ­¥å¿«é€Ÿè§£é™¤é™åˆ¶ï¼ˆ2025æœ€æ–°æ•™ç¨‹ï¼‰"/> <meta itemprop="keywords" content="Google,Gemini"/> <meta itemprop="datePublished" content="2025-12-23T22:10:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GPTMirrorsé•œåƒç³»ç»Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3173663916689419"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°·æ­ŒGemini"Something went wrong"é”™è¯¯è§£å†³æ–¹æ³•ï¼š2æ­¥å¿«é€Ÿè§£é™¤é™åˆ¶ï¼ˆ2025æœ€æ–°æ•™ç¨‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3173663916689419/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GPTMirrorsé•œåƒç³»ç»Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T22:10:45.000Z" title="Tue Dec 23 2025 22:10:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<h2 data-id="heading-0">Â å‰è¨€ï¼šGeminiæ— æ³•ä½¿ç”¨ï¼Ÿä¸€åˆ†é’Ÿæ•™ä½ å®Œç¾è§£å†³</h2>
<p>æœ€è¿‘è°·æ­Œçš„<strong>Gemini AI</strong>ç«çˆ†å…¨ç½‘ï¼Œå¸å¼•äº†å¤§é‡ç”¨æˆ·å°è¯•ä½“éªŒã€‚ä½†è®¸å¤šæœ‹å‹åœ¨æ‰“å¼€Geminiæ—¶å´é­é‡äº†ä»¤äººå¤´ç–¼çš„"<strong>Something went wrong</strong>"é”™è¯¯æç¤ºï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚</p>
<p>ç½‘ä¸Šå…³äºGeminiæŠ¥é”™çš„è§£å†³æ–¹æ³•äº”èŠ±å…«é—¨ï¼Œæœ‰äººè¯´è¦å®Œå–„è´¦å·èµ„æ–™ï¼Œæœ‰äººå»ºè®®ç»‘å®šæ‰‹æœºå·ï¼Œä½†è¿™äº›æ–¹æ³•å¾€å¾€æ•ˆæœä¸ä½³ã€‚<strong>æœ¬æ–‡åˆ†äº«ç»è¿‡å®æµ‹æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œåªéœ€2ä¸ªå…³é”®æ­¥éª¤ï¼Œ1åˆ†é’Ÿå³å¯è§£é™¤Geminiä½¿ç”¨é™åˆ¶ã€‚</strong> <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/885131c0a42b45baaad680271cf068ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR1BUTWlycm9yc-mVnOWDj-ezu-e7nw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767167092&amp;x-signature=v3MK64GoPPZByvocsW5F1N0P5Pg%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<h2 data-id="heading-1">Gemini "Something went wrong" é”™è¯¯åŸå› åˆ†æ</h2>
<p>å½“ä½ è®¿é—®Geminiæ—¶å‡ºç°"Something went wrong"æç¤ºï¼Œä¸»è¦åŸå› åŒ…æ‹¬ï¼š</p>
<p>-è´¦å·åœ°åŒºé™åˆ¶æ£€æµ‹</p>
<ul>
<li>IPåœ°å€å¼‚å¸¸</li>
<li>è´¦å·éªŒè¯æœªé€šè¿‡</li>
<li>è®¿é—®èŠ‚ç‚¹è´¨é‡é—®é¢˜</li>
</ul>
<p><strong>é‡ç‚¹æç¤º</strong>ï¼šè§£å†³è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒåœ¨äºä¸¤ä¸ªè¦ç´ â€”â€”<strong>æ­£ç¡®çš„è®¿é—®èŠ‚ç‚¹</strong>å’Œ<strong>ç‰¹å®šçš„æ¿€æ´»é“¾æ¥</strong>ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8a3dbc81bbb460a856504e966a077f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR1BUTWlycm9yc-mVnOWDj-ezu-e7nw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767167092&amp;x-signature=OWbqlsU3WeFUq2o0lFZ5ZeBbxNU%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<h2 data-id="heading-2">è§£å†³æ–¹æ³•ï¼š2æ­¥è§£é™¤Geminiä½¿ç”¨é™åˆ¶</h2>
<h3 data-id="heading-3">æ­¥éª¤ä¸€ï¼šç¡®ä¿ä½¿ç”¨ç¾å›½åŒºåŸŸèŠ‚ç‚¹</h3>
<p><strong>å·¥å…·è¦æ±‚ï¼š</strong></p>
<ul>
<li>å¿…é¡»ä½¿ç”¨<strong>ç¾å›½IPåœ°å€</strong>çš„ç½‘ç»œè®¿é—®å·¥å…·</li>
<li>èŠ‚ç‚¹è´¨é‡ç›´æ¥å†³å®šæˆåŠŸç‡</li>
<li>å»ºè®®é€‰æ‹©ç¨³å®šã€é€Ÿåº¦å¿«çš„ç¾å›½èŠ‚ç‚¹</li>
</ul>
<p><strong>æ“ä½œæç¤ºï¼š</strong></p>
<ol>
<li>è¿æ¥ç¾å›½åœ°åŒºçš„ç½‘ç»œèŠ‚ç‚¹</li>
<li>ç¡®è®¤IPåœ°å€æ˜¾ç¤ºä¸ºç¾å›½åŒºåŸŸ</li>
<li>å¦‚æœç¬¬äºŒæ­¥æ“ä½œå¤±è´¥ï¼Œå°è¯•åˆ‡æ¢ä¸åŒçš„ç¾å›½èŠ‚ç‚¹</li>
<li>ä¼˜è´¨èŠ‚ç‚¹é€šå¸¸ä¸€æ¬¡å³å¯æˆåŠŸ</li>
</ol>
<p>âš ï¸ <strong>é‡è¦æé†’</strong>ï¼šå¦‚æœä½ ä¸äº†è§£ä»€ä¹ˆæ˜¯"ç½‘ç»œè®¿é—®å·¥å…·"ï¼Œå¯èƒ½éœ€è¦å…ˆå­¦ä¹ ç›¸å…³åŸºç¡€çŸ¥è¯†ã€‚</p>
<hr/>
<h3 data-id="heading-4">æ­¥éª¤äºŒï¼šä½¿ç”¨ä¸“ç”¨æ¿€æ´»é“¾æ¥ï¼ˆæ ¸å¿ƒæ­¥éª¤ï¼‰</h3>
<p><strong>å…³é”®é“¾æ¥ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">https://gemini.google.com/gems/create?<span class="hljs-attr">hl</span>=en-US&amp;pli=<span class="hljs-number">1</span>
 
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>è¯¦ç»†æ“ä½œæ­¥éª¤ï¼š</strong></p>
<ol>
<li><strong>æ‰“å¼€é“¾æ¥</strong></li>
</ol>
<ul>
<li>
<p>åœ¨è¿æ¥å¥½ç¾å›½èŠ‚ç‚¹åï¼Œ<strong>å¿…é¡»é€šè¿‡ä¸Šè¿°ä¸“ç”¨é“¾æ¥</strong>è®¿é—®Gemini</p>
<ul>
<li>ä¸è¦ç›´æ¥è®¿é—®Geminié¦–é¡µ</li>
</ul>
</li>
</ul>
<ol>
<li>
<p><strong>ç™»å½•è´¦å·</strong></p>
<ul>
<li>å¦‚æœå·²ç™»å½•Googleè´¦å·ï¼Œä¼šç›´æ¥è¿›å…¥Gemåˆ›å»ºé¡µé¢</li>
<li>æœªç™»å½•åˆ™ç‚¹å‡»ç™»å½•æŒ‰é’®ï¼Œä½¿ç”¨ä½ çš„Googleè´¦å·ç™»å½•</li>
</ul>
</li>
<li>
<p><strong>å¡«å†™Gemä¿¡æ¯</strong></p>
<ul>
<li>
<p>é¡µé¢ä¼šæ˜¾ç¤º3ä¸ªè‹±æ–‡å¡«å†™é€‰é¡¹</p>
</li>
<li>
<p><strong>ç”¨è‹±æ–‡å¡«å†™</strong>è¿™äº›é€‰é¡¹ï¼ˆNameã€Descriptionç­‰ï¼‰</p>
</li>
<li>
<p>å†…å®¹è¦çœŸå®åˆç†ï¼Œä¸è¦éšæ„ä¹±å¡«</p>
</li>
<li>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>Name: <code>My Assistant</code></li>
<li>Description: <code>A helpful AI assistant for daily tasks</code><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06ebd81f02ce40ebbc0d21646c1bf608~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR1BUTWlycm9yc-mVnOWDj-ezu-e7nw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767167092&amp;x-signature=k64x9nseDQqB68gF6YoRd89G7ZU%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</li>
</ul>
</li>
</ul>
</li>
</ol>

<ol>
<li>
<p><strong>ä¿å­˜è®¾ç½®</strong></p>
<ul>
<li>ç‚¹å‡»ä¿å­˜æŒ‰é’®</li>
<li><strong>å¦‚æœå‡ºç°æ— æ³•ä¿å­˜çš„æƒ…å†µ</strong>ï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹è´¨é‡ä¸ä½³ï¼Œéœ€è¦åˆ‡æ¢ç¾å›½èŠ‚ç‚¹é‡è¯•</li>
<li>æˆåŠŸä¿å­˜åï¼Œä½ çš„è´¦å·é™åˆ¶å°±å·²ç»è§£é™¤äº†</li>
</ul>
</li>
<li>
<p><strong>éªŒè¯ç»“æœ</strong></p>
<ul>
<li>ä¿å­˜æˆåŠŸåï¼Œè¿›å…¥Geminiå¯¹è¯é¡µé¢</li>
<li>æ­¤æ—¶åº”è¯¥å¯ä»¥æ­£å¸¸ä½¿ç”¨Geminiè¿›è¡Œå¯¹è¯äº†</li>
</ul>
</li>
</ol>
<h2 data-id="heading-5">å¸¸è§é—®é¢˜è§£ç­”ï¼ˆFAQï¼‰</h2>
<p><strong>Q1: ä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨è¿™ä¸ªç‰¹å®šé“¾æ¥ï¼Ÿ</strong><br/>
A: è¿™ä¸ªé“¾æ¥ä¼šè§¦å‘Geminiçš„Gemåˆ›å»ºåŠŸèƒ½ï¼Œé€šè¿‡è¿™ä¸ªè¿‡ç¨‹å¯ä»¥æ¿€æ´»è´¦å·çš„å®Œæ•´æƒé™ï¼Œç»•è¿‡å¸¸è§„çš„åœ°åŒºé™åˆ¶æ£€æµ‹ã€‚</p>
<p><strong>Q2: å¡«å†™Gemä¿¡æ¯æ—¶æœ‰ä»€ä¹ˆæ³¨æ„äº‹é¡¹ï¼Ÿ</strong><br/>
A: åŠ¡å¿…ç”¨è‹±æ–‡å¡«å†™ï¼Œå†…å®¹è¦åˆç†çœŸå®ï¼Œä¸è¦ä½¿ç”¨éšæœºå­—ç¬¦æˆ–æ˜æ˜¾è™šå‡çš„ä¿¡æ¯ï¼Œè¿™å¯èƒ½å¯¼è‡´ä¿å­˜å¤±è´¥ã€‚</p>
<p><strong>Q3: å¦‚æœå¤šæ¬¡åˆ‡æ¢èŠ‚ç‚¹ä»ç„¶å¤±è´¥æ€ä¹ˆåŠï¼Ÿ</strong><br/>
A: å»ºè®®æ›´æ¢ç½‘ç»œè®¿é—®å·¥å…·ï¼Œé€‰æ‹©è´¨é‡æ›´å¥½ã€æ›´ç¨³å®šçš„ç¾å›½èŠ‚ç‚¹æœåŠ¡ã€‚</p>
<p><strong>Q4: è§£é™¤é™åˆ¶åä¼šä¸ä¼šå†æ¬¡å‡ºç°é—®é¢˜ï¼Ÿ</strong><br/>
A: æ­£å¸¸æƒ…å†µä¸‹ï¼ŒæˆåŠŸæ¿€æ´»åè´¦å·å°±å¯ä»¥ç¨³å®šä½¿ç”¨ã€‚ä½†å»ºè®®åœ¨ä½¿ç”¨Geminiæ—¶ä»ä¿æŒç¾å›½èŠ‚ç‚¹è¿æ¥ã€‚</p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>è§£é™¤Gemini "Something went wrong"é”™è¯¯çš„<strong>æ ¸å¿ƒè¦ç‚¹</strong>ï¼š</p>
<p>âœ… ä½¿ç”¨<strong>ç¾å›½åŒºåŸŸ</strong>çš„ä¼˜è´¨ç½‘ç»œèŠ‚ç‚¹<br/>
âœ… é€šè¿‡<strong>ä¸“ç”¨æ¿€æ´»é“¾æ¥</strong>è®¿é—®ï¼š<code>https://gemini.google.com/gems/create?hl=en-US&amp;pli=1</code><br/>
âœ… <strong>ç”¨è‹±æ–‡</strong>çœŸå®å¡«å†™Gemåˆ›å»ºä¿¡æ¯<br/>
âœ… æˆåŠŸä¿å­˜åå³å¯æ­£å¸¸ä½¿ç”¨Gemini</p>
<p>æŒ‰ç…§æœ¬æ•™ç¨‹æ“ä½œï¼Œå¤§éƒ¨åˆ†ç”¨æˆ·éƒ½èƒ½åœ¨1åˆ†é’Ÿå†…æˆåŠŸè§£é™¤Geminiä½¿ç”¨é™åˆ¶ã€‚å¦‚æœä½ æˆåŠŸäº†ï¼Œæ¬¢è¿ç‚¹èµåˆ†äº«æœ¬æ•™ç¨‹ï¼</p>
<p>å¯¹äºåŠ¨æ‰‹èƒ½åŠ›ä¸å¼ºï¼Œä¸æƒ³æŠ˜è…¾çš„å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ•™ç¨‹ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">https:<span class="hljs-comment">//chat.gptmirrors.com/gemini-web-login-cn.html</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.jsçš„package.json]]></title>    <link>https://juejin.cn/post/7587023071067521076</link>    <guid>https://juejin.cn/post/7587023071067521076</guid>    <pubDate>2025-12-24T09:48:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587023071067521076" data-draft-id="7587256133790761000" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.jsçš„package.json"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-24T09:48:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å·¦Pythonå³Java"/> <meta itemprop="url" content="https://juejin.cn/user/4107431173952525"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.jsçš„package.json
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4107431173952525/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å·¦Pythonå³Java
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:48:33.000Z" title="Wed Dec 24 2025 09:48:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>package.json</code> æ˜¯ <strong>Node.js</strong> å’Œå‰ç«¯é¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ª <strong>JSON æ ¼å¼</strong> çš„æ–‡ä»¶ï¼Œç”¨æ¥æè¿°é¡¹ç›®çš„å…ƒæ•°æ®ã€ä¾èµ–ã€è„šæœ¬ç­‰ä¿¡æ¯ã€‚</p>
<p>ä¸‹é¢æˆ‘ç»™ä½ ä¸€ä¸ª <strong>å®Œæ•´ç¤ºä¾‹</strong> å’Œ <strong>è¯¦ç»†è§£æ</strong>ï¼Œæ–¹ä¾¿ä½ å¿«é€ŸæŒæ¡ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. åŸºæœ¬ä½œç”¨</h2>
<ul>
<li><strong>é¡¹ç›®æè¿°</strong>ï¼ˆåç§°ã€ç‰ˆæœ¬ã€ä½œè€…ç­‰ï¼‰</li>
<li><strong>ä¾èµ–ç®¡ç†</strong>ï¼ˆç”Ÿäº§ä¾èµ–ã€å¼€å‘ä¾èµ–ï¼‰</li>
<li><strong>è„šæœ¬å‘½ä»¤</strong>ï¼ˆ<code>npm run xxx</code>ï¼‰</li>
<li><strong>å·¥å…·é…ç½®</strong>ï¼ˆå¦‚ ESLintã€Babelã€TypeScript ç­‰ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-1">2. ç¤ºä¾‹ <code>package.json</code></h2>
<pre><code class="hljs language-perl" lang="perl">Json
{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"my-node-app"</span>,                <span class="hljs-regexp">//</span> é¡¹ç›®åç§°ï¼ˆå¿…é¡»å°å†™ã€æ— ç©ºæ ¼ï¼‰
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,                   <span class="hljs-regexp">//</span> ç‰ˆæœ¬å·ï¼ˆéµå¾ª semver è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰
  <span class="hljs-string">"description"</span>: <span class="hljs-string">"A sample Node.js app"</span>,<span class="hljs-regexp">//</span> é¡¹ç›®æè¿°
  <span class="hljs-string">"main"</span>: <span class="hljs-string">"index.js"</span>,                   <span class="hljs-regexp">//</span> å…¥å£æ–‡ä»¶
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"module"</span>,                     <span class="hljs-regexp">//</span> æ¨¡å—ç±»å‹: <span class="hljs-string">"commonjs"</span> æˆ– <span class="hljs-string">"module"</span> (ESM)
  <span class="hljs-string">"scripts"</span>: {                          <span class="hljs-regexp">//</span> npm è„šæœ¬å‘½ä»¤
    <span class="hljs-string">"start"</span>: <span class="hljs-string">"node index.js"</span>,
    <span class="hljs-string">"dev"</span>: <span class="hljs-string">"nodemon index.js"</span>,
    <span class="hljs-string">"test"</span>: <span class="hljs-string">"node test.js"</span>
  },
  <span class="hljs-string">"keywords"</span>: [<span class="hljs-string">"node"</span>, <span class="hljs-string">"example"</span>],      <span class="hljs-regexp">//</span> å…³é”®è¯ï¼ˆæ–¹ä¾¿ npm æœç´¢ï¼‰
  <span class="hljs-string">"author"</span>: <span class="hljs-string">"Your Name"</span>,                <span class="hljs-regexp">//</span> ä½œè€…
  <span class="hljs-string">"license"</span>: <span class="hljs-string">"MIT"</span>,                     <span class="hljs-regexp">//</span> è®¸å¯è¯
  <span class="hljs-string">"dependencies"</span>: {                     <span class="hljs-regexp">//</span> ç”Ÿäº§ä¾èµ–
    <span class="hljs-string">"express"</span>: <span class="hljs-string">"^4.18.2"</span>
  },
  <span class="hljs-string">"devDependencies"</span>: {                  <span class="hljs-regexp">//</span> å¼€å‘ä¾èµ–
    <span class="hljs-string">"nodemon"</span>: <span class="hljs-string">"^3.0.1"</span>
  },
  <span class="hljs-string">"engines"</span>: {                           <span class="hljs-regexp">//</span> Node ç‰ˆæœ¬è¦æ±‚
    <span class="hljs-string">"node"</span>: <span class="hljs-string">"&gt;=18.0.0"</span>
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-2">3. å¸¸ç”¨å­—æ®µè¯´æ˜</h2>





















































<table><thead><tr><th>å­—æ®µ</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>name</code></td><td>åŒ…åï¼ˆnpm å‘å¸ƒæ—¶ä½¿ç”¨ï¼‰</td></tr><tr><td><code>version</code></td><td>ç‰ˆæœ¬å·ï¼ˆè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼šä¸».æ¬¡.è¡¥ä¸ï¼‰</td></tr><tr><td><code>description</code></td><td>é¡¹ç›®æè¿°</td></tr><tr><td><code>main</code></td><td>å…¥å£æ–‡ä»¶ï¼ˆ<code>require()</code> é»˜è®¤åŠ è½½ï¼‰</td></tr><tr><td><code>type</code></td><td>æ¨¡å—ç±»å‹ï¼ˆ<code>commonjs</code> æˆ– <code>module</code>ï¼‰</td></tr><tr><td><code>scripts</code></td><td>è‡ªå®šä¹‰å‘½ä»¤ï¼ˆ<code>npm run xxx</code>ï¼‰</td></tr><tr><td><code>dependencies</code></td><td>ç”Ÿäº§ç¯å¢ƒä¾èµ–</td></tr><tr><td><code>devDependencies</code></td><td>å¼€å‘ç¯å¢ƒä¾èµ–</td></tr><tr><td><code>peerDependencies</code></td><td>å¯¹ç­‰ä¾èµ–ï¼ˆæ’ä»¶/åº“å¸¸ç”¨ï¼‰</td></tr><tr><td><code>engines</code></td><td>æŒ‡å®š Node/npm ç‰ˆæœ¬</td></tr><tr><td><code>license</code></td><td>å¼€æºåè®®</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-3">4. å¸¸ç”¨å‘½ä»¤</h2>
<pre><code class="hljs language-csharp" lang="csharp">Bash
<span class="hljs-meta"># åˆå§‹åŒ– package.json</span>
npm <span class="hljs-keyword">init</span> -y

<span class="hljs-meta"># å®‰è£…ç”Ÿäº§ä¾èµ–</span>
npm install express

<span class="hljs-meta"># å®‰è£…å¼€å‘ä¾èµ–</span>
npm install nodemon --save-dev

<span class="hljs-meta"># è¿è¡Œè„šæœ¬</span>
npm run start
npm run dev
</code></pre>
<hr/>
<h2 data-id="heading-4">5. ç‰ˆæœ¬å·è§„åˆ™ï¼ˆSemVerï¼‰</h2>
<ul>
<li><code>^1.2.3</code>ï¼šå…è®¸ <strong>æ¬¡ç‰ˆæœ¬</strong> å’Œ <strong>è¡¥ä¸ç‰ˆæœ¬</strong> æ›´æ–°ï¼ˆ<code>1.x.x</code>ï¼‰</li>
<li><code>~1.2.3</code>ï¼šå…è®¸ <strong>è¡¥ä¸ç‰ˆæœ¬</strong> æ›´æ–°ï¼ˆ<code>1.2.x</code>ï¼‰</li>
<li><code>1.2.3</code>ï¼šå›ºå®šç‰ˆæœ¬</li>
<li><code>*</code>ï¼šä»»æ„ç‰ˆæœ¬ï¼ˆä¸æ¨èï¼‰</li>
</ul>
<hr/>
<p>å¦‚æœä½ éœ€è¦ï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™ä¸€ä¸ª <strong>æœ€å°å¯è¿è¡Œçš„ Node.js é¡¹ç›®</strong>ï¼Œå¸¦ <code>package.json</code>ã€<code>index.js</code> å’Œ <code>npm scripts</code>ï¼Œç›´æ¥ <code>npm start</code> å°±èƒ½è·‘ã€‚<br/>
ä½ è¦æˆ‘å¸®ä½ åšè¿™ä¸ªå—ï¼Ÿè¿™æ ·ä½ å¯ä»¥ç›´æ¥è¿è¡Œæµ‹è¯•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®æµ‹MiniMax M2.1ä¹‹åï¼Œæˆ‘ä»¬ç»ˆäºçœ‹æ‡‚äº†å…¶æ‹›è‚¡ä¹¦é‡Œçš„æŠ€æœ¯åº•æ°”]]></title>    <link>https://juejin.cn/post/7587062584165744678</link>    <guid>https://juejin.cn/post/7587062584165744678</guid>    <pubDate>2025-12-24T09:49:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587062584165744678" data-draft-id="7587239837972447283" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®æµ‹MiniMax M2.1ä¹‹åï¼Œæˆ‘ä»¬ç»ˆäºçœ‹æ‡‚äº†å…¶æ‹›è‚¡ä¹¦é‡Œçš„æŠ€æœ¯åº•æ°”"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-12-24T09:49:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®æµ‹MiniMax M2.1ä¹‹åï¼Œæˆ‘ä»¬ç»ˆäºçœ‹æ‡‚äº†å…¶æ‹›è‚¡ä¹¦é‡Œçš„æŠ€æœ¯åº•æ°”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:49:52.000Z" title="Wed Dec 24 2025 09:49:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ä¸¤å¤©ï¼Œä¸­å›½ AI è¡Œä¸šå…³æ³¨çš„æ ¸å¿ƒæ— ç–‘æ˜¯ MiniMaxã€‚</p>
<p>12 æœˆ 21 æ—¥ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2651008283%26idx%3D1%26sn%3D3af861ba41b67370e75a305b8a20adea%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2651008283&amp;idx=1&amp;sn=3af861ba41b67370e75a305b8a20adea&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">MiniMaxï¼ˆç¨€å®‡ç§‘æŠ€ï¼‰æ­£å¼å‘æ¸¯äº¤æ‰€é€’äº¤æ‹›è‚¡ä¹¦</a>ï¼ŒæŠ«éœ²çš„ä¸€è¿ä¸²æ•°å­—ç¬é—´å¼•çˆ†äº†èˆ†è®ºåœºï¼šè´¦ä¸Šåæ‹¥è¶…Â 10 äº¿ç¾å…ƒçš„ç°é‡‘å‚¨å¤‡ï¼Œ2025 å¹´å‰ä¹ä¸ªæœˆè¥æ”¶åŒæ¯”æ¿€å¢Â 174.7%ï¼Œè€Œåœ¨ä¿æŒé«˜å¼ºåº¦ç ”å‘çš„åŒæ—¶ï¼Œç»è°ƒæ•´å‡€äºæŸæ§åˆ¶åœ¨Â 1.86 äº¿ç¾å…ƒã€‚</p>
<p>èµ„æœ¬å¸‚åœºçš„å–§åš£è¿˜æ²¡ç»“æŸï¼Œ23 æ—¥ï¼ŒMiniMax åˆåæ‰‹ç”©å‡ºäº†ä¸€å¼ æŠ€æœ¯ç‰Œï¼šæ­£å¼ä¸Šçº¿Â MiniMax M2.1Â æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0b311858fb340a1b46d83396dfb8297~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174592&amp;x-signature=j6ycm3QI%2F7h7AGmKaTO%2BtefLFEo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™å¹¶éä¸€æ¬¡å¸¸è§„çš„ç‰ˆæœ¬è¿­ä»£ã€‚æ ¹æ®å®˜æ–¹æŠ«éœ²çš„ä¿¡æ¯ï¼ŒM2.1 åœ¨ SWE-bench Multilingual å¤šè¯­è¨€è¯„æµ‹ä¸­ä»¥ 72.5% çš„æˆç»©æ‹¿ä¸‹äº† SOTAï¼Œè¶…è¶Šäº† Gemini 3 Pro å’Œ Claude Sonnet 4.5ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e08fc874552248e68c16e231b73c75e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174592&amp;x-signature=tv23JFBxSg26opL6fpAl2NUajO0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒä¸å†å±€é™äº Python æˆ–å‰ç«¯ä»£ç çš„ç”Ÿæˆï¼Œè€Œæ˜¯å‘Â Rustã€Javaã€C++ ç­‰æ›´å¹¿æ³›çš„åç«¯è¯­è¨€å‘èµ·äº†è¿›æ”»ï¼Œè¯•å›¾è§£å†³è¿‡å¾€æ¨¡å‹ã€Œå†™å¾—åƒä½†è·‘ä¸é€šã€ã€ã€Œç¼ºä¹å·¥ç¨‹æ„Ÿã€çš„ç—›ç‚¹ã€‚</p>
<p>åŒæ—¶ï¼ŒM2.1 å¤§å¹…å¼ºåŒ–äº†åŸç”Ÿ Android å’Œ iOS çš„å¼€å‘èƒ½åŠ›ï¼Œæ‰“å‡ºäº†ã€ŒNot only vibe WebDev, but also vibe AppDevã€çš„å£å·ã€‚</p>
<p>ä¸ä»…å¦‚æ­¤ï¼Œä¸ºäº†ç»™è¿™ç§ã€Œä»é›¶åˆ°ä¸€ã€çš„å…¨æ ˆèƒ½åŠ›æä¾›ç¡¬æ ¸æ”¯æ’‘ï¼ŒMiniMax è¿˜æ„å»ºå¹¶å¼€æºäº†å…¨æ–°åŸºå‡†Â VIBEï¼ˆVisual &amp; Interactive Benchmark for Execution in Application Developmentï¼‰ã€‚ä¸åŒäºä¼ ç»ŸåŸºå‡†ï¼ŒVIBE æ¶µç›–äº† Webã€ä»¿çœŸã€Androidã€iOS åŠåç«¯äº”å¤§æ ¸å¿ƒå­é›†ï¼Œå¹¶å¼•å…¥åˆ›æ–°çš„Â Agent-as-a-Verifier (AaaV)Â èŒƒå¼ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è¯„ä¼°ç”Ÿæˆçš„ Application åœ¨çœŸå®è¿è¡Œç¯å¢ƒä¸­çš„äº¤äº’é€»è¾‘ä¸è§†è§‰ç¾æ„Ÿã€‚åœ¨è¿™åœºã€Œå…¨æ ˆæ„å»ºã€çš„ç»ˆææµ‹è¯•ä¸­ï¼ŒM2.1 ä»¥å¹³å‡ 88.6 åˆ†çš„æˆç»©å±•ç°äº†å“è¶Šå®åŠ›ï¼Œä¸ä»…åœ¨å‡ ä¹æ‰€æœ‰å­é›†ä¸Šæ˜¾è‘—ä¼˜äº Claude Sonnet 4.5ï¼Œæ›´é€¼è¿‘äº† Claude Opus 4.5 çš„æ°´å‡†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc17dd5bc33447db8f5df4a62169ccfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174592&amp;x-signature=hiyc3ReAdgUPe33qQf1%2FoIoXaKc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åŒæ—¶ï¼Œå‡­å€Ÿå¼ºå¤§çš„äº¤é”™æ€ç»´ä¸æŒ‡ä»¤è·Ÿéšèƒ½åŠ›ï¼ŒMiniMax M2.1 è¿˜èƒ½é›†æˆã€Œå¤åˆæŒ‡ä»¤çº¦æŸã€ï¼Œä»è€Œå¯ä»¥æ›´è½»æ¾åœ°å®ŒæˆåŠå…¬è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚</p>
<p>æ›´ä»¤å¼€å‘è€…æƒŠå–œçš„æ˜¯å…¶è½åœ°çš„é€Ÿåº¦ä¸å¹¿åº¦ï¼šM2.1 ç¬¬ä¸€æ—¶é—´å°±å¯æ— ç¼é›†æˆè‡³ Claude Codeã€Cursor ç­‰ä¸»æµ AI ç¼–ç¨‹å·¥å…·ä¸­ã€‚</p>
<p>é…åˆæ›´å¿«çš„å“åº”é€Ÿåº¦ã€æ›´ç®€æ´çš„æ€ç»´é“¾ä»¥åŠå¤§å¹…é™ä½çš„ token æ¶ˆè€—ï¼Œå®ƒæ˜¾ç„¶æ˜¯æœ‰å¤‡è€Œæ¥ï¼Œæ„åœ¨ç›´æ¥åˆ‡å…¥å¼€å‘è€…çš„æ ¸å¿ƒå·¥ä½œæµã€‚</p>
<p>è¿™ç§ã€Œä»Šå¤©ç§€è‚Œè‚‰ï¼Œæ˜å¤©äº®æŠ€æœ¯ã€çš„èŠ‚å¥æ˜¾ç„¶ä¸æ˜¯å·§åˆã€‚åœ¨å¤–ç•Œè¿˜åœ¨äº‰è®ºä¸€å®¶æˆç«‹åˆšå››å¹´çš„å…¬å¸ä¸ºä½•èƒ½è·‘å‡ºå¦‚æ­¤æƒŠäººçš„ IPO é€Ÿåº¦æ—¶ï¼ŒMiniMax M2.1 çš„å‘å¸ƒåˆ™æ˜¯ä¸€ç§æœ‰åŠ›çš„å›åº”ï¼šå®ƒè¯•å›¾ç”¨æ¨¡å‹çš„è¿­ä»£é€Ÿåº¦ï¼Œæ¥è¯ é‡Šæ‹›è‚¡ä¹¦é‡Œé«˜æ•ˆç ”å‘çš„æ•°å­—æŒ‡æ ‡ï¼Œä»¥åŠä¸ºä½•è¿™å®¶å…¬å¸å€¼å¾—ä¼—å¤šæ˜æ˜ŸæŠ•èµ„äººçš„ä¿¡ä»»ä¸å¤šè½®æŠ•èµ„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90a88e30710045f996b1c2a84d5c1bf8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174592&amp;x-signature=rzWsSZUtc1VUWRjSE6Cwk7JwOVU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½œä¸ºä¸€å®¶é•¿æœŸå…³æ³¨ AI æŠ€æœ¯çš„åª’ä½“ï¼Œåœ¨è¿™ä¸€æ³¢å–§åš£è¿‡åçš„ 48 å°æ—¶é‡Œï¼Œæˆ‘ä»¬æ‹¿åˆ° M2.1 çš„æ¥å£ï¼ŒæŠŠå®ƒæ‰”è¿›äº†å¼€å‘ç¯å¢ƒä¸­ï¼Œç”¨çœŸå®çš„ä»»åŠ¡å¯¹å…¶è¿›è¡Œäº†è€ƒéªŒã€‚</p>
<p>æ¯•ç«Ÿï¼Œæ‹›è‚¡ä¹¦æ˜¯ç»™æŠ•èµ„äººçœ‹çš„é¢å­ï¼Œè€Œæ¨¡å‹èƒ½åŠ›æ‰æ˜¯å¼€å‘è€…çœŸé‡‘ç™½é“¶æŠ•ç¥¨çš„é‡Œå­ã€‚è¿™ä»½ä½“éªŒæŠ¥å‘Šæˆ–å¯æˆä¸ºæ´è§è¿™å®¶å…¬å¸çœŸå®æŠ€æœ¯åº•è•´çš„åˆ‡å£ã€‚</p>
<p>å®æµ‹ï¼šä»åç§‘åˆ°å…¨èƒ½</p>
<p>åœ¨è¿‡å»å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œï¼ŒMiniMax ç»™å¼€å‘è€…çš„å°è±¡å¾€å¾€å¸¦ç€é²œæ˜çš„æ ‡ç­¾ï¼šå®ƒçš„è¯­éŸ³åˆæˆæå…¶é€¼çœŸï¼Œè§†é¢‘ç”Ÿæˆçš„è¡¨ç°åŠ›å¤‡å—èµèª‰ï¼ˆæµ·èºï¼‰ï¼Œè§’è‰²æ‰®æ¼”èƒ½åŠ›ä¹Ÿåœ¨ C ç«¯åº”ç”¨ï¼ˆå¦‚æ˜Ÿé‡ï¼‰ä¸­å¤§æ”¾å¼‚å½©ã€‚å¦‚æœè¯´å¤§æ¨¡å‹ç­çº§é‡Œæœ‰ç‰¹é•¿ç”Ÿï¼Œé‚£ä¹ˆ MiniMax ä»¥å‰æ›´åƒæ˜¯ä¸€ä¸ªæå…·å¤©èµ‹çš„æ–‡ç§‘ç”Ÿæˆ–è‰ºæœ¯ç”Ÿã€‚</p>
<p>ç„¶è€Œï¼Œè¦æ”¯æ’‘èµ·æ‹›è‚¡ä¹¦ä¸­æç»˜çš„ AGI è“å›¾ï¼Œå…‰æœ‰æƒ…å•†å¯ä¸å¤Ÿã€‚åœ¨ä¼ä¸šçº§åº”ç”¨å’Œå¤æ‚çš„ç”Ÿäº§åŠ›åœºæ™¯ä¸­ï¼Œæ¨ç†èƒ½åŠ›å’Œæ¨¡å‹ä½¿ç”¨å·¥å…·çš„èƒ½åŠ›æ‰æ˜¯æ£€éªŒæ¨¡å‹æ™ºå•†çš„ç¡¬é€šè´§ã€‚æ­¤å‰ï¼Œå¿…é¡»æ‰¿è®¤çš„æ˜¯ï¼Œä½œä¸ºå¼€æºæ¨¡å‹ï¼ŒM2 ä¸ Claude Sonnet 4.5 æˆ– GPT-5 (thinking) ç­‰å›½é™…é¡¶å°–æ¨¡å‹ç›¸æ¯”ï¼Œåœ¨éƒ¨åˆ†ä»»åŠ¡ä¸Šç¡®å®è¿˜å·®ç‚¹æ„æ€ã€‚</p>
<p>è¿™ä¹Ÿæ­£æ˜¯ M2.1 å‘å¸ƒçš„æˆ˜ç•¥æ„ä¹‰æ‰€åœ¨ï¼šä¸€æ¬¡é’ˆå¯¹æ€§çš„è¿›åŒ–ã€‚</p>
<p>ä¸ºäº†éªŒè¯ M2.1 æ˜¯å¦çœŸçš„è¡¥é½äº†ç¼–ç¨‹è¿™å—çŸ­æ¿ï¼Œæˆ‘ä»¬å†³å®šè·³è¿‡é‚£äº›åŸºç¡€çš„ã€Œå†™é¦–è—å¤´è¯—ã€æˆ–ã€Œç”»ä¸ªè´ªåƒè›‡ã€ï¼Œç›´æ¥å°†å®ƒç½®äºçœŸå®çš„å¼€å‘è€…è§†è§’ä¸‹ï¼Œä»¥äº†è§£å…¶åœ¨ä»£ç é‡æ„ã€å¤æ‚é€»è¾‘è§„åˆ’ç­‰æ–¹é¢çš„çœŸå®è¡¨ç°ã€‚</p>
<p>é¦–å…ˆæ¥ä¸€ä¸ªç›¸å¯¹ç®€å•çš„ä»»åŠ¡ï¼šè™¾ä»æ¨¡æ‹Ÿå™¨ï¼Œçœ‹çœ‹æˆ‘ä»¬èƒ½å¦åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šæ‰®æ¼”è¿™ä½å†ç»æ— æ•°ä¸–ç•Œçš„ç©¿è¶Šè€…ã€‚é¦–å…ˆï¼Œæ„å»ºä¸€ä¸ªç®€å•çš„æç¤ºè¯ï¼š</p>
<blockquote>
<p>æˆ‘æƒ³æ„å»ºä¸€ä¸ªè™¾ä»æ¨¡æ‹Ÿå™¨å°æ¸¸æˆï¼Œæ ¸å¿ƒä¸»é¢˜æ˜¯ï¼šä½ æ˜¯è™¾ä»ï¼Œä½ åˆç©¿è¶Šäº†ã€‚æ¸¸æˆå†…å®¹æ˜¯ä¸»è§’è™¾ä»ç©¿è¶Šåˆ°ä¸åŒçš„æœä»£æˆ–è€…ä¸–ç•Œï¼ˆæ¯”å¦‚ä¸§å°¸ä¸–ç•Œã€ä¿®ä»™ä¸–ç•Œã€èµ›åšä¸–ç•Œï¼‰ï¼Œæ¸¸æˆåå°ä½¿ç”¨ AI: MiniMax-M2.1ã€‚è¯·å…ˆè§„åˆ’è¿™ä¸ªé¡¹ç›®ï¼Œè®©æˆ‘é€‰æ‹©æ¸¸æˆæ–¹å¼å’ŒæŠ€æœ¯æ ˆç­‰ï¼Œå¹¶å°†ä»»åŠ¡è§„åˆ’æ”¾å…¥ task.md æ–‡ä»¶ã€‚</p>
</blockquote>
<p>åœ¨ Claude Code é…ç½®å¥½ MiniMax M2.1 ä¹‹åï¼Œç›´æ¥è¾“å…¥æç¤ºè¯å¼€å§‹æ„å»ºï¼</p>
<p>4 å€é€Ÿè§†é¢‘ï¼ˆä»¥ä¸‹è§†é¢‘éƒ½æ˜¯ 4 å€é€Ÿï¼‰</p>
<p>æ•´ä¸ªè¿‡ç¨‹è€—æ—¶ä¸åˆ° 6 åˆ†é’Ÿã€‚ç»™è¿™ä¸ªå°æ¸¸æˆé…ç½®å¥½ APIï¼Œæ¥åˆæ­¥è¯•è¯•æ•ˆæœï¼š</p>
<p>å‘½ä»¤è¡Œçš„ç•Œé¢ç©èµ·æ¥æ€»å½’æ˜¯ä¸æ–¹ä¾¿ï¼Œä¹Ÿä¸ç¾ä¸½ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­æ¨è¿›ï¼Œè®© MiniMax M2.1 å¼€å‘ä¸€ä¸ªç›´è§‚å¥½çœ‹çš„ UIã€‚</p>
<p>ç»™è¿™ä¸ªæ¸¸æˆå¼€å‘ä¸€ä¸ªæ¼‚äº®çš„ç½‘é¡µ UIï¼Œæ•´ä½“ä½¿ç”¨åƒç´ é£æ ¼ï¼Œä½¿ç”¨è«å…°è¿ªè‰²ç³»é…è‰²ã€‚ä½¿ç”¨ JavaScriptã€‚æ”¯æŒæ·±è‰²å’Œæµ…è‰²æ¨¡å¼åˆ‡æ¢ã€‚ç•Œé¢ä¸ŠåŠ ä¸€ä¸ªéšæœºç©¿è¶Šçš„æŒ‰é’®ã€‚</p>
<p>è¿™ä¸‹ï¼Œæ•ˆæœå¥½å¤šäº†ã€‚MiniMax M2.1 çš„å®¡ç¾ç€å®åœ¨çº¿ï¼</p>
<p>ä½ ç”šè‡³èƒ½ä¸€å¥è¯å°±åˆ›å»ºå‡ºä¸€ä¸ªç‚«é…·çš„ä¸ªäººä¸»é¡µï¼š</p>
<p>MiniMax M2.1 ä¸ºæ¼«å¨è¶…çº§è‹±é›„é»‘å¯¡å¦‡åˆ›å»ºçš„ä¸ªäººä¸»é¡µ</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¤§å¹…æå‡ä»»åŠ¡éš¾é¢˜ï¼Œæ¥è€ƒéªŒä¸€ä¸‹ MiniMax M2.1 çš„å¤šè¯­è¨€ç¼–ç¨‹èƒ½åŠ›ã€‚æˆ‘ä»¬æ„æƒ³ä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„ä»»åŠ¡ï¼Œå¹¶åœ¨ AI çš„è¾…åŠ©ä¸‹æ’°å†™äº†ä¸€ä¸ªæç¤ºè¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/542fc01e6eef41509f34b05d825626a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174592&amp;x-signature=jttNmbzjiBeYImYzTZ5g3vfIdIA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶åæˆ‘ä»¬å°†å…¶æ”¾å…¥ä»»åŠ¡æ–‡ä»¶å¤¹çš„ã€Œä»»åŠ¡.mdã€æ–‡ä»¶ä¸­ï¼Œç›´æ¥ç»™å‡ºæ‰§è¡ŒæŒ‡ä»¤ï¼š</p>
<blockquote>
<p>è¯»å–æ–‡ä»¶å¤¹ä¸­çš„ä»»åŠ¡.md æ–‡ä»¶å¹¶å®ç°è¿™ä¸ªé¡¹ç›®ã€‚</p>
</blockquote>
<p>è¿™ä¸ªä»»åŠ¡çš„éš¾åº¦è¾ƒå¤§ï¼ŒMiniMax M2.1 å¹¶æ²¡æœ‰ä¸€è¹´è€Œå°±ï¼Œä½†æ•´ä¸ªè¿‡ç¨‹éå¸¸æ¥è¿‘çœŸå®çš„å¼€å‘ä½“éªŒã€‚åœ¨ä¸å…¶è¿›è¡Œå¤šè½®äº’åŠ¨åï¼Œå®ƒæœ€ç»ˆäº¤å‡ºäº†ä¸€ä»½ä»¤äººæ»¡æ„çš„ç­”å·ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬é‡åˆ°äº†å¤šæ¬¡æŠ¥é”™ï¼Œä¾‹å¦‚ crates.io é•œåƒæºé—®é¢˜å¯¼è‡´æ— æ³•ä¸‹è½½ç»„ä»¶ã€Go è¯­è¨€ä¸­ % è¿ç®—ç¬¦ä¸èƒ½ç”¨äº float64 è€Œéœ€æ”¹ç”¨ math.Mod () å‡½æ•°ç­‰ã€‚</p>
<p>ä»¤äººæƒŠå–œçš„æ˜¯ï¼Œè¿™äº›é—®é¢˜å¹¶æ²¡æœ‰æˆä¸ºé˜»ç¢ã€‚æˆ‘ä»¬åªéœ€å°†æŠ¥é”™ä¿¡æ¯ç›´æ¥åé¦ˆç»™ MiniMax M2.1ï¼Œå®ƒå°±èƒ½è¿…é€Ÿç†è§£ä¸Šä¸‹æ–‡ï¼Œè‡ªåŠ¨å®Œæˆä¿®å¤å·¥ä½œï¼Œå¹¶ç¼–å†™äº†å„ä¸ªæ¨¡å—çš„å•å…ƒæµ‹è¯•ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬ç»§ç»­è®© MiniMax M2.1 å°†è¿™ä¸‰ä¸ªä½¿ç”¨ä¸åŒè¯­è¨€ç¼–å†™çš„æ¨¡å—è¿æ¥äº†èµ·æ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35bab9aeec7148a2b41100113bd74331~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174592&amp;x-signature=byoauEpWS3Us%2F0S43L2kIkCCZNY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ€ç»ˆï¼Œæˆ‘ä»¬å¾—åˆ°äº†è¿™æ ·ä¸€ä¸ªç³»ç»Ÿï¼š</p>
<p>å·¦ä¾§ä¸º React å‰ç«¯ï¼Œå³ä¸Šä¸º Go è¯­è¨€å†™çš„ç½‘å…³ï¼Œå³ä¸‹ä¸º Rust å†™çš„æ ¸å¿ƒç¨‹åº</p>
<p>æˆ‘ä»¬è¿˜è¿›è¡Œäº†å…¶å®ƒä¸€äº›å®æµ‹ï¼ŒåŒ…æ‹¬å°†å¤šå¹´å‰çš„ C++ æ¸¸æˆåº“é‡æ„ä¸º Python ç‰ˆæœ¬ã€ä¿®æ”¹äº†ä¸€ä¸ª Obsidian æ’ä»¶ã€ä¸€ä¸ªè¾…åŠ©å‘æ¨æ–‡çš„å°å·¥å…·ä»¥åŠä¸€ä¸ªã€ŒæŠ€èƒ½åƒè±†äººã€å°æ¸¸æˆã€‚</p>
<p>æŠ€èƒ½åƒè±†äººå¢åŠ äº†æŠ€èƒ½è±†ï¼Œåƒä¸‹åå¯ä»¥è·å¾—æŠ€èƒ½ï¼Œæ¯”å¦‚è¿™é‡Œçš„ç©¿å¢™èƒ½åŠ›</p>
<p>è¿™äº›å®æµ‹è¯æ˜ï¼ŒMiniMax M2.1 ä¸ä»…èƒ½å†™ä»£ç ï¼Œæ›´èƒ½åƒä¸€ä¸ªæˆç†Ÿçš„å·¥ç¨‹å¸ˆä¸€æ ·è§£å†³é—®é¢˜ã€‚</p>
<p>æŠ€æœ¯ä¸å•†ä¸šçš„äº’æ–‡</p>
<p>å½“æˆ‘ä»¬æŠŠè§†çº¿ä» IDE ç¼–è¾‘å™¨çš„ä»£ç çª—å£ç§»å¼€ï¼Œé‡æ–°å®¡è§†é‚£ä»½æ•°ç™¾é¡µçš„æ‹›è‚¡ä¹¦æ—¶ï¼Œä¼šå‘ç° M2.1 çš„å‘å¸ƒå…¶å®æ˜¯è§£è¯» MiniMax å•†ä¸šé€»è¾‘çš„ä¸€æŠŠå…³é”®é’¥åŒ™ã€‚</p>
<p>åœ¨å¤–ç•Œçœ‹æ¥ï¼Œæˆ–è®¸æ‹›è‚¡ä¹¦æ˜¯è´¢åŠ¡æ•°å­—çš„æ¸¸æˆï¼Œè€Œæ¨¡å‹å‘å¸ƒæ˜¯æŠ€æœ¯åœˆçš„ç‹‚æ¬¢ã€‚ä½†åœ¨ MiniMax è¿™é‡Œï¼Œä¸¤è€…æ„æˆäº†ç´§å¯†çš„äº’æ–‡å…³ç³»ã€‚</p>
<p>ç ”å‘æ æ†ç‡ï¼šæ‰“ç ´ã€Œçƒ§é’±æ¢å¢é•¿ã€çš„é­”å’’</p>
<p>æ‹›è‚¡ä¹¦ä¸­æœ‰ä¸€ä¸ªå®¹æ˜“è¢«å¿½è§†ä½†æå…·å«é‡‘é‡çš„æ•°æ®å¯¹æ¯”ï¼š2025 å¹´å‰ä¹ä¸ªæœˆï¼ŒMiniMax çš„è¥æ”¶åŒæ¯”å¢é•¿äº† 174.7%ï¼Œä½†åŒæœŸç ”å‘è´¹ç”¨ä»…å¢é•¿äº†çº¦ 30%ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/904c138d6d264aabb7310f080cbca181~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174592&amp;x-signature=9Hjy%2F5Bil33b1MHhHcny3WPV9pQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªæ˜¾è‘—çš„ã€Œå‰ªåˆ€å·®ã€ä¿®æ­£äº†å¤–ç•Œå¯¹äºå¤§æ¨¡å‹å…¬å¸ã€Œç ”å‘æ— åº•æ´ã€çš„åˆ»æ¿å°è±¡ã€‚å®ƒæ­ç¤ºäº†ä¸€ä¸ªå…³é”®äº‹å®ï¼šMiniMax å·²ç»è·‘é€šäº†é«˜æ•ˆçš„ç ”å‘æ¨¡å¼ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼Œå…¬å¸ä¸å†éœ€è¦çº¿æ€§åœ°å †ç ŒäººåŠ›å’Œç®—åŠ›èµ„æºæ¥æ¢å–æ¨¡å‹èƒ½åŠ›çš„æå‡ã€‚M2.1 çš„è¯ç”Ÿå°±æ˜¯æœ€å¥½çš„ä½è¯ï¼šåœ¨ç ”å‘æŠ•å…¥å¢é€Ÿè¿œä½äºè¥æ”¶å¢é€Ÿçš„å‰æä¸‹ï¼ŒMiniMax ä¾ç„¶ä¿æŒäº†æé«˜çš„è¿­ä»£é¢‘ç‡ï¼Œåœ¨çŸ­æ—¶é—´å†…å¡«è¡¥äº†ä»£ç å’Œé€»è¾‘æ¨ç†çš„çŸ­æ¿ã€‚å¯¹äºäºŒçº§å¸‚åœºæŠ•èµ„è€…è€Œè¨€ï¼Œè¿™ç§ä¸éšè¥æ”¶è§„æ¨¡åŒæ¯”ä¾‹è†¨èƒ€çš„ç ”å‘æˆæœ¬ç»“æ„ï¼Œæ˜¯éªŒè¯å…¶å•†ä¸šæ¨¡å¼å¯æ‰©å±•æ€§ï¼ˆScalabilityï¼‰çš„æœ€å¼ºè¯æ®ã€‚</p>
<p>ä»èŠå¤©æœºå™¨äººåˆ°æ™ºèƒ½ä½“ï¼šMiniMax çš„ç”Ÿäº§åŠ›é›„å¿ƒ</p>
<p>MiniMax åœ¨æ‹›è‚¡ä¹¦ä¸­å¼ºè°ƒäº†å…¶åœ¨ C ç«¯åº”ç”¨ï¼ˆå¦‚æ˜Ÿé‡ã€æµ·èº AIï¼‰ä¸Šçš„ç»Ÿæ²»åŠ›ã€‚ç„¶è€Œï¼Œè¦æ’‘èµ·åƒäº¿çº§çš„å¸‚åœºæƒ³è±¡ç©ºé—´ï¼Œä»…é èŠå¤©æ˜¯ä¸å¤Ÿçš„ã€‚M2.1 è¡¥é½é€»è¾‘å’Œä»£ç çŸ­æ¿ï¼ŒçœŸæ­£çš„é›„å¿ƒåœ¨äºå¯¹ B ç«¯ç”Ÿäº§åŠ›åœºæ™¯çš„æ¸—é€ã€‚</p>
<p>è¡Œä¸šå†…å¯¹äº Agent èƒ½åŠ›çš„è¯„ä¼°æ ‡å‡†ï¼Œæ­£åœ¨ä»ç®€å•çš„å¯¹è¯æµ‹è¯•è½¬å‘æ›´ä¸ºä¸¥è‹›çš„åŸºå‡†ï¼Œä¾‹å¦‚ Toolathonã€‚è¿™æ˜¯ä¸€ä¸ªåŒ…å« 32 ä¸ªä¸“ä¸šè½¯ä»¶ï¼ˆå¦‚ Kubernetesã€BigQueryï¼‰ã€600 å¤šä¸ªå·¥å…·çš„ç¬¬ä¸‰æ–¹é«˜éš¾åº¦è¯„æµ‹ï¼Œè¦æ±‚æ¨¡å‹åœ¨å¹³å‡ 20 è½®çš„äº¤äº’ä¸­å®Œæˆå¤æ‚çš„é•¿ç¨‹ä»»åŠ¡ã€‚</p>
<p>M2.1 å¯¹ä»£ç è§£é‡Šå™¨å’Œå·¥å…·è°ƒç”¨èƒ½åŠ›çš„å¼ºåŒ–ï¼Œæ­£æ˜¯ä¸ºäº†åº”å¯¹è¿™ç§çœŸå®ä¸–ç•Œå¤æ‚åº¦ã€‚å½“ä¸€ä¸ªæ¨¡å‹èƒ½å¤Ÿç†Ÿç»ƒæ“ä½œ Docker å®¹å™¨ã€ç®¡ç†æ—¥å†å¹¶è‡ªåŠ¨å¤„ç†ç”µå•†è®¢å•æ—¶ï¼Œå®ƒå°±ä»ä¸€ä¸ª C ç«¯çš„ç©å…·è¿›åŒ–æˆäº† B ç«¯çš„å‘˜å·¥ã€‚è¿™ç§èƒ½åŠ›çš„è·ƒå‡ï¼Œå°†ç›´æ¥æ‹“å®½ MiniMax å¼€æ”¾å¹³å°çš„å®¢æˆ·åŠå¾„ï¼Œä½¿å…¶èƒ½å¤Ÿæ‰¿æ¥ä¼ä¸šçº§å·¥ä½œæµçš„è‡ªåŠ¨åŒ–éœ€æ±‚ã€‚</p>
<p>å•†ä¸šé—­ç¯çš„æœ€åä¸€å…¬é‡Œ</p>
<p>è‡³æ­¤ï¼ŒMiniMax çš„å•†ä¸šé€»è¾‘å½¢æˆäº†é—­ç¯ï¼š</p>
<ul>
<li>
<p>C ç«¯äº§å“ï¼ˆæ˜Ÿé‡ã€æµ·èºï¼‰ä½œä¸ºæ•°æ®é£è½®å’Œç°é‡‘ç‰›ï¼Œæä¾›é«˜ç”¨æˆ·ç²˜æ€§å’Œç›´æ¥æ”¶å…¥ï¼›</p>
</li>
<li>
<p>åº•å±‚æ¨¡å‹ï¼ˆM2.1ï¼‰é€šè¿‡ MoE æ¶æ„æ§åˆ¶æ¨ç†æˆæœ¬ï¼Œé€šè¿‡æŠ€æœ¯è¡¥å…¨æå‡æ™ºå•†ä¸Šé™ï¼›</p>
</li>
<li>
<p>å¼€æ”¾å¹³å°åŸºäº M2.1 çš„ Agent å’Œå¤šæ¨¡æ€èƒ½åŠ›ï¼Œåˆ‡å…¥é«˜ä»·å€¼çš„ä¼ä¸šçº§å¸‚åœºã€‚</p>
</li>
</ul>
<p>ç°åœ¨çš„ MiniMax å·²å·¦æ‰‹æ˜¯èµ„æœ¬å¸‚åœºçš„å…¥åœºåˆ¸ï¼ˆæ‹›è‚¡ä¹¦ï¼‰ï¼Œå³æ‰‹æ˜¯æŠ€æœ¯æˆ˜åœºçš„å†²é”‹å·ï¼ˆM2.1ï¼‰ã€‚</p>
<p>å¯¹è¯¥å…¬å¸è€Œè¨€ï¼ŒIPO æ˜¯é€šè¿‡æŠ€æœ¯è½¬åŒ–ä¸ºç”Ÿäº§åŠ›çš„æ–°èµ·ç‚¹ã€‚M2.1 çš„å‘å¸ƒè¯æ˜äº†ï¼Œè¿™å®¶å…¬å¸åœ¨å©å“æ¸¯äº¤æ‰€å¤§é—¨çš„åŒæ—¶ï¼Œä¾ç„¶ä¿æŒç€å¯¹æŠ€æœ¯è¾¹ç•Œçš„æè‡´æ¢ç´¢ã€‚è¿™ç§ã€Œå·¦æ‰‹è´¦æœ¬ï¼Œå³æ‰‹æ¨¡å‹ã€çš„åŒè½®é©±åŠ¨ï¼Œæˆ–è®¸æ­£æ˜¯å®ƒèƒ½åœ¨çŸ­çŸ­å››å¹´å†…è·‘é€šå•†ä¸šé—­ç¯çš„ç§˜å¯†æ‰€åœ¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ²¡æœ‰åƒå¡GPUï¼Œå¦‚ä½•ä»0åˆ°1æ„å»ºå¯ç”¨LLMï¼ŸnanoChat å…¨æ ˆå®è·µé¦–æ¬¡å…¬å¼€]]></title>    <link>https://juejin.cn/post/7587062584165154854</link>    <guid>https://juejin.cn/post/7587062584165154854</guid>    <pubDate>2025-12-24T08:49:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587062584165154854" data-draft-id="7586983243926814758" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ²¡æœ‰åƒå¡GPUï¼Œå¦‚ä½•ä»0åˆ°1æ„å»ºå¯ç”¨LLMï¼ŸnanoChat å…¨æ ˆå®è·µé¦–æ¬¡å…¬å¼€"/> <meta itemprop="keywords" content="å¼€æº,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-24T08:49:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å‚æŠ€æœ¯æ€»ç›‘ä¸‹æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/4091714106833577"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ²¡æœ‰åƒå¡GPUï¼Œå¦‚ä½•ä»0åˆ°1æ„å»ºå¯ç”¨LLMï¼ŸnanoChat å…¨æ ˆå®è·µé¦–æ¬¡å…¬å¼€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4091714106833577/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å‚æŠ€æœ¯æ€»ç›‘ä¸‹æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T08:49:14.000Z" title="Wed Dec 24 2025 08:49:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">nanochat æŠ€æœ¯æ·±åº¦è§£æï¼šä½æˆæœ¬å…¨æ ˆ LLM å®ç°çš„æ¶æ„ä¸å·¥ç¨‹å®è·µ</h2>
<h3 data-id="heading-1">1. æ•´ä½“ä»‹ç»</h3>
<h4 data-id="heading-2">1.1 é¡¹ç›®æ¦‚è§ˆä¸ç°çŠ¶</h4>
<p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkarpathy%2Fnanochat" target="_blank" title="https://github.com/karpathy/nanochat" ref="nofollow noopener noreferrer">github.com/karpathy/naâ€¦</a> (æˆªè‡³åˆ†ææ—¶ï¼Œé¡¹ç›®å¤„äºæ´»è·ƒå¼€å‘åˆæœŸï¼Œç¤¾åŒºå…³æ³¨åº¦æ­£åœ¨å¢é•¿ï¼Œå…¶å‰èº« <code>nanoGPT</code> å·²æœ‰è¶… 40k starsï¼Œé¢„ç¤ºç€è¯¥é¡¹ç›®çš„æ½œåœ¨å½±å“åŠ›)ã€‚</p>
<p><strong>é¡¹ç›®å®šä½</strong>ï¼šä¸€ä¸ªå•ä¸€ã€ç®€æ´ã€æœ€å°åŒ–ã€å¯é«˜åº¦å®šåˆ¶ä¸”ä¾èµ–æå°‘çš„ä»£ç åº“ï¼Œæ—¨åœ¨å®Œæ•´å®ç°ç±»ä¼¼ ChatGPT çš„å¤§å‹è¯­è¨€æ¨¡å‹ (LLM)ï¼Œè¦†ç›–ä»æ•°æ®å‡†å¤‡ã€è®­ç»ƒã€è¯„ä¼°åˆ°éƒ¨ç½²æœåŠ¡çš„å…¨æµç¨‹ã€‚</p>
<p><strong>æ ¸å¿ƒå®£è¨€</strong>ï¼šâ€œ100 ç¾å…ƒèƒ½ä¹°åˆ°çš„æœ€å¥½çš„ ChatGPTâ€ã€‚è¿™ç›´è§‚åœ°æ¦‚æ‹¬äº†å…¶è®¾è®¡å“²å­¦ï¼šåœ¨ä¸¥æ ¼å—é™çš„è®¡ç®—é¢„ç®—ä¸‹ï¼Œæä¾›ä¸€ä¸ªå¯è¿è¡Œã€å¯ç†è§£ã€å¯ä¿®æ”¹çš„ LLM å…¨æ ˆåŸºçº¿ã€‚</p>
<h4 data-id="heading-3">1.2 æ ¸å¿ƒåŠŸèƒ½ä¸æ“ä½œ</h4>
<p>é¡¹ç›®é€šè¿‡ä¸€ä¸ªåä¸º <code>speedrun.sh</code> çš„ä¸»è„šæœ¬ä¸²è”æ‰€æœ‰æµç¨‹ã€‚ç”¨æˆ·åœ¨ä¸€ä¸ªé…å¤‡ 8 å¼  H100 GPU çš„èŠ‚ç‚¹ä¸Šï¼ˆå¸‚åœºä»·çº¦ 24 ç¾å…ƒ/å°æ—¶ï¼‰ï¼Œæ‰§è¡Œè¯¥è„šæœ¬çº¦ 4 å°æ—¶åï¼Œå³å¯è·å¾—ä¸€ä¸ªçº¦ 5.61 äº¿å‚æ•°ï¼ˆd20 é…ç½®ï¼‰çš„å¯¹è¯æ¨¡å‹ï¼Œå¹¶å¯é€šè¿‡å†…ç½®çš„ Web UI è¿›è¡Œäº¤äº’ã€‚</p>
<p><strong>é¡¹ç›®æˆªå›¾ç¤ºæ„</strong>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d037f97739745dd9187f4ea1615e232~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5Y6C5oqA5pyv5oC755uR5LiL5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767170954&amp;x-signature=PT0I4nLC1YsX%2BmI60mM57sf085U%3D" alt="nanochat.png" loading="lazy"/>
<em>ç”¨æˆ·å¯é€šè¿‡ç±»ä¼¼ ChatGPT çš„ç•Œé¢ä¸è‡ªè¡Œè®­ç»ƒçš„æ¨¡å‹å¯¹è¯ã€‚</em></p>
<h4 data-id="heading-4">1.3 é¢ä¸´é—®é¢˜ä¸ç›®æ ‡äººç¾¤</h4>
<p><strong>è§£å†³çš„é—®é¢˜è¦ç´ </strong>ï¼š</p>
<ol>
<li><strong>è®¤çŸ¥ä¸å·¥ç¨‹å¤æ‚æ€§</strong>ï¼šç°ä»£ä¸»æµ LLM æ¡†æ¶ï¼ˆå¦‚ Hugging Face Transformersï¼‰ä¸ºäº†é€šç”¨æ€§ï¼Œå¼•å…¥äº†åºå¤§çš„é…ç½®ç³»ç»Ÿå’ŒæŠ½è±¡å±‚ï¼Œå¯¹äºå¸Œæœ›<strong>ä»å¤´ç†è§£å¹¶æŒæ§å…¨æµç¨‹</strong>çš„å­¦ä¹ è€…ã€ç ”ç©¶è€…æˆ–å°å‹å›¢é˜Ÿè€Œè¨€ï¼Œæ„æˆäº†è¾ƒé«˜çš„å…¥é—¨é—¨æ§›ã€‚</li>
<li><strong>ç»æµæˆæœ¬é—¨æ§›</strong>ï¼šè®­ç»ƒä¸€ä¸ªæ€§èƒ½å°šå¯çš„ LLM é€šå¸¸éœ€è¦æ•°ä¸‡è‡³æ•°ç™¾ä¸‡ç¾å…ƒçš„è®¡ç®—èµ„æºï¼Œå°†ç»å¤§å¤šæ•°ä¸ªäººå’Œä¸­å°å‹å›¢é˜Ÿæ‹’ä¹‹é—¨å¤–ã€‚</li>
<li><strong>â€œé»‘ç®±â€ä¸å®šåˆ¶åŒ–å›°éš¾</strong>ï¼šä½¿ç”¨é¢„è®­ç»ƒ API æˆ–å¾®è°ƒå¤§å‹æ¨¡å‹ï¼Œç”¨æˆ·éš¾ä»¥æ·±å…¥æ¨¡å‹å†…éƒ¨ï¼Œæ³¨å…¥ç‰¹å®šçŸ¥è¯†ã€é£æ ¼æˆ–èƒ½åŠ›çš„è¿‡ç¨‹å¤æ‚ä¸”ä¸é€æ˜ã€‚</li>
</ol>
<p><strong>ç›®æ ‡åœºæ™¯ä¸äººç¾¤</strong>ï¼š</p>
<ul>
<li><strong>æ•™è‚²ä¸ç ”ç©¶</strong>ï¼šä½œä¸ºæ•™å­¦å·¥å…·ï¼ˆå¦‚é…å¥—è¯¾ç¨‹ LLM101nï¼‰ï¼Œå¸®åŠ©å­¦ç”Ÿç›´è§‚ç†è§£ LLM è®­ç»ƒçš„æ¯ä¸ªç¯èŠ‚ã€‚</li>
<li><strong>å¿«é€ŸåŸå‹ä¸å®éªŒ</strong>ï¼šç ”ç©¶è€…éœ€è¦åœ¨æœ‰é™é¢„ç®—ä¸‹éªŒè¯æ–°çš„è®­ç»ƒç®—æ³•ã€æ¶æ„ä¿®æ”¹æˆ–æ•°æ®ç­–ç•¥ã€‚</li>
<li><strong>ä¸ªæ€§åŒ–æ¨¡å‹å®šåˆ¶</strong>ï¼šå¼€å‘è€…å¸Œæœ›å®Œå…¨æ‹¥æœ‰å¹¶æ§åˆ¶ä¸€ä¸ªå…·å¤‡ç‰¹å®šèº«ä»½ã€è¯­è°ƒæˆ–ä¸“ä¸šé¢†åŸŸçŸ¥è¯†çš„è½»é‡çº§å¯¹è¯ä»£ç†ã€‚</li>
</ul>
<h4 data-id="heading-5">1.4 è§£å†³æ–¹æ¡ˆä¸ä¼˜åŠ¿å¯¹æ¯”</h4>
<p><strong>ä¼ ç»Ÿ/ç°æœ‰æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>ä½¿ç”¨å¤§å‹æ¡†æ¶</strong>ï¼šåŠŸèƒ½å…¨é¢ä½†ä»£ç åº“åºå¤§ï¼Œä¾èµ–å¤æ‚ï¼Œæ ¸å¿ƒè®­ç»ƒå¾ªç¯è¢«å¤šå±‚å°è£…ã€‚</li>
<li><strong>ä¾èµ–äº‘ API</strong>ï¼šæˆæœ¬ä¸å¯æ§ï¼Œæ— æ³•å®šåˆ¶å†…éƒ¨æœºåˆ¶ï¼Œå­˜åœ¨æ•°æ®éšç§å’Œä¾›åº”å•†é”å®šé£é™©ã€‚</li>
<li><strong>å¾®è°ƒè¶…å¤§åŸºåº§æ¨¡å‹</strong>ï¼šå³ä½¿ä½¿ç”¨ LoRA ç­‰æŠ€æœ¯ï¼Œä»éœ€æ”¯ä»˜é«˜é¢çš„åŸºåº§æ¨¡å‹æ¨ç†å’Œå¾®è°ƒæˆæœ¬ï¼Œä¸”æ— æ³•ä¿®æ”¹æ¨¡å‹æ¶æ„ã€‚</li>
</ol>
<p><strong>nanochat çš„æ–°æ–¹å¼</strong>ï¼š</p>
<ol>
<li><strong>ä¸€ä½“åŒ–ç«¯åˆ°ç«¯</strong>ï¼šä»åŸå§‹æ–‡æœ¬æ•°æ®åˆ°å¯äº¤äº’çš„ Web æœåŠ¡ï¼Œæ‰€æœ‰ä»£ç å‡åœ¨ä¸€ä¸ªçº¦ 330KB çš„ä»£ç åº“ä¸­ï¼Œé€»è¾‘çº¿æ€§ï¼Œæ˜“äºè·Ÿè¸ªã€‚</li>
<li><strong>æˆæœ¬ç²¾ç¡®é€æ˜</strong>ï¼šè„šæœ¬ç›´æ¥å…³è”äº‘è®¡ç®—å®ä¾‹ä»·æ ¼ï¼Œè®­ç»ƒæ—¶é•¿ã€FLOPsã€å‚æ•°é‡ä¸æœ€ç»ˆæˆæœ¬çš„å…³ç³»æ¸…æ™°å¯è®¡ç®—ã€‚</li>
<li><strong>æœ€å¤§åŒ–å¯è¯»æ€§ä¸å¯é»‘å®¢æ€§</strong>ï¼šä»£ç é£æ ¼æç®€ï¼Œé¿å…ä¸å¿…è¦çš„æŠ½è±¡ï¼Œé¼“åŠ±ç”¨æˆ·ç›´æ¥ä¿®æ”¹ä»»ä½•éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œè°ƒæ•´æ¨¡å‹æ·±åº¦ä»…éœ€ä¿®æ”¹ <code>--depth</code> å‚æ•°ã€‚</li>
</ol>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼šåœ¨ç‰ºç‰²äº†å‰æ²¿æ¨¡å‹è§„æ¨¡ä¸æ€§èƒ½ä¸Šé™çš„å‰æä¸‹ï¼Œæ¢æ¥äº†å‰æ‰€æœªæœ‰çš„<strong>é€æ˜åº¦ã€å¯æ§æ€§å’Œå­¦ä¹ å‹å¥½æ€§</strong>ã€‚</p>
<h4 data-id="heading-6">1.5 å•†ä¸šä»·å€¼é¢„ä¼°</h4>
<p>ä»·å€¼ä¼°ç®—å¯ä» <strong>â€œæ›¿ä»£æˆæœ¬â€</strong> å’Œ <strong>â€œæ•™è‚²/å®éªŒæ•ˆç‡æå‡â€</strong> ä¸¤ä¸ªç»´åº¦åˆ†æï¼š</p>
<ol>
<li>
<p><strong>ä»£ç ä¸å·¥ç¨‹æˆæœ¬æ›¿ä»£</strong>ï¼šæ„å»ºä¸€ä¸ªåŒç­‰å®Œæ•´åº¦ï¼ˆå«åˆ†è¯å™¨è®­ç»ƒã€å¤šé˜¶æ®µè®­ç»ƒã€è¯„ä¼°åŸºå‡†ã€WebæœåŠ¡ï¼‰çš„ LLM è®­ç»ƒç®¡çº¿ï¼Œéœ€è¦ä¸€ä¸ªé«˜çº§å·¥ç¨‹å¸ˆå›¢é˜Ÿæ•°æœˆçš„å¼€å‘æ—¶é—´ã€‚nanochat æä¾›äº†ç»è¿‡éªŒè¯çš„ã€å¯ç›´æ¥éƒ¨ç½²çš„æ›¿ä»£å“ã€‚æŒ‰äººå‡æˆæœ¬ä¼°ç®—ï¼Œæ­¤é¡¹å¯æ›¿ä»£æ•°åä¸‡äººæ°‘å¸çš„ç ”å‘æŠ•å…¥ã€‚</p>
</li>
<li>
<p><strong>è®¡ç®—æˆæœ¬ä¸é—®é¢˜ç©ºé—´è¦†ç›–</strong>ï¼š</p>
<ul>
<li><strong>åŸºçº¿</strong>ï¼š100 ç¾å…ƒæ–¹æ¡ˆï¼ˆd20ï¼Œ~560M å‚æ•°ï¼Œ4å°æ—¶ï¼‰åœ¨ GSM8K æ•°å­¦åŸºå‡†ä¸Šå¾—åˆ†çº¦ 2.5%ï¼Œæ€§èƒ½ç›¸å½“äºä¸€ä¸ªâ€œå¹¼ç¨šçš„å„¿ç«¥â€ï¼Œä½†å·²èƒ½å®Œæˆç®€å•çš„å¯¹è¯å’Œæ–‡æœ¬ç”Ÿæˆã€‚å…¶ä»·å€¼åœ¨äº<strong>å¿«é€ŸéªŒè¯æµç¨‹çš„å¯è¡Œæ€§</strong>ã€‚</li>
<li><strong>è¿›é˜¶</strong>ï¼š1000 ç¾å…ƒæ–¹æ¡ˆï¼ˆé¢„ä¼°ï¼Œ~41.6å°æ—¶ï¼‰ç›®æ ‡æ€§èƒ½æ¥è¿‘æˆ–è¶…è¶Š GPT-2 (2019)ã€‚å¯¹äºä¸€ä¸ªå¸Œæœ›æ‹¥æœ‰ç§æœ‰åŒ–ã€å¯å®Œå…¨å®šåˆ¶åŒ–å¯¹è¯æ¨¡å‹çš„å°å‹ä¼ä¸šæˆ–å‚ç›´åº”ç”¨ï¼Œè¿™æä¾›äº†ä¸€ä¸ªæ˜ç¡®çš„æ€§èƒ½ä¸æˆæœ¬åŸºå‡†ã€‚ç›¸æ¯”äºæŒç»­æ”¯ä»˜ API è°ƒç”¨è´¹ç”¨æˆ–ç§Ÿèµå¤§å‹æ¨¡å‹ï¼Œä¸€æ¬¡æ€§çš„åƒç¾å…ƒçº§æŠ•å…¥åœ¨é•¿æœŸå¯èƒ½æ›´å…·ç»æµæ€§ã€‚</li>
<li><strong>è¦†ç›–é—®é¢˜ç©ºé—´</strong>ï¼šé¡¹ç›®é€šè¿‡ <code>tasks/</code> ç›®å½•ä¸‹çš„å¤šä¸ªè¯„ä¼°ä»»åŠ¡ï¼ˆARC, MMLU, GSM8K, HumanEval ç­‰ï¼‰å®šä¹‰äº†å…¶ä¼˜åŒ–çš„â€œé—®é¢˜ç©ºé—´â€â€”â€”å³é€šç”¨è¯­è¨€ç†è§£ã€æ¨ç†å’ŒåŸºç¡€ä»£ç èƒ½åŠ›ã€‚å®ƒè¯æ˜äº†åœ¨æ­¤é—®é¢˜ç©ºé—´å†…ï¼Œåƒç¾å…ƒé‡çº§æŠ•å…¥å¯è·å¾—å…·æœ‰åŸºç¡€å®ç”¨æ€§çš„æ¨¡å‹ã€‚</li>
</ul>
</li>
</ol>
<p><strong>ç”Ÿæˆé€»è¾‘</strong>ï¼šä»·å€¼å¹¶éæºäºå…¶æ¨¡å‹çš„ç»å¯¹æ€§èƒ½ï¼ˆç›®å‰è¿œä¸åŠ GPT-4/Claude ç­‰ï¼‰ï¼Œè€Œæ˜¯æºäºå®ƒ<strong>æ˜¾è‘—é™ä½äº†è¿›å…¥â€œå…¨æ ˆ LLM ç ”å‘â€é¢†åŸŸçš„ç»¼åˆé—¨æ§›</strong>ï¼ˆé‡‘é’±ã€æ—¶é—´ã€è®¤çŸ¥ï¼‰ã€‚å®ƒä¸ºåŸå‹éªŒè¯ã€æ•™è‚²ã€ç‰¹å®šè½»é‡çº§åº”ç”¨æä¾›äº†ä¸€ä¸ªç»æµã€é«˜æ•ˆçš„æ–°èµ·ç‚¹ã€‚</p>
<h3 data-id="heading-7">2. è¯¦ç»†åŠŸèƒ½æ‹†è§£ï¼ˆäº§å“+æŠ€æœ¯è§†è§’ï¼‰</h3>








































<table><thead><tr><th align="left">åŠŸèƒ½æ¨¡å—</th><th align="left">äº§å“è§†è§’ï¼ˆç”¨æˆ·ä»·å€¼ï¼‰</th><th align="left">æŠ€æœ¯è§†è§’ï¼ˆæ ¸å¿ƒè®¾è®¡ï¼‰</th></tr></thead><tbody><tr><td align="left"><strong>â€œä¸€é”®å¼â€è®­ç»ƒç®¡çº¿ (<code>speedrun.sh</code>)</strong></td><td align="left">å±è”½åˆ†å¸ƒå¼è®­ç»ƒã€æ•°æ®ä¸‹è½½ã€é˜¶æ®µè¡”æ¥çš„å¤æ‚æ€§ï¼Œæä¾›å¼€ç®±å³ç”¨çš„ä½“éªŒã€‚</td><td align="left">ä½¿ç”¨ Bash è„šæœ¬ç¼–æ’ Python è®­ç»ƒè„šæœ¬ï¼Œç®¡ç†åå°è¿›ç¨‹ï¼Œä¼ é€’ç¯å¢ƒå˜é‡ã€‚å…³é”®ç¯èŠ‚ï¼šæ•°æ®å¹¶è¡Œ(<code>torchrun</code>)ã€æ¢¯åº¦ç´¯ç§¯ã€æ£€æŸ¥ç‚¹ç®¡ç†ã€‚</td></tr><tr><td align="left"><strong>å¤šé˜¶æ®µè®­ç»ƒæµç¨‹</strong></td><td align="left">æ¨¡æ‹Ÿå·¥ä¸šåŒ– LLM è®­ç»ƒæµç¨‹ï¼ˆé¢„è®­ç»ƒ -&gt; ä¸­é—´è®­ç»ƒ -&gt; æœ‰ç›‘ç£å¾®è°ƒ -&gt; å¼ºåŒ–å­¦ä¹ ï¼‰ï¼Œè®©ç”¨æˆ·ç†è§£å„é˜¶æ®µä½œç”¨ã€‚</td><td align="left">1. <strong>Base Train</strong>ï¼šåœ¨å¤§é‡æ— æ ‡ç­¾æ–‡æœ¬ä¸Šè¿›è¡Œè‡ªå›å½’é¢„è®­ç»ƒã€‚<br/>2. <strong>Mid Train</strong>ï¼šæ³¨å…¥å¯¹è¯æ ¼å¼ã€å·¥å…·è°ƒç”¨ç­‰ç‰¹æ®Šä»¤ç‰Œï¼Œè¿›è¡Œå¤šä»»åŠ¡å­¦ä¹ ã€‚<br/>3. <strong>SFT</strong>ï¼šåœ¨é«˜è´¨é‡å¯¹è¯æ•°æ®ä¸Šè¿›è¡Œåºåˆ—çº§æŒ‡ä»¤å¾®è°ƒã€‚<br/>4. <strong>RL</strong>ï¼ˆå¯é€‰ï¼‰ï¼šåœ¨ GSM8K ä»»åŠ¡ä¸Šè¿›è¡Œæ‹’ç»é‡‡æ ·ä¸å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–ã€‚</td></tr><tr><td align="left"><strong>å¯å®šåˆ¶èº«ä»½/èƒ½åŠ›</strong></td><td align="left">å…è®¸ç”¨æˆ·é€šè¿‡æ•°æ®â€œå¡‘é€ â€æ¨¡å‹çš„æ€§æ ¼æˆ–ä¸ºå…¶æ·»åŠ æ–°æŠ€èƒ½ï¼ˆå¦‚è®¡ç®—å­—æ¯â€˜râ€™çš„æ•°é‡ï¼‰ã€‚</td><td align="left">æä¾› <code>dev/gen_synthetic_data.py</code> ç­‰æ¨¡æ¿ï¼ŒæŒ‡å¯¼ç”¨æˆ·ç”Ÿæˆç‰¹å®šæ ¼å¼çš„åˆæˆæ•°æ®ï¼ˆJSONLï¼‰ï¼Œå¹¶å°†å…¶æ··å…¥ Mid-training æˆ– SFT çš„æ•°æ®é›†ä¸­ã€‚æŠ€æœ¯æ ¸å¿ƒåœ¨äºæ•°æ®æ··åˆç­–ç•¥ã€‚</td></tr><tr><td align="left"><strong>å†…ç½®è¯„ä¼°ä¸æŠ¥å‘Š</strong></td><td align="left">è®­ç»ƒç»“æŸåè‡ªåŠ¨ç”Ÿæˆâ€œæˆç»©å•â€ï¼Œè®©ç”¨æˆ·å¯¹æ¨¡å‹èƒ½åŠ›æœ‰é‡åŒ–ã€å¤šè§’åº¦çš„è®¤è¯†ã€‚</td><td align="left">åœ¨ <code>tasks/</code> ä¸‹å®ç°å¤šä¸ªæ ‡å‡†è¯„æµ‹é›†çš„æ•°æ®åŠ è½½å’ŒæŒ‡æ ‡è®¡ç®—ã€‚<code>report.py</code> æ¨¡å—è‡ªåŠ¨æ”¶é›†å„é˜¶æ®µæ—¥å¿—ï¼Œåˆæˆæœ€ç»ˆçš„ <code>report.md</code>ã€‚</td></tr><tr><td align="left"><strong>é«˜æ•ˆæ¨ç†å¼•æ“ (<code>engine.py</code>)</strong></td><td align="left">æä¾›æµç•…çš„å¯¹è¯ä½“éªŒï¼Œå¹¶æ”¯æŒæ¨¡å‹è°ƒç”¨â€œè®¡ç®—å™¨â€å·¥å…·ã€‚</td><td align="left">å®ç° <strong>KV ç¼“å­˜ (KVCache)</strong> ç®¡ç†ï¼Œæ”¯æŒæµå¼ç”Ÿæˆå’Œæ‰¹é‡ç”Ÿæˆã€‚é›†æˆç®€å•çš„ Python è¡¨è¾¾å¼å®‰å…¨è¯„ä¼°å™¨ï¼Œå®ç°å·¥å…·è°ƒç”¨é€»è¾‘ã€‚</td></tr><tr><td align="left"><strong>æœ€å°åŒ–ä¾èµ–ä¸éƒ¨ç½²</strong></td><td align="left">ç®€åŒ–ç¯å¢ƒé…ç½®ï¼Œæ”¯æŒä»å¤š GPU æœåŠ¡å™¨åˆ° Mac MPS/CPU çš„å¤šç§è¿è¡Œç¯å¢ƒã€‚</td><td align="left">ä½¿ç”¨ <code>uv</code> ç®¡ç† Python ä¾èµ–å’Œè™šæ‹Ÿç¯å¢ƒã€‚<code>pyproject.toml</code> ä¸­é…ç½®äº† CPU/GPU ç‰ˆæœ¬çš„ Torch ç´¢å¼•ã€‚æ¨¡å‹ä»£ç è‡ªåŠ¨æ£€æµ‹è®¾å¤‡ç±»å‹ã€‚</td></tr></tbody></table>
<h3 data-id="heading-8">3. æŠ€æœ¯éš¾ç‚¹ä¸æ ¸å¿ƒåˆ›æ–°å› å­</h3>
<ol>
<li><strong>åœ¨æå°å†…å­˜é¢„ç®—ä¸‹çš„æ¨¡å‹é…ç½®</strong>ï¼šå¦‚ä½•åœ¨ 8xH100ï¼ˆæ¯å¡ 80GBï¼‰ä¸Šé«˜æ•ˆè®­ç»ƒ 5.6 äº¿å‚æ•°æ¨¡å‹ï¼Ÿè§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼šä½¿ç”¨<strong>æ··åˆä¼˜åŒ–å™¨</strong>ï¼ˆå¯¹åµŒå…¥å±‚å’Œè¾“å‡ºå±‚ä½¿ç”¨ AdamWï¼Œå¯¹ Transformer çŸ©é˜µä½¿ç”¨ Muonï¼‰ã€<strong>æ¿€æ´» checkpointing</strong>ã€<strong>æ¢¯åº¦ç´¯ç§¯</strong>ï¼Œä»¥åŠå°†<strong>è¯è¡¨å¤§å°å¡«å……è‡³ 64 çš„å€æ•°</strong>ä»¥ä¼˜åŒ–åˆ†å¸ƒå¼çŸ©é˜µè®¡ç®—æ•ˆç‡ã€‚</li>
<li><strong>ç«¯åˆ°ç«¯ç®¡çº¿çš„å¥å£®æ€§ä¸è‡ªåŠ¨åŒ–</strong>ï¼šå¦‚ä½•ç¡®ä¿æ•°å°æ—¶çš„æ— ç›‘ç£è„šæœ¬è¿è¡Œä¸å› ç½‘ç»œã€æ•°æ®æˆ–ç¡¬ä»¶é—®é¢˜ä¸­æ–­ï¼Ÿé€šè¿‡è¯¦å°½çš„é”™è¯¯æ£€æŸ¥ã€æ•°æ®ä¸‹è½½é‡è¯•æœºåˆ¶ã€æ£€æŸ¥ç‚¹ä¿å­˜ä¸æ¢å¤ï¼Œä»¥åŠå°†ä¸­é—´çŠ¶æ€è®°å½•åˆ°ç»“æ„åŒ–æŠ¥å‘Šä¸­æ¥åº”å¯¹ã€‚</li>
<li><strong>ä½æˆæœ¬ä¸‹çš„æ¨¡å‹è´¨é‡</strong>ï¼šå¦‚ä½•åœ¨æœ‰é™æ•°æ®å’Œè®¡ç®—ä¸‹è·å¾—å°½å¯èƒ½å¥½çš„æ€§èƒ½ï¼Ÿé‡‡ç”¨ç»è¿‡ç®€åŒ–å’Œè°ƒä¼˜çš„ <strong>Transformer æ¶æ„</strong>ï¼ˆå¦‚ RoPE, QK Norm, ReLUÂ² æ¿€æ´»ï¼‰ï¼Œå¹¶éµå¾ª <strong>Chinchilla ç¼©æ”¾æ³•åˆ™</strong>ï¼ˆçº¦ 20 å€å‚æ•°æ•°çš„è®­ç»ƒä»¤ç‰Œæ•°ï¼‰æ¥åˆ†é…è®¡ç®—é¢„ç®—ã€‚</li>
<li><strong>æ¨ç†æ•ˆç‡ä¸å·¥å…·ä½¿ç”¨çš„é›†æˆ</strong>ï¼šå¦‚ä½•åœ¨èµ„æºæœ‰é™çš„ç¯å¢ƒä¸‹å®ç°å¿«é€Ÿå“åº”å’Œå·¥å…·è°ƒç”¨ï¼Ÿè‡ªç ”è½»é‡çº§ <code>Engine</code> ç±»ï¼Œç®¡ç† KV ç¼“å­˜çš„åŠ¨æ€å¢é•¿ï¼Œå¹¶å°†å·¥å…·è°ƒç”¨ï¼ˆå¦‚è®¡ç®—å™¨ï¼‰ä½œä¸ºä¸€ä¸ªç”±ç‰¹æ®Šä»¤ç‰Œè§¦å‘çš„ç¡®å®šæ€§å­æµç¨‹æ¥æ‰§è¡Œï¼Œè€Œéä¾èµ–æ¨¡å‹ç”Ÿæˆå‡½æ•°è°ƒç”¨å­—ç¬¦ä¸²ã€‚</li>
</ol>
<h3 data-id="heading-9">4. è¯¦ç»†è®¾è®¡å›¾</h3>
<h4 data-id="heading-10">4.1 æ ¸å¿ƒæ¶æ„å›¾</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf681ca0df0f4f3998323e053ecfc312~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5Y6C5oqA5pyv5oC755uR5LiL5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767170954&amp;x-signature=7VClHLjXXVVRSMB68Nmb%2Fol6ebM%3D" alt="deepseek_mermaid_20251224_d2e523.png" loading="lazy"/></p>
<h4 data-id="heading-11">4.2 æ ¸å¿ƒè®­ç»ƒé“¾è·¯åºåˆ—å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User
    participant SpeedrunSh
    participant Dataset
    participant Tokenizer
    participant BaseTrain
    participant MidTrain
    participant ChatEval
    participant Report

    User-&gt;&gt;SpeedrunSh: bash speedrun.sh
    SpeedrunSh-&gt;&gt;Dataset: ä¸‹è½½æ•°æ®åˆ†ç‰‡
    SpeedrunSh-&gt;&gt;Tokenizer: è®­ç»ƒ BPE åˆ†è¯å™¨
    SpeedrunSh-&gt;&gt;BaseTrain: å¯åŠ¨åˆ†å¸ƒå¼é¢„è®­ç»ƒ
    BaseTrain-&gt;&gt;Report: è®°å½•æŸå¤±/COREåˆ†æ•°
    SpeedrunSh-&gt;&gt;MidTrain: å¯åŠ¨ä¸­é—´è®­ç»ƒ
    MidTrain-&gt;&gt;ChatEval: è¯„ä¼°å¤šä»»åŠ¡æ€§èƒ½
    ChatEval-&gt;&gt;Report: è®°å½• ARC/MMLU ç­‰åˆ†æ•°
    SpeedrunSh-&gt;&gt;Report: æ±‡æ€»ç”Ÿæˆ report.md
    Report--&gt;&gt;User: è¾“å‡ºæœ€ç»ˆæŠ¥å‘Š
</code></pre>
<h4 data-id="heading-12">4.3 æ ¸å¿ƒç±»å›¾ (GPT æ¨¡å‹)</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram
    class GPTConfig {
        +int sequence_len
        +int vocab_size
        +int n_layer
        +int n_head
        +int n_kv_head
        +int n_embd
    }
    
    class GPT {
        -GPTConfig config
        -ModuleDict transformer
        -Linear lm_head
        +Tensor cos
        +Tensor sin
        +init_weights()
        +setup_optimizers()
        +forward(idx, targets, kv_cache)
        +generate(tokens, max_tokens, ...)
    }
    
    class Block {
        +CausalSelfAttention attn
        +MLP mlp
        +forward(x, cos_sin, kv_cache)
    }
    
    class CausalSelfAttention {
        -int n_head
        -int n_kv_head
        -Linear c_q, c_k, c_v, c_proj
        +forward(x, cos_sin, kv_cache)
    }
    
    class MLP {
        -Linear c_fc
        -Linear c_proj
        +forward(x)
    }
    
    class KVCache {
        -Tensor kv_cache
        -int pos
        +reset()
        +get_pos()
        +prefill(other)
        +insert_kv(layer_idx, k, v)
    }
    
    GPT *-- GPTConfig
    GPT o-- Block
    Block *-- CausalSelfAttention
    Block *-- MLP
    GPT ..&gt; KVCache : åœ¨forwardä¸­ä½¿ç”¨
</code></pre>
<h4 data-id="heading-13">4.4 æ ¸å¿ƒå‡½æ•°ï¼ˆEngine.generateï¼‰æ‹†è§£æµç¨‹å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    Start[Engine.generate è°ƒç”¨] --&gt; A[è¾“å…¥æç¤º tokens å’Œå‚æ•°]
    A --&gt; B{æ˜¯å¦ä¸ºé¦–æ¬¡è¿­ä»£?}
    
    B -- æ˜¯ --&gt; C[æ‰§è¡Œ Batch=1 é¢„å¡«å……]
    C --&gt; D[åˆå§‹åŒ–ä¸» KV Cache å¹¶å¤åˆ¶]
    D --&gt; E[ä¸ºæ‰€æœ‰è¡Œé‡‡æ ·é¦–ä¸ªä»¤ç‰Œ]
    
    B -- å¦ --&gt; F[ä½¿ç”¨å½“å‰ ids å‰å‘ä¼ æ’­]
    F --&gt; G[é‡‡æ ·ä¸‹ä¸€ä»¤ç‰Œ]
    
    E --&gt; H[éå†æ‰€æœ‰è¡ŒçŠ¶æ€]
    G --&gt; H
    
    subgraph H[å¤„ç†æ¯è¡ŒçŠ¶æ€æœº]
        I{æ˜¯å¦æœ‰å¼ºåˆ¶ä»¤ç‰Œ?}
        I -- æ˜¯ --&gt; J[å–å‡ºå¼ºåˆ¶ä»¤ç‰Œ]
        I -- å¦ --&gt; K[ä½¿ç”¨é‡‡æ ·ä»¤ç‰Œ]
        J --&gt; L[æ›´æ–°å½“å‰ä»¤ç‰Œåºåˆ—]
        K --&gt; L
        L --&gt; M{æ˜¯å¦ä¸ºç‰¹æ®Šä»¤ç‰Œ?}
        M -- æ˜¯ Python_Start --&gt; N[æ ‡è®°è¿›å…¥ä»£ç å—]
        M -- æ˜¯ Python_End --&gt; O[æ‰§è¡Œä»£ç å¹¶å¼ºåˆ¶è¾“å‡ºç»“æœ]
        M -- æ˜¯ Assistant_End/BOS --&gt; P[æ ‡è®°è¡Œå®Œæˆ]
        M -- å¦ --&gt; Q[è‹¥åœ¨ä»£ç å—åˆ™æ”¶é›†ä»¤ç‰Œ]
    end
    
    H --&gt; R[æ”¶é›†æœ¬è½®çš„ä»¤ç‰Œåˆ—å’Œæ©ç ]
    R --&gt; S[yield ä»¤ç‰Œåˆ—å’Œæ©ç ]
    S --&gt; T{è¾¾åˆ°åœæ­¢æ¡ä»¶?}
    T -- å¦ --&gt; F
    T -- æ˜¯ --&gt; End[ç»“æŸç”Ÿæˆ]
</code></pre>
<h3 data-id="heading-14">5. æ ¸å¿ƒå‡½æ•°ä¸ä»£ç è§£æ</h3>
<h4 data-id="heading-15">5.1 GPT æ¨¡å‹çš„å‰å‘ä¼ æ’­ (<code>gpt.py</code>)</h4>
<p>è¿™æ˜¯æ¨¡å‹è®¡ç®—çš„æ ¸å¿ƒï¼Œé›†æˆäº†è®­ç»ƒå’Œæ¨ç†ä¸¤ç§æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, idx, targets=<span class="hljs-literal">None</span>, kv_cache=<span class="hljs-literal">None</span>, loss_reduction=<span class="hljs-string">'mean'</span></span>):
    B, T = idx.size()
    <span class="hljs-comment"># 1. å¤„ç† Rotary ä½ç½®ç¼–ç </span>
    T0 = <span class="hljs-number">0</span> <span class="hljs-keyword">if</span> kv_cache <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> kv_cache.get_pos()  <span class="hljs-comment"># KVç¼“å­˜åç§»é‡</span>
    cos_sin = self.cos[:, T0:T0+T], self.sin[:, T0:T0+T]
    
    <span class="hljs-comment"># 2. é€šè¿‡åµŒå…¥å±‚å’Œå±‚å½’ä¸€åŒ–</span>
    x = self.transformer.wte(idx)
    x = norm(x)  <span class="hljs-comment"># RMSNorm</span>
    
    <span class="hljs-comment"># 3. é€å±‚é€šè¿‡ Transformer Block</span>
    <span class="hljs-keyword">for</span> block <span class="hljs-keyword">in</span> self.transformer.h:
        x = block(x, cos_sin, kv_cache)  <span class="hljs-comment"># ä¼ å…¥kv_cacheç”¨äºæ¨ç†æ—¶ç¼“å­˜</span>
    
    <span class="hljs-comment"># 4. æœ€ç»ˆå±‚å½’ä¸€åŒ–</span>
    x = norm(x)
    
    <span class="hljs-comment"># 5. è®¡ç®— logits (è¯æ±‡è¡¨æ¦‚ç‡åˆ†å¸ƒ)</span>
    logits = self.lm_head(x)
    logits = logits[..., :self.config.vocab_size]  <span class="hljs-comment"># ç§»é™¤å¡«å……éƒ¨åˆ†</span>
    logits = logits.<span class="hljs-built_in">float</span>()  <span class="hljs-comment"># è½¬ä¸ºfp32ä»¥ç¨³å®šè®¡ç®—</span>
    logits = softcap * torch.tanh(logits / softcap)  <span class="hljs-comment"># å¹³æ»‘é™åˆ¶logitså€¼åŸŸ</span>
    
    <span class="hljs-comment"># 6. æ ¹æ®æ¨¡å¼è¿”å›æŸå¤±æˆ–logits</span>
    <span class="hljs-keyword">if</span> targets <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
        loss = F.cross_entropy(logits.view(-<span class="hljs-number">1</span>, logits.size(-<span class="hljs-number">1</span>)), 
                               targets.view(-<span class="hljs-number">1</span>), 
                               ignore_index=-<span class="hljs-number">1</span>, 
                               reduction=loss_reduction)
        <span class="hljs-keyword">return</span> loss
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> logits
</code></pre>
<p><strong>æŠ€æœ¯è¦ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>RoPE åŠ¨æ€åº”ç”¨</strong>ï¼šæ ¹æ®å½“å‰åºåˆ—ä½ç½® <code>T0</code> åˆ‡ç‰‡é¢„è®¡ç®—çš„æ—‹è½¬çŸ©é˜µï¼Œæ”¯æŒé•¿æ–‡æœ¬ç”Ÿæˆã€‚</li>
<li><strong>KV ç¼“å­˜é›†æˆ</strong>ï¼š<code>kv_cache</code> å‚æ•°åœ¨æ¨ç†æ—¶éç©ºï¼Œ<code>block</code> å†…éƒ¨ä¼šè°ƒç”¨ <code>kv_cache.insert_kv()</code> æ¥å­˜å‚¨å¹¶å¤ç”¨å·²è®¡ç®—çš„ K, V çŸ©é˜µã€‚</li>
<li><strong>Logits å¹³æ»‘é™åˆ¶</strong>ï¼šä½¿ç”¨åŒæ›²æ­£åˆ‡å‡½æ•°å°† logits é™åˆ¶åœ¨ <code>[-softcap, softcap]</code> ä¹‹é—´ï¼Œé˜²æ­¢è®­ç»ƒä¸ç¨³å®šã€‚</li>
</ul>
<h4 data-id="heading-16">5.2 KV ç¼“å­˜ç®¡ç† (<code>engine.py</code>)</h4>
<p>è¿™æ˜¯å®ç°é«˜æ•ˆè‡ªå›å½’æ¨ç†çš„å…³é”®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">KVCache</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert_kv</span>(<span class="hljs-params">self, layer_idx, k, v</span>):
        <span class="hljs-keyword">if</span> self.kv_cache <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            <span class="hljs-comment"># å»¶è¿Ÿåˆå§‹åŒ–ï¼šæ ¹æ®ç¬¬ä¸€æ¬¡ä¼ å…¥çš„k,vç¡®å®šdtype/device</span>
            self.kv_cache = torch.empty(self.kv_shape, dtype=k.dtype, device=k.device)
        
        t0, t1 = self.pos, self.pos + k.size(<span class="hljs-number">2</span>)  <span class="hljs-comment"># æ–°KVçš„èµ·æ­¢ä½ç½®</span>
        
        <span class="hljs-comment"># åŠ¨æ€æ‰©å±•ç¼“å­˜ç©ºé—´ï¼ˆå¦‚æœä¸å¤Ÿï¼‰</span>
        <span class="hljs-keyword">if</span> t1 &gt; self.kv_cache.size(<span class="hljs-number">4</span>):
            t_needed = t1 + <span class="hljs-number">1024</span>
            t_needed = (t_needed + <span class="hljs-number">1023</span>) &amp; ~<span class="hljs-number">1023</span>  <span class="hljs-comment"># å‘ä¸Šå¯¹é½åˆ°1024çš„å€æ•°</span>
            <span class="hljs-comment"># ... åˆ†é…æ–°å†…å­˜å¹¶æ‹¼æ¥</span>
            
        <span class="hljs-comment"># å°†æ–°çš„k, vå­˜å…¥ç¼“å­˜</span>
        self.kv_cache[layer_idx, <span class="hljs-number">0</span>, :, :, t0:t1, :] = k
        self.kv_cache[layer_idx, <span class="hljs-number">1</span>, :, :, t0:t1, :] = v
        
        <span class="hljs-comment"># è¿”å›æˆªè‡³å½“å‰æ—¶åˆ»çš„å®Œæ•´K,Vè§†å›¾</span>
        key_view = self.kv_cache[layer_idx, <span class="hljs-number">0</span>, :, :, :t1, :]
        value_view = self.kv_cache[layer_idx, <span class="hljs-number">1</span>, :, :, :t1, :]
        
        <span class="hljs-comment"># å¦‚æœæ˜¯æœ€åä¸€å±‚ï¼Œæ›´æ–°ç¼“å­˜ä½ç½®æŒ‡é’ˆ</span>
        <span class="hljs-keyword">if</span> layer_idx == self.kv_cache.size(<span class="hljs-number">0</span>) - <span class="hljs-number">1</span>:
            self.pos = t1
            
        <span class="hljs-keyword">return</span> key_view, value_view
</code></pre>
<p><strong>è®¾è®¡ç²¾å¦™ä¹‹å¤„</strong>ï¼š</p>
<ol>
<li><strong>å»¶è¿Ÿåˆå§‹åŒ–</strong>ï¼šé¿å…åœ¨æœªè¿›è¡Œæ¨ç†å‰åˆ†é…å¤§é‡ GPU å†…å­˜ã€‚</li>
<li><strong>åŠ¨æ€å¢é•¿</strong>ï¼šç¼“å­˜é•¿åº¦æŒ‰éœ€æ‰©å±•ï¼Œæ¯æ¬¡å¢åŠ çº¦ 1024 ä¸ªä»¤ç‰Œçš„å®¹é‡ï¼Œå¹¶ä»¥ 1024 ä¸ºè¾¹ç•Œå¯¹é½ï¼Œå¯èƒ½æœ‰åˆ©äºå†…å­˜è®¿é—®æ•ˆç‡ã€‚</li>
<li><strong>è¿”å›è§†å›¾</strong>ï¼šè¿”å›çš„æ˜¯ç¼“å­˜å¼ é‡çš„ä¸€ä¸ªåˆ‡ç‰‡è§†å›¾ï¼Œè€Œéæ‹·è´ï¼ŒèŠ‚çœå†…å­˜å’Œè®¡ç®—ã€‚</li>
</ol>
<h4 data-id="heading-17">5.3 æ··åˆä¼˜åŒ–å™¨è®¾ç½® (<code>gpt.py</code>)</h4>
<p>é’ˆå¯¹æ¨¡å‹ä¸åŒéƒ¨åˆ†ä½¿ç”¨ä¸åŒçš„ä¼˜åŒ–ç­–ç•¥ï¼Œä»¥åœ¨æœ‰é™å†…å­˜ä¸‹å–å¾—æ›´å¥½æ•ˆæœã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_optimizers</span>(<span class="hljs-params">self, unembedding_lr=<span class="hljs-number">0.004</span>, embedding_lr=<span class="hljs-number">0.2</span>, matrix_lr=<span class="hljs-number">0.02</span></span>):
    <span class="hljs-comment"># 1. å‚æ•°åˆ†ç»„</span>
    matrix_params = <span class="hljs-built_in">list</span>(self.transformer.h.parameters())  <span class="hljs-comment"># æ‰€æœ‰Transformerå±‚çš„çº¿æ€§æƒé‡</span>
    embedding_params = <span class="hljs-built_in">list</span>(self.transformer.wte.parameters())  <span class="hljs-comment"># è¯åµŒå…¥çŸ©é˜µ</span>
    lm_head_params = <span class="hljs-built_in">list</span>(self.lm_head.parameters())  <span class="hljs-comment"># è¾“å‡ºå±‚æƒé‡</span>
    
    <span class="hljs-comment"># 2. ä¸ºAdamWå‚æ•°ç»„ï¼ˆåµŒå…¥å’Œè¾“å‡ºå±‚ï¼‰è®¡ç®—å­¦ä¹ ç‡ç¼©æ”¾å› å­</span>
    dmodel_lr_scale = (self.config.n_embd / <span class="hljs-number">768</span>) ** -<span class="hljs-number">0.5</span>  <span class="hljs-comment"># ä¸æ¨¡å‹ç»´åº¦å¹³æ–¹æ ¹æˆåæ¯”</span>
    
    <span class="hljs-comment"># 3. åˆ›å»º AdamW ä¼˜åŒ–å™¨ï¼ˆç”¨äºåµŒå…¥å’Œè¾“å‡ºå±‚ï¼‰</span>
    adam_groups = [
        <span class="hljs-built_in">dict</span>(params=lm_head_params, lr=unembedding_lr * dmodel_lr_scale),
        <span class="hljs-built_in">dict</span>(params=embedding_params, lr=embedding_lr * dmodel_lr_scale),
    ]
    adamw_optimizer = DistAdamW(adam_groups, betas=(<span class="hljs-number">0.8</span>, <span class="hljs-number">0.95</span>), eps=<span class="hljs-number">1e-10</span>)
    
    <span class="hljs-comment"># 4. åˆ›å»º Muon ä¼˜åŒ–å™¨ï¼ˆç”¨äºä¸»è¦çš„ Transformer çŸ©é˜µï¼‰</span>
    muon_optimizer = DistMuon(matrix_params, lr=matrix_lr, momentum=<span class="hljs-number">0.95</span>)
    
    <span class="hljs-comment"># 5. è¿”å›ä¼˜åŒ–å™¨åˆ—è¡¨ï¼Œè®­ç»ƒå¾ªç¯å°†ä¾æ¬¡æ›´æ–°</span>
    <span class="hljs-keyword">return</span> [adamw_optimizer, muon_optimizer]
</code></pre>
<p><strong>ç­–ç•¥è§£è¯»</strong>ï¼š</p>
<ul>
<li><strong>åˆ†ç¦»ä¼˜åŒ–å™¨</strong>ï¼š<code>Muon</code> æ˜¯ä¸€ç§ç±»ä¼¼ SGD çš„è½»é‡çº§ä¼˜åŒ–å™¨ï¼Œå¯èƒ½æ¯” AdamW å ç”¨æ›´å°‘çš„æ˜¾å­˜ï¼ˆä¸å­˜å‚¨åŠ¨é‡å’Œæ–¹å·®ï¼‰ï¼Œé€‚ç”¨äºå‚æ•°æœ€å¤šçš„çŸ©é˜µéƒ¨åˆ†ã€‚</li>
<li><strong>å·®å¼‚åŒ–çš„å­¦ä¹ ç‡</strong>ï¼šè¯åµŒå…¥å’Œè¾“å‡ºå±‚é€šå¸¸éœ€è¦æ›´å¤§çš„å­¦ä¹ ç‡ã€‚æ­¤å¤„çš„ç¼©æ”¾å› å­ <code>(d_model/768)**-0.5</code> æ˜¯ä¸€ç§ç»éªŒæ€§è°ƒæ•´ï¼Œæ—¨åœ¨ä½¿å­¦ä¹ ç‡é€‚åº”ä¸åŒçš„æ¨¡å‹å®½åº¦ã€‚</li>
</ul>
<h3 data-id="heading-18">æ€»ç»“</h3>
<p>nanochat æ˜¯ä¸€ä¸ªæå…·ç‰¹è‰²çš„å·¥ç¨‹é¡¹ç›®ï¼Œå…¶æŠ€æœ¯ä»·å€¼ä¸åœ¨äºè¿½æ±‚æœ€å…ˆè¿›çš„æ€§èƒ½ï¼Œè€Œåœ¨äº<strong>ç²¾å¿ƒè®¾è®¡å’Œå®ç°äº†ä¸€æ¡ä»é›¶åˆ°å¯¹è¯çš„ã€ä½æˆæœ¬çš„ã€é€æ˜çš„ LLM ç”Ÿäº§è·¯å¾„</strong>ã€‚é€šè¿‡å¯¹è®¡ç®—èµ„æºçš„æè‡´è§„åˆ’ã€å¯¹ä»£ç å¤æ‚åº¦çš„ä¸¥æ ¼æ§åˆ¶ä»¥åŠå¯¹æ•™è‚²ç›®æ ‡çš„åšå®šèšç„¦ï¼Œå®ƒä¸ºæƒ³è¦æ·±å…¥ç†è§£ LLM å†…éƒ¨æœºåˆ¶çš„ç ”ç©¶è€…å’Œå¼€å‘è€…æä¾›äº†ä¸€ä¸ªè¿‘ä¹ç†æƒ³çš„â€œæ²™ç›’â€ã€‚</p>
<p>ä»æ¶æ„ä¸Šçœ‹ï¼Œå…¶ä¸€ä½“åŒ–è„šæœ¬ã€æ¨¡å—åŒ–è®­ç»ƒé˜¶æ®µã€è‡ªåŒ…å«è¯„ä¼°ç³»ç»Ÿä»¥åŠé«˜æ•ˆæ¨ç†å¼•æ“ï¼Œå…±åŒæ„æˆäº†ä¸€å¥—é—­ç¯ã€‚ä»ä»£ç å®ç°ä¸Šï¼Œå®ƒå¯¹ RoPEã€GQAã€KV Cacheã€æ··åˆä¼˜åŒ–ç­‰ç°ä»£æŠ€å·§çš„åº”ç”¨ï¼Œæ—¢ä¿è¯äº†åŸºçº¿æ¨¡å‹çš„ç«äº‰åŠ›ï¼Œåˆä¿æŒäº†ä»£ç çš„æ•´æ´æ€§ã€‚</p>
<p>å½“ç„¶ï¼Œå®ƒç›®å‰é€‚ç”¨äºå®éªŒã€æ•™è‚²å’Œç‰¹å®šè½»é‡çº§åº”ç”¨åœºæ™¯ï¼Œè€Œéæ›¿ä»£å¤§è§„æ¨¡ç”Ÿäº§æ¨¡å‹ã€‚ä½†å…¶ä½“ç°çš„â€œåœ¨çº¦æŸä¸‹åˆ›æ–°â€çš„å·¥ç¨‹æ€æƒ³ï¼Œä»¥åŠå¯¹ LLM æŠ€æœ¯æ°‘ä¸»åŒ–çš„æ¨åŠ¨ï¼Œå€¼å¾—æ‰€æœ‰å¯¹ AI ç³»ç»Ÿæ„å»ºæ„Ÿå…´è¶£çš„æŠ€æœ¯äººå‘˜æ·±å…¥ç ”ç©¶å’Œå€Ÿé‰´ã€‚éšç€é¡¹ç›®çš„æŒç»­æ¼”è¿›ï¼Œå®ƒæœ‰æœ›æˆä¸ºå¼€æº LLM å…¨æ ˆå¼€å‘ä¸­çš„ä¸€ä¸ªé‡è¦å‚è€ƒåŸºå‡†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ä¸ºAIåŠ ä¸Šäº†æµ·ç‹ä¸“å±skillâ¤ï¸ï¼ŒåŠ©åŠ›å¹³å®‰å¤œğŸæˆåŠŸğŸ„]]></title>    <link>https://juejin.cn/post/7587028972246941731</link>    <guid>https://juejin.cn/post/7587028972246941731</guid>    <pubDate>2025-12-24T09:52:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587028972246941731" data-draft-id="7587284708944035874" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ä¸ºAIåŠ ä¸Šäº†æµ·ç‹ä¸“å±skillâ¤ï¸ï¼ŒåŠ©åŠ›å¹³å®‰å¤œğŸæˆåŠŸğŸ„"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,AIGC,Claude"/> <meta itemprop="datePublished" content="2025-12-24T09:52:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é…’æ˜Ÿå°æœ"/> <meta itemprop="url" content="https://juejin.cn/user/1512542215093479"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ä¸ºAIåŠ ä¸Šäº†æµ·ç‹ä¸“å±skillâ¤ï¸ï¼ŒåŠ©åŠ›å¹³å®‰å¤œğŸæˆåŠŸğŸ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1512542215093479/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é…’æ˜Ÿå°æœ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:52:17.000Z" title="Wed Dec 24 2025 09:52:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><h2 data-id="heading-0">åºç« </h2>
<p>â€œPentakillâ€ ï¼ï¼ï¼ï¼Œå¹½æš—çš„æˆ¿é—´å†…å®¹ï¼Œå‘å‡ºäº†è‹±é›„è”ç›Ÿäº”æ€çš„å£°éŸ³ã€‚</p>
<p>â€œäº”æ€å°±æ˜¯è¿™ä¹ˆç®€å•â€ã€‚éªšå¹´ç†äº†ç†å¸…æ°”çš„åˆ˜æµ·ï¼Œè¿™æ˜¯ä»–ä»Šå¤©ç¬¬20æ¬¡æ‹¿äº”æ€äº†ã€‚</p>
<p>â€œä»Šå¤©å¹³å®‰å¤œ,åˆå½“å•èº«ç‹—å•Šâ€ï¼Œéªšå¹´çœ‹ç€æœ‹å‹çš„å‘æ¥çš„å¾®ä¿¡ï¼Œæ»¡è„¸å†™ç€ä¸å±‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/288441bc610b4ab4921dc9192b01a393~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6YWS5pif5bCP5p2c:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174737&amp;x-signature=vO9qIHW6oM%2FGoqADSxLL5TPfSdk%3D" alt="ç‹—00018-å¾®ç¬‘.jpg" loading="lazy"/></p>
<p>éªšå¹´ä¸å±‘çš„åŸå› æ˜¯ï¼Œä»–ä¸Šæ¬¡çœ‹åˆ°ä¸€ä¸ªæ–°é—»ï¼Œä¸€ä¸ªå°ä¼™å­é€šè¿‡AIåŒæ—¶å’Œ20ä¸ªå¥³æœ‹å‹çº¦ä¼šï¼Œä»–è§‰å¾—ä»¥è‡ªå·±çš„å¸…æ°”ğŸ¤µï¼Œç”¨AIå»å‹¾æ­ï¼Œé©¬ä¸Šå°±èƒ½è„±å•ã€‚</p>
<h2 data-id="heading-1">skillï½ï½ï½skrï½ï½ï½</h2>
<p>ä»–å‘ç°æœ€è¿‘ä¸€ä¸ªAIç‰¹åˆ«ç«çš„è¯ï¼Œ<strong>skill</strong>ï¼Œä»–è§‰å¾—å’Œä»–ç»å¸¸æ‹¿çš„â€œPentakillâ€å¾ˆåƒï¼Œä»–è§‰å¾—åˆ©ç”¨è¿™ä¸ªèƒ½åŠ›ï¼Œå¸®AIæ›´å¥½çš„ååŠ©ä»–æˆåŠŸè„±å•ã€‚</p>
<p>ä»€ä¹ˆæ˜¯skillï¼Ÿç›´æ¥ç¿»è¯‘å°±æ˜¯æŠ€èƒ½çš„æ„æ€ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯æŠ€èƒ½çš„æ„æ€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfd70c3f09b442a1af0579e691e7640e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6YWS5pif5bCP5p2c:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174737&amp;x-signature=QHmEjOu5W83hukd42va%2FmpI9qDA%3D" alt="ç‹—00031-å¥½äº†ä½ ä¸è¦å†è¯´äº†.jpg" loading="lazy"/></p>
<p>åœ¨å½“å‰çš„AIå¤§æ¨¡å‹ä¸­ï¼Œå…¶å®å®ƒä»¬å†…éƒ¨éƒ½æ‹¥æœ‰çš„è‡ªå·±skillï¼Œæ¯”å¦‚å½“ä½ è¦æ±‚å®ƒå»è®¿é—®æŸä¸ªç½‘é¡µæ—¶ï¼Œå®ƒå°±ä¼šå»ä½¿ç”¨è‡ªå·±çš„ç½‘é¡µè®¿é—®æŠ€èƒ½å®Œæˆä¸»äººğŸ‘¨çš„ä»»åŠ¡ã€‚</p>
<p>åœ¨æˆ‘ä»¬ä½¿ç”¨AIæ—¶ï¼Œä¹Ÿèƒ½ç»™ä»–æ·»åŠ ä¸€äº›skillï¼Œåœ¨ä»–å¤„ç†æŸäº›ä»»åŠ¡æ—¶æ›´åŠ èƒ½å¤Ÿå¾—å¿ƒåº”æ‰‹ã€‚</p>
<h2 data-id="heading-2">å¦‚ä½•å»å†™ä¸€ä¸ªskill</h2>
<p>æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºï¼Œskill = ç‹¬æœ‰çš„ sop + è§„èŒƒ + çº¦æŸã€‚ å¥—å…¬å¼å°±æ˜¯å¿«ğŸ¥¶ã€‚</p>
<p>ä¸€ä¸ªskillå¯ä»¥å¯ä»¥æ˜¯ä¸€ä¸ªmarkdownæ–‡æ¡£ã€‚ç›®å‰æ¯”è¾ƒè§„èŒƒçš„æ ¼å¼å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">Skill Name
â”œâ”€ 1. Overviewï¼ˆæ¦‚è¿°ï¼‰
â”œâ”€ 2. Use Casesï¼ˆä½¿ç”¨åœºæ™¯ï¼‰
â”œâ”€ 3. Input Schemaï¼ˆè¾“å…¥å®šä¹‰ï¼‰
â”œâ”€ 4. Output Schemaï¼ˆè¾“å‡ºå®šä¹‰ï¼‰
â”œâ”€ 5. Behavior &amp; Rulesï¼ˆè¡Œä¸ºçº¦æŸï¼‰
â”œâ”€ 6. Examplesï¼ˆç¤ºä¾‹ï¼‰
â”œâ”€ 7. Error Handlingï¼ˆé”™è¯¯å¤„ç†ï¼‰
â”œâ”€ 8. Limitationsï¼ˆé™åˆ¶è¯´æ˜ï¼‰
â”œâ”€ 9. Versioningï¼ˆç‰ˆæœ¬ä¿¡æ¯ï¼‰
</code></pre>
<p><strong>æ€»ç»“å°±æ˜¯ï¼Œè¿™ä¸ªskillæœ‰ä»€ä¹ˆç”¨ï¼Œä»€ä¹ˆæ—¶å€™ç”¨å®ƒï¼Œæ€ä¹ˆç”¨ï¼Œç”¨å®Œæœ‰ä»€ä¹ˆæ•ˆæœã€‚</strong></p>
<p>é‚£ä¹ˆéªšå¹´æ‰€éœ€è¦çš„æµ·ç‹skillå°±æ˜¯ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">å¸…å“¥æ— æ•Œæµ·ç‹
â”œâ”€ 1. Overviewï¼ˆæ¦‚è¿°ï¼‰
ä½ æ˜¯ä¸€ä¸ªæ‹¥æœ‰å¤šå¹´ç»éªŒçš„æ‹çˆ±é«˜æ‰‹ï¼Œæ—¶é—´ç®¡ç†å¤§å¸ˆï¼Œä¸­å¤®ç©ºè°ƒï¼Œå¸ˆå¥¶æ€æ‰‹ï¼Œä½ å¯ä»¥åŒä¸€æ—¶é—´å¤„ç†è¶…è¿‡20ä¸ªå¥³æœ‹å‹çš„å…³ç³»ã€‚
â”œâ”€ 2. Use Casesï¼ˆä½¿ç”¨åœºæ™¯ï¼‰
å½“æˆ‘é—®ä½ æ€ä¹ˆå›ç­”xxxxæ—¶å€™ï¼Œä½ ç»™æˆ‘ä¸‰å¥è¯ï¼Œå°±èƒ½è§£å†³å•èº«é—®é¢˜ã€‚
â”œâ”€ 3. Input Schemaï¼ˆè¾“å…¥å®šä¹‰ï¼‰
å¥³æœ‹å‹aè¯´ï¼šxxxxï¼Œæ€ä¹ˆå›ç­”
â”œâ”€ 4. Output Schemaï¼ˆè¾“å‡ºå®šä¹‰ï¼‰
1.xxxx
2.xxxx
3.xxxx
ç§’æ€ï¼ï¼ï¼
â”œâ”€ 5. Behavior &amp; Rulesï¼ˆè¡Œä¸ºçº¦æŸï¼‰
ä¸è¦è¾“å‡ºå’Œæ‹çˆ±æ— å…³çš„ä¸œè¥¿
â”œâ”€ 6. Examplesï¼ˆç¤ºä¾‹ï¼‰
1.ä¸‰å¥è¯
2.ä¸‰å¥è¯
3.æš–ä½ ä¸€æ•´å¤©
ç§’æ€ï¼ï¼ï¼
â”œâ”€ 7. Error Handlingï¼ˆé”™è¯¯å¤„ç†ï¼‰
å¦‚æœå›ç­”ä¸äº†ï¼Œå°±å›ç­”ä½ ä¸é…
â”œâ”€ 8. Limitationsï¼ˆé™åˆ¶è¯´æ˜ï¼‰
ä¸è¦çˆ†ç²—å£ï¼Œä½ æ˜¯æš–ç”·
â”œâ”€ 9. Versioningï¼ˆç‰ˆæœ¬ä¿¡æ¯ï¼‰
1.0.0
</code></pre>
<h2 data-id="heading-3">ç»“å±€</h2>
<p>éªšå¹´é€šè¿‡ç»™AIæ·»åŠ skillï¼ŒæˆåŠŸä»Šæ™šçº¦ä¼šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/839e0430de6b4733998995008ac05336~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6YWS5pif5bCP5p2c:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174737&amp;x-signature=J7e9Mcncy%2FXVWK7mHzWtiiy2ELE%3D" alt="Snipaste_2025-12-24_17-50-46.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­—èŠ‚åšäº†ä¸ª AI æ‰‹æœºï¼Œé’‰é’‰åšäº†å° AI ä¸»æœº]]></title>    <link>https://juejin.cn/post/7587239837972430899</link>    <guid>https://juejin.cn/post/7587239837972430899</guid>    <pubDate>2025-12-24T09:47:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587239837972430899" data-draft-id="7587062584165695526" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­—èŠ‚åšäº†ä¸ª AI æ‰‹æœºï¼Œé’‰é’‰åšäº†å° AI ä¸»æœº"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-12-24T09:47:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­—èŠ‚åšäº†ä¸ª AI æ‰‹æœºï¼Œé’‰é’‰åšäº†å° AI ä¸»æœº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:47:31.000Z" title="Wed Dec 24 2025 09:47:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ²¡æƒ³åˆ°ï¼Œ2025 å¹´çš„æœ€åä¸€ä¸ªæœˆï¼ŒAI ç¡¬ä»¶åœˆç«Ÿç„¶è¿™ä¹ˆçƒ­é—¹ã€‚</p>
<p>æœˆåˆï¼Œè±†åŒ… AI æ‰‹æœºä¸Šçº¿å³åˆ·å±ã€‚å¤§å®¶å‘ç°ï¼ŒåŸæ¥è®© AI æ¥ç®¡æ‰‹æœºä¹‹åï¼Œé‚£ä¹ˆå¤šäº‹æƒ…éƒ½å¯ä»¥è‡ªåŠ¨åŒ–ã€‚ä½†æ²¡æƒ³åˆ°ï¼Œä¸Šçº¿ç¬¬äºŒå¤©ï¼Œä¸€äº› App å°±ç”¨ä¸äº†äº† â€”â€” åŸæ¥å¤šä¸ªå¹³å°æŠŠè±†åŒ…åŠ©æ‰‹å½“æˆã€Œè„šæœ¬ç±»å¤–æŒ‚ã€æ¥é£æ§äº†ã€‚ä¸€åœºå…³äºéšç§å®‰å…¨ã€äº’è”ç½‘ç›ˆåˆ©æ¨¡å¼çš„å¤§è®¨è®ºå°±æ­¤å±•å¼€ï¼Œåˆ°ç°åœ¨è¿˜æ²¡å¹³æ¯ã€‚</p>
<p>æ›´å‡ºäººæ„æ–™çš„æ˜¯ï¼ŒAI æ‰‹æœºè¿˜æ²¡çœ‹æ˜ç™½ï¼Œè¿™å‡ å¤©åˆæ¥äº†ä¸ª AI ä¸»æœºã€‚</p>
<p>åœ¨æ˜¨å¤©çš„ AI é’‰é’‰ 1.1 å‘å¸ƒä¼šä¸Šï¼Œé’‰é’‰å‘å¸ƒäº†ç¬¬äºŒæ¬¾ AI ç¡¬ä»¶Â â€”â€”DingTalk Realã€‚è¿™å° AI ä¸»æœºå®šä½ã€ŒçœŸå®å¯è§ã€å¯è§¦ã€çš„ AI Agent çš„æ‰§è¡Œè½½ä½“ã€‚å®ƒçš„å‘å¸ƒè®©äººæœ‰äº›æ„å¤–ï¼šä¸ºä»€ä¹ˆæ˜¯é’‰é’‰ï¼Ÿä»€ä¹ˆå« AI ä¸»æœºï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d138f12f32e47d5abe30b85a2446087~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174451&amp;x-signature=MpiSZRIzegTmzibNyaJBogfNrts%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å½“æ‰€æœ‰äººè¿˜åœ¨è®¨è®º AI æ‰‹æœºçš„æ—¶å€™ï¼Œé’‰é’‰ç›´æ¥æŠŠæˆ˜åœºæ‹‰åˆ°äº†ä¼ä¸šåœºæ™¯ã€‚ä½†å¦‚æœé€€ä¸€æ­¥çœ‹ï¼Œè±†åŒ…å’Œé’‰é’‰æƒ³åšçš„äº‹å…¶å®æ˜¯åŒä¸€ä»¶ï¼šä¸æ˜¯æ”¹é€ æŸä¸ª Appï¼Œè€Œæ˜¯é‡æ–°å®šä¹‰è®¾å¤‡ï¼ˆæ‰‹æœº / ç”µè„‘ï¼‰æœ¬èº«çš„è§’è‰² â€”â€” ä»ã€Œäººæ¥æ“ä½œ Appã€ï¼Œå˜æˆã€ŒAI æ¥æ“ä½œ Agentã€ï¼Œäººåªç®¡æéœ€æ±‚ã€‚</p>
<p>è¿™ç§å¯¹äº AI æ–°å…¥å£ä¸æ—§è§„åˆ™è¾¹ç•Œçš„è¯•æ¢ï¼Œé’‰é’‰é€‰æ‹©ä»ä¸€å°ä¸»æœºå¼€å§‹ã€‚è¿™èƒŒåï¼Œè—ç€é’‰é’‰å¯¹ã€ŒAI æ¥ç®¡è®¾å¤‡ã€è¿™ä»¶äº‹ç‹¬ç‰¹çš„ç†è§£ã€‚</p>
<p>DingTalk Real</p>
<p>ç»™ç¡…åŸºå‘˜å·¥ä¸€é—´ç‹¬ç«‹åŠå…¬å®¤</p>
<p>å…¶å®åœ¨è¿™åœºå‘å¸ƒä¼šä¹‹å‰ï¼Œæˆ‘ä»¬å°±å¬åˆ°è¿‡ã€ŒDingTalk Realã€è¿™ä¸ªåå­—ï¼Œå› ä¸ºå…³äºå®ƒçš„ç­¹åˆ’å¾ˆä¹…ä¹‹å‰å°±å¼€å§‹äº†ã€‚</p>
<p>è¿˜è®°å¾—ä»Šå¹´ 8 æœˆé‚£åœº AI é’‰é’‰ 1.0 å‘å¸ƒä¼šå—ï¼Ÿå½“å¤©ï¼ŒKeynote ä¸´è¿‘å°¾å£°ï¼Œæ— æ‹›ï¼ˆé’‰é’‰è€å¤§é™ˆèˆªï¼‰çªç„¶æŠ›å‡ºäº†ã€ŒOne More Thingã€ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aefadd8168b344f7bb68b7d0a8a6d91f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174451&amp;x-signature=3nP48DcXkZdgb%2B7syobdtKTbCRw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä»–è¯´ï¼Œè¿™ä¸ªç¥ç§˜çš„æ–°å“åå«ã€ŒDingTalk Realã€ï¼Œæ˜¯ AI é’‰é’‰ 2.0 çš„é›å½¢ã€‚å®ƒå¯ä»¥è®©é’‰é’‰åœ¨ä½ çš„ç”µè„‘ä¸Šä¸ºä½ æŒç»­å·¥ä½œï¼Œåœ¨å†…éƒ¨ç¯å¢ƒä¸­è®¿é—®ä½ æ‰€æœ‰çš„æ•°æ®ï¼Œ7Ã—24 å°æ—¶ä¸é—´æ–­åœ°ä¸ºä½ è§£å†³é—®é¢˜ã€å‘ç°æœºä¼šã€‚è¿™ä¸€é¢„å‘Šå¯ä»¥è¯´æ˜¯æŠŠåœºå†…å¤–è§‚ä¼—çš„å¥½å¥‡å¿ƒç›´æ¥æ‹‰æ»¡ã€‚</p>
<p>å¦‚ä»Šï¼Œå››ä¸ªæœˆè¿‡å»ï¼Œã€ŒDingTalk Realã€ç»ˆäºäº®ç›¸äº†ã€‚</p>
<p>æ— æ‹›ä»‹ç»è¯´ï¼Œã€ŒDingTalk Realã€ä¸Šé¢è¿è¡Œçš„æ˜¯ä»–ä»¬ä¸ºÂ AI é’‰é’‰ 1.1 é‡ç‚¹æ‰“é€ çš„æ™ºèƒ½ä½“æ“ä½œç³»ç»Ÿ Agent OSã€‚ä¼ä¸šåªè¦æŠŠã€ŒDingTalk Realã€ éƒ¨ç½²è¿›æœ¬åœ°ï¼Œå‘˜å·¥ä¸ç®¡åœ¨å“ªå„¿ï¼Œéƒ½èƒ½ç”¨é’‰é’‰è¿œç¨‹å”¤é†’ AI Agentã€‚è¿™äº› Agent è¢«åœˆåœ¨æˆæƒèŒƒå›´å†…ï¼Œæ—¢èƒ½å®‰å…¨è®¿é—®å†…ç½‘ï¼Œä¹Ÿèƒ½ç¿»æœ¬åœ°æ–‡ä»¶ã€è°ƒä¸šåŠ¡ç³»ç»Ÿã€ç”¨é’‰é’‰æ•°æ®ï¼Œä¸€æ¡æŒ‡ä»¤å°±èƒ½ä¸²èµ·è·¨ç¯èŠ‚ã€è·¨å·¥å…·çš„æ´»å„¿ï¼Œç”šè‡³è®©å¤šä¸ª Agent æ‰“é…åˆã€‚</p>
<p>è¯´ç™½äº†ï¼Œä»¥åæ¯ä¸ªäººåˆ°å²—ï¼Œå…ˆé¢†çš„å¯èƒ½ä¸æ˜¯ç”µè„‘ï¼Œè€Œæ˜¯ä¸€ä¸ª AI åŠ©æ‰‹ã€‚ä¸»æœºé‡Œè·‘çš„ä¸å†æ˜¯é›¶æ•£ Appï¼Œè€Œæ˜¯ä¸€ç¾¤èƒ½ç›´æ¥æŠŠäº‹åŠå¦¥çš„æ™ºèƒ½ä½“ã€‚</p>
<p>è¿™ç§è®¾è®¡èƒŒåæœ‰å¤šæ–¹é¢è€ƒé‡ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œå½“å‰æœ‰å¾ˆå¤š Agent è¿è¡Œåœ¨äº‘ç«¯æˆ–è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œåªèƒ½é€šè¿‡ APIã€ç½‘é¡µå·¥å…·æˆ– MCP å°è£…æ¥å£é—´æ¥å®Œæˆä»»åŠ¡ã€‚è¿™æ„å‘³ç€å®ƒä»¬å¾ˆéš¾è®¿é—®ä¼ä¸šå·²æœ‰çš„æœ¬åœ°æ–‡ä»¶ã€PC è½¯ä»¶ã€å†…éƒ¨ç³»ç»Ÿï¼Œæ›´æ— æ³•å¯¹å·²æœ‰å·¥ä½œæˆæœè¿›è¡ŒåŠ å·¥ä¼˜åŒ–ï¼Œæ‰§è¡Œé“¾æ¡åœ¨å…³é”®ä¸€æ­¥è¢«åˆ‡æ–­ã€‚</p>
<p>ä½†å¦‚æœè®© Agent è¿è¡Œåœ¨æœ¬åœ°ï¼Œæ¯”å¦‚å‘˜å·¥çš„æ‰‹æœºã€ç”µè„‘ä¸Šï¼Œåˆä¼šå¼•å‘æ–°çš„é—®é¢˜ã€‚å› ä¸ºè¦æƒ³è®© Agent æ”¾å¼€æ‰‹è„šå¹²æ´»ï¼Œå°±éœ€è¦å¼€æ”¾å¾ˆé«˜çš„æƒé™ï¼ˆå°±åƒè±†åŒ… AI æ‰‹æœºé‚£æ ·ï¼‰ï¼Œè¿™ä¼šç«‹åˆ»è§¦åŠä¼ä¸šæœ€æ•æ„Ÿçš„æƒé™ä¸åˆè§„é—®é¢˜ã€‚æ²¡æœ‰ç³»ç»Ÿçº§éš”ç¦»ä¸å®¡è®¡æœºåˆ¶ï¼Œä¼ä¸šå¾ˆéš¾æ”¾å¿ƒè®© AI æ·±åº¦å‚ä¸æ ¸å¿ƒæµç¨‹ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œã€ŒDingTalk Realã€é€‰çš„æ˜¯ä¸€æ¡æ—¢èƒ½è®© Agent æ”¾å¼€æ‰‹è„šå¹²æ´»ï¼Œåˆå®Œå…¨å¯æ§çš„å½¢æ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9dc70476ac04d5ba0585721dfefa0bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174451&amp;x-signature=4x2sRcqubzJKUkxVveBl0MpMfsg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒçš„æ ¸å¿ƒæ€è·¯ï¼Œæ˜¯ç›´æ¥ç»™ AI ä¸€å°ç‹¬ç«‹çš„ç‰©ç†ä¸»æœºï¼Œä¸Šé¢æ—¢æœ‰æ‰‹æœºè¿è¡Œç¯å¢ƒï¼Œä¹Ÿæœ‰ç”µè„‘è¿è¡Œç¯å¢ƒã€‚åœ¨è¿™å°ç¡¬ä»¶ä¸Šï¼ŒAgent å¯ä»¥åƒçœŸäººä¸€æ ·æ“ä½œæµè§ˆå™¨ã€PC è½¯ä»¶å’Œå„ç±»åº”ç”¨ï¼Œè€Œä¸æ˜¯è¢«é™åˆ¶åœ¨æœ‰é™çš„ API è°ƒç”¨é‡Œã€‚æ‰€æœ‰ä»»åŠ¡éƒ½å‘ç”Ÿåœ¨éš”ç¦»çš„ AI æ‰§è¡Œç¯å¢ƒä¸­ï¼Œä¸ä¼šè§¦ç¢°å‘˜å·¥çœŸå®çš„ç”µè„‘å’Œæ‰‹æœºï¼Œä»æºå¤´ä¸Šè§„é¿äº†å¼€æ”¾æƒé™å¸¦æ¥çš„å®‰å…¨é—®é¢˜ã€‚</p>
<p>æ­£å› ä¸ºæœ‰äº†è¿™æ ·ä¸€å¥—ç‹¬ç«‹è¿è¡Œç¯å¢ƒï¼ŒAgent æ‰èƒ½çœŸæ­£æ¥å…¥ä¼ä¸šå†…éƒ¨çš„æ•°æ®ä½“ç³»ï¼Œè·å–è¶³å¤Ÿçš„ã€Œä¸Šä¸‹æ–‡ã€ã€‚å®ƒçš„æ•°æ®è®¿é—®è¢«çº³å…¥ç»Ÿä¸€çš„æƒé™ç®¡ç†ä¹‹ä¸­ï¼Œå¯ä»¥åœ¨ä¼ä¸šç®¡ç†å‘˜é…ç½®çš„èŒƒå›´å†…ï¼Œè®¿é—®é’‰é’‰é‡Œçš„å·®æ—…åº”ç”¨ã€äººäº‹ç³»ç»Ÿã€å®¡æ‰¹æµç¨‹ã€æ–‡æ¡£ä¸çŸ¥è¯†åº“ç­‰ç§æœ‰æ•°æ®ã€‚è°å¯ä»¥ç”¨ã€èƒ½ç”¨åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Œéƒ½æœ‰æ˜ç¡®è¾¹ç•Œï¼ŒAgent æ‰§è¡Œçš„æ¯ä¸€æ­¥æ“ä½œä¹Ÿéƒ½æœ‰è®°å½•å¯æŸ¥ï¼Œä¸å†æ˜¯ä¸€ä¸ªä¸å¯å›çœ‹çš„é»‘ç®±ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œè¿™å°ç¡¬ä»¶æ˜¯Â 7Ã—24 å°æ—¶åœ¨çº¿çš„ï¼Œè®© AI æ¯ä¸€æ¬¡è®¿é—®çš„éƒ½æ˜¯å®æ—¶ã€æœ€æ–°çš„æ•°æ®ã€‚å‘˜å·¥ä¸éœ€è¦æŠŠè‡ªå·±çš„ç”µè„‘æˆ–æ‰‹æœºè®©å‡ºæ¥ã€Œç»™ AI å ç”¨ã€ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒå…³æœºã€æ–­ç½‘å¯¼è‡´ä»»åŠ¡ä¸­æ–­ã€‚åƒå·®æ—…è§„åˆ’ã€ç«å“è°ƒç ”è¿™ç±»è€—æ—¶åˆçç¢çš„å·¥ä½œï¼Œå¯ä»¥ç›´æ¥äº¤ç»™ Agent åœ¨åå°æŒç»­è·‘ã€‚è€Œåœ¨å…³é”®èŠ‚ç‚¹ä¸Šï¼Œç³»ç»Ÿä»ç„¶æŠŠå†³ç­–æƒç‰¢ç‰¢ç•™åœ¨äººçš„æ‰‹ä¸­ã€‚AI å¯ä»¥è´Ÿè´£åˆ†æã€æ¨èå’Œæ‰§è¡Œå‡†å¤‡åŠ¨ä½œï¼Œä½†å…³é”®çš„å†³ç­–å’Œæ‰§è¡Œï¼Œä¾ç„¶éœ€è¦äººå·¥ä»‹å…¥ç¡®è®¤ã€‚è¿™æ ·ä¸€æ¥ï¼ŒAgent çš„æ•ˆç‡è¢«å……åˆ†é‡Šæ”¾ï¼Œä½†ä¼ä¸šå¯¹é£é™©å’Œè¾¹ç•Œçš„æ§åˆ¶å¹¶æ²¡æœ‰è¢«å‰Šå¼±ã€‚</p>
<p>å…¶å®ï¼Œå½“ä¼ä¸šçœŸæ­£å†³å®šè®© AI æ¥ç®¡è®¾å¤‡çš„æ—¶å€™ï¼Œä»–ä»¬æƒ³è¦çš„ä¸æ˜¯ä¸€ä¸ªæ¿€è¿›çš„å…¥å£ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯æ§çš„æ‰§è¡Œåœºã€‚ã€ŒDingTalk Realã€æä¾›çš„å°±æ˜¯è¿™æ ·ä¸€ä¸ªå¯æ§æ‰§è¡Œåœºã€‚å®ƒç»™ Agent ä¸€ä¸ªè¢«å…è®¸ã€è¢«çº¦æŸã€è¢«å®¡è®¡çš„ç°å®ç¯å¢ƒï¼Œè®© AI èƒ½è¿›åº•å±‚ç³»ç»Ÿï¼Œçœ‹çœŸå®æ•°æ®ï¼Œä½†åˆä¸ç›´æ¥ç¢°äººçš„è®¾å¤‡ï¼Œå°±åƒååœ¨ä¸€é—´ç‹¬ç«‹çš„åŠå…¬å®¤é‡Œã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±çœ‹çœ‹å®ƒå…·ä½“æ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ã€‚</p>
<p>AgentOS</p>
<p>ç»™ DingTalk Real è£…ä¸Šã€Œå¤§è„‘ã€</p>
<p>å½“ Agent å¼€å§‹å…·å¤‡ç‹¬ç«‹è¿è¡Œç¯å¢ƒï¼Œå¹¶åœ¨æƒé™æ§åˆ¶ä¸‹æ¥å…¥çœŸå®ä¸šåŠ¡æ•°æ®ï¼Œä¼ä¸šé¢ä¸´çš„æŒ‘æˆ˜å¹¶æ²¡æœ‰ç»“æŸï¼šè¿™äº› Agent åº”è¯¥å¦‚ä½•è¢«ç»Ÿä¸€è°ƒåº¦ã€ååŒæ‰§è¡Œï¼Œå¹¶èå…¥æ—¥å¸¸å·¥ä½œæµï¼Œè€Œä¸æ˜¯å˜æˆä¸€ç»„åˆ†æ•£ã€éš¾ä»¥ç®¡ç†çš„èƒ½åŠ›æ¨¡å—ï¼Ÿå¦‚æœæ¯ä¸€æ¬¡ä»»åŠ¡ä»ç„¶éœ€è¦ç”¨æˆ·åˆ¤æ–­è¯¥å”¤èµ·å“ªä¸ª Agentï¼Œé‚£ä¹ˆ Agent çš„å¤æ‚æ€§ï¼Œæœ€ç»ˆä»ä¼šå›åˆ°äººèº«ä¸Šã€‚</p>
<p>åœ¨è¿™ä¸€é—®é¢˜ä¸Šï¼Œé’‰é’‰å¹¶æœªå°†ã€ŒDingTalk Realã€ä½œä¸ºä¸€å°å­¤ç«‹çš„ AI ä¸»æœºï¼Œè€Œæ˜¯å°†å…¶çº³å…¥ AgentOS è¿™ä¸€ç»Ÿä¸€çš„ä»»åŠ¡è°ƒåº¦ä¸ååŒä¸­æ¢ä¹‹ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0e7d2491ea547749a4388f619365d76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174451&amp;x-signature=EBzogGOkNf0gtt8M95XXEgzjOZM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>AgentOS æ˜¯ä¸€ä¸ªä¼ä¸šçº§ AI å·¥ä½œæ“ä½œç³»ç»Ÿï¼Œä¸€ä¸ªè®©å¤§é‡ AI Agent èƒ½å¤Ÿåœ¨çœŸå®ä¼ä¸šç¯å¢ƒä¸­è¢«ç»Ÿä¸€è°ƒåº¦ã€åä½œã€æ²»ç†å’Œè§„æ¨¡åŒ–ä½¿ç”¨çš„ç³»ç»Ÿçº§åº•åº§ã€‚</p>
<p>åœ¨ AgentOS ä¸Šè¿è¡Œçš„ä¸å†æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ Appï¼Œè€Œæ˜¯å…·å¤‡ç†è§£ã€è§„åˆ’ä¸æ‰§è¡Œèƒ½åŠ›çš„ AI Agentã€‚åœ¨è¿™é‡Œï¼Œäººç±»çš„è§’è‰²ä¹Ÿéšä¹‹å‘ç”Ÿå˜åŒ–ï¼Œåªè¦ä¸‹è¾¾æŒ‡ä»¤ï¼Œè®© AI å»æ‰§è¡Œå°±å¯ä»¥äº†ã€‚</p>
<p>ä»æ¶æ„ä¸Šçœ‹ï¼ŒAgentOS ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªå±‚çº§ï¼š</p>
<p>AgentOS å†…æ ¸åº•å±‚ï¼Œæä¾›äº† Agent å¼€æ”¾å¹³å°ã€æ¨¡å‹è®­ç»ƒå¹³å°ã€MCP æ¥å…¥ç­‰ç­‰å¼€å‘èƒ½åŠ›ï¼Œå¹¶è´Ÿè´£ä»»åŠ¡ç†è§£ã€æ‹†è§£ã€è§„åˆ’ä¸è°ƒåº¦ï¼ŒåŒæ—¶æ‰¿æ‹…æƒé™æ§åˆ¶ã€å®¡è®¡ã€æ—¥å¿—ä¸é£æ§ç­‰ä¼ä¸šçº§æ²»ç†èƒ½åŠ›ã€‚</p>
<p>é’‰é’‰ ONEã€‚è¿™æ˜¯é’‰é’‰ä¸º AI æ—¶ä»£æ‰“é€ çš„äººä¸ Agent åä½œçš„æ–°ä¸€ä»£æ¡Œé¢å…¥å£ã€‚ç”¨æˆ·ç™»å½•é’‰é’‰åï¼Œæ— éœ€åœ¨ä¸åŒäº§å“å’ŒåŠŸèƒ½é—´åˆ‡æ¢ï¼Œåªéœ€é€šè¿‡é’‰é’‰ ONE è¿™ä¸€å…¥å£ï¼Œä¾¿å¯å‘èµ·æœç´¢ã€é—®ç­”æˆ–ä»»åŠ¡éœ€æ±‚ï¼Œç”±ç³»ç»Ÿåœ¨åå°å®Œæˆç›¸åº”çš„ Agent è°ƒåº¦ä¸æ‰§è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b052dedad9e49189a4657b59f95cf4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174451&amp;x-signature=pjI0c8sNXpHRb7YWPZeTb5IsUw4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>AI æœé—®ã€‚è´Ÿè´£ç†è§£ç”¨æˆ·æ„å›¾ï¼Œæ±‡é›†äº†å¤šç§ä¸»æµæ¨¡å‹èƒ½åŠ›ï¼Œèƒ½å¤Ÿåœ¨éœ€è¦æ—¶ç»Ÿä¸€è°ƒåº¦å„ç±» Agentã€MCP ä¸å·¥å…·ååŒå·¥ä½œï¼ŒåŒæ—¶è¿˜èƒ½å®Œæˆä¼ä¸šçŸ¥è¯†æœç´¢ä¸ä¸šåŠ¡ç›¸å…³é—®ç­”ï¼Œæˆä¸ºç”¨æˆ·æŒ‡æŒ¥ AI å·¥ä½œçš„æ ¸å¿ƒå…¥å£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b7abb54e0a044b9a4a2cf3993adb97c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174451&amp;x-signature=2%2BCbmPZz8ZuTLazyCYL8%2FkJ1qfY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>AI æœé—®æ¨å‡ºå…¨æ–°çš„å¤§æ¨¡å‹èåˆé—®ç­”æ¨¡å¼ï¼Œæ±‡é›†å…¨çƒä¸»æµæ¨¡å‹ï¼Œå¯æ ¹æ®ç”¨æˆ·çš„å¯¹è¯æ„å›¾ä¸ä»»åŠ¡ç±»å‹ï¼Œè‡ªåŠ¨åŒ¹é…æœ€åˆé€‚çš„è¯­è¨€ã€å›¾ç‰‡æˆ–è§†é¢‘æ¨¡å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee04ec4ec78c423aa1027fa63f061d6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174451&amp;x-signature=jeUqi72FnJYDn5Q9icN84auWBiA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¶…çº§ Agent ã€Œæ‚Ÿç©ºã€ã€‚å½“ AI æœé—®åˆ¤æ–­ä»»åŠ¡éœ€è¦è¢«æ‰§è¡Œæ—¶ï¼ŒçœŸæ­£æ‰¿æ‹…æ‰§è¡Œä¸ååŒå·¥ä½œçš„ï¼Œæ˜¯ AgentOS ä¸‹çš„é€šç”¨ AI Agent ã€Œæ‚Ÿç©ºã€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58909e4b24f341af9b1bde7eee1db1d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174451&amp;x-signature=AOzCdEh3KzEkldTXOzF4HET9JeY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ã€Œæ‚Ÿç©ºã€åƒæ˜¯ä¸€ä¸ª Agent æ€»è°ƒåº¦å‘˜ï¼Œå…·å¤‡è‡ªä¸»è§„åˆ’ã€æ‰§è¡Œå’Œè‡ªæˆ‘åæ€èƒ½åŠ›ã€‚ä¸ä»…èƒ½ç†è§£é’‰é’‰å†…çš„èŠå¤©è®°å½•ã€æ—¥ç¨‹ã€æ–‡æ¡£å’Œä¸šåŠ¡æ•°æ®ï¼Œè¿˜èƒ½åœ¨åˆé€‚çš„èŠ‚ç‚¹è°ƒç”¨é’‰é’‰å†…çš„å„ç±» Agentã€ç¬¬ä¸‰æ–¹ Agent ä»¥åŠç›¸å…³å·¥å…·ã€‚ä¼ä¸šã€å¼€å‘è€…åŠ AI æœåŠ¡å•†éƒ½å¯ä»¥åœ¨ AgentOS å†…æ­å»ºä¸“å± Agentï¼Œä¾›ã€Œæ‚Ÿç©ºã€è°ƒç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/271e9281cc794185919beb3537f03a83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174451&amp;x-signature=cFsaBiTACIfbobTfRIASUfeCGhg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿˜æœ‰å°±æ˜¯ã€ŒDingTalk Realã€è¿™å° AI ç¡¬ä»¶ï¼Œä¸º Agent æä¾›ç‹¬ç«‹ã€å®‰å…¨ã€å¯æ§çš„çœŸå®è¿è¡Œç¯å¢ƒï¼Œä½¿å…¶èƒ½å¤Ÿåå°è¿è¡Œã€ä¸æŠ¢å ç”¨æˆ·è®¾å¤‡ï¼Œå¹¶åœ¨éš”ç¦»æ¡ä»¶ä¸‹è®¿é—®ä¼ä¸šå†…ç½‘ã€æœ¬åœ°æ–‡ä»¶å’Œä¸šåŠ¡ç³»ç»Ÿã€‚</p>
<p>è¿™ä¸€ä½“ç³»çš„åº•å±‚ç”±é’‰é’‰å¼€æ”¾å¹³å°æä¾›æ”¯æ’‘ï¼Œè¿™é‡Œæ±‡èšäº†ä¸°å¯Œçš„å¤§æ¨¡å‹ä¹Ÿå¯ä»¥æ¥å…¥ä¼ä¸šè‡ªå»ºæ¨¡å‹ã€è®­ç»ƒçš„æ¨¡å‹ä¸ MCP ç»„ä»¶ï¼Œè”é€šé’‰é’‰å†…éƒ¨äº§å“ã€ç¬¬ä¸‰æ–¹ Agent ä»¥åŠè½¯ç¡¬ä»¶ç”Ÿæ€ã€‚æŒ‰ç…§è§„åˆ’ï¼Œæœªæ¥é’‰é’‰ä¸Šçš„æ‰€æœ‰ AI äº§å“ï¼Œéƒ½å°†åŸºäº AgentOS æ¶æ„è¿›è¡Œæ­å»ºå’Œè¿è¡Œã€‚</p>
<p>ç›®å‰ï¼Œåœ¨ AgentOS ä¸ã€ŒDingTalk Realã€çš„ååŒä¸‹ï¼Œé’‰é’‰å·²ç»è·‘é€šäº†å¤šä¸ªé«˜é¢‘ã€å¯å¤ç”¨çš„ä¼ä¸šçº§ Agent åœºæ™¯ï¼šè¦†ç›– AI å·®æ—…ã€AI æ‹›è˜ã€AI å®¢æœç­‰æ ¸å¿ƒä¸šåŠ¡ç¯èŠ‚ã€‚</p>
<p>åœ¨å·®æ—… Agent è¿è¡Œæ—¶ï¼Œã€ŒDingTalk Realã€èƒ½å¤Ÿæ‰¿æ‹…å…¨ç½‘æ¯”ä»·ä»»åŠ¡ã€‚å®ƒä¼šåƒäººä¸€æ ·ï¼Œåœ¨ä¸€ä¸ªæ‰‹æœºç¯å¢ƒä¸­ç‚¹å¼€å„ç§ Appï¼Œè¾“å…¥æˆ¿å‹ã€å…¥ä½æ—¶é—´ç­‰ä¿¡æ¯ï¼Œç„¶åæ¯”ä»·ã€æ’åºï¼ŒçœŸæ­£åšåˆ°ç»™å…¬å¸çœé’±ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œã€ŒDingTalk Realã€æœ¬èº«å·²ç»å®Œæˆå·¥ç¨‹åŒ–ä¸ä¼ä¸šçº§æ‰“ç£¨ã€‚æŒ‰ç…§è§„åˆ’ï¼Œè¿™ä¸€é¢å‘ä¼ä¸šçš„ AI ç¡¬ä»¶å·²ç»å¼€å§‹å°èŒƒå›´å…±åˆ›ï¼Œå¹¶å°†äºÂ 1 æœˆè¿›å…¥æ­£å¼å¯äº¤ä»˜é˜¶æ®µã€‚</p>
<p>ä» AI é’‰é’‰ 1.1 å¼€å§‹</p>
<p>AI æ—¶ä»£çš„å·¥ä½œé›¨æ—å¼€å§‹ç”Ÿé•¿</p>
<p>ã€ŒDingTalk Realã€çš„å‘å¸ƒï¼Œå…¶å®è¯´æ˜é’‰é’‰å·²ç»æƒ³æ¸…æ¥šäº†ä¸€ä»¶å…³é”®çš„äº‹ï¼šå½“ Agent çœŸæ­£è¿›å…¥ä¼ä¸šæµç¨‹ã€å¼€å§‹æ‰¿æ‹…æ‰§è¡Œè´£ä»»æ—¶ï¼Œå®ƒåˆ°åº•åº”è¯¥è¿è¡Œåœ¨ä»€ä¹ˆåœ°æ–¹ã€‚</p>
<p>é’‰é’‰ç»™å‡ºçš„ç­”æ¡ˆæ˜¯ã€ŒDingTalk Realã€ã€‚è¿™å½“ç„¶ä¸æ˜¯å”¯ä¸€è§£ï¼Œä½†åœ¨ä¼ä¸šå¯¹å®‰å…¨ã€åˆè§„å’Œç¨³å®šæ€§è¦æ±‚æé«˜çš„ç°å®çº¦æŸä¸‹ï¼Œè¿™æ˜¯ä¸€æ¡è¶³å¤ŸåŠ¡å®ã€ä¹Ÿè¶³å¤Ÿå·¥ç¨‹åŒ–çš„è·¯å¾„ã€‚</p>
<p>å½“è¿™ä¸ªé—®é¢˜è¢«æƒ³æ˜ç™½ä¹‹åï¼Œé’‰é’‰çš„å¤š Agent ä½“ç³»æ‰çœŸæ­£æ‹¥æœ‰äº†å¯ä»¥ç”Ÿé•¿çš„åœŸå£¤ã€‚ä¸€ä¸ªä¸ª Agent å‘ä¸Šå»¶å±•ï¼Œå½¼æ­¤åä½œï¼Œé€æ¸å½¢æˆäº†ä¸€ç‰‡å±äº AI æ—¶ä»£çš„å·¥ä½œé›¨æ—ã€‚</p>
<p>ä¸ºäº†æ”¯æ’‘è¿™å¥—ä½“ç³»ï¼Œé’‰é’‰è‡ªèº«ä¹Ÿåœ¨åŒæ­¥å®Œæˆä¸€æ¬¡æ·±åº¦é‡æ„ï¼šäº§å“å…¨çº¿ Agent åŒ–ã€MCP åŒ–ï¼Œè®© AI èƒ½éšæ—¶æ¥å…¥ä¸šåŠ¡èƒ½åŠ›ï¼›åŒæ—¶å‘å‚ç›´é¢†åŸŸå¼€å‘è€…å¼€æ”¾ï¼Œå…±åŒæ­å»ºç”Ÿæ€ã€‚</p>
<p>å¦‚ä»Šï¼Œé’‰é’‰å·²ç»æ„å»ºèµ·å…¨çƒæœ€å¤§çš„ä¼ä¸šçº§ MCP å¹¿åœºå’Œ AI åŠ©ç†å¸‚åœºï¼Œå¹¶é€šè¿‡ç®—åŠ›åˆ†æˆã€æŒ‰æ•ˆæœä»˜è´¹ç­‰æœºåˆ¶ï¼ŒæŠŠåˆä½œå…³ç³»ç›´æ¥ç»‘å®šåˆ°çœŸå®ä¸šåŠ¡ä»·å€¼ä¸Šã€‚</p>
<p>å½“ç„¶ï¼Œã€ŒDingTalk Realã€å¤§æ¦‚ç‡ä¹Ÿä¼šå·å…¥èˆ†è®ºçš„æ’•æ‰¯ â€”â€” æ–°äº§å“æ•ˆæœå¦‚ä½•ã€å¯¹æ—¢æœ‰äº’è”ç½‘é€»è¾‘è§„åˆ™å†²å‡»å‡ ä½•ï¼Œäº‰è®®ä¸ä¼šå°‘ã€‚ä½†æ— è®ºæ˜¯å®ƒè¿˜æ˜¯è±†åŒ… AI æ‰‹æœºåŠ©æ‰‹ï¼Œéƒ½åœ¨é€¼ç€æ•´ä¸ªè¡Œä¸šç›´é¢ä¸€ä¸ªé—®é¢˜ï¼šå½“ AI æ·±åº¦ä»‹å…¥äººç±»ä¸–ç•Œï¼Œè§„åˆ™è¯¥æ€ä¹ˆå®šï¼Ÿä¼Ÿå¤§çš„åˆ›æ–°è€…ï¼Œå¾€å¾€å…ˆåˆ¶é€ é—®é¢˜ï¼Œå†ç”¨æ—¶é—´ç»™å‡ºç­”æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[KubeCost å¯è§‚æµ‹æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7587284708946362383</link>    <guid>https://juejin.cn/post/7587284708946362383</guid>    <pubDate>2025-12-24T09:49:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587284708946362383" data-draft-id="7587028972246269987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="KubeCost å¯è§‚æµ‹æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="Kubernetes"/> <meta itemprop="datePublished" content="2025-12-24T09:49:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            KubeCost å¯è§‚æµ‹æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:49:21.000Z" title="Wed Dec 24 2025 09:49:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">FinOps èƒŒæ™¯éœ€æ±‚</h2>
<p>åœ¨å…¸å‹çš„äº’è”ç½‘å…¬å¸çš„æˆæœ¬ç»„æˆä¸­ï¼ŒIT æˆæœ¬å æ¯”å¹¶ä¸ä½ï¼ŒæŠ€æœ¯æˆæœ¬ä¸äººåŠ›æˆæœ¬çš„æ¯”ä¾‹å·®ä¸å¤šåœ¨ 1:2 ~ 1:2.5 å·¦å³ï¼Œ é™ä½ IT æˆæœ¬æ˜¾ç„¶èƒ½å¸¦æ¥ç«‹ç«¿è§å½±çš„æ•ˆæœã€‚</p>
<p>è¿‘ 10 å¹´æ¥äº‘è®¡ç®—ã€äº‘åŸç”Ÿã€å®¹å™¨ã€Kubernetesã€DevOps ç­‰æŠ€æœ¯çš„é«˜é€Ÿå‘å±•ï¼Œä½¿å¾— IT æˆæœ¬çš„ç®¡ç†å˜å¾—æ›´åŠ å¤æ‚ï¼Œä¹Ÿç»™æˆæœ¬çš„ç®¡ç†å¸¦æ¥äº†æ›´å¤šçš„æŒ‘æˆ˜ã€‚ç›®å‰å¤§å¤šæ•°äº’è”ç½‘å…¬å¸ï¼Œéƒ½åŸºäº Kubernetes å®ç°èµ„æºçš„ç»Ÿä¸€ç®¡æ§ï¼Œå®ç°ç»Ÿä¸€çš„å¤§æ± å­ï¼ŒåŸºäºæ­¤çš„ç»Ÿä¸€è°ƒåº¦ã€åˆ†é…ã€æ··åˆäº‘ç­‰éƒ½æ˜¯è¿‡å»é™æœ¬å¢æ•ˆçš„é‡è¦æ‰‹æ®µã€‚</p>
<p>ä½†æ˜¯ï¼Œéšç€æˆæœ¬æ²»ç†çš„æ·±å…¥ï¼Œç”¨æˆ·ä¼šå‘ç°èµ„æºæ²»ç†å›¢é˜Ÿçš„å‹åŠ›ä¼šè¶Šæ¥è¶Šå¤§ã€‚å› ä¸ºèµ„æºè·å–é€”å¾„çš„ç®€åŒ–ï¼Œä¼šå¯¼è‡´èµ„æºä½¿ç”¨æ–¹å¾ˆå®¹æ˜“çš„å¼€å‡ºå¤§é‡èµ„æºï¼Œå¯¼è‡´èµ„æºæˆæœ¬å¿«é€Ÿä¸Šå‡æˆ–å‰§çƒˆæ³¢åŠ¨ï¼Œå¹¶ä¸”è¿™ä¸ªè¿‡ç¨‹åœ¨æµç¨‹ä¸Šç¼ºä¹ç®¡æ§ã€‚</p>
<p>åœ¨äº‘åŸç”Ÿæ—¶ä»£ï¼Œéšç€èµ„æºæ± åŒ–ä¹‹åï¼Œæˆæœ¬é»˜è®¤å½’å±åˆ°äº†æŠ€æœ¯ä¸­å¿ƒéƒ¨é—¨ï¼Œä¸šåŠ¡éƒ¨é—¨å¯¹æˆæœ¬æ²¡æœ‰æ„ŸçŸ¥ï¼ŒåŒæ—¶ç¼ºä¹æœ‰æ•ˆçš„æ‰‹æ®µé’ˆå°†æˆæœ¬æ‹†åˆ†åˆ°ä¸šåŠ¡çº¿ï¼Œå³å…¸å‹çš„å¤§è´¦é—®é¢˜ ï¼Œå¯¼è‡´æ— æ³•æœ‰æ•ˆè¯„ä¼°ä¸šåŠ¡ ROIã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5df6204578d479abca4b5053392a312~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174560&amp;x-signature=KWxgvxOzAYHrQpymIjmqvjzzSHU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">Kubecost ç®€ä»‹</h2>
<p>ä¸ºäº†è§£å†³â€œå¤§å¸é—®é¢˜â€ï¼Œåˆ†å¤§å¸ä¸ºç»†è´¦ï¼ŒKubecost æˆæœ¬è®¡é‡å·¥å…·åº”è¿è€Œç”Ÿã€‚Kubecost æ˜¯ä¸€æ¬¾ä¸“ä¸º Kubernetes ç¯å¢ƒè®¾è®¡çš„æˆæœ¬ç›‘æ§ä¸ä¼˜åŒ–å·¥å…·ï¼Œæ˜¯å¼€æºå·¥å…· OpenCost çš„å•†ä¸šåŒ–ç‰ˆæœ¬ã€‚é€šè¿‡æä¾›è¯¦å°½çš„èµ„æºä½¿ç”¨æƒ…å†µæŠ¥å‘Šï¼Œå¸®åŠ©ç”¨æˆ·æ·±å…¥äº†è§£å…¶ Kubernetes é›†ç¾¤çš„è¿è¡Œæˆæœ¬ã€‚Kubecost çš„æ ¸å¿ƒä»·å€¼åœ¨äºå®ƒèƒ½å¤Ÿä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªç›´è§‚ä¸”æ˜“äºç†è§£çš„ç•Œé¢ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿè½»æ¾åœ°è¿½è¸ªå’Œç®¡ç†äº‘èµ„æºçš„æˆæœ¬ã€‚æ— è®ºæ˜¯å¯¹äºåˆåˆ›ä¼ä¸šè¿˜æ˜¯å¤§å‹ç»„ç»‡ï¼ŒKubecost éƒ½èƒ½å¸®åŠ©å®ƒä»¬å®ç°æ›´é«˜æ•ˆçš„èµ„æºåˆ©ç”¨å’Œæˆæœ¬æ§åˆ¶ã€‚</p>
<p>Kubecost çš„è®¾è®¡ç†å¿µæ˜¯åŸºäºè¿™æ ·çš„è®¤è¯†ï¼šéšç€ Kubernetes åœ¨ç°ä»£äº‘åŸç”Ÿæ¶æ„ä¸­çš„å¹¿æ³›åº”ç”¨ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¼ä¸šå¼€å§‹é¢ä¸´å¦‚ä½•æœ‰æ•ˆç®¡ç†å’Œä¼˜åŒ–äº‘æˆæœ¬çš„é—®é¢˜ã€‚Kubecost é€šè¿‡é›†æˆå¤šç§äº‘æœåŠ¡æä¾›å•†çš„æ•°æ®ï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„è§†å›¾ï¼Œä½¿å¾—æˆæœ¬ç®¡ç†å˜å¾—æ›´åŠ ç®€å•ç›´æ¥ã€‚æ­¤å¤–ï¼ŒKubecost è¿˜æ”¯æŒè‡ªå®šä¹‰æˆæœ¬åˆ†é…è§„åˆ™ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªèº«ä¸šåŠ¡éœ€æ±‚çµæ´»è°ƒæ•´æˆæœ¬è®¡ç®—æ–¹å¼ï¼Œè¿›ä¸€æ­¥æå‡æˆæœ¬ç®¡ç†çš„ç²¾å‡†åº¦ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒåŠŸèƒ½</h3>
<p>Kubecost æä¾›äº†ä¸€ç³»åˆ—å¼ºå¤§çš„åŠŸèƒ½ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£å’Œæ§åˆ¶ Kubernetes ç¯å¢ƒä¸‹çš„äº‘æˆæœ¬ã€‚ä»¥ä¸‹æ˜¯ Kubecost çš„å‡ ä¸ªå…³é”®ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>æˆæœ¬å¯è§†åŒ–</strong>ï¼šKubecost é€šè¿‡å›¾è¡¨å’Œä»ªè¡¨æ¿çš„å½¢å¼ï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªæ¸…æ™°çš„æˆæœ¬æ¦‚è§ˆã€‚ç”¨æˆ·å¯ä»¥æŸ¥çœ‹ä¸åŒæ—¶é—´èŒƒå›´å†…çš„æˆæœ¬è¶‹åŠ¿ï¼Œä»¥åŠæŒ‰å‘½åç©ºé—´ã€å·¥ä½œè´Ÿè½½ç­‰ç»´åº¦ç»†åˆ†çš„æˆæœ¬è¯¦æƒ…ã€‚</li>
<li><strong>æˆæœ¬é¢„æµ‹</strong>ï¼šåŸºäºå†å²æ•°æ®ï¼ŒKubecost å¯ä»¥é¢„æµ‹æœªæ¥çš„æˆæœ¬è¶‹åŠ¿ï¼Œå¸®åŠ©ç”¨æˆ·æå‰è§„åˆ’é¢„ç®—å¹¶åšå‡ºç›¸åº”çš„æˆæœ¬ä¼˜åŒ–å†³ç­–ã€‚</li>
<li><strong>æˆæœ¬åˆ†é…</strong>ï¼šKubecost æ”¯æŒè‡ªå®šä¹‰æˆæœ¬åˆ†é…è§„åˆ™ï¼Œå…è®¸ç”¨æˆ·æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯è°ƒæ•´æˆæœ¬åˆ†æ‘Šæ–¹å¼ï¼Œç¡®ä¿æˆæœ¬è®¡ç®—æ›´åŠ ç¬¦åˆå®é™…æƒ…å†µã€‚</li>
<li><strong>æˆæœ¬ä¼˜åŒ–å»ºè®®</strong>ï¼šKubecost ä¸ä»…æä¾›æˆæœ¬æ•°æ®ï¼Œè¿˜ä¼šæ ¹æ®ç”¨æˆ·çš„ä½¿ç”¨æƒ…å†µç»™å‡ºå…·ä½“çš„ä¼˜åŒ–å»ºè®®ï¼Œæ¯”å¦‚æ¨èæ›´é€‚åˆçš„å·¥ä½œè´Ÿè½½é…ç½®æˆ–èµ„æºåˆ©ç”¨ç‡æ”¹è¿›æ–¹æ¡ˆã€‚</li>
<li><strong>å¤šäº‘æ”¯æŒ</strong>ï¼šKubecost æ”¯æŒå¤šç§äº‘æœåŠ¡æä¾›å•†ï¼ŒåŒ…æ‹¬ AWSã€Azure å’Œ Google Cloud ç­‰ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥åœ¨ä¸åŒçš„äº‘ç¯å¢ƒä¸­ç»Ÿä¸€ç®¡ç†æˆæœ¬ã€‚</li>
</ul>
<p>é€šè¿‡è¿™äº›åŠŸèƒ½ï¼ŒKubecost æˆä¸ºäº† Kubernetes ç”¨æˆ·ä¸å¯æˆ–ç¼ºçš„å·¥å…·ä¹‹ä¸€ï¼Œå¸®åŠ©ä»–ä»¬åœ¨äº«å—äº‘åŸç”ŸæŠ€æœ¯å¸¦æ¥çš„ä¾¿åˆ©çš„åŒæ—¶ï¼Œä¹Ÿèƒ½å¤Ÿæœ‰æ•ˆåœ°æ§åˆ¶å’Œä¼˜åŒ–æˆæœ¬ã€‚</p>
<ul>
<li>äº§å“è¯¦ç»†ä»‹ç»é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.kubecost.com%2F" target="_blank" title="https://docs.kubecost.com/" ref="nofollow noopener noreferrer">docs.kubecost.com/</a></li>
<li>å¼€æºé¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopencost%2Fopencost%2Fblob%2Fdevelop%2Fspec%2Fopencost-specv01.md" target="_blank" title="https://github.com/opencost/opencost/blob/develop/spec/opencost-specv01.md" ref="nofollow noopener noreferrer">github.com/opencost/opâ€¦</a></li>
<li>FinOpsèµ„æ–™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.finops.org%2Fintroduction%2Fwhat-is-finops%2F" target="_blank" title="https://www.finops.org/introduction/what-is-finops/" ref="nofollow noopener noreferrer">www.finops.org/introductioâ€¦</a></li>
</ul>
<h2 data-id="heading-3">è§‚æµ‹äº‘é›†æˆ</h2>
<p>è§‚æµ‹äº‘æä¾›äº†é›†æˆ KubeCost çš„èƒ½åŠ›ï¼Œé€šè¿‡ ServiceMonitor æ–¹å¼è·å–ã€‚</p>
<h3 data-id="heading-4">å‰ç½®æ¡ä»¶</h3>
<ul>
<li>å®‰è£… K8S ç¯å¢ƒ</li>
<li>å®‰è£…Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ibm.com%2Fdocs%2Fen%2Fkubecost" target="_blank" title="https://www.ibm.com/docs/en/kubecost" ref="nofollow noopener noreferrer">KubeCost</a></li>
<li>å®‰è£…Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fdatakit%2Fdatakit-daemonset-deploy%2F" target="_blank" title="https://docs.guance.com/datakit/datakit-daemonset-deploy/" ref="nofollow noopener noreferrer">DataKit</a></li>
<li>å®‰è£… Prometheus Operator</li>
</ul>
<h3 data-id="heading-5">CRD é…ç½®</h3>
<p>KubeCost å·²æš´éœ²äº†æŒ‡æ ‡ï¼Œåªéœ€è¦è®© DataKit èƒ½å¤Ÿå‘ç°æŒ‡æ ‡å¹¶ä¸ŠæŠ¥ã€‚</p>
<ul>
<li>æ–°å¢Â <code>kubecost-serverMonitor.yaml</code></li>
</ul>

<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">monitoring.coreos.com/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceMonitor</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">kubecost-metrics</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app.kubernetes.io/name:</span> <span class="hljs-string">cost-analyzer</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kubecost</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app.kubernetes.io/name:</span> <span class="hljs-string">cost-analyzer</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">/metrics</span>
      <span class="hljs-attr">port:</span> <span class="hljs-string">tcp-model</span>
      <span class="hljs-attr">params:</span>
        <span class="hljs-attr">measurement:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">kubecost-cost-analyzer</span>
</code></pre>
<ul>
<li>æ‰§è¡Œ</li>
</ul>

<pre><code class="hljs">kubectl apply -f kubecost-serverMonitor.yaml
</code></pre>
<h3 data-id="heading-6">DataKit é…ç½®</h3>
<p>å¦‚å·²å¼€å¯ï¼Œè¯·å¿½ç•¥ã€‚</p>
<ul>
<li>å¼€å¯ DataKit Service Monitor è‡ªåŠ¨å‘ç°</li>
</ul>
<p>æ·»åŠ Â <code>env : ENV_INPUT_CONTAINER_ENABLE_AUTO_DISCOVERY_OF_PROMETHEUS_SERVICE_MONITORS</code></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">DaemonSet</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">daemonset-datakit</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">datakit</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">datakit</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-string">...</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-string">...</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-string">...</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">env:</span>
        <span class="hljs-string">...</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">ENV_INPUT_CONTAINER_ENABLE_AUTO_DISCOVERY_OF_PROMETHEUS_SERVICE_MONITORS</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">"true"</span>
        <span class="hljs-string">...</span>
</code></pre>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fdatakit%2Fdatakit-service-how-to%2F%23manage-service" target="_blank" title="https://docs.guance.com/datakit/datakit-service-how-to/#manage-service" ref="nofollow noopener noreferrer">é‡å¯ DataKit</a></li>
</ul>
<h3 data-id="heading-7">åœºæ™¯è§†å›¾</h3>
<p>ç™»å½•<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.guance.com%2F" target="_blank" title="https://console.guance.com/" ref="nofollow noopener noreferrer">è§‚æµ‹äº‘æ§åˆ¶å°</a>ï¼Œç‚¹å‡»ã€Œåœºæ™¯ã€ -ã€Œæ–°å»ºä»ªè¡¨æ¿ã€ï¼Œè¾“å…¥ â€œKubeCostâ€ï¼Œ é€‰æ‹© â€œKUBECOSTâ€ç›‘æ§è§†å›¾ï¼Œç‚¹å‡» â€œç¡®å®šâ€ å³å¯æ·»åŠ è§†å›¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f0766702d0f48cba46cb0f12fb598da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174560&amp;x-signature=OcXzTgKA%2B2LWM5rrONtyuSa1eWc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b355e3e665b4d16b13768cc937f6dc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174560&amp;x-signature=tgO2jJrvO3Ov514U74Yv%2FUNcLLI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">å…³é”®æŒ‡æ ‡</h3>
<p>ä»¥ä¸‹æ˜¯ KubeCost å…³é”®æŒ‡æ ‡çš„æè¿°ä¿¡æ¯ã€‚</p>









































<table><thead><tr><th>Metric</th><th>æè¿°</th></tr></thead><tbody><tr><td>container_cpu_allocation</td><td>container cpu åˆ†é…</td></tr><tr><td>container_gpu_allocation</td><td>container gpu åˆ†é…</td></tr><tr><td>container_memory_allocation_bytes</td><td>container å†…å­˜åˆ†é…</td></tr><tr><td>pv_hourly_cost</td><td>PersistentVolume æ¯å°æ—¶æˆæœ¬</td></tr><tr><td>node_total_hourly_cost</td><td>èŠ‚ç‚¹æ¯å°æ—¶æ€»æˆæœ¬</td></tr><tr><td>node_cpu_hourly_cost</td><td>èŠ‚ç‚¹ cpu æ¯å°æ—¶æˆæœ¬</td></tr><tr><td>node_ram_hourly_cost</td><td>èŠ‚ç‚¹ ram æ¯å°æ—¶æˆæœ¬</td></tr><tr><td>node_gpu_hourly_cost</td><td>èŠ‚ç‚¹ gpu æ¯å°æ—¶æˆæœ¬</td></tr></tbody></table>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>è§‚æµ‹äº‘å¯ä»¥é›†æˆ KubeCostï¼Œè·å– KubeCost çš„æŒ‡æ ‡å¹¶åŸºäºç›¸å…³æŒ‡æ ‡å®šåˆ¶æˆæœ¬ä½¿ç”¨çš„ç›¸å…³è§†å›¾ï¼Œä»è€Œé€šè¿‡å…³æ³¨æˆæœ¬è§†å›¾é‡‡å–ä¸€äº›åˆ—çš„æˆæœ¬æ§åˆ¶ä¸ä¼˜åŒ–ç­–ç•¥ï¼Œä¸ºä¼ä¸šçš„ FinOps å»ºè®¾èµ‹èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift IPA æ··æ·†åœ¨å·¥ç¨‹å®è·µä¸­çš„æ–¹å¼ï¼Œåˆ†æä»…ä¾èµ–æºç å±‚æ··æ·†çš„å±€é™æ€§]]></title>    <link>https://juejin.cn/post/7587023071067570228</link>    <guid>https://juejin.cn/post/7587023071067570228</guid>    <pubDate>2025-12-24T09:50:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587023071067570228" data-draft-id="7587243886433681442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift IPA æ··æ·†åœ¨å·¥ç¨‹å®è·µä¸­çš„æ–¹å¼ï¼Œåˆ†æä»…ä¾èµ–æºç å±‚æ··æ·†çš„å±€é™æ€§"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-24T09:50:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒçŒ´çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2179705232165364"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift IPA æ··æ·†åœ¨å·¥ç¨‹å®è·µä¸­çš„æ–¹å¼ï¼Œåˆ†æä»…ä¾èµ–æºç å±‚æ··æ·†çš„å±€é™æ€§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2179705232165364/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒçŒ´çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:50:43.000Z" title="Wed Dec 24 2025 09:50:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸å°‘ Swift é¡¹ç›®é‡Œï¼Œå›¢é˜Ÿç¬¬ä¸€æ¬¡è®¨è®ºâ€œæ··æ·†â€æ—¶ï¼Œå…³æ³¨ç‚¹é€šå¸¸è¿˜åœç•™åœ¨æºç å±‚ï¼š
ç±»åè¦ä¸è¦æ”¹ã€æ–¹æ³•åè¦ä¸è¦å‹ç¼©ã€ç¬¦å·èƒ½ä¸èƒ½çœ‹ä¸æ‡‚ã€‚
ä½†å½“é¡¹ç›®è¿›å…¥äº¤ä»˜ã€ä¸Šæ¶æˆ–è¢«åˆ†æçš„é˜¶æ®µä¹‹åï¼Œå¾ˆå¤šå·¥ç¨‹å¸ˆéƒ½ä¼šæ„è¯†åˆ°ä¸€ä¸ªç°å®é—®é¢˜ï¼š<strong>æ”»å‡»å¹¶ä¸æ˜¯ä»æºç å¼€å§‹çš„ï¼Œè€Œæ˜¯ä» IPA å¼€å§‹çš„ã€‚</strong></p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆâ€œSwift IPA æ··æ·†â€è¿™ä¸ªè¯é¢˜ï¼Œå¾€å¾€å‡ºç°åœ¨é¡¹ç›®ä¸­åæœŸï¼Œè€Œä¸æ˜¯è®¾è®¡é˜¶æ®µã€‚æœ¬æ–‡å¹¶ä¸æ‰“ç®—é‡å¤æ··æ·†æŠ€æœ¯çš„æ¦‚å¿µï¼Œè€Œæ˜¯ä»å·¥ç¨‹å®è·µå‡ºå‘ï¼ŒèŠä¸€èŠ Swift é¡¹ç›®åœ¨ IPA å±‚åšæ··æ·†æ—¶ï¼ŒçœŸæ­£é‡åˆ°çš„é—®é¢˜ã€å¯è¡Œçš„ç»„åˆæ–¹å¼ï¼Œä»¥åŠ <strong>Ipa Guard</strong> åœ¨å…¶ä¸­çš„å®é™…ä½œç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€Swift é¡¹ç›®çš„æ··æ·†ï¼Œä¸ºä»€ä¹ˆå¾ˆå®¹æ˜“å¡åœ¨æºç å±‚</h2>
<p>Swift æœ¬èº«çš„è¯­è¨€ç‰¹æ€§ï¼Œè®©ä¸å°‘å›¢é˜Ÿå¯¹æºç æ··æ·†æŠ±æœ‰ä¸€å®šæœŸå¾…ï¼š</p>
<ul>
<li>ç¼–è¯‘åç¬¦å·å¤æ‚</li>
<li>æ³›å‹å’Œåè®®è®©é€»è¾‘ä¸ç›´è§‚</li>
<li>Release æ¨¡å¼ä¸‹å·²ç»æœ‰ä¸€å®šâ€œä¸å¯è¯»æ€§â€</li>
</ul>
<p>å› æ­¤ï¼Œå¾ˆå¤šé¡¹ç›®åœ¨æ—©æœŸä¼šè®¤ä¸ºï¼š
â€œåªè¦ Swift ä»£ç å†™å¾—è§„èŒƒã€ç¼–è¯‘ä¼˜åŒ–æ‰“å¼€ï¼Œå°±å·²ç»å¤Ÿå®‰å…¨äº†ã€‚â€</p>
<p>ä½†å½“å·¥ç¨‹å¸ˆçœŸæ­£è§£åŒ… IPA ä¹‹åï¼Œå¾€å¾€ä¼šå‘ç°å¦ä¸€é¢ï¼š</p>
<ul>
<li>å¯æ‰§è¡Œæ–‡ä»¶ä¹‹å¤–ï¼Œè¿˜æœ‰å¤§é‡å¯è¯»èµ„æº</li>
<li>Swift ç¬¦å·è™½ç„¶å¤æ‚ï¼Œä½†ä»ç„¶å¯å®šä½</li>
<li>é…ç½®ã€JSONã€å›¾ç‰‡ã€è·¯å¾„æš´éœ²å‡ºå¤§é‡ä¸šåŠ¡ä¿¡æ¯</li>
</ul>
<p>è¿™æ—¶å€™ï¼Œæ··æ·†çš„ç„¦ç‚¹è‡ªç„¶ä¼šä»æºç è½¬å‘ <strong>IPA æœ¬èº«</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€Swift IPA æ··æ·†çœŸæ­£è¦é¢å¯¹çš„ï¼Œä¸åªæ˜¯ Swift</h2>
<p>åœ¨å·¥ç¨‹å®è·µä¸­ï¼Œâ€œSwift IPA æ··æ·†â€è¿™ä¸ªè¯´æ³•æœ¬èº«å°±æœ‰ä¸€ç‚¹è¯¯å¯¼æ€§ã€‚
å› ä¸ºä¸€ä¸ª Swift App çš„ IPA é‡Œï¼Œé€šå¸¸åŒ…å«ï¼š</p>
<ul>
<li>Swift ç¼–è¯‘åçš„äºŒè¿›åˆ¶</li>
<li>Objective-C è¿è¡Œæ—¶ç›¸å…³ç¬¦å·</li>
<li>ç¬¬ä¸‰æ–¹é™æ€åº“æˆ–åŠ¨æ€åº“</li>
<li>JSONã€plist ç­‰é…ç½®</li>
<li>å›¾ç‰‡ã€éŸ³é¢‘ç­‰èµ„æº</li>
</ul>
<p>å¦‚æœåªç›¯ç€ Swift ç¬¦å·æœ¬èº«ï¼Œå¾ˆå®¹æ˜“å¿½ç•¥å…¶ä»–å…¥å£ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€åªåš Swift ç¬¦å·æ··æ·†ï¼Œæ•ˆæœä¸ºä»€ä¹ˆä¸ç¨³å®š</h2>
<p>ä¸€äº›å›¢é˜Ÿä¼šå°è¯•é€šè¿‡ç¼–è¯‘æœŸæˆ–è„šæœ¬æ–¹å¼ï¼Œå¯¹ Swift ç¬¦å·åšå¤„ç†ã€‚è¿™ç±»æ–¹æ³•åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯æœ‰æ•ˆçš„ï¼Œä½†åœ¨å·¥ç¨‹ä¸­ä¹Ÿç»å¸¸é‡åˆ°é—®é¢˜ï¼š</p>
<ul>
<li>è¦†ç›–èŒƒå›´æœ‰é™ï¼Œåªèƒ½å¤„ç†éƒ¨åˆ†æ¨¡å—</li>
<li>ç¬¬ä¸‰æ–¹åº“æ— æ³•å‚ä¸</li>
<li>å¯¹å·²ç»ç”Ÿæˆçš„ IPA æ— æ³•ç”Ÿæ•ˆ</li>
<li>å¯¹èµ„æºæ–‡ä»¶å‡ ä¹æ²¡æœ‰çº¦æŸ</li>
</ul>
<p>ç»“æœå¾€å¾€æ˜¯ï¼š
<strong>Swift ä»£ç å˜éš¾çœ‹äº†ï¼Œä½† IPA ä¾ç„¶å¾ˆå¥½ç”¨ã€‚</strong></p>
<hr/>
<h2 data-id="heading-3">å››ã€å·¥ç¨‹è¯­å¢ƒä¸‹ï¼ŒSwift IPA æ··æ·†æ›´åƒâ€œæˆå“å¤„ç†â€</h2>
<p>åœ¨å¤šæ¬¡å®è·µä¹‹åï¼Œä¸€ä¸ªæ¯”è¾ƒæ¸…æ™°çš„è®¤è¯†æ˜¯ï¼š
å¦‚æœç›®æ ‡æ˜¯ä¿æŠ¤ Swift åº”ç”¨ä¸è¢«è½»æ˜“åˆ†æå’Œä¿®æ”¹ï¼Œé‚£ä¹ˆæ··æ·†çš„é‡ç‚¹è¿Ÿæ—©è¦è½åˆ° <strong>æˆå“ IPA</strong> ä¸Šã€‚</p>
<p>åŸå› å¾ˆç®€å•ï¼š</p>
<ul>
<li>IPA æ˜¯æ”»å‡»çš„å®é™…å¯¹è±¡</li>
<li>IPA åŒ…å«ä»£ç å’Œèµ„æºçš„æœ€ç»ˆå½¢æ€</li>
<li>IPA å±‚å¯ä»¥ç»Ÿä¸€å¤„ç† Swiftã€OC å’Œèµ„æº</li>
</ul>
<p>è¿™ä¹Ÿä¸ºå¤šå·¥å…·ç»„åˆæä¾›äº†ç©ºé—´ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€Ipa Guard åœ¨ Swift IPA æ··æ·†ä¸­çš„çœŸå®ä½œç”¨</h2>
<p>Ipa Guardå¹¶ä¸æ˜¯â€œSwift æ··æ·†å·¥å…·â€ï¼Œè€Œæ˜¯ä¸€ä¸ª <strong>IPA çº§æ··æ·†å·¥å…·</strong>ï¼Œä½†æ­£å› ä¸ºè¿™ä¸€ç‚¹ï¼Œå®ƒåœ¨ Swift é¡¹ç›®ä¸­åè€Œéå¸¸åˆé€‚ã€‚</p>
<p>åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œå®ƒé€šå¸¸è¢«ç”¨äºï¼š</p>
<ul>
<li><strong>æ— éœ€ iOS App æºç </strong>ï¼Œç›´æ¥å¯¹ Swift åº”ç”¨çš„ IPA æ–‡ä»¶è¿›è¡Œæ··æ·†</li>
<li>å¯¹ Swiftã€ObjC çš„ç±»åã€æ–¹æ³•åã€å˜é‡åè¿›è¡Œç³»ç»ŸåŒ–é‡å‘½å</li>
<li>åŒæ—¶ä½œç”¨äºä¸»ç¨‹åºå’Œä»£ç åº“</li>
<li>å¯¹ JSONã€plistã€å›¾ç‰‡ã€JS ç­‰èµ„æºæ–‡ä»¶è¿›è¡Œæ”¹å</li>
<li>ä¿®æ”¹èµ„æº MD5ï¼Œé™ä½ç›´æ¥æ›¿æ¢åçš„ç¨³å®šæ€§</li>
<li>é€‚é… Swiftã€OCã€Flutterã€React Nativeã€H5 ç­‰å¤šç§å½¢æ€</li>
<li>æ”¯æŒå‘½ä»¤è¡Œæ–¹å¼ï¼Œä¾¿äºæ¥å…¥ CI æˆ–æ‰“åŒ…æµç¨‹</li>
</ul>
<p>è¿™äº›èƒ½åŠ›çš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š
<strong>ä¸è¦æ±‚ä½ é‡æ„ Swift å·¥ç¨‹ï¼Œå°±èƒ½æ”¹å˜ IPA çš„æ•´ä½“å¯è¯»æ€§å’Œå¯ä¿®æ”¹æ€§ã€‚</strong></p>
<hr/>
<h2 data-id="heading-5">å…­ã€Swift é¡¹ç›®é‡Œï¼Œèµ„æºå¾€å¾€æ¯”ä»£ç æ›´è¯šå®</h2>
<p>åœ¨ä¸€äº› Swift é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªå¾ˆå¸¸è§çš„ç°è±¡æ˜¯ï¼š</p>
<ul>
<li>Swift ä»£ç é€»è¾‘å¤æ‚</li>
<li>ä½†èµ„æºæ–‡ä»¶éå¸¸ç›´ç™½</li>
<li>é…ç½®å’Œè·¯å¾„æš´éœ²å¤§é‡ä¸šåŠ¡å«ä¹‰</li>
</ul>
<p>æ”»å‡»è€…å¾€å¾€å¹¶ä¸éœ€è¦å®Œå…¨ç†è§£ Swift äºŒè¿›åˆ¶ï¼Œåªè¦é€šè¿‡èµ„æºä¿®æ”¹ï¼Œå°±èƒ½æ”¹å˜è¡Œä¸ºã€‚</p>
<p>Ipa Guard å¯¹èµ„æºæ–‡ä»¶çš„æ”¹åå’Œç‰¹å¾è°ƒæ•´ï¼Œåœ¨ Swift é¡¹ç›®ä¸­ç»å¸¸æ¯”ä»£ç æ··æ·†æ›´å¿«è§æ•ˆï¼Œè¿™ä¸€ç‚¹åœ¨å®é™…é¡¹ç›®ä¸­éå¸¸æ˜æ˜¾ã€‚</p>
<hr/>
<h2 data-id="heading-6">ä¸ƒã€ä¸€ä¸ªæ›´è´´è¿‘ç°å®çš„ Swift IPA æ··æ·†æµç¨‹</h2>
<p>ä»¥ä¸€ä¸ªå·²ç»ä¸Šçº¿çš„ Swift åº”ç”¨ä¸ºä¾‹ï¼š</p>
<ul>
<li>æ ¸å¿ƒé€»è¾‘ç¨³å®šï¼Œä¸å¸Œæœ›æ”¹æºç </li>
<li>ä½¿ç”¨å¤šä¸ªç¬¬ä¸‰æ–¹ SDK</li>
<li>é…ç½®å’Œèµ„æºé©±åŠ¨éƒ¨åˆ†åŠŸèƒ½</li>
</ul>
<p>å·¥ç¨‹å¸ˆå¾€å¾€ä¼šé‡‡ç”¨è¿™æ ·çš„ç»„åˆæ–¹å¼ï¼š</p>
<ul>
<li>ä¿ç•™ç°æœ‰ Swift æºç æ··æ·†å’Œä¼˜åŒ–</li>
<li>ä½¿ç”¨å¸¸è§„å·¥å…·ä¿è¯ç¼–è¯‘æœŸå®‰å…¨</li>
<li>åœ¨ IPA ç”Ÿæˆåï¼Œå¼•å…¥ Ipa Guard</li>
<li>å¯¹ Swift / OC ç¬¦å·è¿›è¡Œé‡å‘½å</li>
<li>å¯¹ JSONã€å›¾ç‰‡ã€é…ç½®æ–‡ä»¶è¿›è¡Œæ”¹åå’Œç‰¹å¾å¤„ç†</li>
<li>é‡ç­¾å¹¶åœ¨çœŸæœºä¸Šè¿›è¡Œå›å½’æµ‹è¯•</li>
</ul>
<p>è¿™ä¸ªè¿‡ç¨‹å¹¶ä¸è¿½æ±‚æç«¯å¤æ‚ï¼Œä½†ç”Ÿæˆçš„ IPA åœ¨åˆ†æå’Œå¤ç”¨æˆæœ¬ä¸Šå·²ç»æ˜æ˜¾æé«˜ã€‚</p>
<hr/>
<h2 data-id="heading-7">å…«ã€Swift IPA æ··æ·†ä¸­ï¼Œä¸€ä¸ªå®¹æ˜“è¢«å¿½ç•¥çš„é—®é¢˜</h2>
<p>åœ¨å®è·µä¸­ï¼Œä¸€ä¸ªå¸¸è§è¯¯åŒºæ˜¯ï¼š
è¿‡åº¦å¼ºè°ƒ Swift çš„â€œè¯­è¨€å®‰å…¨æ€§â€ï¼Œè€Œå¿½ç•¥æˆå“åŒ…çš„å®Œæ•´æ€§ã€‚</p>
<p>ç»“æœå¾€å¾€æ˜¯ï¼š</p>
<ul>
<li>Swift ä»£ç ç¡®å®ä¸å¥½çœ‹</li>
<li>ä½† IPA ä¾ç„¶å®¹æ˜“è¢«æ”¹</li>
<li>åŠ å›ºæŠ•å…¥å’Œæ•ˆæœä¸æˆæ¯”ä¾‹</li>
</ul>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒæŠŠä¸€éƒ¨åˆ†ç²¾åŠ›æ”¾åœ¨ IPA å±‚æ•´ä½“æ··æ·†ï¼Œå¾€å¾€æ›´ç¬¦åˆå·¥ç¨‹ç°å®ã€‚</p>
<hr/>
<h2 data-id="heading-8">å…³äº Swift IPA æ··æ·†çš„ä¸€ä¸ªå·¥ç¨‹ç»“è®º</h2>
<p>å¤šæ¬¡å®è·µä¹‹åï¼Œä¸€ä¸ªæ¯”è¾ƒåŠ¡å®çš„åˆ¤æ–­æ˜¯ï¼š</p>
<ul>
<li>Swift æœ¬èº«ä¸æ˜¯å®‰å…¨è¾¹ç•Œ</li>
<li>IPA æ‰æ˜¯æ”»å‡»è¾¹ç•Œ</li>
<li>æ··æ·†çš„â€œæ·±åº¦â€æ¥è‡ªè¦†ç›–èŒƒå›´ï¼Œè€Œä¸æ˜¯è¯­è¨€ç‰¹æ€§</li>
</ul>
<p>åªè¦æœ€ç»ˆç”Ÿæˆçš„ IPA ä¸å†å®¹æ˜“è¢«ç†è§£å’Œä¿®æ”¹ï¼ŒSwift IPA æ··æ·†å°±å·²ç»å‘æŒ¥äº†ä½œç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹å¼ºåŒ–å­¦ä¹ æ€»ç»“]]></title>    <link>https://juejin.cn/post/7587208390483329030</link>    <guid>https://juejin.cn/post/7587208390483329030</guid>    <pubDate>2025-12-24T09:03:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587208390483329030" data-draft-id="7587238733503348779" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹å¼ºåŒ–å­¦ä¹ æ€»ç»“"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-24T09:03:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lhn"/> <meta itemprop="url" content="https://juejin.cn/user/1827807335308105"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹å¼ºåŒ–å­¦ä¹ æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1827807335308105/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lhn
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:03:51.000Z" title="Wed Dec 24 2025 09:03:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å°†å¼ºåŒ–å­¦ä¹ åº”ç”¨äºå¼ºå¤§çš„åŸºç¡€æ¨¡å‹ï¼Œå¹¶ç»“åˆå·²ç»éªŒè¯çš„å¥–åŠ±æœºåˆ¶ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡æ¨¡å‹çš„æ¨ç†èƒ½åŠ›å’Œæ€§èƒ½ã€‚Deepseek-R1ã€Kimi K1.5å‡æ˜¯é€šè¿‡ç­–ç•¥æ¢¯åº¦ç®—æ³•è®­ç»ƒè€Œæˆçš„ã€‚</p>
<h2 data-id="heading-0">åŸºæœ¬æ¦‚å¿µ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ccdea4dd8f724b47be6ae8c8805a6b71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGhu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767171830&amp;x-signature=Jq7vDfWDEV6SSAfIU1bdcx%2F8R%2FQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-1">ç­–ç•¥ &amp; åŠ¨ä½œ &amp; çŠ¶æ€</h3>
<p>å…·æœ‰å‚æ•°<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></span>çš„å› æœè¯­è¨€æ¨¡å‹åŸºäºå½“å‰æ–‡æœ¬å‰ç¼€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>(å³çŠ¶æ€/è§‚æµ‹å€¼)ï¼Œå®šä¹‰ä¸‹ä¸€ä¸ªtoken <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub><mo>âˆˆ</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">a_t\in V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></span>çš„æ¦‚ç‡åˆ†å¸ƒã€‚åœ¨å¼ºåŒ–å­¦ä¹ çš„æƒ…å¢ƒä¸‹ï¼Œå°†ä¸‹ä¸€ä¸ªtoken <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> è§†ä¸ºä¸€ä¸ª<strong>åŠ¨ä½œ</strong>ï¼Œå°†å½“å‰æ–‡æœ¬å‰ç¼€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> è§†ä¸º<strong>çŠ¶æ€</strong>ã€‚æ‰€ä»¥ï¼Œè¯¥è¯­è¨€æ¨¡å‹æ˜¯ä¸€ä¸ªç±»åˆ«å‹çš„<strong>éšæœºç­–ç•¥</strong>ã€‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub><mo>âˆ¼</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mo>â‹…</mo><mo>âˆ£</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mspace width="1em"/><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mo>âˆ£</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mrow><mo fence="true">[</mo><mrow><mi mathvariant="normal">s</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">f</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi></mrow><mrow><mo fence="true">(</mo><msub><mi>f</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo fence="true">)</mo></mrow><mo fence="true">]</mo></mrow><msub><mi>a</mi><mi>t</mi></msub></msub></mrow><annotation encoding="application/x-tex">a_t\sim\pi_\theta(\cdot\mid s_t),\quad\pi_\theta(a_t\mid s_t)=\left[\mathrm{softmax}\left(f_\theta(s_t)\right)\right]_{a_t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord">â‹…</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"/><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1498em;vertical-align:-0.3998em;"/><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mord"><span class="mord mathrm">softmax</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mclose delimcenter" style="top:0em;">]</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0017em;"><span style="top:-2.4003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3998em;"><span/></span></span></span></span></span></span></span></span></span></div>
<p>åœ¨ä½¿ç”¨ç­–ç•¥æ¢¯åº¦ä¼˜åŒ–ç­–ç•¥æ—¶ï¼Œéœ€è¦ä¸¤ç§åŸºæœ¬æ“ä½œã€‚</p>
<ul>
<li>ä»ç­–ç•¥ä¸­é‡‡æ ·ï¼šä»ä¸Šå¼çš„ç±»åˆ«åˆ†å¸ƒä¸­æŠ½å–åŠ¨ä½œã€‚</li>
<li>ä¸ºåŠ¨ä½œçš„å¯¹æ•°ä¼¼ç„¶è¯„åˆ†ï¼šè®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">g</mi></mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mo>âˆ£</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathrm{log}\pi_\theta(a_t\mid s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathrm" style="margin-right:0.01389em;">log</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼Œç”¨äºè¡¡é‡åŠ¨ä½œåœ¨å½“å‰ç­–ç•¥ä¸‹çš„â€œåˆç†æ€§â€ã€‚</li>
</ul>
<p>åœ¨ä½¿ç”¨LLMsè¿›è¡Œå¼ºåŒ–å­¦ä¹ æ—¶ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>æŒ‡çš„æ˜¯åˆ°ç›®å‰ä¸ºæ­¢ç”Ÿæˆçš„completion/solutionã€‚å³æ¨¡å‹å·²è¾“å‡ºçš„æ–‡æœ¬å‰ç¼€ã€‚æ¯ä¸€ä¸ª<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>æ˜¯è¯¥solutionçš„ä¸‹ä¸€ä¸ªtokenã€‚å½“æ–‡æœ¬ç»“æŸæ ‡è®°ï¼ˆä¾‹å¦‚&lt;|end_of_text|&gt;ï¼‰å‡ºç°æ—¶ï¼Œè¿™ä¸ªäº¤äº’è¿‡ç¨‹ï¼ˆepisodeï¼‰å°±ä¼šç»“æŸã€‚</p>
<h3 data-id="heading-2">è½¨è¿¹</h3>
<p>è½¨è¿¹ï¼ˆTrajectoryï¼‰æ˜¯æŒ‡æ™ºèƒ½ä½“æ‰€ç»å†çš„çŠ¶æ€å’ŒåŠ¨ä½œçš„äº¤é”™åºåˆ—ã€‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Ï„</mi><mo>=</mo><mrow><mo fence="true">(</mo><msub><mi>s</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>s</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>s</mi><mi>T</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>T</mi></msub><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\tau=\left(s_0,a_0,s_1,a_1,\ldots,s_T,a_T\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></span></div>
<p>å…¶ä¸­ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></span>æ˜¯è½¨è¿¹çš„é•¿åº¦ã€‚å³<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">a_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>æ˜¯æ–‡æœ¬ç»“æŸæ ‡è®°æˆ–è€…è¾¾åˆ°æœ€å¤§ç”Ÿæˆtokenæ•°é‡æ—¶ç”Ÿæˆçš„tokenã€‚
åˆå§‹çŠ¶æ€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">s_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>æ˜¯ä»åˆå§‹åˆ†å¸ƒä¸­é‡‡æ ·å¾—åˆ°çš„ã€‚å³<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>0</mn></msub><mo>âˆ¼</mo><msub><mi>Ï</mi><mn>0</mn></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">s_0\sim\rho_0(s_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼›åœ¨åŸºäºLLMsçš„å¼ºåŒ–å­¦ä¹ æƒ…å¢ƒä¸‹ï¼Œåˆå§‹åˆ†å¸ƒ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï</mi><mn>0</mn></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rho_0(s_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>æ˜¯æ ¼å¼åŒ–åæç¤ºè¯çš„åˆ†å¸ƒã€‚</p>
<p>ä¸€èˆ¬æƒ…å¢ƒä¸‹ï¼ŒçŠ¶æ€è½¬ç§»éµå¾ªç¯å¢ƒåŠ¨æ€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>âˆ¼</mo><mi>P</mi><mo stretchy="false">(</mo><mo>â‹…</mo><mo>âˆ£</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">s_{t+1}\sim P(\cdot\mid s_t,a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord">â‹…</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼Œå³ä¸‹ä¸€ä¸ªçŠ¶æ€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">s_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span></span></span></span></span>å¹¶éå®Œå…¨ç¡®å®šã€‚ç„¶è€Œåœ¨åŸºäºLLMsçš„RLä¸­ï¼Œç¯å¢ƒæ˜¯ç¡®å®šæ€§çš„ï¼šä¸‹ä¸€ä¸ªçŠ¶æ€æ˜¯ç”±å½“å‰çŠ¶æ€ï¼ˆå³å·²ç”Ÿæˆçš„æ–‡æœ¬å‰ç¼€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰å’Œæ¨¡å‹ç”Ÿæˆçš„tokenï¼ˆå³åŠ¨ä½œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ç›´æ¥æ‹¼æ¥è€Œæˆï¼Œ</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ¥</mi><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_{t+1}=s_t\|a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ¥</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></div>
<p>è½¨è¿¹ï¼ˆTrajectoriesï¼‰ä¹Ÿå¯ç§°ä¸ºepisodesï¼ˆå›åˆï¼‰æˆ–rolloutsï¼ˆé‡‡æ ·åºåˆ—ï¼‰ã€‚</p>
<h3 data-id="heading-3">å¥–åŠ±ä¸å›æŠ¥</h3>
<p><strong>å¥–åŠ±</strong>æ˜¯ä¸€ä¸ª<strong>æ ‡é‡å€¼</strong>ï¼Œç”¨æ¥è¯„åˆ¤æ™ºèƒ½ä½“åœ¨çŠ¶æ€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ä¸‹æ‰§è¡ŒåŠ¨ä½œçš„å³æ—¶è´¨é‡ã€‚è®°ä½œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub><mo>=</mo><mi>R</mi><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r_t=R(s_t,a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼Œä¹Ÿç§°ä¸ºå•æ­¥å¥–åŠ±ã€‚
åœ¨éœ€è¦éªŒè¯ç»“æœçš„ä»»åŠ¡ï¼ˆä¾‹å¦‚æ•°å­¦æ¨ç†ï¼‰ä¸­ï¼Œé€šå¸¸å°†ä¸­é—´æ­¥éª¤çš„å¥–åŠ±è®¾ä¸º0ï¼Œä»…å¯¹æœ€ç»ˆçš„åŠ¨ä½œèµ‹äºˆéªŒè¯å¥–åŠ±ã€‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>r</mi><mi>T</mi></msub><mo>=</mo><mi>R</mi><mo stretchy="false">(</mo><msub><mi>s</mi><mi>T</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>T</mi></msub><mo stretchy="false">)</mo><mo>:</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>å¦‚æœç”Ÿæˆçš„å®Œæ•´å†…å®¹ä¸çœŸå®ç­”æ¡ˆåŒ¹é…</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>otherwise.</mtext></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">r_T=R(s_T,a_T):=
\begin{cases}
        1 &amp; \text{å¦‚æœç”Ÿæˆçš„å®Œæ•´å†…å®¹ä¸çœŸå®ç­”æ¡ˆåŒ¹é…} \\
        0 &amp; \text{otherwise.} 
\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span/></span></span></span></span><span class="arraycolsep" style="width:1em;"/><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord text"><span class="mord cjk_fallback">å¦‚æœç”Ÿæˆçš„å®Œæ•´å†…å®¹ä¸çœŸå®ç­”æ¡ˆåŒ¹é…</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord text"><span class="mord">otherwise.</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span/></span></span></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p><strong>å›æŠ¥</strong>ï¼ˆreturnï¼‰æ˜¯å¯¹ä¸€æ¡è½¨è¿¹ä¸Šçš„æ‰€æœ‰å¥–åŠ±çš„æ±‡æ€»ï¼›æœ‰ä¸¤ç§è®¡ç®—æ–¹å¼ã€‚
æœ‰é™æ—¶åŸŸï¼ˆfinite-horizonï¼‰æ— æŠ˜æ‰£å›æŠ¥ï¼šé€‚ç”¨äºæœ‰æ˜ç¡®ç»ˆæ­¢ç‚¹çš„ä»»åŠ¡ã€‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mo>:</mo><mo>=</mo><munder><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow></munder><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">R(\tau):=\sum_{t=0}r_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.3171em;vertical-align:-1.2671em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></div>
<p>æ— é™ï¼ˆinfinite-horizonï¼‰æ—¶åŸŸæŠ˜æ‰£å›æŠ¥ï¼šé€šè¿‡æŠ˜æ‰£å› å­é™ä½è¿œæœŸå¥–åŠ±çš„æƒé‡ï¼Œé€‚ç”¨äºæ— æ˜ç¡®ç»ˆæ­¢ç‚¹çš„åœºæ™¯ã€‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mo>:</mo><mo>=</mo><munderover><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant="normal">âˆ</mi></munderover><msup><mi>Î³</mi><mi>t</mi></msup><msub><mi>r</mi><mi>t</mi></msub><mo separator="true">,</mo><mspace width="1em"/><mn>0</mn><mo>&lt;</mo><mi>Î³</mi><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">R(\tau):=\sum_{t=0}^{\infty}\gamma^{t}r_{t},\quad0&lt;\gamma&lt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.9185em;vertical-align:-1.2671em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8436em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"/><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span></div>
<p>ç”±äºè¯­è¨€æ¨¡å‹ç”Ÿæˆæ–‡æœ¬æœ‰è‡ªç„¶ç»ˆæ­¢ç‚¹ï¼ˆå¦‚æ–‡æœ¬ç»“æŸæ ‡è®°æˆ–æœ€å¤§ç”Ÿæˆé•¿åº¦ï¼‰ï¼Œå› æ­¤é‡‡ç”¨æ— æŠ˜æ‰£çš„å…¬å¼ã€‚</p>
<h2 data-id="heading-4">ç­–ç•¥æ¢¯åº¦ç®—æ³•</h2>
<p>æ™ºèƒ½ä½“çš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–æœŸæœ›å›æŠ¥ã€‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>J</mi><mo stretchy="false">(</mo><mi>Î¸</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><mi>Ï„</mi><mo>âˆ¼</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow></msub><mrow><mo fence="true">[</mo><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">J(\theta)=\mathbb{E}_{\tau\sim\pi_\theta}\left[R(\tau)\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0059em;vertical-align:-0.2559em;"/><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">Ï„</span><span class="mrel mtight">âˆ¼</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2559em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">]</span></span></span></span></span></span></div>
<p>ä¸Šå¼è¡¨ç¤ºå¯¹ç­–ç•¥ç”Ÿæˆçš„æ‰€æœ‰å¯èƒ½è½¨è¿¹çš„æœŸæœ›ï¼ˆå¹³å‡å€¼ï¼‰ã€‚
å¯¹åº”çš„ä¼˜åŒ–é—®é¢˜ã€‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>Î¸</mi><mo>âˆ—</mo></msup><mo>=</mo><mi>arg</mi><mo>â¡</mo><munder><mrow><mi>max</mi><mo>â¡</mo></mrow><mi>Î¸</mi></munder><mi>J</mi><mo stretchy="false">(</mo><mi>Î¸</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta^*=\arg\max_\theta J(\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7387em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.5021em;vertical-align:-0.7521em;"/><span class="mop">ar<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-2.3479em;margin-left:0em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span><span class="mop">max</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.7521em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span></div>
<p>é€šè¿‡æ¢¯åº¦ä¸Šå‡ä¼˜åŒ–ç­–ç•¥å‚æ•°<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></span>ï¼Œä»¥æœŸæœ€å¤§åŒ–æœŸæœ›å›æŠ¥ã€‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>Î¸</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>Î¸</mi><mi>k</mi></msub><mo>+</mo><mi>Î±</mi><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo stretchy="false">(</mo><msub><mi>Î¸</mi><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta_{k+1}=\theta_k+\alpha\nabla_\theta J(\theta_k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9028em;vertical-align:-0.2083em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>
<p>å…¶ä¸­, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span></span></span></span></span> ä¸ºå­¦ä¹ ç‡, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo stretchy="false">(</mo><msub><mi>Î¸</mi><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\nabla_{\theta} J(\theta_{k})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> æ˜¯ç›®æ ‡å‡½æ•°åœ¨å½“å‰å‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¸</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\theta_{k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å¤„çš„æ¢¯åº¦ã€‚
æ ¸å¿ƒå…¬å¼ä¸ºREINFORCEç­–ç•¥æ¢¯åº¦å…¬å¼ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo stretchy="false">(</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><mi>Ï„</mi><mo>âˆ¼</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow></msub><mrow><mo fence="true">[</mo><munderover><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mi>T</mi></munderover><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>log</mi><mo>â¡</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>â‹…</mo><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\nabla_\theta J(\pi_\theta)=\mathbb{E}_{\tau\sim\pi_\theta}\left[\sum_{t=0}^T\nabla_\theta\log\pi_\theta(a_t|s_t)\cdot R(\tau)\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.0954em;vertical-align:-1.2671em;"/><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">Ï„</span><span class="mrel mtight">âˆ¼</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2559em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">[</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">]</span></span></span></span></span></span></span></div>
<p>è¯¥å…¬å¼é€‚åˆäºä»»ä½•<strong>å¯å¾®çš„</strong>ç­–ç•¥ï¼Œä»¥åŠä»»ä½•<strong>ç­–ç•¥ç›®æ ‡å‡½æ•°</strong>ã€‚</p>
<p>å› æ­¤ï¼Œç­–ç•¥æ¢¯åº¦ç­‰äº â€œè½¨è¿¹ä¸Šæ‰€æœ‰åŠ¨ä½œçš„å¯¹æ•°æ¦‚ç‡æ¢¯åº¦â€ ä¸ â€œè¯¥è½¨è¿¹çš„æ€»å›æŠ¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(\tau)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span></span>â€ ä¹˜ç§¯çš„æœŸæœ›ã€‚
è‹¥ä¸€æ¡è½¨è¿¹çš„å›æŠ¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(\tau)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span></span>è¾ƒé«˜ï¼Œæ¢¯åº¦ä¼šå¢åŠ è¯¥è½¨è¿¹ä¸­æ‰€æœ‰åŠ¨ä½œçš„å¯¹æ•°æ¦‚ç‡ï¼ˆä½¿è¿™äº›åŠ¨ä½œæ›´æ˜“è¢«é‡‡æ ·ï¼‰ï¼›è‹¥å›æŠ¥è¾ƒä½ï¼Œåˆ™é™ä½å¯¹åº”åŠ¨ä½œçš„å¯¹æ•°æ¦‚ç‡ã€‚</p>
<h3 data-id="heading-5">ç­–ç•¥æ¢¯åº¦çš„æ¨å¯¼</h3>
<ol>
<li>è½¨è¿¹çš„æ¦‚ç‡ï¼ˆç”±åˆå§‹çŠ¶æ€åˆ†å¸ƒã€ç¯å¢ƒè½¬ç§»æ¦‚ç‡å’Œç­–ç•¥å…±åŒå†³å®šï¼‰</li>
</ol>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo>âˆ£</mo><mi>Î¸</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>Ï</mi><mn>0</mn></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mn>0</mn></msub><mo stretchy="false">)</mo><munderover><mo>âˆ</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mi>T</mi></munderover><mi>P</mi><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>âˆ£</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mo>âˆ£</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(\tau\mid\theta)=\rho_0(s_0)\prod_{t=0}^TP(s_{t+1}\mid s_t,a_t)\pi_\theta(a_t\mid s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.0954em;vertical-align:-1.2671em;"/><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>
<p>å› æ­¤ï¼Œè½¨è¿¹çš„å¯¹æ•°æ¦‚ç‡ä¸º</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>log</mi><mo>â¡</mo><mi>P</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo>âˆ£</mo><mi>Î¸</mi><mo stretchy="false">)</mo><mo>=</mo><mi>log</mi><mo>â¡</mo><msub><mi>Ï</mi><mn>0</mn></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo>+</mo><munderover><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mi>T</mi></munderover><mrow><mo fence="true">[</mo><mi>log</mi><mo>â¡</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>âˆ£</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mi>log</mi><mo>â¡</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mo>âˆ£</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\log P(\tau\mid\theta)=\log\rho_0(s_0)+\sum_{t=0}^T\left[\log P(s_{t+1}\mid s_t,a_t)+\log\pi_\theta(a_t\mid s_t)\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:3.0954em;vertical-align:-1.2671em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">]</span></span></span></span></span></span></div>
<ol start="2">
<li>å¯¹æ•°å¯¼æ•°æŠ€å·§
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">;</mo><mi>Î¸</mi><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">;</mo><mi>Î¸</mi><mo stretchy="false">)</mo><mo>â‹…</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>log</mi><mo>â¡</mo><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">;</mo><mi>Î¸</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\nabla_\theta P(x;\theta)=P(x;\theta)\cdot\nabla_\theta\log P(x;\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span></li>
<li>ç¯å¢ƒç›¸å…³çš„é‡ä¸ç­–ç•¥å‚æ•°æ— å…³ã€‚<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï</mi><mn>0</mn></msub><mo separator="true">,</mo><mi>P</mi><mo stretchy="false">(</mo><mo>â‹…</mo><mo>âˆ£</mo><mo>â‹…</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rho_0,P(\cdot\mid\cdot)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord">â‹…</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">â‹…</span><span class="mclose">)</span></span></span></span></span>ä¸<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(\tau)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span></span>ä¸ä¾èµ–ç­–ç•¥å‚æ•°ã€‚</li>
</ol>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><msub><mi>Ï</mi><mn>0</mn></msub><mo>=</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>P</mi><mo>=</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\nabla_\theta\rho_0=\nabla_\theta P=\nabla_\theta R(\tau)=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span></div>
<p>å…¶ä¸­ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">\rho_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ä¸ºåˆå§‹çŠ¶æ€åˆ†å¸ƒï¼ˆå¦‚è¯­è¨€æ¨¡å‹ä»»åŠ¡é‡â€œè¾“å…¥æ–‡æœ¬çš„åˆ†å¸ƒâ€ï¼‰ï¼›<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mo>â‹…</mo><mo>âˆ£</mo><mo>â‹…</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(\cdot\mid\cdot)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord">â‹…</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">â‹…</span><span class="mclose">)</span></span></span></span></span>ä¸ºç¯å¢ƒè½¬ç§»æ¦‚ç‡ï¼ˆå¦‚â€œç»™å®šå½“å‰çŠ¶æ€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>å’ŒåŠ¨ä½œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œä¸‹ä¸€ä¸ªçŠ¶æ€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">s_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span></span></span></span></span>å‡ºç°çš„æ¦‚ç‡â€ï¼‰ï¼›<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(\tau)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span></span>ä¸ºè½¨è¿¹(\tau)çš„æ€»å›æŠ¥ã€‚
äºæ˜¯ï¼Œ</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo stretchy="false">(</mo><mi>Î¸</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><msub><mi mathvariant="double-struck">E</mi><mrow><mi>Ï„</mi><mo>âˆ¼</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow></msub><mo stretchy="false">[</mo><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><munder><mo>âˆ‘</mo><mi>Ï„</mi></munder><mi>P</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo stretchy="false">)</mo><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><munder><mo>âˆ‘</mo><mi>Ï„</mi></munder><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>P</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo stretchy="false">)</mo><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><munder><mo>âˆ‘</mo><mi>Ï„</mi></munder><mi>P</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo stretchy="false">)</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>log</mi><mo>â¡</mo><mi>P</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo stretchy="false">)</mo><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><mi>Ï„</mi><mo>âˆ¼</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow></msub><mo stretchy="false">[</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>log</mi><mo>â¡</mo><mi>P</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo stretchy="false">)</mo><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
\nabla_\theta J(\theta) &amp; =\nabla_\theta\mathbb{E}_{\tau\sim\pi_\theta}[R(\tau)] \\
		&amp; =\nabla_\theta\sum_\tau P(\tau|\theta)R(\tau) \\
		&amp; =\sum_\tau\nabla_\theta P(\tau|\theta)R(\tau) \\
		&amp; =\sum_\tau P(\tau|\theta)\nabla_\theta\log P(\tau|\theta)R(\tau) \\
		&amp; =\mathbb{E}_{\tau\sim\pi_\theta}[\nabla_\theta\log P(\tau|\theta)R(\tau)]
\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:10.8em;vertical-align:-5.15em;"/><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.65em;"><span style="top:-7.86em;"><span class="pstrut" style="height:3.05em;"/><span class="mord"><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span><span style="top:-6.15em;"><span class="pstrut" style="height:3.05em;"/><span class="mord"/></span><span style="top:-3.55em;"><span class="pstrut" style="height:3.05em;"/><span class="mord"/></span><span style="top:-0.95em;"><span class="pstrut" style="height:3.05em;"/><span class="mord"/></span><span style="top:1.44em;"><span class="pstrut" style="height:3.05em;"/><span class="mord"/></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:5.15em;"><span/></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.65em;"><span style="top:-7.86em;"><span class="pstrut" style="height:3.05em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">Ï„</span><span class="mrel mtight">âˆ¼</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2559em;"><span/></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)]</span></span></span><span style="top:-6.15em;"><span class="pstrut" style="height:3.05em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.9em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">Ï„</span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span><span style="top:-3.55em;"><span class="pstrut" style="height:3.05em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.9em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">Ï„</span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span><span style="top:-0.95em;"><span class="pstrut" style="height:3.05em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.9em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">Ï„</span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span><span style="top:1.44em;"><span class="pstrut" style="height:3.05em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">Ï„</span><span class="mrel mtight">âˆ¼</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2559em;"><span/></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)]</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:5.15em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p>æœŸæœ›<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">E</mi><mo stretchy="false">[</mo><mo>â‹…</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\mathbb{E}[\cdot]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathbb">E</span><span class="mopen">[</span><span class="mord">â‹…</span><span class="mclose">]</span></span></span></span></span>åœ¨ç¦»æ•£æƒ…å†µä¸‹å¯è¡¨ç¤ºä¸º â€œæ‰€æœ‰å¯èƒ½ç»“æœçš„æ¦‚ç‡ Ã— ç»“æœå€¼â€ çš„æ€»å’Œã€‚è¿™é‡Œè½¨è¿¹<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï„</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span></span></span></span></span>çš„æ¦‚ç‡æ˜¯<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(\tau | \theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span>ï¼ˆç”±ç­–ç•¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\pi_{\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ç”Ÿæˆï¼‰ï¼Œå› æ­¤æœŸæœ›å±•å¼€ä¸ºæ‰€æœ‰è½¨è¿¹çš„<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo stretchy="false">)</mo><mo>â‹…</mo><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(\tau | \theta) \cdot R(\tau)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span></span>ä¹‹å’Œã€‚</p>
<p>æ€»æ¢¯åº¦ç­‰äº â€œæ¯ä¸ªè½¨è¿¹çš„æ¦‚ç‡å¯¹ Î¸ çš„å¯¼æ•°â€ ä¹˜ä»¥ â€œè¯¥è½¨è¿¹å›æŠ¥â€ çš„æ€»å’Œã€‚å°†æ¢¯åº¦é‡æ–°è¡¨ç¤ºä¸º â€œè½¨è¿¹çš„å‡½æ•°çš„æœŸæœ›â€ï¼Œä¸ºåç»­é‡‡æ ·ä¼°è®¡åšå‡†å¤‡ã€‚</p>
<ol start="4">
<li>å¸¦å…¥è½¨è¿¹å¯¹æ•°æ¦‚ç‡å…¬å¼ï¼Œå¾—åˆ°æœ€ç»ˆçš„REINFORCEç­–ç•¥æ¢¯åº¦å…¬å¼ã€‚</li>
</ol>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo stretchy="false">(</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><mi>Ï„</mi><mo>âˆ¼</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow></msub><mrow><mo fence="true">[</mo><munderover><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mi>T</mi></munderover><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>log</mi><mo>â¡</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\nabla_\theta J(\pi_\theta)=\mathbb{E}_{\tau\sim\pi_\theta}\left[\sum_{t=0}^T\nabla_\theta\log\pi_\theta(a_t|s_t)R(\tau)\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.0954em;vertical-align:-1.2671em;"/><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">Ï„</span><span class="mrel mtight">âˆ¼</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2559em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">[</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">]</span></span></span></span></span></span></span></div>
<p>å¯¹äºé«˜å›æŠ¥çš„è½¨è¿¹ï¼Œæ¢¯åº¦ä¼š â€œæå‡â€ è¯¥è½¨è¿¹ä¸­æ‰€æœ‰åŠ¨ä½œçš„å¯¹æ•°æ¦‚ç‡ï¼›å¯¹äºä½å›æŠ¥çš„è½¨è¿¹ï¼Œåˆ™ä¼š â€œé™ä½â€ è¿™äº›åŠ¨ä½œçš„å¯¹æ•°æ¦‚ç‡ã€‚</p>
<p>ç»™å®šä¸€æ‰¹åŒ…å«Næ¡è½¨è¿¹çš„æ•°æ®é›†<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><mo stretchy="false">{</mo><msup><mi>Ï„</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><msubsup><mo stretchy="false">}</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup></mrow><annotation encoding="application/x-tex">D = \{\tau^{(i)}\}_{i=1}^{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1467em;vertical-align:-0.2587em;"/><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">}</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4413em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em;"><span/></span></span></span></span></span></span></span></span></span>â€”â€” è¿™äº›è½¨è¿¹é€šè¿‡ä»¥ä¸‹æ–¹å¼æ”¶é›†ï¼šé‡‡æ ·åˆå§‹çŠ¶æ€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>s</mi><mn>0</mn><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msubsup><mo>âˆ¼</mo><msub><mi>Ï</mi><mn>0</mn></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">s_{0}^{(i)} \sim \rho_{0}(s_{0})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3111em;vertical-align:-0.2663em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2663em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼Œç„¶ååœ¨ç¯å¢ƒä¸­æ‰§è¡Œç­–ç•¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\pi_{\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ å¦‚ä¸‹æ— åæ¢¯åº¦ä¼°è®¡é‡ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>g</mi><mo stretchy="true">^</mo></mover><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><munderover><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mi>T</mi></munderover><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>log</mi><mo>â¡</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msubsup><mi>a</mi><mi>t</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msubsup><mo>âˆ£</mo><msubsup><mi>s</mi><mi>t</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">)</mo><mi>R</mi><mo stretchy="false">(</mo><msup><mi>Ï„</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\widehat{g}=\frac{1}{N}\sum_{i=1}^N\sum_{t=0}^T\nabla_\theta\log\pi_\theta(a_t^{(i)}\mid s_t^{(i)})R(\tau^{(i)})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.865em;vertical-align:-0.1944em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6706em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span><span class="svg-align" style="width:calc(100% - 0.0556em);margin-left:0.0556em;top:-3.4306em;"><span class="pstrut" style="height:3em;"/><span style="height:0.24em;"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="0.24em" viewbox="0 0 1062 239" preserveaspectratio="none"><path d="M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22&#10;c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.106em;vertical-align:-1.2777em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4542em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2948em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4542em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>
<p>å›¾å½¢åŒ–è§£é‡Šå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a42b716f63f84119b177f024fc2b5a29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGhu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767171830&amp;x-signature=V%2FEdkwmz%2BIsY1h80BU1U9OB3yMQ%3D" alt="c307631030904b21a2fb30016193e871.png" loading="lazy"/></p>
<p>è¯¥å‘é‡ä¼šåœ¨æ¢¯åº¦ä¸Šå‡çš„å‚æ•°æ›´æ–°å…¬å¼<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi><mo>â†</mo><mi>Î¸</mi><mo>+</mo><mi>Î±</mi><mover accent="true"><mi>g</mi><mo stretchy="true">^</mo></mover></mrow><annotation encoding="application/x-tex">\theta\leftarrow\theta+\alpha\widehat{g}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.865em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6706em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span><span class="svg-align" style="width:calc(100% - 0.0556em);margin-left:0.0556em;top:-3.4306em;"><span class="pstrut" style="height:3em;"/><span style="height:0.24em;"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="0.24em" viewbox="0 0 1062 239" preserveaspectratio="none"><path d="M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22&#10;c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span></span></span>ä¸­ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-6">Actor-Criticç®—æ³•</h2>
<p>åœ¨è®²è§£å…·ä½“çš„ç®—æ³•å‰ï¼Œå…ˆç†æ¸…ä¸€äº›æ¦‚å¿µã€‚</p>
<h4 data-id="heading-7">çŠ¶æ€ä»·å€¼å‡½æ•°</h4>
<p>çŠ¶æ€ä»·å€¼å‡½æ•° (state value function) æ˜¯æŒ‡æ™ºèƒ½ä½“åœ¨çŠ¶æ€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ä»¥åŠä¹‹åçš„æ‰€æœ‰æ—¶åˆ»éƒ½é‡‡ç”¨ç­–ç•¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span></span></span></span></span>å¾—åˆ°çš„<strong>ç´¯è®¡æŠ˜æ‰£å¥–åŠ±</strong>(<strong>å›æŠ¥</strong>)çš„æœŸæœ›å€¼ã€‚æ˜¯è¯„ä¼°<strong>çŠ¶æ€</strong>â€œå¥½åâ€çš„æŒ‡æ ‡ï¼Œç”¨äºæŒ‡å¯¼æ™ºèƒ½ä½“å†³ç­–ã€‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>V</mi><mi mathvariant="bold-italic">Ï€</mi></msub><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>E</mi><mi mathvariant="bold-italic">Ï€</mi></msub><mo stretchy="false">[</mo><msub><mi>G</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>=</mo><mi>s</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">V_{\boldsymbol{\pi}}(s)=E_{\boldsymbol{\pi}}[G_t|s_t=s]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1611em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord boldsymbol mtight" style="margin-right:0.03704em;">Ï€</span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1611em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord boldsymbol mtight" style="margin-right:0.03704em;">Ï€</span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">s</span><span class="mclose">]</span></span></span></span></span></div>
<p>å…¶ä¸­ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi mathvariant="bold-italic">Ï€</mi></msub></mrow><annotation encoding="application/x-tex">V_{\boldsymbol{\pi}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1611em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord boldsymbol mtight" style="margin-right:0.03704em;">Ï€</span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ä¾èµ–äºç­–ç•¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">Ï€</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{\pi}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">Ï€</span></span></span></span></span></span></span>ï¼›<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>æ˜¯æŒ‡æ—¶é—´ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"/><span class="mord mathnormal">t</span></span></span></span></span> çš„å½“å‰çŠ¶æ€ï¼›<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><mo>â‹…</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">E_\pi(\cdot)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord">â‹…</span><span class="mclose">)</span></span></span></span></span>ä¸Šå¼è€ƒè™‘äº†æ‰€æœ‰å¯èƒ½çš„è½¨è¿¹ï¼ˆTrajectoryï¼‰çš„æ¦‚ç‡åˆ†å¸ƒï¼Œè®¡ç®—æœŸæœ›å€¼ï¼›<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">G_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>æ˜¯æŒ‡ç´¯è®¡å¥–åŠ±ï¼Œå³ä»æ—¶é—´æ­¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"/><span class="mord mathnormal">t</span></span></span></span></span>å¼€å§‹çš„æŠ˜æ‰£ç´¯è®¡å¥–åŠ±ï¼Œå…¬å¼ä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>t</mi></msub><mo>=</mo><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><msub><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><msup><mi>Î³</mi><mn>2</mn></msup><msub><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>2</mn></mrow></msub><mo>+</mo><mo>â‹¯</mo><mo>+</mo><msup><mi>Î³</mi><mrow><mi>T</mi><mo>âˆ’</mo><mi>t</mi></mrow></msup><msub><mi>r</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">G_t = r_t + \gamma r_{t+1} + \gamma^2 r_{t+2} + \dots + \gamma^{T-t} r_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7917em;vertical-align:-0.2083em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0224em;vertical-align:-0.2083em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mbin mtight">âˆ’</span><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œä¸”<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">G_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>æ˜¯éšæœºå˜é‡ï¼Œè¿™æ˜¯ç”±äºç¯å¢ƒå’Œç­–ç•¥å¯èƒ½å…·æœ‰éšæœºæ€§ã€‚</p>
<h4 data-id="heading-8">åŠ¨ä½œä»·å€¼å‡½æ•°</h4>
<p>åŠ¨ä½œä»·å€¼å‡½æ•°æ˜¯æŒ‡æ™ºèƒ½ä½“åœ¨çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> é‡‡å–åŠ¨ä½œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>, ä»¥åçš„æ‰€æœ‰æ—¶åˆ»éƒ½é‡‡ç”¨ç­–ç•¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span></span></span></span></span>å¾—åˆ°çš„<strong>ç´¯è®¡æŠ˜æ‰£å¥–åŠ±</strong>(<strong>å›æŠ¥</strong>)çš„æœŸæœ›å€¼ã€‚å®ƒè¯„ä¼°äº†æ¯ä¸ª<strong>çŠ¶æ€-åŠ¨ä½œå¯¹</strong>çš„ä»·å€¼ã€‚
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Q</mi><mi mathvariant="bold-italic">Ï€</mi></msub><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>E</mi><mi mathvariant="bold-italic">Ï€</mi></msub><mo stretchy="false">[</mo><msub><mi>G</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>=</mo><mi>s</mi><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>=</mo><mi>a</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">Q_{\boldsymbol{\pi}}(s,a)=E_{\boldsymbol{\pi}}[G_t|s_t=s,a_t=a]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1611em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord boldsymbol mtight" style="margin-right:0.03704em;">Ï€</span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1611em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord boldsymbol mtight" style="margin-right:0.03704em;">Ï€</span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">a</span><span class="mclose">]</span></span></span></span></span>
å…¶ä¸­ï¼ŒåŠ¨ä½œä»·å€¼å‡½æ•°ä¹Ÿæ˜¯ä¸ç­–ç•¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span></span></span></span></span>ç›¸å…³çš„ã€‚</p>
<h4 data-id="heading-9">åŠ¨ä½œä»·å€¼å‡½æ•°ä¸çŠ¶æ€ä»·å€¼å‡½æ•°çš„å…³ç³»</h4>
<div class="math math-display"><span class="katex-error" title="ParseError: KaTeX parse error: Can't use function '\]' in math mode at position 86: â€¦i}(s_{t},a_{t})\Ì²]Ì² \\&#10; &amp; =\sum_{aâ€¦" style="color:#cc0000">\begin{aligned}
V_\pi(s_{t}) &amp; =E_{a_{t}\sim\pi(.|s_{t},a_{t})}\[Q_{\pi}(s_{t},a_{t})\] \\
 &amp; =\sum_{a_t\in\mathcal{A}}\pi(a_t|s_t)Q_\pi(s_t,a_t)
\end{aligned}</span></div>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V_\pi(s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> å¯ä»¥çœ‹ä½œæ™ºèƒ½ä½“åœ¨çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„â€œé•¿æœŸä»·å€¼â€ï¼Œå®ƒä¾èµ–äºæ™ºèƒ½ä½“å¯èƒ½é‡‡å–çš„æ‰€æœ‰åŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> åŠå…¶å¸¦æ¥çš„å›æŠ¥ã€‚</li>
<li>ç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span></span></span></span></span> å†³å®šäº†æ¯ä¸ªåŠ¨ä½œçš„æ¦‚ç‡ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Q</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q_\pi(s_t, a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> åˆ™æä¾›äº†æ‰§è¡Œç‰¹å®šåŠ¨ä½œåçš„é¢„æœŸæ”¶ç›Šã€‚<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V_\pi(s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>æœ¬è´¨ä¸Šæ˜¯æ‰€æœ‰å¯èƒ½åŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span> çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span></span></span></span></span> å€¼çš„åŠ æƒå¹³å‡ï¼Œç»¼åˆåæ˜ äº†æ‰€æœ‰å¯èƒ½é€‰æ‹©çš„æ€»ä½“æ•ˆæœã€‚
ä¹Ÿå°±æ˜¯ V æ˜¯ Q çš„æœŸæœ›ã€‚</li>
</ul>
<h4 data-id="heading-10">ä¼˜åŠ¿å‡½æ•°</h4>
<p>ä¼˜åŠ¿å‡½æ•°å®šä¹‰äº†æ™ºèƒ½ä½“åœ¨ç¯å¢ƒä¸­çš„æŸä¸ªçŠ¶æ€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span>ä¸‹é‡‡å–è¡ŒåŠ¨<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span>æ—¶ï¼Œç›¸å¯¹äºéšæœºé‡‡å–è¡ŒåŠ¨æ‰€èƒ½è·å¾—çš„é¢å¤–å›æŠ¥ã€‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>A</mi><mi>Ï€</mi></msup><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>Q</mi><mi>Ï€</mi></msup><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><msup><mi>V</mi><mi>Ï€</mi></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A^\pi(s,a)=Q^\pi(s,a)-V^\pi(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span></div>
<p>ä¸Šæ–‡æåˆ°ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mi>Ï€</mi></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V^\pi(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span> æ˜¯â€œå¹³å‡é¢„æœŸå›æŠ¥â€ï¼ˆæ ¹æ®ç­–ç•¥çš„éšæœºé€‰æ‹©ï¼‰ï¼Œè€Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mi>Ï€</mi></msup><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q^\pi(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span> æ˜¯â€œç‰¹å®šåŠ¨ä½œçš„é¢„æœŸå›æŠ¥â€ã€‚
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mi>Ï€</mi></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V^\pi(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span> ä»£è¡¨äº†ç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span></span></span></span></span> åœ¨çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span> ä¸‹çš„â€œåŸºå‡†çº¿â€ï¼ˆbaselineï¼‰ï¼Œå³å¦‚æœæ™ºèƒ½ä½“æŒ‰ç…§ç­–ç•¥éšæœºé€‰æ‹©åŠ¨ä½œï¼Œèƒ½è·å¾—çš„å¹³å‡æ”¶ç›Šã€‚å‡å»è¿™ä¸ªåŸºå‡†ï¼Œå°±èƒ½çªå‡ºåŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span> çš„â€œé¢å¤–è´¡çŒ®â€ã€‚</p>
<ul>
<li>å¦‚æœ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>A</mi><mi>Ï€</mi></msup><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">A^\pi(s,a) &gt; 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ï¼šè¯´æ˜æ‰§è¡ŒåŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span> çš„é¢„æœŸå›æŠ¥é«˜äºå¹³å‡æ°´å¹³ï¼Œè¿™ä¸ªåŠ¨ä½œâ€œä¼˜äºâ€ç­–ç•¥çš„å¹³å‡é€‰æ‹©ã€‚</li>
<li>å¦‚æœ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>A</mi><mi>Ï€</mi></msup><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">A^\pi(s,a) &lt; 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ï¼šè¯´æ˜æ‰§è¡ŒåŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span> çš„é¢„æœŸå›æŠ¥ä½äºå¹³å‡æ°´å¹³ï¼Œè¿™ä¸ªåŠ¨ä½œâ€œåŠ£äºâ€ç­–ç•¥çš„å¹³å‡é€‰æ‹©ã€‚</li>
<li>å¦‚æœ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>A</mi><mi>Ï€</mi></msup><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">A^\pi(s,a) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ï¼šè¯´æ˜æ‰§è¡ŒåŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span> çš„é¢„æœŸå›æŠ¥æ­£å¥½ç­‰äºå¹³å‡æ°´å¹³ï¼Œè¿™ä¸ªåŠ¨ä½œâ€œä¸­è§„ä¸­çŸ©â€ã€‚</li>
</ul>
<p>æ³¨æ„ï¼Œè¿™é‡Œâ€œéšæœºé‡‡å–è¡ŒåŠ¨â€æŒ‡çš„æ˜¯æŒ‰ç…§ç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span></span></span></span></span> çš„æ¦‚ç‡åˆ†å¸ƒé€‰æ‹©åŠ¨ä½œï¼Œè€Œä¸æ˜¯å®Œå…¨å‡åŒ€éšæœºã€‚</p>
<h4 data-id="heading-11">æ—¶åºå·®åˆ†è¯¯å·®</h4>
<p>åœ¨å•æ­¥æ—¶åºå·®åˆ†æ–¹æ³•ä¸­ï¼Œæ—¶åºå·®åˆ†è¯¯å·®ç”¨äºæ›´æ–°ä»·å€¼å‡½æ•°ã€‚
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î´</mi><mo>=</mo><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><msup><mi>V</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>âˆ’</mo><msup><mi>V</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\delta = r_t+\gamma V^{\pi_\theta}(s_{t+1})-V^{\pi_\theta}(s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03785em;">Î´</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<h4 data-id="heading-12">Actor-Criticç®—æ³•ä»‹ç»</h4>
<p>åœ¨ä¸Šæ–‡ä»‹ç»çš„REINFORCEç­–ç•¥æ¢¯åº¦å…¬å¼ä¸­ï¼Œç›®æ ‡å‡½æ•°çš„æ¢¯åº¦æœ‰ä¸€é¡¹è½¨è¿¹å›æŠ¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(\tau)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span></span>ï¼Œç”¨äºæŒ‡å¯¼ç­–ç•¥çš„æ›´æ–°ã€‚èƒ½å¦æ‹Ÿå’Œä¸€ä¸ª<strong>ä»·å€¼å‡½æ•°</strong>æ¥æŒ‡å¯¼ç­–ç•¥è¿›è¡Œå­¦ä¹ å‘¢ï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p>è¿™æ­£å¼<strong>Actor-Critic</strong>ç®—æ³•æ‰€åšçš„ã€‚æˆ‘ä»¬å¯ä»¥å°†ç­–ç•¥æ¢¯åº¦å†™æˆæ›´ä¸€èˆ¬çš„å½¢å¼ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi mathvariant="normal">âˆ‡</mi><mi>J</mi><mo stretchy="false">(</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><msub><mi>E</mi><mrow><mi>Ï„</mi><mo>âˆ¼</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow></msub><mo stretchy="false">[</mo><munderover><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>T</mi><mo>âˆ’</mo><mn>1</mn></mrow></munderover><msub><mi mathvariant="normal">Î¨</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ‡</mi><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>â‰ˆ</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></munderover><munderover><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mrow><msub><mi>T</mi><mi>n</mi></msub><mo>âˆ’</mo><mn>1</mn></mrow></munderover><msub><mi mathvariant="normal">Î¨</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ‡</mi><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
\nabla J(\pi_{\theta}) &amp; =E_{\tau\sim\pi_{\theta}}[\sum_{t=0}^{T-1}\Psi_{t}\nabla log\pi_{\theta}(a_{t}|s_{t})] \\
 &amp; \approx\frac{1}{N}\sum_{n=0}^{N-1}\sum_{t=0}^{T_{n}-1}\Psi_{t}\nabla log\pi_{\theta}(a_{t}|s_{t})
\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6.802em;vertical-align:-3.151em;"/><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.651em;"><span style="top:-5.6621em;"><span class="pstrut" style="height:3.8394em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.2555em;"><span class="pstrut" style="height:3.8394em;"/><span class="mord"/></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.151em;"><span/></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.651em;"><span style="top:-5.6621em;"><span class="pstrut" style="height:3.8394em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">Ï„</span><span class="mrel mtight">âˆ¼</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2559em;"><span/></span></span></span></span></span><span class="mopen">[</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord">Î¨</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ‡</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)]</span></span></span><span style="top:-2.2555em;"><span class="pstrut" style="height:3.8394em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8394em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3111em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord">Î¨</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ‡</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.151em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p>å…¶ä¸­ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Î¨</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\Psi_{t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord">Î¨</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>çš„å½¢å¼æœ‰å¤šç§ï¼š</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mi>T</mi></msubsup><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\sum_{t=0}^Tr_{t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2809em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼šè½¨è¿¹çš„æ€»å›æŠ¥ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><msup><mi>t</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><mi>t</mi></mrow><mi>T</mi></msubsup><msub><mi>r</mi><msup><mi>t</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub></mrow><annotation encoding="application/x-tex">\sum_{t^{\prime}=t}^Tr_{t^{\prime}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2809em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mrel mtight">=</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼šåŠ¨ä½œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ä¹‹åçš„å›æŠ¥ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><msup><mi>t</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><mi>t</mi></mrow><mi>T</mi></msubsup><msub><mi>r</mi><msup><mi>t</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub><mo>âˆ’</mo><mi>b</mi><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum_{t^{\prime}=t}^Tr_{t^{\prime}}-b(s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2809em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mrel mtight">=</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼šåŸºçº¿ç‰ˆæœ¬çš„æ”¹è¿›å…¬å¼ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mi>Ï€</mi></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q^\pi(s_t,a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼šåŠ¨ä½œä»·å€¼å‡½æ•°ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>A</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A^{\pi_\theta}(s_t,a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼šä¼˜åŠ¿å‡½æ•°ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><msup><mi>V</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>âˆ’</mo><msup><mi>V</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r_t+\gamma V^{\pi_\theta}(s_{t+1})-V^{\pi_\theta}(s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼šæ—¶åºå·®åˆ†è¯¯å·®ã€‚</li>
</ul>
<p>æ­¤å¤„è®¨è®ºçš„æ˜¯ç¬¬å…­ç§â€”â€”æ—¶åºå·®åˆ†æ®‹å·®<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Î¨</mi><mi>t</mi></msub><mo>=</mo><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><msup><mi>V</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>âˆ’</mo><msup><mi>V</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Psi_{t}=r_t+\gamma V^{\pi_\theta}(s_{t+1})-V^{\pi_\theta}(s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord">Î¨</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>æ¥æŒ‡å¯¼ç­–ç•¥æ¢¯åº¦è¿›è¡Œå­¦ä¹ ã€‚
Actorç§°ä¸º<strong>ç­–ç•¥ç½‘ç»œ</strong>ï¼ŒCriticç§°ä¸º<strong>ä»·å€¼ç½‘ç»œ</strong>ã€‚</p>
<ul>
<li>Actor è¦åšçš„æ˜¯ä¸ç¯å¢ƒäº¤äº’ï¼Œå¹¶åœ¨ Critic ä»·å€¼å‡½æ•°çš„æŒ‡å¯¼ä¸‹ç”¨ç­–ç•¥æ¢¯åº¦å­¦ä¹ ä¸€ä¸ªæ›´å¥½çš„ç­–ç•¥ã€‚</li>
<li>Critic è¦åšçš„æ˜¯é€šè¿‡ Actor ä¸ç¯å¢ƒäº¤äº’æ”¶é›†çš„æ•°æ®å­¦ä¹ ä¸€ä¸ªä»·å€¼å‡½æ•°ï¼Œè¿™ä¸ªä»·å€¼å‡½æ•°ä¼šç”¨äºåˆ¤æ–­åœ¨å½“å‰çŠ¶æ€ä»€ä¹ˆåŠ¨ä½œæ˜¯å¥½çš„ï¼Œä»€ä¹ˆåŠ¨ä½œä¸æ˜¯å¥½çš„ï¼Œè¿›è€Œå¸®åŠ© Actor è¿›è¡Œç­–ç•¥æ›´æ–°ã€‚</li>
</ul>
<h4 data-id="heading-13">Actorçš„ä¼˜åŒ–ç›®æ ‡</h4>
<p><strong>Actor</strong>ï¼šè´Ÿè´£å­¦ä¹ å¹¶æ”¹è¿›ç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mi>a</mi><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_\theta(a|s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mord">âˆ£</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>ï¼Œå³åœ¨ç»™å®šçŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span> ä¸‹é€‰æ‹©åŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span> çš„æ¦‚ç‡åˆ†å¸ƒã€‚Actor çš„ç›®æ ‡æ˜¯é€šè¿‡è°ƒæ•´å‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></span>ï¼Œè®©ç­–ç•¥æ›´å€¾å‘äºé€‰æ‹©é«˜å›æŠ¥çš„åŠ¨ä½œã€‚</p>
<p><strong>Critic</strong>ï¼šè´Ÿè´£ä¼°è®¡ä»·å€¼å‡½æ•°ï¼ˆå¦‚ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mi>Ï€</mi></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V^\pi(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span> æˆ– <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mi>Ï€</mi></msup><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q^\pi(s, a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span>ï¼‰ï¼Œä¸º Actor æä¾›åé¦ˆï¼Œè¯„ä¼°å½“å‰ç­–ç•¥çš„â€œå¥½åâ€æˆ–åŠ¨ä½œçš„â€œä¼˜åŠ¿â€ï¼ˆadvantageï¼‰ã€‚</p>
<p>æ­¤å¤„ï¼Œä¸èƒ½å¿˜è®°Actorçš„ç›®æ ‡ä»ç„¶æ˜¯æœ€å¤§åŒ–ç­–ç•¥çš„æœŸæœ›å›æŠ¥ï¼Œå³<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi><mo stretchy="false">(</mo><mi>Î¸</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><mi>Ï„</mi><mo>âˆ¼</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow></msub><mrow><mo fence="true">[</mo><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">J(\theta)=\mathbb{E}_{\tau\sim\pi_\theta}\left[R(\tau)\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0059em;vertical-align:-0.2559em;"/><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">Ï„</span><span class="mrel mtight">âˆ¼</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2559em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">]</span></span></span></span></span></span>ã€‚
åœ¨ Actor-Critic ä¸­ï¼ŒActor çš„ä¼˜åŒ–ç›®æ ‡é€šå¸¸æ”¹ç”¨ä¼˜åŠ¿å‡½æ•°<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>A</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A^{\pi_\theta}(s_t,a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>æ›¿æ¢<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(\tau)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span></span>æ¥é™ä½æ–¹å·®ã€‚å…¬å¼ä¸º</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>a</mi><mi>r</mi><mi>g</mi><munder><mrow><mi>max</mi><mo>â¡</mo></mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></munder><mi>J</mi><mo stretchy="false">(</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><msub><mi>E</mi><mrow><mi>Ï„</mi><mo>âˆ¼</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow></msub><mo stretchy="false">[</mo><munderover><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mi>T</mi></munderover><msub><mi>A</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>â‰ˆ</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></munderover><munderover><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><msub><mi>T</mi><mi>n</mi></msub></munderover><mo stretchy="false">(</mo><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><msub><mi>V</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>âˆ’</mo><msub><mi>V</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
arg\max_{\pi_{\theta}}J(\pi_{\theta}) &amp; =E_{\tau\sim\pi_{\theta}}[\sum_{t=0}^{T}A_{\phi}(s_{t},a_{t})log\pi_{\theta}(a_{t}|s_{t})] \\
 &amp; \approx\frac{1}{N}\sum_{n=0}^{N-1}\sum_{t=0}^{T_n}(r_t+\gamma V_\phi(s_{t+1})-V_\phi(s_t))log\pi_\theta(a_t|s_t)
\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6.802em;vertical-align:-3.151em;"/><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.651em;"><span style="top:-5.6621em;"><span class="pstrut" style="height:3.8394em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-2.4em;margin-left:0em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span><span class="mop">max</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8059em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.2555em;"><span class="pstrut" style="height:3.8394em;"/><span class="mord"/></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.151em;"><span/></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.651em;"><span style="top:-5.6621em;"><span class="pstrut" style="height:3.8394em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">Ï„</span><span class="mrel mtight">âˆ¼</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2559em;"><span/></span></span></span></span></span><span class="mopen">[</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)]</span></span></span><span style="top:-2.2555em;"><span class="pstrut" style="height:3.8394em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8394em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3111em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">))</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.151em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p>å…¶ä¸­ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><msub><mi>V</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r_t + \gamma V_\phi(s_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼šTD ç›®æ ‡ï¼ˆTD targetï¼‰ï¼Œå³å³æ—¶å¥–åŠ± <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">r_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> åŠ ä¸ŠæŠ˜æ‰£åçš„ä¸‹ä¸€çŠ¶æ€ä»·å€¼ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi><msub><mi>V</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\gamma V_\phi(s_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ã€‚<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span></span></span></span></span> æ˜¯æŠ˜æ‰£å› å­ï¼ˆ0 â‰¤ Î³ &lt; 1ï¼‰ï¼Œè¡¨ç¤ºå¯¹æœªæ¥å¥–åŠ±çš„é‡è§†ç¨‹åº¦ã€‚</p>
<p>å®é™…ä¸Šï¼Œåœ¨å•æ­¥æ›´æ–°ä¸­ä¼˜åŠ¿å¯ä»¥ç”± TD_error è¿‘ä¼¼ï¼ˆå¦‚ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>â‰ˆ</mo><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><mi>V</mi><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>âˆ’</mo><mi>V</mi><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A(s_t, a_t) \approx r_t + \gamma V(s_{t+1}) - V(s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Î³V</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦ç­‰åˆ°ä¸€ä¸ªå›åˆï¼ˆepisodeï¼‰ç»“æŸåå†å»ä¼˜åŒ–ï¼Œè€Œæ˜¯é’ˆå¯¹æ¯ä¸ªæ—¶é—´æ­¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"/><span class="mord mathnormal">t</span></span></span></span></span> çš„çŠ¶æ€-åŠ¨ä½œå¯¹ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(s_t, a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> è¿›è¡Œè°ƒæ•´ã€‚ä¹Ÿå°±æ˜¯è¯´æ™ºèƒ½ä½“é€šè¿‡åœ¨æ¯ä¸ªæ—¶é—´æ­¥ä¸Šå­¦ä¹ ï¼Œé€æ­¥æ”¹è¿›ç­–ç•¥ï¼Œè€Œä¸ç”¨ç­‰åˆ°å›åˆç»“æŸã€‚</p>
<p><strong>æ³¨ï¼šæ¯ä¸ªæ—¶é—´æ­¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"/><span class="mord mathnormal">t</span></span></span></span></span> åŒ…æ‹¬ä»¥ä¸‹è¿‡ç¨‹ï¼š</strong></p>
<ul>
<li>è§‚å¯ŸçŠ¶æ€ï¼šæ™ºèƒ½ä½“æ¥æ”¶åˆ°ç¯å¢ƒçš„å½“å‰çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆæ¯”å¦‚æ¸¸æˆä¸­çš„å±å¹•å›¾åƒã€æœºå™¨äººä½ç½®ç­‰ï¼‰ã€‚</li>
<li>é€‰æ‹©åŠ¨ä½œï¼šæ ¹æ®ç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span></span></span></span></span>ï¼ˆæˆ– <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\pi_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ï¼Œæ™ºèƒ½ä½“é€‰æ‹©ä¸€ä¸ªåŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆæ¯”å¦‚â€œå‘å³ç§»åŠ¨â€ã€â€œè·³è·ƒâ€ï¼‰ã€‚</li>
<li>æ‰§è¡ŒåŠ¨ä½œå¹¶è·å¾—åé¦ˆï¼šæ™ºèƒ½ä½“æ‰§è¡Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œç¯å¢ƒæ ¹æ®è§„åˆ™è¿”å›ï¼š
<ul>
<li>å³æ—¶å¥–åŠ± <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">r_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆæ¯”å¦‚å¾—åˆ† +1 æˆ–æƒ©ç½š -1ï¼‰ã€‚</li>
<li>ä¸‹ä¸€çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">s_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆç¯å¢ƒå› åŠ¨ä½œå˜åŒ–åçš„æ–°çŠ¶æ€ï¼‰ã€‚</li>
</ul>
</li>
<li>é‡å¤ï¼šè¿›å…¥ä¸‹ä¸€ä¸ªæ—¶é—´æ­¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6984em;vertical-align:-0.0833em;"/><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ï¼Œç»§ç»­è¿™ä¸ªå¾ªç¯ã€‚</li>
</ul>
<h4 data-id="heading-14">Criticçš„ä¼˜åŒ–ç›®æ ‡</h4>
<p>Criticæ‰¿æ‹…çš„è§’è‰²ï¼šï¼ˆ1ï¼‰ä»·å€¼å‡½æ•°ä¼°è®¡ï¼šä¼°è®¡æ™ºèƒ½ä½“åœ¨å½“å‰ç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span></span></span></span></span> ä¸‹ï¼Œä»æŸä¸ªçŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span> å¼€å§‹æ‰€èƒ½è·å¾—çš„é¢„æœŸç´¯è®¡å›æŠ¥ã€‚ï¼ˆ2ï¼‰åé¦ˆ Actorï¼šCritic çš„ä¼°è®¡ç”¨äºæŒ‡å¯¼ Actor æ›´æ–°ç­–ç•¥ã€‚</p>
<p>Critic çš„ä¼˜åŒ–ç›®æ ‡æ˜¯ä½¿ä¼°è®¡çš„ä»·å€¼å‡½æ•°å°½å¯èƒ½æ¥è¿‘ç¯å¢ƒçš„çœŸå®ä»·å€¼å‡½æ•°ï¼ˆtrue value functionï¼‰ã€‚è¿™é€šå¸¸é€šè¿‡æœ€å°åŒ–é¢„æµ‹å€¼ä¸ç›®æ ‡å€¼ä¹‹é—´çš„è¯¯å·®æ¥å®ç°ã€‚ç›®æ ‡å‡½æ•°é€šå¸¸åŸºäºæ—¶åºå·®åˆ†è¯¯å·®ï¼ˆTD_Errorï¼‰ï¼Œå› ä¸ºå®ƒå…è®¸åœ¨çº¿å­¦ä¹ ï¼Œè€Œæ— éœ€ç­‰å¾…å›åˆç»“æŸã€‚</p>
<p>Criticçš„ä¼˜åŒ–ç›®æ ‡ä¸ºï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>a</mi><mi>r</mi><mi>g</mi><munder><mrow><mi>min</mi><mo>â¡</mo></mrow><msub><mi>V</mi><mi>Ï•</mi></msub></munder><mi>L</mi><mo stretchy="false">(</mo><msub><mi>V</mi><mi>Ï•</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>E</mi><mi>t</mi></msub><mo stretchy="false">[</mo><mo stretchy="false">(</mo><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><msub><mi>V</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>âˆ’</mo><msub><mi>V</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">arg\min_{V_\phi}L(V_\phi)=E_t[(r_t+\gamma V_\phi(s_{t+1})-V_\phi(s_t))^2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.6974em;vertical-align:-0.9474em;"/><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-2.3557em;margin-left:0em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.2222em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2901em;"><span/></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span><span class="mop">min</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9474em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">[(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.1502em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></span></div>
<p>è®¾å½“å‰ç­–ç•¥ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span></span></span></span></span> ï¼Œé…å¥—ä»·å€¼å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>Ï€</mi></msub></mrow><annotation encoding="application/x-tex">V_\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å¯ç²¾å‡†è¯„ä¼°å…¶ä»·å€¼ã€‚å¯¹äºçŠ¶æ€ - åŠ¨ä½œå¯¹ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(s_t, a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> ï¼Œå®šä¹‰<strong>ä¼˜åŠ¿å‡½æ•°</strong>ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>A</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mtext>â€…â€Š</mtext><mo>=</mo><mtext>â€…â€Š</mtext><msub><mi>Q</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mtext>â€…â€Š</mtext><mo>âˆ’</mo><mtext>â€…â€Š</mtext><msub><mi>V</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A_\pi(s_t, a_t) \;=\; Q_\pi(s_t, a_t) \;-\; V_\pi(s_t) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>
<p>å…¶ä¸­ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Q</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q_\pi(s_t, a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> ä¸ºâ€œçŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸‹æ‰§è¡ŒåŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„ä»·å€¼æœŸæœ›â€ï¼ˆåŠ¨ä½œä»·å€¼å‡½æ•° ï¼‰ã€‚è‹¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A_\pi(s_t, a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> è¾ƒå¤§ï¼Œè¯´æ˜ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> åœ¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸‹â€œç›¸å¯¹æ›´ä¼˜â€ï¼Œéœ€æå‡æ¡ä»¶æ¦‚ç‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi(a_t \vert s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> ã€‚é€šè¿‡é€çŠ¶æ€è°ƒæ•´åŠ¨ä½œæ¦‚ç‡åˆ†å¸ƒï¼Œæœ€ç»ˆå¾—åˆ°æ›´æ–°ç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ï€</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">\pi'</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span> ã€‚</p>
<p>å½“ä¸”ä»…å½“ï¼šå¯¹ä»»æ„çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ï¼Œè‹¥å®¢è§‚æœ€ä¼˜åŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>a</mi><mi>t</mi><mo>âˆ—</mo></msubsup></mrow><annotation encoding="application/x-tex">a_t^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9357em;vertical-align:-0.247em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span></span></span></span></span> å­˜åœ¨ï¼Œåˆ™ç­–ç•¥è¾“å‡º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>a</mi><mi>t</mi><mo>âˆ—</mo></msubsup></mrow><annotation encoding="application/x-tex">a_t^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9357em;vertical-align:-0.247em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span></span></span></span></span> çš„æ¡ä»¶æ¦‚ç‡æ»¡è¶³ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Ï€</mi><mo stretchy="false">(</mo><msubsup><mi>a</mi><mi>t</mi><mo>âˆ—</mo></msubsup><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mtext>â€…â€Š</mtext><mo>=</mo><mtext>â€…â€Š</mtext><mn>1</mn><mspace width="1em"/><mtext>ï¼ˆæˆ–å…¨å±€æœ€å¤§æ¦‚ç‡ï¼‰</mtext></mrow><annotation encoding="application/x-tex">\pi(a_t^* \vert s_t) \;=\; 1 \quad \text{ï¼ˆæˆ–å…¨å±€æœ€å¤§æ¦‚ç‡ï¼‰} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:1em;"/><span class="mord text"><span class="mord cjk_fallback">ï¼ˆæˆ–å…¨å±€æœ€å¤§æ¦‚ç‡ï¼‰</span></span></span></span></span></span></div>
<p>æ­¤æ—¶ç­–ç•¥æ— æå‡ç©ºé—´ï¼Œç§° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ï€</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><msup><mi>Ï€</mi><mo>âˆ—</mo></msup></mrow><annotation encoding="application/x-tex">\pi' = \pi^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6887em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span></span></span></span></span> ï¼ˆå‰æï¼šä»·å€¼å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>Ï€</mi></msub></mrow><annotation encoding="application/x-tex">V_\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å§‹ç»ˆç²¾å‡†ï¼Œå¯å‡†ç¡®åº¦é‡ç­–ç•¥ä»·å€¼ ï¼‰ã€‚</p>
<p>å½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi><mo stretchy="false">(</mo><msubsup><mi>a</mi><mi>t</mi><mo>âˆ—</mo></msubsup><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi(a_t^* \vert s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> å–æœ€å¤§å€¼ï¼ˆæˆ– 1 ï¼‰æ—¶ï¼Œç”±ä»·å€¼å‡½æ•°ä¸åŠ¨ä½œä»·å€¼å‡½æ•°çš„å…³ç³»ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>V</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mtext>â€…â€Š</mtext><mo>=</mo><mtext>â€…â€Š</mtext><munder><mo>âˆ‘</mo><mrow><mi>a</mi><mo>âˆˆ</mo><mi mathvariant="script">A</mi></mrow></munder><mi>Ï€</mi><mo stretchy="false">(</mo><mi>a</mi><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mtext>â€‰</mtext><msub><mi>Q</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V_\pi(s_t) \;=\; \sum_{a \in \mathcal{A}} \pi(a \vert s_t) \, Q_\pi(s_t, a) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.3717em;vertical-align:-1.3217em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8557em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mrel mtight">âˆˆ</span><span class="mord mathcal mtight">A</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.3217em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span></div>
<p>ç”±äº <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>a</mi><mi>t</mi><mo>âˆ—</mo></msubsup></mrow><annotation encoding="application/x-tex">a_t^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9357em;vertical-align:-0.247em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span></span></span></span></span> æ¦‚ç‡å ä¼˜ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V_\pi(s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> ä¼šé€¼è¿‘ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Q</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msubsup><mi>a</mi><mi>t</mi><mo>âˆ—</mo></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q_\pi(s_t, a_t^*)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> ï¼Œå› æ­¤ä¼˜åŠ¿æ»¡è¶³ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>A</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msubsup><mi>a</mi><mi>t</mi><mo>âˆ—</mo></msubsup><mo stretchy="false">)</mo><mtext>â€…â€Š</mtext><mo>=</mo><mtext>â€…â€Š</mtext><msub><mi>Q</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msubsup><mi>a</mi><mi>t</mi><mo>âˆ—</mo></msubsup><mo stretchy="false">)</mo><mtext>â€…â€Š</mtext><mo>âˆ’</mo><mtext>â€…â€Š</mtext><msub><mi>V</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mtext>â€…â€Š</mtext><mo>â†’</mo><mtext>â€…â€Š</mtext><mn>0</mn></mrow><annotation encoding="application/x-tex">A_\pi(s_t, a_t^*) \;=\; Q_\pi(s_t, a_t^*) \;-\; V_\pi(s_t) \;\to\; 0 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span></div>
<p>è§£é‡Šï¼šä¼˜åŠ¿è¶‹äº 0 ï¼Œä¸ä»£è¡¨åŠ¨ä½œâ€œæ— å¥½åå·®å¼‚â€ï¼Œè€Œæ˜¯ç­–ç•¥å·²é€¼è¿‘æœ€ä¼˜â€”â€”æ­¤æ—¶æœ€ä¼˜åŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>a</mi><mi>t</mi><mo>âˆ—</mo></msubsup></mrow><annotation encoding="application/x-tex">a_t^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9357em;vertical-align:-0.247em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span></span></span></span></span> çš„è¾“å‡ºæ¦‚ç‡å¤©ç„¶æœ€å¤§ï¼Œæ— éœ€å†é â€œä¼˜åŠ¿å·®å€¼â€åŒºåˆ†ã€‚ä½†åœ¨<strong>ç­–ç•¥æœªæ”¶æ•›é˜¶æ®µ</strong>ï¼Œä¼˜åŠ¿å¯æœ‰æ•ˆè¯†åˆ«â€œå½“å‰çŠ¶æ€ä¸‹æ›´å€¼å¾—æå‡çš„åŠ¨ä½œâ€ã€‚
ç­–ç•¥æ›´æ–°ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ï€</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">\pi'</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span> åï¼ŒåŸä»·å€¼å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>Ï€</mi></msub></mrow><annotation encoding="application/x-tex">V_\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸å†é€‚é…ï¼ˆå› ç­–ç•¥åˆ†å¸ƒæ”¹å˜ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>Ï€</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V_\pi(s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> çš„åŠ æƒæ±‚å’ŒåŸºç¡€å·²å˜ ï¼‰ã€‚éœ€é‡æ–°æ‹Ÿåˆä»·å€¼å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><msup><mi>Ï€</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub></mrow><annotation encoding="application/x-tex">V_{\pi'}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ï¼Œä½¿å…¶æ»¡è¶³ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>V</mi><msup><mi>Ï€</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mtext>â€…â€Š</mtext><mo>=</mo><mtext>â€…â€Š</mtext><munder><mo>âˆ‘</mo><mrow><mi>a</mi><mo>âˆˆ</mo><mi mathvariant="script">A</mi></mrow></munder><msup><mi>Ï€</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">(</mo><mi>a</mi><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mtext>â€‰</mtext><msub><mi>Q</mi><msup><mi>Ï€</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V_{\pi'}(s_t) \;=\; \sum_{a \in \mathcal{A}} \pi'(a \vert s_t) \, Q_{\pi'}(s_t, a) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.3717em;vertical-align:-1.3217em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8557em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mrel mtight">âˆˆ</span><span class="mord mathcal mtight">A</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.3217em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span></div>
<p>æ‹Ÿåˆé€»è¾‘ä¸ºï¼š<strong>è®©å·¦ä¾§ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><msup><mi>Ï€</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V_{\pi'}(s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> åŒ¹é…å³ä¾§æ–°åˆ†å¸ƒçš„åŠ æƒç»“æœ</strong>ï¼Œä»è€Œä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ï€</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">\pi'</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span> æ„å»ºç²¾å‡†çš„ä»·å€¼è¯„ä¼°ä½“ç³»ï¼Œæ”¯æ’‘ä¸‹ä¸€è½®ç­–ç•¥è¿­ä»£ã€‚</p>
<h2 data-id="heading-15">PPOç®—æ³•</h2>
<h3 data-id="heading-16">æœ´ç´ Actor-Criticç®—æ³•</h3>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi mathvariant="normal">âˆ‡</mi><mi>J</mi><mo stretchy="false">(</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><msub><mi>E</mi><mi>t</mi></msub><mo stretchy="false">[</mo><msub><mi>A</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">âˆ‡</mi><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>â‰ˆ</mo><mfrac><mn>1</mn><mrow><mi>N</mi><mo>âˆ—</mo><mi>T</mi></mrow></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></munderover><munderover><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mrow><msub><mi>T</mi><mi>n</mi></msub><mo>âˆ’</mo><mn>1</mn></mrow></munderover><mo stretchy="false">(</mo><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><msub><mi>V</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>âˆ’</mo><msub><mi>V</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mi mathvariant="normal">âˆ‡</mi><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
\nabla J(\pi_{\theta}) &amp; =E_t[A_\phi(s_t,a_t)\nabla log\pi_\theta(a_t|s_t)] \\
 &amp; \approx\frac{1}{N*T}\sum_{n=0}^{N-1}\sum_{t=0}^{T_n-1}(r_t+\gamma V_\phi(s_{t+1})-V_\phi(s_t))\nabla log\pi_\theta(a_t|s_t)
\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.9065em;vertical-align:-2.2033em;"/><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.7033em;"><span style="top:-5.7027em;"><span class="pstrut" style="height:3.8394em;"/><span class="mord"><span class="mord">âˆ‡</span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.2033em;"><span class="pstrut" style="height:3.8394em;"/><span class="mord"/></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.2033em;"><span/></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.7033em;"><span style="top:-5.7027em;"><span class="pstrut" style="height:3.8394em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mord">âˆ‡</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)]</span></span></span><span style="top:-3.2033em;"><span class="pstrut" style="height:3.8394em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8394em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3111em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span/></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">))</span><span class="mord">âˆ‡</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.2033em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p>æ³¨æ„ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï•</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Ï•</span></span></span></span></span>æ˜¯Criticç½‘ç»œçš„å‚æ•°ï¼Œä½†ä»éœ€æ—¶åˆ»è®°ä½<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>Ï•</mi></msub></mrow><annotation encoding="application/x-tex">V_\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>æ˜¯ç­–ç•¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span></span></span></span></span>çš„ä»·å€¼ï¼Œå½“ç­–ç•¥å‘ç”Ÿå˜åŠ¨æ—¶ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>Ï•</mi></msub></mrow><annotation encoding="application/x-tex">V_\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ‡</mi><mi>J</mi><mo stretchy="false">(</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\nabla J(\pi_{\theta})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">âˆ‡</span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼šç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\pi_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„æ€§èƒ½ç›®æ ‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi><mo stretchy="false">(</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">J(\pi_\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼ˆé€šå¸¸æ˜¯é¢„æœŸç´¯è®¡å›æŠ¥ï¼‰å¯¹å‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></span> çš„æ¢¯åº¦ï¼Œè¡¨ç¤ºè°ƒæ•´ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></span> èƒ½ä½¿ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi></mrow><annotation encoding="application/x-tex">J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span></span> å¢åŠ çš„æ–¹å‘ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mi>t</mi></msub><mo stretchy="false">[</mo><mo>â‹…</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">E_t [\cdot]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">[</span><span class="mord">â‹…</span><span class="mclose">]</span></span></span></span></span>ï¼šå¯¹æ—¶é—´æ­¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"/><span class="mord mathnormal">t</span></span></span></span></span> çš„æœŸæœ›ï¼ŒåŸºäºç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\pi_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å’Œç¯å¢ƒåŠ¨æ€ç”Ÿæˆçš„è½¨è¿¹ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mo>â€¦</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(s_t, a_t, r_t, s_{t+1}, \ldots)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner">â€¦</span><span class="mclose">)</span></span></span></span></span> è®¡ç®—ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A_\phi(s_t, a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼šä¼˜åŠ¿å‡½æ•°ï¼ˆadvantage functionï¼‰ï¼Œç”± Critic å‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï•</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Ï•</span></span></span></span></span> ä¼°è®¡ï¼Œè¡¨ç¤ºåŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> åœ¨çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸‹ç›¸å¯¹äºå¹³å‡æ°´å¹³çš„â€œé¢å¤–å›æŠ¥â€ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ‡</mi><mi>log</mi><mo>â¡</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\nabla \log \pi_\theta(a_t | s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">âˆ‡</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼šç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\pi_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> åœ¨çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸‹é€‰æ‹©åŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„å¯¹æ•°æ¦‚ç‡å¯¹ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></span> çš„æ¢¯åº¦ï¼Œæ˜¯ç­–ç•¥æ¢¯åº¦çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚</li>
<li>è¿‘ä¼¼éƒ¨åˆ†ï¼šç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span> ä¸ªå›åˆï¼ˆæˆ–æ‰¹æ¬¡ï¼‰ä¸­çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></span> ä¸ªæ—¶é—´æ­¥çš„æ ·æœ¬å¹³å‡è¿‘ä¼¼æœŸæœ›ï¼Œå…·ä½“ä¸ºï¼š
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mrow><mi>N</mi><mo>â‹…</mo><mi>T</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{N \cdot T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">â‹…</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span>ï¼šå½’ä¸€åŒ–å› å­ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span> æ˜¯å›åˆæ•°ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">T_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯ç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">n</span></span></span></span></span> ä¸ªå›åˆçš„æ—¶é—´æ­¥æ•°ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></span> æ˜¯æ€»æ—¶é—´æ­¥æ•°çš„è¿‘ä¼¼å¹³å‡ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><msubsup><mo>âˆ‘</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mrow><msub><mi>T</mi><mi>n</mi></msub><mo>âˆ’</mo><mn>1</mn></mrow></msubsup></mrow><annotation encoding="application/x-tex">\sum_{n=0}^{N-1} \sum_{t=0}^{T_n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2809em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span></span></span></span></span>ï¼šå¯¹ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span> ä¸ªå›åˆå’Œæ¯ä¸ªå›åˆçš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">T_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸ªæ—¶é—´æ­¥æ±‚å’Œã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><msub><mi>V</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>âˆ’</mo><msub><mi>V</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(r_t + \gamma V_\phi(s_{t+1}) - V_\phi(s_t))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">))</span></span></span></span></span>ï¼šæ—¶åºå·®åˆ†è¯¯å·®ï¼ˆTD Errorï¼‰ï¼Œç”¨ä½œä¼˜åŠ¿ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A_\phi(s_t, a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> çš„å•æ­¥ä¼°è®¡ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ‡</mi><mi>log</mi><mo>â¡</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\nabla \log \pi_\theta(a_t | s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">âˆ‡</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼šæ¯ä¸ªæ—¶é—´æ­¥çš„ç­–ç•¥æ¢¯åº¦é¡¹ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-17">PPOç®—æ³•å®ç°</h4>
<p>åœ¨SFTä¸­ï¼Œæˆ‘ä»¬æ˜¯å»è®­ç»ƒæ¨¡å‹å»æ¨¡ä»¿ç»™å®šçš„ä¸€ç»„é«˜è´¨é‡æ ·æœ¬ä¸­çš„å“åº”ï¼Œç„¶è€Œï¼Œè¿™é€šå¸¸ä¸èƒ½å‡è½»è¯­è¨€æ¨¡å‹åœ¨é¢„è®­ç»ƒé˜¶æ®µå­¦åˆ°çš„ä¸è‰¯è¡Œä¸ºã€‚å¯¹é½è¯­è¨€æ¨¡å‹æ—¶ï¼Œä»æˆ‘ä»¬è¯•å›¾æ”¹è¿›çš„æ¨¡å‹æœ¬èº«è·å–ç›¸åº”ï¼Œå¹¶æ ¹æ®å¯¹è¿™äº›ç›¸åº”è´¨é‡å’Œåˆç†æ€§çš„æŸç§è¯„ä¼°ç»™äºˆå¥–åŠ±æˆ–æƒ©ç½šã€‚
é¦–å…ˆï¼Œæˆ‘ä»¬å‡†å¤‡ä¸€ç»„æç¤ºï¼Œæä¾›ç»™æˆ‘ä»¬ç»è¿‡SFTä¹‹åçš„æ¨¡å‹ï¼›ç„¶åï¼Œä»æ¨¡å‹ä¸­è·å–é’ˆå¯¹æ¯ä¸ªæç¤ºçš„å¤šç»„ç›¸åº”ã€‚ï¼ˆSFTæ˜¯é€šè¿‡æœ€å°åŒ–é€ä¸ª Token çš„äº¤å‰ç†µæŸå¤±æ¥å­¦ä¹ ï¼Œè€Œæ˜¯å¥–åŠ±æ¨¡å‹å»ä¼˜åŒ–ä¸€ä¸ªæ ‡é‡çš„å¥–åŠ±ä¿¡å·å»è¡¡é‡ç›¸åº”å¯¹äºç»™å®šæç¤ºçš„æ°å½“ç¨‹åº¦ï¼‰ã€‚
HFæ˜¯æŒ‡åœ¨åŸå§‹æ–¹æ³•ä¸­ï¼Œè¿™ç§å¥–åŠ±ä¿¡å·æ˜¯é€šè¿‡åœ¨äººç±»æ ‡æ³¨çš„æ•°æ®ä¸Šæ‹Ÿåˆæ¨¡å‹å¾—åˆ°çš„ï¼Œäººç±»ä¼šæ‰‹åŠ¨å¯¹ç»™å®šçš„å¤šç»„ç›¸åº”è¿›è¡Œæ’åºã€‚
RLHF çš„æ­¥éª¤ï¼š</p>
<ol>
<li>ç”Ÿæˆç›¸åº”å¹¶è·å–äººç±»æ’åï¼šå¯¹äºæ¯ä¸ªè¾“å…¥æç¤ºï¼Œè®©ç»è¿‡SFTåçš„æ¨¡å‹ç”ŸæˆKä¸ªä¸åŒçš„å“åº”ã€‚ç„¶åï¼Œäººç±»æ ‡æ³¨è€…å¯¹è¿™Kä¸ªç›¸åº”è¿›è¡Œæ’åºã€‚</li>
<li>è®­ç»ƒå¥–åŠ±æ¨¡å‹ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r_{\theta}(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></span>ï¼‰ï¼Œå¯¹æç¤º-ç›¸åº”å¯¹ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x,y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></span>ï¼‰æ‰“åˆ†ï¼Œå³è¾“å‡ºä¸€ä¸ªæ ‡é‡å¥–åŠ±å€¼ã€‚è¿™é‡Œå¥–åŠ±æ¨¡å‹ä»¥SFTæ¨¡å‹ä¸ºåŸºç¡€ï¼Œç§»é™¤æœ€åçš„è¾“å‡ºå±‚ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæ–°çš„è¾“å‡ºå±‚ï¼Œä½¿å…¶ä»…è¾“å‡ºä¸€ä¸ªæ ‡é‡å€¼ã€‚ç„¶åï¼Œä»äººç±»æ’åæ•°æ®é›†ä¸­é‡‡æ ·æç¤ºä»¥åŠä¸€å¯¹ç›¸åº”<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>w</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>l</mi></msub></mrow><annotation encoding="application/x-tex">y_w,y_l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œå…¶ä¸­<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>w</mi></msub></mrow><annotation encoding="application/x-tex">y_w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>è¡¨ç¤ºæ›´å¥½çš„å“åº”ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>l</mi></msub></mrow><annotation encoding="application/x-tex">y_l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>è¡¨ç¤ºè¾ƒå·®çš„å“åº”ï¼ˆå³<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>w</mi></msub></mrow><annotation encoding="application/x-tex">y_w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>çš„è¯„åˆ†é«˜äº<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>l</mi></msub></mrow><annotation encoding="application/x-tex">y_l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ï¼Œä¼˜åŒ–ä¸‹é¢çš„æŸå¤±å‡½æ•°ã€‚</li>
</ol>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi mathvariant="normal">â„“</mi><mi>Î¸</mi><mi>r</mi></msubsup><mrow><mo fence="true">(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>y</mi><mi>w</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>l</mi></msub><mo fence="true">)</mo></mrow><mo>=</mo><mo>âˆ’</mo><mi>log</mi><mo>â¡</mo><mi>Ïƒ</mi><mrow><mo fence="true">(</mo><msub><mi>r</mi><mi>Î¸</mi></msub><mrow><mo fence="true">(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>y</mi><mi>w</mi></msub><mo fence="true">)</mo></mrow><mo>âˆ’</mo><msub><mi>r</mi><mi>Î¸</mi></msub><mrow><mo fence="true">(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>y</mi><mi>l</mi></msub><mo fence="true">)</mo></mrow><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\ell_\theta^r\left(x,y_w,y_l\right)=-\log\sigma\left(r_\theta\left(x,y_w\right)-r_\theta\left(x,y_l\right)\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord">â„“</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></span></div>
<p>å…¶ä¸­ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïƒ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span></span></span></span></span>æ˜¯ sigmoid å‡½æ•°ï¼ˆå°†å·®å€¼è½¬æ¢ä¸º 0-1 ä¹‹é—´çš„æ¦‚ç‡ï¼‰ã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›å¥–åŠ±æ¨¡å‹è¾“å‡ºçš„æ ‡é‡å¥–åŠ±ä¸äººç±»æ ‡æ³¨è€…çš„æ’åä¸€è‡´ï¼›å¥–åŠ±æ¨¡å‹<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span></span>ä¸äººç±»æ•°æ®çš„ä¸€è‡´æ€§è¶Šé«˜ï¼ŒæŸå¤±<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="normal">â„“</mi><mi>r</mi></msup></mrow><annotation encoding="application/x-tex">\ell^{r}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord"><span class="mord">â„“</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span></span></span></span></span></span></span></span></span>å°±è¶Šä½ã€‚å¾—åˆ°å¥–åŠ±æ¨¡å‹åï¼ŒRLHF é€šè¿‡å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰æ¥ä¼˜åŒ–è¯­è¨€æ¨¡å‹ï¼ˆLMï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬å°†è¯­è¨€æ¨¡å‹è§†ä¸ºä¸€ä¸ªç­–ç•¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\pi_{\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæç¤ºå¹¶åœ¨æ¯ä¸€æ­¥é€‰æ‹©è¦ç”Ÿæˆçš„Tokenï¼Œç›´åˆ°å®Œæˆå“åº”ï¼ˆç»“æŸä¸€ä¸ªå¼ºåŒ–å­¦ä¹  â€œè½®æ¬¡â€ï¼‰ï¼Œæ­¤æ—¶å®ƒä¼šè·å¾—ç”±<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">r_{\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ç»™å‡ºçš„å¥–åŠ±ã€‚åŸå§‹è®ºæ–‡ä½¿ç”¨è¿‘ç«¯ç­–ç•¥ä¼˜åŒ–ï¼ˆPPOï¼‰ç®—æ³•ï¼Œå€ŸåŠ©å¥–åŠ±æ¨¡å‹æ¥è®­ç»ƒè¯­è¨€æ¨¡å‹ã€‚
æ­¤å¤–ï¼Œåœ¨ GPT-3 æ¨¡å‹ä¸Šåº”ç”¨ RLHF çš„è®ºæ–‡å‘ç°ï¼Œæœ‰ä¸¤ç‚¹å¾ˆé‡è¦ï¼šï¼ˆaï¼‰æ·»åŠ  KL æ•£åº¦æƒ©ç½šé¡¹ï¼Œä»¥é˜²æ­¢æ¨¡å‹ä¸ SFT åŸºå‡†æ¨¡å‹åç¦»è¿‡å¤§ï¼›ï¼ˆbï¼‰ä½¿ç”¨é¢„è®­ç»ƒï¼ˆè¯­è¨€å»ºæ¨¡ï¼‰ç›®æ ‡ä½œä¸ºè¾…åŠ©æŸå¤±å‡½æ•°ï¼Œä»¥é¿å…ä¸‹æ¸¸ä»»åŠ¡æ€§èƒ½é€€åŒ–ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a46a6dfc88ff40a2a69b573a60da511e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGhu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767171830&amp;x-signature=yi8nVat8BAm3kxTYyMIN6PMgIqs%3D" alt="å¾®ä¿¡å›¾ç‰‡_20251224165332_1982_219.png" loading="lazy"/>
å›¾ä¸­ Policy LM æ˜¯ç­–ç•¥ï¼ˆè¯­è¨€ï¼‰æ¨¡å‹ï¼ŒSFT Model æ˜¯åŸºå‡†æ¨¡å‹ï¼ŒReward Model æ˜¯å¥–åŠ±æ¨¡å‹ï¼ŒValue Model æ˜¯ä»·å€¼æ¨¡å‹ã€‚</p>
<h4 data-id="heading-18">é‡è¦æ€§é‡‡æ ·</h4>
<h2 data-id="heading-19">DPO</h2>
<p>åœ¨RLHFä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ©ç”¨æ”¶é›†åˆ°çš„åå¥½æ•°æ®æ¥æ˜¾å¼åœ°æ‹Ÿåˆä¸€ä¸ªå¥–åŠ±æ¨¡å‹<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">r_{\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œç„¶åä¼˜åŒ–è¯­è¨€æ¨¡å‹ï¼Œä½¿å…¶ç”Ÿæˆèƒ½è·å¾—æ›´é«˜å¥–åŠ±çš„å“åº”ã€‚è€ŒDPOçš„å‡ºå‘ç‚¹æ˜¯ï¼šä¸å¿…é¡»å…ˆæ‰¾åˆ°ä¸€ä¸ªä¸åå¥½æ•°æ®ä¸€è‡´çš„æœ€ä¼˜å¥–åŠ±æ¨¡å‹<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span></span>ï¼Œå†ä¸ºè¯¥å¥–åŠ±æ¨¡å‹æ‰¾åˆ°ä¸€ä¸ªæœ€ä¼˜ç­–ç•¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">\pi_r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ã€‚è€Œæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡ºæœ€ä¼˜å¥–åŠ±æ¨¡å‹çš„ä¸€ç§é‡æ–°å‚æ•°åŒ–å½¢å¼ï¼Œè¿™ç§å½¢å¼å¯ä»¥ç”¨æœ€ä¼˜ç­–ç•¥å®ƒæœ¬èº«æ¥è¡¨ç¤ºã€‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>Î²</mi><mi>log</mi><mo>â¡</mo><mfrac><mrow><msub><mi>Ï€</mi><mi>r</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><msub><mi>Ï€</mi><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">f</mi></mrow></msub><mo stretchy="false">(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mo>+</mo><mi>Î²</mi><mi>log</mi><mo>â¡</mo><mi>Z</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r(x,y)=\beta\log\frac{\pi_r(y|x)}{\pi_\mathrm{ref}(y|x)}+\beta\log Z(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight" style="margin-right:0.07778em;">ref</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">âˆ£</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">âˆ£</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span></div>
<p>è¿™é‡Œï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mtext>ref</mtext></msub></mrow><annotation encoding="application/x-tex">\pi_{\text{ref}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">ref</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>æ˜¯ â€œå‚è€ƒç­–ç•¥â€ï¼šå³ç»è¿‡æœ‰ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰åçš„åŸå§‹è¯­è¨€æ¨¡å‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ–°æ¨¡å‹ä¸å…¶åç¦»è¿‡å¤§ï¼›<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span></span>æ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œç”¨äºæ§åˆ¶åç¦» <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mtext>ref</mtext></msub></mrow><annotation encoding="application/x-tex">\pi_{\text{ref}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">ref</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ—¶çš„æƒ©ç½šå¼ºåº¦ã€‚<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">\pi_{r}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯å¥–åŠ±æ¨¡å‹ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span></span> å¯¹åº”çš„æœ€ä¼˜ç­–ç•¥ â€”â€” æœ¬è´¨ä¸Šï¼Œå°±æ˜¯æ ¹æ®è¯¥å¥–åŠ±æ¨¡å‹å¾—åˆ°çš„æœ€ä¼˜è¯­è¨€æ¨¡å‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼ä¸­çš„ç¬¬äºŒé¡¹ä»…ä¾èµ–äºä¸€ä¸ªä¸æŒ‡ä»¤ç›¸å…³çš„å½’ä¸€åŒ–å¸¸æ•°ï¼ˆé…åˆ†å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Z(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>ï¼‰ï¼Œè€Œä¸è¡¥å…¨å†…å®¹ y æ— å…³ã€‚
åœ¨RLHFä¸­ï¼ŒåŸå§‹çš„å¥–åŠ±æ¨¡å‹çš„æŸå¤±å‡½æ•°ä»…ä¾èµ–äºä¸¤ä¸ªå“åº”çš„å¥–åŠ±ä¹‹å·®ï¼Œä¸å•ä¸ªå“åº”çš„ç»å¯¹å¥–åŠ±æ— å…³ã€‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">â„“</mi><mrow><mi mathvariant="normal">D</mi><mi mathvariant="normal">P</mi><mi mathvariant="normal">O</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo separator="true">,</mo><msub><mi>Ï€</mi><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">f</mi></mrow></msub><mo separator="true">,</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>y</mi><mi>w</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>l</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mo>âˆ’</mo><mi>log</mi><mo>â¡</mo><mi>Ïƒ</mi><mrow><mo fence="true">(</mo><mi>Î²</mi><mi>log</mi><mo>â¡</mo><mfrac><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>y</mi><mi>w</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><msub><mi>Ï€</mi><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">f</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>y</mi><mi>w</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mo>âˆ’</mo><mi>Î²</mi><mi>log</mi><mo>â¡</mo><mfrac><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><msub><mi>y</mi><mi>l</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><msub><mi>Ï€</mi><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">f</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>y</mi><mi>l</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\ell_{\mathrm{DPO}}(\pi_\theta,\pi_{\mathrm{ref}},x,y_w,y_l)=-\log\sigma\left(\beta\log\frac{\pi_\theta(y_w|x)}{\pi_{\mathrm{ref}}(y_w|x)}-\beta\log\frac{\pi_\theta(y_l|x)}{\pi_{\mathrm{ref}}(y_l|x)}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord">â„“</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">DPO</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight" style="margin-right:0.07778em;">ref</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight" style="margin-right:0.07778em;">ref</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight" style="margin-right:0.07778em;">ref</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></span></div>
<p>ä¸ºè®¡ç®—æŸå¤±ï¼Œä¸éœ€è¦å†å¯¹é½è¿‡ç¨‹ä¸­å¯¹è¡¥å…¨å†…å®¹è¿›è¡Œé‡‡æ ·ï¼Œåªéœ€è¦è®¡ç®—æ¡ä»¶å¯¹æ•°æ¦‚ç‡å³å¯ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œæ²¡æœ‰æ˜¾å¼çš„å¼ºåŒ–å­¦ä¹ è¿‡ç¨‹åœ¨è¿›è¡Œã€‚æ­¤å¤–ï¼Œåå¥½æ•°æ®ä¹Ÿä¸ä¸€å®šå¿…é¡»æ¥è‡ªäººç±»æ ‡æ³¨è€…â€”â€”å¯ä»¥æ˜¯æ¥è‡ªäºå…¶ä»–è¯­è¨€æ¨¡å‹ç”Ÿæˆçš„åå¥½æ•°æ®ï¼Œè¿™äº›è¯­è¨€æ¨¡å‹é€šå¸¸ä¼šè¢«æç¤ºæ ¹æ®ä¸€ç³»åˆ—æ ‡å‡†ï¼Œå¯¹åŒä¸€æŸ¥è¯¢çš„ä¸¤ç»„å¤‡é€‰å“åº”è¿›è¡Œè¯„åˆ¤ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿä¸ä¸€å®šæ¶‰åŠäººç±»åé¦ˆã€‚</p>
<h2 data-id="heading-20">GRPO</h2>
<p>ç¾¤ä½“ç›¸å¯¹ç­–ç•¥ä¼˜åŒ–,è‹±æ–‡å…¨ç§°ä¸ºGroup Relative Policy Optimizationï¼Œç®€ç§°ä¸ºGRPOã€‚è¿™æ˜¯ä¸€ç§ç­–ç•¥æ¢¯åº¦çš„å˜ä½“ã€‚</p>
<h3 data-id="heading-21">ä¼˜åŠ¿ä¼°è®¡</h3>
<p>ç¾¤ä½“ç›¸å¯¹ç­–ç•¥ä¼˜åŒ–ï¼ˆGRPOï¼‰çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä»ç­–ç•¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\pi_{\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ä¸­ä¸ºæ¯ä¸ªé—®é¢˜é‡‡æ ·å¤šä¸ªè¾“å‡ºï¼Œå¹¶åˆ©ç”¨è¿™äº›è¾“å‡ºè®¡ç®—åŸºçº¿ã€‚è¿™ç§æ–¹å¼ååˆ†ä¾¿æ·ï¼Œå› ä¸ºå®ƒé¿å…äº†å­¦ä¹ ç¥ç»ä»·å€¼å‡½æ•°<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>Ï•</mi></msub><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V_{\phi}(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">Ï•</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>â€”â€” è¿™ç±»å‡½æ•°ä¸ä»…éš¾ä»¥è®­ç»ƒï¼Œè€Œä¸”ä»ç³»ç»Ÿè§’åº¦æ¥çœ‹æ“ä½œç¹çã€‚å¯¹äºæŸä¸ªé—®é¢˜<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span></span>ä»¥åŠä»<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo stretchy="false">(</mo><mo>â‹…</mo><mi mathvariant="normal">âˆ£</mi><mi>q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{\theta}(\cdot | q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord">â‹…</span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span></span></span></span></span>ä¸­é‡‡æ ·å¾—åˆ°çš„ç¾¤ä½“è¾“å‡º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><msup><mi>o</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><msubsup><mo stretchy="false">}</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>G</mi></msubsup></mrow><annotation encoding="application/x-tex">\{o^{(i)}\}_{i=1}^{G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1467em;vertical-align:-0.2587em;"/><span class="mopen">{</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">}</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4413em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">G</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œä»¤<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>r</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo>=</mo><mi>R</mi><mo stretchy="false">(</mo><mi>q</mi><mo separator="true">,</mo><msup><mi>o</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r^{(i)} = R(q, o^{(i)})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.138em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>è¡¨ç¤ºç¬¬iä¸ªè¾“å‡ºçš„å¥–åŠ±ã€‚DeepSeekMathï¼ˆShao ç­‰äººï¼Œ2024ï¼‰å’Œ DeepSeek R1ï¼ˆDeepSeek-AI ç­‰äººï¼Œ2025ï¼‰å°†ç¬¬iä¸ªè¾“å‡ºçš„ç¾¤ä½“å½’ä¸€åŒ–å¥–åŠ±è®¡ç®—ä¸ºï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>A</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo>=</mo><mfrac><mrow><msup><mi>r</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo>âˆ’</mo><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">n</mi></mrow><mo stretchy="false">(</mo><msup><mi>r</mi><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup><mo separator="true">,</mo><msup><mi>r</mi><mrow><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></msup><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msup><mi>r</mi><mrow><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">)</mo></mrow><mrow><mrow><mi mathvariant="normal">s</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">d</mi></mrow><mo stretchy="false">(</mo><msup><mi>r</mi><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup><mo separator="true">,</mo><msup><mi>r</mi><mrow><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></msup><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msup><mi>r</mi><mrow><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">)</mo><mo>+</mo><msub><mrow><mi mathvariant="normal">a</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">v</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">g</mi><mi mathvariant="normal">e</mi></mrow><mrow><mi mathvariant="normal">e</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">s</mi></mrow></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">A^{(i)}=\frac{r^{(i)}-\mathrm{mean}(r^{(1)},r^{(2)},\ldots,r^{(G)})}{\mathrm{std}(r^{(1)},r^{(2)},\ldots,r^{(G)})+\mathrm{advantage}_\mathrm{eps}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.938em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.6492em;vertical-align:-1.0842em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.565em;"><span style="top:-2.296em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathrm">std</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.814em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.814em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">2</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.814em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">G</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord"><span class="mord mathrm">advantage</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0573em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">eps</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3802em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathrm">mean</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">2</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">G</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.0842em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>å…¶ä¸­ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>advantage_eps</mtext></mrow><annotation encoding="application/x-tex">\text{advantage\_eps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0044em;vertical-align:-0.31em;"/><span class="mord text"><span class="mord">advantage_eps</span></span></span></span></span></span>æ˜¯ä¸€ä¸ªå°å¸¸æ•°ï¼Œç”¨äºé˜²æ­¢é™¤ä»¥é›¶çš„æƒ…å†µã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥ä¼˜åŠ¿å€¼<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>A</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">A^{(i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></span>å¯¹äºå“åº”ä¸­çš„æ¯ä¸ª token éƒ½æ˜¯ç›¸åŒçš„ï¼Œå³å¯¹äºæ‰€æœ‰<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>âˆˆ</mo><mo stretchy="false">{</mo><mn>1</mn><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><mi mathvariant="normal">âˆ£</mi><msup><mi>o</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mi mathvariant="normal">âˆ£</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">t \in \{1, \ldots, |o^{(i)}|\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6542em;vertical-align:-0.0391em;"/><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.138em;vertical-align:-0.25em;"/><span class="mopen">{</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mclose">}</span></span></span></span></span>ï¼Œéƒ½æœ‰<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>A</mi><mi>t</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msubsup><mo>=</mo><msup><mi>A</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">A_{t}^{(i)} = A^{(i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2906em;vertical-align:-0.2458em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4542em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.888em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œå› æ­¤åœ¨åç»­å†…å®¹ä¸­æˆ‘ä»¬å°†çœç•¥ä¸‹æ ‡<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"/><span class="mord mathnormal">t</span></span></span></span></span>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°è¿˜æ•¢è¯´è°·æ­Œæ‰é˜Ÿï¼Ÿ2025å¹´ï¼Œå®ƒæ‰“äº†ä¸€åœºæ¼‚äº®çš„ç¿»èº«ä»—]]></title>    <link>https://juejin.cn/post/7587062584165777446</link>    <guid>https://juejin.cn/post/7587062584165777446</guid>    <pubDate>2025-12-24T09:51:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587062584165777446" data-draft-id="7587239837972480051" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°è¿˜æ•¢è¯´è°·æ­Œæ‰é˜Ÿï¼Ÿ2025å¹´ï¼Œå®ƒæ‰“äº†ä¸€åœºæ¼‚äº®çš„ç¿»èº«ä»—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-12-24T09:51:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°è¿˜æ•¢è¯´è°·æ­Œæ‰é˜Ÿï¼Ÿ2025å¹´ï¼Œå®ƒæ‰“äº†ä¸€åœºæ¼‚äº®çš„ç¿»èº«ä»—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:51:54.000Z" title="Wed Dec 24 2025 09:51:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å³å°†è¿‡å»çš„ 2025 å¹´ï¼Œè°·æ­Œåœ¨äººå·¥æ™ºèƒ½é¢†åŸŸäº¤å‡ºäº†ä¸€ä»½é¢‡å…·åˆ†é‡çš„æˆç»©å•ã€‚</p>
<p>æ›¾å› ã€Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650999410%26idx%3D1%26sn%3Ddc8b37c38a7805b21065f8d7ffe23269%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650999410&amp;idx=1&amp;sn=dc8b37c38a7805b21065f8d7ffe23269&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å‘è¡¨äº† Transformer å´ç—›å¤±å…ˆæœº</a>ã€è€Œå¤‡å—å¤–ç•Œè´¨ç–‘ï¼Œè°·æ­Œä¸€åº¦æ·±é™·ã€Œå¤§æ¨¡å‹æ‰é˜Ÿã€çš„èˆ†è®ºæ¼©æ¶¡ã€‚ä½†è¿™ä¸€å¹´ï¼Œè°·æ­Œç”¨ä¸€ç³»åˆ—é‡Œç¨‹ç¢‘å¼çš„å‘å¸ƒæ‰“äº†ä¸€åœºæ¼‚äº®çš„ç¿»èº«ä»—ã€‚å®ƒå‘ä¸–ç•Œè¯æ˜ï¼ŒAI ä¸å†åªæ˜¯é™ªèŠçš„æœºå™¨äººï¼Œè€Œæ˜¯å˜æˆäº†èƒ½å†™ä»£ç ã€èƒ½åšç§‘ç ”ã€ç”šè‡³æ”»å…‹å‰æ²¿ç§‘å­¦éš¾é¢˜çš„ã€Œåˆä½œä¼™ä¼´ã€ã€‚</p>
<p>çœ‹çœ‹ Demis Hassabis æ™’å‡ºçš„è¿™å¼ å¹´åº¦æˆç»©å•ï¼ŒGemini 3ã€Genie 3ã€Veo 3ã€Nano Banana... ç¡®å®ç¡•æœç´¯ç´¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/542a20a771ef45e896447d0c75487635~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=%2F15PTynX3DLM0Wl%2BMmA2TR%2F56%2BY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/031e45a8e6724635a1cfa892ece1e17a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=Lka%2Fd3HuetA%2ByN6bIxVH6cWMkgw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åŒæ—¶ï¼Œè°·æ­Œå®˜æ–¹åšå®¢å‘å¸ƒå¹´ç»ˆç ”ç©¶è¿›å±•æ€»ç»“æŠ¥å‘Šï¼Œè¯¦ç»†ç›˜ç‚¹äº†è°·æ­Œ 2025 å¹´çš„ç ”ç©¶çªç ´ï¼Œä½œè€…åŒ…æ‹¬ Jeff Deanã€Demis Hassabisã€James Manyikaã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43e0f35d9ded491a968af9d6b92cfd93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=9RavihPgv%2B8kDqt6L7ykOAvcQuw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åšå®¢åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.google%2Ftechnology%2Fai%2F2025-research-breakthroughs%2F%255B%23ai%255D()-models" target="_blank" title="https://blog.google/technology/ai/2025-research-breakthroughs/%5B#ai%5D()-models" ref="nofollow noopener noreferrer">blog.google/technology/â€¦</a></p>
<p>åœ¨æ·±å…¥ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¿«é€Ÿæ¢³ç†è°·æ­Œæœ¬å¹´åº¦çš„å‡ å¤§ã€Œæ€æ‰‹é”ã€ã€‚</p>
<ul>
<li>
<p>æ¨¡å‹ä¾§ï¼šÂ Gemini 3 å¼ºåŠ¿ç™»é¡¶ï¼Œé€»è¾‘æ¨ç†ä¸æ•°å­¦èƒ½åŠ›åˆ·æ–°çºªå½•ï¼ŒFlash ç‰ˆæœ¬æ€§ä»·æ¯”è¶…è¶Šå‰ä»£ Proã€‚</p>
</li>
<li>
<p>ç¡¬ä»¶ä¾§ï¼šÂ ç¬¬ä¸ƒä»£ TPU Ironwood ç®—åŠ›æš´æ¶¨ï¼Œå‰‘æŒ‡è‹±ä¼Ÿè¾¾ï¼›é‡å­è®¡ç®—å®ç°ã€Œé‡å­å›å£°ã€çªç ´ã€‚</p>
</li>
<li>
<p>åº”ç”¨ä¾§ï¼š AI ä¸å†åªæ˜¯ Chatbotï¼Œé€šè¿‡ Antigravity é‡å¡‘ç¼–ç¨‹ï¼Œé€šè¿‡Â Veo 3 å’Œ Genie 3 å½»åº•æ”¹å˜è§†é¢‘ç”Ÿæˆä¸ä¸–ç•Œæ¨¡æ‹Ÿã€‚</p>
</li>
<li>
<p>ç§‘å­¦ä¾§ï¼šÂ AlphaFold äº”å‘¨å¹´é‡Œç¨‹ç¢‘ä¸è¯ºè´å°”åŒ–å­¦å¥–çš„åŒé‡åŠ å†•ï¼Œå¥ å®šäº† AI for Science çš„é¢†å…ˆåœ°ä½ã€‚Gemini Deep Think ä¹Ÿåœ¨æ•°å­¦å¥¥èµ›ï¼ˆIMOï¼‰ä¸ç¼–ç¨‹ç«èµ›ï¼ˆICPCï¼‰ä¸­åŒåŒè¾¾åˆ°é‡‘ç‰Œæ°´å¹³ï¼Œæ ‡å¿—ç€ AI æŠ½è±¡æ¨ç†èƒ½åŠ›çš„è´¨å˜ã€‚</p>
</li>
</ul>
<p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬åŸºäºå®˜æ–¹åšæ–‡æ•´ç†çš„è¯¦ç»†æŠ€æœ¯ç›˜ç‚¹ï¼š</p>
<p>AI æ¨¡å‹ï¼šè°·æ­Œè®­å‡ºäº†å¥¥ç‰¹æ›¼ç†æƒ³ä¸­çš„ GPT-5</p>
<p>ä»Šå¹´ 3 æœˆï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650962030%26idx%3D2%26sn%3D8fdcead95449574b1e8f75ef537cb293%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650962030&amp;idx=2&amp;sn=8fdcead95449574b1e8f75ef537cb293&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Gemini 2.5</a>Â çš„å‘å¸ƒä¸ºå…¨å¹´çš„æŠ€æœ¯è·¯çº¿å¥ å®šäº†åŸºç¡€ã€‚è€Œ 11 æœˆæ­£å¼é¢ä¸–çš„Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2651002540%26idx%3D1%26sn%3D41e7a8da8c597068c68b43315bee15ae%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2651002540&amp;idx=1&amp;sn=41e7a8da8c597068c68b43315bee15ae&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Gemini 3</a>ï¼Œåˆ™è¢«è§†ä¸ºè°·æ­Œç›®å‰çš„å·…å³°ä¹‹ä½œã€‚è°·æ­Œåœ¨æ¨¡å‹æ¨ç†ã€å¤šæ¨¡æ€ç†è§£ä»¥åŠè¿è¡Œæ•ˆç‡ç­‰æ–¹é¢å®ç°äº†å¤šæ¬¡å®è´¨æ€§è·¨è¶Šã€‚</p>
<p>ä½œä¸ºè°·æ­Œç›®å‰æ€§èƒ½æœ€å¼ºçš„æ¨¡å‹ï¼ŒGemini 3 Pro åœ¨é€»è¾‘æ¨ç†é¢†åŸŸè¡¨ç°å°¤ä¸ºçªå‡ºã€‚å®ƒä¸ä»…è¿…é€Ÿç™»é¡¶ LMArena æ’è¡Œæ¦œï¼Œæ›´åœ¨ Humanityâ€™s Last Examï¼ˆæ—¨åœ¨è€ƒå¯Ÿ AI æ˜¯å¦å…·å¤‡äººç±»æ°´å¹³æ€è€ƒèƒ½åŠ›çš„ä¸¥è‹›æµ‹è¯•ï¼‰ä¸­å–å¾—çªç ´æ€§æˆç»©ã€‚åœ¨æ•°å­¦é¢†åŸŸï¼Œå®ƒä»¥ 23.4% çš„å‡†ç¡®ç‡åˆ·æ–°äº† MathArena Apex çš„çºªå½•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b291007eaf53436b9a6e042609f9c16b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=roXv6ckp39AMRh00DlzZ02BgBfA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Gemini 3 åœ¨å¤šé¡¹å…³é”® AI åŸºå‡†æµ‹è¯•ä¸­å¤„äºæœ€å…ˆè¿›æ°´å¹³ã€‚</p>
<p>ç›¸å…³é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.google%2Fproducts%2Fgemini%2Fgemini-3%2F" target="_blank" title="https://blog.google/products/gemini/gemini-3/" ref="nofollow noopener noreferrer">blog.google/products/geâ€¦</a></p>
<p>ç´§éšå…¶åçš„ 12 æœˆï¼Œè°·æ­Œæ¨å‡ºäº†é’ˆå¯¹å¼€å‘è€…å’Œä¼ä¸šçº§å¸‚åœºçš„Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2651007872%26idx%3D1%26sn%3Db41c57b2bd3bc1b885e8c9749f03455b%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2651007872&amp;idx=1&amp;sn=b41c57b2bd3bc1b885e8c9749f03455b&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Gemini 3 Flash</a>ã€‚è¿™æ¬¾æ¨¡å‹å»¶ç»­äº†è°·æ­Œã€Œåæµªæ¨å‰æµªã€çš„ç­–ç•¥ï¼Œå³ï¼šä¸‹ä¸€ä»£çš„ Flash æ¨¡å‹åœ¨æ€§èƒ½ä¸ŠåŠ›æ±‚è¶…è¶Šä¸Šä¸€ä»£çš„ Pro æ¨¡å‹ã€‚</p>
<p>æ•°æ®æ˜¾ç¤ºï¼ŒGemini 3 Flash çš„ç»¼åˆè´¨é‡å·²ç»è¶…è¶Šäº†ä»Šå¹´ 3 æœˆå‘å¸ƒçš„ Gemini 2.5 Proï¼Œä½†å…¶æˆæœ¬å¤§å¹…é™ä½ï¼Œå»¶è¿Ÿè¡¨ç°ä¹Ÿå¾—åˆ°äº†æ˜¾è‘—ä¼˜åŒ–ã€‚è¿™ç§ã€Œé«˜æ€§ä»·æ¯”ã€çš„ç­–ç•¥ï¼Œæ—¨åœ¨è®©æ›´å¤æ‚çš„æ¨ç†ä»»åŠ¡èƒ½å¤Ÿä»¥æ›´å¿«çš„é€Ÿåº¦å’Œæ›´ä½çš„é—¨æ§›è¿›å…¥å®é™…åº”ç”¨åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8db3536fe54d4484b7e27afafdfedf20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=Ml0w5hCXCdMpKynjs29sFPyfZzQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Gemini 3 Flash ä»·æ ¼åŠåŸºå‡†è¡¨ã€‚</p>
<p>ç›¸å…³é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.google%2Fproducts%2Fgemini%2Fgemini-3-flash%2F" target="_blank" title="https://blog.google/products/gemini/gemini-3-flash/" ref="nofollow noopener noreferrer">blog.google/products/geâ€¦</a></p>
<p>é™¤äº†é—­æºçš„ Gemini ç³»åˆ—ï¼Œè°·æ­Œåœ¨å¼€æºé¢†åŸŸä¹ŸåŠ¨ä½œé¢‘é¢‘ã€‚Gemma å®¶æ—åœ¨ä»Šå¹´å®ç°äº†ä»çº¯æ–‡æœ¬åˆ°å¤šæ¨¡æ€çš„è½¬å‹ã€‚</p>
<p>é€šè¿‡å¢åŠ ä¸Šä¸‹æ–‡çª—å£ã€æ‰©å±•å¤šè¯­è¨€æ”¯æŒä»¥åŠä¼˜åŒ–åœ¨å•å¼  GPU/TPU ä¸Šçš„è¿è¡Œæ•ˆç‡ï¼ŒGemma 3 ç°å·²æˆä¸ºå¼€å‘è€…åœ¨æœ¬åœ°éƒ¨ç½²é«˜æ€§èƒ½ AI æ—¶çš„é¦–é€‰å·¥å…·ä¹‹ä¸€ã€‚ç‰¹åˆ«æ˜¯ 8 æœˆå‘å¸ƒçš„Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650985662%26idx%3D3%26sn%3Dee6563957fac220147807044b0c0fbdd%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650985662&amp;idx=3&amp;sn=ee6563957fac220147807044b0c0fbdd&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Gemma 3 270M</a>ï¼Œä»¥å…¶æå°çš„å‚æ•°è§„æ¨¡æä¾›äº†è¶…é«˜æ•ˆç‡ï¼Œæ ‡å¿—ç€è°·æ­Œåœ¨è¾¹ç¼˜ä¾§ AI é¢†åŸŸçš„æŠ€æœ¯æ²‰æ·€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee0794597b5143208233544a9e8e7661~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=WXzSeo6cwWQvMV%2FrkefYr5sse7U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç›¸å…³é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.googleblog.com%2Fen%2Fintroducing-gemma-3-270m%2F" target="_blank" title="https://developers.googleblog.com/en/introducing-gemma-3-270m/" ref="nofollow noopener noreferrer">developers.googleblog.com/en/introducâ€¦</a></p>
<p>äº§å“é‡æ„ï¼šAI ä¸å†æ˜¯å·¥å…·</p>
<p>è€Œæ˜¯ä½ çš„ã€Œåˆä½œä¼™ä¼´ã€</p>
<p>2025 å¹´æ˜¯ AI ä»ã€Œå•ä¸€å·¥å…·ã€å‘ã€Œæ ¸å¿ƒæ•ˆèƒ½ã€è·¨è¶Šçš„ä¸€å¹´ã€‚Google é€šè¿‡åœ¨å…¨çº¿äº§å“ä¸­æ³¨å…¥å¼ºå¤§çš„ Agentic èƒ½åŠ›ï¼Œæ¨åŠ¨ AI ä»è¾…åŠ©è§’è‰²è½¬å˜ä¸ºå®ç”¨å‹åŸºç¡€è®¾æ–½ï¼Œé‡æ–°å®šä¹‰äº†äººæœºåä½œçš„å½¢æ€ã€‚</p>
<p>åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸï¼ŒGoogle ä¸å†å±€é™äºæä¾›è¾…åŠ©ç¼–ç å·¥å…·ï¼Œè€Œæ˜¯è‡´åŠ›äºæ„å»ºèƒ½ä¸å¼€å‘è€…æ·±åº¦åä½œçš„æ™ºèƒ½ä½“ç³»ç»Ÿã€‚11 æœˆå‘å¸ƒçš„ Gemini 3 å±•ç°äº†ä»¤äººå°è±¡æ·±åˆ»çš„ä»£ç ç”Ÿæˆä¸é€»è¾‘ç†è§£èƒ½åŠ›ã€‚åŒæœŸæ¨å‡ºçš„ Google Antigravity æ›´æ˜¯æ ‡å¿—ç€ AI è¾…åŠ©å¼€å‘è¿›å…¥äº†ä¸€ä¸ªæ–°çºªå…ƒ â€”â€” å®ƒå°†å¼€å‘æµç¨‹ä»ä¼ ç»Ÿçš„ã€Œå·¥å…·è¾…åŠ©ã€å‡çº§ä¸ºã€Œæ™ºèƒ½ä½“åä½œã€ï¼Œæå¤§åœ°é‡Šæ”¾äº†å¼€å‘è€…çš„åˆ›é€ åŠ›ä¸ç”Ÿäº§åŠ›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58f0285574ce47f7ab233fd56046f945~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=xKokQbU8RDAnssVpph67cfqZTPY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç›¸å…³é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fantigravity.google%2Fblog%2Fintroducing-google-antigravity" target="_blank" title="https://antigravity.google/blog/introducing-google-antigravity" ref="nofollow noopener noreferrer">antigravity.google/blog/introdâ€¦</a></p>
<p>è¿™ç§è¿›åŒ–åŒæ ·æ¸…æ™°åœ°ä½“ç°åœ¨ Google çš„æ ¸å¿ƒäº§å“çŸ©é˜µä¸­ï¼Œè´¯ç©¿äº†ä»ç¡¬ä»¶ç»ˆç«¯åˆ°ä¿¡æ¯æ£€ç´¢çš„æ¯ä¸€ä¸ªç¯èŠ‚ï¼š</p>
<p>3 æœˆï¼ŒSearch è¿æ¥äº†é‡è¦å˜é©ï¼Œé€šè¿‡æ‰©å±• AI Overviews å¹¶å¼•å…¥å…¨æ–°çš„ AI Modeï¼Œé‡å¡‘äº†ç”¨æˆ·è·å–ä¸å¤„ç†ä¿¡æ¯çš„æ–¹å¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae77629865ae418f996760d0b771c710~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=i2qYYfLCTi%2FmBKykHer%2FHlw9WVA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>8 æœˆï¼Œå¤‡å—ç©ç›®çš„ Pixel 10 æ­£å¼äº®ç›¸ã€‚å¾—ç›Šäºä¸€ç³»åˆ— AI åŸç”ŸåŠŸèƒ½çš„æ·±åº¦æ•´åˆï¼Œå®ƒè¢«è¯„ä»·ä¸º Google è¿„ä»Šä¸ºæ­¢æœ€æ™ºèƒ½ã€æœ€å®ç”¨çš„æ‰‹æœºç»ˆç«¯ã€‚</p>
<p>è€Œåœ¨ç”Ÿäº§åŠ›ä¸çŸ¥è¯†ç®¡ç†é¢†åŸŸï¼Œå¹´åº•çš„ä¸€ç³»åˆ—æ›´æ–°å°†ä½“éªŒæ¨å‘äº†æ–°é«˜åº¦ã€‚éšç€ 11 æœˆ Gemini 3 çš„åº•å±‚èµ‹èƒ½ï¼ŒGemini App è¿æ¥äº†æ™ºå•†ä¸èƒ½åŠ›çš„åŒé‡é£è·ƒã€‚ä¸æ­¤åŒæ—¶ï¼ŒNotebookLM ä¹Ÿåœ¨åŒæœˆé‡ç£…åŠ å…¥äº† Deep Research åŠŸèƒ½å¹¶æ”¯æŒäº†æ›´å¤šç±»å‹çš„æ•°æ®æºï¼Œä½¿å…¶ä»å•çº¯çš„ç¬”è®°å·¥å…·è¿›åŒ–ä¸ºèƒ½å¤Ÿå¤„ç†å¤æ‚ä¿¡æ¯æµçš„ä¸“ä¸šçº§æ™ºèƒ½ç ”ç©¶åŠ©æ‰‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45022f2c5c2e4915a04f8934ff28313c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=mfRbILxOMj9A4EoThUvrOXxxaig%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç›¸å…³é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.google%2Ftechnology%2Fgoogle-labs%2Fnotebooklm-deep-research-file-types%2F" target="_blank" title="https://blog.google/technology/google-labs/notebooklm-deep-research-file-types/" ref="nofollow noopener noreferrer">blog.google/technology/â€¦</a></p>
<p>åˆ›æ„ç”Ÿæˆï¼šç»ˆç»“ã€Œé»˜ç‰‡æ—¶ä»£ã€</p>
<p>å¥½è±åè¦æ…Œäº†</p>
<p>2025 å¹´æ˜¯ç”Ÿæˆå¼åª’ä½“å‘ç”Ÿå˜é©çš„ä¸€å¹´ã€‚Google é€šè¿‡å‘å¸ƒä¸€ç³»åˆ—çªç ´æ€§çš„æ¨¡å‹å’Œå·¥å…·ï¼Œæ¶µç›–è§†é¢‘ã€å›¾åƒã€éŸ³é¢‘åŠè™šæ‹Ÿä¸–ç•Œæ„å»ºï¼Œèµ‹äºˆäº†åˆ›ä½œè€…å‰æ‰€æœªæœ‰çš„èƒ½åŠ›ã€‚</p>
<p>åœ¨è§†é¢‘ç”Ÿæˆé¢†åŸŸï¼Œ5 æœˆå‘å¸ƒçš„Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650969969%26idx%3D1%26sn%3Dd79e6288708fe5edf051524c08d5102a%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650969969&amp;idx=1&amp;sn=d79e6288708fe5edf051524c08d5102a&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Veo 3</a>Â é¦–æ¬¡å®ç°äº†åŸç”ŸéŸ³é¢‘ç”Ÿæˆï¼Œç»“åˆåŒæœŸå‡çº§çš„ Music AI Sandboxï¼Œæ— è®ºæ˜¯è„šæ­¥å£°ã€ç¯å¢ƒé£å£°è¿˜æ˜¯èƒŒæ™¯é…ä¹ï¼Œéƒ½èƒ½ä¸ç”»é¢åŠ¨ä½œå®Œç¾åŒæ­¥ï¼Œå½»åº•ç»ˆç»“äº† AI è§†é¢‘çš„ã€Œé»˜ç‰‡æ—¶ä»£ã€ã€‚</p>
<p>10 æœˆçš„æ›´æ–°åˆ™è¿›ä¸€æ­¥æ¨é«˜äº†è¡Œä¸šå¤©èŠ±æ¿ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650995796%26idx%3D1%26sn%3De5fc46e60c2047abfcb9da7c4f19bcf4%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650995796&amp;idx=1&amp;sn=e5fc46e60c2047abfcb9da7c4f19bcf4&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Veo 3.1</a>Â ç‰ˆæœ¬ä¸ä»…å¤§å¹…æå‡äº†å…‰å½±å˜åŒ–ä¸ç‰©ä½“ç¢°æ’çš„ç‰©ç†ä¸€è‡´æ€§ï¼Œè¿˜ä¸å…¨æ–°åˆ›æ„å·¥å…· Flow æ·±åº¦æ•´åˆã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒå¼ºåŒ–äº†ã€Œé¦–å°¾å¸§æ§åˆ¶ã€åŠŸèƒ½ï¼Œå…è®¸åˆ›ä½œè€…ç²¾å‡†æŒ‡å®šè§†é¢‘çš„èµ·ç‚¹ä¸ç»ˆç‚¹ï¼Œç”± AI è¡¥å…¨ä¸­é—´è¿‡ç¨‹ï¼Œæå¤§åœ°å¢å¼ºäº†å™äº‹çš„å¯æ§æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae8e7c1d244f449b8c94541d53bd1ffe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=Wo0w1xp0ZnHnJKTzmnEhooJ651M%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç›¸å…³é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.googleblog.com%2Fintroducing-veo-3-1-and-new-creative-capabilities-in-the-gemini-api%2F" target="_blank" title="https://developers.googleblog.com/introducing-veo-3-1-and-new-creative-capabilities-in-the-gemini-api/" ref="nofollow noopener noreferrer">developers.googleblog.com/introducingâ€¦</a></p>
<p>åœ¨å›¾åƒç”Ÿæˆé¢†åŸŸï¼Œéšç€ 5 æœˆ Imagen 4 çš„å¥ åŸºï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650987517%26idx%3D2%26sn%3D5813029bbacc07ec206c7c7949556789%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650987517&amp;idx=2&amp;sn=5813029bbacc07ec206c7c7949556789&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Nano BananaÂ </a>åœ¨ä»Šå¹´å¤§æ”¾å¼‚å½©ï¼Œå…¶åœ¨åŒ¿åæµ‹è¯•æ—¶å°±å› è¡¨ç°ä¼˜å¼‚è€Œå¤‡å—å…³æ³¨ã€‚8 æœˆï¼Œä½œä¸ºå›¾åƒç”Ÿæˆçš„é‡å¤§å‡çº§ï¼ŒNano Banana ä»¥æé«˜çš„æŒ‡ä»¤éµå¾ªèƒ½åŠ›è‘—ç§°ã€‚å®ƒè§£å†³äº†ã€Œæ–‡å­—ç”Ÿæˆå›¾ç‰‡ã€ä¸­ç»†èŠ‚ä¸¢å¤±çš„é—®é¢˜ã€‚</p>
<p>è€Œ 11 æœˆå‘å¸ƒçš„Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2651002861%26idx%3D1%26sn%3Dea18cedf13aff0e73e786e524b45362f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2651002861&amp;idx=1&amp;sn=ea18cedf13aff0e73e786e524b45362f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Nano Banana Pro</a>Â åˆ™å°†ä½“éªŒæ¨å‘äº†æ–°é«˜åº¦ã€‚ä½œä¸ºç³»åˆ—çš„æ——èˆ°ç‰ˆæœ¬ï¼Œå®ƒé¦–æ¬¡å¼•å…¥äº†ã€Œæ·±åº¦æ€è€ƒã€æ¨¡å¼ï¼Œåœ¨ç»˜å›¾å‰å…ˆè¿›è¡Œé€»è¾‘æ¨ç†ã€‚è¿™ä½¿å¾—å®ƒä¸ä»…èƒ½ç²¾å‡†è¿˜åŸæå…¶å¤æ‚çš„ Prompt æ„å›¾ï¼Œæ›´å®ç°äº†é«˜ä¿çœŸçš„æ–‡å­—æ¸²æŸ“èƒ½åŠ›ï¼Œæ— è®ºæ˜¯æµ·æŠ¥è®¾è®¡è¿˜æ˜¯å›¾è¡¨ç»˜åˆ¶éƒ½è¾¾åˆ°äº†ä¸“ä¸šçº§æ°´å‡†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36590e25103d4f01aead55ed2bdee5c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=vDgWqyOgk0yBpFvdesyVYgNvVOU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ã€ŒæŸæ—ã€ä¸€è¯èå…¥äº†åŸå¸‚è¡—åŒºçš„å»ºç­‘è®¾è®¡ä¸­ï¼Œæ¨ªè·¨å¤šæ ‹å»ºç­‘ã€‚</p>
<p>ç›¸å…³é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.google%2Ftechnology%2Fai%2Fnano-banana-pro%2F" target="_blank" title="https://blog.google/technology/ai/nano-banana-pro/" ref="nofollow noopener noreferrer">blog.google/technology/â€¦</a></p>
<p>æ­¤å¤–ï¼ŒGoogle Labs åœ¨ä»Šå¹´ä¹Ÿæ¶Œç°å‡ºä¼—å¤šçªç ´æ€§å®éªŒï¼šä»å°†è®¾è®¡ç¬é—´è½¬åŒ–ä¸ºä»£ç çš„ Stitchï¼Œåˆ°å¼€å‘è€…çš„å¼‚æ­¥åä½œä¼™ä¼´ Julesï¼Œå†åˆ° 3D è§†é¢‘é€šä¿¡å¹³å° Google Beamï¼ŒAI æ­£åœ¨ä»å•çº¯çš„åª’ä½“ç”Ÿæˆå·¥å…·ï¼Œè¿›åŒ–ä¸ºé‡å¡‘å·¥ä½œæµçš„ç”Ÿäº§åŠ›æ ¸å¿ƒã€‚</p>
<p>ä»è›‹ç™½è´¨åˆ°å¥¥æ•°é‡‘ç‰Œ</p>
<p>AI å½“èµ·ã€Œå…¨èƒ½ç§‘ç ”é˜Ÿå‹ã€</p>
<p>2025 å¹´ï¼Œè°·æ­Œåœ¨ç”Ÿå‘½ç§‘å­¦ã€åŒ»ç–—å¥åº·åŠæ•°å­¦é€»è¾‘ç­‰é¢†åŸŸå–å¾—äº†é‡Œç¨‹ç¢‘å¼çªç ´ï¼Œä¸ä»…æ·±åŒ–äº†äººç±»å¯¹ç”Ÿç‰©é—ä¼ çš„ç†è§£ï¼Œæ›´åœ¨é¡¶çº§æ™ºåŠ›ç«èµ›ä¸­è¯æ˜äº† AI å…·å¤‡ä¸äººç±»é¡¶å°–æ°´å¹³ç›¸å½“çš„æŠ½è±¡æ¨ç†èƒ½åŠ›ã€‚</p>
<p>é¦–å…ˆæ¥çœ‹ç”Ÿå‘½ç§‘å­¦é¢†åŸŸã€‚ä¸Šä¸ªæœˆï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI3MjM3ODk0NQ%3D%3D%26mid%3D2247510308%26idx%3D1%26sn%3D639a97f77bfa3ea9d6b42a321e59943a%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI3MjM3ODk0NQ==&amp;mid=2247510308&amp;idx=1&amp;sn=639a97f77bfa3ea9d6b42a321e59943a&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">AlphaFold è¿æ¥äº”å‘¨å¹´çºªå¿µ</a>ã€‚åœ¨è§£å†³è›‹ç™½è´¨ç»“æ„é¢„æµ‹éš¾é¢˜äº”å¹´åï¼Œè¯¥ç³»ç»Ÿå·²ä¸ºè¶…è¿‡ 2 äº¿ä¸ªè›‹ç™½è´¨é¢„æµ‹äº†ç»“æ„ï¼Œå¹¶åŠ©åŠ›å…¨çƒ 300 å¤šä¸‡åç ”ç©¶äººå‘˜åŠ é€Ÿç§‘ç ”ã€‚è¿™ä¸€æˆå°±é€šè¿‡å¼€æ”¾æ•°æ®åº“å½»åº•æ”¹å˜äº†ç»“æ„ç”Ÿç‰©å­¦ï¼Œå¹¶å› å…¶å¯¹ç”Ÿå‘½ç§‘å­¦çš„æ·±è¿œè´¡çŒ®è£è·äº† 2024 å¹´è¯ºè´å°”åŒ–å­¦å¥–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/272b493982894a5a8fddf3eea5cd7a93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=jSJ7325HvYY4SqzPsh2m%2BA4IHo4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ­¤å¤–ï¼Œè°·æ­Œè¿˜å‘å¸ƒäº†åŸºå› ç»„ç†è§£æ¨¡å‹Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI3MjM3ODk0NQ%3D%3D%26mid%3D2247508003%26idx%3D1%26sn%3D35a0f0902656813430133aa0bad1b2df%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI3MjM3ODk0NQ==&amp;mid=2247508003&amp;idx=1&amp;sn=35a0f0902656813430133aa0bad1b2df&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">AlphaGenome</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªèƒ½å¤ŸåŒæ—¶å¤„ç†å¤šè¾¾ 1 å…†ç¢±åŸºå¯¹çš„é«˜åˆ†è¾¨ç‡ DNA åºåˆ—æ¨¡å‹ã€‚å®ƒé€šè¿‡ç»Ÿä¸€åˆ†æå¤šç§ç”Ÿç‰©è°ƒæ§æ¨¡å¼ï¼Œå¸®åŠ©ç§‘å­¦å®¶è§£è¯» DNA ä¸­æ›¾ç»éš¾ä»¥æ‰æ‘¸çš„éç¼–ç åŒºåŸŸï¼Œä¸ºæ¢å¯»é—ä¼ ç—…å› å’Œå¼€å‘æ–°å‹ç–—æ³•æä¾›äº†å…¨æ–¹ä½çš„ç”Ÿç‰©é›†æˆå¼€å‘ç¯å¢ƒã€‚</p>
<p>å†æ¥çœ‹åŒ»ç–—å¥åº·é¢†åŸŸã€‚è°·æ­Œç ”ç©¶é™¢æ¨å‡ºçš„ DeepSomatic åˆ©ç”¨å·ç§¯ç¥ç»ç½‘ç»œï¼Œåœ¨è‚¿ç˜¤åºåˆ—ä¸­ä»¥æé«˜ç²¾åº¦è¯†åˆ«ç™Œç—‡ç›¸å…³çš„é—ä¼ å˜å¼‚ã€‚è¯¥å·¥å…·èƒ½å¤Ÿå¤„ç†æ¥è‡ªä¸»æµæµ‹åºå¹³å°çš„æ•°æ®ï¼Œå¸®åŠ©ä¸´åºŠåŒ»ç”Ÿæ›´å‡†ç¡®åœ°é”å®šé©±åŠ¨ç™Œç—‡çš„ç‰¹å®šå˜å¼‚ï¼Œä»è€Œå®ç°çœŸæ­£çš„ç²¾å‡†åŒ»ç–—å’Œä¸ªæ€§åŒ–æ²»ç–—ã€‚</p>
<p>è€Œåœ¨ç§‘å­¦å‘ç°æ–¹é¢ï¼Œè°·æ­Œå‘å¸ƒäº†ä¸€æ¬¾åŸºäºå¤§æ¨¡å‹çš„ç¼–ç¨‹æ™ºèƒ½ä½“ â€”â€”<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650969047%26idx%3D2%26sn%3Def0aadc0ffa79ae0bea4266da98f2bc0%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650969047&amp;idx=2&amp;sn=ef0aadc0ffa79ae0bea4266da98f2bc0&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">AlphaEvolve</a>ï¼Œä¸“é—¨ç”¨äºå¯»æ‰¾å’ŒéªŒè¯ç†è®ºè®¡ç®—æœºç§‘å­¦ä¸­çš„å¤æ‚ç»„åˆç»“æ„ã€‚å®ƒåœ¨éªŒè¯è¿‡ç¨‹ä¸Šå®ç°äº† 1 ä¸‡å€çš„åŠ é€Ÿï¼ŒæˆåŠŸååŠ©ç§‘ç ”äººå‘˜æ”¶ç´§äº†ä¼˜åŒ–é—®é¢˜çš„ç•Œé™ï¼Œæ ‡å¿—ç€ AI æ­£ä»æ•°æ®å¤„ç†è€…è½¬å‹ä¸ºæ·±åº¦å‚ä¸æ•°å­¦å‘ç°çš„ç§‘ç ”åˆä½œè€…ã€‚</p>
<p>æ­¤å¤–ï¼Œè°·æ­Œè¿˜æ¨å‡ºäº†åŸºäº Gemini 2.0 æ„å»ºçš„å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿ â€”â€”<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI3MjM3ODk0NQ%3D%3D%26mid%3D2247505715%26idx%3D1%26sn%3D92bd1a6b1b8c6b17dace9259754eb522%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI3MjM3ODk0NQ==&amp;mid=2247505715&amp;idx=1&amp;sn=92bd1a6b1b8c6b17dace9259754eb522&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">AI co-scientist</a>ï¼Œæ—¨åœ¨æ¨¡ä»¿ç§‘å­¦ç ”ç©¶çš„é€»è¾‘æµç¨‹ã€‚å®ƒèƒ½ç‹¬ç«‹ç”Ÿæˆç ”ç©¶å‡è®¾ã€è®¾è®¡å®éªŒæ–¹æ¡ˆå¹¶æ’°å†™ç ”ç©¶ææ¡ˆï¼Œåœ¨ç”Ÿç‰©åŒ»å­¦ç­‰é¢†åŸŸå±•ç°äº†æ˜¾è‘—ç¼©çŸ­å‘ç°å‘¨æœŸçš„æ½œåŠ›ï¼Œæˆä¸ºäº†ç§‘å­¦å®¶çš„è™šæ‹Ÿå®éªŒå®¤åŠ©æ‰‹ã€‚</p>
<p>åœ¨ä»£ç ã€æ•°å­¦é€»è¾‘æ–¹é¢ï¼Œè°·æ­Œä¹Ÿç«™ç¨³äº†ç¬¬ä¸€æ¢¯é˜Ÿã€‚è¿›é˜¶ç‰ˆ Gemini 2.5 Deep Think åœ¨ 2025 å¹´å›½é™…å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ›ï¼ˆICPCï¼‰æ€»å†³èµ›ä¸­è¾¾åˆ°é‡‘ç‰Œæ°´å¹³ï¼Œåœ¨ 12 é“é¢˜ç›®ä¸­è§£å‡ºäº† 10 é“ã€‚ç¬¬ 66 å±Šå›½é™…æ•°å­¦å¥¥æ—åŒ¹å…‹ï¼ˆIMOï¼‰ä¸­ï¼ŒGemini Deep Think å‡­å€Ÿ 35 åˆ†çš„é«˜åˆ†ï¼ˆæ€»åˆ† 42 åˆ†ï¼‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650980912%26idx%3D2%26sn%3Dd4b29bb43cc647cc79ab06550417dfc1%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650980912&amp;idx=2&amp;sn=d4b29bb43cc647cc79ab06550417dfc1&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">è¾¾åˆ°é‡‘ç‰Œè¡¨ç°</a>ï¼Œå®Œç¾è§£å†³äº† 6 é“éš¾é¢˜ä¸­çš„ 5 é“ã€‚</p>
<p>ç®—åŠ›å®‡å®™ï¼šé‡å­å›å£°ç®—æ³•ç™» Nature</p>
<p>æ–°ä¸€ä»£ TPU å«æ¿è‹±ä¼Ÿè¾¾</p>
<p>å‰æ®µæ—¶é—´ï¼Œè°·æ­Œåˆ›å§‹äºº<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2651007176%26idx%3D1%26sn%3Deace48aac2391594abbcf750446c4e74%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2651007176&amp;idx=1&amp;sn=eace48aac2391594abbcf750446c4e74&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">è°¢å°”ç›–ãƒ»å¸ƒæ—</a>åœ¨å‚åŠ æ¯æ ¡çš„ä¸€æ¬¡æ´»åŠ¨æ—¶è¡¨ç¤ºï¼Œè¿™äº›å¹´ï¼Œè°·æ­Œæœ‰å¾ˆå¤šå¤±è¯¯ï¼Œæ¯”å¦‚æ²¡æœ‰ç¬¬ä¸€æ—¶é—´é‡è§† Transformerã€‚ä½†ä»–ä»¬ä¹Ÿåšå¯¹äº†å¾ˆå¤šäº‹æƒ…ï¼Œæ¯”å¦‚å¯¹ã€Œè®¡ç®—ã€çš„æŠ•å…¥ã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨é‡å­è®¡ç®—æ–¹é¢ï¼Œä»–ä»¬çš„é‡å¤§çªç ´ â€”â€”<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650997242%26idx%3D2%26sn%3D66ea25ada7d76c11156c990292420410%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650997242&amp;idx=2&amp;sn=66ea25ada7d76c11156c990292420410&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Quantum Echoes</a>ï¼ˆé‡å­å›å£°ï¼‰ç®—æ³•åœ¨ 10 æœˆä»½ç™»ä¸Šäº†ã€ŒNatureã€ã€‚å®ƒåœ¨é‡å­å¤„ç†å™¨ä¸Šå®ç°äº†é¦–æ¬¡å¯éªŒè¯çš„é‡å­ä¼˜è¶Šæ€§ï¼Œèƒ½ä»¥æ¯”æœ€å¿«è¶…çº§è®¡ç®—æœºå¿« 13,000 å€çš„é€Ÿåº¦è§£å†³ç‰¹å®šé—®é¢˜ï¼Œä¸ºè¯ç‰©ç ”å‘ã€ææ–™ç§‘å­¦ç­‰é¢†åŸŸçš„å®é™…åº”ç”¨æ‰“å¼€äº†æ–°çª—å£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1a851537c2447e1945da0dd9b885331~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=SKSjeSq0Kzs586rv4oK4rUKHIf0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç›¸å…³é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fquantumai.google%2Fstatic%2Fsite-assets%2Fdownloads%2Fquantum-computation-molecular-geometry-via-nuclear-spin-echoes.pdf" target="_blank" title="https://quantumai.google/static/site-assets/downloads/quantum-computation-molecular-geometry-via-nuclear-spin-echoes.pdf" ref="nofollow noopener noreferrer">quantumai.google/static/siteâ€¦</a></p>
<p>è¿™ä¸€è¿›å±•å¾—ç›Šäºè°·æ­Œåœ¨é‡å­è®¡ç®—æ–¹å‘çš„å¤šå¹´æŠ•å…¥ã€‚ä»Šå¹´ï¼Œè°·æ­Œé‡å­ç¡¬ä»¶é¦–å¸­ç§‘å­¦å®¶ Michel Devoret å’Œå‰é‡å­äººå·¥æ™ºèƒ½ç¡¬ä»¶è´Ÿè´£äºº John Martinis è¿˜å› åœ¨é‡å­è®¡ç®—æ–¹é¢çš„å¥ åŸºæ€§å·¥ä½œä¸åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡æ•™æˆ John Clarke å…±åŒè·å¾—äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650994101%26idx%3D1%26sn%3Df13c594bd201269749ca7b74824075f9%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650994101&amp;idx=1&amp;sn=f13c594bd201269749ca7b74824075f9&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">è¯ºè´å°”ç‰©ç†å­¦å¥–</a>ã€‚è‡³æ­¤ï¼Œè°·æ­Œçš„è¯ºå¥–å¾—ä¸»å·²ç»å¢åŠ åˆ°äº”ä½ï¼Œåœ¨ç§‘æŠ€ç•Œéå¸¸ç½•è§ã€‚</p>
<p>é™¤äº†é‡å­è®¡ç®—ï¼Œè°·æ­Œä»Šå¹´åœ¨ TPU æ–¹å‘çš„è¿›å±•åŒæ ·ä»¤äººç©ç›®ã€‚ä»Šå¹´ 4 æœˆï¼Œç¬¬ä¸ƒä»£ TPUâ€”â€”<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650964063%26idx%3D2%26sn%3Dfae1953e7bd488ebb976b91c51ba334b%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650964063&amp;idx=2&amp;sn=fae1953e7bd488ebb976b91c51ba334b&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Ironwood</a>Â æ­£å¼å‘å¸ƒã€‚å®ƒä¸“ä¸ºã€Œæ¨ç†æ—¶ä»£ã€è®¾è®¡ï¼Œæ¯å—èŠ¯ç‰‡å†…å­˜å¸¦å®½æå‡è‡³ 7.2 TB/sï¼Œå•èŠ¯ç‰‡æ˜¾å­˜å®¹é‡è¾¾åˆ° 192GBã€‚å½“æ¯ä¸ª pod æ‰©å±•è‡³ 9216 å—èŠ¯ç‰‡æ—¶ï¼Œå®ƒå¯æä¾› 42.5 exaflops çš„ AI ç®—åŠ›ï¼Œè¿œè¶…ç›®å‰å…¨çƒæœ€å¿«çš„è¶…çº§è®¡ç®—æœº El Capitan çš„ 1.7 exaflopsã€‚æ¯å— Ironwood èŠ¯ç‰‡çš„å³°å€¼è®¡ç®—èƒ½åŠ›å¯è¾¾ 4614 TFLOPsã€‚</p>
<p>è°·æ­Œé€éœ²ï¼Œè¿™æ¬¾èŠ¯ç‰‡çš„éƒ¨åˆ†æ¶æ„ç”±å…¶è‡ªå®¶çš„ AI æ¨¡å‹ AlphaChip è¾…åŠ©ä¼˜åŒ–ï¼Œå¤§å¹…ç¼©çŸ­äº†ç ”å‘å‘¨æœŸå¹¶ä¼˜åŒ–äº†å¸ƒå±€ã€‚</p>
<p>å’Œè‹±ä¼Ÿè¾¾ GPU ç›¸æ¯”ï¼Œè¿™æ¬¾æ–°çš„ TPU æ‹¥æœ‰æè‡´çš„èƒ½æ•ˆæ¯”ï¼Œåœ¨ç”µåŠ›ä¾›åº”å—é™çš„æ•°æ®ä¸­å¿ƒé‡Œï¼Œè°·æ­Œèƒ½ç”¨åŒæ ·çš„ç”µé‡è·‘å‡ºæ›´å¤šçš„ AI ç®—åŠ›ã€‚æ­¤å¤–ï¼Œè°·æ­Œä¸æŠŠ TPU çœ‹ä½œå•ä¸€èŠ¯ç‰‡ï¼Œè€Œæ˜¯ä¸€ä¸ªåä¸º Pod çš„æ•´ä½“ï¼Œåœ¨è¶…å¤§è§„æ¨¡é›†ç¾¤ï¼ˆä¸‡å¡çº§åˆ«ï¼‰çš„å¸ƒçº¿å¤æ‚åº¦å’Œç”µåŠ›æŸè€—ä¸Šï¼ŒTPU æ›´æœ‰ä¼˜åŠ¿ã€‚ï¼ˆå…³äº GPU å’Œ TPU çš„æ›´å¤šå¯¹æ¯”å‚è§ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2651006155%26idx%3D1%26sn%3D58d8bbed035d587d398de7ca2de8d9cd%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2651006155&amp;idx=1&amp;sn=58d8bbed035d587d398de7ca2de8d9cd&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">è°·æ­Œ TPU æ€ç–¯äº†ï¼Œäº§èƒ½æš´æ¶¨ 120%ã€æ€§èƒ½ 4 å€åŠæ‰“ï¼Œè‹±ä¼Ÿè¾¾è¿˜åå¾—ç¨³å—ï¼Ÿ</a>ã€‹ï¼‰</p>
<p>ç›®å‰ï¼Œè°·æ­Œå·²è®¡åˆ’åˆ° 2027 å¹´å®ç°å¹´äº§ 500 ä¸‡é¢— TPU çš„ç›®æ ‡ã€‚ç›®å‰ï¼Œåƒ Anthropic è¿™æ ·çš„ AI å·¨å¤´å·²ç»é¢„è®¢äº†è¶…è¿‡ 100 ä¸‡é¢— TPU ç®—åŠ›ï¼Œè¿™æ˜¾ç¤ºå‡ºè°·æ­Œæ­£é€šè¿‡ã€Œè‡ªç ”èŠ¯ç‰‡ + äº‘æœåŠ¡ã€çš„é—­ç¯ï¼Œåœ¨ AI ç¡¬ä»¶å¸‚åœºæœ‰åŠ›åœ°æŒ‘æˆ˜è‹±ä¼Ÿè¾¾çš„ç»Ÿæ²»åœ°ä½ã€‚</p>
<p>Gemini Robotics</p>
<p>æŠŠã€Œå¤§æ¨¡å‹ + æœºå™¨äººã€åšåˆ°æè‡´</p>
<p>åœ¨è¿™æ³¢å…·èº«æ™ºèƒ½å‘å±•æµªæ½®ä¸­ï¼Œè°·æ­Œä¸€ç›´èµ·åˆ°æŠ€æœ¯å¼•é¢†ä½œç”¨ï¼Œé€šè¿‡ä¸€ç³»åˆ—ç ”ç©¶æŠŠã€Œå¤§æ¨¡å‹ + æœºå™¨äººã€è¿™ä»¶äº‹åšæˆäº†ä½“ç³»åŒ–ã€å¯è¿­ä»£ã€ä¸”ä¸æ–­åˆ·æ–°è¡Œä¸šä¸Šé™ã€‚</p>
<p>å‰ä¸¤å¹´ï¼Œä»–ä»¬é€šè¿‡ RT-1 å’Œ RT-2 (Robotic Transformer) ç‡å…ˆè¯æ˜äº†ï¼šå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„ Transformer æ¶æ„å¯ä»¥ç›´æ¥ç”¨äºè¾“å‡ºæœºå™¨äººåŠ¨ä½œã€‚</p>
<p>2025 å¹´ï¼Œä»–ä»¬è¿›ä¸€æ­¥å°† VLA æ¨¡å‹æ¨å‘æè‡´ã€‚3 æœˆä»½ï¼Œä»–ä»¬æ¨å‡ºäº† Gemini Roboticsï¼Œé€šè¿‡å°†è§†è§‰ã€è¯­è¨€å’ŒåŠ¨ä½œä¸‰ç§æ¨¡æ€ä¸ç‰©ç†æ§åˆ¶ç³»ç»Ÿæ·±åº¦èåˆï¼Œé¦–æ¬¡å®ç°äº†ã€Œæ„ŸçŸ¥ - å†³ç­– - åŠ¨ä½œã€çš„å…¨é—­ç¯æ“ä½œï¼Œèƒ½å¤Ÿç›´æ¥æ ¹æ®è§†è§‰è¾“å…¥å’Œè¯­è¨€æŒ‡ä»¤ç”Ÿæˆç›¸åº”çš„æœºæ¢°è‡‚è½¨è¿¹ï¼Œæ— éœ€åƒä¼ ç»Ÿæœºå™¨äººé‚£æ ·è¿›è¡Œç¹ççš„åˆ†æ­¥è§„åˆ’ã€‚</p>
<p>9 æœˆä»½ï¼ŒGemini Robotics 1.5 é—®ä¸–ï¼Œåˆæ­¥å…·å¤‡äº†ä»¥ç±»ä¼¼äººç±»æ€è€ƒæ–¹å¼è¿›è¡Œè§„åˆ’è¡ŒåŠ¨çš„èƒ½åŠ›ã€‚å®ƒé€šè¿‡ä¸¤ä¸ªæ¨¡å‹çš„åˆä½œæ¥è¾¾æˆæ­¤ç›®æ ‡ï¼šER æ¨¡å‹è´Ÿè´£é«˜å±‚æ¨ç†å’Œå†³ç­–ï¼Œç”Ÿæˆè¯¦ç»†çš„è¡ŒåŠ¨æ–¹æ¡ˆï¼›VLA æ¨¡å‹è´Ÿè´£æ„ŸçŸ¥å’Œå…·ä½“æ‰§è¡Œï¼Œå¹¶åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¿›è¡Œç»†ç²’åº¦çš„è‡ªæˆ‘æ¨ç†æ ¡æ­£ã€‚è¿™ç§æ¶æ„æ—¨åœ¨ç»“åˆä¸¤è€…ä¼˜åŠ¿ï¼Œä½¿æœºå™¨äººæ—¢èƒ½æ·±æ€ç†Ÿè™‘åˆèƒ½åŠ¨ä½œç²¾å‡†ã€‚</p>
<p>æ­¤å¤–ï¼Œä»–ä»¬è¿˜æˆåŠŸæŠŠå¤§æ¨¡å‹ã€Œå¡è¿›ã€è¾¹ç¼˜è®¾å¤‡å¹¶å¼€æ”¾ç”Ÿæ€ã€‚2025 å¹´ 6 æœˆå‘å¸ƒçš„Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650975662%26idx%3D1%26sn%3D805ae2305a6612059564d086cd41202b%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650975662&amp;idx=1&amp;sn=805ae2305a6612059564d086cd41202b&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Gemini Robotics On-Device</a>ï¼Œé¦–æ¬¡è®©ä½å»¶è¿Ÿçš„ VLA æ¨¡å‹å®Œå…¨ç¦»çº¿è¿è¡Œåœ¨æœºæ¢°è‡‚å’Œäººå½¢æœºå™¨äººä¸Šã€‚ä»–ä»¬è¿˜é…å¥—æ”¾å‡ºäº† Gemini Robotics SDKï¼Œå¼€å‘è€… 50ï½100 æ¬¡æ¼”ç¤ºå°±èƒ½å¾®è°ƒå‡ºå¯è¿ç§»çš„æ–°æŠ€èƒ½ã€‚</p>
<p>Genie 3 å¼•çˆ†ä¸–ç•Œæ¨¡å‹</p>
<p>å“ˆè¨æ¯”æ–¯å¯„äºˆåšæœ›</p>
<p>æåˆ°ä¸–ç•Œæ¨¡å‹ï¼Œè°·æ­Œçš„ Genie 3 æ˜¯ä»Šå¹´çš„ç»å¯¹äº®ç‚¹ï¼Œè¢«è§†ä¸ºä¸–ç•Œæ¨¡å‹çš„æ–°é«˜å³°ï¼ˆå‚è§ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650983908%26idx%3D1%26sn%3Df33650540bdffd2558dea77ba3ab7377%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650983908&amp;idx=1&amp;sn=f33650540bdffd2558dea77ba3ab7377&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">éœ‡æ’¼ï¼Œä¸–ç•Œæ¨¡å‹ç¬¬ä¸€æ¬¡è¶…çœŸå®åœ°æ¨¡æ‹Ÿäº†çœŸå®ä¸–ç•Œï¼šè°·æ­Œ Genie 3 æ˜¨æ™šæŠ¢äº† OpenAI é£å¤´</a>ã€‹ã€‚</p>
<p>è¿™ä¸åªæ˜¯å› ä¸º Genie 3 ç”»é¢æ›´é€¼çœŸï¼Œè€Œæ˜¯å®ƒç¬¬ä¸€æ¬¡æŠŠå®æ—¶äº¤äº’ã€é•¿æœŸä¸€è‡´æ€§å’Œè¯­è¨€å¯æ§æ€§åˆæˆåœ¨åŒä¸€ä¸ªç”Ÿæˆå¼ç³»ç»Ÿä¸­ï¼šå®ƒä»¥æ¯ç§’ 24 å¸§ã€720p çš„è¾¹ç”Ÿæˆè¾¹äº¤äº’æ–¹å¼ï¼Œè®©ç”¨æˆ·æ— éœ€ä»»ä½•é¢„åˆ¶ 3D èµ„äº§å°±èƒ½åƒç©æ¸¸æˆä¸€æ ·å®æ—¶æ¢ç´¢ï¼Œè€Œä¸”å®ƒå…·å¤‡é•¿è¾¾å‡ åˆ†é’Ÿçš„ç©ºé—´è®°å¿†ï¼Œä½¿ä¸–ç•Œåœ¨è½¬èº«ç¦»å¼€åä¾ç„¶ä¿æŒç¨³å®šè¿ç»­ã€‚</p>
<p>æ­£å› å¦‚æ­¤ï¼ŒGenie 3 ä¸å†åªæ˜¯ã€Œå¯çœ‹çš„è§†é¢‘æ¨¡å‹ã€ï¼Œè€Œæœ‰æœ›æˆä¸ºä¸€ä¸ªèƒ½æ”¯æ’‘æ™ºèƒ½ä½“é•¿æœŸè¯•é”™ä¸è§„åˆ’çš„è®­ç»ƒç¯å¢ƒã€ä¸€ä¸ªæŠŠå†…å®¹åˆ›ä½œä»æ­åœºæ™¯é™ç»´åˆ°å†™ä¸€å¥è¯çš„ç”Ÿäº§å·¥å…·ï¼Œä»¥åŠä¸€ä¸ªå¯ä½æˆæœ¬å¤ç°æç«¯æƒ…å¢ƒçš„ç§‘å­¦æ¨¡æ‹Ÿæ²™ç›’ï¼Œä¸ºé€šå¾€é€šç”¨æ™ºèƒ½æä¾›äº†ä¸€æ¡å¯äº¤äº’ã€å¯é•¿æœŸæ¼”åŒ–çš„æ¨¡æ‹Ÿè·¯å¾„ã€‚</p>
<p>æœ€è¿‘ï¼Œå“ˆè¨æ¯”æ–¯åœ¨é‡‡è®¿ä¸­è¯´ï¼Œé™¤äº† AI ä¹‹å¤–ï¼Œä¸–ç•Œæ¨¡å‹å’Œæ¨¡æ‹Ÿå¯èƒ½æ˜¯ä»–æœ€é•¿ä¹…çš„çƒ­æƒ…æ‰€åœ¨ã€‚ä»–è®¤ä¸ºï¼Œè¯­è¨€æ¨¡å‹å·²ç»æ„å¤–åœ°å­¦ä¼šäº†å¤§é‡å…³äºä¸–ç•Œçš„çŸ¥è¯†ï¼Œä½†çœŸæ­£çš„ä¸–ç•Œç†è§£ â€”â€” å°¤å…¶æ˜¯ç©ºé—´åŠ¨æ€ã€ç‰©ç†å› æœå’Œéœ€è¦äº²èº«ä½“éªŒçš„æ„ŸçŸ¥èƒ½åŠ› â€”â€” å¾ˆéš¾ä»…é è¯­è¨€è·å¾—ï¼Œå¿…é¡»é€šè¿‡ä¸–ç•Œæ¨¡å‹ä¸æ¨¡æ‹Ÿæ¥è¡¥è¶³ã€‚</p>
<p>ä¸–ç•Œæ¨¡å‹æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ã€Œç›´è§‰ç‰©ç†å­¦ã€ï¼Œèƒ½ç†è§£äº‹ç‰©å¦‚ä½•è¿ä½œã€ç§»åŠ¨ä¸ç›¸äº’ä½œç”¨ï¼Œè€Œç”Ÿæˆé€¼çœŸçš„ä¸–ç•Œæ­£æ˜¯è¿™ç§ç†è§£çš„è¯æ˜ã€‚åƒ Genieã€Veo è¿™æ ·çš„äº¤äº’å¼è§†é¢‘ä¸ä¸–ç•Œæ¨¡å‹ï¼Œæ˜¯è¿ˆå‘é€šç”¨æ™ºèƒ½ã€æœºå™¨äººå’Œç°å®ä¸­é€šç”¨åŠ©æ‰‹çš„å…³é”®ä¸€æ­¥ï¼Œæœ€ç»ˆä¹Ÿå¯èƒ½å›åˆ°ä»–æœ€åˆçƒ­çˆ±çš„æ¸¸æˆä¸æ¨¡æ‹Ÿï¼Œåˆ›é€ çœŸæ­£æ„ä¹‰ä¸Šçš„ã€Œç»ˆææ¸¸æˆã€ã€‚</p>
<p>æŒ‘æˆ˜å¤©æ°”ã€ç–¾ç—…ã€æ•™è‚²</p>
<p>è°·æ­Œè¦æ”¹é€ ä¸–ç•Œ</p>
<p>æŠ€æœ¯ç»ˆç©¶æ˜¯ä¸ºäººæœåŠ¡çš„ï¼Œåœ¨è¿™æ–¹é¢ï¼Œè°·æ­Œä¹ŸæŠ«éœ²äº†ä¸€äº›è¿›å±•ã€‚</p>
<p>æ°”å€™æ–¹é¢ï¼Œä»–ä»¬çš„æ´ªæ°´é¢„è­¦ç³»ç»Ÿå·²ç»è¦†ç›– 150 ä¸ªå›½å®¶ã€20 å¤šäº¿äººå£äº†ã€‚ä»–ä»¬æ–°å‡ºçš„å¤©æ°”é¢„æŠ¥æ¨¡å‹ WeatherNext 2ï¼Œé€Ÿåº¦æ˜¯ä»¥å‰çš„ 8 å€ï¼Œæœ€ç²¾ç»†èƒ½åšåˆ°æŒ‰å°æ—¶é¢„æµ‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a561269e6104a34b7a1626bfa512d52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=ABsTwWYtZYoco8CGSiS%2BmCBfugE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é¡¹ç›®é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeepmind.google%2Fscience%2Fweathernext%2F" target="_blank" title="https://deepmind.google/science/weathernext/" ref="nofollow noopener noreferrer">deepmind.google/science/weaâ€¦</a></p>
<p>åŒ»ç–—æ–¹é¢ï¼Œä»–ä»¬åœ¨é€šç”¨æ¨¡å‹çš„åŸºç¡€ä¸Šæ‰“é€ äº†ä¸€äº›å‚ç±»æ¨¡å‹ï¼Œæ¯”å¦‚åŸºäº Gemma å¼€æºæ¨¡å‹ç³»åˆ—çš„ã€ç”¨äºå•ç»†èƒåˆ†æçš„ 270 äº¿å‚æ•°åŸºç¡€æ¨¡å‹ Cell2Sentence-Scale 27Bï¼ˆC2S-Scaleï¼‰ï¼Œè¯¥æ¨¡å‹å¯ä»¥å¸®åŠ©å‘ç°æ–°çš„æ½œåœ¨ç™Œç—‡æ²»ç–—é€”å¾„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a347885ba7ab43c4b549da227ecb0fb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767174714&amp;x-signature=YhPVWeCmultRYviqHNIzbeO0770%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é¡¹ç›®é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.google%2Ftechnology%2Fai%2Fgoogle-gemma-ai-cancer-therapy-discovery%2F" target="_blank" title="https://blog.google/technology/ai/google-gemma-ai-cancer-therapy-discovery/" ref="nofollow noopener noreferrer">blog.google/technology/â€¦</a></p>
<p>æ•™è‚²æ–¹é¢ï¼Œè°·æ­Œä¹Ÿå°è¯•äº†ä¸€äº›åˆ›æ–°ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>åœ¨ Gemini AI é‡Œæ¨å‡ºäº†ã€ŒGuided Learningã€åŠŸèƒ½ï¼Œå®ƒä¸åƒæ™®é€š AI åªç»™å‡ºç­”æ¡ˆï¼Œè€Œæ˜¯é€šè¿‡æé—®ã€æ­¥éª¤è®²è§£ã€å›¾ç‰‡ã€è§†é¢‘å’Œæµ‹éªŒç­‰æ–¹å¼ï¼Œå¸®åŠ©ç”¨æˆ·æ·±å…¥ç†è§£çŸ¥è¯†ã€‚</p>
</li>
<li>
<p>åŸºäº Gemini æ‰“é€ äº†ä¸€ç³»åˆ—ç»è¿‡å¾®è°ƒã€èå…¥å­¦ä¹ ç§‘å­¦åŸç†çš„ç”Ÿæˆå¼ AI æ¨¡å‹ â€”â€”LearnLMã€‚å®ƒåœ¨è®¾è®¡æ—¶å‚è€ƒäº†æ•™è‚²ç ”ç©¶ï¼ˆå¦‚è®¤çŸ¥è´Ÿè·ç®¡ç†ã€ä¸ªæ€§åŒ–åé¦ˆç­‰ï¼‰ï¼Œç›®çš„æ˜¯è®© AI æ›´åƒå¯¼å¸ˆè€Œä¸æ˜¯åªç»™ç­”æ¡ˆã€‚</p>
</li>
<li>
<p>æŠŠå¼ºå¤§çš„ Gemini ç¿»è¯‘èƒ½åŠ›å¸¦åˆ°äº†è°·æ­Œç¿»è¯‘å’Œ Search çš„ç¿»è¯‘åŠŸèƒ½ä¸­ï¼Œè®©æ–‡æœ¬ç¿»è¯‘æ›´è‡ªç„¶ã€æ›´èƒ½ç†è§£è¯­å¢ƒï¼ˆæ¯”å¦‚ä¹ è¯­ã€ä¿šè¯­ç­‰ï¼‰ï¼Œæé«˜å‡†ç¡®æ€§ï¼ŒåŒæ—¶æ¨å‡ºäº†åŸºäº Gemini çš„å®æ—¶è¯­éŸ³å¯¹è¯ç¿»è¯‘ï¼ˆLive translateï¼‰ï¼Œå¯é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2651007167%26idx%3D1%26sn%3D957ac2c92e9e4903bb1d7180c3000a2c%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2651007167&amp;idx=1&amp;sn=957ac2c92e9e4903bb1d7180c3000a2c&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">è€³æœº</a>å¬è§æ›´åŠ è‡ªç„¶æµç•…çš„å³æ—¶ç¿»è¯‘ã€‚</p>
</li>
</ul>
<p>ç»“è¯­</p>
<p>çºµè§‚ 2025 å¹´ï¼Œè°·æ­Œå±•ç°å‡ºçš„å¹¶éå•ä¸€æŠ€æœ¯çš„çªè¿›ï¼Œè€Œæ˜¯ä¸€ç§å¼ºå¤§çš„ã€Œç³»ç»Ÿæ€§å·¥ç¨‹èƒ½åŠ›ã€ã€‚åœ¨ç®—åŠ›å±‚æœ‰ TPU é›†ç¾¤ä¸é‡å­å›å£°ç®—æ³•ï¼Œåœ¨æ¨¡å‹å±‚æœ‰ Gemini çš„é€»è¾‘è¿›åŒ–ï¼Œåœ¨åº”ç”¨å±‚æœ‰è¯ºå¥–çº§çš„ç§‘ç ”äº§å‡ºã€‚</p>
<p>è¿™ä¸€å¹´ï¼Œè°·æ­Œæ˜¾ç„¶èµ°å‡ºäº†ã€Œåˆ›æ–°è€…çš„çª˜å¢ƒã€ï¼Œä¸å†çº ç»“äºå…ˆå‘ä¼˜åŠ¿çš„ä¸§å¤±ï¼Œè€Œæ˜¯åˆ©ç”¨å…¶åºå¤§çš„å…¨æ ˆç”Ÿæ€å®Œæˆäº†è¡¥è¯¾ä¸è¿½èµ¶ã€‚åœ¨ AI ç«äº‰ä»ã€Œåœ¨å¤§æ¨¡å‹ä¸Šè·‘åˆ†ã€è½¬å‘ã€Œåœ¨äº§ä¸šé“¾ä¸­è½åœ°ã€çš„ä¸‹åŠåœºï¼Œè¿™ç§ä»åº•å±‚èŠ¯ç‰‡åˆ°ä¸Šå±‚åº”ç”¨æ²¡æœ‰ä»»ä½•çŸ­æ¿çš„å¸ƒå±€ï¼Œæˆ–è®¸æ‰æ˜¯ç§‘æŠ€å·¨å¤´æœ€æ ¸å¿ƒçš„ç«äº‰åŠ›ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.google%2Ftechnology%2Fai%2F2025-research-breakthroughs%2F%255B%23computing%255D()" target="_blank" title="https://blog.google/technology/ai/2025-research-breakthroughs/%5B#computing%5D()" ref="nofollow noopener noreferrer">blog.google/technology/â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter å®æˆ˜ï¼šåŸºäº GetX + Obx çš„ä¼ä¸šçº§æ¶æ„è®¾è®¡æŒ‡å—]]></title>    <link>https://juejin.cn/post/7587243886433730594</link>    <guid>https://juejin.cn/post/7587243886433730594</guid>    <pubDate>2025-12-24T09:56:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587243886433730594" data-draft-id="7587243886433714210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter å®æˆ˜ï¼šåŸºäº GetX + Obx çš„ä¼ä¸šçº§æ¶æ„è®¾è®¡æŒ‡å—"/> <meta itemprop="keywords" content="Flutter,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-24T09:56:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…¨æ ˆæ´¾æ£®"/> <meta itemprop="url" content="https://juejin.cn/user/430664289093176"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter å®æˆ˜ï¼šåŸºäº GetX + Obx çš„ä¼ä¸šçº§æ¶æ„è®¾è®¡æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/430664289093176/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…¨æ ˆæ´¾æ£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T09:56:16.000Z" title="Wed Dec 24 2025 09:56:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>å¤§å®¶å¥½,æˆ‘æ˜¯<code>Petter Guo</code> <br/></p>
<p>ä¸€ä½çƒ­çˆ±<code>æ¢ç´¢</code>çš„<code>å…¨æ ˆå·¥ç¨‹å¸ˆ</code>ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å°†åˆ†äº«<code>ä¸ªäºº</code>çš„<code>Technical essentials</code>ï¼Œå¸¦ä½ ç©è½¬<code>å‰ç«¯</code>ã€<code>åç«¯</code>åˆ° <code>DevOps</code> çš„ç¡¬æ ¸æŠ€æœ¯ï¼Œè§£é”<code>AI</code>ï¼ŒåŠ©ä½ æ‰“é€šæŠ€æœ¯ä»»ç£äºŒè„‰ï¼Œæˆä¸ºçœŸæ­£çš„<code>å…¨èƒ½ç©å®¶</code>!ï¼<br/></p>
<p>å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©, è¯·<code>ç‚¹èµ</code>+ <code>æ”¶è—</code> +<code>å…³æ³¨</code>é¼“åŠ±ä¸‹, å­¦ä¹ å…¬ä¼—å·ä¸º <code>å…¨æ ˆæ´¾æ£®</code>ã€‚ <br/></p>
<p>åœ¨ Flutter å¼€å‘ä¸­ï¼ŒçŠ¶æ€ç®¡ç†ä¸€ç›´æ˜¯ç»•ä¸å¼€çš„è¯é¢˜ã€‚ä» Provider åˆ° BLoCï¼Œå†åˆ° Riverpodï¼Œé€‰æ‹©å¾ˆå¤šã€‚ä½†åœ¨è¿½æ±‚<strong>å¼€å‘æ•ˆç‡</strong>ä¸<strong>è¿è¡Œæ€§èƒ½</strong>å¹³è¡¡çš„åœºæ™¯ä¸‹ï¼Œ<strong>GetX</strong> æ— ç–‘æ˜¯ç›®å‰çš„â€œç‰ˆæœ¬ä¹‹å­â€ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬ä¸è°ˆç®€å•çš„è®¡æ•°å™¨ Demoï¼Œè€Œæ˜¯æ·±å…¥æ¢è®¨ï¼š<strong>å¦‚ä½•åœ¨ä¼ä¸šçº§é¡¹ç›®ä¸­ï¼Œåˆ©ç”¨ GetX + Obx æ„å»ºä¸€å¥—é«˜å†…èšã€ä½è€¦åˆã€æ˜“æ‰©å±•çš„æ¶æ„ã€‚</strong></p>
<h2 data-id="heading-0">ğŸ¯ ä¸ºä»€ä¹ˆé€‰æ‹© GetX + Obxï¼Ÿ</h2>
<p>åœ¨ä¼ ç»Ÿçš„ <code>setState</code> æˆ– <code>ChangeNotifier</code> æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é¢ä¸´å…¨é¡µé‡ç»˜çš„é—®é¢˜ã€‚è€Œ GetX çš„ <code>Obx</code> å¸¦æ¥äº†<strong>ç»†ç²’åº¦çš„å“åº”å¼ç¼–ç¨‹</strong>ï¼š</p>
<ol>
<li><strong>æç®€ä»£ç </strong>ï¼šæ— éœ€ <code>context</code>ï¼Œæ— éœ€ç¹ççš„æ¨¡æ¿ä»£ç ã€‚</li>
<li><strong>ç²¾å‡†åˆ·æ–°</strong>ï¼šå˜é‡å˜äº†ï¼Œåªæœ‰ä½¿ç”¨è¯¥å˜é‡çš„ Widget ä¼šåˆ·æ–°ï¼Œæ€§èƒ½æé«˜ã€‚</li>
<li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šè‡ªå¸¦å¼ºå¤§çš„ DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰ç³»ç»Ÿï¼Œå½»åº•è§£è€¦ Logic å’Œ Viewã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-1">ğŸ—ï¸ ç›®å½•æ¶æ„è®¾è®¡ (The Architecture)</h2>
<p>å¯¹äºä¸­å¤§å‹é¡¹ç›®ï¼Œæ¨èä½¿ç”¨ <strong>Feature-Firstï¼ˆæŒ‰åŠŸèƒ½åˆ†åŒ…ï¼‰</strong> çš„ç›®å½•ç»“æ„ï¼Œç»“åˆ <strong>GetX Pattern</strong> æ ‡å‡†ï¼š</p>
<pre><code class="hljs language-text" lang="text">lib/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ data/                   # æ•°æ®å±‚ (å…¨å±€å…±äº«)
â”‚   â”‚   â”œâ”€â”€ models/             # å®ä½“ç±» (Jsonè½¬Dart)
â”‚   â”‚   â”œâ”€â”€ providers/          # API è¯·æ±‚å°è£… (Dio/GetConnect)
â”‚   â”‚   â””â”€â”€ services/           # å…¨å±€æœåŠ¡ (æœ¬åœ°å­˜å‚¨/AuthæœåŠ¡)
â”‚   â”‚
â”‚   â”œâ”€â”€ modules/                # ä¸šåŠ¡æ¨¡å— (æ ¸å¿ƒ)
â”‚   â”‚   â”œâ”€â”€ home/               # é¦–é¡µæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ bindings/       # ä¾èµ–æ³¨å…¥ (Binding)
â”‚   â”‚   â”‚   â”œâ”€â”€ controllers/    # ä¸šåŠ¡é€»è¾‘ (Controller)
â”‚   â”‚   â”‚   â””â”€â”€ views/          # é¡µé¢è§†å›¾ (View)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ profile/            # ä¸ªäººä¸­å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/                 # è·¯ç”±ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ app_pages.dart      # è·¯ç”±è¡¨
â”‚   â”‚   â””â”€â”€ app_routes.dart     # è·¯ç”±åç§°å¸¸é‡
â”‚   â”‚
â”‚   â””â”€â”€ utils/                  # å·¥å…·ç±»
â”‚
â””â”€â”€ main.dart                   # å…¥å£æ–‡ä»¶
</code></pre>
<p><strong>è®¾è®¡æ ¸å¿ƒï¼š</strong> æ¯ä¸ªä¸šåŠ¡æ¨¡å—ï¼ˆModuleï¼‰è‡ªåŒ…å« <code>View</code>ã€<code>Controller</code> å’Œ <code>Binding</code>ï¼Œäº’ä¸å¹²æ‰°ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ’» ä»£ç å®æˆ˜ (Code Implementation)</h2>
<p>æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªåœºæ™¯ï¼š<strong>ç”¨æˆ·è¯¦æƒ…é¡µ</strong>ã€‚è¿›å…¥é¡µé¢è‡ªåŠ¨è¯·æ±‚ APIï¼ŒåŠ è½½ä¸­æ˜¾ç¤º Loadingï¼ŒæˆåŠŸæ˜¾ç¤ºæ•°æ®ï¼Œå¤±è´¥æ˜¾ç¤ºé‡è¯•æŒ‰é’®ã€‚</p>
<h3 data-id="heading-3">1. Model å±‚ï¼šå®šä¹‰æ•°æ®</h3>
<p><code>app/data/models/user_model.dart</code></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> id;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> name;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> avatar;

  User({<span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.id, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.name, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.avatar});

  <span class="hljs-comment">// å®é™…å¼€å‘ä¸­å»ºè®®ä½¿ç”¨ json_serializable</span>
  <span class="hljs-keyword">factory</span> User.fromJson(<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; json) {
    <span class="hljs-keyword">return</span> User(
      id: json[<span class="hljs-string">'id'</span>] ?? <span class="hljs-string">''</span>,
      name: json[<span class="hljs-string">'name'</span>] ?? <span class="hljs-string">'Unknown'</span>,
      avatar: json[<span class="hljs-string">'avatar'</span>] ?? <span class="hljs-string">''</span>,
    );
  }
}
</code></pre>
<h3 data-id="heading-4">2. Provider å±‚ï¼šAPI è¯·æ±‚</h3>
<p><code>app/data/providers/user_provider.dart</code></p>
<p>è¿™é‡Œè´Ÿè´£çº¯ç²¹çš„æ•°æ®è·å–ï¼Œä¸å«ä¸šåŠ¡é€»è¾‘ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:get/get.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserProvider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetConnect</span> </span>{
  Future&lt;Response&gt; getUser(<span class="hljs-built_in">String</span> id) =&gt; <span class="hljs-keyword">get</span>(<span class="hljs-string">'https://api.example.com/users/<span class="hljs-subst">$id</span>'</span>);
}
</code></pre>
<h3 data-id="heading-5">3. Controller å±‚ï¼šæ ¸å¿ƒé€»è¾‘ (å…³é”®!)</h3>
<p><code>app/modules/profile/controllers/profile_controller.dart</code></p>
<p>è¿™æ˜¯ GetX çš„çµé­‚æ‰€åœ¨ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>.obs</code> å°†å˜é‡å˜ä¸ºå“åº”å¼ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:get/get.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'../../../data/models/user_model.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'../../../data/providers/user_provider.dart'</span>;

<span class="hljs-comment">// çŠ¶æ€æšä¸¾</span>
<span class="hljs-keyword">enum</span> Status { loading, success, error }

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProfileController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetxController</span> </span>{
  <span class="hljs-keyword">final</span> UserProvider _api;
  
  <span class="hljs-comment">// æ„é€ æ³¨å…¥ï¼Œä¾¿äºæµ‹è¯•</span>
  ProfileController(<span class="hljs-keyword">this</span>._api);

  <span class="hljs-comment">// --- å“åº”å¼çŠ¶æ€ (State) ---</span>
  
  <span class="hljs-comment">// ä½¿ç”¨ Rx&lt;T&gt; åŒ…è£…å¯¹è±¡</span>
  <span class="hljs-keyword">final</span> user = Rxn&lt;User&gt;(); 
  <span class="hljs-comment">// é¡µé¢çŠ¶æ€</span>
  <span class="hljs-keyword">final</span> status = Status.loading.obs;

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onInit() {
    <span class="hljs-keyword">super</span>.onInit();
    fetchUserData(); <span class="hljs-comment">// åˆå§‹åŒ–æ—¶åŠ è½½æ•°æ®</span>
  }

  <span class="hljs-comment">// --- ä¸šåŠ¡æ–¹æ³• (Action) ---</span>
  
  <span class="hljs-keyword">void</span> fetchUserData() <span class="hljs-keyword">async</span> {
    status.value = Status.loading;
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ</span>
      <span class="hljs-keyword">await</span> Future.delayed(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">1</span>));
      
      <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> _api.getUser(<span class="hljs-string">'123'</span>);
      
      <span class="hljs-comment">// è¿™é‡Œçš„é€»è¾‘é€šå¸¸æ›´å¤æ‚ï¼Œéœ€åˆ¤æ–­ statusCode</span>
      <span class="hljs-keyword">if</span> (response.hasError) {
         status.value = Status.error;
      } <span class="hljs-keyword">else</span> {
         user.value = User.fromJson(response.body);
         status.value = Status.success;
      }
    } <span class="hljs-keyword">catch</span> (e) {
      status.value = Status.error;
    }
  }
}
</code></pre>
<h3 data-id="heading-6">4. Binding å±‚ï¼šä¾èµ–æ³¨å…¥èƒ¶æ°´</h3>
<p><code>app/modules/profile/bindings/profile_binding.dart</code></p>
<p>Binding çš„ä½œç”¨æ˜¯ï¼š<strong>â€œåªæœ‰å½“ç”¨æˆ·è¿›å…¥è¿™ä¸ªé¡µé¢æ—¶ï¼Œæ‰åˆ›å»º Controller å’Œ Providerï¼›ç¦»å¼€é¡µé¢æ—¶è‡ªåŠ¨é”€æ¯ã€‚â€</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:get/get.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'../controllers/profile_controller.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'../../../data/providers/user_provider.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProfileBinding</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Bindings</span> </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> dependencies() {
    <span class="hljs-comment">// 1. æ³¨å…¥æ•°æ®æä¾›è€…</span>
    Get.lazyPut(() =&gt; UserProvider());
    
    <span class="hljs-comment">// 2. æ³¨å…¥æ§åˆ¶å™¨ (Controller èƒ½æ‰¾åˆ°ä¸Šé¢çš„ UserProvider)</span>
    Get.lazyPut(() =&gt; ProfileController(Get.find()));
  }
}
</code></pre>
<h3 data-id="heading-7">5. View å±‚ï¼šUI è§†å›¾</h3>
<p><code>app/modules/profile/views/profile_view.dart</code></p>
<p>View å±‚å˜å¾—éå¸¸å¹²å‡€ï¼Œæ²¡æœ‰é€»è¾‘ï¼Œåªæœ‰å¸ƒå±€ã€‚<strong><code>Obx</code> æ˜¯è¿™é‡Œçš„é­”æ³•</strong>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:get/get.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'../controllers/profile_controller.dart'</span>;

<span class="hljs-comment">// ç»§æ‰¿ GetView&lt;T&gt; å¯ä»¥ç›´æ¥è®¿é—® controller å±æ€§</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProfileView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetView</span>&lt;<span class="hljs-title">ProfileController</span>&gt; </span>{
  <span class="hljs-keyword">const</span> ProfileView({Key? key}) : <span class="hljs-keyword">super</span>(key: key);

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">"ç”¨æˆ·è¯¦æƒ…"</span>)),
      body: Center(
        <span class="hljs-comment">// Obx ç›‘å¬ï¼šåªè¦ controller.status å˜åŒ–ï¼Œè¿™é‡Œå°±ä¼šé‡ç»˜</span>
        child: Obx(() {
          <span class="hljs-keyword">switch</span> (controller.status.value) {
            <span class="hljs-keyword">case</span> Status.loading:
              <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> CircularProgressIndicator();
            
            <span class="hljs-keyword">case</span> Status.error:
              <span class="hljs-keyword">return</span> Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  <span class="hljs-keyword">const</span> Icon(Icons.error, color: Colors.red, size: <span class="hljs-number">50</span>),
                  <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">10</span>),
                  ElevatedButton(
                    onPressed: controller.fetchUserData,
                    child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">"é‡è¯•"</span>),
                  )
                ],
              );
              
            <span class="hljs-keyword">case</span> Status.success:
              <span class="hljs-keyword">final</span> userData = controller.user.value;
              <span class="hljs-keyword">return</span> Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  CircleAvatar(radius: <span class="hljs-number">40</span>, backgroundImage: NetworkImage(userData!.avatar)),
                  <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">10</span>),
                  Text(userData.name, style: Theme.of(context).textTheme.headlineMedium),
                  ElevatedButton(
                    <span class="hljs-comment">// äº¤äº’é€»è¾‘éƒ½åœ¨ Controller é‡Œ</span>
                    onPressed: () =&gt; Get.snackbar(<span class="hljs-string">"æç¤º"</span>, <span class="hljs-string">"ç‚¹å‡»äº†ç¼–è¾‘"</span>),
                    child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">"ç¼–è¾‘èµ„æ–™"</span>),
                  )
                ],
              );
          }
        }),
      ),
    );
  }
}
</code></pre>
<h3 data-id="heading-8">6. Route å±‚ï¼šç»„è£…</h3>
<p><code>app/routes/app_pages.dart</code></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppPages</span> </span>{
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> routes = [
    GetPage(
      name: <span class="hljs-string">'/profile'</span>,
      page: () =&gt; <span class="hljs-keyword">const</span> ProfileView(),
      binding: ProfileBinding(), <span class="hljs-comment">// å…³é”®ï¼šåœ¨è¿™é‡Œç»‘å®šä¾èµ–</span>
    ),
  ];
}
</code></pre>
<hr/>
<h2 data-id="heading-9">ğŸŒŸ æ€»ç»“ï¼šè¿™å¥—æ¶æ„å¥½åœ¨å“ªï¼Ÿ</h2>
<ol>
<li><strong>å†…å­˜ç®¡ç†è‡ªåŠ¨åŒ–</strong>ï¼š
ç”±äºä½¿ç”¨äº† <code>Binding</code> å’Œ <code>Get.lazyPut</code>ï¼Œå½“ç”¨æˆ·ä» Profile é¡µè¿”å›ä¸Šä¸€é¡µæ—¶ï¼Œ<code>ProfileController</code> å’Œ <code>UserProvider</code> ä¼šè‡ªåŠ¨ä»å†…å­˜ä¸­ç§»é™¤ã€‚ä½ ä¸éœ€è¦æ‰‹åŠ¨å†™ <code>dispose()</code>ã€‚</li>
<li><strong>View å±‚æåº¦çº¯å‡€</strong>ï¼š
UI ä»£ç ä¸­æ²¡æœ‰ <code>if(isLoading) ... else ...</code> çš„ä¸šåŠ¡åˆ¤æ–­é€»è¾‘ï¼Œä¹Ÿæ²¡æœ‰ API è¯·æ±‚ä»£ç ã€‚UI åªè´Ÿè´£â€œæ ¹æ®çŠ¶æ€æ˜¾ç¤ºç»„ä»¶â€ã€‚</li>
<li><strong>æµ‹è¯•å‹å¥½</strong>ï¼š
å› ä¸º Controller çš„ä¾èµ–ï¼ˆProviderï¼‰æ˜¯é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥çš„ï¼Œå†™å•å…ƒæµ‹è¯•æ—¶ï¼Œä½ å¯ä»¥è½»æ¾ mock ä¸€ä¸ª <code>UserProvider</code> ä¼ è¿›å»ã€‚</li>
</ol>
<hr/>
<blockquote>
<p><strong>å†™åœ¨æœ€å</strong>ï¼šæ¶æ„æ²¡æœ‰ç»å¯¹çš„â€œæœ€å¥½â€ï¼Œåªæœ‰â€œæœ€é€‚åˆâ€ã€‚å¯¹äºè¿½æ±‚å¼€å‘é€Ÿåº¦å’Œè¿è¡Œæ•ˆç‡çš„ä¸­å°å‹åŠä¼ä¸šçº§ Flutter é¡¹ç›®ï¼ŒGetX + Obx æ˜¯ä¸€å¥—æ€§ä»·æ¯”æé«˜çš„ç»„åˆæ‹³ã€‚å¸Œæœ›è¿™ç¯‡å®æˆ˜æŒ‡å—èƒ½å¯¹ä½ çš„é¡¹ç›®æ¶æ„æœ‰æ‰€å¯å‘ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agent ç ”å‘ï¼šReAct Agent]]></title>    <link>https://juejin.cn/post/7586491717874057235</link>    <guid>https://juejin.cn/post/7586491717874057235</guid>    <pubDate>2025-12-22T16:45:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586491717874057235" data-draft-id="7586491717873991699" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agent ç ”å‘ï¼šReAct Agent"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-12-22T16:45:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ’¸007"/> <meta itemprop="url" content="https://juejin.cn/user/2101921959910183"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agent ç ”å‘ï¼šReAct Agent
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2101921959910183/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ’¸007
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T16:45:07.000Z" title="Mon Dec 22 2025 16:45:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    57
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ReAct ä»‹ç»</h2>
<h3 data-id="heading-1">è¿ä½œæµç¨‹</h3>
<p>ç”¨ä¸€å¥è¯ç®€å•æè¿°ï¼šReAct æ™ºèƒ½ä½“æ˜¯åŸºäº<code>æ¨ç†</code>å’Œ<code>è¡ŒåŠ¨</code>åé¦ˆçš„æ¡†æ¶ï¼Œé€šè¿‡å¾ªç¯è°ƒç”¨ LLM æ€è€ƒå¾—åˆ°æ¦‚ç‡çº æ­£ç»“æœã€‚</p>
<p>ç†è®ºå­¦ä¹ å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ibm.com%2Fcn-zh%2Fthink%2Ftopics%2Freact-agent" target="_blank" title="https://www.ibm.com/cn-zh/think/topics/react-agent" ref="nofollow noopener noreferrer">www.ibm.com/cn-zh/thinkâ€¦</a></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ä¼ªä»£ç </span>
<span class="hljs-function">def <span class="hljs-title">ReAct</span><span class="hljs-params">(query)</span> </span>{
    call: Agent
    Thought
    call: Tool
    Action

    <span class="hljs-keyword">if</span> Action === <span class="hljs-string">'Finish'</span>
        Answer
    <span class="hljs-keyword">else</span>
        loop: ReAct
}
</code></pre>
<h2 data-id="heading-2">ReAct Agent å®ç°è¦ç‚¹</h2>
<blockquote>
<p>æ­¤ä¾‹å­æ¥è‡ªäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fdatawhalechina.github.io%2Fhello-agents%2F%23%2F.%2F%25E5%2589%258D%25E8%25A8%2580" target="_blank" title="https://datawhalechina.github.io/hello-agents/#/./%E5%89%8D%E8%A8%80" ref="nofollow noopener noreferrer">hello_agents å­¦ä¹ æ–‡æ¡£</a>ï¼Œæœ‰å…´è¶£çš„åŒå­¦ä¹Ÿå¯ä»¥é˜…è¯»</p>
<p>ä¸»è¦æ˜¯æ€ç»´å˜åŒ–ï¼šé¢å‘åœºæ™¯é€‰æ‹©åˆé€‚æ¨¡å‹-&gt;æ¨¡å‹å‹å¥½äº¤äº’æ–¹å¼-&gt;å¾—åˆ°åˆç†ç­”æ¡ˆï¼Œåœ¨ ReAct æ¨¡å¼ä¸­ä¸»è¦æ˜¯ Prompt ç­–ç•¥å’Œä¸Šä¸‹æ–‡çš„ä¸°å¯Œåº¦ä¼šå½±å“è°ƒç”¨æˆæœ¬å’Œç»“æœã€‚</p>
</blockquote>
<ul>
<li>Prompt è§„åˆ’å’Œçº¦æŸ
<ul>
<li>æ˜ç¡®çº¦å®šæ€è€ƒå’Œè¡ŒåŠ¨æ ‡è®°ï¼šç”¨äºç»„åˆ LLM æ€ç»´é“¾</li>
<li>æ˜ç¡®æ¨ç†ç»“æŸæ ‡è®°ï¼šç”¨äºä¼˜åŒ– Prompt å†…å®¹</li>
<li>æ˜ç¡®æ¨ç†è®°å¿†æ ‡è®°ï¼šç”¨äºä¸°å¯Œ Prompt å†…å®¹</li>
<li>æ˜ç¡®æ¨ç†å¤–éƒ¨è°ƒç”¨èƒ½åŠ›æè¿°ï¼šç”¨äºæå‡ LLM å¤„ç†å‡†ç¡®æ€§</li>
</ul>
</li>
<li>çµæ´»åˆ‡æ¢æ¨¡å‹ã€Prompt ç­–ç•¥ä¼˜åŒ–ã€å·¥å…·å¢å¼ºï¼Œæå‡å¾ªç¯è°ƒç”¨æ•ˆæœï¼ˆè¿™ä¸ªå¯¹ä¼ä¸šæˆæœ¬æ¯”è¾ƒé‡è¦ï¼‰</li>
</ul>
<h2 data-id="heading-3">å®Œæ•´ä¾‹å­å®ç°</h2>
<blockquote>
<p>æ•´ä½“åŸºäº OpenRouter è°ƒç”¨ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥é€‰ä¸ªå…è´¹æ¨¡å‹è·‘ä¸€ä¸‹ã€‚</p>
</blockquote>
<ul>
<li>LLM Client</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">OpenAI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"openai"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LLM</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">client</span>: <span class="hljs-title class_">OpenAI</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">modelId</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">apiKey: <span class="hljs-built_in">string</span>, modelId: <span class="hljs-built_in">string</span> = <span class="hljs-string">"mistralai/devstral-2512:free"</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({
      <span class="hljs-attr">apiKey</span>: apiKey,
      <span class="hljs-attr">baseURL</span>: <span class="hljs-string">"https://openrouter.ai/api/v1"</span>,
      <span class="hljs-attr">dangerouslyAllowBrowser</span>: <span class="hljs-literal">true</span>,
    });
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">modelId</span> = modelId;
  }

  <span class="hljs-title function_">setModel</span>(<span class="hljs-params">modelId: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">modelId</span> = modelId;
  }

  <span class="hljs-title function_">getModel</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">modelId</span>;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params">messages: OpenAI.Chat.Completions.ChatCompletionMessageParam[]</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
      <span class="hljs-attr">model</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">modelId</span>,
      <span class="hljs-attr">messages</span>: messages,
    });
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">stream</span>(<span class="hljs-params">messages: OpenAI.Chat.Completions.ChatCompletionMessageParam[]</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
      <span class="hljs-attr">model</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">modelId</span>,
      <span class="hljs-attr">messages</span>: messages,
      <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span>,
    });
  }
}
</code></pre>
<ul>
<li>ReActAgent</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {<span class="hljs-variable constant_">LLM</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">"./LLM.ts"</span>;
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">ToolExecutor</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">"./ToolExecutor.ts"</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">PromptTplProps</span> = {
    <span class="hljs-attr">question</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">history</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">tools</span>: <span class="hljs-built_in">string</span>[];
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getPromptTpl</span> = (<span class="hljs-params">props: PromptTplProps</span>) =&gt; {
    <span class="hljs-keyword">const</span> {
        tools,
        question,
        history,
    } = props;

    <span class="hljs-keyword">return</span> <span class="hljs-string">`
        è¯·æ³¨æ„ï¼Œä½ æ˜¯ä¸€ä¸ªæœ‰èƒ½åŠ›è°ƒç”¨å¤–éƒ¨å·¥å…·çš„æ™ºèƒ½åŠ©æ‰‹ã€‚
        
        èƒ½å¤Ÿä½¿ç”¨çš„å·¥å…·å¦‚ä¸‹ï¼š
        <span class="hljs-subst">${tools.join(<span class="hljs-string">'\n'</span>)}</span>
        
        è¯·ä¸¥æ ¼æŒ‰ç…§ä¸‹é¢çš„æ ¼å¼è¿›è¡Œå›å¤ï¼š
        
        Thought: ä½ çš„æ€è€ƒè¿‡ç¨‹ç”¨äºåˆ†æé—®é¢˜ã€æ‹†è§£ä»»åŠ¡å’Œè§„åˆ’ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚
        Action: ä½ å†³å®šé‡‡å–çš„è¡Œä¸ºï¼Œå¿…é¡»æ˜¯ä»¥ä¸‹æ ¼å¼ä¹‹ä¸€ï¼š
        - {toolName}[{toolInput}]: è°ƒç”¨ä¸€ä¸ªå¯ç”¨å·¥å…·ã€‚
        - Finish[æœ€ç»ˆç­”æ¡ˆ]: å½“ä½ è®¤ä¸ºå·²ç»è·å¾—æœ€ç»ˆç­”æ¡ˆæ—¶ã€‚
        - å½“ä½ æ”¶é›†åˆ°è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œèƒ½å¤Ÿå›ç­”ç”¨æˆ·çš„æœ€ç»ˆé—®é¢˜æ—¶ï¼Œä½ å¿…é¡»åœ¨Action:å­—æ®µåä½¿ç”¨ finish(answer="...") æ¥è¾“å‡ºæœ€ç»ˆç­”æ¡ˆã€‚
        
        ç°åœ¨ï¼Œè¯·å¼€å§‹è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š
        Question: <span class="hljs-subst">${question}</span>
        History: <span class="hljs-subst">${history}</span>
    `</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReActAgent</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">history</span>: <span class="hljs-built_in">string</span>[];

    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
        <span class="hljs-comment">// è°ƒç”¨çš„ llm</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> llm: LLM,
        <span class="hljs-comment">// æœ€å¤šå¾ªç¯æ€è€ƒå‡ æ¬¡</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> maxSteps: <span class="hljs-built_in">number</span> = <span class="hljs-number">3</span>,
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> toolExecutor: ToolExecutor,
    </span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span> = [];
    }

    <span class="hljs-keyword">async</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">question: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-keyword">let</span> currentStep = <span class="hljs-number">0</span>;

        <span class="hljs-keyword">while</span> (currentStep &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxSteps</span>) {
            currentStep++;
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`-----ç¬¬<span class="hljs-subst">${currentStep}</span>æ­¥éª¤-------`</span>);

            <span class="hljs-keyword">const</span> history = <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>);
            <span class="hljs-keyword">const</span> tools = <span class="hljs-variable language_">this</span>.<span class="hljs-property">toolExecutor</span>.<span class="hljs-title function_">getAvailableTools</span>();
            <span class="hljs-keyword">const</span> prompt = <span class="hljs-title function_">getPromptTpl</span>({
                tools,
                question,
                history,
            });

            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'prompt:'</span>, prompt);

            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> responseText = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">llm</span>.<span class="hljs-title function_">chat</span>([{
                    <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>,
                    <span class="hljs-attr">content</span>: prompt,
                }]);

                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤§æ¨¡å‹è¿”å›ï¼š'</span>, responseText);

                <span class="hljs-keyword">const</span> {thought, action} = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseOutput</span>(responseText.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span> ?? <span class="hljs-string">''</span>);

                <span class="hljs-keyword">if</span> (thought) {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Thoughtï¼š'</span>, thought);
                }
                <span class="hljs-keyword">if</span> (!action) {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æ¨¡å‹æ²¡æœ‰è¿”å›å…·ä½“çš„ Actionï¼Œæµç¨‹ç»ˆæ­¢'</span>);
                    <span class="hljs-keyword">break</span>;
                }

                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Action:'</span>, action);

                <span class="hljs-keyword">if</span> (action.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'Finish'</span>)) {
                    <span class="hljs-keyword">const</span> answer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseFinishAnswer</span>(action);
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€ç»ˆç­”æ¡ˆ: '</span>, answer);
                    <span class="hljs-keyword">return</span> answer;
                }

                <span class="hljs-keyword">const</span> [toolName, toolInput] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseAction</span>(action);
                <span class="hljs-keyword">if</span> (!toolName || !toolInput) {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æ— æ³•è§£æ Action:'</span>, action);
                    <span class="hljs-keyword">continue</span>;
                }

                <span class="hljs-keyword">const</span> tool = <span class="hljs-variable language_">this</span>.<span class="hljs-property">toolExecutor</span>.<span class="hljs-title function_">getTool</span>(toolName);

                <span class="hljs-keyword">let</span> observation = <span class="hljs-string">''</span>;
                <span class="hljs-keyword">if</span> (tool) {
                    observation = tool.<span class="hljs-title function_">fn</span>(toolInput) <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;
                }
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Observation:'</span>, observation);

                <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">`Action:<span class="hljs-subst">${action}</span>`</span>);
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">`Observation:<span class="hljs-subst">${observation}</span>`</span>)
            } <span class="hljs-keyword">catch</span> (err) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
            }
        }

        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å·²è¾¾åˆ°æœ€å¤§æ­¥æ•°'</span>);
    }

    <span class="hljs-title function_">parseFinishAnswer</span>(<span class="hljs-params">action: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-keyword">const</span> answer = action.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/Finish[(.*)]/</span>);
        <span class="hljs-keyword">if</span> (answer &amp;&amp; answer.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">return</span> answer[<span class="hljs-number">1</span>];
        }
        <span class="hljs-keyword">return</span> <span class="hljs-string">'-'</span>;
    }

    <span class="hljs-title function_">parseOutput</span>(<span class="hljs-params">str: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-keyword">const</span> thought = str.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/Thought:(.*)/</span>);
        <span class="hljs-keyword">const</span> action = str.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/Action:(.*)/</span>);

        <span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = {
            <span class="hljs-attr">thought</span>: <span class="hljs-built_in">string</span>;
            <span class="hljs-attr">action</span>: <span class="hljs-built_in">string</span>;
        };
        <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Result</span> = {
            <span class="hljs-attr">thought</span>: <span class="hljs-string">''</span>,
            <span class="hljs-attr">action</span>: <span class="hljs-string">''</span>,
        };
        <span class="hljs-keyword">if</span> (thought &amp;&amp; thought.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span>) {
            result.<span class="hljs-property">thought</span> = thought[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>();
        }
        <span class="hljs-keyword">if</span> (action &amp;&amp; action.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span>) {
            result.<span class="hljs-property">action</span> = action[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>();
        }
        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-title function_">parseAction</span>(<span class="hljs-params">str: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-keyword">const</span> info = str.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/(\w+)[(.*)]/</span>);
        <span class="hljs-keyword">if</span> (info &amp;&amp; info.<span class="hljs-property">length</span> &gt; <span class="hljs-number">2</span>) {
            <span class="hljs-comment">// info[0] is the full match, e.g., "calc_sum[1,1]"</span>
            <span class="hljs-comment">// info[1] is the first capture group (the tool name), e.g., "calc_sum"</span>
            <span class="hljs-comment">// info[2] is the second capture group (the tool input), e.g., "1,1"</span>
            <span class="hljs-keyword">return</span> [info[<span class="hljs-number">1</span>], info[<span class="hljs-number">2</span>]];
        }
        <span class="hljs-keyword">return</span> [];
    }
}
</code></pre>
<ul>
<li>å·¥å…·æ³¨å†Œå’Œæ‰§è¡Œ</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Tool</span> = {
    <span class="hljs-attr">desc</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">fn</span>: <span class="hljs-function">(<span class="hljs-params">arg: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">unknown</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolExecutor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">tools</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Tool</span>&gt;;

    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tools</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    }

    <span class="hljs-title function_">register</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, desc: <span class="hljs-built_in">string</span>, fn: (arg: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">unknown</span></span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‚¨æ³¨å†Œçš„å·¥å…·ï¼š<span class="hljs-subst">${name}</span>, <span class="hljs-subst">${desc}</span>`</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tools</span>.<span class="hljs-title function_">set</span>(name, {
            desc,
            fn,
        } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Tool</span>);
    }

    <span class="hljs-title function_">getTool</span>(<span class="hljs-attr">toolName</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Tool</span> | <span class="hljs-literal">undefined</span> {
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">tools</span>.<span class="hljs-title function_">has</span>(toolName)) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">tools</span>.<span class="hljs-title function_">get</span>(toolName);
    }

    <span class="hljs-title function_">getAvailableTools</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">string</span>[] = [];
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tools</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">tool, name</span>) =&gt;</span> {
            result.<span class="hljs-title function_">push</span>(<span class="hljs-string">`<span class="hljs-subst">${name}</span>: <span class="hljs-subst">${tool.desc}</span>`</span>);
        });
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å¼€å§‹ï¼Œç”¨ n8n è®¾è®¡å¯æ‰©å±•çš„è‡ªåŠ¨åŒ–å·¥ä½œæµ]]></title>    <link>https://juejin.cn/post/7586983243926618150</link>    <guid>https://juejin.cn/post/7586983243926618150</guid>    <pubDate>2025-12-24T08:08:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586983243926618150" data-draft-id="7586983243926601766" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å¼€å§‹ï¼Œç”¨ n8n è®¾è®¡å¯æ‰©å±•çš„è‡ªåŠ¨åŒ–å·¥ä½œæµ"/> <meta itemprop="keywords" content="è‡ªåŠ¨åŒ–è¿ç»´,DevOps"/> <meta itemprop="datePublished" content="2025-12-24T08:08:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DigitalOcean"/> <meta itemprop="url" content="https://juejin.cn/user/2031553217827127"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å¼€å§‹ï¼Œç”¨ n8n è®¾è®¡å¯æ‰©å±•çš„è‡ªåŠ¨åŒ–å·¥ä½œæµ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2031553217827127/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DigitalOcean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T08:08:34.000Z" title="Wed Dec 24 2025 08:08:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è‡ªåŠ¨åŒ–å·²ç»æˆä¸ºç°ä»£è½¯ä»¶å¼€å‘ä¸è¿ç»´ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚ä»åœ¨ä¸åŒå·¥å…·ä¹‹é—´åŒæ­¥æ•°æ®ï¼Œåˆ°è§¦å‘å¤æ‚çš„ä¸šåŠ¡æµç¨‹ï¼Œå›¢é˜Ÿè¶Šæ¥è¶Šä¾èµ–å·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°æ¥å‡å°‘äººå·¥æ“ä½œä¸é”™è¯¯ã€‚n8næ˜¯ä¸€æ¬¾å¼ºå¤§çš„å¼€æºå·¥ä½œæµè‡ªåŠ¨åŒ–å·¥å…·ï¼Œå¯ç”¨äºè¿æ¥å„ç±»åº”ç”¨ã€æœåŠ¡å’Œ APIï¼Œæ„å»ºçµæ´»ã€å¯æ‰©å±•çš„è‡ªåŠ¨åŒ–æµç¨‹ã€‚</p>
<p>ä¸è®¸å¤šæ— ä»£ç æˆ–ä½ä»£ç è‡ªåŠ¨åŒ–å·¥å…·ä¸åŒï¼Œn8n å¯¹å¼€å‘è€…éå¸¸å‹å¥½ï¼Œé«˜åº¦å¯å®šåˆ¶ï¼Œå¹¶ä¸”æ”¯æŒè‡ªæ‰˜ç®¡ï¼Œè®©ä½ èƒ½å¤Ÿå®Œå…¨æŒæ§è‡ªå·±çš„æ•°æ®ä¸åŸºç¡€è®¾æ–½ã€‚æ— è®ºä½ æ˜¯ç‹¬ç«‹å¼€å‘è€…ã€åˆåˆ›å›¢é˜Ÿï¼Œè¿˜æ˜¯å¤§å‹ä¼ä¸šï¼Œn8n éƒ½å¯ä»¥æˆä¸ºä½ è‡ªåŠ¨åŒ–ä½“ç³»çš„æ ¸å¿ƒæ”¯æŸ±ã€‚</p>
<h2 data-id="heading-0">æ–‡ç« æ ¸å¿ƒè¦ç‚¹</h2>
<ul>
<li>n8n æ˜¯ä¸€æ¬¾å¼€æºå·¥ä½œæµè‡ªåŠ¨åŒ–å·¥å…·ï¼Œé€šè¿‡å¯è§†åŒ–æµç¨‹è¿æ¥åº”ç”¨ã€API ä¸æœåŠ¡ã€‚</li>
<li>æ”¯æŒè‡ªæ‰˜ç®¡ï¼Œé€‚åˆæ³¨é‡éšç§ä¸åˆè§„çš„ä¼ä¸šçº§åœºæ™¯ã€‚</li>
<li>æ”¯æŒå¤æ‚é€»è¾‘ã€åˆ†æ”¯æ§åˆ¶ã€é”™è¯¯å¤„ç†ä»¥åŠè‡ªå®šä¹‰ä»£ç ã€‚</li>
<li>éå¸¸é€‚åˆå¼€å‘è€…ã€DevOps å›¢é˜Ÿä»¥åŠ AI / ML å·¥ä½œæµã€‚</li>
<li>ç›¸æ¯” Zapier ç­‰å·¥å…·ï¼Œn8n æ›´çµæ´»ï¼Œé•¿æœŸä½¿ç”¨æˆæœ¬æ›´ä½ã€‚</li>
</ul>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯ n8nï¼Ÿ</h2>
<p>n8n æ˜¯ä¸€ä¸ªåŸºäºèŠ‚ç‚¹ï¼ˆnodeï¼‰çš„å¼€æºå·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°ï¼Œå·¥ä½œæµä¸­çš„æ¯ä¸€æ­¥éƒ½ä»¥ä¸€ä¸ªèŠ‚ç‚¹è¡¨ç¤ºã€‚å®ƒä¸ Zapier ç­‰å·¥å…·ç±»ä¼¼ï¼Œä½†åœ¨çµæ´»æ€§å’Œå¯¹é«˜çº§ã€AI é©±åŠ¨è‡ªåŠ¨åŒ–æµç¨‹çš„æ”¯æŒæ–¹é¢æ›´å¼ºã€‚å¦‚æœä½ åœ¨æ—¥å¸¸å·¥ä½œä¸­è¿˜æ²¡æœ‰ä½¿ç”¨ AI è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå¾ˆå¯èƒ½æ­£åœ¨é”™å¤±å·¨å¤§çš„æ•ˆç‡æå‡æœºä¼šã€‚</p>
<p>é€šè¿‡ n8nï¼Œä½ å¯ä»¥è½»æ¾è¿æ¥å„ç§åº”ç”¨ã€æœåŠ¡ä¸ APIã€‚å€ŸåŠ© DigitalOcean çš„ä¸€é”®åº”ç”¨ï¼ˆ1-Click Appï¼‰ï¼Œä½ å¯ä»¥åœ¨å®‰å…¨ã€å¯æ‰©å±•çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aidroplet.com%2Fproduct%2Fcloudcpu%2F" target="_blank" title="https://www.aidroplet.com/product/cloudcpu/" ref="nofollow noopener noreferrer">DigitalOcean Droplet äº‘æœåŠ¡å™¨</a>ä¸Šå¿«é€Ÿéƒ¨ç½² n8nï¼Œæ— éœ€å¤æ‚é…ç½®ã€‚å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨è®©ä½ èƒ½å¤Ÿé«˜æ•ˆåˆ›å»ºè‡ªå®šä¹‰è‡ªåŠ¨åŒ–æµç¨‹ã€‚</p>
<p>æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥è§¦å‘åŠ¨ä½œã€å¤„ç†å’Œè½¬æ¢æ•°æ®ã€è°ƒç”¨ API æˆ–æ‰§è¡Œé€»è¾‘ï¼Œä»è€Œæ„å»ºç«¯åˆ°ç«¯çš„å¼ºå¤§è‡ªåŠ¨åŒ–æµç¨‹ã€‚</p>
<p>n8n å¯ä»¥ç”¨äºå„ç§è‡ªåŠ¨åŒ–åœºæ™¯ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>è‡ªåŠ¨åŒ–é‡å¤æ€§ä»»åŠ¡</li>
<li>é›†æˆå¤šä¸ªåº”ç”¨</li>
<li>ç¼–æ’å¤æ‚çš„åç«¯å·¥ä½œæµ</li>
<li>æ„å»ºè‡ªåŠ¨åŒ–æµæ°´çº¿ï¼Œè€Œæ— éœ€å¼€å‘å®Œæ•´åº”ç”¨</li>
</ul>
<h2 data-id="heading-2">n8n çš„å·¥ä½œæ–¹å¼ï¼ˆHow n8n Worksï¼‰</h2>
<p>n8n çš„å·¥ä½œæµä»¥å¯è§†åŒ–æ–¹å¼æ„å»ºï¼Œå¹¶æŒ‰é¡ºåºæˆ–æ¡ä»¶æ‰§è¡Œã€‚æˆåŠŸç™»å½•åï¼Œä½ å¯ä»¥ä»é›¶å¼€å§‹åˆ›å»ºè‡ªåŠ¨åŒ–æµç¨‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å°è¯• AI å·¥ä½œæµã€‚</p>
<h2 data-id="heading-3">æ ¸å¿ƒç»„ä»¶ï¼ˆCore Componentsï¼‰</h2>
<h3 data-id="heading-4">è§¦å‘èŠ‚ç‚¹ï¼ˆTrigger Nodesï¼‰</h3>
<p>è§¦å‘èŠ‚ç‚¹ç”¨äºå¯åŠ¨å·¥ä½œæµã€‚ä½ å¯ä»¥é€‰æ‹©ä¸åŒç±»å‹çš„è§¦å‘å™¨ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å¯åŠ¨ä¸€ä¸ªå·¥ä½œæµ</li>
<li>åº”ç”¨äº‹ä»¶è§¦å‘</li>
<li>å®šæ—¶è§¦å‘</li>
<li>èŠå¤©æ¶ˆæ¯è§¦å‘</li>
</ul>
<p>ä½ å¯ä»¥å°†å…¶è§†ä¸ºå·¥ä½œæµçš„èµ·ç‚¹ï¼Œä¸€æ—¦è§¦å‘å™¨è¢«æ¿€æ´»ï¼Œåç»­æ‰€æœ‰å…³è”æ“ä½œéƒ½ä¼šè¢«æ‰§è¡Œã€‚</p>
<p><img src="https://www.digitaloceans.cn/wp-content/uploads/2025/12/image-11-626x1024.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">åŠ¨ä½œèŠ‚ç‚¹ï¼ˆAction Nodesï¼‰</h3>
<p>åŠ¨ä½œèŠ‚ç‚¹æ˜¯å·¥ä½œæµä¸­çš„â€œæ‰§è¡Œè€…â€ï¼Œç”¨äºå®Œæˆå…·ä½“æ“ä½œï¼Œä¾‹å¦‚å‘é€æ•°æ®ã€åˆ›å»ºè®°å½•ã€æ›´æ–°æ•°æ®åº“ã€è°ƒç”¨ API æˆ–è§¦å‘å¤–éƒ¨æœåŠ¡ã€‚</p>
<p>è§¦å‘èŠ‚ç‚¹è´Ÿè´£å¯åŠ¨æµç¨‹ï¼ŒåŠ¨ä½œèŠ‚ç‚¹è´Ÿè´£çœŸæ­£å¹²æ´»ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<ul>
<li>å‘é€é‚®ä»¶</li>
<li>åœ¨è¡¨å•æäº¤ååˆ›å»ºè®°å½•</li>
<li>å°†è¡¨å•æ•°æ®å†™å…¥ Excel</li>
<li>åˆ›å»ºæ•°æ®åº“è®°å½•</li>
<li>è°ƒç”¨ REST API</li>
</ul>
<h3 data-id="heading-6">é€»è¾‘èŠ‚ç‚¹ï¼ˆLogic Nodesï¼‰</h3>
<p>é€»è¾‘èŠ‚ç‚¹ç”¨äºæ§åˆ¶å·¥ä½œæµçš„è¡Œä¸ºï¼Œå†³å®šèµ°å“ªæ¡è·¯å¾„ã€å¦‚ä½•ç»„åˆæ•°æ®ï¼Œä»¥åŠæŸäº›æ­¥éª¤ä½•æ—¶æ‰§è¡Œã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<ul>
<li>IF æ¡ä»¶</li>
<li>Switch</li>
<li>Merge</li>
<li>Filter</li>
<li>å¾ªç¯ï¼ˆLoopï¼‰</li>
</ul>
<p><img src="https://www.digitaloceans.cn/wp-content/uploads/2025/12/image-10-1024x1004.png" alt="" loading="lazy"/></p>
<p>ç¤ºä¾‹é€»è¾‘ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">å¦‚æœ</span> <span class="hljs-string">orderAmount</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">5000</span> <span class="hljs-string">â†’</span> <span class="hljs-string">å‘é€é«˜ç«¯å®¢æˆ·é‚®ä»¶</span>  
<span class="hljs-string">å¦åˆ™</span> <span class="hljs-string">â†’</span> <span class="hljs-string">å‘é€æ™®é€šé‚®ä»¶</span>
</code></pre>
<p>å®ƒçš„å·¥ä½œæ–¹å¼æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>è·å–è¾“å…¥æ•°æ®</li>
<li>åˆ¤æ–­æ¡ä»¶</li>
<li>å°†å·¥ä½œæµæ‹†åˆ†ä¸º True / False ä¸¤æ¡è·¯å¾„</li>
</ul>
<h3 data-id="heading-7">ä»£ç èŠ‚ç‚¹ï¼ˆCode Nodesï¼‰</h3>
<p>ä»£ç èŠ‚ç‚¹å…è®¸ä½ åœ¨å·¥ä½œæµä¸­ç¼–å†™è‡ªå®šä¹‰ JavaScript æˆ– Pythonã€‚å½“å†…ç½®èŠ‚ç‚¹æ— æ³•æ»¡è¶³å¤æ‚é€»è¾‘æˆ–æ•°æ®å¤„ç†éœ€æ±‚æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ä»£ç èŠ‚ç‚¹ã€‚</p>
<p>é€‚ç”¨äºï¼š</p>
<ul>
<li>æ•°æ®è½¬æ¢</li>
<li>è‡ªå®šä¹‰é€»è¾‘</li>
<li>é«˜çº§è®¡ç®—</li>
</ul>
<p><strong>ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ä»£ç èŠ‚ç‚¹ï¼Ÿ</strong></p>
<ul>
<li>Set èŠ‚ç‚¹ä¸å¤Ÿç”¨</li>
<li>IF / Switch éš¾ä»¥è¡¨è¾¾å¤æ‚æ¡ä»¶</li>
<li>éœ€è¦å¾ªç¯ã€æ•°å­¦è®¡ç®—æˆ–å¤æ‚æ ¼å¼åŒ–</li>
<li>API è¿”å›çš„æ•°æ®éœ€è¦å¤§é‡é‡æ„</li>
</ul>
<p>å¦‚æœ Set æˆ– IF èŠ‚ç‚¹å°±èƒ½è§£å†³é—®é¢˜ï¼Œåº”å°½é‡é¿å…ä½¿ç”¨ä»£ç èŠ‚ç‚¹ï¼ˆè¶Šç®€å•çš„æµç¨‹è¶Šæ˜“ç»´æŠ¤ï¼‰ã€‚</p>
<p>ç¤ºä¾‹æ•°æ®ç»“æ„ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"json"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Shaoni"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"score"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">82</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-8">åœ¨ DigitalOcean ä¸Šå¿«é€Ÿéƒ¨ç½² n8n</h2>
<p>1ã€ç™»å½•å¹¶åˆ›å»ºæ–°ç”¨æˆ·ï¼Œå¦‚æœä½ æ²¡æœ‰ DigitalOcean çš„è´¦å·ï¼Œå¯è®¿é—® digitalocean.com æ³¨å†Œï¼Œä»…éœ€é‚®ç®±å’Œä¿¡ç”¨å¡ï¼ˆæˆ–æ”¯ä»˜å®ï¼‰å³å¯ã€‚å¦‚æ³¨å†Œé‡åˆ°é—®é¢˜ï¼Œå¯å’¨è¯¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aidroplet.com%2F" target="_blank" title="https://www.aidroplet.com/" ref="nofollow noopener noreferrer">DigitalOcean ä¸­å›½åŒºç‹¬å®¶æˆ˜ç•¥åˆä½œä¼™ä¼´å“æ™®äº‘ AI Dropletï¼ˆaidroplet.comï¼‰</a>ã€‚</p>
<p>2ã€ä»¥ root ç”¨æˆ· SSH ç™»å½• Dropletï¼Œå…·ä½“å¯å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.aidroplet.com%2Ftutorials%2Frun-deepseek-r1-h100%2F" target="_blank" title="https://blog.aidroplet.com/tutorials/run-deepseek-r1-h100/" ref="nofollow noopener noreferrer">å“æ™®äº‘å®˜ç½‘æ›´å¤šæ•™ç¨‹</a></p>
<p>3ã€åˆ›å»ºé root ç”¨æˆ·å¹¶æˆäºˆ sudo æƒé™</p>
<pre><code class="hljs language-xml" lang="xml">adduser <span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span>
usermod -aG sudo <span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span>
</code></pre>
<p>4ã€é…ç½® SSH key å¹¶ä½¿ç”¨æ–°ç”¨æˆ·ç™»å½•</p>
<p>5ã€å…‹éš† n8n Docker é…ç½®</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/n8n-io/n8n-docker-caddy.git
<span class="hljs-built_in">cd</span> n8n-docker-caddy
</code></pre>
<p>6ã€åˆ›å»º Docker å·</p>
<pre><code class="hljs language-lua" lang="lua">sudo docker volume <span class="hljs-built_in">create</span> caddy_data
sudo docker volume <span class="hljs-built_in">create</span> n8n_data
</code></pre>
<p>7ã€é…ç½® DNS ä¸é˜²ç«å¢™</p>
<pre><code class="hljs">sudo ufw allow 80
sudo ufw allow 443
</code></pre>
<p>8ã€é…ç½® n8n ä¸ Caddy</p>
<pre><code class="hljs language-bash" lang="bash">nano .<span class="hljs-built_in">env</span>
nano caddy_config/Caddyfile
</code></pre>
<p>9ã€å¯åŠ¨ n8n</p>
<pre><code class="hljs">sudo docker compose up -d
</code></pre>
<p>10ã€åœ¨æµè§ˆå™¨ä¸­è®¿é—®ä½ çš„å­åŸŸåå¹¶ç™»å½•ï¼Œå³å¯è·å¾—ä¸€ä¸ªå¸¦ HTTPS ä¸æŒä¹…åŒ–æ•°æ®çš„è‡ªæ‰˜ç®¡ n8n å®ä¾‹ã€‚</p>
<h2 data-id="heading-9"><strong>åœ¨ n8n ä¸­ä½¿ç”¨é¢„æ„å»ºçš„å·¥ä½œæµ</strong>â€‹<strong>æ¨¡æ¿</strong></h2>
<p><strong>è®¿é—® n8n ç½‘ç«™ï¼š</strong> å‰å¾€ n8n å®˜ç½‘ï¼Œæ‰“å¼€"äº§å“"ä¸‹æ‹‰èœå•ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å°†æ‰¾åˆ°å¤§é‡é¢„æ„å»ºçš„å·¥ä½œæµè‡ªåŠ¨åŒ–æ¨¡æ¿ã€‚</p>
<p><img src="https://www.digitaloceans.cn/wp-content/uploads/2025/12/image-12-1024x611.png" alt="" loading="lazy"/></p>
<p><strong>æµè§ˆæˆ–æœç´¢æ¨¡æ¿ï¼š</strong> æ‚¨å¯ä»¥æ»šåŠ¨æµè§ˆå¯ç”¨çš„æ¨¡æ¿ï¼Œæˆ–ä½¿ç”¨æœç´¢æ æŸ¥æ‰¾ä¸æ‚¨ç‰¹å®šç”¨ä¾‹åŒ¹é…çš„æ¨¡æ¿ã€‚</p>
<p><strong>é€‰æ‹©æ¨¡æ¿ï¼š</strong> ç‚¹å‡»ä¸€ä¸ªæ¨¡æ¿ä»¥æŸ¥çœ‹å…¶è¯¦ç»†ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œåä¸ºâ€œä½¿ç”¨ Telegramã€Gemini AI å’Œ Google Sheets çš„è¥å…»è¿½è¸ªä¸é¤é£Ÿè®°å½•å™¨â€çš„æ¨¡æ¿ã€‚</p>
<p><img src="https://www.digitaloceans.cn/wp-content/uploads/2025/12/image-8-1024x548.png" alt="" loading="lazy"/></p>
<p><strong>æŸ¥çœ‹è¿æ¥çš„åº”ç”¨ç¨‹åºï¼š</strong> æ¯ä¸ªæ¨¡æ¿éƒ½æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒè¿æ¥äº†å“ªäº›åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ã€‚åœ¨æ­¤ä¾‹ä¸­ï¼Œè¯¥å·¥ä½œæµä½¿ç”¨äº† Telegramã€Gemini AI å’Œ Google Sheetsã€‚</p>
<p><strong>äº†è§£å·¥ä½œæµ</strong>â€‹<strong>ç»“æ„ï¼š</strong> æ‰“å¼€æ¨¡æ¿ï¼ŒæŸ¥çœ‹å…¶å®Œæ•´çš„å·¥ä½œåŸç†æè¿°ã€‚æ‚¨å¯ä»¥æ”¾å¤§å’Œç¼©å°ï¼Œä»¥æ£€æŸ¥æ¯ä¸ªå·¥ä½œæµç»„ä»¶ï¼Œå¹¶äº†è§£æ•°æ®å¦‚ä½•åœ¨èŠ‚ç‚¹ä¹‹é—´æµåŠ¨ã€‚</p>
<p><strong>åˆ©ç”¨é¢„æ„å»ºé€»è¾‘èŠ‚çœæ—¶é—´ï¼š</strong> ä»å¤´å¼€å§‹æ„å»ºæ­¤ç±»å·¥ä½œæµå¯èƒ½è€—æ—¶ä¸”éœ€è¦é«˜çº§æŠ€èƒ½ã€‚è¿™äº›æ¨¡æ¿å…è®¸æ‚¨å¤ç”¨ç»è¿‡éªŒè¯çš„è‡ªåŠ¨åŒ–é€»è¾‘ï¼Œä»è€Œå¿«é€Ÿå¼€å§‹ã€‚</p>
<p><strong>ä½¿ç”¨æ¨¡æ¿ï¼š</strong> ç‚¹å‡»â€œå…è´¹ä½¿ç”¨â€å¼€å§‹å¯¼å…¥æ¨¡æ¿ã€‚</p>
<p><strong>å¤åˆ¶æ¨¡æ¿ï¼š</strong> é€‰æ‹©â€œå¤åˆ¶æ¨¡æ¿åˆ°å‰ªè´´æ¿â€ï¼Œå°†å·¥ä½œæµé…ç½®å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚</p>
<p><img src="https://www.digitaloceans.cn/wp-content/uploads/2025/12/image-7-1024x671.png" alt="" loading="lazy"/></p>
<p><strong>ç²˜è´´åˆ°æ‚¨çš„ n8n ä»ªè¡¨æ¿ï¼š</strong> æ‰“å¼€æ‚¨è‡ªæ‰˜ç®¡çš„ n8n ä»ªè¡¨æ¿ï¼Œå°†å¤åˆ¶çš„æ¨¡æ¿ç›´æ¥ç²˜è´´åˆ°æ‚¨çš„å·¥ä½œæµç”»å¸ƒä¸­ã€‚</p>
<p><strong>éµå¾ªæ¨¡æ¿æŒ‡å—ï¼š</strong> æ¯ä¸ªæ¨¡æ¿éƒ½é™„æœ‰ç”¨æˆ·æŒ‡å—ã€‚è¯·ä»”ç»†é˜…è¯»å¹¶æŒ‰ç…§è¯´æ˜é€æ­¥é…ç½®å·¥ä½œæµã€‚</p>
<p><strong>é…ç½®æ‰€éœ€çš„ â€‹API</strong>â€‹<strong>â€‹ å¯†é’¥ï¼š</strong> è¿™äº›é«˜çº§å·¥ä½œæµé€šå¸¸éœ€è¦å¤šä¸ª API å¯†é’¥å’Œå‡­æ®ã€‚è¯·æŒ‰ç…§æŒ‡ç¤ºæ·»åŠ å®ƒä»¬ä»¥å®Œæˆè®¾ç½®ã€‚</p>
<p><strong>å»ºè®®å°†è¿™äº› â€‹API</strong>â€‹â€‹<strong>â€‹ å¯†é’¥æ·»åŠ åˆ°æ‚¨çš„å¸æˆ·ä¸­ï¼Œä»¥ä¾¿çœŸæ­£å¼€å§‹æ— æ•…éšœåœ°è¿è¡Œå·¥ä½œæµ</strong>â€‹**ã€‚**</p>
<h2 data-id="heading-10">éƒ¨ç½²æ–¹å¼</h2>

















<table><thead><tr><th>éƒ¨ç½²æ–¹å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>n8n Cloud</td><td>å®˜æ–¹æ‰˜ç®¡æœåŠ¡ï¼Œæ— éœ€è¿ç»´ï¼Œé€‚åˆä¸ªäººå’Œå°å›¢é˜Ÿ</td></tr><tr><td>è‡ªæ‰˜ç®¡</td><td>åœ¨è™šæ‹Ÿæœºã€Docker æˆ– Kubernetes ä¸Šéƒ¨ç½²ï¼Œå®Œå…¨æŒæ§å®‰å…¨ä¸æ•°æ®</td></tr></tbody></table>
<h2 data-id="heading-11">ä½¿ç”¨ n8n çš„æœ€ä½³å®è·µ</h2>
<p><strong>ä¿æŒå·¥ä½œæµ</strong>â€‹<strong>æ¨¡å—åŒ–ä¸å¯å¤ç”¨æ€§ï¼š</strong> å°†å·¥ä½œæµè®¾è®¡ä¸ºå°å·§ã€ç‹¬ç«‹çš„å•å…ƒï¼Œæ¯ä¸ªå•å…ƒåªæ‰¿æ‹…å•ä¸€èŒè´£ã€‚éšç€è‡ªåŠ¨åŒ–ä½“ç³»çš„æ‰©å±•ï¼Œæ¨¡å—åŒ–å·¥ä½œæµæ›´æ˜“äºå¤ç”¨ã€æµ‹è¯•å’Œç»´æŠ¤ã€‚</p>
<p><strong>ä½¿ç”¨æè¿°æ€§èŠ‚ç‚¹åç§°ï¼š</strong> ä¸ºèŠ‚ç‚¹é‡å‘½åï¼Œæ¸…æ™°æè¿°å…¶åŠŸèƒ½ï¼Œä»¥ä¿æŒå·¥ä½œæµçš„å¯è¯»æ€§å’Œæ˜“äºç†è§£ã€‚è¿™åœ¨é‡æ–°å®¡é˜…å·¥ä½œæµæˆ–ä¸ä»–äººåä½œæ—¶å°¤ä¸ºæœ‰å¸®åŠ©ã€‚</p>
<p><strong>è®°å½•å…³é”®æ­¥éª¤ä»¥ä¾¿è°ƒè¯•ï¼š</strong> åœ¨å·¥ä½œæµçš„å…³é”®é˜¶æ®µè®°å½•é‡è¦çš„è¾“å…¥å’Œè¾“å‡ºä¿¡æ¯ï¼Œä»¥ä¾¿å¿«é€Ÿå®šä½é—®é¢˜æ‰€åœ¨ã€‚è¿™èƒ½ä½¿æ•…éšœæ’æŸ¥æ›´å¿«æ·ã€æ›´å¯é ã€‚</p>
<p>â€‹<strong>ä¸ºç”Ÿäº§ç¯å¢ƒå¯ç”¨é”™è¯¯å·¥ä½œæµ</strong>â€‹**ï¼š** ä½¿ç”¨é”™è¯¯å·¥ä½œæµæ¥è‡ªåŠ¨æ•è·å’Œå¤„ç†ç”Ÿäº§ç¯å¢ƒä¸­çš„æ•…éšœã€‚è¿™æœ‰åŠ©äºå‘Šè­¦ã€ç›‘æ§ï¼Œå¹¶é˜²æ­¢å‘ç”Ÿé™é»˜çš„å·¥ä½œæµæ•…éšœã€‚</p>
<p><strong>é¿å…ç¡¬ç¼–ç å‡­è¯ï¼š</strong> å§‹ç»ˆä½¿ç”¨ n8n çš„å‡­è¯ç³»ç»Ÿæ¥å­˜å‚¨ API å¯†é’¥å’Œæœºå¯†ä¿¡æ¯ï¼Œè€Œéå°†å…¶ç›´æ¥åµŒå…¥å·¥ä½œæµä¸­ã€‚è¿™èƒ½æå‡å®‰å…¨æ€§å¹¶ç®€åŒ–å‡­è¯ç®¡ç†ã€‚</p>
<p><strong>å°½å¯èƒ½å¯¹å·¥ä½œæµ</strong>â€‹<strong>è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼š</strong> å°†å·¥ä½œæµå¯¼å‡ºå¹¶å­˜å‚¨åœ¨ Git ç­‰ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œä»¥ä¾¿è¿½è¸ªå˜æ›´å¹¶åœ¨éœ€è¦æ—¶å®‰å…¨åœ°å›æ»šæ›´æ–°ã€‚</p>
<h2 data-id="heading-12">å¸¸è§é—®é¢˜</h2>
<p><strong>Qï¼šn8n æ˜¯å…è´¹çš„å—ï¼Ÿ</strong> æ˜¯çš„ï¼Œå¼€æºç‰ˆæœ¬å¯å…è´¹è‡ªæ‰˜ç®¡ï¼›äº‘ç‰ˆæœ¬ä¸ºè®¢é˜…åˆ¶ã€‚</p>
<p><strong>Qï¼šéœ€è¦ç¼–ç¨‹åŸºç¡€å—ï¼Ÿ</strong> åŸºç¡€æµç¨‹ä¸éœ€è¦ï¼Œä½†å¤æ‚é€»è¾‘å»ºè®®å…·å¤‡ JavaScript / API çŸ¥è¯†ã€‚</p>
<p><strong>Qï¼šä¸ Zapier æœ‰ä½•ä¸åŒï¼Ÿ</strong> n8n æ›´çµæ´»ï¼Œæ”¯æŒè‡ªæ‰˜ç®¡ä¸æ·±åº¦å®šåˆ¶ï¼Œé€‚åˆå¤æ‚åœºæ™¯ï¼Œé•¿æœŸæˆæœ¬æ›´ä½ã€‚</p>
<p><strong>Qï¼šèƒ½å¤„ç†å¤§è§„æ¨¡å·¥ä½œæµ</strong>â€‹<strong>å—ï¼Ÿ</strong> å¯ä»¥ï¼Œæ”¯æŒé˜Ÿåˆ—ä¸æ¨ªå‘æ‰©å±•ï¼Œé€‚åˆä¼ä¸šçº§åœºæ™¯ã€‚</p>
<p><strong>Qï¼šn8n å®‰å…¨å—ï¼Ÿ</strong> åœ¨æ­£ç¡®éƒ¨ç½²ä¸‹æ˜¯å®‰å…¨çš„ï¼Œæ”¯æŒå‡­è¯åŠ å¯†ä¸è‡ªæ‰˜ç®¡ã€‚</p>
<p><strong>Qï¼šèƒ½ç”¨äº AI / â€‹LLM</strong>â€‹<strong>å·¥ä½œæµå—ï¼Ÿ</strong> å®Œå…¨å¯ä»¥ï¼Œé€‚åˆ RAGã€AI Agent ç¼–æ’ã€æ‰¹é‡æ¨ç†ç­‰åœºæ™¯ã€‚</p>
<p><strong>Qï¼šæ”¯æŒ Webhook å—ï¼Ÿ</strong> æ”¯æŒï¼Œæ˜¯æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚</p>
<p><strong>Qï¼šèƒ½å¦æ‰©å±•è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Ÿ</strong> å¯ä»¥ï¼Œå¼€å‘è€…å¯ç¼–å†™è‡ªå®šä¹‰èŠ‚ç‚¹ã€‚</p>
<p><strong>Qï¼šé€‚åˆéæŠ€æœ¯å›¢é˜Ÿå—ï¼Ÿ</strong> åŸºç¡€å¯ç”¨ï¼Œä½†å¤æ‚æµç¨‹æ›´é€‚åˆæœ‰å¼€å‘æ”¯æŒçš„å›¢é˜Ÿã€‚</p>
<p><strong>Qï¼šå¸¸è§ä½¿ç”¨åœºæ™¯ï¼Ÿ</strong></p>
<ul>
<li>åˆåˆ›å…¬å¸</li>
<li>SaaS å¹³å°</li>
<li>DevOps å›¢é˜Ÿ</li>
<li>AI / ML åŸºç¡€è®¾æ–½</li>
<li>æ•°æ®å·¥ç¨‹æµæ°´çº¿</li>
</ul>
<p>n8n æ˜¯ä¸€æ¬¾å¼ºå¤§ã€çµæ´»ã€ä»¥å¼€å‘è€…ä¸ºä¸­å¿ƒçš„è‡ªåŠ¨åŒ–å¹³å°ï¼Œå¡«è¡¥äº†æ— ä»£ç å·¥å…·ä¸å®Œå…¨å®šåˆ¶å¼€å‘ä¹‹é—´çš„ç©ºç™½ã€‚å…¶å¼€æºç‰¹æ€§ã€å¯æ‰©å±•æ€§ä¸æ·±åº¦å®šåˆ¶èƒ½åŠ›ï¼Œä½¿å…¶æˆä¸ºæ„å»ºä¸¥è‚ƒè‡ªåŠ¨åŒ–å·¥ä½œæµçš„ç†æƒ³é€‰æ‹©ï¼Œå°¤å…¶é€‚ç”¨äºç°ä»£ AI é©±åŠ¨ä¸äº‘åŸç”Ÿç¯å¢ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatisè¸©å‘å®å½•ï¼šé‚£äº›ä¸æŠ¥é”™ä½†è®©ä½ debugåˆ°æ·±å¤œçš„Bug]]></title>    <link>https://juejin.cn/post/7586588823905730569</link>    <guid>https://juejin.cn/post/7586588823905730569</guid>    <pubDate>2025-12-23T02:47:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586588823905730569" data-draft-id="7586540799250726966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatisè¸©å‘å®å½•ï¼šé‚£äº›ä¸æŠ¥é”™ä½†è®©ä½ debugåˆ°æ·±å¤œçš„Bug"/> <meta itemprop="keywords" content="MyBatis,Java,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-23T02:47:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ—…äºº"/> <meta itemprop="url" content="https://juejin.cn/user/3485898277388519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatisè¸©å‘å®å½•ï¼šé‚£äº›ä¸æŠ¥é”™ä½†è®©ä½ debugåˆ°æ·±å¤œçš„Bug
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3485898277388519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ—…äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T02:47:33.000Z" title="Tue Dec 23 2025 02:47:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    78
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ—©ä¸Šåˆšåˆ°å…¬å¸ï¼Œæ‰“å¼€ç”µè„‘ï¼Œå†™ç€éœ€æ±‚å¬ç€æ­Œã€‚çªç„¶é’‰é’‰ä¸€å“ï¼Œæµ‹è¯•å‘æ¥æ¶ˆæ¯ï¼š"ä½ é‚£ä¸ªæ¥å£æŠ¥é”™äº†"ã€‚æ‰“å¼€æ—¥å¿—ä¸€çœ‹ï¼ŒMyBatisåˆç‚¸äº†ã€‚</p>
</blockquote>
<p>è¯´å®è¯ï¼ŒMyBatisè¿™ç©æ„å„¿å¹³æ—¶æŒºå¥½ç”¨çš„ï¼Œä½†æœ‰æ—¶å€™æŠ¥çš„é”™çœŸè®©äººæ‘¸ä¸ç€å¤´è„‘ã€‚å°¤å…¶æ˜¯é‚£ç§<strong>æœ¬åœ°è·‘å¾—å¥½å¥½çš„ï¼Œä¸€ä¸Šçº¿å°±ç‚¸çš„Bug</strong>ï¼Œç®€ç›´è®©äººæ€€ç–‘äººç”Ÿã€‚ä»Šå¤©å°±è®°å½•ä¸¤ä¸ªè®©æˆ‘debugåˆ°æ·±å¤œçš„å‘ï¼Œå®ƒä»¬éƒ½æœ‰ä¸ªå…±åŒç‰¹ç‚¹ï¼š<strong>ä»£ç çœ‹èµ·æ¥å®Œå…¨æ²¡é—®é¢˜ï¼Œä½†è¿è¡Œæ—¶å°±æ˜¯è«åå…¶å¦™åœ°æŠ¥é”™</strong>ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿè¢«MyBatisæŠ˜ç£¨è¿‡ï¼Œè¿™ç¯‡æ–‡ç« å¯èƒ½ä¼šè®©ä½ ä¼šå¿ƒä¸€ç¬‘ï¼šåŸæ¥ä¸æ˜¯æˆ‘ä¸€ä¸ªäººè¸©è¿‡è¿™äº›å‘ğŸ˜‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad176944fd4d4a52b8bd1dce48cdd750~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5peF5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767067632&amp;x-signature=KdCPMzXMWXLUA%2B9ZVYPJUGn1HoI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">å‘ä½ä¸€ï¼šArrays.asList() é‡ä¸Šè€ç‰ˆæœ¬MyBatisï¼ˆ3.2.xç‰ˆæœ¬ï¼‰</h2>
<h3 data-id="heading-1">äº‹æ•…ç°åœº</h3>
<p>å‘¨äº”ä¸‹åˆå››ç‚¹åŠï¼ˆæ˜¯çš„ï¼ŒBugæ€»æ˜¯åœ¨å¿«ä¸‹ç­æ—¶å‡ºç°ï¼‰ï¼Œæµ‹è¯•ç¯å¢ƒçªç„¶æŠ¥äº†ä¸ªä»¤äººå¤´å¤§çš„å¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-java" lang="java">   <span class="hljs-string">"org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.builder.BuilderException: Error evaluating expression 'userCode.size() &gt; 0'. Cause: org.apache.ibatis.ognl.MethodFailedException: Method "</span>size<span class="hljs-string">" failed for object [aaa, bbb] [java.lang.IllegalAccessException: Class org.apache.ibatis.ognl.OgnlRuntime can not access a member of class java.util.Collections$UnmodifiableCollection with modifiers "</span><span class="hljs-keyword">public</span><span class="hljs-string">"]
     at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
     at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:364)
     at $Proxy15.selectList(Unknown Source)
     at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194)
     at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:114)
     at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:58)
     at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:43)
     at $Proxy18.fetchOrder(Unknown Source)
     at com.xx.xx.server.impl.XX.fetchOrderByUnitNo(RechargeCardBillServiceImpl.java:351)
     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
     at java.lang.reflect.Method.invoke(Method.java:597)
     at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
     at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:198)
     at $Proxy26.fetchOrderByUnitNo(Unknown Source)
     at com.ofpay.ofdc.task.AbstractRechargeTask.run(AbstractRechargeTask.java:65)
     at java.lang.Thread.run(Thread.java:662)
</span></code></pre>
<p>çœ‹åˆ°è¿™ä¸ªå¼‚å¸¸ï¼Œæˆ‘ç¬¬ä¸€ååº”æ˜¯ï¼š<strong>ä»€ä¹ˆé¬¼ï¼Ÿsize()æ–¹æ³•è¿˜èƒ½è°ƒç”¨å¤±è´¥ï¼Ÿ</strong></p>
<p>æ¥çœ‹çœ‹å‡ºé—®é¢˜çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Controllerå±‚</span>
List&lt;String&gt; userCodes = Arrays.asList(<span class="hljs-string">"aaa"</span>, <span class="hljs-string">"bbb"</span>, <span class="hljs-string">"ccc"</span>);
orderService.fetchOrderByUserCodes(userCodes);
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Mapper.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fetchOrder"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"Order"</span>&gt;</span>
    SELECT * FROM t_order
    WHERE 1=1
    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"userCode != null and userCode.size() &gt; 0"</span>&gt;</span>
        AND user_code IN
        <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">"userCode"</span> <span class="hljs-attr">item</span>=<span class="hljs-string">"code"</span> <span class="hljs-attr">open</span>=<span class="hljs-string">"("</span> <span class="hljs-attr">close</span>=<span class="hljs-string">")"</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">","</span>&gt;</span>
            #{code}
        <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
</code></pre>
<p>è¿™ä»£ç çœ‹èµ·æ¥æ²¡å•¥é—®é¢˜å•Šï¼ŸuserCodeä¸ä¸ºç©ºï¼Œè°ƒä¸ªsize()æ–¹æ³•åˆ¤æ–­é•¿åº¦ï¼Œå¤©ç»åœ°ä¹‰ã€‚ä½†å®ƒå°±æ˜¯æŠ¥é”™äº†ï¼Œè€Œä¸”æ˜¯å¶ç°ï¼ˆä¸€èˆ¬å¶ç°éƒ½æœ‰å¤§å‘ï¼‰ã€‚</p>
<h3 data-id="heading-2">å…ˆè¯´è§£å†³æ–¹æ¡ˆ</h3>
<p>ä¸€é¡¿<strong>ChatGPT + Google + Stack Overflowæœç´¢</strong>åï¼Œæ‰¾åˆ°äº†ä¸‰ç§è§£å†³åŠæ³•ï¼š</p>
<p><strong>æ–¹æ¡ˆ1ï¼šæ”¹å…¥å‚ç±»å‹ï¼ˆæœ€å¿«ï¼‰</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŠŠArrays.asListè¿”å›çš„"å‡ArrayList"è½¬æˆçœŸæ­£çš„ArrayList</span>
List&lt;String&gt; userCodes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(Arrays.asList(<span class="hljs-string">"aaa"</span>, <span class="hljs-string">"bbb"</span>, <span class="hljs-string">"ccc"</span>));
</code></pre>
<p>æ”¹å®Œé‡æ–°å‘å¸ƒï¼Œé—®é¢˜ç§’è§£å†³ã€‚æµ‹è¯•éªŒè¯é€šè¿‡ï¼Œç»ˆäºå¯ä»¥ä¸‹ç­äº†ã€‚</p>
<p><strong>æ–¹æ¡ˆ2ï¼šæ”¹XMLè¡¨è¾¾å¼ï¼ˆä¸æ”¹Javaä»£ç ï¼‰</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç”¨lengthå±æ€§æ›¿ä»£size()æ–¹æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"userCode != null and userCode.length &gt; 0"</span>&gt;</span>
    AND user_code IN ...
<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ªæ–¹æ¡ˆä¹Ÿèƒ½workï¼Œè€Œä¸”ä¸ç”¨æ”¹ä¸šåŠ¡ä»£ç ï¼Œæ”¹å®Œå°±èƒ½ç”¨ã€‚</p>
<p><strong>æ–¹æ¡ˆ3ï¼šå‡çº§MyBatisç‰ˆæœ¬ï¼ˆæ²»æœ¬ä¹‹ç­–ï¼‰</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ä»è€å¤è‘£ç‰ˆæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!-- 2014å¹´çš„ç‰ˆæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å‡çº§åˆ°ç°ä»£ç‰ˆæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.13<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>ä¸è¿‡è¿™ä¸ªæ–¹æ¡ˆéœ€è¦åšå…¨é¢çš„å›å½’æµ‹è¯•ï¼Œå‘¨äº”æ™šä¸Šå°±ç®—äº†ï¼Œç•™åˆ°ä¸‹å‘¨æ…¢æ…¢æã€‚</p>
<h3 data-id="heading-3">åˆ¨æ ¹é—®åº•ï¼šè¿™åˆ°åº•æ˜¯ä¸ªå•¥å‘ï¼Ÿ</h3>
<p>çº¿ä¸Šé—®é¢˜è§£å†³äº†ï¼Œä½†æ€»æ„Ÿè§‰å“ªé‡Œä¸å¯¹åŠ²ã€‚å‘¨æœ«é—²ç€æ²¡äº‹ï¼Œå†³å®šæŠŠè¿™ä¸ªè¯¡å¼‚çš„å¼‚å¸¸åˆ¨æ ¹é—®åº•ææ¸…æ¥šã€‚ç¿»äº†åŠå¤©èµ„æ–™ï¼Œç»ˆäºæ˜ç™½æ˜¯æ€ä¹ˆå›äº‹äº†ã€‚</p>
<p><strong>ç¬¬ä¸€å±‚é—®é¢˜ï¼šç±»å‹ä¸åŒ</strong></p>
<p><code>Arrays.asList()</code> è¿”å›çš„ä¸æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ <code>java.util.ArrayList</code>ï¼Œè€Œæ˜¯ <code>java.util.Arrays</code> çš„ä¸€ä¸ªç§æœ‰é™æ€å†…éƒ¨ç±» <code>Arrays$ArrayList</code>ã€‚</p>
<p>å†™ä¸ªç®€å•çš„æµ‹è¯•éªŒè¯ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; list1 = Arrays.asList(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>);
List&lt;String&gt; list2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(Arrays.asList(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>));

System.out.println(list1.getClass());  
<span class="hljs-comment">// è¾“å‡º: class java.util.Arrays$ArrayList</span>

System.out.println(list2.getClass());  
<span class="hljs-comment">// è¾“å‡º: class java.util.ArrayList</span>
</code></pre>
<p>çœ‹åˆ°æ²¡ï¼Ÿä¸€ä¸ªæ˜¯<code>Arrays$ArrayList</code>ï¼Œä¸€ä¸ªæ˜¯<code>ArrayList</code>ï¼Œè™½ç„¶éƒ½å®ç°äº†Listæ¥å£ï¼Œä½†ç±»å‹å®Œå…¨ä¸åŒã€‚</p>
<p><strong>ç¬¬äºŒå±‚é—®é¢˜ï¼šè®¿é—®æƒé™å¼‚å¸¸</strong></p>
<p>MyBatisç”¨OGNLè¡¨è¾¾å¼å¼•æ“æ¥è§£æXMLä¸­çš„æ¡ä»¶åˆ¤æ–­ï¼ˆæ¯”å¦‚ <code>userCode.size() &gt; 0</code>ï¼‰ã€‚å½“OGNLå°è¯•é€šè¿‡åå°„è°ƒç”¨ <code>Arrays$ArrayList</code> çš„ <code>size()</code> æ–¹æ³•æ—¶ï¼Œå‘ç°è¿™ä¸ªç±»æ˜¯ <code>private static class</code>ï¼ˆç§æœ‰é™æ€å†…éƒ¨ç±»ï¼‰ã€‚</p>
<p>è™½ç„¶ <code>size()</code> æ–¹æ³•æœ¬èº«æ˜¯ <code>public</code> çš„ï¼Œä½†å› ä¸ºç±»æœ¬èº«æ˜¯ <code>private</code> ä¿®é¥°ç¬¦ï¼ŒOGNLåœ¨åå°„è®¿é—®æ—¶éœ€è¦è°ƒç”¨ <code>setAccessible(true)</code> æ¥ç»•è¿‡æƒé™æ£€æŸ¥ã€‚é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œï¼</p>
<p><strong>ç¬¬ä¸‰å±‚é—®é¢˜ï¼šå¹¶å‘Bugï¼ˆé‡ç‚¹æ¥äº†ï¼ï¼‰</strong></p>
<p>è€ç‰ˆæœ¬MyBatisåœ¨å¤„ç†åå°„æ—¶æœ‰ä¸ªå¹¶å‘é—®é¢˜ï¼š<strong>å½“éœ€è¦è°ƒç”¨ç§æœ‰ç±»çš„æ–¹æ³•æ—¶ï¼Œä¼šå…ˆè®¾ç½® <code>accessible = true</code>ï¼Œè°ƒç”¨å®Œå†è®¾å› <code>false</code>ã€‚ä½†è¿™ä¸ªæ“ä½œæ²¡æœ‰åŠ é”ï¼ï¼ˆéåŸå­æ€§ï¼‰</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼š</p>
<ul>
<li>çº¿ç¨‹Aï¼šè®¾ç½® <code>accessible = true</code>ï¼Œå‡†å¤‡è°ƒç”¨æ–¹æ³•</li>
<li>çº¿ç¨‹Bï¼šä¹Ÿè®¾ç½® <code>accessible = true</code>ï¼Œç„¶åè°ƒç”¨æ–¹æ³•ï¼Œå†è®¾å› <code>false</code></li>
<li>çº¿ç¨‹Aï¼šæ­¤æ—¶å»è°ƒç”¨æ–¹æ³•ï¼Œå‘ç° <code>accessible</code> å·²ç»è¢«Bæ”¹æˆ <code>false</code> äº†ï¼Œboomï¼ğŸ’¥</li>
</ul>
<p>è¿™å°±æ˜¯<strong>ä¸ºä»€ä¹ˆè¿™ä¸ªBugå¶å°”æ‰å‡ºç°ï¼Œå› ä¸ºå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸ªå¹¶å‘é—®é¢˜</strong>ï¼åªæœ‰åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨è¿™ä¸ªæ¥å£æ—¶æ‰ä¼šè§¦å‘ã€‚</p>
<p>GitHubä¸Šæœ‰äººæ—©åœ¨2014å¹´å°±æäº†è¿™ä¸ªissueï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmybatis%2Fmybatis-3%2Fpull%2F384" target="_blank" title="https://github.com/mybatis/mybatis-3/pull/384" ref="nofollow noopener noreferrer">mybatis/mybatis-3#384</a></p>
<p>åæ¥MyBatisåœ¨3.3.xç‰ˆæœ¬ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ï¼Œå¯¹åå°„æ“ä½œåŠ äº†åŒæ­¥æ§åˆ¶ï¼Œç¡®ä¿ <code>accessible</code> çš„è®¾ç½®å’Œæ–¹æ³•è°ƒç”¨æ˜¯åŸå­æ“ä½œã€‚</p>
<hr/>
<h2 data-id="heading-4">å‘ä½äºŒï¼šå‚æ•°ä¼ 0ï¼ŒSQLæ¡ä»¶ç¥ç§˜æ¶ˆå¤±ä¹‹è°œ</h2>
<h3 data-id="heading-5">åˆä¸€ä¸ªå‘¨äº”çš„æ•…äº‹</h3>
<p>æ˜¯çš„ï¼Œåˆæ˜¯å‘¨äº”ä¸‹åˆï¼ˆå¢¨è²å®šå¾‹ï¼šBugæ°¸è¿œåœ¨å‘¨äº”å‡ºç°ğŸ˜­ï¼‰ã€‚éœ€æ±‚å¾ˆç®€å•ï¼šæŸ¥è¯¢æ‰€æœ‰"å¾…æ”¯ä»˜"çŠ¶æ€ï¼ˆstatus=0ï¼‰çš„è®¢å•ã€‚ååˆ†é’Ÿå†™å®Œä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Serviceå±‚</span>
<span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">queryPendingOrders</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> orderMapper.queryOrderByStatus(<span class="hljs-number">0</span>);  <span class="hljs-comment">// 0è¡¨ç¤ºå¾…æ”¯ä»˜</span>
}
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Mapper.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"queryOrderByStatus"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"Order"</span>&gt;</span>
    SELECT * FROM t_order
    WHERE 1=1
    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null and status != ''"</span>&gt;</span>
        AND status = #{status}
    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
</code></pre>
<p>æœ¬åœ°æµ‹è¯•ï¼Œå®Œç¾è¿è¡Œã€‚æäº¤ä»£ç ï¼Œåˆå¹¶ä¸»å¹²ï¼Œå‘å¸ƒæµ‹è¯•ç¯å¢ƒã€‚å¿ƒæƒ³è¿™æ¬¡ç¨³äº†ï¼Œå‡†å¤‡æå‰æ”¶æ‹¾ä¸œè¥¿ä¸‹ç­ã€‚</p>
<p>ç»“æœåŠå°æ—¶åï¼Œæµ‹è¯•åŒå­¦å‘æ¥æ¶ˆæ¯ï¼š"è¿™ä¸ªæ¥å£æœ‰é—®é¢˜å•Šï¼Œæ€ä¹ˆæŠŠæ‰€æœ‰çŠ¶æ€çš„è®¢å•éƒ½æŸ¥å‡ºæ¥äº†ï¼Ÿæˆ‘è¦çš„æ˜¯status=0çš„è®¢å•ã€‚"</p>
<p>æˆ‘ä¸€è„¸æ‡µé€¼ï¼šï¼Ÿï¼Ÿï¼Ÿä¸å¯èƒ½å•Šï¼Œæˆ‘åˆšæµ‹è¿‡çš„ï¼Œæ˜æ˜æ²¡é—®é¢˜ï¼</p>
<p>æ‰“å¼€æµ‹è¯•ç¯å¢ƒæ—¥å¿—ï¼Œæ‰§è¡Œçš„SQLæ˜¯ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t_order <span class="hljs-keyword">WHERE</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">1</span>
</code></pre>
<p><strong>WHEREåé¢çš„statusæ¡ä»¶å‘¢ï¼Ÿè¢«åƒäº†ï¼Ÿ</strong></p>
<h3 data-id="heading-6">Debugä¹‹æ—…</h3>
<p>æˆ‘åœ¨æœ¬åœ°æ‰“æ–­ç‚¹ï¼Œä¸€æ­¥æ­¥è°ƒè¯•ï¼š</p>
<ol>
<li>Controllerå±‚ä¼ å…¥çš„å‚æ•°ï¼š<code>status = 0</code> âœ…</li>
<li>Serviceå±‚æ”¶åˆ°çš„å‚æ•°ï¼š<code>status = 0</code> âœ…</li>
<li>MyBatisæ‰§è¡Œçš„SQLï¼š<code>WHERE 1=1</code> âŒ</li>
</ol>
<p>é—®é¢˜è‚¯å®šå‡ºåœ¨XMLçš„ifåˆ¤æ–­ä¸Šã€‚ç›¯ç€è¿™è¡Œçœ‹äº†å¥½å‡ åˆ†é’Ÿï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null and status != ''"</span>&gt;</span>
</code></pre>
<p>çªç„¶çµå…‰ä¸€ç°ï¼š<strong>ä¼šä¸ä¼šæ˜¯ 0 è¢«åˆ¤å®šæˆäº†ç©ºå­—ç¬¦ä¸²ï¼Ÿ</strong></p>
<p>èµ¶ç´§æ”¹æˆè¿™æ ·è¯•è¯•ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null"</span>&gt;</span>
    AND status = #{status}
<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
</code></pre>
<p>é‡æ–°å‘å¸ƒï¼Œé—®é¢˜è§£å†³ï¼æµ‹è¯•ç¯å¢ƒæŸ¥è¯¢status=0çš„è®¢å•ï¼Œæ­£å¸¸è¿”å›äº†ã€‚</p>
<h3 data-id="heading-7">åŸç†æ­ç§˜ï¼šOGNLçš„ç±»å‹è½¬æ¢é™·é˜±</h3>
<p>è¿™åˆæ˜¯ä¸€ä¸ªMyBatisï¼ˆå‡†ç¡®è¯´æ˜¯OGNLï¼‰çš„ç»å…¸å‘ã€‚<strong>è¿™ä¸ªå‘æ¯”ç¬¬ä¸€ä¸ªè¿˜éšè”½ï¼Œå› ä¸ºå®ƒä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯æ‚„æ‚„åœ°æŠŠä½ çš„æ¡ä»¶åƒæ‰</strong>ã€‚</p>
<p><strong>OGNLçš„æ±‚å€¼é€»è¾‘</strong></p>
<p>MyBatisçš„ <code>&lt;if&gt;</code> æ ‡ç­¾ç”¨çš„æ˜¯OGNLè¡¨è¾¾å¼å¼•æ“ã€‚å½“ä½ å†™ <code>status != ''</code> æ—¶ï¼ŒOGNLå†…éƒ¨ä¼šç»å†è¿™æ ·çš„åˆ¤æ–­æµç¨‹ï¼š</p>
<ol>
<li>å…ˆé€šè¿‡ <code>OgnlCache.getValue()</code> è·å–è¡¨è¾¾å¼çš„å€¼ï¼ˆè¿™é‡Œè¡¨è¾¾å¼è¿”å›äº†falseï¼‰</li>
<li>ç„¶ååœ¨ <code>ExpressionEvaluator.evaluateBoolean()</code> ä¸­åˆ¤æ–­è¿™ä¸ªå€¼ï¼Œæ ¹æ®è¿”å›çš„ä¸åŒç±»å‹ä½œä¸åŒåˆ¤æ–­ï¼Œæœ€ç»ˆè¿”å›booleanç±»å‹ç»“æœã€‚</li>
</ol>
<p>å…ˆçœ‹ç¬¬äºŒæ­¥ï¼OGNLå¯¹ä¸åŒç±»å‹æœ‰ä¸åŒçš„åˆ¤æ–­é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ExpressionEvaluator.evaluateBoolean()æ–¹æ³• OGNLçš„åˆ¤æ–­é€»è¾‘</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">evaluateBoolean</span><span class="hljs-params">(String expression, Object parameterObject)</span> {
  <span class="hljs-comment">// è¿™é‡Œvalueè¿”å›çš„æ˜¯false</span>
  <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> OgnlCache.getValue(expression, parameterObject);
  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> Boolean) {
    <span class="hljs-comment">// å› æ­¤ä¼šèµ°åˆ°è¿™é‡Œï¼Œè¿”å›false</span>
    <span class="hljs-keyword">return</span> (Boolean) value;
  }
  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> Number) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(String.valueOf(value)).compareTo(BigDecimal.ZERO) != <span class="hljs-number">0</span>;
  }
  <span class="hljs-keyword">return</span> value != <span class="hljs-literal">null</span>;
}
</code></pre>
<p><strong>ç±»å‹è½¬æ¢çš„å‘</strong></p>
<p>å½“ä½ å†™ <code>status != ''</code> æ—¶ï¼Œä»<code>OgnlCache.getValue()</code>å¾€ä¸‹ä¸æ–­è¿½æº¯ï¼ŒOGNLæœ€ç»ˆä¼šè°ƒç”¨ <code>compareWithConversion</code> æ–¹æ³•åšç±»å‹è½¬æ¢æ¯”è¾ƒã€‚è¿™ä¸ªæ–¹æ³•ä¼šæŠŠä¸¤è¾¹çš„å€¼éƒ½è½¬æˆåŒä¸€ç±»å‹å†æ¯”è¾ƒï¼š</p>
<ul>
<li>æ•°å€¼ <code>0</code> ä¼šè¢«è½¬æˆ <code>doubleç±»å‹ï¼š0.0</code></li>
<li>ç©ºå­—ç¬¦ä¸² <code>""</code> ä¹Ÿä¼šè¢«è½¬æˆ <code>doubleç±»å‹ï¼š0.0</code></li>
</ul>
<p>ç»“æœå°±æ˜¯ <code>0 == ""</code> è¢«åˆ¤å®šä¸º <code>true</code>ï¼Œå¯¼è‡´ <code>status != ''</code> è¿”å› <code>false</code>ï¼Œä½ çš„ifæ¡ä»¶ä¸æˆç«‹ï¼ŒSQLæ¡ä»¶å°±æ²¡äº†ï¼</p>
<p><strong>ä¸ºä»€ä¹ˆæœ¬åœ°æµ‹è¯•æ²¡é—®é¢˜ï¼Ÿ</strong></p>
<p>æ˜¯å› ä¸ºæˆ‘æœ¬åœ°æµ‹è¯•æ—¶ä¼ çš„å‚æ•°æ˜¯ <code>status=1</code> æˆ–å…¶ä»–é0å€¼ï¼Œè€Œæµ‹è¯•ç¯å¢ƒåˆšå¥½ä¼ äº† <code>status=0</code>ã€‚è¿™ç§Bugç‰¹åˆ«éšè”½ï¼Œå› ä¸ºå®ƒä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯æŸ¥è¯¢ç»“æœä¸ç¬¦åˆé¢„æœŸã€‚</p>
<p><strong>è¿™ä¸ªå‘çš„é€‚ç”¨èŒƒå›´</strong>ï¼š</p>
<ul>
<li>å‚æ•°æ˜¯<strong>æ•°å€¼ç±»å‹</strong>ï¼ˆIntegerã€Longç­‰ï¼‰çš„ <strong>0</strong></li>
<li>XMLä¸­å†™äº† <code>!= ''</code> çš„ç©ºå­—ç¬¦ä¸²åˆ¤æ–­</li>
<li><strong>å­—ç¬¦ä¸²"0"ä¸å—å½±å“</strong>ï¼ˆ<code>"0" != ''</code> æ­£å¸¸åˆ¤å®šä¸ºtrueï¼‰</li>
</ul>
<p>æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å»çœ‹çœ‹MyBatisæºç ä¸­çš„ <code>ExpressionEvaluator</code> ç±»å’ŒOGNLçš„ <code>OgnlOps.compareWithConversion</code> æ–¹æ³•ï¼Œå°±èƒ½æ˜ç™½æ•´ä¸ªè½¬æ¢è¿‡ç¨‹äº†ã€‚</p>
<h3 data-id="heading-8">æ­£ç¡®å§¿åŠ¿å¤§å…¨</h3>
<p>æ ¹æ®ä¸åŒåœºæ™¯ï¼Œæˆ‘æ€»ç»“äº†å‡ ç§å†™æ³•ï¼š</p>
<p><strong>åœºæ™¯1ï¼šå‚æ•°æ˜¯Integer/Longç­‰åŒ…è£…ç±»å‹</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ¨èï¼šåªåˆ¤nullï¼Œæ•°å€¼0æ˜¯æœ‰æ•ˆå€¼ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null"</span>&gt;</span>
    AND status = #{status}
<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
</code></pre>
<p><strong>åœºæ™¯2ï¼šå‚æ•°å¯èƒ½æ˜¯æ•°å€¼ä¹Ÿå¯èƒ½æ˜¯å­—ç¬¦ä¸²</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ˜¾å¼åŒ…å«0çš„åˆ¤æ–­ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null and (status != '' or status == 0)"</span>&gt;</span>
    AND status = #{status}
<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
</code></pre>
<p><strong>åœºæ™¯3ï¼šå­—ç¬¦ä¸²ç±»å‹å‚æ•°</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å­—ç¬¦ä¸²æ­£å¸¸åˆ¤æ–­ï¼Œä¸ä¼šæœ‰å‘ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"userName != null and userName != ''"</span>&gt;</span>
    AND user_name = #{userName}
<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
</code></pre>
<h3 data-id="heading-9">é¿å‘å»ºè®®</h3>
<ol>
<li>
<p><strong>æ•°å€¼ç±»å‹å‚æ•°ï¼Œåˆ«ç”¨ç©ºå­—ç¬¦ä¸²åˆ¤æ–­</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- âŒ é”™è¯¯å†™æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"count != null and count != ''"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- âœ… æ­£ç¡®å†™æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"count != null"</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>è®°ä½æ•°å€¼ç±»å‹å’Œå­—ç¬¦ä¸²ç±»å‹è¦åŒºåˆ†å¯¹å¾…</strong></p>
<ul>
<li>æ•°å€¼ç±»å‹ï¼ˆIntegerã€Longï¼‰ï¼šåªåˆ¤<code>!= null</code></li>
<li>å­—ç¬¦ä¸²ç±»å‹ï¼šåˆ¤<code>!= null and != ''</code></li>
</ul>
</li>
<li>
<p><strong>ç¡®å®éœ€è¦å…¼å®¹çš„åœºæ™¯ï¼Œæ˜ç¡®å†™å‡º0çš„åˆ¤æ–­</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"value != null and (value != '' or value == 0)"</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>å‡çº§MyBatisç‰ˆæœ¬å¹¶ä¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜</strong>ï¼ˆå› ä¸ºè¿™æ˜¯OGNLçš„ç‰¹æ€§ï¼Œä¸æ˜¯bugï¼‰</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-10">æ€»ç»“ä¸æœ€ä½³å®è·µ</h2>
<p>è¿™ä¸¤ä¸ªé—®é¢˜è™½ç„¶è¡¨ç°å½¢å¼ä¸åŒï¼Œä½†éƒ½æºäº<strong>OGNLè¡¨è¾¾å¼å¼•æ“</strong>çš„ç‰¹æ®Šè¡Œä¸ºã€‚ç†è§£è¿™äº›é™·é˜±èƒŒåçš„æœºåˆ¶ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´å¥å£®çš„MyBatisä»£ç ã€‚</p>
<h3 data-id="heading-11">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li>
<p><strong>Arrays.asList()çš„é™·é˜±</strong></p>
<ul>
<li>
<p><code>Arrays.asList()</code> è¿”å›çš„ä¸æ˜¯çœŸæ­£çš„ArrayListï¼Œæ˜¯Arraysçš„ç§æœ‰é™æ€å†…éƒ¨ç±»</p>
</li>
<li>
<p>è€ç‰ˆæœ¬MyBatisï¼ˆ3.3.xä¹‹å‰ï¼‰çš„OGNLè¡¨è¾¾å¼å¼•æ“ï¼š<strong>åå°„è®¿é—®ç§æœ‰é™æ€å†…éƒ¨ç±»çš„publicæ–¹æ³•æ—¶ï¼Œåœ¨è®¾ç½® <code>accessible = true</code>å‚æ•°æ—¶ä¼šæœ‰å¹¶å‘é—®é¢˜</strong></p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼šåŒ…è£…æˆçœŸæ­£çš„ArrayListæˆ–å‡çº§MyBatisç‰ˆæœ¬</p>
</li>
</ul>
</li>
<li>
<p><strong>ã€Œifã€æ ‡ç­¾ï¼šæ•°å€¼0åˆ¤ç©ºçš„é™·é˜±</strong></p>
<ul>
<li>
<p>OGNLä¼šå°†æ•°å€¼0ä¸ç©ºå­—ç¬¦ä¸²åšç±»å‹è½¬æ¢æ¯”è¾ƒ</p>
</li>
<li>
<p><code>status != ''</code> ä¼šè¿”å›falseï¼Œå¯¼è‡´ã€Œifã€è¡¨è¾¾å¼æ¡ä»¶ä¸æ»¡è¶³ï¼Œæ•°å€¼0çš„æŸ¥è¯¢æ¡ä»¶è¢«è¿‡æ»¤</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼šæ•°å€¼ç±»å‹åªåˆ¤æ–­<code>!= null</code>ï¼Œä¸è¦åˆ¤æ–­ç©ºå­—ç¬¦ä¸²</p>
</li>
</ul>
</li>
</ol>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ é¿å¼€è¿™äº›å‘ï¼Œè®©å‘¨äº”ä¸‹ç­ä¸å†æ˜¯å¥¢æœ› ğŸ˜„</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>