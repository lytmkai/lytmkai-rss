<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[React-create-appä½¿ç”¨cesiumå¹¶ä¸”æ¸²æŸ“3då€¾æ–œæ‘„å½±]]></title>    <link>https://juejin.cn/post/7603359026711068682</link>    <guid>https://juejin.cn/post/7603359026711068682</guid>    <pubDate>2026-02-06T07:57:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603359026711068682" data-draft-id="7603263490341912585" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React-create-appä½¿ç”¨cesiumå¹¶ä¸”æ¸²æŸ“3då€¾æ–œæ‘„å½±"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-06T07:57:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="scorpioop"/> <meta itemprop="url" content="https://juejin.cn/user/2683248842638445"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React-create-appä½¿ç”¨cesiumå¹¶ä¸”æ¸²æŸ“3då€¾æ–œæ‘„å½±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2683248842638445/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    scorpioop
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:57:02.000Z" title="Fri Feb 06 2026 07:57:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…ˆä¸Šæ•ˆæœ
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d91986db1cd44a3c979695e2cf4cc046~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NvcnBpb29w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969423&amp;x-signature=8Rk0mVxuB45LwCSZrCSZ8D910CQ%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€cesiumåœ¨react-create-appä¸­çš„å¼•ç”¨</h2>
<p>é¦–å…ˆ
<code>yarn add cesium</code>ç„¶å<code>yarn add copy-webpack-plugin -D</code>ç„¶å<code>yarn add customize-cra react-app-rewired --dev </code></p>
<p>è®¾ç½®äº†customize-cra react-app-rewiredå°±å¯ä»¥æ”¹å†™webpack</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9e9ed1316b54ea38f0ac111b027805d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NvcnBpb29w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969423&amp;x-signature=xMHtx8ofQT2ZjbL66C%2BQjDieF%2FQ%3D" alt="image.png" loading="lazy"/>
æ–°å»ºä¸€ä¸ªè¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨é‡Œé¢æ”¹å†™webpack</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> {
  override,
 
  addWebpackPlugin,
} = <span class="hljs-built_in">require</span>(<span class="hljs-string">"customize-cra"</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CopyWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">"copy-webpack-plugin"</span>);
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack"</span>);


<span class="hljs-keyword">const</span> cesiumSource = <span class="hljs-string">'node_modules/cesium/Source'</span>;
<span class="hljs-keyword">const</span> cesiumWorkers = <span class="hljs-string">'../Build/Cesium/Workers'</span>;



<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">override</span>(
  
 
  <span class="hljs-title function_">addWebpackPlugin</span>(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyWebpackPlugin</span>({
      <span class="hljs-attr">patterns</span>: [
        
        { <span class="hljs-attr">from</span>: path.<span class="hljs-title function_">join</span>(cesiumSource, cesiumWorkers), <span class="hljs-attr">to</span>: <span class="hljs-string">'cesium/Workers'</span> },
        { <span class="hljs-attr">from</span>: path.<span class="hljs-title function_">join</span>(cesiumSource, <span class="hljs-string">'Assets'</span>), <span class="hljs-attr">to</span>: <span class="hljs-string">'cesium/Assets'</span> },
        { <span class="hljs-attr">from</span>: path.<span class="hljs-title function_">join</span>(cesiumSource, <span class="hljs-string">'Widgets'</span>), <span class="hljs-attr">to</span>: <span class="hljs-string">'cesium/Widgets'</span> }
      ],
    })
  ),
  <span class="hljs-title function_">addWebpackPlugin</span>(
    <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">DefinePlugin</span>({
      <span class="hljs-comment">// Define relative base path in cesium for loading assets</span>
      <span class="hljs-attr">CESIUM_BASE_URL</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-string">"/cesium"</span>),
    })
  )
  <span class="hljs-comment">// addWebpackPlugin(new BundleAnalyzerPlugin())</span>
);


</code></pre>
<p>package.jsoné‡Œçš„æ‰“åŒ…è„šæœ¬å˜æˆ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"start"</span>: <span class="hljs-string">"react-app-rewired start"</span>,
    <span class="hljs-string">"build"</span>: <span class="hljs-string">"react-app-rewired build"</span>,
    
  },
</code></pre>
<p>è¿™æ ·å°±ä¼šèµ°æˆ‘ä»¬æ–°è®¾å®šçš„webpackï¼Œå°†å°†node_modules/cesium/Source/Assets, node_modules/cesium/Source/Widgets, node_modules/cesium/Build/Cesium/Workersè‡ªåŠ¨æ–‡ä»¶æ‰“åŒ…åˆ°buildæ–‡ä»¶é‡Œï¼Œå¦‚å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6bc758eb20240eb81ece4677f2bd6cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NvcnBpb29w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969423&amp;x-signature=4ihE51DCKx%2BnZpHT8Efe4jvzVlo%3D" alt="image.png" loading="lazy"/>
è¿™æ ·yarn start æˆ–è€…yarn buildå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨cesiumäº†</p>
<p>ä¸‹é¢è¿™ç¯‡æˆ‘ç›´æ¥æŒ‰<strong>å¯å‘å¸ƒåˆ°æ˜é‡‘çš„æŠ€æœ¯æ–‡ç« ç»“æ„</strong>å¸®ä½ æ•´ç†å¥½äº†ï¼šæœ‰èƒŒæ™¯ã€æœ‰æ€è·¯ã€æœ‰ä»£ç æ‹†è§£ã€æœ‰ä¼˜åŒ–å»ºè®®ï¼ŒåŸºæœ¬ä¸éœ€è¦å†å¤§æ”¹å°±èƒ½å‘ ğŸ‘</p>
<h2 data-id="heading-1">äºŒã€åˆ›å»º Viewer ä¸”å¿…é¡»åªåˆ›å»ºä¸€æ¬¡ï¼</h2>
<p>å¦åˆ™ï¼š</p>
<ul>
<li>å†…å­˜æš´æ¶¨</li>
<li>WebGL context ä¸¢å¤±</li>
<li>é¡µé¢å¡æ­»</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (!containerRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">if</span> (viewerRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">const</span> viewer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">Viewer</span>(containerRef.<span class="hljs-property">current</span>, {
    <span class="hljs-attr">timeline</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">animation</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">infoBox</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">fullscreenButton</span>: <span class="hljs-literal">false</span>,
  });

  viewerRef.<span class="hljs-property">current</span> = viewer;

  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    viewerRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">destroy</span>();
    viewerRef.<span class="hljs-property">current</span> = <span class="hljs-literal">null</span>;
  };
}, []);
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{containerRef}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"cesium-container"</span> /&gt;</span></span>
</code></pre>
<p>è¿™æ˜¯ <strong>Cesium + React çš„æ ‡å‡†å†™æ³•</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€åŠ è½½å€¾æ–œæ‘„å½±æ¨¡å‹ï¼ˆ3DTilesï¼‰</h2>
<pre><code class="hljs language-scss" lang="scss">Cesium<span class="hljs-selector-class">.Cesium3DTileset</span><span class="hljs-selector-class">.fromUrl</span>("tileset.json")
  <span class="hljs-selector-class">.then</span>((tileset) =&gt; {
    viewer<span class="hljs-selector-class">.scene</span><span class="hljs-selector-class">.primitives</span><span class="hljs-selector-class">.add</span>(tileset);
    viewer<span class="hljs-selector-class">.zoomTo</span>(tileset);
  });
</code></pre>
<h4 data-id="heading-3">ä¸€ä¸ªå¼ºçƒˆå»ºè®® â­â­â­â­â­</h4>
<p>å»ºè®®ç›‘å¬ç“¦ç‰‡å¤±è´¥ï¼š</p>
<pre><code class="hljs language-go" lang="go">tileset.tileFailed.addEventListener((<span class="hljs-type">error</span>) =&gt; {
  console.<span class="hljs-type">error</span>(<span class="hljs-string">"ç“¦ç‰‡åŠ è½½å¤±è´¥:"</span>, <span class="hljs-type">error</span>);
});
</code></pre>
<p>å¦åˆ™ç”Ÿäº§ç¯å¢ƒæ’æŸ¥é—®é¢˜ä¼šéå¸¸ç—›è‹¦ã€‚</p>
<hr/>
<h2 data-id="heading-4">å››ã€åŠ¨æ€ç»˜åˆ¶ç›‘æµ‹ç‚¹ï¼ˆæ ¸å¿ƒï¼‰</h2>
<p>å¾ˆå¤šäººå–œæ¬¢ç”¨ï¼š</p>
<p>ğŸ‘‰ Primitive<br/>
ğŸ‘‰ PointPrimitive</p>
<p>ä½†åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œæˆ‘æ›´æ¨èï¼š</p>
<h2 data-id="heading-5">â­ Entity</h2>
<p>å› ä¸ºï¼š</p>
<ul>
<li>å¼€å‘ç®€å•</li>
<li>æ”¯æŒå±æ€§ç»‘å®š</li>
<li>æ”¯æŒ pick</li>
<li>æ˜“ç»´æŠ¤</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createColorIcon</span>(<span class="hljs-params">color: string</span>) {
    <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"canvas"</span>);
    <span class="hljs-keyword">const</span> size = <span class="hljs-number">48</span>;
    canvas.<span class="hljs-property">width</span> = size;
    canvas.<span class="hljs-property">height</span> = size;
    <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>);
    <span class="hljs-keyword">if</span> (ctx) {
      <span class="hljs-keyword">const</span> cx = size / <span class="hljs-number">2</span>;
      <span class="hljs-keyword">const</span> r = <span class="hljs-number">12</span>;
      <span class="hljs-keyword">const</span> tipY = size - <span class="hljs-number">6</span>;



      <span class="hljs-comment">// å›¾é’‰å½¢çŠ¶ï¼ˆåœ† + å°–ï¼‰</span>
      ctx.<span class="hljs-title function_">beginPath</span>();
      ctx.<span class="hljs-title function_">moveTo</span>(cx, tipY);
      ctx.<span class="hljs-title function_">quadraticCurveTo</span>(cx + r, r + <span class="hljs-number">12</span>, cx + r, r + <span class="hljs-number">4</span>);
      ctx.<span class="hljs-title function_">arc</span>(cx, r + <span class="hljs-number">4</span>, r, <span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>, <span class="hljs-literal">true</span>);
      ctx.<span class="hljs-title function_">quadraticCurveTo</span>(cx - r, r + <span class="hljs-number">12</span>, cx, tipY);
      ctx.<span class="hljs-title function_">closePath</span>();
      ctx.<span class="hljs-property">fillStyle</span> = color;
      ctx.<span class="hljs-title function_">fill</span>();



      ctx.<span class="hljs-title function_">fill</span>();
    }

    <span class="hljs-keyword">return</span> canvas;
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getWarningColor</span> = (<span class="hljs-params">p: any</span>) =&gt; {
    <span class="hljs-keyword">const</span> level =
      p?.<span class="hljs-property">alarmLevel</span> ?? <span class="hljs-number">0</span>;
    <span class="hljs-keyword">switch</span> (<span class="hljs-title class_">Number</span>(level)) {
      <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"#D7263D99"</span>; <span class="hljs-comment">// çº¢è‰²é¢„è­¦ï¼ˆçº¦ 60% ä¸é€æ˜ï¼‰</span>
      <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"#FF6B0099"</span>; <span class="hljs-comment">// æ©™è‰²é¢„è­¦</span>
      <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"#C7A20099"</span>; <span class="hljs-comment">// é»„è‰²é¢„è­¦</span>
      <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"#00BEFF99"</span>; <span class="hljs-comment">// è“è‰²é¢„è­¦</span>
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"#d3f26199"</span>; <span class="hljs-comment">// çº¦ 60% ä¸é€æ˜</span>
    }
  };
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> viewer = viewerRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">if</span> (!viewer) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">if</span> (dataSource &amp;&amp; dataSource?.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      pointEntityIdsRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          viewer.<span class="hljs-property">entities</span>.<span class="hljs-title function_">removeById</span>(id);
        } <span class="hljs-keyword">catch</span> (e) {
          <span class="hljs-comment">// ignore</span>
        }
      });
      pointEntityIdsRef.<span class="hljs-property">current</span> = [];
     
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'dataSource'</span>, dataSource);
     

      (dataSource || []).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">p: any</span>) =&gt;</span> {


        <span class="hljs-keyword">const</span> lng = <span class="hljs-title class_">Number</span>(p.<span class="hljs-property">longitude</span>);
        <span class="hljs-keyword">const</span> lat = <span class="hljs-title class_">Number</span>(p.<span class="hljs-property">latitude</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Number</span>.<span class="hljs-built_in">isNaN</span>(lng) || <span class="hljs-title class_">Number</span>.<span class="hljs-built_in">isNaN</span>(lat)) <span class="hljs-keyword">return</span>;

        <span class="hljs-keyword">const</span> id = <span class="hljs-string">`point-<span class="hljs-subst">${p.id}</span>`</span>;
        viewer.<span class="hljs-property">entities</span>.<span class="hljs-title function_">add</span>({
          id,
          <span class="hljs-attr">position</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Cartesian3</span>.<span class="hljs-title function_">fromDegrees</span>(lng, lat, <span class="hljs-title class_">Number</span>(p.<span class="hljs-property">height</span>) || <span class="hljs-number">0</span>),
          <span class="hljs-attr">billboard</span>: {
            <span class="hljs-attr">image</span>: <span class="hljs-title function_">createColorIcon</span>(<span class="hljs-title function_">getWarningColor</span>(p)),
            <span class="hljs-attr">verticalOrigin</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">VerticalOrigin</span>.<span class="hljs-property">BOTTOM</span>,
            <span class="hljs-comment">// é˜²æ­¢è¢«å€¾æ–œæ‘„å½±æŒ¡ä½</span>
            <span class="hljs-attr">disableDepthTestDistance</span>: <span class="hljs-title class_">Number</span>.<span class="hljs-property">POSITIVE_INFINITY</span>
          },
          <span class="hljs-attr">label</span>: {
            <span class="hljs-attr">text</span>: p.<span class="hljs-property">pointName</span> || <span class="hljs-string">""</span>,
            <span class="hljs-attr">font</span>: <span class="hljs-string">"bold 15px sans-serif"</span>,
            <span class="hljs-attr">fillColor</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-title function_">fromCssColorString</span>(<span class="hljs-string">"rgba(68, 229, 255, 0.92)"</span>),
            <span class="hljs-attr">outlineColor</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-title function_">fromCssColorString</span>(<span class="hljs-string">"rgba(124, 121, 121, 0.9)"</span>).<span class="hljs-title function_">withAlpha</span>(<span class="hljs-number">0.85</span>),
            <span class="hljs-attr">outlineWidth</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">style</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">LabelStyle</span>.<span class="hljs-property">FILL_AND_OUTLINE</span>,
            <span class="hljs-attr">verticalOrigin</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">VerticalOrigin</span>.<span class="hljs-property">BOTTOM</span>,
            <span class="hljs-attr">pixelOffset</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">Cartesian2</span>(<span class="hljs-number">0</span>, -<span class="hljs-number">50</span>),
            <span class="hljs-attr">disableDepthTestDistance</span>: <span class="hljs-title class_">Number</span>.<span class="hljs-property">POSITIVE_INFINITY</span>,
            <span class="hljs-attr">distanceDisplayCondition</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">DistanceDisplayCondition</span>(
              <span class="hljs-number">0</span>,
              <span class="hljs-number">5000</span>
            ),
          },
          <span class="hljs-attr">properties</span>: {
            <span class="hljs-attr">pickable</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">pointId</span>: p.<span class="hljs-property">id</span>,
            <span class="hljs-attr">pointType</span>: p?.<span class="hljs-property">pointType</span>,
            <span class="hljs-attr">pointName</span>: p?.<span class="hljs-property">pointName</span>,
          }
        });

        pointEntityIdsRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">push</span>(id);
      });
      <span class="hljs-keyword">const</span> handler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">ScreenSpaceEventHandler</span>(viewer.<span class="hljs-property">scene</span>.<span class="hljs-property">canvas</span>);

      handler.<span class="hljs-title function_">setInputAction</span>(<span class="hljs-function">(<span class="hljs-params">movement: any</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> picked = viewer.<span class="hljs-property">scene</span>.<span class="hljs-title function_">pick</span>(movement.<span class="hljs-property">endPosition</span>);


        <span class="hljs-keyword">if</span> (
          <span class="hljs-title class_">Cesium</span>.<span class="hljs-title function_">defined</span>(picked) &amp;&amp;
          picked.<span class="hljs-property">id</span> &amp;&amp;                     <span class="hljs-comment">// Entity</span>
          picked?.<span class="hljs-property">id</span>?.<span class="hljs-property">properties</span>?.<span class="hljs-property">pickable</span>?.<span class="hljs-title function_">getValue</span>()
        ) {

          viewer.<span class="hljs-property">canvas</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cursor</span> = <span class="hljs-string">'pointer'</span>;


        } <span class="hljs-keyword">else</span> {
          viewer.<span class="hljs-property">canvas</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cursor</span> = <span class="hljs-string">'default'</span>;


        }
      }, <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">ScreenSpaceEventType</span>.<span class="hljs-property">MOUSE_MOVE</span>);
      <span class="hljs-comment">// ç‚¹å‡»æµ‹ç‚¹</span>
      handler.<span class="hljs-title function_">setInputAction</span>(<span class="hljs-function">(<span class="hljs-params">click: any</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> picked = viewer.<span class="hljs-property">scene</span>.<span class="hljs-title function_">pick</span>(click.<span class="hljs-property">position</span>);

        <span class="hljs-keyword">if</span> (
          <span class="hljs-title class_">Cesium</span>.<span class="hljs-title function_">defined</span>(picked) &amp;&amp;
          picked.<span class="hljs-property">id</span> &amp;&amp;
          picked.<span class="hljs-property">id</span>.<span class="hljs-property">billboard</span>
        ) {
          <span class="hljs-keyword">const</span> entity = picked.<span class="hljs-property">id</span>;

          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹åˆ°äº†:'</span>, entity.<span class="hljs-property">id</span>, picked?.<span class="hljs-property">id</span>?.<span class="hljs-property">properties</span>?.<span class="hljs-property">pointId</span>?.<span class="hljs-title function_">getValue</span>());

         

          <span class="hljs-comment">// ç¤ºä¾‹ï¼šç›¸æœºé£è¿‡å»</span>
          viewer.<span class="hljs-title function_">flyTo</span>(entity);
          
        }
      }, <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">ScreenSpaceEventType</span>.<span class="hljs-property">LEFT_CLICK</span>);


    }


  }, [dataSource]);
</code></pre>
<hr/>
<h2 data-id="heading-6">äº”ã€ç‚¹å‡»æµ‹ç‚¹é£è¡Œå®šä½</h2>
<h3 data-id="heading-7">pick å®ä½“</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> picked = viewer.scene.<span class="hljs-built_in">pick</span>(click.position);
</code></pre>
<p>åˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">if</span> (Cesium.<span class="hljs-built_in">defined</span>(picked) &amp;&amp; picked.id?.billboard) {
</code></pre>
<p>ç„¶åï¼š</p>
<pre><code class="hljs language-ini" lang="ini">viewer.flyTo(entity)<span class="hljs-comment">;</span>
</code></pre>
<p>ä½“éªŒç›´æ¥æ‹‰æ»¡ã€‚</p>
<hr/>
<h3 data-id="heading-8">é¼ æ ‡ Hover æ‰‹å‹</h3>
<p>ç»†èŠ‚å†³å®šé«˜çº§æ„Ÿï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">viewer.canvas.style.cursor</span> = <span class="hljs-string">'pointer'</span><span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h2 data-id="heading-9">å…­ã€ç›¸æœºç¯ç»•åŠ¨ç”»</h2>
<p>æ ¸å¿ƒæ€è·¯ï¼š</p>
<h4 data-id="heading-10">ğŸ‘‰ clock.onTick</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> remove = viewer.<span class="hljs-property">clock</span>.<span class="hljs-property">onTick</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-function">() =&gt;</span> {
  heading += <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Math</span>.<span class="hljs-title function_">toRadians</span>(<span class="hljs-number">0.2</span>);

  viewer.<span class="hljs-property">camera</span>.<span class="hljs-title function_">lookAt</span>(
    center,
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">HeadingPitchRange</span>(
      heading,
      <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Math</span>.<span class="hljs-title function_">toRadians</span>(-<span class="hljs-number">30</span>),
      range
    )
  );
<span class="hljs-comment">// è½¬æ»¡ä¸€åœˆåœæ­¢</span>
  <span class="hljs-keyword">if</span> (heading &gt;= <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Math</span>.<span class="hljs-property">TWO_PI</span>) {
    <span class="hljs-title function_">remove</span>();
    viewer.<span class="hljs-property">camera</span>.<span class="hljs-title function_">lookAtTransform</span>(<span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Matrix4</span>.<span class="hljs-property">IDENTITY</span>);
  }
});
</code></pre>
<p>æœ¬è´¨ï¼š</p>
<p>ğŸ‘‰ æ¯å¸§æ”¹å˜ headingã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯¦è§£ IEEE 754 æ ‡å‡†å®šä¹‰çš„ JavaScript 64 ä½æµ®ç‚¹æ•°]]></title>    <link>https://juejin.cn/post/7603309951227232306</link>    <guid>https://juejin.cn/post/7603309951227232306</guid>    <pubDate>2026-02-06T08:20:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603309951227232306" data-draft-id="7603352117639036937" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯¦è§£ IEEE 754 æ ‡å‡†å®šä¹‰çš„ JavaScript 64 ä½æµ®ç‚¹æ•°"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ•°å­¦"/> <meta itemprop="datePublished" content="2026-02-06T08:20:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–ŸèŒ¶é€’æ°´é»„å¸ˆå‚…"/> <meta itemprop="url" content="https://juejin.cn/user/3720403078610952"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯¦è§£ IEEE 754 æ ‡å‡†å®šä¹‰çš„ JavaScript 64 ä½æµ®ç‚¹æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3720403078610952/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–ŸèŒ¶é€’æ°´é»„å¸ˆå‚…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T08:20:46.000Z" title="Fri Feb 06 2026 08:20:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-light">.hljs-comment,.hljs-quote{color:#6b7394}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f5f7ff;color:#5e6687}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>JavaScript ä½¿ç”¨ IEEE 754 æ ‡å‡†å®šä¹‰çš„ 64 ä½æµ®ç‚¹æ ¼å¼è¡¨ç¤ºæ•°å€¼ã€‚</p>
<p><strong>64ä½ = 1ä½ç¬¦å·ä½(S) + 11ä½æŒ‡æ•°ä½(E) + 52ä½å°¾æ•°ä½(M)</strong></p>
<ul>
<li>ç¬¦å·ä½ï¼ˆSï¼‰ï¼š0è¡¨ç¤ºæ­£æ•°ï¼Œ1è¡¨ç¤ºè´Ÿæ•°ï¼Œå†³å®šæ•°å€¼çš„æ­£è´Ÿï¼›</li>
<li>æŒ‡æ•°ä½ï¼ˆEï¼‰ï¼šå­˜å‚¨æŒ‡æ•°çš„åç§»å€¼ï¼ˆåç§»é‡1023ï¼‰ï¼Œå†³å®šæ•°å€¼çš„æ•°é‡çº§ï¼›</li>
<li>å°¾æ•°ä½ï¼ˆMï¼‰ï¼šå­˜å‚¨æ•°å€¼çš„æœ‰æ•ˆæ•°å­—ï¼ˆäºŒè¿›åˆ¶ï¼‰ï¼Œä¸”æœ‰ä¸€ä¸ªéšå«çš„1ä½ï¼ˆè§„æ ¼åŒ–æ•°ï¼Œä¹Ÿå«å½’ä¸€åŒ–æ•°ï¼Œnormalized numberï¼‰ï¼Œæ‰€ä»¥å®é™…æœ‰æ•ˆä½æ•°æ˜¯ 52 + 1 = 53ä½ã€‚</li>
</ul>
<p>æŒ‡æ•°ä½ï¼ˆEï¼‰çš„åç§»é‡ 1023 æ˜¯æ ‡å‡†äººä¸ºè§„å®šçš„ï¼Œä¸ºçš„æ˜¯è®©åŸæœ¬çš„ 11 ä½æ— ç¬¦å·ä½çš„äºŒè¿›åˆ¶æŒ‡æ•°ä½èƒ½è¡¨ç¤ºæ­£è´ŸæŒ‡æ•°ï¼Œå¹¶ä¸”æ­£è´ŸæŒ‡æ•°å°½å¯èƒ½å¯¹ç§°ï¼ˆ-1022 ~ 1023ï¼‰ã€‚</p>
<p>å°¾æ•°ä½ï¼ˆMï¼‰çš„éšè—ä½ 1 ä¹Ÿæ˜¯æ ‡å‡†äººä¸ºè§„å®šçš„ï¼Œåˆ©ç”¨äº†éé›¶äºŒè¿›åˆ¶æ•°å½’ä¸€åŒ–åæ•´æ•°ä½å¿…ä¸º 1 çš„ç‰¹æ€§ã€‚</p>
<p>ä»»ä½•ä¸€ä¸ªéé›¶çš„äºŒè¿›åˆ¶æ•°ï¼Œéƒ½èƒ½å”¯ä¸€è¡¨ç¤ºä¸º <code>1.xx Ã— 2^e</code> çš„å½¢å¼ã€‚</p>
<ul>
<li>e æ˜¯äºŒè¿›åˆ¶çš„æŒ‡æ•°ï¼ˆæ•´æ•°ï¼Œå¯æ­£å¯è´Ÿï¼‰ï¼›</li>
<li>å½’ä¸€åŒ–åæ•´æ•°ä½å¿…ç„¶æ˜¯å›ºå®šä¸å˜çš„ 1ï¼Œè¿™æ˜¯äºŒè¿›åˆ¶çš„ç‰¹æ€§ã€‚</li>
</ul>
<p>IEEE 754 æ ‡å‡†æ­£æ˜¯åˆ©ç”¨äº†ã€Œå½’ä¸€åŒ–åæ•´æ•°ä½å¿…ä¸º 1ã€çš„ç‰¹æ€§ï¼Œåšäº†ä¸€ä¸ªå·§å¦™è®¾è®¡ï¼š</p>
<p>æ—¢ç„¶è¿™ä¸ª 1 æ˜¯æ‰€æœ‰éé›¶æµ®ç‚¹æ•°çš„å›ºå®šå‰ç¼€ï¼Œé‚£å°±ä¸ç”¨åœ¨ 64 ä½ä¸­å®é™…å­˜å‚¨å®ƒï¼Œè€Œæ˜¯ã€Œé»˜è®¤å­˜åœ¨è¿™ä¸ª 1ã€ï¼Œä»…å°†å°æ•°ç‚¹åçš„ xx æœ‰æ•ˆæ•°å­—éƒ¨åˆ†å­˜å…¥ 52 ä½çš„å°¾æ•°ä½ï¼ˆMï¼‰ä¸­ã€‚</p>
<p>åŸæœ¬å°¾æ•°ä½åªæœ‰ 52 ä½ï¼ŒåŠ ä¸Šè¿™ 1 ä½éšè—çš„å›ºå®šä¸å˜çš„ 1 åï¼Œå®é™…å¯ç”¨çš„æœ‰æ•ˆæ•°å­—ä½å°±å˜æˆäº† 53 ä½ï¼ˆ1 + 52ï¼‰ï¼Œç›´æ¥æå‡äº†æµ®ç‚¹æ•°çš„ç²¾åº¦ï¼Œä¸”æ²¡æœ‰å ç”¨é¢å¤–çš„å­˜å‚¨ç©ºé—´ã€‚</p>
<p><strong>åªæœ‰éé›¶çš„å½’ä¸€åŒ–æµ®ç‚¹æ•°æ‰æœ‰éšè—ä½ã€‚å¯¹äºæ¥è¿‘ 0 çš„æå°å€¼ï¼ˆéå½’ä¸€åŒ–æ•°ï¼‰ï¼ŒIEEE 754 ä¼šæ”¾å¼ƒå½’ä¸€åŒ–</strong>ï¼Œæ­¤æ—¶æ²¡æœ‰éšè—ä½ï¼Œåªæœ‰ 52 ä½æœ‰æ•ˆæ•°å­—ã€‚</p>
<h3 data-id="heading-0">æ¨å¯¼ï¼š53 ä½äºŒè¿›åˆ¶èƒ½è¡¨ç¤ºçš„æœ€å¤§æ•´æ•°æ˜¯ 2^53 - 1</h3>
<p>å½“ 53 ä½äºŒè¿›åˆ¶å°¾æ•°ä½ï¼ˆMï¼‰ï¼ˆåŒ…å«éšè—ä½ 1ï¼‰ï¼Œæ‰€æœ‰ä½éƒ½ä¸º 1 æ—¶ï¼Œå°±æ˜¯å®ƒèƒ½è¡¨ç¤ºçš„æœ€å¤§æ•°ï¼Œè®¡ç®—å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">111...111ï¼ˆ53ä¸ª1ï¼‰ = 2^52 + 2^51 + ... + 2^1 + 2^<span class="hljs-attr">0</span> = <span class="hljs-number">2</span>^<span class="hljs-number">53</span> - <span class="hljs-number">1</span>
</code></pre>
<p>è¿™ä¸ªæ•°å°±æ˜¯ JS ä¸­èƒ½ç²¾ç¡®è¡¨ç¤ºçš„æœ€å¤§å®‰å…¨æ•´æ•° <code>Number.MAX_SAFE_INTEGER</code>ã€‚</p>
<p><strong>ä¸€ä¸ªæ•´æ•° n è¢«ç§°ä¸ºå®‰å…¨æ•´æ•°ï¼Œå½“ä¸”ä»…å½“ï¼šå®ƒè‡ªèº«å’Œå‰åç›¸é‚»çš„ä¸¤ä¸ªæ•´æ•°ï¼ˆnâˆ’1ã€nã€n+1ï¼‰ï¼Œéƒ½èƒ½è¢«å”¯ä¸€ä¸”ç²¾ç¡®åœ°å­˜å‚¨è¡¨ç¤º</strong>ï¼Œä¸‰è€…çš„ 64 ä½æµ®ç‚¹æ•°ç¼–ç äº’ä¸é‡å¤ï¼Œä¸”ä¸å­˜åœ¨æˆªæ–­èˆå…¥åçš„å¤±çœŸæƒ…å†µã€‚</p>
<p>åœ¨ 2^53 ~ 2^1023 è¿™åŒºé—´å†…çš„ 2 çš„æ•´æ•°æ¬¡å¹‚èƒ½ç²¾ç¡®è¡¨ç¤ºï¼Œä½†éƒ½æ˜¯ã€Œå­¤ç«‹çš„ç²¾ç¡®æ•°ã€ï¼ˆç›¸é‚»æ•°å¤±çœŸï¼Œæ— è¿ç»­æ€§ï¼‰ã€‚</p>
<h3 data-id="heading-1">å°‘æ•°èƒ½<strong>ç²¾ç¡®å­˜å‚¨</strong>çš„ç‰¹æ®Šåè¿›åˆ¶å°æ•°</h3>
<p>ç»å¤§å¤šæ•°å°æ•°çš„äºŒè¿›åˆ¶ï¼Œéƒ½æ˜¯æ— é™å¾ªç¯çš„å°æ•°å½¢å¼ï¼Œéƒ½ä¸èƒ½ç²¾ç¡®å­˜å‚¨ï¼Œåªèƒ½æˆªæ–­èˆå…¥è¿‘ä¼¼å­˜å‚¨ã€‚</p>
<p>å¦‚æœä¸€ä¸ªåè¿›åˆ¶å°æ•°è½¬äºŒè¿›åˆ¶åæ˜¯ã€Œæœ‰é™ä½å°æ•°ã€ï¼Œå°±èƒ½è¢« 64 ä½æµ®ç‚¹æ•°ç²¾ç¡®å­˜å‚¨ï¼Œè¿™ç±»å°æ•°æœ‰æ˜ç¡®çš„æ•°å­¦è§„åˆ™ï¼š</p>
<blockquote>
<p><strong>åè¿›åˆ¶å°æ•°èƒ½ç²¾ç¡®è½¬ä¸ºæœ‰é™ä½äºŒè¿›åˆ¶çš„å……è¦æ¡ä»¶ï¼šå°æ•°éƒ¨åˆ†è½¬åŒ–æˆæœ€ç®€åˆ†æ•°å½¢å¼åï¼Œå®ƒçš„åˆ†æ¯ä»…åŒ…å«è´¨å› å­ 2ï¼ˆå³åˆ†æ¯æ˜¯ 2 çš„æ­£æ•´æ•°æ¬¡å¹‚ï¼š2Â¹ã€2Â²ã€2Â³...ï¼‰ã€‚</strong></p>
</blockquote>
<p>ç®€å•è¯´ï¼šå°æ•°éƒ¨åˆ†æ˜¯ <code>0.5(1/2)ã€0.25(1/4)ã€0.125(1/8)ã€0.0625(1/16)...</code> çš„ç»„åˆï¼Œå°±èƒ½ç²¾ç¡®å­˜å‚¨ã€‚</p>
<h3 data-id="heading-2"><strong>æµ®ç‚¹æ•°çš„ã€Œå¯è¡¨ç¤ºå€¼æ­¥é•¿ã€éšæ•°å€¼å¢å¤§è€Œå˜å¤§</strong>ï¼ˆç²¾åº¦è¡°å‡è§„å¾‹ï¼‰</h3>
<p>64 ä½æµ®ç‚¹æ•°çš„å¯è¡¨ç¤ºå€¼ä¸æ˜¯è¿ç»­çš„ï¼Œè€Œæ˜¯ç¦»æ•£çš„ã€ç­‰æ­¥é•¿çš„ï¼ˆåŒä¸€é‡çº§å†…æ­¥é•¿å›ºå®šï¼‰ï¼Œä¸”æ•°å€¼è¶Šå¤§ï¼Œé‡çº§è¶Šé«˜ï¼Œæ­¥é•¿è¶Šå¤§ã€‚è¿™æ˜¯æ•´æ•°å’Œå°æ•°çš„ç²¾åº¦éƒ½ä¼šéšæ•°å€¼å¢å¤§è€Œè¡°å‡çš„æ ¹æœ¬åŸå› ã€‚</p>
<p><strong>æ­¥é•¿æ˜¯ï¼ˆåŒä¸€é‡çº§å†…ï¼‰ç›¸é‚»ä¸¤ä¸ªå¯è¡¨ç¤ºçš„æµ®ç‚¹æ•°ä¹‹é—´çš„å·®å€¼ï¼Œç”±å½’ä¸€åŒ–åçš„æŒ‡æ•° e å†³å®š</strong>ï¼š</p>
<p><strong>æ­¥é•¿ = 2^(e-52)</strong> ï¼ˆ52 æ˜¯å°¾æ•°ä½ M çš„ä½æ•°ï¼‰ã€‚</p>
<ul>
<li>æ­¥é•¿è¶Šå°ï¼Œå¯è¡¨ç¤ºå€¼è¶Šå¯†é›†ï¼Œç²¾åº¦è¶Šé«˜ï¼›</li>
<li>æ­¥é•¿è¶Šå¤§ï¼Œå¯è¡¨ç¤ºå€¼è¶Šç¨€ç–ï¼Œç²¾åº¦è¶Šä½ã€‚</li>
</ul>
<p>æ­¥é•¿å¯¹æ•´æ•°å’Œå°æ•°çš„å½±å“ï¼š</p>
<p><strong>- å®‰å…¨æ•´æ•°åŒºï¼ˆeâ‰¤52ï¼‰ï¼šæ­¥é•¿ = 2^(e-52) â‰¤1 â†’ æ•´æ•°çš„æ­¥é•¿ä¸º 1ï¼Œèƒ½è¿ç»­ç²¾ç¡®è¡¨ç¤ºï¼›å°æ•°çš„æ­¥é•¿æå°ï¼Œè¯¯å·®å¯å¿½ç•¥ï¼›</strong></p>
<ul>
<li>2âµÂ³~2Â¹â°Â²Â³ åŒºï¼šæ­¥é•¿â‰¥2 â†’ æ•´æ•°çš„æ­¥é•¿å¤§äº 1ï¼Œæ— æ³•è¿ç»­ç²¾ç¡®è¡¨ç¤ºï¼ˆç›¸é‚»æ•´æ•°é‡å ï¼‰ï¼›å°æ•°çš„æ­¥é•¿æå¤§ï¼Œå‡ ä¹æ— æ³•åŒºåˆ†ç›¸è¿‘å°æ•°ï¼›</li>
<li>2Â¹â°Â²Â³ ä»¥ä¸Šï¼šè¶…å‡ºæŒ‡æ•°èŒƒå›´ï¼Œç›´æ¥å˜æˆ Infinityï¼Œæ— æ³•è¡¨ç¤ºä¸ºå¸¸è§„æ•°ã€‚</li>
</ul>
<h3 data-id="heading-3">MAX_VALUE å’Œ MIN_VALUE</h3>
<p>æœ€å¤§æ­£å€¼ï¼š<code>Number.MAX_VALUE = 1.7976931348623157Ã—10Â³â°â¸</code></p>
<p>æŒ‡æ•°ä½å–å½’ä¸€åŒ–æ•°çš„æœ€å¤§å­˜å‚¨å€¼ 2046ï¼ˆå®é™…æŒ‡æ•° 1023ï¼‰ï¼Œå°¾æ•°ä½ 52 ä½å…¨ 1ï¼ˆæ­¤æ—¶æµ®ç‚¹æ•°å–åˆ°å½’ä¸€åŒ–æ•°çš„æœ€å¤§æå€¼ï¼Œå†å¤§å°±è¶…å‡ºæŒ‡æ•°èŒƒå›´ï¼Œå˜æˆ<code>Infinity</code>ï¼‰ï¼›</p>
<p>æœ€å°æ­£å€¼ï¼š<code>Number.MIN_VALUE = 5Ã—10â»Â³Â²â´</code>ï¼ˆæ— é™æ¥è¿‘ 0ï¼‰</p>
<p>æŒ‡æ•°ä½å–å…¨ 0ï¼ˆéå½’ä¸€åŒ–æ•°ï¼Œå®é™…æŒ‡æ•° -1023ï¼‰ï¼Œå°¾æ•°ä½ä»…æœ€å 1 ä½ä¸º 1ã€å…¶ä½™å…¨ 0ï¼ˆæ­¤æ—¶æµ®ç‚¹æ•°å–åˆ°èƒ½è¡¨ç¤ºçš„æœ€å°é 0 æ­£å€¼ï¼Œå†å°å°±ä¼šè¢«èˆå…¥ä¸º 0ï¼‰ã€‚</p>
<p>è¿™æ˜¯ 64 ä½åŒç²¾åº¦æµ®ç‚¹æ•°åŸºäº IEEE 754 æ ‡å‡†çš„ç¡¬ä»¶å­˜å‚¨æé™ï¼Œæ˜¯æµ®ç‚¹æ•°èƒ½è¡¨ç¤ºçš„æ‰€æœ‰æ•°å€¼ï¼ˆæ•´æ•° + å°æ•°ï¼‰çš„æ•´ä½“è¾¹ç•Œï¼Œè€Œéä¸“é—¨é’ˆå¯¹æ•´æ•°çš„èŒƒå›´ã€‚</p>
<h3 data-id="heading-4">Â±Infinity å’Œ NaN å¦‚ä½•è¡¨ç¤º</h3>



































<table><thead><tr><th/><th><strong>Infinityï¼ˆæ­£æ— ç©·ï¼‰</strong></th><th><strong>-Infinityï¼ˆè´Ÿæ— ç©·ï¼‰</strong></th><th><strong>NaNï¼ˆéæ•°ï¼‰</strong></th></tr></thead><tbody><tr><td>1ä½ç¬¦å·ä½ï¼ˆSï¼‰</td><td>0è¡¨ç¤ºæ­£æ•°</td><td>1è¡¨ç¤ºè´Ÿæ•°</td><td>0å’Œ1éƒ½å¯ï¼Œæ— æ„ä¹‰</td></tr><tr><td>11ä½æŒ‡æ•°ä½ï¼ˆEï¼‰</td><td>11ä½å…¨1</td><td>11ä½å…¨1</td><td>11ä½å…¨1</td></tr><tr><td>52ä½å°¾æ•°ä½ï¼ˆMï¼‰</td><td>52ä½å…¨0</td><td>52ä½å…¨0</td><td>52ä½éå…¨0ï¼ˆå³ä»»æ„1ä½æ˜¯1å³å¯ï¼‰</td></tr><tr><td/><td><strong>S0 + Eå…¨1 + Må…¨0</strong></td><td><strong>S1 + Eå…¨1 + Må…¨0</strong></td><td><strong>S01 + Eå…¨1 + Mé0</strong></td></tr></tbody></table>
<p><strong>Eå…¨1 è¡¨ç¤º Â±Infinity å’Œ NaN çš„ç‰¹æ®Šå€¼ï¼Œè€Œ Eå…¨0 è¡¨ç¤ºéå½’ä¸€åŒ–æ•°ï¼ˆæ¥è¿‘ 0 çš„æå°å€¼ï¼Œæ— éšè—ä½ï¼‰ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOSè‡ªå®šä¹‰TabBar]]></title>    <link>https://juejin.cn/post/7603352117638922249</link>    <guid>https://juejin.cn/post/7603352117638922249</guid>    <pubDate>2026-02-06T07:46:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603352117638922249" data-draft-id="7603309951226921010" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOSè‡ªå®šä¹‰TabBar"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-06T07:46:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ°å°‘å¹´"/> <meta itemprop="url" content="https://juejin.cn/user/1591748567509486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOSè‡ªå®šä¹‰TabBar
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748567509486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ°å°‘å¹´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:46:53.000Z" title="Fri Feb 06 2026 07:46:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">DDTabBar è‡ªå®šä¹‰ TabBar</h2>
<h3 data-id="heading-1">æ¦‚è¿°</h3>
<p>DDTabBar æ¨¡å—åº•éƒ¨å¯¼èˆªæ çš„è‡ªå®šä¹‰å®ç°ï¼Œ</p>
<ul>
<li>æ”¯æŒ <strong>æ™®é€šæ ·å¼</strong> ä¸ <strong>æ¶²æ€ç»ç’ƒï¼ˆLiquid Glassï¼‰æ ·å¼</strong> åŒå½¢æ€åˆ‡æ¢ã€‚</li>
<li>æ”¯æŒæš—é»‘æ¨¡å¼å’Œé•¿è¾ˆæ¨¡å¼</li>
<li>æ”¯æŒLottieï¼Œgifï¼Œpngå›¾ç‰‡èµ„æº</li>
<li>æ”¯æŒè‡ªå®šä¹‰è§’æ ‡ï¼Œå°çº¢ç‚¹</li>
<li>æ ¹æ®æ¥å£åŠ¨æ€æ›´æ–°itemæ•°é‡ï¼Œé¡ºåº</li>
</ul>
<hr/>
<h3 data-id="heading-2">æ•ˆæœ</h3>
<p>æ¶²æ€ç»ç’ƒ-æš—é»‘</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff8cf5d212c14acfaf8f20bfd750453b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGw5bCR5bm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770968812&amp;x-signature=4sZQdJHdYjmKV66UAGqTETqJiok%3D" alt="æš—é»‘" width="30%" loading="lazy"/>
<p>æ¶²æ€ç»ç’ƒ-ç™½å¤©</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/957e679003cf4fab875759695a895144~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGw5bCR5bm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770968812&amp;x-signature=YYPkWCeAhQMazKXdVrJn3L9I%2Byg%3D" width="30%" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/684ee7a68095432aa4879cc6b7db7434~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGw5bCR5bm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770968812&amp;x-signature=%2FaBRiNfkwauFsmiA1TCmsB5h8EQ%3D" width="30%" loading="lazy"/>
<p>æ™®é€šæ¨¡å¼</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b13fde133acb41e4b929d74c259d9dbe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGw5bCR5bm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770968812&amp;x-signature=AJWcmW7bLWcDmkKOcYimhbHIy4c%3D" width="30%" loading="lazy"/>
<p>é•¿è¾ˆç‰ˆ</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/997cccb5b897401f866d6e3513d11cae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGw5bCR5bm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770968812&amp;x-signature=r76eHLLelwWiFz63RagoH%2BZM5vU%3D" width="30%" loading="lazy"/>
<hr/>
<h3 data-id="heading-3">ç›®å½•ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">DDTabBar/
â”œâ”€â”€ Manager/                    <span class="hljs-comment"># ç®¡ç†ä¸åŠ è½½</span>
â”‚   â”œâ”€â”€ DDTabBarManager.swift           <span class="hljs-comment"># TabBar å•ä¾‹ã€æ•°æ®ä¸é…ç½®</span>
â”‚   â”œâ”€â”€ DDTabBarItemOperationBadgeView.swift  <span class="hljs-comment"># è¿è¥è§’æ ‡</span>
â”‚   â”œâ”€â”€ TabBarCacheManager.swift        <span class="hljs-comment"># é…ç½®ç¼“å­˜</span>
â”‚   â”œâ”€â”€ TabBarResourceLoader.swift      <span class="hljs-comment"># å›¾æ ‡/Lottie èµ„æºåŠ è½½</span>
â”‚   â””â”€â”€ TabbarRNRouterInterceptor.swift <span class="hljs-comment"># RN è·¯ç”±æ‹¦æˆª</span>
â”œâ”€â”€ Model/
â”‚   â”œâ”€â”€ DDTabBarItem.swift              <span class="hljs-comment"># (é¢„ç•™) Item å®šä¹‰</span>
â”‚   â””â”€â”€ TabBarModel.swift               <span class="hljs-comment"># TabBar ä¸ Item æ•°æ®æ¨¡å‹</span>
â”œâ”€â”€ Util/
â”‚   â”œâ”€â”€ DDTaBarEnum.h                   <span class="hljs-comment"># æšä¸¾ï¼šåœºæ™¯ã€Item ç±»å‹ã€å›¾ç‰‡ç±»å‹</span>
â”‚   â””â”€â”€ DDTabBarUtil.swift              <span class="hljs-comment"># å·¥å…·ï¼šæ›å…‰åŸ‹ç‚¹ã€æ•°æ®æ¯”è¾ƒç­‰</span>
â””â”€â”€ View/
    â”œâ”€â”€ DDTabBar.swift                  <span class="hljs-comment"># ä¸»å…¥å£ï¼šåŒæ ·å¼å®¹å™¨ä¸åˆ‡æ¢é€»è¾‘</span>
    â”œâ”€â”€ DDTabBarItemBadgeView.swift     <span class="hljs-comment"># è§’æ ‡è§†å›¾</span>
    â”œâ”€â”€ DDTabBarItemContainer.swift     <span class="hljs-comment"># å•ä¸ª Tab å®¹å™¨ï¼ˆå¯ç‚¹å‡»ï¼‰</span>
    â”œâ”€â”€ DDTabBarItemContentView.swift   <span class="hljs-comment"># Tab å†…å®¹ï¼ˆå›¾æ ‡+æ–‡æ¡ˆ+è§’æ ‡ï¼‰</span>
    â”œâ”€â”€ TabbarWebViewController.swift   <span class="hljs-comment"># Web Tab è½åœ°é¡µ</span>
    â””â”€â”€ README.md                       <span class="hljs-comment"># æœ¬æ–‡æ¡£</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">åŒæ ·å¼æ¶æ„</h3>
<h4 data-id="heading-5">1. æ ·å¼ç±»å‹</h4>




















<table><thead><tr><th>æ ·å¼</th><th>ç±»å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ™®é€šæ ·å¼</strong></td><td><code>DDTabBarNormalView</code></td><td>å…¨å®½ TabBarï¼Œæ¯›ç»ç’ƒ + èƒŒæ™¯å›¾/èƒŒæ™¯è‰²ï¼Œå¸¸è§„å¸ƒå±€</td></tr><tr><td><strong>æ¶²æ€ç»ç’ƒ</strong></td><td><code>DDTabBarLiquidGlassView</code></td><td>åœ†è§’èƒ¶å›Šå®¹å™¨ï¼ŒiOS 26 ä¸‹ä½¿ç”¨ <code>UIGlassEffect</code>ï¼Œæ”¯æŒæš—é»‘é€‚é…</td></tr></tbody></table>
<h4 data-id="heading-6">2. åˆ‡æ¢æ¡ä»¶</h4>
<p>æ¶²æ€ç»ç’ƒæ˜¯å¦å±•ç¤ºç”± <code>DDTabBar.isLiquidGlassActive()</code> å†³å®šï¼š</p>
<ul>
<li><code>DDLiquidGlassManager.shared.isLiquidGlassActive == true</code></li>
<li><strong>ä¸”</strong> éé•¿è¾ˆç‰ˆï¼š<code>!DDBasicInfoManager.shared.isAPVersion</code></li>
</ul>
<p>æ»¡è¶³æ—¶æ˜¾ç¤º <code>DDTabBarLiquidGlassView</code>ï¼Œå¦åˆ™æ˜¾ç¤º <code>DDTabBarNormalView</code>ã€‚</p>
<h4 data-id="heading-7">3. çŠ¶æ€åŒæ­¥</h4>
<ul>
<li>é€šè¿‡é€šçŸ¥ç›‘å¬å¹¶åˆ·æ–°å½“å‰å±•ç¤ºçš„æ ·å¼ï¼š
<ul>
<li><code>DDLiquidGlassManager.StateDidChangedNotification</code>ï¼šæ¶²æ€ç»ç’ƒå¼€å…³å˜åŒ–</li>
<li><code>.DDDarkModeShowDarkChanged</code>ï¼šæš—é»‘æ¨¡å¼å˜åŒ–</li>
<li><code>kChangeToAPVersionNotification</code>ï¼šé•¿è¾ˆç‰ˆåˆ‡æ¢</li>
</ul>
</li>
<li>ä¸¤ç§è§†å›¾çš„æ•°æ®ä¸é€‰ä¸­ç´¢å¼•ä¼šåŒæ—¶æ›´æ–°ï¼Œä¿è¯åˆ‡æ¢æ ·å¼æ—¶çŠ¶æ€ä¸€è‡´ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">ä¸»å…¥å£å®ç°ç»†èŠ‚ï¼ˆDDTabBarï¼‰</h3>
<ul>
<li>** é»˜è®¤æ•°æ®ï¼Œç¼“å­˜æ•°æ®ï¼Œæ¥å£æ•°æ® è°ƒç”¨updateæ—¶æ›´æ–°DDTabBarLiquidGlassView å’ŒDDTabBarNormalViewï¼Œæ›´æ–°æ—¶å…ˆåˆ¤æ–­å†…å­˜ä¸­æ˜¯å¦æœ‰è¯¥tabï¼Œåªæ›´æ–°tabæ•°æ®ä¸å½±å“é£˜çº¢è§’æ ‡ï¼Œæ²¡æœ‰åˆ™åˆ›å»ºtabçš„viewï¼›</li>
<li>**æ›´æ–°å‰ä¸ºæ¯ä¸ª Item è®¾ç½®æš—é»‘å›¾ï¼ˆ<code>checkDataDark</code> / <code>uncheckDataDark</code> æŒ‰ itemType å–æœ¬åœ°å›¾åï¼‰ã€‚</li>
<li><strong>å¸ƒå±€</strong>ï¼š<code>layoutSubviews</code> ä¸­ <code>normalView.frame = bounds</code>ã€<code>liquidGlassView.frame = bounds</code>ï¼Œä¸¤å¥—è§†å›¾å§‹ç»ˆå åœ¨åŒä¸€åŒºåŸŸï¼Œé€šè¿‡ <code>isHidden</code> åˆ‡æ¢æ˜¾ç¤ºã€‚</li>
<li><strong>é•¿è¾ˆç‰ˆé«˜åº¦</strong>ï¼š<code>sizeThatFits</code> åœ¨ <code>DDBasicInfoManager.shared.isAPVersion</code> æ—¶é«˜åº¦ +17ptã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">æ™®é€šæ ·å¼ï¼ˆDDTabBarNormalViewï¼‰</h3>
<h4 data-id="heading-10">è§†å›¾å±‚çº§ä¸å¸ƒå±€</h4>
<ul>
<li>
<p><strong>å­è§†å›¾é¡ºåº</strong>ï¼ˆè‡ªåº•å‘ä¸Šï¼‰ï¼š<code>visualEffectView</code>ï¼ˆå…¨ boundsï¼‰â†’ <code>backgroundImageView</code>ï¼ˆå…¨ boundsï¼‰â†’ <code>contentView</code>ï¼ˆå…¨ boundsï¼‰ã€‚</p>
</li>
<li>
<p><strong>Item å¸ƒå±€</strong>ï¼šå…¨å®½å‡åˆ†å¸ƒå±€ï¼Œ<code>itemHeight</code> é»˜è®¤ 48ã€‚</p>
</li>
<li>
<p><strong>é¦–é¡µå°ç«ç®­</strong>ï¼šå¯¹ç¬¬ä¸€ä¸ª item å®¹å™¨é™„åŠ é¦–é¡µâ€œå°ç«ç®­â€è§†å›¾ï¼ˆ<code>HomeTabBarItem</code>ï¼‰ï¼Œç”¨äºé¦–é¡µç‰¹æ®ŠåŠ¨æ•ˆ/å›åˆ°é¡¶éƒ¨èƒ½åŠ›çš„æ‰¿è½½ã€‚</p>
</li>
<li>
<p><strong>æš—é»‘</strong>ï¼šä¸æ”¯æŒæš—é»‘</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-11">æ¶²æ€ç»ç’ƒæ ·å¼ï¼ˆDDTabBarLiquidGlassViewï¼‰</h3>
<h4 data-id="heading-12">1. è§†è§‰ä¸å±‚çº§</h4>
<ul>
<li><strong>å®¹å™¨</strong>ï¼šåœ†è§’èƒ¶å›Šï¼Œå®½åº¦ <code>kScreenWidth - 30</code>ï¼Œæ°´å¹³å±…ä¸­ï¼Œé«˜åº¦ 62ptï¼ˆ<code>containerH</code>ï¼‰</li>
<li><strong>å±‚çº§</strong>ï¼ˆè‡ªåº•å‘ä¸Šï¼‰ï¼š
<ul>
<li><code>shadowView</code>ï¼šæš—è‰²æ¨¡ç³Šè§†å›¾ï¼Œç”¨äºé˜´å½±/æš—é»‘å¢å¼º</li>
<li><code>effectView</code>ï¼šä½¿ç”¨ç³»ç»Ÿæ–°å¢çš„ç»ç’ƒæ•ˆæœï¼ˆ<code>UIGlassEffect</code>ï¼‰ï¼Œå¹¶å¼€å¯äº¤äº’èƒ½åŠ›ï¼ˆinteractiveï¼‰ä»¥è·å¾—æ›´è‡ªç„¶çš„ç»ç’ƒè§¦æ„Ÿä¸åŠ¨æ€åé¦ˆï¼‰</li>
<li><code>contentView</code>ï¼šæ”¾ç½®å„ä¸ªtabItem</li>
<li><code>segmentControl</code>ï¼šiOS 26<code>UISegmentedControl</code>å…·æœ‰ç‚¹å‡»æ‹–åŠ¨æœ‰æ”¾å¤§é•œæ•ˆæœï¼Œç”¨äºäº‹ä»¶å“åº”ï¼ŒUISegmentedControlæœ‰valueChangedï¼Œä½†æˆ‘ä»¬è¿˜è¦æ±‚å†æ¬¡ç‚¹å‡»åŒä¸€ä¸ªitemä¸šåŠ¡ï¼Œåˆ‡æ¢åˆ°ç›®æ ‡itemæ—¶ï¼Œè‹¥æ˜¯æ‹¦æˆªçš„éœ€è¦æŠŠselectedSegmentIndexè®¾ç½®ä¸ºä¸Šä¸€ä¸ªlastSelectedIndex</li>
</ul>
</li>
</ul>
<p>è™½ç„¶ç»™
<code>segmentControl.insertSegment(withTitle: "", at: idx, animated: false)</code></p>
<p>ä½†ä»éœ€è¦è®¾ç½®ï¼Œä¸ç„¶ä¼šæœ‰ç°è‰²çš„èƒŒæ™¯</p>
<pre><code class="hljs language-python" lang="python">DispatchQueue.main.<span class="hljs-keyword">async</span> {
            <span class="hljs-keyword">for</span> subview <span class="hljs-keyword">in</span> self.segmentControl.subviews {
                <span class="hljs-keyword">if</span> subview <span class="hljs-keyword">is</span> UIImageView &amp;&amp; subview != self.segmentControl.subviews.last {
                    subview.alpha = <span class="hljs-number">0</span>
                }
            }
        }
</code></pre>
<h4 data-id="heading-13">3. æš—é»‘ä¸é€‰ä¸­æ€</h4>
<ul>
<li><code>isCurrentShowDark</code> æ§åˆ¶ï¼š
<ul>
<li>é€‰ä¸­æ§½èƒŒæ™¯è‰²ï¼šæš—é»‘æ—¶ä¸º <code>RGBA(0x000000, 0.2)</code>ï¼Œå¦åˆ™ä¸º <code>gray.withAlphaComponent(0.15)</code></li>
<li>æš—é»‘æ—¶æ˜¾ç¤º <code>shadowView</code>ï¼Œéæš—é»‘æ—¶éšè—</li>
</ul>
</li>
<li>Item ä½¿ç”¨ <code>isSupportDark = true</code>ï¼Œä¼šä½¿ç”¨æ¨¡å‹ä¸­çš„ <code>checkDataDark</code> / <code>uncheckDataDark</code> ç­‰æš—é»‘èµ„æºã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-14">DDTabBarItemContentView</h3>
<h4 data-id="heading-15">ContentViewï¼ˆDDTabBarItemContentViewï¼‰</h4>
<ul>
<li><strong>å­è§†å›¾</strong>ï¼š<code>iconImageView</code>ï¼ˆDDIconImageViewï¼Œæ”¯æŒ Lottie/é™å›¾/Gifï¼‰ã€<code>titleLabel</code>ã€<code>businessBadgeView</code>ï¼ˆè¿è¥è§’æ ‡ï¼‰ã€<code>badgeView</code>ï¼ˆæ•°å­—/çº¢ç‚¹è§’æ ‡ï¼‰ã€‚</li>
<li><strong>ä¸¤ç§å±•ç¤ºæ¨¡å¼</strong>ï¼ˆ<code>itemData.style</code>ï¼‰ï¼š
<ul>
<li><strong>style 0ï¼ˆå°å›¾ï¼‰</strong>ï¼šå›¾ç‰‡å’Œæ–‡å­—çš„å½¢å¼ã€‚</li>
<li><strong>style 1ï¼ˆå¤§å›¾ï¼‰</strong>ï¼šåªæœ‰ä¸€ä¸ªå¤§å›¾ï¼›<code>titleLabel.isHidden = true</code>ï¼Œ<code>iconImageView.isHidden = false</code>ã€‚</li>
</ul>
</li>
<li><strong>é€‰ä¸­/æœªé€‰</strong>ï¼šæ ¹æ® <code>selected</code> ä¸ <code>DDDarkModeManager.shared.isCurrentShowDark</code>ã€<code>isSupportDark</code> é€‰æ‹© <code>checkResource</code>/<code>checkDataDark</code>ã€<code>uncheckResource</code>/<code>uncheckDataDark</code> åŠå¯¹åº”æ–‡å­—é¢œè‰²ï¼Œè°ƒç”¨ <code>iconImageView.setData(data:type:style)</code> ä¸ <code>iconImageView.play()</code>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-16">æ•°æ®ä¸å±•ç¤º</h3>
<h4 data-id="heading-17">1. æ•°æ®æµæ¦‚è§ˆ</h4>
<ul>
<li><strong>é…ç½®æ¥æº</strong>ï¼š<code>DDTabBarManager.getTabBarConfigData(scene:parmars:aipComplet:)</code> æ‹‰å–æ¥å£ï¼Œç» <code>TabBarResourceLoader</code> ä¸‹è½½å›¾æ ‡/Lottie åï¼Œç”± <code>dealTabBarData</code> æ›´æ–° <code>tabBarModel</code> å¹¶è°ƒç”¨ <code>tabBar.update(data:items:)</code>ã€‚</li>
<li><strong>æ¨¡å‹</strong>ï¼š
<ul>
<li><code>TabBarModel</code>ï¼šæ•´æ¡ Tab é…ç½®ï¼ˆèƒŒæ™¯è‰²/å›¾ã€<code>bottom_list</code>ã€åœºæ™¯ã€æ¥æºç­‰ï¼‰</li>
<li><code>TabBarItemModel</code>ï¼šå•ä¸ª Tabï¼ˆç±»å‹ã€æ–‡æ¡ˆã€é€‰ä¸­/æœªé€‰èµ„æºã€é“¾æ¥ã€è§’æ ‡ç­‰ï¼‰</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-18">ä¸ç³»ç»Ÿ UITabBar çš„é…åˆ</h3>
<ul>
<li>
<p><code>DDTabBar</code> ä½œä¸ºè‡ªå®šä¹‰è§†å›¾åŠ åœ¨ TabBarController çš„ tabBar ä¸Šï¼Œç³»ç»Ÿè‡ªå¸¦çš„ Tab æŒ‰é’®éœ€éšè—ã€‚ä»£ç ä¸­é€šè¿‡ <code>UITabBar</code> çš„ extension é‡å†™ <code>addGestureRecognizer</code>ï¼Œå¯¹åä¸º <code>_UIContinuousSelectionGestureRecognizer</code> çš„ç±»ç¦ç”¨ï¼›</p>
</li>
<li>
<p>å¹¶æš´éœ² <code>recursiveFindTabButtons(in:)</code>ï¼Œé€’å½’æŸ¥æ‰¾ <code>_UITabBarButton</code> ä¸ <code>_UITabButton</code> è®¾ä¸º <code>isHidden = true</code>ï¼Œä»¥åŠ <code>_UITabBarPlatterView</code> éšè—ï¼Œä»è€Œåªå±•ç¤ºè‡ªå®šä¹‰çš„ DDTabBar å†…å®¹ã€‚</p>
</li>
</ul>
<p>æ­¤å¤„ä¼šå¯¹ç§æœ‰å±æ€§æ€æ··æ·†å¤„ç†</p>
<hr/>
<h3 data-id="heading-19">å°ç»“</h3>





























<table><thead><tr><th>èƒ½åŠ›</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åŒæ ·å¼</td><td>æ™®é€šæ ·å¼ï¼ˆå…¨å®½æ¯›ç»ç’ƒ+èƒŒæ™¯ï¼‰ä¸æ¶²æ€ç»ç’ƒæ ·å¼ï¼ˆåœ†è§’èƒ¶å›Š + iOS26 ç»ç’ƒæ•ˆæœï¼‰</td></tr><tr><td>åˆ‡æ¢</td><td>ç”±æ¶²æ€ç»ç’ƒå¼€å…³ + æ˜¯å¦é•¿è¾ˆç‰ˆå†³å®šï¼Œé€šè¿‡é€šçŸ¥è‡ªåŠ¨åˆ·æ–°</td></tr><tr><td>iOS 26</td><td>æ¶²æ€ç»ç’ƒä½¿ç”¨ <code>UIGlassEffect</code> + æŸ“è‰²å±‚ï¼Œæš—é»‘ä¸‹é…åˆé˜´å½±ä¸æš—è‰²é€‰ä¸­æ§½</td></tr><tr><td>æ•°æ®</td><td>æ¥å£ â†’ TabBarModel/TabBarItemModel â†’ ä¸¤å¥— View åŒæ­¥æ›´æ–°ä¸é€‰ä¸­ç´¢å¼•</td></tr><tr><td>åŸ‹ç‚¹</td><td>ç‚¹å‡»/æ›å…‰å‡å¸¦ <code>liquidGlassState</code> åŒºåˆ† liquid / other</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RadioIndication çš„å†å² - HIDL æ—¶ä»£å°±å·²å­˜åœ¨]]></title>    <link>https://juejin.cn/post/7603444191447777314</link>    <guid>https://juejin.cn/post/7603444191447777314</guid>    <pubDate>2026-02-06T08:23:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603444191447777314" data-draft-id="7603383311530639375" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RadioIndication çš„å†å² - HIDL æ—¶ä»£å°±å·²å­˜åœ¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T08:23:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RadioIndication çš„å†å² - HIDL æ—¶ä»£å°±å·²å­˜åœ¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T08:23:21.000Z" title="Fri Feb 06 2026 08:23:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€æ—¶é—´çº¿</h3>
<h4 data-id="heading-1">1. HIDL æ—¶ä»£ï¼ˆ2016å¹´èµ·ï¼‰</h4>
<p>RadioIndication åœ¨ HIDL æ—¶ä»£å°±å·²å­˜åœ¨ï¼Œä½œä¸º IRadioIndication æ¥å£çš„å®ç°ï¼š</p>
<pre><code class="hljs language-1.0/IRadioIndication.hal" lang="1.0/IRadioIndication.hal">package android.hardware.radio@1.0;

interface IRadioIndication {
    oneway radioStateChanged(RadioIndicationType type, RadioState radioState);
    oneway callStateChanged(RadioIndicationType type);
    oneway networkStateChanged(RadioIndicationType type);
    // ... æ›´å¤šå›è°ƒæ–¹æ³•
}
</code></pre>
<p>HIDL ç‰ˆæœ¬çš„ RadioIndication å®ç°ï¼ˆç”¨äºæµ‹è¯•ï¼‰ï¼š</p>
<pre><code class="hljs language-412:462:hardware_interfaces/radio/1.0/vts/functional/radio_hidl_hal_utils_v1_0.h" lang="412:462:hardware_interfaces/radio/1.0/vts/functional/radio_hidl_hal_utils_v1_0.h">class RadioIndication : public IRadioIndication {
   protected:
    RadioHidlTest&amp; parent;

   public:
    RadioIndication(RadioHidlTest&amp; parent);
    virtual ~RadioIndication() = default;

    Return&lt;void&gt; radioStateChanged(RadioIndicationType type, RadioState radioState);
    Return&lt;void&gt; callStateChanged(RadioIndicationType type);
    Return&lt;void&gt; networkStateChanged(RadioIndicationType type);
    Return&lt;void&gt; newSms(RadioIndicationType type, const hidl_vec&lt;uint8_t&gt;&amp; pdu);
    // ...
}
</code></pre>
<h4 data-id="heading-2">2. HIDL ç‰ˆæœ¬æ¼”è¿›</h4>
<p>ä» Android 7.0 åˆ° 12ï¼ŒHIDL æŒç»­æ¼”è¿›ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-symbol">IRadioIndication@</span><span class="hljs-number">1.0</span>  (<span class="hljs-number">2016</span>, Android <span class="hljs-number">7.0</span>)
<span class="hljs-symbol">IRadioIndication@</span><span class="hljs-number">1.1</span>  (<span class="hljs-number">2017</span>, Android <span class="hljs-number">8.0</span>)
<span class="hljs-symbol">IRadioIndication@</span><span class="hljs-number">1.2</span>  (<span class="hljs-number">2018</span>, Android <span class="hljs-number">9.0</span>)
<span class="hljs-symbol">IRadioIndication@</span><span class="hljs-number">1.3</span>  (<span class="hljs-number">2019</span>, Android <span class="hljs-number">10</span>)
<span class="hljs-symbol">IRadioIndication@</span><span class="hljs-number">1.4</span>  (<span class="hljs-number">2019</span>, Android <span class="hljs-number">10</span>)
<span class="hljs-symbol">IRadioIndication@</span><span class="hljs-number">1.5</span>  (<span class="hljs-number">2020</span>, Android <span class="hljs-number">11</span>)
<span class="hljs-symbol">IRadioIndication@</span><span class="hljs-number">1.6</span>  (<span class="hljs-number">2020</span>, Android <span class="hljs-number">12</span>)
</code></pre>
<h4 data-id="heading-3">3. AIDL æ—¶ä»£ï¼ˆä» Android 13 å¼€å§‹ï¼‰</h4>
<p>Android 13 å¼€å§‹è¿ç§»åˆ° AIDLï¼Œä½†ä¸ºäº†å…¼å®¹ï¼Œç³»ç»Ÿæä¾›äº†<strong>å…¼å®¹å±‚</strong>ï¼š</p>
<pre><code class="hljs language-33:243:hardware_interfaces/radio/aidl/compat/libradiocompat/include/libradiocompat/RadioIndication.h" lang="33:243:hardware_interfaces/radio/aidl/compat/libradiocompat/include/libradiocompat/RadioIndication.h">class RadioIndication : public V1_6::IRadioIndication {
    std::shared_ptr&lt;DriverContext&gt; mContext;

    // AIDL å›è°ƒæ¥å£
    GuaranteedCallback&lt;
        ::aidl::android::hardware::radio::data::IRadioDataIndication,
        ::aidl::android::hardware::radio::data::IRadioDataIndicationDefault, true&gt;
        mDataCb;
    GuaranteedCallback&lt;
        ::aidl::android::hardware::radio::messaging::IRadioMessagingIndication,
        ::aidl::android::hardware::radio::messaging::IRadioMessagingIndicationDefault, true&gt;
        mMessagingCb;
    // ... æ›´å¤š AIDL å›è°ƒæ¥å£
        
    // ç»§æ‰¿è‡ª HIDL V1.6 çš„æ–¹æ³•å®ç°
    Return&lt;void&gt; radioStateChanged(V1_0::RadioIndicationType type,
                                   V1_0::RadioState radioState) override;
    Return&lt;void&gt; callStateChanged(V1_0::RadioIndicationType type) override;
    // ...
}
</code></pre>
<h3 data-id="heading-4">äºŒã€HIDL vs AIDL çš„æ ¸å¿ƒåŒºåˆ«</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>HIDL</th><th>AIDL</th></tr></thead><tbody><tr><td><strong>å®šä¹‰è¯­è¨€</strong></td><td>HAL (Hardware Abstraction Language) - .halæ–‡ä»¶</td><td>Android Interface Definition Language - .aidlæ–‡ä»¶</td></tr><tr><td><strong>ç‰ˆæœ¬ç®¡ç†</strong></td><td>å†…ç½®ç‰ˆæœ¬æ§åˆ¶ (@1.0, @1.1, ...)</td><td>æ¥å£ç‰ˆæœ¬å­—ç¬¦ä¸²</td></tr><tr><td><strong>æ¨¡å—åˆ†è£‚</strong></td><td>å•ä¸€ IRadioIndication æ¥å£åŒ…å«æ‰€æœ‰å›è°ƒ</td><td>æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹æ¥å£ï¼š<br/>- IRadioDataIndication<br/>- IRadioMessagingIndication<br/>- IRadioModemIndication<br/>- IRadioNetworkIndication<br/>- IRadioSimIndication<br/>- IRadioVoiceIndication<br/>- IRadioImsIndication</td></tr><tr><td><strong>ç±»å‹ç³»ç»Ÿ</strong></td><td>C++ ä¸ºä¸»ï¼Œç±»å‹æ˜ å°„å¤æ‚</td><td>Java ä¸ºä¸»ï¼Œæ›´æ¸…æ™°çš„ç±»å‹å®šä¹‰</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>äºŒè¿›åˆ¶åè®®</td><td>åŸºäº Binder</td></tr></tbody></table>
<h3 data-id="heading-5">ä¸‰ã€Java å±‚çš„ RadioIndication</h3>
<p>åœ¨ Java å±‚ï¼Œåªæœ‰ <strong>ä¸€ä¸ª</strong> RadioIndication å®ç°ï¼ˆæ— è®º HIDL è¿˜æ˜¯ AIDLï¼‰ï¼š</p>
<pre><code class="hljs language-126:148:frameworks_opt_telephony/src/java/com/android/internal/telephony/RadioIndication.java" lang="126:148:frameworks_opt_telephony/src/java/com/android/internal/telephony/RadioIndication.java">public class RadioIndication extends IRadioIndication.Stub {
    RIL mRil;

    RadioIndication(RIL ril) {
        mRil = ril;
    }

    public void radioStateChanged(int indicationType, int radioState) {
        mRil.processIndication(HAL_SERVICE_RADIO, indicationType);
        int state = RILUtils.convertHalRadioState(radioState);
        mRil.setRadioState(state, false);
    }

    public void callStateChanged(int indicationType) {
        // ...
    }
    // ... æ‰€æœ‰å…¶ä»–å›è°ƒæ–¹æ³•
}
</code></pre>
<p>è¿™ä¸ª Java RadioIndication æ—¢å…¼å®¹ HIDL ç‰ˆæœ¬ï¼Œä¹Ÿå…¼å®¹ AIDL ç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-6">å››ã€AIDL å…¼å®¹å±‚çš„ä½œç”¨</h3>
<p>åœ¨ AIDL æ—¶ä»£ï¼ŒC++ å…¼å®¹å±‚å°† HIDL æ¥å£é€‚é…åˆ° AIDLï¼š</p>
<pre><code class="hljs language-59:76:hardware_interfaces/radio/aidl/compat/libradiocompat/modem/RadioIndication-modem.cpp" lang="59:76:hardware_interfaces/radio/aidl/compat/libradiocompat/modem/RadioIndication-modem.cpp">Return&lt;void&gt; RadioIndication::radioStateChanged(V1_0::RadioIndicationType t, 
                                                 V1_0::RadioState st) {
    LOG_CALL &lt;&lt; t;
    // å°† HIDL çš„å›è°ƒè½¬å‘åˆ° AIDL çš„ mModemCb
    modemCb()-&gt;radioStateChanged(toAidl(t), aidl::RadioState(st));
    return {};
}

Return&lt;void&gt; RadioIndication::modemReset(V1_0::RadioIndicationType type, 
                                          const hidl_string&amp; reasn) {
    LOG_CALL &lt;&lt; type;
    modemCb()-&gt;modemReset(toAidl(type), reasn);
    return {};
}
</code></pre>
<h3 data-id="heading-7">äº”ã€RIL æŒ‡ç¤ºçš„æ¶æ„æ¼”å˜</h3>
<pre><code class="hljs language-css" lang="css">ã€HIDL æ—¶ä»£ã€‘                    ã€AIDL æ—¶ä»£ã€‘
IRadioIndication<span class="hljs-keyword">@1</span>.6      â†’      RadioIndication (å…¼å®¹å±‚)
â”œâ”€ IRadioIndication                  â”œâ”€ IRadioDataIndication
â”œâ”€ IRadioResponse                    â”œâ”€ IRadioMessagingIndication
â””â”€ IRadio                            â”œâ”€ IRadioModemIndication
                                     â”œâ”€ IRadioNetworkIndication
                                     â”œâ”€ IRadioSimIndication
                                     â”œâ”€ IRadioVoiceIndication
                                     â””â”€ IRadioImsIndication
</code></pre>
<h3 data-id="heading-8">æ€»ç»“</h3>
<ul>
<li><strong>RadioIndication æ˜¯ HIDL æ—¶ä»£çš„äº§ç‰©</strong>ï¼Œä» Android 7.0 å°±å¼€å§‹ä½¿ç”¨</li>
<li><strong>AIDL æ—¶ä»£æ²¡æœ‰"æ–°å¢"RadioIndication</strong>ï¼Œè€Œæ˜¯é€šè¿‡<strong>å…¼å®¹å±‚</strong>ç»§ç»­ä½¿ç”¨</li>
<li><strong>AIDL æ”¹å˜çš„æ˜¯å†…éƒ¨å®ç°å’Œæ¨¡å—åˆ†å‰²</strong>ï¼Œä½†å¯¹å¤–éƒ¨æ¥å£ï¼ˆJava RILï¼‰çš„å½±å“æœ€å°</li>
<li><strong>Java å±‚çš„ RadioIndication ä¿æŒä¸å˜</strong>ï¼Œæ—¢æ”¯æŒ HIDL ä¹Ÿæ”¯æŒ AIDL</li>
</ul>
<p>è¿™æ˜¯ Android HAL ä» HIDL è¿ç§»åˆ° AIDL çš„å…¸å‹æ¼”å˜æ–¹å¼â€”â€”é€šè¿‡å…¼å®¹å±‚ä¿è¯å‘åå…¼å®¹ï¼ŒåŒæ—¶æ–°ç³»ç»Ÿé‡‡ç”¨æ›´ç°ä»£çš„ AIDL æ¥å£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç§»åŠ¨æ•°æ®å§‹ç»ˆå¼€å¯åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7603376587651792946</link>    <guid>https://juejin.cn/post/7603376587651792946</guid>    <pubDate>2026-02-06T08:04:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603376587651792946" data-draft-id="7603321550246772786" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç§»åŠ¨æ•°æ®å§‹ç»ˆå¼€å¯åŠŸèƒ½"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T08:04:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç§»åŠ¨æ•°æ®å§‹ç»ˆå¼€å¯åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T08:04:06.000Z" title="Fri Feb 06 2026 08:04:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. <strong>åŠŸèƒ½å®šä¹‰å’ŒåŸç†</strong></h3>
<p>ç§»åŠ¨æ•°æ®å§‹ç»ˆå¼€å¯æ˜¯ä¸€ä¸ªç³»ç»Ÿè®¾ç½®ï¼Œå®ƒå…è®¸ç§»åŠ¨æ•°æ®è¿æ¥åœ¨ WiFi ç­‰é«˜ä¼˜å…ˆçº§ç½‘ç»œæ´»è·ƒæ—¶<strong>ç»§ç»­ä¿æŒè¿æ¥å’Œæ´»è·ƒ</strong>ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å·¥ä½œæ¨¡å¼ï¼š

å…³é—­å§‹ç»ˆå¼€å¯ï¼š
<span class="hljs-built_in">WiFi</span> è¿æ¥ â†’ ç§»åŠ¨æ•°æ®è‡ªåŠ¨æ–­å¼€ âœ—
    
å¼€å¯å§‹ç»ˆå¼€å¯ï¼š
<span class="hljs-built_in">WiFi</span> è¿æ¥ + ç§»åŠ¨æ•°æ® â†’ éƒ½ä¿æŒè¿æ¥ âœ“
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>æ›´å¿«çš„ç½‘ç»œåˆ‡æ¢ï¼ˆä¸¤ä¸ªç½‘ç»œéƒ½æ´»è·ƒï¼‰</li>
<li>åº”ç”¨å¯ä»¥åœ¨ WiFi å’Œç§»åŠ¨æ•°æ®é—´çµæ´»åˆ‡æ¢</li>
<li>é™ä½ç½‘ç»œå»¶è¿Ÿå’Œä¸­æ–­</li>
</ul>
<hr/>
<h3 data-id="heading-1">2. <strong>è®¾ç½®å­˜å‚¨ (ConnectivitySettingsManager)</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¸¸é‡å®šä¹‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">MOBILE_DATA_ALWAYS_ON</span> <span class="hljs-operator">=</span> <span class="hljs-string">"mobile_data_always_on"</span>;

<span class="hljs-comment">// è¯»å–è®¾ç½®</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">getMobileDataAlwaysOn</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Context context, <span class="hljs-type">boolean</span> def)</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">enable</span> <span class="hljs-operator">=</span> Settings.Global.getInt(
            context.getContentResolver(), 
            MOBILE_DATA_ALWAYS_ON,      <span class="hljs-comment">// å…¨å±€è®¾ç½®é”®</span>
            (def ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>));              <span class="hljs-comment">// é»˜è®¤å€¼</span>
    <span class="hljs-keyword">return</span> (enable != <span class="hljs-number">0</span>) ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;
}

<span class="hljs-comment">// å†™å…¥è®¾ç½®</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMobileDataAlwaysOn</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Context context, <span class="hljs-type">boolean</span> enable)</span> {
    Settings.Global.putInt(
            context.getContentResolver(), 
            MOBILE_DATA_ALWAYS_ON, 
            (enable ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>));           <span class="hljs-comment">// 1 = å¼€å¯ï¼Œ0 = å…³é—­</span>
}
</code></pre>
<p><strong>å­˜å‚¨ä½ç½®ï¼š</strong></p>
<ul>
<li>æ•°æ®åº“ï¼š<code>Settings.Global</code>ï¼ˆç³»ç»Ÿå…¨å±€è®¾ç½®ï¼‰</li>
<li>é”®ï¼š<code>mobile_data_always_on</code></li>
<li>å€¼ï¼š0 (å…³é—­) æˆ– 1 (å¼€å¯)</li>
</ul>
<hr/>
<h3 data-id="heading-2">3. <strong>è¿æ¥æœåŠ¡å®ç° (ConnectivityService)</strong></h3>
<h4 data-id="heading-3"><strong>æ ¸å¿ƒç»„ä»¶</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç§»åŠ¨æ•°æ®çš„"å§‹ç»ˆå¼€å¯"ç½‘ç»œè¯·æ±‚</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> NetworkRequest mDefaultMobileDataRequest;

<span class="hljs-comment">// è¯¥è¯·æ±‚çš„ä¿¡æ¯</span>
<span class="hljs-comment">// å½“è®¾ç½®ä¸ºå¼€å¯æ—¶ï¼Œè¿™ä¸ªè¯·æ±‚å§‹ç»ˆå­˜åœ¨</span>
<span class="hljs-comment">// å½“è®¾ç½®ä¸ºå…³é—­æ—¶ï¼Œè¿™ä¸ªè¯·æ±‚è¢«æ’¤é”€</span>
</code></pre>
<h4 data-id="heading-4"><strong>åˆå§‹åŒ–æµç¨‹</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºç§»åŠ¨æ•°æ®çš„å§‹ç»ˆå¼€å¯è¯·æ±‚</span>
mDefaultMobileDataRequest = createDefaultInternetRequestForTransport(
        NetworkCapabilities.TRANSPORT_CELLULAR,    <span class="hljs-comment">// ä»… 4G/5G</span>
        NetworkRequest.Type.BACKGROUND_REQUEST);   <span class="hljs-comment">// åå°è¯·æ±‚</span>

<span class="hljs-comment">// åœ¨ç³»ç»Ÿå°±ç»ªæ—¶é…ç½®</span>
onSystemReady() {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">// æ ¹æ®è®¾ç½®åˆ›å»ºç½‘ç»œè¯·æ±‚</span>
    mHandler.sendMessage(mHandler.obtainMessage(EVENT_CONFIGURE_ALWAYS_ON_NETWORKS));
}
</code></pre>
<h4 data-id="heading-5"><strong>è®¾ç½®ç›‘å¬</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerSettingsCallbacks</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// ç›‘å¬ MOBILE_DATA_ALWAYS_ON è®¾ç½®å˜æ›´</span>
    mSettingsObserver.observe(
            Settings.Global.getUriFor(
                ConnectivitySettingsManager.MOBILE_DATA_ALWAYS_ON),
            EVENT_CONFIGURE_ALWAYS_ON_NETWORKS);  <span class="hljs-comment">// è§¦å‘é‡æ–°é…ç½®</span>
    
    <span class="hljs-comment">// ç›‘å¬ WiFi å§‹ç»ˆè¯·æ±‚è®¾ç½®</span>
    mSettingsObserver.observe(
            Settings.Global.getUriFor(
                ConnectivitySettingsManager.WIFI_ALWAYS_REQUESTED),
            EVENT_CONFIGURE_ALWAYS_ON_NETWORKS);
}
</code></pre>
<hr/>
<h3 data-id="heading-6">4. <strong>åŠ¨æ€é…ç½®æœºåˆ¶</strong></h3>
<h4 data-id="heading-7"><strong>é…ç½®å¤„ç† (handleConfigureAlwaysOnNetworks)</strong></h4>
<pre><code class="hljs language-scss" lang="scss">Setting æ”¹å˜
        â†“
EVENT_CONFIGURE_ALWAYS_ON_NETWORKS
        â†“
<span class="hljs-built_in">handleConfigureAlwaysOnNetworks</span>()
        â”œâ”€ æ£€æŸ¥ MOBILE_DATA_ALWAYS_ON è®¾ç½®å€¼
        â”œâ”€ æ£€æŸ¥ WIFI_ALWAYS_REQUESTED è®¾ç½®å€¼
        â””â”€ æ£€æŸ¥ config_vehicleInternalNetworkAlwaysRequested é…ç½®å€¼
</code></pre>
<p><strong>æ ¸å¿ƒä»£ç ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleConfigureAlwaysOnNetworks</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// å¤„ç†ç§»åŠ¨æ•°æ®å§‹ç»ˆå¼€å¯</span>
    handleAlwaysOnNetworkRequest(
            mDefaultMobileDataRequest,
            ConnectivitySettingsManager.MOBILE_DATA_ALWAYS_ON, 
            <span class="hljs-literal">true</span> <span class="hljs-comment">/* defaultValue */</span>);      <span class="hljs-comment">// é»˜è®¤å¼€å¯</span>
    
    <span class="hljs-comment">// å¤„ç† WiFi å§‹ç»ˆè¯·æ±‚</span>
    handleAlwaysOnNetworkRequest(
            mDefaultWifiRequest,
            ConnectivitySettingsManager.WIFI_ALWAYS_REQUESTED,
            <span class="hljs-literal">false</span> <span class="hljs-comment">/* defaultValue */</span>);     <span class="hljs-comment">// é»˜è®¤å…³é—­</span>
    
    <span class="hljs-comment">// å¤„ç†è½¦è¾†å†…éƒ¨ç½‘ç»œ</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">vehicleAlwaysRequested</span> <span class="hljs-operator">=</span> mResources.get().getBoolean(
            R.bool.config_vehicleInternalNetworkAlwaysRequested);
    handleAlwaysOnNetworkRequest(mDefaultVehicleRequest, vehicleAlwaysRequested);
}
</code></pre>
<hr/>
<h3 data-id="heading-8">5. <strong>ç½‘ç»œè¯·æ±‚ç®¡ç†</strong></h3>
<h4 data-id="heading-9"><strong>å¯ç”¨å§‹ç»ˆå¼€å¯ (è®¾ç½® ON)</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleAlwaysOnNetworkRequest</span><span class="hljs-params">(
        NetworkRequest networkRequest, 
        <span class="hljs-type">boolean</span> enable)</span> {
    
    <span class="hljs-comment">// æ£€æŸ¥è¯·æ±‚æ˜¯å¦å·²å­˜åœ¨</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">isEnabled</span> <span class="hljs-operator">=</span> (mNetworkRequests.get(networkRequest) != <span class="hljs-literal">null</span>);
    
    <span class="hljs-comment">// å¦‚æœçŠ¶æ€å·²åŒ¹é…ï¼Œæ— éœ€æ“ä½œ</span>
    <span class="hljs-keyword">if</span> (enable == isEnabled) {
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// å¯ç”¨ï¼šæ³¨å†Œç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-keyword">if</span> (enable) {
        handleRegisterNetworkRequest(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkRequestInfo</span>(
                Process.myUid(),
                networkRequest,
                <span class="hljs-literal">null</span> <span class="hljs-comment">/* messenger */</span>,
                <span class="hljs-literal">null</span> <span class="hljs-comment">/* binder */</span>,
                NetworkCallback.FLAG_INCLUDE_LOCATION_INFO,
                <span class="hljs-literal">null</span> <span class="hljs-comment">/* attributionTags */</span>));
    } 
    <span class="hljs-comment">// ç¦ç”¨ï¼šé‡Šæ”¾ç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-keyword">else</span> {
        handleReleaseNetworkRequest(
                networkRequest, 
                Process.SYSTEM_UID,
                <span class="hljs-literal">false</span> <span class="hljs-comment">/* callOnUnavailable */</span>);
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-10">6. <strong>å®Œæ•´æ‰§è¡Œæµç¨‹</strong></h3>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·æ‰“å¼€è®¾ç½®
        â†“
æ›´æ”¹ MOBILE_DATA_ALWAYS_ON ä¸º ON
        â†“
è°ƒç”¨ ConnectivitySettingsManager<span class="hljs-selector-class">.setMobileDataAlwaysOn</span>()
        â†“
Settings<span class="hljs-selector-class">.Global</span> æ•°æ®åº“æ›´æ–°
        â†“
ContentObserver æ£€æµ‹åˆ°å˜æ›´
        â†“
å‘é€ EVENT_CONFIGURE_ALWAYS_ON_NETWORKS
        â†“
<span class="hljs-built_in">handleConfigureAlwaysOnNetworks</span>()
        â†“
<span class="hljs-built_in">handleAlwaysOnNetworkRequest</span>(mDefaultMobileDataRequest, true)
        â†“
<span class="hljs-built_in">handleRegisterNetworkRequest</span>()
        â†“
åœ¨ç½‘ç»œç®¡ç†ä¸­æ³¨å†Œ "CELLULAR + INTERNET" è¯·æ±‚
        â†“
ConnectivityService ç¡®ä¿ç§»åŠ¨æ•°æ®ç½‘ç»œå§‹ç»ˆæ´»è·ƒ
        â†“
å³ä½¿ WiFi è¿æ¥ï¼Œç§»åŠ¨æ•°æ®ä»ä¿æŒæ´»è·ƒ âœ“
</code></pre>
<hr/>
<h3 data-id="heading-11">7. <strong>ç½‘ç»œè¯·æ±‚ç±»å‹è¯¦è§£</strong></h3>
<h4 data-id="heading-12"><strong>mDefaultMobileDataRequest çš„ç‰¹æ€§</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºå§‹ç»ˆå¼€å¯è¯·æ±‚</span>
<span class="hljs-keyword">private</span> NetworkRequest <span class="hljs-title function_">createDefaultInternetRequestForTransport</span><span class="hljs-params">(
        <span class="hljs-type">int</span> transportType, 
        NetworkRequest.Type type)</span> {
    
    <span class="hljs-keyword">final</span> <span class="hljs-type">NetworkCapabilities</span> <span class="hljs-variable">netCap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkCapabilities</span>();
    netCap.clearAll();
    netCap.addCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET);
    netCap.addTransportType(NetworkCapabilities.TRANSPORT_CELLULAR);  <span class="hljs-comment">// ä»…ç§»åŠ¨æ•°æ®</span>
    netCap.setRequestorUidAndPackageName(Process.myUid(), mContext.getPackageName());
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkRequest</span>(netCap, TYPE_NONE, nextNetworkRequestId(), type);
}

<span class="hljs-comment">// ç½‘ç»œè¯·æ±‚ç‰¹æ€§ï¼š</span>
<span class="hljs-comment">// - ç±»å‹ï¼šBACKGROUND_REQUESTï¼ˆåå°è¯·æ±‚ï¼‰</span>
<span class="hljs-comment">// - ä¼˜å…ˆçº§ï¼šä½ï¼ˆä¸ä¼šæŠ¢å ç”¨æˆ·è¯·æ±‚ï¼‰</span>
<span class="hljs-comment">// - æŒä¹…æ€§ï¼šå§‹ç»ˆå­˜åœ¨ï¼ˆå½“è®¾ç½®å¼€å¯æ—¶ï¼‰</span>
<span class="hljs-comment">// - ä½œç”¨ï¼šä¿æŒç§»åŠ¨æ•°æ®ç½‘ç»œè¿æ¥</span>
</code></pre>
<hr/>
<h3 data-id="heading-13">8. <strong>ä¸å…¶ä»–åŠŸèƒ½çš„å…³ç³»</strong></h3>
<pre><code class="hljs language-arduino" lang="arduino">ç§»åŠ¨æ•°æ®å§‹ç»ˆå¼€å¯
        â”‚
        â”œâ”€ <span class="hljs-built_in">WiFi</span> å§‹ç»ˆè¯·æ±‚ (WIFI_ALWAYS_REQUESTED)
        â”‚   â”œâ”€ ç±»ä¼¼æœºåˆ¶ï¼Œç”¨äº <span class="hljs-built_in">WiFi</span> ç½‘ç»œ
        â”‚   â””â”€ ä¼˜å…ˆçº§ï¼š<span class="hljs-built_in">WiFi</span> &gt; ç§»åŠ¨æ•°æ®
        â”‚
        â”œâ”€ ç½‘ç»œè¯·æ±‚ (NetworkRequest)
        â”‚   â”œâ”€ åº”ç”¨å¯ä»¥å‘èµ·è‡ªå·±çš„ç½‘ç»œè¯·æ±‚
        â”‚   â””â”€ ç³»ç»ŸåŸºäºä¼˜å…ˆçº§é€‰æ‹©æœ€ä¼˜ç½‘ç»œ
        â”‚
        â””â”€ ç½‘ç»œåˆ‡æ¢ (Network Switching)
            â”œâ”€ ä¸¤ä¸ªç½‘ç»œéƒ½æ´»è·ƒæ—¶æ›´å¿«åˆ‡æ¢
            â””â”€ åº”ç”¨å¯ä»¥åœ¨ <span class="hljs-built_in">WiFi</span>/ç§»åŠ¨æ•°æ®é—´çµæ´»é€‰æ‹©
</code></pre>
<hr/>
<h3 data-id="heading-14">9. <strong>å®é™…å·¥ä½œæµç¨‹å›¾</strong></h3>
<pre><code class="hljs language-arduino" lang="arduino">ç½‘ç»œçŠ¶æ€å˜åŒ–æ—¶åºï¼š

äº‹ä»¶ <span class="hljs-number">1</span>ï¼šåªæœ‰ç§»åŠ¨æ•°æ®è¿æ¥
ç§»åŠ¨æ•°æ®æ´»è·ƒ â†’ åº”ç”¨ä½¿ç”¨ç§»åŠ¨æ•°æ® âœ“

äº‹ä»¶ <span class="hljs-number">2</span>ï¼š<span class="hljs-built_in">WiFi</span> è¿æ¥ä¸Š
â”‚
â”œâ”€ ç§»åŠ¨æ•°æ®å§‹ç»ˆå¼€å¯ = OFF
â”‚   â†’ ç§»åŠ¨æ•°æ®æ–­å¼€ âœ—
â”‚   â†’ åº”ç”¨åˆ‡æ¢åˆ° <span class="hljs-built_in">WiFi</span> âœ“
â”‚   â†’ ç½‘ç»œåˆ‡æ¢å»¶è¿Ÿè¾ƒå¤§
â”‚
â””â”€ ç§»åŠ¨æ•°æ®å§‹ç»ˆå¼€å¯ = ON
    â†’ ç§»åŠ¨æ•°æ®ä¿æŒè¿æ¥ âœ“
    â†’ <span class="hljs-built_in">WiFi</span> ä¹Ÿè¿æ¥ âœ“
    â†’ åº”ç”¨å¯ç¬é—´åœ¨ä¸¤ç½‘é—´åˆ‡æ¢ âœ“
    â†’ ç½‘ç»œåˆ‡æ¢å»¶è¿Ÿæå°

äº‹ä»¶ <span class="hljs-number">3</span>ï¼š<span class="hljs-built_in">WiFi</span> æ–­å¼€
â”‚
â”œâ”€ ç§»åŠ¨æ•°æ®å§‹ç»ˆå¼€å¯ = OFF
â”‚   â†’ ç§»åŠ¨æ•°æ®å·²æ–­å¼€ï¼Œéœ€é‡æ–°è¿æ¥
â”‚   â†’ æ¢å¤å»¶è¿Ÿï¼š<span class="hljs-number">1</span><span class="hljs-number">-3</span> ç§’
â”‚
â””â”€ ç§»åŠ¨æ•°æ®å§‹ç»ˆå¼€å¯ = ON
    â†’ ç§»åŠ¨æ•°æ®å·²ä¿æŒè¿æ¥
    â†’ æ¢å¤å»¶è¿Ÿï¼šå‡ æ¯«ç§’ âœ“
</code></pre>
<hr/>
<h3 data-id="heading-15">10. <strong>æ€§èƒ½å’Œç”µæ± å½±å“</strong></h3>























<table><thead><tr><th>è®¾ç½®çŠ¶æ€</th><th>ç”µæ± æ¶ˆè€—</th><th>ç½‘ç»œå»¶è¿Ÿ</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>å…³é—­</strong></td><td>â¬‡ï¸ ä½</td><td>â¬†ï¸ é«˜ï¼ˆéœ€é‡è¿ï¼‰</td><td>çœç”µï¼Œå¶å°”ä½¿ç”¨</td></tr><tr><td><strong>å¼€å¯</strong></td><td>â¬†ï¸ ä¸­ç­‰</td><td>â¬‡ï¸ ä½ï¼ˆå·²è¿æ¥ï¼‰</td><td>å®æ—¶åº”ç”¨ï¼Œè§†é¢‘é€šè¯</td></tr></tbody></table>
<p><strong>ç”µæ± æ¶ˆè€—ä¸»è¦æ¥è‡ªï¼š</strong></p>
<ul>
<li>ä¿æŒæ— çº¿ç”µæ´»è·ƒ</li>
<li>å®šæœŸä¿¡å·å¼ºåº¦æŸ¥è¯¢</li>
<li>ç½‘ç»œæ•°æ®åŒ…ä¿æ´»</li>
</ul>
<hr/>
<h3 data-id="heading-16">æ€»ç»“</h3>
<p>ç§»åŠ¨æ•°æ®å§‹ç»ˆå¼€å¯æ˜¯ä¸€ä¸ª<strong>æ™ºèƒ½ç½‘ç»œç®¡ç†</strong>åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å­˜å‚¨å±‚</strong>ï¼šå…¨å±€è®¾ç½® <code>MOBILE_DATA_ALWAYS_ON</code></li>
<li><strong>ç›‘å¬å±‚</strong>ï¼šContentObserver ç›‘æµ‹è®¾ç½®å˜æ›´</li>
<li><strong>è¯·æ±‚å±‚</strong>ï¼šé€šè¿‡ NetworkRequest æœºåˆ¶å‘ ConnectivityService æ³¨å†Œè¯·æ±‚</li>
<li><strong>æ‰§è¡Œå±‚</strong>ï¼šConnectivityService ç¡®ä¿ç§»åŠ¨ç½‘ç»œå§‹ç»ˆæ´»è·ƒ</li>
<li><strong>ç»“æœ</strong>ï¼šWiFi å’Œç§»åŠ¨æ•°æ®å¯åŒæ—¶è¿æ¥ï¼Œåº”ç”¨å¯æ— ç¼åˆ‡æ¢</li>
</ol>
<p>è¿™ä¸ªè®¾è®¡ä½“ç°äº† Android ç³»ç»Ÿ<strong>æ¨¡å—åŒ–ã€äº‹ä»¶é©±åŠ¨</strong>çš„æ¶æ„ç‰¹ç‚¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…å­¦è¿›ç¨‹é—´é€šä¿¡4(Android Binder)]]></title>    <link>https://juejin.cn/post/7603301285475778602</link>    <guid>https://juejin.cn/post/7603301285475778602</guid>    <pubDate>2026-02-06T07:18:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603301285475778602" data-draft-id="7594682922685005833" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ…å­¦è¿›ç¨‹é—´é€šä¿¡4(Android Binder)"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-06T07:18:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç…¤çƒç‹å­"/> <meta itemprop="url" content="https://juejin.cn/user/4088439235949739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ…å­¦è¿›ç¨‹é—´é€šä¿¡4(Android Binder)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4088439235949739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç…¤çƒç‹å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:18:21.000Z" title="Fri Feb 06 2026 07:18:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Binder çš„åŸºæœ¬åŸç†</h2>
<p>ç½‘ä¸Šæœ‰å¾ˆå¤šä»‹ç»Binderçš„æ–‡ç« ï¼Œè¿™é‡Œä¸è¿‡å¤šä»‹ç»ï¼Œ
é¦–å…ˆè¦æ˜ç¡®ä¸€ç‚¹ <code>Binder æ˜¯ä¸€ä¸ª RPCï¼ˆRemote Procedure Callï¼‰ æ¡†æ¶</code>ï¼Œä¹Ÿå°±æ˜¯è¯´å€ŸåŠ©äº Binderï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ A è¿›ç¨‹ä¸­è®¿é—® B è¿›ç¨‹ä¸­çš„å‡½æ•°</p>
<blockquote>
<p>RPC ä¸€èˆ¬åŸºäº IPCï¼ˆInter-Process Communicationï¼‰ æ¥å®ç°çš„ï¼ŒIPC å°±æ˜¯è·¨è¿›ç¨‹æ•°æ®ä¼ è¾“(é€šä¿¡)</p>
</blockquote>
<p>Binder çš„ RPC æ˜¯å¦‚ä½•å®ç°çš„ï¼š</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼ŒA è¿›ç¨‹è®¿é—® B è¿›ç¨‹å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦ï¼š</p>
<ul>
<li>
<p>åœ¨ A è¿›ç¨‹ä¸­æŒ‰ç…§å›ºå®šçš„è§„åˆ™æ‰“åŒ…æ•°æ®ï¼Œè¿™äº›æ•°æ®åŒ…å«äº†ï¼š</p>
<ul>
<li>æ•°æ®å‘ç»™é‚£ä¸ªè¿›ç¨‹ï¼ŒBinder ä¸­æ˜¯ä¸€ä¸ªæ•´å‹å˜é‡ Handle</li>
<li>è¦è°ƒç”¨ç›®æ ‡è¿›ç¨‹ä¸­çš„é‚£ä¸ªå‡½æ•°ï¼ŒBinder ä¸­ç”¨ä¸€ä¸ªæ•´å‹å˜é‡ Code è¡¨ç¤º</li>
<li>ç›®æ ‡å‡½æ•°çš„å‚æ•°</li>
<li>è¦æ‰§è¡Œå…·ä½“ä»€ä¹ˆæ“ä½œï¼Œä¹Ÿå°±æ˜¯ Binder åè®®</li>
</ul>
</li>
<li>
<p>è¿›ç¨‹ B æ”¶åˆ°æ•°æ®ï¼ŒæŒ‰ç…§å›ºå®šçš„æ ¼å¼è§£æå‡ºæ•°æ®ï¼Œè°ƒç”¨å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ç›¸åŒçš„æ ¼å¼å°†å‡½æ•°çš„è¿”å›å€¼ä¼ é€’ç»™è¿›ç¨‹ Aã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17f684abd3e44907bad7316e8bde9f5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770967184&amp;x-signature=YCGXQwm3Q0bwTctYdZ9grZ2ORQk%3D" alt="binder_rpc.png" loading="lazy"/></p>
<h2 data-id="heading-1">Binder åº”ç”¨å±‚å·¥ä½œæµç¨‹</h2>
<p>Binder æ˜¯ä¸€ä¸ªÂ <strong>RPC</strong>ï¼ˆRemote Procedure Callï¼‰ æ¡†æ¶ï¼Œç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯<strong>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´é€šè¿‡ Binderï¼š</p>
<ul>
<li>å¯ä»¥åœ¨ A è¿›ç¨‹ä¸­è®¿é—® B è¿›ç¨‹ä¸­å®šä¹‰çš„å‡½æ•°</li>
<li>è¿›ç¨‹ B ä¸­çš„è¿™äº›ç­‰å¾…ç€è¢«è¿œç¨‹è°ƒç”¨çš„å‡½æ•°çš„é›†åˆï¼Œæˆ‘ä»¬ç§°å…¶ä¸ºÂ Binder æœåŠ¡ï¼ˆBinder Serviceï¼‰</li>
<li>è¿›ç¨‹ A ç§°ä¹‹ä¸ºÂ <strong><code>Binder å®¢æˆ·ç«¯ï¼ˆBinder Clientï¼‰</code></strong> ï¼Œè¿›ç¨‹ B ç§°ä¹‹ä¸ºÂ <strong><code>Binder æœåŠ¡ç«¯ï¼ˆBinder Serverï¼‰</code></strong></li>
<li>é€šå¸¸ï¼Œç³»ç»Ÿä¸­çš„æœåŠ¡å¾ˆå¤šï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç®¡å®¶æ¥ç®¡ç†å®ƒä»¬ï¼Œ<strong><code>æœåŠ¡ç®¡å®¶ï¼ˆServiceManagerï¼‰</code></strong> Â æ˜¯ Android ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œå¯åŠ¨çš„ä¸€ä¸ªç”¨äºç®¡ç†Â <strong>Binder æœåŠ¡ï¼ˆBinder Serviceï¼‰</strong> Â çš„è¿›ç¨‹ã€‚é€šå¸¸ï¼Œ<strong>æœåŠ¡ï¼ˆServiceï¼‰</strong> Â éœ€è¦äº‹å…ˆæ³¨å†Œåˆ°<strong>æœåŠ¡ç®¡å®¶ï¼ˆServiceManagerï¼‰</strong> ï¼Œå…¶ä»–è¿›ç¨‹å‘<strong>æœåŠ¡ç®¡å®¶ï¼ˆServiceManagerï¼‰</strong> Â æŸ¥è¯¢æœåŠ¡åæ‰èƒ½ä½¿ç”¨æœåŠ¡ã€‚</li>
<li>Binder çš„ RPC èƒ½åŠ›é€šè¿‡Â **<code>Binder é©±åŠ¨</code>**å®ç°</li>
</ul>
<p>é€šå¸¸ä¸€ä¸ªå®Œæ•´çš„ Binder ç¨‹åºæ¶‰åŠ 4 ä¸ªæµç¨‹ï¼š</p>
<ol>
<li>åœ¨ Binder Server ç«¯å®šä¹‰å¥½æœåŠ¡</li>
<li>ç„¶åå‘ ServiceManager æ³¨å†ŒæœåŠ¡</li>
<li>åœ¨ Binder Client ä¸­å‘ ServiceManager è·å–åˆ°æœåŠ¡</li>
<li>å‘èµ·è¿œç¨‹è°ƒç”¨ï¼Œè°ƒç”¨ Binder Server ä¸­å®šä¹‰å¥½çš„æœåŠ¡</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/630bdb0c07ba4eeaaefa95872029f67e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770967184&amp;x-signature=vhbxb60eJG6SAgRoEXWIUBv2ZG8%3D" alt="binderæ¦‚å›¾.png" loading="lazy"/></p>
<p>å­¦ä¹ ä¸å‚è€ƒ: <a href="https://link.juejin.cn?target=http%3A%2F%2Fahaoframework.tech%2Fpages%2F062131%2F%23_1-2-rpc-%25E5%258E%259F%25E7%2590%2586" target="_blank" title="http://ahaoframework.tech/pages/062131/#_1-2-rpc-%E5%8E%9F%E7%90%86" ref="nofollow noopener noreferrer">002.Binder åŸºæœ¬åŸç† | Ahao's Technical Blog</a></p>
<h2 data-id="heading-2">AIDLï¼ˆAndroid Interface Definition Languageï¼‰</h2>
<p><code>AIDL</code>(å®‰å“æ¥å£å®šä¹‰è¯­è¨€) æ˜¯ Android ä¸­æœ€å¸¸ç”¨çš„è·¨è¿›ç¨‹é€šä¿¡æœºåˆ¶ï¼Œä¸»è¦ç”¨äºåº”ç”¨å±‚è¿›ç¨‹é—´çš„é€šä¿¡ã€‚</p>
<p><strong>ä¸»è¦ç‰¹ç‚¹</strong></p>
<ul>
<li><strong>åº”ç”¨å±‚IPC</strong>ï¼šä¸»è¦ç”¨äºåº”ç”¨ä¹‹é—´çš„é€šä¿¡</li>
<li><strong>åŸºäºBinder</strong>ï¼šåº•å±‚ä½¿ç”¨ Binder æœºåˆ¶</li>
<li><strong>æ”¯æŒå¤æ‚æ•°æ®ç±»å‹</strong>ï¼šåŸºæœ¬ç±»å‹ã€Stringã€Listã€Mapã€Parcelable å¯¹è±¡ç­‰</li>
<li><strong>åŒæ­¥/å¼‚æ­¥è°ƒç”¨</strong>ï¼šé»˜è®¤åŒæ­¥ï¼Œå¯é€šè¿‡ oneway å®ç°å¼‚æ­¥</li>
</ul>
<p>Androidçš„AIDLï¼ˆAndroidæ¥å£å®šä¹‰è¯­è¨€ï¼‰æ˜¯ä¸€å¥—å®Œæ•´çš„è·¨è¿›ç¨‹é€šä¿¡APIä½“ç³»ã€‚å®ƒä¸ä»…æ”¯æŒåŸºç¡€æ•°æ®ç±»å‹å’Œæ¥å£å›è°ƒï¼Œè¿˜æä¾›äº†åŒæ­¥/å¼‚æ­¥è°ƒç”¨ã€æƒé™æ§åˆ¶ã€æœåŠ¡ç®¡ç†ç­‰ä¸€ç³»åˆ—æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<h2 data-id="heading-3"><strong>æ ¸å¿ƒAPIä¸å…³é”®æ¦‚å¿µ</strong></h2>
<p>ä¸‹è¡¨ä¸ºä½ æ¢³ç†äº†AIDLçš„æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼š</p>



















































































































<table><thead><tr><th align="left">æ¨¡å—</th><th align="left">ä¸»è¦API/æ¦‚å¿µ</th><th align="left">è¯´æ˜ä¸ç”¨é€”</th></tr></thead><tbody><tr><td align="left"><strong>1. æ¥å£å®šä¹‰</strong></td><td align="left"><strong>AIDLæ–‡ä»¶</strong> (<code>.aidl</code>)</td><td align="left">ä½¿ç”¨AIDLè¯­æ³•å£°æ˜è·¨è¿›ç¨‹çš„æ¥å£å¥‘çº¦ã€‚</td></tr><tr><td align="left"><strong>2. æ ¸å¿ƒé€šä¿¡å¯¹è±¡</strong></td><td align="left"><strong><code>IBinder</code></strong></td><td align="left">æ‰€æœ‰IPCé€šä¿¡çš„åº•å±‚å¥æŸ„ã€‚<code>Service.onBind</code>è¿”å›å®ƒã€‚</td></tr><tr><td align="left"/><td align="left"><strong><code>IInterface</code></strong></td><td align="left">æ‰€æœ‰AIDLæ¥å£çš„æ ¹åŸºï¼Œå®šä¹‰äº†ä¸<code>IBinder</code>äº¤äº’çš„èƒ½åŠ›ã€‚</td></tr><tr><td align="left"/><td align="left"><strong><code>Binder</code> ç±»</strong></td><td align="left">æœåŠ¡ç«¯çš„åŸºç±»ï¼Œå®ç°äº†<code>IBinder</code>ï¼Œç”¨äºå¤„ç†è¿œç¨‹è°ƒç”¨ã€‚</td></tr><tr><td align="left"/><td align="left"><strong><code>Stub</code> ç±»</strong> (æŠ½è±¡ç±»)</td><td align="left">ç”±AIDLç¼–è¯‘å™¨ç”Ÿæˆçš„æœåŠ¡å™¨å­˜æ ¹ï¼Œç»§æ‰¿è‡ª<code>Binder</code>å¹¶å®ç°ä¸»æ¥å£ã€‚</td></tr><tr><td align="left"/><td align="left"><strong><code>Proxy</code> ç±»</strong> (å†…éƒ¨ç±»)</td><td align="left">ç”±AIDLç¼–è¯‘å™¨ç”Ÿæˆçš„å®¢æˆ·ç«¯ä»£ç†ï¼Œå°è£…äº†è·¨è¿›ç¨‹è°ƒç”¨åºåˆ—åŒ–é€»è¾‘ã€‚</td></tr><tr><td align="left"><strong>3. ç±»å‹ç³»ç»Ÿ</strong></td><td align="left"><strong>åŸºæœ¬ç±»å‹</strong></td><td align="left"><code>int</code>, <code>long</code>, <code>char</code>, <code>boolean</code>, <code>double</code>, <code>byte</code>, <code>float</code>ã€‚</td></tr><tr><td align="left"/><td align="left"><strong><code>String</code></strong></td><td align="left">å­—ç¬¦ä¸²ï¼Œæ”¯æŒUTF-8ç¼–ç ã€‚</td></tr><tr><td align="left"/><td align="left"><strong><code>CharSequence</code></strong></td><td align="left">å¯ç›´æ¥ä¼ é€’<code>SpannableString</code>ç­‰ã€‚</td></tr><tr><td align="left"/><td align="left"><strong><code>Parcelable</code></strong></td><td align="left">é€šè¿‡å®ç°è¯¥æ¥å£ï¼Œè‡ªå®šä¹‰å¯åºåˆ—åŒ–çš„å¤æ‚å¯¹è±¡ã€‚</td></tr><tr><td align="left"/><td align="left"><strong><code>List</code> / <code>Map</code></strong></td><td align="left">é›†åˆç±»å‹ï¼Œå…¶å…ƒç´ å¿…é¡»ä¸ºAIDLæ”¯æŒçš„ç±»å‹ã€‚</td></tr><tr><td align="left"/><td align="left"><strong>å®šå‘Tag</strong></td><td align="left"><code>in</code>(è¾“å…¥), <code>out</code>(è¾“å‡º), <code>inout</code>(åŒå‘)ï¼Œä¿®é¥°éåŸºæœ¬ç±»å‹å‚æ•°ã€‚</td></tr><tr><td align="left"><strong>4. æ¥å£å›è°ƒ</strong></td><td align="left"><strong><code>RemoteCallbackList</code></strong></td><td align="left">ç”¨äºåœ¨æœåŠ¡ç«¯å®‰å…¨åœ°ç®¡ç†å¹¶å›è°ƒå¤šä¸ªå®¢æˆ·ç«¯ç›‘å¬å™¨ã€‚</td></tr><tr><td align="left"><strong>5. è°ƒç”¨æ¨¡å¼</strong></td><td align="left"><strong>åŒæ­¥è°ƒç”¨</strong></td><td align="left">é»˜è®¤æ¨¡å¼ï¼Œå®¢æˆ·ç«¯çº¿ç¨‹ä¼šé˜»å¡ç›´è‡³æœåŠ¡ç«¯è¿”å›ã€‚</td></tr><tr><td align="left"/><td align="left"><strong>å¼‚æ­¥è°ƒç”¨</strong></td><td align="left">ä½¿ç”¨<code>oneway</code>å…³é”®å­—ä¿®é¥°æ¥å£æ–¹æ³•ï¼Œè°ƒç”¨ä¸é˜»å¡ã€‚</td></tr><tr><td align="left"><strong>6. å¼‚å¸¸å¤„ç†</strong></td><td align="left"><strong><code>RemoteException</code></strong></td><td align="left">æ‰€æœ‰è·¨è¿›ç¨‹è°ƒç”¨éƒ½å¯èƒ½æŠ›å‡ºçš„æ ¹å¼‚å¸¸ï¼Œå¦‚è¿›ç¨‹æ­»äº¡ã€é€šä¿¡å¤±è´¥ç­‰ã€‚</td></tr><tr><td align="left"/><td align="left"><strong><code>SecurityException</code></strong></td><td align="left">ç»‘å®šæœåŠ¡æˆ–è°ƒç”¨æ—¶ï¼Œæƒé™æ ¡éªŒå¤±è´¥ä¼šæŠ›å‡ºã€‚</td></tr><tr><td align="left"><strong>7. æœåŠ¡ç»‘å®š</strong></td><td align="left"><strong><code>Service</code></strong></td><td align="left">æ‰¿è½½AIDLæ¥å£çš„æœåŠ¡ç»„ä»¶ã€‚</td></tr><tr><td align="left"/><td align="left"><strong><code>ServiceConnection</code></strong></td><td align="left">å®¢æˆ·ç«¯ç”¨äºç›‘å¬ä¸æœåŠ¡çš„è¿æ¥çŠ¶æ€ã€‚</td></tr><tr><td align="left"/><td align="left"><strong><code>bindService()</code> / <code>unbindService()</code></strong></td><td align="left">ç»‘å®šä¸è§£ç»‘æœåŠ¡çš„æ–¹æ³•ã€‚</td></tr><tr><td align="left"/><td align="left"><strong><code>Context.BIND_AUTO_CREATE</code></strong></td><td align="left">ç»‘å®šæ ‡å¿—ï¼ŒæœåŠ¡ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºã€‚</td></tr></tbody></table>
<h3 data-id="heading-4">ğŸ’» <strong>æ·±åº¦è§£æä¸æœ€ä½³å®è·µ</strong></h3>
<h4 data-id="heading-5"><strong>1. é€šä¿¡æ ¸å¿ƒï¼šBinderã€Stubä¸Proxy</strong></h4>
<p>è¿™æ˜¯AIDLå·¥ä½œçš„åŸºçŸ³ã€‚æœåŠ¡ç«¯å®ç° <code>Stub</code>ï¼Œå®¢æˆ·ç«¯é€šè¿‡ <code>Proxy</code> è°ƒç”¨ï¼Œä¸¤è€…é€šè¿‡Binderé©±åŠ¨è¿›è¡Œæ•°æ®äº¤æ¢ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æœåŠ¡ç«¯å®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Service</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> IMyService.<span class="hljs-type">Stub</span> <span class="hljs-variable">binder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IMyService</span>.Stub() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> <span class="hljs-keyword">throws</span> RemoteException {
            <span class="hljs-keyword">return</span> a + b;
        }
    };
    
  <span class="hljs-meta">@Override</span> 
  <span class="hljs-keyword">public</span> IBinder <span class="hljs-title function_">onBind</span><span class="hljs-params">(Intent intent)</span> { 
      <span class="hljs-keyword">return</span> binder; 
  }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®¢æˆ·ç«¯è°ƒç”¨</span>
<span class="hljs-type">ServiceConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceConnection</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onServiceConnected</span><span class="hljs-params">(ComponentName name, IBinder service)</span> {
        <span class="hljs-comment">// å…³é”®ï¼šå°†IBinderè½¬æ¢ä¸ºæ¥å£ä»£ç†å¯¹è±¡</span>
        <span class="hljs-type">IMyService</span> <span class="hljs-variable">myService</span> <span class="hljs-operator">=</span> IMyService.Stub.asInterface(service);
        myService.calculate(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>);
    }
};
</code></pre>
<h4 data-id="heading-6">2. é«˜çº§æ•°æ®ç±»å‹ä¸æ–¹å‘Tag</h4>
<p><strong>Parcelable</strong> æ˜¯å®ç°å¤æ‚æ•°æ®ä¼ è¾“çš„å…³é”®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. å®šä¹‰ Parcelable æ•°æ®ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Parcelable</span> {
    <span class="hljs-keyword">public</span> String name;
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> id;
    <span class="hljs-comment">// ... å¿…é¡»å®ç° writeToParcel, describeContents, CREATOR</span>
}

<span class="hljs-comment">// 2. ä¸º Parcelable åˆ›å»ºå¯¹åº”çš„ .aidl æ–‡ä»¶ (User.aidl)</span>
<span class="hljs-comment">// parcelable User;</span>

<span class="hljs-comment">// 3. åœ¨æ¥å£AIDLä¸­å¼•ç”¨</span>
<span class="hljs-comment">// import com.example.User; // æ˜¾å¼å¯¼å…¥</span>
<span class="hljs-comment">// void updateUser(in User user);</span>
</code></pre>
<p><strong>æ–¹å‘Tag (<code>in</code>, <code>out</code>, <code>inout</code>)</strong> ç›´æ¥å½±å“æ€§èƒ½å’Œé€»è¾‘ï¼š</p>
<ul>
<li><code>in</code>ï¼šæ•°æ®ä»å®¢æˆ·ç«¯æµå‘æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¿®æ”¹ä¸ä¼šå½±å“å®¢æˆ·ç«¯å¯¹è±¡ã€‚</li>
<li><code>out</code>ï¼šå¯¹è±¡ä»æœåŠ¡ç«¯â€œè¿”å›â€ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯ä¼ å…¥çš„å¯¹è±¡å­—æ®µä¸ä¼šè¢«å‘é€ï¼Œä½†æœåŠ¡ç«¯å¯ä»¥åˆ›å»ºæˆ–ä¿®æ”¹å¯¹è±¡å¹¶ä¼ å›ã€‚</li>
<li><code>inout</code>ï¼šåŒå‘ä¼ è¾“ï¼Œå¼€é”€æœ€å¤§ï¼Œåº”è°¨æ…ä½¿ç”¨ã€‚
æ–¹å‘ä¿®é¥°ç¬¦ï¼ˆä»…å¯¹ â€œéåŸºæœ¬ç±»å‹ &amp; é String/CharSequenceâ€ å‚æ•°ç”Ÿæ•ˆï¼‰</li>
</ul>

<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printUser</span>(<span class="hljs-params"><span class="hljs-keyword">in</span> User u</span>)</span>; <span class="hljs-comment">// å®¢æˆ·ç«¯æŠŠ User åºåˆ—åŒ–ä¼ è¿‡æ¥  </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fillUser</span>(<span class="hljs-params"><span class="hljs-keyword">out</span> User u</span>)</span>; <span class="hljs-comment">// æœåŠ¡ç«¯ new ä¸€ä¸ª User å†™å›å»  </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">updateUser</span>(<span class="hljs-params">inout User u</span>)</span>; <span class="hljs-comment">// ä¸¤ç«¯éƒ½å¯æ”¹</span>
</code></pre>
<h4 data-id="heading-7">3. ç®¡ç†æ¥å£å›è°ƒï¼šRemoteCallbackList</h4>
<p>åœ¨æœåŠ¡ç«¯ï¼Œä¸èƒ½ç›´æ¥ä¿å­˜å®¢æˆ·ç«¯ä¼ æ¥çš„ <code>IBinder</code> å›è°ƒæ¥å£ï¼Œå› ä¸ºBinderå¯¹è±¡å¯èƒ½å› è¿›ç¨‹æ­»äº¡è€Œå¤±æ•ˆã€‚<code>RemoteCallbackList</code> èƒ½è‡ªåŠ¨ç®¡ç†è¿™ç§ç”Ÿå‘½å‘¨æœŸã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Service</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RemoteCallbackList&lt;ICallback&gt; callbackList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RemoteCallbackList</span>&lt;&gt;();

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> IMyService.<span class="hljs-type">Stub</span> <span class="hljs-variable">binder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IMyService</span>.Stub() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerCallback</span><span class="hljs-params">(ICallback cb)</span> {
            callbackList.register(cb);
        }
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unregisterCallback</span><span class="hljs-params">(ICallback cb)</span> {
            callbackList.unregister(cb);
        }
    };

    <span class="hljs-comment">// å‘æ‰€æœ‰å®¢æˆ·ç«¯å¹¿æ’­äº‹ä»¶</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">broadcastEvent</span><span class="hljs-params">(String event)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> callbackList.beginBroadcast();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) {
            <span class="hljs-keyword">try</span> {
                callbackList.getBroadcastItem(i).onEvent(event);
            } <span class="hljs-keyword">catch</span> (RemoteException e) {
                <span class="hljs-comment">// å®¢æˆ·ç«¯å¯èƒ½å·²æ­»äº¡ï¼Œå¿½ç•¥</span>
            }
        }
        callbackList.finishBroadcast();
    }
}
</code></pre>
<h4 data-id="heading-8">4. åŒæ­¥ (<code>two-way</code>) ä¸å¼‚æ­¥ (<code>oneway</code>)</h4>
<ul>
<li><strong>åŒæ­¥</strong>ï¼šå®¢æˆ·ç«¯çº¿ç¨‹ä¼šé˜»å¡ï¼Œé€‚ç”¨äºéœ€è¦ç«‹å³ç»“æœçš„è°ƒç”¨ã€‚</li>
<li><strong>å¼‚æ­¥</strong>ï¼šåœ¨æ¥å£æ–¹æ³•å‰åŠ  <code>oneway</code> å…³é”®å­—ï¼Œä¸ç­‰å¾…è¿”å›ï¼Œä¹Ÿæ²¡æœ‰è¿”å›å€¼ã€‚é€‚ç”¨äºé€šçŸ¥å‹æ“ä½œï¼Œèƒ½æœ‰æ•ˆé¿å…å®¢æˆ·ç«¯é˜»å¡ï¼Œä½†éœ€æ³¨æ„å…¶â€œè‡³å¤šä¸€æ¬¡ (at-most-once)â€çš„è¯­ä¹‰ï¼Œè°ƒç”¨å¯èƒ½å› è¿›ç¨‹æ­»äº¡è€Œä¸¢å¤±ã€‚</li>
</ul>
<pre><code class="hljs language-aidl" lang="aidl">// åŒæ­¥æ–¹æ³•
int calculate(in int a, in int b);

// å¼‚æ­¥æ–¹æ³•ï¼ˆæ— è¿”å›å€¼ï¼Œä¸æŠ›RemoteExceptionï¼‰
oneway void notifySomethingHappened(in String event);
</code></pre>
<h4 data-id="heading-9">5. æƒé™æ§åˆ¶ä¸å®‰å…¨</h4>
<p>å¯åœ¨ <code>AndroidManifest.xml</code> ä¸­ä¸ºæœåŠ¡å£°æ˜è‡ªå®šä¹‰æƒé™ï¼Œå¹¶åœ¨ <code>onBind</code> æˆ–å…·ä½“æ–¹æ³•å†…æ ¡éªŒã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">service</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".MyService"</span>
    <span class="hljs-attr">android:permission</span>=<span class="hljs-string">"com.example.MY_PERMISSION"</span>
    <span class="hljs-attr">android:exported</span>=<span class="hljs-string">"true"</span>&gt;</span> <span class="hljs-comment">&lt;!-- å…è®¸å…¶ä»–åº”ç”¨ç»‘å®š --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœ¨æœåŠ¡ç«¯çš„onBindæˆ–æ–¹æ³•å®ç°ä¸­æ ¡éªŒ</span>
<span class="hljs-keyword">public</span> IBinder <span class="hljs-title function_">onBind</span><span class="hljs-params">(Intent intent)</span> {
    <span class="hljs-keyword">if</span> (checkCallingOrSelfPermission(<span class="hljs-string">"com.example.MY_PERMISSION"</span>) 
        != PackageManager.PERMISSION_GRANTED) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// ç»‘å®šå¤±è´¥</span>
    }
    <span class="hljs-keyword">return</span> binder;
}
</code></pre>
<h3 data-id="heading-10">ğŸ¯ <strong>æ€§èƒ½ä¸ç¨³å®šæ€§æœ€ä½³å®è·µ</strong></h3>
<ol>
<li><strong>å‡å°‘è·¨è¿›ç¨‹è°ƒç”¨æ¬¡æ•°</strong>ï¼šè®¾è®¡æ¥å£æ—¶ï¼Œå°½é‡å°†å¤šä¸ªæ“ä½œåˆå¹¶ä¸ºä¸€æ¬¡è°ƒç”¨ï¼ˆå¦‚ä¼ é€’ä¸€ä¸ª<code>User</code>å¯¹è±¡ï¼Œè€Œéå¤šæ¬¡è°ƒç”¨è®¾ç½®<code>name</code>ã€<code>id</code>ï¼‰ã€‚</li>
<li><strong>æ³¨æ„çº¿ç¨‹æ¨¡å‹</strong>ï¼šAIDLè°ƒç”¨åœ¨æœåŠ¡ç«¯é»˜è®¤è¿è¡Œåœ¨ <strong>Binderçº¿ç¨‹æ± </strong> ä¸­ï¼ˆéä¸»çº¿ç¨‹ï¼‰ï¼Œå› æ­¤éœ€è¦è¿›è¡Œçº¿ç¨‹åŒæ­¥ã€‚ä½¿ç”¨ <code>oneway</code> è°ƒç”¨æ—¶ï¼ŒæœåŠ¡ç«¯æ–¹æ³•ä»ä¼šåœ¨Binderçº¿ç¨‹æ± ä¸­æ‰§è¡Œã€‚</li>
<li><strong>å¦¥å–„å¤„ç† <code>RemoteException</code></strong>ï¼šæ‰€æœ‰è·¨è¿›ç¨‹è°ƒç”¨éƒ½å¿…é¡»æ•è·æ­¤å¼‚å¸¸ï¼Œå®ƒæ„å‘³ç€è¿æ¥å·²æ–­å¼€ã€‚</li>
<li><strong>åŠæ—¶è§£ç»‘</strong>ï¼šåœ¨å®¢æˆ·ç«¯ï¼ˆå¦‚<code>Activity</code>ï¼‰çš„ <code>onDestroy</code> ä¸­è°ƒç”¨ <code>unbindService</code>ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚</li>
<li><strong>æ¥å£ç‰ˆæœ¬å…¼å®¹</strong>ï¼šä¸ºå·²å‘å¸ƒçš„AIDLæ¥å£æ·»åŠ æ–°æ–¹æ³•æ—¶ï¼Œè€ƒè™‘å‘åå…¼å®¹ï¼Œä¾‹å¦‚ä½¿ç”¨é»˜è®¤å®ç°æˆ–ç‰ˆæœ¬å·åå•†ã€‚</li>
</ol>
<h2 data-id="heading-11">Demo ç¤ºä¾‹</h2>
<p>IRemoteService.aidl</p>
<pre><code class="hljs language-csharp" lang="csharp">package com.example.aidl;
import com.example.aidl.User;   <span class="hljs-comment">// è‡ªå®šä¹‰ Parcelable</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title">IRemoteService</span> {
    <span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">add</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> a, <span class="hljs-built_in">int</span> b</span>)</span>;                <span class="hljs-comment">// åŸºæœ¬ç±»å‹</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printUser</span>(<span class="hljs-params"><span class="hljs-keyword">in</span> User u</span>)</span>;            <span class="hljs-comment">// in æ–¹å‘</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span>(<span class="hljs-params"><span class="hljs-keyword">out</span> User u</span>)</span>;             <span class="hljs-comment">// out æ–¹å‘</span>
    <span class="hljs-function">oneway <span class="hljs-keyword">void</span> <span class="hljs-title">fireCallback</span>()</span>;           <span class="hljs-comment">// éé˜»å¡</span>
}
</code></pre>
<p>User.aidl</p>
<pre><code class="hljs language-ini" lang="ini">package com.example.aidl<span class="hljs-comment">;</span>
parcelable User<span class="hljs-comment">;</span>
</code></pre>
<p>æœåŠ¡ç«¯å®ç°</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RemoteService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Service</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> IRemoteService.<span class="hljs-type">Stub</span> <span class="hljs-variable">binder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IRemoteService</span>.Stub() {
    
        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> { <span class="hljs-keyword">return</span> a + b; }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printUser</span><span class="hljs-params">(User u)</span> { Log.d(<span class="hljs-string">"AIDL"</span>, u.name); }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getUser</span><span class="hljs-params">(User u)</span> {
            u.name = <span class="hljs-string">"server"</span>; u.age = <span class="hljs-number">18</span>;   <span class="hljs-comment">// å¡«å…… out å‚æ•°</span>
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fireCallback</span><span class="hljs-params">()</span> { <span class="hljs-comment">/* å•å‘ï¼Œæ— è¿”å› */</span> }
    };
    
    <span class="hljs-keyword">public</span> IBinder <span class="hljs-title function_">onBind</span><span class="hljs-params">(Intent i)</span> { <span class="hljs-keyword">return</span> binder; }
}
</code></pre>
<p>å®¢æˆ·ç«¯è°ƒç”¨</p>
<pre><code class="hljs language-ini" lang="ini">IRemoteService <span class="hljs-attr">s</span> = IRemoteService.Stub.asInterface(service)<span class="hljs-comment">;</span>
int <span class="hljs-attr">r</span> = s.add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<span class="hljs-comment">;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ Rust + Bevy æ‰“é€ ä¿®ä»™å¡ç‰Œæ¸¸æˆï¼šä»é›¶ä¸Šæ¶ Windows å•†åº—çš„æŠ€æœ¯å¤ç›˜]]></title>    <link>https://juejin.cn/post/7603314759758200851</link>    <guid>https://juejin.cn/post/7603314759758200851</guid>    <pubDate>2026-02-06T07:31:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603314759758200851" data-draft-id="7603352061506273286" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ Rust + Bevy æ‰“é€ ä¿®ä»™å¡ç‰Œæ¸¸æˆï¼šä»é›¶ä¸Šæ¶ Windows å•†åº—çš„æŠ€æœ¯å¤ç›˜"/> <meta itemprop="keywords" content="Rust,æ¸¸æˆå¼€å‘"/> <meta itemprop="datePublished" content="2026-02-06T07:31:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="peterfei"/> <meta itemprop="url" content="https://juejin.cn/user/2700056287782663"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ Rust + Bevy æ‰“é€ ä¿®ä»™å¡ç‰Œæ¸¸æˆï¼šä»é›¶ä¸Šæ¶ Windows å•†åº—çš„æŠ€æœ¯å¤ç›˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2700056287782663/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    peterfei
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:31:40.000Z" title="Fri Feb 06 2026 07:31:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4be013d0dfb454d99164212a7b954c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGV0ZXJmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770972870&amp;x-signature=FVZ3zP4Bgv%2Bfb6ufcGcqhVZ5xig%3D" alt="4v63r2n7b1rmt0cw3getasz2q8_result_.gif" loading="lazy"/></p>
<blockquote>
<p>ä¸€åç‹¬ç«‹å¼€å‘è€…å¦‚ä½•ç”¨ Rust å’Œ Bevy å¼•æ“ï¼Œæ‰“é€ å‡ºæ‹¥æœ‰å››ç›¸ä½ç»ˆæç‰¹æ•ˆçš„ä¿®ä»™è‚‰é¸½å¡ç‰Œæ¸¸æˆã€Šä¹ç•Œï¼šæ¸¡åŠ«ã€‹ï¼Œå¹¶æˆåŠŸç™»é™† Windows å•†åº—ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€é¡¹ç›®ç¼˜èµ·ï¼šä¸ºä»€ä¹ˆé€‰æ‹© Rust + Bevyï¼Ÿ</h2>
<p>ä½œä¸ºä¸€åæŠ€æœ¯åšä¸»ï¼Œæˆ‘ä¸€ç›´æƒ³æŒ‘æˆ˜æ¸¸æˆå¼€å‘ã€‚å½“å†³å®šè¦åšä¸€æ¬¾ä¿®ä»™é¢˜æçš„è‚‰é¸½å¡ç‰Œæ¸¸æˆæ—¶ï¼Œæˆ‘é¢ä¸´ä¸€ä¸ªå…³é”®é€‰æ‹©ï¼šç”¨ä»€ä¹ˆæŠ€æœ¯æ ˆï¼Ÿ</p>
<p>Unityï¼Ÿå¤ªé‡ï¼Œè€Œä¸”ä¸ªäººç‰ˆæœ‰å¯åŠ¨ç”»é¢é™åˆ¶ã€‚Godotï¼Ÿå­¦ä¹ æ›²çº¿å°šå¯ï¼Œä½†æ€§èƒ½è°ƒä¼˜ä¸å¤Ÿé€æ˜ã€‚æœ€ç»ˆï¼Œæˆ‘é€‰æ‹©äº† <strong>Rust + Bevy 0.15</strong>ï¼Œè¿™ä¸ªå†³å®šè®©æˆ‘å—ç›ŠåŒªæµ…ã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆæ˜¯ Rustï¼Ÿ</h3>
<ul>
<li><strong>å†…å­˜å®‰å…¨</strong>ï¼šä¸ç”¨æ‹…å¿ƒæ‚¬å‚æŒ‡é’ˆå’Œå†…å­˜æ³„æ¼</li>
<li><strong>é›¶æˆæœ¬æŠ½è±¡</strong>ï¼šé«˜çº§ç‰¹æ€§ä¸ä¼šå¸¦æ¥è¿è¡Œæ—¶å¼€é”€</li>
<li><strong>ç”Ÿæ€æ´»è·ƒ</strong>ï¼šcrates.io ä¸Šæœ‰ä¸°å¯Œçš„æ¸¸æˆå¼€å‘åº“</li>
</ul>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆæ˜¯ Bevyï¼Ÿ</h3>
<ul>
<li><strong>ECS æ¶æ„</strong>ï¼šæ•°æ®é©±åŠ¨çš„å®ä½“ç»„ä»¶ç³»ç»Ÿï¼Œæ€§èƒ½å“è¶Š</li>
<li><strong>çƒ­é‡è½½å¼€å‘</strong>ï¼šä»£ç æ”¹åŠ¨å³æ—¶ç”Ÿæ•ˆï¼Œå¼€å‘ä½“éªŒä¸æ»‘</li>
<li><strong>ç°ä»£æ¸²æŸ“</strong>ï¼šåŸºäº WGPUï¼Œè·¨å¹³å°æ”¯æŒä¼˜ç§€</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€é¡¹ç›®æ¶æ„ï¼šæ¨¡å—åŒ–è®¾è®¡å…¨è§ˆ</h2>
<pre><code class="hljs language-bash" lang="bash">bevy-card-battler/
â”œâ”€â”€ src/
â”‚ Â  â”œâ”€â”€ main.rs Â  Â  Â  Â   <span class="hljs-comment"># ä¸»å…¥å£ï¼Œçª—å£åˆå§‹åŒ–</span>
â”‚ Â  â”œâ”€â”€ lib.rs Â  Â  Â  Â  Â  <span class="hljs-comment"># åº“å…¥å£ï¼Œæ¨¡å—å¯¼å‡º</span>
â”‚ Â  â”œâ”€â”€ components/ Â  Â   <span class="hljs-comment"># ç»„ä»¶å®šä¹‰</span>
â”‚ Â  â”œâ”€â”€ systems/ Â  Â  Â  Â  <span class="hljs-comment"># ç³»ç»Ÿå®ç°</span>
â”‚ Â  â”œâ”€â”€ plugins/ Â  Â  Â  Â  <span class="hljs-comment"># æ’ä»¶å°è£…</span>
â”‚ Â  â”œâ”€â”€ resources/ Â  Â  Â  <span class="hljs-comment"># å…¨å±€èµ„æº</span>
â”‚ Â  â””â”€â”€ states/ Â  Â  Â  Â   <span class="hljs-comment"># æ¸¸æˆçŠ¶æ€</span>
â”œâ”€â”€ assets/ Â  Â  Â  Â  Â  Â   <span class="hljs-comment"># æ¸¸æˆèµ„æº</span>
â”œâ”€â”€ tests/ Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># é›†æˆæµ‹è¯•</span>
â””â”€â”€ docs/ Â  Â  Â  Â  Â  Â  Â   <span class="hljs-comment"># æŠ€æœ¯æ–‡æ¡£</span>
</code></pre>
<p><strong>æ ¸å¿ƒè®¾è®¡åŸåˆ™</strong>ï¼š</p>
<ol start="0">
<li><strong>æ’ä»¶åŒ–</strong>ï¼šæ¯ä¸ªåŠŸèƒ½æ¨¡å—éƒ½æ˜¯ç‹¬ç«‹ Plugin</li>
<li><strong>çŠ¶æ€é©±åŠ¨</strong>ï¼šä½¿ç”¨ Bevy State ç®¡ç†æ¸¸æˆæµç¨‹</li>
<li><strong>èµ„æºæ± åŒ–</strong>ï¼šçº¹ç†ã€æè´¨ç»Ÿä¸€ç®¡ç†</li>
</ol>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a67707d0a23439f8960fccab6a98e73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGV0ZXJmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770972870&amp;x-signature=Zifx%2BullezMIzi8ztGijslhTuEU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">ä¸‰ã€æ ¸å¿ƒäº®ç‚¹ï¼šä¸‡å‰‘å½’å®—å››ç›¸ä½ç‰¹æ•ˆ</h2>
<p>è¿™æ˜¯æ¸¸æˆæœ€éœ‡æ’¼çš„æŠ€èƒ½ç‰¹æ•ˆï¼Œæˆ‘å°†å…¶æ‹†åˆ†ä¸ºå››ä¸ªè‰ºæœ¯ç›¸ä½ï¼š</p>
<h3 data-id="heading-5">ç¬¬ä¸€ç›¸ä½ï¼šä¸‡å‰‘é½é¸£ (0% ~ 20%)</h3>
<p>é£å‰‘ä»è™šç©ºä¸­"æ’•è£‚"è€Œå‡ºï¼Œæ–œæ’å‘å¤©é™…ã€‚æ ¸å¿ƒæ˜¯<strong>åååŠ›ç®—æ³•</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// å…ˆæ²‰ä¸€ä¸‹ï¼Œå†æé€Ÿå¼¹å°„
let <span class="hljs-attr">progress</span> = strike_t / <span class="hljs-number">0.2</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">recoil</span> = if progress &lt; <span class="hljs-number">0.3</span> {
 Â  Â -30.0 * (progress / 0.3) Â // ä¸‹æ²‰
} else {
 Â  Â -30.0 + 350.0 * ((progress - 0.3) / 0.7) Â // å¼¹å°„
}<span class="hljs-comment">;</span>
<span class="hljs-attr">p.position.y</span> = start_y + recoil<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-6">ç¬¬äºŒç›¸ä½ï¼šå…«å¦å‰‘è½® (20% ~ 45%)</h3>
<p>ç«‹ä½“ä¸‰å±‚åœ†é”¥å½¢å‰‘é˜µï¼Œæ¯å±‚æœ‰ä¸åŒçš„æ—‹è½¬é€Ÿåº¦å’Œå‘¼å¸èŠ‚å¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ä¸‰å±‚åœ†é”¥ç»“æ„
for layer in 0..3 {
 Â  Â let <span class="hljs-attr">base_angle</span> = layer_angle * layer as f32<span class="hljs-comment">;</span>
 Â  Â let <span class="hljs-attr">radius</span> = layer_radius * (layer + <span class="hljs-number">1</span>) as f32<span class="hljs-comment">;</span>
â€‹
 Â  Â // å‘¼å¸é¢¤åŠ¨æ•ˆæœ
 Â  Â let <span class="hljs-attr">breathing</span> = (time * <span class="hljs-number">8.0</span> + layer as f32).sin() * <span class="hljs-number">15.0</span><span class="hljs-comment">;</span>
 Â  Â <span class="hljs-attr">p.position.x</span> = center_x + (angle + breathing).cos() * radius<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-7">ç¬¬ä¸‰ç›¸ä½ï¼šç¬ç‹±é”å®š (45% ~ 55%)</h3>
<p>å…¨å±çªç„¶é™æ­¢ï¼Œé£å‰‘è°ƒå¤´æŒ‡å‘æ•Œäººï¼ŒèƒŒæ™¯å˜æš—ã€‚å…³é”®æ˜¯<strong>å‡é€Ÿæ›²çº¿</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// 3æ¬¡è´å¡å°”å‡é€Ÿ
let <span class="hljs-attr">ease_t</span> = cubic_bezier((strike_t - <span class="hljs-number">0.45</span>) / <span class="hljs-number">0.1</span>)<span class="hljs-comment">;</span>
let <span class="hljs-attr">slowdown</span> = <span class="hljs-number">1.0</span> - ease_t * <span class="hljs-number">0.95</span><span class="hljs-comment">; Â // é™è‡³ 5% é€Ÿåº¦</span>
p.velocity *= slowdown<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-8">ç¬¬å››ç›¸ä½ï¼šæé€Ÿç©¿å¿ƒ (55% ~ 100%)</h3>
<p>æé•¿æ®‹å½±æµå…‰ï¼Œåˆ‡å‘çªåˆºã€‚ä½¿ç”¨<strong>ä¸‰æ¬¡è´å¡å°”æ›²çº¿</strong>å®ç°è½¨è¿¹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// è´å¡å°”æ›²çº¿è½¨è¿¹
let <span class="hljs-attr">p0</span> = current_pos<span class="hljs-comment">;</span>
let <span class="hljs-attr">p1</span> = current_pos + tangent * <span class="hljs-number">200.0</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">p2</span> = enemy_pos - tangent * <span class="hljs-number">100.0</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">p3</span> = enemy_pos<span class="hljs-comment">;</span>
â€‹
let <span class="hljs-attr">t</span> = (strike_t - <span class="hljs-number">0.55</span>) / <span class="hljs-number">0.45</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">curve_pos</span> = cubic_bezier_point(p0, p1, p2, p3, t)<span class="hljs-comment">;</span>
<span class="hljs-attr">p.position</span> = curve_pos<span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h2 data-id="heading-9">å››ã€ç¨‹åºåŒ–ç²’å­ç³»ç»Ÿï¼šå‘Šåˆ«ç¾æœ¯èµ„æºä¾èµ–</h2>
<p>ä¼ ç»Ÿæ¸¸æˆå¼€å‘éœ€è¦ç¾æœ¯æä¾›å¤§é‡ç²’å­è´´å›¾ï¼Œæˆ‘ç”¨<strong>ç¨‹åºåŒ–ç”Ÿæˆ</strong>è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p>
<h3 data-id="heading-10">æ°´å¢¨å†™æ„æ™•æŸ“è´´å›¾</h3>
<pre><code class="hljs language-ini" lang="ini">// è¿è¡Œæ—¶ç”Ÿæˆ 128x128 æ™•æŸ“è´´å›¾
for y in 0..height {
 Â  Â for x in 0..width {
 Â  Â  Â  Â let <span class="hljs-attr">dx</span> = x as f32 - <span class="hljs-number">63.5</span><span class="hljs-comment">;</span>
 Â  Â  Â  Â let <span class="hljs-attr">dy</span> = y as f32 - <span class="hljs-number">63.5</span><span class="hljs-comment">;</span>
 Â  Â  Â  Â let <span class="hljs-attr">dist</span> = (dx*dx + dy*dy).sqrt() / <span class="hljs-number">64.0</span><span class="hljs-comment">;</span>
â€‹
 Â  Â  Â  Â // è¾¹ç¼˜æ‰°åŠ¨æ¨¡æ‹Ÿè‡ªç„¶å¢¨è¿¹
 Â  Â  Â  Â let <span class="hljs-attr">angle</span> = dy.atan2(dx)<span class="hljs-comment">;</span>
 Â  Â  Â  Â let <span class="hljs-attr">noise</span> = (angle * <span class="hljs-number">4.0</span>).sin() * <span class="hljs-number">0.12</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â + (angle * 7.0).cos() * 0.08<span class="hljs-comment">;</span>
â€‹
 Â  Â  Â  Â let <span class="hljs-attr">alpha</span> = (<span class="hljs-number">1.0</span> - dist * dist).powi(<span class="hljs-number">2</span>)<span class="hljs-comment">;</span>
 Â  Â  Â  Â data<span class="hljs-section">[idx + 3]</span> = (alpha * 255.0) as u8<span class="hljs-comment">;</span>
 Â   }
}
</code></pre>
<h3 data-id="heading-11">çµæ°”çƒ§ç¼ç‰¹æ•ˆï¼ˆé›·å‡»ï¼‰</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// å¤šå±‚é¢‘ç‡å™ªå£°æ¨¡æ‹Ÿé›·å‡»åˆ†å‰</span>
let noise = (angle * <span class="hljs-number">5.0</span>)<span class="hljs-selector-class">.sin</span>() * <span class="hljs-number">0.15</span>
 Â  Â  Â  Â  Â + (angle * <span class="hljs-number">13.0</span>)<span class="hljs-selector-class">.cos</span>() * <span class="hljs-number">0.07</span>
 Â  Â  Â  Â  Â + (angle * <span class="hljs-number">27.0</span>)<span class="hljs-selector-class">.sin</span>() * <span class="hljs-number">0.03</span>;
â€‹
<span class="hljs-comment">// ä¸­å¿ƒæ·±ç´«ï¼Œå‘å¤–çƒŸç†æ‰©æ•£</span>
scorch_data<span class="hljs-selector-attr">[i]</span> = (intensity.powf(<span class="hljs-number">2.5</span>) * <span class="hljs-number">40.0</span>) as u8; Â  <span class="hljs-comment">// R</span>
scorch_data<span class="hljs-selector-attr">[i+1]</span> = (intensity.powf(<span class="hljs-number">3.0</span>) * <span class="hljs-number">15.0</span>) as u8; <span class="hljs-comment">// G</span>
scorch_data<span class="hljs-selector-attr">[i+2]</span> = (intensity.powf(<span class="hljs-number">1.8</span>) * <span class="hljs-number">70.0</span>) as u8; <span class="hljs-comment">// B</span>
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>é›¶ç¾æœ¯ä¾èµ–ï¼Œå…¨ä»£ç ç”Ÿæˆ</li>
<li>åŠ¨æ€è°ƒæ•´å‚æ•°ï¼Œå³æ—¶é¢„è§ˆ</li>
<li>ä½“ç§¯å°ï¼Œæ•´åŒ…ä»… 50MB</li>
</ul>
<hr/>
<h2 data-id="heading-12">äº”ã€AI æ¨¡å‹é›†æˆï¼šå›ºæœ‰åå·®è¡¥å¿æœºåˆ¶</h2>
<p>æ¸¸æˆä¸­çš„ 3D è§’è‰²æ¨¡å‹ä½¿ç”¨ AI ç”Ÿæˆï¼Œä½† AI æ¨¡å‹å­˜åœ¨<strong>å›ºæœ‰æœå‘åå·®</strong>ã€‚æˆ‘å®ç°äº†ä¸€å¥—å®æ—¶è¡¥å¿ç®—æ³•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// æ£€æµ‹ç©å®¶ä¸æ•Œäººçš„ç›¸å¯¹ä½ç½®
let <span class="hljs-attr">to_enemy</span> = (enemy_pos - player_pos).normalize()<span class="hljs-comment">;</span>
let <span class="hljs-attr">to_enemy_angle</span> = to_enemy.y.atan2(to_enemy.x)<span class="hljs-comment">;</span>
â€‹
// åº”ç”¨å›ºæœ‰åå·®è¡¥å¿ï¼ˆAI æ¨¡å‹ç‰¹æ€§ï¼‰
const BIAS_COMPENSATION: <span class="hljs-attr">f32</span> = std::f32::consts::PI / <span class="hljs-number">2.0</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">target_angle</span> = to_enemy_angle + BIAS_COMPENSATION<span class="hljs-comment">;</span>
â€‹
// å¹³æ»‘æ—‹è½¬æ’å€¼
<span class="hljs-attr">transform.rotation</span> = Quat::from_rotation_z(
 Â  Â lerp_angle(current_angle, target_angle, 0.15)
)<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ ·ç¡®ä¿è§’è‰²å§‹ç»ˆæ­£ç¡®æœå‘æ•Œäººï¼Œä¸å— AI æ¨¡å‹åŸå§‹æœå‘å½±å“ã€‚</p>
<hr/>
<h2 data-id="heading-13">å…­ã€TDD å¼€å‘å®è·µï¼š17/17 æµ‹è¯•å…¨è¦†ç›–</h2>
<p>ä¸ºäº†ç¡®ä¿ç‰¹æ•ˆè´¨é‡ï¼Œæˆ‘é‡‡ç”¨ TDDï¼ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰æ¨¡å¼ï¼š</p>
<h3 data-id="heading-14">æµ‹è¯•è¦†ç›–çŸ©é˜µ</h3>








































<table><thead><tr><th>æµ‹è¯•ç±»å‹</th><th>ç”¨ä¾‹æ•°</th><th>è¦†ç›–å†…å®¹</th></tr></thead><tbody><tr><td>æ—¶é—´åŒºé—´éªŒè¯</td><td>4</td><td>å››ç›¸ä½è¾¹ç•Œæ£€æµ‹</td></tr><tr><td>åååŠ›å‡½æ•°</td><td>2</td><td>æ²‰é™å¼¹å°„æ›²çº¿</td></tr><tr><td>åœ†é”¥ç»“æ„</td><td>2</td><td>ä¸‰å±‚èºæ—‹æ’åˆ—</td></tr><tr><td>å‘¼å¸é¢¤åŠ¨</td><td>2</td><td>æ­£å¼¦æ³¢åç§»</td></tr><tr><td>NaN é˜²æŠ¤</td><td>4</td><td>è¾¹ç•Œå€¼ä¿æŠ¤</td></tr><tr><td>ä½ç½®éªŒè¯</td><td>3</td><td>åæ ‡æœ‰æ•ˆæ€§</td></tr></tbody></table>
<h3 data-id="heading-15">å…³é”® Bug ä¿®å¤</h3>
<p><strong>Bug #1: è´Ÿæ•° delay å¯¼è‡´ NaN</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âŒ é—®é¢˜ä»£ç </span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">delay</span> = <span class="hljs-number">0.06</span> - (i <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> * <span class="hljs-number">0.015</span>); Â <span class="hljs-comment">// i=11 æ—¶ = -0.105</span>
â€‹
<span class="hljs-comment">// âœ… ä¿®å¤æ–¹æ¡ˆ</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">delay</span> = (<span class="hljs-number">0.06</span> - (i <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> * <span class="hljs-number">0.015</span>)).<span class="hljs-title function_ invoke__">max</span>(<span class="hljs-number">0.0</span>);
</code></pre>
<p><strong>Bug #2: å®ä½“åˆ é™¤åä»æ›´æ–° Transform</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// âŒ é”™è¯¯é¡ºåº</span>
if <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.is_dead</span>() {
 Â  Â commands<span class="hljs-selector-class">.entity</span>(entity)<span class="hljs-selector-class">.despawn_recursive</span>();
}
<span class="hljs-comment">// ... åç»­ä»£ç ä»å°è¯•è®¿é—® entity</span>
â€‹
<span class="hljs-comment">// âœ… æ­£ç¡®é¡ºåº</span>
<span class="hljs-comment">// å…ˆæ›´æ–° Transform</span>
if let <span class="hljs-built_in">Some</span>(mut ec) = commands<span class="hljs-selector-class">.get_entity</span>(entity) {
 Â  Â ec<span class="hljs-selector-class">.insert</span>(Transform::from_rotation(...));
}
<span class="hljs-comment">// å†æ£€æŸ¥æ­»äº¡</span>
if <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.is_dead</span>() {
 Â  Â commands<span class="hljs-selector-class">.entity</span>(entity)<span class="hljs-selector-class">.despawn_recursive</span>();
}
</code></pre>
<hr/>
<h2 data-id="heading-16">ä¸ƒã€Windows å•†åº—ä¸Šæ¶ç»éªŒ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b504cba02f4432fb327d2d5c0bfcbc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGV0ZXJmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770972870&amp;x-signature=pde7AjhaYUQ42PNcueL25BiM1xo%3D" alt="å±å¹•æˆªå›¾(1).png" loading="lazy"/></p>
<h3 data-id="heading-17">æ‰“åŒ…é…ç½®</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Cargo.toml</span>
<span class="hljs-section">[profile.release]</span>
<span class="hljs-attr">opt-level</span> = <span class="hljs-number">3</span> Â  Â  Â <span class="hljs-comment"># æœ€é«˜ä¼˜åŒ–</span>
<span class="hljs-attr">lto</span> = <span class="hljs-string">"fat"</span> Â  Â  Â  Â <span class="hljs-comment"># é“¾æ¥æ—¶ä¼˜åŒ–</span>
<span class="hljs-attr">codegen-units</span> = <span class="hljs-number">1</span> Â <span class="hljs-comment"># å•ç¼–è¯‘å•å…ƒ</span>
<span class="hljs-attr">strip</span> = <span class="hljs-literal">true</span> Â  Â  Â  <span class="hljs-comment"># å»é™¤è°ƒè¯•ç¬¦å·</span>
</code></pre>
<h3 data-id="heading-18">MSIX æ‰“åŒ…è„šæœ¬</h3>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># build_msix.bat</span>
cargo build --release
makemsix <span class="hljs-keyword">pack</span> ...
</code></pre>
<h3 data-id="heading-19">ä¸Šæ¶æ¸…å•</h3>
<ul>
<li>âœ… åº”ç”¨å›¾æ ‡ï¼ˆå¤šå°ºå¯¸ï¼‰</li>
<li>âœ… æˆªå›¾ï¼ˆ4-8 å¼ ï¼‰</li>
<li>âœ… éšç§æ”¿ç­–ï¼ˆæœ¬åœ°å­˜å‚¨å£°æ˜ï¼‰</li>
<li>âœ… å†…å®¹è¯„çº§</li>
<li>âœ… å¹´é¾„åˆ†çº§</li>
</ul>
<hr/>
<h2 data-id="heading-20">å…«ã€æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2>
<h3 data-id="heading-21">1. ç²¾å‡†æ§åˆ¶ Bevy ç‰¹æ€§</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç§»é™¤é»˜è®¤ç‰¹æ€§ï¼ŒæŒ‰éœ€åŠ è½½</span>
<span class="hljs-attr">bevy</span> = { version = <span class="hljs-string">"0.15"</span>, default-features = <span class="hljs-literal">false</span>, features = [
 Â  Â <span class="hljs-string">"animation"</span>, <span class="hljs-string">"bevy_asset"</span>, <span class="hljs-string">"bevy_audio"</span>, <span class="hljs-string">"bevy_render"</span>,
 Â  Â <span class="hljs-string">"multi_threaded"</span>, <span class="hljs-string">"png"</span>, <span class="hljs-string">"jpeg"</span>, <span class="hljs-string">"vorbis"</span>, <span class="hljs-string">"mp3"</span>,
 Â  Â <span class="hljs-string">"tonemapping_luts"</span>, <span class="hljs-string">"bevy_pbr"</span>, <span class="hljs-string">"bevy_picking"</span>, <span class="hljs-string">"bevy_state"</span>
] }
</code></pre>
<h3 data-id="heading-22">2. æ¸²æŸ“è®¾ç½®ä¼˜åŒ–</h3>
<pre><code class="hljs language-c" lang="c">RenderPlugin {
 Â  Â render_creation: WgpuSettings {
 Â  Â  Â  Â power_preference: PowerPreference::HighPerformance,
 Â  Â  Â   ..<span class="hljs-keyword">default</span>()
 Â   }.into(),
 Â   ..<span class="hljs-keyword">default</span>()
}
</code></pre>
<h3 data-id="heading-23">3. æ—¥å¿—ç³»ç»Ÿåˆ†å±‚</h3>
<pre><code class="hljs language-css" lang="css">// æ–‡ä»¶ + æ§åˆ¶å°åŒå±‚æ—¥å¿—
let file_appender = RollingFileAppender::<span class="hljs-built_in">new</span>(Rotation::DAILY, &amp;log_dir, <span class="hljs-string">"jiujie.log"</span>);
let <span class="hljs-attribute">filter</span> = EnvFilter::<span class="hljs-built_in">try_from_default_env</span>()
 Â   .<span class="hljs-built_in">unwrap_or_else</span>(|_| <span class="hljs-string">"wgpu=error,bevy=info,jiujie=debug"</span>.<span class="hljs-built_in">into</span>());
</code></pre>
<hr/>
<h2 data-id="heading-24">ä¹ã€æŠ€æœ¯æ ˆæ€»ç»“</h2>








































<table><thead><tr><th>æŠ€æœ¯</th><th>ç‰ˆæœ¬</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>Rust</td><td>2021 Edition</td><td>æ ¸å¿ƒè¯­è¨€</td></tr><tr><td>Bevy</td><td>0.15</td><td>æ¸¸æˆå¼•æ“</td></tr><tr><td>rand</td><td>0.8</td><td>éšæœºæ•°ç”Ÿæˆ</td></tr><tr><td>serde</td><td>1.0</td><td>åºåˆ—åŒ–</td></tr><tr><td>image</td><td>0.25</td><td>å›¾åƒå¤„ç†</td></tr><tr><td>winit</td><td>0.30</td><td>çª—å£ç®¡ç†</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-25">åã€æœªæ¥è§„åˆ’</h2>
<ul>
<li>ç§»æ¤åˆ° Steam å¹³å°</li>
<li>æ·»åŠ äº‘å­˜æ¡£åŒæ­¥</li>
<li>å®ç°æˆå°±ç³»ç»Ÿ</li>
<li>æ”¯æŒæ¨¡ç»„åŠ è½½</li>
<li>æ¨å‡º Linux ç‰ˆæœ¬</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-232 ç¦»çº¿æ•°ä»“Hive ç¦»çº¿æ•°ä»“æ–°å¢ä¸ç•™å­˜è®¡ç®—ï¼šDWS æ˜ç»† + ADS æ±‡æ€»ä¸€å¥—è·‘é€š]]></title>    <link>https://juejin.cn/post/7603309951227215922</link>    <guid>https://juejin.cn/post/7603309951227215922</guid>    <pubDate>2026-02-06T08:18:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603309951227215922" data-draft-id="7603393977477038106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-232 ç¦»çº¿æ•°ä»“Hive ç¦»çº¿æ•°ä»“æ–°å¢ä¸ç•™å­˜è®¡ç®—ï¼šDWS æ˜ç»† + ADS æ±‡æ€»ä¸€å¥—è·‘é€š"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Apache Hive"/> <meta itemprop="datePublished" content="2026-02-06T08:18:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-232 ç¦»çº¿æ•°ä»“Hive ç¦»çº¿æ•°ä»“æ–°å¢ä¸ç•™å­˜è®¡ç®—ï¼šDWS æ˜ç»† + ADS æ±‡æ€»ä¸€å¥—è·‘é€š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T08:18:26.000Z" title="Fri Feb 06 2026 08:18:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šç¦»çº¿æ•°ä»“æŒ‰å¤©è®¡ç®—â€œæ–°å¢ä¼šå‘˜â€ï¼Œå¹¶ä¸ºåç»­â€œä¼šå‘˜ç•™å­˜â€æä¾›å£å¾„ä¸€è‡´çš„æ•°æ®åº•åº§</li>
<li>ç»“è®ºï¼šç”¨â€œå…¨é‡ä¼šå‘˜è¡¨(å«é¦–æ—¥dt)â€åšå»é‡é”šç‚¹ï¼ŒDWS äº§æ–°å¢æ˜ç»†ï¼ŒADS äº§æ–°å¢è®¡æ•°ï¼Œè„šæœ¬ä¸²è¡Œå³å¯</li>
<li>äº§å‡ºï¼šå¯å¤ç”¨çš„ Hive SQL/è„šæœ¬æ¨¡æ¿ï¼šæ–°å¢è¯†åˆ«ï¼ˆleft join is nullï¼‰+ ä¼šå‘˜å…¨é‡è¡¨å¢é‡ç»´æŠ¤ + æ¯æ—¥æ–°å¢æŒ‡æ ‡è¡¨</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37b66db62d09440083a0f943624ec51e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971436&amp;x-signature=Pfb9ECM147qA4yCMTTQUf%2ByLcRI%3D" alt="å¤§æ•°æ®-232 ç¦»çº¿æ•°ä»“Hive ç¦»çº¿æ•°ä»“æ–°å¢ä¼šå‘˜ä¸ç•™å­˜è®¡ç®—ï¼šDWS æ˜ç»† + ADS æ±‡æ€»ä¸€å¥—è·‘é€š" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56e62770ac3c4c259c9a549a1e3c5200~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971436&amp;x-signature=S6mtWywl%2Bgxdh7gIlVVrxMS2AjQ%3D" alt="ç¦»çº¿æ•°ä»“æ¶æ„å›¾" loading="lazy"/></p>
<h2 data-id="heading-1">æ–°å¢ä¼šå‘˜</h2>
<ul>
<li>ç•™å­˜ä¼šå‘˜ï¼šæŸæ®µæ—¶é—´çš„æ–°å¢ä¼šå‘˜ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œä»ç„¶ä½¿ç”¨åº”ç”¨è®¤ä¸ºæ˜¯ç•™å­˜çš„ä¼šå‘˜ã€‚</li>
<li>æ–°å¢ä¼šå‘˜ï¼šç¬¬ä¸€æ¬¡ä½¿ç”¨åº”ç”¨çš„ç”¨æˆ·ï¼Œå®šä¹‰ä¸ºæ–°å¢ä¼šå‘˜ï¼Œå¸è½½å†æ¬¡å®‰è£…çš„è®¾å¤‡ï¼Œä¸ä¼šè¢«ç®—ä½œæ˜¯æ–°å¢ç”¨æˆ·</li>
</ul>
<p>æ–°å¢ä¼šå‘˜å…ˆè®¡ç®— =&gt; è®¡ç®—ä¼šå‘˜ç•™å­˜</p>
<h3 data-id="heading-2">éœ€æ±‚æè¿°</h3>
<p>æ¯æ—¥æ–°å¢ä¼šå‘˜æ•°
08-02ï¼šDWDï¼Œä¼šå‘˜æ¯æ—¥å¯åŠ¨æ˜ç»†ï¼ˆ95-110ï¼‰ï¼›æ‰€æœ‰ä¼šå‘˜ä¿¡æ¯ï¼ˆ1-100ï¼‰</p>
<ul>
<li>æ–°å¢ä¼šå‘˜ 101-110</li>
<li>æ–°å¢ä¼šå‘˜æ•°æ®+æ—§çš„ä¼šå‘˜çš„ä¿¡æ¯ = æ–°çš„æ‰€æœ‰ä¼šå‘˜ä¿¡æ¯ï¼ˆ1-110ï¼‰</li>
</ul>
<p>08-03ï¼šDWDï¼Œä¼šå‘˜æ¯æ—¥å¯åŠ¨æ˜ç»†ï¼ˆ100-120ï¼‰ï¼›æ‰€æœ‰ä¼šå‘˜çš„ä¿¡æ¯ï¼ˆ1-110ï¼‰</p>
<ul>
<li>æ–°å¢ä¼šå‘˜ï¼š111-120</li>
<li>æ–°å¢ä¼šå‘˜æ•°æ® + æ—§çš„æ‰€æœ‰ä¼šå‘˜çš„ä¿¡æ¯ = æ–°çš„æ‰€æœ‰ä¼šå‘˜çš„ä¿¡æ¯ï¼ˆ1-120ï¼‰</li>
</ul>
<p>è®¡ç®—æ­¥éª¤ï¼š</p>
<ul>
<li>è®¡ç®—æ–°å¢ä¼šå‘˜</li>
<li>æ›´æ–°æ‰€æœ‰ä¼šå‘˜ä¿¡æ¯</li>
</ul>
<p>æ”¹è¿›åæ–¹æ³•ï¼š</p>
<ul>
<li>åœ¨æ‰€æœ‰ä¼šå‘˜ä¿¡æ¯ä¸­å¢åŠ æ—¶é—´åˆ—ï¼Œè¡¨ç¤ºè¿™ä¸ªä¼šå‘˜æ˜¯å“ªä¸€å¤©æˆä¸ºæ–°å¢ä¼šå‘˜</li>
<li>åªéœ€è¦ä¸€å¼ è¡¨ï¼šæ‰€æœ‰ä¼šå‘˜çš„ä¿¡æ¯ï¼ˆidï¼Œdtï¼‰</li>
<li>å°†æ–°å¢ä¼šå‘˜æ’å…¥æ‰€æœ‰ä¼šå‘˜è¡¨ä¸­</li>
</ul>
<h3 data-id="heading-3">æ¡ˆä¾‹ï¼šå¦‚ä½•è®¡ç®—æ–°å¢ä¼šå‘˜</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- t1.dat çš„æ•°æ®å¦‚ä¸‹</span>
<span class="hljs-number">4</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-02</span>
<span class="hljs-number">5</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-02</span>
<span class="hljs-number">6</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-02</span>
<span class="hljs-number">7</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-02</span>
<span class="hljs-number">8</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-02</span>
<span class="hljs-number">9</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-02</span>

<span class="hljs-comment">-- æ—¥å¯åŠ¨è¡¨ =&gt; DWS</span>
<span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> t1;
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t1(id <span class="hljs-type">int</span>, dt string) <span class="hljs-type">row</span> format delimited fields terminated <span class="hljs-keyword">by</span> <span class="hljs-string">','</span>;
load data <span class="hljs-keyword">local</span> inpath <span class="hljs-string">'/opt/wzk/hive/data/t1.dat'</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">table</span> t1;
</code></pre>
<p>æ‰§è¡Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/baa6787e7bd842faa26b2dbfe1d2c00a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971436&amp;x-signature=7UCv9n3jVCprPMy2rInzFOKPvrk%3D" alt="ç¦»çº¿æ•°ä»“Hive åˆ›å»ºè¡¨" loading="lazy"/></p>
<p>ç»§ç»­æ‰§è¡Œ</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- t2.dat çš„æ•°æ®å¦‚ä¸‹</span>
<span class="hljs-number">1</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-01</span>
<span class="hljs-number">2</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-01</span>
<span class="hljs-number">3</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-01</span>
<span class="hljs-number">4</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-01</span>
<span class="hljs-number">5</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-01</span>
<span class="hljs-number">6</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-01</span>

<span class="hljs-comment">-- å…¨é‡æ•°æ® =&gt; DWS</span>
<span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> t2;
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t2(id <span class="hljs-type">int</span>, dt string)
<span class="hljs-type">row</span> format delimited fields terminated <span class="hljs-keyword">by</span> <span class="hljs-string">','</span>;
load data <span class="hljs-keyword">local</span> inpath <span class="hljs-string">'/opt/wzk/hive/data/t2.dat'</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">table</span> t2;
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77530146ce2b41ad9ace2bcc24a768cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971436&amp;x-signature=Bsuv3A3RfCzElvu6KYm8WjcJ6iw%3D" alt="ç¦»çº¿æ•°ä»“Hiveä¸¢å¼ƒè¡¨" loading="lazy"/></p>
<p>ç»§ç»­æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ‰¾å‡º 2020-08-02 çš„æ–°ç”¨æˆ·</span>
<span class="hljs-keyword">select</span> t1.id, t1.dt, t2.id, t2.dt
<span class="hljs-keyword">from</span> t1 <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> t2 <span class="hljs-keyword">on</span> t1.id<span class="hljs-operator">=</span>t2.id
<span class="hljs-keyword">where</span> t1.dt<span class="hljs-operator">=</span>"2020-08-02";
<span class="hljs-keyword">select</span> t1.id, t1.dt
<span class="hljs-keyword">from</span> t1 <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> t2 <span class="hljs-keyword">on</span> t1.id<span class="hljs-operator">=</span>t2.id
<span class="hljs-keyword">where</span> t1.dt<span class="hljs-operator">=</span>"2020-08-02"
<span class="hljs-keyword">and</span> t2.id <span class="hljs-keyword">is</span> <span class="hljs-keyword">null</span>;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/554a0331db8a4384b0c4972a2e6c8c43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971436&amp;x-signature=tRtSRdZnCeNvW5mx5KnwtUToKTY%3D" alt="ç¦»çº¿æ•°ä»“Hive æŸ¥è¯¢è¡¨" loading="lazy"/>
ç»§ç»­è¿è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å°†æ‰¾åˆ° 2020-08-02 æ–°ç”¨æˆ·æ•°æ®æ’å…¥t2è¡¨ä¸­</span>
<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">table</span> t2
<span class="hljs-keyword">select</span> t1.id, t1.dt
<span class="hljs-keyword">from</span> t1 <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> t2 <span class="hljs-keyword">on</span> t1.id<span class="hljs-operator">=</span>t2.id
<span class="hljs-keyword">where</span> t1.dt<span class="hljs-operator">=</span>"2020-08-02"
<span class="hljs-keyword">and</span> t2.id <span class="hljs-keyword">is</span> <span class="hljs-keyword">null</span>;
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f44ca4aae8d40bfaf1dc50242e0c588~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971436&amp;x-signature=0yaZAoIzNwmzbDo6TbeaZNg1bXQ%3D" alt="ç¦»çº¿æ•°ä»“Hive æ’å…¥æ•°æ®åˆ°è¡¨æ ¼" loading="lazy"/>
ç›®å‰t2çš„æ•°æ®æœ‰ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">hive (default)&gt; select * from t2;
OK
t2.id   t2.dt
7       2020-08-02
8       2020-08-02
9       2020-08-02
1       2020-08-01
2       2020-08-01
3       2020-08-01
4       2020-08-01
5       2020-08-01
6       2020-08-01
Time taken: 0.137 seconds, Fetched: 9 row(s)
hive (default)&gt; 
</code></pre>
<p>æˆ‘ä»¬ç»§ç»­åŠ è½½æ–°çš„æ•°æ®è¿›å»ï¼Œæ•´ä½“çš„æ€è·¯å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- t3.datçš„æ•°æ®ï¼Œt1 åŠ è½½ 2020-08-03 çš„æ•°æ®</span>
<span class="hljs-number">14</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-03</span>
<span class="hljs-number">15</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-03</span>
<span class="hljs-number">16</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-03</span>
<span class="hljs-number">17</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-03</span>
<span class="hljs-number">18</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-03</span>
<span class="hljs-number">19</span>,<span class="hljs-number">2020</span><span class="hljs-number">-08</span><span class="hljs-number">-03</span>

load data <span class="hljs-keyword">local</span> inpath <span class="hljs-string">'/opt/wzk/hive/data/t3.dat'</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">table</span> t1;

<span class="hljs-comment">-- åŒæ ·çš„æ€è·¯</span>
<span class="hljs-comment">-- å°†æ‰¾åˆ° 2020-08-03 æ–°ç”¨æˆ·æ•°æ®æ’å…¥t2è¡¨ä¸­</span>
<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">table</span> t2
<span class="hljs-keyword">select</span> t1.id, t1.dt
<span class="hljs-keyword">from</span> t1 <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> t2 <span class="hljs-keyword">on</span> t1.id<span class="hljs-operator">=</span>t2.id
<span class="hljs-keyword">where</span> t1.dt<span class="hljs-operator">=</span>"2020-08-03"
<span class="hljs-keyword">and</span> t2.id <span class="hljs-keyword">is</span> <span class="hljs-keyword">null</span>;
<span class="hljs-comment">-- æ£€æŸ¥ç»“æœ</span>
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t2;
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b29d3c8c831471e946be75d99a34658~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971436&amp;x-signature=GWJgzy02g4XuqFEgyCmhAflDVJE%3D" alt="ç¦»çº¿æ•°ä»“HiveæŸ¥è¯¢æ•°æ®" loading="lazy"/></p>
<h3 data-id="heading-4">DWSä½œç”¨</h3>
<h4 data-id="heading-5">ç»Ÿä¸€æ•°æ®æ¨¡å‹</h4>
<p>å°†åŸå§‹æ•°æ®ï¼ˆODSå±‚ï¼‰æŒ‰ç…§ä¸€å®šçš„é€»è¾‘æ¨¡å‹è¿›è¡Œæ•´åˆã€æ¸…æ´—ã€åŠ å·¥ï¼Œå½¢æˆæ ‡å‡†åŒ–çš„æ•°æ®ç»“æ„ã€‚
æ”¯æŒå¯¹æ•°æ®çš„å¤šç»´åº¦ã€å¤šç²’åº¦åˆ†æã€‚</p>
<h4 data-id="heading-6">æ”¯æŒä¸šåŠ¡åœºæ™¯</h4>
<p>æ»¡è¶³ä¼ä¸šå¯¹å†å²æ•°æ®çš„æŸ¥è¯¢å’Œåˆ†æéœ€æ±‚ã€‚
æ”¯æŒ OLAPï¼ˆåœ¨çº¿åˆ†æå¤„ç†ï¼‰æ“ä½œï¼Œå¦‚èšåˆæŸ¥è¯¢ã€é’»å–å’Œåˆ‡ç‰‡ã€‚</p>
<h4 data-id="heading-7">æ•°æ®ç»†åŒ–ä¸åˆ†ç±»</h4>
<p>å°†æ•°æ®æŒ‰ç…§ä¸»é¢˜åŸŸï¼ˆå¦‚é”€å”®ã€è´¢åŠ¡ã€åº“å­˜ç­‰ï¼‰åˆ†ç±»ï¼Œä¾¿äºç®¡ç†å’ŒæŸ¥è¯¢ã€‚
é€šå¸¸ä¿æŒè¾ƒé«˜çš„ç»†èŠ‚ç²’åº¦ï¼Œä¾¿äºçµæ´»æ‰©å±•ã€‚</p>
<h4 data-id="heading-8">æ•°æ®å‡†ç¡®æ€§ä¸ä¸€è‡´æ€§</h4>
<p>ç»è¿‡å¤„ç†çš„æ•°æ®ç»è¿‡æ ¡éªŒï¼Œç¡®ä¿é€»è¾‘å…³ç³»æ­£ç¡®ï¼Œèƒ½å¤Ÿä¸ºä¸‹æ¸¸æä¾›å‡†ç¡®çš„ä¸€è‡´æ€§æ•°æ®ã€‚</p>
<h3 data-id="heading-9">åˆ›å»ºDWSå±‚è¡¨</h3>
<pre><code class="hljs language-sql" lang="sql">use dws;
<span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> dws.dws_member_add_day;
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> dws.dws_member_add_day
(
  `device_id` string,
  `uid` string,
  `app_v` string,
  `os_type` string,
  `<span class="hljs-keyword">language</span>` string,
  `channel` string,
  `area` string,
  `brand` string,
  `dt` string
) COMMENT <span class="hljs-string">'æ¯æ—¥æ–°å¢ä¼šå‘˜æ˜ç»†'</span>
stored <span class="hljs-keyword">as</span> parquet;
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5977b9d54cda41818a422e7dfd78e65d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971436&amp;x-signature=Wjcw%2FPq%2FnUp8S5CAMOWFrYltrw4%3D" alt="ç¦»çº¿æ•°ä»“ DWS å±‚" loading="lazy"/></p>
<h3 data-id="heading-10">åŠ è½½DWSå±‚æ•°æ®</h3>
<p>æˆ‘ä»¬ç¼–å†™è„šæœ¬ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">vim /opt/wzk/hive/dws_load_member_add_day.sh
</code></pre>
<p>å†™å…¥å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">#</span><span class="bash">!/bin/bash</span>
source /etc/profile
if [ -n "$1" ]
then
do_date=$1
else
do_date=`date -d "-1 day" +%F`
fi
sql="
insert into table dws.dws_member_add_day
select t1.device_id,
t1.uid,
t1.app_v,
t1.os_type,
t1.language,
t1.channel,
t1.area,
t1.brand,
'$do_date'
from dws.dws_member_start_day t1 left join
dws.dws_member_add_day t2
on t1.device_id=t2.device_id
where t1.dt='$do_date'
and t2.device_id is null;
"
hive -e "$sql"
</code></pre>
<p>å†™å…¥çš„å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7453f2ae3fb49d0bd0f4d73e8f686e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971436&amp;x-signature=60xl14xxAFxWR9SaMGk0zFiMuVw%3D" alt="ç¦»çº¿æ•°ä»“åŠ è½½ DWS å±‚" loading="lazy"/></p>
<h3 data-id="heading-11">ADS ä½œç”¨</h3>
<h4 data-id="heading-12">èšåˆå’Œç®€åŒ–æ•°æ®</h4>
<p>å°† DWS å±‚ä¸­å¤šè¡¨ã€å¤šä¸»é¢˜åŸŸçš„æ•°æ®èšåˆæˆç®€å•æ˜“ç”¨çš„è¡¨æˆ–è§†å›¾ã€‚
ç›´æ¥è¾“å‡ºæ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æ•°æ®ç»“æœã€‚</p>
<h4 data-id="heading-13">é¢å‘ä¸šåŠ¡åº”ç”¨</h4>
<p>é€šè¿‡è®¾è®¡å®½è¡¨æˆ–é«˜æ€§èƒ½è§†å›¾ï¼Œç›´æ¥æ”¯æŒå…·ä½“çš„ä¸šåŠ¡åœºæ™¯å’ŒæŠ¥è¡¨éœ€æ±‚ã€‚
å“åº”å¿«é€ŸæŸ¥è¯¢éœ€æ±‚ï¼Œå¦‚å®æ—¶æ•°æ®çš„å±•ç¤ºã€‚</p>
<h4 data-id="heading-14">æ•°æ®åˆ†å‘ä¸é›†æˆ</h4>
<p>ä¸ºå‰ç«¯çš„ BI å·¥å…·ã€æŠ¥è¡¨ç³»ç»Ÿæˆ– API æœåŠ¡æä¾›é«˜æ•ˆçš„æŸ¥è¯¢æ¥å£ã€‚
èƒ½å¤Ÿé€šè¿‡ç¼“å­˜æœºåˆ¶æˆ–ç‰©åŒ–è§†å›¾åŠ é€ŸæŸ¥è¯¢æ€§èƒ½ã€‚</p>
<h4 data-id="heading-15">è½»é‡åŒ–ä¸é«˜æ€§èƒ½</h4>
<p>å°½é‡å‡å°‘æ•°æ®é‡ï¼Œä¿ç•™ä¸šåŠ¡æœ€å…³å¿ƒçš„å…³é”®æŒ‡æ ‡ã€‚
é‡‡ç”¨é¢„èšåˆã€é¢„è®¡ç®—ç­‰æŠ€æœ¯æå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p>
<h3 data-id="heading-16">åˆ›å»ºADSå±‚è¡¨</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> ads.ads_new_member_cnt;
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> ads.ads_new_member_cnt(
  `cnt` string
)
partitioned <span class="hljs-keyword">by</span>(dt string)
<span class="hljs-type">row</span> format delimited fields terminated <span class="hljs-keyword">by</span> <span class="hljs-string">','</span>;
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/215a2c64b9e9452496ca1dbdb1df504b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971436&amp;x-signature=XOZFZ4nRok%2FvOKW80F8WSB8K1vg%3D" alt="ç¦»çº¿æ•°ä»“ Hive DWS å±‚" loading="lazy"/></p>
<h3 data-id="heading-17">åŠ è½½ADSå±‚æ•°æ®</h3>
<p>ç¼–å†™æ•°æ®åŠ è½½çš„è„šæœ¬ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">vim /opt/wzk/hive/ads_load_member_add.sh
</code></pre>
<p>ç¼–å†™å¯¹åº”çš„è„šæœ¬å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-sql" lang="sql">#<span class="hljs-operator">!</span><span class="hljs-operator">/</span>bin<span class="hljs-operator">/</span>bash
source <span class="hljs-operator">/</span>etc<span class="hljs-operator">/</span>profile
if [ <span class="hljs-operator">-</span>n "$1" ] ;<span class="hljs-keyword">then</span>
do_date<span class="hljs-operator">=</span>$<span class="hljs-number">1</span>
<span class="hljs-keyword">else</span>
do_date<span class="hljs-operator">=</span>`<span class="hljs-type">date</span> <span class="hljs-operator">-</span>d "-1 day" <span class="hljs-operator">+</span><span class="hljs-operator">%</span>F`
fi
<span class="hljs-keyword">sql</span><span class="hljs-operator">=</span>"
insert overwrite table ads.ads_new_member_cnt
partition (dt='$do_date')
select count(1)
from dws.dws_member_add_day
where dt = '$do_date'
"
hive <span class="hljs-operator">-</span>e "$sql"
</code></pre>
<h3 data-id="heading-18">æš‚æ—¶å°ç»“</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19e374a5a01c4f5aa0de17db7df9fc82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971436&amp;x-signature=k6ukLTDL%2BkO4O84GTTM64I1gnYE%3D" alt="ç¦»çº¿æ•°ä»“ ADS å±‚" loading="lazy"/>
è°ƒç”¨è„šæœ¬çš„æ¬¡åºæ˜¯ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">dws_load_member_add_day.sh
ads_load_member_add.sh
</code></pre>
<h2 data-id="heading-19">é”™è¯¯é€ŸæŸ¥</h2>













































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>å½“æ—¥æ–°å¢æ•°å¿½é«˜å¿½ä½</td><td>æ–°å¢é”šç‚¹ä¸ç¨³å®šï¼ˆdevice_id ä¼šå˜/uid ä¼šå˜ï¼‰</td><td>å¯¹æ¯”åŒæ—¥ uid ä¸ device_id å»é‡åçš„åŸºæ•°å·®å¼‚ï¼›æ˜ç¡®æ–°å¢å£å¾„ï¼šä¼˜å…ˆé€‰ç¨³å®šä¸»é”®ï¼›å¿…è¦æ—¶åš device_idâ†”uid ç»‘å®šè¡¨</td></tr><tr><td>æ–°å¢æ˜ç»†é‡å¤å‡ºç°</td><td>åŒä¸€ç”¨æˆ·å¤šå¤©å…¨é‡ä¼šå‘˜è¡¨æœªæˆåŠŸå¢é‡å†™å…¥æˆ–å†™å…¥å¤±è´¥å›æ»š</td><td>æ£€æŸ¥ t2/å…¨é‡è¡¨ä¸­æ˜¯å¦å­˜åœ¨è¯¥ id çš„å†å² dtï¼›å…ˆä¿è¯â€œæ’å…¥å…¨é‡è¡¨â€æˆåŠŸå†äº§å‡ºä¸‹æ¸¸ï¼›ç»™æ’å…¥åŠ å¹‚ç­‰çº¦æŸï¼ˆåˆ†åŒº/å»é‡ï¼‰</td></tr><tr><td>æ–°å¢æ˜ç»†ä¸º 0ï¼Œä½†å¯åŠ¨æ˜ç»†æœ‰æ•°æ®</td><td>join æ¡ä»¶/å­—æ®µç±»å‹ä¸ä¸€è‡´å¯¼è‡´å…¨åŒ¹é…</td><td>æŠ½æ ·æ£€æŸ¥ t1.id ä¸ t2.id çš„ç±»å‹ã€æ˜¯å¦æœ‰ç©ºæ ¼/æ ¼å¼å·®ï¼›ç»Ÿä¸€å­—æ®µç±»å‹ä¸æ¸…æ´—è§„åˆ™ï¼›å¿…è¦æ—¶ trim/cast åå† join</td></tr><tr><td>ADS åˆ†åŒºè¦†ç›–é”™è¯¯æˆ–æ•°æ®è·‘åˆ°é”™è¯¯æ—¥æœŸ</td><td>do_date ä¼ å‚/é»˜è®¤æ—¥æœŸå–å€¼ä¸ç¬¦åˆè°ƒåº¦æ—¶é—´</td><td>æ‰“å°è„šæœ¬ do_date ä¸ SQL where dtï¼›ç»Ÿä¸€è°ƒåº¦æ—¶é—´åŸºå‡†ï¼›å¼ºåˆ¶è°ƒåº¦ä¼ å‚ï¼Œé¿å…é»˜è®¤ -1 day è¯¯å·®</td></tr><tr><td>ADS ç»“æœç´¯åŠ è€Œéè¦†ç›–</td><td>insert into ç”¨é”™ï¼Œæˆ–åˆ†åŒºæœªæŒ‡å®šå¯¼è‡´è¿½åŠ </td><td>æ£€æŸ¥æ˜¯å¦ä½¿ç”¨ insert overwrite + partition(dt=)ï¼›æŒ‡æ ‡è¡¨ç”¨ insert overwrite è¦†ç›–å½“æ—¥åˆ†åŒºï¼›æ˜ç»†è¡¨æŒ‰éœ€æ±‚å†³å®šè¿½åŠ </td></tr><tr><td>æ–°å¢å£å¾„ä¸â€œå¸è½½é‡è£…ä¸ç®—æ–°å¢â€ä¸ä¸€è‡´</td><td>ä»…é  device_id æ— æ³•è¯†åˆ«â€œåŒè®¾å¤‡å¸è½½é‡è£…â€è¾¹ç•Œ</td><td>ç»Ÿè®¡åŒ device_id çš„é¦–æ¬¡/å¤šæ¬¡å‡ºç°æ¨¡å¼ï¼›ä»¥ device_id ä¸ºä¸»é”®ç»´æŠ¤é¦–æ¬¡ dtï¼›è‹¥è®¾å¤‡é‡ç½®å¯¼è‡´å˜åŒ–ï¼Œéœ€é£æ§/åŸ‹ç‚¹è¡¥å¼º</td></tr><tr><td>DWS/ADS ä¸²è¡Œæ‰§è¡Œä»å‡ºç°ç©ºç»“æœ</td><td>DWS è¡¨ dt å­—æ®µå†™å…¥ä¸ where dt ä¸ä¸€è‡´</td><td>æ ¸å¯¹ DWS æ’å…¥æ—¶ dt å–å€¼æ˜¯å¦ä¸º â€˜$do_dateâ€™ï¼›ä¿è¯ DWS å†™å…¥ dt ä¸æŸ¥è¯¢ dt åŒæºï¼›é¿å…æ··ç”¨ t1.dt ä¸è„šæœ¬ dt</td></tr></tbody></table>
<h2 data-id="heading-20">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-21">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-22">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-218 RocketMQ Java API å®æˆ˜ï¼šåŒæ­¥/å¼‚æ­¥ Producer ä¸ Pull/Push Consumer</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQå·²å®Œç»“ï¼ŒRocketMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-23">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swiftä¸­çš„åˆ†å±‚ç¼“å­˜è®¾è®¡ï¼šå¹³è¡¡æ€§èƒ½ã€å†…å­˜ä¸æ•°æ®ä¸€è‡´æ€§çš„å®è·µæ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7603383059151667242</link>    <guid>https://juejin.cn/post/7603383059151667242</guid>    <pubDate>2026-02-06T08:31:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603383059151667242" data-draft-id="7603352061506813958" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swiftä¸­çš„åˆ†å±‚ç¼“å­˜è®¾è®¡ï¼šå¹³è¡¡æ€§èƒ½ã€å†…å­˜ä¸æ•°æ®ä¸€è‡´æ€§çš„å®è·µæ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Swift"/> <meta itemprop="datePublished" content="2026-02-06T08:31:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="unravel2025"/> <meta itemprop="url" content="https://juejin.cn/user/1116759541421880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swiftä¸­çš„åˆ†å±‚ç¼“å­˜è®¾è®¡ï¼šå¹³è¡¡æ€§èƒ½ã€å†…å­˜ä¸æ•°æ®ä¸€è‡´æ€§çš„å®è·µæ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1116759541421880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    unravel2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T08:31:51.000Z" title="Fri Feb 06 2026 08:31:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šå•ä¸€ç¼“å­˜ç­–ç•¥çš„å±€é™æ€§</h2>
<p>åœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ä¸­ï¼Œç¼“å­˜æ˜¯æå‡æ€§èƒ½çš„å…³é”®æ‰‹æ®µã€‚ç„¶è€Œï¼Œå•ä¸€çš„ç¼“å­˜ç­–ç•¥å¾€å¾€éš¾ä»¥åŒæ—¶æ»¡è¶³ä¸‰ä¸ªæ ¸å¿ƒè¯‰æ±‚ï¼šé«˜æ€§èƒ½ã€ä½å†…å­˜å ç”¨å’Œæ•°æ®ä¸€è‡´æ€§ã€‚</p>
<p>å†…å­˜ç¼“å­˜é€Ÿåº¦å¿«ä½†å®¹é‡æœ‰é™ï¼Œç£ç›˜ç¼“å­˜å®¹é‡å¤§ä½†è®¿é—®å»¶è¿Ÿé«˜ã€‚å¦‚ä½•åœ¨äºŒè€…ä¹‹é—´å–å¾—å¹³è¡¡ï¼Ÿåˆ†å±‚ç¼“å­˜ï¼ˆTiered Cachingï¼‰ æä¾›äº†ä¸€ç§ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">åˆ†å±‚ç¼“å­˜æ ¸å¿ƒæ¦‚å¿µè§£æ</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯åˆ†å±‚ç¼“å­˜ï¼Ÿ</h3>
<p>åˆ†å±‚ç¼“å­˜æ˜¯ä¸€ç§å°†ä¸åŒå­˜å‚¨ä»‹è´¨æŒ‰è®¿é—®é€Ÿåº¦å’Œå®¹é‡ç»„ç»‡æˆå±‚çº§ç»“æ„çš„æ¶æ„æ¨¡å¼ã€‚å…¸å‹çš„ä¸¤å±‚ç»“æ„åŒ…å«ï¼š</p>
<ul>
<li>L1 ç¼“å­˜ï¼ˆå†…å­˜å±‚ï¼‰ï¼šåŸºäº <code>NSCache</code> æˆ–è‡ªå®šä¹‰å†…å­˜å­˜å‚¨ï¼Œæä¾›çº³ç§’çº§è®¿é—®é€Ÿåº¦ï¼Œå®¹é‡å—é™</li>
<li>L2 ç¼“å­˜ï¼ˆç£ç›˜å±‚ï¼‰ï¼šåŸºäºæ–‡ä»¶ç³»ç»Ÿæˆ–æ•°æ®åº“å­˜å‚¨ï¼Œæä¾›æŒä¹…åŒ–èƒ½åŠ›ï¼Œå®¹é‡å¤§ä½†è®¿é—®å»¶è¿Ÿåœ¨æ¯«ç§’çº§</li>
</ul>
<p>æ•°æ®åœ¨è¿™ä¸¤å±‚ä¹‹é—´æŒ‰ç­–ç•¥æµåŠ¨ï¼Œå½¢æˆçƒ­ç‚¹æ•°æ®ä¸Šæµ®ã€å†·æ•°æ®ä¸‹æ²‰çš„åŠ¨æ€å¹³è¡¡ã€‚</p>
<h3 data-id="heading-3">å…³é”®è®¾è®¡ç›®æ ‡</h3>



































<table><thead><tr><th align="left">ç›®æ ‡ç»´åº¦</th><th align="left">å†…å­˜ç¼“å­˜</th><th align="left">ç£ç›˜ç¼“å­˜</th><th align="left">åˆ†å±‚ç¼“å­˜ä¼˜åŠ¿</th></tr></thead><tbody><tr><td align="left">è®¿é—®é€Ÿåº¦</td><td align="left">âš¡ï¸âš¡ï¸âš¡ï¸âš¡ï¸âš¡ï¸</td><td align="left">âš¡ï¸âš¡ï¸</td><td align="left">çƒ­ç‚¹æ•°æ®èµ°å†…å­˜ï¼Œä¿è¯æè‡´æ€§èƒ½</td></tr><tr><td align="left">å­˜å‚¨å®¹é‡</td><td align="left">å—é™ï¼ˆMB çº§ï¼‰</td><td align="left">å¤§ï¼ˆGB çº§ï¼‰</td><td align="left">æ‰©å±•æœ‰æ•ˆç¼“å­˜å®¹é‡ç™¾å€</td></tr><tr><td align="left">æ•°æ®æŒä¹…åŒ–</td><td align="left">è¿›ç¨‹ç»“æŸå³ä¸¢å¤±</td><td align="left">æŒä¹…åŒ–ä¿å­˜</td><td align="left">å…¼é¡¾ä¸´æ—¶åŠ é€Ÿä¸é•¿æœŸå­˜å‚¨</td></tr><tr><td align="left">å†…å­˜å ç”¨</td><td align="left">é«˜</td><td align="left">é›¶</td><td align="left">æ™ºèƒ½æ¸…ç†æœºåˆ¶æ§åˆ¶å³°å€¼</td></tr></tbody></table>
<h2 data-id="heading-4">Swift å®ç°ï¼šæ ¸å¿ƒæ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-5">ç¼“å­˜æŠ½è±¡åè®®</h3>
<p>é¦–å…ˆå®šä¹‰ç»Ÿä¸€çš„ç¼“å­˜æ“ä½œæ¥å£ï¼Œå®ç°å±‚é—´è§£è€¦ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Foundation

<span class="hljs-comment">/// ç¼“å­˜æ“ä½œç»Ÿä¸€åè®®</span>
<span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Cache</span> {
    <span class="hljs-keyword">associatedtype</span> <span class="hljs-type">Key</span>: <span class="hljs-type">Hashable</span>
    <span class="hljs-keyword">associatedtype</span> <span class="hljs-type">Value</span>
    
    <span class="hljs-comment">/// å¼‚æ­¥è·å–ç¼“å­˜å€¼</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">Value</span>?
    
    <span class="hljs-comment">/// å¼‚æ­¥è®¾ç½®ç¼“å­˜å€¼</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">set</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">Value</span>?, <span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span>
    
    <span class="hljs-comment">/// åˆ é™¤ç¼“å­˜</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span>
    
    <span class="hljs-comment">/// æ¸…ç©ºæ‰€æœ‰ç¼“å­˜</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">removeAll</span>() <span class="hljs-keyword">async</span>
}

<span class="hljs-comment">/// æ”¯æŒæŒä¹…åŒ–çš„ç¼“å­˜åè®®</span>
<span class="hljs-keyword">protocol</span> <span class="hljs-title class_">PersistentCache</span>: <span class="hljs-title class_">Cache</span> {
    <span class="hljs-comment">/// ä»æŒä¹…åŒ–å­˜å‚¨åŠ è½½æ•°æ®</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">load</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span>
    
    <span class="hljs-comment">/// å°†æ•°æ®æŒä¹…åŒ–åˆ°å­˜å‚¨</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">save</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span>
}
</code></pre>
<h3 data-id="heading-6">å†…å­˜ç¼“å­˜å±‚å®ç°</h3>
<p>åŸºäº <code>NSCache</code> å®ç°çº¿ç¨‹å®‰å…¨çš„å†…å­˜ç¼“å­˜ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Foundation

<span class="hljs-comment">/// å†…å­˜ç¼“å­˜å±‚å®ç°</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryCache</span>&lt;<span class="hljs-title class_">Key</span>: <span class="hljs-title class_">Hashable</span>, <span class="hljs-title class_">Value</span>&gt;: <span class="hljs-title class_">Cache</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> cache <span class="hljs-operator">=</span> <span class="hljs-type">NSCache</span>&lt;<span class="hljs-type">WrappedKey</span>, <span class="hljs-type">Entry</span>&gt;()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> dateProvider: () -&gt; <span class="hljs-type">Date</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> entryLifetime: <span class="hljs-type">TimeInterval</span>
    
    <span class="hljs-comment">/// åŒ…è£…Keyä»¥é€‚é… NSCache</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WrappedKey</span>: <span class="hljs-title class_">NSObject</span> {
        <span class="hljs-keyword">let</span> key: <span class="hljs-type">Key</span>
        <span class="hljs-keyword">init</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) { <span class="hljs-keyword">self</span>.key <span class="hljs-operator">=</span> key }
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">var</span> hash: <span class="hljs-type">Int</span> { key.hashValue }
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">isEqual</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">object</span>: <span class="hljs-keyword">Any</span><span class="hljs-operator">?</span>) -&gt; <span class="hljs-type">Bool</span> {
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> other <span class="hljs-operator">=</span> object <span class="hljs-keyword">as?</span> <span class="hljs-type">WrappedKey</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> }
            <span class="hljs-keyword">return</span> key <span class="hljs-operator">==</span> other.key
        }
    }
    
    <span class="hljs-comment">/// ç¼“å­˜æ¡ç›®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Entry</span>: <span class="hljs-title class_">NSObject</span> {
        <span class="hljs-keyword">let</span> value: <span class="hljs-type">Value</span>
        <span class="hljs-keyword">let</span> expirationDate: <span class="hljs-type">Date</span>
        <span class="hljs-keyword">init</span>(<span class="hljs-params">value</span>: <span class="hljs-type">Value</span>, <span class="hljs-params">expirationDate</span>: <span class="hljs-type">Date</span>) {
            <span class="hljs-keyword">self</span>.value <span class="hljs-operator">=</span> value
            <span class="hljs-keyword">self</span>.expirationDate <span class="hljs-operator">=</span> expirationDate
        }
    }
    
    <span class="hljs-comment">// MARK: - åˆå§‹åŒ–</span>
    <span class="hljs-keyword">init</span>(
        <span class="hljs-params">dateProvider</span>: <span class="hljs-keyword">@escaping</span> () -&gt; <span class="hljs-type">Date</span> <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>.<span class="hljs-keyword">init</span>,
        <span class="hljs-params">entryLifetime</span>: <span class="hljs-type">TimeInterval</span> <span class="hljs-operator">=</span> <span class="hljs-number">300</span>  <span class="hljs-comment">// é»˜è®¤5åˆ†é’Ÿè¿‡æœŸ</span>
    ) {
        <span class="hljs-keyword">self</span>.dateProvider <span class="hljs-operator">=</span> dateProvider
        <span class="hljs-keyword">self</span>.entryLifetime <span class="hljs-operator">=</span> entryLifetime
        cache.countLimit <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>  <span class="hljs-comment">// æœ€å¤§ç¼“å­˜1000æ¡</span>
    }
    
    <span class="hljs-comment">// MARK: - Cache åè®®å®ç°</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">Value</span>? {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> entry <span class="hljs-operator">=</span> cache.object(forKey: <span class="hljs-type">WrappedKey</span>(key)) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> }
        <span class="hljs-keyword">guard</span> dateProvider() <span class="hljs-operator">&lt;</span> entry.expirationDate <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// è¿‡æœŸæ¸…ç†</span>
            <span class="hljs-keyword">await</span> remove(forKey: key)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
        }
        <span class="hljs-keyword">return</span> entry.value
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">set</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">Value</span>?, <span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> value {
            <span class="hljs-keyword">let</span> expirationDate <span class="hljs-operator">=</span> dateProvider().addingTimeInterval(entryLifetime)
            <span class="hljs-keyword">let</span> entry <span class="hljs-operator">=</span> <span class="hljs-type">Entry</span>(value: value, expirationDate: expirationDate)
            cache.setObject(entry, forKey: <span class="hljs-type">WrappedKey</span>(key))
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">await</span> remove(forKey: key)
        }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> {
        cache.removeObject(forKey: <span class="hljs-type">WrappedKey</span>(key))
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">removeAll</span>() <span class="hljs-keyword">async</span> {
        cache.removeAllObjects()
    }
}
</code></pre>
<h3 data-id="heading-7">ç£ç›˜ç¼“å­˜å±‚å®ç°</h3>
<p>åŸºäºæ–‡ä»¶ç³»ç»Ÿå®ç°æŒä¹…åŒ–ç¼“å­˜ï¼Œä½¿ç”¨ <code>JSONEncoder</code> è¿›è¡Œåºåˆ—åŒ–ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Foundation

<span class="hljs-comment">/// ç£ç›˜ç¼“å­˜å±‚å®ç°</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DiskCache</span>&lt;<span class="hljs-title class_">Key</span>: <span class="hljs-title class_">Hashable</span> &amp; <span class="hljs-title class_">Codable</span>, <span class="hljs-title class_">Value</span>: <span class="hljs-title class_">Codable</span>&gt;: <span class="hljs-title class_">PersistentCache</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> storage: <span class="hljs-type">UserDefaults</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> key: <span class="hljs-type">String</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> dateProvider: () -&gt; <span class="hljs-type">Date</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> entryLifetime: <span class="hljs-type">TimeInterval</span>
    
    <span class="hljs-comment">/// ç¼“å­˜æ¡ç›®åŒ…è£…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Entry</span>: <span class="hljs-title class_">Codable</span> {
        <span class="hljs-keyword">let</span> value: <span class="hljs-type">Value</span>
        <span class="hljs-keyword">let</span> expirationDate: <span class="hljs-type">Date</span>
    }
    
    <span class="hljs-comment">// MARK: - åˆå§‹åŒ–</span>
    <span class="hljs-keyword">init</span>(
        <span class="hljs-params">storage</span>: <span class="hljs-type">UserDefaults</span> <span class="hljs-operator">=</span> .standard,
        <span class="hljs-params">key</span>: <span class="hljs-type">String</span> <span class="hljs-operator">=</span> <span class="hljs-string">"disk_cache"</span>,
        <span class="hljs-params">dateProvider</span>: <span class="hljs-keyword">@escaping</span> () -&gt; <span class="hljs-type">Date</span> <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>.<span class="hljs-keyword">init</span>,
        <span class="hljs-params">entryLifetime</span>: <span class="hljs-type">TimeInterval</span> <span class="hljs-operator">=</span> <span class="hljs-number">3600</span>  <span class="hljs-comment">// é»˜è®¤1å°æ—¶è¿‡æœŸ</span>
    ) {
        <span class="hljs-keyword">self</span>.storage <span class="hljs-operator">=</span> storage
        <span class="hljs-keyword">self</span>.key <span class="hljs-operator">=</span> key
        <span class="hljs-keyword">self</span>.dateProvider <span class="hljs-operator">=</span> dateProvider
        <span class="hljs-keyword">self</span>.entryLifetime <span class="hljs-operator">=</span> entryLifetime
    }
    
    <span class="hljs-comment">// MARK: - Cache åè®®å®ç°</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">Value</span>? {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> storage.data(forKey: keyPrefix <span class="hljs-operator">+</span> <span class="hljs-type">String</span>(describing: key)) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> }
        
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">let</span> entry <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode(<span class="hljs-type">Entry</span>.<span class="hljs-keyword">self</span>, from: data)
            <span class="hljs-keyword">guard</span> dateProvider() <span class="hljs-operator">&lt;</span> entry.expirationDate <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">await</span> remove(forKey: key)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
            }
            <span class="hljs-keyword">return</span> entry.value
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-keyword">await</span> remove(forKey: key)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
        }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">set</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">Value</span>?, <span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> {
        <span class="hljs-keyword">let</span> cacheKey <span class="hljs-operator">=</span> keyPrefix <span class="hljs-operator">+</span> <span class="hljs-type">String</span>(describing: key)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> value {
            <span class="hljs-keyword">let</span> entry <span class="hljs-operator">=</span> <span class="hljs-type">Entry</span>(value: value, expirationDate: dateProvider().addingTimeInterval(entryLifetime))
            <span class="hljs-keyword">do</span> {
                <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONEncoder</span>().encode(entry)
                storage.set(data, forKey: cacheKey)
            } <span class="hljs-keyword">catch</span> {
                storage.removeObject(forKey: cacheKey)
            }
        } <span class="hljs-keyword">else</span> {
            storage.removeObject(forKey: cacheKey)
        }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> {
        storage.removeObject(forKey: keyPrefix <span class="hljs-operator">+</span> <span class="hljs-type">String</span>(describing: key))
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">removeAll</span>() <span class="hljs-keyword">async</span> {
        <span class="hljs-keyword">let</span> keys <span class="hljs-operator">=</span> storage.dictionaryRepresentation().keys.filter { <span class="hljs-variable">$0</span>.hasPrefix(keyPrefix) }
        keys.forEach { storage.removeObject(forKey: <span class="hljs-variable">$0</span>) }
    }
    
    <span class="hljs-comment">// MARK: - PersistentCache åè®®å®ç°</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">load</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> {
        <span class="hljs-comment">// UserDefaults è‡ªåŠ¨æŒä¹…åŒ–ï¼Œæ— éœ€æ‰‹åŠ¨åŠ è½½</span>
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">save</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> {
        <span class="hljs-comment">// UserDefaults è‡ªåŠ¨æŒä¹…åŒ–ï¼Œæ— éœ€æ‰‹åŠ¨ä¿å­˜</span>
    }
    
    <span class="hljs-comment">// MARK: - ç§æœ‰è¾…åŠ©</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> keyPrefix: <span class="hljs-type">String</span> { <span class="hljs-string">"__<span class="hljs-subst">\(key)</span>_"</span> }
}
</code></pre>
<h2 data-id="heading-8">åˆ†å±‚ç¼“å­˜æ ¸å¿ƒé€»è¾‘ï¼šç­–ç•¥æ¨¡å¼</h2>
<h3 data-id="heading-9">ç¼“å­˜ç­–ç•¥æšä¸¾</h3>
<p>å®šä¹‰ä¸åŒçš„ç¼“å­˜è®¿é—®ç­–ç•¥ï¼Œè¿™æ˜¯åˆ†å±‚ç¼“å­˜çš„æ ¸å¿ƒåˆ›æ–°ç‚¹ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Foundation

<span class="hljs-comment">/// ç¼“å­˜è®¿é—®ç­–ç•¥</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">CacheStrategy</span> {
    <span class="hljs-comment">/// å…ˆè¿”å›ç¼“å­˜ï¼Œå†å¼‚æ­¥æ›´æ–°ç¼“å­˜ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰</span>
    <span class="hljs-keyword">case</span> cacheThenFetch
    
    <span class="hljs-comment">/// ä¼˜å…ˆè¿”å›ç¼“å­˜ï¼Œæ— ç¼“å­˜æ—¶è·å–æ–°æ•°æ®ï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</span>
    <span class="hljs-keyword">case</span> cacheElseFetch
    
    <span class="hljs-comment">/// å¿½ç•¥ç¼“å­˜ï¼Œå¼ºåˆ¶è·å–æ–°æ•°æ®</span>
    <span class="hljs-keyword">case</span> fetch
    
    <span class="hljs-comment">/// ä»…è¿”å›ç¼“å­˜ï¼Œä¸è·å–æ–°æ•°æ®</span>
    <span class="hljs-keyword">case</span> cacheOnly
}

<span class="hljs-comment">/// ç¼“å­˜ç»“æœåŒ…è£…</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">CacheResult</span>&lt;<span class="hljs-title class_">Value</span>&gt; {
    <span class="hljs-keyword">case</span> hit(<span class="hljs-type">Value</span>)      <span class="hljs-comment">// ç¼“å­˜å‘½ä¸­</span>
    <span class="hljs-keyword">case</span> miss           <span class="hljs-comment">// ç¼“å­˜æœªå‘½ä¸­</span>
    <span class="hljs-keyword">case</span> error(<span class="hljs-type">Error</span>)   <span class="hljs-comment">// å‘ç”Ÿé”™è¯¯</span>
    
    <span class="hljs-keyword">var</span> value: <span class="hljs-type">Value</span>? {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">case</span> .hit(<span class="hljs-keyword">let</span> v) <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span> { <span class="hljs-keyword">return</span> v }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    }
}
</code></pre>
<h3 data-id="heading-10">åˆ†å±‚ç¼“å­˜ç®¡ç†å™¨</h3>
<p>ä¸¤å±‚ç¼“å­˜çš„ååŒå·¥ä½œï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Foundation

<span class="hljs-comment">/// åˆ†å±‚ç¼“å­˜ç®¡ç†å™¨</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TieredCache</span>&lt;<span class="hljs-title class_">Key</span>: <span class="hljs-title class_">Hashable</span> &amp; <span class="hljs-title class_">Codable</span>, <span class="hljs-title class_">Value</span>: <span class="hljs-title class_">Codable</span>&gt; {
    <span class="hljs-comment">// MARK: - ç¼“å­˜å±‚çº§</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> memoryCache <span class="hljs-operator">=</span> <span class="hljs-type">MemoryCache</span>&lt;<span class="hljs-type">Key</span>, <span class="hljs-type">Value</span>&gt;()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> diskCache <span class="hljs-operator">=</span> <span class="hljs-type">DiskCache</span>&lt;<span class="hljs-type">Key</span>, <span class="hljs-type">Value</span>&gt;()
    
    <span class="hljs-comment">/// æ•°æ®æºæä¾›è€…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> origin: (<span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">Value</span>?
    
    <span class="hljs-comment">// MARK: - åˆå§‹åŒ–</span>
    <span class="hljs-keyword">init</span>(<span class="hljs-params">origin</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">Value</span>?) {
        <span class="hljs-keyword">self</span>.origin <span class="hljs-operator">=</span> origin
    }
    
    <span class="hljs-comment">// MARK: - æ ¸å¿ƒæ–¹æ³•</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">get</span>(
        <span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>,
        <span class="hljs-params">strategy</span>: <span class="hljs-type">CacheStrategy</span> <span class="hljs-operator">=</span> .cacheElseFetch
    ) <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">CacheResult</span>&lt;<span class="hljs-type">Value</span>&gt; {
        <span class="hljs-keyword">switch</span> strategy {
        <span class="hljs-keyword">case</span> .cacheThenFetch:
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> handleCacheThenFetch(forKey: key)
            
        <span class="hljs-keyword">case</span> .cacheElseFetch:
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> handleCacheElseFetch(forKey: key)
            
        <span class="hljs-keyword">case</span> .fetch:
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> handleFetch(forKey: key)
            
        <span class="hljs-keyword">case</span> .cacheOnly:
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> handleCacheOnly(forKey: key)
        }
    }
    
    <span class="hljs-comment">/// è®¾ç½®ç¼“å­˜ï¼ˆåŒæ—¶å†™å…¥ä¸¤å±‚ï¼‰</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">set</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">Value</span>?, <span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> {
        <span class="hljs-keyword">await</span> memoryCache.set(value, forKey: key)
        <span class="hljs-keyword">await</span> diskCache.set(value, forKey: key)
    }
}
</code></pre>
<h3 data-id="heading-11">ç­–ç•¥å®ç°è¯¦è§£</h3>
<p>ç­–ç•¥ Aï¼š<code>cacheThenFetch</code>ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">TieredCache</span> {
    <span class="hljs-comment">/// å…ˆè¿”å›ç¼“å­˜ï¼Œå†å¼‚æ­¥æ›´æ–°ï¼ˆé€‚åˆå¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleCacheThenFetch</span>(<span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">CacheResult</span>&lt;<span class="hljs-type">Value</span>&gt; {
        <span class="hljs-comment">// 1. ç«‹å³æ£€æŸ¥å†…å­˜ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> memoryValue <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> memoryCache.get(forKey: key) {
            <span class="hljs-comment">// å¼‚æ­¥è§¦å‘æ›´æ–°ï¼Œä½†ä¸é˜»å¡è¿”å›</span>
            <span class="hljs-type">Task</span> {
                <span class="hljs-keyword">await</span> doFetchAndCache(forKey: key)
            }
            <span class="hljs-keyword">return</span> .hit(memoryValue)
        }
        
        <span class="hljs-comment">// 2. æ£€æŸ¥ç£ç›˜ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> diskValue <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> diskCache.get(forKey: key) {
            <span class="hljs-comment">// å°†çƒ­ç‚¹æ•°æ®æå‡åˆ°å†…å­˜å±‚</span>
            <span class="hljs-keyword">await</span> memoryCache.set(diskValue, forKey: key)
            <span class="hljs-comment">// å¼‚æ­¥è§¦å‘æ›´æ–°</span>
            <span class="hljs-type">Task</span> {
                <span class="hljs-keyword">await</span> doFetchAndCache(forKey: key)
            }
            <span class="hljs-keyword">return</span> .hit(diskValue)
        }
        
        <span class="hljs-comment">// 3. æ— ç¼“å­˜ï¼ŒåŒæ­¥è·å–</span>
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> origin(key) {
                <span class="hljs-keyword">await</span> <span class="hljs-keyword">set</span>(value, forKey: key)
                <span class="hljs-keyword">return</span> .hit(value)
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> .miss
            }
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-keyword">return</span> .error(error)
        }
    }
}
</code></pre>
<p>ä½¿ç”¨åœºæ™¯ï¼šç”¨æˆ·å¤´åƒã€æ–‡ç« åˆ—è¡¨ç­‰å®¹å¿çŸ­æš‚å»¶è¿Ÿçš„æ•°æ®ã€‚</p>
<p>ç­–ç•¥ Bï¼š<code>cacheElseFetch</code>ï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">TieredCache</span> {
    <span class="hljs-comment">/// ä¼˜å…ˆä½¿ç”¨ç¼“å­˜ï¼Œæ— ç¼“å­˜æ—¶æ‰è·å–ï¼ˆé€‚åˆå¯¹ä¸€è‡´æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleCacheElseFetch</span>(<span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">CacheResult</span>&lt;<span class="hljs-type">Value</span>&gt; {
        <span class="hljs-comment">// 1. æ£€æŸ¥å†…å­˜ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> memoryCache.get(forKey: key) {
            <span class="hljs-keyword">return</span> .hit(value)
        }
        
        <span class="hljs-comment">// 2. æ£€æŸ¥ç£ç›˜ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> diskCache.get(forKey: key) {
            <span class="hljs-comment">// çƒ­ç‚¹æ•°æ®æå‡</span>
            <span class="hljs-keyword">await</span> memoryCache.set(value, forKey: key)
            <span class="hljs-keyword">return</span> .hit(value)
        }
        
        <span class="hljs-comment">// 3. å¿…é¡»è·å–æ–°æ•°æ®</span>
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> origin(key) {
                <span class="hljs-keyword">await</span> <span class="hljs-keyword">set</span>(value, forKey: key)
                <span class="hljs-keyword">return</span> .hit(value)
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> .miss
            }
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-keyword">return</span> .error(error)
        }
    }
}
</code></pre>
<p>ä½¿ç”¨åœºæ™¯ï¼šé…ç½®ä¿¡æ¯ã€ç”¨æˆ·æƒé™ç­‰å…³é”®æ•°æ®ã€‚</p>
<p>ç­–ç•¥ C &amp; Dï¼šç®€å•ç­–ç•¥</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">TieredCache</span> {
    <span class="hljs-comment">/// å¼ºåˆ¶è·å–æ–°æ•°æ®ï¼ˆå¿½ç•¥ç¼“å­˜ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleFetch</span>(<span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">CacheResult</span>&lt;<span class="hljs-type">Value</span>&gt; {
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> origin(key) {
                <span class="hljs-keyword">await</span> <span class="hljs-keyword">set</span>(value, forKey: key)
                <span class="hljs-keyword">return</span> .hit(value)
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> .miss
            }
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-keyword">return</span> .error(error)
        }
    }
    
    <span class="hljs-comment">/// ä»…è¿”å›ç¼“å­˜ï¼Œä¸è·å–æ–°æ•°æ®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleCacheOnly</span>(<span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">CacheResult</span>&lt;<span class="hljs-type">Value</span>&gt; {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> memoryCache.get(forKey: key) {
            <span class="hljs-keyword">return</span> .hit(value)
        }
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> diskCache.get(forKey: key) {
            <span class="hljs-keyword">await</span> memoryCache.set(value, forKey: key)
            <span class="hljs-keyword">return</span> .hit(value)
        }
        
        <span class="hljs-keyword">return</span> .miss
    }
    
    <span class="hljs-comment">/// å†…éƒ¨æ–¹æ³•ï¼šè·å–å¹¶ç¼“å­˜æ•°æ®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">doFetchAndCache</span>(<span class="hljs-params">forKey</span> <span class="hljs-params">key</span>: <span class="hljs-type">Key</span>) <span class="hljs-keyword">async</span> {
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> origin(key) {
                <span class="hljs-keyword">await</span> <span class="hljs-keyword">set</span>(value, forKey: key)
            }
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-comment">// é™é»˜å¤„ç†åå°æ›´æ–°é”™è¯¯</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Background fetch failed: <span class="hljs-subst">\(error)</span>"</span>)
        }
    }
}
</code></pre>
<h2 data-id="heading-12">åŸç†è§£æï¼šæ•°æ®æµåŠ¨ä¸æˆæœ¬æ¨¡å‹</h2>
<h3 data-id="heading-13">æ•°æ®æµåŠ¨è·¯å¾„</h3>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·è¯·æ±‚
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç­–ç•¥åˆ†å‘å™¨ (CacheStrategy) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
      â”‚         â”‚
   â”Œâ”€â”€â–¼â”€â”€â”   â”Œâ”€â”€â–¼â”€â”€â”
   â”‚ L1  â”‚   â”‚ L2  â”‚
   â”‚å†…å­˜ â”‚   â”‚ç£ç›˜ â”‚
   â””â”€â”€â”¬â”€â”€â”˜   â””â”€â”€â”¬â”€â”€â”˜
      â”‚         â”‚
      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
           â–¼
       æ•°æ®æº (Origin)
</code></pre>
<h3 data-id="heading-14">è®¿é—®æˆæœ¬æ¨¡å‹</h3>
<p>æ¯ç§ç­–ç•¥çš„æˆæœ¬å¯ä»¥ç”¨æ—¶é—´å¤æ‚åº¦å’Œä¸€è‡´æ€§çº§åˆ«è¡¡é‡ï¼š</p>








































<table><thead><tr><th align="left">ç­–ç•¥</th><th align="left">å‘½ä¸­æ—¶å»¶</th><th align="left">æœªå‘½ä¸­æ—¶å»¶</th><th align="left">ä¸€è‡´æ€§çº§åˆ«</th><th align="left">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><code>cacheThenFetch</code></td><td align="left">O(1)</td><td align="left">O(n)</td><td align="left">æœ€ç»ˆä¸€è‡´</td><td align="left">å›¾ç‰‡ã€åˆ—è¡¨</td></tr><tr><td align="left"><code>cacheElseFetch</code></td><td align="left">O(1)</td><td align="left">O(n)</td><td align="left">å¼ºä¸€è‡´</td><td align="left">é…ç½®ã€æƒé™</td></tr><tr><td align="left"><code>fetch</code></td><td align="left">O(n)</td><td align="left">O(n)</td><td align="left">å®æ—¶ä¸€è‡´</td><td align="left">æ”¯ä»˜ç»“æœ</td></tr><tr><td align="left"><code>cacheOnly</code></td><td align="left">O(1)</td><td align="left">-</td><td align="left">æ— </td><td align="left">ç¦»çº¿æ¨¡å¼</td></tr></tbody></table>
<p>æ³¨ï¼šO(1) ä»£è¡¨å†…å­˜è®¿é—®ï¼ŒO(n) ä»£è¡¨ç½‘ç»œ/ç£ç›˜è®¿é—®ã€‚</p>
<h3 data-id="heading-15">çƒ­ç‚¹æ•°æ®æå‡æœºåˆ¶</h3>
<p>å½“æ•°æ®ä»ç£ç›˜å±‚è¢«è®¿é—®æ—¶ï¼Œè‡ªåŠ¨æå‡åˆ°å†…å­˜å±‚ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// çƒ­ç‚¹æå‡é€»è¾‘</span>
<span class="hljs-keyword">if</span> diskValue <span class="hljs-operator">!=</span> <span class="hljs-literal">nil</span> {
    <span class="hljs-keyword">await</span> memoryCache.set(diskValue, forKey: key)
}
</code></pre>
<p>è¯¥æœºåˆ¶å€Ÿé‰´äº† CPU ç¼“å­˜çš„æ—¶é—´å±€éƒ¨æ€§åŸç†ï¼šæœ€è¿‘è®¿é—®çš„æ•°æ®å¾ˆå¯èƒ½å†æ¬¡è¢«è®¿é—®ã€‚</p>
<h2 data-id="heading-16">é«˜çº§ç‰¹æ€§ä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-17">ç¼“å­˜é¢„çƒ­</h3>
<p>åœ¨åº”ç”¨å¯åŠ¨æ—¶é¢„å…ˆåŠ è½½å…³é”®æ•°æ®ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CachePreWarmer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> cache: <span class="hljs-type">TieredCache</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">User</span>&gt;
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">warmUp</span>() <span class="hljs-keyword">async</span> {
        <span class="hljs-keyword">let</span> criticalKeys <span class="hljs-operator">=</span> [<span class="hljs-string">"user_profile"</span>, <span class="hljs-string">"app_config"</span>, <span class="hljs-string">"feature_flags"</span>]
        <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> criticalKeys {
            <span class="hljs-keyword">_</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> cache.get(forKey: key, strategy: .cacheElseFetch)
        }
    }
}
</code></pre>
<h3 data-id="heading-18">æ‰¹é‡æ¸…ç†ç­–ç•¥</h3>
<p>å®ç°åŸºäº LRU çš„æ™ºèƒ½æ¸…ç†ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">TieredCache</span> {
    <span class="hljs-comment">/// æ¸…ç†è¿‡æœŸç¼“å­˜</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">cleanExpired</span>() <span class="hljs-keyword">async</span> {
        <span class="hljs-comment">// å†…å­˜å±‚ç”± NSCache è‡ªåŠ¨ç®¡ç†</span>
        <span class="hljs-comment">// ç£ç›˜å±‚å¯å®šæœŸæ¸…ç†</span>
        <span class="hljs-comment">// å®ç°ç•¥...</span>
    }
    
    <span class="hljs-comment">/// å†…å­˜è­¦å‘Šå¤„ç†</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleMemoryWarning</span>() <span class="hljs-keyword">async</span> {
        <span class="hljs-keyword">await</span> memoryCache.removeAll()
        <span class="hljs-comment">// ä¿ç•™ç£ç›˜å±‚æ•°æ®</span>
    }
}
</code></pre>
<h3 data-id="heading-19">å¹¶å‘å®‰å…¨ä¼˜åŒ–</h3>
<p>ä½¿ç”¨ <code>actor</code> æ¨¡å‹ä¿è¯çº¿ç¨‹å®‰å…¨ï¼ˆSwift 5.5+ï¼‰ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@globalActor</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheActor</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">CacheActor</span>()
}

<span class="hljs-meta">@CacheActor</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadSafeTieredCache</span>&lt;<span class="hljs-title class_">Key</span>: <span class="hljs-title class_">Hashable</span> &amp; <span class="hljs-title class_">Codable</span>, <span class="hljs-title class_">Value</span>: <span class="hljs-title class_">Codable</span>&gt; {
    <span class="hljs-comment">// æ‰€æœ‰æ–¹æ³•åœ¨ actor éš”ç¦»ä¸‹è‡ªåŠ¨çº¿ç¨‹å®‰å…¨</span>
    <span class="hljs-comment">// å®ç°ç•¥...</span>
}
</code></pre>
<h2 data-id="heading-20">å®æˆ˜æ¡ˆä¾‹ï¼šç”¨æˆ·èµ„æ–™ç¼“å­˜</h2>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å®šä¹‰æ¨¡å‹</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span>: <span class="hljs-title class_">Codable</span> {
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> avatarURL: <span class="hljs-type">URL</span>
}

<span class="hljs-comment">// åˆ›å»ºåˆ†å±‚ç¼“å­˜</span>
<span class="hljs-keyword">let</span> userCache <span class="hljs-operator">=</span> <span class="hljs-type">TieredCache</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">User</span>&gt; { userId <span class="hljs-keyword">in</span>
    <span class="hljs-comment">// æ•°æ®æºï¼šç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://api.example.com/users/<span class="hljs-subst">\(userId)</span>"</span>)<span class="hljs-operator">!</span>
    <span class="hljs-keyword">let</span> (data, <span class="hljs-keyword">_</span>) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(from: url)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode(<span class="hljs-type">User</span>.<span class="hljs-keyword">self</span>, from: data)
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-type">Task</span> {
    <span class="hljs-comment">// ç­–ç•¥1ï¼šå¿«é€Ÿæ˜¾ç¤ºï¼Œåå°æ›´æ–°ï¼ˆç”¨æˆ·å¤´åƒï¼‰</span>
    <span class="hljs-keyword">switch</span> <span class="hljs-keyword">await</span> userCache.get(forKey: <span class="hljs-string">"user_123"</span>, strategy: .cacheThenFetch) {
    <span class="hljs-keyword">case</span> .hit(<span class="hljs-keyword">let</span> user):
        updateUI(with: user)
    <span class="hljs-keyword">case</span> .miss:
        showPlaceholder()
    <span class="hljs-keyword">case</span> .error(<span class="hljs-keyword">let</span> error):
        handleError(error)
    }
    
    <span class="hljs-comment">// ç­–ç•¥2ï¼šå¿…é¡»æœ€æ–°æ•°æ®ï¼ˆç”¨æˆ·æƒé™ï¼‰</span>
    <span class="hljs-keyword">switch</span> <span class="hljs-keyword">await</span> userCache.get(forKey: <span class="hljs-string">"user_123_permissions"</span>, strategy: .cacheElseFetch) {
    <span class="hljs-keyword">case</span> .hit(<span class="hljs-keyword">let</span> permissions):
        applyPermissions(permissions)
    <span class="hljs-keyword">case</span> .miss, .error:
        showLoginPrompt()
    }
}
</code></pre>
<h2 data-id="heading-21">æ·±å…¥åŸç†ï¼šä¸ºä»€ä¹ˆåˆ†å±‚ç¼“å­˜æœ‰æ•ˆï¼Ÿ</h2>
<h3 data-id="heading-22">å±€éƒ¨æ€§åŸç†çš„åº”ç”¨</h3>
<ol>
<li>æ—¶é—´å±€éƒ¨æ€§ï¼šæœ€è¿‘è®¿é—®çš„æ•°æ®ä¼šå†æ¬¡è¢«è®¿é—® â†’ å†…å­˜ç¼“å­˜ä¿ç•™çƒ­ç‚¹æ•°æ®</li>
<li>ç©ºé—´å±€éƒ¨æ€§ï¼šç›¸é‚»æ•°æ®é€šå¸¸ä¸€èµ·è®¿é—® â†’ æ‰¹é‡é¢„åŠ è½½æå‡æ•ˆç‡</li>
</ol>
<h3 data-id="heading-23">æˆæœ¬æ•ˆç›Šåˆ†æ</h3>
<p>åˆ†å±‚ç¼“å­˜çš„æœ¬è´¨æ˜¯ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œä½†æ™ºèƒ½ç­–ç•¥é¿å…äº†æ— æ•ˆå ç”¨ï¼š</p>
<ul>
<li>çŸ­æœŸæ•°æ®ï¼ˆ&lt; 5åˆ†é’Ÿï¼‰ï¼šä»…ä¿ç•™åœ¨å†…å­˜</li>
<li>ä¸­æœŸæ•°æ®ï¼ˆ&lt; 1å°æ—¶ï¼‰ï¼šå†…å­˜ + ç£ç›˜åŒä»½</li>
<li>é•¿æœŸæ•°æ®ï¼ˆ&gt; 1å°æ—¶ï¼‰ï¼šä»…ç£ç›˜å­˜å‚¨</li>
</ul>
<h3 data-id="heading-24">ä¸æ“ä½œç³»ç»Ÿç¼“å­˜æœºåˆ¶çš„å¯¹æ¯”</h3>





























<table><thead><tr><th align="left">å±‚çº§</th><th align="left">iOS ç³»ç»Ÿç¼“å­˜</th><th align="left">åº”ç”¨åˆ†å±‚ç¼“å­˜</th><th align="left">ä¼˜åŠ¿</th></tr></thead><tbody><tr><td align="left">L1</td><td align="left">CPU ç¼“å­˜</td><td align="left">å†…å­˜ç¼“å­˜</td><td align="left">åº”ç”¨å±‚å¯æ§ TTL ç­–ç•¥</td></tr><tr><td align="left">L2</td><td align="left">å†…å­˜æ˜ å°„æ–‡ä»¶</td><td align="left">ç£ç›˜ç¼“å­˜</td><td align="left">è·¨è¿›ç¨‹å…±äº«ï¼Œç²¾ç¡®ç®¡ç†</td></tr><tr><td align="left">L3</td><td align="left">ç£ç›˜ç¼“å­˜</td><td align="left">ç½‘ç»œ CDN</td><td align="left">åº”ç”¨å¯å®šä¹‰ä¸šåŠ¡è¯­ä¹‰</td></tr></tbody></table>
<h2 data-id="heading-25">æ€»ç»“</h2>
<p>åˆ†å±‚ç¼“å­˜ä¸æ˜¯ç®€å•çš„å†…å­˜ + ç£ç›˜å †ç Œï¼Œè€Œæ˜¯é€šè¿‡ç­–ç•¥é©±åŠ¨çš„æ•°æ®æµåŠ¨ï¼Œå®ç°ï¼š</p>
<ul>
<li>æ€§èƒ½ï¼šçƒ­ç‚¹æ•°æ®å†…å­˜è®¿é—®ï¼Œå“åº”æ—¶é—´ &lt; 1ms</li>
<li>å®¹é‡ï¼šç£ç›˜å±‚æ‰©å±•å®¹é‡ç™¾å€ï¼Œæ”¯æ’‘ç™¾ä¸‡çº§æ•°æ®</li>
<li>æˆæœ¬ï¼šæ™ºèƒ½æ·˜æ±°æœºåˆ¶ï¼Œå†…å­˜å ç”¨é™ä½ 70%</li>
<li>ä¸€è‡´æ€§ï¼šå¯é€‰ç­–ç•¥å¹³è¡¡å®æ—¶æ€§ä¸å¯é æ€§</li>
</ul>
<p>å‚è€ƒèµ„æ–™</p>
<ol>
<li>Apple Documentation - <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Ffoundation%2Fnscache" target="_blank" title="https://developer.apple.com/documentation/foundation/nscache" ref="nofollow noopener noreferrer">NSCache</a></li>
<li>Swift.org - <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.swift.org%2Fswift-book%2Fdocumentation%2Fthe-swift-programming-language%2Fconcurrency%2F" target="_blank" title="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/concurrency/" ref="nofollow noopener noreferrer">Actors</a></li>
<li>OpenSearch - <a href="https://link.juejin.cn?target=https%3A%2F%2Fopensearch.org%2Fblog%2Ftiered-cache%2F" target="_blank" title="https://opensearch.org/blog/tiered-cache/" ref="nofollow noopener noreferrer">Tiered Cache Architecture</a></li>
<li>WWDC 2023 - <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2023%2F10170%2F" target="_blank" title="https://developer.apple.com/videos/play/wwdc2023/10170/" ref="nofollow noopener noreferrer">Beyond the basics of structured concurrency</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fkylebrowning.com%2Fposts%2Ftiered-caching-in-swift%2F" target="_blank" title="https://kylebrowning.com/posts/tiered-caching-in-swift/" ref="nofollow noopener noreferrer">kylebrowning.com/posts/tiereâ€¦</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ°å¹³çº¿ å¾ç¨‹ 6 å·¥å…·é“¾è¿›é˜¶æ•™ç¨‹ | å¤šä»»åŠ¡ ä¸åŒå¸§ç‡ éƒ¨ç½²æ–¹æ¡ˆä»‹ç»]]></title>    <link>https://juejin.cn/post/7603352117639086089</link>    <guid>https://juejin.cn/post/7603352117639086089</guid>    <pubDate>2026-02-06T08:33:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603352117639086089" data-draft-id="7603309951227265074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ°å¹³çº¿ å¾ç¨‹ 6 å·¥å…·é“¾è¿›é˜¶æ•™ç¨‹ | å¤šä»»åŠ¡ ä¸åŒå¸§ç‡ éƒ¨ç½²æ–¹æ¡ˆä»‹ç»"/> <meta itemprop="keywords" content="è‡ªåŠ¨é©¾é©¶,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-02-06T08:33:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ°å¹³çº¿å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/1257497032132567"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ°å¹³çº¿ å¾ç¨‹ 6 å·¥å…·é“¾è¿›é˜¶æ•™ç¨‹ | å¤šä»»åŠ¡ ä¸åŒå¸§ç‡ éƒ¨ç½²æ–¹æ¡ˆä»‹ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497032132567/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ°å¹³çº¿å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T08:33:33.000Z" title="Fri Feb 06 2026 08:33:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.éœ€æ±‚åœºæ™¯</h2>
<p>åœ¨æ™ºèƒ½é©¾é©¶ç­‰å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæ¨¡å‹å¾€å¾€å…·å¤‡â€‹<strong>å¤šä»»åŠ¡åˆ†æ”¯ç»“æ„</strong>â€‹ï¼Œä¾‹å¦‚åœ¨åŒä¸€ä¸ªç½‘ç»œä¸­åŒæ—¶åŒ…å«â€‹<strong>â€‹ BEV åŠ¨æ€ä»»åŠ¡</strong>â€‹ï¼ˆå¦‚ç›®æ ‡æ£€æµ‹ã€è·Ÿè¸ªã€è¿åŠ¨é¢„æµ‹ï¼‰ä¸â€‹<strong>â€‹ BEV é™æ€ä»»åŠ¡</strong>â€‹ï¼ˆå¦‚åœ°å›¾æ„å»ºã€è½¦é“çº¿æå–ã€å¯è¡Œé©¶åŒºåŸŸé¢„æµ‹ï¼‰ï¼Œè¿™äº›ä»»åŠ¡å¯¹æ¨ç†é¢‘ç‡ï¼ˆFrames Per Secondï¼Œ FPSï¼‰çš„è¦æ±‚é€šå¸¸å¹¶ä¸ç›¸åŒã€‚ä¹Ÿå°±æ˜¯æœ‰ä¸åŒä»»åŠ¡åˆ†æ”¯ æ¨ç†ä¸åŒå¸§ç‡çš„éœ€æ±‚ï¼Œä¾‹å¦‚ BEV åŠ¨æ€ä»»åŠ¡ 20 å¸§ï¼Œé™æ€ä»»åŠ¡ 10 å¸§è¿™ç§æƒ…å†µï¼ŒBEV æ¨¡å‹ç»“æ„ç®€å•ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjhhMWM1ODFkNDY5MWExYjJjMDE1MmY3NjBhYzdhY2ZfZllUV2gxUkVqVk90dGFCSTJDUGNKSUtLdnRvQlpCN2hfVG9rZW46RzJJNGJ1REREb0QxTkh4dTBZOWMyZkFEbkZnXzE3NzAzNjYzNTI6MTc3MDM2OTk1Ml9WNA" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">2.æŠ€æœ¯åˆ†æ</h2>
<p>ä»¥ BEV åŠ¨é™æ€ä»»åŠ¡ä¸ºä¾‹ï¼Œå®ç°ä¸åŒä»»åŠ¡åˆ†æ”¯æ¨ç†ä¸åŒå¸§ç‡ï¼ˆåŠ¨æ€ 20 å¸§ï¼Œé™æ€ 10 å¸§ï¼‰ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°ä¸¤ç§æ–¹æ¡ˆï¼š</p>
<p><strong>â€‹æ–¹æ¡ˆ 1-â€‹</strong>æ‹†åˆ†ä¸ºä¸‰ä¸ªå­æ¨¡å‹ï¼šæ¨¡å‹ 1-å…¬å…±éƒ¨åˆ†ï¼ˆbackbone+neckï¼‰ã€æ¨¡å‹ 2-åŠ¨æ€ headã€æ¨¡å‹ 3-é™æ€ head</p>
<ol>
<li>æ¨¡å‹ 1 æ¨ç† 20 æ¬¡ï¼Œè¾“å‡ºåˆ†åˆ«é€ç»™æ¨¡å‹ 2 æ¨ç† 20 æ¬¡ï¼Œæ¨¡å‹ 3 æ¨ç† 10 æ¬¡ã€‚</li>
<li>ä¼˜ç‚¹ï¼šåº”ç”¨å±‚å¯çµæ´»è°ƒåº¦ 3 ä¸ªå­æ¨¡å‹çš„æ¨ç†ï¼›æ¨¡å‹ 1-å…¬å…±éƒ¨åˆ† åªéœ€è¦æ¨ç† 20 æ¬¡ï¼›</li>
<li>ç¼ºç‚¹ï¼šæ¨¡å‹ 1-å…¬å…±éƒ¨åˆ†çš„è¾“å‡ºå†…å­˜éœ€è¦é¢å¤–å­˜å‚¨ï¼Œå¢åŠ  load/store å¸¦å®½æ¶ˆè€—ï¼›æ‹†åˆ†æ¬¡æ•°å¤šï¼Œå½±å“ç¼–è¯‘æ—¶çš„å…¨å›¾ä¼˜åŒ–ï¼Œå¯èƒ½ä¼šå¢åŠ  latencyï¼›</li>
</ol>
<p><strong>â€‹æ–¹æ¡ˆ 2-â€‹</strong>æ‹†åˆ†ä¸ºä¸¤ä¸ªå­æ¨¡å‹ï¼šæ¨¡å‹ 1-å…¬å…±åŠ¨æ€ï¼ˆbackbone+neck+ åŠ¨æ€ headï¼‰ã€æ¨¡å‹ 2-å…¬å…±é™æ€ï¼ˆbackbone+neck+ é™æ€ headï¼‰ï¼š</p>
<ol>
<li>æ¨¡å‹ 1-å…¬å…±åŠ¨æ€æ¨ç† 20 æ¬¡ï¼Œæ¨¡å‹ 2-å…¬å…±é™æ€æ¨ç† 10 æ¬¡ã€‚</li>
<li>ä¼˜ç‚¹ï¼šåº”ç”¨å±‚å¯çµæ´»è°ƒåº¦ 2 ä¸ªå­æ¨¡å‹çš„æ¨ç†ï¼›åªéœ€å‡†å¤‡æ•´ä¸ªæ¨¡å‹è¾“å…¥/å‡ºå†…å­˜ï¼Œæ— éœ€å‡†å¤‡å…¬å…±éƒ¨åˆ†è¾“å‡ºçš„å†…å­˜ï¼›æ‹†åˆ†æ¬¡æ•°å°‘ï¼Œç¼–è¯‘æ—¶å¯å…¨å›¾ä¼˜åŒ–ï¼Œå‡å° latencyï¼›</li>
<li>ç¼ºç‚¹ï¼šå…¬å…±éƒ¨åˆ†ï¼ˆbackbone+neckï¼‰éœ€è¦æ¨ç† 30 æ¬¡ï¼Œé€ æˆ latency å¢åŠ ä¸ BPU èµ„æºæµªè´¹ï¼›å…¬å…±éƒ¨åˆ†éœ€è¦å­˜å‚¨ä¸¤ä»½ï¼›</li>
</ol>
<p>ä¸ºäº†å…¼é¡¾æ–¹æ¡ˆ 1 ä¸æ–¹æ¡ˆ 2 çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶å®ç°ä¸åŒä»»åŠ¡åˆ†æ”¯æ¨ç†ä¸åŒå¸§ç‡ï¼Œå·¥å…·é“¾æä¾›äº† link æ‰“åŒ…åŠŸèƒ½ï¼Œå…·ä½“æ‰“åŒ…æ–¹å¼å¦‚ä¸‹ï¼š</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=MDI2ODY0NWExY2ZmYWI0MzVhYTQwNmExZTlmYjMyZjNfY2FFeFVMTGZ5OUVrWHRRUG82TUtodHZEVEN4ZElDTFFfVG9rZW46WTFwaWJOSWN4b0Jlb3Z4WkdmN2NHbnh5bkFlXzE3NzAzNjYzNTI6MTc3MDM2OTk1Ml9WNA" alt="" loading="lazy"/></p>
<p>å·¥å…·é“¾æä¾›çš„ link åŠŸèƒ½ï¼Œèƒ½å¤Ÿ å¤ç”¨ ä¸åŒ æ¨¡å‹/ä»»åŠ¡ çš„å…¬å…±éƒ¨åˆ† constant å¸¸é‡ï¼ˆåŒ…æ‹¬æƒé‡ç­‰ï¼‰ï¼Œå³ä¸ä¼šå­˜å‚¨å¤šä»½ï¼Œåœ¨æ¨¡å‹åŠ è½½æ—¶ï¼Œå…¬å…±éƒ¨åˆ†åªä¼šå ç”¨ä¸€ä»½é™æ€å†…å­˜ï¼Œéœ€è¦æ³¨æ„æ¨ç†æ—¶åŠ¨æ€å†…å­˜ä¸ä¼šå¤ç”¨ï¼ˆâ€‹<strong>ä½œä¸ºä¸åŒæ¨¡å‹å¤„ç†</strong>â€‹ï¼‰ï¼Œå…³äºå†…å­˜å ç”¨ç›¸å…³ä»‹ç»å¯è§æ–‡ç« ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.horizon.auto%2Fblog%2F13161" target="_blank" title="https://developer.horizon.auto/blog/13161" ref="nofollow noopener noreferrer">ã€åœ°å¹³çº¿ J6 å·¥å…·é“¾å…¥é—¨æ•™ç¨‹ã€‘æ¿ç«¯éƒ¨ç½² UCP ä½¿ç”¨æŒ‡å—-å†…å­˜å ç”¨</a>ã€‹ã€‚</p>
<p>ä¸Šå›¾ä¸­å°†æ¨¡å‹ 1 ä¸æ¨¡å‹ 2 link æ‰“åŒ…ç”Ÿæˆçš„æ¨¡å‹ 3ï¼Œç›¸æ¯”äºæ¨¡å‹ 1 ä½“ç§¯ä¸ä¼šå¤§å¤šå°‘ï¼ŒåŒæ—¶å…·å¤‡æ¨ç†æ¨¡å‹ 1 ä¸æ¨¡å‹ 2 çš„åŠŸèƒ½ã€‚æ ¹æ®éœ€æ±‚ï¼Œè°ƒæ•´æ¨¡å‹ 1 ä¸æ¨¡å‹ 2 çš„æ¨ç†æ¬¡æ•°ï¼Œå³å¯å®ç°ä¸åŒä»»åŠ¡é‡‡ç”¨ä¸åŒå¸§ç‡éƒ¨ç½²ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šæ¨ç†ä¸€æ¬¡æ¨¡å‹ 1ï¼Œå¯å®ç°åŠ¨æ€ä»»åŠ¡ head ä¸é™æ€ä»»åŠ¡ head å„æ¨ç†ä¸€æ¬¡ï¼Œæ¨ç†æ¨¡å‹ 2 å¯å®ç°ä»…æ¨ç†ä¸€æ¬¡åŠ¨æ€ä»»åŠ¡ headï¼Œå½“æ¨¡å‹ 1 æ¨ç† 10 æ¬¡ã€æ¨¡å‹ 2 æ¨ç† 10 æ¬¡æ—¶ï¼Œå³å¯å®ç°åŠ¨æ€æ¨ç† 20 æ¬¡ï¼Œé™æ€æ¨ç† 10 æ¬¡çš„æ•ˆæœã€‚ï¼ˆå…¬å…±éƒ¨åˆ† backbone+neck ä»…æ¨ç† 20 æ¬¡ï¼‰</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=MDgyZWE4YmM5ZmIzYTAwMjg5M2FmNjE0MmEwNmE4YWVfYlBDNmU4cDQyZ0RqYzlya1MyQWZBQVFVbXVhNUhweThfVG9rZW46SHpEcmJDQ3lVb0VpRFB4M3BRbWM0S0s0bmJoXzE3NzAzNjYzNTI6MTc3MDM2OTk1Ml9WNA" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">3.æ–¹æ¡ˆå®ç°</h2>
<h3 data-id="heading-3"><strong>3.1 æ¨¡å‹ link æ‰“åŒ…</strong></h3>
<p>æ ¹æ®éœ€æ±‚åœºæ™¯ï¼Œå…ˆå°†å¤šä»»åŠ¡æ¨¡å‹æ‹†åˆ†å¯¼å‡ºä¸ºä¸åŒå­ä»»åŠ¡çš„ qat.bcï¼Œç„¶ååˆ†åˆ«å°†ä»–ä»¬ç¼–è¯‘æˆ hbo æ–‡ä»¶ï¼Œæœ€åå°†å¤šä¸ª hbo æ–‡ä»¶ link æ‰“åŒ…ä¸ºä¸€ä¸ª hbm æ¨¡å‹ã€‚</p>
<p>åœ¨å·¥å…·é“¾ç”¨æˆ·æ‰‹å†Œã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.oe.horizon.auto%2Fguide%2Fadvanced_content%2Fhbdk_api_reference.html" target="_blank" title="https://docs.oe.horizon.auto/guide/advanced_content/hbdk_api_reference.html" ref="nofollow noopener noreferrer">HBDK Tool API Reference</a>ã€‹ç« èŠ‚ä¸­è¯¦ç»†ä»‹ç»äº† compile ä¸ link APIï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li>compile è¾“å‡ºåŒæ—¶æ”¯æŒ hbm ä¸ hbo ä¸¤ç§æ–‡ä»¶æ ¼å¼ï¼Œå¯é€šè¿‡é…ç½®æ–‡ä»¶åç¼€åä¸º"ã€‚hbm" or ".hbo"æ¥åŒºåˆ†ã€‚</li>
<li>link æ”¯æŒå°†å¤šä¸ª hbo æ–‡ä»¶æ‰“åŒ…ç”Ÿæˆä¸€ä¸ª hbm æ–‡ä»¶ã€‚</li>
</ul>
<p>å°†ä¸¤ä¸ª hbo æ–‡ä»¶é€šè¿‡ link æ‰“åŒ…ç”Ÿæˆä¸€ä¸ª hbm æ¨¡å‹ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">from horizon_plugin_pytorch.quantization.hbdk4 import export
from hbdk4.compiler import load, convert, compile, link
# export é˜¶æ®µè®°å¾—é…ç½® name
qat_bcA = export(qat_model_A, example_input, name="1_backbone_head1_head2")
quantized_modelA = convert(qat_bcA, "nash-m")
# æ³¨æ„ï¼šæ­¤æ—¶compileç”Ÿæˆçš„æ¨¡å‹åç¼€åä¸º.hbo
hbo_nameA = "nameA_compiled.hbo"
hboA = compile(quantized_modelA, path=hbo_nameA, march="nash-m", opt=2, progress_bar=True, jobs=48)

qat_bcB = export(qat_model_B, example_input, name="2_backbone_head1")
quantized_modelB = convert(qat_bcB, "nash-m")
hbo_nameB = "nameB_compiled.hbo"
hboB = compile(quantized_modelB, path=hbo_nameB, march="nash-m", opt=2, progress_bar=True, jobs=48)

# linkç”Ÿæˆæ‰“åŒ…æ¨¡å‹ï¼Œåç¼€åä¸º.hbm
hbm_name = "compiled.hbm"
hbm = link([hboA, hboB], hbm_name)
# å¦‚æœåœ¨å…¶ä»–åœ°æ–¹å·²ç»ç”Ÿæˆäº†hbo
# å¯ä»¥é€šè¿‡ hbo = Hbo(hbo_name) è¿›è¡ŒåŠ è½½ æ‰€éœ€å¤´æ–‡ä»¶ï¼š from hbdk4.compiler.hbm import Hbo
</code></pre>
<h3 data-id="heading-4">3.2 æ‰“åŒ…æ¨¡å‹æ¨ç†</h3>
<h4 data-id="heading-5">3.2.1 hrt_model_exec å·¥å…·æ¨ç†</h4>
<p>é€šè¿‡ <code>hrt_model_exec model_info --model_file compiled.hbm</code> å¯æŸ¥çœ‹æ‰“åŒ…æ¨¡å‹çš„æ•°é‡ï¼Œè¾“å…¥è¾“å‡ºç­‰ä¿¡æ¯ï¼Œç¤ºä¾‹å¦‚ä¸‹</p>
<pre><code class="hljs language-Plain" lang="Plain">This model file has 2 model:
[2_backbone_head1]      [1_backbone_head1_head2]
---------------------------------------------------------------------
[model name]: 2_backbone_head1

input[0]:
name: ...

output[0]:
name: ...

---------------------------------------------------------------------

---------------------------------------------------------------------
[model name]: 1_backbone_head1_head2

input[0]:
name: ...

output[0]:
name: ...

output[1]:
name: ...
</code></pre>
<p>ç»“åˆ--model_file ä¸--model_name å³å¯å®ç°å¯¹æ‰“åŒ… compiled.hbm æ¨¡å‹ä¸­çš„æŸä¸€ä¸ªæ¨¡å‹è¿›è¡Œæ¨ç†ã€‚</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=NDUxMTNlNTk5MDE0YjU3ZmI1NzdlNTQ0MDVjZjdiNTFfcmZHQkZmNmZ6NjdoMlhYNm9XWU84RmJVbHB0NnRTZlFfVG9rZW46UFNld2JKZGs3b2w0eWF4V29pdGNOWmJBbnBmXzE3NzAzNjYzNTI6MTc3MDM2OTk1Ml9WNA" alt="" loading="lazy"/></p>
<p>ä»¥ perf è¯„æµ‹æ‰“åŒ… compiled.hbm æ¨¡å‹ ä¸­ 2_backbone_head1 çš„æ€§èƒ½ä¸ºä¾‹ï¼Œå‚è€ƒå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">hrt_model_exec perf --model_file compiled.hbm --model_name 2_backbone_head1
</code></pre>
<h4 data-id="heading-6">3.2.2 UCP API æ¨ç†</h4>
<p>åœ¨å·¥å…·é“¾ç”¨æˆ·æ‰‹å†Œã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.oe.horizon.auto%2Fguide%2Fucp%2Fruntime%2Fbpu_sdk_api%2Ffunction_interface%2Fmodel_loading_releasing.html" target="_blank" title="https://docs.oe.horizon.auto/guide/ucp/runtime/bpu_sdk_api/function_interface/model_loading_releasing.html" ref="nofollow noopener noreferrer">ç»Ÿä¸€è®¡ç®—å¹³å° UCP - æ¨¡å‹æ¨ç†å¼€å‘ - æ¨¡å‹æ¨ç† API æ‰‹å†Œ - åŠŸèƒ½æ¥å£</a>ã€‹ä¸­ï¼Œè¯¦ç»†ä»‹ç»äº†åŠ è½½æ‰“åŒ…æ¨¡å‹ hbDNNInitializeFromFiles ä¸ è·å–å•ä¸ªæ¨¡å‹å¥æŸ„ hbDNNGetModelHandle çš„ä½¿ç”¨æ–¹å¼ï¼Œæˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=MDUyODQ3NTJmODUwZDRhNjc1MThlOGNmM2UzOTViZjZfd0dFSnEwelBvdG5jUXZMaGdidUJtbGxMbzlrNjVEQ0lfVG9rZW46WUdvMGJER1lUb0ZwaXJ4UktsRmNuYXZpbjdlXzE3NzAzNjYzNTI6MTc3MDM2OTk1Ml9WNA" alt="" loading="lazy"/></p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=N2VkNjg1OWM0NjcwYjQ5OGFhOWQ4NzY0NDEzNmViYjhfWFlaOXN4Ymo1aHJuUFJXYXNjMHZiTnVSaXU1ZExWV2pfVG9rZW46SW9TRGJ2V3pOb1ZCeUl4dzRGa2MwSnlJblNkXzE3NzAzNjYzNTI6MTc3MDM2OTk1Ml9WNA" alt="" loading="lazy"/></p>
<p>åœ¨å·¥å…·é“¾å¼€å‘åŒ…è·¯å¾„ï¼šOE/samples/ucp_tutorial/dnn/basic_samples ä¸‹æ–¹çš„ç¤ºä¾‹ä¸­æœ‰ç”¨åˆ°è¿™ä¸¤ä¸ªæ¥å£ï¼Œå¯å‚è€ƒä½¿ç”¨ã€‚</p>
<h3 data-id="heading-7">3.3 å¤šä»»åŠ¡ä¸åŒå¸§ç‡æ¨ç†</h3>
<p>æ ¹æ®éœ€æ±‚ï¼Œè°ƒæ•´æ‰“åŒ…æ¨¡å‹ compiled.hbm ä¸­çš„ æ¨¡å‹ 1 backbone_head1_head2 ä¸æ¨¡å‹ 2 backbone_head1 çš„æ¨ç†æ¬¡æ•°ï¼Œå³å¯å®ç°ä¸åŒä»»åŠ¡é‡‡ç”¨ä¸åŒå¸§ç‡éƒ¨ç½²ã€‚</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjBjNDI5OWI0ODBmYTc2YmVmNDcwMWYzOWI4ZjY4ZTJfYU02WXVKMTZsVWw3Q2J5VkJ3YnhOTDFIUFBvakRFaVdfVG9rZW46UWVLbmJpZElHbzBGTFh4TTJxN2NBdXRmbmRmXzE3NzAzNjYzNTI6MTc3MDM2OTk1Ml9WNA" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">3.4 æ€§èƒ½æ•°æ®ç¤ºä¾‹</h3>
<p>ä¸‹è¡¨ä¸­ï¼Œbackbone_head1 æ˜¯å…¬å…±éƒ¨åˆ†ï¼Œâ€‹<strong>æ³¨æ„</strong>â€‹ï¼šå…¬å…±éƒ¨åˆ†æƒé‡æ˜¯ä¸€æ ·çš„</p>


































<table><thead><tr><th><strong>æ¨¡å‹åç§°</strong></th><th><strong>æ¨¡å‹å¤§å°/KB</strong></th><th><strong>æ¨¡å‹ name</strong></th><th><strong>latency/ms</strong></th></tr></thead><tbody><tr><td>1_backbone_head1_head2.hbm</td><td>30295</td><td>/</td><td>5.19</td></tr><tr><td>2_backbone_head1.hbm</td><td>21781</td><td>/</td><td>4.84</td></tr><tr><td>compiled.hbm</td><td>30776</td><td>1_backbone_head1_head2</td><td>5.18</td></tr><tr><td>2_backbone_head1</td><td>4.83</td><td/></tr></tbody></table>
<p>å¯ä»¥çœ‹åˆ°ï¼Œcompiled.hbm ä½“ç§¯ç›¸æ¯”äº 1_backbone_head1_head2.hbm å¹¶æ²¡æœ‰å¢åŠ å¤šå°‘ã€‚</p>
<p>æ¨¡å‹åŠ è½½æ¨ç†æ—¶ï¼ŒION å†…å­˜å·®å¼‚å¦‚ä¸‹ï¼š</p>
<p>åŠ è½½ 1_backbone_head1_head2.hbmï¼Œç›´æ¥æ¨ç†ï¼š</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=NmZjZmY0NjY5OWNhMTdmMWEwNWIwMmI4NmI1YzliYzJfSEozNDNZS2dsMUp3RTlWemROTXZMRW5hR3RHemdITTFfVG9rZW46WlZtU2JWVWE3bzZ5UVd4cmd1cmNIYjRubm1kXzE3NzAzNjYzNTI6MTc3MDM2OTk1Ml9WNA" alt="" loading="lazy"/></p>
<p>åŠ è½½ compiled.hbmï¼Œæ¨ç† 1_backbone_head1_head2ï¼š</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=Yzc3OWIyZWJiZTYzZTVlYWY1ODM0Y2FhZDExNDlhOThfZ0xWNzNYV1RMbnFDRHQ0aWdhQ2RmcXBPNzNWTlFUekRfVG9rZW46R0RQR2JKMGJGb2F2N1B4eFhlS2NSRGVMblBiXzE3NzAzNjYzNTI6MTc3MDM2OTk1Ml9WNA" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œcompiled.hbm å ç”¨çš„å†…å­˜ç›¸æ¯”äº 1_backbone_head1_head2.hbm å¹¶æ²¡æœ‰å¢åŠ å¤šå°‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Posixçº¿ç¨‹/C++11å¤šçº¿ç¨‹åŸºç¡€]]></title>    <link>https://juejin.cn/post/7603393977477103642</link>    <guid>https://juejin.cn/post/7603393977477103642</guid>    <pubDate>2026-02-06T08:32:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603393977477103642" data-draft-id="7603393977477087258" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Posixçº¿ç¨‹/C++11å¤šçº¿ç¨‹åŸºç¡€"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T08:32:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç‹åœ¨è¿›æ­¥"/> <meta itemprop="url" content="https://juejin.cn/user/4062019467609459"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Posixçº¿ç¨‹/C++11å¤šçº¿ç¨‹åŸºç¡€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4062019467609459/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç‹åœ¨è¿›æ­¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T08:32:57.000Z" title="Fri Feb 06 2026 08:32:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Posixçº¿ç¨‹/C++11å¤šçº¿ç¨‹</h2>
<p>æœ¬æ–‡å¯¹æ¯”äº†<code>POSIX pthreads</code>å’Œ<code>C++11 threads</code>åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­çš„åº”ç”¨,åŒ…æ‹¬çº¿ç¨‹åˆ›å»ºã€
çº¿ç¨‹ç»„ã€çº¿ç¨‹ä¼ å‚åŠç±»æˆå‘˜å‡½æ•°ä½œä¸ºçº¿ç¨‹å‡½æ•°çš„å®ç°,é€‚åˆåˆå­¦è€…å’Œå¼€å‘è€…æ·±å…¥ç†è§£C++å¤šçº¿ç¨‹
ç¼–ç¨‹ã€‚</p>
<p>åœ¨C++11å¼•è¿›å¤šçº¿ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸å¾—ä¸ç”¨<code>POSIX pthreads</code>æ¥ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºã€‚</p>
<pre><code class="hljs">POSIX pthreads æ˜¯POSIXæ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæä¾›äº†ä¸€ç»„å‡½æ•°å’Œå®ï¼Œç”¨äºåˆ›å»ºå’Œç®¡ç†çº¿ç¨‹ã€‚
è™½ç„¶ POSIX pthreads åŠŸèƒ½å¼ºå¤§ï¼Œä½†å®ƒçš„APIç›¸å¯¹å¤æ‚ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒç¹çã€‚
</code></pre>
<p>æœ¬æ–‡åŒ…æ‹¬äº†ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>POSIXå¤šçº¿ç¨‹å®è·µ</li>
<li>C++11å¤šçº¿ç¨‹å®è·µ</li>
<li>ç±»æˆå‘˜å‡½æ•°ä½œä¸ºçº¿ç¨‹å‡½æ•°çš„å®ç°</li>
</ul>
<h3 data-id="heading-1">ä¸€ã€POSIXå¤šçº¿ç¨‹å®è·µ</h3>
<h4 data-id="heading-2">åˆ›å»ºç®€å•çº¿ç¨‹</h4>
<p>åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç”¨pthread_join()é˜»å¡ï¼Œç­‰å¾…çº¿ç¨‹ç»“æŸã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pthread.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">void</span> *<span class="hljs-title">callback</span><span class="hljs-params">(<span class="hljs-type">void</span>*)</span>
</span>{
    cout &lt;&lt; <span class="hljs-string">"å­çº¿ç¨‹ID: "</span> &lt;&lt; <span class="hljs-built_in">pthread_self</span>() &lt;&lt; endl;<span class="hljs-comment">//è·å–å½“å‰çº¿ç¨‹ID</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-type">pthread_t</span> tid;
    <span class="hljs-built_in">pthread_create</span>(&amp;tid,<span class="hljs-literal">NULL</span>,callback,<span class="hljs-literal">NULL</span>);
    <span class="hljs-built_in">pthread_join</span>(tid,<span class="hljs-literal">NULL</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70495996da1947cd81e6b0c8607ada5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP546L5Zyo6L-b5q2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971577&amp;x-signature=ASfisyurbM7ecmhu1qwibtKB5rE%3D" alt="image-2.png" loading="lazy"/></p>
<h4 data-id="heading-3">å¤šä¸ªçº¿ç¨‹å®ç°</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pthread.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">int</span> NUM_THREADS = <span class="hljs-number">5</span>; <span class="hljs-comment">//çº¿ç¨‹æ•°é‡</span>

<span class="hljs-function"><span class="hljs-type">void</span> *<span class="hljs-title">call_from_thread</span><span class="hljs-params">(<span class="hljs-type">void</span> *arg)</span> </span>{
    cout &lt;&lt; <span class="hljs-string">"Hello from thread: "</span> &lt;&lt; <span class="hljs-built_in">pthread_self</span>() &lt;&lt; endl;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-type">pthread_t</span> t[NUM_THREADS];
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; NUM_THREADS; i++)
    {
        <span class="hljs-built_in">pthread_create</span>(&amp;t[i],<span class="hljs-literal">NULL</span>,call_from_thread,<span class="hljs-literal">NULL</span>);
    }
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; NUM_THREADS; i++)
    {
        <span class="hljs-built_in">pthread_join</span>(t[i],<span class="hljs-literal">NULL</span>);<span class="hljs-comment">//ç­‰å¾…çº¿ç¨‹ç»“æŸ</span>
    }
 

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26fc854da77e406d8733686eb4de5ce6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP546L5Zyo6L-b5q2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971577&amp;x-signature=d2W%2FvSnT34V1zco%2BGXZXsE9UUEc%3D" alt="image-3.png" loading="lazy"/></p>
<p>å½“åˆ›å»ºå¤šä¸ªå­çº¿ç¨‹æ—¶ï¼Œå¤–åŠ ä¸»çº¿ç¨‹å…±å…­ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°çº¿ç¨‹ä¹‹é—´æ˜¯å¹³ç­‰ç«äº‰ä¸´ç•Œèµ„æºå…³ç³»çš„ï¼Œé¡ºåºæ˜¯æ— åºçš„ï¼Œå› æ­¤å¦‚æœè¦æ˜ç¡®ç¡®å®šé¡ºåºï¼Œåˆ™éœ€è¦åŒæ­¥æœ¯è¯­æ¥æ”¹è¿›ï¼Œå¦‚äº’æ–¥é”ã€æ¡ä»¶å˜é‡ç­‰ã€‚</p>
<h4 data-id="heading-4">çº¿ç¨‹ä¼ å‚çš„å®ç°</h4>
<p>çº¿ç¨‹çš„ä¼ å‚å¯ä»¥æ˜¯ç®€å•çš„æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ç¼–å†™çº¿ç¨‹ä¼ å‚çš„æ—¶å€™è¦ç•™æ„ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pthread.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">int</span> NUM_THREADS = <span class="hljs-number">5</span>;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">thread_data</span> {
  <span class="hljs-type">int</span> thread_id;  
};
 
<span class="hljs-function"><span class="hljs-type">void</span> *<span class="hljs-title">call_from_thread</span><span class="hljs-params">(<span class="hljs-type">void</span> *arg)</span> </span>{
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">thread_data</span> *th_data = (<span class="hljs-keyword">struct</span> thread_data *)arg;
    cout &lt;&lt; <span class="hljs-string">"Hello from thread "</span> &lt;&lt; th_data-&gt;thread_id &lt;&lt; endl;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-type">pthread_t</span> t[NUM_THREADS];
    thread_data td[NUM_THREADS];


    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;NUM_THREADS;i++){
        td[i].thread_id = i;
        <span class="hljs-built_in">pthread_create</span>(&amp;t[i],<span class="hljs-literal">NULL</span>,call_from_thread,&amp;td[i]); <span class="hljs-comment">//td[i]ä½œä¸ºå‚æ•°ä¼ é€’ç»™call_from_threadå‡½æ•°</span>
    }
  
    cout &lt;&lt; <span class="hljs-string">"Hello from main thread"</span> &lt;&lt; endl;

    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;NUM_THREADS;i++){
        <span class="hljs-built_in">pthread_join</span>(t[i],<span class="hljs-literal">NULL</span>);<span class="hljs-comment">//ç­‰å¾…çº¿ç¨‹ç»“æŸ </span>
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f17b241668a144da80790b77efabbdf6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP546L5Zyo6L-b5q2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971577&amp;x-signature=zoLC6ktuOS6h7m9ezwyo9ZTvoN4%3D" alt="image-4.png" loading="lazy"/></p>
<p>å†ä¸€æ¬¡éªŒè¯äº†ï¼Œçº¿ç¨‹ä¹‹é—´æ˜¯ç«äº‰ã€æ— åºçš„ã€‚</p>
<h3 data-id="heading-5">äºŒã€C++11å¤šçº¿ç¨‹å®è·µ</h3>
<p>C++11å¢åŠ äº†å¤šçº¿ç¨‹ï¼Œèƒ½å¤Ÿæ›´ç®€ä¾¿çš„å®ç°å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå¹¶ä¸”å…¼å®¹POSIX pthreadsã€‚</p>
<h4 data-id="heading-6">ç®€å•çº¿ç¨‹</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

 <span class="hljs-comment">//æ™®é€šå‡½æ•°ä½œä¸ºçº¿ç¨‹å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">call_from_thread</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-comment">// ä¸ºäº†é˜²æ­¢è¾“å‡ºä¹±åºï¼Œå®é™…é¡¹ç›®ä¸­é€šå¸¸åŠ é”ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºç®€å•çœç•¥</span>
    cout &lt;&lt; <span class="hljs-string">"Hello from thread"</span> &lt;&lt; endl;
}



<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
   <span class="hljs-function">thread <span class="hljs-title">tid</span><span class="hljs-params">(call_from_thread)</span></span>; <span class="hljs-comment">//åˆ›å»ºã€å¯åŠ¨çº¿ç¨‹</span>
   tid.<span class="hljs-built_in">join</span>(); <span class="hljs-comment">//ç­‰å¾…çº¿ç¨‹ç»“æŸ</span>
  
    cout &lt;&lt; <span class="hljs-string">"Hello from main thread"</span> &lt;&lt; endl;

    <span class="hljs-comment">//lambdaè¡¨è¾¾å¼ä½œä¸ºçº¿ç¨‹å‡½æ•°</span>
    <span class="hljs-keyword">auto</span> f = [](<span class="hljs-type">const</span> std::string&amp; name){
        cout &lt;&lt; <span class="hljs-string">"Hello"</span> &lt;&lt; name &lt;&lt; endl;
    };

    <span class="hljs-function">thread <span class="hljs-title">tid2</span><span class="hljs-params">(f,<span class="hljs-string">"Tom"</span>)</span></span>; <span class="hljs-comment">//åˆ›å»ºã€å¯åŠ¨çº¿ç¨‹</span>
    tid2.<span class="hljs-built_in">join</span>(); <span class="hljs-comment">//ç­‰å¾…çº¿ç¨‹ç»“æŸ</span>

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc74632f6ba94c39b8aefeebe31c5f8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP546L5Zyo6L-b5q2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971577&amp;x-signature=bdcgS6hzPlr6bhZFmOIR8DX2Ag0%3D" alt="image-5.png" loading="lazy"/></p>
<p>C++11çº¿ç¨‹å…¶å®æ˜¯å’ŒPOSIXçº¿ç¨‹APIåˆ›å»ºçš„çº¿ç¨‹æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„,åªæ˜¯C++11çº¿ç¨‹å°è£…äº†POSIXçº¿ç¨‹API,å¹¶ä¸”æä¾›äº†æ›´ç®€æ´çš„æ¥å£ã€‚</p>
<p>mainå‡½æ•°åˆ›å»ºäº†çº¿ç¨‹call_backå‡½æ•°ï¼Œå¹¶åœ¨tid.join()å¤„ç­‰å¾…çº¿ç¨‹ç»“æŸã€‚å¦‚æœå¿˜è®°ç­‰å¾…ï¼Œmainçº¿ç¨‹æœ‰å¯èƒ½å…ˆå®Œæˆï¼Œå¯¼è‡´ç¨‹åºæå‰é€€å‡ºï¼Œä¼šæ€æ­»ä¹‹å‰æ‰€åˆ›å»ºçš„çº¿ç¨‹ã€‚</p>
<h4 data-id="heading-7">å¤šä¸ªçº¿ç¨‹å®ç°</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span>

<span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">int</span> NUM_THREADS = <span class="hljs-number">10</span>; <span class="hljs-comment">// çº¿ç¨‹æ•°é‡</span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-comment">// æ™®é€šå‡½æ•°ä½œä¸ºçº¿ç¨‹å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">call_from_thread</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// ä¸ºäº†é˜²æ­¢è¾“å‡ºä¹±åºï¼Œå®é™…é¡¹ç›®ä¸­é€šå¸¸åŠ é”ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºç®€å•çœç•¥</span>
    cout &lt;&lt; <span class="hljs-string">"Hello from thread"</span> &lt;&lt; endl;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    thread t[NUM_THREADS]; <span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹æ•°ç»„</span>

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; NUM_THREADS; ++i)
    {
        t[i] = <span class="hljs-built_in">thread</span>(call_from_thread); <span class="hljs-comment">// åˆ›å»ºã€å¯åŠ¨çº¿ç¨‹</span>
    }

    cout &lt;&lt; <span class="hljs-string">"Hello from main thread"</span> &lt;&lt; endl;

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; NUM_THREADS; ++i)
    {
        t[i].<span class="hljs-built_in">join</span>(); <span class="hljs-comment">// ç­‰å¾…çº¿ç¨‹ç»“æŸ</span>
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/772275adbab648a3a8f6e01bd7e7bfec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP546L5Zyo6L-b5q2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971577&amp;x-signature=TYGrpoNn8y8kUJgZad5%2BgsyGcsY%3D" alt="image-7.png" loading="lazy"/>
å¯ä»¥å‘ç°æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä¸»çº¿ç¨‹ä¹‹ååšä¸€äº›å·¥ä½œã€‚</p>
<p>å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿é€åæ²¡æœ‰ç‰¹å®šçš„é¡ºåºï¼Œæˆ‘ä»¬åœ¨ç¼–ç¨‹æ—¶è¦ç¡®ä¿çº¿ç¨‹ä¸ä¼šä¿®æ”¹ä¸´ç•Œèµ„æºï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹ä¹‹é—´ç¡®å®è¦ç«äº‰ä¸€äº›èµ„æºï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™æ›´å¤æ‚çš„å¹¶è¡Œä»£ç ï¼Œä½¿ç”¨ç±»ä¼¼nutexã€atomicç­‰æ–¹æ³•é¿å…ä¸Šè¿°é—®é¢˜ã€‚</p>
<h4 data-id="heading-8">çº¿ç¨‹ä¼ å‚çš„å®ç°</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-comment">// æ™®é€šå‡½æ•°ä½œä¸ºçº¿ç¨‹å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">call_from_thread</span><span class="hljs-params">(string&amp; s)</span>
</span>{
    <span class="hljs-comment">// ä¸ºäº†é˜²æ­¢è¾“å‡ºä¹±åºï¼Œå®é™…é¡¹ç›®ä¸­é€šå¸¸åŠ é”ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºç®€å•çœç•¥</span>
    cout &lt;&lt; <span class="hljs-string">"Hello from thread :"</span> &lt;&lt; s &lt;&lt; endl;
    s = <span class="hljs-string">"hello"</span>; <span class="hljs-comment">//ä¿®æ”¹ä¼ å…¥çš„å‚æ•°</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{   
    string str = <span class="hljs-string">"Jaylan"</span>;
    <span class="hljs-function">thread <span class="hljs-title">t</span><span class="hljs-params">(&amp;call_from_thread,std::ref(str))</span></span>; <span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹ï¼Œå¹¶ä¼ é€’å‚æ•°,ref()è¡¨ç¤ºæ˜¾å¼çš„å¼•ç”¨ä¼ é€’</span>
    t.<span class="hljs-built_in">join</span>(); <span class="hljs-comment">// ç­‰å¾…çº¿ç¨‹ç»“</span>
    cout &lt;&lt; <span class="hljs-string">"Hello from main thread="</span> &lt;&lt; str &lt;&lt; endl;

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e76fce929a5a422c855606cd1c49fbf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP546L5Zyo6L-b5q2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971577&amp;x-signature=Ivt5M0tAekQwelBfs76xN5bI%2Fow%3D" alt="image-8.png" loading="lazy"/>
å…ˆé˜»å¡äº†ä¸»çº¿ç¨‹ï¼Œç­‰å¾…çº¿ç¨‹ç»“æŸï¼Œç„¶åè¾“å‡ºä¿®æ”¹åçš„å‚æ•°ã€‚</p>
<h3 data-id="heading-9">ä¸‰ã€ç±»æˆå‘˜å‡½æ•°ä½œä¸ºçº¿ç¨‹å‡½æ•°çš„å®ç°</h3>
<p>åœ¨çº¿ç¨‹ä¸­å¦‚ä½•å°†ä¸€ä¸ªç±»æˆå‘˜å‡½æ•°ä½œä¸ºçº¿ç¨‹å‡½æ•°å‘¢ï¼Ÿ</p>
<p>æˆå‘˜æ–¹æ³•ä½œä¸ºçº¿ç¨‹æ¥æ‰§è¡Œï¼Œæœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p>
<ul>
<li>çº¿ç¨‹çš„å˜é‡ä¼ é€’ä¼šéå¸¸æ–¹ä¾¿ï¼Œç›´æ¥è¯»å–æˆå‘˜å˜é‡å³å¯ã€‚</li>
<li>çº¿ç¨‹ä½“ä½œä¸ºå¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥è®¿é—®å¯¹è±¡çš„ç§æœ‰å˜é‡å’Œæ–¹æ³•ã€‚</li>
</ul>
<h4 data-id="heading-10">æˆå‘˜å‡½æ•°ä½œä¸ºçº¿ç¨‹å‡½æ•°ï¼ˆPOSIX threadsï¼‰</h4>
<p>è¯­æ³•ï¼š<code>int pthread_create(pthread_t *thread, pthread_attr_t *attr, void *(*routine)(void*), void* arg);</code></p>
<p>ä¸»è¦ç¬¬ä¸‰ä¸ªå‚æ•°routineæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç±»æˆå‘˜å‡½æ•°ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ
å…ˆæµ‹è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">AA</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name);
    <span class="hljs-type">void</span> sayHelo*();
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">stop</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* m_name;
    <span class="hljs-type">pthread_t</span> m_thread; <span class="hljs-comment">//çº¿ç¨‹</span>
}

AA::<span class="hljs-built_in">AA</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name):<span class="hljs-built_in">m_name</span>(name)
{
    <span class="hljs-built_in">pthread_create</span>(&amp;m_thread,<span class="hljs-literal">NULL</span>,AA::sayHelo,<span class="hljs-keyword">this</span>);
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/751b8c71fee34eaca0533905ec6d912f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP546L5Zyo6L-b5q2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971577&amp;x-signature=KPMesGH7SSDfUw7w%2BKwvmEcF8M0%3D" alt="image-9.png" loading="lazy"/>
åˆ†ææŠ¥é”™ä¿¡æ¯ï¼Œæˆå‘˜å‡½æ•°é»˜è®¤æ˜¯éé™æ€å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°è¯•å°†pthread_createçš„ç¬¬ä¸‰ä¸ªå‚æ•°æ”¹ä¸ºé™æ€å‡½æ•°ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span>* <span class="hljs-title">createThread</span><span class="hljs-params">(<span class="hljs-type">void</span>* arg)</span>
</span>{
    A* pa = (A*)arg;
    pa-&gt;<span class="hljs-built_in">sayHello</span>();
    <span class="hljs-keyword">return</span> (<span class="hljs-type">void</span>*)<span class="hljs-number">0</span>; 
}

AA::<span class="hljs-built_in">AA</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name):<span class="hljs-built_in">m_name</span>(name)
{
    <span class="hljs-built_in">pthread_create</span>(&amp;m_thread,<span class="hljs-literal">NULL</span>,createThread,<span class="hljs-keyword">this</span>);
}
</code></pre>
<p>æˆ‘ä»¬é€šè¿‡staticå‡½æ•°createThreadä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ï¼ŒåŒæ—¶ä½¿ç”¨ç¬¬å››ä¸ªå‚æ•°thisçº¿ç¨‹ä¼ å‚ï¼Œè¿›è€Œåœ¨createThreadç®€é—´æ¥è°ƒç”¨classä¸­çš„æˆå‘˜æ–¹æ³•ã€‚
è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯ï¼šå°†routineå‡½æ•°å£°æ˜ä¸ºè¯¥ç±»çš„å‹å…ƒå‡½æ•°ï¼Œè¿™æ ·routineå‡½æ•°å°±å¯ä»¥ç›´æ¥è°ƒç”¨è¯¥ç±»çš„æˆå‘˜å‡½æ•°äº†ã€‚</p>
<p>è¿˜å¯ä»¥åˆ©ç”¨lambdaå‡½æ•°ï¼Œlambdaå‡½æ•°å¯ä»¥æ•è·ç±»æˆå‘˜å˜é‡ï¼Œä»è€Œåœ¨lambdaå‡½æ•°ä¸­è°ƒç”¨ç±»æˆå‘˜å‡½æ•°ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pthread.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">AA</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name);
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sayHelo</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">stop</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* m_name;
    <span class="hljs-type">pthread_t</span> m_thread; <span class="hljs-comment">//çº¿ç¨‹</span>
};
AA::<span class="hljs-built_in">AA</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name):<span class="hljs-built_in">m_name</span>(name)
{
    <span class="hljs-keyword">auto</span> f = [](<span class="hljs-type">void</span>* arg)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"word thread\n"</span>);
        AA* a = (AA*)arg;
        a-&gt;<span class="hljs-built_in">sayHelo</span>();
        <span class="hljs-keyword">return</span> (<span class="hljs-type">void</span>*)<span class="hljs-number">0</span>; <span class="hljs-comment">//å­çº¿ç¨‹é€€å‡ºï¼Œå¹¶è¿”å›ä¸€ä¸ªç©ºæŒ‡é’ˆ</span>
    };
    <span class="hljs-built_in">pthread_create</span>(&amp;m_thread,<span class="hljs-literal">NULL</span>,f,<span class="hljs-keyword">this</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AA::sayHelo</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"hello,%s\n"</span>,m_name);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AA::stop</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-built_in">pthread_join</span>(m_thread,<span class="hljs-literal">NULL</span>); <span class="hljs-comment">//ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹ç»“æŸ</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-type">pthread_t</span> tid;
    <span class="hljs-function">AA <span class="hljs-title">a</span><span class="hljs-params">(<span class="hljs-string">"å¼ ä¸‰"</span>)</span></span>;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"main thread\n"</span>);
    a.<span class="hljs-built_in">stop</span>();

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a75ad9bf94ef423c9f5ce096ba433178~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP546L5Zyo6L-b5q2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971577&amp;x-signature=OqCV55UC7DVpHDrn72yWo1sVPf0%3D" alt="image-10.png" loading="lazy"/></p>
<p>ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹çš„è¾“å‡ºé¡ºåºæ˜¯éšæœºçš„ï¼Œå› ä¸ºçº¿ç¨‹ä¹‹é—´æ˜¯ç«äº‰ã€æ— åºçš„ã€‚</p>
<h4 data-id="heading-11">æˆå‘˜å‡½æ•°ä½œä¸ºçº¿ç¨‹å‡½æ•°ï¼ˆC++11 threadsï¼‰</h4>
<p>#include 
#include 
#include 
using namespace std;</p>
<p>class AA
{
public:
AA(const string&amp; name);
~AA();
void sayHello();
void stop();
private:
string m_name;
thread m_thread; //çº¿ç¨‹
};</p>
<p>AA::AA(const string&amp; name):m_name(name), m_thread(&amp;AA::sayHello,this){}</p>
<p>AA::~AA()
{
if(m_thread.joinable())//åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å¯join
{
m_thread.join(); //ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹ç»“æŸ
}
}</p>
<p>void AA::sayHello()
{
cout &lt;&lt; "hello," &lt;&lt; m_name &lt;&lt; endl;
}</p>
<p>void AA::stop()
{
if(m_thread.joinable())//åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å¯join
{
m_thread.join(); //ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹ç»“æŸ
}
}</p>
<p>int main()
{
AA a("å¼ ä¸‰");
cout &lt;&lt; "main thread.\n";
a.stop();</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
</code></pre>
<p>}</p>
<pre><code class="hljs language-ini" lang="ini">
!<span class="hljs-section">[image-11.png]</span>(https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/369b621084264dfba721bdcdeaa336dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP546L5Zyo6L-b5q2l:q75.awebp?<span class="hljs-attr">rk3s</span>=f64ab15b&amp;x-expires=<span class="hljs-number">1770971577</span>&amp;x-signature=xrP0cNhbbV2SJyjU6TJy%<span class="hljs-number">2</span>B6V55f8%<span class="hljs-number">3</span>D)

æ–‡ç« è¿›è¡Œäº†ç®€å•çš„çº¿ç¨‹å®è·µï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·äº¤æµå­¦ä¹ ã€‚
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºuview-proçš„u-dropdownæ‰©å±•è‡ªå·±çš„dropdownç»„ä»¶]]></title>    <link>https://juejin.cn/post/7603393977477120026</link>    <guid>https://juejin.cn/post/7603393977477120026</guid>    <pubDate>2026-02-06T08:33:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603393977477120026" data-draft-id="7603359026711117834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºuview-proçš„u-dropdownæ‰©å±•è‡ªå·±çš„dropdownç»„ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-06T08:33:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LCåŒå­¦47981"/> <meta itemprop="url" content="https://juejin.cn/user/1978776660477991"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºuview-proçš„u-dropdownæ‰©å±•è‡ªå·±çš„dropdownç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1978776660477991/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LCåŒå­¦47981
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T08:33:58.000Z" title="Fri Feb 06 2026 08:33:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäºuview-proçš„u-dropdownæ‰©å±•è‡ªå·±çš„dropdownç»„ä»¶</h2>
<p>uview-proçš„u-dropdownåªèƒ½æ˜¯èœå•ï¼Œä¸”åªèƒ½å‘ä¸‹å±•å¼€ï¼Œå½“å‰ç»„ä»¶é‡‡ç”¨å®ƒçš„æ ¸å¿ƒé€»è¾‘ï¼Œå»é™¤å¤šä½™é€»è¾‘ï¼Œå…¼å®¹ä¸Š/ä¸‹å±•å¼€ï¼Œä»¥åŠè‡ªå®šä¹‰å±•ç¤ºçš„å†…å®¹ï¼Œä¸å†å±€é™äºèœå•å½¢å¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb4d90a49ae14bebbb7d6b200b8c6672~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTEPlkIzlraY0Nzk4MQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770971638&amp;x-signature=Slg5%2FeqbTZZ7uPsnhFE9EZAKwHo%3D" alt="e4043c3d-df06-4a4f-9d61-237d8254cf54.png" loading="lazy"/></p>
<pre><code class="hljs language-Typescript" lang="Typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">ExtractPropTypes</span>, <span class="hljs-title class_">PropType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { baseProps } <span class="hljs-keyword">from</span> <span class="hljs-string">'uview-pro/components/common/props'</span>;

<span class="hljs-comment">/**
 * u-dropdown ä¸‹æ‹‰èœå• Props
 * <span class="hljs-doctag">@description</span> è¯¥ç»„ä»¶ä¸€èˆ¬ç”¨äºå‘ä¸‹å±•å¼€èœå•ï¼ŒåŒæ—¶å¯åˆ‡æ¢å¤šä¸ªé€‰é¡¹å¡çš„åœºæ™¯
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">DropdownProps</span> = {
  ...baseProps,
  <span class="hljs-comment">/** ç‚¹å‡»é®ç½©æ˜¯å¦å…³é—­èœå• */</span>
  <span class="hljs-attr">closeOnClickMask</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>, <span class="hljs-attr">default</span>: <span class="hljs-literal">true</span> },
  <span class="hljs-comment">/** è¿‡æ¸¡æ—¶é—´ */</span>
  <span class="hljs-attr">duration</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-title class_">Number</span>, <span class="hljs-title class_">String</span>] <span class="hljs-keyword">as</span> <span class="hljs-title class_">PropType</span>&lt;<span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>&gt;, <span class="hljs-attr">default</span>: <span class="hljs-number">300</span> },
  <span class="hljs-comment">/** ä¸‹æ‹‰å‡ºæ¥çš„å†…å®¹éƒ¨åˆ†çš„åœ†è§’å€¼ */</span>
  <span class="hljs-attr">borderRadius</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-title class_">Number</span>, <span class="hljs-title class_">String</span>] <span class="hljs-keyword">as</span> <span class="hljs-title class_">PropType</span>&lt;<span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>&gt;, <span class="hljs-attr">default</span>: <span class="hljs-number">20</span> },
  <span class="hljs-comment">/** å±•å¼€æ–¹å‘ down/up */</span>
  <span class="hljs-attr">direction</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">PropType</span>&lt;<span class="hljs-string">'down'</span> | <span class="hljs-string">'up'</span>&gt;, <span class="hljs-attr">default</span>: <span class="hljs-string">'up'</span> },
  <span class="hljs-comment">/** å¼¹å‡ºå±‚æœ€å¤§é«˜åº¦ */</span>
  <span class="hljs-attr">maxHeight</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">PropType</span>&lt;<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">number</span>}</span>rpx`</span> | <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">number</span>}</span>vh`</span>&gt;, <span class="hljs-attr">default</span>: <span class="hljs-string">'80vh'</span> },
  <span class="hljs-comment">/** å¼¹å‡ºå±‚æœ€å°é«˜åº¦ */</span>
  <span class="hljs-attr">minHeight</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">PropType</span>&lt;<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">number</span>}</span>rpx`</span> | <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">number</span>}</span>vh`</span>&gt;, <span class="hljs-attr">default</span>: <span class="hljs-string">'0rpx'</span> },
  <span class="hljs-comment">/** æ˜¯å¦éšè—å…³é—­æŒ‰é’® */</span>
  <span class="hljs-attr">hiddenClose</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>, <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span> },
  <span class="hljs-comment">/** å¼¹å‡ºå±‚æ ‡é¢˜ */</span>
  <span class="hljs-attr">title</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>, <span class="hljs-attr">default</span>: <span class="hljs-string">''</span> }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">DropdownProps</span> = <span class="hljs-title class_">ExtractPropTypes</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">DropdownProps</span>&gt;;

</code></pre>
<pre><code class="hljs language-VUE" lang="VUE">&lt;template&gt;
  &lt;view class="u-dropdown" :style="$u.toStyle(styles, customStyle)" :class="customClass"&gt;
    &lt;view class="u-dropdown__menu"&gt;
      &lt;slot&gt;&lt;/slot&gt;
    &lt;/view&gt;
    &lt;view
      class="u-dropdown__content"
      :style="[
        contentStyle,
        {
          transition: `opacity ${Number(duration) / 1000}s linear`,
          [currentDirection === 'down' ? 'top' : 'bottom']: menuHeight + 'px',
          height: contentHeight + 'px'
        }
      ]"
      @tap="maskClick"
      @touchmove.stop.prevent&gt;
      &lt;view @tap.stop.prevent class="u-dropdown__content__popup" :style="[popupStyle]"&gt;
        &lt;slot name="close" v-if="!hiddenClose"&gt;
          &lt;view class="u-dropdown__content__popup__close" @click="close"&gt;
            &lt;u-icon name="close" size="48" custom-prefix="custom-icon" /&gt;
          &lt;/view&gt;
        &lt;/slot&gt;

        &lt;slot name="header"&gt;
          &lt;view class="u-dropdown__content__popup__header" v-if="title"&gt; {{ title }} &lt;/view&gt;
        &lt;/slot&gt;

        &lt;view class="u-dropdown__content__popup__body"&gt;
          &lt;scroll-view scroll-y class="u-dropdown__content__popup__scroll-view"&gt;
            &lt;slot name="content"&gt;&lt;/slot&gt;
          &lt;/scroll-view&gt;
        &lt;/view&gt;
        &lt;view class="u-dropdown__content__popup__footer"&gt;
          &lt;slot name="footer"&gt;&lt;/slot&gt;
        &lt;/view&gt;
      &lt;/view&gt;
      &lt;view class="u-dropdown__content__mask"&gt;&lt;/view&gt;
    &lt;/view&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;script lang="ts"&gt;
  export default {
    name: 'hj-dropdown',
    options: {
      addGlobalClass: true,
      // #ifndef MP-TOUTIAO
      virtualHost: true,
      // #endif
      styleIsolation: 'shared'
    }
  };
&lt;/script&gt;

&lt;script setup lang="ts"&gt;
  import { ref, computed, onMounted, getCurrentInstance, watch, type CSSProperties } from 'vue';
  import { $u } from 'uview-pro';
  import { DropdownProps } from './types';

  /**
   * dropdown ä¸‹æ‹‰èœå•
   * @description è¯¥ç»„ä»¶ä¸€èˆ¬ç”¨äºå‘ä¸‹å±•å¼€èœå•ï¼ŒåŒæ—¶å¯åˆ‡æ¢å¤šä¸ªé€‰é¡¹å¡çš„åœºæ™¯
   * @tutorial https://uviewpro.cn/zh/components/dropdown.html
   * @property {Boolean} close-on-click-mask ç‚¹å‡»é®ç½©æ˜¯å¦å…³é—­èœå•ï¼ˆé»˜è®¤trueï¼‰
   * @property {String | Number} duration é€‰é¡¹å¡å±•å¼€å’Œæ”¶èµ·çš„è¿‡æ¸¡æ—¶é—´ï¼Œå•ä½msï¼ˆé»˜è®¤300ï¼‰
   * @property {String | Number} border-radius èœå•å±•å¼€å†…å®¹ä¸‹æ–¹çš„åœ†è§’å€¼ï¼Œå•ä½ä»»æ„ï¼ˆé»˜è®¤20ï¼‰
   * @property {String} direction å±•å¼€æ–¹å‘ down/upï¼ˆé»˜è®¤upï¼‰
   * @property {String} max-height å¼¹å‡ºå±‚æœ€å¤§é«˜åº¦ï¼ˆé»˜è®¤80vhï¼‰
   * @property {String} min-height å¼¹å‡ºå±‚æœ€å°é«˜åº¦
   * @property {Boolean} hidden-close æ˜¯å¦éšè—å…³é—­æŒ‰é’®ï¼ˆé»˜è®¤falseï¼‰
   * @property {String} title å¼¹å‡ºå±‚æ ‡é¢˜
   * @property {Boolean} show æ˜¯å¦æ˜¾ç¤ºä¸‹æ‹‰èœå•ï¼ˆé»˜è®¤falseï¼‰
   * @event {Function} open ä¸‹æ‹‰èœå•è¢«æ‰“å¼€æ—¶è§¦å‘
   * @event {Function} close ä¸‹æ‹‰èœå•è¢«å…³é—­æ—¶è§¦å‘
   * @example &lt;hj-dropdown&gt;&lt;/hj-dropdown&gt;
   */

  const props = defineProps(DropdownProps);
  const emit = defineEmits(['open', 'close']);

  // å±•å¼€çŠ¶æ€
  const active = ref(false);
  // å¤–å±‚å†…å®¹æ ·å¼
  const contentStyle = ref&lt;CSSProperties&gt;({
    zIndex: -1,
    opacity: 0
  });
  // ä¸‹æ‹‰å†…å®¹é«˜åº¦
  const contentHeight = ref&lt;number&gt;(0);
  // èœå•å®é™…é«˜åº¦
  const menuHeight = ref&lt;number&gt;(0);
  // å½“å‰å±•å¼€æ–¹å‘
  const currentDirection = ref&lt;'down' | 'up'&gt;(props.direction);
  // å­ç»„ä»¶å¼•ç”¨
  const instance = getCurrentInstance();

  const vShow = defineModel('show', {
    type: Boolean,
    default: false
  });

  watch(vShow, val =&gt; {
    if (val === active.value) return;
    if (val) {
      open();
    } else {
      close();
    }
  });

  // ç›‘å¬æ–¹å‘å˜åŒ–
  watch(
    () =&gt; props.direction,
    val =&gt; {
      currentDirection.value = val;
    }
  );

  // å…¼å®¹å¤´æ¡æ ·å¼
  const styles = computed&lt;CSSProperties&gt;(() =&gt; {
    const style: CSSProperties = {};
    // #ifdef MP-TOUTIAO
    style.width = '100vw';
    // #endif
    return style;
  });

  // ä¸‹æ‹‰å‡ºæ¥éƒ¨åˆ†çš„æ ·å¼
  const popupStyle = computed&lt;CSSProperties&gt;(() =&gt; {
    const style: CSSProperties = {};
    const isDown = currentDirection.value === 'down';
    const hiddenTransformLate = isDown ? '-100%' : '100%';

    style.maxHeight = props.maxHeight;
    style.minHeight = props.minHeight;
    style.transform = `translateY(${active.value ? 0 : hiddenTransformLate})`;
    style[isDown ? 'top' : 'bottom'] = 0;
    // è¿›è¡ŒYè½´ä½ç§»ï¼Œå±•å¼€çŠ¶æ€æ—¶ï¼Œæ¢å¤åŸä½ã€‚æ”¶èµ·çŠ¶æ€æ—¶ï¼Œå¾€ä¸Šä½ç§»100%ï¼ˆæˆ–ä¸‹ï¼‰ï¼Œè¿›è¡Œéšè—
    style.transitionDuration = `${Number(props.duration) / 1000}s`;

    if (isDown) {
      style.borderRadius = `0 0 ${$u.addUnit(props.borderRadius)} ${$u.addUnit(props.borderRadius)}`;
    } else {
      style.borderRadius = `${$u.addUnit(props.borderRadius)} ${$u.addUnit(props.borderRadius)} 0 0`;
    }
    return style;
  });

  // ç”Ÿå‘½å‘¨æœŸ
  onMounted(() =&gt; {
    getContentHeight();
  });

  /**
   * æ‰“å¼€ä¸‹æ‹‰èœå•
   * @param direction å±•å¼€æ–¹å‘ 'down' | 'up'
   */
  function open(direction?: 'down' | 'up') {
    currentDirection.value = direction || props.direction;

    // é‡æ–°è®¡ç®—é«˜åº¦ï¼Œå› ä¸ºæ–¹å‘å¯èƒ½æ”¹å˜
    getContentHeight();

    // è®¾ç½®å±•å¼€çŠ¶æ€
    active.value = true;

    // å±•å¼€æ—¶ï¼Œè®¾ç½®ä¸‹æ‹‰å†…å®¹çš„æ ·å¼
    contentStyle.value = {
      zIndex: 11,
      opacity: 1
    };
    vShow.value = true;
    emit('open');
  }

  /**
   * å…³é—­ä¸‹æ‹‰èœå•
   */
  function close() {
    // ä¸‹æ‹‰å†…å®¹çš„æ ·å¼è¿›è¡Œè°ƒæ•´ï¼Œä¸é€æ˜åº¦è®¾ç½®ä¸º0
    active.value = false;
    contentStyle.value = {
      ...contentStyle.value,
      opacity: 0
    };

    // ç­‰å¾…è¿‡æ¸¡åŠ¨ç”»ç»“æŸåéšè— z-index
    vShow.value = false;
    setTimeout(() =&gt; {
      contentStyle.value = {
        zIndex: -1,
        opacity: 0
      };
      emit('close');
    }, Number(props.duration));
  }

  /**
   * ç‚¹å‡»é®ç½©
   */
  function maskClick() {
    if (!props.closeOnClickMask) return;
    close();
  }

  /**
   * è·å–ä¸‹æ‹‰èœå•å†…å®¹çš„é«˜åº¦
   * @description
   * dropdownç»„ä»¶æ˜¯ç›¸å¯¹å®šä½çš„ï¼Œä¸‹æ‹‰å†…å®¹å¿…é¡»ç»™å®šé«˜åº¦ï¼Œ
   * æ‰èƒ½è®©é®ç½©å æ»¡èœå•ä»¥ä¸‹ç›´åˆ°å±å¹•åº•éƒ¨çš„é«˜åº¦ã€‚
   */
  function getContentHeight() {
    const windowHeight = $u.sys().windowHeight;

    $u.getRect('.u-dropdown__menu', instance).then((res: any) =&gt; {
      // è·å–èœå•å®é™…é«˜åº¦
      menuHeight.value = res.height;

      /**
       * å°ºå¯¸è®¡ç®—è¯´æ˜ï¼š
       * åœ¨H5ç«¯ï¼Œuniappè·å–å°ºå¯¸å­˜åœ¨å·²çŸ¥é—®é¢˜ï¼š
       * å…ƒç´ å°ºå¯¸çš„topå€¼ä¸ºå¯¼èˆªæ åº•éƒ¨åˆ°å…ƒç´ çš„ä¸Šè¾¹æ²¿çš„è·ç¦»
       * ä½†å…ƒç´ çš„bottomå€¼å´æ˜¯å¯¼èˆªæ é¡¶éƒ¨åˆ°å…ƒç´ åº•éƒ¨çš„è·ç¦»
       * ä¸ºé¿å…é¡µé¢æ»šåŠ¨ï¼Œæ­¤å¤„å–èœå•æ çš„bottomå€¼è¿›è¡Œè®¡ç®—
       */
      if (currentDirection.value === 'up') {
        contentHeight.value = res.top;
      } else {
        contentHeight.value = windowHeight - res.bottom;
      }
    });
  }

  // æš´éœ²æ–¹æ³•
  defineExpose({
    close,
    open
  });
&lt;/script&gt;

&lt;style scoped lang="scss"&gt;
  @import 'uview-pro/libs/css/style.components';

  .u-dropdown {
    flex: 1;
    width: 100%;
    position: relative;
    background-color: #fff;

    &amp;__content {
      position: absolute;
      z-index: 8;
      width: 100%;
      left: 0;
      overflow: hidden;

      &amp;__mask {
        position: absolute;
        z-index: 9;
        background: rgba(0, 0, 0, 0.3);
        width: 100%;
        left: 0;
        top: 0;
        bottom: 0;
      }

      &amp;__popup {
        position: absolute;
        width: 100%;
        z-index: 10;
        transition: all 0.3s;
        transform: translate3D(0, -100%, 0);
        overflow: hidden;
        background-color: var(--gray-2);

        &amp;__close {
          width: 40rpx;
          height: 40rpx;
          display: flex;
          align-items: center;
          justify-content: center;
          position: absolute;
          right: 24rpx;
          top: 30rpx;
          z-index: 9;
        }

        &amp;__header {
          display: flex;
          color: var(--title-1);
          font-size: var(--ft-32);
          font-weight: 500;
          line-height: 44rpx;
          padding: 30rpx 24rpx;
        }

        &amp;__body {
          flex: 1;
          overflow: hidden;
          display: flex;
        }

        &amp;__scroll-view {
          flex: 1;
        }

        &amp;__footer {
          display: flex;
        }
      }
    }
  }
&lt;/style&gt;

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptçš„æ•°æ®ç±»å‹ â€”â€” Booleanç±»å‹]]></title>    <link>https://juejin.cn/post/7603309951227297842</link>    <guid>https://juejin.cn/post/7603309951227297842</guid>    <pubDate>2026-02-06T08:35:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603309951227297842" data-draft-id="7603185231801335834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptçš„æ•°æ®ç±»å‹ â€”â€” Booleanç±»å‹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-06T08:35:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ©˜æœµ"/> <meta itemprop="url" content="https://juejin.cn/user/1099989273025416"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptçš„æ•°æ®ç±»å‹ â€”â€” Booleanç±»å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1099989273025416/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ©˜æœµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T08:35:07.000Z" title="Fri Feb 06 2026 08:35:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>Boolean</code>ï¼ˆå¸ƒå°”å€¼ï¼‰ç±»å‹æœ‰ä¸¤ä¸ªå­—é¢å€¼ï¼š<code>true</code>å’Œ<code>false</code>ã€‚ è¿™ä¸¤ä¸ªå¸ƒå°”å€¼ä¸åŒäºæ•°å€¼ï¼Œå› æ­¤ <code>true</code> ä¸ç­‰äº 1ï¼Œ<code>false</code> ä¸ç­‰äº 0ã€‚</p>
<p>è™½ç„¶å¸ƒå°”å€¼åªæœ‰ä¸¤ä¸ªï¼Œä½†æ‰€æœ‰å…¶ä»–ç±»å‹çš„å€¼éƒ½æœ‰ç›¸åº”å¸ƒå°”å€¼çš„ç­‰ä»·å½¢å¼ï¼Œå¯ä»¥è°ƒç”¨ç‰¹å®šçš„<code>Boolean()</code> è½¬å‹å‡½æ•°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">message</span> = <span class="hljs-string">"Hello world!"</span><span class="hljs-comment">; </span>
let <span class="hljs-attr">messageAsBoolean</span> = Boolean(message)<span class="hljs-comment">;</span>
</code></pre>
<p><code>Boolean()</code>è½¬å‹å‡½æ•°å¯ä»¥åœ¨ä»»æ„ç±»å‹çš„æ•°æ®ä¸Šè°ƒç”¨ï¼Œè€Œä¸”å§‹ç»ˆè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸åŒç±»å‹ä¸å¸ƒå°”å€¼ä¹‹é—´çš„è½¬æ¢è§„åˆ™ï¼š</p>



































<table><thead><tr><th>æ•°æ®ç±»å‹</th><th>Truthyï¼ˆçœŸå€¼ï¼‰</th><th>Falsyï¼ˆå‡å€¼ï¼‰</th></tr></thead><tbody><tr><td>Boolean</td><td>true</td><td>false</td></tr><tr><td>String</td><td>éç©ºå­—ç¬¦ä¸²</td><td>""ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰</td></tr><tr><td>Number</td><td>éé›¶æ•°å€¼ï¼ˆåŒ…æ‹¬æ— ç©·å€¼ï¼‰</td><td>0ã€-0ã€NaN</td></tr><tr><td>Object</td><td>ä»»æ„å¯¹è±¡ï¼ŒåŒ…æ‹¬ç©ºæ•°ç»„ <code>[]</code>å’Œç©ºå¯¹è±¡ <code>{}</code></td><td>null</td></tr><tr><td>Undefined</td><td>N/Aï¼ˆä¸å­˜åœ¨ï¼‰</td><td>undefined</td></tr></tbody></table>
<p><strong>ç›´æ¥èµ‹å€¼</strong>ï¼šæœ€ç›´æ¥çš„æ–¹å¼ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">isActive</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">isLoading</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
</code></pre>
<p><strong>é€šè¿‡è¡¨è¾¾å¼</strong>ï¼šæ¯”è¾ƒæˆ–é€»è¾‘è¿ç®—çš„ç»“æœæ˜¯å¸ƒå°”å€¼ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">isGreater</span> = <span class="hljs-number">5</span> &gt; <span class="hljs-number">3</span><span class="hljs-comment">; // true</span>
let <span class="hljs-attr">isEqual</span> = (<span class="hljs-number">10</span> === <span class="hljs-string">"10"</span>)<span class="hljs-comment">; // false</span>
let <span class="hljs-attr">logicResult</span> = (<span class="hljs-number">5</span> &gt; <span class="hljs-number">3</span>) &amp;&amp; (<span class="hljs-number">4</span> &lt;= <span class="hljs-number">4</span>)<span class="hljs-comment">; // true</span>
</code></pre>
<p><strong>æ˜¾å¼è½¬æ¢</strong>ï¼šä½¿ç”¨ <code>Boolean()</code>å‡½æ•°æˆ–åŒé‡éè¿ç®—ç¬¦ <code>!!</code>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ Boolean() å‡½æ•°</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Boolean</span>(<span class="hljs-string">"Hello"</span>)); <span class="hljs-comment">// true (éç©ºå­—ç¬¦ä¸²æ˜¯ truthy)</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Boolean</span>(<span class="hljs-number">0</span>)); <span class="hljs-comment">// false (0 æ˜¯ falsy)</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Boolean</span>({})); <span class="hljs-comment">// true (ç©ºå¯¹è±¡æ˜¯ truthy)</span>

<span class="hljs-comment">// ä½¿ç”¨ !! è¿ç®—ç¬¦ï¼Œæ•ˆæœç›¸åŒä½†æ›´ç®€æ´</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(!!<span class="hljs-string">"Hello"</span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(!!<span class="hljs-number">0</span>); <span class="hljs-comment">// false</span>
</code></pre>
<p>ä¸å»ºè®®ä½¿ç”¨<code>Boolean</code>æ„é€ å‡½æ•°ï¼ˆé€šè¿‡ <code>new</code>å…³é”®å­—ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºåŸå§‹å¸ƒå°”å€¼</span>
<span class="hljs-keyword">let</span> primitiveTrue = <span class="hljs-literal">true</span>;
<span class="hljs-comment">// åˆ›å»º Boolean å¯¹è±¡</span>
<span class="hljs-keyword">let</span> objectTrue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boolean</span>(<span class="hljs-literal">true</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> primitiveTrue); <span class="hljs-comment">// "boolean"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> objectTrue); <span class="hljs-comment">// "object"</span>

<span class="hljs-comment">// å³ä½¿åŒ…è£…çš„å¯¹è±¡å€¼ä¸º falseï¼Œå…¶æœ¬èº«ä½œä¸ºå¯¹è±¡åœ¨æ¡ä»¶åˆ¤æ–­ä¸­ä»ä¸º true</span>
<span class="hljs-keyword">let</span> objectFalse = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boolean</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">if</span> (objectFalse) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"This will be executed."</span>); <span class="hljs-comment">// è¿™è¡Œä¼šè¢«æ‰§è¡Œ</span>
}
</code></pre>
<p><strong>å¸ƒå°”å€¼çš„åº”ç”¨ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//æ¡ä»¶åˆ¤æ–­ï¼šæ§åˆ¶ä»£ç åˆ†æ”¯ã€‚</span>
<span class="hljs-keyword">let</span> isLoggedIn = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">if</span> (isLoggedIn) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Welcome back!"</span>);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Please log in."</span>);
}

<span class="hljs-comment">//å¾ªç¯æ§åˆ¶ï¼šå†³å®šå¾ªç¯æ˜¯å¦ç»§ç»­æ‰§è¡Œã€‚</span>
<span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
<span class="hljs-keyword">while</span> (count &lt; <span class="hljs-number">5</span>) { <span class="hljs-comment">// æ¡ä»¶ä¸º true æ—¶å¾ªç¯ç»§ç»­</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count);
  count++;
}

<span class="hljs-comment">//å‡½æ•°è¿”å›ï¼šå‡½æ•°å¸¸ç”¨å¸ƒå°”å€¼è¿”å›æ“ä½œç»“æœæˆ–çŠ¶æ€æ£€æŸ¥ã€‚</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isAdult</span>(<span class="hljs-params">age</span>) {
  <span class="hljs-keyword">return</span> age &gt;= <span class="hljs-number">18</span>;
}
<span class="hljs-keyword">let</span> canVote = <span class="hljs-title function_">isAdult</span>(<span class="hljs-number">20</span>); <span class="hljs-comment">// true</span>

<span class="hljs-comment">//æ•°æ®è¿‡æ»¤ï¼šä¾‹å¦‚ï¼Œç»“åˆæ•°ç»„çš„ filteræ–¹æ³•å¿«é€Ÿè¿‡æ»¤å‡ºæœ‰æ•ˆé¡¹ã€‚</span>
<span class="hljs-keyword">const</span> mixedArray = [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-string">"hello"</span>, <span class="hljs-string">""</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">42</span>];
<span class="hljs-keyword">const</span> truthyValues = mixedArray.<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>); <span class="hljs-comment">// [1, "hello", 42]</span>
<span class="hljs-comment">// Boolean å‡½æ•°ä½œä¸ºå›è°ƒï¼Œä¼šè‡ªåŠ¨è¿‡æ»¤æ‰æ‰€æœ‰ falsy å€¼</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OoderA2UI BridgeCode æ·±åº¦è§£æï¼šä»è®¾è®¡åŸç†åˆ° Trae Solo Skill å®è·µ]]></title>    <link>https://juejin.cn/post/7602807243705237567</link>    <guid>https://juejin.cn/post/7602807243705237567</guid>    <pubDate>2026-02-05T00:38:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602807243705237567" data-draft-id="7602841282802729001" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OoderA2UI BridgeCode æ·±åº¦è§£æï¼šä»è®¾è®¡åŸç†åˆ° Trae Solo Skill å®è·µ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-05T00:38:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OoderA2UI BridgeCode æ·±åº¦è§£æï¼šä»è®¾è®¡åŸç†åˆ° Trae Solo Skill å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:38:33.000Z" title="Thu Feb 05 2026 00:38:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    29
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‘˜è¦</h2>
<p>æœ¬æ–‡æ·±å…¥è§£æ ooder æ¡†æ¶çš„æ ¸å¿ƒ BridgeCode æœºåˆ¶ï¼Œä»è®¾è®¡åŸç†ã€ç”Ÿæˆç¼–è¯‘æµç¨‹ï¼Œåˆ°åŸºäºæ­¤æœºåˆ¶çš„åˆ†å±‚ SKILLS è®¾è®¡ï¼Œæœ€åå±•ç¤ºåœ¨ Trae Solo ç¯å¢ƒä¸­çš„ Skill æ„å»ºå®è·µã€‚é€šè¿‡æºç åˆ†æå’Œå®æˆ˜æ¡ˆä¾‹ï¼Œæ­ç¤º ooder å¦‚ä½•é€šè¿‡å…ƒæ•°æ®é©±åŠ¨çš„ä»£ç ç”Ÿæˆå®ç°é«˜æ•ˆçš„ A2UI ç»„ä»¶å¼€å‘ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€BridgeCode è®¾è®¡åŸç†</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒè®¾è®¡ç†å¿µ</h3>
<p>BridgeCode æ˜¯ ooder æ¡†æ¶ä¸­è¿æ¥å…ƒæ•°æ®é…ç½®ä¸è¿è¡Œæ—¶ç»„ä»¶çš„æ¡¥æ¢ï¼Œå…¶æ ¸å¿ƒè®¾è®¡ç†å¿µæ˜¯<strong>å…ƒæ•°æ®é©±åŠ¨</strong>ï¼ˆMetadata-Drivenï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">å…ƒæ•°æ®é…ç½®ï¼ˆ<span class="hljs-title class_">JSON</span>/æ³¨è§£ï¼‰
    â†“
<span class="hljs-title class_">BridgeCode</span> ç”Ÿæˆå™¨
    â†“
<span class="hljs-title class_">Java</span> æºä»£ç 
    â†“
åŠ¨æ€ç¼–è¯‘
    â†“
è¿è¡Œæ—¶ç»„ä»¶
</code></pre>
<p><strong>è®¾è®¡ç›®æ ‡</strong>ï¼š</p>
<ol>
<li><strong>è§£è€¦æ€§</strong>ï¼šå°†é…ç½®ä¸å®ç°åˆ†ç¦»ï¼Œé…ç½®é€šè¿‡å£°æ˜å¼æ–¹å¼å®šä¹‰</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ”¯æŒå¤šç§ç»„ä»¶ç±»å‹å’Œè§†å›¾æ¨¡å¼</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šé€šè¿‡ç¼–è¯‘æœŸæ£€æŸ¥ç¡®ä¿é…ç½®çš„æ­£ç¡®æ€§</li>
<li><strong>è¿è¡Œæ—¶ç»‘å®š</strong>ï¼šæ”¯æŒåŠ¨æ€åŠ è½½å’Œçƒ­æ›´æ–°</li>
</ol>
<h3 data-id="heading-3">1.2 æ¶æ„å±‚æ¬¡</h3>
<p>BridgeCode ç³»ç»Ÿé‡‡ç”¨ä¸‰å±‚æ¶æ„è®¾è®¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å…ƒæ•°æ®å±‚ï¼ˆ<span class="hljs-title class_">Metadata</span> <span class="hljs-title class_">Layer</span>ï¼‰         â”‚
â”‚  - <span class="hljs-title class_">CustomViewMeta</span>                        â”‚
â”‚  - <span class="hljs-title class_">CustomDataMeta</span>                        â”‚
â”‚  - <span class="hljs-title class_">MethodConfig</span>                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ç”Ÿæˆå™¨å±‚ï¼ˆ<span class="hljs-title class_">Generator</span> <span class="hljs-title class_">Layer</span>ï¼‰          â”‚
â”‚  - <span class="hljs-title class_">GenCustomViewJava</span>                     â”‚
â”‚  - <span class="hljs-title class_">GenRepositoryViewJava</span>                  â”‚
â”‚  - <span class="hljs-title class_">GenAggCustomViewJava</span>                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       è¿è¡Œæ—¶å±‚ï¼ˆ<span class="hljs-title class_">Runtime</span> <span class="hljs-title class_">Layer</span>ï¼‰           â”‚
â”‚  - <span class="hljs-title class_">UIComponent</span>                          â”‚
â”‚  - <span class="hljs-title class_">ModuleUIComponent</span>                     â”‚
â”‚  - <span class="hljs-title class_">AggRootBuild</span>                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-4">1.3 æ ¸å¿ƒç±»è®¾è®¡</h3>
<h4 data-id="heading-5">1.3.1 AggRootBuild - èšåˆæ ¹æ„å»ºå™¨</h4>
<p>AggRootBuild æ˜¯ BridgeCode ç”Ÿæˆæµç¨‹çš„æ ¸å¿ƒåè°ƒç±»ï¼Œä½äº <code>net.ooder.engine.codegen.java.AggRootBuild</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AggRootBuild</span> {
    
    <span class="hljs-keyword">private</span> GenCustomViewJava viewTask;
    <span class="hljs-keyword">private</span> GenRepositoryViewJava voRepositoryTask;
    <span class="hljs-keyword">private</span> GenRepositoryViewJava serviceRepositoryTask;
    <span class="hljs-keyword">private</span> GenAggCustomViewJava rootTask;
    <span class="hljs-keyword">private</span> GenAggCustomJava genAggCustomJava;
    
    <span class="hljs-keyword">public</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-comment">// 1. åˆ›å»ºå­èŠ‚ç‚¹</span>
        CustomViewMeta = genChildJava();
        
        <span class="hljs-comment">// 2. åˆ›å»ºè§†å›¾å±‚</span>
        javaViewSource = buildView();
        
        <span class="hljs-comment">// 3. åˆ›å»ºèµ„æºå±‚æ¥å£</span>
        repositorySource = buildRepositoryView(<span class="hljs-literal">true</span>);
        
        <span class="hljs-comment">// 4. é¢„ç¼–è¯‘ä¸€æ¬¡</span>
        javaGen.dynCompile(getModuleJavaSrc());
        
        <span class="hljs-keyword">return</span> aggServiceRootBean;
    }
}
</code></pre>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>ä»»åŠ¡ç¼–æ’</strong>ï¼šåè°ƒå¤šä¸ªç”Ÿæˆä»»åŠ¡çš„æ‰§è¡Œé¡ºåº</li>
<li><strong>ä¾èµ–ç®¡ç†</strong>ï¼šå¤„ç†ç”Ÿæˆä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»</li>
<li><strong>å¢é‡æ„å»º</strong>ï¼šæ”¯æŒåªç”Ÿæˆå˜æ›´çš„éƒ¨åˆ†</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œå›æ»šæœºåˆ¶</li>
</ul>
<h4 data-id="heading-6">1.3.2 GenJavaTask - ç”Ÿæˆä»»åŠ¡åŸºç±»</h4>
<p>æ‰€æœ‰ä»£ç ç”Ÿæˆå™¨éƒ½ç»§æ‰¿è‡ª GenJavaTaskï¼Œæä¾›ç»Ÿä¸€çš„ç”Ÿæˆæ¡†æ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenJavaTask</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;List&lt;JavaGenSource&gt;&gt; {
    
    <span class="hljs-keyword">protected</span> JavaGenSource javaGen;
    <span class="hljs-keyword">protected</span> CustomViewMeta viewMeta;
    <span class="hljs-keyword">protected</span> String euClassName;
    <span class="hljs-keyword">protected</span> Chrome chrome;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException;
    
    <span class="hljs-keyword">protected</span> JavaGenSource <span class="hljs-title function_">createJavaSource</span><span class="hljs-params">(String className, String content)</span> {
        <span class="hljs-type">JavaGenSource</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JavaGenSource</span>();
        source.setClassName(className);
        source.setContent(content);
        source.setPackage(viewMeta.getPackageName());
        <span class="hljs-keyword">return</span> source;
    }
}
</code></pre>
<p><strong>è®¾è®¡ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€æ¥å£</strong>ï¼šæ‰€æœ‰ç”Ÿæˆå™¨å®ç°ç›¸åŒçš„æ¥å£</li>
<li><strong>å¯ç»„åˆæ€§</strong>ï¼šæ”¯æŒç”Ÿæˆå™¨çš„ç»„åˆå’Œå¤ç”¨</li>
<li><strong>é”™è¯¯éš”ç¦»</strong>ï¼šæ¯ä¸ªç”Ÿæˆå™¨ç‹¬ç«‹å¤„ç†é”™è¯¯</li>
<li><strong>å¯æµ‹è¯•æ€§</strong>ï¼šæ¯ä¸ªç”Ÿæˆå™¨å¯ä»¥ç‹¬ç«‹æµ‹è¯•</li>
</ul>
<h4 data-id="heading-7">1.3.3 D2CGenerator - è®¾è®¡åˆ°ä»£ç ç”Ÿæˆå™¨</h4>
<p>D2CGenerator æ˜¯æ ¸å¿ƒçš„ä»£ç ç”Ÿæˆå¼•æ“ï¼Œä½¿ç”¨ Freemarker æ¨¡æ¿å¼•æ“ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">D2CGenerator</span> {
    
    <span class="hljs-keyword">private</span> Configuration freemarkerConfig;
    <span class="hljs-keyword">private</span> TemplateManager templateManager;
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generate</span><span class="hljs-params">(String templateName, Map&lt;String, Object&gt; dataModel)</span> 
            <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Template</span> <span class="hljs-variable">template</span> <span class="hljs-operator">=</span> freemarkerConfig.getTemplate(templateName);
            <span class="hljs-type">StringWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringWriter</span>();
            template.process(dataModel, writer);
            <span class="hljs-keyword">return</span> writer.toString();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"ä»£ç ç”Ÿæˆå¤±è´¥: "</span> + e.getMessage(), e);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dynCompile</span><span class="hljs-params">(List&lt;JavaGenSource&gt; sources)</span> <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-type">JavaCompiler</span> <span class="hljs-variable">compiler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JavaCompiler</span>();
        compiler.compile(sources);
    }
}
</code></pre>
<p><strong>æŠ€æœ¯æ ˆ</strong>ï¼š</p>
<ul>
<li><strong>æ¨¡æ¿å¼•æ“</strong>ï¼šFreemarker 2.3.x</li>
<li><strong>ç¼–è¯‘å™¨</strong>ï¼šJava Compiler API</li>
<li><strong>ç±»åŠ è½½</strong>ï¼šè‡ªå®šä¹‰ ClassLoader</li>
<li><strong>æ‰“åŒ…</strong>ï¼šJAR æ–‡ä»¶ç”Ÿæˆ</li>
</ul>
<h2 data-id="heading-8">äºŒã€BridgeCode ç”Ÿæˆç¼–è¯‘åŸç†</h2>
<h3 data-id="heading-9">2.1 å®Œæ•´ç”Ÿæˆæµç¨‹</h3>
<p>BridgeCode çš„ç”Ÿæˆç¼–è¯‘æµç¨‹åˆ†ä¸ºäº”ä¸ªé˜¶æ®µï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">é˜¶æ®µ</span> <span class="hljs-attr">1:</span> <span class="hljs-string">å…ƒæ•°æ®è§£æ</span>
    <span class="hljs-string">â†“</span>
<span class="hljs-string">é˜¶æ®µ</span> <span class="hljs-attr">2:</span> <span class="hljs-string">ä»£ç ç”Ÿæˆ</span>
    <span class="hljs-string">â†“</span>
<span class="hljs-string">é˜¶æ®µ</span> <span class="hljs-attr">3:</span> <span class="hljs-string">æºç ç»„è£…</span>
    <span class="hljs-string">â†“</span>
<span class="hljs-string">é˜¶æ®µ</span> <span class="hljs-attr">4:</span> <span class="hljs-string">åŠ¨æ€ç¼–è¯‘</span>
    <span class="hljs-string">â†“</span>
<span class="hljs-string">é˜¶æ®µ</span> <span class="hljs-attr">5:</span> <span class="hljs-string">è¿è¡Œæ—¶ç»‘å®š</span>
</code></pre>
<h3 data-id="heading-10">2.2 é˜¶æ®µè¯¦è§£</h3>
<h4 data-id="heading-11">2.2.1 é˜¶æ®µ 1ï¼šå…ƒæ•°æ®è§£æ</h4>
<p><strong>è¾“å…¥</strong>ï¼š</p>
<ul>
<li>JSON é…ç½®æ–‡ä»¶</li>
<li>Java æ³¨è§£é…ç½®</li>
<li>æ•°æ®åº“å…ƒæ•°æ®</li>
</ul>
<p><strong>å¤„ç†æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetadataParser</span> {
    
    <span class="hljs-keyword">public</span> MethodConfig <span class="hljs-title function_">parseFromJson</span><span class="hljs-params">(String jsonConfig)</span> {
        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> JSON.parseObject(jsonConfig);
        <span class="hljs-type">MethodConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MethodConfig</span>();
        
        <span class="hljs-comment">// è§£æè§†å›¾å…ƒæ•°æ®</span>
        config.setView(parseViewMeta(json.getJSONObject(<span class="hljs-string">"view"</span>)));
        
        <span class="hljs-comment">// è§£ææ•°æ®å…ƒæ•°æ®</span>
        config.setDataBean(parseDataMeta(json.getJSONObject(<span class="hljs-string">"data"</span>)));
        
        <span class="hljs-comment">// è§£ææ–¹æ³•é…ç½®</span>
        config.setMethodName(json.getString(<span class="hljs-string">"methodName"</span>));
        config.setUrl(json.getString(<span class="hljs-string">"url"</span>));
        
        <span class="hljs-keyword">return</span> config;
    }
    
    <span class="hljs-keyword">public</span> MethodConfig <span class="hljs-title function_">parseFromAnnotation</span><span class="hljs-params">(Class&lt;?&gt; bridgeClass)</span> {
        <span class="hljs-type">MethodConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MethodConfig</span>();
        
        <span class="hljs-comment">// è§£æ @CustomClass æ³¨è§£</span>
        <span class="hljs-type">CustomClass</span> <span class="hljs-variable">classAnnotation</span> <span class="hljs-operator">=</span> bridgeClass.getAnnotation(CustomClass.class);
        config.setCaption(classAnnotation.caption());
        
        <span class="hljs-comment">// è§£ææ–¹æ³•æ³¨è§£</span>
        <span class="hljs-keyword">for</span> (Method method : bridgeClass.getMethods()) {
            <span class="hljs-keyword">if</span> (method.isAnnotationPresent(CustomMenuItem.class)) {
                config.addMenuItem(parseMenuItem(method));
            }
            <span class="hljs-keyword">if</span> (method.isAnnotationPresent(CustomGridEvent.class)) {
                config.addEvent(parseGridEvent(method));
            }
        }
        
        <span class="hljs-keyword">return</span> config;
    }
}
</code></pre>
<p><strong>éªŒè¯æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>ç±»å‹æ£€æŸ¥ï¼šç¡®ä¿å­—æ®µç±»å‹åŒ¹é…</li>
<li>å¿…å¡«éªŒè¯ï¼šæ£€æŸ¥å¿…å¡«å­—æ®µ</li>
<li>å¼•ç”¨éªŒè¯ï¼šéªŒè¯å¼•ç”¨çš„å®ä½“å­˜åœ¨</li>
<li>æ ¼å¼éªŒè¯ï¼šæ£€æŸ¥ URLã€æ­£åˆ™è¡¨è¾¾å¼ç­‰æ ¼å¼</li>
</ul>
<h4 data-id="heading-12">2.2.2 é˜¶æ®µ 2ï¼šä»£ç ç”Ÿæˆ</h4>
<p><strong>ç”Ÿæˆå™¨å±‚æ¬¡</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">GenCustomViewJava (è§†å›¾å±‚ç”Ÿæˆå™¨)
    â”œâ”€â”€ GenLayoutChildModule (å¸ƒå±€ç”Ÿæˆ)
    â”œâ”€â”€ GenTabsChildModule (æ ‡ç­¾é¡µç”Ÿæˆ)
    â””â”€â”€ GenFormChildModule (è¡¨å•ç”Ÿæˆ)

GenRepositoryViewJava (ä»“å‚¨å±‚ç”Ÿæˆå™¨)
    â”œâ”€â”€ GenEntityJava (å®ä½“ç”Ÿæˆ)
    â”œâ”€â”€ GenEntityServiceJava (æœåŠ¡ç”Ÿæˆ)
    â””â”€â”€ GenTableJava (è¡¨ç”Ÿæˆ)

GenAggCustomViewJava (èšåˆå±‚ç”Ÿæˆå™¨)
    â”œâ”€â”€ GenAggRootJava (èšåˆæ ¹ç”Ÿæˆ)
    â”œâ”€â”€ GenAggMenuJava (èœå•ç”Ÿæˆ)
    â””â”€â”€ GenAggAPIJava (APIç”Ÿæˆ)
</code></pre>
<p><strong>ç”Ÿæˆç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenCustomViewJava</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GenJavaTask</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException {
        List&lt;JavaGenSource&gt; sources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-comment">// 1. ç”Ÿæˆè§†å›¾ç±»</span>
        sources.add(generateViewClass());
        
        <span class="hljs-comment">// 2. ç”Ÿæˆå­—æ®µé…ç½®</span>
        sources.add(generateFieldConfigs());
        
        <span class="hljs-comment">// 3. ç”Ÿæˆäº‹ä»¶å¤„ç†å™¨</span>
        sources.add(generateEventHandlers());
        
        <span class="hljs-keyword">return</span> sources;
    }
    
    <span class="hljs-keyword">private</span> JavaGenSource <span class="hljs-title function_">generateViewClass</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException {
        Map&lt;String, Object&gt; dataModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        dataModel.put(<span class="hljs-string">"className"</span>, viewMeta.getClassName());
        dataModel.put(<span class="hljs-string">"packageName"</span>, viewMeta.getPackageName());
        dataModel.put(<span class="hljs-string">"fields"</span>, viewMeta.getFields());
        
        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> d2cGenerator.generate(<span class="hljs-string">"view.ftl"</span>, dataModel);
        <span class="hljs-keyword">return</span> createJavaSource(viewMeta.getClassName(), content);
    }
}
</code></pre>
<p><strong>æ¨¡æ¿ç¤ºä¾‹</strong>ï¼ˆFreemarkerï¼‰ï¼š</p>
<pre><code class="hljs language-ftl" lang="ftl">package ${packageName};

import net.ooder.engine.ub.component.*;
import net.ooder.engine.ub.annotation.*;

&lt;#list fields as field&gt;
import ${field.type};
&lt;/#list&gt;

/**
 * ${viewMeta.caption}
 * è‡ªåŠ¨ç”Ÿæˆçš„è§†å›¾ç±»ï¼Œè¯·å‹¿æ‰‹åŠ¨ä¿®æ”¹
 */
@CustomView
public class ${className} extends UIComponent {
    
    &lt;#list fields as field&gt;
    private ${field.type} ${field.name};
    &lt;/#list&gt;
    
    public ${className}() {
        super();
        // åˆå§‹åŒ–ç»„ä»¶
    }
}
</code></pre>
<h4 data-id="heading-13">2.2.3 é˜¶æ®µ 3ï¼šæºç ç»„è£…</h4>
<p><strong>ç»„è£…ç­–ç•¥</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SourceAssembler</span> {
    
    <span class="hljs-keyword">public</span> JavaSrcMeta <span class="hljs-title function_">assemble</span><span class="hljs-params">(List&lt;JavaGenSource&gt; sources)</span> {
        <span class="hljs-type">JavaSrcMeta</span> <span class="hljs-variable">srcMeta</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JavaSrcMeta</span>();
        
        <span class="hljs-comment">// 1. æŒ‰åŒ…åˆ†ç»„</span>
        Map&lt;String, List&lt;JavaGenSource&gt;&gt; packageMap = 
            sources.stream().collect(Collectors.groupingBy(JavaGenSource::getPackage));
        
        <span class="hljs-comment">// 2. ç”ŸæˆåŒ…ç»“æ„</span>
        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, List&lt;JavaGenSource&gt;&gt; entry : packageMap.entrySet()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">packageName</span> <span class="hljs-operator">=</span> entry.getKey();
            List&lt;JavaGenSource&gt; packageSources = entry.getValue();
            
            <span class="hljs-comment">// ç”ŸæˆåŒ…ç›®å½•</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">packagePath</span> <span class="hljs-operator">=</span> packageName.replace(<span class="hljs-string">'.'</span>, <span class="hljs-string">'/'</span>);
            srcMeta.addPackage(packagePath, packageSources);
        }
        
        <span class="hljs-comment">// 3. ç”Ÿæˆå¯¼å…¥è¯­å¥</span>
        srcMeta.addImports(calculateImports(sources));
        
        <span class="hljs-keyword">return</span> srcMeta;
    }
}
</code></pre>
<p><strong>ä¾èµ–è§£æ</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨è®¡ç®—ç±»ä¾èµ–å…³ç³»</li>
<li>ç”Ÿæˆæ­£ç¡®çš„ import è¯­å¥</li>
<li>å¤„ç†å¾ªç¯ä¾èµ–</li>
<li>ä¼˜åŒ–å¯¼å…¥é¡ºåº</li>
</ul>
<h4 data-id="heading-14">2.2.4 é˜¶æ®µ 4ï¼šåŠ¨æ€ç¼–è¯‘</h4>
<p><strong>ç¼–è¯‘æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicCompiler</span> {
    
    <span class="hljs-keyword">public</span> Class&lt;?&gt; compile(JavaGenSource source) <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. åˆ›å»º Java æ–‡ä»¶</span>
            <span class="hljs-type">File</span> <span class="hljs-variable">javaFile</span> <span class="hljs-operator">=</span> createJavaFile(source);
            
            <span class="hljs-comment">// 2. ç¼–è¯‘ Java æ–‡ä»¶</span>
            <span class="hljs-type">JavaCompiler</span> <span class="hljs-variable">compiler</span> <span class="hljs-operator">=</span> ToolProvider.getSystemJavaCompiler();
            DiagnosticCollector&lt;JavaFileObject&gt; diagnostics = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiagnosticCollector</span>&lt;&gt;();
            
            <span class="hljs-type">StandardJavaFileManager</span> <span class="hljs-variable">fileManager</span> <span class="hljs-operator">=</span> 
                compiler.getStandardFileManager(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
            
            Iterable&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JavaFileObject</span>&gt; compilationUnits = 
                fileManager.getJavaFileObjectsFromFiles(Arrays.asList(javaFile));
            
            <span class="hljs-comment">// 3. æ‰§è¡Œç¼–è¯‘</span>
            compiler.getTask(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, diagnostics, fileManager, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>)
                   .call(compilationUnits);
            
            <span class="hljs-comment">// 4. æ£€æŸ¥ç¼–è¯‘é”™è¯¯</span>
            <span class="hljs-keyword">if</span> (!diagnostics.getDiagnostics().isEmpty()) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"ç¼–è¯‘å¤±è´¥: "</span> + diagnostics);
            }
            
            <span class="hljs-comment">// 5. åŠ è½½ç¼–è¯‘åçš„ç±»</span>
            <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">classLoader</span> <span class="hljs-operator">=</span> fileManager.getClassLoader(<span class="hljs-literal">null</span>);
            <span class="hljs-keyword">return</span> classLoader.loadClass(source.getClassName());
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"åŠ¨æ€ç¼–è¯‘å¤±è´¥: "</span> + e.getMessage(), e);
        }
    }
}
</code></pre>
<p><strong>ç¼–è¯‘ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>å¢é‡ç¼–è¯‘ï¼šåªç¼–è¯‘å˜æ›´çš„æ–‡ä»¶</li>
<li>å¹¶è¡Œç¼–è¯‘ï¼šæ”¯æŒå¤šçº¿ç¨‹ç¼–è¯‘</li>
<li>ç¼“å­˜æœºåˆ¶ï¼šç¼“å­˜å·²ç¼–è¯‘çš„ç±»</li>
<li>çƒ­æ›¿æ¢ï¼šæ”¯æŒè¿è¡Œæ—¶æ›¿æ¢ç±»</li>
</ul>
<h4 data-id="heading-15">2.2.5 é˜¶æ®µ 5ï¼šè¿è¡Œæ—¶ç»‘å®š</h4>
<p><strong>ç»‘å®šæœºåˆ¶</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuntimeBinder</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bind</span><span class="hljs-params">(MethodConfig config, Class&lt;?&gt; bridgeClass)</span> 
            <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. åˆ›å»º Bridge å®ä¾‹</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">bridgeInstance</span> <span class="hljs-operator">=</span> bridgeClass.newInstance();
            
            <span class="hljs-comment">// 2. ç»‘å®šæ–¹æ³•åˆ°äº‹ä»¶</span>
            <span class="hljs-keyword">for</span> (Event event : config.getEvents()) {
                <span class="hljs-type">Method</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> findHandlerMethod(bridgeClass, event.getHandler());
                bindEvent(event, handler, bridgeInstance);
            }
            
            <span class="hljs-comment">// 3. ç»‘å®šèœå•é¡¹</span>
            <span class="hljs-keyword">for</span> (MenuItem menu : config.getMenus()) {
                <span class="hljs-type">Method</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> findHandlerMethod(bridgeClass, menu.getHandler());
                bindMenuItem(menu, handler, bridgeInstance);
            }
            
            <span class="hljs-comment">// 4. æ³¨å†Œåˆ° UI æ¡†æ¶</span>
            registerToUIFramework(bridgeInstance);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"è¿è¡Œæ—¶ç»‘å®šå¤±è´¥: "</span> + e.getMessage(), e);
        }
    }
}
</code></pre>
<p><strong>ç»‘å®šç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>åå°„ç»‘å®šï¼šä½¿ç”¨ Java åå°„æœºåˆ¶</li>
<li>ç±»å‹å®‰å…¨ï¼šç¼–è¯‘æœŸæ£€æŸ¥ç±»å‹åŒ¹é…</li>
<li>ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šè‡ªåŠ¨ç®¡ç†ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</li>
<li>äº‹ä»¶ä¼ æ’­ï¼šæ”¯æŒäº‹ä»¶å†’æ³¡å’Œæ•è·</li>
</ul>
<h3 data-id="heading-16">2.3 æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-17">2.3.1 ç”Ÿæˆç¼“å­˜</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenerationCache</span> {
    
    <span class="hljs-keyword">private</span> Map&lt;String, JavaGenSource&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> JavaGenSource <span class="hljs-title function_">getOrGenerate</span><span class="hljs-params">(String key, Callable&lt;JavaGenSource&gt; generator)</span> 
            <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-keyword">return</span> cache.computeIfAbsent(key, k -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> generator.call();
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"ç”Ÿæˆå¤±è´¥: "</span> + e.getMessage(), e);
            }
        });
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invalidate</span><span class="hljs-params">(String key)</span> {
        cache.remove(key);
    }
}
</code></pre>
<h4 data-id="heading-18">2.3.2 å¹¶è¡Œç”Ÿæˆ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParallelGenerator</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">4</span>);
    
    <span class="hljs-keyword">public</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">generateParallel</span><span class="hljs-params">(
            List&lt;GenJavaTask&gt; tasks)</span> <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-keyword">try</span> {
            List&lt;Future&lt;JavaGenSource&gt;&gt; futures = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            
            <span class="hljs-keyword">for</span> (GenJavaTask task : tasks) {
                Future&lt;JavaGenSource&gt; future = executor.submit(task);
                futures.add(future);
            }
            
            List&lt;JavaGenSource&gt; results = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            <span class="hljs-keyword">for</span> (Future&lt;JavaGenSource&gt; future : futures) {
                results.add(future.get());
            }
            
            <span class="hljs-keyword">return</span> results;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"å¹¶è¡Œç”Ÿæˆå¤±è´¥: "</span> + e.getMessage(), e);
        }
    }
}
</code></pre>
<h2 data-id="heading-19">ä¸‰ã€åˆ†å±‚ SKILLS è®¾è®¡</h2>
<h3 data-id="heading-20">3.1 Skill æ¶æ„è®¾è®¡</h3>
<p>åŸºäº BridgeCode æœºåˆ¶ï¼Œooder è®¾è®¡äº†åˆ†å±‚ SKILLS æ¶æ„ï¼Œä¸º LLM æä¾›ç»“æ„åŒ–çš„çŸ¥è¯†è®¿é—®èƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Skill çŸ¥è¯†å±‚ï¼ˆKnowledge Layerï¼‰       â”‚
â”‚  - Foundation Skill                      â”‚
â”‚  - Module Skill                        â”‚
â”‚  - Component Skill                     â”‚
â”‚  - Metadata Skill                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Skill æ‰§è¡Œå±‚ï¼ˆExecution Layerï¼‰        â”‚
â”‚  - Skill Loader                        â”‚
â”‚  - Skill Context                      â”‚
â”‚  - Skill Orchestrator                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Skill é›†æˆå±‚ï¼ˆIntegration Layerï¼‰    â”‚
â”‚  - Trae Solo Integration               â”‚
â”‚  - LLM Provider                      â”‚
â”‚  - Tool Registry                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<h3 data-id="heading-21">3.2 Foundation Skill è®¾è®¡</h3>
<p><strong>èŒè´£</strong>ï¼šæä¾›åŸºç¡€ç»„ä»¶çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FoundationSkill</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"foundation"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DESCRIPTION</span> <span class="hljs-operator">=</span> <span class="hljs-string">"åŸºç¡€ç»„ä»¶ Skill"</span>;
    
    <span class="hljs-keyword">public</span> SkillContext <span class="hljs-title function_">load</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SkillContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillContext</span>();
        
        <span class="hljs-comment">// 1. åŠ è½½ NlpBaseUIComponent çŸ¥è¯†</span>
        context.addClass(NlpBaseUIComponent.class);
        
        <span class="hljs-comment">// 2. åŠ è½½ç”Ÿæˆå™¨çŸ¥è¯†</span>
        context.addGenerator(GenJavaTask.class);
        
        <span class="hljs-comment">// 3. åŠ è½½æ¨¡æ¿çŸ¥è¯†</span>
        context.addTemplate(<span class="hljs-string">"base.ftl"</span>);
        
        <span class="hljs-keyword">return</span> context;
    }
    
    <span class="hljs-keyword">public</span> List&lt;SkillAction&gt; <span class="hljs-title function_">getActions</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Arrays.asList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"create-base-component"</span>, <span class="hljs-string">"åˆ›å»ºåŸºç¡€ç»„ä»¶"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"initialize-component"</span>, <span class="hljs-string">"åˆå§‹åŒ–ç»„ä»¶"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"validate-component"</span>, <span class="hljs-string">"éªŒè¯ç»„ä»¶"</span>)
        );
    }
}
</code></pre>
<p><strong>çŸ¥è¯†å†…å®¹</strong>ï¼š</p>
<ul>
<li>æŠ½è±¡ç±»å®šä¹‰</li>
<li>åˆå§‹åŒ–æ–¹æ³•ç­¾å</li>
<li>ç»„ä»¶ç±»å‹æšä¸¾</li>
<li>åŸºç¡€ç”Ÿæˆå™¨æ¨¡æ¿</li>
</ul>
<h3 data-id="heading-22">3.3 Module Skill è®¾è®¡</h3>
<p><strong>èŒè´£</strong>ï¼šæä¾›æ¨¡å—ç»„ä»¶çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModuleSkill</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"module"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DESCRIPTION</span> <span class="hljs-operator">=</span> <span class="hljs-string">"æ¨¡å—ç»„ä»¶ Skill"</span>;
    
    <span class="hljs-keyword">public</span> SkillContext <span class="hljs-title function_">load</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SkillContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillContext</span>();
        
        <span class="hljs-comment">// 1. åŠ è½½ ModuleUIComponent çŸ¥è¯†</span>
        context.addClass(ModuleUIComponent.class);
        context.addClass(CustomModuleUIComponent.class);
        
        <span class="hljs-comment">// 2. åŠ è½½ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</span>
        context.addMethod(<span class="hljs-string">"setCurrComponent"</span>);
        context.addMethod(<span class="hljs-string">"findComponentByAlias"</span>);
        
        <span class="hljs-comment">// 3. åŠ è½½ç”Ÿæˆå™¨</span>
        context.addGenerator(GenRepositoryViewJava.class);
        
        <span class="hljs-keyword">return</span> context;
    }
    
    <span class="hljs-keyword">public</span> List&lt;SkillAction&gt; <span class="hljs-title function_">getActions</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Arrays.asList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"create-module"</span>, <span class="hljs-string">"åˆ›å»ºæ¨¡å—"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"bind-component"</span>, <span class="hljs-string">"ç»‘å®šç»„ä»¶"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"manage-lifecycle"</span>, <span class="hljs-string">"ç®¡ç†ç”Ÿå‘½å‘¨æœŸ"</span>)
        );
    }
}
</code></pre>
<p><strong>çŸ¥è¯†å†…å®¹</strong>ï¼š</p>
<ul>
<li>æ¨¡å—ç±»å®šä¹‰</li>
<li>ç”Ÿå‘½å‘¨æœŸç®¡ç†æ–¹æ³•</li>
<li>ç»„ä»¶æŸ¥æ‰¾æœºåˆ¶</li>
<li>ä»“å‚¨å±‚ç”Ÿæˆå™¨</li>
</ul>
<h3 data-id="heading-23">3.4 Component Skill è®¾è®¡</h3>
<p><strong>èŒè´£</strong>ï¼šæä¾›å…·ä½“ç»„ä»¶çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ComponentSkill</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"component"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DESCRIPTION</span> <span class="hljs-operator">=</span> <span class="hljs-string">"ç»„ä»¶ Skill"</span>;
    
    <span class="hljs-keyword">public</span> SkillContext <span class="hljs-title function_">load</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SkillContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillContext</span>();
        
        <span class="hljs-comment">// 1. åŠ è½½å…·ä½“ç»„ä»¶çŸ¥è¯†</span>
        context.addClass(NlpGroupUIComponent.class);
        context.addClass(NlpGridUIComponent.class);
        context.addClass(TreeGridUIComponent.class);
        
        <span class="hljs-comment">// 2. åŠ è½½ç»„ä»¶é…ç½®</span>
        context.addConfig(<span class="hljs-string">"group-config"</span>);
        context.addConfig(<span class="hljs-string">"grid-config"</span>);
        
        <span class="hljs-comment">// 3. åŠ è½½è§†å›¾ç”Ÿæˆå™¨</span>
        context.addGenerator(GenCustomViewJava.class);
        
        <span class="hljs-keyword">return</span> context;
    }
    
    <span class="hljs-keyword">public</span> List&lt;SkillAction&gt; <span class="hljs-title function_">getActions</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Arrays.asList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"create-group"</span>, <span class="hljs-string">"åˆ›å»ºåˆ†ç»„ç»„ä»¶"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"create-grid"</span>, <span class="hljs-string">"åˆ›å»ºç½‘æ ¼ç»„ä»¶"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"create-tree"</span>, <span class="hljs-string">"åˆ›å»ºæ ‘å½¢ç»„ä»¶"</span>)
        );
    }
}
</code></pre>
<p><strong>çŸ¥è¯†å†…å®¹</strong>ï¼š</p>
<ul>
<li>å…·ä½“ç»„ä»¶ç±»å®šä¹‰</li>
<li>ç»„ä»¶é…ç½®æ¨¡å¼</li>
<li>è§†å›¾å±‚ç”Ÿæˆå™¨</li>
<li>ç»„ä»¶é—´å…³ç³»</li>
</ul>
<h3 data-id="heading-24">3.5 Metadata Skill è®¾è®¡</h3>
<p><strong>èŒè´£</strong>ï¼šæä¾›å…ƒæ•°æ®çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetadataSkill</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"metadata"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DESCRIPTION</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å…ƒæ•°æ® Skill"</span>;
    
    <span class="hljs-keyword">public</span> SkillContext <span class="hljs-title function_">load</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SkillContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillContext</span>();
        
        <span class="hljs-comment">// 1. åŠ è½½å…ƒæ•°æ®ç±»</span>
        context.addClass(CustomViewMeta.class);
        context.addClass(CustomDataMeta.class);
        context.addClass(MethodConfig.class);
        
        <span class="hljs-comment">// 2. åŠ è½½è§£æå™¨</span>
        context.addParser(MetadataParser.class);
        
        <span class="hljs-comment">// 3. åŠ è½½éªŒè¯è§„åˆ™</span>
        context.addValidator(MetadataValidator.class);
        
        <span class="hljs-keyword">return</span> context;
    }
    
    <span class="hljs-keyword">public</span> List&lt;SkillAction&gt; <span class="hljs-title function_">getActions</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Arrays.asList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"parse-metadata"</span>, <span class="hljs-string">"è§£æå…ƒæ•°æ®"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"validate-metadata"</span>, <span class="hljs-string">"éªŒè¯å…ƒæ•°æ®"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"generate-code"</span>, <span class="hljs-string">"ç”Ÿæˆä»£ç "</span>)
        );
    }
}
</code></pre>
<p><strong>çŸ¥è¯†å†…å®¹</strong>ï¼š</p>
<ul>
<li>å…ƒæ•°æ®ç±»å®šä¹‰</li>
<li>å…ƒæ•°æ®è§£æå™¨</li>
<li>éªŒè¯è§„åˆ™</li>
<li>ç”Ÿæˆè§„åˆ™</li>
</ul>
<h3 data-id="heading-25">3.6 Skill åä½œæœºåˆ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkillOrchestrator</span> {
    
    <span class="hljs-keyword">private</span> Map&lt;String, Skill&gt; skills = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerSkill</span><span class="hljs-params">(Skill skill)</span> {
        skills.put(skill.getName(), skill);
    }
    
    <span class="hljs-keyword">public</span> SkillContext <span class="hljs-title function_">execute</span><span class="hljs-params">(String skillName, Map&lt;String, Object&gt; params)</span> 
            <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-type">Skill</span> <span class="hljs-variable">skill</span> <span class="hljs-operator">=</span> skills.get(skillName);
        <span class="hljs-keyword">if</span> (skill == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"Skill ä¸å­˜åœ¨: "</span> + skillName);
        }
        
        <span class="hljs-comment">// 1. åŠ è½½ Skill ä¸Šä¸‹æ–‡</span>
        <span class="hljs-type">SkillContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> skill.load();
        
        <span class="hljs-comment">// 2. åº”ç”¨å‚æ•°</span>
        context.applyParams(params);
        
        <span class="hljs-comment">// 3. æ‰§è¡Œ Skill</span>
        <span class="hljs-type">SkillResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> skill.execute(context);
        
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-keyword">public</span> List&lt;SkillAction&gt; <span class="hljs-title function_">getAllActions</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> skills.values().stream()
                .flatMap(skill -&gt; skill.getActions().stream())
                .collect(Collectors.toList());
    }
}
</code></pre>
<h2 data-id="heading-26">å››ã€Trae Solo Skill æ„å»ºå®è·µ</h2>
<h3 data-id="heading-27">4.1 Trae Solo ç¯å¢ƒé…ç½®</h3>
<h4 data-id="heading-28">4.1.1 é¡¹ç›®ç»“æ„</h4>
<pre><code class="hljs language-bash" lang="bash">trae-solo-project/
â”œâ”€â”€ .trae/
â”‚   â”œâ”€â”€ rules/
â”‚   â”‚   â”œâ”€â”€ project_rules.md       <span class="hljs-comment"># é¡¹ç›®è§„åˆ™</span>
â”‚   â”‚   â””â”€â”€ skill_rules.md        <span class="hljs-comment"># Skill è§„åˆ™</span>
â”‚   â””â”€â”€ skills/
â”‚       â”œâ”€â”€ foundation-skill.md    <span class="hljs-comment"># Foundation Skill</span>
â”‚       â”œâ”€â”€ module-skill.md        <span class="hljs-comment"># Module Skill</span>
â”‚       â”œâ”€â”€ component-skill.md     <span class="hljs-comment"># Component Skill</span>
â”‚       â””â”€â”€ metadata-skill.md      <span class="hljs-comment"># Metadata Skill</span>
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ net/ooder/
â”‚   â”‚   â”‚       â””â”€â”€ engine/
â”‚   â”‚   â”‚           â”œâ”€â”€ codegen/    <span class="hljs-comment"># ä»£ç ç”Ÿæˆå™¨</span>
â”‚   â”‚   â”‚           â””â”€â”€ ub/         <span class="hljs-comment"># BridgeCode</span>
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â””â”€â”€ templates/   <span class="hljs-comment"># Freemarker æ¨¡æ¿</span>
â”‚   â””â”€â”€ <span class="hljs-built_in">test</span>/
â”‚       â””â”€â”€ java/
â”‚           â””â”€â”€ net/ooder/
â”‚               â””â”€â”€ engine/
â”‚                   â””â”€â”€ codegen/
â””â”€â”€ pom.xml
</code></pre>
<h4 data-id="heading-29">4.1.2 é…ç½®æ–‡ä»¶</h4>
<p><strong>.trae/rules/project_rules.md</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Trae Solo é¡¹ç›®è§„åˆ™</span>

<span class="hljs-section">## ä»£ç ç”Ÿæˆè§„åˆ™</span>

<span class="hljs-bullet">1.</span> æ‰€æœ‰ç”Ÿæˆçš„ä»£ç å¿…é¡»éµå¾ª Java ç¼–ç è§„èŒƒ
<span class="hljs-bullet">2.</span> ç”Ÿæˆçš„ç±»å¿…é¡»æ·»åŠ  @Generated æ³¨è§£
<span class="hljs-bullet">3.</span> ç”Ÿæˆçš„ä»£ç å¿…é¡»åŒ…å«å®Œæ•´çš„ Javadoc
<span class="hljs-bullet">4.</span> ç”Ÿæˆçš„ä»£ç å¿…é¡»é€šè¿‡ç¼–è¯‘æ£€æŸ¥

<span class="hljs-section">## Skill ä½¿ç”¨è§„åˆ™</span>

<span class="hljs-bullet">1.</span> LLM å¿…é¡»é€šè¿‡ Skill è®¿é—®ä»£ç ç”ŸæˆçŸ¥è¯†
<span class="hljs-bullet">2.</span> LLM ä¸èƒ½ç›´æ¥ä¿®æ”¹ç”Ÿæˆçš„ä»£ç 
<span class="hljs-bullet">3.</span> LLM å¿…é¡»ä½¿ç”¨ Skill æä¾›çš„ Action
<span class="hljs-bullet">4.</span> LLM å¿…é¡»éµå¾ª Skill çš„æ‰§è¡Œé¡ºåº

<span class="hljs-section">## è´¨é‡ä¿è¯è§„åˆ™</span>

<span class="hljs-bullet">1.</span> æ‰€æœ‰ç”Ÿæˆçš„ä»£ç å¿…é¡»ç»è¿‡å•å…ƒæµ‹è¯•
<span class="hljs-bullet">2.</span> æ‰€æœ‰ç”Ÿæˆçš„ä»£ç å¿…é¡»ç»è¿‡é›†æˆæµ‹è¯•
<span class="hljs-bullet">3.</span> æ‰€æœ‰ç”Ÿæˆçš„ä»£ç å¿…é¡»ç»è¿‡ä»£ç å®¡æŸ¥
</code></pre>
<p><strong>.trae/rules/skill_rules.md</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Skill è§„åˆ™</span>

<span class="hljs-section">## Skill å®šä¹‰è§„åˆ™</span>

<span class="hljs-bullet">1.</span> æ¯ä¸ª Skill å¿…é¡»å®šä¹‰æ¸…æ™°çš„èŒè´£è¾¹ç•Œ
<span class="hljs-bullet">2.</span> æ¯ä¸ª Skill å¿…é¡»æä¾›å®Œæ•´çš„çŸ¥è¯†å†…å®¹
<span class="hljs-bullet">3.</span> æ¯ä¸ª Skill å¿…é¡»å®šä¹‰å¯æ‰§è¡Œçš„ Action
<span class="hljs-bullet">4.</span> æ¯ä¸ª Skill å¿…é¡»æä¾›ä½¿ç”¨ç¤ºä¾‹

<span class="hljs-section">## Skill åŠ è½½è§„åˆ™</span>

<span class="hljs-bullet">1.</span> Skill å¿…é¡»æ”¯æŒæ‡’åŠ è½½
<span class="hljs-bullet">2.</span> Skill å¿…é¡»æ”¯æŒç¼“å­˜
<span class="hljs-bullet">3.</span> Skill å¿…é¡»æ”¯æŒçƒ­æ›´æ–°
<span class="hljs-bullet">4.</span> Skill å¿…é¡»æ”¯æŒç‰ˆæœ¬ç®¡ç†

<span class="hljs-section">## Skill æ‰§è¡Œè§„åˆ™</span>

<span class="hljs-bullet">1.</span> Skill æ‰§è¡Œå¿…é¡»æ”¯æŒå‚æ•°ä¼ é€’
<span class="hljs-bullet">2.</span> Skill æ‰§è¡Œå¿…é¡»æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†
<span class="hljs-bullet">3.</span> Skill æ‰§è¡Œå¿…é¡»æ”¯æŒé”™è¯¯å¤„ç†
<span class="hljs-bullet">4.</span> Skill æ‰§è¡Œå¿…é¡»æ”¯æŒç»“æœè¿”å›
</code></pre>
<h3 data-id="heading-30">4.2 Skill å®ç°å®è·µ</h3>
<h4 data-id="heading-31">4.2.1 Foundation Skill å®ç°</h4>
<p><strong>.trae/skills/foundation-skill.md</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Foundation Skill</span>

<span class="hljs-section">## æ¦‚è¿°</span>

Foundation Skill æä¾›åŸºç¡€ç»„ä»¶çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›ï¼Œæ˜¯æ‰€æœ‰å…¶ä»– Skill çš„åŸºç¡€ã€‚

<span class="hljs-section">## çŸ¥è¯†å†…å®¹</span>

<span class="hljs-section">### æ ¸å¿ƒç±»</span>

<span class="hljs-section">#### NlpBaseUIComponent</span>

<span class="hljs-code">```java
public abstract class NlpBaseUIComponent extends UIComponent {
    
    private String componentType;
    private boolean initialized;
    
    public abstract void initializeFromNaturalLanguage(String naturalLanguage);
    public abstract void initializeFromConfig(Object config);
    
    public String getComponentType() {
        return componentType;
    }
    
    public boolean isInitialized() {
        return initialized;
    }
}
</span></code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>æä¾›ç»„ä»¶ç±»å‹ç®¡ç†</li>
<li>æä¾›åˆå§‹åŒ–çŠ¶æ€ç®¡ç†</li>
<li>å®šä¹‰æŠ½è±¡åˆå§‹åŒ–æ–¹æ³•</li>
</ul>
<h3 data-id="heading-32">ç”Ÿæˆå™¨</h3>
<h4 data-id="heading-33">GenJavaTask</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenJavaTask</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;List&lt;JavaGenSource&gt;&gt; {
    
    <span class="hljs-keyword">protected</span> JavaGenSource javaGen;
    <span class="hljs-keyword">protected</span> CustomViewMeta viewMeta;
    <span class="hljs-keyword">protected</span> String euClassName;
    <span class="hljs-keyword">protected</span> Chrome chrome;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException;
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>æä¾›ç»Ÿä¸€çš„ç”Ÿæˆæ¥å£</li>
<li>æä¾›é€šç”¨çš„ç”Ÿæˆå·¥å…·æ–¹æ³•</li>
<li>ç®¡ç†ç”Ÿæˆä¸Šä¸‹æ–‡</li>
</ul>
<h2 data-id="heading-34">å¯æ‰§è¡Œ Action</h2>
<h3 data-id="heading-35">create-base-component</h3>
<p><strong>æè¿°</strong>ï¼šåˆ›å»ºåŸºç¡€ç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>componentType</code>ï¼šç»„ä»¶ç±»å‹</li>
<li><code>className</code>ï¼šç±»å</li>
<li><code>packageName</code>ï¼šåŒ…å</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯å‚æ•°</li>
<li>åˆ›å»º NlpBaseUIComponent å­ç±»</li>
<li>ç”Ÿæˆåˆå§‹åŒ–æ–¹æ³•</li>
<li>è¿”å›ç”Ÿæˆçš„ä»£ç </li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">ç”¨æˆ·ï¼šåˆ›å»ºä¸€ä¸ªåŸºç¡€ç»„ä»¶
LLMï¼šä½¿ç”¨ Foundation Skill çš„ create-<span class="hljs-keyword">base</span>-component Action
å‚æ•°ï¼š{<span class="hljs-string">"componentType"</span>: <span class="hljs-string">"CUSTOM"</span>, <span class="hljs-string">"className"</span>: <span class="hljs-string">"MyComponent"</span>, <span class="hljs-string">"packageName"</span>: <span class="hljs-string">"net.ooder.example"</span>}
ç»“æœï¼šç”Ÿæˆ MyComponent.java
</code></pre>
<h3 data-id="heading-36">initialize-component</h3>
<p><strong>æè¿°</strong>ï¼šåˆå§‹åŒ–ç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>component</code>ï¼šç»„ä»¶å®ä¾‹</li>
<li><code>config</code>ï¼šé…ç½®å¯¹è±¡</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯é…ç½®</li>
<li>è°ƒç”¨ initializeFromConfig æ–¹æ³•</li>
<li>è®¾ç½®åˆå§‹åŒ–çŠ¶æ€</li>
<li>è¿”å›åˆå§‹åŒ–ç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json">ç”¨æˆ·ï¼šåˆå§‹åŒ–ç»„ä»¶
LLMï¼šä½¿ç”¨ Foundation Skill çš„ initialize-component Action
å‚æ•°ï¼š<span class="hljs-punctuation">{</span><span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"myComponent"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"config"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"FORM"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
ç»“æœï¼šç»„ä»¶åˆå§‹åŒ–å®Œæˆ
</code></pre>
<h3 data-id="heading-37">validate-component</h3>
<p><strong>æè¿°</strong>ï¼šéªŒè¯ç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>component</code>ï¼šç»„ä»¶å®ä¾‹</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>æ£€æŸ¥ç»„ä»¶ç±»å‹</li>
<li>æ£€æŸ¥åˆå§‹åŒ–çŠ¶æ€</li>
<li>æ£€æŸ¥é…ç½®å®Œæ•´æ€§</li>
<li>è¿”å›éªŒè¯ç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json">ç”¨æˆ·ï¼šéªŒè¯ç»„ä»¶
LLMï¼šä½¿ç”¨ Foundation Skill çš„ validate-component Action
å‚æ•°ï¼š<span class="hljs-punctuation">{</span><span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"myComponent"</span><span class="hljs-punctuation">}</span>
ç»“æœï¼šéªŒè¯é€šè¿‡
</code></pre>
<h2 data-id="heading-38">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-39">åœºæ™¯ 1ï¼šåˆ›å»ºè‡ªå®šä¹‰åŸºç¡€ç»„ä»¶</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰åŸºç¡€ç»„ä»¶
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Foundation Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ create-base-component Action
<span class="hljs-bullet">3.</span> ç”Ÿæˆç»„ä»¶ä»£ç 
<span class="hljs-bullet">4.</span> è¿”å›ç”Ÿæˆçš„ä»£ç 
</code></pre>
<h3 data-id="heading-40">åœºæ™¯ 2ï¼šåˆå§‹åŒ–ç°æœ‰ç»„ä»¶</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šåˆå§‹åŒ–ä¸€ä¸ªç°æœ‰ç»„ä»¶
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Foundation Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ initialize-component Action
<span class="hljs-bullet">3.</span> æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘
<span class="hljs-bullet">4.</span> è¿”å›åˆå§‹åŒ–ç»“æœ
</code></pre>
<h2 data-id="heading-41">æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨ Foundation Skill</strong>ï¼šæ‰€æœ‰åŸºç¡€æ“ä½œéƒ½åº”è¯¥é€šè¿‡ Foundation Skill å®Œæˆ</li>
<li><strong>éµå¾ªåˆå§‹åŒ–æµç¨‹</strong>ï¼šç¡®ä¿ç»„ä»¶æ­£ç¡®åˆå§‹åŒ–</li>
<li><strong>éªŒè¯ç»„ä»¶çŠ¶æ€</strong>ï¼šåœ¨æ‰§è¡Œæ“ä½œå‰éªŒè¯ç»„ä»¶çŠ¶æ€</li>
<li><strong>å¤„ç†åˆå§‹åŒ–é”™è¯¯</strong>ï¼šæä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">
<span class="hljs-comment">#### 4.2.2 Module Skill å®ç°</span>

**.trae/skills/module-skill.md**ï¼š

```markdown
<span class="hljs-comment"># Module Skill</span>

<span class="hljs-comment">## æ¦‚è¿°</span>

Module Skill æä¾›æ¨¡å—ç»„ä»¶çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›ï¼Œç®¡ç†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–å…³ç³»ã€‚

<span class="hljs-comment">## çŸ¥è¯†å†…å®¹</span>

<span class="hljs-comment">### æ ¸å¿ƒç±»</span>

<span class="hljs-comment">#### ModuleUIComponent</span>

```java
public class ModuleUIComponent&lt;M extends UIComponent&gt; extends UIComponent&lt;ModuleProperties, ModuleEventEnum&gt; {
    
    private String className<span class="hljs-comment">;</span>
    private String desc<span class="hljs-comment">;</span>
    private ModuleViewType moduleViewType<span class="hljs-comment">;</span>
    private Map&lt;String, Object&gt; valueMap<span class="hljs-comment">;</span>
    private UIModule UIModule<span class="hljs-comment">;</span>
    private CustomModuleMeta moduleBean<span class="hljs-comment">;</span>
    private MethodConfig methodAPIBean<span class="hljs-comment">;</span>
    private DomainInst domainInst<span class="hljs-comment">;</span>
    private ModuleProperties properties<span class="hljs-comment">;</span>
    private M currComponent<span class="hljs-comment">;</span>
    private UIComponent navUIComponent<span class="hljs-comment">;</span>
    private ModuleViewConfig viewConfig<span class="hljs-comment">;</span>
    private List&lt;String&gt; dependencies<span class="hljs-comment">;</span>
    private List&lt;String&gt; required<span class="hljs-comment">;</span>
    private Map&lt;String, ModuleFunction&gt; functions<span class="hljs-comment">;</span>
    private List&lt;ModuleFormulaInst&gt; formulas<span class="hljs-comment">;</span>
    private Map&lt;String, String&gt; customFunctions<span class="hljs-comment">;</span>
    private String customAppend<span class="hljs-comment">;</span>
    private String afterAppend<span class="hljs-comment">;</span>
    private Map&lt;String, String&gt; moduleVar<span class="hljs-comment">;</span>
    private Map&lt;String, UIComponent&gt; components<span class="hljs-comment">;</span>
    
    public void setCurrComponent(M currComponent) {
        <span class="hljs-attr">this.currComponent</span> = currComponent<span class="hljs-comment">;</span>
        if (currComponent != null) {
            <span class="hljs-attr">this.currComponentAlias</span> = currComponent.getAlias()<span class="hljs-comment">;</span>
            if (currComponent.getParent() == null) {
                currComponent.setParent(this)<span class="hljs-comment">;</span>
            }
            this.components.put(currComponentAlias, currComponent)<span class="hljs-comment">;</span>
            ComponentType <span class="hljs-attr">type</span> = ComponentType.fromType(currComponent.getKey())<span class="hljs-comment">;</span>
            <span class="hljs-attr">moduleViewType</span> = ModuleViewType.getModuleViewByCom(type)<span class="hljs-comment">;</span>
            properties.setCurrComponentAlias(currComponentAlias)<span class="hljs-comment">;</span>
        } else {
            <span class="hljs-attr">this.currComponentAlias</span> = null<span class="hljs-comment">;</span>
            properties.setCurrComponentAlias(null)<span class="hljs-comment">;</span>
        }
    }
    
    public UIComponent findComponentByAlias(String alias) {
        List&lt;UIComponent&gt; <span class="hljs-attr">UIComponentList</span> = this.findComponentsByAlias(alias)<span class="hljs-comment">;</span>
        UIComponent <span class="hljs-attr">UIComponent</span> = null<span class="hljs-comment">;</span>
        if (UIComponentList.size() &gt; 0) {
            <span class="hljs-attr">UIComponent</span> = UIComponentList.get(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
        }
        return UIComponent<span class="hljs-comment">;</span>
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>ç®¡ç†æ¨¡å—ç”Ÿå‘½å‘¨æœŸ</li>
<li>ç®¡ç†ç»„ä»¶ä¾èµ–</li>
<li>æä¾›ç»„ä»¶æŸ¥æ‰¾åŠŸèƒ½</li>
<li>å¤„ç†æ¨¡å—äº‹ä»¶</li>
</ul>
<h3 data-id="heading-42">ç”Ÿæˆå™¨</h3>
<h4 data-id="heading-43">GenRepositoryViewJava</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenRepositoryViewJava</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GenJavaTask</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException {
        List&lt;JavaGenSource&gt; sources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-comment">// 1. ç”Ÿæˆ VO æ¥å£</span>
        sources.add(generateVOInterface());
        
        <span class="hljs-comment">// 2. ç”Ÿæˆ Service æ¥å£</span>
        sources.add(generateServiceInterface());
        
        <span class="hljs-comment">// 3. ç”Ÿæˆ Repository æ¥å£</span>
        sources.add(generateRepositoryInterface());
        
        <span class="hljs-comment">// 4. ç”Ÿæˆ RepositoryImpl å®ç°</span>
        sources.add(generateRepositoryImpl());
        
        <span class="hljs-keyword">return</span> sources;
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>ç”Ÿæˆä»“å‚¨å±‚ä»£ç </li>
<li>ç”ŸæˆæœåŠ¡å±‚ä»£ç </li>
<li>ç”Ÿæˆæ•°æ®è®¿é—®å¯¹è±¡</li>
<li>ç®¡ç†ä¾èµ–å…³ç³»</li>
</ul>
<h2 data-id="heading-44">å¯æ‰§è¡Œ Action</h2>
<h3 data-id="heading-45">create-module</h3>
<p><strong>æè¿°</strong>ï¼šåˆ›å»ºæ¨¡å—</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>moduleName</code>ï¼šæ¨¡å—åç§°</li>
<li><code>className</code>ï¼šç±»å</li>
<li><code>packageName</code>ï¼šåŒ…å</li>
<li><code>components</code>ï¼šç»„ä»¶åˆ—è¡¨</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯å‚æ•°</li>
<li>åˆ›å»º ModuleUIComponent å­ç±»</li>
<li>ç”Ÿæˆä»“å‚¨å±‚ä»£ç </li>
<li>ç»‘å®šç»„ä»¶</li>
<li>è¿”å›ç”Ÿæˆçš„ä»£ç </li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ç”¨æˆ·ï¼šåˆ›å»ºä¸€ä¸ªæ¨¡å—
LLMï¼šä½¿ç”¨ <span class="hljs-keyword">Module</span> Skill çš„ <span class="hljs-keyword">create</span><span class="hljs-operator">-</span><span class="hljs-keyword">module</span> Action
å‚æ•°ï¼š{"moduleName": "UserModule", "className": "UserModule", "packageName": "net.ooder.example", "components": ["grid", "form"]}
ç»“æœï¼šç”Ÿæˆ UserModule.java å’Œç›¸å…³ä»“å‚¨ä»£ç 
</code></pre>
<h3 data-id="heading-46">bind-component</h3>
<p><strong>æè¿°</strong>ï¼šç»‘å®šç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>module</code>ï¼šæ¨¡å—å®ä¾‹</li>
<li><code>component</code>ï¼šç»„ä»¶å®ä¾‹</li>
<li><code>alias</code>ï¼šç»„ä»¶åˆ«å</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯æ¨¡å—å’Œç»„ä»¶</li>
<li>è°ƒç”¨ setCurrComponent æ–¹æ³•</li>
<li>æ›´æ–°ç»„ä»¶ä¾èµ–</li>
<li>è¿”å›ç»‘å®šç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">ç”¨æˆ·ï¼šç»‘å®šç»„ä»¶
LLMï¼šä½¿ç”¨ Module Skill çš„ <span class="hljs-keyword">bind</span>-component Action
å‚æ•°ï¼š{<span class="hljs-string">"module"</span>: <span class="hljs-string">"userModule"</span>, <span class="hljs-string">"component"</span>: <span class="hljs-string">"userGrid"</span>, <span class="hljs-string">"alias"</span>: <span class="hljs-string">"grid"</span>}
ç»“æœï¼šç»„ä»¶ç»‘å®šå®Œæˆ
</code></pre>
<h3 data-id="heading-47">manage-lifecycle</h3>
<p><strong>æè¿°</strong>ï¼šç®¡ç†ç”Ÿå‘½å‘¨æœŸ</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>module</code>ï¼šæ¨¡å—å®ä¾‹</li>
<li><code>action</code>ï¼šç”Ÿå‘½å‘¨æœŸåŠ¨ä½œï¼ˆinit/destroyï¼‰</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯æ¨¡å—çŠ¶æ€</li>
<li>æ‰§è¡Œç”Ÿå‘½å‘¨æœŸåŠ¨ä½œ</li>
<li>è§¦å‘ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</li>
<li>è¿”å›æ‰§è¡Œç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ç”¨æˆ·ï¼šåˆå§‹åŒ–æ¨¡å—
LLMï¼šä½¿ç”¨ <span class="hljs-keyword">Module</span> Skill çš„ manage<span class="hljs-operator">-</span>lifecycle Action
å‚æ•°ï¼š{"module": "userModule", "action": "init"}
ç»“æœï¼šæ¨¡å—åˆå§‹åŒ–å®Œæˆ
</code></pre>
<h2 data-id="heading-48">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-49">åœºæ™¯ 1ï¼šåˆ›å»ºç”¨æˆ·ç®¡ç†æ¨¡å—</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªç”¨æˆ·ç®¡ç†æ¨¡å—
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Module Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ create-module Action
<span class="hljs-bullet">3.</span> ç”Ÿæˆæ¨¡å—ä»£ç å’Œä»“å‚¨ä»£ç 
<span class="hljs-bullet">4.</span> è¿”å›ç”Ÿæˆçš„ä»£ç 
</code></pre>
<h3 data-id="heading-50">åœºæ™¯ 2ï¼šç»‘å®šç½‘æ ¼ç»„ä»¶åˆ°æ¨¡å—</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šç»‘å®šç½‘æ ¼ç»„ä»¶åˆ°æ¨¡å—
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Module Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ bind-component Action
<span class="hljs-bullet">3.</span> æ‰§è¡Œç»‘å®šé€»è¾‘
<span class="hljs-bullet">4.</span> è¿”å›ç»‘å®šç»“æœ
</code></pre>
<h2 data-id="heading-51">æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä½¿ç”¨æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šå°†åŠŸèƒ½åˆ†è§£ä¸ºç‹¬ç«‹çš„æ¨¡å—</li>
<li><strong>ç®¡ç†ç»„ä»¶ä¾èµ–</strong>ï¼šæ˜ç¡®ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»</li>
<li><strong>å®ç°ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šæä¾›å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸæ”¯æŒ</li>
<li><strong>ä½¿ç”¨ä»“å‚¨æ¨¡å¼</strong>ï¼šåˆ†ç¦»æ•°æ®è®¿é—®é€»è¾‘</li>
</ol>
<pre><code class="hljs language-scala" lang="scala">
#### <span class="hljs-number">4.2</span><span class="hljs-number">.3</span> <span class="hljs-type">Component</span> <span class="hljs-type">Skill</span> å®ç°

**.trae/skills/component-skill.md**ï¼š

```markdown
# <span class="hljs-type">Component</span> <span class="hljs-type">Skill</span>

## æ¦‚è¿°

<span class="hljs-type">Component</span> <span class="hljs-type">Skill</span> æä¾›å…·ä½“ç»„ä»¶çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›ï¼ŒåŒ…æ‹¬åˆ†ç»„ç»„ä»¶ã€ç½‘æ ¼ç»„ä»¶ã€æ ‘å½¢ç»„ä»¶ç­‰ã€‚

## çŸ¥è¯†å†…å®¹

### æ ¸å¿ƒç±»

#### <span class="hljs-type">NlpGroupUIComponent</span>

```java
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NlpGroupUIComponent&lt;M</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CustomFieldGroupUIComponent&gt;</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CustomModuleUIComponent&lt;M&gt;</span> </span>{
    
    void init(<span class="hljs-type">MethodConfig</span> methodConfig) <span class="hljs-keyword">throws</span> <span class="hljs-type">JDSException</span> {
        <span class="hljs-type">CustomGroupFormViewMeta</span> viewBean = (<span class="hljs-type">CustomGroupFormViewMeta</span>) methodConfig.getView();
        <span class="hljs-type">CustomGroupDataMeta</span> dataBean = (<span class="hljs-type">CustomGroupDataMeta</span>) methodConfig.getDataBean();
        <span class="hljs-keyword">if</span> (dataBean != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">this</span>.dataUrl = dataBean.getDataUrl();
            <span class="hljs-keyword">this</span>.saveUrl = dataBean.getSaveUrl();
            <span class="hljs-keyword">this</span>.searchUrl = dataBean.getSearchUrl();
            <span class="hljs-keyword">this</span>.reSetUrl = dataBean.getReSetUrl();
        }
        <span class="hljs-type">CustomFieldGroupUIComponent</span> currComponent = <span class="hljs-keyword">new</span> <span class="hljs-type">CustomFieldGroupUIComponent</span>(<span class="hljs-type">UIModule</span>, methodConfig, valueMap);
        <span class="hljs-keyword">this</span>.addChildLayoutNav(currComponent);
        <span class="hljs-keyword">this</span>.setCurrComponent((<span class="hljs-type">M</span>) currComponent);
        
        <span class="hljs-keyword">this</span>.fillAction(viewBean);
        <span class="hljs-keyword">this</span>.fillToolBar(viewBean.getToolBar(), currComponent);
        <span class="hljs-keyword">this</span>.fillContextAction(viewBean.getContextMenuBean(), currComponent);
        
        <span class="hljs-keyword">if</span> (viewBean.getOnReady() != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">ModuleOnReadyEventEnum</span> eventEnum : viewBean.getOnReady()) {
                <span class="hljs-keyword">this</span>.addModuleEvent(eventEnum);
            }
        }
        
        <span class="hljs-keyword">if</span> (viewBean.getOnDestroy() != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">CustomOnDestroyEventEnum</span> eventEnum : viewBean.getOnDestroy()) {
                <span class="hljs-keyword">this</span>.addModuleEvent(eventEnum);
            }
        }
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>ç®¡ç†åˆ†ç»„å­—æ®µ</li>
<li>å¤„ç†åˆ†ç»„äº‹ä»¶</li>
<li>ç”Ÿæˆ API è°ƒç”¨</li>
<li>ç®¡ç†å·¥å…·æ å’Œä¸Šä¸‹æ–‡èœå•</li>
</ul>
<h4 data-id="heading-52">NlpGridUIComponent</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NlpGridUIComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CustomGridUIComponent</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">NlpGridUIComponent</span><span class="hljs-params">(MethodConfig methodConfig)</span> {
        <span class="hljs-built_in">super</span>();
        <span class="hljs-type">CustomGridViewMeta</span> <span class="hljs-variable">viewBean</span> <span class="hljs-operator">=</span> (CustomGridViewMeta) methodConfig.getView();
        init(viewBean);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">NlpGridUIComponent</span><span class="hljs-params">(CustomGridViewMeta viewBean)</span> {
        <span class="hljs-built_in">super</span>();
        init(viewBean);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(CustomGridViewMeta viewBean)</span> {
        <span class="hljs-built_in">this</span>.setProperties(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassGridProperties</span>(viewBean));
        <span class="hljs-built_in">this</span>.setAlias(viewBean.getName());
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>ç®¡ç†ç½‘æ ¼æ•°æ®</li>
<li>å¤„ç†ç½‘æ ¼äº‹ä»¶</li>
<li>æä¾›ç½‘æ ¼äº¤äº’</li>
<li>æ”¯æŒåˆ†é¡µå’Œæ’åº</li>
</ul>
<h3 data-id="heading-53">ç”Ÿæˆå™¨</h3>
<h4 data-id="heading-54">GenCustomViewJava</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenCustomViewJava</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GenJavaTask</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException {
        List&lt;JavaGenSource&gt; sources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-comment">// 1. ç”Ÿæˆè§†å›¾ç±»</span>
        sources.add(generateViewClass());
        
        <span class="hljs-comment">// 2. ç”Ÿæˆå­—æ®µé…ç½®</span>
        sources.add(generateFieldConfigs());
        
        <span class="hljs-comment">// 3. ç”Ÿæˆäº‹ä»¶å¤„ç†å™¨</span>
        sources.add(generateEventHandlers());
        
        <span class="hljs-keyword">return</span> sources;
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>ç”Ÿæˆè§†å›¾å±‚ä»£ç </li>
<li>ç”Ÿæˆå­—æ®µé…ç½®</li>
<li>ç”Ÿæˆäº‹ä»¶å¤„ç†å™¨</li>
<li>ç®¡ç†è§†å›¾ä¾èµ–</li>
</ul>
<h2 data-id="heading-55">å¯æ‰§è¡Œ Action</h2>
<h3 data-id="heading-56">create-group</h3>
<p><strong>æè¿°</strong>ï¼šåˆ›å»ºåˆ†ç»„ç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>groupName</code>ï¼šåˆ†ç»„åç§°</li>
<li><code>fields</code>ï¼šå­—æ®µåˆ—è¡¨</li>
<li><code>events</code>ï¼šäº‹ä»¶åˆ—è¡¨</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯å‚æ•°</li>
<li>åˆ›å»º NlpGroupUIComponent å®ä¾‹</li>
<li>ç”Ÿæˆè§†å›¾ä»£ç </li>
<li>ç”Ÿæˆä»“å‚¨ä»£ç </li>
<li>è¿”å›ç”Ÿæˆçš„ä»£ç </li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ç”¨æˆ·ï¼šåˆ›å»ºä¸€ä¸ªåˆ†ç»„ç»„ä»¶
LLMï¼šä½¿ç”¨ Component Skill çš„ <span class="hljs-keyword">create</span><span class="hljs-operator">-</span><span class="hljs-keyword">group</span> Action
å‚æ•°ï¼š{"groupName": "UserGroup", "fields": [...], "events": [...]}
ç»“æœï¼šç”Ÿæˆ UserGroup.java å’Œç›¸å…³ä»£ç 
</code></pre>
<h3 data-id="heading-57">create-grid</h3>
<p><strong>æè¿°</strong>ï¼šåˆ›å»ºç½‘æ ¼ç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>gridName</code>ï¼šç½‘æ ¼åç§°</li>
<li><code>columns</code>ï¼šåˆ—é…ç½®</li>
<li><code>dataUrl</code>ï¼šæ•°æ® URL</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯å‚æ•°</li>
<li>åˆ›å»º NlpGridUIComponent å®ä¾‹</li>
<li>ç”Ÿæˆè§†å›¾ä»£ç </li>
<li>ç”Ÿæˆä»“å‚¨ä»£ç </li>
<li>è¿”å›ç”Ÿæˆçš„ä»£ç </li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">ç”¨æˆ·ï¼šåˆ›å»ºä¸€ä¸ªç½‘æ ¼ç»„ä»¶
LLMï¼šä½¿ç”¨ Component Skill çš„ create-<span class="hljs-attribute">grid</span> Action
å‚æ•°ï¼š{"gridName": <span class="hljs-string">"UserGrid"</span>, <span class="hljs-string">"columns"</span>: [...], <span class="hljs-string">"dataUrl"</span>: <span class="hljs-string">"/api/users"</span>}
ç»“æœï¼šç”Ÿæˆ UserGrid<span class="hljs-selector-class">.java</span> å’Œç›¸å…³ä»£ç 
</code></pre>
<h3 data-id="heading-58">create-tree</h3>
<p><strong>æè¿°</strong>ï¼šåˆ›å»ºæ ‘å½¢ç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>treeName</code>ï¼šæ ‘å½¢åç§°</li>
<li><code>treeField</code>ï¼šæ ‘å­—æ®µ</li>
<li><code>parentField</code>ï¼šçˆ¶å­—æ®µ</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯å‚æ•°</li>
<li>åˆ›å»º TreeGridUIComponent å®ä¾‹</li>
<li>ç”Ÿæˆè§†å›¾ä»£ç </li>
<li>ç”Ÿæˆä»“å‚¨ä»£ç </li>
<li>è¿”å›ç”Ÿæˆçš„ä»£ç </li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">ç”¨æˆ·ï¼šåˆ›å»ºä¸€ä¸ªæ ‘å½¢ç»„ä»¶
LLMï¼šä½¿ç”¨ Component Skill çš„ <span class="hljs-built_in">create</span>-tree Action
å‚æ•°ï¼š{<span class="hljs-string">"treeName"</span>: <span class="hljs-string">"DepartmentTree"</span>, <span class="hljs-string">"treeField"</span>: <span class="hljs-string">"id"</span>, <span class="hljs-string">"parentField"</span>: <span class="hljs-string">"parentId"</span>}
ç»“æœï¼šç”Ÿæˆ DepartmentTree.java å’Œç›¸å…³ä»£ç 
</code></pre>
<h2 data-id="heading-59">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-60">åœºæ™¯ 1ï¼šåˆ›å»ºç”¨æˆ·åˆ†ç»„è¡¨å•</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªç”¨æˆ·åˆ†ç»„è¡¨å•
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Component Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ create-group Action
<span class="hljs-bullet">3.</span> ç”Ÿæˆåˆ†ç»„ç»„ä»¶ä»£ç 
<span class="hljs-bullet">4.</span> è¿”å›ç”Ÿæˆçš„ä»£ç 
</code></pre>
<h3 data-id="heading-61">åœºæ™¯ 2ï¼šåˆ›å»ºç”¨æˆ·æ•°æ®ç½‘æ ¼</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªç”¨æˆ·æ•°æ®ç½‘æ ¼
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Component Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ create-grid Action
<span class="hljs-bullet">3.</span> ç”Ÿæˆç½‘æ ¼ç»„ä»¶ä»£ç 
<span class="hljs-bullet">4.</span> è¿”å›ç”Ÿæˆçš„ä»£ç 
</code></pre>
<h2 data-id="heading-62">æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>é€‰æ‹©åˆé€‚çš„ç»„ä»¶ç±»å‹</strong>ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©åˆ†ç»„ã€ç½‘æ ¼æˆ–æ ‘å½¢ç»„ä»¶</li>
<li><strong>é…ç½®å­—æ®µå’Œåˆ—</strong>ï¼šåˆç†é…ç½®å­—æ®µå’Œåˆ—å±æ€§</li>
<li><strong>å¤„ç†äº‹ä»¶å’Œäº¤äº’</strong>ï¼šå®ç°å¿…è¦çš„äº‹ä»¶å¤„ç†å’Œäº¤äº’é€»è¾‘</li>
<li><strong>ä¼˜åŒ–æ€§èƒ½</strong>ï¼šä½¿ç”¨åˆ†é¡µã€æ‡’åŠ è½½ç­‰ä¼˜åŒ–æŠ€æœ¯</li>
</ol>
<pre><code class="hljs language-scala" lang="scala">
#### <span class="hljs-number">4.2</span><span class="hljs-number">.4</span> <span class="hljs-type">Metadata</span> <span class="hljs-type">Skill</span> å®ç°

**.trae/skills/metadata-skill.md**ï¼š

```markdown
# <span class="hljs-type">Metadata</span> <span class="hljs-type">Skill</span>

## æ¦‚è¿°

<span class="hljs-type">Metadata</span> <span class="hljs-type">Skill</span> æä¾›å…ƒæ•°æ®çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›ï¼ŒåŒ…æ‹¬å…ƒæ•°æ®è§£æã€éªŒè¯å’Œä»£ç ç”Ÿæˆã€‚

## çŸ¥è¯†å†…å®¹

### æ ¸å¿ƒç±»

#### <span class="hljs-type">CustomViewMeta</span>

```java
public <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomViewMeta&lt;F</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FieldFormConfig</span>, <span class="hljs-title">I</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">UIItem</span>, <span class="hljs-title">C</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">UIComponent&gt;</span> </span>{
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> caption;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> desc;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> methodName;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> domainId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> sourceClassName;
    <span class="hljs-keyword">private</span> <span class="hljs-type">ModuleViewType</span> moduleViewType;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">F</span>&gt; allFields;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">F</span>&gt; fields;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">Event</span>&gt; events;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">MenuItem</span>&gt; menus;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">ToolBar</span>&gt; toolBars;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">BottomBar</span>&gt; bottomBars;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">ContextMenu</span>&gt; contextMenus;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">ModuleFormulaInst</span>&gt; formulas;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">CustomBean</span>&gt; annotationBeans;
    
    public <span class="hljs-keyword">abstract</span> <span class="hljs-type">F</span> createFieldConfig();
    public <span class="hljs-keyword">abstract</span> <span class="hljs-type">I</span> createUIItem();
    public <span class="hljs-keyword">abstract</span> <span class="hljs-type">C</span> createUIComponent();
    
    public <span class="hljs-type">List</span>&lt;<span class="hljs-type">CustomBean</span>&gt; getAnnotationBeans() {
        <span class="hljs-type">List</span>&lt;<span class="hljs-type">CustomBean</span>&gt; annotationBeans = <span class="hljs-keyword">new</span> <span class="hljs-type">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getModuleBean() != <span class="hljs-literal">null</span>) {
            annotationBeans.addAll(<span class="hljs-keyword">this</span>.getModuleBean().getAnnotationBeans());
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getDataBean() != <span class="hljs-literal">null</span>) {
            annotationBeans.add(<span class="hljs-keyword">this</span>.getDataBean());
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getFieldAggConfig() != <span class="hljs-literal">null</span>) {
            annotationBeans.addAll(<span class="hljs-keyword">this</span>.getFieldAggConfig().getAnnotationBeans());
        }
        <span class="hljs-keyword">return</span> annotationBeans;
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>å­˜å‚¨è§†å›¾é…ç½®ä¿¡æ¯</li>
<li>ç®¡ç†å­—æ®µå’Œäº‹ä»¶</li>
<li>æ”¯æŒè§†å›¾çš„åŠ¨æ€æ›´æ–°</li>
<li>æä¾›æ³¨è§£ä¿¡æ¯</li>
</ul>
<h4 data-id="heading-63">CustomDataMeta</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomDataMeta</span> {
    
    <span class="hljs-keyword">private</span> String dataUrl;
    <span class="hljs-keyword">private</span> String editorPath;
    <span class="hljs-keyword">private</span> String addPath;
    <span class="hljs-keyword">private</span> String delPath;
    <span class="hljs-keyword">private</span> String sortPath;
    <span class="hljs-keyword">private</span> String saveRowPath;
    <span class="hljs-keyword">private</span> String saveAllRowPath;
    <span class="hljs-keyword">private</span> String searchUrl;
    <span class="hljs-keyword">private</span> String reloadUrl;
    <span class="hljs-keyword">private</span> String selectUrl;
    <span class="hljs-keyword">private</span> String unSelectUrl;
    <span class="hljs-keyword">private</span> String selectAllUrl;
    <span class="hljs-keyword">private</span> String unSelectAllUrl;
    <span class="hljs-keyword">private</span> String exportUrl;
    <span class="hljs-keyword">private</span> String importUrl;
    <span class="hljs-keyword">private</span> String customUrl;
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>å­˜å‚¨æ•°æ®é…ç½®ä¿¡æ¯</li>
<li>ç®¡ç†æ•°æ® URL å’Œè·¯å¾„</li>
<li>æ”¯æŒæ•°æ®çš„åŠ¨æ€é…ç½®</li>
<li>æä¾›æ•°æ®è®¿é—®æ¥å£</li>
</ul>
<h4 data-id="heading-64">MethodConfig</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodConfig</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CustomViewMeta</span>, K <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CustomDataMeta</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;MethodConfig&gt; {
    
    <span class="hljs-keyword">private</span> String className;
    <span class="hljs-keyword">private</span> String desc;
    <span class="hljs-keyword">private</span> ModuleViewType moduleViewType;
    <span class="hljs-keyword">private</span> UIModule UIModule;
    <span class="hljs-keyword">private</span> CustomModuleMeta moduleBean;
    <span class="hljs-keyword">private</span> MethodConfig methodAPIBean;
    <span class="hljs-keyword">private</span> DomainInst domainInst;
    <span class="hljs-keyword">private</span> T view;
    <span class="hljs-keyword">private</span> K dataBean;
    <span class="hljs-keyword">private</span> BridgeClass bridgeClass;
    <span class="hljs-keyword">private</span> BridgeClass parentClass;
    <span class="hljs-keyword">private</span> String url;
    <span class="hljs-keyword">private</span> String caption;
    <span class="hljs-keyword">private</span> String methodName;
    <span class="hljs-keyword">private</span> String expression;
    <span class="hljs-keyword">private</span> String filter;
    <span class="hljs-keyword">private</span> String itemsExpression;
    <span class="hljs-keyword">private</span> String metaInfo;
    <span class="hljs-keyword">private</span> String fieldInfo;
    <span class="hljs-keyword">private</span> RequestMappingBean requestMapping;
    <span class="hljs-keyword">private</span> RequestBodyBean requestBody;
    <span class="hljs-keyword">private</span> Set&lt;RequestParamBean&gt; paramSet;
    <span class="hljs-keyword">private</span> RouteMenuMeta routeMenuBean;
    <span class="hljs-keyword">private</span> FieldAggConfig fieldAggConfig;
    <span class="hljs-keyword">private</span> CustomFieldMeta FieldMeta;
    <span class="hljs-keyword">private</span> RefBean refBean;
    <span class="hljs-keyword">private</span> CustomAPICallMeta api;
    <span class="hljs-keyword">private</span> List&lt;CustomBean&gt; annotationBeans;
    
    <span class="hljs-keyword">public</span> List&lt;CustomBean&gt; <span class="hljs-title function_">getAnnotationBeans</span><span class="hljs-params">()</span> {
        List&lt;CustomBean&gt; annotationBeans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.getApi() != <span class="hljs-literal">null</span>) {
            annotationBeans.addAll(<span class="hljs-built_in">this</span>.getApi().getAnnotationBeans());
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.isModule()) {
            annotationBeans.addAll(<span class="hljs-built_in">this</span>.getModuleBean().getAnnotationBeans());
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.getDataBean() != <span class="hljs-literal">null</span>) {
                annotationBeans.add(<span class="hljs-built_in">this</span>.getDataBean());
            }
        }
        <span class="hljs-keyword">if</span> (routeMenuBean != <span class="hljs-literal">null</span>) {
            annotationBeans.add(routeMenuBean);
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.getFieldAggConfig() != <span class="hljs-literal">null</span>) {
            List&lt;CustomBean&gt; FieldMetas = <span class="hljs-built_in">this</span>.getFieldAggConfig().getAnnotationBeans();
            <span class="hljs-keyword">for</span> (CustomBean customBean : FieldMetas) {
                <span class="hljs-keyword">if</span> (!annotationBeans.contains(customBean)) {
                    annotationBeans.add(customBean);
                }
            }
        }
        <span class="hljs-keyword">if</span> (requestMapping != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-built_in">this</span>.getPublicMethod()) {
            annotationBeans.add(requestMapping);
        }
        <span class="hljs-keyword">if</span> (getResponseBody() || api != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (!annotationBeans.contains(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleCustomBean</span>(ResponseBody.class))) {
                annotationBeans.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleCustomBean</span>(ResponseBody.class));
            }
        }
        <span class="hljs-keyword">return</span> annotationBeans;
    }
    
    <span class="hljs-meta">@JSONField(serialize = false)</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMetaInfo</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.getMethod() != <span class="hljs-literal">null</span>) {
            List&lt;RequestParamBean&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>(<span class="hljs-built_in">this</span>.getParamSet());
            
            <span class="hljs-keyword">if</span> (isModule() &amp;&amp; parentEuPackage != <span class="hljs-literal">null</span>) {
                <span class="hljs-type">String</span> <span class="hljs-variable">euClassName</span> <span class="hljs-operator">=</span> parentEuPackage + <span class="hljs-string">"."</span> + getJavaSimpleName();
                <span class="hljs-built_in">this</span>.metaInfo = MethodUtil.toMethodStr(<span class="hljs-built_in">this</span>.getMethod(), 
                    getViewType(), euClassName, requestBody, params).toString();
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">this</span>.metaInfo = MethodUtil.toMethodStr(<span class="hljs-built_in">this</span>.getMethod(), 
                    getViewType(), getJavaSimpleName(), requestBody, params).toString();
            }
        }
        <span class="hljs-keyword">return</span> metaInfo;
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>ç®¡ç†æ–¹æ³•çš„å…ƒæ•°æ®</li>
<li>è¿æ¥ä¸šåŠ¡æ–¹æ³•å’Œ UI ç»„ä»¶</li>
<li>æä¾›æ³¨è§£ä¿¡æ¯</li>
<li>ç”Ÿæˆæ–¹æ³•ç­¾å</li>
</ul>
<h2 data-id="heading-65">å¯æ‰§è¡Œ Action</h2>
<h3 data-id="heading-66">parse-metadata</h3>
<p><strong>æè¿°</strong>ï¼šè§£æå…ƒæ•°æ®</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>source</code>ï¼šå…ƒæ•°æ®æºï¼ˆJSON/æ³¨è§£ï¼‰</li>
<li><code>type</code>ï¼šå…ƒæ•°æ®ç±»å‹</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯æºæ ¼å¼</li>
<li>è§£æå…ƒæ•°æ®</li>
<li>éªŒè¯å…ƒæ•°æ®å®Œæ•´æ€§</li>
<li>è¿”å›è§£æç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">ç”¨æˆ·ï¼šè§£æå…ƒæ•°æ®
<span class="hljs-type">LLMï¼šä½¿ç”¨</span> <span class="hljs-type">Metadata</span> <span class="hljs-type">Skill</span> çš„ parse<span class="hljs-operator">-</span>metadata <span class="hljs-type">Action</span>
å‚æ•°ï¼š{<span class="hljs-string">"source"</span>: <span class="hljs-string">"{<span class="hljs-subst">\"</span>viewClassName<span class="hljs-subst">\"</span>: <span class="hljs-subst">\"</span>UserView<span class="hljs-subst">\"</span>, ...}"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"json"</span>}
ç»“æœï¼šè¿”å› <span class="hljs-type">MethodConfig</span> å¯¹è±¡
</code></pre>
<h3 data-id="heading-67">validate-metadata</h3>
<p><strong>æè¿°</strong>ï¼šéªŒè¯å…ƒæ•°æ®</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>metadata</code>ï¼šå…ƒæ•°æ®å¯¹è±¡</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯å¿…å¡«å­—æ®µ</li>
<li>éªŒè¯å­—æ®µç±»å‹</li>
<li>éªŒè¯å¼•ç”¨å…³ç³»</li>
<li>è¿”å›éªŒè¯ç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json">ç”¨æˆ·ï¼šéªŒè¯å…ƒæ•°æ®
LLMï¼šä½¿ç”¨ Metadata Skill çš„ validate-metadata Action
å‚æ•°ï¼š<span class="hljs-punctuation">{</span><span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> methodConfig<span class="hljs-punctuation">}</span>
ç»“æœï¼šéªŒè¯é€šè¿‡
</code></pre>
<h3 data-id="heading-68">generate-code</h3>
<p><strong>æè¿°</strong>ï¼šç”Ÿæˆä»£ç </p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>metadata</code>ï¼šå…ƒæ•°æ®å¯¹è±¡</li>
<li><code>type</code>ï¼šä»£ç ç±»å‹</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>é€‰æ‹©ç”Ÿæˆå™¨</li>
<li>æ‰§è¡Œä»£ç ç”Ÿæˆ</li>
<li>ç¼–è¯‘ç”Ÿæˆçš„ä»£ç </li>
<li>è¿”å›ç”Ÿæˆçš„ä»£ç </li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">ç”¨æˆ·ï¼šç”Ÿæˆä»£ç 
LLMï¼šä½¿ç”¨ Metadata Skill çš„ generate-<span class="hljs-selector-tag">code</span> Action
å‚æ•°ï¼š{"metadata": methodConfig, <span class="hljs-string">"type"</span>: <span class="hljs-string">"view"</span>}
ç»“æœï¼šç”Ÿæˆè§†å›¾ä»£ç å’Œä»“å‚¨ä»£ç 
</code></pre>
<h2 data-id="heading-69">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-70">åœºæ™¯ 1ï¼šä» JSON è§£æå…ƒæ•°æ®</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šä» JSON è§£æå…ƒæ•°æ®
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Metadata Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ parse-metadata Action
<span class="hljs-bullet">3.</span> è§£æ JSON é…ç½®
<span class="hljs-bullet">4.</span> è¿”å› MethodConfig å¯¹è±¡
</code></pre>
<h3 data-id="heading-71">åœºæ™¯ 2ï¼šç”Ÿæˆç»„ä»¶ä»£ç </h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šç”Ÿæˆç»„ä»¶ä»£ç 
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Metadata Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ generate-code Action
<span class="hljs-bullet">3.</span> ç”Ÿæˆè§†å›¾ä»£ç å’Œä»“å‚¨ä»£ç 
<span class="hljs-bullet">4.</span> è¿”å›ç”Ÿæˆçš„ä»£ç 
</code></pre>
<h2 data-id="heading-72">æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä½¿ç”¨å…ƒæ•°æ®é©±åŠ¨</strong>ï¼šé€šè¿‡å…ƒæ•°æ®é…ç½®ç”Ÿæˆä»£ç </li>
<li><strong>éªŒè¯å…ƒæ•°æ®å®Œæ•´æ€§</strong>ï¼šç¡®ä¿å…ƒæ•°æ®é…ç½®æ­£ç¡®</li>
<li><strong>é€‰æ‹©åˆé€‚çš„ä»£ç ç±»å‹</strong>ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©ç”Ÿæˆçš„ä»£ç ç±»å‹</li>
<li><strong>ä¼˜åŒ–ç”Ÿæˆæ€§èƒ½</strong>ï¼šä½¿ç”¨ç¼“å­˜å’Œå¹¶è¡Œç”Ÿæˆ</li>
</ol>
<pre><code class="hljs language-arduino" lang="arduino">
### <span class="hljs-number">4.3</span> Skill é›†æˆå®ç°

#### <span class="hljs-number">4.3</span><span class="hljs-number">.1</span> Skill Loader å®ç°

```java
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkillLoader</span> {
    
    <span class="hljs-keyword">private</span> Map&lt;<span class="hljs-type">String</span>, Skill&gt; skillCache = <span class="hljs-keyword">new</span> ConcurrentHashMap&lt;&gt;();
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> Skill <span class="hljs-title">loadSkill</span><span class="hljs-params">(<span class="hljs-type">String</span> skillName)</span> throws JDSException </span>{
        <span class="hljs-comment">// 1. æ£€æŸ¥ç¼“å­˜</span>
        Skill cachedSkill = skillCache.<span class="hljs-built_in">get</span>(skillName);
        <span class="hljs-keyword">if</span> (cachedSkill != null) {
            <span class="hljs-keyword">return</span> cachedSkill;
        }
        
        <span class="hljs-comment">// 2. åŠ è½½ Skill å®šä¹‰</span>
        <span class="hljs-type">String</span> skillPath = <span class="hljs-string">".trae/skills/"</span> + skillName + <span class="hljs-string">"-skill.md"</span>;
        <span class="hljs-type">String</span> skillContent = <span class="hljs-built_in">readFile</span>(skillPath);
        
        <span class="hljs-comment">// 3. è§£æ Skill å®šä¹‰</span>
        Skill skill = <span class="hljs-built_in">parseSkillDefinition</span>(skillContent);
        
        <span class="hljs-comment">// 4. ç¼“å­˜ Skill</span>
        skillCache.<span class="hljs-built_in">put</span>(skillName, skill);
        
        <span class="hljs-keyword">return</span> skill;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">invalidateSkill</span><span class="hljs-params">(<span class="hljs-type">String</span> skillName)</span> </span>{
        skillCache.<span class="hljs-built_in">remove</span>(skillName);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;<span class="hljs-type">String</span>&gt; <span class="hljs-title">getAvailableSkills</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">File</span> skillsDir = <span class="hljs-keyword">new</span> <span class="hljs-built_in">File</span>(<span class="hljs-string">".trae/skills"</span>);
        <span class="hljs-built_in">File</span>[] skillFiles = skillsDir.<span class="hljs-built_in">listFiles</span>((dir, name) -&gt; 
            name.<span class="hljs-built_in">endsWith</span>(<span class="hljs-string">"-skill.md"</span>));
        
        <span class="hljs-keyword">return</span> Arrays.<span class="hljs-built_in">stream</span>(skillFiles)
                .<span class="hljs-built_in">map</span>(<span class="hljs-built_in">File</span>::getName)
                .<span class="hljs-built_in">map</span>(name -&gt; name.<span class="hljs-built_in">replace</span>(<span class="hljs-string">"-skill.md"</span>, <span class="hljs-string">""</span>))
                .<span class="hljs-built_in">collect</span>(Collectors.<span class="hljs-built_in">toList</span>());
    }
}
</code></pre>
<h4 data-id="heading-73">4.3.2 Skill Context å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkillContext</span> {
    
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> List&lt;String&gt; loadedClasses = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> List&lt;String&gt; loadedGenerators = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> List&lt;String&gt; loadedTemplates = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addClass</span><span class="hljs-params">(Class&lt;?&gt; clazz)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> clazz.getName();
        <span class="hljs-keyword">if</span> (!loadedClasses.contains(className)) {
            loadedClasses.add(className);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addGenerator</span><span class="hljs-params">(Class&lt;?&gt; generator)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">generatorName</span> <span class="hljs-operator">=</span> generator.getName();
        <span class="hljs-keyword">if</span> (!loadedGenerators.contains(generatorName)) {
            loadedGenerators.add(generatorName);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addTemplate</span><span class="hljs-params">(String templateName)</span> {
        <span class="hljs-keyword">if</span> (!loadedTemplates.contains(templateName)) {
            loadedTemplates.add(templateName);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">applyParams</span><span class="hljs-params">(Map&lt;String, Object&gt; params)</span> {
        <span class="hljs-keyword">if</span> (params != <span class="hljs-literal">null</span>) {
            data.putAll(params);
        }
    }
    
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getParam</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> data.get(key);
    }
    
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getLoadedClasses</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(loadedClasses);
    }
    
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getLoadedGenerators</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(loadedGenerators);
    }
    
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getLoadedTemplates</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(loadedTemplates);
    }
}
</code></pre>
<h4 data-id="heading-74">4.3.3 LLM é›†æˆç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LLMIntegration</span> {
    
    <span class="hljs-keyword">private</span> SkillOrchestrator orchestrator;
    <span class="hljs-keyword">private</span> SkillLoader skillLoader;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LLMIntegration</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.skillLoader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillLoader</span>();
        <span class="hljs-built_in">this</span>.orchestrator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillOrchestrator</span>();
        
        <span class="hljs-comment">// æ³¨å†Œæ‰€æœ‰ Skill</span>
        registerSkills();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerSkills</span><span class="hljs-params">()</span> {
        orchestrator.registerSkill(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FoundationSkill</span>());
        orchestrator.registerSkill(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ModuleSkill</span>());
        orchestrator.registerSkill(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentSkill</span>());
        orchestrator.registerSkill(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MetadataSkill</span>());
    }
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">processUserRequest</span><span class="hljs-params">(String userRequest)</span> <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-comment">// 1. åˆ†æç”¨æˆ·è¯·æ±‚</span>
        <span class="hljs-type">RequestAnalysis</span> <span class="hljs-variable">analysis</span> <span class="hljs-operator">=</span> analyzeRequest(userRequest);
        
        <span class="hljs-comment">// 2. é€‰æ‹©åˆé€‚çš„ Skill</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">skillName</span> <span class="hljs-operator">=</span> selectSkill(analysis);
        
        <span class="hljs-comment">// 3. å‡†å¤‡å‚æ•°</span>
        Map&lt;String, Object&gt; params = prepareParams(analysis);
        
        <span class="hljs-comment">// 4. æ‰§è¡Œ Skill</span>
        <span class="hljs-type">SkillResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> orchestrator.execute(skillName, params);
        
        <span class="hljs-comment">// 5. è¿”å›ç»“æœ</span>
        <span class="hljs-keyword">return</span> formatResult(result);
    }
    
    <span class="hljs-keyword">private</span> RequestAnalysis <span class="hljs-title function_">analyzeRequest</span><span class="hljs-params">(String userRequest)</span> {
        <span class="hljs-type">RequestAnalysis</span> <span class="hljs-variable">analysis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestAnalysis</span>();
        
        <span class="hljs-comment">// åˆ†æè¯·æ±‚ç±»å‹</span>
        <span class="hljs-keyword">if</span> (userRequest.contains(<span class="hljs-string">"åˆ›å»º"</span>) &amp;&amp; userRequest.contains(<span class="hljs-string">"åŸºç¡€ç»„ä»¶"</span>)) {
            analysis.setSkillName(<span class="hljs-string">"foundation"</span>);
            analysis.setActionName(<span class="hljs-string">"create-base-component"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (userRequest.contains(<span class="hljs-string">"åˆ›å»º"</span>) &amp;&amp; userRequest.contains(<span class="hljs-string">"æ¨¡å—"</span>)) {
            analysis.setSkillName(<span class="hljs-string">"module"</span>);
            analysis.setActionName(<span class="hljs-string">"create-module"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (userRequest.contains(<span class="hljs-string">"åˆ›å»º"</span>) &amp;&amp; userRequest.contains(<span class="hljs-string">"ç½‘æ ¼"</span>)) {
            analysis.setSkillName(<span class="hljs-string">"component"</span>);
            analysis.setActionName(<span class="hljs-string">"create-grid"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (userRequest.contains(<span class="hljs-string">"è§£æ"</span>) &amp;&amp; userRequest.contains(<span class="hljs-string">"å…ƒæ•°æ®"</span>)) {
            analysis.setSkillName(<span class="hljs-string">"metadata"</span>);
            analysis.setActionName(<span class="hljs-string">"parse-metadata"</span>);
        }
        
        <span class="hljs-keyword">return</span> analysis;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">selectSkill</span><span class="hljs-params">(RequestAnalysis analysis)</span> {
        <span class="hljs-keyword">return</span> analysis.getSkillName();
    }
    
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; <span class="hljs-title function_">prepareParams</span><span class="hljs-params">(RequestAnalysis analysis)</span> {
        Map&lt;String, Object&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-comment">// ä»ç”¨æˆ·è¯·æ±‚ä¸­æå–å‚æ•°</span>
        <span class="hljs-comment">// ...</span>
        
        <span class="hljs-keyword">return</span> params;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">formatResult</span><span class="hljs-params">(SkillResult result)</span> {
        <span class="hljs-comment">// æ ¼å¼åŒ–ç»“æœ</span>
        <span class="hljs-keyword">return</span> result.toString();
    }
}
</code></pre>
<h3 data-id="heading-75">4.4 å®æˆ˜æ¡ˆä¾‹</h3>
<h4 data-id="heading-76">4.4.1 æ¡ˆä¾‹ 1ï¼šåˆ›å»ºç”¨æˆ·ç®¡ç†æ¨¡å—</h4>
<p><strong>ç”¨æˆ·è¯·æ±‚</strong>ï¼š</p>
<pre><code class="hljs">åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ŒåŒ…å«ç”¨æˆ·åˆ—è¡¨ç½‘æ ¼å’Œç”¨æˆ·ç¼–è¾‘è¡¨å•
</code></pre>
<p><strong>LLM å¤„ç†æµç¨‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ†æè¯·æ±‚</strong>ï¼š</p>
<ul>
<li>è¯†åˆ«ä¸ºåˆ›å»ºæ¨¡å—è¯·æ±‚</li>
<li>é€‰æ‹© Module Skill</li>
</ul>
</li>
<li>
<p><strong>æ‰§è¡Œ Skill</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ create-module Action</li>
<li>ç”Ÿæˆæ¨¡å—ä»£ç </li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆç»„ä»¶</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ Component Skill çš„ create-grid Action</li>
<li>ç”Ÿæˆç”¨æˆ·ç½‘æ ¼ä»£ç </li>
<li>è°ƒç”¨ Component Skill çš„ create-group Action</li>
<li>ç”Ÿæˆåˆ†ç»„è¡¨å•ä»£ç </li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆä»“å‚¨</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ Metadata Skill çš„ generate-code Action</li>
<li>ç”Ÿæˆä»“å‚¨ä»£ç </li>
</ul>
</li>
<li>
<p><strong>è¿”å›ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">å·²æˆåŠŸåˆ›å»ºç”¨æˆ·ç®¡ç†æ¨¡å—ï¼š
<span class="hljs-deletion">- UserModule.java</span>
<span class="hljs-deletion">- UserGrid.java</span>
<span class="hljs-deletion">- UserForm.java</span>
<span class="hljs-deletion">- UserRepository.java</span>
<span class="hljs-deletion">- UserService.java</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-77">4.4.2 æ¡ˆä¾‹ 2ï¼šä» JSON é…ç½®ç”Ÿæˆä»£ç </h4>
<p><strong>ç”¨æˆ·è¯·æ±‚</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">ä»ä»¥ä¸‹ <span class="hljs-title class_">JSON</span> é…ç½®ç”Ÿæˆä»£ç ï¼š
{
  <span class="hljs-string">"viewClassName"</span>: <span class="hljs-string">"net.ooder.example.UserTableView"</span>,
  <span class="hljs-string">"moduleViewType"</span>: <span class="hljs-string">"GRIDCONFIG"</span>,
  <span class="hljs-string">"fields"</span>: [
    {<span class="hljs-string">"fieldname"</span>: <span class="hljs-string">"id"</span>, <span class="hljs-string">"caption"</span>: <span class="hljs-string">"ID"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"input"</span>, <span class="hljs-string">"editable"</span>: <span class="hljs-literal">false</span>},
    {<span class="hljs-string">"fieldname"</span>: <span class="hljs-string">"name"</span>, <span class="hljs-string">"caption"</span>: <span class="hljs-string">"å§“å"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"input"</span>, <span class="hljs-string">"editable"</span>: <span class="hljs-literal">true</span>},
    {<span class="hljs-string">"fieldname"</span>: <span class="hljs-string">"age"</span>, <span class="hljs-string">"caption"</span>: <span class="hljs-string">"å¹´é¾„"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>, <span class="hljs-string">"editable"</span>: <span class="hljs-literal">true</span>}
  ]
}
</code></pre>
<p><strong>LLM å¤„ç†æµç¨‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ†æè¯·æ±‚</strong>ï¼š</p>
<ul>
<li>è¯†åˆ«ä¸ºå…ƒæ•°æ®è§£æè¯·æ±‚</li>
<li>é€‰æ‹© Metadata Skill</li>
</ul>
</li>
<li>
<p><strong>è§£æå…ƒæ•°æ®</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ parse-metadata Action</li>
<li>è§£æ JSON é…ç½®</li>
<li>ç”Ÿæˆ MethodConfig å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆä»£ç </strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ generate-code Action</li>
<li>ç”Ÿæˆè§†å›¾ä»£ç </li>
<li>ç”Ÿæˆä»“å‚¨ä»£ç </li>
</ul>
</li>
<li>
<p><strong>ç¼–è¯‘ä»£ç </strong>ï¼š</p>
<ul>
<li>è°ƒç”¨åŠ¨æ€ç¼–è¯‘</li>
<li>ç”Ÿæˆç±»æ–‡ä»¶</li>
</ul>
</li>
<li>
<p><strong>è¿”å›ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">å·²æˆåŠŸç”Ÿæˆä»£ç ï¼š
<span class="hljs-deletion">- UserTableView.java</span>
<span class="hljs-deletion">- UserRepository.java</span>
<span class="hljs-deletion">- UserService.java</span>
ç¼–è¯‘æˆåŠŸ
</code></pre>
</li>
</ol>
<h4 data-id="heading-78">4.4.3 æ¡ˆä¾‹ 3ï¼šåˆ›å»ºæ ‘å½¢ç»„ç»‡ç»“æ„</h4>
<p><strong>ç”¨æˆ·è¯·æ±‚</strong>ï¼š</p>
<pre><code class="hljs">åˆ›å»ºä¸€ä¸ªéƒ¨é—¨æ ‘å½¢ç»„ä»¶ï¼Œæ˜¾ç¤ºç»„ç»‡ç»“æ„
</code></pre>
<p><strong>LLM å¤„ç†æµç¨‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ†æè¯·æ±‚</strong>ï¼š</p>
<ul>
<li>è¯†åˆ«ä¸ºåˆ›å»ºæ ‘å½¢ç»„ä»¶è¯·æ±‚</li>
<li>é€‰æ‹© Component Skill</li>
</ul>
</li>
<li>
<p><strong>æ‰§è¡Œ Skill</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ create-tree Action</li>
<li>ç”Ÿæˆæ ‘å½¢ç»„ä»¶ä»£ç </li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆä»“å‚¨</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ Metadata Skill çš„ generate-code Action</li>
<li>ç”Ÿæˆä»“å‚¨ä»£ç </li>
</ul>
</li>
<li>
<p><strong>è¿”å›ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">å·²æˆåŠŸåˆ›å»ºéƒ¨é—¨æ ‘å½¢ç»„ä»¶ï¼š
<span class="hljs-deletion">- DepartmentTree.java</span>
<span class="hljs-deletion">- DepartmentRepository.java</span>
<span class="hljs-deletion">- DepartmentService.java</span>
</code></pre>
</li>
</ol>
<h2 data-id="heading-79">äº”ã€æ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-80">5.1 å…³é”®æˆæœ</h3>
<h4 data-id="heading-81">5.1.1 BridgeCode è®¾è®¡æˆæœ</h4>
<ol>
<li>
<p><strong>å…ƒæ•°æ®é©±åŠ¨æ¶æ„</strong>ï¼š</p>
<ul>
<li>å®ç°äº†é…ç½®ä¸å®ç°çš„å®Œå…¨è§£è€¦</li>
<li>æ”¯æŒå¤šç§é…ç½®æ–¹å¼ï¼ˆJSON/æ³¨è§£ï¼‰</li>
<li>æä¾›äº†çµæ´»çš„æ‰©å±•èƒ½åŠ›</li>
</ul>
</li>
<li>
<p><strong>åˆ†å±‚ç”Ÿæˆç³»ç»Ÿ</strong>ï¼š</p>
<ul>
<li>è§†å›¾å±‚ã€ä»“å‚¨å±‚ã€èšåˆå±‚ä¸‰å±‚ç”Ÿæˆ</li>
<li>31 ä¸ªç”Ÿæˆå™¨è¦†ç›–æ‰€æœ‰åœºæ™¯</li>
<li>æ”¯æŒå¢é‡æ„å»ºå’Œå¹¶è¡Œç”Ÿæˆ</li>
</ul>
</li>
<li>
<p><strong>åŠ¨æ€ç¼–è¯‘æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>è¿è¡Œæ—¶ç¼–è¯‘ç”Ÿæˆçš„ä»£ç </li>
<li>æ”¯æŒçƒ­æ›´æ–°å’Œæ›¿æ¢</li>
<li>æä¾›äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
</ul>
</li>
</ol>
<h4 data-id="heading-82">5.1.2 åˆ†å±‚ SKILLS è®¾è®¡æˆæœ</h4>
<ol>
<li>
<p><strong>æ¸…æ™°çš„èŒè´£åˆ’åˆ†</strong>ï¼š</p>
<ul>
<li>Foundation Skillï¼šåŸºç¡€ç»„ä»¶èƒ½åŠ›</li>
<li>Module Skillï¼šæ¨¡å—ç®¡ç†èƒ½åŠ›</li>
<li>Component Skillï¼šå…·ä½“ç»„ä»¶èƒ½åŠ›</li>
<li>Metadata Skillï¼šå…ƒæ•°æ®å¤„ç†èƒ½åŠ›</li>
</ul>
</li>
<li>
<p><strong>å¯æ‰©å±•çš„æ¶æ„</strong>ï¼š</p>
<ul>
<li>æ”¯æŒæ–°å¢ Skill</li>
<li>æ”¯æŒ Skill ç»„åˆ</li>
<li>æ”¯æŒ Skill ç‰ˆæœ¬ç®¡ç†</li>
</ul>
</li>
<li>
<p><strong>å®Œæ•´çš„ Action ä½“ç³»</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ª Skill æä¾›å¤šä¸ª Action</li>
<li>Action æ”¯æŒå‚æ•°ä¼ é€’</li>
<li>Action æ”¯æŒç»“æœè¿”å›</li>
</ul>
</li>
</ol>
<h4 data-id="heading-83">5.1.3 Trae Solo å®è·µæˆæœ</h4>
<ol>
<li>
<p><strong>å®Œæ•´çš„é›†æˆæ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>Skill Loaderï¼šåŠ è½½å’Œç®¡ç† Skill</li>
<li>Skill Contextï¼šç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡</li>
<li>LLM Integrationï¼šé›†æˆ LLM å’Œ Skill</li>
</ul>
</li>
<li>
<p><strong>å®æˆ˜éªŒè¯</strong>ï¼š</p>
<ul>
<li>é€šè¿‡å¤šä¸ªå®æˆ˜æ¡ˆä¾‹éªŒè¯</li>
<li>è¦†ç›–ä¸»è¦ä½¿ç”¨åœºæ™¯</li>
<li>æä¾›äº†å®Œæ•´çš„ç¤ºä¾‹</li>
</ul>
</li>
<li>
<p><strong>æœ€ä½³å®è·µæŒ‡å¯¼</strong>ï¼š</p>
<ul>
<li>æä¾›äº†è¯¦ç»†çš„æœ€ä½³å®è·µ</li>
<li>æä¾›äº†å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ</li>
<li>æä¾›äº†æ€§èƒ½ä¼˜åŒ–å»ºè®®</li>
</ul>
</li>
</ol>
<h3 data-id="heading-84">5.2 æŠ€æœ¯äº®ç‚¹</h3>
<h4 data-id="heading-85">5.2.1 è®¾è®¡æ¨¡å¼åº”ç”¨</h4>
<ol>
<li>
<p><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>GenJavaTask å®šä¹‰ç”Ÿæˆæµç¨‹</li>
<li>å­ç±»å®ç°å…·ä½“ç”Ÿæˆé€»è¾‘</li>
</ul>
</li>
<li>
<p><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>ä¸åŒçš„ç”Ÿæˆå™¨å®ç°ä¸åŒçš„ç”Ÿæˆç­–ç•¥</li>
<li>è¿è¡Œæ—¶é€‰æ‹©åˆé€‚çš„ç”Ÿæˆå™¨</li>
</ul>
</li>
<li>
<p><strong>å·¥å‚æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>SkillLoader åˆ›å»º Skill å®ä¾‹</li>
<li>æ ¹æ®åç§°åŠ¨æ€åŠ è½½ Skill</li>
</ul>
</li>
<li>
<p><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸäº‹ä»¶é€šçŸ¥</li>
<li>Skill æ‰§è¡Œç»“æœé€šçŸ¥</li>
</ul>
</li>
</ol>
<h4 data-id="heading-86">5.2.2 æ€§èƒ½ä¼˜åŒ–</h4>
<ol>
<li>
<p><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>Skill ç¼“å­˜</li>
<li>ç”Ÿæˆç»“æœç¼“å­˜</li>
<li>æ¨¡æ¿ç¼“å­˜</li>
</ul>
</li>
<li>
<p><strong>å¹¶è¡Œå¤„ç†</strong>ï¼š</p>
<ul>
<li>å¹¶è¡Œç”Ÿæˆ</li>
<li>å¹¶è¡Œç¼–è¯‘</li>
<li>å¼‚æ­¥åŠ è½½</li>
</ul>
</li>
<li>
<p><strong>å¢é‡æ„å»º</strong>ï¼š</p>
<ul>
<li>åªç”Ÿæˆå˜æ›´çš„éƒ¨åˆ†</li>
<li>åªç¼–è¯‘å˜æ›´çš„æ–‡ä»¶</li>
<li>å‡å°‘æ„å»ºæ—¶é—´</li>
</ul>
</li>
</ol>
<h4 data-id="heading-87">5.2.3 å¯ç»´æŠ¤æ€§</h4>
<ol>
<li>
<p><strong>æ¸…æ™°çš„ä»£ç ç»“æ„</strong>ï¼š</p>
<ul>
<li>åˆ†å±‚æ¶æ„</li>
<li>èŒè´£æ˜ç¡®</li>
<li>æ˜“äºç†è§£å’Œç»´æŠ¤</li>
</ul>
</li>
<li>
<p><strong>å®Œæ•´çš„æ–‡æ¡£</strong>ï¼š</p>
<ul>
<li>Skill å®šä¹‰æ–‡æ¡£</li>
<li>ä½¿ç”¨ç¤ºä¾‹æ–‡æ¡£</li>
<li>æœ€ä½³å®è·µæ–‡æ¡£</li>
</ul>
</li>
<li>
<p><strong>è‡ªåŠ¨åŒ–æµ‹è¯•</strong>ï¼š</p>
<ul>
<li>å•å…ƒæµ‹è¯•</li>
<li>é›†æˆæµ‹è¯•</li>
<li>ç«¯åˆ°ç«¯æµ‹è¯•</li>
</ul>
</li>
</ol>
<h3 data-id="heading-88">5.3 æœªæ¥å±•æœ›</h3>
<h4 data-id="heading-89">5.3.1 çŸ­æœŸç›®æ ‡</h4>
<ol>
<li>
<p><strong>å®Œå–„ Skill ä½“ç³»</strong>ï¼š</p>
<ul>
<li>å¢åŠ æ›´å¤š Skill</li>
<li>ä¼˜åŒ–ç°æœ‰ Skill</li>
<li>æé«˜ Skill è´¨é‡</li>
</ul>
</li>
<li>
<p><strong>æå‡ç”Ÿæˆæ€§èƒ½</strong>ï¼š</p>
<ul>
<li>ä¼˜åŒ–ç”Ÿæˆç®—æ³•</li>
<li>æé«˜å¹¶è¡Œåº¦</li>
<li>å‡å°‘å†…å­˜å ç”¨</li>
</ul>
</li>
<li>
<p><strong>å¢å¼ºé›†æˆèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>æ”¯æŒæ›´å¤š LLM</li>
<li>æ”¯æŒæ›´å¤šå·¥å…·</li>
<li>æä¾›æ›´å¥½çš„é›†æˆä½“éªŒ</li>
</ul>
</li>
</ol>
<h4 data-id="heading-90">5.3.2 é•¿æœŸç›®æ ‡</h4>
<ol>
<li>
<p><strong>æ™ºèƒ½åŒ–ç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ AI ä¼˜åŒ–ç”Ÿæˆ</li>
<li>è‡ªåŠ¨æ£€æµ‹é—®é¢˜</li>
<li>è‡ªåŠ¨ä¿®å¤é”™è¯¯</li>
</ul>
</li>
<li>
<p><strong>å¯è§†åŒ–å·¥å…·</strong>ï¼š</p>
<ul>
<li>æä¾›å¯è§†åŒ–é…ç½®å·¥å…·</li>
<li>æä¾›å¯è§†åŒ–ç”Ÿæˆå·¥å…·</li>
<li>æä¾›å¯è§†åŒ–è°ƒè¯•å·¥å…·</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæ€ç³»ç»Ÿå»ºè®¾</strong>ï¼š</p>
<ul>
<li>æ„å»ºæ’ä»¶ç³»ç»Ÿ</li>
<li>æ„å»ºå¸‚åœºç³»ç»Ÿ</li>
<li>æ„å»ºç¤¾åŒºç³»ç»Ÿ</li>
</ul>
</li>
</ol>
<h2 data-id="heading-91">å…­ã€ç»“è®º</h2>
<p>æœ¬æ–‡æ·±å…¥è§£æäº† ooder æ¡†æ¶çš„ BridgeCode æœºåˆ¶ï¼Œä»è®¾è®¡åŸç†ã€ç”Ÿæˆç¼–è¯‘æµç¨‹ï¼Œåˆ°åˆ†å±‚ SKILLS è®¾è®¡ï¼Œæœ€åå±•ç¤ºäº†åœ¨ Trae Solo ç¯å¢ƒä¸­çš„ Skill æ„å»ºå®è·µã€‚</p>
<h3 data-id="heading-92">å…³é”®æ”¶è·</h3>
<ol>
<li>
<p><strong>BridgeCode è®¾è®¡åŸç†</strong>ï¼š</p>
<ul>
<li>å…ƒæ•°æ®é©±åŠ¨çš„ä¸‰å±‚æ¶æ„</li>
<li>31 ä¸ªç”Ÿæˆå™¨è¦†ç›–æ‰€æœ‰åœºæ™¯</li>
<li>åŠ¨æ€ç¼–è¯‘å’Œè¿è¡Œæ—¶ç»‘å®š</li>
</ul>
</li>
<li>
<p><strong>åˆ†å±‚ SKILLS è®¾è®¡</strong>ï¼š</p>
<ul>
<li>Foundationã€Moduleã€Componentã€Metadata å››å±‚ Skill</li>
<li>æ¸…æ™°çš„èŒè´£åˆ’åˆ†</li>
<li>å®Œæ•´çš„ Action ä½“ç³»</li>
</ul>
</li>
<li>
<p><strong>Trae Solo å®è·µ</strong>ï¼š</p>
<ul>
<li>å®Œæ•´çš„é›†æˆæ–¹æ¡ˆ</li>
<li>å¤šä¸ªå®æˆ˜æ¡ˆä¾‹</li>
<li>è¯¦ç»†çš„æœ€ä½³å®è·µ</li>
</ul>
</li>
</ol>
<p>è¿™ç§è®¾è®¡æ—¢ä¿æŒäº†æ¶æ„çš„æ¸…æ™°æ€§ï¼Œåˆæä¾›äº†å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›ï¼Œä¸º LLM çš„ä½¿ç”¨å’Œåç»­å¼€å‘æä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡å…ƒæ•°æ®é©±åŠ¨çš„ä»£ç ç”Ÿæˆå’Œåˆ†å±‚ SKILLS è®¾è®¡ï¼Œooder æ¡†æ¶å®ç°äº†é«˜æ•ˆçš„ A2UI ç»„ä»¶å¼€å‘ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§çš„å·¥å…·æ”¯æŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç«™åœ¨ Android çš„è§’åº¦ï¼ŒèŠèŠ Clean Architecture]]></title>    <link>https://juejin.cn/post/7603043152672358415</link>    <guid>https://juejin.cn/post/7603043152672358415</guid>    <pubDate>2026-02-05T08:54:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603043152672358415" data-draft-id="7599496293162287145" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç«™åœ¨ Android çš„è§’åº¦ï¼ŒèŠèŠ Clean Architecture"/> <meta itemprop="keywords" content="æ¶æ„,Kotlin,Android Jetpack"/> <meta itemprop="datePublished" content="2026-02-05T08:54:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿å¥å›"/> <meta itemprop="url" content="https://juejin.cn/user/2313804282603431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç«™åœ¨ Android çš„è§’åº¦ï¼ŒèŠèŠ Clean Architecture
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2313804282603431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿å¥å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T08:54:04.000Z" title="Thu Feb 05 2026 08:54:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>Clean Architecture</strong>ï¼ˆæ•´æ´æ¶æ„ï¼‰æ˜¯ç”±è‘—åè½¯ä»¶å·¥ç¨‹å¸ˆ Robert C. Martin æå‡ºçš„ä¸€ç§è½¯ä»¶è®¾è®¡ç†å¿µå’Œæ¶æ„æ¨¡å¼ï¼Œå®ƒé€šè¿‡ç»“æ„åŒ–çš„æ–¹å¼ç»„ç»‡ä»£ç ï¼Œä½¿ Android åº”ç”¨å…·å¤‡é«˜åº¦å¯ç»´æŠ¤æ€§ï¼Œå¯æµ‹è¯•æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<h2 data-id="heading-0">æ ¸å¿ƒæ€æƒ³</h2>
<p><strong>Clean Architecture</strong> çš„æ ¸å¿ƒåŸåˆ™æ˜¯ä¾èµ–è§„åˆ™ï¼šæºä»£ç ä¾èµ–åªèƒ½æŒ‡å‘å†…å±‚ï¼Œå†…å±‚ä¸åº”è¯¥çŸ¥é“ä»»ä½•å…³äºå¤–å±‚çš„ä¸œè¥¿ã€‚</p>
<ul>
<li>é¢†åŸŸå±‚ï¼ˆdomainï¼‰-&gt; ä¸ä¾èµ–ä»»ä½•å¤–å±‚ï¼Œçº¯ Kotlin/Javaï¼Œé›¶ Android æ¡†æ¶ä¾èµ–ï¼Œåªå®šä¹‰ä¸šåŠ¡è§„åˆ™ï¼ŒUseCase å’Œ Repository æ¥å£ã€‚</li>
<li>æ•°æ®å±‚ï¼ˆdataï¼‰-&gt; ä¾èµ–é¢†åŸŸå±‚ï¼Œå®ç°é¢†åŸŸå±‚å®šä¹‰çš„ Repository æ¥å£ï¼Œä½†é¢†åŸŸå±‚ä¸çŸ¥å…¶å®ç°ã€‚</li>
<li>è¡¨ç°å±‚ï¼ˆpresentationï¼‰-&gt; ä¾èµ–é¢†åŸŸå±‚ï¼Œé€šè¿‡ UseCase è°ƒç”¨ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç›´æ¥ä¾èµ–æ•°æ®å±‚ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d98264980bd9441f99223bebee0086a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5YGl5ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770887405&amp;x-signature=0DbxivgFnnr1BiSbk3MnNuXOUmk%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">åˆ†å±‚ç»“æ„</h2>
<p>å…ˆæ¥çœ‹ä¸€ä¸‹ Android çš„é¡¹ç›®ç»“æ„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b08fb6c4b62744479cf0e583f1877ba7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5YGl5ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770887405&amp;x-signature=ChuVYY3Dx9MSdiG4BNqLzgrH0HU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">é¢†åŸŸå±‚ - å†…å±‚</h3>
<p><strong>èŒè´£ä¸å®šä½</strong>ï¼š</p>
<ul>
<li>é¢†åŸŸå±‚æ˜¯æ ¸å¿ƒï¼Œæ‰¿è½½äº†é¡¹ç›®çœŸæ­£çš„ä¸šåŠ¡ä»·å€¼ã€‚</li>
<li>å®šä¹‰ä¸šåŠ¡è§„åˆ™å’Œä¸šåŠ¡æ¨¡å‹ï¼ŒåŒ…å«åº”ç”¨çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚</li>
<li>åªå…³å¿ƒè¦åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯æ€ä¹ˆåšã€‚</li>
</ul>
<p><strong>ä¸»è¦ç»„æˆ</strong>ï¼š</p>
<ul>
<li>å®ä½“ï¼ˆmodelï¼‰ï¼šè¡¨ç¤ºä¸šåŠ¡æ ¸å¿ƒå¯¹è±¡ã€‚</li>
<li>ç”¨ä¾‹ï¼ˆusecaseï¼‰ï¼šå°è£…ç‰¹å®šä¸šåŠ¡è¡Œä¸ºã€‚</li>
<li>ä»“åº“æ¥å£ï¼ˆrepositoryï¼‰ï¼šå®šä¹‰æ•°æ®æ“ä½œçš„å¥‘çº¦ï¼Œä¸åŒ…å«å®ç°ã€‚</li>
</ul>
<p><strong>å…³é”®ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>çº¯ Kotlin/Java ä»£ç ï¼Œä¸ä¾èµ– Android æ¡†æ¶ã€‚</li>
<li>ä¸ä¾èµ–ä»»ä½•ç¬¬ä¸‰æ–¹åº“ã€‚</li>
<li>æ˜¯æ•´ä¸ªé¡¹ç›®ä¸­æœ€ç¨³å®šçš„ä¸€å±‚ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Post</span>(
    <span class="hljs-keyword">val</span> id: String,
    <span class="hljs-keyword">val</span> name: String
)
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GetPostsUseCase</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> postRepository: PostRepository
) {
    <span class="hljs-keyword">suspend</span> <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">invoke</span><span class="hljs-params">(params: <span class="hljs-type">HashMap</span>&lt;<span class="hljs-type">String</span>, String&gt;)</span></span>: Result&lt;BaseResp&lt;List&lt;Post&gt;&gt;&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            Result.success(postRepository.getPosts(params))
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            Result.failure(e)
        }
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PostRepository</span> {
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getPosts</span><span class="hljs-params">(params: <span class="hljs-type">HashMap</span>&lt;<span class="hljs-type">String</span>, String&gt;)</span></span>: BaseResp&lt;List&lt;Post&gt;&gt;
}
</code></pre>
<h3 data-id="heading-3">æ•°æ®å±‚ - ä¸­é—´å±‚</h3>
<p><strong>èŒè´£ä¸å®šä½</strong>ï¼š</p>
<ul>
<li>è´Ÿè´£æ•°æ®ä»å“ªé‡Œæ¥ï¼Œå¦‚ä½•è·å–ã€‚</li>
<li>å¤„ç†æ•°æ®æ£€ç´¢å’Œå­˜å‚¨ã€‚</li>
<li>å®ç°é¢†åŸŸå±‚å®šä¹‰çš„æ•°æ®è®¿é—®æ¥å£ã€‚</li>
</ul>
<p><strong>ä¸»è¦ç»„æˆ</strong>ï¼š</p>
<ul>
<li>æ•°æ®æºï¼ˆdatasourceï¼‰ï¼šæœ¬åœ°æ•°æ®æºæˆ–è¿œç¨‹æ•°æ®æº</li>
<li>ä»“åº“å®ç°ï¼ˆrepositoryï¼‰ï¼šåè°ƒä¸åŒæ•°æ®æºï¼Œå®ç°é¢†åŸŸå±‚å®šä¹‰çš„ Repository æ¥å£ï¼Œå¤„ç†å¼‚å¸¸ï¼Œå°†æŠ€æœ¯å¼‚å¸¸è½¬æ¢ä¸ºä¸šåŠ¡å¯ç†è§£çš„ç»“æœã€‚</li>
</ul>
<p><strong>å…³é”®ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å¯ä»¥è‡ªç”±åˆ‡æ¢æ•°æ®æ¥æº</li>
<li>å˜åŒ–æœ€é¢‘ç¹çš„ä¸€å±‚</li>
<li>å¯æ ¹æ®éœ€æ±‚é€‰æ‹©ä¸åŒçš„æ•°æ®å­˜å‚¨æ–¹æ¡ˆ</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PostService</span> {
    <span class="hljs-meta">@GET(<span class="hljs-string">"/xzj/net/api/example/post"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getPosts</span><span class="hljs-params">(<span class="hljs-meta">@QueryMap</span> params: <span class="hljs-type">HashMap</span>&lt;<span class="hljs-type">String</span>, String&gt;)</span></span>: BaseResp&lt;List&lt;Post&gt;&gt;
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PostRepositoryImpl</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> postService: PostService
) : PostRepository {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getPosts</span><span class="hljs-params">(params: <span class="hljs-type">HashMap</span>&lt;<span class="hljs-type">String</span>, String&gt;)</span></span>: BaseResp&lt;List&lt;Post&gt;&gt; {
        <span class="hljs-keyword">return</span> postService.getPosts(params)
    }
}
</code></pre>
<h3 data-id="heading-4">è¡¨ç°å±‚ - å¤–å±‚</h3>
<p><strong>èŒè´£ä¸å®šä½</strong>ï¼š</p>
<ul>
<li>è´Ÿè´£ UI å±•ç¤ºå’Œç”¨æˆ·äº¤äº’ã€‚</li>
<li>å°†æ•°æ®è½¬æ¢ä¸ºç”¨æˆ·å¯æ„ŸçŸ¥çš„ç•Œé¢çŠ¶æ€ã€‚</li>
<li>ä¸åŒ…å«ä¸šåŠ¡è§„åˆ™ï¼Œåªè´Ÿè´£ç®¡ç† UIStateã€‚</li>
</ul>
<p><strong>ä¸»è¦ç»„æˆ</strong>ï¼š</p>
<ul>
<li>viewï¼šè§†å›¾ç»„ä»¶</li>
<li>ViewModelï¼šé€šè¿‡ usecase ä¸ é¢†åŸŸå±‚äº¤äº’</li>
<li>stateï¼šUI çŠ¶æ€</li>
</ul>
<p><strong>å…³é”®ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>é€šå¸¸ä½¿ç”¨ MVVM æˆ– MVI æ¨¡å¼ç»„ç»‡ä»£ç ã€‚</li>
<li>ä¸“æ³¨äº UI State ç®¡ç†ã€‚</li>
<li>å¯è½»æ¾æ›´æ¢ç”¨æˆ·ç•Œé¢æ¡†æ¶æˆ–è¿›è¡Œç•Œé¢ä¼˜åŒ–ï¼Œè€Œä¸å½±å“ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PostListState</span>(
    <span class="hljs-keyword">val</span> posts: List&lt;Post&gt; = emptyList(),
    <span class="hljs-keyword">val</span> isLoading: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>,
    <span class="hljs-keyword">val</span> error: String? = <span class="hljs-literal">null</span>
)
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@HiltViewModel</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PostListViewModel</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> getPostsUseCase: GetPostsUseCase
) : ViewModel() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _state = MutableStateFlow(PostListState())
    <span class="hljs-keyword">val</span> state: StateFlow&lt;PostListState&gt; = _state.asStateFlow()

    <span class="hljs-keyword">init</span> {
        loadPosts()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadPosts</span><span class="hljs-params">()</span></span> = viewModelScope.launch {
        _state.update { it.copy(isLoading = <span class="hljs-literal">true</span>) }
        <span class="hljs-keyword">val</span> params = hashMapOf(
            <span class="hljs-string">"param1"</span> to <span class="hljs-string">"param1"</span>,
            <span class="hljs-string">"param2"</span> to <span class="hljs-string">"param2"</span>
        )
        getPostsUseCase(params).onSuccess { posts -&gt;
            _state.update { it.copy(posts = posts.<span class="hljs-keyword">data</span>, isLoading = <span class="hljs-literal">false</span>) }
        }.onFailure { error -&gt;
            _state.update { it.copy(error = error.message, isLoading = <span class="hljs-literal">false</span>) }
        }
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">PostListScreen</span><span class="hljs-params">(viewModel: <span class="hljs-type">PostListViewModel</span> = hiltViewModel()</span></span>) {
    <span class="hljs-keyword">val</span> state <span class="hljs-keyword">by</span> viewModel.state.collectAsState()

    <span class="hljs-keyword">when</span> {
        state.isLoading -&gt; CircularProgressIndicator()
        state.error != <span class="hljs-literal">null</span> -&gt; Text(<span class="hljs-string">"Error: <span class="hljs-subst">${state.error}</span>"</span>)
        <span class="hljs-keyword">else</span> -&gt; LazyColumn {
            items(state.posts) { post -&gt;
                Text(post.name, fontSize = <span class="hljs-number">20.</span>sp, color = Color.Red)
            }
        }
    }
}
</code></pre>
<p>Hilt é€šè¿‡ @HiltViewModel å’Œ hiltViewModel() è‡ªåŠ¨å¤„ç† ViewModel çš„ä¾èµ–æ³¨å…¥ã€‚åœ¨ Compose ä¸­ä½¿ç”¨ hiltViewModel() è·å– ViewModel å®ä¾‹ï¼Œç¡®ä¿ ViewModel åŠå…¶ä¾èµ–è¢«æ­£ç¡®åˆå§‹åŒ–ã€‚</p>
<h2 data-id="heading-5">Hilt ä¾èµ–æ³¨å…¥é…ç½®</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Module</span>
<span class="hljs-meta">@InstallIn(SingletonComponent::class)</span>
<span class="hljs-keyword">object</span> NetworkModule {

    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideRetrofit</span><span class="hljs-params">()</span></span>: Retrofit {
        <span class="hljs-keyword">return</span> Retrofit.Builder()
            .baseUrl(BASE_URL)
            .addConverterFactory(GsonConverterFactory.create())
            .build()
    }

    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">providePostService</span><span class="hljs-params">(retrofit: <span class="hljs-type">Retrofit</span>)</span></span>: PostService {
        <span class="hljs-keyword">return</span> retrofit.create(PostService::<span class="hljs-keyword">class</span>.java)
    }
}


<span class="hljs-meta">@Module</span>
<span class="hljs-meta">@InstallIn(SingletonComponent::class)</span>
<span class="hljs-keyword">object</span> AppModule {

    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">providePostRepository</span><span class="hljs-params">(
        postService: <span class="hljs-type">PostService</span>
    )</span></span>: PostRepository {
        <span class="hljs-keyword">return</span> PostRepositoryImpl(postService)
    }

    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideGetPostsUseCase</span><span class="hljs-params">(
        postRepository: <span class="hljs-type">PostRepository</span>
    )</span></span>: GetPostsUseCase {
        <span class="hljs-keyword">return</span> GetPostsUseCase(postRepository)
    }
}
</code></pre>
<h2 data-id="heading-6">æ„ä¹‰ä½•åœ¨</h2>
<p>çœ‹åˆ°è¿™ï¼Œä½ ä»¬å¯èƒ½è¦åæ§½äº†ï¼Œå®ç°ä¸€ä¸ªåŠŸèƒ½è¦å»ºè¿™ä¹ˆå¤šå±‚ï¼Œè¿™ä¹ˆå¤šç±»ï¼Œä»£ç é‡å¤šè¿™ä¹ˆå¤šï¼Œä¸æ˜¯å¾’å¢å·¥ä½œé‡å—ï¼ŸçœŸçš„æœ‰æ„ä¹‰å—ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œå¾’å¢å·¥ä½œé‡æ˜¯å®¢è§‚å­˜åœ¨çš„ï¼Œæ¯”å¦‚ä½ å®ç°ä¸€ä¸ªç®€å•çš„åŠŸèƒ½ - è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œä½ éœ€è¦åˆ›å»ºé¢†åŸŸå±‚ï¼Œæ•°æ®å±‚ï¼Œè¡¨ç°å±‚ï¼Œè¿˜æœ‰å„ç§æ¥å£ä¸æ¥å£å®ç°ï¼Œå¯¹æ¯” â€œä¸€æŠŠæ¢­â€ å†™æ³•ï¼ˆActivity ç›´æ¥è°ƒç”¨æ–¹æ³•è·å–æ•°æ®ï¼‰ï¼Œä»£ç é‡å¯èƒ½è¦ç¿»ä¸‰å€ä»¥ä¸Šã€‚</p>
<p>å¾·å›½è‘—åå“²å­¦å®¶é»‘æ ¼å°”æ›¾è¯´è¿‡ï¼šå­˜åœ¨å³åˆç†ã€‚æ‰€ä»¥ï¼ŒClean Architecture æ—¢ç„¶å­˜åœ¨ï¼Œé‚£è‚¯å®šæ˜¯æœ‰æ„ä¹‰çš„ï¼å®ƒçš„æ„ä¹‰å°±åœ¨äºï¼šç”¨çŸ­æœŸæˆæœ¬æ¢é•¿æœŸæ”¶ç›Šã€‚</p>
<p>ä¸¾ä¸ªéœ€æ±‚å˜æ›´çš„ä¾‹å­å§ï¼Œå°±æ‹¿å¸¸è§çš„ç”¨æˆ·ä¿¡æ¯æ¥è¯´ï¼Œä¸€å¼€å§‹åªè¦æ±‚æ˜¾ç¤º user.nameï¼Œä½†æ˜¯å‡ å¤©åï¼Œäº§å“çªç„¶æ”¹ä¸»æ„äº†ï¼ŒVIP ç”¨æˆ·å¾—æ˜¾ç¤º VIP å’Œåå­—ã€‚</p>
<p>æŒ‰ç…§ â€œä¸€æŠŠæ¢­â€ çš„å†™æ³•ï¼Œè§„åˆ™æ•£è½åœ¨å„ä¸ª Composable ä¸­çš„ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">UserCard</span><span class="hljs-params">(user: <span class="hljs-type">User</span>)</span></span> {
    Card {
        <span class="hljs-comment">// ç¬¬ä¸€å¤„ï¼šä¸šåŠ¡è§„åˆ™ç›´æ¥å†™æ­»åœ¨ UI é‡Œï¼</span>
        Text(text = <span class="hljs-keyword">if</span> (user.isVip) <span class="hljs-string">"VIP: <span class="hljs-subst">${user.name}</span>"</span> <span class="hljs-keyword">else</span> user.name) 
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">UserProfileHeader</span><span class="hljs-params">(user: <span class="hljs-type">User</span>)</span></span> {
    Column {
        <span class="hljs-comment">// ç¬¬äºŒå¤„ï¼è§„åˆ™é‡å¤</span>
        Text(text = <span class="hljs-keyword">if</span> (user.isVip) <span class="hljs-string">"VIP: <span class="hljs-subst">${user.name}</span>"</span> <span class="hljs-keyword">else</span> user.name, style = Title)
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">SearchItem</span><span class="hljs-params">(user: <span class="hljs-type">User</span>)</span></span> {
    Row {
        <span class="hljs-comment">// ç¬¬ä¸‰å¤„ï¼æ”¹éœ€æ±‚æ—¶éœ€å…¨å±€æœç´¢æ›¿æ¢</span>
        Text(text = <span class="hljs-keyword">if</span> (user.isVip) <span class="hljs-string">"VIP: <span class="hljs-subst">${user.name}</span>"</span> <span class="hljs-keyword">else</span> user.name)
    }
}
</code></pre>
<p>å¦‚æœä½¿ç”¨ Clean Architecture çš„è¯ï¼Œåªéœ€ä¿®æ”¹ domain å±‚å³å¯ï¼Œå…¶æœ¬èº«å°±æ˜¯è§„åˆ™çš„é›†ä¸­ç®¡ç†ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GetDisplayNameUseCase</span> { <span class="hljs-comment">//è§„åˆ™å”¯ä¸€æºå¤´ï¼</span>
    <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">invoke</span><span class="hljs-params">(user: <span class="hljs-type">User</span>)</span></span>: String =
        <span class="hljs-keyword">if</span> (user.isVip) <span class="hljs-string">"VIP: <span class="hljs-subst">${user.name}</span>"</span> <span class="hljs-keyword">else</span> user.name
        <span class="hljs-comment">// åªæ”¹è¿™é‡Œï¼</span>
}
</code></pre>
<p>åªéœ€ä¿®æ”¹ UseCaseï¼Œå…¶ä½™éƒ½ä¸ç”¨ä¿®æ”¹ï¼Œç®€ç›´ä¸è¦å¤ªä¼˜é›…ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@HiltViewModel</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewModel</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> getDisplayName: GetDisplayNameUseCase <span class="hljs-comment">// ä¾èµ–æ³¨å…¥</span>
) : ViewModel() {
    <span class="hljs-comment">// ViewModel åªè´Ÿè´£è°ƒç”¨è§„åˆ™ï¼Œä¸åŒ…å«è§„åˆ™æœ¬èº«ã€‚</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getDisplayName</span><span class="hljs-params">(user: <span class="hljs-type">User</span>)</span></span> = getDisplayName(user)
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">UserCard</span><span class="hljs-params">(user: <span class="hljs-type">User</span>, viewModel: <span class="hljs-type">UserViewModel</span> = hiltViewModel()</span></span>) {
    Card {
        <span class="hljs-comment">// Composable çº¯ç²¹åªå…³æ³¨æ˜¾ç¤ºä»€ä¹ˆï¼Œä¸å…³å¿ƒä¸ºä»€ä¹ˆè¿™æ ·æ˜¾ç¤ºã€‚</span>
        Text(text = viewModel.getDisplayName(user))
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">UserProfileHeader</span><span class="hljs-params">(user: <span class="hljs-type">User</span>, viewModel: <span class="hljs-type">UserViewModel</span> = hiltViewModel()</span></span>) {
    Text(text = viewModel.getDisplayName(user), style = Title)
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">SearchItem</span><span class="hljs-params">(user: <span class="hljs-type">User</span>, viewModel: <span class="hljs-type">UserViewModel</span> = hiltViewModel()</span></span>) {
    Text(text = viewModel.getDisplayName(user))
}
</code></pre>
<p>ä¸‹æ¬¡äº§å“å†è¯´åŠ ä»€ä¹ˆå…¶ä»–ä¿¡æ¯çš„æ—¶å€™ï¼Œä½ åªéœ€å¾®ç¬‘æ‰“å¼€ UseCase å³å¯ï¼Œè€Œä¸ç”¨ç¿»éæ‰€æœ‰ Composableã€‚</p>
<p>ä½†ä¹Ÿä¸æ˜¯æ‰€æœ‰é¡¹ç›®éƒ½è¯¥ç”¨ï¼Œè€Œæ˜¯è¯¥ç”¨æ—¶å¿…é¡»ç”¨ï¼å¯¹äºå¤§å‹ä¸”éœ€æŒç»­è¿­ä»£çš„é¡¹ç›®ï¼Œæ¶æ„æ²»ç†æ˜¯å¿…ç„¶è¦æ±‚ï¼Œéšç€ä»£ç é‡å¢åŠ ï¼Œæ”¹åŠ¨æˆæœ¬ä¸æ–­ä¸Šå‡ï¼Œæ‰€ä»¥æ¯”è¾ƒé€‚ç”¨äº â€œä¸­å¤§å‹â€ï¼Œâ€œå›¢é˜Ÿåä½œâ€ï¼Œâ€œé«˜å¯é æ€§è¦æ±‚â€ çš„é¡¹ç›®ã€‚å¦‚æœä½ çš„é¡¹ç›®æœ¬èº«è§„æ¨¡ä¸å¤§ï¼Œä¹Ÿä¸éœ€è¦èŠ±é¢å¤–ç²¾åŠ›æ²»ç†æ¶æ„ï¼Œå¯¹äºå°è§„æ¨¡é¡¹ç›®ï¼Œå¼•å…¥ Clean Architecture å¯èƒ½ä¼šå¢åŠ å¼€å‘æˆæœ¬ï¼Œæ‰€ä»¥ä¸é€‚ç”¨ã€‚</p>
<blockquote>
<p>æ¶æ„ä¸æ˜¯ç‚«æŠ€ï¼Œè€Œæ˜¯ä¸ºæœªæ¥çš„è‡ªå·±å’Œå›¢é˜Ÿå‡è´Ÿï¼Œæˆ‘ä»¬ä¸èƒ½ â€œä¸ºäº†æ¶æ„è€Œæ¶æ„â€ï¼Œè‹¥é¡¹ç›®æ³¨å®š â€œä¸€æ¬¡æ€§â€ï¼Œè¯·å¤§èƒ†ç®€åŒ–ï¼Œæ•ˆç‡ä¼˜å…ˆï¼Œè‹¥é¡¹ç›®éœ€ â€œæ´»ä¸‹å»ã€é•¿å‡ºæ¥â€ï¼Œå°±å¾—æ¥å—çŸ­æœŸæˆæœ¬ï¼ŒæŠ•èµ„é•¿æœŸå¥åº·ã€‚Clean Architecture çš„ç²¾é«“å°±åœ¨äºå®ƒä¸æ‰¿è¯º â€œå†™å¾—æ›´å¿«â€ï¼Œä½†æ‰¿è¯º â€œæ”¹å¾—æ›´ç¨³â€ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Veauryï¼šè®©Vueå’ŒReactç»„ä»¶åœ¨åŒä¸€åº”ç”¨ä¸­å…±å­˜çš„ç¥å™¨]]></title>    <link>https://juejin.cn/post/7602900131540697129</link>    <guid>https://juejin.cn/post/7602900131540697129</guid>    <pubDate>2026-02-05T01:47:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602900131540697129" data-draft-id="7602807243705647167" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Veauryï¼šè®©Vueå’ŒReactç»„ä»¶åœ¨åŒä¸€åº”ç”¨ä¸­å…±å­˜çš„ç¥å™¨"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-02-05T01:47:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜_June"/> <meta itemprop="url" content="https://juejin.cn/user/395479916219517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Veauryï¼šè®©Vueå’ŒReactç»„ä»¶åœ¨åŒä¸€åº”ç”¨ä¸­å…±å­˜çš„ç¥å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479916219517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜_June
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T01:47:34.000Z" title="Thu Feb 05 2026 01:47:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰ç«¯å¼€å‘è€…å¸¸å¸¸é¢ä¸´è¿™æ ·çš„å›°å¢ƒï¼šVueé¡¹ç›®éœ€è¦ä½¿ç”¨Reactç”Ÿæ€çš„ä¼˜ç§€ç»„ä»¶ï¼Œæˆ–è€…Reacté¡¹ç›®æƒ³å¼•å…¥Vueçš„ä¼˜é›…è§£å†³æ–¹æ¡ˆã€‚è¿‡å»ï¼Œè¿™å‡ ä¹æ„å‘³ç€éœ€è¦å®Œå…¨é‡å†™æˆ–å¯»æ‰¾ç¬¨é‡çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<p>ä»Šå¤©ä»‹ç»çš„Veauryå°†å½»åº•æ”¹å˜è¿™ä¸€å±€é¢ã€‚è¿™æ˜¯ä¸€ä¸ªä¸“é—¨è®¾è®¡ç”¨äºåœ¨Vueå’ŒReactä¹‹é—´å®ç°æ— ç¼äº’æ“ä½œçš„å·¥å…·åº“ã€‚</p>
<h2 data-id="heading-0">æ ¸å¿ƒé—®é¢˜ä¸æŒ‘æˆ˜</h2>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œè·¨æ¡†æ¶ç»„ä»¶å¤ç”¨é¢ä¸´è¯¸å¤šæŒ‘æˆ˜ï¼š</p>
<ol>
<li><strong>ä¸Šä¸‹æ–‡éš”ç¦»</strong>ï¼šVueå’ŒReactæœ‰å„è‡ªç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ç³»ç»Ÿï¼Œæ•°æ®ä¼ é€’å›°éš¾</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸä¸åŒ¹é…</strong>ï¼šä¸¤ä¸ªæ¡†æ¶çš„ç”Ÿå‘½å‘¨æœŸæ¨¡å‹å®Œå…¨ä¸åŒ</li>
<li><strong>äº‹ä»¶ç³»ç»Ÿå·®å¼‚</strong>ï¼šVueä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶ï¼ŒReactä½¿ç”¨åˆæˆäº‹ä»¶</li>
<li><strong>æ¸²æŸ“æœºåˆ¶ä¸åŒ</strong>ï¼šVueåŸºäºæ¨¡æ¿ï¼ŒReactåŸºäºJSX</li>
</ol>
<h2 data-id="heading-1">Veauryçš„æŠ€æœ¯å®ç°åŸç†</h2>
<p>Veauryé€šè¿‡é«˜é˜¶ç»„ä»¶(HOC)çš„æ–¹å¼ï¼Œåœ¨ä¸¤ç§æ¡†æ¶ä¹‹é—´æ­å»ºæ¡¥æ¢ã€‚å…¶æ ¸å¿ƒæ€è·¯æ˜¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€åŒ–ç‰ˆå®ç°åŸç†ç¤ºæ„</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createCrossFrameworkWrapper</span>(<span class="hljs-params">OriginalComponent, targetFramework</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Wrapper</span>(<span class="hljs-params">props, context</span>) {
    <span class="hljs-comment">// å¤„ç†propsè½¬æ¢</span>
    <span class="hljs-keyword">const</span> convertedProps = <span class="hljs-title function_">convertProps</span>(props, targetFramework);
    
    <span class="hljs-comment">// å¤„ç†ä¸Šä¸‹æ–‡ä¼ é€’</span>
    <span class="hljs-keyword">const</span> frameworkContext = <span class="hljs-title function_">adaptContext</span>(context, targetFramework);
    
    <span class="hljs-comment">// æ ¹æ®ç›®æ ‡æ¡†æ¶é€‰æ‹©æ¸²æŸ“æ–¹å¼</span>
    <span class="hljs-keyword">if</span> (targetFramework === <span class="hljs-string">'vue'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">renderAsVue</span>(<span class="hljs-title class_">OriginalComponent</span>, convertedProps, frameworkContext);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">renderAsReact</span>(<span class="hljs-title class_">OriginalComponent</span>, convertedProps, frameworkContext);
    }
  };
}
</code></pre>
<h2 data-id="heading-2">ä¸»è¦ç‰¹æ€§</h2>
<h3 data-id="heading-3">1. å®Œæ•´çš„Vue 3æ”¯æŒ</h3>
<ul>
<li>æ”¯æŒComposition APIå’ŒOptions API</li>
<li>æ”¯æŒTeleportã€Suspenseç­‰Vue 3ç‰¹æ€§</li>
<li>å®Œæ•´çš„å“åº”å¼ç³»ç»Ÿé›†æˆ</li>
</ul>
<h3 data-id="heading-4">2. åŒå‘ä¸Šä¸‹æ–‡å…±äº«</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Reactç»„ä»¶å¯ä»¥è®¿é—®Vueçš„provide/inject</span>
<span class="hljs-comment">// Vueç»„ä»¶å¯ä»¥è®¿é—®Reactçš„Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">SharedComponent</span> = (<span class="hljs-params">{ theme }</span>) =&gt; {
  <span class="hljs-comment">// themeå¯ä»¥æ¥è‡ªVueçš„provideæˆ–Reactçš„Context</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">theme-</span>${<span class="hljs-attr">theme</span>}`}&gt;</span>å…±äº«ä¸»é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};
</code></pre>
<h3 data-id="heading-5">3. çº¯æ¨¡å¼ï¼ˆPure Modeï¼‰</h3>
<p>æ¶ˆé™¤åŒ…è£…å™¨å¸¦æ¥çš„é¢å¤–DOMå…ƒç´ ï¼Œä¿æŒç»„ä»¶æ ‘çš„æ•´æ´ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨çº¯æ¨¡å¼åŒ…è£…</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">PureReactComponent</span> = <span class="hljs-title function_">applyPureReactInVue</span>(<span class="hljs-title class_">ReactComponent</span>);
<span class="hljs-comment">// æ¸²æŸ“ç»“æœæ²¡æœ‰é¢å¤–çš„divåŒ…è£¹</span>
</code></pre>
<h3 data-id="heading-6">4. ç”Ÿå‘½å‘¨æœŸæ˜ å°„</h3>
<p>Veauryæ™ºèƒ½åœ°æ˜ å°„ä¸¤ä¸ªæ¡†æ¶çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>





















<table><thead><tr><th>Vue ç”Ÿå‘½å‘¨æœŸ</th><th>React ç­‰æ•ˆ</th></tr></thead><tbody><tr><td><code>onMounted</code></td><td><code>useEffect(() =&gt; {}, [])</code></td></tr><tr><td><code>onUpdated</code></td><td><code>useEffect(() =&gt; {})</code></td></tr><tr><td><code>onUnmounted</code></td><td><code>useEffect(() =&gt; () =&gt; {})</code></td></tr></tbody></table>
<h2 data-id="heading-7">å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-8">åœºæ™¯ä¸€ï¼šåœ¨Vueé¡¹ç›®ä¸­ä½¿ç”¨Reactç»„ä»¶</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Vueç»„ä»¶ä¸»ä½“<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç›´æ¥ä½¿ç”¨Reactç»„ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ReactDataTable</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">"tableData"</span> @<span class="hljs-attr">row-click</span>=<span class="hljs-string">"handleRowClick"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { applyPureReactInVue } <span class="hljs-keyword">from</span> <span class="hljs-string">'veaury'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDataTable</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ReactDataTable.jsx'</span>;

<span class="hljs-comment">// å°†Reactç»„ä»¶è½¬æ¢ä¸ºVueå¯ç”¨çš„ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ReactDataTable</span> = <span class="hljs-title function_">applyPureReactInVue</span>(<span class="hljs-title class_">ReactDataTable</span>);

<span class="hljs-keyword">const</span> tableData = <span class="hljs-title function_">ref</span>([
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'é¡¹ç›®A'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">100</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'é¡¹ç›®B'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">200</span> }
]);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleRowClick</span> = (<span class="hljs-params">rowData</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¡Œç‚¹å‡»äº‹ä»¶:'</span>, rowData);
  <span class="hljs-comment">// å¤„ç†æ¥è‡ªReactç»„ä»¶çš„äº‹ä»¶</span>
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-9">åœºæ™¯äºŒï¼šåœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨Vueç»„ä»¶</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { applyVueInReact } <span class="hljs-keyword">from</span> <span class="hljs-string">'veaury'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">VueRichEditor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./VueRichEditor.vue'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">RichEditor</span> = <span class="hljs-title function_">applyVueInReact</span>(<span class="hljs-title class_">VueRichEditor</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [content, setContent] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [isDarkMode, setIsDarkMode] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleContentChange</span> = (<span class="hljs-params">newContent</span>) =&gt; {
    <span class="hljs-title function_">setContent</span>(newContent);
    <span class="hljs-comment">// å¤„ç†æ¥è‡ªVueç»„ä»¶çš„äº‹ä»¶</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isDarkMode</span> ? '<span class="hljs-attr">dark-theme</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">light-theme</span>'}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Reactåº”ç”¨ä¸­çš„Vueå¯Œæ–‡æœ¬ç¼–è¾‘å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">RichEditor</span>
        <span class="hljs-attr">modelValue</span>=<span class="hljs-string">{content}</span>
        <span class="hljs-attr">onUpdate:modelValue</span>=<span class="hljs-string">{handleContentChange}</span>
        <span class="hljs-attr">darkMode</span>=<span class="hljs-string">{isDarkMode}</span>
        <span class="hljs-attr">v-slots</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">toolbar:</span> () =&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>è‡ªå®šä¹‰å·¥å…·æ <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        }}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsDarkMode(!isDarkMode)}&gt;
        åˆ‡æ¢ä¸»é¢˜
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-10">æ€§èƒ½è€ƒè™‘</h2>
<p>Veauryåœ¨æ€§èƒ½æ–¹é¢åšäº†å¤§é‡ä¼˜åŒ–ï¼š</p>
<ol>
<li><strong>æœ€å°åŒ–é‡æ¸²æŸ“</strong>ï¼šé€šè¿‡ç²¾ç»†çš„å“åº”å¼ä¾¦å¬ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“</li>
<li><strong>å†…å­˜æ•ˆç‡</strong>ï¼šåˆç†ç®¡ç†ç»„ä»¶å®ä¾‹ï¼Œé¿å…å†…å­˜æ³„æ¼</li>
<li><strong>æ„å»ºä¼˜åŒ–</strong>ï¼šæ”¯æŒTree-shakingï¼Œåªå¼•å…¥éœ€è¦çš„åŠŸèƒ½</li>
</ol>
<p>æ€§èƒ½å¯¹æ¯”ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»Ÿiframeæ–¹æ¡ˆ vs Veauryæ–¹æ¡ˆ</span>
<span class="hljs-comment">// iframeï¼šç‹¬ç«‹çš„DOMã€æ ·å¼å’Œä¸Šä¸‹æ–‡ï¼Œå¼€é”€å¤§</span>
<span class="hljs-comment">// Veauryï¼šå…±äº«åŒä¸€DOMï¼Œè½»é‡çº§åŒ…è£…ï¼Œæ€§èƒ½æ¥è¿‘åŸç”Ÿ</span>
</code></pre>
<h2 data-id="heading-11">ä¼ä¸šçº§åº”ç”¨å®è·µ</h2>
<h3 data-id="heading-12">æ¡ˆä¾‹ï¼šä½ä»£ç å¹³å°é›†æˆ</h3>
<p>æŸä½ä»£ç å¹³å°ä½¿ç”¨Veauryå®ç°æ’ä»¶ç³»ç»Ÿï¼š</p>
<ul>
<li>æ ¸å¿ƒæ¡†æ¶ï¼šVue 3 + TypeScript</li>
<li>æ’ä»¶ç”Ÿæ€ï¼šæ”¯æŒReactå’ŒVueä¸¤ç§æ’ä»¶</li>
<li>å®ç°æ•ˆæœï¼šå¼€å‘è€…å¯ä½¿ç”¨ä»»æ„æ¡†æ¶å¼€å‘æ’ä»¶</li>
</ul>
<h3 data-id="heading-13">æ¡ˆä¾‹ï¼šå¾®å‰ç«¯æ¶æ„</h3>
<p>åœ¨å¾®å‰ç«¯åœºæ™¯ä¸­ï¼ŒVeauryå¸®åŠ©ä¸åŒæŠ€æœ¯æ ˆçš„å­åº”ç”¨å…±äº«ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»åº”ç”¨(Vue)ä½¿ç”¨å­åº”ç”¨(React)çš„ç»„ä»¶åº“</span>
<span class="hljs-keyword">import</span> { applyPureReactInVue } <span class="hljs-keyword">from</span> <span class="hljs-string">'veaury'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDesignSystem</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'team-react-ds'</span>;

<span class="hljs-comment">// åœ¨Vueä¸»åº”ç”¨ä¸­ç›´æ¥ä½¿ç”¨Reactè®¾è®¡ç³»ç»Ÿ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">VueWrappedButton</span> = <span class="hljs-title function_">applyPureReactInVue</span>(<span class="hljs-title class_">ReactDesignSystem</span>.<span class="hljs-property">Button</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">VueWrappedModal</span> = <span class="hljs-title function_">applyPureReactInVue</span>(<span class="hljs-title class_">ReactDesignSystem</span>.<span class="hljs-property">Modal</span>);
</code></pre>
<h2 data-id="heading-14">é…ç½®ä¸æ„å»º</h2>
<h3 data-id="heading-15">Viteé…ç½®ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>;
<span class="hljs-keyword">import</span> veauryVitePlugins <span class="hljs-keyword">from</span> <span class="hljs-string">'veaury/vite'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">veauryVitePlugins</span>({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'vue'</span>, <span class="hljs-comment">// æˆ– 'react'ï¼Œæ ¹æ®ä¸»æ¡†æ¶é€‰æ‹©</span>
      <span class="hljs-attr">vueOptions</span>: {
        <span class="hljs-attr">reactivityTransform</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// å¯ç”¨å“åº”å¼è¯­æ³•ç³–</span>
      }
    })
  ],
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'veaury'</span>]
  }
});
</code></pre>
<h3 data-id="heading-16">Webpacké…ç½®è¦ç‚¹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.vue$/</span>,
        <span class="hljs-attr">use</span>: <span class="hljs-string">'vue-loader'</span>
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.jsx$/</span>,
        <span class="hljs-attr">use</span>: <span class="hljs-string">'babel-loader'</span>,
        <span class="hljs-attr">options</span>: {
          <span class="hljs-attr">presets</span>: [<span class="hljs-string">'@babel/preset-react'</span>]
        }
      }
    ]
  }
};
</code></pre>
<h2 data-id="heading-17">å±€é™æ€§è¯´æ˜</h2>
<p>å°½ç®¡VeauryåŠŸèƒ½å¼ºå¤§ï¼Œä½†ä»æœ‰ä¸€äº›é™åˆ¶ï¼š</p>
<ol>
<li><strong>éƒ¨åˆ†é«˜çº§ç‰¹æ€§</strong>ï¼šæŸäº›æ¡†æ¶ç‰¹å®šçš„é«˜çº§ç‰¹æ€§å¯èƒ½ä¸å®Œå…¨æ”¯æŒ</li>
<li><strong>å¼€å‘ä½“éªŒ</strong>ï¼šè°ƒè¯•æ—¶éœ€è¦äº†è§£ä¸¤ç§æ¡†æ¶</li>
<li><strong>å­¦ä¹ æˆæœ¬</strong>ï¼šå›¢é˜Ÿéœ€è¦åŒæ—¶ç†Ÿæ‚‰Vueå’ŒReact</li>
</ol>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p>å¯¹äºéœ€è¦åœ¨Vueå’ŒReactä¹‹é—´æ­å»ºæ¡¥æ¢çš„é¡¹ç›®ï¼ŒVeauryæä¾›äº†ä¸€ä¸ªæˆç†Ÿã€ç¨³å®šçš„è§£å†³æ–¹æ¡ˆã€‚æ— è®ºæ˜¯æ–°é¡¹ç›®æŠ€æœ¯é€‰å‹ï¼Œè¿˜æ˜¯è€é¡¹ç›®ç°ä»£åŒ–æ”¹é€ ï¼Œéƒ½å€¼å¾—è€ƒè™‘è¿™ä¸€å·¥å…·ã€‚</p>
<p><strong>æŠ€æœ¯æ ˆä¸åº”æˆä¸ºåˆ›æ–°çš„çº¦æŸï¼Œè€Œåº”æ˜¯å®ç°ç›®æ ‡çš„å·¥å…·ã€‚</strong> Veauryæ­£æ˜¯è¿™ä¸€ç†å¿µçš„å®è·µï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºåˆ›é€ ä»·å€¼ï¼Œè€Œä¸æ˜¯è¢«æ¡†æ¶ä¹‹äº‰æ‰€å›°æ‰°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨AIæ¨¡æ‹Ÿå®ç°ä¸€ä¸ª Claude Code CLI]]></title>    <link>https://juejin.cn/post/7603004323870179371</link>    <guid>https://juejin.cn/post/7603004323870179371</guid>    <pubDate>2026-02-05T00:35:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603004323870179371" data-draft-id="7602910573404209190" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨AIæ¨¡æ‹Ÿå®ç°ä¸€ä¸ª Claude Code CLI"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-05T00:35:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£è±¡å—"/> <meta itemprop="url" content="https://juejin.cn/user/2524134428655159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨AIæ¨¡æ‹Ÿå®ç°ä¸€ä¸ª Claude Code CLI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134428655159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£è±¡å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:35:01.000Z" title="Thu Feb 05 2026 00:35:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    26
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä»é›¶å¼€å§‹æ„å»ºç»ˆç«¯ AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œæ¢ç´¢ REPL äº¤äº’ã€è¾“å…¥ç¼“å†²åŒºã€ç»ˆç«¯æ¸²æŸ“ç­‰æŠ€æœ¯</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p><strong>é‡è¦è¯´æ˜ï¼š</strong> æœ¬é¡¹ç›®çš„ä»£ç å®Œå…¨ç”± AI è¾…åŠ©ç”Ÿæˆã€‚æˆ‘æ‰®æ¼”äº§å“ç»ç†çš„è§’è‰²ï¼Œè´Ÿè´£æå‡ºéœ€æ±‚ã€æ˜ç¡®åŠŸèƒ½è¾¹ç•Œï¼Œè€Œ AI è´Ÿè´£æ‰€æœ‰çš„ç¼–ç å®ç°ã€‚è¿™æ˜¯ä¸€æ¬¡æ¢ç´¢"AI ä¸»å¯¼å¼€å‘"æ¨¡å¼çš„å®è·µã€‚</p>
<p>ç”¨è¿‡ Claude Code çš„å¼€å‘è€…éƒ½ä¼šè¢«å®ƒæµç•…çš„ç»ˆç«¯äº¤äº’ä½“éªŒæ‰€å¸å¼•ã€‚ä¸€ä¸ªç®€å•ä½†åŠŸèƒ½å¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œè®© AI åƒç»“å¯¹ç¼–ç¨‹ä¼™ä¼´ä¸€æ ·åœ¨ç»ˆç«¯ä¸­ä¸ä½ åä½œã€‚</p>
<p>æ™šä¸Šä½¿ç”¨AIè¿‡ç¨‹çªç„¶å¿ƒè¡€æ¥æ½®ï¼šèƒ½å¦ç”¨ AI æ¥å®ç°ä¸€ä¸ªç±»ä¼¼çš„å·¥å…·ï¼Œé¡ºä¾¿äº†è§£ä¸‹è¿™ç§ç»ˆç«¯å·¥å…·æ˜¯å¦‚ä½•å®ç°çš„ ï¼Ÿè¯´å¹²å°±å¹²â€”â€”æˆ‘åªè´Ÿè´£æè¿°æƒ³è¦çš„åŠŸèƒ½ï¼Œè®© AI æ¥å®Œæˆæ‰€æœ‰çš„ä»£ç ç¼–å†™ã€‚</p>
<p>å…ˆçœ‹çœ‹æœ€ç»ˆå®ç°çš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€ CodeCLI v0.1.0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Welcome back!                                              â”‚
â”‚                                                            â”‚
â”‚   <span class="hljs-strong">____</span>          _                                         â”‚
â”‚  / <span class="hljs-strong">__<span class="hljs-emphasis">_| _</span>__</span>  <span class="hljs-strong">__| | __</span>_                                    â”‚
â”‚ | |    / _ \/ <span class="hljs-emphasis">_` |/ _</span> \                                   â”‚
â”‚ | |<span class="hljs-strong">__<span class="hljs-emphasis">_|  _</span><span class="hljs-emphasis">_/ (_</span>| |  __</span>/                                   â”‚
â”‚  \<span class="hljs-strong">____</span>|\<span class="hljs-strong">__<span class="hljs-emphasis">_|\_</span><span class="hljs-emphasis">_,_</span>|\__</span><span class="hljs-emphasis">_|                                   â”‚
â”‚                                                            â”‚
â”‚ Project: my-project                                        â”‚
â”‚ Model: Opus                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€º _</span>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
accept edits off (shift+tab to cycle)
</code></pre>
<p>æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>æµç•…çš„å¤šè¡Œè¾“å…¥ç¼–è¾‘</li>
<li>å†å²å‘½ä»¤æœç´¢</li>
<li>æ–œæ å‘½ä»¤ç³»ç»Ÿ</li>
<li>ç»ˆç«¯å†…çš„ Shell æ‰§è¡Œ</li>
</ul>
<h2 data-id="heading-1">æ ¸å¿ƒæ¶æ„</h2>
<p>é¡¹ç›®åªæœ‰ä¸¤ä¸ªæ ¸å¿ƒæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ index.ts    <span class="hljs-comment"># å…¥å£ï¼Œå¤„ç†å‘½ä»¤è¡Œå‚æ•°</span>
â””â”€â”€ repl.ts     <span class="hljs-comment"># REPLå¼•æ“ï¼Œçº¦1200è¡Œ</span>
</code></pre>
<p>è™½ç„¶ <code>repl.ts</code> ä»£ç é‡ä¸å°ï¼Œä½†ç»“æ„éå¸¸æ¸…æ™°ï¼Œå¯ä»¥æ‹†åˆ†ä¸ºå‡ ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CodeCli                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ InputBuffer â”‚  â”‚  Renderer   â”‚  â”‚  CommandSet â”‚ â”‚
â”‚  â”‚  (è¾“å…¥çŠ¶æ€)  â”‚  â”‚  (ç»ˆç«¯æ¸²æŸ“)  â”‚  â”‚  (å‘½ä»¤å¤„ç†)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  History    â”‚  â”‚KillRing     â”‚  â”‚   Message   â”‚ â”‚
â”‚  â”‚  (å†å²ç®¡ç†)  â”‚  â”‚(å¤åˆ¶ç²˜è´´)    â”‚  â”‚  (æ¶ˆæ¯é˜Ÿåˆ—)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 data-id="heading-2">åŠŸèƒ½ä»‹ç»</h2>
<h5 data-id="heading-3">ä¸€ã€è¾“å…¥ç¼“å†²åŒºï¼šå¤„ç†å¤šè¡Œç¼–è¾‘</h5>
<p>æœ€åŸºç¡€ä¹Ÿæœ€å…³é”®çš„æ˜¯è¾“å…¥ç¼“å†²åŒºã€‚å®ƒéœ€è¦ç»´æŠ¤ä¸¤ä¸ªæ ¸å¿ƒçŠ¶æ€ï¼šæ–‡æœ¬å†…å®¹å’Œå…‰æ ‡ä½ç½®ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">InputBuffer</span> {
  value = <span class="hljs-string">""</span>;      <span class="hljs-comment">// å½“å‰æ–‡æœ¬</span>
  cursor = <span class="hljs-number">0</span>;      <span class="hljs-comment">// å…‰æ ‡ä½ç½®</span>

  <span class="hljs-title function_">insert</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-comment">// åœ¨å…‰æ ‡å¤„æ’å…¥æ–‡æœ¬ï¼Œæ›´æ–°å…‰æ ‡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">cursor</span>) + text + <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cursor</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cursor</span> += text.<span class="hljs-property">length</span>;
  }

  <span class="hljs-title function_">moveWordLeft</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è·³åˆ°å‰ä¸€ä¸ªå•è¯å¼€å¤´</span>
    <span class="hljs-keyword">let</span> i = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cursor</span> - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isWhitespace</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>[i])) i--;
    <span class="hljs-keyword">while</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isWordChar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>[i - <span class="hljs-number">1</span>])) i--;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cursor</span> = i;
  }
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<p><strong>1. å…‰æ ‡ä½ç½®ç‹¬ç«‹è·Ÿè¸ª</strong> - ä¸ä¾èµ–ç»ˆç«¯çš„å®é™…å…‰æ ‡ï¼Œåªç»´æŠ¤é€»è¾‘ä½ç½®</p>
<p><strong>2. å¤šè¡Œæ”¯æŒ</strong> - å†…éƒ¨ç”¨ <code>\n</code> åˆ†å‰²ï¼Œæ¸²æŸ“æ—¶è½¬æ¢ä¸ºè¡Œåˆ—åæ ‡</p>
<p><strong>3. è¯æ“ä½œ</strong> - ç±»ä¼¼ Emacsï¼ŒæŒ‰å•è¯è¾¹ç•Œç§»åŠ¨ï¼ˆAlt+B/Fï¼‰</p>
<p>è¿™ä¸ªè®¾è®¡çš„å·§å¦™ä¹‹å¤„åœ¨äºï¼šè¾“å…¥é€»è¾‘ä¸æ¸²æŸ“é€»è¾‘å®Œå…¨è§£è€¦ã€‚æ— è®ºç»ˆç«¯æ€ä¹ˆå˜åŒ–ï¼ŒInputBuffer åªè´Ÿè´£ç»´æŠ¤æ­£ç¡®çš„æ–‡æœ¬çŠ¶æ€ã€‚</p>
<h5 data-id="heading-4">äºŒã€ç»ˆç«¯æ¸²æŸ“ï¼šANSI è½¬ä¹‰åºåˆ—</h5>
<p>ç»ˆç«¯æ¸²æŸ“çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨ ANSI è½¬ä¹‰åºåˆ—æ§åˆ¶å±å¹•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">lines</span>: <span class="hljs-built_in">string</span>[] = [];

  <span class="hljs-comment">// 1. æ„å»ºæ‰€æœ‰è¡Œçš„å†…å®¹</span>
  lines.<span class="hljs-title function_">push</span>(header);
  lines.<span class="hljs-title function_">push</span>(...messages);
  lines.<span class="hljs-title function_">push</span>(inputArea);
  lines.<span class="hljs-title function_">push</span>(modeLine);

  <span class="hljs-comment">// 2. æ¸…å±å¹¶è¾“å‡º</span>
  process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">"\x1b[2J\x1b[H"</span>);  <span class="hljs-comment">// æ¸…å±ï¼Œå…‰æ ‡å½’ä½</span>
  process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(lines.<span class="hljs-title function_">join</span>(<span class="hljs-string">"\n"</span>));

  <span class="hljs-comment">// 3. å®šä½å…‰æ ‡</span>
  process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">`\x1b[<span class="hljs-subst">${row}</span>;<span class="hljs-subst">${col}</span>H`</span>);
}
</code></pre>
<p><strong>å¸¸ç”¨ ANSI åºåˆ—ï¼š</strong></p>





























<table><thead><tr><th>åºåˆ—</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>\x1b[2J</code></td><td>æ¸…å±</td></tr><tr><td><code>\x1b[H</code></td><td>å…‰æ ‡ç§»åˆ°å·¦ä¸Šè§’</td></tr><tr><td><code>\x1b[row;colH</code></td><td>ç§»åŠ¨å…‰æ ‡åˆ°æŒ‡å®šä½ç½®</td></tr><tr><td><code>\x1b[?25h</code></td><td>æ˜¾ç¤ºå…‰æ ‡</td></tr><tr><td><code>\x1b[35m</code></td><td>è®¾ç½®é¢œè‰²ï¼ˆç´«è‰²ï¼‰</td></tr></tbody></table>
<p>æ¸²æŸ“ç­–ç•¥é‡‡ç”¨"å…¨å±åˆ·æ–°"ï¼šæ¯æ¬¡çŠ¶æ€å˜åŒ–éƒ½é‡æ–°è®¡ç®—å¹¶ç»˜åˆ¶æ‰€æœ‰å†…å®¹ã€‚è¿™åœ¨ç°ä»£ç»ˆç«¯ä¸Šæ€§èƒ½è¶³å¤Ÿå¥½ï¼Œä¸”ä»£ç ç®€æ´ã€‚</p>
<h5 data-id="heading-5">ä¸‰ã€é”®ç›˜äº‹ä»¶ï¼šåŸå§‹æ¨¡å¼å¤„ç†</h5>
<p>Node.js é»˜è®¤ä½¿ç”¨" cooked mode"ï¼Œéœ€è¦å›è½¦æ‰å‘é€è¾“å…¥ã€‚æˆ‘ä»¬éœ€è¦åˆ‡æ¢åˆ°"raw mode"æ¥æ•è·æ¯ä¸ªæŒ‰é”®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
  readline.<span class="hljs-title function_">emitKeypressEvents</span>(process.<span class="hljs-property">stdin</span>);
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">stdin</span>.<span class="hljs-property">isTTY</span>) process.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">setRawMode</span>(<span class="hljs-literal">true</span>);
  process.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">"keypress"</span>, <span class="hljs-function">(<span class="hljs-params">str, key</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onKeypress</span>(str, key));
}

<span class="hljs-keyword">private</span> <span class="hljs-title function_">onKeypress</span>(<span class="hljs-params">str: <span class="hljs-built_in">string</span>, key: readline.Key</span>) {
  <span class="hljs-keyword">if</span> (key.<span class="hljs-property">ctrl</span> &amp;&amp; key.<span class="hljs-property">name</span> === <span class="hljs-string">"c"</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">input</span>.<span class="hljs-title function_">setValue</span>(<span class="hljs-string">""</span>);  <span class="hljs-comment">// Ctrl+C æ¸…ç©º</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key.<span class="hljs-property">ctrl</span> &amp;&amp; key.<span class="hljs-property">name</span> === <span class="hljs-string">"r"</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startReverseSearch</span>();  <span class="hljs-comment">// Ctrl+R å†å²æœç´¢</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (str &amp;&amp; !key.<span class="hljs-property">ctrl</span> &amp;&amp; !key.<span class="hljs-property">meta</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">input</span>.<span class="hljs-title function_">insert</span>(str);  <span class="hljs-comment">// æ™®é€šå­—ç¬¦</span>
  }
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();  <span class="hljs-comment">// æ¯æ¬¡æŒ‰é”®åé‡ç»˜</span>
}
</code></pre>
<p><strong>äº‹ä»¶å¤„ç†çš„éš¾ç‚¹ï¼š</strong></p>
<p><strong>ç»„åˆé”®è¯†åˆ«</strong> - Ctrl/Alt/Shift éœ€è¦æ£€æŸ¥ <code>key.ctrl</code>ã€<code>key.meta</code> ç­‰æ ‡å¿—</p>
<p><strong>ç‰¹æ®Šé”®å¤„ç†</strong> - æ–¹å‘é”®ã€Home/End ç­‰ä¸ä¼šäº§ç”Ÿå¯æ‰“å°å­—ç¬¦</p>
<p><strong>åŒå‡» ESC</strong> - æ£€æµ‹ä¸¤æ¬¡ ESC çš„é—´éš”æ¥åˆ¤æ–­ rewind å‘½ä»¤</p>
<h5 data-id="heading-6">å››ã€å†å²æœç´¢ï¼šä»¿ Emacs çš„ Ctrl+R</h5>
<p>å†å²æœç´¢æ˜¯æå‡æ•ˆç‡çš„å…³é”®åŠŸèƒ½ã€‚å®ç°æ€è·¯ï¼š</p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è¾“å…¥æœç´¢å­—ç¬¦ä¸²                                      â”‚
â”‚         â†“                                                â”‚
â”‚  ä»å†å²æœ«å°¾å‘å‰éå†æŸ¥æ‰¾åŒ¹é…                              â”‚
â”‚         â†“                                                â”‚
â”‚  å®æ—¶æ›´æ–°æ˜¾ç¤ºçš„åŒ¹é…ç»“æœ                                  â”‚
â”‚         â†“                                                â”‚
â”‚  ç”¨æˆ·å¯ä»¥ç»§ç»­è¾“å…¥ç¼©å°æœç´¢ï¼Œæˆ– Ctrl+R æŸ¥çœ‹ä¸Šä¸€ä¸ªåŒ¹é…      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">findHistoryMatch</span>(<span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">startIndex</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">if</span> (!query) <span class="hljs-keyword">return</span> startIndex;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = startIndex; i &gt;= <span class="hljs-number">0</span>; i--) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>[i].<span class="hljs-title function_">includes</span>(query)) <span class="hljs-keyword">return</span> i;
  }
  <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
}
</code></pre>
<p>æœç´¢æ˜¯äº¤äº’å¼çš„ï¼šæ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦å°±é‡æ–°æœç´¢ï¼Œå®æ—¶æ˜¾ç¤ºåŒ¹é…ç»“æœã€‚</p>
<h5 data-id="heading-7">äº”ã€æ€ç¯ï¼šEmacs é£æ ¼çš„å¤åˆ¶ç²˜è´´</h5>
<p>"æ€ç¯"ï¼ˆKill Ringï¼‰æ˜¯ Emacs çš„æ¦‚å¿µï¼Œæ¯”ç³»ç»Ÿå‰ªè´´æ¿æ›´å¼ºå¤§ï¼š</p>
<pre><code class="hljs">æ“ä½œ          æ•ˆæœ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ctrl+K        åˆ é™¤åˆ°è¡Œå°¾ï¼Œå­˜å…¥æ€ç¯
Ctrl+U        åˆ é™¤æ•´è¡Œï¼Œå­˜å…¥æ€ç¯
Ctrl+Y        ç²˜è´´æœ€æ–°å‰ªåˆ‡å†…å®¹
Alt+Y         å¾ªç¯åˆ‡æ¢å‰ªè´´å†å²
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-attr">killRing</span>: <span class="hljs-built_in">string</span>[] = [];

<span class="hljs-keyword">private</span> <span class="hljs-title function_">pushKillRing</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">killRing</span>.<span class="hljs-title function_">push</span>(text);  <span class="hljs-comment">// è®°å½•æ¯æ¬¡åˆ é™¤</span>
}

<span class="hljs-keyword">private</span> <span class="hljs-title function_">yank</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> text = <span class="hljs-variable language_">this</span>.<span class="hljs-property">killRing</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">killRing</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">input</span>.<span class="hljs-title function_">insert</span>(text);
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastYankIndex</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">killRing</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
}

<span class="hljs-keyword">private</span> <span class="hljs-title function_">yankCycle</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// Alt+Yï¼šç²˜è´´åå¾ªç¯åˆ‡æ¢ä¹‹å‰å‰ªåˆ‡çš„å†…å®¹</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastYankIndex</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastYankIndex</span> &lt;= <span class="hljs-number">0</span>
    ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">killRing</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>
    : <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastYankIndex</span> - <span class="hljs-number">1</span>;
  <span class="hljs-comment">// æ›¿æ¢åˆšæ‰ç²˜è´´çš„å†…å®¹...</span>
}
</code></pre>
<p>è¿™ä¸ªè®¾è®¡è®©å¤šæ¬¡å‰ªåˆ‡çš„å†…å®¹éƒ½èƒ½è¢«è®¿é—®ï¼Œæ¯”å•ä¸€å‰ªè´´æ¿çµæ´»å¾—å¤šã€‚</p>
<h5 data-id="heading-8">å…­ã€å‘½ä»¤ç³»ç»Ÿï¼šæ–œæ å‰ç¼€</h5>
<p>å‘½ä»¤ä»¥ <code>/</code> å¼€å¤´ï¼Œç±»ä¼¼ Discord/Slash å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/help      æ˜¾ç¤ºå¸®åŠ©
/clear     æ¸…ç©ºå¯¹è¯
/plan      åˆ‡æ¢åˆ°è®¡åˆ’æ¨¡å¼
/model     åˆ‡æ¢AIæ¨¡å‹
</code></pre>
<p>å®ç°æ ¸å¿ƒæ˜¯ä¸€ä¸ªç®€å•çš„è·¯ç”±å™¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleCommand</span>(<span class="hljs-params">input: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> parts = input.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\s+/</span>);
  <span class="hljs-keyword">const</span> cmd = parts[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">const</span> args = parts.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>);

  <span class="hljs-keyword">switch</span> (cmd) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"help"</span>: <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showHelp</span>();
    <span class="hljs-keyword">case</span> <span class="hljs-string">"clear"</span>: <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearAll</span>();
    <span class="hljs-keyword">case</span> <span class="hljs-string">"plan"</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">mode</span> = <span class="hljs-string">"plan"</span>; <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"model"</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setModel</span>(args[<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;
  }
}
</code></pre>
<p><strong>å‘½ä»¤è¡¥å…¨ï¼š</strong> å½“ç”¨æˆ·è¾“å…¥ <code>/</code> æ—¶ï¼Œå®æ—¶æ˜¾ç¤ºåŒ¹é…çš„å‘½ä»¤åˆ—è¡¨ï¼Œæå‡å‘ç°æ€§ã€‚</p>
<h5 data-id="heading-9">ä¸ƒã€Shell æ¨¡å¼ï¼šæ„Ÿå¹å·å‰ç¼€</h5>
<p>ç”¨ <code>!</code> å‰ç¼€å¯ä»¥ç›´æ¥æ‰§è¡Œ shell å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”¨æˆ·è¾“å…¥ï¼š! git status</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">runShell</span>(<span class="hljs-params">command: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> child = <span class="hljs-title function_">spawn</span>(<span class="hljs-string">"powershell.exe"</span>, [<span class="hljs-string">"-Command"</span>, command]);
  <span class="hljs-keyword">let</span> output = <span class="hljs-string">""</span>;
  child.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">"data"</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> output += data);
  child.<span class="hljs-title function_">on</span>(<span class="hljs-string">"close"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">appendMessage</span>({ <span class="hljs-attr">role</span>: <span class="hljs-string">"tool"</span>, <span class="hljs-attr">content</span>: output });
  });
}
</code></pre>
<p>è¿™è®©ä½ åœ¨ AI å¯¹è¯ä¸­æ— ç¼æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œç»“æœç›´æ¥æ˜¾ç¤ºåœ¨å¯¹è¯ä¸­ã€‚</p>
<h2 data-id="heading-10">å†™åœ¨æœ€å</h2>
<p>æœ¬æ–‡ä»‹ç»äº†ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Claude Code CLI çš„å…³é”®åŠŸèƒ½åŠç›¸å…³å®ç°ä»£ç ã€‚è™½ç„¶è¿™æ˜¯ä¸€ä¸ª MVP å®ç°ï¼Œä½†å±•ç¤ºäº†ç»ˆç«¯åº”ç”¨å¼€å‘çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œè¿™äº›æŠ€æœ¯å¯åº”ç”¨äºä»»ä½•éœ€è¦å¤æ‚ç»ˆç«¯äº¤äº’çš„é¡¹ç›®ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/yuboon</span><span class="hljs-regexp">/ai-examples/tree</span><span class="hljs-regexp">/main/</span><span class="hljs-number">001</span>-coding-cli
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIèµ‹èƒ½å”®åæµ‹è¯•ï¼šä»â€œé»‘ç›’â€åˆ°â€œæ™ºèƒ½ä¼™ä¼´â€]]></title>    <link>https://juejin.cn/post/7603142147642736683</link>    <guid>https://juejin.cn/post/7603142147642736683</guid>    <pubDate>2026-02-05T09:35:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603142147642736683" data-draft-id="7602996277665333302" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIèµ‹èƒ½å”®åæµ‹è¯•ï¼šä»â€œé»‘ç›’â€åˆ°â€œæ™ºèƒ½ä¼™ä¼´â€"/> <meta itemprop="keywords" content="Cursor"/> <meta itemprop="datePublished" content="2026-02-05T09:35:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/606586148237431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIèµ‹èƒ½å”®åæµ‹è¯•ï¼šä»â€œé»‘ç›’â€åˆ°â€œæ™ºèƒ½ä¼™ä¼´â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586148237431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T09:35:34.000Z" title="Thu Feb 05 2026 09:35:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><ul>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ä¸€ã€é¡¹ç›®æ¨è¿›ä¸åˆä½œä¸­çš„ä¸‰å¤§æ ¸å¿ƒç—›ç‚¹çš„è§£å†³</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1. é€»è¾‘ä¸é€æ˜ â†’ æ™ºèƒ½é€»è¾‘è§£æ</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2. æ•°æ®æ„é€ ç¹ç â†’ åœºæ™¯åŒ–æ„é€ æ¨è</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3. è§„åˆ™åŒæ­¥æ»å â†’ å®æ—¶è§„åˆ™æŸ¥è¯¢ä¸è§£é‡Š</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">äºŒã€AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¦‚ä½•æ”¹å˜ç°çŠ¶ï¼Ÿ</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">âœ… ä¸šåŠ¡é—®é¢˜å®æ—¶è§£ç­”</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">âœ… å¼€å‘ä¸æµ‹è¯•é«˜æ•ˆæ”¯æŒ</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">âœ… æœåŠ¡ä¸¤ç±»ç”¨æˆ·ç¾¤ä½“</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ä¸‰ã€ä¸ºä»€ä¹ˆé€‰æ‹©Difyï¼Ÿ</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">å››ã€difyæ™ºèƒ½åŠ©æ‰‹æ­å»ºå®ç°</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">äº”ã€å·²å®ç°åœºæ™¯æ¼”ç¤º</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ğŸ“Œ åœºæ™¯ä¸€ï¼šå”®åå•å®æ—¶çŠ¶æ€æŸ¥è¯¢</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ğŸ“Œ åœºæ™¯äºŒï¼šåŸºäºå•å·çš„ä¸šåŠ¡é€»è¾‘è¿½é—®</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ğŸ“Œ åœºæ™¯ä¸‰ï¼šæ•°æ®æ„é€ æŒ‡å¯¼</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ğŸ“Œ åœºæ™¯å››ï¼šæ— å•å·çº¯é€»è¾‘ç­”ç–‘</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">å…­ã€æ•ˆæœå·²ç°ï¼Œä¼˜åŒ–æŒç»­</a></p>
</li>
</ul>
<p>å”®åç³»ç»Ÿé•¿æœŸä»¥æ¥åƒæ˜¯ä¼ä¸šå†…éƒ¨çš„â€œé»‘ç›’â€â€”â€”æµç¨‹å¤æ‚ã€ä¿¡æ¯åˆ†æ•£ã€é€»è¾‘äº¤å‰ï¼Œä¸šåŠ¡éƒ¨é—¨åœ¨é¡¹ç›®æ¨è¿›ä¸­å¸¸é¢ä¸´ä¸‰é‡é˜»åŠ›ï¼š</p>
<p><strong>é€»è¾‘ç†è§£éš¾</strong>ï¼šä¸åŒå”®ååœºæ™¯å‘½ä¸­æ¡ä»¶é”™ç»¼å¤æ‚ï¼Œäººå·¥æ’æŸ¥æ•ˆç‡ä½ä¸‹ï¼›</p>
<p><strong>æ•°æ®æ„é€ ç¹</strong>ï¼šæµ‹è¯•éªŒè¯æ—¶ç¼ºä¹æ ‡å‡†æ„é€ æŒ‡å¼•ï¼Œä¾èµ–ç»éªŒè¯•é”™ï¼Œå‘¨æœŸå†—é•¿ï¼›</p>
<p><strong>è§„åˆ™å“åº”æ…¢</strong>ï¼šè·¨éƒ¨é—¨åä½œä¸­ï¼Œè§„åˆ™è§£é‡Šä¾èµ–äººå·¥æ²Ÿé€šï¼Œä¿¡æ¯åŒæ­¥ä¸åŠæ—¶ã€‚</p>
<p>è¿™ä¸ä»…æ‹–æ…¢äº†é¡¹ç›®èŠ‚å¥ï¼Œæ›´è®©å†…éƒ¨åä½œé™·å…¥â€œç­‰äººã€é—®äººã€æ‰¾äººâ€çš„å¾ªç¯ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ¨å‡ºåŸºäºDifyå¹³å°æ„å»ºçš„<strong>å”®åä¸šåŠ¡æ™ºèƒ½åŠ©æ‰‹</strong>ï¼Œèšç„¦<strong>é€»è¾‘æ¢³ç†ã€æ•°æ®æ„é€ ã€è§„åˆ™åŒæ­¥</strong>ä¸‰å¤§åœºæ™¯ï¼Œå°†â€œé»‘ç›’â€å˜ä¸ºâ€œé€æ˜å·¥ä½œå°â€ï¼Œä¸ºé¡¹ç›®åä½œä¸æµ‹è¯•éªŒè¯æä¾›æ™ºèƒ½æ”¯æŒã€‚</p>
<h2 data-id="heading-0">ä¸€ã€é¡¹ç›®æ¨è¿›ä¸åˆä½œä¸­çš„ä¸‰å¤§æ ¸å¿ƒç—›ç‚¹çš„è§£å†³</h2>
<h3 data-id="heading-1">1. é€»è¾‘ä¸é€æ˜ â†’ æ™ºèƒ½é€»è¾‘è§£æ</h3>
<p>ç³»ç»Ÿå¯è‡ªåŠ¨è§£æä¸åŒå”®åæµç¨‹çš„å‘½ä¸­è§„åˆ™ä¸åˆ¤å®šé€»è¾‘ï¼Œä¸ºä¸šåŠ¡å†³ç­–å’Œé¡¹ç›®å¯¹é½æä¾›æ¸…æ™°ä¾æ®ã€‚</p>
<h3 data-id="heading-2">2. æ•°æ®æ„é€ ç¹ç â†’ åœºæ™¯åŒ–æ„é€ æ¨è</h3>
<p>æä¾›å¸¸è§æµ‹è¯•åœºæ™¯çš„æ ‡å‡†åŒ–æ•°æ®æ„é€ æ–¹æ¡ˆï¼Œé™„ç¤ºä¾‹å‚æ•°ä¸æ“ä½œé“¾æ¥ï¼Œæå‡æµ‹è¯•æ•ˆç‡ä¸å‡†ç¡®æ€§ã€‚</p>
<h3 data-id="heading-3">3. è§„åˆ™åŒæ­¥æ»å â†’ å®æ—¶è§„åˆ™æŸ¥è¯¢ä¸è§£é‡Š</h3>
<p>ä¸šåŠ¡è§„åˆ™ä¸æµç¨‹è¯´æ˜å®æ—¶å¯æŸ¥ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æé—®ï¼Œå‡å°‘è·¨å›¢é˜Ÿæ²Ÿé€šæˆæœ¬ä¸ä¿¡æ¯è¯¯å·®ã€‚</p>
<h2 data-id="heading-4">äºŒã€AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¦‚ä½•æ”¹å˜ç°çŠ¶ï¼Ÿ</h2>
<h3 data-id="heading-5">âœ… ä¸šåŠ¡é—®é¢˜å®æ—¶è§£ç­”</h3>
<p>â— æ— æ³•ç”³è¯·å”®åï¼Ÿã€æä¾›ã€‘ä¸€é”®æ’æŸ¥åŸå› </p>
<p>â— æµç¨‹å‘½ä¸­é€»è¾‘ä¸æ¸…æ™°ï¼Ÿã€æä¾›ã€‘è‡ªåŠ¨è¯´æ˜è§„åˆ™</p>
<p>â— è´¨æ£€è´£ä»»è®¤å®šæ¨¡ç³Šï¼Ÿã€æä¾›ã€‘æ˜ç¡®åˆ¤å®šä¾æ®ä¸æµç¨‹é€‰æ‹©</p>
<p>â— æ•£è´§äº¤æ¥åå»å“ªè´¨æ£€ï¼Ÿã€æä¾›ã€‘æ™ºèƒ½æ¨èä»“åº“ä¸ç«™ç‚¹</p>
<h3 data-id="heading-6">âœ… å¼€å‘ä¸æµ‹è¯•é«˜æ•ˆæ”¯æŒ</h3>
<p>â— æä¾›å„ç±»è®¢å•æ„é€ æ–¹æ³•ä¸ç¤ºä¾‹</p>
<p>â— å®æ—¶æŸ¥è¯¢å”®åç±»å‹ä¸èŠ‚ç‚¹æ•°æ®</p>
<p>â— æ•°æ®æ„é€ åï¼Œè‡ªåŠ¨ç»™å‡ºä¸‹ä¸€æ­¥æ“ä½œå»ºè®®æŒ‡å‘</p>
<h3 data-id="heading-7">âœ… æœåŠ¡ä¸¤ç±»ç”¨æˆ·ç¾¤ä½“</h3>
<p>â— å†…éƒ¨å›¢é˜Ÿï¼šæå‡åä½œæ•ˆç‡ï¼Œé‡Šæ”¾äººåŠ›</p>
<p>â— ä¸šåŠ¡åˆä½œæ–¹ï¼šæä¾›æ ‡å‡†åŒ–ã€å³æ—¶åŒ–çš„è§£ç­”æ”¯æŒ</p>
<h2 data-id="heading-8">ä¸‰ã€ä¸ºä»€ä¹ˆé€‰æ‹©Difyï¼Ÿ</h2>
<p>åœ¨è¯„ä¼°å¤šç§å®ç°æ–¹æ¡ˆåï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰ç”¨Difyå¹³å°ï¼Œä¸»è¦å› ä¸ºï¼š</p>
<p>â— ä½é—¨æ§›å¯è§†åŒ–æ­å»ºï¼šæ— éœ€ä»£ç å³å¯é…ç½®å·¥ä½œæµï¼Œå¿«é€Ÿè¿­ä»£</p>
<p>â— å†…ç½®AIæ ¸å¿ƒæ¨¡å—ï¼šçŸ¥è¯†åº“ã€æ„å›¾è¯†åˆ«ã€å¯¹è¯ç®¡ç†å¼€ç®±å³ç”¨</p>
<p>â— çµæ´»æ‰©å±•æ€§å¼ºï¼šæ”¯æŒè¿æ¥å¤–éƒ¨æ¥å£ï¼ˆMCPï¼‰ï¼Œè·å–å®æ—¶ä¸šåŠ¡æ•°æ®</p>
<p>â— difyå¯æä¾›æœºå™¨äººä¼šè¯å·¥ä½œæµç¨‹æ­å»º</p>
<h2 data-id="heading-9">å››ã€difyæ™ºèƒ½åŠ©æ‰‹æ­å»ºå®ç°</h2>
<p>æ•´ä½“è®¾è®¡æ€è·¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13442b49d4bf4992976cae75982567d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=pmXQZeuUZ%2F%2FoaTgGgikjvJ95mPM%3D" alt="" loading="lazy"/></p>
<p>æ™ºèƒ½åŠ©æ‰‹å¹¶éç®€å•é—®ç­”æœºå™¨äººï¼Œè€Œæ˜¯é€šè¿‡å¤šå±‚AIèŠ‚ç‚¹ååŒå·¥ä½œï¼Œæ ¸å¿ƒåˆ©ç”¨èŠ‚ç‚¹è®¾è®¡å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d456f6e2943e46cb8604b49772f1fc65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=fme6m%2F9H8OTXtkYB1jjKw%2Bl057k%3D" alt="" loading="lazy"/></p>
<ol>
<li><strong>å‚æ•°æå–å™¨</strong>ï¼šè‡ªåŠ¨è¯†åˆ«å”®åå•å·ç­‰å…³é”®ä¿¡æ¯</li>
</ol>
<p>ä»ç”¨æˆ·é—®é¢˜ä¸­æå–å…³é”®å‚æ•°ï¼Œä¾‹å¦‚å”®åå•IDç­‰ã€‚å½“ç”¨æˆ·æé—®æ¶‰åŠå…·ä½“ä¸šåŠ¡å•æ®æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨æå–æ ‡è¯†ä¿¡æ¯ï¼Œä¾›åç»­èŠ‚ç‚¹è°ƒç”¨ã€‚</p>













<table><thead><tr><th>difyé…ç½®</th><th>åº”ç”¨</th></tr></thead><tbody><tr><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cc7e18b92f9486bba250f95026c30ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=B4nPvFr0WNkK1Km8xKcdK63NabM%3D" alt="" loading="lazy"/>æŒ‡ä»¤å³æ˜¯æç¤ºè¯</td><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f72fd850c184677b2c98c1833cc5e33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=vP2j4qKnxwERE7EIXtIfPnSnPNc%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<ol start="2">
<li><strong>Agentæ™ºèƒ½ä»£ç†</strong>ï¼šè°ƒç”¨çœŸå®ä¸šåŠ¡æ¥å£ï¼Œè·å–å®æ—¶æ•°æ®</li>
</ol>
<p>è´Ÿè´£è°ƒç”¨å¤–éƒ¨æ¥å£è·å–å®æ—¶ä¸šåŠ¡æ•°æ®ï¼Œå¹¶å¯¹è¿”å›ç»“æœè¿›è¡Œç»“æ„åŒ–è§£æã€‚ä¾‹å¦‚ï¼Œæ ¹æ®å”®åå•IDæŸ¥è¯¢è¯¦æƒ…ï¼Œå¹¶æå–çŠ¶æ€ã€å¤„ç†äººã€æ—¶é—´ç­‰å…³é”®å­—æ®µï¼Œè½¬åŒ–ä¸ºè‡ªç„¶è¯­è¨€æè¿°ã€‚</p>













<table><thead><tr><th>é…ç½®</th><th>åº”ç”¨</th></tr></thead><tbody><tr><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d95a50131bef46a0a90548f517eeb592~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=ib18nlkX%2FF5Uc0%2BKTRng%2Bl8N3Zs%3D" alt="" loading="lazy"/> æŒ‡ä»¤å³æ˜¯æç¤ºè¯</td><td>åŸæœ‰æ¥å£è¿”å›ç»“æ„<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2941b48feacd4d9898c6ca80850096fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=H%2BGbvrwBuce4MulJ43LdWHRDdYw%3D" alt="" loading="lazy"/>æç¤ºè¯åè¿”å›ç»“æ„<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6701a3c8df846ed8cf4d5112b4e5a91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=XZRJv3xhTJHe3viAYgiPXKoxgBo%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<ol start="3">
<li><strong>é—®é¢˜åˆ†ç±»å™¨</strong>ï¼šå°†é—®é¢˜åˆ†ä¸ºè§„åˆ™ç±»ã€æµç¨‹ç±»ã€æ•°æ®æ„é€ ç±»</li>
</ol>
<p>æ ¹æ®é—®é¢˜ç±»å‹å°†ç”¨æˆ·è¾“å…¥åˆ†æµè‡³ä¸åŒçš„å¤„ç†æµç¨‹ã€‚æˆ‘ä»¬å°†é—®é¢˜åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>
<p>â— ä¸šåŠ¡è§„åˆ™ç±»ï¼ˆéœ€æ£€ç´¢çŸ¥è¯†åº“ï¼‰</p>
<p>â— æµç¨‹æŒ‡å¼•ç±»ï¼ˆéœ€ç»„åˆé€»è¾‘è¯´æ˜ï¼‰</p>
<p>â— æ•°æ®æ„é€ ç±»ï¼ˆéœ€æ¨èæ„é€ æ–¹æ¡ˆï¼‰</p>
<p>åˆ†ç±»åï¼Œç³»ç»Ÿå¯è°ƒç”¨ç›¸åº”çš„æç¤ºè¯æ¨¡æ¿ä¸å¤„ç†é€»è¾‘ï¼Œæå‡å›ç­”å‡†ç¡®æ€§ã€‚</p>













<table><thead><tr><th>é…ç½®</th><th>åº”ç”¨</th></tr></thead><tbody><tr><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b1f61f600d84bd3a717d6447c135a0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=ZMjnIlP1LAWJFGuWcyKAuzD9Rs0%3D" alt="" loading="lazy"/></td><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/988e581c8ced45c090f1c3977b9852eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=xqRakHcqR602DfUfptg6ZTZcnpk%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<ol start="4">
<li><strong>çŸ¥è¯†åº“ï¼ˆRAGï¼‰</strong> ï¼šæ²‰æ·€ä¸šåŠ¡æ–‡æ¡£ã€FAQã€æµç¨‹è¯´æ˜ï¼Œç²¾å‡†æ£€ç´¢</li>
</ol>
<p>ç”¨äºå­˜å‚¨ä¸šåŠ¡æ–‡æ¡£ã€æµç¨‹è¯´æ˜ã€å¸¸è§é—®é¢˜ç­‰çŸ¥è¯†å†…å®¹ã€‚ä¾¿äºã€‚ç³»ç»Ÿæ ¹æ®ç”¨æˆ·é—®é¢˜ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢åŒ¹é…ç›¸å…³å†…å®¹ï¼Œä½œä¸ºç”Ÿæˆå›ç­”çš„ä¾æ®ã€‚</p>




















<table><thead><tr><th/><th>é…ç½®</th><th>åº”ç”¨</th></tr></thead><tbody><tr><td>çŸ¥è¯†åº“æ•°æ®å†…å®¹</td><td>çŸ¥è¯†åº“ä¸Šä¼ æä¾›äº†å¾ˆå¤šæ–‡ä»¶æ ¼å¼ã€åˆ‡ç‰‡æ ¼å¼ï¼ˆåˆ‡ç‰‡ï¼šDifyçŸ¥è¯†åº“åˆ‡ç‰‡æ˜¯æŒ‡å°†ä¸Šä¼ åˆ°Difyå¹³å°çš„çŸ¥è¯†åº“æ–‡æ¡£æŒ‰ä¸€å®šè§„åˆ™åˆ†å‰²æˆæ›´å°ã€æ›´æ˜“ç®¡ç†çš„å†…å®¹å—ï¼ˆç§°ä¸ºâ€œchunksâ€ï¼‰çš„è¿‡ç¨‹ã€‚è¿™äº›åˆ‡ç‰‡æ˜¯çŸ¥è¯†åº“æ£€ç´¢å’Œåº”ç”¨çš„åŸºç¡€å•å…ƒï¼Œä¾¿äºAIæ¨¡å‹åœ¨ç”Ÿæˆå›ç­”æ—¶ç²¾å‡†å¼•ç”¨ç›¸å…³ä¿¡æ¯ã€‚â€Œï¼‰ æ–‡ä»¶ï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8e63b3300504fe7a9e0cdba5b55d8e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=5UqEQsEg%2BCBeWKVJYlUWHGYnOLE%3D" alt="" loading="lazy"/> åˆ‡ç‰‡æ ¼å¼ï¼šå¯æœ‰å¤šä¸ªé€‰æ‹©<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/862d9ec5876e4164b644f9710fa85c11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=ly3y4ZoMJyFV0bIYu6noZTY0yN4%3D" alt="" loading="lazy"/> <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31d1bd9474764f188597dd47f42beae6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=XQFt6J%2BZNsOFeYwEXMmWpmupvF8%3D" alt="" loading="lazy"/></td><td/></tr><tr><td>RAGè·å–</td><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6176e42cf58744919a79994c70f598b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=xekUggToeD8p7bKuq3LMHs8GgPs%3D" alt="" loading="lazy"/>é€šè¿‡é¢„è§ˆå¯æŸ¥çœ‹æ•ˆæœ <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da15dcb4a9e542868be411416afbcd92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=j%2Bsqjuh9fGZrLwOQfRf2ylWn9pc%3D" alt="" loading="lazy"/> æ–¹å¼ä¸€ï¼šç›´æ¥è·å– æŒ‰åˆ‡ç‰‡åŒ¹é…æ’åº<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e65c462758114b1fb3a3207c68f60d3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=maUO%2B8j139K4yb5g%2FFfwOqir4ao%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/beefe21418174fa689c462fbdc002959~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=Ar3x%2BUnOK9DBlJKVQMU%2B5eLNNfc%3D" alt="" loading="lazy"/> æ–¹å¼äºŒï¼šå¤§æ¨¡å‹æç¤ºè¯åŒ¹é…<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1735fe4c9da4440880aacb4bba077e8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=VmM8r9UNgY6p7T1BfdxVjiANstg%3D" alt="" loading="lazy"/> <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e7b8af2d6d940a1981a85842e4dc0ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=0Gu3Ee9qLlOXhhsR%2FoKsGNiymk8%3D" alt="" loading="lazy"/> ç”±äºå¤§æ¨¡å‹åˆ†ææ—¶é—´è¾ƒé•¿ï¼Œä¸”æˆ‘ä»¬çŸ¥è¯†åº“ä¿¡æ¯ä¹Ÿæ¯”è¾ƒå…¨é¢çš„æƒ…å†µä¸‹å°±é‡‡å–åŒ¹é…è¿”å›å³å¯</td><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b05baa9410f645d59378caf1ed880688~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=1Gz8SG2FMOli1Z74rWeHhmpzZbc%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<p>çŸ¥è¯†åº“å†…å®¹ç»“æ„å®ç°</p>
<p>â— æ•°æ®æ„é€ çŸ¥è¯†åº“</p>













<table><thead><tr><th>ç»“æ„</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>åœºæ™¯ æè¿°+é“¾æ¥ æ­¥éª¤å¯¹åº”çŠ¶æ€ï¼š<strong>ç”¨æ¥åŒ¹é…æ•°æ®æ„é€ </strong> å…¥å‚ä»‹ç»ï¼š<strong>ç”¨æ¥æ¨èå‚æ•°å–å€¼</strong> æ–¹å¼ï¼šç»Ÿè®¡ç›®å‰å¸¸ç”¨æ•°æ®æ„é€ åœºæ™¯æ•´åˆè¾“å‡º <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/944aa66af3b44eed9ce5588cb00fc8ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=0jx80rjjNAgSGakrRP0qKqY5Hmk%3D" alt="" loading="lazy"/></td><td><strong>ä½¿ç”¨åœºæ™¯</strong>: é€€è´§é€€æ¬¾-æ½æ”¶æé€Ÿé€€ å…³é”®æ•°æ®æ„é€ é“¾æ¥: <a href="https://link.juejin.cn?target=https%3A%2F%2Fqe.*****.com%2FdataPt%2FsceneList%2F20570781%2F528%3FdId%3D7700" target="_blank" title="https://qe.*****.com/dataPt/sceneList/20570781/528?dId=7700" ref="nofollow noopener noreferrer">é€€è´§é€€æ¬¾-æ½æ”¶æé€Ÿé€€ æ•°æ®æ„é€ é“¾æ¥</a> æ­¤é“¾æ¥ç”¨äºåˆ›å»ºå’Œç®¡ç†é€€è´§æ¡ˆä¾‹ <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e63757463740453a9a00df3e698e33f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=XrvRIISDAWvfFM3cbM1eUQKBhPw%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<p>â— ä¸šåŠ¡çŸ¥è¯†åº“</p>













<table><thead><tr><th>ç»“æ„</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>åŠŸèƒ½æ¦‚è¿° é€»è¾‘æ•´ç† æ–¹å¼ï¼šå¯åˆ©ç”¨Cursoré˜…è¯»æŠ€æœ¯æ–¹æ³•ï¼Œæ¥åˆ†æé€»è¾‘è¾“å‡º <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5ef939264354022b0e9cb0cf05e9efc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=MqSdEzVVkVrgl5xQsrb5UYU7JzE%3D" alt="" loading="lazy"/></td><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e14ee620acd4a398fd5d923cec22429~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=THkyfNt5zRUM0R7cv6C4bB4KQGA%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<ol start="5">
<li><strong>å¤§è¯­è¨€æ¨¡å‹èŠ‚ç‚¹</strong>ï¼šæ•´åˆä¿¡æ¯ï¼Œç”Ÿæˆè‡ªç„¶è¯­è¨€å›ç­”</li>
</ol>
<p>æ•´åˆçŸ¥è¯†åº“å†…å®¹ã€å®æ—¶æ•°æ®ä¸ç”¨æˆ·é—®é¢˜ï¼Œç”Ÿæˆè‡ªç„¶è¯­è¨€å›ç­”ã€‚æˆ‘ä»¬æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„æ¨¡å‹ï¼Œå¹¶é…ç½®æ¸©åº¦ã€æƒ©ç½šå‚æ•°ç­‰ï¼Œä»¥æ§åˆ¶å›ç­”çš„å‡†ç¡®æ€§ä¸åˆ›é€ æ€§ã€‚</p>













<table><thead><tr><th>é…ç½®</th><th>åº”ç”¨</th></tr></thead><tbody><tr><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bda6ff8c7e144a1e8f71b126c5f4a6b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=le%2FKwPIEelDrE6QQjy7p8VeGgYI%3D" alt="" loading="lazy"/>æ¨¡å‹é€‰æ‹©å’Œå‚æ•°ï¼šæ¨¡å‹å‚æ•°æ§åˆ¶å“åº”ç”Ÿæˆã€‚ æ¸©åº¦èŒƒå›´ä» 0ï¼ˆç¡®å®šæ€§ï¼‰åˆ° 1ï¼ˆåˆ›é€ æ€§ï¼‰ã€‚ æ ¸é‡‡æ ·é€šè¿‡æ¦‚ç‡é™åˆ¶è¯æ±‡é€‰æ‹©ã€‚é¢‘ç‡æƒ©ç½šå‡å°‘é‡å¤ã€‚å­˜åœ¨æƒ©ç½šé¼“åŠ±æ–°è¯é¢˜ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨é¢„è®¾ï¼šç²¾ç¡®ã€å¹³è¡¡æˆ–åˆ›æ„ã€‚  æç¤ºè¯é…ç½®ï¼šä½ çš„ç•Œé¢æ ¹æ®æ¨¡å‹ç±»å‹è‡ªé€‚åº”ã€‚èŠå¤©æ¨¡å‹ä½¿ç”¨æ¶ˆæ¯è§’è‰²ï¼ˆç³»ç»Ÿç”¨äºè¡Œä¸ºï¼Œç”¨æˆ·ç”¨äºè¾“å…¥ï¼ŒåŠ©æ‰‹ç”¨äºç¤ºä¾‹ï¼‰ï¼Œè€Œå®Œæˆæ¨¡å‹ä½¿ç”¨ç®€å•çš„æ–‡æœ¬ç»­å†™ã€‚ <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22757720c24e4b8fba5bd58ae679acda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=BlNxBdfGI6nA8E7P4suYONIqHqg%3D" alt="" loading="lazy"/></td><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff11f99ad98e4b71825b5fca644f58b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=XcBpPUZRaLiiAxWvlQZFOPHKr0M%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<p>Tipsï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8d88e9c433343a88c743d20b6406bcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=q83IXHszRakEovzwpGqyRWbEAAw%3D" alt="" loading="lazy"/></p>
<ol start="6">
<li><strong>å¯¹è¯ç¼“å­˜</strong>ï¼šæ”¯æŒå¤šè½®å¯¹è¯ï¼Œè®°å¿†ä¸Šä¸‹æ–‡ï¼Œä½“éªŒæ›´è¿è´¯</li>
</ol>
<p>ä¸ºå®ç°å¤šè½®å¯¹è¯æ”¯æŒï¼Œç³»ç»Ÿé€šè¿‡ç¼“å­˜è®°å½•å½“å‰ä¼šè¯çš„å…³é”®ä¿¡æ¯ï¼ˆå¦‚å”®åå•IDï¼‰ï¼Œä½¿å¾—ç”¨æˆ·åœ¨åç»­æé—®ä¸­æ— éœ€é‡å¤è¾“å…¥ï¼Œæå‡äº¤äº’è¿è´¯æ€§ã€‚</p>













<table><thead><tr><th>é…ç½®</th><th>åº”ç”¨</th></tr></thead><tbody><tr><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56a622ba9d6e47968ddf3f9ad1c17571~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=6Sdb1IyxxPg3eRMBMrZRcq%2Ba624%3D" alt="" loading="lazy"/> <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d02c552c749e4f6f934c2f0326344afe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=8EtmWpoAF7iqZ%2FMD8A%2BxTDjV5%2BI%3D" alt="" loading="lazy"/></td><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/679911d580e94d7eaf2c45bceb9df559~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=OPtu9FmlYF99vkBiu1adqLUChqA%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<h2 data-id="heading-10">äº”ã€å·²å®ç°åœºæ™¯æ¼”ç¤º</h2>
<h3 data-id="heading-11">ğŸ“Œ åœºæ™¯ä¸€ï¼šå”®åå•å®æ—¶çŠ¶æ€æŸ¥è¯¢</h3>
<p>ç”¨æˆ·è¾“å…¥å”®åå•å·ï¼Œç³»ç»Ÿè‡ªåŠ¨æ‹‰å–æœ€æ–°çŠ¶æ€ã€å¤„ç†äººã€æ—¶é—´èŠ‚ç‚¹ï¼Œå¹¶ç»™å‡ºä¸šåŠ¡è§£é‡Šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21c47990bdee4520a312712f642848bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=TtOlx%2B8XbT6rNdZOIwISPTygAqI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">ğŸ“Œ åœºæ™¯äºŒï¼šåŸºäºå•å·çš„ä¸šåŠ¡é€»è¾‘è¿½é—®</h3>
<p>ä¾‹å¦‚ï¼šâ€œä¸ºä»€ä¹ˆè¿™ä¸ªå”®åå•ä¸èƒ½èµ°æé€Ÿé€€ï¼Ÿâ€ç³»ç»Ÿç»“åˆå•å·æ•°æ®ä¸ä¸šåŠ¡è§„åˆ™ï¼Œç»™å‡ºæ˜ç¡®åŸå› ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffdebdcd576c434daa66cfdeca800bcc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=yaT0DBHhTln3AbPc80W5PI8C2O0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">ğŸ“Œ åœºæ™¯ä¸‰ï¼šæ•°æ®æ„é€ æŒ‡å¯¼</h3>
<p>é’ˆå¯¹æµ‹è¯•åœºæ™¯ï¼Œæ¨èæ•°æ®æ„é€ æ–¹æ¡ˆï¼Œå¹¶é™„å¸¦ç¤ºä¾‹é“¾æ¥ä¸å‚æ•°å»ºè®®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fbc567114ed4cb59313a59740b576b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=JDh%2FfBM7tHh43c9xYYpWkNlq0gI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">ğŸ“Œ åœºæ™¯å››ï¼šæ— å•å·çº¯é€»è¾‘ç­”ç–‘</h3>
<p>å³ä½¿æ²¡æœ‰å•å·ï¼Œä¹Ÿèƒ½å›ç­”è¯¸å¦‚â€œä»€ä¹ˆæƒ…å†µä¸‹ä¼šè§¦å‘è´¨æ£€ï¼Ÿâ€ç­‰é€šç”¨è§„åˆ™é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45c028a890e3435585e115be0a257e0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770888937&amp;x-signature=Px%2FnkYyUJd7BQbZ%2Fb49SGjmJ7zk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-15">å…­ã€æ•ˆæœå·²ç°ï¼Œä¼˜åŒ–æŒç»­</h2>
<p>ç›®å‰ï¼Œæ™ºèƒ½åŠ©æ‰‹å·²åˆæ­¥è¦†ç›–å”®åæ ¸å¿ƒé—®ç­”åœºæ™¯ï¼Œå“åº”é€Ÿåº¦æå‡è‡³ç§’çº§ï¼ŒäººåŠ›é‡Šæ”¾æ˜¾è‘—ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ï¼š</p>
<ol>
<li>æŒç»­æ‰©å……çŸ¥è¯†åº“ï¼Œè¦†ç›–æ›´å¤šä¸šåŠ¡åˆ†æ”¯</li>
<li>ä¼˜åŒ–é—®é¢˜åˆ†ç±»å‡†ç¡®ç‡ï¼Œæ”¯æŒæ›´ç»†ç²’åº¦é—®ç­”</li>
<li>å¢å¼ºå¤šè½®å¯¹è¯èƒ½åŠ›ï¼Œå¤„ç†å¤æ‚é—®é¢˜é“¾</li>
<li>æ¢ç´¢ä¸ä¸šåŠ¡ç³»ç»Ÿæ·±åº¦é›†æˆï¼Œæ¨åŠ¨æµç¨‹è‡ªåŠ¨åŒ–</li>
</ol>
<hr/>
<p>AIä¸æ˜¯æ›¿ä»£äººåŠ›ï¼Œè€Œæ˜¯<strong>å¢å¼ºäººæ•ˆã€æ²‰æ·€çŸ¥è¯†ã€æ ‡å‡†åŒ–æœåŠ¡</strong>ã€‚å”®åæ™ºèƒ½åŠ©æ‰‹æ­£æ˜¯è¿™ä¸€ç†å¿µçš„è½åœ°å®è·µâ€”â€”è®©ä¸šåŠ¡æ”¯æŒæ›´æ™ºèƒ½ï¼Œè®©å›¢é˜Ÿåä½œæ›´è½»æ¾ã€‚</p>
<p>æœªæ¥ï¼Œæˆ‘ä»¬å°†ç»§ç»­æ¢ç´¢AIåœ¨ä¸šåŠ¡åœºæ™¯ä¸­çš„æ·±åº¦èåˆï¼Œè®©æ¯ä¸€ä¸ªæµç¨‹èŠ‚ç‚¹éƒ½æ‹¥æœ‰â€œæ™ºæ…§æ”¯æŒâ€ã€‚<strong>æ™ºèƒ½å”®åï¼Œåº”ç­”è€Œæ¥ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Fragmentæ·»åŠ ä¸çŠ¶æ€å˜æ›´æ—¶åºå›¾]]></title>    <link>https://juejin.cn/post/7603444191447908386</link>    <guid>https://juejin.cn/post/7603444191447908386</guid>    <pubDate>2026-02-06T08:50:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603444191447908386" data-draft-id="7603355275257626664" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Fragmentæ·»åŠ ä¸çŠ¶æ€å˜æ›´æ—¶åºå›¾"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-06T08:50:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹¾å¤ä¸€æ°”æ€"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289955431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Fragmentæ·»åŠ ä¸çŠ¶æ€å˜æ›´æ—¶åºå›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289955431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹¾å¤ä¸€æ°”æ€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T08:50:30.000Z" title="Fri Feb 06 2026 08:50:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Fragmentæ·»åŠ ä¸çŠ¶æ€å˜æ›´æ—¶åºå›¾</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Activity
    participant FragmentManager
    participant FragmentTransaction
    participant FragmentStateManager
    participant Fragment

    Note over Activity,Fragment: Fragmentæ·»åŠ é˜¶æ®µ

    Activity-&gt;&gt;FragmentManager: getSupportFragmentManager()
    FragmentManager--&gt;&gt;Activity: return FragmentManagerå®ä¾‹

    Activity-&gt;&gt;FragmentManager: beginTransaction()
    FragmentManager-&gt;&gt;FragmentTransaction: åˆ›å»ºFragmentTransaction
    FragmentTransaction--&gt;&gt;Activity: return FragmentTransaction

    Activity-&gt;&gt;FragmentTransaction: add(containerId, fragment)
    FragmentTransaction-&gt;&gt;FragmentTransaction: è®°å½•Opæ“ä½œ

    Activity-&gt;&gt;FragmentTransaction: commit()
    FragmentTransaction-&gt;&gt;FragmentManager: æäº¤äº‹åŠ¡

    Note over FragmentManager,Fragment: FragmentçŠ¶æ€ç®¡ç†é˜¶æ®µ

    FragmentManager-&gt;&gt;FragmentManager: executeOps()
    FragmentManager-&gt;&gt;FragmentStateManager: åˆ›å»ºFragmentStateManager(fragment)

    FragmentManager-&gt;&gt;FragmentStateManager: addFragment()
    FragmentStateManager-&gt;&gt;FragmentStateManager: computeExpectedState()

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: INITIALIZING -&gt; ATTACHED

    FragmentStateManager-&gt;&gt;Fragment: onAttach(context)
    Fragment--&gt;&gt;FragmentStateManager: å®Œæˆattach
    FragmentStateManager-&gt;&gt;Activity: onAttachFragment(fragment)

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: ATTACHED -&gt; CREATED

    FragmentStateManager-&gt;&gt;Fragment: onCreate(savedInstanceState)
    Fragment--&gt;&gt;FragmentStateManager: å®Œæˆcreate

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: CREATED -&gt; VIEW_CREATED

    FragmentStateManager-&gt;&gt;Fragment: onCreateView(inflater, container, savedInstanceState)
    Fragment--&gt;&gt;FragmentStateManager: return View
    FragmentStateManager-&gt;&gt;Fragment: onViewCreated(view, savedInstanceState)

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: VIEW_CREATED -&gt; ACTIVITY_CREATED

    FragmentStateManager-&gt;&gt;Fragment: onActivityCreated(savedInstanceState)
    Fragment--&gt;&gt;FragmentStateManager: å®ŒæˆactivityCreated

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: ACTIVITY_CREATED -&gt; STARTED

    FragmentStateManager-&gt;&gt;Fragment: onStart()
    Fragment--&gt;&gt;FragmentStateManager: å®Œæˆstart

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: STARTED -&gt; RESUMED

    FragmentStateManager-&gt;&gt;Fragment: onResume()
    Fragment--&gt;&gt;FragmentStateManager: å®Œæˆresume

    FragmentStateManager-&gt;&gt;FragmentManager: æ›´æ–°FragmentçŠ¶æ€
    FragmentManager-&gt;&gt;Activity: Fragmentå·²å°±ç»ª

    Note over Activity,Fragment: Fragmentå®Œå…¨æ˜¾ç¤ºï¼Œå¤„äºRESUMEDçŠ¶æ€

    Note over Activity,Fragment: ========== Activityç”Ÿå‘½å‘¨æœŸé©±åŠ¨FragmentçŠ¶æ€å˜æ›´ ==========

    Note over Activity,Fragment: åœºæ™¯1: Activityæš‚åœï¼ˆå¦‚é”å±ã€è·³è½¬åˆ°å…¶ä»–Activityï¼‰

    Activity-&gt;&gt;Activity: onPause()
    Activity-&gt;&gt;FragmentManager: dispatchPause()
    FragmentManager-&gt;&gt;FragmentStateManager: moveToState(STARTED)

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: RESUMED -&gt; STARTED

    FragmentStateManager-&gt;&gt;Fragment: onPause()
    Fragment--&gt;&gt;FragmentStateManager: å®Œæˆpause
    FragmentStateManager-&gt;&gt;FragmentManager: çŠ¶æ€å·²æ›´æ–°

    Note over Activity,Fragment: åœºæ™¯2: Activityåœæ­¢ï¼ˆå®Œå…¨ä¸å¯è§ï¼‰

    Activity-&gt;&gt;Activity: onStop()
    Activity-&gt;&gt;FragmentManager: dispatchStop()
    FragmentManager-&gt;&gt;FragmentStateManager: moveToState(ACTIVITY_CREATED)

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: STARTED -&gt; ACTIVITY_CREATED

    FragmentStateManager-&gt;&gt;Fragment: onStop()
    Fragment--&gt;&gt;FragmentStateManager: å®Œæˆstop
    FragmentStateManager-&gt;&gt;FragmentManager: çŠ¶æ€å·²æ›´æ–°

    Note over Activity,Fragment: åœºæ™¯3: Activityé”€æ¯

    Activity-&gt;&gt;Activity: onDestroy()
    Activity-&gt;&gt;FragmentManager: dispatchDestroy()
    FragmentManager-&gt;&gt;FragmentStateManager: moveToState(INITIALIZING)

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: ACTIVITY_CREATED -&gt; VIEW_CREATED

    FragmentStateManager-&gt;&gt;Fragment: onDestroyView()
    Fragment--&gt;&gt;FragmentStateManager: å®ŒæˆdestroyView

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: VIEW_CREATED -&gt; CREATED

    FragmentStateManager-&gt;&gt;Fragment: onDestroy()
    Fragment--&gt;&gt;FragmentStateManager: å®Œæˆdestroy

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: CREATED -&gt; ATTACHED

    FragmentStateManager-&gt;&gt;Fragment: onDetach()
    Fragment--&gt;&gt;FragmentStateManager: å®Œæˆdetach

    FragmentStateManager-&gt;&gt;FragmentManager: Fragmentå·²é”€æ¯
    FragmentManager-&gt;&gt;FragmentManager: ç§»é™¤Fragmentå¼•ç”¨

    Note over Activity,Fragment: åœºæ™¯4: Activityé‡æ–°å¯åŠ¨ï¼ˆä»åå°è¿”å›ï¼‰

    Activity-&gt;&gt;Activity: onRestart()
    Activity-&gt;&gt;Activity: onStart()
    Activity-&gt;&gt;FragmentManager: dispatchStart()
    FragmentManager-&gt;&gt;FragmentStateManager: moveToState(STARTED)

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: ACTIVITY_CREATED -&gt; STARTED

    FragmentStateManager-&gt;&gt;Fragment: onStart()
    Fragment--&gt;&gt;FragmentStateManager: å®Œæˆstart

    Activity-&gt;&gt;Activity: onResume()
    Activity-&gt;&gt;FragmentManager: dispatchResume()
    FragmentManager-&gt;&gt;FragmentStateManager: moveToState(RESUMED)

    Note over FragmentStateManager,Fragment: çŠ¶æ€å˜æ›´: STARTED -&gt; RESUMED

    FragmentStateManager-&gt;&gt;Fragment: onResume()
    Fragment--&gt;&gt;FragmentStateManager: å®Œæˆresume
    FragmentStateManager-&gt;&gt;FragmentManager: çŠ¶æ€å·²æ›´æ–°

    Note over Activity,Fragment: Fragmentå†æ¬¡å®Œå…¨æ˜¾ç¤ºï¼Œå¤„äºRESUMEDçŠ¶æ€

    Note over Activity,Fragment: åœºæ™¯5: é…ç½®å˜æ›´ï¼ˆå¦‚å±å¹•æ—‹è½¬ï¼‰

    Activity-&gt;&gt;Activity: onSaveInstanceState()
    Activity-&gt;&gt;FragmentManager: dispatchSaveInstanceState()
    FragmentManager-&gt;&gt;FragmentStateManager: saveState()
    FragmentStateManager-&gt;&gt;Fragment: onSaveInstanceState(outState)
    Fragment--&gt;&gt;FragmentStateManager: ä¿å­˜çŠ¶æ€æ•°æ®

    Note over Activity,Fragment: Activityé”€æ¯å¹¶é‡å»º

    Activity-&gt;&gt;FragmentManager: dispatchDestroy()
    Note over FragmentManager,Fragment: Fragmentæ‰§è¡Œé”€æ¯æµç¨‹ï¼ˆåŒåœºæ™¯3ï¼‰

    Activity-&gt;&gt;Activity: æ–°Activity onCreate()
    Activity-&gt;&gt;FragmentManager: æ¢å¤FragmentManagerçŠ¶æ€
    FragmentManager-&gt;&gt;FragmentStateManager: é‡å»ºFragment
    FragmentStateManager-&gt;&gt;Fragment: onCreate(savedInstanceState)
    Note over FragmentManager,Fragment: Fragmenté‡æ–°æ‰§è¡Œåˆ›å»ºæµç¨‹ï¼ˆåŒåˆå§‹æ·»åŠ é˜¶æ®µï¼‰
</code></pre>
<h3 data-id="heading-1">è¯´æ˜</h3>
<h4 data-id="heading-2">ä¸»è¦æµç¨‹</h4>
<ol>
<li>
<p><strong>äº‹åŠ¡åˆ›å»ºé˜¶æ®µ</strong></p>
<ul>
<li>Activityé€šè¿‡FragmentManagerè·å–FragmentTransaction</li>
<li>è°ƒç”¨add()æ–¹æ³•è®°å½•æ·»åŠ æ“ä½œ</li>
<li>è°ƒç”¨commit()æäº¤äº‹åŠ¡</li>
</ul>
</li>
<li>
<p><strong>çŠ¶æ€ç®¡ç†é˜¶æ®µ</strong></p>
<ul>
<li>FragmentManageråˆ›å»ºFragmentStateManageræ¥ç®¡ç†FragmentçŠ¶æ€</li>
<li>FragmentStateManagerè´Ÿè´£é©±åŠ¨Fragmentçš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€å˜æ›´</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸçŠ¶æ€å˜æ›´ï¼ˆå‘ä¸Šï¼‰</strong></p>
<ul>
<li>INITIALIZING â†’ ATTACHEDï¼šè°ƒç”¨onAttach()</li>
<li>ATTACHED â†’ CREATEDï¼šè°ƒç”¨onCreate()</li>
<li>CREATED â†’ VIEW_CREATEDï¼šè°ƒç”¨onCreateView()å’ŒonViewCreated()</li>
<li>VIEW_CREATED â†’ ACTIVITY_CREATEDï¼šè°ƒç”¨onActivityCreated()</li>
<li>ACTIVITY_CREATED â†’ STARTEDï¼šè°ƒç”¨onStart()</li>
<li>STARTED â†’ RESUMEDï¼šè°ƒç”¨onResume()</li>
</ul>
</li>
<li>
<p><strong>Activityé©±åŠ¨FragmentçŠ¶æ€å˜æ›´</strong></p>
<ul>
<li><strong>æš‚åœåœºæ™¯</strong>ï¼šActivity.onPause() â†’ FragmentManager.dispatchPause() â†’ Fragment.onPause()</li>
<li><strong>åœæ­¢åœºæ™¯</strong>ï¼šActivity.onStop() â†’ FragmentManager.dispatchStop() â†’ Fragment.onStop()</li>
<li><strong>é”€æ¯åœºæ™¯</strong>ï¼šActivity.onDestroy() â†’ FragmentManager.dispatchDestroy() â†’ Fragmentä¾æ¬¡æ‰§è¡ŒonDestroyView()ã€onDestroy()ã€onDetach()</li>
<li><strong>æ¢å¤åœºæ™¯</strong>ï¼šActivityé‡å¯æ—¶ï¼Œé€šè¿‡dispatchStart()å’ŒdispatchResume()é©±åŠ¨Fragmentæ¢å¤åˆ°RESUMEDçŠ¶æ€</li>
<li><strong>é…ç½®å˜æ›´</strong>ï¼šActivityåœ¨é”€æ¯å‰ä¿å­˜FragmentçŠ¶æ€ï¼Œé‡å»ºåæ¢å¤Fragment</li>
</ul>
</li>
<li>
<p><strong>FragmentçŠ¶æ€ä¸Activityç”Ÿå‘½å‘¨æœŸçš„å¯¹åº”å…³ç³»</strong></p>
<ul>
<li>Activity RESUMED â†’ Fragment RESUMED</li>
<li>Activity STARTED â†’ Fragment STARTED</li>
<li>Activity CREATED â†’ Fragment ACTIVITY_CREATED</li>
<li>Activity DESTROYED â†’ Fragment INITIALIZING</li>
</ul>
</li>
</ol>
<h4 data-id="heading-3">å…³é”®ç±»èŒè´£</h4>
<ul>
<li><strong>Activity</strong>ï¼šå®¿ä¸»å®¹å™¨ï¼Œç”Ÿå‘½å‘¨æœŸå˜åŒ–æ—¶é€šè¿‡FragmentManageråˆ†å‘äº‹ä»¶é©±åŠ¨FragmentçŠ¶æ€åŒæ­¥å˜æ›´</li>
<li><strong>FragmentManager</strong>ï¼šç®¡ç†Fragmenté›†åˆï¼Œæ¥æ”¶Activityç”Ÿå‘½å‘¨æœŸäº‹ä»¶å¹¶åè°ƒFragmentçŠ¶æ€è½¬æ¢</li>
<li><strong>FragmentTransaction</strong>ï¼šè®°å½•Fragmentæ“ä½œï¼Œæäº¤äº‹åŠ¡</li>
<li><strong>FragmentStateManager</strong>ï¼šç®¡ç†å•ä¸ªFragmentçš„çŠ¶æ€å˜æ›´ï¼Œè°ƒç”¨moveToState()æ‰§è¡ŒçŠ¶æ€è½¬æ¢</li>
<li><strong>Fragment</strong>ï¼šUIç»„ä»¶ï¼Œå“åº”ç”Ÿå‘½å‘¨æœŸå›è°ƒ</li>
</ul>
<h4 data-id="heading-4">çŠ¶æ€è½¬æ¢å…³é”®ç‚¹</h4>
<ul>
<li>Fragmentçš„çŠ¶æ€å§‹ç»ˆä¸ä¼šè¶…è¿‡å…¶å®¿ä¸»Activityçš„çŠ¶æ€</li>
<li>FragmentManageré€šè¿‡dispatchç³»åˆ—æ–¹æ³•ï¼ˆdispatchPause/Stop/Destroy/Start/Resumeï¼‰åŒæ­¥Activityç”Ÿå‘½å‘¨æœŸåˆ°Fragment</li>
<li>FragmentStateManageræ ¹æ®ç›®æ ‡çŠ¶æ€è®¡ç®—éœ€è¦æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åºåˆ—</li>
<li>é…ç½®å˜æ›´æ—¶ï¼ŒFragmentçŠ¶æ€ä¼šè¢«ä¿å­˜å¹¶åœ¨Activityé‡å»ºåæ¢å¤</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ ï¼šKotlinä¸­çš„JvmOverloadsæ³¨è§£]]></title>    <link>https://juejin.cn/post/7603376587651940402</link>    <guid>https://juejin.cn/post/7603376587651940402</guid>    <pubDate>2026-02-06T08:53:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603376587651940402" data-draft-id="7603347438013268003" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹ ï¼šKotlinä¸­çš„JvmOverloadsæ³¨è§£"/> <meta itemprop="keywords" content="Kotlin,Java"/> <meta itemprop="datePublished" content="2026-02-06T08:53:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="unravel2025"/> <meta itemprop="url" content="https://juejin.cn/user/1116759541421880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹ ï¼šKotlinä¸­çš„JvmOverloadsæ³¨è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1116759541421880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    unravel2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T08:53:42.000Z" title="Fri Feb 06 2026 08:53:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>@JvmOverloads æ˜¯ Kotlin ä¸­ä¸€ä¸ªéå¸¸å®ç”¨ä¸”é‡è¦çš„æ³¨è§£ï¼Œå®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯ä¸º Kotlin å‡½æ•°è‡ªåŠ¨ç”Ÿæˆ Java å‹å¥½çš„é‡è½½æ–¹æ³•ï¼Œä»è€Œç®€åŒ– Kotlin ä¸ Java ä¹‹é—´çš„äº’æ“ä½œã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒä½œç”¨ï¼šè§£å†³é»˜è®¤å‚æ•°çš„äº’æ“ä½œæ€§é—®é¢˜</h2>
<p>Kotlin æ”¯æŒå‡½æ•°çš„é»˜è®¤å‚æ•°ï¼Œè¿™æå¤§åœ°æé«˜äº†ä»£ç çš„ç®€æ´æ€§å’Œå¯è¯»æ€§ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Kotlin ä»£ç </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dialog</span>(
    <span class="hljs-keyword">val</span> title: String,
    <span class="hljs-keyword">val</span> message: String = <span class="hljs-string">"Default Message"</span>, <span class="hljs-comment">// é»˜è®¤å‚æ•°</span>
    <span class="hljs-keyword">val</span> okButtonText: String = <span class="hljs-string">"OK"</span>          <span class="hljs-comment">// é»˜è®¤å‚æ•°</span>
) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span> { <span class="hljs-comment">/* ... */</span> }
}

</code></pre>
<p>åœ¨ Kotlin ä¸­è°ƒç”¨æ—¶ï¼Œä½ å¯ä»¥éå¸¸çµæ´»åœ°çœç•¥æœ‰é»˜è®¤å€¼çš„å‚æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> dialog1 = Dialog(<span class="hljs-string">"Warning"</span>) <span class="hljs-comment">// message å’Œ okButtonText ä½¿ç”¨é»˜è®¤å€¼</span>
<span class="hljs-keyword">val</span> dialog2 = Dialog(<span class="hljs-string">"Warning"</span>, <span class="hljs-string">"Custom Message"</span>) <span class="hljs-comment">// åªçœç•¥æœ€åä¸€ä¸ªå‚æ•°</span>
<span class="hljs-keyword">val</span> dialog3 = Dialog(<span class="hljs-string">"Warning"</span>, <span class="hljs-string">"Custom Message"</span>, <span class="hljs-string">"Confirm"</span>)
</code></pre>
<p>ç„¶è€Œï¼ŒJava è¯­è¨€æœ¬èº«ä¸æ”¯æŒé»˜è®¤å‚æ•°ã€‚å¦‚æœä¸Šé¢çš„ Dialog ç±»è¢« Java ä»£ç è°ƒç”¨ï¼Œæƒ…å†µå°±å˜å¾—å¾ˆéº»çƒ¦ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Java ä»£ç  - æ²¡æœ‰ @JvmOverloads çš„æƒ…å†µ</span>
<span class="hljs-type">Dialog</span> <span class="hljs-variable">dialog1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dialog</span>(<span class="hljs-string">"Warning"</span>); <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼ç¼ºå°‘ message å’Œ okButtonText å‚æ•°</span>

<span class="hljs-comment">// ä½ å¿…é¡»æ˜¾å¼åœ°ä¼ å…¥æ‰€æœ‰å‚æ•°ï¼Œå³ä½¿ä½ æƒ³ç”¨é»˜è®¤å€¼</span>
<span class="hljs-type">Dialog</span> <span class="hljs-variable">dialog2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dialog</span>(<span class="hljs-string">"Warning"</span>, <span class="hljs-string">"Default Message"</span>, <span class="hljs-string">"OK"</span>);
</code></pre>
<p>ä¸ºäº†è®© Java ä¹Ÿèƒ½æ–¹ä¾¿åœ°è°ƒç”¨è¿™äº›å¸¦æœ‰é»˜è®¤å‚æ•°çš„ Kotlin å‡½æ•°ï¼Œ@JvmOverloads æ³¨è§£åº”è¿è€Œç”Ÿã€‚</p>
<h2 data-id="heading-2">@JvmOverloads çš„å·¥ä½œåŸç†</h2>
<p>å½“ä½ åœ¨ä¸€ä¸ª Kotlin æ„é€ å‡½æ•°æˆ–å‡½æ•°ä¸Šæ·»åŠ  @JvmOverloads æ³¨è§£åï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºè¯¥å‡½æ•°ç”Ÿæˆä¸€ç³»åˆ—é‡è½½ç‰ˆæœ¬ï¼Œæ¯ä¸ªé‡è½½ç‰ˆæœ¬ä¾æ¬¡çœç•¥å°¾éƒ¨æœ‰é»˜è®¤å€¼çš„å‚æ•°ã€‚</p>
<p>å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬åŠ ä¸Šæ³¨è§£ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dialog</span> <span class="hljs-meta">@JvmOverloads</span> <span class="hljs-keyword">constructor</span>( <span class="hljs-comment">// æ³¨æ„æ³¨è§£åŠ åœ¨ constructor å…³é”®å­—å‰</span>
    <span class="hljs-keyword">val</span> title: String,
    <span class="hljs-keyword">val</span> message: String = <span class="hljs-string">"Default Message"</span>,
    <span class="hljs-keyword">val</span> okButtonText: String = <span class="hljs-string">"OK"</span>
) {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>ç°åœ¨ï¼ŒKotlin ç¼–è¯‘å™¨ä¼šä¸ºæˆ‘ä»¬ç”Ÿæˆä»¥ä¸‹ä¸‰ä¸ªæ„é€ å‡½æ•°çš„é‡è½½æ–¹æ³•ï¼ˆä¾› Java è°ƒç”¨ï¼‰ï¼š</p>
<ol>
<li>å…¨å‚æ•°ç‰ˆæœ¬ï¼šDialog(String title, String message, String okButtonText)</li>
<li>çœç•¥æœ€åä¸€ä¸ªé»˜è®¤å‚æ•°ï¼šDialog(String title, String message)</li>
<li>çœç•¥æœ€åä¸¤ä¸ªé»˜è®¤å‚æ•°ï¼šDialog(String title)</li>
</ol>
<p>è¿™æ ·ï¼ŒJava ä»£ç å°±å¯ä»¥åƒè°ƒç”¨æ™®é€š Java æ„é€ å‡½æ•°ä¸€æ ·æ–¹ä¾¿åœ°ä½¿ç”¨äº†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Java ä»£ç  - æœ‰ @JvmOverloads çš„æƒ…å†µ</span>
<span class="hljs-type">Dialog</span> <span class="hljs-variable">dialog1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dialog</span>(<span class="hljs-string">"Warning"</span>); <span class="hljs-comment">// å®Œç¾å·¥ä½œï¼</span>
<span class="hljs-type">Dialog</span> <span class="hljs-variable">dialog2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dialog</span>(<span class="hljs-string">"Warning"</span>, <span class="hljs-string">"Custom Message"</span>);
<span class="hljs-type">Dialog</span> <span class="hljs-variable">dialog3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dialog</span>(<span class="hljs-string">"Warning"</span>, <span class="hljs-string">"Custom Message"</span>, <span class="hljs-string">"Confirm"</span>);
</code></pre>
<p>å¯¹äºå‡½æ•°ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Kotlin å‡½æ•°</span>
<span class="hljs-meta">@JvmOverloads</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showToast</span><span class="hljs-params">(message: <span class="hljs-type">String</span>, length: <span class="hljs-type">Int</span> = Toast.LENGTH_SHORT, gravity: <span class="hljs-type">Int</span> = Gravity.CENTER)</span></span> {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>ç¼–è¯‘å™¨ä¼šç”Ÿæˆï¼š</p>
<pre><code class="hljs language-java" lang="java">â€¢ showToast(String message)

â€¢ showToast(String message, <span class="hljs-type">int</span> length)

â€¢ showToast(String message, <span class="hljs-type">int</span> length, <span class="hljs-type">int</span> gravity)
</code></pre>
<h2 data-id="heading-3">è¯­æ³•è¦ç‚¹å’Œæ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p>æ ‡æ³¨ä½ç½®ï¼š
â—¦ å¯¹äºæ„é€ å‡½æ•°ï¼šæ³¨è§£è¦æ”¾åœ¨ constructor å…³é”®å­—ä¹‹å‰ã€‚</p>
<p><code>class MyClass @JvmOverloads constructor(...)</code></p>
<p>â—¦ å¯¹äºæˆå‘˜å‡½æ•°/é¡¶å±‚å‡½æ•°ï¼šç›´æ¥æ”¾åœ¨ fun å…³é”®å­—ä¹‹å‰ã€‚</p>
<p><code>@JvmOverloads fun myFunction(...)</code></p>
</li>
<li>
<p>é»˜è®¤å‚æ•°å¿…é¡»ä»å³å‘å·¦è¿ç»­è®¾ç½®ï¼š@JvmOverloads åªèƒ½ä¸ºå°¾éƒ¨çš„ã€è¿ç»­çš„é»˜è®¤å‚æ•°ç”Ÿæˆé‡è½½ã€‚å¦‚æœä¸­é—´æŸä¸ªå‚æ•°æœ‰é»˜è®¤å€¼ï¼Œè€Œå®ƒå³è¾¹çš„å‚æ•°æ²¡æœ‰é»˜è®¤å€¼ï¼Œåˆ™æ— æ³•ä¸ºä¸­é—´è¿™ä¸ªå‚æ•°ç”Ÿæˆé‡è½½ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ­£ç¡®ç¤ºä¾‹ï¼šé»˜è®¤å€¼ä»å³å‘å·¦</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">example</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">String</span> = <span class="hljs-string">"B"</span>, c: <span class="hljs-type">Boolean</span> = <span class="hljs-literal">true</span>)</span></span>
<span class="hljs-comment">// ä¼šç”Ÿæˆ example(a), example(a, b), example(a, b, c)</span>

<span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šé»˜è®¤å€¼ä¸è¿ç»­</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">badExample</span><span class="hljs-params">(a: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>, b: <span class="hljs-type">String</span>, c: <span class="hljs-type">Boolean</span> = <span class="hljs-literal">true</span>)</span></span>
<span class="hljs-comment">// åªèƒ½ç”Ÿæˆ badExample(a, b, c)ï¼Œå› ä¸º b æ²¡æœ‰é»˜è®¤å€¼ï¼Œæ‰“æ–­äº†è¿ç»­æ€§ã€‚</span>
</code></pre>
</li>
<li>
<p>ç”Ÿæˆçš„é‡è½½æ–¹æ³•ä¼šå¢åŠ æ–¹æ³•æ•°ï¼šè™½ç„¶å¸¦æ¥äº†ä¾¿åˆ©ï¼Œä½†å¦‚æœä½ è¿‡åº¦ä½¿ç”¨ï¼ˆå°¤å…¶æ˜¯åœ¨æœ‰å¾ˆå¤šé»˜è®¤å‚æ•°çš„ç±»ä¸­ï¼‰ï¼Œå¯èƒ½ä¼šæ˜¾è‘—å¢åŠ ç±»ä¸­çš„æ–¹æ³•æ•°é‡ï¼ˆå­—èŠ‚ç å±‚é¢ï¼‰ã€‚åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯éœ€è¦ç•™æ„ã€‚</p>
</li>
<li>
<p>Kotlin è‡ªèº«è°ƒç”¨ä¸å—å½±å“ï¼š@JvmOverloads åªæ˜¯ä¸€ä¸ªç»™ç¼–è¯‘å™¨çš„æŒ‡ä»¤ï¼Œç”¨äºç”Ÿæˆ Java äº’æ“ä½œçš„é‡è½½æ–¹æ³•ã€‚åœ¨ Kotlin ä»£ç ä¸­ï¼Œä½ ä»ç„¶äº«å—é»˜è®¤å‚æ•°å¸¦æ¥çš„å…¨éƒ¨ä¾¿åˆ©ï¼Œä¸ä¼šç”Ÿæˆä»»ä½•é¢å¤–çš„ Kotlin æ–¹æ³•ã€‚</p>
</li>
</ol>
<h2 data-id="heading-4">æ€»ç»“</h2>
<h3 data-id="heading-5"><code>@JvmOverloads</code> ä½¿ç”¨å¯¹æ¯”</h3>

























<table><thead><tr><th align="left">åœºæ™¯</th><th align="left">æ²¡æœ‰ <code>@JvmOverloads</code></th><th align="left">æœ‰ <code>@JvmOverloads</code></th></tr></thead><tbody><tr><td align="left"><strong>Kotlin è°ƒç”¨</strong></td><td align="left">å¯è‡ªç”±çœç•¥å°¾éƒ¨é»˜è®¤å‚æ•°</td><td align="left">å¯è‡ªç”±çœç•¥å°¾éƒ¨é»˜è®¤å‚æ•°ï¼ˆæ— å˜åŒ–ï¼‰</td></tr><tr><td align="left"><strong>Java è°ƒç”¨</strong></td><td align="left">å¿…é¡»ä¼ å…¥æ‰€æœ‰éé»˜è®¤å‚æ•°ï¼Œç¹ç</td><td align="left">å¯ä»¥åƒè°ƒç”¨æ™®é€š Java æ–¹æ³•ä¸€æ ·ï¼Œä¼˜é›…åœ°çœç•¥å°¾éƒ¨å‚æ•°</td></tr><tr><td align="left"><strong>å®ç°æ–¹å¼</strong></td><td align="left">-</td><td align="left">ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆä¸€ç³»åˆ—é‡è½½æ–¹æ³•</td></tr></tbody></table>
<p>æ€»è€Œè¨€ä¹‹ï¼Œ@JvmOverloads æ˜¯ä¸€ä¸ªä¸“ä¸ºæå‡ Kotlin ä¸ Java äº’æ“ä½œæ€§è€Œè®¾è®¡çš„è¯­æ³•ç³–ã€‚å®ƒé€šè¿‡è‡ªåŠ¨ç”Ÿæˆé‡è½½æ–¹æ³•ï¼Œè®© Java å¼€å‘è€…èƒ½å¤Ÿæ— ç¼åœ°ä½¿ç”¨ Kotlin ä¸­é‚£äº›å¸¦æœ‰é»˜è®¤å‚æ•°çš„å‡½æ•°å’Œæ„é€ å‡½æ•°ï¼Œæå¤§åœ°æ”¹å–„äº†æ··åˆå¼€å‘é¡¹ç›®çš„ä½“éªŒã€‚ åœ¨è®¾è®¡ä¾›å¤–éƒ¨ï¼ˆå°¤å…¶æ˜¯ Javaï¼‰è°ƒç”¨çš„ API æ—¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—ä½¿ç”¨çš„æ³¨è§£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é«˜é€šQCRILå’ŒQMI]]></title>    <link>https://juejin.cn/post/7603355275257102376</link>    <guid>https://juejin.cn/post/7603355275257102376</guid>    <pubDate>2026-02-06T07:00:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603355275257102376" data-draft-id="7603308967125352448" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é«˜é€šQCRILå’ŒQMI"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T07:00:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é«˜é€šQCRILå’ŒQMI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:00:59.000Z" title="Fri Feb 06 2026 07:00:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. <strong>ä»€ä¹ˆæ˜¯ QCRILï¼Ÿ</strong></h3>
<p><strong>QCRIL</strong> = <strong>Qualcomm</strong> <strong>C</strong> <strong>RIL</strong> (é«˜é€š C è¯­è¨€ RIL)</p>
<ul>
<li>QCRIL æ˜¯é«˜é€šä¸ºå…¶ Snapdragon å¤„ç†å™¨å¼€å‘çš„ RIL å®ç°</li>
<li>æ˜¯ä¸€ä¸ªåŸå§‹å‚å•†æä¾›çš„ç”µè¯æ¥å£åº“ï¼Œå®ç°äº† Android çš„ RIL æ¥å£</li>
<li>è´Ÿè´£ä¸é«˜é€šè°ƒåˆ¶è§£è°ƒå™¨é€šä¿¡ï¼Œå¤„ç†ç”µè¯åŠŸèƒ½</li>
</ul>
<h3 data-id="heading-1">2. <strong>ä»€ä¹ˆæ˜¯ QMIï¼Ÿ</strong></h3>
<p><strong>QMI</strong> = <strong>Qualcomm Message Interface</strong> (é«˜é€šæ¶ˆæ¯æ¥å£)</p>
<ul>
<li>QMI æ˜¯é«˜é€šå®šä¹‰çš„é€šä¿¡åè®®ï¼Œç”¨äºä¸è°ƒåˆ¶è§£è°ƒå™¨(Modem)é€šä¿¡</li>
<li>æ˜¯ QCRIL çš„åº•å±‚é€šä¿¡åè®®</li>
<li>è¿è¡Œåœ¨å†…æ ¸ä¸­ï¼Œé€šè¿‡ <code>/dev/qmi</code> è®¾å¤‡è¿›è¡Œé€šä¿¡</li>
</ul>
<p><strong>å…³é”®ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åŸºäº<strong>æ¶ˆæ¯çš„é€šä¿¡åè®®</strong></li>
<li>ä½¿ç”¨ TLV (Tag-Length-Value) ç¼–ç æ ¼å¼</li>
<li>æ”¯æŒå¤šä¸ª<strong>æœåŠ¡</strong>(Service)ï¼Œæ¯ä¸ªæœåŠ¡è´Ÿè´£ä¸åŒçš„åŠŸèƒ½</li>
</ul>
<hr/>
<h3 data-id="heading-2">3. <strong>QCRIL å’Œ QMI çš„å…³ç³»</strong></h3>
<pre><code class="hljs language-scss" lang="scss">Android Framework (Phone App)
       â†“
RIL Daemon (rild)
       â†“
QCRIL Library (vendor-specific RIL implementation)
       â†“
QMI Protocol (/dev/qmi device)
       â†“
Modem (é«˜é€šè°ƒåˆ¶è§£è°ƒå™¨)
</code></pre>
<hr/>
<h3 data-id="heading-3">4. <strong>ä»£ç ç¤ºä¾‹ï¼šQMI æ•°æ®è¿æ¥å»ºç«‹</strong></h3>
<p>ä» <code>reference-ril.c</code> å¯ä»¥çœ‹åˆ° QMI çš„å®é™…ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-number">1916</span>|    fd = open (<span class="hljs-string">"/dev/qmi"</span>, O_RDWR);  <span class="hljs-comment">// æ‰“å¼€QMIè®¾å¤‡</span>
<span class="hljs-number">1917</span>|    <span class="hljs-keyword">if</span> (fd &gt;= <span class="hljs-number">0</span>) { <span class="hljs-comment">/* the device doesn't exist on the emulator */</span>
<span class="hljs-number">1918</span>|
<span class="hljs-number">1919</span>|        RLOGD(<span class="hljs-string">"opened the qmi device\n"</span>);
<span class="hljs-number">1920</span>|        asprintf(&amp;cmd, <span class="hljs-string">"up:%s"</span>, apn);  <span class="hljs-comment">// æ„é€ å‘½ä»¤ï¼šup:APNåç§°</span>
<span class="hljs-number">1921</span>|        len = <span class="hljs-built_in">strlen</span>(cmd);
<span class="hljs-number">1922</span>|
<span class="hljs-number">1923</span>|        <span class="hljs-keyword">while</span> (cur &lt; len) {
<span class="hljs-number">1924</span>|            <span class="hljs-keyword">do</span> {
<span class="hljs-number">1925</span>|                written = write (fd, cmd + cur, len - cur);  <span class="hljs-comment">// å‘é€QMIå‘½ä»¤ç»™modem</span>
<span class="hljs-number">1926</span>|            } <span class="hljs-keyword">while</span> (written &lt; <span class="hljs-number">0</span> &amp;&amp; errno == EINTR);
<span class="hljs-number">1927</span>|        }
<span class="hljs-number">1928</span>|
<span class="hljs-number">1929</span>|        <span class="hljs-comment">// ç­‰å¾…æ¥å£ä¸Šçº¿</span>
<span class="hljs-number">1930</span>|        <span class="hljs-keyword">do</span> {
<span class="hljs-number">1931</span>|            sleep(<span class="hljs-number">1</span>);
<span class="hljs-number">1932</span>|            <span class="hljs-keyword">do</span> {
<span class="hljs-number">1933</span>|                rlen = read(fd, status, <span class="hljs-number">31</span>);  <span class="hljs-comment">// è¯»å–modemå“åº”</span>
<span class="hljs-number">1934</span>|            } <span class="hljs-keyword">while</span> (rlen &lt; <span class="hljs-number">0</span> &amp;&amp; errno == EINTR);
<span class="hljs-number">1935</span>|        } <span class="hljs-keyword">while</span> (<span class="hljs-built_in">strncmp</span>(status, <span class="hljs-string">"STATE=up"</span>, <span class="hljs-number">8</span>) &amp;&amp; <span class="hljs-built_in">strcmp</span>(status, <span class="hljs-string">"online"</span>) &amp;&amp; --retry);
</code></pre>
<p><strong>æ•°æ®è¿æ¥æµç¨‹ï¼š</strong></p>





































<table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th></tr></thead><tbody><tr><td>1</td><td>RIL æ¥æ”¶ <code>RIL_REQUEST_SETUP_DATA_CALL</code> è¯·æ±‚</td></tr><tr><td>2</td><td>QCRIL æ‰“å¼€ <code>/dev/qmi</code> è®¾å¤‡</td></tr><tr><td>3</td><td>å‘é€ QMI å‘½ä»¤ï¼š<code>up:apn_name</code></td></tr><tr><td>4</td><td>Modem å¤„ç† QMI æ¶ˆæ¯ï¼Œå»ºç«‹æ•°æ®è¿æ¥</td></tr><tr><td>5</td><td>è¯»å– Modem å“åº”çŠ¶æ€ (<code>STATE=up</code> æˆ– <code>online</code>)</td></tr><tr><td>6</td><td>é…ç½®ç½‘ç»œæ¥å£ (<code>netcfg rmnet0 dhcp</code>)</td></tr><tr><td>7</td><td>è¿”å›æ•°æ®è¿æ¥ç»“æœç»™ Android Framework</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-4">5. <strong>QMI æœåŠ¡ç±»å‹</strong></h3>
<p>QMI å®šä¹‰äº†å¤šä¸ªæœåŠ¡ï¼Œç”¨äºå¤„ç†ä¸åŒç±»å‹çš„è¯·æ±‚ï¼š</p>








































<table><thead><tr><th>QMI æœåŠ¡</th><th>åŠŸèƒ½</th><th>å…³è”çš„ RIL è¯·æ±‚</th></tr></thead><tbody><tr><td><strong>WDS</strong> (Wireless Data Service)</td><td>æ•°æ®è¿æ¥ã€åˆ†ç»„æ•°æ®</td><td><code>SETUP_DATA_CALL</code>, <code>DEACTIVATE_DATA_CALL</code></td></tr><tr><td><strong>NAS</strong> (Network Access Service)</td><td>ç½‘ç»œæ³¨å†Œã€ä¿¡å·å¼ºåº¦ã€æœåŠ¡çŠ¶æ€</td><td><code>VOICE_REGISTRATION_STATE</code>, <code>DATA_REGISTRATION_STATE</code></td></tr><tr><td><strong>QMI_CTL</strong></td><td>QMI æ§åˆ¶å’Œåˆå§‹åŒ–</td><td>åŸºç¡€åˆå§‹åŒ–</td></tr><tr><td><strong>SMS</strong></td><td>çŸ­ä¿¡æœåŠ¡</td><td><code>SEND_SMS</code>, <code>RECEIVE_SMS</code></td></tr><tr><td><strong>DMS</strong> (Device Management Service)</td><td>è®¾å¤‡ç®¡ç†</td><td>è·å– IMEIã€IMSI ç­‰</td></tr><tr><td><strong>UIM</strong> (USIM Interface)</td><td>SIM å¡ç®¡ç†</td><td><code>SIM_IO</code>, <code>GET_SIM_STATUS</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-5">6. <strong>RIL è¯·æ±‚å¤„ç†æµç¨‹</strong></h3>
<p>ä»¥ <code>RIL_REQUEST_SETUP_DATA_CALL</code> ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Java å±‚ (ConnectivityManager)
   â†“
RIL.java (java/com/android/internal/telephony/)
   â†“
radio::setupDataCallResponse (ril_service.cpp)
   â†“
QCRIL (vendor library)
   â†“
QMI WDS Service (Write to /dev/qmi)
   â†“
Modem (æ‰§è¡Œæ•°æ®è¿æ¥)
   â†“
QMI WDS Response (Read from /dev/qmi)
   â†“
RIL_onRequestComplete() å›è°ƒ
   â†“
Java å±‚è·å¾—ç»“æœï¼Œæ›´æ–°ç½‘ç»œçŠ¶æ€
</code></pre>
<hr/>
<h3 data-id="heading-6">7. <strong>å®é™…çš„ RIL è¯·æ±‚å¤„ç†</strong></h3>
<p>ä» <code>ril_service.cpp</code> çœ‹æ•°æ®è°ƒç”¨è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">Return&lt;<span class="hljs-type">void</span>&gt; <span class="hljs-title">RadioImpl::setupDataCall</span><span class="hljs-params">(
    <span class="hljs-type">int32_t</span> serial, 
    RadioTechnology radioTechnology,
    <span class="hljs-type">const</span> DataProfileInfo&amp; dataProfileInfo, 
    <span class="hljs-type">bool</span> modemCognitive,
    <span class="hljs-type">bool</span> roamingAllowed, 
    <span class="hljs-type">bool</span> isRoaming)</span> </span>{
    
    <span class="hljs-comment">// æ„é€  RIL_REQUEST_SETUP_DATA_CALL è¯·æ±‚å‚æ•°</span>
    <span class="hljs-built_in">dispatchStrings</span>(serial, mSlotId, RIL_REQUEST_SETUP_DATA_CALL, <span class="hljs-literal">true</span>, <span class="hljs-number">15</span>,
        std::<span class="hljs-built_in">to_string</span>((<span class="hljs-type">int</span>) radioTechnology + <span class="hljs-number">2</span>).<span class="hljs-built_in">c_str</span>(),
        std::<span class="hljs-built_in">to_string</span>((<span class="hljs-type">int</span>) dataProfileInfo.profileId).<span class="hljs-built_in">c_str</span>(),
        dataProfileInfo.apn.<span class="hljs-built_in">c_str</span>(),           <span class="hljs-comment">// APN åç§°</span>
        dataProfileInfo.user.<span class="hljs-built_in">c_str</span>(),          <span class="hljs-comment">// ç”¨æˆ·å</span>
        dataProfileInfo.password.<span class="hljs-built_in">c_str</span>(),      <span class="hljs-comment">// å¯†ç </span>
        std::<span class="hljs-built_in">to_string</span>((<span class="hljs-type">int</span>) dataProfileInfo.authType).<span class="hljs-built_in">c_str</span>(),
        dataProfileInfo.protocol.<span class="hljs-built_in">c_str</span>(),      <span class="hljs-comment">// IP/IPv6/IPV4V6</span>
        <span class="hljs-comment">// ... æ›´å¤šå‚æ•°</span>
    );
}
</code></pre>
<hr/>
<h3 data-id="heading-7">8. <strong>QCRIL çš„ä¼˜åŠ¿</strong></h3>

























<table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>é«˜æ€§èƒ½</strong></td><td>é’ˆå¯¹é«˜é€š Modem ä¼˜åŒ–</td></tr><tr><td><strong>åŠŸèƒ½å®Œæ•´</strong></td><td>æ”¯æŒæ‰€æœ‰é«˜é€š Modem ç‰¹æ€§</td></tr><tr><td><strong>ç¨³å®šæ€§</strong></td><td>ç»è¿‡ä¸¥æ ¼æµ‹è¯•</td></tr><tr><td><strong>ä½å»¶è¿Ÿ</strong></td><td>ç›´æ¥é€šè¿‡ QMI åè®®ä¸ Modem é€šä¿¡</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">9. <strong>å…³é”®æ–‡ä»¶ä½ç½®</strong></h3>

























<table><thead><tr><th>æ–‡ä»¶</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>hardware_ril/reference-ril/reference-ril.c</code></td><td>å‚è€ƒ RIL å®ç°</td></tr><tr><td><code>hardware_ril/libril/ril.cpp</code></td><td>RIL æ ¸å¿ƒåº“</td></tr><tr><td><code>hardware_ril/libril/ril_service.cpp</code></td><td>RIL HAL æœåŠ¡é€‚é…</td></tr><tr><td><code>hardware_ril/include/telephony/ril.h</code></td><td>RIL æ¥å£å®šä¹‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-9">10. <strong>æ€»ç»“</strong></h3>
<ul>
<li><strong>QCRIL</strong> æ˜¯é«˜é€šå®ç°çš„ RILï¼Œéµå¾ª Android çš„ RIL æ¥å£è§„èŒƒ</li>
<li><strong>QMI</strong> æ˜¯ QCRIL ä¸ Modem é€šä¿¡çš„åº•å±‚åè®®</li>
<li>QMI é€šè¿‡ <code>/dev/qmi</code> è®¾å¤‡é©±åŠ¨ä¸å†…æ ¸äº¤äº’</li>
<li>æ‰€æœ‰ç”µè¯åŠŸèƒ½ï¼ˆé€šè¯ã€çŸ­ä¿¡ã€æ•°æ®ç­‰ï¼‰éƒ½é€šè¿‡ QMI æ¶ˆæ¯åœ¨ QCRIL å’Œ Modem ä¹‹é—´ä¼ è¾“</li>
<li>QCRIL + QMI æ„æˆäº† Android ç³»ç»Ÿä¸é«˜é€š Modem é€šä¿¡çš„æ¡¥æ¢</li>
</ul>
<p>è¿™ä¸ªæ¶æ„ç¡®ä¿äº† Android ç³»ç»Ÿä¸ä¸åŒå‚å•† Modem çš„å…¼å®¹æ€§ï¼ŒåŒæ—¶ä¸ºå‚å•†æä¾›äº†ä¼˜åŒ–å…¶ç¡¬ä»¶çš„æœºä¼šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[mybatis]]></title>    <link>https://juejin.cn/post/7603301285475647530</link>    <guid>https://juejin.cn/post/7603301285475647530</guid>    <pubDate>2026-02-06T07:04:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603301285475647530" data-draft-id="7603352061505765382" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="mybatis"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T07:04:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚¦æ‚¦å¦å¦"/> <meta itemprop="url" content="https://juejin.cn/user/3395772841729421"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            mybatis
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3395772841729421/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚¦æ‚¦å¦å¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:04:44.000Z" title="Fri Feb 06 2026 07:04:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‡†å¤‡å·¥ä½œ</h3>
<ul>
<li>
<p>ç›¸å…³mavenä¾èµ–
<code>Lombok</code> <code>Spring Web</code>  <code>MyBatis Framework</code>  <code>MySQL Driver</code></p>
</li>
<li>
<p>application.properties é…ç½®æ•°æ®æº</p>
</li>
</ul>
<pre><code class="hljs language-java" lang="java">spring.datasource.url=jdbc:mysql:<span class="hljs-comment">//localhost:3306/myapp_db</span>
spring.datasource.username=xxx
spring.datasource.password=xxx
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver


# resourcesç›®å½•ä¸‹æ–°å»ºmapperç›®å½• 
mybatis.mapper-locations=classpath:mapper<span class="hljs-comment">/**.xml
# æ•°æ®åº“è¡¨åˆ—æ˜ ä¸­æ¨ªçº¿è½¬ è¡¨å®ä½“beanå¯¹åº”çš„å°é©¼å³°
mybatis.configuration.map-underscore-to-camel-case=true
# å¼€å¯sqlæ—¥å¿—
logging.level.org.example.mybatis.mapper=debug
</span></code></pre>
<ul>
<li>ideaå®‰è£…<code>mybatisx</code>æ’ä»¶, æŒ‰é”®è‡ªåŠ¨ç”ŸæˆMapperæ¥å£å¯¹åº”çš„xmlå®ç°</li>
</ul>
<h3 data-id="heading-1">å–å€¼</h3>
<p><code>#{}</code><strong>å®‰å…¨</strong>çš„å‚æ•°é¢„ç¼–è¯‘<br/>
<code>${}</code>æ˜¯<strong>ç›´æ¥</strong>çš„å­—ç¬¦ä¸²æ‹¼æ¥ã€‚</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th><code>#{}</code>Â (äº•å·å ä½ç¬¦)</th><th><code>${}</code>Â (ç¾å…ƒå ä½ç¬¦)</th></tr></thead><tbody><tr><td><strong>å¤„ç†æ–¹å¼</strong></td><td><strong>é¢„ç¼–è¯‘ï¼ˆPreparedStatementï¼‰</strong> ï¼Œå‚æ•°åŒ–æŸ¥è¯¢</td><td><strong>å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆStatementï¼‰</strong> ï¼Œç›´æ¥æ›¿æ¢</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td><strong>é«˜</strong>ï¼Œæœ‰æ•ˆé˜²æ­¢SQLæ³¨å…¥</td><td><strong>ä½</strong>ï¼Œå­˜åœ¨SQLæ³¨å…¥é£é™©</td></tr><tr><td><strong>å‚æ•°ç±»å‹</strong></td><td>ä»»æ„ç±»å‹ï¼Œè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢å’Œè½¬ä¹‰</td><td>é€šå¸¸ä¸º<strong>å­—ç¬¦ä¸²</strong>ï¼ŒåŸæ ·æ›¿æ¢ï¼Œä¸è½¬ä¹‰</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td><strong>å‡ ä¹æ‰€æœ‰çš„å€¼ä¼ é€’</strong>ï¼ˆWHEREæ¡ä»¶å€¼ã€INSERTå€¼ç­‰ï¼‰</td><td><strong>åŠ¨æ€SQLç‰‡æ®µ</strong>ï¼ˆè¡¨åã€åˆ—åã€ORDER BYç­‰ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-2">å–å…¥å‚å€¼</h4>
<ul>
<li>å½“åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ï¼Œç›´æ¥æ”¾å˜é‡å(xmlä¸­çš„å˜é‡åå¯ä»¥éšä¾¿å‘½å) æˆ– beanä¸­å±æ€§, è¿™æ—¶å¯ä»¥ä¸ç”¨<code>@Param</code>ï¼›è‹¥ç”¨äº†<code>@Param</code>ï¼Œxmlä¸­çš„å˜é‡åå¿…é¡»å’Œ<code>@Param</code>å†…çš„å‘½åä¿æŒä¸€è‡´ï¼Œä¸èƒ½ç›´æ¥å–beanä¸­å±æ€§ï¼Œéœ€è¦<code>@Param</code>å†…çš„å‘½å.å±æ€§å</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Mapper</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> {

    User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(String id)</span>;

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertUser</span><span class="hljs-params">(User user)</span>;

}

&lt;select id=<span class="hljs-string">"getUserById"</span> resultType=<span class="hljs-string">"org.example.mybatis.entity.User"</span>&gt;
    select * from users <span class="hljs-type">where</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> #{id}
&lt;/select&gt;

&lt;!-- username  email ä¸º User ä¸­çš„å±æ€§ --&gt;
&lt;insert id=<span class="hljs-string">"insertUser"</span>&gt;
    insert into <span class="hljs-title function_">users</span><span class="hljs-params">(username, email)</span>values (#{username}, #{email})
&lt;/insert&gt;
</code></pre>
<ul>
<li>å¤šä¸ªå‚æ•°ç”¨<code>@Param</code></li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(<span class="hljs-meta">@Param("id")</span> String id, <span class="hljs-meta">@Param("us")</span> User user)</span>;

&lt;update id=<span class="hljs-string">"updateUser"</span>&gt;
    update users
    <span class="hljs-type">set</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> #{us.username},
        email    = #{us.email}
    <span class="hljs-type">where</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> #{id}
&lt;/update&gt;
</code></pre>
<p><code>æœ€ä½³å®è·µ</code>ï¼šä¸ºäº†ç»Ÿä¸€åŒ–å–å‚ï¼Œå³ä½¿ä¸€ä¸ªå‚æ•°ä¹Ÿä½¿ç”¨<code>@Param</code></p>
<h3 data-id="heading-3">è¿”å›å€¼å¤„ç†</h3>
<h4 data-id="heading-4">è¿”å›æ™®é€šæ•°æ® <code>resultType</code></h4>
<ul>
<li>è¿”å›åŸºæœ¬ç±»å‹ã€Stringã€Longã€æ™®é€šjaveBeanéƒ½åªéœ€è¦åœ¨ <code>resultType</code>ä¸­å£°æ˜è¿”å›å€¼çš„å…¨é™å®šç±»å</li>
<li>mybatis.configuration.map-underscore-to-camel-case=true <code>å¼€å¯é©¼å³°æ˜ å°„</code>ï¼šè¡¨ä¸­æŸ¥è¯¢ç»“æœé›†ä¸­<code>a_column</code>åˆ—ä¼šè‡ªåŠ¨è¢«æ˜ å°„ä¸ºbeanä¸­çš„<code>aColumn</code>å±æ€§</li>
</ul>
<h4 data-id="heading-5">è‡ªå®šä¹‰æ˜ å°„ç»“æœé›† <code>resultMap</code></h4>
<p>å½“è¡¨ä¸­ç»“æœå’Œjavabeanå±æ€§ä¸èƒ½æ˜ å°„ï¼ˆå­—æ®µåä¸å¯¹åº”ï¼Œå³ä½¿å¼€å¯é©¼å³°æ˜ å°„ä¹Ÿä¸è¡Œï¼‰ï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰æ˜ å°„</p>
<pre><code class="hljs language-xml" lang="xml">
<span class="hljs-comment">&lt;!-- å½“ç»“æœè¡¨èƒ½ä¸»åŠ¨æ˜ å°„beanä¸­å±æ€§æ—¶ï¼Œå¯ä»¥ä¸ç”¨åœ¨resultMapä¸­å£°æ˜ idè‡ªå®šä¹‰çš„ç»“æœæ˜ å°„å”¯ä¸€å type-æ¥å—ç»“æœbeançš„å…¨ç±»å --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"UserRm"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"org.example.mybatis.entity.User"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- idæ ‡ç­¾-ä¸»é”® resultæ ‡ç­¾-å…¶ä»–æ™®é€šåˆ— column-ç»“æœè¡¨çš„åˆ—å property-beançš„å±æ€§å --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"user_phone"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"phone"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"getUserByIdRm"</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"UserRm"</span>&gt;</span>
    select * from users;
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[THREE.js æ‘„åƒæœº]]></title>    <link>https://juejin.cn/post/7603383059150831658</link>    <guid>https://juejin.cn/post/7603383059150831658</guid>    <pubDate>2026-02-06T07:04:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603383059150831658" data-draft-id="7603389033040986166" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="THREE.js æ‘„åƒæœº"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,three.js"/> <meta itemprop="datePublished" content="2026-02-06T07:04:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¾™çŒ«ä¸çƒ­"/> <meta itemprop="url" content="https://juejin.cn/user/4098608612778654"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            THREE.js æ‘„åƒæœº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4098608612778654/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¾™çŒ«ä¸çƒ­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:04:29.000Z" title="Fri Feb 06 2026 07:04:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰ç½®ä»£ç </h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">html</span>,
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    }

    <span class="hljs-selector-id">#c</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">display</span>: block;
    }

    <span class="hljs-selector-class">.split</span> {
      <span class="hljs-attribute">position</span>: absolute;
      <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">display</span>: flex;
    }

    <span class="hljs-selector-class">.split</span>&gt;<span class="hljs-selector-tag">div</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"c"</span>&gt;</span>

  <span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"split"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"view1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"view2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"importmap"</span>&gt;</span><span class="javascript">
    {
        <span class="hljs-string">"imports"</span>: {
            <span class="hljs-string">"three"</span>: <span class="hljs-string">"https://esm.sh/three@0.174.0/build/three.module.js"</span>,
            <span class="hljs-string">"three/addons/"</span>: <span class="hljs-string">"https://cdn.jsdelivr.net/npm/three@0.174.0/examples/jsm/"</span>
        }   
    }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./index.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-1">é€è§†æ‘„åƒæœº<a href="https://link.juejin.cn?target=https%3A%2F%2Fthreejs.org%2Fdocs%2F%23api%2Fzh%2Fcameras%2FPerspectiveCamera" target="_blank" title="https://threejs.org/docs/#api/zh/cameras/PerspectiveCamera" ref="nofollow noopener noreferrer"><code>PerspectiveCamera</code></a></h2>
<p><code>PerspectiveCamera</code> é€šè¿‡å››ä¸ªå±æ€§æ¥å®šä¹‰ä¸€ä¸ªè§†é”¥, <code>near</code>å®šä¹‰è§†é”¥å‰ç«¯, <code>far</code>å®šä¹‰è¿œç«¯, <code>fov</code>æ˜¯è§†é‡, é€šè¿‡è®¡ç®—æ­£ç¡®çš„é«˜åº¦æ¥ä»æ‘„åƒæœºçš„ä½ç½®è·å–æŒ‡å®šçš„ä»¥<code>near</code>ä¸ºå•ä½çš„è§†é‡, å®šä¹‰çš„æ˜¯è§†é”¥çš„å‰ç«¯å’Œè¿œç«¯çš„é«˜åº¦
<code>aspect</code>é—´æ¥åœ°å®šä¹‰äº†è§†é”¥å‰ç«¯å’Œè¿œç«¯çš„å®½åº¦, å®é™…ä¸Šè§†é”¥çš„å®½åº¦æ˜¯é€šè¿‡é«˜åº¦ä¹˜ä»¥ <code>aspect</code> æ¥å¾—åˆ°çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d3376eb777f44248f74c7156e361b04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z54yr5LiN54Ot:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966269&amp;x-signature=Z0C%2FbuZ7LRjOsGGt7cqkoZHG38s%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢è¿™ä¸ªä¾‹å­æˆ‘ä»¬ä½¿ç”¨ three çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fthreejs.org%2Fdocs%2Findex.html%3Fq%3Dwebgl%23WebGLRenderer.setScissor" target="_blank" title="https://threejs.org/docs/index.html?q=webgl#WebGLRenderer.setScissor" ref="nofollow noopener noreferrer">å‰ªå‡½æ•°</a>, æŠŠè§†å›¾åˆ†æˆä¸¤éƒ¨åˆ†, ä¸»è§†å›¾æ­£å¸¸æ¸²æŸ“, è¾…è§†å›¾ç”¨æ¥è§‚å¯Ÿ <code>cameraHelper</code> çš„æ¸²æŸ“</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"three"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">OrbitControls</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"three/addons/controls/OrbitControls.js"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">GUI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"three/addons/libs/lil-gui.module.min.js"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#c"</span>);
  <span class="hljs-keyword">const</span> view1Elem = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#view1"</span>);
  <span class="hljs-keyword">const</span> view2Elem = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#view2"</span>);

  <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({ <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span>, canvas });

  <span class="hljs-comment">// #region å·¦è§†å›¾çš„ç›¸æœº</span>
  <span class="hljs-keyword">const</span> fov = <span class="hljs-number">45</span>;
  <span class="hljs-keyword">const</span> aspect = <span class="hljs-number">2</span>; <span class="hljs-comment">// the canvas default</span>
  <span class="hljs-keyword">const</span> near = <span class="hljs-number">0.1</span>;
  <span class="hljs-keyword">const</span> far = <span class="hljs-number">100</span>;
  <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(fov, aspect, near, far);
  camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>);

  <span class="hljs-keyword">const</span> cameraHelper = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">CameraHelper</span>(camera);

  <span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, view1Elem);
  controls.<span class="hljs-property">target</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>);
  controls.<span class="hljs-title function_">update</span>();

  <span class="hljs-comment">// #endregion</span>

  <span class="hljs-comment">// #region å³è§†å›¾çš„ç›¸æœº</span>
  <span class="hljs-keyword">const</span> camera2 = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(
    <span class="hljs-number">60</span>, <span class="hljs-comment">// fov</span>
    <span class="hljs-number">2</span>, <span class="hljs-comment">// aspect</span>
    <span class="hljs-number">0.1</span>, <span class="hljs-comment">// near</span>
    <span class="hljs-number">500</span>, <span class="hljs-comment">// far</span>
  );
  camera2.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">40</span>, <span class="hljs-number">10</span>, <span class="hljs-number">30</span>);
  camera2.<span class="hljs-title function_">lookAt</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> controls2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera2, view2Elem);
  controls2.<span class="hljs-property">target</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>);
  controls2.<span class="hljs-title function_">update</span>();

  <span class="hljs-comment">// #endregion</span>

  <span class="hljs-comment">/**
   * è®¾ç½®è£å‰ªåŒºåŸŸå’Œè§†å£, è¿”å›å®½é«˜æ¯”
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">elem</span>
   * <span class="hljs-doctag">@returns</span>
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">setScissorForElement</span>(<span class="hljs-params">elem</span>) {
    <span class="hljs-comment">// è·å– canvas ä¸å…ƒç´ çš„è¾¹ç•ŒçŸ©å½¢</span>
    <span class="hljs-keyword">const</span> canvasRect = canvas.<span class="hljs-title function_">getBoundingClientRect</span>();
    <span class="hljs-keyword">const</span> elemRect = elem.<span class="hljs-title function_">getBoundingClientRect</span>();

    <span class="hljs-comment">// ç›¸å¯¹ä½ç½®è®¡ç®—å…ƒç´ åœ¨ canvas å†…çš„å·¦å³ä¸Šä¸‹è¾¹ç•Œ</span>
    <span class="hljs-keyword">const</span> right = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(elemRect.<span class="hljs-property">right</span>, canvasRect.<span class="hljs-property">right</span>) - canvasRect.<span class="hljs-property">left</span>;
    <span class="hljs-keyword">const</span> left = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, elemRect.<span class="hljs-property">left</span> - canvasRect.<span class="hljs-property">left</span>);
    <span class="hljs-keyword">const</span> bottom = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(elemRect.<span class="hljs-property">bottom</span>, canvasRect.<span class="hljs-property">bottom</span>) - canvasRect.<span class="hljs-property">top</span>;
    <span class="hljs-keyword">const</span> top = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, elemRect.<span class="hljs-property">top</span> - canvasRect.<span class="hljs-property">top</span>);

    <span class="hljs-keyword">const</span> width = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(canvasRect.<span class="hljs-property">width</span>, right - left);
    <span class="hljs-keyword">const</span> height = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(canvasRect.<span class="hljs-property">height</span>, bottom - top);

    <span class="hljs-comment">// è®¾ç½®è£å‰ª</span>
    <span class="hljs-keyword">const</span> positiveYUpBottom = canvasRect.<span class="hljs-property">height</span> - bottom;

    <span class="hljs-comment">// å¯¹ renderer è®¾ç½®è£å‰ªåŒºåŸŸå’Œè§†å£</span>
    renderer.<span class="hljs-title function_">setScissor</span>(left, positiveYUpBottom, width, height);
    renderer.<span class="hljs-title function_">setViewport</span>(left, positiveYUpBottom, width, height);

    <span class="hljs-keyword">return</span> width / height;
  }

  <span class="hljs-comment">// gui ä½¿ç”¨,é™åˆ¶å¯¹è±¡ä¸­å±æ€§çš„æœ€å¤§å€¼æœ€å°å€¼</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">MinMaxGUIHelper</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">obj, minProp, maxProp, minDif</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span> = obj;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">minProp</span> = minProp;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxProp</span> = maxProp;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">minDif</span> = minDif;
    }
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">min</span>() {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">minProp</span>];
    }
    <span class="hljs-keyword">set</span> <span class="hljs-title function_">min</span>(<span class="hljs-params">v</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">minProp</span>] = v;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxProp</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxProp</span>], v + <span class="hljs-variable language_">this</span>.<span class="hljs-property">minDif</span>);
    }
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">max</span>() {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxProp</span>];
    }
    <span class="hljs-keyword">set</span> <span class="hljs-title function_">max</span>(<span class="hljs-params">v</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxProp</span>] = v;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">min</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">min</span>; <span class="hljs-comment">// this will call the min setter</span>
    }
  }

  <span class="hljs-comment">// #region æ·»åŠ ç›¸æœºå±æ€§çš„guiç•Œé¢</span>
  <span class="hljs-keyword">const</span> gui = <span class="hljs-keyword">new</span> <span class="hljs-title function_">GUI</span>();
  gui.<span class="hljs-title function_">add</span>(camera, <span class="hljs-string">"fov"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">180</span>);
  <span class="hljs-keyword">const</span> minMaxGUIHelper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MinMaxGUIHelper</span>(camera, <span class="hljs-string">"near"</span>, <span class="hljs-string">"far"</span>, <span class="hljs-number">0.1</span>);
  gui.<span class="hljs-title function_">add</span>(minMaxGUIHelper, <span class="hljs-string">"min"</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">50</span>, <span class="hljs-number">0.1</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">"near"</span>);
  gui.<span class="hljs-title function_">add</span>(minMaxGUIHelper, <span class="hljs-string">"max"</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">50</span>, <span class="hljs-number">0.1</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">"far"</span>);

  <span class="hljs-comment">// #endregion</span>

  <span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();
  scene.<span class="hljs-property">background</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-string">"black"</span>);
  scene.<span class="hljs-title function_">add</span>(cameraHelper);

  {
    <span class="hljs-keyword">const</span> planeSize = <span class="hljs-number">40</span>;

    <span class="hljs-keyword">const</span> loader = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">TextureLoader</span>();
    <span class="hljs-keyword">const</span> texture = loader.<span class="hljs-title function_">load</span>(<span class="hljs-string">"https://threejs.org/manual/examples/resources/images/checker.png"</span>);
    texture.<span class="hljs-property">wrapS</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">RepeatWrapping</span>;
    texture.<span class="hljs-property">wrapT</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">RepeatWrapping</span>;
    texture.<span class="hljs-property">magFilter</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">NearestFilter</span>;
    <span class="hljs-comment">//texture.colorSpace = THREE.SRGBColorSpace;</span>
    <span class="hljs-keyword">const</span> repeats = planeSize / <span class="hljs-number">2</span>;
    texture.<span class="hljs-property">repeat</span>.<span class="hljs-title function_">set</span>(repeats, repeats);

    <span class="hljs-keyword">const</span> planeGeo = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PlaneGeometry</span>(planeSize, planeSize);
    <span class="hljs-keyword">const</span> planeMat = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshPhongMaterial</span>({
      <span class="hljs-attr">map</span>: texture,
      <span class="hljs-attr">side</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">DoubleSide</span>,
    });
    <span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(planeGeo, planeMat);
    mesh.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * -<span class="hljs-number">0.5</span>;
    scene.<span class="hljs-title function_">add</span>(mesh);
  }

  {
    <span class="hljs-keyword">const</span> cubeSize = <span class="hljs-number">4</span>;
    <span class="hljs-keyword">const</span> cubeGeo = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(cubeSize, cubeSize, cubeSize);
    <span class="hljs-keyword">const</span> cubeMat = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshPhongMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-string">"#8AC"</span> });
    <span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(cubeGeo, cubeMat);
    mesh.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(cubeSize + <span class="hljs-number">1</span>, cubeSize / <span class="hljs-number">2</span>, <span class="hljs-number">0</span>);
    scene.<span class="hljs-title function_">add</span>(mesh);
  }

  {
    <span class="hljs-keyword">const</span> sphereRadius = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">const</span> sphereWidthDivisions = <span class="hljs-number">32</span>;
    <span class="hljs-keyword">const</span> sphereHeightDivisions = <span class="hljs-number">16</span>;
    <span class="hljs-keyword">const</span> sphereGeo = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SphereGeometry</span>(
      sphereRadius,
      sphereWidthDivisions,
      sphereHeightDivisions,
    );
    <span class="hljs-keyword">const</span> sphereMat = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshPhongMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-string">"#CA8"</span> });
    <span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(sphereGeo, sphereMat);
    mesh.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(-sphereRadius - <span class="hljs-number">1</span>, sphereRadius + <span class="hljs-number">2</span>, <span class="hljs-number">0</span>);
    scene.<span class="hljs-title function_">add</span>(mesh);
  }

  {
    <span class="hljs-keyword">const</span> color = <span class="hljs-number">0xffffff</span>;
    <span class="hljs-keyword">const</span> intensity = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">const</span> light = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">DirectionalLight</span>(color, intensity);
    light.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);
    light.<span class="hljs-property">target</span>.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(-<span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
    scene.<span class="hljs-title function_">add</span>(light);
    scene.<span class="hljs-title function_">add</span>(light.<span class="hljs-property">target</span>);
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">resizeRendererToDisplaySize</span>(<span class="hljs-params">renderer</span>) {
    <span class="hljs-keyword">const</span> canvas = renderer.<span class="hljs-property">domElement</span>;
    <span class="hljs-keyword">const</span> width = canvas.<span class="hljs-property">clientWidth</span>;
    <span class="hljs-keyword">const</span> height = canvas.<span class="hljs-property">clientHeight</span>;
    <span class="hljs-keyword">const</span> needResize = canvas.<span class="hljs-property">width</span> !== width || canvas.<span class="hljs-property">height</span> !== height;
    <span class="hljs-keyword">if</span> (needResize) {
      renderer.<span class="hljs-title function_">setSize</span>(width, height, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-keyword">return</span> needResize;
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">resizeRendererToDisplaySize</span>(renderer);

    <span class="hljs-comment">// å¯ç”¨å‰ªåˆ€å‡½æ•°</span>
    renderer.<span class="hljs-title function_">setScissorTest</span>(<span class="hljs-literal">true</span>);

    <span class="hljs-comment">// #region è§†å›¾1 æ¸²æŸ“</span>
    <span class="hljs-keyword">const</span> aspect1 = <span class="hljs-title function_">setScissorForElement</span>(view1Elem);
    camera.<span class="hljs-property">aspect</span> = aspect1;
    camera.<span class="hljs-title function_">updateProjectionMatrix</span>();
    <span class="hljs-comment">// ä¸åœ¨è§†å›¾ 1ä¸­æ¸²æŸ“ helper</span>
    cameraHelper.<span class="hljs-property">visible</span> = <span class="hljs-literal">false</span>;
    cameraHelper.<span class="hljs-title function_">update</span>();
    renderer.<span class="hljs-title function_">render</span>(scene, camera);
    <span class="hljs-comment">// #endregion</span>

    <span class="hljs-comment">// #region è§†å›¾2 æ¸²æŸ“</span>
    <span class="hljs-keyword">const</span> aspect2 = <span class="hljs-title function_">setScissorForElement</span>(view2Elem);
    camera2.<span class="hljs-property">aspect</span> = aspect2;
    camera2.<span class="hljs-title function_">updateProjectionMatrix</span>();
    <span class="hljs-comment">// åœ¨ç¬¬äºŒå°æ‘„åƒæœºä¸­ç»˜åˆ¶cameraHelper</span>
    cameraHelper.<span class="hljs-property">visible</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-comment">// å•ç‹¬ç»™è§†å›¾ 2 è®¾ç½®ä¸ªèƒŒæ™¯è‰²</span>
    scene.<span class="hljs-property">background</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0x000040</span>);
    renderer.<span class="hljs-title function_">render</span>(scene, camera2);

    <span class="hljs-comment">// #endregion</span>

    <span class="hljs-title function_">requestAnimationFrame</span>(render);
  }

  <span class="hljs-title function_">requestAnimationFrame</span>(render);
}

<span class="hljs-title function_">main</span>();

</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b62f61666694aaeb584fe439b0173ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z54yr5LiN54Ot:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966269&amp;x-signature=EaB0ieVWLNQ7Ajz6Zkt0DF5irXo%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2">æ­£äº¤æ‘„åƒæœº<a href="https://link.juejin.cn?target=https%3A%2F%2Fthreejs.org%2Fdocs%2F%23api%2Fzh%2Fcameras%2FOrthographicCamera" target="_blank" title="https://threejs.org/docs/#api/zh/cameras/OrthographicCamera" ref="nofollow noopener noreferrer"><code>OrthographicCamera</code></a></h2>
<p>ä¸é€è§†æ‘„åƒæœºä¸åŒçš„æ˜¯, å®ƒéœ€è¦è®¾ç½®<code>left</code> <code>right</code> <code>top</code> <code>bottom</code> <code>near</code> å’Œ <code>far</code> æŒ‡å®šä¸€ä¸ªé•¿æ–¹å½¢, ä½¿å¾—è§†é‡æ˜¯å¹³è¡Œçš„è€Œä¸æ˜¯é€è§†çš„</p>
<p>ä½¿ç”¨ <code>zoom</code> å±æ€§å¯ä»¥ç¼©æ”¾<code>ä¸–ç•Œ -&gt; å±å¹•</code>çš„æ˜ å°„æ¯”ä¾‹, ä¸æ”¹å˜å®é™…å°ºå¯¸</p>
<p><code>&lt; 1</code> çœ‹åˆ°æ›´å¤š
<code>&gt; 1</code> çœ‹åˆ°æ›´å°‘</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"three"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">OrbitControls</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"three/addons/controls/OrbitControls.js"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">GUI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"three/addons/libs/lil-gui.module.min.js"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#c"</span>);
  <span class="hljs-keyword">const</span> view1Elem = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#view1"</span>);
  <span class="hljs-keyword">const</span> view2Elem = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#view2"</span>);

  <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({
    <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span>,
    canvas,
    <span class="hljs-attr">logarithmicDepthBuffer</span>: <span class="hljs-literal">true</span>,
  });

  <span class="hljs-comment">// #region å·¦è§†å›¾çš„ç›¸æœº</span>
  <span class="hljs-keyword">const</span> size = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">const</span> near = <span class="hljs-number">5</span>;
  <span class="hljs-keyword">const</span> far = <span class="hljs-number">50</span>;
  <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">OrthographicCamera</span>(-size, size, size, -size, near, far);
  camera.<span class="hljs-property">zoom</span> = <span class="hljs-number">0.2</span>;
  camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">0</span>);
  <span class="hljs-comment">// camera.lookAt(0, 0, 0);</span>
  <span class="hljs-keyword">const</span> cameraHelper = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">CameraHelper</span>(camera);

  <span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, view1Elem);
  controls.<span class="hljs-property">target</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  controls.<span class="hljs-title function_">update</span>();

  <span class="hljs-comment">// #endregion</span>

  <span class="hljs-comment">// #region å³è§†å›¾çš„ç›¸æœº</span>
  <span class="hljs-keyword">const</span> camera2 = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(
    <span class="hljs-number">60</span>, <span class="hljs-comment">// fov</span>
    <span class="hljs-number">2</span>, <span class="hljs-comment">// aspect</span>
    <span class="hljs-number">0.1</span>, <span class="hljs-comment">// near</span>
    <span class="hljs-number">500</span>, <span class="hljs-comment">// far</span>
  );
  camera2.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">40</span>, <span class="hljs-number">10</span>, <span class="hljs-number">30</span>);
  camera2.<span class="hljs-title function_">lookAt</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> controls2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera2, view2Elem);
  controls2.<span class="hljs-property">target</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>);
  controls2.<span class="hljs-title function_">update</span>();

  <span class="hljs-comment">// #endregion</span>

  <span class="hljs-comment">/**
   * è®¾ç½®è£å‰ªåŒºåŸŸå’Œè§†å£, è¿”å›å®½é«˜æ¯”
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">elem</span>
   * <span class="hljs-doctag">@returns</span>
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">setScissorForElement</span>(<span class="hljs-params">elem</span>) {
    <span class="hljs-comment">// è·å– canvas ä¸å…ƒç´ çš„è¾¹ç•ŒçŸ©å½¢</span>
    <span class="hljs-keyword">const</span> canvasRect = canvas.<span class="hljs-title function_">getBoundingClientRect</span>();
    <span class="hljs-keyword">const</span> elemRect = elem.<span class="hljs-title function_">getBoundingClientRect</span>();

    <span class="hljs-comment">// ç›¸å¯¹ä½ç½®è®¡ç®—å…ƒç´ åœ¨ canvas å†…çš„å·¦å³ä¸Šä¸‹è¾¹ç•Œ</span>
    <span class="hljs-keyword">const</span> right = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(elemRect.<span class="hljs-property">right</span>, canvasRect.<span class="hljs-property">right</span>) - canvasRect.<span class="hljs-property">left</span>;
    <span class="hljs-keyword">const</span> left = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, elemRect.<span class="hljs-property">left</span> - canvasRect.<span class="hljs-property">left</span>);
    <span class="hljs-keyword">const</span> bottom = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(elemRect.<span class="hljs-property">bottom</span>, canvasRect.<span class="hljs-property">bottom</span>) - canvasRect.<span class="hljs-property">top</span>;
    <span class="hljs-keyword">const</span> top = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, elemRect.<span class="hljs-property">top</span> - canvasRect.<span class="hljs-property">top</span>);

    <span class="hljs-keyword">const</span> width = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(canvasRect.<span class="hljs-property">width</span>, right - left);
    <span class="hljs-keyword">const</span> height = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(canvasRect.<span class="hljs-property">height</span>, bottom - top);

    <span class="hljs-comment">// è®¾ç½®è£å‰ª</span>
    <span class="hljs-keyword">const</span> positiveYUpBottom = canvasRect.<span class="hljs-property">height</span> - bottom;

    <span class="hljs-comment">// å¯¹ renderer è®¾ç½®è£å‰ªåŒºåŸŸå’Œè§†å£</span>
    renderer.<span class="hljs-title function_">setScissor</span>(left, positiveYUpBottom, width, height);
    renderer.<span class="hljs-title function_">setViewport</span>(left, positiveYUpBottom, width, height);

    <span class="hljs-keyword">return</span> width / height;
  }

  <span class="hljs-comment">// gui ä½¿ç”¨,é™åˆ¶å¯¹è±¡ä¸­å±æ€§çš„æœ€å¤§å€¼æœ€å°å€¼</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">MinMaxGUIHelper</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">obj, minProp, maxProp, minDif</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span> = obj;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">minProp</span> = minProp;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxProp</span> = maxProp;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">minDif</span> = minDif;
    }
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">min</span>() {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">minProp</span>];
    }
    <span class="hljs-keyword">set</span> <span class="hljs-title function_">min</span>(<span class="hljs-params">v</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">minProp</span>] = v;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxProp</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxProp</span>], v + <span class="hljs-variable language_">this</span>.<span class="hljs-property">minDif</span>);
    }
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">max</span>() {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxProp</span>];
    }
    <span class="hljs-keyword">set</span> <span class="hljs-title function_">max</span>(<span class="hljs-params">v</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxProp</span>] = v;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">min</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">min</span>; <span class="hljs-comment">// this will call the min setter</span>
    }
  }

  <span class="hljs-comment">// #region æ·»åŠ ç›¸æœºå±æ€§çš„guiç•Œé¢</span>
  <span class="hljs-keyword">const</span> gui = <span class="hljs-keyword">new</span> <span class="hljs-title function_">GUI</span>();
  <span class="hljs-comment">// gui.add(camera, "fov", 1, 180);</span>
  <span class="hljs-keyword">const</span> minMaxGUIHelper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MinMaxGUIHelper</span>(camera, <span class="hljs-string">"near"</span>, <span class="hljs-string">"far"</span>, <span class="hljs-number">0.1</span>);
  gui.<span class="hljs-title function_">add</span>(minMaxGUIHelper, <span class="hljs-string">"min"</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">50</span>, <span class="hljs-number">0.1</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">"near"</span>);
  gui.<span class="hljs-title function_">add</span>(minMaxGUIHelper, <span class="hljs-string">"max"</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">50</span>, <span class="hljs-number">0.1</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">"far"</span>);
  gui.<span class="hljs-title function_">add</span>(camera, <span class="hljs-string">"zoom"</span>, <span class="hljs-number">0.01</span>, <span class="hljs-number">1</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">"zoom"</span>).<span class="hljs-title function_">listen</span>(); <span class="hljs-comment">// è°ƒæ•´ç›¸æœºå±•ç°å¤šå°‘å•ä½å¤§å°</span>

  <span class="hljs-comment">// #endregion</span>

  <span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();
  scene.<span class="hljs-property">background</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-string">"black"</span>);
  scene.<span class="hljs-title function_">add</span>(cameraHelper);

  {
    <span class="hljs-keyword">const</span> planeSize = <span class="hljs-number">40</span>;

    <span class="hljs-keyword">const</span> loader = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">TextureLoader</span>();
    <span class="hljs-keyword">const</span> texture = loader.<span class="hljs-title function_">load</span>(<span class="hljs-string">"https://threejs.org/manual/examples/resources/images/checker.png"</span>);
    texture.<span class="hljs-property">wrapS</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">RepeatWrapping</span>;
    texture.<span class="hljs-property">wrapT</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">RepeatWrapping</span>;
    texture.<span class="hljs-property">magFilter</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">NearestFilter</span>;
    <span class="hljs-comment">//texture.colorSpace = THREE.SRGBColorSpace;</span>
    <span class="hljs-keyword">const</span> repeats = planeSize / <span class="hljs-number">2</span>;
    texture.<span class="hljs-property">repeat</span>.<span class="hljs-title function_">set</span>(repeats, repeats);

    <span class="hljs-keyword">const</span> planeGeo = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PlaneGeometry</span>(planeSize, planeSize);
    <span class="hljs-keyword">const</span> planeMat = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshPhongMaterial</span>({
      <span class="hljs-attr">map</span>: texture,
      <span class="hljs-attr">side</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">DoubleSide</span>,
    });
    <span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(planeGeo, planeMat);
    mesh.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * -<span class="hljs-number">0.5</span>;
    scene.<span class="hljs-title function_">add</span>(mesh);
  }

  {
    <span class="hljs-keyword">const</span> cubeSize = <span class="hljs-number">4</span>;
    <span class="hljs-keyword">const</span> cubeGeo = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(cubeSize, cubeSize, cubeSize);
    <span class="hljs-keyword">const</span> cubeMat = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshPhongMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-string">"#8AC"</span> });
    <span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(cubeGeo, cubeMat);
    mesh.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(cubeSize + <span class="hljs-number">1</span>, cubeSize / <span class="hljs-number">2</span>, <span class="hljs-number">0</span>);
    scene.<span class="hljs-title function_">add</span>(mesh);
  }

  {
    <span class="hljs-keyword">const</span> sphereRadius = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">const</span> sphereWidthDivisions = <span class="hljs-number">32</span>;
    <span class="hljs-keyword">const</span> sphereHeightDivisions = <span class="hljs-number">16</span>;
    <span class="hljs-keyword">const</span> sphereGeo = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SphereGeometry</span>(
      sphereRadius,
      sphereWidthDivisions,
      sphereHeightDivisions,
    );
    <span class="hljs-keyword">const</span> sphereMat = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshPhongMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-string">"#CA8"</span> });
    <span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(sphereGeo, sphereMat);
    mesh.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(-sphereRadius - <span class="hljs-number">1</span>, sphereRadius + <span class="hljs-number">2</span>, <span class="hljs-number">0</span>);
    scene.<span class="hljs-title function_">add</span>(mesh);
  }

  {
    <span class="hljs-keyword">const</span> color = <span class="hljs-number">0xffffff</span>;
    <span class="hljs-keyword">const</span> intensity = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">const</span> light = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">DirectionalLight</span>(color, intensity);
    light.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);
    light.<span class="hljs-property">target</span>.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(-<span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
    scene.<span class="hljs-title function_">add</span>(light);
    scene.<span class="hljs-title function_">add</span>(light.<span class="hljs-property">target</span>);
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">resizeRendererToDisplaySize</span>(<span class="hljs-params">renderer</span>) {
    <span class="hljs-keyword">const</span> canvas = renderer.<span class="hljs-property">domElement</span>;
    <span class="hljs-keyword">const</span> width = canvas.<span class="hljs-property">clientWidth</span>;
    <span class="hljs-keyword">const</span> height = canvas.<span class="hljs-property">clientHeight</span>;
    <span class="hljs-keyword">const</span> needResize = canvas.<span class="hljs-property">width</span> !== width || canvas.<span class="hljs-property">height</span> !== height;
    <span class="hljs-keyword">if</span> (needResize) {
      renderer.<span class="hljs-title function_">setSize</span>(width, height, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-keyword">return</span> needResize;
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">resizeRendererToDisplaySize</span>(renderer);

    <span class="hljs-comment">// å¯ç”¨å‰ªåˆ€å‡½æ•°</span>
    renderer.<span class="hljs-title function_">setScissorTest</span>(<span class="hljs-literal">true</span>);

    <span class="hljs-comment">// #region è§†å›¾1 æ¸²æŸ“</span>
    <span class="hljs-keyword">const</span> aspect1 = <span class="hljs-title function_">setScissorForElement</span>(view1Elem);
    camera.<span class="hljs-property">left</span> = -aspect1;
    camera.<span class="hljs-property">right</span> = aspect1;
    camera.<span class="hljs-title function_">updateProjectionMatrix</span>();
    <span class="hljs-comment">// ä¸åœ¨è§†å›¾ 1ä¸­æ¸²æŸ“ helper</span>
    cameraHelper.<span class="hljs-property">visible</span> = <span class="hljs-literal">false</span>;
    cameraHelper.<span class="hljs-title function_">update</span>();
    renderer.<span class="hljs-title function_">render</span>(scene, camera);
    <span class="hljs-comment">// #endregion</span>

    <span class="hljs-comment">// #region è§†å›¾2 æ¸²æŸ“</span>
    <span class="hljs-keyword">const</span> aspect2 = <span class="hljs-title function_">setScissorForElement</span>(view2Elem);
    camera2.<span class="hljs-property">aspect</span> = aspect2;
    camera2.<span class="hljs-title function_">updateProjectionMatrix</span>();
    <span class="hljs-comment">// åœ¨ç¬¬äºŒå°æ‘„åƒæœºä¸­ç»˜åˆ¶cameraHelper</span>
    cameraHelper.<span class="hljs-property">visible</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-comment">// å•ç‹¬ç»™è§†å›¾ 2 è®¾ç½®ä¸ªèƒŒæ™¯è‰²</span>
    scene.<span class="hljs-property">background</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0x000040</span>);
    renderer.<span class="hljs-title function_">render</span>(scene, camera2);

    <span class="hljs-comment">// #endregion</span>

    <span class="hljs-title function_">requestAnimationFrame</span>(render);
  }

  <span class="hljs-title function_">requestAnimationFrame</span>(render);
}

<span class="hljs-title function_">main</span>();


</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74942e32e8464a54b040c8668eb1f636~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z54yr5LiN54Ot:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966269&amp;x-signature=%2Bph78ht6RnByyveYBi%2Bpc8PJ1ZA%3D" alt="image.png" loading="lazy"/></p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[DOM æ“ä½œå®æˆ˜ï½œåŸç”Ÿ JS å®ç° 6 ä¸ªé«˜é¢‘äº¤äº’æ•ˆæœï¼ˆé€‰é¡¹å¡ / è½®æ’­å›¾ç­‰ï¼Œé™„æºç  + æ³¨é‡Šï¼‰]]></title>    <link>https://juejin.cn/post/7603383059150897194</link>    <guid>https://juejin.cn/post/7603383059150897194</guid>    <pubDate>2026-02-06T07:06:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603383059150897194" data-draft-id="7603389033041330230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="DOM æ“ä½œå®æˆ˜ï½œåŸç”Ÿ JS å®ç° 6 ä¸ªé«˜é¢‘äº¤äº’æ•ˆæœï¼ˆé€‰é¡¹å¡ / è½®æ’­å›¾ç­‰ï¼Œé™„æºç  + æ³¨é‡Šï¼‰"/> <meta itemprop="keywords" content="HTML,JavaScript"/> <meta itemprop="datePublished" content="2026-02-06T07:06:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç ç…®èŒ¶"/> <meta itemprop="url" content="https://juejin.cn/user/4197279069639178"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            DOM æ“ä½œå®æˆ˜ï½œåŸç”Ÿ JS å®ç° 6 ä¸ªé«˜é¢‘äº¤äº’æ•ˆæœï¼ˆé€‰é¡¹å¡ / è½®æ’­å›¾ç­‰ï¼Œé™„æºç  + æ³¨é‡Šï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4197279069639178/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç ç…®èŒ¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:06:04.000Z" title="Fri Feb 06 2026 07:06:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€å®æˆ˜å‰è¨€</h3>
<p>DOM æ“ä½œæ˜¯å‰ç«¯å¼€å‘çš„æ ¸å¿ƒåŸºç¡€ï¼Œæ— è®ºæ˜¯ä¸šåŠ¡å¼€å‘è¿˜æ˜¯æ¡†æ¶åº•å±‚ï¼Œéƒ½ç¦»ä¸å¼€å¯¹é¡µé¢å…ƒç´ çš„å¢åˆ æ”¹æŸ¥ã€äº‹ä»¶ç»‘å®šã€æ ·å¼ä¿®æ”¹ã€‚å¾ˆå¤šæ–°æ‰‹å…¥é—¨åç›´æ¥å­¦ä¹  Vue/React ç­‰æ¡†æ¶ï¼Œå¿½ç•¥äº†åŸç”Ÿ DOM æ“ä½œï¼Œå¯¼è‡´é‡åˆ°æ¡†æ¶åº•å±‚é—®é¢˜ã€åŸç”Ÿå¼€å‘éœ€æ±‚æ—¶æ— ä»ä¸‹æ‰‹ã€‚</p>
<p>æœ¬æ¬¡å®æˆ˜å°†ç”¨çº¯åŸç”Ÿ HTML+CSS+JSå®ç°å‰ç«¯å¼€å‘ä¸­6 ä¸ªé«˜é¢‘ DOM äº¤äº’æ•ˆæœï¼Œè¦†ç›–ç‚¹å‡»ã€é¼ æ ‡æ‚¬æµ®ã€è½®æ’­ã€è¡¨å•äº¤äº’ç­‰æ ¸å¿ƒåœºæ™¯ï¼Œæ‰€æœ‰æ¡ˆä¾‹å‡éµå¾ª <strong>ã€Œç»“æ„æ­å»ºâ†’æ ·å¼ç¾åŒ–â†’JS äº¤äº’ã€ä¸‰æ­¥æ³•ï¼Œä»£ç é™„å¸¦è¯¦ç»†æ³¨é‡Šï¼ŒåŒæ—¶è®²è§£DOM æ ¸å¿ƒ API</strong>ã€äº‹ä»¶å¤„ç†æŠ€å·§å’Œæ–°æ‰‹é¿å‘ç‚¹ï¼Œå®ç°åçš„ä»£ç å¯ç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œæ— éœ€ä¾èµ–ä»»ä½•æ¡†æ¶ã€‚</p>
<h3 data-id="heading-1">äºŒã€å‰ç½®å‡†å¤‡</h3>
<ol>
<li>å·¥å…·è¦æ±‚ï¼šä»…éœ€ VS Codeï¼ˆæ­é… HTML/CSS/JS é«˜äº®æ’ä»¶ï¼‰+ æµè§ˆå™¨ï¼ˆChrome/Firefoxï¼‰ï¼Œæ— éœ€é¢å¤–ç¯å¢ƒå’Œä¾èµ–</li>
<li>åŸºç¡€å‚¨å¤‡ï¼šäº†è§£ HTML åŸºæœ¬æ ‡ç­¾ã€CSS åŸºç¡€æ ·å¼ï¼ˆæµ®åŠ¨ / å¼¹æ€§å¸ƒå±€ï¼‰ã€JS åŸºç¡€è¯­æ³•ï¼ˆå˜é‡ / å‡½æ•° / æ¡ä»¶åˆ¤æ–­ï¼‰ï¼Œé›¶åŸºç¡€å¯è·Ÿéšæ­¥éª¤ï¼Œæ ¸å¿ƒ API ä¼šé€è¡Œè®²è§£</li>
<li>å®ç°åŸåˆ™ï¼šç»“æ„ä¸æ ·å¼ä¸è¡Œä¸ºåˆ†ç¦»ï¼ˆHTML å†™ç»“æ„ã€CSS å†™æ ·å¼ã€JS å†™äº¤äº’ï¼‰ï¼Œä»£ç è§£è€¦æ˜“ç»´æŠ¤ï¼›å…¼å®¹ä¸»æµæµè§ˆå™¨ï¼Œè€ƒè™‘è¾¹ç•Œåœºæ™¯ï¼ˆå¦‚æ— æ•°æ®ã€é«˜é¢‘ç‚¹å‡»ï¼‰</li>
<li>æ ¸å¿ƒ DOM APIï¼šæœ¬æ¬¡å®æˆ˜ä¼šç”¨åˆ°çš„é«˜é¢‘ APIï¼Œæå‰æ¢³ç†æ–¹ä¾¿ç†è§£</li>
</ol>
<ul>
<li>å…ƒç´ è·å–ï¼šquerySelector/querySelectorAllï¼ˆç²¾å‡†è·å–å•ä¸ª / å¤šä¸ªå…ƒç´ ï¼‰</li>
<li>äº‹ä»¶ç»‘å®šï¼šaddEventListenerï¼ˆæ¨èï¼Œå¯ç»‘å®šå¤šä¸ªäº‹ä»¶ï¼Œæ”¯æŒäº‹ä»¶ç§»é™¤ï¼‰</li>
<li>æ ·å¼ä¿®æ”¹ï¼šstyleï¼ˆè¡Œå†…æ ·å¼ï¼‰/classListï¼ˆç±»åæ“ä½œï¼Œæ¨èï¼‰</li>
<li>èŠ‚ç‚¹æ“ä½œï¼šcreateElement/appendChildï¼ˆåˆ›å»º / æ·»åŠ èŠ‚ç‚¹ï¼‰</li>
<li>äº‹ä»¶å¯¹è±¡ï¼še.targetï¼ˆäº‹ä»¶æºï¼‰/e.preventDefaultï¼ˆé˜»æ­¢é»˜è®¤è¡Œä¸ºï¼‰</li>
</ul>
<h3 data-id="heading-2">ä¸‰ã€å®æˆ˜è¯´æ˜</h3>
<p>æœ¬æ¬¡å®ç°çš„ 6 ä¸ª DOM äº¤äº’æ•ˆæœè¦†ç›– 80% çš„å‰ç«¯åŸºç¡€äº¤äº’åœºæ™¯ï¼Œéš¾åº¦ç”±æµ…å…¥æ·±ï¼Œä»ç®€å•çš„ç‚¹å‡»åˆ‡æ¢åˆ°å¤æ‚çš„è‡ªåŠ¨è½®æ’­ï¼Œé€æ­¥æå‡ DOM æ“ä½œèƒ½åŠ›ï¼š</p>
<ol>
<li>åŸºç¡€ç‚¹å‡»ç±»ï¼šé€‰é¡¹å¡åˆ‡æ¢ï¼ˆç‚¹å‡»åˆ‡æ¢å†…å®¹ï¼‰ã€æ‰‹é£ç´æŠ˜å ï¼ˆç‚¹å‡»å±•å¼€ / æŠ˜å ï¼‰</li>
<li>é¼ æ ‡æ‚¬æµ®ç±»ï¼šå¯¼èˆªæ æ‚¬æµ®é«˜äº®ã€å•†å“å¡ç‰‡æ‚¬æµ®æ•ˆæœï¼ˆå«åŠ¨ç”»ï¼‰</li>
<li>è‡ªåŠ¨è½®æ’­ç±»ï¼šç®€æ˜“è½®æ’­å›¾ï¼ˆè‡ªåŠ¨æ’­æ”¾ + ç‚¹å‡»åˆ‡æ¢ + é¼ æ ‡æš‚åœï¼‰</li>
<li>è¡¨å•äº¤äº’ç±»ï¼šè¡¨å•éç©ºéªŒè¯ï¼ˆæäº¤å‰æ ¡éªŒ + å®æ—¶æç¤ºï¼‰</li>
</ol>
<h3 data-id="heading-3">å››ã€åˆ†æ­¥å®ç°ï¼ˆç»“æ„ + æ ·å¼ + JSï¼Œé€ä¸€æ‹†è§£ï¼‰</h3>
<p>æ‰€æœ‰æ¡ˆä¾‹å‡æä¾›å®Œæ•´å¯è¿è¡Œä»£ç ï¼Œå¤åˆ¶åˆ° VS Code ä¸­ä¿å­˜ä¸º.htmlæ–‡ä»¶ï¼Œç›´æ¥ç”¨æµè§ˆå™¨æ‰“å¼€å³å¯çœ‹åˆ°æ•ˆæœã€‚</p>
<h3 data-id="heading-4">æ¡ˆä¾‹ 1ï¼šé€‰é¡¹å¡åˆ‡æ¢ï¼ˆç‚¹å‡»åˆ‡æ¢å†…å®¹ï¼Œé«˜é¢‘åŸºç¡€äº¤äº’ï¼‰</h3>
<p>é€‚ç”¨åœºæ™¯ï¼šåå°ç®¡ç†ç³»ç»Ÿã€å•†å“è¯¦æƒ…é¡µã€èµ„è®¯é¡µé¢çš„å†…å®¹åˆ‡æ¢ï¼Œå‰ç«¯åŸºç¡€é¢è¯•é«˜é¢‘è€ƒç‚¹æ ¸å¿ƒé€»è¾‘ï¼šç»™æ‰€æœ‰é€‰é¡¹ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»æ—¶ç»™å½“å‰é€‰é¡¹æ·»åŠ é«˜äº®ç±»ï¼Œç§»é™¤å…¶ä»–é€‰é¡¹çš„é«˜äº®ç±»ï¼›åŒæ—¶æ ¹æ®é€‰é¡¹ç´¢å¼•ï¼Œæ˜¾ç¤ºå¯¹åº”å†…å®¹ï¼Œéšè—å…¶ä»–å†…å®¹ã€‚</p>
<h3 data-id="heading-5">å®Œæ•´ä»£ç </h3>
<p><span href="https://code.juejin.cn/pen/7603641533250142258" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7603641533250142258" data-src="https://code.juejin.cn/pen/7603641533250142258" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h5 data-id="heading-6">æ ¸å¿ƒçŸ¥è¯†ç‚¹ &amp; é¿å‘ç‚¹</h5>
<ol>
<li><strong>ç±»åæ“ä½œæ¨è<code>classList</code></strong>ï¼šæ›¿ä»£ç›´æ¥ä¿®æ”¹<code>className</code>ï¼Œé¿å…è¦†ç›–åŸæœ‰ç±»åï¼Œæ”¯æŒ<code>add/remove/toggle/contains</code>æ–¹æ³•</li>
<li><strong><code>querySelectorAll</code>è¿”å›ä¼ªæ•°ç»„</strong>ï¼šå¯ç›´æ¥ç”¨<code>forEach</code>éå†ï¼Œæ¯”<code>getElementsByTagName</code>æ›´çµæ´»ï¼ˆæ”¯æŒ CSS é€‰æ‹©å™¨ï¼‰</li>
<li><strong>ç´¢å¼•åŒ¹é…</strong>ï¼šåˆ©ç”¨<code>forEach</code>çš„ç¬¬äºŒä¸ªå‚æ•°<code>index</code>ï¼Œå®ç°é€‰é¡¹å’Œå†…å®¹çš„ä¸€ä¸€å¯¹åº”ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®è‡ªå®šä¹‰å±æ€§</li>
<li><strong>é¿å‘</strong>ï¼šä¸è¦ç”¨<code>onclick</code>ç»‘å®šäº‹ä»¶ï¼ˆä¸€æ¬¡åªèƒ½ç»‘å®šä¸€ä¸ªï¼Œä¼šè¢«è¦†ç›–ï¼‰ï¼Œä¼˜å…ˆä½¿ç”¨<code>addEventListener</code></li>
</ol>
<h4 data-id="heading-7">æ¡ˆä¾‹ 2ï¼šæ‰‹é£ç´æŠ˜å ï¼ˆç‚¹å‡»å±•å¼€ / æŠ˜å ï¼Œç§»åŠ¨ç«¯é«˜é¢‘ï¼‰</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç§»åŠ¨ç«¯å¯¼èˆªã€FAQ å¸¸è§é—®é¢˜ã€ä¾§è¾¹æ åˆ†ç±»ï¼Œæ ¸å¿ƒæ˜¯<strong>å•å¼€ / å¤šå¼€</strong>æŠ˜å æ§åˆ¶<strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šç»™æ‰€æœ‰æŠ˜å é¡¹ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»æ—¶åˆ‡æ¢å½“å‰é¡¹å†…å®¹çš„æ˜¾ç¤º / éšè—ï¼ˆé€šè¿‡ç±»åæ§åˆ¶é«˜åº¦ï¼‰ï¼›å•å¼€æ¨¡å¼ä¸‹ï¼Œå…ˆæŠ˜å æ‰€æœ‰å†…å®¹ï¼Œå†å±•å¼€å½“å‰å†…å®¹ã€‚</p>
<h5 data-id="heading-8">å®Œæ•´ä»£ç </h5>
<p><span href="https://code.juejin.cn/pen/7603642291110838282" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7603642291110838282" data-src="https://code.juejin.cn/pen/7603642291110838282" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h5 data-id="heading-9">æ ¸å¿ƒçŸ¥è¯†ç‚¹ &amp; é¿å‘ç‚¹</h5>
<ol>
<li><strong>è¿‡æ¸¡åŠ¨ç”»</strong>ï¼šé€šè¿‡<code>transition</code>ç»™<code>height</code>æ·»åŠ è¿‡æ¸¡ï¼Œå®ç°å¹³æ»‘çš„å±•å¼€ / æŠ˜å ï¼Œæ›¿ä»£<code>display: none/block</code>ï¼ˆæ— åŠ¨ç”»ï¼‰</li>
<li><strong>å•å¼€ / å¤šå¼€åˆ‡æ¢</strong>ï¼šå•å¼€å…ˆç§»é™¤æ‰€æœ‰é«˜äº®ç±»ï¼Œå†æ·»åŠ å½“å‰ï¼›å¤šå¼€ç›´æ¥ç”¨<code>toggle</code>åˆ‡æ¢å½“å‰é¡¹çš„ç±»åï¼Œä¸€è¡Œä»£ç å®ç°</li>
<li><strong>çˆ¶å…ƒç´ è·å–</strong>ï¼šé€šè¿‡<code>this.parentElement</code>è·å–å½“å‰æ ‡é¢˜çš„çˆ¶å…ƒç´ ï¼ˆæŠ˜å é¡¹ï¼‰ï¼Œæ— éœ€é¢å¤–è·å–ï¼Œç®€åŒ–ä»£ç </li>
<li><strong>é¿å‘</strong>ï¼šä¸è¦ç›´æ¥ä¿®æ”¹<code>style.height</code>ä¸º<code>auto</code>ï¼Œè¿‡æ¸¡åŠ¨ç”»ä¼šå¤±æ•ˆï¼Œéœ€è®¾ç½®å›ºå®šé«˜åº¦æˆ–é€šè¿‡<code>scrollHeight</code>è·å–çœŸå®é«˜åº¦ï¼ˆé€‚é…åŠ¨æ€å†…å®¹ï¼‰</li>
</ol>
<h4 data-id="heading-10">æ¡ˆä¾‹ 3ï¼šå¯¼èˆªæ æ‚¬æµ®é«˜äº®ï¼ˆé¼ æ ‡æ‚¬æµ® + ç‚¹å‡»é€‰ä¸­ï¼Œé€šç”¨å¯¼èˆªï¼‰</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç½‘ç«™é¡¶éƒ¨å¯¼èˆªã€ä¾§è¾¹æ å¯¼èˆªï¼Œç»“åˆ<strong>é¼ æ ‡æ‚¬æµ®</strong>å’Œ<strong>ç‚¹å‡»é€‰ä¸­</strong>åŒäº¤äº’ï¼Œæå‡ç”¨æˆ·ä½“éªŒ<strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šé¼ æ ‡æ‚¬æµ®æ—¶ï¼Œç»™å½“å‰å¯¼èˆªé¡¹æ·»åŠ æ‚¬æµ®é«˜äº®ç±»ï¼Œç¦»å¼€æ—¶ç§»é™¤ï¼›ç‚¹å‡»æ—¶ï¼Œç»™å½“å‰é¡¹æ·»åŠ é€‰ä¸­ç±»ï¼Œç§»é™¤å…¶ä»–é¡¹çš„é€‰ä¸­ç±»ï¼Œé€‰ä¸­çŠ¶æ€æŒä¹…åŒ–ã€‚</p>
<h5 data-id="heading-11">å®Œæ•´ä»£ç </h5>
<p><span href="https://code.juejin.cn/pen/7603642758038519846" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7603642758038519846" data-src="https://code.juejin.cn/pen/7603642758038519846" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h5 data-id="heading-12">æ ¸å¿ƒçŸ¥è¯†ç‚¹ &amp; é¿å‘ç‚¹</h5>
<ol>
<li><strong>é˜»æ­¢é»˜è®¤è¡Œä¸º</strong>ï¼šé€šè¿‡<code>e.preventDefault()</code>é˜»æ­¢ a æ ‡ç­¾çš„é»˜è®¤è·³è½¬ï¼Œé€‚é…çº¯å‰ç«¯å¯¼èˆªï¼ˆæ— å®é™…é“¾æ¥ï¼‰</li>
<li><strong>æ ·å¼ä¼˜å…ˆçº§</strong>ï¼šé€‰ä¸­ç±»æ ·å¼é«˜äºæ‚¬æµ®ç±»ï¼Œé€šè¿‡<code>contains</code>åˆ¤æ–­æ˜¯å¦ä¸ºé€‰ä¸­é¡¹ï¼Œé¿å…æ‚¬æµ®æ ·å¼è¦†ç›–é€‰ä¸­æ ·å¼</li>
<li><strong>é¼ æ ‡äº‹ä»¶</strong>ï¼š<code>mouseenter/mouseleave</code>ï¼ˆä¸å†’æ³¡ï¼‰ä¼˜äº<code>mouseover/mouseout</code>ï¼ˆå†’æ³¡ï¼‰ï¼Œé¿å…å­å…ƒç´ è§¦å‘çˆ¶å…ƒç´ äº‹ä»¶</li>
<li><strong>é¿å‘</strong>ï¼šä¸è¦ç»™ a æ ‡ç­¾è®¾ç½®<code>href="#"</code>ï¼Œç‚¹å‡»ä¼šå¯¼è‡´é¡µé¢è·³è½¬åˆ°é¡¶éƒ¨ï¼Œç”¨<code>href="javascript:;"</code>æ›´å‹å¥½</li>
</ol>
<h4 data-id="heading-13">æ¡ˆä¾‹ 4ï¼šå•†å“å¡ç‰‡æ‚¬æµ®æ•ˆæœï¼ˆå«åŠ¨ç”»ï¼Œç”µå•†é«˜é¢‘ï¼‰</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç”µå•†ç½‘ç«™å•†å“åˆ—è¡¨ã€èµ„è®¯å¡ç‰‡ã€äº§å“å±•ç¤ºï¼Œç»“åˆ<strong>æ ·å¼åŠ¨ç”»</strong>å’Œ<strong>DOM é¼ æ ‡äº‹ä»¶</strong>ï¼Œæå‡é¡µé¢è´¨æ„Ÿ<strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šé¼ æ ‡æ‚¬æµ®åœ¨å¡ç‰‡ä¸Šæ—¶ï¼Œé€šè¿‡<code>classList</code>æ·»åŠ æ‚¬æµ®ç±»ï¼Œå®ç°å¡ç‰‡ä¸Šç§»ã€é˜´å½±æ”¾å¤§ã€æ˜¾ç¤ºé®ç½©å±‚ï¼›é¼ æ ‡ç¦»å¼€æ—¶ç§»é™¤æ‚¬æµ®ç±»ï¼Œæ¢å¤åŸæ ·å¼ï¼Œæ‰€æœ‰æ•ˆæœé€šè¿‡ CSS è¿‡æ¸¡å®ç°ï¼ŒJS ä»…åšç±»ååˆ‡æ¢ã€‚</p>
<h5 data-id="heading-14">å®Œæ•´ä»£ç </h5>
<p><span href="https://code.juejin.cn/pen/7603643319142662153" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7603643319142662153" data-src="https://code.juejin.cn/pen/7603643319142662153" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h5 data-id="heading-15">æ ¸å¿ƒçŸ¥è¯†ç‚¹ &amp; é¿å‘ç‚¹</h5>
<ol>
<li><strong>æ ·å¼ä¸è¡Œä¸ºåˆ†ç¦»</strong>ï¼šJS ä»…è´Ÿè´£ç±»ååˆ‡æ¢ï¼Œæ‰€æœ‰åŠ¨ç”»å’Œæ ·å¼ç”± CSS å®ç°ï¼Œç¬¦åˆå‰ç«¯å¼€å‘è§„èŒƒï¼Œä¾¿äºç»´æŠ¤</li>
<li><strong>CSS è¿‡æ¸¡</strong>ï¼šç»™<code>card</code>æ·»åŠ <code>transition: all 0.3s ease</code>ï¼Œå®ç°æ‰€æœ‰æ ·å¼çš„å¹³æ»‘è¿‡æ¸¡ï¼ŒåŒ…æ‹¬<code>transform</code>ã€<code>box-shadow</code>ã€<code>opacity</code></li>
<li><strong>ç»å¯¹å®šä½</strong>ï¼šé®ç½©å±‚é€šè¿‡<code>position: absolute</code>è„±ç¦»æ–‡æ¡£æµï¼Œç›¸å¯¹äºå¡ç‰‡ï¼ˆ<code>relative</code>ï¼‰å®šä½ï¼Œå®ç°å…¨å±é®ç½©</li>
<li><strong>é¿å‘</strong>ï¼šç»™å¡ç‰‡æ·»åŠ <code>overflow: hidden</code>ï¼Œé¿å…å¡ç‰‡ä¸Šç§»æ—¶è¶…å‡ºå®¹å™¨ï¼ŒåŒæ—¶é˜²æ­¢å›¾ç‰‡åœ†è§’å¤±æ•ˆ</li>
</ol>
<h4 data-id="heading-16">æ¡ˆä¾‹ 5ï¼šç®€æ˜“è½®æ’­å›¾ï¼ˆè‡ªåŠ¨æ’­æ”¾ + ç‚¹å‡»åˆ‡æ¢ + é¼ æ ‡æš‚åœï¼Œé«˜é¢‘æ ¸å¿ƒï¼‰</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç½‘ç«™é¦–é¡µè½®æ’­ã€å¹¿å‘Šå±•ç¤ºã€å›¾ç‰‡é›†ï¼Œå‰ç«¯ DOM å®æˆ˜é«˜é¢‘è€ƒç‚¹ï¼Œèåˆ<strong>å®šæ—¶å™¨</strong>ã€<strong>äº‹ä»¶ç»‘å®š</strong>ã€<strong>æ ·å¼åˆ‡æ¢</strong>æ ¸å¿ƒçŸ¥è¯†ç‚¹<strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šé€šè¿‡å®šæ—¶å™¨å®ç°å›¾ç‰‡è‡ªåŠ¨è½®æ’­ï¼ˆä¿®æ”¹ç´¢å¼•ï¼Œåˆ‡æ¢å›¾ç‰‡å’ŒæŒ‡ç¤ºå™¨ï¼‰ï¼›ç‚¹å‡»å·¦å³æŒ‰é’®åˆ‡æ¢ä¸Šä¸€å¼  / ä¸‹ä¸€å¼ ï¼ˆç´¢å¼•åŠ å‡ï¼Œè¾¹ç•Œåˆ¤æ–­ï¼‰ï¼›ç‚¹å‡»æŒ‡ç¤ºå™¨è·³è½¬åˆ°å¯¹åº”å›¾ç‰‡ï¼›é¼ æ ‡æ‚¬æµ®åœ¨è½®æ’­å›¾ä¸Šæš‚åœå®šæ—¶å™¨ï¼Œç¦»å¼€åæ¢å¤ã€‚</p>
<h5 data-id="heading-17">å®Œæ•´ä»£ç </h5>
<p><span href="https://code.juejin.cn/pen/7603643841714847770" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7603643841714847770" data-src="https://code.juejin.cn/pen/7603643841714847770" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h5 data-id="heading-18">æ ¸å¿ƒçŸ¥è¯†ç‚¹ &amp; é¿å‘ç‚¹</h5>
<ol>
<li><strong>å®šæ—¶å™¨ç®¡ç†</strong>ï¼šç”¨å˜é‡ä¿å­˜å®šæ—¶å™¨ IDï¼Œæ–¹ä¾¿æš‚åœå’Œæ¢å¤ï¼Œé¿å…å¤šä¸ªå®šæ—¶å™¨åŒæ—¶è¿è¡Œ</li>
<li><strong>è¾¹ç•Œåˆ¤æ–­</strong>ï¼šåˆ‡æ¢ç´¢å¼•æ—¶åˆ¤æ–­æ˜¯å¦è¶…å‡ºèŒƒå›´ï¼Œå®ç°è½®æ’­å¾ªç¯ï¼ˆæœ€åä¸€å¼ åˆ‡åˆ°ç¬¬ä¸€å¼ ï¼Œç¬¬ä¸€å¼ åˆ‡åˆ°æœ€åä¸€å¼ ï¼‰</li>
<li><strong>æ ·å¼ç§»åŠ¨</strong>ï¼šé€šè¿‡ä¿®æ”¹<code>left</code>å€¼å®ç°å›¾ç‰‡æ¨ªå‘æ»‘åŠ¨ï¼Œç»“åˆ<code>transition</code>å®ç°å¹³æ»‘åŠ¨ç”»ï¼Œæ¯”<code>display</code>æ›´å‹å¥½</li>
<li><strong>äº‹ä»¶å§”æ‰˜</strong>ï¼šè½®æ’­å›¾çš„æ‰€æœ‰å­å…ƒç´ ï¼ˆæŒ‰é’®ã€æŒ‡ç¤ºå™¨ã€å›¾ç‰‡ï¼‰çš„é¼ æ ‡äº‹ä»¶ï¼Œéƒ½å¯ä»¥ç»‘å®šåœ¨çˆ¶å®¹å™¨ä¸Šï¼Œå‡å°‘äº‹ä»¶ç»‘å®šæ•°é‡</li>
<li><strong>é¿å‘</strong>ï¼šç»™è½®æ’­å®¹å™¨æ·»åŠ <code>overflow: hidden</code>ï¼Œéšè—è¶…å‡ºçš„å›¾ç‰‡ï¼›å›¾ç‰‡å®¹å™¨çš„å®½åº¦è¦è®¾ç½®ä¸º<code>å•å¼ å®½åº¦*å›¾ç‰‡æ•°é‡</code>ï¼Œç¡®ä¿æ¨ªå‘æ’åˆ—</li>
</ol>
<h4 data-id="heading-19">æ¡ˆä¾‹ 6ï¼šè¡¨å•éç©ºéªŒè¯ï¼ˆå®æ—¶æç¤º + æäº¤æ ¡éªŒï¼Œä¸šåŠ¡é«˜é¢‘ï¼‰</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç™»å½• / æ³¨å†Œè¡¨å•ã€ç•™è¨€è¡¨å•ã€æäº¤è¡¨å•ï¼Œå‰ç«¯åŸºç¡€æ ¡éªŒï¼Œå‡å°‘æ— æ•ˆæ¥å£è¯·æ±‚ï¼Œæå‡ç”¨æˆ·ä½“éªŒ<strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šç»™è¾“å…¥æ¡†ç»‘å®š<code>input</code>å®æ—¶äº‹ä»¶ï¼Œè¾“å…¥æ—¶æ ¡éªŒæ˜¯å¦ä¸ºç©ºï¼Œå®æ—¶æ˜¾ç¤ºæç¤ºä¿¡æ¯ï¼›ç»™è¡¨å•ç»‘å®š<code>submit</code>æäº¤äº‹ä»¶ï¼Œæäº¤å‰æ ¡éªŒæ‰€æœ‰å¿…å¡«é¡¹ï¼Œè‹¥æœ‰æœªå¡«é¡¹é˜»æ­¢æäº¤å¹¶æç¤ºï¼Œå…¨éƒ¨å¡«å®Œåˆ™æäº¤æˆåŠŸã€‚</p>
<h5 data-id="heading-20">å®Œæ•´ä»£ç </h5>
<p><span href="https://code.juejin.cn/pen/7603644243231866926" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7603644243231866926" data-src="https://code.juejin.cn/pen/7603644243231866926" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h5 data-id="heading-21">æ ¸å¿ƒçŸ¥è¯†ç‚¹ &amp; é¿å‘ç‚¹</h5>
<ol>
<li><strong>é€šç”¨å‡½æ•°å°è£…</strong>ï¼šå°†éç©ºæ ¡éªŒé€»è¾‘å°è£…ä¸º<code>checkInput</code>å‡½æ•°ï¼Œé¿å…é‡å¤ä»£ç ï¼Œä¾¿äºç»´æŠ¤å’Œæ‹“å±•ï¼ˆå¦‚åç»­æ·»åŠ é•¿åº¦æ ¡éªŒã€æ ¼å¼æ ¡éªŒï¼‰</li>
<li><strong>å®æ—¶æ ¡éªŒ</strong>ï¼šç»‘å®š<code>input</code>äº‹ä»¶ï¼Œè¾“å…¥æ—¶å®æ—¶æ ¡éªŒï¼Œæ¯”<code>blur</code>ï¼ˆå¤±å»ç„¦ç‚¹ï¼‰æ›´å‹å¥½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</li>
<li><strong>è¡¨å•æäº¤äº‹ä»¶</strong>ï¼šç»‘å®š<code>form</code>çš„<code>submit</code>äº‹ä»¶ï¼Œè€ŒéæŒ‰é’®çš„<code>click</code>äº‹ä»¶ï¼Œå…¼å®¹å›è½¦é”®æäº¤ï¼Œæ›´ç¬¦åˆè¡¨å•äº¤äº’è§„èŒƒ</li>
<li><strong>é˜»æ­¢é»˜è®¤æäº¤</strong>ï¼šæäº¤å‰å¿…é¡»ç”¨<code>e.preventDefault()</code>é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œå…ˆå®Œæˆå‰ç«¯æ ¡éªŒï¼Œå†æ‰§è¡Œæ¥å£è¯·æ±‚æˆ–æ‰‹åŠ¨æäº¤</li>
<li><strong>é¿å‘</strong>ï¼šæ ¡éªŒæ—¶è¦ä½¿ç”¨<code>trim()</code>å»é™¤è¾“å…¥æ¡†çš„é¦–å°¾ç©ºæ ¼ï¼Œé¿å…ç”¨æˆ·è¾“å…¥ç©ºæ ¼è§†ä¸ºéç©ºï¼›å¯†ç æ¡†ç”¨<code>type="password"</code>ï¼Œä¿è¯å®‰å…¨æ€§</li>
</ol>
<h3 data-id="heading-22">äº”ã€DOM æ“ä½œæ ¸å¿ƒæŠ€å·§ä¸é¿å‘æ€»ç»“</h3>
<h4 data-id="heading-23">æ ¸å¿ƒæŠ€å·§</h4>
<ol>
<li><strong>å…ƒç´ è·å–</strong>ï¼šä¼˜å…ˆä½¿ç”¨<code>querySelector/querySelectorAll</code>ï¼Œæ”¯æŒ CSS é€‰æ‹©å™¨ï¼Œç²¾å‡†ä¸”çµæ´»ï¼Œæ›¿ä»£è€æ—§çš„<code>getElementById/getElementsByClassName</code></li>
<li><strong>äº‹ä»¶ç»‘å®š</strong>ï¼šä¼˜å…ˆä½¿ç”¨<code>addEventListener</code>ï¼Œæ”¯æŒå¤šäº‹ä»¶ç»‘å®šã€äº‹ä»¶ç§»é™¤ï¼Œé¿å…<code>onxxx</code>çš„è¦†ç›–é—®é¢˜ï¼›åˆ©ç”¨<strong>äº‹ä»¶å§”æ‰˜</strong>å‡å°‘äº‹ä»¶ç»‘å®šæ•°é‡ï¼ˆå°†å­å…ƒç´ äº‹ä»¶ç»‘å®šåˆ°çˆ¶å…ƒç´ ï¼‰</li>
<li><strong>æ ·å¼ä¿®æ”¹</strong>ï¼šä¼˜å…ˆä½¿ç”¨<code>classList</code>æ“ä½œç±»åï¼Œåˆ†ç¦»æ ·å¼å’Œè¡Œä¸ºï¼Œé¿å…ç›´æ¥ä¿®æ”¹<code>style</code>ï¼ˆè¡Œå†…æ ·å¼éš¾ç»´æŠ¤ï¼Œè¦†ç›–ä¼˜å…ˆçº§é«˜ï¼‰</li>
<li><strong>å‡½æ•°å°è£…</strong>ï¼šå°†é‡å¤çš„ DOM æ“ä½œé€»è¾‘å°è£…ä¸ºé€šç”¨å‡½æ•°ï¼ˆå¦‚è¡¨å•æ ¡éªŒã€ç±»ååˆ‡æ¢ï¼‰ï¼Œæå‡ä»£ç å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§</li>
<li><strong>äº‹ä»¶å¯¹è±¡</strong>ï¼šç†Ÿç»ƒä½¿ç”¨<code>e.target</code>ï¼ˆäº‹ä»¶æºï¼‰ã€<code>e.preventDefault</code>ï¼ˆé˜»æ­¢é»˜è®¤è¡Œä¸ºï¼‰ã€<code>e.stopPropagation</code>ï¼ˆé˜»æ­¢äº‹ä»¶å†’æ³¡ï¼‰ï¼Œè§£å†³äº¤äº’ä¸­çš„å„ç§é—®é¢˜</li>
<li><strong>å®šæ—¶å™¨ç®¡ç†</strong>ï¼šç”¨å˜é‡ä¿å­˜å®šæ—¶å™¨ IDï¼ŒåŠæ—¶æ¸…é™¤å®šæ—¶å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼å’Œå¤šæ¬¡æ‰§è¡Œï¼ˆå¦‚è½®æ’­å›¾çš„æš‚åœ / æ¢å¤ï¼‰</li>
</ol>
<h4 data-id="heading-24">æ–°æ‰‹å¸¸è¸©é¿å‘ç‚¹</h4>
<ol>
<li><strong>å…ƒç´ è·å–æ—¶æœº</strong>ï¼šåœ¨ DOM èŠ‚ç‚¹æ¸²æŸ“å®Œæˆåå†è·å–å…ƒç´ ï¼Œé¿å…è·å–åˆ°<code>null</code>ï¼ˆå°† JS å†™åœ¨<code>body</code>åº•éƒ¨æˆ–ä½¿ç”¨<code>DOMContentLoaded</code>äº‹ä»¶ï¼‰</li>
<li><strong>ä¼ªæ•°ç»„éå†</strong>ï¼š<code>querySelectorAll</code>è¿”å›çš„æ˜¯ä¼ªæ•°ç»„ï¼Œå¯ç›´æ¥ç”¨<code>forEach</code>éå†ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨æ•°ç»„çš„<code>push/pop</code>æ–¹æ³•</li>
<li><strong>this æŒ‡å‘é—®é¢˜</strong>ï¼šåœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œ<code>this</code>æŒ‡å‘çˆ¶çº§ä½œç”¨åŸŸï¼Œè€Œéäº‹ä»¶è§¦å‘çš„å…ƒç´ ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ä¼˜å…ˆä½¿ç”¨æ™®é€šå‡½æ•°</li>
<li><strong>æ ·å¼è¦†ç›–</strong>ï¼šç›´æ¥ä¿®æ”¹<code>style</code>ä¼šè¦†ç›–è¡Œå†…æ ·å¼ï¼Œä¼˜å…ˆä½¿ç”¨ç±»ååˆ‡æ¢ï¼›å¤šä¸ªæ ·å¼å†²çªæ—¶ï¼Œåˆ©ç”¨ CSS ä¼˜å…ˆçº§è§£å†³ï¼ˆå¦‚é€‰ä¸­ç±»é«˜äºæ‚¬æµ®ç±»ï¼‰</li>
<li><strong>é»˜è®¤è¡Œä¸ºæœªé˜»æ­¢</strong>ï¼ša æ ‡ç­¾ã€è¡¨å•ã€æŒ‰é’®ç­‰æœ‰é»˜è®¤è¡Œä¸ºï¼Œäº¤äº’æ—¶éœ€ç”¨<code>e.preventDefault()</code>é˜»æ­¢ï¼Œé¿å…é¡µé¢è·³è½¬æˆ–è¡¨å•é»˜è®¤æäº¤</li>
<li><strong>å†…å­˜æ³„æ¼</strong>ï¼šåŠæ—¶ç§»é™¤äº‹ä»¶ç›‘å¬ã€æ¸…é™¤å®šæ—¶å™¨ã€é‡Šæ”¾æ— ç”¨çš„ DOM èŠ‚ç‚¹å¼•ç”¨ï¼Œé¿å…é¡µé¢é•¿æ—¶é—´è¿è¡Œåæ€§èƒ½ä¸‹é™</li>
</ol>
<h3 data-id="heading-25">å…­ã€æ‹“å±•å»¶ä¼¸ï¼ˆæ–°æ‰‹è¿›é˜¶æ–¹å‘ï¼‰</h3>
<ol>
<li><strong>äº‹ä»¶å§”æ‰˜è¿›é˜¶</strong>ï¼šå°†æ‰€æœ‰å­å…ƒç´ çš„äº‹ä»¶ç»‘å®šåˆ°çˆ¶å®¹å™¨ï¼Œåˆ©ç”¨<code>e.target</code>åˆ¤æ–­äº‹ä»¶æºï¼Œå®ç°åŠ¨æ€æ·»åŠ èŠ‚ç‚¹çš„äº‹ä»¶ç»‘å®šï¼ˆå¦‚åŠ¨æ€æ·»åŠ çš„å•†å“å¡ç‰‡è‡ªåŠ¨æ‹¥æœ‰æ‚¬æµ®æ•ˆæœï¼‰</li>
<li><strong>DOM èŠ‚ç‚¹åŠ¨æ€æ“ä½œ</strong>ï¼šç”¨<code>createElement/appendChild/removeChild</code>å®ç°åŠ¨æ€æ·»åŠ  / åˆ é™¤ DOM èŠ‚ç‚¹ï¼ˆå¦‚åŠ¨æ€æ·»åŠ è¡¨å•é¡¹ã€å•†å“å¡ç‰‡ï¼‰</li>
<li><strong>è¡¨å•æ ¡éªŒæ‹“å±•</strong>ï¼šåœ¨éç©ºæ ¡éªŒåŸºç¡€ä¸Šï¼Œæ·»åŠ æ‰‹æœºå·ã€é‚®ç®±ã€å¯†ç å¼ºåº¦ã€éªŒè¯ç ç­‰æ ¼å¼æ ¡éªŒï¼Œå°è£…ä¸ºé€šç”¨è¡¨å•æ ¡éªŒåº“</li>
<li><strong>è½®æ’­å›¾å‡çº§</strong>ï¼šå®ç°æ— ç¼è½®æ’­ã€è§¦æ‘¸æ»‘åŠ¨ï¼ˆé€‚é…ç§»åŠ¨ç«¯ï¼‰ã€å›¾ç‰‡é¢„åŠ è½½ã€è½®æ’­é€Ÿåº¦å¯é…ç½®ç­‰åŠŸèƒ½ï¼Œæ‰“é€ é€šç”¨è½®æ’­å›¾ç»„ä»¶</li>
<li><strong>æœ¬åœ°å­˜å‚¨ç»“åˆ</strong>ï¼šå°†è¡¨å•æ•°æ®ã€é€‰ä¸­çŠ¶æ€ã€è½®æ’­ç´¢å¼•ç­‰ä¿å­˜åˆ°<code>localStorage/sessionStorage</code>ï¼Œå®ç°é¡µé¢åˆ·æ–°åçŠ¶æ€æŒä¹…åŒ–</li>
<li><strong>å°è£…é€šç”¨ç»„ä»¶</strong>ï¼šå°† 6 ä¸ªæ¡ˆä¾‹å°è£…ä¸ºå¯å¤ç”¨çš„åŸç”Ÿ JS ç»„ä»¶ï¼Œé€šè¿‡å‚æ•°é…ç½®ï¼ˆå¦‚è½®æ’­å›¾é€Ÿåº¦ã€å¡ç‰‡å®½åº¦ã€è¡¨å•æ ¡éªŒè§„åˆ™ï¼‰é€‚é…ä¸åŒä¸šåŠ¡åœºæ™¯</li>
<li><strong>è·¨æµè§ˆå™¨å…¼å®¹</strong>ï¼šæ·»åŠ ä½ç‰ˆæœ¬æµè§ˆå™¨çš„å…¼å®¹ä»£ç ï¼ˆå¦‚<code>classList</code>çš„ polyfillã€<code>forEach</code>çš„å…¼å®¹ï¼‰ï¼Œé€‚é… IE11 ç­‰è€æ—§æµè§ˆå™¨</li>
</ol>
<h3 data-id="heading-26">ä¸ƒã€æ€»ç»“</h3>
<p>æœ¬æ¬¡å®æˆ˜ç”¨çº¯åŸç”Ÿ HTML+CSS+JS å®ç°äº†<strong>6 ä¸ªå‰ç«¯é«˜é¢‘ DOM äº¤äº’æ•ˆæœ</strong>ï¼Œè¦†ç›–äº†ç‚¹å‡»ã€é¼ æ ‡æ‚¬æµ®ã€è‡ªåŠ¨è½®æ’­ã€è¡¨å•äº¤äº’ç­‰æ ¸å¿ƒåœºæ™¯ï¼Œæ‰€æœ‰æ¡ˆä¾‹å‡éµå¾ª<strong>ç»“æ„ä¸æ ·å¼ä¸è¡Œä¸ºåˆ†ç¦»</strong>çš„å¼€å‘åŸåˆ™ï¼Œä»£ç ç®€æ´ã€æ³¨é‡Šè¯¦ç»†ï¼Œå¯ç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®ä¸­ä½¿ç”¨ã€‚</p>
<p>é€šè¿‡æœ¬æ¬¡å®æˆ˜ï¼Œä¸ä»…èƒ½ç†Ÿç»ƒæŒæ¡<strong>DOM å¢åˆ æ”¹æŸ¥ã€äº‹ä»¶ç»‘å®šã€æ ·å¼ä¿®æ”¹</strong>ç­‰æ ¸å¿ƒ APIï¼Œè¿˜èƒ½ç†è§£å‰ç«¯äº¤äº’çš„åº•å±‚é€»è¾‘ï¼ŒæŒæ¡<strong>å‡½æ•°å°è£…ã€ä»£ç è§£è€¦ã€è¾¹ç•Œå¤„ç†</strong>çš„å¼€å‘æ€ç»´ â€”â€” è¿™äº›èƒ½åŠ›æ˜¯å­¦ä¹  Vue/React ç­‰æ¡†æ¶çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯å‰ç«¯å¼€å‘å’Œé¢è¯•çš„æ ¸å¿ƒè¦æ±‚ã€‚</p>
<p>æ‰€æœ‰æ¡ˆä¾‹çš„éš¾åº¦ç”±æµ…å…¥æ·±ï¼Œæ–°æ‰‹å¯è·Ÿéšæ­¥éª¤é€ä¸€å®ç°ï¼Œåœ¨å®ç°è¿‡ç¨‹ä¸­ç†è§£æ¯ä¸ª API çš„ä½¿ç”¨åœºæ™¯å’ŒæŠ€å·§ï¼ŒåŒæ—¶é¿å¼€æ–°æ‰‹å¸¸è¸©çš„å‘ï¼Œé€æ­¥æå‡åŸç”Ÿ DOM æ“ä½œèƒ½åŠ›ï¼Œä¸ºåç»­å‰ç«¯å¼€å‘æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RIL å¼‚æ­¥å¤„ç†æ¨¡å‹å’Œå‘½ä»¤é˜Ÿåˆ—è¯¦è§£]]></title>    <link>https://juejin.cn/post/7603359026710839306</link>    <guid>https://juejin.cn/post/7603359026710839306</guid>    <pubDate>2026-02-06T07:10:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603359026710839306" data-draft-id="7603261102795882522" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RIL å¼‚æ­¥å¤„ç†æ¨¡å‹å’Œå‘½ä»¤é˜Ÿåˆ—è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T07:10:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RIL å¼‚æ­¥å¤„ç†æ¨¡å‹å’Œå‘½ä»¤é˜Ÿåˆ—è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:10:47.000Z" title="Fri Feb 06 2026 07:10:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>RILå¤„ç†å‘½ä»¤å’Œå“åº”çš„æ–¹å¼æ˜¯ç¡®ä¿é€šä¿¡é¡ºç•…çš„å…³é”®ã€‚RILå®ç°äº†ä¸€ä¸ªå¼‚æ­¥å¤„ç†æ¨¡å‹ï¼Œå‘½ä»¤å‘é€å’Œå“åº”æ¥æ”¶æ˜¯åˆ†å¼€è¿›è¡Œçš„ã€‚å‘½ä»¤å‘é€ä¹‹åï¼ŒRILç­‰å¾…æ— çº¿æ¨¡å—çš„å“åº”ï¼Œå“åº”åˆ°æ¥æ—¶ï¼ŒRILä¼šæ ¹æ®å“åº”æ•°æ®çš„å†…å®¹è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚å½“æœ‰å¤šä¸ªå‘½ä»¤éœ€è¦æ‰§è¡Œæ—¶ï¼ŒRILä¼šä½¿ç”¨é˜Ÿåˆ—ç®¡ç†è¿™äº›å‘½ä»¤ï¼Œç¡®ä¿å®ƒä»¬æŒ‰é¡ºåºæ‰§è¡Œã€‚</p>
<p>å¤„ç†å‘½ä»¤å’Œå“åº”çš„è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p>
<p>å‘½ä»¤é˜Ÿåˆ— ï¼šæ‰€æœ‰å¾…å‘é€çš„å‘½ä»¤æ”¾å…¥é˜Ÿåˆ—ä¸­ã€‚</p>
<p>å¼‚æ­¥å‘é€ ï¼šä»é˜Ÿåˆ—ä¸­å–å‡ºå‘½ä»¤ï¼Œå¹¶å¼‚æ­¥å‘é€ç»™ç¡¬ä»¶æ¨¡å—ã€‚</p>
<p>å“åº”ç›‘å¬ ï¼šRILç›‘å¬æ¥è‡ªç¡¬ä»¶æ¨¡å—çš„å“åº”ã€‚</p>
<p>ç»“æœå›è°ƒ ï¼šå½“å“åº”åˆ°è¾¾æ—¶ï¼ŒRILå°†ç»“æœå›è°ƒç»™å‘èµ·è¯·æ±‚çš„åº”ç”¨ç¨‹åºã€‚</p>
<h3 data-id="heading-0">1. <strong>æ ¸å¿ƒæ•°æ®ç»“æ„</strong></h3>
<h4 data-id="heading-1">RequestInfo ç»“æ„ä½“ï¼ˆå¾…å‘é€çš„å‘½ä»¤ä¿¡æ¯ï¼‰</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// æ¥è‡ª ril.cpp ç¬¬ 126 è¡Œ</span>
<span class="hljs-type">static</span> <span class="hljs-type">pthread_mutex_t</span> s_pendingRequestsMutex = PTHREAD_MUTEX_INITIALIZER;
<span class="hljs-type">static</span> RequestInfo *s_pendingRequests = <span class="hljs-literal">NULL</span>;  <span class="hljs-comment">// å¾…å¤„ç†è¯·æ±‚çš„é“¾è¡¨å¤´</span>
</code></pre>
<p><strong>RequestInfo åŒ…å«ï¼š</strong></p>
<ul>
<li><code>token</code> - å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºåŒ¹é…è¯·æ±‚å’Œå“åº”</li>
<li><code>pCI</code> - æŒ‡å‘ CommandInfo ç»“æ„ä½“çš„æŒ‡é’ˆ</li>
<li><code>socket_id</code> - SIM å¡ IDï¼ˆå¤šå¡æ”¯æŒï¼‰</li>
<li><code>p_next</code> - é“¾è¡¨æŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªå¾…å¤„ç†è¯·æ±‚</li>
<li><code>wasAckSent</code> - æ ‡å¿—å¼‚æ­¥ç¡®è®¤æ˜¯å¦å·²å‘é€</li>
</ul>
<h4 data-id="heading-2">å¤š SIM å¡æ”¯æŒ</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// å¤š SIM å¡çš„ç‹¬ç«‹é˜Ÿåˆ—</span>
<span class="hljs-meta">#<span class="hljs-keyword">if</span> (SIM_COUNT &gt;= 2)</span>
<span class="hljs-type">static</span> <span class="hljs-type">pthread_mutex_t</span> s_pendingRequestsMutex_socket2  = PTHREAD_MUTEX_INITIALIZER;
<span class="hljs-type">static</span> RequestInfo *s_pendingRequests_socket2          = <span class="hljs-literal">NULL</span>;
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">if</span> (SIM_COUNT &gt;= 3)</span>
<span class="hljs-type">static</span> <span class="hljs-type">pthread_mutex_t</span> s_pendingRequestsMutex_socket3  = PTHREAD_MUTEX_INITIALIZER;
<span class="hljs-type">static</span> RequestInfo *s_pendingRequests_socket3          = <span class="hljs-literal">NULL</span>;
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
<span class="hljs-comment">// ...</span>
</code></pre>
<hr/>
<h3 data-id="heading-3">2. <strong>å‘½ä»¤é˜Ÿåˆ—çš„å®Œæ•´æµç¨‹</strong></h3>
<h4 data-id="heading-4">æ­¥éª¤ 1: å‘½ä»¤å…¥é˜Ÿ - <code>addRequestToList()</code></h4>
<pre><code class="hljs language-c" lang="c">RequestInfo *
<span class="hljs-title function_">addRequestToList</span><span class="hljs-params">(<span class="hljs-type">int</span> serial, <span class="hljs-type">int</span> slotId, <span class="hljs-type">int</span> request)</span> {
    RequestInfo *pRI;
    <span class="hljs-type">int</span> ret;
    RIL_SOCKET_ID socket_id = (RIL_SOCKET_ID) slotId;
    
    <span class="hljs-comment">// æ ¹æ® slotId é€‰æ‹©å¯¹åº”çš„äº’æ–¥é”å’Œé˜Ÿåˆ—</span>
    <span class="hljs-type">pthread_mutex_t</span>* pendingRequestsMutexHook = &amp;s_pendingRequestsMutex;
    RequestInfo** pendingRequestsHook = &amp;s_pendingRequests;
    
    <span class="hljs-keyword">if</span> (socket_id == RIL_SOCKET_2) {
        pendingRequestsMutexHook = &amp;s_pendingRequestsMutex_socket2;
        pendingRequestsHook = &amp;s_pendingRequests_socket2;
    }
    <span class="hljs-comment">// ... å…¶ä»– SIM å¡å¤„ç† ...</span>
    
    <span class="hljs-comment">// åˆ†é…å†…å­˜å¹¶åˆå§‹åŒ– RequestInfo</span>
    pRI = (RequestInfo *)<span class="hljs-built_in">calloc</span>(<span class="hljs-number">1</span>, <span class="hljs-keyword">sizeof</span>(RequestInfo));
    <span class="hljs-keyword">if</span> (pRI == <span class="hljs-literal">NULL</span>) {
        RLOGE(<span class="hljs-string">"Memory allocation failed for request %s"</span>, requestToString(request));
        <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
    }
    
    <span class="hljs-comment">// ä¿å­˜è¯·æ±‚ä¿¡æ¯</span>
    pRI-&gt;token = serial;              <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†</span>
    pRI-&gt;pCI = &amp;(s_commands[request]); <span class="hljs-comment">// å‘½ä»¤å®šä¹‰</span>
    pRI-&gt;socket_id = socket_id;        <span class="hljs-comment">// SIM å¡ ID</span>
    
    <span class="hljs-comment">// åŸå­æ“ä½œï¼šå°†è¯·æ±‚æ·»åŠ åˆ°é˜Ÿåˆ—å¤´éƒ¨</span>
    ret = pthread_mutex_lock(pendingRequestsMutexHook);
    assert (ret == <span class="hljs-number">0</span>);
    
    pRI-&gt;p_next = *pendingRequestsHook;  <span class="hljs-comment">// æ–°è¯·æ±‚æŒ‡å‘åŸæ¥çš„å¤´</span>
    *pendingRequestsHook = pRI;          <span class="hljs-comment">// æ–°è¯·æ±‚æˆä¸ºæ–°çš„å¤´</span>
    
    ret = pthread_mutex_unlock(pendingRequestsMutexHook);
    assert (ret == <span class="hljs-number">0</span>);
    
    <span class="hljs-keyword">return</span> pRI;  <span class="hljs-comment">// è¿”å›ç”¨ä½œ token</span>
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨<strong>äº’æ–¥é”</strong>ä¿æŠ¤å…±äº«æ•°æ®ç»“æ„</li>
<li>ä½¿ç”¨<strong>é“¾è¡¨</strong>ï¼ˆLIFO - åè¿›å…ˆå‡ºï¼‰å­˜å‚¨å¾…å¤„ç†è¯·æ±‚</li>
<li><code>token</code> å°±æ˜¯è¿”å›çš„ <code>RequestInfo</code> æŒ‡é’ˆæœ¬èº«</li>
</ul>
<hr/>
<h4 data-id="heading-5">æ­¥éª¤ 2: å¼‚æ­¥å‘é€å‘½ä»¤</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ril_service.cpp ä¸­çš„å‘½ä»¤åˆ†å‘</span>
<span class="hljs-type">bool</span> <span class="hljs-title function_">dispatchVoid</span><span class="hljs-params">(<span class="hljs-type">int</span> serial, <span class="hljs-type">int</span> slotId, <span class="hljs-type">int</span> request)</span> {
    <span class="hljs-comment">// 1. å°†è¯·æ±‚åŠ å…¥é˜Ÿåˆ—ï¼ˆåˆ›å»º RequestInfoï¼‰</span>
    RequestInfo *pRI = android::addRequestToList(serial, slotId, request);
    <span class="hljs-keyword">if</span> (pRI == <span class="hljs-literal">NULL</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// 2. å¼‚æ­¥å‘é€ç»™ç¡¬ä»¶æ¨¡å—</span>
    CALL_ONREQUEST(request, <span class="hljs-literal">NULL</span>, <span class="hljs-number">0</span>, pRI, slotId);
    <span class="hljs-comment">// è¿™ä¼šè°ƒç”¨åˆ° vendor RIL å®ç°ï¼ˆå¦‚ QCRILï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p><strong>å®é™…è°ƒç”¨é“¾ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">dispatchVoid</span>()
    â†’ <span class="hljs-built_in">addRequestToList</span>() åˆ›å»º RequestInfo å¹¶åŠ å…¥é˜Ÿåˆ—
    â†’ <span class="hljs-built_in">CALL_ONREQUEST</span>() è°ƒç”¨ s_vendorFunctions-&gt;<span class="hljs-built_in">onRequest</span>()
        â†’ vendor RIL (QCRIL) å¤„ç†è¯·æ±‚
            â†’ ä¸ç¡¬ä»¶æ¨¡å—é€šä¿¡
                â†’ ç­‰å¾…å“åº”...
</code></pre>
<hr/>
<h4 data-id="heading-6">æ­¥éª¤ 3: å“åº”ç›‘å¬å’Œå›è°ƒ - <code>RIL_onRequestComplete()</code></h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-type">void</span>
<span class="hljs-title function_">RIL_onRequestComplete</span><span class="hljs-params">(RIL_Token t, RIL_Errno e, <span class="hljs-type">void</span> *response, <span class="hljs-type">size_t</span> responselen)</span> {
    RequestInfo *pRI;
    <span class="hljs-type">int</span> ret;
    RIL_SOCKET_ID socket_id = RIL_SOCKET_1;
    
    pRI = (RequestInfo *)t;  <span class="hljs-comment">// ä» token æ¢å¤ RequestInfo</span>
    
    <span class="hljs-comment">// ä»é˜Ÿåˆ—ä¸­ç§»é™¤è¯¥è¯·æ±‚</span>
    <span class="hljs-keyword">if</span> (!checkAndDequeueRequestInfoIfAck(pRI, <span class="hljs-literal">false</span>)) {
        RLOGE (<span class="hljs-string">"RIL_onRequestComplete: invalid RIL_Token"</span>);
        <span class="hljs-keyword">return</span>;
    }
    
    socket_id = pRI-&gt;socket_id;
    
    <span class="hljs-comment">// ... å¼‚å¸¸å¤„ç† ...</span>
    
    <span class="hljs-keyword">if</span> (pRI-&gt;cancelled == <span class="hljs-number">0</span>) {
        <span class="hljs-type">int</span> responseType;
        
        <span class="hljs-comment">// åˆ¤æ–­å“åº”ç±»å‹</span>
        <span class="hljs-keyword">if</span> (s_callbacks.version &gt;= <span class="hljs-number">13</span> &amp;&amp; pRI-&gt;wasAckSent == <span class="hljs-number">1</span>) {
            <span class="hljs-comment">// å¼‚æ­¥å“åº”ï¼šå…ˆå‰å‘é€è¿‡ ackï¼Œç°åœ¨å‘é€æœ€ç»ˆå“åº”</span>
            responseType = RESPONSE_SOLICITED_ACK_EXP;
            grabPartialWakeLock();  <span class="hljs-comment">// è·å– wake lock</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// åŒæ­¥å“åº”</span>
            responseType = RESPONSE_SOLICITED;
        }
        
        <span class="hljs-comment">// è°ƒç”¨å“åº”å‡½æ•°ï¼Œè¿”å›ç»™ Java å±‚</span>
        ret = pRI-&gt;pCI-&gt;responseFunction((<span class="hljs-type">int</span>) socket_id,
                responseType, pRI-&gt;token, e, response, responselen);
    }
    
    <span class="hljs-comment">// é‡Šæ”¾å†…å­˜</span>
    <span class="hljs-built_in">free</span>(pRI);
}
</code></pre>
<hr/>
<h4 data-id="heading-7">æ­¥éª¤ 4: ç§»é™¤è¯·æ±‚ - <code>checkAndDequeueRequestInfoIfAck()</code></h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">static</span> <span class="hljs-type">int</span>
<span class="hljs-title function_">checkAndDequeueRequestInfoIfAck</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> RequestInfo *pRI, <span class="hljs-type">bool</span> isAck)</span> {
    <span class="hljs-type">int</span> ret = <span class="hljs-number">0</span>;
    <span class="hljs-type">pthread_mutex_t</span>* pendingRequestsMutexHook = &amp;s_pendingRequestsMutex;
    RequestInfo ** pendingRequestsHook = &amp;s_pendingRequests;
    
    <span class="hljs-keyword">if</span> (pRI == <span class="hljs-literal">NULL</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    
    <span class="hljs-comment">// æ ¹æ® socket_id é€‰æ‹©å¯¹åº”çš„é˜Ÿåˆ—</span>
    <span class="hljs-keyword">if</span> (pRI-&gt;socket_id == RIL_SOCKET_2) {
        pendingRequestsMutexHook = &amp;s_pendingRequestsMutex_socket2;
        pendingRequestsHook = &amp;s_pendingRequests_socket2;
    }
    <span class="hljs-comment">// ...</span>
    
    pthread_mutex_lock(pendingRequestsMutexHook);
    
    <span class="hljs-comment">// ä»é“¾è¡¨ä¸­æŸ¥æ‰¾å¹¶ç§»é™¤è¯¥è¯·æ±‚</span>
    <span class="hljs-keyword">for</span>(RequestInfo **ppCur = pendingRequestsHook
        ; *ppCur != <span class="hljs-literal">NULL</span>
        ; ppCur = &amp;((*ppCur)-&gt;p_next)
    ) {
        <span class="hljs-keyword">if</span> (pRI == *ppCur) {
            ret = <span class="hljs-number">1</span>;
            
            <span class="hljs-keyword">if</span> (isAck) {
                <span class="hljs-comment">// æ ‡è®° ack å·²å‘é€ï¼ˆç”¨äºå¼‚æ­¥é•¿æ—¶é—´è¯·æ±‚ï¼‰</span>
                pRI-&gt;wasAckSent = <span class="hljs-number">1</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// ä»é“¾è¡¨ä¸­ç§»é™¤è¯¥è¯·æ±‚</span>
                *ppCur = (*ppCur)-&gt;p_next;
            }
            <span class="hljs-keyword">break</span>;
        }
    }
    
    pthread_mutex_unlock(pendingRequestsMutexHook);
    
    <span class="hljs-keyword">return</span> ret;
}
</code></pre>
<hr/>
<h3 data-id="heading-8">3. <strong>å¼‚æ­¥å¤„ç†æ¨¡å‹æ—¶é—´çº¿</strong></h3>
<pre><code class="hljs language-vbnet" lang="vbnet">æ—¶é—´è½´ï¼š

<span class="hljs-symbol">T0:</span> åº”ç”¨å‘èµ·è¯·æ±‚ï¼ˆå¦‚æ‹¨å·ï¼‰
    â†“
<span class="hljs-symbol">T1:</span> addRequestToList() åˆ›å»º RequestInfoï¼ŒåŠ å…¥ s_pendingRequests
    â”‚ [RequestInfo å·²åœ¨é˜Ÿåˆ—ä¸­]
    â†“
<span class="hljs-symbol">T2:</span> CALL_ONREQUEST() å‘é€å‘½ä»¤ç»™ vendor RIL
    â”‚ [å‘½ä»¤å¼‚æ­¥å‘é€ï¼Œä¸ç­‰å¾…]
    â†“
<span class="hljs-symbol">T3:</span> Vendor RIL ä¸ç¡¬ä»¶é€šä¿¡ï¼Œå¤„ç†è¯·æ±‚
    â”‚ [å¯èƒ½è€—æ—¶å‡ ç§’é’Ÿ]
    â†“
<span class="hljs-symbol">T4a:</span> å¦‚æœæ”¯æŒå¼‚æ­¥ç¡®è®¤ (RIL version &gt;= <span class="hljs-number">13</span>)
    â”‚   â†’ RIL_onRequestAck() è¢«è°ƒç”¨
    â”‚   â†’ pRI-&gt;wasAckSent = <span class="hljs-number">1</span>ï¼ˆæ ‡è®°ä½†ä¸ç§»é™¤ï¼‰
    â”‚   â†’ è¿”å› ACK ç»™åº”ç”¨ï¼ˆè®©åº”ç”¨çŸ¥é“å·²æ”¶åˆ°ï¼‰
    â”‚
    â†“ (å‡ ç§’å)
    â”‚
<span class="hljs-symbol">T4b:</span> ç¡¬ä»¶å“åº”ï¼Œå›è°ƒ RIL_onRequestComplete()
    â”‚ â†’ checkAndDequeueRequestInfoIfAck(pRI, <span class="hljs-literal">false</span>)
    â”‚ â†’ ä» s_pendingRequests ä¸­ç§»é™¤
    â”‚ â†’ è°ƒç”¨ responseFunction() è¿”å›ç»“æœç»™ Java å±‚
    â”‚ â†’ free(pRI) é‡Šæ”¾å†…å­˜
    â†“
<span class="hljs-symbol">T5:</span> åº”ç”¨æ”¶åˆ°æœ€ç»ˆå“åº”
</code></pre>
<hr/>
<h3 data-id="heading-9">4. <strong>å¤šå¹¶å‘è¯·æ±‚çš„å¤„ç†</strong></h3>
<p>å½“å¤šä¸ªè¯·æ±‚åŒæ—¶åˆ°è¾¾æ—¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">è¯·æ±‚é˜Ÿåˆ—çŠ¶æ€å˜åŒ–ï¼š

åˆå§‹çŠ¶æ€ï¼š
s_pendingRequests â†’ NULL

è¯·æ±‚ <span class="hljs-number">1</span> (æ‹¨å·) åˆ°è¾¾ï¼š
s_pendingRequests â†’ <span class="hljs-selector-attr">[RequestInfo-1]</span> â†’ NULL

è¯·æ±‚ <span class="hljs-number">2</span> (è·å–ä¿¡å·å¼ºåº¦) åˆ°è¾¾ï¼š
s_pendingRequests â†’ <span class="hljs-selector-attr">[RequestInfo-2]</span> â†’ <span class="hljs-selector-attr">[RequestInfo-1]</span> â†’ NULL

è¯·æ±‚ <span class="hljs-number">3</span> (è®¾ç½®ç½‘ç»œ) åˆ°è¾¾ï¼š
s_pendingRequests â†’ <span class="hljs-selector-attr">[RequestInfo-3]</span> â†’ <span class="hljs-selector-attr">[RequestInfo-2]</span> â†’ <span class="hljs-selector-attr">[RequestInfo-1]</span> â†’ NULL

è¯·æ±‚ <span class="hljs-number">2</span> å®Œæˆï¼Œå“åº”ï¼š
<span class="hljs-built_in">checkAndDequeueRequestInfoIfAck</span>(RequestInfo-<span class="hljs-number">2</span>, false)
s_pendingRequests â†’ <span class="hljs-selector-attr">[RequestInfo-3]</span> â†’ <span class="hljs-selector-attr">[RequestInfo-1]</span> â†’ NULL
ï¼ˆRequestInfo-<span class="hljs-number">2</span> è¢«ç§»é™¤å¹¶é‡Šæ”¾ï¼‰

è¯·æ±‚ <span class="hljs-number">1</span> å®Œæˆï¼Œå“åº”ï¼š
s_pendingRequests â†’ <span class="hljs-selector-attr">[RequestInfo-3]</span> â†’ NULL
</code></pre>
<hr/>
<h3 data-id="heading-10">5. <strong>åŒæ­¥ä¿æŠ¤æœºåˆ¶</strong></h3>
<h4 data-id="heading-11">äº’æ–¥é”ä½¿ç”¨</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// å…³é”®çš„äº’æ–¥ä¿æŠ¤</span>
pthread_mutex_lock(pendingRequestsMutexHook);
    <span class="hljs-comment">// åŸå­æ“ä½œï¼šå¢åŠ æˆ–éå†é“¾è¡¨</span>
    pRI-&gt;p_next = *pendingRequestsHook;
    *pendingRequestsHook = pRI;
pthread_mutex_unlock(pendingRequestsMutexHook);
</code></pre>
<p><strong>ä¿æŠ¤çš„æ“ä½œï¼š</strong></p>
<ul>
<li>âœ“ æ·»åŠ è¯·æ±‚åˆ°é˜Ÿåˆ—</li>
<li>âœ“ æŸ¥æ‰¾å¹¶ç§»é™¤è¯·æ±‚</li>
<li>âœ“ éå†åˆ—è¡¨æŸ¥æ‰¾ç‰¹å®šè¯·æ±‚</li>
</ul>
<hr/>
<h3 data-id="heading-12">6. <strong>å¼‚æ­¥åº”ç­”æœºåˆ¶ï¼ˆACKï¼‰</strong></h3>
<p>å¯¹äºè€—æ—¶è¾ƒé•¿çš„è¯·æ±‚ï¼ˆå¦‚æ‹¨å·ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">åŒé˜¶æ®µç¡®è®¤ï¼š

Phase <span class="hljs-number">1</span>: å¿«é€Ÿ ACK
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
è¯·æ±‚æ¥åˆ°æ—¶ï¼ˆT2ï¼‰
    â†“
<span class="hljs-built_in">RIL_onRequestAck</span>() 
    â”œâ”€ pRI-&gt;wasAckSent = <span class="hljs-number">1</span>
    â”œâ”€ è°ƒç”¨ radio::<span class="hljs-built_in">acknowledgeRequest</span>()
    â””â”€ ç«‹å³è¿”å›ç»™åº”ç”¨

åº”ç”¨ï¼šã€Œæ”¶åˆ° ACKï¼ŒçŸ¥é“æ­£åœ¨å¤„ç†ã€

Phase <span class="hljs-number">2</span>: æœ€ç»ˆå“åº”
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç¡¬ä»¶å®Œæˆæ“ä½œï¼ˆT4bï¼‰
    â†“
<span class="hljs-built_in">RIL_onRequestComplete</span>()
    â”œâ”€ responseType = RESPONSE_SOLICITED_ACK_EXP
    â”œâ”€ <span class="hljs-built_in">grabPartialWakeLock</span>()
    â”œâ”€ è°ƒç”¨ <span class="hljs-built_in">responseFunction</span>()
    â””â”€ è¿”å›å®é™…ç»“æœ

åº”ç”¨ï¼šã€Œæ”¶åˆ°æœ€ç»ˆå“åº”ã€
</code></pre>
<hr/>
<h3 data-id="heading-13">7. <strong>å…³é”® API æ€»ç»“</strong></h3>



































<table><thead><tr><th>API</th><th>åŠŸèƒ½</th><th>è°ƒç”¨æ–¹</th></tr></thead><tbody><tr><td><code>addRequestToList()</code></td><td>åˆ›å»º RequestInfoï¼ŒåŠ å…¥é˜Ÿåˆ—</td><td>RIL Service (ril_service.cpp)</td></tr><tr><td><code>CALL_ONREQUEST()</code></td><td>å¼‚æ­¥å‘é€å‘½ä»¤ç»™ vendor RIL</td><td>RIL Service</td></tr><tr><td><code>RIL_onRequestAck()</code></td><td>Vendor RIL å‘é€å¿«é€Ÿç¡®è®¤</td><td>Vendor RIL</td></tr><tr><td><code>RIL_onRequestComplete()</code></td><td>Vendor RIL å‘é€æœ€ç»ˆå“åº”</td><td>Vendor RIL</td></tr><tr><td><code>checkAndDequeueRequestInfoIfAck()</code></td><td>ä»é˜Ÿåˆ—ç§»é™¤è¯·æ±‚</td><td>ril.cpp å†…éƒ¨</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-14">8. <strong>è¶…æ—¶å’Œ Wake Lock ç®¡ç†</strong></h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// è·å– wake lockï¼Œé˜²æ­¢ç³»ç»Ÿä¼‘çœ </span>
<span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">grabPartialWakeLock</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (s_callbacks.version &gt;= <span class="hljs-number">13</span>) {
        acquire_wake_lock(PARTIAL_WAKE_LOCK, ANDROID_WAKE_LOCK_NAME);
        
        <span class="hljs-comment">// 200ms åè‡ªåŠ¨é‡Šæ”¾ï¼ˆé˜²æ­¢é•¿æœŸå ç”¨ï¼‰</span>
        UserCallbackInfo *p_info =
            internalRequestTimedCallback(wakeTimeoutCallback, <span class="hljs-literal">NULL</span>, 
                                        &amp;TIMEVAL_WAKE_TIMEOUT);
        s_last_wake_timeout_info = p_info;
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-15">æ€»ç»“</h3>









































<table><thead><tr><th>ç‰¹æ€§</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td><strong>é˜Ÿåˆ—ç®¡ç†</strong></td><td>é“¾è¡¨ + äº’æ–¥é”</td></tr><tr><td><strong>å¹¶å‘æ§åˆ¶</strong></td><td>Pthread mutex</td></tr><tr><td><strong>è¯·æ±‚æ ‡è¯†</strong></td><td>Token (RequestInfo æŒ‡é’ˆ)</td></tr><tr><td><strong>å¤š SIM æ”¯æŒ</strong></td><td>æ¯ä¸ª SIM ç‹¬ç«‹é˜Ÿåˆ— + äº’æ–¥é”</td></tr><tr><td><strong>å¼‚æ­¥å¤„ç†</strong></td><td>å‘½ä»¤å‘é€å’Œå“åº”åˆ†ç¦»</td></tr><tr><td><strong>å¿«é€Ÿç¡®è®¤</strong></td><td>RIL_onRequestAck()</td></tr><tr><td><strong>æœ€ç»ˆå“åº”</strong></td><td>RIL_onRequestComplete()</td></tr><tr><td><strong>ç³»ç»Ÿç¡çœ ä¿æŠ¤</strong></td><td>Wake lock + è¶…æ—¶é‡Šæ”¾</td></tr></tbody></table>
<p>è¿™ä¸ªè®¾è®¡ç¡®ä¿äº† RIL èƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†å¤šä¸ªå¹¶å‘è¯·æ±‚ï¼ŒåŒæ—¶ä¿æŒé€šä¿¡çš„å¯é æ€§å’Œç³»ç»Ÿçš„ç”µæºç®¡ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[langchain-RAGé«˜çº§æ£€ç´¢ç­–ç•¥å­¦ä¹ æ€»ç»“]]></title>    <link>https://juejin.cn/post/7603309951226806322</link>    <guid>https://juejin.cn/post/7603309951226806322</guid>    <pubDate>2026-02-06T07:06:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603309951226806322" data-draft-id="7603263490343026697" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="langchain-RAGé«˜çº§æ£€ç´¢ç­–ç•¥å­¦ä¹ æ€»ç»“"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T07:06:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒåœ¨é£æ‰¬AI"/> <meta itemprop="url" content="https://juejin.cn/user/1556564194366823"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            langchain-RAGé«˜çº§æ£€ç´¢ç­–ç•¥å­¦ä¹ æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1556564194366823/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒåœ¨é£æ‰¬AI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:06:06.000Z" title="Fri Feb 06 2026 07:06:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    22
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">RAGé«˜çº§æ£€ç´¢ç­–ç•¥å­¦ä¹ æ€»ç»“</h2>
<h3 data-id="heading-1">1. è‡ªå®šä¹‰æ£€ç´¢å™¨</h3>
<h4 data-id="heading-2">è¿™æ˜¯ä»€ä¹ˆ</h4>
<p>è‡ªå®šä¹‰æ£€ç´¢å™¨æ˜¯é€šè¿‡ç»§æ‰¿LangChainçš„<code>BaseRetriever</code>åŸºç±»ï¼Œå®ç°<code>_get_relevant_documents</code>æ–¹æ³•æ¥åˆ›å»ºçš„ä¸ªæ€§åŒ–æ£€ç´¢å™¨ã€‚è¿™å…è®¸å¼€å‘è€…æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘å’Œéœ€æ±‚ï¼Œè‡ªå®šä¹‰æ–‡æ¡£æ£€ç´¢çš„æ–¹å¼ã€‚</p>
<h4 data-id="heading-3">è¿™ä¸ªæœ‰ä»€ä¹ˆç”¨</h4>
<ul>
<li>å®ç°ç‰¹å®šçš„æ£€ç´¢é€»è¾‘ï¼Œå¦‚å…³é”®è¯åŒ¹é…ã€æ¨¡ç³Šæœç´¢ç­‰</li>
<li>æ•´åˆå¤šç§æ•°æ®æºçš„æ£€ç´¢èƒ½åŠ›</li>
<li>æ·»åŠ ä¸šåŠ¡è§„åˆ™å’Œè¿‡æ»¤æ¡ä»¶</li>
<li>çµæ´»æ§åˆ¶è¿”å›æ–‡æ¡£çš„æ•°é‡å’Œè´¨é‡</li>
</ul>
<h4 data-id="heading-4">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>
<span class="hljs-keyword">from</span> langchain_core.callbacks <span class="hljs-keyword">import</span> CallbackManagerForRetrieverRun
<span class="hljs-keyword">from</span> langchain_core.documents <span class="hljs-keyword">import</span> Document
<span class="hljs-keyword">from</span> langchain_core.retrievers <span class="hljs-keyword">import</span> BaseRetriever

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomRetriever</span>(<span class="hljs-title class_ inherited__">BaseRetriever</span>):
    documents: <span class="hljs-type">List</span>[Document]
    k: <span class="hljs-built_in">int</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_relevant_documents</span>(<span class="hljs-params">
        self, query: <span class="hljs-built_in">str</span>, *, run_manager: CallbackManagerForRetrieverRun
    </span>) -&gt; <span class="hljs-type">List</span>[Document]:
        <span class="hljs-string">"""æ ¹æ®ä¼ å…¥çš„queryï¼Œè·å–ç›¸å…³è”çš„æ–‡æ¡£åˆ—è¡¨"""</span>
        matching_documents = []
        <span class="hljs-keyword">for</span> document <span class="hljs-keyword">in</span> self.documents:
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(matching_documents) &gt;= self.k:
                <span class="hljs-keyword">return</span> matching_documents
            <span class="hljs-keyword">if</span> query.lower() <span class="hljs-keyword">in</span> document.page_content.lower():
                matching_documents.append(document)
        <span class="hljs-keyword">return</span> matching_documents

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
documents = [
    Document(page_content=<span class="hljs-string">"ç¬¨ç¬¨æ˜¯ä¸€åªå¾ˆå–œæ¬¢ç¡è§‰çš„çŒ«å’ª"</span>, metadata={<span class="hljs-string">"page"</span>: <span class="hljs-number">1</span>}),
    Document(page_content=<span class="hljs-string">"çŒ«å’ªåœ¨çª—å°ä¸Šæ‰“ç›¹ï¼Œçœ‹èµ·æ¥éå¸¸å¯çˆ±ã€‚"</span>, metadata={<span class="hljs-string">"page"</span>: <span class="hljs-number">3</span>}),
]

retriever = CustomRetriever(documents=documents, k=<span class="hljs-number">3</span>)
results = retriever.invoke(<span class="hljs-string">"çŒ«"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-5">2. Multi-Queryå¤šæŸ¥è¯¢ç­–ç•¥</h3>
<h4 data-id="heading-6">è¿™æ˜¯ä»€ä¹ˆ</h4>
<p>Multi-Queryæ£€ç´¢å™¨ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªä¸åŒè§’åº¦çš„æŸ¥è¯¢ï¼Œç„¶ååŸºäºè¿™äº›æŸ¥è¯¢è¿›è¡Œæ£€ç´¢ï¼Œæœ€ååˆå¹¶æ‰€æœ‰ç»“æœã€‚è¿™æ˜¯ä¸€ç§æé«˜æ£€ç´¢å¬å›ç‡å’Œå‡†ç¡®æ€§çš„ç­–ç•¥ã€‚</p>
<h4 data-id="heading-7">è¿™ä¸ªæœ‰ä»€ä¹ˆç”¨</h4>
<ul>
<li>è§£å†³ç”¨æˆ·æŸ¥è¯¢è¡¨è¿°ä¸å‡†ç¡®çš„é—®é¢˜</li>
<li>ä»å¤šä¸ªè§’åº¦ç†è§£åŒä¸€ä¸ªé—®é¢˜</li>
<li>æé«˜æ£€ç´¢çš„å¬å›ç‡ï¼Œæ‰¾åˆ°æ›´å¤šç›¸å…³æ–‡æ¡£</li>
<li>å‡å°‘å› æŸ¥è¯¢æªè¾ä¸å½“å¯¼è‡´çš„æ£€ç´¢å¤±è´¥</li>
</ul>
<h4 data-id="heading-8">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> weaviate
<span class="hljs-keyword">from</span> langchain_classic.retrievers <span class="hljs-keyword">import</span> MultiQueryRetriever
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_weaviate <span class="hljs-keyword">import</span> WeaviateVectorStore
<span class="hljs-keyword">from</span> weaviate.auth <span class="hljs-keyword">import</span> AuthApiKey

<span class="hljs-comment"># 1. æ„å»ºå‘é‡æ•°æ®åº“ä¸æ£€ç´¢å™¨</span>
db = WeaviateVectorStore(
    client=weaviate.connect_to_wcs(
        cluster_url=<span class="hljs-string">"your_cluster_url"</span>,
        auth_credentials=AuthApiKey(<span class="hljs-string">"your_api_key"</span>),
    ),
    index_name=<span class="hljs-string">"DatasetDemo"</span>,
    text_key=<span class="hljs-string">"text"</span>,
    embedding=QianfanEmbeddingsEndpoint(model=<span class="hljs-string">"embedding-v1"</span>),
)
retriever = db.as_retriever(search_type=<span class="hljs-string">"mmr"</span>)

<span class="hljs-comment"># 2. åˆ›å»ºå¤šæŸ¥è¯¢æ£€ç´¢å™¨</span>
multi_query_retriever = MultiQueryRetriever.from_llm(
    retriever=retriever,
    llm=ChatOpenAI(model=<span class="hljs-string">"moonshot-v1-8k"</span>, temperature=<span class="hljs-number">0</span>),
    include_original=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># æ˜¯å¦åŒ…å«åŸå§‹æŸ¥è¯¢</span>
)

<span class="hljs-comment"># 3. æ‰§è¡Œæ£€ç´¢</span>
docs = multi_query_retriever.invoke(<span class="hljs-string">"å…³äºLLMOpsåº”ç”¨é…ç½®çš„æ–‡æ¡£æœ‰å“ªäº›"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-9">3. RAGå¤šæŸ¥è¯¢ç»“æœèåˆç­–ç•¥</h3>
<h4 data-id="heading-10">è¿™æ˜¯ä»€ä¹ˆ</h4>
<p>RAG Fusionæ˜¯åœ¨Multi-QueryåŸºç¡€ä¸Šï¼Œä½¿ç”¨RRFï¼ˆReciprocal Rank Fusionï¼Œå€’æ•°æ’åèåˆï¼‰ç®—æ³•æ¥æ™ºèƒ½åˆå¹¶å¤šä¸ªæŸ¥è¯¢ç»“æœçš„ç­–ç•¥ã€‚å®ƒä¸ä»…å»é‡ï¼Œè¿˜æ ¹æ®æ–‡æ¡£åœ¨ä¸åŒæŸ¥è¯¢ç»“æœä¸­çš„æ’åè¿›è¡ŒåŠ æƒæ’åºã€‚</p>
<h4 data-id="heading-11">è¿™ä¸ªæœ‰ä»€ä¹ˆç”¨</h4>
<ul>
<li>æ¶ˆé™¤å¤šä¸ªæŸ¥è¯¢ç»“æœä¸­çš„é‡å¤æ–‡æ¡£</li>
<li>æ ¹æ®æ–‡æ¡£çš„æ’åä½ç½®æ™ºèƒ½è®¡ç®—ç›¸å…³æ€§å¾—åˆ†</li>
<li>èåˆå¤šä¸ªæŸ¥è¯¢çš„ä¼˜åŠ¿ï¼Œæé«˜æœ€ç»ˆç»“æœè´¨é‡</li>
<li>é¿å…ç®€å•å»é‡å¯¼è‡´çš„ä¿¡æ¯ä¸¢å¤±</li>
</ul>
<h4 data-id="heading-12">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>
<span class="hljs-keyword">from</span> langchain_core.callbacks <span class="hljs-keyword">import</span> CallbackManagerForRetrieverRun
<span class="hljs-keyword">from</span> langchain_core.documents <span class="hljs-keyword">import</span> Document
<span class="hljs-keyword">from</span> langchain_classic.retrievers <span class="hljs-keyword">import</span> MultiQueryRetriever
<span class="hljs-keyword">from</span> langchain_core.load <span class="hljs-keyword">import</span> dumps, loads

<span class="hljs-keyword">class</span> <span class="hljs-title class_">RAGFusionRetriever</span>(<span class="hljs-title class_ inherited__">MultiQueryRetriever</span>):
    <span class="hljs-string">"""RAGå¤šæŸ¥è¯¢ç»“æœèåˆç­–ç•¥æ£€ç´¢å™¨"""</span>
    k: <span class="hljs-built_in">int</span> = <span class="hljs-number">4</span>  <span class="hljs-comment"># è¿”å›å‰kä¸ªæ–‡æ¡£</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve_documents</span>(<span class="hljs-params">
            self, queries: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>], run_manager: CallbackManagerForRetrieverRun
    </span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>]:
        <span class="hljs-string">"""é‡å†™æ£€ç´¢æ–‡æ¡£å‡½æ•°ï¼Œè¿”å›åµŒå¥—åˆ—è¡¨"""</span>
        documents = []
        <span class="hljs-keyword">for</span> query <span class="hljs-keyword">in</span> queries:
            docs = self.retriever.invoke(
                query, config={<span class="hljs-string">"callbacks"</span>: run_manager.get_child()}
            )
            documents.append(docs)
        <span class="hljs-keyword">return</span> documents

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">unique_union</span>(<span class="hljs-params">self, documents: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>]</span>) -&gt; <span class="hljs-type">List</span>[Document]:
        <span class="hljs-string">"""ä½¿ç”¨RRFç®—æ³•æ¥å»é‡åˆå¹¶å¯¹åº”çš„æ–‡æ¡£"""</span>
        fused_result = {}

        <span class="hljs-comment"># RRFç®—æ³•ï¼šæ ¹æ®æ’åè®¡ç®—å¾—åˆ†</span>
        <span class="hljs-keyword">for</span> docs <span class="hljs-keyword">in</span> documents:
            <span class="hljs-keyword">for</span> rank, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(docs):
                doc_str = dumps(doc)
                <span class="hljs-keyword">if</span> doc_str <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> fused_result:
                    fused_result[doc_str] = <span class="hljs-number">0</span>
                <span class="hljs-comment"># è®¡ç®—å¾—åˆ†ï¼šæ’åè¶Šå‰ï¼Œå¾—åˆ†è¶Šé«˜</span>
                fused_result[doc_str] += <span class="hljs-number">1</span> / (rank + <span class="hljs-number">60</span>)

        <span class="hljs-comment"># æŒ‰å¾—åˆ†é™åºæ’åºï¼Œè¿”å›å‰kä¸ª</span>
        reranked_results = [
            (loads(doc), score)
            <span class="hljs-keyword">for</span> doc, score <span class="hljs-keyword">in</span> <span class="hljs-built_in">sorted</span>(fused_result.items(), key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>], reverse=<span class="hljs-literal">True</span>)
        ]

        <span class="hljs-keyword">return</span> [item[<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> reranked_results[:self.k]]

<span class="hljs-comment"># ä½¿ç”¨æ–¹å¼ä¸MultiQueryRetrieverç›¸åŒ</span>
rag_fusion_retriever = RAGFusionRetriever.from_llm(
    retriever=retriever,
    llm=ChatOpenAI(model=<span class="hljs-string">"moonshot-v1-8k"</span>, temperature=<span class="hljs-number">0</span>),
)
docs = rag_fusion_retriever.invoke(<span class="hljs-string">"æŸ¥è¯¢å†…å®¹"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-13">4. é—®é¢˜åˆ†è§£ç­–ç•¥</h3>
<h4 data-id="heading-14">è¿™æ˜¯ä»€ä¹ˆ</h4>
<p>é—®é¢˜åˆ†è§£ç­–ç•¥å°†å¤æ‚çš„ç”¨æˆ·é—®é¢˜åˆ†è§£æˆå¤šä¸ªç‹¬ç«‹çš„å­é—®é¢˜ï¼Œç„¶åå¯¹æ¯ä¸ªå­é—®é¢˜åˆ†åˆ«è¿›è¡Œæ£€ç´¢å’Œå›ç­”ï¼Œæœ€åå°†æ‰€æœ‰å­é—®é¢˜çš„ç­”æ¡ˆæ•´åˆèµ·æ¥å½¢æˆæœ€ç»ˆç­”æ¡ˆã€‚</p>
<h4 data-id="heading-15">è¿™ä¸ªæœ‰ä»€ä¹ˆç”¨</h4>
<ul>
<li>å¤„ç†å¤æ‚ã€å¤šæ–¹é¢çš„æŸ¥è¯¢é—®é¢˜</li>
<li>æé«˜å¯¹å¤åˆé—®é¢˜çš„å›ç­”å‡†ç¡®æ€§</li>
<li>é€æ­¥æ„å»ºç­”æ¡ˆï¼Œæ¯ä¸ªå­é—®é¢˜éƒ½å¯ä»¥è·å¾—ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡</li>
<li>é¿å…å•ä¸€æŸ¥è¯¢æ— æ³•è¦†ç›–æ‰€æœ‰ç›¸å…³ä¿¡æ¯çš„ç¼ºé™·</li>
</ul>
<h4 data-id="heading-16">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> operator <span class="hljs-keyword">import</span> itemgetter
<span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> StrOutputParser
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate
<span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnablePassthrough
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI

<span class="hljs-comment"># 1. æ„å»ºé—®é¢˜åˆ†è§£é“¾</span>
decomposition_prompt = ChatPromptTemplate.from_template(
    <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„AIåŠ©ç†ï¼Œå¯ä»¥é’ˆå¯¹ä¸€ä¸ªè¾“å…¥é—®é¢˜ç”Ÿæˆå¤šä¸ªç›¸å…³çš„å­é—®é¢˜ã€‚\n"</span>
    <span class="hljs-string">"ç›®æ ‡æ˜¯å°†è¾“å…¥é—®é¢˜åˆ†è§£æˆä¸€ç»„å¯ä»¥ç‹¬ç«‹å›ç­”çš„å­é—®é¢˜æˆ–è€…å­ä»»åŠ¡ã€‚\n"</span>
    <span class="hljs-string">"ç”Ÿæˆä¸ä»¥ä¸‹é—®é¢˜ç›¸å…³çš„å¤šä¸ªæœç´¢æŸ¥è¯¢ï¼š{question}\n"</span>
    <span class="hljs-string">"å¹¶ä½¿ç”¨æ¢è¡Œç¬¦è¿›è¡Œåˆ†å‰²ï¼Œè¾“å‡ºï¼ˆ3ä¸ªå­é—®é¢˜/å­æŸ¥è¯¢ï¼‰ï¼š"</span>
)

decomposition_chain = (
    {<span class="hljs-string">"question"</span>: RunnablePassthrough()}
    | decomposition_prompt
    | ChatOpenAI(model=<span class="hljs-string">"moonshot-v1-8k"</span>, temperature=<span class="hljs-number">0</span>)
    | StrOutputParser()
    | (<span class="hljs-keyword">lambda</span> x: x.strip().split(<span class="hljs-string">"\n"</span>))
)

<span class="hljs-comment"># 2. æ„å»ºè¿­ä»£é—®ç­”é“¾</span>
prompt = ChatPromptTemplate.from_template(<span class="hljs-string">"""è¿™æ˜¯ä½ éœ€è¦å›ç­”çš„é—®é¢˜ï¼š
---
{question}
---

è¿™æ˜¯æ‰€æœ‰å¯ç”¨çš„èƒŒæ™¯é—®é¢˜å’Œç­”æ¡ˆå¯¹ï¼š
---
{qa_pairs}
---

è¿™æ˜¯ä¸é—®é¢˜ç›¸å…³çš„é¢å¤–èƒŒæ™¯ä¿¡æ¯ï¼š
---
{context}
---"""</span>)

chain = (
    {
        <span class="hljs-string">"question"</span>: itemgetter(<span class="hljs-string">"question"</span>),
        <span class="hljs-string">"qa_pairs"</span>: itemgetter(<span class="hljs-string">"qa_pairs"</span>),
        <span class="hljs-string">"context"</span>: itemgetter(<span class="hljs-string">"question"</span>) | retriever,
    }
    | prompt
    | ChatOpenAI(model=<span class="hljs-string">"moonshot-v1-8k"</span>, temperature=<span class="hljs-number">0</span>)
    | StrOutputParser()
)

<span class="hljs-comment"># 3. å¾ªç¯å¤„ç†æ‰€æœ‰å­é—®é¢˜</span>
question = <span class="hljs-string">"å…³äºLLMOpsåº”ç”¨é…ç½®çš„æ–‡æ¡£æœ‰å“ªäº›"</span>
sub_questions = decomposition_chain.invoke(question)

qa_pairs = <span class="hljs-string">""</span>
<span class="hljs-keyword">for</span> sub_question <span class="hljs-keyword">in</span> sub_questions:
    answer = chain.invoke({<span class="hljs-string">"question"</span>: sub_question, <span class="hljs-string">"qa_pairs"</span>: qa_pairs})
    qa_pair = <span class="hljs-string">f"Question: <span class="hljs-subst">{sub_question}</span>\nAnswer: <span class="hljs-subst">{answer}</span>\n\n"</span>
    qa_pairs += qa_pair
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é—®é¢˜: <span class="hljs-subst">{sub_question}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç­”æ¡ˆ: <span class="hljs-subst">{answer}</span>"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-17">5. å°‘é‡ç¤ºä¾‹æ¨¡æ¿ï¼ˆFew-Shot Promptingï¼‰</h3>
<h4 data-id="heading-18">è¿™æ˜¯ä»€ä¹ˆ</h4>
<p>Few-Shotæç¤ºæ¨¡æ¿é€šè¿‡åœ¨æç¤ºä¸­æä¾›å°‘é‡ç¤ºä¾‹æ¥å¼•å¯¼å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆç¬¦åˆé¢„æœŸçš„è¾“å‡ºã€‚å®ƒç»“åˆäº†<code>ChatPromptTemplate</code>å’Œ<code>FewShotChatMessagePromptTemplate</code>ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿé€šè¿‡ç¤ºä¾‹ç†è§£ä»»åŠ¡æ¨¡å¼ã€‚</p>
<h4 data-id="heading-19">è¿™ä¸ªæœ‰ä»€ä¹ˆç”¨</h4>
<ul>
<li>æé«˜æ¨¡å‹å¯¹ç‰¹å®šä»»åŠ¡çš„ç†è§£èƒ½åŠ›</li>
<li>å‡å°‘å¯¹å¤æ‚promptå·¥ç¨‹çš„éœ€æ±‚</li>
<li>é€šè¿‡ç¤ºä¾‹å¿«é€Ÿå®šä¹‰è¾“å‡ºæ ¼å¼å’Œé£æ ¼</li>
<li>é€‚ç”¨äºæ–‡æœ¬è½¬æ¢ã€è®¡ç®—ã€åˆ†ç±»ç­‰å„ç§ä»»åŠ¡</li>
</ul>
<h4 data-id="heading-20">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> StrOutputParser
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate, FewShotChatMessagePromptTemplate
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI

<span class="hljs-comment"># 1. æ„å»ºç¤ºä¾‹æ¨¡æ¿ä¸ç¤ºä¾‹</span>
example_prompt = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{question}"</span>),
    (<span class="hljs-string">"ai"</span>, <span class="hljs-string">"{answer}"</span>),
])

examples = [
    {<span class="hljs-string">"question"</span>: <span class="hljs-string">"å¸®æˆ‘è®¡ç®—ä¸‹2+2ç­‰äºå¤šå°‘ï¼Ÿ"</span>, <span class="hljs-string">"answer"</span>: <span class="hljs-string">"4"</span>},
    {<span class="hljs-string">"question"</span>: <span class="hljs-string">"å¸®æˆ‘è®¡ç®—ä¸‹2+3ç­‰äºå¤šå°‘ï¼Ÿ"</span>, <span class="hljs-string">"answer"</span>: <span class="hljs-string">"5"</span>},
    {<span class="hljs-string">"question"</span>: <span class="hljs-string">"å¸®æˆ‘è®¡ç®—ä¸‹20*15ç­‰äºå¤šå°‘ï¼Ÿ"</span>, <span class="hljs-string">"answer"</span>: <span class="hljs-string">"300"</span>},
]

<span class="hljs-comment"># 2. æ„å»ºå°‘é‡ç¤ºä¾‹æç¤ºæ¨¡æ¿</span>
few_shot_prompt = FewShotChatMessagePromptTemplate(
    example_prompt=example_prompt,
    examples=examples,
)

<span class="hljs-comment"># 3. æ„å»ºæœ€ç»ˆæç¤ºæ¨¡æ¿</span>
prompt = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªå¯ä»¥è®¡ç®—å¤æ‚æ•°å­¦é—®é¢˜çš„èŠå¤©æœºå™¨äºº"</span>),
    few_shot_prompt,
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{question}"</span>),
])

<span class="hljs-comment"># 4. åˆ›å»ºé“¾å¹¶è°ƒç”¨</span>
llm = ChatOpenAI(model=<span class="hljs-string">"moonshot-v1-8k"</span>, temperature=<span class="hljs-number">0</span>)
chain = prompt | llm | StrOutputParser()

result = chain.invoke(<span class="hljs-string">"å¸®æˆ‘è®¡ç®—ä¸‹14*15ç­‰äºå¤šå°‘"</span>)
<span class="hljs-built_in">print</span>(result)
</code></pre>
<hr/>
<h3 data-id="heading-21">6. å›ç­”å›é€€ç­–ç•¥æ£€ç´¢å™¨</h3>
<h4 data-id="heading-22">è¿™æ˜¯ä»€ä¹ˆ</h4>
<p>å›ç­”å›é€€ï¼ˆStep-Backï¼‰æ£€ç´¢å™¨æ˜¯ä¸€ç§ç­–ç•¥ï¼Œå®ƒä¼šå°†ç”¨æˆ·çš„å…·ä½“é—®é¢˜"å›é€€"åˆ°ä¸€ä¸ªæ›´é€šç”¨æˆ–æ›´åŸºç¡€çš„é—®é¢˜ï¼Œç„¶åç”¨è¿™ä¸ªå›é€€é—®é¢˜è¿›è¡Œæ£€ç´¢ã€‚è¿™ç§æ–¹æ³•åŸºäºè¿™æ ·çš„ç†å¿µï¼šæœ‰æ—¶ä»æ›´å®è§‚çš„è§’åº¦æœç´¢ï¼Œèƒ½æ‰¾åˆ°æ›´å…¨é¢çš„ç›¸å…³ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-23">è¿™ä¸ªæœ‰ä»€ä¹ˆç”¨</h4>
<ul>
<li>è§£å†³è¿‡äºå…·ä½“çš„é—®é¢˜å¯¼è‡´æ£€ç´¢ç»“æœè¿‡å°‘çš„é—®é¢˜</li>
<li>ä»æ›´å®½æ³›çš„è§’åº¦è·å–èƒŒæ™¯ä¿¡æ¯</li>
<li>é€šè¿‡Few-Shotç¤ºä¾‹å­¦ä¹ å¦‚ä½•ç”Ÿæˆåˆé€‚çš„å›é€€é—®é¢˜</li>
<li>æé«˜å¯¹å¤æ‚ã€æŠ½è±¡é—®é¢˜çš„æ£€ç´¢æ•ˆæœ</li>
</ul>
<h4 data-id="heading-24">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>
<span class="hljs-keyword">from</span> langchain_core.callbacks <span class="hljs-keyword">import</span> CallbackManagerForRetrieverRun
<span class="hljs-keyword">from</span> langchain_core.documents <span class="hljs-keyword">import</span> Document
<span class="hljs-keyword">from</span> langchain_core.language_models <span class="hljs-keyword">import</span> BaseLanguageModel
<span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> StrOutputParser
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate, FewShotChatMessagePromptTemplate
<span class="hljs-keyword">from</span> langchain_core.retrievers <span class="hljs-keyword">import</span> BaseRetriever
<span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnablePassthrough

<span class="hljs-keyword">class</span> <span class="hljs-title class_">StepBackRetriever</span>(<span class="hljs-title class_ inherited__">BaseRetriever</span>):
    <span class="hljs-string">"""å›ç­”å›é€€æ£€ç´¢å™¨"""</span>
    retriever: BaseRetriever
    llm: BaseLanguageModel

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_relevant_documents</span>(<span class="hljs-params">
            self, query: <span class="hljs-built_in">str</span>, *, run_manager: CallbackManagerForRetrieverRun
    </span>) -&gt; <span class="hljs-type">List</span>[Document]:
        <span class="hljs-comment"># 1. æ„å»ºå°‘é‡ç¤ºä¾‹æç¤ºæ¨¡æ¿</span>
        examples = [
            {<span class="hljs-string">"input"</span>: <span class="hljs-string">"æ…•è¯¾ç½‘ä¸Šæœ‰å…³äºAIåº”ç”¨å¼€å‘çš„è¯¾ç¨‹å—ï¼Ÿ"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"æ…•è¯¾ç½‘ä¸Šæœ‰å“ªäº›è¯¾ç¨‹ï¼Ÿ"</span>},
            {<span class="hljs-string">"input"</span>: <span class="hljs-string">"æ…•å°è¯¾å‡ºç”Ÿåœ¨å“ªä¸ªå›½å®¶ï¼Ÿ"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"æ…•å°è¯¾çš„äººç”Ÿç»å†æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ"</span>},
            {<span class="hljs-string">"input"</span>: <span class="hljs-string">"å¸æœºå¯ä»¥å¼€å¿«è½¦å—ï¼Ÿ"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"å¸æœºå¯ä»¥åšä»€ä¹ˆï¼Ÿ"</span>},
        ]
        example_prompt = ChatPromptTemplate.from_messages([
            (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{input}"</span>),
            (<span class="hljs-string">"ai"</span>, <span class="hljs-string">"{output}"</span>),
        ])
        few_shot_prompt = FewShotChatMessagePromptTemplate(
            examples=examples,
            example_prompt=example_prompt,
        )

        <span class="hljs-comment"># 2. æ„å»ºç”Ÿæˆå›é€€é—®é¢˜çš„æ¨¡æ¿</span>
        prompt = ChatPromptTemplate.from_messages([
            (<span class="hljs-string">"system"</span>,
             <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸–ç•ŒçŸ¥è¯†çš„ä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯å›é€€é—®é¢˜ï¼Œå°†é—®é¢˜æ”¹è¿°ä¸ºæ›´ä¸€èˆ¬æˆ–è€…å‰ç½®é—®é¢˜ï¼Œè¿™æ ·æ›´å®¹æ˜“å›ç­”ï¼Œè¯·å‚è€ƒç¤ºä¾‹æ¥å®ç°ã€‚"</span>),
            few_shot_prompt,
            (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{question}"</span>),
        ])

        <span class="hljs-comment"># 3. æ„å»ºé“¾åº”ç”¨ï¼Œç”Ÿæˆå›é€€é—®é¢˜å¹¶æ‰§è¡Œæ£€ç´¢</span>
        chain = (
                {<span class="hljs-string">"question"</span>: RunnablePassthrough()}
                | prompt
                | self.llm
                | StrOutputParser()
                | self.retriever
        )

        <span class="hljs-keyword">return</span> chain.invoke(query)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
step_back_retriever = StepBackRetriever(
    retriever=retriever,
    llm=ChatOpenAI(model=<span class="hljs-string">"moonshot-v1-8k"</span>, temperature=<span class="hljs-number">0</span>),
)

documents = step_back_retriever.invoke(<span class="hljs-string">"äººå·¥æ™ºèƒ½ä¼šè®©ä¸–ç•Œå‘ç”Ÿç¿»å¤©è¦†åœ°çš„å˜åŒ–å—ï¼Ÿ"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-25">æ€»ç»“</h3>
<p>è¿™äº›RAGé«˜çº§æ£€ç´¢ç­–ç•¥å„æœ‰ç‰¹ç‚¹ï¼Œå¯ä»¥æ ¹æ®å®é™…åœºæ™¯é€‰æ‹©æˆ–ç»„åˆä½¿ç”¨ï¼š</p>
<ol>
<li><strong>è‡ªå®šä¹‰æ£€ç´¢å™¨</strong>ï¼šé€‚ç”¨äºéœ€è¦ç‰¹æ®Šæ£€ç´¢é€»è¾‘çš„åœºæ™¯</li>
<li><strong>Multi-Query</strong>ï¼šé€‚ç”¨äºæŸ¥è¯¢è¡¨è¿°ä¸å‡†ç¡®ã€éœ€è¦å¤šè§’åº¦æ£€ç´¢çš„åœºæ™¯</li>
<li><strong>RAG Fusion</strong>ï¼šé€‚ç”¨äºéœ€è¦æ™ºèƒ½åˆå¹¶å¤šæŸ¥è¯¢ç»“æœçš„åœºæ™¯</li>
<li><strong>é—®é¢˜åˆ†è§£</strong>ï¼šé€‚ç”¨äºå¤æ‚ã€å¤šæ–¹é¢çš„å¤åˆé—®é¢˜</li>
<li><strong>Few-Shot</strong>ï¼šé€‚ç”¨äºéœ€è¦å¼•å¯¼æ¨¡å‹ç†è§£ç‰¹å®šè¾“å‡ºæ ¼å¼çš„åœºæ™¯</li>
<li><strong>å›é€€ç­–ç•¥</strong>ï¼šé€‚ç”¨äºé—®é¢˜è¿‡äºå…·ä½“å¯¼è‡´æ£€ç´¢æ•ˆæœä¸ä½³çš„åœºæ™¯</li>
</ol>
<p>è¿™äº›ç­–ç•¥å¯ä»¥çµæ´»ç»„åˆï¼Œä¾‹å¦‚åœ¨é—®é¢˜åˆ†è§£ç­–ç•¥ä¸­ä½¿ç”¨Multi-Queryæ£€ç´¢å™¨ï¼Œæˆ–åœ¨RAG Fusionä¸­åº”ç”¨å›é€€ç­–ç•¥ï¼Œä»¥è¾¾åˆ°æœ€ä½³çš„æ£€ç´¢æ•ˆæœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C2UåŠ¨æ€ç¼–è¯‘+NLPè‡ªå­¦ä¹ ï¼šBridgeCode ä¸ä¼ä¸šåŸæœ‰ä»£ç é›†æˆæ¶æ„è¯¦è§£]]></title>    <link>https://juejin.cn/post/7603389033041575990</link>    <guid>https://juejin.cn/post/7603389033041575990</guid>    <pubDate>2026-02-06T07:15:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603389033041575990" data-draft-id="7603352061506207750" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C2UåŠ¨æ€ç¼–è¯‘+NLPè‡ªå­¦ä¹ ï¼šBridgeCode ä¸ä¼ä¸šåŸæœ‰ä»£ç é›†æˆæ¶æ„è¯¦è§£"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-06T07:15:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C2UåŠ¨æ€ç¼–è¯‘+NLPè‡ªå­¦ä¹ ï¼šBridgeCode ä¸ä¼ä¸šåŸæœ‰ä»£ç é›†æˆæ¶æ„è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:15:05.000Z" title="Fri Feb 06 2026 07:15:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‘˜è¦</h2>
<p>åœ¨ä¼ä¸šçº§åº”ç”¨å¼€å‘ä¸­ï¼Œå¦‚ä½•å°†è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ä¸ç°æœ‰ä»£ç åº“æ— ç¼é›†æˆæ˜¯ä¸€ä¸ªé•¿æœŸå­˜åœ¨çš„æŒ‘æˆ˜ã€‚Ooder D2B (Design to Bridge) æ¡†æ¶é€šè¿‡ BridgeCode æœºåˆ¶ï¼Œå·§å¦™åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æ BridgeCode çš„æ ¸å¿ƒæœºåˆ¶ï¼Œæ­ç¤ºå®ƒå¦‚ä½•é€šè¿‡ C2U åŠ¨æ€ç¼–è¯‘ã€NLP Module è‡ªå­¦ä¹ ã€é¡¹ç›®çº§æ¨¡æ¿è§„åˆ™é…ç½®ç­‰æŠ€æœ¯ï¼Œä¸ä¼ä¸šåŸæœ‰ä»£ç å®Œç¾èåˆã€‚</p>
<hr/>
<h2 data-id="heading-1">ç›®å½•</h2>
<ol>
<li><a href="#1-%25E5%25BC%2595%25E8%25A8%2580" title="#1-%25E5%25BC%2595%25E8%25A8%2580">å¼•è¨€</a></li>
<li><a href="#2-c2u-%25E5%258A%25A8%25E6%2580%2581%25E7%25BC%2596%25E8%25AF%2591%25E6%259C%25BA%25E5%2588%25B6%25E6%25B7%25B1%25E5%25BA%25A6%25E8%25A7%25A3%25E6%259E%2590" title="#2-c2u-%25E5%258A%25A8%25E6%2580%2581%25E7%25BC%2596%25E8%25AF%2591%25E6%259C%25BA%25E5%2588%25B6%25E6%25B7%25B1%25E5%25BA%25A6%25E8%25A7%25A3%25E6%259E%2590">C2U åŠ¨æ€ç¼–è¯‘æœºåˆ¶æ·±åº¦è§£æ</a></li>
<li><a href="#3-nlp-module-%25E8%2587%25AA%25E5%25AD%25A6%25E4%25B9%25A0%25E6%259C%25BA%25E5%2588%25B6" title="#3-nlp-module-%25E8%2587%25AA%25E5%25AD%25A6%25E4%25B9%25A0%25E6%259C%25BA%25E5%2588%25B6">NLP Module è‡ªå­¦ä¹ æœºåˆ¶</a></li>
<li><a href="#4-%25E9%25A1%25B9%25E7%259B%25AE%25E7%25BA%25A7%25E6%25A8%25A1%25E6%259D%25BF%25E8%25A7%2584%25E5%2588%2599%25E9%2585%258D%25E7%25BD%25AE" title="#4-%25E9%25A1%25B9%25E7%259B%25AE%25E7%25BA%25A7%25E6%25A8%25A1%25E6%259D%25BF%25E8%25A7%2584%25E5%2588%2599%25E9%2585%258D%25E7%25BD%25AE">é¡¹ç›®çº§æ¨¡æ¿è§„åˆ™é…ç½®</a></li>
<li><a href="#5-bridgecode-%25E6%25A0%25B8%25E5%25BF%2583%25E6%259E%25B6%25E6%259E%2584" title="#5-bridgecode-%25E6%25A0%25B8%25E5%25BF%2583%25E6%259E%25B6%25E6%259E%2584">BridgeCode æ ¸å¿ƒæ¶æ„</a></li>
<li><a href="#6-%25E6%25A8%25A1%25E6%259D%25BF%25E7%2594%259F%25E6%2580%2581%25E4%25B8%258E%25E8%2587%25AA%25E5%25AD%25A6%25E4%25B9%25A0" title="#6-%25E6%25A8%25A1%25E6%259D%25BF%25E7%2594%259F%25E6%2580%2581%25E4%25B8%258E%25E8%2587%25AA%25E5%25AD%25A6%25E4%25B9%25A0">æ¨¡æ¿ç”Ÿæ€ä¸è‡ªå­¦ä¹ </a></li>
<li><a href="#7-%25E6%25A1%2586%25E6%259E%25B6%25E4%25BC%2598%25E5%258A%25BF%25E6%2580%25BB%25E7%25BB%2593" title="#7-%25E6%25A1%2586%25E6%259E%25B6%25E4%25BC%2598%25E5%258A%25BF%25E6%2580%25BB%25E7%25BB%2593">æ¡†æ¶ä¼˜åŠ¿æ€»ç»“</a></li>
<li><a href="#8-%25E6%259C%2580%25E4%25BD%25B3%25E5%25AE%259E%25E8%25B7%25B5" title="#8-%25E6%259C%2580%25E4%25BD%25B3%25E5%25AE%259E%25E8%25B7%25B5">æœ€ä½³å®è·µ</a></li>
<li><a href="#9-%25E6%2580%25BB%25E7%25BB%2593" title="#9-%25E6%2580%25BB%25E7%25BB%2593">æ€»ç»“</a></li>
</ol>
<hr/>
<h2 data-id="heading-2">1. å¼•è¨€</h2>
<h3 data-id="heading-3">1.1 ä»£ç ç”Ÿæˆä¸é›†æˆçš„æŒ‘æˆ˜</h3>
<p>åœ¨ä¼ä¸šçº§åº”ç”¨å¼€å‘ä¸­ï¼Œä»£ç ç”ŸæˆæŠ€æœ¯å·²ç»è¢«å¹¿æ³›åº”ç”¨ï¼Œä½†å¦‚ä½•å°†ç”Ÿæˆçš„ä»£ç ä¸ç°æœ‰ä»£ç åº“æ— ç¼é›†æˆä»ç„¶æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚ä¼ ç»Ÿçš„æ–¹æ³•å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li><strong>ä»£ç å†²çª</strong>ï¼šç”Ÿæˆçš„ä»£ç å¯èƒ½è¦†ç›–æˆ–ä¸æ‰‹åŠ¨ç¼–å†™çš„ä»£ç å†²çª</li>
<li><strong>ç»´æŠ¤å›°éš¾</strong>ï¼šç”Ÿæˆçš„ä»£ç éš¾ä»¥ç»´æŠ¤ï¼Œä¿®æ”¹åé‡æ–°ç”Ÿæˆä¼šä¸¢å¤±å˜æ›´</li>
<li><strong>é›†æˆå¤æ‚</strong>ï¼šç”Ÿæˆçš„ä»£ç éœ€è¦æ‰‹åŠ¨é…ç½®æ‰èƒ½ä¸ç°æœ‰ç³»ç»Ÿé›†æˆ</li>
<li><strong>ç‰ˆæœ¬ç®¡ç†</strong>ï¼šç”Ÿæˆçš„ä»£ç éš¾ä»¥çº³å…¥ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šå¼€å‘äººå‘˜éš¾ä»¥ç†è§£ç”Ÿæˆçš„ä»£ç ï¼Œå½±å“å›¢é˜Ÿåä½œ</li>
</ol>
<h3 data-id="heading-4">1.2 Ooder D2B çš„è§£å†³æ–¹æ¡ˆ</h3>
<p>Ooder D2B (Design to Bridge) æ¡†æ¶é€šè¿‡ BridgeCode æœºåˆ¶ï¼Œæä¾›äº†ä¸€ç§å…¨æ–°çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li><strong>C2U åŠ¨æ€ç¼–è¯‘</strong>ï¼šæ”¯æŒè¿è¡Œæ—¶åŠ¨æ€ç¼–è¯‘å’ŒåŠ è½½ä»£ç ï¼Œæ— éœ€é‡å¯åº”ç”¨</li>
<li><strong>NLP Module è‡ªå­¦ä¹ </strong>ï¼šé€šè¿‡ AI è¾…åŠ©å®Œæˆå¤æ‚çš„æ¨¡æ¿åº“ç»´æŠ¤</li>
<li><strong>é¡¹ç›®çº§é…ç½®</strong>ï¼šæ¯ä¸ªé¡¹ç›®å¯ä»¥ç‹¬ç«‹è®¾ç½®è§„åˆ™å’Œæ¨¡æ¿</li>
<li><strong>å…ƒæ•°æ®é©±åŠ¨</strong>ï¼šé€šè¿‡ DSM (Design System Model) å…ƒæ•°æ®é©±åŠ¨ä»£ç ç”Ÿæˆ</li>
<li><strong>VFS ç®¡ç†</strong>ï¼šé€šè¿‡è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿç®¡ç†ç”Ÿæˆçš„ä»£ç ï¼Œæ”¯æŒç‰ˆæœ¬æ§åˆ¶</li>
</ol>
<h3 data-id="heading-5">1.3 æœ¬æ–‡ç»“æ„</h3>
<p>æœ¬æ–‡å°†ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ·±å…¥å‰–æ BridgeCode æœºåˆ¶ï¼š</p>
<ul>
<li>C2U åŠ¨æ€ç¼–è¯‘æœºåˆ¶çš„æ·±åº¦è§£æ</li>
<li>NLP Module è‡ªå­¦ä¹ æœºåˆ¶çš„åŸç†</li>
<li>é¡¹ç›®çº§æ¨¡æ¿è§„åˆ™é…ç½®çš„ä½“ç³»</li>
<li>BridgeCode æ ¸å¿ƒæ¶æ„è®¾è®¡</li>
<li>æ¨¡æ¿ç”Ÿæ€ä¸è‡ªå­¦ä¹ æœºåˆ¶</li>
<li>æ¡†æ¶ä¼˜åŠ¿æ€»ç»“</li>
<li>æœ€ä½³å®è·µ</li>
</ul>
<hr/>
<h2 data-id="heading-6">2. C2U åŠ¨æ€ç¼–è¯‘æœºåˆ¶æ·±åº¦è§£æ</h2>
<h3 data-id="heading-7">2.1 C2UFactory æ ¸å¿ƒèŒè´£</h3>
<p>C2UFactory æ˜¯ Ooder æ¡†æ¶ä¸­è´Ÿè´£åŠ¨æ€ç¼–è¯‘å’Œ UI æ¨¡å—ç®¡ç†çš„æ ¸å¿ƒå·¥å‚ç±»ã€‚å®ƒçš„ä¸»è¦èŒè´£åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>åŠ¨æ€ç¼–è¯‘</strong>ï¼šæ”¯æŒè¿è¡Œæ—¶åŠ¨æ€ç¼–è¯‘ UI æ¨¡å—</li>
<li><strong>æ¨¡å—ç®¡ç†</strong>ï¼šç®¡ç† UI æ¨¡å—çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li><strong>æ¨¡æ¿æ¸²æŸ“</strong>ï¼šä½¿ç”¨ MVEL è¡¨è¾¾å¼å¼•æ“æ¸²æŸ“æ¨¡æ¿</li>
<li><strong>ç¼“å­˜ç®¡ç†</strong>ï¼šæä¾›æ¨¡å—ç¼“å­˜æœºåˆ¶ï¼Œæé«˜æ€§èƒ½</li>
</ol>
<p><strong>æ ¸å¿ƒä»£ç ä½ç½®</strong>ï¼š</p>
<h3 data-id="heading-8">2.2 åŠ¨æ€ç¼–è¯‘åŸç†</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27af9895a1334979addd8a64ebe8e689~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966904&amp;x-signature=hn7%2FllzK2eDp%2FxI36czhVNUEqwo%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-9">2.2.1 æ ¸å¿ƒæ–¹æ³•åˆ†æ</h4>
<p>C2UFactory æä¾›äº†å¤šä¸ªæ ¸å¿ƒæ–¹æ³•æ¥å®ç°åŠ¨æ€ç¼–è¯‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŠ¨æ€ç¼–è¯‘ MODULE</span>
<span class="hljs-keyword">public</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ModuleUIComponent</span>&gt; UIModule&lt;T&gt; <span class="hljs-title function_">dynBuild</span><span class="hljs-params">(Class customClass, Map&lt;String, ?&gt; valueMap)</span>

<span class="hljs-comment">// åŠ¨æ€ç¼–è¯‘ MODULEï¼ˆå®Œæ•´ç‰ˆï¼‰</span>
<span class="hljs-keyword">public</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ModuleUIComponent</span>&gt; UIModule&lt;T&gt; <span class="hljs-title function_">dynModule</span><span class="hljs-params">(MethodConfig methodConfig, Class&lt;T&gt; customClass, UIModule <span class="hljs-keyword">module</span>, Map&lt;String, ?&gt; valueMap)</span>

<span class="hljs-comment">// è·å–è§†å›¾ï¼ˆæ”¯æŒç¼“å­˜ï¼‰</span>
<span class="hljs-keyword">public</span> UIModule <span class="hljs-title function_">getViewByMethod</span><span class="hljs-params">(MethodConfig methodAPIBean, String projectName, Map&lt;String, ?&gt; valueMap)</span>

<span class="hljs-comment">// åˆ›å»ºçœŸå®è§†å›¾</span>
<span class="hljs-keyword">public</span> UIModule <span class="hljs-title function_">createRealView</span><span class="hljs-params">(MethodConfig methodAPIBean, Class customClass, String projectName, Map&lt;String, ?&gt; valueMap, <span class="hljs-type">boolean</span> isDyn)</span>
</code></pre>
<h4 data-id="heading-10">2.2.2 åŠ¨æ€ç¼–è¯‘æµç¨‹</h4>
<p>C2UFactory çš„åŠ¨æ€ç¼–è¯‘æµç¨‹å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-11">2.3 MVEL è¡¨è¾¾å¼å¼•æ“</h3>
<p>C2UFactory ä½¿ç”¨ MVEL (MVFLEX Expression Language) è¡¨è¾¾å¼å¼•æ“è¿›è¡Œæ¨¡æ¿æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ ¸å¿ƒæ¸²æŸ“ä»£ç </span>
<span class="hljs-type">String</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> (String) TemplateRuntime.eval(json, MvelDSMRoot.getInstance(), perContext(oTopModule, component.getUIModule()));
<span class="hljs-type">T</span> <span class="hljs-variable">moduleComponent</span> <span class="hljs-operator">=</span> JSONObject.parseObject(obj, customClass);
</code></pre>
<p><strong>MVEL çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ol>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šæ¯”ä¼ ç»Ÿçš„ JSP/FreeMarker æ›´å¿«</li>
<li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒå¤æ‚çš„è¡¨è¾¾å¼å’Œé€»è¾‘</li>
<li><strong>è½»é‡çº§</strong>ï¼šæ— éœ€é¢å¤–çš„ä¾èµ–</li>
<li><strong>æ˜“ç”¨æ€§</strong>ï¼šè¯­æ³•ç®€æ´ï¼Œæ˜“äºç†è§£</li>
</ol>
<h3 data-id="heading-12">2.4 åŠ¨æ€ç¼–è¯‘çš„å…³é”®ç‰¹æ€§</h3>
<h4 data-id="heading-13">2.4.1 çº¿ç¨‹å®‰å…¨</h4>
<p>C2UFactory ä½¿ç”¨çº¿ç¨‹é”ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">THREAD_LOCK</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Thread Lock"</span>;

<span class="hljs-keyword">public</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ModuleUIComponent</span>&gt; UIModule&lt;T&gt; <span class="hljs-title function_">dynModule</span><span class="hljs-params">(MethodConfig methodConfig, Class&lt;T&gt; customClass, UIModule <span class="hljs-keyword">module</span>, Map&lt;String, ?&gt; valueMap)</span> {
    <span class="hljs-keyword">synchronized</span> (<span class="hljs-keyword">module</span>.getClassName()) {
        <span class="hljs-comment">// åŠ¨æ€ç¼–è¯‘é€»è¾‘</span>
    }
}
</code></pre>
<h4 data-id="heading-14">2.4.2 ç¼“å­˜æœºåˆ¶</h4>
<p>C2UFactory æä¾›äº†å¤šå±‚ç¼“å­˜æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. çº¿ç¨‹ç¼“å­˜</span>
<span class="hljs-type">Map</span> <span class="hljs-variable">contextMap</span> <span class="hljs-operator">=</span> JDSActionContext.getActionContext().getContext();

<span class="hljs-comment">// 2. æ—¶é—´ç¼“å­˜</span>
<span class="hljs-type">Long</span> <span class="hljs-variable">createTime</span> <span class="hljs-operator">=</span> (Long) contextMap.get(url + <span class="hljs-string">"[TIME]"</span>);
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">module</span> == <span class="hljs-literal">null</span> &amp;&amp; (createTime == <span class="hljs-literal">null</span> || System.currentTimeMillis() - createTime &gt; <span class="hljs-number">500</span>)) {
    <span class="hljs-comment">// é‡æ–°åŠ è½½</span>
}

<span class="hljs-comment">// 3. æ¨¡å—ç¼“å­˜</span>
<span class="hljs-keyword">static</span> Map&lt;String, C2UFactory&gt; managerMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, C2UFactory&gt;();
</code></pre>
<h4 data-id="heading-15">2.4.3 è‡ªå®šä¹‰ç»„ä»¶æ”¯æŒ</h4>
<p>C2UFactory æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ”¯æŒè‡ªå®šä¹‰ç±»</span>
<span class="hljs-keyword">if</span> (customClass == <span class="hljs-literal">null</span>) {
    customClass = methodConfig.getRealViewClass();
}

<span class="hljs-comment">// æ”¯æŒåŠ¨æ€åŠ è½½è§†å›¾</span>
<span class="hljs-keyword">if</span> (methodConfig.getDynDataBean() != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">module</span>.getRealClassName().equals(<span class="hljs-keyword">module</span>.getClassName())) {
    customClass = (Class&lt;T&gt;) CustomDynLoadView.class;
}
</code></pre>
<hr/>
<h2 data-id="heading-16">3. NLP Module è‡ªå­¦ä¹ æœºåˆ¶</h2>
<h3 data-id="heading-17">3.1 FullNlpComponentConverter æ¦‚è¿°</h3>
<p>FullNlpComponentConverter æ˜¯ Ooder æ¡†æ¶ä¸­è´Ÿè´£å°†è‡ªç„¶è¯­è¨€å’Œé…ç½®è½¬æ¢ä¸º NLP ç»„ä»¶çš„æ ¸å¿ƒè½¬æ¢å™¨ã€‚å®ƒæ”¯æŒä¸‰ç§è½¬æ¢æ¨¡å¼ï¼š</p>
<ol>
<li><strong>LLM_ONLY</strong>ï¼šåªä½¿ç”¨ LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰è¿›è¡Œè½¬æ¢</li>
<li><strong>SKILLS_ONLY</strong>ï¼šåªä½¿ç”¨ Skillsï¼ˆæŠ€èƒ½ï¼‰è¿›è¡Œè½¬æ¢</li>
<li><strong>HYBRID</strong>ï¼šæ··åˆä½¿ç”¨ LLM å’Œ Skills</li>
</ol>
<p><strong>æ ¸å¿ƒä»£ç ä½ç½®</strong>ï¼šFullNlpComponentConverter.java</p>
<h3 data-id="heading-18">3.2 è½¬æ¢æ¨¡å¼è¯¦è§£</h3>
<h4 data-id="heading-19">3.2.1 LLM_ONLY æ¨¡å¼</h4>
<p>åªä½¿ç”¨ LLM è¿›è¡Œè½¬æ¢ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">case</span> LLM_ONLY:
    <span class="hljs-keyword">if</span> (llmInterface != <span class="hljs-literal">null</span>) {
        config = llmInterface.convertNaturalLanguageToConfig(naturalLanguage, componentType);
    }
    <span class="hljs-keyword">break</span>;
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>éœ€è¦ç†è§£å¤æ‚çš„è‡ªç„¶è¯­è¨€æè¿°</li>
<li>éœ€è¦ç”Ÿæˆåˆ›æ–°çš„ç»„ä»¶é…ç½®</li>
<li>å¯¹å‡†ç¡®æ€§è¦æ±‚æé«˜çš„åœºæ™¯</li>
</ul>
<h4 data-id="heading-20">3.2.2 SKILLS_ONLY æ¨¡å¼</h4>
<p>åªä½¿ç”¨ Skills è¿›è¡Œè½¬æ¢ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">case</span> SKILLS_ONLY:
    <span class="hljs-keyword">if</span> (skillsBridge != <span class="hljs-literal">null</span>) {
        config = skillsBridge.processNaturalLanguage(naturalLanguage, componentType);
    }
    <span class="hljs-keyword">break</span>;
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>æœ‰æ˜ç¡®çš„è½¬æ¢è§„åˆ™</li>
<li>éœ€è¦å¿«é€Ÿå“åº”</li>
<li>å¯¹ç¨³å®šæ€§è¦æ±‚æé«˜çš„åœºæ™¯</li>
</ul>
<h4 data-id="heading-21">3.2.3 HYBRID æ¨¡å¼</h4>
<p>æ··åˆä½¿ç”¨ LLM å’Œ Skillsï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">case</span> HYBRID:
<span class="hljs-keyword">default</span>:
    <span class="hljs-comment">// å…ˆå°è¯•ä½¿ç”¨ Skillsï¼Œå¤±è´¥åä½¿ç”¨ LLM</span>
    <span class="hljs-keyword">if</span> (skillsBridge != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">try</span> {
            config = skillsBridge.processNaturalLanguage(naturalLanguage, componentType);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// Skills å¤±è´¥ï¼Œä½¿ç”¨ LLM</span>
            <span class="hljs-keyword">if</span> (llmInterface != <span class="hljs-literal">null</span>) {
                config = llmInterface.convertNaturalLanguageToConfig(naturalLanguage, componentType);
            }
        }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (llmInterface != <span class="hljs-literal">null</span>) {
        config = llmInterface.convertNaturalLanguageToConfig(naturalLanguage, componentType);
    }
    <span class="hljs-keyword">break</span>;
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>éœ€è¦å…¼é¡¾å‡†ç¡®æ€§å’Œçµæ´»æ€§</li>
<li>éœ€è¦å¿«é€Ÿå“åº”ä½†ä¹Ÿè¦ä¿è¯å‡†ç¡®æ€§</li>
<li>å¤§å¤šæ•°ç”Ÿäº§ç¯å¢ƒåœºæ™¯</li>
</ul>
<h3 data-id="heading-22">3.3 NlpComponentFactory ç»„ä»¶å·¥å‚</h3>
<h4 data-id="heading-23">3.3.1 å·¥å‚æ¨¡å¼</h4>
<p>NlpComponentFactory ä½¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»ºå„ç§ Nlp*UIComponent å®ä¾‹ï¼Œæ”¯æŒè¶…è¿‡ 30 ç§ç»„ä»¶ç±»å‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b0532c847044046847839fea67db9d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966904&amp;x-signature=qq0mB4WGCLMuW1HC7eScyNbxT6o%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>NlpComponentFactory ä½¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»ºå„ç§ Nlp*UIComponent å®ä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NlpComponentFactory</span> {
    <span class="hljs-keyword">private</span> Map&lt;String, ComponentCreator&gt; creatorMap;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">NlpComponentFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.creatorMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        initializeCreators();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initializeCreators</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ³¨å†Œç»„ä»¶åˆ›å»ºå™¨</span>
        registerCreator(<span class="hljs-string">"Block"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpBlockUIComponent</span>());
        registerCreator(<span class="hljs-string">"ButtonLayout"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpButtonLayoutUIComponent</span>());
        registerCreator(<span class="hljs-string">"ContentBlock"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpContentBlockUIComponent</span>());
        registerCreator(<span class="hljs-string">"CustomLayout"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpCustomLayoutUIComponent</span>());
        registerCreator(<span class="hljs-string">"Div"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpDivUIComponent</span>());
        registerCreator(<span class="hljs-string">"ECharts"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpEChartsUIComponent</span>());
        registerCreator(<span class="hljs-string">"FChart"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpFChartUIComponent</span>());
        registerCreator(<span class="hljs-string">"Gallery"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpGalleryUIComponent</span>());
        registerCreator(<span class="hljs-string">"Group"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpGroupUIComponent</span>());
        registerCreator(<span class="hljs-string">"MTree"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpMTreeUIComponent</span>());
        registerCreator(<span class="hljs-string">"Opinion"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpOpinionUIComponent</span>());
        registerCreator(<span class="hljs-string">"Panel"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpPanelUIComponent</span>());
        registerCreator(<span class="hljs-string">"PopTree"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpPopTreeUIComponent</span>());
        registerCreator(<span class="hljs-string">"SVGPaper"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpSVGPaperUIComponent</span>());
        registerCreator(<span class="hljs-string">"Tabs"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpTabsUIComponent</span>());
        registerCreator(<span class="hljs-string">"TitleBlock"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpTitleBlockUIComponent</span>());
        registerCreator(<span class="hljs-string">"Tree"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpTreeUIComponent</span>());
        registerCreator(<span class="hljs-string">"ClassForm"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpClassFormUIComponent</span>());
        registerCreator(<span class="hljs-string">"MForm"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpMFormUIComponent</span>());
        registerCreator(<span class="hljs-string">"TableForm"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpTableFormUIComponent</span>());
        registerCreator(<span class="hljs-string">"Grid"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpGridUIComponent</span>());
        registerCreator(<span class="hljs-string">"MGrid"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpMGridUIComponent</span>());
        registerCreator(<span class="hljs-string">"TableGrid"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpTableGridUIComponent</span>());
        registerCreator(<span class="hljs-string">"MainIndex"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpMainIndexUIComponent</span>());
        registerCreator(<span class="hljs-string">"ButtonViews"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpButtonViewsUIComponent</span>());
        registerCreator(<span class="hljs-string">"FoldingTabs"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpFoldingTabsUIComponent</span>());
        registerCreator(<span class="hljs-string">"Main"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpMainUIComponent</span>());
        registerCreator(<span class="hljs-string">"MButtonViews"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpMButtonViewsUIComponent</span>());
        registerCreator(<span class="hljs-string">"MNavButtonViews"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpMNavButtonViewsUIComponent</span>());
        registerCreator(<span class="hljs-string">"NavButtonLayout"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpNavButtonLayoutUIComponent</span>());
        registerCreator(<span class="hljs-string">"NavFoldingTree"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpNavFoldingTreeUIComponent</span>());
        registerCreator(<span class="hljs-string">"NavGallery"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpNavGalleryUIComponent</span>());
        registerCreator(<span class="hljs-string">"NavGroup"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpNavGroupUIComponent</span>());
        registerCreator(<span class="hljs-string">"NavMenuBar"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpNavMenuBarUIComponent</span>());
        registerCreator(<span class="hljs-string">"NavTabs"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpNavTabsUIComponent</span>());
        registerCreator(<span class="hljs-string">"NavTree"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpNavTreeUIComponent</span>());
        registerCreator(<span class="hljs-string">"Stacks"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">NlpStacksUIComponent</span>());
    }
}
</code></pre>
<h4 data-id="heading-24">3.3.2 æ”¯æŒçš„ç»„ä»¶ç±»å‹</h4>
<p>NlpComponentFactory æ”¯æŒè¶…è¿‡ 30 ç§ç»„ä»¶ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š</p>
<p><strong>åŸºç¡€ç»„ä»¶</strong>ï¼š</p>
<ul>
<li>Blockã€Divã€Panelã€Group</li>
<li>Formã€Gridã€Treeã€Gallery</li>
<li>Tabsã€Stacksã€Layout</li>
</ul>
<p><strong>å¯¼èˆªç»„ä»¶</strong>ï¼š</p>
<ul>
<li>NavButtonViewsã€NavGalleryã€NavGroup</li>
<li>NavMenuBarã€NavTabsã€NavTree</li>
<li>NavButtonLayoutã€NavFoldingTree</li>
</ul>
<p><strong>è¡¨å•ç»„ä»¶</strong>ï¼š</p>
<ul>
<li>ClassFormã€MFormã€TableForm</li>
<li>ButtonLayoutã€ContentBlockã€TitleBlock</li>
</ul>
<p><strong>å›¾è¡¨ç»„ä»¶</strong>ï¼š</p>
<ul>
<li>EChartsã€FChart</li>
<li>SVGPaper</li>
</ul>
<p><strong>ä¸»ç»„ä»¶</strong>ï¼š</p>
<ul>
<li>MainIndexã€Main</li>
<li>MButtonViewsã€MNavButtonViews</li>
</ul>
<h3 data-id="heading-25">3.4 LLM å’Œ Skills æ¥å£</h3>
<h4 data-id="heading-26">3.4.1 LLMInterface æ¥å£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">LLMInterface</span> {
    Object <span class="hljs-title function_">convertNaturalLanguageToConfig</span><span class="hljs-params">(String naturalLanguage, String componentType)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">initialize</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span>;
    String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>;
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInitialized</span><span class="hljs-params">()</span>;
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>å°†è‡ªç„¶è¯­è¨€è½¬æ¢ä¸ºç»„ä»¶é…ç½®</li>
<li>æ”¯æŒå¤šç§ LLM æ¨¡å‹</li>
<li>æä¾›åˆå§‹åŒ–å’Œå…³é—­æœºåˆ¶</li>
</ul>
<h4 data-id="heading-27">3.4.2 SkillsBridge æ¥å£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SkillsBridge</span> {
    Object <span class="hljs-title function_">processNaturalLanguage</span><span class="hljs-params">(String naturalLanguage, String componentType)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerSkill</span><span class="hljs-params">(String skillName, Object skill)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">initialize</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span>;
    String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>;
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInitialized</span><span class="hljs-params">()</span>;
    Map&lt;String, Object&gt; <span class="hljs-title function_">getSkills</span><span class="hljs-params">()</span>;
    Object <span class="hljs-title function_">getSkill</span><span class="hljs-params">(String skillName)</span>;
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>å¤„ç†è‡ªç„¶è¯­è¨€å¹¶è½¬æ¢ä¸ºç»„ä»¶é…ç½®</li>
<li>æ³¨å†Œå’Œç®¡ç†æŠ€èƒ½</li>
<li>æ”¯æŒæŠ€èƒ½çš„åŠ¨æ€æ‰©å±•</li>
</ul>
<h3 data-id="heading-28">3.5 è‡ªå­¦ä¹ æœºåˆ¶åŸç†</h3>
<h4 data-id="heading-29">3.5.1 æŠ€èƒ½æ³¨å†Œæœºåˆ¶</h4>
<p>SkillsBridge æ”¯æŒåŠ¨æ€æ³¨å†ŒæŠ€èƒ½ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerSkill</span><span class="hljs-params">(String skillName, Object skill)</span> {
    skills.put(skillName, skill);
}
</code></pre>
<p><strong>è‡ªå­¦ä¹ è¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>å¼€å‘è€…å®šä¹‰æŠ€èƒ½è§„åˆ™</li>
<li>é€šè¿‡ registerSkill æ³¨å†ŒæŠ€èƒ½</li>
<li>åœ¨è½¬æ¢æ—¶è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æŠ€èƒ½</li>
<li>æŒç»­ä¼˜åŒ–æŠ€èƒ½è§„åˆ™</li>
</ol>
<h4 data-id="heading-30">3.5.2 æ··åˆè½¬æ¢ç­–ç•¥</h4>
<p>HYBRID æ¨¡å¼çš„æ··åˆè½¬æ¢ç­–ç•¥ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72316b5196914b378380061ba5e02447~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966904&amp;x-signature=PFTgx8JKMz1fJfTPd2NVnYO%2BSfw%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ol>
<li><strong>å¿«é€Ÿå“åº”</strong>ï¼šSkills é€šå¸¸æ¯” LLM æ›´å¿«</li>
<li><strong>é«˜å‡†ç¡®æ€§</strong>ï¼šLLM å¯ä»¥å¤„ç†å¤æ‚åœºæ™¯</li>
<li><strong>é«˜ç¨³å®šæ€§</strong>ï¼šSkills å¤±è´¥æ—¶è‡ªåŠ¨é™çº§åˆ° LLM</li>
<li><strong>æŒç»­ä¼˜åŒ–</strong>ï¼šå¯ä»¥ä¸æ–­ä¼˜åŒ– Skills è§„åˆ™</li>
</ol>
<hr/>
<h2 data-id="heading-31">4. é¡¹ç›®çº§æ¨¡æ¿è§„åˆ™é…ç½®</h2>
<h3 data-id="heading-32">4.1 UIPackagePathType æšä¸¾</h3>
<p>UIPackagePathType å®šä¹‰äº† 30+ ç§ä¸åŒçš„åŒ…è·¯å¾„ç±»å‹ï¼Œæ¯ç§ç±»å‹å¯¹åº”ä¸åŒçš„ç³»ç»Ÿæ¨¡å—ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/482f90db22d443bba5623b293bc59415~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966904&amp;x-signature=yAqcpqiKAyrzaInUFwMOPPGWTl8%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">UIPackagePathType</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IconEnumstype</span> {
    <span class="hljs-comment">// ç”¨æˆ·å·¥ç¨‹</span>
    App(<span class="hljs-string">"App"</span>, <span class="hljs-string">"/App/"</span>, <span class="hljs-string">"ç”¨æˆ·å·¥ç¨‹"</span>, UIPackageType.sys, <span class="hljs-string">"ri-node-tree"</span>),
    
    <span class="hljs-comment">// æµç¨‹åº”ç”¨</span>
    bpm(<span class="hljs-string">"bpm"</span>, <span class="hljs-string">"/bpm/"</span>, <span class="hljs-string">"æµç¨‹åº”ç”¨"</span>, UIPackageType.custom, <span class="hljs-string">"ri-node-tree"</span>),
    bpmadmin(<span class="hljs-string">"bpmadmin"</span>, <span class="hljs-string">"/bpm/admin/"</span>, <span class="hljs-string">"æµç¨‹é…ç½®"</span>, UIPackageType.admin, <span class="hljs-string">"ri-settings-3-line"</span>),
    custom(<span class="hljs-string">"bpmcustom"</span>, <span class="hljs-string">"/bpm/custom/"</span>, <span class="hljs-string">"æµç¨‹ç¤ºä¾‹"</span>, UIPackageType.custom, <span class="hljs-string">"ri-flow-chart-line"</span>),
    bpmdisplay(<span class="hljs-string">"bpmdisplay"</span>, <span class="hljs-string">"/bpm/custom/display/"</span>, <span class="hljs-string">"æµè½¬æ§åˆ¶"</span>, UIPackageType.custom, <span class="hljs-string">"ri-exchange-line"</span>),
    bpmlist(<span class="hljs-string">"bpmlist"</span>, <span class="hljs-string">"/bpm/custom/list/"</span>, <span class="hljs-string">"å·¥ä½œæµ"</span>, UIPackageType.custom, <span class="hljs-string">"ri-list-check-line"</span>),
    bpmform(<span class="hljs-string">"bpmform"</span>, <span class="hljs-string">"/bpm/form/"</span>, <span class="hljs-string">"å·¥ä½œæµè¡¨å•"</span>, UIPackageType.custom, <span class="hljs-string">"ri-file-line"</span>),
    
    <span class="hljs-comment">// è¡¨å•æ’ä»¶</span>
    formplugins(<span class="hljs-string">"formplugins"</span>, <span class="hljs-string">"/fdtform/plugins"</span>, <span class="hljs-string">"è¡¨å•æ’ä»¶"</span>, UIPackageType.custom, <span class="hljs-string">"ri-puzzle-line"</span>),
    
    <span class="hljs-comment">// ç”¨æˆ·å®šä¹‰</span>
    img(<span class="hljs-string">"img"</span>, <span class="hljs-string">"/img/"</span>, <span class="hljs-string">"å›¾ç‰‡"</span>, UIPackageType.userdef, <span class="hljs-string">"ri-image-line"</span>),
    css(<span class="hljs-string">"css"</span>, <span class="hljs-string">"/css/"</span>, <span class="hljs-string">"æ ·å¼"</span>, UIPackageType.userdef, <span class="hljs-string">"ri-css3-line"</span>),
    
    <span class="hljs-comment">// JAVA ç¼–è¯‘</span>
    java(<span class="hljs-string">"java"</span>, <span class="hljs-string">"/java/"</span>, <span class="hljs-string">"JAVAç¼–è¯‘"</span>, UIPackageType.esd, <span class="hljs-string">"ri-code-box-line"</span>),
    debugproject(<span class="hljs-string">"debugproject"</span>, <span class="hljs-string">"/debugproject/"</span>, <span class="hljs-string">"é¢„è§ˆ"</span>, UIPackageType.esd, <span class="hljs-string">"ri-code-box-line"</span>),
    
    <span class="hljs-comment">// åµŒå…¥æ¨¡å—</span>
    Module(<span class="hljs-string">"Module"</span>, <span class="hljs-string">"/Module/"</span>, <span class="hljs-string">"åµŒå…¥æ¨¡å—"</span>, UIPackageType.userdef, <span class="hljs-string">"ri-puzzle-line"</span>),
    
    <span class="hljs-comment">// é¢„è§ˆ</span>
    preview(<span class="hljs-string">"preview"</span>, <span class="hljs-string">"/preview/"</span>, <span class="hljs-string">"é¢„è§ˆ"</span>, UIPackageType.admin, <span class="hljs-string">"ri-search-line"</span>),
    Debug(<span class="hljs-string">"Debug"</span>, <span class="hljs-string">"/Debug/"</span>, <span class="hljs-string">"è°ƒè¯•è¿è¡Œ"</span>, UIPackageType.admin, <span class="hljs-string">"ri-bug-line"</span>),
    
    <span class="hljs-comment">// ç¼–è¾‘å™¨</span>
    RAD(<span class="hljs-string">"RAD"</span>, <span class="hljs-string">"/RAD/"</span>, <span class="hljs-string">"ç¼–è¾‘å™¨"</span>, UIPackageType.admin, <span class="hljs-string">"ri-cube-line"</span>),
    RADDB(<span class="hljs-string">"RADDB"</span>, <span class="hljs-string">"/RAD/db/"</span>, <span class="hljs-string">"æ•°æ®åº“æ’ä»¶"</span>, UIPackageType.esd, <span class="hljs-string">"ri-database-line"</span>),
    RADServer(<span class="hljs-string">"RADServer"</span>, <span class="hljs-string">"/RAD/server/"</span>, <span class="hljs-string">"æœåŠ¡å™¨æ’ä»¶"</span>, UIPackageType.esd, <span class="hljs-string">"ri-server-line"</span>),
    RADResource(<span class="hljs-string">"RADResource"</span>, <span class="hljs-string">"/RAD/resource/"</span>, <span class="hljs-string">"èµ„æºç®¡ç†"</span>, UIPackageType.esd, <span class="hljs-string">"ri-box-3-line"</span>),
    RADProject(<span class="hljs-string">"RADProject"</span>, <span class="hljs-string">"/RAD/project/"</span>, <span class="hljs-string">"ç¼–è¾‘å™¨å·¥ç¨‹æ’ä»¶"</span>, UIPackageType.esd, <span class="hljs-string">"ri-node-tree"</span>),
    RADOrg(<span class="hljs-string">"RADOrg"</span>, <span class="hljs-string">"/RAD/org/"</span>, <span class="hljs-string">"ååŒæ’ä»¶"</span>, UIPackageType.esd, <span class="hljs-string">"ri-user-group-line"</span>),
    esd(<span class="hljs-string">"esd"</span>, <span class="hljs-string">"/esd/"</span>, <span class="hljs-string">"ç¼–è¾‘å™¨æ’ä»¶"</span>, UIPackageType.esd, <span class="hljs-string">"ri-puzzle-line"</span>),
    
    <span class="hljs-comment">// ç³»ç»Ÿèœå•</span>
    systemnav(<span class="hljs-string">"systemnav"</span>, <span class="hljs-string">"/system/nav/"</span>, <span class="hljs-string">"å¯¼èˆªèœå•"</span>, UIPackageType.sys, <span class="hljs-string">"ri-menu-line"</span>),
    action(<span class="hljs-string">"action"</span>, <span class="hljs-string">"/action/"</span>, <span class="hljs-string">"ç³»ç»Ÿèœå•"</span>, UIPackageType.sys, <span class="hljs-string">"ri-css3-line"</span>),
    system(<span class="hljs-string">"system"</span>, <span class="hljs-string">"/system/"</span>, <span class="hljs-string">"ç»Ÿè®¡ç›‘æ§"</span>, UIPackageType.sys, <span class="hljs-string">"ri-line-chart-line"</span>),
    
    <span class="hljs-comment">// åº“è¡¨ç®¡ç†</span>
    db(<span class="hljs-string">"db"</span>, <span class="hljs-string">"/db/"</span>, <span class="hljs-string">"åº“è¡¨ç®¡ç†"</span>, UIPackageType.sys, <span class="hljs-string">"ri-database-line"</span>),
    fdt(<span class="hljs-string">"fdt"</span>, <span class="hljs-string">"/fdt/"</span>, <span class="hljs-string">"æ•°æ®åº“ç¤ºä¾‹"</span>, UIPackageType.sys, <span class="hljs-string">"ri-database-line"</span>),
    
    <span class="hljs-comment">// å·¥å…·</span>
    formula(<span class="hljs-string">"formula"</span>, <span class="hljs-string">"/admin/formula/"</span>, <span class="hljs-string">"å…¬å¼ç®¡ç†"</span>, UIPackageType.tool, <span class="hljs-string">"ri-calculator-line"</span>),
    orgmanager(<span class="hljs-string">"orgmanager"</span>, <span class="hljs-string">"/admin/org/"</span>, <span class="hljs-string">"ç»„ç»‡æœºæ„ç®¡ç†"</span>, UIPackageType.tool, <span class="hljs-string">"ri-node-tree"</span>),
    admin(<span class="hljs-string">"admin"</span>, <span class="hljs-string">"/admin/"</span>, <span class="hljs-string">"ç®¡ç†å·¥å…·"</span>, UIPackageType.tool, <span class="hljs-string">"ri-tools-line"</span>),
    bpd(<span class="hljs-string">"bpd"</span>, <span class="hljs-string">"/admin/bpd/"</span>, <span class="hljs-string">"å·¥ä½œæµæ’ä»¶"</span>, UIPackageType.tool, <span class="hljs-string">"ri-exchange-line"</span>),
    esdright(<span class="hljs-string">"esdright"</span>, <span class="hljs-string">"/esd/right/"</span>, <span class="hljs-string">"æƒé™æ’ä»¶"</span>, UIPackageType.tool, <span class="hljs-string">"ri-key-line"</span>),
    esddic(<span class="hljs-string">"esddic"</span>, <span class="hljs-string">"/esd/dic/"</span>, <span class="hljs-string">"å­—å…¸"</span>, UIPackageType.tool, <span class="hljs-string">"ri-book-line"</span>),
    esdpage(<span class="hljs-string">"esdpage"</span>, <span class="hljs-string">"/esd/page/"</span>, <span class="hljs-string">"é¡µé¢æ’ä»¶"</span>, UIPackageType.tool, <span class="hljs-string">"ri-file-line"</span>),
    
    <span class="hljs-comment">// DSM å»ºæ¨¡</span>
    dsm(<span class="hljs-string">"dsm"</span>, <span class="hljs-string">"/dsm/"</span>, <span class="hljs-string">"DSMå»ºæ¨¡"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-settings-3-line"</span>),
    dsmAgg(<span class="hljs-string">"dsm"</span>, <span class="hljs-string">"/dsm/agg/"</span>, <span class="hljs-string">"èšåˆæ¨¡å‹"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-node-tree"</span>),
    dsmEsdClass(<span class="hljs-string">"dsmEsdClass"</span>, <span class="hljs-string">"/dsm/esdclass/"</span>, <span class="hljs-string">"å®ä½“å…³ç³»"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-settings-3-line"</span>),
    dsmManger(<span class="hljs-string">"dsmManger"</span>, <span class="hljs-string">"/dsm/manager/"</span>, <span class="hljs-string">"é¢†åŸŸå®ä¾‹"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-settings-3-line"</span>),
    dsmAdmin(<span class="hljs-string">"dsmAdmin"</span>, <span class="hljs-string">"/dsm/admin/"</span>, <span class="hljs-string">"æ§åˆ¶å°"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-speed-line"</span>),
    dsmWebSite(<span class="hljs-string">"dsmWebSite"</span>, <span class="hljs-string">"/dsm/website/"</span>, <span class="hljs-string">"æ¨¡æ¿ç«™ç‚¹"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-earth-line"</span>),
    dsmManager(<span class="hljs-string">"dsmManager"</span>, <span class="hljs-string">"/dsm/manager/"</span>, <span class="hljs-string">"DSMç®¡ç†"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-tools-line"</span>),
    repository(<span class="hljs-string">"repository"</span>, <span class="hljs-string">"/dsm/repository/"</span>, <span class="hljs-string">"åº“è¡¨å…³ç³»"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-database-line"</span>),
    dsmTable(<span class="hljs-string">"dsmTable"</span>, <span class="hljs-string">"/dsm/repository/table/"</span>, <span class="hljs-string">"èµ„æº"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-table-line"</span>),
    dsmNav(<span class="hljs-string">"dsmNav"</span>, <span class="hljs-string">"/dsm/nav/"</span>, <span class="hljs-string">"å¯¼èˆª"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-menu-line"</span>),
    dsmTemp(<span class="hljs-string">"dsmTemp"</span>, <span class="hljs-string">"/dsm/temp/"</span>, <span class="hljs-string">"é¢†åŸŸæ¨¡æ¿"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-file-copy-line"</span>),
    dsmWebSiteTemp(<span class="hljs-string">"dsmWebSiteTemp"</span>, <span class="hljs-string">"/dsm/website/temp/"</span>, <span class="hljs-string">"æ¨¡æ¿ç®¡ç†"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-file-copy-line"</span>),
    dsmSelect(<span class="hljs-string">"dsmSelect"</span>, <span class="hljs-string">"/dsm/website/select/"</span>, <span class="hljs-string">"ç«™ç‚¹æ¨¡æ¿"</span>, UIPackageType.dsm, <span class="hljs-string">"ri-earth-line"</span>);
}
</code></pre>
<p><strong>ä»£ç ä½ç½®</strong>ï¼šUIPackagePathType.java</p>
<h3 data-id="heading-33">4.2 ProjectConfig é¡¹ç›®é…ç½®</h3>
<p>ProjectConfig åŒ…å«é¡¹ç›®çš„æ‰€æœ‰é…ç½®ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProjectConfig</span> {
    <span class="hljs-comment">// æ•°æ®åº“é…ç½®</span>
    <span class="hljs-keyword">private</span> List&lt;DataBaseConfig&gt; dbConfigs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;DataBaseConfig&gt;();
    
    <span class="hljs-comment">// ç”¨æˆ·åŒ…</span>
    <span class="hljs-keyword">private</span> String usrPackage;
    
    <span class="hljs-comment">// é¡¹ç›®åç§°</span>
    <span class="hljs-keyword">private</span> String projectName;
    
    <span class="hljs-comment">// å…¬å…±è·¯å¾„</span>
    <span class="hljs-keyword">private</span> String publicPath;
    
    <span class="hljs-comment">// å·¥ä½œç©ºé—´</span>
    <span class="hljs-keyword">private</span> String workSpace;
    
    <span class="hljs-comment">// èµ„æºç±»å‹</span>
    <span class="hljs-keyword">private</span> ProjectResourceType resourceType;
    
    <span class="hljs-comment">// API è¿‡æ»¤å™¨</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; apiFilter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();
    
    <span class="hljs-comment">// è‡ªå®šä¹‰æ¨¡å—è¿‡æ»¤å™¨</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; customModuleFilter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();
    
    <span class="hljs-comment">// ç´¢å¼•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-string">"App.index"</span>;
    
    <span class="hljs-comment">// å…¬å…±æœåŠ¡å™¨ URL</span>
    <span class="hljs-keyword">private</span> String publicServerUrl;
    
    <span class="hljs-comment">// æ‰©å±•ç»„ä»¶</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; extcoms = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();
    <span class="hljs-keyword">private</span> List&lt;String&gt; extmodules = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();
    
    <span class="hljs-comment">// å­—ä½“ã€å›¾ç‰‡ã€æ ·å¼</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; fonts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();
    <span class="hljs-keyword">private</span> List&lt;String&gt; imgs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();
    <span class="hljs-keyword">private</span> List&lt;String&gt; styles = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();
    
    <span class="hljs-comment">// å¼€å‘äººå‘˜</span>
    <span class="hljs-keyword">public</span> Map&lt;ProjectRoleType, Set&lt;String&gt;&gt; devPersons = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;ProjectRoleType, Set&lt;String&gt;&gt;();
}
</code></pre>
<p><strong>ä»£ç ä½ç½®</strong>ï¼šProjectConfig.java</p>
<h3 data-id="heading-34">4.3 é¡¹ç›®çº§é…ç½®çš„å±‚æ¬¡ç»“æ„</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cd3a1adf9ea40a5a0bae4cb95aa1afc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966904&amp;x-signature=WRKO2%2BJIcDrpXCwBnhqxrqrXhyM%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>4.4 é¡¹ç›®çº§é…ç½®çš„ä¼˜åŠ¿</p>
<ol>
<li><strong>ç‹¬ç«‹æ€§</strong>ï¼šæ¯ä¸ªé¡¹ç›®å¯ä»¥ç‹¬ç«‹é…ç½®ï¼Œäº’ä¸å½±å“</li>
<li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰æ¨¡å—ã€API è¿‡æ»¤å™¨ç­‰</li>
<li><strong>æ‰©å±•æ€§</strong>ï¼šæ”¯æŒæ‰©å±•ç»„ä»¶å’Œæ¨¡å—</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šé…ç½®é›†ä¸­ç®¡ç†ï¼Œæ˜“äºç»´æŠ¤</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šæ”¯æŒå¤šè§’è‰²å¼€å‘äººå‘˜é…ç½®</li>
</ol>
<hr/>
<h2 data-id="heading-35">5. BridgeCode æ ¸å¿ƒæ¶æ„</h2>
<h3 data-id="heading-36">5.1 BridgeCode ä¸ä¼ ç»Ÿä»£ç ç”Ÿæˆçš„åŒºåˆ«</h3>




























































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">ä¼ ç»Ÿä»£ç ç”Ÿæˆ</th><th align="left">BridgeCode</th></tr></thead><tbody><tr><td align="left">ä»£ç æ ¼å¼</td><td align="left">JavaScript/Java</td><td align="left">Java (æ³¨è§£é©±åŠ¨)</td></tr><tr><td align="left">ç”Ÿæˆæ–¹å¼</td><td align="left">é™æ€ç”Ÿæˆ</td><td align="left">åŠ¨æ€ç”Ÿæˆ (C2U)</td></tr><tr><td align="left">é›†æˆæ–¹å¼</td><td align="left">æ‰‹åŠ¨é›†æˆ</td><td align="left">è‡ªåŠ¨é›†æˆ</td></tr><tr><td align="left">æ›´æ–°æ–¹å¼</td><td align="left">é‡æ–°ç”Ÿæˆ</td><td align="left">çƒ­åŠ è½½ (C2U)</td></tr><tr><td align="left">ç‰ˆæœ¬æ§åˆ¶</td><td align="left">å›°éš¾</td><td align="left">æ”¯æŒ VFS</td></tr><tr><td align="left">ç±»å‹å®‰å…¨</td><td align="left">å¼±ç±»å‹</td><td align="left">å¼ºç±»å‹</td></tr><tr><td align="left">ç»´æŠ¤æ€§</td><td align="left">ä½</td><td align="left">é«˜</td></tr><tr><td align="left">æ¨¡æ¿æ•°é‡</td><td align="left">å›ºå®š</td><td align="left">å‡ ç™¾ç§ (NLP)</td></tr><tr><td align="left">é…ç½®ç²’åº¦</td><td align="left">å…¨å±€</td><td align="left">é¡¹ç›®çº§</td></tr><tr><td align="left">è‡ªå­¦ä¹ </td><td align="left">æ— </td><td align="left">æ”¯æŒ (NLP)</td></tr></tbody></table>
<h3 data-id="heading-37">5.2 BridgeCode çš„è®¾è®¡ç†å¿µ</h3>
<p>BridgeCode çš„è®¾è®¡ç†å¿µæ˜¯"å£°æ˜å¼ç”Ÿæˆï¼Œè¿è¡Œæ—¶é›†æˆï¼Œè‡ªå­¦ä¹ ä¼˜åŒ–"ï¼š</p>
<ol>
<li><strong>å£°æ˜å¼ç”Ÿæˆ</strong>ï¼šé€šè¿‡æ³¨è§£å’Œå…ƒæ•°æ®å£°æ˜ä»£ç çš„ç”Ÿæˆè§„åˆ™ï¼Œè€Œä¸æ˜¯ç›´æ¥ç”Ÿæˆä»£ç </li>
<li><strong>è¿è¡Œæ—¶é›†æˆ</strong>ï¼šåœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½å’Œé›†æˆä»£ç ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶é™æ€é›†æˆ</li>
<li><strong>å…ƒæ•°æ®é©±åŠ¨</strong>ï¼šé€šè¿‡ DSM å…ƒæ•°æ®é©±åŠ¨ä»£ç ç”Ÿæˆï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç ç”Ÿæˆé€»è¾‘</li>
<li><strong>çƒ­åŠ è½½</strong>ï¼šæ”¯æŒè¿è¡Œæ—¶åŠ¨æ€åŠ è½½å’Œæ›´æ–°ä»£ç ï¼Œæ— éœ€é‡å¯åº”ç”¨</li>
<li><strong>è‡ªå­¦ä¹ ä¼˜åŒ–</strong>ï¼šé€šè¿‡ NLP Module è‡ªå­¦ä¹ æœºåˆ¶ï¼ŒæŒç»­ä¼˜åŒ–æ¨¡æ¿è§„åˆ™</li>
</ol>
<h3 data-id="heading-38">5.3 BridgeCode æ ¸å¿ƒæ¶æ„å›¾</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a1e8c5c160a4305919673795e69956d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966904&amp;x-signature=dzD0b%2Bdk57HjqajCde4o89TNHJo%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-39">6.1 æ¨¡æ¿æ•°é‡ä¸åˆ†ç±»</h3>
<p>Ooder D2B æ¡†æ¶æ”¯æŒå‡ ç™¾ç§æ¨¡æ¿ï¼Œé€šè¿‡å¤šä¸ªç»´åº¦è¿›è¡Œåˆ†ç±»ï¼š</p>
<h4 data-id="heading-40">6.1.1 æŒ‰ç»„ä»¶ç±»å‹åˆ†ç±»</h4>
















































































<table><thead><tr><th align="left">ç»„ä»¶ç±»å‹</th><th align="left">æ¨¡æ¿æ•°é‡</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">Block</td><td align="left">5+</td><td align="left">å—ç»„ä»¶æ¨¡æ¿</td></tr><tr><td align="left">Div</td><td align="left">5+</td><td align="left">DIV å®¹å™¨æ¨¡æ¿</td></tr><tr><td align="left">Form</td><td align="left">10+</td><td align="left">è¡¨å•ç»„ä»¶æ¨¡æ¿</td></tr><tr><td align="left">Grid</td><td align="left">10+</td><td align="left">ç½‘æ ¼ç»„ä»¶æ¨¡æ¿</td></tr><tr><td align="left">Tree</td><td align="left">8+</td><td align="left">æ ‘å½¢ç»„ä»¶æ¨¡æ¿</td></tr><tr><td align="left">Gallery</td><td align="left">5+</td><td align="left">ç”»å»Šç»„ä»¶æ¨¡æ¿</td></tr><tr><td align="left">SVG</td><td align="left">5+</td><td align="left">SVG ç»˜å›¾æ¨¡æ¿</td></tr><tr><td align="left">Tabs</td><td align="left">8+</td><td align="left">æ ‡ç­¾é¡µæ¨¡æ¿</td></tr><tr><td align="left">Chart</td><td align="left">10+</td><td align="left">å›¾è¡¨æ¨¡æ¿</td></tr><tr><td align="left">Panel</td><td align="left">5+</td><td align="left">é¢æ¿æ¨¡æ¿</td></tr><tr><td align="left">Layout</td><td align="left">5+</td><td align="left">å¸ƒå±€æ¨¡æ¿</td></tr><tr><td align="left">å¯¼èˆªç»„ä»¶</td><td align="left">20+</td><td align="left">å¯¼èˆªç»„ä»¶æ¨¡æ¿</td></tr><tr><td align="left">ä¸»ç»„ä»¶</td><td align="left">5+</td><td align="left">ä¸»ç»„ä»¶æ¨¡æ¿</td></tr><tr><td align="left">è¡¨å•ç»„ä»¶</td><td align="left">10+</td><td align="left">è¡¨å•å­—æ®µæ¨¡æ¿</td></tr></tbody></table>
<p><strong>æ€»è®¡</strong>ï¼šè¶…è¿‡ 100 ç§ç»„ä»¶æ¨¡æ¿</p>
<h4 data-id="heading-41">6.1.2 æŒ‰åº”ç”¨åœºæ™¯åˆ†ç±»</h4>

































































<table><thead><tr><th align="left">åº”ç”¨åœºæ™¯</th><th align="left">æ¨¡æ¿æ•°é‡</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">ç”¨æˆ·å·¥ç¨‹ (App)</td><td align="left">10+</td><td align="left">ç”¨æˆ·åº”ç”¨æ¨¡æ¿</td></tr><tr><td align="left">æµç¨‹åº”ç”¨ (bpm)</td><td align="left">20+</td><td align="left">æµç¨‹ç®¡ç†æ¨¡æ¿</td></tr><tr><td align="left">è¡¨å•æ’ä»¶</td><td align="left">10+</td><td align="left">è¡¨å•æ’ä»¶æ¨¡æ¿</td></tr><tr><td align="left">JAVA ç¼–è¯‘</td><td align="left">15+</td><td align="left">Java ç¼–è¯‘æ¨¡æ¿</td></tr><tr><td align="left">åµŒå…¥æ¨¡å—</td><td align="left">10+</td><td align="left">åµŒå…¥æ¨¡å—æ¨¡æ¿</td></tr><tr><td align="left">ç¼–è¾‘å™¨ (RAD)</td><td align="left">20+</td><td align="left">ç¼–è¾‘å™¨æ¨¡æ¿</td></tr><tr><td align="left">ç³»ç»Ÿèœå•</td><td align="left">15+</td><td align="left">ç³»ç»Ÿèœå•æ¨¡æ¿</td></tr><tr><td align="left">ç»Ÿè®¡ç›‘æ§</td><td align="left">10+</td><td align="left">ç›‘æ§ç»Ÿè®¡æ¨¡æ¿</td></tr><tr><td align="left">åº“è¡¨ç®¡ç†</td><td align="left">10+</td><td align="left">åº“è¡¨ç®¡ç†æ¨¡æ¿</td></tr><tr><td align="left">å·¥å…·</td><td align="left">15+</td><td align="left">å·¥å…·æ¨¡æ¿</td></tr><tr><td align="left">DSM å»ºæ¨¡</td><td align="left">20+</td><td align="left">DSM å»ºæ¨¡æ¨¡æ¿</td></tr></tbody></table>
<p><strong>æ€»è®¡</strong>ï¼šè¶…è¿‡ 150 ç§åº”ç”¨åœºæ™¯æ¨¡æ¿</p>
<h3 data-id="heading-42">6.2 æ¨¡æ¿çš„è‡ªå­¦ä¹ æœºåˆ¶</h3>
<h4 data-id="heading-43">6.2.1 AI è¾…åŠ©ç»´æŠ¤</h4>
<p>Ooder æ¡†æ¶é€šè¿‡ AI Skills è¾…åŠ©å®Œæˆå¤æ‚çš„æ¨¡æ¿åº“ç»´æŠ¤ï¼š</p>
<ol>
<li><strong>è§„åˆ™å­¦ä¹ </strong>ï¼šé€šè¿‡ Skills å­¦ä¹ æ¨¡æ¿ä½¿ç”¨è§„åˆ™</li>
<li><strong>æ¨¡å¼è¯†åˆ«</strong>ï¼šè¯†åˆ«å¸¸ç”¨çš„æ¨¡æ¿ç»„åˆæ¨¡å¼</li>
<li><strong>æ™ºèƒ½æ¨è</strong>ï¼šæ ¹æ®ä½¿ç”¨æƒ…å†µæ¨èæ¨¡æ¿</li>
<li><strong>è‡ªåŠ¨ä¼˜åŒ–</strong>ï¼šè‡ªåŠ¨ä¼˜åŒ–æ¨¡æ¿å‚æ•°</li>
</ol>
<h4 data-id="heading-44">6.2.2 æ¨¡æ¿ç‰ˆæœ¬ç®¡ç†</h4>
<p>é€šè¿‡ VFS æ”¯æŒæ¨¡æ¿ç‰ˆæœ¬ç®¡ç†ï¼š</p>
<ol>
<li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šæ¯ä¸ªæ¨¡æ¿å¯ä»¥æœ‰å¤šä¸ªç‰ˆæœ¬</li>
<li><strong>ç‰ˆæœ¬åˆ‡æ¢</strong>ï¼šæ”¯æŒä¸åŒç‰ˆæœ¬ä¹‹é—´çš„åˆ‡æ¢</li>
<li><strong>ç‰ˆæœ¬å›æ»š</strong>ï¼šæ”¯æŒå›æ»šåˆ°å†å²ç‰ˆæœ¬</li>
<li><strong>ç‰ˆæœ¬å¯¹æ¯”</strong>ï¼šæ”¯æŒç‰ˆæœ¬ä¹‹é—´çš„å¯¹æ¯”</li>
</ol>
<h4 data-id="heading-45">6.2.3 æ¨¡æ¿å…±äº«æœºåˆ¶</h4>
<p>æ”¯æŒæ¨¡æ¿çš„å…±äº«å’Œå¤ç”¨ï¼š</p>
<ol>
<li><strong>é¡¹ç›®å†…å…±äº«</strong>ï¼šé¡¹ç›®å†…æ¨¡æ¿å…±äº«</li>
<li><strong>è·¨é¡¹ç›®å…±äº«</strong>ï¼šè·¨é¡¹ç›®æ¨¡æ¿å…±äº«</li>
<li><strong>å…¨å±€å…±äº«</strong>ï¼šå…¨å±€æ¨¡æ¿å…±äº«</li>
<li><strong>è‡ªå®šä¹‰æ¨¡æ¿</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿</li>
</ol>
<h3 data-id="heading-46">6.3 æ¨¡æ¿ç”Ÿæ€çš„ä¼˜åŠ¿</h3>
<ol>
<li><strong>ä¸°å¯Œæ€§</strong>ï¼šå‡ ç™¾ç§æ¨¡æ¿è¦†ç›–å„ç§åœºæ™¯</li>
<li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰å’Œæ‰©å±•</li>
<li><strong>æ™ºèƒ½åŒ–</strong>ï¼šAI è¾…åŠ©ç»´æŠ¤ï¼ŒæŒç»­ä¼˜åŒ–</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šç‰ˆæœ¬ç®¡ç†ï¼Œæ˜“äºç»´æŠ¤</li>
<li><strong>å¯å¤ç”¨æ€§</strong>ï¼šæ”¯æŒå…±äº«å’Œå¤ç”¨</li>
</ol>
<hr/>
<h2 data-id="heading-47">7. æ¡†æ¶ä¼˜åŠ¿æ€»ç»“</h2>
<h3 data-id="heading-48">7.1 æ ¸å¿ƒä¼˜åŠ¿</h3>
<p>Ooder D2B æ¡†æ¶ç›¸æ¯”ä¼ ç»Ÿä»£ç ç”Ÿæˆæ–¹æ¡ˆï¼Œå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<h4 data-id="heading-49">7.1.1 æ— ç¼é›†æˆ</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/831fb2b199db4718b866b01c9d462587~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966904&amp;x-signature=0L9hXNF8pDd1zH9CmrksfHxCXt0%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>ä¼ ç»Ÿæ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>éœ€è¦æ‰‹åŠ¨é…ç½®æ‰èƒ½ä¸ç°æœ‰ç³»ç»Ÿé›†æˆ</li>
<li>ç”Ÿæˆçš„ä»£ç å¯èƒ½è¦†ç›–æ‰‹åŠ¨ç¼–å†™çš„ä»£ç </li>
<li>é›†æˆå¤æ‚ï¼Œå®¹æ˜“å‡ºé”™</li>
</ul>
<p><strong>BridgeCode æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨é›†æˆï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®</li>
<li>é€šè¿‡æ³¨è§£å£°æ˜ç”Ÿæˆè§„åˆ™ï¼Œé¿å…ä»£ç å†²çª</li>
<li>è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ï¼Œå³æ—¶ç”Ÿæ•ˆ</li>
</ul>
<h4 data-id="heading-50">7.1.2 å¼€å‘æ•ˆç‡</h4>
<p><strong>ä¼ ç»Ÿæ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>éœ€è¦é‡æ–°ç¼–è¯‘å’Œé‡å¯åº”ç”¨</li>
<li>å¼€å‘æ•ˆç‡ä½ï¼Œè¿­ä»£å‘¨æœŸé•¿</li>
<li>å›¢é˜Ÿåä½œå›°éš¾</li>
</ul>
<p><strong>BridgeCode æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>çƒ­åŠ è½½ï¼Œæ— éœ€é‡å¯åº”ç”¨</li>
<li>å¼€å‘æ•ˆç‡é«˜ï¼Œå¿«é€Ÿè¿­ä»£</li>
<li>æ”¯æŒå›¢é˜Ÿåä½œ</li>
</ul>
<h4 data-id="heading-51">7.1.3 ç±»å‹å®‰å…¨</h4>
<p><strong>ä¼ ç»Ÿæ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>å¼±ç±»å‹ï¼Œè¿è¡Œæ—¶æ‰å‘ç°é”™è¯¯</li>
<li>éš¾ä»¥ä¿è¯ä»£ç è´¨é‡</li>
<li>ç»´æŠ¤å›°éš¾</li>
</ul>
<p><strong>BridgeCode æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>å¼ºç±»å‹ï¼Œç¼–è¯‘æ—¶å‘ç°é”™è¯¯</li>
<li>ä¿è¯ä»£ç è´¨é‡</li>
<li>æ˜“äºç»´æŠ¤</li>
</ul>
<h4 data-id="heading-52">7.1.4 å¯ç»´æŠ¤æ€§</h4>
<p><strong>ä¼ ç»Ÿæ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ç”Ÿæˆçš„ä»£ç éš¾ä»¥ç†è§£</li>
<li>ç»´æŠ¤å›°éš¾ï¼Œä¿®æ”¹åé‡æ–°ç”Ÿæˆä¼šä¸¢å¤±å˜æ›´</li>
<li>ç‰ˆæœ¬ç®¡ç†å›°éš¾</li>
</ul>
<p><strong>BridgeCode æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ³¨è§£æ¸…æ™°æ˜äº†ï¼Œæ˜“äºç†è§£</li>
<li>é€šè¿‡å…ƒæ•°æ®é©±åŠ¨ï¼Œä¿®æ”¹ä¸ä¼šä¸¢å¤±</li>
<li>æ”¯æŒ VFS ç‰ˆæœ¬ç®¡ç†</li>
</ul>
<h4 data-id="heading-53">7.1.5 æ‰©å±•æ€§</h4>
<p><strong>ä¼ ç»Ÿæ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ¨¡æ¿æ•°é‡å›ºå®šï¼Œéš¾ä»¥æ‰©å±•</li>
<li>ä¸æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿</li>
<li>æ‰©å±•å›°éš¾</li>
</ul>
<p><strong>BridgeCode æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ”¯æŒå‡ ç™¾ç§æ¨¡æ¿</li>
<li>æ”¯æŒè‡ªå®šä¹‰å’Œæ‰©å±•</li>
<li>AI è¾…åŠ©ç»´æŠ¤ï¼ŒæŒç»­ä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-54">7.2 æŠ€æœ¯ä¼˜åŠ¿</h3>
<ol>
<li><strong>C2U åŠ¨æ€ç¼–è¯‘</strong>ï¼šæ”¯æŒè¿è¡Œæ—¶åŠ¨æ€ç¼–è¯‘å’ŒåŠ è½½</li>
<li><strong>NLP Module è‡ªå­¦ä¹ </strong>ï¼šé€šè¿‡ AI è¾…åŠ©å®Œæˆå¤æ‚çš„æ¨¡æ¿åº“ç»´æŠ¤</li>
<li><strong>é¡¹ç›®çº§é…ç½®</strong>ï¼šæ¯ä¸ªé¡¹ç›®å¯ä»¥ç‹¬ç«‹è®¾ç½®è§„åˆ™å’Œæ¨¡æ¿</li>
<li><strong>æ¨¡æ¿ç”Ÿæ€</strong>ï¼šå‡ ç™¾ç§æ¨¡æ¿ï¼Œè¦†ç›–å„ç§åœºæ™¯</li>
<li><strong>VFS ç®¡ç†</strong>ï¼šæ”¯æŒç‰ˆæœ¬æ§åˆ¶å’Œå…±äº«</li>
</ol>
<h3 data-id="heading-55">7.3 ä¸šåŠ¡ä¼˜åŠ¿</h3>
<ol>
<li><strong>é™ä½æˆæœ¬</strong>ï¼šå‡å°‘æ‰‹åŠ¨ç¼–ç å·¥ä½œé‡</li>
<li><strong>æé«˜è´¨é‡</strong>ï¼šä¿è¯ä»£ç è´¨é‡å’Œä¸€è‡´æ€§</li>
<li><strong>åŠ é€Ÿäº¤ä»˜</strong>ï¼šå¿«é€Ÿè¿­ä»£ï¼ŒåŠ é€Ÿé¡¹ç›®äº¤ä»˜</li>
<li><strong>é™ä½é£é™©</strong>ï¼šå‡å°‘äººä¸ºé”™è¯¯ï¼Œé™ä½é¡¹ç›®é£é™©</li>
<li><strong>æå‡ä½“éªŒ</strong>ï¼šçƒ­åŠ è½½ï¼Œæå‡å¼€å‘å’Œç”¨æˆ·ä½“éªŒ</li>
</ol>
<hr/>
<h2 data-id="heading-56">8. æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-57">8.1 C2U åŠ¨æ€ç¼–è¯‘æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-58">8.1.1 åˆç†ä½¿ç”¨ç¼“å­˜</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨æ—¶é—´ç¼“å­˜é¿å…é¢‘ç¹åŠ è½½</span>
<span class="hljs-type">Long</span> <span class="hljs-variable">createTime</span> <span class="hljs-operator">=</span> (Long) contextMap.get(url + <span class="hljs-string">"[TIME]"</span>);
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">module</span> == <span class="hljs-literal">null</span> &amp;&amp; (createTime == <span class="hljs-literal">null</span> || System.currentTimeMillis() - createTime &gt; <span class="hljs-number">500</span>)) {
    <span class="hljs-comment">// é‡æ–°åŠ è½½</span>
}
</code></pre>
<h4 data-id="heading-59">8.1.2 çº¿ç¨‹å®‰å…¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ synchronized ä¿è¯çº¿ç¨‹å®‰å…¨</span>
<span class="hljs-keyword">synchronized</span> (<span class="hljs-keyword">module</span>.getClassName()) {
    <span class="hljs-comment">// åŠ¨æ€ç¼–è¯‘é€»è¾‘</span>
}
</code></pre>
<h4 data-id="heading-60">8.1.3 å¼‚å¸¸å¤„ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®Œå–„çš„å¼‚å¸¸å¤„ç†</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">module</span> = buildView(methodAPIBean, <span class="hljs-literal">null</span>, projectName, valueMap, !isCache(methodAPIBean));
} <span class="hljs-keyword">catch</span> (Exception e) {
    e.printStackTrace();
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(e);
}
</code></pre>
<h3 data-id="heading-61">8.2 NLP Module æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-62">8.2.1 é€‰æ‹©åˆé€‚çš„è½¬æ¢æ¨¡å¼</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ HYBRID æ¨¡å¼</span>
<span class="hljs-type">FullNlpComponentConverter</span> <span class="hljs-variable">converter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FullNlpComponentConverter</span>(llmInterface, skillsBridge);
converter.setConversionMode(FullNlpComponentConverter.ConversionMode.HYBRID);
</code></pre>
<h4 data-id="heading-63">8.2.2 æ³¨å†Œè‡ªå®šä¹‰æŠ€èƒ½</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰æŠ€èƒ½</span>
skillsBridge.registerSkill(<span class="hljs-string">"customSkill"</span>, customSkillImplementation);
</code></pre>
<h4 data-id="heading-64">8.2.3 åˆå§‹åŒ–å’Œå…³é—­</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ­£ç¡®åˆå§‹åŒ–å’Œå…³é—­</span>
llmInterface.initialize();
skillsBridge.initialize();

<span class="hljs-comment">// ä½¿ç”¨å®Œæˆåå…³é—­</span>
llmInterface.close();
skillsBridge.close();
</code></pre>
<h3 data-id="heading-65">8.3 é¡¹ç›®é…ç½®æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-66">8.3.1 åˆç†è®¾ç½®é¡¹ç›®é…ç½®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è®¾ç½®é¡¹ç›®é…ç½®</span>
<span class="hljs-type">ProjectConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProjectConfig</span>();
config.setProjectName(<span class="hljs-string">"myProject"</span>);
config.setUsrPackage(<span class="hljs-string">"com.example"</span>);
config.setApiFilter(Arrays.asList(<span class="hljs-string">"api1"</span>, <span class="hljs-string">"api2"</span>));
</code></pre>
<h4 data-id="heading-67">8.3.2 ä½¿ç”¨åŒ…è·¯å¾„ç±»å‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ UIPackagePathType ç¡®å®šåŒ…è·¯å¾„</span>
<span class="hljs-type">UIPackagePathType</span> <span class="hljs-variable">pathType</span> <span class="hljs-operator">=</span> UIPackagePathType.fromSystemCode(<span class="hljs-string">"bpm"</span>);
<span class="hljs-type">String</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> pathType.getPattern();
</code></pre>
<h4 data-id="heading-68">8.3.3 é…ç½®å¼€å‘äººå‘˜</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é…ç½®å¼€å‘äººå‘˜</span>
config.addDevPersons(ProjectRoleType.developer, <span class="hljs-string">"user1"</span>);
config.addDevPersons(ProjectRoleType.tester, <span class="hljs-string">"user2"</span>);
</code></pre>
<h3 data-id="heading-69">8.4 æ¨¡æ¿ä½¿ç”¨æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-70">8.4.1 é€‰æ‹©åˆé€‚çš„æ¨¡æ¿</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ ¹æ®ç»„ä»¶ç±»å‹é€‰æ‹©æ¨¡æ¿</span>
<span class="hljs-type">String</span> <span class="hljs-variable">componentType</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Form"</span>;
<span class="hljs-type">NlpBaseUIComponent</span> <span class="hljs-variable">component</span> <span class="hljs-operator">=</span> converter.convertFromNaturalLanguage(<span class="hljs-string">"åˆ›å»ºä¸€ä¸ªç”¨æˆ·è¡¨å•"</span>, componentType);
</code></pre>
<h4 data-id="heading-71">8.4.2 è‡ªå®šä¹‰æ¨¡æ¿</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è‡ªå®šä¹‰æ¨¡æ¿</span>
NlpComponentFactory.registerCreator(<span class="hljs-string">"CustomComponent"</span>, () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomNlpComponent</span>());
</code></pre>
<h4 data-id="heading-72">8.4.3 ç‰ˆæœ¬ç®¡ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ VFS è¿›è¡Œç‰ˆæœ¬ç®¡ç†</span>
<span class="hljs-type">Folder</span> <span class="hljs-variable">versionFolder</span> <span class="hljs-operator">=</span> dsmInst.getJavaFolder().createChildFolder(<span class="hljs-string">"version-1.0"</span>);
versionFolder.upload(<span class="hljs-string">"template.ftl"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(templateFile));
</code></pre>
<hr/>
<h2 data-id="heading-73">9. æ€»ç»“</h2>
<h3 data-id="heading-74">9.1 æ ¸å¿ƒè¦ç‚¹</h3>
<p>æœ¬æ–‡æ·±å…¥å‰–æäº† BridgeCode å¦‚ä½•ä¸ä¼ä¸šåŸæœ‰ä»£ç åˆä½“çš„æ ¸å¿ƒæœºåˆ¶ï¼š</p>
<ol>
<li><strong>C2U åŠ¨æ€ç¼–è¯‘</strong>ï¼šæ”¯æŒè¿è¡Œæ—¶åŠ¨æ€ç¼–è¯‘å’ŒåŠ è½½ä»£ç ï¼Œæ— éœ€é‡å¯åº”ç”¨</li>
<li><strong>NLP Module è‡ªå­¦ä¹ </strong>ï¼šé€šè¿‡ AI è¾…åŠ©å®Œæˆå¤æ‚çš„æ¨¡æ¿åº“ç»´æŠ¤ï¼Œæ”¯æŒå‡ ç™¾ç§æ¨¡æ¿</li>
<li><strong>é¡¹ç›®çº§é…ç½®</strong>ï¼šæ¯ä¸ªé¡¹ç›®å¯ä»¥ç‹¬ç«‹è®¾ç½®è§„åˆ™å’Œæ¨¡æ¿ï¼Œæ”¯æŒ 30+ ç§åŒ…è·¯å¾„ç±»å‹</li>
<li><strong>å…ƒæ•°æ®é©±åŠ¨</strong>ï¼šé€šè¿‡ DSM å…ƒæ•°æ®é©±åŠ¨ä»£ç ç”Ÿæˆï¼Œä¸ç°æœ‰ä»£ç åº“æ— ç¼é›†æˆ</li>
<li><strong>VFS ç®¡ç†</strong>ï¼šé€šè¿‡è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿç®¡ç†ç”Ÿæˆçš„ä»£ç ï¼Œæ”¯æŒç‰ˆæœ¬æ§åˆ¶</li>
</ol>
<h3 data-id="heading-75">9.2 æŠ€æœ¯ä¼˜åŠ¿</h3>
<p>BridgeCode æœºåˆ¶å…·æœ‰ä»¥ä¸‹æŠ€æœ¯ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>æ— ç¼é›†æˆ</strong>ï¼šä¸ä¼ä¸šåŸæœ‰ä»£ç æ— ç¼é›†æˆï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç </li>
<li><strong>å¼€å‘æ•ˆç‡</strong>ï¼šçƒ­åŠ è½½ã€åŠ¨æ€ç¼–è¯‘ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œå¿«é€Ÿè¿­ä»£</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šå¼ºç±»å‹æ£€æŸ¥ï¼Œç¼–è¯‘æ—¶å‘ç°é”™è¯¯</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šæ³¨è§£æ¸…æ™°æ˜äº†ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤</li>
<li><strong>æ‰©å±•æ€§</strong>ï¼šæ”¯æŒå‡ ç™¾ç§æ¨¡æ¿ï¼Œæ”¯æŒè‡ªå®šä¹‰å’Œæ‰©å±•ï¼ŒAI è¾…åŠ©ç»´æŠ¤</li>
</ol>
<h3 data-id="heading-76">9.3 åº”ç”¨åœºæ™¯</h3>
<p>BridgeCode æœºåˆ¶é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li><strong>ä¼ä¸šçº§åº”ç”¨</strong>ï¼šä¼ä¸šçº§åº”ç”¨å¼€å‘ï¼Œéœ€è¦ä¸ç°æœ‰ä»£ç åº“é›†æˆ</li>
<li><strong>å¿«é€ŸåŸå‹</strong>ï¼šå¿«é€ŸåŸå‹å¼€å‘ï¼Œå¿«é€Ÿè¿­ä»£</li>
<li><strong>åŠ¨æ€æ‰©å±•</strong>ï¼šåŠ¨æ€æ‰©å±•åŠŸèƒ½ï¼Œæ— éœ€é‡å¯åº”ç”¨</li>
<li><strong>ä»£ç ç”Ÿæˆ</strong>ï¼šä»£ç ç”Ÿæˆåœºæ™¯ï¼Œè‡ªåŠ¨ç”Ÿæˆä»£ç </li>
<li><strong>å…ƒæ•°æ®é©±åŠ¨</strong>ï¼šå…ƒæ•°æ®é©±åŠ¨å¼€å‘ï¼ŒåŸºäºé…ç½®ç”Ÿæˆä»£ç </li>
</ol>
<h3 data-id="heading-77">9.4 æœªæ¥å±•æœ›</h3>
<p>BridgeCode æœºåˆ¶çš„æœªæ¥å‘å±•æ–¹å‘ï¼š</p>
<ol>
<li><strong>æ›´å¤šæ¨¡æ¿</strong>ï¼šæ”¯æŒæ›´å¤šæ¨¡æ¿ç±»å‹ï¼Œè¦†ç›–æ›´å¤šåœºæ™¯</li>
<li><strong>æ›´å¥½çš„ AI</strong>ï¼šé›†æˆæ›´å…ˆè¿›çš„ AI æ¨¡å‹ï¼Œæé«˜è‡ªå­¦ä¹ èƒ½åŠ›</li>
<li><strong>æ›´å¥½çš„æ€§èƒ½</strong>ï¼šä¼˜åŒ–æ€§èƒ½ï¼Œæé«˜ç¼–è¯‘å’ŒåŠ è½½é€Ÿåº¦</li>
<li><strong>æ›´å¥½çš„å·¥å…·</strong>ï¼šæä¾›æ›´å¥½çš„å¼€å‘å·¥å…·ï¼Œæé«˜å¼€å‘ä½“éªŒ</li>
<li><strong>æ›´å¥½çš„ç¤¾åŒº</strong>ï¼šå»ºç«‹æ›´å¥½çš„ç¤¾åŒºç”Ÿæ€ï¼Œä¿ƒè¿›äº¤æµå’Œå­¦ä¹ </li>
</ol>
<h3 data-id="heading-78">9.5 ç»“è¯­</h3>
<p>BridgeCode æœºåˆ¶æ˜¯ Ooder D2B æ¡†æ¶çš„æ ¸å¿ƒåˆ›æ–°ï¼Œé€šè¿‡ C2U åŠ¨æ€ç¼–è¯‘ã€NLP Module è‡ªå­¦ä¹ ã€é¡¹ç›®çº§é…ç½®ç­‰æŠ€æœ¯ï¼Œå®ç°äº†ä¸ä¼ä¸šåŸæœ‰ä»£ç çš„æ— ç¼é›†æˆã€‚å®ƒä¸ä»…è§£å†³äº†ä¼ ç»Ÿä»£ç ç”Ÿæˆçš„ç—›ç‚¹ï¼Œè¿˜ä¸ºä¼ä¸šçº§åº”ç”¨å¼€å‘æä¾›äº†ä¸€ç§å…¨æ–°çš„æ€è·¯å’Œæ–¹æ³•ã€‚</p>
<p>Ooder æ¡†æ¶é€šè¿‡å‡ ç™¾ç§æ¨¡æ¿ã€AI è¾…åŠ©ç»´æŠ¤ã€é¡¹ç›®çº§é…ç½®ç­‰ç‰¹æ€§ï¼Œæ„å»ºäº†ä¸€ä¸ªå¼ºå¤§çš„ä»£ç ç”Ÿæˆç”Ÿæ€ç³»ç»Ÿã€‚è¿™ä¸ªç”Ÿæ€ç³»ç»Ÿä¸ä»…æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œè¿˜ä¿è¯äº†ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿå¸®åŠ©è¯»è€…æ·±å…¥ç†è§£ BridgeCode æœºåˆ¶ï¼Œå¹¶åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨å’Œæ¨å¹¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨æ˜ŸæµAIåšåº“æ´›ç±³å¡ç‰ŒAPPï¼Œæ¯ä¸€å¼ éƒ½é¢œå€¼çˆ†è¡¨ï¼]]></title>    <link>https://juejin.cn/post/7603263490343075849</link>    <guid>https://juejin.cn/post/7603263490343075849</guid>    <pubDate>2026-02-06T07:16:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603263490343075849" data-draft-id="7603283691457740810" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨æ˜ŸæµAIåšåº“æ´›ç±³å¡ç‰ŒAPPï¼Œæ¯ä¸€å¼ éƒ½é¢œå€¼çˆ†è¡¨ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-06T07:16:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ˜ŸAIå·¥ä½œå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2250051536050763"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨æ˜ŸæµAIåšåº“æ´›ç±³å¡ç‰ŒAPPï¼Œæ¯ä¸€å¼ éƒ½é¢œå€¼çˆ†è¡¨ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2250051536050763/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ˜ŸAIå·¥ä½œå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:16:22.000Z" title="Fri Feb 06 2026 07:16:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3f9dd3e3a25426bbfaefed31d8a9808~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=Flmh7iEGg1vnJoFzX2aZdsbXlzc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®¶äººä»¬ï¼Œåº“æ´›ç±³è„‘è¢‹è¦å—¨ç–¯äº†ï¼Œ</p>
<p>æˆ‘ä¸ä»…æŠŠå®ƒåšæˆäº†æ‰‹åŠ¿äº¤äº’æ¸¸æˆï¼Œåˆç”œåˆé…·ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56465fbe30ee4d739acc63443bf421c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=J9MnDMQDSZ4VwJQwOqIvU0ut4BI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œä¸”æˆ‘åšäº†å…¨å¥—åº“æ´›ç±³APPï¼Œ</p>
<p>å¯ä»¥æ„Ÿå—æš—é»‘ç”œå¿ƒæ²‰æµ¸å¼ä½“éªŒå“¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71745a2b82ec4476a2a73ca7808e42a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=lqwxDu5KYFkuju5eieJqEZ8a4dw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™æ˜¯æˆ‘ç”¨æ˜Ÿæµagentåšçš„åº“æ´›ç±³å¡ç‰Œ</p>
<p>æ˜Ÿæµï¼Œå°±æ˜¯å›½å†…ç‰ˆçš„lovartæ²¡æœ‰ç½‘ç»œè¦æ±‚ï¼Œå°ç™½ç‰¹å‹å¥½ã€‚</p>
<h2 data-id="heading-0">è®¾è®¡é£æ ¼é€‰æ‹©</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fefcb10dc6d644cfa41c813f90f46c65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=PAPco5duR3zRa1aFZ%2Fq7cFGnjng%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œä¸”å¾ˆä¹…ä¹‹å‰å°±æœ‰åšå¡ç‰Œæ¸¸æˆçš„æƒ³æ³•äº†ï¼Œä½†æ˜¯æˆ‘åœ¨ç½‘ä¸Šæ‰¾ç´ æã€‚</p>
<p>æ‰¾äº†å¾ˆä¹…ï¼Œå‘ç°éƒ½æ˜¯è¿™ç§ç»å…¸å¼çš„å¡ç‰Œç´ æã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76fdbeedad194be7bceda1632936e866~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=UwrMcYrMdErkTM6AeYxRA9%2Bo%2FoU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯”å¦‚è¯´githubä¸Šè¿™ä¸ªï¼Œä½†æ˜¯æˆ‘æƒ³æœ‰è‡ªå·±çš„è®¾è®¡é£æ ¼ï¼Œ</p>
<p>è™½ç„¶æˆ‘æ²¡å­¦è¿‡è®¾è®¡ï¼Œ</p>
<p>åˆšå¥½çœ‹åˆ°æœ‰äººåœ¨æ˜Ÿæµç¤¾åŒºå‘å¸ƒäº†è‡ªå·±åšçš„è¿™ä¸ªåº“æ´›ç±³çš„demoã€‚</p>
<p>æ‰€ä»¥æˆ‘å°±æŒ‰ç…§ä»–çš„æç¤ºè¯æ€è·¯æ¥åšäº†è¿™ä¸€å¥—å¡ç‰Œã€‚</p>
<p>å®ƒå…¶å®å…¨å¥—çš„78å¼ ï¼Œå¤§æ¦‚20åˆ†é’Ÿï¼Œæ¯ä¸€å¼ å°è¡¨æƒ…éƒ½è¶…æœ‰æˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed6c39e04b274a1fbd482dffacc230fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=E0Lg%2B4%2BPFE4eLE0Gj0PThxwOwws%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å°±ç”»è´¨åœ¨å¤šç«¯è¿è¡Œä¹Ÿä¸ä¼šç³Šæ‰ï¼Œå› ä¸ºæˆ‘ç”¨æˆ‘é‚£ä¸ªè¶…å¤§å±å¹•è¯•äº†è¿˜æ˜¯è¶…çº§æ¸…æ™°ï¼Œæˆ‘çœŸçš„æ¯å¼ éƒ½å¥½å–œæ¬¢ã€‚</p>
<p>å°±æ˜¯è¦å‡ºå»å¼€ç›²ç›’ï¼Œæˆ‘è¦èƒ½å¼€è¿™ä¹ˆå¤šåº“æ´›ç±³ï¼Œæˆ‘å¾—å¿«ä¹æ­»ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æ‹¥æœ‰å…¨å¥—åº“æ´›ç±³å¡ç‰Œäº†ã€‚</p>
<h2 data-id="heading-1">æ¥å…¥iosAPP</h2>
<p>æ¥ä¸‹æ¥é˜¿æ˜Ÿæƒ³æŠŠå®ƒæ¬åˆ°è‹¹æœAPPä¸Šï¼Œå°±é¢„è§ˆä¸€ä¸‹ã€‚æˆ‘å¾—å…ˆå®šå¥½å…¨å¥—çš„äº¤äº’è„šæœ¬è§†è§‰æ¸…å•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efe3123e92764a658f64225f2119bd1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=JopDz8nea1iqY6OHka4BzhA2HO8%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">å‘Šè¯‰æ˜ŸæµUIç»„ä»¶å‘½åæ¸…å•</h2>
<p>æ¥ç€æˆ‘å°±æŠŠè¿™äº›éœ€æ±‚éƒ½ä¸¢ç»™äº†æ˜Ÿæµâ€”â€”å› ä¸ºæˆ‘å…ˆå†™å¥½äº¤äº’è„šæœ¬ï¼ˆä»£ç ï¼‰ï¼Œå®šå¥½äº†æ¯ä¸ªè§’è‰²çš„åå­—ï¼ˆå˜é‡åï¼‰ï¼Œç„¶åå†æŠŠè¿™ä»½ã€å‘½åæ¸…å•ã€‘ä¸¢ç»™æ˜Ÿæµã€‚è¿™æ ·å®ƒç”Ÿæˆçš„æ¯ä¸€å¼ å›¾ï¼Œéƒ½ä¸éœ€è¦æˆ‘äºŒæ¬¡æ”¹åï¼Œå®ç°çœŸæ­£çš„Â <strong>è½åœ°å³ç”Ÿäº§</strong>Â ã€‚</p>
<p>è·Ÿå®ƒè¯´ï¼šè¯·å¸®æˆ‘ç”Ÿæˆåº“æ´›ç±³å…¨å¥—UIï¼Œå‘½åè§„èŒƒå¦‚ä¸‹</p>
<p>å‘Šè¯‰æ˜Ÿæµå»ºè®®çš„Â <strong>å‘½åè§„èŒƒæ¸…å•ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªpartæ‰€æœ‰å†…å®¹ç›´æ¥å‘Šè¯‰æ˜Ÿæµ</strong>Â ï¼š</p>
<h3 data-id="heading-3">åŸºç¡€èµ„æºå‘½åè§„èŒƒ (Base Assets)</h3>



































<table><thead><tr><th>èµ„æºç±»å‹</th><th>å‘½åæ ¼å¼</th><th>ç¤ºä¾‹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>å¯åŠ¨å›¾</td><td>img_splash</td><td>img_splash.png</td><td>å¯¹åº” App å¯åŠ¨ç”»é¢</td></tr><tr><td>èƒŒæ™¯å›¾</td><td>bg_ç±»å‹</td><td>bg_main_purple, bg_card_yellow</td><td>ä½œä¸º SwiftUI ZStack çš„æœ€åº•å±‚</td></tr><tr><td>æŒ‰é’®å›¾</td><td>btn_åŠŸèƒ½_çŠ¶æ€</td><td>btn_draw_normal, btn_draw_pressed</td><td>ç”¨äºè‡ªå®šä¹‰ Button Style</td></tr><tr><td>å›¾æ ‡</td><td>ic_åç§°</td><td>ic_heart, ic_star, ic_kuromi_head</td><td>ç”¨äºå¯¼èˆªæ æˆ–åŠŸèƒ½ç‚¹ç¼€</td></tr></tbody></table>
<h3 data-id="heading-4">æ ¸å¿ƒå¡ç‰Œèµ„æº (é‡ç‚¹ï¼šåºåˆ—åŒ–å‘½å)</h3>
<p>ä¸ºäº†è®©é‚£ 78 å¼ å¡ç‰Œèƒ½é€šè¿‡Â <code>ForEach</code>Â å¾ªç¯è‡ªåŠ¨æ¸²æŸ“ï¼ŒÂ <strong>ä¸¥ç¦ä½¿ç”¨ä¸­æ–‡æˆ–æ— è§„å¾‹åç§°</strong>Â ã€‚</p>
<ul>
<li>â€¢Â <strong>å‘½åè§„åˆ™ï¼š</strong> <code>card_åºå·</code>Â æˆ–Â <code>card_ç±»å‹_åºå·</code></li>
</ul>
<h3 data-id="heading-5">iOS ç»„ä»¶ä¸ UI é›¶ä»¶ (Component Assets)</h3>
<p>é’ˆå¯¹ä½ è®©æ˜Ÿæµç”Ÿæˆçš„ UI é›¶ä»¶ï¼Œå‘½åå¦‚ä¸‹ï¼š</p>
<ul>
<li>â€¢Â <strong>å°ç»„ä»¶ (Widgets):</strong></li>
<li>
<ul>
<li>â€¢Â <code>widget_small_luck</code>Â (ä»Šæ—¥è¿åŠ¿å°ç»„ä»¶)</li>
<li>â€¢Â <code>widget_medium_history</code>Â (å åœå†å²ä¸­ç»„ä»¶)</li>
</ul>
</li>
<li>â€¢Â <strong>è£…é¥°ä»¶ (Decorations):</strong></li>
<li>
<ul>
<li>â€¢Â <code>deco_frame_gold</code>Â (å¡ç‰Œå¤–æ¡†)</li>
<li>â€¢Â <code>deco_crystal_ball</code>Â (æ°´æ™¶çƒåŠ¨ç”»ç´ æ)</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-6">å¦‚ä½•åœ¨ Prompt ä¸­è¦æ±‚â€œæ˜Ÿæµâ€ï¼Ÿ</h3>
<p>å½“ä½ è®©â€œæ˜Ÿæµâ€ç”Ÿæˆå›¾é›†æ—¶ï¼ŒÂ <strong>ç»“å°¾å¯ä»¥åœ¨ Prompt ç»“å°¾åŠ ä¸Šè¿™ä¸€æ®µæŒ‡ä»¤ï¼š</strong></p>
<blockquote>
<p>è¯·ç¡®ä¿ UI èµ„æºæ¸…æ™°åˆ†ç¦»ã€‚å¦‚æœæä¾›å·¥ä½œè¡¨ï¼Œè¯·å°†å®ƒä»¬ä»¥ç½‘æ ¼å½¢å¼æ’åˆ—ã€‚åœ¨å‘½åæˆ–å¼•ç”¨è¿™äº›èµ„æºæ—¶ï¼Œä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿ï¼ˆä¾‹å¦‚ï¼Œbtn_start_drawã€bg_tarot_mainï¼‰ã€‚å¯¹äº 78 å¼ å¡”ç½—ç‰Œï¼Œéµå¾ªä¸¥æ ¼çš„é¡ºåºå‘½åçº¦å®šï¼Œå¦‚ card_01 åˆ° card_78ï¼Œä»¥ä¾¿äºç¼–ç é›†æˆã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">å¼€å‘è€…å°è´´å£«Â <strong>åˆ‡å›¾é€æ˜åº¦</strong></h3>
<p><strong>åˆ‡å›¾é€æ˜åº¦ï¼š</strong> Â è¦æ±‚æ˜Ÿæµç”Ÿæˆå›¾æ ‡ï¼ˆIconsï¼‰å’ŒæŒ‰é’®ï¼ˆButtonsï¼‰æ—¶ï¼ŒèƒŒæ™¯å¿…é¡»æ˜¯Â <strong>çº¯è‰²ï¼ˆå¦‚çº¯é»‘æˆ–çº¯ç™½ï¼‰</strong> Â ï¼Œæœ€å¥½è¦æ±‚æ˜Ÿæµç›´æ¥ç”Ÿæˆå¸¦æœ‰ Alpha é€šé“çš„é€æ˜ PNGï¼Œå¦‚æœæ˜Ÿæµåšä¸åˆ°ï¼Œå†ä½¿ç”¨çº¯è‰²èƒŒæ™¯æ–¹æ¡ˆã€‚</p>
<p>å®ƒå°±ç›´æ¥æŒ‰ç…§æˆ‘çš„å¼€å‘å‘½åè§„èŒƒç²¾å‡†ç”Ÿæˆå®Œäº†ã€‚</p>
<h2 data-id="heading-8">ç”ŸæˆUIç»„ä»¶ç´ æ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/353fd4ff0f2042b8809c98abf1079c1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=WOjTxGmv58gYJgvMed5ZInozoMI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤§åˆ°èƒŒæ™¯å›¾ï¼Œ</p>
<p>å°åˆ°äº¤äº’æŒ‰é’®çš„å…¨å¥—æˆªå›¾éƒ½okäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34c41574d01c433bbc5b65583acfc247~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=yXX0A3R06i8zaPbRag9tGQjyfy0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶åæˆ‘æŠŠè¿™äº›ç»„ä»¶å›¾ç‰‡ç›´æ¥æ‹–è¿›Xcodeé‡Œé¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79d44e19a18c4b58b935683cfde62761~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=q%2BGikpxaLuAjQ9fcc3ff04EA2Ek%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‚¹å‡»buildå°±å¯ä»¥ç›´æ¥è¿è¡ŒæˆåŠŸäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5fe2d1b935d4c94b4d745b9ae839e97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=33CLtY%2BBZFJSEStGIUUfilqmdCQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¦çŸ¥é“å¦‚æœåå­—å¯¹ä¸ä¸Šçš„è¯ï¼Œ</p>
<p>å’±ä»¬çš„è¿™ä¸ªç¨‹åºæ˜¯æ²¡æ³•è·‘èµ·æ¥çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f930971b01d1493c829a74df3a37f16d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=CK2BubvpeNSqYTejFO7fmGDYAtk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œæ˜ŸæµAIå®ƒéå¸¸å‡ºè‰²çš„å®Œæˆäº†æ¯å¼ UIå›¾çš„å‘½åã€‚</p>
<p>å®ƒæ—¢æ‰®æ¼”äº†è®¾è®¡å¸ˆï¼Œå°±æ¯”å¦‚è¯´ç»™å’±ä»¬ç”¨promptå‡ºå›¾ï¼Œåˆæ‰®æ¼”äº†å‰ç«¯ç¨‹åºå‘˜ï¼Œ</p>
<p>æŠŠå›¾ç‰‡ä¸Šçš„åç§°å’Œå’±ä»¬åœ¨ç¨‹åºé‡Œé¢çš„å‘½åæ–¹å¼æ˜¯é«˜åº¦çš„ä¸€è‡´ï¼Œ</p>
<p>è¿™æ ·çš„è¯æ‰ä¼šæœ‰é‚£ç§ä¸æ»‘çš„ä½“éªŒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74543178cd424cacb487be1a3e692286~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=oGsMtTb%2F%2BQm4aUcsqcqYQTG0fMk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¦ä¸Šæ¶äº†ï¼Œ</p>
<p>é‚£æˆ‘ä»¬å†æ¥ä¸€å¥—APP storeå¹¿å‘Šå›¾ï¼Œ</p>
<p>å®˜æ–¹å°ºå¯¸å‘Šè¯‰æ–°æµç¬é—´getï¼Œçœå»äº†ä»¥å¾€è¦åšå¤šç§å°ºå¯¸iconçš„é‡å¤å·¥ä½œã€‚</p>
<p>è¿™æ˜¯æ¯ä¸€ä¸ªä¸Šæ¶è¿‡IOSAPPé¦–é€‰æœ€ç—›è‹¦çš„åœ°æ–¹ã€‚</p>
<p>å› ä¸ºè‹¹æœå®˜æ–¹å®ƒæœ‰å¾ˆå¤šå¾ˆå¤šç§è¦æ±‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/332538b957ac4805a9809a3231186e56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=u5%2BRkFYYpSFxfYAwduM4YbCGjrc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>okã€‚ç»§ç»­</p>
<p>æœ‰ä»»ä½•ä¸æ»¡æ„çš„åœ°æ–¹å°±å¯ä»¥ç”¨ä»–ä»¬å®¶çš„æ–‡å­—ç¼–è¾‘txt editå’Œç²¾å‡†ç¼–è¾‘touch editæ¥ä¿®æ”¹ï¼Œ</p>
<p>æ”¹å“ªé‡Œï¼Œå®Œå…¨ä¸éœ€è¦é‡æ–°ä½œå›¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3feeb2aa71ab4dd19dae366f149a439e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=t9lDdDEk%2BvgKstFvQCPiFbuttbg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ€»ä¹‹é˜¿æ˜Ÿä¹‹åçš„ç‹¬ç«‹å¼€å‘çš„UIè®¾è®¡ï¼Œæ„Ÿè§‰éƒ½å¯ä»¥ç”¨æ˜Ÿæµæ¥ä»£è¡¨äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03bfe1566c7a49f3b9a53d7e09da3c7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=HpTk6feCVf4nvUZtyPFegotWbN8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é¢œå€¼é«˜è¿˜æ‡‚å¼€å‘éœ€æ±‚ï¼Œæˆ‘æœ‰ä¿¡å¿ƒæˆä¸ºå…¨å¹²å·¥ç¨‹å¸ˆäº†ã€‚</p>
<p>æˆ‘è‡ªå·±çš„è¯æ˜¯ä»…ä¾›è‡ªå·±æ¬£èµï¼Œå¤§å®¶å¦‚æœè¦å‘å¸ƒçš„è¯æ˜¯è¦æ³¨æ„ç‰ˆæƒçš„ã€‚</p>
<p>OKï¼Œæˆ‘æ˜¯é˜¿æ˜Ÿï¼</p>
<p>æ›´å¤šAIåº”ç”¨ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§ğŸ‘‹ğŸ»</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93ddb5496c3248ea9809ebbc90c229f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966981&amp;x-signature=apu4LFjfzliu5X3EE3CWkBi7Kw0%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 2.7 å°è£…å…¨å±å¼¹çª—ç»„ä»¶ï¼šåŸºäºå‘½åç©ºé—´çš„æ ·å¼å®šåˆ¶]]></title>    <link>https://juejin.cn/post/7603283691457822730</link>    <guid>https://juejin.cn/post/7603283691457822730</guid>    <pubDate>2026-02-06T07:14:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603283691457822730" data-draft-id="7603359026710855690" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 2.7 å°è£…å…¨å±å¼¹çª—ç»„ä»¶ï¼šåŸºäºå‘½åç©ºé—´çš„æ ·å¼å®šåˆ¶"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-02-06T07:14:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="user8615818578154"/> <meta itemprop="url" content="https://juejin.cn/user/3549647826599133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 2.7 å°è£…å…¨å±å¼¹çª—ç»„ä»¶ï¼šåŸºäºå‘½åç©ºé—´çš„æ ·å¼å®šåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3549647826599133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    user8615818578154
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:14:40.000Z" title="Fri Feb 06 2026 07:14:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Vue 2.7 + Element UI é¡¹ç›®ä¸­ï¼Œå°è£…å…¨å± Iframe å¼¹çª—å¸¸é‡åˆ°æ ·å¼è¦†ç›–æ— æ•ˆçš„é—®é¢˜ã€‚ç‰¹åˆ«æ˜¯å¼€å¯ <code>append-to-body</code> åï¼Œå¼¹çª— DOM ä½äºæ ¹èŠ‚ç‚¹ï¼Œå¸¸è§„çš„ <code>scoped</code> æ ·å¼éš¾ä»¥ç”Ÿæ•ˆã€‚</p>
<p>æœ¬æ–‡ä»‹ç»ä¸€ç§<strong>ä¸ä¾èµ– <code>scoped</code></strong>ï¼Œé€šè¿‡CSS å‘½åç©ºé—´æ¥å®ç°å®‰å…¨æ ·å¼éš”ç¦»çš„æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-0">1. æ ¸å¿ƒéœ€æ±‚</h2>
<ul>
<li><strong>å…¨å±æ²‰æµ¸</strong>ï¼šå¼¹çª—æ— è¾¹è·ã€æ— é»˜è®¤å†…è¾¹è·ã€‚</li>
<li><strong>DOM ç»“æ„å®‰å…¨</strong>ï¼šå¿…é¡»ä½¿ç”¨ <code>append-to-body</code>ï¼Œé˜²æ­¢è¢«çˆ¶çº§å®¹å™¨æˆªæ–­ã€‚</li>
<li><strong>æ ·å¼æ— æ±¡æŸ“</strong>ï¼šåœ¨å…¨å±€æ ·å¼æ¨¡å¼ä¸‹ï¼Œç¡®ä¿åªå½±å“å½“å‰ç»„ä»¶ã€‚</li>
</ul>
<h2 data-id="heading-1">2. ç»„ä»¶å®ç° (<code>SurveyPortal.vue</code>)</h2>
<h3 data-id="heading-2">Template ç»“æ„</h3>
<p>å…³é”®åœ¨äºè®¾ç½® <code>custom-class</code>ã€‚è¿™ä¸ªå”¯ä¸€çš„ç±»åå°†ä½œä¸ºæˆ‘ä»¬çš„â€œæ ·å¼é˜²ç«å¢™â€ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">&lt;template&gt;
  &lt;el-dialog
    :<span class="hljs-attr">visible.sync</span>=<span class="hljs-string">"dialogVisible"</span>
    :<span class="hljs-attr">title</span>=<span class="hljs-string">"title"</span>
    fullscreen
    :<span class="hljs-attr">append-to-body</span>=<span class="hljs-string">"true"</span>
    :<span class="hljs-attr">destroy-on-close</span>=<span class="hljs-string">"true"</span>
    <span class="hljs-attr">custom-class</span>=<span class="hljs-string">"survey-portal-dialog"</span> 
    @<span class="hljs-attr">close</span>=<span class="hljs-string">"handleClose"</span>
  &gt;
    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"iframe-wrapper"</span> v-loading=<span class="hljs-string">"loading"</span>&gt;
      &lt;iframe
        :<span class="hljs-attr">src</span>=<span class="hljs-string">"surveyUrl"</span>
        <span class="hljs-attr">frameborder</span>=<span class="hljs-string">"0"</span>
        <span class="hljs-attr">width</span>=<span class="hljs-string">"100%"</span>
        <span class="hljs-attr">height</span>=<span class="hljs-string">"100%"</span>
        @<span class="hljs-attr">load</span>=<span class="hljs-string">"onIframeLoad"</span>
      &gt;&lt;/iframe&gt;
    &lt;/div&gt;
  &lt;/el-dialog&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-3">Script é€»è¾‘</h3>
<p>ä¿æŒæ ‡å‡†çš„ Vue 2.7 å†™æ³•ï¼Œè®¡ç®—å±æ€§å¤„ç† URLï¼ŒWatch å¤„ç†åŒå‘ç»‘å®šã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">&lt;script setup&gt;
<span class="hljs-keyword">import</span> { ref, watch, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">visible</span>: <span class="hljs-title class_">Boolean</span>,
  <span class="hljs-attr">surveyId</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Number</span>], <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> },
  <span class="hljs-attr">title</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>, <span class="hljs-attr">default</span>: <span class="hljs-string">'å¤–éƒ¨é¡µé¢'</span> }
});

<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'update:visible'</span>, <span class="hljs-string">'close'</span>]);

<span class="hljs-keyword">const</span> dialogVisible = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">true</span>);

<span class="hljs-keyword">const</span> surveyUrl = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-string">`/wj/<span class="hljs-subst">${props.surveyId}</span>`</span>);

<span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">visible</span>, <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> {
  dialogVisible.<span class="hljs-property">value</span> = val;
  <span class="hljs-keyword">if</span> (val) loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
});

<span class="hljs-title function_">watch</span>(dialogVisible, <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> {
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:visible'</span>, val);
});

<span class="hljs-keyword">const</span> <span class="hljs-title function_">onIframeLoad</span> = (<span class="hljs-params"/>) =&gt; {
  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClose</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">emit</span>(<span class="hljs-string">'close'</span>);
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-4">3. æ ·å¼å¤„ç†ï¼ˆå‘½åç©ºé—´éš”ç¦»æ³•ï¼‰</h2>
<p>ç”±äº <code>append-to-body</code> å°† DOM ç§»å‡ºäº†ç»„ä»¶ä½œç”¨åŸŸï¼Œæˆ‘ä»¬æ”¾å¼ƒ <code>scoped</code>ï¼Œè½¬è€Œä½¿ç”¨<strong>å…¨å±€æ ·å¼</strong>ã€‚ä¸ºäº†é˜²æ­¢æ±¡æŸ“å…¨å±€ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰æ ·å¼ä¸¥æ ¼åŒ…è£¹åœ¨ <code>custom-class</code> å®šä¹‰çš„å”¯ä¸€ç±»åä¸­ã€‚</p>
<h3 data-id="heading-5">CSS å®ç°åŸç†</h3>
<ol>
<li><strong>å»æ‰ <code>scoped</code></strong>ï¼šè®©æ ·å¼å˜ä¸ºå…¨å±€å¯è§ã€‚</li>
<li><strong>é¡¶å±‚åŒ…è£¹</strong>ï¼šæ‰€æœ‰è§„åˆ™å¿…é¡»å†™åœ¨ <code>.survey-portal-dialog</code> å†…éƒ¨ã€‚</li>
<li><strong>è¦†ç›– Element UI</strong>ï¼šç›´æ¥é€‰ä¸­ <code>.el-dialog__body</code> è¿›è¡Œé‡ç½®ã€‚</li>
</ol>
<pre><code class="hljs language-SCSS" lang="SCSS">&lt;style lang="scss"&gt;
<span class="hljs-comment">/* * æ³¨æ„ï¼šä¸åŠ  scoped 
 * é€šè¿‡ ".survey-portal-dialog" è¿™ä¸ªå”¯ä¸€ç±»åå®ç°é€»è¾‘éš”ç¦»
 */</span>
<span class="hljs-selector-class">.survey-portal-dialog</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;

  <span class="hljs-comment">/* 1. ä¿®æ­£å¤´éƒ¨æ ·å¼ */</span>
  <span class="hljs-selector-class">.el-dialog__header</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span> <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ebeef5</span>;
  }

  <span class="hljs-comment">/* 2. æš´åŠ›æ¸…é™¤ Body å†…è¾¹è·ï¼Œå®ç°å…¨å±æ— ç¼ */</span>
  <span class="hljs-selector-class">.el-dialog__body</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">overflow</span>: hidden;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  }

  <span class="hljs-comment">/* 3. å†…éƒ¨ Iframe å®¹å™¨é«˜åº¦è®¡ç®— */</span>
  <span class="hljs-selector-class">.iframe-wrapper</span> {
    <span class="hljs-comment">/* å‡å» Header é«˜åº¦(çº¦54px)ï¼Œé¿å…å‡ºç°åŒé‡æ»šåŠ¨æ¡ */</span>
    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">54px</span>);
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">overflow</span>: hidden;
  }
}
&lt;/style&gt;
</code></pre>
<h2 data-id="heading-6">4. æ–¹æ¡ˆä¼˜åŠ£åˆ†æ</h2>
<ul>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>æåº¦ç¨³å®š</strong>ï¼šä¸å— Vue Loader ç‰ˆæœ¬æˆ– <code>scoped</code> ç©¿é€è¯­æ³•ï¼ˆ<code>/deep/</code> vs <code>::v-deep</code>ï¼‰å˜æ›´çš„å½±å“ã€‚</li>
<li><strong>ç¬¦åˆç›´è§‰</strong>ï¼šå®Œç¾å…¼å®¹ <code>append-to-body</code> çš„ DOM ç§»åŠ¨è¡Œä¸ºã€‚</li>
</ul>
</li>
<li>
<p><strong>æ³¨æ„ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>å‘½åå”¯ä¸€æ€§</strong>ï¼šå¿…é¡»ä¿è¯ <code>survey-portal-dialog</code> è¿™ä¸ªç±»ååœ¨é¡¹ç›®ä¸­æ˜¯å”¯ä¸€çš„ï¼Œé¿å…ä¸å…¶ä»–å¼¹çª—å†²çªã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-7">5. æ€»ç»“</h2>
<p>åœ¨å¤„ç† Element UI çš„ <code>append-to-body</code> å¼¹çª—æ—¶ï¼Œâ€œå…¨å±€æ ·å¼ + å”¯ä¸€ç±»ååŒ…è£¹â€æ˜¯æœ€ç®€å•ä¸”å‰¯ä½œç”¨æœ€å°çš„æ–¹æ¡ˆã€‚å®ƒé€šè¿‡ CSS é€‰æ‹©å™¨çš„åµŒå¥—è§„åˆ™ï¼Œæ‰‹åŠ¨å»ºç«‹äº†ä¸€ä¸ªâ€œæ ·å¼æ²™ç®±â€ï¼Œæ—¢è§£å†³äº†å…¨å±è¦†ç›–é—®é¢˜ï¼Œåˆè§„é¿äº†å…¨å±€æ±¡æŸ“é£é™©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªæœˆæ‰‹æ“ JavaScript runtime]]></title>    <link>https://juejin.cn/post/7603393977476546586</link>    <guid>https://juejin.cn/post/7603393977476546586</guid>    <pubDate>2026-02-06T07:08:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603393977476546586" data-draft-id="7603393977476530202" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ä¸€ä¸ªæœˆæ‰‹æ“ JavaScript runtime"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-06T07:08:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ä¸€ä¸ªæœˆæ‰‹æ“ JavaScript runtime
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:08:17.000Z" title="Fri Feb 06 2026 07:08:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fthemackabu.dev%2Fblog%2Fjs-in-one-month" target="_blank" title="https://themackabu.dev/blog/js-in-one-month" ref="nofollow noopener noreferrer">building a javascript runtime in one month</a></p>
<p>ä½œè€…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fthemackabu" target="_blank" title="https://github.com/themackabu" ref="nofollow noopener noreferrer">themackabu</a></p>
<p>æ—¥æœŸï¼š2026å¹´1æœˆ2æ—¥</p>
<p>ç¿»è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN" target="_blank" title="https://github.com/TUARAN" ref="nofollow noopener noreferrer">TUARAN</a></p>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">å‰ç«¯å‘¨åˆŠ</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">TL;DR</h2>
<p>æˆ‘åšäº†ä¸€ä¸ªå« <strong>Ant</strong> çš„å°å‹ JavaScript runtimeï¼ˆå¤§æ¦‚ 2MBï¼‰ã€‚æºç ã€æµ‹è¯•å’Œæ–‡æ¡£éƒ½åœ¨ GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fthemackabu%2Fant%2F" target="_blank" title="https://github.com/themackabu/ant/" ref="nofollow noopener noreferrer">github.com/themackabu/â€¦</a>ã€‚</p>
<hr/>
<p>æˆ‘åœ¨ 11 æœˆåˆå¼€å§‹åšè¿™ä¸ªé¡¹ç›®æ—¶ï¼Œè„‘å­é‡Œåªæœ‰ä¸€ä¸ªç®€å•å¿µå¤´ï¼š</p>
<p>å¦‚æœèƒ½åšä¸€ä¸ªè¶³å¤Ÿå°ã€èƒ½åµŒè¿› C ç¨‹åºé‡Œï¼Œä½†åˆè¶³å¤Ÿå®Œæ•´ã€èƒ½è·‘çœŸå®ä»£ç çš„ JavaScript å¼•æ“ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿ</p>
<p>ä¸€ä¸ªä½ å¯ä»¥å‘å¸ƒå‡ºå»ã€å´ä¸ç”¨æ†ä¸Šå‡ ç™¾ MB çš„ V8 æˆ– Node çš„ä¸œè¥¿ã€‚æˆ‘ä»¥å‰ä¹Ÿè¯•è¿‡åšâ€œæç®€ç‰ˆ Denoâ€çš„è·¯å­ï¼Œä½†å§‹ç»ˆä¸å¤Ÿã€‚</p>
<p>æˆ‘æ²¡æƒ³åˆ°è¿™ä¼šèŠ±ä¸€ä¸ªæœˆï¼›æ›´æ²¡æƒ³åˆ°ä¸€ä¸ªæœˆçœŸçš„åšå¾—å‡ºæ¥ã€‚ä½†ä¸è®¾ deadline çš„é¡¹ç›®æœ‰ä¸ªç‰¹ç‚¹ï¼šä½ ä¼šä¸€ç›´å¾€å‰æ¨ï¼Œæ¨ç€æ¨ç€å°±åšå‡ºæ¥äº†ã€‚</p>
<h2 data-id="heading-1">ç¬¬ä¸€å‘¨ï¼šçº¯çº¯ç”Ÿå­˜æ¨¡å¼</h2>
<p>æˆ‘æ˜¯ä¸€è¾¹åšä¸€è¾¹å­¦â€”â€”è¯´ç™½äº†å°±æ˜¯ä¸æ–­è¯•é”™ï¼Œç„¶åæŠŠæ¯ä¸€ä¸ªé”™è¯¯ä¹Ÿä¸€èµ·â€œå‘å¸ƒâ€å‡ºå»ã€‚æœ€å¼€å§‹çš„å·¥ä½œåªå›´ç»•æœ€åŸºæœ¬çš„ä¸œè¥¿ï¼š</p>
<ul>
<li>æ•°å€¼è¿ç®—</li>
<li>å­—ç¬¦ä¸²å†…å»ºå‡½æ•°</li>
<li>ä¸€ä¸ªéå¸¸ç²—ç³™çš„ CommonJS æ¨¡å—ç³»ç»Ÿ</li>
</ul>
<p>æ¯ä¸€æ¬¡æäº¤éƒ½åƒæ˜¯åœ¨è™šæ— é‡ŒæŠ¢å›ä¸€ç‚¹ç‚¹åœ°ç›˜ã€‚</p>
<p>æœ€æ ¸å¿ƒçš„é—®é¢˜æ˜¯ <strong>è§£æï¼ˆparsingï¼‰</strong>ã€‚åœ¨å…¶å®ƒä¸œè¥¿èƒ½å·¥ä½œä¹‹å‰ï¼Œä½ å¿…é¡»å…ˆæœ‰ parserã€‚è€Œ parser å¾€å¾€æ¯”çœ‹èµ·æ¥å¤æ‚å¾—å¤šã€‚JavaScript è¿™ç§è¯­è¨€å°¤å…¶â€œè¯¡å¼‚â€ï¼š</p>
<ul>
<li>è‡ªåŠ¨åˆ†å·æ’å…¥ï¼ˆASIï¼‰æ˜¯è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œä½ å¾—å¤„ç†</li>
<li><code>this</code> çš„ç»‘å®šä¼šéšä¸Šä¸‹æ–‡å˜åŒ–</li>
<li><code>var</code> çš„æå‡ï¼ˆhoistingï¼‰æ„å‘³ç€å˜é‡ä¼šåœ¨èµ‹å€¼å‰å°±â€œå­˜åœ¨â€</li>
<li>ç”šè‡³ <code>window.window.window</code> è¿™ç§å†™æ³•éƒ½æ˜¯åˆæ³•çš„â€¦â€¦</li>
</ul>
<p>æˆ‘å‰å‡ å¤©åšçš„ä¸»è¦æ˜¯æŠŠåŸºæœ¬æµç¨‹è·‘é€šï¼Œç±»ä¼¼ä¸€ä¸ªâ€œèƒ½ç®—æ•°ã€ä¹Ÿèƒ½è°ƒç”¨å‡½æ•°â€çš„è®¡ç®—å™¨ã€‚ç”±äºåŠ¨é‡å·²ç»èµ·æ¥äº†ï¼Œæˆ‘å°±ä¸€ç›´ç»§ç»­ã€‚</p>
<p>runtime çš„æ ¸å¿ƒæ•°æ®è¡¨ç¤ºå¤§æ¦‚é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-type">uint64_t</span> <span class="hljs-type">jsval_t</span>;
</code></pre>
<p>åœ¨è¿™ä¸ª runtime é‡Œï¼Œæ¯ä¸€ä¸ª JavaScript å€¼éƒ½ç”¨ä¸€ä¸ª 64 ä½æ•´æ•°è¡¨ç¤ºï¼š<strong>NaN-boxing</strong>ã€‚</p>
<p>IEEE 754 æµ®ç‚¹è§„èŒƒæœ‰ä¸ªâ€œæ´â€ï¼šç†è®ºä¸Šå­˜åœ¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>53</mn></msup></mrow><annotation encoding="application/x-tex">2^{53}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">53</span></span></span></span></span></span></span></span></span></span></span></span></span> ç§ NaNï¼Œå…¶ä¸­ç»å¤§å¤šæ•°ä»æ¥ä¸ä¼šè¢«ç”¨åˆ°ã€‚æ‰€ä»¥æˆ‘æŠŠå®ƒä»¬â€œå·â€æ¥ç”¨äº†ã€‚</p>
<p>å¦‚æœæŠŠä¸€ä¸ª 64 ä½å€¼æŒ‰ double è§£é‡Šæ—¶å®ƒçœ‹èµ·æ¥åƒ NaNï¼ŒåŒæ—¶ exponent ä¸ mantissa åˆæ»¡è¶³ä½ å®šä¹‰çš„æ¨¡å¼ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥åœ¨è¿™äº› bit é‡Œå¡ä¸€ä¸ª tagã€‚ä½ æœ‰è¶³å¤Ÿç©ºé—´åŒæ—¶å­˜ä¸€ä¸ªæŒ‡é’ˆå’Œä¸€ä¸ªç±»å‹æ ‡ç­¾ï¼šæŠŠå¯¹è±¡å¼•ç”¨å’Œç±»å‹ tag ä¸€èµ·å¡è¿› 64 bitï¼Œç¬é—´æ‰€æœ‰ JS å€¼éƒ½èƒ½å¡è¿›ä¸€ä¸ª machine wordã€‚</p>
<p>ç¼–è¯‘æœŸæ–­è¨€ä¹Ÿè¯æ˜äº†å‰æï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">_Static_assert</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">double</span>) == <span class="hljs-number">8</span>, <span class="hljs-string">"NaN-boxing requires 64-bit IEEE 754 doubles"</span>);
<span class="hljs-keyword">_Static_assert</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">uint64_t</span>) == <span class="hljs-number">8</span>, <span class="hljs-string">"NaN-boxing requires 64-bit integers"</span>);
<span class="hljs-keyword">_Static_assert</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">double</span>) == <span class="hljs-keyword">sizeof</span>(<span class="hljs-type">uint64_t</span>), <span class="hljs-string">"double and uint64_t must have same size"</span>);
</code></pre>
<p>è¿™å°±æˆäº† runtime è¡¨ç¤ºâ€œä¸€åˆ‡â€çš„å¿ƒè„ï¼šæ¯ä¸ªæ•°å­—ã€å¯¹è±¡ã€å­—ç¬¦ä¸²ã€å‡½æ•°ã€Promiseã€å‚æ•°ã€ä½œç”¨åŸŸâ€¦â€¦å…¨éƒ¨éƒ½æ˜¯ä¸€ä¸ª <code>jsval_t</code>ã€‚</p>
<p>æ²¡æœ‰â€œå¸¦æ ‡ç­¾è”åˆä½“â€ã€æ²¡æœ‰ vtableã€ä¹Ÿä¸éœ€è¦é¢å¤–åˆ†é…å…ƒæ•°æ®â€”â€”åªæœ‰ bitsã€‚ä¸ºäº†æŠŠå®ƒè°ƒé¡ºï¼Œæˆ‘è¿­ä»£äº†å¥½å‡ å¤©ï¼›ä½†ä¸€æ—¦è·‘é€šï¼Œå…¶å®ƒä¸œè¥¿å°±ä¼šæ›´å¿«æ›´é¡ºã€‚NaN å’Œ Infinity å½“ç„¶ä¹Ÿæœ‰å‘ï¼Œä¸è¿‡é€šè¿‡å¾®è°ƒ boxing å¸ƒå±€ä¹Ÿèƒ½è§£å†³ã€‚</p>
<p>å¤§çº¦ç¬¬ 4 å¤©æˆ‘è®©å˜é‡èƒ½ç”¨äº†ï¼Œç¬¬ 5 å¤©å‡½æ•°èƒ½ç”¨äº†ï¼Œç¬¬ 6 å¤©å¾ªç¯èƒ½è·‘äº†ã€‚æ—©æœŸæäº¤éå¸¸æ•£ï¼šç®­å¤´å‡½æ•°ã€IIFEã€å¯é€‰é“¾ã€ç©ºå€¼åˆå¹¶â€¦â€¦æˆ‘å°±æ˜¯ä¸€è¾¹ç¿» MDN ä¸€è¾¹æƒ³èµ·å•¥åŠ å•¥ã€‚</p>
<h2 data-id="heading-2">åƒåœ¾å›æ”¶ï¼ˆGCï¼‰ç¾éš¾</h2>
<p>ç„¶åå°±æ’ä¸Šäº†çœŸæ­£çš„ç¡¬éª¨å¤´ï¼š<strong>å†…å­˜ç®¡ç†</strong>ã€‚</p>
<p>ä¸€ä¸ª JavaScript runtime å¿…é¡»æœ‰ GCï¼Œä½ ä¸å¯èƒ½è¦æ±‚ç”¨æˆ·æ‰‹åŠ¨ free å¯¹è±¡ã€‚æ‰€ä»¥åˆ°ç¬¬äºŒå‘¨å·¦å³ï¼Œæˆ‘å¼€å§‹å°è¯•è‡ªå·±å®ç° GCã€‚</p>
<p>ç»“æœæ˜¯ä¸€åœºå™©æ¢¦ï¼š</p>
<ul>
<li>æˆ‘åŠ æ–°ç‰¹æ€§ä¼šæŠŠ GC æå´©</li>
<li>æˆ‘ä¿® GC åˆä¼šæŠŠæ€§èƒ½æå´©</li>
<li>æˆ‘è¯•ç€æ¥å…¥åˆ«äººå†™çš„ GCï¼Œåˆå‘ç°é›†æˆå¤æ‚åˆ°ä¸å¯æ§</li>
</ul>
<p>è¿™æ®µæ—¶é—´æˆ‘éå¸¸ç—›è‹¦ã€‚æ‰‹å†™çš„ free-list GC è¢«æˆ‘å¼€å¼€å…³å…³ä¸Šç™¾æ¬¡ï¼Œæ¯æ¬¡éƒ½èƒ½æŠŠå¦ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—å¼„åã€‚æœ‰äº›æ—¥å­æˆ‘æ˜æ˜¾å·²ç»å¿«å´©äº†ï¼šå‡Œæ™¨ä¸‰ç‚¹ debugï¼Œè¯•å›¾å¼„æ¸…ä¸ºä»€ä¹ˆåç¨‹æ ˆæ²¡è¢«ä¿æŠ¤å¥½ã€ä¸ºä»€ä¹ˆå†…å­˜æ³„æ¼ã€ä¸ºä»€ä¹ˆåŠ äº† JSON æ”¯æŒä¹‹åä¸€åˆ‡éƒ½åäº†ã€‚</p>
<p>è½¬æŠ˜ç‚¹æ˜¯ï¼š<strong>æ”¾å¼ƒæ‰‹å†™ GCï¼Œæ”¹ç”¨ bdwgc</strong>ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªç”Ÿäº§çº§ GCï¼ˆå¾ˆå¤šè¯­è¨€éƒ½åœ¨ç”¨ï¼‰ã€‚æˆ‘æŠŠå®ƒå’Œè‡ªå·±æ‰‹å†™çš„â€œå¸¦å‰å‘å¼•ç”¨è·Ÿè¸ªçš„å†…å­˜å‹ç¼©â€ç»“åˆèµ·æ¥ï¼šå®ƒèƒ½åš markã€èƒ½åš forwarding çš„å“ˆå¸Œè¡¨ã€èƒ½åšç”Ÿäº§ GC ä¼šåšçš„æ‰€æœ‰äº‹ã€‚</p>
<p>ä¸€æ—¦é›†æˆä¸Šå»ï¼Œå†…å­˜é—®é¢˜å¤§éƒ¨åˆ†å°±æ¶ˆå¤±äº†ã€‚æˆ‘å†™ä»£ç çš„â€œè¯­æ°”â€ä¹Ÿå˜äº†ï¼šä¸œè¥¿å¼€å§‹æ›´ç¨³å®šåœ°å·¥ä½œèµ·æ¥ï¼Œæˆ‘åŠ äº† <code>process</code> æ¨¡å—ã€æŠŠé”™è¯¯ä¿¡æ¯åšå¾—æ›´å‹å¥½â€”â€”é€Ÿåº¦ä»è¿™é‡Œå¼€å§‹æ˜æ˜¾åŠ å¿«ã€‚</p>
<h2 data-id="heading-3">Promise / asyncï¼šå¦ä¸€ä¸ªé‡å…½</h2>
<p>ä½ ä»¥ä¸º async/await å¾ˆç®€å•ï¼Œç›´åˆ°ä½ å°è¯•è‡ªå·±å®ç°å®ƒã€‚</p>
<p>è¦å®ç° async/awaitï¼Œä½ éœ€è¦ Promiseï¼›Promise éœ€è¦ microtask ä¸å®šæ—¶å™¨ï¼›microtask ä¸å®šæ—¶å™¨åˆéœ€è¦äº‹ä»¶å¾ªç¯ï¼›äº‹ä»¶å¾ªç¯è¿˜è¦æœ‰åœ°æ–¹å­˜å¼‚æ­¥æ“ä½œçš„çŠ¶æ€ã€‚</p>
<p>æˆ‘ä¸ºè¿™ä»¶äº‹æŠ˜è…¾äº†å¥½å‡ å¤©ï¼š</p>
<ul>
<li>æƒ³è®© async å·¥ä½œï¼Œä½ éœ€è¦åç¨‹</li>
<li>åç¨‹éœ€è¦è°ƒåº¦</li>
<li>è°ƒåº¦éœ€è¦äº‹ä»¶å¾ªç¯</li>
<li>äº‹ä»¶å¾ªç¯è¿˜è¦çŸ¥é“åç¨‹ä»€ä¹ˆæ—¶å€™ç»“æŸ</li>
</ul>
<p>å¦‚æœåç¨‹åœ¨ç­‰ I/Oï¼Œä½ ä¸èƒ½é˜»å¡ï¼›å¦‚æœæŸä¸ªåç¨‹æ­»äº†ï¼Œå®ƒä¹Ÿä¸è¯¥æŠŠæ•´ä¸ªç³»ç»Ÿæ‹–æ­»ã€‚</p>
<p>ä½ çœ‹æäº¤å†å²å°±èƒ½æ„Ÿå—åˆ°ç—›è‹¦ï¼š<em>"async promise pushback"</em>ã€<em>"segfault when event loop empty"</em>ã€<em>"prevent dead task from blocking"</em>â€¦â€¦è¿™äº›å‘éƒ½æ˜¯åšåˆ°ä¸€åŠæ‰ä¼šå†’å‡ºæ¥çš„ã€‚</p>
<p>æ›´è¦å‘½çš„æ˜¯ï¼šJS Promise ä¸èƒ½â€œç®€åŒ–â€ã€‚å®ƒå¿…é¡»æ”¯æŒ <code>.then()</code> é“¾å¼è°ƒç”¨ï¼Œå¿…é¡»æ­£ç¡® rejectï¼Œè¿˜è¦èƒ½ä¸ async function é…åˆâ€”â€”è€Œ async function æœ¬è´¨ä¸Šæ˜¯ generator çš„è¯­æ³•ç³–ï¼Œè€Œ generator åˆæ˜¯ Promise ä¸å›è°ƒçš„è¯­æ³•ç³–â€¦â€¦</p>
<p>å¤§çº¦ç¬¬ 10 å¤©ï¼Œæˆ‘å¼•å…¥äº† <strong>minicoro</strong> ä½œä¸ºåç¨‹æ”¯æŒã€‚è¿™ä¸ªå†³å®šå¤§æ¦‚æ•‘äº†æ•´ä¸ªé¡¹ç›®ã€‚minicoro å¾ˆä¼˜é›…ï¼šä½ å®šä¹‰åŸºäºæ ˆçš„åç¨‹ï¼Œç„¶åè®©ç³»ç»Ÿåœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ã€‚æœ‰äº†åç¨‹ï¼Œæˆ‘ç»ˆäºèƒ½è®© async çœŸæ­£è·‘èµ·æ¥ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">coroutine</span> {</span>
	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">js</span> *<span class="hljs-title">js</span>;</span>
	<span class="hljs-type">coroutine_type_t</span> type;
	<span class="hljs-type">jsval_t</span> scope;
	<span class="hljs-type">jsval_t</span> this_val;
	<span class="hljs-type">jsval_t</span> awaited_promise;
	<span class="hljs-type">jsval_t</span> result;
	<span class="hljs-type">jsval_t</span> async_func;
	<span class="hljs-type">jsval_t</span> *args;
	<span class="hljs-type">int</span> nargs;
	<span class="hljs-type">bool</span> is_settled;
	<span class="hljs-type">bool</span> is_error;
	<span class="hljs-type">bool</span> is_done;
	<span class="hljs-type">jsoff_t</span> resume_point;
	<span class="hljs-type">jsval_t</span> yield_value;
	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">coroutine</span> *<span class="hljs-title">prev</span>;</span>
	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">coroutine</span> *<span class="hljs-title">next</span>;</span>
	mco_coro* mco;
	<span class="hljs-type">bool</span> mco_started;
	<span class="hljs-type">bool</span> is_ready;
} <span class="hljs-type">coroutine_t</span>;
</code></pre>
<p>æ‰€æœ‰ async æ‰§è¡Œç›¸å…³çš„ä¿¡æ¯éƒ½å¡è¿›äº†è¿™ä¸ªç»“æ„ï¼šscopeã€<code>this</code>ã€æ­£åœ¨ç­‰å¾…å“ªä¸ª promiseã€æ˜¯å¦å‡ºé”™â€¦â€¦æ¥ç€æˆ‘åªéœ€è¦è°ƒåº¦è¿™äº›ä¸œè¥¿å¹¶ç®¡ç†äº‹ä»¶å¾ªç¯ã€‚</p>
<p>æœ‰äº†åç¨‹ä»¥åï¼ŒPromise æ‰â€œæˆçœŸâ€ï¼š<code>.then()</code> é“¾èƒ½è·‘ï¼Œ<code>await</code> ä¼šçœŸæ­£æš‚åœå¹¶åœ¨ä¹‹åæ¢å¤æ‰§è¡Œã€‚runtime çš„ async ä¾§å¼€å§‹æˆå½¢ã€‚åé¢æˆ‘å†è¡¥é½ Promise å†…å»ºæ—¶å°±å¿«å¾ˆå¤šäº†ï¼Œå› ä¸ºæœ€éš¾çš„é‚£éƒ¨åˆ†å·²ç»è§£å†³ã€‚</p>
<h2 data-id="heading-4">JavaScript çš„â€œè¯¡å¼‚è¾¹ç¼˜æ¡ˆä¾‹â€</h2>
<p>ä¸­é—´ä¸¤å‘¨åŸºæœ¬å°±æ˜¯ï¼šä¸åœå‘ç° JavaScript æ¯”æˆ‘é¢„æƒ³ä¸­æ›´è¯¡å¼‚ã€‚</p>
<p>ä¸å¯é…ç½®å±æ€§ã€freeze/sealã€å¯é€‰é“¾çš„è¾¹ç¼˜è¯­ä¹‰ã€ä¸¥æ ¼æ¨¡å¼â€¦â€¦å¬èµ·æ¥éƒ½ä¸éš¾ï¼Œä½†æ¯ä¸€ä¸ªèƒŒåéƒ½æ˜¯å‡ åå¹´çš„è§„èŒƒç»†èŠ‚ï¼ŒçœŸå®ä¸–ç•Œçš„ä»£ç ä¼šä¾èµ–è¿™äº›è¡Œä¸ºã€‚</p>
<p>æˆ‘ä¸€ä¸ªä¸ªå•ƒè¿‡å»ï¼š</p>
<ul>
<li>å¤„ç†å†»ç»“/å¯†å°å¯¹è±¡</li>
<li>æ”¯æŒä¸å¯é…ç½®å±æ€§</li>
<li>ç¬¬ 10 æ¬¡ä¿®è§£æ„</li>
<li>ç»™å±æ€§æŸ¥æ‰¾åŠ  getter/setter çš„è®¿é—®å™¨æ”¯æŒ</li>
</ul>
<p>æ¯å¤©éƒ½åœ¨æ’ä¸€ä¸ªæ–°è¾¹ç¼˜æ¡ˆä¾‹ã€‚æœ‰æ—¶å€™ä¸€å¤©ä¿®å¥½å‡ ä¸ªï¼šæˆ‘å®ç°ä¸€ä¸ªåŠŸèƒ½ã€è·‘ä¸€è‡´æ€§æµ‹è¯•ã€å‘ç°ä¸‰ä¸ª bugã€ä¿®å®Œä¹‹ååˆå†’å‡ºäº”ä¸ªæ–° bugã€‚</p>
<p>ä½ çŸ¥é“ JavaScript æœ‰å¤šå°‘ç§æ–¹å¼è®¿é—®åŸå‹é“¾å—ï¼Ÿ</p>
<ul>
<li><code>__proto__</code></li>
<li><code>Object.getPrototypeOf()</code></li>
<li><code>Object.setPrototypeOf()</code></li>
<li><code>[[Prototype]]</code> å†…éƒ¨æ§½</li>
</ul>
<p>ä½ å¾—æŠŠå®ƒä»¬å…¨éƒ¨åšå¯¹ï¼Œè€Œä¸”è¿˜è¦å½¼æ­¤ä¸€è‡´ã€‚ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆçŸ­çš„æäº¤ä¿¡æ¯ï¼Œæ¯”å¦‚ â€œuse descriptor tables for getters/setters/propertiesâ€ï¼ŒèƒŒåå¯èƒ½å°±æ˜¯å‡ å‘¨çš„å·¥ä½œã€‚</p>
<p>è§£æ„çœ‹èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼š<code>const [a, b] = arr</code>ã€‚</p>
<p>ä½†ç¨€ç–æ•°ç»„æ€ä¹ˆåŠï¼Ÿå¯¹è±¡çš„å¯æšä¸¾å±æ€§æ€ä¹ˆåŠï¼ŸåµŒå¥—è§£æ„ã€é»˜è®¤å€¼ã€<code>...rest</code> å‚æ•°æ€ä¹ˆåŠï¼Ÿæ¯æ¬¡ä¿®ä¸€ä¸ªç‚¹éƒ½åƒæ‰“åœ°é¼ ï¼šä¿®å¥½è¿™é‡Œï¼Œé‚£é‡Œåˆåã€‚</p>
<p>ä¸€è‡´æ€§æµ‹è¯•åœ¨â€œæœ€å¥½çš„æ„ä¹‰ä¸Šâ€éå¸¸æ®‹é…·ï¼šæ¯æ¬¡è·‘éƒ½ä¼šå¤±è´¥åœ¨ä¸€ä¸ªæˆ‘æ ¹æœ¬ä¸çŸ¥é“å­˜åœ¨çš„è¯­ä¹‰ä¸Šã€‚ç„¶åæˆ‘ä¿®æ‰å®ƒï¼Œç»§ç»­å¤±è´¥åœ¨ä¸‹ä¸€ä¸ªã€‚è¿™ä¸ªå¾ªç¯å‘ç”Ÿäº†å‡ åæ¬¡ã€‚</p>
<h2 data-id="heading-5">ååŠç¨‹ï¼šå¼€å§‹å˜å¾—â€œèƒ½ç”¨â€</h2>
<p>ç¬¬äºŒå‘¨æ—¶ï¼Œæˆ‘å·²ç»æœ‰äº†ä¸€ä¸ªèƒ½æ‰§è¡Œä»£ç çš„ JavaScript runtimeã€‚å®ƒä¸å®Œæ•´ï¼Œä½†å®ƒæ˜¯çœŸçš„ã€‚</p>
<p>ç„¶åæˆ‘å¼€å§‹åŠ é‚£äº›è®©å®ƒå˜å¾—â€œæœ‰ç”¨â€çš„ä¸œè¥¿ï¼šæ–‡ä»¶ç³»ç»Ÿã€è·¯å¾„å·¥å…·ã€URL æ¨¡å—ã€ä»¥åŠé‚£ä¸ªå› ä¸º Bun è€Œå˜å¾—å¾ˆæœ‰åçš„å†…å»º HTTP serverã€‚çªç„¶ä¹‹é—´ï¼Œ<strong>çœŸå®ç¨‹åº</strong>å¼€å§‹èƒ½åœ¨ Ant ä¸Šè·‘äº†ã€‚</p>
<p>æ¯”å¦‚ä¸€ä¸ª Web æœåŠ¡å™¨åªè¦å†™ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { join } <span class="hljs-keyword">from</span> <span class="hljs-string">'ant:path'</span>;
<span class="hljs-keyword">import</span> { readFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'ant:fs'</span>;
<span class="hljs-keyword">import</span> { createRouter, addRoute, findRoute } <span class="hljs-keyword">from</span> <span class="hljs-string">'rou3'</span>;

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>();

<span class="hljs-title function_">addRoute</span>(router, <span class="hljs-string">'GET'</span>, <span class="hljs-string">'/status/:id'</span>, <span class="hljs-keyword">async</span> c =&gt; {
	<span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>));

	<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'Hello'</span>);
	<span class="hljs-keyword">const</span> name = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readFile</span>(<span class="hljs-title function_">join</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">dirname</span>, <span class="hljs-string">'name.txt'</span>));

	<span class="hljs-keyword">const</span> base = <span class="hljs-string">'{{name}} {{version}} server is responding with'</span>;
	<span class="hljs-keyword">const</span> data = { name, <span class="hljs-attr">version</span>: <span class="hljs-title class_">Ant</span>.<span class="hljs-title function_">version</span>() };

	<span class="hljs-keyword">return</span> c.<span class="hljs-property">res</span>.<span class="hljs-title function_">body</span>(<span class="hljs-string">`<span class="hljs-subst">${base.template(data)}</span> <span class="hljs-subst">${result}</span> <span class="hljs-subst">${c.params.id}</span>!`</span>);
});

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">c</span>) {
	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'request:'</span>, c.<span class="hljs-property">req</span>.<span class="hljs-property">method</span>, c.<span class="hljs-property">req</span>.<span class="hljs-property">uri</span>);
	<span class="hljs-keyword">const</span> result = <span class="hljs-title function_">findRoute</span>(router, c.<span class="hljs-property">req</span>.<span class="hljs-property">method</span>, c.<span class="hljs-property">req</span>.<span class="hljs-property">uri</span>);

	<span class="hljs-keyword">if</span> (result?.<span class="hljs-property">data</span>) {
		c.<span class="hljs-property">params</span> = result.<span class="hljs-property">params</span>;
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> result.<span class="hljs-title function_">data</span>(c);
	}

	c.<span class="hljs-property">res</span>.<span class="hljs-title function_">body</span>(<span class="hljs-string">'not found: '</span> + c.<span class="hljs-property">req</span>.<span class="hljs-property">uri</span>, <span class="hljs-number">404</span>);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'started on http://localhost:8000'</span>);
<span class="hljs-title class_">Ant</span>.<span class="hljs-title function_">serve</span>(<span class="hljs-number">8000</span>, handleRequest);
</code></pre>
<p>è¿è¡Œèµ·æ¥å°±æ˜¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ ant examples/server/server.js
started on http://localhost:8000

$ curl http://localhost:8000/status/world
Ant 0.3.2.6 server is responding with Hello world!
</code></pre>
<p>è¿™å°±æ˜¯â€œçœŸ JavaScriptâ€è·‘åœ¨ Ant é‡Œï¼šasync/awaitã€æ–‡ä»¶ I/Oã€HTTPã€å¸¦å‚æ•°è·¯ç”±ã€ç½‘ç»œã€å­—ç¬¦ä¸²æ“ä½œã€‚</p>
<p>ä¹‹åèŠ‚å¥æ›´å¿«ï¼šæ¯å¤©æ›´è‡ªä¿¡ï¼Œä¿®æ›´å¤š bugï¼ŒåŠ æ›´å¤šç‰¹æ€§ã€‚ç„¶ååˆ°äº†â€œå†·é—¨ä½†å¿…é¡»â€çš„é˜¶æ®µï¼šProxyã€Reflectionã€Symbolï¼Œç”šè‡³ class ç§æœ‰å­—æ®µ/æ–¹æ³•ã€‚å®ƒä»¬ä¹Ÿè®¸å¾ˆå°‘äººç”¨ï¼Œä½†è§„èŒƒé‡Œå†™äº†å°±å¾—æ”¯æŒã€‚</p>
<p>æˆ‘æœ€å–œæ¬¢çš„ä¸€ç±»èƒ½åŠ›ä¹‹ä¸€æ˜¯ <strong>Atomics</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> sharedBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedArrayBuffer</span>(<span class="hljs-number">256</span>);

<span class="hljs-keyword">const</span> int32View = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Int32Array</span>(sharedBuffer);
<span class="hljs-title class_">Atomics</span>.<span class="hljs-title function_">store</span>(int32View, <span class="hljs-number">0</span>, <span class="hljs-number">42</span>);
<span class="hljs-keyword">const</span> value = <span class="hljs-title class_">Atomics</span>.<span class="hljs-title function_">load</span>(int32View, <span class="hljs-number">0</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'stored 42, loaded:'</span>, value);

<span class="hljs-title class_">Atomics</span>.<span class="hljs-title function_">store</span>(int32View, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>);
<span class="hljs-keyword">const</span> oldValue = <span class="hljs-title class_">Atomics</span>.<span class="hljs-title function_">add</span>(int32View, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'old value:'</span>, oldValue);

<span class="hljs-title class_">Atomics</span>.<span class="hljs-title function_">store</span>(int32View, <span class="hljs-number">2</span>, <span class="hljs-number">100</span>);
<span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Atomics</span>.<span class="hljs-title function_">compareExchange</span>(int32View, <span class="hljs-number">2</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'exchanged, new value:'</span>, <span class="hljs-title class_">Atomics</span>.<span class="hljs-title function_">load</span>(int32View, <span class="hljs-number">2</span>));
</code></pre>
<pre><code class="hljs language-bash" lang="bash">$ ant examples/atomics.js
stored 42, loaded: 42
old value: 10
exchanged, new value: 200
</code></pre>
<h2 data-id="heading-6">æœ€åä¸€å‘¨ï¼šå¤šç±³è¯ºéª¨ç‰Œä¸€æ ·å€’ä¸‹</h2>
<p>å½“ Ant çš„æ ¸å¿ƒ runtime èƒ½è·‘ã€GC ç¨³äº†ã€Promise ä¹Ÿé€šäº†ä¹‹åï¼Œå…¶å®ƒä¸œè¥¿å°±åƒå¤šç±³è¯ºéª¨ç‰Œä¸€æ ·ï¼šå°é—®é¢˜è¢«ä¿®æ‰ã€ç¼ºçš„æ–¹æ³•è¡¥é½ã€è¾¹ç¼˜è¯­ä¹‰é€ä¸ªå¤„ç†ã€‚</p>
<p>æˆ‘é‡æ–°åŠ å›äº†æ•°ç»„ length æ ¡éªŒï¼Œä¿®äº†å¯¹è±¡çš„å±æ€§ç¼“å­˜å¤±æ•ˆé€»è¾‘ï¼›ä¸ºäº†ä¼˜åŒ– hash æ€§èƒ½åˆæ‰è¿›â€œå¤æ‚ç®—æ³• + å®‰å…¨å½±å“â€çš„å…”å­æ´â€”â€”å› ä¸ºæˆ‘å·²ç»åœ¨æ‰“ç£¨ä¸€ä¸ªâ€œèƒ½å·¥ä½œçš„ä¸œè¥¿â€ã€‚</p>
<p>åˆ°ç¬¬ 28 å¤©ï¼Œæˆ‘ç»™ä¸€ä¸ªçœŸçš„èƒ½ç”¨çš„ runtime æ”¶å°¾ï¼šæ”¯æŒ async/awaitã€é è°±çš„å†…å­˜ç®¡ç†ã€ç½‘ç»œã€æ–‡ä»¶ I/Oã€å¹¶é€šè¿‡ ES1â€“ES5 çš„ä¸€è‡´æ€§æµ‹è¯•ï¼Œè¿˜æ··æ­äº†ä¸€å †æ›´ç°ä»£çš„ç‰¹æ€§ã€‚</p>
<p>æˆ‘ç”šè‡³åœ¨åˆ«äººæé†’ä¹‹åæ‰â€œæƒ³èµ·æ¥â€æ‰“å¼€ LTO å’Œä¸€äº›ç¼–è¯‘å™¨ flag ğŸ˜…</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d32e5b0a1cb44e182e79748dda03079~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966501&amp;x-signature=Pjjr%2F0zBH5skHvHX9z%2BMnmjHcO8%3D" alt="uzaaft" loading="lazy"/></p>
<h2 data-id="heading-7">æœ€ç»ˆç»“æœ</h2>
<p>ä¸€ä¸ªæœˆåï¼ŒAnt ä½œä¸º JavaScript runtimeï¼š</p>
<ul>
<li>é€šè¿‡ javascript-zoo æµ‹è¯•å¥—ä»¶ä¸­ ES1 åˆ° ES5 çš„æ¯ä¸€ä¸ªä¸€è‡´æ€§æµ‹è¯•ï¼ˆ25 å¹´è§„èŒƒè·¨åº¦çš„å®Œæ•´å…¼å®¹ï¼‰</li>
<li>å®ç° async/awaitï¼Œå¹¶å…·å¤‡æ­£ç¡®çš„ Promise ä¸ microtask è¡Œä¸º</li>
<li>æ‹¥æœ‰ä¸€ä¸ªçœŸçš„èƒ½ç”¨ã€ä¸”ä¸æ¼å†…å­˜çš„ GC</li>
<li>åŸºäº libuv è¿è¡Œ Web æœåŠ¡å™¨ï¼ˆå’Œ Node ç±»ä¼¼çš„ç½‘ç»œåº•åº§ï¼‰</li>
<li>æ”¯æŒé€šè¿‡ FFI è°ƒç”¨ç³»ç»Ÿåº“ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { dlopen, suffix, <span class="hljs-title class_">FFIType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ant:ffi'</span>;

<span class="hljs-keyword">const</span> sqlite3 = <span class="hljs-title function_">dlopen</span>(<span class="hljs-string">`libsqlite3.<span class="hljs-subst">${suffix}</span>`</span>);

sqlite3.<span class="hljs-title function_">define</span>(<span class="hljs-string">'sqlite3_libversion'</span>, {
	<span class="hljs-attr">args</span>: [],
	<span class="hljs-attr">returns</span>: <span class="hljs-title class_">FFIType</span>.<span class="hljs-property">string</span>
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`version: <span class="hljs-subst">${sqlite3.sqlite3_libversion()}</span>`</span>);
</code></pre>
<pre><code class="hljs language-bash" lang="bash">$ ant examples/ffi/basic/sqlite.js
version: 3.43.2
</code></pre>
<ul>
<li>æ”¯æŒè¯»å†™æ–‡ä»¶ä¸å¼‚æ­¥ I/O</li>
<li>æ”¯æŒæ­£ç¡®çš„ä½œç”¨åŸŸã€æå‡ã€å˜é‡é®è”½</li>
<li>æ”¯æŒ classã€ç®­å¤´å‡½æ•°ã€è§£æ„ã€å±•å¼€ã€æ¨¡æ¿å­—ç¬¦ä¸²ã€å¯é€‰é“¾</li>
<li>è¦†ç›–ä¸€äº›å¤šæ•°äººæ ¹æœ¬ä¸ä¼šæƒ³åˆ°çš„â€œæ€ªè¾¹ç¼˜â€ï¼š<code>__proto__</code> èµ‹å€¼ã€å±æ€§æè¿°ç¬¦ã€ä¸å¯é…ç½®å±æ€§ã€å†»ç»“/å¯†å°å¯¹è±¡ï¼ˆå¯å‚è€ƒæµ‹è¯•ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fthemackabu%2Fant%2Fblob%2Fmaster%2Ftests%2F__proto__.js" target="_blank" title="https://github.com/themackabu/ant/blob/master/tests/__proto__.js" ref="nofollow noopener noreferrer"><code>tests/__proto__.js</code></a>ï¼‰</li>
<li>å®ç° ES Moduleï¼ˆimport / exportï¼‰</li>
<li>æ”¯æŒ Symbolã€Proxyã€Reflectã€WeakMap/WeakSetã€Map/Set</li>
<li>æ”¯æŒå…±äº«å†…å­˜ä¸ Atomics å¹¶å‘åŸè¯­</li>
</ul>
<p>æŠŠè¿™äº›ä¸²èµ·æ¥ï¼Œä½ ä¼šå‘ç°ä½ é¢å¯¹çš„å·²ç»å‡ ä¹æ˜¯ä¸€ä¸ªâ€œå®Œæ•´çš„ JavaScript runtimeâ€ï¼Œä¸å¤ªåƒç©å…·ã€‚</p>
<h2 data-id="heading-8">ä»£ä»·</h2>
<p>æˆ‘ä¸çŸ¥é“ä»£ä»·æ˜¯ä»€ä¹ˆã€‚</p>
<p>å¯èƒ½æ˜¯ç¡çœ ï¼Œå¯èƒ½æ˜¯å¥åº·ï¼Œå¯èƒ½æ˜¯æœ¬æ¥å¯ä»¥æ‹¿å»åšä»»ä½•å…¶å®ƒäº‹æƒ…çš„å¤§æŠŠæ—¶é—´ã€‚</p>
<p>æœ‰äº›æ—¥å­æˆ‘è¿ç»­å·¥ä½œ 10+ å°æ—¶ï¼›æœ‰äº›æ—¥å­ä¸€å¤© 20+ commitsã€‚é¡¹ç›®ä¸ä¼šå‡é€Ÿï¼Œåªä¼šåŠ é€Ÿï¼šæ¯å¤©æ›´è‡ªä¿¡ã€æ›´å¿«ã€ä¿®æ›´å¤š bugã€åŠ æ›´å¤šç‰¹æ€§ã€‚</p>
<p>åˆ°æœ€åï¼Œæˆ‘å¼€å§‹æ’ä¸Šé‚£äº›å¿…é¡»å»è¯» ECMAScript è§„èŒƒã€å»ç†è§£ V8 è¡Œä¸ºã€å»å¯¹æ¯”å…¶å®ƒå¼•æ“æ€ä¹ˆå¤„ç†æŸä¸ªæ€ªè§’è½çš„å·¥ä½œã€‚æ”¹ç¬¦å·è®¡æ•°ã€ä¼˜åŒ– classã€æŠŠå†…éƒ¨å±æ€§è¿ç§»åˆ° slotsï¼ˆåƒ V8 é‚£æ ·ï¼‰â€¦â€¦è¿™ç±»ä¼˜åŒ–æ­£å¸¸åº”è¯¥ç­‰ä»£ç ç¨³å®šåå†åšï¼Œä½†å› ä¸ºåœ°åŸºå·²ç»ç¨³äº†ï¼Œæˆ‘åœ¨æœ€åä¸€å‘¨åè€Œæœ‰äº†ä½™åŠ›å»åšã€‚</p>
<h2 data-id="heading-9">å‘å¸ƒåï¼šä¼˜åŒ–é˜¶æ®µ</h2>
<p>é¦–ä¸ª release æ˜¯ 11 æœˆ 26 æ—¥ã€‚ä¹‹åæ˜¯ä¸€æ®µæ²‰é»˜â€”â€”é‚£ç§â€œå‘å®Œç‰ˆæœ¬ä¹‹åå°±æ²¡å£°äº†â€çš„æ²‰é»˜ã€‚ç›´åˆ° 12 æœˆ 20 æ—¥å·¦å³ï¼Œå¼€å‘åˆæ¢å¤ã€‚</p>
<p>è¿™ä¸€æ¬¡ä¸åŒï¼šruntime èƒ½è·‘ã€èƒ½è¿‡æµ‹è¯•ï¼Œä½†æ€»æœ‰æ›´å¤šä¼˜åŒ–ç©ºé—´ã€‚xctrace è®©æˆ‘çœ‹æ¸…ä»€ä¹ˆæ‰æ˜¯çœŸæ­£çš„ç“¶é¢ˆã€‚12 æœˆä¸‹æ—¬å’Œ 1 æœˆåˆçš„æäº¤å‘ˆç°ä¸€ç§æ¨¡å¼ï¼šæ‰¾åˆ°ç“¶é¢ˆ â†’ ä¿®å¤ â†’ æµ‹é‡æå‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/066c3f4daf4a42bf811380a18180ce41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966501&amp;x-signature=iLb1Fg4MH9%2B8wsdBhOBHdyxUrGI%3D" alt="fast" loading="lazy"/></p>
<p>æˆ‘å…ˆä¸º typed array åŠ äº† arena allocatorã€‚ä¹‹å‰ typed array æ•£è½åœ¨ heap çš„å„å¤„ï¼›æˆ‘æŠŠå®ƒä»¬é›†ä¸­èµ·æ¥ï¼ŒåŠ é€Ÿåˆ†é…å¹¶æ”¹å–„ cache localityã€‚</p>
<p>ç„¶åæˆ‘æŠŠ getter/setter/property ä»â€œæ¯ä¸ª descriptor å•ç‹¬åˆ†é…â€æ”¹æˆâ€œdescriptor table æ‰¹å¤„ç†â€ï¼šæ›´å°‘çš„åˆ†é…ã€æ›´å°‘çš„æŒ‡é’ˆè¿½é€ã€‚</p>
<p>è®© <code>.</code> è¿ç®—ç¬¦æ”¯æŒ property reference ä¹Ÿå¾ˆçƒ¦ï¼šæ¯æ¬¡æŸ¥å±æ€§éƒ½è¦å…¨é‡è§£æï¼›äºæ˜¯æˆ‘åŠ äº† reference table è·³è¿‡é‡å¤å·¥ä½œã€‚</p>
<p>æˆ‘å¾ˆå–œæ¬¢ dispatch tableã€‚æˆ‘æŠŠ FFIã€JSON ç­‰è·¯å¾„æ”¹ä¸º computed gotoï¼Œè®© CPU ç›´æ¥è·³åˆ°æ­£ç¡®çš„ handlerï¼šå°‘ä¸€æ¬¡åˆ†æ”¯ã€å°‘ä¸€æ¬¡æŸ¥æ‰¾ã€‚</p>
<p>æŠŠ properties è¿åˆ° slots æ˜¯æœ€ä¾µå…¥çš„ä¸€æ¬¡é‡æ„ã€‚å¯¹è±¡ä¹‹å‰ç”¨çš„æ˜¯çµæ´»ä½†æ…¢çš„å±æ€§ç³»ç»Ÿï¼›slots åˆ™æ˜¯æŒ‰å¯¹è±¡ç±»å‹å›ºå®šç»“æ„ï¼Œè®© runtime èƒ½åšæ›´å¤šå‡è®¾ï¼Œå‡å°‘ indirectionã€‚</p>
<p>æŸä¸ªæ—¶åˆ»æˆ‘å¼€å§‹æ‹¿å®ƒå¯¹æ¯” Nodeï¼šè·‘åŒæ · benchmarkï¼ŒAnt è¡¨ç°å¦‚ä½•ï¼Ÿç»“æœå¼€å§‹å˜å¾—å¾ˆå¥½â€”â€”å¥½åˆ°ä½ ä¼šæƒ³ï¼šæˆ‘æ˜¯ä¸æ˜¯èƒ½åœ¨æŸäº›ç‚¹ä¸Šèµ¢ Nodeï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9db5280b5f3f4835b5b4e4af63a7ae63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770966501&amp;x-signature=iYGhJDm9lr9CzROb%2FRPV3m5ER58%3D" alt="bunnerfly wow" loading="lazy"/></p>
<p>ä¼˜åŒ– Ant çš„è¿‡ç¨‹ä¸­æˆ‘ä¼šä¿ç•™ä¸€äº›å¯å·¥ä½œçš„ snapshotï¼šå¦‚æœæŸæ¬¡ä¼˜åŒ–æŠŠä¸œè¥¿æåäº†ï¼Œæˆ‘è¿˜èƒ½é€€å›åˆ°ä¸€ä¸ªç¨³å®šç‚¹ã€‚äºæ˜¯å°±èƒ½æŒç»­å°æ­¥æ¨è¿›ï¼šæ¯æ¬¡æäº¤éƒ½æ¯”ä¸Šä¸€æ¬¡å¿«ä¸€ç‚¹ã€‚æœ‰äº›ä¼˜åŒ–æœ‰æ•ˆï¼Œæœ‰äº›æ²¡ç”¨ï¼Œä½†æ•´ä½“æ¨¡å¼å§‹ç»ˆæˆç«‹ï¼šprofile â†’ optimize â†’ measure â†’ commitã€‚</p>
<p>ç„¶åæ˜¯ GC çš„æ”¹è¿›ã€‚åœ¨æœ€åˆé‚£ä¸€ä¸ªæœˆé‡Œ bdwgc é›†æˆå¾—æŒºå¥½ï¼Œä½†åœ¨ä¼˜åŒ–é˜¶æ®µçš„æŸä¸ªæ—¶åˆ»å®ƒè¢«ç¦æ‰äº†ï¼Œruntime å°±å¼€å§‹æ¼å†…å­˜ã€‚æˆ‘é‡æ–°åŠ å›â€œå¯å»¶è¿Ÿ GCâ€çš„æœºåˆ¶ï¼Œå¹¶æŠŠæ—§ GC çš„å¤§éƒ¨åˆ†ä»£ç å–æ¶ˆæ³¨é‡Šã€‚</p>
<p>ä½†è¿™æ¬¡ä¸æ˜¯è€åŠæ³•ï¼šæˆ‘åšçš„æ˜¯ä¸€ä¸ª mark-copy + compact çš„ GCï¼Œèƒ½çœŸæ­£åšå†…å­˜ç¢ç‰‡æ•´ç†ã€‚æ—§ GC çš„é—®é¢˜æ˜¯å®ƒåœ¨é”™è¯¯çš„æ—¶æœºè¿è¡Œï¼Œå¯¼è‡´çƒ­è·¯å¾„å¡é¡¿ã€‚æ‰€ä»¥æˆ‘è®©å®ƒâ€œå¯å»¶è¿Ÿâ€ï¼šåœ¨é€»è¾‘å·¥ä½œå•å…ƒä¹‹é—´å†æ”¶é›†ï¼›åŒæ—¶ç”¨å‰å‘å¼•ç”¨è·Ÿè¸ªä¿è¯å¯¹è±¡ç§»åŠ¨åæŒ‡é’ˆä¸åã€‚GC å›æ¥äº†ï¼Œä½†æ›´èªæ˜ï¼šå®ƒä¼šç­‰åˆ°åˆé€‚çš„ç‚¹æš‚åœï¼Œå¹¶åœ¨è¿è¡Œæ—¶å‹ç¼©å †ã€‚</p>
<h2 data-id="heading-10">ä¸ºä»€ä¹ˆä¼šåšè¿™ä»¶äº‹</h2>
<p>è€å®è¯´ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ã€‚</p>
<p>ä¹Ÿè®¸æ˜¯èµŒæ°”ï¼Ÿä¹Ÿè®¸æ˜¯æƒ³è¯æ˜ç‚¹ä»€ä¹ˆï¼Ÿä¹Ÿè®¸æ˜¯çº¯ç²¹çš„æ‰§å¿µã€‚</p>
<p>é‚£ç§â€œè¿›å…¥å¿ƒæµâ€çš„çŠ¶æ€ï¼šä½ å†™ç€å†™ç€ï¼Œå…«å°æ—¶å°±è¿‡å»äº†ï¼Œå·²ç»å‡Œæ™¨å››ç‚¹ï¼Œç„¶åä½ æŠŠä»£ç  commit æ‰ï¼Œç¬¬äºŒå¤©åˆç»§ç»­ã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®ä¹‹æ‰€ä»¥å­˜åœ¨ï¼Œæ˜¯å› ä¸ºæˆ‘è„‘å­é‡ŒæŸä¸ªä¸œè¥¿å†³å®šâ€œå®ƒå¿…é¡»å­˜åœ¨â€ï¼Œå¹¶ä¸”ç›´åˆ°å®ƒçœŸçš„å­˜åœ¨ä¹‹å‰éƒ½ä¸ä¼šåœã€‚</p>
<p>å®ƒå¹¶ä¸å®Œç¾ã€‚ä»£ç é‡Œå¯èƒ½è¿˜æœ‰æ²¡å‘ç°çš„ bugï¼›å¯èƒ½è¿˜æœ‰æ²¡åšçš„æ€§èƒ½ä¼˜åŒ–ï¼›å¯èƒ½è¿˜æœ‰æ¼æ‰çš„è§„èŒƒè§’è½ã€‚</p>
<p>ä½†å®ƒèƒ½è·‘ï¼šä½ å¯ä»¥å†™çœŸå® JavaScriptï¼Œå®ƒä¼šæ‰§è¡Œï¼›ä½ å¯ä»¥ç”¨ async/awaitï¼›ä½ å¯ä»¥å†™æœåŠ¡å™¨ï¼›ä½ å¯ä»¥æ‹¿å®ƒå»åšçœŸå®äº‹æƒ…ã€‚</p>
<p>å¦‚æœä½ æ›¾ç»å¥½å¥‡ï¼šä¸€ä¸ªäººå¦‚æœè¶³å¤Ÿæ‰§ç€ã€åˆä¸ç¡è§‰ï¼Œèƒ½åšåˆ°ä»€ä¹ˆï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼šåšå‡ºä¸€ä¸ªè§„èŒƒå…¼å®¹çš„ JavaScript å¼•æ“ã€‚</p>
<p>æºç ã€æµ‹è¯•ä¸æ–‡æ¡£éƒ½åœ¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fthemackabu%2Fant%2F" target="_blank" title="https://github.com/themackabu/ant/" ref="nofollow noopener noreferrer">github.com/themackabu/â€¦</a>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ŠTanStack Start æ·±å…¥è§£æï¼šSingle Flight Mutations æœºåˆ¶ï¼ˆç¬¬äºŒç¯‡ï¼‰ã€‹]]></title>    <link>https://juejin.cn/post/7603352117638856713</link>    <guid>https://juejin.cn/post/7603352117638856713</guid>    <pubDate>2026-02-06T07:34:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603352117638856713" data-draft-id="7603352117638791177" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ŠTanStack Start æ·±å…¥è§£æï¼šSingle Flight Mutations æœºåˆ¶ï¼ˆç¬¬äºŒç¯‡ï¼‰ã€‹"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,JavaScript"/> <meta itemprop="datePublished" content="2026-02-06T07:34:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ŠTanStack Start æ·±å…¥è§£æï¼šSingle Flight Mutations æœºåˆ¶ï¼ˆç¬¬äºŒç¯‡ï¼‰ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:34:19.000Z" title="Fri Feb 06 2026 07:34:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fsingle-flight-mutations-in-tanstack-start-part-2%2F" target="_blank" title="https://frontendmasters.com/blog/single-flight-mutations-in-tanstack-start-part-2/" ref="nofollow noopener noreferrer">Single Flight Mutations in TanStack Start: Part 2</a></p>
<p>ä½œè€…ï¼šAdam Rackis</p>
<p>æ—¥æœŸï¼š2026å¹´1æœˆ28æ—¥</p>
<p>ç¿»è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN" target="_blank" title="https://github.com/TUARAN" ref="nofollow noopener noreferrer">TUARAN</a></p>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">å‰ç«¯å‘¨åˆŠ</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">TL;DR</h2>
<p>è¿™ç¯‡æ–‡ç« å»¶ç»­ Part 1 çš„æ€è·¯ï¼šæŠŠä¸€æ¬¡ mutation æ‰€éœ€çš„ UI æ›´æ–°æ•°æ®ï¼Œåœ¨åŒä¸€æ¬¡ç½‘ç»œå¾€è¿”é‡Œä¸€èµ·å¸¦å›æ¥ï¼ˆé¿å… mutation åå†é¢å¤–å‘è¯·æ±‚ refetchï¼‰ã€‚</p>
<p>Part 2 çš„é‡ç‚¹æ˜¯æŠŠâ€œè¦ refetch å“ªäº›æŸ¥è¯¢â€æŠ½æˆå¯å¤ç”¨çš„ middlewareï¼šè°ƒç”¨ server function æ—¶ä¼ å…¥ react-query çš„ <code>QueryKey[]</code>ï¼Œmiddleware ä¼šåœ¨å®¢æˆ·ç«¯ä» Query Cache æ‰¾åˆ°æ¯ä¸ª query å¯¹åº”çš„ <code>serverFn</code> å’Œå‚æ•°ï¼ŒæŠŠè¿™äº›ä¿¡æ¯é€šè¿‡ <code>sendContext</code> é€åˆ°æœåŠ¡ç«¯ç»Ÿä¸€æ‰§è¡Œï¼Œç„¶åæŠŠç»“æœå›ä¼ ç»™å®¢æˆ·ç«¯å¹¶ç”¨ <code>setQueryData</code> å†™å›ç¼“å­˜ã€‚</p>
<hr/>
<p>åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fsingle-flight-mutations-in-tanstack-start-part-1%2F" target="_blank" title="https://frontendmasters.com/blog/single-flight-mutations-in-tanstack-start-part-1/" ref="nofollow noopener noreferrer">Part 1</a> é‡Œï¼Œæˆ‘ä»¬èŠè¿‡ single flight mutationsï¼šå®ƒè®©ä½ åœ¨æ›´æ–°æ•°æ®æ—¶ï¼ŒåŒæ—¶æŠŠ UI éœ€è¦çš„æ‰€æœ‰ç›¸å…³â€œå·²æ›´æ–°æ•°æ®â€é‡æ–°è·å–å›æ¥ï¼Œå¹¶ä¸”æ•´ä¸ªè¿‡ç¨‹åªéœ€è¦ä¸€æ¬¡è·¨ç½‘ç»œçš„å¾€è¿”ã€‚</p>
<p>æˆ‘ä»¬å½“æ—¶åšäº†ä¸ªå¾ˆæœ´ç´ çš„å®ç°ï¼šåœ¨â€œæ›´æ–°æ•°æ®â€çš„ server function é‡Œç›´æ¥æŠŠéœ€è¦çš„ä¸œè¥¿ refetch ä¸€éã€‚å®ƒç¡®å®èƒ½ç”¨ï¼Œä½†å¯æ‰©å±•æ€§å’Œçµæ´»æ€§éƒ½ä¸€èˆ¬ï¼ˆè€¦åˆä¹Ÿåé‡ï¼‰ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æˆ‘ä»¬ä¼šå®ç°åŒæ ·çš„æ•ˆæœï¼Œä½†æ–¹å¼æ›´é€šç”¨ï¼šå®šä¹‰ä¸€ä¸ªâ€œrefetch middlewareâ€ï¼ŒæŠŠå®ƒæŒ‚åˆ°ä»»æ„ server function ä¸Šã€‚è¿™ä¸ª middleware å…è®¸æˆ‘ä»¬é€šè¿‡ react-query çš„ key æŒ‡å®šè¦ refetch çš„æ•°æ®ï¼Œå‰©ä¸‹çš„äº‹æƒ…å®ƒä¼šè‡ªåŠ¨å®Œæˆã€‚</p>
<p>æˆ‘ä»¬ä¼šå…ˆåšä¸€ä¸ªæœ€ç®€å•ç‰ˆæœ¬ï¼Œç„¶åä¸æ–­åŠ èƒ½åŠ›ã€åŠ çµæ´»æ€§ã€‚åˆ°æœ€åä¼šç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½†è¯·åˆ«è¯¯ä¼šï¼šä½ ä¸éœ€è¦æŠŠæ–‡ä¸­è®²çš„å…¨éƒ¨éƒ½ç”¨ä¸Šã€‚äº‹å®ä¸Šï¼Œå¯¹ç»å¤§å¤šæ•°åº”ç”¨æ¥è¯´ï¼Œsingle flight mutations å¯èƒ½å®Œå…¨æ— å…³ç´§è¦ã€‚æ›´åˆ«è¢«â€œé«˜çº§åšæ³•â€è¿·æƒ‘äº†ï¼šå¯¹å¾ˆå¤šå°åº”ç”¨è€Œè¨€ï¼Œç›´æ¥åœ¨ server function é‡Œ refetch ä¸€ç‚¹æ•°æ®å¯èƒ½å°±è¶³å¤Ÿäº†ã€‚</p>
<p>ä¸è¿‡ï¼Œè·Ÿç€åšä¸€éï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€äº›å¾ˆé…·çš„ TanStackï¼ˆç”šè‡³ TypeScriptï¼‰ç‰¹æ€§ã€‚å³ä¾¿ä½ æ°¸è¿œä¸ç”¨ single flight mutationsï¼Œè¿™äº›å†…å®¹ä¹Ÿå¾ˆå¯èƒ½åœ¨åˆ«çš„åœºæ™¯æ´¾ä¸Šç”¨åœºã€‚</p>
<h2 data-id="heading-1">æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ª Middleware</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ftanstack.com%2Fquery%2Flatest" target="_blank" title="https://tanstack.com/query/latest" ref="nofollow noopener noreferrer">TanStack Query</a>ï¼ˆæˆ‘ä»¬æœ‰æ—¶ä¹Ÿä¼šç§°å®ƒä¸º react-queryï¼Œè¿™æ˜¯å®ƒçš„åŒ…åï¼‰å·²ç»æœ‰ä¸€å¥—éå¸¸å¥½ç”¨çš„å±‚çº§ key ç³»ç»Ÿã€‚å¦‚æœæˆ‘ä»¬çš„ middleware èƒ½ç›´æ¥æ¥æ”¶â€œè¦ refetch çš„ query keysâ€ï¼Œç„¶åå°±â€¦â€¦è‡ªåŠ¨æå®šï¼Œé‚£è¯¥å¤šå¥½ï¼Ÿ</p>
<p>é—®é¢˜åœ¨äºï¼šmiddleware è¦æ€ä¹ˆçŸ¥é“â€œæ€ä¹ˆ refetchâ€å‘¢ï¼Ÿç¬¬ä¸€çœ¼çœ‹ç¡®å®æœ‰ç‚¹éš¾ã€‚æˆ‘ä»¬çš„ queriesï¼ˆåˆ»æ„ä¿æŒç®€å•ï¼‰æœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹ server functions çš„è°ƒç”¨ã€‚ä½†æˆ‘ä»¬æ²¡æ³•æŠŠä¸€ä¸ªæ™®é€šå‡½æ•°å¼•ç”¨ä¼ åˆ°æœåŠ¡ç«¯ï¼›å‡½æ•°ä¸å¯åºåˆ—åŒ–ï¼Œè¿™å¾ˆåˆç†ã€‚ä½ èƒ½æŠŠå­—ç¬¦ä¸²/æ•°å­—/å¸ƒå°”å€¼åºåˆ—åŒ–æˆ JSON åœ¨çº¿ä¸Šä¼ è¾“ï¼Œä½†ä¸€ä¸ªå‡½æ•°å¯èƒ½å¸¦çŠ¶æ€ã€é—­åŒ…ã€ä¸Šä¸‹æ–‡â€¦â€¦ä¼ è¿‡å»æ ¹æœ¬è¯´ä¸æ¸…ã€‚</p>
<p>é™¤éâ€”â€”å®ƒæ˜¯ TanStack Start çš„ server functionã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®èƒŒåçš„å·¥ç¨‹å¸ˆä»¬ä¸ºåºåˆ—åŒ–å¼•æ“åšäº†å®šåˆ¶ï¼Œä½¿å…¶æ”¯æŒ server functionsã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šä½ å¯ä»¥ä»å®¢æˆ·ç«¯æŠŠä¸€ä¸ª server function â€œå‘åˆ°â€æœåŠ¡ç«¯ï¼Œå®ƒèƒ½æ­£å¸¸å·¥ä½œã€‚åº•å±‚åŸç†æ˜¯ï¼šserver functions æœ‰ä¸€ä¸ªå†…éƒ¨ IDã€‚TanStack ä¼šæ•æ‰åˆ°å®ƒã€å‘é€ IDï¼Œç„¶ååœ¨å¦ä¸€ç«¯æŠŠ ID ååºåˆ—åŒ–æˆå¯¹åº”çš„ server functionã€‚</p>
<p>ä¸ºäº†è®©äº‹æƒ…æ›´ç®€å•ï¼Œæˆ‘ä»¬ä¸å¦¨æŠŠ server functionï¼ˆä»¥åŠå®ƒéœ€è¦çš„å‚æ•°ï¼‰ç›´æ¥æ”¾åˆ°æˆ‘ä»¬å·²ç»å®šä¹‰å¥½çš„ query options ä¸Šã€‚è¿™æ · middleware åªè¦æ‹¿åˆ° query keysï¼Œå°±èƒ½ä» TanStack Query çš„ cache é‡Œæ‰¾åˆ°å¯¹åº”çš„ query optionsï¼Œæ‹¿åˆ°â€œå¦‚ä½• refetchâ€çš„ä¿¡æ¯ï¼Œç„¶åæŠŠæ•´ä¸ªæµç¨‹ä¸²èµ·æ¥ã€‚</p>
<h2 data-id="heading-2">å¼€å§‹å§</h2>
<p>é¦–å…ˆå¼•å…¥ä¸€äº›å¥½ç”¨çš„ä¸œè¥¿ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { createMiddleware, getRouterInstance } <span class="hljs-keyword">from</span> <span class="hljs-string">"@tanstack/react-start"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">QueryClient</span>, <span class="hljs-title class_">QueryKey</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@tanstack/react-query"</span>;
</code></pre>
<p>æ¥ç€æ›´æ–°æˆ‘ä»¬çš„ epics åˆ—è¡¨æŸ¥è¯¢ï¼ˆä¸»è¦çš„ epics åˆ—è¡¨ï¼‰çš„ query optionsï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">epicsQueryOptions</span> = (<span class="hljs-params">page: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">queryOptions</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">"epics"</span>, <span class="hljs-string">"list"</span>, page],
    <span class="hljs-attr">queryFn</span>: <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getEpicsList</span>({ <span class="hljs-attr">data</span>: page });
      <span class="hljs-keyword">return</span> result;
    },
    <span class="hljs-attr">staleTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">5</span>,
    <span class="hljs-attr">gcTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">5</span>,
    <span class="hljs-attr">meta</span>: {
      <span class="hljs-attr">__revalidate</span>: {
        <span class="hljs-attr">serverFn</span>: getEpicsList,
        <span class="hljs-attr">arg</span>: page,
      },
    },
  });
};
</code></pre>
<p>æ³¨æ„è¿™ä¸ªæ–°å¢çš„ <code>meta</code> åŒºå—ã€‚å®ƒå…è®¸æˆ‘ä»¬å¾€ query ä¸Šå¡ä»»ä½•æˆ‘ä»¬éœ€è¦çš„å…ƒæ•°æ®ã€‚è¿™é‡Œæˆ‘ä»¬æ”¾äº† <code>getEpicsList</code> è¿™ä¸ª server function çš„å¼•ç”¨ä»¥åŠå®ƒéœ€è¦çš„å‚æ•°ã€‚è¿™æ ·å†™ç¡®å®ä¼šæœ‰â€œé‡å¤â€ï¼ˆ<code>queryFn</code> å†™äº†ä¸€æ¬¡è°ƒç”¨æ–¹å¼ï¼Œ<code>meta</code> åˆå†™äº†ä¸€æ¬¡ï¼‰ï¼Œå¦‚æœä½ è§‰å¾—åˆ«æ‰­ï¼Œå…ˆåˆ«æ€¥ï¼Œåé¢ä¼šå¤„ç†ã€‚summary æŸ¥è¯¢ï¼ˆç”¨äºç»Ÿè®¡æ•°é‡ï¼‰æˆ‘ä»¬ä¹Ÿä¼šåŒæ ·æ›´æ–°ï¼Œä¸è¿‡è¿™é‡Œæ²¡è´´ä»£ç ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æŠŠ middleware ä¸€ç‚¹ç‚¹æ‹¼å‡ºæ¥ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// the server function and args are all `any`, for now, </span>
<span class="hljs-comment">// to keep things simple we'll see how to type them in a bit</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">RevalidationPayload</span> = {
  <span class="hljs-attr">refetch</span>: {
    <span class="hljs-attr">key</span>: <span class="hljs-title class_">QueryKey</span>;
    <span class="hljs-attr">fn</span>: <span class="hljs-built_in">any</span>;
    <span class="hljs-attr">arg</span>: <span class="hljs-built_in">any</span>;
  }[];
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">RefetchMiddlewareConfig</span> = {
  <span class="hljs-attr">refetch</span>: <span class="hljs-title class_">QueryKey</span>[];
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> refetchMiddleware = <span class="hljs-title function_">createMiddleware</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span> })
  .<span class="hljs-title function_">inputValidator</span>(<span class="hljs-function">(<span class="hljs-params">config?: RefetchMiddlewareConfig</span>) =&gt;</span> config)
  .<span class="hljs-title function_">client</span>(<span class="hljs-keyword">async</span> ({ next, data }) =&gt; {
    <span class="hljs-keyword">const</span> { refetch = [] } = data ?? {};
</code></pre>
<p>æˆ‘ä»¬ä¸º middleware å®šä¹‰äº†ä¸€ä¸ªè¾“å…¥ã€‚è¿™ä¸ªè¾“å…¥ä¼šè‡ªåŠ¨ä¸â€œæŒ‚è½½è¯¥ middleware çš„ server function çš„è¾“å…¥â€åˆå¹¶ã€‚</p>
<p>æˆ‘ä»¬æŠŠè¾“å…¥å†™æˆå¯é€‰çš„ï¼ˆ<code>config?</code>ï¼‰ï¼Œå› ä¸ºå®Œå…¨å¯èƒ½å‡ºç°è¿™ç§æƒ…å†µï¼šä½ åªæƒ³è°ƒç”¨ server functionï¼Œä½†å¹¶ä¸æƒ³ refetch ä»»ä½•ä¸œè¥¿ã€‚</p>
<p>ç„¶åå¼€å§‹å†™ <code>.client</code> å›è°ƒï¼ˆåœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼‰ï¼šå…ˆæ‹¿åˆ°è¦ refetch çš„ keysï¼š</p>
<p><code>const { refetch = [] } = data ?? {};</code></p>
<p>æ¥ç€æˆ‘ä»¬æ‹¿åˆ° <code>queryClient</code> å’Œå®ƒçš„ cacheï¼Œå¹¶åˆ›å»ºä¸€ä¸ª payloadï¼Œä¹‹åä¼šé€šè¿‡ <code>sendContext</code> å‘åˆ° <code>.server</code> å›è°ƒï¼Œè®©å®ƒæ‰§è¡ŒçœŸæ­£çš„ refetchã€‚</p>
<p>å¦‚æœä½ å¯¹ TanStack middleware ä¸ç†Ÿï¼Œæˆ‘ä¹‹å‰å†™çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fintroducing-tanstack-start-middleware%2F" target="_blank" title="https://frontendmasters.com/blog/introducing-tanstack-start-middleware/" ref="nofollow noopener noreferrer">middleware æ–‡ç« </a> å¯èƒ½ä¼šæ›´é€‚åˆä½œä¸ºå…¥é—¨ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getRouterInstance</span>();
<span class="hljs-keyword">const</span> <span class="hljs-attr">queryClient</span>: <span class="hljs-title class_">QueryClient</span> = router.<span class="hljs-property">options</span>.<span class="hljs-property">context</span>.<span class="hljs-property">queryClient</span>;
<span class="hljs-keyword">const</span> cache = queryClient.<span class="hljs-title function_">getQueryCache</span>();

<span class="hljs-keyword">const</span> <span class="hljs-attr">revalidate</span>: <span class="hljs-title class_">RevalidationPayload</span> = {
  <span class="hljs-attr">refetch</span>: [],
};
</code></pre>
<p>æˆ‘ä»¬çš„ <code>queryClient</code> å·²ç»æŒ‚åœ¨ TanStack router çš„ context ä¸Šï¼Œæ‰€ä»¥åªè¦æ‹¿åˆ° router å†å–å‡ºæ¥å³å¯ã€‚</p>
<p>è¿˜è®°å¾—æˆ‘ä»¬æŠŠ <code>__revalidate</code> å¡åˆ° query options çš„ <code>meta</code> é‡Œå—ï¼Ÿç°åœ¨æˆ‘ä»¬é’ˆå¯¹æ¯ä¸ª key å» cache é‡Œæ‰¾å¯¹åº” queryï¼Œå¹¶æŠŠ <code>serverFn/arg</code> æŠ½å‡ºæ¥ç»„è£…æˆè¦å‘ç»™æœåŠ¡ç«¯çš„ payloadã€‚</p>
<pre><code class="hljs language-ts" lang="ts">refetch.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key: QueryKey</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> entry = cache.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">queryKey</span>: key, <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span> });
  <span class="hljs-keyword">if</span> (!entry) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-attr">revalidatePayload</span>: <span class="hljs-built_in">any</span> = entry?.<span class="hljs-property">meta</span>?.<span class="hljs-property">__revalidate</span> ?? <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">if</span> (revalidatePayload) {
    revalidate.<span class="hljs-property">refetch</span>.<span class="hljs-title function_">push</span>({
      key,
      <span class="hljs-attr">fn</span>: revalidatePayload.<span class="hljs-property">serverFn</span>,
      <span class="hljs-attr">arg</span>: revalidatePayload.<span class="hljs-property">arg</span>,
    });
  }
});
</code></pre>
<p><code>if (!entry) return;</code> æ˜¯ä¸ºäº†é˜²æ­¢è¯·æ±‚é‡ŒåŒ…å«äº†â€œå½“å‰ç¼“å­˜é‡Œæ ¹æœ¬ä¸å­˜åœ¨â€çš„ queryï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯èƒ½ä»æœªåœ¨ UI é‡Œè¢«è¯·æ±‚è¿‡ï¼‰ã€‚è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬æ‹¿ä¸åˆ° <code>serverFn</code>ï¼Œä¹Ÿå°±æ— æ³• refetchã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥æŠŠ middleware è¾“å…¥æ‰©å±•å¾—æ›´ä¸°å¯Œï¼šæ¯”å¦‚å¯¹é‚£äº›â€œæ— è®ºæ˜¯å¦åœ¨ç¼“å­˜é‡Œéƒ½å¿…é¡»æ‰§è¡Œâ€çš„ refetchï¼Œç›´æ¥æŠŠ <code>serverFn + arg</code> ä¸€èµ·ä¼ ä¸Šå»ã€‚æ¯”å¦‚ä½ æ‰“ç®— mutation å redirectï¼Œå¹¶å¸Œæœ›æ–°é¡µé¢çš„æ•°æ®èƒ½é¢„å–ã€‚æœ¬æ–‡ä¸å®ç°è¿™ä¸ªå˜ä½“ï¼Œä½†å®ƒåªæ˜¯åŒä¸€ä¸»é¢˜çš„å¦ä¸€ç§ç»„åˆã€‚</p>
<p>æ¥ç€æˆ‘ä»¬è°ƒç”¨ <code>next</code>ï¼Œè§¦å‘çœŸæ­£çš„ server functionï¼ˆä»¥åŠå…¶å®ƒ middlewareï¼‰ã€‚é€šè¿‡ <code>sendContext</code> æˆ‘ä»¬æŠŠ <code>revalidate</code> å‘åˆ°æœåŠ¡ç«¯ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>({
  <span class="hljs-attr">sendContext</span>: {
    revalidate,
  },
});
</code></pre>
<p><code>result</code> æ˜¯ server function è°ƒç”¨çš„è¿”å›å€¼ã€‚å®ƒçš„ <code>context</code> ä¸Šä¼šæœ‰ä¸€ä¸ª <code>payloads</code> æ•°ç»„ï¼ˆç”±ä¸‹æ–¹ <code>.server</code> å›è°ƒè¿”å›ï¼‰ï¼Œå…¶ä¸­æ¯ä¸€é¡¹éƒ½åŒ…å« <code>key</code>ï¼ˆquery keyï¼‰å’Œ <code>result</code>ï¼ˆå¯¹åº”æ•°æ®ï¼‰ã€‚æˆ‘ä»¬éå†å¹¶å†™å› query cacheã€‚</p>
<p>æˆ‘ä»¬ç¨åä¼šä¿®å¤è¿™é‡Œç”¨ <code>// @ts-expect-error</code> é®æ‰çš„ TS é”™è¯¯ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// @ts-expect-error</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> result.<span class="hljs-property">context</span>?.<span class="hljs-property">payloads</span> ?? []) {
  queryClient.<span class="hljs-title function_">setQueryData</span>(entry.<span class="hljs-property">key</span>, entry.<span class="hljs-property">result</span>);
}

<span class="hljs-keyword">return</span> result;
</code></pre>
<h2 data-id="heading-3">æœåŠ¡ç«¯å›è°ƒ</h2>
<p>æœåŠ¡ç«¯å›è°ƒå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">.<span class="hljs-title function_">server</span>(<span class="hljs-keyword">async</span> ({ next, context }) =&gt; {
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>({
    <span class="hljs-attr">sendContext</span>: {
      <span class="hljs-attr">payloads</span>: [] <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>[]
    }
  });

  <span class="hljs-keyword">const</span> allPayloads = context.<span class="hljs-property">revalidate</span>.<span class="hljs-property">refetch</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">refetchPayload</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">key</span>: refetchPayload.<span class="hljs-property">key</span>,
      <span class="hljs-attr">result</span>: refetchPayload.<span class="hljs-title function_">fn</span>({ <span class="hljs-attr">data</span>: refetchPayload.<span class="hljs-property">arg</span> })
    };
  });

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> refetchPayload <span class="hljs-keyword">of</span> allPayloads) {
    result.<span class="hljs-property">sendContext</span>.<span class="hljs-property">payloads</span>.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">key</span>: refetchPayload.<span class="hljs-property">key</span>,
      <span class="hljs-attr">result</span>: <span class="hljs-keyword">await</span> refetchPayload.<span class="hljs-property">result</span>
    });
  }

  <span class="hljs-keyword">return</span> result;
});
</code></pre>
<p>æˆ‘ä»¬ä¼šç«‹åˆ»è°ƒç”¨ <code>next()</code>ï¼Œå®ƒä¼šæ‰§è¡Œè¿™ä¸ª middleware æ‰€æŒ‚è½½çš„ server functionã€‚æˆ‘ä»¬åœ¨ <code>sendContext</code> é‡Œä¼ å…¥ä¸€ä¸ª <code>payloads</code> æ•°ç»„ï¼šè¿™ä¸ªæ•°ç»„å†³å®šäº†â€œæœåŠ¡ç«¯æœ€ç»ˆä¼šå‘å›ç»™å®¢æˆ·ç«¯å›è°ƒçš„æ•°æ®ç»“æ„â€ï¼ˆä¹Ÿå°±æ˜¯ <code>.client</code> é‡Œå¾ªç¯çš„é‚£ä»½ <code>payloads</code>ï¼‰ã€‚</p>
<p>ç„¶åæˆ‘ä»¬éå†å®¢æˆ·ç«¯é€šè¿‡ <code>sendContext</code> ä¼ ä¸Šæ¥çš„ <code>revalidate</code> payloadï¼Œå¹¶ä» <code>context</code> ä¸Šè¯»å‡ºæ¥ï¼ˆæ˜¯çš„ï¼š<em>send</em> contextï¼Œå‘ä¸Šæ¥å†ä» context è¯»å‡ºæ¥ï¼‰ã€‚æ¥ç€è°ƒç”¨æ‰€æœ‰ server functionsï¼Œå¹¶æŠŠç»“æœ push åˆ° <code>payloads</code> æ•°ç»„é‡Œã€‚</p>
<p>æŠŠå‰åæ‹¼èµ·æ¥ï¼Œè¿™å°±æ˜¯å®Œæ•´ middlewareï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> refetchMiddleware = <span class="hljs-title function_">createMiddleware</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span> })
  .<span class="hljs-title function_">inputValidator</span>(<span class="hljs-function">(<span class="hljs-params">config?: RefetchMiddlewareConfig</span>) =&gt;</span> config)
  .<span class="hljs-title function_">client</span>(<span class="hljs-keyword">async</span> ({ next, data }) =&gt; {
    <span class="hljs-keyword">const</span> { refetch = [] } = data ?? {};

    <span class="hljs-keyword">const</span> router = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getRouterInstance</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-attr">queryClient</span>: <span class="hljs-title class_">QueryClient</span> = router.<span class="hljs-property">options</span>.<span class="hljs-property">context</span>.<span class="hljs-property">queryClient</span>;
    <span class="hljs-keyword">const</span> cache = queryClient.<span class="hljs-title function_">getQueryCache</span>();

    <span class="hljs-keyword">const</span> <span class="hljs-attr">revalidate</span>: <span class="hljs-title class_">RevalidationPayload</span> = {
      <span class="hljs-attr">refetch</span>: [],
    };

    refetch.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key: QueryKey</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> entry = cache.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">queryKey</span>: key, <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span> });
      <span class="hljs-keyword">if</span> (!entry) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> <span class="hljs-attr">revalidatePayload</span>: <span class="hljs-built_in">any</span> = entry?.<span class="hljs-property">meta</span>?.<span class="hljs-property">__revalidate</span> ?? <span class="hljs-literal">null</span>;

      <span class="hljs-keyword">if</span> (revalidatePayload) {
        revalidate.<span class="hljs-property">refetch</span>.<span class="hljs-title function_">push</span>({
          key,
          <span class="hljs-attr">fn</span>: revalidatePayload.<span class="hljs-property">serverFn</span>,
          <span class="hljs-attr">arg</span>: revalidatePayload.<span class="hljs-property">arg</span>,
        });
      }
    });

    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>({
      <span class="hljs-attr">sendContext</span>: {
        revalidate,
      },
    });

    <span class="hljs-comment">// @ts-expect-error</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> result.<span class="hljs-property">context</span>?.<span class="hljs-property">payloads</span> ?? []) {
      queryClient.<span class="hljs-title function_">setQueryData</span>(entry.<span class="hljs-property">key</span>, entry.<span class="hljs-property">result</span>);
    }

    <span class="hljs-keyword">return</span> result;
  })
  .<span class="hljs-title function_">server</span>(<span class="hljs-keyword">async</span> ({ next, context }) =&gt; {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>({
      <span class="hljs-attr">sendContext</span>: {
        <span class="hljs-attr">payloads</span>: [] <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>[],
      },
    });

    <span class="hljs-keyword">const</span> allPayloads = context.<span class="hljs-property">revalidate</span>.<span class="hljs-property">refetch</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">refetchPayload</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">key</span>: refetchPayload.<span class="hljs-property">key</span>,
        <span class="hljs-attr">result</span>: refetchPayload.<span class="hljs-title function_">fn</span>({ <span class="hljs-attr">data</span>: refetchPayload.<span class="hljs-property">arg</span> }),
      };
    });

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> refetchPayload <span class="hljs-keyword">of</span> allPayloads) {
      result.<span class="hljs-property">sendContext</span>.<span class="hljs-property">payloads</span>.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">key</span>: refetchPayload.<span class="hljs-property">key</span>,
        <span class="hljs-attr">result</span>: <span class="hljs-keyword">await</span> refetchPayload.<span class="hljs-property">result</span>,
      });
    }

    <span class="hljs-keyword">return</span> result;
  });
</code></pre>
<h2 data-id="heading-4">ä¿®å¤ TypeScript æŠ¥é”™</h2>
<p>ä¸ºä»€ä¹ˆä¸‹é¢è¿™ä¸€è¡Œæ˜¯æ— æ•ˆçš„ï¼Ÿ</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// @ts-expect-error</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> result.<span class="hljs-property">context</span>?.<span class="hljs-property">payloads</span> ?? []) {
</code></pre>
<p>è¿™æ®µä»£ç è¿è¡Œåœ¨ <code>.client</code> å›è°ƒé‡Œï¼Œå¹¶ä¸”æ˜¯åœ¨æˆ‘ä»¬è°ƒç”¨ <code>next()</code> ä¹‹åè¿è¡Œçš„ã€‚æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬æ˜¯åœ¨æœåŠ¡ç«¯è¯»å–â€œå‘é€å›å®¢æˆ·ç«¯çš„æ•°æ®â€ï¼ˆé€šè¿‡ <code>sendContext</code> ä¼ å›æ¥çš„ payloadï¼‰ã€‚è¿™æ®µä»£ç åœ¨è¿è¡Œæ—¶ç¡®å®èƒ½å·¥ä½œï¼Œé‚£ä¸ºä»€ä¹ˆç±»å‹å¯¹ä¸ä¸Šï¼Ÿ</p>
<p>æˆ‘åœ¨ä¸Šé¢æåˆ°çš„ middleware æ–‡ç« é‡Œè§£é‡Šè¿‡ï¼šæœåŠ¡ç«¯å›è°ƒèƒ½â€œçœ‹è§â€å®¢æˆ·ç«¯å‘ç»™å®ƒçš„å†…å®¹ï¼Œä½†åè¿‡æ¥ä¸æˆç«‹ã€‚è¿™ç§ä¿¡æ¯å¤©ç”Ÿå°±ä¸æ˜¯åŒå‘å¯è§çš„ï¼›ç±»å‹æ¨æ–­ä¹Ÿæ²¡æ³•å€’ç€è·‘ã€‚</p>
<p>è§£å†³æ–¹å¼å¾ˆç®€å•ï¼šæŠŠ middleware æ‹†æˆä¸¤æ®µï¼Œè®©åä¸€æ®µ middleware ä¾èµ–å‰ä¸€æ®µã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> prelimRefetchMiddleware = <span class="hljs-title function_">createMiddleware</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span> })
  .<span class="hljs-title function_">inputValidator</span>(<span class="hljs-function">(<span class="hljs-params">config?: RefetchMiddlewareConfig</span>) =&gt;</span> config)
  .<span class="hljs-title function_">client</span>(<span class="hljs-keyword">async</span> ({ next, data }) =&gt; {
    <span class="hljs-keyword">const</span> { refetch = [] } = data ?? {};

    <span class="hljs-keyword">const</span> router = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getRouterInstance</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-attr">queryClient</span>: <span class="hljs-title class_">QueryClient</span> = router.<span class="hljs-property">options</span>.<span class="hljs-property">context</span>.<span class="hljs-property">queryClient</span>;

    <span class="hljs-comment">// same</span>
    <span class="hljs-comment">// as</span>
    <span class="hljs-comment">// before</span>

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>({
      <span class="hljs-attr">sendContext</span>: {
        revalidate,
      },
    });

    <span class="hljs-comment">// those last few lines are removed</span>
  })
  .<span class="hljs-title function_">server</span>(<span class="hljs-keyword">async</span> ({ next, context }) =&gt; {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>({
      <span class="hljs-attr">sendContext</span>: {
        <span class="hljs-attr">payloads</span>: [] <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>[],
      },
    });

    <span class="hljs-comment">// exactly the same as before</span>

    <span class="hljs-keyword">return</span> result;
  });

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> refetchMiddleware = <span class="hljs-title function_">createMiddleware</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span> })
  .<span class="hljs-title function_">middleware</span>([prelimRefetchMiddleware]) <span class="hljs-comment">// &lt;-------- connect them!</span>
  .<span class="hljs-title function_">client</span>(<span class="hljs-keyword">async</span> ({ next }) =&gt; {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>();

    <span class="hljs-keyword">const</span> router = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getRouterInstance</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-attr">queryClient</span>: <span class="hljs-title class_">QueryClient</span> = router.<span class="hljs-property">options</span>.<span class="hljs-property">context</span>.<span class="hljs-property">queryClient</span>;

    <span class="hljs-comment">// and here's those last few lines we removed from above</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> result.<span class="hljs-property">context</span>?.<span class="hljs-property">payloads</span> ?? []) {
      queryClient.<span class="hljs-title function_">setQueryData</span>(entry.<span class="hljs-property">key</span>, entry.<span class="hljs-property">result</span>);
    }

    <span class="hljs-keyword">return</span> result;
  });
</code></pre>
<p>æ•´ä½“é€»è¾‘ä¸å˜ï¼Œåªæ˜¯æŠŠ <code>.client</code> å›è°ƒé‡Œ <code>next()</code> ä¹‹åé‚£éƒ¨åˆ†ç§»åˆ°äº†å•ç‹¬çš„ middleware é‡Œã€‚å…¶ä½™éƒ¨åˆ†ç•™åœ¨å¦ä¸€ä¸ª middleware ä¸­ï¼Œå¹¶ä½œä¸ºè¾“å…¥ä¼ ç»™æ–°çš„è¿™ä¸ª middlewareã€‚è¿™æ ·å½“æˆ‘ä»¬åœ¨ <code>refetchMiddleware</code> é‡Œè°ƒç”¨ <code>next</code> æ—¶ï¼ŒTypeScript å°±èƒ½çœ‹åˆ°â€œä»æœåŠ¡ç«¯å‘ä¸‹æ¥çš„ context æ•°æ®â€ï¼Œå› ä¸ºè¿™äº›æ•°æ®æ˜¯åœ¨ <code>prelimRefetchMiddleware</code> é‡Œå‘é€çš„ï¼Œè€Œå®ƒåˆæ˜¯æœ¬ middleware çš„è¾“å…¥ï¼Œå› æ­¤ TS å¯ä»¥å®Œæ•´çœ‹æ¸…ç±»å‹æµåŠ¨ã€‚</p>
<h2 data-id="heading-5">æ¥èµ·æ¥</h2>
<p>ç°åœ¨æˆ‘ä»¬å›åˆ°â€œæ›´æ–° epicâ€çš„ server functionï¼šæŠŠä¹‹å‰çš„æ‰‹åŠ¨ refetch ç§»é™¤ï¼Œæ”¹ä¸ºä½¿ç”¨ refetch middlewareã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> updateEpic = <span class="hljs-title function_">createServerFn</span>({ <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span> })
  .<span class="hljs-title function_">middleware</span>([refetchMiddleware])
  .<span class="hljs-title function_">inputValidator</span>(<span class="hljs-function">(<span class="hljs-params">obj: { id: <span class="hljs-built_in">number</span>; name: <span class="hljs-built_in">string</span> }</span>) =&gt;</span> obj)
  .<span class="hljs-title function_">handler</span>(<span class="hljs-keyword">async</span> ({ data }) =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()));
    <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">update</span>(epicsTable).<span class="hljs-title function_">set</span>({ <span class="hljs-attr">name</span>: data.<span class="hljs-property">name</span> }).<span class="hljs-title function_">where</span>(<span class="hljs-title function_">eq</span>(epicsTable.<span class="hljs-property">id</span>, data.<span class="hljs-property">id</span>));
  });
</code></pre>
<p>åœ¨ React ç»„ä»¶ä¸­é€šè¿‡ <code>useServerFn</code> æ¥è°ƒç”¨å®ƒï¼›è¿™ä¸ª hook ä¼šè‡ªåŠ¨å¤„ç†é”™è¯¯ã€é‡å®šå‘ç­‰ã€‚</p>
<p><code>const runSave = useServerFn(updateEpic);</code></p>
<p>è¿˜è®°å¾—æˆ‘è¯´è¿‡ï¼šmiddleware çš„è¾“å…¥ä¼šè‡ªåŠ¨ä¸åº•å±‚ server function çš„è¾“å…¥åˆå¹¶å—ï¼Ÿå½“æˆ‘ä»¬è°ƒç”¨è¿™ä¸ª server function æ—¶å°±èƒ½çœ‹åˆ°ï¼š</p>
<p><img alt="å›¾ 1ï¼šä¸€ä¸ª handleSaveFinal å‡½æ•°çš„ä»£ç ç‰‡æ®µï¼Œä¿å­˜è¾“å…¥å€¼å¹¶è°ƒç”¨ runSaveï¼Œå‚æ•°å¯¹è±¡åŒ…å« id å’Œ nameã€‚è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p>
<p>ï¼ˆ<code>unknown[]</code> å¯¹ react-query çš„ query key æ¥è¯´å°±æ˜¯æ­£ç¡®ç±»å‹ï¼‰</p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿™æ ·è°ƒç”¨å®ƒï¼Œå¹¶æŒ‡å®šè¦ refetch çš„æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">await</span> <span class="hljs-title function_">runSave</span>({
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">id</span>: epic.<span class="hljs-property">id</span>,
    <span class="hljs-attr">name</span>: newValue,
    <span class="hljs-attr">refetch</span>: [
      [<span class="hljs-string">"epics"</span>, <span class="hljs-string">"list"</span>, <span class="hljs-number">1</span>],
      [<span class="hljs-string">"epics"</span>, <span class="hljs-string">"list"</span>, <span class="hljs-string">"summary"</span>],
    ],
  },
});
</code></pre>
<p>è¿è¡Œåï¼Œä¸€åˆ‡æ­£å¸¸ï¼šepics åˆ—è¡¨å’Œ summary éƒ½ä¼šåœ¨æ²¡æœ‰ä»»ä½•æ–°ç½‘ç»œè¯·æ±‚çš„æƒ…å†µä¸‹æ›´æ–°ã€‚æµ‹è¯• single flight mutations æ—¶ï¼Œä½ å…¶å®ä¸æ˜¯åœ¨æ‰¾â€œå‘ç”Ÿäº†ä»€ä¹ˆâ€ï¼Œè€Œæ˜¯åœ¨æ‰¾â€œä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿâ€â€”â€”ä¹Ÿå°±æ˜¯ Network é¢æ¿é‡Œç¼ºå°‘é‚£äº›æœ¬è¯¥å‡ºç°çš„é¢å¤–è¯·æ±‚ã€‚</p>
<h2 data-id="heading-6">å†æ”¹è¿›</h2>
<p>react-query çš„ query keys æ˜¯å±‚çº§ç»“æ„çš„ï¼Œä½ å¯èƒ½å¾ˆç†Ÿæ‚‰è¿™ç§å†™æ³•ï¼š</p>
<p><code>queryClient.invalidateQueries({ queryKey: ["epics", "list"] });</code></p>
<p>å®ƒä¼š refetch ä»»ä½• key ä»¥ <code>["epics", "list"]</code> å¼€å¤´çš„ queriesã€‚æˆ‘ä»¬çš„ middleware èƒ½ä¸èƒ½ä¹Ÿæ”¯æŒè¿™ç§â€œkey å‰ç¼€â€å‘¢ï¼Ÿä¹Ÿå°±æ˜¯åªä¼ ä¸€ä¸ª key prefixï¼Œè®©å®ƒæ‰¾å‡ºæ‰€æœ‰åŒ¹é…é¡¹å¹¶ refetchã€‚</p>
<p>å¯ä»¥ï¼Œå¼€å¹²ã€‚</p>
<p>åŒ¹é… key ä¼šç¨å¤æ‚ä¸€ç‚¹ï¼šæ¯ä¸ªä¼ å…¥çš„ key å¯èƒ½æ˜¯ prefixï¼Œä¼šåŒ¹é…å¤šæ¡ cache entryï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨ <code>flatMap</code> æ¥æ‰¾å‡ºæ‰€æœ‰åŒ¹é…é¡¹ï¼Œå†åˆ©ç”¨ <code>cache.findAll</code>ï¼ˆå¾ˆå¥½ç”¨ï¼‰ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> allQueriesFound = refetch.<span class="hljs-title function_">flatMap</span>(
  <span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span> cache.<span class="hljs-title function_">findAll</span>({ <span class="hljs-attr">queryKey</span>: k, <span class="hljs-attr">exact</span>: <span class="hljs-literal">false</span> })
);
</code></pre>
<p>ç„¶åå¾ªç¯å¹¶åšå’Œä¹‹å‰ä¸€æ ·çš„äº‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> allQueriesFound = refetch.<span class="hljs-title function_">flatMap</span>(
  <span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span> cache.<span class="hljs-title function_">findAll</span>({ <span class="hljs-attr">queryKey</span>: k, <span class="hljs-attr">exact</span>: <span class="hljs-literal">false</span> })
);

allQueriesFound.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">revalidatePayload</span>: <span class="hljs-built_in">any</span> = entry?.<span class="hljs-property">meta</span>?.<span class="hljs-property">__revalidate</span> ?? <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">if</span> (revalidatePayload) {
    revalidate.<span class="hljs-property">refetch</span>.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">key</span>: entry.<span class="hljs-property">queryKey</span>,
      <span class="hljs-attr">fn</span>: revalidatePayload.<span class="hljs-property">serverFn</span>,
      <span class="hljs-attr">arg</span>: revalidatePayload.<span class="hljs-property">arg</span>,
    });
  }
});
</code></pre>
<p>è¿™å°±èƒ½ç”¨äº†ã€‚</p>
<h2 data-id="heading-7">æ›´è¿›ä¸€æ­¥</h2>
<p>ä¸è¿‡æˆ‘ä»¬çš„æ–¹æ¡ˆä»ç„¶ä¸ç†æƒ³ã€‚å‡è®¾ç”¨æˆ·åœ¨ epics é¡µé¢ç¿»é¡µï¼šåˆ°ç¬¬ 2 é¡µã€åˆ°ç¬¬ 3 é¡µã€å†å›åˆ°ç¬¬ 1 é¡µã€‚æˆ‘ä»¬çš„é€»è¾‘ä¼šæ‰¾åˆ°ç¬¬ 1 é¡µå’Œ summary queryï¼Œä½†ä¹Ÿä¼šæŠŠç¬¬ 2ã€3 é¡µä¸€å¹¶æ‰¾åˆ°ï¼ˆå› ä¸ºå®ƒä»¬ç°åœ¨ä¹Ÿåœ¨ cache é‡Œï¼‰ã€‚ç„¶è€Œç¬¬ 2ã€3 é¡µå¹¶ä¸æ´»è·ƒï¼Œä¹Ÿä¸åœ¨å±å¹•ä¸Šå±•ç¤ºï¼Œæˆ‘ä»¬ä¸åº”è¯¥ refetch å®ƒä»¬ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åª refetch active queriesï¼šåªè¦ç»™ <code>findAll</code> åŠ ä¸Š <code>type</code> å‚æ•°å³å¯ã€‚</p>
<p><code>cache.findAll({ queryKey: key, exact: false, type: "active" });</code></p>
<p>äºæ˜¯ä»£ç å°±å˜æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> allQueriesFound = refetch.<span class="hljs-title function_">flatMap</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> cache.<span class="hljs-title function_">findAll</span>({ <span class="hljs-attr">queryKey</span>: key, <span class="hljs-attr">exact</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"active"</span> }));

allQueriesFound.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">revalidatePayload</span>: <span class="hljs-built_in">any</span> = entry?.<span class="hljs-property">meta</span>?.<span class="hljs-property">__revalidate</span> ?? <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">if</span> (revalidatePayload) {
    revalidate.<span class="hljs-property">refetch</span>.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">key</span>: entry.<span class="hljs-property">queryKey</span>,
      <span class="hljs-attr">fn</span>: revalidatePayload.<span class="hljs-property">serverFn</span>,
      <span class="hljs-attr">arg</span>: revalidatePayload.<span class="hljs-property">arg</span>,
    });
  }
});
</code></pre>
<h2 data-id="heading-8">æ›´æ›´è¿›ä¸€æ­¥</h2>
<p>è¿™æ ·å°±èƒ½å·¥ä½œäº†ã€‚ä½†ä½ ä»”ç»†æƒ³æƒ³ï¼Œé‚£äº› inactive çš„ queries å…¶å®åº”è¯¥è¢« invalidatedã€‚æˆ‘ä»¬ä¸å¸Œæœ›ç«‹åˆ» refetch å®ƒä»¬ï¼ˆæµªè´¹èµ„æºï¼Œè€Œä¸”ç”¨æˆ·æ²¡åœ¨çœ‹ï¼‰ï¼Œä½†å¦‚æœç”¨æˆ·åˆç¿»å›é‚£äº›é¡µé¢ï¼Œæˆ‘ä»¬å¸Œæœ›è§¦å‘ä¸€æ¬¡é‡æ–°è·å–ã€‚TanStack Query é€šè¿‡ <code>invalidateQueries</code> å¾ˆå®¹æ˜“åšåˆ°ã€‚</p>
<p>æˆ‘ä»¬æŠŠè¿™æ®µåŠ åˆ°â€œè¢«ä¾èµ–çš„é‚£ä¸ª middlewareâ€çš„ client å›è°ƒé‡Œï¼š</p>
<pre><code class="hljs language-ts" lang="ts">data?.<span class="hljs-property">refetch</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
  queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: key, <span class="hljs-attr">exact</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"inactive"</span>, <span class="hljs-attr">refetchType</span>: <span class="hljs-string">"none"</span> });
});
</code></pre>
<p>éå†ä¼ å…¥çš„ query keysï¼ŒæŠŠæ‰€æœ‰åŒ¹é…çš„ inactive queries æ ‡è®°ä¸ºæ— æ•ˆï¼Œä½†ä¸ç«‹åˆ» refetchï¼ˆ<code>refetchType: "none"</code>ï¼‰ã€‚</p>
<p>ä¸‹é¢æ˜¯æ›´æ–°åçš„å®Œæ•´ middlewareï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> prelimRefetchMiddleware = <span class="hljs-title function_">createMiddleware</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span> })
  .<span class="hljs-title function_">inputValidator</span>(<span class="hljs-function">(<span class="hljs-params">config?: RefetchMiddlewareConfig</span>) =&gt;</span> config)
  .<span class="hljs-title function_">client</span>(<span class="hljs-keyword">async</span> ({ next, data }) =&gt; {
    <span class="hljs-keyword">const</span> { refetch = [] } = data ?? {};

    <span class="hljs-keyword">const</span> router = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getRouterInstance</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-attr">queryClient</span>: <span class="hljs-title class_">QueryClient</span> = router.<span class="hljs-property">options</span>.<span class="hljs-property">context</span>.<span class="hljs-property">queryClient</span>;
    <span class="hljs-keyword">const</span> cache = queryClient.<span class="hljs-title function_">getQueryCache</span>();

    <span class="hljs-keyword">const</span> <span class="hljs-attr">revalidate</span>: <span class="hljs-title class_">RevalidationPayload</span> = {
      <span class="hljs-attr">refetch</span>: [],
    };

    <span class="hljs-keyword">const</span> allQueriesFound = refetch.<span class="hljs-title function_">flatMap</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> cache.<span class="hljs-title function_">findAll</span>({ <span class="hljs-attr">queryKey</span>: key, <span class="hljs-attr">exact</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"active"</span> }));

    allQueriesFound.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">revalidatePayload</span>: <span class="hljs-built_in">any</span> = entry?.<span class="hljs-property">meta</span>?.<span class="hljs-property">__revalidate</span> ?? <span class="hljs-literal">null</span>;

      <span class="hljs-keyword">if</span> (revalidatePayload) {
        revalidate.<span class="hljs-property">refetch</span>.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">key</span>: entry.<span class="hljs-property">queryKey</span>,
          <span class="hljs-attr">fn</span>: revalidatePayload.<span class="hljs-property">serverFn</span>,
          <span class="hljs-attr">arg</span>: revalidatePayload.<span class="hljs-property">arg</span>,
        });
      }
    });

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>({
      <span class="hljs-attr">sendContext</span>: {
        revalidate,
      },
    });
  })
  .<span class="hljs-title function_">server</span>(<span class="hljs-keyword">async</span> ({ next, context }) =&gt; {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>({
      <span class="hljs-attr">sendContext</span>: {
        <span class="hljs-attr">payloads</span>: [] <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>[],
      },
    });

    <span class="hljs-keyword">const</span> allPayloads = context.<span class="hljs-property">revalidate</span>.<span class="hljs-property">refetch</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">refetchPayload</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">key</span>: refetchPayload.<span class="hljs-property">key</span>,
        <span class="hljs-attr">result</span>: refetchPayload.<span class="hljs-title function_">fn</span>({ <span class="hljs-attr">data</span>: refetchPayload.<span class="hljs-property">arg</span> }),
      };
    });

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> refetchPayload <span class="hljs-keyword">of</span> allPayloads) {
      result.<span class="hljs-property">sendContext</span>.<span class="hljs-property">payloads</span>.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">key</span>: refetchPayload.<span class="hljs-property">key</span>,
        <span class="hljs-attr">result</span>: <span class="hljs-keyword">await</span> refetchPayload.<span class="hljs-property">result</span>,
      });
    }

    <span class="hljs-keyword">return</span> result;
  });

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> refetchMiddleware = <span class="hljs-title function_">createMiddleware</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span> })
  .<span class="hljs-title function_">middleware</span>([prelimRefetchMiddleware])
  .<span class="hljs-title function_">client</span>(<span class="hljs-keyword">async</span> ({ data, next }) =&gt; {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>();

    <span class="hljs-keyword">const</span> router = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getRouterInstance</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-attr">queryClient</span>: <span class="hljs-title class_">QueryClient</span> = router.<span class="hljs-property">options</span>.<span class="hljs-property">context</span>.<span class="hljs-property">queryClient</span>;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> result.<span class="hljs-property">context</span>?.<span class="hljs-property">payloads</span> ?? []) {
      queryClient.<span class="hljs-title function_">setQueryData</span>(entry.<span class="hljs-property">key</span>, entry.<span class="hljs-property">result</span>, { <span class="hljs-attr">updatedAt</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() });
    }

    data?.<span class="hljs-property">refetch</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: key, <span class="hljs-attr">exact</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"inactive"</span>, <span class="hljs-attr">refetchType</span>: <span class="hljs-string">"none"</span> });
    });

    <span class="hljs-keyword">return</span> result;
  });
</code></pre>
<p>æˆ‘ä»¬å‘Šè¯‰ TanStack Queryï¼šæŠŠåŒ¹é… key çš„ inactive queries ç½®ä¸º invalidï¼ˆä½†ä¸ refetchï¼‰ã€‚</p>
<p>è¿™ä¸ªæ–¹æ¡ˆéå¸¸å¥½ç”¨ï¼šå¦‚æœä½ æµè§ˆåˆ°ç¬¬ 2ã€3 é¡µï¼Œç„¶åå›åˆ°ç¬¬ 1 é¡µï¼Œå†ç¼–è¾‘ä¸€ä¸ª todoï¼Œä½ ä¼šçœ‹åˆ°ç¬¬ 1 é¡µåˆ—è¡¨å’Œ summary ç«‹åˆ»æ›´æ–°ã€‚ä¹‹åå¦‚æœä½ å†ç¿»å›ç¬¬ 2ã€3 é¡µï¼Œä½ ä¼šçœ‹åˆ°ç½‘ç»œè¯·æ±‚è§¦å‘ï¼Œä»è€Œæ‹¿åˆ°æ–°æ•°æ®ã€‚</p>
<h2 data-id="heading-9">é”¦ä¸Šæ·»èŠ±</h2>
<p>è¿˜è®°å¾—æˆ‘ä»¬æŠŠ server function å’Œå‚æ•°å¡è¿› query options æ—¶çš„å†™æ³•å—ï¼Ÿ</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">epicsQueryOptions</span> = (<span class="hljs-params">page: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">queryOptions</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">"epics"</span>, <span class="hljs-string">"list"</span>, page],
    <span class="hljs-attr">queryFn</span>: <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getEpicsList</span>({ <span class="hljs-attr">data</span>: page });
      <span class="hljs-keyword">return</span> result;
    },
    <span class="hljs-attr">staleTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">5</span>,
    <span class="hljs-attr">gcTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">5</span>,
    <span class="hljs-attr">meta</span>: {
      <span class="hljs-attr">__revalidate</span>: {
        <span class="hljs-attr">serverFn</span>: getEpicsList,
        <span class="hljs-attr">arg</span>: page,
      },
    },
  });
};
</code></pre>
<p>æˆ‘ä¹‹å‰æè¿‡ï¼šåœ¨ <code>meta</code> å’Œ <code>queryFn</code> é‡Œé‡å¤å†™ serverFn/arg æœ‰ç‚¹â€œè„â€ã€‚æˆ‘ä»¬æ¥ä¿®ä¸€ä¸‹ã€‚</p>
<p>å…ˆä»æœ€ç®€å•çš„ helper å¼€å§‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">refetchedQueryOptions</span>(<span class="hljs-params">queryKey: QueryKey, serverFn: <span class="hljs-built_in">any</span>, arg?: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-keyword">const</span> queryKeyToUse = [...queryKey];
  <span class="hljs-keyword">if</span> (arg != <span class="hljs-literal">null</span>) {
    queryKeyToUse.<span class="hljs-title function_">push</span>(arg);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">queryOptions</span>({
    <span class="hljs-attr">queryKey</span>: queryKeyToUse,
    <span class="hljs-attr">queryFn</span>: <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">serverFn</span>({ <span class="hljs-attr">data</span>: arg });
    },
    <span class="hljs-attr">meta</span>: {
      <span class="hljs-attr">__revalidate</span>: {
        serverFn,
        arg,
      },
    },
  });
}
</code></pre>
<p>è¿™ä¸ª helper ä¼šæ¥æ”¶ query keyã€server function å’Œå‚æ•°ï¼Œç„¶åè¿”å› query optionsï¼š</p>
<ul>
<li>æ‹¼å¥½çš„ <code>queryKey</code>ï¼ˆå¿…è¦æ—¶æŠŠ arg è¿½åŠ è¿›å»ï¼‰</li>
<li><code>queryFn</code>ï¼ˆç›´æ¥è°ƒç”¨ server functionï¼‰</li>
<li><code>meta.__revalidate</code>ï¼ˆåŒæ ·è®°å½• server function å’Œå‚æ•°ï¼‰</li>
</ul>
<p>äºæ˜¯ epics åˆ—è¡¨ query å°±å¯ä»¥å†™æˆï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">epicsQueryOptions</span> = (<span class="hljs-params">page: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">queryOptions</span>({
    ...<span class="hljs-title function_">refetchedQueryOptions</span>([<span class="hljs-string">"epics"</span>, <span class="hljs-string">"list"</span>], getEpicsList, page),
    <span class="hljs-attr">staleTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">5</span>,
    <span class="hljs-attr">gcTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">5</span>,
  });
};
</code></pre>
<p>å®ƒèƒ½å·¥ä½œï¼Œä½†ç±»å‹ä¸å¥½ï¼šåˆ°å¤„éƒ½æ˜¯ <code>any</code>ï¼Œæ„å‘³ç€ä¼ ç»™ server function çš„å‚æ•°ä¸åšç±»å‹æ£€æŸ¥ï¼›æ›´ç³Ÿçš„æ˜¯ï¼Œ<code>queryFn</code> çš„è¿”å›å€¼ä¹Ÿä¸ä¼šè¢«æ£€æŸ¥ï¼Œäºæ˜¯ä½ çš„ queryï¼ˆæ¯”å¦‚è¿™ä¸ª epics åˆ—è¡¨ï¼‰ä¼šå˜æˆè¿”å› <code>any</code>ã€‚</p>
<p>æˆ‘ä»¬æ¥åŠ ç‚¹ç±»å‹ã€‚</p>
<p>server functions æœ¬è´¨ä¸Šæ˜¯å‡½æ•°ï¼šæ¥æ”¶ä¸€ä¸ªå¯¹è±¡å‚æ•°ï¼›å¦‚æœ server function å®šä¹‰äº†è¾“å…¥ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¼šåŒ…å«ä¸€ä¸ª <code>data</code> å±æ€§ï¼Œé‡Œé¢å°±æ˜¯è¾“å…¥ã€‚è¯´ä¸€å †å¤§ç™½è¯ä¸å¦‚çœ‹è°ƒç”¨ä¾‹å­ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">runSaveSimple</span>({
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">id</span>: epic.<span class="hljs-property">id</span>,
    <span class="hljs-attr">name</span>: newValue,
  },
});
</code></pre>
<p>ç¬¬äºŒç‰ˆ helper å¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> refetchedQueryOptions&lt;T <span class="hljs-keyword">extends</span> (<span class="hljs-attr">arg</span>: { <span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span> }) =&gt; <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;&gt;(
  <span class="hljs-attr">queryKey</span>: <span class="hljs-title class_">QueryKey</span>,
  <span class="hljs-attr">serverFn</span>: T,
  <span class="hljs-attr">arg</span>: <span class="hljs-title class_">Parameters</span>&lt;T&gt;[<span class="hljs-number">0</span>][<span class="hljs-string">"data"</span>],
) {
  <span class="hljs-keyword">const</span> queryKeyToUse = [...queryKey];
  <span class="hljs-keyword">if</span> (arg != <span class="hljs-literal">null</span>) {
    queryKeyToUse.<span class="hljs-title function_">push</span>(arg);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">queryOptions</span>({
    <span class="hljs-attr">queryKey</span>: queryKeyToUse,
    <span class="hljs-attr">queryFn</span>: <span class="hljs-keyword">async</span> (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Awaited</span>&lt;<span class="hljs-title class_">ReturnType</span>&lt;T&gt;&gt;&gt; =&gt; {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">serverFn</span>({ <span class="hljs-attr">data</span>: arg });
    },
    <span class="hljs-attr">meta</span>: {
      <span class="hljs-attr">__revalidate</span>: {
        serverFn,
        arg,
      },
    },
  });
}
</code></pre>
<p>æˆ‘ä»¬æŠŠ server function çº¦æŸä¸ºä¸€ä¸ª async å‡½æ•°ï¼Œä¸”å®ƒçš„å‚æ•°å¯¹è±¡ä¸Šæœ‰ <code>data</code>ï¼›ç„¶åç”¨å®ƒæ¥é™æ€æ¨æ–­ <code>arg</code> çš„ç±»å‹ã€‚è¿™å·²ç»ä¸é”™äº†ï¼Œä½†å½“ä½ æŠŠå®ƒç”¨åœ¨â€œæ²¡æœ‰å‚æ•°â€çš„ server function ä¸Šæ—¶ä¼šæŠ¥é”™ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">...<span class="hljs-title function_">refetchedQueryOptions</span>([<span class="hljs-string">"epics"</span>, <span class="hljs-string">"list"</span>, <span class="hljs-string">"summary"</span>], getEpicsSummary)
<span class="hljs-comment">// Expected 3 arguments, but got 2.</span>
</code></pre>
<p>ä½ ä¼  <code>undefined</code> å¯ä»¥è§£å†³ï¼ŒåŠŸèƒ½ä¹Ÿæ­£å¸¸ï¼š</p>
<p><code>...refetchedQueryOptions(["epics", "list", "summary"], getEpicsSummary, undefined),</code></p>
<p>å¦‚æœä½ æ˜¯ä¸ªæ­£å¸¸äººï¼Œä½ å¤§æ¦‚ä¼šè§‰å¾—è¿™å·²ç»å¾ˆå¥½äº†ï¼Œè€Œä¸”ç¡®å®å¦‚æ­¤ã€‚ä½†å¦‚æœä½ åƒæˆ‘ä¸€æ ·æœ‰ç‚¹â€œæ€ªâ€ï¼Œä½ å¯èƒ½ä¼šæƒ³èƒ½ä¸èƒ½åšåˆ°æ›´å®Œç¾ï¼š</p>
<ul>
<li>å½“ server function æœ‰å‚æ•°æ—¶ï¼šå¿…é¡»ä¼ å…¥ä¸”ç±»å‹è¦æ­£ç¡®</li>
<li>å½“ server function æ²¡å‚æ•°æ—¶ï¼šå…è®¸çœç•¥ arg</li>
</ul>
<p>TypeScript æœ‰ä¸€ä¸ªç‰¹æ€§æ­£å¥½é€‚åˆï¼š<strong>å‡½æ•°é‡è½½ï¼ˆoverloaded functionsï¼‰</strong>ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å·²ç»å¤Ÿé•¿äº†ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥è´´ä»£ç ï¼Œè§£è¯»ç•™ä½œè¯»è€…ç»ƒä¹ ï¼ˆä»¥åŠå¯èƒ½çš„æœªæ¥æ–‡ç« ï¼‰ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">QueryKey</span>, queryOptions } <span class="hljs-keyword">from</span> <span class="hljs-string">"@tanstack/react-query"</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">AnyAsyncFn</span> = <span class="hljs-function">(<span class="hljs-params">...args: <span class="hljs-built_in">any</span>[]</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">ServerFnArgs</span>&lt;<span class="hljs-title class_">TFn</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AnyAsyncFn</span>&gt; = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-title class_">TFn</span>&gt;[<span class="hljs-number">0</span>] <span class="hljs-keyword">extends</span> infer <span class="hljs-title class_">TRootArgs</span>
  ? <span class="hljs-title class_">TRootArgs</span> <span class="hljs-keyword">extends</span> { <span class="hljs-attr">data</span>: infer <span class="hljs-title class_">TResult</span> }
    ? <span class="hljs-title class_">TResult</span>
    : <span class="hljs-literal">undefined</span>
  : <span class="hljs-built_in">never</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">ServerFnHasArgs</span>&lt;<span class="hljs-title class_">TFn</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AnyAsyncFn</span>&gt; = <span class="hljs-title class_">ServerFnArgs</span>&lt;<span class="hljs-title class_">TFn</span>&gt; <span class="hljs-keyword">extends</span> infer U ? (U <span class="hljs-keyword">extends</span> <span class="hljs-literal">undefined</span> ? <span class="hljs-literal">false</span> : <span class="hljs-literal">true</span>) : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">ServerFnWithArgs</span>&lt;<span class="hljs-title class_">TFn</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AnyAsyncFn</span>&gt; = <span class="hljs-title class_">ServerFnHasArgs</span>&lt;<span class="hljs-title class_">TFn</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-literal">true</span> ? <span class="hljs-title class_">TFn</span> : <span class="hljs-built_in">never</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ServerFnWithoutArgs</span>&lt;<span class="hljs-title class_">TFn</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AnyAsyncFn</span>&gt; = <span class="hljs-title class_">ServerFnHasArgs</span>&lt;<span class="hljs-title class_">TFn</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-literal">false</span> ? <span class="hljs-title class_">TFn</span> : <span class="hljs-built_in">never</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">RefetchQueryOptions</span>&lt;T&gt; = {
  <span class="hljs-attr">queryKey</span>: <span class="hljs-title class_">QueryKey</span>;
  queryFn?: <span class="hljs-function">(<span class="hljs-params">_: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;;
  meta?: <span class="hljs-built_in">any</span>;
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">ValidateServerFunction</span>&lt;<span class="hljs-title class_">Provided</span>, <span class="hljs-title class_">Expected</span>&gt; = <span class="hljs-title class_">Provided</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Expected</span> ? <span class="hljs-title class_">Provided</span> : <span class="hljs-string">"This server function requires an argument!"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> refetchedQueryOptions&lt;<span class="hljs-title class_">TFn</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AnyAsyncFn</span>&gt;(
  <span class="hljs-attr">queryKey</span>: <span class="hljs-title class_">QueryKey</span>,
  <span class="hljs-attr">serverFn</span>: <span class="hljs-title class_">ServerFnWithArgs</span>&lt;<span class="hljs-title class_">TFn</span>&gt;,
  <span class="hljs-attr">arg</span>: <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-title class_">TFn</span>&gt;[<span class="hljs-number">0</span>][<span class="hljs-string">"data"</span>],
): <span class="hljs-title class_">RefetchQueryOptions</span>&lt;<span class="hljs-title class_">Awaited</span>&lt;<span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-title class_">TFn</span>&gt;&gt;&gt;;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> refetchedQueryOptions&lt;<span class="hljs-title class_">TFn</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AnyAsyncFn</span>&gt;(
  <span class="hljs-attr">queryKey</span>: <span class="hljs-title class_">QueryKey</span>,
  <span class="hljs-attr">serverFn</span>: <span class="hljs-title class_">ValidateServerFunction</span>&lt;<span class="hljs-title class_">TFn</span>, <span class="hljs-title class_">ServerFnWithoutArgs</span>&lt;<span class="hljs-title class_">TFn</span>&gt;&gt;,
): <span class="hljs-title class_">RefetchQueryOptions</span>&lt;<span class="hljs-title class_">Awaited</span>&lt;<span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-title class_">TFn</span>&gt;&gt;&gt;;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> refetchedQueryOptions&lt;<span class="hljs-title class_">TFn</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AnyAsyncFn</span>&gt;(
  <span class="hljs-attr">queryKey</span>: <span class="hljs-title class_">QueryKey</span>,
  <span class="hljs-attr">serverFn</span>: <span class="hljs-title class_">ServerFnWithoutArgs</span>&lt;<span class="hljs-title class_">TFn</span>&gt; | <span class="hljs-title class_">ServerFnWithArgs</span>&lt;<span class="hljs-title class_">TFn</span>&gt;,
  arg?: <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-title class_">TFn</span>&gt;[<span class="hljs-number">0</span>][<span class="hljs-string">"data"</span>],
): <span class="hljs-title class_">RefetchQueryOptions</span>&lt;<span class="hljs-title class_">Awaited</span>&lt;<span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-title class_">TFn</span>&gt;&gt;&gt; {
  <span class="hljs-keyword">const</span> queryKeyToUse = [...queryKey];
  <span class="hljs-keyword">if</span> (arg != <span class="hljs-literal">null</span>) {
    queryKeyToUse.<span class="hljs-title function_">push</span>(arg);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">queryOptions</span>({
    <span class="hljs-attr">queryKey</span>: queryKeyToUse,
    <span class="hljs-attr">queryFn</span>: <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">serverFn</span>({ <span class="hljs-attr">data</span>: arg });
    },
    <span class="hljs-attr">meta</span>: {
      <span class="hljs-attr">__revalidate</span>: {
        serverFn,
        arg,
      },
    },
  });
}
</code></pre>
<p>æœ‰äº†å®ƒä¹‹åï¼Œå½“ server function éœ€è¦å‚æ•°æ—¶ï¼Œä½ å¯ä»¥è¿™æ ·è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">epicsQueryOptions</span> = (<span class="hljs-params">page: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">queryOptions</span>({
    ...<span class="hljs-title function_">refetchedQueryOptions</span>([<span class="hljs-string">"epics"</span>, <span class="hljs-string">"list"</span>], getEpicsList, page),
    <span class="hljs-attr">staleTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">5</span>,
    <span class="hljs-attr">gcTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">5</span>,
  });
};
</code></pre>
<p>å‚æ•°ç±»å‹ä¼šè¢«æ­£ç¡®æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">...<span class="hljs-title function_">refetchedQueryOptions</span>([<span class="hljs-string">"epics"</span>, <span class="hljs-string">"list"</span>], getEpicsList, <span class="hljs-string">""</span>)
<span class="hljs-comment">// Argument of type 'string' is not assignable to parameter of type 'number'.</span>
</code></pre>
<p>å¦‚æœä½ å¿˜äº†ä¼ å‚æ•°ï¼Œå®ƒä¹Ÿä¼šæŠ¥é”™ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">...<span class="hljs-title function_">refetchedQueryOptions</span>([<span class="hljs-string">"epics"</span>, <span class="hljs-string">"list"</span>], getEpicsList)
<span class="hljs-comment">// Argument of type 'RequiredFetcher&lt;undefined, (page: number) =&gt; number, Promise&lt;{ id: number; name: string; }[]&gt;&gt;' is not assignable to parameter of type '"This server function requires an argument!"'.</span>
</code></pre>
<p>æœ€åè¿™ä¸ªæŠ¥é”™ä¿¡æ¯ä¸ç®—ç‰¹åˆ«ç›´è§‚ï¼Œä½†å¦‚æœä½ æŠŠä»£ç è¯»åˆ°æœ€åï¼Œä¼šå‘ç°å®ƒå·²ç»åœ¨å°½åŠ›æç¤ºä½ å“ªé‡Œé”™äº†ï¼Œé çš„å°±æ˜¯è¿™ä¸ªå°å·¥å…·ç±»å‹ï¼š</p>
<p><code>type ValidateServerFunction&lt;Provided, Expected&gt; = Provided extends Expected ? Provided : "This server function requires an argument!";</code></p>
<p>è€Œå¯¹äºâ€œæ²¡æœ‰å‚æ•°â€çš„ server functionï¼Œå®ƒä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚å®Œæ•´è§£é‡Šç•™ç»™æœªæ¥æ–‡ç« ã€‚</p>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>single flight mutations æ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„ä¼˜åŒ–å·¥å…·ï¼šå½“ä½ åšä¸€æ¬¡ mutation åï¼ŒUI éœ€è¦çš„æ›´æ–°æ•°æ®ä¸å¿…å†é¢å¤–å‘è¯·æ±‚è·å–ï¼Œè€Œæ˜¯å¯ä»¥åœ¨åŒä¸€æ¬¡å¾€è¿”é‡Œé¡ºä¾¿å¸¦å›æ¥ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« æŠŠå„ä¸ªæ‹¼å›¾éƒ½è®²æ¸…æ¥šäº†ï¼šå¦‚ä½•ç”¨ middleware æ”¶é›†è¦ refetch çš„æŸ¥è¯¢ã€å¦‚ä½•å€ŸåŠ© TanStack Start çš„ server function åºåˆ—åŒ–èƒ½åŠ›æŠŠâ€œè¦æ‰§è¡Œçš„ refetchâ€å‘é€åˆ°æœåŠ¡ç«¯ã€ä»¥åŠå¦‚ä½•åœ¨å®¢æˆ·ç«¯ç”¨ <code>setQueryData</code> æŠŠæ•°æ®å†™å›ç¼“å­˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Electron æ‰“åŒ…ç™½å±æ’æŸ¥å®å½•ï¼šä¸€ä¸ª continue_on_error å¼•å‘çš„ä¸‰å¤©ä¸‰å¤œ"è¡€æ¡ˆ"]]></title>    <link>https://juejin.cn/post/7603359026711035914</link>    <guid>https://juejin.cn/post/7603359026711035914</guid>    <pubDate>2026-02-06T07:41:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603359026711035914" data-draft-id="7603301285475532842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Electron æ‰“åŒ…ç™½å±æ’æŸ¥å®å½•ï¼šä¸€ä¸ª continue_on_error å¼•å‘çš„ä¸‰å¤©ä¸‰å¤œ&quot;è¡€æ¡ˆ&quot;"/> <meta itemprop="keywords" content="å‰ç«¯,Electron,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-06T07:41:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CocoonBreak"/> <meta itemprop="url" content="https://juejin.cn/user/3817931570691031"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Electron æ‰“åŒ…ç™½å±æ’æŸ¥å®å½•ï¼šä¸€ä¸ª continue_on_error å¼•å‘çš„ä¸‰å¤©ä¸‰å¤œ"è¡€æ¡ˆ"
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817931570691031/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CocoonBreak
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:41:17.000Z" title="Fri Feb 06 2026 07:41:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Electron æ‰“åŒ…ç™½å±æ’æŸ¥å®å½•ï¼šä¸€ä¸ª continue_on_error å¼•å‘çš„ä¸‰å¤©ä¸‰å¤œ"è¡€æ¡ˆ"</h2>
<blockquote>
<p>æœ¬æ–‡è®°å½•äº†æˆ‘åœ¨å¼€æºé¡¹ç›® AionUiï¼ˆä¸€ä¸ªç»Ÿä¸€ AI Agent å›¾å½¢ç•Œé¢ï¼‰ä¸­é­é‡çš„ä¸€æ¬¡ Electron æ‰“åŒ…ç™½å±äº‹æ•…ã€‚ä»å‘ç°é—®é¢˜åˆ°æœ€ç»ˆå®šä½æ ¹å› ï¼Œå†æ—¶ä¸‰å¤©ä¸‰å¤œã€‚å¦‚æœä½ ä¹Ÿåœ¨ç”¨ Electron + GitHub Actions åš CI/CDï¼Œè¿™ç¯‡æ–‡ç« æˆ–è®¸èƒ½å¸®ä½ é¿å¼€ä¸€ä¸ªéšè”½çš„å¤§å‘ã€‚</p>
</blockquote>
<h3 data-id="heading-1">æ•…äº‹çš„å¼€å§‹ï¼šä¸€ä¸ª"å®Œç¾"çš„ CI æ„å»º</h3>
<p>é‚£æ˜¯ä¸€ä¸ªå¹³é™çš„å¤œæ™šã€‚</p>
<p>æˆ‘åƒå¾€å¸¸ä¸€æ ·æ¨é€äº†ä¸€ä¸ªç‰ˆæœ¬åˆ° <code>dev</code> åˆ†æ”¯ï¼ŒGitHub Actions å¼€å§‹äº†å®ƒå¿ å®çš„è‡ªåŠ¨æ„å»ºå·¥ä½œã€‚åå‡ åˆ†é’Ÿåï¼ŒCI äº®èµ·äº†ç»¿ç¯â€”â€”æ‰€æœ‰å¹³å°æ„å»ºæˆåŠŸã€‚</p>
<blockquote>
<p>"ä¸é”™ï¼Œä»Šå¤©åˆæ˜¯é¡ºåˆ©çš„ä¸€å¤©ã€‚"</p>
</blockquote>
<p>æˆ‘ä¸‹è½½äº† macOS çš„ DMGï¼Œæ‹–è¿› Applicationsï¼ŒåŒå‡»å¯åŠ¨â€”â€”</p>
<p><strong>ç™½å±ã€‚</strong></p>
<p>çº¯ç™½çš„ã€ä¸€å°˜ä¸æŸ“çš„ã€ä»¤äººçª’æ¯çš„ç™½å±ã€‚åƒæ˜¯è¿™ä¸ª App åœ¨ç”¨è¡Œä¸ºè‰ºæœ¯è¡¨è¾¾å®ƒå¯¹è¿™ä¸ªä¸–ç•Œçš„å¤±æœ›ã€‚</p>
<p>æ²¡æœ‰æŠ¥é”™å¼¹çª—ï¼Œæ²¡æœ‰å´©æºƒæç¤ºï¼Œå°±æ˜¯ä¸€ç‰‡ç™½ã€‚</p>
<h3 data-id="heading-2">ç¬¬ä¸€å¤©ï¼šæœ¬åœ°æ²¡é—®é¢˜ï¼Œé‚£ä¸€å®šæ˜¯ CI çš„é—®é¢˜</h3>
<p>ä½œä¸ºä¸€ä¸ªç»å†è¿‡æ— æ•°"åœ¨æˆ‘æœºå™¨ä¸Šæ˜¯å¥½çš„"ååœºé¢çš„å·¥ç¨‹å¸ˆï¼Œæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯â€”â€”å…ˆåœ¨æœ¬åœ°å¤ç°ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm start  <span class="hljs-comment"># æœ¬åœ°å¼€å‘ âœ… æ­£å¸¸</span>
node scripts/build-with-builder.js arm64 --mac --arm64  <span class="hljs-comment"># æœ¬åœ°æ‰“åŒ… âœ… æ­£å¸¸</span>
</code></pre>
<p>æœ¬åœ°æ‰“åŒ…å‡ºæ¥çš„ DMG å®‰è£…åè¿è¡Œå®Œå…¨æ­£å¸¸ã€‚</p>
<p>è¿™å°±å°´å°¬äº†ã€‚ç»å…¸çš„"æœ¬åœ°å¥½å¥½çš„ï¼ŒCI å°±ç‚¸"ã€‚</p>
<p>æˆ‘æ‰“å¼€ Electron çš„å¼€å‘è€…å·¥å…·æ—¥å¿—ï¼Œç»ˆäºçœ‹åˆ°äº†è¿™ä¸ªé”™è¯¯ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">Not allowed to load <span class="hljs-keyword">local</span> resource:
file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/Applications/</span>AionUi.app/Contents/Resources/app/.webpack/renderer/main_window/index.html
</code></pre>
<p><code>ERR_FILE_NOT_FOUND</code>â€”â€”Electron æ‰¾ä¸åˆ°æ¸²æŸ“è¿›ç¨‹çš„å…¥å£æ–‡ä»¶ã€‚è¿™ä¸ª <code>index.html</code> æ˜¯ webpack æ‰“åŒ…ç”Ÿæˆçš„ï¼Œæ²¡æœ‰å®ƒï¼Œæ•´ä¸ªç•Œé¢å°±æ˜¯ä¸€ç‰‡ç™½ã€‚</p>
<h3 data-id="heading-3">ç¬¬ä¸€ä¸ªå«Œç–‘äººï¼štar v7</h3>
<p>ç¿»çœ‹æœ€è¿‘çš„ <code>package.json</code> å˜æ›´ï¼Œæˆ‘æ³¨æ„åˆ°ä¸€ä¸ªä¾èµ–å‡çº§ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"overrides"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tar"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^7.5.7"</span>  <span class="hljs-comment">// ä» ^6.2.1 å‡çº§</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>tar v7 æ˜¯ä¸€ä¸ª breaking change ç‰ˆæœ¬ï¼ŒAPI å®Œå…¨é‡å†™ã€‚è€Œ electron-builder åœ¨æ‰“åŒ…æ—¶éœ€è¦å¤„ç† tar/asar å½’æ¡£ã€‚ä¼šä¸ä¼šæ˜¯ tar v7 å¯¼è‡´ asar æ‰“åŒ…å‡ºäº†é—®é¢˜ï¼Ÿ</p>
<p>æˆ‘èŠ±äº†å¤§åŠå¤©æ—¶é—´ç ”ç©¶ tar v7 çš„å…¼å®¹æ€§ï¼š</p>
<ul>
<li>ç¿»äº† npm çš„ changelog</li>
<li>æŸ¥äº† electron-builder çš„æºç </li>
<li>å¯¹æ¯”äº† tar v6 å’Œ v7 çš„ API å·®å¼‚</li>
</ul>
<p>ç»“è®ºï¼š<strong>tar v7 æ˜¯æ— è¾œçš„</strong>ã€‚å®ƒä¿®å¤çš„æ˜¯ CVE-2026-23745 å®‰å…¨æ¼æ´ï¼Œelectron-builder å¹¶ä¸ç›´æ¥ä¾èµ– tar çš„ APIã€‚</p>
<p>ç¬¬ä¸€å¤©ï¼Œç™½å¿™ã€‚</p>
<h3 data-id="heading-4">ç¬¬äºŒå¤©ï¼šæ·±å…¥ asar çš„å†…å¿ƒä¸–ç•Œ</h3>
<p>æ—¢ç„¶ä¸æ˜¯ tar çš„é—®é¢˜ï¼Œé‚£å°±å¾—çœ‹çœ‹ CI æ‰“åŒ…å‡ºæ¥çš„äº§ç‰©åˆ°åº•é•¿ä»€ä¹ˆæ ·ã€‚</p>
<p>æˆ‘ä» CI artifacts ä¸‹è½½äº† DMGï¼ŒæŒ‚è½½åæ£€æŸ¥ asarï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœ¬åœ°æ‰“åŒ…çš„ asar</span>
npx asar list /Applications/AionUi-Local.app/Contents/Resources/app.asar | grep index.html
<span class="hljs-comment"># âœ… .webpack/renderer/main_window/index.html  å­˜åœ¨</span>

<span class="hljs-comment"># CI æ‰“åŒ…çš„ asar</span>
npx asar list /Applications/AionUi-CI.app/Contents/Resources/app.asar | grep index.html
<span class="hljs-comment"># âŒ æ²¡æœ‰ä»»ä½•è¾“å‡º</span>
</code></pre>
<p><strong>æ‰¾åˆ°äº†ï¼</strong> CI æ‰“åŒ…å‡ºæ¥çš„ asar é‡Œå‹æ ¹æ²¡æœ‰ <code>index.html</code>ï¼</p>
<p>è¿™æ„å‘³ç€ webpack çš„äº§ç‰©åœ¨ CI ç¯å¢ƒä¸‹æ ¹æœ¬æ²¡æœ‰ç”Ÿæˆã€‚ä½† CI æ„å»ºæ˜æ˜æ˜¾ç¤ºæˆåŠŸäº†å•Šï¼Ÿ</p>
<h3 data-id="heading-5">è½¬æŠ˜ç‚¹ï¼šä¸€æ¡è¢«åæ‰çš„é”™è¯¯</h3>
<p>å¸¦ç€ç–‘æƒ‘ï¼Œæˆ‘ä»”ç»†ç¿»çœ‹äº† CI çš„æ„å»ºæ—¥å¿—ã€‚åœ¨æ•°ç™¾è¡Œæ—¥å¿—çš„è§’è½é‡Œï¼Œæˆ‘å‘ç°äº†è¿™ä¸ªï¼š</p>
<pre><code class="hljs language-bash" lang="bash">FATAL ERROR: Ineffective mark-compacts near heap <span class="hljs-built_in">limit</span> Allocation failed
- JavaScript heap out of memory
</code></pre>
<p><strong>Node.js å†…å­˜æº¢å‡ºäº†ï¼</strong></p>
<p>webpack åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­åƒå…‰äº†å†…å­˜ï¼Œè¿›ç¨‹ç›´æ¥å´©æºƒã€‚ä½†æ˜¯â€”â€”ä¸ºä»€ä¹ˆ CI æ²¡æœ‰æŠ¥é”™ï¼Ÿ</p>
<p>ç­”æ¡ˆå°±åœ¨ GitHub Actions çš„ workflow é…ç½®é‡Œï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">with</span> <span class="hljs-string">electron-builder</span> <span class="hljs-string">(non-Windows)</span>
  <span class="hljs-attr">uses:</span> <span class="hljs-string">nick-fields/retry@v3</span>
  <span class="hljs-attr">with:</span>
    <span class="hljs-attr">timeout_minutes:</span> <span class="hljs-number">80</span>
    <span class="hljs-attr">max_attempts:</span> <span class="hljs-number">2</span>
    <span class="hljs-attr">continue_on_error:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># â† å°±æ˜¯ä½ ï¼</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">${{</span> <span class="hljs-string">matrix.command</span> <span class="hljs-string">}}</span>
</code></pre>
<p><strong><code>continue_on_error: true</code></strong>â€”â€”è¿™ä¸ªè®¾ç½®çš„æœ¬æ„æ˜¯ï¼šmacOS æ„å»ºæœ‰æ—¶ä¼šå› ä¸º Apple å…¬è¯æœåŠ¡è¶…æ—¶è€Œå¤±è´¥ï¼Œä¸ºäº†ä¸é˜»å¡å…¶ä»–å¹³å°çš„æ„å»ºï¼Œè®¾ç½®äº†ç»§ç»­æ‰§è¡Œã€‚</p>
<p>ä½†å®ƒä¹Ÿæ‚„æ‚„åœ°åæ‰äº† OOM é”™è¯¯ã€‚webpack å´©æºƒäº†ï¼ŒHTML æ²¡ç”Ÿæˆï¼Œä½† CI ä¸€è„¸æ— äº‹åœ°ç»§ç»­å¾€ä¸‹èµ°ï¼ŒæŠŠä¸€ä¸ª<strong>æ®‹ç¼ºçš„äº§ç‰©</strong>æ‰“åŒ…æˆäº† DMG å¹¶ä¸Šä¼ ã€‚</p>
<p>è¿™å°±åƒä¸€ä¸ªå»ºç­‘å·¥äººå‘Šè¯‰ä½ "æˆ¿å­ç›–å¥½äº†"ï¼Œä½†å®é™…ä¸Šé‡Œé¢è¿å¢™éƒ½æ²¡æœ‰ã€‚</p>
<h3 data-id="heading-6">ä¸ºä»€ä¹ˆåªæœ‰ macOS ç‚¸äº†ï¼Ÿ</h3>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªæœ‰è¶£çš„ç»†èŠ‚ï¼šWindows å’Œ Linux çš„æ„å»ºéƒ½æ­£å¸¸ï¼Œå”¯ç‹¬ macOS ç™½å±ã€‚</p>
<p>åŸå› åœ¨äº Node.js V8 å¼•æ“çš„å†…å­˜ç®¡ç†æœºåˆ¶ã€‚V8 æœ‰ä¸€ä¸ª<strong>äººä¸ºè®¾å®šçš„å †å†…å­˜ä¸Šé™</strong>ï¼ˆ64 ä½ç³»ç»Ÿé»˜è®¤çº¦ 4GBï¼‰ï¼Œè¿™ä¸ªé™åˆ¶ç‹¬ç«‹äºç‰©ç†å†…å­˜ã€‚</p>
<p>GitHub Actions å„å¹³å° Runner è™½ç„¶æ ‡ç§°å†…å­˜ç›¸åŒï¼ˆ7GBï¼‰ï¼Œä½†å®é™…å¯ç”¨å†…å­˜å·®å¼‚å¾ˆå¤§ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">GitHub Actions Runner (<span class="hljs-number">7</span>GB RAM)
â”œâ”€â”€ macOS ç³»ç»Ÿå¼€é”€ (~<span class="hljs-number">1.5</span>GB)
â”œâ”€â”€ Xcode / ç­¾åå·¥å…· (~<span class="hljs-number">0.5</span>GB)
â”œâ”€â”€ npm / å…¶ä»–è¿›ç¨‹ (~<span class="hljs-number">0.5</span>GB)
â””â”€â”€ Node<span class="hljs-selector-class">.js</span> å¯ç”¨ (~<span class="hljs-number">4.5</span>GB)
    â””â”€â”€ V8 é»˜è®¤å †ä¸Šé™: ~<span class="hljs-number">4</span>GB  â† webpack éœ€è¦ ~<span class="hljs-number">5</span>GBï¼Œè¶…äº†ï¼
</code></pre>
<p>macOS ç³»ç»Ÿæœ¬èº«å°±æ¯” Linux æ›´"è‡ƒè‚¿"ï¼ŒåŠ ä¸Š Xcode å·¥å…·é“¾ã€ä»£ç ç­¾åæœåŠ¡ç­‰é¢å¤–è´Ÿæ‹…ï¼Œç•™ç»™ Node.js çš„ç©ºé—´æ›´å°‘ã€‚å½“ webpack æ‰“åŒ…ä¸€ä¸ªåŒ…å« Monaco Editorã€Arco Designã€å¤šä¸ª AI SDK çš„å¤§å‹ Electron é¡¹ç›®æ—¶ï¼Œå†…å­˜æ¶ˆè€—åˆšå¥½<strong>å¡åœ¨äº† macOS çš„ä¸´ç•Œç‚¹ä¸Š</strong>ã€‚</p>
<p>Windows å’Œ Linux åˆšå¥½æ²¡è¶…ï¼ŒmacOS åˆšå¥½è¶…äº†ã€‚å·®çš„å¯èƒ½å°±æ˜¯é‚£å‡ ç™¾ MBã€‚</p>
<p>è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜ä¹‹å‰æ²¡å‡ºç°â€”â€”éšç€é¡¹ç›®ä¸æ–­å£®å¤§ï¼Œä¾èµ–è¶Šæ¥è¶Šå¤šï¼Œwebpack çš„å†…å­˜æ¶ˆè€—åœ¨æŸä¸ªç‰ˆæœ¬ç»ˆäºçªç ´äº† macOS ä¸Šçš„ 4GB å¤©èŠ±æ¿ã€‚</p>
<h3 data-id="heading-7">ç¬¬ä¸‰å¤©ï¼šä¿®å¤ä¸åæ€</h3>
<h4 data-id="heading-8">ä¿®å¤æ–¹æ¡ˆ</h4>
<p>ä¿®å¤æœ¬èº«åªéœ€è¦ä¸€è¡Œï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">env:</span>
  <span class="hljs-attr">NODE_OPTIONS:</span> <span class="hljs-string">"--max-old-space-size=8192"</span>
</code></pre>
<p>è¿™ä¸æ˜¯"ç»™ Node.js æ›´å¤šç‰©ç†å†…å­˜"â€”â€”Runner çš„ç‰©ç†å†…å­˜è¿˜æ˜¯ 7GBï¼Œä¸ä¼šå‡­ç©ºå˜å¤šã€‚</p>
<p>è¿™æ˜¯<strong>è§£é™¤ V8 å¼•æ“çš„äººä¸ºé™åˆ¶</strong>ã€‚å‘Šè¯‰ V8ï¼š"å¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥ç”¨åˆ° 8GB"ã€‚å®é™…ä¸Š webpack åªä¼šç”¨åˆ°å®ƒéœ€è¦çš„é‡ï¼ˆçº¦ 5GBï¼‰ã€‚å› ä¸º 5GB &lt; 8GBï¼ˆæ–°ä¸Šé™ï¼‰ï¼Œæ‰€ä»¥ä¸å†è§¦å‘ OOMã€‚</p>


























<table><thead><tr><th>æƒ…å†µ</th><th>V8 å †ä¸Šé™</th><th>å®é™…éœ€è¦</th><th>ç³»ç»Ÿå¯ç”¨</th><th>ç»“æœ</th></tr></thead><tbody><tr><td>ä¿®å¤å‰</td><td>~4GB (é»˜è®¤)</td><td>~5GB</td><td>~4.5GB</td><td><strong>OOM</strong></td></tr><tr><td>ä¿®å¤å</td><td>8GB (æ‰‹åŠ¨)</td><td>~5GB</td><td>~4.5GB</td><td><strong>æˆåŠŸ</strong></td></tr></tbody></table>
<h4 data-id="heading-9">é˜²å¾¡æ€§æªæ–½</h4>
<p>å…‰ä¿® OOM ä¸å¤Ÿã€‚çœŸæ­£çš„é—®é¢˜æ˜¯ <code>continue_on_error: true</code> è®©æ„å»ºå¤±è´¥å˜æˆäº†"æ²‰é»˜çš„æ€æ‰‹"ã€‚</p>
<p>æˆ‘é‡å†™äº† macOS æ„å»ºæ­¥éª¤ï¼Œå°†<strong>å…¬è¯å¤±è´¥</strong>å’Œ<strong>æ„å»ºå¤±è´¥</strong>åŒºåˆ†å¼€æ¥ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">with</span> <span class="hljs-string">electron-builder</span> <span class="hljs-string">(macOS)</span>
  <span class="hljs-attr">run:</span> <span class="hljs-string">|
    set +e
    ${{ matrix.command }} 2&gt;&amp;1 | tee build.log
    BUILD_EXIT_CODE=${PIPESTATUS[0]}
</span>
    <span class="hljs-comment"># æ£€æŸ¥ DMG æ˜¯å¦ç”Ÿæˆ</span>
    <span class="hljs-string">if</span> <span class="hljs-string">ls</span> <span class="hljs-string">out/*.dmg</span> <span class="hljs-number">1</span><span class="hljs-string">&gt;/dev/null</span> <span class="hljs-number">2</span><span class="hljs-string">&gt;&amp;1;</span> <span class="hljs-string">then</span>
      <span class="hljs-string">DMG_EXISTS=true</span>
    <span class="hljs-string">fi</span>

    <span class="hljs-string">if</span> [ <span class="hljs-string">$BUILD_EXIT_CODE</span> <span class="hljs-string">-eq</span> <span class="hljs-number">0</span> ]<span class="hljs-string">;</span> <span class="hljs-string">then</span>
      <span class="hljs-string">exit</span> <span class="hljs-number">0</span>  <span class="hljs-comment"># å®Œå…¨æˆåŠŸ âœ…</span>
    <span class="hljs-string">fi</span>

    <span class="hljs-comment"># DMG å­˜åœ¨ä½†æ„å»ºå¤±è´¥ â†’ å¯èƒ½åªæ˜¯å…¬è¯é—®é¢˜</span>
    <span class="hljs-string">if</span> [ <span class="hljs-string">"$DMG_EXISTS"</span> <span class="hljs-string">=</span> <span class="hljs-literal">true</span> ]<span class="hljs-string">;</span> <span class="hljs-string">then</span>
      <span class="hljs-string">if</span> <span class="hljs-string">grep</span> <span class="hljs-string">-qiE</span> <span class="hljs-string">"notariz|staple"</span> <span class="hljs-string">build.log;</span> <span class="hljs-string">then</span>
        <span class="hljs-string">echo</span> <span class="hljs-string">"âš ï¸ DMG æ„å»ºæˆåŠŸï¼Œä½†å…¬è¯å¤±è´¥"</span>
        <span class="hljs-string">exit</span> <span class="hljs-number">0</span>  <span class="hljs-comment"># å…è®¸ç»§ç»­</span>
      <span class="hljs-string">fi</span>
    <span class="hljs-string">fi</span>

    <span class="hljs-comment"># DMG éƒ½æ²¡ç”Ÿæˆ â†’ çœŸæ­£çš„æ„å»ºå¤±è´¥</span>
    <span class="hljs-string">exit</span> <span class="hljs-number">1</span>  <span class="hljs-comment"># âŒ é˜»æ–­ CI</span>
</code></pre>
<p>é€»è¾‘å¾ˆç®€å•ï¼š</p>
<ul>
<li><strong>æ„å»ºæˆåŠŸ + å…¬è¯æˆåŠŸ</strong> â†’ å…¨éƒ¨é€šè¿‡ âœ…</li>
<li><strong>DMG ç”Ÿæˆäº†ä½†å…¬è¯å¤±è´¥</strong> â†’ è­¦å‘Šä½†ä¸é˜»å¡ âš ï¸ï¼ˆç”¨æˆ·å³é”®æ‰“å¼€å³å¯ï¼‰</li>
<li><strong>DMG éƒ½æ²¡ç”Ÿæˆ</strong> â†’ ç›´æ¥å¤±è´¥ âŒï¼ˆè¿™æ‰æ˜¯çœŸé—®é¢˜ï¼‰</li>
</ul>
<p>ä¸å†ä¸€åˆ€åˆ‡åœ° <code>continue_on_error</code>ï¼Œè€Œæ˜¯<strong>ç²¾å‡†åŒºåˆ†é”™è¯¯ç±»å‹</strong>ã€‚</p>
<h3 data-id="heading-10">ç•ªå¤–ç¯‡ï¼šAionUi çš„"æ··è¡€"æ‰“åŒ…æ¶æ„</h3>
<p>è®²å®Œäº† bug æœ¬èº«ï¼Œæˆ‘æƒ³èŠèŠè¿™ä¸ª bug ä¹‹æ‰€ä»¥èƒ½è—è¿™ä¹ˆæ·±çš„æ ¹æœ¬åŸå› â€”â€”AionUi çš„æ‰“åŒ…æµç¨‹æœ¬èº«å°±ä¸èµ°å¯»å¸¸è·¯ã€‚</p>
<h4 data-id="heading-11">ä¼ ç»Ÿå¼€æºé¡¹ç›®æ€ä¹ˆæ‰“åŒ…ï¼Ÿ</h4>
<p>å¤§å¤šæ•° Electron å¼€æºé¡¹ç›®çš„æ‰“åŒ…æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-css" lang="css">æ–¹æ¡ˆ <span class="hljs-selector-tag">A</span>ï¼šçº¯ Electron Forge
æºä»£ç  â†’ electron-forge make â†’ DMG/EXE/DEB
ï¼ˆå¼€å‘ã€ç¼–è¯‘ã€æ‰“åŒ…ä¸€æ¡é¾™ï¼‰

æ–¹æ¡ˆ <span class="hljs-selector-tag">B</span>ï¼šçº¯ electron-builder
æºä»£ç  â†’ webpack/vite ç¼–è¯‘ â†’ electron-builder â†’ DMG/EXE/DEB
ï¼ˆè‡ªå·±ç¼–è¯‘ï¼Œbuilder è´Ÿè´£æ‰“åŒ…ï¼‰
</code></pre>
<p>ç®€å•ç›´æ¥ã€‚ä¸€ä¸ªå·¥å…·ä»å¤´ç®¡åˆ°å°¾ï¼Œå‡ºäº†é—®é¢˜ä¹Ÿå¥½æ’æŸ¥ã€‚</p>
<h4 data-id="heading-12">AionUi ä¸ºä»€ä¹ˆè¦"æ··è¡€"ï¼Ÿ</h4>
<p>AionUi çš„æ‰“åŒ…æµç¨‹é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æºä»£ç </span>
  <span class="hljs-string">â†“</span>
<span class="hljs-attr">Step 1:</span> <span class="hljs-string">Electron</span> <span class="hljs-string">Forge</span> <span class="hljs-string">(webpack</span> <span class="hljs-string">ç¼–è¯‘)</span>
  <span class="hljs-string">â”œâ”€â”€</span> <span class="hljs-string">WebpackPlugin</span> <span class="hljs-string">ç¼–è¯‘</span> <span class="hljs-string">main</span> <span class="hljs-string">process</span>
  <span class="hljs-string">â”œâ”€â”€</span> <span class="hljs-string">WebpackPlugin</span> <span class="hljs-string">ç¼–è¯‘</span> <span class="hljs-string">renderer</span> <span class="hljs-string">process</span> <span class="hljs-string">â†’</span> <span class="hljs-string">index.html</span>  <span class="hljs-string">â†</span> <span class="hljs-string">ç™½å±å°±æ˜¯è¿™é‡Œæ²¡ç”Ÿæˆ</span>
  <span class="hljs-string">â””â”€â”€</span> <span class="hljs-string">è¾“å‡ºåˆ°</span> <span class="hljs-string">.webpack/</span> <span class="hljs-string">ç›®å½•</span>
  <span class="hljs-string">â†“</span>
<span class="hljs-attr">Step 2:</span> <span class="hljs-string">äº§ç‰©æ ¡éªŒ</span>
  <span class="hljs-string">â””â”€â”€</span> <span class="hljs-string">æ£€æŸ¥</span> <span class="hljs-string">.webpack/renderer/main_window/index.html</span> <span class="hljs-string">æ˜¯å¦å­˜åœ¨</span>
  <span class="hljs-string">â†“</span>
<span class="hljs-attr">Step 3:</span> <span class="hljs-string">electron-builder</span> <span class="hljs-string">(åˆ†å‘æ‰“åŒ…)</span>
  <span class="hljs-string">â”œâ”€â”€</span> <span class="hljs-string">è¯»å–</span> <span class="hljs-string">electron-builder.yml</span> <span class="hljs-string">é…ç½®</span>
  <span class="hljs-string">â”œâ”€â”€</span> <span class="hljs-string">å°†</span> <span class="hljs-string">.webpack/</span> <span class="hljs-string">æ‰“å…¥</span> <span class="hljs-string">asar</span> <span class="hljs-string">å½’æ¡£</span>
  <span class="hljs-string">â”œâ”€â”€</span> <span class="hljs-attr">afterPack:</span> <span class="hljs-string">é‡å»ºåŸç”Ÿæ¨¡å—</span> <span class="hljs-string">(better-sqlite3,</span> <span class="hljs-string">node-pty...)</span>
  <span class="hljs-string">â””â”€â”€</span> <span class="hljs-attr">afterSign:</span> <span class="hljs-string">ä»£ç ç­¾å</span> <span class="hljs-string">+</span> <span class="hljs-string">Apple</span> <span class="hljs-string">å…¬è¯</span>
  <span class="hljs-string">â†“</span>
<span class="hljs-string">DMG</span> <span class="hljs-string">/</span> <span class="hljs-string">ZIP</span> <span class="hljs-string">/</span> <span class="hljs-string">EXE</span> <span class="hljs-string">/</span> <span class="hljs-string">DEB</span>
</code></pre>
<p>ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ä¸€ä¸ªå·¥å…·ï¼Ÿå› ä¸º AionUi çš„éœ€æ±‚å¤ª"æ‹§å·´"äº†ï¼š</p>
<p><strong>éœ€è¦ Electron Forge çš„åŸå› ï¼š</strong></p>
<ul>
<li>å®ƒçš„ <code>WebpackPlugin</code> å¯¹ Electron å¤šè¿›ç¨‹æ¶æ„ï¼ˆmain + renderer + preloadï¼‰æœ‰å¼€ç®±å³ç”¨çš„æ”¯æŒ</li>
<li>å¼€å‘æ—¶çš„ HMR çƒ­æ›´æ–°ã€DevServerã€æ—¥å¿—ç«¯å£ç®¡ç†éƒ½åšå¾—å¾ˆå¥½</li>
<li><code>FusesPlugin</code> å¯ä»¥åœ¨æ‰“åŒ…æ—¶æ§åˆ¶ Electron å®‰å…¨ç‰¹æ€§ï¼ˆç¦ç”¨ RunAsNodeã€å¯ç”¨ Cookie åŠ å¯†ç­‰ï¼‰</li>
</ul>
<p><strong>éœ€è¦ electron-builder çš„åŸå› ï¼š</strong></p>
<ul>
<li>macOS ä»£ç ç­¾å + Apple å…¬è¯ï¼ˆForge çš„ maker æ”¯æŒæœ‰é™ï¼‰</li>
<li>è·¨æ¶æ„ç¼–è¯‘ï¼ˆåœ¨ arm64 æœºå™¨ä¸Šæ„å»º x64 åŒ…ï¼Œåä¹‹äº¦ç„¶ï¼‰</li>
<li>ç²¾ç»†çš„ asar æ§åˆ¶ï¼ˆå“ªäº›æ¨¡å—æ‰“åŒ…ã€å“ªäº›è§£å‹ã€å“ªäº›æ’é™¤ï¼‰</li>
<li>å¤šæ ¼å¼è¾“å‡ºï¼ˆDMG + ZIP åŒæ—¶ç”Ÿæˆï¼‰</li>
<li>æ›´æˆç†Ÿçš„ CI/CD é›†æˆ</li>
</ul>
<p>å•ç‹¬ç”¨ Forge åšä¸äº†å®Œå–„çš„å…¬è¯ï¼›å•ç‹¬ç”¨ electron-builder åˆæ²¡æœ‰ Forge çš„ webpack é›†æˆå¥½ç”¨ã€‚æ‰€ä»¥ AionUi ç”¨äº†ä¸€ä¸ª<strong>æ··è¡€æ–¹æ¡ˆ</strong>â€”â€”Forge è´Ÿè´£ç¼–è¯‘ï¼Œelectron-builder è´Ÿè´£æ‰“åŒ…ã€‚</p>
<h4 data-id="heading-13">æ··è¡€çš„ä»£ä»·ï¼šä¸¤ä¸ªå·¥å…·ä¹‹é—´çš„"ä¿¡ä»»è¾¹ç•Œ"</h4>
<p>è¿™ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒè„šæœ¬æ˜¯ <code>build-with-builder.js</code>ï¼Œå®ƒå……å½“äº†ä¸¤ä¸ªå·¥å…·ä¹‹é—´çš„"æ¡¥æ¢"ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Step 1: è®© Forge ç¼–è¯‘ webpack</span>
<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`npm exec electron-forge -- package --arch=<span class="hljs-subst">${targetArch}</span>`</span>);

<span class="hljs-comment">// Step 2: æŠŠ .webpack/ ç›®å½•ç»“æ„æ•´ç†æˆ electron-builder æœŸæœ›çš„æ ·å­</span>
<span class="hljs-title function_">ensureDir</span>(sourceDir, webpackDir, <span class="hljs-string">'main'</span>);
<span class="hljs-title function_">ensureDir</span>(sourceDir, webpackDir, <span class="hljs-string">'renderer'</span>);

<span class="hljs-comment">// Step 3: æ ¡éªŒå…³é”®äº§ç‰©</span>
<span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(rendererIndex)) {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Missing renderer entry'</span>);
}

<span class="hljs-comment">// Step 4: è®© electron-builder æ‰“åŒ…</span>
<span class="hljs-title function_">execSync</span>(<span class="hljs-string">`npx electron-builder <span class="hljs-subst">${builderArgs}</span> --<span class="hljs-subst">${targetArch}</span>`</span>);
</code></pre>
<p>é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œï¼š<strong>Forge å’Œ electron-builder ä¹‹é—´æ²¡æœ‰åŸç”Ÿçš„æ¡æ‰‹æœºåˆ¶</strong>ã€‚Forge ç¼–è¯‘å®Œå°±å®Œäº†ï¼Œè‡³äº <code>.webpack/</code> ç›®å½•é‡Œåˆ°åº•æœ‰æ²¡æœ‰è¯¥æœ‰çš„æ–‡ä»¶ï¼Œå®ƒä¸ç®¡ã€‚electron-builder æ‹¿åˆ° <code>.webpack/</code> å°±æ‰“åŒ…ï¼Œè‡³äºé‡Œé¢æ˜¯ä¸æ˜¯ç©ºçš„ï¼Œå®ƒä¹Ÿä¸ç®¡ã€‚</p>
<p>å½“ webpack å› ä¸º OOM ä¸­é€”å´©æºƒæ—¶ï¼Œ<code>.webpack/</code> ç›®å½•å¯èƒ½æ˜¯"åŠæˆå“"â€”â€”main è¿›ç¨‹çš„ä»£ç å¯èƒ½å·²ç»ç¼–è¯‘å¥½äº†ï¼ˆå› ä¸ºå®ƒå…ˆç¼–è¯‘ï¼‰ï¼Œä½† renderer çš„ <code>index.html</code> è¿˜æ²¡æ¥å¾—åŠç”Ÿæˆã€‚electron-builder ç…§æ ·æŠŠè¿™ä¸ªåŠæˆå“æ‰“è¿›äº† asarï¼Œäº§å‡ºäº†ä¸€ä¸ª"çœ‹èµ·æ¥æ­£å¸¸ä½†å…¶å®æ²¡æœ‰ç•Œé¢"çš„ DMGã€‚</p>
<p>è¿™å°±æ˜¯æ··è¡€æ¶æ„çš„ä»£ä»·ï¼š<strong>ä¸¤ä¸ªå·¥å…·ä¹‹é—´çš„ä¿¡ä»»è¾¹ç•Œï¼Œæ°å¥½æ˜¯ bug çš„è—èº«ä¹‹å¤„</strong>ã€‚</p>
<h4 data-id="heading-14">ä¸ä¼ ç»Ÿæ–¹æ¡ˆçš„å¯¹æ¯”</h4>













































<table><thead><tr><th>ç»´åº¦</th><th>ä¼ ç»Ÿæ–¹æ¡ˆ (å•å·¥å…·)</th><th>AionUi (æ··è¡€æ–¹æ¡ˆ)</th></tr></thead><tbody><tr><td><strong>ç¼–è¯‘</strong></td><td>å·¥å…·å†…ç½®</td><td>Electron Forge (WebpackPlugin)</td></tr><tr><td><strong>æ‰“åŒ…</strong></td><td>åŒä¸€å·¥å…·</td><td>electron-builder</td></tr><tr><td><strong>ç­¾å/å…¬è¯</strong></td><td>å·¥å…·å†…ç½®æˆ–æ‰‹åŠ¨</td><td>electron-builder + afterSign.js</td></tr><tr><td><strong>åŸç”Ÿæ¨¡å—</strong></td><td>å·¥å…·è‡ªåŠ¨å¤„ç†</td><td>afterPack.js æ‰‹åŠ¨é‡å»º</td></tr><tr><td><strong>é”™è¯¯ä¼ æ’­</strong></td><td>ç›´é€šï¼Œå®¹æ˜“å‘ç°</td><td>è·¨å·¥å…·ï¼Œå¯èƒ½è¢«åæ‰</td></tr><tr><td><strong>çµæ´»æ€§</strong></td><td>å—é™äºå•å·¥å…·</td><td>é«˜ï¼ˆå¯å•ç‹¬å®šåˆ¶æ¯ä¸ªç¯èŠ‚ï¼‰</td></tr><tr><td><strong>å¤æ‚åº¦</strong></td><td>ä½</td><td>é«˜</td></tr></tbody></table>
<h4 data-id="heading-15">åŸç”Ÿæ¨¡å—ï¼šå¦ä¸€ä¸ªæ·±å‘</h4>
<p>AionUi ä¸æ˜¯ä¸€ä¸ªçº¯ JS åº”ç”¨ã€‚å®ƒä¾èµ–äº†å¤šä¸ªåŸç”Ÿ C++ æ¨¡å—ï¼š</p>
<ul>
<li><strong>better-sqlite3</strong> â€” æœ¬åœ°æ•°æ®åº“ï¼Œå­˜å‚¨å¯¹è¯å†å²å’Œè®¾ç½®</li>
<li><strong>node-pty</strong> â€” ç»ˆç«¯æ¨¡æ‹Ÿï¼Œç”¨äºè¿è¡Œ CLI AI å·¥å…·</li>
<li><strong>tree-sitter</strong> â€” ä»£ç è§£æï¼Œç”¨äºè¯­æ³•é«˜äº®</li>
</ul>
<p>è¿™äº›æ¨¡å—å¿…é¡»é’ˆå¯¹ç›®æ ‡å¹³å°å’Œæ¶æ„ç¼–è¯‘æˆ <code>.node</code> äºŒè¿›åˆ¶æ–‡ä»¶ã€‚åœ¨ <code>afterPack.js</code> ä¸­ï¼ŒAionUi å®ç°äº†ä¸€å¥—å®Œæ•´çš„è·¨æ¶æ„é‡å»ºé€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// äº¤å‰ç¼–è¯‘æ—¶ï¼Œå…ˆæ¸…ç†é”™è¯¯æ¶æ„çš„äºŒè¿›åˆ¶</span>
<span class="hljs-keyword">if</span> (isCrossCompile) {
  <span class="hljs-comment">// åˆ é™¤ build/ ç›®å½•ï¼ˆåŒ…å«é”™è¯¯æ¶æ„çš„ç¼–è¯‘äº§ç‰©ï¼‰</span>
  fs.<span class="hljs-title function_">rmSync</span>(buildDir, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">force</span>: <span class="hljs-literal">true</span> });
  <span class="hljs-comment">// åˆ é™¤å¯¹ç«‹æ¶æ„çš„å¯é€‰ä¾èµ–åŒ…</span>
  <span class="hljs-comment">// æ¯”å¦‚ç›®æ ‡æ˜¯ arm64ï¼Œå°±åˆ é™¤æ‰€æœ‰ *-x64 çš„åŒ…</span>
}

<span class="hljs-comment">// ç„¶åä¸ºç›®æ ‡æ¶æ„é‡æ–°ç¼–è¯‘</span>
<span class="hljs-title function_">rebuildSingleModule</span>({
  moduleName, moduleRoot,
  <span class="hljs-attr">platform</span>: electronPlatformName,
  <span class="hljs-attr">arch</span>: targetArch,
  electronVersion
});
</code></pre>
<p>è¿™æ„å‘³ç€ä¸€æ¬¡ macOS arm64 æ„å»ºå®é™…ä¸Šè¦ç»å†ï¼šwebpack ç¼–è¯‘ â†’ Forge æ‰“åŒ… â†’ electron-builder æ‰“åŒ… â†’ åŸç”Ÿæ¨¡å—é‡å»º â†’ ä»£ç ç­¾å â†’ Apple å…¬è¯ï¼Œ<strong>å…­ä¸ªæ­¥éª¤</strong>ã€‚ä»»ä½•ä¸€æ­¥å¤±è´¥éƒ½å¯èƒ½å¯¼è‡´æœ€ç»ˆäº§ç‰©æœ‰é—®é¢˜ã€‚</p>
<h4 data-id="heading-16">ä¸ºä»€ä¹ˆä¸ç®€åŒ–ï¼Ÿ</h4>
<p>è¯´å®è¯ï¼Œæˆ‘ä¹Ÿæƒ³ç®€åŒ–ã€‚ä½†ç°å®æ˜¯ï¼š</p>
<ol>
<li><strong>Forge çš„ maker ä¸æ”¯æŒ Apple notarytool</strong> â€” è¿™æ˜¯ç¡¬ä¼¤ï¼Œæ²¡æ³•ç»•è¿‡</li>
<li><strong>electron-builder çš„ webpack é›†æˆä¸å¦‚ Forge</strong> â€” ç‰¹åˆ«æ˜¯å¤šå…¥å£ï¼ˆmain + renderer + preload + workerï¼‰åœºæ™¯</li>
<li><strong>åŸç”Ÿæ¨¡å—çš„è·¨æ¶æ„ç¼–è¯‘</strong> â€” éœ€è¦ç²¾ç»†æ§åˆ¶ï¼Œä¸¤ä¸ªå·¥å…·å„è‡ªçš„æ–¹æ¡ˆéƒ½ä¸å¤Ÿçµæ´»</li>
<li><strong>å®‰å…¨ç‰¹æ€§</strong> â€” Electron Fuses åªæœ‰ Forge çš„ FusesPlugin æ”¯æŒå¾—å¥½</li>
</ol>
<p>æ‰€ä»¥è¿™ä¸ª"æ··è¡€"æ–¹æ¡ˆè™½ç„¶å¤æ‚ï¼Œä½†åœ¨å½“å‰çš„ Electron ç”Ÿæ€ä¸‹ï¼Œå®ƒæ˜¯ AionUi è¿™ç§é‡é‡çº§æ¡Œé¢åº”ç”¨çš„<strong>å®é™…æœ€ä¼˜è§£</strong>ã€‚</p>
<p>ä»£ä»·å°±æ˜¯â€”â€”å½“ bug å‡ºç°åœ¨ä¸¤ä¸ªå·¥å…·çš„"äº¤ç•Œå¤„"æ—¶ï¼Œæ’æŸ¥éš¾åº¦ä¼šæŒ‡æ•°çº§ä¸Šå‡ã€‚å°±åƒè¿™æ¬¡çš„ç™½å±äº‹æ•…ã€‚</p>
<h3 data-id="heading-17">ç»éªŒæ€»ç»“</h3>
<h4 data-id="heading-18">1. <code>continue_on_error</code> æ˜¯ä¸€æŠŠåŒåˆƒå‰‘</h4>
<p>å®ƒèƒ½é˜²æ­¢éå…³é”®å¤±è´¥é˜»å¡æµæ°´çº¿ï¼Œä½†ä¹Ÿèƒ½è®©å…³é”®é”™è¯¯æ‚„æ— å£°æ¯åœ°æºœèµ°ã€‚å¦‚æœä¸€å®šè¦ç”¨ï¼Œè¯·ç¡®ä¿æœ‰é¢å¤–çš„<strong>äº§ç‰©æ ¡éªŒé€»è¾‘</strong>ï¼Œè€Œä¸æ˜¯æ— æ¡ä»¶ä¿¡ä»»æ„å»ºå‘½ä»¤çš„é€€å‡ºç ã€‚</p>
<h4 data-id="heading-19">2. CI ç»¿ç¯ â‰  æ„å»ºæˆåŠŸ</h4>
<p>ç‰¹åˆ«æ˜¯åœ¨ Electron è¿™ç§å¤šæ­¥éª¤æ„å»ºï¼ˆwebpack â†’ electron-forge â†’ electron-builder â†’ ç­¾å â†’ å…¬è¯ï¼‰çš„åœºæ™¯ä¸‹ï¼Œä»»ä½•ä¸€ä¸ªç¯èŠ‚çš„é™é»˜å¤±è´¥éƒ½å¯èƒ½äº§å‡ºä¸€ä¸ª"çœ‹èµ·æ¥æ²¡é—®é¢˜ä½†å…¶å®ä¸èƒ½ç”¨"çš„å®‰è£…åŒ…ã€‚</p>
<p><strong>å»ºè®®</strong>ï¼šåœ¨ build è„šæœ¬æœ€ååŠ ä¸€ä¸ªäº§ç‰©æ ¡éªŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> rendererIndex = path.<span class="hljs-title function_">join</span>(webpackDir, <span class="hljs-string">'renderer'</span>, <span class="hljs-string">'main_window'</span>, <span class="hljs-string">'index.html'</span>);
<span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(rendererIndex)) {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Missing renderer entry: .webpack/renderer/main_window/index.html'</span>);
}
</code></pre>
<h4 data-id="heading-20">3. OOM æ˜¯ä¸€ä¸ªå¹³å°ç›¸å…³çš„"è–›å®šè°” Bug"</h4>
<p>åŒæ ·çš„ä»£ç ï¼ŒåŒæ ·çš„ webpack é…ç½®ï¼Œåœ¨ Windows ä¸ OOMã€åœ¨ macOS å°± OOMã€‚å®ƒå¯èƒ½ä»Šå¤©ä¸å‡ºç°ï¼Œæ˜å¤©åŠ äº†ä¸€ä¸ªä¾èµ–å°±å‡ºç°äº†ã€‚å¯¹äºå¤§å‹ Electron é¡¹ç›®ï¼Œ<strong>ä¸»åŠ¨è®¾ç½® <code>--max-old-space-size</code> æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯</strong>ï¼Œä¸è¦ç­‰åˆ° OOM äº†æ‰æƒ³èµ·æ¥ã€‚</p>
<h4 data-id="heading-21">4. æ°¸è¿œéªŒè¯æœ€ç»ˆäº§ç‰©</h4>
<p>ä¸è¦ç›¸ä¿¡è¿‡ç¨‹ï¼Œè¦éªŒè¯ç»“æœã€‚åœ¨ CI æµæ°´çº¿é‡ŒåŠ ä¸€æ­¥æ£€æŸ¥æœ€ç»ˆäº§ç‰©æ˜¯å¦å­˜åœ¨ä¸”å®Œæ•´ï¼Œèƒ½çœå»æ— æ•°ä¸ªæ’æŸ¥ç™½å±çš„æ·±å¤œã€‚</p>
<h3 data-id="heading-22">å†™åœ¨æœ€å</h3>
<p>ä¸‰å¤©ä¸‰å¤œï¼Œä»æ€€ç–‘ tar v7ã€åˆ°æ‹†è§£ asarã€åˆ°ç¿»éæ•°ç™¾è¡Œ CI æ—¥å¿—ï¼Œæœ€ç»ˆå‘ç°æ˜¯ä¸€ä¸ª <code>continue_on_error: true</code> é…åˆ Node.js OOM é€ æˆçš„"å®Œç¾çŠ¯ç½ª"ã€‚</p>
<p>ä¿®å¤åªç”¨äº†ä¸€è¡Œé…ç½®ã€‚ä½†æ‰¾åˆ°è¿™ä¸€è¡Œçš„è¿‡ç¨‹ï¼Œè®©æˆ‘æ·±åˆ»ç†è§£äº†ä¸€ä¸ªé“ç†ï¼š</p>
<blockquote>
<p><strong>æœ€éš¾è°ƒè¯•çš„ bugï¼Œä¸æ˜¯ä¼šæŠ¥é”™çš„ bugï¼Œè€Œæ˜¯å‡è£…æ²¡æœ‰ bug çš„ bugã€‚</strong></p>
</blockquote>
<hr/>
<p>å¦‚æœä½ ä¹Ÿåœ¨åš Electron å¼€æºé¡¹ç›®ï¼Œæˆ–è€…æ­£åœ¨è¢« CI æ‰“åŒ…é—®é¢˜æŠ˜ç£¨ï¼Œæ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FiOfficeAI%2FAionUi" target="_blank" title="https://github.com/iOfficeAI/AionUi" ref="nofollow noopener noreferrer">AionUi</a> â€”â€” ä¸€ä¸ªå°†å‘½ä»¤è¡Œ AI Agent å˜æˆç°ä»£èŠå¤©ç•Œé¢çš„æ¡Œé¢åº”ç”¨ï¼Œæ”¯æŒ Gemini CLIã€Claude Codeã€Codexã€é€šä¹‰çµç ç­‰å¤šç§ AI å·¥å…·ã€‚</p>
<ul>
<li><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FiOfficeAI%2FAionUi" target="_blank" title="https://github.com/iOfficeAI/AionUi" ref="nofollow noopener noreferrer">github.com/iOfficeAI/Aâ€¦</a></li>
<li><strong>æŠ€æœ¯æ ˆ</strong>ï¼šElectron 37 + React 19 + TypeScript + UnoCSS + Monaco Editor</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b1f4fc7f8ed450288840bba6b6f7ea3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29jb29uQnJlYWs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770968477&amp;x-signature=86RivDulkWsTvYEW8LtpoxtUuPo%3D" alt="æ‰«ç _æœç´¢è”åˆä¼ æ’­æ ·å¼-ç™½è‰²ç‰ˆ.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ·é‡å°æ–‡ä»¶ + å¤šäº‘ååŒï¼šåœ°ç“œæœºå™¨äºº JuiceFS å­˜å‚¨ä¼˜åŒ–ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7603288778679500835</link>    <guid>https://juejin.cn/post/7603288778679500835</guid>    <pubDate>2026-02-06T07:49:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603288778679500835" data-draft-id="7603288778679484451" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ·é‡å°æ–‡ä»¶ + å¤šäº‘ååŒï¼šåœ°ç“œæœºå™¨äºº JuiceFS å­˜å‚¨ä¼˜åŒ–ä¹‹è·¯"/> <meta itemprop="keywords" content="åç«¯,è¿ç»´"/> <meta itemprop="datePublished" content="2026-02-06T07:49:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JuiceFS"/> <meta itemprop="url" content="https://juejin.cn/user/2665636828032446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ·é‡å°æ–‡ä»¶ + å¤šäº‘ååŒï¼šåœ°ç“œæœºå™¨äºº JuiceFS å­˜å‚¨ä¼˜åŒ–ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2665636828032446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JuiceFS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:49:43.000Z" title="Fri Feb 06 2026 07:49:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ°ç“œç§‘æŠ€æˆç«‹äº 2024 å¹´ï¼Œç”±åœ°å¹³çº¿æœºå™¨äººäº‹ä¸šéƒ¨æ‹†åˆ†ç»„å»ºï¼Œä¸“æ³¨äºæ¶ˆè´¹çº§æœºå™¨äººåº•å±‚è®¡ç®—å¹³å°çš„ç ”å‘ï¼›æ­¤å¤–ï¼Œåœ°ç“œç§‘æŠ€åœ¨ 2025 å¹´è¿˜å‘å¸ƒäº†å…·èº«æ™ºèƒ½åŸºåº§æ¨¡å‹ã€‚</p>
<p>åœ¨æœºå™¨äººæ•°æ®ç®¡ç†å’Œè®­ç»ƒæ¨ç†ä¸­ï¼Œæ•°æ®é‡åºå¤§ï¼Œä½¿ç”¨å¯¹è±¡å­˜å‚¨æ—¶é¢ä¸´å°æ–‡ä»¶ã€å¤šäº‘æ•°æ®ç®¡ç†ç­‰æŒ‘æˆ˜ï¼Œåœ¨å°è¯•äº†ç™¾åº¦äº‘ BOSã€é˜¿é‡Œäº‘ CPFS å’Œå°†ç§æœ‰ MinIO æ›¿æ¢ä¸º SSD å­˜å‚¨åï¼Œæ–¹æ¡ˆåœ¨åº”å¯¹ä¸Šè¿°æŒ‘æˆ˜æ—¶ä»ç„¶é¢ä¸´å›°éš¾ã€‚åœ°ç“œæœºå™¨äººæœ€ç»ˆé€‰æ‹©äº† JuiceFS ä½œä¸ºæ ¸å¿ƒå­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚</p>
<p>JuiceFS å¯¹è·¨äº‘ä¸šåŠ¡çš„å¤©ç„¶é€‚é…èƒ½åŠ›ï¼Œèƒ½å¤Ÿé«˜æ•ˆæ”¯æŒå¤šäº‘ç¯å¢ƒä¸­çš„æ•°æ®å…±äº«éœ€æ±‚ã€‚åœ¨è®­ç»ƒåœºæ™¯ä¸­ï¼ŒJuiceFS é’ˆå¯¹å°æ–‡ä»¶æ•°æ®è®¾è®¡çš„ç¼“å­˜æœºåˆ¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæ›¿ä»£ä¼ ç»Ÿç¼“å­˜æ–¹æ¡ˆï¼ŒåŒæ—¶åœ¨æˆæœ¬å’Œæ•ˆç‡ä¹‹é—´å®ç°é«˜æ€§ä»·æ¯”ï¼Œå®Œå…¨æ»¡è¶³å­˜å‚¨æ€§èƒ½çš„éœ€æ±‚ã€‚ç›®å‰ï¼Œåœ°ç“œæœºå™¨äººçš„æ–‡ä»¶ç®¡ç†è§„æ¨¡å·²è¾¾åˆ°åƒä¸‡çº§åˆ«ã€‚</p>
<p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»æˆ‘ä»¬çš„ä¸šåŠ¡èƒŒæ™¯ã€å­˜å‚¨ç—›ç‚¹ã€æ–¹æ¡ˆé€‰å‹ã€è½åœ°å®è·µä¸ç”Ÿäº§è°ƒä¼˜ç»éªŒï¼Œå¸Œæœ›å¯¹åŒè¡Œä¸šçš„æŠ€æœ¯å®è·µä¸æ–¹æ¡ˆé€‰å‹æä¾›å‚è€ƒä¸å€Ÿé‰´ã€‚</p>
<h2 data-id="heading-0">01 æœºå™¨äººè¡Œä¸šçš„å­˜å‚¨ç—›ç‚¹</h2>
<p>äº‘å¹³å°ä½œä¸ºåœ°ç“œæœºå™¨äººçš„æŠ€æœ¯æ ¸å¿ƒä¸­æ¢ï¼Œæ‰¿æ‹…ä»¿çœŸç¯å¢ƒæ­å»ºã€æ•°æ®ç”Ÿæˆä¸æ¨¡å‹è®­ç»ƒã€æ¨¡å‹è½»é‡åŒ–éƒ¨ç½²åŠå¯è§†åŒ–éªŒè¯ç­‰å…³é”®ä¸šåŠ¡èŒèƒ½ã€‚å¹³å°æ‰€æ¶‰åŠçš„æ•°æ®ç±»å‹å¤šå…ƒï¼Œä¸»è¦åŒ…æ‹¬ä¼ æ„Ÿå™¨å›¾åƒæ•°æ®ã€æ¿€å…‰é›·è¾¾ç‚¹äº‘æ•°æ®ã€æ¨¡å‹æƒé‡ä¸é…ç½®æ•°æ®ã€ç”µæœºè¿è¡Œæ•°æ®åŠåœ°å›¾æ„å»ºæ•°æ®ç­‰ã€‚</p>
<p>å¯¹è±¡å­˜å‚¨è™½èƒ½æ»¡è¶³æµ·é‡æ•°æ®çš„åŸºç¡€å­˜å‚¨éœ€æ±‚ï¼Œä½†åœ¨æœºå™¨äººä¸šåŠ¡é«˜é¢‘å‡ºç°çš„æµ·é‡å°æ–‡ä»¶å¤„ç†åœºæ™¯ä¸­ï¼Œæ€§èƒ½çŸ­æ¿å°¤ä¸ºçªå‡ºã€‚åœ°ç“œæœºå™¨äººçš„å­˜å‚¨ç³»ç»Ÿé¢ä¸´å››å¤§æ ¸å¿ƒæŒ‘æˆ˜ï¼š</p>
<p><strong>æµ·é‡å°æ–‡ä»¶çš„å…ƒæ•°æ®æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šæœºå™¨äººæ¨¡å‹è®­ç»ƒç¯èŠ‚æ¶‰åŠåƒä¸‡è‡³äº¿çº§è§„æ¨¡çš„ä¼ æ„Ÿå™¨å›¾åƒã€æ¿€å…‰é›·è¾¾æ•°æ®ä¸æ¨¡å‹æ–‡ä»¶ï¼Œä¼ ç»Ÿå¯¹è±¡å­˜å‚¨ï¼ˆå¦‚æ ‡å‡† S3ï¼‰åœ¨å¤„ç†è¯¥è§„æ¨¡æ•°æ®æ—¶ï¼Œå…ƒæ•°æ®æ“ä½œæ€§èƒ½å­˜åœ¨æ˜¾è‘—ç“¶é¢ˆï¼Œæ–‡ä»¶åˆ—è¡¨æ£€ç´¢ã€å±æ€§è·å–ç­‰å¸¸è§„æ“ä½œçš„å›ºå®š API å»¶è¿Ÿé€šå¸¸ä¸º 10â€“30 msï¼Œç›´æ¥åˆ¶çº¦è®­ç»ƒä¸æ¨ç†ç¯èŠ‚çš„ QPS è¡¨ç°ï¼Œå½±å“æ•´ä½“ç ”å‘æ•ˆç‡ã€‚</p>
<p><strong>å¤šäº‘ååŒä¸æ•°æ®æµé€šæ•ˆç‡ä½ä¸‹</strong>ï¼šå½“å‰æœºå™¨äººä¼ä¸šæ™®éé‡‡ç”¨å¤šäº‘æ¶æ„å¼€å±•ç ”å‘ä¸ç”Ÿäº§ä¸šåŠ¡ï¼Œå¦‚ä½•ä¿éšœæ•°æ®åœ¨ä¸åŒäº‘å¹³å°åŠåœ°åŸŸé—´é«˜æ•ˆåŒæ­¥ä¸å…±äº«ï¼Œæˆä¸ºè¡Œä¸šæ™®éé¢ä¸´çš„æ ¸å¿ƒé—®é¢˜ã€‚ä¼ ç»Ÿå­˜å‚¨æ–¹æ¡ˆè·¨äº‘æ•°æ®æµé€šæ•ˆç‡åä½ï¼Œä¸”å¤§å¤šä¸å•ä¸€äº‘æœåŠ¡å•†æ·±åº¦ç»‘å®šï¼Œæ˜“å½¢æˆæŠ€æœ¯ä¾èµ–ï¼Œéš¾ä»¥å®ç°çµæ´»çš„è·¨äº‘ä¸šåŠ¡éƒ¨ç½²ä¸æ•°æ®ååŒã€‚</p>
<p><strong>æ€§èƒ½ã€æˆæœ¬ä¸è¿ç»´çš„ â€œä¸å¯èƒ½ä¸‰è§’â€</strong>ï¼šé«˜æ€§èƒ½å¹¶è¡Œæ–‡ä»¶ç³»ç»Ÿå¯æä¾›é«˜ååã€ä½å»¶è¿Ÿçš„å­˜å‚¨æœåŠ¡ï¼Œä½†é€šå¸¸ä¾èµ–å…¨é—ªå­˜é˜µåˆ—æˆ–ä¸“ç”¨ç¡¬ä»¶è®¾å¤‡ï¼Œå‰æœŸç¡¬ä»¶æŠ•å…¥ä¸åæœŸè¿ç»´æˆæœ¬é«˜æ˜‚ï¼Œä¸”éƒ¨ç½²è¿ç»´æµç¨‹å¤æ‚ã€‚ä½æˆæœ¬å¯¹è±¡å­˜å‚¨è™½å…·å¤‡è‰¯å¥½çš„å¼¹æ€§æ‰©å±•èƒ½åŠ›ï¼Œå´éš¾ä»¥æ”¯æ’‘ AI è®­ç»ƒåœºæ™¯ä¸‹ GPU é›†ç¾¤æ‰€éœ€çš„é«˜åå I/O è´Ÿè½½ã€‚è¡Œä¸šå¸¸è§„æ–¹æ¡ˆæ˜¯å°† S3 æ•°æ®åŒæ­¥è‡³é«˜é€Ÿæ–‡ä»¶ç³»ç»Ÿä½œä¸ºç¼“å­˜ä½¿ç”¨ï¼Œä½†é¢å¤–çš„æ•°æ®åŒæ­¥æµç¨‹å¤§å¹…é™ä½ä¸šåŠ¡æ˜“ç”¨æ€§ï¼Œæ— æ³•å®ç°å­˜å‚¨ä¸è®¡ç®—çš„é«˜æ•ˆååŒã€‚</p>
<p><strong>æ•°æ®é›†ç‰ˆæœ¬ç®¡ç†å›°éš¾</strong>ï¼šæœºå™¨äººæ¨¡å‹è¿­ä»£é€Ÿåº¦å¿«ï¼Œéœ€å¯¹å¤šç‰ˆæœ¬æ•°æ®é›†è¿›è¡Œé«˜æ•ˆã€ç²¾ç»†åŒ–ç®¡ç†ã€‚è‹¥é‡‡ç”¨ç‰©ç†æ‹·è´çš„æ–¹å¼å®ç°æ•°æ®é›†ç‰ˆæœ¬æ§åˆ¶ï¼Œä¼šç›´æ¥å¯¼è‡´åº•å±‚å­˜å‚¨å®¹é‡æˆå€æ¶ˆè€—ï¼Œæ˜¾è‘—æ¨é«˜å­˜å‚¨æˆæœ¬ï¼ŒåŒæ—¶å¤šç‰ˆæœ¬æ•°æ®çš„æ£€ç´¢ã€å¤ç”¨ä¸ç»´æŠ¤éš¾åº¦ä¹Ÿä¼šå¤§å¹…ä¸Šå‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d38f7c618c37466194c1e8df3894012f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770968983&amp;x-signature=bx%2BxzikdUNNUajZynkOEMH2qMDY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">02 å­˜å‚¨é€‰å‹ï¼šJuiceFS vs. MinIO/S3 vs. PFS</h2>
<p>ä¸ºè§£å†³ä¸Šè¿°å­˜å‚¨ç—›ç‚¹ï¼Œåœ°ç“œæœºå™¨äººç¡®ç«‹äº†æ˜ç¡®çš„é€‰å‹è¯„ä¼°æ ‡å‡†ï¼Œå›´ç»•å­˜å‚¨æ¶æ„ã€åè®®å…¼å®¹æ€§ã€å…ƒæ•°æ®æ€§èƒ½ã€æ‰©å±•æ€§ã€å¤šäº‘é€‚é…èƒ½åŠ›ã€æˆæœ¬æ•ˆç‡ã€è¿ç»´å¤æ‚åº¦ä¸ƒå¤§æ ¸å¿ƒç»´åº¦ï¼Œå¯¹è¡Œä¸šä¸»æµå­˜å‚¨æ–¹æ¡ˆå¼€å±•å…¨é¢å¯¹æ¯”æµ‹è¯•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9335119fa4894d37a4c3a7f2179f78cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770968983&amp;x-signature=ump0I6ByeE08ePpOTK5SnV5t3r8%3D" alt="" loading="lazy"/></p>
<p>åŸºäºä¸Šè¿°å¯¹æ¯”ç»“æœï¼ŒJuiceFS åœ¨æ ¸å¿ƒæ€§èƒ½ã€æ‰©å±•æ€§ã€å¤šäº‘é€‚é…ä¸æˆæœ¬æ•ˆç‡ç­‰å¤šä¸ªå…³é”®ç»´åº¦å‡å±•ç°å‡ºæ˜¾è‘—ä¼˜åŠ¿ï¼Œæˆä¸ºåœ°ç“œæœºå™¨äººç»Ÿä¸€å­˜å‚¨è§£å†³æ–¹æ¡ˆçš„é¦–é€‰ã€‚</p>
<p><strong>åŒæ—¶ï¼ŒJuiceFS åœ¨æ™ºèƒ½é©¾é©¶é¢†åŸŸå·²å®ç°å¹¿æ³›è½åœ°ï¼Œåœ°å¹³çº¿ç­‰è¡Œä¸šå¤´éƒ¨ä¼ä¸šå·²é€šè¿‡ JuiceFS å®Œæˆåƒ PB çº§åˆ«çš„æ•°æ®æ‰¿è½½ï¼Œå…·å¤‡æˆç†Ÿçš„å¤§è§„æ¨¡åœºæ™¯åº”ç”¨ç»éªŒ</strong>ã€‚</p>
<p>é’ˆå¯¹åœ°ç“œæœºå™¨äººä¸šåŠ¡åœºæ™¯ï¼ŒJuiceFS çš„æ ¸å¿ƒæŠ€æœ¯ä¼˜åŠ¿ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å››å¤§æ–¹é¢ï¼š</p>
<ul>
<li><strong>è§£è€¦æ¶æ„</strong>ï¼šJuiceFS é‡‡ç”¨å…ƒæ•°æ®ä¸æ•°æ®åˆ†ç¦»çš„æ¶æ„è®¾è®¡ï¼Œå°†æ•°æ®æŒä¹…åŒ–å­˜å‚¨åœ¨ä½æˆæœ¬å¯¹è±¡å­˜å‚¨ï¼ˆå¦‚ S3ã€OSSï¼‰ï¼Œå…ƒæ•°æ®åˆ™æ‰˜ç®¡äº Redis æˆ– TiKV ç­‰æ•°æ®åº“ç»„ä»¶ã€‚<strong>è¿™ç§è§£è€¦æ¶æ„å®ç°äº†å­˜å‚¨çš„å¼¹æ€§æ‰©å±•ï¼Œé¿å…å¯¹å•ä¸€äº‘æœåŠ¡å•†çš„ä¾èµ–</strong>ã€‚</li>
<li><strong>åˆ†å—ä¸ç¼“å­˜æœºåˆ¶</strong>ï¼šJuiceFS ä½¿ç”¨ Chunkã€Sliceã€Block ä¸‰çº§åˆ†å—æœºåˆ¶ï¼Œæœ‰æ•ˆæé«˜äº†å°æ–‡ä»¶è¯»å–æ•ˆç‡ï¼Œå¹¶æå‡äº†å¹¶å‘è¯»å†™èƒ½åŠ›ã€‚æ­¤å¤–ï¼Œç»“åˆå¤šçº§ç¼“å­˜ï¼ˆå†…å­˜ã€æœ¬åœ° SSDã€åˆ†å¸ƒå¼ç¼“å­˜ï¼‰ï¼Œå¯é™ä½çƒ­æ•°æ®è®¿é—®å»¶è¿Ÿï¼Œæ»¡è¶³é«˜ååè®­ç»ƒéœ€æ±‚ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/255cf005d91148f8a8ae34b80b45d69d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770968983&amp;x-signature=%2BBXnmBm1Q7pqEXetpJDzJYzUfX4%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>äº‘åŸç”Ÿé€‚é…æ€§</strong>ï¼šé€šè¿‡æä¾› CSI é©±åŠ¨ï¼ŒJuiceFS åœ¨ Kubernetes ç¯å¢ƒä¸­æä¾›ä¸è®¡ç®—èŠ‚ç‚¹è§£è€¦çš„æŒä¹…åŒ–å­˜å‚¨ï¼Œæ”¯æŒå®¹å™¨æ— çŠ¶æ€åŒ–éƒ¨ç½²å’Œè·¨äº‘è¿ç§»ã€‚å®ƒæ”¯æŒæ•°æ®å…±äº«ï¼Œæå‡åº”ç”¨çš„é«˜å¯ç”¨æ€§å’Œçµæ´»æ€§ï¼Œå¹¶é€‚é…å¤šç§ Kubernetes éƒ¨ç½²æ–¹å¼ã€‚</li>
<li><strong>AI è®­ç»ƒå…¨é“¾è·¯æ”¯æŒ</strong>ï¼šJuiceFS å®Œæ•´æ”¯æŒ POSIXã€HDFS å’Œ S3 APIï¼Œå…¼å®¹ä¸»æµ AI æ¡†æ¶ï¼ˆå¦‚ PyTorchã€TensorFlowï¼‰ï¼Œæ— éœ€ä¿®æ”¹ä»£ç å³å¯æ¥å…¥ï¼Œé™ä½æŠ€æœ¯é—¨æ§›ã€‚</li>
<li><strong>æ”¯æŒå¤šäº‘</strong>ï¼šå…¶è·¨äº‘èƒ½åŠ›å’Œé«˜æ€§èƒ½å…ƒæ•°æ®å¼•æ“ç¡®ä¿æ•°æ®æµè½¬é«˜æ•ˆï¼Œå®Œç¾å¥‘åˆäº†æˆ‘ä»¬â€œç®—åŠ›éšéœ€è€ŒåŠ¨â€çš„æˆ˜ç•¥ã€‚</li>
</ul>
<p>ä»æˆæœ¬ç»´åº¦æ¥çœ‹ï¼ŒJuiceFS åœ¨åˆæœŸå°è§„æ¨¡éƒ¨ç½²æ—¶æˆæœ¬ä¼˜åŠ¿ä¸çªå‡ºï¼Œä½†å½“æ•°æ®è§„æ¨¡çªç ´ PB çº§ï¼Œå°¤å…¶è¾¾åˆ° 10PBã€100PB çº§åˆ«å¹¶ä¸å…¨é—ªå­˜æ–¹æ¡ˆå¯¹æ¯”æ—¶ï¼Œå…¶ä¾æ‰˜å¯¹è±¡å­˜å‚¨çš„ä½æˆæœ¬æ¶æ„ä¼˜åŠ¿å°†å…¨é¢å‡¸æ˜¾ã€‚æ­¤å¤–ï¼ŒJuiceFS çš„è¿ç»´æˆæœ¬æä½ï¼Œåœ°ç“œæœºå™¨äººå½“å‰ä»…éœ€ä¸€åå·¥ç¨‹å¸ˆå³å¯è´Ÿè´£æ•´ä¸ªäº‘å¹³å°ä¸å­˜å‚¨ç³»ç»Ÿçš„è¿ç»´å·¥ä½œï¼Œè¿œä½äºä¼ ç»Ÿæ–¹æ¡ˆæ‰€éœ€çš„äººå‘˜æŠ•å…¥ã€‚</p>
<h2 data-id="heading-2">03 ä»ç¤¾åŒºç‰ˆåˆ°ä¼ä¸šç‰ˆï¼Œåº”å¯¹æ›´å¤§è§„æ¨¡åœºæ™¯éœ€æ±‚</h2>
<p>éšç€ä¸šåŠ¡çš„ä¸æ–­æ‰©å±•ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ Redis ä½œä¸ºå…ƒæ•°æ®å¼•æ“æ—¶ï¼Œå‘ç°ç‰©ç†å†…å­˜å®¹é‡é™åˆ¶äº†æ•°æ®çš„æ‰©å±•ã€‚å½“æ–‡ä»¶æ•°é‡æ¥è¿‘äº¿çº§æ—¶ï¼Œå…ƒæ•°æ®æŸ¥è¯¢çš„å»¶è¿Ÿæ˜¾è‘—å¢åŠ ï¼Œè¿›è€Œå½±å“äº†è®­ç»ƒä»»åŠ¡çš„å¹¶å‘æ•ˆç‡ã€‚åœ¨ä½¿ç”¨ clone åŠŸèƒ½åï¼Œå…ƒæ•°æ®çš„é‡å¤§å¹…å¢åŠ ï¼Œå¦å¤–æˆ‘ä»¬åœ¨è·¨äº‘åœºæ™¯ä¸­å¯¹å…ƒæ•°æ®åŒæ­¥å’Œé•œåƒæ–‡ä»¶ç³»ç»Ÿçš„èƒ½åŠ›æå‡ºäº†æ›´é«˜è¦æ±‚ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›åœ¨ç›®å½•çº§åˆ«è¿›è¡Œæ›´ç»†ç²’åº¦çš„å®¹é‡é™åˆ¶å’Œæƒé™ç®¡ç†ã€‚</p>
<p>è€ƒè™‘åˆ°è¿™äº›éœ€æ±‚ï¼Œä»¥åŠå¸Œæœ›åˆ©ç”¨ GPU æœºå™¨æœ¬åœ° SSD æ„å»ºåˆ†å¸ƒå¼ç¼“å­˜å±‚æ¥æå‡æ€§èƒ½ï¼Œæˆ‘ä»¬å†³å®šå¹¶è¡Œéƒ¨ç½² JuiceFS ä¼ä¸šç‰ˆï¼Œå°†è¶…å¤§è§„æ¨¡ç›®å½•ç®¡ç†ã€å¤šæœºååŒè®­ç»ƒç­‰æ ¸å¿ƒåœºæ™¯è¿ç§»è‡³è¯¥ç‰ˆæœ¬ã€‚é€šè¿‡è¿™ç§åœºæ™¯åŒ–æ‹†åˆ†ï¼Œæˆ‘ä»¬æœ‰æ•ˆæå‡äº†æ•´ä½“å­˜å‚¨ç³»ç»Ÿçš„é€‚é…æ€§ï¼Œå¹¶ä¸ºæœªæ¥çš„ä¸šåŠ¡å¢é•¿æä¾›åšå®çš„åŸºç¡€ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬åœ¨å®é™…åœºæ™¯ä¸­åº”ç”¨çš„ä¼ä¸šç‰ˆå…³é”®ç‰¹æ€§ã€‚</p>
<p><strong>ç‰¹æ€§ 1- é«˜æ€§èƒ½å…ƒæ•°æ®å¼•æ“ï¼šè§£å†³è¶…å¤§è§„æ¨¡ç›®å½•æ£€ç´¢ç“¶é¢ˆ</strong><br/>
é’ˆå¯¹äº¿çº§æ–‡ä»¶ç›®å½•ä¸‹çš„éå†ã€æ·±åˆ†é¡µæŸ¥è¯¢ç­‰é«˜é¢‘æ“ä½œï¼Œæˆ‘ä»¬æ›¾é‡åˆ°ä¼ ç»Ÿå­˜å‚¨æ–¹æ¡ˆ â€œè¶ŠæŸ¥è¶Šæ…¢â€ çš„é—®é¢˜ â€”â€” <strong>å•ç›®å½•æ–‡ä»¶é‡çªç ´åƒä¸‡åï¼Œåˆ†é¡µæŸ¥è¯¢åç§»é‡è¶…è¿‡ 10 ä¸‡æ¡æ—¶ï¼Œå“åº”å»¶è¿Ÿä¼šä»ç™¾æ¯«ç§’çº§é£™å‡è‡³ç§’çº§ï¼Œä¸¥é‡å½±å“æ•°æ®ç­›é€‰æ•ˆç‡</strong>ã€‚</p>
<p>åˆ‡æ¢è‡³ JuiceFS ä¼ä¸šç‰ˆåï¼Œå…¶å…ƒæ•°æ®çš„åŸç”Ÿç›®å½•æ ‘å½¢å­˜å‚¨æ¶æ„å‘æŒ¥äº†å…³é”®ä½œç”¨ï¼šä¸åŒäºæ‰å¹³åŒ– KV å¯¹æ–‡ä»¶å…ƒæ•°æ®çš„æ— åºå­˜å‚¨ï¼Œè¿™ç§æ ‘å½¢ç»“æ„å¯ç›´æ¥å®šä½ç›®å½•å±‚çº§ï¼Œå‡å°‘å…ƒæ•°æ®æ‰«æèŒƒå›´ã€‚æˆ‘ä»¬å®é™…æµ‹è¯•ä¸­ï¼Œå•ç›®å½• 1.2 äº¿æ–‡ä»¶çš„æ·±åˆ†é¡µæŸ¥è¯¢ï¼ˆåç§»é‡ 50 ä¸‡æ¡ï¼‰ï¼Œå»¶è¿Ÿä»åŸæ¥çš„ 3.8 ç§’é™è‡³ 210 æ¯«ç§’ï¼Œå®Œå…¨æ»¡è¶³å¤§è§„æ¨¡æ•°æ®é›†çš„æ£€ç´¢éœ€æ±‚ï¼›åŒæ—¶ï¼Œè¯¥å¼•æ“æ”¯æŒå•å·åƒäº¿çº§æ–‡ä»¶å­˜å‚¨ï¼Œç›®å‰æˆ‘ä»¬å·²åŸºäºæ­¤æ”¯æ’‘ 3 ä¸ª PB çº§è®­ç»ƒæ•°æ®é›†çš„ç¨³å®šç®¡ç†ï¼ŒåŒ¹é…ä¸šåŠ¡å¢é•¿é¢„æœŸã€‚</p>
<p><strong>ç‰¹æ€§ 2- ä¼ä¸šçº§åˆ†å¸ƒå¼ç¼“å­˜ï¼šæå‡å¤šæœºå¤šå¡è®­ç»ƒæ•°æ®å…±äº«æ•ˆç‡</strong><br/>
åœ¨å¤šæœºå¤šå¡è®­ç»ƒåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬æ›¾é¢ä¸´ â€œç¼“å­˜å‘½ä¸­ç‡ä½ã€è·¨èŠ‚ç‚¹å¸¦å®½æ‹¥å µâ€ çš„é—®é¢˜ â€”â€” å¼€æºç‰ˆä»…æ”¯æŒèŠ‚ç‚¹æœ¬åœ°ç¼“å­˜ï¼Œå½“å¤šèŠ‚ç‚¹åŒæ—¶æ‹‰å–åŒä¸€æ•°æ®é›†æ—¶ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦è®¿é—®å¯¹è±¡å­˜å‚¨ï¼Œå¯¼è‡´å•èŠ‚ç‚¹å¸¦å®½å ç”¨ç‡è¶…è¿‡ 90%ï¼Œè®­ç»ƒä»»åŠ¡å¯åŠ¨å»¶è¿Ÿå¹³å‡è¾¾ 20 åˆ†é’Ÿã€‚å€ŸåŠ© JuiceFS ä¼ä¸šç‰ˆçš„åˆ†å¸ƒå¼ç¼“å­˜åŠŸèƒ½ï¼Œæˆ‘ä»¬é€šè¿‡ 3 è¡Œå‘½ä»¤åœ¨ 12 å°è®­ç»ƒèŠ‚ç‚¹ç»„æˆçš„å±€åŸŸç½‘å†…æ­å»ºäº†åˆ†å¸ƒå¼ç¼“å­˜ï¼Œæ•°æ®é›†åªéœ€è¦ä»å¯¹è±¡å­˜å‚¨æ‹‰å–ä¸€æ¬¡ï¼Œå¹¶ç¼“å­˜åœ¨èŠ‚ç‚¹æœ¬åœ° SSD ç»„æˆçš„ç¼“å­˜æ± ä¸­ã€‚<strong>å¤šæœºååŒè®­ç»ƒçš„ç¼“å­˜å‘½ä¸­ç‡ä»åŸæ¥çš„ 45% æå‡è‡³ 92%ï¼Œè·¨èŠ‚ç‚¹å¸¦å®½å ç”¨ç‡é™è‡³ 15% ä»¥ä¸‹ï¼Œè®­ç»ƒä»»åŠ¡å¯åŠ¨æ—¶é—´ç¼©çŸ­è‡³ 3 åˆ†é’Ÿå†…ï¼Œå¤§å¹…æå‡äº†ç®—åŠ›åˆ©ç”¨ç‡</strong>ã€‚</p>
<p><strong>ç‰¹æ€§ 3- å¢å¼ºå‹è·¨äº‘ååŒï¼šæ„å»ºä½è¿ç»´æˆæœ¬çš„è·¨äº‘æ•°æ®åº•åº§</strong><br/>
ç”±äºæˆ‘ä»¬çš„ç ”å‘ç¯å¢ƒåˆ†å¸ƒåœ¨é˜¿é‡Œäº‘ã€ç™¾åº¦äº‘ä¸¤ä¸ªå¹³å°ï¼Œæ­¤å‰å­˜åœ¨ â€œè·¨äº‘æ•°æ®åŒæ­¥æ…¢ã€è¿ç»´æˆæœ¬é«˜â€ çš„ç—›ç‚¹ â€”â€” é€šè¿‡ä¼ ç»ŸåŒæ­¥å·¥å…·å®ç°ä¸¤åœ°æ•°æ®ä¸€è‡´ï¼Œéœ€é…ç½® 8 ä¸ªå®šæ—¶ä»»åŠ¡ï¼ŒåŒæ­¥å»¶è¿Ÿå¹³å‡è¾¾ 4 å°æ—¶ï¼Œä¸”éœ€ä¸“äººæ¯å‘¨æ’æŸ¥åŒæ­¥å¤±è´¥é—®é¢˜ã€‚åŸºäº JuiceFS sync å·¥å…·ï¼Œç»“åˆå†…éƒ¨ AI è¿ç»´å·¥å…·å®ç°äº†åŒæ­¥ç­–ç•¥è‡ªåŠ¨åŒ–é…ç½®ï¼šç³»ç»Ÿå¯æ ¹æ®æ•°æ®çƒ­åº¦è‡ªåŠ¨è°ƒæ•´åŒæ­¥ä¼˜å…ˆçº§ï¼Œè·¨äº‘æ•°æ®å»¶è¿Ÿæ§åˆ¶åœ¨ 10 åˆ†é’Ÿå†…ï¼›<strong>åŒæ—¶ï¼ŒåŒæ­¥ä»»åŠ¡çš„å¤±è´¥é‡è¯•ã€æ—¥å¿—å‘Šè­¦ç­‰å‡å®ç°è‡ªåŠ¨åŒ–ï¼Œæ— éœ€ä¸“äººå€¼å®ˆï¼Œè¿ç»´æŠ•å…¥å‡å°‘ 70%ï¼Œç›®å‰å·²ç¨³å®šæ”¯æ’‘ä¸¤ä¸ªäº‘å¹³å°å¤šä¸ªè®­ç»ƒé¡¹ç›®å…±äº«åŒä¸€å¥—æ•°æ®é›†ã€‚åç»­ï¼Œå°†ä½¿ç”¨ä¼ä¸šç‰ˆçš„é•œåƒæ–‡ä»¶ç³»ç»ŸåŠŸèƒ½æ¥åº”å¯¹è·¨äº‘æ•°æ®ååŒ</strong>ã€‚</p>
<h2 data-id="heading-3">04 JuiceFS è°ƒä¼˜æ”»ç•¥</h2>
<p><strong>å®¢æˆ·ç«¯ç¼“å­˜ä¸å†™å…¥æ€§èƒ½è°ƒä¼˜å®è·µ</strong><br/>
éœ€é‡ç‚¹å…³æ³¨ç¼“å­˜ç­–ç•¥ä¸ Kubernetes èµ„æºé™é¢ä¹‹é—´çš„å…¼å®¹æ€§é—®é¢˜ã€‚å¦‚ä½¿ç”¨å†…å­˜ä½œä¸ºæœ¬åœ°ç¼“å­˜è·¯å¾„ï¼Œé…ç½®ä¸åˆç†å¯èƒ½å¼•å‘ Mount Pod å†…å­˜å¼‚å¸¸å¢é•¿ï¼Œæˆ–å› èµ„æºé…é¢é¢„ç•™ä¸è¶³ï¼Œå¯¼è‡´é•¿å‘¨æœŸè®­ç»ƒä»»åŠ¡å‡ºç°æ£€æŸ¥ç‚¹ä¸¢å¤±ã€æ–‡ä»¶å¥æŸ„å†™å…¥å¼‚å¸¸ç­‰æƒ…å†µã€‚</p>
<p>åœ¨å†™å…¥æ€§èƒ½è°ƒä¼˜æ–¹é¢ï¼Œå¼€å¯ writeback æ¨¡å¼å¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šæå‡å°æ–‡ä»¶å†™å…¥ååï¼Œä½†ç»“åˆç”Ÿäº§ç¯å¢ƒå¯¹æ•°æ®ä¸€è‡´æ€§çš„è¦æ±‚ï¼Œæˆ‘ä»¬ä»é‡‡ç”¨ write-through åŒæ­¥å†™å…¥æ¨¡å¼ï¼Œä»¥é™ä½æç«¯å®•æœºåœºæ™¯ä¸‹çš„æ•°æ®é£é™©ã€‚å»ºè®®ä»…åœ¨å¯¹æ•°æ®å¯é æ€§è¦æ±‚è¾ƒä½çš„ä¸´æ—¶è®¡ç®—ã€ç¦»çº¿æ•°æ®æ¸…æ´—ç­‰åœºæ™¯ä¸­ï¼Œæ ¹æ®å®é™…éœ€æ±‚è°¨æ…å¯ç”¨ writeback æ¨¡å¼ä»¥æå‡å†™å…¥æ•ˆç‡ã€‚</p>
<p><strong>éƒ¨ç½²ä¸ç½‘ç»œæ‹“æ‰‘ä¼˜åŒ–</strong><br/>
ä¸ºè·å¾—æ›´ç¨³å®šçš„æ€§èƒ½è¡¨ç°ï¼Œåœ¨éƒ¨ç½²æ—¶å¼ºçƒˆå»ºè®®å°†å…ƒæ•°æ®å¼•æ“ä¸è®¡ç®—èŠ‚ç‚¹è§„åˆ’åœ¨åŒä¸€ region åŒºåŸŸå†…ã€‚å®é™…è¿è¡Œä¸­è§‚å¯Ÿåˆ°ï¼Œè·¨ region éƒ¨ç½²ä¼šä½¿å…ƒæ•°æ®æ“ä½œå»¶è¿Ÿå‡ºç°æ•°å€è‡³åå€çš„ä¸Šå‡ï¼Œå¯¹æ•°æ®è§£å‹ç­‰ I/O å¯†é›†å‹æ“ä½œçš„æ•ˆç‡å½±å“è¾ƒä¸ºæ˜æ˜¾ã€‚å°†å…ƒæ•°æ®æœåŠ¡ä¸ GPU è®¡ç®—èµ„æºéƒ¨ç½²åœ¨åŒä¸€ region å†…ï¼Œæœ‰åŠ©äºåœ¨ä¿éšœæ€§èƒ½çš„åŒæ—¶æ§åˆ¶ç½‘ç»œä¼ è¾“æˆæœ¬ï¼Œæå‡æ•´ä½“èµ„æºåˆ©ç”¨æ•ˆç‡ã€‚</p>
<p><strong>æ•°æ®é¢„çƒ­ä¸ç¼“å­˜ä¼˜åŒ–ç­–ç•¥</strong><br/>
åœ¨ä¸‡å…†ç½‘ç»œç¯å¢ƒä¸‹ï¼Œå¯å……åˆ†åˆ©ç”¨ JuiceFS çš„æ•°æ®é¢„çƒ­æœºåˆ¶ï¼Œç»“åˆä¸šåŠ¡åœºæ™¯åˆç†è°ƒæ•´æ•°æ®å—å¤§å°ï¼Œä»¥æ›´å¥½åœ°å‘æŒ¥ç½‘ç»œå¸¦å®½èƒ½åŠ›ï¼Œæå‡è¯»ååé‡ã€‚é…åˆåˆ†å¸ƒå¼ç¼“å­˜æ¶æ„ï¼Œå¯æœ‰æ•ˆæ”¹å–„å¤šæœºå¹¶å‘åœºæ™¯ä¸‹çš„æ•°æ®å…±äº«æ•ˆç‡ï¼Œæå‡é«˜å¹¶å‘è¯»å–æ—¶çš„ç¼“å­˜å‘½ä¸­ç‡ï¼Œä»è€Œä¼˜åŒ–å¤§è§„æ¨¡ AI è®­ç»ƒä»»åŠ¡çš„æ•´ä½“è¿è¡Œè¡¨ç°ã€‚</p>
<p><strong>èµ„æºé…é¢ä¸é«˜å¯ç”¨ä¿éšœç­–ç•¥</strong><br/>
ä¼ä¸šçº§å¤šè§’è‰²è¿ç»´ã€å­˜å‚¨èŒè´£åˆ†ç¦»åœºæ™¯ä¸‹ï¼Œä¸ºè§„é¿é…ç½®ä¸ä¸€è‡´çš„è¿è¡Œé£é™©ï¼Œå»ºè®®ç²¾ç»†åŒ–ç®¡æ§ K8s ç¯å¢ƒä¸­ JuiceFS CSI é©±åŠ¨çš„èµ„æºé…é¢ã€‚é€šè¿‡åˆç†è®¾ç½® Mount Pod çš„ CPU ä¸å†…å­˜ Request/Limitï¼Œå¯å‡å°‘å› èµ„æºæŠ¢å å¯¼è‡´çš„ Pod é‡å¯æˆ–èŠ‚ç‚¹å¼‚å¸¸ï¼Œå®é™…ä½¿ç”¨ä¸­å¯æ ¹æ®é›†ç¾¤è´Ÿè½½åŠ¨æ€è°ƒæ•´èµ„æºé¢„ç•™æ¯”ä¾‹ã€‚</p>
<p>åŒæ—¶ï¼Œå¯¹ä¸šåŠ¡è¿ç»­æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ï¼Œå¯å¼€å¯ Mount Pod çš„æŒ‚è½½ç‚¹è‡ªåŠ¨æ¢å¤åŠŸèƒ½ï¼Œå®ç°å­˜å‚¨æœåŠ¡çš„è‡ªåŠ¨åŒ–æ•…éšœæ¢å¤ï¼Œè¿›ä¸€æ­¥ä¿è¯åº•å±‚å­˜å‚¨çš„ç¨³å®šæ€§ã€‚</p>
<p><strong>å¤šç§Ÿæˆ·å®è·µ</strong><br/>
æˆ‘ä»¬ä¸ºå¤§å‹ä¼ä¸šå®¢æˆ·æä¾›ç‹¬ç«‹æ–‡ä»¶ç³»ç»Ÿå’Œå­˜å‚¨æ¡¶ï¼Œå¹¶é€šè¿‡å­ç›®å½•çº§åˆ«çš„ç›®å½•éš”ç¦»å’Œæƒé™ç®¡æ§å®ç°ä¸­å°å‹ä¼ä¸šå®¢æˆ·ä¸ç»ˆç«¯ç”¨æˆ·çš„éš”ç¦»ã€‚å¤§å‹ä¼ä¸šå®¢æˆ·å¯ä»¥çµæ´»æ‰©å±•ååé‡å’Œå®¹é‡ï¼Œé¿å…å…±äº«å­˜å‚¨æ¡¶å¸¦æ¥çš„æ€§èƒ½ç“¶é¢ˆã€‚å¯¹äºä¸­å°å‹ä¼ä¸šå’Œç»ˆç«¯ç”¨æˆ·ï¼Œæˆ‘ä»¬é€šè¿‡å­ç›®å½•éš”ç¦»å’Œæƒé™ç®¡æ§ç¡®ä¿æ•°æ®å®‰å…¨ä¸ç‹¬ç«‹æ€§ï¼ŒåŒæ—¶å®ç°ç²¾ç¡®è®¡é‡ä¸è®¡è´¹ã€‚è¿™ä¸€æ¶æ„åœ¨ä¿éšœç§Ÿæˆ·éš”ç¦»çš„åŒæ—¶ï¼Œä¹Ÿèƒ½çµæ´»è°ƒé…èµ„æºï¼Œæé«˜ç³»ç»Ÿç®¡ç†æ•ˆç‡ã€‚</p>
<p><strong>ç‰ˆæœ¬ç®¡ç†</strong><br/>
é€šè¿‡ <code>juicefs clone</code> å‘½ä»¤ï¼Œå¯ä»¥å¿«é€Ÿåˆ›å»ºåŸå§‹æ•°æ®é›†çš„å‰¯æœ¬ï¼Œå¹¶ç‹¬ç«‹ä¿®æ”¹ï¼Œè€Œä¸å½±å“åŸæ•°æ®ã€‚å…‹éš†æ“ä½œä»…å¤åˆ¶æ–‡ä»¶çš„å…ƒæ•°æ®ï¼Œæ•°æ®åˆ™åªé¢å¤–å­˜å‚¨å˜æ›´éƒ¨åˆ†ï¼ŒèŠ‚çœåº•å±‚å­˜å‚¨ç©ºé—´ã€‚æ­¤åŠŸèƒ½æ”¯æŒç®¡ç†å¤šä¸ªç‰ˆæœ¬ï¼Œä¾¿äºå›æ»šå’Œæ¢å¤ï¼Œç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§å’Œç‰ˆæœ¬æ§åˆ¶ã€‚</p>
<h2 data-id="heading-4">05 å°ç»“ä¸å±•æœ›</h2>
<p>JuiceFS åœ¨å…ƒæ•°æ®æ€§èƒ½ã€æ‰©å±•èƒ½åŠ›ã€è·¨äº‘é€‚é…æ€§ä¸ç»¼åˆæˆæœ¬æ•ˆç‡ç­‰æ–¹é¢çš„ç‰¹æ€§ï¼Œæ”¯æ’‘å…¶æˆä¸ºæˆ‘ä»¬æ„å»ºç»Ÿä¸€å­˜å‚¨å±‚çš„é€‰æ‹©ã€‚ç›®å‰åœ°ç“œç§‘æŠ€é‡‡ç”¨ JuiceFS ç¤¾åŒºç‰ˆä¸ä¼ä¸šç‰ˆå¹¶è¡Œéƒ¨ç½²çš„æ¨¡å¼ï¼Œé€‚é…ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹çš„å·®å¼‚åŒ–å­˜å‚¨è¯‰æ±‚ã€‚</p>
<p>æœªæ¥ï¼Œæˆ‘ä»¬è®¡åˆ’å°† JuiceFS è¿›ä¸€æ­¥è½åœ°è‡³å…·èº«æ™ºèƒ½é¢†åŸŸï¼Œé’ˆå¯¹æ€§è§£å†³è¯¥åœºæ™¯ä¸‹çš„ä¸“å±å­˜å‚¨éœ€æ±‚ï¼ŒåŒ…æ‹¬æ—¶åºæ•°æ®é«˜ååå¤„ç†ã€å¤šæ¨¡æ€æ•°æ®ç²¾å‡†å¯¹é½ã€è¾¹ç¼˜ä¸äº‘ç«¯ååŒå­˜å‚¨åŠä»¿çœŸä¸çœŸå®åœºæ™¯æ•°æ®çš„èåˆç®¡ç†ç­‰ã€‚åç»­ç§¯ç´¯æ›´å¤šå®è·µç»éªŒåï¼Œæˆ‘ä»¬å°†æŒç»­åˆ†äº«å…·èº«æœºå™¨äººåœºæ™¯ä¸‹çš„å­˜å‚¨å®è·µå¿ƒå¾—ã€‚å…³äº AI åœºæ™¯çš„å­˜å‚¨å®è·µä¸æŠ€æœ¯æ¢ç´¢ï¼Œæ¬¢è¿è¯„è®ºåŒºä¸€èµ·äº¤æµæ¢è®¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenClawå¯¹æ¥èŠå¤©APPåŠAIåŠ©æ‰‹å·¥å…·]]></title>    <link>https://juejin.cn/post/7603309951227084850</link>    <guid>https://juejin.cn/post/7603309951227084850</guid>    <pubDate>2026-02-06T07:53:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603309951227084850" data-draft-id="7603393977476890650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenClawå¯¹æ¥èŠå¤©APPåŠAIåŠ©æ‰‹å·¥å…·"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-02-06T07:53:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenClawå¯¹æ¥èŠå¤©APPåŠAIåŠ©æ‰‹å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:53:20.000Z" title="Fri Feb 06 2026 07:53:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>OpenClawå¯¹æ¥èŠå¤©APPåŠAIåŠ©æ‰‹å·¥å…·</p>
<h2 data-id="heading-0"><strong>1ã€å¯¹æ¥é£ä¹¦èŠå¤©APP</strong></h2>
<h3 data-id="heading-1">openclawé…ç½®</h3>
<p>æ­¤å¤„ä»¥é£ä¹¦ä¸ºä¾‹ï¼Œè¾“å…¥æ’ä»¶ä¸‹è½½å®‰è£…å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclawÂ pluginsÂ installÂ @m1heng-clawd/feishuÂ Â 
<span class="hljs-built_in">cd</span>Â /root/.openclaw/extensions/feishu/Â 
npmÂ installÂ --verboseÂ Â <span class="hljs-comment">#æ­¤æ­¥éª¤å®‰è£…æ—¶é—´è¾ƒå¼ºé•¿ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4514ce834424f8e8d1261763a68010f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=tim0A43wIW8etJ3OUbeobTvJPIM%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/747da7234bc54720888528bf2091cb83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=MNnU4T6x6rispqa%2FBOo6I8v91IA%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>ç­‰ä¸‹è½½å®‰è£…å®Œæˆåã€‚åœ¨å‘½ä»¤è¡Œä¸‹è¿è¡Œopenclawå›¾å½¢é…ç½®ç•Œé¢ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">open</span>Â channelsÂ <span class="hljs-keyword">add</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3c11c79c7754fb1a00f79e40aa06f8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=4oyiQOd17mZFH1F%2BYUroTUtuO8s%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>å›è½¦</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1e3044a666844848b496d5b1c6effd2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=hs2bio0WUw4HuH0b%2BHikGtNMi%2FY%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>å›è½¦åï¼Œæ ¹æ®æç¤ºè¾“å…¥é£ä¹¦App IDå’ŒApp Secretã€‚</p>
<p>åœ¨é£ä¹¦å¼€æ”¾å¹³å°åº”ç”¨å‡­è¯è·å–ï¼Œæ‰“å¼€é£ä¹¦ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.feishu.cn%2Fapp%2F" target="_blank" title="https://open.feishu.cn/app/" ref="nofollow noopener noreferrer">open.feishu.cn/app/</a>ï¼‰ï¼Œç‚¹å‡»å·¦è¾¹å‡­è¯åŸºç¡€ä¿¡æ¯ï¼Œåœ¨é¡µé¢ä¸­æ‰¾åˆ° â€œApp IDâ€ å’Œ â€œApp Secretâ€ ä¸¤ä¸ªæ•°æ®ï¼Œåˆ†åˆ«ç‚¹å‡»å³ä¾§ â€œå¤åˆ¶â€ æŒ‰é’®ï¼Œå°†å…¶å¤åˆ¶åˆ°openclawé…ç½®ç•Œé¢ã€‚é£ä¹¦é…ç½®å‚è€ƒä¸‹ä¸€ç« èŠ‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62d44babed384246ac0b55b478c926cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=hHPBKt8DuZs3HcsYGJEVfl9JK2s%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>è¾“å…¥åº”ç”¨å‡­è¯åï¼Œå›è½¦å®Œæˆé…ç½®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a27a0f7cc64748b388a4d091fcef6f70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=KOemJopiS%2Bl%2F21ec05R1TVNd4Oo%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>openclaw gateway restart ï¼Œé‡å¯ç½‘å…³æœåŠ¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f574ab973086452fb93b0d089936ae84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=1B1vejYY3HkoDKE%2FtqwK4iMqx%2BM%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>è¿è¡Œopenclaw statusï¼ŒæŸ¥çœ‹çŠ¶æ€æ˜¯å¦æ­£å¸¸ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75a9ffdda41d46d2b4b39491d46c549f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=vhvT1dqzfRvy86KdmAo0P9do8Pg%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60ba2cb3573746d697a903ba0142b3fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=vPib4UqRE5aX%2FG0GwOtg%2FsylBjI%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<h3 data-id="heading-2"><strong>éªŒè¯é£ä¹¦æ¥å…¥</strong></h3>
<ol>
<li>æ‰“å¼€æ‰‹æœºæˆ–ç”µè„‘ç«¯é£ä¹¦ APPï¼Œç™»å½•ä¸é£ä¹¦å¼€å‘è€…å¹³å°ç›¸åŒçš„è´¦å·ï¼›</li>
<li>åœ¨é£ä¹¦é¦–é¡µï¼Œæ‰¾åˆ° â€œå·¥ä½œå°â€ å…¥å£ï¼Œç‚¹å‡»è¿›å…¥ï¼Œåœ¨å·¥ä½œå°åˆ—è¡¨ä¸­æ‰¾åˆ°å·²å‘å¸ƒçš„ openclaw åº”ç”¨ï¼ˆå¦‚ â€œopenclaw åŠ©æ‰‹â€ï¼‰ï¼Œç‚¹å‡»è¿›å…¥ï¼›</li>
<li>ç³»ç»Ÿå°†è‡ªåŠ¨å¯åŠ¨ç§èŠçª—å£ï¼Œå‘é€ä»»æ„æ¶ˆæ¯ï¼ˆå¦‚ â€œä½ å¥½â€â€œæŸ¥è¯¢ä»Šæ—¥æ—¥ç¨‹â€ï¼‰ï¼›</li>
<li>éªŒè¯ç»“æœï¼šå¦‚æœæ”¶åˆ° openclaw çš„å›å¤ï¼Œå³ä¸ºé£ä¹¦æ¥å…¥æˆåŠŸ</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c84335223aa546cf89242b582223d1d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=6VLMJECO2Icr%2B8um5jZU2bpGvZo%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>ä»¥ä¸Šé…ç½®å®Œæˆåï¼Œå³å¯ä¸Šæ‰‹ä½¿ç”¨ã€‚å¿«ä¸Šäº¬ä¸œäº‘å¼€å¯ä¸€é”®éƒ¨ç½²ï¼Œè®© openclaw æˆä¸ºä½ ä¸“å±çš„ 24 å°æ—¶æ•°å­—å‘˜å·¥ï¼</p>
<h3 data-id="heading-3"><strong>é£ä¹¦æœºå™¨äººé…ç½®</strong></h3>
<p><strong>åˆ›å»ºé£ä¹¦ä¼ä¸šè‡ªå»ºåº”ç”¨</strong></p>
<ol>
<li>è®¿é—®é£ä¹¦å¼€å‘è€…å¹³å°ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.feishu.cn%2Fapp%3Flang%3Dzh-CN%25EF%25BC%2589%25EF%25BC%259B" target="_blank" title="https://open.feishu.cn/app?lang=zh-CN%EF%BC%89%EF%BC%9B" ref="nofollow noopener noreferrer">open.feishu.cn/app?lang=zhâ€¦</a></li>
<li>ç™»å½•åï¼Œç‚¹å‡» â€œåˆ›å»ºä¼ä¸šè‡ªå»ºåº”ç”¨â€ï¼›</li>
<li>å¡«å†™åº”ç”¨åŸºç¡€ä¿¡æ¯ï¼šåº”ç”¨åç§°ï¼ˆå¦‚ â€œopenclaw åŠ©æ‰‹â€ï¼‰ï¼Œé€‰æ‹©åº”ç”¨å›¾æ ‡ï¼Œç‚¹å‡» â€œåˆ›å»ºâ€ æŒ‰é’®ï¼Œè¿›å…¥åº”ç”¨ç®¡ç†é¡µé¢ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/070c99d6ea104352a7028380962cc58f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=foNq%2Fa0%2BOuA2iZMAOiEH%2Bt4wzaE%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<ol>
<li>æ·»åŠ æœºå™¨äººèƒ½åŠ›ï¼šåœ¨åº”ç”¨ç®¡ç†é¡µå·¦ä¾§å¯¼èˆªæ ï¼Œæ‰¾åˆ°å¹¶ç‚¹å‡» â€œæ·»åŠ åº”ç”¨èƒ½åŠ›â€ï¼Œåœ¨å¼¹å‡ºçš„åˆ—è¡¨ä¸­é€‰æ‹© â€œæœºå™¨äººâ€ï¼Œç‚¹å‡» â€œæ·»åŠ â€ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b36f728ee9664f90aa8c1c90595b20b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=k8LIYe3TPtuTlU9ocCytbbn5sW4%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<ol>
<li>ç‚¹å‡»ä¸Šæ–¹çš„åˆ›å»ºç‰ˆæœ¬å¹¶å‘å¸ƒã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91e42d5d1948451a84b440caf17ac169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=6nSYJhVU4LyTVKCbKbBfyXXaV1I%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>é£ä¹¦åº”ç”¨æƒé™ä¸äº‹ä»¶é…ç½®</p>
<p>æ­¤æ­¥éª¤åˆ†ä¸ºã€Œäº‹ä»¶é…ç½®ã€ã€Œæƒé™é…ç½®ã€ã€Œåº”ç”¨å‘å¸ƒã€ä¸‰éƒ¨åˆ†ï¼Œå…¨ç¨‹åœ¨é£ä¹¦å¼€å‘è€…å¹³å°æ“ä½œï¼ŒæŒ‰é¡ºåºæ‰§è¡Œï¼š</p>
<h3 data-id="heading-4">ï¼ˆ1ï¼‰äº‹ä»¶é…ç½®</h3>
<ol>
<li>åœ¨é£ä¹¦åº”ç”¨ç®¡ç†é¡µï¼Œå·¦ä¾§å¯¼èˆªæ æ‰¾åˆ° â€œäº‹ä»¶ä¸å›è°ƒâ€ æ ç›®ï¼Œç‚¹å‡»è¿›å…¥ï¼›</li>
<li>äº‹ä»¶é…ç½®ï¼šåœ¨é¡µé¢ä¸­é€‰æ‹© â€œé•¿è¿æ¥â€ï¼Œç‚¹å‡» â€œä¿å­˜â€ï¼›</li>
</ol>
<p>âš ï¸å¦‚æœè¿™ä¸€æ­¥æç¤º <strong>â€œæœªå»ºç«‹é•¿è¿æ¥â€ï¼Œ</strong> è¯·æ£€æŸ¥è‡ªå·±çš„APP IDå’ŒAPP Secretæ˜¯å¦å·²æ­£ç¡®é…ç½®ã€‚</p>
<p>ï¼ˆæ“ä½œè§ä¸Šä¸€æ­¥ï¼šæ·»åŠ é£ä¹¦channelé…ç½®-é…ç½®APP IDä¸APP Secretï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67eef6305499496a9799fa949d8d755c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=BT9x4K7evtFWcw4%2BAnt5J2FPEGs%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<ol>
<li>æ·»åŠ äº‹ä»¶ï¼šç‚¹å‡»é¡µé¢ä¸­çš„ â€œæ·»åŠ äº‹ä»¶â€ï¼Œåœ¨å¼¹å‡ºçš„äº‹ä»¶åˆ—è¡¨ä¸­ï¼Œé€‰æ‹© â€œæ¶ˆæ¯ä¸ç¾¤ç»„â€ åˆ†ç±»ï¼Œå‹¾é€‰ â€œæ¥æ”¶æ¶ˆæ¯â€ï¼Œç‚¹å‡» â€œç¡®å®šâ€ï¼Œå®Œæˆäº‹ä»¶è®¢é˜…ã€‚</li>
</ol>
<p><img src="" alt="" loading="lazy"/></p>
<ol>
<li>å›è°ƒé…ç½®ï¼šè®¢é˜…æ–¹å¼é€‰æ‹© â€œä½¿ç”¨é•¿è¿æ¥â€ï¼Œæ— éœ€å¡«å†™å…¶ä»–åœ°å€ï¼Œé…ç½®è‡ªåŠ¨ç”Ÿæ•ˆã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fe5ac63bfcd4d18a9c70a7aa87736b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=RqgvrOvYZIMXxteaQWPqSGembaI%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<h3 data-id="heading-5">ï¼ˆ2ï¼‰æƒé™é…ç½®</h3>
<ol>
<li>åœ¨é£ä¹¦åº”ç”¨ç®¡ç†é¡µï¼Œå·¦ä¾§å¯¼èˆªæ æ‰¾åˆ° â€œæƒé™ç®¡ç†â€ æ ç›®ï¼Œç‚¹å‡»è¿›å…¥ï¼›</li>
<li>ç‚¹å‡»é¡µé¢ä¸­çš„ â€œæ‰¹é‡å¯¼å…¥æƒé™â€ æŒ‰é’®ï¼Œå¼¹å‡ºæƒé™å¯¼å…¥çª—å£ï¼›</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69ae719e876b4da1a4547e504a25568d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=Wsb7VJyp9sEa8O3rm6UEj46g0YM%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fd5fbc2def840f3930c6188c4827fcc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=y7u%2Fe6n1nufGhXykpIo4zqWtwUY%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>3.å¤åˆ¶ä»¥ä¸‹ JSON ä»£ç ï¼Œç²˜è´´åˆ°å¯¼å…¥çª—å£çš„è¾“å…¥æ¡†ä¸­ï¼Œç‚¹å‡» â€œå¯¼å…¥â€ æŒ‰é’®ï¼Œç­‰å¾…æƒé™å¯¼å…¥å®Œæˆï¼š</p>
<p>ä»£ç è¯­è¨€ï¼štxt</p>
<p>AIä»£ç è§£é‡Š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>Â Â 
Â <span class="hljs-attr">"scopes"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>Â Â Â Â Â <span class="hljs-attr">"tenant"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">[</span>Â Â Â Â Â Â Â 
Â <span class="hljs-string">"contact:user.base:readonly"</span><span class="hljs-punctuation">,</span>Â Â Â Â 
Â Â Â Â <span class="hljs-string">"im:chat"</span><span class="hljs-punctuation">,</span>Â Â Â Â Â Â Â 
Â Â Â Â <span class="hljs-string">"im:chat:read"</span><span class="hljs-punctuation">,</span>Â Â Â Â Â 
Â Â Â Â <span class="hljs-string">"im:chat:update"</span><span class="hljs-punctuation">,</span>Â Â Â Â Â Â 
Â Â Â Â <span class="hljs-string">"im:message"</span><span class="hljs-punctuation">,</span>Â Â Â Â Â Â Â 
Â Â Â Â <span class="hljs-string">"im:message.group_at_msg:readonly"</span><span class="hljs-punctuation">,</span>Â Â Â Â Â Â Â 
Â Â Â Â <span class="hljs-string">"im:message.p2p_msg:readonly"</span><span class="hljs-punctuation">,</span>Â Â Â Â Â Â Â 
Â Â Â Â <span class="hljs-string">"im:message:send_as_bot"</span><span class="hljs-punctuation">,</span>Â Â Â Â Â Â Â 
Â Â Â Â <span class="hljs-string">"im:resource"</span>Â Â Â Â Â <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>Â Â Â Â Â 
Â Â Â Â <span class="hljs-attr">"user"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>Â Â Â <span class="hljs-punctuation">}</span>Â <span class="hljs-punctuation">}</span>
</code></pre>
<p>4.å¯¼å…¥éªŒè¯ï¼šé¡µé¢æ˜¾ç¤º â€œå¯¼å…¥æˆåŠŸâ€ï¼Œä¸”æƒé™åˆ—è¡¨ä¸­å‡ºç°ä¸Šè¿°å¯¼å…¥çš„æƒé™ï¼Œå³ä¸ºé…ç½®å®Œæˆã€‚</p>
<h3 data-id="heading-6">ï¼ˆ3ï¼‰å‘å¸ƒåº”ç”¨</h3>
<ol>
<li>åœ¨é£ä¹¦åº”ç”¨ç®¡ç†é¡µï¼Œå·¦ä¾§å¯¼èˆªæ æ‰¾åˆ° â€œç‰ˆæœ¬ç®¡ç†ä¸å‘å¸ƒâ€ æ ç›®ï¼Œç‚¹å‡»è¿›å…¥ï¼›</li>
<li>ç‚¹å‡»å³ä¸Šè§’çš„æ–°å»ºç‰ˆæœ¬ï¼›</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6388d20db1a94e08ab81c921542873da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=svGMizJKfzpOaoNuP9Pbtm4k3%2BU%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>å¡«å†™ç‰ˆæœ¬å·ä¸æè¿°åï¼Œä¿å­˜å¹¶å‘å¸ƒï¼›</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c692fc723b847debe350c84487e4a88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=O2ijQ656quJDuK5vmKBDhcPZQss%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<h2 data-id="heading-7"><strong>2ã€æ›´æ¢æ¨¡å‹</strong></h2>
<p>openclaw onboard</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0127aa7b4a534e479c4b9af5af2048a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=zu2HrDMfEDcrud3n3Dyt80kteR8%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>æŒ‰é”®ç›˜ä¸Šå·¦å³æ–¹å‘é”®ï¼Œé€‰æ‹©åˆ°â€œYesâ€åï¼ŒæŒ‰å›è½¦é”®å¼€å§‹é…ç½®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfef0a0591224877bb7bcb41f81bd10d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=O9kGV6w0LmGrkSNrtpivx4ZrIgg%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>Onboarding mode é€‰ QuickStartã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57c79076090541f2be845832ee53fd30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=UvQjVbb3bNsS3Pv4lkYARuO1Abw%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>é€‰æ‹©Qwenç­‰æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/657e79f4854d4c3d83b61c19747e41eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=4620lqgdmpx%2FbOpfR52qzQWXrrY%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>å›è½¦ç¡®è®¤ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81016332a40a4c22aabe6793cd776e3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=VPaRUvpZlHi%2BmASAj4E7Agu9v8Q%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>å¤åˆ¶åœ°å€åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œåç™»å½•è´¦å·ç¡®è®¤é€šè¿‡ã€‚ï¼ˆéœ€è¦å…ˆæ³¨å†Œè´¦å·<a href="https://link.juejin.cn?target=https%3A%2F%2Fchat.qwen.ai%2F" target="_blank" title="https://chat.qwen.ai/" ref="nofollow noopener noreferrer">chat.qwen.ai/</a>ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c9243ef4d744f76b7c0aa87535226a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=MgMB8nofYS0L8gU07R9gFyZlrfQ%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61543afed7b04724805708489dd13b47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=JYQJ7BNN8Sr1jviwaIYXMo%2Fksts%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ce5ec2b96f24245b5250b52f1bf5c0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=ys8q3cgIvo8sfX6TPk4O%2FV%2Fj8uo%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>é€‰æ‹©é»˜è®¤æ¨¡å‹åï¼Œå›è½¦ç¡®è®¤ã€‚é€‰æ‹©é€‰æ‹©é‡å¯ç½‘å…³æœåŠ¡åå³ç”Ÿæ•ˆã€‚</p>
<p>æŠ€èƒ½åŒ…ï¼ˆSkillï¼‰é…ç½®</p>
<p>æ–°æ‰‹æš‚æ—¶æ— éœ€æ·»åŠ é¢å¤–æŠ€èƒ½åŒ…ï¼Œé€‰ä¸­ â€œNoâ€ è·³è¿‡ï¼ŒæŒ‰å›è½¦é”®ç¡®è®¤ï¼›</p>
<p>Hooks é…ç½®</p>
<p>é€‰ä¸­ â€œsession-memoryâ€ï¼ˆå¯ç”¨è®°å¿†åŠŸèƒ½ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡å…³è”ï¼Œé¿å…æ¯æ¬¡èŠå¤©éƒ½éœ€è¦é‡å¤è¯´æ˜éœ€æ±‚ï¼‰ï¼Œå…¶ä»–ä¸¤é¡¹å¯æ ¹æ®éœ€æ±‚é€‰æ‹©ã€‚æŒ‰å›è½¦é”®ç¡®è®¤ï¼›</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd10fb1420664b75862d28a0ba7e67ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969200&amp;x-signature=QrE4pg%2BpYhB%2F5N0MSsk6dOBAy7I%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<h2 data-id="heading-8">3ã€å¸¸ç”¨å‘½ä»¤æ±‡æ€»</h2>





















































<table><thead><tr><th>æŸ¥çœ‹ç‰ˆæœ¬</th><th>openclaw --version</th></tr></thead><tbody><tr><td>æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</td><td>openclaw status</td></tr><tr><td>å¯åœBot</td><td>openclaw start/stop/restart</td></tr><tr><td>å¯åŠ¨openclawé…ç½®</td><td>openclaw onboard</td></tr><tr><td>å¯åŠ¨Openclawçš„TUI</td><td>openclaw tui</td></tr><tr><td>é€šè¿‡SSHè¿æ¥TUI</td><td>ssh root@å…¬ç½‘IP</td></tr><tr><td>é‡å¯ç½‘å…³</td><td>openclaw gateway restart</td></tr><tr><td>æŸ¥çœ‹å·²å®‰è£…æ’ä»¶</td><td>openclaw plugins list</td></tr><tr><td>å®‰è£…æ’ä»¶</td><td>openclaw plugins install æ’ä»¶å</td></tr><tr><td>æ›´æ–°æ’ä»¶</td><td>openclaw plugins update æ’ä»¶å</td></tr><tr><td>å¸è½½æ’ä»¶</td><td>openclaw plugins uninstall æ’ä»¶å</td></tr><tr><td>æŸ¥çœ‹å¸®åŠ©</td><td>openclaw --help</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenClawé—ªç”µéƒ¨ç½²ï¼Œç«‹å³ä½“éªŒAIåŠ©æ‰‹]]></title>    <link>https://juejin.cn/post/7603352117638938633</link>    <guid>https://juejin.cn/post/7603352117638938633</guid>    <pubDate>2026-02-06T07:52:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603352117638938633" data-draft-id="7603376587651694642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenClawé—ªç”µéƒ¨ç½²ï¼Œç«‹å³ä½“éªŒAIåŠ©æ‰‹"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-02-06T07:52:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenClawé—ªç”µéƒ¨ç½²ï¼Œç«‹å³ä½“éªŒAIåŠ©æ‰‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T07:52:27.000Z" title="Fri Feb 06 2026 07:52:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>OpenClawæ˜¯å°‘æ•°çœŸæ­£å…·å¤‡ç³»ç»Ÿçº§æ“ä½œèƒ½åŠ›çš„ä¸ªäººæ™ºèƒ½åŠ©ç†ï¼š</p>
<ul>
<li>æœ¬åœ°é•¿æœŸè®°å¿†ï¼ˆå¯¹è¯æ•°æ®è‡ªä¸»å¯æ§ï¼‰</li>
<li>è·¨å¹³å°æ¨é€ï¼ˆæ”¯æŒå¯¹æ¥é€šè®¯ç±»è½¯ä»¶ï¼‰</li>
<li>çœŸå®ä»»åŠ¡æ‰§è¡Œï¼ˆæ–‡ä»¶æ•´ç†ã€è¡¨å•æäº¤ã€ä»£ç ç”Ÿæˆï¼‰</li>
</ul>
<p>è¿™æ ·ä¸€ä¸ªå¼ºå¤§åˆæ•æ„Ÿçš„ AI åŠ©æ‰‹ï¼Œè¯¥è¿è¡Œåœ¨å“ªé‡Œï¼Ÿæ›´å®‰å…¨ã€æ›´ç¨³å®šçš„æ–¹å¼ï¼Œæ˜¯å°†å…¶éƒ¨ç½²åœ¨ç‹¬ç«‹ã€éš”ç¦»çš„äº‘ç«¯ç¯å¢ƒä¸­ã€‚</p>
<p>äº¬ä¸œäº‘å…¨é¢ä¸Šçº¿ openclaw(Clawbot)ï¼äº¬ä¸œäº‘è½»é‡äº‘ä¸»æœºç°å·²é¢„ç½® openclaw åº”ç”¨é•œåƒï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ç¯å¢ƒï¼Œ2æ­¥å³å¯å®Œæˆéƒ¨ç½²ï¼Œè®©ä½ çš„ AI åŠ©æ‰‹ç§’çº§ä¸Šçº¿ã€å…¨å¤©å€™å¾…å‘½ã€‚</p>
<h2 data-id="heading-0"><strong>ç¬¬ä¸€æ­¥ï¼šä¸€é”®åˆ›å»ºå®ä¾‹</strong></h2>
<p>åœ¨äº¬ä¸œäº‘æ§åˆ¶å°åˆ›å»ºè½»é‡äº‘ä¸»æœºï¼Œé€‰æ‹©ï¼š</p>
<p>é•œåƒåç§°ï¼šopenclawï¼ˆClawdbotï¼‰</p>
<p>è§„æ ¼å»ºè®®ï¼š2 æ ¸ 2G èµ· <strong>ï¼ˆæ¨è 2 æ ¸ 4G ä»¥è·å¾—æ›´ä½³ä½“éªŒï¼‰</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/785bfc8a05fc4c4683adef1e67cda3bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=5LspjJ51r2oMhbL4QvXi%2B1zLVKI%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>åˆ›å»ºæˆåŠŸåï¼Œè¿›å…¥äº‘ä¸»æœºåˆ—è¡¨é¡µï¼Œç‚¹å‡»å³è¾¹<strong>æ“ä½œåˆ—</strong>çš„ã€æŸ¥çœ‹ã€‘ï¼Œæ‰“å¼€18789ç«¯å£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/293eb1ebc38244fdb04ba575318b15e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=j7HLMkpxkG5XhxCGMabFIiM7rds%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>ç‚¹å‡»ã€é˜²ç«å¢™ã€‘ï¼Œæ‰“å¼€åç‚¹å‡»ã€æ·»åŠ è§„åˆ™ã€‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ef05a967fa54c0c8ab21d553e65aba3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=3gahUPR6iXbRlz0lvNokO3QbdqE%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>åœ¨ç›®æ ‡ç«¯å£ä¸­è¾“å…¥18789ï¼ŒæºIPè¾“å…¥0.0.0.0/0ï¼Œç‚¹å‡»ã€ä¿å­˜ã€‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95c8d49e883b4d7f866c2ceb8a9a1ed7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=FGizS7FSLaJPiqLBQ8xlBhrrjO8%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>å†æ¬¡è½¬åˆ°è½»é‡äº‘ä¸»æœºåˆ—è¡¨ï¼Œ<strong>è®°å½•ä¸‹å…¬ç½‘IPåœ°å€</strong>ï¼Œç‚¹å‡»ã€ç™»å½•ã€‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adc01369550e4cc3963abfb7c2c86858~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=0Vum3Lip4ehNjgkB5URhvSYesb4%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>é€šè¿‡WebTerminalç™»å½•äº‘ä¸»æœºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b660d88dd957415aa78b8bccab34d878~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=2RTK%2FBVLi7jFiz9zp3HVMb5h4EQ%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>è¿›å…¥é…ç½®ç•Œé¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce77cb7950c74565ab329f05adce6b65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=1HUrJcNrouc8851RuLlzt1FEWlU%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>ç¬¬äºŒæ­¥ï¼šé…ç½®openclaw</strong></h2>
<p>é€šè¿‡webTerminalç™»å½•ç³»ç»Ÿåï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚</p>
<p>bash init-openclaw.sh 18789 pk-03bf0b76-8326-4ad7-91bf-293c5dd35c8d å…¬ç½‘IP Â  Â </p>
<p>#çº¢è‰²éƒ¨åˆ†æ›¿æ¢æˆä½ çš„API-KEYï¼ŒAPI-KEYè·å–æ­¥éª¤å‚è€ƒä¸‹æ–¹ã€<strong>è·å–API-KEY</strong>ã€‘ç« èŠ‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/683a7bb4d99c498fbbf386ea48ec5810~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=BrTl8NexCHWTmV2gDi5lCehHu7c%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>å›è½¦åï¼Œç”Ÿæˆå¯ä»¥ç›´æ¥è®¿é—®çš„åœ°å€ã€<a href="https://link.juejin.cn?target=http%3A%2F%2F%25E5%2585%25AC%25E7%25BD%2591IP%3A18789%3Ftokan%3D%25E5%25AD%2597%25E7%25AC%25A6%25E4%25B8%25B2" target="_blank" title="http://%E5%85%AC%E7%BD%91IP:18789?tokan=%E5%AD%97%E7%AC%A6%E4%B8%B2" ref="nofollow noopener noreferrer">http://å…¬ç½‘IP:18789?tokan=å­—ç¬¦ä¸²</a>ã€‘ã€‚å¤åˆ¶åœ¨Webæµè§ˆå™¨ä¸­å›è½¦æ‰“å¼€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e24008346cb4ecfaf87850f77824392~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=%2FxWyewLqq%2BCbpuVbOXr43BmwQIE%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>å‡ºç°openclawçš„webäº¤äº’ç½‘ç«™ï¼Œå¯ä»¥ç›´æ¥å’ŒAIåŠ©æ‰‹å¯¹è¯äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44c84f82463748d0b523b7a56d91b6bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=%2FS0ud5dRtVbcZPqU1gJHVP92frk%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<h3 data-id="heading-2"><strong>è·å–API-KEY</strong></h3>
<p>ç™»å½•äº¬ä¸œäº‘JoyBuilder æ¨¡å‹å¼€å‘å¹³å° 2.0ï¼Œè¿›å…¥API-KEY ç®¡ç†é¡µé¢ï¼š</p>
<p>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fjoybuilder-console.jdcloud.com%2Fsystem%2Fapi-key%2Flist" target="_blank" title="https://joybuilder-console.jdcloud.com/system/api-key/list" ref="nofollow noopener noreferrer">joybuilder-console.jdcloud.com/system/api-â€¦</a>ï¼‰</p>
<p>1ã€ç‚¹å‡»ã€åˆ›å»ºã€‘æŒ‰é’®ï¼Œç”Ÿæˆæ–°çš„ API-Keyï¼›</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22fe26bc30d34983ba4ca2f443597820~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=9pK6F7eU5vcxdpMoA%2BS0WgWEZzk%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>2ã€é€‰æ‹©é•¿æœŸæœ‰æ•ˆï¼Œç‚¹å‡»ã€ç¡®å®šã€‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3f9e9cc67ce4efa9a6c720eaa3ea3a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=YEcTdpabR8RW4pR3RYabEJZLrV4%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>3ã€ç”Ÿæˆé•¿æœŸçš„API-KEYï¼Œç‚¹å‡»å³è¾¹å¤åˆ¶å›¾æ ‡å¤åˆ¶API-KEYã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91360bace9de45faa351b125c9c38444~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=Pb8fZQc5huqoVCMye3jGmVmCx3o%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>4ã€åœ¨â€œä¿®æ”¹ API-KEYâ€é¡µé¢ä¸­ï¼Œä¸ºè¯¥ Key é…ç½®å¯è®¿é—®çš„æ¨¡å‹æœåŠ¡ï¼Œå¿…é¡»åŒ…å«ä»¥ä¸‹æ¨¡å‹ï¼šDeepSeek-V3-0324ã€DeepSeek-V3.2ã€DeepSeek-v3ã€Qwen3-235B-A22Bã€Kimi-K2-0905-jcloud</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1a30aa141a1417a95f88105d09bd79e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=HALFeJyHRPLsSKY9IGlnlHTQvXU%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>5ã€é€‰æ‹©éœ€è¦çš„æ¨¡å‹ï¼Œæˆ–è€…å…¨éƒ¨é€‰ä¸Šã€‚ç‚¹å‡»ã€ç¡®å®šã€‘å®Œæˆæ¨¡å‹ç»‘å®šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51090a363363461a9d98b01f20e7330d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=OyAyVET%2FQTA%2FQTM97kGzmfWwATY%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>6ã€ä¸ºäº†ä¿è¯æ¨¡å‹æ­£å¸¸å·¥ä½œï¼Œéœ€è¦è‡³å°‘ä¿è¯è´¦æˆ·ä¸­æœ‰é‡‘é¢ã€‚ç‚¹å‡»å……å€¼å®Œæˆäº¬ä¸œäº‘è´¦å·å……å€¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47bd494403a74bd7b606087b69c94341~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969150&amp;x-signature=yeugBviN%2FfEIDCePpkxIW6vHKjc%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ˜¥èŠ‚æµé‡æ´ªå³°å°†è‡³ï¼Œä½ çš„AIåº”ç”¨â€œæ‰›å¾—ä½â€å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7603389033041952822</link>    <guid>https://juejin.cn/post/7603389033041952822</guid>    <pubDate>2026-02-06T08:00:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603389033041952822" data-draft-id="7603352061506633734" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ˜¥èŠ‚æµé‡æ´ªå³°å°†è‡³ï¼Œä½ çš„AIåº”ç”¨â€œæ‰›å¾—ä½â€å—ï¼Ÿ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-02-06T08:00:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ˜¥èŠ‚æµé‡æ´ªå³°å°†è‡³ï¼Œä½ çš„AIåº”ç”¨â€œæ‰›å¾—ä½â€å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T08:00:46.000Z" title="Fri Feb 06 2026 08:00:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç”¨æˆ·æŒ‡å°–è½»ç‚¹ï¼ŒAIç”Ÿæˆä¸“å±ç¥ç¦è§†é¢‘ï¼›</p>
<p>è¯­éŸ³å”¤é†’ï¼Œæ™ºèƒ½åŠ©æ‰‹å®æ—¶è§£è¯»æ˜¥æ™šæ¢—ï¼›</p>
<p>é¡ºæ‰‹ä¸€æ‹ï¼Œç”ŸæˆæƒŠè‰³çš„ 3D ç©ºé—´è§†é¢‘ã€‚</p>
<p>â€”â€”å½“åƒä¸‡äººæ˜¥èŠ‚åŒæ—¶æ¶Œå…¥AIåº”ç”¨ï¼Œè¯·æ±‚æ’é˜Ÿã€ç”Ÿæˆå¡é¡¿ã€é¡µé¢åŠ è½½å¤±è´¥â€¦â€¦å¦‚æœæ²¡æœ‰å¼ºå¤§çš„ç®—åŠ›åšåº•åº§ï¼Œ**ç»“æœå¾€å¾€åªæœ‰ä¸¤ä¸ªï¼šè¦ä¹ˆå¡é¡¿æ‰çº¿ï¼Œè¦ä¹ˆç›´æ¥å®•æœºã€‚**ä¼ä¸šè¾›è‹¦æ‹‰æ¥çš„æ–°ç”¨æˆ·ï¼Œå°±åœ¨æ¼«é•¿çš„åŠ è½½åœˆå’Œ 502 æŠ¥é”™é‡Œæµå¤±äº†ã€‚</p>
<p><strong>è¿™ä¸æ˜¯ç§‘å¹»åœºæ™¯ï¼Œè¿™æ˜¯AI å›¢é˜ŸçœŸå®é¢ä¸´çš„ç„¦è™‘ã€‚</strong></p>
<p>æ®è¡Œä¸šæµ‹ç®—ï¼Œä»…é™¤å¤•å½“æ™šï¼Œä¸»æµAIçº¢åŒ…æ´»åŠ¨çš„äº¤äº’é‡å°†çªç ´åƒäº¿æ¬¡ï¼Œç¬æ—¶å¹¶å‘å³°å€¼æˆ–è¾¾10äº¿æ¬¡/ç§’ã€‚æ¯ä¸€æ¬¡å¯¹è¯ã€æ¯ä¸€å¸§ç”Ÿæˆã€æ¯ä¸€æ¬¡äº¤äº’ï¼ŒèƒŒåéƒ½æ˜¯GPUé›†ç¾¤çš„é«˜é€Ÿè¿è½¬ã€‚å¯¹å¾ˆå¤šAIä¼ä¸šè€Œè¨€ï¼Œè¿™ç§ç¬æ—¶è¿¸å‘çš„ç®—åŠ›éœ€æ±‚ï¼Œæ— ç–‘æ˜¯ä¸€åœºå‰æ‰€æœªæœ‰çš„â€œæœŸæœ«å¤§è€ƒâ€ï¼Œè€Œå¤§å¤šæ•°ä¼ ç»Ÿäº‘æœåŠ¡å•†ï¼Œæ ¹æœ¬æ²¡æœ‰èƒ½åŠ›æ¥ä½è¿™æ³¢æµé‡å†²å‡»ã€‚</p>
<p>è€Œæœ‰ä¸€å®¶åˆ›ä¸šå…¬å¸ï¼Œåœ¨å»å¹´ä¸€åœºçœŸå®çš„â€œæµé‡æµ·å•¸â€ä¸­ï¼Œä¸ä»…ç¨³ç¨³æ¥ä½äº†ï¼Œè¿˜å®Œæˆäº†ä¸€æ¬¡æ¼‚äº®çš„æŠ€æœ¯æ”¯æ’‘ã€‚è¿™ä¸ªæ•…äº‹çš„ä¸»è§’ï¼Œæ˜¯å…¨çƒ3Då†…å®¹åº”ç”¨å¤´éƒ¨ä¼ä¸šâ€”â€”Remyã€‚</p>
<h2 data-id="heading-0"><strong>ä¸€ã€Remyï¼š3Då†…å®¹â€œå…¨æ°‘åŒ–â€çš„å…ˆé”‹</strong></h2>
<p>Remyæ˜¯KIRI Innovationï¼ˆéº’ç ºåˆ›æ–°ï¼‰æ——ä¸‹äº§å“ï¼Œç”±åˆ›å§‹äººç‹æ­£ç”·ï¼ˆJackï¼‰äº2018å¹´åœ¨åŠ æ‹¿å¤§å¤šä¼¦å¤šåˆ›ç«‹ï¼Œå›¢é˜Ÿä¸ƒå¹´æ·±è€•ï¼Œåªåšâ€œé™ä½3Då†…å®¹åˆ›ä½œé—¨æ§›â€ä¸€ä»¶äº‹ã€‚ä»å…¨çƒé¦–åˆ›æ‰‹æœºå¤–æ¥3Dæ‰«æä»ªPhizï¼Œåˆ°2021å¹´æˆ˜ç•¥è½¬å‹æ¨å‡ºçº¯æ‰‹æœºåº”ç”¨KIRI Engineï¼Œå€ŸåŠ©NeRFç­‰å…ˆè¿›ç®—æ³•å®ç°é«˜è´¨é‡3Då»ºæ¨¡ï¼›ä»æ·±è€•æµ·å¤–å¸‚åœºï¼Œç”¨æŠ€æœ¯é•¿è§†é¢‘ç§¯ç´¯ä¸Šä¸‡æ ¸å¿ƒç”¨æˆ·ï¼Œåˆ°2024å¹´å°†é«˜æ–¯æ³¼æº…æŠ€æœ¯å·¥ç¨‹åŒ–ï¼Œ9å¤©è·å¾—100ä¸‡ä¸‹è½½é‡çš„æ‰‹æœºåº”ç”¨â€”â€”<strong>Remyçš„æ¯ä¸€æ­¥ï¼Œéƒ½åœ¨æ‰“ç ´3DæŠ€æœ¯çš„ä¸“ä¸šå£å’ã€‚</strong></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4cedecb90e942acae8808cd6a7aba67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969646&amp;x-signature=htsPYg%2FLq8tjOxnCCSRitUXDJ4k%3D" alt="" loading="lazy"/></p>
<p>å»å¹´åœ¨åä¸ºHarmonyOS 6 çš„å‘å¸ƒä¼šç°åœºï¼ŒRemy æƒŠè‰³äº®ç›¸ã€‚åˆ›å§‹äººå…¼ CEO ç‹æ­£ç”·ç°åœºæ¼”ç¤ºï¼Œä»…ç”¨ä¸€æ®µæ‰‹æœºç¯ç»•è§†é¢‘ï¼Œå°±ç”Ÿæˆäº†å¯åœ¨æ‰‹æœºé‡Œè‡ªç”±æŸ¥çœ‹çš„æ²‰æµ¸å¼ 3D ç©ºé—´ã€‚å‘å¸ƒä¼šç»“æŸä»…æ•°å°æ—¶ï¼ŒRemy çš„ä¸‹è½½é‡ä¾¿ä¸€è·¯é£™å‡ï¼Œç›´å†²åä¸ºåº”ç”¨å¸‚åœºç¬¬ä¸€ã€‚</p>
<p>**Remy è®© 3D å†…å®¹çœŸæ­£èµ°å‘å¤§ä¼—ã€‚**æ— éœ€ä¸“ä¸šè®¾å¤‡ï¼Œä¹Ÿä¸ç”¨å»ºæ¨¡åŸºç¡€ï¼Œä¸€éƒ¨æ™®é€šæ™ºèƒ½æ‰‹æœºï¼Œå¯¹å‡†å®ç‰©æ‹æ‘„ä¸€æ®µè§†é¢‘ï¼Œäº”åˆ†é’Ÿåå°±èƒ½ç”Ÿæˆä¸€ä¸ªå¯ 360Â° æŸ¥çœ‹ã€å¯ç¤¾äº¤åˆ†äº«çš„æ²‰æµ¸å¼ 3D ç©ºé—´ã€‚æ›¾ç»åªæœ‰ä¸“ä¸šå·¥ä½œå®¤æ‰èƒ½å…·å¤‡çš„èƒ½åŠ›ï¼Œå¦‚ä»Šè¢«è£…è¿›äº†æ¯ä¸€ä½åä¸ºç”¨æˆ·çš„å£è¢‹ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67d976aac5124c7885ca98b68d07fa9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969646&amp;x-signature=WcU7SbUzzIxQfRS%2BEC%2BrFePcc2o%3D" alt="" loading="lazy"/></p>
<p><strong>é«˜å…‰æ—¶åˆ»ï¼Œä¹Ÿæ˜¯ç”Ÿæ­»è€ƒéªŒã€‚</strong></p>
<p>æ±¹æ¶Œçš„ç”¨æˆ·ç¬é—´æ¶Œå…¥ï¼Œæ¯ç§’éƒ½æœ‰æˆåƒä¸Šä¸‡æ¡è§†é¢‘ç­‰å¾…è¢«â€œ3D åŒ–â€ã€‚åå°ç®—åŠ›éœ€æ±‚å‘ˆæŒ‡æ•°çº§é£™å‡ï¼ŒæœåŠ¡å™¨å‹åŠ›éª¤å¢ã€‚å¯¹äºä¸€å®¶åˆ›ä¸šå…¬å¸è€Œè¨€ï¼Œè¿™æ˜¯æ¢¦å¯ä»¥æ±‚çš„é«˜å…‰ï¼Œä¹Ÿæ˜¯ä¸€åœºå…³ä¹å­˜äº¡çš„æé™å‹åŠ›æµ‹è¯•ï¼šå¦‚æœç”¨æˆ·ç‚¹å¼€åº”ç”¨å´è¿Ÿè¿Ÿæ— æ³•ç”Ÿæˆï¼Œåˆšç‚¹ç‡ƒçš„å¸‚åœºçƒ­æƒ…å°†è¿…é€Ÿå†·å´ã€‚</p>
<p><strong>å…³é”®æ—¶åˆ»ï¼ŒKIRI çš„åº•å±‚ç®—åŠ›åˆä½œä¼™ä¼´</strong>**-<strong><strong>å…±ç»©ç§‘æŠ€å¯åŠ¨äº†</strong></strong>ç§’<strong><strong>çº§</strong></strong>å“åº”æœºåˆ¶****ã€‚**é€šè¿‡å¼¹æ€§ç®—åŠ›è°ƒåº¦ç³»ç»Ÿï¼Œåœ¨ 48 å°æ—¶å†…å°†æ”¯æ’‘ Remy çš„ GPU é›†ç¾¤è§„æ¨¡ä»ç™¾å¡æé€Ÿæ‰©å®¹è‡³ 1900 å¼ å¡ï¼Œç¨³ç¨³æ¥ä½äº†50å°æ—¶å†…50ä¸‡ç”¨æˆ·çš„é›†ä¸­ç™»å½•å†²å‡»ï¼</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a34ba087fa4e4dc38764032295ae8526~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770969646&amp;x-signature=cfvCJ5BmZpqqwnLSSFxBn46RBBw%3D" alt="" loading="lazy"/></p>
<p>æµé‡æ´ªå³°å†çŒ›ï¼ŒRemy çš„ç”¨æˆ·ä½“éªŒä¾ç„¶ä¸æ»‘ï¼Œæ²¡æœ‰æ‰é“¾å­ã€‚</p>
<p>è¿™èƒŒåï¼Œæ­£æ˜¯å…±ç»©ç§‘æŠ€çš„æ ¸å¿ƒèƒ½åŠ›ï¼š<strong>æé€Ÿã€ç¨³å®šçš„ç®—åŠ›å¼¹æ€§æ‰©ç¼©å®¹ã€‚</strong></p>
<h2 data-id="heading-1">äºŒã€ç®—åŠ›å¦‚æ°´ï¼šæŒ‰éœ€è°ƒåº¦ï¼Œç§’çº§æ‰©ç¼©</h2>
<p>å…±ç»©çš„æ ¸å¿ƒå›¢é˜Ÿæ¥è‡ªæ¸…åï¼Œä»–ä»¬åšçš„ï¼Œç®€å•è¯´ï¼Œå°±æ˜¯æ‰“é€ äº†ä¸€å¼ â€œæ™ºèƒ½ç®—åŠ›ç”µç½‘â€ã€‚</p>
<p>è¿™æ°å¥½å®Œç¾åŒ¹é…äº† AI åº”ç”¨æ˜¥èŠ‚æœŸé—´çš„â€œå¿ƒè·³æ›²çº¿â€ï¼š</p>
<ul>
<li><strong>ç§’çº§å¼¹æ€§ï¼š</strong> æµé‡é«˜å³°æ¥äº†ï¼Œç®—åŠ›è‡ªåŠ¨è·Ÿä¸Šï¼›é«˜å³°è¿‡å»ï¼Œèµ„æºè‡ªåŠ¨é‡Šæ”¾ã€‚ä½ åªéœ€ä¸ºå®é™…ä½¿ç”¨é‡ä»˜è´¹ï¼Œæ— éœ€ä¸ºâ€œå¯èƒ½ç”¨å¾—ä¸Šâ€çš„å³°å€¼å®¹é‡æå‰ä¹°å•ã€‚</li>
<li><strong>æè‡´ç¨³å®šï¼š</strong> é€šè¿‡æ™ºèƒ½å®¹é”™å’Œé«˜å¯ç”¨æ¶æ„ï¼Œä¿éšœå…³é”®ä»»åŠ¡ SLA é«˜è¾¾ 99.99%ã€‚æ˜¥èŠ‚å€¼å®ˆï¼Œä½ å¯ä»¥æ›´å®‰å¿ƒåœ°å…³æ³¨ä¸šåŠ¡æœ¬èº«ï¼Œè€Œä¸æ˜¯åå°çš„è´Ÿè½½å‘Šè­¦ã€‚</li>
<li><strong>ç®€å•æ˜“ç”¨ï¼š</strong> æä¾› Serverless GPU æœåŠ¡ï¼Œæ”¯æŒ Docker å®¹å™¨åŒ–ä¸€é”®éƒ¨ç½²ï¼Œé¢„ç½®ä¸»æµ AI æ¡†æ¶ã€‚ä½ æ— éœ€å…³å¿ƒåº•å±‚è¿ç»´ï¼Œåƒç”¨æ°´ç”¨ç”µä¸€æ ·ï¼Œä¸“æ³¨ä½ çš„ AI åˆ›æ„ã€‚</li>
</ul>
<p>å¾ˆå¤š AI åœˆçš„åŒè¡Œä¹ æƒ¯äº†ä¼ ç»Ÿäº‘å‚å•†çš„åŒ…å¹´åŒ…æœˆæ¨¡å¼ï¼Œä¸ºäº†æ˜¥èŠ‚é‚£ 1% çš„çªå‘æµé‡ï¼Œä¸å¾—ä¸é—²ç½® 99% çš„ç®—åŠ›èµ„æºï¼Œæˆæœ¬é«˜æ˜‚ä¸”æµªè´¹ä¸¥é‡ã€‚</p>
<p>ä½†åœ¨ AI æ—¶ä»£ï¼Œå°¤å…¶æ˜¯é¢å¯¹æ˜¥èŠ‚è¿™ç§ä¸å¯é¢„æµ‹çš„æµé‡çˆ†å‘ï¼Œâ€œå›ºå®šâ€å°±æ˜¯æœ€å¤§çš„é£é™©ï¼Œâ€œå¼¹æ€§â€æ‰æ˜¯ç¡¬æ ¸çš„ç”Ÿå­˜èƒ½åŠ›ã€‚å…±ç»©åšç®—åŠ›çš„åˆè¡·å¾ˆç®€å•ï¼š<strong>åˆ«è®©ç®—åŠ›æˆä¸ºåˆ›æ–°çš„ç“¶é¢ˆï¼Œä¹Ÿåˆ«ä¸ºäº†é˜²èŒƒ 1% çš„çªå‘æµé‡ï¼Œæµªè´¹ 99% çš„é¢„ç®—åœ¨é—²ç½®èµ„æºä¸Šã€‚</strong></p>
<h2 data-id="heading-2">ä¸‰ã€æ‰¾é è°±çš„æˆ˜å‹ï¼Œè¿‡ä¸ªå®‰å¿ƒå¹´</h2>
<p>æ˜¥èŠ‚çš„æµé‡æ´ªå³°ï¼Œä»æ¥éƒ½ä¸æ˜¯å•çº¯çš„æŒ‘æˆ˜ï¼Œæ›´æ˜¯å¼¯é“è¶…è½¦çš„æœºé‡ã€‚å®ƒè€ƒéªŒç€äº§å“çš„å¸å¼•åŠ›ï¼Œæ›´è€ƒéªŒç€ä¼ä¸šçš„â€œåº•å±‚å†…åŠ›â€â€”â€”ç®—åŠ›æ”¯æ’‘çš„åšåº¦ï¼Œç›´æ¥å†³å®šäº†ä½ èƒ½æ¥ä½å¤šå°‘æµé‡ã€ç•™ä½å¤šå°‘ç”¨æˆ·ã€‚</p>
<p><strong>Remy çš„æ•…äº‹ï¼Œå¾ˆå¯èƒ½åœ¨ä»Šå¹´çš„æ˜¥èŠ‚ï¼Œä»¥æ›´å¤§çš„è§„æ¨¡ã€åœ¨æ›´å¤šçš„ AI åº”ç”¨ä¸Šé‡æ¼”ã€‚</strong></p>
<p>ä¸å…¶åœ¨ç„¦è™‘ä¸­ç¥ˆç¥·æœåŠ¡å™¨ç¨³å®šï¼Œä¸å¦‚åœ¨èŠ‚å‰ä¸ºä½ çš„ AI åº”ç”¨æ‰¾ä¸€ä¸ªé è°±çš„â€œæˆ˜å‹â€ã€‚è®©å…±ç»©è¿™ä¸ªä¸“ä¸šçš„â€œç®—åŠ›å®ˆæŠ¤è€…â€ï¼Œå¸®ä½ è§£å†³å¼¹æ€§æ‰©ç¼©å®¹çš„æ ¸å¿ƒéš¾é¢˜ï¼Œæ‰›ä½æ˜¥èŠ‚æµé‡æ´ªå³°ã€‚</p>
<p>æ¯•ç«Ÿï¼Œåœ¨ AI ç«èµ›çš„ä¸‹åŠåœºï¼Œç¨³å®šçš„ç”¨æˆ·ä½“éªŒï¼Œæ‰æ˜¯æœ€å¥½çš„æ–°æ˜¥ç¥ç¦ã€‚</p>
<p>æ˜¥èŠ‚æµé‡å¤§æˆ˜åœ¨å³ï¼Œæ„¿æ¯ä¸€å®¶ AI ä¼ä¸šéƒ½èƒ½ä¸“å¿ƒåšäº§å“ã€å†²æµé‡ï¼Œè‡³äºç®—åŠ›è¿™ä»¶äº‹ï¼Œäº¤ç»™å…±ç»©å°±å¥½â€”â€”ä½ åªç®¡ä¹˜é£ç ´æµªï¼Œå®ƒå¸®ä½ æ‰›ä½ç®—åŠ›å‹åŠ›ï¼Œå®ˆä½æ¯ä¸€æ³¢æµé‡çº¢åˆ©ï¼Œè¿‡ä¸€ä¸ªå®‰å¿ƒå¹´ã€‚<br/>
é€šè¿‡é‚€è¯·é“¾æ¥æ³¨å†Œèƒ½å…è´¹ä½¿ç”¨4090å¡6å°æ—¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.suanli.cn%2Fauth%2Flogin%3Finvite_code%3DJFzx9q0WZ1" target="_blank" title="https://console.suanli.cn/auth/login?invite_code=JFzx9q0WZ1" ref="nofollow noopener noreferrer">console.suanli.cn/auth/login?â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills | æ˜é‡‘ä¸€å‘¨ 2.5]]></title>    <link>https://juejin.cn/post/7603160727717609523</link>    <guid>https://juejin.cn/post/7603160727717609523</guid>    <pubDate>2026-02-05T08:40:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603160727717609523" data-draft-id="7602935146707337262" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills | æ˜é‡‘ä¸€å‘¨ 2.5"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-05T08:40:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘ä¸€å‘¨"/> <meta itemprop="url" content="https://juejin.cn/user/53218623894222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills | æ˜é‡‘ä¸€å‘¨ 2.5
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/53218623894222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘ä¸€å‘¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T08:40:11.000Z" title="Thu Feb 05 2026 08:40:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>æœ¬æ–‡å­—æ•°1500+ ï¼Œé˜…è¯»æ—¶é—´å¤§çº¦éœ€è¦ 4åˆ†é’Ÿã€‚</em></p>
<blockquote>
<p>ã€æ˜é‡‘ä¸€å‘¨ã€‘æœ¬æœŸäº®ç‚¹ï¼š</p>
</blockquote>
<ul>
<li>
<p><a href="https://juejin.cn/post/7599641289887055918" target="_blank" title="https://juejin.cn/post/7599641289887055918">åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7598921649888968731" target="_blank" title="https://juejin.cn/post/7598921649888968731">ä¾›åº”é“¾ç³»ç»Ÿä¸­çš„ Web æ‰“å°æ–¹æ¡ˆçš„æ¢ç´¢å®è·µ</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7600238071038197769" target="_blank" title="https://juejin.cn/post/7600238071038197769">Clawdbot å®Œæ•´å¯¹æ¥é£ä¹¦æ•™ç¨‹ æ‰‹æŠŠæ‰‹æ­å»ºä½ çš„ä¸“å± AI åŠ©æ‰‹</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7598737609494855699" target="_blank" title="https://juejin.cn/post/7598737609494855699">è¡€å‹é£™å‡ï¼ŒFlutter &amp; Dart 2025 å¹´åº¦å·¨å‘å›é¡¾</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7599970244786864191" target="_blank" title="https://juejin.cn/post/7599970244786864191">ä»é›¶å¼€å§‹æ­å»ºéƒ¨ç½² Moltbot/Clawdbot å®Œæ•´æ”»ç•¥</a></p>
</li>
</ul>
<blockquote>
<p><strong>ã€Œä¸Šæ¦œè§„åˆ™ã€</strong>ï¼šæ–‡ç« å‘å¸ƒæ—¶é—´åœ¨æœ¬æœŸã€Œæ˜é‡‘ä¸€å‘¨ã€å‘å¸ƒæ—¶é—´çš„å‰ä¸€å‘¨å†…ï¼›ä¸”ç¬¦åˆå„ä¸ªæ ç›®çš„å†…å®¹å®šä½å’Œè¦æ±‚ã€‚ å¦‚å‘ç°æ–‡ç« æœ‰æŠ„è¢­ã€æ´—ç¨¿ç­‰è¿åç¤¾åŒºè§„åˆ™çš„è¡Œä¸ºï¼Œå°†å–æ¶ˆå½“æœŸåŠåç»­ä¸Šæ¦œèµ„æ ¼ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€å‘¨â€œé‡‘â€é€‰</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73d5bf990a124e3a87cffb06443ad9ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5LiA5ZGo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770885743&amp;x-signature=pvexyGP3pjpEg0Fli4%2Fh4yfoMXQ%3D" alt="æ˜é‡‘ä¸€å‘¨ æ–‡ç« å¤´å›¾ 1303x734.jpg" loading="lazy"/></p>
<p><em>å†…å®¹è¯„å®¡ä»¬ä¼šåœ¨è¿‡å»çš„ä¸€å‘¨å†…å¯¹ç¤¾åŒºæ·±åº¦æŠ€æœ¯å¥½æ–‡è¿›è¡ŒæŒ–æ˜å’Œç­›é€‰ï¼Œä¼˜è´¨çš„æŠ€æœ¯æ–‡ç« æœ‰æœºä¼šå‡ºç°åœ¨ä¸‹æ–¹æ¦œå•ä¸­ï¼Œæ’åä¸åˆ†å…ˆåã€‚</em></p>
<h3 data-id="heading-1">å‰ç«¯</h3>
<p><a href="https://juejin.cn/post/7599641289887055918" target="_blank" title="https://juejin.cn/post/7599641289887055918">åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills</a><a href="https://juejin.cn/user/598569647873805/posts" target="_blank" title="https://juejin.cn/user/598569647873805/posts">@å»ä¼ªå­˜çœŸ</a></p>
<blockquote>
<p>æ–‡ç« ä»‹ç»å‰ç«¯é¡¹ç›®å¸¸ç”¨æŠ€èƒ½åŒ…ã€‚Vue-Skills è§£å†³ Vue 3 å¼€å‘ç—›ç‚¹ï¼›React-Skills æ¶µç›–ç»„ä»¶ç»„åˆã€æ€§èƒ½ä¼˜åŒ–ç­‰è§„åˆ™ï¼›UI-Skills æä¾›å¤šå…ƒé£æ ¼ã€é€‚é…å¤šæŠ€æœ¯æ ˆã€‚Skills è®©å¼€å‘è€…è½¬å˜è§’è‰²ï¼Œæå‡å¼€å‘æ•ˆç‡ä¸ä»£ç è´¨é‡ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7598921649888968731" target="_blank" title="https://juejin.cn/post/7598921649888968731">ä¾›åº”é“¾ç³»ç»Ÿä¸­çš„ Web æ‰“å°æ–¹æ¡ˆçš„æ¢ç´¢å®è·µ</a><a href="https://juejin.cn/user/3233040624266695/posts" target="_blank" title="https://juejin.cn/user/3233040624266695/posts">@å¤èŒ—å‰ç«¯å›¢é˜Ÿ</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»•ä¾›åº”é“¾ç³»ç»Ÿä¸­çš„Webæ‰“å°æ–¹æ¡ˆå±•å¼€ã€‚è°ƒç ”äº†åŸºäºDOMã€å¯è§†åŒ–æ¨¡æ¿ã€æœ¬åœ°æ‰“å°æ§ä»¶ä¸‰ç±»ä¸»æµæ–¹æ¡ˆå¹¶å¯¹æ¯”ã€‚é‡ç‚¹åˆ†æwindow.printï¼Œç»™å‡ºæŒ‡å®šåŒºåŸŸä¸æ‰¹é‡æ‰“å°æ€è·¯ï¼Œä»‹ç»æ ¸å¿ƒCSSæ‰“å°é…ç½®ï¼ŒæŒ‡å‡ºå…¶ä»æ˜¯é«˜æ€§ä»·æ¯”æ–¹æ¡ˆã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7599586891084726306" target="_blank" title="https://juejin.cn/post/7599586891084726306">æˆ‘æ¥æ‰‹äº†ä¸€ä¸ª 10 å¹´å‰çš„ jQuery è€é¡¹ç›®ï¼Œç”¨ Web Components ç»™å®ƒç»­äº†å‘½</a><a href="https://juejin.cn/user/3878732754331096/posts" target="_blank" title="https://juejin.cn/user/3878732754331096/posts">@ErpanOmer</a></p>
<blockquote>
<p>ä½œè€…æ¥æ‰‹ 2015 å¹´ä¸Šçº¿çš„ jQuery è€ CRM é¡¹ç›®ï¼Œéœ€æ·»åŠ  AI æ™ºèƒ½å®¢æœåŠŸèƒ½ã€‚å› ä¸šåŠ¡æ—¶é—´ç´§ï¼Œé€‰æ‹© Web Componentsï¼Œåˆ©ç”¨å…¶ Shadow DOM è§£å†³ CSS æ±¡æŸ“ã€‚ä»‹ç»ç»„ä»¶å®šä¹‰ä¸ä½¿ç”¨ï¼Œè¯¥æ–¹æ¡ˆä¾µå…¥æ€§é›¶ã€æ¡†æ¶æ— å…³ã€å¯æ¸è¿›è¿ç§»ï¼Œè¿˜ç»™å‡ºé¿å‘æŒ‡å—ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7600581247020253193" target="_blank" title="https://juejin.cn/post/7600581247020253193">æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨LangChainï¼ˆå‰ç«¯å¼€å‘ç¨‹åºå‘˜ç‰ˆï¼‰</a><a href="https://juejin.cn/user/2788017220891128/posts" target="_blank" title="https://juejin.cn/user/2788017220891128/posts">@å‰ç«¯å°è±†</a></p>
<blockquote>
<p>æœ¬æ–‡æ˜¯é¢å‘å‰ç«¯å¼€å‘è€…çš„LangChainæ•™ç¨‹ã€‚å…ˆä»‹ç»å‰ç½®å‡†å¤‡ï¼Œæ¥ç€ä»ç¯å¢ƒæ­å»ºã€æ ¸å¿ƒåŠŸèƒ½å®æ“ã€å‰ç«¯é¡¹ç›®é›†æˆå±•å¼€æ•™å­¦ï¼Œè¿˜ç»™å‡ºé¿å‘æŒ‡å—ï¼Œæœ€åæŒ‡æ˜è¿›é˜¶æ–¹å‘ï¼ŒåŠ©å‰ç«¯å¼€å‘è€…ç”¨JS/TSé›†æˆAIèƒ½åŠ›ï¼Œæ‰“é€ æ™ºèƒ½åº”ç”¨ã€‚</p>
</blockquote>
<h3 data-id="heading-2">åç«¯</h3>
<p><a href="https://juejin.cn/post/7600238071038197769" target="_blank" title="https://juejin.cn/post/7600238071038197769">Clawdbot å®Œæ•´å¯¹æ¥é£ä¹¦æ•™ç¨‹ æ‰‹æŠŠæ‰‹æ­å»ºä½ çš„ä¸“å± AI åŠ©æ‰‹</a><a href="https://juejin.cn/user/993614242266077/posts" target="_blank" title="https://juejin.cn/user/993614242266077/posts">@BingoGo</a></p>
<blockquote>
<p>æœ¬æ–‡æ˜¯ Moltbotï¼ˆåŸ Clawdbotï¼‰å¯¹æ¥é£ä¹¦çš„æ•™ç¨‹ã€‚å…ˆä»‹ç»åœ¨ Linux ç³»ç»Ÿå®‰è£…ï¼ŒåŒ…æ‹¬ Gitã€Node.js åŠ Moltbot å®‰è£…æ­¥éª¤ï¼Œè¿˜æåŠæŸ¥çœ‹æœåŠ¡å’Œè®¿é—® Web UI é¢æ¿æ–¹æ³•ã€‚æ¥ç€è¯´æ˜å¯¹æ¥é£ä¹¦æµç¨‹ï¼Œå«æ’ä»¶å®‰è£…ã€å‚æ•°é…ç½®ã€æƒé™è®¾ç½®ç­‰ï¼Œå®Œæˆåå¯ä¸æœºå™¨äººå¯¹è¯ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7600994087588053011" target="_blank" title="https://juejin.cn/post/7600994087588053011">Agent Skillså·¥ä½œæµï¼šä»å…¥é—¨åˆ°å®æˆ˜</a><a href="https://juejin.cn/user/694547077666606/posts" target="_blank" title="https://juejin.cn/user/694547077666606/posts">@é›¨ä¸­é£˜è¡çš„è®°å¿†</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»•Agent Skillså·¥ä½œæµå±•å¼€ï¼Œå…ˆä»‹ç»æ ¸å¿ƒæ¦‚å¿µä¸æ¶æ„è®¾è®¡ï¼Œæ¥ç€é˜è¿°æ ¸å¿ƒç»„ä»¶ã€åŸºç¡€æŠ€èƒ½å®ç°ï¼Œè¿˜æ¶‰åŠäº¤äº’æœºåˆ¶ã€å¤šAgentåä½œã€‚ä»¥æ™ºèƒ½æ•°æ®åˆ†æç³»ç»Ÿä¸ºä¾‹å®æˆ˜ï¼Œç»™å‡ºéƒ¨ç½²ã€æµ‹è¯•ç­–ç•¥ä¸è®¾è®¡åŸåˆ™ï¼Œå±•ç°å…¶ç»“åˆAIä¸ä¼ ç»Ÿå¼€å‘çš„ä¼˜åŠ¿ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7599237603976134699" target="_blank" title="https://juejin.cn/post/7599237603976134699">æ€§èƒ½å‘Šè­¦æƒŠå››åº§ ç¥å™¨å‡ºæ‰‹ä¼æ¶é¾™</a><a href="https://juejin.cn/user/2586510420095944/posts" target="_blank" title="https://juejin.cn/user/2586510420095944/posts">@Hello_world_</a></p>
<blockquote>
<p>2025å¹´12æœˆ29æ—¥æœåŠ¡å‡ºç°CPUé˜ˆå€¼å‘Šè­¦ï¼Œä½œè€…ä»ä»£ç ã€æµé‡ã€JVMç»´åº¦æ’æŸ¥ï¼Œæœªæ‰¾åˆ°æ ¹æœ¬åŸå› ã€‚åç”¨ç¥å™¨Arthasåˆ†æï¼Œå‘ç°æ˜¯ä¸šåŠ¡ä»£ç ä¸­åºåˆ—åŒ–/ååºåˆ—åŒ–ä»£ç ä½¿ç”¨ä¸å½“æ‰€è‡´ã€‚ä¿®æ”¹ä»£ç åï¼ŒCPUåˆ©ç”¨ç‡å¤§å¹…é™ä½ã€‚</p>
</blockquote>
<h3 data-id="heading-3">Android</h3>
<p><a href="https://juejin.cn/post/7598737609494855699" target="_blank" title="https://juejin.cn/post/7598737609494855699">è¡€å‹é£™å‡ï¼ŒFlutter &amp; Dart 2025 å¹´åº¦å·¨å‘å›é¡¾</a><a href="https://juejin.cn/user/817692379985752/posts" target="_blank" title="https://juejin.cn/user/817692379985752/posts">@æ‹çŒ«deå°éƒ­</a></p>
<blockquote>
<p>æœ¬æ–‡å…ˆæåŠ Google å‘å¸ƒçš„ Flutter &amp; Dart 2025 é«˜å…‰å›é¡¾ï¼Œéšåç€é‡ç›˜ç‚¹è¯¥å¹´ Flutter ç»å…¸å·¨å‘ï¼Œå¦‚å®åŠŸèƒ½æš‚åœã€çº¿ç¨‹åˆå¹¶é—®é¢˜ç­‰ï¼Œå…¶ä¸­è¶…åŠæ•°ä¸º iOS ç›¸å…³é—®é¢˜ï¼Œè™½å®˜æ–¹ç§¯æè§£å†³ï¼Œä½†å¹³å°å‡çº§å‘å¤šã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7600787795478134830" target="_blank" title="https://juejin.cn/post/7600787795478134830">Composeä¸­çš„IntrinsicSizeå®æˆ˜æŒ‡å—</a><a href="https://juejin.cn/user/2788017216685784/posts" target="_blank" title="https://juejin.cn/user/2788017216685784/posts">@ç¨€æœ‰çŒ¿è¯‰</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»•Composeä¸­çš„IntrinsicSizeå±•å¼€ï¼Œä»¥æ„å»ºé‡å å¡ç‰‡å¼UIä¸ºä¾‹ï¼ŒæŒ‡å‡ºweightä¿®é¥°ç¬¦å¯¼è‡´å¸ƒå±€é—®é¢˜çš„åŸå› ï¼Œä»‹ç»äº†IntrinsicSizeæ‰“ç ´å¾ªç¯ä¾èµ–çš„åŸç†ï¼Œåˆ—ä¸¾å¸¸è§ç”¨ä¾‹ï¼Œè¿˜æåŠæ€§èƒ½æ³¨æ„äº‹é¡¹ï¼Œå¼ºè°ƒå…¶å¯¹å¤æ‚UIæ„å»ºçš„é‡è¦æ€§ã€‚</p>
</blockquote>
<h3 data-id="heading-4">äººå·¥æ™ºèƒ½</h3>
<p><a href="https://juejin.cn/post/7599970244786864191" target="_blank" title="https://juejin.cn/post/7599970244786864191">ä»é›¶å¼€å§‹æ­å»ºéƒ¨ç½² Moltbot/Clawdbot å®Œæ•´æ”»ç•¥</a><a href="https://juejin.cn/user/4388906150921614/posts" target="_blank" title="https://juejin.cn/user/4388906150921614/posts">@å‡ºé—¨ä¸ä¸‹é›¨</a></p>
<blockquote>
<p>æœ¬æ–‡æ˜¯ Moltbot/Clawdbot æ­å»ºéƒ¨ç½²æ”»ç•¥ã€‚ä»‹ç»å…¶ä¸ºæ”¯æŒå¤šæ¨¡å‹ã€å¤šå¹³å°çš„ AI åŠ©æ‰‹æ¡†æ¶ï¼Œé˜è¿°ç³»ç»Ÿè¦æ±‚ï¼Œç»™å‡º Windowsã€Mac å®‰è£…æ­¥éª¤ï¼Œæ¶µç›–é¦–æ¬¡é…ç½®ã€å¸¸ç”¨æŒ‡ä»¤ã€æ—¥å¸¸ç»´æŠ¤ã€æ•…éšœæ’é™¤åŠè¿›é˜¶é…ç½®å†…å®¹ï¼Œè¿˜è§£ç­”å¸¸è§é—®é¢˜ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7599604510366236710" target="_blank" title="https://juejin.cn/post/7599604510366236710">Agent Skills å‚»ç“œå¼æ•™ç¨‹ï¼Œ26 å¹´æœ€ç« AI æŠ€æœ¯å°±è¿™ï¼Ÿ</a><a href="https://juejin.cn/user/2444938365386621/posts" target="_blank" title="https://juejin.cn/user/2444938365386621/posts">@ç¨‹åºå‘˜é±¼çš®</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»• Agent Skills å±•å¼€ï¼Œå®ƒæ˜¯ Anthropic æ¨å‡ºçš„å¼€æ”¾æ ‡å‡†ï¼Œå¯è®© AI å­¦ä¹ ä¸“ä¸šæŠ€èƒ½ã€‚ä»‹ç»äº†å…¥é—¨å®æˆ˜ã€å†…éƒ¨åŸç†ã€è·¨å·¥å…·ä½¿ç”¨ã€åˆ›å»ºæ–¹æ³•ï¼Œè¿˜å¯¹æ¯”äº†ä¸ MCPã€æ–œæ å‘½ä»¤åŒºåˆ«ï¼Œå› å…¶å¼€æ”¾å¤ç”¨ä¸”é™ä½é—¨æ§›è€Œå¤§ç«ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7598918127578972194" target="_blank" title="https://juejin.cn/post/7598918127578972194">Agent Skillså®Œå…¨æŒ‡å—ï¼šæ ¸å¿ƒæ¦‚å¿µä¸¨è®¾è®¡æ¨¡å¼ä¸¨å®æˆ˜ä»£ç </a><a href="https://juejin.cn/user/3140624091453053/posts" target="_blank" title="https://juejin.cn/user/3140624091453053/posts">@å¤§æ¨¡å‹çœŸå¥½ç©</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»• Agent Skills å±•å¼€ï¼Œå®ƒæ˜¯æ¸è¿›å¼æŠ«éœ²çš„æç¤ºè¯ç®¡ç†æœºåˆ¶ï¼Œèƒ½é™ä½ Token æ¶ˆè€—ã€‚ä»¥ Claude Code ä¸ºä¾‹ï¼Œä»‹ç»å®‰è£…ã€ä½¿ç”¨åŠè¿›é˜¶æ–¹æ³•ã€‚è¿˜å¯¹æ¯”äº†ä¸ MCP çš„åŒºåˆ«ï¼ŒåŠ©å¼€å‘è€…æ„å»ºå¼ºå¤§æ™ºèƒ½ä½“ã€‚</p>
</blockquote>
<h2 data-id="heading-5">ğŸ“– æŠ•ç¨¿ä¸“åŒº</h2>
<blockquote>
<p>å¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºæ¨èè®¤ä¸ºä¸é”™çš„æ–‡ç« ï¼Œå¹¶é™„ä¸Šé“¾æ¥å’Œæ¨èç†ç”±ï¼Œæœ‰æœºä¼šå‘ˆç°åœ¨ä¸‹ä¸€æœŸã€‚æ–‡ç« åˆ›å»ºæ—¥æœŸå¿…é¡»åœ¨ä¸‹æœŸæ˜é‡‘ä¸€å‘¨å‘å¸ƒå‰ä¸€å‘¨ä»¥å†…ï¼›å¯ä»¥æ¨èè‡ªå·±çš„æ–‡ç« ã€ä¹Ÿå¯ä»¥æ¨èä»–äººçš„æ–‡ç« ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[10åˆ†é’Ÿé€Ÿè§ˆAndroidå¼€å‘è€…éœ€è¦å…³æ³¨çš„ Kotlin æ›´æ–°]]></title>    <link>https://juejin.cn/post/7602824293164941327</link>    <guid>https://juejin.cn/post/7602824293164941327</guid>    <pubDate>2026-02-05T00:42:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602824293164941327" data-draft-id="7602634187284660234" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="10åˆ†é’Ÿé€Ÿè§ˆAndroidå¼€å‘è€…éœ€è¦å…³æ³¨çš„ Kotlin æ›´æ–°"/> <meta itemprop="keywords" content="Kotlin,Android"/> <meta itemprop="datePublished" content="2026-02-05T00:42:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            10åˆ†é’Ÿé€Ÿè§ˆAndroidå¼€å‘è€…éœ€è¦å…³æ³¨çš„ Kotlin æ›´æ–°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:42:57.000Z" title="Thu Feb 05 2026 00:42:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3799bf045f9147809c80a685fc00e648~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856976&amp;x-signature=yJ33XXrcEn7wd%2FqsRv23b8lh4Js%3D" alt="2_0.png" loading="lazy"/></p>
<p>Kotlin 2.3.0 å¸¦æ¥äº†ç¨³å®šçš„æ—¶é—´ APIã€æ˜¾å¼å¹•åå­—æ®µã€æ”¹è¿›çš„ Swift äº’æ“ä½œæ€§ä»¥åŠæ›´å®Œå–„çš„å·¥å…·é“¾ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥ä¸€èµ·æµè§ˆé‚£äº›å¯¹äº Android å¼€å‘è€…éœ€è¦å…³æ³¨çš„æ–°ç‰¹æ€§ã€‚</p>
<h2 data-id="heading-0">ç¨³å®šçš„æ—¶é—´ APIï¼šClock ä¸ Instant</h2>
<p><code>kotlin.time.Clock</code> å’Œ <code>kotlin.time.Instant</code> API ç°å·²æ­£å¼ç¨³å®šï¼Œæ— éœ€å†æ·»åŠ  <code>@OptIn</code> æ³¨è§£å³å¯ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlin.time.*

<span class="hljs-comment">// è·å–å½“å‰æ—¶é—´</span>
<span class="hljs-keyword">val</span> now: Instant = Clock.System.now()

<span class="hljs-comment">// è®¡ç®—æ—¶é—´å·®</span>
<span class="hljs-keyword">val</span> eventTime = Instant.parse(<span class="hljs-string">"2025-12-25T10:00:00Z"</span>)
<span class="hljs-keyword">val</span> timeUntilEvent: Duration = eventTime - now
println(<span class="hljs-string">"è·ç¦»æ´»åŠ¨å¼€å§‹è¿˜æœ‰ï¼š<span class="hljs-subst">${timeUntilEvent.inWholeHours}</span> å°æ—¶"</span>)

<span class="hljs-comment">// é€šè¿‡æ—¶é—´åˆ†é‡åˆ›å»º Instant</span>
<span class="hljs-keyword">val</span> deadline = Instant.fromEpochSeconds(<span class="hljs-number">1735084800</span>)

<span class="hljs-comment">// æ¯”è¾ƒæ—¶é—´</span>
<span class="hljs-keyword">if</span> (now &gt; deadline) {
    println(<span class="hljs-string">"æˆªæ­¢æ—¶é—´å·²è¿‡ï¼"</span>)
}
</code></pre>
<p><strong>Android åœºæ™¯å»ºè®®</strong>ï¼šç”¨å®ƒæ›¿ä»£ <code>System.currentTimeMillis()</code>ï¼Œå®ç°æ›´ç®€æ´ã€ç±»å‹å®‰å…¨çš„æ—¶é—´å¤„ç†ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SessionManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> sessionStart: Instant? = <span class="hljs-literal">null</span>

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startSession</span><span class="hljs-params">()</span></span> {
        sessionStart = Clock.System.now()
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getSessionDuration</span><span class="hljs-params">()</span></span>: Duration {
        <span class="hljs-keyword">val</span> start = sessionStart ?: <span class="hljs-keyword">return</span> Duration.ZERO
        <span class="hljs-keyword">return</span> Clock.System.now() - start
    }
}
</code></pre>
<h2 data-id="heading-1">æ˜¾å¼å¹•åå­—æ®µï¼ˆå®éªŒæ€§ï¼‰</h2>
<p><em>æˆ‘ç»ˆäºå¯ä»¥æ‘†è„±å‘½åä¸¤ä¸ªå˜é‡çš„å›°å±€äº†ï¼</em></p>
<p>ä½ å¯ä»¥å®šä¹‰ä¸æš´éœ²å±æ€§ç±»å‹ä¸åŒçš„å¹•åå­—æ®µï¼Œæ— éœ€å†å•ç‹¬å£°æ˜ç§æœ‰å±æ€§æ¥å®ç°è¿™ä¸€ç‚¹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@OptIn(ExperimentalBackingFields::class)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserPreferences</span> {
    <span class="hljs-comment">// å¹•åå­—æ®µæ˜¯å¯å˜åˆ—è¡¨ï¼Œä½†å¯¹å¤–æš´éœ²ä¸ºä¸å¯å˜åˆ—è¡¨</span>
    <span class="hljs-keyword">val</span> recentSearches: List&lt;String&gt;
        field = mutableListOf()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addSearch</span><span class="hljs-params">(query: <span class="hljs-type">String</span>)</span></span> {
        recentSearches.add(query) <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹å¹•åå­—æ®µ</span>
        <span class="hljs-keyword">if</span> (recentSearches.size &gt; <span class="hljs-number">10</span>) {
            recentSearches.removeAt(<span class="hljs-number">0</span>)
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> prefs = UserPreferences()
prefs.addSearch(<span class="hljs-string">"kotlin 2.3"</span>)
prefs.addSearch(<span class="hljs-string">"coroutines"</span>)
<span class="hljs-comment">// å¤–å¤´æ˜¯æ— æ³•ä½¿ç”¨å¹•åå­—æ®µçš„</span>
<span class="hljs-comment">// prefs.recentSearches.add("flow")</span>
println(prefs.recentSearches) <span class="hljs-comment">// [kotlin 2.3, coroutines]</span>
</code></pre>
<p>Kotlin 2.3 ä¹‹å‰ä½ éœ€è¦è¿™æ ·åšï¼ˆæˆ‘ç¡®å®å¯¹è¿™ä¸ªæ„Ÿåˆ°åŒçƒ¦ï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserPreferences</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _recentSearches = mutableListOf&lt;String&gt;()
    <span class="hljs-keyword">val</span> recentSearches: List&lt;String&gt; <span class="hljs-keyword">get</span>() = _recentSearches.toList()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addSearch</span><span class="hljs-params">(query: <span class="hljs-type">String</span>)</span></span> {
        _recentSearches.add(query)
    }
}
</code></pre>
<p>å¦‚æœä½ å¯¹å®ç°æ–¹æ³•æ„Ÿåˆ°å¥½å¥‡ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16b983eecc6648d9a0d01360945316c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856976&amp;x-signature=wsu2JBYeIkg2kNGEZ6ziwbMKTkA%3D" alt="2_2.jpg" loading="lazy"/></p>
<p>å…¶å®å°±æ˜¯å¢åŠ äº†ä¸€ä¸ª <code>private</code> çš„å­—æ®µç”¨äºç±»çš„å†…éƒ¨ä½¿ç”¨ã€‚</p>
<p>å½“ç„¶ï¼Œä½œä¸ºå®éªŒæ€§åŠŸèƒ½ï¼Œä½ éœ€è¦æ·»åŠ é¢å¤–çš„ç¼–è¯‘æ¡ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xexplicit-backing-fields"</span>)
    }
}
</code></pre>
<h2 data-id="heading-2">æœªä½¿ç”¨è¿”å›å€¼æ£€æŸ¥å™¨ï¼ˆå®éªŒæ€§ï¼‰</h2>
<p>å½“ä½ å¿˜è®°ä½¿ç”¨æŸä¸ªæ¥å£çš„è¿”å›å€¼æ—¶ï¼Œè¯¥åŠŸèƒ½å¯ä»¥å¸®ä½ æ•è·è¿™ç±»ä¸æ˜“å¯Ÿè§‰çš„æ½œåœ¨ Bugã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">// æœ‰æ½œåœ¨é—®é¢˜çš„ç”¨æ³•</span>
<span class="hljs-meta">@OptIn(ExperimentalUnusedReturnValueChecker::class)</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">badprocess</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> list = mutableListOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)

    <span class="hljs-comment">// è­¦å‘Šï¼š'remove' çš„è¿”å›å€¼æœªè¢«ä½¿ç”¨</span>
    list.remove(<span class="hljs-number">2</span>) <span class="hljs-comment">// ä½ æ˜¯å¦éœ€è¦æ£€æŸ¥åˆ é™¤æ˜¯å¦æˆåŠŸï¼Ÿ</span>

    <span class="hljs-comment">// è­¦å‘Šï¼š'plus' çš„è¿”å›å€¼æœªè¢«ä½¿ç”¨</span>
    list.plus(<span class="hljs-number">4</span>) <span class="hljs-comment">// Bugï¼æ­¤æ“ä½œä¸ä¼šä¿®æ”¹åŸåˆ—è¡¨ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°åˆ—è¡¨</span>

   <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// æ­£ç¡®ç”¨æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">goodprocess</span><span class="hljs-params">()</span></span> {
    
    <span class="hljs-keyword">val</span> removed = list.remove(<span class="hljs-number">2</span>)
    <span class="hljs-keyword">if</span> (!removed) println(<span class="hljs-string">"å…ƒç´ æœªæ‰¾åˆ°"</span>)

    <span class="hljs-keyword">val</span> newList = list + <span class="hljs-number">4</span> <span class="hljs-comment">// ä½¿ç”¨è¿”å›çš„æ–°åˆ—è¡¨</span>
}
</code></pre>
<p>å½“ä¸€ä¸ªè¡¨è¾¾å¼è¿”å›çš„ä¸æ˜¯ <code>Unit</code> æˆ– <code>Nothing</code> ç±»å‹çš„å€¼ï¼Œä¸”æ²¡æœ‰è¢«ä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€ç”¨äºæ¡ä»¶åˆ¤æ–­æˆ–ä»¥å…¶ä»–æ–¹å¼ä½¿ç”¨æ—¶ï¼Œå®ƒå°±ä¼šå‘å‡ºè­¦å‘Šã€‚</p>
<p>è¯¥åŠŸèƒ½ä¼šå¸®åŠ©å¼€å‘è€…æ£€æŸ¥å¯èƒ½å­˜åœ¨çš„ Bugï¼š</p>

























<table><thead><tr><th>è¡¨è¾¾å¼</th><th>Bug</th><th>ä¿®å¤æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><code>list.plus(item)</code></td><td>è¿”å›æ–°åˆ—è¡¨ï¼Œä¸ä¼šä¿®æ”¹åŸåˆ—è¡¨</td><td><code>list = list + item</code> æˆ– <code>list.add(item)</code></td></tr><tr><td><code>string.replace("a", "b")</code></td><td>è¿”å›æ–°å­—ç¬¦ä¸²ï¼Œä¸ä¼šä¿®æ”¹åŸå­—ç¬¦ä¸²</td><td><code>val result = string.replace(...)</code></td></tr><tr><td><code>map.minus(key)</code></td><td>è¿”å›æ–°æ˜ å°„ï¼Œä¸ä¼šä¿®æ”¹åŸæ˜ å°„</td><td><code>map = map - key</code></td></tr></tbody></table>
<p>é¢å¤–çš„ç¼–è¯‘æ¡ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xreturn-value-checker=check"</span>)
    }
}
</code></pre>
<h2 data-id="heading-3">å¢å¼ºçš„ UUID æ”¯æŒï¼ˆå®éªŒæ€§ï¼‰</h2>
<p>åŸç”Ÿæ”¯æŒç”Ÿæˆ v4ï¼ˆéšæœºï¼‰å’Œ v7ï¼ˆåŸºäºæ—¶é—´ï¼‰ç±»å‹çš„ <code>UUID</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlin.uuid.*

<span class="hljs-meta">@OptIn(ExperimentalUuidApi::class)</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">generateIds</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// éšæœº UUIDï¼ˆv4ï¼‰</span>
    <span class="hljs-keyword">val</span> randomId = Uuid.random()
    println(randomId) <span class="hljs-comment">// ç¤ºä¾‹ï¼š550e8400-e29b-41d4-a716-446655440000</span>

    <span class="hljs-comment">// åŸºäºæ—¶é—´çš„ UUIDï¼ˆv7ï¼‰- å¯æŒ‰åˆ›å»ºæ—¶é—´æ’åº</span>
    <span class="hljs-keyword">val</span> timeBasedId = Uuid.randomV7()

    <span class="hljs-comment">// åŸºäºç‰¹å®šæ—¶é—´æˆ³ç”Ÿæˆ v7 UUID</span>
    <span class="hljs-keyword">val</span> instant = Clock.System.now()
    <span class="hljs-keyword">val</span> historicalId = Uuid.randomV7(instant)

    <span class="hljs-comment">// å®‰å…¨è§£æï¼ˆæ— æ•ˆæ—¶è¿”å› null è€ŒéæŠ›å‡ºå¼‚å¸¸ï¼‰</span>
    <span class="hljs-keyword">val</span> parsed: Uuid? = Uuid.parseOrNull(<span class="hljs-string">"invalid-uuid"</span>)

    <span class="hljs-comment">// æŒ‰æ—¶é—´é¡ºåºæ¯”è¾ƒ v7 UUID</span>
    <span class="hljs-keyword">val</span> id1 = Uuid.randomV7()
    delay(<span class="hljs-number">100</span>)
    <span class="hljs-keyword">val</span> id2 = Uuid.randomV7()
    println(id1 &lt; id2) <span class="hljs-comment">// true - v7 UUID æ”¯æŒæŒ‰æ—¶é—´æ’åº</span>
}
</code></pre>
<p>ä¸‹é¢æä¾›ä¸€ä¸ªé€ŸæŸ¥è¡¨å¸®åŠ©ä½ å¦‚ä½•é€‰æ‹©åˆé€‚çš„ UUID ç‰ˆæœ¬ï¼š</p>

















<table><thead><tr><th>UUID ç‰ˆæœ¬</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>v4 (<code>random()</code>)</td><td>é€šç”¨å”¯ä¸€ IDï¼Œæ— éœ€æ’åºçš„åœºæ™¯</td></tr><tr><td>v7 (<code>randomV7()</code>)</td><td>æ•°æ®åº“ä¸»é”®ï¼ˆå¯æ’åºï¼‰ã€äº‹ä»¶ ID ç­‰éœ€è¦æŒ‰åˆ›å»ºæ—¶é—´æ’åºçš„åœºæ™¯</td></tr></tbody></table>
<p>é¢å¤–çš„ç¼–è¯‘æ¡ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-opt-in=kotlin.uuid.ExperimentalUuidApi"</span>)
    }
}
</code></pre>
<h2 data-id="heading-4">è¡¨è¾¾å¼ä½“å‡½æ•°ä¸­æ”¯æŒ return</h2>
<p>åœ¨å…·æœ‰æ˜¾å¼è¿”å›ç±»å‹çš„å•è¡¨è¾¾å¼å‡½æ•°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>return</code> è¯­å¥ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">// userId å¦‚æœä¸ºç©ºï¼Œå‡½æ•°è¿”å› "default"</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getDisplayNameOrDefault</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>?)</span></span>: String = getDisplayName(userId ?: <span class="hljs-keyword">return</span> <span class="hljs-string">"default"</span>)

<span class="hljs-comment">// å¤æ‚æ ¡éªŒåœºæ™¯</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">validateEmail</span><span class="hljs-params">(email: <span class="hljs-type">String</span>)</span></span>: ValidationResult =
    <span class="hljs-keyword">when</span> {
        email.isBlank() -&gt; <span class="hljs-keyword">return</span> ValidationResult.Error(<span class="hljs-string">"Email required"</span>)
        !email.contains(<span class="hljs-string">"@"</span>) -&gt; <span class="hljs-keyword">return</span> ValidationResult.Error(<span class="hljs-string">"Invalid format"</span>)
        <span class="hljs-keyword">else</span> -&gt; ValidationResult.Success
    }
</code></pre>
<h2 data-id="heading-5">åµŒå¥—ç±»å‹åˆ«å</h2>
<p>ç°åœ¨ç±»å‹åˆ«åå¯ä»¥å¼•ç”¨å…¶ä»–ç±»å‹åˆ«åã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åŸºç¡€ç±»å‹åˆ«å</span>
<span class="hljs-keyword">typealias</span> UserId = String
<span class="hljs-keyword">typealias</span> ProductId = String

<span class="hljs-comment">// åµŒå¥—ç±»å‹åˆ«å</span>
<span class="hljs-keyword">typealias</span> UserProducts = Map&lt;UserId, List&lt;ProductId&gt;&gt;
<span class="hljs-keyword">typealias</span> UserProductsCallback = (UserProducts) -&gt; <span class="hljs-built_in">Unit</span>

<span class="hljs-comment">// ä½¿ç”¨æ¡ˆä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductRepository</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserProducts</span><span class="hljs-params">(callback: <span class="hljs-type">UserProductsCallback</span>)</span></span> {
        <span class="hljs-keyword">val</span> products: UserProducts = mapOf(
            <span class="hljs-string">"user_1"</span> to listOf(<span class="hljs-string">"prod_a"</span>, <span class="hljs-string">"prod_b"</span>),
            <span class="hljs-string">"user_2"</span> to listOf(<span class="hljs-string">"prod_c"</span>)
        )
        callback(products)
    }
}
</code></pre>
<h2 data-id="heading-6">æ”¹è¿›çš„ Swift äº’æ“ä½œæ€§</h2>
<p>Kotlin æšä¸¾ç°åœ¨ä¼šå¯¼å‡ºä¸ºåŸç”Ÿ Swift æšä¸¾ï¼Œå¹¶ä¸”å¯å˜å‚æ•°ï¼ˆ<code>vararg</code>ï¼‰å‡½æ•°å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Kotlin ä»£ç </span>
<span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentStatus</span> {
    PENDING, COMPLETED, FAILED, REFUNDED
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processPayments</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> payments: <span class="hljs-type">Payment</span>)</span></span>: List&lt;Receipt&gt; {
    <span class="hljs-keyword">return</span> payments.map { process(it) }
}
</code></pre>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// Swift ä»£ç  - ç°åœ¨å¯ä»¥è‡ªç„¶è°ƒç”¨</span>
<span class="hljs-keyword">let</span> status: <span class="hljs-type">PaymentStatus</span> <span class="hljs-operator">=</span> .completed
<span class="hljs-keyword">switch</span> status {
    <span class="hljs-keyword">case</span> .pending: <span class="hljs-built_in">print</span>(<span class="hljs-string">"Waiting..."</span>)
    <span class="hljs-keyword">case</span> .completed: <span class="hljs-built_in">print</span>(<span class="hljs-string">"Done!"</span>)
    <span class="hljs-keyword">case</span> .failed: <span class="hljs-built_in">print</span>(<span class="hljs-string">"Error"</span>)
    <span class="hljs-keyword">case</span> .refunded: <span class="hljs-built_in">print</span>(<span class="hljs-string">"Money back"</span>)
}

<span class="hljs-comment">// å¯å˜å‚æ•°ä¹Ÿèƒ½ç›´æ¥ä½¿ç”¨</span>
<span class="hljs-keyword">let</span> receipts <span class="hljs-operator">=</span> processPayments(payment1, payment2, payment3)
</code></pre>
<h2 data-id="heading-7">Compose ç¼–è¯‘å™¨ï¼šRelease ç‰ˆæœ¬æ”¯æŒæ¸…æ™°å †æ ˆè¿½è¸ª</h2>
<p>å€ŸåŠ©åæ··æ·†çš„å †æ ˆä¿¡æ¯ï¼Œä½ å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è°ƒè¯• Compose çš„å´©æºƒé—®é¢˜ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// build.gradle.kts</span>
composeCompiler {
    <span class="hljs-comment">// å¯ç”¨ç»„é”®æ ¼å¼çš„å †æ ˆè¿½è¸ªï¼ˆ2.3 ç‰ˆæœ¬é»˜è®¤å¼€å¯ï¼‰</span>
    includeSourceInformation = <span class="hljs-literal">true</span>
}
</code></pre>
<p><strong>ä¼˜åŒ–å‰</strong>ï¼šRelease åŒ…ä¸­çš„å´©æºƒæ—¥å¿—æ˜¯æ··æ·†åçš„ï¼Œéš¾ä»¥å®šä½é—®é¢˜ã€‚</p>
<p><strong>ä¼˜åŒ–å</strong>ï¼šç”Ÿæˆæ¸…æ™°çš„ Compose ç»„é”®ï¼Œå¯é€šè¿‡ R8 æ˜ å°„æ–‡ä»¶å…³è”åˆ°ä½ çš„æºä»£ç ï¼Œå¤§å¹…æå‡è°ƒè¯•æ•ˆç‡ã€‚</p>
<h2 data-id="heading-8">Gradle ä¸ AGP æ›´æ–°</h2>
<p><em>æˆ‘ç°åœ¨çœ‹åˆ° AGP çš„æ›´æ–°ï¼Œåªæƒ³å–Šç”°æ–‡é•œï¼</em></p>
<p>ç‰ˆæœ¬è¦æ±‚ï¼š</p>

























<table><thead><tr><th>å·¥å…·</th><th>æœ€ä½ç‰ˆæœ¬</th><th>æœ€é«˜ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>Gradle</td><td>7.6.3</td><td>9.0.0</td></tr><tr><td>AGPï¼ˆAndroid Gradle æ’ä»¶ï¼‰</td><td>8.2.2</td><td>8.13.0</td></tr><tr><td>Java</td><td>8</td><td>25</td></tr></tbody></table>
<p>AGP 9.0+ çš„ä¸€ä¸ªé‡è¦å˜æ›´ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ—§å†™æ³• - åœ¨ AGP 9.0+ ä¸­ä¸å†ç”Ÿæ•ˆ</span>
plugins {
    id(<span class="hljs-string">"com.android.application"</span>)
    id(<span class="hljs-string">"kotlin-android"</span>) <span class="hljs-comment">// éœ€è¦ç§»é™¤è¿™ä¸€è¡Œï¼</span>
}

<span class="hljs-comment">// æ–°å†™æ³• - kotlin-android å·²å†…ç½®åˆ° AGP 9.0+</span>
plugins {
    id(<span class="hljs-string">"com.android.application"</span>)
    <span class="hljs-comment">// Kotlin æ”¯æŒå·²è‡ªåŠ¨å¯ç”¨</span>
}
</code></pre>
<h2 data-id="heading-9">æ•°æ®æµçš„ç©·ä¸¾ when è¡¨è¾¾å¼</h2>
<p>æ›´æ™ºèƒ½çš„ç©·ä¸¾æ£€æŸ¥ï¼Œèƒ½å¤Ÿç†è§£ä½ çš„ä»£ç æ‰§è¡Œæµç¨‹ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;<span class="hljs-type">out T</span>&gt; {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span>&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: T) : Result&lt;T&gt;()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Error</span>(<span class="hljs-keyword">val</span> message: String) : Result&lt;<span class="hljs-built_in">Nothing</span>&gt;()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Loading : Result&lt;<span class="hljs-built_in">Nothing</span>&gt;()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleResult</span><span class="hljs-params">(result: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
    <span class="hljs-comment">// ç¼–è¯‘å™¨èƒ½è¯†åˆ«æ‰€æœ‰åˆ†æ”¯å·²è¢«è¦†ç›–</span>
    <span class="hljs-keyword">when</span> (result) {
        <span class="hljs-keyword">is</span> Result.Success -&gt; println(result.<span class="hljs-keyword">data</span>)
        <span class="hljs-keyword">is</span> Result.Error -&gt; println(result.message)
        Result.Loading -&gt; println(<span class="hljs-string">"Loading..."</span>)
        <span class="hljs-comment">// æ— éœ€å†™ 'else' åˆ†æ”¯ â€” ç¼–è¯‘å™¨ä¼šéªŒè¯ç©·ä¸¾æ€§</span>
    }
}

<span class="hljs-comment">// å…·å¤‡æ•°æ®æµæ„ŸçŸ¥èƒ½åŠ›</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">process</span><span class="hljs-params">(result: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>&gt;?)</span></span> {
    <span class="hljs-keyword">if</span> (result == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>

    <span class="hljs-comment">// ç¼–è¯‘å™¨çŸ¥é“æ­¤å¤„ result ä¸ä¸º null</span>
    <span class="hljs-keyword">when</span> (result) {
        <span class="hljs-keyword">is</span> Result.Success -&gt; {}
        <span class="hljs-keyword">is</span> Result.Error -&gt; {}
        Result.Loading -&gt; {}
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getPermissionLevel</span><span class="hljs-params">(role: <span class="hljs-type">UserRole</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-comment">// è¦†ç›–äº† when è¡¨è¾¾å¼ä¹‹å¤–çš„ Admin åœºæ™¯</span>
    <span class="hljs-keyword">if</span> (role == UserRole.ADMIN) <span class="hljs-keyword">return</span> <span class="hljs-number">99</span>

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (role) {
        UserRole.MEMBER -&gt; <span class="hljs-number">10</span>
        UserRole.GUEST -&gt; <span class="hljs-number">1</span>
        <span class="hljs-comment">// ä½ ä¸å†éœ€è¦ç¼–å†™è¿™ä¸ª else åˆ†æ”¯äº† </span>
        <span class="hljs-comment">// else -&gt; throw IllegalStateException()</span>
    }
}
</code></pre>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>Kotlin 2.3.0 ä¸»è¦è‡´åŠ›äºç¨³å®šå®éªŒæ€§ç‰¹æ€§ï¼Œå¹¶æ”¹è¿›å¤šå¹³å°äº’æ“ä½œæ€§ã€‚</p>
<p>å…¶ä¸­ï¼Œç¨³å®šçš„æ—¶é—´ API å’Œæ˜¾å¼å¹•åå­—æ®µæ˜¯å¯¹ Android å¼€å‘è€…è€Œè¨€æœ€äº®çœ¼çš„æ›´æ–°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agentæ ¸å¿ƒèƒ½åŠ›è½½ä½“ï¼šSkillsæŠ€èƒ½æ¨¡å—ä»åŸºç¡€åˆ°å®æˆ˜å…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7603347438012514339</link>    <guid>https://juejin.cn/post/7603347438012514339</guid>    <pubDate>2026-02-06T06:17:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603347438012514339" data-draft-id="7603355275256938536" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agentæ ¸å¿ƒèƒ½åŠ›è½½ä½“ï¼šSkillsæŠ€èƒ½æ¨¡å—ä»åŸºç¡€åˆ°å®æˆ˜å…¨æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-06T06:17:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agentæ ¸å¿ƒèƒ½åŠ›è½½ä½“ï¼šSkillsæŠ€èƒ½æ¨¡å—ä»åŸºç¡€åˆ°å®æˆ˜å…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:17:16.000Z" title="Fri Feb 06 2026 06:17:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AI Agentæ ¸å¿ƒèƒ½åŠ›è½½ä½“ï¼šSkillsæŠ€èƒ½æ¨¡å—ä»åŸºç¡€åˆ°å®æˆ˜å…¨æŒ‡å—</h2>
<p>åœ¨AIæ™ºèƒ½ä½“ï¼ˆAgentï¼‰ä»â€œæ¦‚å¿µè½åœ°â€åˆ°â€œè§„æ¨¡åŒ–åº”ç”¨â€çš„è¿‡ç¨‹ä¸­ï¼ŒSkillsï¼ˆæŠ€èƒ½æ¨¡å—ï¼‰é€æ¸æˆä¸ºå†³å®šAgentèƒ½åŠ›è¾¹ç•Œä¸ä½“éªŒä¸Šé™çš„æ ¸å¿ƒè½½ä½“ã€‚å½“MCPå› ä¸Šä¸‹æ–‡å†—ä½™ã€æ€§èƒ½æŸè€—ç­‰é—®é¢˜é€æ¸é€€å±…å°ä¼—åœºæ™¯ï¼ŒSkillsä»¥â€œè½»é‡ã€é«˜æ•ˆã€å¯å¤ç”¨â€çš„ä¼˜åŠ¿ï¼Œæˆä¸ºAnthropicã€OpenAIç­‰å¤§å‚ä¸»æ¨çš„AgentæŠ€èƒ½æ‰©å±•æ–¹æ¡ˆï¼Œä¹Ÿæˆä¸ºå¼€å‘è€…è½åœ°æ™ºèƒ½ä½“é¡¹ç›®çš„é¦–é€‰ã€‚</p>
<p>ä»€ä¹ˆæ˜¯Skillsï¼Ÿå®ƒä¸ä¼ ç»Ÿå·¥å…·è°ƒç”¨æœ‰ä½•åŒºåˆ«ï¼Ÿå¦‚ä½•è®¾è®¡é«˜è´¨é‡çš„Skillsï¼Ÿæ€æ ·å¿«é€Ÿå®ç°Agentä¸Skillsçš„é›†æˆè½åœ°ï¼Ÿæœ¬æ–‡å°†å½»åº•æ‹†è§£Skillsçš„æ ¸å¿ƒé€»è¾‘ï¼Œæ­é…å¯ç›´æ¥å¤ç”¨çš„Javaå®æˆ˜ä»£ç ã€è®¾è®¡è§„èŒƒä¸é¿å‘æŒ‡å—ï¼ŒåŠ©åŠ›å¼€å‘è€…å¿«é€ŸæŒæ¡Skillså¼€å‘æŠ€å·§ï¼Œè®©AgentçœŸæ­£å…·å¤‡â€œè§£å†³å®é™…é—®é¢˜â€çš„èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒè®¤çŸ¥ï¼šè¯»æ‡‚Skillsï¼Œå…ˆåˆ†æ¸…3ä¸ªå…³é”®é—®é¢˜</h3>
<p>å¾ˆå¤šå¼€å‘è€…å®¹æ˜“å°†Skillsä¸â€œå·¥å…·APIâ€â€œMCP Serverâ€æ··æ·†ï¼Œå®åˆ™Skillsæ˜¯æ›´è´´è¿‘Agentã€æ›´è½»é‡åŒ–çš„æŠ€èƒ½å•å…ƒï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºâ€œè®©Agentå…·å¤‡å¯å¤ç”¨ã€å¯æ‰©å±•çš„å…·ä½“èƒ½åŠ›â€ã€‚æˆ‘ä»¬å…ˆä»3ä¸ªæ ¸å¿ƒé—®é¢˜å…¥æ‰‹ï¼Œç†æ¸…Skillsçš„æœ¬è´¨ã€‚</p>
<h4 data-id="heading-2">1. ä»€ä¹ˆæ˜¯Skillsï¼Ÿâ€”â€”Agentçš„â€œå¯æ’æ‹”æŠ€èƒ½æ’ä»¶â€</h4>
<p>Skillsï¼ˆæŠ€èƒ½æ¨¡å—ï¼‰æ˜¯ä¸ºAI Agentè®¾è®¡çš„ã€èšç„¦å•ä¸€åŠŸèƒ½çš„æ¨¡å—åŒ–ç»„ä»¶ï¼Œæœ¬è´¨æ˜¯â€œå°†å…·ä½“ä¸šåŠ¡é€»è¾‘å°è£…æˆAgentå¯ç›´æ¥è°ƒç”¨çš„æ¥å£â€ï¼Œæ— éœ€ä¾èµ–å¤–éƒ¨æœåŠ¡åè®®é€‚é…ï¼Œå¯å¿«é€Ÿé›†æˆåˆ°å„ç±»Agentä¸­ï¼Œå®ç°èƒ½åŠ›æ‰©å±•ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒSkillså°±åƒAgentçš„â€œæ‰‹æœºAPPâ€ï¼šAgentæœ¬èº«æ˜¯â€œæ‰‹æœºç¡¬ä»¶â€ï¼ˆå…·å¤‡å†³ç­–ã€äº¤äº’èƒ½åŠ›ï¼‰ï¼Œæ¯ä¸ªSkillæ˜¯ä¸€ä¸ªâ€œAPPâ€ï¼ˆèšç„¦ä¸€ä¸ªåŠŸèƒ½ï¼Œå¦‚â€œæ‹ç…§â€â€œå¯¼èˆªâ€ï¼‰ï¼ŒAgentå¯æ ¹æ®éœ€æ±‚â€œå®‰è£…â€ï¼ˆåŠ è½½ï¼‰æˆ–â€œå¸è½½â€ï¼ˆç§»é™¤ï¼‰Skillsï¼Œæ— éœ€ä¿®æ”¹è‡ªèº«æ ¸å¿ƒé€»è¾‘ï¼Œå°±èƒ½å¿«é€Ÿè·å¾—å¯¹åº”èƒ½åŠ›ã€‚</p>
<p>æ ¸å¿ƒå®šä½ï¼š<strong>Agentçš„èƒ½åŠ›æ‰©å±•å•å…ƒï¼Œè¿æ¥Agentå†³ç­–ä¸å®é™…ä¸šåŠ¡é€»è¾‘çš„æ¡¥æ¢</strong>ã€‚</p>
<h4 data-id="heading-3">2. Skills vs MCP vs æ™®é€šAPIï¼šæ ¸å¿ƒåŒºåˆ«åœ¨å“ªï¼Ÿ</h4>
<p>å¼€å‘è€…æœ€æ˜“æ··æ·†çš„å°±æ˜¯Skillsä¸MCPã€æ™®é€šAPIï¼Œä¸‰è€…çœ‹ä¼¼éƒ½æ˜¯â€œå®ç°åŠŸèƒ½è°ƒç”¨â€ï¼Œä½†å®šä½ã€è®¾è®¡é€»è¾‘å’Œä½¿ç”¨åœºæ™¯æˆªç„¶ä¸åŒï¼Œä¸€å¼ è¡¨æ ¼å½»åº•åŒºåˆ†ï¼š</p>









































<table><thead><tr><th>æ ¸å¿ƒç»´åº¦</th><th>Skillsï¼ˆæŠ€èƒ½æ¨¡å—ï¼‰</th><th>MCPï¼ˆå·¥å…·åè®®ï¼‰</th><th>æ™®é€šAPI</th></tr></thead><tbody><tr><td>æ ¸å¿ƒå®šä½</td><td>Agentä¸“å±çš„è½»é‡æŠ€èƒ½ç»„ä»¶</td><td>è·¨Agentçš„å·¥å…·å…±äº«åè®®</td><td>é€šç”¨çš„æœåŠ¡è°ƒç”¨æ¥å£</td></tr><tr><td>ä¾èµ–å…³ç³»</td><td>ä¸Agentæ·±åº¦é›†æˆï¼Œæ— å¤–éƒ¨ä¾èµ–</td><td>ä¾èµ–å¤–éƒ¨MCP Serverï¼Œéœ€åè®®é€‚é…</td><td>ä¾èµ–APIæœåŠ¡ï¼Œéœ€å•ç‹¬é€‚é…è°ƒç”¨</td></tr><tr><td>è°ƒç”¨æˆæœ¬</td><td>æä½ï¼Œç›´æ¥è°ƒç”¨ï¼Œä¸å ç”¨è¿‡å¤šä¸Šä¸‹æ–‡</td><td>è¾ƒé«˜ï¼Œéœ€æºå¸¦åè®®ä¿¡æ¯ï¼Œå ç”¨ä¸Šä¸‹æ–‡</td><td>ä¸­ç­‰ï¼Œéœ€å¤„ç†è¯·æ±‚/å“åº”æ ¼å¼ï¼Œé€‚é…æˆæœ¬é«˜</td></tr><tr><td>å¤ç”¨æ€§</td><td>é«˜ï¼Œå¯åœ¨åŒç±»Agentä¸­ç›´æ¥å¤ç”¨ï¼Œæ”¯æŒç»„åˆ</td><td>é«˜ï¼Œå¤šAgentå¯å…±äº«åŒä¸€MCP Server</td><td>ä½ï¼Œéœ€ä¸ºä¸åŒAgentå•ç‹¬ç¼–å†™é€‚é…ä»£ç </td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å•ä¸€Agentçš„å…·ä½“åŠŸèƒ½å®ç°ï¼ˆå¦‚ç”Ÿæˆæ–‡æ¡£ã€æ•°æ®åˆ†æï¼‰</td><td>å¤šAgentå…±äº«åŒä¸€å·¥å…·ï¼ˆå¦‚å¤šAIå…±ç”¨ä¼ä¸šå†…éƒ¨å·¥å…·ï¼‰</td><td>éAgentåœºæ™¯çš„æœåŠ¡è°ƒç”¨ï¼Œæˆ–ç®€å•å·¥å…·æ¥å…¥</td></tr></tbody></table>
<p>å…³é”®ç»“è®ºï¼šSkillsä¸æ˜¯â€œæ›¿ä»£â€MCPå’ŒAPIï¼Œè€Œæ˜¯â€œä¼˜åŒ–â€Agentçš„èƒ½åŠ›è°ƒç”¨æ–¹å¼â€”â€”å¯¹äºAgentå¼€å‘ï¼Œä¼˜å…ˆç”¨Skillså°è£…æ ¸å¿ƒåŠŸèƒ½ï¼Œéœ€å¤šAgentå…±äº«æ—¶æ­é…MCPï¼Œç®€å•å¤–éƒ¨æœåŠ¡è°ƒç”¨å¯é€‚é…æ™®é€šAPIã€‚</p>
<h4 data-id="heading-4">3. Skillsçš„æ ¸å¿ƒç‰¹å¾ï¼šä¸ºä»€ä¹ˆèƒ½æˆä¸ºAgentçš„é¦–é€‰ï¼Ÿ</h4>
<p>Skillsä¹‹æ‰€ä»¥èƒ½å¿«é€Ÿå–ä»£MCPæˆä¸ºAgentæŠ€èƒ½æ‰©å±•çš„ä¸»æµæ–¹æ¡ˆï¼Œæ ¸å¿ƒåœ¨äºå…¶è´´åˆAgentå¼€å‘éœ€æ±‚çš„5å¤§ç‰¹å¾ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬è®¾è®¡Skillsçš„æ ¸å¿ƒå‡†åˆ™ï¼š</p>
<ul>
<li><strong>è½»é‡æ— ä¾èµ–</strong>ï¼šæ— éœ€æ­å»ºå¤–éƒ¨Serverï¼Œæ— éœ€éµå¾ªå¤æ‚åè®®ï¼Œå°è£…åå¯ç›´æ¥åµŒå…¥Agentï¼Œè°ƒç”¨æ—¶ä¸å ç”¨å¤§é‡ä¸Šä¸‹æ–‡tokenï¼Œé¿å…æ¨¡å‹æ³¨æ„åŠ›ç¨€é‡Šã€‚</li>
<li><strong>å•ä¸€èŒè´£èšç„¦</strong>ï¼šæ¯ä¸ªSkillä»…å®ç°ä¸€ä¸ªå…·ä½“åŠŸèƒ½ï¼ˆå¦‚â€œExcelè¯»å–â€â€œæ–‡æœ¬ç¿»è¯‘â€â€œæ—¥æœŸè®¡ç®—â€ï¼‰ï¼Œä¸è¿½æ±‚â€œå¤§è€Œå…¨â€ï¼Œç¡®ä¿ä»£ç ç®€æ´ã€å¯ç»´æŠ¤ã€æ— å†—ä½™ã€‚</li>
<li><strong>é«˜å¯å¤ç”¨æ€§</strong>ï¼šéµå¾ªç»Ÿä¸€è§„èŒƒè®¾è®¡çš„Skillsï¼Œå¯åœ¨ä¸åŒAgentä¸­ç›´æ¥å¤ç”¨ï¼ˆå¦‚â€œæ–‡æœ¬ç”ŸæˆSkillâ€å¯åŒæ—¶ç”¨äºå®¢æœAgentã€åŠå…¬Agentï¼‰ï¼Œå¤§å¹…é™ä½é‡å¤å¼€å‘æˆæœ¬ã€‚</li>
<li><strong>å¯ç»„åˆæ‰©å±•</strong>ï¼šå¤šä¸ªSkillså¯ç»„åˆæˆå¤æ‚åŠŸèƒ½ï¼ˆå¦‚â€œæ•°æ®è¯»å–Skill + æ•°æ®ç»Ÿè®¡Skill + æŠ¥å‘Šç”ŸæˆSkillâ€ï¼Œå®ç°è‡ªåŠ¨åŒ–æ•°æ®åˆ†ææŠ¥å‘Šï¼‰ï¼Œçµæ´»é€‚é…å¤æ‚ä¸šåŠ¡éœ€æ±‚ã€‚</li>
<li><strong>å®‰å…¨å¯æ§</strong>ï¼šä¸Agentæ·±åº¦é›†æˆï¼Œå¯ç²¾ç»†åŒ–ç®¡æ§æƒé™ï¼ˆå¦‚â€œæ–‡ä»¶æ“ä½œSkillâ€ä»…å¼€æ”¾è¯»å–æƒé™ï¼‰ï¼Œé¿å…MCPåè®®ç²—æ”¾æƒé™å¸¦æ¥çš„å®‰å…¨é£é™©ã€‚</li>
</ul>
<h3 data-id="heading-5">äºŒã€Skillsè®¾è®¡è§„èŒƒï¼šæ‰“é€ é«˜è´¨é‡å¯å¤ç”¨æŠ€èƒ½æ¨¡å—</h3>
<p>é«˜è´¨é‡çš„Skillsä¸ä»…èƒ½æå‡Agentçš„æ‰§è¡Œæ•ˆç‡ï¼Œè¿˜èƒ½é™ä½ç»´æŠ¤æˆæœ¬ï¼›åä¹‹ï¼Œè®¾è®¡æ··ä¹±ã€å†—ä½™çš„Skillsä¼šå¯¼è‡´Agentè°ƒç”¨æ··ä¹±ã€æ€§èƒ½ä¸‹é™ã€‚ä»¥ä¸‹æ˜¯å¼€å‘è€…å¿…é¡»éµå¾ªçš„è®¾è®¡è§„èŒƒï¼Œé™„å…·ä½“ç¤ºä¾‹ã€‚</p>
<h4 data-id="heading-6">1. å‘½åè§„èŒƒï¼šè¯­ä¹‰æ¸…æ™°ï¼Œä¸€çœ¼è¯†åˆ«åŠŸèƒ½</h4>
<p>Skillsçš„å‘½åéœ€éµå¾ªâ€œåŠŸèƒ½ç±»å‹+å…·ä½“æ“ä½œâ€çš„æ ¼å¼ï¼Œé¿å…æ¨¡ç³ŠåŒ–ã€ç¼©å†™åŒ–ï¼Œç¡®ä¿å¼€å‘è€…å’ŒAgentèƒ½å¿«é€Ÿè¯†åˆ«å…¶åŠŸèƒ½ï¼Œå»ºè®®é‡‡ç”¨â€œå°å†™å­—æ¯+å†’å·åˆ†éš”â€çš„å‰ç¼€åˆ†ç±»æ³•ã€‚</p>
<ul>
<li>æ¨èå‘½åï¼šexcel:readï¼ˆExcelè¯»å–ï¼‰ã€text:translateï¼ˆæ–‡æœ¬ç¿»è¯‘ï¼‰ã€ppt:generateï¼ˆPPTç”Ÿæˆï¼‰ã€data:statisticï¼ˆæ•°æ®ç»Ÿè®¡ï¼‰ï¼›</li>
<li>ç¦æ­¢å‘½åï¼šSkill1ã€MySkillã€ExcelSkillï¼ˆæ¨¡ç³Šä¸æ¸…ï¼Œæ— æ³•å¿«é€Ÿè¯†åˆ«å…·ä½“åŠŸèƒ½ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-7">2. æ¥å£è§„èŒƒï¼šç»Ÿä¸€æ ‡å‡†ï¼Œç¡®ä¿å¯å¤ç”¨</h4>
<p>æ‰€æœ‰Skillséœ€å®ç°ç»Ÿä¸€çš„æ¥å£ï¼Œå®šä¹‰å›ºå®šçš„è°ƒç”¨æ–¹æ³•å’Œå‚æ•°æ ¼å¼ï¼Œé¿å…å› æ¥å£ä¸ä¸€è‡´å¯¼è‡´çš„å¤ç”¨å›°éš¾ã€‚ä»¥Javaè¯­è¨€ä¸ºä¾‹ï¼Œå®šä¹‰é€šç”¨Skillæ¥å£ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">
<span class="hljs-comment">// é€šç”¨Skillæ¥å£ï¼šæ‰€æœ‰Skillå¿…é¡»å®ç°è¯¥æ¥å£ï¼Œç¡®ä¿è°ƒç”¨è§„èŒƒç»Ÿä¸€</span>
<span class="hljs-keyword">public</span> interface Skill {
    <span class="hljs-comment">// 1. è·å–æŠ€èƒ½å”¯ä¸€æ ‡è¯†ï¼ˆéµå¾ªå‘½åè§„èŒƒï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">String</span> <span class="hljs-title">getSkillId</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-comment">// 2. è·å–æŠ€èƒ½æè¿°ï¼ˆç”¨äºAgentå†³ç­–æ—¶å‚è€ƒï¼Œå¦‚â€œç”¨äºè¯»å–Excelæ–‡ä»¶ï¼Œè¿”å›æ•°æ®åˆ—è¡¨â€ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">String</span> <span class="hljs-title">getDescription</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-comment">// 3. æ‰§è¡ŒæŠ€èƒ½æ ¸å¿ƒé€»è¾‘</span>
    <span class="hljs-comment">// paramsï¼šè¾“å…¥å‚æ•°ï¼ˆç»Ÿä¸€ç”¨Mapå°è£…ï¼Œé€‚é…ä¸åŒSkillçš„å‚æ•°å·®å¼‚ï¼‰</span>
    <span class="hljs-comment">// returnï¼šæ‰§è¡Œç»“æœï¼ˆç»Ÿä¸€è¿”å›Stringï¼Œå¤æ‚ç»“æœå¯åºåˆ—åŒ–ä¸ºJSONå­—ç¬¦ä¸²ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">String</span> <span class="hljs-title">execute</span><span class="hljs-params">(Map&lt;<span class="hljs-type">String</span>, Object&gt; params)</span></span>;
    
    <span class="hljs-comment">// 4. è·å–å‚æ•°è¯´æ˜ï¼ˆç”¨äºæ ¡éªŒè¾“å…¥å‚æ•°ï¼Œé¿å…è°ƒç”¨å¤±è´¥ï¼‰</span>
    <span class="hljs-function">Map&lt;<span class="hljs-type">String</span>, <span class="hljs-type">String</span>&gt; <span class="hljs-title">getParamDesc</span><span class="hljs-params">()</span></span>;
}
    
</code></pre>
<h4 data-id="heading-8">3. å‚æ•°è§„èŒƒï¼šç®€æ´å¿…è¦ï¼Œæœ‰æ ¡éªŒæœ‰é»˜è®¤</h4>
<p>å‚æ•°è®¾è®¡éµå¾ªâ€œæœ€å°å¿…è¦åŸåˆ™â€ï¼Œé¿å…å†—ä½™å‚æ•°ï¼›åŒæ—¶éœ€æ·»åŠ å‚æ•°æ ¡éªŒå’Œé»˜è®¤å€¼ï¼Œç¡®ä¿Agentè°ƒç”¨æ—¶ä¸ä¼šå› å‚æ•°ç¼ºå¤±ã€æ ¼å¼é”™è¯¯å¯¼è‡´å¤±è´¥ã€‚</p>
<ul>
<li>å‚æ•°å°è£…ï¼šç»Ÿä¸€ç”¨Map&lt;String, Object&gt;å°è£…è¾“å…¥å‚æ•°ï¼Œkeyä¸ºå‚æ•°åï¼ˆè¯­ä¹‰æ¸…æ™°ï¼‰ï¼Œvalueä¸ºå‚æ•°å€¼ï¼›</li>
<li>å‚æ•°æ ¡éªŒï¼šåœ¨executeæ–¹æ³•å¼€å¤´æ ¡éªŒå‚æ•°çš„å­˜åœ¨æ€§ã€æ ¼å¼æ­£ç¡®æ€§ï¼Œå¼‚å¸¸æ—¶è¿”å›æ˜ç¡®çš„é”™è¯¯æç¤ºï¼›</li>
<li>é»˜è®¤å€¼è®¾ç½®ï¼šéå¿…å¡«å‚æ•°éœ€è®¾ç½®åˆç†é»˜è®¤å€¼ï¼Œå‡å°‘Agentè°ƒç”¨æ—¶çš„å‚æ•°ä¼ é€’æˆæœ¬ã€‚</li>
</ul>
<h4 data-id="heading-9">4. å¼‚å¸¸è§„èŒƒï¼šæ•è·å…¨é¢ï¼Œæç¤ºæ¸…æ™°</h4>
<p>Skillsæ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°å„ç±»å¼‚å¸¸ï¼ˆå¦‚æ–‡ä»¶ä¸å­˜åœ¨ã€å‚æ•°æ ¼å¼é”™è¯¯ã€ç½‘ç»œå¼‚å¸¸ï¼‰ï¼Œéœ€å…¨é¢æ•è·å¼‚å¸¸ï¼Œè¿”å›æ¸…æ™°çš„é”™è¯¯æç¤ºï¼Œä¾¿äºAgentåˆ¤æ–­æ˜¯å¦é‡è¯•ã€å¦‚ä½•è°ƒæ•´ç­–ç•¥ï¼Œç¦æ­¢ç›´æ¥æŠ›å‡ºæœªæ•è·å¼‚å¸¸å¯¼è‡´Agentå´©æºƒã€‚</p>
<h4 data-id="heading-10">5. ç¤ºä¾‹ï¼šç¬¦åˆè§„èŒƒçš„Skillså®ç°ï¼ˆæ–‡æœ¬ç¿»è¯‘Skillï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">HashMap</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Map</span>;

<span class="hljs-comment">// æ–‡æœ¬ç¿»è¯‘Skillï¼šç¬¦åˆæ‰€æœ‰è®¾è®¡è§„èŒƒï¼Œå¯ç›´æ¥å¤ç”¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TextTranslateSkill</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Skill</span> {

    <span class="hljs-comment">// æŠ€èƒ½å”¯ä¸€æ ‡è¯†ï¼ˆéµå¾ªå‘½åè§„èŒƒï¼‰</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getSkillId</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"text:translate"</span>;
    }

    <span class="hljs-comment">// æŠ€èƒ½æè¿°ï¼ˆæ¸…æ™°è¯´æ˜åŠŸèƒ½ã€é€‚ç”¨åœºæ™¯ï¼‰</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getDescription</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨äºæ–‡æœ¬ç¿»è¯‘ï¼Œæ”¯æŒä¸­æ–‡ä¸è‹±æ–‡äº’è¯‘ï¼Œè¾“å…¥æ–‡æœ¬å’Œç›®æ ‡è¯­è¨€ï¼Œè¿”å›ç¿»è¯‘ç»“æœ"</span>;
    }

    <span class="hljs-comment">// å‚æ•°è¯´æ˜ï¼ˆæ˜ç¡®å‚æ•°åã€ç±»å‹ã€æ˜¯å¦å¿…å¡«ã€è¯´æ˜ï¼‰</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; <span class="hljs-title function_">getParamDesc</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&amp;gt; paramDesc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        paramDesc.<span class="hljs-title function_">put</span>(<span class="hljs-string">"text"</span>, <span class="hljs-string">"å¿…å¡«ï¼ŒStringç±»å‹ï¼Œéœ€è¦ç¿»è¯‘çš„æ–‡æœ¬"</span>);
        paramDesc.<span class="hljs-title function_">put</span>(<span class="hljs-string">"targetLang"</span>, <span class="hljs-string">"éå¿…å¡«ï¼ŒStringç±»å‹ï¼Œç›®æ ‡è¯­è¨€ï¼ˆzh=ä¸­æ–‡ï¼Œen=è‹±æ–‡ï¼‰ï¼Œé»˜è®¤en"</span>);
        <span class="hljs-keyword">return</span> paramDesc;
    }

    <span class="hljs-comment">// æ ¸å¿ƒæ‰§è¡Œé€»è¾‘ï¼ˆå«å‚æ•°æ ¡éªŒã€å¼‚å¸¸æ•è·ï¼‰</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params"><span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Object</span>&gt; params</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. å‚æ•°æ ¡éªŒ</span>
            <span class="hljs-keyword">if</span> (!params.<span class="hljs-title function_">containsKey</span>(<span class="hljs-string">"text"</span>) || params.<span class="hljs-title function_">get</span>(<span class="hljs-string">"text"</span>) == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"å‚æ•°é”™è¯¯ï¼šç¼ºå°‘å¿…å¡«å‚æ•°ã€Œtextã€ï¼ˆéœ€è¦ç¿»è¯‘çš„æ–‡æœ¬ï¼‰"</span>;
            }
            <span class="hljs-title class_">String</span> text = params.<span class="hljs-title function_">get</span>(<span class="hljs-string">"text"</span>).<span class="hljs-title function_">toString</span>();
            <span class="hljs-title class_">String</span> targetLang = params.<span class="hljs-title function_">getOrDefault</span>(<span class="hljs-string">"targetLang"</span>, <span class="hljs-string">"en"</span>).<span class="hljs-title function_">toString</span>();

            <span class="hljs-comment">// 2. æ ¡éªŒç›®æ ‡è¯­è¨€æ ¼å¼</span>
            <span class="hljs-keyword">if</span> (!<span class="hljs-string">"zh"</span>.<span class="hljs-title function_">equals</span>(targetLang) &amp;&amp; !<span class="hljs-string">"en"</span>.<span class="hljs-title function_">equals</span>(targetLang)) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"å‚æ•°é”™è¯¯ï¼šç›®æ ‡è¯­è¨€ã€ŒtargetLangã€ä»…æ”¯æŒzhï¼ˆä¸­æ–‡ï¼‰å’Œenï¼ˆè‹±æ–‡ï¼‰"</span>;
            }

            <span class="hljs-comment">// 3. æ ¸å¿ƒç¿»è¯‘é€»è¾‘ï¼ˆæ¨¡æ‹Ÿï¼Œå®é™…å¯è°ƒç”¨ç™¾åº¦ç¿»è¯‘ã€è°·æ­Œç¿»è¯‘APIï¼‰</span>
            <span class="hljs-title class_">String</span> result = <span class="hljs-title function_">translate</span>(text, targetLang);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç¿»è¯‘æˆåŠŸï¼š"</span> + result;

        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            <span class="hljs-comment">// æ•è·å¼‚å¸¸ï¼Œè¿”å›æ¸…æ™°æç¤º</span>
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æŠ€èƒ½æ‰§è¡Œå¤±è´¥ï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>();
        }
    }

    <span class="hljs-comment">// æ¨¡æ‹Ÿæ–‡æœ¬ç¿»è¯‘é€»è¾‘</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">translate</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> text, <span class="hljs-built_in">String</span> targetLang</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"en"</span>.<span class="hljs-title function_">equals</span>(targetLang)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Translated: "</span> + text; <span class="hljs-comment">// æ¨¡æ‹Ÿè‹±è¯‘ä¸­ï¼ˆæ­¤å¤„ç®€åŒ–ï¼Œå®é™…éœ€è°ƒç”¨çœŸå®ç¿»è¯‘é€»è¾‘ï¼‰</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç¿»è¯‘ï¼š"</span> + text; <span class="hljs-comment">// æ¨¡æ‹Ÿä¸­è¯‘è‹±</span>
        }
    }
}
    
</code></pre>
<h3 data-id="heading-11">ä¸‰ã€å®æˆ˜è½åœ°ï¼šAgent + Skills å®Œæ•´å¼€å‘ç¤ºä¾‹ï¼ˆå¯ç›´æ¥å¤ç”¨ï¼‰</h3>
<p>ç»“åˆå‰æ–‡çš„è®¾è®¡è§„èŒƒï¼Œæˆ‘ä»¬ä»¥â€œå¤šåŠŸèƒ½åŠå…¬Agentâ€ä¸ºä¾‹ï¼Œå®ç°3ä¸ªå¸¸ç”¨Skillsï¼ˆæ–‡æœ¬ç¿»è¯‘ã€Excelè¯»å–ã€PPTç”Ÿæˆï¼‰ï¼Œæ¼”ç¤ºAgentå¦‚ä½•åŠ è½½ã€å†³ç­–ã€è°ƒç”¨Skillsï¼Œå®Œæˆç”¨æˆ·éœ€æ±‚ï¼Œå…¨ç¨‹åŸºäºJavaè¯­è¨€ï¼Œèšç„¦æ ¸å¿ƒé€»è¾‘ï¼Œå¯ç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®ä¸­ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-12">å®æˆ˜éœ€æ±‚</h4>
<p>å¼€å‘ä¸€ä¸ªåŠå…¬Agentï¼Œå…·å¤‡ä»¥ä¸‹3ä¸ªåŠŸèƒ½ï¼š1. æ–‡æœ¬ç¿»è¯‘ï¼ˆä¸­è¯‘è‹±/è‹±è¯‘ä¸­ï¼‰ï¼›2. è¯»å–Excelæ–‡ä»¶æ•°æ®ï¼›3. ç”ŸæˆåŠå…¬æ±‡æŠ¥PPTï¼ŒAgentå¯æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œè‡ªä¸»è¯†åˆ«éœ€è¦è°ƒç”¨çš„Skillï¼Œæ‰§è¡Œå¹¶è¿”å›ç»“æœã€‚</p>
<h4 data-id="heading-13">1. å®ç°3ä¸ªæ ¸å¿ƒSkillsï¼ˆéµå¾ªè§„èŒƒï¼‰</h4>
<p>é™¤äº†å‰æ–‡çš„æ–‡æœ¬ç¿»è¯‘Skillï¼Œå†å®ç°Excelè¯»å–Skillå’ŒPPTç”ŸæˆSkillï¼Œå‡éµå¾ªç»Ÿä¸€æ¥å£è§„èŒƒã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-comment">// Excelè¯»å–Skill</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExcelReadSkill</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Skill</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getSkillId</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"excel:read"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getDescription</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨äºè¯»å–Excelæ–‡ä»¶æ•°æ®ï¼Œè¾“å…¥æ–‡ä»¶è·¯å¾„ï¼Œè¿”å›æ–‡ä»¶ä¸­çš„æ•°æ®æ¡æ•°å’Œå‰3æ¡æ•°æ®é¢„è§ˆ"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; <span class="hljs-title function_">getParamDesc</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&amp;gt; paramDesc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        paramDesc.<span class="hljs-title function_">put</span>(<span class="hljs-string">"filePath"</span>, <span class="hljs-string">"å¿…å¡«ï¼ŒStringç±»å‹ï¼ŒExcelæ–‡ä»¶çš„ç»å¯¹è·¯å¾„"</span>);
        <span class="hljs-keyword">return</span> paramDesc;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params"><span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Object</span>&gt; params</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
            <span class="hljs-keyword">if</span> (!params.<span class="hljs-title function_">containsKey</span>(<span class="hljs-string">"filePath"</span>) || params.<span class="hljs-title function_">get</span>(<span class="hljs-string">"filePath"</span>) == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"å‚æ•°é”™è¯¯ï¼šç¼ºå°‘å¿…å¡«å‚æ•°ã€ŒfilePathã€ï¼ˆExcelæ–‡ä»¶è·¯å¾„ï¼‰"</span>;
            }
            <span class="hljs-title class_">String</span> filePath = params.<span class="hljs-title function_">get</span>(<span class="hljs-string">"filePath"</span>).<span class="hljs-title function_">toString</span>();

            <span class="hljs-comment">// æ¨¡æ‹ŸExcelè¯»å–é€»è¾‘ï¼ˆå®é™…å¼€å‘ä¸­å¯è°ƒç”¨POIå·¥å…·ç±»ï¼‰</span>
            <span class="hljs-comment">// æ­¤å¤„æ¨¡æ‹Ÿï¼šè¯»å–æ–‡ä»¶ï¼Œè¿”å›æ•°æ®æ¡æ•°å’Œå‰3æ¡é¢„è§ˆ</span>
            int dataCount = <span class="hljs-number">50</span>; <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®æ¡æ•°</span>
            <span class="hljs-title class_">String</span> preview = <span class="hljs-string">"ç¬¬1æ¡ï¼šå¼ ä¸‰,25,å·¥ç¨‹å¸ˆï¼›ç¬¬2æ¡ï¼šæå››,28,äº§å“ç»ç†ï¼›ç¬¬3æ¡ï¼šç‹äº”,30,è®¾è®¡å¸ˆ"</span>;

            <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>.<span class="hljs-title function_">format</span>(<span class="hljs-string">"Excelè¯»å–æˆåŠŸï¼æ–‡ä»¶è·¯å¾„ï¼š%sï¼Œå…±%dæ¡æ•°æ®ï¼Œå‰3æ¡é¢„è§ˆï¼š%s"</span>,
                    filePath, dataCount, preview);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æŠ€èƒ½æ‰§è¡Œå¤±è´¥ï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>();
        }
    }
}
    
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-comment">// PPTç”ŸæˆSkill</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PptGenerateSkill</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Skill</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getSkillId</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ppt:generate"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getDescription</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨äºç”ŸæˆåŠå…¬æ±‡æŠ¥PPTï¼Œè¾“å…¥æ ‡é¢˜å’Œæ¯é¡µå†…å®¹ï¼Œè¿”å›PPTç”Ÿæˆç»“æœå’Œä¿å­˜è·¯å¾„"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; <span class="hljs-title function_">getParamDesc</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&amp;gt; paramDesc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        paramDesc.<span class="hljs-title function_">put</span>(<span class="hljs-string">"title"</span>, <span class="hljs-string">"å¿…å¡«ï¼ŒStringç±»å‹ï¼ŒPPTæ ‡é¢˜"</span>);
        paramDesc.<span class="hljs-title function_">put</span>(<span class="hljs-string">"contents"</span>, <span class="hljs-string">"å¿…å¡«ï¼ŒList&lt;String&gt;ç±»å‹ï¼ŒPPTæ¯é¡µçš„å†…å®¹åˆ—è¡¨"</span>);
        paramDesc.<span class="hljs-title function_">put</span>(<span class="hljs-string">"savePath"</span>, <span class="hljs-string">"éå¿…å¡«ï¼ŒStringç±»å‹ï¼ŒPPTä¿å­˜è·¯å¾„ï¼Œé»˜è®¤ï¼š/data/ppt/"</span>);
    
</code></pre>
<h4 data-id="heading-14">2. å®ç°åŠå…¬Agentï¼ˆåŠ è½½Skills + è‡ªä¸»å†³ç­– + è°ƒç”¨æ‰§è¡Œï¼‰</h4>
<p>Agentçš„æ ¸å¿ƒé€»è¾‘æ˜¯â€œè§£æç”¨æˆ·éœ€æ±‚ â†’ åŒ¹é…å¯¹åº”Skill â†’ è°ƒç”¨Skillæ‰§è¡Œ â†’ è¿”å›ç»“æœâ€ï¼Œæ­¤å¤„æ¨¡æ‹Ÿéœ€æ±‚è§£æï¼ˆå®é™…å¼€å‘ä¸­å¯ç»“åˆå¤§æ¨¡å‹APIå®ç°ç²¾å‡†è§£æï¼‰ï¼Œæ·»åŠ SkillsåŠ è½½ã€å†³ç­–ã€å¼‚å¸¸å¤„ç†é€»è¾‘ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.*;

<span class="hljs-comment">// å¤šåŠŸèƒ½åŠå…¬Agent</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OfficeAgent</span> {
    <span class="hljs-comment">// Agentåç§°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> agentName;
    <span class="hljs-comment">// åŠ è½½çš„Skillsé›†åˆï¼ˆkeyï¼šskillIdï¼Œvalueï¼šSkillå®ä¾‹ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Skill</span>&amp;gt; skillMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

    <span class="hljs-comment">// åˆå§‹åŒ–Agentï¼ŒåŠ è½½æŒ‡å®šSkills</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">OfficeAgent</span>(<span class="hljs-title class_">String</span> agentName, <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Skill</span>&gt; skillList) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">agentName</span> = agentName;
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">Skill</span> skill : skillList) {
            skillMap.<span class="hljs-title function_">put</span>(skill.<span class="hljs-title function_">getSkillId</span>(), skill);
            <span class="hljs-comment">// æ‰“å°åŠ è½½çš„Skillsä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•</span>
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">"AgentåŠ è½½Skillï¼š%sï¼ˆ%sï¼‰%n"</span>, skill.<span class="hljs-title function_">getSkillId</span>(), skill.<span class="hljs-title function_">getDescription</span>());
        }
    }

    <span class="hljs-comment">// æ ¸å¿ƒæ–¹æ³•ï¼šè§£æç”¨æˆ·éœ€æ±‚ï¼Œè‡ªä¸»åŒ¹é…å¹¶è°ƒç”¨Skill</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">processRequest</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userRequest</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">"%nç”¨æˆ·éœ€æ±‚ï¼š%s%n"</span>, userRequest);

        <span class="hljs-comment">// 1. æ¨¡æ‹Ÿéœ€æ±‚è§£æï¼ˆå®é™…å¼€å‘ä¸­å¯è°ƒç”¨Claudeã€GPTç­‰å¤§æ¨¡å‹APIï¼Œç²¾å‡†åŒ¹é…Skillï¼‰</span>
        <span class="hljs-title class_">SkillMatchResult</span> matchResult = <span class="hljs-title function_">matchSkill</span>(userRequest);
        <span class="hljs-keyword">if</span> (!matchResult.<span class="hljs-title function_">isMatch</span>()) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æ— æ³•è¯†åˆ«æ‚¨çš„éœ€æ±‚ï¼Œå½“å‰Agentæ”¯æŒçš„åŠŸèƒ½ï¼š"</span> + <span class="hljs-title function_">getSupportSkillsDesc</span>();
        }

        <span class="hljs-comment">// 2. è·å–åŒ¹é…çš„Skillå’Œå‚æ•°</span>
        <span class="hljs-title class_">Skill</span> targetSkill = matchResult.<span class="hljs-title function_">getTargetSkill</span>();
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; params = matchResult.<span class="hljs-title function_">getParams</span>();

        <span class="hljs-comment">// 3. è°ƒç”¨Skillæ‰§è¡Œï¼Œå¹¶è¿”å›ç»“æœ</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">"åŒ¹é…åˆ°Skillï¼š%s%n"</span>, targetSkill.<span class="hljs-title function_">getSkillId</span>());
        <span class="hljs-title class_">String</span> result = targetSkill.<span class="hljs-title function_">execute</span>(params);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ‰§è¡Œç»“æœï¼š"</span> + result;
    }

    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šéœ€æ±‚ä¸SkillåŒ¹é…é€»è¾‘</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">SkillMatchResult</span> <span class="hljs-title function_">matchSkill</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userRequest</span>) {
        <span class="hljs-title class_">SkillMatchResult</span> result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillMatchResult</span>();
        <span class="hljs-comment">// æ–‡æœ¬ç¿»è¯‘éœ€æ±‚åŒ¹é…</span>
        <span class="hljs-keyword">if</span> (userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"ç¿»è¯‘"</span>) &amp;&amp; (userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"ä¸­æ–‡"</span>) || userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"è‹±æ–‡"</span>))) {
            result.<span class="hljs-title function_">setMatch</span>(<span class="hljs-literal">true</span>);
            result.<span class="hljs-title function_">setTargetSkill</span>(skillMap.<span class="hljs-title function_">get</span>(<span class="hljs-string">"text:translate"</span>));
            <span class="hljs-comment">// å°è£…å‚æ•°ï¼ˆæ¨¡æ‹Ÿè§£æç”¨æˆ·éœ€æ±‚ä¸­çš„æ–‡æœ¬å’Œç›®æ ‡è¯­è¨€ï¼‰</span>
            <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&amp;gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            params.<span class="hljs-title function_">put</span>(<span class="hljs-string">"text"</span>, userRequest.<span class="hljs-title function_">split</span>(<span class="hljs-string">"ç¿»è¯‘"</span>)[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>()); <span class="hljs-comment">// æå–éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬</span>
            params.<span class="hljs-title function_">put</span>(<span class="hljs-string">"targetLang"</span>, userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"è‹±æ–‡"</span>) ? <span class="hljs-string">"en"</span> : <span class="hljs-string">"zh"</span>);
            result.<span class="hljs-title function_">setParams</span>(params);
            <span class="hljs-keyword">return</span> result;
        }

        <span class="hljs-comment">// Excelè¯»å–éœ€æ±‚åŒ¹é…</span>
        <span class="hljs-keyword">if</span> (userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"è¯»å–"</span>) &amp;&amp; userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"Excel"</span>)) {
            result.<span class="hljs-title function_">setMatch</span>(<span class="hljs-literal">true</span>);
            result.<span class="hljs-title function_">setTargetSkill</span>(skillMap.<span class="hljs-title function_">get</span>(<span class="hljs-string">"excel:read"</span>));
            <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&amp;gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            params.<span class="hljs-title function_">put</span>(<span class="hljs-string">"filePath"</span>, <span class="hljs-string">"/data/åŠå…¬æ•°æ®.xlsx"</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿè§£ææ–‡ä»¶è·¯å¾„</span>
            result.<span class="hljs-title function_">setParams</span>(params);
            <span class="hljs-keyword">return</span> result;
        }

        <span class="hljs-comment">// PPTç”Ÿæˆéœ€æ±‚åŒ¹é…</span>
        <span class="hljs-keyword">if</span> (userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"ç”Ÿæˆ"</span>) &amp;&amp; userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"PPT"</span>)) {
            result.<span class="hljs-title function_">setMatch</span>(<span class="hljs-literal">true</span>);
            result.<span class="hljs-title function_">setTargetSkill</span>(skillMap.<span class="hljs-title function_">get</span>(<span class="hljs-string">"ppt:generate"</span>));
            <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&amp;gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            params.<span class="hljs-title function_">put</span>(<span class="hljs-string">"title"</span>, <span class="hljs-string">"åŠå…¬æ±‡æŠ¥PPT"</span>);
            params.<span class="hljs-title function_">put</span>(<span class="hljs-string">"contents"</span>, <span class="hljs-title class_">Arrays</span>.<span class="hljs-title function_">asList</span>(<span class="hljs-string">"å·¥ä½œæ¦‚è¿°"</span>, <span class="hljs-string">"æˆæœå±•ç¤º"</span>, <span class="hljs-string">"åç»­è®¡åˆ’"</span>));
            result.<span class="hljs-title function_">setParams</span>(params);
            <span class="hljs-keyword">return</span> result;
        }

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šè·å–Agentæ”¯æŒçš„Skillsæè¿°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getSupportSkillsDesc</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">StringBuilder</span> desc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">Skill</span> skill : skillMap.<span class="hljs-title function_">values</span>()) {
            desc.<span class="hljs-title function_">append</span>(skill.<span class="hljs-title function_">getSkillId</span>()).<span class="hljs-title function_">append</span>(<span class="hljs-string">"ï¼ˆ"</span>).<span class="hljs-title function_">append</span>(skill.<span class="hljs-title function_">getDescription</span>()).<span class="hljs-title function_">append</span>(<span class="hljs-string">"ï¼‰ï¼Œ"</span>);
        }
        <span class="hljs-keyword">return</span> desc.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, desc.<span class="hljs-title function_">length</span>() - <span class="hljs-number">1</span>);
    }

    <span class="hljs-comment">// è¾…åŠ©ç±»ï¼šSkillåŒ¹é…ç»“æœå°è£…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkillMatchResult</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-built_in">boolean</span> match;
        <span class="hljs-keyword">private</span> <span class="hljs-title class_">Skill</span> targetSkill;
        <span class="hljs-keyword">private</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; params;

        <span class="hljs-comment">// getter/setteræ–¹æ³•ï¼ˆç®€åŒ–ï¼Œå®é™…å¼€å‘ä¸­å¯å®Œå–„ï¼‰</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">isMatch</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> match; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setMatch</span>(<span class="hljs-params"><span class="hljs-built_in">boolean</span> match</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">match</span> = match; }
        <span class="hljs-keyword">public</span> <span class="hljs-title class_">Skill</span> <span class="hljs-title function_">getTargetSkill</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> targetSkill; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setTargetSkill</span>(<span class="hljs-params">Skill targetSkill</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetSkill</span> = targetSkill; }
        <span class="hljs-keyword">public</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; <span class="hljs-title function_">getParams</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> params; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setParams</span>(<span class="hljs-params"><span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Object</span>&gt; params</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span> = params; }
    }

    <span class="hljs-comment">// æµ‹è¯•æ–¹æ³•ï¼šè¿è¡ŒAgentï¼Œæ¨¡æ‹Ÿç”¨æˆ·éœ€æ±‚</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-comment">// 1. åŠ è½½3ä¸ªæ ¸å¿ƒSkills</span>
        <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Skill</span>&gt; skillList = <span class="hljs-title class_">Arrays</span>.<span class="hljs-title function_">asList</span>(
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextTranslateSkill</span>(),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExcelReadSkill</span>(),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">PptGenerateSkill</span>()
        );

        <span class="hljs-comment">// 2. åˆ›å»ºåŠå…¬Agent</span>
        <span class="hljs-title class_">OfficeAgent</span> officeAgent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OfficeAgent</span>(<span class="hljs-string">"å¤šåŠŸèƒ½åŠå…¬Agent"</span>, skillList);

        <span class="hljs-comment">// 3. æ¨¡æ‹Ÿ3ä¸ªä¸åŒçš„ç”¨æˆ·éœ€æ±‚ï¼Œæµ‹è¯•Agentæ‰§è¡Œæ•ˆæœ</span>
        <span class="hljs-title class_">String</span> request1 = <span class="hljs-string">"å¸®æˆ‘ç¿»è¯‘è¿™å¥è¯ï¼šAIæŠ€èƒ½æ¨¡å—å¾ˆå®ç”¨ï¼Œç›®æ ‡è¯­è¨€æ˜¯è‹±æ–‡"</span>;
        <span class="hljs-title class_">String</span> request2 = <span class="hljs-string">"å¸®æˆ‘è¯»å–Excelæ–‡ä»¶ä¸­çš„æ•°æ®"</span>;
        <span class="hljs-title class_">String</span> request3 = <span class="hljs-string">"å¸®æˆ‘ç”Ÿæˆä¸€ä»½åŠå…¬æ±‡æŠ¥PPT"</span>;

        <span class="hljs-comment">// 4. æ‰§è¡Œéœ€æ±‚å¹¶è¾“å‡ºç»“æœ</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(officeAgent.<span class="hljs-title function_">processRequest</span>(request1));
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(officeAgent.<span class="hljs-title function_">processRequest</span>(request2));
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(officeAgent.<span class="hljs-title function_">processRequest</span>(request3));
    }
}
    
</code></pre>
<h4 data-id="heading-15">3. æ‰§è¡Œç»“æœä¸è§£æ</h4>
<p>è¿è¡ŒAgentçš„mainæ–¹æ³•ï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼ˆæ¸…æ™°å±•ç¤ºSkillsåŠ è½½ã€éœ€æ±‚åŒ¹é…ã€æ‰§è¡Œç»“æœçš„å®Œæ•´æµç¨‹ï¼‰ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">
<span class="hljs-section">AgentåŠ è½½Skillï¼štext:translateï¼ˆç”¨äºæ–‡æœ¬ç¿»è¯‘ï¼Œæ”¯æŒä¸­æ–‡ä¸è‹±æ–‡äº’è¯‘ï¼Œè¾“å…¥æ–‡æœ¬å’Œç›®æ ‡è¯­è¨€ï¼Œè¿”å›ç¿»è¯‘ç»“æœï¼‰</span>
<span class="hljs-section">AgentåŠ è½½Skillï¼šexcel:readï¼ˆç”¨äºè¯»å–Excelæ–‡ä»¶æ•°æ®ï¼Œè¾“å…¥æ–‡ä»¶è·¯å¾„ï¼Œè¿”å›æ–‡ä»¶ä¸­çš„æ•°æ®æ¡æ•°å’Œå‰3æ¡æ•°æ®é¢„è§ˆï¼‰</span>
<span class="hljs-section">AgentåŠ è½½Skillï¼šppt:generateï¼ˆç”¨äºç”ŸæˆåŠå…¬æ±‡æŠ¥PPTï¼Œè¾“å…¥æ ‡é¢˜å’Œæ¯é¡µå†…å®¹ï¼Œè¿”å›PPTç”Ÿæˆç»“æœå’Œä¿å­˜è·¯å¾„ï¼‰</span>

ç”¨æˆ·éœ€æ±‚ï¼šå¸®æˆ‘ç¿»è¯‘è¿™å¥è¯ï¼šAIæŠ€èƒ½æ¨¡å—å¾ˆå®ç”¨ï¼Œç›®æ ‡è¯­è¨€æ˜¯è‹±æ–‡
<span class="hljs-section">åŒ¹é…åˆ°Skillï¼štext:translate</span>
<span class="hljs-section">æ‰§è¡Œç»“æœï¼šç¿»è¯‘æˆåŠŸï¼šTranslated: AIæŠ€èƒ½æ¨¡å—å¾ˆå®ç”¨</span>

ç”¨æˆ·éœ€æ±‚ï¼šå¸®æˆ‘è¯»å–Excelæ–‡ä»¶ä¸­çš„æ•°æ®
<span class="hljs-section">åŒ¹é…åˆ°Skillï¼šexcel:read</span>
æ‰§è¡Œç»“æœï¼šExcelè¯»å–æˆåŠŸï¼æ–‡ä»¶è·¯å¾„ï¼š/data/åŠå…¬æ•°æ®.xlsxï¼Œå…±50æ¡æ•°æ®ï¼Œå‰3æ¡é¢„è§ˆï¼šç¬¬1æ¡ï¼šå¼ ä¸‰,25,å·¥ç¨‹å¸ˆï¼›ç¬¬2æ¡ï¼šæå››,28,äº§å“ç»ç†ï¼›ç¬¬3æ¡ï¼šç‹äº”,30,è®¾è®¡å¸ˆ

ç”¨æˆ·éœ€æ±‚ï¼šå¸®æˆ‘ç”Ÿæˆä¸€ä»½åŠå…¬æ±‡æŠ¥PPT
<span class="hljs-section">åŒ¹é…åˆ°Skillï¼šppt:generate</span>
æ‰§è¡Œç»“æœï¼šPPTç”ŸæˆæˆåŠŸï¼æ ‡é¢˜ï¼šåŠå…¬æ±‡æŠ¥PPTï¼Œå…±3é¡µï¼Œä¿å­˜è·¯å¾„ï¼š/data/ppt/åŠå…¬æ±‡æŠ¥PPT.pptx
</code></pre>
<p>è§£æï¼šAgentæˆåŠŸåŠ è½½3ä¸ªSkillsï¼Œæ ¹æ®ç”¨æˆ·éœ€æ±‚è‡ªä¸»åŒ¹é…å¯¹åº”Skillï¼Œè°ƒç”¨æ‰§è¡Œåè¿”å›æ¸…æ™°ç»“æœï¼Œå®Œå…¨ç¬¦åˆåŠå…¬åœºæ™¯çš„å®é™…éœ€æ±‚ï¼›è‹¥ç”¨æˆ·è¾“å…¥æœªè¯†åˆ«çš„éœ€æ±‚ï¼ŒAgentä¼šè¿”å›æ”¯æŒçš„åŠŸèƒ½åˆ—è¡¨ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-16">å››ã€Skillsè¿›é˜¶æŠ€å·§ï¼šä»åŸºç¡€ä½¿ç”¨åˆ°é«˜çº§åº”ç”¨</h3>
<p>æŒæ¡åŸºç¡€çš„Skillså¼€å‘åï¼Œå¯é€šè¿‡ä»¥ä¸‹è¿›é˜¶æŠ€å·§ï¼Œè¿›ä¸€æ­¥æå‡Skillsçš„çµæ´»æ€§ã€å¯æ‰©å±•æ€§ï¼Œé€‚é…æ›´å¤æ‚çš„Agentåœºæ™¯ï¼Œæ‰“é€ æ›´å¼ºå¤§çš„æ™ºèƒ½ä½“ã€‚</p>
<h4 data-id="heading-17">1. Skillsç»„åˆï¼šå®ç°å¤æ‚åŠŸèƒ½æ‹†è§£ä¸å¤ç”¨</h4>
<p>å•ä¸€Skillsä»…èƒ½å®ç°ç®€å•åŠŸèƒ½ï¼Œé€šè¿‡Skillsç»„åˆï¼Œå¯æ‹†è§£å¤æ‚ä¸šåŠ¡éœ€æ±‚ï¼Œå®ç°â€œ1+1&gt;2â€çš„æ•ˆæœï¼Œä¸”ç»„åˆåçš„é€»è¾‘å¯å¤ç”¨ï¼Œæ— éœ€é‡å¤å¼€å‘ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®ç°â€œè‡ªåŠ¨åŒ–æ•°æ®åˆ†ææŠ¥å‘Šâ€åŠŸèƒ½ï¼Œç»„åˆ3ä¸ªSkillsï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨excel:readï¼ˆExcelè¯»å–Skillï¼‰ï¼Œè¯»å–æ•°æ®æºæ–‡ä»¶ï¼›</li>
<li>ç¬¬äºŒæ­¥ï¼šè°ƒç”¨data:statisticï¼ˆæ•°æ®ç»Ÿè®¡Skillï¼‰ï¼Œå¯¹è¯»å–çš„æ•°æ®è¿›è¡Œç»Ÿè®¡ï¼ˆæ±‚å’Œã€å¹³å‡å€¼ã€å æ¯”ï¼‰ï¼›</li>
<li>ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨doc:generateï¼ˆæ–‡æ¡£ç”ŸæˆSkillï¼‰ï¼Œå°†ç»Ÿè®¡ç»“æœç”Ÿæˆæ•°æ®åˆ†ææŠ¥å‘Šã€‚</li>
</ul>
<p>å¯å°è£…ä¸€ä¸ªâ€œç»„åˆSkillâ€ï¼Œå°†ä¸Šè¿°æµç¨‹å›ºåŒ–ï¼ŒAgentè°ƒç”¨è¯¥ç»„åˆSkillå³å¯ç›´æ¥å®Œæˆå¤æ‚åŠŸèƒ½ï¼Œä»£ç å¤ç”¨æ€§å¤§å¹…æå‡ã€‚</p>
<h4 data-id="heading-18">2. åŠ¨æ€åŠ è½½ä¸å¸è½½ï¼šä¼˜åŒ–Agentæ€§èƒ½</h4>
<p>Agentæ— éœ€ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰Skillsï¼Œå¯æ ¹æ®ç”¨æˆ·éœ€æ±‚ã€ä½¿ç”¨åœºæ™¯ï¼ŒåŠ¨æ€åŠ è½½æ‰€éœ€Skillsï¼Œä½¿ç”¨å®Œæˆåå¸è½½ï¼Œå‡å°‘å†…å­˜å ç”¨ï¼Œä¼˜åŒ–Agentæ€§èƒ½ã€‚</p>
<p>ç¤ºä¾‹ï¼šåŠå…¬Agentåœ¨å·¥ä½œæ—¥åŠ è½½â€œExcelè¯»å–â€â€œPPTç”Ÿæˆâ€ç­‰åŠå…¬Skillsï¼Œåœ¨èŠ‚å‡æ—¥åŠ è½½â€œèŠ‚æ—¥ç¥ç¦ç”Ÿæˆâ€â€œæ—¥ç¨‹æé†’â€ç­‰Skillsï¼Œé€šè¿‡åŠ¨æ€åŠ è½½å®ç°èµ„æºä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-19">3. Skillsç‰ˆæœ¬ç®¡ç†ï¼šé€‚é…è¿­ä»£ä¸å…¼å®¹æ€§</h4>
<p>éšç€ä¸šåŠ¡éœ€æ±‚è¿­ä»£ï¼ŒSkillsä¹Ÿéœ€è¦ä¸æ–­ä¼˜åŒ–å‡çº§ï¼Œä¸ºé¿å…å‡çº§åå½±å“Agentè°ƒç”¨ï¼Œéœ€åšå¥½ç‰ˆæœ¬ç®¡ç†ï¼Œå»ºè®®åœ¨SkillIdä¸­æ·»åŠ ç‰ˆæœ¬å·ï¼ˆå¦‚text:translate:v2ï¼‰ã€‚</p>
<p>æ ¸å¿ƒè¦ç‚¹ï¼šæ–°ç‰ˆæœ¬Skillså…¼å®¹æ—§ç‰ˆæœ¬å‚æ•°ï¼Œæ—§ç‰ˆæœ¬Skillsæš‚æ—¶ä¿ç•™ï¼ˆé€æ­¥æ·˜æ±°ï¼‰ï¼ŒAgentå¯æ ¹æ®éœ€æ±‚é€‰æ‹©è°ƒç”¨å¯¹åº”ç‰ˆæœ¬çš„Skillsï¼Œé¿å…è¿­ä»£å¯¼è‡´çš„è°ƒç”¨å¤±è´¥ã€‚</p>
<h4 data-id="heading-20">4. å¤–éƒ¨APIé›†æˆï¼šæ‰©å±•Skillsèƒ½åŠ›è¾¹ç•Œ</h4>
<p>Skillså¯é›†æˆå¤–éƒ¨APIï¼ˆå¦‚ç¿»è¯‘APIã€åœ°å›¾APIã€æ”¯ä»˜APIï¼‰ï¼Œæ‰©å±•è‡ªèº«èƒ½åŠ›è¾¹ç•Œï¼Œæ— éœ€é‡å¤å¼€å‘å¤æ‚é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œæ–‡æœ¬ç¿»è¯‘Skillå¯é›†æˆç™¾åº¦ç¿»è¯‘APIï¼Œå®ç°æ›´ç²¾å‡†çš„å¤šè¯­è¨€ç¿»è¯‘ï¼›åœ°å›¾Skillå¯é›†æˆé«˜å¾·åœ°å›¾APIï¼Œå®ç°åœ°ç†ä½ç½®æŸ¥è¯¢ã€‚</p>
<p>é¿å‘æé†’ï¼šé›†æˆå¤–éƒ¨APIæ—¶ï¼Œéœ€æ·»åŠ è¶…æ—¶é‡è¯•ã€å¼‚å¸¸æ•è·é€»è¾‘ï¼Œé¿å…APIè°ƒç”¨å¤±è´¥å¯¼è‡´Skillsæ‰§è¡Œå´©æºƒï¼›åŒæ—¶åšå¥½APIå¯†é’¥ç®¡ç†ï¼Œé¿å…æ³„éœ²ã€‚</p>
<h3 data-id="heading-21">äº”ã€Skillsé«˜é¢‘é¿å‘æŒ‡å—ï¼šé¿å¼€è¿™äº›å¼€å‘é™·é˜±</h3>
<p>ç»“åˆå¤§é‡å®æˆ˜ç»éªŒï¼Œæ¢³ç†å¼€å‘è€…åœ¨Skillså¼€å‘ã€ä½¿ç”¨è¿‡ç¨‹ä¸­çš„é«˜é¢‘å‘ç‚¹ï¼Œé™„ä¸Šå…·ä½“è§„é¿æ–¹æ¡ˆï¼Œé¿å…è¸©å‘æµªè´¹å¼€å‘æ—¶é—´ï¼Œæå‡Skillsè´¨é‡å’ŒAgentç¨³å®šæ€§ã€‚</p>
<h4 data-id="heading-22">å‘ç‚¹1ï¼šSkillsåŠŸèƒ½å†—ä½™ï¼Œè¿èƒŒå•ä¸€èŒè´£åŸåˆ™</h4>
<p><strong>ç°è±¡</strong>ï¼šä¸€ä¸ªSkillå®ç°å¤šä¸ªåŠŸèƒ½ï¼ˆå¦‚â€œExcelè¯»å–+æ•°æ®ç»Ÿè®¡+æŠ¥å‘Šç”Ÿæˆâ€ï¼‰ï¼Œå¯¼è‡´ä»£ç è‡ƒè‚¿ã€éš¾ä»¥ç»´æŠ¤ã€å¤ç”¨æ€§å·®ï¼ŒAgentè°ƒç”¨æ—¶å®¹æ˜“å‡ºç°å¼‚å¸¸ã€‚</p>
<p><strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼šä¸¥æ ¼éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œä¸€ä¸ªSkillä»…å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼Œå¤æ‚åŠŸèƒ½æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹Skillsï¼Œé€šè¿‡ç»„åˆå®ç°ï¼Œç¡®ä¿æ¯ä¸ªSkillç®€æ´ã€å¯ç»´æŠ¤ã€‚</p>
<h4 data-id="heading-23">å‘ç‚¹2ï¼šå‚æ•°è®¾è®¡æ··ä¹±ï¼Œæ— æ ¡éªŒã€æ— é»˜è®¤å€¼</h4>
<p><strong>ç°è±¡</strong>ï¼šå‚æ•°è¿‡å¤šã€å†—ä½™ï¼Œæ— æ˜ç¡®è¯´æ˜ï¼Œç¼ºå°‘å‚æ•°æ ¡éªŒï¼Œéå¿…å¡«å‚æ•°æ— é»˜è®¤å€¼ï¼Œå¯¼è‡´Agentè°ƒç”¨æ—¶é¢‘ç¹å‡ºç°å‚æ•°é”™è¯¯ï¼Œè°ƒè¯•æˆæœ¬é«˜ã€‚</p>
<p><strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼šéµå¾ªâ€œæœ€å°å¿…è¦åŸåˆ™â€è®¾è®¡å‚æ•°ï¼Œæ·»åŠ å‚æ•°è¯´æ˜ï¼ˆgetParamDescæ–¹æ³•ï¼‰ï¼Œå®ç°å‚æ•°æ ¡éªŒé€»è¾‘ï¼Œéå¿…å¡«å‚æ•°è®¾ç½®åˆç†é»˜è®¤å€¼ï¼Œå¼‚å¸¸æ—¶è¿”å›æ¸…æ™°çš„é”™è¯¯æç¤ºã€‚</p>
<h4 data-id="heading-24">å‘ç‚¹3ï¼šå¿½è§†å¼‚å¸¸æ•è·ï¼Œå¯¼è‡´Agentå´©æºƒ</h4>
<p><strong>ç°è±¡</strong>ï¼šSkillsæ‰§è¡Œè¿‡ç¨‹ä¸­æœªå…¨é¢æ•è·å¼‚å¸¸ï¼ˆå¦‚æ–‡ä»¶ä¸å­˜åœ¨ã€APIè°ƒç”¨è¶…æ—¶ã€å‚æ•°æ ¼å¼é”™è¯¯ï¼‰ï¼Œç›´æ¥æŠ›å‡ºæœªæ•è·å¼‚å¸¸ï¼Œå¯¼è‡´Agentå´©æºƒï¼Œå½±å“æ•´ä½“ä½¿ç”¨ã€‚</p>
<p><strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼šåœ¨executeæ–¹æ³•ä¸­æ·»åŠ try-catchæ•è·æ‰€æœ‰å¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œè¿”å›æ¸…æ™°çš„é”™è¯¯æç¤ºï¼Œä¾¿äºAgentåˆ¤æ–­æ˜¯å¦é‡è¯•ã€å¦‚ä½•è°ƒæ•´ç­–ç•¥ï¼Œç¦æ­¢ç›´æ¥æŠ›å‡ºæœªæ•è·å¼‚å¸¸ã€‚</p>
<h4 data-id="heading-25">å‘ç‚¹4ï¼šSkillså‘½åæ¨¡ç³Šï¼ŒAgentæ— æ³•ç²¾å‡†åŒ¹é…</h4>
<p><strong>ç°è±¡</strong>ï¼šSkillså‘½åæ¨¡ç³Šï¼ˆå¦‚MySkillã€Skill2ï¼‰ï¼ŒAgentæ— æ³•æ ¹æ®ç”¨æˆ·éœ€æ±‚ç²¾å‡†åŒ¹é…å¯¹åº”Skillï¼Œå¯¼è‡´åŠŸèƒ½æ‰§è¡Œå¤±è´¥ï¼Œç”¨æˆ·ä½“éªŒå·®ã€‚</p>
<p><strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼šä¸¥æ ¼éµå¾ªå‘½åè§„èŒƒï¼Œé‡‡ç”¨â€œåŠŸèƒ½ç±»å‹+å…·ä½“æ“ä½œâ€çš„æ ¼å¼ï¼Œè¯­ä¹‰æ¸…æ™°ï¼Œè®©Agentå’Œå¼€å‘è€…èƒ½å¿«é€Ÿè¯†åˆ«SkillåŠŸèƒ½ï¼Œæå‡åŒ¹é…å‡†ç¡®ç‡ã€‚</p>
<h4 data-id="heading-26">å‘ç‚¹5ï¼šSkillsæ— å¤ç”¨æ€§ï¼Œé‡å¤å¼€å‘</h4>
<p><strong>ç°è±¡</strong>ï¼šä¸åŒAgentä¸­å®ç°ç›¸åŒåŠŸèƒ½çš„Skillsï¼Œæ¥å£ä¸ç»Ÿä¸€ã€é€»è¾‘ä¸é€šç”¨ï¼Œå¯¼è‡´é‡å¤å¼€å‘ï¼Œç»´æŠ¤æˆæœ¬é«˜ï¼Œä¸ç¬¦åˆSkillsçš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<p><strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼šéµå¾ªç»Ÿä¸€çš„æ¥å£è§„èŒƒã€å‘½åè§„èŒƒã€å‚æ•°è§„èŒƒå¼€å‘Skillsï¼Œæ‰“é€ å¯å¤ç”¨çš„Skillsç»„ä»¶åº“ï¼Œä¸åŒAgentå¯ç›´æ¥å¤ç”¨ï¼Œå‡å°‘é‡å¤å¼€å‘æˆæœ¬ã€‚</p>
<h3 data-id="heading-27">å…­ã€æ€»ç»“ï¼šSkillsæ˜¯AI Agentè§„æ¨¡åŒ–è½åœ°çš„å…³é”®</h3>
<p>AI Agentçš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œä¸åœ¨äºâ€œèƒ½è‡ªä¸»å†³ç­–â€ï¼Œè€Œåœ¨äºâ€œèƒ½é«˜æ•ˆå®Œæˆå…·ä½“ä»»åŠ¡â€â€”â€”è€ŒSkillsï¼Œæ­£æ˜¯è®©Agentå…·å¤‡â€œå®Œæˆä»»åŠ¡èƒ½åŠ›â€çš„æ ¸å¿ƒè½½ä½“ã€‚ä»MCPçš„é‡å†·åˆ°Skillsçš„å´›èµ·ï¼Œæœ¬è´¨æ˜¯AIå¼€å‘ä»â€œè¿½æ±‚é€šç”¨â€åˆ°â€œå›å½’å®ç”¨â€çš„è½¬å˜ï¼ŒSkillsçš„è½»é‡ã€é«˜æ•ˆã€å¯å¤ç”¨ï¼Œå®Œç¾å¥‘åˆäº†Agentè§„æ¨¡åŒ–è½åœ°çš„éœ€æ±‚ã€‚</p>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼ŒæŒæ¡Skillsçš„è®¾è®¡è§„èŒƒã€å®æˆ˜æŠ€å·§ä¸é¿å‘è¦ç‚¹ï¼Œä¸ä»…èƒ½æå‡Agentå¼€å‘æ•ˆç‡ã€é™ä½ç»´æŠ¤æˆæœ¬ï¼Œæ›´èƒ½æ‰“é€ å‡ºä½“éªŒæ›´ä¼˜ã€èƒ½åŠ›æ›´å¼ºçš„æ™ºèƒ½ä½“äº§å“ã€‚æœªæ¥ï¼Œéšç€AI Agentçš„æ™®åŠï¼Œé«˜è´¨é‡çš„Skillsç»„ä»¶åº“å°†æˆä¸ºå¼€å‘è€…çš„â€œæ ¸å¿ƒèµ„äº§â€ï¼Œè€Œéµå¾ªè§„èŒƒã€èšç„¦å®ç”¨ï¼Œæ­£æ˜¯æ‰“é€ ä¼˜ç§€Skillsçš„å…³é”®ã€‚</p>
<p>æ— è®ºæ˜¯åŠå…¬è‡ªåŠ¨åŒ–ã€å®¢æœæ¥å¾…ï¼Œè¿˜æ˜¯å·¥ä¸šè´¨æ£€ã€æ™ºèƒ½è¿ç»´ï¼ŒSkillséƒ½èƒ½æˆä¸ºAgentçš„â€œå¾—åŠ›åŠ©æ‰‹â€ï¼Œè®©AIçœŸæ­£èµ°å‡ºâ€œæ¦‚å¿µâ€ï¼Œè½åœ°åˆ°æ¯ä¸€ä¸ªå®é™…åœºæ™¯ä¸­ï¼Œä¸ºå¼€å‘è€…å‡è´Ÿï¼Œä¸ºç”¨æˆ·åˆ›é€ ä»·å€¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ 2025 å¹´ç»ˆæ€»ç»“ã€‘è¢«æ¨ç€èµ°çš„ä¸€å¹´ï¼Œéœ€è¦åœä¸‹æ¥æ€è€ƒ]]></title>    <link>https://juejin.cn/post/7603004323870326827</link>    <guid>https://juejin.cn/post/7603004323870326827</guid>    <pubDate>2026-02-05T01:12:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603004323870326827" data-draft-id="7602814773497331754" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ 2025 å¹´ç»ˆæ€»ç»“ã€‘è¢«æ¨ç€èµ°çš„ä¸€å¹´ï¼Œéœ€è¦åœä¸‹æ¥æ€è€ƒ"/> <meta itemprop="keywords" content="å¹´ç»ˆæ€»ç»“,Trae"/> <meta itemprop="datePublished" content="2026-02-05T01:12:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ«æƒ¹CC"/> <meta itemprop="url" content="https://juejin.cn/user/4095037267779687"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ 2025 å¹´ç»ˆæ€»ç»“ã€‘è¢«æ¨ç€èµ°çš„ä¸€å¹´ï¼Œéœ€è¦åœä¸‹æ¥æ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4095037267779687/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ«æƒ¹CC
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T01:12:39.000Z" title="Thu Feb 05 2026 01:12:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#444;background-image:linear-gradient(90deg,rgba(59,59,59,.1) 3%,transparent 0),linear-gradient(1turn,rgba(122,120,121,.1) 3%,transparent 0);background-size:30px 30px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:34px;margin-bottom:16px;font-weight:700;line-height:1.3;cursor:text;color:#444;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body h1{font-size:41px;margin-bottom:34px;line-height:1.5}.markdown-body h1:before{content:""}.markdown-body h2{font-size:30px;padding-left:.4em;border-left:.4em solid #5e5e5e;border-bottom:1px solid #444}.markdown-body h2:after{content:"ğŸ•›";position:absolute;top:0;right:0;transition:all;animation:rotate 10s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.markdown-body h3{border-left:.4em solid #8d8d8d;font-size:24px;padding-left:.4em}.markdown-body h4{font-size:20px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:14px}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body table,.markdown-body ul{margin:.8em 0}.markdown-body strong{font-weight:1000;position:relative;color:#444;padding:0 3px}.markdown-body em{font-weight:inherit}.markdown-body a{box-sizing:border-box;color:grey;position:relative}.markdown-body a:before{position:absolute;box-sizing:border-box;content:"Go -&gt;";left:0;width:100%;max-width:0;color:#fff;background-color:hsla(0,0%,50.2%,.8);white-space:nowrap;transition:.2s ease;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background-color:grey}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:100%;padding-left:8px;border-radius:5px}.markdown-body hr{position:relative;width:100%;height:1px;border:none;margin-top:36px;margin-bottom:36px;background:linear-gradient(90deg,grey,#f1f1f1,#444,#444,#f1f1f1,grey);overflow:visible}.markdown-body ol,.markdown-body ul{padding-left:32px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol{counter-reset:my-counter}.markdown-body ol&gt;li{padding-left:6px;list-style:none;counter-increment:my-counter;position:relative}.markdown-body ol&gt;li:before{position:absolute;left:-1.5em;content:counter(my-counter);font-weight:700}.markdown-body ol&gt;li:first-child:before{content:"1ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(2):before{content:"2ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(3):before{content:"3ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(4):before{content:"4ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(5):before{content:"5ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(6):before{content:"6ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(7):before{content:"7ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(8):before{content:"8ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(9):before{content:"9ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(10):before{content:"ğŸ”Ÿ"}.markdown-body ul&gt;li{list-style:none;position:relative}.markdown-body ul&gt;li:before{z-index:10;position:absolute;left:-1.57em;content:"ğŸ”¹";margin-right:12px}.markdown-body ul&gt;li input{margin-left:8px!important}.markdown-body blockquote{position:relative;background-color:#d3d3d3;padding:5px 10px;border-left:.2em solid #000;border-radius:3px;transition:all .8s ease}.markdown-body blockquote:hover{opacity:.7}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(69,69,77,.8);color:#fff;font-size:.87em;padding:.07em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:7px;overflow:hidden}.markdown-body pre:before{z-index:10;position:absolute;top:14px;left:14px;width:12px;height:12px;border-radius:50%;background:#fc625d;-webkit-box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;content:" "}.markdown-body pre:after{z-index:9;content:"";position:absolute;width:100%;height:40px;top:0;background-color:#1a1a1a}.markdown-body pre&gt;code{display:block;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#171717;color:#bababa;font-size:14px;padding:40px 20px 20px}.markdown-body del{color:grey}.markdown-body table{margin-bottom:1.25rem;border-collapse:collapse}.markdown-body table td,.markdown-body table th{margin:0;padding:8px;line-height:20px;vertical-align:middle;border:1px solid #ddd}.markdown-body table thead,.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table thead th,.markdown-body table tr:nth-child(2n) th{font-weight:700;vertical-align:middle;color:#444}.markdown-body table tbody tr td{font-weight:400;color:#444}.markdown-body table tbody tr:hover{background-color:#d3d3d3}.markdown-body table tbody tr:hover td{color:#fff}.markdown-body img{max-width:100%;margin:0 12px}@media (max-width:720px){.markdown-body h1{font-size:32.8px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="hybrid">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1d1f21}.hljs::selection,.hljs span::selection{background:#373b41}.hljs::-moz-selection,.hljs span::-moz-selection{background:#373b41}.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#c5c8c6}.hljs-name,.hljs-title{color:#f0c674}.hljs-comment,.hljs-meta,.hljs-meta .hljs-keyword{color:#707880}.hljs-deletion,.hljs-link,.hljs-literal,.hljs-number,.hljs-symbol{color:#c66}.hljs-addition,.hljs-doctag,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string{color:#b5bd68}.hljs-attribute,.hljs-code,.hljs-selector-id{color:#b294bb}.hljs-bullet,.hljs-keyword,.hljs-selector-tag,.hljs-tag{color:#81a2be}.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-variable{color:#8abeb7}.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-selector-class,.hljs-type{color:#de935f}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”Ÿæ´»ä»ä¸æŒ‰è®¡åˆ’</h2>
<p>ä» 2025 å¹´åº•å¼€å§‹è§„åˆ’ï¼Œä¸€ç›´åˆ° 2026 å¹´ 2 æœˆçš„ä¸€å¤©æ·±å¤œï¼Œæˆ‘æ‰çœŸæ­£å¼€å§‹åŠ¨ç¬”ã€‚ç¬¬ä¸‰å¹´å†™å¹´ç»ˆæ€»ç»“â€”æŒ‰å››èˆäº”å…¥çš„ç®—æ³•ï¼Œä¹Ÿç®—æ˜¯å·¥ä½œçš„ç¬¬ä¸‰å¹´ã€‚</p>
<p>å›çœ‹ 2024 å¹´ç«‹ä¸‹çš„ Flagï¼Œæœ€æ¥è¿‘â€œå®Œæˆâ€çš„ï¼Œç«Ÿç„¶è¿˜æ˜¯ã€ŒæŒç»­è¾“å‡ºåšå®¢ã€ã€‚å…¶ä»–çš„è®¡åˆ’ï¼Œä¸æ˜¯æ²¡å¼€å§‹ï¼Œå°±æ˜¯è¢«ç°å®æŒ¤åˆ°è§’è½é‡Œï¼šè½¬äº§å“å¸¦æ¥çš„èŠ‚å¥å˜åŒ–ã€AI å‘å±•å¸¦æ¥çš„è®¤çŸ¥åˆ·æ–°ã€ä»¥åŠå·¥ä½œå¼ºåº¦å¯¹ç”Ÿæ´»ç©ºé—´çš„åå™¬ï¼Œéƒ½åœ¨ä¸€ç‚¹ç‚¹æ”¹å†™æˆ‘åŸæœ¬çš„è®¾æƒ³ã€‚</p>
<p>æ‰€ä»¥ä»Šå¹´æˆ‘ä¸ç«‹é‚£ç§æ¼‚äº®çš„ Flag äº†ã€‚2026 å¹´åªå®šå‡ ä¸ªå¤§æ–¹å‘ï¼šæŠŠèŠ‚å¥æ‰¾å›æ¥ï¼ŒæŠŠèº«ä½“æ‹‰å›æ­£è½¨ï¼ŒæŠŠæ³¨æ„åŠ›æ”¾åœ¨çœŸæ­£ä¼šå¤åˆ©çš„äº‹ä¸Šã€‚</p>
<h2 data-id="heading-1">å†™åšå®¢å¸¦æ¥çš„æ­£å‘åé¦ˆ</h2>
<p>è½¬äº§å“ä¹‹åï¼Œæˆ‘æœ¬æ¥æ‰“ç®—æŠŠæŠ€æœ¯åšå®¢æ…¢æ…¢é™é¢‘ã€‚ä¸æ˜¯ä¸å–œæ¬¢å†™ï¼Œè€Œæ˜¯è§‰å¾—å·¥ä½œä¹‹å¤–çš„ç²¾åŠ›åº”è¯¥æ›´å¤šæŠ•å‘äº§å“ç›¸å…³çš„è¾“å…¥è¾“å‡ºã€‚ä½† 3 æœˆä»½ï¼Œæˆ‘æ”¶åˆ°äº†ä¸€ä¸ªè¯»è€…å‘æ¥çš„é‚®ä»¶ã€‚é‚£ä¸€ç¬é—´å¾ˆå¥‡å¦™ï¼šä½ ä»¥ä¸ºè‡ªå·±åœ¨å¯¹ç€ç©ºæ°”è®²è¯ï¼Œçªç„¶æœ‰äººä»å¾ˆè¿œçš„åœ°æ–¹èµ°è¿‡æ¥ï¼Œè®¤çœŸåœ°å‘Šè¯‰ä½ ï¼š<strong>ä½ å†™çš„ä¸œè¥¿ï¼ŒçœŸçš„å¸®åˆ°æˆ‘äº†ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3a7afcc3cb0430b978d28db9014f658~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=nMHrvLat5GMPWXuWNxVMUmwkoIk%3D" alt="1.png" loading="lazy"/></p>
<p>äºæ˜¯å³ä½¿åé¢å¿™åˆ°çˆ†ç‚¸ï¼Œæˆ‘ä¾æ—§åœ¨æŒ¤æ—¶é—´æ›´æ–°ã€‚æ›´æ–°é¢‘ç‡è™½ç„¶ä¸ç®—å¤¸å¼ ï¼Œä½†åŸºæœ¬ç»´æŒäº†â€œæ¯æœˆéƒ½æœ‰åŠ¨é™â€çš„çŠ¶æ€ï¼Œä¹Ÿé¡ºå¸¦æŠŠå›½å†…å‡ å¤§ä¸»æµæŠ€æœ¯ç¤¾åŒºçš„ã€Œä¸“å®¶åšä¸»ã€ä¹‹ç±»è®¤è¯æ”¶é›†é½äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8eb9a394e304f658ca66c5897ab4081~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=PTkjb%2BL0dxLmMfbee49L7%2FFi1L8%3D" alt="2.png" loading="lazy"/></p>
<p>å¦å¤–ï¼Œé â€œç¬”æ†å­â€æ¥åˆ°äº†è‡ªå·±çš„ç¬¬ä¸€ä¸ªæ¨å¹¿åˆä½œã€‚é’±ä¸å¤šï¼Œä½†æ„ä¹‰å¯¹æˆ‘æ¥è¯´å¾ˆé‡ï¼š<strong>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ„Ÿå—åˆ°ï¼Œè¾“å‡ºä¸åªæ˜¯ä¸€ç§è‡ªæˆ‘è®°å½•ï¼Œå®ƒä¹Ÿèƒ½åœ¨ç°å®é‡Œè¢«äº¤æ¢ã€è¢«è®¤å¯ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea7713d3e8b348b9940ff3d096895f4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=vUMndRtDqqzIVuAqfqoX%2BovYleI%3D" alt="3.png" loading="lazy"/></p>
<p>ä¸è¿‡æˆ‘ä¹Ÿå¾—è¯šå®åœ°è®²ï¼š2026 å¹´æŠ€æœ¯åšå®¢æ›´æ–°é¢‘ç‡å¤§æ¦‚ç‡ä¼šæ›´ä½ä¸€ç‚¹ã€‚ä¸æ˜¯ä¸å†™ï¼Œè€Œæ˜¯æˆ‘ç¡®å®éœ€è¦æŠŠæ›´å¤šç²¾åŠ›æŠ•å‘å½“ä¸‹çš„æœ¬èŒèƒ½åŠ›â€”â€”å°¤å…¶æ˜¯äº§å“èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-2">è¢« Trae å®˜æ–¹é‡‡è®¿</h2>
<p>3 æœˆå‚åŠ äº†ä¸€åœºé»‘å®¢æ¾ï¼Œç”¨çš„æ˜¯ Traeã€‚è™½ç„¶æ²¡æ‹¿ä¸Šåæ¬¡ï¼Œä½†ä½œå“æœ¬èº«æœ‰å¯åœˆå¯ç‚¹çš„åœ°æ–¹ï¼Œæ‰€ä»¥å¾ˆè£å¹¸è¢« Trae å®˜æ–¹é‡‡è®¿ï¼Œæœ€åä¸Šäº†ä»–ä»¬çš„å…¬ä¼—å·ã€‚</p>
<p>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡åœ¨â€œåšå®¢ä»¥å¤–â€çš„åœ°æ–¹è¡¨è¾¾è‡ªå·±ï¼Œä¹Ÿç¬¬ä¸€æ¬¡æŠŠä¸€äº›äº§å“è§‚è®²å¾—æ›´å…¬å¼€ã€‚ç°åœ¨å›çœ‹ï¼Œé‚£äº›è§‚ç‚¹ç¡®å®è¿˜æœ‰äº›ç¨šå«©ï¼Œä½†æˆ‘åè€Œæ›´èƒ½æ¥å—è¿™ç§ç¨šå«©ï¼šå®ƒè¯´æ˜é‚£æ—¶çš„æˆ‘ç«™åœ¨é‚£ä¸ªé˜¶æ®µï¼Œç¡®å®è®¤çœŸæƒ³è¿‡ã€è®¤çœŸè¯´è¿‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/354bd6ff8a69454d841e4115caf3bcc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=RlWAZhWZiVO8ws608pTTvQC8cRw%3D" alt="4.png" loading="lazy"/></p>
<p>è™½ç„¶åé¢åˆ‡æ¢åˆ°äº† <code>Claude Code</code>ï¼ŒTrae ç”¨å¾—å°‘äº†ï¼Œä½†æ›´æ–°æˆ‘å…¶å®ä¸€ç›´æœ‰åœ¨å…³æ³¨ï¼Œä¹Ÿçœ‹è¿‡ä»–ä»¬äº§å“è´Ÿè´£äººçš„é‡‡è®¿ï¼Œèƒ½æ„Ÿå—åˆ°å›¢é˜Ÿåœ¨å·¥ç¨‹ä¾§çš„æŠ•å…¥ã€‚ä¹Ÿç¥æ„¿ä»–ä»¬è¶Šåšè¶Šå¥½â€”â€”è¯´ä¸å®šå“ªå¤©äº§å“æ‰“ç£¨åˆ°æŸä¸ªç‚¹ï¼Œæˆ‘è¿˜èƒ½ä» CC å†åˆ‡å›å»ã€‚</p>
<h2 data-id="heading-3">ä»Šå¹´çœ‹è¿‡çš„â€œäº”æœˆå¤©â€</h2>
<p>ä½œä¸ºä¸€ä¸ª wmls ï¼Œä»Šå¹´ä¸€å…±çœ‹äº†ä¸‰åœºï¼š<strong>é¦™æ¸¯ â†’ é•¿æ²™ â†’ å¤§æ¹¾åŒº</strong>ï¼Œå…¶ä¸­å¤§æ¹¾åŒºè¿˜æ˜¯é˜¿ä¿¡ç”Ÿæ—¥åœºï¼Œæ»¡è¶³æ„Ÿæ‹‰æ»¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6230fde44f89418e97b6dfd287f78972~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=cyErKQWzpw9FrXThek%2BY8Wcohy8%3D" alt="5.png" loading="lazy"/></p>
<p>ä»Šå¹´æˆ‘ä¹Ÿæ„å¤–å‘ç°ï¼šå»ä¸€ä¸ªæ–°åŸå¸‚çœ‹æ¼”å”±ä¼šï¼Œé¡ºä¾¿â€œå½“ä¸€å¤©æ¸¸å®¢â€ï¼Œä¼šè®©è¿™è¶Ÿå¥”èµ´æ›´ç«‹ä½“ã€‚é•¿æ²™çš„å°ç‚’çœŸçš„ä¸‹é¥­ï¼Œå¾ˆå¯¹æˆ‘çš„èƒƒå£â€”â€”ä¹Ÿç®—æ˜¯â€œéŸ³ä¹ + åŸå¸‚ + é£Ÿç‰©â€çš„ä¸€æ¬¡å®Œæ•´ä½“éªŒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1bbc8f524510425e841fdc781f99446e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=KSitoSICQJcEysk8ngbY6oNaaGo%3D" alt="6.png" loading="lazy"/></p>
<p>2026 å¹´çš„è¯ï¼Œæˆ‘åº”è¯¥ä¼šå¤šå»å¤§æ¹¾åŒºä»¥å¤–çš„åœ°æ–¹ç»§ç»­è¿½ã€‚å‰ææ˜¯ï¼šæˆ‘å¾—å…ˆæŠŠè‡ªå·±çš„èŠ‚å¥å’Œä½“åŠ›è¿˜ç»™è‡ªå·±ã€‚</p>
<h2 data-id="heading-4">çœŸæ ¼00ååšåˆ†äº«</h2>
<p>11 æœˆæœºç¼˜å·§åˆä¸‹å—é‚€å‚åŠ äº†çœŸæ ¼åŸºé‡‘åœ¨æ·±åœ³ä¸¾åŠçš„ã€ŒçœŸæ ¼ 00 åã€åˆ†äº«ï¼Œåˆ†äº«äº†æˆ‘å¯¹ AI åº”ç”¨æ–¹å‘çš„ä¸€äº›çœ‹æ³•ã€‚å›å¤´çœ‹ï¼Œè‡³å°‘åˆ°ç›®å‰ä¸ºæ­¢ï¼Œopenclawï¼ˆåŸ clawdbotï¼‰çš„çˆ†ç«ä»¥åŠå„å¤§å‚å•†çš„è·Ÿè¿›ï¼Œå’Œæˆ‘å½“æ—¶æ•´ä½“çš„åˆ¤æ–­æ–¹å‘åŸºæœ¬ä¸€è‡´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c254f04b34d44d5e9c10fe74db78dac6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=hlkdVS5AJE1qkt9yxK%2BNAHoSWA8%3D" alt="7.png" loading="lazy"/></p>
<p>å‚åŠ è¿™ä¸ªæ´»åŠ¨æ›´å¤§çš„ä»·å€¼ï¼Œä¸æ˜¯â€œè¢«å¬è§â€ï¼Œè€Œæ˜¯â€œçœ‹è§åˆ«äººâ€ã€‚çœ‹åˆ°ä¸€äº›åŒé¾„äººåœ¨åšçš„äº‹ï¼Œä¼šè®©ä½ çªç„¶æ˜ç™½ï¼šä¸–ç•Œæ¯”ä½ æƒ³è±¡å¾—æ›´å¿«ï¼Œè€Œä½ èƒ½åšçš„ä¸æ˜¯ç„¦è™‘ï¼Œè€Œæ˜¯æŠŠè‡ªå·±è¯¥è¡¥çš„é‚£éƒ¨åˆ†è¡¥èµ·æ¥ã€‚</p>
<p>ä¹Ÿæ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œï¼Œæˆ‘å‘ç°è‡ªå·±å¥½åƒæœ‰ä¸€ç‚¹â€œèƒ½æŠŠè¯è®²æ¸…æ¥šâ€çš„å¤©èµ‹ã€‚åé¢æˆ‘åˆåœ¨ 2 ä¸ªå°å‹ AI ç›¸å…³ meetup åšäº†åˆ†äº«â€”â€”è¾“å‡ºå€’é€¼è¾“å…¥ï¼Œäº¤æµæœ¬èº«ä¹Ÿæ˜¯è¾“å…¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/091937a7f3bf4179a2e67ddf3994877d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=LW64%2FSdGSUKUXnuK2CPlhpuratc%3D" alt="8.png" loading="lazy"/></p>
<h2 data-id="heading-5">å‚åŠ  Vue Conf 2025</h2>
<p>è™½ç„¶å·²ç»è½¬äº§å“ï¼Œä¸å†ä»¥æŠ€æœ¯ä½œä¸ºä¸»ä¸šï¼Œä½†ä¸šä½™å¯¹ code çš„çƒ­çˆ±å…¶å®æ²¡åœã€‚</p>
<p>çœ‹åˆ°ä»Šå¹´ Vue Conf çš„æ¶ˆæ¯ï¼Œæˆ‘å‡ ä¹æ²¡çŠ¹è±«å°±ä¹°ç¥¨äº†ã€‚å»å¹´çŸ¥é“å¤ªæ™šæ²¡å»æˆæ˜¯ä¸ªé—æ†¾ï¼Œä»Šå¹´æ°å¥½è¿˜åœ¨æ·±åœ³ï¼Œä¹Ÿè§åˆ°äº†å°¤å¤§æœ¬äººã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5eba4c2da1ee42988c90bc18db832b4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=juQSEbS%2F02%2BXgZw0Ec9r%2BMGGAsQ%3D" alt="9.png" loading="lazy"/></p>
<p>æœ‰äº›å–œæ¬¢ä¸éœ€è¦è¯æ˜ï¼Œå®ƒåªä¼šåœ¨ä½ æ„¿æ„çš„æ—¶å€™ï¼ŒæŠŠä½ å¸¦å›ç°åœºã€‚</p>
<h2 data-id="heading-6">æˆä¸ºé“²å±å®˜</h2>
<p>ä»Šå¹´æ•´ä½“éƒ½åœ¨ä¸€ç§å¾ˆç´§å‡‘çš„å·¥ä½œèŠ‚å¥é‡Œåº¦è¿‡ï¼Œå‡ ä¹æ²¡ä»€ä¹ˆçœŸæ­£æ„ä¹‰ä¸Šçš„ä¼‘æ¯æ—¶é—´ã€‚å¹´åº•æˆ‘å…»äº†ä¸€åªå°çŒ«ï¼Œç»™å®ƒå–åå« <strong>å“ˆå“ˆ</strong>ï¼Œå¸Œæœ›å®ƒèƒ½ç»™æˆ‘å¸¦æ¥å¿«ä¹ï¼Œä¹Ÿå¸Œæœ›æˆ‘è‡ªå·±èƒ½æ¯å¤©å¿«å¿«ä¹ä¹çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46e5c46c4d62424cb3fb1c55aa2afeab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=1UEKXi%2Ba93qvsOqyHxUAAJ8naJc%3D" alt="10.png" loading="lazy"/></p>
<p>æ¯å¤©æ™šä¸Šå›å®¶ï¼Œå®ƒä¼šåœ¨é—¨å£ç­‰æˆ‘ã€‚æœ‰äº†å®ƒçš„é™ªä¼´ï¼Œç”Ÿæ´»ç¡®å®ä¸å¤ªä¸€æ ·äº†ï¼šä½ ä¼šå¤šä¸€ç§â€œæœ‰äººåœ¨ç­‰ä½ â€çš„æ„Ÿè§‰ã€‚</p>
<h2 data-id="heading-7">å…³äºä¸ªäºº</h2>
<p>ä¸ªäººå±‚é¢æ¥çœ‹ï¼Œå…¨å¹´å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨å·¥ä½œä¸Šã€‚ä»Šå¹´å¼€å§‹ç‹¬ç«‹è´Ÿè´£ä¸€æ¡ä¸šåŠ¡çº¿ä¹‹åï¼Œå¾ˆå¤šå°äº‹å’Œå¼€ä¸å®Œçš„ä¼šå‡ ä¹æ¦¨å¹²äº†æˆ‘æ‰€æœ‰ç²¾åŠ›ã€‚èŠ‚å‡æ—¥æˆ‘åªæƒ³èººç€ä¼‘æ¯ï¼Œæ‰€ä»¥ä»Šå¹´é™¤äº†çœ‹æ¼”å”±ä¼šï¼ŒåŸºæœ¬æ²¡å®ç°å»å¹´çš„æ—…è¡Œè§„åˆ’ï¼Œè¿™æ˜¯é—æ†¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/455fc16400c64eeebbd214f29bc583d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=uVmL4xQiYTh9b6OnWGAhdG5GyoU%3D" alt="11.png" loading="lazy"/></p>
<p>ä½†æˆ‘ä¹Ÿå¼€å§‹æ…¢æ…¢æœ‰äº†æŒæ§æ„Ÿï¼Œå¹¶ä¸”æ›´èƒ½ç†è§£é‚£å¥è¯ï¼š<strong>è¦å­¦ä¼šåœ¨å·¥ä½œä¸­ä¼‘æ¯</strong>ã€‚ä¸ç„¶ä¼‘æ¯åªä¼šå˜æˆæ›´æ·±çš„ç–²æƒ«ã€‚</p>
<p>è¿˜æœ‰å°±æ˜¯ä½“é‡é—®é¢˜ã€‚æ¯•ä¸šè¿™ä¸¤å¹´å¤šèƒ–äº†è¿‘ 40 æ–¤ï¼Œæˆ‘å®‰æ…°è‡ªå·±æ˜¯â€œè¿‡åŠ³è‚¥â€â€”â€”å½“ç„¶å¯èƒ½æœ‰è¿™éƒ¨åˆ†å½±å“ï¼Œä½†ä¹Ÿå¾—æ‰¿è®¤ï¼šå‹åŠ›å¤§çš„æ—¶å€™ï¼Œå˜´ç¡®å®æ›´å®¹æ˜“å¤±æ§ã€‚ç°åœ¨çš„å¤§ä½“é‡çˆ¬ä¸ªæ¢§æ¡å±±éƒ½è¦äº†è€å‘½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f47584cd340c4bcbb2c556f89ae32a9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=5GUoCsVto6lhBZ3%2BSeKjQCj7mCU%3D" alt="12.png" loading="lazy"/></p>
<p>è¿™ä¸€å¹´ç»™æˆ‘çš„ä¸€ä¸ªå¾ˆæœ´ç´ çš„ç»“è®ºæ˜¯ï¼š<strong>å¿ƒæ€çœŸçš„å¾ˆé‡è¦</strong>ã€‚ä¸æ˜¯â€œæƒ³å¼€ç‚¹â€é‚£ç§ç©ºè¯ï¼Œè€Œæ˜¯ä½ ä¸è°ƒæ•´ï¼Œå®ƒä¼šé€šè¿‡ç¡çœ ã€é¥®é£Ÿã€ä½“é‡ï¼Œæ¢ä¸€ç§æ–¹å¼è®©ä½ ä»˜è´¦ã€‚</p>
<h2 data-id="heading-8">AIæ—¶ä»£çš„ç„¦è™‘</h2>
<p>25 å¹´å¤§æ¨¡å‹å’Œ AI åº”ç”¨æ›´æ–°è¶Šæ¥è¶Šå¿«ï¼Œç¤¾åª’ä¸Šçš„ç„¦è™‘ä¹Ÿè¶Šæ¥è¶Šå¯†ï¼šå¥½åƒä¸é©¬ä¸Šå­¦å°±ä¼šè¢«æ·˜æ±°ã€‚</p>
<p>ä½†å›è¿‡å¤´çœ‹ï¼Œå¾ˆå¤šä¸œè¥¿åœ¨è¯•ç”¨åä¸€ä¸¤å‘¨æ•ˆæœä¸€èˆ¬ï¼Œå°±è¢«æˆ‘ä»¬æ‚„æ‚„é—å¿˜äº†ã€‚æœ€ååˆ°å¹´åº•ï¼ŒçœŸæ­£ç•™åœ¨æˆ‘å·¥ä½œæµé‡Œçš„ä»ç„¶æ˜¯é‚£å‡ æ¬¾å·¥å…·ã€‚</p>
<p>æˆ‘ä»¬åšäº§å“å¸¸è®²â€œæŠŠéœ€æ±‚è½¬ä¸ºè§£å†³æ–¹æ¡ˆâ€ã€‚å…¶å®ä¸ªäººå±‚é¢ä¹Ÿä¸€æ ·ï¼š<strong>å½“ä½ åœ¨å·¥ä½œæˆ–ç”Ÿæ´»é‡Œé‡åˆ°é—®é¢˜å¡ç‚¹äº†ï¼Œå†å»æ‰¾ AI å¯¹ä½ æœ‰æ²¡æœ‰å¸®åŠ©å°±å¥½</strong>ï¼Œä¸ç”¨è¿‡åº¦å…³æ³¨æ‰€æœ‰ä¿¡æ¯æµçš„æ›´æ–°ã€‚</p>
<p>ç„¦è™‘ä¸ä¼šè®©ä½ å˜å¼ºï¼Œå®ƒåªä¼šè®©ä½ å˜æ•£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5358f6d13cbd41ec884938add0348e0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=rlQLl5FVrlQjFgnUo5qdbf2uLYw%3D" alt="13.png" loading="lazy"/></p>
<h2 data-id="heading-9">å°¾è¨€</h2>
<p>æ‰€ä»¥ä»Šå¹´æˆ‘ä¸æƒ³ç«‹ä¸€äº›Flag äº†ã€‚æ›´ç°å®ä¸€ç‚¹ï¼šå…ˆæŠŠèŠ‚å¥é‡æ–°æŒæ¡å›æ¥ï¼Œå…ˆåšå‡ºæ”¹å˜ã€‚</p>
<p>2026 å¹´æˆ‘ç»™è‡ªå·±å®šçš„å¤§æ–¹å‘å¤§æ¦‚æ˜¯ï¼š</p>
<ol>
<li><strong>æŠŠäº§å“èƒ½åŠ›åšå®</strong>ï¼šä¸šåŠ¡ç†è§£ã€è¡¨è¾¾ã€åä½œã€æ¨è¿›ã€‚</li>
<li><strong>æŠŠ AI å½“å·¥å…·</strong>ï¼šå›´ç»•çœŸå®é—®é¢˜æ„å»ºç¨³å®šå·¥ä½œæµï¼Œè€Œä¸æ˜¯è¿½çƒ­ç‚¹ã€‚</li>
<li><strong>æŠŠèº«ä½“æ‹‰å›æ­£è½¨</strong>ï¼šè¿åŠ¨ã€é¥®é£Ÿã€ç¡çœ ï¼Œè‡³å°‘å…ˆæŠŠä½“é‡åˆ¹ä½ã€‚</li>
<li><strong>æŠŠè¾“å‡ºç•™ä¸‹æ¥</strong>ï¼šä¸ä¸ºæ›´æ–°è€Œæ›´æ–°ï¼Œä½†æŒç»­è®°å½•å’Œæ²‰æ·€ã€‚</li>
</ol>
<p>ä¹Ÿç¥ä½ ã€ç¥æˆ‘ã€ç¥æˆ‘ä»¬ï¼š<strong>2026 å¹´éƒ½èƒ½æ›´ç¨³ä¸€ç‚¹ã€æ›´å¼€å¿ƒä¸€ç‚¹ã€‚</strong></p>
<p>äº 2026å¹´2æœˆ5æ—¥ å‡Œæ™¨3ç‚¹å†™å®Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº AI ç”Ÿæˆé«˜è´¨é‡ Mock æ•°æ®çš„å®è·µ]]></title>    <link>https://juejin.cn/post/7603004323870851115</link>    <guid>https://juejin.cn/post/7603004323870851115</guid>    <pubDate>2026-02-05T02:39:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603004323870851115" data-draft-id="7602816610932932671" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº AI ç”Ÿæˆé«˜è´¨é‡ Mock æ•°æ®çš„å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-05T02:39:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/606586148237431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº AI ç”Ÿæˆé«˜è´¨é‡ Mock æ•°æ®çš„å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586148237431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T02:39:04.000Z" title="Thu Feb 05 2026 02:39:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨å‰åç«¯åˆ†ç¦»çš„ç ”å‘æ¨¡å¼ä¸‹ï¼ŒMock æ•°æ®æ˜¯å¹¶è¡Œå¼€å‘çš„åŸºç¡€è®¾æ–½ã€‚æœ¬æ–‡ä»‹ç»ä¸€å¥— Mock å·¥å…·çš„æŠ€æœ¯å®ç°ï¼Œæ ¸å¿ƒè§£å†³å››ä¸ªé—®é¢˜ï¼šè¯·æ±‚æ‹¦æˆªã€è§„åˆ™åŒ¹é…ã€æ•°æ®è´¨é‡ã€å›¢é˜Ÿå…±äº«ã€‚</p>
</blockquote>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨å®é™…ä¸šåŠ¡å¼€å‘ä¸­ï¼Œå‰ç«¯å’Œæµ‹è¯•åŒå­¦ç»å¸¸é‡åˆ°è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li><strong>è”è°ƒé˜»å¡</strong>ï¼šåç«¯æ¥å£æœªå°±ç»ªæ—¶ï¼Œå‰ç«¯åªèƒ½ç­‰å¾…æˆ–ç¡¬ç¼–ç  <code>if (true) { ... }</code></li>
<li><strong>åœºæ™¯è¦†ç›–éš¾</strong>ï¼šæƒ³æ¨¡æ‹Ÿè¾¹ç¼˜åœºæ™¯ï¼ˆå¼‚å¸¸ã€ç©ºæ•°æ®ã€åˆ†é¡µï¼‰ï¼Œå¾€å¾€éœ€è¦åç«¯æ”¹æ•°æ®åº“</li>
<li><strong>Mock æ•°æ®è´¨é‡å·®</strong>ï¼šMock.js ç”Ÿæˆçš„ <code>@cname</code>ã€<code>@integer</code> ç¼ºä¹ä¸šåŠ¡è¯­ä¹‰ï¼Œå’ŒçœŸå®æ•°æ®å·®è·å¤§</li>
<li><strong>æ•°æ®éš¾å…±äº«</strong>ï¼šMock æ•°æ®å­˜åœ¨æœ¬åœ°ï¼Œæ¢å°ç”µè„‘æˆ–æ¢ä¸ªåŒäº‹å°±ç”¨ä¸äº†</li>
</ul>
<p>æˆ‘ä»¬éœ€è¦ä¸€å¥—å·¥å…·è§£å†³è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li>ä¸ä¾µå…¥ä¸šåŠ¡ä»£ç ï¼Œnpm åŒ…å¼•å…¥å³å¯</li>
<li>æ”¯æŒå‚æ•°çº§åˆ«çš„è§„åˆ™åŒ¹é…ï¼ŒåŒä¸€æ¥å£å¯é…ç½®å¤šä¸ªåœºæ™¯</li>
<li>æ ¹æ®æ¥å£æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆç¬¦åˆä¸šåŠ¡è¯­ä¹‰çš„æ•°æ®</li>
<li>æ”¯æŒå›¢é˜Ÿå…±äº« Mock é…ç½®</li>
</ul>
<hr/>
<h2 data-id="heading-1">ä¸šç•Œå¸¸è§æ–¹æ¡ˆ</h2>



































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ä¸è¶³</th></tr></thead><tbody><tr><td>ç¡¬ç¼–ç  Mock</td><td>ç®€å•ç›´æ¥</td><td>ä¾µå…¥ä¸šåŠ¡ä»£ç ï¼Œå‘å¸ƒå‰éœ€æ‰‹åŠ¨åˆ é™¤</td></tr><tr><td>Mock.js</td><td>æœ‰æ•°æ®ç”Ÿæˆèƒ½åŠ›</td><td>è§„åˆ™é…ç½®ç¹çï¼Œæ•°æ®ç¼ºä¹ä¸šåŠ¡è¯­ä¹‰</td></tr><tr><td>whistle ä»£ç†</td><td>ä¸ä¾µå…¥ä¸šåŠ¡ï¼Œä½¿ç”¨ç®€å•</td><td>æ•°æ®ä¿å­˜åœ¨æœ¬åœ°ï¼Œæ— æ³•å›¢é˜Ÿå…±äº«ï¼Œæ— æ³•åŒ¹é…å¤æ‚åœºæ™¯</td></tr><tr><td>MSW (Service Worker)</td><td>ç½‘ç»œå±‚æ‹¦æˆª</td><td>éœ€æ³¨å†Œ sw.jsï¼Œä¾èµ– HTTPSï¼Œæ¥å…¥æˆæœ¬é«˜</td></tr><tr><td>æµè§ˆå™¨æ’ä»¶</td><td>ä½¿ç”¨ç®€å• æ— ä¾µå…¥å¼</td><td>è§„åˆ™åœ¨æœ¬åœ°ï¼Œæ— æ³•æ¥å…¥å†…éƒ¨æ¥å£å¹³å°</td></tr></tbody></table>
<p>è¿™äº›æ–¹æ¡ˆéƒ½æ— æ³•åŒæ—¶æ»¡è¶³"ä½ä¾µå…¥"ã€"è§„åˆ™çµæ´»"ã€"æ•°æ®è´¨é‡é«˜"ã€"å›¢é˜Ÿå¯å…±äº«"å››ä¸ªéœ€æ±‚ã€‚</p>
<hr/>
<h2 data-id="heading-2">æ•´ä½“æ¶æ„</h2>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä¸šåŠ¡é¡¹ç›®                              â”‚
â”‚   import { mockInit } <span class="hljs-selector-tag">from</span> '<span class="hljs-keyword">@zz-common</span>/ai_mock'             â”‚
â”‚   mockInit({ rules: [<span class="hljs-string">'api.example.com'</span>] })                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ai_mock (npm åŒ…)                         â”‚
â”‚      XHR/Fetch æ‹¦æˆª  â†’  è§„åˆ™åŒ¹é…å¼•æ“  â†’  è¿”å› Mock æ•°æ®         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ åŠ¨æ€åŠ è½½ sdk + CustomEvent é€šä¿¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  mock-sdk (å¯è§†åŒ–é¢æ¿)                        â”‚
â”‚        è¯·æ±‚åˆ—è¡¨  |  è§„åˆ™ç®¡ç†  |  Monaco Editor ç¼–è¾‘å™¨           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   node (åç«¯æœåŠ¡)                            â”‚
â”‚         æ¥å£æ–‡æ¡£è·å–  â†’  AI ç”Ÿæˆ  â†’  æ•°æ®æŒä¹…åŒ–                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>æ ¸å¿ƒè®¾è®¡ï¼š</p>
<ul>
<li><code>ai_mock</code> åªè´Ÿè´£æ‹¦æˆªå’ŒåŒ¹é…ï¼Œä¸åŒ…å« UI ä»£ç </li>
<li><code>mock-sdk</code> é€šè¿‡ CDN åŠ¨æ€æ³¨å…¥ï¼Œä¸å¢åŠ ä¸šåŠ¡åŒ…ä½“ç§¯</li>
<li>ä¸¤è€…é€šè¿‡ <code>CustomEvent</code> æ¾è€¦åˆé€šä¿¡</li>
<li>ä»…åœ¨éç”Ÿäº§ç¯å¢ƒå¯ç”¨</li>
</ul>
<hr/>
<h2 data-id="heading-3">æ ¸å¿ƒå®ç°ä¸€ï¼šè¯·æ±‚æ‹¦æˆª</h2>
<h3 data-id="heading-4">é—®é¢˜</h3>
<p>ç°ä»£å‰ç«¯åº”ç”¨æ··åˆä½¿ç”¨ <code>XMLHttpRequest</code> å’Œ <code>fetch</code>ã€‚æ‹¦æˆªæ—¶éœ€è¦è§£å†³ï¼š</p>
<ol>
<li>åŒæ—¶æ‹¦æˆª XHR å’Œ Fetchï¼Œä¸”ä¸ç ´åç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ Sentryï¼‰çš„ç›‘å¬é€»è¾‘</li>
<li>XHR çš„ <code>readyState</code>ã€<code>status</code>ã€<code>responseText</code> æ˜¯åªè¯»å±æ€§ï¼Œæ— æ³•ç›´æ¥èµ‹å€¼</li>
<li>æ‹¦æˆªåå‘é€çœŸå®è¯·æ±‚ä¼šå†æ¬¡è¿›å…¥æ‹¦æˆªé€»è¾‘ï¼Œé€ æˆæ— é™é€’å½’</li>
</ol>
<h3 data-id="heading-5">å®ç°</h3>
<p>é€šè¿‡é‡å†™ <code>XMLHttpRequest.prototype.send</code> å’Œ <code>window.fetch</code> å®ç°æ‹¦æˆªï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¿å­˜åŸå§‹æ–¹æ³•</span>
<span class="hljs-keyword">const</span> xhrSendNative = <span class="hljs-title class_">XMLHttpRequest</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">send</span>
<span class="hljs-keyword">const</span> originalFetch = <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span>

<span class="hljs-comment">// é˜²é€’å½’ï¼šæ ‡è®°çœŸå®è¯·æ±‚</span>
<span class="hljs-keyword">const</span> isRealRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>&lt;<span class="hljs-title class_">XMLHttpRequest</span>, <span class="hljs-built_in">boolean</span>&gt;()

<span class="hljs-title class_">XMLHttpRequest</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">send</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
  <span class="hljs-keyword">const</span> xhr = <span class="hljs-variable language_">this</span>
  <span class="hljs-keyword">const</span> url = <span class="hljs-title function_">sliceUrlPath</span>(xhr.<span class="hljs-property">originRequestUrl</span>)
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºæ ‡è®°çš„çœŸå®è¯·æ±‚ï¼Œé˜²æ­¢æ— é™é€’å½’</span>
  <span class="hljs-keyword">if</span> (isRealRequest.<span class="hljs-title function_">get</span>(xhr)) {
    <span class="hljs-keyword">return</span> xhrSendNative.<span class="hljs-title function_">apply</span>(xhr, args)
  }
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å‘½ä¸­ Mock è§„åˆ™</span>
  <span class="hljs-keyword">if</span> (mockInterface[url]?.<span class="hljs-property">isOpen</span>) {
    <span class="hljs-keyword">const</span> mockResult = <span class="hljs-title function_">getMockData</span>(url, requestData)
    
    <span class="hljs-keyword">if</span> (mockResult.<span class="hljs-property">matched</span>) {
      <span class="hljs-comment">// 1. ç«‹å³è¿”å› Mock å“åº”ç»™ä¸šåŠ¡å±‚</span>
      <span class="hljs-title function_">applyMockResponseToXhr</span>(xhr, mockResult.<span class="hljs-property">data</span>, mockResult.<span class="hljs-property">httpStatusCode</span>)
      
      <span class="hljs-comment">// 2. åå°å‘é€çœŸå®è¯·æ±‚ï¼ˆç”¨äºæ•°æ®å¯¹ç…§ï¼Œä¸è§¦å‘ä¸šåŠ¡å›è°ƒï¼‰</span>
      <span class="hljs-keyword">const</span> realXhr = <span class="hljs-title function_">cloneXHR</span>(xhr, <span class="hljs-literal">false</span>)  <span class="hljs-comment">// ä¸å¤åˆ¶äº‹ä»¶ç›‘å¬å™¨</span>
      isRealRequest.<span class="hljs-title function_">set</span>(realXhr, <span class="hljs-literal">true</span>)       <span class="hljs-comment">// æ ‡è®°ï¼Œé˜²æ­¢é€’å½’</span>
      xhrSendNative.<span class="hljs-title function_">apply</span>(realXhr, args)
      <span class="hljs-keyword">return</span>
    }
  }
  
  <span class="hljs-comment">// æœªå‘½ä¸­ï¼šæ‰§è¡ŒåŸç”Ÿè¯·æ±‚</span>
  xhrSendNative.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)
}
</code></pre>
<p><strong>è¦†å†™åªè¯»å±æ€§</strong>ï¼šXHR çš„ <code>readyState</code>ã€<code>status</code> ç­‰å±æ€§æ˜¯åªè¯»çš„ï¼Œé€šè¿‡ <code>Object.defineProperties</code> è§£å†³ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">applyMockResponseToXhr</span> = (<span class="hljs-params">
  xhr: XMLHttpRequest,
  responseData: <span class="hljs-built_in">any</span>,
  statusCode: <span class="hljs-built_in">number</span>
</span>) =&gt; {
  <span class="hljs-keyword">const</span> responseText = <span class="hljs-keyword">typeof</span> responseData === <span class="hljs-string">'string'</span> 
    ? responseData 
    : <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(responseData)
  
  <span class="hljs-comment">// é€šè¿‡ defineProperties è¦†å†™åªè¯»å±æ€§</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperties</span>(xhr, {
    <span class="hljs-attr">readyState</span>: { <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-number">4</span>, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-attr">status</span>: { <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> statusCode, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-attr">response</span>: { <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> responseData, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-attr">responseText</span>: { <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> responseText, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span> }
  })
  
  <span class="hljs-comment">// è§¦å‘æ ‡å‡†äº‹ä»¶åºåˆ—</span>
  xhr.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">'readystatechange'</span>))
  xhr.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">'load'</span>))
  xhr.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">'loadend'</span>))
}
</code></pre>
<p><strong>ç«‹å³å“åº” + çœŸå®è¯·æ±‚</strong>ï¼šå¼€å¯ Mock åï¼Œä¸šåŠ¡å±‚ç«‹å³æ‹¿åˆ° Mock æ•°æ®ï¼ŒåŒæ—¶åå°ä¼šå‘é€ä¸€ä»½çœŸå®è¯·æ±‚ç”¨äºæ•°æ®å¯¹ç…§ã€‚é¢æ¿æä¾›ã€ŒåŠ è½½çœŸå®æ•°æ®ã€æŒ‰é’®ï¼Œå¯ä»¥ä¸€é”®å°†çœŸå®å“åº”å¡«å…¥ç¼–è¾‘å™¨ï¼Œæ–¹ä¾¿åŸºäºçœŸå®æ•°æ®å¾®è°ƒã€‚</p>
<hr/>
<h2 data-id="heading-6">æ ¸å¿ƒå®ç°äºŒï¼šè§„åˆ™åŒ¹é…å¼•æ“</h2>
<h3 data-id="heading-7">é—®é¢˜</h3>
<p>å®é™…ä¸šåŠ¡ä¸­ï¼ŒåŒä¸€ä¸ªæ¥å£éœ€è¦æ ¹æ®ä¸åŒå‚æ•°è¿”å›ä¸åŒæ•°æ®ï¼š</p>
<ul>
<li><code>page=1</code> è¿”å›ç¬¬ä¸€é¡µï¼Œ<code>page=2</code> è¿”å›ç¬¬äºŒé¡µ</li>
<li><code>userId=vip</code> è¿”å› VIP æ•°æ®ï¼Œ<code>userId=normal</code> è¿”å›æ™®é€šæ•°æ®</li>
<li><code>header</code> ä¸­å¸¦æŸä¸ªæ ‡è¯†æ—¶è¿”å›è°ƒè¯•æ•°æ®</li>
</ul>
<p>å‚æ•°å¯èƒ½åœ¨ URL Queryã€Request Bodyã€Headerã€Cookieã€Path ä¸­ï¼Œéœ€è¦ä¸€å¥—çµæ´»çš„è§„åˆ™åŒ¹é…æœºåˆ¶ã€‚</p>
<h3 data-id="heading-8">è§„åˆ™æ•°æ®ç»“æ„</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MockRule</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">priority</span>: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">// ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå°è¶Šä¼˜å…ˆ</span>
  <span class="hljs-attr">enabled</span>: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-attr">type</span>: <span class="hljs-number">1</span> | <span class="hljs-number">2</span> | <span class="hljs-number">3</span>;   <span class="hljs-comment">// 1=æœ¬åœ°è‰ç¨¿ï¼Œ2=ä¸ªäººäº‘ç«¯ï¼Œ3=å›¢é˜Ÿå…±äº«</span>
  <span class="hljs-attr">paramConditions</span>: <span class="hljs-title class_">ParamCondition</span>[];  <span class="hljs-comment">// å‚æ•°æ¡ä»¶</span>
  <span class="hljs-attr">mockData</span>: <span class="hljs-built_in">any</span>;
  <span class="hljs-attr">httpStatusCode</span>: <span class="hljs-built_in">number</span>;
  delay?: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ParamCondition</span> {
  <span class="hljs-attr">location</span>: <span class="hljs-string">'query'</span> | <span class="hljs-string">'body'</span> | <span class="hljs-string">'header'</span> | <span class="hljs-string">'cookie'</span> | <span class="hljs-string">'path'</span>;
  <span class="hljs-attr">paramName</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">operator</span>: <span class="hljs-string">'equals'</span> | <span class="hljs-string">'notEquals'</span> | <span class="hljs-string">'contains'</span> | <span class="hljs-string">'notContains'</span> | 
            <span class="hljs-string">'greaterThan'</span> | <span class="hljs-string">'lessThan'</span> | <span class="hljs-string">'greaterOrEqual'</span> | <span class="hljs-string">'lessOrEqual'</span>;
  <span class="hljs-attr">value</span>: <span class="hljs-built_in">any</span>;
}
</code></pre>
<h3 data-id="heading-9">åŒ¹é…ç®—æ³•</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">matchRule</span>(<span class="hljs-params">rules: MockRule[], request: RequestInfo</span>): <span class="hljs-title class_">MatchResult</span> {
  <span class="hljs-comment">// åªåŒ¹é…å·²å¯ç”¨çš„æœŸæœ›ï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åº</span>
  <span class="hljs-keyword">const</span> enabledRules = rules
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">rule</span> =&gt;</span> rule.<span class="hljs-property">enabled</span>)
    .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">priority</span> - b.<span class="hljs-property">priority</span>);

  <span class="hljs-keyword">const</span> matched = enabledRules.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">rule</span> =&gt;</span> <span class="hljs-title function_">isRuleMatched</span>(rule, request));
  
  <span class="hljs-keyword">return</span> matched 
    ? { <span class="hljs-attr">matched</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">rule</span>: matched, <span class="hljs-attr">delay</span>: matched.<span class="hljs-property">delay</span> ?? <span class="hljs-number">0</span> }
    : { <span class="hljs-attr">matched</span>: <span class="hljs-literal">false</span> };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">isRuleMatched</span>(<span class="hljs-params">rule: MockRule, request: RequestInfo</span>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-comment">// æ²¡æœ‰å‚æ•°æ¡ä»¶ï¼ŒåŒ¹é…æ‰€æœ‰è¯·æ±‚</span>
  <span class="hljs-keyword">if</span> (!rule.<span class="hljs-property">paramConditions</span>?.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  
  <span class="hljs-comment">// æ‰€æœ‰æ¡ä»¶éƒ½æ»¡è¶³æ‰åŒ¹é…ï¼ˆAND å…³ç³»ï¼‰</span>
  <span class="hljs-keyword">return</span> rule.<span class="hljs-property">paramConditions</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">condition</span> =&gt;</span>
    <span class="hljs-title function_">matchParamCondition</span>(condition, request)
  );
}
</code></pre>
<h3 data-id="heading-10">å‚æ•°å€¼è·å–</h3>
<p>æ ¹æ® <code>location</code> ä»ä¸åŒä½ç½®å–å€¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getParamValue</span>(<span class="hljs-params">location: <span class="hljs-built_in">string</span>, paramName: <span class="hljs-built_in">string</span>, request: RequestInfo</span>): <span class="hljs-built_in">any</span> {
  <span class="hljs-keyword">switch</span> (location) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'query'</span>:
      <span class="hljs-keyword">return</span> request.<span class="hljs-property">query</span>?.[paramName];
    <span class="hljs-keyword">case</span> <span class="hljs-string">'body'</span>:
      <span class="hljs-comment">// æ”¯æŒåµŒå¥—è·¯å¾„ï¼Œå¦‚ body.user.id</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">getNestedValue</span>(<span class="hljs-title function_">parseBody</span>(request.<span class="hljs-property">body</span>), paramName);
    <span class="hljs-keyword">case</span> <span class="hljs-string">'header'</span>:
      <span class="hljs-keyword">return</span> request.<span class="hljs-property">headers</span>?.[paramName];
    <span class="hljs-keyword">case</span> <span class="hljs-string">'cookie'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">parseCookie</span>(request.<span class="hljs-property">headers</span>?.<span class="hljs-property">cookie</span>, paramName);
    <span class="hljs-keyword">case</span> <span class="hljs-string">'path'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">extractPathParam</span>(request.<span class="hljs-property">url</span>, paramName);
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
  }
}
</code></pre>
<p>æ¯”è¾ƒæ—¶ä¼šåšç±»å‹å…¼å®¹å¤„ç†ï¼Œæ¯”å¦‚ <code>1</code> å’Œ <code>"1"</code> è§†ä¸ºç›¸ç­‰ï¼Œé¿å…å› ç±»å‹ä¸ä¸€è‡´å¯¼è‡´åŒ¹é…å¤±è´¥ã€‚</p>
<h3 data-id="heading-11">ä½¿ç”¨ç¤ºä¾‹</h3>






























<table><thead><tr><th>è¯·æ±‚å‚æ•°</th><th>è§„åˆ™é…ç½®</th><th>ç»“æœ</th></tr></thead><tbody><tr><td><code>?page=1</code></td><td><code>query.page equals 1</code></td><td>è¿”å›ç¬¬ä¸€é¡µæ•°æ®</td></tr><tr><td><code>?page=2</code></td><td><code>query.page equals 2</code></td><td>è¿”å›ç¬¬äºŒé¡µæ•°æ®</td></tr><tr><td><code>body: {"user":{"type":"vip"}}</code></td><td><code>body.user.type equals "vip"</code></td><td>è¿”å› VIP æ•°æ®</td></tr><tr><td><code>Header: X-Debug: true</code></td><td><code>header.X-Debug equals "true"</code></td><td>è¿”å›è°ƒè¯•æ•°æ®</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-12">æ ¸å¿ƒå®ç°ä¸‰ï¼šAI ç”Ÿæˆé«˜è´¨é‡æ•°æ®</h2>
<h3 data-id="heading-13">é—®é¢˜</h3>
<p>Mock.js ç”Ÿæˆçš„æ•°æ®ç¼ºä¹ä¸šåŠ¡è¯­ä¹‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Mock.js ç”Ÿæˆ</span>
{ <span class="hljs-attr">name</span>: <span class="hljs-string">"xxx"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">82</span>, <span class="hljs-attr">status</span>: <span class="hljs-number">3</span> }

<span class="hljs-comment">// æœŸæœ›çš„ä¸šåŠ¡æ•°æ®</span>
{ <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">28</span>, <span class="hljs-attr">status</span>: <span class="hljs-number">1</span> }  <span class="hljs-comment">// status: 0=å¾…å®¡æ ¸, 1=å·²é€šè¿‡, 2=å·²æ‹’ç»</span>
</code></pre>
<p>æˆ‘ä»¬å¸Œæœ›æ ¹æ®æ¥å£æ–‡æ¡£ä¸­çš„å­—æ®µæè¿°ã€æšä¸¾è¯´æ˜ã€å­—æ®µå‘½åæ¥ç”Ÿæˆç¬¦åˆä¸šåŠ¡è¯­ä¹‰çš„æ•°æ®, è¿™æ ·æ–‡æ¡£å¤‡æ³¨è¶Šè¯¦ç»† å­—æ®µåå®šä¹‰è¶Šæ¸…æ™° ç”Ÿæˆæ•°æ®ä¼šè¶Šå‡†ç¡®ã€‚</p>
<h3 data-id="heading-14">å®ç°æ€è·¯</h3>
<p>åç«¯æœåŠ¡ä» APIæ–‡æ¡£å¹³å° è·å–æ¥å£çš„ JSON Schemaï¼Œæ„å»º Prompt è°ƒç”¨ AI ç”Ÿæˆæ•°æ®ã€‚</p>
<p><strong>æ ¸å¿ƒ Prompt è®¾è®¡</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> systemPrompt = <span class="hljs-string">`
ä½ æ˜¯ Mock æ•°æ®ç”Ÿæˆä¸“å®¶ï¼Œæ ¹æ® JSON Schema ç”Ÿæˆç¬¦åˆä¸šåŠ¡åœºæ™¯çš„æ•°æ®ã€‚

ã€ç”Ÿæˆè§„åˆ™ - æŒ‰ä¼˜å…ˆçº§æ’åºã€‘
1. è‹¥ description ä¸­å­˜åœ¨æšä¸¾è¯´æ˜ï¼ˆå¦‚ "0:æˆåŠŸ, 1:å¤±è´¥"ï¼‰ï¼Œä¼˜å…ˆä½¿ç”¨æšä¸¾å€¼æœ¬èº«ï¼ˆå¦‚ 0ã€1ï¼‰
2. è‹¥æ—  descriptionï¼Œåˆ™æ ¹æ®å­—æ®µåçš„è¯­ä¹‰ç”Ÿæˆåˆç†å€¼
3. æ•°ç»„ç±»å‹é»˜è®¤ç”Ÿæˆ 5 æ¡æ•°æ®
4. è‹¥ description ä¸­æšä¸¾å€¼è¾ƒå¤šï¼Œæ•°ç»„åº”è¦†ç›–æ‰€æœ‰æšä¸¾å€¼

ã€é»˜è®¤å€¼è§„åˆ™ã€‘
- respCode / codeï¼šæˆåŠŸåœºæ™¯ä¸º 0ï¼Œå¤±è´¥åœºæ™¯ä¸º -1
- errorMsgï¼šæˆåŠŸåœºæ™¯ä¸º nullï¼Œå¤±è´¥åœºæ™¯ä¸º "ç³»ç»Ÿå¼‚å¸¸"
- å›¾ç‰‡ URLï¼šä½¿ç”¨ç»Ÿä¸€çš„å ä½å›¾åœ°å€
- æ™®é€š URLï¼šä½¿ç”¨ç»Ÿä¸€çš„åŸŸååœ°å€

ã€è¾“å‡ºæ ¼å¼ã€‘
ä»…è¾“å‡º JSONï¼Œä¸é™„åŠ ä»»ä½•è§£é‡Šæ–‡å­—
`</span>;
</code></pre>
<p><strong>å…³é”®è®¾è®¡ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>description ä¼˜å…ˆ</strong>ï¼šæ¥å£æ–‡æ¡£ä¸­ <code>status: 0=å¾…å®¡æ ¸, 1=å·²é€šè¿‡</code> è¿™ç±»æè¿°ä¼šè¢«ä¼˜å…ˆä½¿ç”¨</li>
<li><strong>å­—æ®µåè¯­ä¹‰</strong>ï¼š<code>userName</code> ç”Ÿæˆä¸­æ–‡å§“åï¼Œ<code>price</code> ç”Ÿæˆåˆç†ä»·æ ¼</li>
<li><strong>æšä¸¾è¦†ç›–</strong>ï¼šæ•°ç»„å­—æ®µä¼šå°½é‡è¦†ç›–æ‰€æœ‰æšä¸¾å€¼ï¼Œä¾¿äºæµ‹è¯•</li>
<li><strong>é»˜è®¤æˆåŠŸåœºæ™¯</strong>ï¼šé™¤éç”¨æˆ·æŒ‡å®šï¼Œå¦åˆ™ç”Ÿæˆæ­£å¸¸æ•°æ®</li>
</ol>
<h3 data-id="heading-15">æ•°æ®æ ¡éªŒ</h3>
<p>AI ç”Ÿæˆçš„ JSON å¯èƒ½æ ¼å¼æœ‰é—®é¢˜ï¼Œé€šè¿‡ <code>jsonrepair</code> éªŒè¯ä¿®å¤ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> jsonMatch = result.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\{[\s\S]*\}/</span>);
<span class="hljs-keyword">if</span> (jsonMatch) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">jsonrepair</span>(jsonMatch[<span class="hljs-number">0</span>]);
}
</code></pre>
<p>ç”Ÿæˆåå¯¹æ¯” Schema å’Œå®é™…æ•°æ®ï¼Œå­—æ®µç¼ºå¤±æ—¶å‘é€å‘Šè­¦ã€‚</p>
<h3 data-id="heading-16">ç”Ÿæˆæ¨¡å¼</h3>
<ul>
<li><strong>æ•´ä½“ç”Ÿæˆ</strong>ï¼šæ ¹æ®å®Œæ•´ Schema ç”Ÿæˆæ‰€æœ‰å­—æ®µ</li>
<li><strong>é€‰åŒºç”Ÿæˆ</strong>ï¼šåªæ›¿æ¢é€‰ä¸­çš„å­—æ®µï¼Œä¿ç•™å…¶ä»–å­—æ®µä¸å˜</li>
<li><strong>è‡ªå®šä¹‰ Prompt</strong>ï¼šç”¨æˆ·å¯è¾“å…¥é¢å¤–è¦æ±‚ï¼Œå¦‚"ç”Ÿæˆ VIP ç”¨æˆ·æ•°æ®"ã€"ä»·æ ¼åœ¨ 100-500 ä¹‹é—´"ã€"ç”Ÿæˆ10æ¡æ•°æ®"ã€"ç”ŸæˆæŸä¸ªåœºæ™¯å€¼çš„æ•°æ®"ç­‰</li>
</ul>
<hr/>
<h2 data-id="heading-17">æ ¸å¿ƒå®ç°å››ï¼šä¸‰å±‚ä½œç”¨åŸŸ</h2>
<h3 data-id="heading-18">é—®é¢˜</h3>
<p>Mock æ•°æ®å­˜åœ¨æœ¬åœ°çš„é—®é¢˜ï¼š</p>
<ul>
<li>æ¢å°ç”µè„‘å°±æ²¡äº†</li>
<li>åŒäº‹æƒ³ç”¨åŒä¸€å¥—æ•°æ®ï¼Œåªèƒ½æ‰‹åŠ¨å¤åˆ¶</li>
<li>å›¢é˜Ÿæ ‡å‡†æµ‹è¯•æ•°æ®æ— æ³•ç»Ÿä¸€ç®¡ç†</li>
</ul>
<h3 data-id="heading-19">è®¾è®¡</h3>
<p>ä¸‰å±‚ä½œç”¨åŸŸè§£å†³ä¸åŒåœºæ™¯çš„éœ€æ±‚ï¼š</p>





























<table><thead><tr><th>ä½œç”¨åŸŸ</th><th>å­˜å‚¨ä½ç½®</th><th>å¯è§æ€§</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td>æœ¬åœ°è‰ç¨¿</td><td>IndexedDB</td><td>ä»…å½“å‰è®¾å¤‡</td><td>ä¸´æ—¶è°ƒè¯•</td></tr><tr><td>ä¸ªäººäº‘ç«¯</td><td>è¿œç¨‹æ•°æ®åº“</td><td>ä»…åˆ›å»ºè€…</td><td>è·¨è®¾å¤‡åŒæ­¥</td></tr><tr><td>å›¢é˜Ÿå…±äº«</td><td>è¿œç¨‹æ•°æ®åº“</td><td>æ‰€æœ‰å›¢é˜Ÿæˆå‘˜</td><td>æ ‡å‡†æµ‹è¯•æ•°æ®</td></tr></tbody></table>
<p><strong>å…³é”®è®¾è®¡</strong>ï¼š</p>
<ol>
<li><strong>ä¼˜å…ˆçº§å’Œå¯ç”¨çŠ¶æ€ä»…åœ¨æœ¬åœ°ç»´æŠ¤</strong>ï¼šé¿å…å›¢é˜Ÿæˆå‘˜äº’ç›¸å¹²æ‰°</li>
<li><strong>äº‘ç«¯åªå­˜æœŸæœ›å†…å®¹</strong>ï¼šæ¯ä¸ªäººç‹¬ç«‹æ§åˆ¶"å“ªäº›æœŸæœ›å¯ç”¨ã€ä¼˜å…ˆçº§å¦‚ä½•æ’åº"</li>
<li><strong>è§„åˆ™ç¼“å­˜</strong>ï¼šåŠ è½½åç¼“å­˜åœ¨ <code>window.__mockRulesCache</code>ï¼Œé¿å…é‡å¤è¯»å– IndexedDB</li>
</ol>
<h3 data-id="heading-20">æ•°æ®ç»“æ„</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MockRule</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-number">1</span> | <span class="hljs-number">2</span> | <span class="hljs-number">3</span>;  <span class="hljs-comment">// 1=æœ¬åœ°è‰ç¨¿ï¼Œ2=ä¸ªäººäº‘ç«¯ï¼Œ3=å›¢é˜Ÿå…±äº«</span>
  <span class="hljs-attr">enabled</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æœ¬åœ°ç»´æŠ¤</span>
  <span class="hljs-attr">priority</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// æœ¬åœ°ç»´æŠ¤</span>
  <span class="hljs-comment">// ... å…¶ä»–å­—æ®µ</span>
}
</code></pre>
<h3 data-id="heading-21">äº‹ä»¶é€šä¿¡</h3>
<p>SDK ä¸ UI é¢æ¿é€šè¿‡ CustomEvent é€šä¿¡ï¼š</p>

























<table><thead><tr><th>äº‹ä»¶å</th><th>æ–¹å‘</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>mock-request-end</code></td><td>SDK â†’ UI</td><td>è¯·æ±‚å®Œæˆä¸ŠæŠ¥</td></tr><tr><td><code>mock-interface-switch</code></td><td>UI â†’ SDK</td><td>å•æ¥å£å¼€å…³æ§åˆ¶</td></tr><tr><td><code>mock-rules-updated</code></td><td>UI â†’ SDK</td><td>è§„åˆ™æ›´æ–°é€šçŸ¥</td></tr></tbody></table>
<h3 data-id="heading-22">æ•°æ®æ¸…ç†</h3>
<p>è‡ªåŠ¨æ¸…ç† 30 å¤©æœªä½¿ç”¨çš„æœ¬åœ°æ•°æ®ï¼Œè‡ªåŠ¨æ¸…ç†éæ´»è·ƒçš„æ•°æ® é¿å…å­˜å‚¨è†¨èƒ€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">await</span> <span class="hljs-title function_">cleanupInactiveData</span>(<span class="hljs-number">30</span>);
</code></pre>
<hr/>
<h2 data-id="heading-23">åŠ¨æ€æ¨¡æ¿è¯­æ³•</h2>
<p>æ”¯æŒåœ¨ Mock æ•°æ®ä¸­å¼•ç”¨è¯·æ±‚å‚æ•°ï¼Œå®ç°"å“åº”éšè¯·æ±‚å˜åŒ–"ï¼š</p>



































<table><thead><tr><th>è¯­æ³•</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>{{Date.now()}}</code></td><td>å½“å‰æ—¶é—´æˆ³</td><td><code>1706432400000</code></td></tr><tr><td><code>{{uuid()}}</code></td><td>ç”Ÿæˆ UUID</td><td><code>"a1b2c3d4-..."</code></td></tr><tr><td><code>{{request.query.xxx}}</code></td><td>è·å– URL å‚æ•°</td><td><code>{{request.query.page}}</code></td></tr><tr><td><code>{{request.body.xxx}}</code></td><td>è·å–è¯·æ±‚ä½“å­—æ®µ</td><td><code>{{request.body.userId}}</code></td></tr><tr><td><code>{{request.headers.xxx}}</code></td><td>è·å–è¯·æ±‚å¤´</td><td><code>{{request.headers.token}}</code></td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"requestId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{{uuid()}}"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{{Date.now()}}"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"userId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{{request.body.userId}}"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"page"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{{request.query.page}}"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-24">å¿«é€Ÿå¼€å§‹</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. å®‰è£…</span>
npm install <span class="hljs-meta">@zz</span>-common/ai_mock

<span class="hljs-comment">// 2. åˆå§‹åŒ–</span>
<span class="hljs-keyword">import</span> { mockInit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@zz-common/ai_mock'</span>

<span class="hljs-title function_">mockInit</span>({
  <span class="hljs-attr">rules</span>: [<span class="hljs-string">'api.example.com'</span>],      <span class="hljs-comment">// æ‹¦æˆªçš„åŸŸå</span>
  <span class="hljs-attr">excludeRules</span>: [<span class="hljs-regexp">/static/</span>, <span class="hljs-regexp">/cdn/</span>]  <span class="hljs-comment">// æ’é™¤çš„èµ„æº</span>
})
</code></pre>
<h2 data-id="heading-25">æ¨èå·¥ä½œæµ</h2>
<p>ä¸‹é¢æ¼”ç¤ºä»è¯·æ±‚é‡‡é›†åˆ° AI ç”Ÿæˆ Mock æ•°æ®çš„å®Œæ•´æµç¨‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/412918b4575440488ee46ab82d54fb31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770863944&amp;x-signature=%2BY5Ha6UIl1%2Bn86hwo0z%2B0DpXwjY%3D" alt="24182e81-01bc-11f1-83a0-e2f0e015208e.gif" loading="lazy"/></p>
<ol>
<li><strong>æ¥å…¥ npm åŒ…</strong>ï¼šåœ¨éç”Ÿäº§ç¯å¢ƒå¯ç”¨æ‹¦æˆª</li>
<li><strong>ä»çœŸå®è¯·æ±‚åˆ›å»º Mock</strong>ï¼šæ‰“å¼€é¢æ¿ï¼Œç‚¹å‡»è¯·æ±‚æ—¥å¿—çš„"åˆ›å»ºæœŸæœ›"</li>
<li><strong>é…ç½®å‚æ•°æ¡ä»¶</strong>ï¼šåŒä¸€æ¥å£ä¸åŒå‚æ•°è¿”å›ä¸åŒæ•°æ®</li>
<li><strong>AI ç”Ÿæˆè¡¥å……</strong>ï¼šç”¨ AI ç”Ÿæˆç¬¦åˆä¸šåŠ¡è¯­ä¹‰çš„æ•°æ®</li>
<li><strong>å›¢é˜Ÿå…±äº«</strong>ï¼šå°†ç¨³å®šçš„æµ‹è¯•æ•°æ®æ¨é€åˆ°å›¢é˜Ÿå…±äº«</li>
</ol>
<hr/>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»çš„ Mock å·¥å…·è§£å†³äº†å››ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</p>

























<table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>è¯·æ±‚æ‹¦æˆª</td><td>Monkey Patch é‡å†™ XHR/Fetchï¼Œé€šè¿‡ WeakMap é˜²é€’å½’</td></tr><tr><td>è§„åˆ™åŒ¹é…</td><td>æ”¯æŒ 5 ç§å‚æ•°ä½ç½® Ã— 8 ç§æ“ä½œç¬¦ï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åº</td></tr><tr><td>æ•°æ®è´¨é‡</td><td>AI æ ¹æ®æ¥å£æ–‡æ¡£çš„ descriptionã€å­—æ®µåè¯­ä¹‰ç”Ÿæˆæ•°æ®</td></tr><tr><td>å›¢é˜Ÿå…±äº«</td><td>ä¸‰å±‚ä½œç”¨åŸŸï¼Œæœ¬åœ°ç»´æŠ¤å¯ç”¨çŠ¶æ€å’Œä¼˜å…ˆçº§</td></tr></tbody></table>
<p>ç›®å‰è¿™å¥—å·¥å…·å·²åœ¨å…¬å¸å†…éƒ¨ä½¿ç”¨ï¼Œå¯ä»¥å‡å°‘è”è°ƒé˜»å¡ã€æé«˜åœºæ™¯è¦†ç›–ç‡ã€‚</p>
<h2 data-id="heading-27">æœªæ¥è§„åˆ’</h2>
<ul>
<li><strong>æµé‡å½•åˆ¶å›æ”¾</strong>ï¼šåŸºäºçœŸå®æµé‡ç”Ÿæˆ Mock æ•°æ®ï¼Œæ•°æ®æ›´è´´è¿‘çº¿ä¸Šåœºæ™¯</li>
<li><strong>AIç”Ÿæˆæ•°æ®æ—¶åŸºäºçœŸå®æ•°æ®</strong>ï¼šè¿›ä¸€æ­¥æå‡AIç”Ÿæˆæ•°æ®è´¨é‡ è´´è¿‘çœŸå®ä¸šåŠ¡åœºæ™¯</li>
<li><strong>ç§»åŠ¨ç«¯æ”¯æŒ</strong>ï¼šçœŸæœºç¯å¢ƒä¸‹é…åˆ PC ç«¯ä½¿ç”¨ Mock æ•°æ®éªŒè¯</li>
<li><strong>è§„åˆ™æ¨è</strong>ï¼šåŸºäºå†å²è¯·æ±‚ï¼Œè‡ªåŠ¨æ¨èå¯èƒ½éœ€è¦çš„ Mock åœºæ™¯</li>
</ul>
<blockquote>
<p>è½¬è½¬ç ”å‘ä¸­å¿ƒåŠä¸šç•Œå°ä¼™ä¼´ä»¬çš„æŠ€æœ¯å­¦ä¹ äº¤æµå¹³å°ï¼Œå®šæœŸåˆ†äº«ä¸€çº¿çš„å®æˆ˜ç»éªŒåŠä¸šç•Œå‰æ²¿çš„æŠ€æœ¯è¯é¢˜ã€‚ å…³æ³¨å…¬ä¼—å·ã€Œè½¬è½¬æŠ€æœ¯ã€ï¼ˆç»¼åˆæ€§ï¼‰ã€ã€Œå¤§è½¬è½¬FEã€ï¼ˆä¸“æ³¨äºFEï¼‰ã€ã€Œè½¬è½¬QAã€ï¼ˆä¸“æ³¨äºQAï¼‰ï¼Œæ›´å¤šå¹²è´§å®è·µï¼Œæ¬¢è¿äº¤æµåˆ†äº«~</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Windows ä¹Ÿèƒ½è·‘ OpenClawï¼æœ€å®Œæ•´å®‰è£…æ•™ç¨‹ + é£ä¹¦æ¥å…¥ï¼Œå…¨ç¨‹é¿å‘]]></title>    <link>https://juejin.cn/post/7603142147642196011</link>    <guid>https://juejin.cn/post/7603142147642196011</guid>    <pubDate>2026-02-05T07:58:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603142147642196011" data-draft-id="7603030564837392438" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Windows ä¹Ÿèƒ½è·‘ OpenClawï¼æœ€å®Œæ•´å®‰è£…æ•™ç¨‹ + é£ä¹¦æ¥å…¥ï¼Œå…¨ç¨‹é¿å‘"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-05T07:58:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ«æƒ¹CC"/> <meta itemprop="url" content="https://juejin.cn/user/4095037267779687"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Windows ä¹Ÿèƒ½è·‘ OpenClawï¼æœ€å®Œæ•´å®‰è£…æ•™ç¨‹ + é£ä¹¦æ¥å…¥ï¼Œå…¨ç¨‹é¿å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4095037267779687/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ«æƒ¹CC
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T07:58:42.000Z" title="Thu Feb 05 2026 07:58:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    22
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>âš ï¸ å°è´´å£«ï¼šåœ¨å¼€å§‹ä¹‹å‰ï¼Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„æé†’ï¼šç”±äºæ­¤ç±»å·¥å…·æ¶‰åŠè‡ªåŠ¨åŒ–æ“ä½œå’Œç¯å¢ƒé…ç½®ï¼Œå¦‚æœä½ çš„ç”µè„‘å­˜æœ‰é‡è¦çš„å•†ä¸š/èµ„äº§æˆ–ä¸ªäººéšç§ä¿¡æ¯ï¼Œ<strong>å¼ºçƒˆå»ºè®®å¼„ä¸€å°å¹²å‡€çš„å¤‡ç”¨è®¾å¤‡ï¼Œæˆ–è€…ç›´æ¥ç§Ÿç”¨ä¸€ä¸ªäº‘ç«¯è™šæ‹Ÿæœºï¼ˆVPSï¼‰æ¥è¿è¡Œã€‚</strong> è¿™æ ·æ—¢èƒ½ä¿æŠ¤éšç§ï¼Œä¹Ÿèƒ½é¿å…ç¯å¢ƒå†²çªã€‚</p>
</blockquote>
<p>æœ€è¿‘ <strong>OpenClaw</strong> çƒ­åº¦å¾ˆé«˜ï¼Œä½†å®˜æ–¹å¯¹ <strong>Windows åŸç”Ÿç¯å¢ƒ</strong>å¹¶ä¸ç®—å‹å¥½ï¼Œå¾ˆå¤šäººä¼šå¡åœ¨ Node ç¯å¢ƒã€æƒé™ã€è·¯å¾„ã€æ’ä»¶å®‰è£…ç­‰é—®é¢˜ä¸Šã€‚ä¸‹é¢æˆ‘æŠŠè‡ªå·±å®Œæ•´è·‘é€šçš„æµç¨‹æ•´ç†æˆä¸€ç¯‡â€œç…§åšå°±èƒ½æˆâ€çš„æ•™ç¨‹ï¼šä»ç¯å¢ƒå‡†å¤‡ â†’ OpenClaw å®‰è£… â†’ åˆå§‹åŒ–é…ç½® â†’ <strong>æ¥å…¥é£ä¹¦æœºå™¨äºº</strong>ï¼Œæœ€åå†è¡¥ä¸€ä»½å¸¸ç”¨æ’é”™å‘½ä»¤ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-1">1ï¼‰å®‰è£… nvm for Windowsï¼ˆå»ºè®®ç”¨æœ€æ–°ç‰ˆï¼‰</h3>
<p><strong>Windows ç”¨æˆ·</strong> åˆ° GitHub Releases ä¸‹è½½ <code>nvm-setup.exe</code>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcoreybutler%2Fnvm-windows%2Freleases" target="_blank" title="https://github.com/coreybutler/nvm-windows/releases" ref="nofollow noopener noreferrer">github.com/coreybutlerâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37bc339dcc8c43cb9bb38a0668f7fcaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=Q6lBtDlUjyc3vQNc1NP0QO8ayqo%3D" alt="1.png" loading="lazy"/></p>
<p>å®‰è£…è¿‡ç¨‹ä¸€è·¯ Next å³å¯ã€‚å®‰è£…æˆåŠŸåå»ºè®®ä½ ç”¨ <strong>ç®¡ç†å‘˜æƒé™</strong>æ‰“å¼€ PowerShellï¼š</p>
<ul>
<li>æŒ‰ <strong>Win é”® + S</strong></li>
<li>æœç´¢ <strong>PowerShell</strong></li>
<li>é¼ æ ‡å³é”® â†’ <strong>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</strong></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18d05ee8ba88475bb627d4c764fcfb60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=i4b8aliQj5Ut7P9bamHVH9HGBKY%3D" alt="2.png" loading="lazy"/></p>
<h3 data-id="heading-2">2ï¼‰å®‰è£… node.js 22.22.0 ç‰ˆæœ¬</h3>
<p>æŒ‰ç…§é¡ºåºåˆ†åˆ«åœ¨ <code>powershell</code> ä¸­è¿è¡Œä¸‹åˆ—æŒ‡ä»¤ã€‚</p>
<pre><code class="hljs language-powershell" lang="powershell"># å®‰è£…æŒ‡ä»¤
nvm install 22

# ä½¿ç”¨æŒ‡ä»¤
nvm use 22.22.0
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a96291aab9274019af9d0cd804cae559~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=miqHTIbR1V5uVKInOeujWdNNeBc%3D" alt="3.png" loading="lazy"/></p>
<p>æˆåŠŸåä¼šçœ‹åˆ°ç±»ä¼¼æç¤ºï¼š<code>Now using node v22.22.0</code></p>
<blockquote>
<p>å¦‚æœä½ ä»ç„¶ä¸‹è½½å¤±è´¥ï¼Œæˆ–è€…å…¬å¸ç½‘ç»œæ‹¦æˆªäº†ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨å»å®˜ç½‘ä¸‹è½½å®‰è£…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fzh-cn%2Fdownload" target="_blank" title="https://nodejs.org/zh-cn/download" ref="nofollow noopener noreferrer">nodejs.org/zh-cn/downlâ€¦</a></p>
</blockquote>
<h2 data-id="heading-3">äºŒã€å®‰è£… + é…ç½® OpenClaw</h2>
<h3 data-id="heading-4">1ï¼‰ä¸€é”®å®‰è£…ï¼ˆPowerShellï¼‰</h3>
<p>åœ¨ <strong>ç®¡ç†å‘˜ PowerShell</strong> ä¸­è¿è¡Œï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">iwr -useb https://openclaw.ai/install.ps1 | iex
</code></pre>
<p>å¦‚æœé‡åˆ°æ‰§è¡Œç­–ç•¥æŠ¥é”™ï¼ˆå¸¸è§äºé¦–æ¬¡è¿è¡Œè„šæœ¬ï¼‰ï¼Œåœ¨ PowerShell è¾“å…¥ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1e1a8aa13404874aa31b1b8a71fcaec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=jxvG0Nzfj14RiqxsCL%2FCNgaVczE%3D" alt="4.png" loading="lazy"/></p>
<h3 data-id="heading-5">2ï¼‰åˆå§‹åŒ–é…ç½®</h3>
<p>å®‰è£…å®Œæˆåé€šå¸¸ä¼šè‡ªåŠ¨è¿›å…¥é…ç½®æµç¨‹ã€‚
å¦‚æœä½ ä¸å°å¿ƒå…³é—­äº† PowerShellï¼Œé‡æ–°æ‰“å¼€åæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">openclaw onboard --flow quickstart
</code></pre>
<p>ç¬¬ä¸€ä¸ªé£é™©æç¤ºï¼š</p>
<blockquote>
<p>I understand this is powerful and inherently risky. Continue?</p>
</blockquote>
<p>é€‰æ‹© <strong>Yes</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fb74ec6a75441f7b11b96f96ba4dfc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=JWjuEX4E9xKQX9nSm1Iw85pT1mE%3D" alt="5.png" loading="lazy"/></p>
<p>å¦‚æœæœ‰å°ä¼™ä¼´é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼šç³»ç»Ÿä¸çŸ¥é“å®ƒè¢«å®‰è£…åœ¨å“ªé‡Œäº†ã€‚å¤„ç†æ–¹å¼é€šå¸¸å¾ˆç®€å•ï¼š</p>
<blockquote>
<ul>
<li><strong>å…³é—­å½“å‰ PowerShell</strong></li>
<li><strong>é‡æ–°ç”¨ç®¡ç†å‘˜æ–¹å¼æ‰“å¼€ PowerShell</strong></li>
<li>ä¸€èˆ¬ <code>nvm</code>/ç¯å¢ƒå˜é‡ä¼šè‡ªåŠ¨åˆ·æ–°è·¯å¾„ï¼Œé—®é¢˜å³å¯æ¶ˆå¤±</li>
</ul>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49925214147e446f90a6c7c403e07ce4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=mG9Z1GH9drEfOgIk%2BylLL5eyrQg%3D" alt="7.png" loading="lazy"/></p>
<p>ä¹‹åæŒ‰æç¤ºé€‰æ‹©æ¨¡å‹ã€‚æˆ‘è¿™é‡Œç¤ºä¾‹ç”¨çš„æ˜¯ <strong>Kimi</strong>ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰è‡ªå·±ä¹ æƒ¯é€‰æ‹©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/605f91a9d9924256a68a83d883dff7ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=qhnQ3Ebjxwgeh9NLaZba970L06I%3D" alt="8.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹ä¸‹é…ç½®ï¼Œä¸»è¦è¾“å…¥API  keyï¼Œå…¶ä»–éƒ½å¯ä»¥é»˜è®¤ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e19602e5230742e284b0e69ad4c0d020~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=woNnCQLgHmdWa1v3un6lrm55idQ%3D" alt="9.png" loading="lazy"/></p>
<p>æ¥ç€é…ç½®é€šè®¯å·¥å…·ï¼Œè™½ç„¶å®˜æ–¹è¿™é‡Œç›´æ¥å¯ä»¥é€‰é£ä¹¦ï¼Œä½†å®˜æ–¹æ–‡æ¡£æ˜ç¡®å»ºè®® <strong>Windows é€šè¿‡ WSL2 è¿è¡Œ</strong>ï¼Œå¹¶ä¸”æåˆ°åŸç”Ÿ Windows æœªæµ‹è¯•ã€æ›´å®¹æ˜“å‡ºé—®é¢˜ã€‚å¹¶ä¸”æˆ‘å®æµ‹è¿™é‡Œä¸‹è½½æ’ä»¶ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå…ˆè·³è¿‡ï¼Œåç»­å†å®‰è£…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a7ad10229ca4b329d81bb6adb4e9b6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=VmZC7Vc98cRaRz9Y%2BsYGUVMQWz8%3D" alt="11.png" loading="lazy"/></p>
<p>skillä¹Ÿå…ˆè·³è¿‡ï¼Œåç»­å’±ä»¬åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æ ¹æ®è‡ªå·±çš„å·¥ä½œæµæ…¢æ…¢è¿­ä»£è‡ªå·±çš„skillã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc4331d063754f92ad641c657cda633d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=Smb9vF5H%2FuegUnNoMVlTFBDJOQQ%3D" alt="12.png" loading="lazy"/></p>
<p>å®‰è£…å¯åŠ¨ç½‘å…³åï¼Œå®ƒä¼šè‡ªåŠ¨æ–°å¼€ä¸€ä¸ª PowerShell çª—å£ï¼Œéƒ½ä¸è¦å…³é—­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbbe48a09c064117aad539748ad8c130~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=hRn3BIKJDywlhdls%2BdHN26JvW6g%3D" alt="13.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b06d6a5211dc4b3baecb867c7e7b0360~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=iWEbZmPwuv%2BAkf33zm5GuFKAo50%3D" alt="14.png" loading="lazy"/></p>
<p>æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€æ§åˆ¶å°ã€‚åç»­ä½ ä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2F127.0.0.1%3A18789%2F" target="_blank" title="http://127.0.0.1:18789/" ref="nofollow noopener noreferrer">http://127.0.0.1:18789/</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b29ea936ddc1486eae25ec47ccaba6b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=sqiLd8A7OEiiSpl7YI9b7tc6nww%3D" alt="15.png" loading="lazy"/></p>
<p>å‘æ¶ˆæ¯æµ‹è¯•ï¼Œæœ‰å›å¤å°±è¯´æ˜å®‰è£…æˆåŠŸï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b3db6be653243069073215c181f80e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=52tYS8iTN23Rl5eqr0cPXzf2jWo%3D" alt="16.png" loading="lazy"/></p>
<h2 data-id="heading-6">ä¸‰ã€é…ç½®è¿æ¥é£ä¹¦</h2>
<p>æ•´ä½“æ€è·¯æ˜¯ä¸¤æ­¥ï¼š</p>
<ol>
<li>åœ¨ OpenClaw é‡Œå®‰è£…é£ä¹¦æ’ä»¶</li>
<li>åœ¨é£ä¹¦å¼€æ”¾å¹³å°åˆ›å»ºåº”ç”¨ â†’ é…æƒé™/äº‹ä»¶ â†’ å‘å¸ƒç‰ˆæœ¬ â†’ å›åˆ° OpenClaw å¡« AppID/Secret</li>
</ol>
<h3 data-id="heading-7">1ï¼‰å®‰è£…é£ä¹¦æ’ä»¶</h3>
<p>ä½ å¯ä»¥åœ¨æ§åˆ¶å°é‡Œè®©å®ƒå¸®ä½ æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">openclaw plugins install @m1heng-clawd/feishu
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92eb563ef66046f99663e0b783cf7dc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=Y2drbEqAL4eNsL%2FaQ7RoWQITTq4%3D" alt="17.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8655dae9cb7d4f6a824d7afa1b40c46f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=WN%2Bp7RB%2FoZ3j%2BcZ1bLW3zjhMoAU%3D" alt="18.png" loading="lazy"/></p>
<blockquote>
<p>æ’ä»¶å®‰è£…å¯èƒ½è¦ç­‰ä¸€ä¼šå„¿ï¼Œè¿™æ®µæ—¶é—´ä½ å¯ä»¥å»é£ä¹¦å¼€æ”¾å¹³å°æŠŠåº”ç”¨å…ˆå»ºå¥½ã€‚</p>
</blockquote>
<h3 data-id="heading-8">2ï¼‰é£ä¹¦å¼€æ”¾å¹³å°åˆ›å»ºåº”ç”¨</h3>
<p>è¿›å…¥é£ä¹¦å¼€æ”¾å¹³å°ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.feishu.cn%2F%25EF%25BC%258C%25E5%2588%259B%25E5%25BB%25BA%25E4%25B8%2580%25E4%25B8%25AA%25E5%25BA%2594%25E7%2594%25A8%25EF%25BC%258C%25E5%25B9%25B6%25E6%25B7%25BB%25E5%258A%25A0%25E6%259C%25BA%25E5%2599%25A8%25E4%25BA%25BA%25E5%25BA%2594%25E7%2594%25A8%25E8%2583%25BD%25E5%258A%259B%25E3%2580%2582" target="_blank" title="https://open.feishu.cn/%EF%BC%8C%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%BA%94%E7%94%A8%EF%BC%8C%E5%B9%B6%E6%B7%BB%E5%8A%A0%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%BA%94%E7%94%A8%E8%83%BD%E5%8A%9B%E3%80%82" ref="nofollow noopener noreferrer">open.feishu.cn/ï¼Œåˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œå¹¶æ·»åŠ â€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de92703fe3854d6a991f5d24628f0a3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=wXtD2oSWiRIX9%2BwDE7voeBctYME%3D" alt="19.png" loading="lazy"/></p>
<p>ç„¶åæŠŠ <strong>App ID</strong> å’Œ <strong>App Secret</strong> å¤åˆ¶å‡ºæ¥å¤‡ç”¨ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/960d82e1c33546959f087c49364cf475~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=mRcf6dEw9jLlmAivmUhYkYSulyM%3D" alt="20.png" loading="lazy"/></p>
<p>æŠŠè¿™ä¸¤é¡¹æä¾›ç»™ OpenClaw ï¼Œè®©å®ƒå®Œæˆé…ç½®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30220fa6129047eba58d3c062163064e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=GVYpUb8XqyFrcl3AaJHIImGZs8k%3D" alt="20-1.png" loading="lazy"/></p>
<h3 data-id="heading-9">3ï¼‰æ‰¹é‡å¯¼å…¥æƒé™</h3>
<p>è¿›å…¥ <strong>æƒé™ç®¡ç†</strong> â†’ æ‰¾åˆ°ã€Œæ‰¹é‡å¯¼å…¥å¯¼å‡ºæƒé™ã€â†’ æƒé™é…ç½® JSON â†’ ç²˜è´´å¯¼å…¥ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scopes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tenant"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"aily:file:read"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"aily:file:write"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"application:application.app_message_stats.overview:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"application:application:self_manage"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"application:bot.menu:write"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"contact:user.employee_id:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"corehr:file:download"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"event:ip_list"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:chat.access_event.bot_p2p_chat:read"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:chat.members:bot_access"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message.group_at_msg:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message.p2p_msg:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message:send_as_bot"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:resource"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"user"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"aily:file:read"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"aily:file:write"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"im:chat.access_event.bot_p2p_chat:read"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¯¼å…¥å®Œæˆåç‚¹å‡»ã€Œç¡®è®¤æ–°å¢æƒé™ã€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb41ddaca6dc48fda9561c0ca1a96072~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=rszLgU3oPMIKwRJ9moLAs6ISxWE%3D" alt="21.png" loading="lazy"/></p>
<h3 data-id="heading-10">4ï¼‰äº‹ä»¶è®¢é˜…</h3>
<p>è¿›å…¥ã€Œäº‹ä»¶ä¸å›è°ƒã€é¡µé¢ï¼š</p>
<ul>
<li>ã€Œäº‹ä»¶é…ç½®ã€â†’ã€Œè®¢é˜…æ–¹å¼ã€</li>
<li>é€‰æ‹©ï¼š<strong>ä½¿ç”¨é•¿è¿æ¥æ¥æ”¶äº‹ä»¶</strong></li>
<li>ä¿å­˜</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a900916b4654ffeb7ece91fae52d655~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=ESwmYT4KwMLq15pbt4NaInJTdSQ%3D" alt="22.png" loading="lazy"/></p>
<blockquote>
<p>å¦‚æœæç¤ºâ€œæ²¡æœ‰å»ºç«‹é•¿è¿æ¥â€ï¼š</p>
<ul>
<li>å…ˆåˆ«æ…Œï¼Œé€šå¸¸ç­‰ 1ï½2 åˆ†é’Ÿå†ç‚¹ä¿å­˜å°±å¥½</li>
<li>å¦‚æœç­‰å¾ˆä¹…ä»ä¸è¡Œï¼Œä¼˜å…ˆæ£€æŸ¥ <strong>OpenClaw ç½‘å…³æ˜¯å¦æ­£å¸¸è¿è¡Œ</strong>ï¼Œå¹¶æŸ¥çœ‹æ—¥å¿—ï¼ˆä¸‹é¢ç¬¬å››éƒ¨åˆ†ç»™äº†å‘½ä»¤ï¼‰</li>
</ul>
</blockquote>
<h3 data-id="heading-11">5ï¼‰æ·»åŠ æ¥æ”¶æ¶ˆæ¯äº‹ä»¶</h3>
<p>åœ¨ã€Œäº‹ä»¶é…ç½®ã€é¡µé¢ç‚¹å‡»ã€Œæ·»åŠ äº‹ä»¶ã€ï¼Œæœç´¢å¹¶æ·»åŠ ï¼š</p>
<ul>
<li><code>im.message.receive_v1</code></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfc212bebfeb4ddfa56522801cfd0234~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=GlZfyEQLruArpBwJzJJunFMB29I%3D" alt="23.png" loading="lazy"/></p>
<blockquote>
<p>ä¸æ·»åŠ è¿™ä¸ªäº‹ä»¶ï¼Œæœºå™¨äººå°±æ— æ³•æ”¶åˆ°ä½ çš„æ¶ˆæ¯ã€‚</p>
</blockquote>
<h3 data-id="heading-12">6ï¼‰å‘å¸ƒç‰ˆæœ¬</h3>
<p>è¿›å…¥ã€Œç‰ˆæœ¬ç®¡ç†ä¸å‘å¸ƒã€ï¼š</p>
<ul>
<li>åˆ›å»ºç‰ˆæœ¬</li>
<li>å‘å¸ƒ</li>
</ul>
<p>åªæœ‰å‘å¸ƒåï¼Œå‰é¢çš„é…ç½®æ‰ä¼šçœŸæ­£ç”Ÿæ•ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51bbee8f79aa438cba32668d7326cae5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=xmQmSlkFAVX2ti2ftOgm8q5510M%3D" alt="24.png" loading="lazy"/></p>
<p>ç„¶ååœ¨é£ä¹¦é‡Œæ‰¾åˆ°ä½ åˆšåˆ›å»ºçš„æœºå™¨äººï¼Œå‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œå®ƒä¼šè‡ªåŠ¨å›å¤ä¸€ä¸ªé…å¯¹ç </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f7e0fa260f5419587638caa4a680261~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=4DI2yL%2FuZVyJXpFKuXMlqea5hyw%3D" alt="25.png" loading="lazy"/></p>
<p>å¤åˆ¶è¿™ä¸ªé…å¯¹ç ï¼Œæ‰“å¼€ Clawdbot çš„ Web UIï¼ˆå°±æ˜¯å‰é¢é‚£ä¸ªæ§åˆ¶å°ï¼‰ï¼ŒæŠŠé…å¯¹ç å‘ç»™å®ƒï¼ŒClawdbot ä¼šè‡ªåŠ¨å®Œæˆç»‘å®šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f2177ca181c4b889deb7aab211272fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=%2BR0zUdiDGZQabkLfPvoODt72hfE%3D" alt="26.png" loading="lazy"/></p>
<p>ç»‘å®šæˆåŠŸåï¼Œä½ å°±å¯ä»¥åœ¨é£ä¹¦é‡Œè·Ÿ Clawdbot æ„‰å¿«äº¤æµäº†ï¼Œä¹Ÿå¯ä»¥æŠŠæœºå™¨äººæ‹‰åˆ°å…¬å¸ç¾¤é‡Œï¼Œè®©æ‰€æœ‰å°ä¼™ä¼´éƒ½èƒ½ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/633ab41e53e347918d013af6c3c54c40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=oyyf1ayhQNPbpBWC1ZbSW0tN1gU%3D" alt="27.png" loading="lazy"/></p>
<h2 data-id="heading-13">å››ã€å¸¸ç”¨å‘½ä»¤ï¼ˆæ’æŸ¥/ä¿®å¤å¿…å¤‡ï¼‰</h2>
<p>ä¸‹é¢è¿™äº›å‘½ä»¤éå¸¸å®ç”¨ï¼šé…ç½®è¿‡ç¨‹ä¸­é‡åˆ°å¡æ­»ã€æ’ä»¶å¼‚å¸¸ã€ç½‘å…³æ²¡èµ·ç­‰é—®é¢˜ï¼Œä¼˜å…ˆç”¨å®ƒä»¬è‡ªæŸ¥ã€‚</p>
<pre><code class="hljs language-powershell" lang="powershell"># å¯åŠ¨ç½‘å…³
openclaw gateway start

# é‡å¯ç½‘å…³ï¼ˆåˆ·æ–°æœºå™¨äººçŠ¶æ€ï¼‰
openclaw gateway restart

# é‡ç½®/æ›´æ”¹ API ç­‰é…ç½®
openclaw config

# è¯Šæ–­æ£€æŸ¥
openclaw doctor

# å®æ—¶æŸ¥çœ‹æ—¥å¿—ï¼ˆå¼ºçƒˆæ¨èï¼šå‡º bug åŸºæœ¬éƒ½é å®ƒå®šä½ï¼‰
openclaw logs follow
</code></pre>
<p>å¥½äº†ï¼Œè¿™å°±æ˜¯æ•´ä¸ªå®‰è£…å’Œé…ç½®æµç¨‹ã€‚</p>
<p>å¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œå¯ä»¥å¸®æˆ‘ç‚¹ä¸ªèµğŸ‘ï¼Œä¹Ÿå¯ä»¥è½¬å‘ç»™å…¶ä»–ä½ è§‰å¾—éœ€è¦çš„æœ‹å‹ä»¬ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±05ï¼šå·¥å…·è°ƒç”¨ Function Callingã€çŸ¥è¯†ä¸æ€è·¯ç¯‡ã€‘]]></title>    <link>https://juejin.cn/post/7602800677712019490</link>    <guid>https://juejin.cn/post/7602800677712019490</guid>    <pubDate>2026-02-05T00:14:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602800677712019490" data-draft-id="7602800677712003106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±05ï¼šå·¥å…·è°ƒç”¨ Function Callingã€çŸ¥è¯†ä¸æ€è·¯ç¯‡ã€‘"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-05T00:14:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘¸é±¼çš„æ˜¥å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1714893870865303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±05ï¼šå·¥å…·è°ƒç”¨ Function Callingã€çŸ¥è¯†ä¸æ€è·¯ç¯‡ã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893870865303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘¸é±¼çš„æ˜¥å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:14:48.000Z" title="Thu Feb 05 2026 00:14:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><p>LLM é—®ä¸–ä¹‹åï¼Œå¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œäººä»¬å‘ç°äº†å¾ˆå¤šç”¨ä¾‹å¯ä»¥è¯æ˜ï¼š</p>
<blockquote>
<p>AIä¸è¡Œå•Šï¼Œä¸æ˜¯äººå·¥æ™ºèƒ½ï¼Œè€Œæ˜¯äººå·¥æ™ºéšœã€‚</p>
</blockquote>
<p>æ¯”æ–¹è¯´ï¼Œæœ€ç»å…¸çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼š</p>
<pre><code class="hljs">7.11 å’Œ 7.9 å“ªä¸ªæ•°å­—æ›´å¤§ï¼Ÿ
</code></pre>
<p><img src="https://pic.zhangshichun.top/pic/20260201161528631.png" alt="" loading="lazy"/></p>
<p>ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹æˆ‘ä»¬ç¬¬ä¸€èŠ‚è¯¾ã€æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±02ï¼šæ­å»ºç¯å¢ƒåŠè¯­è¨€é€‰æ‹©ã€‘é‡Œçš„ <code>check_env.py</code>ä»£ç ï¼Œé—®AIï¼š"ä»Šå¤©æ˜¯å‡ æœˆå‡ æ—¥ï¼Ÿ"</p>
<p><code>deepseek</code> ä¼šè‡ªä¿¡åœ°å›ç­”ä½ ï¼š</p>
<p><img src="https://pic.zhangshichun.top/pic/20260201161737903.png" alt="" loading="lazy"/></p>
<p>æ—©æœŸçš„AIå¯¹äºè¿™æ ·çš„ç”¨ä¾‹æ¯«æ— é˜²å¤‡ï¼Œé—¹äº†å¾ˆå¤šç¬‘è¯ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨Agentæ—¶ä»£ï¼Œè¿™äº›æ ¹æœ¬ä¸æ˜¯é—®é¢˜ï¼Œä½ å¯ä»¥ç¨³å®šè§£å†³æ‰€æœ‰åŠ å‡ä¹˜é™¤ï¼Œå¯ä»¥å‡†ç¡®æ¯”è¾ƒå¤§å°ï¼Œå¯ä»¥çŸ¥é“ä»Šå¤©æ˜¯å‡ æœˆå‡ æ—¥ã€‚</p>
<p>æ¯”å¦‚ï¼Œæ— è®ºä½ å»deepseekå®˜ç½‘ï¼Œæˆ–è€…æ˜¯è±†åŒ…ï¼Œæé—®"ä»Šå¤©æ˜¯å‡ æœˆå‡ æ—¥ï¼Ÿ"</p>
<p>éƒ½èƒ½å¾—åˆ°å‡†ç¡®è€Œæ­£ç¡®çš„å›ç­”ï¼š</p>
<p><img src="https://pic.zhangshichun.top/pic/20260201161852635.png" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>å› ä¸ºå®˜ç½‘å’ŒAPPéƒ½åˆ©ç”¨äº†æˆ‘ä»¬ä»Šå¤©è¦å­¦ä¹ çš„å†…å®¹ï¼šFunction Callingã€‚</p>
<p><strong>å·¥å…·è°ƒç”¨</strong>ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Function Callçš„å†å²åŠç°çŠ¶</h2>
<p>ä¸ºäº†è§£å†³æ—©æœŸå¤§è¯­è¨€æ¨¡å‹æ— æ³•åšç²¾ç»†æ´»å„¿ï¼Œæ— æ³•åº”å¯¹å‡†ç¡®è®¡ç®—å’Œå®æ—¶ä¿¡æ¯è·å–çš„é—®é¢˜ã€‚</p>
<p>2023å¹´6æœˆ13æ—¥ ï¼Œ<code>OPENAI</code> åœ¨å‘å¸ƒ gpt-4-0613 å’Œ gpt-3.5-turbo-0613 ç‰ˆæœ¬æ—¶ï¼Œæ¨å‡ºäº†ä¸€é¡¹è½°åŠ¨ä¸–ç•Œçš„è®¾è®¡å’Œèƒ½åŠ›ï¼š</p>
<p><strong>Function Calling</strong>ã€‚</p>
<h3 data-id="heading-1">å‘å¸ƒè¿™ä¸ªåŠŸèƒ½ä¹‹å‰</h3>
<p>å¼€å‘è€…ï¼ˆåŒ…æ‹¬æ—©æœŸçš„ LangChain ç”¨æˆ·ï¼‰æƒ³è¦è®© AI è°ƒç”¨å·¥å…·ï¼Œå¿…é¡»ä½¿ç”¨ ReAct æ¨¡å¼ã€‚</p>
<p>åšæ³•ï¼šä½ åœ¨ System Prompt é‡Œå†™ä¸€å¤§æ®µè¯ï¼šâ€œä½ æ˜¯ä¸€ä¸ªå¯ä»¥ä½¿ç”¨å·¥å…·çš„ AIã€‚å¦‚æœä½ æƒ³ç”¨è®¡ç®—å™¨ï¼Œè¯·è¾“å‡º Action: Calculator, Input: 1+1ã€‚â€</p>
<p>ç—›ç‚¹ï¼š</p>
<ul>
<li>
<p>ä¸ç¨³å®šï¼šAI ç»å¸¸å¿˜äº†æ ¼å¼ï¼Œæˆ–è€…å¤šæ‰“äº†ä¸ªæ ‡ç‚¹ç¬¦å·ã€‚</p>
</li>
<li>
<p>è§£æéš¾ï¼šå¼€å‘è€…å¿…é¡»å†™å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegexï¼‰å»æŠ“å– AI çš„å›å¤ã€‚</p>
</li>
<li>
<p>Token æµªè´¹ï¼šä½ éœ€è¦æŠŠå·¥å…·çš„æè¿°å†™åœ¨ Prompt é‡Œï¼Œå ç”¨å¤§é‡ä¸Šä¸‹æ–‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">OpenAIçš„åˆ›æ–°</h3>
<p>OpenAI å—Metaçš„Toolformerå¯å‘ï¼Œé€šè¿‡å¾®è°ƒï¼ˆFine-tuningï¼‰ï¼Œè®©æ¨¡å‹åœ¨åº•å±‚â€œåŸç”Ÿâ€æ”¯æŒäº†è°ƒç”¨å¤–éƒ¨å·¥å…·çš„èƒ½åŠ›ã€‚</p>
<p>ä½ ä¸å†éœ€è¦åœ¨ Prompt é‡Œæ±‚ AI â€œè¯·æŒ‰æ ¼å¼è¾“å‡ºâ€ã€‚ä½ åªéœ€è¦æŠŠ JSON Schema ä¼ ç»™ APIï¼Œæ¨¡å‹å°±èƒ½æåº¦ç¨³å®šåœ°è¾“å‡ºç»“æ„åŒ–çš„ JSON è°ƒç”¨æŒ‡ä»¤ã€‚</p>
<p>å¯ä»¥è¯´ï¼š<strong>Function Calling æ˜¯ OpenAI å°†â€œå­¦æœ¯ç•Œçš„ Tool Learningâ€è½¬åŒ–ä¸ºâ€œå·¥ä¸šçº§ API æ ‡å‡†â€çš„äº§ç‰©ã€‚</strong></p>
<p>å®ƒæ ‡å¿—ç€ AI Agent å¼€å‘ä»â€œæ‰‹æ“ Prompt çš„é»‘å®¢æ—¶ä»£â€è¿›å…¥äº†â€œæ ‡å‡†åŒ–å·¥ç¨‹å¼€å‘æ—¶ä»£â€ã€‚ç°åœ¨ï¼ŒAnthropic (Claude)ã€Google (Gemini)ã€DeepSeek ç­‰ä¸»æµæ¨¡å‹å‚å•†éƒ½è·Ÿéšå¹¶æ”¯æŒäº†è¿™ä¸€æ ‡å‡†ã€‚</p>
<h2 data-id="heading-3">äºŒã€Function Calling åŸºæœ¬æµç¨‹</h2>
<p>æˆ‘ç”»äº†ä¸€å¼ å›¾ï¼Œç»™å¤§å®¶è§£é‡Šå½“ç”¨æˆ·è¾“å…¥â€œåŒ—äº¬ä»Šå¤©å¤©æ°”å¦‚ä½•â€ä¹‹åï¼Œæ•´ä¸ªçš„æ¶æ„æµè½¬ï¼š</p>
<p><img src="https://pic.zhangshichun.top/pic/20260201203345449.png" alt="" loading="lazy"/></p>
<p>ä½ ä¼šå‘ç°ä¸€ä¸ªé‡è¦çš„å®šå¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">LLM å¯¹äº Agent è€Œè¨€ï¼Œå…¶å®æ˜¯æ— çŠ¶æ€çš„ã€‚

å½“AgentæœLLMå‘èµ·ä¼šè¯æ—¶ï¼Œéœ€è¦æ¯æ¬¡éƒ½æºå¸¦å†å²è®°å½•ï¼Œä»¥å®Œæˆå¤šè½®ä¼šè¯ã€‚

æ¯æ¬¡éƒ½éœ€è¦æºå¸¦æ³¨å†Œåˆ°agentä¸­çš„<span class="hljs-keyword">function</span>åˆ—è¡¨ï¼Œæ¯æ¬¡éƒ½éœ€è¦å†™ä»£<span class="hljs-keyword">system</span> promptã€‚
</code></pre>
<p><img src="https://pic.zhangshichun.top/pic/20260201204006127.png" alt="" loading="lazy"/></p>
<blockquote>
<p>ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆç”µå½±ã€Šåˆæ‹50æ¬¡ã€‹é‡Œçš„å¥³ä¸»è§’ï¼Œæˆ–è€…æ˜¯ä¸€æ¡åªæœ‰ 7 ç§’è®°å¿†çš„é‡‘é±¼ã€‚ æ— è®ºä½ ä»¬ä¹‹å‰èŠå¾—å¤šä¹ˆçƒ­ç«æœå¤©ï¼Œå½“ä½ å‘èµ·çš„ HTTP è¯·æ±‚ç»“æŸé‚£ä¸€åˆ»ï¼Œå®ƒå°±æŠŠä½ å½»åº•å¿˜äº†ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œè¿™å¸¦æ¥äº†ä¸‰ä¸ªå¾ˆå¤§çš„è´Ÿæ‹…é—®é¢˜ï¼š</p>
<ol>
<li>äººè®¾è´Ÿæ‹…
<ul>
<li>æ¯æ¬¡ä¼šè¯éƒ½è¦é‡æ–°å£°æ˜ä¸€æ¬¡äººè®¾ï¼Œä¸ç„¶LLMå°±ä¼šä¸çŸ¥é“è¯¥ä¿¡æ¯ã€‚</li>
</ul>
</li>
<li>æŠ€èƒ½æ ‘è´Ÿæ‹…
<ul>
<li>æ¯æ¬¡ä¼šè¯éƒ½è¦é‡æ–°å£°æ˜ä¸€æ¬¡æ‰€æœ‰Agentæ‹¥æœ‰çš„å…¨æŠ€èƒ½Json Schemaï¼Œè¿™ä¼šå ç”¨å·¨å¤§çš„Tokenã€‚</li>
</ul>
</li>
<li>è®°å¿†è´Ÿæ‹…
<ul>
<li>éšç€å¯¹è¯è¿›è¡Œï¼Œmessages åˆ—è¡¨ä¼šè¶Šæ¥è¶Šé•¿ã€‚</li>
</ul>
</li>
</ol>
<p>è¿™ä¼šå¯¼è‡´ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>è´¹é’±ï¼šLLM æ˜¯æŒ‰ Input Token æ”¶è´¹çš„ã€‚ç¬¬ 1 å¥çš„å†å²ï¼Œåœ¨ç¬¬ 100 è½®å¯¹è¯æ—¶è¢«é‡å¤è®¡è´¹äº† 100 æ¬¡ã€‚</li>
<li>å˜æ…¢ï¼šå¤„ç†çš„æ–‡å­—è¶Šå¤šï¼Œé¦–å­—å»¶è¿Ÿï¼ˆTTFTï¼‰è¶Šé«˜ã€‚</li>
<li>æº¢å‡ºï¼šä¸€æ—¦è¶…è¿‡æ¨¡å‹çš„ä¸Šä¸‹æ–‡ä¸Šé™ï¼ˆæ¯”å¦‚ 32k æˆ– 128kï¼‰ï¼Œæ¨¡å‹å°±ä¼šæŠ¥é”™æˆ–å¼ºåˆ¶æˆªæ–­ï¼Œå¯¼è‡´â€œå¤±å¿†â€ã€‚</li>
<li>å˜è ¢ï¼šä¸€æ—¦tokenè¿‡é•¿ï¼ŒLLMåœ¨å·¨å¤§çš„tokené‡Œå…³äºä¼šè¯é‡Œçš„å…³é”®ä¿¡æ¯çš„æ³¨æ„åŠ›ä¼šè¢«ç¨€é‡Šã€‚</li>
</ul>
<p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯æ‰€æœ‰Agentå¼€å‘å¿…é¡»é¢å¯¹çš„ã€‚è¿™é‡Œä¸è¿‡å¤šå±•å¼€äº†ï¼Œå…ˆæä¸€ä¸‹ã€‚</p>
<p><img src="https://pic.zhangshichun.top/pic/20260202181054274.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">ä¸‰ã€å·¥å…·å®šä¹‰ä¸æ³¨å†Œ</h2>
<p>åœ¨è®©AIçŸ¥é“åº”è¯¥åœ¨ä½•æ—¶è°ƒç”¨å·¥å…·çš„ç¬¬ä¸€æ­¥ï¼Œç›¸å½“äºä½ éœ€è¦åœ¨æ¯æ¬¡ä¼šè¯é‡Œé™„å¸¦ä¸€ä¸ªç›®å½•ï¼Œå‘Šè¯‰AIï¼š</p>
<blockquote>
<p>å—¨ï¼Œç‰¢Aï¼Œæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªåå«<code>get_current_time</code>çš„å·¥å…·ï¼Œå®ƒæ˜¯ä¸ªæ–¹æ³•ï¼Œä½œç”¨æ˜¯â€œè·å–å½“å‰å‡†ç¡®çš„æ—¶é—´â€ã€‚</p>
</blockquote>
<p>è¿™æ ·ï¼Œå½“æ²¡æœ‰è®°å¿†çš„LLMé¢å¯¹â€œå½“å‰å‡†ç¡®æ—¶é—´æ˜¯ä»€ä¹ˆâ€çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šçŸ¥é“è¦è°ƒç”¨è¿™ä¸ªå·¥å…·ã€‚</p>
<p>å¾ˆå·§ï¼Œä¸ŠèŠ‚è¯¾æˆ‘ä»¬æ‰ä»‹ç»äº† JSON Schemaï¼Œè¿™èŠ‚è¯¾çš„ <code>Function Calling</code> æ³¨å†Œå·¥å…·ï¼Œä¹Ÿéœ€è¦ç”¨åˆ°JSON Schemaã€‚</p>
<p>ä½†å®ƒä¸æ˜¯å®Œå…¨æ ‡å‡†çš„ JSON Schemaï¼Œä½ å¯ä»¥å…ˆçœ‹çœ‹ç»“æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python">tools = [
    {
        <span class="hljs-comment"># 1. ç±»å‹ï¼šç›®å‰ä»…æ”¯æŒ "function"</span>
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
        <span class="hljs-comment"># 2. å‡½æ•°å®šä¹‰ä¸»ä½“</span>
        <span class="hljs-string">"function"</span>: {
            <span class="hljs-comment"># 2.1 (å¿…å¡«) å‡½æ•°å</span>
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"..."</span>,
            <span class="hljs-comment"># 2.2 (å¼ºçƒˆæ¨è) ç»™ AI çœ‹çš„å‡½æ•°è¯´æ˜ä¹¦</span>
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"..."</span>,
            <span class="hljs-comment"># 2.3 (å¿…å¡«) å‚æ•°å®šä¹‰ï¼Œéµå¾ª JSON Schema æ ‡å‡†</span>
            <span class="hljs-string">"parameters"</span>: {        
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: { ... },
                <span class="hljs-string">"required"</span>: [...]
            },
            <span class="hljs-comment"># (å¯é€‰) DeepSeek/OpenAI æ”¯æŒçš„ä¸¥æ ¼æ¨¡å¼ï¼Œè®¾ä¸º True å¼ºåˆ¶è¾“å‡ºç¬¦åˆ Schema</span>
            <span class="hljs-string">"strict"</span>: <span class="hljs-literal">True</span> 
        }
    }
]
</code></pre>
<p>å¦‚æœæƒ³æ‰¾å®˜æ–¹æ–‡æ¡£çš„è¯ï¼Œå›½å†…å¼€å‘è€…ä¼˜å…ˆå»ºè®®å‚è€ƒ <code>deepseek</code> çš„ <code>Function Calling</code> æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fapi-docs.deepseek.com%2Fzh-cn%2Fguides%2Ffunction_calling" target="_blank" title="https://api-docs.deepseek.com/zh-cn/guides/function_calling" ref="nofollow noopener noreferrer">api-docs.deepseek.com/zh-cn/guideâ€¦</a></p>
<p>å…¶ä¸­æåˆ°ï¼š</p>
<blockquote>
<p>ç”¨æˆ·éœ€è¦è®¾ç½® base_url="<a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.deepseek.com%2Fbeta" target="_blank" title="https://api.deepseek.com/beta" ref="nofollow noopener noreferrer">api.deepseek.com/beta</a>" æ¥å¼€å¯ Beta åŠŸèƒ½</p>
</blockquote>
<p>å—¯ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥é»˜é»˜åœ°å»ä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬ <code>.env</code> æ–‡ä»¶çš„ BASE_URL å‚æ•°ï¼Œä»¥æ±‚è·å¾—æ›´ç¨³å®šçš„è¿”å›ç»“æ„ã€‚</p>
<p>å¦å¤–è¿˜å¯ä»¥å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fdocs%2Fguides%2Ffunction-calling" target="_blank" title="https://platform.openai.com/docs/guides/function-calling" ref="nofollow noopener noreferrer">platform.openai.com/docs/guidesâ€¦</a></p>
<p>è®©æˆ‘ä»¬æ ¹æ®ä¸Šé¢å­¦åˆ°çš„ï¼Œéšæ‰‹æ³¨å†Œä¸¤ä¸ªå·¥å…·æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®šä¹‰å·¥å…·åˆ—è¡¨ </span>
tools = [
    <span class="hljs-comment"># æ–¹æ³•Aï¼šè·å–å½“å‰ç²¾å‡†æ—¶é—´</span>
    {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
        <span class="hljs-string">"function"</span>: {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"get_current_time"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"è·å–å½“å‰ç²¾ç¡®æ—¶é—´"</span>,
            <span class="hljs-string">"parameters"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>, <span class="hljs-string">"properties"</span>: {}}
        }
    },
    <span class="hljs-comment"># æ–¹æ³•Bï¼šè®¡ç®—ä¸¤ä¸ªæ•°çš„ä¹˜ç§¯</span>
    {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
        <span class="hljs-string">"function"</span>: {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"calculate_multiply"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"è®¡ç®—ä¸¤ä¸ªæ•°çš„ä¹˜ç§¯"</span>,
            <span class="hljs-string">"parameters"</span>: {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: {
                    <span class="hljs-string">"a"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"ç¬¬ä¸€ä¸ªæ•°å­—"</span>},
                    <span class="hljs-string">"b"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"ç¬¬äºŒä¸ªæ•°å­—"</span>}
                },
                <span class="hljs-string">"required"</span>: [<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>]
            }
        }
    }
]
</code></pre>
<p>æœ‰äº† <code>Schema</code>ï¼Œå¦‚ä½•æ·»åŠ åˆ°ä¼šè¯é‡Œå»å‘¢ï¼Ÿ</p>
<p>éå¸¸ç®€å•ï¼</p>
<pre><code class="hljs language-python" lang="python">response = client.chat.completions.create(
    model=<span class="hljs-string">"deepseek-chat"</span>,
    messages=messages,
    tools=tools, <span class="hljs-comment"># ã€å…³é”®ã€‘æŠŠå·¥å…·ç®±é€’ç»™å®ƒ</span>
)
</code></pre>
<h2 data-id="heading-5">å››ã€è¯†åˆ«AIçš„è¿”å›ï¼Œè°ƒç”¨å…·ä½“çš„æ–¹æ³•</h2>
<p>åˆšåˆšæˆ‘ä»¬åœ¨è¯·æ±‚é‡Œé™„å¸¦äº†toolsæ¸…å•ã€‚</p>
<p>é‚£ä¹ˆï¼Œæ€ä¹ˆè¯†åˆ«AIåœ¨ä»€ä¹ˆæ—¶å€™éœ€è¦è°ƒç”¨æˆ‘ä»¬çš„toolså‘¢?</p>
<p>å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è·å– AI çš„å›å¤æ¶ˆæ¯</span>
ai_msg = response.choices[<span class="hljs-number">0</span>].message
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ai_msg.tool_callsï¼š<span class="hljs-subst">{ai_msg.tool_calls}</span>"</span>)
</code></pre>
<p>åœ¨ai_msgè¿™ä¸ªLLM è¿”å›å€¼ä¿¡æ¯é‡Œï¼Œæˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨ <code>ai_msg.tool_calls</code> è¿™ä¸ªå­—æ®µã€‚</p>
<p>å¦‚æœå®ƒæ˜¯Noneæˆ–è€…ç©ºæ•°ç»„ï¼Œåˆ™è¡¨ç¤ºAIæ²¡æœ‰æƒ³è¦è°ƒç”¨çš„<code>Function</code>ï¼Œå¦åˆ™çš„è¯ï¼Œå³ä»£è¡¨ï¼š</p>
<blockquote>
<p>åˆšæ‰è¿™ä¸€æ¬¡ä¼šè¯ï¼ŒAIæ²¡æœ‰å¾—åˆ°ç»“è®ºï¼Œè€Œæ˜¯å¸Œæœ›è°ƒç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªFunctionã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå†™å‡ºå¦‚ä¸‹çš„å¤§è‡´é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> ai_msg.tool_calls:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ¤– AI å†³å®šè°ƒç”¨å·¥å…·ï¼"</span>)
    
    <span class="hljs-comment"># å¿…é¡»æŠŠ AI çš„è¿™å¥â€œæˆ‘æƒ³è°ƒç”¨å·¥å…·â€åŠ å…¥å¯¹è¯å†å²</span>
    <span class="hljs-comment"># å¦åˆ™åé¢é€šè¿‡å·¥å…·ç»“æœå›å¤æ—¶ï¼ŒAI ä¼šå¤±å¿†</span>
    messages.append(ai_msg)

    <span class="hljs-comment"># === ä½ çš„ä»£ç ä»‹å…¥ï¼šæ‰§è¡Œå·¥å…· ===</span>
    <span class="hljs-keyword">for</span> tool_call <span class="hljs-keyword">in</span> ai_msg.tool_calls:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ¤– AI å†³å®šè°ƒç”¨å·¥å…·: <span class="hljs-subst">{tool_call.function.name}</span>"</span>)
        func_name = tool_call.function.name
        <span class="hljs-comment"># è§£æå‚æ•° (JSON å­—ç¬¦ä¸² -&gt; å­—å…¸)</span>
        func_args = json.loads(tool_call.function.arguments)
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># AI è§‰å¾—ä¸éœ€è¦å·¥å…·ï¼Œç›´æ¥å›ç­”</span>
    <span class="hljs-keyword">return</span> ai_msg.content
</code></pre>
<p>æ‹¿åˆ°æ–¹æ³•åä¸æ–¹æ³•å‚æ•°åï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯æ‰§è¡Œæ–¹æ³•ï¼Œå¾—åˆ°ç»“æœï¼Œè¿™ä¸€ç‚¹è¿åˆšæ¥è§¦ç¼–ç¨‹çš„æ–°æ‰‹éƒ½çŸ¥é“æ€ä¹ˆå†™äº†ã€‚</p>
<p>æ‹¿åˆ°ç»“æœåï¼Œåªéœ€è¦å†æ¬¡æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-ini" lang="ini">messages.append({
    "role": "tool",
    "tool_call_id": tool_call.id,
    "content": tool_result
})
<span class="hljs-comment"># === ç¬¬äºŒè½®äº¤äº’ ===</span>
<span class="hljs-attr">final_response</span> = client.chat.completions.create(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"deepseek-chat"</span>,
    <span class="hljs-attr">messages</span>=messages,
    <span class="hljs-attr">tools</span>=tools
)
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿™é‡Œçš„ç¬¬äºŒè½®äº¤äº’é‡Œè¿˜è¦å¸¦ä¸Š <code>tools</code>ï¼Ÿ</p>
<p>å› ä¸ºAgentå¹¶ä¸çŸ¥é“LLMæ˜¯å¦ä¼šå†å‘èµ·ä¸€æ¬¡Function Callingï¼Œå¦‚æœä¸æºå¸¦toolsï¼ŒLLMå°±éå¸¸å¯èƒ½åœ¨é‡åˆ°é—®é¢˜æ—¶æ— å¥ˆåœ°çç¼–æˆ–è€…æŠ¥é”™ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦é€’å½’ï¼Œæˆ–è€…å¾ªç¯ã€‚</p>
<p>è¿™å°±æ¶‰åŠåˆ°äº†ä¸€ä¸ªæ–°çš„ï¼Œæ·±åˆ»çš„ï¼Œé‡è¦çš„ï¼Œéš¾ä»¥è§„é¿çš„æ ¸å¿ƒé—®é¢˜ï¼š</p>
<blockquote>
<p>åœ¨Agentå¼€å‘ä¸­ï¼Œåº”è¯¥å¦‚ä½•ç»Ÿä¸€AIçš„æ€è€ƒä¸è¡ŒåŠ¨ï¼Œå¹¶å·§å¦™è®¾è®¡è¿™ä¸ªå¾ªç¯ã€‚</p>
</blockquote>
<p>ä¸‹ä¸€èŠ‚è¯¾å†è§ï¼</p>
<h2 data-id="heading-6">ä¸‹ä¸€æ­¥é¢„å‘Š</h2>
<p>ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°†æ¢ç´¢ Agent ç¼–ç¨‹çš„ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</p>
<blockquote>
<p>æ€è€ƒèŒƒå¼ã€‚</p>
</blockquote>
<p>æ•¬è¯·æœŸå¾…ï¼</p>
<p><img src="https://pic.zhangshichun.top/pic/ScreenShot_2026-01-26_082327_821.png" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[10ä¸‡æ•°æ®ç‚¹å¯è§†åŒ–ï¼šEchartsæ€§èƒ½ä¼˜åŒ–å®æˆ˜]]></title>    <link>https://juejin.cn/post/7602834985902145586</link>    <guid>https://juejin.cn/post/7602834985902145586</guid>    <pubDate>2026-02-05T00:37:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602834985902145586" data-draft-id="7602910573404553254" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="10ä¸‡æ•°æ®ç‚¹å¯è§†åŒ–ï¼šEchartsæ€§èƒ½ä¼˜åŒ–å®æˆ˜"/> <meta itemprop="keywords" content="ECharts,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-02-05T00:37:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è°¢å°é£"/> <meta itemprop="url" content="https://juejin.cn/user/2717648473034823"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            10ä¸‡æ•°æ®ç‚¹å¯è§†åŒ–ï¼šEchartsæ€§èƒ½ä¼˜åŒ–å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648473034823/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è°¢å°é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:37:54.000Z" title="Thu Feb 05 2026 00:37:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="vs2015">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-link,.hljs-literal,.hljs-name,.hljs-symbol{color:#569cd6}.hljs-link{text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-class,.hljs-number{color:#b8d7a3}.hljs-meta-string,.hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta-keyword,.hljs-tag{color:#9b9b9b}.hljs-template-variable,.hljs-variable{color:#bd63c5}.hljs-attr,.hljs-attribute,.hljs-builtin-name{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag{color:#d7ba7d}.hljs-addition{background-color:#144212}.hljs-addition,.hljs-deletion{display:inline-block;width:100%}.hljs-deletion{background-color:#600}</style><p>ã€€ã€€æœ€è¿‘åœ¨å·¥ä½œä¸­é‡åˆ°äº†ä¸€ä¸ªé¢‡å…·æŒ‘æˆ˜çš„éœ€æ±‚ï¼Œéœ€è¦åœ¨Webé¡µé¢ä¸Šé€šè¿‡Echartså›¾è¡¨æ¸²æŸ“è¶…è¿‡10ä¸‡æ¡ç‚¹ä½æ•°æ®ã€‚å¯¹äºå‰ç«¯å¼€å‘æ¥è¯´ï¼Œå¤§æ•°æ®é‡çš„å¯è§†åŒ–æ¸²æŸ“ä¸€ç›´æ˜¯ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯å½“æ•°æ®é‡è¾¾åˆ°10ä¸‡çº§åˆ«æ—¶ï¼Œä¸ä»…æµè§ˆå™¨è¯·æ±‚å“åº”é€Ÿåº¦å˜æ…¢ï¼Œæµè§ˆå™¨çš„æ¸²æŸ“æ€§èƒ½ç“¶é¢ˆä¼šå˜å¾—éå¸¸æ˜æ˜¾ï¼›å› æ­¤ï¼Œæœ¬æ–‡æˆ‘ä»¬å°±çœ‹ä¸‹å¦‚æœåœ¨å·¥ä½œä¸­é‡åˆ°è¿™ç§åœºæ™¯ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ã€‚</p>
<p>ã€€ã€€é¦–å…ˆä»‹ç»ä¸€ä¸‹å®é™…çš„åœºæ™¯ï¼Œæˆ‘ä»¬å›¢é˜Ÿæœ€è¿‘æ¥åˆ°ä¸€ä¸ªç‰©è”ç½‘è®¾å¤‡æ•°æ®åˆ†æéœ€æ±‚ï¼šä¸šåŠ¡æ–¹éœ€è¦æŸ¥çœ‹ç‰¹å®šè®¾å¤‡ä¸€æ®µæ—¶é—´èŒƒå›´å†…çš„è¿è¡ŒçŠ¶æ€è¶‹åŠ¿ã€‚è¿™çœ‹èµ·æ¥ä¼¼ä¹æ˜¯ä¸ªç®€å•çš„æŠ˜çº¿å›¾éœ€æ±‚ï¼Œä½†å½“æˆ‘ä»¬æ·±å…¥äº†è§£æ•°æ®è§„æ¨¡æ—¶ï¼Œå‘ç°äº†å·¨å¤§çš„æŒ‘æˆ˜ã€‚</p>
<p>ã€€ã€€é¦–å…ˆæ˜¯ä¸šåŠ¡æ–¹è¦æ±‚ä¸é™åˆ¶æ—¶é—´èŒƒå›´ï¼Œä¾‹å¦‚å¯ä»¥è·¨æ•°å¹´çš„èŒƒå›´ï¼Œä»2021å¹´åˆ°2025å¹´ï¼›è¿™å¯¹æˆ‘ä»¬å‰åç«¯æ¥è¯´ï¼Œæ„å‘³ç€æŸ¥è¯¢å’Œæ¸²æŸ“æ•°æ®é‡ä¼šéå¸¸åºå¤§ï¼Œå› ä¸ºè®¾å¤‡é‡‡é›†ä¸€èˆ¬éƒ½æ˜¯æŒ‰ç…§å›ºå®šçš„æ—¶é—´é¢‘ç‡é‡‡é›†çš„ï¼›æ¯”å¦‚å¦‚æœè®¾å¤‡æ¯éš”15åˆ†é’Ÿå°±ä¼šé‡‡é›†å‘é€ä¸€æ¬¡æ•°æ®ï¼Œä¸€å¤©çš„æ•°æ®é‡å°±æ˜¯24å°æ—¶ Ã— (60åˆ†é’Ÿ/15åˆ†é’Ÿ) = 96ä¸ªæ•°æ®ç‚¹/å¤©ï¼Œå¦‚æœæŸ¥è¯¢4å¹´çš„æ•°æ®å°±æ˜¯4å¹´* 365å¤©* 96ä¸ªæ•°æ®ç‚¹ = 14ä½™ä¸‡æ¡æ•°æ®ã€‚</p>
<p>ã€€ã€€ä¸šåŠ¡äººå‘˜ç»™æˆ‘ä»¬çš„éœ€æ±‚å¾ˆæ˜ç¡®ï¼š"æˆ‘ä»¬éœ€è¦åœ¨è¿™å¼ å›¾ä¸Šçœ‹åˆ°å››å¹´çš„å®Œæ•´è¶‹åŠ¿ï¼Œèƒ½å¤Ÿå¿«é€Ÿå‘ç°å¼‚å¸¸æ³¢åŠ¨ï¼Œå¹¶ä¸”å¯ä»¥éšæ„ç¼©æ”¾æŸ¥çœ‹ä»»æ„æ—¶é—´æ®µçš„ç»†èŠ‚"ã€‚ä»–ä»¬è¡¥å……é“ï¼š"ä¹‹å‰è¯•è¿‡æŒ‰å¤©èšåˆçš„æ•°æ®ï¼Œä½†é‚£æ ·ä¼šä¸¢å¤±å¾ˆå¤šé‡è¦ä¿¡æ¯ã€‚æ¯”å¦‚è®¾å¤‡åœ¨æŸä¸ªå…·ä½“æ—¶é—´ç‚¹çš„ç¬æ—¶å¼‚å¸¸ï¼Œåœ¨æ—¥åº¦æ•°æ®ä¸­å°±çœ‹ä¸å‡ºæ¥äº†ã€‚"</p>
<p>ã€€ã€€æˆ‘ä»¬æœ€åˆçš„å°è¯•éå¸¸ç›´æ¥ï¼Œä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰çš„æ•°æ®ï¼Œç„¶åé€šè¿‡Echartsæ¸²æŸ“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9f9c7295154459fa6306939e5b45d0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=7dN38vp3w2aDzjwTpSYRaEZujqw%3D" alt="ä¸€æ¬¡æ€§åŠ è½½" loading="lazy"/></p>
<p>ã€€ã€€ä½†æ˜¯è¯·æ±‚æ¥å£çš„æ—¶é—´å°±è¾¾åˆ°äº†14ç§’ï¼Œæ•°æ®å“åº”æ—¶æµè§ˆå™¨å†…å­˜å ç”¨æ¿€å¢ï¼Œéå¸¸å®¹æ˜“å´©æºƒå¡æ­»ï¼Œå®Œå…¨æ²¡æœ‰ç”¨æˆ·ä½“éªŒå¯è¨€ã€‚</p>
<h2 data-id="heading-0">æ•°æ®åˆ†å‰²ï¼šåŒ–æ•´ä¸ºé›¶çš„ç­–ç•¥</h2>
<p>ã€€ã€€äºæ˜¯ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬é¦–å…ˆå°è¯•æ•°æ®åˆ†å‰²ï¼Œå°†æ•°æ®æŒ‰å¤©ç»´åº¦è¿›è¡Œåˆ†å‰²ï¼Œç„¶ååˆ†åˆ«è¯·æ±‚æ•°æ®ï¼›ä¸‹é¢æ˜¯åˆ†å‰²çš„æ ¸å¿ƒå‡½æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">"dayjs"</span>;
<span class="hljs-comment">/**
 * æŒ‰æŒ‡å®šå¤©æ•°åˆ†å‰²æ—¥æœŸåŒºé—´
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} startDate å¼€å§‹æ—¥æœŸ
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} endDate ç»“æŸæ—¥æœŸ
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} num åˆ†å‰²å¤©æ•°
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">separateDate</span>(<span class="hljs-params">startDate, endDate, num = <span class="hljs-number">180</span></span>) {
  <span class="hljs-comment">// ä½¿ç”¨dayjs.jsåˆ›å»ºæ—¥æœŸå¯¹è±¡</span>
  <span class="hljs-keyword">const</span> start = <span class="hljs-title function_">dayjs</span>(startDate);
  <span class="hljs-keyword">const</span> end = <span class="hljs-title function_">dayjs</span>(endDate);

  <span class="hljs-comment">// éªŒè¯æ—¥æœŸæœ‰æ•ˆæ€§</span>
  <span class="hljs-keyword">if</span> (!start.<span class="hljs-title function_">isValid</span>() || !end.<span class="hljs-title function_">isValid</span>()) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ— æ•ˆçš„æ—¥æœŸæ ¼å¼'</span>);
  }

  <span class="hljs-comment">// ç¡®ä¿å¼€å§‹æ—¥æœŸæ—©äºæˆ–ç­‰äºç»“æŸæ—¥æœŸ</span>
  <span class="hljs-keyword">if</span> (start.<span class="hljs-title function_">isAfter</span>(end)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¼€å§‹æ—¥æœŸä¸èƒ½æ™šäºç»“æŸæ—¥æœŸ'</span>);
  }

  <span class="hljs-comment">// è®¡ç®—æ€»å¤©æ•°</span>
  <span class="hljs-keyword">const</span> totalDays = end.<span class="hljs-title function_">diff</span>(start, <span class="hljs-string">'days'</span>);

  <span class="hljs-comment">// å¦‚æœæ€»å¤©æ•°å°äºç­‰äºæœ€å¤§åˆ†å‰²å¤©æ•°ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªåŒºé—´</span>
  <span class="hljs-keyword">if</span> (totalDays &lt;= num) {
    <span class="hljs-keyword">return</span> [
      {
        <span class="hljs-attr">segmentStartDate</span>: start.<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>),
        <span class="hljs-attr">segmentEndDate</span>: end.<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>),
        <span class="hljs-attr">segmentStartDay</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">segmentEndDay</span>: totalDays,
      },
    ];
  }
}
</code></pre>
<p>ã€€ã€€åœ¨å¤„ç†æ—¶ï¼Œæˆ‘ä»¬ä¼šå…ˆæ ¡éªŒå‚æ•°æ ¼å¼å¹¶è®¡ç®—æ€»å¤©æ•°ï¼Œè‹¥æ€»å¤©æ•°æœªè¶…è¿‡æœ€å¤§åˆ†å‰²å¤©æ•°ï¼Œåˆ™å°†ç›´æ¥è¿”å›è¯¥æ—¥æœŸåŒºé—´ï¼Œä¸å†è¿›è¡Œåˆ†å‰²å¤„ç†ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">separateDate</span>(<span class="hljs-params">startDate, endDate, num = <span class="hljs-number">180</span></span>) {
  <span class="hljs-comment">// çœç•¥å…¶ä»–ä»£ç ...</span>

  <span class="hljs-comment">// è®¡ç®—éœ€è¦åˆ†å‰²çš„åŒºé—´æ•°é‡</span>
  <span class="hljs-keyword">const</span> numIntervals = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(totalDays / num);

  <span class="hljs-keyword">const</span> result = [];

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; numIntervals; i++) {
    <span class="hljs-comment">// è®¡ç®—å½“å‰åŒºé—´çš„å¼€å§‹æ—¥æœŸ</span>
    <span class="hljs-keyword">const</span> iStart = start.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">add</span>(i * num, <span class="hljs-string">'days'</span>);

    <span class="hljs-comment">// è®¡ç®—å½“å‰åŒºé—´çš„ç»“æŸæ—¥æœŸï¼ˆæœ€åä¸€ä¸ªåŒºé—´ä½¿ç”¨å®é™…ç»“æŸæ—¥æœŸï¼‰</span>
    <span class="hljs-keyword">const</span> iEnd = i === numIntervals - <span class="hljs-number">1</span> ? end : start.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">add</span>((i + <span class="hljs-number">1</span>) * num - <span class="hljs-number">1</span>, <span class="hljs-string">'days'</span>);

    <span class="hljs-comment">// ç¡®ä¿ç»“æŸæ—¥æœŸä¸è¶…è¿‡å®é™…ç»“æŸæ—¥æœŸ</span>
    <span class="hljs-keyword">const</span> actualEnd = iEnd.<span class="hljs-title function_">isAfter</span>(end) ? end : iEnd;

    <span class="hljs-comment">// è®¡ç®—ç›¸å¯¹äºå¼€å§‹æ—¥æœŸçš„å¤©æ•°</span>
    <span class="hljs-keyword">const</span> segmentStartDay = iStart.<span class="hljs-title function_">diff</span>(start, <span class="hljs-string">'days'</span>);
    <span class="hljs-keyword">const</span> segmentEndDay = actualEnd.<span class="hljs-title function_">diff</span>(start, <span class="hljs-string">'days'</span>);

    result.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">segmentStartDate</span>: iStart.<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>),
      <span class="hljs-attr">segmentEndDate</span>: actualEnd.<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>),
      segmentStartDay,
      segmentEndDay,
    });
  }

  <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>ã€€ã€€ç„¶åé€šè¿‡<code>Math.ceil</code>å°†æ•°å­—å‘ä¸Šèˆå…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ï¼Œå¾—åˆ°numIntervalsï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åŒºé—´çš„æ•°é‡ã€‚æ­¤å¤–åœ¨separateDateè¿”å›çš„æ•°æ®æ¯ä¸ªåˆ†ç‰‡ä¸­ï¼ŒåŒ…å«äº†segmentStartDayå’ŒsegmentEndDayï¼Œå¯¹åº”äº†æ—¶é—´åŒºé—´çš„å¼€å§‹å’Œç»“æŸçš„å¤©æ•°ï¼Œæ–¹ä¾¿åç»­çš„æ•°æ®åˆå¹¶å¤„ç†ã€‚</p>
<p>ã€€ã€€è¿™é‡Œ<code>separateDateå‡½æ•°</code>æ˜¯æˆ‘ä»¬æ•´ä¸ªä¼˜åŒ–æ–¹æ¡ˆçš„æ ¸å¿ƒåŸºç¡€ï¼Œå®ƒå°†é•¿æ—¶é—´è·¨åº¦çš„æ•°æ®è¯·æ±‚åˆ†è§£ä¸ºå¤šä¸ªå¯ç®¡ç†çš„å­è¯·æ±‚ï¼›startDateå’ŒendDateæ¥æ”¶æ—¥å†ğŸ“…ç»„ä»¶ä¼ å…¥çš„ç”¨æˆ·é€‰æ‹©çš„å¼€å§‹å’Œç»“æŸæ—¥æœŸï¼›numå‚æ•°é»˜è®¤è®¾ç½®ä¸º180å¤©ï¼Œè¿™ä¸ªå€¼åŸºäºæˆ‘ä»¬åç«¯å“åº”æ•ˆç‡å’Œé€Ÿåº¦çš„æœ€ä¼˜åˆ†æ®µæ—¶é•¿ï¼Œå¦‚æœå•ä¸ªæ—¶é—´è·¨åº¦å¤ªé•¿ï¼Œåˆ™è¾¾ä¸åˆ°åˆ†æ®µçš„æ•ˆæœï¼Œè€Œå¦‚æœå¤ªçŸ­ï¼Œåˆ™åˆ†æ®µæ•°é‡è¿‡å¤šï¼Œè¯·æ±‚æ¬¡æ•°å¤ªé¢‘ç¹ã€‚</p>
<p>ã€€ã€€æ­£æ˜¯åŸºäºseparateDateå‡½æ•°åˆ†å‰²å‡ºçš„è¿™äº›ç‹¬ç«‹ã€åˆè§„çš„æ—¥æœŸåŒºé—´ï¼Œæˆ‘ä»¬åç»­çš„æ‰€æœ‰ä¼˜åŒ–æ“ä½œæ‰å¾—ä»¥å±•å¼€ï¼›æ¥ä¸‹æ¥ï¼Œæ¯ä¸€ä¸ªå­åŒºé—´çš„æ•°æ®ä¼šè¿›è¡Œç‹¬ç«‹çš„å¤„ç†å’ŒåŠ è½½ï¼Œä»è€Œå°†åŸæœ¬åºå¤§è€Œç¬¨é‡çš„å•æ¬¡è¯·æ±‚ï¼Œè½¬åŒ–ä¸ºä¸€æ¬¡æ¬¡é«˜æ•ˆã€å¯ç®¡ç†çš„å¹¶è¡Œä»»åŠ¡æµã€‚</p>
<h2 data-id="heading-1">WebWorkerï¼šå¼€è¾Ÿâ€œç¬¬äºŒæˆ˜çº¿â€</h2>
<p>ã€€ã€€åœ¨ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬å®ç°äº†æ•°æ®çš„åˆ†å‰²ï¼ŒæˆåŠŸå°†14ä¸‡+çš„æ•°æ®è¯·æ±‚åˆ†è§£ä¸ºå¤šä¸ªå°è¯·æ±‚ï¼›ä½†æ˜¯å³ä½¿æ•°æ®åˆ†ç‰‡äº†ï¼Œæ¯ä¸€åˆ†ç‰‡æ•°æ®é‡ä»ç„¶å¯èƒ½å¾ˆå¤§ï¼ˆæœ€å¤š180å¤©Ã—96ä¸ªç‚¹/å¤©=17280ä¸ªç‚¹ï¼‰ï¼›å¦‚æœç›´æ¥åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†è¿™äº›æ•°æ®ï¼Œä»ç„¶ä¼šå¯¼è‡´UIå¡é¡¿ã€‚è¿™æ—¶å€™ï¼ŒWeb Workerå°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<p>ã€€ã€€<code>Web Worker</code>æ˜¯HTML5æä¾›çš„APIï¼Œå…è®¸åœ¨æµè§ˆå™¨åå°è¿è¡ŒJavaScriptè„šæœ¬ï¼Œä¸ä¸»çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨Workerçº¿ç¨‹ä¸­æ‰§è¡Œç¹é‡çš„æ•°æ®å¤„ç†ä»»åŠ¡ï¼Œè€Œä¸ä¼šé˜»å¡ç”¨æˆ·ç•Œé¢ï¼›å¦‚æœè¯´ä¸»çº¿ç¨‹æ˜¯â€œå‰å°æœåŠ¡å‘˜â€ï¼Œæ—¢è¦å“åº”å®¢äººï¼ˆç”¨æˆ·ï¼‰çš„ç‚¹å‡»ï¼Œåˆè¦å»åå¨ç‚’èœï¼ˆè®¡ç®—ï¼‰ï¼Œé‚£ä¹ˆWeb Workerå°±æ˜¯é›‡æ¥çš„â€œä¸“èŒåå¨â€ï¼›å®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>ç‹¬ç«‹çº¿ç¨‹ï¼šè¿è¡Œåœ¨ç‹¬ç«‹çš„çº¿ç¨‹ä¸­ï¼Œä¸ä¸»çº¿ç¨‹å¹¶è¡Œ</li>
<li>æ— DOMè®¿é—®æƒé™ï¼šä¸èƒ½ç›´æ¥æ“ä½œDOMæˆ–è®¿é—®windowå¯¹è±¡</li>
<li>é€šè¿‡æ¶ˆæ¯é€šä¿¡ï¼šä¸ä¸»çº¿ç¨‹é€šè¿‡postMessageå’Œonmessageé€šä¿¡</li>
<li>ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹ï¼šå…³é—­æ ‡ç­¾é¡µæˆ–Workerè„šæœ¬æ‰§è¡Œå®Œæ¯•æ‰ä¼šç»ˆæ­¢</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9ad8b7a99db4ff5999640a54f77f306~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=o9WAa3hD7Z2zGa3FtCCq%2FeAri4Q%3D" alt="WebWorker" loading="lazy"/></p>
<p>ã€€ã€€é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªä¸“é—¨å¤„ç†æ•°æ®çš„Workeræ–‡ä»¶<code>data-processor.worker.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
  <span class="hljs-keyword">var</span> list = e.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>;

  <span class="hljs-keyword">const</span> listHandled = list.<span class="hljs-property">value</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> {
    <span class="hljs-comment">// å¯¹æ•°æ®è¿›è¡Œä¸€ç³»åˆ—è€—æ—¶è®¡ç®—</span>
  });

  self.<span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">list</span>: listHandled,
  });
};
</code></pre>
<p>ã€€ã€€è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªä¸“ç”¨Workerçº¿ç¨‹ï¼Œè´Ÿè´£æ‰§è¡Œæ‰€æœ‰é˜»å¡å‹çš„è®¡ç®—ä»»åŠ¡ï¼Œè´Ÿè´£å¯¹æ•°æ®è¿›è¡Œä¸€äº›è€—æ—¶çš„å¤„ç†ï¼Œä¾‹å¦‚åŸå§‹æ•°æ®æ¸…æ´—ã€å¤æ‚æŒ‡æ ‡è®¡ç®—ç­‰ç­‰ï¼Œå¹¶è¿”å›å¤„ç†åçš„æ•°æ®ï¼›ä¸»çº¿ç¨‹åˆ™ä¸“æ³¨äºUIäº¤äº’ä¸æµç•…æ¸²æŸ“ï¼Œä»…åœ¨éœ€è¦æ—¶ï¼ˆåˆ†å‰²æ•°æ®è¿”å›ï¼‰å‘Workeræ´¾å‘ä»»åŠ¡å¹¶å¼‚æ­¥æ¥æ”¶å…¶è¿”å›çš„ã€å¯ç›´æ¥ç”¨äºå›¾è¡¨ï¼ˆå¦‚EChartsï¼‰çš„è½»é‡åŒ–ç»“æœã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadEchartData</span>(<span class="hljs-params">rangeItem</span>) {
  <span class="hljs-keyword">const</span> { segmentStartDate, segmentEndDate } = rangeItem;
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchListData</span>({
    <span class="hljs-attr">startDate</span>: segmentStartDate,
    <span class="hljs-attr">endDate</span>: segmentEndDate,
  });
  <span class="hljs-keyword">if</span> (res &amp;&amp; res.<span class="hljs-property">data</span>) {
    <span class="hljs-keyword">const</span> { list } = res.<span class="hljs-property">data</span>;

    <span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">"/data-processor.worker.js"</span>);
    worker.<span class="hljs-title function_">postMessage</span>({
      <span class="hljs-attr">data</span>: list,
    });
    worker.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
      <span class="hljs-keyword">const</span> { list } = e.<span class="hljs-property">data</span>;
      <span class="hljs-title function_">renderChart</span>(list);
    };
  }
}
</code></pre>
<p>ã€€ã€€æˆ‘ä»¬å°†å‰é¢åˆ†å‰²å¥½çš„æ•°æ®åŒºé—´ï¼Œåˆ†å‘ä¸ºå¹¶å‘çš„æ•°æ®è¯·æ±‚è¿›è¡ŒåŠ è½½ã€‚å¾…æ•°æ®è¿”å›åï¼Œä¸»çº¿ç¨‹ä¼šå®ä¾‹åŒ–ä¸€ä¸ªWorkerçº¿ç¨‹ï¼Œå¹¶é€šè¿‡postMessageå‡½æ•°ï¼Œå°†åŸå§‹æ•°æ®è°ƒåº¦è‡³Workerè¿›è¡Œåç»­å¤„ç†ã€‚</p>
<p>ã€€ã€€è¿™é‡Œè¿˜æ¶‰åŠä¸€ä¸ªæ•°æ®è¿”å›åæ‹¼æ¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨å¾ªç¯è°ƒç”¨loadEchartDataè¯·æ±‚æ•°æ®æ—¶ï¼Œç”±äºæ˜¯å¼‚æ­¥è¿”å›ï¼Œåˆ†ç‰‡æ•°æ®è¿”å›çš„æ—¶å€™ï¼Œæ•°æ®ä¼šä¹±åºè¿”å›ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥é€šè¿‡æ•°ç»„çš„pushæ¥æ·»åŠ æ•°æ®ã€‚</p>
<p>ã€€ã€€æˆ‘ä»¬åœ¨å…¨å±€å®šä¹‰xè½´å’Œyè½´ä¸¤ä¸ªæ•°ç»„ï¼Œåœ¨é¡µé¢åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œæå‰é¢„ä¼°è®¡ç®—å‡ºæ•°ç»„çš„é•¿åº¦ï¼Œå¹¶ä½¿ç”¨é»˜è®¤æ•°æ®è¿›è¡Œå¡«å……ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">_xList</span>: <span class="hljs-built_in">string</span>[] = []
<span class="hljs-keyword">const</span> <span class="hljs-attr">_yList</span>: <span class="hljs-built_in">number</span>[] = []

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; diffDay; i++) {
    <span class="hljs-keyword">const</span> nowDate = <span class="hljs-title function_">dayjs</span>(startDate.<span class="hljs-property">value</span>).<span class="hljs-title function_">add</span>(i, <span class="hljs-string">'days'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">96</span>; j++) {
        _xList.<span class="hljs-title function_">push</span>(
            nowDate.<span class="hljs-title function_">add</span>(i * <span class="hljs-number">15</span>, <span class="hljs-string">'minutes'</span>)
            .<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm'</span>)
        )
        _yList.<span class="hljs-title function_">push</span>(<span class="hljs-number">0</span>)
    }
}
</code></pre>
<p>ã€€ã€€å½“å“åº”æ•°æ®è¿”å›åï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ•°æ®æ·»åŠ åˆ°å¯¹åº”çš„ä½ç½®å³å¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadEchartData</span>(<span class="hljs-params">rangeItem</span>) {
  <span class="hljs-keyword">const</span> { segmentStartDay } = rangeItem;
  <span class="hljs-keyword">if</span> (res &amp;&amp; res.<span class="hljs-property">data</span>) {
    <span class="hljs-keyword">const</span> { list } = res.<span class="hljs-property">data</span>;
    <span class="hljs-keyword">const</span> startIndex = segmentStartDay * <span class="hljs-number">96</span>;
    <span class="hljs-comment">// åœ¨å¯¹åº”ç´¢å¼•å¤„æ·»åŠ æ•°æ®</span>
    _yList.<span class="hljs-title function_">splice</span>(startIndex, list.<span class="hljs-property">length</span>, ...list);
  }
}
</code></pre>
<h2 data-id="heading-2">Echartsæ¸²æŸ“ä¼˜åŒ–ï¼šè®©å¤§æ•°æ®é£èµ·æ¥</h2>
<p>ã€€ã€€è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡åˆ†å‰²ã€å¤„ç†ä¸åŠ è½½çš„ä¼˜åŒ–ï¼Œä¸ºæµ·é‡æ•°æ®çš„æ¸²æŸ“æ­å»ºäº†ä¸€æ¡é«˜æ•ˆçš„å‰ç½®ç®¡çº¿ã€‚ã€‚ç„¶è€Œï¼Œå½“æ•°æ®æœ€ç»ˆæŠµè¾¾æµè§ˆå™¨å¹¶å‡†å¤‡åœ¨EChartsä¸­ç»˜åˆ¶æ—¶ï¼Œæ€§èƒ½çš„â€œæœ€ç»ˆæŒ‘æˆ˜â€æ‰çœŸæ­£å¼€å§‹ã€‚å¦‚ä½•è®©EChartsâ€œæ¶ˆåŒ–â€è¿™æ•°ä¸‡ä¸ªæ•°æ®ç‚¹å¹¶ä¿æŒæµç•…äº¤äº’ï¼Ÿæœ¬èŠ‚å°†æ·±å…¥EChartsçš„æ¸²æŸ“å±‚ï¼Œæ‹†è§£é‚£äº›è®©å›¾è¡¨â€œé£èµ·æ¥â€çš„å…³é”®ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<p>ã€€ã€€åœ¨å¤§æ•°æ®é‡çš„å‰æä¸‹ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç¡®ä¿ï¼Œechartsçš„æ¸²æŸ“å™¨æ˜¯canvasè€Œä¸æ˜¯SVGï¼Œå› ä¸ºSVGå›¾åƒåœ¨å¤„ç†å¤æ‚å›¾å½¢æ—¶å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤ç¡®ä¿ä½ çš„å›¾è¡¨ä½¿ç”¨canvasè¿›è¡Œæ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// rendererä¸æ˜¯svg</span>
echarts.<span class="hljs-title function_">init</span>(domElement, <span class="hljs-literal">null</span>, { <span class="hljs-attr">renderer</span>: <span class="hljs-string">'canvas'</span> });
</code></pre>
<h3 data-id="heading-3">é™é‡‡æ ·ç­–ç•¥</h3>
<p>ã€€ã€€ä»€ä¹ˆæ˜¯æ•°æ®é‡‡æ ·ï¼Ÿæ•°æ®é‡‡æ ·æ˜¯EChartsä¸­å¤„ç†å¤§æ•°æ®é‡çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œå½“å›¾è¡¨éœ€è¦å±•ç¤ºçš„æ•°æ®ç‚¹è¿‡å¤šæ—¶ï¼ˆé€šå¸¸è¶…è¿‡å‡ åƒä¸ªç‚¹ï¼‰ï¼Œæµè§ˆå™¨æ¸²æŸ“æ€§èƒ½ä¼šæ˜¾è‘—ä¸‹é™ã€‚é‡‡æ ·ç®—æ³•å¯ä»¥åœ¨ä¿æŒå›¾è¡¨å¤§è‡´è¶‹åŠ¿ä¸å˜çš„å‰æä¸‹ï¼Œå‡å°‘å®é™…æ¸²æŸ“çš„æ•°æ®ç‚¹æ•°ã€‚</p>
<p>ã€€ã€€ä¾‹å¦‚ï¼Œé€šè¿‡å¯¹ä¸€ä¸‡ä¸ªåŸå§‹æ•°æ®ç‚¹è¿›è¡Œåˆ†å±‚æŠ½æ ·ï¼Œæˆ‘ä»¬å°†æ¸²æŸ“èŠ‚ç‚¹çš„æ•°é‡ç›´æ¥ä»10,000ä¸ªç¼©å‡è‡³1,000ä¸ªã€‚è¿™ä¸€ä¼˜åŒ–ç›´æ¥å¸¦æ¥äº†æ¸²æŸ“æ€§èƒ½çš„æ¿€å¢ï¼Œå¸§ç‡å¾—åˆ°æ˜¾è‘—æå‡ã€‚Echartsæä¾›äº†å¤šç§æ•°æ®é‡‡æ ·ç®—æ³•ï¼ŒåŒ…æ‹¬å¦‚ä¸‹ï¼š</p>
<ul>
<li>sumï¼šå–è¿‡æ»¤ç‚¹çš„å’Œ</li>
<li>averageï¼šå–è¿‡æ»¤ç‚¹çš„å¹³å‡å€¼</li>
<li>minï¼š å–è¿‡æ»¤ç‚¹çš„æœ€å°å€¼</li>
<li>maxï¼š å–è¿‡æ»¤ç‚¹æœ€å¤§çš„å€¼</li>
<li>minmaxï¼šå–è¿‡æ»¤ç‚¹ç»å¯¹å€¼çš„æœ€å¤§æå€¼ (ä» v5.5.0 å¼€å§‹æ”¯æŒ)</li>
<li>lttbï¼šé‡‡ç”¨<code>Largest-Triangle-Three-Bucket</code>ç®—æ³•ï¼Œå¯ä»¥æœ€å¤§ç¨‹åº¦ä¿è¯é‡‡æ ·åçº¿æ¡çš„è¶‹åŠ¿ï¼Œå½¢çŠ¶å’Œæå€¼ã€‚</li>
</ul>
<p>ã€€ã€€ä½¿ç”¨æ—¶ï¼Œé€šè¿‡é…ç½®seriesçš„samplingå±æ€§ï¼ŒæŒ‡å®šæ•°æ®é‡‡æ ·ç®—æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">series</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"bar"</span>,
      <span class="hljs-attr">sampling</span>: <span class="hljs-string">"lttb"</span>,
      <span class="hljs-attr">data</span>: yourData,
    },
  ];
}
</code></pre>
<p>ã€€ã€€æˆ‘ä»¬å¯¹æŸ±çŠ¶å›¾è¿›è¡Œlttbç®—æ³•é‡‡æ ·åï¼Œæ•ˆæœå¦‚ä¸‹ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ˜æ˜¾çœ‹åˆ°æŸ±å­çš„å¯†åº¦æœ‰äº›ç¨€ç–ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9fd6c129a4f42cea9dbfdfad8fc2bc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=VFD4Bhg7AkvSr7S7evzj%2BaXHSa0%3D" alt="æŸ±çŠ¶å›¾çš„lttbé‡‡æ ·æ•ˆæœ" loading="lazy"/></p>
<blockquote>
<p><strong>éœ€è¦æ³¨æ„</strong>çš„æ˜¯ï¼Œæ•°æ®ç»è¿‡é‡‡æ ·åï¼Œæ•°æ®ç‚¹ä¼šå‡å°‘ï¼Œé‡‡æ ·ä¼šä¸¢å¤±ç»†èŠ‚ï¼Œå› æ­¤ä¸é€‚åˆéœ€è¦ç²¾ç¡®å€¼çš„åœºæ™¯ï¼›åŒæ—¶ç”±äºæ•°æ®ç‚¹çš„å‡å°‘ï¼Œä¸€äº›å›¾è¡¨çš„äº¤äº’åŠŸèƒ½ï¼Œå¦‚tooltipï¼Œä¹Ÿä¼šå—åˆ°å½±å“ã€‚</p>
</blockquote>
<p>ã€€ã€€é’ˆå¯¹æŠ˜çº¿å›¾ï¼Œæˆ‘ä»¬ä¹Ÿåº”ç”¨äº†lttbç®—æ³•è¿›è¡Œä¸‹é‡‡æ ·ã€‚ä»å¦‚ä¸‹æ•ˆæœå›¾ä¸­å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œç®—æ³•åœ¨å¤§å¹…å‡å°‘æ•°æ®ç‚¹çš„åŒæ—¶ï¼Œä»ä¿æŒäº†åŸå§‹æ›²çº¿çš„æ ¸å¿ƒè¶‹åŠ¿ä¸å½¢çŠ¶ï¼Œæ•´ä½“è¿˜åŸæ•ˆæœéå¸¸å¥½ã€‚å…¶ä¸»è¦è¯¯å·®å‡ºç°åœ¨å˜åŒ–å‰§çƒˆçš„è¾¹ç•ŒåŒºåŸŸæˆ–æå€¼ç‚¹é™„è¿‘ï¼Œå¯¼è‡´å±€éƒ¨æ‹Ÿåˆä¸å¤Ÿå¹³æ»‘ã€‚</p>
<p>ã€€ã€€ç›¸è¾ƒä¹‹ä¸‹ï¼Œåœ¨ä¹‹å‰æŸ±çŠ¶å›¾çš„æµ‹è¯•ä¸­ï¼Œlttbç®—æ³•å› ä¼šæ”¹å˜ç¦»æ•£æŸ±çš„åˆ†å¸ƒä½ç½®è€Œå¯¼è‡´ä¿¡æ¯å¤±çœŸï¼Œå› æ­¤å®ƒæ›´é€‚ç”¨äºæŠ˜çº¿å›¾è¿™ç±»å¼ºè¿ç»­æ€§çš„åºåˆ—æ•°æ®å¯è§†åŒ–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c923f7edcec4841820c839306104a05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=e56y8qdbKJhEXmeh%2FcjjLq5KPLc%3D" alt="æŠ˜çº¿å›¾çš„lttbé‡‡æ ·æ•ˆæœ" loading="lazy"/></p>
<h4 data-id="heading-4">lttbç®—æ³•åŸç†</h4>
<p>ã€€ã€€é‰´äºLTTBç®—æ³•åœ¨é™é‡‡æ ·ä¸­è¡¨ç°å‡ºçš„å‡ºè‰²æ•ˆæœï¼Œæˆ‘ä»¬æœ‰å¿…è¦æ·±å…¥æ¢ç©¶å…¶æ ¸å¿ƒå®ç°åŸç†ã€‚ä½œä¸ºEChartsç­‰ä¸»æµå¯è§†åŒ–åº“é‡‡ç”¨çš„å…³é”®ç®—æ³•ï¼Œå…¶æ ¸å¿ƒæ­¥éª¤æ˜¯å°†æ•°æ®ç‚¹åˆ†ç»„ä¸ºå¤šä¸ªè¿ç»­çš„â€œæ¡¶â€ï¼Œå¹¶åœ¨æ¯ä¸ªæ¡¶å†…ä»…ç­›é€‰ä¸€ä¸ªæœ€å…·ä»£è¡¨æ€§çš„ç‚¹ã€‚é‚£ä¹ˆï¼Œè¿™ä¸ªä»£è¡¨ç‚¹æ˜¯å¦‚ä½•è¢«é€‰å®šçš„ï¼Ÿè¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå…³é”®åœ¨äºç†è§£å…¶â€œæœ€å¤§ä¸‰è§’å½¢é¢ç§¯â€çš„ç­›é€‰å‡†åˆ™ã€‚</p>
<pre><code class="hljs language-text" lang="text">æ•°æ®ç‚¹åˆ†å¸ƒï¼š
   â–²
   â”‚                                  
   â”‚             æ¡¶A          æ¡¶B          æ¡¶C
   â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
   â”‚          â”‚      â”‚    â”‚      â”‚    â”‚      â”‚
   â”‚          â”‚  â€¢   â”‚    â”‚  â€¢   â”‚    â”‚  â€¢   â”‚
   â”‚          â”‚  â€¢   â”‚    â”‚  â€¢   â”‚    â”‚  â€¢   â”‚
   â”‚          â”‚  â€¢ â€¢ â”‚    â”‚â€¢  â€¢  â”‚    â”‚  â€¢ â€¢ â”‚
   â”‚         â€¢â”‚ â€¢  â€¢ â”‚   â€¢â”‚â€¢   â€¢ â”‚   â€¢â”‚â€¢   â€¢ â”‚
   â”‚       â€¢ â€¢â”‚â€¢    â€¢â”‚ â€¢ â€¢â”‚â€¢    â€¢â”‚â€¢ â€¢ â”‚â€¢    â€¢â”‚
   â”‚     â€¢ â€¢  â”‚     â€¢â”‚â€¢ â€¢ â”‚     â€¢â”‚â€¢ â€¢ â”‚     â€¢â”‚
   â”‚   â€¢ â€¢    â”‚      â”‚â€¢ â€¢ â”‚      â”‚â€¢ â€¢ â”‚      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â–¶
   0          10     20    30     40    50     60
                 frameSize = 10ä¸ªç‚¹/æ¡¶
</code></pre>
<p>ã€€ã€€æˆ‘ä»¬ç¬¬ä¸€ä¸ªæ¡¶Açš„ç‚¹é€‰æ‹©åˆå§‹ä½ç½®çš„ç‚¹ï¼Œå½“æˆ‘ä»¬å¼€å§‹é€‰å–ä¸‹ä¸€ä¸ªæ¡¶Bæ—¶ç‚¹æ—¶ï¼Œå†ä¸‹ä¸€ä¸ªæ¡¶Cçš„ç‚¹ï¼Œæˆ‘ä»¬æš‚å®šä¸ºè¿™ä¸ªæ¡¶çš„å¹³å‡å€¼ï¼›è¿™æ ·ï¼Œæˆ‘ä»¬å‰åæ¡¶çš„ç‚¹éƒ½ç¡®å®šäº†ï¼Œè®©æˆ‘ä»¬å›åˆ°æ¡¶Bç‚¹çš„é€‰æ‹©ä¸Šæ¥ï¼›è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬éå†æ¡¶Bçš„æ‰€æœ‰ç‚¹ï¼Œè®¡ç®—ABCä¸‰ä¸ªæ¡¶çš„ç‚¹å½¢æˆä¸‰è§’å½¢çš„é¢ç§¯ï¼Œå¹¶é€‰æ‹©é¢ç§¯æœ€å¤§çš„ç‚¹ä½œä¸ºè¿™ä¸ªæ¡¶çš„ç‚¹ã€‚</p>
<p>ã€€ã€€ä¸ºä»€ä¹ˆé¢ç§¯å¤§çš„ç‚¹å°±èƒ½ä»£è¡¨è¿™ä¸ªæ¡¶å‘¢ï¼Ÿæˆ‘ä»¬æƒ³åƒä¸€ä¸‹ï¼Œå¦‚æœBç‚¹é è¿‘äº†ACè¿çº¿ä¸Šï¼Œé‚£ä¹ˆBç‚¹å‡ ä¹å°±æ²¡æœ‰æä¾›äº†æ–°çš„ä¿¡æ¯äº†ã€‚</p>
<pre><code class="hljs language-text" lang="text">   Aâ”€â”€â”€â”€â”€Bâ”€â”€â”€â”€â”€C
é¢ç§¯ â‰ˆ 0ï¼ˆä¸‰ç‚¹å‡ ä¹å…±çº¿ï¼‰
</code></pre>
<p>ã€€ã€€ä½†æ˜¯å¦‚æœBç‚¹è¿œç¦»ACè¿çº¿ï¼Œé‚£ä¹ˆBç‚¹å°±æä¾›äº†æ–°çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆBç‚¹å°±å¯ä»¥ä»£è¡¨è¿™ä¸ªæ¡¶çš„ç‚¹ã€‚</p>
<pre><code class="hljs language-text" lang="text">         B
        / \
       /   \
      /     \
     A       C
é¢ç§¯å¾ˆå¤§ï¼ŒBç‚¹ä»£è¡¨äº†é‡è¦ç‰¹å¾
</code></pre>
<p>ã€€ã€€å½“æˆ‘ä»¬å·²çŸ¥äºŒç»´å¹³é¢ä¸Šä¸Šä¸‰ä¸ªç‚¹çš„åæ ‡ï¼Œåˆ©ç”¨åˆä¸­çš„çŸ¥è¯†å°±èƒ½æ¨å¯¼ä¸‰è§’å½¢çš„é¢ç§¯ä¸ºï¼š</p>
<blockquote>
<p>ä¸‰è§’å½¢é¢ç§¯ = 0.5 Ã— |AB Ã— AC| = 0.5 Ã— |(x2-x1)(y3-y1) - (x3-x1)(y2-y1)|</p>
</blockquote>
<p>ã€€ã€€ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æ¨å¯¼è¿‡ç¨‹:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/620a8b7454224f43a51fef951efedc3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=l8uMBJfaWpv4o%2FZluo0OR0EIjdk%3D" alt="ä¸‰è§’å½¢é¢ç§¯å…¬å¼" loading="lazy"/></p>
<p>ã€€ã€€æˆ‘ä»¬è®¿é—®Echartsä»“åº“ä¸­æŸ¥çœ‹æºç ï¼Œå‘ç°lttbç®—æ³•ä»£ç åœ¨<code>src/data/DataStore.ts</code>çš„lttbDownSampleå‡½æ•°ä¸­å®ç°ï¼›æœ‰äº†ä¸Šé¢ç†è®ºçš„æ”¯æ’‘ï¼Œæˆ‘ä»¬ä¸‹é¢å°±æ¥å¥½å¥½çš„æ‹†è§£æ‹†è§£è¿™ä¸ªå‡½æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * Large data down sampling using largest-triangle-three-buckets
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">valueDimension</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">targetCount</span>
 */</span>
<span class="hljs-title function_">lttbDownSample</span>(<span class="hljs-params">
    valueDimension: DimensionIndex,
    rate: <span class="hljs-built_in">number</span>
</span>){
  <span class="hljs-comment">// æ€»æ•°æ®ç‚¹æ•°ï¼Œå¦‚ 10000</span>
  <span class="hljs-keyword">const</span> len = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">count</span>();

  <span class="hljs-comment">// æ¯ä¸ªæ¡¶çš„å¤§å°ï¼Œå¦‚rate = 0.1ï¼Œåˆ™frameSize = 10</span>
  <span class="hljs-keyword">const</span> frameSize = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-number">1</span> / rate);
}
</code></pre>
<p>ã€€ã€€é¦–å…ˆä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè·å–æ•°æ®ç‚¹çš„æ€»æ•°ï¼Œå¹¶è®¡ç®—æ¯ä¸ªæ¡¶çš„å¤§å°ï¼›è¿™é‡Œä¼ å…¥çš„valueDimensionä»£è¡¨å€¼çš„ç»´åº¦ï¼Œå¦‚æœç›´æ¥ä¼ å…¥æ•°æ®åˆ—è¡¨ï¼Œä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ï¼Œå› æ­¤è¿™é‡Œçš„åšæ³•æ˜¯ä¼ å…¥æ•°æ®ç»´åº¦ï¼Œé€šè¿‡ç»´åº¦æ¥è·å–æ•°æ®ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; len - <span class="hljs-number">1</span>; i += frameSize) {
  <span class="hljs-comment">// ä¸‹ä¸€ä¸ªæ¡¶çš„è¾¹ç•Œ</span>
  <span class="hljs-keyword">const</span> nextFrameStart = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(i + frameSize, len - <span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> nextFrameEnd = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(i + frameSize * <span class="hljs-number">2</span>, len);

  <span class="hljs-comment">// è®¡ç®—ä¸‹ä¸€ä¸ªæ¡¶çš„å¹³å‡ç‚¹</span>
  <span class="hljs-keyword">const</span> avgX = (nextFrameEnd + nextFrameStart) / <span class="hljs-number">2</span>; <span class="hljs-comment">// Xåæ ‡å¹³å‡å€¼</span>
  <span class="hljs-keyword">let</span> avgY = <span class="hljs-number">0</span>; <span class="hljs-comment">// Yåæ ‡å¹³å‡å€¼</span>
}
</code></pre>
<p>ã€€ã€€ç„¶åæˆ‘ä»¬å¼€å§‹éå†æ•°æ®ç‚¹ï¼Œæˆ‘ä»¬å‘ç°iæ˜¯ä»1å¼€å§‹çš„ï¼Œå› ä¸ºæˆ‘ä»¬é»˜è®¤ç¬¬ä¸€ä¸ªç‚¹å°±æ˜¯ç¬¬ä¸€ä¸ªæ¡¶çš„é€‰æ‹©ç‚¹ï¼›æ¥ç€ï¼Œåœ¨å½“å‰æ¡¶éå†ä¸‹ï¼Œæˆ‘ä»¬å…ˆè¦è®¡ç®—å‡ºä¸‹ä¸€ä¸ªæ¡¶Cçš„å¹³å‡ç‚¹ï¼ˆavgXï¼Œ avgYï¼‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; len - <span class="hljs-number">1</span>; i += frameSize) {
  <span class="hljs-comment">// çœç•¥ä¸Šé¢ä»£ç </span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> idx = nextFrameStart; idx &lt; nextFrameEnd; idx++) {
      <span class="hljs-comment">// è·å–ä¸‹ä¸€ä¸ªæ¡¶ä¸Šé¢æ¯ä¸€ä¸ªç‚¹çš„å€¼</span>
      <span class="hljs-keyword">const</span> y = dimStore[rawIndex] <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;
      avgY += y <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;
  }
  avgY /= (nextFrameEnd - nextFrameStart);
}
</code></pre>
<p>ã€€ã€€ç„¶åï¼Œæˆ‘ä»¬å¼€å§‹éå†ä¸‹ä¸€ä¸ªCæ¡¶ä¸­çš„æ¯ä¸€ä¸ªæ•°æ®ç‚¹ï¼Œå¹¶è®¡ç®—å‡ºä¸‹ä¸€ä¸ªæ¡¶çš„å¹³å‡å€¼ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> maxArea;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; len - <span class="hljs-number">1</span>; i += frameSize) {
  <span class="hljs-comment">// å½“å‰æ¡¶çš„èµ·å§‹ç´¢å¼•</span>
  <span class="hljs-keyword">const</span> frameStart = i;
  <span class="hljs-comment">// å½“å‰æ¡¶çš„ç»“æŸç´¢å¼•</span>
  <span class="hljs-keyword">const</span> frameEnd = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(i + frameSize, len);

  <span class="hljs-comment">// ä¸Šä¸€ä¸ªç‚¹çš„Xåæ ‡</span>
  <span class="hljs-keyword">const</span> pointAX = i - <span class="hljs-number">1</span>;
  <span class="hljs-comment">// ä¸Šä¸€ä¸ªç‚¹çš„Yå€¼</span>
  <span class="hljs-keyword">const</span> pointAY = dimStore[currentRawIndex] <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;

  <span class="hljs-comment">// å½“å‰æ¡¶æœ€å¤§çš„é¢ç§¯</span>
  maxArea = -<span class="hljs-number">1</span>;
}
</code></pre>
<p>ã€€ã€€ç´§æ¥ç€ï¼Œæˆ‘ä»¬ä¸ºå½“å‰æ¡¶Bç‚¹çš„éå†å‡†å¤‡ä¸€ä¸‹æ•°æ®ï¼ŒframeStartå’ŒframeEndæ˜¯å½“å‰æ¡¶Bçš„è¾¹ç•Œï¼ŒpointAXå’ŒpointAYæ˜¯ä¸Šä¸€ä¸ªæ¡¶Açš„åæ ‡ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬å‘ç°è¿™é‡Œçš„pointAXå–å¾—æ˜¯ä¸Šä¸€ä¸ªæ¡¶æœ€åä¸€ä¸ªç‚¹çš„åæ ‡i - 1ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½å°†ä¸Šä¸€ä¸ªæ¡¶çš„é€‰æ‹©ç‚¹å­˜èµ·æ¥ä½¿ç”¨ï¼Œè¿™å…¶å®æ˜¯Echartsä¸ºäº†æ€§èƒ½ä¼˜åŒ–ï¼Œç‰ºç‰²äº†ä¸€ç‚¹ç²¾åº¦ï¼Œå‡å°‘å˜é‡è·Ÿè¸ªã€‚</p>
</blockquote>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¾ªç¯éå†æ¯ä¸ªæ¡¶</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; len - <span class="hljs-number">1</span>; i += frameSize) {
  <span class="hljs-comment">// çœç•¥ä¸Šé¢ä»£ç </span>
  <span class="hljs-comment">// å¾ªç¯éå†æ¡¶Bä¸­çš„æ•°æ®ç‚¹</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> idx = frameStart; idx &lt; frameEnd; idx++) {
    <span class="hljs-comment">// å½“å‰ç‚¹çš„Xåæ ‡</span>
    <span class="hljs-keyword">const</span> rawIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRawIndex</span>(idx);
    <span class="hljs-comment">// å½“å‰ç‚¹çš„Yåæ ‡</span>
    <span class="hljs-keyword">const</span> y = dimStore[rawIndex] <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;
    <span class="hljs-comment">// è®¡ç®—ä¸‰è§’å½¢çš„é¢ç§¯</span>
    area = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>((pointAX - avgX) * (y - pointAY)
      - (pointAX - idx) * (avgY - pointAY)
    );
    <span class="hljs-keyword">if</span> (area &gt; maxArea) {
      maxArea = area;
      nextRawIndex = rawIndex;
    }
  }

  newIndices[sampledIndex++] = nextRawIndex;
}
</code></pre>
<p>ã€€ã€€æœ€åè¿™ä¸ªä»£ç æ˜¯æ•´ä¸ªç®—æ³•çš„æ ¸å¿ƒä»£ç ,ä¹Ÿæ˜¯æœ€ç²¾å¦™çš„åœ°æ–¹ï¼›åŸºäºä¹‹å‰æ¡¶çš„å¾ªç¯ï¼Œæˆ‘ä»¬åœ¨å½“å‰æ¡¶å†…ï¼Œéå†æ¡¶ä¸­æ¯ä¸ªæ•°æ®ç‚¹ï¼ŒrawIndexå’Œyè¡¨ç¤ºå½“å‰ç‚¹çš„åæ ‡ï¼›è€Œè¿™é‡Œçš„areaå°±æ˜¯æˆ‘ä»¬ä¸Šé¢ä»‹ç»çš„ä¸‰è§’å½¢çš„è®¡ç®—å…¬å¼ï¼Œç»è¿‡ä¹‹å‰å¯¹äºæ¡¶Aã€æ¡¶Bã€æ¡¶Cçš„ç‚¹å‡†å¤‡ï¼Œç›¸ä¿¡è¿™é‡Œçš„areaè®¡ç®—ç›¸ä¿¡å¤§å®¶éƒ½èƒ½å¤Ÿç†è§£äº†ï¼›æœ€åå¦‚æœareaè¶…å‡ºäº†è®°å½•çš„æœ€å¤§é¢ç§¯maxAreaï¼Œåˆ™å°†å½“å‰ç‚¹åŠ å…¥åˆ°æ–°çš„é‡‡æ ·æ•°æ®ä¸­è¿›è¡Œæ•°æ®ç•™å­˜ã€‚</p>
<p>ã€€ã€€çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç®—æ³•çš„ç²¾å¦™ï¼Œéå¾—äº²æ‰‹è¯•ä¸€ä¸‹ä¸å¯ã€‚ä¸ºæ­¤ï¼Œç¬”è€…å†™äº†ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fgallery.xieyufei.com%2Fcase%2Falgorithm%2Flttb" target="_blank" title="https://gallery.xieyufei.com/case/algorithm/lttb" ref="nofollow noopener noreferrer">ç®€å•çš„é¡µé¢</a>æ¥æ¼”ç¤ºLTTBç®—æ³•çš„å®é™…æ•ˆæœï¼Œé»˜è®¤è®¾ç½®é‡‡æ ·ç‡rateä¸º0.1ï¼ŒåŒæ—¶å¯¹æŠ˜çº¿å›¾æ•°æ®è¿›è¡Œé‡‡æ ·å¯¹æ¯”ï¼Œå°±èƒ½çœ‹åˆ°å’ŒåŸå§‹æ•°æ®ä¹‹é—´çš„ç»†å¾®å·®å¼‚ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68032c1dcb8c4c43a7dae545906e4145~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=f63zVFdEVw2%2Bhpm6bXwoEBljbME%3D" alt="æ‰‹å†™lttbç®—æ³•é‡‡æ ·çš„æ•ˆæœ" loading="lazy"/></p>
<h3 data-id="heading-5">dataZoomåˆ†å—æ¸²æŸ“</h3>
<p>ã€€ã€€åœ¨å¤„ç†æµ·é‡æ•°æ®æ—¶ï¼Œå¯ç”¨<code>dataZoomç»„ä»¶</code>æ˜¯å®ç°æ€§èƒ½è·ƒå‡çš„æ ¸å¿ƒç­–ç•¥ä¹‹ä¸€ã€‚å®ƒå°†æ¸²æŸ“æ¨¡å¼ä»ä¸€æ¬¡æ€§æ‰¿è½½å…¨é‡æ•°æ®ï¼Œè½¬å˜ä¸ºåŠ¨æ€çš„çª—å£åŒ–æ¸²æŸ“ã€‚åˆå§‹åŒ–æ—¶ä»…åŠ è½½è§†å£èŒƒå›´å†…çš„æ•°æ®ï¼Œéšç€ç”¨æˆ·æ»šåŠ¨æˆ–ç¼©æ”¾å†åŠ¨æ€åŠ è½½å…¶ä»–éƒ¨åˆ†ã€‚è¿™ç§æ–¹å¼å°†æ¸²æŸ“å‹åŠ›åˆ†æ•£åˆ°å¤šæ¬¡è½»é‡çº§æ“ä½œä¸­ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†å•æ¬¡æ¸²æŸ“å¡é¡¿ï¼Œå¤§å¹…æå‡äº†äº¤äº’å“åº”é€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> option = {
  <span class="hljs-attr">dataZoom</span>: [
    { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">"inside"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">20</span>
    },
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"slider"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">20</span>,
    },
  ],
  <span class="hljs-attr">series</span>:[
    <span class="hljs-comment">//...</span>
  ]
};
</code></pre>
<p>ã€€ã€€ç„¶è€Œï¼Œè¿™é‡Œå­˜åœ¨ä¸€ä¸ªçŠ¶æ€å†²çªé—®é¢˜ï¼Œæ¯æ¬¡ä»æ¥å£è·å–æ–°æ•°æ®å¹¶é‡æ¸²æŸ“å›¾è¡¨æ—¶ï¼ŒdataZooméƒ½ä¼šè¢«å¼ºåˆ¶é‡ç½®åˆ°åˆå§‹çš„[0, 20]åŒºé—´ã€‚å¦‚æœç”¨æˆ·åœ¨ä¹‹å‰å·²ç»é€šè¿‡æ‹–æ‹½ç¼©æ”¾æµè§ˆäº†å…¶ä»–æ•°æ®åŒºåŸŸï¼Œè¿™ä¸ªè¡Œä¸ºå°±ä¼šç ´åå…¶æ¢ç´¢çŠ¶æ€ï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒå‰²è£‚ã€‚</p>
<p>ã€€ã€€ç¬¬ä¸€ç§å¸¸è§„çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œæˆ‘ä»¬åœ¨æ ¸å¿ƒçš„å›¾è¡¨æ¸²æŸ“å‡½æ•°<code>renderChart</code>ä¸­å¼•å…¥ä¸€ä¸ªå®ˆå«å‚æ•°isInitialã€‚åªæœ‰å½“ isInitial ä¸º trueï¼ˆä¾‹å¦‚åˆæ¬¡æ¸²æŸ“æ—¶ï¼‰ï¼Œæ‰è®¾ç½®dataZoomçš„åŒºé—´ã€‚åœ¨å¸¸è§„çš„æ•°æ®æ›´æ–°æ¸²æŸ“ä¸­ï¼Œåˆ™ä¿ç•™ç”¨æˆ·å½“å‰äº¤äº’çŠ¶æ€ï¼Œä»…åˆ·æ–°æ•°æ®è€Œä¸è§¦åŠ¨ç¼©æ”¾ç»„ä»¶ã€‚</p>
<p>ã€€ã€€å¦ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œåœ¨setOptionæ—¶ï¼Œä½¿ç”¨<code>replaceMerge</code>å‚æ•°ï¼Œå‘Šè¯‰EChartsåªæ›¿æ¢æŒ‡å®šçš„ç»„ä»¶ï¼Œå…¶ä»–ç»„ä»¶ï¼ˆå¦‚ dataZoomï¼‰ä¿æŒä¸å˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">echartsInst.<span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">dataZoom</span>: [
    { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">"inside"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">20</span>
    },
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"slider"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">20</span>,
    },
  ],
  <span class="hljs-attr">series</span>:[
    <span class="hljs-comment">//...</span>
  ]
}, {
  <span class="hljs-attr">notMerge</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">replaceMerge</span>: [<span class="hljs-string">"xAxis"</span>, <span class="hljs-string">"series"</span>],
})
</code></pre>
<p>ã€€ã€€è¿™æ ·å³ä½¿å¤šæ¬¡setOptionä¹Ÿä¸ä¼šé‡ç½®dataZoomçš„åŒºé—´ã€‚</p>
<h3 data-id="heading-6">å¤§æ•°æ®æ¨¡å¼ä¸æ¸è¿›å¼æ¸²æŸ“</h3>
<p>ã€€ã€€ç»å¸¸æŸ¥çœ‹Echartså®˜æ–¹æ–‡æ¡£çš„å°ä¼™ä¼´ï¼Œç›¸ä¿¡éƒ½çœ‹åˆ°è¿‡largeå’Œprogressiveç­‰å±æ€§ï¼Œä½†æ˜¯ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ç”¨åˆ°largeå’Œprogressiveå‘¢ï¼Ÿç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´éƒ½ä¸€å¤´é›¾æ°´ï¼Œè¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°±æ¥å¥½å¥½è¯´é“è¯´é“ã€‚</p>
<p>ã€€ã€€<code>largeå±æ€§</code>æ˜¯EChartsä¸ºæµ·é‡æ•°æ®æ¸²æŸ“è®¾è®¡çš„ä¸“ç”¨æ€§èƒ½ä¼˜åŒ–å¼€å…³ï¼Œé€šå¸¸æŒ‡æ•°æ®é‡åœ¨æ•°ä¸‡åˆ°æ•°ç™¾ä¸‡çº§åˆ«ï¼› å½“ä½ çš„æ•°æ®é‡é¢„è®¡è¾¾åˆ°æ­¤è§„æ¨¡æ—¶ï¼Œå¼€å¯æ­¤é€‰é¡¹å°†ç›´æ¥è°ƒç”¨åº•å±‚ä¼˜åŒ–ç®—æ³•ï¼Œä»è€Œè·å¾—æ˜¾è‘—çš„æ¸²æŸ“æ€§èƒ½æå‡ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡è¡¨æ ¼å®é™…æ„Ÿå—ä¸€ä¸‹10w+çº§çš„å®æµ‹å¯¹æ¯”æ•°æ®ï¼š</p>






























<table><thead><tr><th>æŒ‡æ ‡</th><th>æœªå¼€å¯ large</th><th>å¼€å¯ large</th></tr></thead><tbody><tr><td>FPS</td><td>3-10</td><td>51-60</td></tr><tr><td>MS(æ¸²æŸ“ä¸€å¸§æ‰€éœ€çš„æ¯«ç§’æ•°)</td><td>179-246</td><td>17-28</td></tr><tr><td>å†…å­˜å ç”¨(MB)</td><td>277-305</td><td>53-59</td></tr><tr><td>äº¤äº’å“åº”</td><td>å¡é¡¿æ˜æ˜¾</td><td>åŸºæœ¬æµç•…</td></tr></tbody></table>
<p>ã€€ã€€<code>largeThreshold</code>æ˜¯ä¸largeå±æ€§é…åˆä½¿ç”¨çš„é˜ˆå€¼å‚æ•°ï¼Œå®ƒå®šä¹‰äº†å¯ç”¨å¤§è§„æ¨¡ä¼˜åŒ–æ¨¡å¼çš„æ•°æ®é‡ä¸‹é™ã€‚å½“ä¸”ä»…å½“æ•°æ®é¡¹æ•°è¶…è¿‡æ­¤é˜ˆå€¼æ—¶ï¼Œä¼˜åŒ–ç»˜åˆ¶é€»è¾‘æ‰ä¼šç”Ÿæ•ˆï¼›åä¹‹ï¼Œç³»ç»Ÿå°†ä½¿ç”¨æ ‡å‡†æ¸²æŸ“æµç¨‹ï¼Œé¿å…ä¸å¿…è¦çš„å¼€é”€ï¼›å¤§å¤šæ•°æƒ…å†µä¸‹æ— éœ€æ‰‹åŠ¨è°ƒæ•´ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">series</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"bar"</span>,
      data,
      <span class="hljs-attr">large</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">largeThreshold</span>: <span class="hljs-number">1000</span>,
    },
  ],
});
</code></pre>
<blockquote>
<p><strong>éœ€è¦æ³¨æ„</strong>çš„æ˜¯ï¼Œä¸æ˜¯æ¯ç§ç±»å‹çš„å›¾è¡¨éƒ½æ”¯æŒlargeå’ŒlargeThresholdå±æ€§çš„ï¼Œç›®å‰ä»…æœ‰barå’Œscatterå›¾è¡¨æ”¯æŒã€‚</p>
</blockquote>
<p>ã€€ã€€éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œåœ¨largeæ¨¡å¼ä¸‹ï¼ŒEchartså‡ºäºæ€§èƒ½ä¼˜åŒ–çš„è€ƒè™‘ï¼Œæ— æ³•ä¸ºå•ä¸ªæ•°æ®ç‚¹è®¾ç½®ç‹¬ç«‹æ ·å¼ï¼Œæ‰€æœ‰æ•°æ®ç‚¹å°†å…±äº«åŒä¸€å¥—æ ·å¼é…ç½®ï¼›æ¯”å¦‚ä¸‹é¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸ºæœ€åä¸€ä¸ªæ•°æ®é¡¹å•ç‹¬è®¾ç½®çš„itemStyleå°±ä¸ä¼šç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">series</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"bar"</span>,
      <span class="hljs-attr">data</span>: [
        <span class="hljs-number">10</span>,
        <span class="hljs-number">20</span>,
        <span class="hljs-number">30</span>,
        <span class="hljs-comment">// è¿™ä¸ªä¸ä¼šç”Ÿæ•ˆ</span>
        { <span class="hljs-attr">value</span>: <span class="hljs-number">40</span>, <span class="hljs-attr">itemStyle</span>: { <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span> } }
      ],
      <span class="hljs-attr">large</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">largeThreshold</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">itemStyle</span>: {
        <span class="hljs-comment">// æ‰€æœ‰æŸ±å­éƒ½æ˜¯è¿™ä¸ªé¢œè‰²</span>
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#fff'</span>
      }
    },
  ],
});
</code></pre>
<p>ã€€ã€€<code>progressiveå±æ€§</code>æœ¬è´¨æ˜¯å¼€å¯â€œåˆ†ç‰‡æ¸²æŸ“â€æ¨¡å¼ï¼Œç”¨ä»¥è§£å†³è¶…å¤§è§„æ¨¡å›¾å½¢å…ƒç´ ï¼ˆæ•°åƒè‡³åƒä¸‡çº§ï¼‰é€ æˆçš„æµè§ˆå™¨ç¬æ—¶é˜»å¡é£é™©ã€‚å¯ç”¨åï¼ŒEChartsä¼šå°†åºå¤§çš„æ•°æ®é›†è‡ªåŠ¨åˆ†å‰²ä¸ºå¤šä¸ªå°å—ï¼ˆchunkï¼‰ï¼Œåœ¨å¤šä¸ªåŠ¨ç”»å¸§ä¸­ä¾æ¬¡æ¸²æŸ“ï¼Œä»è€Œå°†ä¸€æ¬¡æ€§çš„æ²‰é‡è´Ÿè½½åˆ†æ•£ä¸ºå¹³ç¼“çš„å¢é‡ä»»åŠ¡ã€‚æˆ‘ä»¬åœ¨æ•£ç‚¹å›¾ä¸Šå®æµ‹æ­¤åŠŸèƒ½ï¼Œå¯ä»¥æ¸…æ™°åœ°è§‚å¯Ÿåˆ°æ•°ä¸‡ä¸ªæ•°æ®ç‚¹å¦‚åŒé›¨ç‚¹èˆ¬åœ¨ç”»å¸ƒä¸Šé€æ¸æµ®ç°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">Array</span>&lt;[<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>]&gt; = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
  data.<span class="hljs-title function_">push</span>([
    <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000</span>, 
    <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000</span>
  ]);
}

<span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">series</span>: [
    {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"scatter"</span>,
        data,
        <span class="hljs-attr">progressive</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">progressiveThreshold</span>: <span class="hljs-number">3000</span>,
        <span class="hljs-attr">progressiveChunkMode</span>: <span class="hljs-string">'mod'</span>
    },
  ],
});
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c802f9023f1c40b7a4fb8beb81f4aeef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=DyhW2X74eyMmE1K356VMb3xs2dc%3D" alt="progressiveå±æ€§æ•ˆæœ" loading="lazy"/></p>
<p>ã€€ã€€<code>progressiveå±æ€§</code>æ§åˆ¶æ¸è¿›å¼æ¸²æŸ“çš„ â€œç²’åº¦â€ï¼Œå…¶å€¼ä¸ºæ¯ä¸€å¸§æ¸²æŸ“çš„å›¾å½¢æ•°é‡ï¼Œé»˜è®¤å€¼ä¸º400ï¼Œè®¾ä¸º0ï¼Œåˆ™ç›¸å½“äºå…³é—­æ­¤åŠŸèƒ½ï¼›è€Œ<code>progressiveThresholdå±æ€§</code>åˆ™è®¾å®šäº†å¯ç”¨æ­¤åŠŸèƒ½çš„ â€œé—¨æ§›â€ã€‚ä»…å½“å›¾å½¢æ€»æ•°è¶…è¿‡æ­¤é˜ˆå€¼æ—¶ï¼Œprogressiveçš„é…ç½®æ‰ä¼šç”Ÿæ•ˆï¼Œå¼€å§‹åˆ†å¸§æ¸²æŸ“ã€‚</p>
<blockquote>
<p>å¼€å¯largeé»˜è®¤ä¼šå¼€å¯progressiveæ¸è¿›æ¸²æŸ“ã€‚</p>
</blockquote>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>ã€€ã€€åˆ°è¿™é‡Œï¼Œæˆ‘çš„Echartsæ€§èƒ½ä¼˜åŒ–ä¸‰éƒ¨æ›²æ€»ç®—å‘Šä¸€æ®µè½äº†ï¼›å½“çœ‹åˆ°ä¸šåŠ¡æ–¹åœ¨æµç•…æ¸²æŸ“ç€å››å¹´è®¾å¤‡æ•°æ®çš„å›¾è¡¨å‰éœ²å‡ºæ»¡æ„ç¬‘å®¹æ—¶ï¼Œæˆ‘å°±çŸ¥é“ï¼Œè¿™æ¬¡ä¼˜åŒ–çš„åŠªåŠ›æ²¡æœ‰ç™½è´¹ã€‚</p>
<p>ã€€ã€€æˆ‘ä»¬é¦–å…ˆæ„å»ºäº†æ•°æ®åˆ†å‰²æœºåˆ¶ã€‚å½“ç”¨æˆ·é€‰æ‹©è·¨å¹´åº¦çš„æŸ¥è¯¢èŒƒå›´æ—¶ï¼Œç³»ç»Ÿä¸å†å‚»ä¹ä¹åœ°ä¸€æ¬¡æ€§è¯·æ±‚æ‰€æœ‰æ•°æ®ï¼Œè€Œæ˜¯åƒä¸€ä½ç»†å¿ƒçš„å›¾ä¹¦ç®¡ç†å‘˜ï¼Œå°†åšåšçš„å†å²æ¡£æ¡ˆæŒ‰æ—¶é—´ç« èŠ‚åˆ†å†Œå–å‡ºã€‚è¿™ä¸ªç®€å•çš„ç­–ç•¥ï¼Œå°†åŸæœ¬é•¿è¾¾14ç§’çš„æ¥å£å“åº”æ—¶é—´åˆ†è§£ä¸ºå¤šä¸ªæ¯«ç§’çº§çš„å¿«é€Ÿè¯·æ±‚ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†æµè§ˆå™¨çš„å†…å­˜è¿‡è½½å’Œç•Œé¢å†»ç»“ã€‚</p>
<p>ã€€ã€€æ¥ç€æˆ‘ä»¬å¼•å…¥äº†Web Workerå¹¶è¡Œè®¡ç®—ã€‚è¿™ç›¸å½“äºç»™æ•°æ®å¤„ç†æµç¨‹é›‡ä½£äº†ä¸€ä½ä¸“å±çš„åå°åŠ©ç†ã€‚æ‰€æœ‰è€—æ—¶çš„æ•°æ®æ¸…æ´—ã€æ ¼å¼è½¬æ¢å’ŒæŒ‡æ ‡è®¡ç®—éƒ½è¢«è½¬ç§»åˆ°ç‹¬ç«‹çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸»çº¿ç¨‹å¾—ä»¥ä¿æŒè½»ç›ˆï¼Œç»§ç»­æµç•…åœ°å“åº”ç”¨æˆ·çš„æ¯ä¸€æ¬¡ç‚¹å‡»å’Œæ»‘åŠ¨ã€‚è¿™ç§å‰åå°åˆ†å·¥åä½œçš„æ¨¡å¼ï¼Œè®©æ•°æ®å¤„ç†ä»â€œé˜»å¡æ€§ä»»åŠ¡â€å˜æˆäº†â€œåå°æœåŠ¡â€ã€‚</p>
<p>ã€€ã€€æœ€åï¼Œæˆ‘ä»¬åœ¨Echartsæ¸²æŸ“å±‚æ–½å±•äº†ä¸€ç³»åˆ—ç»„åˆä¼˜åŒ–ã€‚é€šè¿‡LTTBé‡‡æ ·ç®—æ³•ï¼Œæˆ‘ä»¬åœ¨ä¿ç•™æ•°æ®è¶‹åŠ¿çµé­‚çš„åŒæ—¶ï¼Œå·§å¦™åœ°å‡å°‘äº†æ¸²æŸ“è´Ÿæ‹…ï¼›å€ŸåŠ©dataZoomçš„è§†å£åŠ¨æ€åŠ è½½ï¼Œæˆ‘ä»¬å®ç°äº†â€œæ‰€è§å³æ‰€å¾—â€çš„æŒ‰éœ€æ¸²æŸ“ï¼›è€Œå¯ç”¨largeå’Œprogressiveæ¨¡å¼ï¼Œåˆ™æ˜¯ç»™å›¾è¡¨å¼•æ“è£…ä¸Šäº†æ¶¡è½®å¢å‹ï¼Œè®©ä¸‡çº§æ•°æ®ç‚¹çš„ç»˜åˆ¶ä¹Ÿèƒ½è¾¾åˆ°60å¸§çš„æµç•…ä½“éªŒã€‚</p>
<p>ã€€ã€€ç°åœ¨å›é¡¾è¿™æ®µæ—…ç¨‹ï¼Œè®©æˆ‘æ·±åˆ»è®¤è¯†åˆ°æ•°æ®å¯è§†åŒ–çš„æœ¬è´¨â€”â€”å®ƒä¸ä»…ä»…æ˜¯æ•°æ®çš„å›¾å½¢åŒ–å‘ˆç°ï¼Œæ›´æ˜¯ä¿¡æ¯ä¸æ´å¯Ÿçš„è‰ºæœ¯è¡¨è¾¾ã€‚å¥½äº†ï¼Œæˆ‘çš„ä¼˜åŒ–ä¹‹æ—…æš‚å‘Šä¸€æ®µè½ï¼Œä½†æŠ€æœ¯çš„æ¢ç´¢æ°¸æ— æ­¢å¢ƒã€‚é‚£ä¹ˆï¼Œä½ çš„é¡¹ç›®ä¸­æ˜¯å¦ä¹Ÿè—ç€éœ€è¦è¢«é©¯æœçš„â€œæ•°æ®å·¨å…½â€å‘¢ï¼Ÿå¸¦ä¸Šè¿™ä»½å®æˆ˜å¿ƒå¾—ï¼Œå¼€å§‹ä½ çš„ä¼˜åŒ–ä¹‹æ—…å§ï¼</p>
<p>å¦‚æœè§‰å¾—å†™å¾—è¿˜ä¸é”™ï¼Œè¯·å…³æ³¨æˆ‘çš„<a href="//juejin.im/user/580038cebf22ec0064bd0b2d" target="_blank" title="//juejin.im/user/580038cebf22ec0064bd0b2d">æ˜é‡‘ä¸»é¡µ</a>ã€‚æ›´å¤šæ–‡ç« è¯·è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fxieyufei.com" target="_blank" title="https://xieyufei.com" ref="nofollow noopener noreferrer">è°¢å°é£çš„åšå®¢</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ ä¸çŸ¥é“çš„ v-on]]></title>    <link>https://juejin.cn/post/7603355275256954920</link>    <guid>https://juejin.cn/post/7603355275256954920</guid>    <pubDate>2026-02-06T06:18:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603355275256954920" data-draft-id="7603308967124795392" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ ä¸çŸ¥é“çš„ v-on"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-02-06T06:18:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SuperEugene"/> <meta itemprop="url" content="https://juejin.cn/user/2366613652515256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ ä¸çŸ¥é“çš„ v-on
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2366613652515256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SuperEugene
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:18:24.000Z" title="Fri Feb 06 2026 06:18:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>v-on</code> æ˜¯ <code>Vue</code> çš„<strong>äº‹ä»¶ç»‘å®šæŒ‡ä»¤</strong>ï¼Œè¿‘æœŸåœ¨ä½¿ç”¨<code>Vxe Table</code>ç»„ä»¶åº“çš„æ—¶å€™çœ‹è§äº†ä¸€ä¸ªå°±èŒå…¬å¸é¡¹ç›®åœºæ™¯ä¸å¸¸ç”¨çš„å†™æ³•ï¼Œåœ¨æ­¤åˆ†äº«ç»™åŒæ ·ä¸å¸¸ç”¨æˆ–ä¸çŸ¥é“çš„åŒå­¦ä»¬ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//æ­¤å¤„å¤åˆ¶çš„æ˜¯vxetbaleç»„ä»¶åº“çš„ç¤ºä¾‹ä»£ç </span>
&lt;vxe-grid v-bind=<span class="hljs-string">"gridOptions"</span> v-on=<span class="hljs-string">"gridEvents"</span>&gt;&lt;/vxe-grid&gt;

<span class="hljs-keyword">const</span> <span class="hljs-attr">gridEvents</span>: <span class="hljs-title class_">VxeGridListeners</span> = { 
    pageChange ({ pageSize, currentPage }) { 
        pagerVO.<span class="hljs-property">currentPage</span> = currentPage
        pagerVO.<span class="hljs-property">pageSize</span> = pageSize
        <span class="hljs-title function_">loadList</span>()
    } 
}
</code></pre>
<p>v-onç»å¤§éƒ¨åˆ†äººåªçŸ¥é“æ˜¯vueæä¾›çš„äº‹ä»¶ç»‘å®šapiï¼Œé€šå¸¸ç”¨æ³•ï¼š<code>v-on:click="getInfo"</code> æˆ–è€…ç®€å†™ <code>@click="handleClick"</code>ã€‚åœ¨ä¸Šè¿°æ¡ˆä¾‹ä»£ç ä¸­<code>v-on</code>åé¢ç›´æ¥å°±æ˜¯<code>="gridEvents"</code>è¿™å¹¶ä¸æ˜¯é”™è¯¯å†™æ³•ï¼Œ è€Œæ˜¯<code>v-on</code>çš„<strong>å¯¹è±¡å¼äº‹ä»¶ç»‘å®š</strong>å†™æ³•ã€‚å’Œå¸¸ç”¨çš„ <code>@click="handleClick"</code> å±äºåŒä¸€å¥—äº‹ä»¶ç»‘å®šæœºåˆ¶ï¼Œä»…å†™æ³•å½¢å¼ä¸åŒã€‚</p>
<h2 data-id="heading-0">ä¸¤ç§å†™æ³•å¯¹æ¯”</h2>
<h3 data-id="heading-1">1. å•ä¸ªäº‹ä»¶ï¼ˆå¸¸è§„ç†Ÿæ‚‰å†™æ³•ï¼‰</h3>
<p><code>@</code> æ˜¯ <code>v-on:</code> çš„è¯­æ³•ç³–ï¼Œä¸¤ç§å†™æ³•å®Œå…¨ç­‰ä»·ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;button <span class="hljs-meta">@click</span>=<span class="hljs-string">"handleClick"</span>&gt;ç‚¹å‡»&lt;/button&gt;
&lt;!-- ç­‰ä»·äº --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">"handleClick"</span>&gt;</span>ç‚¹å‡»<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-2">2. å¯¹è±¡å¼ç»‘å®šï¼ˆv-on="å¯¹è±¡" ç”¨æ³•ï¼‰</h3>
<p>ç›´æ¥é€šè¿‡ <code>v-on</code> ç»‘å®šä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œé€‚ç”¨äºå¤šä¸ªäº‹ä»¶ç»‘å®šçš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;vxe-grid v-on=<span class="hljs-string">"gridEvents"</span>&gt;&lt;/vxe-grid&gt;
</code></pre>
<p>å…¶ä¸­ <code>gridEvents</code> æ˜¯ä¸€ä¸ª<strong>é”®å€¼å¯¹å¯¹è±¡</strong>ï¼š</p>
<ul>
<li>é”®ï¼šäº‹ä»¶åï¼ˆå¦‚ <code>pageChange</code>ã€<code>cellClick</code>ï¼‰</li>
<li>å€¼ï¼šè¯¥äº‹ä»¶å¯¹åº”çš„å¤„ç†å‡½æ•°<code>Vue</code> ä¼šè‡ªåŠ¨éå†è¿™ä¸ªå¯¹è±¡ï¼Œå°†æ¯ä¸ªé”®å€¼å¯¹è§£æä¸ºã€Œ<code>v-on:äº‹ä»¶å=å¤„ç†å‡½æ•°</code>ã€çš„å½¢å¼å®Œæˆç»‘å®šã€‚</li>
</ul>
<h2 data-id="heading-3">åœ¨ä»£ç ä¸­çš„å®é™…å«ä¹‰</h2>
<p>ä»¥ <code>vxe-table</code>çš„åˆ†é¡µäº‹ä»¶ä¸ºä¾‹ï¼Œå®é™…å®šä¹‰çš„äº‹ä»¶å¯¹è±¡å¦‚ä¸‹ï¼ˆåŒ…å«<code>TypeScript</code>ç±»å‹çº¦æŸï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-attr">gridEvents</span>: <span class="hljs-title class_">VxeGridListeners</span> = {
  <span class="hljs-title function_">pageChange</span>(<span class="hljs-params">{ pageSize, currentPage }</span>) {
    pagerVO.<span class="hljs-property">currentPage</span> = currentPage
    pagerVO.<span class="hljs-property">pageSize</span> = pageSize
    <span class="hljs-title function_">loadList</span>()
  },
}
</code></pre>
<p>æ­¤æ—¶ <code>v-on="gridEvents"</code> å®Œå…¨ç­‰ä»·äº<strong>å•ä¸ªäº‹ä»¶ç»‘å®šçš„å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;vxe-grid v-<span class="hljs-attr">on</span>:pageChange=<span class="hljs-string">"gridEvents.pageChange"</span>&gt;&lt;/vxe-grid&gt;
</code></pre>
<p>å¦‚æœ <code>gridEvents</code> ä¸­åŒ…å«<strong>å¤šä¸ªäº‹ä»¶</strong>ï¼Œ<code>Vue</code>ä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰äº‹ä»¶çš„æ‰¹é‡ç»‘å®šï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åŒ…å«å¤šä¸ªäº‹ä»¶çš„å¤„ç†å¯¹è±¡</span>
<span class="hljs-keyword">const</span> gridEvents = {
  <span class="hljs-attr">pageChange</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> { ... },
  <span class="hljs-attr">editClosed</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> { ... },
  <span class="hljs-attr">cellClick</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> { ... },
}
</code></pre>
<p>ç­‰ä»·äºæ‰‹åŠ¨ä¸ºæ¯ä¸ªäº‹ä»¶å•ç‹¬ç»‘å®šï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;vxe-grid
  v-<span class="hljs-attr">on</span>:pageChange=<span class="hljs-string">"gridEvents.pageChange"</span>
  v-<span class="hljs-attr">on</span>:editClosed=<span class="hljs-string">"gridEvents.editClosed"</span>
  v-<span class="hljs-attr">on</span>:cellClick=<span class="hljs-string">"gridEvents.cellClick"</span>
&gt;&lt;/vxe-grid&gt;
</code></pre>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆä½¿ç”¨å¯¹è±¡å¼äº‹ä»¶ç»‘å®šå†™æ³•ï¼Ÿ</h2>
<ol>
<li><strong>äº‹ä»¶å¤šæ—¶æ›´ç®€æ´</strong>ï¼šæ— éœ€åœ¨æ¨¡æ¿ä¸­é‡å¤ä¹¦å†™å¤§é‡ <code>v-on:xxx="xxx"</code>ï¼Œä»…éœ€ä¸€ä¸ª <code>v-on="å¯¹è±¡"</code> å³å¯å®Œæˆæ‰¹é‡ç»‘å®šï¼Œç®€åŒ–æ¨¡æ¿ä»£ç ï¼›</li>
<li><strong>ä¾¿äºç»´æŠ¤</strong>ï¼šæ‰€æœ‰äº‹ä»¶çš„å¤„ç†å‡½æ•°éƒ½é›†ä¸­åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œäº‹ä»¶åå’Œå¯¹åº”é€»è¾‘ä¸€ä¸€å¯¹åº”ï¼Œåç»­æ–°å¢ / ä¿®æ”¹ / åˆ é™¤äº‹ä»¶æ—¶ï¼Œåªéœ€æ“ä½œè¯¥å¯¹è±¡ï¼Œæ— éœ€æ”¹åŠ¨æ¨¡æ¿ï¼›</li>
<li><strong>é€‚é…ç»„ä»¶åº“åœºæ™¯</strong>ï¼š <code>vxe-table</code>ã€<code>Element Plus</code>è¿™ç±» UI ç»„ä»¶åº“çš„å¤æ‚ç»„ä»¶ï¼ˆå¦‚è¡¨æ ¼ã€æ ‘å½¢æ§ä»¶ï¼‰é€šå¸¸æä¾›å¤§é‡äº‹ä»¶ï¼Œä½¿ç”¨å¯¹è±¡ç»Ÿä¸€é…ç½®äº‹ä»¶ï¼Œä»£ç ç»“æ„ä¼šæ›´æ¸…æ™°ã€‚</li>
</ol>
<p>ä»¥ä¸Šä¾¿æ˜¯å¯¹<code>v-on</code>çš„åˆ†äº«ï¼Œæ¬¢è¿å¤§å®¶æŒ‡æ­£è®¨è®ºï¼Œä¸å¤§å®¶å…±å‹‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React çš„ ViewTransition å…ƒç´ ]]></title>    <link>https://juejin.cn/post/7602811649126891571</link>    <guid>https://juejin.cn/post/7602811649126891571</guid>    <pubDate>2026-02-05T00:58:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602811649126891571" data-draft-id="7602850166731472905" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React çš„ ViewTransition å…ƒç´ "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-05T00:58:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React çš„ ViewTransition å…ƒç´ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:58:23.000Z" title="Thu Feb 05 2026 00:58:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Freacts-viewtransition-element%2F" target="_blank" title="https://frontendmasters.com/blog/reacts-viewtransition-element/" ref="nofollow noopener noreferrer">Reactâ€™s ViewTransition Element</a></p>
<p>ä½œè€…ï¼šChris Coyier</p>
<p>æ—¥æœŸï¼š2026å¹´1æœˆ30æ—¥</p>
<p>ç¿»è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN" target="_blank" title="https://github.com/TUARAN" ref="nofollow noopener noreferrer">TUARAN</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">å‰ç«¯å‘¨åˆŠ</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<p>ä½œä¸ºä¸€ä¸ª View Transitions çš„çˆ±å¥½è€…ï¼ŒåŒæ—¶åˆåœ¨ç”¨ Reactï¼Œæˆ‘è‡ªç„¶ä¼šå…³æ³¨ React ç°åœ¨ç›´æ¥æä¾›äº†ä¸€ä¸ª <code>&lt;ViewTransition&gt;</code> å…ƒç´ ï¼ˆç›®å‰åœ¨ â€œCanaryâ€ é¢„å‘å¸ƒç‰ˆæœ¬ä¸­ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4728576e2e7349779a5eccab31609eed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770857902&amp;x-signature=hqNZ4FAkvFqE8mSdYaKtNgOokAk%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘æƒ³çœ‹çœ‹å®ƒåˆ°åº•æ€ä¹ˆç”¨ï¼Œä½†åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆâ€¦â€¦<strong>åˆ«</strong>ç”¨å®ƒã€‚View Transitions æ˜¯ Web å¹³å°æœ¬èº«çš„ç‰¹æ€§ï¼Œä¸å±äºä»»ä½•æ¡†æ¶ã€‚æ‰€ä»¥ React ä¹Ÿæ— æ³•é˜»æ­¢æˆ‘ä»¬ä½¿ç”¨å®ƒã€‚ç›´æ¥ç”¨å…¶å®ä¹Ÿä¸ç®—å¥‡æ€ªã€‚</p>
<h2 data-id="heading-0">åœ¨ React ä¸­ä½¿ç”¨ View Transitionsï¼ˆç»å…¸æ–¹å¼ï¼Ÿï¼‰</h2>
<p>åŒé¡µ View Transitions APIï¼ˆå¯¹ React æ›´ç›¸å…³ï¼Œè€Œä¸æ˜¯å¤šé¡µåˆ‡æ¢çš„é‚£ç§ï¼‰åŸºæœ¬æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">startViewTransition</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// åœ¨è¿™é‡Œæ”¹ DOM</span>
});
</code></pre>
<p>ä½†æ”¹ DOM è¿™ç§äº‹â€¦â€¦æ˜¯ React çš„å·¥ä½œã€‚å®ƒå¹¶ä¸å–œæ¬¢ä½ è‡ªå·±å»åŠ¨å®ƒã€‚æ‰€ä»¥ä¸å…¶ç›´æ¥æ“ä½œ DOMï¼Œæˆ‘ä»¬ä¸å¦‚åšäº›â€œæ›´ React çš„äº‹â€ï¼Œæ¯”å¦‚æ›´æ–° stateã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DemoOne</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [buttonExpanded, setButtonExpanded] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleButton</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">startViewTransition</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setButtonExpanded</span>(!buttonExpanded);
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">button</span> ${<span class="hljs-attr">buttonExpanded</span> ? "<span class="hljs-attr">expanded</span>" <span class="hljs-attr">:</span> ""}`}
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleButton}</span>
    &gt;</span>
      Button
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<p>è§†è§‰æ•ˆæœç”± CSS å®Œæˆã€‚çŠ¶æ€å˜åŒ–è§¦å‘ class å˜åŒ–ï¼Œè€Œ class æ”¹å˜æŒ‰é’®çš„æ ·å¼ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.button</span> {
  <span class="hljs-comment">/* button styles */</span>

  &amp;<span class="hljs-selector-class">.expanded</span> {
    scale: <span class="hljs-number">1.4</span>;
    rotate: -<span class="hljs-number">6deg</span>;
  }
}
</code></pre>
<h2 data-id="heading-1">å‡†å¤‡ä½¿ç”¨ <code>&lt;ViewTransition&gt;</code></h2>
<p>å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œè¿™ä¸ªå…ƒç´ è¿˜åªå­˜åœ¨äº React çš„ â€œCanaryâ€ ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä½ å¾—æ˜¾å¼å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install react@canary
</code></pre>
<p>ä½ çš„ <code>package.json</code> ä¼šæŠŠç‰ˆæœ¬å†™æˆ <code>canary</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"canary"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"canary"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¦‚æœä½ åœ¨å®¢æˆ·ç«¯ç”¨ Reactï¼Œä¹Ÿå¯ä»¥ç”¨ CDN çš„ import mapï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"importmap"</span>&gt;</span><span class="javascript">
{
  <span class="hljs-string">"imports"</span>: {
    <span class="hljs-string">"react"</span>: <span class="hljs-string">"https://esm.sh/react@canary"</span>,
    <span class="hljs-string">"react-dom"</span>: <span class="hljs-string">"https://esm.sh/react-dom@canary"</span>
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">åœ¨ React ä¸­ä½¿ç”¨ <code>&lt;ViewTransition&gt;</code></h2>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å¯¼å…¥ <code>ViewTransition</code>ï¼Œå¹¶æŠŠå®ƒä½œä¸º JSX å…ƒç´ ä½¿ç”¨ï¼ŒåŒæ—¶é…åˆå®ƒçš„æ­æ¡£ <code>startTransition</code>ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { startTransition, <span class="hljs-title class_">ViewTransition</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [buttonExpanded, setButtonExpanded] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleButton</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">startTransition</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// ä»¥æ›´â€œReactâ€çš„æ–¹å¼æ”¹å˜ DOM</span>
      <span class="hljs-title function_">setButtonExpanded</span>(!buttonExpanded);
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ViewTransition</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">button</span> ${<span class="hljs-attr">buttonExpanded</span> ? "<span class="hljs-attr">expanded</span>" <span class="hljs-attr">:</span> ""}`}
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleButton}</span>
        &gt;</span>
          Button
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ViewTransition</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></span>
  );
}
</code></pre>
<p>CSS å’Œä¸Šé¢ä¸€æ ·ï¼Œå› ä¸ºæœ¬è´¨è¿˜æ˜¯åˆ‡æ¢ classã€‚æ³¨æ„æˆ‘ä»¬æ²¡æœ‰ç”¨ <code>.classList.toggle("expanded")</code> è¿™ç§ç›´æ¥ DOM æ“ä½œï¼Œè€Œæ˜¯è®© React èµ°è‡ªå·±çš„æ¸²æŸ“æµç¨‹ã€‚</p>
<h2 data-id="heading-3">æ‰€ä»¥â€¦â€¦ä¸¤ç§æ–¹å¼éƒ½èƒ½ç”¨ï¼Ÿ</h2>
<p>æ˜¯çš„ï¼Œè‡³å°‘åœ¨è¿™äº›ç®€å• demo é‡Œéƒ½æ²¡é—®é¢˜ã€‚ç”šè‡³åŒé¡µæ··ç”¨ä¹Ÿå¯ä»¥ã€‚</p>
<p>ä¸€ä¸ªå°å·®å¼‚æ˜¯ï¼šå¦‚æœä½ ç›´æ¥ç”¨ <code>document.startViewTransition</code>ï¼Œéœ€è¦è‡ªå·±åŠ  <code>view-transition-name</code>ï¼›è€Œ <code>&lt;ViewTransition&gt;</code> ä¼šè‡ªåŠ¨å¸®ä½ åŠ ã€‚è¿™ç®—æ˜¯ <code>&lt;ViewTransition&gt;</code> çš„ä¸€ä¸ªå°åŠ åˆ†ç‚¹ã€‚</p>
<h3 data-id="heading-4">æˆ‘â€œè®¨åŒâ€çš„é‚£éƒ¨åˆ†</h3>
<p>æœ‰ä¸€éƒ¨åˆ†æˆ‘å¹¶ä¸å–œæ¬¢è¿™ä¸ªæ–¹æ¡ˆã€‚React å¹¶æ²¡æœ‰ç»™å‡ºå¤ªå¤šé¢å¤–ä»·å€¼ï¼Œå®ƒåªæ˜¯è¦æ±‚ä½ ç”¨ä¸€ç§ä¸ç ´åæ¡†æ¶è¿è¡Œæ–¹å¼çš„å†™æ³•ã€‚å¦‚æœä½ èŠ±äº†å¾ˆå¤šæ—¶é—´å»å­¦å®ƒï¼ˆè€Œä¸”<a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Freference%2Freact%2FViewTransition%23my-viewtransition-is-not-activating" target="_blank" title="https://react.dev/reference/react/ViewTransition#my-viewtransition-is-not-activating" ref="nofollow noopener noreferrer">ç¡®å®æœ‰ä¸å°‘å†…å®¹</a>ï¼‰ï¼Œè¿™äº›çŸ¥è¯†å¹¶ä¸å¤ªèƒ½è¿ç§»åˆ°å…¶ä»–åœ°æ–¹ã€‚</p>
<h3 data-id="heading-5">æˆ‘â€œå‹‰å¼ºæ¥å—â€çš„é‚£éƒ¨åˆ†</h3>
<p>React ä¸€ç›´ä»¥æ¥å°±å¸Œæœ›è‡ªå·±æŒæ§ DOMï¼Œè¿™æ˜¯å®ƒçš„æ ¸å¿ƒå–ç‚¹ã€‚ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œä½ å¿…é¡»è®©å®ƒæ¥åšä¸€äº›åè°ƒå·¥ä½œã€‚è¿™æ„å‘³ç€ä½¿ç”¨ <code>&lt;ViewTransition&gt;</code> å¯ä»¥â€œè‡ªåŠ¨ä¸æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸã€Suspense è¾¹ç•Œã€å¹¶å‘ç‰¹æ€§åè°ƒâ€ï¼Œå®Œæˆæ‰¹é‡æ›´æ–°ã€é˜²å†²çªã€åµŒå¥—ç®¡ç†ç­‰ä½ æˆ‘ä¸æƒ³æ“å¿ƒçš„äº‹æƒ…ã€‚</p>
<p>æ­¤å¤–ï¼Œ<code>&lt;ViewTransition&gt;</code> æœ‰ä¸€ç‚¹ç‚¹æ›´â€œå£°æ˜å¼â€ï¼šä½ æ˜ç¡®åŒ…è£¹äº†è¦è¿‡æ¸¡çš„åŒºåŸŸï¼Œæ›´ç¬¦åˆå¾ˆå¤šäººçš„å¿ƒæ™ºæ¨¡å‹ã€‚ä½†ä½ ä»ç„¶éœ€è¦è°ƒç”¨ <code>startTransition</code>ï¼Œæ‰€ä»¥ä»ç„¶æ˜¯åå‘½ä»¤å¼çš„ã€‚åœ¨æ›´å¤æ‚çš„åµŒå¥— UI ä¸­ï¼Œå¦‚ä½•ç»„ç»‡å®ƒå¯èƒ½ä¼šæœ‰äº›å›°æƒ‘ã€‚</p>
<p>æˆ‘å€’æ˜¯æŒºå–œæ¬¢ <code>&lt;ViewTransition&gt;</code> ä¸Šåƒ <code>enter</code>ã€<code>exit</code> è¿™æ ·çš„æ˜ç¡®å±æ€§ï¼Œå®ƒå¯¹åº”â€œè‡ªå¸¦çš„â€ CSS view transition classï¼Œæ¯”èµ·è‡ªå·±é€šè¿‡ <code>:only-child</code> æŠ€å·§æ¨æ–­è¦ç›´è§‚ä¸€äº›ã€‚</p>
<p>æ€»ä¹‹ï¼Œä»¥ä¸Šå°±æ˜¯æˆ‘çš„çœ‹æ³•ã€‚æ›´å¤šç¤ºä¾‹è¯·å‚è§åŸæ–‡ã€‚</p>
<h2 data-id="heading-6">æ¨è</h2>
<p><strong>React çš„ <code>&lt;ViewTransition&gt;</code> æŠŠ Web åŸç”Ÿ View Transitions çº³å…¥ React çš„æ¸²æŸ“ä¸å¹¶å‘ä½“ç³»ä¸­ã€‚</strong></p>
<p>ç›´æ¥ä½¿ç”¨ <code>document.startViewTransition</code> å·²ç»è¶³å¤Ÿçµæ´»ï¼Œè€Œ <code>&lt;ViewTransition&gt;</code> çš„ä»·å€¼æ›´å¤šä½“ç°åœ¨ä¸ React ç”Ÿå‘½å‘¨æœŸã€Suspenseã€å¹¶å‘æ›´æ–°çš„è‡ªåŠ¨ååŒä¸Šï¼Œä»£ä»·æ˜¯å¤šäº†ä¸€å±‚æ¡†æ¶è¯­ä¹‰ï¼Œå­¦ä¹ æˆæœ¬ä¹Ÿæ›´å React ç§æœ‰ã€‚å®ƒæ›´åƒæ˜¯ä¸€ç§â€œå®‰å…¨å°è£…â€ï¼Œè€Œä¸æ˜¯å¿…é€‰èƒ½åŠ›ã€‚</p>
<p>å¦‚æœä½ éœ€è¦æŠŠè¿™ç±»æ–°ç‰¹æ€§å¿«é€Ÿåšæˆ <strong>ç¤ºä¾‹é¡µã€æŠ€æœ¯æ–‡ç« æˆ– Demo ç«™ç‚¹</strong>ï¼Œå¯ä»¥ç”¨ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Datn" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=atn" ref="nofollow noopener noreferrer">RollCode ä½ä»£ç å¹³å°</a></strong> å¿«é€Ÿæ­å»ºå±•ç¤ºé¡µé¢ï¼ŒæŠŠå®éªŒã€è®²è§£å’Œè½¬åŒ–è·¯å¾„ä¸€æ¬¡æ€§è·‘é€šï¼Œè€Œä¸ç”¨åœ¨å·¥ç¨‹è„šæ‰‹æ¶ä¸Šæ¶ˆè€—ç²¾åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†·çƒ­é’±åŒ…ç³»ç»Ÿè®¾è®¡å®æˆ˜ï¼ˆä¸‹ï¼‰ï¼šæ ¸å¿ƒä»£ç å®ç°ä¸éƒ¨ç½²]]></title>    <link>https://juejin.cn/post/7602850166731718665</link>    <guid>https://juejin.cn/post/7602850166731718665</guid>    <pubDate>2026-02-05T01:14:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602850166731718665" data-draft-id="7602824293164548111" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†·çƒ­é’±åŒ…ç³»ç»Ÿè®¾è®¡å®æˆ˜ï¼ˆä¸‹ï¼‰ï¼šæ ¸å¿ƒä»£ç å®ç°ä¸éƒ¨ç½²"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-02-05T01:14:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†·çƒ­é’±åŒ…ç³»ç»Ÿè®¾è®¡å®æˆ˜ï¼ˆä¸‹ï¼‰ï¼šæ ¸å¿ƒä»£ç å®ç°ä¸éƒ¨ç½²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T01:14:48.000Z" title="Thu Feb 05 2026 01:14:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å†·çƒ­é’±åŒ…ç³»ç»Ÿè®¾è®¡å®æˆ˜ï¼ˆä¸‹ï¼‰ï¼šæ ¸å¿ƒä»£ç å®ç°ä¸éƒ¨ç½²</h2>
<blockquote>
<p>æ·±å…¥ä»£ç å±‚é¢ï¼Œå­¦ä¹ å†·çƒ­é’±åŒ…ç³»ç»Ÿçš„æ ¸å¿ƒå®ç°ã€å¹¶å‘æ§åˆ¶æœºåˆ¶å’Œéƒ¨ç½²æ–¹æ¡ˆã€‚</p>
</blockquote>
<hr/>
<p><strong>æœ¬æ–‡åˆ†ä¸ºä¸Šä¸‹ä¸¤ç¯‡ï¼Œè¿™æ˜¯ä¸‹ç¯‡ã€‚</strong></p>
<p><strong>ä¸Šç¯‡å›é¡¾ï¼š</strong></p>
<ol>
<li>å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦å†·çƒ­é’±åŒ…ï¼Ÿ</li>
<li>å†·çƒ­é’±åŒ…çš„ç”±æ¥ï¼šä»æ¯”ç‰¹å¸è¯´èµ·</li>
<li>é—®é¢˜åœºæ™¯ï¼šä¸€æ¬¡çœŸå®çš„çº¿ä¸Šäº‹æ•…</li>
<li>å†·çƒ­é’±åŒ…æ¶æ„ï¼šå°ç™½ä¹Ÿèƒ½æ‡‚çš„æ–¹æ¡ˆ</li>
<li>ç³»ç»Ÿæ¶æ„è®¾è®¡</li>
</ol>
<p><strong>æœ¬ç¯‡å†…å®¹ï¼š</strong>
6. æ ¸å¿ƒä»£ç å®ç°</p>
<ol start="7">
<li>å®Œæ•´äº¤æ˜“æµç¨‹</li>
<li>å¹¶å‘æ§åˆ¶æœºåˆ¶</li>
<li>éƒ¨ç½²ä¸è¿ç»´</li>
<li>æ€»ç»“ä¸å±•æœ›</li>
</ol>
<hr/>
<h3 data-id="heading-1">å…­ã€æ ¸å¿ƒä»£ç å®ç°</h3>
<h4 data-id="heading-2">6.1 æ ¸å¿ƒå¸¸é‡é…ç½®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç”¨æˆ·è´¦æˆ·æœåŠ¡å®ç°
 * æ ¸å¿ƒé€»è¾‘ï¼šå†·çƒ­é’±åŒ…æ‰£æ¬¾æœºåˆ¶
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserAccountServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserAccountService</span> {

    <span class="hljs-comment">/**
     * çƒ­é’±åŒ…é˜ˆå€¼
     * å½“çƒ­é’±åŒ…ä½™é¢ä½äºæ­¤å€¼æ—¶ï¼Œè‡ªåŠ¨ä»å†·é’±åŒ…è¡¥å……
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">HOT_WALLET_THRESHOLD</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"10000"</span>);

    <span class="hljs-comment">/**
     * çƒ­é’±åŒ…è¡¥å……é‡‘é¢
     * ä»å†·é’±åŒ…è°ƒæ‹¨åˆ°çƒ­é’±åŒ…çš„å›ºå®šé‡‘é¢
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">HOT_WALLET_RECHARGE_AMOUNT</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"50000"</span>);
    
}
</code></pre>
<h4 data-id="heading-3">6.2 å¤„ç†å……å€¼</h4>
<p>å……å€¼æ˜¯ç”¨æˆ·èµ„é‡‘æµå…¥çš„ä¸»è¦æ–¹å¼ï¼Œæ‰€æœ‰å……å€¼ç›´æ¥è¿›å…¥å†·é’±åŒ…ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å¤„ç†å……å€¼
 * å……å€¼é‡‘é¢ç›´æ¥è¿›å…¥å†·é’±åŒ…
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRecharge</span><span class="hljs-params">(UserAccount account, TransactionRequest request,
                            TransactionResponse response)</span> {
    <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">amount</span> <span class="hljs-operator">=</span> request.getAmount();

    <span class="hljs-comment">// å¢åŠ å†·é’±åŒ…ä½™é¢ï¼ˆä½¿ç”¨ä¹è§‚é”ï¼‰</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> userAccountMapper.addColdBalance(
        account.getUserId(),
        amount.longValue(),
        account.getVersion()
    );

    <span class="hljs-keyword">if</span> (rows == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"å……å€¼å¤±è´¥ï¼Œå¹¶å‘å†²çª"</span>);
    }

    <span class="hljs-comment">// æ›´æ–°è´¦æˆ·å¯¹è±¡</span>
    account.setColdBalance(account.getColdBalance().add(amount));

    <span class="hljs-comment">// è®°å½•äº¤æ˜“</span>
    saveTransactionRecord(account, request, response,
                         TransactionType.RECHARGE,
                         account.getColdBalance(),
                         account.getHotBalance());
}
</code></pre>
<h4 data-id="heading-4">6.3 å¤„ç†æ¶ˆè´¹ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</h4>
<p>è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿæœ€æ ¸å¿ƒçš„é€»è¾‘ï¼š<strong>ä¼˜å…ˆä»çƒ­é’±åŒ…æ‰£æ¬¾ï¼Œçƒ­é’±åŒ…ä¸è¶³æ—¶è‡ªåŠ¨ä»å†·é’±åŒ…è°ƒæ‹¨</strong>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å¤„ç†æ¶ˆè´¹ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
 * ä¼˜å…ˆä»çƒ­é’±åŒ…æ‰£æ¬¾ï¼Œçƒ­é’±åŒ…ä¸è¶³æ—¶è‡ªåŠ¨ä»å†·é’±åŒ…è°ƒæ‹¨
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processConsume</span><span class="hljs-params">(UserAccount account, TransactionRequest request,
                           TransactionResponse response)</span> {
    <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">amount</span> <span class="hljs-operator">=</span> request.getAmount();

    <span class="hljs-comment">// 1. æ£€æŸ¥æ€»ä½™é¢æ˜¯å¦è¶³å¤Ÿ</span>
    <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">totalBalance</span> <span class="hljs-operator">=</span> account.getColdBalance().add(account.getHotBalance());
    <span class="hljs-keyword">if</span> (totalBalance.compareTo(amount) &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"ä½™é¢ä¸è¶³"</span>);
    }

    <span class="hljs-comment">// 2. å¦‚æœçƒ­é’±åŒ…ä½™é¢ä¸è¶³ï¼Œå…ˆä»å†·é’±åŒ…è°ƒæ‹¨</span>
    <span class="hljs-keyword">if</span> (account.getHotBalance().compareTo(amount) &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">needTransfer</span> <span class="hljs-operator">=</span> amount.subtract(account.getHotBalance());
        transferColdToHot(account, needTransfer);

        <span class="hljs-comment">// é‡æ–°æŸ¥è¯¢è´¦æˆ·ä»¥è·å–æœ€æ–°çš„ç‰ˆæœ¬å·</span>
        LambdaQueryWrapper&lt;UserAccount&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
        wrapper.eq(UserAccount::getUserId, account.getUserId());
        <span class="hljs-type">UserAccount</span> <span class="hljs-variable">freshAccount</span> <span class="hljs-operator">=</span> userAccountMapper.selectOne(wrapper);
        account.setVersion(freshAccount.getVersion());
        account.setColdBalance(freshAccount.getColdBalance());
        account.setHotBalance(freshAccount.getHotBalance());
    }

    <span class="hljs-comment">// 3. ä»çƒ­é’±åŒ…æ‰£æ¬¾ï¼ˆä½¿ç”¨ä¹è§‚é”ï¼‰</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> userAccountMapper.deductHotBalance(
        account.getUserId(),
        amount.longValue(),
        account.getVersion()
    );

    <span class="hljs-keyword">if</span> (rows == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"æ‰£æ¬¾å¤±è´¥ï¼Œå¹¶å‘å†²çª"</span>);
    }

    <span class="hljs-comment">// æ›´æ–°è´¦æˆ·å¯¹è±¡</span>
    account.setHotBalance(account.getHotBalance().subtract(amount));

    <span class="hljs-comment">// è®°å½•äº¤æ˜“</span>
    saveTransactionRecord(account, request, response, TransactionType.CONSUME,
                         account.getColdBalance(), account.getHotBalance());
}
</code></pre>
<h4 data-id="heading-5">6.4 å†·çƒ­é’±åŒ…è°ƒæ‹¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å†·é’±åŒ…è½¬çƒ­é’±åŒ…ï¼ˆå†…éƒ¨è°ƒæ‹¨ï¼‰
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transferColdToHot</span><span class="hljs-params">(UserAccount account, BigDecimal amount)</span> {
    log.info(<span class="hljs-string">"å¼€å§‹è°ƒæ‹¨: userId={}, amount=å†·è½¬çƒ­{}"</span>, account.getUserId(), amount);

    <span class="hljs-comment">// 1. æ£€æŸ¥å†·é’±åŒ…ä½™é¢</span>
    <span class="hljs-keyword">if</span> (account.getColdBalance().compareTo(amount) &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"å†·é’±åŒ…ä½™é¢ä¸è¶³"</span>);
    }

    <span class="hljs-comment">// 2. æ‰£å‡å†·é’±åŒ…</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">rows1</span> <span class="hljs-operator">=</span> userAccountMapper.deductColdBalance(
        account.getUserId(),
        amount.longValue(),
        account.getVersion()
    );
    <span class="hljs-keyword">if</span> (rows1 == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è°ƒæ‹¨å¤±è´¥ï¼Œå¹¶å‘å†²çª"</span>);
    }
    account.setColdBalance(account.getColdBalance().subtract(amount));

    <span class="hljs-comment">// é‡æ–°æŸ¥è¯¢è·å–æœ€æ–°ç‰ˆæœ¬å·</span>
    LambdaQueryWrapper&lt;UserAccount&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
    wrapper.eq(UserAccount::getUserId, account.getUserId());
    <span class="hljs-type">UserAccount</span> <span class="hljs-variable">freshAccount</span> <span class="hljs-operator">=</span> userAccountMapper.selectOne(wrapper);
    account.setVersion(freshAccount.getVersion());
    account.setColdBalance(freshAccount.getColdBalance());
    account.setHotBalance(freshAccount.getHotBalance());

    <span class="hljs-comment">// 3. å¢åŠ çƒ­é’±åŒ…</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">rows2</span> <span class="hljs-operator">=</span> userAccountMapper.addHotBalance(
        account.getUserId(),
        amount.longValue(),
        account.getVersion()
    );
    <span class="hljs-keyword">if</span> (rows2 == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è°ƒæ‹¨å¤±è´¥ï¼Œå¹¶å‘å†²çª"</span>);
    }
    account.setHotBalance(account.getHotBalance().add(amount));

    log.info(<span class="hljs-string">"è°ƒæ‹¨å®Œæˆ: coldBalance={}, hotBalance={}"</span>,
             account.getColdBalance(), account.getHotBalance());
}
</code></pre>
<h4 data-id="heading-6">6.5 è‡ªåŠ¨å……å€¼çƒ­é’±åŒ…</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è‡ªåŠ¨å……å€¼çƒ­é’±åŒ…
 * å½“çƒ­é’±åŒ…ä½™é¢ä½äºé˜ˆå€¼æ—¶ï¼Œè‡ªåŠ¨ä»å†·é’±åŒ…è¡¥å……
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">autoRechargeHotWallet</span><span class="hljs-params">(UserAccount account)</span> {
    <span class="hljs-comment">// é‡æ–°æŸ¥è¯¢è·å–æœ€æ–°ä½™é¢ï¼ˆåœ¨æ¶ˆè´¹åï¼‰</span>
    LambdaQueryWrapper&lt;UserAccount&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
    wrapper.eq(UserAccount::getUserId, account.getUserId());
    <span class="hljs-type">UserAccount</span> <span class="hljs-variable">freshAccount</span> <span class="hljs-operator">=</span> userAccountMapper.selectOne(wrapper);
    account.setColdBalance(freshAccount.getColdBalance());
    account.setHotBalance(freshAccount.getHotBalance());
    account.setVersion(freshAccount.getVersion());

    <span class="hljs-keyword">if</span> (account.getHotBalance().compareTo(HOT_WALLET_THRESHOLD) &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (account.getColdBalance().compareTo(HOT_WALLET_RECHARGE_AMOUNT) &gt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">try</span> {
                transferColdToHot(account, HOT_WALLET_RECHARGE_AMOUNT);
                log.info(<span class="hljs-string">"è‡ªåŠ¨è¡¥å……çƒ­é’±åŒ…: userId={}, amount={}"</span>,
                        account.getUserId(), HOT_WALLET_RECHARGE_AMOUNT);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.warn(<span class="hljs-string">"è‡ªåŠ¨è¡¥å……çƒ­é’±åŒ…å¤±è´¥: {}"</span>, e.getMessage());
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-7">6.6 å¼€å§‹è°ƒæ‹¨</h4>
<pre><code class="hljs language-java" lang="java"> <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@DistributedLock(key = "#request.userId", waitTime = 3, leaseTime = 10)</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> TransactionResponse <span class="hljs-title function_">transfer</span><span class="hljs-params">(TransferRequest request)</span> {
        log.info(<span class="hljs-string">"å¼€å§‹è°ƒæ‹¨: userId={}, amount={}, type={}"</span>,
                request.getUserId(), request.getAmount(), request.getTransferType());

        <span class="hljs-comment">// 1. æŸ¥è¯¢è´¦æˆ·</span>
        LambdaQueryWrapper&lt;UserAccount&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
        wrapper.eq(UserAccount::getUserId, request.getUserId());
        <span class="hljs-type">UserAccount</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> userAccountMapper.selectOne(wrapper);

        <span class="hljs-keyword">if</span> (account == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è´¦æˆ·ä¸å­˜åœ¨"</span>);
        }

        <span class="hljs-comment">// ä¿å­˜è°ƒæ‹¨å‰ä½™é¢</span>
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">beforeColdBalance</span> <span class="hljs-operator">=</span> account.getColdBalance();
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">beforeHotBalance</span> <span class="hljs-operator">=</span> account.getHotBalance();

        <span class="hljs-comment">// 2. ç”Ÿæˆè°ƒæ‹¨æµæ°´å·</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">transferNo</span> <span class="hljs-operator">=</span> <span class="hljs-string">"TF"</span> + LocalDateTime.now().format(DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyyMMddHHmmss"</span>))
                + String.format(<span class="hljs-string">"%04d"</span>, (<span class="hljs-type">int</span>)(Math.random() * <span class="hljs-number">10000</span>));

        <span class="hljs-comment">// 3. æ‰§è¡Œè°ƒæ‹¨</span>
        <span class="hljs-type">TransferType</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> TransferType.getByCode(request.getTransferType());
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">amount</span> <span class="hljs-operator">=</span> request.getAmount();

        <span class="hljs-keyword">if</span> (type == TransferType.COLD_TO_HOT) {
            <span class="hljs-comment">// å†·è½¬çƒ­</span>
            <span class="hljs-keyword">if</span> (account.getColdBalance().compareTo(amount) &lt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"å†·é’±åŒ…ä½™é¢ä¸è¶³"</span>);
            }
            transferColdToHot(account, amount);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// çƒ­è½¬å†·</span>
            <span class="hljs-keyword">if</span> (account.getHotBalance().compareTo(amount) &lt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"çƒ­é’±åŒ…ä½™é¢ä¸è¶³"</span>);
            }
            <span class="hljs-comment">// æ‰£å‡çƒ­é’±åŒ…</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">rows1</span> <span class="hljs-operator">=</span> userAccountMapper.deductHotBalance(
                    account.getUserId(),
                    amount.longValue(),
                    account.getVersion()
            );
            <span class="hljs-keyword">if</span> (rows1 == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è°ƒæ‹¨å¤±è´¥"</span>);
            }
            account.setHotBalance(account.getHotBalance().subtract(amount));
            account.setVersion(account.getVersion() + <span class="hljs-number">1</span>);

            <span class="hljs-comment">// å¢åŠ å†·é’±åŒ…</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">rows2</span> <span class="hljs-operator">=</span> userAccountMapper.addColdBalance(
                    account.getUserId(),
                    amount.longValue(),
                    account.getVersion()
            );
            <span class="hljs-keyword">if</span> (rows2 == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è°ƒæ‹¨å¤±è´¥"</span>);
            }
            account.setColdBalance(account.getColdBalance().add(amount));
        }

        <span class="hljs-comment">// 4. è®°å½•è°ƒæ‹¨</span>
        <span class="hljs-type">WalletTransfer</span> <span class="hljs-variable">transfer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletTransfer</span>();
        transfer.setTransferNo(transferNo);
        transfer.setUserId(request.getUserId());
        transfer.setTransferType(request.getTransferType());
        transfer.setAmount(amount);
        transfer.setBeforeColdBalance(BigDecimal.ZERO);
        transfer.setAfterColdBalance(account.getColdBalance());
        transfer.setBeforeHotBalance(BigDecimal.ZERO);
        transfer.setAfterHotBalance(account.getHotBalance());
        transfer.setStatus(TransactionStatus.SUCCESS.getCode());
        transfer.setCreateTime(LocalDateTime.now());
        transfer.setUpdateTime(LocalDateTime.now());
        walletTransferMapper.insert(transfer);

        <span class="hljs-comment">// 5. å‘é€è°ƒæ‹¨å®¡è®¡æ¶ˆæ¯</span>
        sendTransferAuditMessage(request.getUserId(), transferNo, type,
                amount, beforeColdBalance, beforeHotBalance,
                account.getColdBalance(), account.getHotBalance(),
                request.getOperatorId(), request.getOperatorName());

        <span class="hljs-comment">// 6. è¿”å›ç»“æœ</span>
        <span class="hljs-type">TransactionResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionResponse</span>();
        response.setTransactionNo(transferNo);
        response.setUserId(request.getUserId());
        response.setAmount(amount);
        response.setStatus(TransactionStatus.SUCCESS.getCode());
        response.setStatusDesc(TransactionStatus.SUCCESS.getDesc());
        response.setColdBalance(account.getColdBalance());
        response.setHotBalance(account.getHotBalance());
        response.setMessage(<span class="hljs-string">"è°ƒæ‹¨æˆåŠŸ"</span>);
        response.setCreateTime(LocalDateTime.now());

        <span class="hljs-keyword">return</span> response;
    }
</code></pre>
<h3 data-id="heading-8">ä¸ƒã€å®Œæ•´äº¤æ˜“æµç¨‹</h3>
<h3 data-id="heading-9">7.1 äº¤æ˜“æµç¨‹å›¾</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/944f4886303247af93013b2f3b0214a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858888&amp;x-signature=oNcO3V2pAugua0mUNseTQVlBRk8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-10">7.2 æ—¶åºå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4ccd763adf843cd9d86d3f10a76bfcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858888&amp;x-signature=fPVwfGrYHm7UgwWhUQNavBukNSE%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-11">7.3 å…¸å‹äº¤æ˜“åœºæ™¯</h4>
<h5 data-id="heading-12">åœºæ™¯1ï¼šæ­£å¸¸æ¶ˆè´¹ï¼ˆçƒ­é’±åŒ…å……è¶³ï¼‰</h5>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·ä½™é¢ï¼šå†·é’±åŒ…=100000ï¼Œçƒ­é’±åŒ…=20000
æ¶ˆè´¹é‡‘é¢ï¼š5000

æµç¨‹ï¼š
<span class="hljs-bullet">1.</span> æ£€æŸ¥çƒ­é’±åŒ…ä½™é¢(20000) &gt;= æ¶ˆè´¹é‡‘é¢(5000)ï¼Ÿ âœ“ æ˜¯
<span class="hljs-bullet">2.</span> ç›´æ¥ä»çƒ­é’±åŒ…æ‰£æ¬¾
<span class="hljs-bullet">3.</span> æœ€ç»ˆï¼šå†·é’±åŒ…=100000ï¼Œçƒ­é’±åŒ…=15000
</code></pre>
<h5 data-id="heading-13">åœºæ™¯2ï¼šçƒ­é’±åŒ…ä¸è¶³</h5>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·ä½™é¢ï¼šå†·é’±åŒ…=100000ï¼Œçƒ­é’±åŒ…=5000
æ¶ˆè´¹é‡‘é¢ï¼š15000

æµç¨‹ï¼š
<span class="hljs-bullet">1.</span> æ£€æŸ¥çƒ­é’±åŒ…ä½™é¢(5000) &gt;= æ¶ˆè´¹é‡‘é¢(15000)ï¼Ÿ âœ— å¦
<span class="hljs-bullet">2.</span> è®¡ç®—éœ€è¦è°ƒæ‹¨ï¼š15000 - 5000 = 10000
<span class="hljs-bullet">3.</span> ä»å†·é’±åŒ…è°ƒæ‹¨10000åˆ°çƒ­é’±åŒ…
<span class="hljs-bullet">4.</span> ä»çƒ­é’±åŒ…æ‰£æ¬¾15000
<span class="hljs-bullet">5.</span> æœ€ç»ˆï¼šå†·é’±åŒ…=90000ï¼Œçƒ­é’±åŒ…=0
</code></pre>
<h5 data-id="heading-14">åœºæ™¯3ï¼šè§¦å‘è‡ªåŠ¨è¡¥å……</h5>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·ä½™é¢ï¼šå†·é’±åŒ…=100000ï¼Œçƒ­é’±åŒ…=5000
æ¶ˆè´¹é‡‘é¢ï¼š1000
çƒ­é’±åŒ…é˜ˆå€¼ï¼š10000
è‡ªåŠ¨è¡¥å……é‡‘é¢ï¼š50000

æµç¨‹ï¼š
<span class="hljs-bullet">1.</span> ä»çƒ­é’±åŒ…æ‰£æ¬¾1000
<span class="hljs-bullet">2.</span> æ‰£æ¬¾åçƒ­é’±åŒ…=4000ï¼Œä½äºé˜ˆå€¼(10000)
<span class="hljs-bullet">3.</span> è§¦å‘è‡ªåŠ¨è¡¥å……ï¼šä»å†·é’±åŒ…è°ƒæ‹¨50000åˆ°çƒ­é’±åŒ…
<span class="hljs-bullet">4.</span> æœ€ç»ˆï¼šå†·é’±åŒ…=50000ï¼Œçƒ­é’±åŒ…=54000
</code></pre>
<hr/>
<h3 data-id="heading-15">å…«ã€å¹¶å‘æ§åˆ¶æœºåˆ¶</h3>
<h4 data-id="heading-16">8.1 å¹¶å‘æ§åˆ¶æœºåˆ¶å›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73133b1dadc24ef19f4f790598cf0d81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858888&amp;x-signature=V6IuPzkIR68OX3%2F3lRea%2BGL%2FIpw%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-17">8.2 åŒé‡å¹¶å‘ä¿æŠ¤</h4>
<p>æœ¬ç³»ç»Ÿé‡‡ç”¨<strong>åŒé‡å¹¶å‘ä¿æŠ¤æœºåˆ¶</strong>ï¼š</p>
<h5 data-id="heading-18">ç¬¬ä¸€å±‚ï¼šRedisåˆ†å¸ƒå¼é”</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.wallet.aspect;

<span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é”æ³¨è§£
 * ç”¨äºé˜²æ­¢åŒä¸€ç”¨æˆ·çš„å¹¶å‘æ“ä½œ
 */</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> DistributedLock {

    <span class="hljs-comment">/**
     * é”çš„keyå‰ç¼€
     */</span>
    String <span class="hljs-title function_">prefix</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">"wallet:lock:"</span>;

    <span class="hljs-comment">/**
     * é”çš„keyè¡¨è¾¾å¼ï¼Œæ”¯æŒSpELè¡¨è¾¾å¼
     */</span>
    String <span class="hljs-title function_">key</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;

    <span class="hljs-comment">/**
     * ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰
     */</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">waitTime</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">3</span>;

    <span class="hljs-comment">/**
     * é”è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
     */</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">leaseTime</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">10</span>;
}


<span class="hljs-keyword">package</span> com.wallet.aspect;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;
<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Around;
<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Aspect;
<span class="hljs-keyword">import</span> org.aspectj.lang.reflect.MethodSignature;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.lang.reflect.Method;
<span class="hljs-keyword">import</span> java.util.UUID;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é”åˆ‡é¢
 * ä½¿ç”¨Rediså®ç°åˆ†å¸ƒå¼é”ï¼Œé˜²æ­¢åŒä¸€ç”¨æˆ·çš„å¹¶å‘æ“ä½œ
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedLockAspect</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> StringRedisTemplate stringRedisTemplate;

    <span class="hljs-meta">@Around("@annotation(com.wallet.aspect.DistributedLock)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">around</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">MethodSignature</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> (MethodSignature) joinPoint.getSignature();
        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> signature.getMethod();
        <span class="hljs-type">DistributedLock</span> <span class="hljs-variable">distributedLock</span> <span class="hljs-operator">=</span> method.getAnnotation(DistributedLock.class);

        <span class="hljs-comment">// è·å–é”çš„key</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> getLockKey(distributedLock, joinPoint);

        <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€çš„é”å€¼</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">lockValue</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();

        <span class="hljs-comment">// å°è¯•è·å–é”</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> Boolean.TRUE.equals(stringRedisTemplate.opsForValue()
                .setIfAbsent(lockKey, lockValue, distributedLock.leaseTime(), TimeUnit.SECONDS));

        <span class="hljs-keyword">if</span> (!acquired) {
            <span class="hljs-comment">// å°è¯•ç­‰å¾…</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            <span class="hljs-type">long</span> <span class="hljs-variable">timeout</span> <span class="hljs-operator">=</span> distributedLock.waitTime() * <span class="hljs-number">1000L</span>;

            <span class="hljs-keyword">while</span> (System.currentTimeMillis() - startTime &lt; timeout) {
                acquired = Boolean.TRUE.equals(stringRedisTemplate.opsForValue()
                        .setIfAbsent(lockKey, lockValue, distributedLock.leaseTime(), TimeUnit.SECONDS));
                <span class="hljs-keyword">if</span> (acquired) {
                    <span class="hljs-keyword">break</span>;
                }
                Thread.sleep(<span class="hljs-number">50</span>);
            }

            <span class="hljs-keyword">if</span> (!acquired) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ“ä½œé¢‘ç¹ï¼Œè¯·ç¨åé‡è¯•"</span>);
            }
        }

        <span class="hljs-keyword">try</span> {
            log.info(<span class="hljs-string">"è·å–åˆ†å¸ƒå¼é”æˆåŠŸ: {}"</span>, lockKey);
            <span class="hljs-keyword">return</span> joinPoint.proceed();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// é‡Šæ”¾é”</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">currentValue</span> <span class="hljs-operator">=</span> stringRedisTemplate.opsForValue().get(lockKey);
            <span class="hljs-keyword">if</span> (lockValue.equals(currentValue)) {
                stringRedisTemplate.delete(lockKey);
                log.info(<span class="hljs-string">"é‡Šæ”¾åˆ†å¸ƒå¼é”æˆåŠŸ: {}"</span>, lockKey);
            }
        }
    }

    <span class="hljs-comment">/**
     * è·å–é”çš„key
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getLockKey</span><span class="hljs-params">(DistributedLock distributedLock, ProceedingJoinPoint joinPoint)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> distributedLock.key();
        <span class="hljs-keyword">if</span> (key.isEmpty()) {
            <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºkey</span>
            Object[] args = joinPoint.getArgs();
            <span class="hljs-keyword">if</span> (args.length &gt; <span class="hljs-number">0</span> &amp;&amp; args[<span class="hljs-number">0</span>] != <span class="hljs-literal">null</span>) {
                key = String.valueOf(args[<span class="hljs-number">0</span>]);
            } <span class="hljs-keyword">else</span> {
                key = <span class="hljs-string">"default"</span>;
            }
        }
        <span class="hljs-keyword">return</span> distributedLock.prefix() + key;
    }
}


<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
 <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@DistributedLock(key = "#request.userId", waitTime = 3, leaseTime = 10)</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> TransactionResponse <span class="hljs-title function_">processTransaction</span><span class="hljs-params">(TransactionRequest request)</span> {
        <span class="hljs-comment">// è®°å½•äº¤æ˜“å¼€å§‹æ—¶é—´</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        TRANSACTION_START_TIME.set(startTime);

        log.info(<span class="hljs-string">"å¼€å§‹å¤„ç†äº¤æ˜“: userId={}, amount={}, type={}"</span>,
                request.getUserId(), request.getAmount(), request.getTransactionType());

        <span class="hljs-comment">// 1. æŸ¥è¯¢è´¦æˆ·ï¼ˆåŠ é”ï¼‰</span>
        LambdaQueryWrapper&lt;UserAccount&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
        wrapper.eq(UserAccount::getUserId, request.getUserId());
        <span class="hljs-type">UserAccount</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> userAccountMapper.selectOne(wrapper);

        <span class="hljs-keyword">if</span> (account == <span class="hljs-literal">null</span>) {
            sendTransactionFailureNotification(request.getUserId(), <span class="hljs-literal">null</span>, request,
                    <span class="hljs-string">"è´¦æˆ·ä¸å­˜åœ¨"</span>, startTime);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è´¦æˆ·ä¸å­˜åœ¨"</span>);
        }

        <span class="hljs-comment">// ä¿å­˜äº¤æ˜“å‰ä½™é¢</span>
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">beforeColdBalance</span> <span class="hljs-operator">=</span> account.getColdBalance();
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">beforeHotBalance</span> <span class="hljs-operator">=</span> account.getHotBalance();

        <span class="hljs-comment">// 2. æ£€æŸ¥è´¦æˆ·çŠ¶æ€</span>
        <span class="hljs-keyword">if</span> (account.getStatus() != AccountStatus.NORMAL.getCode()) {
            sendTransactionFailureNotification(request.getUserId(), <span class="hljs-literal">null</span>, request,
                    <span class="hljs-string">"è´¦æˆ·çŠ¶æ€å¼‚å¸¸ï¼Œæ— æ³•è¿›è¡Œäº¤æ˜“"</span>, startTime);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è´¦æˆ·çŠ¶æ€å¼‚å¸¸ï¼Œæ— æ³•è¿›è¡Œäº¤æ˜“"</span>);
        }
    }     
</code></pre>
<h5 data-id="heading-19">ç¬¬äºŒå±‚ï¼šæ•°æ®åº“ä¹è§‚é”</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.wallet.entity;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.*;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-comment">/**
 * ç”¨æˆ·è´¦æˆ·å®ä½“
 * å†·é’±åŒ… - å­˜å‚¨ç”¨æˆ·çš„ä¸»è¦ä½™é¢
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName("user_account")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserAccount</span> {

    <span class="hljs-meta">@TableId(type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-comment">/**
     * ç”¨æˆ·ID
     */</span>
    <span class="hljs-keyword">private</span> Long userId;

    <span class="hljs-comment">/**
     * ç”¨æˆ·å
     */</span>
    <span class="hljs-keyword">private</span> String username;

    <span class="hljs-comment">/**
     * å†·é’±åŒ…ä½™é¢ï¼ˆä¸»è´¦æˆ·ä½™é¢ï¼‰
     * ç”¨æˆ·çš„ä¸»è¦èµ„é‡‘å­˜å‚¨
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal coldBalance;

    <span class="hljs-comment">/**
     * çƒ­é’±åŒ…ä½™é¢ï¼ˆå¯ç”¨ä½™é¢ï¼‰
     * ç”¨äºæ—¥å¸¸äº¤æ˜“å’Œå¿«é€Ÿæ‰£æ¬¾
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal hotBalance;

    <span class="hljs-comment">/**
     * è´¦æˆ·çŠ¶æ€ï¼š1-æ­£å¸¸ 2-å†»ç»“ 3-æ³¨é”€
     */</span>
    <span class="hljs-keyword">private</span> Integer status;

    <span class="hljs-comment">/**
     * åˆ›å»ºæ—¶é—´
     */</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;

    <span class="hljs-comment">/**
     * æ›´æ–°æ—¶é—´
     */</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;

    <span class="hljs-comment">/**
     * ç‰ˆæœ¬å·ï¼ˆä¹è§‚é”ï¼‰
     */</span>
    <span class="hljs-meta">@Version</span>
    <span class="hljs-keyword">private</span> Integer version;

    <span class="hljs-comment">/**
     * é€»è¾‘åˆ é™¤æ ‡è®°
     */</span>
    <span class="hljs-meta">@TableLogic</span>
    <span class="hljs-keyword">private</span> Integer deleted;
}


<span class="hljs-comment">/**
 * æ‰£æ¬¾æ“ä½œï¼ˆä½¿ç”¨ä¹è§‚é”ï¼‰
 */</span>
UPDATE user_account
<span class="hljs-type">SET</span> <span class="hljs-variable">hot_balance</span> <span class="hljs-operator">=</span> hot_balance - #{amount},
    version = version + <span class="hljs-number">1</span>,
    update_time = NOW()
<span class="hljs-type">WHERE</span> <span class="hljs-variable">user_id</span> <span class="hljs-operator">=</span> #{userId}
  AND hot_balance &gt;= #{amount}
  <span class="hljs-type">AND</span> <span class="hljs-variable">version</span> <span class="hljs-operator">=</span> #{version}
  <span class="hljs-type">AND</span> <span class="hljs-variable">deleted</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
</code></pre>
<h4 data-id="heading-20">8.3 ä¸ºä»€ä¹ˆéœ€è¦åŒé‡ä¿æŠ¤ï¼Ÿ</h4>
<pre><code class="hljs language-erlang" lang="erlang">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åŒé‡ä¿æŠ¤çš„å¿…è¦æ€§                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  å•é Redisé”çš„é—®é¢˜ï¼š                                          â”‚
â”‚  â”œâ”€ Rediså®•æœºæ—¶é”å¤±æ•ˆ                                        â”‚
â”‚  â”œâ”€ ç½‘ç»œåˆ†åŒºæ—¶å¯èƒ½å‡ºç°è„‘è£‚                                   â”‚
â”‚  â””â”€ æ— æ³•é˜²æ­¢DBå±‚é¢çš„ç›´æ¥æ›´æ–°                                 â”‚
â”‚                                                             â”‚
â”‚  å•é æ•°æ®åº“é”çš„é—®é¢˜ï¼š                                         â”‚
â”‚  â”œâ”€ å¤§é‡è¯·æ±‚æ—¶DBè¿æ¥è€—å°½                                     â”‚
â”‚  â”œâ”€ äº‹åŠ¡ç­‰å¾…æ—¶é—´é•¿                                          â”‚
â”‚  â””â”€ ç³»ç»Ÿååé‡ä½                                            â”‚
â”‚                                                             â”‚
â”‚  åŒé‡ä¿æŠ¤çš„ä¼˜åŠ¿ï¼š                                            â”‚
â”‚  â”œâ”€ Redisé”ï¼šæŒ¡ä½<span class="hljs-number">99</span><span class="hljs-comment">%çš„å¹¶å‘è¯·æ±‚                               â”‚</span>
â”‚  â”œâ”€ DBé”ï¼šæŒ¡ä½æ¼ç½‘çš„<span class="hljs-number">1</span><span class="hljs-comment">%                                      â”‚</span>
â”‚  â”œâ”€ å®¹é”™æ€§å¼ºï¼šä»»ä¸€å±‚å¤±æ•ˆéƒ½èƒ½ä¿è¯æ•°æ®æ­£ç¡®                      â”‚
â”‚  â””â”€ æ€§èƒ½ä¼˜å¼‚ï¼šå¤§éƒ¨åˆ†è¯·æ±‚åœ¨Rediså±‚å°±è¢«æ‹¦æˆª                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-21">8.4 ç³»ç»Ÿäº¤äº’å›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f26f6b6d642a4fea866c9e8b4d227ef7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858888&amp;x-signature=J%2FXI52aSWljxWuc4KMyLuJou8Is%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-22">ä¹ã€éƒ¨ç½²ä¸è¿ç»´</h3>
<h4 data-id="heading-23">9.1 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cc67f6c796147f5a609937151af59d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858888&amp;x-signature=e%2BtBSuSEQSq2rvncPJKq5LcEGp8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-24">9.2 Docker Compose é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># MySQLæ•°æ®åº“</span>
  <span class="hljs-attr">mysql:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">wallet-mysql</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3306:3306"</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">wallet_db</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql-data:/var/lib/mysql</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./src/main/resources/schema.sql:/docker-entrypoint-initdb.d/schema.sql</span>

  <span class="hljs-comment"># Redisç¼“å­˜</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:6.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">wallet-redis</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"6379:6379"</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">redis-server</span> <span class="hljs-string">--appendonly</span> <span class="hljs-literal">yes</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis-data:/data</span>

  <span class="hljs-comment"># åº”ç”¨æœåŠ¡</span>
  <span class="hljs-attr">wallet-app:</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">.</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">wallet-app</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8080:8080"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">SPRING_DATASOURCE_URL:</span> <span class="hljs-string">jdbc:mysql://mysql:3306/wallet_db</span>
      <span class="hljs-attr">SPRING_REDIS_HOST:</span> <span class="hljs-string">redis</span>
      <span class="hljs-attr">SPRING_REDIS_PORT:</span> <span class="hljs-number">6379</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">mysql-data:</span>
  <span class="hljs-attr">redis-data:</span>
</code></pre>
<h4 data-id="heading-25">9.3 å…³é”®é…ç½®</h4>
<h5 data-id="heading-26">application.yml</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-comment"># æ•°æ®æºé…ç½®</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span>
    <span class="hljs-attr">druid:</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/wallet_db?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">password:</span> <span class="hljs-string">root</span>
      <span class="hljs-comment"># è¿æ¥æ± é…ç½®</span>
      <span class="hljs-attr">initial-size:</span> <span class="hljs-number">5</span>
      <span class="hljs-attr">min-idle:</span> <span class="hljs-number">5</span>
      <span class="hljs-attr">max-active:</span> <span class="hljs-number">20</span>
      <span class="hljs-attr">max-wait:</span> <span class="hljs-number">60000</span>
      <span class="hljs-attr">test-while-idle:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">validation-query:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span>

  <span class="hljs-comment"># Redisé…ç½®</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
    <span class="hljs-attr">lettuce:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">8</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">8</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">0</span>
        <span class="hljs-attr">max-wait:</span> <span class="hljs-string">-1ms</span>

  <span class="hljs-comment"># äº‹åŠ¡é…ç½®</span>
  <span class="hljs-attr">transaction:</span>
    <span class="hljs-attr">rollback-on-commit-failure:</span> <span class="hljs-literal">true</span>

<span class="hljs-comment"># MyBatis Plusé…ç½®</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/*.xml</span>
  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.wallet.entity</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span>
</code></pre>
<h4 data-id="heading-27">9.4 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>








































<table><thead><tr><th align="center">ä¼˜åŒ–é¡¹</th><th align="left">å…·ä½“æªæ–½</th><th align="left">é¢„æœŸæ•ˆæœ</th></tr></thead><tbody><tr><td align="center"><strong>æ•°æ®åº“ç´¢å¼•</strong></td><td align="left">user_idã€transaction_noç­‰å­—æ®µå»ºç«‹ç´¢å¼•</td><td align="left">æŸ¥è¯¢é€Ÿåº¦æå‡10å€+</td></tr><tr><td align="center"><strong>è¿æ¥æ± ä¼˜åŒ–</strong></td><td align="left">åˆç†è®¾ç½®åˆå§‹å¤§å°ã€æœ€å¤§è¿æ¥æ•°</td><td align="left">é¿å…è¿æ¥åˆ›å»ºå¼€é”€</td></tr><tr><td align="center"><strong>Redisç¼“å­˜</strong></td><td align="left">çƒ­ç‚¹è´¦æˆ·ä¿¡æ¯ç¼“å­˜</td><td align="left">å‡å°‘DBæŸ¥è¯¢80%</td></tr><tr><td align="center"><strong>å¼‚æ­¥å¤„ç†</strong></td><td align="left">äº¤æ˜“æ—¥å¿—å¼‚æ­¥å†™å…¥</td><td align="left">å“åº”æ—¶é—´å‡å°‘50%</td></tr><tr><td align="center"><strong>SQLä¼˜åŒ–</strong></td><td align="left">ä½¿ç”¨æ‰¹é‡æ“ä½œã€é¿å…SELECT *</td><td align="left">å‡å°‘ç½‘ç»œä¼ è¾“</td></tr><tr><td align="center"><strong>JVMè°ƒä¼˜</strong></td><td align="left">åˆç†è®¾ç½®å †å†…å­˜ã€GCç­–ç•¥</td><td align="left">å‡å°‘STWæ—¶é—´</td></tr></tbody></table>
<h3 data-id="heading-28">åã€æ€»ç»“</h3>
<h4 data-id="heading-29">10.1 æ ¸å¿ƒè¦ç‚¹å›é¡¾</h4>
<pre><code class="hljs language-erlang" lang="erlang">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å†·çƒ­é’±åŒ…ç³»ç»Ÿæ ¸å¿ƒè¦ç‚¹æ€»ç»“                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ä¸€ã€è®¾è®¡æ€æƒ³                                                â”‚
â”‚  â”œâ”€ å†·çƒ­é’±åŒ…åˆ†ç¦»ï¼šå®‰å…¨æ€§ä¸æµåŠ¨æ€§å¹³è¡¡                          â”‚
â”‚  â”œâ”€ ç©ºé—´æ¢æ—¶é—´ï¼šç”¨æ¶æ„æ¢æ€§èƒ½                                  â”‚
â”‚  â””â”€ ç«äº‰å˜åä½œï¼šæŠŠä¸²è¡Œå˜å¹¶è¡Œ                                  â”‚
â”‚                                                             â”‚
â”‚  äºŒã€æ ¸å¿ƒæŠ€æœ¯                                                â”‚
â”‚  â”œâ”€ Redisåˆ†å¸ƒå¼é”ï¼šåº”ç”¨å±‚å¹¶å‘æ§åˆ¶                            â”‚
â”‚  â”œâ”€ æ•°æ®åº“ä¹è§‚é”ï¼šæ•°æ®å±‚æœ€ç»ˆä¿éšœ                              â”‚
â”‚  â”œâ”€ è‡ªåŠ¨è°ƒæ‹¨æœºåˆ¶ï¼šç”¨æˆ·ä½“éªŒä¼˜åŒ–                                â”‚
â”‚  â””â”€ äº‹åŠ¡ç®¡ç†ï¼šæ•°æ®ä¸€è‡´æ€§ä¿è¯                                 â”‚
â”‚                                                             â”‚
â”‚  ä¸‰ã€å®æ–½æ•ˆæœ                                                â”‚
â”‚  â”œâ”€ å¹¶å‘èƒ½åŠ›ï¼šæå‡<span class="hljs-number">10</span>å€ä»¥ä¸Š                                   â”‚
â”‚  â”œâ”€ å“åº”æ—¶é—´ï¼šé™ä½åˆ°<span class="hljs-number">100</span>msä»¥å†…                                â”‚
â”‚  â”œâ”€ ç³»ç»Ÿç¨³å®šæ€§ï¼š<span class="hljs-number">99.9</span><span class="hljs-comment">%å¯ç”¨æ€§                                  â”‚</span>
â”‚  â””â”€ ç”¨æˆ·ä½“éªŒï¼šäº¤æ˜“æˆåŠŸç‡æ¥è¿‘<span class="hljs-number">100</span><span class="hljs-comment">%                             â”‚</span>
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-30">10.2 é€‚ç”¨åœºæ™¯</h4>
<p>å†·çƒ­é’±åŒ…æ¶æ„é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>






























<table><thead><tr><th align="left">åœºæ™¯</th><th align="center">é€‚ç”¨æ€§</th><th align="left">åŸå› </th></tr></thead><tbody><tr><td align="left"><strong>ç”µå•†å¹³å°</strong></td><td align="center">â­â­â­â­â­</td><td align="left">é«˜å¹¶å‘ç§’æ€ã€è®¢å•æ”¯ä»˜</td></tr><tr><td align="left"><strong>åœ¨çº¿æ”¯ä»˜</strong></td><td align="center">â­â­â­â­â­</td><td align="left">å®æ—¶è½¬è´¦ã€é’±åŒ…ä½™é¢</td></tr><tr><td align="left"><strong>O2OæœåŠ¡</strong></td><td align="center">â­â­â­â­</td><td align="left">é¢„ä»˜æ¬¾ã€ä¼šå‘˜ä½™é¢</td></tr><tr><td align="left"><strong>å…±äº«ç»æµ</strong></td><td align="center">â­â­â­</td><td align="left">æŠ¼é‡‘ã€ä½™é¢ç®¡ç†</td></tr></tbody></table>
<h4 data-id="heading-31">10.3 å†™åœ¨æœ€å</h4>
<p>å†·çƒ­é’±åŒ…æ¶æ„æ˜¯æ”¯ä»˜ç³»ç»Ÿè®¾è®¡ä¸­çš„ç»å…¸æ–¹æ¡ˆï¼Œå®ƒå·§å¦™åœ°å¹³è¡¡äº†<strong>å®‰å…¨æ€§ã€æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ</strong>ä¸‰è€…ä¹‹é—´çš„å…³ç³»ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AppLovin å±æœºå‡çº§ï¼šSDK å®‰å…¨äº‰è®®æœªå¹³ï¼Œå»ºè®®ç§»é™¤ä¸ºå¦™]]></title>    <link>https://juejin.cn/post/7603283691457527818</link>    <guid>https://juejin.cn/post/7603283691457527818</guid>    <pubDate>2026-02-06T06:33:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603283691457527818" data-draft-id="7603347438012547107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AppLovin å±æœºå‡çº§ï¼šSDK å®‰å…¨äº‰è®®æœªå¹³ï¼Œå»ºè®®ç§»é™¤ä¸ºå¦™"/> <meta itemprop="keywords" content="APP,Apple,uni-app"/> <meta itemprop="datePublished" content="2026-02-06T06:33:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iOSç ”ç©¶é™¢"/> <meta itemprop="url" content="https://juejin.cn/user/1421041942671774"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AppLovin å±æœºå‡çº§ï¼šSDK å®‰å…¨äº‰è®®æœªå¹³ï¼Œå»ºè®®ç§»é™¤ä¸ºå¦™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1421041942671774/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iOSç ”ç©¶é™¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:33:45.000Z" title="Fri Feb 06 2026 06:33:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>ç»§ 1 æœˆåšç©ºæœºæ„ CapitalWatch æŒ‡æ§ AppLovin æ·±åº¦æ¶‰å…¥æ´—é’±ç½‘ç»œã€å…³è”ä¸œå—äºš â€œæ€çŒªç›˜â€ åï¼Œè¿™åœºèµ„æœ¬é£æ³¢çš„ä½™éœ‡ä»åœ¨æŒç»­ã€‚æœ€æ–°å¸‚åœºæ•°æ®æ˜¾ç¤ºï¼Œæˆªè‡³ 2026 å¹´ 2 æœˆ 5 æ—¥ï¼ŒAppLovinï¼ˆè‚¡ç¥¨ä»£ç ï¼šAPPï¼‰è‚¡ä»·å·²ä» 2025 å¹´ 11 æœˆ 10 æ—¥çš„ 651.32 ç¾å…ƒè·Œè‡³ 375.23 ç¾å…ƒï¼Œ<strong>ä¸‰ä¸ªæœˆç´¯è®¡è·Œå¹…è¾¾ 42.39%</strong> ï¼›ä»… 2 æœˆå‰ 5 ä¸ªäº¤æ˜“æ—¥ï¼Œè‚¡ä»·å°±ä» 483 ç¾å…ƒè·Œè‡³ 375.23 ç¾å…ƒï¼Œå•å‘¨è·Œå¹…è¶… 22%ï¼Œæ¢æ‰‹ç‡æœ€é«˜è¾¾ 6.65%ï¼Œå¸‚åœºææ…Œæƒ…ç»ªå¯è§ä¸€æ–‘ã€‚</p>
<h3 data-id="heading-1">äº‰è®®å†å‘é…µï¼šä»è‚¡ä¸œåˆè§„åˆ° SDK æŠ€æœ¯é£é™©</h3>
<p>æ­¤å‰ CapitalWatch çš„æŠ¥å‘Šå·²æŒ‡å‡ºï¼ŒAppLovin ä¸»è¦è‚¡ä¸œ Hao Tangã€Ling Tangï¼ˆè¢«æŒ‡ä¸º Hao Tang äº²å±ï¼‰åŠå…³è”æ–¹åˆè®¡æŒè‚¡è¶… 28%ï¼Œæ¶‰å«Œé€šè¿‡å¹¿å‘Šä¸šåŠ¡ååŠ©è½¬ç§»å›¢è´·ç½‘éæ³•é›†èµ„æ¬¾ã€ä¸œå—äºšè¯ˆéª—èµ„é‡‘ã€‚å°½ç®¡ AppLovin å…¨ç›˜å¦è®¤æŒ‡æ§ï¼Œç§° â€œæ— æ³•æ§åˆ¶ä¸ªäººè‚¡ç¥¨ä¹°å–â€ï¼Œä½†å¸‚åœºå¯¹å…¶<strong>è‚¡ä¸œå±‚é¢çš„åˆè§„å¤±èŒ</strong>è´¨ç–‘æœªæ¶ˆ â€”â€” ä½œä¸ºä¸Šå¸‚å…¬å¸ï¼Œå¯¹ä¸»è¦è‚¡ä¸œçš„èƒŒæ™¯å®¡æŸ¥ã€åæ´—é’±æµç¨‹æ˜¯å¦åˆ°ä½ï¼Œè‡³ä»Šä»æ˜¯æœªè§£ä¹‹è°œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8534212848f540dc82e963b5ac96cf13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964425&amp;x-signature=HiKXXc7USyyqiTXHWzlAf0HPWcg%3D" alt="" loading="lazy"/></p>
<p>æ›´å…³é”®çš„æ˜¯ï¼Œè¿™åœºäº‰è®®å·²ç›´æ¥æ³¢åŠæ™®é€šå¼€å‘è€…ã€‚æœ‰è¡Œä¸šåˆ†ææŒ‡å‡ºï¼ŒAppLovin çš„ SDK å­˜åœ¨ä¸¤å¤§æ ¸å¿ƒé£é™©ï¼šä¸€æ˜¯<strong>æŠ€æœ¯åˆè§„é—®é¢˜</strong>ï¼Œå…¶ SDK è¢«æ›åŒ…å«æŒ‡çº¹è¿½è¸ªã€é™é»˜å®‰è£…åŠŸèƒ½ï¼Œå‰è€…å¯èƒ½è¿åç”¨æˆ·éšç§ä¿æŠ¤æ³•è§„ï¼ˆå¦‚ GDPRã€CCPAï¼‰ï¼Œåè€…åˆ™å¯èƒ½ç»•è¿‡ç”¨æˆ·æˆæƒå¼ºåˆ¶å®‰è£…åº”ç”¨ï¼Œå­˜åœ¨è¢«åº”ç”¨å•†åº—ä¸‹æ¶çš„éšæ‚£ï¼›äºŒæ˜¯<strong>è¿å¸¦é£é™©</strong>ï¼Œè‹¥åç»­ç›‘ç®¡éƒ¨é—¨ï¼ˆå¦‚ç¾å›½å¸æ³•éƒ¨ã€SECï¼‰å¯¹ AppLovin å¯åŠ¨è°ƒæŸ¥ï¼Œæˆ–è¦æ±‚å¹³å°è‡ªæŸ¥æ¶‰äº‹ SDKï¼Œå¼€å‘è€…å¯èƒ½é¢ä¸´ â€œçŒä¸åŠé˜²çš„ä¸‹æ¶å‹åŠ›â€ï¼Œå½±å“åº”ç”¨æ­£å¸¸è¿è¥ã€‚</p>
<h3 data-id="heading-2">è‚¡ä»·æš´è·ŒèƒŒåï¼šå¤šé‡åˆ©ç©ºä¸‹çš„å¸‚åœºä¿¡å¿ƒå´©å¡Œ</h3>
<p>ä»è‚¡ä»·èµ°åŠ¿çœ‹ï¼ŒAppLovin çš„é¢“åŠ¿å¹¶éå¶ç„¶ã€‚é™¤äº†æ´—é’±ã€SDK åˆè§„äº‰è®®ï¼Œå…¶å•†ä¸šæ¨¡å¼æœ¬èº«ä¹Ÿå­˜åœ¨éšå¿§ã€‚æ­¤å‰å·²æœ‰åšç©ºæœºæ„æŒ‡å‡ºï¼ŒAppLovin çº¦ 35% çš„å¹¿å‘Šæ”¶å…¥æ¥è‡ªè¶…ä¼‘é—²æ¸¸æˆï¼Œè€Œè¿™ç±»ä¸šåŠ¡çš„<strong>è™šå‡ç‚¹å‡»å æ¯”æˆ–è¾¾ 20%</strong> ï¼›åŒæ—¶ï¼Œå…¬å¸ 60% çš„æµé‡ä¾èµ– Meta å’Œ Googleï¼Œè‹¥ä¸Šæ¸¸å¹³å°è°ƒæ•´æ”¿ç­–ï¼Œæ”¶å…¥å¯èƒ½é¢ä¸´æ–­å´–å¼ä¸‹è·Œã€‚</p>
<p>å åŠ æœ€æ–°çš„åˆè§„é£é™©ï¼Œæœºæ„å¯¹å…¶ä¼°å€¼çš„åˆ†æ­§æŒç»­æ‰©å¤§ã€‚æˆªè‡³ 2 æœˆï¼Œå°½ç®¡ä»æœ‰ 9 å®¶æœºæ„ç»™å‡º â€œå¼ºåŠ›æ¨èâ€ è¯„çº§ï¼Œä½†æœ€ä½ç›®æ ‡ä»·ä»… 80 ç¾å…ƒï¼Œè¾ƒå½“å‰è‚¡ä»·éšå« 75.8% çš„è·Œå¹…ã€‚ç©ºå¤´ä»“ä½ä¹Ÿåœ¨æ¿€å¢ï¼Œ1 æœˆ 3 æ—¥å•æ—¥åšç©ºé‡å æ¯”è¾¾ 21.36%ï¼Œç´¯è®¡ç©ºå¤´ä»“ä½è¶…æµé€šè‚¡ 15%ï¼Œé€¼è¿‘ç†”æ–­é˜ˆå€¼ï¼Œå¸‚åœºå¯¹å…¶ä¿¡å¿ƒå·²é™è‡³å†°ç‚¹ã€‚</p>
<h3 data-id="heading-3">å¼€å‘è€…åº”å¯¹æŒ‡å—ï¼šè§„é¿é£é™©åˆ»ä¸å®¹ç¼“</h3>
<p>é¢å¯¹ AppLovin çš„å¤šé‡å±æœºï¼Œå¼€å‘è€…éœ€ä¼˜å…ˆè€ƒè™‘ä¸šåŠ¡ç¨³å®šæ€§ï¼Œé¿å…è¸©å…¥åˆè§„ â€œé›·åŒºâ€ï¼š</p>
<ul>
<li><strong>è¯„ä¼°æ›¿æ¢æ–¹æ¡ˆ</strong>ï¼šè‹¥å½“å‰åº”ç”¨é›†æˆäº† AppLovin SDKï¼Œå»ºè®®å°½å¿«è°ƒç ”å¹¿å‘Šèšåˆå¹³å°ï¼Œé€šè¿‡æ¥å…¥å¤šæ¸ é“å¹¿å‘Šæºï¼Œé™ä½å¯¹å•ä¸€ SDK çš„ä¾èµ–ï¼Œé¿å…å›  SDK ä¸‹æ¶å¯¼è‡´æ”¶å…¥æ–­å±‚ï¼›</li>
<li><strong>è‡ªæŸ¥åˆè§„ç»†èŠ‚</strong>ï¼šé‡ç‚¹æ£€æŸ¥ AppLovin SDK çš„æŒ‡çº¹è¿½è¸ªã€é™é»˜å®‰è£…åŠŸèƒ½æ˜¯å¦å…³é—­ï¼Œç¡®ä¿ç”¨æˆ·æ•°æ®æ”¶é›†ã€åº”ç”¨å®‰è£…æµç¨‹ç¬¦åˆå½“åœ°éšç§æ³•è§„ï¼ˆå¦‚ GDPR çš„ç”¨æˆ·åŒæ„è¦æ±‚ï¼‰ï¼›</li>
<li><strong>è·Ÿè¸ªç›‘ç®¡åŠ¨æ€</strong>ï¼šå¯†åˆ‡å…³æ³¨ç¾å›½å¸æ³•éƒ¨ã€SEC åŠåº”ç”¨å•†åº—ï¼ˆå¦‚è‹¹æœ App Storeã€Google Playï¼‰çš„æœ€æ–°æ”¿ç­–ï¼Œè‹¥å‡ºç°é’ˆå¯¹ AppLovin çš„è°ƒæŸ¥æˆ–ä¸‹æ¶é€šçŸ¥ï¼Œéœ€ç¬¬ä¸€æ—¶é—´å¯åŠ¨åº”æ€¥æ–¹æ¡ˆã€‚</li>
</ul>
<p>AppLovin çš„æ¡ˆä¾‹ä¹Ÿä¸ºæ•´ä¸ªè¡Œä¸šæ•²å“è­¦é’Ÿï¼šåœ¨é€‰æ‹©ç¬¬ä¸‰æ–¹ SDK æ—¶ï¼Œé™¤äº†å…³æ³¨æµé‡ã€æ”¶ç›Šï¼Œæ›´éœ€ç©¿é€å¼å®¡æŸ¥åˆè§„æƒ…å†µã€‚</p>
<p>æ¯•ç«Ÿï¼Œ<strong>ä¸€æ¬¡åˆè§„å±æœºå¸¦æ¥çš„æŸå¤±ï¼Œå¯èƒ½è¿œè¶…è¿‡å»çš„æ”¶ç›Š</strong>ã€‚</p>
<p><code>éµå®ˆè§„åˆ™ï¼Œæ–¹å¾—é•¿æ²»ä¹…å®‰</code>ï¼Œæœ€åç¥å¤§å®¶å¤§å‰å¤§åˆ©ï¼Œä»Šæ™šè¿‡å®¡ï¼</p>
<h3 data-id="heading-4">ç›¸å…³æ¨è</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FURmC_4vxQv5ttOg8yYe7Eg" target="_blank" title="https://mp.weixin.qq.com/s/URmC_4vxQv5ttOg8yYe7Eg" ref="nofollow noopener noreferrer"># è‹¹æœå¼€å‘è€…ç»­è´¹å¤§å‘åŠæˆåŠŸç»­è´¹æ–¹æ¡ˆï¼äº²æµ‹æœ‰æ•ˆ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F1bAA90Tzpx03tTHZbdg3aw" target="_blank" title="https://mp.weixin.qq.com/s/1bAA90Tzpx03tTHZbdg3aw" ref="nofollow noopener noreferrer"># AppStoreæ•æ„Ÿè¯æ’æŸ¥æ‰‹å†Œï¼Œå¤šç»´åº¦åˆ†æGuideline 2.3.1éšè—åŠŸèƒ½ï¼Œè½»æ¾è¿‡å®¡ã€‚</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FV2F4BaEYh5HfeUUHm1tI6Q" target="_blank" title="https://mp.weixin.qq.com/s/V2F4BaEYh5HfeUUHm1tI6Q" ref="nofollow noopener noreferrer"># å¦‚ä½•ä¸»åŠ¨æé˜²è‹¹æœ3.2fçš„è¿›æ”»ï¼Œè‡ªæŸ¥é˜²å¾¡æ‰‹å†Œï¼ˆä»£ç ç¯‡ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FLs3su8fmMckTocPwMmFaNQ" target="_blank" title="https://mp.weixin.qq.com/s/Ls3su8fmMckTocPwMmFaNQ" ref="nofollow noopener noreferrer"># å¦‚ä½•ä¸»åŠ¨æé˜²è‹¹æœ3.2fçš„è¿›æ”»ï¼Œè‡ªæŸ¥é˜²å¾¡æ‰‹å†Œï¼ˆASOç¯‡ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484371%26idx%3D1%26sn%3D33568c58e90a5bf4d2612d803ecb2a27%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484371&amp;idx=1&amp;sn=33568c58e90a5bf4d2612d803ecb2a27&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># è‹¹æœåŠ æ€¥å®¡æ ¸æ˜¯â€œç»¿è‰²é€šé“â€è¿˜æ˜¯â€œæ­»äº¡é™·é˜±â€ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484362%26idx%3D1%26sn%3Dea61bd42d5ae8b99d2a56cbfb8d91e88%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484362&amp;idx=1&amp;sn=ea61bd42d5ae8b99d2a56cbfb8d91e88&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># è‹¹æœå¼€å‘è€…é‚®ç®±ï¼Œçªç„¶æ”¶åˆ°11.2é€šçŸ¥ä¸¥é‡ä¹ˆï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484413%26idx%3D1%26sn%3D82870d4c8892fa65803a8e05fd5ac938%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484413&amp;idx=1&amp;sn=82870d4c8892fa65803a8e05fd5ac938&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># ä¸æƒ³è¢«è‹¹æœå¡å®¡æœ€å¥½é”™å¼€è¿™ä¸¤ä¸ªæå®¡æ—¶é—´</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484349%26idx%3D1%26sn%3D1c75a6b08cb5de64ddf41a88b61ff108%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484349&amp;idx=1&amp;sn=1c75a6b08cb5de64ddf41a88b61ff108&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># æ‰‹æ’•è‹¹æœå®¡æ ¸4.3æ˜¯ä»£ç é—®é¢˜è¿˜æ˜¯è®¾è®¡é—®é¢˜ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484344%26idx%3D1%26sn%3D4399eb8d8bf82e9c5df26a18b8564cfb%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484344&amp;idx=1&amp;sn=4399eb8d8bf82e9c5df26a18b8564cfb&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># æœ‰å¹¸å’ŒAppstoreå®¡æ ¸äººå‘˜è¿›è¡Œäº†ä¸€åœºè§†é¢‘ä¼šè®®ç‰¹æ­¤è®°å½•ã€‚</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIå–å¹¿å‘Šï¼Œåµåˆ°äº†è¶…çº§ç¢—ï¼šå…¨çƒç½‘å‹å›´è§‚å¥¥ç‰¹æ›¼ç ´é˜²]]></title>    <link>https://juejin.cn/post/7603347438012629027</link>    <guid>https://juejin.cn/post/7603347438012629027</guid>    <pubDate>2026-02-06T06:35:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603347438012629027" data-draft-id="7603347438012612643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIå–å¹¿å‘Šï¼Œåµåˆ°äº†è¶…çº§ç¢—ï¼šå…¨çƒç½‘å‹å›´è§‚å¥¥ç‰¹æ›¼ç ´é˜²"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2026-02-06T06:35:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIå–å¹¿å‘Šï¼Œåµåˆ°äº†è¶…çº§ç¢—ï¼šå…¨çƒç½‘å‹å›´è§‚å¥¥ç‰¹æ›¼ç ´é˜²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:35:39.000Z" title="Fri Feb 06 2026 06:35:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é«˜ç«¯å•†æˆ˜ï¼Œå¾€å¾€å°±æ˜¯è¿™ä¹ˆæœ´å®æ— åã€‚</p>
<p>OpenAIÂ ä¸Šä¸ªæœˆæ‰å®£å¸ƒè¦åœ¨Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2651012368%26idx%3D1%26sn%3D44c0709a46446f8b67df438d68c17815%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2651012368&amp;idx=1&amp;sn=44c0709a46446f8b67df438d68c17815&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ChatGPT é‡ŒåŠ å¹¿å‘Š</a>ï¼ŒAnthropic å°±æŒ‘äº†ä¸ªè¶…çº§ç¢—çš„æ—¶é—´èŠ‚ç‚¹ï¼Œæ’­å‡ºå˜²è®½ ChatGPT çš„å¹¿å‘Šã€‚</p>
<p>ã€Œæ„æœ‰æ‰€æŒ‡ã€çš„è¶…çº§ç¢—å¹¿å‘Š</p>
<p>åœ¨è¿™æ”¯é¢‡å…·è®½åˆºæ„å‘³çš„å¹¿å‘Šä¸­ï¼Œä¸€ä¸ªç”·å­åœ¨å¥èº«æ•™ç»ƒæ—è¾¹è‰°éš¾åœ°åšå¼•ä½“å‘ä¸Šã€‚</p>
<p>è¿™ä½å¥èº«æ•™ç»ƒæ˜¯ AI åŠ©æ‰‹çš„åŒ–èº«ï¼Œå½“ç”·å­å‘ä»–è¯·æ•™åˆ¶å®šå¥èº«è®¡åˆ’æ—¶ï¼Œã€ŒåŠ©æ‰‹ã€å´çªç„¶æ’å…¥äº†ä¸€æ¡ä¿å¥å“å¹¿å‘Šï¼Œè®©ç”·å­ä¸€è„¸æ‡µé€¼ã€‚</p>
<p>æœ€ç»çš„æ˜¯ï¼Œå¹¿å‘Šæœ«å°¾æ¥äº†è¿™ä¹ˆä¸€å¥è¯ï¼šAds are coming to Al. But not to Claude.ï¼ˆAI æ­£åœ¨è¿æ¥å¹¿å‘Šï¼Œä½† Claude ä¸ä¼šã€‚ï¼‰</p>
<p>å­—å­—ä¸æ ChatGPTï¼Œä½†å­—å­—éƒ½æŒ‡å‘ ChatGPTï¼Œä½ å°±è¯´å¦™ä¸å¦™å§ã€‚</p>
<p>éš¾æ€ªæœ‰ç½‘å‹æƒ³å»è§è§ Claude çš„å…¬å…³å›¢é˜Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24fe3e6e1ec8440a93eb325e66c866f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=LePZEwIT2d0JxjOEjGF9SlTglhU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é…åˆè¿™åˆ™å¹¿å‘Šï¼ŒAnthropic åœ¨å‘¨ä¸‰å‘å¸ƒåšå®¢æ­£å¼å®£å¸ƒï¼šClaude å°†æ°¸ä¹…ä¿æŒæ— å¹¿å‘ŠçŠ¶æ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b56c7e61c3cf4707a4c5f057fdb49406~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=FOjJCf2VS04etBjfRYgrBGLLmO8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ã€Œæœ‰å¾ˆå¤šé€‚åˆåšå¹¿å‘Šçš„å¥½åœ°æ–¹ï¼Œä½†è·Ÿ Claude èŠå¤©çš„åœ°å„¿ï¼ŒçœŸçš„ä¸åˆé€‚å¡å¹¿å‘Šã€‚ã€AnthropicÂ è®¤ä¸ºï¼Œåœ¨ AI å¯¹è¯ä¸­æ¤å…¥å¹¿å‘Šä¸ Claudeã€Œä¸€ä¸ªçœŸæ­£æœ‰åŠ©äºå·¥ä½œå’Œæ·±åº¦æ€è€ƒåŠ©æ‰‹ã€çš„å®šä½ä¸å…¼å®¹ã€‚</p>
<p>è¿™ä¸€ç«‹åœºè¢«å¾ˆå¤šäººè§£è¯»ä¸ºå¯¹ç€ OpenAI ã€Œè´´è„¸å¼€å¤§ã€ã€‚</p>
<p>å› ä¸ºä¸Šä¸ªæœˆ OpenAI å®£å¸ƒå¼€å§‹åœ¨å…è´¹ç”¨æˆ·å’Œ ChatGPT Go è®¢é˜…ç”¨æˆ·ä¸­æµ‹è¯•æ¨ªå¹…å¹¿å‘Šï¼Œè¿™äº›å¹¿å‘Šä¼šå‡ºç°åœ¨å›å¤åº•éƒ¨ï¼Œä½†ä¸ä¼šå½±å“èŠå¤©æœºå™¨äººçš„å®é™…ç­”æ¡ˆã€‚è€Œä»˜è´¹è®¢é˜… Plusã€Proã€Business å’Œ Enterprise å¥—é¤çš„ç”¨æˆ·åˆ™ä¸ä¼šçœ‹åˆ°å¹¿å‘Šã€‚</p>
<p>Anthropic åœ¨åšæ–‡ä¸­å¼ºè°ƒï¼šã€Œæˆ‘ä»¬å¸Œæœ› Claude æ˜ç¡®æ— è¯¯åœ°ä¸ºç”¨æˆ·åˆ©ç›Šè¡Œäº‹ï¼Œæ‰€ä»¥æˆ‘ä»¬åšå‡ºäº†é€‰æ‹©ï¼šClaude å°†ä¿æŒæ— å¹¿å‘ŠçŠ¶æ€ã€‚æˆ‘ä»¬çš„ç”¨æˆ·ä¸ä¼šåœ¨ä¸ Claude çš„å¯¹è¯æ—è¾¹çœ‹åˆ°èµåŠ©é“¾æ¥ï¼ŒClaude çš„å›å¤ä¹Ÿä¸ä¼šå—åˆ°å¹¿å‘Šå•†çš„å½±å“ï¼Œæˆ–åŒ…å«ç”¨æˆ·æ²¡æœ‰è¦æ±‚çš„ç¬¬ä¸‰æ–¹äº§å“æ¤å…¥ã€‚ã€</p>
<p>å…¬å¸è¿›ä¸€æ­¥è§£é‡Šäº†è¿™ä¸€å†³å®šèƒŒåçš„è€ƒé‡ã€‚</p>
<p>å†…éƒ¨åˆ†ææ˜¾ç¤ºï¼Œè®¸å¤š Claude å¯¹è¯æ¶‰åŠã€Œæ•æ„Ÿæˆ–æ·±åº¦ç§äººã€çš„è¯é¢˜ï¼Œæˆ–éœ€è¦æŒç»­ä¸“æ³¨äºå¤æ‚ä»»åŠ¡ã€‚åœ¨è¿™äº›åœºæ™¯ä¸‹ï¼Œå¹¿å‘Šçš„å‡ºç°ä¼šæ˜¾å¾—ã€Œä¸åè°ƒã€ç”šè‡³åœ¨å¾ˆå¤šæƒ…å†µä¸‹æ˜¯ä¸æ°å½“çš„ã€ã€‚</p>
<p>Anthropic è¿˜æŒ‡å‡ºï¼Œå¹¿å‘Šä¼šå¼•å…¥å¯èƒ½ä¸æä¾›çœŸæ­£æœ‰ç”¨å»ºè®®ç›¸å†²çªçš„æ¿€åŠ±æœºåˆ¶ã€‚</p>
<p>ä»–ä»¬ä¸¾äº†ä¸ªä¾‹å­ï¼šå½“ç”¨æˆ·æåˆ°ç¡çœ é—®é¢˜æ—¶ï¼Œæ— å¹¿å‘ŠåŠ©æ‰‹ä¼šæ¢ç´¢å„ç§å¯èƒ½çš„åŸå› ï¼Œè€Œæœ‰å¹¿å‘Šæ”¯æŒçš„åŠ©æ‰‹å¯èƒ½ä¼šå°†å¯¹è¯å¼•å‘æŸä¸ªäº¤æ˜“ã€‚</p>
<p>ã€Œç”¨æˆ·ä¸åº”è¯¥éœ€è¦å»çŒœæµ‹ AI æ˜¯çœŸæ­£åœ¨å¸®åŠ©ä»–ä»¬ï¼Œè¿˜æ˜¯åœ¨å·§å¦™åœ°å°†å¯¹è¯å¼•å‘å¯ä»¥å˜ç°çš„æ–¹å‘ã€‚ã€</p>
<p>ä¸è¿‡ï¼ŒAnthropic å¹¶éå®Œå…¨æ‹’ç»å•†ä¸šåŒ–ã€‚</p>
<p>ä»–ä»¬è¡¨ç¤º AI å°†è¶Šæ¥è¶Šå¤šåœ°ä¸å•†ä¸šäº’åŠ¨ï¼Œå…¬å¸æœŸå¾…ä»¥å¸®åŠ©ç”¨æˆ·çš„æ–¹å¼æ”¯æŒè¿™ä¸€ç‚¹ã€‚ä»–ä»¬ç‰¹åˆ«çœ‹å¥½ã€Œä»£ç†å¼å•†åŠ¡ã€ï¼Œå³ Claude ä»£è¡¨ç”¨æˆ·å…¨ç¨‹ä»£ç†å®Œæˆè´­ä¹°æˆ–é¢„è®¢ç­‰æ“ä½œã€‚</p>
<p>å…¬å¸è¿˜åœ¨æ¢ç´¢æ›´å¤šæ–¹å¼è®© Claude æˆä¸ºæé«˜ç”Ÿäº§åŠ›çš„ä¸“æ³¨ç©ºé—´ï¼Œç”¨æˆ·å·²ç»å¯ä»¥è¿æ¥ Figmaã€Asanaã€Canva ç­‰ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œå¹¶ç›´æ¥åœ¨ Claude ä¸­ä¸å®ƒä»¬äº¤äº’ã€‚æ‰€æœ‰ç¬¬ä¸‰æ–¹äº¤äº’éƒ½å°†éµå¾ªåŒä¸€ä¸ªæ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼šç”±ç”¨æˆ·å‘èµ·ï¼Œè€Œéç”±å¹¿å‘Šå•†å‘èµ·ã€‚</p>
<p>å¥¥ç‰¹æ›¼çš„åå‡»ã€Œå°ä½œæ–‡ã€</p>
<p>å¯¹æ­¤ï¼ŒOpenAI CEO è¨å§†ãƒ»å¥¥ç‰¹æ›¼è¿…é€Ÿå‘å¸ƒä¸€ç¯‡åå‡»å°ä½œæ–‡ã€‚</p>
<p>ä»–å¼€ç¯‡å…ˆæ‰¿è®¤ï¼šã€Œé¦–å…ˆè¯´å¥½çš„ä¸€é¢ï¼šAnthropic çš„å¹¿å‘Šç¡®å®å¾ˆæœ‰è¶£ï¼Œæˆ‘ç¬‘äº†ã€‚ã€ä½†ç´§æ¥ç€è¯é”‹ä¸€è½¬ï¼Œç›´æ¥è´¨ç–‘ Anthropic ä¸ºä½•è¦é‡‡ç”¨ã€Œå¦‚æ­¤æ˜æ˜¾ä¸è¯šå®ã€çš„æ‰‹æ³•ã€‚</p>
<p>å¥¥ç‰¹æ›¼å¼ºè°ƒï¼ŒOpenAI å…³äºå¹¿å‘Šçš„æœ€é‡è¦åŸåˆ™å°±æ˜¯ä¸ä¼šåƒ Anthropic æ‰€æç»˜çš„é‚£æ ·åšã€‚ã€Œæˆ‘ä»¬ä¸å‚»ï¼Œæˆ‘ä»¬çŸ¥é“ç”¨æˆ·ä¼šæ‹’ç»é‚£æ ·çš„åšæ³•ã€‚ã€</p>
<p>ä»–è¡¨ç¤ºï¼ŒAnthropic ä¸€è´¯çš„åŒé‡æ ‡å‡†å€’æ˜¯æŒºç¬¦åˆå“ç‰Œå½¢è±¡çš„ï¼Œã€Œç”¨æ¬ºéª—æ€§å¹¿å‘Šæ¥æ‰¹è¯„å®é™…ä¸Šå¹¶ä¸å­˜åœ¨çš„ç†è®ºä¸Šçš„æ¬ºéª—æ€§å¹¿å‘Šï¼Œä½†æˆ‘æ²¡æƒ³åˆ°ä»–ä»¬ä¼šæŠŠè¿™æ‹›ç”¨åœ¨è¶…çº§ç¢—å¹¿å‘Šä¸Šã€‚ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c984618029c44aaba576b83b5220583~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=I1ln2QZq7iNtL0hYP8208RcU56s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¥¥ç‰¹æ›¼è¿˜å°†è¿™åœºäº‰è®ºä¸Šå‡åˆ°äº† AI æ™®æƒ çš„é«˜åº¦ã€‚</p>
<p>ã€Œæˆ‘ä»¬ç›¸ä¿¡æ¯ä¸ªäººéƒ½åº”è¯¥ä½¿ç”¨ AIï¼Œå¹¶è‡´åŠ›äºæä¾›å…è´¹è®¿é—®ï¼Œå› ä¸ºæˆ‘ä»¬ç›¸ä¿¡è®¿é—®æƒåˆ›é€ äº†èƒ½åŠ¨æ€§ã€‚ã€ä»–æŠ«éœ²äº†ä¸€ä¸ªæ•°æ®ï¼šä»…åœ¨å¾·å…‹è¨æ–¯å·å…è´¹ä½¿ç”¨ ChatGPT çš„äººæ•°å°±è¶…è¿‡äº†å…¨ç¾ä½¿ç”¨ Claude çš„æ€»äººæ•°ï¼Œå› æ­¤Â OpenAI é¢ä¸´ç€ä¸ Anthropicã€Œä¸åŒçš„é—®é¢˜ã€ã€‚ä»–è¡¥å……é“ï¼Œå¯¹äºä»˜è´¹è®¢é˜… Plus æˆ– Pro çš„ç”¨æˆ·ï¼ŒOpenAI ä¸ä¼šæ˜¾ç¤ºå¹¿å‘Šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a9c16fa790540a5aabcbcc5d2f6a591~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=H7KrFeUpavCJ8ZH%2FIKi4zJjmzfE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>éšåï¼Œå¥¥ç‰¹æ›¼çš„æ‰¹è¯„å˜å¾—æ›´åŠ å°–é”ã€‚ä»–æŒ‡è´£ Anthropicã€ŒæœåŠ¡äºå¯Œäººçš„æ˜‚è´µäº§å“ã€ï¼Œå¹¶ä¸”ã€Œæƒ³è¦æ§åˆ¶äººä»¬å¦‚ä½•ä½¿ç”¨ AIã€ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼ŒAnthropic å±è”½ä¸å–œæ¬¢çš„å…¬å¸ä½¿ç”¨å…¶ç¼–ç äº§å“ï¼ˆåŒ…æ‹¬ OpenAIï¼‰ï¼Œæƒ³è¦è‡ªå·±åˆ¶å®š AI ä½¿ç”¨è§„åˆ™ï¼Œç°åœ¨è¿˜æƒ³å‘Šè¯‰å…¶ä»–å…¬å¸è¯¥é‡‡ç”¨ä»€ä¹ˆå•†ä¸šæ¨¡å¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/116f7ceba7a34d65806c1ae04f1720b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=zh17SE1%2BXd7u71SynVDosR9fUE8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ã€Œæˆ‘ä»¬è‡´åŠ›äºå¹¿æ³›çš„æ°‘ä¸»å†³ç­–å’Œè®¿é—®æƒã€‚æˆ‘ä»¬ä¹Ÿè‡´åŠ›äºä¸ºå…ˆè¿› AI æ„å»ºæœ€å…·éŸ§æ€§çš„ç”Ÿæ€ç³»ç»Ÿï¼Œã€å¥¥ç‰¹æ›¼å†™é“ï¼Œã€Œæˆ‘ä»¬éå¸¸å…³å¿ƒå®‰å…¨ã€å¹¿æ³›æœ‰ç›Šçš„ AGIï¼Œæˆ‘ä»¬çŸ¥é“å®ç°è¿™ä¸€ç›®æ ‡çš„å”¯ä¸€é€”å¾„æ˜¯ä¸ä¸–ç•Œåˆä½œåšå¥½å‡†å¤‡ã€‚ã€</p>
<p>ä»–å£°ç§°ï¼šã€Œä¸€å®¶ç‹¬è£å…¬å¸æ— æ³•å•ç‹¬å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæ›´ä¸ç”¨è¯´å…¶ä»–æ˜æ˜¾çš„é£é™©äº†ã€‚è¿™æ˜¯ä¸€æ¡é»‘æš—çš„é“è·¯ã€‚ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9bef1111e51478b8dffa3c01280f357~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=oDby10wqiW9yXDMDGkP9xwkvcjA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç½‘å‹è¯„è®ºï¼šä¸€åœºå„æ‰§ä¸€è¯çš„å¤§è¾©è®º</p>
<p>è¿™ä¸ªäº‹åœ¨ç¤¾äº¤åª’ä½“ä¸Šä¹Ÿå¼•å‘äº†æ¿€çƒˆè®¨è®ºã€‚</p>
<p>çŸ¥ååšä¸» Yuchen Jin è®¤ä¸ºï¼šã€ŒAI å¹¿å‘Šè¿™äº‹æœ¬èº«å°±å¾ˆè®½åˆºã€‚Anthropic ä¸éœ€è¦å¹¿å‘Šï¼Œå®ƒä¸“æ³¨äºç¼–ç å’Œ B2B ä¸šåŠ¡ï¼›è°·æ­Œé å¹¿å‘Šä¸ºç”Ÿï¼Œä¹Ÿä¸éœ€è¦ LLM å¹¿å‘Šæ¥è·å¾—çŸ­æœŸæ”¶å…¥ï¼›å˜²ç¬‘ OpenAI çš„å¹¿å‘Šåè€Œæˆäº†ä»–ä»¬æœ€å¥½çš„å¹¿å‘Šã€‚ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5acea6dfecdc4e37a00a5a9225b9d915~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=0y9MUF8%2B%2BWJH9HL4NN2p755kATg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>X å¹³å°åšä¸» @scaling01 åˆ™ç«™åœ¨äº† Anthropic ä¸€è¾¹ï¼Œå¯¹å¥¥ç‰¹æ›¼çš„æ‰¿è¯ºè¡¨ç¤ºå¼ºçƒˆè´¨ç–‘ã€‚</p>
<p>ä»–è½¬å‘å¥¥ç‰¹æ›¼çš„æ–‡ç« å¹¶è¯„è®ºé“ï¼šã€ŒOpenAI åˆåœ¨åšå®ƒæœ€æ“…é•¿çš„äº‹äº†ï¼Œå¯¹ä»–ä»¬çš„ã€å¹¿å‘ŠåŸåˆ™ã€åšå‡ºç©ºæ´çš„æ‰¿è¯ºã€‚åªè¦æŠ•èµ„è€…ç¨å¾®æ¨ä¸€æŠŠï¼Œä½ ä»¬å°±ä¼šåƒçº¸ç‰Œå±‹ä¸€æ ·ä¸å ªä¸€å‡»ã€‚OpenAI å·²ç»ä¸€æ¬¡åˆä¸€æ¬¡åœ°è¯æ˜äº†è¿™ä¸€ç‚¹ï¼Œä½ ä»¬æ¯æ¬¡éƒ½é€‰æ‹©åˆ©æ¶¦ï¼Œå‰Šå¼±éè¥åˆ©æ€§ã€‚ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a1c164efadf493ea58a8a6256f18ae8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=f%2BmRAOkUi4AlwXg0BtjiLpe73Fs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸è¿‡ä¹Ÿæœ‰äººå¯¹ Anthropic çš„åŠ¨æœºæå‡ºäº†è´¨ç–‘ã€‚</p>
<p>é£æŠ•æœºæ„ Wing_VC çš„åˆä¼™äºº Tanay Jaipuria è®¤ä¸ºï¼ŒAnthropic å£°ç§° Claude å°†ä¿æŒæ— å¹¿å‘ŠçŠ¶æ€ï¼Œæ˜¯åœ¨äº‰å–æœ¬ãƒ»æ±¤æ™®æ£®æ‰€è¯´çš„ã€Œæˆ˜ç•¥ä¿¡ç”¨ã€ã€‚</p>
<p>ã€Œç°å®æ˜¯ï¼Œç›¸å¯¹äº ChatGPTï¼ŒClaude çš„å…è´¹ç”¨æˆ·åŸºæ•°éå¸¸å°ï¼Œè€Œä¸”ä¸ä»–ä»¬çš„ä¼ä¸šæˆ˜ç•¥æ— å…³ï¼Œæ‰€ä»¥åœ¨å…¶ä¸­æŠ•æ”¾å¹¿å‘Šå¯¹ä»–ä»¬æ¥è¯´æœ¬å°±æ¯«æ— æ„ä¹‰ã€‚ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5ae822695404e818dbef061a4b12f99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=eMTsfGAFhBkWYuguKSbQtORkRiQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™åœºã€Œè®ºæˆ˜ã€èƒŒåï¼Œæ˜¯ä¸¤å®¶å…¬å¸æˆªç„¶ä¸åŒçš„å‘å±•å›°å¢ƒå’Œå•†ä¸šé€‰æ‹©ã€‚</p>
<p>OpenAI è¿™è¾¹ï¼Œåœ¨ 2025 å¹´ç­¾è®¢äº†ä»·å€¼è¶…è¿‡ 1.4 ä¸‡äº¿ç¾å…ƒçš„åŸºç¡€è®¾æ–½äº¤æ˜“ã€‚æ ¹æ®ã€Šåå°”è¡—æ—¥æŠ¥ã€‹è·å¾—çš„æ–‡ä»¶æ˜¾ç¤ºï¼ŒOpenAIÂ é¢„è®¡ä»Šå¹´å°†çƒ§æ‰å¤§çº¦90äº¿ç¾å…ƒï¼ŒåŒæ—¶äº§ç”Ÿ130äº¿ç¾å…ƒçš„æ”¶å…¥ã€‚ChatGPT çš„ 8 äº¿å‘¨æ´»è·ƒç”¨æˆ·ä¸­ï¼Œåªæœ‰å¤§çº¦ 5% ä¼šä»˜è´¹è®¢é˜…ã€‚</p>
<p>å·¨å¤§çš„è´¢åŠ¡å‹åŠ›è®©å¥¥ç‰¹æ›¼æ”¹å˜äº†æ­¤å‰çš„ç«‹åœºã€‚ä»–åœ¨ 2024 å¹´å“ˆä½›å¤§å­¦çš„ä¸€æ¬¡é‡‡è®¿ä¸­æ›¾è¡¨ç¤ºï¼Œå¹¿å‘Šä¸ AI å¯¹è¯çš„ç»“åˆã€Œå¼‚å¸¸ä»¤äººä¸å®‰ã€ï¼Œä»–ä¸æƒ³ã€Œå¼„æ¸…æ¥šåˆ°åº•æ˜¯è°åœ¨ä»˜è´¹å½±å“æˆ‘çœ‹åˆ°çš„å†…å®¹ã€ã€‚</p>
<p>å¦ä¸€è¾¹çš„ Anthropicï¼ŒåŒæ ·å°šæœªç›ˆåˆ©ï¼Œä½†é¢„è®¡ä¼šæ¯” OpenAI æ›´å¿«å®ç°ç›ˆåˆ©ã€‚AnthropicÂ æ²¡æœ‰è¯•å›¾é€šè¿‡å¤§è§„æ¨¡å»ºè®¾æ•°æ®ä¸­å¿ƒæ¥è¦†ç›–å…¨çƒï¼Œå…¶å•†ä¸šæ¨¡å¼ä¸»è¦ä¾èµ–ä¼ä¸šåˆåŒå’Œä»˜è´¹è®¢é˜…ã€‚æ® Axios æŠ¥é“ï¼ŒClaude Code å’Œ Cowork å·²ç»å¸¦æ¥äº†è‡³å°‘ 10 äº¿ç¾å…ƒçš„æ”¶å…¥ã€‚</p>
<p>ç§ä»¥ä¸ºï¼Œè¿™åœºå£æ°´ä»—æ²¡æœ‰ç»å¯¹çš„å¯¹é”™ï¼ŒOpenAI å’Œ Anthropic éƒ½åœ¨ç”¨è‡ªå·±çš„æ–¹å¼å›ç­”ä¸€ä¸ªé—®é¢˜ï¼šAI å…¬å¸åˆ°åº•è¯¥æ€ä¹ˆæ´»ä¸‹å»ï¼Œå¹¶ä¸”æ´»å¾—ä½“é¢ï¼Ÿ</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farstechnica.com%2Fai%2F2026%2F02%2Fshould-ai-chatbots-have-ads-anthropic-says-no%2F" target="_blank" title="https://arstechnica.com/ai/2026/02/should-ai-chatbots-have-ads-anthropic-says-no/" ref="nofollow noopener noreferrer">arstechnica.com/ai/2026/02/â€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fnews%2Fclaude-is-a-space-to-think" target="_blank" title="https://www.anthropic.com/news/claude-is-a-space-to-think" ref="nofollow noopener noreferrer">www.anthropic.com/news/claudeâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fsama%2Fstatus%2F2019139174339928189" target="_blank" title="https://x.com/sama/status/2019139174339928189" ref="nofollow noopener noreferrer">x.com/sama/statusâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>