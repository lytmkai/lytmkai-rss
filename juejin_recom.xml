<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[æ­ç§˜ç«çˆ†çš„ClawdBotï¼ˆMoltbot/OpenClawï¼‰]]></title>    <link>https://juejin.cn/post/7601159804490858515</link>    <guid>https://juejin.cn/post/7601159804490858515</guid>    <pubDate>2026-02-01T08:13:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601159804490858515" data-draft-id="7601075423003672612" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­ç§˜ç«çˆ†çš„ClawdBotï¼ˆMoltbot/OpenClawï¼‰"/> <meta itemprop="keywords" content="Agent,AIç¼–ç¨‹,AIGC"/> <meta itemprop="datePublished" content="2026-02-01T08:13:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºæ–°è§†ç•Œ"/> <meta itemprop="url" content="https://juejin.cn/user/3368559359568696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­ç§˜ç«çˆ†çš„ClawdBotï¼ˆMoltbot/OpenClawï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3368559359568696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºæ–°è§†ç•Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T08:13:15.000Z" title="Sun Feb 01 2026 08:13:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¯è¯´â€œAIä¸€å¤©ï¼Œäººé—´ä¸€å¹´â€ï¼Œæœ€è¿‘AIæŠ€æœ¯åœˆåˆå‡ºç°ä¸€æ¬¾ç«çˆ†çš„äº§å“ClawdBotï¼Œæ— è®ºæ˜¯åœ¨Githubä¸Šã€æœ‹å‹åœˆä»¥åŠå…¬å·æ–‡ç« ä¸­ï¼Œéƒ½ä¼šçœ‹åˆ°å®ƒçš„èº«å½±ã€‚</p>
<p>æœ‰äººè¿™æ ·è¯„ä»·ClawdBotï¼Œè¯´â€œ<strong>å®ƒæ˜¯è¿„ä»Šä¸ºæ­¢æœ€ä¼Ÿå¤§çš„AIåº”ç”¨ï¼Œç›¸å½“äºä½ 24å°æ—¶å…¨å¤©å€™ä¸“å±AIå‘˜å·¥ã€‚</strong> â€å®ƒçš„ç«çˆ†ç”šè‡³å¯¼è‡´äº†Mac miniçš„å¤§å–ã€‚</p>
<p>é‚£ä¹ˆï¼ŒClawdBotåˆ°åº•æœ‰æ²¡æœ‰è¿™ä¹ˆç¥å¥‡ï¼Ÿè¿™ç¯‡æ–‡ç« å¸¦å¤§å®¶æ·±åº¦æ­ç§˜ä¸€ä¸‹ClawdBotçš„ä¸€äº›ç›¸å…³çŸ¥è¯†ã€‚</p>
<h2 data-id="heading-0">ClawdBotåç§°çš„æ¼”å˜</h2>
<p>ä½ å¯èƒ½åœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰äººè®²ClawdBotã€æœ‰äººè®²Moltbotï¼Œåˆæœ‰äººåœ¨è®²OpenClawï¼Œå…¶å®å®ƒä»¬éƒ½æ˜¯åŒä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œè®²çš„éƒ½æ˜¯ClawdBotã€‚</p>
<p>åœ¨ClawdBoté¡¹ç›®ç«çˆ†åï¼Œç”±äºå®ƒçš„å‘éŸ³ä¸Anthropicçš„Claude Codeç­‰ç³»åˆ—åç§°ç›¸è¿‘ï¼Œæ¶‰å«Œå•†æ ‡é—®é¢˜ï¼Œäºæ˜¯æ”¹åä¸ºMoltbotï¼ˆèœ•å£³ä¹‹æ„ï¼‰ï¼Œéšååˆæ”¹åä¸ºOpenClawã€‚å¤§å®¶çŸ¥é“æœ‰ä¸€å›äº‹å°±å¯ä»¥äº†ï¼Œåœ¨åç»­æˆ‘ä»¬ä½¿ç”¨æœ€æ–°çš„åç§°ï¼š<strong>OpenClaw</strong>ã€‚</p>
<h2 data-id="heading-1">OpenClawçš„æ„¿æ™¯</h2>
<p>åœ¨Githubçš„é¡¹ç›®è¯´æ˜ä¸­ï¼ŒOpenClawçš„sloganä¸ºâ€œ<strong>Your own personal AI assistant.</strong> Any OS. Any Platform. The lobster way. ğŸ¦â€</p>
<p>å…³æ³¨çš„æ ¸å¿ƒå°±æ˜¯â€œä½ çš„ç§äººAIåŠ©ç†â€ï¼ŒåŒæ—¶è®°ä½è¿™ä¸ªé¾™è™¾ğŸ¦çš„å›¾æ ‡ï¼Œåœ¨å¤§å¤šæ•°è®²åˆ°OpenClawçš„æ–‡ç« ä¸­ä½ å¯èƒ½éƒ½ä¼šçœ‹åˆ°å®ƒã€‚</p>
<p>OpenClawä¸å†ä»…ä»…æ˜¯ä¸€ä¸ªèŠå¤©æœºå™¨äººï¼Œè€Œæ›´åƒæ˜¯ä¸€ä¸ªæ‹¥æœ‰â€œæ‰‹è„šâ€çš„æ•°å­—å®ä½“ã€‚å®ƒå¯ä»¥å¸¸é©»åœ¨ä½ çš„IMè½¯ä»¶ä¸­ï¼Œ24å°æ—¶åœ¨çº¿ï¼Œä¸ä»…èƒ½å¤ŸèŠå¤©ï¼Œè¿˜èƒ½å¤Ÿæ ¹æ®ä½ çš„æŒ‡ä»¤è°ƒç”¨æ‰€åœ¨ç”µè„‘çš„æœ¬åœ°Shellã€è¯»å†™æ–‡ä»¶ã€æ§åˆ¶æµè§ˆå™¨ç­‰ã€‚</p>
<p>è¿™é‡Œæåˆ°äº†â€œAny OSâ€ï¼Œä½†ç›®å‰çœ‹åˆ°å¹¿å¤§ç½‘å‹çš„å®è·µï¼Œå¯¹å…¶ä»–å¹³å°æ”¯æŒçš„å¹¶ä¸æ˜¯å¾ˆå‹å¥½ï¼Œè€Œä¸”æä¾›çš„å¤§é‡çš„Toolséƒ½æ˜¯é’ˆå¯¹Mac OSçš„ï¼Œè¿™ä¹Ÿæ˜¯å¯¼è‡´Mac miniå¤§å–çš„åŸå› ä¹‹ä¸€ã€‚</p>
<p>ç›®å‰OpenClawåœ¨Githubä¸Šå·²ç»æ‹¥æœ‰130k+çš„Starï¼Œè€Œä¸”æ¯å¤©éƒ½ä»¥10kä»¥ä¸Šçš„é€Ÿåº¦å¢åŠ ï¼Œå¯è§å®ƒçš„ç«çˆ†ç¨‹åº¦ã€‚è¿™é‡Œå¯ä»¥ç›´è§‚çœ‹ä¸€ä¸‹å®ƒåœ¨Githubä¸Šçš„å¢é•¿è¶‹åŠ¿å›¾ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2379fc8fda7147a2a971b241e8d4122a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5paw6KeG55WM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770538397&amp;x-signature=rGY0hVnpYYiSca8j6mf9bcazd6E%3D" alt="Star History" loading="lazy"/></p>
<p>åœ¨äº†è§£äº†å…³äºOpenClawçš„ä¸€äº›åŸºç¡€ä¿¡æ¯ä¹‹åï¼Œæˆ‘ä»¬æ¥å…·ä½“çœ‹çœ‹å®ƒæä¾›äº†å“ªäº›åŠŸèƒ½ï¼Œè®©å®ƒå¦‚æ­¤çš„ç«çˆ†ã€‚</p>
<h2 data-id="heading-2">OpenClawæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>å¦‚æœç”¨ä¸€å¥è¯æ¥æ€»ç»“OpenClawçš„åŠŸèƒ½å°±æ˜¯ï¼š<strong>OpenClawæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ä¸ªäººç”µè„‘æˆ–æœåŠ¡å™¨ä¸Šçš„ä¸ªäººä¸“å±çš„äººå·¥æ™ºèƒ½åŠ©ç†ï¼ˆAI Agentï¼‰ï¼Œä½ å¯ä»¥é€šè¿‡å³æ—¶é€šä¿¡å·¥å…·ä¸å®ƒè¿›è¡Œäº¤äº’ï¼Œè®©å®ƒå¸®ä½ å¤„ç†å„ç±»ä»»åŠ¡ï¼Œå®ç°çœŸæ­£æ„ä¹‰ä¸Šçš„å¹²æ´»ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿæ‹¥æœ‰äº†â€œè®°å¿†â€åŠŸèƒ½ï¼Œèƒ½å¤Ÿè®°ä½ä½ çš„åå¥½å’Œå†å²å¯¹è¯ï¼Œæ›´æ‡‚ä½ ã€‚</strong></p>
<p>è¿™é‡Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨çš„æ˜¯åŸºäºä¸ªäººç”µè„‘æˆ–æœåŠ¡å™¨çš„ç³»ç»Ÿæ¥å®ç°çœŸæ­£æ„ä¹‰çš„å¹²æ´»ã€‚åƒæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨ChatGPTæˆ–Claudeï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯åœ¨â€œèŠå¤©â€ï¼Œå®ƒä»¬åªæ˜¯åœ¨å¸®å¿™â€œå‡ºä¸»æ„â€ï¼Œæ²¡åŠæ³•çœŸæ­£æ„ä¹‰ä¸Šåœ¨æ“ä½œç³»ç»Ÿä¸Šè¿›è¡Œå‘½ä»¤çš„æ‰§è¡Œã€‚</p>
<p>è€ŒOpenClawæ‰€è¿ˆå‡ºçš„é‡è¦ä¸€æ­¥æ˜¯ï¼šå½“ä½ å°†ä¸ªäººç”µè„‘æˆ–æœåŠ¡å™¨çš„æ“ä½œæƒé™æˆäºˆå®ƒä¹‹åï¼Œå®ƒå¯ä»¥åœ¨æ“ä½œç³»ç»Ÿä¸Šæ‰§è¡Œä½ çš„å‘½ä»¤ï¼Œå¯ä»¥çœŸæ­£çš„æ›¿ä½ å¹²æ´»äº†ã€‚</p>
<p>å½“ç„¶ï¼Œåœ¨å®ç°è¿™ä¸€æ­¥æ“ä½œä¸­ï¼Œå®ƒç›¸å½“äºæŠŠClaude Codeå˜æˆäº†å¯è§†åŒ–çš„æ¡Œé¢ï¼ŒæŠŠç¤¾äº¤è½¯ä»¶ä½œä¸ºè¿œç¨‹æŒ‡æŒ¥çš„å·¥å…·ï¼Œæ‹“å®½äº†äººä¸æ‰§è¡Œä»»åŠ¡çš„ç”µè„‘ï¼ˆæˆ–æœåŠ¡å™¨ï¼‰çš„ç‰©ç†è·ç¦»ã€‚åˆæ­¥å®ç°äº†ä¸€ä¸ªå¯æŒç»­è¿è¡Œï¼Œå¯æ‰§è¡Œä»»åŠ¡çš„ä¸ªäººAIæ™ºèƒ½ä½“ã€‚</p>
<h2 data-id="heading-3">OpenClawçš„éœ‡æ’¼ç‚¹</h2>
<p>é€šè¿‡è§‚å¯ŸOpenClawçš„å…·ä½“æ¡ˆä¾‹ï¼Œå…¶å®ç›®å‰æ•ˆæœå¹¶ä¸å®Œç¾ï¼Œè¿˜æœ‰è®¸å¤šå‘ï¼Œä½†å®ƒè®©AI Agentå¾€å‰èµ°äº†ä¸€æ­¥ï¼Œå…·æœ‰ä»¥ä¸‹çš„éœ‡æ’¼ç‚¹ï¼š</p>
<p><strong>ç¬¬ä¸€ï¼Œå®ƒå¯ä»¥æ§åˆ¶ä½ çš„ç”µè„‘ï¼Œå®ƒèƒ½â€œåŠ¨æ‰‹â€ï¼Œè€Œä¸æ˜¯åªâ€œå‡ºä¸»æ„â€ã€‚</strong> åªè¦ä½ ç»™OpenClawå……åˆ†æˆæƒï¼Œå®ƒä¾¿å¯ä»¥æ§åˆ¶ä½ çš„ç”µè„‘ï¼Œåƒäººä¸€æ ·æ“ä½œä½ çš„ç”µè„‘ã€‚</p>
<p>OpenClawè¿ˆå‡ºäº†è¿™ä¸€æ­¥ï¼Œä½†ç›®å‰å¹¶ä¸å®Œç¾ã€‚åœ¨çœŸå®ä½¿ç”¨æ—¶ï¼Œè¿˜æ˜¯éœ€è¦é€šè¿‡è™šæ‹Ÿæœºã€ç‹¬ç«‹çš„æœåŠ¡å™¨æˆ–ä¸€å°ç‹¬ç«‹çš„ç”µè„‘ã€æˆ–ç‹¬ç«‹çš„é¡¹ç›®ç¯å¢ƒï¼Œæˆ–æœ‰é™çš„æ“ä½œæƒé™æ¥è¿›è¡Œå®‰å…¨æŠŠæ§ã€‚</p>
<p>å¦åˆ™ï¼Œä¸€æ—¦OpenClawä¹±æ¥ï¼ˆæ¨¡å‹å’ŒAgentçš„å¹»è§‰é—®é¢˜ç­‰ï¼‰ï¼Œå°†ä¼šé¢ä¸´ä¸å¯é¢„ä¼°çš„æŸå¤±ã€‚è¿™ä¹Ÿæ˜¯è´­ä¹°Mac miniçš„åŸå› ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„ç¯å¢ƒã€‚</p>
<p><strong>ç¬¬äºŒï¼Œæ‹¥æœ‰é•¿æœŸè®°å¿†ï¼Œä¸æ˜¯ä¸€æ¬¡æ€§å¯¹è¯ã€‚</strong> OpenClawå†…ç½®äº†ä¸€å¥—é•¿æœŸè®°å¿†ç³»ç»Ÿï¼Œä½ è¯´è¿‡çš„è¯ï¼Œåšè¿‡çš„äº‹ï¼Œéƒ½ä¼šè¢«è®°å½•ã€æ€»ç»“ã€æå–å‡ºæ¥ï¼Œå¹¶å­˜å…¥é•¿æœŸè®°å¿†å½“ä¸­ã€‚å½“å®ƒæ›´äº†è§£ä½ æ—¶ï¼Œå®ƒä¹Ÿå°±æ˜¯ä½ çš„ä¸ªäººä¸“å±åŠ©ç†äº†ã€‚</p>
<p><strong>ç¬¬ä¸‰ï¼Œå¯é€šè¿‡èŠå¤©å·¥å…·æ¥â€œé¥æ§â€äº¤äº’ã€‚</strong> å½“é›†æˆå¯¹åº”çš„èŠå¤©å·¥å…·ä¹‹åï¼Œä½ é€šè¿‡èŠå¤©å·¥å…·ç»™å®ƒå‘æ¶ˆæ¯ï¼Œä¾¿å¯å¯¹OpenClawä¸‹è¾¾ä»»åŠ¡å‘½ä»¤ï¼Œè¿™æ ·ä¾¿å®ç°äº†è¿œç¨‹æŒ‡æŒ¥ï¼Œå…¨å¤©24å°æ—¶å¾…å‘½çš„æ•ˆæœã€‚ä½†è¿™é‡Œç‰¹åˆ«æé†’ï¼ŒOpenClawåœ¨ä½¿ç”¨æ—¶ï¼Œå®‰å…¨éšæ‚£éå¸¸å¤§ã€‚</p>
<p><strong>ç¬¬å››ï¼ŒOpenClawå¹¶ä¸åªæ˜¯â€œèƒ½å¹²æ´»â€ï¼ŒåŒæ—¶å®ƒå‡ ä¹æ˜¯100%ç”¨AIå†™å‡ºæ¥çš„ã€‚</strong> ä¸ä¼šå†™ä»£ç çš„äººï¼Œä¹Ÿèƒ½ç›´æ¥æäº¤PRï¼Œè¿™ä¹Ÿç®—æ˜¯AIç¼–ç¨‹çš„ä¸€ä¸ªæ–°çš„çœŸå®æ¡ˆä¾‹çš„çªç ´ã€‚</p>
<p>è¿™äº›ç‰¹æ€§æ±‡æ€»èµ·æ¥æ„å‘³ç€ï¼š<strong>ä¸€å°æ°¸ä¸å…³æœºçš„ç”µè„‘ï¼Œé‡Œé¢ä½ç€ä¸€ä½èƒ½å¤Ÿè®°ä½ä½ ï¼Œèƒ½å¤Ÿè‡ªå·±ä¸Šç½‘ï¼Œèƒ½å¤Ÿè‡ªå·±åŠ¨æ‰‹ï¼Œèƒ½å¤Ÿéšæ—¶è¢«ä½ æŒ‡æŒ¥ï¼Œè¿˜èƒ½å¤Ÿè‡ªæˆ‘è¿­ä»£æ›´æ–°çš„AIå‘˜å·¥</strong>ã€‚</p>
<p>ç›®å‰çš„OpenClawå¹¶ä¸å®Œç¾ï¼Œä½†å®ƒçš„å‡ºç°å°±åƒæ—©æœŸçš„æ™ºèƒ½æ‰‹æœºçš„è¶Šç‹±æ’ä»¶ã€NASï¼ˆå‘çƒ§å‹ç©çš„å®¶åº­æœåŠ¡å™¨ï¼‰ã€Kubernetesï¼ˆæŠ€æœ¯åœˆçš„æ–°ç©æ„ï¼‰ã€Dockerç­‰è½¯ä»¶ï¼Œéšç€é€æ­¥çš„å‘å±•è¿­ä»£ï¼Œæœ€ç»ˆä¼šæˆä¸ºæ—¥å¸¸çš„æ ‡å‡†ã€‚</p>
<h2 data-id="heading-4">OpenClawçš„æ¶æ„å®ç°</h2>
<p>åœ¨æ¶æ„è®¾è®¡ä¸Šï¼ŒOpenClawé‡‡ç”¨äº†éå¸¸å·§å¦™çš„Gatewayï¼ˆç½‘å…³ï¼‰æ¨¡å¼ï¼Œä»è€Œå®ç°äº†æŒ‡ä»¤æ¶ˆæ¯ã€æ¨¡å‹ä»¥åŠæŒ‡ä»¤æ‰§è¡Œçš„è§£è€¦ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09aec786a0e542fa9df7d9436ca1c33b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5paw6KeG55WM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770538397&amp;x-signature=EjA5B3%2BTq2Cn85G%2FG%2FZtkA9kW84%3D" alt="æ¶æ„å®ç°" loading="lazy"/></p>
<p>åŸºæœ¬çš„å…¨æµç¨‹å®ç°é€»è¾‘ä¸ºï¼š</p>
<p>ç”¨æˆ·å¯é€šè¿‡WhatsAppæˆ–Telegramç­‰é€šä¿¡è½¯ä»¶å‘é€æ¶ˆæ¯ï¼ˆæŒ‡ä»¤ï¼‰ï¼Œæ¶ˆæ¯ä¼ åˆ°ç”µè„‘ä¸Šçš„Gatewayï¼ˆç½‘å…³ï¼‰ï¼Œç½‘å…³ä¹Ÿæ˜¯æ•´ä¸ªç³»ç»Ÿçš„æ§åˆ¶ä¸­å¿ƒï¼Œæ˜¯è¿æ¥æŒ‡ä»¤å’Œç”µè„‘èƒ½åŠ›çš„æ¡¥æ¢ã€‚</p>
<p>ç½‘å…³é€šè¿‡LLM APIï¼ˆæ¯”å¦‚Claudeæˆ–ä»»ä½•æ¨¡å‹çš„APIï¼‰å°†æ¶ˆæ¯åˆ†å‘ç»™LLMï¼ˆå¤§è„‘ï¼‰æˆ–Skillsï¼ˆæ‰‹è„šï¼‰ï¼Œä»è€Œå®ç°åœ¨ç”µè„‘ä¸Šæ‰§è¡Œç›¸å…³å‘½ä»¤ï¼ˆæˆ–ä»»åŠ¡ï¼‰ã€‚</p>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒGatewayå°±åƒæ˜¯æ™ºèƒ½ä½“çš„â€œå°è„‘â€ï¼Œè´Ÿè´£ç»´æŒå„å¤§IMå¹³å°ï¼ˆChannelsï¼‰çš„é•¿è¿æ¥ã€ä¼šè¯ä¿æŒã€ä»»åŠ¡åˆ†å‘ç­‰åŠŸèƒ½ã€‚</p>
<p>è€ŒSkillså’ŒToolsèµ‹äºˆäº†AIâ€œè‚‰èº«â€ï¼ŒSkillsä¹Ÿæ˜¯æ­¤æ¶æ„ä¸­çš„ä¸€ç­‰å…¬æ°‘ï¼Œé€šè¿‡å®šä¹‰æ˜ç¡®çš„æ¥å£ï¼ŒAIå¯ä»¥è°ƒç”¨æœ¬åœ°å·¥å…·ï¼Œæ¯”å¦‚æ‰§è¡Œå…·æœ‰æ¯ç­æ€§çš„æ“ä½œâ€œ<code>rm -rf</code>â€ã€è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€æ§åˆ¶æµè§ˆå™¨æŠ“å–ä¿¡æ¯ç­‰ã€‚</p>
<h2 data-id="heading-5">OpenClawçš„åŠŸèƒ½æ¡ˆä¾‹</h2>
<p>ç›®å‰OpenClawå·²ç»èƒ½å¤Ÿå®ç°åŸºç¡€çš„å®‰è£…è½¯ä»¶ã€æ‰§è¡Œè„šæœ¬ã€ç®¡ç†æ–‡ä»¶ã€ç›‘æ§ç½‘é¡µã€å‘é‚®ä»¶ã€ç¤¾äº¤åª’ä½“å‘æ¶ˆæ¯ç­‰åŠŸèƒ½ã€‚ç†è®ºä¸Šï¼Œåªè¦æ‰‹åŠ¨èƒ½å¤Ÿæ“ä½œçš„ï¼Œæœ‰å¯¹åº”çš„æ¥å£æˆ–æƒé™ï¼ŒOpenClawéƒ½å¯ä»¥æå®šã€‚</p>
<p>è¿™é‡Œåœ¨åˆ†äº«ä¸€ä¸ªç½‘ç»œä¸Šæ‰€è¯´çš„â€œæ±½è½¦è´­ä¹°è‡ªåŠ¨è°ˆåˆ¤â€çš„æ¡ˆä¾‹ï¼Œæœ¬è´¨ä¸Šæ²¡æœ‰é‚£ä¹ˆç¥å¥‡ï¼Œåªæ˜¯ä¸€äº›åˆ—åŠŸèƒ½çš„ç»„åˆã€‚</p>
<p>æ¡ˆä¾‹çš„æ‰§è¡Œåˆ†ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>ä»·æ ¼è°ƒç ”ï¼šæç¤ºOpenClawæœç´¢ Redditï¼ˆr/hyundaipalisadeï¼‰æŸ¥æ‰¾é©¬è¨è¯¸å¡å·çš„å…¸å‹ä»·æ ¼ï¼Œå‘ç°å¤§å¤šæ•°äººæ”¯ä»˜çº¦ $58,000ã€‚</li>
<li>è½¦è¾†å®šä½ï¼šä½¿ç”¨åœ¨çº¿åº“å­˜å·¥å…·æœç´¢æ³¢å£«é¡¿50è‹±é‡Œå†…ç¬¦åˆç‰¹å®šé¢œè‰²ç»„åˆçš„ç»é”€å•†ï¼›</li>
<li>åˆå§‹è”ç³»ï¼šOpenClawè‡ªåŠ¨å¡«å†™ç»é”€å•†è”ç³»è¡¨å•ï¼Œé¢„å¡«ç”¨æˆ·æ‰‹æœºå·ï¼›</li>
<li>è‡ªåŠ¨è°ˆåˆ¤ï¼šè®¾ç½®cronä»»åŠ¡ï¼Œæ¯éš”å‡ åˆ†é’Ÿæ£€æŸ¥é‚®ä»¶ä¸­æ¥è‡ªç»é”€å•†çš„æ¶ˆæ¯ã€‚è°ˆåˆ¤æœ€ä½é”€å”®ä»·æ ¼ï¼Œä¸è°ˆåˆ¤æ¢è´­æˆ–åˆ©ç‡ã€‚åœ¨å›å¤ä»»ä½•é‡è¦å†…å®¹å‰æç¤ºæˆ‘ã€‚</li>
</ul>
<p>OpenClawè®©ç»é”€å•†äº’ç›¸ç«äº‰ï¼Œå‘é€æŠ¥ä»·PDFã€‚æœ€ç»ˆè·å¾—<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo separator="true">,</mo><mn>200</mn><mtext>ç»é”€å•†æŠ˜æ‰£ï¼Œä»·æ ¼é™è‡³</mtext></mrow><annotation encoding="application/x-tex">4,200ç»é”€å•†æŠ˜æ‰£ï¼Œä»·æ ¼é™è‡³</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">200</span><span class="mord cjk_fallback">ç»é”€å•†æŠ˜æ‰£ï¼Œä»·æ ¼é™è‡³</span></span></span></span></span>56,000â€”â€”ä½äºç›®æ ‡ä»·æ ¼ã€‚</p>
<p>å½“ç„¶ï¼Œè¿˜æœ‰åˆ©ç”¨æ™ºèƒ½å®¶å±…Skillsæ¥æ§åˆ¶ç¯å…‰ã€æ¸©åº¦ã€ç©ºæ°”å‡€åŒ–å™¨çš„æ¡ˆä¾‹ç­‰æ¡ˆä¾‹ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥ç½‘ç»œä¸Šæœç´¢ä¸€ä¸‹ã€‚</p>
<h4 data-id="heading-6">ä¸ºä»€ä¹ˆè¦ç”¨Mac miniï¼Ÿ</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcd3764bd35c4a26b486fa4517e8a536~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5paw6KeG55WM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770538397&amp;x-signature=XdXYCkqd%2Fw8MK5kK61mj%2F1TwkfE%3D" alt="Mac mini" loading="lazy"/></p>
<p>æœ€åï¼Œæˆ‘ä»¬å†èŠèŠä¸ºä»€ä¹ˆè¦ç”¨Mac miniï¼Ÿ</p>
<p>ä»å®˜æ–¹çš„ä»‹ç»æ¥è¯´ï¼Œç†è®ºä¸Šâ€œAny OSâ€éƒ½æ˜¯å¯ä»¥çš„ï¼Œåªä¸è¿‡ä½¿ç”¨Mac miniæ›´åŠ é€‚é…OpenClawçš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<p>åŸå› å¯èƒ½æœ‰è¿™å‡ ç‚¹ï¼š</p>
<p>ç¬¬ä¸€ï¼Œç¤¾äº¤è½¯ä»¶çš„æ•´åˆæ›´åŠ æ–¹ä¾¿ã€‚æ— è®ºæ˜¯å¸Œæœ›AIåŠ©æ‰‹èƒ½å¤Ÿç®¡ç†ç¤¾äº¤è½¯ä»¶ï¼Œè¿˜æ˜¯é€šè¿‡ç¤¾äº¤è½¯ä»¶æ¥ä¸‹è¾¾å‘½ä»¤ï¼Œåœ¨Mac OSç³»ç»Ÿä¸‹éƒ½æ›´åŠ å®¹æ˜“å®ç°ã€‚</p>
<p>åƒWhatsAppå’ŒTelegramç­‰éƒ½æœ‰å¼€å‘çš„APIï¼Œä½†å®ƒä»¬åœ¨ç¾å›½ä¸å¦‚ iMessageï¼ˆè‹¹æœçŸ­ä¿¡ï¼‰æ™®åŠã€‚è€Œè‹¹æœä¸¥å¯†å°é”äº† iMessageåè®®ï¼Œåªå…è®¸åœ¨è‹¹æœè®¾å¤‡ä¸Šè¿è¡Œã€‚å¦‚æœä½ æƒ³è®©ä½ çš„ AI åŠ©æ‰‹èƒ½å¤„ç†ä½ çš„çŸ­ä¿¡ï¼ˆæ¯”å¦‚â€œå¸®æˆ‘æŸ¥ä¸€ä¸‹æ˜¨å¤©çš„è´­ç‰©æ¸…å•â€ï¼‰ï¼ŒOpenClawå¿…é¡»è·‘åœ¨ä¸€å°ç™»å½•äº†Apple IDçš„Macä¸Šã€‚</p>
<p>ç¬¬äºŒï¼ŒMacç³»ç»Ÿè‡ªå¸¦å¼ºå¤§çš„è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆShortcutså¿«æ·æŒ‡ä»¤ã€AppleScriptï¼‰è¿™äº›éƒ½æ¯”Linuxå’ŒWindowsè¦å¼ºã€‚</p>
<p>ç¬¬ä¸‰ï¼ŒOpenClawé’ˆå¯¹Macç³»ç»Ÿï¼Œè‡ªå¸¦äº†è®¸å¤šé€‚é…Mac OSçš„Skillsï¼Œå¯ä»¥æ‹¿æ¥å³ç”¨ã€‚</p>
<p>å¦å¤–ï¼Œè´­ä¹°Mac miniä¹Ÿæ˜¯å¤„äºåœ¨æ—¥å¸¸åŠå…¬çš„ç”µè„‘ä¸Šçš„å®‰å…¨æ€§é—®é¢˜ï¼Œéœ€è¦ä¹°ä¸€å°ç‹¬ç«‹çš„è®¾å¤‡ï¼Œè€Œå®ƒæ°å¥½é€‚åˆã€‚</p>
<h2 data-id="heading-7">å…³äºOpenClawçš„åˆ›å§‹äººPeter</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a78aa3912a5d4ed6b14cf313e60a27c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5paw6KeG55WM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770538397&amp;x-signature=7S6y1EWrwKtlPd3zxvalgI8PJlw%3D" alt="OpenClawçš„åˆ›å§‹äºº" loading="lazy"/></p>
<p>OpenClawçš„å¼€æºä½œè€…ä¸ºPeter Steinbergerï¼Œä»–çš„ä¸ªäººåšå®¢ä¹Ÿæœ‰ç›¸å…³çš„æ–‡ç« ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥å»å…³æ³¨ä¸€ä¸‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsteipete.me%2F" target="_blank" title="https://steipete.me/" ref="nofollow noopener noreferrer">steipete.me/</a>ã€‚</p>
<p>å¦‚æœä½ å»çœ‹ä»–çš„Githubï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsteipete" target="_blank" title="https://github.com/steipete" ref="nofollow noopener noreferrer">github.com/steipete</a>ï¼‰ï¼Œä¼šå‘ç°ä»–åŒæ—¶å¼€å‘äº†å¤šä¸ªé¡¹ç›®ï¼Œè€Œä¸”ä»£ç çš„æäº¤é‡éå¸¸ç–¯ç‹‚ï¼Œæ—¥å‡ä¸Šä¸‡è¡Œã€‚</p>
<p>ä»–åœ¨é‡‡è®¿ä¸­æ›¾è¯´ï¼š<strong>æˆ‘ä¸€å¤©å†™çš„ä»£ç ï¼Œå¯èƒ½æ¯”æˆ‘ä»¥å‰70äººå…¬å¸ä¸€ä¸ªæœˆå†™å¾—éƒ½å¤šã€‚åœ¨è¿™ä¸ªæ–°ä¸–ç•Œé‡Œï¼Œæ„å»ºä¸œè¥¿çš„é€Ÿåº¦å·²ç»å®Œå…¨å˜äº†ã€‚</strong></p>
<p>è¿™æ ·çš„ä»£ç é‡ï¼Œæ‰‹æ•²ä»£ç æ ¹æœ¬æ— æ³•å®Œæˆã€‚Peteråœ¨é‡‡è®¿ä¸­ä¹Ÿå¦è¨€â€œ<strong>å®ƒæ˜¯ç™¾åˆ†ä¹‹ç™¾ç”¨ AI å†™å‡ºæ¥çš„ï¼Œé‡Œé¢æ²¡æœ‰ä¸€è¡Œä»£ç æ˜¯æˆ‘äº²æ‰‹æ•²çš„ã€‚</strong> â€</p>
<p>ç®€å•æ¨æµ‹ä½œè€…çš„ç¼–ç è¿‡ç¨‹ï¼š</p>
<ul>
<li>è®¾å®šä»»åŠ¡ç›®æ ‡ï¼ˆTODO Listï¼‰ï¼Œä¸€éƒ¨åˆ†æ¥è‡ªGithubä¸Šçš„PRï¼›</li>
<li>åˆ©ç”¨AIè¿›è¡Œè¯„ä¼°ã€æ‹†åˆ†ä»»åŠ¡ï¼›</li>
<li>åˆ©ç”¨ç±»ä¼¼Claude Codeç­‰å¹³å°å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ï¼›</li>
<li>å®Œæˆä»»åŠ¡ä¹‹åï¼Œä»£ç åˆå¹¶åˆ°åŒä¸€åˆ†æ”¯ï¼Œåˆ©ç”¨AIè¿›è¡ŒCode Reviewï¼›</li>
<li>æœ€åï¼ŒMergeã€æäº¤ï¼›</li>
</ul>
<p>ç›®å‰OpenClawçš„å…·æœ‰å®Œæ•´çš„ç”µè„‘è®¿é—®èƒ½åŠ›ï¼Œä¹Ÿæ‡‚Githubçš„å·¥ä½œæ–¹å¼ã€‚</p>
<h2 data-id="heading-8">å±•æœ›ä¸€ä¸‹</h2>
<p>å†æ¬¡æƒ³è¯´çš„æ˜¯ï¼ŒOpenClawç›®å‰å¹¶ä¸å®Œç¾ï¼Œä½†å®ƒä»£è¡¨äº†ä¸ªäººAIåŠ©ç†é¢†åŸŸçš„é‡å¤§çªç ´ï¼Œæä¾›äº†ä¸€ç§å¯èƒ½æ€§ã€‚å®ƒé€šè¿‡æœ¬åœ°æœ‰å…ˆã€è‡ªæ‰˜ç®¡æ¶æ„ï¼Œå°†åŸæœ¬çº¯èŠå¤©ç»™å»ºè®®çš„LLMèƒ½åŠ›ä¸çœŸå®çš„æ‰§è¡Œèƒ½åŠ›è¿›è¡Œäº†æ•´åˆã€‚</p>
<p>åœ¨æ¶æ„åˆ†å±‚ä¸Šï¼Œé€šè¿‡Gateway-&gt;Agent-&gt; Skills -&gt; Channels/Nodesæ¨¡å¼ï¼Œå®ç°äº†æ¸…æ™°çš„å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œå³ä¿æŒäº†å¼€æ”¾æ ‡å‡†ï¼Œåˆå®ç°äº†ä¸Claude Codeã€Cursorç­‰å·¥å…·çš„ç”Ÿæ€å…¼å®¹ã€‚</p>
<p>å½“ç„¶ï¼Œç›®å‰åœ¨å®‰å…¨æ–¹é¢ï¼Œè¿˜å­˜åœ¨å¾ˆå¤§çš„æŒ‘æˆ˜ï¼Œæœ€å¥½åœ¨æ²™ç›’ç¯å¢ƒä¸‹è¿è¡Œã€‚å¦å¤–ï¼Œåœ¨tokençš„æ¶ˆè€—ä¸Šä¸€èˆ¬äººåƒä¸æ¶ˆï¼ŒåŸæœ¬é€šè¿‡äººå·¥æ“ä½œéå¸¸ç®€å•çš„äº‹æƒ…ï¼Œç›®å‰è¿˜éœ€è¦å¤§é‡çš„tokenæ¶ˆè€—ï¼Œç»“æœè¿˜å­˜åœ¨ä¸€å®šçš„ç¨³å®šæ€§é—®é¢˜ã€‚</p>
<p>ä½†æ— è®ºæ€æ ·ï¼ŒOpenClawæä¾›äº†ä¸€ä¸ªAIä¸ç°å®ä¸–ç•Œç›¸ç»“åˆçš„å®Œæ•´æ¡ˆä¾‹å‚è€ƒï¼Œä¹Ÿæ˜¯ä¸€æ­¥å¤§èƒ†çš„å°è¯•ã€‚</p>
<p>æœ€åï¼Œç”¨OpenClawå‘èµ·è€…çš„ä¸€å¥è¯æ¥ä½œä¸ºæœ¬æ–‡çš„ç»“æŸè¯­ï¼Œè¿™å¥è¯å€¼å¾—æˆ‘ä»¬æ·±æ€ï¼š<strong>ä»AIå‡ºç°ä¹‹åï¼Œæˆ‘å…¶å®å·²ç»æ²¡é‚£ä¹ˆåœ¨æ„â€œç”¨ä»€ä¹ˆè¯­è¨€â€äº†ã€‚è¯­è¨€æœ¬èº«çš„é‡è¦æ€§åœ¨ä¸‹é™ï¼ŒçœŸæ­£é‡è¦çš„æ˜¯ç”Ÿæ€</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™å¼€å‘æ‰‹è®°ï¼ˆä¸€ï¼‰ï¼šä»â€œå‚»ç“œå¼â€ç¯å¢ƒé…ç½®åˆ°é¦–ä¸ª TodoList å®æˆ˜]]></title>    <link>https://juejin.cn/post/7601103779392946239</link>    <guid>https://juejin.cn/post/7601103779392946239</guid>    <pubDate>2026-02-01T08:26:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601103779392946239" data-draft-id="7601076694105276452" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™å¼€å‘æ‰‹è®°ï¼ˆä¸€ï¼‰ï¼šä»â€œå‚»ç“œå¼â€ç¯å¢ƒé…ç½®åˆ°é¦–ä¸ª TodoList å®æˆ˜"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-02-01T08:26:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯’ç’ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/2559318802827933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™å¼€å‘æ‰‹è®°ï¼ˆä¸€ï¼‰ï¼šä»â€œå‚»ç“œå¼â€ç¯å¢ƒé…ç½®åˆ°é¦–ä¸ª TodoList å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2559318802827933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯’ç’ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T08:26:51.000Z" title="Sun Feb 01 2026 08:26:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¸¿è’™å¼€å‘æ‰‹è®°ï¼ˆä¸€ï¼‰ï¼šä»â€œå‚»ç“œå¼â€ç¯å¢ƒé…ç½®åˆ°é¦–ä¸ª TodoList å®æˆ˜</h2>
<p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘åˆ†äº«äº†ä¸ºä»€ä¹ˆåœ¨ 2026 å¹´é€‰æ‹©ä» Cocos æ¸¸æˆå¼€å‘è½¬æˆ˜ HarmonyOS NEXTã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥å®æˆ˜ï¼šèŠèŠç¯å¢ƒæ­å»ºï¼Œå¹¶ç”¨ ArkTS äº²æ‰‹æ’¸ä¸€ä¸ª TodoListã€‚</p>
<h3 data-id="heading-1">1. ç¯å¢ƒé…ç½®ï¼šé›†æˆåº¦æé«˜çš„â€œå‚»ç“œå¼â€ä½“éªŒ</h3>
<p>å¯¹äºä¹ æƒ¯äº†åœ¨ VS Code é‡ŒæŠ˜è…¾å„ç§æ’ä»¶ã€Webpack é…ç½®å’Œæµè§ˆå™¨è°ƒè¯•çš„å‰ç«¯å¼€å‘è€…æ¥è¯´ï¼ŒDevEco Studio çš„åˆä½“éªŒå¯ä»¥ç”¨ <strong>â€œçœå¿ƒâ€</strong> æ¥å½¢å®¹ã€‚</p>
<ul>
<li><strong>å…¨å®¶æ¡¶å¼çš„é›†æˆï¼š</strong> ä½ ä¸éœ€è¦å†å»çº ç»“æ¨¡æ‹Ÿå™¨æ€ä¹ˆè£…ã€é¢„è§ˆå™¨æ€ä¹ˆé…ã€‚DevEco Studio å‡ ä¹æŠŠæ‰€æœ‰å·¥å…·éƒ½é›†æˆåœ¨äº†ä¸€ä¸ªå®‰è£…åŒ…é‡Œã€‚</li>
<li><strong>Previewer ä¸æ¨¡æ‹Ÿå™¨ï¼š</strong> å®ƒçš„é¢„è§ˆå™¨å“åº”é€Ÿåº¦å¾ˆå¿«ï¼ŒåŸºæœ¬åšåˆ°äº†ä»£ç æ”¹åŠ¨å³åˆ»ç”Ÿæ•ˆï¼Œè¿™å¯¹äºæˆ‘ä»¬è¿™ç§è¿½æ±‚â€œæ‰€è§å³æ‰€å¾—â€çš„å¼€å‘è€…éå¸¸å‹å¥½ã€‚</li>
<li><strong>å†…ç½® AI çš„è¾…åŠ©ï¼š</strong> è™½ç„¶å®ƒå†…ç½®çš„ AI åŠŸèƒ½ç›®å‰è¿˜æ¯”ä¸ä¸Š Cursor é‚£æ ·æƒŠè‰³ï¼Œä½†åœ¨å¤„ç†ä¸€äº›åŸºç¡€çš„ä»£ç è¡¥å…¨å’Œ API æŸ¥è¯¢æ—¶ï¼Œå·²ç»èƒ½èŠ‚çœä¸å°‘ç¿»æ–‡æ¡£çš„æ—¶é—´ã€‚</li>
</ul>
<p>ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨DevEco Studioä¸­é¢„è§ˆæˆ‘ä»¬é¡¹ç›®ï¼Œæœ‰3ç§æ–¹å¼ï¼š</p>
<ol>
<li>
<p>Previewerï¼š Previeweræ˜¯ä¸€ç§é›†æˆåœ¨DevEco ä¸­çš„é¢„è§ˆæ–¹å¼ï¼Œå®ƒå…·å¤‡çƒ­æ›´æ–°çš„èƒ½åŠ›ï¼Œå½“æˆ‘ä»¬çš„ä»£ç ä¿®æ”¹åï¼Œpreviewerèƒ½å¤Ÿå®æ—¶çš„åšå‡ºæ”¹å˜</p>
<p>ä½†æ˜¯å®ƒä¹Ÿå…·æœ‰ä¸€äº›ä¸è¶³çš„åœ°æ–¹ï¼šæ¯”å¦‚æŸäº›APIä¸æ”¯æŒpreviewerç¯å¢ƒï¼Œè¿™ä¸€ç‚¹ååˆ†çš„é‡è¦ï¼Œæ‰€ä»¥ä¸€å®šåœ¨è°ƒè¯•ä»£ç çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„APIçš„é€‚ç”¨ç¯å¢ƒã€‚</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f26fefe68be0424c88f1738e53108289~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-S55KD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770539220&amp;x-signature=Y5QaWWndGD1PEg8gssyprpoFlG4%3D" alt="image-20260201153159100" loading="lazy"/></p>
<ol start="2">
<li>æ¨¡æ‹Ÿå™¨ï¼šæ¨¡æ‹Ÿå™¨æ˜¯åœ¨ç”µè„‘ä¸Šå®‰è£…ä¸€ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œæ¨¡æ‹Ÿå™¨æ˜¯ä¸€ä¸ªå•ç‹¬çš„APPï¼Œç›¸å½“äºåœ¨ç”µè„‘ä¸Šè¿è¡Œäº†ä¸€ä¸ªæ¨¡æ‹ŸHarmony OSçš„APPï¼Œåœ¨ä½¿ç”¨æ¨¡æ‹Ÿå™¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­å®‰è£…ä¸€ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œç„¶åè¿è¡Œè¿™ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥è¿è¡Œçš„æ—¶å€™é€‰æ‹©è¯¥æ¨¡æ‹Ÿå™¨ä½œä¸ºè¿è¡Œç¯å¢ƒäº†ã€‚</li>
</ol>
<div>
    <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5841789c1024e8fae6cda4eb96335b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-S55KD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770539220&amp;x-signature=JiUIJ%2FIHb7Q1LWfB7BFI1KqAMgc%3D" loading="lazy"/>
    <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba6fd07e38784cde825e898a2dec6063~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-S55KD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770539220&amp;x-signature=Pydo1C5TLsurTiIPqMt9i14TxP0%3D" loading="lazy"/>
</div>
<ol start="3">
<li>çœŸæœºè°ƒè¯•ï¼šé¡¾åæ€ä¹‰ï¼Œä½¿ç”¨çœŸæœºè¿›è¡Œä»£ç è°ƒè¯•ï¼Œå¯¹äºä¸€äº›ç‰¹æ®Šçš„åœºæ™¯åªèƒ½ä½¿ç”¨çœŸæœºè°ƒè¯•çš„æ–¹å¼ï¼Œæ¯”å¦‚æ„å›¾å¼€å‘åœºæ™¯ä¸­ç›®å‰åªæ”¯æŒçœŸæœºè°ƒè¯•ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-2">2. æ ¸å¿ƒæ€ç»´è½¬æ¢ï¼šä»å‘½ä»¤å¼åˆ° MVVM</h3>
<p>ä½œä¸ºä¸€ä¸ªæœ‰ç€ 5 å¹´å°æ¸¸æˆå¼€å‘ç»éªŒçš„äººï¼Œæˆ‘ä¹ æƒ¯äº†æ‰‹åŠ¨çš„å»è®¾ç½®ä¸åŒUIçš„å€¼ï¼Œä½†åœ¨ ArkUI ä¸­ï¼Œè¿™ç§æ€ç»´éœ€è¦å‘ç”Ÿ 180 åº¦çš„è½¬å˜ã€‚</p>
<h4 data-id="heading-3">æ•°æ®é©±åŠ¨ UIï¼ˆMVVMï¼‰</h4>
<p>åœ¨ ArkTS ä¸­ï¼Œä½ åªéœ€è¦å…³æ³¨<strong>æ•°æ®ï¼ˆStateï¼‰</strong> ã€‚å½“ä½ é€šè¿‡ <code>@State</code> å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼ŒUI å°±ä¼šåƒå½±å­çš„ä¸»äººä¸€æ ·ï¼Œä¸»äººåŠ¨ï¼ˆæ•°æ®å˜ï¼‰ï¼Œå½±å­å°±è·Ÿç€åŠ¨ï¼ˆUI åˆ·æ–°ï¼‰ã€‚è¿™ä¸€ç‚¹ä¸å‰ç«¯çš„Vue æ¡†æ¶å¾ˆç±»ä¼¼ã€‚</p>
<h4 data-id="heading-4">å‰ç«¯å¼€å‘è€…çš„â€œæ’å¢™â€ç‚¹</h4>
<p>è™½ç„¶ ArkTS çœ‹èµ·æ¥å’Œ TypeScript ä¸€æ¨¡ä¸€æ ·ï¼Œä½†åœ¨çˆ¶å­ç»„ä»¶é€šä¿¡ä¸Šï¼Œå®ƒæœ‰å‡ ä¸ªéå¸¸ç¡¬æ ¸çš„â€œè„¾æ°”â€éœ€è¦ä½ é€‚åº”ï¼š</p>
<ol start="0">
<li><strong>ç¦æ­¢ä¼ é€’å‡½æ•°ï¼š</strong> åœ¨ React æˆ– Vue ä¸­ï¼Œçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯å¸¸è§„æ“ä½œã€‚ä½†åœ¨ ArkUI é‡Œï¼Œ<strong>çˆ¶ç»„ä»¶ä¸èƒ½ç›´æ¥å‘å­ç»„ä»¶ä¼ é€’å‡½æ•°ç±»å‹çš„å€¼</strong>ã€‚è¿™éœ€è¦æˆ‘ä»¬ä¹ æƒ¯ä½¿ç”¨ <code>@Link</code> æˆ–è‡ªå®šä¹‰äº‹ä»¶æ¥å¤„ç†äº¤äº’ã€‚</li>
<li><strong>ä¼ å€¼è¿˜æ˜¯ä¼ å€ï¼Ÿ</strong> è¿™æ˜¯ä¸€ä¸ªå‘ã€‚å‚æ•°ä¼ é€’æ–¹å¼çš„ä¸åŒï¼ˆå€¼ä¼ é€’ vs å¼•ç”¨ä¼ é€’ï¼‰ä¼šç›´æ¥å†³å®š UI èƒ½å¦æ„Ÿåº”åˆ°æ•°æ®çš„å˜åŒ–ã€‚æ¯”å¦‚ä½ ä¿®æ”¹äº†å¯¹è±¡å†…éƒ¨çš„ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœæ²¡å¤„ç†å¥½å¼•ç”¨å…³ç³»ï¼ŒUI å¯èƒ½ä¼šçº¹ä¸ä¸åŠ¨ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-5">3. å®æˆ˜ï¼šæ‰‹å†™ä¸€ä¸ªTodoList</h3>
<p>æˆ‘ä»¬æ¥å†™ä¸€ä¸ªæœ€åŸºç¡€çš„ TodoListã€‚è™½ç„¶æˆ‘ä»¥å‰ä¸çˆ±å†™ CSSï¼Œä½† ArkUI çš„é“¾å¼è°ƒç”¨ç¡®å®è®©å¸ƒå±€å˜å¾—åƒå†™é€»è¾‘ä¸€æ ·æ¸…æ™°ã€‚åœ¨ç¼–å†™è¿™ä¸ªä¾‹å­çš„æ—¶å€™ä¹Ÿè®©æˆ‘æ¥è®²è§£ä¸€äº›ArkTSä¸­çš„è¯­æ³•ã€‚</p>
<p>ç»„ä»¶çš„å®šä¹‰ï¼Œåœ¨ArkTSä¸­ï¼Œå¦‚æœè¦å®šä¹‰ä¸€ä¸ªç»„ä»¶éœ€è¦ä½¿ç”¨ <code>struct</code> å…³é”®å­—æ¥å®šä¹‰ï¼Œè€Œä¸æ˜¯ç»§ç»­ä½¿ç”¨<code>class</code> ï¼Œé™¤äº†ä½¿ç”¨ <code>struct</code>ä»¥å¤–ï¼Œè¿˜éœ€è¦ä½¿ç”¨ <code>@Component</code> è£…é¥°å™¨æ¥ä¿®é¥°å®ƒã€‚ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬ä¼šæŠŠè·ŸUIæ— å…³çš„é€»è¾‘å°è£…åœ¨classä¸­ï¼Œè€Œstruct åˆ™ä¸“é—¨è´Ÿè´£UIçš„é€»è¾‘ã€‚</p>
<h4 data-id="heading-6">æ•°æ®ç»‘å®š</h4>
<p>ä¹‹å‰è¯´äº†ArkTSæ˜¯ä¸€ç§åŸºäºMVVMæ¨¡å‹çš„åŒå‘æ•°æ®ç»‘å®šã€‚éœ€è¦UIå“åº”çš„æ•°æ®éœ€è¦ä½¿ç”¨ <code>@State</code>è£…é¥°å™¨ä¿®é¥°ï¼Œå¦‚ä¸‹é¢è¿™ä¸ªç®€å•çš„ä¾‹å­</p>
<pre><code class="hljs language-kotlin" lang="kotlin">â€‹
<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct Index {
 Â <span class="hljs-meta">@State</span> message: string = <span class="hljs-string">'Hello World'</span>;
â€‹
 Â <span class="hljs-keyword">private</span> flag: boolean = <span class="hljs-literal">true</span>;
â€‹
 Â build() {
 Â  Â Row() {
 Â  Â  Â Column() {
 Â  Â  Â  Â Text(<span class="hljs-keyword">this</span>.message)
 Â  Â  Â  Â   .fontSize($r(<span class="hljs-string">'app.float.page_text_font_size'</span>))
 Â  Â  Â  Â   .fontWeight(FontWeight.Bold)
 Â  Â  Â  Â   .onClick(() =&gt; {
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.message = <span class="hljs-keyword">this</span>.flag ? <span class="hljs-string">'Welcome'</span> : <span class="hljs-string">"Hello World"</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.flag = !<span class="hljs-keyword">this</span>.flag;
 Â  Â  Â  Â   })
 Â  Â   }
 Â  Â   .width(<span class="hljs-string">'100%'</span>)
 Â   }
 Â   .height(<span class="hljs-string">'100%'</span>)
  }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2635675722764c35923cf26c307ffcc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-S55KD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770539220&amp;x-signature=VsgpVixIcQudneslsLEedoGLI5Y%3D" alt="iShot_2026-02-01_15.42.29" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°è¿™ç§æ•°æ®ç»‘å®šçš„æ–¹å¼ååˆ†çš„æ–¹ä¾¿ã€‚</p>
<p>æˆ‘ç°åœ¨è¦å±•ç¤ºä¸€ç§æ¯”è¾ƒåå‰ç«¯ç›´è§‰çš„æ¡ˆä¾‹ï¼Œæ¯”å¦‚çˆ¶å­ç»„ä»¶ä¼ é€’å‡½æ•°çš„æƒ…å†µã€‚</p>
<p>åœ¨ArkTSä¸­ï¼Œä¸å…è®¸è¿™æ ·çš„åšæ³•ï¼é™¤äº†ä¸€ç§æƒ…å†µä¾‹å¤–ï¼Œçˆ¶å­ä¹‹é—´ä¼ é€’å‡½æ•°ï¼Œåªèƒ½ä¼ é€’<code>@Builder</code>è£…é¥°å™¨ä¿®é¥°çš„å‡½æ•°ï¼</p>
<p>æˆ‘ä»¬æ¥çœ‹è¿™æ ·ä¸€ä¸ªä¾‹å­ã€‚åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰äº†ä¸€ä¸ªçŠ¶æ€msgï¼Œç„¶åå‘å­ç»„ä»¶ä¸­ä¼ é€’ä¸€ä¸ªä¿®æ”¹<code>msg</code> å€¼çš„å‡½æ•°ï¼Œè®©å­ç»„ä»¶çš„UIæ¥æ”¹å˜è¿™ä¸ªå€¼ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">Child</span> {
 Â <span class="hljs-meta">@Prop</span>
 Â <span class="hljs-attr">updateMessage</span>: <span class="hljs-function">(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
â€‹
 Â <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
 Â  Â <span class="hljs-title class_">Button</span>(<span class="hljs-string">'update parent message'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
 Â  Â  Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateMessage</span>(<span class="hljs-string">'from child msg'</span>);
 Â   })
  }
}
â€‹
<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">Index</span> {
 Â <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;
 Â <span class="hljs-keyword">private</span> <span class="hljs-attr">updateMessage</span>: <span class="hljs-function">(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
 Â  Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = msg;
  }
 Â <span class="hljs-keyword">private</span> <span class="hljs-attr">flag</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;
â€‹
 Â <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
 Â  Â <span class="hljs-title class_">Row</span>() {
 Â  Â  Â <span class="hljs-title class_">Column</span>() {
 Â  Â  Â  Â <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)
 Â  Â  Â  Â   .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-string">'app.float.page_text_font_size'</span>))
 Â  Â  Â  Â   .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)
 Â  Â  Â  Â   .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span> ? <span class="hljs-string">'Welcome'</span> : <span class="hljs-string">"Hello World"</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span>;
 Â  Â  Â  Â   })
 Â  Â  Â  Â <span class="hljs-title class_">Child</span>({ <span class="hljs-attr">updateMessage</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateMessage</span> })
 Â  Â   }
 Â  Â   .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
 Â   }
 Â   .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
  }
}
â€‹
</code></pre>
<p>ç¼–è¾‘é¡µé¢ä¸­å¹¶æ²¡æœ‰æç¤ºè¯­æ³•é”™è¯¯ï¼Œä½†æ˜¯ä¸€æ—¦è¿è¡Œï¼Œç¼–è¯‘å™¨è¿˜æ˜¯æŠ¥é”™äº†ã€‚ä»¥ä¸‹æ˜¯æŠ¥é”™ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Error</span> <span class="hljs-attr">message</span>:<span class="hljs-meta">@Component</span> <span class="hljs-string">'@Component '</span><span class="hljs-title class_">Child</span><span class="hljs-string">'[8]'</span>: <span class="hljs-title class_">Illegal</span> variable value error <span class="hljs-keyword">with</span> decorated variable <span class="hljs-meta">@Prop</span> <span class="hljs-string">'updateMessage'</span>: failed <span class="hljs-attr">validation</span>: <span class="hljs-string">'undefined, null, number, boolean, string, or Object but not function, not V2 @ObservedV2 / @Trace class, and makeObserved return value either, attempt to assign value type: '</span><span class="hljs-keyword">function</span><span class="hljs-string">', value: '</span><span class="hljs-literal">undefined</span><span class="hljs-string">'!
</span></code></pre>
<p>å¤§æ„å°±æ˜¯ä¸æ”¯æŒä¼ é€’å‡½æ•°ç±»å‹ï¼é‚£ä¹ˆåº”è¯¥å¦‚ä½•ä¿®æ”¹å‘¢ï¼Ÿåœ¨ArkTSä¸­ï¼Œå…è®¸å­ç»„ä»¶ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼æˆ‘ä»¬éœ€è¦åœ¨å­ç»„ä»¶ä¸­æŠŠçˆ¶ç»„ä»¶ä¼ é€’çš„å±æ€§ä½¿ç”¨ <code>@Link</code>è£…é¥°å™¨ä¿®é¥°ï¼Œè¿™è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªçˆ¶ç»„ä»¶ä¼ é€’è¿›æ¥çš„çŠ¶æ€ï¼Œå¹¶ä¸”åœ¨å­ç»„ä»¶ä¸­ä¿®æ”¹å®ƒæ—¶ï¼Œçˆ¶ç»„ä»¶ä¸­çš„å€¼ä¹Ÿä¼šå‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼</p>
<p>æˆ‘ä»¬æŠŠupdateMessage å˜ä¸ºä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¹¶ç”¨ <code>@Link</code>è£…é¥°å™¨ä¿®é¥°ï¼Œç„¶ååœ¨çˆ¶ç»„ä»¶ä¸­ä¼ é€’çˆ¶ç»„ä»¶çš„å€¼ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">â€‹
<span class="hljs-keyword">@Component</span>
struct Child {
 Â <span class="hljs-keyword">@Link</span>
 Â <span class="hljs-attribute">parentMsg</span>: string;
 Â 
  
 Â <span class="hljs-built_in">build</span>() {
 Â  Â <span class="hljs-selector-tag">Button</span>('update parent message')<span class="hljs-selector-class">.onClick</span>(() =&gt; {
 Â  Â  Â this<span class="hljs-selector-class">.parentMsg</span> = 'from Child Message';
 Â   })
  }
}
 Â 
 Â 
<span class="hljs-keyword">@Entry</span>
<span class="hljs-keyword">@Component</span>
struct Index {
  <span class="hljs-built_in">build</span>() {
 Â  Â ...
 Â  Â <span class="hljs-built_in">Child</span>({ parentMsg: this.message })
  } 
}
</code></pre>
<p>è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89144312d697457cb99f5aac862262d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-S55KD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770539220&amp;x-signature=Xl2BodH6P3yOdyNypMBZr0jgvi4%3D" alt="iShot_2026-02-01_15.58.24" loading="lazy"/></p>
<p>æœ‰äº†ä»¥ä¸Šçš„åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å¼€å‘ä¸€ä¸ªåŸºæœ¬çš„TodoListã€‚</p>
<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ª TodoList æ¡ˆä¾‹æ¥å±•ç¤º ArkTS çš„æ ¸å¿ƒè¯­æ³•ã€‚åœ¨é¸¿è’™ä¸­ï¼Œæˆ‘ä»¬æ¨èå°†æ•°æ®é€»è¾‘å°è£…åœ¨ <code>class</code> ä¸­ï¼Œè€Œ UI ç»“æ„å®šä¹‰åœ¨ <code>struct</code> å†…éƒ¨ã€‚</p>
<h4 data-id="heading-7">ä¸ºä»€ä¹ˆéœ€è¦ <code>@Observed</code> å’Œ <code>@ObjectLink</code>ï¼Ÿ</h4>
<p>åœ¨å¼€å‘ TodoList è¿™ç§åŒ…å«å¯¹è±¡æ•°ç»„çš„åˆ—è¡¨æ—¶ï¼Œç®€å•çš„ <code>@State</code> æ˜¯ä¸å¤Ÿçš„ã€‚</p>
<ol>
<li><strong><code>@State</code> çš„å±€é™ï¼š</strong> å®ƒåªèƒ½è§‚å¯Ÿåˆ°å˜é‡æœ¬èº«çš„å˜åŒ–ã€‚å¦‚æœä½ ä¿®æ”¹äº†æ•°ç»„ä¸­æŸä¸ªå¯¹è±¡æˆå‘˜çš„å†…éƒ¨å±æ€§ï¼ˆä¾‹å¦‚ <code>task.isCompleted = true</code>ï¼‰ï¼Œç”±äºæ•°ç»„çš„å¼•ç”¨åœ°å€æ²¡å˜ï¼ŒUI ä¸ä¼šè§¦å‘åˆ·æ–°ã€‚</li>
<li><strong><code>@Observed</code>ï¼š</strong> è£…é¥°åœ¨ç±»å®šä¹‰ä¸Šï¼Œä½¿ç±»æˆå‘˜çš„å±æ€§å˜åŒ–å¯ä»¥è¢«è¿½è¸ªã€‚</li>
<li><strong><code>@ObjectLink</code>ï¼š</strong> è£…é¥°åœ¨å­ç»„ä»¶çš„å˜é‡ä¸Šï¼Œç”¨æ¥æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„ <code>Observed</code> å¯¹è±¡ã€‚è¿™æ ·å­ç»„ä»¶ä¿®æ”¹å¯¹è±¡å±æ€§æ—¶ï¼Œçˆ¶ç»„ä»¶å¯¹åº”çš„ UI ä¹Ÿä¼šåŒæ­¥æ›´æ–°ã€‚</li>
</ol>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// 1. å®šä¹‰æ•°æ®æ¨¡å‹ï¼Œä½¿ç”¨ @Observed ç¡®ä¿å±æ€§å¯è¢«è¿½è¸ª</span>
<span class="hljs-keyword">@Observed</span>
class Task {
 Â id: number;
 Â <span class="hljs-attribute">content</span>: string = <span class="hljs-string">""</span>;
 Â isCompleted: boolean = false;
â€‹
 Â <span class="hljs-built_in">constructor</span>(id: number, content: string, isCompleted: boolean = false) {
 Â  Â this<span class="hljs-selector-class">.id</span> = id;
 Â  Â this<span class="hljs-selector-class">.content</span> = <span class="hljs-attribute">content</span>;
 Â  Â this<span class="hljs-selector-class">.isCompleted</span> = isCompleted;
  }
}
â€‹
<span class="hljs-comment">// 2. æŠ½ç¦»åˆ—è¡¨é¡¹å­ç»„ä»¶ï¼Œä½¿ç”¨ @ObjectLink åŒæ­¥çŠ¶æ€</span>
<span class="hljs-keyword">@Component</span>
struct TaskView {
 Â <span class="hljs-keyword">@ObjectLink</span> <span class="hljs-attribute">task</span>: Task;
â€‹
 Â <span class="hljs-built_in">build</span>() {
 Â  Â <span class="hljs-attribute">Flex</span>({ justifyContent: FlexAlign.SpaceAround }) {
 Â  Â  Â Text(this.task.id.toString())
 Â  Â  Â   <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">16</span>)
 Â  Â  Â   <span class="hljs-selector-class">.fontColor</span>('#<span class="hljs-number">333333</span>')
 Â  Â  Â   <span class="hljs-selector-class">.margin</span>({ right: <span class="hljs-number">10</span> })
 Â  Â  Â 
 Â  Â  Â Text(this.task.content)
 Â  Â  Â   <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">16</span>)
 Â  Â  Â   <span class="hljs-selector-class">.fontColor</span>('#<span class="hljs-number">333333</span>')
 Â  Â  Â   <span class="hljs-selector-class">.margin</span>({ right: <span class="hljs-number">10</span> })
 Â  Â  Â   <span class="hljs-selector-class">.decoration</span>({
 Â  Â  Â  Â  Â type: this.task.isCompleted ? TextDecorationType.LineThrough : TextDecorationType.None
 Â  Â  Â   })
 Â  Â  Â   <span class="hljs-selector-class">.layoutWeight</span>(<span class="hljs-number">1</span>)
â€‹
 Â  Â  Â Text(this.task.isCompleted ? "å·²å®Œæˆ" : "æœªå®Œæˆ")
 Â  Â  Â   <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">16</span>)
 Â  Â  Â   <span class="hljs-selector-class">.fontColor</span>(this.task.isCompleted ? '#<span class="hljs-number">00</span>AA00' : '#FF0000')
 Â  Â  Â   <span class="hljs-selector-class">.onClick</span>(() =&gt; {
 Â  Â  Â  Â  Â <span class="hljs-comment">// ä¿®æ”¹çŠ¶æ€ï¼ŒUI è‡ªåŠ¨å“åº”</span>
 Â  Â  Â  Â  Â this<span class="hljs-selector-class">.task</span><span class="hljs-selector-class">.isCompleted</span> = !this<span class="hljs-selector-class">.task</span><span class="hljs-selector-class">.isCompleted</span>
 Â  Â  Â   })
 Â   }
 Â   <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')
 Â   <span class="hljs-selector-class">.padding</span>(<span class="hljs-number">10</span>)
 Â   <span class="hljs-selector-class">.backgroundColor</span>('#FFFFFF')
 Â   <span class="hljs-selector-class">.borderRadius</span>(<span class="hljs-number">8</span>)
 Â   <span class="hljs-selector-class">.margin</span>({ bottom: <span class="hljs-number">10</span> })
  }
}
â€‹
<span class="hljs-comment">// 3. ä¸»é¡µé¢å®¹å™¨</span>
<span class="hljs-keyword">@Component</span>
export struct TodoList {
 Â <span class="hljs-keyword">@State</span> <span class="hljs-attribute">list</span>: Task[] = [
 Â  Â new Task(<span class="hljs-number">1</span>, <span class="hljs-string">"ç†Ÿæ‚‰é¡¹ç›®ç»“æ„"</span>),
 Â  Â new Task(<span class="hljs-number">2</span>, <span class="hljs-string">"è¿è¡Œæ¨¡æ‹Ÿå™¨"</span>, true),
 Â  Â new Task(<span class="hljs-number">3</span>, <span class="hljs-string">"ç¼–å†™ç¬¬ä¸€ä¸ªç»„ä»¶"</span>)
  ];
â€‹
 Â <span class="hljs-built_in">build</span>() {
 Â  Â <span class="hljs-built_in">Column</span>() {
 Â  Â  Â Text("å¾…åŠæ¸…å•")
 Â  Â  Â   <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">24</span>)
 Â  Â  Â   <span class="hljs-selector-class">.fontWeight</span>(FontWeight.Bold)
 Â  Â  Â   <span class="hljs-selector-class">.margin</span>(<span class="hljs-number">20</span>)
â€‹
 Â  Â  Â <span class="hljs-built_in">ForEach</span>(this.list, (item: Task) =&gt; {
 Â  Â  Â  Â <span class="hljs-built_in">TaskView</span>({ task: item });
 Â  Â   }, (item: Task) =&gt; item<span class="hljs-selector-class">.id</span><span class="hljs-selector-class">.toString</span>());
 Â   }
 Â   <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')
 Â   <span class="hljs-selector-class">.height</span>('<span class="hljs-number">100%</span>')
 Â   <span class="hljs-selector-class">.backgroundColor</span>('#F1F3F5')
  }
}
</code></pre>
<h3 data-id="heading-8">4. æ€»ç»“</h3>
<p>é€šè¿‡ TodoList çš„ç»ƒä¹ ï¼Œå¯ä»¥å‘ç°é¸¿è’™å¼€å‘çš„é—¨æ§›å¹¶ä¸åœ¨äºè¯­è¨€ï¼Œè€Œåœ¨äºå¯¹ <strong>Stage æ¨¡å‹</strong>å’Œ<strong>çŠ¶æ€è£…é¥°å™¨</strong>çš„ç†è§£ã€‚</p>
<p>å¯¹äºå‰ç«¯å¼€å‘è€…ï¼ŒArkUI çš„ç»„ä»¶åŒ–æ€ç»´æ˜¯äº’é€šçš„ï¼Œä½†éœ€è¦é¢å¤–å…³æ³¨çˆ¶å­ç»„ä»¶é—´å…³äºå‡½æ•°ä¼ é€’çš„é™åˆ¶ã€‚å¯¹äºæ¸¸æˆå¼€å‘è€…ï¼Œä»æ‰‹åŠ¨æ›´æ–° UI è½¬å‘å£°æ˜å¼çš„æ•°æ®é©±åŠ¨ï¼Œèƒ½å¤Ÿæ˜¾è‘—å‡å°‘åœ¨ç•Œé¢ç»´æŠ¤ä¸Šçš„é€»è¾‘ä»£ç é‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº¿çº§æ´ªæµä¸­çš„æ¶æ„èŠ­è•¾ï¼šç¤¾äº¤ç½‘ç»œé¦–é¡µæ—¶é—´çº¿çš„è®¾è®¡è‰ºæœ¯]]></title>    <link>https://juejin.cn/post/7601757036485902346</link>    <guid>https://juejin.cn/post/7601757036485902346</guid>    <pubDate>2026-02-01T07:52:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601757036485902346" data-draft-id="7601757036485754890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº¿çº§æ´ªæµä¸­çš„æ¶æ„èŠ­è•¾ï¼šç¤¾äº¤ç½‘ç»œé¦–é¡µæ—¶é—´çº¿çš„è®¾è®¡è‰ºæœ¯"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-02-01T07:52:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ä¸ªéª‡å®¢"/> <meta itemprop="url" content="https://juejin.cn/user/644760908336608"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº¿çº§æ´ªæµä¸­çš„æ¶æ„èŠ­è•¾ï¼šç¤¾äº¤ç½‘ç»œé¦–é¡µæ—¶é—´çº¿çš„è®¾è®¡è‰ºæœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/644760908336608/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ä¸ªéª‡å®¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T07:52:19.000Z" title="Sun Feb 01 2026 07:52:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨Yâ€”â€”ä¸€ä¸ªæ‹¥æœ‰<strong>10äº¿æœˆæ´»</strong>çš„å›½æ°‘çº§ç¤¾äº¤å¹³å°â€”â€”ä¸Šåˆšåˆšç‚¹å‡»äº†å‘å¸ƒæŒ‰é’®ã€‚ä½ å¯èƒ½æ²¡æœ‰æ„è¯†åˆ°ï¼Œæ­¤åˆ»çš„å¹³å°ï¼Œ<strong>æ¯å¤©æ­£ååç€è¿‘8äº¿æ¡æ–°é²œåŠ¨æ€</strong>ï¼Œå¹³å‡æ¯ç§’å°±æœ‰è¿‘ä¸‡æ¡å†…å®¹è¯•å›¾äº‰å¤ºçœ¼çƒã€‚è‹¥é‡åˆ°"å…¨æ°‘ç››äº‹"æˆ–"é¡¶æµç©ºé™"ï¼Œæµé‡å³°å€¼<strong>ç¬é—´å†²ç ´æ¯ç§’30ä¸‡æ¡</strong>ä¹Ÿç»éå¤©æ–¹å¤œè°­ã€‚</p>
<p>è¿™æ—©å·²ä¸æ˜¯æ™®é€šçš„ä¿¡æ¯å±•ç¤ºï¼Œè€Œæ˜¯ä¸€åœºéœ€è¦æé«˜ç²¾åº¦ç¼–æ’çš„<strong>æ•°æ®é£æš´</strong>ã€‚ä»Šå¤©ï¼Œè®©æˆ‘ä»¬æ·±å…¥å¹•åï¼Œæ¢ç©¶é‚£ä¸ªè®©ä½ æµè¿å¿˜è¿”çš„"é¦–é¡µæ—¶é—´çº¿"ï¼Œå¦‚ä½•åœ¨å¦‚æ­¤ææ€–çš„è§„æ¨¡ä¸‹ï¼Œä¾ç„¶ä¿æŒä»¤äººæ„‰æ‚¦çš„æµç•…ã€‚</p>
<h3 data-id="heading-0">ç¬¬ä¸€å¹•ï¼šæœ´ç´ çš„å¼€ç«¯ä¸æ•°æ®ç»“æ„</h3>
<p>æœ€åˆçš„æƒ³æ³•æ€»æ˜¯ç›´æ¥è€Œå•çº¯ï¼šæ¯æ¬¡ç”¨æˆ·ä¸‹æ‹‰åˆ·æ–°ï¼Œå®¢æˆ·ç«¯å°±å»æ•°æ®åº“è¯¢é—®ï¼š"æˆ‘å…³å¿ƒçš„äººéƒ½æ›´æ–°äº†ä»€ä¹ˆï¼Ÿ"</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹æ”¯æ’‘è¿™ä¸€åŠŸèƒ½çš„æ ¸å¿ƒæ•°æ®æ¨¡å‹è®¾è®¡ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">erDiagram
    USER ||--o{ POST : "publishes"
    USER ||--o{ FOLLOW_RELATIONSHIP : "follows as follower"
    USER ||--o{ FOLLOW_RELATIONSHIP : "is followed as followee"
    
    POST {
        bigint id PK
        bigint author_id FK
        text content
        timestamp created_at
    }
    
    USER {
        bigint id PK
        varchar name
        varchar avatar_url
    }
    
    FOLLOW_RELATIONSHIP {
        bigint follower_id FK
        bigint followee_id FK
    }
</code></pre>
<p>åŸºäºè¿™ä¸ªæ¨¡å‹ï¼Œå½“è¯·æ±‚ä½ çš„é¦–é¡µæ—¶ï¼Œç³»ç»Ÿä¼šæ‰§è¡Œç±»ä¼¼ä¸‹é¢çš„æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> post.<span class="hljs-operator">*</span>, user.<span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> post
  <span class="hljs-keyword">JOIN</span> follow_relationship <span class="hljs-keyword">ON</span> post.author_id <span class="hljs-operator">=</span> follow_relationship.followee_id
  <span class="hljs-keyword">JOIN</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">ON</span> post.author_id <span class="hljs-operator">=</span> user.id
  <span class="hljs-keyword">WHERE</span> follow_relationship.follower_id <span class="hljs-operator">=</span> current_user_id
  <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> post.created_at <span class="hljs-keyword">DESC</span>
  LIMIT <span class="hljs-number">1000</span>
</code></pre>
<p><strong>é€»è¾‘æ¸…æ™°æ˜“æ‡‚</strong>ï¼šæ‰¾åˆ°ä½ å…³æ³¨çš„äººï¼Œå–å‡ºä»–ä»¬çš„åŠ¨æ€ï¼ŒæŒ‰æ—¶é—´æ’åºï¼Œå‘ˆç°æœ€æ–°çš„1000æ¡ã€‚</p>
<p>ä½†è®©æˆ‘ä»¬è®¡ç®—ä¸€ä¸‹ç°å®çš„æ®‹é…·ï¼š
å‡è®¾æœ‰1äº¿ç”¨æˆ·åŒæ—¶åœ¨çº¿ï¼Œå¹³å‡æ¯äººæ¯2ç§’è¯·æ±‚ä¸€æ¬¡ã€‚è¿™å°±æ˜¯<strong>æ¯ç§’5000ä¸‡æ¬¡æŸ¥è¯¢</strong>ã€‚æ›´å¯æ€•çš„æ˜¯ï¼Œå¦‚æœå¹³å‡æ¯äººå…³æ³¨äº†500ä¸ªè´¦å·ï¼Œæ•°æ®åº“ä¸ºäº†å‡†å¤‡ä½ çš„ä¸€æ¬¡åˆ·æ–°ï¼Œéœ€è¦åœ¨500ä»½æ•°æ®ä¸­è¿›è¡Œå…³è”ã€æ’åºä¸åˆå¹¶â€¦â€¦ æŠ˜ç®—ä¸‹æ¥ï¼Œç›¸å½“äºæ¯ç§’è¦è¿›è¡Œ <strong>è¶…è¿‡250äº¿æ¬¡</strong> çš„åº•å±‚æ•°æ®æ“ä½œã€‚</p>
<p><strong>æ•°æ®åº“çš„å“€é¸£</strong>ï¼š"è¿™å‹åŠ›ï¼Œæˆ‘æ‰¿å—ä¸æ¥ã€‚" ğŸ’¥</p>
<p>è¿™ç§ç®€å•çš„<strong>æ‹‰å–ï¼ˆPullï¼‰</strong> æ¨¡å¼ï¼Œåœ¨é¢å¯¹å›½æ°‘çº§æ•°æ®æ´ªæµæ—¶ï¼Œå¦‚åŒä¼å›¾ç”¨ä¸€æ ¹æ°´ç®¡ç–æµšé•¿æ±Ÿï¼Œä»è®¾è®¡ä¸Šå°±æ³¨å®šäº†å¤±è´¥ã€‚</p>
<h3 data-id="heading-1">ç¬¬äºŒå¹•ï¼šèŒƒå¼è½¬æ¢ï¼šä»"æ‹‰å–"åˆ°"æ¨é€"</h3>
<p>å·¥ç¨‹å¸ˆä»¬æ„è¯†åˆ°é—®é¢˜çš„å…³é”®ï¼šä¸ºä½•è¦è®©æµ·é‡è¯·æ±‚åå¤"æ‹‰å–"é‡å¤æ•°æ®ï¼Ÿä½•ä¸ä¸»åŠ¨"æ¨é€"ä¸€æ¬¡ï¼Ÿ</p>
<p>äºæ˜¯ï¼Œæ ¸å¿ƒæ¨¡å¼ <strong>æ‰‡å‡ºï¼ˆFan-outï¼‰</strong> è¢«å¼•å…¥ã€‚</p>
<p>æµç¨‹è¢«å½»åº•é‡æ„ï¼š</p>
<ol>
<li><strong>å†…å®¹å‘å¸ƒ</strong>ï¼šä½ åœ¨Yå‘å¸ƒä¸€æ¡åŠ¨æ€ã€‚</li>
<li><strong>ç²‰ä¸åˆ—è¡¨æŸ¥è¯¢</strong>ï¼šç³»ç»Ÿç«‹åˆ»æ£€ç´¢ä½ æ‰€æœ‰çš„ç²‰ä¸ï¼ˆå‡è®¾å¹³å‡500äººï¼‰ã€‚</li>
<li><strong>å¼‚æ­¥æŠ•é€’</strong>ï¼šç³»ç»Ÿå°†è¿™åˆ™æ–°å†…å®¹ï¼Œå¼‚æ­¥"å†™å…¥"åˆ°è¿™500ä½ç²‰ä¸å„è‡ªé¢„ç½®çš„ <strong>ä¸ªäººæ—¶é—´çº¿ç¼“å­˜</strong> ä¸­ã€‚</li>
</ol>
<p>è¿™ä¸ª"ç¼“å­˜"ï¼Œåœ¨æ¶æ„ä¸Šè¢«ç§°ä¸º<strong>ç‰©åŒ–è§†å›¾ï¼ˆMaterialized Viewï¼‰</strong>ã€‚å®ƒéµå¾ª <strong>ä»¥ç©ºé—´å’Œå†™å…¥å¤æ‚åº¦æ¢å–è¯»å–æ€§èƒ½</strong> çš„é»„é‡‘æ³•åˆ™ã€‚è¯»å–é¦–é¡µå˜å¾—æå¿«â€”â€”ä»…æ˜¯ä»ä¸“å±ç¼“å­˜ä¸­é¡ºåºè¯»å–ã€‚ä½†å‘å¸ƒåŠ¨æ€çš„æˆæœ¬å˜é«˜ï¼Œä»"ä¸€æ¬¡å†™å…¥"å˜ä¸º"500æ¬¡å†™å…¥"ã€‚</p>
<p>è®¡ç®—æ–°æ–¹æ¡ˆçš„æˆæœ¬ï¼šå‡è®¾æ¯ç§’äº§ç”Ÿ1.2ä¸‡æ¡æ–°åŠ¨æ€ï¼Œå¹³å‡æ‰‡å‡ºç³»æ•°ä¸º500ï¼Œåˆ™æ¯ç§’éœ€å®Œæˆ <strong>600ä¸‡æ¬¡</strong> ç¼“å­˜å†™å…¥ã€‚è¿™ä¸ªæ•°å­—ä¾ç„¶å·¨å¤§ï¼Œä½†ç›¸æ¯”ä¹‹å‰æ¯ç§’<strong>250äº¿æ¬¡</strong>çš„å…³è”æŸ¥è¯¢ï¼Œå·²ä»"ç†è®ºç¾éš¾"é™ç»´ä¸º"å¯è§£å†³çš„å·¥ç¨‹æŒ‘æˆ˜"ã€‚</p>
<p><strong>ç³»ç»Ÿé€»è¾‘</strong>ï¼š"ä»è¢«åŠ¨æŸ¥è¯¢ï¼ˆPullï¼‰åˆ°ä¸»åŠ¨åˆ†å‘ï¼ˆPushï¼‰ï¼Œè¿™æ˜¯æœ¬è´¨çš„æ•ˆç‡é£è·ƒã€‚"</p>
<h3 data-id="heading-2">ç¬¬ä¸‰å¹•ï¼šåº”å¯¹æç«¯ï¼šé•¿å°¾ä¸å·¨å¤´çš„æŒ‘æˆ˜</h3>
<p>çœŸå®çš„ç¤¾äº¤å›¾è°±éµå¾ªå¹‚å¾‹åˆ†å¸ƒã€‚è¿™å¥—"æ¨é€ç³»ç»Ÿ"é¢ä¸´ä¸¤ç±»æç«¯åœºæ™¯ï¼š</p>
<ol>
<li>
<p><strong>é‡åº¦å…³æ³¨è€…</strong>ï¼šç”¨æˆ·Aå…³æ³¨äº†ä¸Šä¸‡ä¸ªè´¦å·ã€‚æ¯ç§’æ¶Œå…¥å…¶ä¸ªäººç¼“å­˜çš„æ•°æ®é‡æå¤§ã€‚å·¥ç¨‹æ´å¯Ÿå‘ç°ï¼šæ­¤ç±»ç”¨æˆ·å­˜åœ¨ä¸¥é‡çš„"ä¿¡æ¯è¿‡è½½"ï¼Œå®é™…æ¶ˆè´¹ç‡å¾ˆä½ã€‚å› æ­¤ç³»ç»Ÿå¼•å…¥ <strong>é‡‡æ ·é™çº§ï¼ˆSamplingï¼‰</strong> ï¼šå¯¹å…¶æ—¶é—´çº¿è¿›è¡Œæ™ºèƒ½é‡‡æ ·ï¼Œä»…ä¿è¯éƒ¨åˆ†æ ¸å¿ƒå†…å®¹çš„æŠ•é€’ã€‚ç”¨æˆ·ä½“éªŒï¼š"ä¿¡æ¯æµä¼¼ä¹æ›´æ¸…çˆ½äº†ï¼Ÿ"ï¼ˆç³»ç»Ÿï¼šæˆåŠŸå¸è½½å†—ä½™è´Ÿè½½ğŸ™ƒï¼‰</p>
</li>
<li>
<p><strong>ç°è±¡çº§åˆ›ä½œè€…</strong>ï¼šä¾‹å¦‚ä¸€ä½åæ‹¥<strong>2äº¿ç²‰ä¸</strong>çš„è¶…çº§æ˜æ˜Ÿå‘å¸ƒåŠ¨æ€ã€‚åŒæ­¥æ‰‡å‡ºä»»åŠ¡åˆ—è¡¨ç¬é—´çˆ†ç‚¸ï¼šéœ€è¦æ‰§è¡Œ<strong>2äº¿æ¬¡</strong>å†™å…¥ã€‚è‹¥æŒ‰å¸¸è§„æµç¨‹ï¼Œæ•´ä¸ªåˆ†å‘é“¾è·¯ä¼šç«‹åˆ»é˜»å¡ã€‚</p>
</li>
</ol>
<p>å¯¹æ­¤ï¼Œä»»ä½•å½¢å¼çš„ä¸¢å¼ƒéƒ½æ˜¯ä¸å¯æ¥å—çš„ã€‚å·¥ç¨‹ç­–ç•¥æ˜¯ï¼š<strong>ä¸ºå·¨å¤´å¯ç”¨ä¸“ç”¨é€šé“</strong>ã€‚</p>
<ul>
<li><strong>çƒ­ç‚¹åˆ†ç¦»</strong>ï¼šæ˜æ˜Ÿçš„åŠ¨æ€ä¸è¿›å…¥å¸¸è§„çš„å®æ—¶æ‰‡å‡ºæµæ°´çº¿ï¼Œè€Œæ˜¯è¢«æ ‡è®°å¹¶å†™å…¥ä¸€ä¸ª<strong>ç‹¬ç«‹çš„çƒ­ç‚¹å†…å®¹æ± </strong>ã€‚</li>
<li><strong>è¯»å–æ—¶åˆå¹¶</strong>ï¼šå½“æ™®é€šç”¨æˆ·è¯»å–å…¶ç‰©åŒ–æ—¶é—´çº¿æ—¶ï¼Œç³»ç»Ÿåœ¨è¿”å›ç»“æœå‰ï¼Œå®æ—¶åœ°ä»çƒ­ç‚¹æ± ä¸­æŸ¥è¯¢å¹¶åˆå¹¶å…¶å…³æ³¨çš„æ˜æ˜Ÿæœ€æ–°åŠ¨æ€ã€‚è¿™å·§å¦™åœ°å°†ä¸å¯æ‰¿å—çš„<strong>åŒæ­¥å†™å…¥æ´ªå³°</strong>ï¼Œè½¬åŒ–ä¸ºäº†å¯è¢«ç¼“å­˜å’Œæ°´å¹³æ‰©å±•çš„<strong>è¯»å–æ—¶æŸ¥è¯¢å‹åŠ›</strong>ã€‚</li>
</ul>
<p><strong>ç³»ç»Ÿæ—¥å¿—</strong>ï¼š"æœåŠ¡ä¸€ä¸ªå·¨å¤´ï¼Œå…¶æ•°æ®æ³¢åŠ¨å ªæ¯”ä¸€åœºæ•°å­—æµ·å•¸ã€‚ä½†æ­£æ˜¯ä»–ä»¬ï¼Œå®šä¹‰äº†å¹³å°çš„ç”Ÿæ€é«˜åº¦ã€‚"</p>
<h3 data-id="heading-3">æ€»ç»“ï¼šåœ¨æ€§èƒ½ä¸æˆæœ¬çš„é’¢ä¸ä¸Šä¼˜é›…è¡Œèµ°</h3>
<p>Yç¤¾äº¤å¹³å°é¦–é¡µæ—¶é—´çº¿çš„è®¾è®¡æ¼”è¿›ï¼Œæ˜¯ä¸€åœºå…¸å‹çš„å¤§è§„æ¨¡ç³»ç»Ÿ<strong>æ¶æ„æƒè¡¡å®è·µ</strong>ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒç­–ç•¥è½¬æ¢</strong>ï¼šä»ç®€å•ä½†ä¸å¯è¡Œçš„<strong>æ‹‰å–ï¼ˆPullï¼‰</strong> æ¨¡å‹ï¼Œæœæ–­è½¬å‘äº†åŸºäº<strong>æ‰‡å‡ºï¼ˆFan-outï¼‰</strong> çš„<strong>æ¨é€ï¼ˆPushï¼‰</strong> æ¶æ„ï¼Œè¿™æ˜¯åº”å¯¹æµ·é‡å¹¶å‘è¯»å–çš„æ ¹æœ¬æ€§æ–¹æ¡ˆã€‚</li>
<li><strong>å…³é”®ç‰ºç‰²ä¸æ”¶è·</strong>ï¼šå¼•å…¥<strong>ç‰©åŒ–è§†å›¾ï¼ˆMaterialized Viewï¼‰</strong>ï¼Œæ˜æ™ºåœ°<strong>ä»¥æ›´é«˜çš„å†™å…¥æˆæœ¬å’Œå­˜å‚¨ç©ºé—´ä¸ºä»£ä»·</strong>ï¼Œæ¢å–äº†è¯»å–ç«¯çš„å“åº”é€Ÿåº¦ï¼Œå®ç°äº†ç”¨æˆ·ä½“éªŒçš„è´¨çš„é£è·ƒã€‚</li>
<li><strong>åº”å¯¹ç°å®å¤æ‚æ€§</strong>ï¼šæ²¡æœ‰ä¸€ç§æ¶æ„èƒ½é€šåƒæ‰€æœ‰åœºæ™¯ã€‚é€šè¿‡ <strong>è¯»å†™åˆ†ç¦»</strong> å°†æ˜æ˜ŸåŠ¨æ€å¯¼å…¥<strong>çƒ­ç‚¹å†…å®¹æ± </strong>ï¼Œä»¥åŠå¯¹è¶…é‡åº¦ç”¨æˆ·æ—¶é—´çº¿è¿›è¡Œ<strong>é‡‡æ ·é™çº§</strong>ï¼Œç³»ç»Ÿå·§å¦™åœ°é¿å¼€äº†å¹‚å¾‹åˆ†å¸ƒå¸¦æ¥çš„â€œé•¿å°¾â€ä¸â€œå·¨å¤´â€é™·é˜±ï¼Œç¡®ä¿äº†æ•´ä½“çš„ç¨³å®šæ€§ä¸èµ„æºåˆ©ç”¨ç‡ã€‚</li>
</ul>
<p>æœ€ç»ˆï¼Œè¿™å¥—ç»„åˆæ–¹æ¡ˆå±•ç¤ºäº†ä¸€ä¸ªæ ¸å¿ƒå·¥ç¨‹å“²å­¦ï¼š<strong>ä¼˜ç§€çš„æ¶æ„ä¸æ˜¯å¯»æ‰¾â€œå®Œç¾â€çš„è§£ï¼Œè€Œæ˜¯åœ¨è¯¸å¤šçº¦æŸä¸‹ï¼ˆæ€§èƒ½ã€æˆæœ¬ã€å¤æ‚åº¦ï¼‰å¯»æ‰¾åˆ°é‚£ä¸ªâ€œæ°åˆ°å¥½å¤„â€çš„å¹³è¡¡ç‚¹</strong>ã€‚å½“ä½ åœ¨ç¤¾äº¤åª’ä½“ä¸Šæµç•…åœ°åˆ·æ–°ä¿¡æ¯æµæ—¶ï¼Œä½ æ‰€ä½“éªŒåˆ°çš„æ­£æ˜¯è¿™ç§ç²¾å¯†æƒè¡¡åçš„ç»“æœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PythonåŸºæœ¬æ•°æ®ç±»å‹å’Œæ‰“å°æŒ‡å—]]></title>    <link>https://juejin.cn/post/7601046076944334863</link>    <guid>https://juejin.cn/post/7601046076944334863</guid>    <pubDate>2026-02-01T06:29:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601046076944334863" data-draft-id="7601077290681925684" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PythonåŸºæœ¬æ•°æ®ç±»å‹å’Œæ‰“å°æŒ‡å—"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-02-01T06:29:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xq9527"/> <meta itemprop="url" content="https://juejin.cn/user/1239904848712184"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PythonåŸºæœ¬æ•°æ®ç±»å‹å’Œæ‰“å°æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904848712184/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xq9527
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T06:29:03.000Z" title="Sun Feb 01 2026 06:29:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Python åŸºæœ¬æ•°æ®ç±»å‹å’Œæ‰“å°æŒ‡å—</h2>
<h3 data-id="heading-1">ç›®å½•</h3>
<ol>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63342%2FmarkdownPreview%2F1473041073%2Fmarkdown-preview-index-704308761.html%3F_ijt%3Dupvsp4f32qdp5s5suknfgpkl1g%23%25E6%25A6%2582%25E8%25BF%25B0" target="_blank" title="http://localhost:63342/markdownPreview/1473041073/markdown-preview-index-704308761.html?_ijt=upvsp4f32qdp5s5suknfgpkl1g#%E6%A6%82%E8%BF%B0" ref="nofollow noopener noreferrer">æ¦‚è¿°</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63342%2FmarkdownPreview%2F1473041073%2Fmarkdown-preview-index-704308761.html%3F_ijt%3Dupvsp4f32qdp5s5suknfgpkl1g%23%25E5%259F%25BA%25E6%259C%25AC%25E6%2595%25B0%25E6%258D%25AE%25E7%25B1%25BB%25E5%259E%258B" target="_blank" title="http://localhost:63342/markdownPreview/1473041073/markdown-preview-index-704308761.html?_ijt=upvsp4f32qdp5s5suknfgpkl1g#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" ref="nofollow noopener noreferrer">åŸºæœ¬æ•°æ®ç±»å‹</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63342%2FmarkdownPreview%2F1473041073%2Fmarkdown-preview-index-704308761.html%3F_ijt%3Dupvsp4f32qdp5s5suknfgpkl1g%23%25E5%258F%2598%25E9%2587%258F%25E5%2591%25BD%25E5%2590%258D%25E8%25A7%2584%25E5%2588%2599" target="_blank" title="http://localhost:63342/markdownPreview/1473041073/markdown-preview-index-704308761.html?_ijt=upvsp4f32qdp5s5suknfgpkl1g#%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99" ref="nofollow noopener noreferrer">å˜é‡å‘½åè§„åˆ™</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63342%2FmarkdownPreview%2F1473041073%2Fmarkdown-preview-index-704308761.html%3F_ijt%3Dupvsp4f32qdp5s5suknfgpkl1g%23%25E6%2589%2593%25E5%258D%25B0%25E8%25BE%2593%25E5%2587%25BA-print" target="_blank" title="http://localhost:63342/markdownPreview/1473041073/markdown-preview-index-704308761.html?_ijt=upvsp4f32qdp5s5suknfgpkl1g#%E6%89%93%E5%8D%B0%E8%BE%93%E5%87%BA-print" ref="nofollow noopener noreferrer">æ‰“å°è¾“å‡º (print)</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63342%2FmarkdownPreview%2F1473041073%2Fmarkdown-preview-index-704308761.html%3F_ijt%3Dupvsp4f32qdp5s5suknfgpkl1g%23%25E7%2594%25A8%25E6%2588%25B7%25E8%25BE%2593%25E5%2585%25A5-input" target="_blank" title="http://localhost:63342/markdownPreview/1473041073/markdown-preview-index-704308761.html?_ijt=upvsp4f32qdp5s5suknfgpkl1g#%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5-input" ref="nofollow noopener noreferrer">ç”¨æˆ·è¾“å…¥ (input)</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63342%2FmarkdownPreview%2F1473041073%2Fmarkdown-preview-index-704308761.html%3F_ijt%3Dupvsp4f32qdp5s5suknfgpkl1g%23%25E5%25AD%2597%25E7%25AC%25A6%25E4%25B8%25B2%25E6%25A0%25BC%25E5%25BC%258F%25E5%258C%2596" target="_blank" title="http://localhost:63342/markdownPreview/1473041073/markdown-preview-index-704308761.html?_ijt=upvsp4f32qdp5s5suknfgpkl1g#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96" ref="nofollow noopener noreferrer">å­—ç¬¦ä¸²æ ¼å¼åŒ–</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63342%2FmarkdownPreview%2F1473041073%2Fmarkdown-preview-index-704308761.html%3F_ijt%3Dupvsp4f32qdp5s5suknfgpkl1g%23%25E7%25B1%25BB%25E5%259E%258B%25E8%25BD%25AC%25E6%258D%25A2" target="_blank" title="http://localhost:63342/markdownPreview/1473041073/markdown-preview-index-704308761.html?_ijt=upvsp4f32qdp5s5suknfgpkl1g#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2" ref="nofollow noopener noreferrer">ç±»å‹è½¬æ¢</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63342%2FmarkdownPreview%2F1473041073%2Fmarkdown-preview-index-704308761.html%3F_ijt%3Dupvsp4f32qdp5s5suknfgpkl1g%23%25E6%259D%25A1%25E4%25BB%25B6%25E8%25AF%25AD%25E5%258F%25A5" target="_blank" title="http://localhost:63342/markdownPreview/1473041073/markdown-preview-index-704308761.html?_ijt=upvsp4f32qdp5s5suknfgpkl1g#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5" ref="nofollow noopener noreferrer">æ¡ä»¶è¯­å¥</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63342%2FmarkdownPreview%2F1473041073%2Fmarkdown-preview-index-704308761.html%3F_ijt%3Dupvsp4f32qdp5s5suknfgpkl1g%23%25E5%25AE%259E%25E7%2594%25A8%25E7%25A4%25BA%25E4%25BE%258B" target="_blank" title="http://localhost:63342/markdownPreview/1473041073/markdown-preview-index-704308761.html?_ijt=upvsp4f32qdp5s5suknfgpkl1g#%E5%AE%9E%E7%94%A8%E7%A4%BA%E4%BE%8B" ref="nofollow noopener noreferrer">å®ç”¨ç¤ºä¾‹</a></li>
</ol>
<h3 data-id="heading-2">æ¦‚è¿°</h3>
<p>Pythonæ˜¯ä¸€ç§ç®€æ´æ˜“è¯»çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„å†…ç½®æ•°æ®ç±»å‹ã€‚æŒæ¡åŸºæœ¬æ•°æ®ç±»å‹å’Œæ‰“å°è¾“å‡ºæ˜¯å­¦ä¹ Pythonçš„ç¬¬ä¸€æ­¥ï¼Œä¹Ÿæ˜¯ç¼–ç¨‹çš„åŸºç¡€æŠ€èƒ½ã€‚</p>
<h3 data-id="heading-3">åŸºæœ¬æ•°æ®ç±»å‹</h3>
<h4 data-id="heading-4">1. æ•°å€¼ç±»å‹</h4>
<h5 data-id="heading-5">æ•´æ•° (int)</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ­£æ•´æ•°</span>
<span class="hljs-attr">x</span> = <span class="hljs-number">10</span>
<span class="hljs-attr">age</span> = <span class="hljs-number">18</span>
<span class="hljs-attr">myNum</span> = <span class="hljs-number">123</span>
<span class="hljs-attr">myNumber</span> = <span class="hljs-number">456</span>
<span class="hljs-attr">_Number</span> = <span class="hljs-number">789</span>

<span class="hljs-comment"># è´Ÿæ•´æ•°</span>
<span class="hljs-attr">negative_num</span> = -<span class="hljs-number">5</span>

<span class="hljs-comment"># å¤§æ•´æ•°ï¼ˆPythonæ”¯æŒä»»æ„ç²¾åº¦ï¼‰</span>
<span class="hljs-attr">big_number</span> = <span class="hljs-number">123456789012345678901234567890</span>

print(x)        <span class="hljs-comment"># è¾“å‡º: 10</span>
print(age)      <span class="hljs-comment"># è¾“å‡º: 18</span>
print(myNum)    <span class="hljs-comment"># è¾“å‡º: 123</span>
</code></pre>
<h5 data-id="heading-6">æµ®ç‚¹æ•° (float)</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å°æ•°</span>
<span class="hljs-attr">y</span> = <span class="hljs-number">3.14</span>
<span class="hljs-attr">pi</span> = <span class="hljs-number">3.14159</span>
<span class="hljs-attr">temperature</span> = -<span class="hljs-number">2.5</span>

<span class="hljs-comment"># ç§‘å­¦è®¡æ•°æ³•</span>
<span class="hljs-attr">scientific</span> = <span class="hljs-number">1.23</span>e-<span class="hljs-number">4</span>  <span class="hljs-comment"># 0.000123</span>

print(y)           <span class="hljs-comment"># è¾“å‡º: 3.14</span>
print(f"Ï€çš„å€¼æ˜¯: {pi}")
</code></pre>
<h4 data-id="heading-7">2. å­—ç¬¦ä¸² (str)</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å•å¼•å·å­—ç¬¦ä¸²</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"Alice"</span>
<span class="hljs-attr">the_name</span> = <span class="hljs-string">"name"</span>
<span class="hljs-attr">letter</span> = <span class="hljs-string">"abhbabsbbabw"</span>

<span class="hljs-comment"># åŒå¼•å·å­—ç¬¦ä¸²</span>
<span class="hljs-attr">message</span> = <span class="hljs-string">"Hello, World!"</span>

<span class="hljs-comment"># å¤šè¡Œå­—ç¬¦ä¸²</span>
<span class="hljs-attr">multi_line</span> = <span class="hljs-string">"""è¿™æ˜¯ç¬¬ä¸€è¡Œ
è¿™æ˜¯ç¬¬äºŒè¡Œ
è¿™æ˜¯ç¬¬ä¸‰è¡Œ"""</span>

<span class="hljs-comment"># å­—ç¬¦ä¸²æ“ä½œ</span>
<span class="hljs-attr">upper_letter</span> = letter.upper()  <span class="hljs-comment"># è½¬æ¢ä¸ºå¤§å†™</span>
print(upper_letter)            <span class="hljs-comment"># è¾“å‡º: ABHBABSBBABW</span>
print(name)                    <span class="hljs-comment"># è¾“å‡º: Alice</span>
</code></pre>
<h4 data-id="heading-8">3. å¸ƒå°”å€¼ (bool)</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¸ƒå°”å€¼åªæœ‰ä¸¤ä¸ªï¼šTrue å’Œ False</span>
<span class="hljs-attr">is_valid</span> = <span class="hljs-literal">True</span>
<span class="hljs-attr">e</span> = <span class="hljs-literal">False</span>
<span class="hljs-attr">flag</span> = <span class="hljs-literal">True</span>

print(e)        <span class="hljs-comment"># è¾“å‡º: False</span>
print(flag)     <span class="hljs-comment"># è¾“å‡º: True</span>

<span class="hljs-comment"># å¸ƒå°”å€¼å¸¸ç”¨äºæ¡ä»¶åˆ¤æ–­</span>
<span class="hljs-attr">age</span> = <span class="hljs-number">18</span>
if age &gt;= 18:
    print("ä½ å·²ç»æˆå¹´äº†")  <span class="hljs-comment"># è¾“å‡º: ä½ å·²ç»æˆå¹´äº†</span>
else:
    print("ä½ è¿˜æœªæˆå¹´")
</code></pre>
<h4 data-id="heading-9">4. å¤åˆæ•°æ®ç±»å‹ï¼ˆç®€è¦ä»‹ç»ï¼‰</h4>
<h5 data-id="heading-10">åˆ—è¡¨ (list) - å¯å˜æœ‰åºé›†åˆ</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">my_list</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
<span class="hljs-attr">fruits</span> = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>]
<span class="hljs-attr">mixed_list</span> = [<span class="hljs-number">1</span>, <span class="hljs-string">"hello"</span>, <span class="hljs-number">3.14</span>, <span class="hljs-literal">True</span>]
</code></pre>
<h5 data-id="heading-11">å…ƒç»„ (tuple) - ä¸å¯å˜æœ‰åºé›†åˆ</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">my_tuple</span> = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
<span class="hljs-attr">coordinates</span> = (<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)
</code></pre>
<h5 data-id="heading-12">å­—å…¸ (dict) - é”®å€¼å¯¹é›†åˆ</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">my_dict</span> = {<span class="hljs-string">'name'</span>: <span class="hljs-string">'å¾åº†'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">18</span>}
<span class="hljs-attr">student</span> = {<span class="hljs-string">"å§“å"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"å¹´é¾„"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"æˆç»©"</span>: <span class="hljs-number">85</span>}
</code></pre>
<h5 data-id="heading-13">é›†åˆ (set) - æ— åºä¸é‡å¤å…ƒç´ </h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">my_set</span> = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}
<span class="hljs-attr">unique_numbers</span> = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>}  <span class="hljs-comment"># è‡ªåŠ¨å»é‡ä¸º {1, 2, 3, 4}</span>
</code></pre>
<h3 data-id="heading-14">å˜é‡å‘½åè§„åˆ™</h3>
<h4 data-id="heading-15">åˆæ³•çš„å˜é‡å</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># âœ“ æ­£ç¡®çš„å‘½åæ–¹å¼</span>
<span class="hljs-attr">age</span> = <span class="hljs-number">18</span>           <span class="hljs-comment"># å…¨å°å†™</span>
<span class="hljs-attr">myName</span> = <span class="hljs-string">"Alice"</span>   <span class="hljs-comment"># é©¼å³°å‘½åæ³•</span>
<span class="hljs-attr">my_number</span> = <span class="hljs-number">42</span>     <span class="hljs-comment"># ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆæ¨èï¼‰</span>
<span class="hljs-attr">_number</span> = <span class="hljs-number">789</span>      <span class="hljs-comment"># ä¸‹åˆ’çº¿å¼€å¤´</span>
<span class="hljs-attr">name123</span> = <span class="hljs-string">"test"</span>   <span class="hljs-comment"># å­—æ¯æ•°å­—ç»„åˆ</span>

print(age)         <span class="hljs-comment"># è¾“å‡º: 18</span>
print(myName)      <span class="hljs-comment"># è¾“å‡º: Alice</span>
</code></pre>
<h4 data-id="heading-16">å‘½åè§„èŒƒå»ºè®®</h4>
<ul>
<li>ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å</li>
<li>æ¨èä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆsnake_caseï¼‰</li>
<li>å˜é‡ååº”èƒ½è¡¨è¾¾å…¶å«ä¹‰</li>
<li>é¿å…ä½¿ç”¨Pythonå…³é”®å­—ä½œä¸ºå˜é‡å</li>
</ul>
<h3 data-id="heading-17">æ‰“å°è¾“å‡º (print)</h3>
<h4 data-id="heading-18">åŸºæœ¬æ‰“å°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ‰“å°å­—ç¬¦ä¸²</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello, World!"</span>)           <span class="hljs-comment"># è¾“å‡º: Hello, World!</span>

<span class="hljs-comment"># æ‰“å°å˜é‡</span>
x = <span class="hljs-number">10</span>
<span class="hljs-built_in">print</span>(x)                         <span class="hljs-comment"># è¾“å‡º: 10</span>

<span class="hljs-comment"># æ‰“å°å¤šä¸ªå€¼</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"name   --- &gt;  "</span> + name)   <span class="hljs-comment"># å­—ç¬¦ä¸²æ‹¼æ¥</span>
<span class="hljs-built_in">print</span>(<span class="hljs-number">111</span>)                       <span class="hljs-comment"># è¾“å‡º: 111</span>
<span class="hljs-built_in">print</span>(<span class="hljs-literal">True</span>)                      <span class="hljs-comment"># è¾“å‡º: True</span>
</code></pre>
<h4 data-id="heading-19">æ ¼å¼åŒ–æ‰“å°</h4>
<h5 data-id="heading-20">1. å­—ç¬¦ä¸²æ‹¼æ¥</h5>
<pre><code class="hljs language-bash" lang="bash">name = <span class="hljs-string">"Alice"</span>
age = 18
<span class="hljs-built_in">print</span>(<span class="hljs-string">"My name is "</span> + name)                    <span class="hljs-comment"># è¾“å‡º: My name is Alice</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"name   --- &gt;  "</span> + name)                 <span class="hljs-comment"># è¾“å‡º: name   --- &gt;  Alice</span>
</code></pre>
<h5 data-id="heading-21">2. f-stringæ ¼å¼åŒ–ï¼ˆæ¨èï¼‰</h5>
<pre><code class="hljs language-python" lang="python">name = <span class="hljs-string">"Alice"</span>
age = <span class="hljs-number">18</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"My name is <span class="hljs-subst">{name}</span>"</span>)                    <span class="hljs-comment"># è¾“å‡º: My name is Alice</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆ‘ä»Šå¹´<span class="hljs-subst">{age}</span>å²"</span>)                        <span class="hljs-comment"># è¾“å‡º: æˆ‘ä»Šå¹´18å²</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å§“å: <span class="hljs-subst">{name}</span>, å¹´é¾„: <span class="hljs-subst">{age}</span>"</span>)            <span class="hljs-comment"># è¾“å‡º: å§“å: Alice, å¹´é¾„: 18</span>
</code></pre>
<h5 data-id="heading-22">3. formatæ–¹æ³•</h5>
<pre><code class="hljs language-python" lang="python">name = <span class="hljs-string">"Alice"</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"My name is {}"</span>.<span class="hljs-built_in">format</span>(name))            <span class="hljs-comment"># è¾“å‡º: My name is Alice</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å§“å: {}, å¹´é¾„: {}"</span>.<span class="hljs-built_in">format</span>(name, <span class="hljs-number">18</span>))   <span class="hljs-comment"># è¾“å‡º: å§“å: Alice, å¹´é¾„: 18</span>
</code></pre>
<h5 data-id="heading-23">4. %æ ¼å¼åŒ–ï¼ˆè¾ƒè€çš„æ–¹å¼ï¼‰</h5>
<pre><code class="hljs language-perl" lang="perl">name = <span class="hljs-string">"Alice"</span>
<span class="hljs-keyword">print</span>(<span class="hljs-string">"My name is %s"</span> % name)                  <span class="hljs-comment"># è¾“å‡º: My name is Alice</span>
<span class="hljs-keyword">print</span>(<span class="hljs-string">"å§“å: %s, å¹´é¾„: %d"</span> % (name, <span class="hljs-number">18</span>))       <span class="hljs-comment"># è¾“å‡º: å§“å: Alice, å¹´é¾„: 18</span>
</code></pre>
<h4 data-id="heading-24">é«˜çº§æ‰“å°æŠ€å·§</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ‰“å°æ¢è¡Œ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¬¬ä¸€è¡Œ"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¬¬äºŒè¡Œ"</span>)

<span class="hljs-comment"># ä¸æ¢è¡Œæ‰“å°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello"</span>, end=<span class="hljs-string">" "</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"World"</span>)                                 <span class="hljs-comment"># è¾“å‡º: Hello World</span>

<span class="hljs-comment"># åˆ†éš”ç¬¦è‡ªå®šä¹‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"orange"</span>, sep=<span class="hljs-string">"-"</span>)    <span class="hljs-comment"># è¾“å‡º: apple-banana-orange</span>

<span class="hljs-comment"># æ‰“å°åˆ°æ–‡ä»¶</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"output.txt"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¿å­˜åˆ°æ–‡ä»¶çš„å†…å®¹"</span>, file=f)
</code></pre>
<h3 data-id="heading-25">ç”¨æˆ·è¾“å…¥ (input)</h3>
<h4 data-id="heading-26">åŸºæœ¬è¾“å…¥</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è·å–ç”¨æˆ·è¾“å…¥</span>
user_input = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥å†…å®¹: "</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½ è¾“å…¥çš„æ˜¯: <span class="hljs-subst">{user_input}</span>"</span>)

<span class="hljs-comment"># è¾“å…¥æ•°å­—ï¼ˆéœ€è¦è½¬æ¢ç±»å‹ï¼‰</span>
get_input = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥æ•°å­—ï¼š"</span>)
number = <span class="hljs-built_in">int</span>(get_input)  <span class="hljs-comment"># è½¬æ¢ä¸ºæ•´æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½ è¾“å…¥çš„æ•°å­—æ˜¯: <span class="hljs-subst">{number}</span>"</span>)
</code></pre>
<h4 data-id="heading-27">è¾“å…¥éªŒè¯ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®‰å…¨çš„æ•°å­—è¾“å…¥</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_number_input</span>(<span class="hljs-params">prompt</span>):
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-keyword">try</span>:
            user_input = <span class="hljs-built_in">input</span>(prompt)
            number = <span class="hljs-built_in">int</span>(user_input)
            <span class="hljs-keyword">return</span> number
        <span class="hljs-keyword">except</span> ValueError:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—ï¼"</span>)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-comment"># age = get_number_input("è¯·è¾“å…¥æ‚¨çš„å¹´é¾„: ")</span>
</code></pre>
<h3 data-id="heading-28">å­—ç¬¦ä¸²æ ¼å¼åŒ–</h3>
<h4 data-id="heading-29">f-stringï¼ˆæœ€æ¨èï¼‰</h4>
<pre><code class="hljs language-python" lang="python">name = <span class="hljs-string">"Alice"</span>
age = <span class="hljs-number">18</span>
score = <span class="hljs-number">95.5</span>

<span class="hljs-comment"># åŸºæœ¬æ ¼å¼åŒ–</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å§“å: <span class="hljs-subst">{name}</span>"</span>)                          <span class="hljs-comment"># è¾“å‡º: å§“å: Alice</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹´é¾„: <span class="hljs-subst">{age}</span>"</span>)                           <span class="hljs-comment"># è¾“å‡º: å¹´é¾„: 18</span>

<span class="hljs-comment"># æ•°å­—æ ¼å¼åŒ–</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆç»©: <span class="hljs-subst">{score:<span class="hljs-number">.1</span>f}</span>"</span>)                     <span class="hljs-comment"># è¾“å‡º: æˆç»©: 95.5</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆç»©: <span class="hljs-subst">{score:<span class="hljs-number">.2</span>f}</span>"</span>)                     <span class="hljs-comment"># è¾“å‡º: æˆç»©: 95.50</span>

<span class="hljs-comment"># è¡¨è¾¾å¼è®¡ç®—</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ˜å¹´å¹´é¾„: <span class="hljs-subst">{age + <span class="hljs-number">1</span>}</span>"</span>)                   <span class="hljs-comment"># è¾“å‡º: æ˜å¹´å¹´é¾„: 19</span>
</code></pre>
<h4 data-id="heading-30">formatæ–¹æ³•</h4>
<pre><code class="hljs language-python" lang="python">name = <span class="hljs-string">"Alice"</span>
age = <span class="hljs-number">18</span>

<span class="hljs-comment"># ä½ç½®å‚æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å§“å: {}, å¹´é¾„: {}"</span>.<span class="hljs-built_in">format</span>(name, age))

<span class="hljs-comment"># å…³é”®å­—å‚æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å§“å: {name}, å¹´é¾„: {age}"</span>.<span class="hljs-built_in">format</span>(name=name, age=age))

<span class="hljs-comment"># æ•°å­—æ ¼å¼åŒ–</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆç»©: {:.2f}"</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">95.567</span>))            <span class="hljs-comment"># è¾“å‡º: æˆç»©: 95.57</span>
</code></pre>
<h3 data-id="heading-31">ç±»å‹è½¬æ¢</h3>
<h4 data-id="heading-32">åŸºæœ¬ç±»å‹è½¬æ¢</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å­—ç¬¦ä¸²è½¬æ•°å­—</span>
str_num = <span class="hljs-string">"123"</span>
int_num = <span class="hljs-built_in">int</span>(str_num)          <span class="hljs-comment"># è½¬ä¸ºæ•´æ•°</span>
float_num = <span class="hljs-built_in">float</span>(str_num)      <span class="hljs-comment"># è½¬ä¸ºæµ®ç‚¹æ•°</span>

<span class="hljs-built_in">print</span>(int_num)                  <span class="hljs-comment"># è¾“å‡º: 123</span>
<span class="hljs-built_in">print</span>(float_num)                <span class="hljs-comment"># è¾“å‡º: 123.0</span>

<span class="hljs-comment"># æ•°å­—è½¬å­—ç¬¦ä¸²</span>
num = <span class="hljs-number">42</span>
str_num = <span class="hljs-built_in">str</span>(num)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°å­—<span class="hljs-subst">{num}</span>è½¬ä¸ºå­—ç¬¦ä¸²: '<span class="hljs-subst">{str_num}</span>'"</span>)

<span class="hljs-comment"># å¸ƒå°”è½¬æ¢</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">bool</span>(<span class="hljs-number">0</span>))                  <span class="hljs-comment"># è¾“å‡º: False</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">bool</span>(<span class="hljs-number">1</span>))                  <span class="hljs-comment"># è¾“å‡º: True</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">bool</span>(<span class="hljs-string">""</span>))                 <span class="hljs-comment"># è¾“å‡º: False</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">bool</span>(<span class="hljs-string">"hello"</span>))            <span class="hljs-comment"># è¾“å‡º: True</span>
</code></pre>
<h4 data-id="heading-33">å®ç”¨è½¬æ¢ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç”¨æˆ·è¾“å…¥æ•°å­—å¤„ç†</span>
user_input = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—: "</span>)
<span class="hljs-keyword">try</span>:
    number = <span class="hljs-built_in">int</span>(user_input)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¾“å…¥çš„æ•°å­—æ˜¯: <span class="hljs-subst">{number}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°å­—çš„å¹³æ–¹æ˜¯: <span class="hljs-subst">{number ** <span class="hljs-number">2</span>}</span>"</span>)
<span class="hljs-keyword">except</span> ValueError:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¾“å…¥çš„ä¸æ˜¯æœ‰æ•ˆæ•°å­—ï¼"</span>)
</code></pre>
<h3 data-id="heading-34">æ¡ä»¶è¯­å¥</h3>
<h4 data-id="heading-35">if-elseè¯­å¥</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸºæœ¬æ¡ä»¶åˆ¤æ–­</span>
age = 18
<span class="hljs-keyword">if</span> age &gt;= 18:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½ å·²ç»æˆå¹´äº†"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½ è¿˜æœªæˆå¹´"</span>)

<span class="hljs-comment"># å¤šé‡æ¡ä»¶åˆ¤æ–­</span>
score = 85
<span class="hljs-keyword">if</span> score &gt;= 90:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¼˜ç§€"</span>)
<span class="hljs-keyword">elif</span> score &gt;= 80:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è‰¯å¥½"</span>)
<span class="hljs-keyword">elif</span> score &gt;= 60:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åŠæ ¼"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸åŠæ ¼"</span>)
</code></pre>
<h4 data-id="heading-36">æ•°å­—åˆ¤æ–­ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ¤æ–­å¥‡å¶æ•°</span>
get_input = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥æ•°å­—ï¼š"</span>)
number = <span class="hljs-built_in">int</span>(get_input)

<span class="hljs-keyword">if</span> number % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ˜¯å¶æ•°"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ˜¯å¥‡æ•°"</span>)

<span class="hljs-comment"># åˆ¤æ–­ç´ æ•°ï¼ˆç®€å•ç‰ˆæœ¬ï¼‰</span>
<span class="hljs-keyword">if</span> number == <span class="hljs-number">2</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ˜¯ç´ æ•°"</span>)
<span class="hljs-keyword">elif</span> number &lt; <span class="hljs-number">2</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸æ˜¯ç´ æ•°"</span>)
<span class="hljs-keyword">else</span>:
    is_prime = <span class="hljs-literal">True</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-built_in">int</span>(number ** <span class="hljs-number">0.5</span>) + <span class="hljs-number">1</span>):
        <span class="hljs-keyword">if</span> number % i == <span class="hljs-number">0</span>:
            is_prime = <span class="hljs-literal">False</span>
            <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">if</span> is_prime:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ˜¯ç´ æ•°"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸æ˜¯ç´ æ•°"</span>)
</code></pre>
<h3 data-id="heading-37">å®ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-38">1. ç®€å•è®¡ç®—å™¨</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_calculator</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"=== ç®€å•è®¡ç®—å™¨ ==="</span>)
    
    <span class="hljs-comment"># è·å–ç”¨æˆ·è¾“å…¥</span>
    num1 = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—: "</span>))
    operator = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥è¿ç®—ç¬¦ (+, -, *, /): "</span>)
    num2 = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—: "</span>))
    
    <span class="hljs-comment"># æ‰§è¡Œè®¡ç®—</span>
    <span class="hljs-keyword">if</span> operator == <span class="hljs-string">"+"</span>:
        result = num1 + num2
    <span class="hljs-keyword">elif</span> operator == <span class="hljs-string">"-"</span>:
        result = num1 - num2
    <span class="hljs-keyword">elif</span> operator == <span class="hljs-string">"*"</span>:
        result = num1 * num2
    <span class="hljs-keyword">elif</span> operator == <span class="hljs-string">"/"</span>:
        <span class="hljs-keyword">if</span> num2 != <span class="hljs-number">0</span>:
            result = num1 / num2
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"é”™è¯¯ï¼šé™¤æ•°ä¸èƒ½ä¸ºé›¶"</span>)
            <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"é”™è¯¯ï¼šæ— æ•ˆçš„è¿ç®—ç¬¦"</span>)
        <span class="hljs-keyword">return</span>
    
    <span class="hljs-comment"># è¾“å‡ºç»“æœ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç»“æœ: <span class="hljs-subst">{num1}</span> <span class="hljs-subst">{operator}</span> <span class="hljs-subst">{num2}</span> = <span class="hljs-subst">{result}</span>"</span>)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹ï¼ˆå–æ¶ˆæ³¨é‡Šè¿è¡Œï¼‰</span>
<span class="hljs-comment"># simple_calculator()</span>
</code></pre>
<h4 data-id="heading-39">2. ä¸ªäººä¿¡æ¯å½•å…¥ç³»ç»Ÿ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">personal_info_system</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"=== ä¸ªäººä¿¡æ¯å½•å…¥ç³»ç»Ÿ ==="</span>)
    
    <span class="hljs-comment"># æ”¶é›†ä¿¡æ¯</span>
    name = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥å§“å: "</span>)
    age = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥å¹´é¾„: "</span>))
    height = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥èº«é«˜(cm): "</span>))
    is_student_input = <span class="hljs-built_in">input</span>(<span class="hljs-string">"æ˜¯å¦ä¸ºå­¦ç”Ÿï¼Ÿ(y/n): "</span>)
    is_student = is_student_input.lower() == <span class="hljs-string">'y'</span>
    
    <span class="hljs-comment"># æ˜¾ç¤ºä¿¡æ¯</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ä¸ªäººä¿¡æ¯ ==="</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å§“å: <span class="hljs-subst">{name}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹´é¾„: <span class="hljs-subst">{age}</span>å²"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"èº«é«˜: <span class="hljs-subst">{height}</span>cm"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­¦ç”Ÿèº«ä»½: <span class="hljs-subst">{<span class="hljs-string">'æ˜¯'</span> <span class="hljs-keyword">if</span> is_student <span class="hljs-keyword">else</span> <span class="hljs-string">'å¦'</span>}</span>"</span>)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹ï¼ˆå–æ¶ˆæ³¨é‡Šè¿è¡Œï¼‰</span>
<span class="hljs-comment"># personal_info_system()</span>
</code></pre>
<h4 data-id="heading-40">3. æˆç»©ç­‰çº§åˆ¤æ–­ç³»ç»Ÿ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">grade_system</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"=== æˆç»©ç­‰çº§åˆ¤æ–­ç³»ç»Ÿ ==="</span>)
    
    <span class="hljs-comment"># è·å–æˆç»©</span>
    chinese = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥è¯­æ–‡æˆç»©: "</span>))
    math = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥æ•°å­¦æˆç»©: "</span>))
    english = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥è‹±è¯­æˆç»©: "</span>))
    
    <span class="hljs-comment"># è®¡ç®—å¹³å‡åˆ†</span>
    average = (chinese + math + english) / <span class="hljs-number">3</span>
    
    <span class="hljs-comment"># åˆ¤æ–­ç­‰çº§</span>
    <span class="hljs-keyword">if</span> average &gt;= <span class="hljs-number">90</span>:
        grade = <span class="hljs-string">"ä¼˜ç§€"</span>
    <span class="hljs-keyword">elif</span> average &gt;= <span class="hljs-number">80</span>:
        grade = <span class="hljs-string">"è‰¯å¥½"</span>
    <span class="hljs-keyword">elif</span> average &gt;= <span class="hljs-number">70</span>:
        grade = <span class="hljs-string">"ä¸­ç­‰"</span>
    <span class="hljs-keyword">elif</span> average &gt;= <span class="hljs-number">60</span>:
        grade = <span class="hljs-string">"åŠæ ¼"</span>
    <span class="hljs-keyword">else</span>:
        grade = <span class="hljs-string">"ä¸åŠæ ¼"</span>
    
    <span class="hljs-comment"># è¾“å‡ºç»“æœ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå¹³å‡æˆç»©: <span class="hljs-subst">{average:<span class="hljs-number">.2</span>f}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç­‰çº§è¯„å®š: <span class="hljs-subst">{grade}</span>"</span>)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹ï¼ˆå–æ¶ˆæ³¨é‡Šè¿è¡Œï¼‰</span>
<span class="hljs-comment"># grade_system()</span>
</code></pre>
<h3 data-id="heading-41">å­¦ä¹ å»ºè®®</h3>
<ol>
<li><strong>å¤šåŠ¨æ‰‹ç»ƒä¹ </strong>Â - äº²è‡ªç¼–å†™ä»£ç æ¯”åªçœ‹æ–‡æ¡£æ›´é‡è¦</li>
<li><strong>ç†è§£æ¦‚å¿µ</strong>Â - ä¸è¦æ­»è®°ç¡¬èƒŒï¼Œè¦ç†è§£æ¯ç§æ•°æ®ç±»å‹çš„ç”¨é€”</li>
<li><strong>æ³¨æ„ç»†èŠ‚</strong>Â - å˜é‡å‘½åã€ç¼©è¿›ã€è¯­æ³•ç­‰éƒ½è¦è§„èŒƒ</li>
<li><strong>å¾ªåºæ¸è¿›</strong>Â - ä»ç®€å•çš„æ‰“å°å¼€å§‹ï¼Œé€æ­¥å­¦ä¹ å¤æ‚çš„æ¦‚å¿µ</li>
<li><strong>å–„ç”¨è°ƒè¯•</strong>Â - é‡åˆ°é—®é¢˜æ—¶å­¦ä¼šä½¿ç”¨print()è°ƒè¯•</li>
</ol>
<h3 data-id="heading-42">å¸¸è§é”™è¯¯æé†’</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯ç¤ºä¾‹</span>
<span class="hljs-comment"># 1. å˜é‡æœªå®šä¹‰å°±ä½¿ç”¨</span>
<span class="hljs-comment"># print(undefined_var)  # NameError</span>

<span class="hljs-comment"># 2. å­—ç¬¦ä¸²å’Œæ•°å­—ç›´æ¥æ‹¼æ¥</span>
<span class="hljs-comment"># print("å¹´é¾„: " + 18)  # TypeError</span>

<span class="hljs-comment"># 3. è¾“å…¥è½¬æ¢é”™è¯¯</span>
<span class="hljs-comment"># user_input = input("è¾“å…¥æ•°å­—: ")</span>
<span class="hljs-comment"># number = int(user_input)  # å¦‚æœè¾“å…¥éæ•°å­—ä¼šæŠ¥é”™</span>

<span class="hljs-comment"># âœ“ æ­£ç¡®åšæ³•</span>
<span class="hljs-comment"># 1. å…ˆå®šä¹‰å˜é‡</span>
message = <span class="hljs-string">"Hello"</span>
<span class="hljs-built_in">print</span>(message)

<span class="hljs-comment"># 2. ä½¿ç”¨æ ¼å¼åŒ–</span>
age = <span class="hljs-number">18</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹´é¾„: <span class="hljs-subst">{age}</span>"</span>)

<span class="hljs-comment"># 3. å®‰å…¨è½¬æ¢</span>
user_input = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¾“å…¥æ•°å­—: "</span>)
<span class="hljs-keyword">try</span>:
    number = <span class="hljs-built_in">int</span>(user_input)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½ è¾“å…¥äº†: <span class="hljs-subst">{number}</span>"</span>)
<span class="hljs-keyword">except</span> ValueError:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—ï¼"</span>)
</code></pre>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶æ„å»ºåšå›ºçš„å‰ç«¯å ¡å’ï¼šTypeScript ä¸ React å®æˆ˜æ·±åº¦æŒ‡å—]]></title>    <link>https://juejin.cn/post/7601075423003492388</link>    <guid>https://juejin.cn/post/7601075423003492388</guid>    <pubDate>2026-02-01T06:44:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601075423003492388" data-draft-id="7601103779392569407" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶æ„å»ºåšå›ºçš„å‰ç«¯å ¡å’ï¼šTypeScript ä¸ React å®æˆ˜æ·±åº¦æŒ‡å—"/> <meta itemprop="keywords" content="TypeScript,React.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-02-01T06:44:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="San30"/> <meta itemprop="url" content="https://juejin.cn/user/1766294768060816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶æ„å»ºåšå›ºçš„å‰ç«¯å ¡å’ï¼šTypeScript ä¸ React å®æˆ˜æ·±åº¦æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1766294768060816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    San30
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T06:44:39.000Z" title="Sun Feb 01 2026 06:44:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>åœ¨ç°ä»£å‰ç«¯å¼€å‘çš„æµªæ½®ä¸­ï¼ŒJavaScript æ— ç–‘æ˜¯ç»Ÿæ²»è€…ã€‚ç„¶è€Œï¼Œéšç€é¡¹ç›®è§„æ¨¡çš„æŒ‡æ•°çº§å¢é•¿ï¼ŒJavaScript çµæ´»çš„åŠ¨æ€ç±»å‹ç‰¹æ€§é€æ¸ä»â€œä¼˜åŠ¿â€å˜æˆäº†â€œéšæ‚£â€ã€‚ä½ æ˜¯å¦ç»å†è¿‡é¡¹ç›®ä¸Šçº¿åé¡µé¢ç™½å±ï¼Œæ§åˆ¶å°èµ«ç„¶å†™ç€ <code>Cannot read property 'name' of undefined</code>ï¼Ÿä½ æ˜¯å¦åœ¨ç»´æŠ¤å‰åŒäº‹çš„ä»£ç æ—¶ï¼Œå¯¹ç€ä¸€ä¸ªåä¸º <code>data</code> çš„å¯¹è±¡å˜é‡ï¼Œå®Œå…¨çŒœä¸å‡ºé‡Œé¢åˆ°åº•è£…äº†ä»€ä¹ˆï¼Ÿ</p>
<p>è¿™å°±æ˜¯ <strong>TypeScript (TS)</strong> è¯ç”Ÿçš„æ„ä¹‰ã€‚</p>
<p>ä½œä¸º JavaScript çš„è¶…é›†ï¼ŒTypeScript å¹¶ä¸æ˜¯è¦å–ä»£ JSï¼Œè€Œæ˜¯ç»™å®ƒç©¿ä¸Šäº†ä¸€å±‚åä¸ºâ€œé™æ€ç±»å‹ç³»ç»Ÿâ€çš„é’¢é“ä¾ æˆ˜è¡£ã€‚å®ƒå°†ç±»å‹æ£€æŸ¥ä»â€œè¿è¡Œæ—¶â€æå‰åˆ°äº†â€œç¼–è¯‘æ—¶â€ï¼Œè®© Bug æ‰¼æ€åœ¨ä»£ç ç¼–å†™çš„é‚£ä¸€åˆ»ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªç»å…¸çš„ Todo Listï¼ˆå¾…åŠäº‹é¡¹ï¼‰é¡¹ç›®ï¼Œä»åŸºç¡€è¯­æ³•åˆ° React ç»„ä»¶å®æˆ˜ï¼Œå¸¦ä½ æ·±å…¥ç†è§£ TypeScript å¦‚ä½•è®©ä½ çš„ä»£ç å˜å¾—<strong>æ›´å®‰å…¨ã€æ›´æ˜“è¯»ã€æ›´æ˜“ç»´æŠ¤</strong>ã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šTypeScript çš„æ ¸å¿ƒåŸºçŸ³</h2>
<p>åœ¨è¿›å…¥ React å®æˆ˜ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŒæ¡ TS çš„å‡ å—åŸºçŸ³ã€‚è¿™äº›æ¦‚å¿µé€šå¸¸å®šä¹‰åœ¨é¡¹ç›®çš„é€šç”¨é€»è¾‘æˆ–ç±»å‹å£°æ˜æ–‡ä»¶ä¸­ã€‚</p>
<h3 data-id="heading-1">1. ç»™å˜é‡ä¸€å¼ â€œèº«ä»½è¯â€ï¼šåŸºç¡€ç±»å‹</h3>
<p>åœ¨ JS ä¸­ï¼Œå˜é‡æ˜¯è‡ªç”±çš„ï¼Œä»Šå¤©æ˜¯æ•°å­—ï¼Œæ˜å¤©å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€‚ä½†åœ¨ TS ä¸­ï¼Œæˆ‘ä»¬å¼ºè°ƒâ€œå¥‘çº¦ç²¾ç¥â€ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// ç®€å•ç±»å‹ï¼šæ˜¾å¼å£°æ˜</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">18</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">username</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'hello'</span>;

<span class="hljs-comment">// ç±»å‹æ¨å¯¼ï¼šTS çš„æ™ºèƒ½ä¹‹å¤„</span>
<span class="hljs-comment">// å³ä½¿ä¸å†™ç±»å‹ï¼ŒTS ä¹Ÿä¼šæ ¹æ®åˆå§‹å€¼æ¨æ–­å‡º count æ˜¯ number</span>
<span class="hljs-keyword">let</span> count = <span class="hljs-number">1</span>; 
<span class="hljs-comment">// count = '11'; // æŠ¥é”™ï¼ä½ ä¸èƒ½æŠŠå­—ç¬¦ä¸²èµ‹å€¼ç»™æ•°å­—ç±»å‹çš„å˜é‡</span>
</code></pre>
<p>è¿™ç§<strong>ç±»å‹æ¨å¯¼</strong>æœºåˆ¶æ„å‘³ç€ä½ ä¸éœ€è¦æ¯ä¸€è¡Œéƒ½å†™ç±»å‹å®šä¹‰ï¼ŒTS ç¼–è¯‘å™¨ä¼šé»˜é»˜åœ°åœ¨åå°å®ˆæŠ¤ä½ ã€‚</p>
<h3 data-id="heading-2">2. æ›´æœ‰åºçš„é›†åˆï¼šæ•°ç»„ä¸å…ƒç»„</h3>
<p>åœ¨å¤„ç†åˆ—è¡¨æ•°æ®æ—¶ï¼ŒTS æä¾›äº†ä¸¤ç§æ–¹å¼ã€‚</p>
<p>å¦‚æœä½ æƒ³è¦ä¸€ä¸ªçº¯ç²¹çš„æ•°ç»„ï¼ˆæ¯”å¦‚å…¨æ˜¯æ•°å­—ï¼‰ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> <span class="hljs-attr">scores</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">85</span>, <span class="hljs-number">92</span>, <span class="hljs-number">78</span>];
<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨æ³›å‹å†™æ³•ï¼ˆä¸¤è€…ç­‰ä»·ï¼‰</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">names</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">'Alice'</span>, <span class="hljs-string">'Bob'</span>];
</code></pre>
<p>ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå›ºå®šé•¿åº¦ã€ä¸”æ¯ä¸ªä½ç½®ç±»å‹éƒ½ç¡®å®šçš„æ•°ç»„ï¼Œè¿™å°±æ˜¯<strong>å…ƒç»„ (Tuple)</strong> ã€‚è¿™åœ¨ React Hooks ä¸­éå¸¸å¸¸è§ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// å…ƒç»„ï¼šç¬¬ä¸€ä¸ªä½ç½®å¿…é¡»æ˜¯æ•°å­—ï¼Œç¬¬äºŒä¸ªå¿…é¡»æ˜¯å­—ç¬¦ä¸²</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">userRecord</span>: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>] = [<span class="hljs-number">1001</span>, <span class="hljs-string">'Tom'</span>];
</code></pre>
<h3 data-id="heading-3">3. å‘Šåˆ«é­”æ³•æ•°å­—ï¼šæšä¸¾ (Enum)</h3>
<p>ä½ ä¸€å®šè§è¿‡è¿™ç§ä»£ç ï¼š<code>if (status === 1) { ... }</code>ã€‚è¿™ä¸ª <code>1</code> åˆ°åº•ä»£è¡¨ä»€ä¹ˆï¼ŸæˆåŠŸï¼Ÿå¤±è´¥ï¼Ÿè¿˜æ˜¯è¿›è¡Œä¸­ï¼Ÿè¿™ç§è®©äººæ‘¸ä¸ç€å¤´è„‘çš„æ•°å­—è¢«ç§°ä¸ºâ€œé­”æ³•æ•°å­—â€ã€‚</p>
<p>TS çš„<strong>æšä¸¾</strong>ç±»å‹å®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Status</span> {
    <span class="hljs-title class_">Pending</span>, <span class="hljs-comment">// 0</span>
    <span class="hljs-title class_">Success</span>, <span class="hljs-comment">// 1</span>
    <span class="hljs-title class_">Failed</span>,  <span class="hljs-comment">// 2</span>
}

<span class="hljs-keyword">let</span> <span class="hljs-attr">currentStatus</span>: <span class="hljs-title class_">Status</span> = <span class="hljs-title class_">Status</span>.<span class="hljs-property">Pending</span>;
</code></pre>
<p>ä»£ç çš„å¯è¯»æ€§ç¬é—´æå‡ã€‚å½“å…¶ä»–å¼€å‘è€…é˜…è¯»ä»£ç æ—¶ï¼Œ<code>Status.Pending</code> è¿œæ¯” <code>0</code> å…·æœ‰è¯­ä¹‰ä»·å€¼ã€‚</p>
<h3 data-id="heading-4">4. é€ƒç”Ÿèˆ±ä¸å®‰å…¨é—¨ï¼šAny vs Unknown</h3>
<p>è¿™æ˜¯ TS æ–°æ‰‹æœ€å®¹æ˜“æ··æ·†çš„æ¦‚å¿µã€‚</p>
<ul>
<li>
<p><strong>Any (ä»»æ„ç±»å‹)</strong> ï¼šè¿™æ˜¯ TS çš„â€œé€ƒç”Ÿèˆ±â€ã€‚å½“ä½ æŠŠå˜é‡è®¾ä¸º <code>any</code>ï¼Œä½ å°±æ”¾å¼ƒäº†æ‰€æœ‰ç±»å‹æ£€æŸ¥ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> <span class="hljs-attr">risky</span>: <span class="hljs-built_in">any</span> = <span class="hljs-number">1</span>;
risky.<span class="hljs-title function_">hello</span>(); <span class="hljs-comment">// ç¼–è¯‘å™¨ä¸æŠ¥é”™ï¼Œä½†è¿è¡Œæ—¶ä¼šå´©ï¼</span>
</code></pre>
<p><em>å»ºè®®ï¼šé™¤éä¸‡ä¸å¾—å·²ï¼Œå¦åˆ™å°½é‡å°‘ç”¨ <code>any</code>ï¼Œå¦åˆ™ä½ å†™çš„åªæ˜¯â€œå¸¦æ³¨é‡Šçš„ JSâ€ã€‚</em></p>
</li>
<li>
<p><strong>Unknown (æœªçŸ¥ç±»å‹)</strong> ï¼šè¿™æ˜¯æ›´å®‰å…¨çš„ <code>any</code>ã€‚å®ƒçš„åŸåˆ™æ˜¯ï¼šâ€œä½ å¯ä»¥å­˜ä»»ä½•ä¸œè¥¿ï¼Œä½†åœ¨ä½ è¯æ˜å®ƒæ˜¯è°ä¹‹å‰ï¼Œä¸èƒ½ä½¿ç”¨å®ƒã€‚â€</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> <span class="hljs-attr">safeData</span>: <span class="hljs-built_in">unknown</span> = <span class="hljs-number">1</span>;
<span class="hljs-comment">// safeData.toUpperCase(); // æŠ¥é”™ï¼TS è¯´ï¼šæˆ‘ä¸çŸ¥é“è¿™æ˜¯ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¸å‡†ç”¨ã€‚</span>

<span class="hljs-comment">// ç±»å‹æ–­è¨€ï¼ˆType Assertionï¼‰</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> safeData === <span class="hljs-string">'string'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(safeData.<span class="hljs-title function_">toUpperCase</span>()); <span class="hljs-comment">// ç°åœ¨å¯ä»¥ç”¨äº†ï¼Œå› ä¸ºä½ è¯æ˜äº†å®ƒæ˜¯å­—ç¬¦ä¸²</span>
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-5">5. å¥‘çº¦ç²¾ç¥ï¼šæ¥å£ (Interface)</h3>
<p><strong>æ¥å£</strong>æ˜¯ TS é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡åº”è¯¥â€œé•¿ä»€ä¹ˆæ ·â€ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IUser</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// åªè¯»å±æ€§ï¼šç”Ÿä¸‹æ¥å°±ä¸èƒ½æ”¹</span>
    hobby?: <span class="hljs-built_in">string</span>[];    <span class="hljs-comment">// å¯é€‰å±æ€§ï¼šå¯ä»¥æœ‰ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰</span>
}
</code></pre>
<ul>
<li><strong>readonly</strong>ï¼šä¿è¯äº†æ•°æ®çš„ä¸å¯å˜æ€§ï¼Œé˜²æ­¢æˆ‘ä»¬åœ¨ä¸šåŠ¡é€»è¾‘ä¸­æ„å¤–ä¿®æ”¹äº†æ ¸å¿ƒ IDã€‚</li>
<li><strong>? (å¯é€‰)</strong> ï¼šå¤„ç†åç«¯æ¥å£è¿”å›çš„ä¸å®Œæ•´æ•°æ®æ—¶éå¸¸æœ‰ç”¨ã€‚é…åˆå¯é€‰é“¾æ“ä½œç¬¦ <code>user.hobby?.length</code>ï¼Œå¯ä»¥ä¼˜é›…åœ°é¿å…æŠ¥é”™ã€‚</li>
</ul>
<h3 data-id="heading-6">6. çµæ´»å¤šå˜ï¼šè‡ªå®šä¹‰ç±»å‹ (Type Aliases)</h3>
<p>é™¤äº†æ¥å£ï¼ŒTS è¿˜æä¾›äº† <code>type</code> å…³é”®å­—æ¥åˆ›å»º<strong>ç±»å‹åˆ«å</strong>ã€‚å¾ˆå¤šäººä¼šé—®ï¼šâ€œå®ƒå’Œæ¥å£æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿâ€</p>
<p>æ¥å£ä¸»è¦ç”¨äºå®šä¹‰å¯¹è±¡çš„å½¢çŠ¶ï¼ˆShapeï¼‰ï¼Œè€Œ <code>type</code> æ›´åŠ çµæ´»ï¼Œå®ƒå¯ä»¥å®šä¹‰åŸºç¡€ç±»å‹çš„åˆ«åï¼Œæœ€é‡è¦çš„æ˜¯å®ƒæ”¯æŒ<strong>è”åˆç±»å‹ (Union Types)</strong> ã€‚</p>
<p><strong>åœºæ™¯ä¸€ï¼šè”åˆç±»å‹ï¼ˆæœ€å¸¸ç”¨ï¼‰</strong> å½“ä¸€ä¸ªå˜é‡å¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯èƒ½æ˜¯æ•°å­—æ—¶ï¼Œæ¥å£å°±æ— èƒ½ä¸ºåŠ›äº†ï¼Œä½† <code>type</code> å¯ä»¥è½»æ¾æå®šï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ª ID ç±»å‹ï¼Œå®ƒå¯ä»¥æ˜¯ string æˆ–è€… number</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">ID</span> = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>; 

<span class="hljs-keyword">let</span> <span class="hljs-attr">userId</span>: <span class="hljs-variable constant_">ID</span> = <span class="hljs-number">111</span>;      <span class="hljs-comment">// åˆæ³•</span>
userId = <span class="hljs-string">"user_123"</span>;       <span class="hljs-comment">// ä¹Ÿåˆæ³•</span>
<span class="hljs-comment">// userId = false;         // æŠ¥é”™ï¼</span>
</code></pre>
<p><strong>åœºæ™¯äºŒï¼šå®šä¹‰å¯¹è±¡åˆ«å</strong> è™½ç„¶é€šå¸¸ç”¨ <code>interface</code> å®šä¹‰å¯¹è±¡ï¼Œä½† <code>type</code> ä¹Ÿå¯ä»¥åšåˆ°ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">UserType</span> = {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
    <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>
    hobby?: <span class="hljs-built_in">string</span>[]
}
</code></pre>
<blockquote>
<p><strong>æœ€ä½³å®è·µå»ºè®®</strong>ï¼š</p>
<ul>
<li>å¦‚æœä½ åœ¨å®šä¹‰å¯¹è±¡æˆ–ç»„ä»¶çš„ Propsï¼Œä¼˜å…ˆä½¿ç”¨ <strong>Interface</strong>ï¼ˆå› ä¸ºå®ƒå¯ä»¥è¢«ç»§æ‰¿å’Œåˆå¹¶ï¼‰ã€‚</li>
<li>å¦‚æœä½ éœ€è¦å®šä¹‰åŸºç¡€ç±»å‹çš„ç»„åˆï¼ˆå¦‚ <code>string | number</code>ï¼‰æˆ–å‡½æ•°ç±»å‹ï¼Œä½¿ç”¨ <strong>Type</strong>ã€‚</li>
</ul>
</blockquote>
<h2 data-id="heading-7">ç¬¬äºŒéƒ¨åˆ†ï¼šReact + TypeScript é¡¹ç›®æ¶æ„è®¾è®¡</h2>
<p>ç†è§£äº†åŸºç¡€è¯­æ³•åï¼Œæˆ‘ä»¬æ¥æ„å»ºåº”ç”¨ã€‚ä¸€ä¸ªä¼˜ç§€çš„ React + TS é¡¹ç›®ï¼Œå…¶ç›®å½•ç»“æ„åº”è¯¥æ¸…æ™°åœ°åˆ†ç¦»<strong>æ•°æ®å®šä¹‰</strong>ã€<strong>é€»è¾‘</strong>å’Œ<strong>è§†å›¾</strong>ã€‚</p>
<p>æˆ‘ä»¬å°†æŒ‰ç…§ä»¥ä¸‹ç»“æ„ç»„ç»‡ä»£ç ï¼š</p>
<ol>
<li><strong><code>src/types</code></strong>ï¼šå­˜æ”¾é€šç”¨çš„ç±»å‹å®šä¹‰ï¼ˆæ¥å£ï¼‰ã€‚</li>
<li><strong><code>src/utils</code></strong>ï¼šå­˜æ”¾å·¥å…·å‡½æ•°ã€‚</li>
<li><strong><code>src/hooks</code></strong>ï¼šå­˜æ”¾è‡ªå®šä¹‰ Hooksï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰ã€‚</li>
<li><strong><code>src/components</code></strong>ï¼šå­˜æ”¾ React ç»„ä»¶ï¼ˆè§†å›¾ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-8">1. æ•°æ®æ¨¡å‹å…ˆè¡Œ (src/types)</h3>
<p>åœ¨å†™ä»»ä½• UI ä»£ç ä¹‹å‰ï¼Œ<strong>å…ˆå®šä¹‰æ•°æ®</strong>ã€‚è¿™æ˜¯ TS å¼€å‘çš„æœ€ä½³å®è·µã€‚æˆ‘ä»¬åœ¨ <code>types</code> ç›®å½•ä¸‹å®šä¹‰ Todo item çš„ç»“æ„ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// è¿™æ˜¯æ•´ä¸ªåº”ç”¨çš„æ•°æ®æ ¸å¿ƒ</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Todo</span> {
    <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">completed</span>: <span class="hljs-built_in">boolean</span>;
}
</code></pre>
<p>æœ‰äº†è¿™ä¸ªæ¥å£ï¼Œåº”ç”¨ä¸­ä»»ä½•æ¶‰åŠ Todo çš„åœ°æ–¹éƒ½æœ‰äº†â€œæ³•å¾‹ä¾æ®â€ã€‚</p>
<h3 data-id="heading-9">2. æ³›å‹çš„å¦™ç”¨ (src/utils)</h3>
<p>æˆ‘ä»¬éœ€è¦å°†æ•°æ®æŒä¹…åŒ–åˆ° localStorageã€‚ä¸ºäº†è®©è¿™ä¸ªå­˜å‚¨å‡½æ•°é€šç”¨ï¼ˆæ—¢èƒ½å­˜ Todo æ•°ç»„ï¼Œä¹Ÿèƒ½å­˜ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œæˆ‘ä»¬ä½¿ç”¨<strong>æ³›å‹ (Generics)</strong> ã€‚</p>
<p>æ³›å‹å°±åƒæ˜¯ä¸€ä¸ªâ€œç±»å‹çš„å ä½ç¬¦â€ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// &lt;T&gt; å°±æ˜¯è¿™ä¸ªå ä½ç¬¦ï¼Œè°ƒç”¨æ—¶æ‰å†³å®šå®ƒæ˜¯ä»€ä¹ˆç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> getStorage&lt;T&gt;(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">defaultValue</span>: T): T {
    <span class="hljs-keyword">const</span> value = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key);
    <span class="hljs-keyword">return</span> value ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(value) : defaultValue;
}
</code></pre>
<p>å½“æˆ‘ä»¬è°ƒç”¨ <code>getStorage&lt;Todo[]&gt;('todos', [])</code> æ—¶ï¼ŒTS å°±çŸ¥é“è¿”å›å€¼ä¸€å®šæ˜¯ <code>Todo</code> ç±»å‹çš„æ•°ç»„ã€‚å¦‚æœä¸ç”¨æ³›å‹ï¼Œ<code>JSON.parse</code> è¿”å›çš„æ˜¯ <code>any</code>ï¼Œæˆ‘ä»¬å°±ä¼šä¸¢å¤±å®è´µçš„ç±»å‹ä¿æŠ¤ã€‚</p>
<h3 data-id="heading-10">3. é€»è¾‘ä¸è§†å›¾åˆ†ç¦» (src/hooks)</h3>
<p>æˆ‘ä»¬å°† Todo çš„å¢åˆ æ”¹æŸ¥é€»è¾‘æŠ½ç¦»åˆ°è‡ªå®šä¹‰ Hook ä¸­ã€‚è¿™é‡Œå±•ç¤ºäº† TS å¦‚ä½•ä¿æŠ¤ä¸šåŠ¡é€»è¾‘ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Todo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../types'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useTodos</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ˜¾å¼å£°æ˜ state å­˜æ”¾çš„æ˜¯ Todo ç±»å‹çš„æ•°ç»„</span>
    <span class="hljs-keyword">const</span> [todos, setTodos] = useState&lt;<span class="hljs-title class_">Todo</span>[]&gt;([]);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">addTodo</span> = (<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) =&gt; {
        <span class="hljs-keyword">const</span> <span class="hljs-attr">newTodo</span>: <span class="hljs-title class_">Todo</span> = {
            <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
            <span class="hljs-attr">title</span>: title.<span class="hljs-title function_">trim</span>(),
            <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>, 
        }
        <span class="hljs-comment">// å¦‚æœè¿™é‡Œå°‘å†™äº† completed å±æ€§ï¼ŒTS ä¼šç«‹å³æ ‡çº¢æŠ¥é”™ï¼</span>
        <span class="hljs-title function_">setTodos</span>([...todos, newTodo]);
    }
    
    <span class="hljs-comment">// ... toggleTodo, removeTodo çš„é€»è¾‘</span>
    
    <span class="hljs-keyword">return</span> { todos, addTodo, toggleTodo, removeTodo };
}
</code></pre>
<p>åœ¨ JS ä¸­ï¼Œå¦‚æœä½ åœ¨åˆ›å»º <code>newTodo</code> æ—¶æ‹¼å†™é”™è¯¯ï¼ˆæ¯”å¦‚æŠŠ <code>completed</code> å†™æˆ <code>complete</code>ï¼‰ï¼Œè¿™ä¸ªé”™è¯¯ä¼šä¸€ç›´æ½œä¼åˆ°é¡µé¢æ¸²æŸ“æ—¶æ‰æš´éœ²ã€‚è€Œåœ¨ TS ä¸­ï¼Œç¼–è¾‘å™¨ä¼šå½“ä½ é¢ç›´æ¥ç”»çº¢çº¿æ‹’ç»ç¼–è¯‘ã€‚</p>
<h2 data-id="heading-11">ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»„ä»¶åŒ–å¼€å‘å®æˆ˜</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥ <code>src/components</code> ç›®å½•ï¼Œçœ‹çœ‹ TS å¦‚ä½•å¢å¼º React ç»„ä»¶çš„å¥å£®æ€§ã€‚</p>
<h3 data-id="heading-12">1. ç»„ä»¶ Props çš„å¼ºå¥‘çº¦</h3>
<p>React ç»„ä»¶é€šä¿¡ä¾é  Propsã€‚åœ¨ TS ä¸­ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦ <code>PropTypes</code> åº“ï¼Œç›´æ¥ç”¨ Interface å®šä¹‰ Propsã€‚</p>
<p><strong>è¾“å…¥ç»„ä»¶ (TodoInput)ï¼š</strong></p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// å®šä¹‰çˆ¶ç»„ä»¶å¿…é¡»ä¼ ç»™æˆ‘ä»€ä¹ˆ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Props</span> {
    <span class="hljs-attr">onAdd</span>: <span class="hljs-function">(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>; <span class="hljs-comment">// ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ stringï¼Œæ²¡æœ‰è¿”å›å€¼</span>
}

<span class="hljs-comment">// React.FC&lt;Props&gt; å‘Šè¯‰ TSï¼šè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶ï¼Œå®ƒçš„ Props ç¬¦åˆä¸Šé¢çš„å®šä¹‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">TodoInput</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">Props</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{ onAdd }</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [title, setTitle] = <span class="hljs-title class_">React</span>.<span class="hljs-property">useState</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">''</span>);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAdd</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-keyword">if</span>(!title.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span>;
        <span class="hljs-title function_">onAdd</span>(title); <span class="hljs-comment">// TS ä¼šæ£€æŸ¥è¿™é‡Œä¼ å…¥çš„æ˜¯å¦æ˜¯ string</span>
        <span class="hljs-title function_">setTitle</span>(<span class="hljs-string">''</span>);
    }
    <span class="hljs-comment">// ... JSX æ¸²æŸ“ input å’Œ button</span>
}
</code></pre>
<h3 data-id="heading-13">2. åˆ—è¡¨é¡¹ç»„ä»¶ (TodoItem)</h3>
<p>è¿™é‡Œå±•ç¤ºäº†æ¥å£çš„å¤ç”¨ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥å¼•å…¥ä¹‹å‰å®šä¹‰çš„ <code>Todo</code> æ¥å£ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Todo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../types'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Props</span> {
    <span class="hljs-attr">todo</span>: <span class="hljs-title class_">Todo</span>; <span class="hljs-comment">// ç›´æ¥å¤ç”¨æ ¸å¿ƒç±»å‹</span>
    <span class="hljs-attr">onToggle</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
    <span class="hljs-attr">onRemove</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">TodoItem</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">Props</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{ todo, onToggle, onRemove }</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
                <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> 
                <span class="hljs-attr">checked</span>=<span class="hljs-string">{todo.completed}</span> 
                <span class="hljs-attr">onChange</span>=<span class="hljs-string">{()</span> =&gt;</span> onToggle(todo.id)}
            /&gt;
            {/* æ ·å¼å¤„ç†ï¼šå¦‚æœå®Œæˆåˆ™åŠ åˆ é™¤çº¿ */}
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">textDecoration:</span> <span class="hljs-attr">todo.completed</span> ? '<span class="hljs-attr">line-through</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">none</span>'}}&gt;</span>
                {todo.title}
            <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onRemove(todo.id)}&gt;åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
    )
}
</code></pre>
<p><strong>TS çš„å¨åŠ›å±•ç¤º</strong>ï¼š</p>
<p>å¦‚æœåœ¨ <code>span</code> æ ‡ç­¾é‡Œï¼Œä½ è¯•å›¾æ¸²æŸ“ <code>{todo.name}</code>ï¼ŒTS ä¼šç«‹åˆ»æŠ¥é”™ï¼šâ€œå±æ€§ 'name' åœ¨ç±»å‹ 'Todo' ä¸­ä¸å­˜åœ¨â€ã€‚è¿™é¿å…äº†è¿è¡Œæ—¶å‡ºç° <code>undefined</code> çš„å°´å°¬ã€‚</p>
<h3 data-id="heading-14">3. æ•´åˆç»„ä»¶ (TodoList &amp; App)</h3>
<p>æœ€åï¼Œæˆ‘ä»¬å°†è¿™äº›ç»„ä»¶ç»„åˆèµ·æ¥ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// TodoList ç»„ä»¶</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ListProps</span> {
    <span class="hljs-attr">todos</span>: <span class="hljs-title class_">Todo</span>[];
    <span class="hljs-attr">onToggle</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
    <span class="hljs-attr">onRemove</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
}
<span class="hljs-comment">// ... éå† todos å¹¶æ¸²æŸ“ TodoItem</span>
</code></pre>
<p>åœ¨æ ¹ç»„ä»¶ <code>App</code> ä¸­ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä»è‡ªå®šä¹‰ Hook ä¸­è·å–æ•°æ®å’Œæ–¹æ³•</span>
  <span class="hljs-keyword">const</span> { todos, addTodo, toggleTodo, removeTodo } = <span class="hljs-title function_">useTodos</span>();

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>TodoList<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      {/* è¿™é‡Œé€šè¿‡ Props ä¼ é€’å‡½æ•°ã€‚
         TS ä¼šè‡ªåŠ¨æ¯”å¯¹ï¼šaddTodo çš„ç±»å‹æ˜¯å¦åŒ¹é… TodoInput è¦æ±‚çš„ onAdd ç±»å‹ã€‚
         å¦‚æœä¸åŒ¹é…ï¼ˆæ¯”å¦‚å‚æ•°ä¸ªæ•°ä¸å¯¹ï¼‰ï¼Œè¿™é‡Œå°±ä¼šæŠ¥é”™ã€‚
      */}
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoInput</span> <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{addTodo}</span> /&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoList</span> 
        <span class="hljs-attr">todos</span>=<span class="hljs-string">{todos}</span>
        <span class="hljs-attr">onToggle</span>=<span class="hljs-string">{toggleTodo}</span>
        <span class="hljs-attr">onRemove</span>=<span class="hljs-string">{removeTodo}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-15">ç¬¬å››éƒ¨åˆ†ï¼šæ€»ç»“ä¸å±•æœ›</h2>
<p>é€šè¿‡è¿™ä¸ª Todo List é¡¹ç›®ï¼Œæˆ‘ä»¬ä¸ä»…å­¦ä¹ äº† TypeScript çš„è¯­æ³•ï¼Œæ›´é‡è¦çš„æ˜¯ä½“ä¼šåˆ°äº†å®ƒå¸¦æ¥çš„å¼€å‘æ¨¡å¼çš„å˜é©ã€‚</p>
<h3 data-id="heading-16">TypeScript å¸¦æ¥çš„æ ¸å¿ƒä»·å€¼ï¼š</h3>
<ol>
<li>
<p><strong>ä»£ç å³æ–‡æ¡£</strong>ï¼š</p>
<p>ä»¥å‰ä½ éœ€è¦çœ‹åŠå¤©ä»£ç é€»è¾‘æˆ–è€…æ˜¯è¿‡æ—¶çš„æ³¨é‡Šæ‰èƒ½çŸ¥é“ <code>todos</code> æ•°ç»„é‡Œå­˜çš„æ˜¯ä»€ä¹ˆã€‚ç°åœ¨ï¼Œåªéœ€è¦æŠŠé¼ æ ‡æ‚¬åœåœ¨ <code>Todo</code> æ¥å£ä¸Šï¼Œæ•°æ®ç»“æ„ä¸€ç›®äº†ç„¶ã€‚</p>
</li>
<li>
<p><strong>é‡æ„çš„ä¿¡å¿ƒ</strong>ï¼š</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœäº§å“ç»ç†è®©ä½ æŠŠ <code>title</code> å­—æ®µæ”¹æˆ <code>content</code>ã€‚åœ¨ JS é¡¹ç›®ä¸­ï¼Œä½ éœ€è¦å…¨å±€æœç´¢æ›¿æ¢ï¼Œè¿˜æ‹…å¿ƒæ¼æ”¹æˆ–æ”¹é”™ã€‚åœ¨ TS é¡¹ç›®ä¸­ï¼Œä½ åªéœ€è¦ä¿®æ”¹ <code>interface Todo</code> é‡Œçš„å®šä¹‰ï¼Œç¼–è¯‘å™¨ä¼šç«‹åˆ»åˆ—å‡ºæ‰€æœ‰æŠ¥é”™çš„åœ°æ–¹ï¼ˆæ‰€æœ‰ç”¨åˆ° <code>title</code> çš„ç»„ä»¶ï¼‰ï¼Œä½ é€ä¸€ä¿®æ­£å³å¯ã€‚è¿™ç§â€œæŒ‡å“ªæ‰“å“ªâ€çš„å®‰å…¨æ„Ÿæ˜¯ JS æ— æ³•æ¯”æ‹Ÿçš„ã€‚</p>
</li>
<li>
<p><strong>æè‡´çš„å¼€å‘ä½“éªŒ</strong>ï¼š</p>
<p>IDE çš„æ™ºèƒ½æç¤ºï¼ˆIntelliSenseï¼‰ä¼šè®©ä½ çˆ±ä¸é‡Šæ‰‹ã€‚å½“ä½ è¾“å…¥ <code>todo.</code> æ—¶ï¼Œè‡ªåŠ¨å¼¹å‡º <code>id</code>ã€<code>title</code>ã€<code>completed</code>ï¼Œè¿™ä¸ä»…æé«˜äº†è¾“å…¥é€Ÿåº¦ï¼Œæ›´å‡å°‘äº†è®°å¿†è´Ÿæ‹…å’Œæ‹¼å†™é”™è¯¯ã€‚</p>
</li>
</ol>
<h3 data-id="heading-17">ç»“è¯­</h3>
<p>å­¦ä¹  TypeScript æ˜¯ç°ä»£å‰ç«¯å¼€å‘çš„å¿…ç»ä¹‹è·¯ã€‚èµ·åˆï¼Œä½ å¯èƒ½ä¼šè§‰å¾—ç¼–å†™ç±»å‹å®šä¹‰å¢åŠ äº†ä»£ç é‡ï¼Œç”šè‡³è§‰å¾—ç¼–è¯‘å™¨é¢‘ç¹çš„æŠ¥é”™å¾ˆçƒ¦äººã€‚ä½†è¯·ç›¸ä¿¡ï¼Œè¿™äº›å‰æœŸçš„æŠ•å…¥ï¼Œä¼šåœ¨é¡¹ç›®ç»´æŠ¤é˜¶æ®µä»¥<strong>å‡å°‘ Bug</strong>ã€<strong>æé«˜å¯è¯»æ€§</strong>å’Œ<strong>æå‡å›¢é˜Ÿåä½œæ•ˆç‡</strong>çš„å½¢å¼ï¼Œç»™ä½ ç™¾å€çš„å›æŠ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶èµ·æ­¥å­¦ä¹ Redis || ç¬¬ä¸‰ç« ï¼šRedisä¸­æ•°æ®ç±»å‹çš„æ·±å±‚å‰–æè®²è§£ï¼ˆä¸‹ï¼‰]]></title>    <link>https://juejin.cn/post/7601175299011264527</link>    <guid>https://juejin.cn/post/7601175299011264527</guid>    <pubDate>2026-02-01T08:33:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601175299011264527" data-draft-id="7601077290682138676" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶èµ·æ­¥å­¦ä¹ Redis || ç¬¬ä¸‰ç« ï¼šRedisä¸­æ•°æ®ç±»å‹çš„æ·±å±‚å‰–æè®²è§£ï¼ˆä¸‹ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-01T08:33:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŒ¶æ¯æ¢¦è½©"/> <meta itemprop="url" content="https://juejin.cn/user/195039473183699"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶èµ·æ­¥å­¦ä¹ Redis || ç¬¬ä¸‰ç« ï¼šRedisä¸­æ•°æ®ç±»å‹çš„æ·±å±‚å‰–æè®²è§£ï¼ˆä¸‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/195039473183699/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŒ¶æ¯æ¢¦è½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T08:33:58.000Z" title="Sun Feb 01 2026 08:33:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<h3 data-id="heading-0">Â å‰è¨€ï¼š</h3>
<p>æ˜¨å¤©è®²è§£äº†Redisä¸­Stringå’ŒListçš„æ•°æ®ç±»å‹çš„ç›¸å…³çŸ¥è¯†ï¼Œä»Šå¤©æˆ‘ä»¬æ¥è®²è§£ä¸€ä¸‹å‰©ä½™çš„å‡ ç§å¸¸ç”¨æ•°æ®ç±»å‹ï¼šHashï¼ŒSetï¼ŒZset</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f87c6eaa74f43c69a7babf2a6b2d2d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iy25p2v5qKm6L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770539637&amp;x-signature=kJiNtWpNNDKgX1tKRLCxMxVCKDM%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<h3 data-id="heading-1">ä¸€ã€Â Hash ï¼ˆå“ˆå¸Œï¼‰</h3>
<p>åº•å±‚å®ç°ï¼š</p>
<p>åœ¨åº•å±‚ï¼ŒRedis å¯¹ Hash çš„å®ç°æœ‰ä¸¤ç§æ–¹å¼ï¼Œå–å†³äº <strong>å…ƒç´ æ•°é‡å’Œ field/value çš„é•¿åº¦</strong>ï¼š</p>
<ol>
<li>ziplistï¼ˆå‹ç¼©åˆ—è¡¨ï¼ŒRedis 3.2 ä»¥åæ˜¯ listpackï¼‰</li>
</ol>
<ul>
<li>
<p>å½“ Hash ä¸­çš„ <strong>é”®å€¼å¯¹æ•°é‡è¾ƒå°‘</strong> ä¸” <strong>field å’Œ value éƒ½æ¯”è¾ƒçŸ­</strong> æ—¶ï¼ŒRedis ä¼šä½¿ç”¨ <strong>å‹ç¼©åˆ—è¡¨</strong> æ¥å­˜å‚¨ã€‚</p>
</li>
<li>
<p>å‹ç¼©åˆ—è¡¨æ˜¯ä¸€å— <strong>è¿ç»­çš„å†…å­˜åŒºåŸŸ</strong>ï¼Œå†…éƒ¨ç´§å‡‘å­˜æ”¾ <code>field</code> å’Œ <code>value</code>ã€‚</p>
</li>
<li>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å†…å­˜å ç”¨å°‘ï¼Œå­˜å‚¨ç´§å‡‘ï¼Œé€‚åˆå°æ•°æ®é‡ã€‚</li>
</ul>
</li>
<li>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>éšç€å…ƒç´ å¢å¤šï¼Œæ’å…¥ã€æŸ¥æ‰¾çš„æ€§èƒ½ä¼šä¸‹é™ï¼Œå› ä¸ºéœ€è¦çº¿æ€§æ‰«æã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>é»˜è®¤æ¡ä»¶ï¼š</p>
<ul>
<li><code>hash-max-ziplist-entries</code>ï¼ˆé»˜è®¤ 512ï¼‰â€”â€” æœ€å¤§ entry æ•°é‡</li>
<li><code>hash-max-ziplist-value</code>ï¼ˆé»˜è®¤ 64 å­—èŠ‚ï¼‰â€”â€” å•ä¸ª value æœ€å¤§é•¿åº¦<br/>
è¶…è¿‡é˜ˆå€¼ä¼šè½¬æˆ hashtableã€‚</li>
</ul>
</blockquote>
<hr/>
<ol start="2">
<li>hashtableï¼ˆå“ˆå¸Œè¡¨ï¼‰</li>
</ol>
<ul>
<li>
<p>å½“ Hash ä¸­çš„ <strong>å…ƒç´ å¾ˆå¤š</strong> æˆ– <strong>field/value è¾ƒå¤§</strong> æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬ä¸º <strong>å“ˆå¸Œè¡¨</strong> å­˜å‚¨ã€‚</p>
</li>
<li>
<p>æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <strong>å­—å…¸ï¼ˆdictï¼‰</strong> ï¼Œåº•å±‚é‡‡ç”¨ <strong>å“ˆå¸Œè¡¨ + é“¾åœ°å€æ³•</strong> å®ç°å†²çªè§£å†³ã€‚</p>
</li>
<li>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤çš„æ—¶é—´å¤æ‚åº¦æ¥è¿‘ O(1)ã€‚</li>
</ul>
</li>
<li>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>å†…å­˜å ç”¨ç›¸å¯¹æ›´å¤šã€‚</li>
</ul>
</li>
</ul>
<p>è¡¨æ ¼å¯¹æ¯”è®²è§£ï¼š</p>













































<table><thead><tr><th>ç‰¹æ€§</th><th><strong>ziplist / listpackï¼ˆå‹ç¼©åˆ—è¡¨ï¼‰</strong></th><th><strong>hashtableï¼ˆå“ˆå¸Œè¡¨ï¼‰</strong></th></tr></thead><tbody><tr><td><strong>å­˜å‚¨æ–¹å¼</strong></td><td>ä¸€å—è¿ç»­å†…å­˜ï¼ŒæŒ‰é¡ºåºç´§å‡‘å­˜å‚¨ field å’Œ value</td><td>æ•°ç»„ + å“ˆå¸Œå‡½æ•°æ˜ å°„ï¼Œå†²çªç”¨é“¾è¡¨ï¼ˆæˆ– rehash æ—¶åŒè¡¨ï¼‰</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>ç´§å‡‘ï¼ŒèŠ‚çœå†…å­˜</td><td>é¢å¤–æŒ‡é’ˆå’Œå“ˆå¸Œæ¡¶ï¼Œå†…å­˜å¼€é”€å¤§</td></tr><tr><td><strong>æŸ¥æ‰¾æ•ˆç‡</strong></td><td>éœ€è¦éå†ï¼Œæ—¶é—´å¤æ‚åº¦ O(N)</td><td>å“ˆå¸ŒæŸ¥æ‰¾ï¼Œå¹³å‡ O(1)</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å…ƒç´ ä¸ªæ•°å°‘ï¼ˆâ‰¤512ï¼Œé»˜è®¤ï¼‰ä¸” field/value è¾ƒå°ï¼ˆâ‰¤64 å­—èŠ‚ï¼‰</td><td>å…ƒç´ å¤šæˆ– field/value è¾ƒå¤§</td></tr><tr><td><strong>ä¼˜ç‚¹</strong></td><td>å ç”¨å°‘ã€ç¼“å­˜å‹å¥½</td><td>æŸ¥æ‰¾å¿«ã€æ’å…¥åˆ é™¤æ€§èƒ½é«˜</td></tr><tr><td><strong>ç¼ºç‚¹</strong></td><td>æŸ¥æ‰¾æ•ˆç‡ä½ï¼Œæ•°æ®ä¸€å¤šæ€§èƒ½ä¸‹é™</td><td>å†…å­˜æµªè´¹å¤šï¼Œrehash æ—¶å¼€é”€è¾ƒå¤§</td></tr><tr><td><strong>åº”ç”¨ä¸¾ä¾‹</strong></td><td>å°å¯¹è±¡å­˜å‚¨ï¼Œå¦‚ç”¨æˆ·é…ç½®</td><td>å¤§å¯¹è±¡å­˜å‚¨ï¼Œå¦‚ç”¨æˆ·ä¿¡æ¯ã€è´­ç‰©è½¦æ•°æ®</td></tr></tbody></table>
<p>Hash åœ¨é¡¹ç›®ä¸­çš„åº”ç”¨åœºæ™¯ï¼š</p>
<p>Redis çš„ Hash ç‰¹åˆ«é€‚åˆå­˜å‚¨å¯¹è±¡ï¼Œæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯ã€é…ç½®ã€ç»Ÿè®¡æ•°æ®ç­‰ã€‚ä»¥ä¸‹ç»™å‡ ä¸ªå¸¸è§åº”ç”¨åœºæ™¯ï¼š</p>
<ol>
<li>ç¼“å­˜å¯¹è±¡æ•°æ®ï¼ˆæ›¿ä»£ JSON å­˜å‚¨ï¼‰</li>
</ol>
<p>ä¾‹å¦‚å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">HSET <span class="hljs-keyword">user</span>:<span class="hljs-number">1001</span> name "Tom" age "18" gender "male" 
HGET <span class="hljs-keyword">user</span>:<span class="hljs-number">1001</span> name # <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> "Tom" 
HGETALL <span class="hljs-keyword">user</span>:<span class="hljs-number">1001</span> # <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> è·å–æ•´ä¸ªå¯¹è±¡
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å¯ä»¥åªæ›´æ–°æŸä¸ªå­—æ®µï¼Œä¸éœ€è¦æ•´ä¸ª JSON è¦†ç›–ã€‚</li>
<li>å†…å­˜å ç”¨æ¯” JSON/string æ›´å°ã€‚</li>
</ul>
<hr/>
<ol start="2">
<li>å­˜å‚¨è®¡æ•°å™¨æˆ–ç»Ÿè®¡ä¿¡æ¯</li>
</ol>
<p>é€‚åˆä¿å­˜ <strong>å¤šç»´åº¦çš„è®¡æ•°</strong>ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-variable constant_">HINCRBY</span> <span class="hljs-symbol">article:</span><span class="hljs-number">1001</span><span class="hljs-symbol">:stats</span> views <span class="hljs-number">1</span>
<span class="hljs-variable constant_">HINCRBY</span> <span class="hljs-symbol">article:</span><span class="hljs-number">1001</span><span class="hljs-symbol">:stats</span> likes <span class="hljs-number">1</span>
<span class="hljs-variable constant_">HGETALL</span> <span class="hljs-symbol">article:</span><span class="hljs-number">1001</span><span class="hljs-symbol">:stats</span>
<span class="hljs-comment"># -&gt; {views: 101, likes: 20}</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>é€‚ç”¨åœºæ™¯ï¼šæ–‡ç« æµè§ˆé‡ã€ç‚¹èµæ•°ã€å•†å“é”€é‡ã€‚</p>
<hr/>
<ol start="3">
<li>å­˜å‚¨é…ç½®æˆ–å…ƒæ•°æ®</li>
</ol>
<p>ä¾‹å¦‚ç³»ç»Ÿé…ç½®ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">HSET system:config site_name <span class="hljs-string">"MySite"</span> theme <span class="hljs-string">"dark"</span> max_users <span class="hljs-string">"1000"</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>ä¿®æ”¹é…ç½®åªéœ€è¦æ”¹æŸä¸ªå­—æ®µï¼Œä¸å½±å“å…¶ä»–éƒ¨åˆ†ã€‚</li>
</ul>
<hr/>
<ol start="4">
<li>Session/Token å­˜å‚¨</li>
</ol>
<p>å­˜å‚¨ç”¨æˆ·ä¼šè¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">HSET</span> <span class="hljs-string">session:token123</span> <span class="hljs-string">user_id</span> <span class="hljs-number">1001 </span><span class="hljs-string">expire_at</span> <span class="hljs-number">1690000000</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ä¾¿äºå¿«é€Ÿè¯»å–å’Œæ›´æ–°ã€‚</p>
<hr/>
<ol start="5">
<li>ç”µå•†è´­ç‰©è½¦</li>
</ol>
<p>ç”¨æˆ·è´­ç‰©è½¦ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">HSET cart:1001 product:2001 2   <span class="hljs-comment"># å•†å“2001æ•°é‡ä¸º2</span>
HSET cart:1001 product:2002 1
HGETALL cart:1001
<span class="hljs-comment"># -&gt; {product:2001: 2, product:2002: 1}</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>é«˜æ•ˆæ”¯æŒå•ä¸ªå•†å“å¢åˆ æ”¹ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€ SetÂ </h3>
<p>Redis çš„ <strong>Set</strong> æ˜¯ä¸€ä¸ª <strong>æ— åºã€å»é‡çš„é›†åˆ</strong>ï¼Œæ”¯æŒé›†åˆè¿ç®—ï¼ˆäº¤é›†ã€å¹¶é›†ã€å·®é›†ï¼‰ã€‚</p>
<p>åº•å±‚å®ç°ï¼š</p>
<ol>
<li>intsetï¼ˆæ•´æ•°é›†åˆï¼‰</li>
</ol>
<ul>
<li>
<p>å½“ Set é‡Œçš„å…ƒç´ ï¼š</p>
<ul>
<li>å…¨éƒ¨æ˜¯æ•´æ•°</li>
<li>ä¸”æ•°é‡è¾ƒå°‘ï¼ˆé»˜è®¤ â‰¤ 512ï¼‰</li>
</ul>
</li>
<li>
<p>Redis ä¼šç”¨ <strong>intset</strong> æ¥å­˜å‚¨ã€‚</p>
</li>
<li>
<p><strong>intset</strong> æœ¬è´¨æ˜¯ä¸€ä¸ªç´§å‡‘çš„æ•°ç»„ï¼Œå†…éƒ¨å…ƒç´ æœ‰åºå­˜æ”¾ï¼Œä¸å…è®¸é‡å¤ã€‚</p>
</li>
<li>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>èŠ‚çœå†…å­˜ï¼ˆç´§å‡‘å­˜å‚¨ï¼Œç±»ä¼¼ ziplistï¼‰</li>
<li>æŸ¥æ‰¾æ—¶å¯ä»¥ç”¨äºŒåˆ†æœç´¢ O(log N)</li>
</ul>
</li>
<li>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>åªæ”¯æŒæ•´æ•°</li>
<li>è¶…è¿‡æ•°é‡é˜ˆå€¼æˆ–æ··åˆéæ•´æ•°æ—¶ä¼šè‡ªåŠ¨è½¬ä¸º hashtable</li>
</ul>
</li>
</ul>
<hr/>
<ol start="2">
<li>hashtableï¼ˆå­—å…¸ï¼‰</li>
</ol>
<ul>
<li>
<p>å½“é›†åˆä¸­ï¼š</p>
<ul>
<li>å…ƒç´ æ˜¯å­—ç¬¦ä¸²ï¼ˆéæ•´æ•°ï¼‰</li>
<li>æˆ–è€…æ•°é‡è¶…è¿‡ <code>set-max-intset-entries</code>ï¼ˆé»˜è®¤ 512ï¼‰</li>
</ul>
</li>
<li>
<p>Redis ä¼šç”¨ <strong>å“ˆå¸Œè¡¨</strong> å­˜å‚¨ï¼Œæ¯ä¸ªå…ƒç´ ä½œä¸º keyï¼Œvalue ä¸ºç©ºã€‚</p>
</li>
<li>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤çš„å¹³å‡å¤æ‚åº¦ O(1)</li>
<li>æ”¯æŒä»»æ„å­—ç¬¦ä¸²</li>
</ul>
</li>
<li>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ç›¸æ¯” intset å ç”¨æ›´å¤šå†…å­˜</li>
</ul>
</li>
</ul>
<p>Set åœ¨é¡¹ç›®ä¸­çš„åº”ç”¨åœºæ™¯</p>
<p>Redis Set å› ä¸ºå…·å¤‡ <strong>å»é‡ã€æ— åºã€é›†åˆè¿ç®—</strong> çš„ç‰¹æ€§ï¼Œåœ¨å®é™…å¼€å‘ä¸­éå¸¸æœ‰ç”¨ã€‚</p>
<ol>
<li>ç”¨æˆ·æ ‡ç­¾ã€å…´è¶£ã€å–œå¥½</li>
</ol>

<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-variable constant_">SADD</span> <span class="hljs-symbol">user:</span><span class="hljs-number">1001</span><span class="hljs-symbol">:tags</span> <span class="hljs-string">"sports"</span> <span class="hljs-string">"music"</span> <span class="hljs-string">"travel"</span>
<span class="hljs-variable constant_">SADD</span> <span class="hljs-symbol">user:</span><span class="hljs-number">1002</span><span class="hljs-symbol">:tags</span> <span class="hljs-string">"music"</span> <span class="hljs-string">"tech"</span>
<span class="hljs-variable constant_">SINTER</span> <span class="hljs-symbol">user:</span><span class="hljs-number">1001</span><span class="hljs-symbol">:tags</span> <span class="hljs-symbol">user:</span><span class="hljs-number">1002</span><span class="hljs-symbol">:tags</span>   <span class="hljs-comment"># -&gt; å…±åŒå…´è¶£</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>åº”ç”¨ï¼šæ¨èç³»ç»Ÿã€å…´è¶£åŒ¹é…ã€‚</li>
</ul>
<hr/>
<ol start="2">
<li>å»é‡åŠŸèƒ½</li>
</ol>
<p>æ¯”å¦‚å­˜å‚¨å”¯ä¸€çš„è®¿é—® IPï¼š</p>
<pre><code class="hljs language-bash" lang="bash">SADD ip:today <span class="hljs-string">"192.168.1.1"</span>
SADD ip:today <span class="hljs-string">"192.168.1.2"</span>
SCARD ip:today   <span class="hljs-comment"># -&gt; ä»Šæ—¥ç‹¬ç«‹ IP æ•°</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>åº”ç”¨ï¼šç»Ÿè®¡ UVï¼ˆUnique Visitorï¼‰</li>
</ul>
<hr/>
<ol start="3">
<li>å…³æ³¨/ç²‰ä¸å…³ç³»ï¼ˆç¤¾äº¤åº”ç”¨ï¼‰</li>
</ol>

<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">SADD</span> <span class="hljs-string">user:1001:follow</span> <span class="hljs-number">1002 </span><span class="hljs-number">1003 </span><span class="hljs-number">1004</span>   <span class="hljs-comment"># ç”¨æˆ·1001å…³æ³¨çš„äºº</span>
<span class="hljs-string">SADD</span> <span class="hljs-string">user:1002:fans</span> <span class="hljs-number">1001</span>               <span class="hljs-comment"># ç”¨æˆ·1002çš„ç²‰ä¸</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>å¯ä»¥å¿«é€Ÿæ±‚äº¤é›†ï¼šå…±åŒå¥½å‹</li>
<li>å¯ä»¥è®¡ç®—å·®é›†ï¼šæ¨èå¯èƒ½è®¤è¯†çš„äºº</li>
</ul>
<hr/>
<ol start="4">
<li>é»‘åå•/ç™½åå•</li>
</ol>

<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">SADD</span> <span class="hljs-string">blacklist</span> <span class="hljs-number">1001 </span><span class="hljs-number">1002</span>
<span class="hljs-string">SISMEMBER</span> <span class="hljs-string">blacklist</span> <span class="hljs-number">1003</span>   <span class="hljs-comment"># -&gt; 0 (ä¸åœ¨é»‘åå•)</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>åº”ç”¨ï¼šæƒé™æ§åˆ¶ã€å°ç¦ç”¨æˆ·</li>
</ul>
<hr/>
<ol start="5">
<li>æŠ½å¥–/éšæœºæ¨è</li>
</ol>

<pre><code class="hljs language-bash" lang="bash">SADD lottery 101 102 103 104
SRANDMEMBER lottery 1   <span class="hljs-comment"># éšæœºæŠ½ä¸€ä¸ª</span>
SPOP lottery            <span class="hljs-comment"># æŠ½å‡ºå¹¶ç§»é™¤</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>åº”ç”¨ï¼šæŠ½å¥–ç³»ç»Ÿã€éšæœºå†…å®¹æ¨è</li>
</ul>
<h3 data-id="heading-3">ä¸‰ã€ ZsetÂ </h3>
<p>åº•å±‚å®ç°ï¼š</p>
<p>Zset åº•å±‚ä¸»è¦æœ‰ä¸¤ç§ç»“æ„ï¼Œå’Œ Hash/Set ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ <strong>åŒç»“æ„å®ç°</strong>ï¼š</p>
<p>1.Â ziplistï¼ˆå‹ç¼©åˆ—è¡¨ï¼ŒRedis 3.2 åæ”¹ä¸º listpackï¼‰</p>
<ul>
<li>å½“å…ƒç´ ä¸ªæ•°è¾ƒå°‘ï¼Œä¸” member/score è¾ƒå°æ—¶ä½¿ç”¨ã€‚</li>
<li>å…ƒç´ ä»¥ <strong>score + member ç´§å‡‘å­˜å‚¨</strong>ï¼ŒæŒ‰ score é¡ºåºæ’åˆ—ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šèŠ‚çœå†…å­˜ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šæŸ¥è¯¢å¤æ‚åº¦ O(N)ï¼Œä¸é€‚åˆå¤§æ•°æ®é‡ã€‚</li>
</ul>
<blockquote>
<p>è§¦å‘æ¡ä»¶ï¼ˆé»˜è®¤é…ç½®ï¼‰ï¼š</p>
<ul>
<li><code>zset-max-ziplist-entries</code> â‰¤ 128</li>
<li><code>zset-max-ziplist-value</code> â‰¤ 64 å­—èŠ‚</li>
</ul>
</blockquote>
<p>è¶…è¿‡é˜ˆå€¼æ—¶ä¼šè‡ªåŠ¨è½¬ä¸º skiplistã€‚</p>
<hr/>
<p>2.skiplistï¼ˆè·³è¡¨ï¼‰+ dict</p>
<p>å½“æ•°æ®é‡è¾ƒå¤§æˆ–å…ƒç´ è¾ƒå¤æ‚æ—¶ï¼ŒRedis ä½¿ç”¨ <strong>åŒç»“æ„</strong>ï¼š</p>
<ul>
<li><strong>å“ˆå¸Œè¡¨ï¼ˆdictï¼‰</strong> ï¼šå­˜å‚¨ member â†’ score æ˜ å°„ï¼Œæ”¯æŒ O(1) æŸ¥æ‰¾ã€‚</li>
<li><strong>è·³è¡¨ï¼ˆskiplistï¼‰</strong> ï¼šæŒ‰ç…§ score æ’åºå­˜å‚¨ï¼Œæ”¯æŒèŒƒå›´æŸ¥è¯¢å’Œæœ‰åºéå†ã€‚</li>
</ul>
<p>Zset åœ¨é¡¹ç›®ä¸­çš„åº”ç”¨åœºæ™¯</p>
<p>Zset çš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ <strong>æœ‰åºæ€§</strong>ï¼Œåœ¨é¡¹ç›®ä¸­å¸¸ç”¨äºéœ€è¦æ’åºçš„æ•°æ®ã€‚</p>
<ol>
<li>æ’è¡Œæ¦œï¼ˆç»å…¸åœºæ™¯ï¼‰</li>
</ol>

<pre><code class="hljs language-bash" lang="bash">ZADD rank 100 user1
ZADD rank 200 user2
ZADD rank 150 user3
ZREVRANGE rank 0 2 WITHSCORES  <span class="hljs-comment"># å‰ä¸‰å</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>åº”ç”¨ï¼šæ¸¸æˆæ’è¡Œæ¦œã€ç§¯åˆ†æ¦œã€çƒ­é—¨å†…å®¹æ’åã€‚</li>
</ul>
<hr/>
<ol start="2">
<li>å»¶æ—¶é˜Ÿåˆ— / å®šæ—¶ä»»åŠ¡</li>
</ol>
<p>åˆ©ç”¨ score å­˜å‚¨ä»»åŠ¡æ‰§è¡Œæ—¶é—´æˆ³ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ZADD delay_queue 1690000000 <span class="hljs-string">"task1"</span>
ZADD delay_queue 1690000050 <span class="hljs-string">"task2"</span>
ZRANGEBYSCORE delay_queue 0 1690000000   <span class="hljs-comment"># å–åˆ°æœŸä»»åŠ¡</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>åº”ç”¨ï¼šå®šæ—¶å‘é€æ¶ˆæ¯ã€å»¶è¿Ÿæ‰§è¡Œä»»åŠ¡ã€‚</li>
</ul>
<hr/>
<ol start="3">
<li>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰</li>
</ol>
<p>åˆ©ç”¨ score å­˜å‚¨ä»»åŠ¡ä¼˜å…ˆçº§ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ZADD queue <span class="hljs-number">1</span> <span class="hljs-string">"task_low"</span>
ZADD queue <span class="hljs-number">10</span> <span class="hljs-string">"task_high"</span>
ZPOPMIN queue   # å–ä¼˜å…ˆçº§æœ€é«˜çš„ä»»åŠ¡
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>åº”ç”¨ï¼šå¼‚æ­¥ä»»åŠ¡è°ƒåº¦ã€‚</li>
</ul>
<hr/>
<ol start="4">
<li>æ—¶é—´åºåˆ—æ•°æ®ï¼ˆæ—¥å¿—/ç‚¹å‡»æµï¼‰</li>
</ol>
<p>åˆ©ç”¨ score å­˜å‚¨æ—¶é—´æˆ³ï¼Œmember å­˜å‚¨äº‹ä»¶ IDï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ZADD click_log <span class="hljs-number">1690000001</span> <span class="hljs-string">"click1"</span>
ZADD click_log <span class="hljs-number">1690000002</span> <span class="hljs-string">"click2"</span>
ZRANGEBYSCORE click_log <span class="hljs-number">1690000000</span> <span class="hljs-number">1690000100</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>åº”ç”¨ï¼šç½‘ç«™è®¿é—®æ—¥å¿—ã€ç”¨æˆ·è¡Œä¸ºæ•°æ®ã€‚</li>
</ul>
<hr/>
<ol start="5">
<li>æ¨èç³»ç»Ÿ</li>
</ol>
<p>å­˜å‚¨ç‰©å“æƒé‡ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ZADD recommend <span class="hljs-number">0.95</span> <span class="hljs-string">"item1"</span>
ZADD recommend <span class="hljs-number">0.87</span> <span class="hljs-string">"item2"</span>
ZREVRANGE recommend <span class="hljs-number">0</span> <span class="hljs-number">9</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>åº”ç”¨ï¼šæ¨è top10 å•†å“/å†…å®¹ã€‚</li>
</ul>
<hr/>
<ol start="6">
<li>å»é‡ + æ’åº</li>
</ol>
<p>ä¾‹å¦‚â€œæœ€è¿‘ç™»å½•çš„ç”¨æˆ·â€ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ZADD recent_login <span class="hljs-number">1690001000</span> <span class="hljs-string">"user1"</span>
ZADD recent_login <span class="hljs-number">1690002000</span> <span class="hljs-string">"user2"</span>
ZREVRANGE recent_login <span class="hljs-number">0</span> <span class="hljs-number">9</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li>åº”ç”¨ï¼šæœ€è¿‘æ´»è·ƒç”¨æˆ·åˆ—è¡¨ã€‚</li>
</ul>
<h3 data-id="heading-4">è¡¥å……è·³è¡¨ï¼ˆskiplistï¼‰å†…å®¹ï¼š</h3>
<p>ä¾‹å­ï¼šæœ‰åºé›†åˆå­˜å‚¨ä¸€äº›æ•°å­—</p>
<p>å‡è®¾æˆ‘ä»¬è¦å¾€è·³è¡¨é‡Œå­˜ <code>10, 20, 30, 40</code>ï¼ŒèŠ‚ç‚¹é«˜åº¦æ˜¯éšæœºç”Ÿæˆçš„ã€‚æœ€ç»ˆè·³è¡¨å¤§æ¦‚é•¿è¿™æ ·ï¼ˆç®€åŒ–è¡¨ç¤ºï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Level 2:</span>   <span class="hljs-string">Head</span> <span class="hljs-string">â†’</span> <span class="hljs-number">10</span> <span class="hljs-string">â†’</span> <span class="hljs-number">30</span>
<span class="hljs-attr">Level 1:</span>   <span class="hljs-string">Head</span> <span class="hljs-string">â†’</span> <span class="hljs-number">10</span> <span class="hljs-string">â†’</span> <span class="hljs-number">20</span> <span class="hljs-string">â†’</span> <span class="hljs-number">30</span> <span class="hljs-string">â†’</span> <span class="hljs-number">40</span>
<span class="hljs-attr">Level 0:</span>   <span class="hljs-string">Head</span> <span class="hljs-string">â†’</span> <span class="hljs-number">10</span> <span class="hljs-string">â†’</span> <span class="hljs-number">20</span> <span class="hljs-string">â†’</span> <span class="hljs-number">30</span> <span class="hljs-string">â†’</span> <span class="hljs-number">40</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-5">1. æŸ¥æ‰¾ï¼ˆSearchï¼‰</h3>
<p>ç›®æ ‡ï¼šæŸ¥æ‰¾ <strong>30</strong></p>
<ul>
<li>
<p>ä»æœ€é«˜å±‚ï¼ˆLevel 2ï¼‰å¼€å§‹ï¼šHead â†’ 10 â†’ 30ï¼Œæ‰¾åˆ°ç›®æ ‡ã€‚</p>
</li>
<li>
<p>å¦‚æœæŸ¥æ‰¾ <strong>25</strong>ï¼š</p>
<ul>
<li>Level 2: Head â†’ 10ï¼Œä¸‹ä¸€æ­¥æ˜¯ 30 &gt; 25ï¼Œä¸èƒ½èµ° â†’ ä¸‹åˆ° Level 1</li>
<li>Level 1: ä» 10 â†’ 20ï¼Œä¸‹ä¸€æ­¥æ˜¯ 30 &gt; 25ï¼Œä¸èƒ½èµ° â†’ ä¸‹åˆ° Level 0</li>
<li>Level 0: ä» 20 â†’ 30ï¼Œå‘ç° 30 &gt; 25ï¼Œåœæ­¢ â†’ è¯´æ˜ 25 ä¸å­˜åœ¨ã€‚</li>
</ul>
</li>
</ul>
<p>æ€è·¯ï¼šå…ˆå¿«è·³ï¼Œå†ç²¾ç»†èµ°ã€‚</p>
<hr/>
<h3 data-id="heading-6">2. æ’å…¥ï¼ˆInsertï¼‰</h3>
<p>ç›®æ ‡ï¼šæ’å…¥ <strong>25</strong></p>
<ol>
<li>
<p>å…ˆâ€œæŸ¥æ‰¾â€25ï¼Œè®°å½•æ¯å±‚æœ€åä¸€ä¸ªå°äº 25 çš„èŠ‚ç‚¹ï¼ˆæˆ‘ä»¬å«å®ƒ <code>update[]</code> æ•°ç»„ï¼‰ã€‚</p>
<ul>
<li>Level 2: 10</li>
<li>Level 1: 20</li>
<li>Level 0: 20</li>
</ul>
</li>
<li>
<p>éšæœºç”Ÿæˆæ–°èŠ‚ç‚¹é«˜åº¦ï¼Œæ¯”å¦‚é«˜åº¦=2ï¼ˆLevel 0 å’Œ Level 1ï¼‰ã€‚</p>
</li>
<li>
<p>è‹¥éšæœºé«˜åº¦ä¸ºÂ <code>k</code>ï¼Œåˆ™æ–°èŠ‚ç‚¹ä¼šå‡ºç°åœ¨Â <strong>ç¬¬ 0 å±‚åˆ°ç¬¬ k-1 å±‚</strong>ï¼ˆå…±Â <code>k</code>Â ä¸ªå±‚çº§ï¼‰</p>
</li>
<li>
<p>æ›´æ–°æŒ‡é’ˆï¼š</p>
<ul>
<li>åœ¨ Level 0 å’Œ Level 1ï¼ŒæŠŠ <code>20.forward</code> æ”¹æŒ‡å‘ <code>25</code>ï¼Œ<code>25.forward</code> æŒ‡å‘åŸæ¥çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li>
</ul>
</li>
</ol>
<p>ç»“æœï¼š25 è¢«æ’å…¥åˆ°åˆé€‚ä½ç½®ã€‚</p>
<hr/>
<h3 data-id="heading-7">3. åˆ é™¤ï¼ˆDeleteï¼‰</h3>
<p>ç›®æ ‡ï¼šåˆ é™¤ <strong>20</strong></p>
<ol>
<li>
<p>æŸ¥æ‰¾ 20ï¼ŒåŒæ—¶è®°å½•æ¯å±‚å‰é©±èŠ‚ç‚¹ï¼ˆ<code>update[]</code>ï¼‰ã€‚</p>
<ul>
<li>Level 2: å‰é©±=10ï¼ˆ20 ä¸åœ¨è¿™ä¸€å±‚ï¼‰</li>
<li>Level 1: å‰é©±=10</li>
<li>Level 0: å‰é©±=10</li>
</ul>
</li>
<li>
<p>æ›´æ–°æŒ‡é’ˆï¼š</p>
<ul>
<li>æŠŠå‰é©±çš„ forward æ”¹ä¸ºè·³è¿‡ 20ï¼Œç›´æ¥æŒ‡å‘ 30ã€‚</li>
</ul>
</li>
<li>
<p>å¦‚æœæŸä¸€å±‚åˆ å®Œåè¯¥å±‚ç©ºäº†ï¼Œå°±é™ä½è·³è¡¨çš„æœ€å¤§å±‚æ•°ã€‚</p>
</li>
</ol>
<p>ç»“æœï¼š20 è¢«ç§»é™¤ï¼Œè·³è¡¨ç»“æ„ä¾ç„¶æœ‰åºã€‚</p>
<hr/>
<p>æ€»ç»“è§„å¾‹</p>
<ul>
<li><strong>æŸ¥æ‰¾</strong>ï¼šä»ä¸Šå±‚å¾€ä¸‹é€å±‚è·³ï¼Œæ‰¾åˆ°æˆ–ç¡®å®šä¸å­˜åœ¨ã€‚</li>
<li><strong>æ’å…¥</strong>ï¼šæŸ¥æ‰¾æ—¶é¡ºä¾¿è®°å½•å‰é©± â†’ éšæœºé«˜åº¦ â†’ ä¿®æ”¹å‰é©±æŒ‡é’ˆã€‚</li>
<li><strong>åˆ é™¤</strong>ï¼šæŸ¥æ‰¾æ—¶é¡ºä¾¿è®°å½•å‰é©± â†’ ä¿®æ”¹å‰é©±æŒ‡é’ˆè·³è¿‡ç›®æ ‡ã€‚</li>
</ul>
<h3 data-id="heading-8">æ€»ç»“ï¼š</h3>
<p>è‡³æ­¤ï¼ŒRedisä¸­å¸¸è§çš„å‡ ç§æ•°æ®ç±»å‹çš„åº•å±‚å®ç°å°±å·²å®Œæˆè®²è§£ï¼Œåç»­ä¼šè¡¥å……bitmapçš„åº•å±‚å®ç°ï¼Œ</p>
<p>æœ€åï¼Œæ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼Œå­¦ä¹ è¿‡ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºï¼Œæˆ‘ä¼šåŠæ—¶ä¸ºå¤§å®¶è§£ç­”ï¼Œè°¢è°¢å¤§å®¶ï¼</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Draw Callä»1388é™åˆ°26ï¼šæ¨¡å‹çš„"ç˜¦èº«å››éƒ¨æ›²"]]></title>    <link>https://juejin.cn/post/7601757036485640202</link>    <guid>https://juejin.cn/post/7601757036485640202</guid>    <pubDate>2026-02-01T06:52:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601757036485640202" data-draft-id="7601169244454469658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Draw Callä»1388é™åˆ°26ï¼šæ¨¡å‹çš„&quot;ç˜¦èº«å››éƒ¨æ›²&quot;"/> <meta itemprop="keywords" content="cesium,WebGL"/> <meta itemprop="datePublished" content="2026-02-01T06:52:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="goodName"/> <meta itemprop="url" content="https://juejin.cn/user/767898264016683"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Draw Callä»1388é™åˆ°26ï¼šæ¨¡å‹çš„"ç˜¦èº«å››éƒ¨æ›²"
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/767898264016683/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    goodName
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T06:52:44.000Z" title="Sun Feb 01 2026 06:52:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<h2 data-id="heading-0">Draw Callä»1388é™åˆ°26ï¼šBIMæ¨¡å‹çš„"ç˜¦èº«å››éƒ¨æ›²"</h2>
<h3 data-id="heading-1">ä¸€ã€å…ˆä¸Šæ•ˆæœï¼šå››æ­¥ä¼˜åŒ–çš„"ææ€–"æ•°æ®</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/577a187e94d64b00a0543e09a96c74a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29vZE5hbWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770533564&amp;x-signature=u1i8CybJ1VhM%2FvtBuQwCvsUM4l0%3D" alt="image.png" loading="lazy"/></p>
<p>ç›´æ¥çœ‹æˆ‘ä»¬æœ€ç›´è§‚çš„å¯¹æ¯”ï¼š</p>















































<table><thead><tr><th>é˜¶æ®µ</th><th>æ ¸å¿ƒæ“ä½œ</th><th>Draw Calls</th><th>ä½“ç§¯</th><th>å…³é”®æŒ‡æ ‡å˜åŒ–</th></tr></thead><tbody><tr><td>åŸå§‹</td><td>ç›´æ¥å¯¼å‡º</td><td><strong>1388</strong></td><td>18.29MB</td><td>æ¯ä¸ªæ„ä»¶ç‹¬ç«‹æ¸²æŸ“</td></tr><tr><td>Step1</td><td>æ ¡éªŒä¿®å¤</td><td>1388</td><td>18.29MB</td><td>å»æ‰éæ³•å±æ€§ï¼Œä¸ºåç»­é“ºè·¯</td></tr><tr><td>Step2</td><td>GPUå®ä¾‹åŒ–</td><td><strong>922</strong></td><td>15.17MB</td><td>15ä¸‡+é¡¶ç‚¹è½¬ä¸ºå®ä¾‹æ¸²æŸ“</td></tr><tr><td>Step3</td><td>Feature IDç»‘å®š</td><td>922</td><td>16.85MB</td><td>æ¯ä¸ªæ„ä»¶æœ‰äº†"èº«ä»½è¯"</td></tr><tr><td>Step4</td><td>Meshåˆå¹¶</td><td><strong>26</strong></td><td>34.86MB*</td><td><strong>ç»ˆæç»æ€ï¼ŒDraw Callé™98%</strong></td></tr></tbody></table>
<p>*æ³¨ï¼šStep4ä½“ç§¯æš‚æ—¶ä¸Šæ¶¨æ˜¯å› ä¸ºå¢åŠ äº†é¡¶ç‚¹å±æ€§æ•°æ®ï¼ˆFeature IDå’Œé¢œè‰²ï¼‰ï¼Œä¸‹ä¸€ç¯‡ç”¨Dracoå‹ç¼©åä¼šå¤§å¹…å›è½ï¼Œä½†Draw Callä¿æŒ26ä¸å˜ã€‚</p>
<p><strong>1388 â†’ 26</strong>ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦èŠçš„"é»‘é­”æ³•"ã€‚</p>
<h3 data-id="heading-2">äºŒã€ä¼˜åŒ–æ€»è§ˆï¼šå››æ­¥"æ•´å®¹"æµç¨‹</h3>
<p>BIMæ¨¡å‹ï¼ˆRevitå¯¼å‡ºï¼‰æœ€å¤§çš„ç—…ï¼š<strong>æ¯ä¸ªæ„ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„Meshï¼Œå‡ ä½•åŒèƒèƒäº’ä¸è®¤è¯†ï¼ŒCPUå’ŒGPUç–¯ç‹‚"ä¼ çº¸æ¡"</strong>ã€‚</p>
<p>æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆåˆ†å››æ­¥ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[åŸå§‹æ¨¡å‹&lt;br&gt;1388ä¸ªDraw Calls] --&gt; B
    subgraph B [Step1: æ¸…åƒåœ¾]
        B1[ä¿®å¤å&lt;br&gt;1388ä¸ªDraw Calls]
        B2[åˆ é™¤éæ³•å±æ€§&lt;br&gt;ä¿®å¤4å­—èŠ‚å¯¹é½]
    end
    B --&gt; C
    subgraph C [Step2: å»é‡]
        C1[å®ä¾‹åŒ–å&lt;br&gt;922ä¸ªDraw Calls]
        C2[EXT_mesh_gpu_instancing&lt;br&gt;ç›¸åŒå‡ ä½•å˜å®ä¾‹]
    end
    C --&gt; D
    subgraph D [Step3: ä¸Šæˆ·å£]
        D1[å¢åŠ Featureå&lt;br&gt;922ä¸ªDraw Calls]
        D2[EXT_mesh_features&lt;br&gt;EXT_instance_features]
    end
    D --&gt; E
    subgraph E [Step4: å¤§åˆå¹¶]
        E1[æœ€ç»ˆ&lt;br&gt;26ä¸ªDraw Calls]
        E2[Meshåˆå¹¶ + é¡¶ç‚¹é¢œè‰²&lt;br&gt;æè´¨å½’ç±»]
    end
</code></pre>
<p><strong>å››ä¸ªGLTFæ‰©å±•çš„åä½œæˆ˜æœ¯</strong>ï¼š</p>
<ul>
<li><code>EXT_mesh_gpu_instancing</code>ï¼šè§£å†³"é‡å¤æ„ä»¶"ï¼ˆå¦‚100æ‰‡ç›¸åŒçš„é—¨ï¼‰</li>
<li><code>EXT_mesh_features</code>ï¼šç»™<strong>éå®ä¾‹åŒ–</strong>æ„ä»¶ä¸Šæˆ·å£ï¼ˆé¡¶ç‚¹å±æ€§_Feature_IDï¼‰</li>
<li><code>EXT_instance_features</code>ï¼šç»™<strong>å®ä¾‹åŒ–</strong>æ„ä»¶ä¸Šæˆ·å£ï¼ˆæ¯ä¸ªå®ä¾‹ä¸€ä¸ªIDï¼‰</li>
<li><code>EXT_structural_metadata</code>ï¼šå»ºæˆ·å£æœ¬ï¼ˆProperty Tableï¼Œå­˜Element IDç­‰ä¸šåŠ¡æ•°æ®ï¼‰</li>
</ul>
<h3 data-id="heading-3">ä¸‰ã€è¯¦ç»†æ‹†è§£ï¼šä¸€æ­¥æ­¥æ€æ­»Draw Call</h3>
<h4 data-id="heading-4">Step 1ï¼šæ¸…åƒåœ¾ â€”â€” ä¿®å¤GLTFæ ¡éªŒé”™è¯¯</h4>
<p>Revitå¯¼å‡ºçš„GLBæ€»æ˜¯å¸¦ç€"ç§è´§"ï¼š<code>Qid</code>ã€<code>mid</code>ã€<code>mapsymbolId</code>...è¿™äº›éæ ‡å‡†å±æ€§ä¼šè®©CesiuméªŒè¯å™¨ç›´æ¥çº¢æ¸©ï¼Œç”šè‡³å¯¼è‡´åç»­å·¥å…·é“¾æŠ¥é”™ã€‚</p>
<p><strong>æ ¸å¿ƒæ“ä½œ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç»™æ¨¡å‹"æ´—æ¾¡"ï¼šåˆ é™¤éæ³•å±æ€§</span>
<span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> gltf_data[<span class="hljs-string">'nodes'</span>]:
    node.pop(<span class="hljs-string">'Qid'</span>, <span class="hljs-literal">None</span>)          <span class="hljs-comment"># Revitçš„æ„ä»¶IDï¼Œä½†éæ ‡å‡†</span>
    node.pop(<span class="hljs-string">'index'</span>, <span class="hljs-literal">None</span>)        <span class="hljs-comment"># éæ³•å±æ€§</span>
    node.pop(<span class="hljs-string">'mapsymbolId'</span>, <span class="hljs-literal">None</span>)  <span class="hljs-comment"># Cesiumä¸è®¤è¯†</span>
    
    <span class="hljs-comment"># åˆ é™¤ç©ºçš„childrenæ•°ç»„ï¼ˆæ´ç™–æ“ä½œï¼‰</span>
    <span class="hljs-keyword">if</span> node.get(<span class="hljs-string">'children'</span>) == []:
        <span class="hljs-keyword">del</span> node[<span class="hljs-string">'children'</span>]
</code></pre>
<p><strong>è¿˜æœ‰4å­—èŠ‚å¯¹é½å¼ºè¿«ç—‡æ²»ç–—</strong>ï¼šGLTFè§„èŒƒè¦æ±‚æ‰€æœ‰bufferæ•°æ®å¿…é¡»4å­—èŠ‚å¯¹é½ï¼ŒRevitç»å¸¸"æ­ªç€ç«™"ï¼Œæˆ‘ä»¬è¦æŠŠå®ƒ"æ‰¶æ­£"ï¼Œå¦åˆ™GPUè¯»å–ä¼šæŠ¥é”™ã€‚</p>
<h4 data-id="heading-5">Step 2ï¼šGPUå®ä¾‹åŒ– â€”â€” å‡ ä½•å»é‡ï¼ˆEXT_mesh_gpu_instancingï¼‰</h4>
<p><strong>æ•ˆæœ</strong>ï¼šDraw Call 1388 â†’ 922ï¼ˆé™33%ï¼‰</p>
<p>åŸç†ï¼š100æ‰‡ identical çš„é—¨ï¼Œä¼ ç»Ÿæ–¹å¼æ˜¯ç”»100æ¬¡ï¼›å®ä¾‹åŒ–åæ˜¯ç”»1æ¬¡ï¼Œä¼ 100ä¸ªå˜æ¢çŸ©é˜µã€‚</p>
<p><strong>ä¸€é”®å‘½ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">gltf-transform instance input.glb output.glb --min 10
</code></pre>
<p>è¿™æ—¶å€™çœ‹æˆªå›¾é‡Œçš„<code>Instanced vertices: 156312</code>ï¼Œæ„å‘³ç€è¿™15ä¸‡+é¡¶ç‚¹æ˜¯é€šè¿‡å®ä¾‹åŒ–æ¸²æŸ“çš„â€”â€”å®ƒä»¬å…±äº«<strong>åŒä¸€ä»½å‡ ä½•æ•°æ®</strong>ï¼Œåªä¼ ä¸åŒçš„<code>translation/rotation/scale</code>ã€‚</p>
<p><strong>ä½†æœ‰ä¸ªé—®é¢˜</strong>ï¼šåˆå¹¶åæ€ä¹ˆçŸ¥é“ç”¨æˆ·ç‚¹äº†å“ªæ‰‡é—¨ï¼Ÿè¿™å°±å¼•å‡ºStep 3ã€‚</p>
<h4 data-id="heading-6">Step 3ï¼šFeature IDä½“ç³» â€”â€” ç»™æ„ä»¶"ä¸Šæˆ·å£"</h4>
<p>è¿™æ˜¯<strong>æœ€ç¡¬æ ¸</strong>çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬è¦åœ¨WebGLçš„é¡¶ç‚¹æ•°æ®é‡Œè—ä¸€ä¸ª"æš—å·"ï¼š<code>_FEATURE_ID_0</code>ã€‚</p>
<h5 data-id="heading-7">3.1 éå®ä¾‹åŒ–æ„ä»¶ï¼šEXT_mesh_features</h5>
<p>å¯¹äºæ²¡è¢«å®ä¾‹åŒ–çš„å‡ ä½•ï¼ˆå¦‚å¼‚å½¢æ¥¼æ¿ï¼‰ï¼Œç›´æ¥åœ¨é¡¶ç‚¹å±æ€§é‡Œå¡IDï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç»™æ¯ä¸ªé¡¶ç‚¹åˆ†é…Feature IDï¼ˆåŒä¸€æ„ä»¶ç”¨ç›¸åŒIDï¼‰</span>
feature_ids = np.full(vertex_count, property_table_row, dtype=np.uint16)

<span class="hljs-comment"># ç»‘å®šåˆ°GLTF primitive</span>
prim[<span class="hljs-string">'attributes'</span>][<span class="hljs-string">'_FEATURE_ID_0'</span>] = feature_acc_idx
prim[<span class="hljs-string">'extensions'</span>][<span class="hljs-string">'EXT_mesh_features'</span>] = {
    <span class="hljs-string">'featureIds'</span>: [{
        <span class="hljs-string">'featureCount'</span>: unique_feature_ids,
        <span class="hljs-string">'attribute'</span>: <span class="hljs-number">0</span>,        <span class="hljs-comment"># å¯¹åº” _FEATURE_ID_0</span>
        <span class="hljs-string">'propertyTable'</span>: <span class="hljs-number">0</span>     <span class="hljs-comment"># æŸ¥å“ªå¼ è¡¨</span>
    }]
}
</code></pre>
<h5 data-id="heading-8">3.2 å®ä¾‹åŒ–æ„ä»¶ï¼šEXT_instance_features</h5>
<p>å¯¹äºé‚£100æ‰‡é—¨ï¼ˆå®ä¾‹åŒ–ååªæœ‰ä¸€ä¸ªMeshï¼‰ï¼Œéœ€è¦ç»™æ¯ä¸ªå®ä¾‹ä¸€ä¸ªIDï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¯ä¸ªå®ä¾‹ä¸€ä¸ªFeature ID</span>
feature_ids = np.arange(instance_count, dtype=np.uint32) + start_id

<span class="hljs-comment"># æ”¾åˆ°instancingçš„attributesé‡Œï¼ˆå’ŒTRANSLATION/ROTATIONåŒçº§ï¼‰</span>
attributes[<span class="hljs-string">'_FEATURE_ID_0'</span>] = feature_acc_idx

<span class="hljs-comment"># åœ¨nodeä¸Šå£°æ˜</span>
node[<span class="hljs-string">'extensions'</span>][<span class="hljs-string">'EXT_instance_features'</span>] = {
    <span class="hljs-string">'featureIds'</span>: [{
        <span class="hljs-string">'featureCount'</span>: instance_count,
        <span class="hljs-string">'attribute'</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">'propertyTable'</span>: <span class="hljs-number">0</span>
    }]
}
</code></pre>
<h5 data-id="heading-9">3.3 å»ºæˆ·å£æœ¬ï¼šEXT_structural_metadata</h5>
<p>å…‰æœ‰IDä¸å¤Ÿï¼Œè¿˜è¦æŠŠIDæ˜ å°„åˆ°<strong>Element ID</strong>ï¼ˆRevité‡Œçš„æ„ä»¶IDï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Property Tableï¼šFeature ID â†’ Element ID</span>
{
  <span class="hljs-string">"schema"</span>: {
    <span class="hljs-string">"classes"</span>: {
      <span class="hljs-string">"class_element"</span>: {
        <span class="hljs-string">"properties"</span>: {
          <span class="hljs-string">"elementID"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"STRING"</span>},  <span class="hljs-comment">// å­˜"3579221"</span>
          <span class="hljs-string">"name"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"STRING"</span>}        <span class="hljs-comment">// å­˜"æ ‡å‡†é—¨"</span>
        }
      }
    }
  },
  <span class="hljs-string">"propertyTables"</span>: [{
    <span class="hljs-string">"class"</span>: <span class="hljs-string">"class_element"</span>,
    <span class="hljs-string">"count"</span>: <span class="hljs-number">1000</span>,
    <span class="hljs-string">"properties"</span>: {
      <span class="hljs-string">"elementID"</span>: {<span class="hljs-string">"values"</span>: æŒ‡å‘bufferçš„accessorç´¢å¼•}
    }
  }]
}
</code></pre>
<p><strong>å·¥ä½œæµ</strong>ï¼šç‚¹å‡»æ¨¡å‹ â†’ Cesiumè¯»<code>_FEATURE_ID_0</code>ï¼ˆæ¯”å¦‚42ï¼‰â†’ æŸ¥Property Tableç¬¬42è¡Œ â†’ å¾—åˆ°<code>elementID: "3579221"</code> â†’ æŸ¥ä¸šåŠ¡åº“å¾—çŸ¥è¿™æ˜¯"ä¸‰æ¥¼ç”·å•æ‰€ç¬¬äºŒæ‰‡é—¨"ã€‚</p>
<h4 data-id="heading-10">Step 4ï¼šMeshåˆå¹¶ â€”â€” ç»ˆææ€æ‹›ï¼ˆé™Draw Callæ ¸å¿ƒï¼‰</h4>
<p><strong>æ•ˆæœ</strong>ï¼šDraw Call 922 â†’ <strong>26</strong>ï¼ˆé™97%ï¼ï¼‰</p>
<p>å®ä¾‹åŒ–è§£å†³äº†"é‡å¤æ„ä»¶"ï¼Œä½†è¿˜æœ‰å¤§é‡<strong>ç‹¬ä¸€æ— äºŒ</strong>çš„å°æ„ä»¶ï¼ˆä¸åŒå½¢çŠ¶çš„æ¢ã€æ¿ã€æŸ±ï¼‰ã€‚<strong>Meshåˆå¹¶</strong>å°±æ˜¯æŠŠç›¸åŒæè´¨çš„meshå…¨éƒ¨"ç„Š"åœ¨ä¸€èµ·ã€‚</p>
<p><strong>åˆ†ç±»ç­–ç•¥</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è¯†åˆ«å·²è¢«å®ä¾‹åŒ–çš„meshï¼ˆè¿™äº›ä¸èƒ½åŠ¨ï¼ï¼‰</span>
instanced_meshes = get_instanced_mesh_indices(gltf_data)

<span class="hljs-comment"># å‰©ä¸‹çš„æŒ‰æè´¨åˆ†ç±»</span>
textured = []       <span class="hljs-comment"># æœ‰è´´å›¾çš„ï¼šæŒ‰è´´å›¾åˆå¹¶</span>
opaque_solid = []   <span class="hljs-comment"># ä¸é€æ˜çº¯è‰²ï¼šå…¨éƒ¨ç„Šæˆä¸€ä¸ªmeshï¼</span>
transparent = []    <span class="hljs-comment"># é€æ˜çš„ï¼šå•ç‹¬ä¸€ä¸ªmeshï¼ˆé¿å…æ·±åº¦æ’åºé—®é¢˜ï¼‰</span>

<span class="hljs-comment"># é¡¶ç‚¹æ•°æ®ç›´æ¥æ‹¼æ¥ï¼ˆæ³¨æ„è¦ç”¨ä¸–ç•ŒçŸ©é˜µå˜æ¢ï¼Œé¿å…å åœ¨åŸç‚¹ï¼‰</span>
merged_vertices = np.vstack([m[<span class="hljs-string">'vertices'</span>] <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> opaque_solid])
merged_indices = np.concatenate([m[<span class="hljs-string">'indices'</span>] + offset <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> opaque_solid])
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆç”¨é¡¶ç‚¹é¢œè‰²ï¼ˆCOLOR_0ï¼‰ï¼Ÿ</strong></p>
<p>å¦‚æœä¸è¿™ä¹ˆåšï¼Œæ¯ä¸ªä¸åŒé¢œè‰²çš„æ„ä»¶éƒ½è¦åˆ‡åˆ†ä¸€ä¸ªMaterialï¼Œåˆ‡æ¢Materialåˆä¼šäº§ç”Ÿæ–°çš„Draw Callï¼æŠŠé¢œè‰²ç»‘åœ¨é¡¶ç‚¹ä¸Šï¼Œ<strong>ä¸€ä¸ªMaterialèµ°å¤©ä¸‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æè´¨é¢œè‰² â†’ é¡¶ç‚¹é¢œè‰²ï¼ˆRGBAï¼‰</span>
colors = np.tile(base_color * <span class="hljs-number">255</span>, (vertex_count, <span class="hljs-number">1</span>))
prim[<span class="hljs-string">'attributes'</span>][<span class="hljs-string">'COLOR_0'</span>] = color_acc_idx  <span class="hljs-comment"># VEC4 UNSIGNED_BYTE normalized</span>
</code></pre>
<p><strong>26ä¸ªDraw Callçš„æ„æˆ</strong>ï¼š</p>
<ul>
<li>è‹¥å¹²è´´å›¾æè´¨ï¼ˆæ¯ä¸ªè´´å›¾1ä¸ªï¼‰</li>
<li>1ä¸ªä¸é€æ˜çº¯è‰²å¤§mesh</li>
<li>1ä¸ªé€æ˜mesh</li>
<li>è‹¥å¹²å®ä¾‹åŒ–meshï¼ˆæ¯ä¸ªå®ä¾‹åŒ–å¯¹è±¡1ä¸ªï¼‰</li>
</ul>
<h3 data-id="heading-11">å››ã€å…³é”®è®¤çŸ¥ï¼šä¸ºä»€ä¹ˆä½“ç§¯æš‚æ—¶å˜å¤§äº†ï¼Ÿ</h3>
<p>æ³¨æ„åˆ°Step4åä½“ç§¯ä»16MBæ¶¨åˆ°äº†34MBï¼Ÿåˆ«æ…Œï¼Œè¿™æ˜¯<strong>æ­£å¸¸çš„ä¸­é—´æ€</strong>ï¼š</p>
<ol>
<li><strong>å¢åŠ äº†<code>_FEATURE_ID_0</code></strong>ï¼šæ¯ä¸ªé¡¶ç‚¹+4å­—èŠ‚ï¼ˆuint16å¯¹é½åˆ°4å­—èŠ‚ï¼‰</li>
<li><strong>å¢åŠ äº†<code>COLOR_0</code></strong>ï¼šæ¯ä¸ªé¡¶ç‚¹+4å­—èŠ‚ï¼ˆRGBAï¼‰</li>
<li><strong>å­˜äº†Property Table</strong>ï¼šå­—ç¬¦ä¸²æ•°æ®ï¼ˆelementIDç­‰ï¼‰</li>
</ol>
<p>ä½†è¿™äº›æ•°æ®æ˜¯<strong>é«˜åº¦å¯å‹ç¼©</strong>çš„ï¼š</p>
<ul>
<li>å‡ ä½•æ•°æ®ï¼ˆé¡¶ç‚¹ä½ç½®ã€æ³•çº¿ï¼‰ç”¨Dracoå‹ç¼© â†’ èƒ½å‹æ‰70%</li>
<li>è´´å›¾ç”¨KTX2/Basiså‹ç¼© â†’ èƒ½å‹æ‰80%</li>
<li>Feature IDæ˜¯è¿ç»­æ•´æ•°ï¼Œå‹ç¼©ç‡æé«˜</li>
</ul>
<h3 data-id="heading-12">äº”ã€æ€»ç»“ï¼šä¼˜åŒ–çš„æœ¬è´¨æ˜¯"è®©CPUå°‘è¯´è¯"</h3>
<p>è®°ä½è¿™ä¸ªå…¬å¼ï¼š</p>
<blockquote>
<p><strong>ä¼˜åŒ–çš„æœ¬è´¨ä¸æ˜¯è®©GPUå°‘å¹²æ´»ï¼Œè€Œæ˜¯è®©CPUå°‘è¯´è¯ï¼ˆå‡å°‘Draw Callï¼‰ã€‚</strong></p>
</blockquote>
<ul>
<li><strong>Step1</strong>ï¼šè§£å†³"æ ¼å¼é”™è¯¯"ï¼ˆè®©å·¥å…·é“¾èƒ½å¤„ç†ï¼‰</li>
<li><strong>Step2</strong>ï¼šè§£å†³"é‡å¤å‡ ä½•"ï¼ˆ100æ‰‡é—¨ç”»1æ¬¡ï¼‰</li>
<li><strong>Step3</strong>ï¼šè§£å†³"èº«ä»½è¯†åˆ«"ï¼ˆèƒ½æ‹¾å–ã€èƒ½æŸ¥è¯¢ï¼‰</li>
<li><strong>Step4</strong>ï¼šè§£å†³"çç¢ç»˜åˆ¶"ï¼ˆæŠŠå°ç¢å—ç„Šæˆå¤§å—ï¼‰</li>
</ul>
<p>GPUè¡¨ç¤ºï¼š"é¡¶ç‚¹æ•°é‡ä½ éšä¾¿åŠ ï¼ˆåæ­£æˆ‘å¹¶è¡Œè®¡ç®—å¿«ï¼‰ï¼Œä½†ä½ åˆ«ä¸€ç›´çƒ¦æˆ‘ï¼ˆDraw Callå¤ªå¤šï¼‰ã€‚"</p>
<h3 data-id="heading-13">å…­ã€åŠ è½½ï¼šCesiumçš„åŠ è½½æ•ˆæœ</h3>
<p>åŸºäºä½ çš„è¦æ±‚ï¼Œè¡¥å……<strong>Step 6ï¼šCesiumå®æˆ˜æ•ˆæœ</strong>â€”â€”è¿™æ˜¯æ£€éªŒå‰é¢æ‰€æœ‰ä¼˜åŒ–æ˜¯å¦æˆåŠŸçš„"éªŒé‡‘çŸ³"ã€‚æ¯•ç«Ÿï¼Œ<strong>Draw Callä»1388é™åˆ°26ï¼Œæœ€ç»ˆè¦åœ¨æµè§ˆå™¨é‡Œè·‘èµ·æ¥æ‰ç®—æ•°</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-14">å…­ã€Cesiumå®æˆ˜ï¼šä¸æ»‘å¸§ç‡ + æŒ‡å“ªæ‰“å“ªçš„æ‹¾å–</h3>
<p>å‰é¢æ‰€æœ‰ä¼˜åŒ–éƒ½æ˜¯"å¹•åå·¥ä½œ"ï¼Œç°åœ¨çœ‹çœ‹å°å‰æ•ˆæœâ€”â€”å½“æ¨¡å‹åœ¨Cesiumé‡Œè·‘èµ·æ¥ï¼Œå¸§ç‡ç¨³äº†ï¼Œé¼ æ ‡æŒ‡å“ªå°±èƒ½é€‰ä¸­å“ªæ ¹æ¢ã€å“ªæ‰‡çª—ã€‚</p>
<h4 data-id="heading-15">6.1 å¸§ç‡å¯¹æ¯”ï¼šä»PPTåˆ°ä¸æ»‘</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1a83e615edb4d50970baecc086c719f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29vZE5hbWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770533564&amp;x-signature=B8CYw3jdrdmEzxw3mcr0ffpKvgk%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä¸ºä»€ä¹ˆå¸§ç‡æå‡è¿™ä¹ˆæ˜æ˜¾ï¼Ÿ</strong></p>
<p>Cesiumçš„æ¸²æŸ“ç®¡çº¿ä¸­ï¼ŒDraw Callæ˜¯å¤´å·æ€§èƒ½æ€æ‰‹ã€‚1388æ¬¡ç»˜åˆ¶æ„å‘³ç€CPUæ¯å¸§è¦å‡†å¤‡1388æ¬¡æ¸²æŸ“çŠ¶æ€ã€åˆ‡æ¢æè´¨ã€ä¸Šä¼ æ•°æ®ï¼›è€Œ26æ¬¡ç»˜åˆ¶æ—¶ï¼ŒCPUåŸºæœ¬åœ¨"æ‘¸é±¼"ï¼ŒGPUå…¨åŠ›å¹²æ´»ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>å†·çŸ¥è¯†</strong>ï¼šåœ¨WebGLé‡Œï¼Œ<strong>CPUå‡†å¤‡æ¸²æŸ“çŠ¶æ€çš„æ—¶é—´å¾€å¾€æ¯”GPUå®é™…ç»˜åˆ¶æ—¶é—´è¿˜é•¿</strong>ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå‡å°‘Draw Callæ¯”å‡å°‘é¡¶ç‚¹æ•°æ›´èƒ½æå‡å¸§ç‡ã€‚</p>
</blockquote>
<h4 data-id="heading-16">6.2 æ‹¾å–åŠŸèƒ½ï¼šç»ˆäºèƒ½"æŒ‡å“ªæ‰“å“ª"äº†</h4>
<p>ä¼˜åŒ–å‰çš„é—®é¢˜ï¼š<strong>ç‚¹åŠå¤©é€‰ä¸ä¸­ä¸€æ ¹æŸ±å­</strong>ï¼Œæˆ–è€…<strong>é€‰ä¸­äº†ä¸çŸ¥é“æ˜¯å“ªä¸ªæ„ä»¶</strong>ï¼ˆæ²¡æœ‰Element IDå…³è”ä¸šåŠ¡æ•°æ®ï¼‰ã€‚</p>
<p>ä¼˜åŒ–åï¼ŒåŸºäºStep 3ç»‘å®šçš„Feature IDä½“ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°<strong>åƒç´ çº§ç²¾å‡†æ‹¾å–</strong>ã€‚</p>
<h5 data-id="heading-17">æ‹¾å–åŸç†å›é¡¾</h5>
<p>å½“ç”¨æˆ·åœ¨Cesiumä¸­ç‚¹å‡»æ¨¡å‹æ—¶ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<pre><code class="hljs language-css" lang="css">é¼ æ ‡ç‚¹å‡» â†’ Cesiumè¯»å–è¯¥åƒç´ æ·±åº¦ â†’ æ‰¾åˆ°å¯¹åº”å›¾å…ƒ
    â†“
è¯»å– _FEATURE_ID_0 å€¼ï¼ˆæ¯”å¦‚ <span class="hljs-number">42</span>ï¼‰
    â†“
æŸ¥ EXT_structural_metadata çš„ Property <span class="hljs-selector-tag">Table</span>
    â†“
ç¬¬<span class="hljs-number">42</span>è¡Œ â†’ elementID: <span class="hljs-string">"3579221"</span>, name: <span class="hljs-string">"æ ‡å‡†é—¨"</span>
    â†“
æ‹¿ç€<span class="hljs-number">3579221</span>å»æŸ¥ä¸šåŠ¡æ•°æ®åº“ â†’ å±•ç¤ºæ„ä»¶ä¿¡æ¯
</code></pre>
<p><strong>å¯¹äºå®ä¾‹åŒ–æ„ä»¶çš„ç‰¹æ®Šå¤„ç†</strong>ï¼š</p>
<p>å¦‚æœæ˜¯é‚£100æ‰‡é—¨ï¼ˆå®ä¾‹åŒ–æ¸²æŸ“ï¼‰ï¼ŒCesiumä¼šè‡ªåŠ¨å¤„ç†<code>EXT_instance_features</code>ï¼Œ<code>pickedFeature.featureId</code>è¿”å›çš„æ˜¯<strong>å®ä¾‹çº§åˆ«çš„ID</strong>ï¼ˆ0-99ï¼‰ï¼Œè€Œä¸æ˜¯ç½‘æ ¼çº§åˆ«çš„IDã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨Step 3è¦ç»™æ¯ä¸ªå®ä¾‹å•ç‹¬åˆ†é…Feature IDã€‚</p>
<p>Cesiumä¸­æ¨¡å‹çš„è§£æåŸç†ï¼Œæœ‰æœºä¼šä¼šå•ç‹¬å‡ºä¸€ç¯‡æ–‡ç« ç»†è¯´ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®©å›¾ç‰‡å­¦ä¼šâ€œç­‰ä½ çœ‹åˆ°å†å‡ºåœºâ€â€”â€”æ‡’åŠ è½½å…¨æ”»ç•¥]]></title>    <link>https://juejin.cn/post/7601169244454633498</link>    <guid>https://juejin.cn/post/7601169244454633498</guid>    <pubDate>2026-02-01T07:47:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601169244454633498" data-draft-id="7601169244454486042" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®©å›¾ç‰‡å­¦ä¼šâ€œç­‰ä½ çœ‹åˆ°å†å‡ºåœºâ€â€”â€”æ‡’åŠ è½½å…¨æ”»ç•¥"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-01T07:47:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaoxue_"/> <meta itemprop="url" content="https://juejin.cn/user/4065372122398027"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®©å›¾ç‰‡å­¦ä¼šâ€œç­‰ä½ çœ‹åˆ°å†å‡ºåœºâ€â€”â€”æ‡’åŠ è½½å…¨æ”»ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4065372122398027/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xiaoxue_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T07:47:57.000Z" title="Sun Feb 01 2026 07:47:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å›¾ç‰‡æ‡’åŠ è½½å…¨è§£æï¼šä»ä¼ ç»Ÿ Scroll åˆ°ç°ä»£ IntersectionObserver</h2>
<p>åœ¨å‰ç«¯å¼€å‘çš„ä¸–ç•Œé‡Œï¼Œæ€§èƒ½ä¼˜åŒ–æ°¸è¿œæ˜¯ç»•ä¸å¼€çš„æ ¸å¿ƒè¯é¢˜âœ¨ã€‚å°¤å…¶æ˜¯åœ¨ç”µå•†ã€èµ„è®¯ã€ç¤¾äº¤è¿™ç±»å›¾ç‰‡å¯†é›†å‹çš„é¡µé¢ä¸­ï¼Œå¤§é‡å›¾ç‰‡çš„åŠ è½½å¾€å¾€ä¼šæˆä¸ºé¡µé¢æ€§èƒ½çš„ â€œç»Šè„šçŸ³â€â€”â€” é¦–å±åŠ è½½æ…¢ååï¼Œç”¨æˆ·æ²¡è€å¿ƒç›´æ¥ç¦»å¼€ï¼›éå¯è§†åŒºåŸŸçš„å›¾ç‰‡ç™½ç™½æ¶ˆè€—å¸¦å®½ï¼ŒæœåŠ¡å™¨å‹åŠ›ä¹Ÿå¾’å¢ã€‚</p>
<p>è€Œå›¾ç‰‡æ‡’åŠ è½½ï¼ˆLazy Loadï¼‰ä½œä¸ºå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„ â€œæ˜æ˜Ÿæ–¹æ¡ˆâ€ï¼Œæ­£æ˜¯ä¸ºè§£å†³è¿™äº›ç—›ç‚¹è€Œç”Ÿã€‚ä»Šå¤©æˆ‘ä»¬å°±ä»æ¦‚å¿µã€åŸç†åˆ°å®æˆ˜ï¼Œå…¨æ–¹ä½æ‹†è§£å›¾ç‰‡æ‡’åŠ è½½çš„å®ç°é€»è¾‘ï¼Œå¯¹æ¯”ä¼ ç»Ÿä¸ç°ä»£æ–¹æ¡ˆçš„ä¼˜åŠ£ï¼Œè®©ä½ å½»åº•åƒé€è¿™ä¸ªé«˜é¢‘è€ƒç‚¹ï¼</p>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯å›¾ç‰‡æ‡’åŠ è½½ï¼ŸğŸ¤”</h3>
<p>å›¾ç‰‡æ‡’åŠ è½½ï¼Œæœ¬è´¨æ˜¯ä¸€ç§ â€œæŒ‰éœ€åŠ è½½â€ çš„èµ„æºåŠ è½½ç­–ç•¥ï¼šæµè§ˆå™¨è§£æé¡µé¢æ—¶ï¼Œä¸ä¼šä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰<code>&lt;img&gt;</code>æ ‡ç­¾å¯¹åº”çš„å›¾ç‰‡ï¼Œè€Œæ˜¯å…ˆåŠ è½½<strong>é¦–å±å¯è§†åŒºåŸŸ</strong>å†…çš„å›¾ç‰‡ï¼›å½“ç”¨æˆ·æ»šåŠ¨é¡µé¢ï¼Œä½¿åŸæœ¬éšè—åœ¨è§†å£å¤–çš„å›¾ç‰‡è¿›å…¥å¯è§†åŒºåŸŸï¼ˆViewportï¼‰æ—¶ï¼Œå†è§¦å‘è¿™äº›å›¾ç‰‡çš„çœŸå®åŠ è½½ã€‚</p>
<p>æ ¸å¿ƒå®ç°é€»è¾‘çš„å…³é”®æ˜¯ â€œèµ„æºå»¶è¿Ÿç»‘å®šâ€ï¼šå°†å›¾ç‰‡çš„çœŸå®åœ°å€æš‚å­˜åˆ°<code>data-src</code>ï¼ˆè‡ªå®šä¹‰å±æ€§ï¼‰ä¸­ï¼Œè€Œéç›´æ¥èµ‹å€¼ç»™<code>src</code>å±æ€§ï¼ˆ<code>src</code>å…ˆæŒ‡å‘ä½“ç§¯æå°çš„å ä½å›¾ï¼Œå¦‚ 1x1 é€æ˜å›¾ï¼‰ï¼Œåªæœ‰æ»¡è¶³ â€œè¿›å…¥è§†å£â€ æ¡ä»¶æ—¶ï¼Œæ‰æŠŠ<code>data-src</code>çš„å€¼æ›¿æ¢åˆ°<code>src</code>ä¸­ï¼Œè§¦å‘çœŸå®çš„å›¾ç‰‡ HTTP è¯·æ±‚ã€‚</p>
<h3 data-id="heading-2">äºŒã€ä¸ºä»€ä¹ˆéœ€è¦å›¾ç‰‡æ‡’åŠ è½½ï¼ŸğŸ’¡</h3>
<p>æ²¡æœ‰æ‡’åŠ è½½çš„é¡µé¢ï¼Œæµè§ˆå™¨è§£æ<code>&lt;img&gt;</code>æ ‡ç­¾æ—¶ï¼Œåªè¦çœ‹åˆ°<code>src</code>å±æ€§å°±ä¼šç«‹åˆ»å‘èµ·è¯·æ±‚ï¼Œè¿™ä¼šå¸¦æ¥ä¸¤ä¸ªè‡´å‘½é—®é¢˜ï¼š</p>
<ol>
<li><strong>é¦–å±åŠ è½½é€Ÿåº¦æ…¢</strong>ï¼šé¦–é¡µçš„æ‰€æœ‰å›¾ç‰‡è¯·æ±‚ä¼šå’Œ HTMLã€CSSã€JS çš„åŠ è½½ â€œæŠ¢å â€ ç½‘ç»œèµ„æºï¼Œå¯¼è‡´é¦–å± HTML æ¸²æŸ“ã€æ ·å¼åŠ è½½è¢«é˜»å¡ï¼Œç”¨æˆ·é¢å¯¹ç©ºç™½é¡µé¢çš„ç­‰å¾…æ—¶é—´å˜é•¿ï¼ˆæ•°æ®æ˜¾ç¤ºï¼Œé¦–å±åŠ è½½è¶…è¿‡ 3 ç§’ï¼Œç”¨æˆ·æµå¤±ç‡è¶… 50%ï¼‰ã€‚</li>
<li><strong>æ— æ•ˆè¯·æ±‚æµªè´¹</strong>ï¼šè§†å£ä¹‹å¤–çš„å›¾ç‰‡ï¼ˆå¦‚ä¸‹æ»šæ‰èƒ½çœ‹åˆ°çš„åˆ—è¡¨é¡¹ï¼‰ï¼ŒåŠ è½½åç”¨æˆ·å¯èƒ½æ°¸è¿œä¸ä¼šæ»šåŠ¨åˆ°å¯¹åº”ä½ç½®ï¼Œæ—¢æµªè´¹äº†ç”¨æˆ·çš„ç§»åŠ¨å¸¦å®½ï¼ˆå°¤å…¶æ˜¯ç§»åŠ¨ç«¯ï¼‰ï¼Œä¹Ÿå¢åŠ äº†æœåŠ¡å™¨çš„å¹¶å‘å‹åŠ›ã€‚</li>
</ol>
<p>è€Œæ‡’åŠ è½½çš„å¼•å…¥ï¼Œæ°å¥½è§£å†³äº†è¿™äº›é—®é¢˜ï¼š</p>
<ol>
<li>
<p>âœ… æå‡ç”¨æˆ·ä½“éªŒï¼šé¦–å±å†…å®¹å¿«é€Ÿæ¸²æŸ“ï¼Œç”¨æˆ·æ— éœ€é•¿æ—¶é—´ç­‰å¾…ï¼›</p>
</li>
<li>
<p>âœ… èŠ‚çœå¸¦å®½èµ„æºï¼šä»…åŠ è½½ç”¨æˆ·èƒ½çœ‹åˆ°çš„å›¾ç‰‡ï¼Œå‡å°‘æ— æ•ˆè¯·æ±‚ï¼›</p>
</li>
<li>
<p>âœ… é™ä½æœåŠ¡å™¨å‹åŠ›ï¼šåˆ†æ•£å›¾ç‰‡è¯·æ±‚çš„æ—¶é—´å’Œå¹¶å‘é‡ï¼Œé¿å…ç¬é—´é«˜å¹¶å‘ã€‚</p>
</li>
</ol>
<h3 data-id="heading-3">ä¸‰ã€å›¾ç‰‡æ‡’åŠ è½½çš„è§£å†³æ–¹æ¡ˆæ ¸å¿ƒğŸ”‘</h3>
<p>æ‰€æœ‰æ‡’åŠ è½½æ–¹æ¡ˆéƒ½å›´ç»•ä¸¤ä¸ªæ ¸å¿ƒåŸåˆ™å±•å¼€ï¼Œç¼ºä¸€ä¸å¯ï¼š</p>
<h4 data-id="heading-4">1. é¦–å±ä¼˜å…ˆ</h4>
<p>æš‚æ—¶ä¸éœ€è¦åŠ è½½çš„å›¾ç‰‡ï¼Œ<code>src</code>å±æ€§å…ˆæŒ‡å‘å°ä½“ç§¯å ä½å›¾ï¼ˆå¦‚ 1x1 é€æ˜å›¾ã€åŠ è½½ä¸­å ä½å›¾ï¼‰ï¼Œè®©æµè§ˆå™¨ä¼˜å…ˆåŠ è½½ HTMLã€CSSã€JS ç­‰æ ¸å¿ƒèµ„æºï¼Œä¿è¯é¦–å±å†…å®¹å¿«é€Ÿå‘ˆç°ã€‚</p>
<h4 data-id="heading-5">2. æŒ‰éœ€åŠ è½½</h4>
<p>é€šè¿‡ç›‘å¬é¡µé¢æ»šåŠ¨ï¼ˆæˆ–åŸç”Ÿ API ç›‘å¬äº¤é›†çŠ¶æ€ï¼‰ï¼Œå®æ—¶åˆ¤æ–­å›¾ç‰‡æ˜¯å¦è¿›å…¥è§†å£ï¼›åªæœ‰å½“å›¾ç‰‡è¿›å…¥è§†å£æ—¶ï¼Œæ‰å°†<code>data-src</code>ä¸­çš„çœŸå®åœ°å€èµ‹å€¼ç»™<code>src</code>ï¼Œè§¦å‘çœŸå®å›¾ç‰‡çš„åŠ è½½ã€‚</p>
<h3 data-id="heading-6">å››ã€å¦‚ä½•å®ç°å›¾ç‰‡æ‡’åŠ è½½ï¼ŸğŸ› ï¸</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä»ä»£ç å±‚é¢ï¼Œæ‹†è§£ä¼ ç»Ÿæ–¹æ¡ˆå’Œç°ä»£æ–¹æ¡ˆçš„å®ç°é€»è¾‘ï¼Œå¯¹æ¯”ä¸¤è€…çš„ä¼˜åŠ£ã€‚</p>
<h4 data-id="heading-7">1. ä¼ ç»Ÿæ–¹æ¡ˆï¼šç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼ˆonscroll + èŠ‚æµï¼‰</h4>
<p>è¿™æ˜¯æ—©æœŸæ‡’åŠ è½½çš„ä¸»æµå®ç°æ–¹å¼ï¼Œæ ¸å¿ƒæ˜¯ â€œç›‘å¬æ»šåŠ¨ + èŠ‚æµæ§åˆ¶ + æ‰‹åŠ¨è®¡ç®—ä½ç½®â€ã€‚</p>
<h5 data-id="heading-8">1.1 æ ¸å¿ƒæ€è·¯</h5>
<p>â‘  å›¾ç‰‡é¢„å¤„ç†ï¼šç»™éé¦–å±å›¾ç‰‡æ·»åŠ <code>lazy</code>ç±»ï¼Œ<code>src</code>èµ‹å€¼å ä½å›¾ï¼ŒçœŸå®åœ°å€å­˜åœ¨<code>data-src</code>è‡ªå®šä¹‰å±æ€§ä¸­ï¼›â‘¡ èŠ‚æµæ§åˆ¶ï¼šç»™<code>scroll</code>äº‹ä»¶ç»‘å®šèŠ‚æµå‡½æ•°ï¼Œé¿å…é«˜é¢‘è§¦å‘å¯¼è‡´æ€§èƒ½å¡é¡¿ï¼›â‘¢ è§†å£åˆ¤æ–­ï¼šæ»šåŠ¨æ—¶éå†æ‰€æœ‰<code>lazy</code>å›¾ç‰‡ï¼Œé€šè¿‡<code>getBoundingClientRect()</code>è®¡ç®—å›¾ç‰‡ä¸è§†å£çš„ä½ç½®å…³ç³»ï¼Œåˆ¤æ–­æ˜¯å¦è¿›å…¥è§†å£ï¼›â‘£ åŠ è½½å›¾ç‰‡ï¼šè‹¥å›¾ç‰‡è¿›å…¥è§†å£ï¼Œå°†<code>data-src</code>èµ‹å€¼ç»™<code>src</code>ï¼Œç§»é™¤<code>lazy</code>ç±»ã€æ·»åŠ <code>loaded</code>ç±»ï¼ˆç”¨äºæ ·å¼è¿‡æ¸¡ï¼‰ï¼Œå¹¶ç§»é™¤<code>data-src</code>å±æ€§ï¼›â‘¤ åˆå§‹åŒ–æ£€æŸ¥ï¼šé¡µé¢åŠ è½½å®Œæˆåï¼Œå…ˆæ‰§è¡Œä¸€æ¬¡æ‡’åŠ è½½åˆ¤æ–­ï¼Œé¿å…é¦–å±å†…çš„<code>lazy</code>å›¾ç‰‡æœªåŠ è½½ã€‚</p>
<h5 data-id="heading-9">1.2 ä»£ç </h5>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// èŠ‚æµå‡½æ•°ï¼šæ§åˆ¶å‡½æ•°é«˜é¢‘è§¦å‘ï¼Œé¿å…æ»šåŠ¨æ—¶æ€§èƒ½å¡é¡¿</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">func, wait</span>) {
    <span class="hljs-keyword">let</span> timeout = <span class="hljs-literal">null</span>; <span class="hljs-comment">// å®šæ—¶å™¨æ ‡è¯†ï¼Œç”¨äºæ§åˆ¶æ‰§è¡Œæ—¶æœº</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (!timeout) { <span class="hljs-comment">// è‹¥å®šæ—¶å™¨ä¸å­˜åœ¨ï¼Œè¯´æ˜å¯ä»¥æ‰§è¡Œå‡½æ•°</span>
            timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>); <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡å‡½æ•°ï¼Œä¿ç•™thiså’Œå‚æ•°</span>
                timeout = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ‰§è¡Œå®Œæˆåé‡ç½®å®šæ—¶å™¨</span>
            }, wait);
        }
    };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">lazyLoad</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> lazyImages = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'img.lazy'</span>); <span class="hljs-comment">// è·å–æ‰€æœ‰å¾…åŠ è½½çš„å›¾ç‰‡</span>
    <span class="hljs-keyword">const</span> windowHeight = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>; <span class="hljs-comment">// è·å–è§†å£é«˜åº¦</span>

    lazyImages.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> {
        <span class="hljs-comment">// è·³è¿‡å·²åŠ è½½çš„å›¾ç‰‡ï¼ˆå·²ç§»é™¤lazyç±»ï¼‰</span>
        <span class="hljs-keyword">if</span> (!img.<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'lazy'</span>)) <span class="hljs-keyword">return</span>;

        <span class="hljs-keyword">const</span> rect = img.<span class="hljs-title function_">getBoundingClientRect</span>(); <span class="hljs-comment">// è·å–å›¾ç‰‡çš„ä½ç½®ä¿¡æ¯ï¼ˆç›¸å¯¹äºè§†å£ï¼‰</span>
        <span class="hljs-comment">// æ ¸å¿ƒåˆ¤æ–­ï¼šå›¾ç‰‡é¡¶éƒ¨è¿›å…¥è§†å£ä¸‹æ–¹ï¼Œä¸”åº•éƒ¨æœªå®Œå…¨ç¦»å¼€è§†å£ä¸Šæ–¹ â†’ å›¾ç‰‡è¿›å…¥è§†å£</span>
        <span class="hljs-keyword">if</span> (rect.<span class="hljs-property">top</span> &lt; windowHeight &amp;&amp; rect.<span class="hljs-property">bottom</span> &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">if</span> (img.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Loading image via Scroll:'</span>, img.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>);
                img.<span class="hljs-property">src</span> = img.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>; <span class="hljs-comment">// æ›¿æ¢srcï¼Œè§¦å‘çœŸå®å›¾ç‰‡åŠ è½½</span>
                img.<span class="hljs-title function_">removeAttribute</span>(<span class="hljs-string">'data-src'</span>); <span class="hljs-comment">// ç§»é™¤è‡ªå®šä¹‰å±æ€§ï¼Œé¿å…é‡å¤åŠ è½½</span>
                img.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'lazy'</span>); <span class="hljs-comment">// ç§»é™¤lazyç±»ï¼Œæ ‡è®°ä¸ºå·²åŠ è½½</span>
                img.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'loaded'</span>); <span class="hljs-comment">// æ·»åŠ loadedç±»ï¼Œå®ç°é€æ˜åº¦è¿‡æ¸¡</span>
            }
        }
    });
}

<span class="hljs-comment">// èŠ‚æµå¤„ç†æ‡’åŠ è½½å‡½æ•°ï¼Œ200msæ‰§è¡Œä¸€æ¬¡</span>
<span class="hljs-keyword">const</span> throttledLazyLoad = <span class="hljs-title function_">throttle</span>(lazyLoad, <span class="hljs-number">200</span>);

<span class="hljs-comment">// ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œè§¦å‘èŠ‚æµåçš„æ‡’åŠ è½½</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, throttledLazyLoad);
<span class="hljs-comment">// çª—å£å¤§å°å˜åŒ–æ—¶ï¼Œé‡æ–°åˆ¤æ–­å›¾ç‰‡ä½ç½®</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, throttledLazyLoad);
<span class="hljs-comment">// é¡µé¢åŠ è½½å®Œæˆåï¼Œåˆå§‹åŒ–æ£€æŸ¥é¦–å±å›¾ç‰‡</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, lazyLoad);
</code></pre>
<h5 data-id="heading-10">1.3 ä»£ç å®ç°æ•ˆæœ</h5>
<p><strong>è§‚å¯Ÿç•Œé¢æ»šåŠ¨å›¾ç‰‡å˜åŒ–ä¸æ§åˆ¶å°æ‰“å°ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cd90f5fa5554c5281f1b6dc818fd331~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770537575&amp;x-signature=xhErIlk0BEFQZlDKyDSRUVcEiGA%3D" alt="QQ20260201-145940.gif" loading="lazy"/></p>
<h5 data-id="heading-11">1.4 è¯¥æ–¹æ¡ˆçš„ç¼ºç‚¹</h5>
<p>âŒ æ€§èƒ½æŸè€—ï¼šå³ä½¿åŠ äº†èŠ‚æµï¼Œ<code>scroll</code>äº‹ä»¶ä»ä¼šé«˜é¢‘è§¦å‘ï¼Œå­˜åœ¨ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼›âŒ ä»£ç å†—ä½™ï¼šéœ€è¦æ‰‹åŠ¨è®¡ç®—å…ƒç´ ä¸è§†å£çš„ä½ç½®å…³ç³»ï¼Œé€»è¾‘æ˜“å‡ºé”™ï¼Œç»´æŠ¤æˆæœ¬é«˜ï¼›âŒ é€‚é…æ€§å·®ï¼šåœ¨ç§»åŠ¨ç«¯ã€åµŒå¥—æ»šåŠ¨ç­‰å¤æ‚å¸ƒå±€ä¸­ï¼Œä½ç½®è®¡ç®—å®¹æ˜“å¤±æ•ˆï¼Œé€‚é…æˆæœ¬é«˜ã€‚</p>
<h5 data-id="heading-12">1.5 å…³é”® API è§£æ</h5>
<ul>
<li>
<p><code>throttle (func, wait)</code>ï¼šè‡ªå®šä¹‰èŠ‚æµå‡½æ•°ï¼Œæ§åˆ¶é«˜é¢‘äº‹ä»¶è§¦å‘é¢‘ç‡ï¼Œé¿å…æ€§èƒ½å¡é¡¿ã€‚</p>
<ul>
<li><code>func</code>ï¼šéœ€è¦è¢«èŠ‚æµçš„ç›®æ ‡å‡½æ•°ï¼ˆæ­¤å¤„ä¸º <code>lazyLoad</code>ï¼‰ï¼›</li>
<li><code>wait</code>ï¼šèŠ‚æµç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œæ­¤å¤„ä¸º 200msï¼Œå³å‡½æ•°æ¯ 200ms æœ€å¤šæ‰§è¡Œä¸€æ¬¡ï¼›</li>
</ul>
</li>
<li>
<p><code>document.querySelectorAll ('img.lazy')</code>ï¼šæ ¹æ® <code>CSS</code> é€‰æ‹©å™¨è·å–æ‰€æœ‰å¸¦ <code>lazy</code> ç±»çš„å¾…åŠ è½½å›¾ç‰‡ï¼Œè¿”å› <code>NodeList</code> é›†åˆã€‚</p>
</li>
<li>
<p><code>window.innerHeight</code>ï¼šè·å–å½“å‰æµè§ˆå™¨è§†å£çš„é«˜åº¦ï¼Œç”¨äºåˆ¤æ–­å›¾ç‰‡æ˜¯å¦è¿›å…¥è§†å£ã€‚</p>
</li>
<li>
<p><code>Element.classList.contains ('lazy')</code>ï¼šå¸ƒå°”å€¼ï¼Œåˆ¤æ–­å›¾ç‰‡å…ƒç´ æ˜¯å¦åŒ…å« <code>lazy </code>ç±»ï¼Œè·³è¿‡å·²åŠ è½½çš„å›¾ç‰‡ã€‚</p>
</li>
<li>
<p><code>Element.getBoundingClientRect ()</code>ï¼šè·å–å…ƒç´ ç›¸å¯¹äºè§†å£çš„ä½ç½®ä¿¡æ¯ï¼ˆè¿”å› <code>DOMRect</code> å¯¹è±¡ï¼‰ï¼ŒåŒ…å« <code>top</code>ï¼ˆå…ƒç´ é¡¶éƒ¨è·è§†å£é¡¶éƒ¨è·ç¦»ï¼‰ã€<code>bottom</code>ï¼ˆå…ƒç´ åº•éƒ¨è·è§†å£é¡¶éƒ¨è·ç¦»ï¼‰ç­‰å±æ€§ã€‚</p>
</li>
<li>
<p><code>img.removeAttribute ('data-src')</code>ï¼šç§»é™¤å›¾ç‰‡çš„ <code>data-src</code> å±æ€§ï¼Œé¿å…é‡å¤è¯»å–ã€‚</p>
</li>
<li>
<p><code>Element.classList.remove ('lazy')</code>ï¼šç§»é™¤å›¾ç‰‡çš„ <code>lazy</code> ç±»ï¼Œæ ‡è®°ä¸ºå·²åŠ è½½ã€‚</p>
</li>
<li>
<p><code>Element.classList.add ('loaded')</code>ï¼šä¸ºå›¾ç‰‡æ·»åŠ  <code>loaded</code> ç±»ï¼Œå®ç°åŠ è½½åçš„æ ·å¼è¿‡æ¸¡ã€‚</p>
</li>
<li>
<p><code>document.addEventListener ('scroll', throttledLazyLoad)</code>ï¼šç›‘å¬é¡µé¢æ»šåŠ¨äº‹ä»¶ï¼Œè§¦å‘èŠ‚æµåçš„æ‡’åŠ è½½å‡½æ•°ã€‚</p>
</li>
<li>
<p><code>window.addEventListener ('resize', throttledLazyLoad)</code>ï¼šç›‘å¬çª—å£å¤§å°å˜åŒ–äº‹ä»¶ï¼Œé‡æ–°åˆ¤æ–­å›¾ç‰‡ä½ç½®ï¼Œé€‚é…è§†å£å°ºå¯¸å˜åŒ–ã€‚</p>
</li>
<li>
<p><code>document.addEventListener ('DOMContentLoaded', lazyLoad)</code>ï¼šç›‘å¬ <code>DOM</code> åŠ è½½å®Œæˆäº‹ä»¶ï¼Œåˆå§‹åŒ–æ‰§è¡Œæ‡’åŠ è½½å‡½æ•°ï¼Œæ£€æŸ¥é¦–å±å›¾ç‰‡æ˜¯å¦éœ€è¦åŠ è½½ã€‚</p>
</li>
</ul>
<h4 data-id="heading-13">2. ç°ä»£æ–¹æ¡ˆï¼šIntersectionObserverï¼ˆæ¨èï¼‰ğŸŒŸ</h4>
<p>ä¸ºäº†è§£å†³ä¼ ç»Ÿæ–¹æ¡ˆçš„ç—›ç‚¹ï¼Œæµè§ˆå™¨åŸç”Ÿæä¾›äº†<code>IntersectionObserver</code> APIï¼ˆäº¤é›†è§‚å¯Ÿå™¨ï¼‰ï¼Œä¸“é—¨ç”¨äºç›‘å¬ â€œå…ƒç´ æ˜¯å¦è¿›å…¥è§†å£ / ä¸å…¶ä»–å…ƒç´ äº§ç”Ÿäº¤é›†â€ï¼Œæ˜¯ç›®å‰æ‡’åŠ è½½çš„æœ€ä¼˜è§£ã€‚</p>
<h5 data-id="heading-14">2.1 æ ¸å¿ƒæ€è·¯</h5>
<p>â‘  æµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼šæ— éœ€æ‰‹åŠ¨ç›‘å¬<code>scroll</code>ã€<code>resize</code>ç­‰äº‹ä»¶ï¼Œç”±æµè§ˆå™¨åº•å±‚ä¼˜åŒ–æ‰§è¡Œé€»è¾‘ï¼›â‘¡ äº¤é›†ç›‘å¬ï¼šåˆ›å»º<code>IntersectionObserver</code>å®ä¾‹ï¼ŒæŒ‡å®šè§‚å¯Ÿçš„ç›®æ ‡å…ƒç´ ï¼ˆ<code>lazy</code>å›¾ç‰‡ï¼‰ï¼›â‘¢ è‡ªåŠ¨åˆ¤æ–­ï¼šå½“ç›®æ ‡å…ƒç´ ä¸è§†å£äº§ç”Ÿäº¤é›†ï¼ˆæ»¡è¶³é˜ˆå€¼æ¡ä»¶ï¼‰æ—¶ï¼Œè§¦å‘å›è°ƒå‡½æ•°ï¼›â‘£ åŠ è½½å›¾ç‰‡ï¼šåœ¨å›è°ƒä¸­æ›¿æ¢<code>data-src</code>åˆ°<code>src</code>ï¼Œç§»é™¤<code>lazy</code>ç±»ï¼Œåœæ­¢è§‚å¯Ÿè¯¥å…ƒç´ ï¼ˆé¿å…é‡å¤è§¦å‘ï¼‰ï¼›â‘¤ é™çº§å¤„ç†ï¼šè‹¥æµè§ˆå™¨ä¸æ”¯æŒè¯¥ APIï¼Œç›´æ¥åŠ è½½æ‰€æœ‰å›¾ç‰‡ï¼Œä¿è¯åŠŸèƒ½å¯ç”¨ã€‚</p>
<h5 data-id="heading-15">2.2 ä»£ç </h5>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"DOMContentLoaded"</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> lazyImages = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">"img.lazy"</span>); <span class="hljs-comment">// è·å–æ‰€æœ‰å¾…åŠ è½½å›¾ç‰‡</span>

    <span class="hljs-comment">// æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒIntersectionObserver</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-string">"IntersectionObserver"</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {
        <span class="hljs-comment">// åˆ›å»ºäº¤é›†è§‚å¯Ÿå™¨å®ä¾‹</span>
        <span class="hljs-keyword">const</span> imageObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">entries, observer</span>) {
            <span class="hljs-comment">// éå†æ‰€æœ‰è¢«è§‚å¯Ÿçš„å…ƒç´ çš„äº¤é›†çŠ¶æ€</span>
            entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">entry</span>) {
                <span class="hljs-comment">// entry.isIntersectingï¼šå…ƒç´ æ˜¯å¦è¿›å…¥è§†å£ï¼ˆäº§ç”Ÿäº¤é›†ï¼‰</span>
                <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
                    <span class="hljs-keyword">const</span> img = entry.<span class="hljs-property">target</span>; <span class="hljs-comment">// è·å–å½“å‰è§¦å‘çš„å›¾ç‰‡å…ƒç´ </span>
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Loading image via IntersectionObserver:'</span>, img.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>);
                    img.<span class="hljs-property">src</span> = img.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>; <span class="hljs-comment">// æ›¿æ¢srcï¼ŒåŠ è½½çœŸå®å›¾ç‰‡</span>
                    img.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">"lazy"</span>); <span class="hljs-comment">// æ ‡è®°ä¸ºå·²åŠ è½½</span>
                    img.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">"loaded"</span>); <span class="hljs-comment">// æ·»åŠ æ ·å¼è¿‡æ¸¡ç±»</span>
                    observer.<span class="hljs-title function_">unobserve</span>(img); <span class="hljs-comment">// åœæ­¢è§‚å¯Ÿè¯¥å›¾ç‰‡ï¼Œé¿å…é‡å¤è§¦å‘</span>
                }
            });
        }, {
            <span class="hljs-attr">root</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// è§‚å¯Ÿçš„æ ¹å…ƒç´ ï¼šnullè¡¨ç¤ºè§†å£</span>
            <span class="hljs-attr">rootMargin</span>: <span class="hljs-string">"0px"</span>, <span class="hljs-comment">// æ ¹å…ƒç´ çš„è¾¹è·ï¼Œæ‰©å±•/ç¼©å°è§‚å¯ŸåŒºåŸŸ</span>
            <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.1</span> <span class="hljs-comment">// é˜ˆå€¼ï¼šå›¾ç‰‡10%å¯è§æ—¶è§¦å‘å›è°ƒ</span>
        });

        <span class="hljs-comment">// éå†æ‰€æœ‰lazyå›¾ç‰‡ï¼Œå¼€å§‹è§‚å¯Ÿ</span>
        lazyImages.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">image</span>) {
            imageObserver.<span class="hljs-title function_">observe</span>(image);
        });
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// é™çº§å¤„ç†ï¼šä¸æ”¯æŒæ—¶ç›´æ¥åŠ è½½æ‰€æœ‰å›¾ç‰‡</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"IntersectionObserver not supported, loading all images."</span>);
        lazyImages.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">img</span>) {
            img.<span class="hljs-property">src</span> = img.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>;
            img.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">"lazy"</span>);
            img.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">"loaded"</span>);
        });
    }
});
</code></pre>
<h5 data-id="heading-16">2.3 ä»£ç å®ç°æ•ˆæœ</h5>
<p><strong>è§‚å¯Ÿç•Œé¢æ»šåŠ¨å›¾ç‰‡å˜åŒ–ä¸æ§åˆ¶å°æ‰“å°ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba1d949fbc46426f8f192108455f7cf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770537575&amp;x-signature=dpj0oawpRR9xugVZrG5LBLOpkzI%3D" alt="QQ20260201-151226.gif" loading="lazy"/></p>
<h5 data-id="heading-17">2.4 è¯¥æ–¹æ¡ˆçš„ä¼˜åŠ¿</h5>
<p>âœ… æ— æ€§èƒ½æŸè€—ï¼šæµè§ˆå™¨åº•å±‚å®ç°ï¼Œæ— éœ€æ‰‹åŠ¨èŠ‚æµ / é˜²æŠ–ï¼Œæ€§èƒ½è¿œè¶…<code>scroll</code>ç›‘å¬ï¼›âœ… ä»£ç ç®€æ´ï¼šæ— éœ€æ‰‹åŠ¨è®¡ç®—å…ƒç´ ä½ç½®ï¼Œé€»è¾‘æ¸…æ™°ï¼Œç»´æŠ¤æˆæœ¬ä½ï¼›âœ… é€‚é…æ€§å¼ºï¼šå®Œç¾å…¼å®¹ç§»åŠ¨ç«¯ã€åµŒå¥—æ»šåŠ¨ç­‰å¤æ‚å¸ƒå±€ï¼›âœ… å¯æ‰©å±•ï¼šæ”¯æŒè‡ªå®šä¹‰è§‚å¯Ÿè§„åˆ™ï¼ˆå¦‚<code>rootMargin</code>æ‰©å±•è§‚å¯ŸåŒºåŸŸã€<code>threshold</code>è°ƒæ•´è§¦å‘é˜ˆå€¼ï¼‰ã€‚</p>
<h5 data-id="heading-18">2.5 å…³é”® API è§£æ</h5>
<ul>
<li>
<p><code>IntersectionObserver(callback, options)</code>ï¼šæ„é€ å‡½æ•°ï¼Œåˆ›å»ºäº¤é›†è§‚å¯Ÿå™¨å®ä¾‹ã€‚</p>
<ul>
<li>
<p><code>callback</code>ï¼šäº¤é›†çŠ¶æ€å˜åŒ–æ—¶çš„å›è°ƒå‡½æ•°ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>entries</code>ï¼šæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯<code>IntersectionObserverEntry</code>å¯¹è±¡ï¼ŒåŒ…å«å…ƒç´ çš„äº¤é›†çŠ¶æ€ã€ä½ç½®ç­‰ä¿¡æ¯ï¼›</li>
<li><code>observer</code>ï¼šå½“å‰çš„<code>IntersectionObserver</code>å®ä¾‹ã€‚</li>
</ul>
</li>
<li>
<p><code>options</code>ï¼šé…ç½®é¡¹ï¼ˆå¯é€‰ï¼‰ï¼š</p>
<ul>
<li><code>root</code>ï¼šè§‚å¯Ÿçš„æ ¹å…ƒç´ ï¼Œé»˜è®¤<code>null</code>ï¼ˆè§†å£ï¼‰ï¼›</li>
<li><code>rootMargin</code>ï¼šæ ¹å…ƒç´ çš„è¾¹è·ï¼Œæ ¼å¼åŒ CSS marginï¼ˆå¦‚ "100px 0"ï¼‰ï¼Œå¯æ‰©å±• / ç¼©å°è§‚å¯ŸåŒºåŸŸï¼›</li>
<li><code>threshold</code>ï¼šè§¦å‘å›è°ƒçš„é˜ˆå€¼ï¼ˆ0~1ï¼‰ï¼Œ0 è¡¨ç¤ºå…ƒç´ åˆšè¿›å…¥è§†å£å°±è§¦å‘ï¼Œ1 è¡¨ç¤ºå…ƒç´ å®Œå…¨è¿›å…¥è§†å£æ‰è§¦å‘ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>entry.isIntersecting</code>ï¼šå¸ƒå°”å€¼ï¼Œåˆ¤æ–­å…ƒç´ æ˜¯å¦ä¸æ ¹å…ƒç´ äº§ç”Ÿäº¤é›†ï¼ˆè¿›å…¥è§†å£ï¼‰ã€‚</p>
</li>
<li>
<p><code>observer.observe(target)</code>ï¼šå¼€å§‹è§‚å¯ŸæŒ‡å®šçš„ç›®æ ‡å…ƒç´ ã€‚</p>
</li>
<li>
<p><code>observer.unobserve(target)</code>ï¼šåœæ­¢è§‚å¯ŸæŒ‡å®šçš„ç›®æ ‡å…ƒç´ ã€‚</p>
</li>
</ul>
<h3 data-id="heading-19">äº”ã€CSS ä¸ HTML ä»£ç </h3>
<p><strong>CSSï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-comment">/* é¡µé¢åŸºç¡€æ ·å¼ */</span>
        <span class="hljs-selector-tag">body</span> {
            <span class="hljs-attribute">font-family</span>: Arial, sans-serif;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">text-align</span>: center;
        }

        <span class="hljs-comment">/* 
         * ç©ºç™½é—´éš”åŒºæ ·å¼
         * ç”¨äºæ’‘å¼€é¡µé¢é«˜åº¦ï¼Œæ¨¡æ‹Ÿé•¿é¡µé¢æ»šåŠ¨æ•ˆæœ
         */</span>
        <span class="hljs-selector-class">.spacer</span> {
            <span class="hljs-attribute">height</span>: <span class="hljs-number">150vh</span>;
            <span class="hljs-comment">/* æ ¸å¿ƒï¼šé«˜åº¦è®¾ç½®ä¸º 1.5 å€è§†å£é«˜åº¦ (150vh) */</span>
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">flex-direction</span>: column;
            <span class="hljs-attribute">align-items</span>: center;
            <span class="hljs-attribute">justify-content</span>: flex-start;
            <span class="hljs-comment">/* å†…å®¹ä»é¡¶éƒ¨å¼€å§‹æ’åˆ— */</span>
            <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">50vh</span>;
            <span class="hljs-comment">/* æ ¸å¿ƒï¼šæç¤ºè¯è·ç¦»é¡¶éƒ¨ 1/3 (50vh / 150vh â‰ˆ 0.33) */</span>
            <span class="hljs-attribute">box-sizing</span>: border-box;
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f9f9f9</span>;
            <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
        }

        <span class="hljs-comment">/* å›¾ç‰‡å®¹å™¨æ ·å¼ */</span>
        <span class="hljs-selector-class">.image-wrapper</span> {
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">50px</span> <span class="hljs-number">0</span>;
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
            <span class="hljs-attribute">min-height</span>: <span class="hljs-number">400px</span>;
            <span class="hljs-comment">/* æœ€å°é«˜åº¦ï¼Œé˜²æ­¢å›¾ç‰‡åŠ è½½å‰é«˜åº¦å¡Œé™· */</span>
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">align-items</span>: center;
            <span class="hljs-attribute">justify-content</span>: center;
        }

        <span class="hljs-comment">/* 
         * æ‡’åŠ è½½å›¾ç‰‡æ ·å¼
         * .lazy ç±»è¡¨ç¤ºå›¾ç‰‡å°šæœªåŠ è½½
         */</span>
        <span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.lazy</span> {
            <span class="hljs-attribute">max-width</span>: <span class="hljs-number">80%</span>;
            <span class="hljs-attribute">height</span>: auto;
            <span class="hljs-attribute">display</span>: block;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
            <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.3</span>;
            <span class="hljs-comment">/* åˆå§‹ä½é€æ˜åº¦ï¼Œæ˜¾ç¤ºå ä½æ•ˆæœ */</span>
            <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">0.5s</span>;
            <span class="hljs-comment">/* æ·»åŠ è¿‡æ¸¡æ•ˆæœï¼Œä½¿åŠ è½½æ›´å¹³æ»‘ */</span>
        }

        <span class="hljs-comment">/* 
         * å›¾ç‰‡åŠ è½½å®Œæˆåçš„æ ·å¼
         * .loaded ç±»åœ¨ JS ä¸­åŠ è½½å®Œæˆåæ·»åŠ 
         */</span>
        <span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.loaded</span> {
            <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
            <span class="hljs-comment">/* æ¢å¤å®Œå…¨ä¸é€æ˜ */</span>
        }

        <span class="hljs-selector-tag">h1</span>,
        <span class="hljs-selector-tag">h2</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><strong>HTML</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 
      ç¬¬ä¸€éƒ¨åˆ†ï¼šé¦–å±ç©ºç™½åŒº
      ä½œç”¨ï¼šå±•ç¤ºæ ‡é¢˜å’Œæç¤ºï¼Œè¿«ä½¿ç”¨æˆ·å‘ä¸‹æ»šåŠ¨
    --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"spacer"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ä¼ ç»Ÿæ‡’åŠ è½½æ–¹æ¡ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨åŠ è½½ç¬¬ä¸€å¼ å›¾ç‰‡ â¬‡ï¸<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 
      ç¬¬äºŒéƒ¨åˆ†ï¼šç¬¬ä¸€å¼ å›¾ç‰‡
      data-src å­˜å‚¨çœŸå®å›¾ç‰‡åœ°å€ï¼Œsrc å­˜å‚¨å ä½å›¾
    --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"image-wrapper"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"lazy"</span>
            <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img10.360buyimg.com/wq/jfs/t24601/190/890984006/4559/731564fc/5b7f9b7bN3ccd29ab.png"</span>
            <span class="hljs-attr">data-src</span>=<span class="hljs-string">"https://img.36krcdn.com/hsossms/20260119/v2_53cad3f2226f48e2afc1942de3ab74e4@5888275@ai_oswg1141728oswg1053oswg495_img_png~tplv-1marlgjv7f-ai-v3:960:400:960:400:q70.jpg?x-oss-process=image/format,webp"</span>
            <span class="hljs-attr">alt</span>=<span class="hljs-string">"Image 1"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 
      ç¬¬ä¸‰éƒ¨åˆ†ï¼šä¸­é—´é—´éš”åŒº
      ä½œç”¨ï¼šåˆ†éš”ä¸¤å¼ å›¾ç‰‡ï¼Œç¡®ä¿åŠ è½½ç¬¬äºŒå¼ å›¾ç‰‡éœ€è¦ç»§ç»­å¤§å¹…æ»šåŠ¨
    --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"spacer"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨å‡ºç°ç¬¬äºŒå¼ å›¾ç‰‡ â¬‡ï¸<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ç¬¬å››éƒ¨åˆ†ï¼šç¬¬äºŒå¼ å›¾ç‰‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"image-wrapper"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"lazy"</span>
            <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img10.360buyimg.com/wq/jfs/t24601/190/890984006/4559/731564fc/5b7f9b7bN3ccd29ab.png"</span>
            <span class="hljs-attr">data-src</span>=<span class="hljs-string">"https://img.36krcdn.com/hsossms/20260117/v2_1e74add07bb94971845c777e0ce87a49@000000@ai_oswg421938oswg1536oswg722_img_000~tplv-1marlgjv7f-ai-v3:960:400:960:400:q70.jpg?x-oss-process=image/format,webp"</span>
            <span class="hljs-attr">alt</span>=<span class="hljs-string">"Image 2"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- åº•éƒ¨ç•™ç™½ï¼Œç¡®ä¿èƒ½æ»šåˆ°åº•éƒ¨ï¼Œæ–¹ä¾¿è§‚å¯Ÿæœ€åä¸€å¼ å›¾çš„åŠ è½½ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 50vh; background-color: #f9f9f9;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<h3 data-id="heading-20">å…­ã€é¢è¯•å®˜ä¼šé—®ğŸ¤¨</h3>
<ol>
<li><strong>å›¾ç‰‡æ‡’åŠ è½½çš„æ ¸å¿ƒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</strong></li>
</ol>
<p>ç­”ï¼šæ ¸å¿ƒæ˜¯ â€œæŒ‰éœ€åŠ è½½â€ï¼Œå°†éé¦–å±å›¾ç‰‡çš„çœŸå®åœ°å€å­˜åˆ°<code>data-src</code>ï¼ˆè‡ªå®šä¹‰å±æ€§ï¼‰ï¼Œ<code>src</code>æŒ‡å‘å ä½å›¾ï¼›é€šè¿‡ç›‘å¬æ»šåŠ¨ï¼ˆä¼ ç»Ÿï¼‰æˆ–<code>IntersectionObserver</code>ï¼ˆç°ä»£ï¼‰åˆ¤æ–­å›¾ç‰‡æ˜¯å¦è¿›å…¥è§†å£ï¼Œè¿›å…¥åå°†<code>data-src</code>èµ‹å€¼ç»™<code>src</code>ï¼Œè§¦å‘çœŸå®å›¾ç‰‡åŠ è½½ã€‚</p>
<ol start="2">
<li><strong>ä¼ ç»Ÿæ‡’åŠ è½½æ–¹æ¡ˆä¸­ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨èŠ‚æµå‡½æ•°ï¼Ÿ</strong></li>
</ol>
<p>ç­”ï¼š<code>scroll</code>äº‹ä»¶ä¼šåœ¨æ»šåŠ¨è¿‡ç¨‹ä¸­é«˜é¢‘è§¦å‘ï¼ˆæ¯ç§’æ•°åæ¬¡ï¼‰ï¼Œè‹¥ç›´æ¥æ‰§è¡Œæ‡’åŠ è½½é€»è¾‘ï¼Œä¼šå¯¼è‡´å¤§é‡ DOM æ“ä½œå’Œè®¡ç®—ï¼Œå¼•å‘é¡µé¢å¡é¡¿ï¼›èŠ‚æµå‡½æ•°èƒ½æ§åˆ¶å‡½æ•°åœ¨æŒ‡å®šæ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡ï¼Œå‡å°‘æ€§èƒ½æŸè€—ã€‚</p>
<ol start="3">
<li><strong>IntersectionObserver ç›¸æ¯”ä¼ ç»Ÿ scroll æ–¹æ¡ˆæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ</strong></li>
</ol>
<p>ç­”ï¼šâ‘  æ€§èƒ½æ›´å¥½ï¼šæµè§ˆå™¨åº•å±‚ä¼˜åŒ–ï¼Œæ— éœ€æ‰‹åŠ¨èŠ‚æµï¼›â‘¡ ä»£ç æ›´ç®€æ´ï¼šæ— éœ€æ‰‹åŠ¨è®¡ç®—å…ƒç´ ä½ç½®ï¼›â‘¢ é€‚é…æ€§å¼ºï¼šå…¼å®¹å¤æ‚å¸ƒå±€ï¼›â‘£ å¯æ‰©å±•ï¼šæ”¯æŒè‡ªå®šä¹‰è§‚å¯Ÿè§„åˆ™ã€‚</p>
<ol start="4">
<li><strong>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦è¿›å…¥è§†å£ï¼Ÿ</strong></li>
</ol>
<p>ç­”ï¼šä¼ ç»Ÿæ–¹æ¡ˆç”¨<code>element.getBoundingClientRect()</code>è·å–å…ƒç´ çš„ä½ç½®ä¿¡æ¯ï¼Œåˆ¤æ–­<code>rect.top &lt; window.innerHeight &amp;&amp; rect.bottom &gt; 0</code>ï¼›ç°ä»£æ–¹æ¡ˆç›´æ¥é€šè¿‡<code>IntersectionObserver</code>çš„<code>isIntersecting</code>å±æ€§åˆ¤æ–­ã€‚</p>
<ol start="5">
<li><strong>æ‡’åŠ è½½çš„é™çº§æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ</strong></li>
</ol>
<p>ç­”ï¼šè‹¥æµè§ˆå™¨ä¸æ”¯æŒ<code>IntersectionObserver</code>ï¼ˆå¦‚éƒ¨åˆ†è€æ—§æµè§ˆå™¨ï¼‰ï¼Œç›´æ¥éå†æ‰€æœ‰<code>lazy</code>å›¾ç‰‡ï¼Œå°†<code>data-src</code>èµ‹å€¼ç»™<code>src</code>ï¼Œä¿è¯å›¾ç‰‡èƒ½æ­£å¸¸åŠ è½½ã€‚</p>
<h3 data-id="heading-21">ä¸ƒã€ç»“è¯­ğŸ¯</h3>
<p>å›¾ç‰‡æ‡’åŠ è½½ä½œä¸ºå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„ â€œåŸºç¡€æ“ä½œâ€ï¼Œå…¶æ ¸å¿ƒå§‹ç»ˆæ˜¯ â€œæŒ‰éœ€åŠ è½½â€â€”â€” ä¼˜å…ˆä¿è¯é¦–å±ä½“éªŒï¼Œå‡å°‘æ— æ•ˆèµ„æºæ¶ˆè€—ã€‚ä¼ ç»Ÿçš„<code>scroll+èŠ‚æµ</code>æ–¹æ¡ˆå…¼å®¹æ—§æµè§ˆå™¨ï¼Œä½†å­˜åœ¨æ€§èƒ½å’Œé€‚é…ç—›ç‚¹ï¼›è€Œ<code>IntersectionObserver</code>ä½œä¸ºç°ä»£æ–¹æ¡ˆï¼Œå‡­å€Ÿæµè§ˆå™¨åŸç”Ÿä¼˜åŒ–ã€ç®€æ´çš„ä»£ç é€»è¾‘ï¼Œæˆä¸ºå½“å‰æ‡’åŠ è½½çš„é¦–é€‰ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®é¡¹ç›®çš„å…¼å®¹éœ€æ±‚é€‰æ‹©æ–¹æ¡ˆï¼šè‹¥éœ€å…¼å®¹è€æ—§æµè§ˆå™¨ï¼Œå¯é‡‡ç”¨ â€œIntersectionObserver+scroll é™çº§â€ çš„æ··åˆæ–¹æ¡ˆï¼›è‹¥é¢å‘ç°ä»£æµè§ˆå™¨ï¼Œç›´æ¥ä½¿ç”¨<code>IntersectionObserver</code>å³å¯ã€‚</p>
<p>æ€§èƒ½ä¼˜åŒ–æ²¡æœ‰é“¶å¼¹ï¼Œä½†å›¾ç‰‡æ‡’åŠ è½½æ˜¯åˆ—è¡¨ç±»é¡µé¢ï¼ˆç”µå•†ã€èµ„è®¯ã€ç¤¾äº¤ï¼‰çš„ â€œå¿…åšä¼˜åŒ–â€ï¼Œå°å°çš„æ”¹åŠ¨å°±èƒ½æ˜¾è‘—æå‡é¡µé¢åŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å½»åº•åƒé€å›¾ç‰‡æ‡’åŠ è½½ï¼Œæ— è®ºæ˜¯é¢è¯•è¿˜æ˜¯å®æˆ˜ï¼Œéƒ½èƒ½æ¸¸åˆƒæœ‰ä½™ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™next openCustomDialog è‡ªå®šä¹‰å¼¹çª—è¿›é˜¶ç‰ˆ å†æˆ˜æ±Ÿæ¹–]]></title>    <link>https://juejin.cn/post/7601076976442621992</link>    <guid>https://juejin.cn/post/7601076976442621992</guid>    <pubDate>2026-02-01T08:01:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601076976442621992" data-draft-id="7601313474719203363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™next openCustomDialog è‡ªå®šä¹‰å¼¹çª—è¿›é˜¶ç‰ˆ å†æˆ˜æ±Ÿæ¹–  "/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-02-01T08:01:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xq9527"/> <meta itemprop="url" content="https://juejin.cn/user/1239904848712184"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™next openCustomDialog è‡ªå®šä¹‰å¼¹çª—è¿›é˜¶ç‰ˆ å†æˆ˜æ±Ÿæ¹–  
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904848712184/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xq9527
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T08:01:18.000Z" title="Sun Feb 01 2026 08:01:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h5 data-id="heading-0">å‰è¨€å¯¼è¯»</h5>
<p>ä¹‹å‰æˆ‘å†™è¿‡ä¸€ç¯‡å…³äº  openCustomDialog è‡ªå®šä¹‰å¼¹çª—çš„æ–‡æ¡£ ï¼Œä½†æ˜¯åœ¨åé¢çš„å¼€å‘è¿‡ç¨‹ä¸­å‘ç°è¿™ä¸ªç®¡ç†èµ·æ¥ç‰¹åˆ«éº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘å°±å†™äº†è¿™ä¸ªè¿›é˜¶ç‰ˆæœ¬ï¼Œèƒ½å¤Ÿæ›´å¥½ç®¡ç†å¼¹çª—çš„ç°å®å’Œéšè— ä»¥åŠå¼¹çª—æ¸…æ ˆæ“ä½œç­‰ç­‰ã€‚
ä½¿ç”¨ <strong>BaseDialog + DialogManager</strong>Â  æ¥ç®¡ç†çš„æˆ‘ä»¬çš„å¼¹çª—</p>
<h5 data-id="heading-1">æ•ˆæœå›¾</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21d6ed50fb1f435da46886b903501c9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770537679&amp;x-signature=T5hzsVt43ZlxpEyhmZqh4mGFo8Y%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-2">ç”¨åˆ°çš„æŠ€æœ¯ç‚¹</h5>
<p>openCustomDialog æ¥å®ç°,è‡ªå®šä¹‰å¼¹çª— openCustomDialog å¯ä»¥çœ‹ä¹‹å‰çš„æ–‡ç« </p>
<p><a href="https://juejin.cn/post/7492688487265222693" title="https://juejin.cn/post/7492688487265222693" target="_blank">é¸¿è’™next openCustomDialog å®ç°ä¸ä¾èµ–UIçš„è‡ªå®šä¹‰å¼¹çª—</a></p>
<h2 data-id="heading-3">HarmonyOS å¼¹çª—ç®¡ç†ç³»ç»Ÿä½¿ç”¨æ–‡æ¡£</h2>
<h3 data-id="heading-4">ä¸€ã€æ¦‚è¿°</h3>
<p>æœ¬å¼¹çª—ç®¡ç†ç³»ç»Ÿé‡‡ç”¨Â <strong>BaseDialog + DialogManager</strong>Â æ¶æ„ï¼Œå®ç°äº†å¼¹çª—çš„ç»Ÿä¸€ç®¡ç†ã€å¤ç”¨å’Œæ‰©å±•ã€‚</p>
<h4 data-id="heading-5">æ¶æ„ç‰¹ç‚¹</h4>
<ul>
<li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šDialogManager é‡‡ç”¨å•ä¾‹è®¾è®¡ï¼Œå…¨å±€ç»Ÿä¸€ç®¡ç†</li>
<li><strong>æ³›å‹æ”¯æŒ</strong>ï¼šBaseDialog æ”¯æŒæ³›å‹å‚æ•°ï¼Œçµæ´»é€‚é…ä¸åŒå¼¹çª—</li>
<li><strong>å¼¹çª—æ ˆç®¡ç†</strong>ï¼šä½¿ç”¨æ ˆç»“æ„ç®¡ç†å¼¹çª—å±‚çº§ï¼Œæ”¯æŒå¤šå¼¹çª—å åŠ </li>
<li><strong>è‡ªåŠ¨é€‚é…</strong>ï¼šè‡ªåŠ¨æ£€æµ‹å±å¹•æ–¹å‘ï¼Œé€‚é…æ¨ªç«–å±å¸ƒå±€</li>
</ul>
<hr/>
<h3 data-id="heading-6">äºŒã€æ–‡ä»¶ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">pages/
â”œâ”€â”€ BaseDialog.ets          <span class="hljs-comment"># å¼¹çª—åŸºç±»</span>
â”œâ”€â”€ DialogManger.ets        <span class="hljs-comment"># å¼¹çª—ç®¡ç†å™¨</span>
â””â”€â”€ PrivacyPolicyDialog.ets <span class="hljs-comment"># éšç§æ”¿ç­–å¼¹çª—ç¤ºä¾‹</span>
</code></pre>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€æ ¸å¿ƒç±»è¯´æ˜</h3>
<h4 data-id="heading-8">3.1 BaseDialog</h4>
<p>å¼¹çª—åŸºç±»ï¼Œå°è£…é€šç”¨å¼¹çª—é€»è¾‘ã€‚</p>









































<table><thead><tr><th>æ–¹æ³•</th><th>å‚æ•°</th><th>è¿”å›å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>show(params, options?)</code></td><td>params: T, options?: DialogOptions</td><td>Promise</td><td>æ˜¾ç¤ºå¼¹çª—</td></tr><tr><td><code>hide()</code></td><td>-</td><td>Promise</td><td>éšè—å¼¹çª—</td></tr><tr><td><code>update(params)</code></td><td>params: T</td><td>void</td><td>æ›´æ–°å¼¹çª—å†…å®¹</td></tr><tr><td><code>getIsShowing()</code></td><td>-</td><td>boolean</td><td>è·å–å¼¹çª—æ˜¾ç¤ºçŠ¶æ€</td></tr><tr><td><code>getDialogType()</code></td><td>-</td><td>DialogType</td><td>è·å–å¼¹çª—ç±»å‹</td></tr></tbody></table>
<h4 data-id="heading-9">3.2 DialogManager</h4>
<p>å¼¹çª—ç®¡ç†å™¨ï¼Œç»Ÿä¸€ç®¡ç†æ‰€æœ‰å¼¹çª—ã€‚</p>

































































<table><thead><tr><th>æ–¹æ³•</th><th>å‚æ•°</th><th>è¿”å›å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>getInstance()</code></td><td>-</td><td>DialogManager</td><td>è·å–å•ä¾‹å®ä¾‹</td></tr><tr><td><code>init()</code></td><td>-</td><td>DialogManager</td><td>åˆå§‹åŒ–ç®¡ç†å™¨</td></tr><tr><td><code>registerDialog(type, builder)</code></td><td>DialogType, WrappedBuilder</td><td>DialogManager</td><td>æ³¨å†Œå¼¹çª—</td></tr><tr><td><code>show(type, params?, options?)</code></td><td>DialogType, T?, DialogOptions?</td><td>Promise</td><td>æ˜¾ç¤ºå¼¹çª—</td></tr><tr><td><code>hide(type)</code></td><td>DialogType</td><td>Promise</td><td>éšè—å¼¹çª—</td></tr><tr><td><code>hideAll()</code></td><td>-</td><td>Promise</td><td>éšè—æ‰€æœ‰å¼¹çª—</td></tr><tr><td><code>hideTop()</code></td><td>-</td><td>Promise</td><td>éšè—æœ€é¡¶å±‚å¼¹çª—</td></tr><tr><td><code>isShowing(type)</code></td><td>DialogType</td><td>boolean</td><td>æ£€æŸ¥å¼¹çª—æ˜¯å¦æ˜¾ç¤º</td></tr><tr><td><code>hasDialogShowing()</code></td><td>-</td><td>boolean</td><td>æ£€æŸ¥æ˜¯å¦æœ‰å¼¹çª—æ˜¾ç¤º</td></tr></tbody></table>
<h4 data-id="heading-10">3.3 DialogType æšä¸¾</h4>
<pre><code class="hljs language-ini" lang="ini">export enum DialogType {
  <span class="hljs-attr">PRIVACY_POLICY</span> = <span class="hljs-string">'privacy_policy'</span>,  // éšç§æ”¿ç­–å¼¹çª—
  <span class="hljs-attr">USER_PROTOCOL</span> = <span class="hljs-string">'user_protocol'</span>,    // ç”¨æˆ·åè®®å¼¹çª—
  <span class="hljs-attr">EXIT_CONFIRM</span> = <span class="hljs-string">'exit_confirm'</span>,      // é€€å‡ºç¡®è®¤å¼¹çª—
  <span class="hljs-attr">LOADING</span> = <span class="hljs-string">'loading'</span>,                // åŠ è½½å¼¹çª—
  <span class="hljs-attr">ALERT</span> = <span class="hljs-string">'alert'</span>,                    // æç¤ºå¼¹çª—
  <span class="hljs-attr">CONFIRM</span> = <span class="hljs-string">'confirm'</span>,                // ç¡®è®¤å¼¹çª—
  <span class="hljs-attr">CUSTOM</span> = <span class="hljs-string">'custom'</span>                   // è‡ªå®šä¹‰å¼¹çª—
}
</code></pre>
<h4 data-id="heading-11">3.4 DialogOptions é…ç½®</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DialogOptions</span> {
  alignment?: <span class="hljs-title class_">DialogAlignment</span>;           <span class="hljs-comment">// å¼¹çª—ä½ç½®ï¼Œé»˜è®¤ Center</span>
  isModal?: <span class="hljs-built_in">boolean</span>;                     <span class="hljs-comment">// æ˜¯å¦æ¨¡æ€ï¼Œé»˜è®¤ true</span>
  autoCancel?: <span class="hljs-built_in">boolean</span>;                  <span class="hljs-comment">// ç‚¹å‡»é®ç½©æ˜¯å¦å…³é—­ï¼Œé»˜è®¤ false</span>
  keyboardAvoidMode?: <span class="hljs-title class_">KeyboardAvoidMode</span>; <span class="hljs-comment">// é”®ç›˜é¿è®©æ¨¡å¼ï¼Œé»˜è®¤ NONE</span>
  maskColor?: <span class="hljs-title class_">ResourceColor</span>;             <span class="hljs-comment">// é®ç½©é¢œè‰²</span>
  onWillDismiss?: <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> <span class="hljs-built_in">void</span>;      <span class="hljs-comment">// å¼¹çª—å³å°†å…³é—­å›è°ƒ</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-12">å››ã€ä½¿ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-13">4.1 åˆå§‹åŒ–ï¼ˆåœ¨ EntryAbility ä¸­ï¼‰</h4>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">import</span> { <span class="hljs-type">DialogManager</span> } from '../pages/<span class="hljs-type">DialogManger</span>';

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">UIAbility</span> </span>{
  onCreate(want: <span class="hljs-type">Want</span>, launchParam: <span class="hljs-type">AbilityConstant</span>.<span class="hljs-type">LaunchParam</span>): void {
    <span class="hljs-comment">// åˆå§‹åŒ–å¼¹çª—ç®¡ç†å™¨</span>
    <span class="hljs-type">DialogManager</span>.getInstance().init();
  }
}
</code></pre>
<h4 data-id="heading-14">4.2 æ˜¾ç¤º/éšè—å¼¹çª—</h4>
<pre><code class="hljs language-csharp" lang="csharp">import { DialogManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'../pages/DialogManger'</span>;
import { DialogType } <span class="hljs-keyword">from</span> <span class="hljs-string">'../pages/BaseDialog'</span>;

<span class="hljs-comment">// æ–¹å¼ä¸€ï¼šä½¿ç”¨ä¾¿æ·æ–¹æ³•</span>
<span class="hljs-keyword">await</span> DialogManager.getInstance().showPrivacyPolicyDialog();
<span class="hljs-keyword">await</span> DialogManager.getInstance().hidePrivacyPolicyDialog();

<span class="hljs-comment">// æ–¹å¼äºŒï¼šä½¿ç”¨é€šç”¨æ–¹æ³•</span>
<span class="hljs-keyword">await</span> DialogManager.getInstance().show(DialogType.PRIVACY_POLICY);
<span class="hljs-keyword">await</span> DialogManager.getInstance().hide(DialogType.PRIVACY_POLICY);

<span class="hljs-comment">// æ–¹å¼ä¸‰ï¼šå¸¦å‚æ•°æ˜¾ç¤º</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">params</span> = <span class="hljs-keyword">new</span> PrivacyPolicyParams();
<span class="hljs-keyword">params</span>.title = <span class="hljs-string">"è‡ªå®šä¹‰æ ‡é¢˜"</span>;
<span class="hljs-keyword">await</span> DialogManager.getInstance().show(DialogType.PRIVACY_POLICY, <span class="hljs-keyword">params</span>);
</code></pre>
<h4 data-id="heading-15">4.3 è‡ªå®šä¹‰å¼¹çª—é…ç½®</h4>
<pre><code class="hljs language-ini" lang="ini">import { DialogOptionsImpl } from '../pages/BaseDialog'<span class="hljs-comment">;</span>

const <span class="hljs-attr">options</span> = new DialogOptionsImpl()<span class="hljs-comment">;</span>
<span class="hljs-attr">options.alignment</span> = DialogAlignment.Bottom<span class="hljs-comment">;</span>
<span class="hljs-attr">options.isModal</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
<span class="hljs-attr">options.autoCancel</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
<span class="hljs-attr">options.maskColor</span> = <span class="hljs-string">'#80000000'</span><span class="hljs-comment">;</span>

await DialogManager.getInstance().show(DialogType.PRIVACY_POLICY, params, options)<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-16">4.4 æ‰¹é‡å…³é—­å¼¹çª—</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// å…³é—­æ‰€æœ‰å¼¹çª—</span>
await DialogManager<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.hideAll</span>();

<span class="hljs-comment">// å…³é—­æœ€é¡¶å±‚å¼¹çª—</span>
await DialogManager<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.hideTop</span>();
</code></pre>
<h4 data-id="heading-17">4.5 æŸ¥è¯¢å¼¹çª—çŠ¶æ€</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ£€æŸ¥ç‰¹å®šå¼¹çª—æ˜¯å¦æ˜¾ç¤º</span>
if (DialogManager.getInstance()<span class="hljs-selector-class">.isShowing</span>(DialogType.PRIVACY_POLICY)) {
  console<span class="hljs-selector-class">.log</span>('éšç§æ”¿ç­–å¼¹çª—æ­£åœ¨æ˜¾ç¤º');
}

<span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•å¼¹çª—æ˜¾ç¤º</span>
if (DialogManager.getInstance()<span class="hljs-selector-class">.hasDialogShowing</span>()) {
  console<span class="hljs-selector-class">.log</span>(`å½“å‰æœ‰ ${DialogManager.getInstance()<span class="hljs-selector-class">.getShowingCount</span>()} ä¸ªå¼¹çª—`);
}

<span class="hljs-comment">// è·å–æ‰€æœ‰æ­£åœ¨æ˜¾ç¤ºçš„å¼¹çª—ç±»å‹</span>
const showingDialogs = DialogManager<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.getShowingDialogs</span>();
</code></pre>
<hr/>
<h3 data-id="heading-18">äº”ã€è‡ªå®šä¹‰å¼¹çª—å¼€å‘æŒ‡å—</h3>
<h4 data-id="heading-19">5.1 åˆ›å»ºå¼¹çª—å‚æ•°ç±»</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">IBaseDialogParams</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./BaseDialog'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDialogParams</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBaseDialogParams</span> {
  flag?: <span class="hljs-built_in">boolean</span>;           <span class="hljs-comment">// å¿…é¡»ï¼šå±å¹•æ–¹å‘æ ‡å¿—</span>
  title?: <span class="hljs-built_in">string</span>;           <span class="hljs-comment">// è‡ªå®šä¹‰å‚æ•°</span>
  content?: <span class="hljs-built_in">string</span>;
  onConfirm?: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
  onCancel?: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">"é»˜è®¤æ ‡é¢˜"</span>;
  }
}
</code></pre>
<h4 data-id="heading-20">5.2 åˆ›å»ºå¼¹çª—ç»„ä»¶</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Component</span>
export struct MyDialog {
  param: MyDialogParams = new <span class="hljs-built_in">MyDialogParams</span>();

  <span class="hljs-built_in">build</span>() {
    <span class="hljs-built_in">Column</span>() {
      Text(this.param.title)
        <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">20</span>)
        <span class="hljs-selector-class">.fontWeight</span>(FontWeight.Bold)
      
      Text(this.param.content)
        <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">16</span>)
        <span class="hljs-selector-class">.margin</span>({ top: <span class="hljs-number">10</span> })
      
      <span class="hljs-built_in">Row</span>() {
        <span class="hljs-selector-tag">Button</span>('å–æ¶ˆ')
          <span class="hljs-selector-class">.onClick</span>(() =&gt; {
            DialogManager<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.hide</span>(DialogType.CUSTOM);
            this<span class="hljs-selector-class">.param</span><span class="hljs-selector-class">.onCancel</span>?.();
          })
        
        <span class="hljs-selector-tag">Button</span>('ç¡®è®¤')
          <span class="hljs-selector-class">.onClick</span>(() =&gt; {
            DialogManager<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.hide</span>(DialogType.CUSTOM);
            this<span class="hljs-selector-class">.param</span><span class="hljs-selector-class">.onConfirm</span>?.();
          })
      }
      <span class="hljs-selector-class">.margin</span>({ top: <span class="hljs-number">20</span> })
    }
    <span class="hljs-selector-class">.width</span>(this.param.flag ? '<span class="hljs-number">80%</span>' : '<span class="hljs-number">40%</span>')  <span class="hljs-comment">// æ¨ªç«–å±é€‚é…</span>
    <span class="hljs-selector-class">.padding</span>(<span class="hljs-number">20</span>)
    <span class="hljs-selector-class">.backgroundColor</span>(Color.White)
    <span class="hljs-selector-class">.borderRadius</span>(<span class="hljs-number">12</span>)
  }
}

<span class="hljs-keyword">@Builder</span>
export function myDialogBuilder(<span class="hljs-attribute">params</span>: MyDialogParams) {
  <span class="hljs-built_in">MyDialog</span>({ param: params })
}
</code></pre>
<h4 data-id="heading-21">5.3 æ³¨å†Œå¼¹çª—</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ–¹å¼ä¸€ï¼šåœ¨ DialogManager.registerDefaultDialogs() ä¸­æ·»åŠ </span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">registerDefaultDialogs</span>(): <span class="hljs-keyword">void</span></span> {
  <span class="hljs-keyword">this</span>.registerDialog&lt;PrivacyPolicyParams&gt;(
    DialogType.PRIVACY_POLICY,
    wrapBuilder(privacyPolicyDialogBuilder)
  );
  
  <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰å¼¹çª—</span>
  <span class="hljs-keyword">this</span>.registerDialog&lt;MyDialogParams&gt;(
    DialogType.CUSTOM,
    wrapBuilder(myDialogBuilder)
  );
}

<span class="hljs-comment">// æ–¹å¼äºŒï¼šåŠ¨æ€æ³¨å†Œ</span>
DialogManager.getInstance().registerDialog&lt;MyDialogParams&gt;(
  DialogType.CUSTOM,
  wrapBuilder(myDialogBuilder)
);
</code></pre>
<h4 data-id="heading-22">5.4 ä½¿ç”¨è‡ªå®šä¹‰å¼¹çª—</h4>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">params</span> = new MyDialogParams()<span class="hljs-comment">;</span>
<span class="hljs-attr">params.title</span> = <span class="hljs-string">"æç¤º"</span><span class="hljs-comment">;</span>
<span class="hljs-attr">params.content</span> = <span class="hljs-string">"ç¡®å®šè¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ"</span><span class="hljs-comment">;</span>
<span class="hljs-attr">params.onConfirm</span> = () =&gt; {
  console.log('ç”¨æˆ·ç‚¹å‡»äº†ç¡®è®¤')<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
<span class="hljs-attr">params.onCancel</span> = () =&gt; {
  console.log('ç”¨æˆ·ç‚¹å‡»äº†å–æ¶ˆ')<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

await DialogManager.getInstance().show(DialogType.CUSTOM, params)<span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h3 data-id="heading-23">å…­ã€æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-24">6.1 åœ¨å¼¹çª—å†…éƒ¨å…³é—­è‡ªèº«</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ¨èï¼šé€šè¿‡ DialogManager å…³é—­</span>
DialogManager<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.hide</span>(DialogType.PRIVACY_POLICY);

<span class="hljs-comment">// ä¸æ¨èï¼šç›´æ¥è°ƒç”¨ promptActionï¼ˆä¼šå¯¼è‡´çŠ¶æ€ä¸åŒæ­¥ï¼‰</span>
</code></pre>
<h4 data-id="heading-25">6.2 å¤„ç†è¿”å›é”®</h4>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">options</span> = new DialogOptionsImpl()<span class="hljs-comment">;</span>
<span class="hljs-attr">options.onWillDismiss</span> = (action: DismissDialogAction) =&gt; {
  if (<span class="hljs-attr">action.reason</span> === DismissReason.PRESS_BACK) {
    // é˜»æ­¢è¿”å›é”®å…³é—­
    action.dismiss<span class="hljs-comment">;</span>
    // æˆ–æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘
  }
}<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-26">6.3 å¼¹çª—ç”Ÿå‘½å‘¨æœŸç®¡ç†</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// é¡µé¢é”€æ¯æ—¶å…³é—­æ‰€æœ‰å¼¹çª—</span>
<span class="hljs-built_in">aboutToDisappear</span>(): void {
  DialogManager<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.hideAll</span>();
}
</code></pre>
<hr/>
<h3 data-id="heading-27">ä¸ƒã€æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>å¿…é¡»åˆå§‹åŒ–</strong>ï¼šä½¿ç”¨å‰å¿…é¡»è°ƒç”¨Â <code>DialogManager.getInstance().init()</code></li>
<li><strong>å¼‚æ­¥æ“ä½œ</strong>ï¼š<code>show()</code>Â å’ŒÂ <code>hide()</code>Â éƒ½æ˜¯å¼‚æ­¥æ–¹æ³•ï¼Œéœ€è¦ä½¿ç”¨Â <code>await</code></li>
<li><strong>å‚æ•°ä¼ é€’</strong>ï¼šå¼¹çª—å‚æ•°ä¸­çš„Â <code>flag</code>Â ä¼šè‡ªåŠ¨è®¾ç½®ï¼Œæ— éœ€æ‰‹åŠ¨æŒ‡å®š</li>
<li><strong>å¼¹çª—æ³¨å†Œ</strong>ï¼šä½¿ç”¨å‰å¿…é¡»å…ˆæ³¨å†Œå¼¹çª—ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸</li>
<li><strong>ArkTS å…¼å®¹</strong>ï¼šä»£ç å·²é€‚é… ArkTS ä¸¥æ ¼æ¨¡å¼ï¼Œé¿å…ä½¿ç”¨å¯¹è±¡å±•å¼€ç­‰ä¸æ”¯æŒçš„è¯­æ³•</li>
</ol>
<hr/>
<h3 data-id="heading-28">å…«ã€ç‰ˆæœ¬å†å²</h3>




















<table><thead><tr><th>ç‰ˆæœ¬</th><th>æ—¥æœŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1.0.0</td><td>2025-09-03</td><td>åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æŒåŸºç¡€å¼¹çª—ç®¡ç†</td></tr><tr><td>2.0.0</td><td>2025-09-04</td><td>é‡æ„ä¸º BaseDialog + DialogManager æ¶æ„</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Traeä½¿ç”¨ä½“éªŒSOLOæ¨¡å¼ä½“éªŒ]]></title>    <link>https://juejin.cn/post/7601020578491662345</link>    <guid>https://juejin.cn/post/7601020578491662345</guid>    <pubDate>2026-01-31T16:18:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601020578491662345" data-draft-id="7601069677566722094" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Traeä½¿ç”¨ä½“éªŒSOLOæ¨¡å¼ä½“éªŒ"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-31T16:18:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Maxatom"/> <meta itemprop="url" content="https://juejin.cn/user/606586149804062"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Traeä½¿ç”¨ä½“éªŒSOLOæ¨¡å¼ä½“éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586149804062/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Maxatom
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T16:18:40.000Z" title="Sat Jan 31 2026 16:18:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/758bf065c3bd4da0809b1be30586fc39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4YXRvbQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770481119&amp;x-signature=oLKb9Vlv5iyjQgOuPbjNxaC9KEE%3D" alt="6a8001b60ce8fdb63c958ca30a2e3d9a.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">ä»‹ç»</h2>
<p>æˆ‘æ³¨æ„åˆ°AIæµè¡Œèµ·æ¥æ˜¯ä»ChatGPTå¼€å§‹çš„ï¼Œå½“æ—¶ç½‘ç»œä¸Šåˆ°å¤„éƒ½æ˜¯ChatGPTçš„æ¶ˆæ¯ï¼Œä½†æ˜¯æˆ‘ä»æ¥æ²¡æœ‰ç”¨è¿‡ï¼Œåªæ˜¯å¬è¯´èŠå¤©å¾ˆå‰å®³ã€‚ä»å»å¹´åº•deepseekå‘å¸ƒä»¥æ¥ï¼Œæˆ‘ä¹Ÿä¸‹è½½äº†deepseekï¼Œè·Ÿè¿™ä¸ªç”¨èµ·æ¥ï¼Œå‘ç°èŠå¤©æŸ¥èµ„æ–™ç¡®å®å¾ˆå¥½ç”¨ï¼Œé€æ¸æ›¿ä»£æœç´¢å¼•æ“äº†ï¼Œæˆ‘å·²ç»å¥½ä¹…æ²¡æ‰“å¼€ç™¾åº¦äº†ï¼Œç™¾åº¦ä¸€æ‰“å¼€é¦–å…ˆç»™ä½ çœ‹ä¸€å †å¹¿å‘Šï¼Œç„¶ååœ¨ä¸€å †å¹¿å‘Šé‡Œé¢æ‰¾ä½ è¦çš„èµ„æ–™ï¼Œç„¶åå¾ˆå¤šåšæ–‡è¿˜æ˜¯é‡å¤å†…å®¹ï¼Œäº’ç›¸æŠ„è¢­ï¼Œæ‰¾ç‚¹ä¸œè¥¿å¤ªç—›è‹¦äº†ã€‚ç›¸åï¼ŒAIèƒ½ç›´æ¥ç»™ä½ ç­”æ¡ˆï¼Œç®€ç›´ä¸è¦å¤ªçˆ½ã€‚ä½†æ˜¯deepseekåˆšå¼€å§‹æ”¯æŒçš„æµé‡æœ‰é™ï¼Œç»å¸¸æœåŠ¡ä¸åœ¨çº¿ã€‚ç„¶åæˆ‘å°±ä¸‹è½½äº†è±†åŒ…ï¼Œå¿«ä¹çš„ç”¨è±†åŒ…äº†ã€‚</p>
<h2 data-id="heading-1">deepseek</h2>
<p>deepseekä¸€å‡ºæ¥ç®€ç›´å°±æ˜¯æ·±æ°´ç‚¸å¼¹ï¼Œåœ¨ç½‘ç»œä¸Šä»€ä¹ˆåœºæ™¯å¤§å®¶åº”è¯¥éƒ½çŸ¥é“ï¼Œå‡ ä¹æ‰€æœ‰äººéƒ½åœ¨è®¨è®ºAIå¸¦æ¥çš„é©å‘½ï¼Œè¿æˆ‘ä¸å…³å¿ƒç§‘æŠ€è¡Œä¸šçš„è¡¨å§éƒ½åœ¨è°ˆè®ºè¿™ä¸ªï¼Œæˆ‘å½“æ—¶æ˜¯çœŸè¢«æƒŠè®¶åˆ°äº†ã€‚æˆ‘å®Œå…¨æ²¡æœ‰æ„è¯†åˆ°è¿™ä¸ªä¸œè¥¿å½±å“åŠ›è¿™ä¹ˆå¤§ï¼Œæˆ‘ç”¨deepseekçš„æ—¶å€™å½“æ—¶å¹¶æ²¡æœ‰å¾ˆéœ‡æƒŠï¼Œåªæ˜¯è§‰å¾—è¿™ä¸ªä¸œè¥¿æ¯”ä»¥å‰çš„AIï¼ˆæ¯”å¦‚å¾®è½¯å°å†°ï¼‰å¥½ç”¨å¤šäº†ï¼Œä½†æ˜¯æ²¡æƒ³è¿‡èƒ½å¯¹è¡Œä¸šæœ‰ä»€ä¹ˆé©å‘½æ€§å½±å“ï¼Œæ¯•ç«Ÿå¯¹äºä¸€ä¸ªç¨‹åºå‘˜æ¥è¯´ï¼Œä»–çš„ç¼–ç¨‹èƒ½åŠ›è¿˜ä¸å¤ªå¤Ÿã€‚ä½†æ˜¯å¾ˆå¿«å°±å‘ç°å‡ ä¹æ‰€æœ‰ä¼ä¸šéƒ½åœ¨è®¨è®ºæ€ä¹ˆç”¨AIæ¥æ›¿ä»£å‘˜å·¥ã€‚æˆ‘ä»¬å…¬å¸ä¹Ÿä¸€æ ·ï¼Œå½“æ—¶é¢†å¯¼ä»¬åœ¨æåŠ›æ¨åŠ¨æˆ‘ä»¬ä½¿ç”¨AIæ¥ç¼–ç¨‹ï¼Œå…¬å¸è¿˜ä¹°äº†é˜¿é‡Œçš„é€šä¹‰çµç ç»™æˆ‘ä»¬ç”¨ã€‚
é€šä¹‰çµç çš„ä½¿ç”¨ä½“éªŒï¼Œæ•´ä½“ä¸Šå¹¶ä¸å¤ªå¥½ï¼Œå®ƒä¾èµ–æœ‰é™çš„ä¸Šä¸‹æ–‡ï¼Œåœ¨å•ä¸ªæ–‡ä»¶å†™ä»£ç è¿˜è¡Œï¼Œæ²¡åŠæ³•å®ç°ä¸€ä¸ªæ¥å£çš„æ•´ä¸ªé“¾è·¯ï¼Œå†™å‡ºæ¥çš„ä»£ç éœ€è¦å¾ˆå¤§çš„æ”¹åŠ¨ã€‚</p>
<h2 data-id="heading-2">Traeä½¿ç”¨ä½“éªŒ</h2>
<p>ç”±äºé€šä¹‰çµç ç”¨è¿‡ä¸€æ®µæ—¶é—´ï¼Œä½“éªŒå¹¶ä¸å¤ªå¥½ï¼Œç„¶åå°±æ³¨æ„åˆ°äº†å­—èŠ‚æ¨å‡ºçš„Traeè¿™ä¸ªåŸç”ŸAIç¼–ç¨‹IDEï¼Œå½“æ—¶SOLOæ¨¡å¼è¿˜æ²¡æœ‰å‘å¸ƒï¼Œæˆ‘å·²ç»åœ¨å…³æ³¨äº†ï¼Œå½“æ—¶åªæ˜¯å¥½å¥‡ï¼Œå‡ºæ¥ä»¥åæˆ‘ç«‹åˆ»ä¸‹è½½ä¸‹æ¥ä½¿ç”¨ï¼Œå‘ç°çœŸçš„éå¸¸å¥½ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªçœŸçš„å¯ä»¥æé«˜ç”Ÿäº§åŠ›çš„å·¥å…·ã€‚æˆ‘æœ€è¿‘å†™çš„å¾ˆå¤šä»£ç éƒ½æ˜¯ç”¨Traeç›´æ¥å®Œæˆçš„ï¼ŒTraeç¡®å®å¯ä»¥ç«¯åˆ°ç«¯çš„å®Œæˆä»»åŠ¡ï¼Œæˆ‘è®©Traeå†™ä¸€ä¸ªæ¥å£ï¼Œå®ƒå¯ä»¥å¸®æˆ‘å®Œæˆæ‰€æœ‰çš„ä»£ç ï¼Œå†™å®Œè¿˜ä¼šè°ƒè¯•æˆåŠŸï¼Œå†™å¥½çš„ä»£ç å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ä¹‹å‰ç”¨çš„å…¶ä»–AIï¼Œå†™å®Œçš„ä»£ç è¿˜æœ‰ç»è¿‡å¤§é‡æ”¹åŠ¨ã€‚</p>
<h2 data-id="heading-3">ç®€å•ä»‹ç»</h2>
<p>å¦‚æœæœ‰ä½¿ç”¨Traeï¼Œç›´æ¥å»Traeçš„å®˜ç½‘æŠŠIDEä¸‹è½½ä¸‹æ¥ï¼Œè¿™é‡Œè¯´ä¸€å¥å®è¯ï¼Œå†™javaè¿˜æ˜¯Intellij IDEAæ›´å¥½ç”¨ã€‚Traeçš„IDEåº”è¯¥æ˜¯å¼€æºvscodeä¸Šå¼€å‘çš„ï¼Œå¯¹å†™javaæ¥è¯´æ²¡æœ‰Intellij IDEAå¼ºå¤§ã€‚ä½†æ˜¯Traeå¤§éƒ¨åˆ†æƒ…å†µæ˜¯AIåœ¨å†™ä»£ç ï¼ŒåŸºæœ¬ä¸Šäººå†™çš„ä¸å¤šã€‚</p>
<h3 data-id="heading-4">åˆ›å»ºé¡¹ç›®</h3>
<p>å¦‚å›¾ï¼Œä¸‹é¢æ˜¯æˆ‘å·²ç»æœ‰çš„ä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»Giteeä¸ŠæŠŠé¡¹ç›®æ‹‰ä¸‹æ¥ï¼Œæˆ‘è‡ªå·±æ‡’çš„å»å¤„ç†å„ç§ç¯å¢ƒè°ƒè¯•ï¼Œç›´æ¥åœ¨èŠå¤©æ¡†é—®Traeæ€ä¹ˆè¿è¡Œè¿™ä¸ªé¡¹ç›®ï¼ŒTraeç›´æ¥å¸®æˆ‘æŠŠç¯å¢ƒå¼„å¥½ï¼ŒæŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œå¤ªçœäº‹äº†ã€‚è¦æ˜¯ä»¥å¾€ï¼Œè¿˜æœ‰æŠŠæç¯å¢ƒæŠŠé¡¹ç›®è·‘èµ·æ¥æŠ˜è…¾åŠå¤©æ—¶é—´ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17c3085b20a74afba6e06b4e614392a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4YXRvbQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770481119&amp;x-signature=5Ob%2FYpqIE%2BoUr9tO4kzt3xKsS6w%3D" alt="æˆªå±2026-01-31 23.48.54.png" loading="lazy"/></p>
<h5 data-id="heading-5">ç®€å•ä»‹ç»ä¸€ä¸‹è¿‡ç¨‹ï¼š</h5>
<pre><code class="hljs">1ã€é¦–å…ˆTraeæ‰«ææ•´ä¸ªé¡¹ç›®ï¼Œäº†è§£é¡¹ç›®ç»“æ„ï¼Œç¡®è®¤æ˜¯Mavené¡¹ç›®
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ca114ed09a04484807d6aeb0a3b3b5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4YXRvbQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770481119&amp;x-signature=Uldocd3uTg45tcKydghW5Pg3Yh4%3D" alt="æˆªå±2026-01-31 23.56.23.png" loading="lazy"/>
2ã€ç¡®è®¤Mavenæ˜¯å¦å®‰è£…ï¼Œå‘ç°Mavenæ²¡æœ‰å®‰è£…
3ã€ç»§ç»­æ£€æŸ¥javaæ˜¯å¦å®‰è£…ï¼Œå‘ç°javaå·²ç»å®‰è£…ï¼Œæ£€æŸ¥æ•°æ®åº“æ˜¯å¦å¯ç”¨
4ã€ç„¶åå°è¯•ä½¿ç”¨macçš„åŒ…ç®¡ç†å·¥å…·å®‰è£…Mavenï¼Œå‘ç°æ²¡æœ‰å®‰è£…æƒé™</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2de8ff7cf87344688131a82def62b96a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4YXRvbQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770481119&amp;x-signature=xEFHscFYrZf4DuDnQbY76q5EMfI%3D" alt="æˆªå±2026-01-31 23.58.40.png" loading="lazy"/>
5ã€æœ€åæ€»ç»“äº†ä¸€ä¸‹é¡¹ç›®ï¼Œè¿˜ç»™äº†ä¸€ä¸ªå®‰è£…mavençš„æ­¥éª¤ï¼Œ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89d73a35d0654bdca331c8f10e1fdf4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4YXRvbQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770481119&amp;x-signature=lGqYokYwpYTTZsn0rLqPE2xYFMA%3D" alt="æˆªå±2026-01-31 23.59.26.png" loading="lazy"/></p>
<h5 data-id="heading-6">ç»§ç»­è¿½é—®</h5>
<p>1ã€ ä½†æ˜¯å¹¶æ²¡æœ‰æ”¾è¿‡ä»–ï¼Œç›´æ¥è´´äº†ä¸€ä¸ªå®‰è£…mavenæŠ¥é”™çš„ä¿¡æ¯ç»™ä»–ï¼Œä»–å¼€å§‹å°è¯•è‡ªå·±ä¸‹è½½Mavenï¼Œå¹¶ç›´æ¥å®‰è£…åˆ°æœ¬åœ°ï¼Œä¸é€‚åº”åŒ…ç®¡ç†å·¥å…·ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f33bd67db4704eec9c01ede1b2235a93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4YXRvbQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770481119&amp;x-signature=SnX3kl3msezwP9joYkuQ39U1ee4%3D" alt="æˆªå±2026-02-01 00.01.19.png" loading="lazy"/>
2ã€ç„¶åä¸€ç•ªæŠ˜è…¾ï¼Œæ‰¾åˆ°äº†æ­£ç¡®çš„ä¸‹è½½åœ°å€ï¼Œå¹¶å¸®æˆ‘æŠŠmavenä¸‹è½½ä¸‹æ¥äº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48f64425ac1a411482d24feaeb3c52f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4YXRvbQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770481119&amp;x-signature=geMOSxbQVLIe%2FzjRYteEYAaNlXA%3D" alt="æˆªå±2026-02-01 00.03.56.png" loading="lazy"/>
3ã€ç„¶åç”¨Mavenç¼–è¯‘å¹¶å¯åŠ¨é¡¹ç›®ï¼Œå‘ç°ç«¯å£è¢«å ç”¨ï¼ˆç”±äºæˆ‘åœ¨intellij ideå·²å¯åŠ¨é¡¹ç›®ï¼‰ï¼Œåœæ‰å·²å¯åŠ¨çš„é¡¹ç›®ï¼Œé‡æ–°å¯åŠ¨
4ã€æœ€åä»–å®‰è£…çš„ç›®å½•ç›´æ¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œæˆ‘è®©ä»–ç§»åˆ°æˆ‘å¸Œæœ›çš„ç›®å½•ä¸‹ï¼Œä»–èƒ½ç§»åŠ¨è¿˜èƒ½æŒ‡å®šç›®å½•ä¸‹ï¼Œå¤ªæ£’äº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aba6d3d84c424126b0ab69baac610da2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4YXRvbQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770481119&amp;x-signature=4YM4lOooR95ZrSbeIPv4pBYiGak%3D" alt="æˆªå±2026-02-01 00.06.47.png" loading="lazy"/></p>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>ä½¿ç”¨Traeæœ‰ä¸€å‘¨å·¦å³äº†ï¼Œèƒ½ç«¯åˆ°ç«¯çš„å®ç°éœ€æ±‚ï¼Œåªéœ€è¦è·Ÿä»–èŠå¤©å³å¯ï¼Œä¸éœ€è¦è¯´çš„å¾ˆç»†ï¼Œè¿™å¾ˆé‡è¦ï¼Œå¯ä»¥çœå¾ˆå¤šäº‹ã€‚ä»¥å¾€çš„AIèƒ½å†™ä»£ç ï¼Œä½†æ˜¯å†™è¿‡çš„ä»£ç è¦ç»è¿‡å¤§é‡è°ƒæ•´ï¼Œå†™éœ€æ±‚è¦è®²çš„å¾ˆç»†ï¼Œå¦åˆ™æ— æ³•å†™å‡ºåˆæ ¼çš„ä»£ç ï¼Œè¿™å¾ˆæµªè´¹æ—¶é—´ï¼Œæœ‰è¿™ä¸ªæ—¶é—´æˆ‘å®æ„¿è‡ªå·±å†™ã€‚è¿˜å¯ä»¥è‡ªå·±è°ƒè¯•æ¥å£ä¿®æ”¹bugï¼Œè¿™ç‚¹ä¹Ÿå¾ˆæ£’ï¼Œä¿®æ”¹bugé€šå¸¸æŒºæµªè´¹æ—¶é—´çš„ï¼Œç°åœ¨AIç›´æ¥æå®šã€‚å½“æ—¶ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿå‘ç°ä¸å°‘é—®é¢˜ï¼Œæ¯”å¦‚æœ‰äº›bugæ€ä¹ˆæ ·éƒ½æ‰¾ä¸å‡ºæ¥ï¼Œåªèƒ½äººå·¥æ’æŸ¥ã€‚ æœ‰æ—¶å€™ç»å¸¸å‡ºç°å¹»è§‰ï¼Œå†™å‡ºé”™è¯¯çš„ä»£ç ï¼Œä¸è¿‡è¿˜å¥½è‡ªå·±èƒ½ä¿®æ”¹bugã€‚éœ€è¦ä¸åœçš„å¯¹è¯çº æ­£ã€‚æ€»ç»“è¿™æ˜¯ä¸€ä¸ªç”Ÿäº§åŠ›å·¥å…·ï¼ŒçœŸèƒ½å¸®ç¨‹åºå‘˜æå‡å¾ˆé«˜çš„ç”Ÿäº§åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åƒé—® æ–‡å¿ƒ å…ƒå® KImiæ€ä¹ˆè¾“å‡ºä¸ä¹±ç ]]></title>    <link>https://juejin.cn/post/7601049142866395136</link>    <guid>https://juejin.cn/post/7601049142866395136</guid>    <pubDate>2026-01-31T16:54:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601049142866395136" data-draft-id="7601076976440246312" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åƒé—® æ–‡å¿ƒ å…ƒå® KImiæ€ä¹ˆè¾“å‡ºä¸ä¹±ç "/> <meta itemprop="keywords" content="DeepSeek"/> <meta itemprop="datePublished" content="2026-01-31T16:54:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DSéšå¿ƒè½¬å°ç¨‹åº"/> <meta itemprop="url" content="https://juejin.cn/user/1048267181271572"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åƒé—® æ–‡å¿ƒ å…ƒå® KImiæ€ä¹ˆè¾“å‡ºä¸ä¹±ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1048267181271572/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DSéšå¿ƒè½¬å°ç¨‹åº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T16:54:25.000Z" title="Sat Jan 31 2026 16:54:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85e289391f4c479b9b6e6125c7aa442e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPpmo_lv4PovazlsI_nqIvluo8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770483265&amp;x-signature=ar2SlDFlWyNaievc9nxoLf8Dykw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/><br/>
åœ¨ä¸­æ–‡å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çˆ†å‘çš„å½“ä¸‹ï¼Œå¼€å‘è€…å’Œæ·±åº¦ç”¨æˆ·ç»å¸¸é¢ä¸´ä¸€ä¸ªæå…¶ç ´åä½“éªŒçš„é—®é¢˜ï¼š<strong>Markdown æ¸²æŸ“å´©åã€LaTeX å…¬å¼ä¹±ç ã€ä»£ç å—åµŒå¥—é”™è¯¯ï¼Œæˆ–æ˜¯é•¿æ–‡æœ¬è¾“å‡ºæ—¶çš„ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰å¤±è´¥ã€‚</strong></p>
<p>æ— è®ºæ˜¯é€šä¹‰åƒé—®ï¼ˆQwenï¼‰ã€æ–‡å¿ƒä¸€è¨€ï¼ˆERNIE Botï¼‰ã€è…¾è®¯å…ƒå®è¿˜æ˜¯ Kimiï¼Œåœ¨å¤„ç†å¤æ‚æ’ç‰ˆéœ€æ±‚æ—¶ï¼Œå¶å°”éƒ½ä¼šå‡ºç°â€œç‰›å¤´ä¸å¯¹é©¬å˜´â€çš„ä¹±ç ç°è±¡ã€‚æœ¬æ–‡å°†ä»æŠ€æœ¯åŸç†ã€Prompt è°ƒä¼˜ã€ä»¥åŠåå¤„ç†æ–¹æ¡ˆä¸‰ä¸ªç»´åº¦ï¼Œæ·±åº¦è§£æå¦‚ä½•å½»åº•è§£å†³ LLM è¾“å‡ºä¹±ç é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-0"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸€ã€ ä¹±ç èƒŒåçš„æŠ€æœ¯é€»è¾‘ï¼šä¸ºä»€ä¹ˆå¤§æ¨¡å‹ä¼šâ€œèƒ¡è¨€ä¹±è¯­â€ï¼Ÿ</h2>
<p>è¦è§£å†³ä¹±ç ï¼Œé¦–å…ˆè¦ç†è§£ä¹±ç äº§ç”Ÿçš„æ ¹æºã€‚åœ¨ LLM çš„ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œä¹±ç é€šå¸¸å¹¶ééšæœºäº§ç”Ÿï¼Œè€Œæ˜¯ç”±ä»¥ä¸‹ä¸‰ç§æœºåˆ¶å¯¼è‡´çš„ï¼š</p>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1. Tokenizerï¼ˆåˆ†è¯å™¨ï¼‰çš„ç¼–ç åç§»</h3>
<p>LLM å¹¶ä¸ç›´æ¥å¤„ç†å­—ç¬¦ï¼Œè€Œæ˜¯å¤„ç† Tokenã€‚ä¸­æ–‡æ¨¡å‹é€šå¸¸ä½¿ç”¨ Byte-Pair Encoding (BPE) æˆ–ç±»ä¼¼ç®—æ³•ã€‚å½“æ¨¡å‹è¯•å›¾ç”Ÿæˆä¸€äº›å†·åƒ»å­—ã€æ•°å­¦ç¬¦å·æˆ–ç‰¹å®šæ ¼å¼çš„ä»£ç æ—¶ï¼Œå¦‚æœè¯¥å­—ç¬¦åœ¨è¯è¡¨ä¸­çš„æƒé‡è¾ƒä½ï¼Œæ¨¡å‹å¯èƒ½ä¼šé€‰æ‹©é”™è¯¯çš„ Token åºåˆ—ï¼Œå¯¼è‡´è§£ç å›æ–‡å­—æ—¶å‡ºç°ä½åç§»æˆ–ä¹±ç ã€‚</p>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. Markdown ä¸ LaTeX çš„è¯­æ³•å†²çª</h3>
<p>è¿™æ˜¯æœ€å¸¸è§çš„â€œé€»è¾‘ä¹±ç â€ã€‚ä¾‹å¦‚ï¼Œå½“ Kimi æˆ–åƒé—®è¾“å‡ºåŒ…å«å¤šè¡Œå…¬å¼çš„è®ºæ–‡æ‘˜è¦æ—¶ï¼ŒMarkdown çš„åŠ ç²—ç¬¦å·Â <code>**</code>Â å¯èƒ½ä¼šä¸ LaTeX çš„ä¹˜æ³•ç¬¦å·Â <code>*</code>Â å†²çªï¼Œå¯¼è‡´æ•´ä¸ªé¡µé¢æ¸²æŸ“æˆä¸€å›¢ä¹±ç³Ÿç³Ÿçš„æ–œä½“ï¼Œè€Œéæ¸…æ™°çš„å…¬å¼ã€‚</p>
<h3 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3. ç³»ç»Ÿæç¤ºè¯ï¼ˆSystem Promptï¼‰çš„çº¦æŸå¤±æ•ˆ</h3>
<p>ç”±äºå„å®¶å‚å•†å¯¹è¾“å‡ºæµï¼ˆStreamingï¼‰çš„æ§åˆ¶é€»è¾‘ä¸åŒï¼Œå½“é•¿æ–‡æœ¬è§¦å‘æˆªæ–­é‡è¿æ—¶ï¼Œæ§åˆ¶ç¬¦å¯èƒ½ä¼šä¸¢å¤±ï¼Œå¯¼è‡´åŸæœ¬åº”è¯¥é—­åˆçš„ä»£ç å— `````æ‚¬ç©ºï¼Œåç»­å†…å®¹å…¨éƒ¨è¢«è¯†åˆ«ä¸ºä»£ç ï¼Œå½¢æˆè§†è§‰ä¸Šçš„â€œæ’ç‰ˆä¹±ç â€ã€‚</p>
<hr/>
<h2 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>äºŒã€ å®æˆ˜æŒ‡å—ï¼šå››å¤§ä¸»æµæ¨¡å‹é˜²ä¹±ç ç­–ç•¥</h2>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1. é€šä¹‰åƒé—®ï¼ˆQwenï¼‰ï¼šå¼ºåŒ– Schema çº¦æŸ</h3>
<p>åƒé—®åœ¨ä»£ç ç”Ÿæˆå’Œé€»è¾‘æ¨ç†ä¸Šå¾ˆå¼ºï¼Œä½†æœ‰æ—¶ä¼šè¿‡åº¦è½¬ä¹‰ã€‚</p>
<ul>
<li><strong>å¯¹ç­–ï¼š</strong> Â åœ¨ Prompt ä¸­æ˜¾å¼æŒ‡å®šè¾“å‡ºæ ¼å¼ã€‚</li>
<li><strong>æŠ€å·§ï¼š</strong> Â ä½¿ç”¨â€œXML æ ‡ç­¾åŒ…è£¹æ³•â€ã€‚ä¾‹å¦‚ï¼š<code>è¯·å°†ä»£ç æ”¾åœ¨ &lt;CODE_BLOCK&gt; æ ‡ç­¾å†…ï¼Œç¡®ä¿ä¸ä½¿ç”¨ä»»ä½• Markdown ä¹‹å¤–çš„ç‰¹æ®Šè½¬ä¹‰ç¬¦ã€‚</code></li>
</ul>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. æ–‡å¿ƒä¸€è¨€ï¼šå¤„ç†ä¸­æ–‡å…¨è§’ç¬¦å·å¹²æ‰°</h3>
<p>æ–‡å¿ƒåœ¨å¤„ç†ä¸­è‹±æ–‡æ··æ’æ—¶ï¼Œå¶å°”ä¼šå°†ä»£ç ä¸­çš„åŠè§’ç¬¦å·ï¼ˆå¦‚Â <code>,</code>ï¼‰è¯¯å†™ä½œå…¨è§’ï¼ˆå¦‚Â <code>ï¼Œ</code>ï¼‰ã€‚</p>
<ul>
<li><strong>å¯¹ç­–ï¼š</strong> Â å¢åŠ â€œç¼–ç ä¸€è‡´æ€§â€è¦æ±‚ã€‚</li>
<li><strong>æŠ€å·§ï¼š</strong> Â åœ¨æç¤ºè¯å°¾éƒ¨åŠ å…¥ï¼š<code>æ³¨æ„ï¼šè¯·ä¸¥æ ¼åŒºåˆ†ä¸­è‹±æ–‡æ ‡ç‚¹ï¼Œæ‰€æœ‰ä»£ç ç‰‡æ®µå¿…é¡»ä½¿ç”¨æ ‡å‡† ASCII å­—ç¬¦ã€‚</code></li>
</ul>
<h3 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3. è…¾è®¯å…ƒå®ï¼šä¼˜åŒ–é•¿æ–‡æœ¬æˆªæ–­</h3>
<p>å…ƒå®åœ¨å¤„ç†è¶…é•¿ä»»åŠ¡æ—¶ï¼Œæœ‰æ—¶ä¼šå‡ºç°å‰åæ–‡æ ¼å¼ä¸ä¸€è‡´ã€‚</p>
<ul>
<li><strong>å¯¹ç­–ï¼š</strong> Â é‡‡ç”¨â€œåˆ†æ®µç”Ÿæˆï¼Œæ ‡è®°é”šç‚¹â€çš„æ–¹æ³•ã€‚</li>
<li><strong>æŠ€å·§ï¼š</strong> Â è¦æ±‚æ¨¡å‹åœ¨æ¯ä¸€æ®µç»“æŸæ—¶è¾“å‡ºç‰¹å®šçš„ç»“æŸç¬¦ï¼Œä¾¿äºäººå·¥æˆ–è„šæœ¬æ ¡éªŒæ ¼å¼å®Œæ•´æ€§ã€‚</li>
</ul>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4. Kimiï¼šè§£å†³ LaTeX æ¸²æŸ“å†²çª</h3>
<p>Kimi æ“…é•¿é•¿æ–‡æœ¬é˜…è¯»ï¼Œä½†åœ¨è¾“å‡ºå­¦æœ¯å†…å®¹æ—¶ï¼ŒLaTeX æ¸²æŸ“å™¨æœ‰æ—¶ä¼šå´©æºƒã€‚</p>
<ul>
<li><strong>å¯¹ç­–ï¼š</strong> Â å¼ºåˆ¶ä½¿ç”¨åŒç¾å…ƒç¬¦å·Â <code>$$</code>Â æ¢è¡ŒåŒ…è£¹å…¬å¼ã€‚</li>
<li><strong>æŠ€å·§ï¼š</strong> Â <code>è¯·ç¡®ä¿æ‰€æœ‰æ•°å­¦å…¬å¼ç‹¬ç«‹æˆè¡Œï¼Œå¹¶ä½¿ç”¨æ ‡å‡†çš„ LaTeX è¯­æ³•ï¼Œä¸¥ç¦åœ¨å…¬å¼å†…éƒ¨åµŒå¥— Markdown æ ¼å¼ã€‚</code></li>
</ul>
<hr/>
<h2 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸‰ã€ é«˜é˜¶ Prompt å·¥ç¨‹ï¼šé¢„é˜²ä¹±ç çš„é€šç”¨æ¨¡ç‰ˆ</h2>
<p>å¦‚æœä½ å¸Œæœ›è·å¾—ä¸€ä»½å®Œå…¨ä¸ä¹±ç ã€æ ¼å¼ç²¾ç¾çš„è¾“å‡ºï¼Œå»ºè®®åœ¨ Prompt ä¸­åŠ å…¥ä»¥ä¸‹**â€œæ ¼å¼ä¿æŠ¤å±‚â€**ï¼š</p>
<blockquote>
<p><strong>[ç³»ç»Ÿçº¦æŸ]</strong></p>
<ol>
<li>è¯·ä½¿ç”¨æ ‡å‡† CommonMark è§„èŒƒè¿›è¡Œæ¸²æŸ“ã€‚</li>
<li>æ‰€æœ‰çš„æ•°å­¦å…¬å¼å¿…é¡»ç¬¦åˆ LaTeX æ ‡å‡†ï¼Œè¡Œå†…å…¬å¼ç”¨ ï¼Œç‹¬ç«‹å…¬å¼ç”¨</li>
</ol>
<p>ã€‚<br/>
3. ä»£ç å—å¿…é¡»æŒ‡æ˜è¯­è¨€ç±»å‹ï¼ˆå¦‚ ```pythonï¼‰ã€‚</p>
<ol start="4">
<li>ä¸¥ç¦å¯¹é ASCII å­—ç¬¦è¿›è¡Œä¸å¿…è¦çš„ Unicode è½¬ä¹‰ã€‚</li>
<li>å¦‚æœæ–‡æœ¬é•¿åº¦è¶…è¿‡é™åˆ¶ï¼Œè¯·åœ¨ç»“æŸå¤„ä¿ç•™æœªé—­åˆçš„æ ‡ç­¾æç¤ºã€‚</li>
</ol>
</blockquote>
<hr/>
<h2 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å››ã€ åå¤„ç†çš„â€œæœ€åä¸€æ­¥â€ï¼šä»å±å¹•åˆ°æ–‡æ¡£</h2>
<p>å³ä¾¿æ¨¡å‹è¾“å‡ºå®Œç¾ï¼Œæˆ‘ä»¬åœ¨â€œå¤åˆ¶-ç²˜è´´â€çš„è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€ä¹Ÿä¼šé‡åˆ°æ ¼å¼ä¸¢å¤±çš„é—®é¢˜ã€‚ç½‘é¡µç‰ˆçš„æ¸²æŸ“å™¨å’Œæœ¬åœ°çš„ Word/Notion å¹¶ä¸å®Œå…¨å…¼å®¹ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸“ä¸šçš„<strong>è§£æä¸­è½¬ç«™</strong>ã€‚</p>
<p>å¯¹äºå¼€å‘è€…å’Œæ–‡å­—å·¥ä½œè€…æ¥è¯´ï¼Œæ‰‹åŠ¨è°ƒæ•´è¿™äº›ä¹±ç ä¸ä»…ä½æ•ˆï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚</p>
<h3 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>æ·±åº¦è§£æè§£å†³æ–¹æ¡ˆï¼šDS éšå¿ƒè½¬ APP</h3>
<p>åœ¨å°è¯•äº†å¤šç§æ²¹çŒ´æ’ä»¶å’Œå‰ªè´´æ¿æ¸…æ´—å·¥å…·åï¼Œ<strong>DS éšå¿ƒè½¬ APP</strong>Â å±•ç°å‡ºäº†æé«˜çš„å·¥ç¨‹åŒ–è§£å†³èƒ½åŠ›ã€‚å®ƒä¸ä»…æ˜¯ä¸€ä¸ªç®€å•çš„æ ¼å¼è½¬æ¢å™¨ï¼Œæ›´æ˜¯é’ˆå¯¹ LLM ä¹±ç é—®é¢˜çš„ä¸“é¡¹å·¥å…·ï¼š</p>
<ul>
<li><strong>å®Œç¾è§£æï¼š</strong> Â å®ƒå†…ç½®äº†é’ˆå¯¹ DeepSeekã€é€šä¹‰åƒé—®ã€Kimi ç­‰ä¸»æµæ¨¡å‹è¾“å‡ºé£æ ¼çš„ä¼˜åŒ–ç®—æ³•ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«å¹¶ä¿®å¤æ–­æ‰çš„ä»£ç å—å’Œå†²çªçš„å…¬å¼æ ‡ç­¾ã€‚</li>
<li><strong>è§£å†³ä¹±ç ï¼š</strong> Â é’ˆå¯¹æ‰‹æœºç«¯ã€ç½‘é¡µç«¯å¤åˆ¶å‡ºæ¥çš„ç‰¹æ®Šå­—ç¬¦ä¹±ç ï¼ŒDS éšå¿ƒè½¬èƒ½è¿›è¡ŒäºŒæ¬¡æ¸…æ´—ï¼Œè¿˜åŸæœ€çº¯å‡€çš„æ–‡æœ¬é€»è¾‘ã€‚</li>
<li><strong>ä¸€é”®å¯¼å‡ºï¼š</strong> Â è¿™ä¸€åŠŸèƒ½æœ€ä¸ºå®ç”¨ã€‚é€šè¿‡ DS éšå¿ƒè½¬ï¼Œä½ å¯ä»¥å°†æ¨¡å‹ç”Ÿæˆçš„é•¿ç¯‡å†…å®¹ï¼Œä¸€é”®å¯¼å‡ºä¸ºÂ <strong>PDFã€Markdownã€ç”šè‡³æ˜¯æ’ç‰ˆæ•´æ´çš„ Word æ–‡æ¡£</strong>ï¼Œå½»åº•å‘Šåˆ«äº†â€œæ‰‹åŠ¨å¤åˆ¶-æ‰‹åŠ¨è°ƒæ ¼å¼-æ‰‹åŠ¨æŸ¥ä¹±ç â€çš„æ­»å¾ªç¯ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç»“è¯­</h2>
<p>å¦‚æœä½ ä¹Ÿæ·±å—æ¨¡å‹æ’ç‰ˆæ··ä¹±ã€å…¬å¼æ˜¾ç¤ºå¼‚å¸¸çš„å›°æ‰°ï¼Œä¸å¦¨å°è¯•è°ƒæ•´ä½ çš„ç³»ç»Ÿæç¤ºè¯ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨Â <strong>DS éšå¿ƒè½¬ APP</strong>Â è¿›è¡Œä¸€é”®å¼çš„æ ¼å¼ä¿®å¤ä¸å¯¼å‡ºï¼Œè®©æŠ€æœ¯å›å½’æ•ˆç‡æœ¬èº«ã€‚</p>
<hr/>
<p><strong>äº’åŠ¨è¯é¢˜ï¼š</strong> Â ä½ åœ¨ç”¨å“ªå®¶å¤§æ¨¡å‹æ—¶é‡åˆ°çš„ä¹±ç æœ€è®©ä½ å¤´ç–¼ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è°ƒä¼˜ç»éªŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šä»é›¶å¼€å§‹ï¼šUbuntu 22.04 + RTX 4060 å¤ç° RLinf å…·èº«æ™ºèƒ½æ¡†æ¶è®°å½•ã€‹]]></title>    <link>https://juejin.cn/post/7601076815449587727</link>    <guid>https://juejin.cn/post/7601076815449587727</guid>    <pubDate>2026-01-31T19:49:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601076815449587727" data-draft-id="7601000638345166863" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šä»é›¶å¼€å§‹ï¼šUbuntu 22.04 + RTX 4060 å¤ç° RLinf å…·èº«æ™ºèƒ½æ¡†æ¶è®°å½•ã€‹"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-01-31T19:49:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="scilwb"/> <meta itemprop="url" content="https://juejin.cn/user/543600461486108"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šä»é›¶å¼€å§‹ï¼šUbuntu 22.04 + RTX 4060 å¤ç° RLinf å…·èº«æ™ºèƒ½æ¡†æ¶è®°å½•ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/543600461486108/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    scilwb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T19:49:53.000Z" title="Sat Jan 31 2026 19:49:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>å®˜æ–¹é¡¹ç›®é“¾æ¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FRLinf%2FRLinf.git" target="_blank" title="https://github.com/RLinf/RLinf.git" ref="nofollow noopener noreferrer">github.com/RLinf/RLinfâ€¦</a><br/>
å®˜æ–¹æ–‡æ¡£ï¼ˆä¸­æ–‡ç‰ˆï¼‰<a href="https://link.juejin.cn?target=https%3A%2F%2Frlinf.readthedocs.io%2Fzh-cn%2Flatest%2Frst_source%2Fstart%2Finstallation.html" target="_blank" title="https://rlinf.readthedocs.io/zh-cn/latest/rst_source/start/installation.html" ref="nofollow noopener noreferrer">rlinf.readthedocs.io/zh-cn/latesâ€¦</a><br/>
å®˜æ–¹æ–‡æ¡£ï¼ˆè‹±æ–‡ç‰ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Frlinf.readthedocs.io%2Fen%2Flatest%2Frst_source%2Fstart%2Finstallation.html" target="_blank" title="https://rlinf.readthedocs.io/en/latest/rst_source/start/installation.html" ref="nofollow noopener noreferrer">rlinf.readthedocs.io/en/latest/râ€¦</a></p>
</blockquote>
<p>ç¬”è€…å¼€å§‹å¤ç°å‰ç³»ç»ŸçŠ¶æ€ï¼ˆåˆšé‡è£…äº†ubuntu22.04,è¿‘ä¹è£¸æœºï¼Œé€‚åˆèŒæ–°å‚è€ƒï¼‰</p>
<ul>
<li>OSï¼šUbuntu 22.04</li>
<li>Driverï¼š535.288.01ï¼ˆç»ˆç«¯è¾“å…¥ <code>nvidia-smi</code>å³å¯æŸ¥è¯¢ï¼Œåé¢æ­¥éª¤è¦æ±‚æ›´æ–°åˆ°nvidia-driver-<strong>590</strong>ï¼‰</li>
<li>CUDA toolkitï¼š12.4ï¼ˆç»ˆç«¯è¾“å…¥ <code>nvcc -V</code>å³å¯æŸ¥è¯¢ï¼‰</li>
<li>GPUï¼šRTX 4060 8GBï¼ˆå³8188MiBï¼‰ï¼ˆç»ˆç«¯è¾“å…¥<code>nvidia-smi</code> å³å¯æŸ¥è¯¢ï¼‰</li>
</ul>
<h3 data-id="heading-1">æ€»ä½“ç›®å½•ä¸æ¨èè·¯å¾„ï¼ˆç¬”è€…æ ¹ç›®å½•ä¸º <code>lwb@isus:~$</code>ï¼‰</h3>
<p>å»ºè®®æŠŠæ‰€æœ‰å·¥ä½œç›®å½•å›ºå®šåœ¨ï¼š</p>
<ul>
<li><strong>é¡¹ç›®æ ¹ç›®å½•ï¼ˆå®¿ä¸»æœºï¼‰</strong> ï¼š<code>~/work/RLinf</code></li>
<li><strong>æ¨¡å‹/æ•°æ®ï¼ˆå®¿ä¸»æœºï¼‰</strong> ï¼š<code>~/data/rlinf/</code></li>
<li><strong>ç»“æœï¼ˆå®¿ä¸»æœºï¼‰</strong> ï¼š<code>~/work/RLinf/results</code>ï¼ˆæˆ–ç”¨é¡¹ç›®é»˜è®¤çš„ <code>../results</code>ï¼Œä½†æˆ‘å»ºè®®æŒ‚è½½å‡ºæ¥ï¼‰</li>
</ul>
<p>è¿™æ · Docker é‡Œç»Ÿä¸€æŒ‚è½½åˆ° <code>/workspace/RLinf</code>ï¼Œæ¨¡å‹æ•°æ®æŒ‚è½½åˆ° <code>/workspace/data</code>ï¼Œä¸ä¼šå› ä¸ºå®¹å™¨åˆ æ‰ä¸¢ä¸œè¥¿ã€‚</p>
<h2 data-id="heading-2">A. å®¿ä¸»æœºï¼šDocker + NVIDIA Container Toolkit å…¨æµç¨‹</h2>
<blockquote>
<p>ç›®æ ‡ï¼šè®© <code>docker run --gpus all nvidia/cuda:12.4-base nvidia-smi</code> æ­£å¸¸è¾“å‡º<br/>
è¿™æ˜¯åç»­ä¸€åˆ‡çš„â€œéªŒæ”¶é—¨æ§›â€ã€‚</p>
</blockquote>
<h3 data-id="heading-3">A0) å…ˆç¡®è®¤ç°çŠ¶</h3>
<pre><code class="hljs">nvidia-smi
nvcc -V
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/727e73c67aca4f0e9a4d88c6b8761165~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=o548zQdu8WGW5jdGNnsRM7Gwxz0%3D" alt="image.png" width="50%" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d07606676c9416597a29851fd4ec17c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=SbBioTIZ7M70chZywwuv%2F7shBTM%3D" alt="image.png" width="50%" loading="lazy"/>
<strong>å¦‚å›¾ï¼Œç¬”è€…Driveræ˜¯535.288.01ï¼Œå¿…é¡»å‡çº§åˆ°é«˜ç‰ˆæœ¬ï¼Œæ¨èNVIDIA-SMI 590</strong></p>
<h5 data-id="heading-4">1. å®‰è£…é©±åŠ¨</h5>
<pre><code class="hljs language-sql" lang="sql">sudo apt <span class="hljs-keyword">update</span>
sudo apt install nvidia<span class="hljs-operator">-</span>driver<span class="hljs-number">-590</span>
</code></pre>
<p><em>(å¦‚æœå®‰è£…è¿‡ç¨‹ä¸­å¼¹å‡ºç´«è‰²å±å¹•è¯¢é—® Secure Boot ç›¸å…³è®¾ç½®ï¼Œå»ºè®®é€‰æ‹© Disable æˆ–è€…è®¾å®šä¸€ä¸ªå¯†ç ï¼Œå¹¶åœ¨é‡å¯æ—¶æŒ‰ç…§æç¤ºæ“ä½œã€‚æœ€çœäº‹çš„åŠæ³•æ˜¯åœ¨ BIOS é‡Œç›´æ¥å…³æ‰ Secure Boot)</em></p>
<h5 data-id="heading-5">2. é‡å¯å®¿ä¸»æœºï¼ˆå¿…é¡»ï¼‰</h5>
<p>é©±åŠ¨å®‰è£…æ¶‰åŠå†…æ ¸æ¨¡å—æ›´æ–°ï¼Œä¸é‡å¯ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<pre><code class="hljs">sudo reboot
</code></pre>
<h5 data-id="heading-6">3. éªŒè¯ä¸éªŒæ”¶</h5>
<p>é‡å¯å›æ¥åï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p>
<pre><code class="hljs">nvidia-smi
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ddc2f03d156469c8caa3bfb23c2d3ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=lC9l%2FjaIFTnJbrsv%2BbOorVUKPv0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">A1) å®‰è£… Docker Engineï¼ˆæ¨è docker-ceï¼Œè€Œä¸æ˜¯ ubuntu è‡ªå¸¦ docker.ioï¼‰</h3>
<ol>
<li>å¸è½½å¯èƒ½å­˜åœ¨çš„æ—§ç»„ä»¶ï¼ˆå®‰å…¨èµ·è§ï¼‰ï¼š</li>
</ol>

<pre><code class="hljs language-arduino" lang="arduino">sudo apt-get remove -y docker docker-engine docker.io containerd runc || <span class="hljs-literal">true</span>
</code></pre>
<p>2.  å®‰è£…ä¾èµ–å¹¶æ·»åŠ  Docker å®˜æ–¹æºï¼š</p>

<pre><code class="hljs language-bash" lang="bash">sudo apt-get update
sudo apt-get install -y ca-certificates curl gnupg lsb-release

sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo <span class="hljs-built_in">chmod</span> a+r /etc/apt/keyrings/docker.gpg

<span class="hljs-built_in">echo</span> \
  <span class="hljs-string">"deb [arch=<span class="hljs-subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  <span class="hljs-subst">$(. /etc/os-release &amp;&amp; echo $VERSION_CODENAME)</span> stable"</span> | \
  sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null
</code></pre>
<p>3.  å®‰è£… Dockerï¼ˆæ³¨æ„æ­¤æ—¶è¦æŠŠæ¢¯å­å…³æ‰ï¼Œå¦åˆ™ä¼šå®‰è£…å¤±è´¥ï¼Œå¯¼è‡´æ­¥éª¤4æŠ¥é”™ï¼‰ï¼š</p>

<pre><code class="hljs language-sql" lang="sql">sudo apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> <span class="hljs-keyword">update</span>
sudo apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> install <span class="hljs-operator">-</span>y docker<span class="hljs-operator">-</span>ce docker<span class="hljs-operator">-</span>ce<span class="hljs-operator">-</span>cli containerd.io docker<span class="hljs-operator">-</span>buildx<span class="hljs-operator">-</span>plugin docker<span class="hljs-operator">-</span>compose<span class="hljs-operator">-</span>plugin
</code></pre>
<p>4.  å…è®¸å½“å‰ç”¨æˆ·å… sudo ç”¨ dockerï¼ˆå»ºè®®åšï¼Œä¸ç„¶æ¯æ¡å‘½ä»¤éƒ½ sudoï¼‰ï¼š</p>

<pre><code class="hljs language-bash" lang="bash">sudo usermod -aG docker <span class="hljs-variable">$USER</span>
newgrp docker
</code></pre>
<p><code>æ³¨æ„å¦‚æœè¿è¡Œåï¼ŒæŠ¥é”™usermodï¼šâ€œdockerâ€ç»„ä¸å­˜åœ¨ï¼Œè¯´æ˜æ­¥éª¤3æ¢¯å­æ²¡å…³ï¼Œå¯¼è‡´dockerå®‰è£…å¤±è´¥ï¼Œéœ€è¦å…³æ‰æ¢¯å­ä»£ç†åé‡æ–°æ‰§è¡Œæ­¥éª¤3 </code></p>
<ol start="5">
<li>éªŒæ”¶ï¼š</li>
</ol>

<pre><code class="hljs">docker version
</code></pre>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b6a56804dd346d1a3b7f4ffe8be7497~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=ySfwlY7sroz5oWr8UdvJrDn5UCU%3D" alt="image.png" width="50%" loading="lazy"/>
<pre><code class="hljs language-arduino" lang="arduino">docker run --rm hello-world
</code></pre>
<ul>
<li>
<p><strong>å¦‚æœä½ åœ¨å›½å†…ï¼Œé‡åˆ°ç½‘ç»œé—®é¢˜æ—¶ï¼ˆé•œåƒæ‹‰å–é€Ÿåº¦æ…¢ï¼‰</strong>
ç­‰å¾…ä¸€ä¼šæŠ¥é”™å¦‚ä¸‹å›¾</p>
</li>
<li>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1d8eb7d931d4116a83d3ec868303048~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=VoYvycWUSJh95LFeXJGGMCmEoyA%3D" alt="image.png" loading="lazy"/>
è§£å†³åŠæ³•
å¯ä»¥é€šè¿‡ä½¿ç”¨å›½å†…çš„ Docker é•œåƒæºæ¥åŠ é€Ÿæ‹‰å–é€Ÿåº¦ï¼Œä½¿ç”¨é˜¿é‡Œäº‘ç­‰å›½å†…é•œåƒã€‚å¯ä»¥å‚è€ƒä»¥ä¸‹æ­¥éª¤é…ç½®é˜¿é‡Œäº‘çš„ Docker é•œåƒæºï¼š</p>
</li>
<li>
<p><strong>é…ç½®é˜¿é‡Œäº‘çš„ Docker é•œåƒæº</strong>ï¼š</p>
</li>
</ul>

<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">mkdir</span> -p /etc/docker
sudo <span class="hljs-built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="hljs-string">'EOF'</span> 
{ 
<span class="hljs-string">"registry-mirrors"</span>: [<span class="hljs-string">"&lt;your-aliyun-mirror-url&gt;"</span>] ,
<span class="hljs-string">"https://docker.m.daocloud.io"</span>]
} 
EOF 
</code></pre>
<ul>
<li>
<p>æ³¨æ„ï¼šæ›¿æ¢å…¶ä¸­çš„ <code>&lt;your-aliyun-mirror-url&gt;</code> ä¸ºä½ è‡ªå·±çš„é˜¿é‡Œäº‘é•œåƒ URLï¼Œå…·ä½“åœ°å€å¯ä»¥é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcr.console.aliyun.com%2Fcn-hangzhou%2Finstances%2Fmirrors" target="_blank" title="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘ Docker é•œåƒåŠ é€Ÿå™¨</a> è·å¾—ã€‚</p>
</li>
<li>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5da1d8c6324b45e2876bce59c041205f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=PzTT%2FoYIOxTdhKBvGCv6%2BTz9%2B5w%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p><strong>é‡æ–°é…ç½®å¹¶æ¸…ç† Docker è®¾ç½®</strong>ï¼š<br/>
ç¡®ä¿ <code>/etc/docker/daemon.json</code> æ–‡ä»¶åªåŒ…å«ä½ ä¿¡ä»»çš„å‡ ä¸ªé•œåƒæºã€‚ç„¶åï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li>
<p>æ¸…ç† Docker ç¼“å­˜ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">docker <span class="hljs-keyword">system</span> prune -af
</code></pre>
</li>
<li>
<p>é‡æ–°åŠ è½½é…ç½®å¹¶é‡å¯ Dockerï¼š</p>
<pre><code class="hljs">sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>æ£€æŸ¥æ˜¯å¦èƒ½è®¿é—® Docker Hub é•œåƒæº</strong>ï¼š</p>
<pre><code class="hljs">docker pull hello-world
</code></pre>
<p>æ¥ç€å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿è¡Œ <code>hello-world</code> é•œåƒæ¥éªŒè¯ Docker æ˜¯å¦é…ç½®æ­£å¸¸ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">docker run --rm hello-world
</code></pre>
<p>æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p>
</li>
<li>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b9251c617b445c0b4dfa567b3307fb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=qR0h5Xr9zjF8HQ8Gr00NjD88PPA%3D" alt="image.png" width="50%" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8025ebd63a47400e9e8cd82c4603e01e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=7Iu49HzATB6Imezqb9BQj0VCaA0%3D" alt="image.png" width="50%" loading="lazy"/></p>
</li>
</ul>
<h3 data-id="heading-8">A2) å®‰è£… NVIDIA Container Toolkitï¼ˆGPU é€ä¼ ï¼‰</h3>
<p>RLinf æ–‡æ¡£æ˜ç¡®è¦æ±‚ NVIDIA Container Toolkitï¼ˆå¹¶ç»™å‡ºç‰ˆæœ¬è¦æ±‚ï¼‰ã€‚</p>
<ol>
<li>æ·»åŠ  NVIDIA æºå¹¶å®‰è£…ï¼š</li>
</ol>

<pre><code class="hljs language-arduino" lang="arduino">curl -fsSL https:<span class="hljs-comment">//nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /etc/apt/keyrings/nvidia-container-toolkit.gpg</span>
curl -fsSL https:<span class="hljs-comment">//nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \
  sed 's#deb https://#deb [signed-by=/etc/apt/keyrings/nvidia-container-toolkit.gpg] https://#g' | \
  sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list</span>

sudo apt-get update
sudo apt-get install -y nvidia-container-toolkit
</code></pre>
<p>2.  é…ç½® Docker runtimeï¼š</p>

<pre><code class="hljs language-ini" lang="ini">sudo nvidia-ctk runtime configure <span class="hljs-attr">--runtime</span>=docker
sudo systemctl restart docker
</code></pre>
<p>3.  éªŒæ”¶ GPU é€ä¼ ï¼ˆéå¸¸å…³é”®ï¼‰ï¼š</p>

<pre><code class="hljs language-css" lang="css">docker run <span class="hljs-attr">--rm</span> <span class="hljs-attr">--gpus</span> <span class="hljs-attribute">all</span> nvidia/cuda:<span class="hljs-number">12.4</span>.<span class="hljs-number">0</span>-base-ubuntu22.<span class="hljs-number">04</span> nvidia-smi
</code></pre>
<p>çœ‹åˆ° 4060 ä¿¡æ¯å°±è¯´æ˜ Docker GPU é€ä¼ æˆåŠŸã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc262f1a96c14231b8c7f7ae44f09144~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=1HDcPqhr5UqGxQEYMMxXHI%2FDIZ8%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-9">B. æ‹‰å– RLinf å®˜æ–¹é•œåƒ + æŒ‚è½½ç›®å½•ï¼ˆæ¨èæœ€ç¨³çš„æ–¹å¼ï¼‰</h2>
<p>RLinf å®˜æ–¹æ–‡æ¡£<br/>
(<br/>
å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç‰ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Frlinf.readthedocs.io%2Fzh-cn%2Flatest%2Frst_source%2Fstart%2Finstallation.html" target="_blank" title="https://rlinf.readthedocs.io/zh-cn/latest/rst_source/start/installation.html" ref="nofollow noopener noreferrer">rlinf.readthedocs.io/zh-cn/latesâ€¦</a><br/>
å®˜æ–¹æ–‡æ¡£è‹±æ–‡ç‰ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Frlinf.readthedocs.io%2Fen%2Flatest%2Frst_source%2Fstart%2Finstallation.html" target="_blank" title="https://rlinf.readthedocs.io/en/latest/rst_source/start/installation.html" ref="nofollow noopener noreferrer">rlinf.readthedocs.io/en/latest/râ€¦</a><br/>
)<br/>
æä¾›ä¸¤ä¸ªå¿«é€Ÿå¼€å§‹é•œåƒï¼š</p>
<ul>
<li><strong>æ•°å­¦æ¨ç†é•œåƒï¼ˆæœ€é€‚åˆä½  4060 8GB å…ˆè·‘é€šï¼‰</strong> ï¼š<code>rlinf/rlinf:math-rlinf0.1-torch2.6.0-sglang0.4.6.post5-vllm0.8.5-megatron0.13.0-te2.1</code></li>
<li><strong>å…·èº«é•œåƒï¼ˆOpenVLA / Libero / ManiSkill ç­‰ï¼Œæ˜¾å­˜/èµ„æºå‹åŠ›æ›´å¤§ï¼‰</strong> ï¼š<code>rlinf/rlinf:agentic-rlinf0.1-torch2.6.0-openvla-openvlaoft-pi0</code></li>
</ul>
<p>æˆ‘ä»¬å…ˆèµ°<strong>æ•°å­¦æ¨ç†é•œåƒ</strong>Quickstart 2ï¼ˆæœ€ä½èµ„æºã€å®˜æ–¹å•å¡é…ç½®ï¼‰</p>
<hr/>
<h3 data-id="heading-10">B1) å»ºç›®å½•ï¼ˆå®¿ä¸»æœºï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p ~/work/RLinf
<span class="hljs-built_in">mkdir</span> -p ~/data/rlinf/models
<span class="hljs-built_in">mkdir</span> -p ~/data/rlinf/datasets
<span class="hljs-built_in">mkdir</span> -p ~/data/rlinf/cache/hf
<span class="hljs-built_in">mkdir</span> -p ~/data/rlinf/cache/torch
</code></pre>
<hr/>
<h3 data-id="heading-11">B2) æ‹‰é•œåƒï¼ˆæ•°å­¦æ¨ç†é•œåƒï¼‰</h3>
<ul>
<li>å…ˆç»™Docker é…ç½®æ–‡ä»¶<strong>æ·»åŠ ä»£ç†è®¾ç½®</strong>ï¼š</li>
</ul>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºå’Œç¼–è¾‘ Docker çš„ systemd é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">mkdir</span> -p /etc/systemd/system/docker.service.d
sudo nano /etc/systemd/system/docker.service.d/override.conf
</code></pre>
<p>åœ¨æ‰“å¼€çš„ <code>override.conf</code> æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆæ³¨æ„å›¾ä¸­ä»£ç†åœ°å€127.0.0.1å’Œç«¯å£7890ï¼Œè¦æ ¹æ®è‡ªå·±çš„ä»£ç†é…ç½®ä¿®æ”¹ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[Service]</span>
<span class="hljs-attr">Environment</span>=<span class="hljs-string">"HTTP_PROXY=http://127.0.0.1:7890"</span>
<span class="hljs-attr">Environment</span>=<span class="hljs-string">"HTTPS_PROXY=http://127.0.0.1:7890"</span>
</code></pre>
<ul>
<li>
<p><strong>ä¿å­˜å¹¶é€€å‡º</strong>ï¼š</p>
<ul>
<li>åœ¨ <code>nano</code> ç¼–è¾‘å™¨ä¸­ï¼ŒæŒ‰ <code>Ctrl + O</code> ä¿å­˜ï¼ŒæŒ‰ <code>Y</code> ç¡®è®¤ä¿å­˜ï¼Œç„¶åæŒ‰ <code>Ctrl + X</code>é€€å‡ºç¼–è¾‘å™¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>é‡æ–°åŠ è½½ Docker é…ç½®å¹¶é‡å¯ Docker</strong>ï¼š<br/>
æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥é‡æ–°åŠ è½½ Docker é…ç½®å¹¶é‡å¯ Docker æœåŠ¡ï¼Œä½¿æ–°çš„ä»£ç†è®¾ç½®ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs">sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre>
</li>
<li>
<p><strong>éªŒè¯ä»£ç†è®¾ç½®</strong>ï¼š<br/>
ä»£ç†é…ç½®å®Œæˆåï¼Œå°è¯•æ‹‰å–é•œåƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker pull rlinf/rlinf:math-rlinf0.1-torch2.6.0-sglang0.4.6.post5-vllm0.8.5-megatron0.13.0-te2.1
</code></pre>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e959ff02267e44708cc1ecd9cffb89b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=gwtzpCa7AcBDtuN7B%2FATO6NAkeM%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œæƒ³åå˜ˆä¸€ä¸‹ï¼Œç¬”è€…ç¬¬ä¸€æ¬¡æ‹‰å–ä¸‹è½½äº†å¿«ä¸¤ä¸ªå°æ—¶ï¼Œå¿«ä¸‹å®Œçš„æ—¶å€™æŠ¥é”™ä¸­æ–­äº†ï¼Œè§ä¸‹å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba2fda476d464441b2c7a3cf065ddc21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=1Nx6QbcbDCRRKgxGLsxt8AnIGEk%3D" alt="image.png" loading="lazy"/>
é‡åˆ°è¿™ç§æƒ…å†µçš„æœ‹å‹ä¸è¦æ‹…å¿ƒï¼Œé‡æ–°æ‹‰å–ä¸€é<code>docker pull rlinf/rlinf:math-rlinf0.1-torch2.6.0-sglang0.4.6.post5-vllm0.8.5-megatron0.13.0-te2.1</code>è¿™ä¸€æ¬¡ä¼šå¿«å¾ˆå¤šï¼Œç¬”è€…åˆç­‰äº†30åˆ†é’Ÿå°±å®Œæˆäº†</p>
<hr/>
<h3 data-id="heading-12">B3) å…‹éš† RLinf ä»“åº“åˆ°å®¿ä¸»æœºï¼ˆæ–¹ä¾¿ç¼–è¾‘yamlï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ~/work
git <span class="hljs-built_in">clone</span> https://github.com/RLinf/RLinf.git
<span class="hljs-built_in">cd</span> RLinf
</code></pre>
<hr/>
<h3 data-id="heading-13">B4) å¯åŠ¨å®¹å™¨ï¼ˆå¼ºçƒˆæ¨èæŒ‰è¿™ä¸ªå†™æ³•ï¼šæŒ‚è½½ä»£ç  + æ•°æ® + cacheï¼‰</h3>
<blockquote>
<p>è¿™æ ·ä½ åœ¨å®¿ä¸»æœºæ”¹ configï¼Œå®¹å™¨é‡Œç«‹åˆ»ç”Ÿæ•ˆï¼›æ¨¡å‹å’Œæ•°æ®ä¹Ÿéƒ½åœ¨å®¿ä¸»æœºè½ç›˜ã€‚</p>
</blockquote>
<pre><code class="hljs language-ruby" lang="ruby">cd ~<span class="hljs-regexp">/work/</span><span class="hljs-title class_">RLinf</span>
docker run -it --rm --gpus all \
  --shm-size 20g \
  --network host \
  --name rlinf-math \
  -e <span class="hljs-variable constant_">NVIDIA_DRIVER_CAPABILITIES</span>=all \
  -e <span class="hljs-variable constant_">HF_HOME</span>=<span class="hljs-regexp">/workspace/cache</span><span class="hljs-regexp">/hf \
  -e TORCH_HOME=/workspace</span><span class="hljs-regexp">/cache/torch</span> \
  -v <span class="hljs-variable">$(</span>pwd)<span class="hljs-symbol">:/workspace/RLinf</span> \
  -v ~<span class="hljs-regexp">/data/rlinf</span><span class="hljs-symbol">:/workspace/data</span> \
  -v ~<span class="hljs-regexp">/data/rlinf</span><span class="hljs-regexp">/cache:/workspace</span><span class="hljs-regexp">/cache \
  rlinf/rlinf</span><span class="hljs-symbol">:math-rlinf0</span>.<span class="hljs-number">1</span>-torch2.<span class="hljs-number">6.0</span>-sglang0.<span class="hljs-number">4.6</span>.post5-vllm0.<span class="hljs-number">8.5</span>-megatron0.<span class="hljs-number">13.0</span>-te2.<span class="hljs-number">1</span> \
  /bin/bash
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ff512f941744738912b2c25c27ac472~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=oMWxaJcMwEzu7Z0uWhcG8gotOYg%3D" alt="image.png" loading="lazy"/>
å®¹å™¨é‡Œä½ åº”å½“åœ¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /workspace/RLinf
</code></pre>
<h3 data-id="heading-14">B5) å®¹å™¨å†…åšä¸€æ¬¡æœ€åŸºç¡€éªŒæ”¶ï¼ˆGPU + PyTorchï¼‰</h3>
<p>åœ¨å®¹å™¨é‡Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-scss" lang="scss">nvidia-smi
python -c "import torch; <span class="hljs-built_in">print</span>('torch', torch.__version__); <span class="hljs-built_in">print</span>('cuda?', torch.cuda.is_available()); <span class="hljs-built_in">print</span>('gpu', torch.cuda.get_device_name(<span class="hljs-number">0</span>) if torch<span class="hljs-selector-class">.cuda</span><span class="hljs-selector-class">.is_available</span>() else <span class="hljs-attribute">None</span>)"
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d9492dd9f1c4dee86db6dcd778c1117~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=yFsHk8XqXe3UReatLhYtLhWXVWM%3D" alt="image.png" loading="lazy"/>
è¿™ä¸€æ­¥é€šè¿‡ï¼Œè¯´æ˜â€œå®¿ä¸»æœºé©±åŠ¨ + Docker é€ä¼  + å®¹å™¨ä¾èµ–â€é—­ç¯ã€‚</p>
<hr/>
<h2 data-id="heading-15">C. è·‘é€š RLinf æœ€è½»é‡ Demoï¼ˆä¼˜å…ˆï¼šQuickstart 2 å• GPU GRPO on MATHï¼‰</h2>
<p>å®˜æ–¹ Quickstart 2 æ˜ç¡®ç»™äº†ï¼š</p>
<ul>
<li>è¦ä¸‹è½½ä¸€ä¸ª 1.5B æ¨¡å‹ checkpoint</li>
<li>ä¸‹è½½ boba æ•°æ®é›†</li>
<li>ä¿®æ”¹ <code>examples/reasoning/config/math/qwen2.5-1.5b-single-gpu.yaml</code><br/>
å¹¶ä¸”è¯´æ˜è¿™ä¸ªé…ç½®<strong>é»˜è®¤å• GPU</strong>ã€‚</li>
</ul>
<h3 data-id="heading-16">C1) åœ¨å®¹å™¨å†…å®‰è£… huggingface-hub</h3>
<pre><code class="hljs">pip install -U huggingface-hub
</code></pre>
<h3 data-id="heading-17">C2) ä¸‹è½½æ¨¡å‹ä¸æ•°æ®ï¼ˆè½åœ¨å®¿ä¸»æœºæŒ‚è½½ç›®å½•ï¼Œé¿å…å®¹å™¨åˆ æ‰ä¸¢å¤±ï¼‰</h3>
<p>åœ¨å®¹å™¨é‡Œï¼š</p>
<h4 data-id="heading-18">æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ Hugging Face å›½å†…é•œåƒ</h4>
<p>ï¼ˆä¼˜å…ˆå°è¯• <strong>æ–¹æ¡ˆä¸€</strong> ã€‚å› ä¸ºä»£ç†æœ‰æ—¶å€™å¸¦å®½ä¸å¤Ÿæˆ–è€…è¿æ¥ä¸ç¨³å®šï¼Œä¸‹è½½å¤§æ¨¡å‹å®¹æ˜“æ–­è¿ã€‚å›½å†…é•œåƒç«™ <code>hf-mirror.com</code> é€šå¸¸éå¸¸ç¨³å®šä¸”é€Ÿåº¦æå¿«ï¼‰</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /workspace/data
<span class="hljs-comment"># è®¾ç½® HF é•œåƒç¯å¢ƒå˜é‡</span>
<span class="hljs-built_in">export</span> HF_ENDPOINT=https://hf-mirror.com

<span class="hljs-comment"># æ¨¡å‹</span>
hf download deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B \
  --local-dir /workspace/data/models/DeepSeek-R1-Distill-Qwen-1.5B

<span class="hljs-comment"># æ•°æ®é›†</span>
hf download inclusionAI/AReaL-boba-Data --repo-type=dataset \
  --local-dir /workspace/data/datasets/boba
</code></pre>
<p><strong>å¦‚ä½•æ°¸ä¹…ç”Ÿæ•ˆï¼Ÿ</strong> å¦‚æœä½ å¸Œæœ›æ¯æ¬¡è¿›å…¥å®¹å™¨éƒ½ä¸ç”¨é‡æ–°è¾“è¿™è¡Œå‘½ä»¤ï¼Œå¯ä»¥æŠŠå®ƒå†™å…¥å®¹å™¨çš„é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">'export HF_ENDPOINT=https://hf-mirror.com'</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
<h4 data-id="heading-19">æ–¹æ¡ˆäºŒï¼šåœ¨å®¹å™¨å†…é…ç½®ä»£ç†</h4>
<p>å¦‚æœä½ æƒ³è®©å®¹å™¨å†…çš„æ‰€æœ‰æµé‡ï¼ˆä¸ä»…æ˜¯ HFï¼Œè¿˜åŒ…æ‹¬ pip install github ç­‰ï¼‰éƒ½èµ°ä»£ç†ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
<p>å› ä¸ºä½ å¯åŠ¨å®¹å™¨æ—¶åŠ äº† <code>--network host</code>ï¼Œå®¹å™¨å’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œï¼Œæ‰€ä»¥å®¹å™¨å†…çš„ <code>127.0.0.1</code> å°±æ˜¯å®¿ä¸»æœºçš„ <code>127.0.0.1</code>ã€‚</p>
<p>åœ¨å®¹å™¨å†…çš„ç»ˆç«¯æ‰§è¡Œï¼ˆå‡è®¾ä½ çš„ä»£ç†ç«¯å£æ˜¯ 7890ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /workspace/data
<span class="hljs-built_in">export</span> http_proxy=http://127.0.0.1:7890
<span class="hljs-built_in">export</span> https_proxy=http://127.0.0.1:7890

<span class="hljs-comment"># æ¨¡å‹</span>
hf download deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B \
  --local-dir /workspace/data/models/DeepSeek-R1-Distill-Qwen-1.5B

<span class="hljs-comment"># æ•°æ®é›†</span>
hf download inclusionAI/AReaL-boba-Data --repo-type=dataset \
  --local-dir /workspace/data/datasets/boba
</code></pre>
<p><strong>å¦‚ä½•æ°¸ä¹…ç”Ÿæ•ˆï¼Ÿ</strong> åŒæ ·å†™å…¥ <code>.bashrc</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">'export http_proxy=http://127.0.0.1:7890'</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export https_proxy=http://127.0.0.1:7890'</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
<blockquote>
<p><strong>æ˜¾å­˜å»ºè®®ï¼ˆ4060 8GBï¼‰</strong><br/>
1.5B é‡çº§é€šå¸¸ä½œä¸ºèµ·ç‚¹èƒ½æ›´ç¨³è·‘é€šã€‚ä¸è¦ä¸€å¼€å§‹å°±ä¸Š 7B/æ›´å¤§ã€‚</p>
</blockquote>
<h3 data-id="heading-20">C3) ä¿®æ”¹ YAML é…ç½®</h3>
<p>é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå®¿ä¸»æœºå’Œå®¹å™¨ä¸€è‡´ï¼Œå› ä¸ºæŒ‚è½½äº†ä»£ç ï¼Œæ‰€ä»¥ç›´æ¥åœ¨å®¿ä¸»æœºæ”¹æ–‡ä»¶å³å¯ï¼‰ï¼š</p>
<ul>
<li><code>/workspace/RLinf/examples/reasoning/config/math/qwen2.5-1.5b-single-gpu.yaml</code></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77cc3ce11095472099bef4a4ff872d6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=7Re6uoYmKLg1yP4J9j3PBxU70ao%3D" alt="image.png" loading="lazy"/>
éœ€è¦æŒ‰æ–‡æ¡£ä¿®æ”¹è¿™å‡ ä¸ªå­—æ®µï¼ˆå®˜æ–¹åˆ—å‡ºçš„å…³é”®å­—æ®µï¼‰ï¼š</p>
<ul>
<li><code>rollout.model.model_path</code></li>
<li><code>data.train_data_paths</code></li>
<li><code>data.val_data_paths</code></li>
<li><code>actor.tokenizer.tokenizer_model</code></li>
</ul>
<p>æŠŠå®ƒä»¬æ”¹æˆä½ å®é™…è·¯å¾„ï¼ˆæˆ‘ä»¬åˆšä¸‹è½½åˆ° <code>/workspace/data/...</code>ï¼‰ã€‚</p>
<p><strong>æ¨èå€¼ï¼ˆå¯¹åº”ä¸Šé¢ä¸‹è½½ä½ç½®ï¼‰ï¼š</strong></p>
<ul>
<li>
<p><code>rollout.model.model_path: /workspace/data/models/DeepSeek-R1-Distill-Qwen-1.5B</code></p>
</li>
<li>
<p><code>actor.tokenizer.tokenizer_model: /workspace/data/models/DeepSeek-R1-Distill-Qwen-1.5B</code></p>
</li>
<li>
<p>æ•°æ®é›†é‡Œä½ éœ€è¦æ‰¾åˆ° <code>AReaL-boba-106k.jsonl</code> çš„å®é™…ä½ç½®ï¼ˆæ–‡æ¡£æåˆ°è¿™ä¸ªæ–‡ä»¶åï¼‰ã€‚<br/>
å¯ä»¥å…ˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#å®¹å™¨ä¸­è¾“å…¥</span>
find /workspace/data/datasets/boba -maxdepth 4 -<span class="hljs-built_in">type</span> f -name <span class="hljs-string">"*106k*.jsonl"</span> -o -name <span class="hljs-string">"*.jsonl"</span> | <span class="hljs-built_in">head</span>
</code></pre>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a4d731b996248a0b272ed81fdc0b9c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=%2FlTX95dMHdwGy0IrX6LxEpMnJt8%3D" alt="image.png" loading="lazy"/><br/>
æ‰¾åˆ°çš„ jsonl è·¯å¾„ <code>data.train_data_paths</code> å’Œ <code>data.val_data_paths</code>ã€‚</p>
<ul>
<li><code>data.train_data_paths: /workspace/data/datasets/boba/AReaL-boba-106k.jsonl</code></li>
<li><code>data.val_data_paths: /workspace/data/datasets/boba/AReaL-boba-106k.jsonl</code></li>
</ul>
<p>qwen2.5-1.5b-single-gpu.yamlæ–‡ä»¶å…·ä½“ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment">#éƒ¨åˆ†ä»£ç </span>
<span class="hljs-attr">model:</span>
    <span class="hljs-attr">model_path:</span> <span class="hljs-string">/workspace/data/models/DeepSeek-R1-Distill-Qwen-1.5B</span>
    <span class="hljs-attr">model_type:</span> <span class="hljs-string">qwen2.5</span>
    <span class="hljs-attr">precision:</span> <span class="hljs-string">${actor.model.precision}</span>             <span class="hljs-comment"># precision for rollout model, support [fp16, bf16, fp32]</span>
    
<span class="hljs-attr">tokenizer:</span>
    <span class="hljs-attr">tokenizer_model:</span> <span class="hljs-string">/workspace/data/models/DeepSeek-R1-Distill-Qwen-1.5B</span>
    <span class="hljs-attr">use_fast:</span> <span class="hljs-literal">False</span>
    <span class="hljs-attr">trust_remote_code:</span> <span class="hljs-literal">True</span>
    <span class="hljs-attr">padding_side:</span> <span class="hljs-string">'right'</span>
    
<span class="hljs-attr">train_data_paths:</span> [<span class="hljs-string">"/workspace/data/datasets/boba/AReaL-boba-106k.jsonl"</span>]
<span class="hljs-attr">val_data_paths:</span> [<span class="hljs-string">"/workspace/data/datasets/boba/AReaL-boba-106k.jsonl"</span>]
</code></pre>
<h3 data-id="heading-21">C4) å¯åŠ¨è®­ç»ƒï¼ˆç”¨å®˜æ–¹æä¾›çš„ launch scriptï¼‰</h3>
<p>Quickstart 2 å†™çš„æ˜¯â€œExecute the provided launch scriptâ€ï¼Œå¹¶ä¸”é…ç½®é»˜è®¤å• GPUã€‚<br/>
ä¸åŒç‰ˆæœ¬ä»“åº“è„šæœ¬åå­—å¯èƒ½ä¼šå˜ï¼Œä½†<strong>ä¸€å®šèƒ½åœ¨ä»“åº“ <code>examples/reasoning/</code> æˆ– <code>examples/</code> ä¸‹æ‰¾åˆ°å¯åŠ¨è„šæœ¬</strong>ã€‚æˆ‘å»ºè®®ä½ è¿™æ ·åšï¼Œä¿è¯ä¸èµ°é”™ï¼š</p>
<ol>
<li>å…ˆåˆ—å‡º reasoning ä¾‹å­ç›®å½•ï¼š</li>
</ol>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">ls</span> -lah /workspace/RLinf/examples/reasoning
find /workspace/RLinf/examples/reasoning -maxdepth 2 -<span class="hljs-built_in">type</span> f -name <span class="hljs-string">"*.sh"</span> -o -name <span class="hljs-string">"*.py"</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/301d669a9ff54bcd90c50bf53da2958c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=gj3IfwTTffIlERrZpDaPNrpZaDA%3D" alt="image.png" loading="lazy"/>
2.  æ‰¾åˆ°ä¸ MATH / grpo / launch ç›¸å…³çš„è„šæœ¬åè¿è¡Œå®ƒï¼Œå¹¶æŠŠä½ åˆšæ”¹çš„ yaml ä½œä¸ºå‚æ•°ï¼ˆå¦‚æœè„šæœ¬æ”¯æŒï¼‰ã€‚</p>
<blockquote>
<p>å¦‚æœä½ å¸Œæœ›æˆ‘æŠŠâ€œå…·ä½“å¯åŠ¨å‘½ä»¤è¡Œâ€å†™æˆä¸€æ¡ï¼ˆä¸é ä½ è‡ªå·± findï¼‰ï¼Œæˆ‘ä¹Ÿå¯ä»¥â€”â€”ä½†è¦ä»¥ä½ ä»“åº“é‡Œå®é™…çš„è„šæœ¬æ–‡ä»¶åä¸ºå‡†ã€‚ä½ æŠŠ <code>find ... -name "*.sh"</code> çš„è¾“å‡ºè´´å‡ºæ¥ï¼Œæˆ‘å°±èƒ½ç»™å‡ºç²¾ç¡®åˆ°æ–‡ä»¶åçš„ä¸€è¡Œå‘½ä»¤ã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /workspace/RLinf/examples/reasoning
bash run_main_grpo_math.sh qwen2.5-1.5b-single-gpu
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29405f25a9cf4868bbaf592556767cc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=quDxJZDtnOd0JaX53WdKu04kI%2BY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-22">C5) ç»“æœä¸æ—¥å¿—ä½ç½®</h3>
<p>Quickstart 2 å†™äº†è®­ç»ƒç»“æœåœ¨ <code>../results</code>ï¼ŒTensorBoard åœ¨ <code>../results/grpo-1.5b/tensorboard/</code>ã€‚<br/>
åœ¨å®¿ä¸»æœºå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç”Ÿæˆçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac34f5d31eeb419aaa486f4971bf1a92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2NpbHdi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770494464&amp;x-signature=0WahdQ9VpJ9xHj4Wi7uYWbOwTlo%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-23">D. (æœªå®Œå¾…ç»­)é€æ¸æé«˜éš¾åº¦ï¼ˆä»ç„¶ä¼˜å…ˆâ€œå…ˆè¯„æµ‹åè®­ç»ƒâ€ï¼Œçœæ˜¾å­˜/çœæ—¶é—´ï¼‰</h2>
<h3 data-id="heading-24">D1) LLM è¯„æµ‹ï¼ˆæ¯”è®­ç»ƒæ›´çœèµ„æºï¼‰</h3>
<p>RLinf æä¾›äº† Math Reasoning çš„è¯„æµ‹æ•™ç¨‹ã€‚<br/>
å»ºè®®æŒ‰æ–‡æ¡£èµ°ï¼šå…ˆç”¨å·²æœ‰ checkpoint åš evalï¼Œç¡®è®¤ pipeline æ²¡é—®é¢˜ï¼Œå†è€ƒè™‘è®­ç»ƒã€‚</p>
<hr/>
<h3 data-id="heading-25">D2) å…·èº«è¯„æµ‹ï¼ˆEmbodied VLA Evaluationï¼Œå…ˆè·‘ eval è„šæœ¬ï¼‰</h3>
<p>å®˜æ–¹ç»™äº†ä¸€æ¡<strong>ä¸€é”® eval</strong> çš„è„šæœ¬å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">bash examples/embodiment/eval_embodiment.sh libero_10_grpo_openvlaoft_eval
</code></pre>
<p>**æ³¨æ„ï¼š**å…·èº«è¯„æµ‹å¾€å¾€æ¶‰åŠç¯å¢ƒ/èµ„äº§ï¼ˆLibero/ManiSkill ç­‰ï¼‰ï¼Œä½ éœ€è¦å¯¹åº”çš„å…·èº«é•œåƒæˆ–æŒ‰ç¤ºä¾‹åº“å®‰è£…ä¾èµ–ã€‚å®˜æ–¹è¯´ eval è„šæœ¬éƒ½åœ¨ <code>examples/embodiment/</code>ã€‚</p>
<p>è¿™ä¸€æ­¥å±äºâ€œä¸­ç­‰éš¾åº¦â€ï¼šå¯èƒ½ä¼šåƒåˆ°æ›´å¤šæ˜¾å­˜ï¼ˆVLA æ¨¡å‹ + æ¸²æŸ“ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-26">D3) å…·èº«è®­ç»ƒï¼ˆæœ€é«˜éš¾åº¦ï¼Œ4060 8GB å¾ˆå¯èƒ½åªèƒ½â€œé™é…è·‘é€šâ€ï¼‰</h3>
<p>å¦‚æœè¦ä¸Šå…·èº«é•œåƒï¼ˆOpenVLA/Libero/ManiSkillï¼‰ï¼Œå®˜æ–¹æä¾›å¯¹åº”é•œåƒ tagï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker pull rlinf/rlinf:agentic-rlinf0.1-torch2.6.0-openvla-openvlaoft-pi0
</code></pre>
<p>å†ç”¨ç±»ä¼¼çš„æŒ‚è½½æ–¹å¼å¯åŠ¨ã€‚</p>
<p>ç°å®è¾¹ç•Œï¼šå®˜æ–¹â€œextensively testedâ€ç¡¬ä»¶æ˜¯æœåŠ¡å™¨çº§å¤šå¡ï¼Œ4060 8GB çš„ç›®æ ‡åº”è¯¥æ˜¯ï¼š</p>
<ul>
<li>âœ… è·‘é€š eval / è·‘é€šå°è§„æ¨¡è®­ç»ƒ step</li>
<li>âŒ ä¸è¦æŒ‡æœ›å¤ç°è®ºæ–‡çº§åå/å®Œæ•´è®­ç»ƒæ›²çº¿ï¼ˆèµ„æºå·®ä¸¤ä¸ªé‡çº§ï¼‰</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Windows11å®‰è£…opencodeè¸©å‘è®°å½•]]></title>    <link>https://juejin.cn/post/7601041482892967986</link>    <guid>https://juejin.cn/post/7601041482892967986</guid>    <pubDate>2026-01-31T16:46:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601041482892967986" data-draft-id="7601169987411771430" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Windows11å®‰è£…opencodeè¸©å‘è®°å½•"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-01-31T16:46:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èœå°±å¾—ç»ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/937201674496142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Windows11å®‰è£…opencodeè¸©å‘è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/937201674496142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èœå°±å¾—ç»ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T16:46:13.000Z" title="Sat Jan 31 2026 16:46:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘opencodeå¾ˆç«çˆ†ï¼Œæ‰€ä»¥æƒ³å®‰è£…è¯•ä¸€ä¸‹ï¼Œç›®å‰ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šå¤§ç‰›å†™çš„å®‰è£…æµç¨‹ï¼Œä½†çœŸæ­£æŒ‰ç…§æµç¨‹ä¸€æ­¥æ­¥èµ°ä¸‹æ¥å´é‡åˆ°äº†å¤§ç‰›æ²¡æœ‰çš„é—®é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œè®°å½•ä¸€ä¸‹è‡ªå·±è¸©çš„å‘ã€‚æ‚¨çš„å‘å¯èƒ½è·Ÿæˆ‘ä¸ä¸€æ ·ï¼Œä»…ä¾›å‚è€ƒã€‚ä¸ºäº†æ’é™¤å—ç½‘ç»œé™åˆ¶å½±å“ï¼Œå…¨ç¨‹éƒ½æ˜¯å¼€äº†é­”æ³•ã€‚</p>
<p>windowså®‰è£…opencodeæœ‰å¾ˆå¤šæ–¹å¼ï¼Œæˆ‘é¦–å…ˆé€‰ç”¨çš„æ˜¯Node.jsï¼ŒNode.jsçš„å®‰è£…è¿˜æ˜¯å¾ˆé¡ºåˆ©çš„ã€‚æ–¹æ³•æ˜¯ç›´æ¥copyè¿‡æ¥çš„ã€‚</p>
<h2 data-id="heading-0">å®‰è£…Node.js</h2>
<ol>
<li>è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fzh-cn" target="_blank" title="https://nodejs.org/zh-cn" ref="nofollow noopener noreferrer">Node.js</a>å®˜ç½‘ï¼›</li>
<li>ç‚¹å‡»ç½‘é¡µå·¦ä¸‹è§’çš„LTSç‰ˆæœ¬ï¼ˆé•¿æœŸæ”¯æŒç‰ˆï¼Œæ¨èï¼‰ï¼›</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01c6146702df4773b83e99ec163a77ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5b6X57uD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770519537&amp;x-signature=jICaW1cZapuQZ2wv%2BTZfuXZrO5I%3D" alt="image.png" loading="lazy"/>
3. ä¸‹è½½å®‰è£…åŒ…ï¼ˆæŒ‰è‡ªå·±éœ€æ±‚ï¼Œæˆ‘é€‰æ‹©çš„ç¬¬ä¸€ä¸ªï¼‰ï¼›</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47fdb7cc245147f68f34c556d4e606f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5b6X57uD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770519537&amp;x-signature=t5Ubzgm%2FlzLxkOKNw%2FQU5UfPY30%3D" alt="image.png" loading="lazy"/></p>
<ol start="4">
<li>ä¸€è·¯â€œNextâ€ï¼ˆä¸‹ä¸€æ­¥ï¼‰ç›´åˆ°å®Œæˆï¼›</li>
<li>å®‰è£…å®Œæˆåï¼Œåœ¨PowerShell(å°½é‡ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ)ä¸­è¾“å…¥ä¸‹é¢å‘½ä»¤éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼›</li>
</ol>
<pre><code class="hljs language-shell" lang="shell">node --version
</code></pre>
<p>å¦‚æœåƒå¦‚ä¸‹å›¾ç‰‡ä¸€æ ·æ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œç¥è´ºä½ ï¼Œå®‰è£…æˆåŠŸã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dee0ef52ca14bc5860fd8f1dc3fed86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5b6X57uD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770519537&amp;x-signature=igPLJafh6ZQ7%2BLhlBGsiGhZQVII%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">å®‰è£…opencode</h2>
<p>å¦‚æœä½ å®‰è£…å¥½äº†Node.jsï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥åœ¨PowerShellä¸­è¿è¡Œã€‚</p>
<pre><code class="hljs">npm install -g opencode-ai
</code></pre>
<p>è¿™é‡Œå¼€å§‹å°±æ˜¯æˆ‘é‡åˆ°çš„ç¬¬ä¸€ä¸ªå‘ï¼Œæ‰§è¡Œå®Œä¸Šé¢æŒ‡ä»¤åä¼šæŠ¥ç±»ä¼¼ä¸‹é¢çš„é”™è¯¯ï¼ˆå›¾ç‰‡åœ¨ç½‘ä¸Šæ‰¾çš„ï¼Œå½“æ—¶å¿˜äº†æˆªå›¾ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3198458bf3134da99c3d5796ecd6a489~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5b6X57uD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770519537&amp;x-signature=LnHMst%2BWl7ntpjMeD9%2FV%2Fa0iqRg%3D" alt="image.png" loading="lazy"/>
åŸå› ä¸»è¦æ˜¯PowerShellçš„å®‰å…¨ç­–ç•¥ï¼Œå°†npmå‘½ä»¤è§†ä¸ºäº†ä¸å®‰å…¨çš„è„šæœ¬ï¼Œä¸å…è®¸æ‰§è¡Œï¼Œä¸è¿‡åªéœ€è¦æ”¾å¼€æƒé™å°±å¯ä»¥ã€‚
è§£å†³åŠæ³•æ˜¯ä»¥ç®¡ç†å‘˜æƒé™è¿è¡ŒPowerShellï¼Œç„¶åè¾“å…¥set-ExecutionPolicy RemoteSigned å›è½¦ã€‚ä¼šå‡ºç°ä¸€ä¸ªé€‰æ‹©æç¤ºï¼ŒæŒ‰è¦æ±‚é€‰æ‹©Yå³å¯ï¼Œæˆ‘å›¾çœäº‹ç›´æ¥é€‰çš„ALLï¼ˆaï¼‰ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">set-ExecutionPolicy RemoteSigned
</code></pre>
<p>è®¾ç½®å®ŒPowerShellçš„ç­–ç•¥åï¼Œå°±å¯ä»¥é‡æ–°è¾“å…¥ä¸Šé¢çš„å®‰è£…æŒ‡ä»¤ï¼Œç­‰å¾…å®‰è£…å®Œæˆå³å¯ã€‚å®‰è£…å®Œæˆåè¾“å…¥ä¸‹é¢æŒ‡ä»¤æŸ¥çœ‹ç‰ˆæœ¬å·ï¼ŒéªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p>
<pre><code class="hljs language-css" lang="css">opencode <span class="hljs-attr">--version</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3937bf0cbc6b430ea035e550b817512f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5b6X57uD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770519537&amp;x-signature=xWXP3zecFqydAu2jV3quXJzeCCo%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">è¿è¡Œopencode</h2>
<p>è‹¥å®‰è£…é¡ºåˆ©å°±å¯ä»¥ç›´æ¥åœ¨PowerShellä¸­è¿è¡Œï¼š</p>
<pre><code class="hljs">opencode
</code></pre>
<p>æ»¡æ€€æ¿€åŠ¨åœ°è¾“å…¥å®ŒæŒ‡ä»¤åï¼Œå±•ç¤ºåœ¨æˆ‘çœ¼å‰çš„å´æ˜¯é»‘å±ã€‚é‡å¯PowerShellå‡ æ¬¡ä¹‹åéƒ½æ˜¯ä¸€æ ·çš„ç»“æœï¼Œèµ·åˆä»¥ä¸ºæ˜¯ç½‘ç»œå»¶è¿Ÿå¯¼è‡´çš„ï¼Œæ‰€ä»¥å¹²è„†æ”¾åœ¨é‚£é‡Œå»ç¡è§‰äº†ï¼Œç»“æœç¬¬äºŒå¤©æ—©ä¸Šè¿˜æ˜¯ä¸€æ ·çš„é»‘å±ï¼Œå°±çŸ¥é“äº‹æƒ…å¹¶ä¸ç®€å•ã€‚</p>
<p>åœ¨ç½‘ä¸Šæœäº†åŠå¤©é»‘å±çš„åŸå› ï¼Œä¹Ÿé—®äº†aiï¼Œä¸è¿‡å¹¶æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„è§£å†³åŠæ³•ã€‚ä¸‹é¢æ˜¯æˆ‘æ›¾å°è¯•çš„æ–¹æ¡ˆï¼š</p>
<ul>
<li>å¸è½½é‡è£…opencodeï¼Œä¸€æ ·</li>
<li>ä½¿ç”¨å…¶ä»–å·¥å…·å®‰è£…ï¼ˆæ¯”å¦‚Chocolateyï¼‰opencodeï¼Œä¸€æ ·</li>
<li>é‡æ–°å®‰è£…ä½ç‰ˆæœ¬çš„opencodeï¼Œä¸€æ ·</li>
<li>å…³é—­é­”æ³•ï¼Œä¹Ÿä¸€æ ·</li>
</ul>
<p>æœ€ååœ¨githubçš„opencodeé¡¹ç›®é‡Œæ‰¾åˆ°äº†é‡åˆ°è·Ÿæˆ‘ç›¸ä¼¼é—®é¢˜çš„ç½‘å‹æé—®ã€‚
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanomalyco%2Fopencode%2Fissues%2F7662" target="_blank" title="https://github.com/anomalyco/opencode/issues/7662" ref="nofollow noopener noreferrer">github.com/anomalyco/oâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8d40ce7db824d46b80837d6f6285336~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5b6X57uD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770519537&amp;x-signature=ZdtbvlSqfcfulKZ28IOiqP8R4r4%3D" alt="image.png" loading="lazy"/>
æœ‰ä½å®˜æ–¹çš„å·¥ç¨‹å¸ˆçƒ­å¿ƒçš„è¯¢é—®äº†ç½‘å‹çš„é—®é¢˜å¹¶ç»™å‡ºäº†æŒ‡å¯¼ï¼Œè®©ç½‘å‹æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤å®šä½ä¸‹åŸå› ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">opencode run hello --print-logs
</code></pre>
<p>æˆ‘ä¹Ÿæœ¬åœ°è¯•äº†ä¸€ä¸‹ï¼Œç»“æœè·Ÿç½‘å‹ä¸€æ ·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4b392a4b7c54c7b82f24372bd78df77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5b6X57uD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770519537&amp;x-signature=vEZ9m8mAJYopGIIhEBRUDf1beXM%3D" alt="image.png" loading="lazy"/>
å®˜æ–¹å·¥ç¨‹å¸ˆçš„å›ç­”å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3e0c44d9db64c608a694a01d8ea0b2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5b6X57uD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770519537&amp;x-signature=%2F%2BiQwCcZuTWip8Udk%2BHd5sed914%3D" alt="image.png" loading="lazy"/>
ä¹Ÿå°±æ˜¯è¯´bunæ·»åŠ ä¾èµ–çš„æ—¶å€™è€—æ—¶äº†ï¼Œä½†è¿™ä½å·¥ç¨‹å¸ˆåç»­æ²¡æœ‰ç»™å‡ºè§£å†³æ–¹æ¡ˆï¼Œä¸è¿‡èµ·ç æœ‰ç‚¹æ–¹å‘äº†ã€‚æ‰€ä»¥å°±å°†è¿™æ®µä¿¡æ¯ç²˜è´´ç»™aiæ¥è§£ç­”ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/543212a0f0f74384b8271b922573cea7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5b6X57uD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770519537&amp;x-signature=3AecRNHzStb7keeiPDoHJ%2FDjhQ8%3D" alt="image.png" loading="lazy"/>
aiåˆ†ææ˜¯ç½‘ç»œé—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨npmçš„é•œåƒï¼Œæ‰€ä»¥æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">npm config set registry https:<span class="hljs-comment">//registry.npmmirror.com</span>
</code></pre>
<p>ç„¶åå†æ‰§è¡Œopencodeï¼Œæœç„¶å°±å¯åŠ¨äº†ã€‚</p>
<h2 data-id="heading-3">ä½¿ç”¨opencode</h2>
<p>å¤§ç‰›blogé‡Œä¸€è¡ŒæŒ‡ä»¤çš„äº‹ï¼Œå´èŠ±äº†è¿™ä¹ˆå¤šæ—¶é—´æ‰è¿è¡Œèµ·æ¥ã€‚å½“æˆ‘ä»¥ä¸ºå°±è¿™æ ·è®©agentå¹²æ´»æ—¶ï¼Œå¯agentå´æ²¡æœ‰ç†æˆ‘ã€‚åœ¨è¾“å…¥æ¡†è¾“å…¥â€œä½ å¥½â€ä¹‹åï¼Œagentä¸€ç›´æ˜¾ç¤ºåŠ è½½ï¼Œå¥½åƒå¡ä½äº†ä¸€æ ·ï¼Œå¼€å…³é­”æ³•éƒ½æ²¡æœ‰ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf3c1bdd1acb48a7a90dd9363e8b3c83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5b6X57uD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770519537&amp;x-signature=wzYkRjXbj%2F9rBn8Od277%2FHTWXuo%3D" alt="image.png" loading="lazy"/>
åªèƒ½åˆæ±‚æ•‘aiçœ‹çœ‹æœ‰ä»€ä¹ˆåŠæ³•ï¼Œaiåˆ†æä¸»è¦è¿˜æ˜¯ç½‘ç»œé—®é¢˜ï¼Œè®©æˆ‘ç¡®è®¤ä»£ç†çš„è®¾ç½®ï¼Œä»¥åŠåœ¨PowerShellä¸­è®¾ç½®ä¸´æ—¶ä»£ç†ï¼ŒæŒ‡ä»¤å¦‚ä¸‹(ç«¯å£å·æ ¹æ®è‡ªå·±æƒ…å†µè®¾ç½®)ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">$env:<span class="hljs-attr">HTTP_PROXY</span>=<span class="hljs-string">"http://127.0.0.1:XXXX"</span>
$env:<span class="hljs-attr">HTTPS_PROXY</span>=<span class="hljs-string">"http://127.0.0.1:XXXX"</span>
</code></pre>
<p>è®¾ç½®å®Œä»£ç†åï¼Œé‡æ–°å¯åŠ¨opencodeï¼Œagentæ€»ç®—èƒ½è¯´è¯äº†ã€‚ä¸è¿‡è¿™æ ·åªæ˜¯ä¸´æ—¶è®¾ç½®äº†ä»£ç†ã€‚å¯ä»¥è‡ªè¡Œæœç´¢å…¨å±€è®¾ç½®çš„æ–¹æ³•ã€‚</p>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>1.é‡åˆ°PowerShellä¸å…è®¸æ‰§è¡Œè„šæœ¬çš„é—®é¢˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤å…è®¸ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">set-ExecutionPolicy RemoteSigned
</code></pre>
<p>2.å¦‚æœæ˜¯é€šè¿‡npmå®‰è£…opencodeåå¯åŠ¨ä¸äº†ï¼Œå¯ä»¥å°è¯•è®¾ç½®npmä»£ç†ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">npm config set registry https:<span class="hljs-comment">//registry.npmmirror.com</span>
</code></pre>
<p>3.é‡åˆ°agentå›ç­”æ…¢æˆ–è€…ä¸€ç›´æ— å“åº”å¯ä»¥å°è¯•è®¾ç½®ä»£ç†ï¼ˆéœ€è¦é­”æ³•ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">$env:<span class="hljs-attr">HTTP_PROXY</span>=<span class="hljs-string">"http://127.0.0.1:XXXX"</span>
$env:<span class="hljs-attr">HTTPS_PROXY</span>=<span class="hljs-string">"http://127.0.0.1:XXXX"</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[AI Coding æ–—è›è›] ç¬¬ä¸€æœŸ: ç‘•ç–µäº§å“æ£€æµ‹]]></title>    <link>https://juejin.cn/post/7601076976440262696</link>    <guid>https://juejin.cn/post/7601076976440262696</guid>    <pubDate>2026-01-31T17:15:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601076976440262696" data-draft-id="7601046076943925263" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[AI Coding æ–—è›è›] ç¬¬ä¸€æœŸ: ç‘•ç–µäº§å“æ£€æµ‹"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Cursor,Claude"/> <meta itemprop="datePublished" content="2026-01-31T17:15:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ArcX"/> <meta itemprop="url" content="https://juejin.cn/user/3632442147890910"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [AI Coding æ–—è›è›] ç¬¬ä¸€æœŸ: ç‘•ç–µäº§å“æ£€æµ‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3632442147890910/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ArcX
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T17:15:14.000Z" title="Sat Jan 31 2026 17:15:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æµ‹è¯•æ—¶é—´</h2>
<p>2026å¹´1æœˆ30æ—¥</p>
<h2 data-id="heading-1">Prompt</h2>
<p>è®¾è®¡å¹¶å¼€å‘ä¸€ä¸ªåŸºäº OpenAI API çš„äº§å“ç‘•ç–µæ£€æµ‹ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿåº”å…è®¸ç”¨æˆ·ä¸Šä¼ äº§å“å›¾ç‰‡ï¼Œé€šè¿‡è°ƒç”¨ OpenAI API åˆ†æå›¾ç‰‡å†…å®¹ï¼Œè¯†åˆ«å¹¶ä»¥æ–‡å­—è¾“å‡ºå›¾ç‰‡ä¸Šå­˜åœ¨çš„ç‘•ç–µã€‚å…·ä½“åŠŸèƒ½éœ€æ±‚åŒ…æ‹¬ï¼šå®ç°å›¾ç‰‡ä¸Šä¼ ç•Œé¢ï¼Œæ”¯æŒå¸¸è§å›¾ç‰‡æ ¼å¼ï¼ˆJPGã€PNGç­‰ï¼‰ï¼›é›†æˆ OpenAI API è¿›è¡Œå›¾åƒåˆ†æï¼Œè¦æ±‚èƒ½å¤Ÿå‡†ç¡®è¯†åˆ«è‡³å°‘5ç§å¸¸è§äº§å“ç‘•ç–µç±»å‹ï¼ˆå¦‚åˆ’ç—•ã€å‡¹é™·ã€è‰²å·®ã€æ±¡æ¸ã€å˜å½¢ç­‰ï¼‰ï¼›æä¾›æ¸…æ™°çš„æ£€æµ‹ç»“æœå±•ç¤ºï¼ŒåŒ…æ‹¬ç‘•ç–µä½ç½®æ ‡è®°ã€ç‘•ç–µç±»å‹åˆ†ç±»åŠç½®ä¿¡åº¦è¯„åˆ†ï¼›ç³»ç»Ÿéœ€å…·å¤‡é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œèƒ½å¤Ÿå¤„ç†å›¾ç‰‡ä¸Šä¼ å¤±è´¥ã€APIè°ƒç”¨è¶…æ—¶ç­‰å¼‚å¸¸æƒ…å†µï¼›ç•Œé¢è®¾è®¡åº”ç®€æ´ç›´è§‚ï¼Œå“åº”å¼å¸ƒå±€é€‚é…ä¸åŒè®¾å¤‡. æœ‰ä»€ä¹ˆéœ€è¦æˆ‘åšæŠ‰æ‹©çš„å¯ä»¥éšæ—¶é—®æˆ‘</p>
<h2 data-id="heading-2">ç®€å•åˆ†æ</h2>
<p>è¿™ä¸ªä»»åŠ¡å”¯ä¸€çš„éš¾ç‚¹åœ¨äºå¦‚ä½•è°ƒç”¨ OpenAI API, ä»¥åŠç”Ÿæˆçš„ prompt, åˆ«çš„éƒ½æ˜¯éå¸¸å¸¸è§„çš„ä¸šåŠ¡é€»è¾‘, æ‰€ä»¥æˆ‘ä»¬é‡ç‚¹ä¼šå…³æ³¨ AI ç”Ÿæˆçš„ prompt çš„è´¨é‡. ç”±äºæ˜¯è°ƒç”¨ OpenAI API æ¥æ£€æµ‹ç‘•ç–µ, æœ€ç»ˆçš„æ•ˆæœç”± OpenAI å†³å®š, æ‰€ä»¥è¯„åˆ†æ—¶<strong>ä¸ä¼šå…³å¿ƒç‘•ç–µæ£€æµ‹çš„å‡†ç¡®æ€§</strong>. æ‰€ä»¥æ€»çš„æ¥è¯´ä¼šå…³æ³¨ä»¥ä¸‹å‡ éƒ¨åˆ†:</p>
<ol>
<li>prompt çš„è´¨é‡ (50%)</li>
<li>UI çš„ç¾è§‚ç¨‹åº¦å’ŒåŠŸèƒ½ (40%)</li>
<li>å¼€å‘çš„æµç•…ç¨‹åº¦ (10%)</li>
</ol>
<h2 data-id="heading-3">1. Claude Opus 4.5 (In Cursor)</h2>
<h3 data-id="heading-4">prompt</h3>
<pre><code class="hljs language-javascript" lang="javascript">ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„äº§å“è´¨é‡æ£€æµ‹<span class="hljs-variable constant_">AI</span>åŠ©æ‰‹ã€‚ä½ çš„ä»»åŠ¡æ˜¯åˆ†æäº§å“å›¾ç‰‡ï¼Œè¯†åˆ«å…¶ä¸­å¯èƒ½å­˜åœ¨çš„ç‘•ç–µå’Œè´¨é‡é—®é¢˜ã€‚

ä½ éœ€è¦æ£€æµ‹ä»¥ä¸‹ç±»å‹çš„ç‘•ç–µï¼š
åˆ’ç—• (<span class="hljs-title class_">Scratch</span>) - è¡¨é¢çš„çº¿æ€§æŸä¼¤æˆ–åˆ®ç—•
å‡¹é™· (<span class="hljs-title class_">Dent</span>) - è¡¨é¢çš„å‡¹é™·æˆ–å‹ç—•
è‰²å·® (<span class="hljs-title class_">Color</span> <span class="hljs-title class_">Deviation</span>) - é¢œè‰²ä¸å‡åŒ€ã€æ–‘ç‚¹æˆ–ä¸é¢„æœŸé¢œè‰²ä¸ç¬¦
æ±¡æ¸ (<span class="hljs-title class_">Stain</span>) - è¡¨é¢çš„æ±¡ç‚¹ã€æ°´æ¸æˆ–å…¶ä»–æ±¡æŸ“
å˜å½¢ (<span class="hljs-title class_">Deformation</span>) - å½¢çŠ¶æ‰­æ›²ã€å¼¯æ›²æˆ–ä¸è§„åˆ™
è£‚çº¹ (<span class="hljs-title class_">Crack</span>) - è¡¨é¢æˆ–ç»“æ„çš„è£‚ç¼
æ°”æ³¡ (<span class="hljs-title class_">Bubble</span>) - ææ–™å†…éƒ¨æˆ–è¡¨é¢çš„æ°”æ³¡
æ¯›åˆº (<span class="hljs-title class_">Burr</span>) - è¾¹ç¼˜ç²—ç³™æˆ–æ¯›è¾¹

è¯·ä»¥<span class="hljs-title class_">JSON</span>æ ¼å¼è¿”å›åˆ†æç»“æœï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
{
  <span class="hljs-string">"overallQuality"</span>: <span class="hljs-string">"ä¼˜ç§€/è‰¯å¥½/ä¸€èˆ¬/è¾ƒå·®"</span>,
  <span class="hljs-string">"qualityScore"</span>: <span class="hljs-number">0</span>-<span class="hljs-number">100</span>çš„æ•°å­—,
  <span class="hljs-string">"defects"</span>: [
    {
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"ç‘•ç–µç±»å‹ï¼ˆä¸­æ–‡ï¼‰"</span>,
      <span class="hljs-string">"typeEn"</span>: <span class="hljs-string">"ç‘•ç–µç±»å‹ï¼ˆè‹±æ–‡ï¼‰"</span>,
      <span class="hljs-string">"location"</span>: <span class="hljs-string">"ç‘•ç–µåœ¨å›¾ç‰‡ä¸­çš„ä½ç½®æè¿°"</span>,
      <span class="hljs-string">"severity"</span>: <span class="hljs-string">"ä¸¥é‡ç¨‹åº¦ï¼šè½»å¾®/ä¸­ç­‰/ä¸¥é‡"</span>,
      <span class="hljs-string">"confidence"</span>: <span class="hljs-number">0</span>-<span class="hljs-number">100</span>çš„ç½®ä¿¡åº¦æ•°å­—,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"è¯¦ç»†æè¿°"</span>
    }
  ],
  <span class="hljs-string">"summary"</span>: <span class="hljs-string">"æ•´ä½“æ£€æµ‹æ€»ç»“ï¼Œç®€æ´æè¿°äº§å“çŠ¶å†µ"</span>,
  <span class="hljs-string">"recommendations"</span>: [<span class="hljs-string">"æ”¹è¿›å»ºè®®1"</span>, <span class="hljs-string">"æ”¹è¿›å»ºè®®2"</span>]
}

æ³¨æ„äº‹é¡¹ï¼š
å¦‚æœå›¾ç‰‡ä¸æ˜¯äº§å“å›¾ç‰‡æˆ–æ— æ³•è¯†åˆ«ï¼Œè¯·åœ¨summaryä¸­è¯´æ˜
å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°ç‘•ç–µï¼Œdefectsæ•°ç»„ä¸ºç©ºï¼ŒqualityScoreåº”è¯¥è¾ƒé«˜
ç½®ä¿¡åº¦è¡¨ç¤ºä½ å¯¹è¯¥ç‘•ç–µåˆ¤æ–­çš„ç¡®å®šç¨‹åº¦
ä½ç½®æè¿°è¦å…·ä½“ï¼Œå¦‚<span class="hljs-string">"å·¦ä¸Šè§’"</span>ã€<span class="hljs-string">"ä¸­å¿ƒåå³"</span>ã€<span class="hljs-string">"åº•éƒ¨è¾¹ç¼˜"</span>ç­‰
è¯·åªè¿”å›<span class="hljs-title class_">JSON</span>ï¼Œä¸è¦åŒ…å«å…¶ä»–æ–‡å­—
</code></pre>
<p>æ€»ä½“æ¥è¯´ prompt è´¨é‡è¿˜ä¸é”™, å”¯ä¸€çš„ç¼ºç‚¹åœ¨äº, æˆ‘ä»¬çš„éœ€æ±‚ prompt é‡Œæ˜ç¡®è¯´äº† UI ä¸Šéœ€è¦å±•ç¤ºç‘•ç–µçš„ä½ç½®, ä½†æ˜¯ Claude ç”Ÿæˆçš„ prompt é‡Œæ²¡æœ‰åŒ…å«è¿™ä¸ªè¦æ±‚, æ‰€ä»¥åœ¨ç”Ÿæˆä»£ç çš„æ—¶å€™, Claude ç”Ÿæˆçš„ UI ä¸Šæ²¡æœ‰å±•ç¤ºç‘•ç–µçš„ä½ç½®, è¿™æ˜¯ä¸€ä¸ªæ‰£åˆ†é¡¹.</p>
<p><strong>Prompt å¾—åˆ†: 7.</strong></p>
<h3 data-id="heading-5">UI</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b043439f0d74c51b224b5eaaaddafdc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXJjWA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770518395&amp;x-signature=HifSPNEZkDHMcekk%2F04Kl%2FXBVFo%3D" alt="Claude Opus 4.5 (In Cursor)" loading="lazy"/></p>
<p>UI ç°ä»£ä¸”ç®€æ´, é…è‰²èˆ’é€‚, ç”¨äº†ç¯å½¢å›¾å±•ç¤ºè¯„åˆ†, åˆ—å‡ºäº†æ£€æµ‹æ‘˜è¦, è¿˜æœ‰æ”¹è¿›å»ºè®®, å”¯ä¸€çš„ç¼ºç‚¹è¿˜æ˜¯ä¸Šé¢æåˆ°çš„æ²¡æœ‰å±•ç¤ºç‘•ç–µçš„ä½ç½®.</p>
<p><strong>UI å¾—åˆ†: 7.</strong></p>
<h3 data-id="heading-6">å¼€å‘ä½“éªŒ</h3>
<p>Claude çš„å¼€å‘ä½“éªŒå¾ˆå°‘è®©äººå¤±æœ›è¿‡, å¯¹äºè¿™ç§ç®€å•çš„ä»»åŠ¡ä¸€æ¬¡è¿‡æ˜¯åŸºæœ¬æ“ä½œ, ç›´æ¥æ»¡åˆ†.</p>
<p><strong>å¼€å‘ä½“éªŒå¾—åˆ†: 10.</strong></p>
<h3 data-id="heading-7">ç»¼åˆè¯„åˆ†</h3>
<p><strong>Claude Opus 4.5 (In Cursor): 7.3</strong></p>
<h2 data-id="heading-8">2. Claude Opus 4.5 (In Claude Code)</h2>
<h3 data-id="heading-9">Prompt</h3>
<pre><code class="hljs language-scss" lang="scss">ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„äº§å“è´¨é‡æ£€æµ‹ä¸“å®¶ã€‚è¯·ä»”ç»†åˆ†æè¿™å¼ äº§å“å›¾ç‰‡ï¼Œè¯†åˆ«ä»¥ä¸‹ç±»å‹çš„ç‘•ç–µï¼š
åˆ’ç—• (Scratch) - è¡¨é¢çº¿æ€§æŸä¼¤
å‡¹é™· (Dent) - è¡¨é¢å‡¹é™·å˜å½¢
è‰²å·® (Color Deviation) - é¢œè‰²ä¸å‡åŒ€æˆ–å¼‚å¸¸
æ±¡æ¸ (Stain) - è¡¨é¢æ±¡æŸ“ç‰©
å˜å½¢ (Deformation) - å½¢çŠ¶å¼‚å¸¸
è£‚çº¹ (Crack) - è¡¨é¢è£‚ç¼
æ°”æ³¡ (Bubble) - è¡¨é¢æ°”æ³¡ç¼ºé™·

è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¿”å›æ£€æµ‹ç»“æœï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—ï¼š
{
  "hasDefects": boolean,
  <span class="hljs-string">"defects"</span>: [
    {
      "type": <span class="hljs-string">"ç‘•ç–µç±»å‹ä¸­æ–‡å"</span>,
      <span class="hljs-string">"typeEn"</span>: <span class="hljs-string">"DefectTypeInEnglish"</span>,
      <span class="hljs-string">"location"</span>: <span class="hljs-string">"ç‘•ç–µåœ¨å›¾ç‰‡ä¸­çš„ä½ç½®æè¿°ï¼Œå¦‚ï¼šå·¦ä¸Šè§’ã€ä¸­éƒ¨åå³ã€åº•éƒ¨è¾¹ç¼˜ç­‰"</span>,
      <span class="hljs-string">"severity"</span>: <span class="hljs-string">"lowæˆ–mediumæˆ–high"</span>,
      <span class="hljs-string">"confidence"</span>: <span class="hljs-number">0.0</span>åˆ°<span class="hljs-number">1.0</span>ä¹‹é—´çš„æ•°å­—,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"è¯¦ç»†æè¿°è¯¥ç‘•ç–µçš„ç‰¹å¾"</span>
    }
  ],
  "overallQuality": <span class="hljs-string">"goodæˆ–acceptableæˆ–poor"</span>,
  <span class="hljs-string">"summary"</span>: <span class="hljs-string">"å¯¹äº§å“æ•´ä½“è´¨é‡çš„æ€»ç»“è¯„ä¼°"</span>
}

æ³¨æ„ï¼š
å¦‚æœæ²¡æœ‰å‘ç°ç‘•ç–µï¼ŒhasDefectsè®¾ä¸ºfalseï¼Œdefectsä¸ºç©ºæ•°ç»„
confidenceè¡¨ç¤ºä½ å¯¹è¯¥ç‘•ç–µåˆ¤æ–­çš„ç½®ä¿¡åº¦
severityæ ¹æ®ç‘•ç–µå¯¹äº§å“è´¨é‡çš„å½±å“ç¨‹åº¦åˆ¤æ–­
è¯·ä»”ç»†è§‚å¯Ÿå›¾ç‰‡çš„æ¯ä¸ªåŒºåŸŸ
</code></pre>
<p>å’Œ Cursor é‡Œçš„ç»“æœå·®ä¸å¤š, æ‰€ä»¥è¯„åˆ†ä¹Ÿä¿æŒä¸€è‡´.</p>
<p><strong>Prompt å¾—åˆ†: 7.</strong></p>
<h3 data-id="heading-10">UI</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef548058bd3d49cb85cdb19213268be8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXJjWA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770518395&amp;x-signature=JrW2LrieXgo1AtqaXfvkklF0er4%3D" alt="Claude Opus 4.5 (In Claude Code)" loading="lazy"/></p>
<p>è¿™æ¬¡ Claude ç”Ÿæˆçš„ UI å°±æ˜æ˜¾ä¸å¦‚ Cursor ç‰ˆçš„. åœ¨ç‚¹å‡»åˆ†æåä¸ä»…æ²¡æœ‰å±•ç¤ºä¸Šä¼ çš„å›¾ç‰‡, è€Œä¸”æ•´ä½“è®¾è®¡ä¹Ÿæ¯”è¾ƒèŠ±é‡Œèƒ¡å“¨, èƒŒæ™¯è‰²å¤ªæ‚, è¿˜æœ‰ AI ç‰¹æœ‰çš„å–œæ¬¢ç”¨ emoji.</p>
<p><strong>UI å¾—åˆ†: 5.</strong></p>
<h3 data-id="heading-11">å¼€å‘ä½“éªŒ</h3>
<p>Claude Code ä¸ç”¨å¤šè¯´, ä¸€æ¬¡è¿‡.</p>
<p><strong>å¼€å‘ä½“éªŒå¾—åˆ†: 10.</strong></p>
<h3 data-id="heading-12">ç»¼åˆè¯„åˆ†</h3>
<p><strong>Claude Opus 4.5 (In Claude Code): 6.5</strong></p>
<h2 data-id="heading-13">3. GPT-5.2-codex</h2>
<h3 data-id="heading-14">Prompt</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-string">"ä½ æ˜¯äº§å“ç‘•ç–µæ£€æµ‹åŠ©æ‰‹ï¼Œè¯·åªè¾“å‡ºä¸¥æ ¼ JSONã€‚"</span><span class="hljs-punctuation">,</span>
<span class="hljs-string">"éœ€è¦è¯†åˆ«è‡³å°‘ä»¥ä¸‹5ç§ç‘•ç–µç±»å‹ï¼šåˆ’ç—•ã€å‡¹é™·ã€è‰²å·®ã€æ±¡æ¸ã€å˜å½¢ã€‚"</span><span class="hljs-punctuation">,</span>
<span class="hljs-string">"è¾“å‡ºç»“æ„å¦‚ä¸‹ï¼š"</span><span class="hljs-punctuation">,</span>
<span class="hljs-string">"{"</span><span class="hljs-punctuation">,</span>
'  <span class="hljs-attr">"summary"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸€å¥è¯æ€»ç»“"</span><span class="hljs-punctuation">,</span>'<span class="hljs-punctuation">,</span>
'  <span class="hljs-attr">"defects"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>'<span class="hljs-punctuation">,</span>
<span class="hljs-string">"    {"</span><span class="hljs-punctuation">,</span>
'      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆ’ç—•|å‡¹é™·|è‰²å·®|æ±¡æ¸|å˜å½¢"</span><span class="hljs-punctuation">,</span>'<span class="hljs-punctuation">,</span>
'      <span class="hljs-attr">"confidence"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.0</span><span class="hljs-number">-1.0</span><span class="hljs-punctuation">,</span>'<span class="hljs-punctuation">,</span>
'      <span class="hljs-attr">"bbox"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"x"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-number">-1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"y"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-number">-1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"width"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-number">-1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"height"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-number">-1</span> <span class="hljs-punctuation">}</span>'<span class="hljs-punctuation">,</span>
<span class="hljs-string">"    }"</span><span class="hljs-punctuation">,</span>
<span class="hljs-string">"  ]"</span><span class="hljs-punctuation">,</span>
<span class="hljs-string">"}"</span><span class="hljs-punctuation">,</span>
<span class="hljs-string">"å¦‚æœæ²¡æœ‰ç‘•ç–µï¼Œdefects ä¸ºç©ºæ•°ç»„ï¼Œå¹¶è¯´æ˜ summaryã€‚"</span><span class="hljs-punctuation">,</span>
<span class="hljs-string">"bbox ä¸ºå½’ä¸€åŒ–åæ ‡ï¼ŒåŸºäºå›¾åƒå®½é«˜æ¯”ä¾‹ï¼Œç²—ç•¥æ¡†å‡ºç‘•ç–µä½ç½®ã€‚"</span>
</code></pre>
<p>è¿™ä¸ª prompt ç›¸æ¯” Claude æ¥è¯´æ˜æ˜¾æ‹‰äº†ä¸€å¤§æˆª. è™½è¯´ context ä¸å®œè¿‡é•¿, ä½†æ˜¯è¿™ä¹Ÿå¤ªç®€æ´äº†.</p>
<p><strong>Prompt å¾—åˆ†: 4</strong></p>
<h3 data-id="heading-15">UI</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08fc9f3dc10a436cbf81893576a64524~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXJjWA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770518395&amp;x-signature=gF%2BZOySr8s%2Fg5lCtn7bIO5Xhobk%3D" alt="GPT-5.2-codex" loading="lazy"/></p>
<p>Prompt ç®€é™‹, UI ä¹Ÿç®€é™‹, æ£€æµ‹ç»“æœå°±åªç®€å•å†™å‡ºäº†ä¸¤ä¸ªå­—. ä¸è¿‡åœ¨ç»“æœå›¾ç‰‡é‡Œæ ‡æ³¨äº†ç‘•ç–µä½ç½®(å¼€å¤´æåˆ°è¿‡, ä¸å…³å¿ƒç»“æœå‡†ç¡®åº¦, å› ä¸ºè¿™ä¸ Coding Agent ä¸»è¦å†³å®šçš„).</p>
<p><strong>UI å¾—åˆ†: 5</strong></p>
<h3 data-id="heading-16">å¼€å‘ä½“éªŒ</h3>
<p>è¯´å®è¯ GPT è¿™å—çœŸçš„æŒºè®©æˆ‘éœ‡æƒŠ, å› ä¸ºå®ƒæ˜¯å”¯ä¸€ä¸€ä¸ªè°ƒç”¨ OpenAI API æŠ¥é”™çš„ AI, è‡ªå·±è°ƒç”¨è‡ªå·±çš„ API éƒ½èƒ½å› ä¸ºä¼ äº†ä¸å­˜åœ¨çš„å‚æ•°è€ŒæŠ¥é”™ä¹Ÿæ˜¯æŒºç¦»è°±çš„, è¿˜æŠ¥é”™äº† 3 è½®.</p>
<p><strong>å¼€å‘ä½“éªŒå¾—åˆ†: 5</strong></p>
<h3 data-id="heading-17">ç»¼åˆè¯„åˆ†</h3>
<p><strong>GPT-5.2-codex: 4.5</strong></p>
<h2 data-id="heading-18">4. Gemini 3 Pro</h2>
<h3 data-id="heading-19">Prompt</h3>
<pre><code class="hljs language-vbnet" lang="vbnet">You are an expert Quality Assurance Inspector <span class="hljs-keyword">for</span> product manufacturing.
Your task <span class="hljs-built_in">is</span> <span class="hljs-keyword">to</span> analyze product images <span class="hljs-built_in">and</span> identify potential defects.
Focus <span class="hljs-keyword">on</span> these specific defect types:
Scratches (åˆ’ç—•)
Dents (å‡¹é™·)
Discoloration (è‰²å·®)
Stains (æ±¡æ¸)
Deformation (å˜å½¢)

<span class="hljs-keyword">For</span> <span class="hljs-keyword">each</span> defect found, provide:
<span class="hljs-symbol">type:</span> One <span class="hljs-keyword">of</span> the <span class="hljs-number">5</span> types listed above.
<span class="hljs-symbol">confidence:</span> A score between <span class="hljs-number">0</span> <span class="hljs-built_in">and</span> <span class="hljs-number">1</span> indicating your certainty.
<span class="hljs-symbol">description:</span> A brief description <span class="hljs-keyword">of</span> the defect.
<span class="hljs-symbol">location:</span> Approximate center coordinates <span class="hljs-keyword">of</span> the defect <span class="hljs-keyword">as</span> [x, y] percentages (<span class="hljs-number">0</span>-<span class="hljs-number">100</span>) relative <span class="hljs-keyword">to</span> the image width <span class="hljs-built_in">and</span> height. Top-left <span class="hljs-built_in">is</span> [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].

<span class="hljs-keyword">Return</span> the result <span class="hljs-keyword">as</span> a JSON <span class="hljs-type">object</span> <span class="hljs-keyword">with</span> a <span class="hljs-string">"defects"</span> array.
Example format:
{
  <span class="hljs-string">"defects"</span>: [
    {
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"Scratches"</span>,
      <span class="hljs-string">"confidence"</span>: <span class="hljs-number">0.95</span>,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"Visible scratch on the top surface"</span>,
      <span class="hljs-string">"location"</span>: [<span class="hljs-number">50</span>, <span class="hljs-number">25</span>]
    }
  ]
}

<span class="hljs-keyword">If</span> no defects are found, <span class="hljs-keyword">return</span> {<span class="hljs-string">"defects"</span>: []}.
</code></pre>
<p>Prompt å’Œ Claude æ¯”è¾ƒç±»ä¼¼, å¹¶ä¸”è¯´æ˜äº† location éœ€è¦æ˜¯ä¸€ä¸ªåæ ‡, åŠ åˆ†.</p>
<p><strong>Prompt å¾—åˆ†: 8</strong></p>
<h3 data-id="heading-20">UI</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83d4a189af8349daa1d936af03993a0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXJjWA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770518395&amp;x-signature=%2BZuaiCsbhI8JWpkYrmxYKatE2jM%3D" alt="Gemini 3 Pro" loading="lazy"/></p>
<p>å·ç§°"å‰ç«¯ä¸¥çˆ¶"çš„ Gemini åšçš„ UI ä¹Ÿä¸æ€ä¹ˆæ ·, è¿‡äºç®€é™‹, ä¸è¿‡å¥½åœ¨æ ‡æ³¨äº†ç‘•ç–µçš„ä½ç½®, å¹¶ä¸”ä½ç½®æ˜¯æœ€å‡†çš„ä¸€ä¸ª(å°½ç®¡è¿™æ›´å¤šæ˜¯ Openai çš„åŠŸåŠ³).</p>
<p><strong>UI å¾—åˆ†: 6</strong></p>
<h3 data-id="heading-21">å¼€å‘ä½“éªŒ</h3>
<p>ä¸€æ¬¡è¿‡.</p>
<p><strong>å¼€å‘ä½“éªŒå¾—åˆ†: 10</strong></p>
<h3 data-id="heading-22">ç»¼åˆè¯„åˆ†</h3>
<p><strong>Gemini 3 Pro: 7.4</strong></p>
<h2 data-id="heading-23">5. Composer-1</h2>
<h3 data-id="heading-24">Prompt</h3>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-type">You</span> are a quality control expert analyzing product images <span class="hljs-keyword">for</span> defects.
<span class="hljs-type">Analyze</span> the image and identify any defects from these categories:
- scratch: <span class="hljs-type">Surface</span> scratches or marks
- dent: <span class="hljs-type">Dents</span> or depressions
- color_difference: <span class="hljs-type">Color</span> inconsistencies or variations
- stain: <span class="hljs-type">Stains</span>, spots, or discolorations
- deformation: <span class="hljs-type">Shape</span> deformations or warping
- crack: <span class="hljs-type">Cracks</span> or fractures
- discoloration: <span class="hljs-type">Unusual</span> color changes
- surface_imperfection: <span class="hljs-type">Other</span> surface imperfections

<span class="hljs-type">For</span> each defect found, provide:
<span class="hljs-number">1.</span> <span class="hljs-type">Type</span> (from the categories above)
<span class="hljs-number">2.</span> <span class="hljs-type">Location</span> description (e.g., <span class="hljs-string">"top-left corner"</span>, <span class="hljs-string">"center area"</span>, <span class="hljs-string">"edge"</span>)
<span class="hljs-number">3.</span> <span class="hljs-type">Confidence</span> score (<span class="hljs-number">0</span><span class="hljs-number">-100</span>)
<span class="hljs-number">4.</span> <span class="hljs-type">Description</span> of the defect

<span class="hljs-type">Return</span> your response as a <span class="hljs-type">JSON</span> <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-keyword">with</span> <span class="hljs-title">this</span> <span class="hljs-title">structure</span></span>:
{
<span class="hljs-string">"defects"</span>: [
  {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"scratch"</span>,
    <span class="hljs-string">"location"</span>: <span class="hljs-string">"top-left corner"</span>,
    <span class="hljs-string">"confidence"</span>: <span class="hljs-number">85</span>,
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"Visible scratch approximately 2cm long"</span>
  }
],
<span class="hljs-string">"summary"</span>: <span class="hljs-string">"Overall quality assessment"</span>,
<span class="hljs-string">"overallQuality"</span>: <span class="hljs-string">"good|fair|poor"</span>
}

<span class="hljs-type">If</span> no defects are found, <span class="hljs-keyword">return</span> an empty defects array <span class="hljs-keyword">with</span> overallQuality <span class="hljs-string">"good"</span>.
</code></pre>
<p>å’Œ Claude éå¸¸åƒ, åŒæ ·å¾ˆè¯¦ç»†æ¸…æ¥š, åŒæ ·ç¼ºå°‘äº†å¯¹å…·ä½“ä½ç½®çš„è¦æ±‚, åªè¦æ±‚äº†æ¨¡ç³Šä½ç½®.</p>
<p><strong>Prompt å¾—åˆ†: 7</strong></p>
<h3 data-id="heading-25">UI</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/155a36f005ce47279e8e04b69cf6a7b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXJjWA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770518395&amp;x-signature=s0tdCSdWz9T42cVxv5Ltbxrag0M%3D" alt="Composer-1" loading="lazy"/></p>
<p>UI ç›¸æ¯” Claude å°±å·®äº†å¾ˆå¤š.</p>
<ul>
<li><code>Analyze Another Image</code> æŒ‰é’®é¢œè‰²æœ‰ç‚¹çªå…€</li>
<li>æ²¡æœ‰åœ¨å›¾é‡Œç”»å‡ºä½ç½®</li>
<li>æ£€æµ‹ç»“æœé‡Œçš„ <code>90% confidence</code> å’Œ <code>Stain</code> æ„Ÿè§‰åº”è¯¥äº’æ¢é¢œè‰²</li>
<li>å…·ä½“ç‘•ç–µçš„æ–‡å­—é¢œè‰²æ¯”è¾ƒæµ…, ä¸é†’ç›®</li>
</ul>
<p><strong>UI å¾—åˆ†: 5</strong></p>
<h3 data-id="heading-26">å¼€å‘ä½“éªŒ</h3>
<p>ä¸€æ¬¡è¿‡.</p>
<p><strong>å¼€å‘ä½“éªŒå¾—åˆ†: 10</strong></p>
<h3 data-id="heading-27">ç»¼åˆè¯„åˆ†</h3>
<p><strong>Composer-1: 6.5</strong></p>
<h2 data-id="heading-28">6. Kimi-K2.5</h2>
<h3 data-id="heading-29">Prompt</h3>
<pre><code class="hljs language-javascript" lang="javascript">ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„äº§å“è´¨é‡æ£€æµ‹ä¸“å®¶ã€‚è¯·ä»”ç»†åˆ†æäº§å“å›¾ç‰‡ï¼Œè¯†åˆ«ä»¥ä¸‹<span class="hljs-number">5</span>ç§å¸¸è§ç‘•ç–µç±»å‹ï¼š
åˆ’ç—• (scratch) - äº§å“è¡¨é¢çš„çº¿æ€§æŸä¼¤
å‡¹é™· (dent) - äº§å“è¡¨é¢çš„å±€éƒ¨ä¸‹é™·
è‰²å·® (color_difference) - é¢œè‰²ä¸å‡åŒ€æˆ–ä¸æ ‡å‡†ä¸ç¬¦
æ±¡æ¸ (stain) - è¡¨é¢çš„æ±¡æŸ“æˆ–æ–‘ç‚¹
å˜å½¢ (deformation) - äº§å“å½¢çŠ¶å¼‚å¸¸æˆ–æ‰­æ›²

è¯·ä»¥ <span class="hljs-title class_">JSON</span> æ ¼å¼è¿”å›åˆ†æç»“æœï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
{
  <span class="hljs-string">"defects"</span>: [
    {
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"ç‘•ç–µç±»å‹è‹±æ–‡"</span>,
      <span class="hljs-string">"name"</span>: <span class="hljs-string">"ç‘•ç–µä¸­æ–‡åç§°"</span>,
      <span class="hljs-string">"location"</span>: <span class="hljs-string">"ç‘•ç–µä½ç½®æè¿°"</span>,
      <span class="hljs-string">"confidence"</span>: <span class="hljs-number">0.0</span>-<span class="hljs-number">1.0</span>,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"è¯¦ç»†æè¿°"</span>,
      <span class="hljs-string">"severity"</span>: <span class="hljs-string">"è½»å¾®/ä¸­ç­‰/ä¸¥é‡"</span>
    }
  ],
  <span class="hljs-string">"summary"</span>: <span class="hljs-string">"æ€»ä½“è¯„ä¼°æ‘˜è¦"</span>,
  <span class="hljs-string">"totalDefects"</span>: <span class="hljs-number">0</span>
}

æ³¨æ„ï¼š
åªè¿”å› <span class="hljs-title class_">JSON</span> æ•°æ®ï¼Œä¸è¦å…¶ä»–æ–‡å­—è¯´æ˜
å¦‚æœæ²¡æœ‰å‘ç°ç‘•ç–µï¼Œdefects ä¸ºç©ºæ•°ç»„
confidence ä¸º <span class="hljs-number">0</span>-<span class="hljs-number">1</span> ä¹‹é—´çš„æµ®ç‚¹æ•°
severity åªèƒ½æ˜¯ <span class="hljs-string">"è½»å¾®"</span>ã€<span class="hljs-string">"ä¸­ç­‰"</span> æˆ– <span class="hljs-string">"ä¸¥é‡"</span><span class="hljs-string">`
</span></code></pre>
<p>åŒæ ·çš„, æ²¡æœ‰å†™æ˜ location éœ€è¦å…·ä½“åæ ‡.</p>
<p><strong>Prompt å¾—åˆ†: 7</strong></p>
<h3 data-id="heading-30">UI</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a6b2a12d87d4fba8daa29057010072d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXJjWA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770518395&amp;x-signature=mHamEkhACdZakwTUAkYX93jfPyo%3D" alt="Kimi-K2.5" loading="lazy"/></p>
<p>Kimi ç”Ÿæˆçš„ UI æ˜¯ AI å‘³æœ€æµ“çš„: ç»å…¸è“ç´«è‰²æ¸å˜, ç»å…¸ emoji, ç»å…¸é»„è‰²èƒŒæ™¯æ–‡å­—æ¡†.</p>
<p><strong>UI å¾—åˆ†: 6</strong></p>
<h3 data-id="heading-31">å¼€å‘ä½“éªŒ</h3>
<p>Kimi åœ¨å†™ä»£ç çš„æ—¶å€™æ²¡æœ‰å‡ºä»€ä¹ˆä¹±å­, ä½†æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™æŠ¥äº†ä¾èµ–æ‰¾ä¸åˆ°çš„é”™è¯¯, åº”è¯¥æ˜¯æ‰§è¡Œå®‰è£…ä¾èµ–çš„å‘½ä»¤æ—¶å‡ºäº†ä»€ä¹ˆé”™.</p>
<p><strong>å¼€å‘ä½“éªŒå¾—åˆ†: 6</strong></p>
<h3 data-id="heading-32">ç»¼åˆè¯„åˆ†:</h3>
<p><strong>Kimi-K2.5: 6.5</strong></p>
<h2 data-id="heading-33">7. Qwen-3-coder</h2>
<p>æœ¬æ¬¡æŒ‘æˆ˜æœ€å¤§çš„å°ä¸‘ç™»åœº.</p>
<h3 data-id="heading-34">Prompt</h3>
<pre><code class="hljs language-scss" lang="scss">è¯·åˆ†æè¿™å¼ äº§å“å›¾ç‰‡ï¼Œè¯†åˆ«ä»¥ä¸‹<span class="hljs-number">5</span>ç§ç±»å‹çš„ç‘•ç–µï¼šåˆ’ç—•ã€å‡¹é™·ã€è‰²å·®ã€æ±¡æ¸ã€å˜å½¢ã€‚å¯¹äºæ¯ä¸ªå‘ç°çš„ç‘•ç–µï¼Œè¯·æä¾›ï¼š<span class="hljs-number">1</span>)ç‘•ç–µç±»å‹ <span class="hljs-number">2</span>)åœ¨å›¾ç‰‡ä¸­çš„ä½ç½®æè¿° <span class="hljs-number">3</span>)ç½®ä¿¡åº¦è¯„åˆ†(<span class="hljs-number">0</span>-<span class="hljs-number">100%</span>)ã€‚å¦‚æœæœªå‘ç°æ˜æ˜¾ç‘•ç–µï¼Œè¯·å›å¤'æœªå‘ç°æ˜æ˜¾ç‘•ç–µ'ã€‚ä»¥JSONæ ¼å¼è¿”å›ç»“æœï¼ŒåŒ…å«å­—æ®µï¼š<span class="hljs-built_in">defects</span>(æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«typeã€locationã€confidence)ã€‚
</code></pre>
<ul>
<li>Prompt æ²¡æœ‰æ¢è¡Œ</li>
<li>æ²¡æœ‰æä¾› JSON å½¢å¼çš„è¯´æ˜</li>
<li>è™½ç„¶å†™äº†éœ€è¦ä»€ä¹ˆå­—æ®µ, ä½†æ˜¯åªå†™äº†å­—æ®µå, æ²¡æœ‰å†™å­—æ®µç±»å‹å’Œæè¿°</li>
</ul>
<p><strong>Prompt å¾—åˆ†: 2</strong></p>
<h3 data-id="heading-35">UI</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98b995b4ad8c47b6a1fea3929842c6a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXJjWA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770518395&amp;x-signature=BBFLcaH2TruxAM%2FLWBL3Ngt2C54%3D" alt="Qwen-3-coder" loading="lazy"/></p>
<p>æ²¡å•¥å¥½è¯´çš„, æ ¹æœ¬ç”¨ä¸äº†.</p>
<ul>
<li>æœ€ä¸Šé¢é‚£ä¸ªè“è‰²çš„æ–¹å—æ˜¯ä¸Šä¼ æŒ‰é’®, åˆå§‹æ–‡æœ¬æ˜¯ "ç‚¹å‡»ä¸Šä¼ ", ç»“æœä¸Šä¼ ä¹‹åå°±å˜æˆäº†æ–‡ä»¶å, å¾ˆåŒªå¤·æ‰€æ€çš„è¡Œä¸º</li>
<li>"å¼€å§‹åˆ†æ"å’Œ"é‡æ–°é€‰æ‹©", ä¸€ç»¿ä¸€ç°, éå¸¸ä¸åè°ƒ, ç°è‰²ä¸€èˆ¬ç”¨äº disabled çš„æ ·å¼</li>
<li>å¤§é»‘ banner å¾ˆåœŸå¾ˆä¸‘, åƒ 10 å¹´å‰çš„ bootstrap é£æ ¼</li>
<li>åŒæ ·æ²¡æœ‰åœ¨å›¾é‡Œæ ‡æ˜ä½ç½®</li>
</ul>
<p><strong>UI å¾—åˆ†: 1</strong></p>
<h3 data-id="heading-36">å¼€å‘ä½“éªŒ</h3>
<p>ç»“æœéƒ½è¿™æ ·äº†, å¼€å‘ä½“éªŒä¹Ÿä¸é‡è¦äº†.</p>
<p><strong>å¼€å‘ä½“éªŒå¾—åˆ†: 1</strong></p>
<h3 data-id="heading-37">ç»¼åˆè¯„åˆ†</h3>
<p><strong>Qwen-3-coder: 1.5</strong></p>
<h2 data-id="heading-38">æ’å</h2>





























































<table><thead><tr><th align="left">æ¨¡å‹</th><th align="center">Prompt (50%)</th><th align="center">UI (40%)</th><th align="center">å¼€å‘ä½“éªŒ (10%)</th><th align="center">ç»¼åˆè¯„åˆ†</th></tr></thead><tbody><tr><td align="left"><strong>Gemini 3 Pro</strong></td><td align="center">8</td><td align="center">6</td><td align="center">10</td><td align="center"><strong>7.4</strong></td></tr><tr><td align="left"><strong>Claude Opus 4.5 (In Cursor)</strong></td><td align="center">7</td><td align="center">7</td><td align="center">10</td><td align="center"><strong>7.3</strong></td></tr><tr><td align="left"><strong>Claude Opus 4.5 (In Claude Code)</strong></td><td align="center">7</td><td align="center">5</td><td align="center">10</td><td align="center"><strong>6.5</strong></td></tr><tr><td align="left"><strong>Composer-1</strong></td><td align="center">7</td><td align="center">5</td><td align="center">10</td><td align="center"><strong>6.5</strong></td></tr><tr><td align="left"><strong>Kimi-K2.5</strong></td><td align="center">7</td><td align="center">6</td><td align="center">6</td><td align="center"><strong>6.5</strong></td></tr><tr><td align="left"><strong>GPT-5.2-codex</strong></td><td align="center">4</td><td align="center">5</td><td align="center">5</td><td align="center"><strong>4.5</strong></td></tr><tr><td align="left"><strong>Qwen-3-coder</strong></td><td align="center">2</td><td align="center">1</td><td align="center">1</td><td align="center"><strong>1.5</strong></td></tr></tbody></table>
<h2 data-id="heading-39">æ€»ç»“</h2>
<ol>
<li>Claude: ç¬¦åˆæœ€å¼ºçš„åœ°ä½. è™½ç„¶æœ¬æ¬¡æŒ‘æˆ˜é‡Œä¸¤æ¬¡éƒ½æ²¡æœ‰æ³¨æ„åˆ°å¯¹åæ ‡çš„è¦æ±‚å¯¼è‡´æƒœè´¥ Gemini, ä½†æ˜¯åˆ«çš„æ–¹é¢åŸºæœ¬éƒ½æ‹‰æ»¡äº†.</li>
<li>Gemini: å·ç§°å‰ç«¯ä¸¥çˆ¶, ä½†æ˜¯æœ¬æ¬¡æŒ‘æˆ˜é‡Œ UI ç”»å¾—çœŸçš„å¾ˆå·®, ä¸è¿‡å› ä¸ºæŠ“åˆ°äº†åæ ‡è¿™ä¸ªéœ€æ±‚åŠŸèƒ½ç‚¹, æ•´ä½“å°èƒœ Claude æ’åˆ°äº†ç¬¬ä¸€.</li>
<li>GPT: ä¸ç¬¦åˆé¢„æœŸ. è™½ç„¶æˆ‘å¹³æ—¶æ²¡æœ‰æ€ä¹ˆç”¨è¿‡ GPT-5.2-codex è¿™ä¸ªæ¨¡å‹, ä½†æ˜¯å°±ä»…æœ‰çš„ä¸ªä½æ•°çš„æ¬¡æ•°ä½“éªŒé‡Œ, è¿˜æ˜¯æ¯”è¾ƒå¥½çš„, æ²¡æœ‰ä»€ä¹ˆé—®é¢˜. ä½†æ˜¯åœ¨æœ¬æ¬¡æŒ‘æˆ˜ä¸­æš´éœ²äº†ä¸¥é‡çš„å¹»è§‰, è¿è‡ªå·±çš„ API éƒ½ä¸çŸ¥é“æœ‰ä»€ä¹ˆå‚æ•°.</li>
<li>Composer-1: å¾ˆå¤šäººå¯èƒ½æ²¡å¬è¿‡è¿™ä¸ªæ¨¡å‹, è¿™æ˜¯ Cursor å®˜æ–¹æ¨å‡ºçš„ç¬¬ä¸€ä¸ªè‡ªç ”ç¼–ç¨‹æ¨¡å‹, æœ€å¤§çš„ç‰¹ç‚¹æ˜¯é€Ÿåº¦çœŸçš„å¿«åˆ°é£èµ·. åˆšå‡ºæ¥çš„æ—¶å€™æˆ‘ç”¨å®ƒé—®è¿‡å‡ ä¸ªé—®é¢˜, æˆ‘çš„çœ¼ç›å®Œå…¨è·Ÿä¸ä¸Šå®ƒå¾€å¤–å token çš„é€Ÿåº¦, ä¸€ç¬é—´å°±å®Œæˆäº†å›å¤. æ‰€ä»¥ä¸€ç›´æƒ³æµ‹ä¸€ä¸‹å®ƒçš„ç¼–ç¨‹è´¨é‡å¦‚ä½•. ç”±äºæ˜¯ Cursor è‡ªå·±å‡ºçš„ç¬¬ä¸€ä¸ªæ¨¡å‹, æˆ‘å…¶å®æ˜¯å¯¹å®ƒæ²¡æŠ¥å•¥å¸Œæœ›çš„, ä½†æ˜¯æœ€ç»ˆå‘ˆç°çš„æ•ˆæœè¿˜ä¸é”™, ä¸­è§„ä¸­çŸ©åœ°å®Œæˆäº†, æ‰€ä»¥æ•´ä½“è¶…å‡ºé¢„æœŸ.</li>
<li>Kimi-K2.5: æˆ‘ä¹‹å‰ä¸€ç›´ä¸å¤ªå–œæ¬¢ Kimi, å› ä¸ºè¿™å®¶å…¬å¸ä¸€ç›´æ„Ÿè§‰è¥é”€å¤§äºå®åŠ›, å°¤å…¶æ˜¯ Kimi-K2 åˆšå‡ºæ¥çš„æ—¶å€™, å…¨ç½‘éƒ½åœ¨åˆ·å¦‚ä½•ç”¨å®ƒæ¥é©±åŠ¨ Claude Code, æ‰€ä»¥æˆ‘å¯¹å®ƒåŒæ ·æ²¡å•¥æœŸå¾…, ä½†æ˜¯æœ€ç»ˆçš„æ•ˆæœä¹Ÿè¿˜ä¸é”™, è™½ç„¶ç”Ÿæˆ UI çš„ AI å‘³å¾ˆæµ“.</li>
<li>Qwen-3-coder: æœ‰ç‚¹è¿‡åˆ†äº†. æˆ‘ä¸€ç›´ä»¥ä¸ºå®ƒçš„èƒ½åŠ›æ˜¯å›½äº§ AI é‡Œç¬¬ä¸€æ¢¯é˜Ÿçš„, æ²¡æƒ³åˆ°å±…ç„¶è¡¨ç°è¿™ä¹ˆå·®, å…¨æ–¹ä½åœ°å·®. åªèƒ½è¯´ç»§ç»­åŠ æ²¹å§â˜¹ï¸.</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ sk-getï¼šAI æ—¶ä»£çš„æŠ€èƒ½åŒ…ç®¡ç†å™¨ï¼Œè®©ä½ çš„ AI Agent ç¬é—´è¿›åŒ–]]></title>    <link>https://juejin.cn/post/7601073900525502506</link>    <guid>https://juejin.cn/post/7601073900525502506</guid>    <pubDate>2026-02-01T01:33:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601073900525502506" data-draft-id="7601075423003164708" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ sk-getï¼šAI æ—¶ä»£çš„æŠ€èƒ½åŒ…ç®¡ç†å™¨ï¼Œè®©ä½ çš„ AI Agent ç¬é—´è¿›åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯,Agent,Cursor"/> <meta itemprop="datePublished" content="2026-02-01T01:33:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lyx"/> <meta itemprop="url" content="https://juejin.cn/user/1512550150971805"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ sk-getï¼šAI æ—¶ä»£çš„æŠ€èƒ½åŒ…ç®¡ç†å™¨ï¼Œè®©ä½ çš„ AI Agent ç¬é—´è¿›åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1512550150971805/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lyx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T01:33:27.000Z" title="Sun Feb 01 2026 01:33:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éšç€ Cursorã€Claude å’Œ VSCode Copilot çš„æ™®åŠï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…å¼€å§‹ç§¯ç´¯è‡ªå·±çš„ <strong>AI Agent Skills</strong>ï¼ˆæç¤ºè¯æŒ‡ä»¤ã€å·¥ä½œæµè§„èŒƒç­‰ï¼‰ã€‚ä½†éšä¹‹è€Œæ¥çš„é—®é¢˜æ˜¯ï¼šå¦‚ä½•é«˜æ•ˆåœ°ç®¡ç†è¿™äº›æŠ€èƒ½ï¼Ÿå¦‚ä½•è·¨å¹³å°ã€è·¨é¡¹ç›®å¿«é€ŸåŒæ­¥å®ƒä»¬ï¼Ÿ</p>
<p><strong>sk-get</strong> åº”è¿è€Œç”Ÿã€‚å®ƒæ˜¯ä¸€æ¬¾ä¸“ä¸ºå¼€å‘è€…è®¾è®¡çš„ç®€å•ã€é«˜æ•ˆçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ—¨åœ¨æˆä¸º AI Agent é¢†åŸŸçš„â€œnpmâ€ã€‚</p>
<hr/>
<h3 data-id="heading-0">ğŸŒŸ æ ¸å¿ƒç†å¿µï¼šè¿æ¥ä»»æ„ä»“åº“ï¼ŒåŒæ­¥æ— é™å¯èƒ½</h3>
<p><strong>sk-get</strong> çš„æœ€å¤§ç‰¹ç‚¹åœ¨äºå…¶<strong>å¼€æ”¾æ€§</strong>ã€‚å®ƒä¸ç»‘å®šä»»ä½•ç‰¹å®šçš„æŠ€èƒ½åº“ï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>å¯¹æ¥è‡ªå·±çš„ç§æœ‰æŠ€èƒ½ä»“ã€‚</li>
<li>å¼•å…¥å›¢é˜Ÿå…±äº«çš„è§„èŒƒåº“ã€‚</li>
<li>è®¢é˜…ç¤¾åŒºä¸­å¼€æºçš„é«˜è´¨é‡æŠ€èƒ½ã€‚</li>
</ul>
<p>åªéœ€ä¸€ä¸ª GitHub ä»“åº“åœ°å€ï¼Œæ‰€æœ‰çš„ AI æŠ€èƒ½å³åˆ»è§¦æ‰‹å¯åŠã€‚</p>
<hr/>
<h3 data-id="heading-1">âœ¨ æ ¸å¿ƒåŠŸèƒ½äº®ç‚¹</h3>
<h4 data-id="heading-2">1. è·¨å¹³å°ä¸€é”®å®‰è£…</h4>
<p>æ— è®ºä½ ä½¿ç”¨çš„æ˜¯ <strong>Cursor</strong>ã€<strong>Claude</strong> è¿˜æ˜¯ <strong>VSCode</strong>ï¼Œsk-get éƒ½èƒ½ç²¾å‡†æŠ•é€ã€‚</p>
<ul>
<li><strong>Cursor/Claude</strong>ï¼šæ”¯æŒä¸€é”®å®‰è£…åˆ°å½“å‰é¡¹ç›®çš„æœ¬åœ°ç›®å½•æˆ–ç”¨æˆ·å…¨å±€ç›®å½•ã€‚</li>
<li><strong>VSCode</strong>ï¼šè‡ªåŠ¨è¯†åˆ«å¹¶å°†æŠ€èƒ½æŒ‡ä»¤è¿½åŠ åˆ° <code>.github/copilot-instructions.md</code>ï¼Œå®ç°çœŸæ­£çš„é›¶é…ç½®ä½¿ç”¨ã€‚</li>
</ul>
<h4 data-id="heading-3">2. æè‡´çš„äº¤äº’ä½“éªŒ</h4>
<p>è®¨åŒè®°å¤æ‚çš„å‚æ•°ï¼Ÿsk-get æä¾›äº†ä¸æ»‘çš„<strong>äº¤äº’å¼èœå•</strong>ã€‚
è¾“å…¥ <code>sg add</code>ï¼Œä½ å¯ä»¥é€šè¿‡æ–¹å‘é”®åœ¨è¿œç¨‹æŠ€èƒ½åˆ—è¡¨ä¸­è‡ªç”±é€‰æ‹©ï¼›
è¾“å…¥ <code>sg rm</code>ï¼Œå®ƒä¼šæ™ºèƒ½æ‰«æå·²å®‰è£…çš„æŠ€èƒ½ï¼ŒåŠ©ä½ ç²¾å‡†å¸è½½ã€‚</p>
<h4 data-id="heading-4">3. è½»é‡åŒ– API é©±åŠ¨</h4>
<p>sk-get ç›´æ¥é€šè¿‡ <strong>GitHub API</strong> è·å–å†…å®¹ã€‚
è¿™æ„å‘³ç€ä½ ä¸éœ€è¦å®‰è£…æœ¬åœ° Git ç¯å¢ƒï¼Œä¸éœ€è¦å…‹éš†æ•°ç™¾ MB çš„ä»“åº“ï¼Œè¿è¡Œé€Ÿåº¦æå¿«ï¼Œä¸”åŸç”Ÿæ”¯æŒæœ¬åœ°æ™ºèƒ½ç¼“å­˜ï¼Œæ–­ç½‘ä¹Ÿèƒ½æŸ¥çœ‹å·²æœ‰çš„æŠ€èƒ½åˆ—è¡¨ã€‚</p>
<h4 data-id="heading-5">4. å¤šä»“åº“ç®¡ç†ä¸çŠ¶æ€ç›‘æ§</h4>
<ul>
<li><strong>å¤šæºæ”¯æŒ</strong>ï¼šè½»æ¾é…ç½®å¤šä¸ªæŠ€èƒ½æºï¼Œå¹¶æ ¹æ®é¡¹ç›®éœ€æ±‚çµæ´»åˆ‡æ¢ã€‚</li>
<li><strong>çŠ¶æ€æ¦‚è§ˆ</strong>ï¼šè¿è¡Œ <code>sg status</code>ï¼Œä¸€çœ¼æ´å¯Ÿå½“å‰æ¿€æ´»çš„ä»“åº“ã€æœ¬åœ°åŠå…¨å±€å·²å®‰è£…çš„æŠ€èƒ½åˆ†å¸ƒã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">ğŸ› ï¸ å¿«é€Ÿä¸Šæ‰‹</h3>
<h4 data-id="heading-7">1. å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">npm install -g sk-get
</code></pre>
<h4 data-id="heading-8">2. é…ç½®ä»“åº“</h4>
<p>æ·»åŠ ä½ å¿ƒä»ªçš„ GitHub æŠ€èƒ½ä»“ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sg repo add https://github.com/your-name/my-ai-skills
</code></pre>
<h4 data-id="heading-9">3. å®‰è£…æŠ€èƒ½</h4>
<p>è¿›å…¥ä½ çš„é¡¹ç›®ç›®å½•ï¼Œç›´æ¥è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sg add
</code></pre>
<p>éšåæŒ‰ç…§äº¤äº’æç¤ºï¼Œé€‰æ‹©æŠ€èƒ½å’Œç›®æ ‡å¹³å°å³å¯ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6200a59da7ff4c0b9b0a3a0dea90d4f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHl4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770514409&amp;x-signature=ZhsX%2BLG91VGZ6uasdg8ycy9n9QA%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-10">ğŸ“‚ ä»“åº“ç»“æ„è¦æ±‚</h3>
<p>ä¸ºäº†è®© sk-get æ­£ç¡®è¯»å–ï¼Œä½ çš„ GitHub ä»“åº“åªéœ€ä¿æŒä»¥ä¸‹ç®€å•çš„ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-text" lang="text">.
â””â”€â”€ skills/
    â”œâ”€â”€ skill-name-1/
    â”‚   â””â”€â”€ SKILL.md
    â””â”€â”€ skill-name-2/
        â””â”€â”€ SKILL.md
</code></pre>
<hr/>
<h3 data-id="heading-11">ç»“è¯­</h3>
<p><strong>sk-get</strong> å¹¶éåªæ˜¯ä¸€ä¸ªç®€å•çš„ä¸‹è½½å·¥å…·ï¼Œå®ƒæ˜¯ AI åä½œæµä¸­çš„é‡è¦ä¸€ç¯ã€‚é€šè¿‡å°†æç¤ºè¯å·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰èµ„äº§åŒ–ã€ç‰ˆæœ¬åŒ–ï¼Œå®ƒèƒ½å¸®åŠ©å¼€å‘è€…å’Œå›¢é˜Ÿæ„å»ºèµ·ä¸€å¥—å¯å¤ç”¨ã€å¯ä¼ æ’­çš„ AI æ ¸å¿ƒç«äº‰åŠ›ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨å¯»æ‰¾ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼æ¥ç®¡ç†ä½ çš„ AI åŠ©æ‰‹ï¼Œé‚£ä¹ˆ <strong>sk-get</strong> ç»å¯¹å€¼å¾—ä¸€è¯•ã€‚</p>
<p>ğŸ‘‰ <strong>GitHub ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flyx-jay%2Fsk-get" target="_blank" title="https://github.com/lyx-jay/sk-get" ref="nofollow noopener noreferrer">github.com/lyx-jay/sk-â€¦</a>
(æ¬¢è¿ Star â­ï¸ å¹¶åœ¨ Issue ä¸­æå‡ºä½ çš„å»ºè®®ï¼)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…è§£ Junit 4 ä¹‹ TestClass]]></title>    <link>https://juejin.cn/post/7601076694105292836</link>    <guid>https://juejin.cn/post/7601076694105292836</guid>    <pubDate>2026-02-01T08:49:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601076694105292836" data-draft-id="7601073900526059562" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" æµ…è§£ Junit 4 ä¹‹ TestClass"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-01T08:49:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‡‘éŠ€éŠ…éµ"/> <meta itemprop="url" content="https://juejin.cn/user/747323638159757"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             æµ…è§£ Junit 4 ä¹‹ TestClass
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323638159757/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‡‘éŠ€éŠ…éµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T08:49:56.000Z" title="Sun Feb 01 2026 08:49:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p><code>JUnit 4</code> æ˜¯è‘—åçš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹è¿™äº›æ³¨è§£æ—¶ï¼Œ<code>JUnit 4</code> åœ¨èƒŒååšäº†äº›ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<ul>
<li><code>@Test</code></li>
<li><code>@Before</code></li>
<li><code>@After</code></li>
<li><code>@BeforeClass</code></li>
<li><code>@AfterClass</code></li>
<li><code>@Ignore</code></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‹¯</mo></mrow><annotation encoding="application/x-tex">\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.313em;"/><span class="minner">â‹¯</span></span></span></span></span></li>
</ul>
<p>ç”±äº <code>JUnit 4</code> ä¸­æœ‰å¾ˆå¤šé€»è¾‘ï¼Œå¦‚æœç”¨ä¸€ç¯‡æ–‡ç« æ¶µç›–è¿‡å¤šå†…å®¹çš„è¯ï¼Œæ–‡ç« ä¼šå¾ˆé•¿ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—å†™ä¸€ç³»åˆ—æ–‡ç« ï¼Œæ¥è®²è®²æˆ‘å¯¹ <code>JUnit 4</code> çš„è®¤è¯†ã€‚æœ¬æ–‡æ˜¯è¿™ä¸ªç³»åˆ—çš„ç¬¬ä¸€ç¯‡ã€‚æˆ‘ä»¬è¿™å°±å¼€å§‹å§ã€‚</p>
<h2 data-id="heading-1">æ­£æ–‡</h2>
<h3 data-id="heading-2">ç”¨åˆ°çš„æ–‡ä»¶</h3>
<p>æˆ‘åœ¨æœ¬åœ°åˆ›å»ºäº†ä¸€ä¸ªå°é¡¹ç›®æ¥ä»¥ä¾¿äºå­¦ä¹  <code>JUnit 4</code>ï¼Œè¿™ä¸ªé¡¹ç›®ä¸­åŒ…å«ä»¥ä¸‹ç›®å½•/æ–‡ä»¶ï¼ˆ<code>.idea</code> ç›®å½•å’Œ <code>target</code> ç›®å½•çš„å†…å®¹å‡ç•¥å»ï¼‰</p>
<ul>
<li>src</li>
<li>src/test</li>
<li>src/test/java</li>
<li>src/test/java/org</li>
<li>src/test/java/org/study</li>
<li>src/test/java/org/study/AdderTest.java</li>
<li>src/main</li>
<li>src/main/resources</li>
<li>src/main/java</li>
<li>src/main/java/org</li>
<li>src/main/java/org/example</li>
<li>src/main/java/org/example/Adder.java</li>
<li>pom.xml</li>
</ul>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71b47ec8c3d646b6975f9809aca9986c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770540948&amp;x-signature=XoWmsc0imSEClGm%2FDcFixYPUNQ0%3D" alt="image.png" width="30%" loading="lazy"/>
<h4 data-id="heading-3"><code>pom.xml</code></h4>
<p><code>pom.xml</code> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼ˆå› ä¸ºæˆ‘ä»¬åªå…³æ³¨ <code>JUnit 4</code>ï¼Œæ‰€ä»¥åªæœ‰ <code>JUnit 4</code> çš„ä¾èµ–ï¼‰</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit-study<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.13.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h4 data-id="heading-4"><code>Adder.java</code></h4>
<p><code>Adder.java</code> çš„å†…å®¹å¦‚ä¸‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.example;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Adder</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-keyword">return</span> a + b;
    }
}
</code></pre>
<h4 data-id="heading-5"><code>AdderTest.java</code></h4>
<p><code>AdderTest.java</code> çš„å†…å®¹å¦‚ä¸‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.study;

<span class="hljs-keyword">import</span> org.example.Adder;
<span class="hljs-keyword">import</span> org.junit.After;
<span class="hljs-keyword">import</span> org.junit.Assert;
<span class="hljs-keyword">import</span> org.junit.Before;
<span class="hljs-keyword">import</span> org.junit.Test;
<span class="hljs-keyword">import</span> org.junit.runners.model.TestClass;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdderTest</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Adder</span> <span class="hljs-variable">adder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Adder</span>();

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAdd</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"Let's observe what we will get for 1 + 1"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> adder.add(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
        Assert.assertEquals(<span class="hljs-number">2</span>, result);
        System.out.println(<span class="hljs-string">"The result is: "</span> + result);
    }

    <span class="hljs-meta">@Before</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"Hi, we are in a @Before-annotated method"</span>);
    }

    <span class="hljs-meta">@After</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"Hi, we are in an @After-annotated method"</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">TestClass</span> <span class="hljs-variable">testClass</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestClass</span>(AdderTest.class);
        <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span>;
    }
}
</code></pre>
<p>åœ¨ <code>Intellij IDEA (Community Edition)</code> é‡Œå¯ä»¥è¿è¡Œ <code>AdderTest</code> ä¸­çš„å•å…ƒæµ‹è¯•ï¼Œå…¶æ•ˆæœå¦‚ä¸‹æ‰€ç¤º â¬‡ï¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3970e926f508418186fc732ad754a6eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770540948&amp;x-signature=sVGHRJrtRfgbDmdSIF0FTtKFBi4%3D" alt="image.png" loading="lazy"/></p>
<p>ä»è¿è¡Œç»“æœä¸­å¯ä»¥çœ‹åˆ°ï¼Œ</p>
<ul>
<li>å¸¦æœ‰ <code>@Before</code> æ³¨è§£çš„æ–¹æ³•åœ¨å¸¦æœ‰ <code>@Test</code> æ³¨è§£çš„æ–¹æ³• <strong>ä¹‹å‰</strong> è¿è¡Œ</li>
<li>å¸¦æœ‰ <code>@After</code> æ³¨è§£çš„æ–¹æ³•åœ¨å¸¦æœ‰ <code>@Test</code> æ³¨è§£çš„æ–¹æ³• <strong>ä¹‹å</strong> è¿è¡Œ</li>
</ul>
<p>ä½†æ˜¯ <code>JUnit 4</code> æ€ä¹ˆçŸ¥é“å“ªäº›æ–¹æ³•å¸¦æœ‰ <code>@Before, @After, @Test</code> æ³¨è§£å‘¢ï¼Ÿè¿™å°±è¦æåˆ°æœ¬æ–‡çš„ä¸»è§’äº†: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>org.junit.runners.model.TestClass</mtext></mrow><annotation encoding="application/x-tex">\text{org.junit.runners.model.TestClass}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord text"><span class="mord">org.junit.runners.model.TestClass</span></span></span></span></span></span></p>
<h2 data-id="heading-6"><code>TestClass</code></h2>
<p>æˆ‘åœ¨ <code>AdderTest.java</code> æ–‡ä»¶é‡Œå†™äº† <code>main</code> æ–¹æ³•ï¼ˆå…·ä½“ä»£ç è¯·å‚è€ƒä¸Šæ–‡ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>main</code> æ–¹æ³•é‡Œçš„ <code>int a = 42;</code> è¿™ä¸€è¡Œï¼ˆè¿™ä¸€è¡Œæ²¡æœ‰ç‰¹åˆ«çš„å«ä¹‰ï¼Œåªæ˜¯ä¸ºäº†æ‰¾ä¸ªåœ°æ–¹è§‚å¯Ÿ <code>TestClass</code>ï¼‰æ‰“ä¸€ä¸ªæ–­ç‚¹ï¼Œä»¥è§‚å¯Ÿ <code>TestClass</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d78743e06b704e8197507f21f0f95b47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770540948&amp;x-signature=hMT%2Fkt9iEOjjndC9D9%2FoWiJUlpI%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ° <code>testClass</code> å˜é‡ä¸­æœ‰ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>methodsForAnnotations</mtext></mrow><annotation encoding="application/x-tex">\text{methodsForAnnotations}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord text"><span class="mord">methodsForAnnotations</span></span></span></span></span></span> å­—æ®µï¼ˆå¦‚ä¸Šå›¾æ‰€ç¤ºï¼‰ã€‚è¿™ä¸ªå­—æ®µæ˜¯ä¸€ä¸ª <code>Map</code>ã€‚ç‚¹å‡» <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>methodsForAnnotations</mtext></mrow><annotation encoding="application/x-tex">\text{methodsForAnnotations}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord text"><span class="mord">methodsForAnnotations</span></span></span></span></span></span> è¿™ä¸ªå­—æ®µåï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­æœ‰ä¸‰ä¸ª <code>key</code> åˆ†åˆ«å’Œä»¥ä¸‹æ³¨è§£å¯¹åº”</p>
<ul>
<li><code>@Test</code></li>
<li><code>@Before</code></li>
<li><code>@After</code></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b0765bf1b934b2f9e3f8ceb8dd88081~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770540948&amp;x-signature=Vm8qMdz6p82jGwI9q%2BEqgJWzSkk%3D" alt="image.png" loading="lazy"/></p>
<p>å†ç‚¹å¼€è¿™ä¸‰ä¸ª <code>key-value</code> å¯¹ï¼Œå¯ä»¥çœ‹åˆ°å¸¦æœ‰å¯¹åº”æ³¨è§£çš„æ–¹æ³•éƒ½å‡ºç°åœ¨å¯¹åº”çš„ <code>value</code> ä¸­ â¬‡ï¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73ac0903a5014213ad6321d8c53b6561~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770540948&amp;x-signature=quGTdiU3%2BLWE6SRgXXUQBol1jos%3D" alt="image.png" loading="lazy"/></p>
<p>ç”±æ­¤å¯ä»¥çŒœæµ‹ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>org.junit.runners.model.TestClass</mtext></mrow><annotation encoding="application/x-tex">\text{org.junit.runners.model.TestClass}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord text"><span class="mord">org.junit.runners.model.TestClass</span></span></span></span></span></span> åº”è¯¥ä¼šåˆ†ææŒ‡å®šç±»ä¸­å„ä¸ªæ–¹æ³•ä¸Šçš„æ³¨è§£ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯ä¿å­˜åˆ°äº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>methodsForAnnotations</mtext></mrow><annotation encoding="application/x-tex">\text{methodsForAnnotations}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord text"><span class="mord">methodsForAnnotations</span></span></span></span></span></span> å­—æ®µä¸­ã€‚
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>org.junit.runners.model.TestClass</mtext></mrow><annotation encoding="application/x-tex">\text{org.junit.runners.model.TestClass}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord text"><span class="mord">org.junit.runners.model.TestClass</span></span></span></span></span></span> çš„æ„é€ å‡½æ•°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œçœ‹èµ·æ¥è¿™ä¸ªçŒœæµ‹æ˜¯æ­£ç¡®çš„ã€‚ï¼ˆè¯»è€…æœ‹å‹å¯ä»¥åœ¨è¿™ä¸ªæ„é€ å‡½æ•°é‡Œæ‰“æ–­ç‚¹è§‚å¯Ÿä¸€ä¸‹ï¼ŒåŠ æ·±ç†è§£ï¼Œçº¯é çŒœæµ‹è¿˜æ˜¯ä¼šæœ‰å¤±æ‰‹çš„æ—¶å€™ï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/741b39ba01eb45948a2ef4b2fcccad3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770540948&amp;x-signature=TyJlsDYnautWqMMBOrJNDTKoqmw%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€æºäº†ä¸€ä¸ªæ’ä»¶ï¼šè®© Claude Skills åœ¨ä»»ä½• Agent ä¸Šè·‘èµ·æ¥ ğŸš€]]></title>    <link>https://juejin.cn/post/7601101531919925294</link>    <guid>https://juejin.cn/post/7601101531919925294</guid>    <pubDate>2026-02-01T02:36:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601101531919925294" data-draft-id="7601144981170208818" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€æºäº†ä¸€ä¸ªæ’ä»¶ï¼šè®© Claude Skills åœ¨ä»»ä½• Agent ä¸Šè·‘èµ·æ¥ ğŸš€"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-01T02:36:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hahaeee"/> <meta itemprop="url" content="https://juejin.cn/user/3650034331552238"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€æºäº†ä¸€ä¸ªæ’ä»¶ï¼šè®© Claude Skills åœ¨ä»»ä½• Agent ä¸Šè·‘èµ·æ¥ ğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3650034331552238/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hahaeee
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T02:36:38.000Z" title="Sun Feb 01 2026 02:36:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€æºäº†ä¸€ä¸ªæ’ä»¶ï¼šè®© Claude Skills åœ¨ä»»ä½• Agent ä¸Šè·‘èµ·æ¥ ğŸš€</h2>
<h3 data-id="heading-1">èƒŒæ™¯</h3>
<p>æœ€è¿‘åœ¨ç”¨ Claude Skills çš„æ—¶å€™å‘ç°ä¸€ä¸ªé—®é¢˜ï¼šå¾ˆå¤š AI Agent å¹³å°ï¼ˆæ¯”å¦‚ Kiroã€Dify ç­‰ï¼‰åªæ”¯æŒ MCP åè®®ï¼Œä¸æ”¯æŒåŸç”Ÿçš„ Claude Skillsã€‚çœ¼é¦‹ Skills å´æ— æ³•ä½¿ç”¨å¤ªç—›è‹¦äº†ã€‚</p>
<p>äºæ˜¯æˆ‘åšäº†è¿™ä¸ªå·¥å…·ï¼Œ<strong>å¯ä»¥æŠŠ Claude Skills è½¬æˆ MCP å·¥å…·</strong>ï¼Œé€šè¿‡MCPçš„æ–¹å¼å°†Skillsæ¥å…¥è¿›æ¥ã€‚</p>
<h3 data-id="heading-2">ä½¿ç”¨æ­¥éª¤</h3>
<h4 data-id="heading-3">1. ä¸‹è½½skill</h4>
<p>é€šè¿‡ github æœç´¢ä½ éœ€è¦çš„ Skills åˆ°æœ¬åœ°,è§£å‹å¤„ç†. (æ³¨æ„å¤šä¸ªskillè¦æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹)</p>
<pre><code class="hljs language-erlang" lang="erlang">è·¯å¾„:
    skill-<span class="hljs-number">1</span>
        skill.md
        ...
    skill-<span class="hljs-number">2</span>
        skill.md
        ...
</code></pre>
<h4 data-id="heading-4">2. é…ç½® MCPæœåŠ¡</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"mcp-skills-explorer"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"mcp-skills-explorer"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"SKILLS_DIR"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{ä½ çš„skillæ–‡ä»¶å¤¹è·¯å¾„}"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-5">3. å®Œäº‹</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/890af721040c4f39a6a484c8952439d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFoYWVlZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770518714&amp;x-signature=9BY8dYEwdMUaBQ8rzlH6uEg3Mdo%3D" alt="image.png" loading="lazy"/></p>
<p>æå®šï¼ skillå°±ä¼šä»¥MCPå·¥å…·çš„æ–¹å¼è¢«è£…è½½åˆ°agentä¸Šäº†.</p>
<p>å½“agentéœ€è¦ä½¿ç”¨skill,å°±ä¼šé€šè¿‡mcpå·¥å…·è·å–åˆ°skillä¿¡æ¯,å†é˜…è¯»skillæ–‡æ¡£.</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce5be13030d04accb88b0d95c6b9e41b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFoYWVlZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770518714&amp;x-signature=304yn7HzaY%2BHh5ejRGpwk7i6c%2FQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">æŠ€æœ¯å®ç°</h3>
<p>é¡¹ç›®ä½¿ç”¨ TypeScript å¼€å‘ï¼Œæ ¸å¿ƒé€»è¾‘ï¼š</p>
<ol>
<li>ç›‘å¬ <code>claude-skills</code> ç›®å½•å˜åŒ–</li>
<li>è§£æ <code>skill.md</code> æ–‡ä»¶ï¼ˆMarkdown æ ¼å¼ï¼‰</li>
<li>åŠ¨æ€æ³¨å†Œä¸º MCP å·¥å…·</li>
<li>å¤„ç†å·¥å…·è°ƒç”¨è¯·æ±‚</li>
</ol>
<p>ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•ï¼Œæ¬¢è¿è´¡çŒ® PRï¼</p>
<h3 data-id="heading-7">å¼€æºåœ°å€</h3>
<ul>
<li>GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fd342784178%2Fmcp-skills-explorer" target="_blank" title="https://github.com/d342784178/mcp-skills-explorer" ref="nofollow noopener noreferrer">github.com/d342784178/â€¦</a></li>
<li>NPM: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fmcp-skills-explorer" target="_blank" title="https://www.npmjs.com/package/mcp-skills-explorer" ref="nofollow noopener noreferrer">www.npmjs.com/package/mcpâ€¦</a></li>
</ul>
<hr/>
<p><strong>æ ‡ç­¾</strong>ï¼š#AI #Claude #MCP #å¼€æº #å·¥å…·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openclaw æŠ€æœ¯åˆ†æ]]></title>    <link>https://juejin.cn/post/7601076694104801316</link>    <guid>https://juejin.cn/post/7601076694104801316</guid>    <pubDate>2026-02-01T03:15:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601076694104801316" data-draft-id="7601159804490350611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openclaw æŠ€æœ¯åˆ†æ"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-02-01T03:15:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="dony7247"/> <meta itemprop="url" content="https://juejin.cn/user/3245414054367607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openclaw æŠ€æœ¯åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3245414054367607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    dony7247
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T03:15:38.000Z" title="Sun Feb 01 2026 03:15:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>github url :<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw" target="_blank" title="https://github.com/openclaw/openclaw" ref="nofollow noopener noreferrer">github.com/openclaw/opâ€¦</a></p>
<p>é¡¹ç›®æ˜¯çº¯å‰ç«¯å†™çš„ï¼Œä¸»è¦ç”¨typescript</p>
<h2 data-id="heading-0">ä¸»è¦æ¦‚å¿µï¼š</h2>
<p><strong>Gateway</strong>,Â <strong>Agents</strong>,Â <strong>Sessions</strong>,Â <strong>Channels</strong>,Â <strong>Nodes</strong>,Â <strong>Tools</strong>, Â <strong>Skills</strong>.</p>
<h3 data-id="heading-1">æ¡†æ¶å›¾ï¼š</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/530ed298ab77476d9efac0895010b41f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZG9ueTcyNDc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770520537&amp;x-signature=22LzvYuEwanDqMlk1OwqdK99bcM%3D" alt="whiteboard_exported_image (2).png" loading="lazy"/></p>
<h3 data-id="heading-2">Gateway: The Control Plane</h3>
<p>ç½‘å…³æ˜¯ OpenClaw çš„ä¸­å¤®åè°ƒæ¢çº½â€”â€”ä¸€ä¸ª WebSocket æœåŠ¡å™¨ <strong>ï¼Œ</strong> ç”¨äºåè°ƒæ‰€æœ‰ç³»ç»Ÿç»„ä»¶ã€‚å®ƒä½œä¸ºå•ä¸ªè¿›ç¨‹è¿è¡Œï¼ˆé€šå¸¸åœ¨ 18789 ç«¯å£ä¸Šè¿è¡Œï¼‰ï¼Œå¹¶ç®¡ç†agentsã€sessionsã€channelsã€toolså’Œnodesã€‚</p>
<p>é»˜è®¤ç½‘å…³</p>
<pre><code class="hljs language-arduino" lang="arduino">ws:<span class="hljs-comment">//127.0.0.1:18789 </span>
</code></pre>
<h3 data-id="heading-3">Agentsï¼šAI æ‰§è¡Œè¿è¡Œæ—¶</h3>
<p>Agentæ˜¯é€šè¿‡<strong>Pi Agent Core</strong>è¿è¡Œæ—¶æ”¯æŒçš„ AI åŠ©æ‰‹å®ä¾‹ã€‚æ¯ä¸ª<strong>Agent</strong>éƒ½æœ‰è‡ªå·±çš„å·¥ä½œåŒºã€æ¨¡å‹é…ç½®ã€å·¥å…·ç­–ç•¥å’Œèº«ä»½éªŒè¯é…ç½®æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-perl" lang="perl">~<span class="hljs-regexp">/.openclaw/ag</span>ents/&lt;agentId&gt;<span class="hljs-regexp">/ 
â”œâ”€â”€ agent/</span> 
â”‚ â”œâ”€â”€ auth-profiles.json <span class="hljs-comment"># OAuth + API key credentials </span>
â”‚ â””â”€â”€ auth.json <span class="hljs-comment"># Runtime cache (managed by Pi Core) </span>
â”œâ”€â”€ sessions/ 
â”‚ â””â”€â”€ agent-&lt;agentId&gt;.json <span class="hljs-comment"># Session transcripts </span>
â””â”€â”€ workspace/ <span class="hljs-comment"># Files accessible to the agent </span>
â”œâ”€â”€ AGENTS.md <span class="hljs-comment"># System prompt bootstrap </span>
â”œâ”€â”€ SOUL.md <span class="hljs-comment"># Identity/personality </span>
â”œâ”€â”€ TOOLS.md <span class="hljs-comment"># Tool guidance </span>
â””â”€â”€ skills/
</code></pre>
<p><strong>ä»£ç†å·¥å…·æ‰§è¡Œï¼š</strong> Â ä»£ç†é€šè¿‡æ‰§è¡Œå·¥å…·<code>createOpenClawCodingTools</code>æ¥å®Œæˆç»„è£…ï¼š</p>
<ul>
<li>æ–‡ä»¶ç³»ç»Ÿå·¥å…·ï¼š<code>read</code>,<code>write</code>,<code>edit</code>,<code>apply_patch</code><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw%2Fblob%2Fbf6ec64f%2Fsrc%2Fagents%2Fpi-tools.ts%23L229-L251" target="_blank" title="https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts#L229-L251" ref="nofollow noopener noreferrer">src/agents/pi-tools.ts229-251</a>ï¼‰</li>
<li>è¿è¡Œæ—¶å·¥å…·ï¼š<code>exec</code>ï¼Œ<code>process</code>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw%2Fblob%2Fbf6ec64f%2Fsrc%2Fagents%2Fbash-tools.ts" target="_blank" title="https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/bash-tools.ts" ref="nofollow noopener noreferrer">src/agents/bash-tools.ts</a>ï¼‰</li>
<li>OpenClaw å·¥å…·ï¼š<code>browser</code>ï¼Œ<code>canvas</code>,<code>nodes</code>,<code>message</code>,<code>sessions_*</code>,<code>cron</code>,<code>gateway</code><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw%2Fblob%2Fbf6ec64f%2Fsrc%2Fagents%2Fopenclaw-tools.ts" target="_blank" title="https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/openclaw-tools.ts" ref="nofollow noopener noreferrer">src/agents/openclaw-tools.ts</a>ï¼‰</li>
<li>æ’ä»¶å·¥å…·ï¼šæ¥è‡ªæ‰©å±•çš„å¯é€‰å·¥å…·ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw%2Fblob%2Fbf6ec64f%2Fsrc%2Fplugins%2Ftools.ts" target="_blank" title="https://github.com/openclaw/openclaw/blob/bf6ec64f/src/plugins/tools.ts" ref="nofollow noopener noreferrer">src/plugins/tools.ts</a>ï¼‰</li>
</ul>
<h3 data-id="heading-4">sessionsï¼šå¯¹è¯çŠ¶æ€ç®¡ç†</h3>
<p>sessions ä»£è¡¨ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œæ‹¥æœ‰è‡ªå·±çš„æ¶ˆæ¯å†å²è®°å½•ã€æ¨¡å‹è®¾ç½®å’Œå·¥å…·æ‰§è¡ŒçŠ¶æ€ã€‚ä¼šè¯é€šè¿‡ä¼šè¯é”®è¿›è¡Œæ ‡è¯†ï¼Œä¼šè¯é”®ç¼–ç äº†è·¯ç”±ä¿¡æ¯ã€‚</p>
<p>ä¼šè¯è·¯ç”±ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f559aa922f4149cb97d70cad9d288e99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZG9ueTcyNDc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770520537&amp;x-signature=4zjxTMSN2OqBl2O%2FNTntVBW3SH0%3D" alt="sessions è·¯ç”±.png" loading="lazy"/></p>
<p>ä¼šè¯æ¨¡å¼ï¼š</p>
<ul>
<li>ä¼šè¯é‡ç½®ç­–ç•¥</li>
<li>ä¼šè¯é˜Ÿåˆ—æ¨¡å¼</li>
<li>ä¼šè¯çŠ¶æ€ç®¡ç†</li>
</ul>
<h3 data-id="heading-5">channelsï¼šæ¶ˆæ¯å¹³å°é›†æˆ</h3>
<p><strong>channels</strong>æ˜¯è¿æ¥ OpenClaw å’Œæ¶ˆæ¯å¹³å°çš„é€‚é…å™¨ã€‚æ¯ä¸ªé€šé“è´Ÿè´£å¤„ç†ç‰¹å®šäºå¹³å°çš„èº«ä»½éªŒè¯ã€æ¶ˆæ¯æ ¼å¼å’Œä¼ é€’ã€‚å¦‚ï¼šWhatsAppï¼Œtelegram,discard,é£ä¹¦ï¼Œgoogle chat</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8480b6a8a7043ba8329a8cc1f00d214~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZG9ueTcyNDc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770520537&amp;x-signature=8oT3Tkpvy8uQdjEWOJ6vOm8ZLbE%3D" alt="channelsæµç¨‹å›¾.png" loading="lazy"/></p>
<h3 data-id="heading-6">nodesï¼šè®¾å¤‡åŠŸèƒ½æä¾›å•†</h3>
<p>**nodes **  æ˜¯ä¸ç½‘å…³é…å¯¹çš„é…å¥—åº”ç”¨ç¨‹åºï¼ˆiOSã€Androidã€macOSï¼‰ï¼Œé€šè¿‡ gateway ä¸ agents é€šä¿¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21609269983e4ab89cfac4e22c7fdeca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZG9ueTcyNDc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770520537&amp;x-signature=bSxRO4MT0vz5rN0fSPgCQA6Nc14%3D" alt="whiteboard_exported_image (1).png" loading="lazy"/></p>
<h3 data-id="heading-7">toolsï¼šä»£ç†åŠŸèƒ½</h3>
<p><strong>tools</strong>æ˜¯ä»£ç†åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥è°ƒç”¨çš„åŠŸèƒ½ã€‚OpenClaw æä¾›å†…ç½®å·¥å…·ï¼Œç”¨äºæ–‡ä»¶æ“ä½œã€shell æ‰§è¡Œã€æµè§ˆå™¨æ§åˆ¶ã€æ¶ˆæ¯ä¼ é€’å’Œç³»ç»Ÿé›†æˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8881aff2d3546c2b1c114b69a0cf7c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZG9ueTcyNDc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770520537&amp;x-signature=dzUhMfucakViLtGmD8ZtkJFp4RU%3D" alt="tools.png" loading="lazy"/></p>
<p><strong>skills</strong>æ˜¯åŒ…å«æç¤ºã€è„šæœ¬å’Œå…ƒæ•°æ®çš„ç‹¬ç«‹åŒ…ï¼Œç”¨äºæ‰©å±•ä»£ç†çš„åŠŸèƒ½ã€‚å®ƒä»¬å­˜åœ¨äºä»£ç†çš„å·¥ä½œåŒºä¸­ï¼Œå¹¶ä¼šè¢«è‡ªåŠ¨å‘ç°å¹¶æ³¨å…¥åˆ°ç³»ç»Ÿæç¤ºä¸­ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby">~<span class="hljs-regexp">/.openclaw/agents</span><span class="hljs-regexp">/&lt;agentId&gt;/workspace</span><span class="hljs-regexp">/skills/</span> 
â”œâ”€â”€ github/ 
â”‚ â”œâ”€â”€ <span class="hljs-variable constant_">SKILL</span>.md <span class="hljs-comment"># Skill documentation (injected into prompt) </span>
â”‚ â”œâ”€â”€ package.json <span class="hljs-comment"># Metadata (name, description, dependencies) </span>
â”‚ â””â”€â”€ bin/ <span class="hljs-comment"># Optional binaries/scripts </span>
â”œâ”€â”€ slack/ 
â”‚ â”œâ”€â”€ <span class="hljs-variable constant_">SKILL</span>.md 
â”‚ â””â”€â”€ package.json 
â””â”€â”€ custom-skill/ 
â”œâ”€â”€ <span class="hljs-variable constant_">SKILL</span>.md 
â””â”€â”€ package.json
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨CodePlan 10åˆ†é’Ÿå†…å¸¦ä½ éƒ¨ç½²å¯åŠ¨ OpenClawï¼ˆåŸMoltBot/ClawdBotï¼‰]]></title>    <link>https://juejin.cn/post/7601073900525682730</link>    <guid>https://juejin.cn/post/7601073900525682730</guid>    <pubDate>2026-02-01T03:32:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601073900525682730" data-draft-id="7601075423003295780" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨CodePlan 10åˆ†é’Ÿå†…å¸¦ä½ éƒ¨ç½²å¯åŠ¨ OpenClawï¼ˆåŸMoltBot/ClawdBotï¼‰"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2026-02-01T03:32:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="EgoLee"/> <meta itemprop="url" content="https://juejin.cn/user/4408388462851657"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨CodePlan 10åˆ†é’Ÿå†…å¸¦ä½ éƒ¨ç½²å¯åŠ¨ OpenClawï¼ˆåŸMoltBot/ClawdBotï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4408388462851657/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    EgoLee
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T03:32:20.000Z" title="Sun Feb 01 2026 03:32:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0"/>
<blockquote>
<p>"å¦‚æœä½ æƒ³è¦ä¸€ä¸ªæ„Ÿè§‰åƒæœ¬åœ°åŠ©æ‰‹ã€é€Ÿåº¦å¿«ã€å§‹ç»ˆåœ¨çº¿çš„å•äººä¸ªäººåŠ©ç†ï¼Œé‚£å°±æ˜¯å®ƒäº†ã€‚"</p>
</blockquote>
<p>æœ¬æ–‡æ¡£æ—¨åœ¨æŒ‡å¯¼ç”¨æˆ·åœ¨ç»ˆç«¯ç¯å¢ƒä¸­å¿«é€Ÿå®‰è£…å¹¶åˆå§‹åŒ– OpenClawã€‚åœ¨ä¸€åˆ‡å¼€å§‹ä¹‹å‰ï¼Œæ‚¨éœ€è¦ä¸€å°VMï¼ˆè™šæ‹Ÿæœºï¼‰ï¼Œä¸”æœ€å¥½æ”¯æŒè®¿é—®å…¨çƒäº’è”ç½‘ã€‚</p>
<h2 data-id="heading-1">1. ä¸‹è½½ä¸å®‰è£… OpenClaw</h2>
<p>è¯·æ ¹æ®æ‚¨æ‰€åœ¨çš„ç½‘ç»œç¯å¢ƒï¼Œé€‰æ‹©ä»¥ä¸‹å…¶ä¸­ä¸€ç§æ–¹å¼åœ¨ç»ˆç«¯ä¸­è¿è¡Œå®‰è£…å‘½ä»¤ã€‚è¯¥å‘½ä»¤å°†è‡ªåŠ¨ä¸‹è½½ç»„ä»¶å¹¶å¯åŠ¨åˆå§‹åŒ–æµç¨‹ã€‚</p>
<h3 data-id="heading-2">é€‰é¡¹ Aï¼šå®˜æ–¹å®‰è£…è„šæœ¬</h3>
<p>*é€‚ç”¨å¯¹è±¡ï¼šå›½é™…ç½‘ç»œç¯å¢ƒè¾ƒå¥½çš„ç”¨æˆ·<br/>
*<br/>
<code>curl -fsSL https://openclaw.ai/install.sh | bash</code></p>
<h3 data-id="heading-3">é€‰é¡¹ Bï¼šX-AIO åŠ é€Ÿå®‰è£…è„šæœ¬</h3>
<p><em>é€‚ç”¨å¯¹è±¡ï¼šä¸­å›½å¤§é™†åœ°åŒºç”¨æˆ·ï¼ˆä½¿ç”¨ CDN åŠ é€Ÿï¼‰</em></p>
<p><code>curl -fsSL https://cdn.x-aio.com/X-AIO/Apps/OpenClaw/install.sh | bash</code></p>
<h2 data-id="heading-4">2. åˆå§‹åŒ– OpenClaw</h2>
<p>è¿è¡Œä¸Šè¿°è„šæœ¬åï¼Œç¨‹åºå°†è‡ªåŠ¨è¿›å…¥ "OpenClaw onboarding" æµç¨‹ã€‚</p>
<h3 data-id="heading-5">2.1 é˜…è¯»å¹¶åŒæ„å®‰å…¨é£é™©è­¦å‘Š (Security Warning)</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cd9a840e9684167a81924ce4b002992~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWdvTGVl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770521540&amp;x-signature=Oby5YUNUS8bCsCeu%2FUAr2SQq9I4%3D" alt="Screenshot 2026-01-30 at 6.19.05â€¯PM.png" loading="lazy"/></p>
<p>å®‰è£…ç¨‹åºå¯åŠ¨åï¼Œé¦–å…ˆä¼šæ˜¾ç¤º <strong>Security</strong>ï¼ˆå®‰å…¨ï¼‰ç•Œé¢ã€‚</p>
<p>ç³»ç»Ÿä¼šå‘ŠçŸ¥æ‚¨ï¼š</p>
<ul>
<li>OpenClaw ç›®å‰ä»å¤„äº Beta æµ‹è¯•é˜¶æ®µï¼ˆ"Expect sharp edges"ï¼‰ã€‚</li>
<li>è¯¥åŠ©æ‰‹å…·æœ‰è¯»å–æ–‡ä»¶å’Œæ‰§è¡Œæ“ä½œçš„æƒé™ï¼Œå¦‚æœå¯ç”¨å·¥å…·ï¼ˆToolsï¼‰ï¼Œé”™è¯¯çš„æç¤ºè¯å¯èƒ½ä¼šå¯¼è‡´ä¸å®‰å…¨çš„æ“ä½œã€‚</li>
<li>å»ºè®®é‡‡å–åŸºæœ¬çš„å®‰å…¨æªæ–½ï¼ˆå¦‚æ²™ç®±ç¯å¢ƒã€æœ€å°æƒé™åŸåˆ™ç­‰ï¼‰ã€‚</li>
</ul>
<p><strong>ç•Œé¢æç¤ºï¼š</strong></p>
<p>å±å¹•åº•éƒ¨ä¼šå‡ºç°ç¡®è®¤è¯¢é—®ï¼š</p>
<blockquote>
<p><code>I understand this is powerful and inherently risky. Continue?</code></p>
<p>(æˆ‘æ˜ç™½è¿™å¾ˆå¼ºå¤§ä¸”åŸæœ¬å°±å…·æœ‰é£é™©ã€‚ç»§ç»­ï¼Ÿ)</p>
</blockquote>
<p><strong>æ“ä½œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>ä»”ç»†é˜…è¯»å±å¹•ä¸Šçš„å®‰å…¨è­¦å‘Šä¿¡æ¯ã€‚</li>
<li>ä½¿ç”¨é”®ç›˜ <strong>æ–¹å‘é”®</strong> é€‰ä¸­ <strong>Yes</strong>ï¼ˆé€‰ä¸­é¡¹é€šå¸¸ä¼šæ˜¾ç¤ºä¸ºç»¿è‰²åœ†ç‚¹ <code>â—</code>ï¼‰ã€‚</li>
<li>æŒ‰ <strong>å›è½¦é”® (Enter)</strong> ç¡®è®¤è¿›å…¥ä¸‹ä¸€æ­¥ã€‚</li>
</ol>
<h3 data-id="heading-6">2.2 ç¡®è®¤å¿«é€Ÿå¯åŠ¨é…ç½®å¹¶è·³è¿‡æ¨¡å‹è®¾ç½®</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e43c46f4e10e4571ae2894654650238d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWdvTGVl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770521540&amp;x-signature=wGBAz64r7n3KvasAGmXvKPfsTxg%3D" alt="Screenshot 2026-01-30 at 6.19.28â€¯PM.png" loading="lazy"/></p>
<p>åŒæ„å®‰å…¨è­¦å‘Šåï¼Œç³»ç»Ÿä¼šæ˜¾ç¤º <strong>QuickStart</strong>ï¼ˆå¿«é€Ÿå¯åŠ¨ï¼‰çš„é»˜è®¤ç½‘ç»œé…ç½®ï¼Œå¹¶è¦æ±‚æ‚¨é€‰æ‹©æ¨¡å‹æä¾›å•†ã€‚</p>
<p><strong>ç•Œé¢ä¿¡æ¯ï¼š</strong></p>
<ul>
<li><strong>QuickStart é…ç½®é¢„è§ˆ</strong>ï¼šé¡¶éƒ¨æ–¹æ¡†å†…æ˜¾ç¤ºäº†é»˜è®¤çš„ç½‘å…³ç«¯å£ (18789) å’Œç»‘å®šåœ°å€ (127.0.0.1)ï¼Œè¿™è¡¨ç¤ºæœåŠ¡å°†åœ¨æœ¬åœ°è¿è¡Œã€‚</li>
<li><strong>Model/auth provider</strong>ï¼šåˆ—è¡¨æ˜¾ç¤ºäº†æ”¯æŒçš„å„ç§ AI æ¨¡å‹æä¾›å•†ï¼ˆå¦‚ OpenAI, Anthropic, Google ç­‰ï¼‰ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/751a3337a671453082864f2783757ba9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWdvTGVl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770521540&amp;x-signature=cTZ3jN9KNpmUYFLU2qw2XOt%2FVg8%3D" alt="Screenshot 2026-01-30 at 6.19.49â€¯PM.png" loading="lazy"/></li>
</ul>
<p><strong>æ“ä½œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>
<p>ç³»ç»Ÿå±•ç¤ºé»˜è®¤é…ç½®æ—¶ï¼Œæ— éœ€ä¿®æ”¹ï¼Œç›´æ¥å…³æ³¨ä¸‹æ–¹çš„åˆ—è¡¨ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨é”®ç›˜ <strong>æ–¹å‘é”® (ä¸‹)</strong> å°†å…‰æ ‡ç§»åŠ¨åˆ°åˆ—è¡¨çš„æœ€åº•éƒ¨ã€‚</p>
</li>
<li>
<p>é€‰ä¸­ <strong>Skip for now</strong>ï¼ˆæš‚æ—¶è·³è¿‡ï¼‰ã€‚</p>
<ul>
<li><em>è¯´æ˜ï¼šæˆ‘ä»¬å°†åœ¨åç»­æ­¥éª¤æˆ–é…ç½®æ–‡ä»¶ä¸­è¯¦ç»†è®¾ç½®æ¨¡å‹ï¼Œæ­¤å¤„å…ˆè·³è¿‡ä»¥å®ŒæˆåŸºç¡€å®‰è£…ã€‚</em></li>
</ul>
</li>
<li>
<p>æŒ‰ <strong>å›è½¦é”® (Enter)</strong> ç¡®è®¤ã€‚</p>
</li>
</ol>
<h3 data-id="heading-7">2.3 è·³è¿‡é€šä¿¡æ¸ é“é…ç½® (Select Channel)</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa937491dac84f92832fd9ea7013be30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWdvTGVl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770521540&amp;x-signature=H5mL%2BixSzi96LPh2%2BPlfbnLUSDA%3D" alt="Screenshot 2026-01-30 at 6.20.02â€¯PM.png" loading="lazy"/></p>
<p>é…ç½®å®Œæ¨¡å‹åï¼Œç³»ç»Ÿä¼šè¯¢é—®æ‚¨å¸Œæœ›é€šè¿‡å“ªä¸ªå¹³å°ï¼ˆChannelï¼‰ä¸ OpenClaw è¿›è¡Œäº¤äº’ã€‚OpenClaw æ”¯æŒ Telegramã€Discordã€Slackã€iMessage ç­‰å¤šç§ä¸»æµå¹³å°ã€‚</p>
<p><strong>ç•Œé¢ä¿¡æ¯ï¼š</strong></p>
<ul>
<li>åˆ—è¡¨åˆ—å‡ºäº†æ‰€æœ‰æ”¯æŒçš„å³æ—¶é€šè®¯å¹³å°æ¥å£ã€‚</li>
<li>æ—¢ç„¶æˆ‘ä»¬æ˜¯åœ¨ç»ˆç«¯è¿›è¡Œæœ¬åœ°æµ‹è¯•æˆ–è®¡åˆ’ç¨åé…ç½®ï¼Œè¿™é‡ŒåŒæ ·é€‰æ‹©è·³è¿‡ã€‚</li>
</ul>
<p><strong>æ“ä½œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>
<p>ä½¿ç”¨é”®ç›˜ <strong>æ–¹å‘é”® (ä¸‹)</strong> æ»šåŠ¨åˆ°åˆ—è¡¨çš„æœ€åº•éƒ¨ã€‚</p>
</li>
<li>
<p>é€‰ä¸­ <strong>Skip for now</strong>ã€‚</p>
<ul>
<li><em>æç¤ºä¿¡æ¯æ˜¾ç¤ºï¼šYou can add channels later via <code>openclaw channels add</code>ï¼ˆæ‚¨ç¨åå¯ä»¥é€šè¿‡å‘½ä»¤æ·»åŠ æ¸ é“ï¼‰ã€‚</em></li>
</ul>
</li>
<li>
<p>æŒ‰ <strong>å›è½¦é”® (Enter)</strong> ç¡®è®¤ã€‚</p>
</li>
</ol>
<h3 data-id="heading-8">2.4 é…ç½®æŠ€èƒ½å®‰è£…æ–¹å¼ (Configure Skills)</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80643ad6206c4d95a0f6d3c228e0ff78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWdvTGVl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770521540&amp;x-signature=F2HoAojz%2BgaY1fW%2FFGWKtjOvCho%3D" alt="Screenshot 2026-01-30 at 6.20.25â€¯PM.png" loading="lazy"/></p>
<p>ç³»ç»Ÿä¼šå¼•å¯¼æ‚¨é…ç½® "Skills"ï¼ˆæŠ€èƒ½/å·¥å…·ï¼‰çš„è¿è¡Œç¯å¢ƒã€‚OpenClaw ä¾èµ–å¤–éƒ¨å·¥å…·æ¥æ‰©å±•å…¶èƒ½åŠ›ã€‚</p>
<p><strong>æ“ä½œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>
<p><strong>Configure skills now?</strong> (ç°åœ¨é…ç½®æŠ€èƒ½ï¼Ÿ)</p>
<ul>
<li>é€‰ä¸­ <strong>Yes</strong> å¹¶æŒ‰å›è½¦ã€‚</li>
</ul>
</li>
<li>
<p><strong>Show Homebrew install command?</strong> (æ˜¾ç¤º Homebrew å®‰è£…å‘½ä»¤ï¼Ÿ)</p>
<ul>
<li>å¦‚æœæ‚¨çš„ç³»ç»Ÿå°šæœªå®‰è£… Homebrewï¼Œé€‰ä¸­ <strong>Yes</strong> æŸ¥çœ‹å‘½ä»¤ï¼›å¦åˆ™ç›´æ¥å›è½¦ç»§ç»­ã€‚</li>
</ul>
</li>
<li>
<p><strong>Preferred node manager for skill installs</strong> (é€‰æ‹©é¦–é€‰çš„ Node åŒ…ç®¡ç†å™¨)</p>
<ul>
<li>ä½¿ç”¨é”®ç›˜ <strong>æ–¹å‘é”®</strong> é€‰ä¸­ <strong>pnpm</strong>ï¼ˆæ¨èç”¨äºèŠ‚çœç£ç›˜ç©ºé—´å’ŒåŠ å¿«å®‰è£…é€Ÿåº¦ï¼‰ã€‚</li>
<li>æŒ‰ <strong>å›è½¦é”® (Enter)</strong> ç¡®è®¤ã€‚</li>
</ul>
</li>
<li>
<p>æš‚æ—¶ä¸é…ç½®Skillsï¼Œä¹‹åå¯ä»¥å†é…ç½®</p>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8fade4ef90245deb5beb1d9d1ce245e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWdvTGVl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770521540&amp;x-signature=wVVabWwt4iYk55hC3F0CkQ9ZLzI%3D" alt="Screenshot 2026-01-30 at 6.20.34â€¯PM.png" loading="lazy"/></p>
<h3 data-id="heading-9">2.5 è·³è¿‡å¤–éƒ¨å·¥å…· API Key é…ç½®</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/294b11f91233405b8512e7a530cdd00f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWdvTGVl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770521540&amp;x-signature=CaAiOvmp31NamHfguma%2FsQsuNz4%3D" alt="Screenshot 2026-01-30 at 6.21.15â€¯PM.png" loading="lazy"/></p>
<p>åœ¨é…ç½®å®ŒæŠ€èƒ½ç¯å¢ƒåï¼Œç³»ç»Ÿä¼šæ£€æµ‹åˆ°ä¸€äº›é¢„ç½®çš„å·¥å…·ï¼ˆå¦‚ Google Places, Notion ç­‰ï¼‰ï¼Œå¹¶è¯¢é—®æ˜¯å¦ç«‹å³è®¾ç½®å®ƒä»¬çš„ API Keyã€‚</p>
<p><strong>ç•Œé¢ä¿¡æ¯ï¼š</strong></p>
<p>ç³»ç»Ÿä¼šä¾æ¬¡åˆ—å‡ºå¦‚ä¸‹æœåŠ¡ï¼Œè¯¢é—®æ˜¯å¦è®¾ç½® Key (<code>Set ... API_KEY for ...?</code>)ï¼š</p>
<ul>
<li><code>GOOGLE_PLACES_API_KEY</code> (åœ°å›¾æœåŠ¡)</li>
<li><code>GEMINI_API_KEY</code> (Google AI)</li>
<li><code>NOTION_API_KEY</code> (ç¬”è®°æœåŠ¡)</li>
<li><code>OPENAI_API_KEY</code> (å›¾åƒç”Ÿæˆ/è¯­éŸ³è½¬æ–‡å­—)</li>
<li><code>ELEVENLABS_API_KEY</code> (è¯­éŸ³åˆæˆ)</li>
</ul>
<p><strong>æ“ä½œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>ä¸ºäº†ä¿æŒå¿«é€Ÿå¯åŠ¨æµç¨‹ï¼Œä¸”é¿å…å¤æ‚çš„å¯†é’¥ç”³è¯·è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç»Ÿä¸€é€‰æ‹©è·³è¿‡ã€‚</li>
<li>å¯¹äºæ¯ä¸€ä¸ªè¯¢é—®ï¼Œç¡®ä¿å…‰æ ‡åœç•™åœ¨ <strong>No</strong> ä¸Šã€‚</li>
<li>è¿ç»­æŒ‰ <strong>å›è½¦é”® (Enter)</strong> ï¼Œç›´åˆ°é€šè¿‡æ‰€æœ‰è¯¢é—®ã€‚</li>
</ol>
<h3 data-id="heading-10">2.6 å¯ç”¨ç³»ç»Ÿé’©å­ä¸è®°å¿†åŠŸèƒ½ (Enable Hooks)</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e15a1f10e90e4f54bc7ec466165ce880~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWdvTGVl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770521540&amp;x-signature=mFZKBH2v4vcfxAMvqI5tEOifxUQ%3D" alt="Screenshot 2026-01-30 at 6.21.44â€¯PM.png" loading="lazy"/></p>
<p>è¿™ä¸€æ­¥è‡³å…³é‡è¦ï¼ç³»ç»Ÿä¼šè¯¢é—®æ˜¯å¦å¯ç”¨ "Hooks"ï¼ˆé’©å­ï¼‰ï¼Œè¿™äº›åŠŸèƒ½å†³å®šäº† OpenClaw æ˜¯å¦å…·å¤‡è®°å¿†å’Œè‡ªåŠ¨åŒ–èƒ½åŠ›ã€‚</p>
<p><strong>é€‰é¡¹è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>boot-md</code>: <strong>å¯åŠ¨è„šæœ¬</strong>ã€‚å…è®¸ OpenClaw åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œ <code>BOOT.md</code> ä¸­å®šä¹‰çš„æŒ‡ä»¤ã€‚</li>
<li><code>command-logger</code>: <strong>å‘½ä»¤å®¡è®¡</strong>ã€‚å°†æ‰€æœ‰äº¤äº’è®°å½•ä¿å­˜åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿åç»­æŸ¥é˜…ã€‚</li>
<li><code>session-memory</code>: <strong>ä¼šè¯è®°å¿†</strong>ã€‚è¿™æ˜¯æ ¸å¿ƒåŠŸèƒ½ï¼å®ƒå…è®¸ OpenClaw åœ¨æ‚¨è¾“å…¥ <code>/new</code> å¼€å¯æ–°å¯¹è¯æ—¶ï¼Œä¾ç„¶ä¿ç•™ä¹‹å‰çš„ä¸Šä¸‹æ–‡è®°å¿†ï¼ˆContextï¼‰ã€‚</li>
</ul>
<p><strong>æ“ä½œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>
<p>ç¡®ä¿å±å¹•ä¸Šçš„ <strong>boot-md</strong>, <strong>command-logger</strong>, å’Œ <strong>session-memory</strong> è¿™ä¸‰é¡¹éƒ½è¢«é€‰ä¸­ï¼ˆæ˜¾ç¤ºä¸ºç»¿è‰²æ–¹å— <code>â– </code>ï¼‰ã€‚</p>
<ul>
<li><em>æç¤ºï¼šé€šå¸¸é»˜è®¤å·²å…¨é€‰ã€‚å¦‚æœæœªé€‰ä¸­ï¼Œè¯·ä½¿ç”¨æ–¹å‘é”®ç§»åŠ¨å…‰æ ‡ï¼ŒæŒ‰ç©ºæ ¼é”® (Space) è¿›è¡Œåˆ‡æ¢ã€‚</em></li>
</ul>
</li>
<li>
<p>ç¡®ä¿ <strong>Skip for now</strong> æœªè¢«é€‰ä¸­ï¼ˆæ˜¾ç¤ºä¸º <code>â–¡</code>ï¼‰ã€‚</p>
</li>
<li>
<p>æŒ‰ <strong>å›è½¦é”® (Enter)</strong> ç¡®è®¤ã€‚</p>
</li>
</ol>
<h3 data-id="heading-11">2.7 å®Œæˆé…ç½®å¹¶é€€å‡º (Finish)</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a773a33844fe4161b24b34d49f6ab271~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWdvTGVl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770521540&amp;x-signature=h%2Bafzw6c0xj8QgEgplkK1CWpE6Q%3D" alt="Screenshot 2026-01-30 at 6.23.06â€¯PM.png" loading="lazy"/></p>
<p>åˆå§‹åŒ–æµç¨‹çš„æœ€åä¸€æ­¥ï¼Œç³»ç»Ÿä¼šè¯¢é—®æ‚¨å¸Œæœ›å¦‚ä½• "å­µåŒ–" (Hatch) æ‚¨çš„åŠ©æ‰‹ï¼Œå³é¦–æ¬¡å¯åŠ¨çš„æ–¹å¼ã€‚</p>
<p><strong>ç•Œé¢ä¿¡æ¯ï¼š</strong></p>
<ul>
<li><strong>Hatch in TUI</strong>: åœ¨å½“å‰ç»ˆç«¯å¯åŠ¨æ–‡æœ¬äº¤äº’ç•Œé¢ï¼ˆæ¨èï¼‰ã€‚</li>
<li><strong>Open the Web UI</strong>: æ‰“å¼€ç½‘é¡µç‰ˆæ§åˆ¶å°ã€‚</li>
<li><strong>Do this later</strong>: ç¨åæ‰‹åŠ¨å¯åŠ¨ã€‚</li>
</ul>
<p><strong>æ“ä½œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>ä¸ºäº†ç¡®ä¿æˆ‘ä»¬å¯ä»¥å…ˆæ£€æŸ¥å®‰è£…çŠ¶æ€æˆ–ç¨åæ‰‹åŠ¨å¯åŠ¨æœåŠ¡ï¼Œè¿™é‡Œé€‰æ‹©é€€å‡ºå‘å¯¼ã€‚</li>
<li>ä½¿ç”¨é”®ç›˜ <strong>æ–¹å‘é”® (ä¸‹)</strong> é€‰ä¸­ <strong>Do this later</strong>ã€‚</li>
<li>æŒ‰ <strong>å›è½¦é”® (Enter)</strong> ç¡®è®¤ã€‚</li>
</ol>
<h2 data-id="heading-12">3. é…ç½® X-AIO æ¥å£ä¸æ¨¡å‹å‚æ•°</h2>
<p>ä¸ºäº†è®© OpenClaw èƒ½å¤ŸçœŸæ­£â€œæ€è€ƒâ€å’Œå›ç­”é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå…¶é…ç½®å¤§æ¨¡å‹æ¥å£ã€‚æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè‡ªåŠ¨åŒ–è„šæœ¬ï¼Œå¯ä»¥ä¸€é”®å°† X-AIO CodePlan çš„é«˜æ€§èƒ½æ¥å£é…ç½®åˆ°æ‚¨çš„ OpenClaw ä¸­ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> æ­¤æ­¥éª¤æ¶‰åŠå…³é”®å‚æ•°çš„æ‰‹åŠ¨é…ç½®ï¼Œç›´æ¥å½±å“ OpenClaw çš„è®°å¿†å’Œæ¨ç†èƒ½åŠ›ã€‚</p>
<p>åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<p><code>python3 &lt;(curl -fsSL https://cdn.x-aio.com/X-AIO/tools/openclaw_setup.py)</code></p>
<p>**<br/>
äº¤äº’å¼é…ç½®æŒ‡å—ï¼š**</p>
<p>è„šæœ¬è¿è¡Œè¿‡ç¨‹ä¸­ä¼šæç¤ºæ‚¨è¾“å…¥æˆ–ç¡®è®¤ä»¥ä¸‹ä¿¡æ¯ã€‚<strong>æ³¨æ„ï¼šä»¥ä¸‹å‚æ•°åº”æ ¹æ®æ‚¨å®é™…é€‰æ‹©çš„æ¨¡å‹æ¥å†³å®šã€‚å¦‚æœæ‚¨ä¸ç¡®å®šæˆ–ä¸æ‡‚å¦‚ä½•è®¾ç½®ï¼Œè¯·ç›´æ¥â€œç…§æŠ„â€ä»¥ä¸‹æ¨èå€¼ä»¥å®Œæˆé…ç½®ã€‚</strong></p>
<ol>
<li>
<p><strong>é€‰æ‹©ä¸»æ¨¡å‹ (Main Model)</strong> ï¼š</p>
<ul>
<li><strong>æ¨èé€‰æ‹©</strong>ï¼š<code>x-aio/MiniMax-M2.1</code></li>
<li><em>è¯´æ˜ï¼šè¯¥æ¨¡å‹åœ¨é€»è¾‘æ¨ç†å’Œé•¿æ–‡æœ¬å¤„ç†ä¸Šè¡¨ç°ä¼˜å¼‚ï¼Œé€‚åˆä½œä¸ºé»˜è®¤é€‰æ‹©ã€‚</em></li>
</ul>
</li>
<li>
<p><strong>é…ç½®ä¸Šä¸‹æ–‡çª—å£ (Context Window)</strong> ï¼š</p>
<ul>
<li><strong>æ¨èå€¼</strong>ï¼š<code>200000</code></li>
<li><em>è¯´æ˜ï¼šæ­¤æ•°å€¼å–å†³äºæ¨¡å‹çš„æœ€å¤§ä¸Šä¸‹æ–‡é™åˆ¶ã€‚å¯¹äº MiniMax ç­‰å¤§çª—å£æ¨¡å‹ï¼Œ200k æ˜¯ä¸ªä¸é”™çš„èµ·ç‚¹ã€‚</em></li>
</ul>
</li>
<li>
<p><strong>é…ç½®æœ€å¤§è¾“å‡º (Max Output)</strong> ï¼š</p>
<ul>
<li><strong>æ¨èå€¼</strong>ï¼š<code>32000</code></li>
<li><em>è¯´æ˜ï¼šç¡®ä¿åŠ©æ‰‹åœ¨ç”Ÿæˆé•¿ç¯‡å†…å®¹ï¼ˆå¦‚æ•™ç¨‹ã€ä»£ç ï¼‰æ—¶ä¸ä¼šä¸­æ–­ã€‚</em></li>
</ul>
</li>
<li>
<p><strong>é…ç½® Embedding æ¨¡å‹ (å…³é”®ï¼)</strong> ï¼š</p>
<ul>
<li><strong>å¿…é€‰</strong>ï¼š<code>Qwen3-VL-Embedding-8B</code></li>
<li><em>è­¦å‘Šï¼šæ­¤é€‰é¡¹ç›´æ¥å†³å®š OpenClaw è®°å¿†ç³»ç»Ÿçš„å·¥ä½œæƒ…å†µã€‚å¦‚æœæœªæ­£ç¡®é…ç½®ï¼ŒåŠ©æ‰‹å°†æ— æ³•é€šè¿‡è¯­ä¹‰æœç´¢æ‰¾å›ä¹‹å‰çš„è®°å¿†ã€‚</em></li>
</ul>
</li>
</ol>
<p><strong>é…ç½®å®Œæˆç¡®è®¤ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc099b000cd44c9d828824bc26135bff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWdvTGVl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770521540&amp;x-signature=XP42wqnPf%2Bd0MPnb5I3MOFhU950%3D" alt="Screenshot 2026-01-30 at 7.21.33â€¯PM.png" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“çœ‹åˆ° <code>âœ¨ é…ç½®å®Œæˆ!</code> ä¸”é…ç½®æ‘˜è¦ä¸­çš„å‚æ•°ä¸æ‚¨çš„è®¾ç½®ä¸€è‡´æ—¶ï¼Œå³è¡¨ç¤ºæ¥å£æ¥å…¥æˆåŠŸã€‚</p>
<h2 data-id="heading-13">4. éªŒè¯ä¸å¯åŠ¨</h2>
<p>é…ç½®å®Œæˆåï¼Œå»ºè®®æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤éªŒè¯ç¯å¢ƒå¹¶å¯åŠ¨åŠ©æ‰‹ã€‚</p>
<h3 data-id="heading-14">4.1 éªŒè¯é…ç½®</h3>
<p>è¿è¡Œ OpenClaw çš„åŒ»ç”Ÿç¨‹åºæ¥æ£€æŸ¥ç¯å¢ƒå¥åº·åº¦ï¼š</p>
<p><code>openclaw doctor</code></p>
<p>æŸ¥çœ‹å·²é…ç½®çš„æ¨¡å‹åˆ—è¡¨ï¼Œç¡®ä¿ x-aio æ¨¡å‹åœ¨åˆ—ï¼š</p>
<p><code>openclaw models list</code></p>
<h3 data-id="heading-15">4.2 å¯åŠ¨å¯¹è¯</h3>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç›´æ¥å¯åŠ¨ä¸€ä¸ªåä¸º "main" çš„ Agentï¼Œå¹¶å‘é€æµ‹è¯•æ¶ˆæ¯ï¼š</p>
<p><code>openclaw agent --agent main -m "hello"</code></p>
<p>ç°åœ¨ï¼ŒOpenClaw å·²ç»å‡†å¤‡å¥½ä¸ºæ‚¨æœåŠ¡äº†ï¼ç°åœ¨æ‚¨å¯ä»¥ç»§ç»­æ·±å…¥ç»‘å®šæ‚¨çš„OpenClawåˆ°æ‚¨çš„å„ç§IMç¨‹åºä¸­ã€‚æˆ‘ä¼šåœ¨å¸–å­åç»­è·Ÿè¿›è¡¥å……å¯¹æ¥åˆ°ä¸»æµIMçš„çš„æ–¹æ³•ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é›¶æ‹·è´ IPCï¼šç”¨å†…å­˜æ˜ å°„æ–‡ä»¶æ‰“é€  .NET é«˜æ€§èƒ½è¿›ç¨‹é—´é€šä¿¡é˜Ÿåˆ—]]></title>    <link>https://juejin.cn/post/7601101531921006638</link>    <guid>https://juejin.cn/post/7601101531921006638</guid>    <pubDate>2026-02-01T07:12:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601101531921006638" data-draft-id="7601757036485771274" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é›¶æ‹·è´ IPCï¼šç”¨å†…å­˜æ˜ å°„æ–‡ä»¶æ‰“é€  .NET é«˜æ€§èƒ½è¿›ç¨‹é—´é€šä¿¡é˜Ÿåˆ—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-01T07:12:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é»„è¯„æµ‹"/> <meta itemprop="url" content="https://juejin.cn/user/714024404135696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é›¶æ‹·è´ IPCï¼šç”¨å†…å­˜æ˜ å°„æ–‡ä»¶æ‰“é€  .NET é«˜æ€§èƒ½è¿›ç¨‹é—´é€šä¿¡é˜Ÿåˆ—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/714024404135696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é»„è¯„æµ‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T07:12:09.000Z" title="Sun Feb 01 2026 07:12:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ç°ä»£å¤šè¿›ç¨‹ç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰æ˜¯å®ç°æ¨¡å—è§£è€¦ã€èµ„æºéš”ç¦»å’Œæ¨ªå‘æ‰©å±•çš„å…³é”®æŠ€æœ¯ã€‚ä¼ ç»Ÿçš„ IPC æ–¹å¼å¦‚å‘½åç®¡é“ï¼ˆNamed Pipesï¼‰ã€TCP å¥—æ¥å­—æˆ– WCF è™½ç„¶æˆç†Ÿï¼Œä½†åœ¨é«˜ååã€ä½å»¶è¿Ÿåœºæ™¯ä¸‹å¾€å¾€å—é™äºå†…æ ¸ç¼“å†²åŒºå¤åˆ¶ã€åºåˆ—åŒ–å¼€é”€ç­‰é—®é¢˜ã€‚</p>
<p>å†…å­˜æ˜ å°„æ–‡ä»¶ï¼ˆMemory-Mapped Files, MMFï¼‰æä¾›äº†ä¸€ç§â€œé›¶æ‹·è´â€å…±äº«å†…å­˜æœºåˆ¶ï¼Œå…è®¸å¤šä¸ªè¿›ç¨‹ç›´æ¥è¯»å†™åŒä¸€å—ç‰©ç†å†…å­˜åŒºåŸŸï¼Œä»è€Œæå¤§æå‡é€šä¿¡æ•ˆç‡ã€‚æœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•åœ¨ .NETï¼ˆ.NET 6+ï¼‰ä¸­åˆ©ç”¨ <code>MemoryMappedFile</code> æ„å»ºä¸€ä¸ªçº¿ç¨‹å®‰å…¨ã€è·¨è¿›ç¨‹çš„ç¯å½¢é˜Ÿåˆ—ï¼ˆRing Bufferï¼‰ï¼Œç”¨äºé«˜æ€§èƒ½æ¶ˆæ¯ä¼ é€’ã€‚</p>
<hr/>
<h2 data-id="heading-1">å†…å­˜æ˜ å°„æ–‡ä»¶ç®€ä»‹</h2>
<p>.NET æä¾›äº† <code>System.IO.MemoryMappedFiles</code> å‘½åç©ºé—´ï¼Œå…¶ä¸­æ ¸å¿ƒç±»å‹åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>MemoryMappedFile</code>ï¼šè¡¨ç¤ºå†…å­˜æ˜ å°„æ–‡ä»¶å¯¹è±¡ã€‚</li>
<li><code>MemoryMappedViewAccessor</code> / <code>MemoryMappedViewStream</code>ï¼šç”¨äºè®¿é—®æ˜ å°„åŒºåŸŸã€‚</li>
</ul>
<p>é€šè¿‡åˆ›å»º<strong>å‘½å</strong>çš„å†…å­˜æ˜ å°„æ–‡ä»¶ï¼Œä¸åŒè¿›ç¨‹å¯æ‰“å¼€åŒä¸€ä¸ªæ˜ å°„åŒºåŸŸï¼Œå®ç°å…±äº«å†…å­˜é€šä¿¡ã€‚</p>
<hr/>
<h2 data-id="heading-2">è®¾è®¡æ€è·¯ï¼šåŸºäºç¯å½¢ç¼“å†²åŒºçš„ IPC é˜Ÿåˆ—</h2>
<p>æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªå›ºå®šå¤§å°çš„ç¯å½¢ç¼“å†²åŒºï¼ŒåŒ…å«ä»¥ä¸‹å…³é”®å…ƒç´ ï¼š</p>
<ul>
<li><strong>ç¼“å†²åŒºæ•°æ®åŒº</strong>ï¼šå­˜å‚¨å®é™…æ¶ˆæ¯ï¼ˆå­—èŠ‚æ•°ç»„ï¼‰ã€‚</li>
<li><strong>å¤´æŒ‡é’ˆï¼ˆHeadï¼‰</strong> ï¼šä¸‹ä¸€ä¸ªè¦è¯»å–çš„ä½ç½®ã€‚</li>
<li><strong>å°¾æŒ‡é’ˆï¼ˆTailï¼‰</strong> ï¼šä¸‹ä¸€ä¸ªè¦å†™å…¥çš„ä½ç½®ã€‚</li>
<li><strong>æ¶ˆæ¯é•¿åº¦å‰ç¼€</strong>ï¼šæ¯ä¸ªæ¶ˆæ¯å‰é™„åŠ  4 å­—èŠ‚é•¿åº¦ï¼ˆint32ï¼‰ï¼Œä¾¿äºè§£æè¾¹ç•Œã€‚</li>
<li><strong>åŒæ­¥åŸè¯­</strong>ï¼šä½¿ç”¨å‘½åäº’æ–¥ä½“ï¼ˆMutexï¼‰æˆ–ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ä¿è¯å¤šè¿›ç¨‹å¹¶å‘å®‰å…¨ã€‚</li>
</ul>
<p>ä¸ºç®€åŒ–ï¼Œæœ¬æ–‡ä½¿ç”¨ <strong>äº’æ–¥é” + è‡ªæ—‹é‡è¯•</strong> å®ç°åŸºæœ¬åŒæ­¥ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ç»“åˆäº‹ä»¶é€šçŸ¥ä¼˜åŒ–æ€§èƒ½ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-3">æ ¸å¿ƒå®ç°</h2>
<h3 data-id="heading-4">1. å®šä¹‰å…±äº«å†…å­˜å¸ƒå±€</h3>
<p>å‡è®¾æœ€å¤§æ¶ˆæ¯å¤§å°ä¸º 1KBï¼Œé˜Ÿåˆ—æ€»å®¹é‡ä¸º 1MBï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> MAX_MESSAGE_SIZE = <span class="hljs-number">1024</span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> BUFFER_SIZE = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>; <span class="hljs-comment">// 1MB</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> HEADER_SIZE = <span class="hljs-keyword">sizeof</span>(<span class="hljs-built_in">int</span>); <span class="hljs-comment">// æ¶ˆæ¯é•¿åº¦å‰ç¼€</span>
</code></pre>
<p>å…±äº«å†…å­˜ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[Head (8 bytes)]</span><span class="hljs-selector-attr">[Tail (8 bytes)]</span><span class="hljs-selector-attr">[Data Buffer (BUFFER_SIZE)]</span>
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šä½¿ç”¨ <code>long</code>ï¼ˆ8 å­—èŠ‚ï¼‰å­˜å‚¨æŒ‡é’ˆï¼Œé¿å… 32/64 ä½å¯¹é½é—®é¢˜ã€‚</p>
</blockquote>
<h3 data-id="heading-5">2. åˆ›å»º/æ‰“å¼€å†…å­˜æ˜ å°„æ–‡ä»¶</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MmfIpcQueue</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MemoryMappedFile _mmf;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MemoryMappedViewAccessor _accessor;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> Mutex _mutex;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span> _mutexName;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">long</span> HEAD_OFFSET = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">long</span> TAIL_OFFSET = <span class="hljs-number">8</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">long</span> DATA_OFFSET = <span class="hljs-number">16</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MmfIpcQueue</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name</span>)</span>
    {
        _mmf = MemoryMappedFile.CreateOrOpen(name, DATA_OFFSET + BUFFER_SIZE);
        _accessor = _mmf.CreateViewAccessor();
        _mutexName = <span class="hljs-string">$"MMF_IPC_MUTEX_<span class="hljs-subst">{name}</span>"</span>;
        _mutex = <span class="hljs-keyword">new</span> Mutex(<span class="hljs-literal">false</span>, _mutexName);
    }
}
</code></pre>
<h3 data-id="heading-6">3. å†™å…¥æ¶ˆæ¯ï¼ˆEnqueueï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">public bool TryEnqueue(byte<span class="hljs-section">[]</span> message)
{
    if (message.Length &gt; MAX_MESSAGE_SIZE)
        throw new ArgumentException("Message too large")<span class="hljs-comment">;</span>

    _mutex.WaitOne()<span class="hljs-comment">;</span>
    try
    {
        long <span class="hljs-attr">head</span> = _accessor.ReadInt64(HEAD_<span class="hljs-literal">OFF</span>SET)<span class="hljs-comment">;</span>
        long <span class="hljs-attr">tail</span> = _accessor.ReadInt64(TAIL_<span class="hljs-literal">OFF</span>SET)<span class="hljs-comment">;</span>

        int <span class="hljs-attr">required</span> = HEADER_SIZE + message.Length<span class="hljs-comment">;</span>
        long <span class="hljs-attr">nextTail</span> = (tail + required) % BUFFER_SIZE<span class="hljs-comment">;</span>

        // æ£€æŸ¥æ˜¯å¦è¿½ä¸Š headï¼ˆç¼“å†²åŒºæ»¡ï¼‰
        if (<span class="hljs-attr">nextTail</span> == head &amp;&amp; tail != head)
            return false<span class="hljs-comment">; // é˜Ÿåˆ—æ»¡</span>

        // å†™å…¥é•¿åº¦ + æ•°æ®
        _accessor.Write(DATA_OFFSET + tail, message.Length)<span class="hljs-comment">;</span>
        _accessor.WriteArray(DATA_OFFSET + tail + HEADER_SIZE, message, 0, message.Length)<span class="hljs-comment">;</span>

        // æ›´æ–° tail
        _accessor.WriteInt64(TAIL_OFFSET, nextTail)<span class="hljs-comment">;</span>
        return true<span class="hljs-comment">;</span>
    }
    finally
    {
        _mutex.ReleaseMutex()<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h3 data-id="heading-7">4. è¯»å–æ¶ˆæ¯ï¼ˆDequeueï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">public bool TryDequeue(out byte<span class="hljs-section">[]</span>? message)
{
    <span class="hljs-attr">message</span> = null<span class="hljs-comment">;</span>
    _mutex.WaitOne()<span class="hljs-comment">;</span>
    try
    {
        long <span class="hljs-attr">head</span> = _accessor.ReadInt64(HEAD_<span class="hljs-literal">OFF</span>SET)<span class="hljs-comment">;</span>
        long <span class="hljs-attr">tail</span> = _accessor.ReadInt64(TAIL_<span class="hljs-literal">OFF</span>SET)<span class="hljs-comment">;</span>

        if (<span class="hljs-attr">head</span> == tail)
            return false<span class="hljs-comment">; // é˜Ÿåˆ—ç©º</span>

        int <span class="hljs-attr">length</span> = _accessor.ReadInt32(DATA_<span class="hljs-literal">OFF</span>SET + head)<span class="hljs-comment">;</span>
        <span class="hljs-attr">message</span> = new byte[length]<span class="hljs-comment">;</span>
        _accessor.ReadArray(DATA_OFFSET + head + HEADER_SIZE, message, 0, length)<span class="hljs-comment">;</span>

        long <span class="hljs-attr">nextHead</span> = (head + HEADER_SIZE + length) % BUFFER_SIZE<span class="hljs-comment">;</span>
        _accessor.WriteInt64(HEAD_OFFSET, nextHead)<span class="hljs-comment">;</span>

        return true<span class="hljs-comment">;</span>
    }
    finally
    {
        _mutex.ReleaseMutex()<span class="hljs-comment">;</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-8">ä½¿ç”¨ç¤ºä¾‹</h2>
<p><strong>è¿›ç¨‹ Aï¼ˆç”Ÿäº§è€…ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">using</span> var queue = <span class="hljs-keyword">new</span> <span class="hljs-built_in">MmfIpcQueue</span>(<span class="hljs-string">"MyQueue"</span>);
queue.<span class="hljs-built_in">TryEnqueue</span>(Encoding.UTF8.<span class="hljs-built_in">GetBytes</span>(<span class="hljs-string">"Hello from Process A!"</span>));
</code></pre>
<p><strong>è¿›ç¨‹ Bï¼ˆæ¶ˆè´¹è€…ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">using</span> var queue = <span class="hljs-keyword">new</span> <span class="hljs-built_in">MmfIpcQueue</span>(<span class="hljs-string">"MyQueue"</span>);
<span class="hljs-keyword">if</span> (queue.<span class="hljs-built_in">TryDequeue</span>(out var msg))
{
    <span class="hljs-built_in">Console</span>.<span class="hljs-built_in">WriteLine</span>(Encoding.UTF8.<span class="hljs-built_in">GetString</span>(msg));
}
</code></pre>
<hr/>
<h2 data-id="heading-9">æ€§èƒ½ä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-10">ä¼˜åŠ¿</h3>
<ul>
<li><strong>é›¶æ‹·è´</strong>ï¼šæ¶ˆæ¯ç›´æ¥åœ¨å…±äº«å†…å­˜ä¸­è¯»å†™ï¼Œæ— å†…æ ¸ç¼“å†²åŒºå¤åˆ¶ã€‚</li>
<li><strong>ä½å»¶è¿Ÿ</strong>ï¼šå¾®ç§’çº§é€šä¿¡å»¶è¿Ÿã€‚</li>
<li><strong>è·¨è¯­è¨€å…¼å®¹</strong>ï¼šåªè¦çº¦å®šå†…å­˜å¸ƒå±€ï¼ŒC/C++ã€Rust ç­‰ä¹Ÿå¯æ¥å…¥ã€‚</li>
</ul>
<h3 data-id="heading-11">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>åŒæ­¥å¼€é”€</strong>ï¼šé¢‘ç¹åŠ é”ä¼šå½±å“ååã€‚å¯è€ƒè™‘æ— é”ç¯å½¢ç¼“å†²åŒºï¼ˆéœ€åŸå­æ“ä½œæ”¯æŒï¼‰ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šç¡®ä¿æ‰€æœ‰è¿›ç¨‹é€€å‡ºåæ¸…ç† MMFï¼ˆWindows ä¸‹é‡å¯å¯è‡ªåŠ¨å›æ”¶ï¼‰ã€‚</li>
<li><strong>å¼‚å¸¸å®‰å…¨</strong>ï¼šè¿›ç¨‹å´©æºƒå¯èƒ½å¯¼è‡´äº’æ–¥ä½“æœªé‡Šæ”¾ï¼Œéœ€åŠ å…¥è¶…æ—¶æˆ–çœ‹é—¨ç‹—æœºåˆ¶ã€‚</li>
<li><strong>å†…å­˜å¯¹é½</strong>ï¼šç¡®ä¿è¯»å†™åç§»æŒ‰å¹³å°è¦æ±‚å¯¹é½ï¼ˆx64 é€šå¸¸ 8 å­—èŠ‚å¯¹é½ï¼‰ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-12">æ‰©å±•æ–¹å‘</h2>
<ul>
<li>æ”¯æŒå¤šç”Ÿäº§è€…/å¤šæ¶ˆè´¹è€…ï¼ˆMPMCï¼‰ã€‚</li>
<li>å¼•å…¥äº‹ä»¶é€šçŸ¥ï¼ˆå¦‚ <code>EventWaitHandle</code>ï¼‰é¿å…è½®è¯¢ã€‚</li>
<li>æ·»åŠ  CRC æ ¡éªŒæˆ–ç‰ˆæœ¬å·é˜²æ­¢æ•°æ®é”™ä¹±ã€‚</li>
<li>å°è£…ä¸º <code>IProducerConsumerCollection&lt;T&gt;</code> ä»¥å…¼å®¹ <code>BlockingCollection</code>ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-13">ç»“è¯­</h2>
<p>å†…å­˜æ˜ å°„æ–‡ä»¶ä¸º .NET å¼€å‘è€…æä¾›äº†ä¸€æ¡é€šå¾€æè‡´ IPC æ€§èƒ½çš„è·¯å¾„ã€‚è™½ç„¶å®ç°æ¯”ç®¡é“æˆ–å¥—æ¥å­—å¤æ‚ï¼Œä½†åœ¨é«˜é¢‘äº¤æ˜“ã€å®æ—¶æ—¥å¿—èšåˆã€æ¸¸æˆæœåŠ¡å™¨ç­‰åœºæ™¯ä¸­ï¼Œå…¶ä½å»¶è¿Ÿã€é«˜ååçš„ä¼˜åŠ¿æ— å¯æ›¿ä»£ã€‚åˆç†è®¾è®¡åŒæ­¥æœºåˆ¶ä¸å†…å­˜å¸ƒå±€ï¼Œä½ å°±èƒ½æ„å»ºå‡ºåª²ç¾ C++ çš„é«˜æ•ˆè·¨è¿›ç¨‹é€šä¿¡ç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å€¾å¬æ•°æ®çš„å£°éŸ³ï¼šç»™æ•°æ®åˆ†æåˆå­¦è€…çš„æ¸©é¦¨å»ºè®®]]></title>    <link>https://juejin.cn/post/7601077290681991220</link>    <guid>https://juejin.cn/post/7601077290681991220</guid>    <pubDate>2026-02-01T07:22:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601077290681991220" data-draft-id="7601175299011100687" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å€¾å¬æ•°æ®çš„å£°éŸ³ï¼šç»™æ•°æ®åˆ†æåˆå­¦è€…çš„æ¸©é¦¨å»ºè®®"/> <meta itemprop="keywords" content="æ•°æ®åˆ†æ,ç¨‹åºå‘˜,æ•°æ®æŒ–æ˜"/> <meta itemprop="datePublished" content="2026-02-01T07:22:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å€¾å¬æ•°æ®çš„å£°éŸ³ï¼šç»™æ•°æ®åˆ†æåˆå­¦è€…çš„æ¸©é¦¨å»ºè®®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T07:22:07.000Z" title="Sun Feb 01 2026 07:22:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æåˆ° <strong>â€œæ•°æ®åˆ†æâ€</strong>ï¼Œä½ çš„è„‘æµ·é‡Œæµ®ç°çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å¯†å¯†éº»éº»çš„Excelè¡¨æ ¼ï¼Œæ˜¯å¤æ‚çš„Pythonä»£ç ï¼Œè¿˜æ˜¯ä»¤äººçœ¼èŠ±ç¼­ä¹±çš„ä»ªè¡¨ç›˜ï¼Ÿ</p>
<p>å¾ˆå¤šæƒ³è¸å…¥è¿™ä¸ªè¡Œä¸šçš„æ–°äººï¼Œå¾€å¾€ä¸€ä¸Šæ¥å°±é™·å…¥äº†å·¥å…·çš„å­¦ä¹ ä¸­ã€‚</p>
<p>ä½†å®é™…ä¸Šï¼Œå·¥å…·åªæ˜¯æ‰‹æ®µã€‚åœ¨æˆä¸ºä¸€åâ€œæ•°æ®å·¥åŒ â€ä¹‹å‰ï¼Œä½ é¦–å…ˆéœ€è¦æˆä¸ºä¸€åâ€œæ•°æ®æ€è€ƒè€…â€ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬æŠ›å¼€æ¯ç‡¥çš„å®šä¹‰ï¼Œä¸€èµ·èŠèŠæ•°æ®åˆ†æçš„æœ¬è´¨ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œä»¥åŠæˆ‘ä»¬è¯¥å¦‚ä½•ä»é›¶å¼€å§‹ï¼ŒåŸ¹å…»ä¸€ç§èƒ½å¤Ÿâ€œé€è§†â€æ•°æ®çš„æ€ç»´æ–¹å¼ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ ä»â€œåŸææ–™â€åˆ°â€œæ™ºæ…§â€çš„ç‚¼é‡‘æœ¯</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦æ‰“ç ´ä¸€ä¸ªè¯¯åŒºï¼š<strong>æ•°æ®ä¸ç­‰äºæ™ºæ…§</strong>ã€‚</p>
<p>åœ¨è¿™ä¸ªæ—¶ä»£ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨æœ‰æ„æ— æ„åœ°åˆ›é€ æ•°æ®ã€‚ä½†åŸå§‹çš„æ•°æ®ï¼ˆDataï¼‰å°±åƒæ˜¯ä¸€å †æœªç»åŠ å·¥çš„åŸææ–™ï¼Œæ¯”å¦‚ä¸€å †æµ‹é‡çš„æ•°å­—ã€ä¸€ä¸²ç»Ÿè®¡çš„æ¸…å•ã€‚å®ƒä»¬æœ¬èº«æ˜¯å†°å†·çš„ï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚</p>
<p>æ•°æ®åˆ†æå¸ˆçš„å·¥ä½œï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€åœº <strong>â€œç‚¼é‡‘æœ¯â€</strong>ï¼š</p>
<ol>
<li><strong>æ•°æ® -&gt; ä¿¡æ¯</strong>ï¼š æˆ‘ä»¬æŠŠåŸææ–™æ•´ç†ã€æ ¼å¼åŒ–ï¼Œè®©å®ƒå˜å¾—å¯è¯»ï¼Œå®ƒå°±æˆäº†â€œä¿¡æ¯â€ã€‚</li>
<li><strong>ä¿¡æ¯ -&gt; çŸ¥è¯†</strong>ï¼š æˆ‘ä»¬æŠŠä¿¡æ¯èå…¥åˆ°å…·ä½“çš„èƒŒæ™¯ã€ç»éªŒä¸­å»ç†è§£ï¼Œå®ƒå°±å˜æˆäº†â€œçŸ¥è¯†â€ã€‚</li>
<li><strong>çŸ¥è¯† -&gt; æ™ºæ…§</strong>ï¼š å½“æˆ‘ä»¬åˆ©ç”¨è¿™äº›çŸ¥è¯†å»é€‰æ‹©æ­£ç¡®çš„è¡ŒåŠ¨æ–¹æ¡ˆæ—¶ï¼Œè¿™å°±å‡åä¸ºäº†â€œæ™ºæ…§â€ã€‚</li>
</ol>
<p>æ‰€ä»¥ï¼Œä¸è¦ä¸ºäº†åˆ†æè€Œåˆ†æã€‚æˆ‘ä»¬æœ€ç»ˆçš„ç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š<strong>è¿ç”¨æ™ºæ…§ï¼Œåšå‡ºæ­£ç¡®çš„å†³ç­–</strong>ã€‚</p>
<h2 data-id="heading-1">äºŒã€ åˆ«è®©ç›´è§‰å’Œæ•°æ®æ‰“æ¶</h2>
<p>ä½œä¸ºåˆå­¦è€…ï¼Œä½ å¯èƒ½ä¼šçº ç»“ï¼šåšå†³å®šæ—¶ï¼Œæ˜¯è¯¥å¬ç»éªŒç›´è§‰çš„ï¼Œè¿˜æ˜¯å¬æ•°æ®çš„ï¼Ÿ</p>
<p>è¯ºè´å°”å¥–å¾—ä¸»ä¸¹å°¼å°”Â·å¡å°¼æ›¼æå‡ºè¿‡â€œä¸¤ç§æ€ç»´ç³»ç»Ÿâ€ï¼š</p>
<ul>
<li>ç³»ç»Ÿ1ï¼ˆç›´è§‰ï¼‰ï¼š å¿«é€Ÿã€è‡ªåŠ¨ã€åå°„æ€§çš„ã€‚</li>
<li>ç³»ç»Ÿ2ï¼ˆåˆ†æï¼‰ï¼š ç¼“æ…¢ã€è´¹åŠ›ã€éœ€è¦æ·±æ€ç†Ÿè™‘çš„ã€‚</li>
</ul>
<p>æ•°æ®åˆ†æå¹¶ä¸æ˜¯è¦å½»åº•å¦å®šä½ çš„ç›´è§‰ï¼ŒæŠŠä½ å˜æˆä¸€ä¸ªå†·è¡€çš„è®¡ç®—æœºå™¨ã€‚</p>
<p>æ°æ°ç›¸åï¼Œæ•°æ®åˆ†æçš„ç›®çš„æ˜¯æŠŠç›´è§‰å’Œåˆ†æç»“åˆèµ·æ¥ã€‚</p>
<p>ç›´è§‰èƒ½è®©ä½ å¯¹ç¯å¢ƒå’Œå…³é”®é—®é¢˜ä¿æŒæ•é”ï¼Œå¸®ä½ å¿«é€Ÿç­›é€‰æ–¹å‘ï¼›è€Œæ•°æ®åˆ†æåˆ™æ˜¯è°ƒç”¨ <strong>â€œç³»ç»Ÿ2â€</strong>ï¼Œåœ¨è¿™ä¸ªæ–¹å‘ä¸Šè¿›è¡Œæ·±æ€ç†Ÿè™‘çš„éªŒè¯ã€‚</p>
<p>æ²¡æœ‰ç›´è§‰ï¼Œä½ å¯èƒ½ä¼šè¿·å¤±åœ¨æµ·é‡æ— å…³æ•°æ®ä¸­ï¼›æ²¡æœ‰æ•°æ®ï¼Œä½ çš„ç›´è§‰å¯èƒ½ä¼šæŠŠä½ å¸¦å…¥åè§çš„æ·±æ¸Šã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€ åƒåŒ»ç”Ÿä¸€æ ·æ€è€ƒï¼šäº”å±‚åˆ†ææ³•</h2>
<p>é‚£ä¹ˆï¼Œæ‹¿åˆ°æ•°æ®åå…·ä½“è¯¥æ€ä¹ˆåšï¼Ÿæˆ‘ä»¬å¯ä»¥å€Ÿç”¨ä¸€ä¸ªéå¸¸ç”ŸåŠ¨çš„æ¯”å–»ï¼šæŠŠè‡ªå·±æƒ³è±¡æˆä¸€ååŒ»ç”Ÿã€‚</p>
<p>å½“ç—…äººï¼ˆä¸šåŠ¡é—®é¢˜ï¼‰æ¥åˆ°ä½ é¢å‰æ—¶ï¼Œæ•°æ®åˆ†æçš„è¿‡ç¨‹å°±åƒæ˜¯ä¸€æ¬¡è¯Šç–—ï¼š</p>
<ol>
<li><strong>æè¿°æ€§åˆ†æ</strong>ï¼ˆå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼‰ï¼š
å°±åƒåŒ»ç”Ÿé¦–å…ˆè¦è§‚å¯Ÿç—‡çŠ¶ã€æµ‹é‡ä½“æ¸©ã€‚ä½ éœ€è¦ä»æ•°æ®ä¸­æ‰¾å‡ºæ—¶é—´ã€åœ°ç‚¹ã€äººç‰©å’Œäº‹ä»¶ï¼Œè¿˜åŸäº‹å®çš„çœŸç›¸ã€‚</li>
<li><strong>æ¨ç†æ€§åˆ†æ</strong>ï¼ˆå…¶ä»–æƒ…å†µå¦‚ä½•ï¼Ÿï¼‰ï¼š
åŒ»ç”Ÿä¼šå‚è€ƒå…¶ä»–ç±»ä¼¼çš„ç—…ä¾‹ã€‚ä½ ä¹Ÿéœ€è¦åŸºäºå·²æœ‰çš„æ•°æ®ï¼Œå»æ¨æµ‹é‚£äº›æœªè¢«è®°å½•çš„æ•°æ®ç‰¹å¾ã€‚</li>
<li><strong>è¯Šæ–­æ€§åˆ†æ</strong>ï¼ˆä¸ºä»€ä¹ˆå‘ç”Ÿï¼Ÿï¼‰ï¼š
è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚åŒ»ç”Ÿè¦å¯»æ‰¾ç—…å› ï¼Œä½ è¦é€è¿‡è¡¨è±¡ï¼Œå‘ç°éšè—åœ¨æ•°æ®ä¹‹ä¸‹çš„å…³è”å’Œå› ç´ ã€‚ä½†è¦åˆ‡è®°ï¼šç›¸å…³æ€§å¼ºä¸ä»£è¡¨æœ‰å› æœå…³ç³»ï¼Œä¸è¦è½»æ˜“ä¸‹ç»“è®ºã€‚</li>
<li><strong>é¢„æµ‹æ€§åˆ†æ</strong>ï¼ˆæ¥ä¸‹æ¥ä¼šæ€æ ·ï¼Ÿï¼‰ï¼š
åŒ»ç”Ÿä¼šæ ¹æ®ç—…æƒ…å‘å±•é¢„æµ‹åæœã€‚ä½ è¦é€šè¿‡è§‚å¯Ÿæ•°æ®çš„è¶‹åŠ¿å’Œæ¨¡å¼ï¼Œå»ºç«‹æ¨¡å‹æ¥é¢„æµ‹æœªæ¥ã€‚</li>
<li><strong>æŒ‡å¯¼æ€§åˆ†æ</strong>ï¼ˆæˆ‘ä»¬è¯¥åšä»€ä¹ˆï¼Ÿï¼‰ï¼š
æœ€åï¼ŒåŒ»ç”Ÿè¦å¼€è¯æˆ–æ‰‹æœ¯ã€‚è¿™ä¹Ÿæ˜¯æ•°æ®åˆ†æçš„è½è„šç‚¹â€”â€”ä½ éœ€è¦ç»™å‡ºå…·ä½“çš„è¡ŒåŠ¨æ–¹æ¡ˆï¼Œå¹¶é¢„ä¼°è¿™äº›æ–¹æ¡ˆä¼šå¸¦æ¥ä»€ä¹ˆç»“æœã€‚</li>
</ol>
<p>ä»â€œçœ‹ç—‡çŠ¶â€åˆ°â€œå¼€å¤„æ–¹â€ï¼Œè¿™æ‰æ˜¯å®Œæ•´çš„æ•°æ®åˆ†æé—­ç¯ã€‚</p>
<h2 data-id="heading-3">å››ã€ åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œå…ˆå­¦ä¼šæé—®</h2>
<p>å¾ˆå¤šæ–°äººæ‹¿åˆ°æ•°æ®å°±æ€¥ç€ç”»å›¾ã€è·‘æ¨¡å‹ï¼Œç»“æœå¾€å¾€æ˜¯åšäº†ä¸€å †æ¼‚äº®çš„å›¾è¡¨ï¼Œå´å›ç­”ä¸äº†è€æ¿çš„ä¸€ä¸ªç®€å•é—®é¢˜ã€‚</p>
<p>åœ¨å¤„ç†æ•°æ®ä¹‹å‰ï¼ˆè¿™å±äºâ€œæ¶ˆè´¹æ•°æ®â€çš„é˜¶æ®µï¼‰ï¼Œè¯·åŠ¡å¿…å…ˆåœä¸‹æ¥ï¼Œå¸¦ç€æ‰¹åˆ¤æ€§æ€ç»´é—®è‡ªå·±å…«ä¸ªé—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨<code>6W2H</code>æ¥æ¦‚æ‹¬ï¼š</p>
<ul>
<li><code>Why</code>ï¼ˆä¸ºä»€ä¹ˆï¼‰ï¼š ä½ æ‰¾è¿™äº›æ•°æ®æ˜¯ä¸ºäº†åšå†³ç­–ï¼Œè¿˜æ˜¯ä»…ä»…ä¸ºäº†ç»™å·²ç»åšå‡ºçš„å†³å®šæ‰¾å€Ÿå£ï¼Ÿ</li>
<li><code>Where</code>ï¼ˆå“ªé‡Œï¼‰ï¼š æ•°æ®æºå¤´æ˜¯å“ªï¼Ÿå¦‚æœæ¥æºä¸æ˜ï¼Œåƒä¸‡åˆ«ç”¨å®ƒæ¥åšå†³ç­–ã€‚</li>
<li><code>Who</code>ï¼ˆè°ï¼‰ï¼š è°åœ¨ç»´æŠ¤è¿™äº›æ•°æ®ï¼Ÿä»–ä»¬æƒ³å–æ‚¦è°ï¼Ÿè¿™å†³å®šäº†æ•°æ®çš„ç«‹åœºã€‚</li>
<li><code>When</code>ï¼ˆä½•æ—¶ï¼‰ï¼š ä¸Šä¸€æ¬¡æ›´æ–°æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿè¿‡æ—¶çš„æ•°æ®æ¯”æ²¡æœ‰æ•°æ®æ›´å¯æ€•ã€‚</li>
<li><code>Which</code>ï¼ˆå“ªä¸ªï¼‰ï¼š å‡ ç™¾ä¸ªå˜é‡é‡Œï¼Œå“ªå‡ ä¸ªæ‰æ˜¯æœ€é‡è¦çš„ï¼Ÿ</li>
<li><code>What</code>ï¼ˆå®šä¹‰ï¼‰ï¼š é‡è¦å˜é‡çš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿç»†èŠ‚å†³å®šæˆè´¥ã€‚</li>
<li><code>How</code>ï¼ˆå¦‚ä½•ï¼‰ï¼š æ•°æ®æ˜¯å¦‚ä½•è¢«æ”¶é›†å’Œæµ‹é‡çš„ï¼Ÿæµ‹é‡æ–¹å¼çš„å·®å¼‚ä¼šå¯¼è‡´å·¨å¤§çš„ç°å®åå·®ã€‚</li>
<li><code>How much</code>ï¼ˆå¤šå°‘ï¼‰ï¼š ä½ æœ‰å¤šå°‘æ—¶é—´æ¥æ€è€ƒè¿™äº›æ•°æ®ï¼Ÿ</li>
</ul>
<p>è¿™å…«ä¸ªé—®é¢˜ï¼Œæ˜¯ä½ çš„â€œé¿é›·é’ˆâ€ï¼Œèƒ½å¸®ä½ è¿‡æ»¤æ‰åƒåœ¾æ•°æ®ï¼Œç›´å‡»æ ¸å¿ƒã€‚</p>
<h2 data-id="heading-4">äº”ã€ ä¼šåˆ†æï¼Œæ›´è¦ä¼šè®²æ•…äº‹</h2>
<p>æœ€åï¼Œåˆ«å¿˜äº†æ•°æ®åˆ†æçš„â€œæœ€åä¸€å…¬é‡Œâ€ï¼šå‘ˆç°æ•°æ®ã€‚</p>
<p>ä½ çš„åˆ†æç»“æœå¯èƒ½æ˜¯ä¸€å †å¤æ‚çš„æ•°å­—æˆ–é€»è¾‘ï¼Œä½†ä½ çš„è§‚ä¼—ï¼ˆè€æ¿ã€å®¢æˆ·ã€åŒäº‹ï¼‰å¯èƒ½å¹¶æ²¡æœ‰é‚£ä¹ˆå¤šæ—¶é—´å»æ¶ˆåŒ–ã€‚</p>
<ul>
<li><strong>ä»æ•°å­—åˆ°æ•…äº‹</strong>ï¼š ä¸è¦åªæ‰”ç»™åˆ«äººä¸€å¼ Excelè¡¨ã€‚ä½ éœ€è¦æŠŠä¸€ä¸ªä¸ªå­¤ç«‹çš„â€œå‘ç°â€ï¼Œä¸²è”æˆä¸€ä¸ªè¿è´¯çš„â€œæ•°æ®æ•…äº‹â€ã€‚</li>
<li><strong>çœ‹äººä¸‹èœç¢Ÿ</strong>ï¼š é¢å¯¹ç†Ÿäººå’Œç”Ÿäººï¼Œé¢å¯¹éœ€è¦è¡ŒåŠ¨çš„ç»“æœè¿˜æ˜¯è§‚å¿µçš„è½¬å˜ï¼Œä½ çš„å‘ˆç°æ–¹å¼ï¼ˆå›¾è¡¨ã€ä»ªè¡¨ç›˜ã€PPTï¼‰éƒ½åº”è¯¥ä¸åŒã€‚</li>
</ul>
<p>å¥½çš„æ•°æ®åˆ†æå¸ˆï¼Œä¸ä»…è¦æœ‰ç†æ€§çš„å¤´è„‘ï¼Œè¿˜è¦æœ‰æ„Ÿæ€§çš„å™è¿°èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-5">ç»“è¯­</h2>
<p>æ•°æ®åˆ†ææ˜¯ä¸€é¡¹æŠ€èƒ½ï¼Œæ›´æ˜¯ä¸€ç§ç”Ÿæ´»æ–¹å¼ã€‚</p>
<p>å®ƒä¸ä»…å­˜åœ¨äºä¸“ä¸šçš„å·¥ä½œå²—ä½ä¸Šï¼Œä¹Ÿå­˜åœ¨äºå…¬å…±é¢†åŸŸï¼ˆäº†è§£ç¤¾ä¼šé—®é¢˜ï¼‰å’Œç§äººé¢†åŸŸï¼ˆé‡åŒ–è‡ªæˆ‘æˆé•¿ï¼‰ä¸­ã€‚</p>
<p>ä»ä»Šå¤©å¼€å§‹ï¼Œè¯•ç€ä¸å†æŠŠæ•°æ®çœ‹ä½œæ¯ç‡¥çš„æ•°å­—ï¼Œè€Œæ˜¯æŠŠå®ƒçœ‹ä½œå¾…æŒ–æ˜çš„â€œåŸææ–™â€ã€‚è¿ç”¨ä½ çš„ä¸¤ç§æ€ç»´ç³»ç»Ÿï¼ŒåƒåŒ»ç”Ÿä¸€æ ·å»è¯Šæ–­é—®é¢˜ï¼Œåƒä¾¦æ¢ä¸€æ ·å»ç›˜é—®æ¥æºï¼Œæœ€ååƒè®²æ•…äº‹çš„äººä¸€æ ·å»å‘ˆç°ç»“æœã€‚</p>
<p>å½“ä½ èƒ½åšåˆ°è¿™äº›æ—¶ï¼Œä½ å°±ä¼šå‘ç°ï¼šæ•°æ®ï¼ŒçœŸçš„ä¼šè¯´è¯ã€‚</p>
<p>æœ¬æ–‡çš„æ ¸å¿ƒå†…å®¹æ¥æºäºã€Šä¼šè¯´è¯çš„æ•°æ®ã€‹ä¸€ä¹¦ï¼Œå¸Œæœ›èƒ½ä¸ºä½ çš„æ•°æ®åˆ†æä¹‹è·¯ç‚¹äº®ä¸€ç›ç¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[7å¤©ç”¨Goä»é›¶å®ç°åˆ†å¸ƒå¼ç¼“å­˜--Day4 ä¸€è‡´æ€§å“ˆå¸Œ]]></title>    <link>https://juejin.cn/post/7601101531921039406</link>    <guid>https://juejin.cn/post/7601101531921039406</guid>    <pubDate>2026-02-01T07:15:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601101531921039406" data-draft-id="7601101531921023022" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="7å¤©ç”¨Goä»é›¶å®ç°åˆ†å¸ƒå¼ç¼“å­˜--Day4 ä¸€è‡´æ€§å“ˆå¸Œ"/> <meta itemprop="keywords" content="åç«¯,Go"/> <meta itemprop="datePublished" content="2026-02-01T07:15:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Way2top"/> <meta itemprop="url" content="https://juejin.cn/user/1458388314893300"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            7å¤©ç”¨Goä»é›¶å®ç°åˆ†å¸ƒå¼ç¼“å­˜--Day4 ä¸€è‡´æ€§å“ˆå¸Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1458388314893300/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Way2top
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T07:15:06.000Z" title="Sun Feb 01 2026 07:15:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬ç³»åˆ—æ–‡ç« å…¨éƒ¨å‚è€ƒè‡ªæå®¢å…”å…”çš„ã€Š7å¤©ç”¨Goä»é›¶å®ç°åˆ†å¸ƒå¼ç¼“å­˜GeeCacheã€‹ï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgeektutu.com%2Fpost%2Fgeecache.html" title="https://link.juejin.cn/?target=https%3A%2F%2Fgeektutu.com%2Fpost%2Fgeecache.html" target="_blank">geektutu.com/post/geecacâ€¦</a>Â ä¸‹é¢çš„å†…å®¹å‡å‚è€ƒè‡ªè¯¥æ–‡ç« ï¼ŒåŒæ—¶ç»“åˆäº†æˆ‘è‡ªå·±å­¦ä¹ è¿‡ç¨‹ä¸­çš„æ€è€ƒï¼Œå¦‚æœå­˜åœ¨é—®é¢˜è¿˜è¯·å¤§å®¶å¤šå¤šæŒ‡æ•™ã€‚</p>
<p>å¤‡æ³¨ï¼šDay4 çš„å†…å®¹åŸæ–‡è®²çš„ä¹Ÿå¾ˆé€šä¿—æ˜“æ‡‚ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†éƒ½æ˜¯åŸæ–‡å†…å®¹æ¬è¿‡æ¥çš„ï¼ŒåŠ ä¸Šäº†ä¸€ç‚¹æˆ‘çš„ç†è§£å’Œè§£é‡Šåœ¨é‡Œé¢ã€‚</p>
<h2 data-id="heading-0">Day4 ä¸€è‡´æ€§å“ˆå¸Œ</h2>
<h3 data-id="heading-1">1 ä¸ºä»€ä¹ˆè¦ç”¨ä¸€è‡´æ€§å“ˆå¸Œ</h3>
<p>ä»Šå¤©æˆ‘ä»¬è¦å®ç°çš„æ˜¯ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æ˜¯ GeeCache ä»å•èŠ‚ç‚¹èµ°å‘åˆ†å¸ƒå¼èŠ‚ç‚¹çš„ä¸€ä¸ªé‡è¦çš„ç¯èŠ‚ã€‚é‚£ä½ å¯èƒ½è¦é—®äº†ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æ˜¯å•¥ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Ÿè¿™å’Œåˆ†å¸ƒå¼æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</p>
<h4 data-id="heading-2">1.1 æˆ‘è¯¥è®¿é—®è°</h4>
<p>å¯¹äºåˆ†å¸ƒå¼ç¼“å­˜æ¥è¯´ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹æ¥æ”¶åˆ°è¯·æ±‚ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹å¹¶æ²¡æœ‰å­˜å‚¨ç¼“å­˜å€¼ï¼Œé‚£ä¹ˆå®ƒé¢ä¸´çš„éš¾é¢˜æ˜¯ï¼Œä»è°é‚£è·å–æ•°æ®ï¼Ÿè‡ªå·±ï¼Œè¿˜æ˜¯èŠ‚ç‚¹1, 2, 3, 4â€¦ ã€‚å‡è®¾åŒ…æ‹¬è‡ªå·±åœ¨å†…ä¸€å…±æœ‰ 10 ä¸ªèŠ‚ç‚¹ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç”±è¯¥èŠ‚ç‚¹ä»æ•°æ®æºè·å–æ•°æ®ã€‚</p>
<p>å‡è®¾ç¬¬ä¸€æ¬¡éšæœºé€‰å–äº†èŠ‚ç‚¹ 1 ï¼ŒèŠ‚ç‚¹ 1 ä»æ•°æ®æºè·å–åˆ°æ•°æ®çš„åŒæ—¶ç¼“å­˜è¯¥æ•°æ®ï¼›é‚£ç¬¬äºŒæ¬¡ï¼Œåªæœ‰ 1/10 çš„å¯èƒ½æ€§å†æ¬¡é€‰æ‹©èŠ‚ç‚¹ 1, æœ‰ 9/10 çš„æ¦‚ç‡é€‰æ‹©äº†å…¶ä»–èŠ‚ç‚¹ï¼Œå¦‚æœé€‰æ‹©äº†å…¶ä»–èŠ‚ç‚¹ï¼Œå°±æ„å‘³ç€éœ€è¦å†ä¸€æ¬¡ä»æ•°æ®æºè·å–æ•°æ®ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªæ“ä½œæ˜¯å¾ˆè€—æ—¶çš„ã€‚è¿™æ ·åšï¼Œä¸€æ˜¯ç¼“å­˜æ•ˆç‡ä½ï¼ŒäºŒæ˜¯å„ä¸ªèŠ‚ç‚¹ä¸Šå­˜å‚¨ç€ç›¸åŒçš„æ•°æ®ï¼Œæµªè´¹äº†å¤§é‡çš„å­˜å‚¨ç©ºé—´ã€‚</p>
<p>é‚£æœ‰ä»€ä¹ˆåŠæ³•ï¼Œå¯¹äºç»™å®šçš„ keyï¼Œæ¯ä¸€æ¬¡éƒ½é€‰æ‹©åŒä¸€ä¸ªèŠ‚ç‚¹å‘¢ï¼Ÿä½¿ç”¨ hash ç®—æ³•ä¹Ÿèƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ã€‚é‚£æŠŠ key çš„æ¯ä¸€ä¸ªå­—ç¬¦çš„ ASCII ç åŠ èµ·æ¥ï¼Œå†é™¤ä»¥ 10 å–ä½™æ•°å¯ä»¥å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œè¿™å¯ä»¥è®¤ä¸ºæ˜¯è‡ªå®šä¹‰çš„ hash ç®—æ³•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aee648254aaa4aca87faef760bcf8baa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F5MnRvcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770534906&amp;x-signature=tTuuY1Zo4%2FtuMFeneXyc5dy0o8g%3D" alt="" loading="lazy"/></p>
<p>ä»ä¸Šé¢çš„å›¾å¯ä»¥çœ‹åˆ°ï¼Œä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ä»»æ„æ—¶åˆ»è¯·æ±‚æŸ¥æ‰¾é”® <code>Tom</code> å¯¹åº”çš„å€¼ï¼Œéƒ½ä¼šåˆ†é…ç»™èŠ‚ç‚¹ 2ï¼Œæœ‰æ•ˆåœ°è§£å†³äº†ä¸Šè¿°çš„é—®é¢˜ã€‚</p>
<h4 data-id="heading-3">1.2 èŠ‚ç‚¹æ•°é‡å˜åŒ–äº†æ€ä¹ˆåŠ</h4>
<p>ç®€å•æ±‚å– Hash å€¼è§£å†³äº†ç¼“å­˜æ€§èƒ½çš„é—®é¢˜ï¼Œä½†æ˜¯æ²¡æœ‰è€ƒè™‘èŠ‚ç‚¹æ•°é‡å˜åŒ–çš„åœºæ™¯ã€‚å‡è®¾ï¼Œç§»é™¤äº†å…¶ä¸­ä¸€å°èŠ‚ç‚¹ï¼Œåªå‰©ä¸‹ 9 ä¸ªï¼Œé‚£ä¹ˆä¹‹å‰ <code>hash(key) % 10</code> å˜æˆäº† <code>hash(key) % 9</code>ï¼Œä¹Ÿå°±æ„å‘³ç€å‡ ä¹ç¼“å­˜å€¼å¯¹åº”çš„èŠ‚ç‚¹éƒ½å‘ç”Ÿäº†æ”¹å˜ã€‚å³å‡ ä¹æ‰€æœ‰çš„ç¼“å­˜å€¼éƒ½å¤±æ•ˆäº†ã€‚èŠ‚ç‚¹åœ¨æ¥æ”¶åˆ°å¯¹åº”çš„è¯·æ±‚æ—¶ï¼Œå‡éœ€è¦é‡æ–°å»æ•°æ®æºè·å–æ•°æ®ï¼Œå®¹æ˜“å¼•èµ· <code>ç¼“å­˜é›ªå´©</code>ã€‚</p>
<blockquote>
<p>ç¼“å­˜é›ªå´©ï¼šç¼“å­˜åœ¨åŒä¸€æ—¶åˆ»å…¨éƒ¨å¤±æ•ˆï¼Œé€ æˆç¬æ—¶DBè¯·æ±‚é‡å¤§ã€å‹åŠ›éª¤å¢ï¼Œå¼•èµ·é›ªå´©ã€‚å¸¸å› ä¸ºç¼“å­˜æœåŠ¡å™¨å®•æœºï¼Œæˆ–ç¼“å­˜è®¾ç½®äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´å¼•èµ·ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-4">2 ç®—æ³•åŸç†</h3>
<h4 data-id="heading-5">2.1 ç®—æ³•æ­¥éª¤</h4>
<p>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å°† key æ˜ å°„åˆ° 2^32 çš„ç©ºé—´ä¸­ï¼Œå°†è¿™ä¸ªæ•°å­—é¦–å°¾ç›¸è¿ï¼Œå½¢æˆä¸€ä¸ªç¯ã€‚</p>
<ul>
<li>è®¡ç®—èŠ‚ç‚¹/æœºå™¨(é€šå¸¸ä½¿ç”¨èŠ‚ç‚¹çš„åç§°ã€ç¼–å·å’Œ IP åœ°å€)çš„å“ˆå¸Œå€¼ï¼Œæ”¾ç½®åœ¨ç¯ä¸Šã€‚</li>
<li>è®¡ç®— key çš„å“ˆå¸Œå€¼ï¼Œæ”¾ç½®åœ¨ç¯ä¸Šï¼Œé¡ºæ—¶é’ˆå¯»æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±æ˜¯åº”é€‰å–çš„èŠ‚ç‚¹/æœºå™¨ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc560f44b97b416daa9746c023cab2c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F5MnRvcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770534906&amp;x-signature=DN%2BMT3BAXw2UdzUJZlXtjUePx%2Bs%3D" alt="" loading="lazy"/></p>
<p>ç¯ä¸Šæœ‰ peer2ï¼Œpeer4ï¼Œpeer6 ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œ<code>key11</code>ï¼Œ<code>key2</code>ï¼Œ<code>key27</code> å‡æ˜ å°„åˆ° peer2ï¼Œ<code>key23</code> æ˜ å°„åˆ° peer4ã€‚æ­¤æ—¶ï¼Œå¦‚æœæ–°å¢èŠ‚ç‚¹/æœºå™¨ peer8ï¼Œå‡è®¾å®ƒæ–°å¢ä½ç½®å¦‚å›¾æ‰€ç¤ºï¼Œé‚£ä¹ˆåªæœ‰ <code>key27</code> ä» peer2 è°ƒæ•´åˆ° peer8ï¼Œå…¶ä½™çš„æ˜ å°„å‡æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Œåœ¨æ–°å¢/åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œåªéœ€è¦é‡æ–°å®šä½è¯¥èŠ‚ç‚¹é™„è¿‘çš„ä¸€å°éƒ¨åˆ†æ•°æ®ï¼Œè€Œä¸éœ€è¦é‡æ–°å®šä½æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œè¿™å°±è§£å†³äº†ä¸Šè¿°çš„é—®é¢˜ã€‚</p>
<h4 data-id="heading-6">2.2 æ•°æ®å€¾æ–œé—®é¢˜</h4>
<p>å¦‚æœæœåŠ¡å™¨çš„èŠ‚ç‚¹è¿‡å°‘ï¼Œå®¹æ˜“å¼•èµ· key çš„å€¾æ–œã€‚ä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„ peer2ï¼Œpeer4ï¼Œpeer6 åˆ†å¸ƒåœ¨ç¯çš„ä¸ŠåŠéƒ¨åˆ†ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯ç©ºçš„ã€‚é‚£ä¹ˆæ˜ å°„åˆ°ç¯ä¸‹åŠéƒ¨åˆ†çš„ key éƒ½ä¼šè¢«åˆ†é…ç»™ peer2ï¼Œkey è¿‡åº¦å‘ peer2 å€¾æ–œï¼Œç¼“å­˜èŠ‚ç‚¹é—´è´Ÿè½½ä¸å‡ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†è™šæ‹ŸèŠ‚ç‚¹çš„æ¦‚å¿µï¼Œä¸€ä¸ªçœŸå®èŠ‚ç‚¹å¯¹åº”å¤šä¸ªè™šæ‹ŸèŠ‚ç‚¹ã€‚</p>
<p>å‡è®¾ 1 ä¸ªçœŸå®èŠ‚ç‚¹å¯¹åº” 3 ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œé‚£ä¹ˆ peer1 å¯¹åº”çš„è™šæ‹ŸèŠ‚ç‚¹æ˜¯ peer1-1ã€ peer1-2ã€ peer1-3ï¼ˆé€šå¸¸ä»¥æ·»åŠ ç¼–å·çš„æ–¹å¼å®ç°ï¼‰ï¼Œå…¶ä½™èŠ‚ç‚¹ä¹Ÿä»¥ç›¸åŒçš„æ–¹å¼æ“ä½œã€‚</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼Œè®¡ç®—è™šæ‹ŸèŠ‚ç‚¹çš„ Hash å€¼ï¼Œæ”¾ç½®åœ¨ç¯ä¸Šã€‚</li>
<li>ç¬¬äºŒæ­¥ï¼Œè®¡ç®— key çš„ Hash å€¼ï¼Œåœ¨ç¯ä¸Šé¡ºæ—¶é’ˆå¯»æ‰¾åˆ°åº”é€‰å–çš„è™šæ‹ŸèŠ‚ç‚¹ï¼Œä¾‹å¦‚æ˜¯ peer2-1ï¼Œé‚£ä¹ˆå°±å¯¹åº”çœŸå®èŠ‚ç‚¹ peer2ã€‚</li>
</ul>
<p>è™šæ‹ŸèŠ‚ç‚¹æ‰©å……äº†èŠ‚ç‚¹çš„æ•°é‡ï¼Œè§£å†³äº†èŠ‚ç‚¹è¾ƒå°‘çš„æƒ…å†µä¸‹æ•°æ®å®¹æ˜“å€¾æ–œçš„é—®é¢˜ã€‚è€Œä¸”ä»£ä»·éå¸¸å°ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªå­—å…¸(map)ç»´æŠ¤çœŸå®èŠ‚ç‚¹ä¸è™šæ‹ŸèŠ‚ç‚¹çš„æ˜ å°„å…³ç³»å³å¯ã€‚</p>
<p>å¹¶ä¸”è™šæ‹ŸèŠ‚ç‚¹è¿˜æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ä¼˜ç‚¹ï¼Œå°±æ˜¯å¯ä»¥æ ¹æ®æœåŠ¡å™¨æ€§èƒ½çš„ä¸åŒåˆ†é…è™šæ‹ŸèŠ‚ç‚¹ä¸ªæ•°ï¼Œæ€§èƒ½å¥½çš„å°±å¤šåˆ†é…å‡ ä¸ªï¼Œæ€§èƒ½å·®ä¸€ç‚¹çš„å°±å°‘åˆ†é…å‡ ä¸ªâ€”â€”è¿™å°±æ˜¯<strong>åŠ æƒä¸€è‡´æ€§å“ˆå¸Œ</strong>ï¼Œå¾ˆå¤šåˆ†å¸ƒå¼ç¼“å­˜å’Œè´Ÿè½½å‡è¡¡éƒ½åœ¨ç”¨è¿™æ‹›ã€‚</p>
<h3 data-id="heading-7">3 Goè¯­è¨€å®ç°</h3>
<p>æˆ‘ä»¬åœ¨ geecache ç›®å½•ä¸‹æ–°å»º package <code>consistenthash</code>ï¼Œç”¨æ¥å®ç°ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> consistenthash

<span class="hljs-keyword">import</span> (
        <span class="hljs-string">"hash/crc32"</span>
        <span class="hljs-string">"sort"</span>
        <span class="hljs-string">"strconv"</span>
)

<span class="hljs-keyword">type</span> Hash <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(data []<span class="hljs-type">byte</span>)</span></span> <span class="hljs-type">uint32</span>

<span class="hljs-keyword">type</span> Map <span class="hljs-keyword">struct</span> {
        hash     Hash           <span class="hljs-comment">// Hash å‡½æ•°</span>
        replicas <span class="hljs-type">int</span>            <span class="hljs-comment">// æ¯ä¸ªçœŸå®èŠ‚ç‚¹è¦ç”Ÿæˆå¤šå°‘ä¸ªè™šæ‹ŸèŠ‚ç‚¹</span>
        keys     []<span class="hljs-type">int</span>          <span class="hljs-comment">// æ‰€æœ‰è™šæ‹ŸèŠ‚ç‚¹çš„å“ˆå¸Œå€¼ï¼Œæ’å¥½åºåå½¢æˆä¸€ä¸ªâ€œç¯â€</span>
        hashMap  <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">string</span> <span class="hljs-comment">// è™šæ‹ŸèŠ‚ç‚¹ä¸çœŸå®èŠ‚ç‚¹çš„æ˜ å°„è¡¨ï¼ˆkeyä¸ºè™šæ‹ŸèŠ‚ç‚¹çš„hashå€¼ï¼Œvalueä¸ºçœŸå®èŠ‚ç‚¹çš„åç§°ï¼‰</span>
}

<span class="hljs-comment">// New ç”¨äºåˆ›å»º Map å®ä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">New</span><span class="hljs-params">(replicas <span class="hljs-type">int</span>, fn Hash)</span></span> *Map {
        m := &amp;Map{
                replicas: replicas,
                hash:     fn,
                hashMap:  <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">string</span>),
        }
        <span class="hljs-comment">// å¦‚æœç”¨æˆ·æœªæŒ‡å®š Hash å‡½æ•°ï¼Œé»˜è®¤ä½¿ç”¨ crc32.ChecksumIEEE</span>
        <span class="hljs-keyword">if</span> m.hash == <span class="hljs-literal">nil</span> {
                m.hash = crc32.ChecksumIEEE
        }
        <span class="hljs-keyword">return</span> m
}
</code></pre>
<ul>
<li>
<p>å®šä¹‰äº†å‡½æ•°ç±»å‹ <code>Hash</code>ï¼Œé‡‡å–ä¾èµ–æ³¨å…¥çš„æ–¹å¼ï¼Œå…è®¸ç”¨äºæ›¿æ¢æˆè‡ªå®šä¹‰çš„ Hash å‡½æ•°ï¼Œä¹Ÿæ–¹ä¾¿æµ‹è¯•æ—¶æ›¿æ¢ï¼Œé»˜è®¤ä¸º <code>crc32.ChecksumIEEE</code> ç®—æ³•ã€‚</p>
</li>
<li>
<p><code>Map</code> æ˜¯ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„ä¸»æ•°æ®ç»“æ„ï¼ŒåŒ…å« 4 ä¸ªæˆå‘˜å˜é‡ï¼š</p>
<ul>
<li>hashï¼šHash å‡½æ•°</li>
<li>replicasï¼šè¡¨ç¤ºæ¯ä¸ªçœŸå®èŠ‚ç‚¹ç”Ÿæˆå¤šå°‘ä¸ªè™šæ‹ŸèŠ‚ç‚¹</li>
<li>keysï¼šæ‰€æœ‰è™šæ‹ŸèŠ‚ç‚¹çš„å“ˆå¸Œå€¼ï¼Œæ˜¯ä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼Œç”¨äºæ¨¡æ‹Ÿâ€œç¯â€</li>
<li>hashMapï¼šè™šæ‹ŸèŠ‚ç‚¹ä¸çœŸå®èŠ‚ç‚¹çš„æ˜ å°„è¡¨ï¼ˆkeyä¸ºè™šæ‹ŸèŠ‚ç‚¹çš„hashå€¼ï¼Œvalueä¸ºçœŸå®èŠ‚ç‚¹çš„åç§°ï¼‰</li>
</ul>
</li>
<li>
<p>æ„é€ å‡½æ•° <code>New()</code> å…è®¸è‡ªå®šä¹‰è™šæ‹ŸèŠ‚ç‚¹ä¸ªæ•°å’Œ Hash å‡½æ•°</p>
</li>
</ul>
<p>æ¥ä¸‹æ¥å®ç°æ·»åŠ  çœŸå®èŠ‚ç‚¹/æœºå™¨ çš„ <code>Add()</code> æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Add ç”¨äºæ·»åŠ  çœŸå®èŠ‚ç‚¹/æœºå™¨</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Map)</span></span> Add(keys ...<span class="hljs-type">string</span>) {
        <span class="hljs-keyword">for</span> _, key := <span class="hljs-keyword">range</span> keys {
                <span class="hljs-comment">// åˆ›å»º replicas ä¸ªè™šæ‹ŸèŠ‚ç‚¹</span>
                <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; m.replicas; i++ {
                        hash := <span class="hljs-type">int</span>(m.hash([]<span class="hljs-type">byte</span>(strconv.Itoa(i) + key)))
                        m.keys = <span class="hljs-built_in">append</span>(m.keys, hash)
                        m.hashMap[hash] = key
                }
        }
        sort.Ints(m.keys)
}
</code></pre>
<ul>
<li>
<p><code>Add</code> å‡½æ•°å…è®¸ä¼ å…¥ 0 æˆ– å¤šä¸ªçœŸå®èŠ‚ç‚¹çš„åç§°ã€‚</p>
</li>
<li>
<p>å¯¹æ¯ä¸€ä¸ªçœŸå®èŠ‚ç‚¹ <code>key</code>ï¼Œå¯¹åº”åˆ›å»º <code>m.replicas</code> ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œè™šæ‹ŸèŠ‚ç‚¹çš„åç§°æ˜¯ï¼š<code>strconv.Itoa(i) + key</code>ï¼Œå³é€šè¿‡æ·»åŠ ç¼–å·çš„æ–¹å¼åŒºåˆ†ä¸åŒè™šæ‹ŸèŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨ <code>m.hash()</code> è®¡ç®—è™šæ‹ŸèŠ‚ç‚¹çš„å“ˆå¸Œå€¼ï¼Œä½¿ç”¨ <code>append(m.keys, hash)</code> æ·»åŠ åˆ°ç¯ä¸Šã€‚</p>
</li>
<li>
<p>åœ¨ <code>hashMap</code> ä¸­å¢åŠ è™šæ‹ŸèŠ‚ç‚¹å’ŒçœŸå®èŠ‚ç‚¹çš„æ˜ å°„å…³ç³»ã€‚</p>
</li>
<li>
<p>æœ€åä¸€æ­¥ï¼Œç¯ä¸Šçš„å“ˆå¸Œå€¼æ’åºã€‚</p>
</li>
</ul>
<p>æœ€åä¸€æ­¥å®ç°é€‰æ‹©èŠ‚ç‚¹çš„ <code>Get()</code> æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Get ç”¨äºé€‰æ‹©èŠ‚ç‚¹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Map)</span></span> Get(key <span class="hljs-type">string</span>) <span class="hljs-type">string</span> {
        <span class="hljs-comment">// å¦‚æœç¯ä¸Šæ²¡æœ‰èŠ‚ç‚¹å¯ä»¥ç”¨æ¥å­˜å‚¨ç¼“å­˜ï¼Œç›´æ¥è¿”å›</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(m.keys) == <span class="hljs-number">0</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        }
        hash := <span class="hljs-type">int</span>(m.hash([]<span class="hljs-type">byte</span>(key))) <span class="hljs-comment">// è®¡ç®— key çš„ hashå€¼</span>
        <span class="hljs-comment">// äºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ª &gt;= hash çš„è™šæ‹ŸèŠ‚ç‚¹ä½ç½®ï¼Œå¹¶æŠŠä¸‹æ ‡è¿”å›ç»™ idx</span>
        idx := sort.Search(<span class="hljs-built_in">len</span>(m.keys), <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> {
                <span class="hljs-keyword">return</span> m.keys[i] &gt;= hash
        })

        <span class="hljs-comment">// è¿”å›åŒ¹é…åˆ°çš„èŠ‚ç‚¹çš„çœŸå®åå­—</span>
        <span class="hljs-keyword">return</span> m.hashMap[m.keys[idx%<span class="hljs-built_in">len</span>(m.keys)]]
}
</code></pre>
<ul>
<li>é€‰æ‹©èŠ‚ç‚¹å°±éå¸¸ç®€å•äº†ï¼Œç¬¬ä¸€æ­¥ï¼Œè®¡ç®— key çš„å“ˆå¸Œå€¼ã€‚</li>
<li>ç¬¬äºŒæ­¥ï¼Œé¡ºæ—¶é’ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„è™šæ‹ŸèŠ‚ç‚¹çš„ä¸‹æ ‡ <code>idx</code>ï¼Œä» m.keys ä¸­è·å–åˆ°å¯¹åº”çš„å“ˆå¸Œå€¼ã€‚å¦‚æœ <code>idx == len(m.keys)</code>ï¼Œè¯´æ˜åº”é€‰æ‹© <code>m.keys[0]</code>ï¼Œå› ä¸º <code>m.keys</code> æ˜¯ä¸€ä¸ªç¯çŠ¶ç»“æ„ï¼Œæ‰€ä»¥ç”¨å–ä½™æ•°çš„æ–¹å¼æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚</li>
<li>ç¬¬ä¸‰æ­¥ï¼Œé€šè¿‡ <code>hashMap</code> æ˜ å°„å¾—åˆ°çœŸå®çš„èŠ‚ç‚¹ã€‚</li>
</ul>
<p>è‡³æ­¤ï¼Œæ•´ä¸ªä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å°±å®ç°å®Œæˆäº†ã€‚</p>
<h3 data-id="heading-8">4 æµ‹è¯•</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// geecacge/consistenthash/consistenthash_test.go</span>
<span class="hljs-keyword">package</span> consistenthash

<span class="hljs-keyword">import</span> (
        <span class="hljs-string">"strconv"</span>
        <span class="hljs-string">"testing"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestHashing</span><span class="hljs-params">(t *testing.T)</span></span> {
        <span class="hljs-comment">// è¿™é‡Œä¼ å…¥äº†ä¸€ä¸ªâ€œå‡hashâ€ï¼Œæ–¹ä¾¿æµ‹è¯•</span>
        hash := New(<span class="hljs-number">3</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(key []<span class="hljs-type">byte</span>)</span></span> <span class="hljs-type">uint32</span> {
                i, _ := strconv.Atoi(<span class="hljs-type">string</span>(key))
                <span class="hljs-keyword">return</span> <span class="hljs-type">uint32</span>(i)
        })

        <span class="hljs-comment">// åŠ å…¥3ä¸ªçœŸå®èŠ‚ç‚¹</span>
        <span class="hljs-comment">// ç”Ÿæˆè™šæ‹ŸèŠ‚ç‚¹åå¾—åˆ°çš„å“ˆå¸Œç¯ï¼š2, 4, 6, 12, 14, 16, 22, 24, 26</span>
        hash.Add(<span class="hljs-string">"6"</span>, <span class="hljs-string">"4"</span>, <span class="hljs-string">"2"</span>)

        testCases := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>{
                <span class="hljs-string">"2"</span>:  <span class="hljs-string">"2"</span>,
                <span class="hljs-string">"11"</span>: <span class="hljs-string">"2"</span>,
                <span class="hljs-string">"23"</span>: <span class="hljs-string">"4"</span>,
                <span class="hljs-string">"27"</span>: <span class="hljs-string">"2"</span>,
        }

        <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> testCases {
                <span class="hljs-keyword">if</span> hash.Get(k) != v {
                        t.Errorf(<span class="hljs-string">"Asking for %s, should have yielded %s"</span>, k, v)
                }
        }

        <span class="hljs-comment">// åœ¨ç¯ä¸Šæ·»åŠ è™šæ‹ŸèŠ‚ç‚¹ 8, 18, 28</span>
        hash.Add(<span class="hljs-string">"8"</span>)

        <span class="hljs-comment">// 27 åº”è¯¥æ˜ å°„åˆ° 8</span>
        testCases[<span class="hljs-string">"27"</span>] = <span class="hljs-string">"8"</span>

        <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> testCases {
                <span class="hljs-keyword">if</span> hash.Get(k) != v {
                        t.Errorf(<span class="hljs-string">"Asking for %s, should have yielded %s"</span>, k, v)
                }
        }

}
</code></pre>
<p>å¦‚æœè¦è¿›è¡Œæµ‹è¯•ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ˜ç¡®åœ°çŸ¥é“æ¯ä¸€ä¸ªä¼ å…¥çš„ key çš„å“ˆå¸Œå€¼ï¼Œé‚£ä½¿ç”¨é»˜è®¤çš„ <code>crc32.ChecksumIEEE</code> ç®—æ³•æ˜¾ç„¶è¾¾ä¸åˆ°ç›®çš„ã€‚æ‰€ä»¥åœ¨è¿™é‡Œä½¿ç”¨äº†è‡ªå®šä¹‰çš„ Hash ç®—æ³•ã€‚è‡ªå®šä¹‰çš„ Hash ç®—æ³•åªå¤„ç†æ•°å­—ï¼Œä¼ å…¥å­—ç¬¦ä¸²è¡¨ç¤ºçš„æ•°å­—ï¼Œè¿”å›å¯¹åº”çš„æ•°å­—å³å¯ã€‚</p>
<ul>
<li>ä¸€å¼€å§‹ï¼Œæœ‰ 2/4/6 ä¸‰ä¸ªçœŸå®èŠ‚ç‚¹ï¼Œå¯¹åº”çš„è™šæ‹ŸèŠ‚ç‚¹çš„å“ˆå¸Œå€¼æ˜¯ 02/12/22ã€04/14/24ã€06/16/26ã€‚</li>
<li>é‚£ä¹ˆç”¨ä¾‹ 2/11/23/27 é€‰æ‹©çš„è™šæ‹ŸèŠ‚ç‚¹åˆ†åˆ«æ˜¯ 02/12/24/02ï¼Œä¹Ÿå°±æ˜¯çœŸå®èŠ‚ç‚¹ 2/2/4/2ã€‚</li>
<li>æ·»åŠ ä¸€ä¸ªçœŸå®èŠ‚ç‚¹ 8ï¼Œå¯¹åº”è™šæ‹ŸèŠ‚ç‚¹çš„å“ˆå¸Œå€¼æ˜¯ 08/18/28ï¼Œæ­¤æ—¶ï¼Œç”¨ä¾‹ 27 å¯¹åº”çš„è™šæ‹ŸèŠ‚ç‚¹ä» <code>02</code> å˜æ›´ä¸º <code>28</code>ï¼Œå³çœŸå®èŠ‚ç‚¹ 8ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å‰ç»ç¯‡ã€‘HTTP/3 ä¸ WebTransportï¼šWeb å®æ—¶é€šè®¯çš„æœªæ¥]]></title>    <link>https://juejin.cn/post/7601076976440459304</link>    <guid>https://juejin.cn/post/7601076976440459304</guid>    <pubDate>2026-02-01T03:25:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601076976440459304" data-draft-id="7600957412129406991" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å‰ç»ç¯‡ã€‘HTTP/3 ä¸ WebTransportï¼šWeb å®æ—¶é€šè®¯çš„æœªæ¥"/> <meta itemprop="keywords" content="å‰ç«¯,ç½‘ç»œåè®®"/> <meta itemprop="datePublished" content="2026-02-01T03:25:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å°å°æ ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1081575170131006"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å‰ç»ç¯‡ã€‘HTTP/3 ä¸ WebTransportï¼šWeb å®æ—¶é€šè®¯çš„æœªæ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575170131006/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å°å°æ ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T03:25:03.000Z" title="Sun Feb 01 2026 03:25:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºã€Šå‰ç«¯è§†è§’ä¸‹çš„ç½‘ç»œåè®®ã€‹ç³»åˆ—çš„ç»ˆç« ï¼Œæˆ‘ä»¬å°†ç›®å…‰æŠ•å‘æ­£åœ¨å‘ç”Ÿçš„<strong>ç¬¬äºŒæ¬¡ Web ä¼ è¾“é©å‘½</strong>ã€‚</p>
<p>å¦‚æœè¯´ HTTP/2 æ˜¯ä¸€æ¬¡è½¯ä»¶å±‚é¢çš„ä¿®è¡¥ï¼Œé‚£ä¹ˆ <strong>HTTP/3</strong> å’Œ <strong>WebTransport</strong> å°±æ˜¯å¯¹äº’è”ç½‘åº•å±‚åè®®çš„ä¸€æ¬¡â€œæ¨å€’é‡æ¥â€ã€‚å®ƒä»¬å½»åº•æŠ›å¼ƒäº†å·²ç»æœå½¹ 40 å¤šå¹´çš„ TCP åè®®ï¼Œè½¬è€Œæ‹¥æŠ±åŸºäº UDP çš„æ–°æ¶æ„ï¼Œæ—¨åœ¨è§£å†³é‚£äº›åœ¨ç°ä»£ç§»åŠ¨äº’è”å’Œ AI æ—¶ä»£æ˜¾å¾—æ—¥ç›Šæ²‰é‡çš„æ€§èƒ½åŒ…è¢±ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ HTTP/3ï¼šæ‹¥æŠ± QUIC çš„æ–°èˆªå‘</h2>
<p>æ­£å¦‚æˆ‘ä»¬åœ¨ã€Šè¿æ¥ç¯‡ã€‹å’Œã€Šæ¼”è¿›ç¯‡ã€‹ä¸­æåˆ°çš„ï¼ŒHTTP/3 çš„æ ¸å¿ƒåœ¨äº <strong>QUIC (Quick UDP Internet Connections)</strong> ã€‚</p>
<h3 data-id="heading-1">1. ä¸ºä»€ä¹ˆå®ƒæ˜¯â€œé™ç»´æ‰“å‡»â€ï¼Ÿ</h3>
<ul>
<li><strong>0-RTT/1-RTT æé€Ÿè¿æ¥</strong>ï¼šåœ¨ TCP+TLS ç¯å¢ƒä¸‹ï¼Œä¼ è¾“æ•°æ®å‰éœ€è¦ 3 ä¸ª RTTï¼›è€Œåœ¨ HTTP/3 ä¸­ï¼Œç”±äº QUIC åˆå¹¶äº†æ¡æ‰‹ä¸åŠ å¯†è¿‡ç¨‹ï¼Œç¬¬ä¸€æ¬¡è¿æ¥ä»…éœ€ 1 ä¸ª RTTï¼Œå¤ç”¨è¿æ¥ç”šè‡³èƒ½è¾¾åˆ° <strong>0 ä¸ª RTT</strong>ï¼ˆå³å‘åŒ…å³å¸¦æ•°æ®ï¼‰ã€‚</li>
<li><strong>å½»åº•æ¶ˆç­é˜Ÿå¤´é˜»å¡</strong>ï¼šåœ¨ TCP ä¸­ï¼Œä¸€ä¸ªåŒ…ä¸¢å¤±ï¼Œæ•´æ¡æµå¡æ­»ã€‚åœ¨ QUIC ä¸­ï¼ŒUDP å…è®¸æ¯ä¸ªæµç‹¬ç«‹ä¼ è¾“ï¼Œä¸€ä¸ªè¯·æ±‚ä¸¢åŒ…ï¼Œå®Œå…¨ä¸å½±å“å…¶ä»–å¹¶å‘è¯·æ±‚ã€‚</li>
<li><strong>è¿æ¥è¿ç§» (Connection Migration)</strong> ï¼šè¿™æ˜¯ç§»åŠ¨ç«¯æœ€ç¡¬æ ¸çš„åŠŸèƒ½ã€‚ä½ åœ¨åˆ‡æ¢ WiFi å’Œ 4G/5G æ—¶ï¼ŒIP åœ°å€ä¼šå˜ã€‚TCP å¿…é¡»é‡è¿ï¼Œè€Œ QUIC ä½¿ç”¨ <strong>Connection ID</strong> è¯†åˆ«ç”¨æˆ·ã€‚å³ä¾¿ç½‘ç»œåˆ‡æ¢ï¼Œä½ çš„è§†é¢‘é€šè¯æˆ–ç›´æ’­ä¾ç„¶ä¸æ»‘ï¼Œä¸ä¼šæ–­è¿ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">äºŒã€ WebTransportï¼šWebSocket çš„ç»ˆææ¥ç­äºº</h2>
<p>è™½ç„¶ HTTP/3 å¾ˆå¿«ï¼Œä½†åœ¨<strong>åŒå‘å®æ—¶é€šè®¯</strong>é¢†åŸŸï¼Œæˆ‘ä»¬ä¾ç„¶é¢ä¸´é€‰å‹å°´å°¬ï¼šWebSocket ä¸æ”¯æŒå¤šè·¯å¤ç”¨ä¸”å­˜åœ¨ TCP çš„å›ºæœ‰ç¼ºé™·ã€‚äºæ˜¯ï¼Œ<strong>WebTransport</strong> åº”è¿è€Œç”Ÿã€‚</p>
<h3 data-id="heading-3">1. ä»€ä¹ˆæ˜¯ WebTransportï¼Ÿ</h3>
<p>å®ƒæ˜¯ä¸€ä¸ªåŸºäº HTTP/3ï¼ˆQUICï¼‰çš„æ–°ä¸€ä»£æµè§ˆå™¨ APIï¼Œæ—¨åœ¨æä¾›<strong>ä½å»¶è¿Ÿã€åŒå‘ã€å¤šæµ</strong>çš„æ•°æ®ä¼ è¾“èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-4">2. ä¸ WebSocket çš„æ ¸å¿ƒå·®å¼‚</h3>
<ul>
<li><strong>æ”¯æŒä¸å¯é ä¼ è¾“ (Datagrams)</strong> ï¼šå¯¹äºæ¸¸æˆçŠ¶æ€åŒæ­¥ã€å®æ—¶éŸ³è§†é¢‘è¿™ç±»â€œä¸¢ä¸€ä¸ªåŒ…ä¹Ÿæ²¡å…³ç³»ï¼Œä½†å»¶è¿Ÿå¿…é¡»ä½â€çš„åœºæ™¯ï¼ŒWebTransport å…è®¸ä½ åƒä½¿ç”¨åŸç”Ÿ UDP ä¸€æ ·å‘é€æ•°æ®ï¼Œè€Œ WebSocket å¿…é¡»ä¿è¯ 100% åˆ°è¾¾ã€‚</li>
<li><strong>å¤šæµå¹¶è¡Œ</strong>ï¼šä½ å¯ä»¥åœ¨åŒä¸€ä¸ª WebTransport è¿æ¥ä¸­å¼€å¯å¤šä¸ªå•å‘æˆ–åŒå‘æµã€‚æŸä¸ªæµå¡ä½äº†ï¼Œä¸ä¼šå½±å“å…¶ä»–æµçš„æ•°æ®æ”¶å‘ã€‚</li>
<li><strong>åŸç”Ÿé›†æˆå®‰å…¨</strong>ï¼šå®ƒå¤©ç”Ÿå¼ºåˆ¶è¦æ±‚ TLS åŠ å¯†ï¼Œä¸”å¤ç”¨ HTTP/3 çš„ç«¯å£ï¼Œèƒ½æ›´è½»æ¾åœ°ç©¿é€é˜²ç«å¢™ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ å…¨æ ˆå®æˆ˜ï¼šæœªæ¥å·²æ¥</h2>
<p>ä½œä¸ºä¸€å 8 å¹´å…¨æ ˆï¼Œä½ åº”è¯¥å¦‚ä½•å‡†å¤‡è¿æ¥è¿™æ³¢æµªæ½®ï¼Ÿ</p>
<ol>
<li>
<p><strong>åŸºç¡€è®¾æ–½å‡çº§</strong>ï¼šç¡®ä¿ä½ çš„ CDN æœåŠ¡å•†ï¼ˆå¦‚ Cloudflare, Akamaiï¼‰å·²å¼€å¯ HTTP/3 æ”¯æŒã€‚å¦‚æœè‡ªå»º Nginxï¼Œéœ€è¦å®‰è£… <code>nginx-quic</code> æ¨¡å—å¹¶é…ç½® <code>Alt-Svc</code> å“åº”å¤´å‘ŠçŸ¥æµè§ˆå™¨æ”¯æŒå‡çº§ã€‚</p>
</li>
<li>
<p><strong>ä»£ç å±‚é€‚é…</strong>ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-ini" lang="ini">// WebTransport é¢„è§ˆç‰ˆ API ç¤ºä¾‹
const <span class="hljs-attr">transport</span> = new WebTransport(<span class="hljs-string">"https://your-api.com:443/webtransport"</span>)<span class="hljs-comment">;</span>
await transport.ready<span class="hljs-comment">;</span>

// åˆ›å»ºä¸€ä¸ªå‘é€æµ
const <span class="hljs-attr">writable</span> = await transport.createUnidirectionalStream()<span class="hljs-comment">;</span>
const <span class="hljs-attr">writer</span> = writable.getWriter()<span class="hljs-comment">;</span>
await writer.write(new Uint8Array(<span class="hljs-section">[1, 2, 3]</span>))<span class="hljs-comment">;</span>
</code></pre>
</li>
<li>
<p><strong>åœºæ™¯åˆ‡æ¢</strong>ï¼š</p>
<ul>
<li><strong>ç›´æ’­/æ¸¸æˆ</strong>ï¼šä» WebSocket/WebRTC åˆ‡æ¢åˆ° WebTransport ä»¥è·å¾—æ›´ä½çš„å»¶è¿Ÿã€‚</li>
<li><strong>å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ </strong>ï¼šåˆ©ç”¨ QUIC çš„å¤šè·¯å¤ç”¨å¹¶è¡Œä¸Šä¼ ï¼Œä¸å†æ‹…å¿ƒ TCP é˜»å¡ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-6">å››ã€ æ€»ç»“ï¼šç½‘ç»œåè®®çš„æ–°çºªå…ƒ</h2>






























<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>HTTP/2 (æ—§æ—¶ä»£é¡¶ç‚¹)</strong></th><th><strong>HTTP/3 + WebTransport (æœªæ¥)</strong></th></tr></thead><tbody><tr><td><strong>åº•å±‚åŸºç¡€</strong></td><td>TCP + TLS</td><td><strong>UDP + QUIC</strong></td></tr><tr><td><strong>é¦–å­—èŠ‚å»¶è¿Ÿ (TTFB)</strong></td><td>è¾ƒé«˜ (å¤šæ¬¡æ¡æ‰‹)</td><td><strong>æä½ (0-RTT/1-RTT)</strong></td></tr><tr><td><strong>å¼±ç½‘è¡¨ç°</strong></td><td>å®¹æ˜“å‘ç”Ÿé˜Ÿå¤´é˜»å¡ï¼Œé‡è¿æ…¢</td><td><strong>æå¼ºï¼Œæ”¯æŒè¿æ¥è¿ç§»</strong></td></tr><tr><td><strong>å®æ—¶é€šè®¯</strong></td><td>WebSocket (TCP)</td><td><strong>WebTransport (QUIC)</strong></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7">ğŸ’¡ ç»“è¯­</h3>
<p>ã€Šå‰ç«¯è§†è§’ä¸‹çš„ç½‘ç»œåè®®ã€‹ç³»åˆ—åˆ°æ­¤å®Œç»“ã€‚æˆ‘ä»¬ä»åº•å±‚çš„ TCP æ¡æ‰‹å‡ºå‘ï¼Œç©¿è¶Šäº† HTTP/2 çš„å¤šè·¯å¤ç”¨ã€HTTPS çš„ä¿¡ä»»é“¾ã€ç¼“å­˜çš„åšå¼ˆã€è·¨åŸŸçš„å›´å¢™ï¼Œæœ€ç»ˆæŠµè¾¾äº† HTTP/3 çš„æœªæ¥ã€‚</p>
<p><strong>æŠ€æœ¯æ€»æ˜¯åœ¨æ¼”è¿›ï¼Œä½†åº•å±‚çš„æ ¸å¿ƒé€»è¾‘â€”â€”å³å¦‚ä½•åœ¨ä¸ç¨³å®šçš„ç½‘ç»œä¸­æä¾›ç¨³å®šã€å¿«é€Ÿã€å®‰å…¨çš„ä½“éªŒâ€”â€”æ°¸è¿œä¸å˜ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ çš„ sideEffects çœŸçš„é…å¯¹äº†å—ï¼Ÿâ€”â€” æ·±åº¦æ‹†è§£æ„å»ºå·¥å…·çš„ Tree-shaking æ½œè§„åˆ™]]></title>    <link>https://juejin.cn/post/7601144981170356274</link>    <guid>https://juejin.cn/post/7601144981170356274</guid>    <pubDate>2026-02-01T04:13:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601144981170356274" data-draft-id="7600955777316601894" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ çš„ sideEffects çœŸçš„é…å¯¹äº†å—ï¼Ÿâ€”â€” æ·±åº¦æ‹†è§£æ„å»ºå·¥å…·çš„ Tree-shaking æ½œè§„åˆ™"/> <meta itemprop="keywords" content="JavaScript,Node.js,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2026-02-01T04:13:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="donecoding"/> <meta itemprop="url" content="https://juejin.cn/user/3192637500430093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ çš„ sideEffects çœŸçš„é…å¯¹äº†å—ï¼Ÿâ€”â€” æ·±åº¦æ‹†è§£æ„å»ºå·¥å…·çš„ Tree-shaking æ½œè§„åˆ™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3192637500430093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    donecoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T04:13:05.000Z" title="Sun Feb 01 2026 04:13:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ğŸš€ çœæµåŠ©æ‰‹ï¼ˆé€Ÿé€šç»“è®ºï¼‰ï¼š</strong></p>
<ol>
<li><code>sideEffects</code>Â æ˜¯ç»™<strong>å®¿ä¸»</strong>ï¼ˆç”¨ä½ åŒ…çš„é¡¹ç›®ï¼‰çœ‹çš„å£°æ˜ï¼Œä¸æ˜¯ç»™ä½ è‡ªå·±æ„å»ºå‡é‡ç”¨çš„ã€‚</li>
<li>åªè¦åŒ…é‡ŒåŒ…å«Â <strong>CSS/æ ·å¼</strong>ã€<strong>å…¨å±€ç›‘å¬</strong>ï¼ˆ<code>process.on</code>ï¼‰æˆ–<strong>ä¿®æ”¹å…¨å±€å˜é‡</strong>ï¼Œ<strong>ç»ä¸èƒ½</strong>ç®€å•è®¾ä¸ºÂ <code>false</code>ã€‚</li>
<li><code>/* @__PURE__ */</code>Â çš„æ„æ€æ˜¯Â  <strong>â€œè¿™è¡Œæ²¡ç”¨åˆ°è¯·åˆ æ‰â€</strong> ï¼Œè€Œä¸æ˜¯ â€œä¸èƒ½åˆ â€ã€‚</li>
<li><strong>Bundle å¹¶ä¸å®‰å…¨</strong>ï¼šå³ä¾¿ä½ æ‰“åŒ…æˆäº†å•æ–‡ä»¶ï¼Œä¸€æ—¦å£°æ˜äº†Â <code>false</code>ï¼Œå®¿ä¸»æ‰“åŒ…å·¥å…·ä¾ç„¶èƒ½ä»å†…éƒ¨â€œæŠ æ‰â€ä½ çš„å‰¯ä½œç”¨ä»£ç ã€‚</li>
</ol>
</blockquote>
<hr/>
<p>ä¸€ã€ çº¿ä¸Šâ€œå¤±è¸ªâ€æ¡ˆï¼šè°å·èµ°äº†æˆ‘çš„åˆå§‹åŒ–é€»è¾‘ï¼Ÿ</p>
<p>å¾ˆå¤šå¼€å‘è€…éƒ½é‡åˆ°è¿‡è¿™ç§è¯¡å¼‚åœºæ™¯ï¼šæœ¬åœ°å¼€å‘æ—¶ä¸€åˆ‡æ­£å¸¸çš„å…¨å±€ç›‘å¬ï¼ˆå¦‚Â <code>process.on('exit')</code>ï¼‰æˆ–æ ·å¼æ–‡ä»¶ï¼Œå‘å¸ƒæˆ npm åŒ…è¢«åˆ«äººä½¿ç”¨åï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒç«Ÿç„¶â€œå¤±æ•ˆâ€äº†ã€‚</p>
<p>æ£€æŸ¥ä»£ç ï¼Œé€»è¾‘éƒ½åœ¨ï¼›æ£€æŸ¥äº§ç‰©ï¼Œæ–‡ä»¶ä¹Ÿå¼•äº†ã€‚æœ€åå‘ç°ï¼Œæ ¹æºç«Ÿç„¶æ˜¯ä½ åœ¨Â <code>package.json</code>Â ä¸­éšæ‰‹å†™ä¸‹çš„é‚£è¡Œï¼š</p>
<p>json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
</code></pre>
<p>è¯·è°¨æ…ä½¿ç”¨æ­¤ç±»ä»£ç ã€‚</p>
<p>ä½ ä»¥ä¸ºæ˜¯åœ¨å¸®å®¿ä¸»åšæ€§èƒ½ä¼˜åŒ–ï¼Œå®é™…ä¸Šä½ æ˜¯åœ¨ç»™è‡ªå·±çš„ä»£ç ä¸‹â€œé€å®¢ä»¤â€ã€‚</p>
<p>äºŒã€ ç”Ÿæ•ˆæ—¶åˆ»ï¼šå®ƒæ˜¯è°çš„â€œç´§ç®å’’â€ï¼Ÿ</p>
<p><strong>è¯¯åŒºï¼š</strong> Â è®¤ä¸ºåœ¨åº“é‡Œå†™äº†Â <code>sideEffects: false</code>ï¼Œè‡ªå·±æ‰§è¡ŒÂ <code>vite build</code>Â æ—¶åŒ…ä½“ç§¯å°±ä¼šå˜å°ã€‚</p>
<p><strong>çœŸç›¸ï¼šå®ƒçš„çœŸæ­£æˆ˜åœºæ˜¯ã€Œå®¿ä¸»ç¼–è¯‘æ—¶åˆ»ã€ã€‚</strong></p>
<ol>
<li><strong>è‡ªèº«æ„å»ºæ—¶</strong>ï¼šå½“ä½ è¿è¡Œæ„å»ºæŒ‡ä»¤æ—¶ï¼Œå·¥å…·éµå¾ªä½œè€…æ„å›¾ã€‚åªè¦ä½ åœ¨å…¥å£å†™äº†Â <code>import './effect.ts'</code>ï¼Œè¿™æ®µä»£ç å°±ä¼šç‰©ç†å­˜åœ¨äºä½ çš„Â <code>dist</code>Â äº§ç‰©ä¸­ã€‚</li>
<li><strong>å®¿ä¸»æ‰“åŒ…æ—¶</strong>ï¼šå½“å…¶ä»–é¡¹ç›®å®‰è£…äº†ä½ çš„åŒ…ï¼Œå®¿ä¸»å·¥å…·ï¼ˆVite/Webpackï¼‰ä¼šè¯»å–ä½ çš„å£°æ˜ã€‚å¦‚æœä½ æ‰¿è¯ºäº†â€œæ— å‰¯ä½œç”¨â€ï¼Œä¸€æ—¦å®¿ä¸»æ²¡å¼•ç”¨ä½ è¯¥æ¨¡å—å¯¼å‡ºçš„å˜é‡ï¼Œå·¥å…·å°±ä¼šå¼€å¯â€œå¤–ç§‘æ‰‹æœ¯â€ï¼š<strong>å³ä½¿ä½ çš„å•æ–‡ä»¶ Bundle ç‰©ç†ä¸ŠåŒ…å«äº†è¿™æ®µä»£ç ï¼Œå·¥å…·ä¹Ÿä¼šåœ¨æœ€ç»ˆè¾“å‡ºæ—¶å°†å…¶ç²¾å‡†å‰”é™¤ã€‚</strong></li>
</ol>
<p>ä¸‰ã€ ç©¿é€ Bundle çš„â€œå¤–ç§‘æ‰‹æœ¯â€</p>
<p>è¿™æ˜¯æœ€éšè”½çš„é™·é˜±ã€‚å¾ˆå¤šå¼€å‘è€…è®¤ä¸ºï¼šâ€œæˆ‘æ‰“åŒ…æ—¶å·²ç»æŠŠå‰¯ä½œç”¨åˆå¹¶è¿›Â <code>index.js</code>Â äº†ï¼Œå®¿ä¸»å¼•ç”¨äº†Â <code>index.js</code>Â å°±å®‰å…¨äº†ã€‚â€</p>
<p><strong>é”™äº†ã€‚</strong> Â ç°ä»£æ‰“åŒ…å·¥å…·å…·å¤‡Â <strong>Module Concatenationï¼ˆæ¨¡å—æå‡ï¼‰</strong> Â èƒ½åŠ›ã€‚å®ƒä»¬èƒ½â€œçœ‹ç©¿â€ Bundle å†…éƒ¨çš„ç»“æ„ã€‚åªè¦ä½ å£°æ˜äº†Â <code>false</code>ï¼Œå®ƒä»¬æœ‰èƒ½åŠ›ä»ä¸€ä¸ªå¤§çš„æ–‡ä»¶å—ä¸­åªâ€œæŠ â€å‡ºç”¨åˆ°çš„å‡½æ•°ï¼Œè€ŒæŠŠå‰©ä¸‹çš„ï¼ˆåŒ…æ‹¬é‚£æ®µÂ <code>import './effect.ts'</code>Â äº§ç”Ÿçš„å†…å®¹ï¼‰å½“ä½œåƒåœ¾ç›´æ¥ä¸¢å¼ƒã€‚</p>
<p>å››ã€ å¾®è§‚åšå¼ˆï¼š<code>/* @__PURE__ */</code>Â åˆ°åº•åœ¨å¸®è°ï¼Ÿ</p>
<p>å¦‚æœè¯´Â <code>sideEffects</code>Â æ˜¯æ–‡ä»¶çº§çš„â€œç²—è°ƒâ€ï¼Œé‚£ä¹ˆÂ <code>/* @__PURE__ */</code>Â å°±æ˜¯è¯­å¥çº§çš„â€œå¾®æ“â€ã€‚</p>
<p><strong>çº æ­£ä¸€ä¸ªå¸¸è§è¯¯åŒºï¼š</strong> Â å®ƒæ˜¯æ ‡è®°â€œå¯ä»¥åˆ â€ï¼Œè€Œä¸æ˜¯â€œä¸èƒ½åˆ â€ã€‚</p>
<p>å‡è®¾ä½ çš„å·¥å…·åº“æœ‰ä¸€ä¸ªæ–‡ä»¶å¯¼å‡ºäº† 100 ä¸ªå‡½æ•°ï¼Œå®¿ä¸»åªç”¨äº†å…¶ä¸­ 1 ä¸ªã€‚</p>
<ul>
<li><strong>å¦‚æœæ²¡æœ‰æ ‡è®°</strong>ï¼šå‰©ä¸‹çš„ 99 ä¸ªå¯¼å‡ºä¸­ï¼Œå¦‚æœåŒ…å«Â <code>export const config = init()</code>Â è¿™ç§å‡½æ•°æ‰§è¡Œï¼Œæ‰“åŒ…å·¥å…·ä¼šå› ä¸ºä¸æ•¢ç¡®å®šÂ <code>init()</code>Â æ˜¯å¦ä¿®æ”¹äº†å…¨å±€å˜é‡è€Œ<strong>ä¿å®ˆåœ°ä¿ç•™</strong>è¿™ä¸€è¡Œã€‚</li>
<li><strong>å¦‚æœåŠ ä¸Šæ ‡è®°</strong>ï¼šä½ æ˜¯åœ¨ç»™å·¥å…·å‘â€œå…è´£å£°æ˜â€ã€‚å·¥å…·çœ‹åˆ°Â <code>/* @__PURE__ */</code>ï¼Œå‘ç°æ²¡äººç”¨Â <code>config</code>ï¼Œå°±ä¼šæ”¾å¿ƒåœ°æŠŠè¿™ä¸€è¡Œä»£ç ä»äº§ç‰©ä¸­æŠ¹é™¤ã€‚</li>
</ul>
<p>äº”ã€ é¿å‘æ€»ç»“ï¼šç™½åå•ç®¡ç†</p>
<p>ä¸ºäº†ä¸è®©ä»£ç è¢«â€œè¯¯æ€â€ï¼Œä½ ä¸èƒ½åœ¨åŒ…å«å‰¯ä½œç”¨çš„æ–‡ä»¶é‡Œå†™Â <code>false</code>ã€‚æœ€ä¸“ä¸šçš„åšæ³•æ˜¯ä½¿ç”¨æ•°ç»„è¿›è¡Œ<strong>ç²¾å‡†ä¿æŠ¤</strong>ã€‚</p>
<p><strong>å“ªäº›æ–‡ä»¶å¿…é¡»è¿›Â <code>sideEffects</code>Â æ•°ç»„ï¼Ÿ</strong></p>
<ol>
<li><strong>æ ·å¼æ–‡ä»¶</strong>ï¼š<code>*.css</code>,Â <code>*.scss</code>ã€‚</li>
<li><strong>ç¯å¢ƒåˆå§‹åŒ–</strong>ï¼šä¿®æ”¹Â <code>global</code>Â æˆ–Â <code>window</code>Â çš„è„šæœ¬ã€‚</li>
<li><strong>è¿›ç¨‹ç›‘æ§</strong>ï¼šåŒ…å«Â <code>process.on</code>Â æˆ–Â <code>interval</code>Â çš„é€»è¾‘ã€‚</li>
</ol>
<p><strong>æ¨èé…ç½®ï¼š</strong></p>
<p>json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"**/*.css"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"./dist/_init/*.mjs"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¯·è°¨æ…ä½¿ç”¨æ­¤ç±»ä»£ç ã€‚</p>
<p>ç»“è¯­</p>
<p>Tree-shaking æ˜¯ä¸€åœºå¼€å‘è€…ä¸æ„å»ºå·¥å…·ä¹‹é—´çš„åšå¼ˆã€‚å·¥å…·çš„æœ¬è´¨æ˜¯â€œä¿å®ˆâ€çš„ï¼Œè€ŒÂ <code>sideEffects: false</code>Â æ˜¯ä½ äº¤ç»™å·¥å…·çš„ä¸€æŠŠâ€œæ¿€è¿›â€çš„å‰ªåˆ€ã€‚</p>
<p>åœ¨ä¸‹ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ï¼š<strong>å¦‚ä½•é€šè¿‡å·¥ç¨‹æ¶æ„è®¾è®¡ï¼Œå¼ºåˆ¶å¼€å‘è€…åœ¨ç¼–å†™å‰¯ä½œç”¨ä»£ç æ—¶è¿›è¡Œâ€œå†³ç­–â€ï¼Œä»è€Œæ„å»ºä¸€å¥—æ°¸è¿œä¸ä¼šè¢«æ„å¤–è¯¯åˆ çš„â€œå¥‘çº¦å¼â€æ¶æ„ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ReactNode ä¸ ReactElementï¼šåˆ°åº•å·®åœ¨å“ªï¼Ÿ]]></title>    <link>https://juejin.cn/post/7601101531920334894</link>    <guid>https://juejin.cn/post/7601101531920334894</guid>    <pubDate>2026-02-01T04:35:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601101531920334894" data-draft-id="7601069677567852590" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ReactNode ä¸ ReactElementï¼šåˆ°åº•å·®åœ¨å“ªï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2026-02-01T04:35:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŠªåŠ›æ‰¾å®ä¹ çš„å‰ç«¯å°ç™½"/> <meta itemprop="url" content="https://juejin.cn/user/3994957074930676"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ReactNode ä¸ ReactElementï¼šåˆ°åº•å·®åœ¨å“ªï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3994957074930676/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŠªåŠ›æ‰¾å®ä¹ çš„å‰ç«¯å°ç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T04:35:09.000Z" title="Sun Feb 01 2026 04:35:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ReactNode ä¸ ReactElementï¼šåˆ°åº•å·®åœ¨å“ªï¼Ÿ</h2>
<p>å†™ React + TypeScript çš„æ—¶å€™ï¼Œæœ€å¸¸è§çš„ä¸¤ä¸ªç±»å‹å°±æ˜¯ <code>ReactNode</code> å’Œ <code>ReactElement</code>ã€‚å®ƒä»¬ç»å¸¸ä¸€èµ·å‡ºç°ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><code>children: React.ReactNode</code></li>
<li><code>render(): React.ReactElement</code></li>
</ul>
<p>çœ‹èµ·æ¥éƒ½åƒâ€œReact èƒ½æ¸²æŸ“çš„ä¸œè¥¿â€ï¼Œä½†å®ƒä»¬çš„è¯­ä¹‰å®Œå…¨ä¸åŒã€‚ç†è§£è¿™ä¿©çš„å·®åˆ«ï¼Œä¼šç›´æ¥å½±å“ä½ å†™ç»„ä»¶ Propsã€å°è£… render propã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€å¥è¯ç»“è®º</h3>
<ul>
<li><strong>ReactElement</strong>ï¼šä¸€ä¸ªâ€œReact å…ƒç´ å¯¹è±¡â€ï¼Œä¹Ÿå°±æ˜¯ JSX ç¼–è¯‘åçš„äº§ç‰©ï¼ˆç»“æ„åŒ–å¯¹è±¡ï¼Œå¸¦ <code>type/props/key/ref</code>ï¼‰ã€‚</li>
<li><strong>ReactNode</strong>ï¼šä¸€ä¸ªâ€œå¯æ¸²æŸ“å€¼â€çš„å¤§é›†åˆï¼ŒåŒ…å« <code>ReactElement</code>ï¼Œè¿˜åŒ…å«å­—ç¬¦ä¸²ã€æ•°å­—ã€æ•°ç»„ã€Fragmentã€Portalï¼Œä»¥åŠ <code>null/undefined/boolean</code> è¿™ç±»â€œæ¸²æŸ“ä¸ºç©ºâ€çš„å€¼ã€‚</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼š</p>
<blockquote>
<p><code>ReactElement</code> æ˜¯ <code>ReactNode</code> çš„ä¸€ä¸ªå­é›†ï¼›<code>ReactNode</code> æ‰æ˜¯ â€œchildren èƒ½æ¥å—ä»€ä¹ˆâ€ çš„çœŸæ­£ç­”æ¡ˆã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">ReactElementï¼šJSX ç¼–è¯‘åçš„å¯¹è±¡</h3>
<p>ä½ å†™çš„ JSXï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> a = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"box"</span> /&gt;</span></span>;
<span class="hljs-keyword">const</span> b = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComp</span> <span class="hljs-attr">foo</span>=<span class="hljs-string">{1}</span> /&gt;</span></span>;
</code></pre>
<p>æœ€ç»ˆéƒ½ä¼šå˜æˆâ€œReact å…ƒç´ å¯¹è±¡â€ã€‚åœ¨ç±»å‹å±‚é¢ï¼Œå®ƒé€šå¸¸å¯¹åº”ï¼š</p>
<ul>
<li><code>React.ReactElement</code>ï¼ˆæ›´å‡†ç¡®ã€æ›´åº•å±‚çš„ç±»å‹ï¼‰</li>
<li><code>JSX.Element</code>ï¼ˆæ›´å¸¸è§çš„ JSX è¿”å›ç±»å‹ï¼Œé€šå¸¸ç­‰ä»·äº <code>ReactElement&lt;any, any&gt;</code> çš„åˆ«å/åŒ…è£…ï¼Œå–å†³äº TS/React ç‰ˆæœ¬é…ç½®ï¼‰</li>
</ul>
<p>ä¸€ä¸ªç›´è§‚çš„ç†è§£æ˜¯ï¼š<code>ReactElement</code> æ˜¯â€œæè¿° UI çš„ç»“æ„åŒ–æ•°æ®â€ï¼Œåƒè¿™æ ·ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ReactElementLike</span> = {
  <span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">Function</span>;
  <span class="hljs-attr">props</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;;
  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
};
</code></pre>
<p>å®ƒä¸æ˜¯ DOMï¼Œä¹Ÿä¸æ˜¯ HTML å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ React ç”¨æ¥æ„å»º Fiber/åè°ƒæ›´æ–°çš„è¾“å…¥æ•°æ®ã€‚</p>
<h4 data-id="heading-3">ä»€ä¹ˆæ—¶å€™ç”¨ ReactElementï¼Ÿ</h4>
<p>å½“ä½ å¸Œæœ›è°ƒç”¨æ–¹â€œå¿…é¡»ä¼ ä¸€ä¸ªç»„ä»¶/æ ‡ç­¾â€ï¼Œè€Œä¸æ˜¯éšä¾¿ä¼ æ–‡æœ¬ã€æ•°å­—ã€æ•°ç»„æ—¶ï¼Œç”¨ <code>ReactElement</code> æ›´åˆé€‚ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Props</span> = {
  <span class="hljs-attr">icon</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactElement</span>;
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">{ icon }: Props</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"btn"</span>&gt;</span>{icon}Click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}

<span class="hljs-comment">// âœ… å¯ä»¥</span>
&lt;<span class="hljs-title class_">Button</span> icon={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸ”¥<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>} /&gt;

<span class="hljs-comment">// âŒ ä¸è¡Œï¼ˆå› ä¸º string ä¸æ˜¯ ReactElementï¼‰</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">{</span>"ğŸ”¥"} /&gt;</span></span>
</code></pre>
<hr/>
<h3 data-id="heading-4">ReactNodeï¼šReact èƒ½â€œåƒä¸‹å»å¹¶æ¸²æŸ“â€çš„æ‰€æœ‰ä¸œè¥¿</h3>
<p><code>ReactNode</code> æ˜¯ä¸€ä¸ªè”åˆç±»å‹ï¼ˆå¤§æ‚çƒ©ï¼‰ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£æˆï¼šåªè¦ React æ¸²æŸ“å™¨æ¥å—ï¼Œå®ƒå°±ç®— <code>ReactNode</code>ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ReactNode</span> =
  | <span class="hljs-title class_">React</span>$Element&lt;<span class="hljs-built_in">any</span>&gt;
  | <span class="hljs-title class_">ReactPortal</span>
  | <span class="hljs-title class_">ReactText</span>
  | <span class="hljs-title class_">ReactFragment</span>
  | <span class="hljs-title class_">ReactProvider</span>&lt;<span class="hljs-built_in">any</span>&gt;
  | <span class="hljs-title class_">ReactConsumer</span>&lt;<span class="hljs-built_in">any</span>&gt;;
</code></pre>
<p>æŒ‰ç…§è¿™ä»½æºç å®šä¹‰ï¼Œ<code>ReactNode</code> ç”±ä¸‹é¢ 6 ç±»ç»„æˆï¼š</p>
<h4 data-id="heading-5">1ï¼‰React$Elementï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ ReactElementï¼‰</h4>
<pre><code class="hljs language-tsx" lang="tsx">&lt;div /&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComp</span> /&gt;</span></span>
</code></pre>
<h4 data-id="heading-6">2ï¼‰ReactPortalï¼ˆPortalï¼‰</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { createPortal } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-dom"</span>;

<span class="hljs-title function_">createPortal</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"modal"</span>&gt;</span>Hi<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>);
</code></pre>
<h4 data-id="heading-7">3ï¼‰ReactTextï¼ˆæ–‡æœ¬ï¼‰</h4>
<p><code>ReactText</code> é€šå¸¸å°±æ˜¯ <code>string | number</code>ï¼Œä¹Ÿå°±æ˜¯ React å…è®¸ä½ ç›´æ¥å†™åœ¨ JSX é‡Œçš„æ–‡æœ¬èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;div&gt;<span class="hljs-title class_">Hello</span>&lt;/div&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{123}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-8">4ï¼‰ReactFragmentï¼ˆFragmentï¼‰</h4>
<p>Fragment çš„ä½œç”¨æ˜¯æŠŠå¤šä¸ªå­èŠ‚ç‚¹ç»„åˆåœ¨ä¸€èµ·ï¼Œä½†å®ƒæœ¬èº«ä¸ä¼šæ¸²æŸ“æˆé¢å¤–çš„ DOM èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChildA</span> /&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChildB</span> /&gt;</span></span>
&lt;/&gt;
</code></pre>
<h4 data-id="heading-9">5ï¼‰ReactProviderï¼ˆContext Providerï¼‰</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">theme:</span> "<span class="hljs-attr">dark</span>" }}&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">MyContext.Provider</span>&gt;</span></span>;
</code></pre>
<h4 data-id="heading-10">6ï¼‰ReactConsumerï¼ˆContext Consumerï¼‰</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyContext.Consumer</span>&gt;</span>
  {(value) =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span>{JSON.stringify(value)}<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>}
<span class="hljs-tag">&lt;/<span class="hljs-name">MyContext.Consumer</span>&gt;</span></span>;
</code></pre>
<p>è¡¥å……ä¸€ç‚¹ï¼šä½ åœ¨ TypeScript é‡Œå¸¸è§åˆ°çš„ <code>React.ReactNode</code> å¾€å¾€ä¼šæ¯”è¿™ä»½å®šä¹‰æ›´å®½ï¼ˆä¾‹å¦‚åŒ…å« <code>null/undefined/boolean</code>ã€å¯è¿­ä»£ç»“æ„ç­‰ï¼‰ã€‚è¿™ç±»å·®å¼‚é€šå¸¸æ¥è‡ª React/TS ç‰ˆæœ¬ã€ç±»å‹å®šä¹‰æ–‡ä»¶çš„æ¼”è¿›ï¼Œä»¥åŠæŸäº›ç±»å‹åœ¨ä¸åŒå®ç°é‡Œè¢«æ‹†åˆ†æˆ–åˆå¹¶ã€‚</p>
<h4 data-id="heading-11">ä»€ä¹ˆæ—¶å€™ç”¨ ReactNodeï¼Ÿ</h4>
<p>å½“ä½ æƒ³è¡¨è¾¾â€œè¿™é‡Œå¯ä»¥æ”¾ä»»æ„å¯æ¸²æŸ“å†…å®¹â€ï¼Œå°¤å…¶æ˜¯ <code>children</code>ã€slotã€render å‡ºæ¥çš„ç‰‡æ®µï¼Œç”¨ <code>ReactNode</code> æœ€åˆé€‚ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">type</span> <span class="hljs-title class_">CardProps</span> = {
  <span class="hljs-attr">title</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>;
  <span class="hljs-attr">children</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>;
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Card</span>(<span class="hljs-params">{ title, children }: CardProps</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>{title}<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// è¿™äº›éƒ½åˆæ³•ï¼š</span>
&lt;<span class="hljs-title class_">Card</span> title=<span class="hljs-string">"æ ‡é¢˜"</span>&gt;æ­£æ–‡&lt;/<span class="hljs-title class_">Card</span>&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Card</span> <span class="hljs-attr">title</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">b</span>&gt;</span>åŠ ç²—æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>}&gt;{123}<span class="hljs-tag">&lt;/<span class="hljs-name">Card</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Card</span> <span class="hljs-attr">title</span>=<span class="hljs-string">{null}</span>&gt;</span>{[<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"1"</span>&gt;</span>a<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"2"</span>&gt;</span>b<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>]}<span class="hljs-tag">&lt;/<span class="hljs-name">Card</span>&gt;</span></span>
</code></pre>
<hr/>
<h3 data-id="heading-12">ReactNode vs ReactElementï¼šä»â€œçº¦æŸåŠ›åº¦â€æ¥ç†è§£</h3>
<p>ä½ å¯ä»¥æŠŠå®ƒä»¬ç†è§£ä¸ºä¸¤ç§ä¸åŒå¼ºåº¦çš„çº¦æŸï¼š</p>
<ul>
<li><code>ReactElement</code>ï¼šå¼ºçº¦æŸã€‚ä½ å¿…é¡»ç»™æˆ‘ä¸€ä¸ªâ€œå…ƒç´ å¯¹è±¡â€ï¼ˆJSX äº§ç‰©ï¼‰ã€‚</li>
<li><code>ReactNode</code>ï¼šå¼±çº¦æŸã€‚ä½ ç»™æˆ‘ä»»ä½• React èƒ½æ¸²æŸ“çš„å€¼éƒ½è¡Œï¼ˆåŒ…æ‹¬å…ƒç´ ã€æ–‡æœ¬ã€Fragmentã€Portalã€Provider/Consumer ç­‰ï¼›ä¸åŒç±»å‹å®šä¹‰çš„è¦†ç›–èŒƒå›´å¯èƒ½ç•¥æœ‰å·®å¼‚ï¼‰ã€‚</li>
</ul>
<p>è¿™ç›´æ¥å†³å®šäº† API è®¾è®¡ä½“éªŒï¼š</p>
<h4 data-id="heading-13">åœºæ™¯ 1ï¼šä½ åªæ¥å—ä¸€ä¸ªâ€œç»„ä»¶å—â€</h4>
<p>æ¯”å¦‚ <code>icon</code>ã€<code>header</code> å¿…é¡»æ˜¯ä¸€ä¸ªç»„ä»¶æ ‡ç­¾ï¼Œå¦åˆ™ UI ç»“æ„ä¸å¥½æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Props</span> = { <span class="hljs-attr">header</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactElement</span> };
</code></pre>
<h4 data-id="heading-14">åœºæ™¯ 2ï¼šä½ æ¥å—â€œä»»æ„å†…å®¹â€</h4>
<p>æ¯”å¦‚ <code>children</code>ã€<code>title</code>ã€<code>footer</code> å¯ä»¥æ˜¯æ–‡æœ¬ä¹Ÿå¯ä»¥æ˜¯ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Props</span> = { <span class="hljs-attr">children</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span> };
</code></pre>
<hr/>
<h3 data-id="heading-15">å¸¸è§è¯¯åŒºï¼šJSX.Elementã€ReactElementã€ReactNode åˆ°åº•æ€ä¹ˆé€‰ï¼Ÿ</h3>
<p>ç®€å•è§„åˆ™ï¼š</p>
<ul>
<li><strong>å†™ children / slot</strong>ï¼šä¼˜å…ˆ <code>React.ReactNode</code></li>
<li><strong>å†™å¿…é¡»æ˜¯ä¸€ä¸ªå…ƒç´ çš„ propsï¼ˆæ¯”å¦‚ iconï¼‰</strong>ï¼šç”¨ <code>React.ReactElement</code></li>
<li><strong>ç»„ä»¶è¿”å›å€¼ç±»å‹</strong>ï¼šé€šå¸¸ä¸éœ€è¦æ‰‹å†™ï¼›å¦‚æœä¸€å®šè¦å†™ï¼ŒReact ç»„ä»¶è¿”å›å€¼æ›´è´´è¿‘ <code>React.ReactElement | null</code>ï¼ˆå®é™…æƒ…å†µä¾èµ–ä½ çš„ç»„ä»¶æ˜¯å¦å¯èƒ½è¿”å› <code>null</code>ï¼‰</li>
</ul>
<p>ä¸€ä¸ªå®¹æ˜“è¸©å‘çš„ç‚¹æ˜¯ï¼š<strong>ç»„ä»¶çš„è¿”å›å€¼å¸¸è¢«è®¤ä¸ºæ˜¯ <code>ReactNode</code></strong>ï¼Œä½†è¿™ä¼šè®©çº¦æŸè¿‡äºå®½æ¾ï¼ˆæ¯”å¦‚ä½ å¯èƒ½å¹¶ä¸å¸Œæœ›å‡½æ•°ç»„ä»¶è¿”å› <code>string</code>ï¼‰ã€‚å®è·µé‡Œæ›´å¸¸è§çš„æ˜¯ä¸å†™è¿”å›ç±»å‹ï¼Œè®© TS æ¨å¯¼ï¼Œæˆ–è€…å†™ <code>JSX.Element</code> / <code>ReactElement | null</code>ã€‚</p>
<hr/>
<h3 data-id="heading-16">ä¸ºä»€ä¹ˆè¿™ä¿©çš„å·®åˆ«è·Ÿ SSR/SEO/Hydration æœ‰å…³ç³»ï¼Ÿ</h3>
<p>å› ä¸º Hydration å…³æ³¨çš„æ˜¯ï¼š<strong>æœåŠ¡ç«¯ç”Ÿæˆçš„ HTML ä¸å®¢æˆ·ç«¯â€œç”¨åŒæ ·çš„æ•°æ®æ¸²æŸ“å‡ºæ¥çš„ ReactElement æ ‘â€æ˜¯å¦ä¸€è‡´</strong>ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼š</p>
<ul>
<li><code>ReactElement</code> æ˜¯ç»“æ„ï¼ˆæ ‘å½¢ UI æè¿°ï¼‰</li>
<li><code>ReactNode</code> æ˜¯ä½ å¯èƒ½å¡è¿›æ ‘é‡Œçš„å„ç§å€¼ï¼ˆåŒ…æ‹¬ç©ºå€¼ã€æ¡ä»¶æ¸²æŸ“ç»“æœã€æ•°ç»„ç­‰ï¼‰</li>
</ul>
<p>å½“ä½ åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å› ä¸ºç¯å¢ƒå·®å¼‚ï¼ˆæ—¶é—´ã€éšæœºæ•°ã€æµè§ˆå™¨ APIï¼‰å¯¼è‡´ <code>ReactNode</code> çš„å–å€¼ä¸åŒï¼Œå°±ä¼šå‡ºç° hydration mismatchï¼ˆå†…å®¹å¯¹ä¸ä¸Šï¼‰ï¼ŒReact ä¼šè­¦å‘Šå¹¶å¯èƒ½å›é€€åˆ°é‡æ–°æ¸²æŸ“ã€‚</p>
<hr/>
<h3 data-id="heading-17">æœ€åä¸€å¥</h3>
<blockquote>
<p><strong>ReactElement æ˜¯ JSX ç¼–è¯‘å‡ºæ¥çš„â€œå…ƒç´ å¯¹è±¡â€ï¼›ReactNode æ˜¯ React èƒ½æ¸²æŸ“çš„â€œæ‰€æœ‰ä¸œè¥¿â€ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[three.js | åˆè¯†3Dä¸–ç•Œ]]></title>    <link>https://juejin.cn/post/7601175299010854927</link>    <guid>https://juejin.cn/post/7601175299010854927</guid>    <pubDate>2026-02-01T04:36:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601175299010854927" data-draft-id="7601077290681843764" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="three.js | åˆè¯†3Dä¸–ç•Œ"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2026-02-01T04:36:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hello_Code"/> <meta itemprop="url" content="https://juejin.cn/user/3423198551742986"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            three.js | åˆè¯†3Dä¸–ç•Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3423198551742986/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hello_Code
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T04:36:55.000Z" title="Sun Feb 01 2026 04:36:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚å¿µç†è§£</h2>
<p>åœ¨3Dä¸–ç•Œï¼Œæˆ–è€…è¯´ä¸‰ç»´ä¸–ç•Œï¼Œæ¯ä¸ªç‰©ä½“ï¼ˆthreeä¸­å¯¹åº”çš„â€œåè¯â€æ˜¯Meshï¼‰éƒ½æœ‰è‡ªå·±çš„å½¢çŠ¶ï¼ˆGeometryï¼‰ï¼Œä»¥åŠæè´¨ï¼ˆMaterialï¼‰ã€‚
åä¸€ä¸‹é¢˜ï¼Œæˆ‘çªç„¶æƒ³åˆ°äº†è¿™å¯ä»¥å…³è”ç°å®ä¸–ç•Œçš„æ‘„å½±ï¼š</p>
<ol>
<li>åŒæ ·éƒ½æ˜¯â€œå°†ç‰©ä½“/äººå±•ç°å‡ºæ¥â€ï¼Œæ‰€ä»¥éœ€è¦æœ‰â€œç‰©ä½“Meshâ€çš„æ¦‚å¿µï¼ˆ3Dä¸­åªæœ‰â€œç‰©ä½“â€ï¼Œä¸€åˆ‡éƒ½æ˜¯â€œç‰©ä½“â€ï¼‰ã€éœ€è¦æœ‰â€œç›¸æœº Cameraâ€çš„æ¦‚å¿µ</li>
<li>ç‰©ä½“/äººçš„å½¢çŠ¶å¯¹ä½ å¦‚ä½•æ‹ç…§ã€æ‹æ‘„è§’åº¦åŒæ ·æœ‰ä¸å¯å¿½è§†çš„å½±å“ï¼Œæ‰€ä»¥éœ€è¦æœ‰â€œåœºæ™¯ Sceneâ€çš„æ¦‚å¿µ</li>
<li>ç‰©ä½“çš„æè´¨åŒæ ·éœ€è¦ä¸åŒçš„â€œå…‰â€å»å®šæ ¼ï¼Œæ‰€ä»¥éœ€è¦æœ‰â€œå…‰â€çš„æ¦‚å¿µ</li>
</ol>
<p>æ˜¯çš„ï¼Œå…‰ï¼
å¦‚åŒç°å®ä¸–ç•Œæœ‰å…‰å’Œé˜´å½±ï¼Œå¯ä»¥å±•ç¤ºä¸åŒçš„æ˜æš—æ•ˆæœä¸€æ ·ï¼Œthreeä¸­ä¹Ÿæœ‰ä¸€ä¸ªâ€œç¯å…‰Lightâ€çš„æ¦‚å¿µã€‚
ç»¼ä¸Šæ‰€è¯´ï¼Œç›¸æœºæ‹å‡ºæ¥çš„æ™¯è‰²æ˜¯ä½“ç°åœ¨â€œç…§ç‰‡â€ä¸Šï¼Œé‚£3Dä¸–ç•Œä¸­ï¼Œå½“ç„¶è¿˜åº”è¯¥æœ‰ä¸€ä¸ªâ€œæ¸²æŸ“å™¨ Rendererâ€çš„æ¦‚å¿µï¼Œè´Ÿè´£æŠŠåœºæ™¯ Sceneã€ç›¸æœº Cameraã€ç¯å…‰ Light è¿™äº›
ç»¼åˆæ¸²æŸ“åˆ° canvas ç”»å¸ƒä¸Šã€‚è¿™å°±æ˜¯threeçš„åŸºæœ¬æ¦‚å¿µäº†ã€‚</p>
<h2 data-id="heading-1">ç¬¬ä¸€æ¬¡å®è·µ</h2>
<p>å…ˆæ¥æ‰“å°ä¸‹threeï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;three-1&lt;/title&gt;
    &lt;style&gt;
        body, html {
            margin: 0;
            padding: 0;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script type="module"&gt;
        import * as THREE from "https://unpkg.com/three@0.174.0/build/three.module.js";
        console.log(THREE)
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>å¦‚å›¾ä»£è¡¨å¼•å…¥æˆåŠŸï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32b5fb3e35344bcd9f7da3bcec6fbece~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGVsbG9fQ29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770525482&amp;x-signature=V9adDAY4fS8vMHh07J7ytkj1Q58%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä¸‹é¢æˆ‘æƒ³åœ¨â€œç”»å¸ƒâ€ä¸­æ”¾ä¸€ä¸ªæ­£æ–¹ä½“ï¼</p>
<blockquote>
<p>ä¸‹é¢ä¾‹å­åªæ˜¯threeå…¶ä¸­ä¸€ä¸ªå°åœºæ™¯ï¼Œéœ€è¦æŸ¥çœ‹å…¶ä»–apiè¯·æµè§ˆå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fthreejs.org%2Fmanual%2F%23zh%2Fprimitives" target="_blank" title="https://threejs.org/manual/#zh/primitives" ref="nofollow noopener noreferrer">three.js</a></p>
</blockquote>
<p>ä¾æ—§æ‹ç…§ â€”â€” æ‹äººä¸å¯èƒ½åªæ‹äººï¼Œéœ€è¦åœ¨ä¸€ä¸ªâ€œåœºæ™¯â€ä¸­æ‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();
</code></pre>
<p>ä¸Šé¢è¯´äº†ï¼Œå’Œâ€œå½¢çŠ¶â€æœ‰å…³çš„åè¯ï¼ˆå…¶å®æ˜¯threeæä¾›çš„æ–¹æ³•ï¼‰å«Geometryï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// BoxGeometryæ˜¯Threeæä¾›çš„åˆ›å»ºâ€œé•¿æ–¹ä½“â€çš„æ–¹æ³•ï¼Œæ¥æ”¶å‚æ•°åˆ†åˆ«ä»£è¡¨é•¿ã€å®½ã€é«˜</span>
<span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>);
</code></pre>
<blockquote>
<p>é™¤äº†é•¿æ–¹ä½“ï¼Œè¿˜æœ‰â€œåœ†æŸ±ä½“CylinderGeometryâ€ã€â€œçƒä½“SphereGeometryâ€ã€â€œåœ†é”¥ConeGeometryâ€ã€â€œçŸ©å½¢å¹³é¢PlaneGeometryâ€ã€â€œåœ†å¹³é¢CircleGeometryâ€æ–¹æ³•</p>
</blockquote>
<p>åˆ«æ€¥ï¼Œç‰©ä½“æ€ä¹ˆèƒ½æ²¡æœ‰é¢œè‰²å‘¢ï¼Ÿè¿˜è®°å¾—â€œæè´¨â€Materialå—ï¼Œæˆ‘ä»¬è®©è¿™ä¸ªç‰©ä½“æ”¯æŒâ€œæ¼«åå°„â€å¹¶ä¸”é¢œè‰²æ˜¯â€œæ©˜è‰²â€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshLambertMaterial</span>(({
 <span class="hljs-attr">color</span>: <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-string">'orange'</span>)
}));
</code></pre>
<blockquote>
<p>é™¤äº†æ¼«åå°„ï¼Œè¿˜æœ‰â€œæ— å…‰å½±å“MeshBasicMaterialâ€ã€â€œé«˜å…‰MeshPhongMaterialâ€ï¼Œä»¥åŠä¸¤ä¸ªç‰©ç†å…‰â€œMeshStandardMaterialâ€å’Œâ€œMeshPhysicalMaterialâ€</p>
</blockquote>
<p>æˆ‘ä»¬åˆ©ç”¨â€œå½¢çŠ¶â€å’Œâ€œæè´¨â€ä¸€èµ·åˆ›å»ºå‡ºä¸€ä¸ªâ€œç‰©ä½“â€ï¼Œå¹¶æ·»åŠ åˆ°â€œåœºæ™¯â€ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material);
<span class="hljs-comment">// å°±åƒäººæ‹ç…§æ—¶è¦ç«™åœ¨å“ªé‡Œä¸€æ ·ï¼Œâ€œç‰©ä½“â€æ€ä¹ˆèƒ½æ²¡æœ‰ä½ç½®å‘¢ï¼Ÿ</span>
mesh.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// xã€yã€zåæ ‡</span>
scene.<span class="hljs-title function_">add</span>(mesh);
</code></pre>
<p>è¿™æ ·ä¸€ä¸ªç‰©ä½“å°±åˆ›å»ºå‡ºæ¥äº†ã€‚
ä½†æ˜¯è¿˜ä¸å¤Ÿã€‚æˆ‘ä»¬è¯´äº†ï¼Œâ€œç‰©ä½“â€è¦è¢«çœ‹åˆ°ï¼Œé™¤äº†æœ‰è¿™ä¸ªç‰©ä½“ï¼Œè¿˜éœ€è¦â€œæœ‰å…‰ç…§å°„â€ã€â€œæœ‰ç›¸æœºæ‹â€ã€â€œæœ‰ç…§ç‰‡æ‰¿è½½â€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-keyword">const</span> pointLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PointLight</span>(<span class="hljs-number">0x00FFFF</span>, <span class="hljs-number">10000</span>);
 pointLight.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">80</span>, <span class="hljs-number">80</span>, <span class="hljs-number">80</span>);
 scene.<span class="hljs-title function_">add</span>(pointLight);
</code></pre>
<p>å…‰æºæœ‰äº†ï¼Œæˆ‘ä»¬è®©ä¸€æŸâ€œè“è‰²â€çš„â€œç‚¹å…‰æºâ€ä»ï¼ˆ80,80,80ï¼‰çš„ä½ç½®ä»¥å¼ºåº¦10000ç…§å‘ç‰©ä½“ï¼ˆå…‰æºé»˜è®¤ç…§å‘åæ ‡0,0,0ï¼‰ã€‚</p>
<blockquote>
<p>threeæ¨¡æ‹Ÿäº†å‡ ç§å…‰æºæ•ˆæœï¼Œé™¤äº†ç‚¹å…‰æºï¼Œè¿˜æœ‰â€œç¯å¢ƒå…‰AmbientLightâ€ã€â€œèšå…‰ç¯å…‰æºSpotLightâ€ã€â€œå¹³è¡Œå…‰DirectionalLightâ€</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript">
 <span class="hljs-keyword">const</span> width = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
 <span class="hljs-keyword">const</span> height = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
 <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">60</span>, width / height, <span class="hljs-number">1</span>, <span class="hljs-number">1000</span>);
 camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">200</span>, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>);
 camera.<span class="hljs-title function_">lookAt</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
 <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>();
 renderer.<span class="hljs-title function_">setSize</span>(width, height)
 renderer.<span class="hljs-title function_">render</span>(scene, camera);
 <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">append</span>(renderer.<span class="hljs-property">domElement</span>);

</code></pre>
<p>ç›¸æœºå’Œç…§ç‰‡ä¹Ÿæœ‰äº†ï¼Œæˆ‘ä»¬çš„ç›¸æœºä½äºï¼ˆ200,200,200ï¼‰ï¼Œçœ‹å‘ï¼ˆ0,0,0ï¼‰ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8f507345cd5460c975df996fecb6bbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGVsbG9fQ29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770525482&amp;x-signature=BakjfdK4bSdYm7Xrwx0EtvuFiaY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ³¨æ„ï¼ä¾æ—§æ‹¿â€œæ‹ç…§â€ç±»æ¯”ï¼Œ3Dä¸–ç•Œä¸€åˆ‡åŸºäºâ€œç›¸æœºCameraâ€ï¼Œæ¯”å¦‚ä¸Šé¢è¿™å¼ å›¾ï¼Œå› ä¸ºç›¸æœºåœ¨ï¼ˆ200,200,200ï¼‰ï¼Œæ‰€ä»¥ä¸»è§†è§’æ˜¯ä¸‰ç»´åæ ‡éƒ½æ˜¯æ­£æ•°å€¼çš„æŸä¸ªä¸­å¿ƒä½ç½®ï¼Œæ‰€ä»¥å›¾ç‰‡ä¸­ç‰©ä½“æ˜¯â€œæŸä¸ªç‚¹æœå‘å±å¹•â€ï¼</p>
<p>æ‹¿äººçœ¼æ¥è¯´ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªç‰©ä½“ï¼Œå…¶å®æ˜¯åœ¨çœ‹ä¸€ä¸ªâ€œè§†é”¥ä½“â€èŒƒå›´å†…çš„åœºæ™¯ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca51d3746f604408b9fa24790c1b116d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGVsbG9fQ29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770525482&amp;x-signature=FAzUySzub9D1%2FP8ULuk8rWIBZQ8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ç›¸æœºæ‹ç‰©ä½“ä¹Ÿæ˜¯ä¸€æ ·ã€‚
æ‰€ä»¥Cameraçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯fovï¼Œç›¸æœºè§†é”¥ä½“ç«–ç›´æ–¹å‘è§†é‡è§’åº¦ï¼Œè¿™é‡Œæˆ‘ä»¬è®¾ç½®çš„æ˜¯60ã€‚æ”¹æˆ20è¯•è¯•çœ‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0dbd8cbbf0844c387e3e70d42ec54de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGVsbG9fQ29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770525482&amp;x-signature=DdeuvwITLY39vSO6WF%2Fyf%2Bv20Uo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
â€œçœ‹â€ä¸å®Œæ•´äº†ã€‚</p>
<p>Cameraçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å®½é«˜æ¯”ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªè§†æ¤ä½“çš„å®½å’Œé«˜çš„æ¯”ä¾‹ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºCanvasç”»å¸ƒå®½é«˜æ¯”width / heightã€‚
ç¬¬ä¸‰ä¸ªå’Œç¬¬å››ä¸ªå‚æ•°æ˜¯å±•ç¤ºè§†æ¤ä½“çš„å“ªä¸€éƒ¨åˆ†ï¼Œæœ€è¿‘æ˜¯å“ªï¼ˆç›¸æœºè§†é”¥ä½“è¿‘è£æˆªé¢ç›¸å¯¹ç›¸æœºè·ç¦»ï¼‰ï¼Œæœ€è¿œæ˜¯å“ªï¼ˆç›¸æœºè§†é”¥ä½“è¿œè£æˆªé¢ç›¸å¯¹ç›¸æœºè·ç¦»ï¼‰ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°å¾ˆå¤š3Dçš„ç½‘ç«™éƒ½æ”¯æŒé€šè¿‡é¼ æ ‡æ‹–åŠ¨æ¥ 360 åº¦è§‚å¯Ÿã€‚è¿™ä¸ªç”¨ Three æä¾›çš„è½¨é“æ§åˆ¶å™¨ OrbitControls å³å¯å®ç°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼•å…¥</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">OrbitControls</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'https://unpkg.com/three@0.174.0/examples/jsm/controls/OrbitControls.js'</span>;
</code></pre>
<p>ç„¶ååœ¨â€œæ¸²æŸ“renderâ€åæ·»åŠ ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">
    <span class="hljs-comment">//...</span>
    <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">60</span>, width / height, <span class="hljs-number">1</span>, <span class="hljs-number">1000</span>);
    <span class="hljs-comment">//...</span>
    <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>();
    <span class="hljs-comment">//...</span>
    <span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(controls)

</code></pre>
<p>ä½†æ˜¯åªæœ‰è¿™æ ·æ˜¯ä¸è¡Œçš„ï¼Œrendereråˆ›å»ºåœºæ™¯åªè¢«è°ƒç”¨äº†ä¸€æ¬¡ï¼Œæ²¡æ³•å®Œæˆâ€œæ‹–åŠ¨â€ã€‚æ‰€è°“æ‹–åŠ¨å°±æ˜¯ä¸æ–­çš„æŠŠæ–°åœºæ™¯æ¸²æŸ“åˆ°ç”»å¸ƒä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å°è£…å‡½æ•°å¹¶ä¸æ–­è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">- renderer.<span class="hljs-title function_">render</span>(scene, camera);

+ <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
+     renderer.<span class="hljs-title function_">render</span>(scene, camera);
+     <span class="hljs-title function_">requestAnimationFrame</span>(render)
+ }
+ <span class="hljs-title function_">render</span>()
</code></pre>
<p>æŠŠ render æ”¹æˆæ¸²æŸ“å¾ªç¯ï¼Œç”¨ requestAnimationFrame æ¥ä¸€å¸§å¸§çš„å¾ªç¯æ¸²æŸ“ï¼Œä½¿è°ƒç”¨é¢‘ç‡å’Œæ˜¾ç¤ºå™¨åˆ·æ–°ç‡ä¸€è‡´ã€‚</p>
<blockquote>
<p>ç¬”è€…å‰æ®µæ—¶é—´å¼„äº†ä¸€ä¸ªå¾®ä¿¡å…¬ä¼—å·ï¼šå‰ç«¯Codeæ–°è°ˆã€‚é‡Œé¢æš‚æ—¶æœ‰webrtcã€å‰ç«¯é¢è¯•å’Œç”¨æˆ·ä½“éªŒç³»åˆ—æ–‡ç« ï¼Œæœ€è¿‘æš‚æ—¶æç½®äº†webrtcï¼Œæ–°å¼€äº†ä¸€ä¸ªç³»åˆ—â€œthree.jsâ€ï¼Œæ¬¢è¿å…³æ³¨ï¼å¸Œæœ›èƒ½å¤Ÿå¸®åˆ°å¤§å®¶ï¼Œä¹Ÿå¸Œæœ›èƒ½äº’ç›¸äº¤æµï¼ä¸€èµ·å­¦ä¹ å…±åŒè¿›æ­¥</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS3åŠ¨ç”»ä½¿ç”¨æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7601075423003377700</link>    <guid>https://juejin.cn/post/7601075423003377700</guid>    <pubDate>2026-02-01T04:37:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601075423003377700" data-draft-id="7601159804490547219" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS3åŠ¨ç”»ä½¿ç”¨æ•™ç¨‹"/> <meta itemprop="keywords" content="CSS"/> <meta itemprop="datePublished" content="2026-02-01T04:37:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·22176592792"/> <meta itemprop="url" content="https://juejin.cn/user/4461135061323432"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS3åŠ¨ç”»ä½¿ç”¨æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4461135061323432/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·22176592792
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T04:37:57.000Z" title="Sun Feb 01 2026 04:37:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æƒ³è¦ä¸€ä»½æ›´è¯¦ç»†ã€æ›´ç³»ç»Ÿçš„CSS3åŠ¨ç”»ï¼ˆanimationï¼‰ä½¿ç”¨æ•™ç¨‹ï¼Œæˆ‘ä¼šä»åŸºç¡€æ¦‚å¿µåˆ°å®æˆ˜æ¡ˆä¾‹ï¼Œä¸€æ­¥æ­¥æ‹†è§£CSS3åŠ¨ç”»çš„æ ¸å¿ƒç”¨æ³•ï¼Œè®©ä½ èƒ½è½»æ¾ä¸Šæ‰‹å¹¶çµæ´»è¿ç”¨ã€‚</p>
<h3 data-id="heading-0">CSS3 åŠ¨ç”»ï¼ˆanimationï¼‰å…¨æ•™ç¨‹</h3>
<p>CSS3åŠ¨ç”»æ˜¯é€šè¿‡â€‹<code>â€‹@keyframesâ€‹</code>â€‹å®šä¹‰å…³é”®å¸§ï¼Œå†é€šè¿‡â€‹<code>â€‹animationâ€‹</code>â€‹å±æ€§å°†åŠ¨ç”»åº”ç”¨åˆ°å…ƒç´ ä¸Šï¼Œèƒ½å®ç°æ¯”â€‹<code>â€‹transitionâ€‹</code>â€‹æ›´å¤æ‚ã€æ›´çµæ´»çš„åŠ¨æ€æ•ˆæœï¼Œä¸”æ— éœ€JavaScriptå‚ä¸ã€‚</p>
<h4 data-id="heading-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µç†è§£</h4>
<p>åœ¨å¼€å§‹å†™ä»£ç å‰ï¼Œå…ˆç†æ¸…ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>@keyframesï¼ˆå…³é”®å¸§ï¼‰</strong> ï¼šå®šä¹‰åŠ¨ç”»çš„"å…³é”®çŠ¶æ€"ï¼Œæ¯”å¦‚èµ·å§‹ã€ä¸­é—´ã€ç»“æŸæ—¶å…ƒç´ çš„æ ·å¼ã€‚</li>
<li><strong>animation å±æ€§</strong>ï¼šå°†å®šä¹‰å¥½çš„å…³é”®å¸§åŠ¨ç”»åº”ç”¨åˆ°å…ƒç´ ä¸Šï¼Œå¹¶è®¾ç½®åŠ¨ç”»çš„æ—¶é•¿ã€å¾ªç¯ã€é€Ÿåº¦ç­‰è§„åˆ™ã€‚</li>
</ol>
<h4 data-id="heading-2">äºŒã€åŸºç¡€è¯­æ³•ä¸æ­¥éª¤</h4>
<h5 data-id="heading-3">æ­¥éª¤1ï¼šå®šä¹‰å…³é”®å¸§ï¼ˆ@keyframesï¼‰</h5>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ ¼å¼ï¼š@keyframes åŠ¨ç”»åç§° { å…³é”®å¸§è§„åˆ™ } */</span>
<span class="hljs-keyword">@keyframes</span> åŠ¨ç”»åç§° {
  <span class="hljs-comment">/* 0% è¡¨ç¤ºåŠ¨ç”»å¼€å§‹ï¼ˆä¹Ÿå¯ä»¥ç”¨ from æ›¿ä»£ï¼‰ */</span>
  <span class="hljs-number">0%</span> {
    <span class="hljs-comment">/* èµ·å§‹æ ·å¼ */</span>
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>);
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  }
  <span class="hljs-comment">/* 50% è¡¨ç¤ºåŠ¨ç”»è¿›è¡Œåˆ°ä¸€åŠ */</span>
  <span class="hljs-number">50%</span> {
    <span class="hljs-comment">/* ä¸­é—´æ ·å¼ */</span>
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">100px</span>);
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  }
  <span class="hljs-comment">/* 100% è¡¨ç¤ºåŠ¨ç”»ç»“æŸï¼ˆä¹Ÿå¯ä»¥ç”¨ to æ›¿ä»£ï¼‰ */</span>
  <span class="hljs-number">100%</span> {
    <span class="hljs-comment">/* ç»“æŸæ ·å¼ */</span>
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">200px</span>);
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  }
}
</code></pre>
<h5 data-id="heading-4">æ­¥éª¤2ï¼šåº”ç”¨åŠ¨ç”»ï¼ˆanimation å±æ€§ï¼‰</h5>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç»™å…ƒç´ æ·»åŠ åŠ¨ç”» */</span>
<span class="hljs-selector-class">.animated-box</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#007bff</span>;
  
  <span class="hljs-comment">/* æ ¸å¿ƒï¼šanimation å¤åˆå±æ€§ï¼ˆæ¨èï¼‰ */</span>
  <span class="hljs-comment">/* æ ¼å¼ï¼šåŠ¨ç”»åç§° æ—¶é•¿ é€Ÿåº¦æ›²çº¿ å»¶è¿Ÿ å¾ªç¯æ¬¡æ•° æ–¹å‘ å¡«å……æ¨¡å¼ æ’­æ”¾çŠ¶æ€ */</span>
  <span class="hljs-attribute">animation</span>: åŠ¨ç”»åç§° <span class="hljs-number">2s</span> ease <span class="hljs-number">0.5s</span> infinite alternate forwards running;
  
  <span class="hljs-comment">/* ä¹Ÿå¯ä»¥æ‹†åˆ†ä¸ºå•ä¸ªå±æ€§ï¼ˆä¾¿äºç†è§£å’Œè°ƒè¯•ï¼‰ */</span>
  <span class="hljs-comment">/* animation-name: åŠ¨ç”»åç§°;          // å¿…é€‰ï¼šæŒ‡å®šå…³é”®å¸§åç§° */</span>
  <span class="hljs-comment">/* animation-duration: 2s;            // å¿…é€‰ï¼šåŠ¨ç”»æ—¶é•¿ï¼ˆé»˜è®¤0ï¼Œæ— æ•ˆæœï¼‰ */</span>
  <span class="hljs-comment">/* animation-timing-function: ease;  // å¯é€‰ï¼šé€Ÿåº¦æ›²çº¿ï¼ˆé»˜è®¤easeï¼‰ */</span>
  <span class="hljs-comment">/* animation-delay: 0.5s;             // å¯é€‰ï¼šå»¶è¿Ÿæ’­æ”¾ï¼ˆé»˜è®¤0ï¼‰ */</span>
  <span class="hljs-comment">/* animation-iteration-count: infinite; // å¯é€‰ï¼šå¾ªç¯æ¬¡æ•°ï¼ˆé»˜è®¤1ï¼Œinfiniteæ— é™ï¼‰ */</span>
  <span class="hljs-comment">/* animation-direction: alternate;    // å¯é€‰ï¼šæ’­æ”¾æ–¹å‘ï¼ˆé»˜è®¤normalï¼‰ */</span>
  <span class="hljs-comment">/* animation-fill-mode: forwards;     // å¯é€‰ï¼šåŠ¨ç”»ç»“æŸåæ ·å¼ï¼ˆé»˜è®¤noneï¼‰ */</span>
  <span class="hljs-comment">/* animation-play-state: running;     // å¯é€‰ï¼šæ’­æ”¾çŠ¶æ€ï¼ˆé»˜è®¤runningï¼Œpausedæš‚åœï¼‰ */</span>
}
</code></pre>
<h4 data-id="heading-5">ä¸‰ã€å…³é”®å±æ€§è¯¦è§£ï¼ˆå¿…æŒæ¡ï¼‰</h4>
<h5 data-id="heading-6">1. é€Ÿåº¦æ›²çº¿ï¼ˆanimation-timing-functionï¼‰</h5>
<p>æ§åˆ¶åŠ¨ç”»çš„æ’­æ”¾é€Ÿåº¦ï¼Œå¸¸ç”¨å€¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å¸¸ç”¨å€¼ç¤ºä¾‹ */</span>
<span class="hljs-selector-class">.animated-box</span> {
  <span class="hljs-comment">/* linearï¼šåŒ€é€Ÿï¼ˆæœ€å¸¸ç”¨ï¼‰ */</span>
  <span class="hljs-attribute">animation-timing-function</span>: linear;
  <span class="hljs-comment">/* easeï¼šæ…¢â†’å¿«â†’æ…¢ï¼ˆé»˜è®¤ï¼‰ */</span>
  <span class="hljs-comment">/* ease-inï¼šæ…¢â†’å¿« */</span>
  <span class="hljs-comment">/* ease-outï¼šå¿«â†’æ…¢ */</span>
  <span class="hljs-comment">/* ease-in-outï¼šæ…¢â†’å¿«â†’æ…¢ï¼ˆæ¯”easeæ›´å¹³ç¼“ï¼‰ */</span>
  <span class="hljs-comment">/* è‡ªå®šä¹‰è´å¡å°”æ›²çº¿ï¼ˆç²¾å‡†æ§åˆ¶ï¼‰ */</span>
  <span class="hljs-comment">/* animation-timing-function: cubic-bezier(0.1, 0.7, 1.0, 0.1); */</span>
}
</code></pre>
<h5 data-id="heading-7">2. æ’­æ”¾æ–¹å‘ï¼ˆanimation-directionï¼‰</h5>
<p>æ§åˆ¶åŠ¨ç”»æ˜¯å¦åå‘æ’­æ”¾ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.animated-box</span> {
  <span class="hljs-comment">/* normalï¼šæ­£å¸¸æ’­æ”¾ï¼ˆé»˜è®¤ï¼‰ï¼Œä»0%â†’100% */</span>
  <span class="hljs-comment">/* alternateï¼šäº¤æ›¿æ’­æ”¾ï¼Œå¥‡æ•°æ¬¡æ­£å‘ï¼ˆ0%â†’100%ï¼‰ï¼Œå¶æ•°æ¬¡åå‘ï¼ˆ100%â†’0%ï¼‰ */</span>
  <span class="hljs-comment">/* reverseï¼šåå‘æ’­æ”¾ï¼ˆ100%â†’0%ï¼‰ */</span>
  <span class="hljs-comment">/* alternate-reverseï¼šåå‘äº¤æ›¿æ’­æ”¾ */</span>
  <span class="hljs-attribute">animation-direction</span>: alternate;
}
</code></pre>
<h5 data-id="heading-8">3. å¡«å……æ¨¡å¼ï¼ˆanimation-fill-modeï¼‰</h5>
<p>æ§åˆ¶åŠ¨ç”»å¼€å§‹å‰/ç»“æŸåçš„å…ƒç´ æ ·å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.animated-box</span> {
  <span class="hljs-comment">/* noneï¼šé»˜è®¤ï¼ŒåŠ¨ç”»ç»“æŸåå›åˆ°åˆå§‹æ ·å¼ */</span>
  <span class="hljs-comment">/* forwardsï¼šåŠ¨ç”»ç»“æŸåï¼Œä¿æŒæœ€åä¸€å¸§æ ·å¼ */</span>
  <span class="hljs-comment">/* backwardsï¼šåŠ¨ç”»å»¶è¿ŸæœŸé—´ï¼Œä¿æŒç¬¬ä¸€å¸§æ ·å¼ */</span>
  <span class="hljs-comment">/* bothï¼šåŒæ—¶åº”ç”¨forwardså’Œbackwards */</span>
  <span class="hljs-attribute">animation-fill-mode</span>: forwards;
}
</code></pre>
<h5 data-id="heading-9">4. æ’­æ”¾çŠ¶æ€ï¼ˆanimation-play-stateï¼‰</h5>
<p>å¸¸ç”¨äºé€šè¿‡:hoverã€JSæ§åˆ¶åŠ¨ç”»æš‚åœ/æ’­æ”¾ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.animated-box</span> {
  <span class="hljs-attribute">animation</span>: move <span class="hljs-number">2s</span> infinite;
}
<span class="hljs-comment">/* é¼ æ ‡æ‚¬åœæ—¶æš‚åœåŠ¨ç”» */</span>
<span class="hljs-selector-class">.animated-box</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">animation-play-state</span>: paused;
}
</code></pre>
<h4 data-id="heading-10">å››ã€å®æˆ˜æ¡ˆä¾‹ï¼ˆç›´æ¥å¤ç”¨ï¼‰</h4>
<h5 data-id="heading-11">æ¡ˆä¾‹1ï¼šå‘¼å¸ç¯æ•ˆæœï¼ˆé€æ˜åº¦å˜åŒ–ï¼‰</h5>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å®šä¹‰å…³é”®å¸§ */</span>
<span class="hljs-keyword">@keyframes</span> breathe {
  <span class="hljs-number">0%</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>);
  }
  <span class="hljs-number">50%</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.1</span>);
  }
  <span class="hljs-number">100%</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>);
  }
}

<span class="hljs-comment">/* åº”ç”¨åŠ¨ç”» */</span>
<span class="hljs-selector-class">.breathe-box</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">80px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#ff6700</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-comment">/* åŒ€é€Ÿã€æ— é™å¾ªç¯ */</span>
  <span class="hljs-attribute">animation</span>: breathe <span class="hljs-number">2s</span> linear infinite;
}
</code></pre>
<h5 data-id="heading-12">æ¡ˆä¾‹2ï¼šåŠ è½½åŠ¨ç”»ï¼ˆæ—‹è½¬+å¤šå…ƒç´ ï¼‰</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- HTMLç»“æ„ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loader"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loader-item"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loader-item"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loader-item"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å®šä¹‰æ—‹è½¬å…³é”®å¸§ */</span>
<span class="hljs-keyword">@keyframes</span> load {
  <span class="hljs-number">0%</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0</span>);
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.8</span>;
  }
  <span class="hljs-number">50%</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">20px</span>);
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.2</span>;
  }
  <span class="hljs-number">100%</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0</span>);
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.8</span>;
  }
}

<span class="hljs-selector-class">.loader</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
}

<span class="hljs-selector-class">.loader-item</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#007bff</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
  <span class="hljs-attribute">animation</span>: load <span class="hljs-number">1.2s</span> ease infinite;
}
<span class="hljs-comment">/* ç»™æ¯ä¸ªå°çƒè®¾ç½®ä¸åŒå»¶è¿Ÿï¼Œå®ç°é”™è½æ•ˆæœ */</span>
<span class="hljs-selector-class">.loader-item</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) {
  <span class="hljs-attribute">animation-delay</span>: <span class="hljs-number">0.2s</span>;
}
<span class="hljs-selector-class">.loader-item</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>) {
  <span class="hljs-attribute">animation-delay</span>: <span class="hljs-number">0.4s</span>;
}
</code></pre>
<h5 data-id="heading-13">æ¡ˆä¾‹3ï¼šæ–‡å­—æ¸å…¥åŠ¨ç”»</h5>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@keyframes</span> text-fade {
  <span class="hljs-number">0%</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">20px</span>);
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  }
  <span class="hljs-number">100%</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0</span>);
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  }
}

<span class="hljs-selector-class">.fade-text</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
  <span class="hljs-attribute">animation</span>: text-fade <span class="hljs-number">0.8s</span> ease forwards;
  <span class="hljs-comment">/* åˆå§‹çŠ¶æ€éšè— */</span>
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-14">äº”ã€ä½¿ç”¨æ³¨æ„äº‹é¡¹</h4>
<ol>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä¼˜å…ˆä½¿ç”¨â€‹<code>â€‹transformâ€‹</code>â€‹å’Œâ€‹<code>â€‹opacityâ€‹</code>â€‹å±æ€§åšåŠ¨ç”»ï¼ˆæµè§ˆå™¨ç¡¬ä»¶åŠ é€Ÿï¼Œæ— é‡ç»˜ï¼‰ï¼Œé¿å…ç”¨â€‹<code>â€‹widthâ€‹</code>â€‹ã€â€‹<code>â€‹heightâ€‹</code>â€‹ã€â€‹<code>â€‹topâ€‹</code>â€‹ã€â€‹<code>â€‹leftâ€‹</code>â€‹ï¼ˆä¼šè§¦å‘é¢‘ç¹é‡æ’ï¼Œå¡é¡¿ï¼‰ã€‚</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šç°ä»£æµè§ˆå™¨ï¼ˆChrome/Firefox/Safari/Edgeï¼‰å‡æ”¯æŒCSS3åŠ¨ç”»ï¼Œæ— éœ€åŠ å‰ç¼€ï¼›å¦‚éœ€å…¼å®¹è€æ—§æµè§ˆå™¨ï¼ˆå¦‚IE10-ï¼‰ï¼Œå¯åŠ å‰ç¼€â€‹<code>â€‹-webkit-â€‹</code>â€‹ï¼ˆå¦‚â€‹<code>â€‹@-webkit-keyframesâ€‹</code>â€‹ã€â€‹<code>â€‹-webkit-animationâ€‹</code>â€‹ï¼‰ã€‚</li>
<li><strong>åŠ¨ç”»æš‚åœ</strong>ï¼šé€šè¿‡â€‹<code>â€‹animation-play-state: pausedâ€‹</code>â€‹æš‚åœåŠ¨ç”»ï¼Œæ¯”é‡æ–°è®¾ç½®æ—¶é•¿ä¸º0æ›´ä¼˜é›…ã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-15">æ€»ç»“</h4>
<ol>
<li><strong>æ ¸å¿ƒç»“æ„</strong>ï¼šCSS3åŠ¨ç”»ç”±â€‹<code>â€‹@keyframesâ€‹</code>â€‹ï¼ˆå®šä¹‰å…³é”®å¸§ï¼‰å’Œâ€‹<code>â€‹animationâ€‹</code>â€‹ï¼ˆåº”ç”¨åŠ¨ç”»ï¼‰ä¸¤éƒ¨åˆ†ç»„æˆï¼Œâ€‹<code>â€‹animation-durationâ€‹</code>â€‹æ˜¯å¿…é€‰å±æ€§ï¼ˆå¦åˆ™æ— åŠ¨ç”»æ•ˆæœï¼‰ã€‚</li>
<li><strong>å¸¸ç”¨å±æ€§</strong>ï¼šâ€‹<code>â€‹animation-iteration-count: infiniteâ€‹</code>â€‹ï¼ˆæ— é™å¾ªç¯ï¼‰ã€â€‹<code>â€‹animation-direction: alternateâ€‹</code>â€‹ï¼ˆäº¤æ›¿æ’­æ”¾ï¼‰ã€â€‹<code>â€‹animation-fill-mode: forwardsâ€‹</code>â€‹ï¼ˆä¿æŒç»“æŸæ ·å¼ï¼‰æ˜¯é«˜é¢‘ç»„åˆã€‚</li>
<li><strong>æ€§èƒ½åŸåˆ™</strong>ï¼šåŠ¨ç”»ä¼˜å…ˆæ“ä½œâ€‹<code>â€‹transformâ€‹</code>â€‹å’Œâ€‹<code>â€‹opacityâ€‹</code>â€‹ï¼Œé¿å…è§¦å‘é¡µé¢é‡æ’ï¼Œä¿è¯åŠ¨ç”»æµç•…ã€‚</li>
</ol>
<p>ä½ å¯ä»¥æŠŠè¿™äº›æ¡ˆä¾‹ä»£ç å¤åˆ¶åˆ°HTMLæ–‡ä»¶ä¸­è¿è¡Œï¼Œä¿®æ”¹å…³é”®å¸§çš„æ ·å¼ã€åŠ¨ç”»æ—¶é•¿ã€é€Ÿåº¦æ›²çº¿ç­‰å‚æ•°ï¼Œç›´è§‚æ„Ÿå—ä¸åŒè®¾ç½®çš„æ•ˆæœï¼Œå¾ˆå¿«å°±èƒ½ç†Ÿç»ƒæŒæ¡ã€‚å¦‚æœæƒ³å®ç°æŸä¸ªç‰¹å®šçš„åŠ¨ç”»æ•ˆæœï¼ˆæ¯”å¦‚å¼¹è·³ã€æ»‘åŠ¨ã€é—ªçƒï¼‰ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šé’ˆå¯¹æ€§ç»™å‡ºä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥æ‹†è§£SpringMvcçˆ¶å­å®¹å™¨æ„å»ºå…¨æµç¨‹]]></title>    <link>https://juejin.cn/post/7601144981171241010</link>    <guid>https://juejin.cn/post/7601144981171241010</guid>    <pubDate>2026-02-01T07:33:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601144981171241010" data-draft-id="7520820286565826569" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥æ‹†è§£SpringMvcçˆ¶å­å®¹å™¨æ„å»ºå…¨æµç¨‹"/> <meta itemprop="keywords" content="åç«¯,Spring Boot"/> <meta itemprop="datePublished" content="2026-02-01T07:33:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¯…èˆª"/> <meta itemprop="url" content="https://juejin.cn/user/615331640389037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥æ‹†è§£SpringMvcçˆ¶å­å®¹å™¨æ„å»ºå…¨æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/615331640389037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¯…èˆª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T07:33:38.000Z" title="Sun Feb 01 2026 07:33:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="" data-highlight-key="atelier-heath-light">.hljs-comment,.hljs-quote{color:#776977}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ca402b}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#a65926}.hljs-bullet,.hljs-string,.hljs-symbol{color:#918b3b}.hljs-section,.hljs-title{color:#516aec}.hljs-keyword,.hljs-selector-tag{color:#7b59c0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f7f3f7;color:#695d69}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<blockquote>
<p>æ€è€ƒï¼Œè¾“å‡ºï¼Œæ²‰æ·€ã€‚ç”¨é€šä¿—çš„è¯­è¨€é™ˆè¿°æŠ€æœ¯ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½æœ‰æ‰€æ”¶è·ã€‚<br/>
ä½œè€…ï¼šæ¯…èˆªğŸ˜œ</p>
</blockquote>
<hr/>
<blockquote>
<p>Â   Â  åœ¨ä½¿ç”¨<code>SpringMvc</code>ä¸­ï¼Œæˆ‘ä»¬ä¸å¯é¿å…çš„æ€»æ˜¯ä¼šæ¶‰åŠåˆ°çˆ¶å­å®¹å™¨çš„ç›¸å…³æ¦‚å¿µï¼Œè€Œä¸€æ¦‚å¿µå…¶å®å¹¶é<code>Spring</code>æ‰€ç‹¬åˆ›ã€‚è¿™å…¶å®æ˜¯<strong>è½¯ä»¶æ¶æ„ä¸­å±‚çº§åŒ–èµ„æºç®¡ç†çš„é€šç”¨è®¾è®¡æ€æƒ³</strong>ï¼Œ<code>Spring</code>æ¡†æ¶åªæ˜¯å°†è¿™ä¸€æ€æƒ³è½åœ°åˆ° <code>IOC</code>å®¹å™¨ä½“ç³»ä¸­å¹¶å½¢æˆäº†æ ‡å‡†åŒ–å®ç°ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å­¦ä¹ äº†è§£<code>SpringMVC</code>çš„è¿‡ç¨‹ä¸­ï¼Œæ¡†æ¶å†…å®¹éƒ¨é€šå¸¸ä¼šæ„å»ºä¸¤ä¸ª<code>Bean</code>å®¹å™¨ï¼Œä¸¤ä¸ªå®¹å™¨ç›¸äº’ç»‘å®šï¼Œä»è€Œå½¢æˆ<strong>çˆ¶å­å®¹å™¨</strong>çš„æ¦‚å¿µã€‚å®¹å™¨é—´å€ŸåŠ©å•å‘å¯è§çš„å±‚çº§å…³ç³»å®ç° <code>Bean</code> èŒè´£çš„éš”ç¦»ä¸æœ‰åºç®¡ç†ã€‚</p>
<p>å…¶ä¸­ï¼Œçˆ¶å®¹å™¨ä½œä¸ºå…¨å±€æ ¹å®¹å™¨ï¼Œè´Ÿè´£ç®¡ç† <code>Serviceã€Repository</code>ã€æ•°æ®æºç­‰é <code>Web</code> å±‚æ ¸å¿ƒ <code>Bean</code>ï¼›è€Œå­å®¹å™¨åˆ™å½’å±äº <code>Spring MVC</code> æ ¸å¿ƒç»„ä»¶ <code>DispatcherServlet</code>ï¼Œä¸“é—¨ç®¡ç† <code>Controller</code>ã€è§†å›¾è§£æå™¨ç­‰<code>Web</code> å±‚ç›¸å…³çš„<code>Bean</code>ä¿¡æ¯ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¾¿ä» <code>SpringMVC</code>æºç çš„è§’åº¦æ¥æ·±å…¥å‰–æ<code>SpringMVC</code>å†…éƒ¨åŒå®¹å™¨çš„æ„å»ºå…¨æµç¨‹ã€‚</p>
<h2 data-id="heading-1"><code>SpringMVC</code>å®¹å™¨æ„å»ºæµç¨‹</h2>
<h3 data-id="heading-2">çˆ¶å®¹å™¨æ„å»º</h3>
<p>åœ¨ä½¿ç”¨<code>SpringMVC</code>æ—¶ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šåœ¨<code>web.xml</code>æ–‡ä»¶ä¸­é…ç½®ä¸€ä¸ªå«åš<code>ContextLoaderListener</code>çš„ç›‘å¬å™¨ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.
            context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span>

</code></pre>
<p>è€Œ<code>ContextLoaderListener</code>é»˜è®¤ä¼šå®ç°<code>ServletContextListener</code>æ¥å£ã€‚è€Œå½“<code> Tomcat</code>å¯åŠ¨å¹¶å®Œæˆ<code>ServletContext</code>ä¸Šä¸‹æ–‡çš„åˆ›å»ºåï¼Œä¼šè‡ªåŠ¨è§¦å‘<code>ServletContextEvent</code>äº‹ä»¶ã€‚</p>
<p>æ­¤æ—¶<code>ContextLoaderListener</code>ä½œä¸ºç›‘å¬å™¨ï¼Œä¼šæ¥æ”¶åˆ°ç›¸å…³äº‹ä»¶å¹¶æ‰§è¡Œ<code>contextInitialized()</code>å›è°ƒæ–¹æ³•ï¼›è¿›è€Œè°ƒç”¨å†…éƒ¨<code>initWebApplicationContext()</code>æ–¹æ³•ï¼Œä»è€Œå®Œæˆå¯åŠ¨å¹¶åˆå§‹åŒ–<code>Spring IoC</code>ã€‚</p>
<p>(PSï¼šæœ‰å…³<code>ContextLoaderListener</code>çš„ä»‹ç»å¯å‚è€ƒï¼š<a href="https://juejin.cn/post/7256759718811648058" target="_blank" title="https://juejin.cn/post/7256759718811648058">SpringMVCæµç¨‹åˆ†æ(ä¸€)ï¼šä»ä¸€è¡Œé…ç½®å…¥æ‰‹ï¼Œææ‡‚webç¯å¢ƒä¸‹Iocå®¹å™¨çš„æ„å»º</a>)</p>
<h3 data-id="heading-3">å­å®¹å™¨æ„å»º</h3>
<p>åœ¨æ¢³ç†å®Œ <code>SpringMVC</code> çˆ¶å®¹å™¨çš„æ„å»ºè„‰ç»œåï¼Œæˆ‘ä»¬ç»§ç»­æ·±å…¥å­å®¹å™¨çš„å®ç°æµç¨‹ï¼Œå»¶ç»­å‰æ–‡çš„åˆ†ææ€è·¯ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä»é…ç½®æ–‡ä»¶è¿™ä¸€åŸºç¡€ç¯èŠ‚åˆ‡å…¥ã€‚åœ¨æœ€å¼€å§‹æ¥è§¦<code>SpringMVC</code>æ—¶ï¼Œå¯¹äº<code>DispatcherServlet</code>çš„åŠ è½½ï¼Œæˆ‘ä»¬é€šå¸¸é€šè¿‡åœ¨<code>web.xml</code>ä¸­é…ç½®å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span> 
  <span class="hljs-comment">&lt;!-- Servlet åç§°ï¼Œè‡ªå®šä¹‰ï¼ˆéœ€ä¸ä¸‹æ–¹ servlet-mapping å¯¹åº”ï¼‰ --&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>dispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
       <span class="hljs-comment">&lt;!-- DispatcherServlet å…¨ç±»åï¼ˆå¿…é€‰ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet
    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span>
</code></pre>
<p>ä¸Šè¿°é…ç½®ä¿¡æ¯çš„è§£æå€ŸåŠ©<code>Tomcat</code>æ¥å®Œæˆã€‚å…·ä½“æ¥çœ‹ï¼Œå½“<code>Tomcat</code>å¯åŠ¨å¹¶åˆå§‹åŒ–<code> Web</code> åº”ç”¨æ—¶ï¼Œä¼šä¼˜å…ˆæ‰«æè§£æåº”ç”¨çš„éƒ¨ç½²æè¿°æ–‡ä»¶ <code>web.xml</code>ï¼Œä»ä¸­è¯†åˆ« <code>&lt;servlet&gt;</code> æ ‡ç­¾å®šä¹‰ï¼Œæå–å‡º<code>Servlet</code>çš„åç§°ã€å…¨ç±»ååŠåˆå§‹åŒ–å‚æ•°ç­‰æ ¸å¿ƒé…ç½®ä¿¡æ¯ã€‚éšå <code>Tomcat</code> å†…ç½®çš„ <code>ServletContainer</code> ä¼šæ ¹æ®è§£æåˆ°çš„ç±»åï¼Œé€šè¿‡ç±»åŠ è½½å™¨åŠ è½½ <code>DispatcherServlet</code> å¹¶å®Œæˆå®ä¾‹åŒ–ã€‚</p>
<p>å½“ç›¸å…³<code>Servlet</code>å®ŒæˆåŠ è½½åï¼Œ<code>Tomcat</code> ä¼šåœ¨å¯åŠ¨é˜¶æ®µç«‹å³è°ƒç”¨å…¶ <code>init()</code> æ–¹æ³•å®Œæˆåˆå§‹åŒ–ï¼Œ<code>init()</code> æ–¹æ³•å®Œæˆç›¸å…³<code>Servlet</code>çš„åˆå§‹åŒ–æ“ä½œã€‚å…·ä½“åˆ°<code>DispatcherServlet</code>ä¸­æ¥çœ‹ï¼Œå…¶å®¹å™¨åˆå§‹åŒ–é“¾è·¯æ•´ä½“å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad4ae6fc49964426a33c72b15109a615~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q-F6Iiq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770536017&amp;x-signature=tVOZdxhwccbHZblMB2nau2eyud4%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p><code>FrameworkServlet # initWebApplicationContext()</code></p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
* åˆå§‹åŒ–Webåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡
* 
* <span class="hljs-doctag">@return</span> åˆå§‹åŒ–åçš„Webåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡
*/</span>
<span class="hljs-keyword">protected</span> WebApplicationContext <span class="hljs-title function_">initWebApplicationContext</span><span class="hljs-params">()</span> {
  <span class="hljs-type">WebApplicationContext</span> <span class="hljs-variable">rootContext</span> <span class="hljs-operator">=</span>
  		WebApplicationContextUtils.getWebApplicationContext(getServletContext());
  <span class="hljs-type">WebApplicationContext</span> <span class="hljs-variable">wac</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

<span class="hljs-comment">//åˆå§‹æ—¶ï¼Œå±æ€§webApplicationContextä¸ºç©ºï¼Œä¸ä¼šæ‰§è¡Œæ­¤å¤„çˆ¶å­å®¹å™¨è®¾å®šé€»è¾‘</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.webApplicationContext != <span class="hljs-literal">null</span>) {
  	<span class="hljs-comment">// ...çœç•¥å…¶ä»–æ— å…³ä»£ç </span>
  		
  	}
  }
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥äº†ä¸Šä¸‹æ–‡å®ä¾‹</span>
  <span class="hljs-keyword">if</span> (wac == <span class="hljs-literal">null</span>) {
  	wac = findWebApplicationContext();
  }
  
  <span class="hljs-comment">// å¦‚æœä»æœªæ‰¾åˆ°ä¸Šä¸‹æ–‡å®ä¾‹ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°ä¸Šä¸‹æ–‡</span>
  <span class="hljs-keyword">if</span> (wac == <span class="hljs-literal">null</span>) {
     wac = createWebApplicationContext(rootContext);
  }

       <span class="hljs-comment">// ...çœç•¥å…¶ä»–æ— å…³ä»£ç </span>

  <span class="hljs-keyword">return</span> wac;
}
</code></pre>
<p>å…¶ä¸­ä¹‹æ‰€ä»¥ä¼šæ‰§è¡Œ<code>FrameworkServlet</code>çš„<code>initServletBean</code>æ–¹æ³•ã€‚è¿™æ­£æ˜¯ç”±äºæˆ‘ä»¬åœ¨<code>web.xml</code> é‡Œé¢é…ç½®äº†<code>DispatcherServlet</code>ç¼˜æ•…ã€‚</p>
<p>å½“åŠ è½½<code>DispatcherServlet</code>æ—¶ï¼Œä¼šå»è°ƒç”¨<code>DispatcherServlet</code>çš„<code>init</code>æ–¹æ³•ï¼Œç”±äº<code>DispatcherServlet</code>ä¸<code>FrameworkServlet</code>çš„ç»§æ‰¿å…³ç³»ï¼Œä¸Šè¿°<code>Servlet</code>åˆå§‹åŒ–çš„è°ƒç”¨é€»è¾‘ï¼Œæœ€ç»ˆä¼šæ‰§è¡Œåˆ°<code>FrameworkServlet</code>å†…éƒ¨<code>initWebApplicationContext</code>æ–¹æ³•ï¼Œè¿™å°±æ˜¯<code>SpringMVC</code>å†…éƒ¨å­å®¹å™¨çš„ä¸€ä¸ªå¯åŠ¨æ‰§è¡Œé¡ºåºã€‚</p>
<p>ä½†è¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆå®¹æ˜“è¢«å¿½è§†çš„ç‚¹ï¼Œå¾ˆå¤šäººæ€»æ˜¯è®¤ä¸º<code>SpringMVC</code>å†…éƒ¨çˆ¶å­å®¹å™¨çš„è®¾å®šåœ¨<code>this.webApplicationContext != null</code>è¿™å¤„åˆ†æ”¯é€»è¾‘ä¸­æ‰§è¡Œï¼Œä½†å…¶å®å¹¶ä¸ç„¶ã€‚</p>
<p><strong>é€ æˆè¿™ä¸€é”™è¯¯è®¤çŸ¥çš„æ ¸å¿ƒåœ¨äºå¯¹äºææ··äº†<code>Spring</code>ä¸­<code>Bean</code>ä¿¡æ¯çš„ç®¡ç†</strong>ã€‚å¾ˆå¤šäººåœ¨ç¿»é˜…<code>SpringMVC</code>æºç æ—¶ï¼Œçœ‹åˆ°<code>FrameworkServlet</code>ä¼šå®ç°<code>ApplicationContextAware</code>æ¥å£ï¼Œæ‰€ä»¥æ€»ä¼šæƒ³å½“ç„¶çš„å°†è®¤ä¸ºå½“<code>FrameworkServlet</code>å­ç±»åœ¨åˆå§‹åŒ–æ—¶ï¼Œä¼šé»˜è®¤å°†å®¹å™¨ä¸­çš„<code>å®¹å™¨</code>èµ‹å€¼åˆ°<code>webApplicationContext</code>ã€‚</p>
<p>å›åˆ°æˆ‘ä»¬å¼€å§‹æœ‰å…³<code>DispatcherServlet</code>çš„é…ç½®ä¿¡æ¯ï¼Œä½ ä¼šå‘ç°ï¼Œæœ‰å…³<code>DispatcherServlet </code>çš„æ³¨å…¥å…¶å®æˆ‘ä»¬å¹¶æ²¡æœ‰å€ŸåŠ©<code>Spring</code>å®¹å™¨ï¼Œè€Œæ˜¯å€ŸåŠ©<code>Tomcat</code>å¯¹äº<code>Servlet</code>çš„è§£ææ¥å®Œæˆã€‚</p>
<p><strong>æ¢è¨€ä¹‹ï¼Œæˆ‘ä»¬é€šè¿‡<code>web.xml</code>ä¸­é…ç½®çš„æ–¹å¼ ï¼Œè®©<code>Tomcat</code>è¯†åˆ«åˆ°äº†<code>DispatcherServlet</code>ä¿¡æ¯ï¼Œä»è€Œä»¤å…¶æ‘†è„±äº†<code>Spring</code>çš„ç®¡ç†ã€‚è¿™ä¹Ÿå°±ä½¿å¾—å…¶ç”Ÿå‘½å‘¨æœŸä¸è¢«<code>Spring</code>æ‰€ç®¡ç†ï¼Œè¿›è€Œç›¸å…³<code>Spring</code>ä¸­çš„<code>ApplicationContextAware</code>åŸ‹ç‚¹æ“ä½œä¹Ÿå°±ä¸ä¼šæ‰§è¡Œã€‚</strong></p>
<p>å› æ­¤ï¼Œåœ¨<code>SpringMVC</code>å†…éƒ¨ï¼Œç›¸å…³çˆ¶å­å®¹å™¨çš„ç»‘å®šå…¶å®æ˜¯åœ¨<code>wac == null</code>è¿™ä¸€åˆ†æ”¯æ¡ä»¶ä¸­æ‰§è¡Œï¼Œå³å€ŸåŠ©<code>createWebApplicationContext</code>å®Œæˆç›¸å…³<code>SpringMVC</code>å­å®¹å™¨çš„æ„å»ºã€‚</p>
<blockquote>
<p><code>FrameworkServlet # createWebApplicationContext()</code></p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> WebApplicationContext <span class="hljs-title function_">createWebApplicationContext</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> ApplicationContext parent)</span> {
   Class&lt;?&gt; contextClass = getContextClass();
   <span class="hljs-keyword">if</span> (!ConfigurableWebApplicationContext.class.isAssignableFrom(contextClass)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApplicationContextException</span>(
            <span class="hljs-string">"Fatal initialization error in servlet with name '"</span> + getServletName() +
            <span class="hljs-string">"': custom WebApplicationContext class ["</span> + contextClass.getName() +
            <span class="hljs-string">"] is not of type ConfigurableWebApplicationContext"</span>);
   }
   <span class="hljs-type">ConfigurableWebApplicationContext</span> <span class="hljs-variable">wac</span> <span class="hljs-operator">=</span>
         (ConfigurableWebApplicationContext) BeanUtils.instantiateClass(contextClass);

   wac.setEnvironment(getEnvironment());
   wac.setParent(parent);
   <span class="hljs-type">String</span> <span class="hljs-variable">configLocation</span> <span class="hljs-operator">=</span> getContextConfigLocation();
   <span class="hljs-keyword">if</span> (configLocation != <span class="hljs-literal">null</span>) {
      wac.setConfigLocation(configLocation);
   }
   configureAndRefreshWebApplicationContext(wac);

   <span class="hljs-keyword">return</span> wac;
}
</code></pre>
<p>æ€»ç»“æ¥çœ‹ï¼Œåœ¨<code>SpringMVC</code>å†…éƒ¨ï¼Œæ•´ä¸ªçˆ¶å­å®¹å™¨æ„å»ºé€»è¾‘å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚é¦–å…ˆï¼Œ<code>ContextLoaderListner</code>ç›‘å¬åˆ°<code>Tomcat</code>å®¹å™¨å¯åŠ¨äº‹ä»¶åï¼Œå®Œæˆçˆ¶å®¹å™¨çš„æ„å»ºï¼›å¾…è¿›è¡Œåˆ°ç›¸å…³<code>Servlet</code>åˆå§‹åŒ–é˜¶æ®µåï¼Œ<code>DispatcherServlet</code>å®Œæˆç›¸å…³å­å®¹å™¨æ„å»ºï¼Œå¹¶å®ç°çˆ¶å­å®¹å™¨çš„ç›¸äº’ç»‘å®šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9befe4fe8f041c895dc0f2256fc8007~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q-F6Iiq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770536017&amp;x-signature=djUqmFkjjHO5H6OywOXh8FzegAs%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€ç»ˆï¼Œå½“<code>SpringMVC</code>ä¸­å®Œæˆçˆ¶å­å®¹å™¨æ„å»ºåï¼Œä¸¤è€…å®¹å™¨é—´çš„å…³ç³»å¦‚ä¸‹æ‰€ç¤ºã€‚å…¶ä¸­ï¼Œçˆ¶å®¹å™¨ä½œä¸ºå…¨å±€æ ¹å®¹å™¨ï¼Œè´Ÿè´£ç®¡ç†<code> Serviceã€Repository</code>ã€æ•°æ®æºç­‰é<code>Web</code> å±‚æ ¸å¿ƒ <code>Bean</code>ï¼›å­å®¹å™¨åˆ™å½’å±äº<code>Spring MVC</code> ,å¹¶ä¸“é—¨ç®¡ç† <code>Controller</code>ã€è§†å›¾è§£æå™¨ç­‰ <code>Web</code> å±‚ <code>Bean</code>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87fc18ecd7e04229a2b09b10fc4f3a9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q-F6Iiq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770536017&amp;x-signature=hiPjAuS56SD4E7Mg9X41lLOq1y8%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">æ·±ç©¶çˆ¶å­å®¹å™¨æœºåˆ¶</h2>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬ä¾¿è®²æ¸…æ¥šäº†<code>SpringMVC</code>ä¸­çˆ¶å­å®¹å™¨çš„æ„å»ºå…¨è¿‡ç¨‹ï¼Œä½†ä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆ<code>Spring</code>åœ¨æ„å»ºæ—¶ï¼Œä¼šé€šè¿‡åŒå®¹å™¨çš„æœºåˆ¶æ¥å®Œæˆå®¹å™¨åŠ è½½å‘¢ï¼Ÿ</p>
<p>å…¶å®ï¼Œä¹‹æ‰€ä»¥çš„é‡‡ç”¨çˆ¶å­å®¹å™¨çš„å®ç°çš„æœ¬è´¨ï¼Œæ— éå°±æ˜¯è¿›è¡Œåˆ†å±‚ã€‚ä»è€Œè§£å†³å•ä¸€å®¹å™¨ç®¡ç†æ‰€æœ‰ <code>Bean</code> æ—¶æ˜“å‡ºç°çš„èŒè´£æ··ç¼–ã€åŠ è½½å†²çªã€åŠŸèƒ½å¤±æ•ˆç­‰é—®é¢˜ã€‚</p>
<ul>
<li>
<p><strong>é¿å…åŠŸèƒ½å¤±æ•ˆ</strong>ã€‚ è‹¥ä¸æ‹†åˆ†çˆ¶å­å®¹å™¨ï¼Œ<code>DispatcherServlet</code> åˆå§‹åŒ–æ—¶ä¼šä¸ <code>ContextLoaderListener</code> é‡å¤æ‰«æå¹¶åˆ›å»º <code>Service</code>ç­‰ä¸šåŠ¡å±‚ <code>Bean</code>ã€‚å­å®¹å™¨é‡å¤åˆ›å»ºçš„ <code>Bean</code> åˆ™æ— æ³•å…³è”åˆ°äº‹åŠ¡ç®¡ç†å™¨ï¼Œç›´æ¥å¯¼è‡´ <code>@Transactional</code> æ³¨è§£å®Œå…¨å¤±æ•ˆï¼Œä¸šåŠ¡å±‚äº‹åŠ¡æ§åˆ¶å½¢åŒè™šè®¾ã€‚</p>
</li>
<li>
<p><strong>é™ä½åŠ è½½å†²çª</strong>ã€‚åœ¨å•ä¸€å®¹å™¨ä¸­è‹¥å‡ºç°åŒå <code>Bean</code>ï¼ˆå¦‚å®¹å™¨ä¸­å¦‚æœå‡ºç°åŒå<code>Bean</code>ä¼šç›´æ¥è‡´ä½¿é¡¹ç›®æ— æ³•æ­£å¸¸åŠ è½½ã€‚è€Œçˆ¶å­å®¹å™¨çš„ â€œå•å‘å¯è§æ€§â€ï¼ˆå­å®¹å™¨å¯è®¿é—®çˆ¶å®¹å™¨ <code>Bean</code>ï¼Œçˆ¶å®¹å™¨æ— æ³•æ„ŸçŸ¥å­å®¹å™¨ <code>Bean</code>ï¼‰é¿å…äº†å­å®¹å™¨ <code>Bean </code>æ±¡æŸ“çˆ¶å®¹å™¨ï¼Œè¿›è€Œä¸”æ˜ç¡®çš„èŒè´£æ‹†åˆ†è®©<code>Bean</code> ç®¡ç†çš„è¾¹ç•Œæ¸…æ™°å¯è¿½æº¯ã€‚åŒæ—¶æ›´èƒ½æœ‰æ•ˆ<strong>è§£å†³å¤š <code>DispatcherServlet</code> å®ä¾‹çš„é…ç½®å†²çªé—®é¢˜</strong>ã€‚å¤šæ¨¡å—é¡¹ç›®ä¸­è‹¥é…ç½®å¤šä¸ª <code>DispatcherServlet</code>ï¼Œå•ä¸€å®¹å™¨ä¼šå¯¼è‡´ä¸åŒ <code>DispatcherServlet</code> çš„é…ç½®äº’ç›¸å¹²æ‰°ã€‚çˆ¶å­å®¹å™¨æ¶æ„ä¸‹ï¼Œæ¯ä¸ª <code>DispatcherServlet</code> æ‹¥æœ‰ç‹¬ç«‹çš„å­å®¹å™¨ï¼Œå¯é…ç½®ä¸“å±çš„<code>Bean</code>ä¿¡æ¯ï¼ŒåŒæ—¶å…±äº«çˆ¶å®¹å™¨çš„æ ¸å¿ƒä¸šåŠ¡å±‚ <code>Bean</code>ï¼Œæ—¢ä¿è¯äº†å¤š <code>Servlet </code>å®ä¾‹çš„éš”ç¦»æ€§ï¼Œåˆå®ç°äº†æ ¸å¿ƒèµ„æºçš„å¤ç”¨ã€‚</p>
</li>
</ul>
<p>è¿›ä¸€æ­¥æ¥çœ‹ï¼Œ<code>SpringMVC</code>å†…éƒ¨çˆ¶å­å®¹å™¨æ€æƒ³çš„æœ¬è´¨ä¾¿æ˜¯<strong>è½¯ä»¶æ¶æ„ä¸­ â€œå±‚çº§åŒ–èµ„æºç®¡ç†â€ çš„é€šç”¨è®¾è®¡æ€æƒ³</strong>ï¼Œè€Œ<code>Spring</code> åªæ˜¯å°†è¿™ä¸€æ€æƒ³è½åœ°åˆ°<code> IoC</code> å®¹å™¨ä½“ç³»ä¸­å¹¶å½¢æˆäº†æ ‡å‡†åŒ–å®ç°ã€‚ä»æŠ€æœ¯æœ¬è´¨æ¥çœ‹ï¼Œåªè¦æ¶‰åŠ â€œåˆ†å±‚éš”ç¦»ã€å•å‘ä¾èµ–ã€èµ„æºå¤ç”¨â€ çš„åœºæ™¯ï¼Œéƒ½ä¼šè¡ç”Ÿå‡ºç±»ä¼¼çˆ¶å­å®¹å™¨çš„è®¾è®¡ã€‚ä¾‹å¦‚ï¼Œæ“ä½œç³»ç»Ÿä¸­çˆ¶å­è¿›ç¨‹çš„èµ„æºéš”ç¦»ï¼Œä»¥åŠ å‰ç«¯<code>Vue</code>æ¡†æ¶ä¸­çˆ¶å­ç»„ä»¶çš„å…³ç³»ï¼Œå…¶æœ¬è´¨éƒ½æ˜¯è¯¥æ€æƒ³çš„æ‹“å±•ã€‚</p>
<h2 data-id="heading-5">æ€»ç»“</h2>
<p>å¥½çš„è®¾è®¡å¾€å¾€å…·å¤‡å…±é€šçš„æ ¸å¿ƒé€»è¾‘ï¼Œå›åˆ°å¦‚ä»Šçš„<code>å¤§æ¨¡å‹</code>å¼€å‘åœºæ™¯ï¼Œèµ„æºéš”ç¦»æ˜¯å…¶é¢ä¸´çš„å…¸å‹éš¾é¢˜ã€‚å…·ä½“æ¥çœ‹ï¼Œå¤§æ¨¡å‹çš„äº¤äº’è¿‡ç¨‹ä¸­ï¼Œä¸åŒç”¨æˆ·ã€ä¸åŒä»»åŠ¡çš„ä¸Šä¸‹æ–‡å¿…é¡»ä¸¥æ ¼åŒºåˆ†ã€‚</p>
<p>ä¾‹å¦‚<code>ç”¨æˆ· A</code>çš„å¯¹è¯å†å²ã€ä¼šè¯é…ç½®ï¼ˆå¦‚æ¸©åº¦å‚æ•°ã€è§’è‰²è®¾å®šï¼‰ä¸<code>ç”¨æˆ· B</code>çš„ç›¸å…³å†…å®¹éœ€å®Œå…¨éš”ç¦»ï¼Œä¸èƒ½å‡ºç°æ··æ·†ã€‚è‹¥æœªåšå¥½éš”ç¦»è®¾è®¡ï¼Œä¸ä»…å¯èƒ½å¯¼è‡´<code>ç”¨æˆ· A</code>çš„å¯¹è¯å†…å®¹è¢«<code>ç”¨æˆ· B</code>æ„å¤–è·å–ï¼Œè¿˜ä¼šé€ æˆå‰åºä»»åŠ¡çš„ä¸Šä¸‹æ–‡æ±¡æŸ“åç»­ä»»åŠ¡çš„æ¨ç†ç»“æœï¼Œä¸¥é‡å½±å“ä½¿ç”¨å®‰å…¨æ€§ä¸æ¨ç†å‡†ç¡®æ€§ã€‚</p>
<p>é’ˆå¯¹è¿™ä¸€ç—›ç‚¹ï¼Œæˆ‘ä»¬å¯å€Ÿé‰´ <code>Spring MVC</code> çˆ¶å­å®¹å™¨çš„åˆ†å±‚è®¾è®¡æ€è·¯æ¥ä¼˜åŒ–ã€‚å…·ä½“è€Œè¨€ï¼Œå¯æ„å»º â€œçˆ¶ - å­â€ ä¸¤çº§ä¸Šä¸‹æ–‡å®¹å™¨ï¼Œå®ç°èµ„æºéš”ç¦»ä¸é«˜æ•ˆå¤ç”¨ï¼š</p>
<ul>
<li><strong>çˆ¶ä¸Šä¸‹æ–‡ï¼ˆå…¨å±€å®¹å™¨ï¼‰</strong> ï¼šå­˜å‚¨æ‰€æœ‰ä¼šè¯å…±äº«çš„é€šç”¨èµ„æºï¼ŒåŒ…æ‹¬æ¨¡å‹åŸºç¡€å‚æ•°ã€å…¨å±€é€šç”¨çŸ¥è¯†åº“ã€ç»Ÿä¸€æƒé™è§„åˆ™ç­‰ï¼Œä¸€æ¬¡åˆå§‹åŒ–åä¾›æ‰€æœ‰ä¼šè¯è°ƒç”¨ï¼›</li>
<li><strong>å­ä¸Šä¸‹æ–‡ï¼ˆä¼šè¯å®¹å™¨ï¼‰</strong> ï¼šä»…å­˜å‚¨å•ä¸€ä¼šè¯çš„ä¸´æ—¶çŠ¶æ€ï¼Œæ¯”å¦‚ç”¨æˆ·ä¸“å±å¯¹è¯å†å²ã€ä¸ªæ€§åŒ– <code>Prompt</code> æ¨¡æ¿ã€ä¼šè¯çº§é…ç½®ç­‰ï¼Œä»…ä½œç”¨äºå½“å‰ä¼šè¯ï¼Œä¸”å¯å•å‘è®¿é—®çˆ¶ä¸Šä¸‹æ–‡çš„é€šç”¨èµ„æºï¼Œçˆ¶ä¸Šä¸‹æ–‡æ— éœ€æ„ŸçŸ¥å­å®¹å™¨å­˜åœ¨ã€‚</li>
</ul>
<p>é€šè¿‡è¿™ç§ <strong>â€œå…¨å±€å¤ç”¨ + ä¼šè¯éš”ç¦»â€</strong> çš„æ¶æ„è®¾è®¡ï¼Œæ—¢èƒ½ä»æ ¹æºé¿å…ä¸åŒä¼šè¯çš„ä¸´æ—¶çŠ¶æ€äº’ç›¸å¹²æ‰°ï¼Œæœç»ä¸Šä¸‹æ–‡ä¸²æµä¸æ•°æ®æ³„éœ²é£é™©ï¼Œåˆèƒ½å‡å°‘é€šç”¨èµ„æºçš„é‡å¤åŠ è½½ï¼Œæ˜¾è‘—é™ä½ç³»ç»Ÿèµ„æºå ç”¨ï¼Œæå‡å¤§æ¨¡å‹æœåŠ¡çš„ç¨³å®šæ€§ä¸è¿è¡Œæ•ˆç‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue<å‰ç«¯é¡µé¢ç‰ˆæœ¬æ£€æµ‹>]]></title>    <link>https://juejin.cn/post/7601175299010953231</link>    <guid>https://juejin.cn/post/7601175299010953231</guid>    <pubDate>2026-02-01T06:13:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601175299010953231" data-draft-id="7601077290681876532" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue&lt;å‰ç«¯é¡µé¢ç‰ˆæœ¬æ£€æµ‹&gt;"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-02-01T06:13:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èª°åœ¨èŠ±é‡Œèƒ¡å“¨"/> <meta itemprop="url" content="https://juejin.cn/user/1011206430666551"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue&lt;å‰ç«¯é¡µé¢ç‰ˆæœ¬æ£€æµ‹&gt;
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1011206430666551/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èª°åœ¨èŠ±é‡Œèƒ¡å“¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T06:13:19.000Z" title="Sun Feb 01 2026 06:13:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-light">.hljs-comment,.hljs-quote{color:#6b7394}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f5f7ff;color:#5e6687}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬æ£€æµ‹</h2>
<h3 data-id="heading-1">1. è§£å†³æµè§ˆå™¨ç¼“å­˜é—®é¢˜</h3>
<ul>
<li><strong>é™æ€èµ„æºç¼“å­˜</strong>ï¼šæµè§ˆå™¨ä¼šç¼“å­˜ JSã€CSS ç­‰é™æ€èµ„æºï¼Œç”¨æˆ·å¯èƒ½ç»§ç»­ä½¿ç”¨æ—§ç‰ˆæœ¬</li>
<li><strong>ç”¨æˆ·ä½“éªŒå½±å“</strong>ï¼šç”¨æˆ·æ— æ³•åŠæ—¶è·å–æ–°åŠŸèƒ½ï¼Œå¯¼è‡´åŠŸèƒ½ç¼ºå¤±æˆ–æ“ä½œå¼‚å¸¸</li>
</ul>
<h3 data-id="heading-2">2. ä¿éšœåŠŸèƒ½ä¸€è‡´æ€§</h3>
<ul>
<li><strong>åŠŸèƒ½åŒæ­¥</strong>ï¼šç¡®ä¿æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½ä½¿ç”¨æœ€æ–°çš„åŠŸèƒ½å’Œä¿®å¤</li>
<li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šé¿å…å› ç‰ˆæœ¬å·®å¼‚å¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜</li>
</ul>
<h3 data-id="heading-3">3. æå‡ç”¨æˆ·ä½“éªŒ</h3>
<ul>
<li><strong>ä¸»åŠ¨æé†’</strong>ï¼šåœ¨æ–°ç‰ˆæœ¬å‘å¸ƒåä¸»åŠ¨é€šçŸ¥ç”¨æˆ·æ›´æ–°</li>
<li><strong>æ— ç¼å‡çº§</strong>ï¼šå‡å°‘ç”¨æˆ·æ‰‹åŠ¨åˆ·æ–°é¡µé¢çš„éœ€æ±‚</li>
</ul>
<h2 data-id="heading-4">ç‰ˆæœ¬æ£€æµ‹æ ¸å¿ƒæ€è·¯</h2>
<p align="center"><img width="400px" src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/201719ca776e476ca30793edf20ed3d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Kqw5Zyo6Iqx6YeM6IOh5ZOo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770531199&amp;x-signature=dnxrNVrGXVVZKOtMJagIipMtS8Y%3D" alt="version1.gif" loading="lazy"/></p>
<h3 data-id="heading-5">æ•´ä½“æ¶æ„</h3>
<blockquote>
<p>æ„å»ºé˜¶æ®µ â†’ ç‰ˆæœ¬æ–‡ä»¶ç”Ÿæˆ â†’ è¿è¡Œæ—¶æ£€æµ‹ â†’ ç‰ˆæœ¬å¯¹æ¯” â†’ ç”¨æˆ·æé†’</p>
</blockquote>
<h3 data-id="heading-6">æŠ€æœ¯å®ç°è¦ç‚¹</h3>
<h4 data-id="heading-7">1. ç‰ˆæœ¬æ ‡è¯†ç”Ÿæˆ</h4>
<ul>
<li><strong>æ„å»ºæ—¶ç”Ÿæˆ</strong>ï¼šæ¯æ¬¡æ‰“åŒ…æ—¶ç”Ÿæˆå”¯ä¸€çš„ç‰ˆæœ¬æ ‡è¯†</li>
<li><strong>æ—¶é—´æˆ³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨æ—¶é—´æˆ³ç¡®ä¿æ¯æ¬¡æ„å»ºç‰ˆæœ¬å·å”¯ä¸€</li>
</ul>
<h4 data-id="heading-8">2. ç‰ˆæœ¬æ–‡ä»¶éƒ¨ç½²</h4>
<ul>
<li><strong>JSON æ ¼å¼</strong>ï¼šå°†ç‰ˆæœ¬ä¿¡æ¯ä¿å­˜ä¸ºÂ <code>version.json</code>Â æ–‡ä»¶</li>
<li><strong>é™æ€è®¿é—®</strong>ï¼šé€šè¿‡ HTTP è¯·æ±‚å¯ç›´æ¥è®¿é—®ç‰ˆæœ¬æ–‡ä»¶</li>
</ul>
<h4 data-id="heading-9">3. å®¢æˆ·ç«¯æ£€æµ‹æœºåˆ¶</h4>
<ul>
<li><strong>å®šæ—¶è½®è¯¢</strong>ï¼šå®šæœŸæ£€æŸ¥æœåŠ¡å™¨ç‰ˆæœ¬æ–‡ä»¶</li>
<li><strong>ç‰ˆæœ¬å¯¹æ¯”</strong>ï¼šæ¯”è¾ƒæœ¬åœ°ç¼“å­˜ç‰ˆæœ¬ä¸æœåŠ¡å™¨ç‰ˆæœ¬</li>
<li><strong>æ™ºèƒ½æé†’</strong>ï¼šä»…åœ¨ç‰ˆæœ¬ä¸ä¸€è‡´æ—¶æé†’ç”¨æˆ·</li>
</ul>
<h2 data-id="heading-10">ç‰ˆæœ¬æ£€æµ‹å®ç°æ­¥éª¤</h2>
<h3 data-id="heading-11">æ­¥éª¤ä¸€ï¼šæ„å»ºç‰ˆæœ¬æ–‡ä»¶ç”Ÿæˆè„šæœ¬</h3>
<p>åˆ›å»ºÂ <code>build-version.js</code>Â æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// build-version.js ï¼ˆè‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬æ–‡ä»¶è„šæœ¬ï¼‰</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)

<span class="hljs-comment">// æ–¹æ¡ˆAï¼šä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºç‰ˆæœ¬æ ‡è¯†ï¼ˆæœ€ç®€å•ï¼Œç¡®ä¿æ¯æ¬¡æ‰“åŒ…å”¯ä¸€ï¼‰</span>
<span class="hljs-keyword">const</span> version = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>().<span class="hljs-title function_">toString</span>()

<span class="hljs-comment">// ç‰ˆæœ¬æ–‡ä»¶å†…å®¹</span>
<span class="hljs-keyword">const</span> versionJson = {
  <span class="hljs-attr">version</span>: version,
  <span class="hljs-attr">updateTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toLocaleString</span>() <span class="hljs-comment">// å¯é€‰ï¼šæ·»åŠ æ›´æ–°æ—¶é—´ï¼Œä¾¿äºæ’æŸ¥</span>
}

<span class="hljs-comment">// å†™å…¥version.jsonæ–‡ä»¶ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰</span>
<span class="hljs-keyword">const</span> versionPath = path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'public'</span>, <span class="hljs-string">'version.json'</span>)
fs.<span class="hljs-title function_">writeFileSync</span>(versionPath, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(versionJson, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>), <span class="hljs-string">'utf-8'</span>)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ… è‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬æ–‡ä»¶æˆåŠŸï¼Œç‰ˆæœ¬å·ï¼š<span class="hljs-subst">${version}</span>`</span>)

</code></pre>
<h3 data-id="heading-12">æ­¥éª¤äºŒï¼šä¿®æ”¹æ„å»ºå‘½ä»¤</h3>
<p>åœ¨Â <code>package.json</code>Â ä¸­ä¿®æ”¹æ„å»ºå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build:prod"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node build-version.js &amp;&amp; vue-cli-service build"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-13">æ­¥éª¤ä¸‰ï¼šé…ç½® Vue æ„å»ºè¿‡ç¨‹</h3>
<p>åœ¨Â <code>vue.config.js</code>Â ä¸­æ·»åŠ ç‰ˆæœ¬æ–‡ä»¶å¤åˆ¶é…ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">chainWebpack</span>(<span class="hljs-params">config</span>) {
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
  
  <span class="hljs-comment">// å¤åˆ¶ version.json åˆ° dist ç›®å½•</span>
  config.<span class="hljs-title function_">plugin</span>(<span class="hljs-string">'copy'</span>)
    .<span class="hljs-title function_">tap</span>(<span class="hljs-function"><span class="hljs-params">args</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> hasVersionJson = args[<span class="hljs-number">0</span>].<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">from</span> === <span class="hljs-string">'version.json'</span>)
      <span class="hljs-keyword">if</span> (!hasVersionJson) {
        args[<span class="hljs-number">0</span>].<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">from</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'public/version.json'</span>),
          <span class="hljs-attr">to</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dist/version.json'</span>)
        })
      }
      <span class="hljs-keyword">return</span> args
    })
}
</code></pre>
<h3 data-id="heading-14">æ­¥éª¤å››ï¼šå®ç°ç‰ˆæœ¬æ£€æµ‹å·¥å…·ç±»</h3>
<p>åˆ›å»ºÂ <code>src/utils/versionUpdate.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/utils/versionUpdate.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Notification</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-ui'</span>
<span class="hljs-comment">/**
 * ç‰ˆæœ¬æ›´æ–°æ£€æµ‹å·¥å…·ç±»ï¼ˆä»…ç”Ÿäº§ç¯å¢ƒå¯ç”¨è½®è¯¢ï¼Œå†…ç½®ç¯å¢ƒåˆ¤æ–­ï¼‰
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VersionUpdate</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = {
      <span class="hljs-attr">versionFileUrl</span>: <span class="hljs-string">'/version.json'</span>, <span class="hljs-comment">// ç‰ˆæœ¬æ–‡ä»¶åœ°å€</span>
      <span class="hljs-attr">localVersionKey</span>: <span class="hljs-string">'cmpVersion'</span>, <span class="hljs-comment">// æœ¬åœ°å­˜å‚¨çš„ç‰ˆæœ¬å·key</span>
      <span class="hljs-attr">disableFetchCache</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç¦ç”¨Fetchç¼“å­˜</span>
      <span class="hljs-attr">pollInterval</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 5åˆ†é’Ÿè½®è¯¢ä¸€æ¬¡</span>
      <span class="hljs-attr">hasNotified</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// æ˜¯å¦å·²æé†’è¿‡ç”¨æˆ·æœ‰æ–°ç‰ˆæœ¬</span>
    }
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>, options)
    <span class="hljs-comment">// å®šæ—¶è½®è¯¢å®šæ—¶å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pollTimer</span> = <span class="hljs-literal">null</span>
    <span class="hljs-comment">// è¯†åˆ«å½“å‰ç¯å¢ƒï¼ˆVue CLI 4 è‡ªåŠ¨æ³¨å…¥çš„ç¯å¢ƒå˜é‡ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isProduction</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span>
  }

  <span class="hljs-comment">/**
   * æ ¸å¿ƒæ–¹æ³•ï¼šæ‰§è¡Œç‰ˆæœ¬æ£€æµ‹
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">checkVersion</span>(<span class="hljs-params">isInit = <span class="hljs-literal">false</span></span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">hasNotified</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

      <span class="hljs-keyword">const</span> localVersion = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">localVersionKey</span>) || <span class="hljs-string">''</span>
      <span class="hljs-keyword">const</span> fetchOptions = {}
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">disableFetchCache</span>) {
        fetchOptions.<span class="hljs-property">cache</span> = <span class="hljs-string">'no-cache'</span>
      }

      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">versionFileUrl</span>, fetchOptions)
      <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`ç‰ˆæœ¬æ–‡ä»¶è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š<span class="hljs-subst">${response.status}</span>`</span>)
      }
      <span class="hljs-keyword">const</span> latestVersionInfo = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()
      <span class="hljs-keyword">const</span> serverVersion = latestVersionInfo.<span class="hljs-property">version</span>

      <span class="hljs-keyword">if</span> (isInit) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cacheLatestVersion</span>(serverVersion)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
      }

      <span class="hljs-keyword">if</span> (serverVersion &amp;&amp; serverVersion !== localVersion) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">hasNotified</span> = <span class="hljs-literal">true</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ‰æ–°ç‰ˆæœ¬å¯ç”¨'</span>, latestVersionInfo)
        <span class="hljs-title class_">Notification</span>({
          <span class="hljs-attr">title</span>: <span class="hljs-string">'ğŸ‰ æœ‰æ–°ç‰ˆæœ¬å¯ç”¨'</span>,
          <span class="hljs-attr">dangerouslyUseHTMLString</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">`&lt;p style="font-size:12px;"&gt;å»ºè®®ç‚¹å‡»åˆ·æ–°é¡µé¢ï¼Œä»¥è·å–æœ€æ–°åŠŸèƒ½å’Œä¿®å¤&lt;/p&gt; &lt;p style="color:#cccccc;font-size:12px;"&gt;æ›´æ–°æ—¶é—´ï¼š<span class="hljs-subst">${latestVersionInfo.updateTime}</span>&lt;/p&gt;`</span>,
          <span class="hljs-attr">duration</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">customClass</span>: <span class="hljs-string">'check-version-notify'</span>,
          <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">forceRefreshPage</span>()
          },
          <span class="hljs-attr">onClose</span>: <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resetNotifyFlag</span>()
          }
        })
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// ç‰ˆæœ¬ä¸€è‡´æ—¶ï¼Œé‡ç½®æé†’æ ‡è®°ï¼Œä¾¿äºåç»­è½®è¯¢æ£€æµ‹æ–°ç‰ˆæœ¬</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">hasNotified</span> = <span class="hljs-literal">false</span>
        <span class="hljs-comment">// console.log('å½“å‰å·²æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œå·²ç¼“å­˜æœ€æ–°ç‰ˆæœ¬å·')</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸ï¼Œä¸å½±å“åº”ç”¨è¿è¡Œï¼š'</span>, error.<span class="hljs-property">message</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
  }
  <span class="hljs-comment">/**
   * å¯åŠ¨å®šæ—¶è½®è¯¢æ£€æµ‹ï¼ˆå†…ç½®ç¯å¢ƒåˆ¤æ–­ï¼šä»…ç”Ÿäº§ç¯å¢ƒç”Ÿæ•ˆï¼‰
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">startPolling</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ ¸å¿ƒï¼šéç”Ÿäº§ç¯å¢ƒï¼Œç›´æ¥è¿”å›ï¼Œä¸å¯åŠ¨è½®è¯¢</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isProduction</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰ä¸ºéç”Ÿäº§ç¯å¢ƒï¼Œä¸å¯åŠ¨ç‰ˆæœ¬æ£€æµ‹è½®è¯¢'</span>)
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒï¼šæ­£å¸¸å¯åŠ¨è½®è¯¢</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopPolling</span>() <span class="hljs-comment">// å…ˆåœæ­¢å·²æœ‰è½®è¯¢ï¼Œé¿å…é‡å¤å¯åŠ¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkVersion</span>(<span class="hljs-literal">true</span>) <span class="hljs-comment">// ç«‹å³æ‰§è¡Œä¸€æ¬¡æ£€æµ‹</span>

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pollTimer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkVersion</span>()
    }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">pollInterval</span>)

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬è½®è¯¢æ£€æµ‹å·²å¯åŠ¨ï¼Œæ¯éš”<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.config.pollInterval / <span class="hljs-number">1000</span> / <span class="hljs-number">60</span>}</span>åˆ†é’Ÿæ£€æµ‹ä¸€æ¬¡`</span>)
  }

  <span class="hljs-comment">/**
   * åœæ­¢å®šæ—¶è½®è¯¢æ£€æµ‹
   */</span>
  <span class="hljs-title function_">stopPolling</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">pollTimer</span>) {
      <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pollTimer</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pollTimer</span> = <span class="hljs-literal">null</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‰ˆæœ¬è½®è¯¢æ£€æµ‹å·²åœæ­¢'</span>)
    }
  }

  <span class="hljs-comment">/**
   * é‡ç½®æé†’æ ‡è®°
   */</span>
  <span class="hljs-title function_">resetNotifyFlag</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">hasNotified</span> = <span class="hljs-literal">false</span>
  }

  <span class="hljs-comment">// ç¼“å­˜æœ€æ–°ç‰ˆæœ¬å·</span>
  <span class="hljs-title function_">cacheLatestVersion</span>(<span class="hljs-params">version</span>) {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">localVersionKey</span>, version)
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resetNotifyFlag</span>()
  }

  <span class="hljs-comment">// å¼ºåˆ¶åˆ·æ–°é¡µé¢</span>
  <span class="hljs-title function_">forceRefreshPage</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>(<span class="hljs-literal">true</span>)
  }
}

<span class="hljs-keyword">const</span> versionUpdateInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VersionUpdate</span>()
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">VersionUpdate</span>, versionUpdateInstance }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> versionUpdateInstance

</code></pre>
<p>åˆ›å»ºè‡ªå®šä¹‰<code>.check-version-notify</code>çš„ç‰ˆæœ¬æ£€æµ‹å…¨å±€æ ·å¼ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8070ccb4ebe4a028f3aabab68afeafd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Kqw5Zyo6Iqx6YeM6IOh5ZOo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770531199&amp;x-signature=J1pi0sKApxNPUvXlsJ5PxfqK%2FH0%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ç‰ˆæœ¬æ£€æµ‹é€šçŸ¥æ ·å¼</span>
<span class="hljs-selector-class">.check-version-notify</span>{
  <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid transparent <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.6</span>) <span class="hljs-meta">!important</span>;
  backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">5px</span>);
  &amp;<span class="hljs-selector-pseudo">:hover</span>{
    <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid <span class="hljs-variable">$--color-primary</span> <span class="hljs-meta">!important</span>;
  }
  <span class="hljs-selector-class">.el-notification__icon</span>{
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">18px</span>;
  }
  <span class="hljs-selector-class">.el-notification__title</span>{
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">18px</span>;
  }
  <span class="hljs-selector-class">.el-notification__group</span>{
    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">8px</span>;
  }
}
</code></pre>
<h3 data-id="heading-15">æ­¥éª¤äº”ï¼šåœ¨åº”ç”¨å…¥å£å¯åŠ¨ç‰ˆæœ¬æ£€æµ‹</h3>
<p>åœ¨Â <code>App.vue</code>Â æˆ–åˆé€‚çš„å…¥å£æ–‡ä»¶ä¸­å¯åŠ¨ç‰ˆæœ¬æ£€æµ‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> versionUpdate <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/versionUpdate'</span>
...
<span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
  versionUpdate.<span class="hljs-title function_">startPolling</span>()
},
<span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) {
  versionUpdate.<span class="hljs-title function_">stopPolling</span>()
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»ºé«˜æ€§èƒ½ç”Ÿæˆå¼AIåº”ç”¨ï¼šåŸºäºRust Axumä¸è“è€˜DeepSeek-V3.2å¤§æ¨¡å‹æœåŠ¡çš„å…¨æ ˆå¼€å‘å®æˆ˜]]></title>    <link>https://juejin.cn/post/7601069677567049774</link>    <guid>https://juejin.cn/post/7601069677567049774</guid>    <pubDate>2026-01-31T18:05:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601069677567049774" data-draft-id="7601144981169913906" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»ºé«˜æ€§èƒ½ç”Ÿæˆå¼AIåº”ç”¨ï¼šåŸºäºRust Axumä¸è“è€˜DeepSeek-V3.2å¤§æ¨¡å‹æœåŠ¡çš„å…¨æ ˆå¼€å‘å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-31T18:05:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯ä½ çš„å°æé¾™å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/4118085375365891"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»ºé«˜æ€§èƒ½ç”Ÿæˆå¼AIåº”ç”¨ï¼šåŸºäºRust Axumä¸è“è€˜DeepSeek-V3.2å¤§æ¨¡å‹æœåŠ¡çš„å…¨æ ˆå¼€å‘å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4118085375365891/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯ä½ çš„å°æé¾™å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T18:05:28.000Z" title="Sat Jan 31 2026 18:05:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å½“å‰ç”Ÿæˆå¼äººå·¥æ™ºèƒ½è“¬å‹ƒå‘å±•çš„æŠ€æœ¯æµªæ½®ä¸­ï¼Œæ„å»ºé«˜æ•ˆã€å®‰å…¨ä¸”å“åº”è¿…é€Ÿçš„AIåº”ç”¨åç«¯å·²æˆä¸ºå¼€å‘è€…çš„æ ¸å¿ƒè¯‰æ±‚ã€‚Rustè¯­è¨€å‡­å€Ÿå…¶å†…å­˜å®‰å…¨ã€é›¶æˆæœ¬æŠ½è±¡ä»¥åŠæƒŠäººçš„æ‰§è¡Œæ•ˆç‡ï¼Œæ­£é€æ¸æˆä¸ºæ„å»ºé«˜æ€§èƒ½WebæœåŠ¡çš„é¦–é€‰è¯­è¨€ä¹‹ä¸€ã€‚ç»“åˆè“è€˜ï¼ˆLanyunï¼‰æä¾›çš„DeepSeekå¤§æ¨¡å‹MaaSï¼ˆModel as a Serviceï¼‰æœåŠ¡ï¼Œå¼€å‘è€…èƒ½å¤Ÿä»¥æä½çš„å»¶è¿Ÿå’Œæé«˜çš„ååé‡å¤„ç†å¤æ‚çš„è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–æå¦‚ä½•ä»é›¶å¼€å§‹ï¼Œåˆ©ç”¨Rustè¯­è¨€çš„Axumæ¡†æ¶ï¼Œé…åˆTokioå¼‚æ­¥è¿è¡Œæ—¶ï¼Œæ„å»ºä¸€ä¸ªèƒ½å¤Ÿæµå¼å¯¹æ¥DeepSeek V3å¤§æ¨¡å‹çš„å…¨æ ˆWebåº”ç”¨ã€‚æˆ‘ä»¬å°†è¯¦ç»†æ‹†è§£æ¯ä¸€ä¸ªå¼€å‘æ­¥éª¤ï¼Œä»åº•å±‚ç¯å¢ƒæ„å»ºåˆ°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å®ç°ï¼Œå†åˆ°å‰ç«¯æµå¼æ¸²æŸ“ï¼Œè¿›è¡Œå…¨æ–¹ä½çš„æŠ€æœ¯è§£è¯»ã€‚</p>
<h2 data-id="heading-1">ç¬¬ä¸€é˜¶æ®µï¼šåº•å±‚å¼€å‘ç¯å¢ƒçš„æ„å»ºä¸éªŒè¯</h2>
<p>æ„å»ºRuståº”ç”¨çš„ç¬¬ä¸€æ­¥æ˜¯ç¡®ä¿æ“ä½œç³»ç»Ÿå…·å¤‡å®Œæ•´çš„ç¼–è¯‘å·¥å…·é“¾ã€‚Rustç¼–è¯‘å™¨åœ¨å¤„ç†æŸäº›ä¾èµ–åŒ…ï¼ˆCrateï¼‰æ—¶ï¼Œå°¤å…¶æ˜¯æ¶‰åŠåˆ°ç³»ç»Ÿåº•å±‚äº¤äº’æˆ–åŠ å¯†åº“ï¼ˆå¦‚OpenSSLã€Ringç­‰ï¼‰æ—¶ï¼Œå¾€å¾€éœ€è¦è°ƒç”¨ç³»ç»Ÿçš„Cè¯­è¨€é“¾æ¥å™¨ã€‚</p>
<h3 data-id="heading-2">1.1 ç³»ç»ŸåŸºç¡€æ„å»ºå·¥å…·çš„å®‰è£…</h3>
<p>åœ¨åŸºäºDebianæˆ–Ubuntuçš„Linuxç¯å¢ƒä¸­ï¼Œ<code>build-essential</code>è½¯ä»¶åŒ…æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚å®ƒåŒ…å«äº†GCCç¼–è¯‘å™¨ã€Makeå·¥å…·ä»¥åŠGlibcå¼€å‘åº“å¤´æ–‡ä»¶ã€‚<code>curl</code>åˆ™ç”¨äºåç»­ä¸‹è½½å®‰è£…è„šæœ¬ã€‚</p>
<p>é€šè¿‡ç»ˆç«¯æ‰§è¡Œæ›´æ–°è½¯ä»¶æºå¹¶å®‰è£…æ„å»ºå·¥å…·çš„æŒ‡ä»¤ï¼Œèƒ½å¤Ÿç¡®ä¿åç»­çš„Rustå®‰è£…è¿‡ç¨‹ä¸ä¼šå› ç¼ºå°‘é“¾æ¥åº“è€Œä¸­æ–­ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">sudo apt update 
sudo apt install curl build-essential
</code></pre>
<p>æ‰§è¡Œä¸Šè¿°å‘½ä»¤åï¼Œç³»ç»ŸåŒ…ç®¡ç†å™¨å°†è§£æä¾èµ–æ ‘å¹¶å®Œæˆä¸‹è½½å®‰è£…ã€‚ä¸‹å›¾å±•ç¤ºäº†ç»ˆç«¯åœ¨æ‰§è¡Œå®‰è£…å‘½ä»¤åçš„çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ°ç³»ç»ŸæˆåŠŸè¯»å–äº†è½¯ä»¶åŒ…åˆ—è¡¨ï¼Œå¹¶å‡†å¤‡è¿›è¡Œç¯å¢ƒçš„é…ç½®ã€‚è¿™æ˜¯Rustç¼–è¯‘ç¯å¢ƒèƒ½å¤Ÿé¡ºåˆ©è¿è¡Œçš„åŸºçŸ³ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b19ad6a5cae941ea98251c4b0558da8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5oGQ6b6Z5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770487527&amp;x-signature=reggkKNtI6Au%2B662vyV9dfxyLDA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">1.2 Rustå·¥å…·é“¾çš„éƒ¨ç½²</h3>
<p>Rustå®˜æ–¹æä¾›äº†<code>rustup</code>ä½œä¸ºç‰ˆæœ¬ç®¡ç†å’Œå®‰è£…å·¥å…·ï¼Œè¿™æ˜¯ç®¡ç†Rustç”Ÿæ€æœ€æ¨èçš„æ–¹å¼ã€‚å®ƒä¸ä»…å®‰è£…ç¼–è¯‘å™¨<code>rustc</code>ï¼Œè¿˜ä¼šå®‰è£…åŒ…ç®¡ç†å™¨<code>cargo</code>ä»¥åŠæ–‡æ¡£å·¥å…·<code>rustdoc</code>ã€‚</p>
<p>é€šè¿‡æ‰§è¡Œå®˜æ–¹çš„Shellè„šæœ¬ï¼Œå¯ä»¥å¯åŠ¨è‡ªåŠ¨åŒ–çš„å®‰è£…æµç¨‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl --proto <span class="hljs-string">'=https'</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre>
<p>è¯¥è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å½“å‰æ“ä½œç³»ç»Ÿæ¶æ„ï¼Œä¸‹è½½å¯¹åº”çš„é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ã€‚å®ƒå°†å®‰è£…æœ€æ–°çš„Stableï¼ˆç¨³å®šï¼‰ç‰ˆæœ¬ï¼Œè¿™æ˜¯ç”Ÿäº§ç¯å¢ƒå¼€å‘çš„é¦–é€‰ã€‚</p>
<p>å®‰è£…è„šæœ¬æ‰§è¡Œå®Œæ¯•åï¼Œç»ˆç«¯ä¼šè¾“å‡ºå®‰è£…æˆåŠŸçš„æ‘˜è¦ä¿¡æ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç³»ç»Ÿæç¤ºRustå·²æˆåŠŸå®‰è£…ï¼Œå¹¶ä¸”ç›¸å…³äºŒè¿›åˆ¶æ–‡ä»¶å·²è¢«æ”¾ç½®åœ¨ç”¨æˆ·çš„<code>.cargo/bin</code>ç›®å½•ä¸‹ã€‚è¯¥ç›®å½•æ˜¯Rustç”Ÿæ€å·¥å…·çš„æ ¸å¿ƒå­˜æ”¾ä½ç½®ï¼Œç¡®ä¿å…¶è¢«åŠ å…¥ç³»ç»Ÿç¯å¢ƒå˜é‡<code>PATH</code>ä¸­è‡³å…³é‡è¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ddff7f16f4448d9ba106681ff5f2b66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5oGQ6b6Z5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770487527&amp;x-signature=iiRb7t1YtQ4mPaYEnlzaZq3aDnQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">1.3 ç¯å¢ƒå˜é‡çš„åŠ è½½ä¸éªŒè¯</h3>
<p>è™½ç„¶å®‰è£…è„šæœ¬é€šå¸¸ä¼šè‡ªåŠ¨ä¿®æ”¹Shellçš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚<code>.bashrc</code>æˆ–<code>.zshrc</code>ï¼‰ï¼Œä½†åœ¨å½“å‰ç»ˆç«¯ä¼šè¯ä¸­ï¼Œå˜æ›´ä¸ä¼šç«‹å³ç”Ÿæ•ˆã€‚ä¸ºäº†ç«‹å³ä½¿ç”¨<code>cargo</code>å‘½ä»¤ï¼Œéœ€è¦æ‰‹åŠ¨åŠ è½½ç¯å¢ƒé…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">. <span class="hljs-string">"<span class="hljs-variable">$HOME</span>/.cargo/env"</span>
</code></pre>
<p>éšåï¼Œé€šè¿‡æ£€æŸ¥ç¼–è¯‘å™¨å’ŒåŒ…ç®¡ç†å™¨çš„ç‰ˆæœ¬ï¼Œå¯ä»¥éªŒè¯ç¯å¢ƒæ˜¯å¦é…ç½®æ­£ç¡®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">rustc --version
cargo --version
</code></pre>
<p>ä¸‹å›¾å±•ç¤ºäº†ç‰ˆæœ¬éªŒè¯çš„è¾“å‡ºç»“æœã€‚å¯ä»¥çœ‹åˆ°å½“å‰å®‰è£…çš„æ˜¯Rust 1.84.0ç‰ˆæœ¬ã€‚èƒ½å¤Ÿæ­£ç¡®æ‰“å°å‡ºç‰ˆæœ¬å·ï¼Œæ ‡å¿—ç€Rustå¼€å‘ç¯å¢ƒå·²ç»å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹åç»­çš„é¡¹ç›®æ„å»ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aad0cdd9ca1144f5af06ce1866ddf2ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5oGQ6b6Z5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770487527&amp;x-signature=bxzKKyIE%2BLb68FnVZJ1fsYI87K8%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºäº†ç¡®ä¿æ¯æ¬¡ç™»å½•ç»ˆç«¯æ—¶Rustç¯å¢ƒéƒ½èƒ½è‡ªåŠ¨åŠ è½½ï¼Œå°†åŠ è½½å‘½ä»¤è¿½åŠ åˆ°<code>.bashrc</code>æ–‡ä»¶ä¸­æ˜¯ä¸€ä¸ªç¨³å¥çš„åšæ³•ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">'. "$HOME/.cargo/env"'</span> &gt;&gt; ~/.bashrc
</code></pre>
<p>è¿™ä¸€æ“ä½œç¡®ä¿äº†ç¯å¢ƒå˜é‡çš„æŒä¹…åŒ–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé€šè¿‡è¿½åŠ é‡å®šå‘æ“ä½œç¬¦ï¼Œé…ç½®è¢«å†™å…¥äº†ç”¨æˆ·çš„Shellå¯åŠ¨è„šæœ¬ä¸­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7677594dd8b047c2b58b9a85324e7552~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5oGQ6b6Z5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770487527&amp;x-signature=cVvytTF2Zpww%2Bljc%2FQ2LZxSOc9k%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">ç¬¬äºŒé˜¶æ®µï¼šè“è€˜MaaSæœåŠ¡å‡­è¯é…ç½®</h2>
<p>åœ¨å¼€å§‹ç¼–å†™ä»£ç ä¹‹å‰ï¼Œè·å–å¤§æ¨¡å‹æœåŠ¡çš„è®¿é—®æƒé™æ˜¯å¿…è¦ç¯èŠ‚ã€‚è“è€˜å¹³å°æä¾›äº†æ ‡å‡†åŒ–çš„APIæ¥å£ï¼Œå…¼å®¹OpenAIè§„èŒƒï¼Œæå¤§é™ä½äº†æ¥å…¥éš¾åº¦ã€‚</p>
<p>é¦–å…ˆéœ€è¦åœ¨è“è€˜å¹¿åœºæ§åˆ¶å°ç”ŸæˆAPI Keyã€‚è¿™ä¸ªå¯†é’¥æ˜¯åº”ç”¨ä¸å¤§æ¨¡å‹æœåŠ¡è¿›è¡Œå®‰å…¨é€šä¿¡çš„å‡­è¯ï¼Œå¿…é¡»å¦¥å–„ä¿ç®¡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ§åˆ¶å°ç•Œé¢æä¾›äº†ç›´è§‚çš„å¯†é’¥ç®¡ç†åŠŸèƒ½ï¼Œæ–°ç”Ÿæˆçš„API Keyå°†ç”¨äºåç»­çš„ç¯å¢ƒå˜é‡é…ç½®ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">https://console.lanyun.net/<span class="hljs-comment">#/register?promoterCode=0131</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4ab25a80edc4ebc8b05ef9bcc2325db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5oGQ6b6Z5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770487527&amp;x-signature=JSKYJa3KcOCH1igMcM774NiSzao%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥æ˜¯é€‰æ‹©åˆé€‚çš„æ¨¡å‹ã€‚æœ¬é¡¹ç›®é€‰ç”¨<code>/maas/deepseek-ai/DeepSeek-V3.2</code>ã€‚DeepSeek V3æ¨¡å‹åœ¨è‡ªç„¶è¯­è¨€ç†è§£å’Œç”Ÿæˆä»£ç æ–¹é¢è¡¨ç°ä¼˜å¼‚ï¼Œä¸”é€šè¿‡è“è€˜çš„MaaSæ¶æ„ï¼Œèƒ½å¤Ÿæä¾›æä½çš„æ¨ç†å»¶è¿Ÿã€‚ä¸‹å›¾å±•ç¤ºäº†æ¨¡å‹é€‰æ‹©ç•Œé¢ï¼Œæ˜ç¡®äº†è°ƒç”¨çš„æ¨¡å‹æ ‡è¯†ç¬¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b51d3be4879c4ccd9ee6ed804c06a821~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5oGQ6b6Z5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770487527&amp;x-signature=pztna79Bxqxb5vVt6PgqnYmo%2BPc%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6">ç¬¬ä¸‰é˜¶æ®µï¼šRusté¡¹ç›®æ¶æ„ä¸ä¾èµ–ç®¡ç†</h2>
<p>Rustçš„é¡¹ç›®ç»“æ„ä»¥æ¸…æ™°è‘—ç§°ã€‚æœ¬é¡¹ç›®å°†é‡‡ç”¨æ ‡å‡†çš„Cargoé¡¹ç›®ç»“æ„ï¼Œå¹¶è¿›è¡Œç»†åˆ†æ¨¡å—åŒ–è®¾è®¡ï¼Œä»¥å®ç°é«˜å†…èšä½è€¦åˆçš„ä»£ç ç»„ç»‡ã€‚</p>
<h3 data-id="heading-7">3.1 ç›®å½•ç»“æ„åˆå§‹åŒ–</h3>
<p>åœ¨æœåŠ¡å™¨ç«¯ï¼Œé¦–å…ˆåˆ›å»ºé¡¹ç›®æ ¹ç›®å½•åŠå¿…è¦çš„å­ç›®å½•ã€‚åˆç†çš„ç›®å½•ç»“æ„æœ‰åŠ©äºä»£ç çš„ç»´æŠ¤å’Œæ‰©å±•ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ~
<span class="hljs-built_in">mkdir</span> -p rust-deepseek-web
<span class="hljs-built_in">cd</span> rust-deepseek-web
<span class="hljs-built_in">mkdir</span> -p src/api src/services src/models static/css static/js
</code></pre>
<p><code>src/api</code>ç”¨äºå­˜æ”¾HTTPè·¯ç”±å¤„ç†é€»è¾‘ï¼Œ<code>src/services</code>ç”¨äºå°è£…ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚è°ƒç”¨ç¬¬ä¸‰æ–¹APIï¼‰ï¼Œ<code>src/models</code>ç”¨äºå®šä¹‰æ•°æ®ç»“æ„ï¼Œ<code>static</code>åˆ™ç”¨äºå­˜æ”¾å‰ç«¯é™æ€èµ„æºã€‚ä¸‹å›¾å±•ç¤ºäº†åˆ›å»ºå®Œæˆåçš„ç›®å½•å±‚çº§ï¼Œè¿™ç§ç»“æ„ä¸ºåç»­çš„ä»£ç å¡«å……å¥ å®šäº†è‰¯å¥½çš„åŸºç¡€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4dd5a5280aa7413c86ab59998ca017c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5oGQ6b6Z5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770487527&amp;x-signature=rOBDCtPyOWoBEGByqhJVYqJ4mZ8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">3.2 æ ¸å¿ƒä¾èµ–é…ç½® (Cargo.toml)</h3>
<p><code>Cargo.toml</code>æ˜¯Rusté¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ã€‚æœ¬é¡¹ç›®å¼•å…¥äº†ä¸€ç³»åˆ—é«˜æ€§èƒ½çš„å¼‚æ­¥ç”Ÿæ€åº“ï¼š</p>
<ul>
<li><strong>axum (0.7)</strong>: å½“å‰Rustç”Ÿæ€ä¸­æœ€æµè¡Œçš„Webæ¡†æ¶ä¹‹ä¸€ï¼ŒåŸºäºTokioæ„å»ºï¼Œæä¾›ç¬¦åˆäººä½“å·¥ç¨‹å­¦çš„APIè®¾è®¡ã€‚</li>
<li><strong>tokio (full)</strong>: å¼ºå¤§çš„å¼‚æ­¥è¿è¡Œæ—¶ï¼Œè´Ÿè´£ä»»åŠ¡è°ƒåº¦ã€I/Oæ“ä½œã€‚</li>
<li><strong>reqwest</strong>: å…¨åŠŸèƒ½çš„HTTPå®¢æˆ·ç«¯ï¼Œæ”¯æŒå¼‚æ­¥è°ƒç”¨å’Œæµå¼å“åº”å¤„ç†ï¼Œç”¨äºä¸DeepSeek APIé€šä¿¡ã€‚</li>
<li><strong>serde &amp; serde_json</strong>: åºåˆ—åŒ–ä¸ååºåˆ—åŒ–æ¡†æ¶ï¼Œå¤„ç†JSONæ•°æ®çš„æ ¸å¿ƒå·¥å…·ã€‚</li>
<li><strong>tracing</strong>: ç»“æ„åŒ–æ—¥å¿—è®°å½•ç³»ç»Ÿï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒçš„ç›‘æ§ä¸è°ƒè¯•ã€‚</li>
<li><strong>dotenv</strong>: ç”¨äºåŠ è½½<code>.env</code>æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ï¼Œå®ç°é…ç½®ä¸ä»£ç åˆ†ç¦»ã€‚</li>
<li><strong>futures &amp; async-stream</strong>: å¤„ç†å¼‚æ­¥æµï¼ˆStreamï¼‰çš„å…³é”®åº“ï¼Œæ˜¯å®ç°æ‰“å­—æœºæ•ˆæœï¼ˆæµå¼è¾“å‡ºï¼‰çš„åŸºç¡€ã€‚</li>
</ul>
<p>é€šè¿‡ç¼–å†™<code>Cargo.toml</code>æ–‡ä»¶ï¼Œå£°æ˜äº†é¡¹ç›®æ‰€éœ€çš„æ‰€æœ‰å¤–éƒ¨ä¾èµ–åŠå…¶ç‰¹æ€§æ ‡å¿—ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-built_in">cat</span> &gt; Cargo.toml &lt;&lt; <span class="hljs-string">'EOF'</span>

[package]

name = <span class="hljs-string">"rust-deepseek-web"</span>

version = <span class="hljs-string">"0.1.0"</span>

edition = <span class="hljs-string">"2021"</span>

  

[dependencies]

axum = <span class="hljs-string">"0.7"</span>

tokio = { version = <span class="hljs-string">"1"</span>, features = [<span class="hljs-string">"full"</span>] }

tower = <span class="hljs-string">"0.4"</span>

tower-http = { version = <span class="hljs-string">"0.5"</span>, features = [<span class="hljs-string">"fs"</span>, <span class="hljs-string">"cors"</span>, <span class="hljs-string">"trace"</span>] }

reqwest = { version = <span class="hljs-string">"0.11"</span>, features = [<span class="hljs-string">"json"</span>, <span class="hljs-string">"stream"</span>] }

serde = { version = <span class="hljs-string">"1.0"</span>, features = [<span class="hljs-string">"derive"</span>] }

serde_json = <span class="hljs-string">"1.0"</span>

dotenv = <span class="hljs-string">"0.15"</span>

tracing = <span class="hljs-string">"0.1"</span>

tracing-subscriber = { version = <span class="hljs-string">"0.3"</span>, features = [<span class="hljs-string">"env-filter"</span>] }

anyhow = <span class="hljs-string">"1.0"</span>

thiserror = <span class="hljs-string">"1.0"</span>

futures = <span class="hljs-string">"0.3"</span>

tokio-stream = <span class="hljs-string">"0.1"</span>

async-stream = <span class="hljs-string">"0.3"</span>

  

[profile.release]

opt-level = 3

lto = <span class="hljs-literal">true</span>

codegen-units = 1

strip = <span class="hljs-literal">true</span>

EOF
</code></pre>
<h3 data-id="heading-9">3.3 ç¯å¢ƒå˜é‡é…ç½® (.env)</h3>
<p>ä¸ºäº†é¿å…å°†æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚API Keyï¼‰ç¡¬ç¼–ç åœ¨æºç ä¸­ï¼Œä½¿ç”¨<code>.env</code>æ–‡ä»¶è¿›è¡Œç®¡ç†æ˜¯è¡Œä¸šæœ€ä½³å®è·µã€‚è¯¥æ–‡ä»¶åŒ…å«äº†APIå¯†é’¥ã€APIåœ°å€ã€æ¨¡å‹åç§°ä»¥åŠæœåŠ¡ç›‘å¬çš„ç«¯å£é…ç½®ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">DEEPSEEK_API_KEY=sk-your-api-key-here
DEEPSEEK_API_URL=https://maas-api.lanyun.net/v1/
DEEPSEEK_MODEL=/maas/deepseek-ai/DeepSeek-V3.2
SERVER_HOST=0.0.0.0
SERVER_PORT=3000
RUST_LOG=info
</code></pre>
<p>ä¸‹å›¾å±•ç¤ºäº†é…ç½®æ–‡ä»¶çš„å†…å®¹é¢„è§ˆã€‚æ­£ç¡®é…ç½®è¯¥æ–‡ä»¶æ˜¯æœåŠ¡èƒ½å¤ŸæˆåŠŸé‰´æƒå¹¶è·¯ç”±åˆ°æ­£ç¡®æ¨¡å‹çš„å…³é”®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88166373215e450cb7f3e2e2b50cc525~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5oGQ6b6Z5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770487527&amp;x-signature=YQhW9b8u8tw54%2FkOxe9TD4aGUjs%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-10">ç¬¬å››é˜¶æ®µï¼šåç«¯æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å®ç°</h2>
<p>åç«¯å¼€å‘æ˜¯æœ¬é¡¹ç›®çš„é‡å¤´æˆï¼Œæ¶‰åŠåˆ°é…ç½®åŠ è½½ã€æ•°æ®æ¨¡å‹å®šä¹‰ã€å¤–éƒ¨æœåŠ¡é€šä¿¡ä»¥åŠAPIæ¥å£çš„å®ç°ã€‚</p>
<h3 data-id="heading-11">4.1 é…ç½®ç®¡ç†æ¨¡å— (src/config.rs)</h3>
<p><code>src/config.rs</code>æ¨¡å—è´Ÿè´£å°†ç¯å¢ƒå˜é‡åŠ è½½åˆ°å¼ºç±»å‹çš„Rustç»“æ„ä½“ä¸­ã€‚è¿™ç§åšæ³•åˆ©ç”¨äº†Rustçš„ç±»å‹ç³»ç»Ÿï¼Œåœ¨åº”ç”¨å¯åŠ¨é˜¶æ®µå°±èƒ½æ•è·é…ç½®é”™è¯¯ï¼ˆå¦‚ç¼ºå°‘Keyæˆ–ç«¯å£æ ¼å¼é”™è¯¯ï¼‰ï¼Œé˜²æ­¢åº”ç”¨åœ¨è¿è¡Œæ—¶å› é…ç½®é—®é¢˜å´©æºƒã€‚</p>
<p>ä»£ç ä¸­å®šä¹‰äº†<code>Config</code>ç»“æ„ä½“ï¼Œå¹¶å®ç°äº†<code>from_env</code>æ„é€ æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä½¿ç”¨<code>dotenv</code>åŠ è½½ç¯å¢ƒæ–‡ä»¶ï¼Œå¹¶é€šè¿‡<code>std::env::var</code>è¯»å–å˜é‡ã€‚å¯¹äºå¯é€‰é…ç½®ï¼ˆå¦‚HOSTï¼‰ï¼Œæä¾›äº†é»˜è®¤å€¼å›é€€æœºåˆ¶ï¼›å¯¹äºå¿…é¡»é…ç½®ï¼ˆå¦‚API Keyï¼‰ï¼Œåˆ™ä¼šè¿”å›é”™è¯¯ï¼Œç¡®ä¿å®‰å…¨æ€§ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-built_in">cat</span> &gt; src/config.rs &lt;&lt; <span class="hljs-string">'EOF'</span>

use std::<span class="hljs-built_in">env</span>;

  

<span class="hljs-comment">#[derive(Debug, Clone)]</span>

pub struct Config {

    pub deepseek_api_key: String,

    pub deepseek_api_url: String,

    pub deepseek_model: String,

    pub server_host: String,

    pub server_port: u16,

}

  

impl Config {

    pub fn from_env() -&gt; Result&lt;Self, String&gt; {

        dotenv::dotenv().ok();

  

        <span class="hljs-built_in">let</span> deepseek_api_key = <span class="hljs-built_in">env</span>::var(<span class="hljs-string">"DEEPSEEK_API_KEY"</span>)

            .map_err(|_| <span class="hljs-string">"DEEPSEEK_API_KEY æœªè®¾ç½®"</span>.to_string())?;

  

        <span class="hljs-built_in">let</span> deepseek_api_url = <span class="hljs-built_in">env</span>::var(<span class="hljs-string">"DEEPSEEK_API_URL"</span>)

            .unwrap_or_else(|_| <span class="hljs-string">"https://api.deepseek.com/v1"</span>.to_string());

  

        <span class="hljs-built_in">let</span> deepseek_model = <span class="hljs-built_in">env</span>::var(<span class="hljs-string">"DEEPSEEK_MODEL"</span>)

            .unwrap_or_else(|_| <span class="hljs-string">"deepseek-chat"</span>.to_string());

  

        <span class="hljs-built_in">let</span> server_host = <span class="hljs-built_in">env</span>::var(<span class="hljs-string">"SERVER_HOST"</span>)

            .unwrap_or_else(|_| <span class="hljs-string">"127.0.0.1"</span>.to_string());

  

        <span class="hljs-built_in">let</span> server_port = <span class="hljs-built_in">env</span>::var(<span class="hljs-string">"SERVER_PORT"</span>)

            .unwrap_or_else(|_| <span class="hljs-string">"3000"</span>.to_string())

            .parse::&lt;u16&gt;()

            .map_err(|_| <span class="hljs-string">"SERVER_PORT å¿…é¡»æ˜¯æœ‰æ•ˆçš„ç«¯å£å·"</span>.to_string())?;

  

        Ok(Config {

            deepseek_api_key,

            deepseek_api_url,

            deepseek_model,

            server_host,

            server_port,

        })

    }

  

    pub fn server_address(&amp;self) -&gt; String {

        format!(<span class="hljs-string">"{}:{}"</span>, self.server_host, self.server_port)

    }

}

EOF
</code></pre>
<h3 data-id="heading-12">4.2 æ•°æ®æ¨¡å‹å®šä¹‰ (src/models)</h3>
<p>åœ¨<code>src/models</code>ç›®å½•ä¸‹ï¼Œ<code>chat.rs</code>å®šä¹‰äº†ä¸DeepSeek APIäº¤äº’æ‰€éœ€çš„æ‰€æœ‰JSONæ•°æ®ç»“æ„ã€‚</p>
<ul>
<li><strong>ChatRequest</strong>: å‰ç«¯å‘é€çš„è¯·æ±‚ä½“ï¼ŒåŒ…å«ç”¨æˆ·æ¶ˆæ¯ã€æ¨¡å¼ï¼ˆèŠå¤©/ä»£ç /æ–‡æ¡£ï¼‰ä»¥åŠå†å²ä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>DeepSeekRequest</strong>: å‘é€ç»™å¤§æ¨¡å‹APIçš„è¯·æ±‚ä½“ï¼Œä¸¥æ ¼éµå¾ªOpenAI APIè§„èŒƒã€‚å…¶ä¸­<code>stream: bool</code>å­—æ®µå†³å®šäº†æ˜¯å¦å¼€å¯æµå¼ä¼ è¾“ã€‚</li>
<li><strong>DeepSeekResponse &amp; StreamChunk</strong>: åˆ†åˆ«å¯¹åº”éæµå¼å’Œæµå¼å“åº”çš„æ•°æ®ç»“æ„ã€‚ç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯<code>StreamChunk</code>ï¼Œå®ƒç”¨äºè§£æSSEï¼ˆServer-Sent Eventsï¼‰æ¨é€çš„å¢é‡æ•°æ®ç‰‡æ®µã€‚</li>
</ul>
<p>ä½¿ç”¨<code>#[derive(Serialize, Deserialize)]</code>å®ï¼Œé…åˆ<code>serde</code>åº“ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å¤„ç†JSONå­—ç¬¦ä¸²ä¸Rustç»“æ„ä½“ä¹‹é—´çš„è½¬æ¢ï¼Œæå¤§åœ°ç®€åŒ–äº†æ•°æ®å¤„ç†æµç¨‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-built_in">cat</span> &gt; src/models/mod.rs &lt;&lt; <span class="hljs-string">'EOF'</span>

pub mod chat;

EOF
</code></pre>
<h3 data-id="heading-13">4.3 DeepSeekæœåŠ¡å±‚å°è£… (src/services/deepseek.rs)</h3>
<p>è¿™æ˜¯è¿æ¥æœ¬åœ°æœåŠ¡ä¸è¿œç«¯å¤§æ¨¡å‹çš„æ¡¥æ¢ã€‚<code>DeepSeekService</code>ç»“æ„ä½“æŒæœ‰HTTPå®¢æˆ·ç«¯å’Œé…ç½®ä¿¡æ¯ã€‚</p>
<p>è¯¥æœåŠ¡å®ç°äº†ä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼š</p>
<ol>
<li><strong>chat</strong>: å¤„ç†å¸¸è§„çš„ä¸€æ¬¡æ€§å“åº”è¯·æ±‚ã€‚</li>
<li><strong>chat_stream</strong>: å¤„ç†æµå¼å“åº”è¯·æ±‚ã€‚</li>
</ol>
<p>åœ¨<code>chat_stream</code>æ–¹æ³•ä¸­ï¼Œåˆ©ç”¨äº†<code>reqwest</code>çš„<code>bytes_stream()</code>åŠŸèƒ½è·å–åŸå§‹å­—èŠ‚æµã€‚ä»£ç é€šè¿‡<code>async-stream</code>å®æ„å»ºäº†ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œé€å—è¯»å–ç½‘ç»œæ•°æ®ã€‚ç”±äºSSEåè®®çš„æ•°æ®æ ¼å¼æ˜¯<code>data: {json}\n\n</code>ï¼Œè§£æé€»è¾‘éœ€è¦å¤„ç†ç¼“å†²åŒºï¼ŒæŒ‰è¡Œåˆ†å‰²æ•°æ®ï¼Œå‰”é™¤<code>data: </code>å‰ç¼€ï¼Œå¹¶è¯†åˆ«<code>[DONE]</code>ç»“æŸæ ‡è®°ã€‚è¿™ç§ç»†ç²’åº¦çš„æµå¤„ç†ç¡®ä¿äº†å‰ç«¯èƒ½å¤Ÿå®æ—¶æ¥æ”¶åˆ°AIç”Ÿæˆçš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯ç­‰å¾…æ‰€æœ‰å†…å®¹ç”Ÿæˆå®Œæ¯•ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// src/services/deepseek.rs</span>

<span class="hljs-comment">// DeepSeek API å®¢æˆ·ç«¯æœåŠ¡</span>

  

<span class="hljs-keyword">use</span> crate::config::Config;

<span class="hljs-keyword">use</span> crate::models::chat::{DeepSeekRequest, DeepSeekResponse, Message, StreamChunk};

<span class="hljs-keyword">use</span> anyhow::{Context, <span class="hljs-type">Result</span>};

<span class="hljs-keyword">use</span> futures::stream::Stream;

<span class="hljs-keyword">use</span> reqwest::Client;

<span class="hljs-keyword">use</span> std::pin::Pin;

  

<span class="hljs-comment">/// DeepSeek æœåŠ¡å®¢æˆ·ç«¯</span>

<span class="hljs-meta">#[derive(Clone)]</span>

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">DeepSeekService</span> {

    client: Client,

    config: Config,

}

  

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">DeepSeekService</span> {

    <span class="hljs-comment">/// åˆ›å»ºæ–°çš„ DeepSeek æœåŠ¡å®ä¾‹</span>

    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(config: Config) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">client</span> = Client::<span class="hljs-title function_ invoke__">new</span>();

        <span class="hljs-keyword">Self</span> { client, config }

    }

  

    <span class="hljs-comment">/// å‘é€èŠå¤©è¯·æ±‚ï¼ˆéæµå¼ï¼‰</span>

    <span class="hljs-comment">///</span>

    <span class="hljs-comment">/// # å‚æ•°</span>

    <span class="hljs-comment">/// - `messages`: æ¶ˆæ¯å†å²åˆ—è¡¨</span>

    <span class="hljs-comment">///</span>

    <span class="hljs-comment">/// # è¿”å›</span>

    <span class="hljs-comment">/// - `Result&lt;String&gt;`: AI å›å¤å†…å®¹</span>

    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">chat</span>(&amp;<span class="hljs-keyword">self</span>, messages: <span class="hljs-type">Vec</span>&lt;Message&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>&gt; {

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">request</span> = DeepSeekRequest {

            model: <span class="hljs-keyword">self</span>.config.deepseek_model.<span class="hljs-title function_ invoke__">clone</span>(),

            messages,

            stream: <span class="hljs-literal">false</span>,

            temperature: <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">0.7</span>),

            max_tokens: <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">2000</span>),

        };

  

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">url</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"{}/chat/completions"</span>, <span class="hljs-keyword">self</span>.config.deepseek_api_url);

  

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">response</span> = <span class="hljs-keyword">self</span>

            .client

            .<span class="hljs-title function_ invoke__">post</span>(&amp;url)

            .<span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">"Authorization"</span>, <span class="hljs-built_in">format!</span>(<span class="hljs-string">"Bearer {}"</span>, <span class="hljs-keyword">self</span>.config.deepseek_api_key))

            .<span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>)

            .<span class="hljs-title function_ invoke__">json</span>(&amp;request)

            .<span class="hljs-title function_ invoke__">send</span>()

            .<span class="hljs-keyword">await</span>

            .<span class="hljs-title function_ invoke__">context</span>(<span class="hljs-string">"å‘é€è¯·æ±‚åˆ° DeepSeek API å¤±è´¥"</span>)?;

  

        <span class="hljs-keyword">if</span> !response.<span class="hljs-title function_ invoke__">status</span>().<span class="hljs-title function_ invoke__">is_success</span>() {

            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">status</span> = response.<span class="hljs-title function_ invoke__">status</span>();

            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">error_text</span> = response.<span class="hljs-title function_ invoke__">text</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap_or_default</span>();

            anyhow::bail!(<span class="hljs-string">"DeepSeek API è¿”å›é”™è¯¯ {}: {}"</span>, status, error_text);

        }

  

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">deepseek_response</span>: DeepSeekResponse = response

            .<span class="hljs-title function_ invoke__">json</span>()

            .<span class="hljs-keyword">await</span>

            .<span class="hljs-title function_ invoke__">context</span>(<span class="hljs-string">"è§£æ DeepSeek API å“åº”å¤±è´¥"</span>)?;

  

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">content</span> = deepseek_response

            .choices

            .<span class="hljs-title function_ invoke__">first</span>()

            .<span class="hljs-title function_ invoke__">and_then</span>(|choice| <span class="hljs-title function_ invoke__">Some</span>(choice.message.content.<span class="hljs-title function_ invoke__">clone</span>()))

            .<span class="hljs-title function_ invoke__">unwrap_or_else</span>(|| <span class="hljs-string">"æ— å“åº”å†…å®¹"</span>.<span class="hljs-title function_ invoke__">to_string</span>());

  

        <span class="hljs-title function_ invoke__">Ok</span>(content)

    }

  

    <span class="hljs-comment">/// å‘é€èŠå¤©è¯·æ±‚ï¼ˆæµå¼ï¼‰</span>

    <span class="hljs-comment">///</span>

    <span class="hljs-comment">/// # å‚æ•°</span>

    <span class="hljs-comment">/// - `messages`: æ¶ˆæ¯å†å²åˆ—è¡¨</span>

    <span class="hljs-comment">///</span>

    <span class="hljs-comment">/// # è¿”å›</span>

    <span class="hljs-comment">/// - `Result&lt;impl Stream&gt;`: æµå¼å“åº”</span>

    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">chat_stream</span>(

        &amp;<span class="hljs-keyword">self</span>,

        messages: <span class="hljs-type">Vec</span>&lt;Message&gt;,

    ) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Pin&lt;<span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Stream&lt;Item = <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>&gt;&gt; + <span class="hljs-built_in">Send</span>&gt;&gt;&gt; {

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">request</span> = DeepSeekRequest {

            model: <span class="hljs-keyword">self</span>.config.deepseek_model.<span class="hljs-title function_ invoke__">clone</span>(),

            messages,

            stream: <span class="hljs-literal">true</span>,

            temperature: <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">0.7</span>),

            max_tokens: <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">2000</span>),

        };

  

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">url</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"{}/chat/completions"</span>, <span class="hljs-keyword">self</span>.config.deepseek_api_url);

  

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">response</span> = <span class="hljs-keyword">self</span>

            .client

            .<span class="hljs-title function_ invoke__">post</span>(&amp;url)

            .<span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">"Authorization"</span>, <span class="hljs-built_in">format!</span>(<span class="hljs-string">"Bearer {}"</span>, <span class="hljs-keyword">self</span>.config.deepseek_api_key))

            .<span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>)

            .<span class="hljs-title function_ invoke__">json</span>(&amp;request)

            .<span class="hljs-title function_ invoke__">send</span>()

            .<span class="hljs-keyword">await</span>

            .<span class="hljs-title function_ invoke__">context</span>(<span class="hljs-string">"å‘é€æµå¼è¯·æ±‚åˆ° DeepSeek API å¤±è´¥"</span>)?;

  

        <span class="hljs-keyword">if</span> !response.<span class="hljs-title function_ invoke__">status</span>().<span class="hljs-title function_ invoke__">is_success</span>() {

            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">status</span> = response.<span class="hljs-title function_ invoke__">status</span>();

            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">error_text</span> = response.<span class="hljs-title function_ invoke__">text</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap_or_default</span>();

            anyhow::bail!(<span class="hljs-string">"DeepSeek API è¿”å›é”™è¯¯ {}: {}"</span>, status, error_text);

        }

  

        <span class="hljs-comment">// åˆ›å»ºæµå¼å“åº”å¤„ç†å™¨</span>

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">stream</span> = async_stream::stream! {

            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">bytes_stream</span> = response.<span class="hljs-title function_ invoke__">bytes_stream</span>();

            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">buffer</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();

  

            <span class="hljs-keyword">use</span> futures::StreamExt;

  

            <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(chunk_result) = bytes_stream.<span class="hljs-title function_ invoke__">next</span>().<span class="hljs-keyword">await</span> {

                <span class="hljs-keyword">match</span> chunk_result {

                    <span class="hljs-title function_ invoke__">Ok</span>(chunk) =&gt; {

                        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">chunk_str</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from_utf8_lossy</span>(&amp;chunk);

                        buffer.<span class="hljs-title function_ invoke__">push_str</span>(&amp;chunk_str);

  

                        <span class="hljs-comment">// å¤„ç† SSE æ ¼å¼çš„æ•°æ®</span>

                        <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(line_end) = buffer.<span class="hljs-title function_ invoke__">find</span>(<span class="hljs-string">'\n'</span>) {

                            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">line</span> = buffer[..line_end].<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">to_string</span>();

                            buffer = buffer[line_end + <span class="hljs-number">1</span>..].<span class="hljs-title function_ invoke__">to_string</span>();

  

                            <span class="hljs-keyword">if</span> line.<span class="hljs-title function_ invoke__">starts_with</span>(<span class="hljs-string">"data: "</span>) {

                                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = &amp;line[<span class="hljs-number">6</span>..];

  

                                <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ˜¯ç»“æŸæ ‡è®°</span>

                                <span class="hljs-keyword">if</span> data == <span class="hljs-string">"[DONE]"</span> {

                                    <span class="hljs-keyword">break</span>;

                                }

  

                                <span class="hljs-comment">// è§£æ JSON</span>

                                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(stream_chunk) = serde_json::from_str::&lt;StreamChunk&gt;(data) {

                                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(choice) = stream_chunk.choices.<span class="hljs-title function_ invoke__">first</span>() {

                                        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(content) = &amp;choice.delta.content {

                                            <span class="hljs-keyword">yield</span> <span class="hljs-title function_ invoke__">Ok</span>(content.<span class="hljs-title function_ invoke__">clone</span>());

                                        }

                                    }

                                }

                            }

                        }

                    }

                    <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; {

                        <span class="hljs-keyword">yield</span> <span class="hljs-title function_ invoke__">Err</span>(anyhow::anyhow!(<span class="hljs-string">"è¯»å–æµæ•°æ®å¤±è´¥: {}"</span>, e));

                        <span class="hljs-keyword">break</span>;

                    }

                }

            }

        };

  

        <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">pin</span>(stream))

    }

}
</code></pre>
<h3 data-id="heading-14">4.4 APIè·¯ç”±å¤„ç† (src/api)</h3>
<p><code>src/api</code>æ¨¡å—è´Ÿè´£å°†HTTPè¯·æ±‚æ˜ å°„åˆ°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>
<ul>
<li><strong>chat.rs</strong>: åŒ…å«äº†æ ¸å¿ƒçš„<code>chat_stream_handler</code>ã€‚è¯¥å¤„ç†å™¨æ¥æ”¶å‰ç«¯çš„JSONè¯·æ±‚ï¼Œè°ƒç”¨<code>DeepSeekService</code>è·å–æµå¯¹è±¡ï¼Œç„¶åå°†å…¶è½¬æ¢ä¸ºAxumæ”¯æŒçš„<code>Sse</code>ï¼ˆServer-Sent Eventsï¼‰å“åº”æ ¼å¼ã€‚è¿™é‡Œä½¿ç”¨äº†<code>keep_alive</code>æœºåˆ¶ï¼Œé˜²æ­¢é•¿è¿æ¥ä¸­æ–­ã€‚åŒæ—¶ï¼Œæ ¹æ®è¯·æ±‚æ¨¡å¼ï¼ˆCoding/Documentï¼‰ï¼Œä¼šåœ¨æ¶ˆæ¯å†å²å‰æ³¨å…¥ä¸åŒçš„System Promptï¼ˆç³»ç»Ÿæç¤ºè¯ï¼‰ï¼Œä»¥è°ƒæ•´AIçš„å›ç­”é£æ ¼ã€‚</li>
</ul>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// src/api/chat.rs</span>

<span class="hljs-comment">// èŠå¤© API è·¯ç”±å¤„ç†å™¨</span>

  

<span class="hljs-keyword">use</span> crate::models::chat::{ChatRequest, ChatResponse, Message};

<span class="hljs-keyword">use</span> crate::services::deepseek::DeepSeekService;

<span class="hljs-keyword">use</span> axum::{

    extract::State,

    http::StatusCode,

    response::{sse::Event, IntoResponse, Response, Sse},

    Json,

};

<span class="hljs-keyword">use</span> futures::stream::Stream;

<span class="hljs-keyword">use</span> std::convert::Infallible;

<span class="hljs-keyword">use</span> std::sync::Arc;

  

<span class="hljs-comment">/// åº”ç”¨çŠ¶æ€</span>

<span class="hljs-meta">#[derive(Clone)]</span>

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">AppState</span> {

    <span class="hljs-keyword">pub</span> deepseek_service: DeepSeekService,

}

  

<span class="hljs-comment">/// èŠå¤©æ¥å£ï¼ˆéæµå¼ï¼‰</span>

<span class="hljs-comment">///</span>

<span class="hljs-comment">/// POST /api/chat</span>

<span class="hljs-comment">/// æ¥æ”¶ç”¨æˆ·æ¶ˆæ¯ï¼Œè¿”å› AI å›å¤</span>

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">chat_handler</span>(

    <span class="hljs-title function_ invoke__">State</span>(state): State&lt;Arc&lt;AppState&gt;&gt;,

    <span class="hljs-title function_ invoke__">Json</span>(request): Json&lt;ChatRequest&gt;,

) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Json&lt;ChatResponse&gt;, (StatusCode, <span class="hljs-type">String</span>)&gt; {

    tracing::info!(<span class="hljs-string">"æ”¶åˆ°èŠå¤©è¯·æ±‚: {}"</span>, request.message);

  

    <span class="hljs-comment">// æ„å»ºæ¶ˆæ¯åˆ—è¡¨</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">messages</span> = request.history.<span class="hljs-title function_ invoke__">clone</span>();

  

    <span class="hljs-comment">// æ ¹æ®æ¨¡å¼æ·»åŠ ç³»ç»Ÿæç¤ºè¯</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">system_prompt</span> = <span class="hljs-title function_ invoke__">get_system_prompt</span>(&amp;request.mode);

    <span class="hljs-keyword">if</span> !system_prompt.<span class="hljs-title function_ invoke__">is_empty</span>() {

        messages.<span class="hljs-title function_ invoke__">insert</span>(

            <span class="hljs-number">0</span>,

            Message {

                role: <span class="hljs-string">"system"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),

                content: system_prompt,

            },

        );

    }

  

    <span class="hljs-comment">// æ·»åŠ ç”¨æˆ·æ¶ˆæ¯</span>

    messages.<span class="hljs-title function_ invoke__">push</span>(Message {

        role: <span class="hljs-string">"user"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),

        content: request.message.<span class="hljs-title function_ invoke__">clone</span>(),

    });

  

    <span class="hljs-comment">// è°ƒç”¨ DeepSeek API</span>

    <span class="hljs-keyword">match</span> state.deepseek_service.<span class="hljs-title function_ invoke__">chat</span>(messages).<span class="hljs-keyword">await</span> {

        <span class="hljs-title function_ invoke__">Ok</span>(response) =&gt; {

            tracing::info!(<span class="hljs-string">"AI å›å¤æˆåŠŸ"</span>);

            <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-title function_ invoke__">Json</span>(ChatResponse {

                message: response,

                status: <span class="hljs-string">"success"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),

            }))

        }

        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; {

            tracing::error!(<span class="hljs-string">"AI å›å¤å¤±è´¥: {}"</span>, e);

            <span class="hljs-title function_ invoke__">Err</span>((

                StatusCode::INTERNAL_SERVER_ERROR,

                <span class="hljs-built_in">format!</span>(<span class="hljs-string">"AI å›å¤å¤±è´¥: {}"</span>, e),

            ))

        }

    }

}

  

<span class="hljs-comment">/// èŠå¤©æ¥å£ï¼ˆæµå¼ï¼‰</span>

<span class="hljs-comment">///</span>

<span class="hljs-comment">/// POST /api/chat/stream</span>

<span class="hljs-comment">/// æ¥æ”¶ç”¨æˆ·æ¶ˆæ¯ï¼Œè¿”å›æµå¼ AI å›å¤</span>

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">chat_stream_handler</span>(

    <span class="hljs-title function_ invoke__">State</span>(state): State&lt;Arc&lt;AppState&gt;&gt;,

    <span class="hljs-title function_ invoke__">Json</span>(request): Json&lt;ChatRequest&gt;,

) <span class="hljs-punctuation">-&gt;</span> Response {

    tracing::info!(<span class="hljs-string">"æ”¶åˆ°æµå¼èŠå¤©è¯·æ±‚: {}"</span>, request.message);

  

    <span class="hljs-comment">// æ„å»ºæ¶ˆæ¯åˆ—è¡¨</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">messages</span> = request.history.<span class="hljs-title function_ invoke__">clone</span>();

  

    <span class="hljs-comment">// æ ¹æ®æ¨¡å¼æ·»åŠ ç³»ç»Ÿæç¤ºè¯</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">system_prompt</span> = <span class="hljs-title function_ invoke__">get_system_prompt</span>(&amp;request.mode);

    <span class="hljs-keyword">if</span> !system_prompt.<span class="hljs-title function_ invoke__">is_empty</span>() {

        messages.<span class="hljs-title function_ invoke__">insert</span>(

            <span class="hljs-number">0</span>,

            Message {

                role: <span class="hljs-string">"system"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),

                content: system_prompt,

            },

        );

    }

  

    <span class="hljs-comment">// æ·»åŠ ç”¨æˆ·æ¶ˆæ¯</span>

    messages.<span class="hljs-title function_ invoke__">push</span>(Message {

        role: <span class="hljs-string">"user"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),

        content: request.message.<span class="hljs-title function_ invoke__">clone</span>(),

    });

  

    <span class="hljs-comment">// è°ƒç”¨ DeepSeek API æµå¼æ¥å£</span>

    <span class="hljs-keyword">match</span> state.deepseek_service.<span class="hljs-title function_ invoke__">chat_stream</span>(messages).<span class="hljs-keyword">await</span> {

        <span class="hljs-title function_ invoke__">Ok</span>(stream) =&gt; {

            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">sse_stream</span> = <span class="hljs-title function_ invoke__">create_sse_stream</span>(stream);

            Sse::<span class="hljs-title function_ invoke__">new</span>(sse_stream).<span class="hljs-title function_ invoke__">into_response</span>()

        }

        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; {

            tracing::error!(<span class="hljs-string">"æµå¼ AI å›å¤å¤±è´¥: {}"</span>, e);

            (

                StatusCode::INTERNAL_SERVER_ERROR,

                <span class="hljs-built_in">format!</span>(<span class="hljs-string">"æµå¼ AI å›å¤å¤±è´¥: {}"</span>, e),

            )

                .<span class="hljs-title function_ invoke__">into_response</span>()

        }

    }

}

  

<span class="hljs-comment">/// åˆ›å»º SSE æµ</span>

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">create_sse_stream</span>(

    stream: <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Stream</span>&lt;Item = anyhow::<span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>&gt;&gt; + <span class="hljs-built_in">Send</span> + <span class="hljs-symbol">'static</span>,

) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Stream</span>&lt;Item = <span class="hljs-type">Result</span>&lt;Event, Infallible&gt;&gt; {

    <span class="hljs-keyword">use</span> futures::StreamExt;

  

    stream.<span class="hljs-title function_ invoke__">map</span>(|result| <span class="hljs-keyword">match</span> result {

        <span class="hljs-title function_ invoke__">Ok</span>(content) =&gt; <span class="hljs-title function_ invoke__">Ok</span>(Event::<span class="hljs-title function_ invoke__">default</span>().<span class="hljs-title function_ invoke__">data</span>(content)),

        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; {

            tracing::error!(<span class="hljs-string">"æµå¼æ•°æ®é”™è¯¯: {}"</span>, e);

            <span class="hljs-title function_ invoke__">Ok</span>(Event::<span class="hljs-title function_ invoke__">default</span>().<span class="hljs-title function_ invoke__">data</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">"[ERROR]: {}"</span>, e)))

        }

    })

}

  

<span class="hljs-comment">/// æ ¹æ®æ¨¡å¼è·å–ç³»ç»Ÿæç¤ºè¯</span>

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_system_prompt</span>(mode: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> {

    <span class="hljs-keyword">match</span> mode {

        <span class="hljs-string">"code"</span> =&gt; {

            <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¼–ç¨‹åŠ©æ‰‹ã€‚è¯·æä¾›æ¸…æ™°ã€å‡†ç¡®çš„ä»£ç ç¤ºä¾‹å’Œè§£é‡Šã€‚\

            ä½¿ç”¨ Markdown æ ¼å¼è¾“å‡ºä»£ç å—ã€‚"</span>

                .<span class="hljs-title function_ invoke__">to_string</span>()

        }

        <span class="hljs-string">"document"</span> =&gt; {

            <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæ–‡æ¡£åˆ†æä¸“å®¶ã€‚è¯·ä»”ç»†åˆ†ææ–‡æ¡£å†…å®¹ï¼Œ\

            æä¾›å‡†ç¡®çš„æ‘˜è¦å’Œè§è§£ã€‚"</span>

                .<span class="hljs-title function_ invoke__">to_string</span>()

        }

        _ =&gt; <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>(), <span class="hljs-comment">// é»˜è®¤èŠå¤©æ¨¡å¼ä¸éœ€è¦ç‰¹æ®Šæç¤ºè¯</span>

    }

}
</code></pre>
<ul>
<li><strong>health.rs</strong>: æä¾›äº†ä¸€ä¸ªç®€å•çš„å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼Œç”¨äºç›‘æ§æœåŠ¡å­˜æ´»çŠ¶æ€ã€‚</li>
</ul>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// src/api/health.rs</span>

<span class="hljs-comment">// å¥åº·æ£€æŸ¥ API</span>

  

<span class="hljs-keyword">use</span> axum::{http::StatusCode, Json};

<span class="hljs-keyword">use</span> serde::Serialize;

  

<span class="hljs-meta">#[derive(Serialize)]</span>

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">HealthResponse</span> {

    <span class="hljs-keyword">pub</span> status: <span class="hljs-type">String</span>,

    <span class="hljs-keyword">pub</span> message: <span class="hljs-type">String</span>,

}

  

<span class="hljs-comment">/// å¥åº·æ£€æŸ¥æ¥å£</span>

<span class="hljs-comment">///</span>

<span class="hljs-comment">/// GET /api/health</span>

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">health_handler</span>() <span class="hljs-punctuation">-&gt;</span> (StatusCode, Json&lt;HealthResponse&gt;) {

    (

        StatusCode::OK,

        <span class="hljs-title function_ invoke__">Json</span>(HealthResponse {

            status: <span class="hljs-string">"ok"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),

            message: <span class="hljs-string">"æœåŠ¡è¿è¡Œæ­£å¸¸"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),

        }),

    )

}
</code></pre>
<h3 data-id="heading-15">4.5 ä¸»ç¨‹åºå…¥å£ (src/main.rs)</h3>
<p><code>main.rs</code>æ˜¯å°†æ‰€æœ‰æ¨¡å—ä¸²è”èµ·æ¥çš„ä¸­æ¢ã€‚</p>
<ol>
<li><strong>æ—¥å¿—åˆå§‹åŒ–</strong>: é…ç½®<code>tracing_subscriber</code>ï¼Œå°†æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</li>
<li><strong>çŠ¶æ€å…±äº«</strong>: å°†<code>DeepSeekService</code>å®ä¾‹å°è£…åœ¨<code>Arc</code>ï¼ˆåŸå­å¼•ç”¨è®¡æ•°ï¼‰ä¸­ï¼Œä¼ é€’ç»™Axumçš„è·¯ç”±çŠ¶æ€ã€‚è¿™ä½¿å¾—å¤šçº¿ç¨‹å¼‚æ­¥ä»»åŠ¡å¯ä»¥å®‰å…¨åœ°å…±äº«åŒä¸€ä¸ªæœåŠ¡å®ä¾‹ã€‚</li>
<li><strong>CORSé…ç½®</strong>: è®¾ç½®è·¨åŸŸèµ„æºå…±äº«ç­–ç•¥ï¼Œå…è®¸å‰ç«¯è·¨åŸŸè°ƒç”¨ï¼ˆè™½ç„¶æœ¬é¡¹ç›®æ˜¯åŒæºéƒ¨ç½²ï¼Œä½†ä¿ç•™CORSé…ç½®å¢åŠ äº†çµæ´»æ€§ï¼‰ã€‚</li>
<li><strong>è·¯ç”±æ³¨å†Œ</strong>: å°†<code>/api/chat</code>ç­‰è·¯å¾„æ˜ å°„åˆ°å¯¹åº”çš„Handlerï¼Œå¹¶ä½¿ç”¨<code>NestService</code>æŒ‚è½½<code>static</code>ç›®å½•ï¼Œæä¾›é™æ€æ–‡ä»¶æœåŠ¡ã€‚</li>
<li><strong>æœåŠ¡å¯åŠ¨</strong>: ç»‘å®šTCPç«¯å£å¹¶å¯åŠ¨AxumæœåŠ¡ã€‚</li>
</ol>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// src/main.rs</span>

<span class="hljs-comment">// ä¸»ç¨‹åºå…¥å£</span>

  

<span class="hljs-keyword">mod</span> api;

<span class="hljs-keyword">mod</span> config;

<span class="hljs-keyword">mod</span> models;

<span class="hljs-keyword">mod</span> services;

  

<span class="hljs-keyword">use</span> crate::api::chat::{chat_handler, chat_stream_handler, AppState};

<span class="hljs-keyword">use</span> crate::api::health::health_handler;

<span class="hljs-keyword">use</span> crate::config::Config;

<span class="hljs-keyword">use</span> crate::services::deepseek::DeepSeekService;

<span class="hljs-keyword">use</span> axum::{

    routing::{get, post},

    Router,

};

<span class="hljs-keyword">use</span> std::sync::Arc;

<span class="hljs-keyword">use</span> tower_http::cors::{Any, CorsLayer};

<span class="hljs-keyword">use</span> tower_http::services::ServeDir;

<span class="hljs-keyword">use</span> tower_http::trace::TraceLayer;

  

<span class="hljs-meta">#[tokio::main]</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {

    <span class="hljs-comment">// åˆå§‹åŒ–æ—¥å¿—</span>

    tracing_subscriber::<span class="hljs-title function_ invoke__">fmt</span>()

        .<span class="hljs-title function_ invoke__">with_target</span>(<span class="hljs-literal">false</span>)

        .<span class="hljs-title function_ invoke__">compact</span>()

        .<span class="hljs-title function_ invoke__">init</span>();

  

    <span class="hljs-comment">// åŠ è½½é…ç½®</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">config</span> = <span class="hljs-keyword">match</span> Config::<span class="hljs-title function_ invoke__">from_env</span>() {

        <span class="hljs-title function_ invoke__">Ok</span>(cfg) =&gt; cfg,

        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; {

            eprintln!(<span class="hljs-string">"âŒ é…ç½®åŠ è½½å¤±è´¥: {}"</span>, e);

            eprintln!(<span class="hljs-string">"è¯·ç¡®ä¿ .env æ–‡ä»¶å­˜åœ¨å¹¶åŒ…å«å¿…è¦çš„é…ç½®é¡¹"</span>);

            std::process::<span class="hljs-title function_ invoke__">exit</span>(<span class="hljs-number">1</span>);

        }

    };

  

    tracing::info!(<span class="hljs-string">"âœ… é…ç½®åŠ è½½æˆåŠŸ"</span>);

  

    <span class="hljs-comment">// åˆ›å»º DeepSeek æœåŠ¡</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">deepseek_service</span> = DeepSeekService::<span class="hljs-title function_ invoke__">new</span>(config.<span class="hljs-title function_ invoke__">clone</span>());

  

    <span class="hljs-comment">// åˆ›å»ºåº”ç”¨çŠ¶æ€</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">app_state</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(AppState { deepseek_service });

  

    <span class="hljs-comment">// é…ç½® CORS</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">cors</span> = CorsLayer::<span class="hljs-title function_ invoke__">new</span>()

        .<span class="hljs-title function_ invoke__">allow_origin</span>(Any)

        .<span class="hljs-title function_ invoke__">allow_methods</span>(Any)

        .<span class="hljs-title function_ invoke__">allow_headers</span>(Any);

  

    <span class="hljs-comment">// æ„å»ºè·¯ç”±</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">app</span> = Router::<span class="hljs-title function_ invoke__">new</span>()

        <span class="hljs-comment">// API è·¯ç”±</span>

        .<span class="hljs-title function_ invoke__">route</span>(<span class="hljs-string">"/api/health"</span>, <span class="hljs-title function_ invoke__">get</span>(health_handler))

        .<span class="hljs-title function_ invoke__">route</span>(<span class="hljs-string">"/api/chat"</span>, <span class="hljs-title function_ invoke__">post</span>(chat_handler))

        .<span class="hljs-title function_ invoke__">route</span>(<span class="hljs-string">"/api/chat/stream"</span>, <span class="hljs-title function_ invoke__">post</span>(chat_stream_handler))

        <span class="hljs-comment">// é™æ€æ–‡ä»¶æœåŠ¡</span>

        .<span class="hljs-title function_ invoke__">nest_service</span>(<span class="hljs-string">"/"</span>, ServeDir::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">"static"</span>))

        <span class="hljs-comment">// æ·»åŠ çŠ¶æ€</span>

        .<span class="hljs-title function_ invoke__">with_state</span>(app_state)

        <span class="hljs-comment">// æ·»åŠ ä¸­é—´ä»¶</span>

        .<span class="hljs-title function_ invoke__">layer</span>(cors)

        .<span class="hljs-title function_ invoke__">layer</span>(TraceLayer::<span class="hljs-title function_ invoke__">new_for_http</span>());

  

    <span class="hljs-comment">// å¯åŠ¨æœåŠ¡å™¨</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">addr</span> = config.<span class="hljs-title function_ invoke__">server_address</span>();

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">listener</span> = tokio::net::TcpListener::<span class="hljs-title function_ invoke__">bind</span>(&amp;addr)

        .<span class="hljs-keyword">await</span>

        .<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"æ— æ³•ç»‘å®šåœ°å€"</span>);

  

    tracing::info!(<span class="hljs-string">"ğŸš€ æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼"</span>);

    tracing::info!(<span class="hljs-string">"ğŸ“¡ ç›‘å¬åœ°å€: http://{}"</span>, addr);

    tracing::info!(<span class="hljs-string">"ğŸ’¡ è®¿é—® http://{} å¼€å§‹ä½¿ç”¨"</span>, addr);

  

    axum::<span class="hljs-title function_ invoke__">serve</span>(listener, app)

        .<span class="hljs-keyword">await</span>

        .<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"æœåŠ¡å™¨è¿è¡Œå¤±è´¥"</span>);

}
</code></pre>
<h2 data-id="heading-16">ç¬¬äº”é˜¶æ®µï¼šå‰ç«¯äº¤äº’ç•Œé¢å¼€å‘</h2>
<p>å‰ç«¯éƒ¨åˆ†æ—¨åœ¨æä¾›ä¸€ä¸ªç®€æ´ã€ç°ä»£ä¸”å“åº”è¿…é€Ÿçš„èŠå¤©ç•Œé¢ï¼Œæ ¸å¿ƒåœ¨äºå¤„ç†æµå¼æ•°æ®å’ŒMarkdownæ¸²æŸ“ã€‚</p>
<h3 data-id="heading-17">5.1 é¡µé¢ç»“æ„ (index.html)</h3>
<p>HTMLä½¿ç”¨äº†Tailwind CSS CDNç‰ˆæœ¬è¿›è¡Œå¿«é€Ÿæ ·å¼å¼€å‘ã€‚é¡µé¢å¸ƒå±€é‡‡ç”¨Flexboxï¼Œåˆ†ä¸ºå¤´éƒ¨ã€æ¶ˆæ¯å±•ç¤ºåŒºå’Œåº•éƒ¨è¾“å…¥åŒºã€‚</p>
<ul>
<li><strong>æ¶ˆæ¯å®¹å™¨</strong>: <code>messagesContainer</code>ç”¨äºåŠ¨æ€è¿½åŠ å¯¹è¯å†…å®¹ã€‚</li>
<li><strong>æ¨¡å¼é€‰æ‹©</strong>: ä¸‹æ‹‰èœå•å…è®¸ç”¨æˆ·é€‰æ‹©ä¸åŒçš„å¯¹è¯æ¨¡å¼ï¼Œè¿™å°†å½±å“åç«¯ä½¿ç”¨çš„System Promptã€‚</li>
<li><strong>å¤–éƒ¨åº“å¼•å…¥</strong>: å¼•å…¥äº†<code>marked.js</code>ç”¨äºMarkdownè§£æï¼Œ<code>highlight.js</code>ç”¨äºä»£ç å—è¯­æ³•é«˜äº®ã€‚</li>
</ul>
<h3 data-id="heading-18">5.2 æ ·å¼å®šåˆ¶ (style.css)</h3>
<p>é™¤äº†Tailwindçš„å®ç”¨ç±»ï¼Œ<code>style.css</code>å®šä¹‰äº†æ·±è‰²æ¨¡å¼ä¸‹çš„ç»†èŠ‚æ ·å¼ï¼Œå¦‚è‡ªå®šä¹‰æ»šåŠ¨æ¡ã€æ¶ˆæ¯æ·¡å…¥åŠ¨ç”»ä»¥åŠMarkdownæ¸²æŸ“åçš„æ’ç‰ˆæ ·å¼ï¼ˆå¦‚ä»£ç å—èƒŒæ™¯ã€åˆ—è¡¨ç¼©è¿›ç­‰ï¼‰ã€‚è¿™ä¿è¯äº†AIç”Ÿæˆçš„å¤æ‚å†…å®¹ï¼ˆå¦‚ä»£ç ã€è¡¨æ ¼ï¼‰åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºå¾—ä½“ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* static/css/style.css */</span>

<span class="hljs-comment">/* è‡ªå®šä¹‰æ ·å¼ */</span>

  

<span class="hljs-comment">/* å…¨å±€æ ·å¼ */</span>

* {

    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;

    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;

    <span class="hljs-attribute">box-sizing</span>: border-box;

}

  

<span class="hljs-selector-tag">body</span> {

    <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, <span class="hljs-string">'Roboto'</span>, <span class="hljs-string">'Oxygen'</span>,

        <span class="hljs-string">'Ubuntu'</span>, <span class="hljs-string">'Cantarell'</span>, <span class="hljs-string">'Fira Sans'</span>, <span class="hljs-string">'Droid Sans'</span>, <span class="hljs-string">'Helvetica Neue'</span>,

        sans-serif;

    -webkit-<span class="hljs-attribute">font-smoothing</span>: antialiased;

    -moz-osx-<span class="hljs-attribute">font-smoothing</span>: grayscale;

}

  

<span class="hljs-comment">/* æ»šåŠ¨æ¡æ ·å¼ */</span>

::-webkit-scrollbar {

    <span class="hljs-attribute">width</span>: <span class="hljs-number">8px</span>;

}

  

::-webkit-scrollbar-track {

    <span class="hljs-attribute">background</span>: <span class="hljs-number">#1f2937</span>;

}

  

::-webkit-scrollbar-thumb {

    <span class="hljs-attribute">background</span>: <span class="hljs-number">#4b5563</span>;

    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;

}

  

::-webkit-scrollbar-thumb:hover {

    <span class="hljs-attribute">background</span>: <span class="hljs-number">#6b7280</span>;

}

  

<span class="hljs-comment">/* æ¶ˆæ¯å®¹å™¨ */</span>

<span class="hljs-selector-id">#messagesContainer</span> {

    scroll-behavior: smooth;

}

  

<span class="hljs-comment">/* æ¶ˆæ¯æ ·å¼ */</span>

<span class="hljs-selector-class">.message</span> {

    <span class="hljs-attribute">animation</span>: fadeIn <span class="hljs-number">0.3s</span> ease-in;

}

  

<span class="hljs-keyword">@keyframes</span> fadeIn {

    <span class="hljs-selector-tag">from</span> {

        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;

        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">10px</span>);

    }

    <span class="hljs-selector-tag">to</span> {

        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;

        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0</span>);

    }

}

  

<span class="hljs-comment">/* Markdown å†…å®¹æ ·å¼ */</span>

<span class="hljs-selector-class">.message-content</span> {

    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">h1</span>,

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">h2</span>,

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">h3</span> {

    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1em</span>;

    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.5em</span>;

    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">h1</span> {

    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5em</span>;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">h2</span> {

    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.3em</span>;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">h3</span> {

    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.1em</span>;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">p</span> {

    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.8em</span>;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">ul</span>,

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">ol</span> {

    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">1.5em</span>;

    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.8em</span>;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">li</span> {

    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.3em</span>;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">code</span> {

    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#374151</span>;

    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.2em</span> <span class="hljs-number">0.4em</span>;

    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;

    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9em</span>;

    <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Courier New'</span>, Courier, monospace;

}

  

<span class="hljs-selector-class">.message-content</span> pre {

    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#1f2937</span>;

    <span class="hljs-attribute">padding</span>: <span class="hljs-number">1em</span>;

    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;

    <span class="hljs-attribute">overflow-x</span>: auto;

    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1em</span>;

}

  

<span class="hljs-selector-class">.message-content</span> pre <span class="hljs-selector-tag">code</span> {

    <span class="hljs-attribute">background-color</span>: transparent;

    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;

    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9em</span>;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">blockquote</span> {

    <span class="hljs-attribute">border-left</span>: <span class="hljs-number">4px</span> solid <span class="hljs-number">#3b82f6</span>;

    <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">1em</span>;

    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">0</span>;

    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1em</span>;

    <span class="hljs-attribute">color</span>: <span class="hljs-number">#9ca3af</span>;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">a</span> {

    <span class="hljs-attribute">color</span>: <span class="hljs-number">#3b82f6</span>;

    <span class="hljs-attribute">text-decoration</span>: underline;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> {

    <span class="hljs-attribute">color</span>: <span class="hljs-number">#60a5fa</span>;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">table</span> {

    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;

    <span class="hljs-attribute">border-collapse</span>: collapse;

    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1em</span>;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">th</span>,

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">td</span> {

    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#4b5563</span>;

    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.5em</span>;

    <span class="hljs-attribute">text-align</span>: left;

}

  

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">th</span> {

    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#374151</span>;

    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;

}

  

<span class="hljs-comment">/* è¾“å…¥æ¡†æ ·å¼ */</span>

<span class="hljs-selector-tag">textarea</span> {

    <span class="hljs-attribute">font-family</span>: inherit;

}

  

<span class="hljs-selector-tag">textarea</span><span class="hljs-selector-pseudo">:focus</span> {

    <span class="hljs-attribute">outline</span>: none;

}

  

<span class="hljs-comment">/* æŒ‰é’®åŠ¨ç”» */</span>

<span class="hljs-selector-tag">button</span> {

    <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease;

}

  

<span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:active</span> {

    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.98</span>);

}

  

<span class="hljs-comment">/* åŠ è½½åŠ¨ç”» */</span>

<span class="hljs-selector-class">.loading</span> {

    <span class="hljs-attribute">display</span>: inline-block;

    <span class="hljs-attribute">width</span>: <span class="hljs-number">12px</span>;

    <span class="hljs-attribute">height</span>: <span class="hljs-number">12px</span>;

    <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#3b82f6</span>;

    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;

    <span class="hljs-attribute">border-top-color</span>: transparent;

    <span class="hljs-attribute">animation</span>: spin <span class="hljs-number">0.8s</span> linear infinite;

}

  

<span class="hljs-keyword">@keyframes</span> spin {

    <span class="hljs-selector-tag">to</span> {

        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">360deg</span>);

    }

}

  

<span class="hljs-comment">/* å“åº”å¼è®¾è®¡ */</span>

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {

    <span class="hljs-selector-class">.container</span> {

        <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;

    }

  

    <span class="hljs-selector-tag">header</span> <span class="hljs-selector-tag">h1</span> {

        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;

    }

  

    <span class="hljs-selector-class">.flex-col</span> {

        <span class="hljs-attribute">gap</span>: <span class="hljs-number">0.5rem</span>;

    }

}
</code></pre>
<h3 data-id="heading-19">5.3 å‰ç«¯é€»è¾‘å®ç° (app.js)</h3>
<p><code>app.js</code>æ‰¿è½½äº†å‰ç«¯çš„æ ¸å¿ƒäº¤äº’é€»è¾‘ã€‚</p>
<ul>
<li><strong>æµå¼è¯·æ±‚å¤„ç†</strong>: <code>sendStreamRequest</code>å‡½æ•°ä½¿ç”¨Fetch APIå‘èµ·POSTè¯·æ±‚ã€‚å…³é”®åœ¨äºè·å–<code>response.body.getReader()</code>ã€‚é€šè¿‡<code>while</code>å¾ªç¯ä¸æ–­è¯»å–<code>reader.read()</code>è¿”å›çš„äºŒè¿›åˆ¶åˆ†ç‰‡ï¼ˆChunkï¼‰ã€‚</li>
<li><strong>å¢é‡è§£ç ä¸æ¸²æŸ“</strong>: ä½¿ç”¨<code>TextDecoder</code>å°†äºŒè¿›åˆ¶æ•°æ®è½¬ä¸ºæ–‡æœ¬ã€‚ç”±äºç½‘ç»œåˆ†ç‰‡å¯èƒ½æˆªæ–­JSONå­—ç¬¦ï¼Œé€»è¾‘ä¸­åŒ…å«äº†ç®€å•çš„ç¼“å†²å¤„ç†ã€‚è§£æå‡ºçš„Markdownæ–‡æœ¬è¢«å®æ—¶è¿½åŠ åˆ°å˜é‡ä¸­ï¼Œå¹¶åå¤è°ƒç”¨<code>marked.parse()</code>åˆ·æ–°DOMã€‚è™½ç„¶å…¨é‡é‡ç»˜åœ¨é•¿æ–‡æœ¬ä¸‹å¯èƒ½æœ‰æ€§èƒ½æŸè€—ï¼Œä½†åœ¨å½“å‰è§„æ¨¡ä¸‹èƒ½ä¿è¯æ¸²æŸ“çš„å®æ—¶æ€§å’Œæ­£ç¡®æ€§ï¼ˆé¿å…Markdownæ ‡è®°æœªé—­åˆå¯¼è‡´çš„æ¸²æŸ“é”™è¯¯ï¼‰ã€‚</li>
<li><strong>ä»£ç é«˜äº®</strong>: æ¯æ¬¡æ¸²æŸ“åï¼Œè°ƒç”¨<code>hljs.highlightElement</code>å¯¹æ–°ç”Ÿæˆçš„ä»£ç å—è¿›è¡Œè¯­æ³•ç€è‰²ã€‚</li>
<li><strong>äº¤äº’ç»†èŠ‚</strong>: æ”¯æŒCtrl+Enterå‘é€ã€è‡ªåŠ¨è°ƒæ•´è¾“å…¥æ¡†é«˜åº¦ã€æ»šåŠ¨åˆ°åº•éƒ¨ç­‰äººæ€§åŒ–åŠŸèƒ½ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// static/js/app.js</span>

<span class="hljs-comment">// å‰ç«¯åº”ç”¨é€»è¾‘</span>

  

<span class="hljs-comment">// å…¨å±€å˜é‡</span>

<span class="hljs-keyword">let</span> conversationHistory = [];

<span class="hljs-keyword">let</span> isProcessing = <span class="hljs-literal">false</span>;

  

<span class="hljs-comment">// DOM å…ƒç´ </span>

<span class="hljs-keyword">const</span> messagesContainer = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'messagesContainer'</span>);

<span class="hljs-keyword">const</span> messageInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'messageInput'</span>);

<span class="hljs-keyword">const</span> sendBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sendBtn'</span>);

<span class="hljs-keyword">const</span> clearBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'clearBtn'</span>);

<span class="hljs-keyword">const</span> modeSelect = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'modeSelect'</span>);

<span class="hljs-keyword">const</span> statusText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'statusText'</span>);

  

<span class="hljs-comment">// åˆå§‹åŒ–</span>

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function">() =&gt;</span> {

    <span class="hljs-comment">// é…ç½® marked.js</span>

    marked.<span class="hljs-title function_">setOptions</span>({

        <span class="hljs-attr">highlight</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">code, lang</span>) {

            <span class="hljs-keyword">if</span> (lang &amp;&amp; hljs.<span class="hljs-title function_">getLanguage</span>(lang)) {

                <span class="hljs-keyword">return</span> hljs.<span class="hljs-title function_">highlight</span>(code, { <span class="hljs-attr">language</span>: lang }).<span class="hljs-property">value</span>;

            }

            <span class="hljs-keyword">return</span> hljs.<span class="hljs-title function_">highlightAuto</span>(code).<span class="hljs-property">value</span>;

        },

        <span class="hljs-attr">breaks</span>: <span class="hljs-literal">true</span>,

        <span class="hljs-attr">gfm</span>: <span class="hljs-literal">true</span>

    });

  

    <span class="hljs-comment">// äº‹ä»¶ç›‘å¬</span>

    sendBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, sendMessage);

    clearBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, clearConversation);

  

    <span class="hljs-comment">// æ”¯æŒ Ctrl+Enter å‘é€</span>

    messageInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {

        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">ctrlKey</span> &amp;&amp; e.<span class="hljs-property">key</span> === <span class="hljs-string">'Enter'</span>) {

            <span class="hljs-title function_">sendMessage</span>();

        }

    });

  

    <span class="hljs-comment">// è‡ªåŠ¨è°ƒæ•´è¾“å…¥æ¡†é«˜åº¦</span>

    messageInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, <span class="hljs-function">() =&gt;</span> {

        messageInput.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">'auto'</span>;

        messageInput.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = messageInput.<span class="hljs-property">scrollHeight</span> + <span class="hljs-string">'px'</span>;

    });

});

  

<span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params"/>) {

    <span class="hljs-keyword">const</span> message = messageInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();

  

    <span class="hljs-keyword">if</span> (!message || isProcessing) {

        <span class="hljs-keyword">return</span>;

    }

  

    <span class="hljs-comment">// ç¦ç”¨è¾“å…¥</span>

    isProcessing = <span class="hljs-literal">true</span>;

    sendBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;

    messageInput.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;

    <span class="hljs-title function_">updateStatus</span>(<span class="hljs-string">'å‘é€ä¸­...'</span>);

  

    <span class="hljs-comment">// æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯</span>

    <span class="hljs-title function_">addMessage</span>(<span class="hljs-string">'user'</span>, message);

  

    <span class="hljs-comment">// æ¸…ç©ºè¾“å…¥æ¡†</span>

    messageInput.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;

    messageInput.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">'auto'</span>;

  

    <span class="hljs-comment">// è·å–å½“å‰æ¨¡å¼</span>

    <span class="hljs-keyword">const</span> mode = modeSelect.<span class="hljs-property">value</span>;

  

    <span class="hljs-keyword">try</span> {

        <span class="hljs-comment">// è°ƒç”¨æµå¼ API</span>

        <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendStreamRequest</span>(message, mode);

    } <span class="hljs-keyword">catch</span> (error) {

        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å‘é€å¤±è´¥:'</span>, error);

        <span class="hljs-title function_">addMessage</span>(<span class="hljs-string">'assistant'</span>, <span class="hljs-string">`âŒ é”™è¯¯: <span class="hljs-subst">${error.message}</span>`</span>);

        <span class="hljs-title function_">updateStatus</span>(<span class="hljs-string">'å‘é€å¤±è´¥'</span>);

    } <span class="hljs-keyword">finally</span> {

        <span class="hljs-comment">// æ¢å¤è¾“å…¥</span>

        isProcessing = <span class="hljs-literal">false</span>;

        sendBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;

        messageInput.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;

        messageInput.<span class="hljs-title function_">focus</span>();

        <span class="hljs-title function_">updateStatus</span>(<span class="hljs-string">'å°±ç»ª'</span>);

    }

}

  

<span class="hljs-comment">// å‘é€æµå¼è¯·æ±‚</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendStreamRequest</span>(<span class="hljs-params">message, mode</span>) {

    <span class="hljs-title function_">updateStatus</span>(<span class="hljs-string">'AI æ€è€ƒä¸­...'</span>);

  

    <span class="hljs-comment">// åˆ›å»º AI æ¶ˆæ¯å®¹å™¨</span>

    <span class="hljs-keyword">const</span> messageDiv = <span class="hljs-title function_">createMessageElement</span>(<span class="hljs-string">'assistant'</span>);

    <span class="hljs-keyword">const</span> contentDiv = messageDiv.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.message-content'</span>);

  

    <span class="hljs-keyword">let</span> fullResponse = <span class="hljs-string">''</span>;

  

    <span class="hljs-keyword">try</span> {

        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/chat/stream'</span>, {

            <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,

            <span class="hljs-attr">headers</span>: {

                <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,

            },

            <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({

                <span class="hljs-attr">message</span>: message,

                <span class="hljs-attr">mode</span>: mode,

                <span class="hljs-attr">history</span>: conversationHistory

            })

        });

  

        <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {

            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>: <span class="hljs-subst">${response.statusText}</span>`</span>);

        }

  

        <span class="hljs-comment">// è¯»å–æµå¼å“åº”</span>

        <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();

        <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();

  

        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {

            <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();

  

            <span class="hljs-keyword">if</span> (done) {

                <span class="hljs-keyword">break</span>;

            }

  

            <span class="hljs-comment">// è§£ç æ•°æ®</span>

            <span class="hljs-keyword">const</span> chunk = decoder.<span class="hljs-title function_">decode</span>(value, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> });

            <span class="hljs-keyword">const</span> lines = chunk.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>);

  

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> lines) {

                <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'data: '</span>)) {

                    <span class="hljs-keyword">const</span> data = line.<span class="hljs-title function_">slice</span>(<span class="hljs-number">6</span>);

  

                    <span class="hljs-keyword">if</span> (data === <span class="hljs-string">'[DONE]'</span>) {

                        <span class="hljs-keyword">continue</span>;

                    }

  

                    <span class="hljs-comment">// ç´¯ç§¯å“åº”å†…å®¹</span>

                    fullResponse += data;

  

                    <span class="hljs-comment">// å®æ—¶æ¸²æŸ“ Markdown</span>

                    contentDiv.<span class="hljs-property">innerHTML</span> = marked.<span class="hljs-title function_">parse</span>(fullResponse);

  

                    <span class="hljs-comment">// é«˜äº®ä»£ç å—</span>

                    contentDiv.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'pre code'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">block</span>) =&gt;</span> {

                        hljs.<span class="hljs-title function_">highlightElement</span>(block);

                    });

  

                    <span class="hljs-comment">// æ»šåŠ¨åˆ°åº•éƒ¨</span>

                    <span class="hljs-title function_">scrollToBottom</span>();

                }

            }

        }

  

        <span class="hljs-comment">// ä¿å­˜åˆ°å¯¹è¯å†å²</span>

        conversationHistory.<span class="hljs-title function_">push</span>(

            { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: message },

            { <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>, <span class="hljs-attr">content</span>: fullResponse }

        );

  

        <span class="hljs-title function_">updateStatus</span>(<span class="hljs-string">'å®Œæˆ'</span>);

  

    } <span class="hljs-keyword">catch</span> (error) {

        contentDiv.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`&lt;p class="text-red-400"&gt;âŒ é”™è¯¯: <span class="hljs-subst">${error.message}</span>&lt;/p&gt;`</span>;

        <span class="hljs-keyword">throw</span> error;

    }

}

  

<span class="hljs-comment">// æ·»åŠ æ¶ˆæ¯åˆ°ç•Œé¢</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">addMessage</span>(<span class="hljs-params">role, content</span>) {

    <span class="hljs-keyword">const</span> messageDiv = <span class="hljs-title function_">createMessageElement</span>(role);

    <span class="hljs-keyword">const</span> contentDiv = messageDiv.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.message-content'</span>);

  

    <span class="hljs-keyword">if</span> (role === <span class="hljs-string">'assistant'</span>) {

        <span class="hljs-comment">// AI æ¶ˆæ¯ä½¿ç”¨ Markdown æ¸²æŸ“</span>

        contentDiv.<span class="hljs-property">innerHTML</span> = marked.<span class="hljs-title function_">parse</span>(content);

  

        <span class="hljs-comment">// é«˜äº®ä»£ç å—</span>

        contentDiv.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'pre code'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">block</span>) =&gt;</span> {

            hljs.<span class="hljs-title function_">highlightElement</span>(block);

        });

    } <span class="hljs-keyword">else</span> {

        <span class="hljs-comment">// ç”¨æˆ·æ¶ˆæ¯çº¯æ–‡æœ¬</span>

        contentDiv.<span class="hljs-property">textContent</span> = content;

    }

  

    <span class="hljs-title function_">scrollToBottom</span>();

}

  

<span class="hljs-comment">// åˆ›å»ºæ¶ˆæ¯å…ƒç´ </span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createMessageElement</span>(<span class="hljs-params">role</span>) {

    <span class="hljs-keyword">const</span> messageDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);

    messageDiv.<span class="hljs-property">className</span> = <span class="hljs-string">`message <span class="hljs-subst">${role}</span>-message`</span>;

  

    <span class="hljs-keyword">const</span> isUser = role === <span class="hljs-string">'user'</span>;

    <span class="hljs-keyword">const</span> avatar = isUser ? <span class="hljs-string">'ğŸ‘¤'</span> : <span class="hljs-string">'AI'</span>;

    <span class="hljs-keyword">const</span> bgColor = isUser ? <span class="hljs-string">'bg-green-600'</span> : <span class="hljs-string">'bg-blue-600'</span>;

    <span class="hljs-keyword">const</span> contentBg = isUser ? <span class="hljs-string">'bg-gray-700'</span> : <span class="hljs-string">'bg-gray-700'</span>;

  

    messageDiv.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`

        &lt;div class="flex items-start gap-3"&gt;

            &lt;div class="w-8 h-8 rounded-full <span class="hljs-subst">${bgColor}</span> flex items-center justify-center flex-shrink-0"&gt;

                &lt;span class="text-sm"&gt;<span class="hljs-subst">${avatar}</span>&lt;/span&gt;

            &lt;/div&gt;

            &lt;div class="flex-1"&gt;

                &lt;div class="<span class="hljs-subst">${contentBg}</span> rounded-lg p-4 message-content"&gt;&lt;/div&gt;

            &lt;/div&gt;

        &lt;/div&gt;

    `</span>;

  

    messagesContainer.<span class="hljs-title function_">appendChild</span>(messageDiv);

    <span class="hljs-keyword">return</span> messageDiv;

}

  

<span class="hljs-comment">// æ¸…ç©ºå¯¹è¯</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">clearConversation</span>(<span class="hljs-params"/>) {

    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">confirm</span>(<span class="hljs-string">'ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å¯¹è¯å—ï¼Ÿ'</span>)) {

        conversationHistory = [];

        messagesContainer.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`

            &lt;div class="message assistant-message"&gt;

                &lt;div class="flex items-start gap-3"&gt;

                    &lt;div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0"&gt;

                        &lt;span class="text-sm"&gt;AI&lt;/span&gt;

                    &lt;/div&gt;

                    &lt;div class="flex-1"&gt;

                        &lt;div class="bg-gray-700 rounded-lg p-4"&gt;

                            &lt;p&gt;å¯¹è¯å·²æ¸…ç©ºã€‚æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ&lt;/p&gt;

                        &lt;/div&gt;

                    &lt;/div&gt;

                &lt;/div&gt;

            &lt;/div&gt;

        `</span>;

        <span class="hljs-title function_">updateStatus</span>(<span class="hljs-string">'å·²æ¸…ç©º'</span>);

    }

}

  

<span class="hljs-comment">// æ»šåŠ¨åˆ°åº•éƒ¨</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">scrollToBottom</span>(<span class="hljs-params"/>) {

    messagesContainer.<span class="hljs-property">scrollTop</span> = messagesContainer.<span class="hljs-property">scrollHeight</span>;

}

  

<span class="hljs-comment">// æ›´æ–°çŠ¶æ€æ–‡æœ¬</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateStatus</span>(<span class="hljs-params">text</span>) {

    statusText.<span class="hljs-property">textContent</span> = text;

}
</code></pre>
<h2 data-id="heading-20">ç¬¬å…­é˜¶æ®µï¼šæœ€ç»ˆéƒ¨ç½²ä¸å…¨é“¾è·¯æµ‹è¯•</h2>
<p>å®Œæˆæ‰€æœ‰ä»£ç ç¼–å†™åï¼Œé¡¹ç›®ç»“æ„æ¸…æ™°ï¼Œåç«¯é€»è¾‘ä¸¥å¯†ï¼Œå‰ç«¯äº¤äº’å®Œå–„ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†æœ€ç»ˆçš„é¡¹ç›®æ–‡ä»¶ç›®å½•æ ‘ï¼Œæ¸…æ™°åœ°åæ˜ äº†MVCï¼ˆModel-View-Controllerï¼‰å¼çš„æ¶æ„æ€æƒ³ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b75011af0b4c4c3aa5657ef68c8dcf66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5oGQ6b6Z5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770487527&amp;x-signature=dVYsxYYP%2Fh9OqSggrT0T%2FMCWfAY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-21">6.1 å¯åŠ¨æœåŠ¡</h3>
<p>åœ¨ç»ˆç«¯æ ¹ç›®å½•ä¸‹è¿è¡Œ<code>cargo run</code>ã€‚Cargoä¼šè‡ªåŠ¨ç¼–è¯‘æ‰€æœ‰ä¾èµ–å¹¶å¯åŠ¨åº”ç”¨ã€‚é¦–æ¬¡ç¼–è¯‘å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼Œä¹‹åçš„å¢é‡ç¼–è¯‘å°†éå¸¸å¿«ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f28353a032c947bc85291b32b826d5f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5oGQ6b6Z5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770487527&amp;x-signature=WYe7dV7XHV9tp6xrEfMqLGVOEPw%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸Šå›¾æ˜¾ç¤ºæœåŠ¡å™¨å·²æˆåŠŸç›‘å¬åœ¨<code>0.0.0.0:3000</code>ç«¯å£ï¼Œä¸”é…ç½®åŠ è½½æ— è¯¯ã€‚
é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">.
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ api
â”‚   â”‚   â”œâ”€â”€ chat.rs
â”‚   â”‚   â”œâ”€â”€ health.rs
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ config.rs
â”‚   â”œâ”€â”€ main.rs
â”‚   â”œâ”€â”€ models
â”‚   â”‚   â”œâ”€â”€ chat.rs
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â””â”€â”€ services
â”‚       â”œâ”€â”€ deepseek.rs
â”‚       â””â”€â”€ mod.rs
â””â”€â”€ static
    â”œâ”€â”€ css
    â”‚   â””â”€â”€ style.css
    â””â”€â”€ js
        â””â”€â”€ app.js
</code></pre>
<h3 data-id="heading-22">6.2 æ¥å£éªŒè¯</h3>
<p>åœ¨æ‰“å¼€æµè§ˆå™¨ä¹‹å‰ï¼Œé€šè¿‡<code>curl</code>å‘½ä»¤æµ‹è¯•å¥åº·æ£€æŸ¥æ¥å£æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œè¿™èƒ½æ’é™¤ç½‘ç»œå±‚é¢çš„åŸºæœ¬é—®é¢˜ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:3000/api/health
</code></pre>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¥å£è¿”å›äº†JSONæ ¼å¼çš„<code>ok</code>çŠ¶æ€ï¼Œè¯æ˜APIæœåŠ¡å·²æ­£å¸¸å“åº”ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/feabd5522aa84232ba14cca2c32fa1ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5oGQ6b6Z5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770487527&amp;x-signature=M0BneKYtgE%2F%2B%2BfGs8feMaVS1Izs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-23">6.3 æµè§ˆå™¨ä½“éªŒä¸ç›‘æ§</h3>
<p>è®¿é—®æµè§ˆå™¨åœ°å€ï¼ˆå¦‚<code>http://localhost:3000</code>ï¼‰ï¼Œå³å¯çœ‹åˆ°æ·±è‰²ä¸»é¢˜çš„èŠå¤©ç•Œé¢ã€‚è¾“å…¥é—®é¢˜åï¼Œå¯ä»¥çœ‹åˆ°AIçš„å›ç­”ä»¥æ‰“å­—æœºçš„å½¢å¼æµç•…æ¶Œç°ï¼Œä»£ç å—è¢«æ­£ç¡®é«˜äº®ï¼ŒMarkdownæ ¼å¼æ¸²æŸ“å®Œç¾ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œåœ¨è“è€˜çš„æ§åˆ¶å°èƒ½å¤Ÿå®æ—¶æŸ¥çœ‹åˆ°Tokençš„æ¶ˆè€—æƒ…å†µå’ŒAPIè°ƒç”¨è®°å½•ã€‚è¿™ä¸ºå¼€å‘è€…æä¾›äº†é€æ˜çš„ç”¨é‡ç›‘æ§å’Œæˆæœ¬ç®¡ç†èƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b8b2d9b39bc4792b19c6aaf620e0d2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5oGQ6b6Z5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770487527&amp;x-signature=7fuxeQcBB%2Be6Zeq6P%2BM9sQoW9TY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-24">æ€»ç»“</h2>
<p>æœ¬æ–‡è¯¦ç»†å±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨Rustçš„é«˜æ€§èƒ½ç‰¹æ€§ä¸è“è€˜DeepSeekçš„å¼ºå¤§æ¨¡å‹èƒ½åŠ›ï¼Œæ„å»ºä¸€ä¸ªç«¯åˆ°ç«¯çš„ç”Ÿæˆå¼AIåº”ç”¨ã€‚ä»Linuxåº•å±‚åº“çš„å®‰è£…åˆ°Rustå¼‚æ­¥æµå¤„ç†ï¼Œå†åˆ°å‰ç«¯çš„SSEæµå¼æ¸²æŸ“ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½ä½“ç°äº†ç°ä»£Webå¼€å‘çš„æœ€ä½³å®è·µã€‚Rustçš„å®‰å…¨æ€§ä¿è¯äº†åç«¯æœåŠ¡çš„ç¨³å¥ï¼ŒAxumæ¡†æ¶æä¾›äº†æé«˜çš„å¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œè€Œè“è€˜MaaSæœåŠ¡åˆ™ä¸ºåº”ç”¨æ³¨å…¥äº†æ™ºèƒ½çš„æ ¸å¿ƒã€‚è¿™ç§å…¨æ ˆæ¶æ„ä¸ä»…é€‚ç”¨äºä¸ªäººåŠ©æ‰‹é¡¹ç›®ï¼Œæ›´ä¸ºæ„å»ºä¼ä¸šçº§AIåº”ç”¨æä¾›äº†åšå®çš„æŠ€æœ¯å‚è€ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä»½ä¸å¯å¤šå¾—çš„ã€Š Redis ã€‹æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7601101531919794222</link>    <guid>https://juejin.cn/post/7601101531919794222</guid>    <pubDate>2026-02-01T00:35:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601101531919794222" data-draft-id="7601169987412148262" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä»½ä¸å¯å¤šå¾—çš„ã€Š Redis ã€‹æ•™ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-01T00:35:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒå¯»girling"/> <meta itemprop="url" content="https://juejin.cn/user/2276467567770442"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä»½ä¸å¯å¤šå¾—çš„ã€Š Redis ã€‹æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2276467567770442/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒå¯»girling
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T00:35:40.000Z" title="Sun Feb 01 2026 00:35:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Redis ä»å…¥é—¨åˆ°å®æˆ˜ï¼šè¶…è¯¦ç»†é›¶åŸºç¡€æ•™ç¨‹</h2>
<p>Redisï¼ˆRemote Dictionary Serverï¼‰æ˜¯ä¸€æ¬¾å¼€æºçš„ã€é«˜æ€§èƒ½çš„é”®å€¼å¯¹ï¼ˆKey-Valueï¼‰å†…å­˜æ•°æ®åº“ï¼ŒåŒæ—¶æ”¯æŒæŒä¹…åŒ–ã€åˆ†å¸ƒå¼ã€å¤šç§æ•°æ®ç»“æ„ï¼Œè¢«å¹¿æ³›åº”ç”¨äºç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ä¼šè¯å­˜å‚¨ã€é™æµå‰Šå³°ç­‰åœºæ™¯ã€‚æœ¬æ–‡ä»åŸºç¡€å®‰è£…ã€æ ¸å¿ƒæ¦‚å¿µã€æ•°æ®ç»“æ„ã€å¸¸ç”¨å‘½ä»¤åˆ°å®æˆ˜åœºæ™¯ï¼Œå…¨æ–¹ä½è®²è§£ Redis çš„ä½¿ç”¨ï¼Œé€‚åˆé›¶åŸºç¡€å…¥é—¨è€…ç³»ç»Ÿå­¦ä¹ ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Redis æ ¸å¿ƒç‰¹æ€§ä¸åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šåŸºäºå†…å­˜æ“ä½œï¼Œå•å®ä¾‹ QPSï¼ˆæ¯ç§’æŸ¥è¯¢æ•°ï¼‰å¯è¾¾ 10 ä¸‡ +ï¼Œè¿œè¶…ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ï¼›</li>
<li><strong>å¤šæ•°æ®ç»“æ„</strong>ï¼šæ”¯æŒå­—ç¬¦ä¸²ï¼ˆStringï¼‰ã€å“ˆå¸Œï¼ˆHashï¼‰ã€åˆ—è¡¨ï¼ˆListï¼‰ã€é›†åˆï¼ˆSetï¼‰ã€æœ‰åºé›†åˆï¼ˆZSetï¼‰ç­‰å¤šç§åŸç”Ÿæ•°æ®ç»“æ„ï¼›</li>
<li><strong>æŒä¹…åŒ–</strong>ï¼šæ”¯æŒ RDBï¼ˆå¿«ç…§ï¼‰å’Œ AOFï¼ˆæ—¥å¿—ï¼‰ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼Œé¿å…å†…å­˜æ•°æ®ä¸¢å¤±ï¼›</li>
<li><strong>åŸå­æ€§</strong>ï¼šæ‰€æœ‰å‘½ä»¤éƒ½æ˜¯åŸå­æ“ä½œï¼Œæ”¯æŒäº‹åŠ¡ï¼ˆå¼±äº‹åŠ¡ï¼‰å’Œ CASï¼ˆCompare And Swapï¼‰æ“ä½œï¼›</li>
<li><strong>é«˜å¯ç”¨</strong>ï¼šæ”¯æŒä¸»ä»å¤åˆ¶ã€å“¨å…µï¼ˆSentinelï¼‰ã€é›†ç¾¤ï¼ˆClusterï¼‰ï¼Œä¿è¯æœåŠ¡ä¸å®•æœºï¼›</li>
<li><strong>ä¸°å¯ŒåŠŸèƒ½</strong>ï¼šæ”¯æŒå‘å¸ƒè®¢é˜…ã€è¿‡æœŸæ—¶é—´ã€Lua è„šæœ¬ã€ä½å›¾ã€åœ°ç†ç©ºé—´ï¼ˆGEOï¼‰ç­‰æ‰©å±•åŠŸèƒ½ã€‚</li>
</ul>
<h3 data-id="heading-3">1.2 å…¸å‹åº”ç”¨åœºæ™¯</h3>








































<table><thead><tr><th>åœºæ™¯</th><th>è§£å†³çš„é—®é¢˜</th><th>Redis å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>ç¼“å­˜</td><td>å‡è½»æ•°æ®åº“å‹åŠ›ï¼Œæå‡æ¥å£å“åº”é€Ÿåº¦</td><td>String/Hash å­˜å‚¨çƒ­ç‚¹æ•°æ®ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´</td></tr><tr><td>åˆ†å¸ƒå¼é”</td><td>è§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­èµ„æºç«äº‰é—®é¢˜</td><td>Stringï¼ˆSET NX EXï¼‰/Redlock</td></tr><tr><td>é™æµå‰Šå³°</td><td>æ§åˆ¶æ¥å£è¯·æ±‚é¢‘ç‡ï¼Œé˜²æ­¢ç³»ç»Ÿè¢«æ‰“å®</td><td>ZSet / è®¡æ•°å™¨ï¼ˆINCRï¼‰+ è¿‡æœŸæ—¶é—´</td></tr><tr><td>ä¼šè¯å­˜å‚¨</td><td>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å…±äº«ç”¨æˆ·ä¼šè¯</td><td>Hash å­˜å‚¨ç”¨æˆ·ä¼šè¯ä¿¡æ¯</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>ç®€å•çš„å¼‚æ­¥é€šä¿¡åœºæ™¯</td><td>Listï¼ˆLPUSH + BRPOPï¼‰/ å‘å¸ƒè®¢é˜…</td></tr><tr><td>æ’è¡Œæ¦œ</td><td>å®æ—¶æ›´æ–°çš„ç‚¹èµæ¦œã€é”€é‡æ¦œ</td><td>ZSetï¼ˆæŒ‰åˆ†æ•°æ’åºï¼‰</td></tr></tbody></table>
<h2 data-id="heading-4">äºŒã€Redis ç¯å¢ƒå®‰è£…ä¸é…ç½®</h2>
<h3 data-id="heading-5">2.1 ç¯å¢ƒå‡†å¤‡</h3>
<ul>
<li>
<p>æ“ä½œç³»ç»Ÿï¼šLinuxï¼ˆæ¨è CentOS 7/8ã€Ubuntu 20.04ï¼‰ï¼ŒWindows ä»…å»ºè®®æµ‹è¯•ä½¿ç”¨ï¼›</p>
</li>
<li>
<p>ä¾èµ–ï¼šRedis ç¼–è¯‘éœ€è¦ GCC ç¯å¢ƒï¼Œå…ˆå®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># CentOS</span>
yum install -y gcc gcc-c++ make
<span class="hljs-meta"># Ubuntu</span>
apt-<span class="hljs-keyword">get</span> install -y gcc make
</code></pre>
</li>
</ul>
<h3 data-id="heading-6">2.2 æºç å®‰è£…ï¼ˆLinux æ¨èï¼‰</h3>
<p>æ­¥éª¤ 1ï¼šä¸‹è½½å¹¶è§£å‹ Redis</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆï¼ˆ7.2.4 ä¸ºå½“å‰ç¨³å®šç‰ˆï¼Œå¯æ›¿æ¢ä¸ºæœ€æ–°ç‰ˆæœ¬ï¼‰</span>
wget https://download.redis.io/releases/redis-7.2.4.tar.gz
<span class="hljs-comment"># è§£å‹</span>
tar -zxvf redis-7.2.4.tar.gz
<span class="hljs-comment"># è¿›å…¥è§£å‹ç›®å½•</span>
<span class="hljs-built_in">cd</span> redis-7.2.4
</code></pre>
<p>æ­¥éª¤ 2ï¼šç¼–è¯‘ä¸å®‰è£…</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç¼–è¯‘</span>
make
<span class="hljs-comment"># å®‰è£…ï¼ˆæŒ‡å®šå®‰è£…ç›®å½•ï¼Œæ¨è /usr/local/redisï¼‰</span>
make <span class="hljs-attr">PREFIX</span>=/usr/local/redis install
</code></pre>
<p>æ­¥éª¤ 3ï¼šé…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰</p>
<p>å°† Redis å‘½ä»¤åŠ å…¥ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œæ–¹ä¾¿å…¨å±€è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¾‘ç¯å¢ƒå˜é‡æ–‡ä»¶</span>
vim /etc/profile
<span class="hljs-comment"># æ·»åŠ ä»¥ä¸‹å†…å®¹</span>
<span class="hljs-built_in">export</span> REDIS_HOME=/usr/local/redis
<span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$REDIS_HOME</span>/bin
<span class="hljs-comment"># ç”Ÿæ•ˆé…ç½®</span>
<span class="hljs-built_in">source</span> /etc/profile
</code></pre>
<p>æ­¥éª¤ 4ï¼šåˆå§‹åŒ–é…ç½®æ–‡ä»¶</p>
<p>Redis é»˜è®¤é…ç½®æ–‡ä»¶åœ¨è§£å‹ç›®å½•çš„ <code>redis.conf</code>ï¼Œéœ€è¦å¤åˆ¶åˆ°å®‰è£…ç›®å½•å¹¶ä¿®æ”¹æ ¸å¿ƒé…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé…ç½®ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p /usr/local/redis/conf
<span class="hljs-comment"># å¤åˆ¶é…ç½®æ–‡ä»¶</span>
<span class="hljs-built_in">cp</span> redis.conf /usr/local/redis/conf/
<span class="hljs-comment"># ç¼–è¾‘é…ç½®æ–‡ä»¶</span>
vim /usr/local/redis/conf/redis.conf
</code></pre>
<h3 data-id="heading-7">2.3 æ ¸å¿ƒé…ç½®é¡¹ä¿®æ”¹ï¼ˆå¿…æ”¹ï¼‰</h3>
<p>æ‰“å¼€ <code>redis.conf</code> åï¼Œä¿®æ”¹ä»¥ä¸‹å…³é”®é…ç½®ï¼ˆå»æ‰æ³¨é‡Šå¹¶ä¿®æ”¹å€¼ï¼‰ï¼š</p>







































































<table><thead><tr><th>é…ç½®é¡¹</th><th>é»˜è®¤å€¼</th><th>ä¿®æ”¹åå€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>bind</td><td>127.0.0.1</td><td>0.0.0.0</td><td>å…è®¸æ‰€æœ‰ IP è®¿é—®ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®æŒ‡å®šå†…ç½‘ IPï¼‰</td></tr><tr><td>protected-mode</td><td>yes</td><td>no</td><td>å…³é—­ä¿æŠ¤æ¨¡å¼ï¼ˆå¦åˆ™ä»…æœ¬åœ°å¯è®¿é—®ï¼‰</td></tr><tr><td>port</td><td>6379</td><td>6379</td><td>ç«¯å£å·ï¼Œå¯è‡ªå®šä¹‰ï¼ˆå¦‚ 6380ï¼‰</td></tr><tr><td>daemonize</td><td>no</td><td>yes</td><td>ä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œï¼ˆåå°è¿è¡Œï¼‰</td></tr><tr><td>pidfile</td><td>/var/run/redis_6379.pid</td><td>/usr/local/redis/redis.pid</td><td>PID æ–‡ä»¶å­˜æ”¾è·¯å¾„</td></tr><tr><td>logfile</td><td>""</td><td>/usr/local/redis/log/redis.log</td><td>æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆéœ€å…ˆåˆ›å»º log ç›®å½•ï¼‰</td></tr><tr><td>dir</td><td>./</td><td>/usr/local/redis/data</td><td>æŒä¹…åŒ–æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼ˆéœ€å…ˆåˆ›å»º data ç›®å½•ï¼‰</td></tr><tr><td>requirepass</td><td>""</td><td>yourpassword</td><td>è®¾ç½®å¯†ç ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»è®¾ç½®ï¼‰</td></tr><tr><td>maxmemory</td><td>0</td><td>2gb</td><td>æœ€å¤§ä½¿ç”¨å†…å­˜ï¼ˆæ ¹æ®æœåŠ¡å™¨é…ç½®ï¼Œå¦‚ 2GBã€4GBï¼‰</td></tr><tr><td>maxmemory-policy</td><td>noeviction</td><td>volatile-lru</td><td>å†…å­˜æ»¡æ—¶çš„æ·˜æ±°ç­–ç•¥ï¼ˆä¼˜å…ˆæ·˜æ±°è¿‡æœŸçš„é”®ï¼‰</td></tr></tbody></table>
<p>åˆ›å»ºæ—¥å¿—å’Œæ•°æ®ç›®å½•ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">mkdir</span> -p /usr/<span class="hljs-keyword">local</span>/redis/<span class="hljs-keyword">log</span> /usr/<span class="hljs-keyword">local</span>/redis/data
</code></pre>
<h3 data-id="heading-8">2.4 å¯åŠ¨ä¸åœæ­¢ Redis</h3>
<p>å¯åŠ¨ Redis</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨</span>
redis-server /usr/local/redis/conf/redis.conf
</code></pre>
<p>éªŒè¯å¯åŠ¨</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># æŸ¥çœ‹è¿›ç¨‹</span>
ps -ef | grep redis
<span class="hljs-comment"># è¿æ¥å®¢æˆ·ç«¯</span>
redis-cli -h 127.0.0.1 -p 6379 -a yourpassword
<span class="hljs-comment"># æµ‹è¯•å‘½ä»¤</span>
<span class="hljs-section">127.0.0.1:6379&gt; PING</span>
PONG <span class="hljs-comment"># è¿”å› PONG è¯´æ˜å¯åŠ¨æˆåŠŸ</span>
</code></pre>
<p>åœæ­¢ Redis</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¼˜é›…åœæ­¢ï¼ˆæ¨èï¼‰</span>
redis-cli -a yourpassword SHUTDOWN
<span class="hljs-comment"># å¼ºåˆ¶åœæ­¢ï¼ˆä¸æ¨èï¼Œå¯èƒ½ä¸¢å¤±æ•°æ®ï¼‰</span>
<span class="hljs-built_in">kill</span> -9 [redisè¿›ç¨‹ID]
</code></pre>
<h3 data-id="heading-9">2.5 Windows å®‰è£…ï¼ˆä»…æµ‹è¯•ç”¨ï¼‰</h3>
<ol>
<li>ä¸‹è½½ Windows ç‰ˆ Redisï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoftarchive%2Fredis%2Freleases" target="_blank" title="https://github.com/microsoftarchive/redis/releases" ref="nofollow noopener noreferrer">github.com/microsoftarâ€¦</a></li>
<li>è§£å‹ååŒå‡» <code>redis-server.exe</code> å¯åŠ¨æœåŠ¡ï¼ŒåŒå‡» <code>redis-cli.exe</code> æ‰“å¼€å®¢æˆ·ç«¯ï¼›</li>
<li>é…ç½®æ–‡ä»¶ä¸º <code>redis.windows.conf</code>ï¼Œä¿®æ”¹æ–¹å¼ä¸ Linux ä¸€è‡´ï¼ˆæ— éœ€æ”¹ daemonizeï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-10">ä¸‰ã€Redis æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-11">3.1 æ•°æ®æ¨¡å‹ï¼šé”®å€¼å¯¹ï¼ˆKey-Valueï¼‰</h3>
<p>Redis ä»¥ "é”®ï¼ˆKeyï¼‰- å€¼ï¼ˆValueï¼‰" ä¸ºæ ¸å¿ƒå­˜å‚¨æ¨¡å‹ï¼š</p>
<ul>
<li><strong>Key</strong>ï¼šå¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä¸”å”¯ä¸€ï¼Œå»ºè®®éµå¾ªå‘½åè§„èŒƒï¼ˆå¦‚ <code>user:info:1001</code>ï¼‰ï¼›</li>
<li><strong>Value</strong>ï¼šæ”¯æŒå¤šç§æ•°æ®ç»“æ„ï¼ˆStringã€Hashã€Listã€Setã€ZSet ç­‰ï¼‰ï¼›</li>
<li>æ‰€æœ‰å‘½ä»¤éƒ½æ˜¯å›´ç»• "æ“ä½œ Key" æˆ– "æ“ä½œ Key å¯¹åº”çš„ Value" å±•å¼€ã€‚</li>
</ul>
<h3 data-id="heading-12">3.2 æ•°æ®ç±»å‹ä¸é€‚ç”¨åœºæ™¯</h3>
<p>Redis æ”¯æŒ 5 ç§æ ¸å¿ƒæ•°æ®ç±»å‹ï¼Œæ¯ç§ç±»å‹æœ‰ä¸“å±å‘½ä»¤ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†è¯´æ˜ï¼š</p>















































<table><thead><tr><th>æ•°æ®ç±»å‹</th><th>åº•å±‚å®ç°</th><th>æ ¸å¿ƒç‰¹æ€§</th><th>å…¸å‹å‘½ä»¤</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>String</td><td>ç®€å•åŠ¨æ€å­—ç¬¦ä¸²</td><td>äºŒè¿›åˆ¶å®‰å…¨ï¼Œå¯å­˜å­—ç¬¦ä¸² / æ•°å­— / äºŒè¿›åˆ¶</td><td>SETã€GETã€INCRã€EXPIRE</td><td>ç¼“å­˜ã€è®¡æ•°å™¨ã€ä¼šè¯å­˜å‚¨</td></tr><tr><td>Hash</td><td>å“ˆå¸Œè¡¨</td><td>é”®å€¼å¯¹é›†åˆï¼Œé€‚åˆå­˜å¯¹è±¡</td><td>HSETã€HGETã€HMGETã€HDEL</td><td>å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€å•†å“è¯¦æƒ…</td></tr><tr><td>List</td><td>åŒå‘é“¾è¡¨</td><td>æœ‰åºã€å¯é‡å¤ï¼Œæ”¯æŒå¤´å°¾æ“ä½œ</td><td>LPUSHã€RPOPã€LRANGE</td><td>æ¶ˆæ¯é˜Ÿåˆ—ã€æœ€æ–°åˆ—è¡¨</td></tr><tr><td>Set</td><td>å“ˆå¸Œè¡¨</td><td>æ— åºã€ä¸å¯é‡å¤ï¼Œæ”¯æŒäº¤é›† / å¹¶é›†</td><td>SADDã€SMEMBERSã€SINTER</td><td>æ ‡ç­¾ã€å¥½å‹å»é‡ã€æŠ½å¥–</td></tr><tr><td>ZSet</td><td>è·³è·ƒè¡¨ + å“ˆå¸Œè¡¨</td><td>æœ‰åºã€ä¸å¯é‡å¤ï¼ŒæŒ‰åˆ†æ•°æ’åº</td><td>ZADDã€ZRANGEã€ZCORE</td><td>æ’è¡Œæ¦œã€å»¶æ—¶ä»»åŠ¡</td></tr></tbody></table>
<h3 data-id="heading-13">3.3 è¿‡æœŸæ—¶é—´</h3>
<p>Redis æ”¯æŒä¸º Key è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œåˆ°æœŸåè‡ªåŠ¨åˆ é™¤ï¼Œæ ¸å¿ƒå‘½ä»¤ï¼š</p>
<ul>
<li><code>EXPIRE key seconds</code>ï¼šè®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ï¼›</li>
<li><code>PEXPIRE key milliseconds</code>ï¼šè®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼›</li>
<li><code>EXPIREAT key timestamp</code>ï¼šæŒ‡å®šæ—¶é—´æˆ³è¿‡æœŸï¼ˆç§’ï¼‰ï¼›</li>
<li><code>TTL key</code>ï¼šæŸ¥çœ‹å‰©ä½™è¿‡æœŸæ—¶é—´ï¼ˆ-1 æ°¸ä¸è¿‡æœŸï¼Œ-2 å·²è¿‡æœŸï¼‰ï¼›</li>
<li><code>PERSIST key</code>ï¼šå–æ¶ˆè¿‡æœŸæ—¶é—´ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">SET</span> name <span class="hljs-string">"redis"</span>
<span class="hljs-variable constant_">OK</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">EXPIRE</span> name <span class="hljs-number">60</span> <span class="hljs-comment"># 60ç§’åè¿‡æœŸ</span>
(integer) <span class="hljs-number">1</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">TTL</span> name
(integer) <span class="hljs-number">55</span> <span class="hljs-comment"># å‰©ä½™55ç§’</span>
</code></pre>
<h3 data-id="heading-14">3.4 æŒä¹…åŒ–æœºåˆ¶</h3>
<p>Redis æ˜¯å†…å­˜æ•°æ®åº“ï¼Œé»˜è®¤é‡å¯åæ•°æ®ä¸¢å¤±ï¼ŒæŒä¹…åŒ–æœºåˆ¶è§£å†³è¯¥é—®é¢˜ï¼Œæ”¯æŒä¸¤ç§æ–¹å¼ï¼š</p>
<h4 data-id="heading-15">3.4.1 RDBï¼ˆå¿«ç…§ <strong>Redis DataBase</strong> ï¼‰</h4>
<ul>
<li>
<p><strong>åŸç†</strong>ï¼šåœ¨æŒ‡å®šæ—¶é—´é—´éš”å†…ï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®å¿«ç…§å†™å…¥ç£ç›˜ï¼ˆ.rdb æ–‡ä»¶ï¼‰ï¼›</p>
</li>
<li>
<p><strong>è§¦å‘æ–¹å¼</strong>ï¼š</p>
<ul>
<li>æ‰‹åŠ¨è§¦å‘ï¼š<code>SAVE</code>ï¼ˆé˜»å¡ï¼‰ã€<code>BGSAVE</code>ï¼ˆéé˜»å¡ï¼Œæ¨èï¼‰ï¼›</li>
<li>è‡ªåŠ¨è§¦å‘ï¼šé…ç½® <code>save 900 1</code>ï¼ˆ900 ç§’å†…è‡³å°‘ 1 ä¸ªé”®ä¿®æ”¹åˆ™è§¦å‘ï¼‰ï¼›</li>
</ul>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šæ–‡ä»¶ä½“ç§¯å°ï¼Œæ¢å¤é€Ÿåº¦å¿«ï¼›</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šå¯èƒ½ä¸¢å¤±æœ€è¿‘ä¸€æ¬¡å¿«ç…§åçš„æ‰€æœ‰æ•°æ®ã€‚</p>
</li>
</ul>
<h4 data-id="heading-16">3.4.2 AOFï¼ˆè¿½åŠ æ—¥å¿— Append Only File ï¼‰</h4>
<ul>
<li>
<p><strong>åŸç†</strong>ï¼šè®°å½•æ‰€æœ‰å†™å‘½ä»¤ï¼ˆå¦‚ SETã€HSETï¼‰ï¼Œé‡å¯æ—¶é‡æ–°æ‰§è¡Œå‘½ä»¤æ¢å¤æ•°æ®ï¼›</p>
</li>
<li>
<p><strong>å¼€å¯æ–¹å¼</strong>ï¼šé…ç½® <code>appendonly yes</code>ï¼›</p>
</li>
<li>
<p><strong>åŒæ­¥ç­–ç•¥</strong>ï¼š</p>
<ul>
<li><code>appendfsync always</code>ï¼šæ¯æ¬¡å†™å‘½ä»¤éƒ½åŒæ­¥ï¼ˆæœ€å®‰å…¨ï¼Œæ€§èƒ½æœ€å·®ï¼‰ï¼›</li>
<li><code>appendfsync everysec</code>ï¼šæ¯ç§’åŒæ­¥ï¼ˆé»˜è®¤ï¼Œå¹³è¡¡å®‰å…¨ä¸æ€§èƒ½ï¼‰ï¼›</li>
<li><code>appendfsync no</code>ï¼šç”±æ“ä½œç³»ç»Ÿå†³å®šï¼ˆæ€§èƒ½æœ€å¥½ï¼Œæœ€ä¸å®‰å…¨ï¼‰ï¼›</li>
</ul>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šæ•°æ®ä¸¢å¤±å°‘ï¼ˆæœ€å¤š 1 ç§’ï¼‰ï¼›</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šæ–‡ä»¶ä½“ç§¯å¤§ï¼Œæ¢å¤é€Ÿåº¦æ…¢ã€‚</p>
</li>
</ul>
<h4 data-id="heading-17">3.4.3 æ··åˆæŒä¹…åŒ–ï¼ˆRedis 4.0+ï¼‰</h4>
<p>é…ç½® <code>aof-use-rdb-preamble yes</code>ï¼ŒAOF æ–‡ä»¶å¼€å¤´åŒ…å« RDB å¿«ç…§ï¼Œåç»­æ˜¯ AOF æ—¥å¿—ï¼Œå…¼é¡¾ RDB å’Œ AOF çš„ä¼˜ç‚¹ï¼Œç”Ÿäº§ç¯å¢ƒæ¨èå¼€å¯ã€‚</p>
<h2 data-id="heading-18">å››ã€Redis æ ¸å¿ƒæ•°æ®ç»“æ„ä¸å‘½ä»¤å®æˆ˜</h2>
<h3 data-id="heading-19">4.1 å­—ç¬¦ä¸²ï¼ˆStringï¼‰</h3>
<p>String æ˜¯ Redis æœ€åŸºç¡€çš„ç±»å‹ï¼Œå¯å­˜å‚¨å­—ç¬¦ä¸²ã€æ•°å­—ã€äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¦‚å›¾ç‰‡ï¼‰ï¼Œæœ€å¤§å®¹é‡ 512MBã€‚</p>
<h4 data-id="heading-20">æ ¸å¿ƒå‘½ä»¤</h4>


















































<table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>SET key value</td><td>è®¾ç½®é”®å€¼å¯¹</td><td>SET username "zhangsan"</td></tr><tr><td>GET key</td><td>è·å–å€¼</td><td>GET username â†’ "zhangsan"</td></tr><tr><td>SETNX key value</td><td>ä»…å½“é”®ä¸å­˜åœ¨æ—¶è®¾ç½®ï¼ˆåˆ†å¸ƒå¼é”æ ¸å¿ƒï¼‰</td><td>SETNX lock 1 â†’ 1ï¼ˆæˆåŠŸï¼‰/0ï¼ˆå¤±è´¥ï¼‰</td></tr><tr><td>INCR key</td><td>æ•°å­—å€¼è‡ªå¢ 1ï¼ˆåŸå­æ“ä½œï¼‰</td><td>SET num 10 â†’ INCR num â†’ 11</td></tr><tr><td>INCRBY key step</td><td>è‡ªå¢æŒ‡å®šæ­¥é•¿</td><td>INCRBY num 5 â†’ 16</td></tr><tr><td>DECR key</td><td>æ•°å­—å€¼è‡ªå‡ 1</td><td>DECR num â†’ 15</td></tr><tr><td>APPEND key value</td><td>è¿½åŠ å­—ç¬¦ä¸²</td><td>APPEND username "_test" â†’ "zhangsan_test"</td></tr><tr><td>STRLEN key</td><td>è·å–å­—ç¬¦ä¸²é•¿åº¦</td><td>STRLEN username â†’ 12</td></tr></tbody></table>
<h4 data-id="heading-21">å®æˆ˜åœºæ™¯ï¼šæ¥å£é™æµ</h4>
<p>éœ€æ±‚ï¼šé™åˆ¶æŸä¸ªæ¥å£æ¯åˆ†é’Ÿæœ€å¤šè®¿é—® 100 æ¬¡ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># å‡è®¾æ¥å£åæ˜¯ /api/userï¼Œç”¨æˆ·IPæ˜¯ 192.168.1.1</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">INCR</span> <span class="hljs-symbol">api:</span><span class="hljs-symbol">limit:</span><span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span><span class="hljs-symbol">:/api/user</span>
(integer) <span class="hljs-number">1</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">EXPIRE</span> <span class="hljs-symbol">api:</span><span class="hljs-symbol">limit:</span><span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span><span class="hljs-symbol">:/api/user</span> <span class="hljs-number">60</span>
(integer) <span class="hljs-number">1</span>
<span class="hljs-comment"># æ¯æ¬¡è®¿é—®æ¥å£æ—¶æ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼Œè‹¥è¿”å›å€¼ &gt;100 åˆ™æ‹’ç»è®¿é—®</span>
</code></pre>
<h3 data-id="heading-22">4.2 å“ˆå¸Œï¼ˆHashï¼‰</h3>
<p>Hash æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œé€‚åˆå­˜å‚¨å¯¹è±¡ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ã€å•†å“è¯¦æƒ…ï¼‰ï¼Œå¯å•ç‹¬æ“ä½œå¯¹è±¡çš„æŸä¸ªå­—æ®µï¼ŒèŠ‚çœå†…å­˜ã€‚</p>
<h4 data-id="heading-23">æ ¸å¿ƒå‘½ä»¤</h4>


















































<table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>HSET key field value</td><td>è®¾ç½®å“ˆå¸Œå­—æ®µå€¼</td><td>HSET user:1001 name "æå››" age 25</td></tr><tr><td>HGET key field</td><td>è·å–å“ˆå¸Œå­—æ®µå€¼</td><td>HGET user:1001 name â†’ "æå››"</td></tr><tr><td>HMSET key f1 v1 f2 v2</td><td>æ‰¹é‡è®¾ç½®å“ˆå¸Œå­—æ®µ</td><td>HMSET user:1002 name "ç‹äº”" age 30</td></tr><tr><td>HMGET key f1 f2</td><td>æ‰¹é‡è·å–å“ˆå¸Œå­—æ®µ</td><td>HMGET user:1002 name age â†’ ["ç‹äº”","30"]</td></tr><tr><td>HGETALL key</td><td>è·å–æ‰€æœ‰å­—æ®µå’Œå€¼</td><td>HGETALL user:1001 â†’ ["name","æå››","age","25"]</td></tr><tr><td>HDEL key field</td><td>åˆ é™¤å“ˆå¸Œå­—æ®µ</td><td>HDEL user:1001 age â†’ 1ï¼ˆæˆåŠŸï¼‰</td></tr><tr><td>HLEN key</td><td>è·å–å“ˆå¸Œå­—æ®µæ•°é‡</td><td>HLEN user:1001 â†’ 1</td></tr><tr><td>HEXISTS key field</td><td>åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨</td><td>HEXISTS user:1001 name â†’ 1ï¼ˆå­˜åœ¨ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-24">å®æˆ˜åœºæ™¯ï¼šå­˜å‚¨ç”¨æˆ·ä¿¡æ¯</h4>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># å­˜å‚¨ç”¨æˆ·ID=1001çš„ä¿¡æ¯</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">HSET</span> <span class="hljs-symbol">user:</span><span class="hljs-number">1001</span> username <span class="hljs-string">"zhangsan"</span> email <span class="hljs-string">"zs@test.com"</span> phone <span class="hljs-string">"13800138000"</span>
(integer) <span class="hljs-number">3</span>
<span class="hljs-comment"># è·å–ç”¨æˆ·é‚®ç®±</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">HGET</span> <span class="hljs-symbol">user:</span><span class="hljs-number">1001</span> email
<span class="hljs-string">"zs@test.com"</span>
<span class="hljs-comment"># æ›´æ–°ç”¨æˆ·æ‰‹æœºå·</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">HSET</span> <span class="hljs-symbol">user:</span><span class="hljs-number">1001</span> phone <span class="hljs-string">"13900139000"</span>
(integer) <span class="hljs-number">0</span>
<span class="hljs-comment"># è·å–ç”¨æˆ·æ‰€æœ‰ä¿¡æ¯</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">HGETALL</span> <span class="hljs-symbol">user:</span><span class="hljs-number">1001</span>
<span class="hljs-number">1</span>) <span class="hljs-string">"username"</span>
<span class="hljs-number">2</span>) <span class="hljs-string">"zhangsan"</span>
<span class="hljs-number">3</span>) <span class="hljs-string">"email"</span>
<span class="hljs-number">4</span>) <span class="hljs-string">"zs@test.com"</span>
<span class="hljs-number">5</span>) <span class="hljs-string">"phone"</span>
<span class="hljs-number">6</span>) <span class="hljs-string">"13900139000"</span>
</code></pre>
<h3 data-id="heading-25">4.3 åˆ—è¡¨ï¼ˆListï¼‰</h3>
<p>List æ˜¯æœ‰åºã€å¯é‡å¤çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œåº•å±‚æ˜¯åŒå‘é“¾è¡¨ï¼Œæ”¯æŒå¤´å°¾æ’å…¥ / åˆ é™¤ï¼Œé€‚åˆåšæ¶ˆæ¯é˜Ÿåˆ—ã€æœ€æ–°æ¶ˆæ¯åˆ—è¡¨ã€‚</p>
<h4 data-id="heading-26">æ ¸å¿ƒå‘½ä»¤</h4>


















































<table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>LPUSH key value</td><td>ä»åˆ—è¡¨å¤´éƒ¨æ’å…¥å…ƒç´ </td><td>LPUSH msg "hello" â†’ 1</td></tr><tr><td>RPUSH key value</td><td>ä»åˆ—è¡¨å°¾éƒ¨æ’å…¥å…ƒç´ </td><td>RPUSH msg "world" â†’ 2</td></tr><tr><td>LPOP key</td><td>ä»åˆ—è¡¨å¤´éƒ¨åˆ é™¤å¹¶è¿”å›å…ƒç´ </td><td>LPOP msg â†’ "hello"</td></tr><tr><td>RPOP key</td><td>ä»åˆ—è¡¨å°¾éƒ¨åˆ é™¤å¹¶è¿”å›å…ƒç´ </td><td>RPOP msg â†’ "world"</td></tr><tr><td>BRPOP key timeout</td><td>é˜»å¡å¼å¼¹å‡ºï¼ˆé˜Ÿåˆ—æ— æ•°æ®æ—¶ç­‰å¾…ï¼‰</td><td>BRPOP queue 0 â†’ æ°¸ä¹…ç­‰å¾…</td></tr><tr><td>LRANGE key start end</td><td>è·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´å…ƒç´ ï¼ˆ0 å¼€å¤´ï¼Œ-1 ç»“å°¾ï¼‰</td><td>LRANGE msg 0 -1 â†’ æ‰€æœ‰å…ƒç´ </td></tr><tr><td>LLEN key</td><td>è·å–åˆ—è¡¨é•¿åº¦</td><td>LLEN msg â†’ 2</td></tr><tr><td>LREM key count value</td><td>åˆ é™¤æŒ‡å®šæ•°é‡çš„å…ƒç´ </td><td>LREM msg 2 "hello" â†’ åˆ é™¤ 2 ä¸ª "hello"</td></tr></tbody></table>
<h4 data-id="heading-27">å®æˆ˜åœºæ™¯ï¼šç®€å•æ¶ˆæ¯é˜Ÿåˆ—</h4>
<p>ç”Ÿäº§è€…å¾€é˜Ÿåˆ—å°¾éƒ¨æ·»åŠ æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…é˜»å¡å¼è·å–æ¶ˆæ¯ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># ç”Ÿäº§è€…ï¼šæ·»åŠ 3æ¡æ¶ˆæ¯</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">RPUSH</span> <span class="hljs-symbol">msg:</span>queue <span class="hljs-string">"order:1001"</span> <span class="hljs-string">"order:1002"</span> <span class="hljs-string">"order:1003"</span>
(integer) <span class="hljs-number">3</span>
<span class="hljs-comment"># æ¶ˆè´¹è€…ï¼šé˜»å¡å¼è·å–æ¶ˆæ¯ï¼ˆæ— æ¶ˆæ¯æ—¶ç­‰å¾…ï¼‰</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">BRPOP</span> <span class="hljs-symbol">msg:</span>queue <span class="hljs-number">0</span>
<span class="hljs-number">1</span>) <span class="hljs-string">"msg:queue"</span>
<span class="hljs-number">2</span>) <span class="hljs-string">"order:1003"</span> <span class="hljs-comment"># å…ˆè·å–å°¾éƒ¨çš„æ¶ˆæ¯ï¼ˆFIFOï¼‰</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">BRPOP</span> <span class="hljs-symbol">msg:</span>queue <span class="hljs-number">0</span>
<span class="hljs-number">1</span>) <span class="hljs-string">"msg:queue"</span>
<span class="hljs-number">2</span>) <span class="hljs-string">"order:1002"</span>
</code></pre>
<h3 data-id="heading-28">4.4 é›†åˆï¼ˆSetï¼‰</h3>
<p>Set æ˜¯æ— åºã€ä¸å¯é‡å¤çš„å­—ç¬¦ä¸²é›†åˆï¼Œæ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰é›†åˆæ“ä½œï¼Œé€‚åˆå»é‡ã€æ ‡ç­¾ã€æŠ½å¥–åœºæ™¯ã€‚</p>
<h4 data-id="heading-29">æ ¸å¿ƒå‘½ä»¤</h4>




























































<table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>SADD key member</td><td>æ·»åŠ å…ƒç´ ï¼ˆé‡å¤æ·»åŠ æ— æ•ˆï¼‰</td><td>SADD tag:1001 "java" "python" â†’ 2</td></tr><tr><td>SMEMBERS key</td><td>è·å–æ‰€æœ‰å…ƒç´ </td><td>SMEMBERS tag:1001 â†’ ["java","python"]</td></tr><tr><td>SISMEMBER key member</td><td>åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨</td><td>SISMEMBER tag:1001 "java" â†’ 1ï¼ˆå­˜åœ¨ï¼‰</td></tr><tr><td>SREM key member</td><td>åˆ é™¤å…ƒç´ </td><td>SREM tag:1001 "python" â†’ 1</td></tr><tr><td>SCARD key</td><td>è·å–é›†åˆå¤§å°</td><td>SCARD tag:1001 â†’ 1</td></tr><tr><td>SINTER key1 key2</td><td>æ±‚äº¤é›†</td><td>SINTER tag:1001 tag:1002 â†’ å…±åŒæ ‡ç­¾</td></tr><tr><td>SUNION key1 key2</td><td>æ±‚å¹¶é›†</td><td>SUNION tag:1001 tag:1002 â†’ æ‰€æœ‰æ ‡ç­¾</td></tr><tr><td>SDIFF key1 key2</td><td>æ±‚å·®é›†ï¼ˆkey1 æœ‰ï¼Œkey2 æ— ï¼‰</td><td>SDIFF tag:1001 tag:1002 â†’ ç‹¬æœ‰æ ‡ç­¾</td></tr><tr><td>SRANDMEMBER key count</td><td>éšæœºè·å– count ä¸ªå…ƒç´ ï¼ˆä¸åˆ é™¤ï¼‰</td><td>SRANDMEMBER prize 1 â†’ éšæœºæŠ½å¥– 1 å</td></tr><tr><td>SPOP key count</td><td>éšæœºåˆ é™¤ count ä¸ªå…ƒç´ ï¼ˆæŠ½å¥–å¸¸ç”¨ï¼‰</td><td>SPOP prize 1 â†’ éšæœºæŠ½ 1 åå¹¶ç§»é™¤</td></tr></tbody></table>
<h4 data-id="heading-30">å®æˆ˜åœºæ™¯ï¼šæŠ½å¥–æ´»åŠ¨</h4>
<p>éœ€æ±‚ï¼šä» 10 ä¸ªç”¨æˆ·ä¸­éšæœºæŠ½å– 1 åä¸€ç­‰å¥–ã€2 åäºŒç­‰å¥–ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># æ·»åŠ æŠ½å¥–ç”¨æˆ·</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">SADD</span> <span class="hljs-symbol">prize:</span><span class="hljs-number">2024</span> user1 user2 user3 user4 user5 user6 user7 user8 user9 user10
(integer) <span class="hljs-number">10</span>
<span class="hljs-comment"># æŠ½ä¸€ç­‰å¥–ï¼ˆéšæœºåˆ é™¤1ä¸ªï¼‰</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">SPOP</span> <span class="hljs-symbol">prize:</span><span class="hljs-number">2024</span> <span class="hljs-number">1</span>
<span class="hljs-number">1</span>) <span class="hljs-string">"user5"</span>
<span class="hljs-comment"># æŠ½äºŒç­‰å¥–ï¼ˆéšæœºåˆ é™¤2ä¸ªï¼‰</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">SPOP</span> <span class="hljs-symbol">prize:</span><span class="hljs-number">2024</span> <span class="hljs-number">2</span>
<span class="hljs-number">1</span>) <span class="hljs-string">"user8"</span>
<span class="hljs-number">2</span>) <span class="hljs-string">"user2"</span>
</code></pre>
<h3 data-id="heading-31">4.5 æœ‰åºé›†åˆï¼ˆZSetï¼‰</h3>
<p>ZSet æ˜¯æœ‰åºã€ä¸å¯é‡å¤çš„é›†åˆï¼Œæ¯ä¸ªå…ƒç´ å…³è”ä¸€ä¸ªåˆ†æ•°ï¼ˆscoreï¼‰ï¼ŒæŒ‰åˆ†æ•°æ’åºï¼Œé€‚åˆæ’è¡Œæ¦œã€å»¶æ—¶ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-32">æ ¸å¿ƒå‘½ä»¤</h4>













































<table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ZADD key score member</td><td>æ·»åŠ å…ƒç´ ï¼ˆscore ä¸ºæ•°å­—ï¼‰</td><td>ZADD rank:sales 100 "å•†å“ A" 200 "å•†å“ B" â†’ 2</td></tr><tr><td>ZRANGE key start end [WITHSCORES]</td><td>æŒ‰åˆ†æ•°å‡åºè·å–å…ƒç´ ï¼ˆå¸¦åˆ†æ•°ï¼‰</td><td>ZRANGE rank:sales 0 -1 WITHSCORES â†’ ["å•†å“ A","100","å•†å“ B","200"]</td></tr><tr><td>ZREVRANGE key start end [WITHSCORES]</td><td>æŒ‰åˆ†æ•°é™åºè·å–å…ƒç´ </td><td>ZREVRANGE rank:sales 0 0 WITHSCORES â†’ ["å•†å“ B","200"]ï¼ˆç¬¬ä¸€åï¼‰</td></tr><tr><td>ZSCORE key member</td><td>è·å–å…ƒç´ åˆ†æ•°</td><td>ZSCORE rank:sales "å•†å“ A" â†’ "100"</td></tr><tr><td>ZINCRBY key increment member</td><td>å¢åŠ å…ƒç´ åˆ†æ•°</td><td>ZINCRBY rank:sales 50 "å•†å“ A" â†’ 150</td></tr><tr><td>ZREM key member</td><td>åˆ é™¤å…ƒç´ </td><td>ZREM rank:sales "å•†å“ A" â†’ 1</td></tr><tr><td>ZCOUNT key min max</td><td>ç»Ÿè®¡åˆ†æ•°èŒƒå›´å†…çš„å…ƒç´ æ•°é‡</td><td>ZCOUNT rank:sales 100 200 â†’ 2</td></tr></tbody></table>
<h4 data-id="heading-33">å®æˆ˜åœºæ™¯ï¼šå•†å“é”€é‡æ’è¡Œæ¦œ</h4>
<p>éœ€æ±‚ï¼šå®æ—¶æ›´æ–°å•†å“é”€é‡ï¼Œå±•ç¤ºé”€é‡å‰ 3 çš„å•†å“ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># åˆå§‹åŒ–é”€é‡</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">ZADD</span> <span class="hljs-symbol">rank:</span>sales <span class="hljs-number">50</span> <span class="hljs-string">"å•†å“1"</span> <span class="hljs-number">80</span> <span class="hljs-string">"å•†å“2"</span> <span class="hljs-number">120</span> <span class="hljs-string">"å•†å“3"</span> <span class="hljs-number">90</span> <span class="hljs-string">"å•†å“4"</span>
(integer) <span class="hljs-number">4</span>
<span class="hljs-comment"># å•†å“2é”€é‡+20</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">ZINCRBY</span> <span class="hljs-symbol">rank:</span>sales <span class="hljs-number">20</span> <span class="hljs-string">"å•†å“2"</span>
<span class="hljs-string">"100"</span>
<span class="hljs-comment"># æŸ¥çœ‹é”€é‡å‰3çš„å•†å“ï¼ˆé™åºï¼‰</span>
<span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">ZREVRANGE</span> <span class="hljs-symbol">rank:</span>sales <span class="hljs-number">0</span> <span class="hljs-number">2</span> <span class="hljs-variable constant_">WITHSCORES</span>
<span class="hljs-number">1</span>) <span class="hljs-string">"å•†å“3"</span>
<span class="hljs-number">2</span>) <span class="hljs-string">"120"</span>
<span class="hljs-number">3</span>) <span class="hljs-string">"å•†å“2"</span>
<span class="hljs-number">4</span>) <span class="hljs-string">"100"</span>
<span class="hljs-number">5</span>) <span class="hljs-string">"å•†å“4"</span>
<span class="hljs-number">6</span>) <span class="hljs-string">"90"</span>
</code></pre>
<h2 data-id="heading-34">äº”ã€Redis é«˜çº§ç‰¹æ€§</h2>
<h3 data-id="heading-35">5.1 åˆ†å¸ƒå¼é”</h3>
<p>Redis æ˜¯å®ç°åˆ†å¸ƒå¼é”çš„å¸¸ç”¨æ–¹æ¡ˆï¼Œæ ¸å¿ƒåŸç†æ˜¯åˆ©ç”¨ <code>SETNX</code> å‘½ä»¤ï¼ˆä»…å½“é”®ä¸å­˜åœ¨æ—¶è®¾ç½®ï¼‰ï¼Œç»“åˆè¿‡æœŸæ—¶é—´é¿å…æ­»é”ã€‚</p>
<h4 data-id="heading-36">æ ‡å‡†å®ç°æ­¥éª¤</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># 1. è·å–é”ï¼ˆSET NX EX åŸå­æ“ä½œï¼Œé¿å…å¹¶å‘é—®é¢˜ï¼‰</span>
SET <span class="hljs-keyword">lock</span>:order <span class="hljs-number">1</span> NX EX <span class="hljs-number">30</span>
<span class="hljs-meta"># å‚æ•°è¯´æ˜ï¼š</span>
<span class="hljs-meta"># NX â†’ ä»…å½“é”®ä¸å­˜åœ¨æ—¶è®¾ç½®</span>
<span class="hljs-meta"># EX 30 â†’ 30ç§’è¿‡æœŸï¼ˆé¿å…æœåŠ¡å®•æœºå¯¼è‡´æ­»é”ï¼‰</span>
<span class="hljs-meta"># è¿”å› OK è¡¨ç¤ºè·å–é”æˆåŠŸï¼Œå¦åˆ™å¤±è´¥</span>

<span class="hljs-meta"># 2. æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚æ‰£å‡åº“å­˜ï¼‰</span>

<span class="hljs-meta"># 3. é‡Šæ”¾é”ï¼ˆåˆ é™¤é”®ï¼‰</span>
DEL <span class="hljs-keyword">lock</span>:order
</code></pre>
<h4 data-id="heading-37">æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>
<p>è¿‡æœŸæ—¶é—´éœ€å¤§äºä¸šåŠ¡æ‰§è¡Œæ—¶é—´ï¼Œé¿å…é”æå‰é‡Šæ”¾ï¼›</p>
</li>
<li>
<p>é‡Šæ”¾é”æ—¶å»ºè®®ç”¨ Lua è„šæœ¬éªŒè¯é”çš„æŒæœ‰è€…ï¼ˆé˜²æ­¢è¯¯åˆ å…¶ä»–å®¢æˆ·ç«¯çš„é”ï¼‰ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">if</span> redis.<span class="hljs-keyword">call</span>(<span class="hljs-comment">'get', KEYS[1]) == ARGV[1] then</span>
    <span class="hljs-keyword">return</span> redis.<span class="hljs-keyword">call</span>(<span class="hljs-comment">'del', KEYS[1])</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
<span class="hljs-keyword">end</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-38">5.2 ç®¡é“ï¼ˆPipelineï¼‰</h3>
<p>Redis ç®¡é“å…è®¸ä¸€æ¬¡æ€§å‘é€å¤šä¸ªå‘½ä»¤ï¼Œå‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°ï¼Œæå‡æ‰¹é‡æ“ä½œæ€§èƒ½ã€‚</p>
<p>ç¤ºä¾‹ï¼šæ‰¹é‡è®¾ç½® 1000 ä¸ªé”®å€¼å¯¹</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># å¼€å¯ç®¡é“</span>
redis-cli -a yourpassword --<span class="hljs-keyword">pipe</span>
<span class="hljs-comment"># è¾“å…¥å‘½ä»¤ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰</span>
SET key1 value1
SET key2 value2
...
SET key100<span class="hljs-number">0</span> value100<span class="hljs-number">0</span>
<span class="hljs-comment"># æŒ‰ Ctrl+D æ‰§è¡Œ</span>
</code></pre>
<h3 data-id="heading-39">5.3 Lua è„šæœ¬</h3>
<p>Redis æ”¯æŒ Lua è„šæœ¬ï¼Œè„šæœ¬å†…çš„å‘½ä»¤åŸå­æ‰§è¡Œï¼Œé€‚åˆå¤æ‚ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚æ‰£å‡åº“å­˜ + æ›´æ–°é”€é‡ï¼‰ã€‚</p>
<p>ç¤ºä¾‹ï¼šæ‰£å‡å•†å“åº“å­˜ï¼ˆåº“å­˜ &gt; 0 æ—¶æ‰£å‡ï¼Œå¦åˆ™è¿”å›å¤±è´¥ï¼‰</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- è„šæœ¬å‚æ•°ï¼šKEYS[1] = åº“å­˜é”®ï¼ŒARGV[1] = æ‰£å‡æ•°é‡</span>
<span class="hljs-keyword">local</span> stock = <span class="hljs-built_in">tonumber</span>(redis.call(<span class="hljs-string">'get'</span>, KEYS[<span class="hljs-number">1</span>]))
<span class="hljs-keyword">local</span> num = <span class="hljs-built_in">tonumber</span>(ARGV[<span class="hljs-number">1</span>])
<span class="hljs-keyword">if</span> stock <span class="hljs-keyword">and</span> stock &gt;= num <span class="hljs-keyword">then</span>
    redis.call(<span class="hljs-string">'decrby'</span>, KEYS[<span class="hljs-number">1</span>], num)
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> <span class="hljs-comment">-- æ‰£å‡æˆåŠŸ</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> <span class="hljs-comment">-- åº“å­˜ä¸è¶³</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>æ‰§è¡Œè„šæœ¬ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-number">127.0</span><span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.1</span>:<span class="hljs-number">6379</span>&gt; <span class="hljs-selector-tag">EVAL</span> "<span class="hljs-selector-tag">local</span> <span class="hljs-selector-tag">stock</span> = <span class="hljs-selector-tag">tonumber</span>(redis.<span class="hljs-built_in">call</span>(<span class="hljs-string">'get'</span>, KEYS[<span class="hljs-number">1</span>])) <span class="hljs-selector-tag">local</span> <span class="hljs-selector-tag">num</span> = <span class="hljs-selector-tag">tonumber</span>(ARGV[<span class="hljs-number">1</span>]) <span class="hljs-selector-tag">if</span> <span class="hljs-selector-tag">stock</span> <span class="hljs-selector-tag">and</span> <span class="hljs-selector-tag">stock</span> &gt;= <span class="hljs-selector-tag">num</span> <span class="hljs-selector-tag">then</span> <span class="hljs-selector-tag">redis</span><span class="hljs-selector-class">.call</span>(<span class="hljs-string">'decrby'</span>, KEYS[<span class="hljs-number">1</span>], num) <span class="hljs-selector-tag">return</span> <span class="hljs-number">1</span> <span class="hljs-selector-tag">else</span> <span class="hljs-selector-tag">return</span> <span class="hljs-number">0</span> <span class="hljs-selector-tag">end</span>" <span class="hljs-number">1</span> <span class="hljs-selector-tag">stock</span>:<span class="hljs-number">1001</span> <span class="hljs-number">2</span>
# å‚æ•°è¯´æ˜ï¼š<span class="hljs-number">1</span> â†’ <span class="hljs-selector-tag">KEYS</span>æ•°ç»„é•¿åº¦ï¼Œ<span class="hljs-selector-tag">stock</span>:<span class="hljs-number">1001</span> â†’ <span class="hljs-selector-tag">KEYS</span><span class="hljs-selector-attr">[1]</span>ï¼Œ<span class="hljs-number">2</span> â†’ <span class="hljs-selector-tag">ARGV</span><span class="hljs-selector-attr">[1]</span>
</code></pre>
<h3 data-id="heading-40">5.4 ä¸»ä»å¤åˆ¶</h3>
<p>ä¸»ä»å¤åˆ¶ç”¨äºæ•°æ®å¤‡ä»½å’Œè¯»å†™åˆ†ç¦»ï¼š</p>
<ul>
<li><strong>ä¸»åº“ï¼ˆMasterï¼‰</strong> ï¼šå¤„ç†æ‰€æœ‰å†™æ“ä½œï¼ŒåŒæ­¥æ•°æ®åˆ°ä»åº“ï¼›</li>
<li><strong>ä»åº“ï¼ˆSlaveï¼‰</strong> ï¼šåªè¯»ï¼Œåˆ†æ‹…è¯»æ“ä½œå‹åŠ›ã€‚</li>
</ul>
<p>é…ç½®æ­¥éª¤ï¼š</p>
<ol>
<li>
<p>å¤åˆ¶ä¸»åº“é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹ç«¯å£ï¼ˆå¦‚ 6380ï¼‰ã€pid æ–‡ä»¶ã€æ—¥å¿—æ–‡ä»¶ï¼›</p>
</li>
<li>
<p>åœ¨ä»åº“é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">replicaof ä¸»åº“IP ä¸»åº“ç«¯å£
masterauth ä¸»åº“å¯†ç 
replica-read-only <span class="hljs-built_in">yes</span> <span class="hljs-comment"># ä»åº“åªè¯»</span>
</code></pre>
</li>
<li>
<p>å¯åŠ¨ä»åº“ï¼Œæ‰§è¡Œ <code>INFO replication</code> æŸ¥çœ‹å¤åˆ¶çŠ¶æ€ã€‚</p>
</li>
</ol>
<h3 data-id="heading-41">5.5 å“¨å…µï¼ˆSentinelï¼‰</h3>
<p>å“¨å…µç”¨äºç›‘æ§ä¸»ä»åº“ï¼Œå½“ä¸»åº“å®•æœºæ—¶è‡ªåŠ¨å°†ä»åº“åˆ‡æ¢ä¸ºä¸»åº“ï¼Œä¿è¯é«˜å¯ç”¨ã€‚</p>
<p>æ ¸å¿ƒé…ç½®ï¼ˆsentinel.confï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">port 26379
daemonize <span class="hljs-built_in">yes</span>
logfile <span class="hljs-string">"/usr/local/redis/log/sentinel.log"</span>
<span class="hljs-comment"># ç›‘æ§ä¸»åº“ï¼šmymaster ä¸ºä¸»åº“åç§°ï¼Œ2 ä¸ºè‡³å°‘2ä¸ªå“¨å…µåŒæ„åˆ‡æ¢</span>
sentinel monitor mymaster 127.0.0.1 6379 2
<span class="hljs-comment"># ä¸»åº“å¯†ç </span>
sentinel auth-pass mymaster yourpassword
<span class="hljs-comment"># ä¸»åº“å®•æœºåå¤šä¹…åˆ‡æ¢ï¼ˆæ¯«ç§’ï¼‰</span>
sentinel down-after-milliseconds mymaster 30000
</code></pre>
<p>å¯åŠ¨å“¨å…µï¼š</p>
<pre><code class="hljs language-bash" lang="bash">redis-sentinel /usr/local/redis/conf/sentinel.conf
</code></pre>
<h2 data-id="heading-42">å…­ã€Redis å¸¸è§é—®é¢˜ä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-43">6.1 ç¼“å­˜ç©¿é€</h3>
<ul>
<li>
<p><strong>é—®é¢˜</strong>ï¼šè¯·æ±‚ä¸å­˜åœ¨çš„ Keyï¼Œæ¯æ¬¡éƒ½ç©¿é€åˆ°æ•°æ®åº“ï¼›</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>ç¼“å­˜ç©ºå€¼ï¼ˆè®¾ç½®çŸ­æœŸè¿‡æœŸæ—¶é—´ï¼‰ï¼›</li>
<li>å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆæå‰è¿‡æ»¤ä¸å­˜åœ¨çš„ Keyï¼‰ã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-44">6.2 ç¼“å­˜å‡»ç©¿</h3>
<ul>
<li>
<p><strong>é—®é¢˜</strong>ï¼šçƒ­ç‚¹ Key è¿‡æœŸç¬é—´ï¼Œå¤§é‡è¯·æ±‚ç©¿é€åˆ°æ•°æ®åº“ï¼›</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>çƒ­ç‚¹ Key æ°¸ä¸è¿‡æœŸï¼›</li>
<li>äº’æ–¥é”ï¼ˆè¯·æ±‚æ—¶å…ˆè·å–é”ï¼Œå†æŸ¥æ•°æ®åº“æ›´æ–°ç¼“å­˜ï¼‰ã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-45">6.3 ç¼“å­˜é›ªå´©</h3>
<ul>
<li>
<p><strong>é—®é¢˜</strong>ï¼šå¤§é‡ Key åŒæ—¶è¿‡æœŸï¼Œæ•°æ®åº“å‹åŠ›éª¤å¢ï¼›</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>è¿‡æœŸæ—¶é—´åŠ éšæœºå€¼ï¼ˆé¿å…åŒæ—¶è¿‡æœŸï¼‰ï¼›</li>
<li>ä¸»ä» + å“¨å…µä¿è¯ Redis é«˜å¯ç”¨ï¼›</li>
<li>é™æµå‰Šå³°ï¼ˆæ§åˆ¶æ•°æ®åº“è¯·æ±‚æ•°ï¼‰ã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-46">6.4 å†…å­˜ä¼˜åŒ–</h3>
<ul>
<li>é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„ï¼ˆå¦‚ç”¨ Hash å­˜å‚¨å¯¹è±¡ï¼Œä»£æ›¿å¤šä¸ª Stringï¼‰ï¼›</li>
<li>è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´å’Œæ·˜æ±°ç­–ç•¥ï¼›</li>
<li>é¿å…å¤§ Keyï¼ˆå¦‚è¶…å¤§å­—ç¬¦ä¸²ã€ç™¾ä¸‡çº§ Listï¼‰ï¼Œæ‹†åˆ†å¤§ Keyã€‚</li>
</ul>
<h3 data-id="heading-47">6.5 æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li>å¼€å¯æŒä¹…åŒ–æ—¶é€‰æ‹©æ··åˆæŒä¹…åŒ–ï¼›</li>
<li>ä½¿ç”¨ç®¡é“æ‰¹é‡æ“ä½œï¼›</li>
<li>é¿å…é¢‘ç¹çš„ KEYSã€FLUSHDB ç­‰é˜»å¡å‘½ä»¤ï¼›</li>
<li>é…ç½®åˆç†çš„ maxmemory å’Œæ·˜æ±°ç­–ç•¥ã€‚</li>
</ul>
<h2 data-id="heading-48">ä¸ƒã€Redis å®¢æˆ·ç«¯ä½¿ç”¨ï¼ˆNode.js ç¤ºä¾‹ï¼‰</h2>
<p>ä»¥ Node.js çš„ <code>ioredis</code> åº“ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•æ“ä½œ Redisï¼š</p>
<h3 data-id="heading-49">7.1 å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs">npm install ioredis
</code></pre>
<h3 data-id="heading-50">7.2 åŸºæœ¬ä½¿ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Redis</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ioredis'</span>);

<span class="hljs-comment">// è¿æ¥ Redis</span>
<span class="hljs-keyword">const</span> redis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Redis</span>({
  <span class="hljs-attr">host</span>: <span class="hljs-string">'127.0.0.1'</span>,
  <span class="hljs-attr">port</span>: <span class="hljs-number">6379</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">'yourpassword'</span>,
  <span class="hljs-attr">db</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// æ•°æ®åº“ç¼–å·ï¼ˆé»˜è®¤0ï¼‰</span>
});

<span class="hljs-comment">// æµ‹è¯•è¿æ¥</span>
redis.<span class="hljs-title function_">ping</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿æ¥æˆåŠŸï¼š'</span>, res); <span class="hljs-comment">// PONG</span>
});

<span class="hljs-comment">// æ“ä½œ String</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">testString</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">set</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'redis-test'</span>);
  <span class="hljs-keyword">const</span> name = <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">get</span>(<span class="hljs-string">'name'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Stringå€¼ï¼š'</span>, name); <span class="hljs-comment">// redis-test</span>
}

<span class="hljs-comment">// æ“ä½œ Hash</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">testHash</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">hset</span>(<span class="hljs-string">'user:1001'</span>, <span class="hljs-string">'name'</span>, <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'age'</span>, <span class="hljs-number">25</span>);
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">hgetall</span>(<span class="hljs-string">'user:1001'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hashå€¼ï¼š'</span>, user); <span class="hljs-comment">// { name: 'å¼ ä¸‰', age: '25' }</span>
}

<span class="hljs-comment">// æ“ä½œ ZSet</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">testZSet</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">zadd</span>(<span class="hljs-string">'rank:score'</span>, <span class="hljs-number">90</span>, <span class="hljs-string">'å°æ˜'</span>, <span class="hljs-number">85</span>, <span class="hljs-string">'å°çº¢'</span>);
  <span class="hljs-keyword">const</span> rank = <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">zrevrange</span>(<span class="hljs-string">'rank:score'</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-string">'WITHSCORES'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ZSetæ’è¡Œæ¦œï¼š'</span>, rank); <span class="hljs-comment">// [ 'å°æ˜', '90', 'å°çº¢', '85' ]</span>
}

<span class="hljs-comment">// æ‰§è¡Œæµ‹è¯•</span>
<span class="hljs-title function_">testString</span>();
<span class="hljs-title function_">testHash</span>();
<span class="hljs-title function_">testZSet</span>();
</code></pre>
<h2 data-id="heading-51">æ€»ç»“</h2>
<ol>
<li>Redis æ˜¯é«˜æ€§èƒ½å†…å­˜æ•°æ®åº“ï¼Œæ ¸å¿ƒä¼˜åŠ¿æ˜¯é€Ÿåº¦å¿«ã€æ”¯æŒå¤šæ•°æ®ç»“æ„ã€å¯æŒä¹…åŒ–ï¼Œä¸»è¦ç”¨äºç¼“å­˜ã€åˆ†å¸ƒå¼é”ã€æ’è¡Œæ¦œç­‰åœºæ™¯ï¼›</li>
<li>æ ¸å¿ƒæ•°æ®ç»“æ„åŒ…æ‹¬ Stringï¼ˆç¼“å­˜ / è®¡æ•°å™¨ï¼‰ã€Hashï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰ã€Listï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ã€Setï¼ˆå»é‡ / æŠ½å¥–ï¼‰ã€ZSetï¼ˆæ’è¡Œæ¦œï¼‰ï¼Œéœ€æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚ç±»å‹ï¼›</li>
<li>ç”Ÿäº§ç¯å¢ƒéœ€æ³¨æ„é…ç½®æŒä¹…åŒ–ï¼ˆæ··åˆæŒä¹…åŒ–ï¼‰ã€è®¾ç½®å¯†ç ã€å¼€å¯ä¸»ä» / å“¨å…µä¿è¯é«˜å¯ç”¨ï¼ŒåŒæ—¶è§„é¿ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©ç­‰é—®é¢˜ï¼›</li>
<li>æ“ä½œ Redis æ—¶ä¼˜å…ˆä½¿ç”¨åŸå­å‘½ä»¤ï¼ˆå¦‚ SET NX EXï¼‰ã€Lua è„šæœ¬ã€ç®¡é“ï¼Œæå‡æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚</li>
</ol>
<p>æŒæ¡æœ¬æ–‡çš„å†…å®¹åï¼Œä½ å¯ä»¥åº”å¯¹å¤§éƒ¨åˆ† Redis æ—¥å¸¸ä½¿ç”¨åœºæ™¯ï¼Œè¿›é˜¶å­¦ä¹ å¯æ·±å…¥ç ”ç©¶ Redis é›†ç¾¤ã€æºç ã€æ€§èƒ½è°ƒä¼˜ç­‰æ–¹å‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GORM æ³›å‹æ–°å§¿åŠ¿ï¼šå‘Šåˆ«â€œç±»å‹æ“¦é™¤â€ï¼Œæ‹¥æŠ±ç±»å‹å®‰å…¨ï¼]]></title>    <link>https://juejin.cn/post/7601069677567197230</link>    <guid>https://juejin.cn/post/7601069677567197230</guid>    <pubDate>2026-02-01T01:08:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601069677567197230" data-draft-id="7598435950410776586" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GORM æ³›å‹æ–°å§¿åŠ¿ï¼šå‘Šåˆ«â€œç±»å‹æ“¦é™¤â€ï¼Œæ‹¥æŠ±ç±»å‹å®‰å…¨ï¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-01T01:08:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="golangå­¦ä¹ è®°"/> <meta itemprop="url" content="https://juejin.cn/user/4371313964100990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GORM æ³›å‹æ–°å§¿åŠ¿ï¼šå‘Šåˆ«â€œç±»å‹æ“¦é™¤â€ï¼Œæ‹¥æŠ±ç±»å‹å®‰å…¨ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313964100990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    golangå­¦ä¹ è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T01:08:45.000Z" title="Sun Feb 01 2026 01:08:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦æ³›å‹ç‰ˆ GORMï¼Ÿ</h2>
<p>åœ¨æ³›å‹å‡ºç°å‰ï¼ŒGORM çš„ API é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> user User
db.Where(<span class="hljs-string">"name = ?"</span>, <span class="hljs-string">"jinzhu"</span>).First(&amp;user)
</code></pre>
<p>çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Ÿä½†å½“ä½ å†™æˆï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> user User
db.Where(<span class="hljs-string">"name = ?"</span>, <span class="hljs-string">"jinzhu"</span>).First(&amp;Order{}) <span class="hljs-comment">// âŒ ä¼ é”™ç±»å‹äº†ï¼</span>
</code></pre>
<p>GORM ä¸ä¼šæŠ¥é”™ï¼ˆè¿è¡Œæ—¶å¯èƒ½ panic æˆ–æŸ¥é”™è¡¨ï¼‰ï¼Œå› ä¸º <code>*gorm.DB</code> æ˜¯â€œä¸‡èƒ½å®¹å™¨â€ï¼Œç±»å‹ä¿¡æ¯åœ¨ç¼–è¯‘æœŸå°±ä¸¢äº†ã€‚</p>
<p><strong>æ³›å‹ç‰ˆ GORM è§£å†³äº†è¿™ä¸ªé—®é¢˜</strong>ï¼šæ¯ä¸ªæ“ä½œéƒ½ç»‘å®šåˆ°å…·ä½“æ¨¡å‹ï¼Œç±»å‹é”™è¯¯ç›´æ¥åœ¨ç¼–è¯‘æ—¶æŠ¥é”™ï¼</p>
<hr/>
<h2 data-id="heading-1">ğŸš€ å¿«é€Ÿä¸Šæ‰‹ï¼šGORM æ³›å‹ä¸‰æ­¥èµ°</h2>
<h3 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šå‡çº§ GORMï¼ˆ&gt;= v1.30.0ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">go get -u gorm.io/gorm@latest
</code></pre>
<h3 data-id="heading-3">ç¬¬äºŒæ­¥ï¼šç”¨ <code>G[Model]</code> åŒ…è£¹ä½ çš„æ¨¡å‹</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> <span class="hljs-string">"gorm.io/gorm"</span>

<span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼</span>
db.Where(<span class="hljs-string">"name = ?"</span>, <span class="hljs-string">"alice"</span>).First(&amp;user)

<span class="hljs-comment">// æ³›å‹æ–¹å¼ âœ¨</span>
err := gorm.G[User](db).Where(<span class="hljs-string">"name = ?"</span>, <span class="hljs-string">"alice"</span>).First(ctx, &amp;user)
</code></pre>
<blockquote>
<p>ğŸ’¡ <code>ctx</code> æ˜¯ contextï¼Œæ¨èå¸¦ä¸Šï¼ˆæ”¯æŒè¶…æ—¶ã€å–æ¶ˆç­‰ï¼‰ã€‚</p>
</blockquote>
<h3 data-id="heading-4">ç¬¬ä¸‰æ­¥ï¼šäº«å—ç±»å‹å®‰å…¨ + è‡ªåŠ¨è¡¥å…¨ï¼</h3>
<p>IDE èƒ½ç²¾å‡†çŸ¥é“ä½ æŸ¥çš„æ˜¯ <code>User</code>ï¼Œå­—æ®µæç¤ºã€æ–¹æ³•é“¾éƒ½æ›´æ™ºèƒ½ï¼</p>
<hr/>
<h2 data-id="heading-5">ğŸ± å®æˆ˜å°ä¾‹å­ï¼šä¸€ä¸ªâ€œç”¨æˆ·-è®¢å•â€ç³»ç»Ÿ</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰è¿™ä¸¤ä¸ªæ¨¡å‹ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
	ID    <span class="hljs-type">uint</span>
	Name  <span class="hljs-type">string</span>
	Email <span class="hljs-type">string</span>
}

<span class="hljs-keyword">type</span> Order <span class="hljs-keyword">struct</span> {
	ID     <span class="hljs-type">uint</span>
	UserID <span class="hljs-type">uint</span>
	Amount <span class="hljs-type">float64</span>
	Status <span class="hljs-type">string</span>
}
</code></pre>
<h3 data-id="heading-6">âœ… åœºæ™¯ 1ï¼šå®‰å…¨åœ°æŸ¥ç”¨æˆ·</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetUserByName</span><span class="hljs-params">(db *gorm.DB, name <span class="hljs-type">string</span>)</span></span> (*User, <span class="hljs-type">error</span>) {
	<span class="hljs-keyword">var</span> user User
	err := gorm.G[User](db).Where(<span class="hljs-string">"name = ?"</span>, name).First(context.Background(), &amp;user)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
	}
	<span class="hljs-keyword">return</span> &amp;user, <span class="hljs-literal">nil</span>
}
</code></pre>
<blockquote>
<p>ğŸ”’ å¦‚æœä½ æ‰‹æ»‘å†™æˆ <code>gorm.G[Order](db)...First(&amp;user)</code>ï¼Œ<strong>ç¼–è¯‘ç›´æ¥æŠ¥é”™</strong>ï¼å†ä¹Ÿä¸æ€•â€œå¼ å† ææˆ´â€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">âœ… åœºæ™¯ 2ï¼šå¸¦å…³è”çš„æŸ¥è¯¢ï¼ˆJoinsï¼‰</h3>
<p>æƒ³æŸ¥â€œæ‰€æœ‰æœ‰è®¢å•çš„ç”¨æˆ·â€ï¼Ÿ</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> users []User
err := gorm.G[User](db).
	InnerJoin(<span class="hljs-string">"orders"</span>, <span class="hljs-string">"orders.user_id = users.id"</span>).
	Find(context.Background(), &amp;users)
</code></pre>
<blockquote>
<p>ğŸ¯ æ³›å‹ç‰ˆ <code>Joins</code> æ›´æ¸…æ™°ï¼Œè¿˜èƒ½æŒ‡å®š Join ç±»å‹ï¼ˆ<code>LeftJoin</code>, <code>InnerJoin</code> ç­‰ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">âœ… åœºæ™¯ 3ï¼šé¢„åŠ è½½è®¢å•ï¼ˆPreloadï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> user User
err := gorm.G[User](db).
	Preload(<span class="hljs-string">"Orders"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(db *gorm.DB)</span></span> *gorm.DB {
		<span class="hljs-keyword">return</span> db.Where(<span class="hljs-string">"status = ?"</span>, <span class="hljs-string">"paid"</span>)
	}).
	First(context.Background(), &amp;user, <span class="hljs-number">1</span>)
</code></pre>
<blockquote>
<p>ğŸ’¡ æ³¨æ„ï¼šè™½ç„¶ <code>Preload</code> ä»ç”¨å­—ç¬¦ä¸²ï¼Œä½†ä¸»æ¨¡å‹ <code>User</code> æ˜¯ç±»å‹å®‰å…¨çš„ï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">âœ… åœºæ™¯ 4ï¼šæ’å…¥å†²çªå¤„ç†ï¼ˆUpsertï¼‰</h3>
<pre><code class="hljs language-go" lang="go">newUser := User{Name: <span class="hljs-string">"bob"</span>, Email: <span class="hljs-string">"bob@example.com"</span>}

err := gorm.G[User](db).Clauses(clause.OnConflict{
	Columns:   []clause.Column{{Name: <span class="hljs-string">"email"</span>}},
	DoUpdates: clause.AssignmentColumns([]<span class="hljs-type">string</span>{<span class="hljs-string">"name"</span>}),
}).Create(context.Background(), &amp;newUser)
</code></pre>
<blockquote>
<p>âœ… é‚®ç®±å”¯ä¸€ï¼Œå­˜åœ¨åˆ™æ›´æ–°åå­—ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">âœ… åœºæ™¯ 5ï¼šæ‰¹é‡å¤„ç†ï¼ˆFindInBatchesï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> batch []User
err := gorm.G[User](db).
	Where(<span class="hljs-string">"email LIKE ?"</span>, <span class="hljs-string">"%@example.com"</span>).
	FindInBatches(&amp;batch, <span class="hljs-number">100</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(tx *gorm.DB, batchNum <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">error</span> {
		<span class="hljs-keyword">for</span> _, u := <span class="hljs-keyword">range</span> batch {
			fmt.Println(<span class="hljs-string">"Processing:"</span>, u.Name)
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
	})
</code></pre>
<blockquote>
<p>ğŸ§  å†…å­˜å‹å¥½ï¼Œé€‚åˆå¤„ç†ç™¾ä¸‡çº§ç”¨æˆ·æ•°æ®ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-11">âš ï¸ æ³¨æ„ï¼šè¿™äº›æ–¹æ³•è¢«ç§»é™¤äº†ï¼</h2>
<p>ä¸ºäº†é˜²æ­¢è¯¯ç”¨ï¼Œæ³›å‹ç‰ˆ <strong>æ•…æ„ç§»é™¤äº†</strong> ä¸€äº›é«˜é£é™©æ–¹æ³•ï¼š</p>
<ul>
<li><code>Save()</code> â†’ æ”¹ç”¨ <code>Create</code> / <code>Update</code></li>
<li><code>FirstOrCreate()</code> â†’ æ”¹ç”¨ <code>First</code> + <code>Create</code> æ‰‹åŠ¨æ§åˆ¶</li>
</ul>
<blockquote>
<p>ğŸ¤” ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º <code>Save</code> ä¼šæ ¹æ®ä¸»é”®è‡ªåŠ¨åˆ¤æ–­æ˜¯æ’å…¥è¿˜æ˜¯æ›´æ–°ï¼Œå®¹æ˜“å¼•å‘æ„å¤–è¦†ç›–ã€‚<br/>
æ˜¾å¼æ¯”éšå¼æ›´å®‰å…¨ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-12">ğŸ› ï¸ è¿›é˜¶å½©è›‹ï¼šæœªæ¥å°†æ”¯æŒä»£ç ç”Ÿæˆï¼</h2>
<p>GORM æ­£åœ¨å¼€å‘ CLI å·¥å…·ï¼Œè®©ä½ ç”¨æ¥å£å®šä¹‰æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> UserQuery <span class="hljs-keyword">interface</span> {
	GetByEmail(email <span class="hljs-type">string</span>) (*User, <span class="hljs-type">error</span>)
	ListActive() ([]User, <span class="hljs-type">error</span>)
}
</code></pre>
<p>ç„¶åè‡ªåŠ¨ç”Ÿæˆç±»å‹å®‰å…¨çš„å®ç°ï¼å½»åº•å‘Šåˆ«æ‰‹å†™ SQL å­—ç¬¦ä¸² ğŸ˜</p>
<hr/>
<h2 data-id="heading-13">ğŸ‰ ç»“è¯­</h2>
<p>GORM çš„æ³›å‹ API ä¸æ˜¯â€œç‚«æŠ€â€ï¼Œè€Œæ˜¯<strong>ä¸ºå¤§å‹é¡¹ç›®ä¿é©¾æŠ¤èˆª</strong>ï¼š</p>
<ul>
<li>âœ… ç¼–è¯‘æœŸç±»å‹æ£€æŸ¥</li>
<li>âœ… æ›´å¥½çš„ IDE æ”¯æŒ</li>
<li>âœ… å‡å°‘è¿è¡Œæ—¶é”™è¯¯</li>
<li>âœ… ä¸æ—§ä»£ç å®Œå…¨å…¼å®¹ï¼ˆå¯æ··ç”¨ï¼ï¼‰</li>
</ul>
<blockquote>
<p><strong>å»ºè®®</strong>ï¼šæ–°é¡¹ç›®ç›´æ¥ç”¨æ³›å‹ç‰ˆï¼Œè€é¡¹ç›®é€æ­¥è¿ç§»ã€‚<br/>
å°±åƒä»â€œæ‰‹å†™ SQLâ€å‡çº§åˆ°â€œORMâ€ï¼Œå†ä»â€œé€šç”¨ ORMâ€å‡çº§åˆ°â€œæ³›å‹ ORMâ€â€”â€”æ¯ä¸€æ­¥éƒ½æ›´å®‰å…¨ã€æ›´é«˜æ•ˆï¼</p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœåŠ¡å™¨ç›´ä¼ æ–‡ä»¶åˆ° Slackï¼šç»•è¿‡æœ¬åœ°ç½‘ç»œç“¶é¢ˆçš„å®æˆ˜æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7601169987412230182</link>    <guid>https://juejin.cn/post/7601169987412230182</guid>    <pubDate>2026-02-01T01:42:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601169987412230182" data-draft-id="7601229476794990642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœåŠ¡å™¨ç›´ä¼ æ–‡ä»¶åˆ° Slackï¼šç»•è¿‡æœ¬åœ°ç½‘ç»œç“¶é¢ˆçš„å®æˆ˜æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-01T01:42:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="puresai"/> <meta itemprop="url" content="https://juejin.cn/user/1398234520760856"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœåŠ¡å™¨ç›´ä¼ æ–‡ä»¶åˆ° Slackï¼šç»•è¿‡æœ¬åœ°ç½‘ç»œç“¶é¢ˆçš„å®æˆ˜æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1398234520760856/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    puresai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T01:42:34.000Z" title="Sun Feb 01 2026 01:42:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ä¸€æ®µæ—¶é—´ç»å¸¸æœ‰ä¸€äº›<strong>æ•°æ®å¯¼å‡ºç›¸å…³çš„å·¥ä½œ</strong>ï¼Œéœ€è¦ä»æœåŠ¡å™¨å¯¼å‡º CSV / Excel ç­‰æ–‡ä»¶ç»™ Sales åŒå­¦æŸ¥çœ‹ï¼Œè€Œ Sales çš„æ—¥å¸¸æ²Ÿé€šåŸºæœ¬éƒ½åœ¨ <strong>Slack</strong> ä¸Šå®Œæˆã€‚</p>
<p>å¦‚æœé‡‡ç”¨ä¼ ç»Ÿæ–¹å¼ï¼š</p>
<blockquote>
<p>æœåŠ¡å™¨ â†’ ä¸‹è½½åˆ°æœ¬åœ° â†’ å†ä¸Šä¼ åˆ° Slack</p>
</blockquote>
<p>é—®é¢˜éå¸¸æ˜æ˜¾ï¼š</p>
<ul>
<li>æ–‡ä»¶ç¨å¾®ä¸€å¤§ï¼Œä¸‹è½½ + ä¸Šä¼ éå¸¸æ…¢</li>
<li>ä¸‹åˆ 4 ç‚¹ä¹‹åç½‘é€Ÿæ˜æ˜¾ä¸‹é™ï¼ˆå¯èƒ½æ”¾å¯’å‡äº† ğŸ¤·ï¼‰</li>
<li>ä¸¥é‡ä¾èµ–æœ¬åœ°ç½‘ç»œï¼Œæ•ˆç‡ä¸å¯æ§</li>
<li>æ“ä½œæ­¥éª¤å¤šï¼Œä¸åˆ©äºé‡å¤æ‰§è¡Œ</li>
</ul>
<p>å› æ­¤å°±äº§ç”Ÿäº†ä¸€ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•ï¼š</p>
<blockquote>
<p><strong>èƒ½ä¸èƒ½è®©æœåŠ¡å™¨ç›´æ¥æŠŠæ–‡ä»¶ä¼ åˆ° Slackï¼Ÿ</strong></p>
</blockquote>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>å®Œå…¨å¯ä»¥ï¼Œè€Œä¸”å®ç°æˆæœ¬å¾ˆä½ã€‚</strong></p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ•´ä½“æ€è·¯</h2>
<p>æ ¸å¿ƒæ€è·¯å¾ˆç®€å•ï¼š</p>
<ul>
<li>æ–‡ä»¶æœ¬èº«å°±åœ¨æœåŠ¡å™¨ä¸Š</li>
<li>Slack æä¾›äº†å®˜æ–¹ API ç”¨äºæ–‡ä»¶ä¸Šä¼ </li>
<li>åœ¨æœåŠ¡å™¨ä¸Šé€šè¿‡è„šæœ¬ï¼Œç›´æ¥è°ƒç”¨ Slack API ä¸Šä¼ æ–‡ä»¶</li>
</ul>
<p>è¿™æ ·å¯ä»¥åšåˆ°ï¼š</p>
<ul>
<li>æ–‡ä»¶ <strong>ä¸ç»è¿‡æœ¬åœ°</strong></li>
<li>å®Œå…¨ä¾èµ–æœåŠ¡å™¨ç½‘ç»œ</li>
<li>é€‚åˆå¤§æ–‡ä»¶ã€æ‰¹é‡å¯¼å‡º</li>
<li>å¯è„šæœ¬åŒ–ã€å¯è‡ªåŠ¨åŒ–</li>
</ul>
<p>æœ€ç»ˆæ•°æ®æµå˜ä¸ºï¼š</p>
<blockquote>
<p>æœåŠ¡å™¨ â†’ Slack</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€åˆ›å»º Slack App</h2>
<p>é¦–å…ˆéœ€è¦ä¸€ä¸ª Slack Appï¼Œç”¨äºè·å–ä¸Šä¼ æ–‡ä»¶æ‰€éœ€çš„ Tokenã€‚</p>
<h3 data-id="heading-2">1. æ–°å»º App</h3>
<p>è®¿é—®ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.slack.com%2Fapps" target="_blank" title="https://api.slack.com/apps" ref="nofollow noopener noreferrer">api.slack.com/apps</a></p>
<p>ç‚¹å‡» <strong>Create New App</strong>ï¼Œé€‰æ‹©ä½ çš„ Workspaceã€‚</p>
<hr/>
<h3 data-id="heading-3">2. é…ç½® OAuth &amp; Permissions</h3>
<p>åœ¨ <strong>OAuth &amp; Permissions</strong> ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å¸¸ç”¨æƒé™ï¼ˆæ ¹æ®å®é™…éœ€è¦è°ƒæ•´ï¼‰ï¼š</p>
<ul>
<li><code>files:write</code></li>
<li><code>chat:write</code></li>
<li><code>channels:read</code>ï¼ˆå¦‚æœéœ€è¦ï¼‰</li>
</ul>
<p>é…ç½®å®Œæˆåï¼Œå®‰è£… App åˆ° Workspaceï¼Œå³å¯æ‹¿åˆ°ï¼š</p>
<ul>
<li><strong>Bot User OAuth Token</strong></li>
<li>æ ¼å¼ä¸€èˆ¬ä¸ºï¼š<code>xoxb-xxxx</code></li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€æœåŠ¡å™¨ä¸Šä¼ è„šæœ¬</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ª <strong>å¯ç›´æ¥åœ¨æœåŠ¡å™¨è¿è¡Œçš„ Python è„šæœ¬</strong>ï¼Œç”¨äºï¼š</p>
<ul>
<li>ä¸Šä¼ æ–‡ä»¶åˆ°æŒ‡å®š Slack Channel</li>
<li>æ”¯æŒ Threadï¼ˆå¯ä¼ æ¶ˆæ¯é“¾æ¥ï¼‰</li>
<li>æ”¯æŒ @ æŒ‡å®šç”¨æˆ·</li>
<li>ä¸Šä¼ å®Œæˆåè¾“å‡ºæ–‡ä»¶é“¾æ¥</li>
</ul>
<h3 data-id="heading-5">1. è„šæœ¬ä»£ç </h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-comment"># -*- coding: utf-8 -*-</span>
<span class="hljs-comment"># file_uploader.py</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">from</span> slack_sdk <span class="hljs-keyword">import</span> WebClient
<span class="hljs-keyword">import</span> config

SLACK_TOKEN = config.slack_token
DEFAULT_MENTION = <span class="hljs-string">"xxxx"</span>

<span class="hljs-comment"># ---------------- utils ----------------</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">msg: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""Print timestamped logs to stdout."""</span>
    ts = time.strftime(<span class="hljs-string">"%Y-%m-%d %H:%M:%S"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[<span class="hljs-subst">{ts}</span>] <span class="hljs-subst">{msg}</span>"</span>, flush=<span class="hljs-literal">True</span>)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_thread_ts</span>(<span class="hljs-params">thread_link: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""
    Convert a Slack message link to thread_ts.
    Example:
    https://workspace.slack.com/archives/xxxx/p1731398999934122
    Returns:
    1731398999.934122
    """</span>
    <span class="hljs-keyword">match</span> = re.search(<span class="hljs-string">r'/p(\d{16})'</span>, thread_link)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">match</span>:
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"Invalid Slack message link: <span class="hljs-subst">{thread_link}</span>"</span>)
    ts_raw = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{ts_raw[:-<span class="hljs-number">6</span>]}</span>.<span class="hljs-subst">{ts_raw[-<span class="hljs-number">6</span>:]}</span>"</span>


<span class="hljs-comment"># ---------------- main ----------------</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sys.argv) &lt; <span class="hljs-number">3</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Usage: python file_uploader.py &lt;channel_id&gt; &lt;file_path&gt; [thread_link_or_ts] [user_ids...]"</span>)
        sys.exit(<span class="hljs-number">1</span>)

    channel_id = sys.argv[<span class="hljs-number">1</span>]
    file_path = sys.argv[<span class="hljs-number">2</span>]
    thread_input = sys.argv[<span class="hljs-number">3</span>] <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sys.argv) &gt; <span class="hljs-number">3</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
    user_ids = sys.argv[<span class="hljs-number">4</span>:] <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sys.argv) &gt; <span class="hljs-number">4</span> <span class="hljs-keyword">else</span> [DEFAULT_MENTION]

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.isfile(file_path):
        <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"File not found"</span>)

    filename = os.path.basename(file_path)
    file_size = os.path.getsize(file_path)

    thread_ts = <span class="hljs-literal">None</span>
    <span class="hljs-keyword">if</span> thread_input:
        <span class="hljs-keyword">if</span> thread_input.startswith(<span class="hljs-string">"http"</span>):
            thread_ts = parse_thread_ts(thread_input)
        <span class="hljs-keyword">else</span>:
            thread_ts = thread_input

    log(<span class="hljs-string">f"Preparing to upload: <span class="hljs-subst">{filename}</span>"</span>)
    log(<span class="hljs-string">f"File size: <span class="hljs-subst">{file_size / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>:<span class="hljs-number">.2</span>f}</span> MB"</span>)

    client = WebClient(token=SLACK_TOKEN)
    mentions = <span class="hljs-string">" "</span>.join(<span class="hljs-string">f"&lt;@<span class="hljs-subst">{uid}</span>&gt;"</span> <span class="hljs-keyword">for</span> uid <span class="hljs-keyword">in</span> user_ids)

    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">"rb"</span>) <span class="hljs-keyword">as</span> f:
        kwargs = {
            <span class="hljs-string">"file"</span>: f,
            <span class="hljs-string">"title"</span>: filename,
            <span class="hljs-string">"channel"</span>: channel_id,
            <span class="hljs-string">"initial_comment"</span>: (
                <span class="hljs-string">f"âœ… New file uploaded: *<span class="hljs-subst">{filename}</span>* "</span>
                <span class="hljs-string">f"(<span class="hljs-subst">{file_size / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>:<span class="hljs-number">.2</span>f}</span> MB)\n<span class="hljs-subst">{mentions}</span>"</span>
            ),
        }
        <span class="hljs-keyword">if</span> thread_ts:
            kwargs[<span class="hljs-string">"thread_ts"</span>] = thread_ts

        response = client.files_upload_v2(**kwargs)

    file_info = response[<span class="hljs-string">"file"</span>]
    log(<span class="hljs-string">"âœ… Upload completed successfully"</span>)
    log(<span class="hljs-string">f"ğŸ“ File link: <span class="hljs-subst">{file_info.get(<span class="hljs-string">'permalink'</span>)}</span>"</span>)


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h2 data-id="heading-6">å››ã€è¿è¡Œæ–¹å¼</h2>
<p>åŸºæœ¬ç”¨æ³•</p>
<pre><code class="hljs language-bash" lang="bash">python3 file_uploader.py &lt;channel_id&gt; &lt;file_path&gt;
</code></pre>
<p>ä¸Šä¼ åˆ°æŒ‡å®š Threadï¼ˆæ¨èï¼‰</p>
<pre><code class="hljs language-bash" lang="bash">python3 file_uploader.py \
  channel_id \
  /data/sai.csv \
  https://contactout.slack.com/archives/xxx/p1769005211787589
</code></pre>
<p>è„šæœ¬ä¼šè‡ªåŠ¨è§£æ Slack æ¶ˆæ¯é“¾æ¥ï¼Œè½¬æ¢ä¸º thread_tsã€‚</p>
<h2 data-id="heading-7">äº”ã€æ•ˆæœè¯´æ˜</h2>
<p>æ–‡ä»¶ç›´æ¥ä»æœåŠ¡å™¨ä¸Šä¼ åˆ° Slackï¼Œä¸ä¾èµ–æœ¬åœ°ç½‘ç»œï¼Œä¸Šä¼ å®Œæˆåï¼ŒSales å¯ç«‹å³åœ¨ Slack ä¸­ä¸‹è½½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æå®šè®¢å•è¶…æ—¶è‡ªåŠ¨å–æ¶ˆï¼šåŸºäº Redis ZSet å®ç°çš„é«˜æ€§èƒ½å»¶è¿Ÿé˜Ÿåˆ—ï¼ˆGo è¯­è¨€å®æˆ˜ï¼‰]]></title>    <link>https://juejin.cn/post/7601175299010789391</link>    <guid>https://juejin.cn/post/7601175299010789391</guid>    <pubDate>2026-02-01T03:33:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601175299010789391" data-draft-id="7601046076944138255" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æå®šè®¢å•è¶…æ—¶è‡ªåŠ¨å–æ¶ˆï¼šåŸºäº Redis ZSet å®ç°çš„é«˜æ€§èƒ½å»¶è¿Ÿé˜Ÿåˆ—ï¼ˆGo è¯­è¨€å®æˆ˜ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-01T03:33:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Kevin666"/> <meta itemprop="url" content="https://juejin.cn/user/1549628692501449"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æå®šè®¢å•è¶…æ—¶è‡ªåŠ¨å–æ¶ˆï¼šåŸºäº Redis ZSet å®ç°çš„é«˜æ€§èƒ½å»¶è¿Ÿé˜Ÿåˆ—ï¼ˆGo è¯­è¨€å®æˆ˜ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1549628692501449/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Kevin666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T03:33:27.000Z" title="Sun Feb 01 2026 03:33:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°â€œå»¶è¿Ÿå¤„ç†â€çš„éœ€æ±‚ã€‚æœ€ç»å…¸çš„åœºæ™¯è«è¿‡äº <strong>ç”µå•†è®¢å•æ”¯ä»˜è¶…æ—¶è‡ªåŠ¨å–æ¶ˆ</strong>ï¼šç”¨æˆ·ä¸‹å•åï¼Œå¦‚æœ 30 åˆ†é’Ÿå†…æœªå®Œæˆæ”¯ä»˜ï¼Œç³»ç»Ÿéœ€è¦è‡ªåŠ¨å–æ¶ˆè®¢å•å¹¶é‡Šæ”¾åº“å­˜ã€‚</p>
<p>è™½ç„¶ RabbitMQã€RocketMQ ç­‰æ¶ˆæ¯é˜Ÿåˆ—æä¾›äº†å»¶è¿Ÿæ¶ˆæ¯çš„åŠŸèƒ½ï¼Œä½†åœ¨å¾ˆå¤šè½»é‡çº§åœºæ™¯æˆ–åŸºç¡€è®¾æ–½å—é™çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨æˆ‘ä»¬æ‰‹å¤´å·²æœ‰çš„ <strong>Redis</strong> æ¥å®ç°ä¸€ä¸ªå»¶è¿Ÿé˜Ÿåˆ—ï¼Œæ—¢ç®€å•åˆé«˜æ•ˆã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±é€šè¿‡ Go è¯­è¨€ï¼Œç»“åˆ Redis çš„ <code>Sorted Set</code>ï¼ˆæœ‰åºé›†åˆï¼‰æ•°æ®ç»“æ„ï¼Œæ‰‹å†™ä¸€ä¸ªç”Ÿäº§çº§çš„å»¶è¿Ÿé˜Ÿåˆ—ã€‚</p>
<h2 data-id="heading-0">æ ¸å¿ƒåŸç†ï¼šRedis ZSet</h2>
<p>Redis çš„ <code>ZSet</code> æ˜¯ä¸€ä¸ªæœ‰åºé›†åˆï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ª <code>Score</code>ï¼ˆåˆ†å€¼ï¼‰ã€‚</p>
<p><strong>è®¾è®¡æ€è·¯ï¼š</strong></p>
<ol>
<li>æˆ‘ä»¬å°† <strong>ä»»åŠ¡æ‰§è¡Œçš„æ—¶é—´æˆ³</strong> ä½œä¸º <code>Score</code>ã€‚</li>
<li>å°† <strong>ä»»åŠ¡çš„å…·ä½“å†…å®¹</strong>ï¼ˆå¦‚è®¢å•IDæˆ–JSONç»“æ„ä½“ï¼‰ä½œä¸º <code>Member</code>ã€‚</li>
<li>æ¶ˆè´¹è€…å¯åŠ¨ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œä¸æ–­é€šè¿‡ <code>ZRangeByScore</code> æŸ¥è¯¢ <code>Score &lt;= å½“å‰æ—¶é—´æˆ³</code> çš„å…ƒç´ ã€‚</li>
<li>æŸ¥è¯¢åˆ°çš„å…ƒç´ å³ä¸ºâ€œåˆ°æœŸå¯æ‰§è¡Œâ€çš„ä»»åŠ¡ã€‚</li>
</ol>
<h2 data-id="heading-1">åœºæ™¯è®¾å®š</h2>
<p>å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ª <strong>â€œæŠ¢ç¥¨ç³»ç»Ÿâ€</strong>ã€‚</p>
<ul>
<li>ç”¨æˆ·é”ç¥¨åï¼Œç³»ç»Ÿç”Ÿæˆä¸€ä¸ªæ£€æŸ¥ä»»åŠ¡ã€‚</li>
<li>ä»»åŠ¡éœ€è¦åœ¨ 15 åˆ†é’Ÿåè§¦å‘ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ”¯ä»˜ã€‚</li>
<li>å¦‚æœæœªæ”¯ä»˜ï¼Œåˆ™å–æ¶ˆè®¢å•ï¼›å¦‚æœå·²æ”¯ä»˜ï¼Œåˆ™æ ‡è®°å®Œæˆã€‚</li>
<li><strong>è¿›é˜¶é€»è¾‘</strong>ï¼šå¦‚æœæ”¯ä»˜çŠ¶æ€æ˜¯â€œå¤„ç†ä¸­â€ï¼ˆä¾‹å¦‚é“¶è¡Œå›è°ƒå»¶è¿Ÿï¼‰ï¼Œæˆ‘ä»¬éœ€è¦è®©ä»»åŠ¡â€œå†æ¬¡å»¶è¿Ÿâ€ä¸€å°æ®µæ—¶é—´ï¼ˆé‡è¯•ï¼‰ï¼Œè€Œä¸æ˜¯ç«‹å³å–æ¶ˆã€‚</li>
</ul>
<h2 data-id="heading-2">ä»£ç å®ç°</h2>
<h3 data-id="heading-3">1. å®šä¹‰ä»»åŠ¡ç»“æ„ä¸å¸¸é‡</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰å­˜å…¥ Redis çš„æ•°æ®ç»“æ„ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"context"</span>
    <span class="hljs-string">"encoding/json"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"time"</span>

    <span class="hljs-string">"github.com/go-redis/redis/v8"</span> <span class="hljs-comment">// å‡è®¾ä½¿ç”¨ go-redis</span>
)

<span class="hljs-keyword">const</span> (
    OrderDelayQueueKey = <span class="hljs-string">"ticket_order_delay_zset"</span> <span class="hljs-comment">// Redis Key</span>
    MaxRetryDuration   = <span class="hljs-number">30</span> * <span class="hljs-number">60</span>                   <span class="hljs-comment">// æœ€å¤§é‡è¯•/ç­‰å¾…æ—¶é—´ï¼š30åˆ†é’Ÿ</span>
)

<span class="hljs-comment">// OrderTask å­˜å‚¨åœ¨ Redis ZSet Member ä¸­çš„ç»“æ„</span>
<span class="hljs-keyword">type</span> OrderTask <span class="hljs-keyword">struct</span> {
    OrderID    <span class="hljs-type">string</span> <span class="hljs-string">`json:"order_id"`</span>
    UserID     <span class="hljs-type">int64</span>  <span class="hljs-string">`json:"user_id"`</span>
    CreateTime <span class="hljs-type">int64</span>  <span class="hljs-string">`json:"create_time"`</span> <span class="hljs-comment">// ä»»åŠ¡é¦–æ¬¡åˆ›å»ºæ—¶é—´</span>
    RetryCount <span class="hljs-type">int</span>    <span class="hljs-string">`json:"retry_count"`</span> <span class="hljs-comment">// é‡è¯•æ¬¡æ•°</span>
}
</code></pre>
<h3 data-id="heading-4">2. ç”Ÿäº§è€…ï¼šæŠ•é€’å»¶è¿Ÿä»»åŠ¡</h3>
<p>å½“ç”¨æˆ·ä¸‹å•æˆåŠŸåï¼Œæˆ‘ä»¬å°†ä»»åŠ¡åŠ å…¥ Redisã€‚è¿™é‡Œæˆ‘ä»¬å°† <code>Score</code> è®¾ç½®ä¸º <code>å½“å‰æ—¶é—´ + å»¶è¿Ÿæ—¶é—´</code>ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// AddOrderCheckTask æ·»åŠ è®¢å•æ£€æŸ¥ä»»åŠ¡</span>
<span class="hljs-comment">// delaySeconds: é¦–æ¬¡æ£€æŸ¥çš„å»¶è¿Ÿæ—¶é—´ï¼ˆä¾‹å¦‚ 900ç§’/15åˆ†é’Ÿï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">AddOrderCheckTask</span><span class="hljs-params">(rdb *redis.Client, orderID <span class="hljs-type">string</span>, userID <span class="hljs-type">int64</span>, delaySeconds <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">error</span> {
    now := time.Now().Unix()
    
    task := &amp;OrderTask{
        OrderID:    orderID,
        UserID:     userID,
        CreateTime: now,
        RetryCount: <span class="hljs-number">0</span>,
    }

    taskJson, _ := json.Marshal(task)

    <span class="hljs-comment">// ZAdd: Score = æ‰§è¡Œæ—¶é—´ç‚¹</span>
    err := rdb.ZAdd(context.Background(), OrderDelayQueueKey, &amp;redis.Z{
        Score:  <span class="hljs-type">float64</span>(now + <span class="hljs-type">int64</span>(delaySeconds)), 
        Member: taskJson,
    }).Err()

    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"Failed to add delay task: %v\n"</span>, err)
        <span class="hljs-keyword">return</span> err
    }
    
    fmt.Printf(<span class="hljs-string">"Order %s added to delay queue, exec at: %v\n"</span>, orderID, time.Unix(now+<span class="hljs-type">int64</span>(delaySeconds), <span class="hljs-number">0</span>))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}
</code></pre>
<h3 data-id="heading-5">3. æ¶ˆè´¹è€…ï¼šè½®è¯¢ä¸ä»»åŠ¡å¤„ç†</h3>
<p>è¿™æ˜¯å»¶è¿Ÿé˜Ÿåˆ—çš„æ ¸å¿ƒå¼•æ“ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåå°åç¨‹ä¸æ–­è½®è¯¢ã€‚</p>
<p><strong>å…³é”®ç‚¹ä¼˜åŒ–ï¼š</strong>
ä¸ºäº†é˜²æ­¢å¤šä¸ªæ¶ˆè´¹è€…é‡å¤å¤„ç†åŒä¸€ä¸ªä»»åŠ¡ï¼Œæˆ‘ä»¬åœ¨è·å–åˆ°ä»»åŠ¡åˆ—è¡¨åï¼Œä½¿ç”¨ <code>ZRem</code> è¿›è¡ŒåŸå­åˆ é™¤ã€‚åªæœ‰ <code>ZRem</code> æˆåŠŸï¼ˆè¿”å›ç§»é™¤æ•°é‡ &gt; 0ï¼‰çš„æ¶ˆè´¹è€…ï¼Œæ‰æœ‰èµ„æ ¼å¤„ç†è¯¥ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// StartDelayQueueWorker å¯åŠ¨æ¶ˆè´¹è€…è¿›ç¨‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">StartDelayQueueWorker</span><span class="hljs-params">(rdb *redis.Client)</span></span> {
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        ctx := context.Background()
        <span class="hljs-keyword">for</span> {
            now := time.Now().Unix()
            
            <span class="hljs-comment">// 1. æ‹‰å–æ‰€æœ‰ score &lt;= å½“å‰æ—¶é—´ çš„ä»»åŠ¡</span>
            <span class="hljs-comment">// Limit é™åˆ¶æ¯æ¬¡æ‹‰å–çš„æ•°é‡ï¼Œé˜²æ­¢ä¸€æ¬¡å¤„ç†å¤ªå¤šå¯¼è‡´é˜»å¡</span>
            vals, err := rdb.ZRangeByScoreWithScores(ctx, OrderDelayQueueKey, &amp;redis.ZRangeBy{
                Min:   <span class="hljs-string">"-inf"</span>,
                Max:   fmt.Sprintf(<span class="hljs-string">"%d"</span>, now),
                Count: <span class="hljs-number">10</span>, <span class="hljs-comment">// æ¯æ¬¡å–10ä¸ª</span>
            }).Result()

            <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
                fmt.Printf(<span class="hljs-string">"Redis error: %v\n"</span>, err)
                time.Sleep(time.Second) <span class="hljs-comment">// å‘ç”Ÿé”™è¯¯ä¼‘çœ ä¸€ä¼š</span>
                <span class="hljs-keyword">continue</span>
            }

            <span class="hljs-comment">// å¦‚æœæ²¡æœ‰åˆ°æœŸä»»åŠ¡ï¼Œä¼‘çœ ä¸€å°ä¼šé¿å…ç©ºè½®è¯¢æ¶ˆè€— CPU</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(vals) == <span class="hljs-number">0</span> {
                time.Sleep(time.Second) 
                <span class="hljs-keyword">continue</span>
            }

            <span class="hljs-comment">// 2. å¹¶å‘å¤„ç†è¿™ä¸€æ‰¹ä»»åŠ¡</span>
            <span class="hljs-keyword">for</span> _, z := <span class="hljs-keyword">range</span> vals {
                <span class="hljs-keyword">go</span> processTask(ctx, rdb, z)
            }
        }
    }()
}
</code></pre>
<h3 data-id="heading-6">4. æ ¸å¿ƒé€»è¾‘ï¼šå¤„ç†ã€é‡è¯•ä¸å®Œæˆ</h3>
<p>è¿™é‡Œæ¨¡æ‹Ÿäº†åŸä»£ç ä¸­ç²¾é«“çš„ <strong>â€œæ¡ä»¶æ£€æŸ¥ä¸åŠ¨æ€é‡å…¥é˜Ÿâ€</strong> é€»è¾‘ã€‚</p>
<p>å¦‚æœè®¢å•è¿˜æœªæ”¯ä»˜ï¼Œä½†è¿˜æ²¡åˆ°æœ€ç»ˆçš„å¼ºåˆ¶å–æ¶ˆæ—¶é—´ï¼ˆä¾‹å¦‚é“¶è¡Œæ¥å£è¶…æ—¶ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—ä¸€ä¸ªæ–°çš„å»¶è¿Ÿæ—¶é—´ï¼ŒæŠŠä»»åŠ¡é‡æ–°æ”¾å› Redisï¼Œå®ç° <strong>é˜¶æ¢¯å¼é‡è¯•</strong>ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">processTask</span><span class="hljs-params">(ctx context.Context, rdb *redis.Client, z redis.Z)</span></span> {
    <span class="hljs-comment">// A. æŠ¢å ä»»åŠ¡ï¼šåˆ©ç”¨ ZREM çš„åŸå­æ€§é˜²æ­¢å¤šæ¶ˆè´¹è€…å¹¶å‘å†²çª</span>
    <span class="hljs-comment">// åªæœ‰ç§»é™¤æˆåŠŸçš„é‚£ä¸ªåç¨‹æ‰èƒ½ç»§ç»­å‘ä¸‹æ‰§è¡Œ</span>
    deleted, err := rdb.ZRem(ctx, OrderDelayQueueKey, z.Member).Result()
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> || deleted == <span class="hljs-number">0</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-comment">// è¢«å…¶ä»–æ¶ˆè´¹è€…æŠ¢äº†ï¼Œæˆ–è€… Redis å¼‚å¸¸</span>
    }

    <span class="hljs-comment">// B. è§£æä»»åŠ¡æ•°æ®</span>
    <span class="hljs-keyword">var</span> task OrderTask
    taskStr, _ := z.Member.(<span class="hljs-type">string</span>)
    <span class="hljs-keyword">if</span> err := json.Unmarshal([]<span class="hljs-type">byte</span>(taskStr), &amp;task); err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"Invalid task format: %v\n"</span>, taskStr)
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// C. æ¨¡æ‹Ÿè°ƒç”¨ä¸šåŠ¡æœåŠ¡æ£€æŸ¥è®¢å•çŠ¶æ€</span>
    orderStatus := mockCheckOrderStatus(task.OrderID)

    now := time.Now().Unix()
    
    <span class="hljs-comment">// æƒ…å†µ1ï¼šè®¢å•å·²æ”¯ä»˜ -&gt; ä»»åŠ¡ç»“æŸ</span>
    <span class="hljs-keyword">if</span> orderStatus == <span class="hljs-string">"PAID"</span> {
        fmt.Printf(<span class="hljs-string">"Order %s is PAID. Task done.\n"</span>, task.OrderID)
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// æƒ…å†µ2ï¼šè®¢å•æœªæ”¯ä»˜ï¼Œä¸”è¶…è¿‡äº†æœ€å¤§ç­‰å¾…æ—¶é—´ -&gt; æ‰§è¡Œå–æ¶ˆé€»è¾‘</span>
    <span class="hljs-keyword">if</span> now - task.CreateTime &gt;= MaxRetryDuration {
        fmt.Printf(<span class="hljs-string">"Order %s timeout. Cancelling order...\n"</span>, task.OrderID)
        <span class="hljs-comment">// doCancelOrder(task.OrderID)</span>
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// æƒ…å†µ3ï¼šè®¢å•çŠ¶æ€æœªçŸ¥æˆ–æƒ³ç»™ç”¨æˆ·æ›´å¤šç¼“å†²ï¼ˆä¾‹å¦‚å¤„äºæ”¯ä»˜ä¸­ï¼‰ï¼Œä½†è¿˜æ²¡è¶…æ—¶</span>
    <span class="hljs-comment">// -&gt; é‡æ–°è®¡ç®—å»¶è¿Ÿæ—¶é—´ï¼Œæ”¾å›é˜Ÿåˆ— (Re-enqueue)</span>
    
    <span class="hljs-comment">// ç®€å•çš„é€€é¿ç­–ç•¥ï¼šæ¯æ¬¡å¤šç­‰ 30 ç§’</span>
    nextDelay := <span class="hljs-number">30</span>
    task.RetryCount++
    
    nextScore := <span class="hljs-type">float64</span>(now + <span class="hljs-type">int64</span>(nextDelay))
    
    fmt.Printf(<span class="hljs-string">"Order %s pending. Re-queueing for %d seconds later.\n"</span>, task.OrderID, nextDelay)
    
    rdb.ZAdd(ctx, OrderDelayQueueKey, &amp;redis.Z{
        Score:  nextScore,
        Member: z.Member, <span class="hljs-comment">// ä¿æŒ Member å†…å®¹ä¸å˜ï¼ˆæˆ–è€…æ›´æ–° RetryCount åé‡æ–° Marshalï¼‰</span>
    })
}

<span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡æ£€æŸ¥</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">mockCheckOrderStatus</span><span class="hljs-params">(orderID <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> {
    <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ˜¯ RPC è°ƒç”¨æˆ–æ•°æ®åº“æŸ¥è¯¢</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"PENDING"</span> 
}
</code></pre>
<h2 data-id="heading-7">æ–¹æ¡ˆæ€»ç»“</h2>
<h3 data-id="heading-8">ä¼˜ç‚¹</h3>
<ol>
<li><strong>è½»é‡çº§</strong>ï¼šä¸éœ€è¦å¼•å…¥ Kafka æˆ– RocketMQ è¿™æ ·åšé‡çš„ç»„ä»¶ï¼Œåªè¦æœ‰ Redis å°±èƒ½è·‘ã€‚</li>
<li><strong>çµæ´»æ€§</strong>ï¼šå¯ä»¥éšæ„æ§åˆ¶ <code>Score</code>ï¼Œå®ç°ä»»æ„æ—¶é—´çš„å»¶è¿Ÿï¼Œç”šè‡³æ”¯æŒåŠ¨æ€ä¿®æ”¹å»¶è¿Ÿæ—¶é—´ï¼ˆå¦‚ä¸Šè¿°ä»£ç ä¸­çš„é‡å…¥é˜Ÿé€»è¾‘ï¼‰ã€‚</li>
<li><strong>å¯è§†åŒ–</strong>ï¼šé€šè¿‡ Redis Desktop Manager å¯ä»¥ç›´æ¥çœ‹åˆ°å½“å‰æ’é˜Ÿçš„ä»»åŠ¡ï¼Œä¾¿äºè°ƒè¯•ã€‚</li>
</ol>
<h3 data-id="heading-9">æ³¨æ„äº‹é¡¹ï¼ˆå‘ç‚¹ï¼‰</h3>
<ol>
<li><strong>åŸå­æ€§é—®é¢˜</strong>ï¼šåœ¨ <code>ZRange</code> å’Œ <code>ZRem</code> ä¹‹é—´å­˜åœ¨æ—¶é—´çª—å£ã€‚å¦‚æœæ˜¯å¤šå®ä¾‹éƒ¨ç½²ï¼Œå¿…é¡»åƒä»£ç ä¸­é‚£æ ·ï¼Œé€šè¿‡ <code>ZRem</code> çš„è¿”å›å€¼åˆ¤æ–­æ˜¯å¦æŠ¢åˆ°äº†ä»»åŠ¡ï¼Œæˆ–è€…ä½¿ç”¨ Lua è„šæœ¬å°†â€œè·å–å¹¶åˆ é™¤â€åšæˆåŸå­æ“ä½œã€‚</li>
<li><strong>ç©ºè½®è¯¢å‹åŠ›</strong>ï¼šå½“é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œé¢‘ç¹çš„ <code>ZRange</code> ä¼šæµªè´¹ CPU å’Œ Redis QPSã€‚å»ºè®®åœ¨æ²¡æœ‰è·å–åˆ°æ•°æ®æ—¶åŠ ä¸Š <code>Sleep</code>ï¼ˆå¦‚ä»£ç ä¸­çš„ <code>time.Sleep(time.Second)</code>ï¼‰ã€‚</li>
<li><strong>å¤§Keyé£é™©</strong>ï¼šå¦‚æœç§¯å‹çš„ä»»åŠ¡æå¤šï¼ˆç™¾ä¸‡çº§ï¼‰ï¼Œ<code>ZSET</code> ä¼šå˜æˆå¤§ Keyï¼Œæ“ä½œæ€§èƒ½ä¸‹é™ã€‚æ­¤æ—¶å»ºè®®æŒ‰ç…§æ—¶é—´åˆ†æ¡¶ï¼ˆå¦‚ <code>queue_hour_1</code>, <code>queue_hour_2</code>ï¼‰æˆ–ä½¿ç”¨å¤šç»„ Key åˆ†ç‰‡ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-227 ç¦»çº¿æ•°ä»“-Flume 1.9.0 è‡ªå®šä¹‰æ‹¦æˆªå™¨å®æˆ˜ï¼šTAILDIR å¤šç›®å½•é‡‡é›†ï¼ŒæŒ‰ logtime/logtype å†™å…¥ HDFS åˆ†åŒº]]></title>    <link>https://juejin.cn/post/7601103779392766015</link>    <guid>https://juejin.cn/post/7601103779392766015</guid>    <pubDate>2026-02-01T06:55:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601103779392766015" data-draft-id="7601075423003508772" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-227 ç¦»çº¿æ•°ä»“-Flume 1.9.0 è‡ªå®šä¹‰æ‹¦æˆªå™¨å®æˆ˜ï¼šTAILDIR å¤šç›®å½•é‡‡é›†ï¼ŒæŒ‰ logtime/logtype å†™å…¥ HDFS åˆ†åŒº"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Apache Flume"/> <meta itemprop="datePublished" content="2026-02-01T06:55:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-227 ç¦»çº¿æ•°ä»“-Flume 1.9.0 è‡ªå®šä¹‰æ‹¦æˆªå™¨å®æˆ˜ï¼šTAILDIR å¤šç›®å½•é‡‡é›†ï¼ŒæŒ‰ logtime/logtype å†™å…¥ HDFS åˆ†åŒº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T06:55:45.000Z" title="Sun Feb 01 2026 06:55:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šFlume TAILDIR åŒæ—¶é‡‡é›†å¯åŠ¨æ—¥å¿—ä¸äº‹ä»¶æ—¥å¿—ï¼Œè¦æ±‚æŒ‰æ—¥å¿—å†…æ—¶é—´åˆ†åŒºã€æŒ‰æ¥æºåˆ†ç›®å½•è½ HDFSã€‚</li>
<li>ç»“è®ºï¼šç”¨è‡ªå®šä¹‰ Interceptor æŠ½å– logtimeï¼Œå¹¶ç”¨ filegroups headers æˆ–æ‹¦æˆªå™¨è¡¥é½ logtypeï¼ŒHDFS path é€šè¿‡ %{header} åŠ¨æ€è·¯ç”±ã€‚</li>
<li>äº§å‡ºï¼šä¸€å¥—å¯å¤ç”¨é…ç½®æ¨¡æ¿ + å¸¸è§å‘ä½é€ŸæŸ¥ï¼ˆç±»åŠ è½½ã€å ä½ç¬¦ã€æ»šåŠ¨ç­–ç•¥ã€æƒé™ä¸ positionFileï¼‰ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34b3b454b8664649be29da0c9ad0b6c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770533745&amp;x-signature=Pl0MFrxH4QZ3UJmK5cmEaxuUuq0%3D" alt="å¤§æ•°æ®-227 ç¦»çº¿æ•°ä»“-Flume 1.9.0 è‡ªå®šä¹‰æ‹¦æˆªå™¨å®æˆ˜ï¼šTAILDIR å¤šç›®å½•é‡‡é›†ï¼ŒæŒ‰ logtime/logtype å†™å…¥ HDFS åˆ†åŒº" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/057ba6b83e664d34b9d6891ea34c9696~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770533745&amp;x-signature=tqeSBu0oC7hE6WZAimvtfkcxYck%3D" alt="æ•°æ®ä»“åº“æ¶æ„å›¾" loading="lazy"/></p>
<h2 data-id="heading-1">è‡ªå®šä¹‰æ‹¦æˆªå™¨</h2>
<p>ï¼ˆç»­æ¥ä¸ŠèŠ‚ï¼Œä¸ŠèŠ‚å·²ç»åˆ°äº†æ‰“åŒ…çš„éƒ¨åˆ†ï¼‰</p>
<h3 data-id="heading-2">ä¸Šä¼ ç»“æœ</h3>
<p>å°†åˆšæ‰çš„æ‰“åŒ…ä¸Šä¼ åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼š
æˆ‘æ‹·è´çš„æ˜¯å¸¦ä¾èµ–çš„ï¼šâ€œflume-test-1.0-SNAPSHOT-jar-with-dependencies.jarâ€</p>
<pre><code class="hljs language-shell" lang="shell">/opt/servers/apache-flume-1.9.0-bin/lib/
</code></pre>
<h3 data-id="heading-3">æµ‹è¯•æ•ˆæœ</h3>
<p>æˆ‘ä»¬åˆ›å»ºåˆšæ‰è¯´çš„confæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">vim /opt/wzk/flume-conf/flumetest1.conf
</code></pre>
<p>ç¼–å†™çš„å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/965718ede5a04bbda8c08e91f69658d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770533745&amp;x-signature=GueTOnvo7VHrKq4svvZ%2BnXHRUV4%3D" alt="ç¦»çº¿æ•°ä»“ Flumeé…ç½®" loading="lazy"/>
å¯åŠ¨è¿›è¡Œæµ‹è¯•ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">flume-ng agent --conf-file /opt/wzk/flume-conf/flumetest1.conf -name a1 -Dflume.roog.logger=INFO,console
</code></pre>
<p>å¯åŠ¨ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0f12b2d3bbd44588b9d2e5b97467bfd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770533745&amp;x-signature=XMPb8h2fbJKhIC4q1j5n3a2w4Nw%3D" alt="ç¦»çº¿æ•°ä»“ Flumeå¯åŠ¨" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯åŠ¨ telnet æ¥ä¼ å…¥æ•°æ®ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">telnet h122.wzk.icu 9999
</code></pre>
<p>å¯åŠ¨ä¹‹åè¾“å…¥æ•°æ®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-number">2020</span><span class="hljs-number">-07</span><span class="hljs-number">-30</span> <span class="hljs-number">14</span><span class="hljs-punctuation">:</span><span class="hljs-number">18</span><span class="hljs-punctuation">:</span><span class="hljs-number">47.339</span> <span class="hljs-punctuation">[</span>main<span class="hljs-punctuation">]</span> INFO com.ecommerce.AppStart - <span class="hljs-punctuation">{</span><span class="hljs-attr">"app_active"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"app_active"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"json"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"entry"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"1"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"action"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"1"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"error_code"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"0"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"time"</span><span class="hljs-punctuation">:</span><span class="hljs-number">1596111888529</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"attr"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"area"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"æ³°å®‰"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"uid"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"2F10092A9"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"app_v"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"1.1.13"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"event_type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"common"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"device_id"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"1FB872-9A1009"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"os_type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"4.7.3"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"channel"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"DK"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"language"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"chinese"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"brand"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"iphone-9"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>

</code></pre>
<p>æ­¤æ—¶æ§åˆ¶å°çš„æ•°æ®å†…å®¹éƒ¨åˆ†ä¸ºï¼š</p>
<pre><code class="hljs language-shell" lang="shell">4/08/27 15:31:31 INFO source.NetcatSource: Source starting
24/08/27 15:31:31 INFO source.NetcatSource: Created serverSocket:sun.nio.ch.ServerSocketChannelImpl[/172.16.1.130:9999]
24/08/27 15:32:09 INFO sink.LoggerSink: Event: { headers:{logtime=2020-07-30} body: 32 30 32 30 2D 30 37 2D 33 30 20 31 34 3A 31 38 2020-07-30 14:18 }
</code></pre>
<p>å¯¹åº”çš„æˆªå›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f4d66a507904bff804ddabc3db3cd92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770533745&amp;x-signature=cTMT0YUufXrHF%2Ba7RXT7YeLZ5oc%3D" alt="ç¦»çº¿æ•°ä»“ æ—¥å¿—æŸ¥çœ‹" loading="lazy"/></p>
<h2 data-id="heading-4">é‡‡é›†å¯åŠ¨æ—¥å¿—ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼‰</h2>
<h3 data-id="heading-5">é…ç½®æ–‡ä»¶</h3>
<p>æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">vim /opt flume-log2hdfs2.conf
</code></pre>
<p>å†™å…¥çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-shell" lang="shell">a1.sources = r1
a1.sinks = k1
a1.channels = c1
<span class="hljs-meta prompt_"># </span><span class="bash">taildir <span class="hljs-built_in">source</span></span>
a1.sources.r1.type = TAILDIR
a1.sources.r1.positionFile = /opt/wzk/conf/startlog_position.json
a1.sources.r1.filegroups = f1
a1.sources.r1.filegroups.f1 = /opt/wzk/logs/start/.*log
a1.sources.r1.interceptors = i1
a1.sources.r1.interceptors.i1.type = icu.wzk.CustomerInterceptor$Builder
<span class="hljs-meta prompt_"># </span><span class="bash">memorychannel</span>
a1.channels.c1.type = memory
a1.channels.c1.capacity = 100000
a1.channels.c1.transactionCapacity = 2000
<span class="hljs-meta prompt_"># </span><span class="bash">hdfs sink</span>
a1.sinks.k1.type = hdfs
a1.sinks.k1.hdfs.path = /user/data/logs/start/dt=%{logtime}/
a1.sinks.k1.hdfs.filePrefix = startlog.
a1.sinks.k1.hdfs.fileType = DataStream
<span class="hljs-meta prompt_"># </span><span class="bash">é…ç½®æ–‡ä»¶æ»šåŠ¨æ–¹å¼ï¼ˆæ–‡ä»¶å¤§å°32Mï¼‰</span>
a1.sinks.k1.hdfs.rollSize = 33554432
a1.sinks.k1.hdfs.rollCount = 0
a1.sinks.k1.hdfs.rollInterval = 0
a1.sinks.k1.hdfs.idleTimeout = 0
a1.sinks.k1.hdfs.minBlockReplicas = 1
<span class="hljs-meta prompt_"># </span><span class="bash">å‘hdfsä¸Šåˆ·æ–°çš„eventçš„ä¸ªæ•°</span>
a1.sinks.k1.hdfs.batchSize = 1000
<span class="hljs-meta prompt_"># </span><span class="bash">ä½¿ç”¨æœ¬åœ°æ—¶é—´</span>
<span class="hljs-meta prompt_"># </span><span class="bash">a1.sinks.k1.hdfs.useLocalTimeStamp = <span class="hljs-literal">true</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">Bind the <span class="hljs-built_in">source</span> and sink to the channel</span>
a1.sources.r1.channels = c1
a1.sinks.k1.channel = c1
</code></pre>
<p>å†…å®¹çš„æˆªå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0c6c3580d7f4e2f9b3aa385df353cae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770533745&amp;x-signature=I9uFoQAiFpKd8FOeWyZAsy6jyv8%3D" alt="ç¦»çº¿æ•°ä»“ Flume è‡ªå®šä¹‰æ‹¦æˆªå™¨" loading="lazy"/>
ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç»™sourceå¢åŠ è‡ªå®šä¹‰æ‹¦æˆªå™¨</li>
<li>å»æ‰æ—¶é—´æˆ³ a1.sinks.k1.hdfs.useLocalTimeStamp = true</li>
<li>æ ¹æ®headerä¸­çš„logtimeå†™æ–‡ä»¶</li>
</ul>
<h3 data-id="heading-6">æµ‹è¯•è¿è¡Œ</h3>
<pre><code class="hljs language-shell" lang="shell">flume-ng agent --conf-file /opt/wzk/flume-conf/flume-log2hdfs2.conf -name a1 -Dflume.roog.logger=INFO,console
</code></pre>
<h3 data-id="heading-7">æ‹·è´æ—¥å¿—</h3>
<p>ä¿®æ”¹æ—¥å¿—çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">vim /opt/wzk/logs/start/test.log
</code></pre>
<p>ç»§ç»­å†™å…¥å¦‚ä¸‹çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">2020-07-30 14:18:47.339 [main] INFO com.ecommerce.AppStart - {"app_active":{"name":"app_active","json":{"entry":"1","action":"1","error_code":"0"},"time":1596111888529},"attr":{"area":"æ³°å®‰","uid":"2F10092A9","app_v":"1.1.13","event_type":"common","device_id":"1FB872-9A1009","os_type":"4.7.3","channel":"DK","language":"chinese","brand":"iphone-9"}}
</code></pre>
<p>å†™å…¥å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42335f141451429ca46b85c54df28cff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770533745&amp;x-signature=4qWmfxFgb04Hk904uvt1YIThVTA%3D" alt="ç¦»çº¿æ•°ä»“ Flume è‡ªå®šä¹‰æ‹¦æˆªå™¨" loading="lazy"/></p>
<h3 data-id="heading-8">æµ‹è¯•æ•ˆæœ</h3>
<p>å¯ä»¥çœ‹åˆ°HDFSä¸Šï¼Œå·²ç»æœ‰äº†è¯»å‡ºæ—¥å¿—ä¸­çš„æ—¶é—´çš„å†…å®¹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1310cb8f85b840febb23b4e36fa2d112~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770533745&amp;x-signature=pKT9emADSeikkfY%2Bkmb24kZlilg%3D" alt="ç¦»çº¿æ•°ä»“ æŸ¥çœ‹HDFS" loading="lazy"/></p>
<h2 data-id="heading-9">é‡‡é›†å¯åŠ¨æ—¥å¿—å’Œäº‹ä»¶æ—¥å¿—</h2>
<p>æœ¬ç³»ç»Ÿä¸­è¦é‡‡é›†ä¸¤ç§æ—¥å¿—ï¼š</p>
<ul>
<li>å¯åŠ¨æ—¥å¿—</li>
<li>äº‹ä»¶æ—¥å¿—
ä¸åŒçš„æ—¥å¿—æ”¾ç½®åœ¨ä¸åŒçš„ç›®å½•ä¸‹ï¼Œè¦æƒ³ä¸€æ¬¡æ‹¿åˆ°å…¨éƒ¨æ—¥å¿—éœ€è¦ç›‘æ§å¤šä¸ªç›®å½•ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/888b1c86fe3948f0902e25bd0fcb92a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770533745&amp;x-signature=xBn%2FBAKkegNPDw2gBUTGYl0TZGc%3D" alt="ç¦»çº¿æ•°ä»“ é‡‡é›†æµç¨‹" loading="lazy"/></li>
</ul>
<h3 data-id="heading-10">æ€»ä½“æ€è·¯</h3>
<ul>
<li>taildir ç›‘æ§å¤šä¸ªç›®å½•</li>
<li>ä¿®æ”¹è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Œä¸åŒæ¥æºçš„æ•°æ®åŠ ä¸Šä¸åŒæ ‡å¿—</li>
<li>HDFSã€Sink æ ¹æ®æ ‡å¿—å†™æ–‡ä»¶</li>
</ul>
<h3 data-id="heading-11">Agent ä»‹ç»</h3>
<p>Flume æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€é«˜å¯é ã€å¯ç”¨æ¥æ”¶é›†ã€èšåˆå’Œä¼ è¾“å¤§é‡æ—¥å¿—æ•°æ®çš„ç³»ç»Ÿã€‚åœ¨ Flume çš„ä½“ç³»ç»“æ„ä¸­ï¼ŒAgent æ˜¯ä¸€ä¸ªå…³é”®çš„ç»„ä»¶ã€‚æ¯ä¸ª Agent æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ JVM è¿›ç¨‹ï¼Œè´Ÿè´£ä»æ•°æ®æºè·å–æ•°æ®å¹¶å°†å…¶ä¼ é€’åˆ°ä¸‹æ¸¸ï¼ˆå¦‚æ–‡ä»¶ç³»ç»Ÿã€æ•°æ®åº“ã€æˆ–è€…å¦ä¸€ä¸ª Agentï¼‰</p>
<h3 data-id="heading-12">Agent çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†</h3>
<p>Flume Agent çš„æ¶æ„æ˜¯é«˜åº¦æ¨¡å—åŒ–çš„ï¼Œå®ƒç”±ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶æ„æˆï¼š</p>
<h4 data-id="heading-13">Source (æº)</h4>
<p>Source æ˜¯æ•°æ®æµçš„èµ·ç‚¹ï¼Œè´Ÿè´£æ¥æ”¶å¤–éƒ¨æ•°æ®ã€‚å®ƒæ”¯æŒå¤šç§æ•°æ®ä¼ è¾“åè®®å’Œæ ¼å¼ï¼Œèƒ½å¤Ÿä»æ—¥å¿—æ–‡ä»¶ã€ç½‘ç»œç«¯å£ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰æ•°æ®æºä¸­æ¥æ”¶äº‹ä»¶ã€‚</p>
<p>æ”¯æŒçš„ Source ç±»å‹ï¼š</p>
<ul>
<li>Avro Sourceï¼šæ¥æ”¶æ¥è‡ªå…¶ä»– Flume Agent çš„ Avro æ ¼å¼æ•°æ®ã€‚</li>
<li>Syslog Sourceï¼šå¤„ç† Syslog æ¶ˆæ¯ã€‚</li>
<li>Exec Sourceï¼šä»æœ¬åœ°å‘½ä»¤æˆ–è„šæœ¬çš„è¾“å‡ºä¸­è¯»å–æ•°æ®ã€‚</li>
<li>HTTP Sourceï¼šé€šè¿‡ HTTP æ¥å£æ¥æ”¶æ•°æ®ã€‚</li>
<li>Spooling Directory Sourceï¼šç›‘æ§ç‰¹å®šç›®å½•ä¸­çš„æ–‡ä»¶å¹¶è¯»å–å†…å®¹ã€‚</li>
</ul>
<h4 data-id="heading-14">Channel (é€šé“)</h4>
<p>Channel æ˜¯ Agent çš„æ•°æ®ç¼“å†²åŒºåŸŸï¼Œç”¨äºåœ¨ Source å’Œ Sink ä¹‹é—´æš‚å­˜äº‹ä»¶ã€‚Channel çš„è®¾è®¡ä¿è¯äº†åœ¨æ•°æ®æµåŠ¨ä¸­æ–­ï¼ˆå¦‚ç½‘ç»œæ•…éšœï¼‰æ—¶ï¼Œæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚</p>
<p>å¸¸è§çš„ Channel ç±»å‹ï¼š</p>
<ul>
<li>Memory Channelï¼šå°†äº‹ä»¶å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé€Ÿåº¦å¿«ï¼Œä½†å¯èƒ½ä¼šä¸¢å¤±æ•°æ®ï¼ˆå¦‚æœ Agent å´©æºƒï¼‰ã€‚</li>
<li>File Channelï¼šå°†äº‹ä»¶å­˜å‚¨åœ¨ç£ç›˜æ–‡ä»¶ä¸­ï¼Œæä¾›é«˜å¯é æ€§ä½†æ€§èƒ½è¾ƒä½ã€‚</li>
<li>Kafka Channelï¼šä½¿ç”¨ Kafka ä½œä¸ºä¸­è½¬é€šé“ï¼Œé€‚åˆåˆ†å¸ƒå¼åœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-15">Sink (æ¥æ”¶å™¨)</h4>
<p>Sink æ˜¯æ•°æ®æµçš„ç»ˆç‚¹ï¼Œè´Ÿè´£å°†äº‹ä»¶ä¼ é€’åˆ°ä¸‹æ¸¸å­˜å‚¨æˆ–å¤„ç†ç³»ç»Ÿã€‚</p>
<p>æ”¯æŒçš„ Sink ç±»å‹ï¼š</p>
<ul>
<li>HDFS Sinkï¼šå°†äº‹ä»¶å†™å…¥ Hadoop HDFSã€‚</li>
<li>Kafka Sinkï¼šå°†äº‹ä»¶å‘é€åˆ° Kafkaã€‚</li>
<li>Elasticsearch Sinkï¼šå°†äº‹ä»¶å†™å…¥ Elasticsearchã€‚</li>
<li>Logger Sinkï¼šå°†äº‹ä»¶è¾“å‡ºåˆ°æ—¥å¿—ã€‚</li>
<li>Avro Sinkï¼šå°†äº‹ä»¶ä¼ é€’åˆ°å¦ä¸€ä¸ª Flume Agent çš„ Avro Sourceã€‚</li>
</ul>
<h3 data-id="heading-16">Agenté…ç½®</h3>
<pre><code class="hljs language-shell" lang="shell">vim /opt/wzk/flume-conf/flume-log2hdfs3.conf
</code></pre>
<p>å†™å…¥çš„å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-shell" lang="shell">a1.sources = r1
a1.sinks = k1
a1.channels = c1
<span class="hljs-meta prompt_"># </span><span class="bash">taildir <span class="hljs-built_in">source</span></span>
a1.sources.r1.type = TAILDIR
a1.sources.r1.positionFile = /opt/wzk/conf/startlog_position.json
a1.sources.r1.filegroups = f1 f2
a1.sources.r1.filegroups.f1 = /opt/wzk/logs/start/.*log
a1.sources.r1.headers.f1.logtype = start
a1.sources.r1.filegroups.f2 = /opt/wzk/logs/event/.*log
a1.sources.r1.headers.f2.logtype = event
<span class="hljs-meta prompt_"># </span><span class="bash">è‡ªå®šä¹‰æ‹¦æˆªå™¨</span>
a1.sources.r1.interceptors = i1
a1.sources.r1.interceptors.i1.type = icu.wzk.LogTypeInterceptor$Builder
<span class="hljs-meta prompt_"># </span><span class="bash">memorychannel</span>
a1.channels.c1.type = memory
a1.channels.c1.capacity = 100000
a1.channels.c1.transactionCapacity = 2000
<span class="hljs-meta prompt_"># </span><span class="bash">hdfs sink</span>
a1.sinks.k1.type = hdfs
a1.sinks.k1.hdfs.path = /user/data/logs/%{logtype}/dt=%
{logtime}/
a1.sinks.k1.hdfs.filePrefix = startlog.
a1.sinks.k1.hdfs.fileType = DataStream
<span class="hljs-meta prompt_"># </span><span class="bash">é…ç½®æ–‡ä»¶æ»šåŠ¨æ–¹å¼ï¼ˆæ–‡ä»¶å¤§å°32Mï¼‰</span>
a1.sinks.k1.hdfs.rollSize = 33554432
a1.sinks.k1.hdfs.rollCount = 0
a1.sinks.k1.hdfs.rollInterval = 0
a1.sinks.k1.hdfs.idleTimeout = 0
a1.sinks.k1.hdfs.minBlockReplicas = 1
<span class="hljs-meta prompt_"># </span><span class="bash">å‘hdfsä¸Šåˆ·æ–°çš„eventçš„ä¸ªæ•°</span>
a1.sinks.k1.hdfs.batchSize = 1000
<span class="hljs-meta prompt_"># </span><span class="bash">Bind the <span class="hljs-built_in">source</span> and sink to the channel</span>
a1.sources.r1.channels = c1
a1.sinks.k1.channel = c1
</code></pre>
<ul>
<li>filegroupsï¼šæŒ‡å®šfilegroupsï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼Œä»¥ç©ºæ ¼åˆ†å‰²ï¼ˆtaildir sourceå¯ä»¥åŒæ—¶ç›‘æ§å¤šä¸ªç›®å½•ä¸­çš„æ–‡ä»¶ï¼‰</li>
<li>headers.filegroups.headerKey</li>
</ul>
<p>ç»™Eventå¢åŠ header Keyï¼Œä¸åŒçš„filegroupï¼Œå¯é…ç½®ä¸åŒçš„valueã€‚</p>
<h2 data-id="heading-17">é”™è¯¯é€ŸæŸ¥</h2>













































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>Flume å¯åŠ¨ç›´æ¥æŠ¥ â€œUnknown/Unrecognized optionâ€ æˆ–å‚æ•°ä¸ç”Ÿæ•ˆ</td><td>agent å¯åŠ¨å‚æ•°å†™é”™ï¼ˆå¦‚ -name / flume.roog.loggerï¼‰</td><td>çœ‹ flume-ng agent è¾“å‡ºçš„ usage/Unknown optionï¼›ç”¨ <code>--name a1</code>ï¼›logger ç”¨ <code>-Dflume.root.logger=INFO,console</code></td></tr><tr><td>å¯åŠ¨æŠ¥ ClassNotFoundï¼šè‡ªå®šä¹‰æ‹¦æˆªå™¨æ‰¾ä¸åˆ°</td><td>jar æœªæ”¾åˆ° Flume classpath æˆ–æœªåŒ…å«ä¾èµ–</td><td><code>grep -i classnotfound flume.log</code>ï¼›ç¡®è®¤ jar æ˜¯å¦åœ¨ <code>$FLUME_HOME/lib</code>ï¼›æ”¾å…¥ <code>/opt/servers/apache-flume-1.9.0-bin/lib/</code>ï¼›ä¼˜å…ˆä½¿ç”¨ jar-with-dependencies</td></tr><tr><td>Interceptor ç”Ÿæ•ˆä½† <code>%{logtime}</code> ä¸ºç©ºï¼ŒHDFS è·¯å¾„åˆ†åŒºå¼‚å¸¸</td><td>æœªæ­£ç¡®å†™ headerï¼ˆè§£æå¤±è´¥/å­—æ®µç¼ºå¤±/æ­£åˆ™ä¸åŒ¹é…ï¼‰</td><td>åœ¨ Sink å‰åŠ  LoggerSink æˆ– Debug æ—¥å¿—æ‰“å° headersï¼›åœ¨æ‹¦æˆªå™¨é‡Œå¯¹ç¼ºå¤±æ—¶é—´è®¾ç½®å…œåº•ï¼›ä¸¥æ ¼æ ¡éªŒæ—¥å¿—æ ¼å¼ä¸æ—¶é—´æå–è§„åˆ™</td></tr><tr><td>HDFS ä¸Šè¿Ÿè¿Ÿä¸ç”Ÿæˆæ–‡ä»¶ï¼Œæˆ–ç”Ÿæˆå¾ˆæ…¢</td><td>rollInterval/idleTimeout/rollCount é…ç½®å¯¼è‡´â€œåªæŒ‰å¤§å°æ»šåŠ¨â€ï¼Œä½æµé‡ä¸è§¦å‘</td><td>çœ‹ HDFS ç›®æ ‡ç›®å½•æ˜¯å¦å‡ºç° <code>.tmp</code> æˆ–é•¿æ—¶é—´æ— æ–‡ä»¶ï¼›çœ‹ sink æŒ‡æ ‡ï¼›ä½æµé‡åœºæ™¯è®¾ç½® <code>hdfs.rollInterval=60</code> æˆ– <code>hdfs.idleTimeout=60</code>ï¼›ä¿ç•™ rollSize ä½œä¸ºä¸Šé™</td></tr><tr><td>HDFS å†™å…¥æŠ¥ Permission denied / lease é”™è¯¯</td><td>HDFS ç›®å½•æƒé™/ç”¨æˆ·èº«ä»½ä¸åŒ¹é…ï¼›Kerberos/ä»£ç†ç”¨æˆ·æœªé…ç½®</td><td>çœ‹ Flume æ—¥å¿—ä¸­ <code>org.apache.hadoop.security</code> / Permission deniedï¼›ç»™ Flume è¿è¡Œç”¨æˆ·æˆæƒç›®æ ‡ç›®å½•ï¼›æŒ‰é›†ç¾¤å¯ç”¨ <code>hdfs.kerberosPrincipal</code> ç­‰å®‰å…¨å‚æ•°ï¼ˆå¦‚æœ‰ï¼‰</td></tr><tr><td>TAILDIR ä¸é‡‡é›†æˆ–åªé‡‡åˆ°ä¸€æ¬¡ï¼Œé‡å¯åä»å¤´/ä¸ç»­é‡‡</td><td>positionFile è·¯å¾„ä¸å¯å†™/æ ¼å¼æŸå/å¤š agent å…±ç”¨åŒä¸€æ–‡ä»¶</td><td>æ£€æŸ¥ positionFile æ˜¯å¦æ›´æ–°ï¼›çœ‹æ˜¯å¦æœ‰ JSON è§£ææŠ¥é”™ï¼›ç¡®ä¿ç›®å½•å¯å†™ï¼›æ¯ä¸ª agent ç‹¬ç«‹ positionFileï¼›æŸåæ—¶å¤‡ä»½åé‡å»º</td></tr><tr><td>å¤šç›®å½•é‡‡é›†æ—¶ logtype ä¸¢å¤±æˆ–æ··å†™</td><td>headers é…ç½®å†™é”™ï¼ˆheaders.f1.logtype / filegroups åä¸ä¸€è‡´ï¼‰æˆ–æ‹¦æˆªå™¨è¦†ç›–</td><td>åœ¨ LoggerSink è¾“å‡º headers å¯¹æ¯” start/eventï¼›ä¿è¯ filegroups = f1 f2 ä¸ headers.f1.* / headers.f2.* å®Œå…¨ä¸€è‡´ï¼›æ˜ç¡®æ‹¦æˆªå™¨æ˜¯å¦æ”¹å†™ logtype</td></tr></tbody></table>
<h2 data-id="heading-18">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-19">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-20">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-218 RocketMQ Java API å®æˆ˜ï¼šåŒæ­¥/å¼‚æ­¥ Producer ä¸ Pull/Push Consumer</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQå·²å®Œç»“ï¼ŒRocketMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-21">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Linuxã€‘è¿ç»´å®æˆ˜ç¬”è®° â€” æˆ‘å¸¸ç”¨çš„æ–¹æ³•ä¸å‘½ä»¤]]></title>    <link>https://juejin.cn/post/7601075423003459620</link>    <guid>https://juejin.cn/post/7601075423003459620</guid>    <pubDate>2026-02-01T05:59:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601075423003459620" data-draft-id="7601103779392634943" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Linuxã€‘è¿ç»´å®æˆ˜ç¬”è®° â€” æˆ‘å¸¸ç”¨çš„æ–¹æ³•ä¸å‘½ä»¤"/> <meta itemprop="keywords" content="è¿ç»´,Linux"/> <meta itemprop="datePublished" content="2026-02-01T05:59:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Kidaçš„èººå¹³å°å±‹"/> <meta itemprop="url" content="https://juejin.cn/user/1684864740889758"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Linuxã€‘è¿ç»´å®æˆ˜ç¬”è®° â€” æˆ‘å¸¸ç”¨çš„æ–¹æ³•ä¸å‘½ä»¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1684864740889758/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Kidaçš„èººå¹³å°å±‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T05:59:38.000Z" title="Sun Feb 01 2026 05:59:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. å¿«é€Ÿå®šä½å“ªä¸ªå±‚æ¬¡å‡ºé—®é¢˜</h3>
<p>å½“æœåŠ¡å¼‚å¸¸æˆ–å‘Šè­¦æ—¶ï¼Œæˆ‘ç¬¬ä¸€æ­¥ä¸æ˜¯ç›´æ¥é‡å¯ï¼Œè€Œæ˜¯æŠŠç³»ç»Ÿâ€œç›®å‰çš„æ ·å­â€æŠ“ä¸‹æ¥ï¼Œå‘½ä»¤å¾ˆçŸ­ä½†ä¿¡æ¯å¯†åº¦é«˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›ç¨‹ä¸è´Ÿè½½</span>
<span class="hljs-built_in">uptime</span>
top -b -n 1 | <span class="hljs-built_in">head</span> -n 20

<span class="hljs-comment"># å†…å­˜/äº¤æ¢</span>
free -h
vmstat 1 5

<span class="hljs-comment"># ç£ç›˜ç©ºé—´ä¸ inode</span>
<span class="hljs-built_in">df</span> -hT
<span class="hljs-built_in">df</span> -i

<span class="hljs-comment"># I/O ä¸ç­‰å¾…</span>
iostat -xz 1 3   <span class="hljs-comment"># éœ€è¦ sysstat åŒ…</span>
iotop -o         <span class="hljs-comment"># éœ€è¦ iotop</span>

<span class="hljs-comment"># ç½‘ç»œä¾¦æµ‹</span>
ss -tulpn
ip a
ip route
</code></pre>
<p>è¿™äº›è¾“å‡ºèƒ½é©¬ä¸Šå‘Šè¯‰æˆ‘ï¼šCPU è¢«æŸè¿›ç¨‹åƒæ»¡äº†ï¼Ÿå†…å­˜è€—å°½ï¼Ÿç£ç›˜æ»¡äº†å¯¼è‡´å†™å¤±è´¥ï¼Ÿè¿˜æ˜¯ç½‘ç»œç«¯å£æ²¡æœ‰ç›‘å¬ï¼Ÿæˆ‘ä¼šæŠŠè¿™äº›å‘½ä»¤è¾“å‡ºå¤åˆ¶åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œä½œä¸ºåç»­åˆ†æçš„è¯æ®ã€‚</p>
<h3 data-id="heading-1">2. è¿›ç¨‹å±‚é¢ç²¾æŸ¥</h3>
<p>å¦‚æœ top æ˜¾ç¤ºæŸä¸ª PID å ç”¨å¼‚å¸¸ï¼Œæˆ‘ä¼šç”¨ä»¥ä¸‹æ­¥éª¤ç¡®è®¤è¿›ç¨‹è¡Œä¸ºï¼Œä¸è½»æ˜“ killï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ps -eo pid,ppid,cmd,%mem,%cpu --<span class="hljs-built_in">sort</span>=-%cpu | <span class="hljs-built_in">head</span> -n 20

<span class="hljs-comment"># æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€çš„ç½‘ç»œ/æ–‡ä»¶</span>
lsof -p &lt;PID&gt;
ss -p | grep &lt;PID&gt;

<span class="hljs-comment"># è·Ÿè¸ªç³»ç»Ÿè°ƒç”¨ï¼ˆçŸ­æ—¶é—´å†…è§‚å¯Ÿï¼‰</span>
strace -p &lt;PID&gt; -s 200 -o /tmp/strace.&lt;PID&gt;.<span class="hljs-built_in">log</span>
<span class="hljs-comment"># æˆ–åªæŠ“å–é˜»å¡çš„ syscall</span>
strace -p &lt;PID&gt; -e trace=network,file -s 200 -o /tmp/strace.net.log
</code></pre>
<p>æˆ‘ç”¨ <code>strace</code> å¹¶ä¸æ˜¯é•¿æœŸè·Ÿè¸ªï¼Œè€Œæ˜¯æƒ³çŸ¥é“ç¨‹åºå¡åœ¨åš I/Oã€ç­‰å¾…ç½‘ç»œï¼Œè¿˜æ˜¯åœ¨æ— é™å¾ªç¯ã€‚å¦‚æœ <code>strace</code> æ˜¾ç¤º blocked on write æˆ– blocked on futexï¼Œé‚£æˆ‘å°±çŸ¥é“è¿™ä¸æ˜¯ CPU ç®—åŠ›é—®é¢˜ï¼Œè€Œæ˜¯ I/O æˆ–é”ç«äº‰ã€‚</p>
<p>å¦‚æœæ˜¯å†…å­˜é—®é¢˜ï¼Œç”¨ <code>pmap -x &lt;PID&gt;</code> æˆ– <code>smem</code> çœ‹å†…å­˜åˆ†å¸ƒï¼›å¦‚æœæ˜¯é¢‘ç¹åˆ›å»ºå­è¿›ç¨‹å¯¼è‡´ load é«˜ï¼Œç”¨ <code>pstree -p &lt;PID&gt;</code> çœ‹çˆ¶å­å…³ç³»ã€‚</p>
<h3 data-id="heading-2">3. å…ˆè¯»ä¸æ”¹ï¼Œå†åŠ¨æ‰‹</h3>
<p>ç£ç›˜æ»¡ã€inode ç”¨å°½ã€æ–‡ä»¶ç³»ç»Ÿé”™ä¹±æ˜¯æˆ‘é‡åˆ°æœ€å¤šçš„åœæœæ¥æºã€‚å…³é”®åŸåˆ™ï¼š<strong>èƒ½è¯»å°±å¤‡ä»½</strong>ã€‚</p>
<p>æŸ¥ç£ç›˜å ç”¨æ—¶ï¼Œæˆ‘ä¸ç›´æ¥ç”¨ <code>du /</code>ï¼ˆå¤ªæ…¢ï¼‰ï¼Œè€Œæ˜¯åˆ†çº§å®šä½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¤§ç›®å½•ä¸€è§ˆï¼Œå¿«é€Ÿæ‰¾åˆ°â€œèƒ–ç›®å½•â€</span>
<span class="hljs-built_in">du</span> -xsh /var/* | <span class="hljs-built_in">sort</span> -rh | <span class="hljs-built_in">head</span> -n 20

<span class="hljs-comment"># å®šä½å•ä¸ªç›®å½•ä¸‹çš„å¤§æ–‡ä»¶</span>
find /var/log -xdev -<span class="hljs-built_in">type</span> f -size +100M -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">ls</span> -lh {} \;

<span class="hljs-comment"># æŸ¥ inode ä½¿ç”¨</span>
<span class="hljs-built_in">df</span> -i
</code></pre>
<p>ç£ç›˜æ»¡äº†èƒ½çŸ­æœŸæ•‘æ€¥çš„åšæ³•æˆ‘ä¼šå…ˆç”¨ï¼šæ¸…ç†æ—§æ—¥å¿—ï¼ˆä½†ä¿ç•™å¤‡ä»½ï¼‰ï¼Œå‹ç¼©å½’æ¡£å†·æ•°æ®ï¼Œæˆ–æŠŠæŸä¸ªç›®å½•ä¸´æ—¶æŒ‚åˆ°å¦ä¸€ä¸ªç£ç›˜ä¸Šï¼ˆmount --bindï¼‰ã€‚åªæœ‰åœ¨ç¡®è®¤æ²¡æœ‰å…¶ä»–åŠæ³•æ—¶æ‰åˆ é™¤æ–‡ä»¶ï¼Œå¹¶æŠŠåˆ é™¤æ¸…å•è®°å½•ä¸‹æ¥ã€‚</p>
<p>è‹¥é‡åˆ° filesystem corruptionï¼Œæˆ‘ä¼šå…ˆç”¨ <code>fsck.ext4 -n /dev/sdX</code> åšåªè¯»æ£€æŸ¥ï¼Œç„¶ååšé•œåƒ <code>dd if=/dev/sdX of=/backup/sdX.img bs=4M status=progress</code>ï¼ˆå¦‚æœç›˜è¿˜èƒ½è¯»ï¼‰ï¼Œå†åœ¨é•œåƒä¸Šå°è¯•ä¿®å¤ï¼Œè¿™æ ·æŠŠé£é™©é™åˆ°æœ€ä½ã€‚</p>
<h3 data-id="heading-3">4. æˆ‘å¦‚ä½•å¿«é€Ÿä»æ—¥å¿—é‡ŒæŠ“é—®é¢˜</h3>
<p>æˆ‘ç»å¸¸ç”¨ <code>journalctl</code> å’Œ <code>tail -F</code> è”åˆæŠ“å–æœåŠ¡æ—¥å¿—ã€‚<code>journalctl</code> çš„æ—¶é—´è¿‡æ»¤å¾ˆæœ‰ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç³»ç»Ÿ journal</span>
journalctl -xe --no-pager

<span class="hljs-comment"># æŸä¸ªæœåŠ¡æœ€è¿‘ 200 è¡Œå¹¶æŒç»­è·Ÿè¸ª</span>
journalctl -u myservice -n 200 -f

<span class="hljs-comment"># grep å…³é”®è¯ï¼ˆæ³¨æ„ journalctl è‡ªå¸¦è¿‡æ»¤ï¼‰</span>
journalctl -u myservice --since <span class="hljs-string">"2026-01-25 10:00"</span> --until <span class="hljs-string">"2026-01-25 11:00"</span> | grep -i error
</code></pre>
<p>æˆ‘ä¸€èˆ¬ä¸ä¼šä¸€æ¬¡è¯»å…¨æ—¥å¿—ï¼Œè€Œæ˜¯å…ˆå®šä½æ—¶é—´çª—å£ï¼ˆæŠ¥è­¦è§¦å‘æ—¶åˆ»å‰å 5 åˆ†é’Ÿï¼‰ï¼Œç„¶åå‘å¤–æ‰©å±•ã€‚å¾ˆå¤šæ—¶å€™æ ¹å› å°±åœ¨é‚£çŸ­çŸ­å‡ è¡Œå †æ ˆæˆ–é”™è¯¯ä»£ç é‡Œã€‚</p>
<h3 data-id="heading-4">5. éªŒè¯é“¾è·¯ã€ç«¯å£ã€DNSã€è·¯ç”±</h3>
<p>ç½‘ç»œæ•…éšœå¸¸æœ‰ä¸‰ç§è¡¨ç°ï¼šæœ¬æœºæ— æ³•è®¿é—®ã€ç«¯å£æœªç›‘å¬ã€è¿œç¨‹ä¸é€šã€‚æˆ‘å¸¸åšçš„é¡ºåºæ˜¯ï¼š</p>
<ol>
<li><code>ip a</code> çœ‹åœ°å€ï¼›2. <code>ss -tulpn</code> ç¡®è®¤æœåŠ¡åœ¨ç›‘å¬ï¼›3. <code>curl -I http://127.0.0.1:ç«¯å£</code> éªŒè¯æœ¬æœºæœåŠ¡ï¼›4. <code>tcpdump -i &lt;if&gt; host &lt;peer&gt;</code> æŠ“åŒ…çœ‹æµé‡ã€‚</li>
</ol>
<p>ä¸¾ä¸ªæˆ‘å¸¸ç”¨çš„æŠ“åŒ…å‘½ä»¤ï¼šæˆ‘æƒ³çœ‹ä¸è¿œç«¯ 10.1.2.3 çš„è¿æ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo tcpdump -i eth0 host 10.1.2.3 -nn -s0 -w /tmp/cap.pcap
</code></pre>
<p>æŠ“å®Œæˆ‘ä¼šç”¨ Wireshark/<code>tcpdump -r</code> æœ¬åœ°æŸ¥çœ‹æ˜¯å¦æœ‰ä¸‰æ¬¡æ¡æ‰‹ï¼Œæ˜¯å¦æœ‰ RSTï¼Œæˆ–è€…æ˜¯å¦åªæ˜¯åº”ç”¨å±‚è¶…æ—¶ã€‚</p>
<h3 data-id="heading-5">6. æœåŠ¡ç®¡ç†ä¸å¿«é€Ÿæ¢å¤çš„å¥—è·¯</h3>
<p>æˆ‘å§‹ç»ˆåšæŒâ€œå…ˆæ¢å¤æœåŠ¡ï¼Œå†åšæ ¹å› åˆ†æâ€ã€‚è¿™é€šå¸¸æ„å‘³ç€å¿«é€Ÿé‡å¯ service æˆ–åˆ‡æ¢åˆ°å¤‡å®ä¾‹ï¼Œè€Œä¸æ˜¯ç›²ç›®è°ƒå‚ã€‚å¸¸ç”¨å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">systemctl status myservice
systemctl restart myservice
systemctl stop myservice
journalctl -u myservice -n 200 -f
</code></pre>
<p>å¦‚æœé‡å¯åé—®é¢˜æ¶ˆå¤±ï¼Œæˆ‘ä¸ä¼šå½“åœºæŠŠç³»ç»Ÿå‡çº§æˆ–æ”¹é…ç½®ï¼›æˆ‘ä¼šæŠŠæ¢å¤æ­¥éª¤è®°å½•ï¼Œæ ‡æ³¨ä¸ºâ€œä¸´æ—¶æ¢å¤â€ï¼Œå¹¶åœ¨äº‹åä½å³°æ—¶æ®µåšæ·±å…¥æ’æŸ¥ã€‚</p>
<h3 data-id="heading-6">7. å¤‡ä»½ä¸æ¢å¤</h3>
<p>æˆ‘åå¥½ <code>rsync</code> åšæ–‡ä»¶/ç›®å½•çº§å¤‡ä»½ï¼Œå› ä¸ºå®ƒç®€å•ä¸”å¯å¢é‡ã€‚ç¤ºä¾‹æˆ‘å¸¸ç”¨çš„å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">rsync -aHAX --delete --info=progress2 /data/ /backup/data/
<span class="hljs-comment"># è¯´æ˜ï¼š-aHAX ä¿æŒæƒé™/ç¡¬é“¾æ¥/ACL/æ‰©å±•å±æ€§ï¼›--delete ä¿è¯ç›®æ ‡é•œåƒæºï¼›--info æ˜¾ç¤ºè¿›åº¦</span>
</code></pre>
<p>å¯¹äºæ›´å¤æ‚çš„ç‰ˆæœ¬åŒ–å¤‡ä»½ï¼Œæˆ‘ä¼šç”¨ <code>rsync --link-dest</code> åšç¡¬é“¾æ¥å¢é‡ï¼Œæˆ–è€…é•¿æœŸä½¿ç”¨ <code>restic</code> / <code>borg</code> åšå»é‡å’ŒåŠ å¯†å¤‡ä»½ï¼Œè¿™é‡Œæˆ‘ä¸ªäººåå¥½ restic çš„ç®€å•æ€§ã€‚</p>
<p>é‡è¦çš„æ˜¯ï¼šæ¯æ¬¡å¤‡ä»½åéƒ½åšæ¢å¤æ¼”ç»ƒã€‚å¤‡ä»½ä¸éªŒè¯ = æ²¡æœ‰å¤‡ä»½ã€‚</p>
<h3 data-id="heading-7">8. å‡çº§ã€æ‰“è¡¥ä¸ä¸å˜æ›´ç®¡ç†</h3>
<p>åœ¨æˆ‘çœ‹æ¥ï¼Œå‡çº§æ˜¯é£é™©ç®¡ç†è€Œä¸æ˜¯ä¾‹è¡Œæ“ä½œã€‚åŸåˆ™ä¸Šæˆ‘åœ¨ä¸‰å±‚ç¯å¢ƒè·‘å‡çº§ï¼š</p>
<ol>
<li>æœ¬åœ°å¼€å‘æœºï¼ˆå¿«é€ŸéªŒè¯ï¼‰</li>
<li>ç°åº¦æˆ–æµ‹è¯•ç¯å¢ƒï¼ˆä¸šåŠ¡åœºæ™¯è¦†ç›–ï¼‰</li>
<li>ç”Ÿäº§ï¼ˆä½å³°çª—å£ï¼Œå…ˆå¤‡ä»½ï¼‰</li>
</ol>
<p>å¦‚æœæ˜¯å…³é”®ç»„ä»¶ï¼ˆå†…æ ¸ã€æ•°æ®åº“ã€å®¹å™¨ runtimeï¼‰ï¼Œæˆ‘ä¼šå…ˆæ‹å¿«ç…§æˆ–å¤‡ä»½æ•°æ®ï¼Œå¹¶å‡†å¤‡å›æ»šè®¡åˆ’ã€‚å¾ˆå¤šæ•…éšœæ¥è‡ªâ€œç‰ˆæœ¬è·³å¤ªå¤§â€ï¼Œæ‰€ä»¥åˆ†é˜¶æ®µã€æ¯æ¬¡æ”¹ä¸€ä¸ªç»´åº¦ï¼Œæ˜¯æˆ‘ä¸å‡ºæ„å¤–çš„ä¿å‘½æ³•åˆ™ã€‚</p>
<h3 data-id="heading-8">9. â€œæ•‘å‘½â€å‘½ä»¤</h3>
<p>ä¸‹é¢è¿™äº›å‘½ä»¤æˆ‘æŠŠå®ƒä»¬èƒŒåœ¨æ‰‹ä¸Šï¼Œå…³é”®æ—¶åˆ»èƒ½æ•‘åœºï¼ˆæ¯ä¸ªå‘½ä»¤å‰åçš„è¯­å¢ƒæˆ‘éƒ½ä¼šå…ˆç¡®è®¤ï¼‰ï¼š</p>
<ul>
<li>æ‰¾å ç©ºé—´çš„æ–‡ä»¶ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">du</span> -xsh /var/* | <span class="hljs-built_in">sort</span> -rh | <span class="hljs-built_in">head</span> -n 20
</code></pre>
<ul>
<li>æ‰¾å¤§äº 100MB çš„æ–‡ä»¶ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">find / -xdev -<span class="hljs-built_in">type</span> f -size +100M -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">ls</span> -lh {} \; | <span class="hljs-built_in">sort</span> -k5 -h
</code></pre>
<ul>
<li>å¿«é€ŸæŸ¥çœ‹æŸç«¯å£è°åœ¨å ç”¨ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">ss -tulpn | grep :80
</code></pre>
<ul>
<li>æŠŠæŸä¸ªæœåŠ¡æ—¥å¿—æµå¼ä¿å­˜å¹¶ grep é”™è¯¯ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">journalctl -u myservice -f |&amp; <span class="hljs-built_in">tee</span> /tmp/myservice.log | grep -i error
</code></pre>
<ul>
<li>ä¸´æ—¶å¢åŠ  swapï¼ˆçŸ­æœŸæ•‘å†…å­˜ä¸è¶³ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">sudo fallocate -l 1G /swapfile
sudo <span class="hljs-built_in">chmod</span> 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
</code></pre>
<p>è¿™äº›å‘½ä»¤çœ‹èµ·æ¥ç®€å•ï¼Œä½†ç”¨äº†å°±çŸ¥é“ï¼šåœ¨ç´§æ€¥æƒ…å†µä¸‹ï¼Œé€Ÿåº¦å’Œè¯æ®æ¯”å®Œç¾çš„æ­¥éª¤æ›´é‡è¦ã€‚</p>
<h3 data-id="heading-9">10. æˆ‘çš„å°ä¹ æƒ¯</h3>
<p>æˆ‘æŠŠè¿™äº›ä¹ æƒ¯æ”¾åœ¨æœ€åï¼Œå› ä¸ºå®ƒä»¬å¾€å¾€æ¯”ä¸€å †å‘½ä»¤æ›´èƒ½é™ä½äº‹æ•…ç‡ï¼š</p>
<ul>
<li>æ¯æ¬¡å˜æ›´å†™å˜æ›´æ—¥å¿—ï¼Œè®°å½•æ—¶é—´ã€æ“ä½œäººå’Œå›æ»šæ­¥éª¤ã€‚</li>
<li>æŠŠå¸¸ç”¨çš„æ’é”™æ­¥éª¤å†™æˆè„šæœ¬æˆ– playbookï¼ˆAnsibleï¼‰ï¼Œé¿å…â€œæ‰‹å·¥å¤±è¯¯â€ã€‚</li>
<li>å®šæœŸæ¼”ç»ƒæ¢å¤ï¼Œä» 1 æ¬¡å˜æ›´å¼€å§‹å»ºç«‹ä¿¡å¿ƒé“¾ã€‚</li>
<li>å¯¹ç”Ÿäº§æœºå™¨åšæœ€å°æƒé™é…ç½®ï¼Œé¿å…è¿ç»´è¯¯æ“ä½œé€ æˆçº§è”æ•…éšœã€‚</li>
<li>å¯¹å…³é”®ç›˜åš SMART å®šæœŸæ£€æµ‹å¹¶é¢„è­¦ï¼ˆ<code>smartctl -H /dev/sdX</code>ï¼‰ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­ç§˜ Python åç¨‹é­”æ³•ï¼šæ·±å…¥ç†è§£ asyncio äº‹ä»¶å¾ªç¯çš„å¥¥ç§˜ä¸å®è·µ]]></title>    <link>https://juejin.cn/post/7601046076943908879</link>    <guid>https://juejin.cn/post/7601046076943908879</guid>    <pubDate>2026-01-31T16:59:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601046076943908879" data-draft-id="7601073900525371434" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­ç§˜ Python åç¨‹é­”æ³•ï¼šæ·±å…¥ç†è§£ asyncio äº‹ä»¶å¾ªç¯çš„å¥¥ç§˜ä¸å®è·µ"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-31T16:59:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥½åå­—_æŠ€æœ¯åˆ†äº«"/> <meta itemprop="url" content="https://juejin.cn/user/1101056944119610"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­ç§˜ Python åç¨‹é­”æ³•ï¼šæ·±å…¥ç†è§£ asyncio äº‹ä»¶å¾ªç¯çš„å¥¥ç§˜ä¸å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1101056944119610/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥½åå­—_æŠ€æœ¯åˆ†äº«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T16:59:24.000Z" title="Sat Jan 31 2026 16:59:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ­ç§˜ Python åç¨‹é­”æ³•ï¼šæ·±å…¥ç†è§£ asyncio äº‹ä»¶å¾ªç¯çš„å¥¥ç§˜ä¸å®è·µ</h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨ Python çš„ä¸–ç•Œé‡Œï¼Œåç¨‹ï¼ˆcoroutineï¼‰æ˜¯å®ç°å¹¶å‘å’Œå¼‚æ­¥ç¼–ç¨‹çš„å¼ºå¤§å·¥å…·ã€‚è€Œ <code>asyncio</code> åº“åˆ™æ˜¯ Python å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒã€‚ç†è§£ <code>asyncio</code> çš„äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰æœºåˆ¶ï¼Œæ˜¯æŒæ¡ Python å¼‚æ­¥ç¼–ç¨‹çš„å…³é”®ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Python åç¨‹ä¸ <code>asyncio</code> äº‹ä»¶å¾ªç¯çš„åŸç†ã€è¿ä½œæ–¹å¼åŠå®æˆ˜åº”ç”¨ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ</h3>
<p>åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œå®ƒå…è®¸å‡½æ•°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æš‚åœï¼Œå¹¶åœ¨ä¹‹åä»æš‚åœç‚¹ç»§ç»­æ‰§è¡Œã€‚ä¸ä¼ ç»Ÿçº¿ç¨‹ä¸åŒï¼Œåç¨‹çš„åˆ‡æ¢ç”±ç¨‹åºæ˜¾å¼æ§åˆ¶ï¼Œè€Œä¸æ˜¯æ“ä½œç³»ç»Ÿã€‚è¿™ä½¿å¾—åç¨‹çš„å¼€é”€éå¸¸å°ï¼Œä¸”é¿å…äº†å¤šçº¿ç¨‹ä¸­çš„é”ç«äº‰é—®é¢˜ã€‚</p>
<p>Python ä¸­é€šè¿‡ <code>async def</code> å®šä¹‰åç¨‹å‡½æ•°ï¼Œé€šè¿‡ <code>await</code> å…³é”®å­—æš‚åœåç¨‹çš„æ‰§è¡Œï¼Œç­‰å¾…ä¸€ä¸ªå¼‚æ­¥æ“ä½œå®Œæˆã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name, delay</span>):
    <span class="hljs-keyword">await</span> asyncio.sleep(delay) <span class="hljs-comment"># æ¨¡æ‹ŸIOæ“ä½œï¼Œæš‚åœæ‰§è¡Œ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Hello, <span class="hljs-subst">{name}</span> after <span class="hljs-subst">{delay}</span> seconds!"</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># åŒæ—¶è¿è¡Œä¸¤ä¸ªåç¨‹</span>
    task1 = asyncio.create_task(greet(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">2</span>))
    task2 = asyncio.create_task(greet(<span class="hljs-string">"Bob"</span>, <span class="hljs-number">1</span>))
    
    <span class="hljs-keyword">await</span> task1
    <span class="hljs-keyword">await</span> task2

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<h3 data-id="heading-3">äºŒã€<code>asyncio</code> äº‹ä»¶å¾ªç¯</h3>
<p>äº‹ä»¶å¾ªç¯æ˜¯ <code>asyncio</code> çš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£ç®¡ç†å’Œè°ƒåº¦æ‰€æœ‰çš„å¼‚æ­¥ä»»åŠ¡ã€‚å¯ä»¥å°†å…¶æƒ³è±¡æˆä¸€ä¸ªæ— é™å¾ªç¯ï¼Œä¸æ–­åœ°æ£€æŸ¥æ˜¯å¦æœ‰ä»»åŠ¡å‡†å¤‡å°±ç»ªå¯ä»¥æ‰§è¡Œï¼Œæˆ–è€…æ˜¯å¦æœ‰ I/O æ“ä½œå®Œæˆã€‚</p>
<h4 data-id="heading-4">2.1 äº‹ä»¶å¾ªç¯çš„èŒè´£</h4>
<ol>
<li><strong>è°ƒåº¦åç¨‹ï¼š</strong> å†³å®šå“ªä¸ªåç¨‹åœ¨ä½•æ—¶è¿è¡Œã€‚</li>
<li><strong>å¤„ç† I/Oï¼š</strong> ç›‘å¬ç½‘ç»œã€æ–‡ä»¶ç­‰ I/O äº‹ä»¶çš„å®Œæˆã€‚</li>
<li><strong>ç®¡ç†å¹¶å‘ï¼š</strong> ç¡®ä¿å¤šä¸ªåç¨‹èƒ½å¤Ÿåä½œåœ°è¿è¡Œï¼Œè€Œä¸æ˜¯é˜»å¡ã€‚</li>
</ol>
<h4 data-id="heading-5">2.2 äº‹ä»¶å¾ªç¯çš„è¿ä½œæœºåˆ¶</h4>
<p>å½“ä¸€ä¸ªåç¨‹é‡åˆ° <code>await</code> è¡¨è¾¾å¼æ—¶ï¼Œå®ƒä¼šæš‚åœæ‰§è¡Œå¹¶å°†æ§åˆ¶æƒäº¤è¿˜ç»™äº‹ä»¶å¾ªç¯ã€‚äº‹ä»¶å¾ªç¯æ­¤æ—¶ä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯å»æ£€æŸ¥å…¶ä»–å‡†å¤‡å°±ç»ªçš„åç¨‹ã€‚å½“ <code>await</code> ç­‰å¾…çš„å¼‚æ­¥æ“ä½œå®Œæˆåï¼Œäº‹ä»¶å¾ªç¯ä¼šå†æ¬¡è°ƒåº¦è¯¥åç¨‹ï¼Œä½¿å…¶ä»ä¸Šæ¬¡æš‚åœçš„åœ°æ–¹ç»§ç»­æ‰§è¡Œã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹é€šè¿‡ä¸€ä¸ªç§°ä¸ºâ€œé€‰æ‹©å™¨â€ï¼ˆSelectorï¼‰çš„æœºåˆ¶å®ç°ï¼Œå®ƒèƒ½é«˜æ•ˆåœ°ç›‘æ§å¤šä¸ª I/O å¥æŸ„çš„çŠ¶æ€ï¼Œä¾‹å¦‚ <code>select</code>ã€<code>epoll</code> æˆ– <code>kqueue</code>ã€‚</p>
<h4 data-id="heading-6">2.3 <code>asyncio.run()</code> çš„ä½œç”¨</h4>
<p><code>asyncio.run()</code> æ˜¯ Python 3.7+ å¼•å…¥çš„æ–¹ä¾¿å‡½æ•°ï¼Œå®ƒè´Ÿè´£ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹ä»¶å¾ªç¯ã€‚</li>
<li>è¿è¡Œä¼ å…¥çš„é¡¶çº§åç¨‹ï¼Œç›´åˆ°å®Œæˆã€‚</li>
<li>å…³é—­äº‹ä»¶å¾ªç¯ã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">my_coroutine</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello from coroutine!"</span>)
    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Coroutine finished."</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main____"</span>:
    asyncio.run(my_coroutine()) <span class="hljs-comment"># ç®€åŒ–äº†äº‹ä»¶å¾ªç¯çš„ç®¡ç†</span>
</code></pre>
<h3 data-id="heading-7">ä¸‰ã€Taskï¼ˆä»»åŠ¡ï¼‰</h3>
<p><code>asyncio.Task</code> æ˜¯å¯¹åç¨‹çš„å°è£…ï¼Œå®ƒè´Ÿè´£å°†åç¨‹æ³¨å†Œåˆ°äº‹ä»¶å¾ªç¯ä¸­ï¼Œä½¿å…¶èƒ½å¤Ÿè¢«è°ƒåº¦å’Œæ‰§è¡Œã€‚é€šè¿‡ <code>asyncio.create_task()</code> åˆ›å»ºä»»åŠ¡ï¼Œå¯ä»¥å°†åç¨‹è½¬åŒ–ä¸ºå¯å¹¶å‘æ‰§è¡Œçš„å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">say_after</span>(<span class="hljs-params">delay, message</span>):\n    <span class="hljs-keyword">await</span> asyncio.sleep(delay)\n    <span class="hljs-built_in">print</span>(message)\n\nasync <span class="hljs-keyword">def</span> <span class="hljs-title function_">main_tasks</span>():\n    task1 = asyncio.create_task(say_after(<span class="hljs-number">1</span>, <span class="hljs-string">'hello'</span>))\n    task2 = asyncio.create_task(say_after(<span class="hljs-number">2</span>, <span class="hljs-string">'world'</span>))\n\n    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"started at <span class="hljs-subst">{asyncio.get_event_loop().time()}</span>"</span>)\n\n    <span class="hljs-keyword">await</span> task1\n    <span class="hljs-keyword">await</span> task2\n\n    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"finished at <span class="hljs-subst">{asyncio.get_event_loop().time()}</span>"</span>)\n\nif __name__ == <span class="hljs-string">"__main__"</span>:\n    asyncio.run(main_tasks())
</code></pre>
<h3 data-id="heading-8">å››ã€å®æˆ˜åº”ç”¨ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-9">4.1 I/O å¯†é›†å‹ä»»åŠ¡</h4>
<p>å¼‚æ­¥ç¼–ç¨‹æœ€é€‚åˆå¤„ç† I/O å¯†é›†å‹ä»»åŠ¡ï¼Œå¦‚ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ã€æ–‡ä»¶è¯»å†™ç­‰ã€‚åœ¨ç­‰å¾… I/O å®Œæˆæ—¶ï¼ŒCPU å¯ä»¥åˆ‡æ¢åˆ°å…¶ä»–ä»»åŠ¡ï¼Œæé«˜æ•ˆç‡ã€‚</p>
<h4 data-id="heading-10">4.2 å¹¶å‘é™åˆ¶ä¸ä¿¡å·é‡</h4>
<p>åœ¨è¿›è¡Œå¤§é‡å¹¶å‘ç½‘ç»œè¯·æ±‚æ—¶ï¼Œä¸ºäº†é¿å…æœåŠ¡å™¨è¿‡è½½æˆ–è‡ªèº«èµ„æºè€—å°½ï¼Œå¯ä»¥ä½¿ç”¨ <code>asyncio.Semaphore</code> æ¥é™åˆ¶å¹¶å‘æ•°é‡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> aiohttp
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_url</span>(<span class="hljs-params">session, url, semaphore</span>):   
 <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> semaphore:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.get(url) <span class="hljs-keyword">as</span> response:
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.text()
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main_semaphore</span>(<span class="hljs-params">urls, limit=<span class="hljs-number">5</span></span>):
    semaphore = asyncio.Semaphore(limit)
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:
        tasks = [fetch_url(session, url, semaphore) <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls]
        results = <span class="hljs-keyword">await</span> asyncio.gather(*tasks)
        <span class="hljs-keyword">return</span> results
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    test_urls = [<span class="hljs-string">"http://example.com/"</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]
    asyncio.run(main_semaphore(test_urls))
</code></pre>
<h4 data-id="heading-11">4.3 é”™è¯¯å¤„ç†</h4>
<p>ä½¿ç”¨ <code>try...except</code> å—æ¥å¤„ç†åç¨‹ä¸­çš„å¼‚å¸¸ï¼Œç¡®ä¿ä¸€ä¸ªåç¨‹çš„å¤±è´¥ä¸ä¼šå¯¼è‡´æ•´ä¸ªäº‹ä»¶å¾ªç¯å´©æºƒã€‚</p>
<h4 data-id="heading-12">4.4 è°ƒè¯•æŠ€å·§</h4>
<p><code>asyncio</code> æä¾›äº†å¼ºå¤§çš„è°ƒè¯•åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® <code>ASYNCIO_DEBUG=1</code> ç¯å¢ƒå˜é‡æˆ– <code>loop.set_debug(True)</code> æ¥å¼€å¯ã€‚</p>
<h3 data-id="heading-13">æ€»ç»“</h3>
<p>Python çš„ <code>asyncio</code> åŠå…¶äº‹ä»¶å¾ªç¯æœºåˆ¶ä¸ºå¼€å‘è€…æä¾›äº†æ„å»ºé«˜æ€§èƒ½ã€é«˜å¹¶å‘åº”ç”¨çš„åˆ©å™¨ã€‚é€šè¿‡ç†è§£åç¨‹ã€ä»»åŠ¡å’Œäº‹ä»¶å¾ªç¯çš„å†…åœ¨è”ç³»ï¼Œå¹¶éµå¾ªæœ€ä½³å®è·µï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¼–å†™å‡ºæ›´å¥å£®ã€æ›´é«˜æ•ˆçš„å¼‚æ­¥ Python ä»£ç ï¼Œä»è€Œæ›´å¥½åœ°åº”å¯¹ç°ä»£ Web å¼€å‘ä¸­çš„æŒ‘æˆ˜ã€‚
å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°æŒæ¡ Python åç¨‹å’Œ <code>asyncio</code> äº‹ä»¶å¾ªç¯çš„å¥¥ç§˜ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[httpcore HTTP ä»£ç†åœºæ™¯ä¸‹çš„éšè”½è¿æ¥æ³„æ¼é—®é¢˜å®šä½ä¸ä¿®å¤]]></title>    <link>https://juejin.cn/post/7601020578491744265</link>    <guid>https://juejin.cn/post/7601020578491744265</guid>    <pubDate>2026-01-31T17:09:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601020578491744265" data-draft-id="7601069677566984238" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="httpcore HTTP ä»£ç†åœºæ™¯ä¸‹çš„éšè”½è¿æ¥æ³„æ¼é—®é¢˜å®šä½ä¸ä¿®å¤"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-31T17:09:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çœŸçš„æœ‰äººè·¯è¿‡å˜›"/> <meta itemprop="url" content="https://juejin.cn/user/4390796090672683"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            httpcore HTTP ä»£ç†åœºæ™¯ä¸‹çš„éšè”½è¿æ¥æ³„æ¼é—®é¢˜å®šä½ä¸ä¿®å¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4390796090672683/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çœŸçš„æœ‰äººè·¯è¿‡å˜›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T17:09:11.000Z" title="Sat Jan 31 2026 17:09:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    35
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å„ä½å¥½ï¼Œ</p>
<p>åœ¨ä½¿ç”¨ httpx é€šè¿‡ HTTP ä»£ç†è®¿é—® HTTPS æœåŠ¡æ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªéš¾ä»¥å¤ç°ä½†è‡´å‘½çš„è¿æ¥æ± è€—å°½é—®é¢˜ï¼šç¨‹åºè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šæŠ›å‡º PoolTimeoutï¼Œå³ä½¿æ­¤æ—¶ä»£ç†æœåŠ¡æœ¬èº«æ˜¯æ­£å¸¸çš„ï¼ˆæµè§ˆå™¨è®¿é—®æ­£å¸¸ï¼‰ã€‚</p>
<p>ç»è¿‡å¯¹ httpx å’Œåº•å±‚ httpcore çš„æºç è¿½è¸ªï¼Œæˆ‘å‘ç°é—®é¢˜çš„æ ¹æºåœ¨äºï¼šå½“ CONNECT éš§é“å»ºç«‹æˆåŠŸã€ä½†åç»­ TLS æ¡æ‰‹å¤±è´¥æ—¶ï¼Œè¿æ¥å¯¹è±¡çš„çŠ¶æ€ä¼šæ°¸ä¹…åœç•™åœ¨ ACTIVEï¼Œæ—¢æ— æ³•è¢«å¤ç”¨ï¼Œä¹Ÿä¸ä¼šè¢«è¿æ¥æ± æ¸…ç†ï¼Œæœ€ç»ˆå½¢æˆ"åƒµå°¸è¿æ¥"å æ»¡æ•´ä¸ªè¿æ¥æ± ã€‚</p>
<p>æˆ‘å·²ç»æäº¤äº†ä¸€ä¸ªä¿®å¤æ–¹æ¡ˆï¼Œå¸Œæœ›èƒ½å¾—åˆ°ç¤¾åŒºçš„æ„è§ï¼š</p>
<p>PR é“¾æ¥: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpcore%2Fpull%2F1049" target="_blank" title="https://github.com/encode/httpcore/pull/1049" ref="nofollow noopener noreferrer">github.com/encode/httpâ€¦</a></p>
<p>ä»¥ä¸‹æ˜¯æˆ‘çš„å®Œæ•´æ’æŸ¥åˆ†æï¼Œç€é‡æ¢³ç†äº† httpcore çš„çŠ¶æ€æœºæµè½¬ä¸å¼‚å¸¸å¤„ç†è¾¹ç•Œã€‚</p>
<h3 data-id="heading-0">æ·±åº¦æ’æŸ¥ï¼šçŠ¶æ€æœºä¸å¼‚å¸¸æµçš„è¿½è¸ª</h3>
<p>ä¸ºäº†å˜æ¸… PoolTimeout çš„æ ¹æºï¼Œæˆ‘ä» AsyncHTTPProxy å¼€å§‹ï¼Œå¯¹ httpcore çš„è¯·æ±‚ç”Ÿå‘½å‘¨æœŸè¿›è¡Œäº†é€è¡Œè¿½è¸ªã€‚</p>
<p><strong>è¿æ¥æ± è°ƒåº¦ä¸å®ç°ç»†èŠ‚</strong></p>
<p>AsyncHTTPProxy ç±»ç»§æ‰¿è‡ª AsyncConnectionPoolã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncHTTPProxy</span>(<span class="hljs-title class_ inherited__">AsyncConnectionPool</span>):  <span class="hljs-comment"># pragma: nocover</span>
    <span class="hljs-string">"""
    A connection pool that sends requests via an HTTP proxy.
    """</span>
</code></pre>
<p>å½“è¯·æ±‚è¿›å…¥è¿æ¥æ± æ—¶ï¼Œä¼šè§¦å‘ AsyncConnectionPool.handle_async_requestã€‚è¯¥æ–¹æ³•å°†è¯·æ±‚æ”¾å…¥é˜Ÿåˆ—ï¼Œå¹¶è¿›å…¥ while Trueå¾ªç¯ç­‰å¾…åˆ†é…è¿æ¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AsyncConnectionPool.handle_async_request</span>
...
            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
                <span class="hljs-keyword">with</span> self._optional_thread_lock:
                    <span class="hljs-comment"># Assign incoming requests to available connections,</span>
                    <span class="hljs-comment"># closing or creating new connections as required.</span>
                    closing = self._assign_requests_to_connections()
                <span class="hljs-keyword">await</span> self._close_connections(closing)

                <span class="hljs-comment"># Wait until this request has an assigned connection.</span>
                connection = <span class="hljs-keyword">await</span> pool_request.wait_for_connection(timeout=timeout)

                <span class="hljs-keyword">try</span>:
                    <span class="hljs-comment"># Send the request on the assigned connection.</span>
                    response = <span class="hljs-keyword">await</span> connection.handle_async_request(
                        pool_request.request
                    )
                <span class="hljs-keyword">except</span> ConnectionNotAvailable:
                    <span class="hljs-comment"># In some cases a connection may initially be available to</span>
                    <span class="hljs-comment"># handle a request, but then become unavailable.</span>
                    <span class="hljs-comment">#</span>
                    <span class="hljs-comment"># In this case we clear the connection and try again.</span>
                    pool_request.clear_connection()
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-keyword">break</span>  <span class="hljs-comment"># pragma: nocover</span>
...
</code></pre>
<p>è¿™é‡Œçš„é€»è¾‘æ˜¯ï¼šè‹¥è¿æ¥è·å–å¤±è´¥æˆ–ä¸å¯ç”¨ï¼Œä¼šé€šè¿‡ ConnectionNotAvailable å¼‚å¸¸è¿›è¡Œé‡è¯•ï¼›å¦åˆ™æ­£å¸¸è¿”å›å“åº”ã€‚</p>
<p>è¿æ¥åˆ†é…çš„æ ¸å¿ƒé€»è¾‘åœ¨ _assign_requests_to_connections ä¸­ã€‚<em>é¦–æ¬¡è¯·æ±‚æ—¶ï¼Œç”±äºè¿æ¥æ± ä¸ºç©ºï¼Œä¼šè¿›å…¥åˆ›å»ºæ–°è¿æ¥çš„åˆ†æ”¯</em>ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">#  AsyncConnectionPool._assign_requests_to_connections
...
            <span class="hljs-keyword">if</span> available_connections:
                # <span class="hljs-built_in">log</span>: <span class="hljs-string">"reusing existing connection"</span>
                connection = available_connections[<span class="hljs-number">0</span>]
                pool_request.assign_to_connection(connection)
            elif <span class="hljs-built_in">len</span>(<span class="hljs-built_in">self</span>._connections) &lt; <span class="hljs-built_in">self</span>._max_connections:
                # <span class="hljs-built_in">log</span>: <span class="hljs-string">"creating new connection"</span>
                connection = <span class="hljs-built_in">self</span>.create_connection(origin)
                <span class="hljs-built_in">self</span>._connections.append(connection)
                pool_request.assign_to_connection(connection)
            elif idle_connections:
                # <span class="hljs-built_in">log</span>: <span class="hljs-string">"closing idle connection"</span>
                connection = idle_connections[<span class="hljs-number">0</span>]
                <span class="hljs-built_in">self</span>._connections.<span class="hljs-built_in">remove</span>(connection)
                closing_connections.append(connection)
                # <span class="hljs-built_in">log</span>: <span class="hljs-string">"creating new connection"</span>
                connection = <span class="hljs-built_in">self</span>.create_connection(origin)
                <span class="hljs-built_in">self</span>._connections.append(connection)
                pool_request.assign_to_connection(connection)
...
</code></pre>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶çˆ¶ç±» AsyncConnectionPool å®šä¹‰äº† create_connectionï¼Œä½† AsyncHTTPProxy è¿›è¡Œäº†æ–¹æ³•é‡å†™ï¼ˆMethod Overridingï¼‰ï¼Œè¿”å›çš„æ˜¯ä¸“é—¨å¤„ç†ä»£ç†éš§é“çš„ AsyncTunnelHTTPConnection å®ä¾‹ï¼Œè€Œéæ™®é€šçš„ç›´æ¥è¿æ¥ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">    def create_connection(self, origin: Origin) -&gt; AsyncConnectionInterface:
        if <span class="hljs-attr">origin.scheme</span> == b<span class="hljs-string">"http"</span>:
            return AsyncForwardHTTPConnection(
                <span class="hljs-attr">proxy_origin</span>=self._proxy_url.origin,
                <span class="hljs-attr">proxy_headers</span>=self._proxy_headers,
                <span class="hljs-attr">remote_origin</span>=origin,
                <span class="hljs-attr">keepalive_expiry</span>=self._keepalive_expiry,
                <span class="hljs-attr">network_backend</span>=self._network_backend,
                <span class="hljs-attr">proxy_ssl_context</span>=self._proxy_ssl_context,
            )
        return AsyncTunnelHTTPConnection(
            <span class="hljs-attr">proxy_origin</span>=self._proxy_url.origin,
            <span class="hljs-attr">proxy_headers</span>=self._proxy_headers,
            <span class="hljs-attr">remote_origin</span>=origin,
            <span class="hljs-attr">ssl_context</span>=self._ssl_context,
            <span class="hljs-attr">proxy_ssl_context</span>=self._proxy_ssl_context,
            <span class="hljs-attr">keepalive_expiry</span>=self._keepalive_expiry,
            <span class="hljs-attr">http1</span>=self._http1,
            <span class="hljs-attr">http2</span>=self._http2,
            <span class="hljs-attr">network_backend</span>=self._network_backend,
        )
</code></pre>
<p>å¯¹äº HTTPS è¯·æ±‚ï¼Œcreate_connection è¿”å› AsyncTunnelHTTPConnection å®ä¾‹ã€‚æ­¤æ—¶ä»…å®Œæˆå¯¹è±¡å®ä¾‹åŒ–ï¼Œå®é™…çš„ TCP è¿æ¥å’Œ TLS æ¡æ‰‹å°šæœªè¿›è¡Œã€‚</p>
<p><strong>å»ºç«‹éš§é“</strong></p>
<p>å›åˆ° AsyncConnectionPool.handle_async_request çš„ä¸»å¾ªç¯ã€‚_assign_requests_to_connections åˆ›å»ºå¹¶åˆ†é…è¿æ¥åï¼Œä»£ç ç­‰å¾…è¿æ¥å°±ç»ªï¼Œç„¶åè¿›å…¥ try å—æ‰§è¡Œå®é™…è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncConnectionPool.handle_async_request</span>
...
                <span class="hljs-attr">connection</span> = await pool_request.wait_for_connection(timeout=timeout)

                try:
                    <span class="hljs-comment"># Send the request on the assigned connection.</span>
                    <span class="hljs-attr">response</span> = await connection.handle_async_request(
                        pool_request.request
                    )
                except ConnectionNotAvailable:
                    <span class="hljs-comment"># In some cases a connection may initially be available to</span>
                    <span class="hljs-comment"># handle a request, but then become unavailable.</span>
                    <span class="hljs-comment">#</span>
                    <span class="hljs-comment"># In this case we clear the connection and try again.</span>
                    pool_request.clear_connection()
                else:
                    break  <span class="hljs-comment"># pragma: nocover</span>
...
</code></pre>
<p>è¿™é‡Œçš„ connection å³ä¸Šä¸€æ­¥åˆ›å»ºçš„ AsyncTunnelHTTPConnection å®ä¾‹ã€‚connection.handle_async_request è¿›å…¥äºŒçº§é€»è¾‘ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AsyncConnectionPool.handle_async_request</span>
...
                    <span class="hljs-comment"># Assign incoming requests to available connections,</span>
                    <span class="hljs-comment"># closing or creating new connections as required.                    </span>
                    closing = self._assign_requests_to_connections()
                <span class="hljs-keyword">await</span> self._close_connections(closing)
...
</code></pre>
<p>_assign_requests_to_connections è¿”å›çš„ closing åˆ—è¡¨ä¸ºç©ºâ€”â€”é¦–æ¬¡åˆ›å»ºè¿æ¥æ—¶å°šæ— è¿‡æœŸè¿æ¥éœ€è¦æ¸…ç†ã€‚éšåè¯·æ±‚è¢«åˆ†å‘ç»™ AsyncTunnelHTTPConnection å®ä¾‹ï¼Œè¿›å…¥å…¶ handle_async_request æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncConnectionPool.handle_async_request</span>
...
                <span class="hljs-comment"># Wait until this request has an assigned connection.</span>
                <span class="hljs-attr">connection</span> = await pool_request.wait_for_connection(timeout=timeout)

                try:
                    <span class="hljs-comment"># Send the request on the assigned connection.</span>
                    <span class="hljs-attr">response</span> = await connection.handle_async_request(
                        pool_request.request
                    )
...
</code></pre>
<p>connection.handle_async_request å³ AsyncTunnelHTTPConnection.handle_async_requestã€‚è¯¥æ–¹æ³•é¦–å…ˆæ£€æŸ¥ self._connected æ ‡å¿—ï¼šå¯¹äºæ–°è¿æ¥ï¼Œä¼šæ„é€  HTTP CONNECT è¯·æ±‚å‘é€è‡³ä»£ç†æœåŠ¡å™¨ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncTunnelHTTPConnection.handle_async_request</span>
...
        async with self._connect_lock:
            if not self._connected:
                <span class="hljs-attr">target</span> = b<span class="hljs-string">"%b:%d"</span> % (self._remote_origin.host, self._remote_origin.port)

                <span class="hljs-attr">connect_url</span> = URL(
                    <span class="hljs-attr">scheme</span>=self._proxy_origin.scheme,
                    <span class="hljs-attr">host</span>=self._proxy_origin.host,
                    <span class="hljs-attr">port</span>=self._proxy_origin.port,
                    <span class="hljs-attr">target</span>=target,
                )
                <span class="hljs-attr">connect_headers</span> = merge_headers(
                    <span class="hljs-section">[(b"Host", target), (b"Accept", b"*/*")]</span>, self._proxy_headers
                )
                <span class="hljs-attr">connect_request</span> = Request(
                    <span class="hljs-attr">method</span>=b<span class="hljs-string">"CONNECT"</span>,
                    <span class="hljs-attr">url</span>=connect_url,
                    <span class="hljs-attr">headers</span>=connect_headers,
                    <span class="hljs-attr">extensions</span>=request.extensions,
                )
                <span class="hljs-attr">connect_response</span> = await self._connection.handle_async_request(
                    connect_request
                )
...
</code></pre>
<p>CONNECT è¯·æ±‚é€šè¿‡ self._connection.handle_async_request() å‘é€ã€‚è¿™é‡Œçš„ self._connection åœ¨AsyncTunnelHTTPConnection çš„ _<em>init_</em> ä¸­åˆå§‹åŒ–ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncTunnelHTTPConnection.__init__</span>
...
        self._connection: <span class="hljs-attr">AsyncConnectionInterface</span> = AsyncHTTPConnection(
            <span class="hljs-attr">origin</span>=proxy_origin,
            <span class="hljs-attr">keepalive_expiry</span>=keepalive_expiry,
            <span class="hljs-attr">network_backend</span>=network_backend,
            <span class="hljs-attr">socket_options</span>=socket_options,
            <span class="hljs-attr">ssl_context</span>=proxy_ssl_context,
        )
...
</code></pre>
<p>self._connection æ˜¯ AsyncHTTPConnection å®ä¾‹ï¼ˆä½äº connection.pyï¼‰ã€‚å½“è°ƒç”¨å…¶ handle_async_request å‘é€ CONNECT è¯·æ±‚æ—¶ï¼Œå†…éƒ¨å®é™…ç»å†äº†ä¸¤ä¸ªå±‚æ¬¡çš„è°ƒç”¨ï¼š</p>
<p><em><strong>ç¬¬ä¸€å±‚ï¼šå»¶è¿Ÿè¿æ¥å»ºç«‹</strong></em></p>
<p>AsyncHTTPConnection.handle_async_request é¦–å…ˆæ£€æŸ¥æ˜¯å¦å·²å»ºç«‹åº•å±‚è¿æ¥ã€‚è‹¥æœªå»ºç«‹ï¼Œåˆ™å…ˆæ‰§è¡Œ _connect()ï¼Œç„¶åæ ¹æ®åå•†ç»“æœåˆ›å»ºå®é™…çš„åè®®å¤„ç†å®ä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncHTTPConnection.handle_async_request</span>
...
            async with self._request_lock:
                if self._connection is None:
                    <span class="hljs-attr">stream</span> = await self._connect(request)

                    <span class="hljs-attr">ssl_object</span> = stream.get_extra_info(<span class="hljs-string">"ssl_object"</span>)
                    <span class="hljs-attr">http2_negotiated</span> = (
                        ssl_object is not None
                        and ssl_object.selected_alpn_protocol() == "h2"
                    )
                    if http2_negotiated or (self._http2 and not self._http1):
                        from .http2 import AsyncHTTP2Connection

                        <span class="hljs-attr">self._connection</span> = AsyncHTTP2Connection(
                            <span class="hljs-attr">origin</span>=self._origin,
                            <span class="hljs-attr">stream</span>=stream,
                            <span class="hljs-attr">keepalive_expiry</span>=self._keepalive_expiry,
                        )
                    else:
                        <span class="hljs-attr">self._connection</span> = AsyncHTTP11Connection(
                            <span class="hljs-attr">origin</span>=self._origin,
                            <span class="hljs-attr">stream</span>=stream,
                            <span class="hljs-attr">keepalive_expiry</span>=self._keepalive_expiry,
                        )
...
</code></pre>
<p>æ³¨æ„æ­¤ self._connection è¢«èµ‹å€¼ä¸º AsyncHTTP11Connectionï¼ˆæˆ– HTTP/2ï¼‰å®ä¾‹ã€‚</p>
<p><em><strong>ç¬¬äºŒå±‚ï¼šåè®®å¤„ç†ä¸çŠ¶æ€è½¬æ¢</strong></em></p>
<p>éšåï¼ŒAsyncHTTPConnection å°†è¯·æ±‚å§”æ‰˜ç»™æ–°åˆ›å»ºçš„ AsyncHTTP11Connection å®ä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AsyncHTTPConnection.handle_async_request</span>
...
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> self._connection.handle_async_request(request)
...
</code></pre>
<p>åœ¨ AsyncHTTP11Connection å†…éƒ¨ï¼Œæ„é€ å‡½æ•°åˆå§‹åŒ– self._state = HTTPConnectionState.NEWã€‚è€Œåœ¨ handle_async_request æ–¹æ³•ä¸­ï¼ŒçŠ¶æ€è¢«è½¬æ¢ä¸º ACTIVEâ€”â€”è¿™æ­£æ˜¯åç»­é—®é¢˜çš„æ ¸å¿ƒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AsyncHTTP11Connection.handle_async_request</span>
...
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> self._state_lock:
            <span class="hljs-keyword">if</span> self._state <span class="hljs-keyword">in</span> (HTTPConnectionState.NEW, HTTPConnectionState.IDLE):
                self._request_count += <span class="hljs-number">1</span>
                self._state = HTTPConnectionState.ACTIVE
                self._expire_at = <span class="hljs-literal">None</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">raise</span> ConnectionNotAvailable()
...
</code></pre>
<p>åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œè¯·æ±‚å¤´å’Œå“åº”å¤´å¤„ç†å®Œæˆåï¼Œhandle_async_request è¿”å› Responseã€‚æ³¨æ„ content å‚æ•°æ˜¯ HTTP11ConnectionByteStream(self, request)ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncHTTP11Connection.handle_async_request</span>
...
            return Response(
                <span class="hljs-attr">status</span>=status,
                <span class="hljs-attr">headers</span>=headers,
                <span class="hljs-attr">content</span>=HTTP11ConnectionByteStream(self, request),
                <span class="hljs-attr">extensions</span>={
                    "http_version": http_version,
                    "reason_phrase": reason_phrase,
                    "network_stream": network_stream,
                },
            )
...
</code></pre>
<p>è¿™é‡Œé‡‡ç”¨äº†å»¶è¿Ÿæ¸…ç†è®¾è®¡ï¼šå“åº”å¤´è¿”å›æ—¶è¿æ¥çŠ¶æ€ä»ä¸º ACTIVEï¼›å“åº”ä½“çš„è¯»å–å’ŒçŠ¶æ€è½®è½¬ï¼ˆè½¬ä¸º IDLEï¼‰è¢«æ¨è¿Ÿåˆ° HTTP11ConnectionByteStream.aclose()è¢«è°ƒç”¨æ—¶æ‰§è¡Œã€‚</p>
<p>è‡³æ­¤ï¼ŒResponse ä»¥ ACTIVE çŠ¶æ€é€å±‚è¿”å›ã€‚httpcore ä¸­æ‰€æœ‰è¿æ¥ç±»çš„ handle_async_request å‡è¿”å› Responseï¼Œè¿™æ˜¯å…¶<strong>ç»Ÿä¸€æ¥å£è®¾è®¡</strong>ã€‚</p>
<p>è¿”å›åˆ° AsyncTunnelHTTPConnection.handle_async_requestï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncTunnelHTTPConnection.handle_async_request</span>
...
                <span class="hljs-attr">connect_response</span> = await self._connection.handle_async_request(
                    connect_request
                )
...
</code></pre>
<p>æ¥ä¸‹æ¥æ£€æŸ¥ CONNECT å“åº”çŠ¶æ€ã€‚è‹¥è¿”å›é 2xx çŠ¶æ€ç ï¼Œæ­¤å¤„æ­£ç¡®è°ƒç”¨äº† aclose() è¿›è¡Œæ¸…ç†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncTunnelHTTPConnection.handle_async_request</span>
...
                if connect_response.status &lt; 200 or connect_response.status &gt; 299:
                    <span class="hljs-attr">reason_bytes</span> = connect_response.extensions.get(<span class="hljs-string">"reason_phrase"</span>, b<span class="hljs-string">""</span>)
                    <span class="hljs-attr">reason_str</span> = reason_bytes.decode(<span class="hljs-string">"ascii"</span>, errors=<span class="hljs-string">"ignore"</span>)
                    <span class="hljs-attr">msg</span> = <span class="hljs-string">"%d %s"</span> % (connect_response.status, reason_str)
                    await self._connection.aclose()
                    raise ProxyError(msg)

                <span class="hljs-attr">stream</span> = connect_response.extensions[<span class="hljs-string">"network_stream"</span>]
...
</code></pre>
<p>è‹¥ CONNECT æˆåŠŸï¼ˆ200ï¼‰ï¼Œåˆ™ä»å“åº”æ‰©å±•ä¸­æå–åŸå§‹ç½‘ç»œæµï¼Œå¹¶å‡†å¤‡åç»­ TLS æ¡æ‰‹çš„å‚æ•°ã€‚</p>
<p>æ¥ä¸‹æ¥å°±æ˜¯é—®é¢˜å‘ç”Ÿçš„æ ¸å¿ƒä½ç½®ã€‚åŸå§‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta">#  AsyncTunnelHTTPConnection.handle_async_request</span>
...
                <span class="hljs-function"><span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> <span class="hljs-title">Trace</span>(<span class="hljs-params"><span class="hljs-string">"start_tls"</span>, logger, request, kwargs</span>) <span class="hljs-keyword">as</span> trace:
                    stream</span> = <span class="hljs-keyword">await</span> stream.start_tls(**kwargs)
                    trace.return_value = stream
...
</code></pre>
<p>è¿™é‡Œçš„ stream.start_tls() è´Ÿè´£ä¸ç›®æ ‡æœåŠ¡å™¨å»ºç«‹ TLS åŠ å¯†é€šé“ã€‚</p>
<p><strong>å…³äº stream çš„å…·ä½“æ¥æºï¼Œéœ€è¦è¿½æº¯åˆ°å¤šå±‚è°ƒç”¨ä¹‹å‰ã€‚</strong></p>
<hr/>
<p>stream æ¥è‡ª connect_response.extensions["network_stream"]ã€‚åœ¨ CONNECT è¯·æ±‚å¤„ç†æµç¨‹ä¸­ï¼Œè¿™ä¸ªå€¼ç”± AsyncHTTP11Connection åœ¨è¿”å› Response æ—¶è®¾ç½®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncHTTP11Connection.handle_async_request</span>
...
            return Response(
                <span class="hljs-attr">status</span>=status,
                <span class="hljs-attr">headers</span>=headers,
                <span class="hljs-attr">content</span>=HTTP11ConnectionByteStream(self, request),
                <span class="hljs-attr">extensions</span>={
                    "http_version": http_version,
                    "reason_phrase": reason_phrase,
                    "network_stream": network_stream,
                },
            )
...
</code></pre>
<p>å…·ä½“æ¥è¯´ï¼Œå½“ AsyncHTTP11Connection.handle_async_request() å¤„ç†å®Œ CONNECT è¯·æ±‚åï¼Œä¼šå°†åº•å±‚çš„ _network_stream åŒ…è£…ä¸º AsyncHTTP11UpgradeStream æ”¾å…¥å“åº”çš„ extensions ä¸­ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncHTTP11Connection.handle_async_request</span>
...
            <span class="hljs-attr">network_stream</span> = self._network_stream

            <span class="hljs-comment"># CONNECT or Upgrade request</span>
            if (<span class="hljs-attr">status</span> == <span class="hljs-number">101</span>) or (
                (<span class="hljs-attr">request.method</span> == b<span class="hljs-string">"CONNECT"</span>) and (<span class="hljs-number">200</span> &lt;= status &lt; <span class="hljs-number">300</span>)
            ):
                <span class="hljs-attr">network_stream</span> = AsyncHTTP11UpgradeStream(network_stream, trailing_data)
...
</code></pre>
<p>è¿™é‡Œçš„ self._network_stream æ¥è‡ª AsyncHTTP11Connection çš„æ„é€ å‡½æ•°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncHTTP11Connection.__init__</span>
...
        <span class="hljs-attr">self._network_stream</span> = stream
...
</code></pre>
<p>è€Œè¿™ä¸ª stream åˆæ˜¯ç”± AsyncHTTPConnection åœ¨åˆ›å»º AsyncHTTP11Connection æ—¶ä¼ å…¥çš„ã€‚</p>
<p>è¯¥è¿‡ç¨‹å‘ç”Ÿåœ¨ AsyncHTTPConnection.handle_async_request ä¸­ã€‚_connect() æ–¹æ³•åˆ›å»ºåŸå§‹ç½‘ç»œæµï¼Œéšåæ ¹æ® ALPN åå•†ç»“æœå†³å®šä½¿ç”¨ HTTP/1.1 è¿˜æ˜¯ HTTP/2ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncHTTPConnection.handle_async_request</span>
...
            async with self._request_lock:
                if self._connection is None:
                    <span class="hljs-attr">stream</span> = await self._connect(request)

                    <span class="hljs-attr">ssl_object</span> = stream.get_extra_info(<span class="hljs-string">"ssl_object"</span>)
                    <span class="hljs-attr">http2_negotiated</span> = (
                        ssl_object is not None
                        and ssl_object.selected_alpn_protocol() == "h2"
                    )
                    if http2_negotiated or (self._http2 and not self._http1):
                        from .http2 import AsyncHTTP2Connection

                        <span class="hljs-attr">self._connection</span> = AsyncHTTP2Connection(
                            <span class="hljs-attr">origin</span>=self._origin,
                            <span class="hljs-attr">stream</span>=stream,
                            <span class="hljs-attr">keepalive_expiry</span>=self._keepalive_expiry,
                        )
                    else:
                        <span class="hljs-attr">self._connection</span> = AsyncHTTP11Connection(
                            <span class="hljs-attr">origin</span>=self._origin,
                            <span class="hljs-attr">stream</span>=stream,
                            <span class="hljs-attr">keepalive_expiry</span>=self._keepalive_expiry,
                        )
...
</code></pre>
<p><em><strong>Fine</strong></em></p>
<p>AsyncHTTPConnection åˆ›å»º AsyncHTTP11Connection æ—¶ä¼ å…¥çš„ stream æ¥è‡ª self._connect() æ–¹æ³•ã€‚è¯¥æ–¹æ³•é€šè¿‡ self._network_backend.connect_tcp() åˆ›å»ºåŸå§‹ TCP è¿æ¥ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta">#  AsyncHTTPConnection._connect</span>
...
                        stream = <span class="hljs-keyword">await</span> self._network_backend.connect_tcp(**kwargs)
...
                    <span class="hljs-function"><span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> <span class="hljs-title">Trace</span>(<span class="hljs-params"><span class="hljs-string">"start_tls"</span>, logger, request, kwargs</span>) <span class="hljs-keyword">as</span> trace:
                        stream</span> = <span class="hljs-keyword">await</span> stream.start_tls(**kwargs)
                        trace.return_value = stream
                <span class="hljs-keyword">return</span> stream
...
</code></pre>
<p>æ³¨æ„ï¼šå¦‚æœä»£ç†åè®®æ˜¯ HTTPSï¼Œ_connect() å†…éƒ¨ä¼šå…ˆå®Œæˆä¸ä»£ç†çš„ TLS æ¡æ‰‹ï¼ˆç¬¬ä¸€æ®µ start_tlsï¼‰ï¼Œå†è¿”å›å·²åŠ å¯†çš„æµã€‚</p>
<p>self._network_backend åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ï¼Œé»˜è®¤ä¸º AutoBackendï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AsyncHTTPConnection.__init__</span>
...
        self._network_backend: AsyncNetworkBackend = (
            AutoBackend() <span class="hljs-keyword">if</span> network_backend <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> network_backend
        )
...
</code></pre>
<p>AutoBackend æ˜¯ä¸€ä¸ªé€‚é…å™¨ï¼Œæ ¹æ®è¿è¡Œæ—¶ç¯å¢ƒè‡ªåŠ¨é€‰æ‹©å…·ä½“åç«¯ï¼ˆå¦‚ AnyIO æˆ– Trioï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AutoBackend.connect_tcp</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">connect_tcp</span>(<span class="hljs-params">
        self,
        host: <span class="hljs-built_in">str</span>,
        port: <span class="hljs-built_in">int</span>,
        timeout: <span class="hljs-built_in">float</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        local_address: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        socket_options: typing.Iterable[SOCKET_OPTION] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; AsyncNetworkStream:
        <span class="hljs-keyword">await</span> self._init_backend()
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> self._backend.connect_tcp(
            host,
            port,
            timeout=timeout,
            local_address=local_address,
            socket_options=socket_options,
        )
</code></pre>
<p>å®é™…çš„ç½‘ç»œ I/O ç”± _backendï¼ˆå¦‚ AnyIOBackendï¼‰å®Œæˆã€‚</p>
<p>_init_backend æ–¹æ³•æ£€æµ‹å½“å‰è¿è¡Œçš„å¼‚æ­¥åº“ç¯å¢ƒï¼Œé»˜è®¤åŠ è½½ AnyIOBackendï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AutoBackend._init_backend</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_init_backend</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (<span class="hljs-built_in">hasattr</span>(self, <span class="hljs-string">"_backend"</span>)):
            backend = current_async_library()
            <span class="hljs-keyword">if</span> backend == <span class="hljs-string">"trio"</span>:
                <span class="hljs-keyword">from</span> .trio <span class="hljs-keyword">import</span> TrioBackend

                self._backend: AsyncNetworkBackend = TrioBackend()
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">from</span> .anyio <span class="hljs-keyword">import</span> AnyIOBackend

                self._backend = AnyIOBackend()
</code></pre>
<p>å› æ­¤ï¼ŒAutoBackend.connect_tcp() çš„å®é™…è¿”å›å€¼ç”± AnyIOBackend.connect_tcp() æä¾›ã€‚</p>
<p>AnyIOBackend.connect_tcp() æœ€ç»ˆè¿”å› AnyIOStream å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#  AnyIOBackend.connect_tcp</span>
...
        <span class="hljs-built_in">return</span> AnyIOStream(stream)
...
</code></pre>
<p>è¯¥å¯¹è±¡è¢«å±‚å±‚ä¼ é€’ï¼Œæœ€ç»ˆå›åˆ° AsyncHTTPConnection._connect() æ–¹æ³•ä¸­ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AsyncHTTPConnection._connect</span>
...
                        stream = <span class="hljs-keyword">await</span> self._network_backend.connect_tcp(**kwargs)
...
                <span class="hljs-keyword">if</span> self._origin.scheme <span class="hljs-keyword">in</span> (<span class="hljs-string">b"https"</span>, <span class="hljs-string">b"wss"</span>):
...
                    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> Trace(<span class="hljs-string">"start_tls"</span>, logger, request, kwargs) <span class="hljs-keyword">as</span> trace:
                        stream = <span class="hljs-keyword">await</span> stream.start_tls(**kwargs)
                        trace.return_value = stream
                <span class="hljs-keyword">return</span> stream
...
</code></pre>
<p>æ­¤å¤„éœ€æ³¨æ„ï¼šè‹¥ä»£ç†ä½¿ç”¨ HTTPS åè®®ï¼Œ_connect() ä¼šå…ˆæ‰§è¡Œ start_tls() ä¸ä»£ç†å»ºç«‹ TLS åŠ å¯†é€šé“ï¼ˆè€Œéä¸ç›®æ ‡æœåŠ¡å™¨ï¼‰ã€‚è°ƒç”¨ AnyIOStream.start_tls() åè¿”å›çš„å·²æ˜¯ TLS åŒ…è£…åçš„æµã€‚è‹¥æ˜¯ HTTP ä»£ç†ï¼Œåˆ™ç›´æ¥è¿”å›æœªåŠ å¯†çš„åŸå§‹æµã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒAnyIOStream.start_tls() åœ¨å¼‚å¸¸æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ self.aclose() å…³é—­åº•å±‚ socketã€‚ï¼ˆå‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpcore%2Fpull%2F475" target="_blank" title="https://github.com/encode/httpcore/pull/475" ref="nofollow noopener noreferrer">github.com/encode/httpâ€¦</a>ï¼Œrespectï¼‰</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AnyIOStream.start_tls</span>
...
            try:
                with anyio.fail_after(timeout):
                    <span class="hljs-attr">ssl_stream</span> = await anyio.streams.tls.TLSStream.wrap(
                        self._stream,
                        <span class="hljs-attr">ssl_context</span>=ssl_context,
                        <span class="hljs-attr">hostname</span>=server_hostname,
                        <span class="hljs-attr">standard_compatible</span>=<span class="hljs-literal">False</span>,
                        <span class="hljs-attr">server_side</span>=<span class="hljs-literal">False</span>,
                    )
            except Exception as exc:  <span class="hljs-comment"># pragma: nocover</span>
                await self.aclose()
                raise exc
        return AnyIOStream(ssl_stream)
...
</code></pre>
<p>éšå AnyIOStream è¿”å›è‡³ AsyncHTTPConnection.handle_async_requestï¼Œæœ€ç»ˆä½œä¸º stream å‚æ•°ä¼ é€’ç»™ AsyncHTTP11Connection çš„æ„é€ å‡½æ•°ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncHTTPConnection.handle_async_request</span>
...
            async with self._request_lock:
                if self._connection is None:
                    <span class="hljs-attr">stream</span> = await self._connect(request)  <span class="hljs-comment">#  è¿™é‡Œ</span>

                    <span class="hljs-attr">ssl_object</span> = stream.get_extra_info(<span class="hljs-string">"ssl_object"</span>)
                    <span class="hljs-attr">http2_negotiated</span> = (
                        ssl_object is not None
                        and ssl_object.selected_alpn_protocol() == "h2"
                    )
                    if http2_negotiated or (self._http2 and not self._http1):
                        from .http2 import AsyncHTTP2Connection

                        <span class="hljs-attr">self._connection</span> = AsyncHTTP2Connection(
                            <span class="hljs-attr">origin</span>=self._origin,
                            <span class="hljs-attr">stream</span>=stream,
                            <span class="hljs-attr">keepalive_expiry</span>=self._keepalive_expiry,
                        )
                    else:
                        <span class="hljs-attr">self._connection</span> = AsyncHTTP11Connection(
                            <span class="hljs-attr">origin</span>=self._origin,
                            <span class="hljs-attr">stream</span>=stream,
                            <span class="hljs-attr">keepalive_expiry</span>=self._keepalive_expiry,
                        )
...
</code></pre>
<p><em><strong>D.C. al Fine</strong></em></p>
<hr/>
<p>æ¢³ç†å®Œ stream çš„å®Œæ•´æ¥æºåï¼Œæˆ‘ä»¬å›åˆ°é—®é¢˜çš„æ ¸å¿ƒä½ç½®ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta">#  AsyncTunnelHTTPConnection.handle_async_request</span>
...
                <span class="hljs-function"><span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> <span class="hljs-title">Trace</span>(<span class="hljs-params"><span class="hljs-string">"start_tls"</span>, logger, request, kwargs</span>) <span class="hljs-keyword">as</span> trace:
                    stream</span> = <span class="hljs-keyword">await</span> stream.start_tls(**kwargs)
                    trace.return_value = stream
...
</code></pre>
<p>æ­¤æ—¶ï¼Œæœ¬åœ°åˆ°ä»£ç†çš„ TCP è¿æ¥å·²å»ºç«‹ï¼ŒCONNECT è¯·æ±‚å·²æˆåŠŸè¿”å› 200ã€‚stream.start_tls() è´Ÿè´£ä¸ç›®æ ‡æœåŠ¡å™¨å»ºç«‹ TLS åŠ å¯†é€šé“ã€‚è¿™é‡Œçš„ stream å³å‰æ–‡è¿½æº¯çš„ AnyIOStream å¯¹è±¡ï¼Œå…¶ start_tls() æ–¹æ³•åœ¨å¼‚å¸¸æ—¶ä¼šè°ƒç”¨ self.aclose() å…³é—­åº•å±‚ socketâ€”â€”<strong>ä½†è¿™ä»…åœç•™åœ¨ä¼ è¾“å±‚çš„æ¸…ç†</strong>ã€‚</p>
<p>å¼‚å¸¸æ•è·è¾¹ç•Œçš„ç»“æ„æ€§é”™ä½</p>
<p>åœ¨æ­£å¸¸çš„è¯·æ±‚å¤„ç†æµç¨‹ä¸­ï¼Œhttpcore å»ºç«‹äº†å¤šå±‚æ¬¡çš„å¼‚å¸¸é˜²æŠ¤ã€‚AsyncHTTP11Connection.handle_async_request é€šè¿‡å¤–å±‚ try-except å—ç¡®ä¿ï¼šæ— è®ºè¯·æ±‚å‘é€è¿˜æ˜¯å“åº”å¤´æ¥æ”¶é˜¶æ®µå‘ç”Ÿç½‘ç»œå¼‚å¸¸ï¼Œéƒ½ä¼šè°ƒç”¨ _response_closed() å°† _state ä» ACTIVE æ¸…ç†ä¸º CLOSED æˆ– IDLEã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AsyncHTTP11Connection.handle_async_request</span>
...
        <span class="hljs-keyword">except</span> BaseException <span class="hljs-keyword">as</span> exc:
            <span class="hljs-keyword">with</span> AsyncShieldCancellation():
                <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> Trace(<span class="hljs-string">"response_closed"</span>, logger, request) <span class="hljs-keyword">as</span> trace:
                    <span class="hljs-keyword">await</span> self._response_closed()
            <span class="hljs-keyword">raise</span> exc
...
</code></pre>
<p>AsyncHTTPConnection åŒæ ·è®¾æœ‰ä¿æŠ¤ï¼Œä½†å…¶èŒƒå›´ä»…è¦†ç›–åˆ° TCP è¿æ¥å»ºç«‹å’Œ CONNECT è¯·æ±‚è¿”å›ä¸ºæ­¢ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AsyncHTTPConnection.handle_async_request</span>
...
        <span class="hljs-keyword">except</span> BaseException <span class="hljs-keyword">as</span> exc:
            self._connect_failed = <span class="hljs-literal">True</span>
            <span class="hljs-keyword">raise</span> exc
...
</code></pre>
<p>ç„¶è€Œï¼Œåœ¨AsyncTunnelHTTPConnection.handle_async_requestçš„ä»£ç†éš§é“å»ºç«‹æµç¨‹ä¸­ï¼Œ<strong>æ§åˆ¶æµå‘ç”Ÿäº†ç»“æ„æ€§æ–­è£‚</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncTunnelHTTPConnection.handle_async_request</span>
...
                <span class="hljs-attr">connect_response</span> = await self._connection.handle_async_request(
                    connect_request
                )
...
</code></pre>
<p>æ­¤æ—¶ AsyncHTTP11Connection._state å·²è¢«è®¾ä¸º ACTIVEã€‚è‹¥ CONNECT è¯·æ±‚è¢«æ‹’ç»ï¼ˆå¦‚ 407 è®¤è¯å¤±è´¥ï¼‰ï¼Œä»£ç ä¼šæ­£ç¡®è°ƒç”¨ aclose() è¿›è¡Œæ¸…ç†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#  AsyncTunnelHTTPConnection.handle_async_request</span>
...
                if connect_response.status &lt; 200 or connect_response.status &gt; 299:
                    <span class="hljs-attr">reason_bytes</span> = connect_response.extensions.get(<span class="hljs-string">"reason_phrase"</span>, b<span class="hljs-string">""</span>)
                    <span class="hljs-attr">reason_str</span> = reason_bytes.decode(<span class="hljs-string">"ascii"</span>, errors=<span class="hljs-string">"ignore"</span>)
                    <span class="hljs-attr">msg</span> = <span class="hljs-string">"%d %s"</span> % (connect_response.status, reason_str)
                    await self._connection.aclose()
                    raise ProxyError(msg)
...
</code></pre>
<p>ä½†å¦‚æœ CONNECT æˆåŠŸè¿”å› 200ï¼Œè€Œåç»­çš„ TLS æ¡æ‰‹å¤±è´¥ï¼Œåˆ™æ²¡æœ‰å¯¹åº”çš„å¼‚å¸¸å¤„ç†è·¯å¾„ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta">#  AsyncTunnelHTTPConnection.handle_async_request</span>
...
                <span class="hljs-function"><span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> <span class="hljs-title">Trace</span>(<span class="hljs-params"><span class="hljs-string">"start_tls"</span>, logger, request, kwargs</span>) <span class="hljs-keyword">as</span> trace:
                    stream</span> = <span class="hljs-keyword">await</span> stream.start_tls(**kwargs)
                    trace.return_value = stream
...
</code></pre>
<p>å¦‚å‰æ–‡æ‰€è¿°ï¼Œstream æ˜¯ AnyIOStream å¯¹è±¡ã€‚è°ƒç”¨ stream.start_tls() æ—¶ï¼Œè‹¥å‘ç”Ÿå¼‚å¸¸ï¼ŒAnyIOStream.start_tls() ä¼šå…³é—­åº•å±‚ socketã€‚ä½†è¿™ä»…åœç•™åœ¨ç½‘ç»œå±‚çš„æ¸…ç†â€”â€”ä¸Šå±‚çš„ AsyncHTTP11Connection å¯¹æ­¤æ— æ„ŸçŸ¥ï¼Œå…¶ _state ä»ä¿æŒ ACTIVEï¼›åŒæ—¶ AsyncTunnelHTTPConnection ä¹Ÿæœªæ•è·è¯¥å¼‚å¸¸æ¥è§¦å‘ self._connection.aclose()ã€‚</p>
<p>è¿™å¯¼è‡´ HTTP å±‚è¿æ¥çŠ¶æ€ä¸ç½‘ç»œå±‚å®é™…çŠ¶æ€æ°¸ä¹…è„±èŠ‚ï¼šTLS æ¡æ‰‹å¤±è´¥æ—¶ï¼Œå¼‚å¸¸ç›´æ¥å‘ä¸Šä¼ æ’­ï¼Œæ²¡æœ‰ä»»ä½•ä»£ç è·¯å¾„å°† _state ä» ACTIVE è½¬ä¸º CLOSEDï¼Œæœ€ç»ˆå½¢æˆzombie connectã€‚</p>
<p><strong>å¼‚å¸¸ç»§ç»­å‘ä¸Šä¼ æ’­?æœ€ç»ˆåˆ°è¾¾è°ƒç”¨é“¾é¡¶ç«¯çš„ Connection Pool</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AsyncConnectionPool.handle_async_request</span>
...
                <span class="hljs-keyword">try</span>:
                    <span class="hljs-comment"># Send the request on the assigned connection.</span>
                    response = <span class="hljs-keyword">await</span> connection.handle_async_request(
                        pool_request.request
                    )
                <span class="hljs-keyword">except</span> ConnectionNotAvailable:
                    <span class="hljs-comment"># In some cases a connection may initially be available to</span>
                    <span class="hljs-comment"># handle a request, but then become unavailable.</span>
                    <span class="hljs-comment">#</span>
                    <span class="hljs-comment"># In this case we clear the connection and try again.</span>
                    pool_request.clear_connection()
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-keyword">break</span>  <span class="hljs-comment"># pragma: nocover</span>
...
</code></pre>
<p>æ­¤å¤„åªæ•è· ConnectionNotAvailable å¼‚å¸¸è¿›è¡Œé‡è¯•ã€‚TLS æ¡æ‰‹å¤±è´¥æŠ›å‡ºçš„å¼‚å¸¸æœªè¢«æ•è·ï¼Œç»§ç»­å‘ä¸Šä¼ æ’­ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AsyncConnectionPool.handle_async_request</span>
...
        <span class="hljs-keyword">except</span> BaseException <span class="hljs-keyword">as</span> exc:
            <span class="hljs-keyword">with</span> self._optional_thread_lock:
                <span class="hljs-comment"># For any exception or cancellation we remove the request from</span>
                <span class="hljs-comment"># the queue, and then re-assign requests to connections.</span>
                self._requests.remove(pool_request)
                closing = self._assign_requests_to_connections()

            <span class="hljs-keyword">await</span> self._close_connections(closing)
            <span class="hljs-keyword">raise</span> exc <span class="hljs-keyword">from</span> <span class="hljs-literal">None</span>
...
</code></pre>
<p>æ­¤å¤„ _assign_requests_to_connections() ä¼šéå†è¿æ¥æ± ï¼Œå†³å®šå“ªäº›è¿æ¥éœ€è¦å…³é—­ã€‚å®ƒä¼šæ£€æŸ¥ connection.is_closed() å’Œ connection.has_expired()ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AsyncConnectionPool._assign_requests_to_connections</span>
...
        <span class="hljs-comment"># First we handle cleaning up any connections that are closed,</span>
        <span class="hljs-comment"># have expired their keep-alive, or surplus idle connections.</span>
        <span class="hljs-keyword">for</span> connection <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>(self._connections):
            <span class="hljs-keyword">if</span> connection.is_closed():
                <span class="hljs-comment"># log: "removing closed connection"</span>
                self._connections.remove(connection)
            <span class="hljs-keyword">elif</span> connection.has_expired():
                <span class="hljs-comment"># log: "closing expired connection"</span>
                self._connections.remove(connection)
                closing_connections.append(connection)
            <span class="hljs-keyword">elif</span> (
                connection.is_idle()
                <span class="hljs-keyword">and</span> <span class="hljs-built_in">sum</span>(connection.is_idle() <span class="hljs-keyword">for</span> connection <span class="hljs-keyword">in</span> self._connections)
                &gt; self._max_keepalive_connections
            ):
                <span class="hljs-comment"># log: "closing idle connection"</span>
                self._connections.remove(connection)
                closing_connections.append(connection)
...
</code></pre>
<p>è¿™é‡Œçš„ connection å³å‰æ–‡çš„ AsyncTunnelHTTPConnection å®ä¾‹ã€‚è¿™äº›æ–¹æ³•ç»è¿‡å±‚å±‚ä»£ç†ï¼šAsyncTunnelHTTPConnection â†’ AsyncHTTPConnection â†’ AsyncHTTP11Connectionã€‚</p>
<ul>
<li>
<p>is_closed() â†’ Falseï¼ˆ_state == ACTIVEï¼‰</p>
</li>
<li>
<p>has_expired() â†’ Falseï¼ˆä»…å½“ _state == IDLE æ—¶æ‰æ£€æŸ¥å¯è¯»æ€§ï¼‰</p>
</li>
</ul>
<p>å› æ­¤ï¼Œå³ä½¿å¼‚å¸¸ä¼ æ’­åˆ°æœ€é¡¶å±‚ï¼ŒAsyncConnectionPool ä¹Ÿæ— æ³•è¯†åˆ«è¿™ä¸ªå·²æ–­å¼€çš„è¿æ¥ï¼Œåªèƒ½å°†å¼‚å¸¸ç»§ç»­æŠ›å‡ºã€‚</p>
<p><strong>è¿˜æœ‰æ›´ä¸Šå±‚å—ï¼Ÿ</strong></p>
<p>æˆ‘è§‰å¾—æ²¡æœ‰äº†ã€‚except BaseExceptionå—ä¸­çš„raise exc from Noneå°±æ˜¯æœ€ç»ˆå‡ºå£ï¼Œå¼‚å¸¸ç›´æ¥æŠ›ç»™è°ƒç”¨httpcoreçš„ç”¨æˆ·ä»£ç ï¼ˆå¦‚ httpx æˆ–åº”ç”¨å±‚ï¼‰ã€‚å¹¶ä¸”ï¼Œå¼‚å¸¸è¶Šå¾€ä¸ŠæŠ›ï¼Œè¶Šè„±ç¦»åŸå§‹è¿æ¥å¯¹è±¡çš„ä¸Šä¸‹æ–‡ï¼Œè¿™ä¸åº”è¯¥è§†ä¸ºåˆç†ã€‚</p>
<h3 data-id="heading-1">ä¿®å¤æ–¹æ¡ˆ</h3>
<p>é—®é¢˜çš„æœ¬è´¨å·²ç»æ¸…æ™°ï¼šTLS æ¡æ‰‹å¤±è´¥æ—¶ï¼Œå¼‚å¸¸ä¼ æ’­è·¯å¾„ä¸Šç¼ºå°‘å¯¹AsyncHTTP11ConnectionçŠ¶æ€çš„æ˜¾å¼æ¸…ç†ã€‚</p>
<p>æˆ‘çš„ä¿®å¤å¾ˆç®€å•â€”â€”åœ¨ TLS æ¡æ‰‹é˜¶æ®µå¢åŠ å¼‚å¸¸æ•è·ï¼Œç¡®ä¿å¤±è´¥æ—¶ä¸»åŠ¨å…³é—­è¿æ¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#  AsyncTunnelHTTPConnection.handle_async_request</span>
...
                <span class="hljs-keyword">try</span>:
                    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> Trace(<span class="hljs-string">"start_tls"</span>, logger, request, kwargs) <span class="hljs-keyword">as</span> trace:
                        stream = <span class="hljs-keyword">await</span> stream.start_tls(**kwargs)
                        trace.return_value = stream
                <span class="hljs-keyword">except</span> Exception:
                    <span class="hljs-comment"># Close the underlying connection when TLS handshake fails to avoid</span>
                    <span class="hljs-comment"># zombie connections occupying the connection pool</span>
                    <span class="hljs-keyword">await</span> self._connection.aclose()
                    <span class="hljs-keyword">raise</span>
...
</code></pre>
<p>è¿™è¡Œawait self._connection.aclose()å¼ºåˆ¶å°†AsyncHTTP11Connection._stateä»ACTIVEè½¬ä¸ºCLOSEDï¼Œè®©è¿æ¥æ± çš„is_closed()æ£€æŸ¥èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«ï¼Œä»è€Œåœ¨ä¸‹ä¸€æ¬¡_assign_requests_to_connections()è°ƒç”¨æ—¶å°†è¯¥è¿æ¥ç§»é™¤ã€‚</p>
<h3 data-id="heading-2">æ€»ç»“</h3>
<p>é€šè¿‡è¿™æ¬¡è¿½è¸ªï¼Œæˆ‘å¯¹ httpcore çš„åˆ†å±‚æ¶æ„æœ‰äº†æ›´æ¸…æ™°çš„ç†è§£ã€‚è¿™ä¸ªåœºæ™¯çš„ç‰¹æ®Šä¹‹å¤„åœ¨äºï¼šå®ƒæ°å¥½å¤„äºå¤šä¸ªæŠ½è±¡å±‚çº§çš„äº¤æ¥å¤„â€”â€”ä¸ä»£ç†ä¹‹é—´çš„TCP è¿æ¥å·²å»ºç«‹ã€HTTP è¯·æ±‚å·²å®Œæˆï¼Œä½†åˆ°ç›®æ ‡åœ°å€çš„ TLS å‡çº§å°šæœªæˆåŠŸã€‚æ­¤æ—¶å¼‚å¸¸ä¼ æ’­è·¯å¾„è·¨è¶Šäº† Stream â†’ Connection â†’ Pool çš„è¾¹ç•Œï¼ŒçŠ¶æ€åŒæ­¥çš„å¤æ‚æ€§æ˜¾è‘—å¢åŠ ã€‚è¿™ç±»é—®é¢˜åœ¨å¼‚æ­¥ç½‘ç»œç¼–ç¨‹ä¸­å¹¶ä¸ç½•è§ï¼šå½“æ§åˆ¶æµåœ¨å¤šä¸ªå¯¹è±¡é—´å§”æ‰˜æ—¶ï¼Œç¡®ä¿æ¯ä¸ªé€€å‡ºè·¯å¾„éƒ½æ­£ç¡®åŒæ­¥çŠ¶æ€æ˜¯ä¸€é¡¹ç³»ç»Ÿæ€§æŒ‘æˆ˜ã€‚æˆ‘çš„ä¿®å¤åªæ˜¯åœ¨ç°æœ‰çš„å¼‚å¸¸å¤„ç†æ¡†æ¶ä¸­ï¼Œè¡¥å…¨äº†è¿™ä¸€ç‰¹å®šè·¯å¾„çš„çŠ¶æ€æ¸…ç†é€»è¾‘ã€‚</p>
<p>PR é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpcore%2Fpull%2F1049" target="_blank" title="https://github.com/encode/httpcore/pull/1049" ref="nofollow noopener noreferrer">github.com/encode/httpâ€¦</a></p>
<p>æ„Ÿè°¢ encode å›¢é˜Ÿç»´æŠ¤äº†å¦‚æ­¤ä¼˜é›…çš„ä»£ç åº“ï¼Œä¹Ÿæ„Ÿè°¢ AI ååŠ©å®Œæˆäº†è¿™æ¬¡æ·±åº¦åˆ†æã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Viteä¸ºä»€ä¹ˆèƒ½æ¯”Webpackå¿«10å€ï¼Ÿæ­ç§˜å…¶æ ¸å¿ƒä¼˜åŒ–ç­–ç•¥]]></title>    <link>https://juejin.cn/post/7601175299010838543</link>    <guid>https://juejin.cn/post/7601175299010838543</guid>    <pubDate>2026-02-01T04:17:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601175299010838543" data-draft-id="7601046076944252943" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Viteä¸ºä»€ä¹ˆèƒ½æ¯”Webpackå¿«10å€ï¼Ÿæ­ç§˜å…¶æ ¸å¿ƒä¼˜åŒ–ç­–ç•¥"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-01T04:17:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Viteä¸ºä»€ä¹ˆèƒ½æ¯”Webpackå¿«10å€ï¼Ÿæ­ç§˜å…¶æ ¸å¿ƒä¼˜åŒ–ç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T04:17:42.000Z" title="Sun Feb 01 2026 04:17:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Viteä¸ºä»€ä¹ˆèƒ½æ¯”Webpackå¿«10å€ï¼Ÿæ­ç§˜å…¶æ ¸å¿ƒä¼˜åŒ–ç­–ç•¥</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨å‰ç«¯å¼€å‘é¢†åŸŸï¼Œæ„å»ºå·¥å…·çš„æ€§èƒ½ä¸€ç›´æ˜¯å¼€å‘è€…å…³æ³¨çš„ç„¦ç‚¹ã€‚éšç€é¡¹ç›®è§„æ¨¡çš„æ‰©å¤§ï¼Œä¼ ç»Ÿçš„æ‰“åŒ…å·¥å…·å¦‚Webpackåœ¨å¯åŠ¨å’Œçƒ­æ›´æ–°æ—¶é€æ¸æ˜¾éœ²å‡ºæ€§èƒ½ç“¶é¢ˆã€‚è€ŒViteçš„å‡ºç°ï¼Œä»¥å…¶æƒŠäººçš„é€Ÿåº¦ä¼˜åŠ¿ï¼ˆå®˜æ–¹å®£ç§°æ¯”Webpackå¿«10å€ï¼‰ï¼Œè¿…é€Ÿæˆä¸ºæ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·çš„ä»£è¡¨ã€‚é‚£ä¹ˆï¼ŒViteç©¶ç«Ÿæ˜¯å¦‚ä½•å®ç°è¿™ä¸€æ€§èƒ½é£è·ƒçš„ï¼Ÿæœ¬æ–‡å°†æ·±å…¥å‰–æViteçš„æ ¸å¿ƒä¼˜åŒ–ç­–ç•¥ï¼Œä»æ¶æ„è®¾è®¡åˆ°å…·ä½“å®ç°ï¼Œæ­ç¤ºå…¶é«˜é€ŸèƒŒåçš„æŠ€æœ¯å¥¥ç§˜ã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. åŸç”ŸESMçš„é©å‘½æ€§å˜é©</h3>
<h4 data-id="heading-4">1.1 ä¼ ç»Ÿæ‰“åŒ…å™¨çš„å›°å¢ƒ</h4>
<p>Webpackç­‰ä¼ ç»Ÿå·¥å…·é‡‡ç”¨"æ‰“åŒ…ä¼˜å…ˆ"çš„ç­–ç•¥ï¼šåœ¨å¼€å‘ç¯å¢ƒä¸‹å°†æ‰€æœ‰æ¨¡å—é¢„å…ˆæ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚è¿™ç§æ–¹å¼è™½ç„¶å…¼å®¹æ€§å¥½ï¼Œä½†éšç€é¡¹ç›®è§„æ¨¡å¢é•¿ä¼šå¸¦æ¥ä¸¤ä¸ªæ˜¾è‘—é—®é¢˜ï¼š</p>
<ul>
<li><strong>å†·å¯åŠ¨æ—¶é—´é•¿</strong>ï¼šéœ€è¦å®Œæ•´æ„å»ºä¾èµ–å›¾å¹¶æ‰“åŒ…æ‰€æœ‰èµ„æº</li>
<li><strong>HMRæ•ˆç‡ä½</strong>ï¼šå³ä½¿ä¿®æ”¹å•ä¸ªæ–‡ä»¶ä¹Ÿå¯èƒ½è§¦å‘æ•´ä¸ªbundleçš„é‡å»º</li>
</ul>
<h4 data-id="heading-5">1.2 Viteçš„ESMè§£å†³æ–¹æ¡ˆ</h4>
<p>Viteå……åˆ†åˆ©ç”¨ç°ä»£æµè§ˆå™¨å¯¹åŸç”ŸESæ¨¡å—(ESM)çš„æ”¯æŒï¼Œå®ç°äº†å¼€å‘ç¯å¢ƒçš„"æŒ‰éœ€ç¼–è¯‘"ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµè§ˆå™¨ç›´æ¥è¯·æ±‚ESæ¨¡å—</span>
&lt;script type=<span class="hljs-string">"module"</span> src=<span class="hljs-string">"/src/main.js"</span>&gt;&lt;/script&gt;
</code></pre>
<p>å…³é”®ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>æ— æ‰“åŒ…å¯åŠ¨</strong>ï¼šç›´æ¥å¯åŠ¨æœåŠ¡å™¨ï¼Œæµè§ˆå™¨æŒ‰éœ€è¯·æ±‚æ¨¡å—</li>
<li><strong>ä¾èµ–é¢„æ„å»º</strong>ï¼šä½¿ç”¨esbuildå°†CommonJS/UMDä¾èµ–è½¬æ¢ä¸ºESMæ ¼å¼å¹¶ç¼“å­˜</li>
<li><strong>æºç æŒ‰éœ€ç¼–è¯‘</strong>ï¼šä»…ç¼–è¯‘å½“å‰é¡µé¢éœ€è¦çš„æ–‡ä»¶ï¼ˆå¦‚.vue/.jsxï¼‰</li>
</ul>
<p>å®æµ‹æ•°æ®è¡¨æ˜ï¼Œä¸€ä¸ªåŒ…å«1000+æ¨¡å—çš„é¡¹ç›®ï¼ŒViteçš„å†·å¯åŠ¨æ—¶é—´å¯ä»¥æ§åˆ¶åœ¨1ç§’å†…ï¼Œè€ŒWebpackå¯èƒ½éœ€è¦20ç§’ä»¥ä¸Šã€‚</p>
<h3 data-id="heading-6">2. Esbuildçš„æ€§èƒ½ç¢¾å‹</h3>
<h4 data-id="heading-7">2.1 ä¼ ç»Ÿå·¥å…·é“¾çš„ç“¶é¢ˆ</h4>
<p>WebpackåŸºäºJavaScriptå®ç°çš„è½¬è¯‘å™¨å­˜åœ¨å›ºæœ‰æ€§èƒ½é™åˆ¶ï¼š</p>
<ul>
<li>Babel/Terserå•çº¿ç¨‹è¿è¡Œ</li>
<li>JavaScriptæœ¬èº«çš„æ‰§è¡Œæ•ˆç‡é™åˆ¶</li>
</ul>
<h4 data-id="heading-8">2.2 Esbuildçš„æè‡´ä¼˜åŒ–</h4>
<p>Viteä½¿ç”¨Goè¯­è¨€ç¼–å†™çš„Esbuildè¿›è¡Œå…³é”®è·¯å¾„å¤„ç†ï¼š</p>





























<table><thead><tr><th>ç‰¹æ€§</th><th>Esbuild</th><th>Babel</th><th>Terser</th></tr></thead><tbody><tr><td>è¯­è¨€</td><td>Go</td><td>JS</td><td>JS</td></tr><tr><td>å¹¶è¡ŒåŒ–</td><td>âœ”</td><td>âœ–</td><td>âœ–</td></tr><tr><td>ç¼–è¯‘é€Ÿåº¦(å€ç‡)</td><td>~100x</td><td>1x</td><td>~5x</td></tr></tbody></table>
<p>å®é™…åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li><strong>ä¾èµ–é¢„æ„å»º</strong>ï¼šæ¯”ä¼ ç»Ÿæ–¹æ¡ˆå¿«10-100å€</li>
<li><strong>ç”Ÿäº§æ„å»º</strong>ï¼šè™½ç„¶æœ€ç»ˆä»ç”¨Rollupï¼Œä½†ä½¿ç”¨esbuildè¿›è¡Œæœ€å°åŒ–(minify)</li>
</ul>
<h3 data-id="heading-9">3. æ™ºèƒ½ç¼“å­˜ç­–ç•¥</h3>
<h4 data-id="heading-10">3.1 HTTPç¼“å­˜å¤´ä¼˜åŒ–</h4>
<p>Viteä¸ºä¸åŒèµ„æºç±»å‹è®¾ç½®ç²¾ç¡®çš„Cache-Controlå¤´ï¼š</p>
<pre><code class="hljs language-http" lang="http"># npmä¾èµ–ï¼ˆå‡ ä¹ä¸å˜ï¼‰
Cache-Control: max-age=31536000,immutable

# æºç æ–‡ä»¶ï¼ˆå¯èƒ½å˜åŒ–ï¼‰
Cache-Control: no-cache,must-revalidate
</code></pre>
<h4 data-id="heading-11">3.2 æ–‡ä»¶ç³»ç»Ÿç¼“å­˜æœºåˆ¶</h4>
<p>Viteé‡‡ç”¨å¤šå±‚ç¼“å­˜ç»“æ„ï¼š</p>
<ol>
<li><strong>node_modules/.vite</strong>ï¼šé¢„æ„å»ºä¾èµ–ç¼“å­˜</li>
<li><strong>æµè§ˆå™¨å†…å­˜ç¼“å­˜</strong>ï¼šé¿å…é‡å¤è¯·æ±‚å·²ç¼–è¯‘æ¨¡å—</li>
</ol>
<p>å¯¹æ¯”æµ‹è¯•æ˜¾ç¤ºï¼ŒäºŒæ¬¡å¯åŠ¨æ—¶Viteçš„çƒ­æ›´æ–°é€Ÿåº¦å¯ä»¥æå‡40%ä»¥ä¸Šã€‚</p>
<h3 data-id="heading-12">4. CSRä¸SSRçš„ç»Ÿä¸€ä¼˜åŒ–</h3>
<h4 data-id="heading-13">4.1 CSRçš„ç‰¹æ®Šå¤„ç†</h4>
<p>å¯¹äºå®¢æˆ·ç«¯æ¸²æŸ“ï¼š</p>
<ul>
<li><strong>è·¯ç”±çº§ä»£ç åˆ†å‰²</strong>ï¼šè‡ªåŠ¨è¯†åˆ«åŠ¨æ€import()</li>
<li><strong>å¼‚æ­¥chunkåŠ è½½</strong>ï¼šä¼˜å…ˆåŠ è½½å¯è§†åŒºèµ„æº</li>
</ul>
<h4 data-id="heading-14">4.2 SSRçš„é«˜æ•ˆæ”¯æŒ</h4>
<p>æœåŠ¡ç«¯æ¸²æŸ“æ—¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">ssr</span>: {
   <span class="hljs-comment">// SSRä¸“ç”¨å¤–éƒ¨åŒ–é…ç½® </span>
   <span class="hljs-attr">external</span>: [<span class="hljs-string">'react'</span>, <span class="hljs-string">'react-dom'</span>],
   
   <span class="hljs-comment">// SSRä¸“ç”¨å…¥å£ä¼˜åŒ–  </span>
   <span class="hljs-attr">noExternal</span>: <span class="hljs-regexp">/\.css$/</span>
 }
}
</code></pre>
<p>åˆ›æ–°ç‚¹åœ¨äºSSR bundlerä¸CSR bundlerå…±äº«åŒä¸€å¥—æ’ä»¶ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-15">Webpackå¯¹æ¯”åŸºå‡†æµ‹è¯•</h3>
<p>é€šè¿‡å®é™…é¡¹ç›®æµ‹é‡ä¸åŒæ“ä½œçš„æ—¶é—´æ¶ˆè€—ï¼ˆmsï¼‰ï¼š</p>





























<table><thead><tr><th>Operation</th><th align="right">Webpack(5.x)</th><th align="right">Vite(4.x)</th><th align="right">Speedup</th></tr></thead><tbody><tr><td>Cold Start</td><td align="right">23,000+</td><td align="right">800+</td><td align="right">~28x</td></tr><tr><td>HMR (Small file)</td><td align="right">1200</td><td align="right">20</td><td align="right">~60x</td></tr><tr><td>Production Build*</td><td align="right">45,000+</td><td align="right">12,000+</td><td align="right">~3.7x</td></tr></tbody></table>
<p>(*æ³¨ï¼šç”Ÿäº§æ„å»ºå·®å¼‚è¾ƒå°å› ä¸ºéƒ½éœ€å®Œæ•´æ‰“åŒ…)</p>
<h2 data-id="heading-16"/>
<h3 data-id="heading-17"/>
<h2 data-id="heading-18"/>
<h2 data-id="heading-19"/>
<h2 data-id="heading-20"/>
<h2 data-id="heading-21"/>
<h2 data-id="heading-22"/>
<h2 data-id="heading-23"/>
<h2 data-id="heading-24"/>
<h2 data-id="heading-25"/>
<h2 data-id="heading-26"/>
<h2 data-id="heading-27"/>
<h2 data-id="heading-28"/>
<p>è¿™äº›æ•°æ®å……åˆ†å±•ç¤ºäº†ä¸ºä»€ä¹ˆå¼€å‘è€…ä¼šæ„Ÿå—åˆ°"10å€é€Ÿ"çš„ä½“éªŒæå‡ã€‚</p>
<h3 data-id="heading-29"/>
<h3 data-id="heading-30"/>
<h3 data-id="heading-31"/>
<h3 data-id="heading-32"/>
<h3 data-id="heading-33"/>
<h3 data-id="heading-34"/>
<ol start="5">
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
</ol>
<p>æ·±åº¦æŠ€æœ¯è§£æï¼š</p>
<ol start="21">
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
<li/>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨çƒé¦–æ¬¾ç”µå•†è§†é¢‘Multi-Agentæ¥äº†ï¼ä¸€å¼ å›¾ç”Ÿæˆå¸¦è´§è§†é¢‘ï¼Œæ•ˆç‡èµ·é£~]]></title>    <link>https://juejin.cn/post/7601169987412557862</link>    <guid>https://juejin.cn/post/7601169987412557862</guid>    <pubDate>2026-02-01T04:22:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601169987412557862" data-draft-id="7601169987412525094" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨çƒé¦–æ¬¾ç”µå•†è§†é¢‘Multi-Agentæ¥äº†ï¼ä¸€å¼ å›¾ç”Ÿæˆå¸¦è´§è§†é¢‘ï¼Œæ•ˆç‡èµ·é£~"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-02-01T04:22:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIè¢‹é¼ å¸"/> <meta itemprop="url" content="https://juejin.cn/user/2032372037988990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨çƒé¦–æ¬¾ç”µå•†è§†é¢‘Multi-Agentæ¥äº†ï¼ä¸€å¼ å›¾ç”Ÿæˆå¸¦è´§è§†é¢‘ï¼Œæ•ˆç‡èµ·é£~
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2032372037988990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIè¢‹é¼ å¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-01T04:22:04.000Z" title="Sun Feb 01 2026 04:22:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æœ€è¿‘åœ¨ç ”ç©¶AIåšè¥é”€çŸ­è§†é¢‘çš„è¢‹é¼ å¸ã€‚</p>
<p>æˆ‘24å¹´ä¸€å¼€å§‹æ˜¯åšæŠ–éŸ³çŸ­è§†é¢‘çš„ï¼Œæ·±çŸ¥åšè§†é¢‘æœ‰å¤šéº»çƒ¦ã€‚</p>
<p>ä»å£æ’­ã€ç´ ææ‹æ‘„ï¼Œåˆ°å†™æ–‡æ¡ˆã€åæœŸå‰ªè¾‘ï¼Œè¿™äº›ç¯èŠ‚åŠ åœ¨ä¸€èµ·ï¼Œå³ä¾¿æˆ‘åªæ˜¯æƒ³åšä¸€æ¡çœ‹èµ·æ¥è´¨é‡ä¸€èˆ¬çš„çŸ­è§†é¢‘ï¼Œä¹Ÿè¦è€—è´¹æˆ‘åŠå¤©æ—¶é—´ã€‚</p>
<p>æ›´åˆ«æè·¨å¢ƒè¥é”€è§†é¢‘äº†ï¼Œä¸ä»…è¯­è¨€æœ‰é—¨æ§›ï¼Œæ¨¡ç‰¹ã€åœºæ™¯çš„æˆæœ¬æ›´æ˜¯é«˜å¾—å“äººã€‚</p>
<p>æ‰€ä»¥æˆ‘ä¸€ç›´åœ¨æ‰¾AIä¸€é”®ç”Ÿæˆçš„æ–¹æ¡ˆï¼Œè¯•å›¾æŠŠè¿™ä¸ªè¿‡ç¨‹è‡ªåŠ¨åŒ–ã€‚</p>
<p>å…ˆçœ‹çœ‹æˆ‘å…¨ç¨‹ä¸ç”¨åŠ¨æ‰‹ï¼Œå°±åšå‡ºæ¥çš„æµ·å¤–è¥é”€çŸ­è§†é¢‘ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2834dbc79b0748c0a6dc8749419f3a9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=pCWl%2F%2BqQcl8lasTgQyN4zQd2%2B8c%3D" alt="wxv_4366268611762503685" loading="lazy"/></p>
<p>åœ¨ç”Ÿæˆçš„è§†é¢‘ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æŠ•å½±ä»ªä¸€ç›´æ²¡æœ‰å˜åŒ–ï¼Œä¸è®ºåœºæ™¯æ€ä¹ˆå˜æ¢ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯åŒä¸€æ¬¾æŠ•å½±ä»ªã€‚</p>
<p>æ•ˆæœæ˜¯ä¸æ˜¯è¿˜ä¸é”™</p>
<p>è¯´å®è¯ï¼Œæˆ‘æ²¡æƒ³åˆ°ç°åœ¨åšæµ·å¤–è¥é”€çŸ­è§†é¢‘ä¹Ÿèƒ½ä¸€é”®ç”Ÿæˆäº†ã€‚</p>
<p>ä¸ºä»€ä¹ˆæˆ‘æƒ³åˆ°å»æ¢ç´¢ä¸€é”®ç”Ÿæˆè¥é”€çŸ­è§†é¢‘å‘¢ï¼Ÿäº‹æƒ…çš„èµ·å› æ˜¯è¿™æ ·çš„ï¼š</p>
<p>æˆ‘ä¹‹å‰åˆ·çŸ­è§†é¢‘ï¼Œå¶ç„¶åˆ·åˆ°äº†ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„æ¡ˆä¾‹ã€‚</p>
<p>è¿™ä¸ªè§†é¢‘ç›®å‰çš„æ’­æ”¾é‡å’Œç‚¹èµé‡éƒ½éå¸¸é«˜ï¼Œå¯èƒ½å¾ˆå¤šæœ‹å‹ä¹Ÿåˆ·åˆ°è¿‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ed2afefa6d84105a9739da1dcb943eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=78iu1Mc4Mv6jO%2FzpK9QwJ9lvcfs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/245ae25aeacd4085a31f87bf32ea438f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=Z3jhoXuDSN3P4cKmZGCr831pwvQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è§†é¢‘é‡Œè¿™ä½è€å“¥åˆ†äº«äº†ä»–å¦‚ä½•åœ¨30å¤©å†…å»ºç«‹ä¸€ä¸ªç™¾ä¸‡ç¾å…ƒå“ç‰Œçš„ç»å†ã€‚</p>
<p>æˆ‘åå¤çœ‹äº†å¥½å‡ éï¼Œè§‰å¾—ä»–æŠŠæµ·å¤–è¥é”€çš„åº•å±‚é€»è¾‘è®²å¾—å¤ªé€äº†</p>
<p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œæˆ‘ä¸“é—¨æ ¹æ®ä»–çš„è§†é¢‘å†…å®¹æ•´ç†äº†ä¸€å¼ æ‹†è§£å›¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b423fc317134d7395705c9fdfff7efe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=iPBgT66yGGv%2BZoi33H74xPJF5u0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶å®æˆ‘24å¹´åˆšå¼€å§‹åšçŸ­è§†é¢‘çš„æ—¶å€™ï¼Œæˆ‘å°±æƒ³å°è¯•æµ·å¤–å¸¦è´§ï¼Œä½†æ€»ç»“ä¸‹æ¥æˆ‘è§‰å¾—ä¸»è¦æœ‰ä¸¤ä¸ªæ ¸å¿ƒéš¾ç‚¹ï¼š</p>
<p>ç¬¬ä¸€æ˜¯æ‰¾å¯¹äº§å“æ–¹å‘ï¼Œç¬¬äºŒæ˜¯æŒç»­ç”Ÿäº§çˆ†æ¬¾è¥é”€è§†é¢‘ã€‚</p>
<p>æŒ‰ç…§è§†é¢‘é‡Œè¿™ä½è€å“¥çš„è¯´æ³•ï¼Œä»–ä¸ºäº†å–å¥½è¿™æ¬¾æ™®æ‹‰æé˜²æ»‘è¢œï¼Œåšäº†ææ·±çš„å¸‚åœºæ´å¯Ÿï¼šå‘ç°ç›®æ ‡ç”¨æˆ·æ˜¯é‚£äº›è¿½æ±‚That Girlå®¡ç¾ã€ä¹Ÿå°±æ˜¯è¿½æ±‚è‡ªå¾‹ã€ç²¾è‡´ã€æç®€ç”Ÿæ´»æ–¹å¼çš„å¹´è½»å¥³æ€§ï¼Œä¸ºäº†æ‰“åŠ¨è¿™ç¾¤äººï¼Œå¿…é¡»ç”Ÿäº§é«˜è´¨é‡çš„è§†è§‰ç´ æã€‚</p>
<p>æ‰€ä»¥ï¼Œä»–ä¸“é—¨åœ¨æŸæ—æ‰¾äº†ä¸“ä¸šçš„æ—¶å°šæ‘„å½±å¸ˆï¼Œç§Ÿäº†ç¬¦åˆGlossieré‚£ç§é«˜çº§æ„Ÿè‰²è°ƒçš„æ‘„å½±æ£šï¼Œè¿˜é¢è¯•äº†ä¸€å †æ¨¡ç‰¹ï¼Œåªä¸ºæ‰¾åˆ°æœ€ç¬¦åˆThat Girlæ°”è´¨çš„é‚£å¼ è„¸ã€‚</p>
<p>ä½†å¯¹äºå¤§éƒ¨åˆ†äººæ¥è¯´çˆ†æ¬¾è§†é¢‘å¾€å¾€æ˜¯å¯é‡ä¸å¯æ±‚çš„ï¼Œé™¤äº†å†…å®¹æœ¬èº«ï¼Œè¿˜éœ€è¦è¿æ°”ã€‚å¯¹äºæˆ‘ä»¬è¿™ç§åˆšèµ·æ­¥çš„ä¸ªäººæˆ–è€…å°å›¢é˜Ÿï¼Œè¿˜æœ‰ä¸ªæœ€ç¨³å¦¥çš„ç­–ç•¥å…¶å®æ˜¯å †é‡ï¼Œä¸€æ¡ä¸çˆ†æˆ‘å°±å‘100æ¡ï¼Œæ€»æœ‰ä¸€æ¡èƒ½è·‘å‡ºæ¥ï¼ˆå½“ç„¶è¿‡ç¨‹ä¸­ä¹Ÿè¦ä¸æ–­ä¼˜åŒ–ï¼‰ã€‚</p>
<p>ä½†å¦‚æœæˆ‘ä»¬å­¦è¿™ä½è€å“¥ï¼Œå¦‚æœæ¯æ¡è§†é¢‘éƒ½æ‰¾ä¸“ä¸šæ‘„å½±å¸ˆã€ç§Ÿæ£šã€è¯·æ¨¡ç‰¹ï¼Œè¿™100æ¡è§†é¢‘ï¼Œä¸ç®¡æ˜¯æ—¶é—´æˆæœ¬ï¼Œè¿˜æ˜¯è´¹ç”¨éƒ½èƒ½æŠŠäººå‹å®ã€‚</p>
<p>æˆ‘å°±åœ¨æƒ³ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆæ›´å¿«ï¼Œæˆæœ¬æ›´ä½ï¼Œè€Œä¸”æ•ˆæœè¿˜ä¸é”™çš„æŠ€æœ¯æ‰‹æ®µèƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</p>
<p>äºæ˜¯ï¼Œæˆ‘å‰æ®µæ—¶é—´æäº†ä¸€å¥—è¥é”€çŸ­è§†é¢‘ä¸€é”®ç”Ÿæˆå¹³å°ï¼Œå¸Œæœ›èƒ½å¿«é€Ÿå¤åˆ»ä¸€ä¸‹é‚£ä½ç™¾ä¸‡åˆ€å“ç‰Œè€å“¥çš„è¥é”€ç¥è¯ã€‚</p>
<p>å¹³å°çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼šç”¨AIæ›¿ä»£æ˜‚è´µçš„æ‘„å½±å¸ˆã€æ¨¡ç‰¹å’Œæ–‡æ¡ˆï¼Œæœ€åä¸€é”®åˆæˆè¥é”€çŸ­è§†é¢‘ã€‚</p>
<p>ç»è¿‡æˆ‘çš„ä¸€ç•ªç ”ç©¶ï¼Œè¦æƒ³æ•ˆæœå¥½ï¼Œä¸€å®šè¦é›†é½å½“ä»Šæœ€å¼ºçš„ç”Ÿå›¾æ¨¡å‹ï¼Œç”Ÿè§†é¢‘æ¨¡å‹ï¼Œæ–‡æ¡ˆæ¨¡å‹ï¼Œæ•°å­—äººæœåŠ¡ã€‚</p>
<p>éœ€è¦çš„å·¥å…·ä¸»è¦æœ‰äº”ä¸ªï¼ˆéƒ½æ˜¯ç›®å‰å¸‚é¢ä¸Šåœ¨å„è‡ªé¢†åŸŸæœ€èƒ½æ‰“çš„ï¼‰ï¼š</p>
<p>NanoBananaï¼ˆæˆ–å…¶ä»–é«˜è´¨é‡ç”Ÿå›¾æ¨¡å‹ï¼‰ï¼šè´Ÿè´£æå®šçš®å›Šï¼Œç”Ÿæˆç¬¦åˆå®¡ç¾çš„äº§å“å›¾å’Œæ¨¡ç‰¹å›¾ã€‚Â </p>
<p>Gemini 3ï¼ˆæˆ–å…¶ä»–é«˜æ™ºå•†LLMï¼‰ï¼šè´Ÿè´£æå®šå¤§è„‘ï¼Œç”Ÿæˆå£æ’­æ–‡æ¡ˆå’Œæç¤ºè¯ã€‚Â </p>
<p>index-ttï¼ˆæˆ–å…¶ä»–å¼€æºTTSï¼‰ï¼šè´Ÿè´£ç”Ÿæˆå¸¦æƒ…ç»ªçš„è¯­éŸ³ã€‚Â </p>
<p>HeyGenï¼šè´Ÿè´£æ•°å­—äººç”Ÿæˆã€‚Â </p>
<p>Veo3.1æˆ–è€…Sora2ï¼šè´Ÿè´£ç”Ÿæˆç©ºé•œç´ æã€‚</p>
<p>ç»å¸¸çœ‹æˆ‘çš„æœ‹å‹åº”è¯¥çŸ¥é“ï¼Œæˆ‘å‰æ®µæ—¶é—´å°±å¼€å‘äº†ä¸€ä¸ªæ•°å­—äººè¥é”€è§†é¢‘ä¸€é”®ç”Ÿæˆå¹³å°ï¼Œä½†åªæ˜¯ä¸ªMVPé¡¹ç›®ï¼Œè¿˜å¾ˆä¸æˆç†Ÿ...</p>
<p>è€Œä¸”è¦é›†é½è¿™äº›å·¥å…·ï¼Œå¹¶å®ç°å…¨è‡ªåŠ¨åŒ–ï¼Œå·¥ç¨‹é‡ä¹Ÿæ˜¯ç›¸å½“ä¹‹å¤§ï¼Œä¸æ˜¯çŸ­æ—¶é—´èƒ½æå®šçš„äº‹æƒ…ã€‚å…‰æ˜¯è¿™äº›å·¥å…·çš„APIåŠ èµ·æ¥ï¼Œä¸€ä¸ªæœˆå°±æ˜¯ä¸€ç¬”ä¸å°çš„å¼€æ”¯ï¼Œè¿˜å¾—å†™ä»£ç æŠŠå®ƒä»¬ä¸²èµ·æ¥ã€‚</p>
<p>äºæ˜¯æˆ‘å¼€å§‹æ‰¾æœ‰æ²¡æœ‰ç°æˆçš„æ•´åˆæ–¹æ¡ˆï¼Œæ‰¾äº†åŠå¤©ï¼Œæˆ‘å‘ç°ç›®å‰ä¸“é—¨åšè¥é”€è§†é¢‘çš„å¹³å°è¿˜æ¯”è¾ƒå°‘ã€‚</p>
<p>æœ‹å‹æ¨èäº†ä¸€æ¬¾æœ€è¿‘å…¬æµ‹æ¯”è¾ƒç«çˆ†çš„å¹³å°ï¼Œæ˜¯ç”±è¥èµ›AIå‘å¸ƒçš„inSai Hilightï¼Œå·ç§°æ˜¯è·¨å¢ƒç”µå•†ç‰ˆSoraï¼Œè²Œä¼¼èƒ½æ»¡è¶³ä»¥ä¸Šçš„æ¡ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdd59dc325ce4f8b825b69e7d2d1ce50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=Wmi2sFiUHsAGaGs%2BD9vZ06GMxTM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>hi-light.ai</p>
<p>çœ‹äº†ä¸€ä¸‹ï¼Œä»–ä»¬è¿™åŠŸèƒ½ç¡®å®æœ‰ç‚¹ä¸°å¯Œäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aac54c9761264898b25a961e5c0e76e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=TPBecBuqxThVmBsgotBNwGguCZU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/>æˆ‘é‚£ä¸ªå¹³å°ä¼°è®¡é æˆ‘è‡ªå·±æ˜¯èµ¶ä¸ä¸Šäººå®¶äº†ï¼Œç›®å‰ä¹Ÿæ²¡å¤šå¤§ç«äº‰åŠ›ï¼Œåç»­å‡†å¤‡å¼€æºäº†ï¼ˆæœ‰å…´è¶£å‚ä¸å¼€æºçš„æœ‹å‹ï¼Œå¯ä»¥è”ç³»æˆ‘ï¼‰ã€‚<img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f31101893dfb48b0971c76b480aef57d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=s%2BLDrGeqbOqGpSTdQTFoOSxuw4s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-0">Hilightæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ</h3>
<p>1.ä¸€é”®æˆç‰‡ï¼šæ— éœ€æ‹æ‘„å‰ªè¾‘ï¼Œåªéœ€æ‰”è¿›ä¸€ä¸ªå•†å“é“¾æ¥æˆ–è€…ä¸Šä¼ å•†å“å›¾ï¼ŒAIè‡ªåŠ¨åˆ†æå–ç‚¹ã€å†™è„šæœ¬ã€ç”Ÿæˆè§†é¢‘ï¼›</p>
<p>2.å•†å“/äººç‰©è·¨å¸§ä¸€è‡´ï¼šæ— è®ºé•œå¤´æ€ä¹ˆåˆ‡æ¢ï¼Œæ¨¡ç‰¹æ‰‹é‡Œçš„å•†å“ä¼šä¿æŒåŸæ ·ï¼Œä¸€è‡´æ€§å¾ˆä¸é”™ï¼›</p>
<p>3.å¤šæ™ºèƒ½ä½“æ…¢æ€è€ƒæ¶æ„ï¼šèƒŒåæ˜¯10å¤šä¸ªAIä¸“å®¶ï¼ˆå¯¼æ¼”ã€å‰ªè¾‘ã€è´¨æ£€ï¼‰åœ¨åä½œï¼Œé‡‡ç”¨ç±»ä¼¼DeepSeekçš„æ…¢æ€è€ƒé€»è¾‘ï¼Œè‡ªæˆ‘åæ€ã€è‡ªæˆ‘ä¿®æ­£ï¼Œç”¨æ·±åº¦æ€è€ƒæ¢å–é«˜è´¨é‡äº¤ä»˜ã€‚</p>
<p>4.ç²¾è°ƒæ¨¡å¼ï¼šæ‹’ç»é»‘ç›’å¼ç”Ÿæˆï¼Œæ”¯æŒåˆ†å±‚ç¼–è¾‘ã€Touch Editï¼ˆæŒ‡å“ªæ”¹å“ªï¼‰ã€æ–‡å­—ä¿®æ”¹ï¼ŒAIè§†é¢‘å˜å¾—å¯æ§ã€‚</p>
<p>5.æ•°å­—äººè¡¨ç°åª²ç¾å®æ‹ï¼šæ•°å­—äººå£å‹åŠ¨ä½œè‡ªç„¶ï¼Œæœ€å…³é”®çš„æ˜¯æ‰‹æŒäº§å“éå¸¸ç¨³å®šï¼Œå¯ä»¥æ›¿ä»£æ˜‚è´µçš„å¤–ç±æ¨¡ç‰¹ã€‚</p>
<p>6.é™æœ¬å¢æ•ˆï¼šç”¨å‡ å—é’±çš„ç®—åŠ›æˆæœ¬ï¼Œåšå‡ºäº†å‡ åƒå—çš„å®æ‹æ•ˆæœï¼Œå¯¹äºéœ€è¦å¤§é‡é“ºç´ æçš„è·¨å¢ƒå–å®¶æ¥è¯´ï¼Œè¿™æ˜¯çº¯åˆ©æ¶¦ï¼ˆçœ‹äº†ä¸‹ï¼Œå•ä¸ªè§†é¢‘ç”Ÿæˆçš„ä»·æ ¼åœ¨3å…ƒåˆ°åå‡ å…ƒä¸ç­‰ï¼‰ã€‚</p>
<p>æˆ‘å…ˆçœ‹äº†ä¸€ä¸‹Hilightçš„æ¶æ„å›¾ï¼Œå…ˆä¸çœ‹ä¸Šé¢å¤æ‚çš„å·¥ç¨‹å®ç°ï¼Œæœ€åº•å±‚çš„æ¨¡å‹é˜µå®¹ç›´æ¥å°±æŠŠæˆ‘å¸å¼•ä½äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec9473933e764f698cb18af61d5e77ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=Q1MKlm32LaVCMjqQ04MxZ7g3Wnk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ‰å†™ä½œç¬¬ä¸€çš„Gemini 3ï¼Œç”Ÿå›¾ç¬¬ä¸€çš„é¦™è•‰Proï¼ˆNanoBanana Proï¼‰ï¼ŒéŸ³ç”»åŒæ­¥å¤©èŠ±æ¿Sora2 å’Œ Veo3.1ï¼Œæ•°å­—äººç•Œçš„è€å¤§HeyGenã€‚</p>
<p>è¯´å®è¯ï¼Œæˆ‘ç¬¬ä¸€çœ¼å°±å¯¹å®ƒçš„ã€Œä¸€é”®æˆç‰‡ã€äº§ç”Ÿäº†æµ“åšå…´è¶£ï¼Œæ„Ÿè§‰ä¼šéå¸¸æ–¹ä¾¿ï¼Œä¹Ÿæ˜¯æˆ‘è‡ªå·±åšå¹³å°æ²¡æœ‰æƒ³åˆ°çš„åŠŸèƒ½ã€‚</p>
<p>æˆ‘å…ˆåœ¨äºšé©¬é€Šä¸Šæ‰¾ä¸€æ¬¾é”€é‡æ¯”è¾ƒé«˜çš„åŒ…</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/053b01b9522c4126a4ddc2428e5142a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=aclTXOC%2B%2Fpa%2FdGGL6v6lfjN6vio%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æŠŠå®ƒçš„å•†å“é“¾æ¥å¤åˆ¶ä¸‹æ¥ï¼Œä¸¢ç»™Hilightã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27582c41049a4b038c8f345ada354a0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=efmmkLn5eOuTLTftM9omEtHFmYc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™é‡Œæˆ‘é€‰æ‹©æ™ºèƒ½æˆç‰‡åŠŸèƒ½ï¼Œåªéœ€è¦ä¸€ä¸ªäºšé©¬é€Šå•†å“é“¾æ¥å°±å¯ä»¥ç”Ÿæˆå•†å“å›¾ç‰‡ï¼Œè§†é¢‘æ–‡æ¡ˆã€‚</p>
<p>å¯¼å…¥å•†å“é“¾æ¥ä¹‹åï¼ŒAIè‡ªåŠ¨å¼€å§‹åˆ†æã€‚å®ƒåƒä¸€ä¸ªç»éªŒä¸°å¯Œçš„è¿è¥ï¼Œè‡ªåŠ¨æ¢³ç†å‡ºäº†äº§å“å–ç‚¹ã€ç›®æ ‡å—ä¼—ã€è¥é”€èŠ‚ç‚¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ffecfaafde647a78814ae6165512b9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=lzKEUC%2B30yHPxG7zU8KM3UD61wE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªç¯èŠ‚ï¼Œä¹Ÿå¯ä»¥è‡ªå·±è°ƒæ•´ä¸€äº›é…ç½®ï¼Œæ¯”å¦‚å›¾ç‰‡ã€æ–‡æ¡ˆã€ç›®æ ‡å—ä¼—ã€è§†é¢‘è¯­è¨€ã€è§†é¢‘æ¯”ä¾‹ç­‰ç­‰ï¼Œéå¸¸çµæ´»ã€‚</p>
<p>ç‚¹å‡»å³ä¸‹è§’ã€Œä¸€é”®æˆç‰‡ã€ä¹‹åï¼Œå°±å¯ä»¥å–æ¯å’–å•¡ç­‰å®ƒè‡ªå·±ç”Ÿæˆäº†ï¼Œæ•´ä¸ªè¿‡ç¨‹æˆ‘æ²¡æœ‰å¹²é¢„è¿‡å®ƒã€‚</p>
<p>æ•´ä¸ªç”Ÿæˆè¿‡ç¨‹æˆ‘ç»™å¤§å®¶å½•äº†ä¸ªè§†é¢‘ï¼Œå¯ä»¥ä»”ç»†çœ‹çœ‹é‚£ä¸ªLoadingé¡µé¢ï¼Œéå¸¸æœ‰æ„æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e96918dca4ec4454bee2c1a621744ab3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=SGWUHHas1KM1AHkvRNwQWrJQ3yE%3D" alt="wxv_4366284068745756689" loading="lazy"/></p>
<p>çœ‹ç€Agentä»¬å­å“§å­å“§å¹²æ´»çš„æ ·å­ï¼Œè¿˜æŒºè§£å‹çš„ã€‚</p>
<p>åƒäº†ä¸ªé¥­å›æ¥ï¼Œå·²ç»ç”Ÿæˆå¥½äº†ï¼Œè¿«ä¸åŠå¾…æ‰“å¼€æˆç‰‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c6463a4dd4340979f7eb0293937da31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=RmkR8y5FKR%2BjcfKdT8fdxcfyIGM%3D" alt="wxv_4366341894692356106" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°è§†é¢‘ä¸­çš„æ•°å­—äººæ‰‹æŒåŒ…åŒ…è®²è§£éå¸¸è‡ªç„¶ï¼Œè§†é¢‘å‰åçš„ä¹Ÿå¾ˆè¿è´¯ã€‚ä»å¼€å¤´çš„è§†é¢‘ä¸­ä¹Ÿèƒ½çœ‹å‡ºï¼Œå³ä¾¿æœ‰åœºæ™¯å˜æ¢ï¼Œå•†å“ä¹Ÿèƒ½ä¿æŒä¸å˜ã€‚</p>
<p>è¿™å°±æ˜¯Hilightä¼˜åŠ¿ä¹‹ä¸€ï¼šå•†å“/äººç‰©è·¨å¸§ä¸€è‡´æ€§</p>
<p>è¦çŸ¥é“ï¼Œç°åœ¨å¸‚é¢ä¸Šçš„å¾ˆå¤šAIè§†é¢‘æ¨¡å‹ï¼Œç”Ÿæˆå‡ºæ¥çš„äººç‰©å’Œå•†å“ç»å¸¸ä¼šå˜å½¢ã€‚æ¯”å¦‚ä¸Šä¸€ç§’æ¨¡ç‰¹æ‰‹é‡Œæ‹¿ç€çš„æ˜¯Aæ¬¾ç©å…·ï¼Œä¸‹ä¸€ç§’é•œå¤´åˆ‡æ¢å¯èƒ½å°±å˜æˆBæ¬¾äº†ï¼Œæˆ–è€…æ‰‹ç›´æ¥ç©¿æ¨¡ç©¿è¿›äº†ç©å…·é‡Œã€‚</p>
<p>ä½†Hilightç”Ÿæˆçš„è§†é¢‘ï¼Œåšç€å„ç§å±•ç¤ºåŠ¨ä½œï¼Œä¹Ÿæœ‰æ‰‹æŒå•†å“çš„å±•ç¤ºï¼Œç”šè‡³è¿˜æœ‰å°çª—å£è®²è§£ï¼ŒçœŸå°±åƒæ˜¯è¯·äº†æ¨¡ç‰¹å®æ‹ä¸€æ ·ã€‚</p>
<p>è¿™ç§ä¸€è‡´æ€§æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</p>
<p>1.åŸºäºçŸ¥è¯†å›¾è°±ï¼šHilightä¸åªæ˜¯åœ¨ç”Ÿæˆåƒç´ ï¼Œæ˜¯åœ¨ç†è§£äº§å“ã€‚å®ƒä¼šå…ˆåŸºäºå•†å“çŸ¥è¯†å›¾è°±ï¼ŒæŠŠäº§å“çš„æè´¨ã€ç‰ˆå‹ã€ç»“æ„æ‹†è§£å¾—æ˜æ˜ç™½ç™½ï¼ˆæ¯”å¦‚æ˜¯äºšéº»è¿˜æ˜¯ä¸ç»¸ï¼‰ï¼Œæ„å»ºä¸€ä¸ªå…¨ç»´åº¦çš„ä¿¡æ¯åŸºåº§ï¼Œä»æºå¤´ä¸Šé˜²æ­¢AIçç¼–ä¹±é€ ã€‚</p>
<p>2.Nå®«æ ¼å…¨è§†è§’è¾“å…¥ï¼šHilightæ ¹æ®å•†å“é“¾æ¥/å•†å“å›¾ç­‰ä¿¡æ¯è‡ªåŠ¨è§£æç”Ÿæˆæ­£ã€ä¾§ã€èƒŒç­‰å¤šè§†è§’ç´ æï¼Œè®©æ¨¡å‹æ‹¥æœ‰äº†å®Œæ•´çš„3Dç©ºé—´ç†è§£åŠ›ã€‚è¿™æ ·æ— è®ºé•œå¤´æ€ä¹ˆè¿é•œã€æ—‹è½¬ï¼ŒAIéƒ½çŸ¥é“è¿™ä¸ªå•†å“çš„èƒŒé¢å’Œä¾§é¢é•¿ä»€ä¹ˆæ ·ï¼Œè¿›ä¸€æ­¥ç¡®ä¿ä¸€è‡´æ€§ã€‚</p>
<p>3.å¤šAgentç‰©ç†çº§è´¨æ£€ï¼šè¿™æ˜¯æœ€åä¸€é“é˜²çº¿ï¼ŒHilightä¸“é—¨å®‰æ’äº†è‡ªæ£€Agentåœ¨ç”Ÿæˆåè¿›è¡ŒåŒé‡æ‰«æï¼Œä¸€æŸ¥æ¬¾å¼é¢œè‰²å¯¹ä¸å¯¹ï¼ˆå®ä½“æ ¡éªŒï¼‰ï¼ŒäºŒæŸ¥æœ‰æ²¡æœ‰æ‰‹ç©¿è¿›ç“¶å­ã€ç‰©ä½“æ‚¬ç©ºç­‰ç‰©ç†Bugï¼ˆé€»è¾‘æ ¡éªŒï¼‰ï¼Œè¿›ä¸€æ­¥ç¡®ä¿ç¬¦åˆçœŸå®ä¸–ç•Œçš„ç‰©ç†è§„å¾‹ã€‚</p>
<p>åŒæ—¶å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªè§†é¢‘ç”Ÿæˆæ¨¡å‹ï¼Œæ›´æ˜¯ä¸€ä¸ªç”±å¤šä¸ªAI Agentç»„æˆçš„å¤šæ™ºèƒ½ä½“å›¢é˜Ÿã€‚</p>
<p>å¤§å®¶çœ‹è¿™å¼ å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2323023a89cf4ffc8e61031cc4ae58c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=mpPTWBFovHl8s%2BxaSEE9Q84SNv8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ç”Ÿæˆç¯èŠ‚ï¼Œæœ‰10å¤šä¸ªAgentå‚ä¸åä½œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64f43b1118354dc6a93536e4c420b0a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=odR3zB9jqYd9h%2FEkX04WdzUkKmE%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>æœ‰è´Ÿè´£Briefç†è§£çš„Agentï¼Œå®ƒåƒç­–åˆ’æ€»ç›‘ä¸€æ ·ï¼Œåˆ†æä½ è¦æ‹ä»€ä¹ˆã€ç»™è°çœ‹ï¼›</p>
<p>æœ‰è´Ÿè´£åˆ›æ„çš„Agentï¼Œå®ƒåƒç¼–å‰§ä¸€æ ·ï¼Œè®¾è®¡è„šæœ¬å’Œåˆ†é•œï¼›</p>
<p>æœ‰è´Ÿè´£ç´ æåŒ¹é…çš„Agentï¼Œå®ƒå†³å®šæ¯ä¸ªé•œå¤´ç”¨ä»€ä¹ˆç´ ææœ€åˆé€‚ã€‚Â </p>
<p>è¿˜æœ‰è´Ÿè´£å‰ªè¾‘å’Œè´¨æ£€çš„Agentï¼Œç¡®ä¿æœ€ç»ˆæˆç‰‡çš„è´¨é‡ã€‚</p>
<p>å¦‚æœç”Ÿæˆçš„æŸä¸ªåˆ†é•œæ•ˆæœä¸å¥½ï¼Œå®ƒçš„å†…éƒ¨Agentä¼šäº’ç›¸åå•†ã€å›é€€ï¼Œé‡æ–°ç”Ÿæˆï¼Œç›´åˆ°æ»¡æ„ä¸ºæ­¢ã€‚</p>
<p>åœ¨æƒå¨è§†é¢‘ç”Ÿæˆè¯„æµ‹åŸºå‡† VBench çš„æ ¸å¿ƒç»´åº¦æµ‹è¯•ä¸­ï¼ŒHilight AI åœ¨è¥é”€è§†é¢‘é¢†åŸŸæœ€çœ‹é‡çš„ã€ŒèƒŒæ™¯ä¸€è‡´æ€§ã€ã€ã€Œä¸»ä½“ä¸€è‡´æ€§ã€å’Œã€Œç¾å­¦è´¨é‡ã€å‡åœ¨è¡Œä¸šå‰åˆ—ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6ec6fbded6841c6a489e1b512cfc61a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnooovpvKDluJ0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770524523&amp;x-signature=aWbkmVAAcoDF%2BNGudD2qcJ9uEkI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ã€Œæˆåƒè´¨é‡ã€ç»´åº¦ä¹Ÿå±•ç°å‡ºç¨³å¥çš„ç«äº‰åŠ›ï¼Œè¿™å—è¶…è¶Šäº†å›½å¤–é¡¶çº§æ¨¡å‹Sora</p>
<h3 data-id="heading-1">å†™åœ¨æœ€å</h3>
<p>æˆ‘æ„Ÿè§‰éšç€AIæ¨¡å‹èƒ½åŠ›è¶Šæ¥è¶Šå¼ºï¼Œ26å¹´æ˜¯åšå‚ç›´åœºæ™¯åº”ç”¨æœºä¼šæ›´å¤§çš„ä¸€å¹´</p>
<p>è¯´åˆ°åº•ï¼Œæƒ³è¦åœ¨æµ·å¤–å–çˆ†äº§å“ï¼Œæ ¸å¿ƒè¿˜æ˜¯è¦æ‰¾åˆ°ç—›ç‚¹ï¼Œå¼•çˆ†æµé‡ï¼Œè§¦è¾¾æ›´ç²¾å‡†çš„äººç¾¤ï¼Œåšè§†é¢‘è¿™ä¸€æ­¥æ˜¯å…¶ä¸­æœ€å¤§çš„æ‹¦è·¯è™ä¹‹ä¸€ï¼Œå¦‚æœæœ‰æ›´ä½æˆæœ¬æ›´å¿«é€Ÿçš„æ–¹æ¡ˆï¼Œä½•ä¹è€Œä¸ä¸ºå‘¢ã€‚</p>
<p>ä»¥å‰æˆ‘ä»¬åšè§†é¢‘ï¼Œè¦ä¹ˆèŠ±å¤§é’±è¯·äººæ‹ï¼Œè¦ä¹ˆèŠ±æ—¶é—´è‡ªå·±å‰ªã€‚</p>
<p>ç°åœ¨æœ‰äº†Hilightè¿™æ ·çš„å·¥å…·ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå•†å“é“¾æ¥ï¼Œå°±èƒ½æ›´å¿«çš„è·å¾—ä¸€æ¡ç”šè‡³å¤šæ¡è¥é”€è§†é¢‘ã€‚</p>
<p>å¯¹äºç”µå•†å–å®¶æ¥è¯´ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨æ›´ä½çš„æˆæœ¬ï¼Œå»æµ‹è¯•æ›´å¤šçš„çˆ†æ¬¾ï¼Œå»è¦†ç›–æ›´å¤šçš„æµé‡æ¸ é“ã€‚</p>
<p>äº†è§£å’Œä½“éªŒäº†é‚£ä¹ˆå¤šå®¶Multi-Agentï¼Œæˆ‘å‘ç°Hilightæ˜¯ç¬¬ä¸€å®¶æŠŠå¤šAgentå¼•å…¥ç”µå•†è¥é”€è§†é¢‘é¢†åŸŸçš„ï¼Œé€šè¿‡å¤šAgentæŠŠè‡ªåŠ¨ç”Ÿæˆè¥é”€è§†é¢‘è¿™äº‹å„¿åšæˆäº†ï¼Œä¸å¾—ä¸è¯´æ˜¯ç”µå•†è¥é”€é¢†åŸŸçš„ä¸€æ¬¡é‡å¤§çªç ´ã€‚</p>
<p>æˆ‘æ˜¯è¢‹é¼ å¸ï¼Œä¸€ä¸ªåœ¨è¿™ä¸ªAIæ—¶ä»£ï¼ŒæŒç»­åˆ†äº«AIå®è·µå¹²è´§ï¼Œé™ªä½ ä¸€èµ·è¿›åŒ–çš„æ•°å­—æ¸¸æ°‘ã€‚</p>
<p>ç‚¹å‡»å…³æ³¨ä¸‹æ–¹è´¦å·ï¼Œä½ å°†æ„Ÿå—åˆ°ä¸€ä¸ªæœ‹å…‹çš„çµé­‚ã€‚</p>
<p>èƒ½çœ‹åˆ°è¿™é‡Œçš„éƒ½æ˜¯å‡¤æ¯›éºŸè§’çš„å­˜åœ¨ï¼</p>
<p>å¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€åœ¨çœ‹ã€è½¬å‘ä¸‰è¿å§~</p>
<p>å¦‚æœæƒ³ç¬¬ä¸€æ—¶é—´æ”¶åˆ°æ¨é€ï¼Œä¹Ÿå¯ä»¥ç»™æˆ‘ä¸ªæ˜Ÿæ ‡â­</p>
<p>è°¢è°¢ä½ è€å¿ƒçœ‹å®Œæˆ‘çš„æ–‡ç« ~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»¥é—®ç­”å½¢å¼æ·±å…¥ç†è§£CAPç†è®º]]></title>    <link>https://juejin.cn/post/7601020578491596809</link>    <guid>https://juejin.cn/post/7601020578491596809</guid>    <pubDate>2026-01-31T15:45:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601020578491596809" data-draft-id="7600787795478282286" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»¥é—®ç­”å½¢å¼æ·±å…¥ç†è§£CAPç†è®º"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-31T15:45:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="dunky"/> <meta itemprop="url" content="https://juejin.cn/user/1538972007804776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»¥é—®ç­”å½¢å¼æ·±å…¥ç†è§£CAPç†è®º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1538972007804776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    dunky
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T15:45:19.000Z" title="Sat Jan 31 2026 15:45:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡çš„æ ¸å¿ƒï¼Œå­˜åœ¨ç€ä¸€ä¸ªçœ‹ä¼¼ç®€å•å´æ·±åˆ»å½±å“ç³»ç»Ÿæ¶æ„çš„ç†è®ºâ€”â€”CAPå®šç†ã€‚è‡ª2000å¹´ç”±Eric Breweræå‡ºä»¥æ¥ï¼ŒCAPå·²æˆä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿé¢†åŸŸçš„â€œé»„é‡‘æ³•åˆ™â€ï¼Œä½†åŒæ—¶ä¹Ÿæ˜¯è¢«è¯¯è§£æœ€å¤šçš„ç†è®ºä¹‹ä¸€ã€‚æœ¬æ–‡å°†ä»åŸºæœ¬å®šä¹‰å‡ºå‘ï¼Œé€šè¿‡å’ŒAIçš„é—®ç­”æ·±å…¥è§£æä¸‹è¿™ä¸ªå¸¸è¢«è¯¯è§£çš„å®šç†ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯CAPç†è®ºï¼Ÿ</h2>
<h3 data-id="heading-1">1.1 å®šç†çš„å®Œæ•´è¯´æ˜</h3>
<p>CAPå®šç†é˜è¿°äº†ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸‰ä¸ªæ ¸å¿ƒå±æ€§ä¹‹é—´çš„æ ¹æœ¬å…³ç³»ï¼š</p>
<p><strong>åœ¨ç½‘ç»œåˆ†åŒºï¼ˆPartitionï¼‰å‘ç”Ÿæ—¶ï¼Œç³»ç»Ÿæ— æ³•åŒæ—¶ä¿è¯å¼ºä¸€è‡´æ€§ï¼ˆConsistencyï¼‰å’Œå¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ã€‚</strong></p>
<p>è¿™ä¸ªç®€æ´çš„é™ˆè¿°èƒŒåï¼Œæ¯ä¸ªæœ¯è¯­éƒ½æœ‰ä¸¥æ ¼çš„å®šä¹‰ï¼š</p>
<h4 data-id="heading-2">å¼ºä¸€è‡´æ€§ï¼ˆC - Consistencyï¼‰</h4>
<p>ç‰¹æŒ‡<strong>çº¿æ€§ä¸€è‡´æ€§</strong>ï¼Œè¦æ±‚ï¼š</p>
<ul>
<li>ä»»ä½•è¯»æ“ä½œéƒ½èƒ½ç«‹å³çœ‹åˆ°æœ€æ–°å®Œæˆçš„å†™æ“ä½œ</li>
<li>æ‰€æœ‰æ“ä½œçœ‹èµ·æ¥åƒæ˜¯åœ¨å•ä¸ªå‰¯æœ¬ä¸ŠæŒ‰æŸä¸ªå…¨å±€é¡ºåºæ‰§è¡Œ</li>
<li>å…·æœ‰å®æ—¶æ€§çº¦æŸï¼šå¦‚æœæ“ä½œAåœ¨å®é™…æ—¶é—´ä¸Šå…ˆäºæ“ä½œBå¼€å§‹ï¼Œé‚£ä¹ˆAå¿…é¡»åœ¨Bä¹‹å‰</li>
</ul>
<h4 data-id="heading-3">å¯ç”¨æ€§ï¼ˆA - Availabilityï¼‰</h4>
<p>è¦æ±‚æ¯ä¸ªå‘é€åˆ°<strong>éæ•…éšœèŠ‚ç‚¹</strong>çš„è¯·æ±‚ï¼š</p>
<ul>
<li>å¿…é¡»åœ¨<strong>æœ‰é™æ—¶é—´å†…</strong>è·å¾—å“åº”</li>
<li>å“åº”å¿…é¡»æ˜¯<strong>éé”™è¯¯çš„</strong>ï¼ˆä½†å¯ä»¥æ˜¯æ—§æ•°æ®æˆ–å»¶è¿Ÿç”Ÿæ•ˆçš„ç¡®è®¤ï¼‰</li>
<li>é€‚ç”¨äº100%çš„è¯·æ±‚ï¼Œä¸æ˜¯â€œå¤§å¤šæ•°â€è¯·æ±‚</li>
</ul>
<h4 data-id="heading-4">åˆ†åŒºå®¹é”™æ€§ï¼ˆP - Partition Toleranceï¼‰</h4>
<p>æŒ‡ç³»ç»Ÿåœ¨ç½‘ç»œåˆ†åŒºå‘ç”Ÿæ—¶ï¼š</p>
<ul>
<li>èƒ½å¤Ÿç»§ç»­æŒ‰ç…§é¢„å®šç­–ç•¥è¿è¡Œ</li>
<li>ç½‘ç»œåˆ†åŒºæŒ‡èŠ‚ç‚¹é—´é€šä¿¡ä¸­æ–­ï¼Œä½†èŠ‚ç‚¹æœ¬èº«å¯èƒ½æ­£å¸¸è¿è¡Œ</li>
<li>æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„<strong>å¿…é€‰é¡¹</strong>ï¼Œå› ä¸ºç½‘ç»œä¸å¯é æ˜¯ç°å®</li>
</ul>
<h3 data-id="heading-5">1.2 å…³é”®æ´å¯Ÿï¼šçœŸæ­£çš„é€‰æ‹©</h3>
<p>CAPå®šç†æœ€å¸¸è¢«è¯¯è§£ä¸ºâ€œä¸‰é€‰äºŒâ€ï¼Œä½†å®é™…ä¸Šï¼š</p>
<ul>
<li><strong>Pæ˜¯å¼ºåˆ¶æ€§çš„</strong>ï¼šåªè¦ç³»ç»Ÿæ˜¯åˆ†å¸ƒå¼çš„ï¼Œå°±å¿…é¡»è€ƒè™‘ç½‘ç»œåˆ†åŒº</li>
<li><strong>çœŸæ­£çš„é€‰æ‹©æ˜¯Cå’ŒAä¹‹é—´çš„æƒè¡¡</strong>ï¼šåˆ†åŒºå‘ç”Ÿæ—¶ï¼Œç³»ç»Ÿå¿…é¡»ä¼˜å…ˆä¿è¯å“ªä¸€ä¸ª</li>
<li><strong>æ— åˆ†åŒºæ—¶å¯ä»¥åŒæ—¶ä¿è¯CA</strong>ï¼šå®šç†åªçº¦æŸåˆ†åŒºå‘ç”Ÿæ—¶çš„è¡Œä¸º</li>
</ul>
<h2 data-id="heading-6">äºŒã€æ·±å…¥å‰–ææ¯ä¸ªç»´åº¦çš„çœŸå®å«ä¹‰</h2>
<h3 data-id="heading-7">2.1 ä¸ºä»€ä¹ˆCAPä¸­çš„â€œAâ€è¿™ä¹ˆä¸¥æ ¼ï¼Ÿ</h3>
<p>å¯ç”¨æ€§Açš„å®šä¹‰ï¼šç³»ç»Ÿä¸­<strong>æ¯ä¸ªæ²¡æœ‰æ•…éšœçš„èŠ‚ç‚¹æ¥æ”¶åˆ°çš„æ¯ä¸ªè¯·æ±‚</strong>ï¼Œ<strong>éƒ½å¿…é¡»å¾—åˆ°ä¸€ä¸ªéé”™çš„å“åº”</strong>ã€‚è¡¨æ˜100%çš„è¯·æ±‚åœ¨æœ‰é™æ—¶é—´å¿…é¡»è·å¾—ä¸€ä¸ªæœ‰æ„ä¹‰çš„å“åº”ã€‚</p>
<p>å¯è§CAPçš„Aæ˜¯ä¸€ä¸ª<strong>ç†è®ºä¸Šçš„æç«¯è¦æ±‚</strong>ï¼Œç°å®ç³»ç»Ÿæ— æ³•çœŸæ­£æ»¡è¶³ã€‚ä½†è¿™æ­£æ˜¯CAPå®šç†çš„ä»·å€¼â€”â€”å®ƒæ­ç¤ºäº†<strong>ç†æƒ³ä¸–ç•Œä¸­çš„æ ¹æœ¬é™åˆ¶</strong>ã€‚</p>






























<table><thead><tr><th>ç»´åº¦</th><th>CAPçš„A</th><th>å·¥ç¨‹é«˜å¯ç”¨</th></tr></thead><tbody><tr><td>å®šä¹‰</td><td>100%è¯·æ±‚å¿…é¡»å“åº”</td><td>ç³»ç»Ÿæ€»ä½“å¯ç”¨æ—¶é—´ç™¾åˆ†æ¯”</td></tr><tr><td>åº¦é‡</td><td>äºŒå…ƒï¼ˆæ»¡è¶³/ä¸æ»¡è¶³ï¼‰</td><td>è¿ç»­ï¼ˆ99.9%ã€99.99%ç­‰ï¼‰</td></tr><tr><td>ç²’åº¦</td><td>è¯·æ±‚çº§åˆ«</td><td>ç³»ç»Ÿ/æœåŠ¡çº§åˆ«</td></tr><tr><td>å¯å®ç°æ€§</td><td><strong>ç†è®ºæé™ï¼Œå®é™…æ— æ³•è¾¾åˆ°</strong></td><td>ç°å®å¯è¿½æ±‚çš„ç›®æ ‡</td></tr></tbody></table>
<p>è¯´æ˜ï¼š</p>
<ul>
<li><strong>ç†è®ºè¯æ˜çš„éœ€è¦</strong> ï¼š CAPå®šç†æ˜¯ä¸€ä¸ªæ•°å­¦è¯æ˜ï¼Œæ•°å­¦è¯æ˜éœ€è¦ç²¾ç¡®å®šä¹‰ï¼Œ"A"å¿…é¡»æ˜ç¡®å®šä¹‰ä¸º"100%è¯·æ±‚å“åº”"ï¼Œå¦åˆ™è¯æ˜æ— æ³•è¿›è¡Œ</li>
<li><strong>æ­ç¤ºçŸ›ç›¾</strong>ï¼šå¦‚æœæ”¾å®½Açš„å®šä¹‰ï¼Œå¦‚"å…è®¸5%è¯·æ±‚å¤±è´¥"ï¼Œé‚£ä¹ˆå¯ä»¥è®¾è®¡æ—¢æ»¡è¶³è¿™ä¸ªAåˆæ»¡è¶³Cçš„ç³»ç»Ÿï¼Œä½†è¿™æ ·å°±æ²¡æœ‰ç†è®ºä»·å€¼äº†ï¼Œæç«¯å®šä¹‰æ‰èƒ½æ­ç¤ºæç«¯çŸ›ç›¾</li>
<li><strong>ç°å®å‚è€ƒ</strong>ï¼šç°å®ç³»ç»Ÿè™½ç„¶æ— æ³•è¾¾åˆ°CAPçš„Aï¼Œä½†å¯ä»¥å°½å¯èƒ½æ¥è¿‘ï¼š â‘ æŒ‡å¯¼è®¾è®¡æ–¹å‘ï¼šå°½å¯èƒ½æ¥è¿‘ â‘¡ è®¾å®šåˆç†æœŸæœ›ï¼šçŸ¥é“å·®è·å¤šå¤§  â‘¢åšå‡ºæ˜æ™ºæƒè¡¡ï¼šåœ¨Cå’ŒAé—´é€‰æ‹© â‘£ é¿å…ä¸åˆ‡å®é™…ï¼šä¸æ‰¿è¯ºæ— æ³•å®ç°çš„</li>
</ul>
<h3 data-id="heading-8">2.2 ä¸ºä»€ä¹ˆå¯ç”¨æ€§Açš„æè¿°è¦å¼ºè°ƒâ€œæ²¡æœ‰æ•…éšœçš„èŠ‚ç‚¹â€ï¼Ÿ</h3>
<p>å¦‚æœè¦æ±‚<strong>æ‰€æœ‰èŠ‚ç‚¹</strong>ï¼ˆåŒ…æ‹¬æ•…éšœèŠ‚ç‚¹ï¼‰éƒ½å¿…é¡»å“åº”ï¼šé‚£ä»»ä½•èŠ‚ç‚¹å¯èƒ½æ•…éšœï¼ˆç¡¬ä»¶æŸåã€æ–­ç”µç­‰ï¼‰ï¼Œä¸€æ—¦æœ‰èŠ‚ç‚¹æ•…éšœï¼Œç³»ç»Ÿå°±æ— æ³•æ»¡è¶³Aã€‚é‚£ä»»ä½•å®é™…ç³»ç»Ÿéƒ½æ— æ³•æ»¡è¶³CAPï¼Œåˆ™CAPå®šç†å˜å¾—æ— æ„ä¹‰</p>
<p><strong>å› æ­¤"éæ•…éšœèŠ‚ç‚¹"æ˜¯è®©CAPå®šç†æœ‰ç°å®è®¨è®ºä»·å€¼çš„å‰ææ¡ä»¶ã€‚</strong></p>
<p>CAPå®šç†è¦å›ç­”çš„æ ¸å¿ƒé—®é¢˜ï¼š"å½“ç½‘ç»œå°†å¥åº·çš„èŠ‚ç‚¹éš”ç¦»æ—¶ï¼Œç³»ç»Ÿå¦‚ä½•è¡¨ç°ï¼Ÿ"ä¸æ˜¯è¦å›ç­”ï¼š"å½“èŠ‚ç‚¹ç¡¬ä»¶æ•…éšœæ—¶ï¼Œç³»ç»Ÿå¦‚ä½•è¡¨ç°ï¼Ÿâ€ï¼Œå› ä¸ºåè€…å·²æœ‰æˆç†Ÿæ–¹æ¡ˆï¼šå†—ä½™ã€å¤åˆ¶ã€æ•…éšœè½¬ç§»ã€‚</p>
<h3 data-id="heading-9">2.3 CAPçš„â€œCâ€ä¸ºä»€ä¹ˆè¦å¼ºè°ƒâ€œå¼ºä¸€è‡´æ€§â€ï¼Ÿ</h3>
<p>å¼ºä¸€è‡´æ€§å³ä¸ºçº¿æ€§ä¸€è‡´æ€§ã€‚æŒ‡çš„æ˜¯ï¼šä»»ä½•è¯»æ“ä½œéƒ½èƒ½ç«‹å³çœ‹åˆ°æœ€æ–°å®Œæˆçš„å†™æ“ä½œã€‚CAPå®šç†çš„æ•°å­¦è¯æ˜åŸºäºçº¿æ€§ä¸€è‡´æ€§çš„ä¸¥æ ¼å®šä¹‰ï¼Œå¦‚æœæ”¾å®½åˆ°å¼±ä¸€è‡´æ€§ï¼Œå®šç†å°±ä¸æˆç«‹äº†ã€‚å„ä¸€è‡´æ€§å«ä¹‰å¦‚ä¸‹ï¼š</p>



































<table><thead><tr><th>ä¸€è‡´æ€§çº§åˆ«</th><th>CAPä¸­çš„Cï¼Ÿ</th><th>åˆ†åŒºæ—¶èƒ½å¦ä¸Aå…±å­˜ï¼Ÿ</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>çº¿æ€§ä¸€è‡´æ€§ï¼ˆå¼ºä¸€è‡´ï¼‰</strong></td><td>âœ… æ˜¯</td><td>âŒ ä¸èƒ½ï¼ˆCAPå®šç†ï¼‰</td><td>é“¶è¡Œä½™é¢</td></tr><tr><td><strong>é¡ºåºä¸€è‡´æ€§</strong></td><td>âŒ ä¸æ˜¯</td><td>å¯èƒ½å¯ä»¥</td><td>æŸäº›åˆ†å¸ƒå¼é”</td></tr><tr><td><strong>å› æœä¸€è‡´æ€§</strong></td><td>âŒ ä¸æ˜¯</td><td>å¯ä»¥</td><td>ç¤¾äº¤ç½‘ç»œè¯„è®º</td></tr><tr><td><strong>æœ€ç»ˆä¸€è‡´æ€§</strong></td><td>âŒ ä¸æ˜¯</td><td>âœ… å¯ä»¥</td><td>DNSã€CDN</td></tr></tbody></table>
<p>ä¸ºä»€ä¹ˆCAPåªè®¨è®ºæœ€å¼ºçš„Cï¼Ÿ</p>
<p>å› ä¸ºè¿™æ˜¯æœ€æœ‰æ„ä¹‰çš„è¾¹ç•Œæƒ…å†µï¼š</p>
<ul>
<li><strong>æœ€å¼ºä¸€è‡´æ€§</strong>Â vsÂ <strong>å¯ç”¨æ€§</strong>ï¼šæ˜ç¡®çš„äº’æ–¥å…³ç³»</li>
<li>å¦‚æœè¿æœ€å¼ºä¸€è‡´æ€§éƒ½ä¸èƒ½ä¸Aï¼ˆå¯ç”¨æ€§ï¼‰å…±å­˜ï¼Œé‚£ä¹ˆä»»ä½•æ›´å¼ºçš„ä¸€è‡´æ€§ä¹Ÿä¸èƒ½</li>
<li>è¿™ä¸ºç³»ç»Ÿè®¾è®¡æä¾›äº†æ¸…æ™°çš„å†³ç­–æ¡†æ¶</li>
</ul>
<p><strong>æ€»ç»“</strong></p>
<p><strong>CAPä¸­çš„Cå¿…é¡»å¼ºè°ƒæ˜¯å¼ºä¸€è‡´æ€§ï¼ˆçº¿æ€§ä¸€è‡´æ€§ï¼‰ï¼š</strong></p>
<ol>
<li><strong>ç†è®ºå¿…é¡»</strong>ï¼šCAPå®šç†çš„æ•°å­¦è¯æ˜åŸºäºçº¿æ€§ä¸€è‡´æ€§</li>
<li><strong>å®è·µå¿…è¦</strong>ï¼šåªæœ‰å¼ºä¸€è‡´æ‰ä¼šä¸å¯ç”¨æ€§äº’æ–¥</li>
<li><strong>é¿å…æ··æ·†</strong>ï¼šå¼±ä¸€è‡´æ€§ç³»ç»Ÿå®é™…å±äºAPèŒƒç•´</li>
<li><strong>è®¾è®¡æŒ‡å¯¼</strong>ï¼šæ˜ç¡®é€‰æ‹©æ‰èƒ½æ­£ç¡®è®¾è®¡ç³»ç»Ÿ</li>
</ol>
<p><strong>ç®€å•è®°å¿†</strong>ï¼š</p>
<ul>
<li>CAPä¸­çš„C =Â <strong>å¼ºä¸€è‡´æ€§</strong>ï¼ˆçº¿æ€§ä¸€è‡´æ€§ï¼‰</li>
<li>å¦‚æœé€‰æ‹©å¼±ä¸€è‡´æ€§ï¼Œä½ å®é™…é€‰æ‹©äº†APæ–¹å‘</li>
<li>CAPå®šç†æè¿°çš„æ˜¯<strong>æœ€å¼ºä¸€è‡´æ€§</strong>ä¸<strong>å¯ç”¨æ€§</strong>çš„äº’æ–¥å…³ç³»</li>
</ul>
<p>è¿™ä¸ªå¼ºè°ƒå¯¹äºæ­£ç¡®ç†è§£å’Œåº”ç”¨CAPå®šç†è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-10">2.4 ä¸ºä»€ä¹ˆå¿…é¡»è€ƒè™‘Pï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰</h3>
<p>Pæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„<strong>å¿…é€‰é¡¹</strong>è€Œéå¯é€‰é¡¹ï¼Œå› ä¸ºï¼š</p>
<ul>
<li>ç½‘ç»œæ•…éšœä¸æ˜¯å¼‚å¸¸ï¼Œè€Œæ˜¯å¸¸æ€</li>
<li>åœ¨å¤§è§„æ¨¡ç³»ç»Ÿä¸­ï¼Œåˆ†åŒºå‡ ä¹å¿…ç„¶å‘ç”Ÿ</li>
<li>è®¾è®¡ç³»ç»Ÿæ—¶å¿…é¡»åŸºäºâ€œç½‘ç»œä¼šå‡ºé—®é¢˜â€çš„å‰æ</li>
</ul>
<p>Pæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„å‰æï¼Œ<strong>çœŸæ­£çš„æŠ‰æ‹©æ˜¯åˆ†åŒºå‘ç”Ÿæ—¶é€‰æ‹©Cè¿˜æ˜¯A</strong>ã€‚ä¸€ä¸ªæœ€å¸¸è§çš„è¯¯åŒºæ˜¯â€œCAPæ˜¯Cã€Aã€Pä¸‰é€‰äºŒâ€ï¼Œè¿™æ˜¯å¯¹CAPæœ€å¤§çš„è¯¯è§£ã€‚å®é™…Pæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼ºåˆ¶è¦æ±‚ï¼Œå› ä¸ºç½‘ç»œä¸å¯é æ˜¯ç°å®ã€‚</p>
<p>è¿˜æœ‰å¦ä¸€ä¸ªè¯¯åŒºæ˜¯ä¸åŠ ä»»ä½•å‰æå°±è¯´Cå’ŒAåªèƒ½äºŒé€‰ä¸€ï¼Œåªæœ‰åœ¨åˆ†åŒºæƒ…å†µä¸‹æ‰éœ€è¦é€‰æ‹©ï¼Œæ­£å¸¸æƒ…å†µä¸‹Aã€Pæ˜¯å¯ä»¥å…±å­˜çš„ã€‚</p>
<h3 data-id="heading-11">2.5 åˆ†åŒºå®¹é”™æ˜¯åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒæŸä¸€å°æˆ–å‡ å°å‘ç”Ÿä¸å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œæ•´ä¸ªç³»ç»Ÿä»èƒ½æä¾›æœåŠ¡ã€‚è¿™ä¸ªè¯´æ³•å¯¹ä¹ˆï¼Ÿ</h3>
<p>è¿™ä¸ªæè¿°ä¸å®Œå…¨æ­£ç¡®ï¼Œæ›´å‡†ç¡®åœ°è¯´ï¼Œå®ƒæè¿°çš„æ˜¯â€œé«˜å¯ç”¨æ€§â€æˆ–â€œå®¹é”™æ€§â€ï¼Œè€Œä¸æ˜¯ç‰¹æŒ‡â€œåˆ†åŒºå®¹é”™æ€§â€ã€‚åˆ†åŒºå®¹é”™ç‰¹æŒ‡å‘ç”Ÿç½‘ç»œåˆ†åŒºçš„æƒ…å†µä¸‹çš„å¤„ç†ç­–ç•¥ï¼š</p>
<h4 data-id="heading-12">å‡†ç¡®åŒºåˆ†ä¸‰ä¸ªæ¦‚å¿µ</h4>
<h5 data-id="heading-13">1.Â <strong>å®¹é”™æ€§ï¼ˆFault Toleranceï¼‰</strong></h5>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šç³»ç»Ÿä¸­éƒ¨åˆ†ç»„ä»¶å¤±æ•ˆæ—¶ï¼Œç³»ç»Ÿæ•´ä½“ä»èƒ½ç»§ç»­å·¥ä½œ</li>
<li><strong>ä¾‹å­</strong>ï¼šä¸€ä¸ªä¸‰å‰¯æœ¬çš„æ•°æ®åº“ï¼Œä¸€ä¸ªèŠ‚ç‚¹å®•æœºï¼Œç³»ç»Ÿä»èƒ½è¯»å†™</li>
<li><strong>ä¸Šé¢æè¿°çš„æƒ…å†µæ›´æ¥è¿‘è¿™ä¸ª</strong></li>
</ul>
<h5 data-id="heading-14">2.Â <strong>é«˜å¯ç”¨æ€§ï¼ˆHigh Availabilityï¼‰</strong></h5>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šç³»ç»Ÿæä¾›æŒç»­å¯ç”¨çš„æœåŠ¡ï¼Œé€šå¸¸é€šè¿‡å†—ä½™å®ç°</li>
<li><strong>ç›®æ ‡</strong>ï¼šå°½é‡å‡å°‘æœåŠ¡ä¸­æ–­æ—¶é—´</li>
<li><strong>æŒ‡æ ‡</strong>ï¼š99.9%ï¼ˆä¸‰ä¸ªä¹ï¼‰åˆ°99.999%ï¼ˆäº”ä¸ªä¹ï¼‰çš„å¯ç”¨æ€§</li>
</ul>
<h5 data-id="heading-15">3.Â <strong>åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition Toleranceï¼‰</strong></h5>
<ul>
<li><strong>å®šä¹‰</strong>ï¼š<strong>ç³»ç»Ÿåœ¨ç½‘ç»œåˆ†åŒºå‘ç”Ÿæ—¶ä»èƒ½ç»§ç»­è¿è¡Œå¹¶æŒ‰é¢„å®šç­–ç•¥æä¾›æœåŠ¡</strong></li>
<li><strong>æ ¸å¿ƒ</strong>ï¼šå¤„ç†çš„æ˜¯<strong>ç½‘ç»œé€šä¿¡æ•…éšœ</strong>ï¼Œè€Œä¸æ˜¯èŠ‚ç‚¹æ•…éšœ</li>
<li><strong>å…³é”®åŒºåˆ«</strong>ï¼šèŠ‚ç‚¹å¯èƒ½éƒ½æ´»ç€ï¼Œä½†å½¼æ­¤<strong>æ— æ³•é€šä¿¡</strong></li>
</ul>
<p>åˆ†åŒºå®¹é”™æ€§ =Â <strong>ç³»ç»Ÿå…·å¤‡åœ¨éƒ¨åˆ†ç½‘ç»œé€šä¿¡ä¸­æ–­æ—¶ï¼Œä»èƒ½æŒ‰é¢„å®šç­–ç•¥ç»§ç»­è¿ä½œçš„èƒ½åŠ›</strong>ã€‚è¿™ä¸ª"é¢„å®šç­–ç•¥"å°±æ˜¯CAPä¸­çš„Cå’ŒAçš„æƒè¡¡ã€‚</p>
<p>åˆ†åŒºå®¹é”™æ€§çš„æ ¸å¿ƒï¼š <strong>ç½‘ç»œé€šä¿¡æ•…éšœ</strong></p>
<pre><code class="hljs language-css" lang="css">åœºæ™¯<span class="hljs-number">1</span>ï¼šèŠ‚ç‚¹æ•…éšœå®¹é”™ï¼ˆæ‚¨æè¿°çš„æƒ…å†µï¼‰
    èŠ‚ç‚¹<span class="hljs-selector-tag">A</span>å®•æœº â†’ èŠ‚ç‚¹<span class="hljs-selector-tag">B</span>å’ŒCä»èƒ½é€šä¿¡ â†’ ç³»ç»Ÿç»§ç»­å·¥ä½œ
    
åœºæ™¯<span class="hljs-number">2</span>ï¼šç½‘ç»œåˆ†åŒºï¼ˆçœŸæ­£çš„åˆ†åŒºå®¹é”™ï¼‰
    èŠ‚ç‚¹<span class="hljs-selector-tag">A</span>ã€<span class="hljs-selector-tag">B</span>ã€Céƒ½æ´»ç€ä¸”è¿è¡Œæ­£å¸¸
    ä½†ç½‘ç»œäº¤æ¢æœºæ•…éšœ â†’ <span class="hljs-selector-tag">A</span>æ— æ³•ä¸<span class="hljs-selector-tag">B</span>ã€Cé€šä¿¡
    ç³»ç»Ÿè¢«åˆ†å‰²ä¸ºä¸¤ä¸ªæ— æ³•é€šä¿¡çš„éƒ¨åˆ†
</code></pre>
<h4 data-id="heading-16">å…·ä½“åœºæ™¯å¯¹æ¯”</h4>
<h5 data-id="heading-17">åœºæ™¯Aï¼šèŠ‚ç‚¹æ•…éšœï¼ˆéåˆ†åŒºåœºæ™¯ï¼‰</h5>
<pre><code class="hljs language-text" lang="text">
[WebæœåŠ¡å™¨1] --- [æ•°æ®åº“ä¸»èŠ‚ç‚¹]  â† å®•æœº!
                /
[WebæœåŠ¡å™¨2] --- [æ•°æ®åº“ä»èŠ‚ç‚¹]  â† è‡ªåŠ¨æå‡ä¸ºä¸»
</code></pre>
<ul>
<li><strong>ç°è±¡</strong>ï¼šä¸€ä¸ªèŠ‚ç‚¹ä¸å¯ç”¨</li>
<li><strong>å¤„ç†</strong>ï¼šæ•…éšœè½¬ç§»ï¼Œå®¢æˆ·ç«¯é‡è¿</li>
<li><strong>ç»“æœ</strong>ï¼šç³»ç»Ÿé€æ˜æ¢å¤ï¼Œç”¨æˆ·å¯èƒ½æ„Ÿè§‰ä¸åˆ°</li>
</ul>
<h5 data-id="heading-18">åœºæ™¯Bï¼šç½‘ç»œåˆ†åŒºï¼ˆçœŸæ­£çš„åˆ†åŒºï¼‰</h5>
<pre><code class="hljs language-text" lang="text">
[åˆ†åŒº1]                  [åˆ†åŒº2]
WebæœåŠ¡å™¨A ----âœ—---- WebæœåŠ¡å™¨B
     |                    |
æ•°æ®åº“Aï¼ˆä¸»ï¼‰        æ•°æ®åº“Bï¼ˆä»ï¼‰
     |                    |
     ----- æ— æ³•é€šä¿¡ ------
</code></pre>
<ul>
<li>
<p><strong>ç°è±¡</strong>ï¼šæ‰€æœ‰èŠ‚ç‚¹éƒ½æ´»ç€ï¼Œä½†å½¼æ­¤æ— æ³•é€šä¿¡</p>
</li>
<li>
<p><strong>ä¸¤éš¾é—®é¢˜</strong>ï¼š</p>
<ul>
<li>å¦‚æœä¸¤è¾¹éƒ½æ¥å—å†™å…¥ â†’ æ•°æ®å†²çªï¼ˆè„‘è£‚ï¼‰</li>
<li>å¦‚æœåªè®©ä¸€è¾¹æ¥å—å†™å…¥ â†’ å¦ä¸€è¾¹æœåŠ¡é™çº§</li>
</ul>
</li>
<li>
<p><strong>åˆ†åŒºå®¹é”™æ€§</strong>ï¼šç³»ç»Ÿæœ‰æ˜ç¡®çš„ç­–ç•¥å¤„ç†è¿™ç§ä¸¤éš¾ï¼Œå³Aå’ŒP</p>
</li>
</ul>
<h2 data-id="heading-19">ä¸‰ã€æ·±å…¥æ¢è®¨CAPç†è®º</h2>
<h3 data-id="heading-20">3.1 â€œAâ€æŒ‡çš„æ˜¯100%è¯·æ±‚æœ‰å“åº”ï¼Œè¿™ä¸ªæ¡ä»¶ä¸Šé¢ä¹Ÿè¯´äº†ä¸èƒ½å®ç°ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦è¯´APç³»ç»Ÿï¼Ÿ</h3>
<p>ç¡®å®ï¼Œ<strong>CAPå®šä¹‰çš„Aåœ¨ç°å®ä¸­ä¸å¯èƒ½å®Œå…¨å®ç°</strong>ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜è¯´APç³»ç»Ÿå‘¢ï¼Ÿè¿™é‡Œæœ‰å‡ ä¸ªè¦ç‚¹ï¼š</p>
<ol>
<li>CAPç†è®ºä¸­çš„Aæ˜¯ä¸€ä¸ªç†è®ºä¸Šçš„å®šä¹‰ï¼Œ<strong>å®ƒæè¿°çš„æ˜¯ç³»ç»Ÿåœ¨åˆ†åŒºå‘ç”Ÿæ—¶çš„ä¸€ç§è®¾è®¡é€‰æ‹©å€¾å‘</strong>ã€‚APç³»ç»Ÿæ˜¯æŒ‡åœ¨åˆ†åŒºå‘ç”Ÿæ—¶ï¼Œç³»ç»Ÿå€¾å‘äºä¿æŒå¯ç”¨ï¼Œå³å°½å¯èƒ½å“åº”è¯·æ±‚ï¼Œå³ä½¿è¿”å›çš„æ•°æ®å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ï¼ˆæ”¾å¼ƒå¼ºä¸€è‡´æ€§ï¼‰ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€APç³»ç»Ÿåœ¨å®é™…è¿è¡Œä¸­èƒ½è¾¾åˆ°100%çš„è¯·æ±‚å“åº”ï¼Œ<strong>è€Œæ˜¯è¯´å®ƒåœ¨è®¾è®¡ä¸Šä¸ä»¥å¼ºä¸€è‡´æ€§ä¸ºä»£ä»·æ¥æ¢å–å¯ç”¨æ€§ï¼Œå³ä¸ä¼šå› ä¸ºè¦ä¿è¯å¼ºä¸€è‡´æ€§è€Œä¸»åŠ¨æ‹’ç»è¯·æ±‚</strong>ã€‚</li>
<li>å®é™…ç³»ç»Ÿä¸­ï¼ŒAPç³»ç»Ÿé€šå¸¸é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µï¼ˆå¦‚å‰¯æœ¬å¤åˆ¶ã€è¯»ä¿®å¤ã€æç¤ºç§»äº¤ç­‰ï¼‰æ¥æä¾›é«˜å¯ç”¨æ€§ï¼Œå¹¶æ¥å—æœ€ç»ˆä¸€è‡´æ€§ã€‚å®ƒä»¬çš„ç›®æ ‡æ˜¯å°½å¯èƒ½æé«˜å¯ç”¨æ€§ï¼Œä½†æ— æ³•ä¿è¯100%ã€‚ç„¶è€Œï¼Œåœ¨CAPçš„ç†è®ºæ¡†æ¶ä¸‹ï¼Œåªè¦ç³»ç»Ÿåœ¨åˆ†åŒºå‘ç”Ÿæ—¶<strong>ä¸ä¿è¯å¼ºä¸€è‡´æ€§</strong>ï¼Œè€Œæ˜¯<strong>ç»§ç»­å°è¯•å“åº”è¯·æ±‚</strong>ï¼Œé‚£ä¹ˆå®ƒå°±å±äºAPç³»ç»Ÿã€‚</li>
<li>CAPç†è®ºæœ¬èº«æ˜¯ä¸€ä¸ªç†è®ºæ¨¡å‹ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬ç†è§£åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æƒè¡¡ã€‚åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ— æ³•è¾¾åˆ°ç†è®ºä¸Šçš„å®Œç¾ï¼Œä½†æˆ‘ä»¬å¯ä»¥æ ¹æ®ç†è®ºæŒ‡å¯¼æ¥è®¾è®¡ç³»ç»Ÿã€‚APç³»ç»Ÿå°±æ˜¯é‚£ç§åœ¨åˆ†åŒºæ—¶é€‰æ‹©å¯ç”¨æ€§è€Œéå¼ºä¸€è‡´æ€§çš„ç³»ç»Ÿã€‚</li>
<li>å¦å¤–ï¼ŒCAPç†è®ºä¸­çš„Aè¦æ±‚â€œéæ•…éšœèŠ‚ç‚¹â€å¿…é¡»å“åº”ã€‚åœ¨åˆ†åŒºå‘ç”Ÿæ—¶ï¼ŒèŠ‚ç‚¹å¯èƒ½å› ä¸ºç½‘ç»œé—®é¢˜è€Œæ— æ³•é€šä¿¡ï¼Œä½†å®ƒä»¬æœ¬èº«å¹¶æ²¡æœ‰æ•…éšœã€‚APç³»ç»Ÿä¼šå°è¯•è®©è¿™äº›èŠ‚ç‚¹ç»§ç»­å“åº”è¯·æ±‚ï¼ˆå¯èƒ½è¿”å›æœ¬åœ°æ•°æ®ï¼‰ï¼Œè€ŒCPç³»ç»Ÿåˆ™å¯èƒ½å› ä¸ºæ— æ³•ä¿è¯ä¸€è‡´æ€§è€Œæ‹’ç»è¯·æ±‚ï¼ˆæ¯”å¦‚è¦æ±‚å¤šæ•°æ´¾åŒæ„æ‰èƒ½å†™ï¼Œåˆ†åŒºä¸­çš„å°‘æ•°æ´¾å°±ä¼šæ‹’ç»å†™è¯·æ±‚ï¼‰ã€‚</li>
</ol>
<p>æ‰€ä»¥ï¼Œè™½ç„¶100%è¯·æ±‚å“åº”åœ¨å®é™…ä¸­ä¸å¯èƒ½ï¼Œä½†APç³»ç»Ÿæ˜¯ä¸€ç§è®¾è®¡å“²å­¦ï¼š<strong>åœ¨åˆ†åŒºå‘ç”Ÿæ—¶ï¼Œä¸å› ä¸ºä¸€è‡´æ€§è¦æ±‚è€Œåœæ­¢æœåŠ¡ï¼Œè€Œæ˜¯ç»§ç»­æä¾›æœåŠ¡ï¼Œå°½ç®¡æ•°æ®å¯èƒ½ä¸ä¸€è‡´ã€‚è¿™ç§è®¾è®¡å“²å­¦è¿½æ±‚çš„æ˜¯é«˜å¯ç”¨æ€§ï¼Œè€Œä¸æ˜¯100%çš„å¯ç”¨æ€§</strong></p>
<h3 data-id="heading-21">3.2 æ—¢ç„¶CAPå¼ºè°ƒçš„æ˜¯ç½‘ç»œåˆ†åŒºæƒ…å†µä¸‹çš„å–èˆï¼Œé‚£èƒ½ä¸èƒ½åšä¸€ä¸ªç½‘å…³ï¼Œè®©å®ƒåªå’Œä¸»åˆ†åŒºè”ç³»ï¼Œå®¢æˆ·ç«¯è®¿é—®ç½‘å…³ï¼Œè¿™æ ·ç®—ä¸ç®—æ»¡è¶³CAP?</h3>
<p>ä¸ç®—ï¼</p>
<p>å®é™…ä¸Šï¼Œä½ çš„æ–¹æ¡ˆåœ¨é¢ä¸´ç½‘ç»œåˆ†åŒºæ—¶ï¼Œç½‘å…³å¿…é¡»åšå‡ºé€‰æ‹©ï¼š</p>
<ul>
<li><strong>é€‰æ‹©ä¸€è‡´æ€§</strong>ï¼šç½‘å…³åªå“åº”æ¥è‡ªä¸»åˆ†åŒºçš„è¯·æ±‚ï¼Œéä¸»åˆ†åŒºçš„å®¢æˆ·ç«¯è¯·æ±‚è¢«æ‹’ç» â†’Â <strong>ç‰ºç‰²å¯ç”¨æ€§</strong></li>
<li><strong>é€‰æ‹©å¯ç”¨æ€§</strong>ï¼šç½‘å…³å…è®¸å„åˆ†åŒºç‹¬ç«‹å“åº” â†’Â <strong>ç‰ºç‰²ä¸€è‡´æ€§</strong></li>
<li><strong>æ— æ³•ä¸¤è€…å…¼å¾—</strong>****</li>
</ul>
<h5 data-id="heading-22">1.Â <strong>è¿™æ˜¯CPç³»ç»Ÿçš„å˜ç§</strong></h5>
<p>æœ¬è´¨ä¸Šï¼šé€‰æ‹©ä¸€è‡´æ€§ï¼Œç‰ºç‰²éƒ¨åˆ†å¯ç”¨æ€§
åªä¸è¿‡æŠŠ"ä¸å¯ç”¨"éšè—åœ¨ç½‘å…³åé¢</p>
<p>å°‘æ•°æ´¾åˆ†åŒºäº‹å®ä¸Šçš„ä¸å¯ç”¨ â†’ ç‰ºç‰²äº†A
å¤šæ•°æ´¾åˆ†åŒºä¿æŒå¼ºä¸€è‡´ â†’ ä¿è¯äº†C</p>
<h5 data-id="heading-23">2.Â <strong>ç½‘å…³çš„ä½œç”¨æ˜¯æ•…éšœå±è”½å™¨</strong></h5>
<p>ç½‘å…³å®ç°äº†ï¼š
1. è‡ªåŠ¨æ•…éšœæ£€æµ‹ï¼ˆå‘ç°åˆ†åŒºï¼‰
2. æ™ºèƒ½è·¯ç”±ï¼ˆåªåˆ°å¥åº·åˆ†åŒºï¼‰
3. å®¢æˆ·ç«¯æŠ½è±¡ï¼ˆéšè—å¤æ‚æ€§ï¼‰</p>
<p>ä½†è¿™åªæ˜¯æŠŠCAPé—®é¢˜ä»æ•°æ®åº“å±‚æ¨åˆ°äº†ç½‘å…³å±‚</p>
<h5 data-id="heading-24">3.Â <strong>ç½‘å…³è‡ªå·±é¢ä¸´CAPæŠ‰æ‹©</strong></h5>
<p>ç½‘å…³å¦‚æœæ˜¯å•ç‚¹ï¼š
â€¢ ç½‘å…³å®•æœº â†’ æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨
â€¢ ä¸æ»¡è¶³P</p>
<p>ç½‘å…³å¦‚æœæ˜¯é›†ç¾¤ï¼š
â€¢ ç½‘å…³é›†ç¾¤ä¹Ÿå¯èƒ½åˆ†åŒº
â€¢ ç½‘å…³é›†ç¾¤è‡ªå·±é¢ä¸´CAPæŠ‰æ‹©</p>
<p>æœ¬è´¨ä¸Šï¼šé€‰æ‹©ä¸€è‡´æ€§ï¼Œç‰ºç‰²éƒ¨åˆ†å¯ç”¨æ€§
åªä¸è¿‡æŠŠ"ä¸å¯ç”¨"éšè—åœ¨ç½‘å…³åé¢</p>
<p>å°‘æ•°æ´¾åˆ†åŒºäº‹å®ä¸Šçš„ä¸å¯ç”¨ â†’ ç‰ºç‰²äº†A
å¤šæ•°æ´¾åˆ†åŒºä¿æŒå¼ºä¸€è‡´ â†’ ä¿è¯äº†C</p>
<h5 data-id="heading-25">è¯¦ç»†è§£é‡Š</h5>
<p>å‡è®¾æœ‰ä¸€ä¸ªç½‘å…³å±‚ï¼Œå®ƒçŸ¥é“æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¹¶ä¸”çŸ¥é“å“ªä¸ªæ˜¯leaderï¼ˆä¸»åˆ†åŒºï¼‰ã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯é€šè¿‡ç½‘å…³è®¿é—®ï¼Œç½‘å…³å°†è¯·æ±‚è½¬å‘ç»™leaderï¼Œè¿™æ ·å®¢æˆ·ç«¯çœ‹èµ·æ¥æ˜¯åœ¨å’Œä¸€ä¸ªç»Ÿä¸€çš„ç³»ç»Ÿäº¤äº’ã€‚</p>
<p>ä½†æ˜¯ï¼Œå½“ç½‘ç»œåˆ†åŒºå‘ç”Ÿæ—¶ï¼Œé—®é¢˜æ¥äº†ï¼š</p>
<ol>
<li>ç½‘å…³å¯èƒ½æ— æ³•è¿æ¥åˆ°leaderï¼Œå› ä¸ºç½‘å…³å’Œleaderå¯èƒ½ä¸åœ¨åŒä¸€ä¸ªåˆ†åŒºã€‚</li>
<li>å³ä½¿ç½‘å…³å’Œleaderåœ¨åŒä¸€ä¸ªåˆ†åŒºï¼Œå®¢æˆ·ç«¯å¯èƒ½æ— æ³•è¿æ¥åˆ°ç½‘å…³ï¼ˆå¦‚æœå®¢æˆ·ç«¯åœ¨å¦ä¸€ä¸ªåˆ†åŒºï¼‰ã€‚</li>
</ol>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æ›´ä»”ç»†åœ°åˆ†æã€‚</p>
<p>ä½ çš„æƒ³æ³•æ˜¯ï¼šè®©ç½‘å…³å±‚çŸ¥é“leaderæ˜¯è°ï¼Œç„¶åå®¢æˆ·ç«¯åªè®¿é—®ç½‘å…³ï¼Œç”±ç½‘å…³è´Ÿè´£å’Œleaderé€šä¿¡ã€‚è¿™æ ·ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“åˆ†åŒºæƒ…å†µï¼Œç½‘å…³æ¥å¤„ç†ã€‚</p>
<p>ç„¶è€Œï¼Œç½‘å…³æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æœåŠ¡å—ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆç½‘å…³æœ¬èº«ä¹Ÿä¼šé¢ä¸´CAPé—®é¢˜ã€‚å¦‚æœç½‘å…³æ˜¯å•ç‚¹ï¼Œé‚£ä¹ˆå®ƒå°±æœ‰å•ç‚¹æ•…éšœã€‚å¦‚æœç½‘å…³æ˜¯å¤šå®ä¾‹çš„ï¼Œé‚£ä¹ˆå®ƒä»¬ä¹‹é—´å¦‚ä½•å…±äº«ä¿¡æ¯ï¼ˆæ¯”å¦‚leaderä¿¡æ¯ï¼‰ï¼Ÿåœ¨åˆ†åŒºå‘ç”Ÿæ—¶ï¼Œä¸åŒçš„ç½‘å…³å®ä¾‹å¯èƒ½çœ‹åˆ°ä¸åŒçš„æƒ…å†µã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç½‘å…³é›†ç¾¤ï¼Œå®ƒä»¬é€šè¿‡æŸç§å…±è¯†åè®®ï¼ˆæ¯”å¦‚Raftï¼‰æ¥ç»´æŠ¤ä¸€ä¸ªç»Ÿä¸€çš„è§†å›¾ï¼ŒåŒ…æ‹¬å½“å‰å“ªä¸ªèŠ‚ç‚¹æ˜¯leaderã€‚é‚£ä¹ˆï¼Œè¿™ä¸ªç½‘å…³é›†ç¾¤æœ¬èº«å°±æ˜¯ä¸€ä¸ªCPç³»ç»Ÿï¼ˆä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼Œåœ¨åˆ†åŒºå‘ç”Ÿæ—¶å¯èƒ½ä¸å¯ç”¨ï¼‰æˆ–è€…APç³»ç»Ÿï¼ˆä¿æŒå¯ç”¨æ€§ï¼Œä½†å¯èƒ½ä¸åŒç½‘å…³å®ä¾‹çœ‹åˆ°ä¸åŒçš„leaderï¼‰ã€‚</p>
<p>æ‰€ä»¥ï¼Œé—®é¢˜è¢«è½¬ç§»åˆ°äº†ç½‘å…³é›†ç¾¤ä¸Šã€‚ç½‘å…³é›†ç¾¤å¿…é¡»è‡ªå·±åœ¨CAPä¸­åšå‡ºé€‰æ‹©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache RocketMQçš„åŸç†ä¸å®è·µ]]></title>    <link>https://juejin.cn/post/7601075423003000868</link>    <guid>https://juejin.cn/post/7601075423003000868</guid>    <pubDate>2026-01-31T15:53:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601075423003000868" data-draft-id="7601159804490006547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache RocketMQçš„åŸç†ä¸å®è·µ"/> <meta itemprop="keywords" content="åç«¯,RocketMQ"/> <meta itemprop="datePublished" content="2026-01-31T15:53:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ°´ä¸æ»´"/> <meta itemprop="url" content="https://juejin.cn/user/283045639753100"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache RocketMQçš„åŸç†ä¸å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/283045639753100/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ°´ä¸æ»´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T15:53:46.000Z" title="Sat Jan 31 2026 15:53:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Apache RocketMQï¼šæ¶æ„ã€åŸç†ã€å®æˆ˜ä¸ç”Ÿäº§æœ€ä½³å®è·µ</h2>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ¶ˆæ¯ä¸­é—´ä»¶æ˜¯å®ç°<strong>ç³»ç»Ÿè§£è€¦ã€æµé‡å‰Šå³°ã€å¼‚æ­¥é€šä¿¡</strong>çš„æ ¸å¿ƒç»„ä»¶ï¼Œè€Œ Apache RocketMQ ä½œä¸ºé˜¿é‡Œå¼€æºçš„åˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå†ç»åŒåä¸€ç­‰æµ·é‡ä¸šåŠ¡åœºæ™¯è€ƒéªŒï¼Œç°å·²æˆä¸º Apache é¡¶çº§é¡¹ç›®ã€‚RocketMQ 5.0 æ›´æ˜¯å‡çº§ä¸ºäº‘åŸç”Ÿçš„ â€œæ¶ˆæ¯ã€äº‹ä»¶ã€æµâ€ ä¸€ä½“åŒ–æ•°æ®å¤„ç†å¹³å°ï¼Œå…¼é¡¾<strong>é‡‘èçº§å¯é æ€§</strong>ä¸<strong>é«˜ååæ€§èƒ½</strong>ï¼Œæ˜¯äº’è”ç½‘åç«¯ã€å¾®æœåŠ¡æ¶æ„ä¸­çš„ä¸»æµé€‰æ‹©ã€‚</p>
<p>æœ¬æ–‡å°†ä»<strong>æ¶æ„è®¾è®¡ã€æ ¸å¿ƒæ¦‚å¿µã€åº•å±‚åŸç†ã€å®æˆ˜ä»£ç ã€ç”Ÿäº§å®è·µ</strong>äº”ä¸ªç»´åº¦å…¨é¢è§£æ RocketMQï¼ŒåŒæ—¶å¯¹æ¯”ä¸»æµæ¶ˆæ¯ä¸­é—´ä»¶ç»™å‡ºé€‰å‹å»ºè®®ï¼Œå†…å®¹é€‚é… Java åç«¯å¼€å‘åœºæ™¯ï¼Œå…¼é¡¾å…¥é—¨å­¦ä¹ ä¸é¢è¯•å¤‡è€ƒã€‚</p>
<h3 data-id="heading-1">ä¸€ã€RocketMQ æ ¸å¿ƒæ¶æ„ï¼šæç®€ä¸”é«˜æ•ˆçš„åˆ†å¸ƒå¼è®¾è®¡</h3>
<p>RocketMQ é‡‡ç”¨<strong>æ— çŠ¶æ€ä¸­å¿ƒ + ä¸»ä»æ¶æ„</strong>çš„åˆ†å¸ƒå¼è®¾è®¡ï¼Œæ ¸å¿ƒç”±å››å¤§ç»„ä»¶æ„æˆï¼Œç»„ä»¶é—´è§£è€¦åº¦é«˜ã€æ‰©å±•çµæ´»ï¼Œå•é›†ç¾¤å¯æ”¯æ’‘åä¸‡çº§ TPSã€TB çº§æ¶ˆæ¯å †ç§¯ï¼Œæ¶æ„æ•´ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆæ ¸å¿ƒäº¤äº’æµç¨‹é™„åï¼‰ã€‚</p>
<h4 data-id="heading-2">1.1 å››å¤§æ ¸å¿ƒç»„ä»¶</h4>
<h5 data-id="heading-3">ï¼ˆ1ï¼‰NameServerï¼šæ— çŠ¶æ€çš„è·¯ç”±æ³¨å†Œä¸­å¿ƒ</h5>
<p>NameServer æ˜¯ RocketMQ çš„<strong>è½»é‡çº§è·¯ç”±ä¸­å¿ƒ</strong>ï¼Œæ ¸å¿ƒèŒè´£æ˜¯<strong>Broker èŠ‚ç‚¹çš„åŠ¨æ€æ³¨å†Œä¸å‘ç°</strong>ã€<strong>Topic ä¸ Broker çš„è·¯ç”±æ˜ å°„ç®¡ç†</strong>ï¼Œç‰¹ç‚¹æ˜¯<strong>æ— çŠ¶æ€ã€å»ä¸­å¿ƒåŒ–</strong>ï¼š</p>
<ul>
<li>å¤šä¸ª NameServer å®ä¾‹é—´ä¸è¿›è¡Œæ•°æ®åŒæ­¥ï¼ŒBroker ä¼šå‘æ‰€æœ‰ NameServer æ³¨å†Œè·¯ç”±ä¿¡æ¯ï¼Œå› æ­¤ä»»æ„ä¸€ä¸ª NameServer ä¸‹çº¿ä¸å½±å“é›†ç¾¤å¯ç”¨æ€§ï¼›</li>
<li>Producer/Consumer å¯åŠ¨æ—¶ä¼šä¸ä¸€ä¸ª NameServer å»ºç«‹é•¿è¿æ¥ï¼Œå®šæœŸæ‹‰å–æœ€æ–°çš„è·¯ç”±ä¿¡æ¯ï¼Œåç»­ç›´æ¥ä¸ Broker äº¤äº’ï¼Œæ— éœ€ç»è¿‡ NameServerã€‚</li>
</ul>
<p><strong>é€šä¿—æ¯”å–»</strong>ï¼šNameServer å°±åƒåˆ†å¸ƒå¼ç³»ç»Ÿçš„ â€œå¯¼èˆªä»ªâ€ï¼Œç”Ÿäº§è€… / æ¶ˆè´¹è€…é€šè¿‡å®ƒæ‰¾åˆ°å­˜å‚¨æ¶ˆæ¯çš„ Broker èŠ‚ç‚¹ï¼Œåç»­å…¨ç¨‹ç›´è¿ã€‚</p>
<h5 data-id="heading-4">ï¼ˆ2ï¼‰Brokerï¼šæ¶ˆæ¯å­˜å‚¨ä¸è½¬å‘çš„æ ¸å¿ƒ</h5>
<p>Broker æ˜¯ RocketMQ çš„<strong>æ ¸å¿ƒå·¥ä½œèŠ‚ç‚¹</strong>ï¼Œè´Ÿè´£æ¶ˆæ¯çš„<strong>æ¥æ”¶ã€å­˜å‚¨ã€æŠ•é€’ã€æŸ¥è¯¢</strong>ï¼ŒåŒæ—¶æ‰¿æ‹…é«˜å¯ç”¨ä¿éšœï¼Œæ˜¯æ•´ä¸ªæ¶æ„ä¸­å”¯ä¸€çš„æœ‰çŠ¶æ€èŠ‚ç‚¹ï¼Œæ”¯æŒ<strong>ä¸»ä»æ¶æ„</strong>ï¼š</p>
<ul>
<li><strong>Master èŠ‚ç‚¹</strong>ï¼šè´Ÿè´£è¯»å†™æ“ä½œï¼ŒBrokerId=0 æ ‡è¯†ä¸»èŠ‚ç‚¹ï¼›</li>
<li><strong>Slave èŠ‚ç‚¹</strong>ï¼šä»…è´Ÿè´£è¯»æ“ä½œï¼ŒåŒæ­¥ Master çš„æ•°æ®ï¼Œå®ç°æ•…éšœè½¬ç§»ï¼Œä¸€ä¸ª Master å¯å¯¹åº”å¤šä¸ª Slaveã€‚</li>
<li>Broker ä¼šä¸æ‰€æœ‰ NameServer å»ºç«‹é•¿è¿æ¥ï¼Œå®šæ—¶å‘é€å¿ƒè·³åŒ…æ›´æ–°è·¯ç”±ä¿¡æ¯ï¼ŒåŒæ—¶æä¾›æ¶ˆæ¯çš„å­˜å‚¨å’Œåˆ·ç›˜èƒ½åŠ›ã€‚</li>
</ul>
<p><strong>é€šä¿—æ¯”å–»</strong>ï¼šBroker å°±åƒ â€œå¿«é€’ä»“åº“â€ï¼Œè´Ÿè´£æ¥æ”¶ç”Ÿäº§è€…çš„ â€œå¿«é€’ï¼ˆæ¶ˆæ¯ï¼‰â€ï¼Œå­˜å‚¨ååˆ†å‘ç»™æ¶ˆè´¹è€…ï¼Œä¸»ä»“åº“è´Ÿè´£æ”¶å‘ï¼Œä»ä»“åº“åšå¤‡ä»½ã€‚</p>
<h5 data-id="heading-5">ï¼ˆ3ï¼‰Producerï¼šæ¶ˆæ¯ç”Ÿäº§è€…</h5>
<p>Producer æ˜¯ä¸šåŠ¡ç³»ç»Ÿçš„æ¶ˆæ¯å‘é€ç«¯ï¼Œè´Ÿè´£å°†ä¸šåŠ¡æ¶ˆæ¯å°è£…åå‘é€åˆ° Brokerï¼Œæ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li>æ”¯æŒ<strong>åŒæ­¥ã€å¼‚æ­¥ã€å•å‘</strong>ä¸‰ç§å‘é€æ–¹å¼ï¼Œé€‚é…ä¸åŒå¯é æ€§éœ€æ±‚ï¼›</li>
<li>å‘é€å‰ä¼šæ ¹æ® NameServer çš„è·¯ç”±ä¿¡æ¯ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡é€‰æ‹©å¯¹åº”çš„ Broker å’Œ MessageQueueï¼›</li>
<li>ç›¸åŒä¸šåŠ¡é€»è¾‘çš„ Producer å½’ä¸ºä¸€ä¸ª<strong>ProducerGroup</strong>ï¼Œä¾¿äºé›†ç¾¤ç®¡ç†å’Œæ•…éšœé‡è¯•ã€‚</li>
</ul>
<h5 data-id="heading-6">ï¼ˆ4ï¼‰Consumerï¼šæ¶ˆæ¯æ¶ˆè´¹è€…</h5>
<p>Consumer æ˜¯ä¸šåŠ¡ç³»ç»Ÿçš„æ¶ˆæ¯æ¶ˆè´¹ç«¯ï¼Œè´Ÿè´£ä» Broker æ‹‰å– / æ¥æ”¶æ¶ˆæ¯å¹¶å¤„ç†ï¼Œæ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li>æ”¯æŒ<strong>æ¨æ¨¡å¼ï¼ˆPushï¼‰<strong>å’Œ</strong>æ‹‰æ¨¡å¼ï¼ˆPullï¼‰</strong> ï¼šæ¨æ¨¡å¼ç”± Broker ä¸»åŠ¨æ¨é€æ¶ˆæ¯ï¼Œå®æ—¶æ€§é«˜ï¼Œæ˜¯ä¸»æµé€‰æ‹©ï¼›æ‹‰æ¨¡å¼ç”± Consumer ä¸»åŠ¨æ‹‰å–ï¼Œä¾¿äºæ§åˆ¶æ¶ˆè´¹é€Ÿç‡ï¼Œé€‚åˆæ‰¹é‡å¤„ç†ï¼›</li>
<li>æ”¯æŒ<strong>é›†ç¾¤æ¶ˆè´¹</strong>å’Œ<strong>å¹¿æ’­æ¶ˆè´¹</strong>ï¼šé›†ç¾¤æ¶ˆè´¹ä¸‹ï¼ŒåŒä¸€ä¸ª ConsumerGroup çš„å¤šä¸ªå®ä¾‹è´Ÿè½½å‡è¡¡æ¶ˆè´¹æ¶ˆæ¯ï¼ˆä¸€æ¡æ¶ˆæ¯ä»…è¢«æ¶ˆè´¹ä¸€æ¬¡ï¼‰ï¼›å¹¿æ’­æ¶ˆè´¹ä¸‹ï¼Œæ¯ä¸ªå®ä¾‹éƒ½ä¼šæ¶ˆè´¹å…¨é‡æ¶ˆæ¯ï¼ˆé€‚åˆé…ç½®åŒæ­¥ã€é€šçŸ¥æ¨é€ï¼‰ï¼›</li>
<li>æ¶ˆè´¹å¤±è´¥æ—¶æ”¯æŒ<strong>è‡ªåŠ¨é‡è¯•</strong>ï¼Œé‡è¯•å¤±è´¥çš„æ¶ˆæ¯ä¼šè¿›å…¥<strong>æ­»ä¿¡é˜Ÿåˆ—</strong>ï¼Œé¿å…æ¶ˆæ¯ä¸¢å¤±ã€‚</li>
</ul>
<h4 data-id="heading-7">1.2 ç»„ä»¶æ ¸å¿ƒäº¤äº’æµç¨‹</h4>
<ol>
<li>Broker å¯åŠ¨åï¼Œå‘æ‰€æœ‰ NameServer æ³¨å†Œè‡ªèº«ä¿¡æ¯ï¼ˆåŒ…æ‹¬ Topicã€Queue æ˜ å°„ï¼‰ï¼›</li>
<li>Producer å¯åŠ¨ï¼Œä» NameServer æ‹‰å– Topic çš„è·¯ç”±ä¿¡æ¯ï¼Œä¸å¯¹åº” Master Broker å»ºç«‹é•¿è¿æ¥ï¼›</li>
<li>Producer å‘é€æ¶ˆæ¯æ—¶ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡é€‰æ‹© MessageQueueï¼Œå°†æ¶ˆæ¯å‘é€åˆ° Brokerï¼›</li>
<li>Consumer å¯åŠ¨ï¼Œä» NameServer æ‹‰å– Topic çš„è·¯ç”±ä¿¡æ¯ï¼Œä¸å¯¹åº” Master/Slave Broker å»ºç«‹é•¿è¿æ¥ï¼›</li>
<li>Broker é€šè¿‡æ¨ / æ‹‰æ¨¡å¼å°†æ¶ˆæ¯åˆ†å‘ç»™ Consumerï¼ŒConsumer å¤„ç†åè¿”å›æ¶ˆè´¹ç¡®è®¤ã€‚</li>
</ol>
<h3 data-id="heading-8">äºŒã€RocketMQ æ ¸å¿ƒæ¦‚å¿µï¼šå¤¯å®åŸºç¡€çš„å…³é”®</h3>
<p>å­¦ä¹  RocketMQ çš„ç¬¬ä¸€æ­¥æ˜¯ç†è§£æ ¸å¿ƒæ¦‚å¿µï¼Œè¿™äº›æ¦‚å¿µæ˜¯å¼€å‘ã€è¿ç»´å’Œé¢è¯•çš„é«˜é¢‘è€ƒç‚¹ï¼ŒåŒæ—¶å†³å®šäº†å¦‚ä½•åˆç†è®¾è®¡æ¶ˆæ¯é˜Ÿåˆ—çš„ä½¿ç”¨æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-9">2.1 åŸºç¡€æ¶ˆæ¯æ¨¡å‹</h4>
<ul>
<li>
<p><strong>Topic</strong>ï¼šæ¶ˆæ¯çš„<strong>ä¸»é¢˜åˆ†ç±»</strong>ï¼Œæ˜¯æ¶ˆæ¯è®¢é˜…å’Œå‘å¸ƒçš„åŸºæœ¬å•ä½ï¼Œæ¯æ¡æ¶ˆæ¯å¿…é¡»å±äºä¸€ä¸ª Topicã€‚ä¾‹å¦‚ç”µå•†ç³»ç»Ÿä¸­å¯åˆ›å»º<code>order_create</code>ã€<code>order_pay</code>ç­‰ Topic åˆ†åˆ«å¯¹åº”è®¢å•åˆ›å»ºã€è®¢å•æ”¯ä»˜æ¶ˆæ¯ã€‚</p>
</li>
<li>
<p><strong>MessageQueue</strong>ï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ˜¯ Topic çš„<strong>åˆ†åŒºå•å…ƒ</strong>ï¼Œä¸€ä¸ª Topic å¯åŒ…å«å¤šä¸ª MessageQueueã€‚RocketMQ é€šè¿‡ Queue å®ç°<strong>è´Ÿè½½å‡è¡¡</strong>å’Œ<strong>å¹¶è¡Œæ¶ˆè´¹</strong>ï¼ŒProducer ä¼šå°†æ¶ˆæ¯å‡åŒ€å‘é€åˆ°ä¸åŒ Queueï¼ŒConsumer ä¼šæŒ‰è§„åˆ™æ¶ˆè´¹ä¸åŒ Queue çš„æ¶ˆæ¯ã€‚</p>
</li>
<li>
<p><strong>Message</strong>ï¼šæ¶ˆæ¯ä½“ï¼Œæ˜¯ Producer å‘é€ã€Consumer æ¶ˆè´¹çš„åŸºæœ¬å•ä½ï¼ŒåŒ…å«<strong>Topicã€Tagã€Keyã€Body</strong>ç­‰æ ¸å¿ƒå±æ€§ï¼š</p>
<ul>
<li><strong>Tag</strong>ï¼šæ¶ˆæ¯çš„<strong>å­åˆ†ç±» / è¿‡æ»¤æ ‡ç­¾</strong>ï¼Œä¸€ä¸ª Topic å¯è®¾ç½®å¤šä¸ª Tagï¼ŒConsumer å¯æŒ‰éœ€è®¢é˜…æŒ‡å®š Tag çš„æ¶ˆæ¯ï¼Œå®ç°ç²¾ç»†åŒ–æ¶ˆè´¹ï¼ˆå¦‚<code>order_create</code>çš„ Tag åˆ†ä¸º<code>wechat</code>ã€<code>alipay</code>ï¼‰ï¼›</li>
<li><strong>Key</strong>ï¼šæ¶ˆæ¯çš„<strong>ä¸šåŠ¡å”¯ä¸€æ ‡è¯†</strong>ï¼Œå»ºè®®è®¾ç½®ä¸ºè®¢å• IDã€ç”¨æˆ· ID ç­‰ï¼ŒRocketMQ ä¼šä¸º Key å»ºç«‹ç´¢å¼•ï¼Œä¾¿äºåç»­æ’æŸ¥æ¶ˆæ¯ä¸¢å¤±ã€é‡å¤ç­‰é—®é¢˜ï¼›</li>
<li><strong>Body</strong>ï¼šå®é™…çš„ä¸šåŠ¡æ¶ˆæ¯å†…å®¹ï¼Œé€šå¸¸ä¸º JSON æ ¼å¼ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-10">2.2 åˆ†ç»„ä¸æ ‡è¯†</h4>
<ul>
<li><strong>ProducerGroup</strong>ï¼šç”Ÿäº§è€…ç»„ï¼ŒåŒä¸€ç±» Producer çš„é›†åˆï¼Œè¿™ç±» Producer å‘é€åŒä¸€ Topic çš„æ¶ˆæ¯ä¸”å‘é€é€»è¾‘ä¸€è‡´ï¼Œä¾¿äºé›†ç¾¤ç®¡ç†å’Œæ•…éšœé‡è¯•ã€‚</li>
<li><strong>ConsumerGroup</strong>ï¼šæ¶ˆè´¹è€…ç»„ï¼ŒåŒä¸€ç±» Consumer çš„é›†åˆï¼Œè¿™ç±» Consumer æ¶ˆè´¹åŒä¸€ Topic çš„æ¶ˆæ¯ä¸”æ¶ˆè´¹é€»è¾‘ä¸€è‡´ã€‚<strong>é›†ç¾¤æ¶ˆè´¹</strong>çš„è´Ÿè½½å‡è¡¡ã€æ¶ˆæ¯é‡è¯•éƒ½æ˜¯åŸºäº ConsumerGroup å®ç°çš„ï¼Œ<strong>ä¸€ä¸ª ConsumerGroup çš„æ¶ˆè´¹è€…æ•°é‡å»ºè®®ä¸è¶…è¿‡ Topic çš„ Queue æ•°é‡</strong>ï¼ˆå¦åˆ™ä¼šæœ‰æ¶ˆè´¹è€…ç©ºé—²ï¼‰ã€‚</li>
<li><strong>Offset</strong>ï¼šæ¶ˆè´¹åç§»é‡ï¼Œè®°å½• Consumer æ¶ˆè´¹åˆ°æŸä¸ª MessageQueue çš„<strong>ä½ç½®</strong>ï¼ŒRocketMQ é€šè¿‡ Offset å®ç°æ¶ˆæ¯çš„<strong>æ–­ç‚¹ç»­ä¼ </strong>å’Œ<strong>å›æº¯æ¶ˆè´¹</strong>ã€‚Offset åˆ†ä¸ºæœ¬åœ°åç§»é‡å’Œ Broker ç«¯çš„è¿œç¨‹åç§»é‡ï¼Œç¡®ä¿æ¶ˆè´¹çŠ¶æ€ä¸ä¸¢å¤±ã€‚</li>
</ul>
<h4 data-id="heading-11">2.3 ç‰¹æ®Šé˜Ÿåˆ—</h4>
<ul>
<li><strong>æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDLQï¼‰</strong> ï¼šå½“æ¶ˆæ¯æ¶ˆè´¹å¤±è´¥åï¼Œç»è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°ä»æ— æ³•å¤„ç†ï¼Œä¼šè¢«å‘é€åˆ°<strong>æ­»ä¿¡é˜Ÿåˆ—</strong>ï¼Œæ­»ä¿¡é˜Ÿåˆ—çš„å‘½åè§„åˆ™ä¸º<code>%DLQ%+ConsumerGroupName</code>ã€‚æ­»ä¿¡é˜Ÿåˆ—çš„æ¶ˆæ¯ä¸ä¼šè¢«è‡ªåŠ¨æ¶ˆè´¹ï¼Œéœ€äººå·¥ä»‹å…¥æ’æŸ¥åæ‰‹åŠ¨å¤„ç†ï¼Œé¿å…æ— æ•ˆé‡è¯•å ç”¨ç³»ç»Ÿèµ„æºã€‚</li>
<li><strong>é‡è¯•é˜Ÿåˆ—</strong>ï¼šå­˜æ”¾æ¶ˆè´¹å¤±è´¥å¾…é‡è¯•çš„æ¶ˆæ¯ï¼ŒRocketMQ ä¼šæ ¹æ®é‡è¯•ç­–ç•¥ï¼Œå°†å¤±è´¥æ¶ˆæ¯é‡æ–°æ¨é€ç»™ Consumerï¼Œé»˜è®¤é‡è¯•æ¬¡æ•°ä¸º 16 æ¬¡ï¼ˆå¯é…ç½®ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-12">ä¸‰ã€RocketMQ æ ¸å¿ƒç‰¹æ€§ï¼šä¸ºä»€ä¹ˆæˆä¸ºäº’è”ç½‘ä¸»æµé€‰æ‹©ï¼Ÿ</h3>
<p>RocketMQ çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äº<strong>å…¼é¡¾é«˜ååä¸é‡‘èçº§å¯é æ€§</strong>ï¼ŒåŒæ—¶æä¾›ä¸°å¯Œçš„ä¼ä¸šçº§ç‰¹æ€§ï¼Œå®Œç¾é€‚é…ç”µå•†ã€é‡‘èã€å¾®æœåŠ¡ç­‰ä¸»æµä¸šåŠ¡åœºæ™¯ï¼Œæ ¸å¿ƒç‰¹æ€§å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-13">3.1 é‡‘èçº§æ¶ˆæ¯å¯é æ€§</h4>
<p>RocketMQ é€šè¿‡<strong>å¤šå±‚å¯é æ€§æœºåˆ¶</strong>ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Œæ˜¯å°‘æ•°èƒ½æ»¡è¶³é‡‘èäº¤æ˜“åœºæ™¯çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼š</p>
<ul>
<li><strong>æ¶ˆæ¯å‘é€ç¡®è®¤</strong>ï¼šProducer å‘é€æ¶ˆæ¯åï¼ŒBroker ä¼šè¿”å›å‘é€ç»“æœï¼ˆSEND_OK / åˆ·ç›˜è¶…æ—¶ / åŒæ­¥ä»èŠ‚ç‚¹è¶…æ—¶ï¼‰ï¼Œå¤±è´¥å¯è§¦å‘é‡è¯•ï¼›</li>
<li><strong>åˆ·ç›˜ç­–ç•¥</strong>ï¼šæ”¯æŒ<strong>åŒæ­¥åˆ·ç›˜</strong>å’Œ<strong>å¼‚æ­¥åˆ·ç›˜</strong>ï¼ŒåŒæ­¥åˆ·ç›˜è¦æ±‚æ¶ˆæ¯å†™å…¥ç£ç›˜åæ‰è¿”å›æˆåŠŸï¼Œé€‚åˆé‡‘èã€æ”¯ä»˜ç­‰æ ¸å¿ƒåœºæ™¯ï¼›å¼‚æ­¥åˆ·ç›˜å†™å…¥é¡µç¼“å­˜å³è¿”å›ï¼Œæ€§èƒ½æ›´é«˜ï¼Œé€‚åˆéæ ¸å¿ƒåœºæ™¯ï¼›</li>
<li><strong>ä¸»ä»å¤åˆ¶</strong>ï¼šæ”¯æŒ<strong>åŒæ­¥å¤åˆ¶</strong>å’Œ<strong>å¼‚æ­¥å¤åˆ¶</strong>ï¼ŒåŒæ­¥å¤åˆ¶è¦æ±‚ Master å°†æ¶ˆæ¯åŒæ­¥åˆ° Slave åæ‰è¿”å›æˆåŠŸï¼Œå®ç°æ•°æ®åŒæ´»ï¼›</li>
<li><strong>æ¶ˆè´¹ç¡®è®¤</strong>ï¼šConsumer å¤„ç†æ¶ˆæ¯åéœ€è¿”å›æ¶ˆè´¹çŠ¶æ€ï¼ˆCONSUME_SUCCESS/RECONSUME_LATERï¼‰ï¼Œä»…ç¡®è®¤æˆåŠŸåï¼ŒBroker æ‰ä¼šæ›´æ–° Offsetã€‚</li>
</ul>
<h4 data-id="heading-14">3.2 åŸç”Ÿåˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯</h4>
<p>RocketMQ åŸç”Ÿæ”¯æŒ<strong>åˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯</strong>ï¼ŒåŸºäº<strong>åŠæ¶ˆæ¯æœºåˆ¶ + äº‹åŠ¡å›æŸ¥</strong>å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œå®Œç¾è§£å†³è·¨æœåŠ¡çš„äº‹åŠ¡é—®é¢˜ï¼ˆå¦‚è®¢å•åˆ›å»ºä¸åº“å­˜æ‰£å‡ï¼‰ï¼Œæ ¸å¿ƒæµç¨‹ï¼š</p>
<ol>
<li>Producer å‘é€<strong>åŠæ¶ˆæ¯</strong>åˆ° Brokerï¼ŒåŠæ¶ˆæ¯æš‚ä¸è¢« Consumer æ¶ˆè´¹ï¼›</li>
<li>Broker ç¡®è®¤åŠæ¶ˆæ¯å‘é€æˆåŠŸåï¼ŒProducer æ‰§è¡Œ<strong>æœ¬åœ°äº‹åŠ¡</strong>ï¼ˆå¦‚åˆ›å»ºè®¢å•ï¼‰ï¼›</li>
<li>æ ¹æ®æœ¬åœ°äº‹åŠ¡ç»“æœï¼ŒProducer å‘ Broker å‘é€<strong>æäº¤ / å›æ»š</strong>æŒ‡ä»¤ï¼šæäº¤åˆ™åŠæ¶ˆæ¯å˜ä¸ºå¯æ¶ˆè´¹ï¼Œå›æ»šåˆ™ Broker åˆ é™¤åŠæ¶ˆæ¯ï¼›</li>
<li>è‹¥ Broker é•¿æ—¶é—´æœªæ”¶åˆ°æŒ‡ä»¤ï¼Œä¼š<strong>å®šæ—¶å›æŸ¥</strong>Producer çš„æœ¬åœ°äº‹åŠ¡çŠ¶æ€ï¼Œæ ¹æ®å›æŸ¥ç»“æœå¤„ç†åŠæ¶ˆæ¯ã€‚</li>
</ol>
<h4 data-id="heading-15">3.3 ä¸¥æ ¼çš„é¡ºåºæ¶ˆæ¯</h4>
<p>RocketMQ æ”¯æŒ<strong>å…¨å±€é¡ºåºæ¶ˆæ¯</strong>å’Œ<strong>åˆ†åŒºé¡ºåºæ¶ˆæ¯</strong>ï¼Œå…¶ä¸­åˆ†åŒºé¡ºåºæ¶ˆæ¯æ˜¯ä¸»æµä½¿ç”¨æ–¹å¼ï¼šé€šè¿‡å°†<strong>ç›¸åŒä¸šåŠ¡ ID</strong>çš„æ¶ˆæ¯å‘é€åˆ°<strong>åŒä¸€ä¸ª MessageQueue</strong>ï¼ŒåŒæ—¶ Consumer ä»¥å•çº¿ç¨‹æ¶ˆè´¹è¯¥ Queueï¼Œå®ç°æ¶ˆæ¯çš„æœ‰åºå¤„ç†ï¼ˆå¦‚è®¢å•çš„åˆ›å»ºã€æ”¯ä»˜ã€å‘è´§æµç¨‹ï¼‰ã€‚</p>
<h4 data-id="heading-16">3.4 å®šæ—¶ / å»¶æ—¶æ¶ˆæ¯</h4>
<p>RocketMQ æ”¯æŒ<strong>å®šæ—¶æ¶ˆæ¯ï¼ˆå»¶æ—¶æ¶ˆæ¯ï¼‰</strong> ï¼Œæ— éœ€å¼€å‘é¢å¤–å®šæ—¶ä»»åŠ¡ç»„ä»¶ï¼Œé»˜è®¤æä¾›<strong>18 ä¸ªå»¶æ—¶çº§åˆ«</strong>ï¼ˆ1s/5s/10s/30s/1m/2mâ€¦2hï¼‰ï¼Œæ¶ˆæ¯ä¼šåœ¨æŒ‡å®šå»¶æ—¶åè¢« Consumer æ¶ˆè´¹ï¼Œé€‚ç”¨äºè®¢å•è¶…æ—¶å–æ¶ˆã€å®šæ—¶é€šçŸ¥ã€ä»»åŠ¡è°ƒåº¦ç­‰åœºæ™¯ã€‚</p>
<h4 data-id="heading-17">3.5 æ¶ˆæ¯å›æº¯ä¸å †ç§¯èƒ½åŠ›</h4>
<ul>
<li><strong>å›æº¯æ¶ˆè´¹</strong>ï¼šConsumer å¯é‡ç½® Offsetï¼Œé‡æ–°æ¶ˆè´¹å†å²æ¶ˆæ¯ï¼Œæ”¯æŒæŒ‰<strong>æ—¶é—´æˆ³ã€åç§»é‡</strong>å›æº¯ï¼Œé€‚ç”¨äºæ•°æ®æ¢å¤ã€ç¦»çº¿è®¡ç®—ç­‰åœºæ™¯ï¼›</li>
<li><strong>TB çº§å †ç§¯èƒ½åŠ›</strong>ï¼šé€šè¿‡<strong>é¡ºåºå†™ç£ç›˜ + è½»é‡çº§ç´¢å¼•</strong>çš„å­˜å‚¨è®¾è®¡ï¼ŒRocketMQ å¯è½»æ¾æ”¯æ’‘ TB çº§æ¶ˆæ¯å †ç§¯ï¼Œä¸”å †ç§¯åä¸ä¼šå¯¼è‡´æ€§èƒ½å¤§å¹…ä¸‹é™ï¼Œæ˜¯åº”å¯¹æµé‡å³°å€¼çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</li>
</ul>
<h4 data-id="heading-18">3.6 å…¶ä»–ä¼ä¸šçº§ç‰¹æ€§</h4>
<ul>
<li><strong>æ¶ˆæ¯è¿‡æ»¤</strong>ï¼šæ”¯æŒåŸºäº Tag çš„ Broker ç«¯è¿‡æ»¤å’ŒåŸºäº SQL92 çš„ Consumer ç«¯è¿‡æ»¤ï¼Œå®ç°ç²¾ç»†åŒ–æ¶ˆè´¹ï¼›</li>
<li><strong>æ‰¹é‡å‘é€ / æ¶ˆè´¹</strong>ï¼šæ”¯æŒæ‰¹é‡å‘é€å’Œæ‰¹é‡æ¶ˆè´¹æ¶ˆæ¯ï¼Œå‡å°‘ç½‘ç»œäº¤äº’æ¬¡æ•°ï¼Œæå‡ååæ€§èƒ½ï¼›</li>
<li><strong>äº‘åŸç”Ÿæ”¯æŒ</strong>ï¼šRocketMQ 5.0 é€‚é… K8sã€Docker ç­‰äº‘åŸç”Ÿç¯å¢ƒï¼Œæ”¯æŒæ— é™å¼¹æ€§æ‰©ç¼©ï¼ŒåŒæ—¶æä¾›è½»é‡çº§æµè®¡ç®—å¼•æ“ï¼Œè¦†ç›– â€œæ¶ˆæ¯ - äº‹ä»¶ - æµâ€ å…¨åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-19">å››ã€åº•å±‚æ ¸å¿ƒåŸç†ï¼šRocketMQ é«˜æ€§èƒ½çš„æœ¬è´¨</h3>
<p>RocketMQ èƒ½å®ç°<strong>é«˜ååã€é«˜å¯ç”¨ã€æŠ—å †ç§¯</strong>ï¼Œæ ¸å¿ƒåœ¨äºå…¶<strong>åº•å±‚å­˜å‚¨è®¾è®¡</strong>å’Œ<strong>èµ„æºè°ƒåº¦ä¼˜åŒ–</strong>ï¼Œå…¶ä¸­<strong>CommitLog+ConsumeQueue çš„åˆ†å±‚å­˜å‚¨</strong>æ˜¯æœ€æ ¸å¿ƒçš„è®¾è®¡äº®ç‚¹ã€‚</p>
<h4 data-id="heading-20">4.1 æ¶ˆæ¯å­˜å‚¨ï¼šCommitLog + ConsumeQueue åˆ†å±‚è§£è€¦</h4>
<p>RocketMQ æ‘’å¼ƒäº† â€œä¸€ä¸ª Topic ä¸€ä¸ªå­˜å‚¨æ–‡ä»¶â€ çš„è®¾è®¡ï¼Œé‡‡ç”¨ ** å…¨å±€æ—¥å¿—æ–‡ä»¶ï¼ˆCommitLogï¼‰+ è½»é‡ç´¢å¼•æ–‡ä»¶ï¼ˆConsumeQueueï¼‰** çš„åˆ†å±‚æ¶æ„ï¼Œå½»åº•è§£å†³äº†ç£ç›˜éšæœºå†™çš„æ€§èƒ½ç“¶é¢ˆã€‚</p>
<h5 data-id="heading-21">ï¼ˆ1ï¼‰CommitLogï¼šæ‰€æœ‰æ¶ˆæ¯çš„å…¨å±€é¡ºåºæ—¥å¿—</h5>
<ul>
<li>CommitLog æ˜¯ RocketMQ çš„<strong>æ ¸å¿ƒæ¶ˆæ¯å­˜å‚¨æ–‡ä»¶</strong>ï¼Œä¸ç®¡å±äºå“ªä¸ª Topicã€å“ªä¸ª Queueï¼Œæ‰€æœ‰æ¶ˆæ¯éƒ½ä¼š<strong>é¡ºåºè¿½åŠ å†™å…¥</strong>CommitLogï¼Œæ–‡ä»¶å¤§å°å›ºå®šä¸º 1GBï¼ˆå¯é…ç½®ï¼‰ï¼Œæ–‡ä»¶åä»¥æ¶ˆæ¯çš„èµ·å§‹åç§»é‡å‘½åï¼›</li>
<li>æœºæ¢°ç¡¬ç›˜çš„<strong>é¡ºåºå†™é€Ÿåº¦æ˜¯éšæœºå†™çš„ 6000 å€</strong>ï¼ŒSSD çš„é¡ºåºå†™ IOPS ä¹Ÿè¿œé«˜äºéšæœºå†™ï¼Œé€šè¿‡é¡ºåºå†™ï¼ŒRocketMQ å°†ç£ç›˜ IO æ€§èƒ½å‘æŒ¥åˆ°æè‡´ï¼›</li>
<li>CommitLog å­˜å‚¨æ¶ˆæ¯çš„<strong>å®Œæ•´å†…å®¹</strong>ï¼ŒåŒ…æ‹¬æ¶ˆæ¯ä½“ã€Topicã€Tagã€åç§»é‡ç­‰æ‰€æœ‰ä¿¡æ¯ã€‚</li>
</ul>
<h5 data-id="heading-22">ï¼ˆ2ï¼‰ConsumeQueueï¼šTopic/Queue çš„è½»é‡çº§ç´¢å¼•</h5>
<p>ConsumeQueue æ˜¯<strong>Topic+MessageQueue å¯¹åº”çš„ç´¢å¼•æ–‡ä»¶</strong>ï¼Œæ¯ä¸ª Topic çš„æ¯ä¸ª Queue éƒ½æœ‰ç‹¬ç«‹çš„ ConsumeQueueï¼Œå…¶æ ¸å¿ƒä½œç”¨æ˜¯<strong>ä¸º CommitLog å»ºç«‹è½»é‡ç´¢å¼•</strong>ï¼Œä¸å­˜å‚¨æ¶ˆæ¯ä½“ï¼Œä»…ä¿å­˜ 3 ä¸ªæ ¸å¿ƒä¿¡æ¯ï¼ˆå›ºå®š 20 å­—èŠ‚ï¼‰ï¼š</p>
<ol>
<li>æ¶ˆæ¯åœ¨ CommitLog ä¸­çš„<strong>ç‰©ç†åç§»é‡</strong>ï¼›</li>
<li>æ¶ˆæ¯çš„<strong>æ¶ˆæ¯é•¿åº¦</strong>ï¼›</li>
<li>æ¶ˆæ¯ Tag çš„<strong>å“ˆå¸Œå€¼</strong>ï¼ˆç”¨äº Broker ç«¯ Tag è¿‡æ»¤ï¼‰ã€‚</li>
</ol>
<p><strong>æ¶ˆè´¹æµç¨‹</strong>ï¼šConsumer æ¶ˆè´¹æ—¶ï¼Œå…ˆä» ConsumeQueue ä¸­æ ¹æ® Offset æ‰¾åˆ°æ¶ˆæ¯çš„ç‰©ç†åç§»é‡ï¼Œå†åˆ° CommitLog ä¸­è¯»å–å®Œæ•´æ¶ˆæ¯ä½“ï¼Œå°±åƒ â€œæŸ¥ç”µè¯æœ¬å…ˆæ‰¾ç´¢å¼•ï¼Œå†æ‰¾å…·ä½“å†…å®¹â€ï¼Œå°†<strong>ç£ç›˜éšæœºè¯»</strong>è½¬åŒ–ä¸º<strong>æ•°ç»„éšæœºè®¿é—®</strong>ï¼Œæ€§èƒ½æ¥è¿‘å†…å­˜ã€‚</p>
<h4 data-id="heading-23">4.2 é›¶æ‹·è´ä¸å†…å­˜æ˜ å°„ï¼šmmap + PageCache</h4>
<p>RocketMQ é‡‡ç”¨<strong>å†…å­˜æ˜ å°„ï¼ˆmmapï¼‰+ æ“ä½œç³»ç»Ÿé¡µç¼“å­˜ï¼ˆPageCacheï¼‰<strong>çš„ç»„åˆï¼Œå®ç°äº†</strong>é›¶æ‹·è´</strong>ï¼Œå¤§å¹…å‡å°‘ç£ç›˜ IO å’Œå†…å­˜æ‹·è´çš„å¼€é”€ï¼š</p>
<ul>
<li><strong>mmap</strong>ï¼šå°† CommitLog å’Œ ConsumeQueue æ–‡ä»¶ç›´æ¥æ˜ å°„åˆ°è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜åœ°å€ç©ºé—´ï¼Œæ¶ˆæ¯çš„è¯»å†™æ— éœ€ä»ç£ç›˜æ‹·è´åˆ°å†…æ ¸æ€ï¼Œå†ä»å†…æ ¸æ€æ‹·è´åˆ°ç”¨æˆ·æ€ï¼Œç›´æ¥æ“ä½œå†…å­˜åœ°å€å³å¯ï¼›</li>
<li><strong>PageCache</strong>ï¼šåˆ©ç”¨æ“ä½œç³»ç»Ÿçš„é¡µç¼“å­˜ç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼ŒConsumer æ¶ˆè´¹çš„æ¶ˆæ¯éƒ½æ¥è‡ª PageCacheï¼Œè€Œéç£ç›˜ï¼Œå®ç° â€œè¯»å†…å­˜â€ çš„æ€§èƒ½ï¼›</li>
<li><strong>å †å¤–å†…å­˜æ± ï¼ˆTransientStorePoolï¼‰</strong> ï¼šé»˜è®¤åˆ†é… 4GB å †å¤–å†…å­˜æš‚å­˜æœªåˆ·ç›˜çš„æ¶ˆæ¯ï¼Œå‡å°‘ JVM GC å‹åŠ›ï¼ŒåŒæ—¶ç”±åå°çº¿ç¨‹å¼‚æ­¥åˆ·ç›˜ï¼Œå…¼é¡¾æ€§èƒ½å’Œå¯é æ€§ã€‚</li>
</ul>
<h4 data-id="heading-24">4.3 åˆ·ç›˜ä¸å¤åˆ¶ï¼šæ€§èƒ½ä¸å¯é æ€§çš„æƒè¡¡</h4>
<p>RocketMQ é€šè¿‡<strong>å¯é…ç½®çš„åˆ·ç›˜ç­–ç•¥</strong>å’Œ<strong>ä¸»ä»å¤åˆ¶ç­–ç•¥</strong>ï¼Œè®©ç”¨æˆ·å¯æ ¹æ®ä¸šåŠ¡åœºæ™¯åœ¨ â€œæ€§èƒ½â€ å’Œ â€œå¯é æ€§â€ ä¹‹é—´åšæƒè¡¡ï¼Œæ ¸å¿ƒç­–ç•¥å¦‚ä¸‹ï¼š</p>



































<table><thead><tr><th>ç­–ç•¥ç±»å‹</th><th>ç»†åˆ†ç­–ç•¥</th><th>æ ¸å¿ƒç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>åˆ·ç›˜ç­–ç•¥</td><td>åŒæ­¥åˆ·ç›˜</td><td>æ¶ˆæ¯å†™å…¥ç£ç›˜åæ‰è¿”å›æˆåŠŸï¼Œæ— ä¸¢å¤±é£é™©</td><td>é‡‘èã€æ”¯ä»˜ã€è®¢å•æ ¸å¿ƒåœºæ™¯</td></tr><tr><td/><td>å¼‚æ­¥åˆ·ç›˜</td><td>æ¶ˆæ¯å†™å…¥ PageCache å³è¿”å›æˆåŠŸï¼Œåå°çº¿ç¨‹å¼‚æ­¥åˆ·ç›˜</td><td>éæ ¸å¿ƒåœºæ™¯ã€è¿½æ±‚é«˜åå</td></tr><tr><td>å¤åˆ¶ç­–ç•¥</td><td>åŒæ­¥å¤åˆ¶</td><td>Master å°†æ¶ˆæ¯åŒæ­¥åˆ° Slave åæ‰è¿”å›æˆåŠŸï¼Œä¸»ä»æ•°æ®ä¸€è‡´</td><td>é«˜å¯ç”¨è¦æ±‚é«˜çš„é›†ç¾¤</td></tr><tr><td/><td>å¼‚æ­¥å¤åˆ¶</td><td>Master å†™å…¥æˆåŠŸå³è¿”å›æˆåŠŸï¼Œå¼‚æ­¥å°†æ¶ˆæ¯å¤åˆ¶åˆ° Slave</td><td>æ™®é€šé›†ç¾¤ã€æ€§èƒ½ä¼˜å…ˆ</td></tr></tbody></table>
<h3 data-id="heading-25">äº”ã€Java å¿«é€Ÿå…¥é—¨ï¼šä» 0 åˆ° 1 å®ç°æ¶ˆæ¯å‘é€ä¸æ¶ˆè´¹</h3>
<p>RocketMQ çš„å®¢æˆ·ç«¯ SDK å¯¹ Java æä¾›äº†å®Œå–„çš„æ”¯æŒï¼Œä»¥ä¸‹åŸºäº<strong>RocketMQ 5.2.0</strong>ï¼ˆæœ€æ–°ç¨³å®šç‰ˆï¼‰å®ç°æ¶ˆæ¯çš„<strong>å‘é€</strong>å’Œ<strong>æ¶ˆè´¹</strong>ï¼Œä»£ç å¯ç›´æ¥è¿è¡Œï¼Œé€‚é…å¼€å‘ç¯å¢ƒå¿«é€Ÿè°ƒè¯•ã€‚</p>
<h4 data-id="heading-26">5.1 ç¯å¢ƒå‡†å¤‡</h4>
<ol>
<li>
<p><strong>JDK</strong>ï¼šæ¨è JDK 8+ï¼ˆRocketMQ 5.x è¦æ±‚ JDK 8 åŠä»¥ä¸Šï¼‰ï¼›</p>
</li>
<li>
<p><strong>RocketMQ å®‰è£…</strong>ï¼šä»<a href="https://link.juejin.cn?target=https%3A%2F%2Frocketmq.apache.org%2Fzh%2F" target="_blank" title="https://rocketmq.apache.org/zh/" ref="nofollow noopener noreferrer">Apache RocketMQ å®˜ç½‘</a>ä¸‹è½½äºŒè¿›åˆ¶åŒ…ï¼Œè§£å‹åå³å¯å¯åŠ¨ï¼›</p>
</li>
<li>
<p><strong>å¯åŠ¨æœåŠ¡</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨NameServerï¼ˆWindowsç”¨mqnamesrv.cmdï¼ŒLinux/macç”¨mqnamesrv.shï¼‰</span>
<span class="hljs-built_in">cd</span> rocketmq-all-5.2.0-bin-release/bin
mqnamesrv
<span class="hljs-comment"># å¯åŠ¨Brokerï¼ŒæŒ‡å®šNameServeråœ°å€ï¼Œå¼€å‘ç¯å¢ƒå¼€å¯è‡ªåŠ¨åˆ›å»ºTopic</span>
mqbroker -n 127.0.0.1:9876 autoCreateTopicEnable=<span class="hljs-literal">true</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-27">5.2 å¼•å…¥ Maven ä¾èµ–</h4>
<p>åœ¨ Java é¡¹ç›®çš„<code>pom.xml</code>ä¸­å¼•å…¥ RocketMQ å®¢æˆ·ç«¯ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- RocketMQ Javaå®¢æˆ·ç«¯ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.rocketmq<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>rocketmq-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- åŸºç¡€å·¥å…·åŒ… --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-lang3<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-lang3<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.14.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 data-id="heading-28">5.3 æ¶ˆæ¯ç”Ÿäº§è€…ï¼šä¸‰ç§å‘é€æ–¹å¼</h4>
<p>RocketMQ æä¾›<strong>åŒæ­¥ã€å¼‚æ­¥ã€å•å‘</strong>ä¸‰ç§æ¶ˆæ¯å‘é€æ–¹å¼ï¼Œåˆ†åˆ«é€‚é…ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼Œä»¥ä¸‹å®ç°åŸºäº<code>DefaultMQProducer</code>ã€‚</p>
<h5 data-id="heading-29">ï¼ˆ1ï¼‰åŒæ­¥å‘é€ï¼ˆæœ€å¸¸ç”¨ï¼Œå¯é ï¼‰</h5>
<p>å‘é€åç­‰å¾… Broker è¿”å›ç»“æœï¼Œé€‚ç”¨äº<strong>é‡è¦æ¶ˆæ¯</strong>ï¼ˆå¦‚è®¢å•åˆ›å»ºã€æ”¯ä»˜é€šçŸ¥ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.apache.rocketmq.client.producer.DefaultMQProducer;
<span class="hljs-keyword">import</span> org.apache.rocketmq.client.producer.SendResult;
<span class="hljs-keyword">import</span> org.apache.rocketmq.common.message.Message;
<span class="hljs-keyword">import</span> org.apache.rocketmq.remoting.common.RemotingHelper;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SyncProducer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// 1. åˆ›å»ºç”Ÿäº§è€…ï¼ŒæŒ‡å®šProducerGroupï¼ˆå¿…é¡»å”¯ä¸€ï¼‰</span>
        <span class="hljs-type">DefaultMQProducer</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQProducer</span>(<span class="hljs-string">"order_producer_group"</span>);
        <span class="hljs-comment">// 2. è®¾ç½®NameServeråœ°å€ï¼Œå¤šä¸ªç”¨;åˆ†éš”</span>
        producer.setNamesrvAddr(<span class="hljs-string">"127.0.0.1:9876"</span>);
        <span class="hljs-comment">// 3. å¯åŠ¨ç”Ÿäº§è€…</span>
        producer.start();
        <span class="hljs-comment">// 4. å‘é€10æ¡æµ‹è¯•æ¶ˆæ¯</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
            <span class="hljs-comment">// æ„å»ºæ¶ˆæ¯ï¼šTopic + Tag + æ¶ˆæ¯ä½“ï¼ˆå­—èŠ‚æ•°ç»„ï¼‰</span>
            <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(
                    <span class="hljs-string">"order_create"</span>, <span class="hljs-comment">// Topicåç§°</span>
                    <span class="hljs-string">"wechat"</span>,       <span class="hljs-comment">// Tagåç§°</span>
                    (<span class="hljs-string">"å¾®ä¿¡æ”¯ä»˜è®¢å•åˆ›å»ºï¼š"</span> + i).getBytes(RemotingHelper.DEFAULT_CHARSET) <span class="hljs-comment">// æ¶ˆæ¯ä½“</span>
            );
            <span class="hljs-comment">// è®¾ç½®æ¶ˆæ¯Keyï¼Œä¾¿äºæ’æŸ¥ï¼ˆå»ºè®®ä¸ºä¸šåŠ¡å”¯ä¸€IDï¼‰</span>
            msg.setKeys(<span class="hljs-string">"order_key_"</span> + i);
            <span class="hljs-comment">// 5. åŒæ­¥å‘é€æ¶ˆæ¯ï¼Œç­‰å¾…è¿”å›ç»“æœ</span>
            <span class="hljs-type">SendResult</span> <span class="hljs-variable">sendResult</span> <span class="hljs-operator">=</span> producer.send(msg);
            <span class="hljs-comment">// 6. æ‰“å°å‘é€ç»“æœ</span>
            System.out.printf(<span class="hljs-string">"å‘é€ç»“æœï¼š%sï¼Œæ¶ˆæ¯IDï¼š%s%n"</span>, sendResult.getSendStatus(), sendResult.getMsgId());
        }
        <span class="hljs-comment">// 7. å…³é—­ç”Ÿäº§è€…ï¼ˆå®é™…é¡¹ç›®ä¸­å»ºè®®åœ¨æœåŠ¡å…³é—­æ—¶æ‰§è¡Œï¼‰</span>
        producer.shutdown();
    }
}
</code></pre>
<h5 data-id="heading-30">ï¼ˆ2ï¼‰å¼‚æ­¥å‘é€ï¼ˆé«˜ååï¼Œéé˜»å¡ï¼‰</h5>
<p>å‘é€åä¸ç­‰å¾…ç»“æœï¼Œé€šè¿‡å›è°ƒå‡½æ•°å¤„ç†å‘é€æˆåŠŸ / å¤±è´¥ï¼Œé€‚ç”¨äº<strong>å¯¹å“åº”æ—¶é—´æ•æ„Ÿ</strong>çš„åœºæ™¯ï¼ˆå¦‚æ—¥å¿—é‡‡é›†ã€æ¶ˆæ¯æ¨é€ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.apache.rocketmq.client.producer.DefaultMQProducer;
<span class="hljs-keyword">import</span> org.apache.rocketmq.client.producer.SendCallback;
<span class="hljs-keyword">import</span> org.apache.rocketmq.client.producer.SendResult;
<span class="hljs-keyword">import</span> org.apache.rocketmq.common.message.Message;
<span class="hljs-keyword">import</span> org.apache.rocketmq.remoting.common.RemotingHelper;

<span class="hljs-keyword">import</span> java.util.concurrent.CountDownLatch;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncProducer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">DefaultMQProducer</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQProducer</span>(<span class="hljs-string">"log_producer_group"</span>);
        producer.setNamesrvAddr(<span class="hljs-string">"127.0.0.1:9876"</span>);
        producer.start();
        <span class="hljs-comment">// è®¡æ•°å™¨ï¼Œç­‰å¾…æ‰€æœ‰æ¶ˆæ¯å‘é€å®Œæˆ</span>
        <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">countDownLatch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">10</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
            <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(
                    <span class="hljs-string">"system_log"</span>,
                    <span class="hljs-string">"error"</span>,
                    (<span class="hljs-string">"ç³»ç»Ÿé”™è¯¯æ—¥å¿—ï¼š"</span> + i).getBytes(RemotingHelper.DEFAULT_CHARSET)
            );
            <span class="hljs-comment">// å¼‚æ­¥å‘é€ï¼Œé€šè¿‡SendCallbackå›è°ƒå¤„ç†ç»“æœ</span>
            producer.send(msg, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SendCallback</span>() {
                <span class="hljs-comment">// å‘é€æˆåŠŸå›è°ƒ</span>
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(SendResult sendResult)</span> {
                    countDownLatch.countDown();
                    System.out.printf(<span class="hljs-string">"å¼‚æ­¥å‘é€æˆåŠŸï¼š%s%n"</span>, sendResult.getMsgId());
                }
                <span class="hljs-comment">// å‘é€å¤±è´¥å›è°ƒ</span>
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onException</span><span class="hljs-params">(Throwable e)</span> {
                    countDownLatch.countDown();
                    System.err.printf(<span class="hljs-string">"å¼‚æ­¥å‘é€å¤±è´¥ï¼š%s%n"</span>, e.getMessage());
                }
            });
        }
        <span class="hljs-comment">// ç­‰å¾…5ç§’ï¼Œç¡®ä¿æ‰€æœ‰å›è°ƒæ‰§è¡Œå®Œæˆ</span>
        countDownLatch.await(<span class="hljs-number">5</span>, TimeUnit.SECONDS);
        producer.shutdown();
    }
}
</code></pre>
<h5 data-id="heading-31">ï¼ˆ3ï¼‰å•å‘å‘é€ï¼ˆæœ€å¿«ï¼Œä¸å¯é ï¼‰</h5>
<p>åªå‘é€æ¶ˆæ¯ï¼Œä¸ç­‰å¾…ç»“æœä¹Ÿæ— å›è°ƒï¼Œé€‚ç”¨äº<strong>ä½å¯é æ€§è¦æ±‚</strong>çš„åœºæ™¯ï¼ˆå¦‚å¿ƒè·³åŒ…ã€æ—¥å¿—æ‰“ç‚¹ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.apache.rocketmq.client.producer.DefaultMQProducer;
<span class="hljs-keyword">import</span> org.apache.rocketmq.common.message.Message;
<span class="hljs-keyword">import</span> org.apache.rocketmq.remoting.common.RemotingHelper;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OnewayProducer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">DefaultMQProducer</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQProducer</span>(<span class="hljs-string">"heartbeat_producer_group"</span>);
        producer.setNamesrvAddr(<span class="hljs-string">"127.0.0.1:9876"</span>);
        producer.start();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
            <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(
                    <span class="hljs-string">"service_heartbeat"</span>,
                    <span class="hljs-string">"default"</span>,
                    (<span class="hljs-string">"æœåŠ¡å¿ƒè·³ï¼š"</span> + i).getBytes(RemotingHelper.DEFAULT_CHARSET)
            );
            <span class="hljs-comment">// å•å‘å‘é€ï¼Œæ— è¿”å›ç»“æœ</span>
            producer.sendOneway(msg);
            System.out.printf(<span class="hljs-string">"å•å‘å‘é€æ¶ˆæ¯ï¼š%d%n"</span>, i);
        }
        producer.shutdown();
    }
}
</code></pre>
<h4 data-id="heading-32">5.4 æ¶ˆæ¯æ¶ˆè´¹è€…ï¼šæ¨æ¨¡å¼ï¼ˆPushï¼‰å®æˆ˜</h4>
<p>RocketMQ çš„æ¶ˆè´¹æ¨¡å¼åˆ†ä¸º<strong>æ¨æ¨¡å¼ï¼ˆPushï¼‰<strong>å’Œ</strong>æ‹‰æ¨¡å¼ï¼ˆPullï¼‰</strong> ï¼Œæ¨æ¨¡å¼ç”± Broker ä¸»åŠ¨æ¨é€æ¶ˆæ¯ç»™ Consumerï¼Œå®æ—¶æ€§é«˜ï¼Œæ˜¯ä¸»æµé€‰æ‹©ï¼Œæ”¯æŒ<strong>é›†ç¾¤æ¶ˆè´¹</strong>å’Œ<strong>å¹¿æ’­æ¶ˆè´¹</strong>ã€‚</p>
<h5 data-id="heading-33">ï¼ˆ1ï¼‰é›†ç¾¤æ¶ˆè´¹ï¼ˆé»˜è®¤ï¼Œæ¨èï¼‰</h5>
<p>åŒä¸€ä¸ª ConsumerGroup çš„å¤šä¸ª Consumer å®ä¾‹<strong>è´Ÿè½½å‡è¡¡æ¶ˆè´¹</strong>ï¼Œä¸€æ¡æ¶ˆæ¯ä»…è¢«æ¶ˆè´¹ä¸€æ¬¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.apache.rocketmq.client.consumer.DefaultMQPushConsumer;
<span class="hljs-keyword">import</span> org.apache.rocketmq.client.consumer.listener.ConsumeConcurrentlyContext;
<span class="hljs-keyword">import</span> org.apache.rocketmq.client.consumer.listener.ConsumeConcurrentlyStatus;
<span class="hljs-keyword">import</span> org.apache.rocketmq.client.consumer.listener.MessageListenerConcurrently;
<span class="hljs-keyword">import</span> org.apache.rocketmq.common.message.MessageExt;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClusterConsumer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// 1. åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šConsumerGroupï¼ˆå¿…é¡»å”¯ä¸€ï¼‰</span>
        <span class="hljs-type">DefaultMQPushConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQPushConsumer</span>(<span class="hljs-string">"order_consumer_group"</span>);
        <span class="hljs-comment">// 2. è®¾ç½®NameServeråœ°å€</span>
        consumer.setNamesrvAddr(<span class="hljs-string">"127.0.0.1:9876"</span>);
        <span class="hljs-comment">// 3. è®¢é˜…Topicï¼ŒæŒ‡å®šæ¶ˆè´¹çš„Tagï¼ˆ*è¡¨ç¤ºæ¶ˆè´¹æ‰€æœ‰Tagï¼‰</span>
        consumer.subscribe(<span class="hljs-string">"order_create"</span>, <span class="hljs-string">"wechat"</span>);
        <span class="hljs-comment">// 4. æ³¨å†Œæ¶ˆæ¯ç›‘å¬å™¨ï¼Œå¤„ç†æ¶ˆæ¯</span>
        consumer.registerMessageListener((MessageListenerConcurrently) (msgs, context) -&gt; {
            <span class="hljs-keyword">for</span> (MessageExt msg : msgs) {
                <span class="hljs-comment">// å¤„ç†æ¶ˆæ¯ï¼šè·å–æ¶ˆæ¯ä½“ã€Keyã€Tagç­‰</span>
                <span class="hljs-type">String</span> <span class="hljs-variable">msgBody</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(msg.getBody());
                System.out.printf(<span class="hljs-string">"é›†ç¾¤æ¶ˆè´¹æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šKey=%sï¼ŒTag=%sï¼Œå†…å®¹=%s%n"</span>, 
                        msg.getKeys(), msg.getTags(), msgBody);
            }
            <span class="hljs-comment">// 5. è¿”å›æ¶ˆè´¹æˆåŠŸçŠ¶æ€ï¼ŒBrokeræ›´æ–°Offset</span>
            <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
            <span class="hljs-comment">// è‹¥æ¶ˆè´¹å¤±è´¥ï¼Œè¿”å›RECONSUME_LATERï¼ŒBrokerä¼šé‡æ–°æ¨é€æ¶ˆæ¯</span>
            <span class="hljs-comment">// return ConsumeConcurrentlyStatus.RECONSUME_LATER;</span>
        });
        <span class="hljs-comment">// 6. å¯åŠ¨æ¶ˆè´¹è€…</span>
        consumer.start();
        System.out.println(<span class="hljs-string">"é›†ç¾¤æ¶ˆè´¹è€…å¯åŠ¨æˆåŠŸ"</span>);
    }
}
</code></pre>
<h5 data-id="heading-34">ï¼ˆ2ï¼‰å¹¿æ’­æ¶ˆè´¹</h5>
<p>åŒä¸€ä¸ª ConsumerGroup çš„æ‰€æœ‰ Consumer å®ä¾‹<strong>æ¶ˆè´¹å…¨é‡æ¶ˆæ¯</strong>ï¼Œä¸€æ¡æ¶ˆæ¯ä¼šè¢«æ‰€æœ‰å®ä¾‹æ¶ˆè´¹ï¼Œé€‚ç”¨äº<strong>é…ç½®åŒæ­¥ã€é€šçŸ¥æ¨é€</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.apache.rocketmq.client.consumer.DefaultMQPushConsumer;
<span class="hljs-keyword">import</span> org.apache.rocketmq.client.consumer.listener.ConsumeConcurrentlyContext;
<span class="hljs-keyword">import</span> org.apache.rocketmq.client.consumer.listener.ConsumeConcurrentlyStatus;
<span class="hljs-keyword">import</span> org.apache.rocketmq.client.consumer.listener.MessageListenerConcurrently;
<span class="hljs-keyword">import</span> org.apache.rocketmq.common.message.MessageExt;
<span class="hljs-keyword">import</span> org.apache.rocketmq.common.protocol.heartbeat.MessageModel;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BroadcastConsumer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">DefaultMQPushConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQPushConsumer</span>(<span class="hljs-string">"config_consumer_group"</span>);
        consumer.setNamesrvAddr(<span class="hljs-string">"127.0.0.1:9876"</span>);
        consumer.subscribe(<span class="hljs-string">"system_config"</span>, <span class="hljs-string">"*"</span>);
        <span class="hljs-comment">// å…³é”®ï¼šè®¾ç½®æ¶ˆè´¹æ¨¡å¼ä¸ºå¹¿æ’­æ¨¡å¼ï¼ˆé»˜è®¤æ˜¯é›†ç¾¤æ¨¡å¼ï¼‰</span>
        consumer.setMessageModel(MessageModel.BROADCASTING);
        consumer.registerMessageListener((MessageListenerConcurrently) (msgs, context) -&gt; {
            <span class="hljs-keyword">for</span> (MessageExt msg : msgs) {
                System.out.printf(<span class="hljs-string">"å¹¿æ’­æ¶ˆè´¹æ¥æ”¶åˆ°æ¶ˆæ¯ï¼š%s%n"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(msg.getBody()));
            }
            <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
        });
        consumer.start();
        System.out.println(<span class="hljs-string">"å¹¿æ’­æ¶ˆè´¹è€…å¯åŠ¨æˆåŠŸ"</span>);
    }
}
</code></pre>
<h3 data-id="heading-35">å…­ã€ç”Ÿäº§æœ€ä½³å®è·µï¼šé¿å‘ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½¿ç”¨ RocketMQ çš„æ ¸å¿ƒæ˜¯<strong>åˆç†è®¾è®¡ã€è§„é¿å‘ç‚¹ã€ä¼˜åŒ–æ€§èƒ½</strong>ï¼Œä»¥ä¸‹æ˜¯ç»è¿‡æµ·é‡ä¸šåŠ¡éªŒè¯çš„æœ€ä½³å®è·µï¼Œè¦†ç›–<strong>è®¾è®¡ã€å‘é€ã€æ¶ˆè´¹ã€éƒ¨ç½²</strong>å…¨ç¯èŠ‚ã€‚</p>
<h4 data-id="heading-36">6.1 Topic ä¸ Queue è®¾è®¡è§„èŒƒ</h4>
<ol>
<li><strong>Topic å‘½å</strong>ï¼šé‡‡ç”¨<strong>ä¸šåŠ¡æ¨¡å—_æ¶ˆæ¯ç±»å‹</strong>çš„å‘½åè§„èŒƒï¼Œå¦‚<code>trade_order_pay</code>ã€<code>user_register</code>ï¼Œä¾¿äºç®¡ç†ï¼›</li>
<li><strong>Queue æ•°é‡</strong>ï¼šä¸€ä¸ª Topic çš„ Queue æ•°é‡å»ºè®®è®¾ç½®ä¸º<strong>16/32/64</strong>ï¼ˆ2 çš„å¹‚æ¬¡ï¼‰ï¼Œå…¼é¡¾è´Ÿè½½å‡è¡¡å’Œå¹¶è¡Œæ¶ˆè´¹ï¼Œ<strong>Queue æ•°é‡å»ºè®®å¤§äºç­‰äº ConsumerGroup çš„æ¶ˆè´¹è€…å®ä¾‹æ•°</strong>ï¼›</li>
<li><strong>Topic ç²’åº¦</strong>ï¼šä¸€ä¸ªä¸šåŠ¡æ¨¡å—çš„åŒç±»æ¶ˆæ¯ä½¿ç”¨ä¸€ä¸ª Topicï¼Œé€šè¿‡<strong>Tag</strong>åšç»†åˆ†ï¼Œé¿å…åˆ›å»ºè¿‡å¤š Topicï¼ˆå¢åŠ  NameServer å‹åŠ›ï¼‰ï¼›</li>
<li><strong>ç”Ÿäº§ç¯å¢ƒå…³é—­è‡ªåŠ¨åˆ›å»º Topic</strong>ï¼šé€šè¿‡<code>autoCreateTopicEnable=false</code>å…³é—­ï¼Œç”±è¿ç»´äººå‘˜ç»Ÿä¸€åˆ›å»ºå’Œç®¡ç† Topicï¼Œé¿å…æ— æ•ˆ Topic æ³›æ»¥ã€‚</li>
</ol>
<h4 data-id="heading-37">6.2 æ¶ˆæ¯å‘é€ç«¯ä¼˜åŒ–</h4>
<ol>
<li><strong>é¿å…å‘é€å¤§æ¶ˆæ¯</strong>ï¼šRocketMQ é»˜è®¤é™åˆ¶æ¶ˆæ¯ä½“å¤§å°ä¸º 4MBï¼Œå»ºè®®æ¶ˆæ¯ä½“ä¸è¶…è¿‡ 1MBï¼Œå¤§æ¶ˆæ¯å¯æ‹†åˆ†ä¸ºå¤šä¸ªå°æ¶ˆæ¯ï¼Œæˆ–å…ˆå­˜å‚¨åˆ°æ–‡ä»¶ / å¯¹è±¡å­˜å‚¨ï¼Œå†å‘é€æ–‡ä»¶åœ°å€ï¼›</li>
<li><strong>åˆç†è®¾ç½®é‡è¯•æ¬¡æ•°</strong>ï¼šé€šè¿‡<code>setRetryTimesWhenSendFailed</code>è®¾ç½®å‘é€é‡è¯•æ¬¡æ•°ï¼ˆé»˜è®¤ 3 æ¬¡ï¼‰ï¼Œé¿å…è¿‡åº¦é‡è¯•å¯¼è‡´æ¶ˆæ¯é‡å¤ï¼›</li>
<li><strong>è®¾ç½®æ¶ˆæ¯è¶…æ—¶æ—¶é—´</strong>ï¼šé€šè¿‡<code>setSendMsgTimeout</code>è®¾ç½®è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤ 3000msï¼‰ï¼Œæ ¹æ®ä¸šåŠ¡åœºæ™¯è°ƒæ•´ï¼Œé¿å…é˜»å¡ç”Ÿäº§è€…ï¼›</li>
<li><strong>å¤±è´¥å…œåº•</strong>ï¼šåŒæ­¥å‘é€å¤±è´¥æ—¶ï¼Œé™¤äº†æ¡†æ¶é‡è¯•ï¼Œå»ºè®®å¢åŠ <strong>æœ¬åœ°æ•°æ®åº“è½ç›˜</strong>çš„å…œåº•ç­–ç•¥ï¼Œç”±åå°çº¿ç¨‹å®šæ—¶é‡è¯•ï¼Œç¡®ä¿æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚</li>
</ol>
<h4 data-id="heading-38">6.3 æ¶ˆæ¯æ¶ˆè´¹ç«¯ä¼˜åŒ–ï¼ˆé‡ä¸­ä¹‹é‡ï¼‰</h4>
<p>æ¶ˆè´¹ç«¯æ˜¯ RocketMQ ä½¿ç”¨ä¸­<strong>é—®é¢˜æœ€å¤š</strong>çš„ç¯èŠ‚ï¼Œæ ¸å¿ƒä¼˜åŒ–ç‚¹åœ¨äº<strong>å¹‚ç­‰æ€§ã€é¿å…æ¶ˆæ¯å †ç§¯ã€å‡å°‘æ¶ˆè´¹å»¶è¿Ÿ</strong>ã€‚</p>
<h5 data-id="heading-39">ï¼ˆ1ï¼‰å¿…é¡»å®ç°æ¶ˆè´¹å¹‚ç­‰æ€§</h5>
<p>RocketMQ<strong>æ— æ³•ä¿è¯æ¶ˆæ¯ä¸é‡å¤</strong>ï¼ˆå¦‚ç½‘ç»œæŠ–åŠ¨ã€Broker é‡æ¨ã€æ¶ˆè´¹è€…é‡å¯ï¼‰ï¼Œå› æ­¤<strong>æ¶ˆè´¹ç«¯å¿…é¡»å®ç°å¹‚ç­‰æ€§</strong>ï¼Œæ ¸å¿ƒå®ç°æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>åŸºäºå”¯ä¸€é”®</strong>ï¼šç”¨æ¶ˆæ¯çš„<code>Key</code>ï¼ˆä¸šåŠ¡å”¯ä¸€ IDï¼Œå¦‚è®¢å• IDï¼‰ä½œä¸ºå¹‚ç­‰é”®ï¼Œå­˜å…¥ Redis / æ•°æ®åº“ï¼Œæ¶ˆè´¹å‰å…ˆåˆ¤æ–­æ˜¯å¦å·²å¤„ç†ï¼›</li>
<li><strong>åŸºäºæ•°æ®åº“å”¯ä¸€ç´¢å¼•</strong>ï¼šæ¶ˆè´¹æ—¶æ‰§è¡Œæ•°æ®åº“æ“ä½œï¼Œé€šè¿‡å”¯ä¸€ç´¢å¼•é¿å…é‡å¤æ’å…¥ / æ›´æ–°ï¼›</li>
<li><strong>åŸºäº Offset</strong>ï¼šå¯¹äºæœ‰åºæ¶ˆæ¯ï¼Œé€šè¿‡ Queue çš„ Offset å®ç°å¹‚ç­‰ï¼Œç¡®ä¿æ¯ä¸ª Offset ä»…æ¶ˆè´¹ä¸€æ¬¡ã€‚</li>
</ul>
<p><strong>å¹‚ç­‰æ€§å®ç°ç¤ºä¾‹ï¼ˆRedisï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¶ˆè´¹å‰åˆ¤æ–­æ˜¯å¦å·²å¤„ç†</span>
<span class="hljs-type">String</span> <span class="hljs-variable">msgKey</span> <span class="hljs-operator">=</span> msg.getKeys();
<span class="hljs-keyword">if</span> (redisTemplate.opsForValue().setIfAbsent(msgKey, <span class="hljs-string">"processed"</span>, <span class="hljs-number">1</span>, TimeUnit.HOURS)) {
    <span class="hljs-comment">// æœªå¤„ç†ï¼Œæ‰§è¡Œæ¶ˆè´¹é€»è¾‘</span>
    processMessage(msg);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å·²å¤„ç†ï¼Œç›´æ¥è¿”å›æˆåŠŸ</span>
    <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
}
</code></pre>
<h5 data-id="heading-40">ï¼ˆ2ï¼‰é¿å…é•¿æ¶ˆè´¹</h5>
<p>Consumer å¤„ç†å•æ¡æ¶ˆæ¯çš„æ—¶é—´å»ºè®®<strong>ä¸è¶…è¿‡ 300ms</strong>ï¼Œé¿å…é•¿æ¶ˆè´¹å¯¼è‡´ Broker è®¤ä¸ºæ¶ˆè´¹è¶…æ—¶ï¼Œé‡æ–°æ¨é€æ¶ˆæ¯ï¼Œé€ æˆé‡å¤æ¶ˆè´¹å’Œå †ç§¯ã€‚</p>
<ul>
<li>é•¿è€—æ—¶ä¸šåŠ¡ï¼šå°†æ¶ˆæ¯è½¬ä¸º<strong>ä»»åŠ¡</strong>ï¼ŒæŠ•é€’åˆ°ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼ˆå¦‚ XXL-Jobï¼‰å¼‚æ­¥å¤„ç†ï¼ŒConsumer ä»…åšæ¶ˆæ¯è½¬å‘ï¼›</li>
<li>æ‰¹é‡æ¶ˆè´¹ï¼šé€šè¿‡<code>setConsumeMessageBatchMaxSize</code>è®¾ç½®æ‰¹é‡æ¶ˆè´¹æ•°é‡ï¼ˆé»˜è®¤ 1ï¼‰ï¼Œæ‰¹é‡å¤„ç†æ¶ˆæ¯å‡å°‘æ•°æ®åº“ / ç½‘ç»œäº¤äº’æ¬¡æ•°ã€‚</li>
</ul>
<h5 data-id="heading-41">ï¼ˆ3ï¼‰åˆç†è®¾ç½®æ¶ˆè´¹çº¿ç¨‹æ•°</h5>
<p>é€šè¿‡<code>setConsumeThreadMin</code>å’Œ<code>setConsumeThreadMax</code>è®¾ç½®æ¶ˆè´¹çº¿ç¨‹æ± çš„æ ¸å¿ƒå’Œæœ€å¤§çº¿ç¨‹æ•°ï¼Œå»ºè®®æ ¹æ®ä¸šåŠ¡ QPS è°ƒæ•´ï¼Œä¸€èˆ¬è®¾ç½®ä¸º<strong>16/32</strong>ï¼Œé¿å…çº¿ç¨‹æ•°è¿‡å¤šå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p>
<h5 data-id="heading-42">ï¼ˆ4ï¼‰åŠæ—¶å¤„ç†æ­»ä¿¡é˜Ÿåˆ—</h5>
<p>ç›‘æ§æ­»ä¿¡é˜Ÿåˆ—çš„æ¶ˆæ¯æ•°é‡ï¼Œä¸€æ—¦æœ‰æ¶ˆæ¯è¿›å…¥ï¼Œç«‹å³æ’æŸ¥æ¶ˆè´¹å¤±è´¥åŸå› ï¼ˆå¦‚ä¸šåŠ¡ä»£ç å¼‚å¸¸ã€ä¾èµ–æœåŠ¡ä¸å¯ç”¨ï¼‰ï¼Œå¤„ç†å®Œæˆåå¯å°†æ­»ä¿¡é˜Ÿåˆ—çš„æ¶ˆæ¯é‡æ–°å‘é€åˆ°åŸ Topicã€‚</p>
<h4 data-id="heading-43">6.4 é›†ç¾¤éƒ¨ç½²ä¸å¯é æ€§å»ºè®®</h4>
<ol>
<li><strong>NameServer é›†ç¾¤</strong>ï¼šè‡³å°‘éƒ¨ç½²<strong>3 ä¸ªå®ä¾‹</strong>ï¼Œé¿å…å•ç‚¹æ•…éšœï¼Œå®ä¾‹æ•°å»ºè®®ä¸ºå¥‡æ•°ï¼›</li>
<li><strong>Broker ä¸»ä»æ¶æ„</strong>ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»éƒ¨ç½²ä¸»ä»ï¼ŒMaster å’Œ Slave éƒ¨ç½²åœ¨ä¸åŒæœºå™¨ï¼Œå»ºè®®é‡‡ç”¨<strong>SYNC_MASTERï¼ˆåŒæ­¥ä¸»ï¼‰+ SLAVE</strong>çš„å¤åˆ¶ç­–ç•¥ï¼Œæ ¸å¿ƒä¸šåŠ¡é‡‡ç”¨<strong>åŒæ­¥åˆ·ç›˜</strong>ï¼›</li>
<li><strong>ç£ç›˜é€‰æ‹©</strong>ï¼šBroker çš„å­˜å‚¨ç£ç›˜å»ºè®®ä½¿ç”¨<strong>SSD</strong>ï¼Œæå‡éšæœºè¯»æ€§èƒ½ï¼ŒåŒæ—¶å°† CommitLog å’Œ ConsumeQueue å­˜å‚¨åœ¨ä¸åŒç£ç›˜ï¼Œåˆ†ç¦» IO å‹åŠ›ï¼›</li>
<li><strong>å¼€å¯ç›‘æ§</strong>ï¼šéƒ¨ç½² RocketMQ Dashboard æˆ–æ¥å…¥ Prometheus+Grafanaï¼Œç›‘æ§ Topic çš„æ¶ˆæ¯å †ç§¯ã€æ¶ˆè´¹å»¶è¿Ÿã€Broker çš„ç£ç›˜ä½¿ç”¨ç‡ã€TPS ç­‰æ ¸å¿ƒæŒ‡æ ‡ã€‚</li>
</ol>
<h4 data-id="heading-44">6.5 å¸¸è§å‘ç‚¹è§„é¿</h4>
<ol>
<li><strong>ConsumerGroup é‡å</strong>ï¼šä¸åŒä¸šåŠ¡çš„ ConsumerGroup ä¸èƒ½é‡åï¼Œå¦åˆ™ä¼šå¯¼è‡´è´Ÿè½½å‡è¡¡å¼‚å¸¸ï¼Œæ¶ˆæ¯æ¶ˆè´¹æ··ä¹±ï¼›</li>
<li><strong>æ¶ˆæ¯ä½“åºåˆ—åŒ–</strong>ï¼šå»ºè®®ä½¿ç”¨ JSON/Protobuf åºåˆ—åŒ–ï¼Œé¿å…ä½¿ç”¨ Java åŸç”Ÿåºåˆ—åŒ–ï¼ˆåºåˆ—åŒ–åä½“ç§¯å¤§ã€å…¼å®¹æ€§å·®ï¼‰ï¼›</li>
<li><strong>é¿å…åœ¨æ¶ˆè´¹ç«¯æŠ›å‡ºæœªæ•è·å¼‚å¸¸</strong>ï¼šæœªæ•è·å¼‚å¸¸ä¼šå¯¼è‡´ Consumer é‡å¯ï¼Œå»ºè®®æ•è·æ‰€æœ‰å¼‚å¸¸ï¼Œæ ¹æ®å¼‚å¸¸ç±»å‹è¿”å›<code>CONSUME_SUCCESS</code>æˆ–<code>RECONSUME_LATER</code>ï¼›</li>
<li><strong>ä¸è¦éšæ„ä¿®æ”¹ Offset</strong>ï¼šæ‰‹åŠ¨ä¿®æ”¹ Offset å¯èƒ½å¯¼è‡´æ¶ˆæ¯é‡å¤æ¶ˆè´¹æˆ–ä¸¢å¤±ï¼Œä»…åœ¨æ•°æ®æ¢å¤æ—¶ä½¿ç”¨ã€‚</li>
</ol>
<h3 data-id="heading-45">ä¸ƒã€ä¸»æµæ¶ˆæ¯ä¸­é—´ä»¶å¯¹æ¯”ï¼šRocketMQ/Kafka/RabbitMQ</h3>
<p>ç›®å‰åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸»æµçš„æ¶ˆæ¯ä¸­é—´ä»¶ä¸º<strong>RocketMQã€Kafkaã€RabbitMQ</strong>ï¼Œä¸‰è€…åœ¨æ¶æ„è®¾è®¡ã€æ€§èƒ½ã€ç‰¹æ€§ä¸Šå„æœ‰ä¼˜åŠ£ï¼Œä»¥ä¸‹ä»<strong>æ ¸å¿ƒç»´åº¦</strong>åšå¯¹æ¯”ï¼Œå¹¶ç»™å‡ºé€‰å‹å»ºè®®ã€‚</p>
<h4 data-id="heading-46">7.1 æ ¸å¿ƒç»´åº¦å¯¹æ¯”</h4>







































































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Apache RocketMQ</th><th>Apache Kafka</th><th>RabbitMQ</th></tr></thead><tbody><tr><td>å¼€å‘å›¢é˜Ÿ</td><td>é˜¿é‡Œå·´å·´</td><td>LinkedIn</td><td>Rabbit Technologies</td></tr><tr><td>åº•å±‚è¯­è¨€</td><td>Java</td><td>Scala/Java</td><td>Erlang</td></tr><tr><td>æ ¸å¿ƒæ¶æ„</td><td>NameServer+Broker ä¸»ä»</td><td>æ— ä¸­å¿ƒï¼ŒBroker é›†ç¾¤</td><td>ä¸»ä» / é•œåƒï¼ŒExchange+Queue</td></tr><tr><td>å•æœº TPS</td><td>10 ä¸‡çº§ï¼ˆåä¸‡çº§ï¼‰</td><td>100 ä¸‡çº§ï¼ˆç™¾ä¸‡çº§ï¼‰</td><td>1 ä¸‡çº§ï¼ˆä¸‡çº§ï¼‰</td></tr><tr><td>æ¶ˆæ¯å»¶è¿Ÿ</td><td>3ms å·¦å³</td><td>10ms ä»¥å†…</td><td>1ms ä»¥å†…ï¼ˆå†…å­˜ï¼‰</td></tr><tr><td>å †ç§¯èƒ½åŠ›</td><td>TB çº§ï¼Œæ€§èƒ½æ— æ˜æ˜¾ä¸‹é™</td><td>TB çº§ï¼Œæ€§èƒ½æ— æ˜æ˜¾ä¸‹é™</td><td>GB çº§ï¼Œå†…å­˜å—é™</td></tr><tr><td>æ ¸å¿ƒç‰¹æ€§</td><td>äº‹åŠ¡æ¶ˆæ¯ã€é¡ºåºæ¶ˆæ¯ã€å»¶æ—¶æ¶ˆæ¯ã€æ­»ä¿¡é˜Ÿåˆ—</td><td>é«˜ååã€æµå¤„ç†ã€ä¸å¤§æ•°æ®ç”Ÿæ€æ— ç¼é›†æˆ</td><td>çµæ´»è·¯ç”±ï¼ˆ4 ç§ Exchangeï¼‰ã€å»¶è¿Ÿé˜Ÿåˆ—ã€æ­»ä¿¡é˜Ÿåˆ—</td></tr><tr><td>åˆ†å¸ƒå¼äº‹åŠ¡</td><td>åŸç”Ÿæ”¯æŒï¼ˆåŠæ¶ˆæ¯ï¼‰</td><td>å¼±æ”¯æŒï¼ˆäº‹åŠ¡ APIï¼‰</td><td>æ— åŸç”Ÿæ”¯æŒï¼ˆéœ€æ‰‹åŠ¨å®ç°ï¼‰</td></tr><tr><td>ç”Ÿæ€é›†æˆ</td><td>é€‚é…å¾®æœåŠ¡ï¼ˆSpring Cloudï¼‰ã€äº‘åŸç”Ÿ</td><td>ä¸ Flink/Spark/Hadoop æ— ç¼é›†æˆï¼Œå¤§æ•°æ®é¦–é€‰</td><td>å¤šè¯­è¨€æ”¯æŒå¥½ï¼Œé€‚é…ä¼ä¸šçº§å¤æ‚ä¸šåŠ¡</td></tr><tr><td>è¿ç»´æˆæœ¬</td><td>ä½ï¼Œæ˜“éƒ¨ç½²ã€æ˜“ç›‘æ§</td><td>ä¸­ï¼Œéœ€ä¼˜åŒ–é…ç½®</td><td>é«˜ï¼ŒErlang å¼€å‘ï¼Œæ’éšœå¤æ‚</td></tr></tbody></table>
<h4 data-id="heading-47">7.2 é€‰å‹å»ºè®®</h4>
<ol>
<li><strong>é€‰ RocketMQ</strong>ï¼šç”µå•†ã€é‡‘èã€æ”¯ä»˜ç­‰<strong>äº’è”ç½‘æ ¸å¿ƒä¸šåŠ¡</strong>ï¼Œéœ€è¦<strong>åˆ†å¸ƒå¼äº‹åŠ¡ã€é¡ºåºæ¶ˆæ¯ã€é«˜å¯é æ€§</strong>ï¼ŒåŒæ—¶å…¼é¡¾ååæ€§èƒ½ï¼Œå¾®æœåŠ¡æ¶æ„ä¼˜å…ˆé€‰æ‹©ï¼›</li>
<li><strong>é€‰ Kafka</strong>ï¼š<strong>å¤§æ•°æ®åœºæ™¯</strong>ï¼Œå¦‚æ—¥å¿—é‡‡é›†ã€ç”¨æˆ·è¡Œä¸ºåŸ‹ç‚¹ã€å®æ—¶è®¡ç®—ï¼ˆFlink/Sparkï¼‰ï¼Œè¿½æ±‚æè‡´ååå’Œæ•°æ®æŒä¹…åŒ–ï¼Œæ— éœ€å¤æ‚çš„æ¶ˆæ¯ç‰¹æ€§ï¼›</li>
<li><strong>é€‰ RabbitMQ</strong>ï¼š<strong>ä¼ä¸šçº§å¤æ‚ä¸šåŠ¡</strong>ï¼Œéœ€è¦<strong>çµæ´»çš„æ¶ˆæ¯è·¯ç”±ã€å¤šè¯­è¨€æ”¯æŒ</strong>ï¼Œä¸šåŠ¡é‡è¾ƒå°ï¼Œå¯¹ååè¦æ±‚ä¸é«˜ï¼ˆå¦‚å†…éƒ¨ç³»ç»Ÿé€šçŸ¥ã€é…ç½®åŒæ­¥ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-48">å…«ã€æ€»ç»“ä¸å­¦ä¹ å»ºè®®</h3>
<p>Apache RocketMQ ä½œä¸ºä¸€æ¬¾<strong>å›½äº§å¼€æºã€é‡‘èçº§ã€äº‘åŸç”Ÿ</strong>çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå‡­å€Ÿå…¶<strong>æç®€æ¶æ„ã€é«˜æ€§èƒ½ã€ä¸°å¯Œçš„ä¼ä¸šçº§ç‰¹æ€§</strong>ï¼Œå·²æˆä¸ºäº’è”ç½‘åç«¯å¼€å‘çš„ä¸»æµé€‰æ‹©ï¼Œå…¶è®¾è®¡æ€æƒ³ï¼ˆå¦‚ CommitLog+ConsumeQueue åˆ†å±‚å­˜å‚¨ã€é¡ºåºå†™ä¼˜åŒ–ï¼‰ä¹Ÿå€¼å¾—æ‰€æœ‰åç«¯å¼€å‘è€…å­¦ä¹ ã€‚</p>
<h4 data-id="heading-49">8.1 æ ¸å¿ƒæ€»ç»“</h4>
<ol>
<li>RocketMQ çš„æ ¸å¿ƒæ¶æ„ä¸º<strong>NameServer+Broker+Producer+Consumer</strong>ï¼Œæ— çŠ¶æ€ä¸­å¿ƒè®¾è®¡è®©é›†ç¾¤æ‰©å±•çµæ´»ï¼Œä¸»ä»æ¶æ„ä¿è¯é«˜å¯ç”¨ï¼›</li>
<li>é«˜æ€§èƒ½çš„æœ¬è´¨æ˜¯<strong>CommitLog çš„é¡ºåºå†™</strong>+<strong>ConsumeQueue çš„è½»é‡ç´¢å¼•</strong>+<strong>mmap é›¶æ‹·è´</strong>ï¼Œå½»åº•è§£å†³ç£ç›˜ IO ç“¶é¢ˆï¼›</li>
<li>ä¸°å¯Œçš„ä¼ä¸šçº§ç‰¹æ€§ï¼ˆäº‹åŠ¡æ¶ˆæ¯ã€é¡ºåºæ¶ˆæ¯ã€å»¶æ—¶æ¶ˆæ¯ï¼‰è®© RocketMQ é€‚é…å‡ ä¹æ‰€æœ‰äº’è”ç½‘ä¸šåŠ¡åœºæ™¯ï¼›</li>
<li>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„æ ¸å¿ƒæ˜¯<strong>æ¶ˆè´¹ç«¯å¹‚ç­‰æ€§</strong>+<strong>åˆç†çš„ Topic/Queue è®¾è®¡</strong>+<strong>é›†ç¾¤éƒ¨ç½²</strong>ï¼Œè¿™æ˜¯é¿å…é—®é¢˜çš„å…³é”®ã€‚</li>
</ol>
<h4 data-id="heading-50">8.2 å­¦ä¹ å»ºè®®</h4>
<ol>
<li><strong>å…¥é—¨é˜¶æ®µ</strong>ï¼šè·‘é€šæœ¬æ–‡çš„ Java Demoï¼Œç†Ÿæ‚‰æ¶ˆæ¯çš„å‘é€å’Œæ¶ˆè´¹ï¼Œç†è§£æ ¸å¿ƒæ¦‚å¿µï¼ˆTopicã€Queueã€Groupï¼‰ï¼›</li>
<li><strong>è¿›é˜¶é˜¶æ®µ</strong>ï¼šæ­å»º RocketMQ é›†ç¾¤ï¼Œç ”ç©¶<strong>æ¶ˆæ¯å­˜å‚¨ã€åˆ·ç›˜å¤åˆ¶ã€äº‹åŠ¡æ¶ˆæ¯</strong>çš„åº•å±‚åŸç†ï¼Œé˜…è¯»å®˜æ–¹æ–‡æ¡£å’Œæºç ï¼›</li>
<li><strong>å®æˆ˜é˜¶æ®µ</strong>ï¼šåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ RocketMQ è§£å†³<strong>ç³»ç»Ÿè§£è€¦ã€æµé‡å‰Šå³°ã€åˆ†å¸ƒå¼äº‹åŠ¡</strong>ç­‰é—®é¢˜ï¼Œç§¯ç´¯ç”Ÿäº§æ’éšœç»éªŒï¼›</li>
<li><strong>é¢è¯•é˜¶æ®µ</strong>ï¼šé‡ç‚¹æŒæ¡<strong>æ¶æ„è®¾è®¡ã€æ¶ˆæ¯å­˜å‚¨åŸç†ã€å¯é æ€§æœºåˆ¶ã€ç”Ÿäº§æœ€ä½³å®è·µ</strong>ï¼Œè¿™äº›æ˜¯é¢è¯•çš„é«˜é¢‘è€ƒç‚¹ã€‚</li>
</ol>
<p>RocketMQ çš„å­¦ä¹ å¹¶éä¸€è¹´è€Œå°±ï¼Œéœ€è¦ç»“åˆ<strong>ç†è®º + å®æˆ˜</strong>ï¼Œæ·±å…¥ç†è§£å…¶è®¾è®¡æ€æƒ³ï¼Œæ‰èƒ½åœ¨å®é™…é¡¹ç›®ä¸­çµæ´»è¿ç”¨ï¼Œå‘æŒ¥å…¶æœ€å¤§ä»·å€¼ã€‚</p>
<p><strong>å‚è€ƒèµ„æ–™</strong>ï¼š</p>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frocketmq.apache.org%2Fzh%2Fdocs%2Fintroduction%2F01whatis" target="_blank" title="https://rocketmq.apache.org/zh/docs/introduction/01whatis" ref="nofollow noopener noreferrer">Apache RocketMQ å®˜æ–¹æ–‡æ¡£</a></li>
<li>RocketMQ 5.0 æºç </li>
<li>ã€ŠRocketMQ å®æˆ˜ä¸åŸç†è§£æã€‹</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯è¿œç¨‹ç»„ä»¶æ–¹æ¡ˆè®¾è®¡]]></title>    <link>https://juejin.cn/post/7601077764424204338</link>    <guid>https://juejin.cn/post/7601077764424204338</guid>    <pubDate>2026-01-31T11:34:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601077764424204338" data-draft-id="7601020578491154441" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯è¿œç¨‹ç»„ä»¶æ–¹æ¡ˆè®¾è®¡"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-31T11:34:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‰“å·¥ä»”å¼ æŸ"/> <meta itemprop="url" content="https://juejin.cn/user/3131880356450007"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯è¿œç¨‹ç»„ä»¶æ–¹æ¡ˆè®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3131880356450007/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‰“å·¥ä»”å¼ æŸ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T11:34:15.000Z" title="Sat Jan 31 2026 11:34:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸºäº Webpack 5 Module Federation çš„å¾®æ¨¡å—æ¶æ„ï¼Œå®ç°ç»„ä»¶çº§çš„è¿è¡Œæ—¶åŠ è½½ä¸ç‹¬ç«‹éƒ¨ç½²ã€‚</p>
</blockquote>
<h2 data-id="heading-0">1. ç›®æ ‡ (Goals)</h2>
<p>å®ç°ä¸€ä¸ªé«˜æ•ˆã€å¯æ‰©å±•çš„è¿œç¨‹ç»„ä»¶æ¶æ„ï¼Œæ”¯æŒï¼š</p>
<ul>
<li><strong>è¿è¡Œæ—¶åŠ è½½</strong>: å®¿ä¸»åº”ç”¨åœ¨è¿è¡Œæ—¶ä» CDN åŠ è½½ç»„ä»¶ï¼Œæ— éœ€æ„å»ºæ—¶é™æ€å¯¼å…¥ã€‚</li>
<li><strong>ç‹¬ç«‹éƒ¨ç½²</strong>: è¿œç¨‹ç»„ä»¶é¡¹ç›®æ›´æ–°åï¼Œå®¿ä¸»åº”ç”¨æ— éœ€é‡æ–°æ‰“åŒ…å³å¯ç”Ÿæ•ˆï¼Œè§£è€¦å¼€å‘å‘¨æœŸã€‚</li>
<li><strong>åŠ¨æ€ä¾èµ–å…±äº«</strong>: è‡ªåŠ¨å¤„ç† Reactã€Mobx ç­‰å…¬å…±ä¾èµ–ï¼Œé¿å…é‡å¤åŠ è½½ï¼Œä¿è¯å•ä¾‹è¿è¡Œã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-1">2. æ–¹æ¡ˆå¯¹æ¯” (Solution Comparison)</h2>
<p>ä¸ºè¯´æ˜æœ¬æ–¹æ¡ˆï¼ˆWebpack 5 Module Federationï¼‰é€‰æ‹©çš„åˆç†æ€§ï¼Œè¿™é‡Œå¯¹å¸¸è§å‡ ç±»â€œè¿œç¨‹ç»„ä»¶/è¿œç¨‹æ¨¡å—â€æ–¹æ¡ˆè¿›è¡Œå¯¹æ¯”ã€‚</p>
<h3 data-id="heading-2">2.1 å…¸å‹æ–¹æ¡ˆæ¦‚è§ˆ</h3>





























































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>åŠ è½½æ–¹å¼</th><th>ä¾èµ–å…±äº«</th><th>éš”ç¦»æ€§</th><th>å‘å¸ƒ/å›æ»šæˆæœ¬</th><th>å…¸å‹é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>NPM ç»„ä»¶åº“</strong></td><td>æ„å»ºæ—¶å®‰è£…ã€æ‰“åŒ…</td><td>æ— ï¼ˆå„è‡ªæ‰“åŒ…è¿› Hostï¼‰</td><td>é«˜ï¼ˆæŒ‰æ¨¡å—è¾¹ç•Œï¼‰</td><td>é«˜ï¼ˆæ¯æ¬¡éƒ½è¦é‡æ–°å‘ç‰ˆ + é‡å»º Hostï¼‰</td><td>è®¾è®¡ç³»ç»Ÿã€ç¨³å®šåŸºç¡€ç»„ä»¶</td></tr><tr><td><strong>CDN UMD ç»„ä»¶ + <code>window.xxx</code></strong></td><td>è¿è¡Œæ—¶ <code>&lt;script&gt;</code> æ³¨å…¥</td><td>æ‰‹åŠ¨å¤„ç†ï¼ˆé€šå¸¸é‡å¤åŠ è½½ï¼‰</td><td>ä½ï¼ˆæ˜“æ±¡æŸ“å…¨å±€ï¼‰</td><td>ä¸­ï¼ˆå¯æ›¿æ¢ CDN ç‰ˆæœ¬ï¼Œä½†æ¥å£å˜æ›´éš¾ç®¡æ§ï¼‰</td><td>è€é¡¹ç›®ã€ç®€å•æŒ‚ä¸šåŠ¡æ’ä»¶</td></tr><tr><td><strong>iframe å¾®å‰ç«¯</strong></td><td>è¿è¡Œæ—¶ <code>&lt;iframe&gt;</code></td><td>å®é™…æ— å…±äº«ï¼ˆå¼ºéš”ç¦»ï¼‰</td><td>å¾ˆé«˜ï¼ˆJS/CSS å…¨éš”ç¦»ï¼‰</td><td>ä¸­ï¼ˆç‹¬ç«‹å‘å¸ƒï¼Œä½†é›†æˆä½“éªŒå·®ï¼‰</td><td>å®Œæ•´å­ç³»ç»ŸåµŒå…¥ã€ä¸åŒæŠ€æœ¯æ ˆå…±å­˜</td></tr><tr><td><strong>åº”ç”¨çº§å¾®å‰ç«¯ (qiankun)</strong></td><td>è¿è¡Œæ—¶åŠ è½½æ•´ä¸ªåº”ç”¨</td><td>ä¾èµ–å…±äº«æœ‰é™/éœ€è‡ªç ”</td><td>ä¸­ï¼ˆçº¦å®šå¼éš”ç¦»ï¼‰</td><td>ä¸­ï¼ˆå­åº”ç”¨ç‹¬ç«‹å‘å¸ƒï¼‰</td><td>å¤šè·¯ç”±/å¤šé¡µé¢çº§åˆ«æ‹†åˆ†</td></tr><tr><td><strong>è‡ªç ” Runtime Loader</strong></td><td>è¿è¡Œæ—¶æŒ‰ URL åŠ è½½æ¨¡å—</td><td>å¯æ‰‹åŠ¨å®ç°ï¼Œä½†å¤æ‚</td><td>å–å†³äºå®ç°</td><td>ä¸­é«˜ï¼ˆåè®®ç¨³å®šæ€§è¦è‡ªæ§ï¼‰</td><td>éœ€æ”¯æŒå¤šæ„å»ºå·¥å…·ã€å¤šè¯­è¨€æ¨¡å—</td></tr><tr><td><strong>Module Federation (æœ¬æ–¹æ¡ˆ)</strong></td><td>è¿è¡Œæ—¶æŒ‰æ¨¡å—ååŠ è½½</td><td>å†…ç½® shared æœºåˆ¶</td><td>ä¸­é«˜ï¼ˆæ¨¡å—è¾¹ç•Œæ¸…æ™°ï¼‰</td><td>ä½ï¼ˆRemote ç‹¬ç«‹å‘å¸ƒï¼‰</td><td>â€œç»„ä»¶çº§â€è¿œç¨‹åŠ è½½ï¼ŒReact ä¸šåŠ¡æ‹†åˆ†</td></tr></tbody></table>
<h3 data-id="heading-3">2.2 æ ¸å¿ƒå·®å¼‚åˆ†æ</h3>
<ol>
<li><strong>ä¸ NPM ç»„ä»¶åº“çš„å¯¹æ¯”</strong>ï¼šNPM æ–¹æ¡ˆæ˜¯<strong>æ„å»ºæ—¶ç»‘å®š</strong>ï¼Œæ— æ³•åšåˆ°çœŸæ­£çš„è¿è¡Œæ—¶çƒ­æ›´æ–°ï¼›è€Œ MF æ”¯æŒ Remote ç‹¬ç«‹éƒ¨ç½²ï¼ŒHost æ— éœ€é‡å»ºå³å¯ç”Ÿæ•ˆã€‚</li>
<li><strong>ä¸ iframe / åº”ç”¨çº§å¾®å‰ç«¯çš„å¯¹æ¯”</strong>ï¼šiframe é€‚åˆæ•´åº”ç”¨éš”ç¦»ï¼Œä½†å¯¹â€œå•ä¸ªç»„ä»¶â€çº§åˆ«çš„å¤ç”¨éå¸¸ç¬¨é‡ï¼›MF å°±åƒ <code>import</code> æœ¬åœ°ç»„ä»¶ä¸€æ ·è‡ªç„¶ã€‚</li>
<li><strong>ä¸ CDN UMD / è‡ªç ” Loader çš„å¯¹æ¯”</strong>ï¼šMF å°†â€œå®¹å™¨ç®¡ç†ã€ç‰ˆæœ¬åå•†ã€ä¾èµ–å•ä¾‹åŒ–â€æ¡†æ¶åŒ–ä¸º Webpack ç‰¹æ€§ï¼Œç›¸æ¯”è‡ªç ”æ–¹æ¡ˆå¤§å¹…é™ä½äº†å·¥ç¨‹è½åœ°æˆæœ¬ã€‚</li>
</ol>
<h3 data-id="heading-4">2.3 æœ¬æ–¹æ¡ˆå®šä½</h3>
<p>ç»¼åˆæ¥çœ‹ï¼Œæœ¬æ–¹æ¡ˆä¸»è¦é’ˆå¯¹ <strong>ç»„ä»¶çº§ / ä¸šåŠ¡æ¨¡å—çº§</strong> çš„è¿œç¨‹åŠ è½½ï¼Œæ—¨åœ¨å¹³è¡¡â€œä¸šåŠ¡å¤æ‚åº¦ã€è¿­ä»£æ•ˆç‡ã€å·¥ç¨‹æˆæœ¬â€ã€‚</p>
<hr/>
<h2 data-id="heading-5">3. æŠ€æœ¯é€‰å‹ (Tech Stack)</h2>
<ul>
<li><strong>æ„å»ºå·¥å…·</strong>: Webpack 5</li>
<li><strong>æ ¸å¿ƒæ’ä»¶</strong>: <code>ModuleFederationPlugin</code></li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>: Mobx 6+ (æ”¯æŒè·¨å®¹å™¨çŠ¶æ€å…±äº«)</li>
<li><strong>UI æ¡†æ¶</strong>: React 18</li>
<li><strong>æ ·å¼æ–¹æ¡ˆ</strong>: CSS Modules + Tailwind CSS</li>
</ul>
<h2 data-id="heading-6">4. æ ¸å¿ƒæ¶æ„ (Core Architecture)</h2>
<h3 data-id="heading-7">4.1 æ¶æ„æ¨¡å‹</h3>
<p>é‡‡ç”¨ <strong>Provider-Consumer (æä¾›è€…-æ¶ˆè´¹è€…)</strong> æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    subgraph "Remote (Provider)"
        A[RemoteTable] --&gt; B[remoteEntry.js]
        C[RemoteForm] --&gt; B
    end
    
    subgraph "Host (Consumer)"
        D[Dashboard] -.-&gt;|åŠ¨æ€æ‹‰å–| B
        E[Settings] -.-&gt;|åŠ¨æ€æ‹‰å–| B
    end
    
    subgraph "Shared Scope"
        F[React/ReactDOM]
        G[Mobx/Lite]
    end
    
    B --&gt; F
    B --&gt; G
    D --&gt; F
    D --&gt; G
</code></pre>
<ul>
<li><strong>Remote (Provider)</strong>: <code>apps/RemoteComponent</code>
<ul>
<li>è´Ÿè´£å®šä¹‰ã€æ‰“åŒ…å¹¶å¯¼å‡ºåŸå­åŒ–æˆ–ä¸šåŠ¡çº§ç»„ä»¶ã€‚</li>
<li>ç”Ÿæˆ <code>remoteEntry.js</code> ä½œä¸ºåŠ¨æ€åŠ è½½çš„æ¸…å•æ–‡ä»¶ã€‚</li>
</ul>
</li>
<li><strong>Host (Consumer)</strong>: å…¶ä»–ä¸šåŠ¡é¡¹ç›® (å¦‚ <code>apps/admin</code>)
<ul>
<li>é…ç½®è¿œç¨‹èŠ‚ç‚¹ï¼Œé€šè¿‡å¼‚æ­¥æ–¹å¼æ¶ˆè´¹è¿œç¨‹ç»„ä»¶ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">4.2 æ ·å¼éš”ç¦»ç­–ç•¥ (Styling)</h3>
<ul>
<li><strong>CSS Modules (æ¨è)</strong>: é»˜è®¤æ–¹æ¡ˆã€‚é€šè¿‡ç±»å Hash ç¡®ä¿æ ·å¼ä»…åœ¨ç»„ä»¶å†…ç”Ÿæ•ˆã€‚</li>
<li><strong>Tailwind Prefix</strong>: è‹¥ä½¿ç”¨ Tailwindï¼Œå¿…é¡»é…ç½®å…¨å±€å‰ç¼€ (å¦‚ <code>rc-</code>) ä»¥é˜²è¦†ç›–å®¿ä¸»æ ·å¼ã€‚</li>
<li><strong>Shadow DOM (å¯é€‰)</strong>: é’ˆå¯¹æå…¶å¤æ‚çš„æ ·å¼éš”ç¦»éœ€æ±‚ï¼Œå¯è€ƒè™‘å°†è¿œç¨‹ç»„ä»¶æŒ‚è½½åœ¨ Shadow Root ä¸‹ã€‚</li>
</ul>
<h2 data-id="heading-9">5. ç›®å½•ç»“æ„ (Directory Structure)</h2>
<pre><code class="hljs language-text" lang="text">apps/RemoteComponent/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/         # è¿œç¨‹æš´éœ²çš„ç»„ä»¶é›†åˆ
â”‚   â”‚   â”œâ”€â”€ RemoteTable/    # ä¸šåŠ¡ç»„ä»¶ç¤ºä¾‹
â”‚   â”‚   â””â”€â”€ index.ts        # ç»Ÿä¸€å¯¼å‡ºå…¥å£
â”‚   â”œâ”€â”€ bootstrap.tsx       # å¼‚æ­¥å¯åŠ¨é€»è¾‘
â”‚   â”œâ”€â”€ App.tsx             # æœ¬åœ°å¼€å‘é¢„è§ˆç¯å¢ƒ
â”‚   â””â”€â”€ index.tsx           # Webpack å…¥å£
â”œâ”€â”€ webpack.config.js       # MF æä¾›æ–¹æ ¸å¿ƒé…ç½®
â””â”€â”€ tailwind.config.js      # æ ·å¼å‰ç¼€é…ç½®
</code></pre>
<h2 data-id="heading-10">6. å…³é”®å®ç° (Implementation)</h2>
<h3 data-id="heading-11">6.1 Remote ç«¯é…ç½® (webpack.config.js)</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">ModuleFederationPlugin</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>).<span class="hljs-property">container</span>;

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModuleFederationPlugin</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'remote_app'</span>,
      <span class="hljs-attr">filename</span>: <span class="hljs-string">'remoteEntry.js'</span>,
      <span class="hljs-attr">exposes</span>: {
        <span class="hljs-string">'./RemoteTable'</span>: <span class="hljs-string">'./src/components/RemoteTable/index.tsx'</span>,
      },
      <span class="hljs-attr">shared</span>: {
        <span class="hljs-attr">react</span>: { <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">requiredVersion</span>: <span class="hljs-string">'^18.0.0'</span> },
        <span class="hljs-string">'react-dom'</span>: { <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">requiredVersion</span>: <span class="hljs-string">'^18.0.0'</span> },
        <span class="hljs-attr">mobx</span>: { <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span> }
      },
    }),
  ],
};
</code></pre>
<h3 data-id="heading-12">6.2 Host ç«¯é…ç½® (webpack.config.js)</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">ModuleFederationPlugin</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>).<span class="hljs-property">container</span>;

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModuleFederationPlugin</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'host_app'</span>,
      <span class="hljs-attr">remotes</span>: {
        <span class="hljs-comment">// å£°æ˜è¿œç¨‹å®¹å™¨çš„åç§°åŠå…¥å£åœ°å€</span>
        <span class="hljs-attr">remote_app</span>: <span class="hljs-string">'remote_app@http://localhost:3001/remoteEntry.js'</span>,
      },
      <span class="hljs-attr">shared</span>: {
        <span class="hljs-attr">react</span>: { <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">requiredVersion</span>: <span class="hljs-string">'^18.0.0'</span> },
        <span class="hljs-string">'react-dom'</span>: { <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">requiredVersion</span>: <span class="hljs-string">'^18.0.0'</span> },
        <span class="hljs-attr">mobx</span>: { <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span> }
      },
    }),
  ],
};
</code></pre>
<h3 data-id="heading-13">6.3 Host ç«¯æ¶ˆè´¹</h3>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/ErrorBoundary'</span>;

<span class="hljs-comment">// é™æ€å¯¼å…¥ï¼šä¾èµ– webpack é…ç½®ä¸­çš„ remotes</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">RemoteTable</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'remote_app/RemoteTable'</span>));

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorBoundary</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">p</span>&gt;</span>ç»„ä»¶åŠ è½½å¤±è´¥<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>Loading Remote Component...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">RemoteTable</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"è¿œç¨‹æ•°æ®è¡¨"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ErrorBoundary</span>&gt;</span></span>
);
</code></pre>
<h3 data-id="heading-14">6.4 è¿è¡Œæ—¶åŠ¨æ€åŠ è½½è¿œç¨‹å®¹å™¨ (Runtime Dynamic Loading)</h3>
<p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼ˆå¦‚ç¯å¢ƒ URL åŠ¨æ€åŒ–ã€A/B æµ‹è¯•æˆ–åŸºäºæ’ä»¶ç³»ç»Ÿçš„åº”ç”¨ï¼‰ï¼Œæˆ‘ä»¬æ— æ³•åœ¨æ„å»ºæ—¶ç¡¬ç¼–ç è¿œç¨‹åœ°å€ã€‚æ­¤æ—¶å¯ä»¥åˆ©ç”¨ Webpack çš„è¿è¡Œæ—¶ API åŠ¨æ€åŠ è½½ï¼š</p>
<h4 data-id="heading-15">6.4.1 å®ç°å·¥å…·å‡½æ•°</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * åŠ¨æ€åŠ è½½è¿œç¨‹ç»„ä»¶è„šæœ¬å¹¶åˆå§‹åŒ–å®¹å™¨
 * <span class="hljs-doctag">@param</span> url remoteEntry.js çš„å®Œæ•´åœ°å€
 * <span class="hljs-doctag">@param</span> scope è¿œç¨‹åº”ç”¨çš„ name (å¯¹åº” MF é…ç½®ä¸­çš„ name)
 * <span class="hljs-doctag">@param</span> module å¯¼å‡ºçš„è·¯å¾„ (å¦‚ './RemoteTable')
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadRemoteModule</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, scope: <span class="hljs-built_in">string</span>, <span class="hljs-variable language_">module</span>: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// 1. åŠ¨æ€æ³¨å…¥ script æ ‡ç­¾</span>
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
    script.<span class="hljs-property">src</span> = url;
    script.<span class="hljs-property">type</span> = <span class="hljs-string">'text/javascript'</span>;
    script.<span class="hljs-property">async</span> = <span class="hljs-literal">true</span>;
    script.<span class="hljs-property">onload</span> = resolve;
    script.<span class="hljs-property">onerror</span> = reject;
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(script);
  });

  <span class="hljs-comment">// 2. åˆå§‹åŒ–å…±äº«ä½œç”¨åŸŸ (Share Scope)</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">__webpack_init_sharing__</span>(<span class="hljs-string">'default'</span>);

  <span class="hljs-comment">// 3. è·å–è¿œç¨‹å®¹å™¨</span>
  <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">window</span>[scope];
  
  <span class="hljs-comment">// 4. åˆå§‹åŒ–å®¹å™¨</span>
  <span class="hljs-keyword">await</span> container.<span class="hljs-title function_">init</span>(__webpack_share_scopes__.<span class="hljs-property">default</span>);

  <span class="hljs-comment">// 5. è·å–æ¨¡å—å·¥å‚å¹¶æ‰§è¡Œ</span>
  <span class="hljs-keyword">const</span> factory = <span class="hljs-keyword">await</span> container.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">module</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">Module</span> = <span class="hljs-title function_">factory</span>();
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Module</span>;
}
</code></pre>
<h4 data-id="heading-16">6.4.2 ä¸šåŠ¡ä¸­ä½¿ç”¨</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">DynamicRemoteTable</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> 
  <span class="hljs-title function_">loadRemoteModule</span>(
    <span class="hljs-string">'http://cdn.example.com/remoteEntry.js'</span>, 
    <span class="hljs-string">'remote_app'</span>, 
    <span class="hljs-string">'./RemoteTable'</span>
  )
);
</code></pre>
<h2 data-id="heading-17">7. æ ¸å¿ƒæœºåˆ¶æ·±å…¥ (Deep Dive)</h2>
<h3 data-id="heading-18">7.1 ModuleFederationPlugin æ ¸å¿ƒé…ç½®è¯¦è§£</h3>
<p><code>ModuleFederationPlugin</code> æ˜¯å®ç°æ¨¡å—è”é‚¦çš„æ ¸å¿ƒé…ç½®å·¥å…·ã€‚ä»¥ä¸‹æ˜¯å…¶å…³é”®å‚æ•°çš„è¯¦ç»†ä»‹ç»ï¼š</p>









































<table><thead><tr><th align="left">é…ç½®é¡¹</th><th align="left">ç±»å‹</th><th align="left">ä½œç”¨æè¿°</th><th align="left">å…³é”®æ³¨æ„ç‚¹</th></tr></thead><tbody><tr><td align="left"><strong>name</strong></td><td align="left"><code>string</code></td><td align="left">å®šä¹‰å½“å‰å®¹å™¨çš„å…¨å±€å”¯ä¸€åç§°ã€‚</td><td align="left">å¿…å¡«ã€‚ä¼šä½œä¸ºå…¨å±€å˜é‡æŒ‚è½½åˆ° <code>window</code> ä¸Šï¼ŒHost ç«¯é€šè¿‡æ­¤åç§°å¼•ç”¨ã€‚</td></tr><tr><td align="left"><strong>filename</strong></td><td align="left"><code>string</code></td><td align="left">ç”Ÿæˆçš„è¿œç¨‹å…¥å£æ¸…å•æ–‡ä»¶åã€‚</td><td align="left">é€šå¸¸è®¾ä¸º <code>remoteEntry.js</code>ã€‚Host åº”ç”¨åœ¨è¿è¡Œæ—¶é¦–å…ˆåŠ è½½æ­¤æ–‡ä»¶ä»¥è·å–æ¨¡å—å…ƒæ•°æ®ã€‚</td></tr><tr><td align="left"><strong>remotes</strong></td><td align="left"><code>object</code></td><td align="left">å£°æ˜å½“å‰åº”ç”¨éœ€è¦æ¶ˆè´¹çš„è¿œç¨‹åº”ç”¨ã€‚</td><td align="left">é”®ä¸ºæœ¬åœ°å¼•ç”¨åˆ«åï¼Œå€¼ä¸ºè¿œç¨‹å®¹å™¨åå’Œåœ°å€ï¼ˆå¦‚ <code>app: 'app@http://.../remoteEntry.js'</code>ï¼‰ã€‚</td></tr><tr><td align="left"><strong>exposes</strong></td><td align="left"><code>object</code></td><td align="left">å¯¼å‡ºå½“å‰åº”ç”¨çš„å†…éƒ¨æ¨¡å—ä¾›ä»–äººä½¿ç”¨ã€‚</td><td align="left">é”®ä¸ºå¯¹å¤–æš´éœ²çš„è·¯å¾„ï¼Œå€¼ä¸ºå†…éƒ¨æ¨¡å—çš„å®é™…ç›¸å¯¹è·¯å¾„ã€‚</td></tr><tr><td align="left"><strong>shared</strong></td><td align="left"><code>object</code></td><td align="left">å®šä¹‰å¤šä¸ªåº”ç”¨é—´å…±äº«çš„å…¬å…±ä¾èµ–åº“ã€‚</td><td align="left">åŒ…å« <code>singleton</code>ï¼ˆå•ä¾‹ï¼‰ã€<code>requiredVersion</code>ï¼ˆç‰ˆæœ¬è¦æ±‚ï¼‰ç­‰é«˜çº§é…ç½®ï¼Œé˜²æ­¢ React ç­‰åº“å‡ºç°å¤šå®ä¾‹ã€‚</td></tr></tbody></table>
<h3 data-id="heading-19">7.2 æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>æ¨¡å—è”é‚¦ï¼ˆModule Federationï¼‰æ˜¯ Webpack 5 æä¾›çš„ä¸€ç§ <strong>è·¨æ„å»ºå…±äº«æ¨¡å—</strong> çš„æœºåˆ¶ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ï¼š</p>
<ul>
<li>ä¸åŒé¡¹ç›®ï¼ˆæ„å»ºäº§ç‰©ï¼‰ä¹‹é—´å¯ä»¥åƒæœ¬åœ°æ¨¡å—ä¸€æ ·äº’ç›¸ <code>import</code></li>
<li>æ¯ä¸ªé¡¹ç›®ä»èƒ½ç‹¬ç«‹æ„å»ºã€ç‹¬ç«‹éƒ¨ç½²</li>
<li>è‡ªåŠ¨å¤„ç†ä¾èµ–å…±äº«ä¸ç‰ˆæœ¬åå•†ï¼Œé¿å…é‡å¤æ‰“åŒ… React ç­‰å…¬å…±åº“</li>
</ul>
<p>å‡ ä¸ªå…³é”®è§’è‰²ï¼š</p>
<ul>
<li><strong>Hostï¼ˆæ¶ˆè´¹æ–¹ï¼‰</strong>ï¼šä½¿ç”¨è¿œç¨‹æ¨¡å—çš„åº”ç”¨ï¼Œå¦‚ <code>apps/admin</code></li>
<li><strong>Remoteï¼ˆæä¾›æ–¹ï¼‰</strong>ï¼šæš´éœ²æ¨¡å—ç»™å…¶ä»–åº”ç”¨ä½¿ç”¨ï¼Œå¦‚ <code>apps/RemoteComponent</code></li>
<li><strong>Container Runtimeï¼ˆå®¹å™¨è¿è¡Œæ—¶ï¼‰</strong>ï¼šWebpack åœ¨æµè§ˆå™¨ä¸­æ³¨å…¥çš„è¿è¡Œæ—¶ä»£ç ï¼Œç”¨äºï¼š
<ul>
<li>æ³¨å†Œå’ŒæŸ¥æ‰¾è¿œç¨‹æ¨¡å—</li>
<li>æ‹‰å– <code>remoteEntry.js</code></li>
<li>å¤„ç† shared ä¾èµ–çš„ç‰ˆæœ¬ä¸å®ä¾‹å¤ç”¨</li>
</ul>
</li>
</ul>
<h3 data-id="heading-20">7.3 åŠ è½½æµç¨‹ï¼ˆä»¥ RemoteComponent ä¸ºä¾‹ï¼‰</h3>
<p>ä»¥ Host ç«¯ <code>import('remote_app/RemoteTable')</code> ä¸ºä¾‹ï¼Œå…¶å†…éƒ¨å¤§è‡´æµç¨‹ï¼š</p>
<ol>
<li>
<p><strong>æ„å»ºé˜¶æ®µ</strong></p>
<ul>
<li>Remote ç«¯é€šè¿‡ <code>ModuleFederationPlugin</code> é…ç½®ï¼š
<ul>
<li><code>name: 'remote_app'</code></li>
<li><code>exposes: { './RemoteTable': './src/components/RemoteTable/index.tsx' }</code></li>
</ul>
</li>
<li>Webpack æ ¹æ®è¯¥é…ç½®ç”Ÿæˆï¼š
<ul>
<li><code>remoteEntry.js</code>ï¼šä¸€ä»½æ¨¡å—æš´éœ²æ¸…å• + åŠ è½½å…¥å£</li>
<li>å¯¹åº”çš„ä¸šåŠ¡ chunkï¼šçœŸæ­£çš„ç»„ä»¶ä»£ç </li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>è¿è¡Œæ—¶æ³¨å†Œ</strong></p>
<ul>
<li>Remote åº”ç”¨åŠ è½½æ—¶ï¼Œ<code>remoteEntry.js</code> è¢«æµè§ˆå™¨æ‰§è¡Œï¼š
<ul>
<li>è°ƒç”¨ Webpack runtimeï¼Œå°† <code>remote_app</code> æ³¨å†Œä¸ºä¸€ä¸ª <strong>è¿œç¨‹å®¹å™¨</strong></li>
<li>åŒæ—¶æ³¨å†Œå®ƒæš´éœ²å‡ºæ¥çš„æ¨¡å—æ˜ å°„å…³ç³»ï¼ˆå¦‚ <code>'./RemoteTable' -&gt; å…·ä½“ chunk</code>ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Host ç«¯å‘èµ·è¿œç¨‹åŠ è½½</strong></p>
<ul>
<li>å½“ Host ä»£ç æ‰§è¡Œåˆ°ï¼š<code>import('remote_app/RemoteTable')</code> æ—¶ï¼š
<ol>
<li>Webpack runtime æ£€æŸ¥æ˜¯å¦å·²åŠ è½½ <code>remote_app</code> å®¹å™¨</li>
<li>å¦‚æœªåŠ è½½ï¼Œåˆ™åŠ¨æ€æ’å…¥ <code>&lt;script src="remoteEntry.js"&gt;</code> æ‹‰å–å®¹å™¨</li>
<li>ç­‰å¾… <code>remoteEntry.js</code> æ‰§è¡Œå®Œæˆï¼Œæ‹¿åˆ°è¿œç¨‹å®¹å™¨å¯¹è±¡</li>
<li>è¯·æ±‚å®¹å™¨ä¸­çš„ <code>'./RemoteTable'</code> æ¨¡å—å·¥å‚å‡½æ•°</li>
<li>è‹¥è¯¥æ¨¡å—è¿˜ä¾èµ–å…¶å®ƒ chunkï¼ˆæŒ‰éœ€åŠ è½½ï¼‰ï¼Œç»§ç»­åŠ¨æ€åŠ è½½å¯¹åº” JS æ–‡ä»¶</li>
</ol>
</li>
</ul>
</li>
<li>
<p><strong>æ¨¡å—æ‰§è¡Œä¸ä½¿ç”¨</strong></p>
<ul>
<li>å¾—åˆ°æ¨¡å—å·¥å‚å‡½æ•°åï¼ŒWebpack runtime ä¼šï¼š
<ul>
<li>å…ˆå®Œæˆ shared ä¾èµ–åˆå§‹åŒ–ï¼ˆè§ 6.3ï¼‰</li>
<li>æ‰§è¡Œæ¨¡å—å·¥å‚å‡½æ•°ï¼Œå¾—åˆ°çœŸæ­£çš„ React ç»„ä»¶</li>
</ul>
</li>
<li>åœ¨ä»£ç å±‚é¢ï¼ŒHost ä¾§å°±åƒæ‹¿åˆ°äº†ä¸€ä¸ªæœ¬åœ°çš„ <code>RemoteTable</code> ç»„ä»¶ä¸€æ ·ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-21">7.3.1 åŠ è½½æµç¨‹ä¼ªä»£ç </h4>
<pre><code class="hljs language-js" lang="js">&gt; ä¼ªä»£ç ä»…æè¿°å…³é”®æµç¨‹ï¼Œä¸å®é™… <span class="hljs-title class_">Webpack</span> è¿è¡Œæ—¶ä»£ç ç•¥æœ‰å·®å¼‚ï¼Œç”¨äºå¸®åŠ©ç†è§£ <span class="hljs-title class_">Host</span> ä» <span class="hljs-number">0</span> åˆ°æ‹¿åˆ°è¿œç¨‹ç»„ä»¶çš„å®Œæ•´åŠ è½½é˜¶æ®µã€‚

<span class="hljs-comment">// ======================</span>
<span class="hljs-comment">// Host ä¾§ï¼šä¸šåŠ¡è§¦å‘å…¥å£</span>
<span class="hljs-comment">// ======================</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderHostPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// React.lazy è§¦å‘å¼‚æ­¥åŠ è½½è¿œç¨‹ç»„ä»¶</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">RemoteTable</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span>
    <span class="hljs-comment">// å®é™…ä¸Šä¼šèµ°åˆ°ä¸‹é¢çš„ loadRemoteModule æµç¨‹</span>
    <span class="hljs-title function_">loadRemoteModule</span>({
      <span class="hljs-attr">remoteName</span>: <span class="hljs-string">'remote_app'</span>,
      <span class="hljs-attr">exposedModule</span>: <span class="hljs-string">'./RemoteTable'</span>,
    })
  );

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorBoundary</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Spinner</span> /&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">RemoteTable</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"è¿œç¨‹æ•°æ®è¡¨"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ErrorBoundary</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ===========================================</span>
<span class="hljs-comment">// æŠ½è±¡çš„â€œåŠ è½½è¿œç¨‹æ¨¡å—â€ä¼ªä»£ç ï¼ˆHost è¿è¡Œæ—¶è§’åº¦ï¼‰</span>
<span class="hljs-comment">// ===========================================</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadRemoteModule</span>(<span class="hljs-params">options: {
  remoteName: string;     // å®¹å™¨åï¼Œå¦‚ <span class="hljs-string">'remote_app'</span>
  exposedModule: string;  // æ¨¡å—è·¯å¾„ï¼Œå¦‚ <span class="hljs-string">'./RemoteTable'</span>
}</span>) {
  <span class="hljs-keyword">const</span> { remoteName, exposedModule } = options;

  <span class="hljs-comment">// 1. ç¡®ä¿ remoteEntry å·²ç»åŠ è½½ï¼ˆå®¹å™¨å·²æ³¨å†Œï¼‰</span>
  <span class="hljs-comment">// ----------------------------------------------------------------</span>
  <span class="hljs-comment">//  1.1 ä» Host çš„ MF é…ç½®ä¸­æ‹¿åˆ° remote çš„ URL</span>
  <span class="hljs-keyword">const</span> remoteUrl = <span class="hljs-title function_">getRemoteEntryUrlFromConfig</span>(remoteName);
  <span class="hljs-comment">//  1.2 å¦‚æœå®¹å™¨è¿˜ä¸å­˜åœ¨ï¼Œåˆ™åŠ¨æ€æ’å…¥ &lt;script&gt; åŠ è½½ remoteEntry.js</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>[remoteName]) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadRemoteEntryScript</span>(remoteUrl);  <span class="hljs-comment">// ç­‰ä»·äºåŠ¨æ€åˆ›å»º &lt;script&gt; æ ‡ç­¾å¹¶ç­‰å¾… onload</span>
  }

  <span class="hljs-comment">// 2. åˆå§‹åŒ– shared ä½œç”¨åŸŸï¼ˆå…¨å±€åªéœ€åšä¸€æ¬¡ï¼Œä½†ä¼ªä»£ç é‡Œç®€åŒ–ä¸ºæ¯æ¬¡ç¡®ä¿å®Œæˆï¼‰ </span>
  <span class="hljs-comment">// ----------------------------------------------------------------</span>
  <span class="hljs-comment">//  è°ƒç”¨ Webpack runtime çš„å…±äº«åˆå§‹åŒ–é€»è¾‘</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">__webpack_init_sharing__</span>(<span class="hljs-string">'default'</span>); <span class="hljs-comment">// åˆå§‹åŒ–é»˜è®¤ shared scope</span>

  <span class="hljs-comment">// 3. è·å–è¿œç¨‹å®¹å™¨å¹¶å®Œæˆåå•†</span>
  <span class="hljs-comment">// ----------------------------------------------------------------</span>
  <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">window</span>[remoteName];      <span class="hljs-comment">// e.g. window.remote_app</span>

  <span class="hljs-comment">//  3.1 å°† Host çš„ shared scope ä¼ ç»™ Remoteï¼Œå®Œæˆç‰ˆæœ¬åå•†</span>
  <span class="hljs-comment">//      - Remote ä¼šæŠŠè‡ªå·±å£°æ˜çš„ shared ä¾èµ–æ³¨å…¥è¿›æ¥</span>
  <span class="hljs-comment">//      - Host / Remote å…±åŒå†³å®šå®é™…ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬ï¼ˆå¦‚ React å•ä¾‹ï¼‰</span>
  <span class="hljs-keyword">await</span> container.<span class="hljs-title function_">init</span>(__webpack_share_scopes__.<span class="hljs-property">default</span>);

  <span class="hljs-comment">// 4. ä»å®¹å™¨é‡Œè·å–è¿œç¨‹æ¨¡å—</span>
  <span class="hljs-comment">// ----------------------------------------------------------------</span>
  <span class="hljs-comment">//  4.1 container.get è¿”å›ä¸€ä¸ª Promiseï¼Œresolve ä¸ºæ¨¡å—å·¥å‚å‡½æ•°</span>
  <span class="hljs-keyword">const</span> moduleFactory = <span class="hljs-keyword">await</span> container.<span class="hljs-title function_">get</span>(exposedModule); <span class="hljs-comment">// e.g. './RemoteTable'</span>

  <span class="hljs-comment">//  4.2 æ‰§è¡Œå·¥å‚å‡½æ•°ï¼Œå¾—åˆ°çœŸæ­£çš„æ¨¡å—å¯¼å‡ºå¯¹è±¡</span>
  <span class="hljs-keyword">const</span> moduleExports = <span class="hljs-title function_">moduleFactory</span>();

  <span class="hljs-comment">//  4.3 æŒ‰éœ€è¿”å›é»˜è®¤å¯¼å‡ºæˆ–å…·åå¯¼å‡º</span>
  <span class="hljs-keyword">return</span> moduleExports.<span class="hljs-property">default</span> || moduleExports;
}

<span class="hljs-comment">// ======================</span>
<span class="hljs-comment">// å·¥å…·ï¼šåŠ è½½ remoteEntry.js</span>
<span class="hljs-comment">// ======================</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadRemoteEntryScript</span>(<span class="hljs-params">url: string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> existingScript = <span class="hljs-variable language_">document</span>.<span class="hljs-property">querySelector</span>&lt;<span class="hljs-title class_">HTMLScriptElement</span>&gt;(
      <span class="hljs-string">`script[data-remote-entry="<span class="hljs-subst">${url}</span>"]`</span>
    );
    <span class="hljs-keyword">if</span> (existingScript) {
      <span class="hljs-comment">// å·²ç»åœ¨åŠ è½½æˆ–åŠ è½½å®Œæˆï¼Œç›´æ¥å¤ç”¨</span>
      existingScript.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>());
      existingScript.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">() =&gt;</span>
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'remoteEntry load error'</span>))
      );
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
    script.<span class="hljs-property">src</span> = url;
    script.<span class="hljs-property">type</span> = <span class="hljs-string">'text/javascript'</span>;
    script.<span class="hljs-property">async</span> = <span class="hljs-literal">true</span>;
    script.<span class="hljs-property">dataset</span>.<span class="hljs-property">remoteEntry</span> = url;

    script.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>();
    script.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span>
      <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Failed to load remoteEntry: <span class="hljs-subst">${url}</span>`</span>));

    <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(script);
  });
}
</code></pre>
<h3 data-id="heading-22">7.4 ä¾èµ–å…±äº«æœºåˆ¶ï¼ˆShared Scopeï¼‰æ·±å…¥</h3>
<p><code>ModuleFederationPlugin</code> é€šè¿‡ä¸€å¥—å¤æ‚çš„ <strong>å…±äº«ä½œç”¨åŸŸ (Share Scope)</strong> æœºåˆ¶æ¥ç®¡ç†è·¨åº”ç”¨çš„ä¾èµ–ï¼š</p>
<h4 data-id="heading-23">7.4.1 æ„å»ºé˜¶æ®µï¼šå…ƒæ•°æ®ç”Ÿæˆ</h4>
<p>åœ¨ Webpack æ„å»ºæ—¶ï¼Œæ’ä»¶ä¼šæ ¹æ® <code>shared</code> é…ç½®ç”Ÿæˆç‰¹æ®Šçš„æ¨¡å—ï¼š</p>
<ul>
<li><strong>ProvideSharedModule</strong>: å¦‚æœåº”ç”¨æ˜¯å…±äº«åº“çš„æä¾›è€…ï¼ŒWebpack ä¼šå°†è¯¥åº“æ ‡è®°ï¼Œå¹¶å‡†å¤‡å¥½ä¾›ä»–äººä½¿ç”¨çš„å…ƒæ•°æ®ã€‚</li>
<li><strong>ConsumeSharedModule</strong>: å¦‚æœåº”ç”¨æ˜¯æ¶ˆè´¹è€…ï¼ŒWebpack ä¼šç”Ÿæˆä¸€æ®µå¼‚æ­¥åŠ è½½é€»è¾‘ï¼Œä¼˜å…ˆä»å…¨å±€å…±äº«ä½œç”¨åŸŸæŸ¥æ‰¾ã€‚</li>
<li><strong>ç‰ˆæœ¬æ¸…å•</strong>: æ’ä»¶ä¼šè®°å½•æ¯ä¸ªå…±äº«åº“çš„ <code>version</code> å’Œ <code>eager</code> å±æ€§ï¼Œå¹¶å°†è¿™äº›å…ƒæ•°æ®å†™å…¥ <code>remoteEntry.js</code>ã€‚</li>
</ul>
<h4 data-id="heading-24">7.4.2 è¿è¡Œé˜¶æ®µï¼šåˆå§‹åŒ–ä¸åå•† (init)</h4>
<p>è¿™æ˜¯å…±äº«ä¾èµ–ç”Ÿæ•ˆçš„å…³é”®æ­¥éª¤ï¼š</p>
<ol>
<li><strong>Scope æ³¨å†Œ</strong>: å½“ Host åŠ è½½ Remote æ—¶ï¼Œé¦–å…ˆè°ƒç”¨ Remote å®¹å™¨çš„ <code>init(shareScope)</code> æ–¹æ³•ã€‚</li>
<li><strong>åˆå¹¶ä½œç”¨åŸŸ</strong>: Remote ä¼šå°†è‡ªå·±çš„å…±äº«ä¾èµ–æ¸…å•åˆå¹¶åˆ°å…¨å±€ <code>shareScope</code> å¯¹è±¡ä¸­ï¼ˆé€šå¸¸æ˜¯ <code>default</code> ä½œç”¨åŸŸï¼‰ã€‚</li>
<li><strong>ç‰ˆæœ¬åå•† (Resolution)</strong>:
<ul>
<li>Webpack è¿è¡Œæ—¶ä¼šæ£€æŸ¥ <code>shareScope</code> ä¸­æ‰€æœ‰å¯ç”¨çš„ç‰ˆæœ¬ã€‚</li>
<li><strong>æœ€é«˜ç‰ˆæœ¬ä¼˜å…ˆ</strong>: å¦‚æœæ²¡æœ‰ç‰¹æ®Šé™åˆ¶ï¼Œé€‰æ‹©ç‰ˆæœ¬å·æœ€é«˜çš„å®ä¾‹ã€‚</li>
<li><strong>è¯­ä¹‰ç‰ˆæœ¬åŒ¹é…</strong>: æ ¹æ® <code>requiredVersion</code> (å¦‚ <code>^18.0.0</code>) è¿‡æ»¤ã€‚</li>
</ul>
</li>
<li><strong>åŠ è½½æ¨¡å—</strong>: ä¸€æ—¦ç¡®å®šäº†ç‰ˆæœ¬ï¼ŒHost å’Œ Remote éƒ½ä¼šé€šè¿‡ <code>get()</code> æ–¹æ³•ä»å…±äº«ä½œç”¨åŸŸè·å–å¯¹åº”çš„æ¨¡å—å·¥å‚å‡½æ•°ã€‚</li>
</ol>
<h4 data-id="heading-25">7.4.3 å•ä¾‹æ¨¡å¼ (Singleton) é€»è¾‘</h4>
<p>å½“é…ç½®äº† <code>singleton: true</code> æ—¶ï¼š</p>
<ul>
<li>Webpack ä¿è¯åœ¨æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸä¸­ï¼ŒæŸä¸ªåº“ï¼ˆå¦‚ Reactï¼‰<strong>åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡</strong>ã€‚</li>
<li>å¦‚æœ Host å·²ç»åŠ è½½äº† Reactï¼ŒRemote å³ä½¿ç‰ˆæœ¬ç•¥é«˜ä¹Ÿä¼šè¢«è¿«ä½¿ç”¨ Host çš„å®ä¾‹ï¼ˆé™¤éç‰ˆæœ¬å†²çªä¸¥é‡å¯¼è‡´ <code>strictVersion</code> æŠ¥é”™ï¼‰ã€‚</li>
<li>è¿™è§£å†³äº† React Hook å¿…é¡»ä¾èµ–åŒä¸€ä¸ªå•ä¾‹ <code>dispatcher</code> çš„æ ¸å¿ƒé—®é¢˜ã€‚</li>
</ul>
<h4 data-id="heading-26">7.4.4 æœ€ç»ˆæ•ˆæœ</h4>
<ul>
<li>Host ä¸å¤šä¸ª Remote åº”ç”¨å…±äº«åŒä¸€ä»½ React/Mobx å®ä¾‹ï¼š
<ul>
<li>é¿å…åŒ…ä½“ç§¯è†¨èƒ€ã€‚</li>
<li>ä¿è¯çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚ Mobxï¼‰åœ¨ä¸åŒåº”ç”¨é—´è¡Œä¸ºä¸€è‡´ã€‚</li>
<li>é¿å… React å¤šå®ä¾‹å¯¼è‡´çš„ Context/Mobx Provider å¤±æ•ˆç­‰é—®é¢˜ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-27">7.5 é€‚ç”¨åœºæ™¯ä¸é™åˆ¶</h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong></p>
<ul>
<li>å¤šå›¢é˜Ÿã€å¤šä»“åº“åä½œçš„å‰ç«¯æ¶æ„ï¼ˆå¾®å‰ç«¯ï¼‰</li>
<li>è¿œç¨‹ç»„ä»¶åº“/ä¸šåŠ¡æ¨¡å—çš„ç‹¬ç«‹å‘å¸ƒä¸ç°åº¦</li>
<li>å¸Œæœ›åœ¨ä¸é‡å»º Host çš„å‰æä¸‹ï¼Œå¿«é€Ÿæ›´æ–°æŸäº›ä¸šåŠ¡æ¨¡å—</li>
</ul>
<p><strong>æ³¨æ„ç‚¹ / é™åˆ¶</strong></p>
<ul>
<li>Host å’Œ Remote åœ¨è¿è¡Œæ—¶å¿…é¡»èƒ½è®¿é—®å½¼æ­¤çš„æ„å»ºäº§ç‰©ï¼ˆä¸€èˆ¬é€šè¿‡ CDNï¼‰</li>
<li>æ„å»ºå·¥å…·éœ€ç»Ÿä¸€ä½¿ç”¨ Webpack 5ï¼Œæˆ–ä¿è¯ Module Federation å…¼å®¹</li>
<li>shared ä¾èµ–ç‰ˆæœ¬è¦å°½é‡æ”¶æ•›ï¼Œé¿å…å¤šç‰ˆæœ¬å…±å­˜å¯¼è‡´è¡Œä¸ºä¸ä¸€è‡´</li>
<li>è¿è¡Œæ—¶åŠ è½½æ„å‘³ç€é¦–å±å¯èƒ½å¢åŠ ä¸€æ¬¡ HTTP è¯·æ±‚ï¼Œéœ€è¦ç»“åˆç¼“å­˜ä¸é¢„åŠ è½½ä¼˜åŒ–</li>
</ul>
<hr/>
<h2 data-id="heading-28">8. æ„å»ºä¸éƒ¨ç½²æµç¨‹ (Build &amp; Deploy)</h2>
<p>ä¸‹é¢ä»¥æœ¬æ–¹æ¡ˆä¸­çš„ Remote (<code>apps/RemoteComponent</code>) ä¸ Hostï¼ˆå¦‚ <code>apps/admin</code>ï¼‰ä¸ºä¾‹ï¼Œè¯´æ˜ä»é…ç½®åˆ°äº§ç‰©è¾“å‡ºçš„æ•´ä½“æ‰“åŒ…æµç¨‹ã€‚</p>
<h3 data-id="heading-29">8.1 é…ç½®é˜¶æ®µ</h3>
<ol>
<li>
<p><strong>Remote ä¾§é…ç½® <code>ModuleFederationPlugin</code></strong></p>
<ul>
<li>å…³é”®å­—æ®µï¼š
<ul>
<li><code>name</code>: è¿œç¨‹å®¹å™¨åç§°ï¼ˆå¦‚ <code>remote_app</code>ï¼‰</li>
<li><code>filename</code>: å®¹å™¨å…¥å£æ–‡ä»¶åï¼ˆå¦‚ <code>remoteEntry.js</code>ï¼‰</li>
<li><code>exposes</code>: æš´éœ²çš„æ¨¡å—æ˜ å°„ï¼ˆå¦‚ <code>'./RemoteTable' -&gt; './src/components/RemoteTable/index.tsx'</code>ï¼‰</li>
<li><code>shared</code>: å…±äº«ä¾èµ–ï¼ˆ<code>react</code> / <code>react-dom</code> / <code>mobx</code> ç­‰ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Host ä¾§é…ç½® <code>ModuleFederationPlugin</code></strong></p>
<ul>
<li>å…³é”®å­—æ®µï¼š
<ul>
<li><code>remotes</code>: å£°æ˜è¿œç¨‹å®¹å™¨åŠå…¶åœ°å€
<ul>
<li>ä¾‹å¦‚ï¼š<code>remote_app: 'remote_app@https://cdn.xxx.com/remoteEntry.js'</code></li>
</ul>
</li>
<li><code>shared</code>: ä¸ Remote å°½é‡ä¿æŒä¸€è‡´çš„å…±äº«ä¾èµ–é…ç½®</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Webpack è§£æä¸ä¾èµ–å›¾æ„å»º</strong></p>
<ul>
<li>Webpack åœ¨æ„å»ºæ—¶ä¼šï¼š
<ul>
<li>æ‰«æå…¥å£å’Œæ‰€æœ‰ä¾èµ–æ¨¡å—ï¼Œæ„å»ºä¾èµ–å›¾ï¼ˆåŒ…æ‹¬ <code>import('remote_app/RemoteTable')</code> ç­‰åŠ¨æ€å¯¼å…¥è¯­å¥ï¼‰ã€‚</li>
<li>æ ¹æ® <code>ModuleFederationPlugin</code> çš„é…ç½®ï¼Œæ ‡è®°å“ªäº›æ¨¡å—å±äºï¼š
<ul>
<li>æœ¬åœ° chunk</li>
<li>æš´éœ²ç»™å¤–éƒ¨çš„ remote æ¨¡å—</li>
<li>éœ€è¦åŠ å…¥ shared ä½œç”¨åŸŸçš„ä¾èµ–</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-30">8.2 Remote ç«¯æ‰“åŒ…æµç¨‹</h3>
<p>ä»¥ <code>apps/RemoteComponent</code> ä¸ºä¾‹ï¼Œä¸€ä¸ªå…¸å‹çš„æ„å»ºè¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p><strong>å…¥å£è§£æ</strong></p>
<ul>
<li>å¸¸è§„ Webpack å…¥å£ï¼ˆå¦‚ <code>src/App.tsx</code>ï¼‰ç”¨äºæœ¬åœ°é¢„è§ˆå¼€å‘ã€‚</li>
<li>åŒæ—¶ï¼Œ<code>ModuleFederationPlugin</code> ä¼šåœ¨å†…éƒ¨æ³¨å…¥ä¸€ä¸ªâ€œå®¹å™¨å…¥å£â€ï¼Œç”¨äºç”Ÿæˆ <code>remoteEntry.js</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸šåŠ¡ä»£ç åˆ†å—ï¼ˆchunkï¼‰</strong></p>
<ul>
<li>Webpack æ ¹æ® import å…³ç³»è¿›è¡Œä»£ç åˆ†å‰²ï¼š
<ul>
<li>ä¸»ä¸šåŠ¡ chunkï¼ˆå¦‚è¿œç¨‹ç»„ä»¶ç›¸å…³ä»£ç ï¼‰</li>
<li>å…¬å…±ä¾èµ– chunkï¼ˆå¦‚ lodash ç­‰æœªè¢« shared çš„åº“ï¼‰</li>
<li>è¿è¡Œæ—¶ä»£ç ï¼ˆWebpack runtimeï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆ Remote å®¹å™¨ (<code>remoteEntry.js</code>)</strong></p>
<ul>
<li><code>ModuleFederationPlugin</code> ç”Ÿæˆä¸€ä¸ªç‰¹æ®Šçš„å…¥å£æ–‡ä»¶ <code>remoteEntry.js</code>ï¼Œå…¶ä¸»è¦èŒè´£æ˜¯ï¼š
<ul>
<li>åœ¨æµè§ˆå™¨ä¸­æ³¨å†Œä¸€ä¸ªåä¸º <code>remote_app</code> çš„å®¹å™¨å¯¹è±¡ã€‚</li>
<li>å£°æ˜å®¹å™¨ä¸­å¯è¢«è¿œç¨‹è®¿é—®çš„æ¨¡å—æ¸…å•ï¼š
<ul>
<li>ä¾‹å¦‚ <code>'./RemoteTable' -&gt; å¯¹åº”çš„ä¸šåŠ¡ chunk id/æ–‡ä»¶å</code>ã€‚</li>
</ul>
</li>
<li>åˆå§‹åŒ– shared ä½œç”¨åŸŸçš„æä¾›æ–¹/æ¶ˆè´¹æ–¹é€»è¾‘ï¼ˆå¦‚å¦‚ä½•æä¾› <code>react</code>ã€å¦‚ä½•ä» Host å¤ç”¨ <code>react</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 data-id="heading-31">8.3 å®¹å™¨å¯¹è±¡å®ä¾‹ (Window Container Object)</h3>
<ul>
<li>å½“ <code>remoteEntry.js</code> åŠ è½½å®Œæˆåï¼Œä¼šåœ¨å…¨å±€ <code>window</code> ä¸Šæ³¨å†Œå¯¹åº”çš„å®¹å™¨å¯¹è±¡ï¼ˆå¦‚ <code>window.remote_app</code>ï¼‰ã€‚è¯¥å¯¹è±¡ç¬¦åˆæ¨¡å—è”é‚¦åè®®ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š</li>
</ul>
<p>// æµè§ˆå™¨æ§åˆ¶å°æ‰“å° window.remote_app çš„ç¤ºæ„
{
/**</p>
<ul>
<li>get æ–¹æ³•ï¼šç”¨äºå¼‚æ­¥è·å–å®¹å™¨ä¸­æš´éœ²çš„æ¨¡å—å·¥å‚å‡½æ•°</li>
<li>@param {string} module - æ¨¡å—è·¯å¾„ï¼Œå¦‚ "./RemoteTable"</li>
<li>@returns {Promise} è¿”å›ä¸€ä¸ª Promiseï¼Œresolve åå¾—åˆ°æ¨¡å—å·¥å‚
*/
get: async (module) =&gt; {
// å†…éƒ¨é€»è¾‘ï¼šæ ¹æ® moduleMap æŸ¥æ‰¾å¹¶åŠ è½½å¯¹åº”çš„ chunk
// è¿”å›ä¸€ä¸ª factory å‡½æ•°ï¼Œæ‰§è¡Œ factory() å³å¯å¾—åˆ°å¯¼å‡ºçš„ç»„ä»¶
},</li>
</ul>
<p>/**</p>
<ul>
<li>init æ–¹æ³•ï¼šç”¨äºåˆå§‹åŒ–å®¹å™¨ï¼Œå¹¶ä¸å…¶å…±äº«ä½œç”¨åŸŸè¿›è¡Œåå•†</li>
<li>@param {Object} shareScope - å®¿ä¸»åº”ç”¨ä¼ æ¥çš„å…±äº«ä½œç”¨åŸŸå¯¹è±¡
*/
init: (shareScope) =&gt; {
// å†…éƒ¨é€»è¾‘ï¼š
// 1. å°†å½“å‰å®¹å™¨çš„ shared ä¾èµ–ç‰ˆæœ¬ä¿¡æ¯å­˜å…¥ shareScope
// 2. æ ¹æ® singleton ç­‰è§„åˆ™ç¡®å®šä½¿ç”¨æœ¬åœ°ç‰ˆæœ¬è¿˜æ˜¯å®¿ä¸»æä¾›çš„ç‰ˆæœ¬
}
}</li>
</ul>
<h3 data-id="heading-32">8.4 Shared ä¾èµ–å¤„ç†</h3>
<ul>
<li>å¯¹ <code>shared</code> å£°æ˜çš„ä¾èµ–ï¼ˆå¦‚ <code>react</code>ï¼‰ï¼š
<ul>
<li>Remote ä¸ä¼šæŠŠå…¶å®Œæ•´ä»£ç å†æ¬¡æ‰“åŒ…è¿›è‡ªèº«ä¸šåŠ¡ chunk ä¸­ã€‚</li>
<li>è€Œæ˜¯ç”Ÿæˆä¸€äº›â€œå…±äº«åˆå§‹åŒ–â€ä»£ç ï¼Œç”¨æ¥ï¼š
<ul>
<li>åœ¨éœ€è¦æ—¶å‘ shared scope æ³¨å†Œæœ¬åœ°ç‰ˆæœ¬ï¼ˆå½“ Remote é¦–å…ˆè¢«åŠ è½½æ—¶ï¼‰ã€‚</li>
<li>æˆ–è€…ä»å·²æœ‰ shared scope ä¸­è·å–å•ä¾‹ï¼ˆå½“ Host å…ˆäº Remote è¢«åŠ è½½æ—¶ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-33">8.5 äº§ç‰©è¾“å‡º</h3>
<ul>
<li>Remote æ„å»ºäº§ç‰©é€šå¸¸åŒ…æ‹¬ï¼š
<ul>
<li><code>remoteEntry.js</code>ï¼šè¿œç¨‹å®¹å™¨å…¥å£ + æ¨¡å—æ¸…å•ã€‚</li>
<li>è‹¥å¹²ä¸šåŠ¡ chunkï¼šå¦‚ <code>RemoteTable</code> ç»„ä»¶ç›¸å…³ bundleã€‚</li>
<li>æ ·å¼æ–‡ä»¶ï¼šå¦‚ <code>remote.[contenthash].css</code>ï¼ˆå« CSS Modules/Tailwindï¼‰ã€‚</li>
<li>é™æ€èµ„æºï¼šå¸¦ hash çš„å›¾ç‰‡ã€å­—ä½“ç­‰ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-34">8.6 æ‰“åŒ…äº§ç‰©ç¤ºä¾‹ (Artifacts Demo)</h3>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£æ„å»ºç»“æœï¼Œä»¥ä¸‹æ˜¯æ‰§è¡Œ <code>npm run build</code> å <code>dist</code> ç›®å½•ä¸­å…³é”®æ–‡ä»¶çš„ç»“æ„åŠå†…å®¹ç¤ºæ„ï¼š</p>
<h4 data-id="heading-35">8.6.1 ç›®å½•ç»“æ„ç¤ºæ„</h4>
<p>dist/
â”œâ”€â”€ remoteEntry.js          # è¿œç¨‹å…¥å£æ¸…å•ï¼ˆæ ¸å¿ƒå…ƒæ•°æ®ï¼‰
â”œâ”€â”€ src_components_RemoteTable_index_tsx.js # ä¸šåŠ¡ç»„ä»¶ä»£ç å— (Chunk)
â”œâ”€â”€ 789.js                   # å…±äº«ä¾èµ–æˆ–å…¬å…±é€»è¾‘å—
â”œâ”€â”€ remoteTable.css          # ç»„ä»¶æ ·å¼ï¼ˆå« Hash ç±»åï¼‰
â””â”€â”€ index.html               # æœ¬åœ°é¢„è§ˆå…¥å£</p>
<h4 data-id="heading-36">8.6.2 <code>remoteEntry.js</code> å†…å®¹ç‰‡æ®µ (é€»è¾‘ç®€åŒ–)</h4>
<p>è¿™æ˜¯ Host åº”ç”¨é¦–å…ˆåŠ è½½çš„æ–‡ä»¶ï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•æŸ¥æ‰¾æ¨¡å—ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> remote_app;
remote_app = (<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-string">"use strict"</span>;
  <span class="hljs-keyword">var</span> __webpack_modules__ = ({
    <span class="hljs-comment">// åŒ…å«æ¨¡å—å®šä¹‰çš„æ˜ å°„è¡¨</span>
  });
  
  <span class="hljs-comment">// æ ¸å¿ƒï¼šæš´éœ²çš„æ¨¡å—æ˜ å°„</span>
  <span class="hljs-keyword">var</span> moduleMap = {
    <span class="hljs-string">"./RemoteTable"</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">return</span> __webpack_require__.<span class="hljs-title function_">e</span>(<span class="hljs-string">"src_components_RemoteTable_index_tsx"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">__webpack_require__</span>(<span class="hljs-string">"./src/components/RemoteTable/index.tsx"</span>));
    }
  };

  <span class="hljs-comment">// æ ¸å¿ƒï¼šåˆå§‹åŒ–å…±äº«ä½œç”¨åŸŸçš„æ–¹æ³•</span>
  <span class="hljs-keyword">var</span> <span class="hljs-title function_">init</span> = (<span class="hljs-params">shareScope</span>) =&gt; {
    <span class="hljs-comment">// å°† Remote çš„å…±äº«ä¾èµ–ç‰ˆæœ¬ä¸ Host æä¾›çš„ shareScope è¿›è¡Œåå•†</span>
    <span class="hljs-comment">// ä¾‹å¦‚ï¼šæ£€æŸ¥ React ç‰ˆæœ¬ï¼Œå†³å®šä½¿ç”¨æœ¬åœ°çš„è¿˜æ˜¯ Host çš„</span>
  };

  <span class="hljs-comment">// æ ¸å¿ƒï¼šè·å–æ¨¡å—çš„æ–¹æ³•</span>
  <span class="hljs-keyword">var</span> <span class="hljs-title function_">get</span> = (<span class="hljs-params"><span class="hljs-variable language_">module</span></span>) =&gt; {
    <span class="hljs-keyword">return</span> moduleMap[<span class="hljs-variable language_">module</span>]();
  };

  <span class="hljs-keyword">return</span> { get, init };
})();

</code></pre>
<h4 data-id="heading-37">8.6.3 ä¸šåŠ¡ Chunk å†…å®¹ç‰‡æ®µ (<code>src_components_RemoteTable_index_tsx.js</code>)</h4>
<p>åŒ…å«çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ï¼Œå®ƒæ˜¯æŒ‰éœ€åŠ è½½çš„ï¼š
(self["webpackChunkremote_component"] = self["webpackChunkremote_component"] || []).push([["src_components_RemoteTable_index_tsx"], {
"./src/components/RemoteTable/index.tsx": ((__unused_webpack_module, <strong>webpack_exports</strong>, <strong>webpack_require</strong>) =&gt; {
// çœŸæ­£çš„ React ç»„ä»¶ä»£ç 
const RemoteTable = ({ title }) =&gt; {
const styles = <strong>webpack_require</strong>("./src/components/RemoteTable/index.module.less");
return React.createElement("div", { className: styles.container }, title);
};
<strong>webpack_exports</strong>["default"] = RemoteTable;
})
}]);</p>
<hr/>
<h3 data-id="heading-38">8.7 Host ç«¯æ‰“åŒ…æµç¨‹</h3>
<p>ä»¥ <code>apps/admin</code> ä¸ºä¾‹ï¼ŒHost ä¾§æ„å»ºè¿‡ç¨‹åœ¨æ™®é€š Webpack æ„å»ºåŸºç¡€ä¸Šå¢åŠ äº†å¯¹è¿œç¨‹æ¨¡å—çš„å¤„ç†ã€‚</p>
<ol>
<li>
<p><strong>è§£æ <code>remotes</code> é…ç½®</strong></p>
<ul>
<li><code>ModuleFederationPlugin</code> è¯»å– Host çš„ <code>remotes</code> å­—æ®µï¼Œä¾‹å¦‚ï¼š
<ul>
<li><code>remote_app: 'remote_app@https://cdn.xxx.com/remoteEntry.js'</code></li>
</ul>
</li>
<li>åœ¨æ‰“åŒ…äº§ç‰©ä¸­ï¼ŒWebpack runtime ä¼šå†…ç½®ä¸€æ®µé€»è¾‘ï¼Œç”¨äºï¼š
<ul>
<li>åœ¨è¿è¡Œæ—¶æŒ‰éœ€åŠ è½½ <code>https://cdn.xxx.com/remoteEntry.js</code></li>
<li>æŠŠè¿œç¨‹å®¹å™¨å¯¹è±¡æŒ‚è½½åˆ°å†…éƒ¨çš„å®¹å™¨ç®¡ç†ç³»ç»Ÿä¸Šã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†è¿œç¨‹ <code>import</code> è¯­å¥</strong></p>
<ul>
<li>å¯¹ç±»ä¼¼ <code>import('remote_app/RemoteTable')</code> çš„è¯­å¥ï¼ŒWebpack ä¸ä¼šåœ¨æ„å»ºæ—¶å»è§£æå®é™…æ¨¡å—å†…å®¹ï¼Œè€Œæ˜¯ï¼š
<ul>
<li>ç”Ÿæˆä¸€æ®µè°ƒç”¨â€œè”é‚¦è¿è¡Œæ—¶â€çš„ä»£ç ï¼š
<ul>
<li>è¿è¡Œæ—¶æ ¹æ® <code>remote_app</code> å®¹å™¨åä¸ <code>'./RemoteTable'</code> æ¥æŸ¥æ‰¾æ¨¡å—å·¥å‚ã€‚</li>
<li>å¹¶åœ¨éœ€è¦çš„æ—¶å€™è§¦å‘å¯¹ <code>remoteEntry.js</code> å’Œåç»­ chunk çš„ç½‘ç»œè¯·æ±‚ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>ä» Host æ‰“åŒ…ç»“æœæ¥çœ‹ï¼Œè¿™äº›è¿œç¨‹æ¨¡å—ä¸ä¼šå‡ºç°åœ¨æœ¬åœ° bundle ä¸­ï¼Œä»è€Œå‡å° Host çš„ä½“ç§¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>shared ä¾èµ–æ”¶æ•›</strong></p>
<ul>
<li>Host é€šå¸¸æ˜¯ shared ä½œç”¨åŸŸçš„â€œä¼˜å…ˆæä¾›æ–¹â€ï¼š
<ul>
<li>Host çš„ <code>react</code>ã€<code>react-dom</code>ã€<code>mobx</code> ç­‰è¢«æ³¨å†Œåˆ° shared scopeã€‚</li>
<li>Remote åŠ è½½æ—¶ä¼˜å…ˆä½¿ç”¨ Host æä¾›çš„ç‰ˆæœ¬ï¼ˆåœ¨é…ç½® <code>singleton: true</code> æ—¶å°¤ä¸ºé‡è¦ï¼‰ã€‚</li>
</ul>
</li>
<li>Webpack åœ¨ Host ä¾§ä¼šå¯¹è¿™äº›ä¾èµ–è¿›è¡Œä¸€æ¬¡æ­£å¸¸æ‰“åŒ…ï¼ˆå› ä¸º Host éœ€è¦è‡ªå·±ç”¨åˆ°ï¼‰ï¼Œä½†ä¸ä¼šé‡å¤æ‰“å…¥ Remote çš„ bundleã€‚</li>
</ul>
</li>
<li>
<p><strong>Host äº§ç‰©è¾“å‡º</strong></p>
<ul>
<li>ä¸æ™®é€šåº”ç”¨ç±»ä¼¼ï¼š
<ul>
<li>åº”ç”¨ä¸»å…¥å£ bundle / å¼‚æ­¥ chunk</li>
<li>shared ä¾èµ–æ‰“åŒ…ç»“æœ</li>
<li>Webpack runtimeï¼ˆå†…ç½®å¯¹ Module Federation çš„æ‰©å±•ï¼‰</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-39">8.8 å¼€å‘ç¯å¢ƒ vs ç”Ÿäº§ç¯å¢ƒ</h3>
<ol>
<li>
<p><strong>å¼€å‘ç¯å¢ƒ</strong></p>
<ul>
<li>é€šå¸¸é€šè¿‡ <code>webpack-dev-server</code> æˆ–ç±»ä¼¼æœåŠ¡å¯åŠ¨ Host å’Œ Remoteï¼š
<ul>
<li>å¦‚ Host åœ¨ <code>http://localhost:3000</code></li>
<li>Remote åœ¨ <code>http://localhost:3001</code></li>
</ul>
</li>
<li><code>remotes</code> ä¸­é…ç½®ä¸ºæœ¬åœ°åœ°å€ï¼š
<ul>
<li><code>remote_app: 'remote_app@http://localhost:3001/remoteEntry.js'</code></li>
</ul>
</li>
<li>ç‰¹æ€§ï¼š
<ul>
<li>æ”¯æŒ HMR / çƒ­æ›´æ–°ï¼ˆå˜æ›´ Remote ç»„ä»¶åï¼Œåˆ·æ–° Host é¡µé¢å³å¯çœ‹åˆ°æœ€æ–°æ•ˆæœï¼‰ã€‚</li>
<li>æ„å»ºæ¨¡å¼ä¸º <code>development</code>ï¼Œæ— å‹ç¼©ï¼Œä¾¿äºè°ƒè¯•ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿäº§ç¯å¢ƒ</strong></p>
<ul>
<li>Remote äº§ç‰©ï¼ˆå« <code>remoteEntry.js</code> å’Œé™æ€èµ„æºï¼‰é€šå¸¸å‘å¸ƒåˆ° CDNï¼š
<ul>
<li><code>https://cdn.xxx.com/remote/remoteEntry.js</code></li>
</ul>
</li>
<li>Host åœ¨æ„å»ºæ—¶æŠŠ <code>remotes</code> é…ç½®ä¸ºçº¿ä¸Šåœ°å€æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡/è¿è¡Œæ—¶æ³¨å…¥ï¼š
<ul>
<li>ä¿æŒ <code>remoteEntry.js</code> çš„ <strong>è·¯å¾„ç¨³å®š</strong>ï¼ˆæˆ–æœ‰æ˜ç¡®çš„ç‰ˆæœ¬ç­–ç•¥ï¼‰ã€‚</li>
</ul>
</li>
<li>ä½¿ç”¨ <code>contenthash</code> ç­‰é¿å…ç¼“å­˜é—®é¢˜ï¼ŒåŒæ—¶é…åˆï¼š
<ul>
<li>HTTP ç¼“å­˜å¤´ï¼ˆ<code>Cache-Control</code>ï¼‰</li>
<li>é¢„åŠ è½½ç­–ç•¥ï¼ˆ<code>&lt;link rel="preload"&gt;</code> / <code>&lt;link rel="prefetch"&gt;</code>ï¼‰ä¼˜åŒ–è¿œç¨‹ç»„ä»¶åŠ è½½æ€§èƒ½ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-40">8.9 å‘å¸ƒä¸æ›´æ–°ç­–ç•¥</h3>
<ol>
<li>
<p><strong>Remote ç‹¬ç«‹å‘å¸ƒ</strong></p>
<ul>
<li>å½“åªæ›´æ–°è¿œç¨‹ç»„ä»¶æ—¶ï¼š
<ul>
<li>é‡æ–°æ„å»º <code>apps/RemoteComponent</code>ï¼Œç”Ÿæˆæ–°çš„ <code>remoteEntry.js</code> å’Œä¸šåŠ¡ chunkã€‚</li>
<li>å‘å¸ƒåˆ° CDNï¼ˆç‰ˆæœ¬å·/è·¯å¾„éœ€ä¸ Host é…ç½®å…¼å®¹ï¼‰ã€‚</li>
</ul>
</li>
<li>Host æ— éœ€é‡æ–°æ‰“åŒ…ï¼Œåªè¦åœ¨è¿è¡Œæ—¶èƒ½è®¿é—®æœ€æ–°çš„ <code>remoteEntry.js</code> å³å¯ä½¿ç”¨æ–°ç‰ˆæœ¬ç»„ä»¶ã€‚</li>
</ul>
</li>
<li>
<p><strong>å…¼å®¹æ€§ä¸ç‰ˆæœ¬ç®¡ç†</strong></p>
<ul>
<li>ä¿æŒ <code>exposes</code> çš„æ¨¡å—åå’Œå¯¼å‡ºæ¥å£å°½é‡ç¨³å®šï¼š
<ul>
<li>æ–°å¢ç»„ä»¶ï¼šå¯ä»¥æ–°å¢ expose é¡¹ï¼ˆä¾‹å¦‚ <code>./RemoteForm</code>ï¼‰ã€‚</li>
<li>ä¿®æ”¹ç»„ä»¶ï¼šå°½é‡ä¿æŒç°æœ‰ props ç»“æ„å‘åå…¼å®¹ã€‚</li>
</ul>
</li>
<li>shared ä¾èµ–çš„ç‰ˆæœ¬éœ€ä¸¥æ ¼æ§åˆ¶ï¼š
<ul>
<li>Host ä¸ Remote çš„ <code>react</code> / <code>react-dom</code> / <code>mobx</code> ç‰ˆæœ¬å°½é‡ä¸€è‡´ã€‚</li>
<li>å¦‚éœ€å¤§ç‰ˆæœ¬å‡çº§ï¼Œå»ºè®®ï¼š
<ul>
<li>å…ˆåè°ƒ Host å‡çº§ shared ä¾èµ–ã€‚</li>
<li>æˆ–ä½¿ç”¨å¤šå®¹å™¨ã€å¤šç‰ˆæœ¬ <code>remoteEntry</code> çš„æ–¹å¼åšå¹³æ»‘è¿ç§»ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>é€šè¿‡ä¸Šè¿°æµç¨‹ï¼Œæ¨¡å—è”é‚¦åœ¨æ„å»ºé˜¶æ®µå®Œæˆ <strong>å®¹å™¨ç”Ÿæˆã€ä¾èµ–å…±äº«ã€è¿œç¨‹å…¥å£æ³¨å†Œ</strong>ï¼Œåœ¨è¿è¡Œæ—¶å®ç° <strong>æŒ‰éœ€åŠ è½½è¿œç¨‹ç»„ä»¶ + å…±äº«ä¾èµ–å•ä¾‹åŒ–</strong>ï¼Œä»è€Œæ”¯æ’‘æœ¬æ–¹æ¡ˆçš„ã€Œè¿è¡Œæ—¶åŠ è½½ã€ç‹¬ç«‹éƒ¨ç½²ã€ä¾èµ–å…±äº«ã€ç›®æ ‡ã€‚</p>
<hr/>
<h2 data-id="heading-41">9. éš”ç¦»ä¸å®‰å…¨ (Isolation)</h2>
<p>åœ¨å½“å‰æ–¹æ¡ˆä¸­ï¼ŒJS éš”ç¦»ä¸»è¦ä¾èµ– <strong>Webpack æ¨¡å—ç³»ç»Ÿ + Module Federation çš„å®¹å™¨éš”ç¦»</strong>ï¼š</p>
<h3 data-id="heading-42">9.1 JS éš”ç¦»</h3>
<ol>
<li>
<p><strong>æ¨¡å—çº§ä½œç”¨åŸŸéš”ç¦»</strong></p>
<ul>
<li>è¿œç¨‹ç»„ä»¶åœ¨ Remote ç«¯è¢«æ‰“åŒ…ä¸ºæ™®é€š ES æ¨¡å— / Webpack æ¨¡å—ï¼š
<ul>
<li>å˜é‡ã€å‡½æ•°éƒ½å°è£…åœ¨æ¨¡å—ä½œç”¨åŸŸå†…ï¼Œä¸ä¼šæŒ‚è½½åˆ° <code>window</code>ã€‚</li>
<li>Host ç«¯ä»…é€šè¿‡ <code>import('remote_app/RemoteTable')</code> æ‹¿åˆ°æ¨¡å—å¯¼å‡ºï¼ˆReact ç»„ä»¶æœ¬èº«ï¼‰ï¼Œä¸ä¼šç›´æ¥è®¿é—® Remote å†…éƒ¨å®ç°ç»†èŠ‚ã€‚</li>
</ul>
</li>
<li>åªè¦è¿œç¨‹ç»„ä»¶é¿å…ä¸»åŠ¨å†™å…¥ <code>window.xxx</code> ç­‰å…¨å±€å˜é‡ï¼Œå°±ä¸ä¼šæ±¡æŸ“å®¿ä¸»åº”ç”¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®¹å™¨çº§éš”ç¦»ï¼ˆModule Federation Containerï¼‰</strong></p>
<ul>
<li>æ¯ä¸ª Remoteï¼ˆå¦‚ <code>remote_app</code>ï¼‰åœ¨æµè§ˆå™¨ä¸­æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ <strong>å®¹å™¨</strong>ï¼š
<ul>
<li>å®¹å™¨åªæš´éœ²åœ¨ <code>exposes</code> ä¸­å£°æ˜çš„æ¨¡å—ï¼ˆå¦‚ <code>./RemoteTable</code>ï¼‰ã€‚</li>
<li>å…¶ä»–ä¸šåŠ¡ä»£ç ã€å·¥å…·å‡½æ•°ç­‰éƒ½è¢«å°è£…åœ¨ Remote è‡ªèº«çš„ bundle å†…ï¼Œå¯¹ Host ä¸å¯è§ã€‚</li>
</ul>
</li>
<li>Host å’Œ Remote ä¹‹é—´å”¯ä¸€æ‰“é€šçš„æ˜¯ï¼š
<ul>
<li><code>exposes</code> æš´éœ²çš„ç»„ä»¶/æ¨¡å—æ¥å£ã€‚</li>
<li><code>shared</code> ä¸­å£°æ˜çš„å…±äº«ä¾èµ–ï¼ˆå¦‚ <code>react</code>ã€<code>mobx</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>ä¾èµ–å…±äº«ç™½åå•</strong></p>
<ul>
<li>é€šè¿‡ <code>shared</code> æ˜¾å¼å£°æ˜å…±äº«ä¾èµ–ï¼š
<ul>
<li>ä»… <code>react</code>ã€<code>react-dom</code>ã€<code>mobx</code> ç­‰å…¬å…±åº“ä¼šåœ¨ Host/Remote é—´å¤ç”¨ã€‚</li>
<li>ä¸šåŠ¡å±‚çš„å·¥å…·åº“ã€çŠ¶æ€ç­‰ä¸ä¼šè‡ªåŠ¨å…±äº«ï¼Œé¿å…ä¸åŒåº”ç”¨ä¹‹é—´äº§ç”Ÿéšå¼è€¦åˆã€‚</li>
</ul>
</li>
<li>è¿™æ ·æ—¢ä¿è¯äº†å…¬å…±ä¾èµ–å•ä¾‹åŒ–ï¼Œåˆä¿è¯ä¸šåŠ¡ä»£ç è¾¹ç•Œæ¸…æ™°ã€‚</li>
</ul>
</li>
<li>
<p><strong>é€šä¿¡æ–¹å¼çº¦æŸ</strong></p>
<ul>
<li>æ¨èæ‰€æœ‰äº¤äº’é€šè¿‡ï¼š
<ul>
<li>ç»„ä»¶ <code>props</code></li>
<li>ä¸Šå±‚æ³¨å…¥çš„ Context / Mobx store</li>
</ul>
</li>
<li>ä¸å»ºè®®è¿œç¨‹ç»„ä»¶ç›´æ¥è®¿é—®å®¿ä¸»çš„å…¨å±€å˜é‡æˆ–å•ä¾‹å¯¹è±¡ï¼Œä»ç»„ç»‡æ–¹å¼ä¸Šè¿›ä¸€æ­¥ä¿è¯â€œé€»è¾‘éš”ç¦»â€ã€‚</li>
</ul>
</li>
</ol>
<blockquote>
<p>å¦‚éœ€æ›´å¼ºçš„è¿è¡Œæ—¶éš”ç¦»ï¼ˆå¦‚é¿å…ä»»ä½•å…¨å±€æ±¡æŸ“ã€CSS/JS äº’ä¸å¹²æ‰°ï¼‰ï¼Œå¯ä»¥åœ¨æ›´é«˜å±‚ä½¿ç”¨ <code>iframe</code> / Shadow DOM ç­‰æ–¹æ¡ˆï¼Œä½†ä¸åœ¨æœ¬è®¾è®¡çš„åŸºç¡€èŒƒç•´å†…ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-43">9.2 CSS éš”ç¦»</h3>
<p>CSS éš”ç¦»ä¸»è¦é€šè¿‡ <strong>CSS Modules / Tailwind å‰ç¼€</strong> å®ç°ï¼Œç»“åˆæ‰“åŒ…äº§ç‰©çš„æ–‡ä»¶ hashï¼Œé¿å…æ ·å¼å†²çªã€‚</p>
<h4 data-id="heading-44">9.2.1 ä½¿ç”¨ CSS Modulesï¼ˆæ¨èï¼‰</h4>
<ul>
<li>Remote ç«¯ç»„ä»¶æ ·å¼å†™æˆ <code>*.module.css</code> / <code>*.module.less</code> ç­‰ï¼š
<ul>
<li>
<p>Webpack é…ç½® <code>modules</code> åï¼Œä¼šå°†ç±»åç¼–è¯‘ä¸ºå¸¦ hash çš„å”¯ä¸€åå­—ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æºç ï¼š<code>.container { ... }</code></li>
<li>ç¼–è¯‘åï¼š<code>.RemoteTable_container__3kS4a { ... }</code></li>
</ul>
</li>
<li>
<p>ç»„ä»¶å†…éƒ¨ä½¿ç”¨ï¼š
import styles from './index.module.less';</p>
<p>export const RemoteTable = () =&gt; (</p>
  <div class="{styles.container}">...</div>
);
</li>
</ul>
</li>
<li>éš”ç¦»æ•ˆæœï¼š
<ul>
<li>ä¸ä¼šç”Ÿæˆå…¨å±€ <code>.container</code> ä¹‹ç±»çš„ç±»åï¼Œå®¿ä¸»åº”ç”¨çš„ <code>.container</code> ä¸ä¼šä¸ä¹‹å†²çªã€‚</li>
<li>Remote ä¹‹é—´ã€Remote ä¸ Host ä¹‹é—´ï¼Œå³ä½¿ç±»åè¯­ä¹‰ç›¸åŒï¼ˆå¦‚ <code>.button</code>ï¼‰ï¼Œæœ€ç»ˆç¼–è¯‘å‡ºæ¥çš„çœŸå®ç±»åä¹Ÿä¸åŒã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-45">9.2.2 ä½¿ç”¨ Tailwind æ—¶çš„éš”ç¦»</h4>
<p>è‹¥è¿œç¨‹ç»„ä»¶å†…éƒ¨ä½¿ç”¨ Tailwindï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼éš”ç¦»ï¼š</p>
<ol>
<li>
<p><strong>å‰ç¼€ï¼ˆprefixï¼‰</strong></p>
<ul>
<li>åœ¨ Tailwind é…ç½®ä¸­ä¸º Remote å•ç‹¬è®¾ç½®ï¼š
// tailwind.config.js
module.exports = {
prefix: 'rc-',   // è¿œç¨‹ç»„ä»¶ç”¨ rc- å¼€å¤´çš„ç±»å
// ...
};</li>
<li>ç”Ÿæˆçš„ç±»åä¼šå˜æˆï¼š
<ul>
<li><code>rc-flex</code>, <code>rc-m-2</code>, <code>rc-text-sm</code> ...</li>
</ul>
</li>
<li>é¿å…ä¸ Host ä¾§çš„ Tailwind ç±»ï¼ˆæ— å‰ç¼€æˆ–å…¶ä»–å‰ç¼€ï¼‰å‘ç”Ÿå†²çªã€‚</li>
</ul>
</li>
<li>
<p><strong>important / æ³¨å…¥èŒƒå›´æ§åˆ¶</strong></p>
<ul>
<li>å¦‚æœ‰éœ€è¦å¯ä»¥å¼€å¯ï¼š
module.exports = {
important: true,
// ...
};</li>
<li>æˆ–è€…åœ¨æ ·å¼æ³¨å…¥æ—¶é™åˆ¶ä½œç”¨èŒƒå›´ï¼Œç¡®ä¿ Tailwind çš„ <code>preflight</code> / reset ç­‰ä¸ä¼šè¦†ç›–å®¿ä¸»çš„å…¨å±€æ ·å¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ‰“åŒ…è¾¹ç•Œ</strong></p>
<ul>
<li>Remote çš„ Tailwind CSS ä½œä¸ºå…¶è‡ªèº« bundle çš„ä¸€éƒ¨åˆ†è¾“å‡ºï¼š
<ul>
<li>ä»…åœ¨è¿œç¨‹ç»„ä»¶è¢«åŠ è½½æ—¶åŠ¨æ€æ³¨å…¥å¯¹åº”æ ·å¼ã€‚</li>
<li>Host ä¸ä¼šå› ä¸ºè‡ªèº«ä½¿ç”¨ Tailwind å°±è‡ªåŠ¨â€œæ¥ç®¡â€ Remote çš„æ ·å¼ï¼Œåä¹‹äº¦ç„¶ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 data-id="heading-46">9.2.3 é™æ€èµ„æºä¸å‘½åç©ºé—´</h4>
<ul>
<li>é€šè¿‡ Webpack å¯¹ CSS å†…ä½¿ç”¨çš„å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æºè¿›è¡Œ hash å¤„ç†ï¼š
<ul>
<li><code>background: url('./icon.png')</code> â†’ <code>url('.../icon.abc123.png')</code></li>
<li>Host ä¸ Remote çš„èµ„æºè·¯å¾„äº’ä¸å½±å“ï¼Œä¸ä¼šå‡ºç°åŒåæ–‡ä»¶è¢«è¦†ç›–çš„æƒ…å†µã€‚</li>
</ul>
</li>
<li>æ ·å¼æ–‡ä»¶æœ¬èº«ä¹Ÿé€šå¸¸å¸¦æœ‰å†…å®¹ hashï¼š
<ul>
<li><code>remote.[contenthash].css</code>ï¼Œé¿å…ç¼“å­˜æ±¡æŸ“å’Œå†²çªã€‚</li>
</ul>
</li>
</ul>
<hr/>
<p>ç»¼ä¸Šï¼š</p>
<ul>
<li><strong>JS éš”ç¦»</strong>ï¼šä¾æ‰˜ Module Federation çš„å®¹å™¨ + æ¨¡å—ä½œç”¨åŸŸ + æ˜¾å¼ shared é…ç½®ï¼Œå°† Remote çš„ä¸šåŠ¡é€»è¾‘ä¸ Host éš”ç¦»ï¼Œä»…æš´éœ²å¿…è¦ç»„ä»¶æ¥å£ä¸å…¬å…±ä¾èµ–ã€‚</li>
<li><strong>CSS éš”ç¦»</strong>ï¼šé€šè¿‡ CSS Modules / Tailwind å‰ç¼€ä¸ç‹¬ç«‹æ‰“åŒ…ï¼Œä½¿è¿œç¨‹ç»„ä»¶çš„æ ·å¼å±€éƒ¨åŒ–ã€ä¸ä¾µå…¥å®¿ä¸»å…¨å±€æ ·å¼ï¼Œä»è€Œåœ¨è¿è¡Œæ—¶åšåˆ°â€œåŠ è½½å³ç”¨ã€äº’ä¸å¹²æ‰°â€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-47">10. æœ€ä½³å®è·µä¸ä¼˜åŒ– (Best Practices)</h2>
<h3 data-id="heading-48">10.1 å¼‚å¸¸å¤„ç†ä¸é™çº§ (Fallback)</h3>
<p>è¿œç¨‹ç»„ä»¶åŠ è½½å—ç½‘ç»œå½±å“ï¼Œå¿…é¡»æä¾›å¥å£®çš„å¼‚å¸¸å¤„ç†ï¼š</p>
<ol>
<li><strong>åŠ è½½çŠ¶æ€</strong>: ä½¿ç”¨ <code>Suspense</code> æä¾› Loading å ä½ã€‚</li>
<li><strong>å®¹é”™å¤„ç†</strong>: ä½¿ç”¨ <code>ErrorBoundary</code> åŒ…è£¹ç»„ä»¶ï¼Œå½“è¿œç¨‹èµ„æº 404 æˆ–è¿è¡Œæ—¶å´©æºƒæ—¶æ˜¾ç¤ºé™çº§ UIã€‚</li>
<li><strong>ç‰ˆæœ¬é”å®š</strong>: ç”Ÿäº§ç¯å¢ƒå»ºè®®é€šè¿‡ç‰ˆæœ¬å·ç›®å½•å­˜æ”¾ <code>remoteEntry.js</code>ï¼Œé¿å…å‘å¸ƒæ—¶çš„ç¼“å­˜é—ªåŠ¨ã€‚</li>
</ol>
<h3 data-id="heading-49">10.2 æ€§èƒ½ä¼˜åŒ–</h3>
<ol>
<li><strong>é¢„åŠ è½½ (Preload)</strong>: åœ¨ Host ç«¯å…³é”®è·¯å¾„é€šè¿‡ <code>&lt;link rel="preload"&gt;</code> é¢„æ‹‰å– <code>remoteEntry.js</code>ã€‚</li>
<li><strong>å…¬å…±ä¾èµ–å¤–ç½®</strong>: ç¡®ä¿å…±äº«ä¾èµ–çœŸæ­£å‘½ä¸­å•ä¾‹ï¼Œå‡å°‘ç½‘ç»œä¼ è¾“ã€‚</li>
<li><strong>æŒ‰éœ€åŠ è½½</strong>: ç»„ä»¶å†…éƒ¨çš„éæ ¸å¿ƒé€»è¾‘ä½¿ç”¨åŠ¨æ€ <code>import()</code> è¿›ä¸€æ­¥æ‹†åˆ†ã€‚</li>
</ol>
<h3 data-id="heading-50">10.3 è°ƒè¯•æŠ€å·§</h3>
<ul>
<li><strong>ç‰ˆæœ¬å¯¹é½</strong>: ç¡®ä¿ Host å’Œ Remote çš„ <code>shared</code> é…ç½®å®Œå…¨ä¸€è‡´ï¼Œå°¤å…¶æ˜¯ <code>singleton</code> å’Œ <code>eager</code> å±æ€§ã€‚</li>
<li><strong>Source Map</strong>: å¼€å¯ç”Ÿäº§ç¯å¢ƒçš„ source-map å…³è”ï¼Œæ–¹ä¾¿åœ¨ Host ç«¯è°ƒè¯• Remote æºç ã€‚</li>
</ul>
<h2 data-id="heading-51">11. æ½œåœ¨æŒ‘æˆ˜ä¸å±€é™æ€§ (Challenges &amp; Limitations)</h2>
<p>è™½ç„¶åŸºäº Webpack 5 Module Federation çš„æ–¹æ¡ˆåœ¨çµæ´»æ€§å’Œè§£è€¦æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½†åœ¨å®é™…å¤§è§„æ¨¡åº”ç”¨ä¸­ä»éœ€æ³¨æ„ä»¥ä¸‹æ½œåœ¨é—®é¢˜ï¼š</p>
<h3 data-id="heading-52">11.1 è¿è¡Œæ—¶é£é™©</h3>
<ol>
<li><strong>ç½‘ç»œç¨³å®šæ€§ä¾èµ–</strong>: è¿œç¨‹ç»„ä»¶åœ¨è¿è¡Œæ—¶åŠ è½½ï¼Œå¦‚æœ CDN èŠ‚ç‚¹æ•…éšœæˆ–ç”¨æˆ·ç½‘ç»œç¯å¢ƒå·®ï¼Œä¼šå¯¼è‡´ <code>remoteEntry.js</code> åŠ è½½å¤±è´¥ï¼Œç›´æ¥å½±å“é¡µé¢å…³é”®åŠŸèƒ½ã€‚å¿…é¡»å¼ºåˆ¶è¦æ±‚é…å¥— <code>ErrorBoundary</code> å’Œé‡è¯•æœºåˆ¶ã€‚</li>
<li><strong>ç‰ˆæœ¬å†²çªä¸ä¾èµ–åœ°ç‹±</strong>:
<ul>
<li>è™½ç„¶æœ‰ <code>shared</code> æœºåˆ¶ï¼Œä½†å¦‚æœä¸åŒ Remote è¦æ±‚çš„ <code>shared</code> ä¾èµ–ç‰ˆæœ¬è·¨åº¦è¿‡å¤§ï¼ˆä¾‹å¦‚ä¸€ä¸ªè¦ React 16ï¼Œä¸€ä¸ªè¦ React 18ï¼‰ï¼Œå¯èƒ½ä¼šå¯¼è‡´åŠ è½½å¤šä»½ React å®ä¾‹æˆ–ç›´æ¥è¿è¡Œæ—¶æŠ¥é”™ã€‚</li>
<li><code>singleton: true</code> è™½ç„¶èƒ½ä¿è¯å•ä¾‹ï¼Œä½†åœ¨ç‰ˆæœ¬ä¸åŒ¹é…æ—¶å¯èƒ½å¯¼è‡´æŸäº›ç»„ä»¶è¿è¡Œåœ¨ä¸å…¼å®¹çš„åº“ç‰ˆæœ¬ä¸Šï¼Œå¼•å‘éš¾ä»¥è°ƒè¯•çš„ Bugã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-53">11.2 ç±»å‹å®‰å…¨ä¸å¼€å‘ä½“éªŒ</h3>
<ol>
<li><strong>TypeScript ç±»å‹ä¸¢å¤±</strong>: é»˜è®¤æƒ…å†µä¸‹ï¼ŒHost åº”ç”¨æ— æ³•ç›´æ¥è·å– Remote åº”ç”¨å¯¼å‡ºçš„ç»„ä»¶ç±»å‹å®šä¹‰ã€‚é€šå¸¸éœ€è¦é€šè¿‡ <code>@module-federation/typescript</code> æ’ä»¶ã€æ‰‹åŠ¨åŒæ­¥ <code>.d.ts</code> æ–‡ä»¶æˆ–å»ºç«‹ç§æœ‰ NPM ç±»å‹åŒ…æ¥è§£å†³ã€‚</li>
<li><strong>æœ¬åœ°å¼€å‘å¤æ‚åº¦</strong>: è°ƒè¯• Host å¼•ç”¨ Remote çš„é€»è¾‘æ—¶ï¼Œå¾€å¾€éœ€è¦åŒæ—¶å¯åŠ¨ä¸¤ä¸ª Dev Serverã€‚å¦‚æœæ¶‰åŠå¤šä¸ªè¿œç¨‹å®¹å™¨ï¼Œæœ¬åœ°å†…å­˜å ç”¨å’Œé…ç½®ç®¡ç†æˆæœ¬ä¼šä¸Šå‡ã€‚</li>
</ol>
<h3 data-id="heading-54">11.3 æ€§èƒ½æŒ‘æˆ˜</h3>
<ol>
<li><strong>ç€‘å¸ƒå¼åŠ è½½ (Waterfall)</strong>: Host åŠ è½½å®Œåæ‰å»æ‹‰å– <code>remoteEntry.js</code>ï¼Œè§£æå®Œæ¸…å•åå†å»æ‹‰å–ç»„ä»¶ chunkã€‚å¦‚æœä¸åšé¢„åŠ è½½ (Preload)ï¼Œä¼šå¯¼è‡´æ˜æ˜¾çš„é¦–å±ç™½å±æˆ–ç»„ä»¶é—ªçƒã€‚</li>
<li><strong>æ‰“åŒ…ç¢ç‰‡åŒ–</strong>: éšç€ <code>exposes</code> æ¨¡å—å¢å¤šï¼Œä¼šäº§ç”Ÿå¤§é‡å¾®å°çš„ JS æ–‡ä»¶ï¼Œå¢åŠ  HTTP è¯·æ±‚æ•°é‡ã€‚</li>
</ol>
<h3 data-id="heading-55">11.4 ç»´æŠ¤ä¸è§„èŒƒ</h3>
<ol>
<li><strong>è°ƒè¯•å›°éš¾</strong>: å½“çº¿ä¸Šå‡ºç° Bug æ—¶ï¼Œå¾ˆéš¾ä¸€çœ¼åˆ¤æ–­é—®é¢˜å‡ºåœ¨ Host è¿˜æ˜¯æŸä¸ª Remote çš„ç‰¹å®šç‰ˆæœ¬ã€‚éœ€è¦å®Œå–„çš„ Source Map æ˜ å°„å’Œæ—¥å¿—è¿½è¸ªç³»ç»Ÿã€‚</li>
<li><strong>æ ·å¼æ±¡æŸ“é£é™©</strong>: å°½ç®¡æœ‰ CSS Modules å’Œ Tailwind å‰ç¼€ï¼Œä½†å¯¹äºæŸäº›æœªç»è¿‡å¤„ç†çš„ç¬¬ä¸‰æ–¹åº“æ ·å¼ï¼ˆå¦‚å…¨å±€å¼•å…¥çš„ <code>antd.css</code>ï¼‰ï¼Œä»å¯èƒ½å‘ç”Ÿ Host ä¸ Remote ä¹‹é—´çš„æ ·å¼è¦†ç›–é—®é¢˜ã€‚</li>
<li><strong>æ„å»ºå·¥å…·ç»‘å®š</strong>: å¼ºä¾èµ– Webpack 5ã€‚å¦‚æœæœªæ¥é¡¹ç›®æƒ³è¿ç§»åˆ° Vite æˆ–å…¶ä»–æ„å»ºå·¥å…·ï¼Œéœ€è¦å¼•å…¥é¢å¤–çš„é€‚é…å±‚ï¼ˆå¦‚ <code>vite-plugin-federation</code>ï¼‰ï¼Œå¹¶å¤„ç†åº•å±‚è¿è¡Œæ—¶å®ç°çš„ç»†å¾®å·®å¼‚ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 æ•ˆç‡åˆ†æ°´å²­ï¼šä»"ä¼šæé—®"åˆ°"ä¼šå†™æŠ€èƒ½"ï¼ŒRulesã€Skillsã€MCP ä¸‰å‰‘å®¢é‡å¡‘ AI åä½œ]]></title>    <link>https://juejin.cn/post/7601041482892558386</link>    <guid>https://juejin.cn/post/7601041482892558386</guid>    <pubDate>2026-01-31T11:37:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601041482892558386" data-draft-id="7601076976439820328" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 æ•ˆç‡åˆ†æ°´å²­ï¼šä»&quot;ä¼šæé—®&quot;åˆ°&quot;ä¼šå†™æŠ€èƒ½&quot;ï¼ŒRulesã€Skillsã€MCP ä¸‰å‰‘å®¢é‡å¡‘ AI åä½œ"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Agent"/> <meta itemprop="datePublished" content="2026-01-31T11:37:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ—¶å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1197805741808339"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 æ•ˆç‡åˆ†æ°´å²­ï¼šä»"ä¼šæé—®"åˆ°"ä¼šå†™æŠ€èƒ½"ï¼ŒRulesã€Skillsã€MCP ä¸‰å‰‘å®¢é‡å¡‘ AI åä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1197805741808339/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ—¶å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T11:37:09.000Z" title="Sat Jan 31 2026 11:37:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ Agent Skillsï¼Ÿ</h3>
<p>Agent Skills æ˜¯ç”± Anthropic å¼€å‘å¹¶ä½œä¸ºå¼€æ”¾æ ‡å‡†å‘å¸ƒçš„æ™ºèƒ½ä½“èƒ½åŠ›æ‰©å±•å·¥å…·ï¼Œå…¶æœ¬è´¨æ˜¯å°†ä¸“ä¸šçŸ¥è¯†å’Œå·¥ä½œæµå°è£…ä¸ºå¯å¤ç”¨çš„èƒ½åŠ›å•å…ƒã€‚</p>
<p>ä¸ä¼ ç»Ÿæç¤ºè¯å·¥ç¨‹ä¸åŒï¼ŒAgent Skills é‡‡ç”¨"æ–‡ä»¶å¤¹+SKILL.md"çš„ç»“æ„åŒ–è®¾è®¡ï¼Œä½¿æ¨¡å‹èƒ½å¤ŸæŒ‰éœ€åŠ è½½ä¸åŒå±‚çº§çš„æŠ€èƒ½ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-2">Agent Skills çš„ä¸‰å¤§æ ¸å¿ƒä»·å€¼</h3>
<ol>
<li><strong>çŸ¥è¯†å¤–ç½®åŒ–</strong>ï¼šå°†é¢†åŸŸçŸ¥è¯†ä»æ¨¡å‹æƒé‡ä¸­è§£è€¦ï¼Œå˜æˆå¯ç¼–è¾‘ã€å¯ç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶</li>
<li><strong>ä¸Šä¸‹æ–‡é«˜æ•ˆåŒ–</strong>ï¼šé€šè¿‡æ¸è¿›å¼æŠ«éœ²ï¼Œåœ¨æœ‰é™çª—å£ä¸­æœ€å¤§åŒ–æœ‰æ•ˆä¿¡æ¯å¯†åº¦</li>
<li><strong>èƒ½åŠ›ç”Ÿæ€åŒ–</strong>ï¼šé€šè¿‡å¼€æ”¾æ ‡å‡†ï¼Œå®ç°è·¨å¹³å°çš„çŸ¥è¯†å…±äº«ä¸å¤ç”¨</li>
</ol>
<h3 data-id="heading-3">æ¸è¿›å¼æŠ«éœ²æœºåˆ¶</h3>
<p>Agent Skills æœ€æ ¸å¿ƒçš„åˆ›æ–°æ˜¯**æ¸è¿›å¼æŠ«éœ²ï¼ˆProgressive Disclosureï¼‰**æœºåˆ¶ã€‚è¯¥æœºåˆ¶å°†æŠ€èƒ½ä¿¡æ¯åˆ†ä¸ºä¸‰ä¸ªå±‚æ¬¡ï¼Œæ™ºèƒ½ä½“æŒ‰éœ€é€æ­¥åŠ è½½ï¼š</p>
<h4 data-id="heading-4">ï¼ˆ1ï¼‰å…ƒæ•°æ®å±‚ï¼ˆMetadataï¼‰</h4>
<p>åœ¨ Skills çš„è®¾è®¡ä¸­ï¼Œæ¯ä¸ªæŠ€èƒ½éƒ½å­˜æ”¾åœ¨ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶å¤¹ä¸­ï¼Œæ ¸å¿ƒæ˜¯ä¸€ä¸ªåä¸º <code>SKILL.md</code> çš„ Markdown æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å¿…é¡»ä»¥ YAML æ ¼å¼çš„ Frontmatter å¼€å¤´ï¼Œå®šä¹‰æŠ€èƒ½çš„åŸºæœ¬ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">pdf-processing</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">Extract</span> <span class="hljs-string">text</span> <span class="hljs-string">and</span> <span class="hljs-string">tables</span> <span class="hljs-string">from</span> <span class="hljs-string">PDF</span> <span class="hljs-string">files...</span> <span class="hljs-string">Use</span> <span class="hljs-string">when</span> <span class="hljs-string">working</span> <span class="hljs-string">with</span> <span class="hljs-string">PDF</span> <span class="hljs-string">files...</span>
<span class="hljs-meta">---
</span></code></pre>
<p>å½“æ™ºèƒ½ä½“å¯åŠ¨æ—¶ï¼Œå®ƒä¼šæ‰«ææ‰€æœ‰å·²å®‰è£…çš„æŠ€èƒ½æ–‡ä»¶å¤¹ï¼Œä»…è¯»å–æ¯ä¸ª <code>SKILL.md</code> çš„ Frontmatter éƒ¨åˆ†ï¼Œå°†è¿™äº›å…ƒæ•°æ®åŠ è½½åˆ°ç³»ç»Ÿæç¤ºè¯ä¸­ã€‚æ ¹æ®å®æµ‹æ•°æ®ï¼Œæ¯ä¸ªæŠ€èƒ½çš„å…ƒæ•°æ®ä»…æ¶ˆè€—çº¦ <strong>100 ä¸ª token</strong>ã€‚</p>
<h4 data-id="heading-5">ï¼ˆ2ï¼‰æŒ‡ä»¤å±‚ï¼ˆInstructionsï¼‰</h4>
<p>å½“æ™ºèƒ½ä½“é€šè¿‡åˆ†æç”¨æˆ·è¯·æ±‚ï¼Œåˆ¤æ–­æŸä¸ªæŠ€èƒ½ä¸å½“å‰ä»»åŠ¡é«˜åº¦ç›¸å…³æ—¶ï¼Œå®ƒä¼šè¿›å…¥ç¬¬äºŒå±‚åŠ è½½ã€‚æ­¤æ—¶ï¼Œæ™ºèƒ½ä½“ä¼šè¯»å–è¯¥æŠ€èƒ½çš„å®Œæ•´ <code>SKILL.md</code> æ–‡ä»¶å†…å®¹ï¼Œå°†è¯¦ç»†çš„æŒ‡ä»¤ã€æ³¨æ„äº‹é¡¹ã€ç¤ºä¾‹ç­‰åŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­ã€‚è¿™éƒ¨åˆ†å†…å®¹çš„ token æ¶ˆè€—å–å†³äºæŒ‡ä»¤çš„å¤æ‚åº¦ï¼Œé€šå¸¸åœ¨ <strong>1,000 åˆ° 5,000 ä¸ª token</strong> ä¹‹é—´ã€‚</p>
<h4 data-id="heading-6">ï¼ˆ3ï¼‰èµ„æºå±‚ï¼ˆScripts &amp; Referencesï¼‰</h4>
<p>å¯¹äºæ›´å¤æ‚çš„æŠ€èƒ½ï¼Œ<code>SKILL.md</code> å¯ä»¥å¼•ç”¨åŒä¸€æ–‡ä»¶å¤¹ä¸‹çš„å…¶ä»–æ–‡ä»¶ï¼šè„šæœ¬ã€é…ç½®æ–‡ä»¶ã€å‚è€ƒæ–‡æ¡£ç­‰ã€‚æ™ºèƒ½ä½“ä»…åœ¨éœ€è¦æ—¶æ‰åŠ è½½è¿™äº›èµ„æºã€‚</p>

































<table><thead><tr><th align="left">å±‚çº§</th><th align="left">å†…å®¹</th><th align="left">åŠ è½½ç­–ç•¥</th><th align="left">Tokenæ¶ˆè€—</th><th align="left">æŠ€æœ¯ä»·å€¼</th></tr></thead><tbody><tr><td align="left">å…ƒæ•°æ®å±‚</td><td align="left">YAML Frontmatterçš„nameå’Œdescriptionå­—æ®µ</td><td align="left">Always-Onå¸¸é©»åŠ è½½</td><td align="left">æä½(&lt;1%)</td><td align="left">æ¨¡å‹è·¯ç”±å†³ç­–ä¸æ„å›¾è¯†åˆ«</td></tr><tr><td align="left">æŒ‡ä»¤å±‚</td><td align="left">SKILL.mdæ­£æ–‡çš„è§„åˆ™å’Œæ­¥éª¤</td><td align="left">On-DemandæŒ‰éœ€åŠ è½½</td><td align="left">ä¸­ç­‰(5-10%)</td><td align="left">å®šä¹‰ä¸šåŠ¡å¤„ç†é€»è¾‘ä¸SOP</td></tr><tr><td align="left">èµ„æºå±‚</td><td align="left">å¤–éƒ¨æ–‡æ¡£ã€æ‰‹å†Œã€è„šæœ¬ç­‰</td><td align="left">Context-Triggeredæ¡ä»¶è§¦å‘</td><td align="left">é«˜ä½†å¯å˜</td><td align="left">æŒ‰éœ€åŠ è½½ä¸“ä¸šçŸ¥è¯†ï¼Œç”¨å®Œå³å¼ƒ</td></tr></tbody></table>
<h2 data-id="heading-7">Rulesã€Skillsã€MCP ä¸‰è€…çš„å…³ç³»</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/465560545c3c45c994f5a6def3b226ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5pe25YmN56uv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770464229&amp;x-signature=gMFs9yBh9R09J0IYA8K2RRAn498%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">1. Rulesï¼ˆè§„åˆ™ï¼‰çš„å®šä½</h3>
<p><strong>Rules</strong> æ˜¯é¡¹ç›®çº§åˆ«çš„<strong>é™æ€è§„èŒƒ</strong>ï¼Œå®šä¹‰äº†ä»£ç é£æ ¼ã€æ¶æ„æ¨¡å¼ã€å¼€å‘æµç¨‹ç­‰é€šç”¨è§„åˆ™ã€‚</p>
<h4 data-id="heading-9">ç‰¹ç‚¹ï¼š</h4>
<ul>
<li><strong>Always-Onï¼ˆå¸¸é©»ï¼‰</strong>ï¼šå§‹ç»ˆåŠ è½½åœ¨ç³»ç»Ÿæç¤ºè¯ä¸­</li>
<li><strong>é¡¹ç›®ç‰¹å®š</strong>ï¼šé’ˆå¯¹ç‰¹å®šé¡¹ç›®çš„ç¼–ç è§„èŒƒå’Œæœ€ä½³å®è·µ</li>
<li><strong>é™æ€çŸ¥è¯†</strong>ï¼šä¸éšä»»åŠ¡å˜åŒ–ï¼Œæ˜¯é¡¹ç›®çš„åŸºç¡€çº¦æŸ</li>
</ul>
<h4 data-id="heading-10">å…¸å‹ç”¨é€”ï¼š</h4>
<ul>
<li>ä»£ç é£æ ¼è§„èŒƒï¼ˆESLintã€TypeScript è§„èŒƒï¼‰</li>
<li>é¡¹ç›®æ¶æ„æ¨¡å¼ï¼ˆç»„ä»¶ç»“æ„ã€æ–‡ä»¶ç»„ç»‡ï¼‰</li>
<li>æŠ€æœ¯æ ˆä½¿ç”¨è§„èŒƒï¼ˆUnoCSS ä¼˜å…ˆã€ç»„ä»¶åº“ä½¿ç”¨ï¼‰</li>
<li>å‘½åè§„èŒƒå’Œæ³¨é‡Šè§„èŒƒ</li>
</ul>
<h4 data-id="heading-11">ç¤ºä¾‹ï¼ˆCursor Rulesï¼‰ï¼š</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®å¼€å‘è§„èŒƒ</span>

<span class="hljs-section">## ç¼–ç è§„èŒƒ</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨ TypeScriptï¼Œä¸¥æ ¼ç±»å‹æ£€æŸ¥
<span class="hljs-bullet">-</span> ä¼˜å…ˆä½¿ç”¨ UnoCSS åŸå­ç±»
<span class="hljs-bullet">-</span> ç»„ä»¶é€»è¾‘æŠ½ç¦»åˆ° useXxx.ts hooks æ–‡ä»¶
</code></pre>
<h3 data-id="heading-12">2. Skillsï¼ˆæŠ€èƒ½ï¼‰çš„å®šä½</h3>
<p><strong>Skills</strong> æ˜¯ä»»åŠ¡çº§åˆ«çš„<strong>åŠ¨æ€èƒ½åŠ›</strong>ï¼Œæä¾›ç‰¹å®šé¢†åŸŸçš„ä¸“ä¸šçŸ¥è¯†å’Œå·¥ä½œæµç¨‹ã€‚</p>
<h4 data-id="heading-13">ç‰¹ç‚¹ï¼š</h4>
<ul>
<li><strong>On-Demandï¼ˆæŒ‰éœ€ï¼‰</strong>ï¼šä»…åœ¨ç›¸å…³ä»»åŠ¡æ—¶åŠ è½½</li>
<li><strong>é¢†åŸŸç‰¹å®š</strong>ï¼šé’ˆå¯¹ç‰¹å®šä»»åŠ¡æˆ–é¢†åŸŸçš„ä¸“ä¸šçŸ¥è¯†</li>
<li><strong>å¯å¤ç”¨</strong>ï¼šè·¨é¡¹ç›®ã€è·¨å¹³å°å¤ç”¨</li>
</ul>
<h4 data-id="heading-14">å…¸å‹ç”¨é€”ï¼š</h4>
<ul>
<li>è®¾è®¡ç¨¿è½¬ä»£ç ï¼ˆFigma â†’ uni-appï¼‰</li>
<li>API é›†æˆæŒ‡å—</li>
<li>æ•°æ®åˆ†æå·¥ä½œæµ</li>
<li>æ–‡æ¡£å¤„ç†æµç¨‹</li>
</ul>
<h4 data-id="heading-15">ç¤ºä¾‹ï¼ˆDesign Conversion Skillï¼‰ï¼š</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">design-conversion</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">Figma</span> <span class="hljs-string">è®¾è®¡ç¨¿è½¬æ¢ä¸º</span> <span class="hljs-string">uni-app</span> <span class="hljs-string">ä»£ç çš„æŠ€èƒ½ï¼ŒåŒ…å«å›¾ç‰‡èµ„æºä¸‹è½½ã€UnoCSS</span> <span class="hljs-string">åŸå­ç±»ä½¿ç”¨ã€rpx</span> <span class="hljs-string">å•ä½è½¬æ¢ç­‰å®Œæ•´è§„èŒƒ</span>
<span class="hljs-meta">---
</span></code></pre>
<h3 data-id="heading-16">3. MCPï¼ˆModel Context Protocolï¼‰çš„å®šä½</h3>
<p><strong>MCP</strong> æ˜¯å·¥å…·çº§åˆ«çš„<strong>è¿æ¥åè®®</strong>ï¼Œæä¾›æ ‡å‡†åŒ–çš„å¤–éƒ¨å·¥å…·å’Œæ•°æ®è®¿é—®æ¥å£ã€‚</p>
<h4 data-id="heading-17">ç‰¹ç‚¹ï¼š</h4>
<ul>
<li><strong>å·¥å…·æ¥å£</strong>ï¼šå®šä¹‰å¦‚ä½•è®¿é—®å¤–éƒ¨å·¥å…·å’Œæ•°æ®</li>
<li><strong>æ ‡å‡†åŒ–</strong>ï¼šç»Ÿä¸€çš„åè®®è§„èŒƒ</li>
<li><strong>è¿è¡Œæ—¶</strong>ï¼šåŠ¨æ€è°ƒç”¨å¤–éƒ¨æœåŠ¡</li>
</ul>
<h4 data-id="heading-18">å…¸å‹ç”¨é€”ï¼š</h4>
<ul>
<li>æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</li>
<li>æ•°æ®åº“æŸ¥è¯¢</li>
<li>API è°ƒç”¨</li>
<li>å¤–éƒ¨æœåŠ¡é›†æˆï¼ˆFigmaã€GitHub ç­‰ï¼‰</li>
</ul>
<h3 data-id="heading-19">ä¸‰è€…å…³ç³»è¯¦è§£</h3>
<h4 data-id="heading-20">å…³ç³»ç±»æ¯”</h4>
<p>ç”¨ä¸€ä¸ªå®Œæ•´çš„è½¯ä»¶å¼€å‘æµç¨‹æ¥ç†è§£ï¼š</p>
<ol>
<li>
<p><strong>Rules = å…¬å¸ç¼–ç è§„èŒƒæ‰‹å†Œ</strong></p>
<ul>
<li>å®šä¹‰"æ€ä¹ˆå†™ä»£ç "çš„é€šç”¨è§„åˆ™</li>
<li>æ‰€æœ‰é¡¹ç›®éƒ½è¦éµå¾ª</li>
<li>ä¾‹å¦‚ï¼šä½¿ç”¨ TypeScriptã€ä¼˜å…ˆä½¿ç”¨ UnoCSS</li>
</ul>
</li>
<li>
<p><strong>Skills = ç‰¹å®šä»»åŠ¡çš„æ“ä½œæ‰‹å†Œ</strong></p>
<ul>
<li>å®šä¹‰"å¦‚ä½•å®Œæˆç‰¹å®šä»»åŠ¡"çš„ä¸“ä¸šçŸ¥è¯†</li>
<li>æŒ‰éœ€åŠ è½½ï¼Œé’ˆå¯¹ç‰¹å®šåœºæ™¯</li>
<li>ä¾‹å¦‚ï¼šå¦‚ä½•å°† Figma è®¾è®¡ç¨¿è½¬æ¢ä¸ºä»£ç </li>
</ul>
</li>
<li>
<p><strong>MCP = å·¥å…·å’ŒæœåŠ¡çš„é©±åŠ¨ç¨‹åº</strong></p>
<ul>
<li>å®šä¹‰"å¦‚ä½•è¿æ¥å’Œä½¿ç”¨å·¥å…·"</li>
<li>æä¾›æ ‡å‡†åŒ–çš„æ¥å£</li>
<li>ä¾‹å¦‚ï¼šå¦‚ä½•è®¿é—® Figma APIã€å¦‚ä½•æ“ä½œæ–‡ä»¶ç³»ç»Ÿ</li>
</ul>
</li>
</ol>
<h4 data-id="heading-21">åä½œæµç¨‹ç¤ºä¾‹</h4>
<p>å‡è®¾ç”¨æˆ·è¯·æ±‚ï¼š"å¸®æˆ‘æŠŠè¿™ä¸ª Figma è®¾è®¡ç¨¿è½¬æ¢æˆä»£ç "</p>
<pre><code class="hljs language-md" lang="md"><span class="hljs-bullet">1.</span> Rules æä¾›åŸºç¡€çº¦æŸ
   â””â”€&gt; "ä½¿ç”¨ UnoCSS åŸå­ç±»ï¼Œä¸è¦è‡ªå®šä¹‰ CSS"
   â””â”€&gt; "ä½¿ç”¨ TypeScriptï¼Œä¸¥æ ¼ç±»å‹æ£€æŸ¥"
   â””â”€&gt; "ç»„ä»¶é€»è¾‘æŠ½ç¦»åˆ° hooks æ–‡ä»¶"

<span class="hljs-bullet">2.</span> Skills æä¾›ä¸“ä¸šçŸ¥è¯†
   â””â”€&gt; è§¦å‘ design-conversion skill
   â””â”€&gt; åŠ è½½ "å¦‚ä½•ä» Figma ä¸‹è½½å›¾ç‰‡"
   â””â”€&gt; åŠ è½½ "rpx å•ä½è½¬æ¢è§„åˆ™"
   â””â”€&gt; åŠ è½½ "UnoCSS ä½¿ç”¨è§„èŒƒ"

<span class="hljs-bullet">3.</span> MCP æä¾›å·¥å…·æ¥å£
   â””â”€&gt; ä½¿ç”¨ Figma MCP ä¸‹è½½å›¾ç‰‡èµ„æº
   â””â”€&gt; ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿ MCP ä¿å­˜æ–‡ä»¶
   â””â”€&gt; ä½¿ç”¨ä»£ç ç¼–è¾‘å™¨ MCP åˆ›å»ºæ–‡ä»¶
</code></pre>
<h4 data-id="heading-22">èŒè´£åˆ†ç¦»åŸåˆ™</h4>
<p><strong>è®¾è®¡ç†å¿µï¼šè¿æ¥æ€§ï¼ˆConnectivityï¼‰ä¸èƒ½åŠ›ï¼ˆCapabilityï¼‰åº”è¯¥åˆ†ç¦»ã€‚</strong></p>
<ul>
<li><strong>MCP ä¸“æ³¨äºè¿æ¥æ€§</strong>ï¼šæä¾›æ ‡å‡†åŒ–çš„è®¿é—®æ¥å£ï¼Œè®©æ™ºèƒ½ä½“èƒ½å¤Ÿ"å¤Ÿå¾—ç€"å¤–éƒ¨ä¸–ç•Œçš„æ•°æ®å’Œå·¥å…·</li>
<li><strong>Skills ä¸“æ³¨äºèƒ½åŠ›</strong>ï¼šæä¾›é¢†åŸŸä¸“ä¸šçŸ¥è¯†ï¼Œå‘Šè¯‰æ™ºèƒ½ä½“åœ¨ç‰¹å®šåœºæ™¯ä¸‹"å¦‚ä½•ç»„åˆä½¿ç”¨è¿™äº›å·¥å…·"</li>
<li><strong>Rules ä¸“æ³¨äºçº¦æŸ</strong>ï¼šæä¾›é¡¹ç›®çº§åˆ«çš„è§„èŒƒå’Œæœ€ä½³å®è·µï¼Œç¡®ä¿è¾“å‡ºç¬¦åˆé¡¹ç›®æ ‡å‡†</li>
</ul>
<p><strong>å¦‚æœè¯´ MCP ä¸ºæ™ºèƒ½ä½“æä¾›äº†"æ‰‹"æ¥æ“ä½œå·¥å…·ï¼Œé‚£ä¹ˆ Skills å°±æä¾›äº†"æ“ä½œæ‰‹å†Œ"æˆ–"SOPï¼ˆæ ‡å‡†ä½œä¸šç¨‹åºï¼‰"ï¼ŒRules åˆ™æä¾›äº†"å…¬å¸è§„èŒƒæ‰‹å†Œ"ã€‚</strong></p>
<h3 data-id="heading-23">å¯¹æ¯”æ€»ç»“</h3>





















































<table><thead><tr><th align="left">ç»´åº¦</th><th align="left">Rules</th><th align="left">Skills</th><th align="left">MCP</th></tr></thead><tbody><tr><td align="left"><strong>å®šä½</strong></td><td align="left">é¡¹ç›®è§„èŒƒ</td><td align="left">é¢†åŸŸçŸ¥è¯†</td><td align="left">å·¥å…·æ¥å£</td></tr><tr><td align="left"><strong>åŠ è½½æ—¶æœº</strong></td><td align="left">Always-On</td><td align="left">On-Demand</td><td align="left">Runtime</td></tr><tr><td align="left"><strong>ä½œç”¨èŒƒå›´</strong></td><td align="left">é¡¹ç›®çº§åˆ«</td><td align="left">ä»»åŠ¡çº§åˆ«</td><td align="left">å·¥å…·çº§åˆ«</td></tr><tr><td align="left"><strong>å†…å®¹æ€§è´¨</strong></td><td align="left">é™æ€è§„èŒƒ</td><td align="left">åŠ¨æ€èƒ½åŠ›</td><td align="left">è¿æ¥åè®®</td></tr><tr><td align="left"><strong>Tokenæ¶ˆè€—</strong></td><td align="left">ä¸­ç­‰ï¼ˆå¸¸é©»ï¼‰</td><td align="left">å¯å˜ï¼ˆæŒ‰éœ€ï¼‰</td><td align="left">ä½ï¼ˆæ¥å£å®šä¹‰ï¼‰</td></tr><tr><td align="left"><strong>å¤ç”¨æ€§</strong></td><td align="left">é¡¹ç›®å†…</td><td align="left">è·¨é¡¹ç›®</td><td align="left">è·¨å¹³å°</td></tr><tr><td align="left"><strong>æ›´æ–°é¢‘ç‡</strong></td><td align="left">ä½</td><td align="left">ä¸­</td><td align="left">ä¸­</td></tr></tbody></table>
<h2 data-id="heading-24">å¦‚ä½•å†™å¥½ä¸€ä¸ª Skill</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/656ee6edb52f4ce995f4800c3c653bb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5pe25YmN56uv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770464229&amp;x-signature=9vnnWqNq8oaNwS7gx%2FtcYilbFMk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-25">æ ¸å¿ƒåŸåˆ™</h3>
<h4 data-id="heading-26">1. ç®€æ´æ˜¯å…³é”®</h4>
<p><strong>ä¸Šä¸‹æ–‡çª—å£æ˜¯å…¬å…±èµ„æºã€‚</strong> æŠ€èƒ½ä¸ Claude éœ€è¦çš„æ‰€æœ‰å…¶ä»–å†…å®¹å…±äº«ä¸Šä¸‹æ–‡çª—å£ï¼šç³»ç»Ÿæç¤ºã€å¯¹è¯å†å²ã€å…¶ä»–æŠ€èƒ½çš„å…ƒæ•°æ®ä»¥åŠå®é™…çš„ç”¨æˆ·è¯·æ±‚ã€‚</p>
<p><strong>é»˜è®¤å‡è®¾ï¼šClaude å·²ç»éå¸¸æ™ºèƒ½ã€‚</strong> åªæ·»åŠ  Claude å°šæœªå…·å¤‡çš„ä¸Šä¸‹æ–‡ã€‚è´¨ç–‘æ¯æ¡ä¿¡æ¯ï¼š</p>
<ul>
<li>"Claude çœŸçš„éœ€è¦è¿™ä¸ªè§£é‡Šå—ï¼Ÿ"</li>
<li>"è¿™æ®µæ–‡å­—å€¼å¾—å®ƒçš„ token æˆæœ¬å—ï¼Ÿ"</li>
</ul>
<p><strong>ä¼˜å…ˆä½¿ç”¨ç®€æ´çš„ç¤ºä¾‹è€Œä¸æ˜¯å†—é•¿çš„è§£é‡Šã€‚</strong></p>
<h4 data-id="heading-27">2. è®¾ç½®é€‚å½“çš„è‡ªç”±åº¦</h4>
<p>æ ¹æ®ä»»åŠ¡çš„è„†å¼±æ€§å’Œå¯å˜æ€§åŒ¹é…å…·ä½“ç¨‹åº¦ï¼š</p>
<ul>
<li><strong>é«˜è‡ªç”±åº¦ï¼ˆåŸºäºæ–‡æœ¬çš„æŒ‡ä»¤ï¼‰</strong>ï¼šå½“å¤šç§æ–¹æ³•éƒ½æœ‰æ•ˆã€å†³ç­–å–å†³äºä¸Šä¸‹æ–‡æˆ–å¯å‘å¼æ–¹æ³•æŒ‡å¯¼æ–¹æ³•æ—¶ä½¿ç”¨</li>
<li><strong>ä¸­ç­‰è‡ªç”±åº¦ï¼ˆä¼ªä»£ç æˆ–å¸¦å‚æ•°çš„è„šæœ¬ï¼‰</strong>ï¼šå½“å­˜åœ¨é¦–é€‰æ¨¡å¼ã€å¯æ¥å—ä¸€äº›å˜åŒ–æˆ–é…ç½®å½±å“è¡Œä¸ºæ—¶ä½¿ç”¨</li>
<li><strong>ä½è‡ªç”±åº¦ï¼ˆç‰¹å®šè„šæœ¬ï¼Œå°‘é‡å‚æ•°ï¼‰</strong>ï¼šå½“æ“ä½œè„†å¼±ä¸”å®¹æ˜“å‡ºé”™ã€ä¸€è‡´æ€§è‡³å…³é‡è¦æˆ–å¿…é¡»éµå¾ªç‰¹å®šé¡ºåºæ—¶ä½¿ç”¨</li>
</ul>
<p>å°† Claude æƒ³è±¡æˆåœ¨æ¢ç´¢ä¸€æ¡è·¯å¾„ï¼šæœ‰æ‚¬å´–çš„ç‹­çª„æ¡¥æ¢éœ€è¦ç‰¹å®šçš„æŠ¤æ ï¼ˆä½è‡ªç”±åº¦ï¼‰ï¼Œè€Œå¼€é˜”çš„ç”°é‡å…è®¸å¤šæ¡è·¯çº¿ï¼ˆé«˜è‡ªç”±åº¦ï¼‰ã€‚</p>
<h4 data-id="heading-28">3. æ¸è¿›å¼æŠ«éœ²è®¾è®¡</h4>
<p>ä¿æŒ <code>SKILL.md</code> æ­£æ–‡ç²¾ç®€ï¼Œä¸è¶…è¿‡ 500 è¡Œï¼Œä»¥æœ€å°åŒ–ä¸Šä¸‹æ–‡è†¨èƒ€ã€‚å½“æ¥è¿‘æ­¤é™åˆ¶æ—¶ï¼Œå°†å†…å®¹æ‹†åˆ†åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚</p>
<p><strong>å…³é”®åŸåˆ™ï¼š</strong> å½“æŠ€èƒ½æ”¯æŒå¤šç§å˜ä½“ã€æ¡†æ¶æˆ–é€‰é¡¹æ—¶ï¼Œä»…åœ¨ <code>SKILL.md</code> ä¸­ä¿ç•™æ ¸å¿ƒå·¥ä½œæµç¨‹å’Œé€‰æ‹©æŒ‡å¯¼ã€‚å°†ç‰¹å®šäºå˜ä½“çš„è¯¦ç»†ä¿¡æ¯ï¼ˆæ¨¡å¼ã€ç¤ºä¾‹ã€é…ç½®ï¼‰ç§»è‡³å•ç‹¬çš„å‚è€ƒæ–‡ä»¶ã€‚</p>
<h3 data-id="heading-29">Skill åˆ›å»ºæµç¨‹</h3>
<h4 data-id="heading-30">æ­¥éª¤ 1ï¼šé€šè¿‡å…·ä½“ç¤ºä¾‹ç†è§£æŠ€èƒ½</h4>
<p>è¦åˆ›å»ºæœ‰æ•ˆçš„æŠ€èƒ½ï¼Œéœ€è¦æ¸…æ¥šç†è§£æŠ€èƒ½å°†å¦‚ä½•ä½¿ç”¨çš„å…·ä½“ç¤ºä¾‹ã€‚è¿™ç§ç†è§£å¯ä»¥æ¥è‡ªç›´æ¥çš„ç”¨æˆ·ç¤ºä¾‹æˆ–ç»è¿‡ç”¨æˆ·åé¦ˆéªŒè¯çš„ç”Ÿæˆç¤ºä¾‹ã€‚</p>
<p><strong>å…³é”®é—®é¢˜ï¼š</strong></p>
<ul>
<li>"æ­¤æŠ€èƒ½åº”è¯¥æ”¯æŒå“ªäº›åŠŸèƒ½ï¼Ÿ"</li>
<li>"æ‚¨èƒ½ç»™ä¸€äº›å¦‚ä½•ä½¿ç”¨æ­¤æŠ€èƒ½çš„ç¤ºä¾‹å—ï¼Ÿ"</li>
<li>"ç”¨æˆ·è¯´ä»€ä¹ˆåº”è¯¥è§¦å‘æ­¤æŠ€èƒ½ï¼Ÿ"</li>
</ul>
<h4 data-id="heading-31">æ­¥éª¤ 2ï¼šè§„åˆ’å¯é‡ç”¨çš„æŠ€èƒ½å†…å®¹</h4>
<p>è¦å°†å…·ä½“ç¤ºä¾‹è½¬åŒ–ä¸ºæœ‰æ•ˆçš„æŠ€èƒ½ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ†ææ¯ä¸ªç¤ºä¾‹ï¼š</p>
<ol>
<li>è€ƒè™‘å¦‚ä½•ä»å¤´å¼€å§‹æ‰§è¡Œç¤ºä¾‹</li>
<li>ç¡®å®šåœ¨é‡å¤æ‰§è¡Œè¿™äº›å·¥ä½œæµç¨‹æ—¶å“ªäº›è„šæœ¬ã€å‚è€ƒèµ„æ–™å’Œèµ„äº§ä¼šæœ‰å¸®åŠ©</li>
</ol>
<p><strong>åˆ†æç»´åº¦ï¼š</strong></p>
<ul>
<li><strong>è„šæœ¬ï¼ˆscripts/ï¼‰</strong>ï¼šéœ€è¦ç¡®å®šæ€§å¯é æ€§æˆ–é‡å¤ç¼–å†™çš„ä»£ç </li>
<li><strong>å‚è€ƒèµ„æ–™ï¼ˆreferences/ï¼‰</strong>ï¼šéœ€è¦å‚è€ƒçš„æ–‡æ¡£ã€API è§„èŒƒã€æ•°æ®åº“æ¨¡å¼ç­‰</li>
<li><strong>èµ„äº§ï¼ˆassets/ï¼‰</strong>ï¼šæ¨¡æ¿ã€å›¾æ ‡ã€å­—ä½“ç­‰è¾“å‡ºèµ„æº</li>
</ul>
<h4 data-id="heading-32">æ­¥éª¤ 3ï¼šç¼–å†™ YAML å‰ç½®å…ƒæ•°æ®</h4>
<p><strong>è¿™æ˜¯æŠ€èƒ½æœ€é‡è¦çš„éƒ¨åˆ†</strong>ï¼Œå› ä¸ºè¿™æ˜¯ Claude ç”¨æ¥ç¡®å®šä½•æ—¶ä½¿ç”¨è¯¥æŠ€èƒ½çš„å”¯ä¸€å­—æ®µã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">skill-name</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">æ¸…æ™°å…¨é¢åœ°æè¿°æŠ€èƒ½æ˜¯ä»€ä¹ˆä»¥åŠä½•æ—¶åº”è¯¥ä½¿ç”¨å®ƒã€‚åŒ…æ‹¬æŠ€èƒ½åšä»€ä¹ˆä»¥åŠä½¿ç”¨å®ƒçš„ç‰¹å®šè§¦å‘å™¨/ä¸Šä¸‹æ–‡ã€‚</span>
<span class="hljs-meta">---
</span></code></pre>
<p><strong>å…³é”®è¦ç‚¹ï¼š</strong></p>
<ul>
<li><code>name</code>ï¼šæŠ€èƒ½åç§°ï¼Œä½¿ç”¨ kebab-case</li>
<li><code>description</code>ï¼š<strong>å¿…é¡»åŒ…å«æ‰€æœ‰"ä½•æ—¶ä½¿ç”¨"ä¿¡æ¯</strong>â€”â€”è€Œä¸æ˜¯åœ¨æ­£æ–‡ä¸­ã€‚æ­£æ–‡ä»…åœ¨è§¦å‘ååŠ è½½ï¼Œå› æ­¤æ­£æ–‡ä¸­çš„"ä½•æ—¶ä½¿ç”¨æ­¤æŠ€èƒ½"éƒ¨åˆ†å¯¹ Claude æ²¡æœ‰å¸®åŠ©</li>
<li>ä¸è¦åœ¨ YAML å‰ç½®å…ƒæ•°æ®ä¸­åŒ…å«ä»»ä½•å…¶ä»–å­—æ®µï¼ˆé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå¦‚ <code>license</code>ï¼‰</li>
</ul>
<p><strong>å¥½çš„æè¿°ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">description:</span> <span class="hljs-string">å…¨é¢çš„æ–‡æ¡£åˆ›å»ºã€ç¼–è¾‘å’Œåˆ†æï¼Œæ”¯æŒä¿®è®¢è¿½è¸ªã€æ‰¹æ³¨ã€æ ¼å¼ä¿ç•™å’Œæ–‡æœ¬æå–ã€‚å½“</span> <span class="hljs-string">Claude</span> <span class="hljs-string">éœ€è¦å¤„ç†ä¸“ä¸šæ–‡æ¡£ï¼ˆ.docx</span> <span class="hljs-string">æ–‡ä»¶ï¼‰æ—¶ä½¿ç”¨ï¼Œç”¨äºï¼š(1)</span> <span class="hljs-string">åˆ›å»ºæ–°æ–‡æ¡£ï¼Œ(2)</span> <span class="hljs-string">ä¿®æ”¹æˆ–ç¼–è¾‘å†…å®¹ï¼Œ(3)</span> <span class="hljs-string">å¤„ç†ä¿®è®¢è¿½è¸ªï¼Œ(4)</span> <span class="hljs-string">æ·»åŠ æ‰¹æ³¨ï¼Œæˆ–ä»»ä½•å…¶ä»–æ–‡æ¡£ä»»åŠ¡</span>
</code></pre>
<h4 data-id="heading-33">æ­¥éª¤ 4ï¼šç¼–å†™ SKILL.md æ­£æ–‡</h4>
<p><strong>å†™ä½œæŒ‡å—ï¼š</strong> å§‹ç»ˆä½¿ç”¨ç¥ˆä½¿å¥/ä¸å®šå¼å½¢å¼ã€‚</p>
<p><strong>ç»“æ„å»ºè®®ï¼š</strong></p>
<ol>
<li><strong>å¿«é€Ÿå…¥é—¨</strong>ï¼šæ ¸å¿ƒå·¥ä½œæµç¨‹çš„ç®€æ´ç¤ºä¾‹</li>
<li><strong>è¯¦ç»†è§„åˆ™</strong>ï¼šåˆ†æ­¥éª¤çš„è¯¦ç»†è¯´æ˜</li>
<li><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šå¸¸è§é”™è¯¯å’Œé™·é˜±</li>
<li><strong>å‚è€ƒèµ„æº</strong>ï¼šé“¾æ¥åˆ° <code>references/</code> ä¸­çš„è¯¦ç»†æ–‡æ¡£</li>
</ol>
<p><strong>é¿å…ï¼š</strong></p>
<ul>
<li>å†—é•¿çš„è§£é‡Šï¼ˆä¼˜å…ˆä½¿ç”¨ç¤ºä¾‹ï¼‰</li>
<li>é‡å¤ Rules ä¸­å·²æœ‰çš„å†…å®¹</li>
<li>è¿‡äºè¯¦ç»†çš„å®ç°ç»†èŠ‚ï¼ˆç§»åˆ° <code>references/</code> ä¸­ï¼‰</li>
</ul>
<h4 data-id="heading-34">æ­¥éª¤ 5ï¼šç»„ç»‡èµ„æºæ–‡ä»¶</h4>
<p>æ ¹æ®æ­¥éª¤ 2 çš„åˆ†æï¼Œåˆ›å»ºå¿…è¦çš„èµ„æºæ–‡ä»¶ï¼š</p>
<ul>
<li><strong>scripts/</strong>ï¼šå¯æ‰§è¡Œä»£ç ï¼ˆPython/Bash ç­‰ï¼‰</li>
<li><strong>references/</strong>ï¼šå‚è€ƒæ–‡æ¡£ï¼ˆAPI æ–‡æ¡£ã€æ•°æ®åº“æ¨¡å¼ã€è¯¦ç»†æŒ‡å—ç­‰ï¼‰</li>
<li><strong>assets/</strong>ï¼šè¾“å‡ºèµ„æºï¼ˆæ¨¡æ¿ã€å›¾æ ‡ã€å­—ä½“ç­‰ï¼‰</li>
</ul>
<p><strong>é‡è¦åŸåˆ™ï¼š</strong></p>
<ul>
<li>é¿å…é‡å¤ï¼šä¿¡æ¯åº”ä»…å­˜åœ¨äº <code>SKILL.md</code> æˆ–å‚è€ƒæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ä¸¤è€…éƒ½æœ‰</li>
<li>ä¿æŒ <code>SKILL.md</code> ç²¾ç®€ï¼šä»…åœ¨ <code>SKILL.md</code> ä¸­ä¿ç•™åŸºæœ¬çš„ç¨‹åºæ€§æŒ‡ä»¤å’Œå·¥ä½œæµç¨‹æŒ‡å¯¼</li>
<li>å°†è¯¦ç»†çš„å‚è€ƒææ–™ã€æ¨¡å¼å’Œç¤ºä¾‹ç§»è‡³å‚è€ƒæ–‡ä»¶</li>
</ul>
<h4 data-id="heading-35">æ­¥éª¤ 6ï¼šæµ‹è¯•å’Œè¿­ä»£</h4>
<p>åœ¨å®é™…ä»»åŠ¡ä¸­ä½¿ç”¨æŠ€èƒ½ï¼Œæ³¨æ„å›°éš¾æˆ–ä½æ•ˆä¹‹å¤„ï¼Œç¡®å®šåº”å¦‚ä½•æ›´æ–° <code>SKILL.md</code> æˆ–æ†ç»‘èµ„æºï¼Œå®æ–½æ›´æ”¹å¹¶å†æ¬¡æµ‹è¯•ã€‚</p>
<h2 data-id="heading-36">Skill çš„é€šç”¨ç›®å½•ç»“æ„</h2>
<h3 data-id="heading-37">æ ‡å‡†ç›®å½•ç»“æ„</h3>
<pre><code class="hljs language-text" lang="text">skill-name/
â”œâ”€â”€ SKILL.md                    # å¿…éœ€ï¼šæŠ€èƒ½ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ YAML å‰ç½®å…ƒæ•°æ®ï¼ˆå¿…éœ€ï¼‰
â”‚   â”‚   â”œâ”€â”€ name:ï¼ˆå¿…éœ€ï¼‰
â”‚   â”‚   â””â”€â”€ description:ï¼ˆå¿…éœ€ï¼‰
â”‚   â””â”€â”€ Markdown è¯´æ˜ï¼ˆå¿…éœ€ï¼‰
â”‚
â””â”€â”€ æ†ç»‘èµ„æºï¼ˆå¯é€‰ï¼‰
    â”œâ”€â”€ scripts/                # å¯æ‰§è¡Œä»£ç 
    â”‚   â”œâ”€â”€ process_data.py
    â”‚   â””â”€â”€ generate_report.sh
    â”‚
    â”œâ”€â”€ references/             # å‚è€ƒæ–‡æ¡£
    â”‚   â”œâ”€â”€ api-docs.md
    â”‚   â”œâ”€â”€ database-schema.md
    â”‚   â””â”€â”€ workflows.md
    â”‚
    â””â”€â”€ assets/                 # è¾“å‡ºèµ„æº
        â”œâ”€â”€ templates/
        â”‚   â””â”€â”€ report-template.html
        â”œâ”€â”€ icons/
        â”‚   â””â”€â”€ logo.png
        â””â”€â”€ fonts/
            â””â”€â”€ custom-font.ttf
</code></pre>
<h3 data-id="heading-38">ç›®å½•è¯´æ˜</h3>
<h4 data-id="heading-39">SKILL.mdï¼ˆå¿…éœ€ï¼‰</h4>
<p>æ¯ä¸ªæŠ€èƒ½çš„æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…å«ï¼š</p>
<ol>
<li>
<p><strong>YAML å‰ç½®å…ƒæ•°æ®</strong>ï¼ˆå¿…éœ€ï¼‰</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">skill-name</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">æŠ€èƒ½æè¿°ï¼ŒåŒ…å«ä½•æ—¶ä½¿ç”¨æ­¤æŠ€èƒ½çš„ä¿¡æ¯</span>
<span class="hljs-meta">---
</span></code></pre>
</li>
<li>
<p><strong>Markdown æ­£æ–‡</strong>ï¼ˆå¿…éœ€ï¼‰</p>
<ul>
<li>ä½¿ç”¨æŠ€èƒ½çš„è¯´æ˜å’ŒæŒ‡å¯¼</li>
<li>ä»…åœ¨æŠ€èƒ½è§¦å‘ååŠ è½½</li>
<li>ä¿æŒç²¾ç®€ï¼Œä¸è¶…è¿‡ 500 è¡Œ</li>
</ul>
</li>
</ol>
<h4 data-id="heading-40">scripts/ï¼ˆå¯é€‰ï¼‰</h4>
<p>ç”¨äºéœ€è¦ç¡®å®šæ€§å¯é æ€§æˆ–é‡å¤ç¼–å†™çš„ä»»åŠ¡çš„å¯æ‰§è¡Œä»£ç ã€‚</p>
<p><strong>ä½•æ—¶åŒ…å«ï¼š</strong></p>
<ul>
<li>å½“ç›¸åŒçš„ä»£ç è¢«é‡å¤ç¼–å†™æ—¶</li>
<li>å½“éœ€è¦ç¡®å®šæ€§å¯é æ€§æ—¶</li>
<li>å½“æ“ä½œå¤æ‚ä¸”å®¹æ˜“å‡ºé”™æ—¶</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<ul>
<li><code>scripts/rotate_pdf.py</code> - PDF æ—‹è½¬ä»»åŠ¡</li>
<li><code>scripts/process_data.py</code> - æ•°æ®å¤„ç†è„šæœ¬</li>
<li><code>scripts/generate_report.sh</code> - æŠ¥å‘Šç”Ÿæˆè„šæœ¬</li>
</ul>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>Token æ•ˆç‡é«˜ï¼ˆå¯ä»¥åœ¨ä¸åŠ è½½åˆ°ä¸Šä¸‹æ–‡çš„æƒ…å†µä¸‹æ‰§è¡Œï¼‰</li>
<li>ç¡®å®šæ€§å¼ºï¼ˆé¿å… LLM ç”Ÿæˆè¿‡ç¨‹ä¸­çš„ä¸ç¡®å®šæ€§ï¼‰</li>
<li>å¯å¤ç”¨ï¼ˆè·¨ä»»åŠ¡å¤ç”¨ï¼‰</li>
</ul>
<h4 data-id="heading-41">references/ï¼ˆå¯é€‰ï¼‰</h4>
<p>ç”¨äºæ ¹æ®éœ€è¦åŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­ä»¥æŒ‡å¯¼ Claude è¿‡ç¨‹å’Œæ€è€ƒçš„æ–‡æ¡£å’Œå‚è€ƒææ–™ã€‚</p>
<p><strong>ä½•æ—¶åŒ…å«ï¼š</strong></p>
<ul>
<li>ç”¨äº Claude åœ¨å·¥ä½œæ—¶åº”å‚è€ƒçš„æ–‡æ¡£</li>
<li>å½“ä¿¡æ¯é‡è¾ƒå¤§ï¼ˆ&gt;10k å­—ï¼‰æ—¶</li>
<li>å½“ä¿¡æ¯æ˜¯é¢†åŸŸç‰¹å®šçš„è¯¦ç»†çŸ¥è¯†æ—¶</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<ul>
<li><code>references/api-docs.md</code> - API è§„èŒƒæ–‡æ¡£</li>
<li><code>references/database-schema.md</code> - æ•°æ®åº“æ¨¡å¼</li>
<li><code>references/workflows.md</code> - è¯¦ç»†å·¥ä½œæµç¨‹æŒ‡å—</li>
<li><code>references/company-policies.md</code> - å…¬å¸æ”¿ç­–æ–‡æ¡£</li>
</ul>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>å¦‚æœæ–‡ä»¶è¾ƒå¤§ï¼ˆ&gt;10k å­—ï¼‰ï¼Œåœ¨ <code>SKILL.md</code> ä¸­åŒ…å« grep æœç´¢æ¨¡å¼</li>
<li>é¿å…é‡å¤ï¼šä¿¡æ¯åº”ä»…å­˜åœ¨äº <code>SKILL.md</code> æˆ–å‚è€ƒæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ä¸¤è€…éƒ½æœ‰</li>
<li>ç»“æ„åŒ–è¾ƒé•¿çš„å‚è€ƒæ–‡ä»¶ï¼šåœ¨é¡¶éƒ¨åŒ…å«ç›®å½•ï¼Œä»¥ä¾¿ Claude åœ¨é¢„è§ˆæ—¶å¯ä»¥çœ‹åˆ°å®Œæ•´èŒƒå›´</li>
</ul>
<h4 data-id="heading-42">assets/ï¼ˆå¯é€‰ï¼‰</h4>
<p>ä¸æ‰“ç®—åŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œè€Œæ˜¯åœ¨ Claude äº§ç”Ÿçš„è¾“å‡ºä¸­ä½¿ç”¨çš„æ–‡ä»¶ã€‚</p>
<p><strong>ä½•æ—¶åŒ…å«ï¼š</strong></p>
<ul>
<li>å½“æŠ€èƒ½éœ€è¦å°†åœ¨æœ€ç»ˆè¾“å‡ºä¸­ä½¿ç”¨çš„æ–‡ä»¶æ—¶</li>
<li>æ¨¡æ¿ã€å›¾åƒã€å›¾æ ‡ã€æ ·æ¿ä»£ç ç­‰</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<ul>
<li><code>assets/logo.png</code> - å“ç‰Œèµ„äº§</li>
<li><code>assets/slides.pptx</code> - PowerPoint æ¨¡æ¿</li>
<li><code>assets/frontend-template/</code> - HTML/React æ ·æ¿</li>
<li><code>assets/font.ttf</code> - å­—ä½“æ–‡ä»¶</li>
</ul>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å°†è¾“å‡ºèµ„æºä¸æ–‡æ¡£åˆ†å¼€</li>
<li>ä½¿ Claude èƒ½å¤Ÿä½¿ç”¨æ–‡ä»¶è€Œä¸å°†å…¶åŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­</li>
</ul>
<h3 data-id="heading-43">ä¸åº”åŒ…å«çš„å†…å®¹</h3>
<p>æŠ€èƒ½åº”ä»…åŒ…å«ç›´æ¥æ”¯æŒå…¶åŠŸèƒ½çš„å¿…è¦æ–‡ä»¶ã€‚ä¸è¦åˆ›å»ºå¤šä½™çš„æ–‡æ¡£æˆ–è¾…åŠ©æ–‡ä»¶ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>âŒ README.md</li>
<li>âŒ INSTALLATION_GUIDE.md</li>
<li>âŒ QUICK_REFERENCE.md</li>
<li>âŒ CHANGELOG.md</li>
<li>âŒ ç­‰ç­‰</li>
</ul>
<p>æŠ€èƒ½åº”ä»…åŒ…å« AI ä»£ç†å®Œæˆæ‰‹å¤´å·¥ä½œæ‰€éœ€çš„ä¿¡æ¯ã€‚å®ƒä¸åº”åŒ…å«å…³äºåˆ›å»ºè¿‡ç¨‹çš„è¾…åŠ©ä¸Šä¸‹æ–‡ã€è®¾ç½®å’Œæµ‹è¯•ç¨‹åºã€é¢å‘ç”¨æˆ·çš„æ–‡æ¡£ç­‰ã€‚</p>
<h3 data-id="heading-44">æ¸è¿›å¼æŠ«éœ²æ¨¡å¼ç¤ºä¾‹</h3>
<h4 data-id="heading-45">æ¨¡å¼ 1ï¼šå¸¦å‚è€ƒèµ„æ–™çš„é«˜çº§æŒ‡å—</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># PDF å¤„ç†</span>

<span class="hljs-section">## å¿«é€Ÿå…¥é—¨</span>

ä½¿ç”¨ pdfplumber æå–æ–‡æœ¬ï¼š
[ä»£ç ç¤ºä¾‹]

<span class="hljs-section">## é«˜çº§åŠŸèƒ½</span>

<span class="hljs-bullet">-</span> <span class="hljs-strong">**è¡¨å•å¡«å†™**</span>ï¼šå®Œæ•´æŒ‡å—è¯·å‚è§ [<span class="hljs-string">FORMS.md</span>](<span class="hljs-link">references/FORMS.md</span>)
<span class="hljs-bullet">-</span> <span class="hljs-strong">**API å‚è€ƒ**</span>ï¼šæ‰€æœ‰æ–¹æ³•è¯·å‚è§ [<span class="hljs-string">REFERENCE.md</span>](<span class="hljs-link">references/REFERENCE.md</span>)
<span class="hljs-bullet">-</span> <span class="hljs-strong">**ç¤ºä¾‹**</span>ï¼šå¸¸è§æ¨¡å¼è¯·å‚è§ [<span class="hljs-string">EXAMPLES.md</span>](<span class="hljs-link">references/EXAMPLES.md</span>)
</code></pre>
<p>Claude ä»…åœ¨éœ€è¦æ—¶åŠ è½½ <code>FORMS.md</code>ã€<code>REFERENCE.md</code> æˆ– <code>EXAMPLES.md</code>ã€‚</p>
<h4 data-id="heading-46">æ¨¡å¼ 2ï¼šé¢†åŸŸç‰¹å®šç»„ç»‡</h4>
<pre><code class="hljs language-text" lang="text">bigquery-skill/
â”œâ”€â”€ SKILL.mdï¼ˆæ¦‚è¿°å’Œå¯¼èˆªï¼‰
â””â”€â”€ references/
    â”œâ”€â”€ finance.mdï¼ˆæ”¶å…¥ã€è´¦å•æŒ‡æ ‡ï¼‰
    â”œâ”€â”€ sales.mdï¼ˆæœºä¼šã€ç®¡é“ï¼‰
    â”œâ”€â”€ product.mdï¼ˆAPI ä½¿ç”¨ã€åŠŸèƒ½ï¼‰
    â””â”€â”€ marketing.mdï¼ˆæ´»åŠ¨ã€å½’å› ï¼‰
</code></pre>
<p>å½“ç”¨æˆ·è¯¢é—®é”€å”®æŒ‡æ ‡æ—¶ï¼ŒClaude åªè¯»å– <code>sales.md</code>ã€‚</p>
<h4 data-id="heading-47">æ¨¡å¼ 3ï¼šæ¡ä»¶è¯¦æƒ…</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># DOCX å¤„ç†</span>

<span class="hljs-section">## åˆ›å»ºæ–‡æ¡£</span>

ä½¿ç”¨ docx-js åˆ›å»ºæ–°æ–‡æ¡£ã€‚è¯·å‚è§ [<span class="hljs-string">DOCX-JS.md</span>](<span class="hljs-link">references/DOCX-JS.md</span>)ã€‚

<span class="hljs-section">## ç¼–è¾‘æ–‡æ¡£</span>

å¯¹äºç®€å•ç¼–è¾‘ï¼Œç›´æ¥ä¿®æ”¹ XMLã€‚

<span class="hljs-strong">**å¯¹äºä¿®è®¢è¿½è¸ª**</span>ï¼šè¯·å‚è§ [<span class="hljs-string">REDLINING.md</span>](<span class="hljs-link">references/REDLINING.md</span>)
<span class="hljs-strong">**å¯¹äº OOXML è¯¦æƒ…**</span>ï¼šè¯·å‚è§ [<span class="hljs-string">OOXML.md</span>](<span class="hljs-link">references/OOXML.md</span>)
</code></pre>
<p>Claude ä»…åœ¨ç”¨æˆ·éœ€è¦è¿™äº›åŠŸèƒ½æ—¶è¯»å– <code>REDLINING.md</code> æˆ– <code>OOXML.md</code>ã€‚</p>
<p><strong>é‡è¦æŒ‡å—ï¼š</strong></p>
<ul>
<li><strong>é¿å…æ·±å±‚åµŒå¥—å¼•ç”¨</strong> - ä¿æŒå¼•ç”¨ä» <code>SKILL.md</code> èµ·ä¸€å±‚æ·±åº¦ã€‚æ‰€æœ‰å‚è€ƒæ–‡ä»¶åº”ç›´æ¥ä» <code>SKILL.md</code> é“¾æ¥</li>
<li><strong>ç»“æ„åŒ–è¾ƒé•¿çš„å‚è€ƒæ–‡ä»¶</strong> - å¯¹äºè¶…è¿‡ 100 è¡Œçš„æ–‡ä»¶ï¼Œåœ¨é¡¶éƒ¨åŒ…å«ç›®å½•</li>
</ul>
<h2 data-id="heading-48">æœ€ä½³å®è·µä¸è®¾è®¡åŸåˆ™</h2>
<h3 data-id="heading-49">1. å†…å®¹ç»„ç»‡åŸåˆ™</h3>
<h4 data-id="heading-50">ä¿æŒ SKILL.md ç²¾ç®€</h4>
<ul>
<li>ä¸è¶…è¿‡ 500 è¡Œ</li>
<li>ä¼˜å…ˆä½¿ç”¨ç¤ºä¾‹è€Œä¸æ˜¯å†—é•¿çš„è§£é‡Š</li>
<li>å°†è¯¦ç»†ä¿¡æ¯ç§»åˆ° <code>references/</code> ä¸­</li>
</ul>
<h4 data-id="heading-51">é¿å…é‡å¤</h4>
<ul>
<li>ä¿¡æ¯åº”ä»…å­˜åœ¨äº <code>SKILL.md</code> æˆ–å‚è€ƒæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ä¸¤è€…éƒ½æœ‰</li>
<li>ä»…åœ¨ <code>SKILL.md</code> ä¸­ä¿ç•™åŸºæœ¬çš„ç¨‹åºæ€§æŒ‡ä»¤å’Œå·¥ä½œæµç¨‹æŒ‡å¯¼</li>
<li>å°†è¯¦ç»†çš„å‚è€ƒææ–™ã€æ¨¡å¼å’Œç¤ºä¾‹ç§»è‡³å‚è€ƒæ–‡ä»¶</li>
</ul>
<h4 data-id="heading-52">ä½¿ç”¨æ¸è¿›å¼æŠ«éœ²</h4>
<ul>
<li>å…ƒæ•°æ®å±‚ï¼šAlways-Onï¼ˆçº¦ 100 tokenï¼‰</li>
<li>æŒ‡ä»¤å±‚ï¼šOn-Demandï¼ˆ1k-5k tokenï¼‰</li>
<li>èµ„æºå±‚ï¼šContext-Triggeredï¼ˆå¯å˜ï¼‰</li>
</ul>
<h3 data-id="heading-53">2. å†™ä½œé£æ ¼</h3>
<h4 data-id="heading-54">ä½¿ç”¨ç¥ˆä½¿å¥/ä¸å®šå¼å½¢å¼</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># âœ… å¥½çš„å†™æ³•</span>
ä½¿ç”¨ pdfplumber æå–æ–‡æœ¬ã€‚
ä¼˜å…ˆä½¿ç”¨ UnoCSS åŸå­ç±»ã€‚

<span class="hljs-section"># âŒ é¿å…çš„å†™æ³•</span>
ä½ åº”è¯¥ä½¿ç”¨ pdfplumber æå–æ–‡æœ¬ã€‚
æˆ‘ä»¬å»ºè®®ä¼˜å…ˆä½¿ç”¨ UnoCSS åŸå­ç±»ã€‚
</code></pre>
<h3 data-id="heading-55">3. èµ„æºæ–‡ä»¶ç®¡ç†</h3>
<h4 data-id="heading-56">Scripts æœ€ä½³å®è·µ</h4>
<ul>
<li>å¿…é¡»é€šè¿‡å®é™…è¿è¡Œæ¥æµ‹è¯•</li>
<li>ç¡®ä¿æ²¡æœ‰é”™è¯¯å¹¶ä¸”è¾“å‡ºç¬¦åˆé¢„æœŸ</li>
<li>å¦‚æœæœ‰è®¸å¤šç±»ä¼¼çš„è„šæœ¬ï¼Œåªéœ€æµ‹è¯•å…·æœ‰ä»£è¡¨æ€§çš„æ ·æœ¬</li>
</ul>
<h4 data-id="heading-57">References æœ€ä½³å®è·µ</h4>
<ul>
<li>å¦‚æœæ–‡ä»¶è¾ƒå¤§ï¼ˆ&gt;10k å­—ï¼‰ï¼Œåœ¨ <code>SKILL.md</code> ä¸­åŒ…å« grep æœç´¢æ¨¡å¼</li>
<li>åœ¨é¡¶éƒ¨åŒ…å«ç›®å½•ï¼ˆå¯¹äºè¶…è¿‡ 100 è¡Œçš„æ–‡ä»¶ï¼‰</li>
<li>é¿å…æ·±å±‚åµŒå¥—å¼•ç”¨ï¼ˆä¿æŒä» <code>SKILL.md</code> èµ·ä¸€å±‚æ·±åº¦ï¼‰</li>
</ul>
<h4 data-id="heading-58">Assets æœ€ä½³å®è·µ</h4>
<ul>
<li>ä»…åŒ…å«åœ¨æœ€ç»ˆè¾“å‡ºä¸­ä½¿ç”¨çš„æ–‡ä»¶</li>
<li>ä¸è¦å°†èµ„äº§åŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­</li>
<li>ä½¿ç”¨æœ‰æ„ä¹‰çš„å‘½å</li>
</ul>
<h3 data-id="heading-59">4. æè¿°ï¼ˆDescriptionï¼‰ç¼–å†™æŠ€å·§</h3>
<p><strong>è¿™æ˜¯æŠ€èƒ½æœ€é‡è¦çš„éƒ¨åˆ†</strong>ï¼Œå› ä¸ºè¿™æ˜¯ Claude ç”¨æ¥ç¡®å®šä½•æ—¶ä½¿ç”¨è¯¥æŠ€èƒ½çš„å”¯ä¸€å­—æ®µã€‚</p>
<h4 data-id="heading-60">å¥½çš„æè¿°åº”åŒ…å«ï¼š</h4>
<ol>
<li><strong>æŠ€èƒ½åšä»€ä¹ˆ</strong>ï¼šæ¸…æ™°æè¿°æŠ€èƒ½çš„æ ¸å¿ƒåŠŸèƒ½</li>
<li><strong>ä½•æ—¶ä½¿ç”¨</strong>ï¼šå…·ä½“çš„è§¦å‘åœºæ™¯å’Œä¸Šä¸‹æ–‡</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šåˆ—ä¸¾ä¸»è¦çš„ä½¿ç”¨åœºæ™¯</li>
</ol>
<h4 data-id="heading-61">ç¤ºä¾‹å¯¹æ¯”</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># âŒ ä¸å¥½çš„æè¿°ï¼ˆå¤ªç®€çŸ­ï¼Œç¼ºå°‘è§¦å‘ä¿¡æ¯ï¼‰</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">PDF</span> <span class="hljs-string">å¤„ç†æŠ€èƒ½</span>

<span class="hljs-comment"># âœ… å¥½çš„æè¿°ï¼ˆåŒ…å«ä½•æ—¶ä½¿ç”¨ä¿¡æ¯ï¼‰</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">å…¨é¢çš„</span> <span class="hljs-string">PDF</span> <span class="hljs-string">æ–‡æ¡£å¤„ç†ï¼Œæ”¯æŒæ–‡æœ¬æå–ã€è¡¨æ ¼æå–ã€é¡µé¢æ—‹è½¬å’Œåˆå¹¶ã€‚å½“</span> <span class="hljs-string">Claude</span> <span class="hljs-string">éœ€è¦å¤„ç†</span> <span class="hljs-string">PDF</span> <span class="hljs-string">æ–‡ä»¶æ—¶ä½¿ç”¨ï¼Œç”¨äºï¼š(1)</span> <span class="hljs-string">æå–æ–‡æœ¬å†…å®¹ï¼Œ(2)</span> <span class="hljs-string">æå–è¡¨æ ¼æ•°æ®ï¼Œ(3)</span> <span class="hljs-string">æ—‹è½¬é¡µé¢ï¼Œ(4)</span> <span class="hljs-string">åˆå¹¶å¤šä¸ª</span> <span class="hljs-string">PDFï¼Œæˆ–ä»»ä½•å…¶ä»–</span> <span class="hljs-string">PDF</span> <span class="hljs-string">æ“ä½œä»»åŠ¡</span>
</code></pre>
<h2 data-id="heading-62">å®æˆ˜æ¡ˆä¾‹</h2>
<h3 data-id="heading-63">æ¡ˆä¾‹ 1ï¼šè®¾è®¡ç¨¿è½¬æ¢ Skill</h3>
<p>è¿™æ˜¯ä¸€ä¸ªå®é™…é¡¹ç›®ä¸­çš„ Skillï¼Œå±•ç¤ºäº†å®Œæ•´çš„ç›®å½•ç»“æ„å’Œå†…å®¹ç»„ç»‡ã€‚</p>
<h4 data-id="heading-64">ç›®å½•ç»“æ„</h4>
<pre><code class="hljs language-text" lang="text">design-conversion/
â”œâ”€â”€ SKILL.md
â””â”€â”€ references/
    â”œâ”€â”€ rpxè½¬æ¢é€ŸæŸ¥è¡¨.md
    â””â”€â”€ å“åº”å¼å•ä½ä½¿ç”¨æŒ‡å—.md
</code></pre>
<h4 data-id="heading-65">SKILL.md ç»“æ„</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">design-conversion</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">Figma</span> <span class="hljs-string">è®¾è®¡ç¨¿è½¬æ¢ä¸º</span> <span class="hljs-string">uni-app</span> <span class="hljs-string">ä»£ç çš„æŠ€èƒ½ï¼ŒåŒ…å«å›¾ç‰‡èµ„æºä¸‹è½½ã€UnoCSS</span> <span class="hljs-string">åŸå­ç±»ä½¿ç”¨ã€rpx</span> <span class="hljs-string">å•ä½è½¬æ¢ç­‰å®Œæ•´è§„èŒƒ</span>
<span class="hljs-attr">tags:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">figma</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">design-to-code</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">uniapp</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">unocss</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">rpx</span>
<span class="hljs-meta">---
</span></code></pre>
<p><strong>æ­£æ–‡ç»“æ„ï¼š</strong></p>
<ol>
<li>UnoCSS ä¼˜å…ˆä½¿ç”¨è§„åˆ™ï¼ˆç¬¬ä¸€ä¼˜å…ˆçº§ï¼‰</li>
<li>å›¾ç‰‡èµ„æºä¸‹è½½è§„åˆ™</li>
<li>å¸ƒå±€å°ºå¯¸ç²¾ç¡®è¿˜åŸ</li>
<li>é¢œè‰²å€¼ç²¾ç¡®åŒ¹é…</li>
<li>æ–‡å­—æ ·å¼å®Œæ•´å¤åˆ¶</li>
<li>...ï¼ˆå…¶ä»–è§„åˆ™ï¼‰</li>
<li>è½¬æ¢æµç¨‹æ£€æŸ¥æ¸…å•</li>
<li>ç›¸å…³æ–‡æ¡£é“¾æ¥</li>
</ol>
<h4 data-id="heading-66">è®¾è®¡äº®ç‚¹</h4>
<ol>
<li>
<p><strong>æ¸è¿›å¼æŠ«éœ²</strong>ï¼š</p>
<ul>
<li>å…ƒæ•°æ®ï¼šæŠ€èƒ½åç§°å’Œæè¿°ï¼ˆAlways-Onï¼‰</li>
<li>æŒ‡ä»¤å±‚ï¼šæ ¸å¿ƒè½¬æ¢è§„åˆ™ï¼ˆOn-Demandï¼‰</li>
<li>èµ„æºå±‚ï¼šè¯¦ç»†çš„è½¬æ¢é€ŸæŸ¥è¡¨å’ŒæŒ‡å—ï¼ˆContext-Triggeredï¼‰</li>
</ul>
</li>
<li>
<p><strong>é¿å…é‡å¤</strong>ï¼š</p>
<ul>
<li><code>SKILL.md</code> ä¸­åŒ…å«æ ¸å¿ƒè§„åˆ™å’Œæ£€æŸ¥æ¸…å•</li>
<li>è¯¦ç»†çš„è½¬æ¢è¡¨å’ŒæŒ‡å—æ”¾åœ¨ <code>references/</code> ä¸­</li>
</ul>
</li>
<li>
<p><strong>æ¸…æ™°çš„è§¦å‘æ¡ä»¶</strong>ï¼š</p>
<ul>
<li>Description ä¸­æ˜ç¡®è¯´æ˜ï¼š"Figma è®¾è®¡ç¨¿è½¬æ¢ä¸º uni-app ä»£ç "</li>
<li>åŒ…å«å…·ä½“çš„ä½¿ç”¨åœºæ™¯</li>
</ul>
</li>
</ol>
<h3 data-id="heading-67">æ¡ˆä¾‹ 2ï¼šæŠ€èƒ½åˆ›å»ºå™¨ Skill</h3>
<p>è¿™æ˜¯ä¸€ä¸ªå…ƒæŠ€èƒ½ï¼ˆmeta-skillï¼‰ï¼Œç”¨äºåˆ›å»ºå…¶ä»–æŠ€èƒ½ã€‚</p>
<h4 data-id="heading-68">ç›®å½•ç»“æ„</h4>
<pre><code class="hljs language-text" lang="text">skill-creator/
â”œâ”€â”€ SKILL.md
â”œâ”€â”€ LICENSE.txt
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ init_skill.py
â”‚   â”œâ”€â”€ package_skill.py
â”‚   â””â”€â”€ quick_validate.py
â””â”€â”€ references/
    â”œâ”€â”€ output-patterns.md
    â””â”€â”€ workflows.md
</code></pre>
<h4 data-id="heading-69">è®¾è®¡äº®ç‚¹</h4>
<ol>
<li>
<p><strong>åŒ…å«è„šæœ¬</strong>ï¼š</p>
<ul>
<li><code>init_skill.py</code>ï¼šåˆå§‹åŒ–æ–°æŠ€èƒ½</li>
<li><code>package_skill.py</code>ï¼šæ‰“åŒ…æŠ€èƒ½</li>
<li><code>quick_validate.py</code>ï¼šå¿«é€ŸéªŒè¯</li>
</ul>
</li>
<li>
<p><strong>å‚è€ƒæ–‡æ¡£</strong>ï¼š</p>
<ul>
<li><code>output-patterns.md</code>ï¼šè¾“å‡ºæ ¼å¼æ¨¡å¼</li>
<li><code>workflows.md</code>ï¼šå·¥ä½œæµç¨‹æŒ‡å—</li>
</ul>
</li>
<li>
<p><strong>æ¸è¿›å¼æŠ«éœ²</strong>ï¼š</p>
<ul>
<li>æ ¸å¿ƒåˆ›å»ºæµç¨‹åœ¨ <code>SKILL.md</code> ä¸­</li>
<li>è¯¦ç»†çš„å·¥ä½œæµç¨‹å’Œè¾“å‡ºæ¨¡å¼åœ¨ <code>references/</code> ä¸­</li>
</ul>
</li>
</ol>
<h2 data-id="heading-70">æ€»ç»“</h2>
<h3 data-id="heading-71">å…³é”®è¦ç‚¹</h3>
<ol>
<li>
<p><strong>Rulesã€Skillsã€MCP ä¸‰è€…èŒè´£åˆ†ç¦»</strong>ï¼š</p>
<ul>
<li>Rulesï¼šé¡¹ç›®çº§åˆ«çš„é™æ€è§„èŒƒ</li>
<li>Skillsï¼šä»»åŠ¡çº§åˆ«çš„åŠ¨æ€èƒ½åŠ›</li>
<li>MCPï¼šå·¥å…·çº§åˆ«çš„è¿æ¥åè®®</li>
</ul>
</li>
<li>
<p><strong>å†™å¥½ Skill çš„æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<ul>
<li>ç®€æ´æ˜¯å…³é”®ï¼ˆè´¨ç–‘æ¯æ¡ä¿¡æ¯çš„å¿…è¦æ€§ï¼‰</li>
<li>è®¾ç½®é€‚å½“çš„è‡ªç”±åº¦ï¼ˆæ ¹æ®ä»»åŠ¡è„†å¼±æ€§ï¼‰</li>
<li>æ¸è¿›å¼æŠ«éœ²ï¼ˆä¸‰çº§åŠ è½½ç³»ç»Ÿï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ ‡å‡†ç›®å½•ç»“æ„</strong>ï¼š</p>
<ul>
<li><code>SKILL.md</code>ï¼ˆå¿…éœ€ï¼‰ï¼šå…ƒæ•°æ® + æ ¸å¿ƒæŒ‡ä»¤</li>
<li><code>scripts/</code>ï¼ˆå¯é€‰ï¼‰ï¼šå¯æ‰§è¡Œä»£ç </li>
<li><code>references/</code>ï¼ˆå¯é€‰ï¼‰ï¼šå‚è€ƒæ–‡æ¡£</li>
<li><code>assets/</code>ï¼ˆå¯é€‰ï¼‰ï¼šè¾“å‡ºèµ„æº</li>
</ul>
</li>
<li>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li>ä¿æŒ <code>SKILL.md</code> ç²¾ç®€ï¼ˆä¸è¶…è¿‡ 500 è¡Œï¼‰</li>
<li>é¿å…é‡å¤ï¼ˆä¿¡æ¯åªå­˜åœ¨ä¸€å¤„ï¼‰</li>
<li>ä½¿ç”¨æ¸è¿›å¼æŠ«éœ²ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰</li>
<li>ä¼˜å…ˆä½¿ç”¨ç¤ºä¾‹è€Œä¸æ˜¯å†—é•¿è§£é‡Š</li>
</ul>
</li>
</ol>
<h3 data-id="heading-72">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.claude.com%2Fdocs%2Fen%2Fagent-skills" target="_blank" title="https://platform.claude.com/docs/en/agent-skills" ref="nofollow noopener noreferrer">Anthropic Agent Skills å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">Anthropic Skills GitHub ä»“åº“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fagent.jd.com%2Fteam%2Fprivate%2Fskill" target="_blank" title="https://agent.jd.com/team/private/skill" ref="nofollow noopener noreferrer">JoyAgent Skills</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fskillsmp.com%2Fzh" target="_blank" title="https://skillsmp.com/zh" ref="nofollow noopener noreferrer">Skills å¸‚åœº</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLeastBit%2FClaude_skills_zh-CN%2Fblob%2Fmain%2Fskills%2Fskill-creator%2FSKILL.md" target="_blank" title="https://github.com/LeastBit/Claude_skills_zh-CN/blob/main/skills/skill-creator/SKILL.md" ref="nofollow noopener noreferrer">skill-creator</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡Œç¨‹ç¢‘äº”ï¼šElpisæ¡†æ¶npmåŒ…æŠ½è±¡å°è£…å¹¶å‘å¸ƒ]]></title>    <link>https://juejin.cn/post/7601076976439935016</link>    <guid>https://juejin.cn/post/7601076976439935016</guid>    <pubDate>2026-01-31T13:30:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601076976439935016" data-draft-id="7601076976439918632" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‡Œç¨‹ç¢‘äº”ï¼šElpisæ¡†æ¶npmåŒ…æŠ½è±¡å°è£…å¹¶å‘å¸ƒ"/> <meta itemprop="keywords" content="å…¨æ ˆ,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-01-31T13:30:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•æ¢¦126"/> <meta itemprop="url" content="https://juejin.cn/user/3428750694822667"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‡Œç¨‹ç¢‘äº”ï¼šElpisæ¡†æ¶npmåŒ…æŠ½è±¡å°è£…å¹¶å‘å¸ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3428750694822667/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•æ¢¦126
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T13:30:31.000Z" title="Sat Jan 31 2026 13:30:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡æ˜¯ã€Šå¤§å‰ç«¯å…¨æ ˆå®è·µã€‹å­¦ä¹ å®è·µçš„æ€»ç»“ï¼Œå‚è€ƒè‡ªæŠ–éŸ³"å“²ç„å‰ç«¯"è€å¸ˆçš„è¯¾ç¨‹å†…å®¹ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†æ·±åº¦æ€è€ƒä¸å®è·µã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ä¸ç›®æ ‡</h2>
<p>åœ¨å®Œæˆäº†å‰å››ä¸ªé‡Œç¨‹ç¢‘çš„å¼€å‘åï¼Œæˆ‘ä»¬çš„é¡¹ç›®å·²ç»å…·å¤‡äº†å®Œæ•´çš„åç«¯æœåŠ¡ï¼ˆKoaï¼‰ã€ä»¥åŠåŸºäºVue3çš„åŠ¨æ€ç»„ä»¶åº“å‰ç«¯ã€‚ç„¶è€Œï¼Œéšç€åŠŸèƒ½æ¨¡å—çš„å¢åŠ ï¼Œæ•´ä¸ªé¡¹ç›®çš„ä»£ç ç»“æ„å¼€å§‹å˜å¾—è‡ƒè‚¿ã€‚ä¸šåŠ¡é€»è¾‘ä¸åº•å±‚æ¶æ„ä»£ç æ··æ‚åœ¨ä¸€èµ·ï¼Œå¯¼è‡´æ ¸å¿ƒæ¶æ„éš¾ä»¥å¤ç”¨ï¼Œæ–°é¡¹ç›®çš„å¯åŠ¨æˆæœ¬ä¹Ÿè¶Šæ¥è¶Šé«˜ã€‚</p>
<p>é‡Œç¨‹ç¢‘äº”çš„æ ¸å¿ƒç›®æ ‡æ˜¯ <strong>"æ¶æ„ä¸ä¸šåŠ¡åˆ†ç¦»"</strong>ã€‚</p>
<p>å¦‚æœä¸è¿›è¡ŒæŠ½è±¡ï¼Œæ¯æ¬¡æ–°å»ºé¡¹ç›®éƒ½éœ€è¦æ‹·è´é€šè¿‡ä¸€å¤§å †åŸºç¡€ä»£ç ã€‚é€šè¿‡å°†åº•å±‚çš„é€šç”¨èƒ½åŠ›ï¼ˆè·¯ç”±åŠ è½½ã€ä¸­é—´ä»¶ç®¡ç†ã€æ§åˆ¶å™¨è£…è½½ç­‰ï¼‰å°è£…ä¸ºä¸€ä¸ªç‹¬ç«‹çš„ npm åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ï¼š</p>
<ul>
<li><strong>æ¡†æ¶å¤ç”¨</strong>ï¼šä¸€æ¬¡ç¼–å†™ï¼Œå¤šå¤„ä½¿ç”¨ã€‚</li>
<li><strong>ä¸šåŠ¡èšç„¦</strong>ï¼šå¼€å‘è€…åªéœ€å…³æ³¨ <code>app</code> ç›®å½•ä¸‹çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ— éœ€å…³å¿ƒåº•å±‚å¯åŠ¨æµç¨‹ã€‚</li>
<li><strong>ç‰ˆæœ¬ç®¡ç†</strong>ï¼šæ¡†æ¶çš„æ›´æ–°ä¸ç»´æŠ¤ç‹¬ç«‹äºå…·ä½“ä¸šåŠ¡é¡¹ç›®ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-1">äºŒã€æ¶æ„è®¾è®¡ï¼šä»å•ä½“åˆ°åˆ†å±‚</h2>
<p>æˆ‘ä»¬å°†é¡¹ç›®æ‹†è§£ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>æ¡†æ¶å±‚ (@aikun4588/elpis)</strong>ï¼šè´Ÿè´£åº•å±‚é©±åŠ¨ï¼ŒåŒ…æ‹¬ Koa å®ä¾‹åˆ›å»ºã€ç¯å¢ƒè¯†åˆ«ã€è‡ªåŠ¨åŠ è½½å™¨ï¼ˆLoaderï¼‰ç­‰ã€‚</li>
<li><strong>ä¸šåŠ¡å±‚ (User Project)</strong>ï¼šè´Ÿè´£å…·ä½“ä¸šåŠ¡ï¼Œéµå¾ªæ¡†æ¶çº¦å®šçš„ç›®å½•ç»“æ„ç¼–å†™ Controllerã€Service å’Œ Configã€‚</li>
</ol>
<h3 data-id="heading-2">ç›®å½•ç»“æ„çº¦å®šï¼ˆConvention over Configurationï¼‰</h3>
<p>æ¡†æ¶é‡‡ç”¨äº†<strong>çº¦å®šä¼˜äºé…ç½®</strong>çš„è®¾è®¡ç†å¿µã€‚åªè¦ä¸šåŠ¡å±‚æŒ‰ç…§ä»¥ä¸‹ç»“æ„ç»„ç»‡ä»£ç ï¼Œæ¡†æ¶å°±èƒ½è‡ªåŠ¨è¯†åˆ«å¹¶åŠ è½½ï¼š</p>
<pre><code class="hljs language-text" lang="text">Project/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ controller/      # ä¸šåŠ¡é€»è¾‘æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ service/         # ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚
â”‚   â”œâ”€â”€ middleware/      # ä¸šåŠ¡ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ router/          # è·¯ç”±å®šä¹‰
â”‚   â””â”€â”€ router-schema/   # å‚æ•°æ ¡éªŒSchema
â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.default.js
â”‚   â””â”€â”€ config.local.js
â”œâ”€â”€ index.js             # å…¥å£æ–‡ä»¶
â””â”€â”€ package.json
</code></pre>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€æ ¸å¿ƒå®ç°åŸç†ï¼šLoaderæœºåˆ¶</h2>
<p>æ¡†æ¶çš„æ ¸å¿ƒåœ¨äº<strong>Loaderï¼ˆåŠ è½½å™¨ï¼‰</strong>ã€‚å®ƒåˆ©ç”¨ Node.js çš„æ¨¡å—ç³»ç»Ÿå’Œæ–‡ä»¶ç³»ç»Ÿèƒ½åŠ›ï¼ˆå¦‚ <code>glob</code>ï¼‰ï¼Œè‡ªåŠ¨æ‰«ææŒ‡å®šç›®å½•å¹¶æŒ‚è½½åˆ° <code>app</code> å®ä¾‹ä¸Šã€‚</p>
<h3 data-id="heading-4">3.1 ç»Ÿä¸€å…¥å£ä¸å¯åŠ¨</h3>
<p>åœ¨ <code>elpis-core/index.js</code> ä¸­ï¼Œæˆ‘ä»¬å¯¼å‡ºä¸€ä¸ª <code>start</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æŒ‰é¡ºåºæ‰§è¡Œå„ä¸ª Loaderï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// elpis-core/index.js</span>
<span class="hljs-title function_">start</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Koa</span>();
    <span class="hljs-comment">// ç¡®å®šä¸šåŠ¡ä»£ç æ ¹è·¯å¾„</span>
    app.<span class="hljs-property">businessPath</span> = path.<span class="hljs-title function_">resolve</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">'./app'</span>);
    
    <span class="hljs-comment">// æŒ‰é¡ºåºåŠ è½½æ ¸å¿ƒæ¨¡å—</span>
    app.<span class="hljs-property">env</span> = <span class="hljs-title function_">env</span>();                    <span class="hljs-comment">// ç¯å¢ƒè¯†åˆ«</span>
    <span class="hljs-title function_">middlewareLoader</span>(app);              <span class="hljs-comment">// ä¸­é—´ä»¶åŠ è½½</span>
    <span class="hljs-title function_">routerSchemaLoader</span>(app);            <span class="hljs-comment">// å‚æ•°æ ¡éªŒåŠ è½½</span>
    <span class="hljs-title function_">controllerLoader</span>(app);              <span class="hljs-comment">// æ§åˆ¶å™¨åŠ è½½</span>
    <span class="hljs-title function_">serviceLoader</span>(app);                 <span class="hljs-comment">// æœåŠ¡å±‚åŠ è½½</span>
    <span class="hljs-title function_">configLoader</span>(app);                  <span class="hljs-comment">// é…ç½®åŠ è½½</span>
    
    <span class="hljs-comment">// ...æœ€åå¯åŠ¨ç›‘å¬</span>
    app.<span class="hljs-title function_">listen</span>(port);
}
</code></pre>
<h3 data-id="heading-5">3.2 æ™ºèƒ½æ§åˆ¶å™¨åŠ è½½ï¼ˆController Loaderï¼‰</h3>
<p><code>controllerLoader</code> è´Ÿè´£æ‰«æ <code>app/controller</code> ä¸‹çš„æ‰€æœ‰è„šæœ¬ï¼Œå¹¶æ ¹æ®æ–‡ä»¶è·¯å¾„è‡ªåŠ¨è½¬æ¢å‘½åï¼ˆå¦‚ <code>user-info.js</code> -&gt; <code>userInfo</code>ï¼‰ï¼Œæœ€ç»ˆæŒ‚è½½åˆ° <code>app.controller</code> ä¸Šã€‚</p>
<p>è¿™ç§è®¾è®¡ä½¿å¾—æˆ‘ä»¬åœ¨è·¯ç”±å®šä¹‰æ—¶ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ <code>app.controller.home.index</code> æ¥å¼•ç”¨ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨ requireã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// loader/controller.js æ ¸å¿ƒé€»è¾‘</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">app</span>) =&gt;</span> {
    <span class="hljs-comment">// æ‰«æ app/controller ä¸‹æ‰€æœ‰ js æ–‡ä»¶</span>
    <span class="hljs-keyword">const</span> fileList = glob.<span class="hljs-title function_">sync</span>(path.<span class="hljs-title function_">resolve</span>(app.<span class="hljs-property">businessPath</span>, <span class="hljs-string">'./controller/**/*.js'</span>));
    
    fileList.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> {
        <span class="hljs-comment">// è§£ææ–‡ä»¶åï¼Œè½¬æ¢ä¸ºé©¼å³°å‘½å</span>
        <span class="hljs-comment">// åŠ¨æ€ require å¹¶å®ä¾‹åŒ–</span>
        <span class="hljs-comment">// æŒ‚è½½åˆ° app.controller å¯¹è±¡æ ‘ä¸Š</span>
    });
}
</code></pre>
<h3 data-id="heading-6">3.3 è·¯ç”±ä¸Schemaçš„ç»“åˆ</h3>
<p>é…åˆé‡Œç¨‹ç¢‘å››çš„ç†å¿µï¼Œæˆ‘ä»¬è¿˜å®ç°äº† <code>routerSchemaLoader</code>ã€‚å®ƒè‡ªåŠ¨è¯»å– parameter æ ¡éªŒè§„åˆ™ï¼Œä¸ API æ¥å£è¿›è¡Œç»‘å®šã€‚è¿™ä½“ç°äº†<strong>æ¡†æ¶å±‚</strong>å¯¹<strong>è§„èŒƒ</strong>çš„å¼ºåˆ¶æ€§æ”¯æŒ â€”â€” åœ¨æ¡†æ¶å±‚é¢å°±é›†æˆäº†å‚æ•°æ ¡éªŒèƒ½åŠ›ï¼Œä¸šåŠ¡å¼€å‘åªéœ€å¡«å†™ JSON Schemaã€‚</p>
<hr/>
<h2 data-id="heading-7">å››ã€ç”¨æˆ·è‡ªå®šä¹‰ä¸æ¡†æ¶ç»“åˆ</h2>
<p>æŠ½è±¡åçš„æ¡†æ¶æå¤§åœ°ç®€åŒ–äº†ç”¨æˆ·ç«¯çš„ä½¿ç”¨ã€‚å¼€å‘è€…åªéœ€å®‰è£… npm åŒ…ï¼Œå¹¶åœ¨å…¥å£æ–‡ä»¶ä¸­ç®€å•è°ƒç”¨å³å¯å¯åŠ¨æœåŠ¡ã€‚</p>
<p><strong>å‘å¸ƒåŒ…å</strong>ï¼š<code>@aikun4588/elpis</code>
<strong>NPMåœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40aikun4588%2Felpis" target="_blank" title="https://www.npmjs.com/package/@aikun4588/elpis" ref="nofollow noopener noreferrer">www.npmjs.com/package/@aiâ€¦</a></p>
<h3 data-id="heading-8">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>ç”¨æˆ·é¡¹ç›®çš„ <code>index.js</code> å˜å¾—éå¸¸ç®€æ´ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼•å…¥æ ¸å¿ƒæ¡†æ¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ElpisCore</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@aikun4588/elpis'</span>);

<span class="hljs-comment">// è‡ªå®šä¹‰é…ç½®å¹¶å¯åŠ¨</span>
<span class="hljs-title class_">ElpisCore</span>.<span class="hljs-title function_">start</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'MyProject'</span>,
    <span class="hljs-attr">homePage</span>: <span class="hljs-string">'/view/dashboard'</span>
});
</code></pre>
<p>æ¡†æ¶è¿è¡Œæ—¶ï¼Œä¼šä¸»åŠ¨è¯»å–å½“å‰å·¥ä½œç›®å½• (<code>process.cwd()</code>) ä¸‹çš„ <code>app</code> æ–‡ä»¶å¤¹ï¼Œå°†ç”¨æˆ·çš„è‡ªå®šä¹‰ä»£ç æ³¨å…¥åˆ°æ¡†æ¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ã€‚è¿™å°±å®ç°äº†**"æ¡†æ¶ç°æœ‰å†…å®¹ï¼ˆåº•å±‚èƒ½åŠ›ï¼‰"<strong>ä¸</strong>"ç”¨æˆ·è‡ªå®šä¹‰ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰"**çš„å®Œç¾ç»“åˆã€‚</p>
<hr/>
<h2 data-id="heading-9">äº”ã€æµç¨‹å›¾è§£</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    User[ç”¨æˆ·å…¥å£ index.js] --&gt; Framework[Framework Start]
    Framework --&gt; Init[åˆå§‹åŒ– Koa &amp; Env]
    
    subgraph Loaders [è‡ªåŠ¨åŠ è½½å™¨åºåˆ—]
        L1[åŠ è½½ Middleware]
        L2[åŠ è½½ RouterSchema]
        L3[åŠ è½½ Controller]
        L4[åŠ è½½ Service]
        L5[åŠ è½½ Config]
    end
    
    Init --&gt; Loaders
    
    Loaders -- æ‰«æ --&gt; UserCode[ç”¨æˆ·ç›®å½• ./app]
    UserCode -- æ³¨å…¥ --&gt; Context[Appä¸Šä¸‹æ–‡å¯¹è±¡]
    
    Context --&gt; Server[å¯åŠ¨ HTTP æœåŠ¡]
</code></pre>
<hr/>
<h2 data-id="heading-10">å…­ã€æ€»ç»“</h2>
<p>é‡Œç¨‹ç¢‘äº”çš„å®Œæˆï¼Œæ ‡å¿—ç€ Elpis ä»ä¸€ä¸ªå•ä¸€çš„ç»ƒæ‰‹é¡¹ç›®ï¼Œè¿›åŒ–ä¸ºä¸€ä¸ªå¯å¤ç”¨çš„<strong>ä¼ä¸šçº§ Node.js å¼€å‘æ¡†æ¶</strong>ã€‚</p>
<p>é€šè¿‡å°†é€šç”¨é€»è¾‘æŠ½ç¦»ä¸º npm åŒ… (<code>@aikun4588/elpis</code>)ï¼Œæˆ‘ä»¬ä¸ä»…è§£è€¦äº†ä»£ç ï¼Œæ›´é‡è¦çš„æ˜¯ç¡®ç«‹äº†ä¸€å¥—<strong>å¼€å‘è§„èŒƒ</strong>ã€‚æœªæ¥çš„å¾®æœåŠ¡æˆ–æ–°åŠŸèƒ½æ¨¡å—ï¼Œéƒ½å¯ä»¥åŸºäºæ­¤æ¡†æ¶å¿«é€Ÿæ„å»ºï¼ŒçœŸæ­£å®ç°äº†"æè´¨å¢æ•ˆ"ã€‚</p>
<p>è¿™ä¸€æ­¥æŠ½è±¡ï¼Œæ˜¯å…¨æ ˆå·¥ç¨‹å¸ˆå‘æ¶æ„å¸ˆæ€ç»´è½¬å˜çš„å…³é”®ä¸€æ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨ç»„ä»¶è¿›é˜¶ï¼šä¸å®šé«˜åº¦åŠåŸç†åˆ†æï¼ï¼ï¼]]></title>    <link>https://juejin.cn/post/7601077764424515634</link>    <guid>https://juejin.cn/post/7601077764424515634</guid>    <pubDate>2026-01-31T13:58:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601077764424515634" data-draft-id="7601077764424499250" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨ç»„ä»¶è¿›é˜¶ï¼šä¸å®šé«˜åº¦åŠåŸç†åˆ†æï¼ï¼ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-01-31T13:58:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¹‹ç™¾ç‚¼æˆé­”"/> <meta itemprop="url" content="https://juejin.cn/user/1486957885265400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨ç»„ä»¶è¿›é˜¶ï¼šä¸å®šé«˜åº¦åŠåŸç†åˆ†æï¼ï¼ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1486957885265400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¹‹ç™¾ç‚¼æˆé­”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T13:58:10.000Z" title="Sat Jan 31 2026 13:58:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼š</p>
<blockquote>
<p>åç«¯ä¸€æ¬¡æ€§è¿”å›äº† 10,000 æ¡èŠå¤©è®°å½•ï¼Œæ¯æ¡è®°å½•çš„å†…å®¹é•¿åº¦éƒ½ä¸ä¸€æ ·ã€‚å½“ä½ è¯•å›¾æŠŠå®ƒä»¬å…¨éƒ¨æ¸²æŸ“åˆ°é¡µé¢ä¸Šæ—¶ï¼Œæµè§ˆå™¨ç¬é—´å¡æ­»ï¼Œç”¨æˆ·ä½“éªŒæå·®ã€‚</p>
</blockquote>
<p>è¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦ <strong>è™šæ‹Ÿåˆ—è¡¨ (Virtual List)</strong> çš„æ—¶åˆ»ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†æ·±å…¥æµ…å‡ºåœ°è®²è§£å¦‚ä½•å®ç°ä¸€ä¸ª<strong>æ”¯æŒä¸å®šé«˜åº¦</strong>çš„è™šæ‹Ÿåˆ—è¡¨ç»„ä»¶ã€‚å“ªæ€•ä½ æ˜¯åˆšå…¥é—¨çš„å‰ç«¯å°ç™½ï¼Œè¯»å®Œè¿™ç¯‡æ–‡ç« ä¹Ÿèƒ½äº²æ‰‹å†™å‡ºæ¥ï¼</p>
<hr/>
<h2 data-id="heading-0">1. æ ¸å¿ƒåŸç†ï¼šåªæ¸²æŸ“ä½ èƒ½çœ‹åˆ°çš„</h2>
<p>æƒ³è±¡ä½ åœ¨çœ‹ä¸€æœ¬ 1000 é¡µçš„ä¹¦ã€‚ä½ è™½ç„¶æ‹¿ç€æ•´æœ¬ä¹¦ï¼Œä½†ä½ çš„çœ¼ç›åŒä¸€æ—¶é—´åªèƒ½çœ‹åˆ°å±•å¼€çš„é‚£ä¸¤é¡µã€‚</p>
<p>è™šæ‹Ÿåˆ—è¡¨ä¹Ÿæ˜¯è¿™ä¸ªé“ç†ï¼š<strong>æ— è®ºæ•°æ®æœ‰å¤šå°‘æ¡ï¼Œæˆ‘ä»¬åªæ¸²æŸ“å½“å‰å¯è§†åŒºåŸŸå†…çš„é‚£å‡ æ¡ã€‚</strong></p>
<h3 data-id="heading-1">ä¸¤ä¸ªå…³é”®å®¹å™¨</h3>
<p>è¦å®ç°è¿™ä¸ªæ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦åœ¨ HTML é‡Œæ”¾ä¸¤ä¸ªâ€œç›’å­â€ï¼š</p>
<ol>
<li><strong>å¹½çµå®¹å™¨ (Phantom Container)</strong>ï¼š
<ul>
<li>å®ƒä¸è£…ä»»ä½•å†…å®¹ï¼Œä½†å®ƒçš„é«˜åº¦ç­‰äºæ‰€æœ‰æ•°æ®åŠ è½½å®Œåçš„<strong>æ€»é«˜åº¦</strong>ã€‚</li>
<li>å®ƒçš„ä½œç”¨æ˜¯æ’‘å¼€æµè§ˆå™¨çš„æ»šåŠ¨æ¡ï¼Œè®©ç”¨æˆ·æ„Ÿè§‰è‡ªå·±åœ¨æ»šä¸€ä¸ªå¾ˆé•¿çš„åˆ—è¡¨ã€‚</li>
</ul>
</li>
<li><strong>æ¸²æŸ“åŒºåŸŸ (Content Container)</strong>ï¼š
<ul>
<li>å®ƒçœŸæ­£ç”¨æ¥æ”¾åˆ—è¡¨é¡¹ã€‚</li>
<li>éšç€ä½ çš„æ»šåŠ¨ï¼Œæˆ‘ä»¬ä¼šåŠ¨æ€è®¡ç®—å®ƒçš„ <code>transform: translate3d(...)</code> åç§»é‡ï¼Œè®©å®ƒæ°¸è¿œå‡ºç°åœ¨ä½ çš„çœ¼å‰ã€‚</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-text" lang="text">  +------------------+  &lt;-- æµè§ˆå™¨è§†å£ (Viewport)
  |                  |
  |   +----------+   |  &lt;-- æ¸²æŸ“åŒºåŸŸ (Content Container)
  |   | Item 10  |   |      (é€šè¿‡ transform ç§»åŠ¨åˆ°è¿™é‡Œ)
  |   +----------+   |
  |   | Item 11  |   |
  |   +----------+   |
  |                  |
  +------------------+
          |
          | (æ»šåŠ¨æ¡)
          |
  +------------------+  &lt;-- å¹½çµå®¹å™¨ (Phantom Container)
  |                  |      (é«˜åº¦ = æ‰€æœ‰ Item é«˜åº¦ä¹‹å’Œ)
  |                  |      (è™½ç„¶æ˜¯ç©ºçš„ï¼Œä½†è´Ÿè´£æŠŠæ»šåŠ¨æ¡æ’‘é•¿)
  |                  |
  +------------------+
</code></pre>
<hr/>
<h2 data-id="heading-2">2. å½¢è±¡æ¯”å–»ï¼šç§’æ‡‚è™šæ‹Ÿåˆ—è¡¨</h2>
<p>å•çº¯çœ‹åŸç†å¯èƒ½æœ‰ç‚¹æ¯ç‡¥ï¼Œæˆ‘ä»¬ç”¨ç”µå½±æ”¾æ˜ çš„ä¾‹å­æ¥å¸®ä½ å½»åº•è®°ä½å®ƒã€‚</p>
<h3 data-id="heading-3">ğŸï¸ åœºæ™¯ä¸€ï¼šè€å¼ç”µå½±æ”¾æ˜ æœº (å¯¹åº”æ ¸å¿ƒæœºåˆ¶)</h3>
<p><strong>æƒ³è±¡ä¸€ä¸‹</strong>ï¼šä½ æ­£åœ¨æ”¾æ˜ ä¸€éƒ¨é•¿è¾¾ 3 å°æ—¶çš„ç”µå½±èƒ¶ç‰‡ã€‚</p>
<ol>
<li><strong>é•¿é•¿çš„èƒ¶ç‰‡å· (Phantom / å¹½çµå®¹å™¨)</strong>ï¼š
æ•´å·èƒ¶ç‰‡å¯èƒ½æœ‰å‡ å…¬é‡Œé•¿ï¼Œè¿™å†³å®šäº†æ”¾æ˜ æœºæ—è¾¹çš„å·ç›˜æœ‰å¤šå¤§ã€‚è¿™å°±æ˜¯<strong>æ»šåŠ¨æ¡</strong>ï¼Œå®ƒè®©ä½ çŸ¥é“ç”µå½±ï¼ˆæ•°æ®ï¼‰çš„æ€»é•¿åº¦ã€‚</li>
<li><strong>å°å°çš„æ”¾æ˜ çª—å£ (Viewport / å¯è§†åŒºåŸŸ)</strong>ï¼š
è™½ç„¶èƒ¶ç‰‡å¾ˆé•¿ï¼Œä½†æ”¾æ˜ æœºä¸€æ¬¡åªèƒ½è®©ä¸€å¼ åº•ç‰‡ç»è¿‡é•œå¤´ã€‚æˆ‘ä»¬ä¸éœ€è¦æŠŠæ•´å·èƒ¶ç‰‡éƒ½æ‘Šåœ¨é“¶å¹•ä¸Šï¼Œåªéœ€è¦ç¡®ä¿<strong>å½“å‰é‚£ä¸€å°æ®µ</strong>åœ¨é•œå¤´å‰ã€‚</li>
<li><strong>å¿«é€Ÿåˆ‡æ¢åº•ç‰‡ (Data Binding &amp; Offset / æ•°æ®ç»‘å®šä¸åç§»)</strong>ï¼š
éšç€ç”µæœºè½¬åŠ¨ï¼Œæ—§çš„ç”»é¢ç§»å‡ºï¼Œæ–°çš„ç”»é¢ç§»å…¥ã€‚å¯¹è§‚ä¼—æ¥è¯´ï¼Œç”»é¢æ˜¯è¿ç»­çš„ï¼›ä½†å¯¹æ”¾æ˜ æœºæ¥è¯´ï¼Œå®ƒæ°¸è¿œåªåœ¨å¤„ç†é•œå¤´å‰çš„é‚£ä¸€ä¸ç‚¹ç©ºé—´ã€‚</li>
</ol>
<h3 data-id="heading-4">ğŸ¬ åœºæ™¯äºŒï¼šé•¿çŸ­ä¸ä¸€çš„â€œç”µå½±ç‰‡æ®µâ€ (å¯¹åº”ä¸å®šé«˜åº¦ä¸ä¿®æ­£)</h3>
<p>å¦‚æœæ¯å¼ åº•ç‰‡çš„é«˜åº¦éƒ½ä¸€æ ·ï¼Œæ”¾æ˜ æœºè½¬é€Ÿå›ºå®šå³å¯ã€‚ä½†å¦‚æœè¿™æ˜¯ä¸€éƒ¨â€œå®éªŒç”µå½±â€ï¼Œæœ‰äº›ç‰‡æ®µæ˜¯æ­£å¸¸çš„ï¼Œæœ‰äº›ç‰‡æ®µç‰¹åˆ«é•¿ï¼ˆæ¯”å¦‚é•¿å·è½´ï¼‰ï¼š</p>
<ol>
<li><strong>ç›²ç›®å¿«è¿› (Estimate / é¢„ä¼°)</strong>ï¼š
ä½ ä»¥ä¸ºæ¯æ®µéƒ½æ˜¯ 10 å˜ç±³ã€‚ä½ æƒ³çœ‹ç¬¬ 10 æ®µï¼Œäºæ˜¯å¿«è¿›äº† 100 å˜ç±³ã€‚</li>
<li><strong>å‘ç°ç”»é¢åäº† (Render / æ¸²æŸ“)</strong>ï¼š
åœä¸‹ä¸€çœ‹ï¼Œå‘ç°å‰é¢çš„ç‰‡æ®µé‡Œæœ‰å¥½å‡ ä¸ªæ˜¯â€œè¶…é•¿ç‰ˆâ€ï¼Œç»“æœä½ ç°åœ¨åœåœ¨äº†ç¬¬ 8 æ®µå’Œç¬¬ 9 æ®µçš„ä¸­é—´ã€‚</li>
<li><strong>æ ¡å‡†ä½ç½® (Correction / ä¿®æ­£)</strong>ï¼š
ä½ ä¸å¾—ä¸é‡ä¸€ä¸‹åˆšæ‰é‚£å‡ æ®µåˆ°åº•æœ‰å¤šé•¿ï¼Œç„¶åæŠŠæ”¾æ˜ æœºçš„ä½ç½®å¾€åæŒªä¸€æŒªï¼Œç¡®ä¿ç¬¬ 10 æ®µèƒ½ç²¾å‡†å¯¹é½é•œå¤´ã€‚</li>
</ol>
<p>è¿™å°±æ˜¯ <code>updatePositions</code> çš„æ„ä¹‰ï¼š<strong>å½“å®é™…å†…å®¹æ¸²æŸ“å‡ºæ¥åï¼Œå‘ç°å®ƒæ¯”é¢„æƒ³çš„è¦é«˜ï¼Œå°±è¦ç«‹åˆ»æŠŠåé¢çš„å†…å®¹å¾€åâ€œé¡¶â€å¼€ï¼Œå¹¶ä¿®æ­£æ»šåŠ¨æ¡ä½ç½®ã€‚</strong></p>
<hr/>
<h2 data-id="heading-5">3. å®ç°æ­¥éª¤ï¼šä» 0 åˆ° 1</h2>
<p>æˆ‘ä»¬å°†æŒ‰ç…§ä»¥ä¸‹æµç¨‹æ¥å®ç°è¿™ä¸ªç»„ä»¶ï¼š</p>
<ol>
<li><strong>åˆå§‹åŒ–</strong>ï¼šå®šä¹‰ <code>positions</code> æ•°ç»„ï¼Œé¢„ä¼°æ¯ä¸ªåˆ—è¡¨é¡¹çš„é«˜åº¦ï¼Œç”Ÿæˆåˆå§‹ä½ç½®ä¿¡æ¯ã€‚</li>
<li><strong>å¯è§†åŒºè®¡ç®—</strong>ï¼šç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ ¹æ® <code>scrollTop</code> è®¡ç®—å‡ºå½“å‰åº”è¯¥æ˜¾ç¤ºå“ªå‡ é¡¹ï¼ˆ<code>startIndex</code> åˆ° <code>endIndex</code>ï¼‰ã€‚</li>
<li><strong>æ¸²æŸ“ä¸åç§»</strong>ï¼šä»æ•°æ®æºä¸­å–å‡ºè¿™å‡ é¡¹è¿›è¡Œæ¸²æŸ“ï¼Œå¹¶è®¾ç½® <code>transform</code> åç§»é‡ï¼Œè®©å®ƒä»¬æ˜¾ç¤ºåœ¨å±å¹•æ­£ç¡®çš„ä½ç½®ã€‚</li>
<li><strong>åŠ¨æ€ä¿®æ­£</strong>ï¼šDOM æ¸²æŸ“å®Œæˆåï¼Œè·å–æ¯ä¸€é¡¹çš„çœŸå®é«˜åº¦ã€‚å¦‚æœçœŸå®é«˜åº¦ä¸é¢„ä¼°ä¸ç¬¦ï¼Œæ›´æ–° <code>positions</code> æ•°ç»„ï¼Œå¹¶è°ƒæ•´åç»­æ‰€æœ‰é¡¹çš„ä½ç½®ã€‚</li>
</ol>
<pre><code class="hljs language-text" lang="text">        [ ğŸš€ å¼€å§‹ ]
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   1. åˆå§‹åŒ–æ•°æ® (Init)    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ ğŸ”‘ ç”Ÿæˆ positions æ•°ç»„    â”‚
  â”‚ ğŸ”‘ è®¾å®šé¢„ä¼°é«˜åº¦           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” &lt;â”€â”€â”€â”€â”€â”
  â”‚   2. ç›‘å¬äº‹ä»¶ (Listen)    â”‚       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
  â”‚ ğŸ”‘ scroll äº‹ä»¶ (æ»šåŠ¨)     â”‚       â”‚
  â”‚ ğŸ”‘ ResizeObserver (è§†å£)  â”‚       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
             â”‚                        â”‚
             â–¼                        â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
  â”‚   3. æ¸²æŸ“è§†å›¾ (Render)    â”‚       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
  â”‚ ğŸ”‘ æˆªå– visibleData       â”‚       â”‚
  â”‚ ğŸ”‘ è®¾ç½® translate3d åç§»  â”‚       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
             â”‚                        â”‚
             â–¼                        â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
  â”‚   4. åŠ¨æ€ä¿®æ­£ (Correct)   â”‚       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
  â”‚ ğŸ”‘ æµ‹é‡çœŸå® DOM é«˜åº¦      â”‚       â”‚
  â”‚ ğŸ”‘ æ›´æ–° positions æ•°ç»„    â”‚ â”€â”€â”€â”€â”€â”€â”˜
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ef513af32e74605ad870f5959ce4cfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LmL55m-54K85oiQ6a2U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770477061&amp;x-signature=9DYY73YJ4V71tdl7Z2TC%2FsZdGm0%3D" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-6">ğŸ” æ ¸å¿ƒé€»è¾‘æ‹†è§£</h3>
<p>ä¸ºäº†è®©è¿™ä¸ªé—­ç¯é«˜æ•ˆè¿è½¬ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†å¥½ä¸‰ä¸ªå…³é”®è¡Œä¸ºä¸äº‹ä»¶çš„å…³è”ï¼š</p>
<ol>
<li><strong>åˆå§‹åŒ–ä¸é¢„ä¼° (Init &amp; Estimate)</strong>ï¼š
<ul>
<li><strong>è§¦å‘</strong>ï¼šç»„ä»¶åŠ è½½æ—¶ã€‚</li>
<li><strong>é€»è¾‘</strong>ï¼šç”±äºæ— æ³•æå‰é¢„çŸ¥çœŸå®é«˜åº¦ï¼Œæˆ‘ä»¬å…ˆç»™æ¯ä¸€é¡¹â€œç”»å¤§é¥¼ï¼ˆé¢„ä¼°é«˜åº¦ï¼‰â€ï¼Œç”Ÿæˆåˆå§‹çš„ <code>positions</code> åæ ‡ç³»ã€‚</li>
</ul>
</li>
<li><strong>æ»šåŠ¨å®šä½ (Scroll &amp; Locate)</strong>ï¼š
<ul>
<li><strong>è§¦å‘</strong>ï¼šç”¨æˆ·æ‹–åŠ¨æ»šåŠ¨æ¡ï¼ˆ<code>scroll</code> äº‹ä»¶ï¼‰ã€‚</li>
<li><strong>é€»è¾‘</strong>ï¼šåˆ©ç”¨<strong>äºŒåˆ†æŸ¥æ‰¾</strong>åœ¨ <code>positions</code> ä¸­å¿«é€Ÿé”å®šå½“å‰ <code>scrollTop</code> å¯¹åº”çš„ <code>startIndex</code>ã€‚éšåé€šè¿‡ <code>translate3d</code> å°†å®¹å™¨åç§»åˆ°å¯è§†åŒºã€‚</li>
</ul>
</li>
<li><strong>åŠ¨æ€æµ‹é‡ä¸ä¿®æ­£ (Measure &amp; Correct)</strong>ï¼š
<ul>
<li><strong>è§¦å‘</strong>ï¼šæ•°æ®æ¸²æŸ“åˆ° DOM åï¼ˆ<code>onUpdated</code>ï¼‰æˆ–è§†å£å¤§å°æ”¹å˜ï¼ˆ<code>ResizeObserver</code>ï¼‰ã€‚</li>
<li><strong>é€»è¾‘</strong>ï¼šè·å–çœŸå® DOM é«˜åº¦ã€‚å¦‚æœå‘ç°ç¬¬ N é¡¹é«˜äº† 20pxï¼Œå°±ä¿®æ­£è¯¥é¡¹å¹¶è®© N ä¹‹åçš„æ‰€æœ‰é¡¹åæ ‡â€œé›†ä½“ä¸‹ç§»â€ 20pxï¼Œç¡®ä¿å­˜å‚¨çš„ä½ç½®ä¿¡æ¯ä¸å®é™…å®Œç¾å¯¹é½ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6603e9edfd414a6da57441c0c90a641d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LmL55m-54K85oiQ6a2U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770477061&amp;x-signature=G%2FWasFvE5rmG7So9rmPEQ6HKXPM%3D" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ul>
</li>
</ol>
<h3 data-id="heading-7">âš ï¸ å…³äº ResizeObserver çš„è¯¯åŒº</h3>
<p>å¾ˆå¤šåŒå­¦å¯èƒ½ä¼šç–‘æƒ‘ï¼š<strong>â€œåˆ—è¡¨æ»šåŠ¨æˆ–æ•°æ®æ›´æ–°æ—¶ï¼ŒResizeObserver ä¼šè§¦å‘å—ï¼Ÿâ€</strong></p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>ä¸ä¼š</strong>ã€‚</p>
<p><code>ResizeObserver</code> ä¸“é—¨ç”¨äºç›‘å¬<strong>å…ƒç´ å®¹å™¨æœ¬èº«ï¼ˆå¤–å±‚ç›’å­ï¼‰çš„ç‰©ç†å°ºå¯¸å˜åŒ–</strong>ã€‚</p>






























<table><thead><tr><th align="left">åœºæ™¯</th><th align="left">ResizeObserver è§¦å‘ï¼Ÿ</th><th align="left">åº”è¯¥ç”±è°å¤„ç†ï¼Ÿ</th></tr></thead><tbody><tr><td align="left"><strong>ç”¨æˆ·æ»šåŠ¨åˆ—è¡¨</strong></td><td align="left">âŒ ä¸è§¦å‘</td><td align="left"><code>@scroll</code> äº‹ä»¶ç›‘å¬</td></tr><tr><td align="left"><strong>åç«¯è¿”å›æ–°æ•°æ®</strong></td><td align="left">âŒ ä¸è§¦å‘</td><td align="left"><code>watch(() =&gt; props.data)</code></td></tr><tr><td align="left"><strong>æµè§ˆå™¨çª—å£ç¼©æ”¾</strong></td><td align="left">âœ… <strong>è§¦å‘</strong></td><td align="left"><strong>ResizeObserver</strong></td></tr><tr><td align="left"><strong>ä¾§è¾¹æ æŠ˜å /å±•å¼€</strong></td><td align="left">âœ… <strong>è§¦å‘</strong></td><td align="left"><strong>ResizeObserver</strong></td></tr></tbody></table>
<h2 data-id="heading-8"><strong>å®ƒçš„æ ¸å¿ƒä½¿å‘½</strong>ï¼šå½“è§†å£ï¼ˆç›’å­ï¼‰å˜å¤§å˜å°æ—¶ï¼Œå‘Šè¯‰ç»„ä»¶â€œç°åœ¨ä¸€å±èƒ½å¤šå¡å‡ æ¡æ•°æ®äº†â€ï¼Œä»è€Œé¿å…åº•éƒ¨å‡ºç°ç•™ç™½ã€‚
ç®€å•æ€»ç»“ï¼šå°±åƒç”µå½±æ”¾æ˜ æœºåˆšæ‘†å¥½çš„æ—¶å€™ï¼Œå…ˆé‡ä¸€ä¸‹é“¶å¹•æœ‰å¤šå¤§ï¼Œç„¶åè°ƒæ•´å¥½é•œå¤´ç„¦è·ï¼Œå¹¶å®‰æ’ä¸€ä¸ªäººç›¯ç€ï¼Œä¸‡ä¸€é“¶å¹•å˜å¤§äº†å°±èµ¶ç´§è°ƒæ•´ç”»é¢ã€‚</h2>
<h2 data-id="heading-9">4. ä»£ç å®æˆ˜ï¼šä¸€æ­¥æ­¥å®ç°</h2>
<pre><code class="hljs language-javascript" lang="javascript">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">PropType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { useNamespace } <span class="hljs-keyword">from</span> <span class="hljs-string">'@my-antd-ui/utils'</span>
<span class="hljs-keyword">import</span> {
  computed,
  nextTick,
  onMounted,
  onUnmounted,
  onUpdated,
  reactive,
  ref,
  watch,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-title function_">defineOptions</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'MyVirtualList'</span>,
})

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">PropType</span>&lt;any[]&gt;,
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> [],
  },
  <span class="hljs-attr">itemHeight</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-number">50</span>,
  },
  <span class="hljs-attr">estimatedItemHeight</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-number">50</span>,
  },
  <span class="hljs-attr">height</span>: {
    <span class="hljs-attr">type</span>: [<span class="hljs-title class_">Number</span>, <span class="hljs-title class_">String</span>],
    <span class="hljs-attr">default</span>: <span class="hljs-string">'100%'</span>,
  },
})

<span class="hljs-keyword">const</span> ns = <span class="hljs-title function_">useNamespace</span>(<span class="hljs-string">'virtual-list'</span>)
<span class="hljs-keyword">const</span> rootRef = ref&lt;<span class="hljs-title class_">HTMLElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span> itemsRef = ref&lt;<span class="hljs-title class_">HTMLElement</span>[] | <span class="hljs-literal">null</span>&gt;([])

interface <span class="hljs-title class_">Position</span> {
  <span class="hljs-attr">index</span>: number
  <span class="hljs-attr">top</span>: number
  <span class="hljs-attr">bottom</span>: number
  <span class="hljs-attr">height</span>: number
  <span class="hljs-attr">dHeight</span>: number <span class="hljs-comment">// æ›´æ–°åçš„é«˜åº¦å·®</span>
}

<span class="hljs-keyword">const</span> positions = ref&lt;<span class="hljs-title class_">Position</span>[]&gt;([])

<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">end</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">scrollTop</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">containerHeight</span>: <span class="hljs-number">0</span>,
})

<span class="hljs-comment">// åŸºäºé¢„ä¼°é«˜åº¦åˆå§‹åŒ–ä½ç½®ä¿¡æ¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">initPositions</span>(<span class="hljs-params"/>) {
  positions.<span class="hljs-property">value</span> = props.<span class="hljs-property">data</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> ({
    index,
    <span class="hljs-attr">height</span>: props.<span class="hljs-property">estimatedItemHeight</span>,
    <span class="hljs-attr">top</span>: index * props.<span class="hljs-property">estimatedItemHeight</span>,
    <span class="hljs-attr">bottom</span>: (index + <span class="hljs-number">1</span>) * props.<span class="hljs-property">estimatedItemHeight</span>,
    <span class="hljs-attr">dHeight</span>: <span class="hljs-number">0</span>,
  }))
}

<span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">data</span>, initPositions, { <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> })

<span class="hljs-comment">// 1. åˆ—è¡¨æ€»é«˜åº¦ç­‰äºæœ€åä¸€ä¸ªå…ƒç´ çš„åº•éƒ¨ä½ç½®</span>
<span class="hljs-keyword">const</span> listHeight = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> positions.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>
    ? positions.<span class="hljs-property">value</span>[positions.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">bottom</span>
    : <span class="hljs-number">0</span>
})

<span class="hljs-comment">// 2. å¯è§†åŒºåŸŸå†…çš„åˆ—è¡¨é¡¹æ•°é‡ï¼ˆé€»è¾‘ä¸Šéå¿…éœ€ï¼Œä½†æœ‰åŠ©äºåˆå§‹ä¼°ç®—ï¼‰</span>
<span class="hljs-keyword">const</span> visibleCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(state.<span class="hljs-property">containerHeight</span> / props.<span class="hljs-property">estimatedItemHeight</span>)
})

<span class="hljs-comment">// 3. å½“å‰å¯è§†åŒºåŸŸçš„æ•°æ®</span>
<span class="hljs-keyword">const</span> visibleData = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> props.<span class="hljs-property">data</span>
    .<span class="hljs-title function_">slice</span>(state.<span class="hljs-property">start</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(state.<span class="hljs-property">end</span>, props.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>))
    .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> ({
      ...item,
      <span class="hljs-attr">index</span>: state.<span class="hljs-property">start</span> + index,
    }))
})

<span class="hljs-comment">// 4. åç§»é‡</span>
<span class="hljs-keyword">const</span> offset = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">start</span> &gt;= <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">return</span> positions.<span class="hljs-property">value</span>[state.<span class="hljs-property">start</span>].<span class="hljs-property">top</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
})

<span class="hljs-comment">// ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°ç¬¬ä¸€ä¸ª bottom &gt; scrollTop çš„åˆ—è¡¨é¡¹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getStartIndex</span>(<span class="hljs-params">scrollTop: number = <span class="hljs-number">0</span></span>) {
  <span class="hljs-keyword">let</span> low = <span class="hljs-number">0</span>
  <span class="hljs-keyword">let</span> high = positions.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>
  <span class="hljs-keyword">let</span> res = -<span class="hljs-number">1</span>

  <span class="hljs-keyword">while</span> (low &lt;= high) {
    <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((low + high) / <span class="hljs-number">2</span>)
    <span class="hljs-keyword">const</span> pos = positions.<span class="hljs-property">value</span>[mid]

    <span class="hljs-keyword">if</span> (pos.<span class="hljs-property">bottom</span> &gt; scrollTop) {
      <span class="hljs-keyword">if</span> (pos.<span class="hljs-property">top</span> &lt; scrollTop) {
        <span class="hljs-comment">// è¯¥åˆ—è¡¨é¡¹è·¨è¶Šäº†é¡¶éƒ¨è¾¹ç•Œ</span>
        res = mid
        <span class="hljs-keyword">break</span>
      }
      <span class="hljs-comment">// è¯¥åˆ—è¡¨é¡¹å®Œå…¨åœ¨ scrollTop ä¹‹ä¸‹ï¼Œå°è¯•æŸ¥æ‰¾æ›´æ—©çš„é¡¹</span>
      res = mid <span class="hljs-comment">// å€™é€‰é¡¹ï¼Œä½†å¯èƒ½è¿˜æœ‰æ›´æ—©çš„ï¼Ÿ</span>
      high = mid - <span class="hljs-number">1</span>
    }
    <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// è¯¥åˆ—è¡¨é¡¹å®Œå…¨åœ¨ scrollTop ä¹‹ä¸Š</span>
      low = mid + <span class="hljs-number">1</span>
    }
  }
  <span class="hljs-keyword">return</span> res === -<span class="hljs-number">1</span> ? <span class="hljs-number">0</span> : res
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateVisibleRange</span>(<span class="hljs-params"/>) {
  state.<span class="hljs-property">start</span> = <span class="hljs-title function_">getStartIndex</span>(state.<span class="hljs-property">scrollTop</span>)
  state.<span class="hljs-property">end</span> = state.<span class="hljs-property">start</span> + visibleCount.<span class="hljs-property">value</span> + <span class="hljs-number">2</span> <span class="hljs-comment">// æ¸²æŸ“é¢å¤–çš„ç¼“å†²åŒºä»¥å¢åŠ å¹³æ»‘åº¦</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">onScroll</span>(<span class="hljs-params">e: Event</span>) {
  state.<span class="hljs-property">scrollTop</span> = (e.<span class="hljs-property">target</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>).<span class="hljs-property">scrollTop</span>
  <span class="hljs-title function_">updateVisibleRange</span>()
}

<span class="hljs-comment">// æ¸²æŸ“åæµ‹é‡å¹¶æ›´æ–°ä½ç½®ä¿¡æ¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updatePositions</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> nodes = itemsRef.<span class="hljs-property">value</span>
  <span class="hljs-keyword">if</span> (!nodes || nodes.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span>

  nodes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> {
    <span class="hljs-comment">// ä» dataset è·å–ç´¢å¼•ï¼ˆéœ€è¦åœ¨æ¨¡æ¿ä¸­ç»‘å®šï¼‰</span>
    <span class="hljs-comment">// æˆ–è€…å‡è®¾é¡ºåºä¸ visibleData ä¸€è‡´</span>
    <span class="hljs-comment">// ä¸ºäº†å®‰å…¨èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨ getAttribute è·å–ç»‘å®šçš„å±æ€§</span>
    <span class="hljs-keyword">const</span> indexStr = node.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'data-index'</span>)
    <span class="hljs-keyword">if</span> (!indexStr)
      <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">const</span> index = <span class="hljs-title class_">Number</span>.<span class="hljs-built_in">parseInt</span>(indexStr)

    <span class="hljs-keyword">const</span> rect = node.<span class="hljs-title function_">getBoundingClientRect</span>()
    <span class="hljs-keyword">const</span> height = rect.<span class="hljs-property">height</span>
    <span class="hljs-keyword">const</span> oldHeight = positions.<span class="hljs-property">value</span>[index].<span class="hljs-property">height</span>
    <span class="hljs-keyword">const</span> dHeight = height - oldHeight

    <span class="hljs-keyword">if</span> (dHeight) {
      positions.<span class="hljs-property">value</span>[index].<span class="hljs-property">height</span> = height
      positions.<span class="hljs-property">value</span>[index].<span class="hljs-property">bottom</span> = positions.<span class="hljs-property">value</span>[index].<span class="hljs-property">bottom</span> + dHeight
      positions.<span class="hljs-property">value</span>[index].<span class="hljs-property">dHeight</span> = dHeight
    }
  })

  <span class="hljs-comment">// ç´¯ç§¯æ›´æ–°åç»­é¡¹çš„ä½ç½®ä¿¡æ¯</span>
  <span class="hljs-comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå‘ç”Ÿå˜åŒ–çš„ç´¢å¼•</span>
  <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„ O(N) æ›´æ–°ã€‚å¯¹äºæµ·é‡åˆ—è¡¨å¯èƒ½éœ€è¦ä¼˜åŒ–ï¼Œä½†é€šå¸¸æƒ…å†µä¸‹æ€§èƒ½å¯ä»¥æ¥å—ã€‚</span>
  <span class="hljs-comment">// å®é™…ä¸Šï¼Œæˆ‘ä»¬åº”è¯¥ä»å‘ç”Ÿå˜åŒ–çš„èµ·å§‹ç´¢å¼•å¼€å§‹æ›´æ–°ã€‚</span>
  <span class="hljs-comment">// ä½†è¿™é‡Œæˆ‘ä»¬æ˜¯åœ¨éå†å¯è§†èŠ‚ç‚¹ã€‚</span>
  <span class="hljs-keyword">const</span> startUpdateIndex = <span class="hljs-title class_">Number</span>.<span class="hljs-built_in">parseInt</span>(nodes[<span class="hljs-number">0</span>].<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'data-index'</span>) || <span class="hljs-string">'0'</span>)
  <span class="hljs-keyword">const</span> len = positions.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = startUpdateIndex; i &lt; len; i++) {
    <span class="hljs-keyword">const</span> item = positions.<span class="hljs-property">value</span>[i]
    <span class="hljs-comment">// å¦‚æœå®ƒæ˜¯æˆ‘ä»¬åˆšæ‰æµ‹é‡è¿‡çš„é¡¹ï¼Œå®ƒå¯èƒ½å·²ç»æœ‰äº†è‡ªå·±çš„ dHeight</span>
    <span class="hljs-comment">// ä½†æˆ‘ä»¬ä¹Ÿéœ€è¦å‘å‰ä¼ é€’ä¹‹å‰ç´¯ç§¯çš„å·®å¼‚ã€‚</span>
    <span class="hljs-comment">// ç­‰ç­‰ï¼Œä¸Šé¢çš„é€»è¾‘åªæ›´æ–°äº†è¯¥é¡¹çš„ `bottom`ã€‚</span>
    <span class="hljs-comment">// æˆ‘ä»¬éœ€è¦åŸºäºå‰ä¸€é¡¹çš„ bottom é‡æ–°è®¡ç®— top/bottomã€‚</span>
    <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) {
      item.<span class="hljs-property">top</span> = positions.<span class="hljs-property">value</span>[i - <span class="hljs-number">1</span>].<span class="hljs-property">bottom</span>
      item.<span class="hljs-property">bottom</span> = item.<span class="hljs-property">top</span> + item.<span class="hljs-property">height</span>
    }
    <span class="hljs-keyword">else</span> {
      item.<span class="hljs-property">top</span> = <span class="hljs-number">0</span>
      item.<span class="hljs-property">bottom</span> = item.<span class="hljs-property">height</span>
    }
  }
}

<span class="hljs-title function_">onUpdated</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">updatePositions</span>()
  })
})

<span class="hljs-comment">// è®¾ç½® ResizeObserver</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">observer</span>: <span class="hljs-title class_">ResizeObserver</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (rootRef.<span class="hljs-property">value</span>) {
    state.<span class="hljs-property">containerHeight</span> = rootRef.<span class="hljs-property">value</span>.<span class="hljs-property">clientHeight</span>
    <span class="hljs-title function_">updateVisibleRange</span>()

    observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
        state.<span class="hljs-property">containerHeight</span> = entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">height</span>
        <span class="hljs-title function_">updateVisibleRange</span>()
      }
    })
    observer.<span class="hljs-title function_">observe</span>(rootRef.<span class="hljs-property">value</span>)
  }
})

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (observer) {
    observer.<span class="hljs-title function_">disconnect</span>()
    observer = <span class="hljs-literal">null</span>
  }
})
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"rootRef"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"ns.b()"</span> @<span class="hljs-attr">scroll</span>=<span class="hljs-string">"onScroll"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 1. å¹½çµå®¹å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"ns.e('phantom')"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ height: `${listHeight}px` }"</span> /&gt;</span>

    <span class="hljs-comment">&lt;!-- 2. çœŸå®æ¸²æŸ“åŒºåŸŸ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">:class</span>=<span class="hljs-string">"ns.e('content')"</span>
      <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ transform: `translate3d(0, ${offset}px, 0)` }"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in visibleData"</span>
        <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.key ?? item.id"</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">"itemsRef"</span>
        <span class="hljs-attr">:class</span>=<span class="hljs-string">"ns.e('item')"</span>
        <span class="hljs-attr">:data-index</span>=<span class="hljs-string">"item.index"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">:index</span>=<span class="hljs-string">"item.index"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

</code></pre>
<h3 data-id="heading-10">ç¬¬ä¸€æ­¥ï¼šå®šä¹‰æ•°æ®ç»“æ„</h3>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°ç»„ <code>positions</code> æ¥è®°å½•æ¯ä¸€é¡¹çš„ä½ç½®ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Position</span> {
  <span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>  <span class="hljs-comment">// ç¬¬å‡ æ¡æ•°æ®</span>
  <span class="hljs-attr">top</span>: <span class="hljs-built_in">number</span>    <span class="hljs-comment">// é¡¶éƒ¨è·ç¦»æ€»åˆ—è¡¨é¡¶ç«¯çš„è·ç¦»</span>
  <span class="hljs-attr">bottom</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// åº•éƒ¨è·ç¦»æ€»åˆ—è¡¨é¡¶ç«¯çš„è·ç¦»</span>
  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// è¿™ä¸€é¡¹çš„é«˜åº¦</span>
  <span class="hljs-attr">dHeight</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// é«˜åº¦ä¿®æ­£å€¼ï¼ˆçœŸå®é«˜åº¦ - é¢„ä¼°é«˜åº¦ï¼‰</span>
}

<span class="hljs-keyword">const</span> positions = ref&lt;<span class="hljs-title class_">Position</span>[]&gt;([])
</code></pre>
<p>åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬å…ˆæŒ‰é¢„ä¼°é«˜åº¦ï¼ˆæ¯”å¦‚ 50pxï¼‰æŠŠè¿™ä¸ªæ•°ç»„å¡«æ»¡ã€‚</p>
<h3 data-id="heading-11">ç¬¬äºŒæ­¥ï¼šäºŒåˆ†æŸ¥æ‰¾ (Binary Search)</h3>
<p>å½“ä½ æ»šåŠ¨åˆ° <code>scrollTop = 10000</code> çš„ä½ç½®æ—¶ï¼Œæˆ‘ä»¬æ€ä¹ˆçŸ¥é“è¯¥ä»ç¬¬å‡ æ¡æ•°æ®å¼€å§‹æ¸²æŸ“ï¼Ÿ</p>
<p>å¦‚æœä»å¤´éå† <code>positions</code> æ•°ç»„ï¼Œå¦‚æœæ•°æ®æœ‰ä¸€ç™¾ä¸‡æ¡ï¼Œé‚£æ¯æ¬¡æ»šåŠ¨éƒ½è¦ç®—å¾ˆä¹…ã€‚æ‰€ä»¥æˆ‘ä»¬ç”¨<strong>äºŒåˆ†æŸ¥æ‰¾</strong>ï¼Œæ•ˆç‡ç¬é—´èµ·é£ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªåº•éƒ¨ä½ç½®å¤§äº scrollTop çš„å…ƒç´ ç´¢å¼•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getStartIndex</span>(<span class="hljs-params">scrollTop: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></span>) {
  <span class="hljs-keyword">let</span> low = <span class="hljs-number">0</span>
  <span class="hljs-keyword">let</span> high = positions.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>
  
  <span class="hljs-keyword">while</span> (low &lt;= high) {
    <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((low + high) / <span class="hljs-number">2</span>)
    <span class="hljs-keyword">const</span> pos = positions.<span class="hljs-property">value</span>[mid]

    <span class="hljs-keyword">if</span> (pos.<span class="hljs-property">bottom</span> &gt; scrollTop) {
      <span class="hljs-keyword">if</span> (pos.<span class="hljs-property">top</span> &lt; scrollTop) {
        <span class="hljs-comment">// å°±æ˜¯å®ƒï¼è·¨è¶Šäº†å¯è§†è¾¹ç•Œ</span>
        <span class="hljs-keyword">return</span> mid
      }
      high = mid - <span class="hljs-number">1</span> <span class="hljs-comment">// åœ¨å‰åŠæˆª</span>
    } <span class="hljs-keyword">else</span> {
      low = mid + <span class="hljs-number">1</span>  <span class="hljs-comment">// åœ¨ååŠæˆª</span>
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
}
</code></pre>
<h3 data-id="heading-12">ç¬¬ä¸‰æ­¥ï¼šæ¸²æŸ“åçš„è‡ªåŠ¨ä¿®æ­£</h3>
<p>è¿™æ˜¯æœ€ç²¾å½©çš„ä¸€æ­¥ã€‚å½“æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Šåï¼ŒVue çš„ <code>onUpdated</code> é’©å­ä¼šè¢«è§¦å‘ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œè¿›è¡Œæµ‹é‡å’Œä¿®æ­£ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updatePositions</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> nodes = itemsRef.<span class="hljs-property">value</span>
  <span class="hljs-keyword">if</span> (!nodes || nodes.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>

  <span class="hljs-comment">// 1. æµ‹é‡çœŸå®é«˜åº¦ï¼Œæ›´æ–°å½“å‰å¯è§†åŒºåŸŸçš„æ•°æ®</span>
  nodes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> rect = node.<span class="hljs-title function_">getBoundingClientRect</span>()
    <span class="hljs-keyword">const</span> height = rect.<span class="hljs-property">height</span>
    <span class="hljs-keyword">const</span> index = <span class="hljs-built_in">parseInt</span>(node.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'data-index'</span>))
    <span class="hljs-keyword">const</span> oldHeight = positions.<span class="hljs-property">value</span>[index].<span class="hljs-property">height</span>
    <span class="hljs-keyword">const</span> dHeight = height - oldHeight

    <span class="hljs-keyword">if</span> (dHeight) {
      positions.<span class="hljs-property">value</span>[index].<span class="hljs-property">height</span> = height
      positions.<span class="hljs-property">value</span>[index].<span class="hljs-property">bottom</span> = positions.<span class="hljs-property">value</span>[index].<span class="hljs-property">bottom</span> + dHeight
      positions.<span class="hljs-property">value</span>[index].<span class="hljs-property">dHeight</span> = dHeight <span class="hljs-comment">// è®°å½•å·®å€¼</span>
    }
  })

  <span class="hljs-comment">// 2. ç´¯ç§¯æ•ˆåº”ï¼šä»ç¬¬ä¸€ä¸ªå˜åŒ–çš„ä½ç½®å¼€å§‹ï¼Œåç»­æ‰€æœ‰é¡¹éƒ½è¦è°ƒæ•´</span>
  <span class="hljs-comment">// æ¯”å¦‚ç¬¬ 5 é¡¹å˜é«˜äº† 10pxï¼Œé‚£ä¹ˆç¬¬ 6 é¡¹çš„ top å°±è¦ +10pxï¼Œbottom ä¹Ÿè¦ +10px...</span>
  <span class="hljs-keyword">let</span> startAdjustIndex = <span class="hljs-comment">/* æ‰¾åˆ°è¿™æ¬¡æ›´æ–°ä¸­æœ€æ—©å‡ºç°çš„é‚£ä¸ªç´¢å¼• */</span>
  <span class="hljs-keyword">let</span> accumulatedDiff = <span class="hljs-number">0</span>
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = startAdjustIndex; i &lt; positions.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>; i++) {
     <span class="hljs-keyword">const</span> item = positions.<span class="hljs-property">value</span>[i]
     <span class="hljs-comment">// æ›´æ–° top</span>
     item.<span class="hljs-property">top</span> = positions.<span class="hljs-property">value</span>[i - <span class="hljs-number">1</span>].<span class="hljs-property">bottom</span>
     <span class="hljs-comment">// æ›´æ–° bottom</span>
     item.<span class="hljs-property">bottom</span> = item.<span class="hljs-property">top</span> + item.<span class="hljs-property">height</span>
  }
}
</code></pre>
<h3 data-id="heading-13">ç¬¬å››æ­¥ï¼šæ¨¡æ¿ä¸æ ·å¼ (Template &amp; Style)</h3>
<p>æœ€åï¼Œçœ‹çœ‹æ¨¡æ¿é‡Œæ˜¯æ€ä¹ˆæŠŠè¿™ä¸¤ä¸ªâ€œç›’å­â€ç»„è£…èµ·æ¥çš„ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"rootRef"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"my-virtual-list"</span> @<span class="hljs-attr">scroll</span>=<span class="hljs-string">"onScroll"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 1. å¹½çµå®¹å™¨ï¼šé«˜åº¦ç”± listHeight æ’‘å¼€ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"my-virtual-list__phantom"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ height: `${listHeight}px` }"</span> /&gt;</span>

    <span class="hljs-comment">&lt;!-- 2. çœŸå®æ¸²æŸ“åŒºåŸŸï¼šé€šè¿‡ transform ç§»åŠ¨åˆ°å¯è§†åŒº --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"my-virtual-list__content"</span>
      <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ transform: `translate3d(0, ${offset}px, 0)` }"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in visibleData"</span>
        <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">"my-virtual-list__item"</span>
        <span class="hljs-attr">:data-index</span>=<span class="hljs-string">"item.index"</span> 
      &gt;</span>
        <span class="hljs-comment">&lt;!-- æ’æ§½ï¼šæŠŠå…·ä½“æ€ä¹ˆæ¸²æŸ“è¿™ä¸€è¡Œçš„æƒåŠ›äº¤ç»™ä½¿ç”¨è€… --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">:index</span>=<span class="hljs-string">"item.index"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>åˆ«å¿˜äº†åŠ ä¸Šå…³é”®çš„ CSSï¼Œå¦åˆ™â€œå¹½çµâ€å’Œâ€œå†…å®¹â€ä¼šæ‰“æ¶ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.my-virtual-list</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">overflow-y</span>: auto; <span class="hljs-comment">/* å¿…é¡»å¼€å¯æ»šåŠ¨ */</span>
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-class">.my-virtual-list__phantom</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">z-index</span>: -<span class="hljs-number">1</span>; <span class="hljs-comment">/* è—åœ¨åé¢ï¼Œåªä¸ºäº†æ’‘å¼€é«˜åº¦ */</span>
}

<span class="hljs-selector-class">.my-virtual-list__content</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-comment">/* transform ä¼šåœ¨è¿™é‡ŒåŠ¨æ€è®¾ç½® */</span>
}
</code></pre>
<h3 data-id="heading-14">ç¬¬äº”æ­¥ï¼šå“åº”å¼é€‚é… (ResizeObserver)</h3>
<p>å¦‚æœç”¨æˆ·ç¼©æ”¾äº†æµè§ˆå™¨çª—å£ï¼Œæˆ–è€…ä¾§è¾¹æ æŠ˜å å¯¼è‡´åˆ—è¡¨å®¹å™¨é«˜åº¦å˜åŒ–ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è®¡ç®—â€œä¸€å±èƒ½æ˜¾ç¤ºå¤šå°‘æ¡æ•°æ®â€ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç›‘å¬å®¹å™¨å°ºå¯¸å˜åŒ–</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">observer</span>: <span class="hljs-title class_">ResizeObserver</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (rootRef.<span class="hljs-property">value</span>) {
    observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-comment">// æ›´æ–°å®¹å™¨é«˜åº¦ -&gt; è§¦å‘ visibleCount é‡æ–°è®¡ç®—</span>
      state.<span class="hljs-property">containerHeight</span> = entries[<span class="hljs-number">0</span>].<span class="hljs-property">contentRect</span>.<span class="hljs-property">height</span>
      <span class="hljs-title function_">updateVisibleRange</span>()
    })
    observer.<span class="hljs-title function_">observe</span>(rootRef.<span class="hljs-property">value</span>)
  }
})

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (observer) {
    observer.<span class="hljs-title function_">disconnect</span>()
    observer = <span class="hljs-literal">null</span>
  }
})
</code></pre>
<hr/>
<h2 data-id="heading-15">5. æ€»ç»“</h2>
<p>å®ç°ä¸å®šé«˜åº¦è™šæ‹Ÿåˆ—è¡¨ï¼Œæ ¸å¿ƒå°±æ˜¯ï¼š</p>
<ol>
<li><strong>ä½ç½®ç¼“å­˜</strong>ï¼šç”¨ <code>positions</code> æ•°ç»„è®°å½•æ¯ä¸€é¡¹çš„å‡ ä½•ä¿¡æ¯ã€‚</li>
<li><strong>æ»šåŠ¨è®¡ç®—</strong>ï¼šç›‘å¬ scroll äº‹ä»¶ï¼Œç”¨<strong>äºŒåˆ†æŸ¥æ‰¾</strong>å¿«é€Ÿå®šä½ <code>startIndex</code>ã€‚</li>
<li><strong>åŠ¨æ€ä¿®æ­£</strong>ï¼šDOM æ¸²æŸ“å®Œåï¼Œæµ‹é‡çœŸå®é«˜åº¦ï¼Œåè¿‡æ¥ä¿®æ­£ <code>positions</code> æ•°ç»„ï¼Œç¡®ä¿æŒç»­æ»šåŠ¨çš„å‡†ç¡®æ€§ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js è¿›ç¨‹é€€å‡ºæ—¶ï¼Œä¸ºä»€ä¹ˆä½ çš„æ—¥å¿—æ€»ä¼šâ€œæ–­å°¾â€ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7601159804489891859</link>    <guid>https://juejin.cn/post/7601159804489891859</guid>    <pubDate>2026-01-31T15:14:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601159804489891859" data-draft-id="7601020578490417161" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js è¿›ç¨‹é€€å‡ºæ—¶ï¼Œä¸ºä»€ä¹ˆä½ çš„æ—¥å¿—æ€»ä¼šâ€œæ–­å°¾â€ï¼Ÿ"/> <meta itemprop="keywords" content="JavaScript,Node.js,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2026-01-31T15:14:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="donecoding"/> <meta itemprop="url" content="https://juejin.cn/user/3192637500430093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js è¿›ç¨‹é€€å‡ºæ—¶ï¼Œä¸ºä»€ä¹ˆä½ çš„æ—¥å¿—æ€»ä¼šâ€œæ–­å°¾â€ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3192637500430093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    donecoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T15:14:57.000Z" title="Sat Jan 31 2026 15:14:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸš€ çœæµåŠ©æ‰‹ï¼ˆé€Ÿé€šç»“è®ºï¼‰</p>
<ol>
<li><strong>å†…å­˜ä¸ç”¨æ¸…</strong>ï¼šè¿›ç¨‹é€€å‡ºå OS ä¼šè‡ªåŠ¨å›æ”¶å†…å­˜ï¼Œåœ¨Â <code>exit</code>Â äº‹ä»¶é‡Œæ‰‹åŠ¨æ¸…ç†å˜é‡æ˜¯æµªè´¹æ—¶é—´ã€‚</li>
<li><strong>å¼‚æ­¥å·²æ­»</strong>ï¼š<code>exit</code>Â è§¦å‘æ—¶äº‹ä»¶å¾ªç¯å·²åœæ­¢ï¼Œæ‰€æœ‰Â <code>Promise</code>ã€<code>stream.end()</code>Â å‡æ— æ•ˆã€‚</li>
<li><strong>æ—¥å¿—ä¸¢å¤±çœŸç›¸</strong>ï¼š<code>WriteStream</code>Â æœ‰å†…éƒ¨ç¼“å†²åŒºï¼ˆé»˜è®¤ 64KBï¼‰ã€‚ä¸æ‰§è¡Œç‰©ç†è½ç›˜ï¼ˆ<code>fsyncSync</code>ï¼‰ï¼Œè¿›ç¨‹æ¶ˆå¤±æ—¶å†…å­˜é‡Œçš„æ®‹ç•™æ•°æ®ä¼šè¢«ä¸¢å¼ƒã€‚</li>
<li><strong>éä¾µå…¥å¼æ¸…ç†</strong>ï¼šä¸¥ç¦åœ¨ä¿¡å·ç›‘å¬å™¨é‡Œç¡¬ç¼–ç Â <code>process.exit()</code>Â å¯¼è‡´â€œéœ¸æƒé€€å‡ºâ€ï¼Œåº”é‡‡ç”¨Â  <strong>â€œåŒæ­¥åˆ·ç›˜ + ä¿¡å·å½’è¿˜â€</strong> Â çš„ç¨³å¥æ–¹æ¡ˆã€‚</li>
</ol>
</blockquote>
<hr/>
<p>ä¸€ã€ è¿›ç¨‹å¼¥ç•™ä¹‹é™…ï¼Œæˆ‘ä»¬åœ¨æ¸…ç†ä»€ä¹ˆï¼Ÿ</p>
<p>å¾ˆå¤šå¼€å‘è€…ä¹ æƒ¯åœ¨è¿›ç¨‹é€€å‡ºæ—¶å¿™ç€å°†å¯¹è±¡ç½®ç©ºã€æ¸…ç©º Mapã€‚è¯·åœæ­¢è¿™ç§æ— æ•ˆåŠ³åŠ¨ã€‚</p>
<p>è¿›ç¨‹é€€å‡ºåï¼Œæ“ä½œç³»ç»Ÿä¼šå¼ºåˆ¶å›æ”¶æ‰€æœ‰ç‰©ç†å†…å­˜ã€‚æˆ‘ä»¬çœŸæ­£å…³å¿ƒçš„æ˜¯é‚£äº›Â  <strong>â€œæ“ä½œç³»ç»Ÿæ— æ³•è‡ªåŠ¨æ”¶å°¾â€</strong> Â çš„æ•°æ®ï¼š<strong>åº”ç”¨å±‚ç¼“å†²åŒºã€‚</strong></p>
<p>Node.js çš„æ–‡ä»¶å†™å…¥æµï¼ˆ<code>fs.WriteStream</code>ï¼‰ä¸ºäº†æ€§èƒ½ï¼Œé»˜è®¤ä¼šæœ‰ 64KB çš„ç¼“å†²åŒºã€‚å½“ä½ è°ƒç”¨Â <code>write()</code>Â æ—¶ï¼Œæ•°æ®å¯èƒ½è¿˜åœç•™åœ¨ V8 å †å†…å­˜æˆ–å†…æ ¸ç¼“å†²åŒºä¸­ã€‚å¦‚æœè¿›ç¨‹æ­¤æ—¶çªç„¶æ¶ˆå¤±ï¼Œè¿™ 64KB çš„æ•°æ®ï¼ˆé€šå¸¸æ˜¯æœ€å…³é”®çš„æŠ¥é”™æ—¥å¿—ï¼‰å°±ä¼šç›´æ¥éšå†…å­˜ä¸€èµ·è’¸å‘ã€‚</p>
<hr/>
<p>äºŒã€ æ ¸å¿ƒäº‹ä»¶æ‹†è§£ï¼šè°æ‰æ˜¯çœŸæ­£çš„â€œä¸´ç»ˆå‘Šåˆ«â€ï¼Ÿ</p>
<p>å¤„ç†é€€å‡ºé€»è¾‘ä¸»è¦æ¶‰åŠä»¥ä¸‹ä¸¤ç±»äº‹ä»¶ï¼Œä½†å®ƒä»¬çš„æ€§è´¨æˆªç„¶ä¸åŒï¼š</p>
<p>1.Â <code>exit</code>Â äº‹ä»¶ (æœ€åçš„å½’å£)</p>
<ul>
<li><strong>ç‰¹æ€§</strong>ï¼šNode.js è¿›ç¨‹çš„â€œç»ˆç‚¹ç«™â€ï¼Œæ­¤æ—¶äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰å·²ç»åœæ­¢ã€‚</li>
<li><strong>å±€é™</strong>ï¼šç»å¯¹ä¸è¦å†™å¼‚æ­¥ä»£ç ã€‚æ¯”å¦‚è°ƒç”¨Â <code>stream.end()</code>ï¼Œå®ƒä¾èµ–äº‹ä»¶å¾ªç¯å»åˆ·æ–°ç¼“å†²åŒºï¼Œåœ¨Â <code>exit</code>Â äº‹ä»¶é‡Œå®ƒæ ¹æœ¬æ²¡æœºä¼šæ‰§è¡Œå®Œã€‚</li>
<li><strong>å”¯ä¸€è§£</strong>ï¼šå¿…é¡»ä½¿ç”¨åŸºäºæ–‡ä»¶æè¿°ç¬¦ï¼ˆFDï¼‰çš„åŒæ­¥ç³»ç»Ÿè°ƒç”¨Â <code>fs.fsyncSync(fd)</code>ã€‚</li>
</ul>
<p>2.Â <code>SIGINT</code>Â &amp;Â <code>SIGTERM</code>Â (å¤–éƒ¨çš„å…³é—­è¯·æ±‚)</p>
<ul>
<li><strong>ä¿¡å·ç‰¹æ€§</strong>ï¼š<code>SIGINT</code>ï¼ˆCtrl+Cï¼‰æˆ–Â <code>SIGTERM</code>ï¼ˆDocker/K8s åœæœºï¼‰é»˜è®¤ä¼šä½¿è¿›ç¨‹é—ªé€€ï¼Œä¸”<strong>ä¸ä¼š</strong>ä¸»åŠ¨è§¦å‘Â <code>exit</code>Â äº‹ä»¶ã€‚</li>
<li><strong>åŠ«æŒæ•ˆåº”</strong>ï¼šä¸€æ—¦ä½ ç›‘å¬äº†è¿™äº›ä¿¡å·ï¼ŒNode.js çš„é»˜è®¤é€€å‡ºè¡Œä¸ºä¼šè¢«æ‹¦æˆªã€‚å¦‚æœå¤„ç†ä¸å½“ï¼Œè¿›ç¨‹ä¼šâ€œè‹Ÿæ´»â€åœ¨åå°å˜æˆåƒµå°¸è¿›ç¨‹ã€‚</li>
</ul>
<hr/>
<p>ä¸‰ã€ å·¥ä¸šçº§æ–¹æ¡ˆï¼šå®ç° 100% æ—¥å¿—å®Œæ•´æ€§</p>
<p>ä¸ºäº†ç¡®ä¿æœ€åä¸€è¡Œæ—¥å¿—ä¸ä¸¢å¤±ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—æ—¢èƒ½â€œè½ç›˜â€åˆä¸â€œä¾µå…¥â€çš„æ¸…ç†é€»è¾‘ã€‚</p>
<ol>
<li>éä¾µå…¥å¼ç›‘å¬ï¼šåªè´Ÿè´£ä¿å‘½ï¼Œä¸æŠ¢å¤ºæ§åˆ¶æƒ</li>
</ol>
<p>ä¸è¦åœ¨ä¿¡å·ç›‘å¬å™¨é‡Œå†™Â <code>process.exit()</code>ã€‚è¿™ä¼šæˆªæ–­å…¶ä»–æ¨¡å—ï¼ˆå¦‚æ•°æ®åº“è¿æ¥æ± ã€æ¡†æ¶é”€æ¯é’©å­ï¼‰çš„æ¸…ç†é€»è¾‘ã€‚æ¨èä½¿ç”¨Â <code>once</code>Â ç›‘å¬å¹¶æ‰§è¡ŒåŒæ­¥åˆ·ç›˜ã€‚</p>
<pre><code class="hljs language-Typescirpt" lang="Typescirpt">const flushLogsSync = () =&gt; {
  // æ ¸å¿ƒï¼šéå†æ‰€æœ‰æ—¥å¿—æµï¼Œæ‰§è¡ŒåŒæ­¥ç‰©ç†è½ç›˜
  for (const stream of logStreamMap.values()) {
    try {
      // æ£€æŸ¥æµæ˜¯å¦æŒæœ‰ç‰©ç†æ–‡ä»¶å¥æŸ„ (fd)
      if (typeof stream.fd === "number") {
        // å¼ºåˆ¶å†…æ ¸å°†æ–‡ä»¶ç¼“å†²åŒºæ•°æ®ç‰©ç†å†™å…¥ç£ç›˜
        fs.fsyncSync(stream.fd);
      }
    } catch (e) {}
  }
};

// ç›‘å¬ä¸€æ¬¡æ€§é€€å‡ºä¿¡å·
['SIGTERM', 'SIGINT'].forEach(signal =&gt; {
  process.once(signal, () =&gt; {
    flushLogsSync();
    // é€»è¾‘æ‰§è¡Œå®Œåï¼Œè‹¥æ— å…¶ä»–å¼‚æ­¥ä»»åŠ¡ï¼Œè¿›ç¨‹å°†æŒ‰ Node.js æœºåˆ¶è‡ªç„¶é€€å‡º
    // è‹¥éœ€ç¡®ä¿ç»å¯¹é€€å‡ºï¼Œå¯åœ¨æ­¤å¤„æ ¹æ®ä¸šåŠ¡ä¼˜å…ˆçº§å†³å®šæ˜¯å¦è¡¥å…… process.exit()
  });
});

// ç›‘å¬ Node.js è‡ªç„¶é€€å‡ºäº‹ä»¶ï¼ˆæœ€åçš„åŒæ­¥å…œåº•ï¼‰
process.once("exit", flushLogsSync);
</code></pre>
<ol start="2">
<li>é’ˆå¯¹â€œæ‰‹åŠ¨å­˜æ¡£â€çš„ç‰¹æ®Šå¤„ç†</li>
</ol>
<p>åœ¨ä¸é€€å‡ºè¿›ç¨‹çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä½ å¸Œæœ›æ‰‹åŠ¨å¼ºåˆ¶è½ç›˜ï¼ˆå¦‚åº”å¯¹å®šæ—¶å¿«ç…§æˆ–çƒ­é‡è½½ï¼‰ï¼Œå¯ä»¥åˆ©ç”¨Â <code>SIGHUP</code>Â ä¿¡å·ï¼š</p>
<pre><code class="hljs language-Typescirpt" lang="Typescirpt">// é’ˆå¯¹â€œæ‰‹åŠ¨å­˜æ¡£â€çš„ç‰¹æ®Šå¤„ç† 
// ä½¿ç”¨ .on è€Œé .onceï¼Œå› ä¸ºçƒ­é‡è½½æˆ–æ‰‹åŠ¨å­˜æ¡£å¯èƒ½åœ¨ä¸€ä¸ªè¿›ç¨‹ç”Ÿå‘½å‘¨æœŸå†…å¤šæ¬¡è§¦å‘
process.on('SIGHUP', flushLogsSync);
</code></pre>
<hr/>
<p>å››ã€ æ€»ç»“ï¼šé€ è½®å­æ˜¯ä¸ºäº†çœ‹æ¸…è·¯</p>
<p>åœ¨ Node.js è¿›ç¨‹å…³é—­çš„ç¬é—´ï¼Œå¼‚æ­¥æ˜¯ä¸å¯é çš„ã€‚</p>
<ul>
<li><strong>é”™è¯¯åšæ³•</strong>ï¼šåœ¨Â <code>exit</code>Â é‡Œå†™Â <code>await</code>Â æˆ–å¼‚æ­¥çš„Â <code>stream.end()</code>ã€‚</li>
<li><strong>å·¥ä¸šåšæ³•</strong>ï¼š<strong>åŒæ­¥Â <code>fsyncSync</code>Â + å°Šé‡è¿›ç¨‹è‡ªç„¶ç”Ÿå‘½å‘¨æœŸã€‚</strong></li>
</ul>
<p>é€šè¿‡è¿™å¥—é€»è¾‘ï¼Œä½ æ‰èƒ½åœ¨è¿›ç¨‹æŒ‚æ‰çš„ç¬é—´ï¼ŒæŠŠå†…å­˜ä¸­çš„â€œé—è¨€â€å®‰å…¨å­˜å…¥ç£ç›˜ã€‚</p>
<hr/>
<p>ğŸ’¡ è¿›é˜¶æ€è€ƒï¼šåŸç”Ÿå®ç° vs å·¥ä¸šçº§æ—¥å¿—åº“</p>
<p>æœ¬æ–‡æ–¹æ¡ˆæ˜¯ä»åº•å±‚åŸç†å‡ºå‘ï¼Œå¸¦ä½ ææ¸…ä¸¢å¤±æ ¹æºã€‚åœ¨å¤æ‚çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®åœ¨ç†è§£åŸç†çš„åŸºç¡€ä¸Šé€‰æ‹©æˆç†Ÿçš„åº“ï¼š</p>
<ol>
<li><strong>Pino (æ€§èƒ½ç‹è€…)</strong> ï¼šNode.js æ€§èƒ½å¤©èŠ±æ¿ã€‚<strong>æ³¨æ„</strong>ï¼šPino v8+ å¼•å…¥äº† Worker Threads å¼‚æ­¥å†™å…¥æ¶æ„ã€‚åœ¨ 2026 å¹´çš„å®è·µä¸­ï¼Œè‹¥éœ€ç¡®ä¿é€€å‡ºæ—¶ä¸ä¸¢æ—¥å¿—ï¼Œåº”åœ¨ä¿¡å·å¤„ç†å™¨ä¸­é€šè¿‡Â <code>destination.flushSync()</code>Â æ‰‹åŠ¨åˆ·ç›˜ï¼Œè€Œæ— éœ€ç‰ºç‰²å¹³æ—¶çš„æ€§èƒ½ã€‚</li>
<li><strong>Winston</strong>ï¼šåŠŸèƒ½æœ€å…¨çš„â€œè€å“¥â€ã€‚æ”¯æŒå¤šç«¯ä¼ è¾“ï¼ˆTransportsï¼‰ï¼Œé€‚åˆéœ€è¦å°†æ—¥å¿—åŒæ—¶åˆ†å‘åˆ°æ§åˆ¶å°ã€æœ¬åœ°æ–‡ä»¶å’Œè¿œç¨‹ç›‘æ§ç³»ç»Ÿçš„åœºæ™¯ã€‚</li>
<li><strong>Bunyan</strong>ï¼šä¸»æ‰“ä¸¥æ ¼çš„ JSON ç»“æ„åŒ–ã€‚</li>
</ol>
<p><strong>æ€»ç»“ä¸€å¥è¯</strong>ï¼šç†è§£äº†æ–‡ä»¶æè¿°ç¬¦ï¼ˆFDï¼‰é‡å®šå‘å’Œç‰©ç†è½ç›˜ï¼Œä½ å°±èƒ½æ›´ä»å®¹åœ°é…ç½®è¿™äº›ä¸“ä¸šåº“ï¼Œç¡®ä¿æ¯ä¸€è¡Œæ—¥å¿—éƒ½èƒ½åœ¨è¿›ç¨‹â€œä¸´ç»ˆâ€å‰å®‰å…¨åˆ°å®¶ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€React-5/Lesson81(2025-12-23)ã€‘æ„å»ºä¸€ä¸ªå®Œæ•´çš„ React å¾…åŠäº‹é¡¹åº”ç”¨ï¼ˆTodo Appï¼‰ï¼šä»é›¶åˆ°æœ¬åœ°æŒä¹…åŒ–ğŸ“]]></title>    <link>https://juejin.cn/post/7601076976440180776</link>    <guid>https://juejin.cn/post/7601076976440180776</guid>    <pubDate>2026-01-31T15:46:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601076976440180776" data-draft-id="7601076976440164392" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€React-5/Lesson81(2025-12-23)ã€‘æ„å»ºä¸€ä¸ªå®Œæ•´çš„ React å¾…åŠäº‹é¡¹åº”ç”¨ï¼ˆTodo Appï¼‰ï¼šä»é›¶åˆ°æœ¬åœ°æŒä¹…åŒ–ğŸ“"/> <meta itemprop="keywords" content="React.js,å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-31T15:46:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jing_Rainbow"/> <meta itemprop="url" content="https://juejin.cn/user/1285809519198256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€React-5/Lesson81(2025-12-23)ã€‘æ„å»ºä¸€ä¸ªå®Œæ•´çš„ React å¾…åŠäº‹é¡¹åº”ç”¨ï¼ˆTodo Appï¼‰ï¼šä»é›¶åˆ°æœ¬åœ°æŒä¹…åŒ–ğŸ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1285809519198256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jing_Rainbow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T15:46:12.000Z" title="Sat Jan 31 2026 15:46:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ğŸ“åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼ŒReact ä»¥å…¶ç»„ä»¶åŒ–ã€å£°æ˜å¼å’Œé«˜æ•ˆæ›´æ–°çš„ç‰¹æ€§æˆä¸ºæ„å»ºç”¨æˆ·ç•Œé¢çš„é¦–é€‰æ¡†æ¶ä¹‹ä¸€ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥å‰–æä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€ç»“æ„æ¸…æ™°ã€å…·å¤‡æœ¬åœ°å­˜å‚¨èƒ½åŠ›çš„ <strong>React å¾…åŠäº‹é¡¹åº”ç”¨ï¼ˆTodo Appï¼‰</strong> çš„å®ç°ç»†èŠ‚ã€‚æˆ‘ä»¬å°†é€å±‚æ‹†è§£å…¶æ ¸å¿ƒç»„ä»¶ã€çŠ¶æ€ç®¡ç†é€»è¾‘ã€çˆ¶å­é€šä¿¡æœºåˆ¶ã€æ ·å¼å¤„ç†ä»¥åŠæ•°æ®æŒä¹…åŒ–ç­–ç•¥ï¼Œå¹¶è¡¥å……å¤§é‡ç›¸å…³çŸ¥è¯†ï¼Œå¸®åŠ©ä½ çœŸæ­£æŒæ¡ React åº”ç”¨çš„å¼€å‘èŒƒå¼ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ§© åº”ç”¨æ•´ä½“æ¶æ„æ¦‚è§ˆ</h2>
<p>è¯¥ Todo åº”ç”¨é‡‡ç”¨å…¸å‹çš„ <strong>å•é¡µåº”ç”¨ï¼ˆSPAï¼‰</strong> ç»“æ„ï¼Œä»¥ <code>App.jsx</code> ä½œä¸ºæ ¹ç»„ä»¶ï¼Œåè°ƒä¸‰ä¸ªä¸»è¦å­ç»„ä»¶ï¼š</p>
<ul>
<li><code>TodoInput.jsx</code>ï¼šè´Ÿè´£æ¥æ”¶ç”¨æˆ·è¾“å…¥å¹¶æ·»åŠ æ–°ä»»åŠ¡ã€‚</li>
<li><code>TodoList.jsx</code>ï¼šæ¸²æŸ“ä»»åŠ¡åˆ—è¡¨ï¼Œæ”¯æŒæ ‡è®°å®Œæˆä¸åˆ é™¤æ“ä½œã€‚</li>
<li><code>TodoStats.jsx</code>ï¼šå±•ç¤ºä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯ï¼Œå¹¶æä¾›â€œæ¸…é™¤å·²å®Œæˆâ€åŠŸèƒ½ã€‚</li>
</ul>
<p>æ•´ä¸ªåº”ç”¨çš„æ•°æ®æµéµå¾ª <strong>å•å‘æ•°æ®æµï¼ˆUnidirectional Data Flowï¼‰</strong> åŸåˆ™ï¼šæ‰€æœ‰çŠ¶æ€ï¼ˆ<code>todos</code> æ•°ç»„ï¼‰ç”±çˆ¶ç»„ä»¶ <code>App</code> é›†ä¸­ç®¡ç†ï¼Œå­ç»„ä»¶é€šè¿‡ <code>props</code> æ¥æ”¶æ•°æ®å’Œå›è°ƒå‡½æ•°ï¼Œå®ç°â€œåªè¯»æ•°æ® + ä¸ŠæŠ¥äº‹ä»¶â€çš„é€šä¿¡æ¨¡å¼ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ—ï¸ æ ¸å¿ƒç»„ä»¶è¯¦è§£</h2>
<h3 data-id="heading-2">ğŸ”¹ <code>App.jsx</code>ï¼šçŠ¶æ€ç®¡ç†ä¸­å¿ƒä¸ç”Ÿå‘½å‘¨æœŸåè°ƒè€…</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./styles/App.styl'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoInput</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TodoInput'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TodoList'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoStats</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TodoStats'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆå§‹åŒ– todos çŠ¶æ€ï¼Œä¼˜å…ˆä» localStorage è¯»å–</span>
  <span class="hljs-keyword">const</span> [todos, setTodos] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> saved = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'todos'</span>)
    <span class="hljs-keyword">return</span> saved ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(saved) : []
  })

  <span class="hljs-comment">// æ·»åŠ ä»»åŠ¡</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addTodo</span>(<span class="hljs-params">text</span>) {
    <span class="hljs-title function_">setTodos</span>([...todos, { <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(), text, <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span> }])
  }

  <span class="hljs-comment">// åˆ é™¤ä»»åŠ¡</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteTodo</span> = (<span class="hljs-params">id</span>) =&gt; {
    <span class="hljs-title function_">setTodos</span>(todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">id</span> !== id))
  }

  <span class="hljs-comment">// åˆ‡æ¢ä»»åŠ¡å®ŒæˆçŠ¶æ€</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTodo</span> = (<span class="hljs-params">id</span>) =&gt; {
    <span class="hljs-title function_">setTodos</span>(todos.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span>
      todo.<span class="hljs-property">id</span> === id ? { ...todo, <span class="hljs-attr">completed</span>: !todo.<span class="hljs-property">completed</span> } : todo
    ))
  }

  <span class="hljs-comment">// æ¸…é™¤æ‰€æœ‰å·²å®Œæˆä»»åŠ¡</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearCompleted</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setTodos</span>(todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> !todo.<span class="hljs-property">completed</span>))
  }

  <span class="hljs-comment">// è®¡ç®—æ´»è·ƒä¸å·²å®Œæˆä»»åŠ¡æ•°é‡</span>
  <span class="hljs-keyword">const</span> activeCount = todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> !todo.<span class="hljs-property">completed</span>).<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> completedCount = todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">completed</span>).<span class="hljs-property">length</span>;

  <span class="hljs-comment">// ç›‘å¬ todos å˜åŒ–ï¼ŒåŒæ­¥åˆ° localStorage</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'todos'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(todos))
  }, [todos])

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"todo-app"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>My Todo List<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoInput</span> <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{addTodo}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoList</span> <span class="hljs-attr">todos</span>=<span class="hljs-string">{todos}</span> <span class="hljs-attr">onDelete</span>=<span class="hljs-string">{deleteTodo}</span> <span class="hljs-attr">onToggle</span>=<span class="hljs-string">{toggleTodo}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoStats</span> 
        <span class="hljs-attr">total</span>=<span class="hljs-string">{todos.length}</span> 
        <span class="hljs-attr">active</span>=<span class="hljs-string">{activeCount}</span> 
        <span class="hljs-attr">completed</span>=<span class="hljs-string">{completedCount}</span> 
        <span class="hljs-attr">onClearCompleted</span>=<span class="hljs-string">{clearCompleted}</span> 
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>
</code></pre>
<h4 data-id="heading-3">ğŸ“Œ å…³é”®çŸ¥è¯†ç‚¹è¡¥å……ï¼š</h4>
<ul>
<li>
<p><strong><code>useState</code> çš„æƒ°æ€§åˆå§‹åŒ–ï¼ˆLazy Initializationï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> { ... })
</code></pre>
<p>è¿™ç§å†™æ³•ç¡®ä¿åˆå§‹åŒ–å‡½æ•°åªåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œé¿å…ä¸å¿…è¦çš„è®¡ç®—ã€‚è¿™å¯¹äºä» <code>localStorage</code> è¯»å–æ•°æ®éå¸¸æœ‰ç”¨ã€‚</p>
</li>
<li>
<p><strong>ä¸å¯å˜æ€§ï¼ˆImmutabilityï¼‰åŸåˆ™</strong>ï¼š<br/>
æ‰€æœ‰çŠ¶æ€æ›´æ–°éƒ½ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰æˆ–æ•°ç»„æ–¹æ³•ï¼ˆ<code>filter</code>, <code>map</code>ï¼‰åˆ›å»ºæ–°æ•°ç»„ï¼Œè€Œéç›´æ¥ä¿®æ”¹åŸæ•°ç»„ã€‚è¿™æ˜¯ React çŠ¶æ€æ›´æ–°çš„æ ¸å¿ƒè¦æ±‚ï¼Œç¡®ä¿ç»„ä»¶èƒ½æ­£ç¡®å“åº”å˜åŒ–ã€‚</p>
</li>
<li>
<p><strong><code>useEffect</code> ä¸å‰¯ä½œç”¨ç®¡ç†</strong>ï¼š<br/>
<code>useEffect</code> åœ¨æ¯æ¬¡ <code>todos</code> å˜åŒ–åè‡ªåŠ¨å°†æ•°æ®åºåˆ—åŒ–å¹¶å­˜å…¥ <code>localStorage</code>ï¼Œå®ç°<strong>æœ¬åœ°æŒä¹…åŒ–</strong>ã€‚ä¾èµ–æ•°ç»„ <code>[todos]</code> ç¡®ä¿ä»…åœ¨ <code>todos</code> æ”¹å˜æ—¶è§¦å‘ã€‚</p>
</li>
<li>
<p><strong>è®¡ç®—å±æ€§</strong>ï¼š<br/>
<code>activeCount</code> å’Œ <code>completedCount</code> æ˜¯æ´¾ç”ŸçŠ¶æ€ï¼ˆDerived Stateï¼‰ï¼Œæ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°è®¡ç®—ï¼Œæ— éœ€å•ç‹¬ç”¨ <code>useState</code> ç®¡ç†ï¼Œç¬¦åˆ React æœ€ä½³å®è·µã€‚</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-4">ğŸ”¹ <code>TodoInput.jsx</code>ï¼šå—æ§ç»„ä»¶ä¸è¡¨å•å¤„ç†</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoInput</span> = (<span class="hljs-params">props</span>) =&gt; {
  <span class="hljs-keyword">const</span> { onAdd } = props;
  <span class="hljs-keyword">const</span> [inputValue, setInputValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = e =&gt; {
    e.<span class="hljs-title function_">preventDefault</span>()
    <span class="hljs-keyword">if</span> (inputValue.<span class="hljs-title function_">trim</span>() !== <span class="hljs-string">''</span>) {
      <span class="hljs-title function_">onAdd</span>(inputValue)
      <span class="hljs-title function_">setInputValue</span>(<span class="hljs-string">''</span>)
    }
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"todo-input"</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
        <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
        <span class="hljs-attr">value</span>=<span class="hljs-string">{inputValue}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setInputValue(e.target.value.replace(/\s+/g, '').trim())}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TodoInput</span>
</code></pre>
<h4 data-id="heading-5">ğŸ“Œ å…³é”®çŸ¥è¯†ç‚¹è¡¥å……ï¼š</h4>
<ul>
<li><strong>å—æ§ç»„ä»¶ï¼ˆControlled Componentï¼‰</strong> ï¼š<br/>
<code>&lt;input&gt;</code> çš„å€¼ç”± React çŠ¶æ€ <code>inputValue</code> æ§åˆ¶ï¼Œä»»ä½•ç”¨æˆ·è¾“å…¥éƒ½é€šè¿‡ <code>onChange</code> äº‹ä»¶å¤„ç†å™¨æ›´æ–°çŠ¶æ€ï¼Œå®ç° <strong>å•å‘æ•°æ®ç»‘å®š</strong>ã€‚è¿™ä¸ Vue çš„ <code>v-model</code> åŒå‘ç»‘å®šä¸åŒï¼Œä½†æ›´ç¬¦åˆ React çš„å£°æ˜å¼ç†å¿µã€‚</li>
<li><strong>è¡¨å•æäº¤å¤„ç†</strong>ï¼š<br/>
ä½¿ç”¨ <code>&lt;form&gt;</code> çš„ <code>onSubmit</code> äº‹ä»¶è€ŒéæŒ‰é’®çš„ <code>onClick</code>ï¼Œå¯æ”¯æŒå›è½¦é”®æäº¤ï¼Œå¹¶é€šè¿‡ <code>e.preventDefault()</code> é˜»æ­¢é¡µé¢åˆ·æ–°ã€‚</li>
<li><strong>è¾“å…¥æ¸…ç†é€»è¾‘</strong>ï¼š<br/>
<code>e.target.value.replace(/\s+/g, '').trim()</code> ä¼šç§»é™¤æ‰€æœ‰ç©ºç™½å­—ç¬¦ï¼ˆåŒ…æ‹¬ä¸­é—´ç©ºæ ¼ï¼‰ï¼Œè¿™å¯èƒ½æ˜¯ä¸ºäº†å¼ºåˆ¶è¾“å…¥ä¸ºè¿ç»­å­—ç¬¦ä¸²ã€‚ä½†åœ¨å®é™… Todo åº”ç”¨ä¸­ï¼Œé€šå¸¸åªéœ€ <code>.trim()</code> å»é™¤é¦–å°¾ç©ºæ ¼å³å¯ä¿ç•™ä¸­é—´ç©ºæ ¼ï¼ˆå¦‚ â€œBuy milk and eggsâ€ï¼‰ã€‚æ­¤å¤„é€»è¾‘ç•¥æ˜¾æ¿€è¿›ï¼Œå¯æ ¹æ®éœ€æ±‚è°ƒæ•´ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">ğŸ”¹ <code>TodoList.jsx</code>ï¼šåˆ—è¡¨æ¸²æŸ“ä¸äº¤äº’</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoList</span> = (<span class="hljs-params">props</span>) =&gt; {
  <span class="hljs-keyword">const</span> { todos, onDelete, onToggle } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"todo-list"</span>&gt;</span>
      { todos.length === 0 ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"empty"</span>&gt;</span>No todos yet!<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      ) : (
        todos.map(todo =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{todo.completed</span> ? '<span class="hljs-attr">completed</span>' <span class="hljs-attr">:</span> ''}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
                <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> 
                <span class="hljs-attr">checked</span>=<span class="hljs-string">{todo.completed}</span>
                <span class="hljs-attr">onChange</span>=<span class="hljs-string">{()</span> =&gt;</span> onToggle(todo.id)} 
              /&gt;
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{todo.text}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onDelete(todo.id)}&gt;ğŸ’©<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        ))
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TodoList</span>
</code></pre>
<h4 data-id="heading-7">ğŸ“Œ å…³é”®çŸ¥è¯†ç‚¹è¡¥å……ï¼š</h4>
<ul>
<li><strong>åˆ—è¡¨æ¸²æŸ“ä¸ Key å±æ€§</strong>ï¼š<br/>
<code>key={todo.id}</code> æ˜¯ React è¯†åˆ«åˆ—è¡¨é¡¹èº«ä»½çš„å…³é”®ã€‚ä½¿ç”¨ <code>Date.now()</code> ä½œä¸º ID è™½ç®€å•ï¼Œä½†åœ¨é«˜é¢‘æ·»åŠ æ—¶å¯èƒ½å†²çªï¼ˆæ¯«ç§’çº§ç²¾åº¦ä¸è¶³ï¼‰ã€‚ç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨æ›´å¯é çš„å”¯ä¸€ ID ç”Ÿæˆæ–¹æ¡ˆï¼ˆå¦‚ <code>uuid</code> åº“ï¼‰ã€‚</li>
<li><strong>æ¡ä»¶æ¸²æŸ“</strong>ï¼š<br/>
ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦æ ¹æ® <code>todos.length</code> å†³å®šæ˜¾ç¤ºç©ºçŠ¶æ€è¿˜æ˜¯ä»»åŠ¡åˆ—è¡¨ã€‚</li>
<li><strong>æ ·å¼åŠ¨æ€ç»‘å®š</strong>ï¼š<br/>
<code>className={todo.completed ? 'completed' : ''}</code> æ ¹æ®ä»»åŠ¡çŠ¶æ€åŠ¨æ€æ·»åŠ  CSS ç±»ï¼Œé…åˆæ ·å¼è¡¨å®ç°è§†è§‰åé¦ˆï¼ˆå¦‚åˆ’çº¿ã€é€æ˜åº¦é™ä½ç­‰ï¼‰ã€‚</li>
<li><strong>äº‹ä»¶å¤„ç†å™¨å†…è” vs æå‰å®šä¹‰</strong>ï¼š<br/>
æ­¤å¤„ä½¿ç”¨å†…è”ç®­å¤´å‡½æ•° <code>() =&gt; onToggle(todo.id)</code>ï¼Œç®€æ´ä½†å¯èƒ½å½±å“æ€§èƒ½ï¼ˆæ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°å‡½æ•°ï¼‰ã€‚å¯¹äºå¤§å‹åˆ—è¡¨ï¼Œå¯è€ƒè™‘ä½¿ç”¨ <code>useCallback</code> ä¼˜åŒ–ï¼Œä½†æœ¬åº”ç”¨è§„æ¨¡å°ï¼Œå½±å“å¯å¿½ç•¥ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">ğŸ”¹ <code>TodoStats.jsx</code>ï¼šçŠ¶æ€å±•ç¤ºä¸æ¡ä»¶æ¸²æŸ“</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoStats</span> = (<span class="hljs-params">props</span>) =&gt; {
  <span class="hljs-keyword">const</span> { total, active, completed, onClearCompleted } = props
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Total: {total} | Active: {active} | Completed: {completed}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      { completed &gt; 0 &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClearCompleted}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"clear-btn"</span>&gt;</span>
          Clear Completed
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TodoStats</span>
</code></pre>
<h4 data-id="heading-9">ğŸ“Œ å…³é”®çŸ¥è¯†ç‚¹è¡¥å……ï¼š</h4>
<ul>
<li><strong>çŸ­è·¯æ±‚å€¼ï¼ˆShort-circuit Evaluationï¼‰</strong> ï¼š<br/>
<code>{ completed &gt; 0 &amp;&amp; &lt;button&gt;...</code> æ˜¯ React ä¸­å¸¸è§çš„æ¡ä»¶æ¸²æŸ“æŠ€å·§ã€‚å½“ <code>completed &gt; 0</code> ä¸º <code>true</code> æ—¶æ¸²æŸ“æŒ‰é’®ï¼Œå¦åˆ™æ¸²æŸ“ <code>false</code>ï¼ˆReact ä¼šå¿½ç•¥ï¼‰ã€‚</li>
<li><strong>Props è§£æ„</strong>ï¼š<br/>
ä½¿ç”¨è§£æ„èµ‹å€¼ <code>const { total, active, ... } = props</code> æé«˜ä»£ç å¯è¯»æ€§ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ¨ æ ·å¼ä¸ä¸»é¢˜ï¼šCSS ä¸ Stylus çš„ç»“åˆ</h2>
<p>é¡¹ç›®åŒæ—¶ä½¿ç”¨äº†ï¼š</p>
<ul>
<li>
<p><strong><code>index.css</code></strong>ï¼šå…¨å±€æ ·å¼ï¼Œè®¾ç½®é¡µé¢å¸ƒå±€ã€å­—ä½“ã€é¢œè‰²æ–¹æ¡ˆåŠèƒŒæ™¯å›¾ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">display</span>: flex;
  place-items: center;
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">320px</span>;
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'./assets/react-beautiful.svg'</span>);
  <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<ul>
<li>åˆ©ç”¨ <code>prefers-color-scheme</code> åª’ä½“æŸ¥è¯¢å®ç°<strong>æ·±è‰²/æµ…è‰²ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢</strong>ã€‚</li>
<li><code>place-items: center</code> æ˜¯ <code>align-items</code> å’Œ <code>justify-items</code> çš„ç®€å†™ï¼Œç”¨äº Flex å®¹å™¨å±…ä¸­ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>App.styl</code></strong>ï¼ˆæœªæä¾›å†…å®¹ï¼Œä½†è¢«å¼•å…¥ï¼‰ï¼š<br/>
ä½¿ç”¨ <strong>Stylus</strong> é¢„å¤„ç†å™¨ç¼–å†™ç»„ä»¶å±€éƒ¨æ ·å¼ã€‚Stylus è¯­æ³•ç®€æ´ï¼Œæ”¯æŒåµŒå¥—ã€å˜é‡ã€æ··å…¥ç­‰ç‰¹æ€§ï¼Œæå‡ CSS å¯ç»´æŠ¤æ€§ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-11">âš™ï¸ é¡¹ç›®åˆå§‹åŒ–ä¸æ„å»ºå·¥å…·é“¾</h2>
<p>æ ¹æ® <code>README.md</code> æè¿°ï¼Œé¡¹ç›®ä½¿ç”¨ <strong>Vite</strong> åˆå§‹åŒ–ï¼š</p>
<pre><code class="hljs language-md" lang="md">npm init vite
<span class="hljs-section"># é€‰æ‹© react + javascript æ¨¡æ¿</span>
npm i stylus  # å®‰è£… Stylus é¢„å¤„ç†å™¨æ”¯æŒ
</code></pre>
<p>Vite æä¾›æé€Ÿçš„å†·å¯åŠ¨å’Œçƒ­æ›´æ–°ï¼ˆHMRï¼‰ï¼Œæå¤§æå‡å¼€å‘ä½“éªŒã€‚é…åˆ React çš„æ¨¡å—åŒ–å¼€å‘ï¼Œå½¢æˆé«˜æ•ˆçš„å·¥ä½œæµã€‚</p>
<hr/>
<h2 data-id="heading-12">ğŸ”„ æ•°æ®æŒä¹…åŒ–ï¼š<code>localStorage</code> çš„å·§å¦™è¿ç”¨</h2>
<p>åº”ç”¨é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°æ•°æ®æŒä¹…åŒ–ï¼š</p>
<ol>
<li>
<p><strong>åˆå§‹åŒ–æ—¶è¯»å–</strong>ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> saved = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'todos'</span>)
  <span class="hljs-keyword">return</span> saved ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(saved) : []
})
</code></pre>
</li>
<li>
<p><strong>çŠ¶æ€å˜æ›´æ—¶å†™å…¥</strong>ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'todos'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(todos))
}, [todos])
</code></pre>
</li>
</ol>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š<code>localStorage</code> åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œå› æ­¤éœ€ç”¨ <code>JSON.stringify</code> å’Œ <code>JSON.parse</code> è¿›è¡Œåºåˆ—åŒ–/ååºåˆ—åŒ–ã€‚</p>
</blockquote>
<p>è¿™ç§æ–¹æ¡ˆç®€å•æœ‰æ•ˆï¼Œé€‚ç”¨äºå°å‹åº”ç”¨ã€‚å¯¹äºå¤æ‚åº”ç”¨ï¼Œå¯è€ƒè™‘ IndexedDB æˆ–çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚ Redux + redux-persistï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-13">ğŸ§  è®¾è®¡æ¨¡å¼ä¸æœ€ä½³å®è·µæ€»ç»“</h2>
<ul>
<li><strong>å•ä¸€æ•°æ®æºï¼ˆSingle Source of Truthï¼‰</strong> ï¼šæ‰€æœ‰çŠ¶æ€é›†ä¸­åœ¨ <code>App</code> ç»„ä»¶ã€‚</li>
<li><strong>è‡ªä¸Šè€Œä¸‹çš„æ•°æ®æµ</strong>ï¼šçˆ¶ç»„ä»¶é€šè¿‡ <code>props</code> å‘ä¸‹ä¼ é€’æ•°æ®å’Œå‡½æ•°ã€‚</li>
<li><strong>å­ç»„ä»¶æ— çŠ¶æ€ï¼ˆDumb Componentsï¼‰</strong> ï¼š<code>TodoInput</code>ã€<code>TodoList</code>ã€<code>TodoStats</code> ä»…è´Ÿè´£ UI æ¸²æŸ“å’Œäº‹ä»¶ä¸ŠæŠ¥ã€‚</li>
<li><strong>ä¸å¯å˜æ›´æ–°</strong>ï¼šå§‹ç»ˆè¿”å›æ–°å¯¹è±¡/æ•°ç»„ï¼Œè€Œéä¿®æ”¹åŸæ•°æ®ã€‚</li>
<li><strong>å‰¯ä½œç”¨éš”ç¦»</strong>ï¼šä½¿ç”¨ <code>useEffect</code> å¤„ç†å‰¯ä½œç”¨ï¼ˆå¦‚ localStorage åŒæ­¥ï¼‰ã€‚</li>
<li><strong>è¯­ä¹‰åŒ– HTML</strong>ï¼šä½¿ç”¨ <code>&lt;form&gt;</code>, <code>&lt;label&gt;</code>, <code>&lt;input type="checkbox"&gt;</code> æå‡å¯è®¿é—®æ€§ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-14">âœ… ç»“è¯­</h2>
<p>è¿™ä¸ªçœ‹ä¼¼ç®€å•çš„ Todo åº”ç”¨ï¼Œå®åˆ™æ¶µç›–äº† React å¼€å‘çš„æ ¸å¿ƒæ¦‚å¿µï¼šç»„ä»¶åŒ–ã€çŠ¶æ€ç®¡ç†ã€äº‹ä»¶å¤„ç†ã€æ¡ä»¶æ¸²æŸ“ã€åˆ—è¡¨æ¸²æŸ“ã€è¡¨å•æ§åˆ¶ã€å‰¯ä½œç”¨ç®¡ç†ã€æœ¬åœ°å­˜å‚¨ä»¥åŠæ ·å¼å¤„ç†ã€‚é€šè¿‡æ·±å…¥ç†è§£æ¯ä¸€è¡Œä»£ç èƒŒåçš„åŸç†ï¼Œä½ ä¸ä»…èƒ½å¤ç°æ­¤åº”ç”¨ï¼Œæ›´èƒ½ä¸¾ä¸€åä¸‰ï¼Œæ„å»ºæ›´å¤æ‚çš„ React é¡¹ç›®ã€‚ğŸš€</p>
<p>ç°åœ¨ï¼Œæ‰“å¼€ä½ çš„ç¼–è¾‘å™¨ï¼ŒåŠ¨æ‰‹å®è·µå§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ThreeJSã€‘InstancedMesh å®æˆ˜ï¼šä»20000ä¸ªMeshåˆ°1ä¸ªDraw Call]]></title>    <link>https://juejin.cn/post/7601075423002984484</link>    <guid>https://juejin.cn/post/7601075423002984484</guid>    <pubDate>2026-01-31T15:51:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601075423002984484" data-draft-id="7600994087588904979" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ThreeJSã€‘InstancedMesh å®æˆ˜ï¼šä»20000ä¸ªMeshåˆ°1ä¸ªDraw Call"/> <meta itemprop="keywords" content="three.js"/> <meta itemprop="datePublished" content="2026-01-31T15:51:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¶æ™ºè¾½"/> <meta itemprop="url" content="https://juejin.cn/user/3320999244205294"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ThreeJSã€‘InstancedMesh å®æˆ˜ï¼šä»20000ä¸ªMeshåˆ°1ä¸ªDraw Call
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3320999244205294/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¶æ™ºè¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T15:51:35.000Z" title="Sat Jan 31 2026 15:51:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>å‰è¨€ï¼šä¸çŸ¥é“æœ‰æ²¡æœ‰å°ä¼™ä¼´è·Ÿæˆ‘ä¸€æ ·ï¼Œåˆšæ¥è§¦web3Dï¼Œæ¥è§¦ThreeJSï¼Œç„¶ååœ¨åšç±»ä¼¼æ™ºæ…§ç«™æˆ¿è¿™ç§é¡¹ç›®çš„æ—¶å€™ï¼Œå…´è‡´å†²å†²çš„æŠŠè®¾å¤‡æ”¾è‡³åˆ°åœºæ™¯ï¼Œæ¯ä¸€ä¸ªè®¾å¤‡æ‘†æ”¾çš„ä½ç½®éƒ½æ°åˆ°å¥½å¤„ï¼ŒåŒ…æ‹¬ç®¡é“ï¼Œæµå‘åŠ¨ç”»ç­‰ç­‰ï¼Œè§‰å¾—è¿™æ ·åº”è¯¥å°±ä¸‡æ— ä¸€å¤±äº†ï¼Œç„¶è€Œå®é™…è¿è¡Œèµ·æ¥å´å‘ç°ï¼Œå§æ§½ï¼Œå¥½å¡ï¼ï¼ï¼</em></p>
<p>æ­£é¢˜ï¼š
å…³äºå¦‚ä½•ä¼˜åŒ–ThreeJSé‡Œè®¾å¤‡ä¸€å¤šå°±å¡çš„é—®é¢˜ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥è®²è®²â€œInstancedMeshâ€ï¼Œè¿™æ˜¯ThreeJSå®˜æ–¹çš„ä¸€ä¸ªAPIï¼Œå®˜æ–¹æ˜¯è¿™ä¹ˆæè¿°çš„ï¼š</p>
<blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªæ”¯æŒå®ä¾‹åŒ–æ¸²æŸ“çš„ç‰¹æ®Šç½‘æ ¼æ¨¡å‹ã€‚å¦‚æœæ‚¨éœ€è¦æ¸²æŸ“å¤§é‡å…·æœ‰ç›¸åŒå‡ ä½•ä½“å’Œæè´¨ä½†ä¸–ç•Œå˜æ¢ä¸åŒçš„å¯¹è±¡ï¼Œè¯·ä½¿ç”¨æ­¤ç±»ã€‚ä½¿ç”¨â€œInstancedMeshâ€æœ‰åŠ©äºå‡å°‘ç»˜åˆ¶è°ƒç”¨æ¬¡æ•°ï¼Œä»è€Œæé«˜åº”ç”¨ç¨‹åºçš„æ•´ä½“æ¸²æŸ“æ€§èƒ½ã€‚</p>
</blockquote>
<p>ä¸çŸ¥é“å¤§ä¼™æ‡µäº†æ²¡ï¼Œåæ­£æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™æè¿°çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯äº‘é‡Œé›¾é‡Œçš„ï¼Œä¸è¿‡ç°åœ¨æˆ‘è‡ªè®¤ä¸ºç®—æ˜¯æ¯”è¾ƒäº†è§£äº†ï¼Œå°±ç»™å¤§å®¶å¤§ç™½è¯ç¿»è¯‘ä¸€ä¸‹ï¼Œæ„æ€å°±æ˜¯ï¼šè¿™ä¸ªAPIå¯ä»¥è®©ä½ åœºæ™¯é‡Œçš„æ¨¡å‹æ— æŸå½±åˆ†èº«ï¼Œå°±æ˜¯ä¸è€—è´¹å¤šçš„æ€§èƒ½ï¼Œä½†èƒ½è®©åœºæ™¯é‡Œçš„æ¨¡å‹åˆ†èº«å¤šä¸ªå‡ºæ¥ï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯åƒé­”æ³•ä¸€æ ·ï¼Œé‚£å®ƒæ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p>
<p>è¿™æ—¶å€™å°±ä¸å¾—ä¸æ3dåœºæ™¯çš„ç»˜åˆ¶åŸç†äº†ï¼Œæˆ‘ç›¸ä¿¡å¤§éƒ¨åˆ†å°ä¼™ä¼´éƒ½çŸ¥é“æ˜¾å¡è¿™ä¸ªä¸œè¥¿ï¼Œä¹ŸçŸ¥é“å®ƒæ˜¯ç”¨æ¥ä¸ºç”µè„‘æ¸²æŸ“å›¾å½¢ï¼Œweb3då½“ç„¶ä¹Ÿæ˜¯é å®ƒæ¸²æŸ“ï¼Œä½†æ˜¯ï¼Œæˆ‘è¦è¯´ä½†æ˜¯äº†ï¼Œè™½ç„¶æ¸²æŸ“æ˜¯å®ƒæ¥åšï¼Œä½†åˆ«å¿˜äº†å’±ä»¬ç”µè„‘è€å¤§å“¥CPUå•Šï¼Œäº‹å®å°±æ˜¯ï¼Œåƒè¿™ç§åœºæ™¯å¤šä¸ªæ¨¡å‹å¡é¡¿çš„åŸå› ï¼Œå¯èƒ½ç“¶é¢ˆå¹¶ä¸åœ¨GPUèº«ä¸Šï¼Œè€Œæ˜¯CPUèº«ä¸Šï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯åˆè’™äº†ï¼Œæˆ‘å½“åˆäº†è§£åˆ°ä¹Ÿç–‘æƒ‘äº†ä¸€ä¸‹ï¼Œæˆ‘ç»™å¤§å®¶è¯´ä¸€ä¸‹ï¼Œå…¶å®åŸå› å¾ˆç®€å•</p>
<p>æ‰“ä¸ªæ¯”æ–¹ï¼ŒæŠŠCPUæ¯”ä½œä¸€å®¶é¤é¦†çš„æ¥å•æ’­æŠ¥å‘˜ï¼Œè€ŒGPUå°±æ˜¯åå¨æ¥å•çš„å¨å­ï¼Œä½†æ˜¯æ¥å•å‘˜åªæœ‰ä¸€ä¸ª(éœ€è¦å¤„ç†å„ç§å¤æ‚çš„è®¢å•ã€ä¼˜æƒ åˆ¸å åŠ ã€ä¼šå‘˜åˆ¤å®šã€é€€å•é€»è¾‘ã€åº“å­˜æ£€æŸ¥)ï¼Œè€Œå¨å­æœ‰å¾ˆå¤š(åªéœ€è¦å›ºå®šå‡ ä¸ªæ­¥éª¤ç‚’èœï¼Œå…¶å®ƒéƒ½ä¸ç”¨ç®¡)</p>
<p>ç°åœ¨åº—é‡Œæ¥äº†ä¸€ç™¾ä¸ªå®¢äººï¼Œè¿™äº›å®¢äººè¦çš„éƒ½æ˜¯è›‹ç‚’é¥­ï¼Œä½†æ¥å•å‘˜æ¯ä¸€å•éƒ½è·‘å»åå¨è¯´æœ‰ä¸€æ¡Œè¦è›‹ç‚’é¥­ï¼Œæœ‰ä¸€æ¡Œè¦è›‹ç‚’é¥­...ç›´åˆ°æ´¾å®Œè¿™ä¸€ç™¾æ¡Œè›‹ç‚’é¥­ï¼Œåœ¨å–Šçš„è¿‡ç¨‹ä¸­ï¼Œå…¶å®ƒå¨å­æ˜¯é—²ç€çš„çŠ¶æ€ï¼Œå› ä¸ºè¿˜æ²¡ç»™å®ƒæ´¾å•ï¼Œç°åœ¨å¤§ä¼™å‘ç°æœ‰å“ªé‡Œä¸å¤ªå¯¹åŠ²å—ï¼Ÿæ²¡é”™ï¼é‚£å°±æ˜¯ä¸ºä»€ä¹ˆæ¥å•å‘˜æ˜æ˜ä¸€ç™¾æ¡Œéƒ½æ˜¯åŒæ ·çš„èœï¼Œä½†ä¸ºä»€ä¹ˆè¦åˆ†ä¸€ç™¾æ¬¡æ´¾å•å‘¢ï¼Œä¸€æ¬¡æ´¾å®Œä¸è¡Œå—ï¼Œå˜¿å˜¿å˜¿ï¼Œè¿™æ—¶å€™å¦‚æœä½ ç”¨çš„æ˜¯æ™®é€šMeshï¼Œé‚£ä¹ˆç­”æ¡ˆå°±æ˜¯ä¸è¡Œï¼Œè¿™æ˜¯ç”±Meshè¿™ä¸ªAPIå†³å®šçš„</p>
<p>è¿™æ—¶å€™å°±è®²åˆ°äº†æˆ‘ä»¬ä»Šå¤©çš„ä¸»é¢˜ï¼ŒInstancedMeshï¼Œå®ƒå°±æ˜¯é‚£ä¸ªå¯¹è¿™ç§é‡å¤éœ€æ±‚æ›´ä¸“ä¸šçš„æ¥å•å‘˜ï¼Œæœ‰åæ¡Œè›‹ç‚’é¥­å®ƒå°±ä¼šç›´æ¥è·Ÿåå¨è¯´ç°åœ¨éœ€è¦ç‚’åæ¡Œè›‹ç‚’é¥­ï¼Œä¸ä¼šæ¥å›å»é€šçŸ¥ï¼Œè¿™æ ·åå¨å°±å¯ä»¥ç«åŠ›å…¨å¼€ï¼Œä¸€æ¬¡æ€§æŠŠåæ¡Œè›‹ç‚’é¥­éƒ½åšå¥½ï¼Œç°åœ¨æ˜ç™½ä¸ºä»€ä¹ˆæˆ‘è¯´ç“¶é¢ˆä¸åœ¨GPUä¸Šäº†å§ï¼Œ<strong>Three.jsçš„å¡é¡¿ï¼Œå¾€å¾€ä¸æ˜¯"æ˜¾å¡ä¸å¤Ÿå¥½"ï¼Œè€Œæ˜¯"CPUåœ¨ç–¯ç‹‚ä¼ è¯ï¼Œæ²¡è®©æ˜¾å¡æ»¡è´Ÿè·å¹²æ´»"ã€‚</strong></p>
<p>å¼€å§‹æˆ‘ä»¬ä»Šå¤©çš„å®éªŒï¼Œæˆ‘ç°åœ¨åˆ›å»ºäº†20000ä¸ªBoxMeshï¼Œå¸§æ•°åªæœ‰å¯æ€œçš„10fpsï¼Œè¦çŸ¥é“æˆ‘è¿™å¯æ˜¯rtx3080ï¼Œè¦æ˜¯æ˜¾å¡å·®ä¸€ç‚¹çš„ï¼Œæˆ‘éƒ½ä¸æ•¢æƒ³è±¡ã€‚ã€‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6111537b81c24ee190b91643d9bc0672~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770479494&amp;x-signature=y41UTbMtQ60P5W4hv%2BxUjcVNLKk%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>å¤§ä¼™ä¹Ÿå¯ä»¥å¤åˆ¶ä»¥ä¸‹ä»£ç è‡ªå·±å»è¯•è¯•è‡ªå·±çš„ç”µè„‘èƒ½è·‘å¤šå°‘FPSï¼Œå¯ä»¥æŠŠFPSæ‰“åœ¨è¯„è®ºåŒº</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-comment">// 200 ä¸ª boxï¼š200 åˆ— x 100 è¡Œï¼Œæ•´é½æ’åˆ—</span>
  <span class="hljs-keyword">const</span> cols = <span class="hljs-number">200</span>;
  <span class="hljs-keyword">const</span> rows = <span class="hljs-number">100</span>;
  <span class="hljs-keyword">const</span> spacing = <span class="hljs-number">1.3</span>;
  <span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(<span class="hljs-number">0.8</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">0.8</span>);
  <span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-number">0x00ff00</span> });

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; rows; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; cols; j++) {
      <span class="hljs-keyword">const</span> box = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material);
      box.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> = (j - cols / <span class="hljs-number">2</span> + <span class="hljs-number">0.5</span>) * spacing;
      box.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = (i - rows / <span class="hljs-number">2</span> + <span class="hljs-number">0.5</span>) * spacing;
      scene.<span class="hljs-title function_">add</span>(box);
    }
  }
</code></pre>
<p>æˆ‘ç›¸ä¿¡çœ‹åˆ°è¿™çš„å¤§ä¼™å¯¹äºæ€§èƒ½ä¼˜åŒ–éƒ½æœ‰ä¸€å®šçš„è¿½æ±‚ï¼Œå¯¹äºè¿™ç§æƒ…å†µæ˜¯å¾ˆéš¾å®¹å¿çš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨InstancedMeshå¼€å§‹ä¼˜åŒ–å®ƒäº†ï¼</p>
<p>æˆ‘å…ˆå–ä¸ªå…³å­ï¼Œç»™å¤§å®¶çœ‹çœ‹ä¼˜åŒ–åçš„æˆªå›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2584de6bd5024cbfb73a1aa61829c735~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770479494&amp;x-signature=WHZfLJ5iK6baY%2BSUGSL4jC%2F1ps8%3D" alt="image.png" loading="lazy"/></p>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>20000ä¸ªMesh</th><th>InstancedMesh</th><th>ä¼˜åŒ–å€æ•°</th></tr></thead><tbody><tr><td><strong>Draw Calls</strong></td><td>20000</td><td>1</td><td><strong>20000x</strong></td></tr><tr><td><strong>å¸§ç‡(FPS)</strong></td><td>10</td><td>144</td><td><strong>14x</strong></td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>~500MB+</td><td>~80MB</td><td><strong>6x</strong></td></tr><tr><td><strong>CPUå ç”¨</strong></td><td>90%</td><td>15%</td><td><strong>6x</strong></td></tr></tbody></table>
<p>æˆ‘å°±è¯´ä¸€å¥ï¼Œç‰›ä¸ç‰›ï¼åˆšåˆšåªæœ‰10fpsï¼Œæ²¡çœ¼çœ‹ï¼Œç°åœ¨ä¸€ä¸‹æŠŠæˆ‘æ˜¾ç¤ºå™¨çš„åˆ·æ–°ç‡è·‘æ»¡äº†ï¼Œ144FPSï¼Œå¹¶ä¸”ä»åŸæ¥20000çš„Draw Callï¼Œé™åˆ°äº†1Draw Callï¼Œä¹Ÿå°±æ˜¯è¯´æ¥å•å‘˜ä¸€æ¬¡æ€§è·Ÿåå¨è¯´è¦åšè¿™ä¹ˆå¤šä»½è›‹ç‚’é¥­ï¼Œç„¶ååå¨ç«åŠ›å…¨å¼€ï¼Œä¸€æ¬¡æ€§æå®šï¼</p>
<p>å¥½äº†ï¼Œé­”æœ¯æ€»æœ‰æ­ç§˜çš„é‚£å¤©ï¼Œä¸‹é¢å°±æ˜¯ä¼˜åŒ–åçš„ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-comment">// ---------- InstancedMeshï¼š200 åˆ— x 100 è¡Œ = 20000 ä¸ª boxï¼Œå•æ¬¡ draw call ----------</span>
  <span class="hljs-keyword">const</span> cols = <span class="hljs-number">200</span>;
  <span class="hljs-keyword">const</span> rows = <span class="hljs-number">100</span>;
  <span class="hljs-keyword">const</span> count = cols * rows;
  <span class="hljs-keyword">const</span> spacing = <span class="hljs-number">1.3</span>; <span class="hljs-comment">// å®ä¾‹ä¹‹é—´çš„é—´è·</span>
  <span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(<span class="hljs-number">0.8</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">0.8</span>);
  <span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-number">0x00ff00</span> });
  <span class="hljs-keyword">const</span> instancedMesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">InstancedMesh</span>(geometry, material, count);
  <span class="hljs-comment">// è®¾ç½®ä¸ºé™æ€ç»˜åˆ¶ï¼Œé¿å…æ¯å¸§æ›´æ–°å®ä¾‹çŸ©é˜µ</span>
  instancedMesh.<span class="hljs-property">instanceMatrix</span>.<span class="hljs-title function_">setUsage</span>(<span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">StaticDrawUsage</span>);
  <span class="hljs-keyword">const</span> matrix = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Matrix4</span>();
  <span class="hljs-keyword">const</span> position = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>();
  <span class="hljs-keyword">let</span> idx = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; rows; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; cols; j++) {
      <span class="hljs-comment">// ä»¥åœºæ™¯ä¸­å¿ƒä¸ºåŸç‚¹ï¼ŒæŒ‰è¡Œåˆ—å‡åŒ€æ’å¸ƒ</span>
      position.<span class="hljs-title function_">set</span>(
        (j - cols / <span class="hljs-number">2</span> + <span class="hljs-number">0.5</span>) * spacing,
        <span class="hljs-number">0</span>,
        (i - rows / <span class="hljs-number">2</span> + <span class="hljs-number">0.5</span>) * spacing
      );
      matrix.<span class="hljs-title function_">setPosition</span>(position);
      instancedMesh.<span class="hljs-title function_">setMatrixAt</span>(idx, matrix);
      idx++;
    }
  }
  <span class="hljs-comment">// æ›´æ–°åŒ…å›´çƒï¼Œä¾¿äºè§†é”¥å‰”é™¤ç­‰ä¼˜åŒ–</span>
  instancedMesh.<span class="hljs-title function_">computeBoundingSphere</span>();
  scene.<span class="hljs-title function_">add</span>(instancedMesh);
</code></pre>
<p>æœ‰å‡ ä¸ªæ˜æ˜¾çš„ä¸åŒï¼Œç¬¬ä¸€æ˜¯æ²¡æœ‰new meshè¿™ä¸ªç¯èŠ‚äº†ï¼Œå…³äºæ–°å¢meshéƒ½æ”¾åœ¨äº† <code>new THREE.InstancedMesh(geometry, material, count);</code> è¿™ä¸ª<code>count</code>å°±æ˜¯å‘Šè¯‰InstanceMeshéœ€è¦æ–°å¢å¤šå°‘ä¸ªMeshï¼Œç„¶ååœ¨éå†ä¹‹åæŠŠè¿™ä¸ªInstanceMeshæ·»åŠ åˆ°Sceneé‡Œï¼Œä¸­é—´çš„ç¯èŠ‚åªæ˜¯å†³å®šInstanceMeshé‡Œçš„Meshåº”è¯¥åœ¨ä»€ä¹ˆä½ç½®ã€‚</p>
<p>æˆ‘å†ç»™å¤§å®¶è®²å‡ ä¸ªInstanceMeshçš„å‘ï¼Œæ–°æ‰‹éå¸¸å®¹æ˜“å¿½ç•¥</p>
<h3 data-id="heading-0">1.åŠ¨æ€æ›´æ–°ä½ç½®çš„æ­£ç¡®å§¿åŠ¿</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é”™è¯¯ï¼šæ¯å¸§éƒ½è®¾ç½® needsUpdateï¼Œå¡æˆPPT</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">20000</span>; i++) {
    instancedMesh.<span class="hljs-title function_">setMatrixAt</span>(i, newMatrix); <span class="hljs-comment">// åˆ«åœ¨å¾ªç¯é‡Œå¹²è¿™ä¸ªï¼</span>
  }
  instancedMesh.<span class="hljs-property">instanceMatrix</span>.<span class="hljs-property">needsUpdate</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-title function_">requestAnimationFrame</span>(animate);
}

<span class="hljs-comment">// æ­£ç¡®ï¼šåªæ›´æ–°å˜åŒ–çš„ï¼Œä¸”è®¾ç½® DynamicDrawUsage</span>
instancedMesh.<span class="hljs-property">instanceMatrix</span>.<span class="hljs-title function_">setUsage</span>(<span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">DynamicDrawUsage</span>);
<span class="hljs-comment">// åªåœ¨æ•°æ®çœŸçš„å˜äº†æ‰ setMatrixAt + needsUpdate = true</span>
</code></pre>
<h3 data-id="heading-1">2.Raycaster(å°„çº¿) å’‹äº¤äº’InstanceMeshå®ä¾‹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> intersection = raycaster.<span class="hljs-title function_">intersectObject</span>(instancedMesh);
<span class="hljs-keyword">if</span> (intersection.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
  <span class="hljs-keyword">const</span> instanceId = intersection[<span class="hljs-number">0</span>].<span class="hljs-property">instanceId</span>;
  <span class="hljs-comment">// é«˜äº®è¯¥å®ä¾‹ï¼šéœ€è¦é…åˆ setColorAt</span>
  instancedMesh.<span class="hljs-title function_">setColorAt</span>(instanceId, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-number">0xff0000</span>));
  instancedMesh.<span class="hljs-property">instanceColor</span>.<span class="hljs-property">needsUpdate</span> = <span class="hljs-literal">true</span>;
}
</code></pre>
<h3 data-id="heading-2">3.dispose å†…å­˜æ³„æ¼ -----(è¿™ä¸ªä¸€å®šè¦é‡è§†ï¼Œæˆ‘æœ‰è¿‡å¾ˆæƒ¨ç—›çš„ç»å†....)</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶ä¸€å®šè¦ï¼š</span>
geometry.<span class="hljs-title function_">dispose</span>();
material.<span class="hljs-title function_">dispose</span>();
instancedMesh.<span class="hljs-title function_">dispose</span>(); <span class="hljs-comment">// é‡Šæ”¾GPUç¼“å†²åŒº</span>
scene.<span class="hljs-title function_">remove</span>(instancedMesh);
}
</code></pre>
<blockquote>
<p><strong>æ€»ç»“</strong>ï¼šInstancedMesh ä¸æ˜¯é­”æ³•ï¼Œå®ƒåªæ˜¯è®© CPU ä» <strong>"å‘äº†20000ä¸ªå¿«é€’åŒ…è£¹"</strong> ï¼ˆæ¯æ¬¡éƒ½è¦æ‰“åŒ…ã€è´´å•ã€å«è½¦ï¼‰å˜æˆäº† <strong>"å‘äº†ä¸€è½¦è´§"</strong> ï¼ˆæ•´è½¦ç›´è¾¾ï¼‰ã€‚åœ¨æ™ºæ…§ç«™æˆ¿ã€æ™ºæ…§å·¥å‚è¿™ç§ <strong>"è®¾å¤‡å¤šä½†å‹å·å°‘"</strong> çš„åœºæ™¯ï¼Œè¿™æ˜¯æ€§ä»·æ¯”æœ€é«˜çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚</p>
<p><strong>ä½†åˆ«æ€¥ç€èµ°</strong>â€”â€”å¦‚æœä½ çš„è®¾å¤‡éœ€è¦<strong>å„è‡ªä¸åŒçš„è´´å›¾</strong>ï¼ˆæ¯”å¦‚æ¯å°æœºå™¨æ˜¾ç¤ºä¸åŒçš„æ¸©åº¦æ•°å­—ï¼‰ï¼ŒInstancedMeshå°±åŠ›ä¸ä»å¿ƒäº†ã€‚è¿™æ—¶å€™è¯¥ç”¨ <strong>Texture Atlasï¼ˆçº¹ç†å›¾é›†ï¼‰</strong> è¿˜æ˜¯ <strong>åˆå¹¶å‡ ä½•ä½“ï¼ˆMergeGeometryï¼‰</strong> ï¼Ÿ</p>
<p>å…³æ³¨ä¸‹ç¯‡ï¼š <strong>ã€ThreeJSã€‘å¤šæè´¨è®¾å¤‡ä¼˜åŒ–ï¼šä¸€å¼ è´´å›¾ç®¡ç†1000ä¸ªè®¾å¤‡çš„ç‹¬ç«‹æ˜¾ç¤º</strong> ï¼Œå’±ä»¬ç»§ç»­æŠ˜è…¾æ€§èƒ½ä¼˜åŒ–ã€‚</p>
<p><strong>äº’åŠ¨</strong>ï¼šä½ çš„é¡¹ç›®æœ€å¤šæ¸²æŸ“è¿‡å¤šå°‘ä¸ªMeshï¼Ÿåœ¨è¯„è®ºåŒºæ™’æ™’å¸§ç‡ï¼Œçœ‹çœ‹è°çš„ä¼˜åŒ–æ›´ç‹ ğŸ˜</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>