<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[VonaJS: I18nå¦‚ä½•æ”¯æŒSwaggerå¤šè¯­è¨€]]></title>    <link>https://juejin.cn/post/7571378103281336326</link>    <guid>https://juejin.cn/post/7571378103281336326</guid>    <pubDate>2025-11-12T02:03:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571378103281336326" data-draft-id="7571306072424071210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VonaJS: I18nå¦‚ä½•æ”¯æŒSwaggerå¤šè¯­è¨€"/> <meta itemprop="keywords" content="TypeScript,Node.js,NestJS"/> <meta itemprop="datePublished" content="2025-11-12T02:03:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¿®æ°´å¤§å”"/> <meta itemprop="url" content="https://juejin.cn/user/1119781972622208"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VonaJS: I18nå¦‚ä½•æ”¯æŒSwaggerå¤šè¯­è¨€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1119781972622208/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¿®æ°´å¤§å”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:03:25.000Z" title="Wed Nov 12 2025 02:03:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>VonaJSæä¾›çš„I18næ”¯æŒæ¨¡å—åŒ–ä½“ç³»ã€‚æ¯ä¸ªä¸šåŠ¡æ¨¡å—éƒ½å¯ä»¥å•ç‹¬æä¾›è‡ªå·±çš„ I18n è¯­è¨€èµ„æºã€‚æˆ‘ä»¬å…ˆäº†è§£I18nçš„ä¸€èˆ¬ç”¨æ³•ï¼Œç„¶åå†çœ‹çœ‹å¦‚ä½•æ”¯æŒSwaggerå¤šè¯­è¨€</p>
<h2 data-id="heading-0">åˆå§‹åŒ–ä»£ç éª¨æ¶</h2>
<p>æˆ‘ä»¬å…ˆåœ¨æ¨¡å—<code>demo-student</code>ä¸­åˆå§‹åŒ–I18nçš„ä»£ç éª¨æ¶</p>
<h3 data-id="heading-1">1. Cliå‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash">$ vona :init:locale demo-student
</code></pre>
<h3 data-id="heading-2">2. èœå•å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash">å³é”®èœå• - [æ¨¡å—è·¯å¾„]: `Vona Init/Locale`
</code></pre>
<h2 data-id="heading-3">å®šä¹‰è¯­è¨€èµ„æº</h2>
<p>ä»¥æ¨¡å—<code>demo-student</code>ä¸ºä¾‹ï¼Œå®šä¹‰æ¨¡å—çš„è¯­è¨€èµ„æºï¼š</p>
<ul>
<li>è‹±æ–‡</li>
</ul>
<p><code>src/module/demo-student/src/config/locale/en-us.ts</code></p>
<pre><code class="hljs language-diff" lang="diff">export default {
<span class="hljs-addition">+ StudentName: 'Student Name',</span>
};
</code></pre>
<ul>
<li>ä¸­æ–‡</li>
</ul>
<p><code>src/module/demo-student/src/config/locale/zh-cn.ts</code></p>
<pre><code class="hljs language-diff" lang="diff">export default {
<span class="hljs-addition">+ StudentName: 'å­¦ç”Ÿåç§°',</span>
};
</code></pre>
<h2 data-id="heading-4">ä½¿ç”¨è¯­è¨€èµ„æº</h2>
<p>å¯ä»¥é€šè¿‡ Scope å®ä¾‹æä¾›çš„<code>locale</code>å¯¹è±¡è·å–æ¨¡å—çš„è¯­è¨€èµ„æºï¼Œæ”¯æŒç±»å‹åŒ–æç¤º</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ControllerStudent</span> {
  <span class="hljs-meta">@Web</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'test'</span>)
  <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// use current locale</span>
    <span class="hljs-keyword">const</span> message1 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-property">locale</span>.<span class="hljs-title class_">StudentName</span>();
    <span class="hljs-comment">// use locale en-us</span>
    <span class="hljs-keyword">const</span> message2 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-property">locale</span>.<span class="hljs-property">StudentName</span>.<span class="hljs-title function_">locale</span>(<span class="hljs-string">'en-us'</span>);
    <span class="hljs-comment">// use locale zh-cn</span>
    <span class="hljs-keyword">const</span> message3 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-property">locale</span>.<span class="hljs-property">StudentName</span>.<span class="hljs-title function_">locale</span>(<span class="hljs-string">'zh-cn'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message1, message2, message3);
  }
}  
</code></pre>
<h2 data-id="heading-5">è·¨æ¨¡å—ä½¿ç”¨è¯­è¨€èµ„æº</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ControllerStudent</span> {
  <span class="hljs-meta">@Web</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'test'</span>)
  <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// use current locale</span>
    <span class="hljs-keyword">const</span> message1 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$scope</span>.<span class="hljs-property">demoStudent</span>.<span class="hljs-property">locale</span>.<span class="hljs-title class_">StudentName</span>();
    <span class="hljs-comment">// use locale en-us</span>
    <span class="hljs-keyword">const</span> message2 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$scope</span>.<span class="hljs-property">demoStudent</span>.<span class="hljs-property">locale</span>.<span class="hljs-property">StudentName</span>.<span class="hljs-title function_">locale</span>(<span class="hljs-string">'en-us'</span>);
    <span class="hljs-comment">// use locale zh-cn</span>
    <span class="hljs-keyword">const</span> message3 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$scope</span>.<span class="hljs-property">demoStudent</span>.<span class="hljs-property">locale</span>.<span class="hljs-property">StudentName</span>.<span class="hljs-title function_">locale</span>(<span class="hljs-string">'zh-cn'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message1, message2, message3);
  }
}  
</code></pre>
<h2 data-id="heading-6">è¦†ç›–è¯­è¨€èµ„æº</h2>
<p>å¯ä»¥ä½¿ç”¨<code>é¡¹ç›®çº§åˆ«</code>çš„è¯­è¨€èµ„æºè¦†ç›–<code>æ¨¡å—çº§åˆ«</code>çš„è¯­è¨€èµ„æº</p>
<ul>
<li>è‹±æ–‡</li>
</ul>
<p><code>src/backend/config/locale/en-us.ts</code></p>
<pre><code class="hljs language-diff" lang="diff">export default {
  modules: {
<span class="hljs-addition">+   'demo-student': {</span>
<span class="hljs-addition">+     StudentName: 'Student Name!',</span>
<span class="hljs-addition">+   },</span>
  },
};
</code></pre>
<ul>
<li>ä¸­æ–‡</li>
</ul>
<p><code>src/backend/config/locale/zh-cn.ts</code></p>
<pre><code class="hljs language-diff" lang="diff">export default {
  modules: {
<span class="hljs-addition">+   'demo-student': {</span>
<span class="hljs-addition">+     StudentName: 'å­¦ç”Ÿåç§°!',</span>
<span class="hljs-addition">+   },</span>
  },
};
</code></pre>
<h2 data-id="heading-7">å½“å‰locale</h2>
<h3 data-id="heading-8">1. è·å–å½“å‰locale</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> locale = <span class="hljs-variable language_">this</span>.<span class="hljs-property">ctx</span>.<span class="hljs-property">locale</span>;
</code></pre>
<h3 data-id="heading-9">2. è®¾ç½®å½“å‰locale</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">ctx</span>.<span class="hljs-property">locale</span> = <span class="hljs-string">'en-us'</span>;
</code></pre>
<h3 data-id="heading-10">3. è·å–ç¼ºçœlocale</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> localeDefault = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$scope</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">config</span>.<span class="hljs-property">defaultLocale</span>;
</code></pre>
<h2 data-id="heading-11">è·å–å½“å‰localeçš„è§„åˆ™</h2>
<p>å½“ç”¨æˆ·è®¿é—®åç«¯ API æ—¶ï¼Œåç«¯ä¼šè‡ªåŠ¨æ ¹æ®è§„åˆ™è·å–å½“å‰ locale</p>
<h3 data-id="heading-12">1. æ¨¡å—é…ç½®</h3>
<p>I18n æ˜¯ç”±æ¨¡å— a-i18n æä¾›çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œå¯ä»¥åœ¨ App config ä¸­ä¿®æ”¹æ¨¡å—çš„é…ç½®ï¼š</p>
<p><code>src/backend/config/config/config.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// modules</span>
config.<span class="hljs-property">modules</span> = {
  <span class="hljs-string">'a-i18n'</span>: {
    <span class="hljs-attr">defaultLocale</span>: <span class="hljs-string">'en-us'</span>,
    <span class="hljs-attr">queryField</span>: <span class="hljs-string">'x-vona-locale'</span>,
    <span class="hljs-attr">headerField</span>: <span class="hljs-string">'x-vona-locale'</span>,
    <span class="hljs-attr">cookieField</span>: <span class="hljs-string">'locale'</span>,
  },
};
</code></pre>

























<table><thead><tr><th>åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>defaultLocale</td><td>Default locale</td></tr><tr><td>queryField</td><td>ä»request queryä¸­è·å–å½“å‰localeï¼Œquery keyé»˜è®¤ä¸º<code>x-vona-locale</code></td></tr><tr><td>headerField</td><td>ä»request headerä¸­è·å–å½“å‰localeï¼Œheader keyé»˜è®¤ä¸º<code>x-vona-locale</code></td></tr><tr><td>cookieField</td><td>ä»request cookieä¸­è·å–å½“å‰localeï¼Œcookie keyé»˜è®¤ä¸º<code>locale</code></td></tr></tbody></table>
<h3 data-id="heading-13">2. è§„åˆ™æ¬¡åº</h3>
<p>ç³»ç»ŸæŒ‰ä»¥ä¸‹æ¬¡åºï¼Œä¾æ¬¡åˆ¤æ–­å½“å‰ locale</p>
<p><code>queryField</code> &gt; <code>headerField</code> &gt; <code>cookieField</code> &gt; <code>Header: Accept-Language</code> &gt; <code>defaultLocale</code></p>
<h2 data-id="heading-14">æ·»åŠ æ–°è¯­è¨€</h2>
<p>VonaJS é»˜è®¤æä¾›äº†ä¸¤ä¸ªè¯­è¨€:<code>en-us</code>å’Œ<code>zh-cn</code>ã€‚ä¸‹é¢æ¼”ç¤ºå¦‚ä½•æ·»åŠ æ–°è¯­è¨€<code>zh-tw</code></p>
<h3 data-id="heading-15">1. æ·»åŠ ç±»å‹å®šä¹‰</h3>
<p>é‡‡ç”¨æ¥å£åˆå¹¶æœºåˆ¶æ·»åŠ æ–°è¯­è¨€çš„ç±»å‹å®šä¹‰</p>
<p>åœ¨ VSCode ç¼–è¾‘å™¨ä¸­ï¼Œè¾“å…¥ä»£ç ç‰‡æ®µ<code>recordlocale</code>ï¼Œè‡ªåŠ¨ç”Ÿæˆä»£ç éª¨æ¶:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">'vona'</span> {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ILocaleRecord</span> {
    : <span class="hljs-built_in">never</span>;
  }
}
</code></pre>
<p>è°ƒæ•´ä»£ç ï¼Œç„¶åæ·»åŠ <code>zh-tw</code></p>
<pre><code class="hljs language-diff" lang="diff">declare module 'vona' {
  export interface ILocaleRecord {
<span class="hljs-addition">+   'zh-tw': never;</span>
  }
}
</code></pre>
<h3 data-id="heading-16">2. æ·»åŠ è¯­è¨€èµ„æº</h3>
<p>æ–°å»ºè¯­è¨€æ–‡ä»¶<code>zh-tw.ts</code>ï¼Œç„¶åæ·»åŠ è¯­è¨€èµ„æº</p>
<p><code>src/module/demo-student/src/config/locale/zh-tw.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title class_">StudentName</span>: <span class="hljs-string">'å­¸ç”Ÿåç¨±'</span>,
};
</code></pre>
<h2 data-id="heading-17">å¤æ•°</h2>
<h3 data-id="heading-18">1. å®šä¹‰è¯­è¨€èµ„æº</h3>
<p><code>src/module/demo-student/src/config/locale/en-us.ts</code></p>
<pre><code class="hljs language-diff" lang="diff">export default {
<span class="hljs-addition">+ TestApples_: '%d apples',</span>
<span class="hljs-addition">+ TestApples_0: 'no apples',</span>
<span class="hljs-addition">+ TestApples_1: 'one apple',</span>
};
</code></pre>
<p><code>src/module/demo-student/src/config/locale/zh-cn.ts</code></p>
<pre><code class="hljs language-diff" lang="diff">export default {
<span class="hljs-addition">+ TestApples_: '%dä¸ªè‹¹æœ',</span>
<span class="hljs-addition">+ TestApples_0: 'æ²¡æœ‰è‹¹æœ',</span>
};
</code></pre>
<h3 data-id="heading-19">2. ä½¿ç”¨è¯­è¨€èµ„æº</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">ctx</span>.<span class="hljs-property">locale</span> = <span class="hljs-string">'en-us'</span>;
<span class="hljs-keyword">const</span> apple0 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-property">locale</span>.<span class="hljs-title class_">TestApples</span>_(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> apple1 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-property">locale</span>.<span class="hljs-title class_">TestApples</span>_(<span class="hljs-number">1</span>);
<span class="hljs-keyword">const</span> apple2 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-property">locale</span>.<span class="hljs-title class_">TestApples</span>_(<span class="hljs-number">2</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${apple0}</span>, <span class="hljs-subst">${apple1}</span>, <span class="hljs-subst">${apple2}</span>`</span>);
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">no apples, one apple, 2 apples
</code></pre>
<ul>
<li><code>TestApples_</code>: ç¼ºçœè¯­è¨€èµ„æºã€‚è¯­è¨€èµ„æºæ·»åŠ åç¼€<code>_</code>ï¼Œå¯ä»¥æç¤ºå¼€å‘è€…è¯¥è¯­è¨€èµ„æºéœ€è¦ä¼ å…¥å‚æ•°</li>
<li><code>TestApples_{n}</code>: å¯ä»¥é’ˆå¯¹ä»»ä½•å…·ä½“çš„<code>n</code>æä¾›ç‹¬ç«‹çš„è¯­è¨€èµ„æºã€‚ç³»ç»Ÿåœ¨è¿›è¡Œè¯­è¨€ç¿»è¯‘æ—¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°å…·ä½“<code>n</code>çš„è¯­è¨€èµ„æºï¼Œå°±ä½¿ç”¨ç¼ºçœè¯­è¨€èµ„æº<code>TestApples_</code></li>
</ul>
<h2 data-id="heading-20">å¤æ•°: å¤šå‚æ•°</h2>
<p>å¦‚æœè¯­è¨€èµ„æºæ”¯æŒå¤šå‚æ•°ï¼Œé‚£ä¹ˆå¯ä»¥æ˜ç¡®æŒ‡å®šå“ªä¸ªå‚æ•°æ”¯æŒå¤æ•°</p>
<h3 data-id="heading-21">1. å®šä¹‰è¯­è¨€èµ„æº</h3>
<p><code>src/module/demo-student/src/config/locale/en-us.ts</code></p>
<pre><code class="hljs language-diff" lang="diff">export default {
<span class="hljs-addition">+ TestNameApples_: '%s has %d apples',</span>
<span class="hljs-addition">+ TestNameApples_0_1: '%s has no apples',</span>
<span class="hljs-addition">+ TestNameApples_1_1: '%s has one apple',</span>
};
</code></pre>
<p><code>src/module/demo-student/src/config/locale/zh-cn.ts</code></p>
<pre><code class="hljs language-diff" lang="diff">export default {
<span class="hljs-addition">+ TestNameApples_: '%sæœ‰%dä¸ªè‹¹æœ',</span>
<span class="hljs-addition">+ TestNameApples_0_1: '%sæ²¡æœ‰è‹¹æœ',</span>
};
</code></pre>
<h3 data-id="heading-22">2. ä½¿ç”¨è¯­è¨€èµ„æº</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">ctx</span>.<span class="hljs-property">locale</span> = <span class="hljs-string">'en-us'</span>;
<span class="hljs-keyword">const</span> apple0 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-property">locale</span>.<span class="hljs-title class_">TestNameApples</span>_(<span class="hljs-string">'Tom'</span>, <span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> apple1 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-property">locale</span>.<span class="hljs-title class_">TestNameApples</span>_(<span class="hljs-string">'Tom'</span>, <span class="hljs-number">1</span>);
<span class="hljs-keyword">const</span> apple2 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-property">locale</span>.<span class="hljs-title class_">TestNameApples</span>_(<span class="hljs-string">'Tom'</span>, <span class="hljs-number">2</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${apple0}</span>, <span class="hljs-subst">${apple1}</span>, <span class="hljs-subst">${apple2}</span>`</span>);
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Tom has no apples, Tom has one apple, Tom has 2 apples
</code></pre>
<ul>
<li><code>TestNameApples_</code>: ç¼ºçœè¯­è¨€èµ„æºã€‚è¯­è¨€èµ„æºæ·»åŠ åç¼€<code>_</code>ï¼Œå¯ä»¥æç¤ºå¼€å‘è€…è¯¥è¯­è¨€èµ„æºéœ€è¦ä¼ å…¥å‚æ•°</li>
<li><code>TestNameApples_{n}_{ordinal}</code>: <code>ordinal</code>ä»£è¡¨å‚æ•°åºæ•°</li>
</ul>
<h2 data-id="heading-23">Swagger/Openapi</h2>
<p>VonaJS æä¾›äº†ä¸€ç»„å·¥å…·å‡½æ•°ï¼Œä¸º Swagger/Openapi å®ç° I18n å›½é™…åŒ–</p>
<p>æ¯”å¦‚ï¼Œä¸º<code>EntityStudent</code>çš„å­—æ®µ<code>name</code>æä¾›å›½é™…åŒ–çš„<code>title</code>ä¿¡æ¯</p>
<h3 data-id="heading-24">1. $localeScope</h3>
<p>åœ¨è®¾ç½®å­—æ®µ title ä¿¡æ¯æ—¶ï¼Œè¦ä½¿ç”¨<code>è¯­è¨€èµ„æºFullKey</code>ã€‚åœ¨å®é™…ç”Ÿæˆ Swagger/Openapi å…ƒæ•°æ®æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†<code>è¯­è¨€èµ„æºFullKey</code>ç¿»è¯‘ä¸ºæŒ‡å®šçš„è¯­è¨€</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ import { $localeScope } from 'vona';</span>

class EntityStudent {
<span class="hljs-addition">+ @Api.field(v.title($localeScope('demo-student', 'Name')))</span>
  name: string;
}
</code></pre>
<ul>
<li><code>v.title</code>: è®¾ç½® title ä¿¡æ¯</li>
<li><code>$localeScope</code>: ä¼ å…¥<code>æ¨¡å—åç§°</code>å’Œ<code>è¯­è¨€èµ„æºKey</code>ï¼Œä»è€Œç”Ÿæˆ<code>è¯­è¨€èµ„æºFullKey</code>: <code>demo-student::Name</code></li>
</ul>
<h3 data-id="heading-25">2. $locale</h3>
<p>VonaJS è¿˜æä¾›äº†ä¸€ä¸ªç®€åŒ–çš„å·¥å…·å‡½æ•°<code>$locale</code></p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ import { $locale } from '../.metadata/index.ts';</span>

class EntityStudent {
<span class="hljs-addition">+ @Api.field(v.title($locale('Name')))</span>
  name: string;
}
</code></pre>
<ul>
<li><code>$locale</code>: ä¼ å…¥<code>è¯­è¨€èµ„æºKey</code>ï¼Œä»è€Œç”Ÿæˆ<code>è¯­è¨€èµ„æºFullKey</code>: <code>demo-student::Name</code>
<ul>
<li>æ¯ä¸ªæ¨¡å—éƒ½æä¾›äº†<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>e</mi><mtext>å‡½æ•°ï¼Œå› æ­¤ï¼Œä½¿ç”¨æœ¬æ¨¡å—çš„</mtext></mrow><annotation encoding="application/x-tex">locale å‡½æ•°ï¼Œå› æ­¤ï¼Œä½¿ç”¨æœ¬æ¨¡å—çš„</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">oc</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">å‡½æ•°ï¼Œå› æ­¤ï¼Œä½¿ç”¨æœ¬æ¨¡å—çš„</span></span></span></span></span>locale å‡½æ•°å°±å¯ä»¥å–å¾—æ¨¡å—åç§°</li>
</ul>
</li>
</ul>
<h2 data-id="heading-26">èµ„æº</h2>
<ul>
<li>Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvonajs%2Fvona" target="_blank" title="https://github.com/vonajs/vona" ref="nofollow noopener noreferrer">github.com/vonajs/vona</a></li>
<li>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvona.js.org" target="_blank" title="https://vona.js.org" ref="nofollow noopener noreferrer">vona.js.org</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Claude Agent SDK å¼€å‘ä¸€ä¸ª Agent åŸæ¥è¿™ä¹ˆç®€å•]]></title>    <link>https://juejin.cn/post/7571372478803787791</link>    <guid>https://juejin.cn/post/7571372478803787791</guid>    <pubDate>2025-11-12T02:03:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571372478803787791" data-draft-id="7571372478803771407" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Claude Agent SDK å¼€å‘ä¸€ä¸ª Agent åŸæ¥è¿™ä¹ˆç®€å•"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Agent"/> <meta itemprop="datePublished" content="2025-11-12T02:03:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="liruifengvæç‘ä¸°"/> <meta itemprop="url" content="https://juejin.cn/user/237150239994471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Claude Agent SDK å¼€å‘ä¸€ä¸ª Agent åŸæ¥è¿™ä¹ˆç®€å•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/237150239994471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    liruifengvæç‘ä¸°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:03:17.000Z" title="Wed Nov 12 2025 02:03:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>æœ€è¿‘åœ¨å­¦ä¹  AI Agent å¼€å‘ï¼Œæœ¬æ–‡å°†ä½¿ç”¨ Claude Agent SDK çš„ TypeScript ç‰ˆæœ¬, æ„å»ºä¸€ä¸ª AI Agent Demoã€‚</p>
<p>å…¨éƒ¨ä»£ç åœ¨æˆ‘çš„ GitHub ä»“åº“ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliruifengv%2Fclaude-agent-demo" target="_blank" title="https://github.com/liruifengv/claude-agent-demo" ref="nofollow noopener noreferrer">liruifengv/claude-agent-demo</a>ã€‚</p>
<h2 data-id="heading-0">Claude Agent SDK ä»‹ç»</h2>
<p>Claude Agent SDK çš„å‰èº«æ˜¯ Claude Code SDKï¼Œæ˜¯ Claude Code çš„åº•å±‚æ¡†æ¶ï¼Œç°åœ¨æ”¹ä¸ºé€šç”¨çš„ Agent SDKï¼Œå…¶ä¸­å…·å¤‡äº† Claude Code æ‰€æ‹¥æœ‰çš„ä¸€äº›åŸºç¡€èƒ½åŠ›ï¼ŒåŒ…æ‹¬ä¸Šä¸‹æ–‡ç®¡ç†ï¼Œå†…ç½®ä¸°å¯Œçš„å·¥å…·ï¼Œæƒé™æ§åˆ¶ç­‰ï¼Œå¦‚æœä½ ä¹Ÿæƒ³æ„å»ºä¸€ä¸ª Agentï¼Œä½¿ç”¨è¿™ä¸ª SDK èƒ½å¿«é€Ÿæ­å»ºèµ·æ¥ã€‚æ›´å¤šè¯¦æƒ…è¯·çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.claude.com%2Fen%2Fdocs%2Fagent-sdk%2Foverview" target="_blank" title="https://docs.claude.com/en/docs/agent-sdk/overview" ref="nofollow noopener noreferrer">Claude Agent SDK çš„æ–‡æ¡£</a></p>
<h2 data-id="heading-1">ç¯å¢ƒé…ç½®</h2>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ä¸€ä¸ª Node.js çš„ç©ºé¡¹ç›®ã€‚</p>
<p>å…¶æ¬¡æ˜¯ç¯å¢ƒå˜é‡ï¼Œéœ€è¦é…ç½® Claude çš„æ¨¡å‹çš„ BASE_URL å’Œ API_KEY</p>
<p>ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>å¯ä»¥åœ¨ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡é‡Œé…ç½®ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">ANTHROPIC_BASE_URL=ANTHROPIC_BASE_URL
ANTHROPIC_API_KEY=ANTHROPIC_API_KEY
</code></pre>
<ul>
<li>æˆ–è€…åœ¨é¡¹ç›®çš„ <code>.env</code> æ–‡ä»¶ä¸­é…ç½®ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">ANTHROPIC_BASE_URL=ANTHROPIC_BASE_URL
ANTHROPIC_API_KEY=ANTHROPIC_API_KEY
</code></pre>
<p>ç„¶åå®‰è£… <code>@anthropic-ai/claude-agent-sdk</code> è¿™ä¸ª npm åŒ…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install @anthropic-ai/claude-agent-sdk
</code></pre>
<h2 data-id="heading-2">åŸºç¡€ç”¨æ³•</h2>
<p>é¦–å…ˆæ˜¯ <code>query</code> å‡½æ•°ï¼Œä»–æ˜¯è·Ÿ Agent äº¤äº’çš„ä¸»è¦å‡½æ•°ï¼Œç”¨äºå‘ Agent å‘é€è¯·æ±‚ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸‹ç”¨æ³•ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { query, <span class="hljs-title class_">Query</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@anthropic-ai/claude-agent-sdk"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">basicExample</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// query å‡½æ•°æ¥å—ä¸€ä¸ª prompt å‚æ•°</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Query</span> = <span class="hljs-title function_">query</span>({<span class="hljs-attr">prompt</span>: <span class="hljs-string">"ä½ å¥½"</span>})

    <span class="hljs-comment">// è¿™é‡Œä½¿ç”¨ for await of å¾ªç¯ result</span>
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> message <span class="hljs-keyword">of</span> result){
      <span class="hljs-comment">// message.type æœ‰å‡ ç§ï¼š'assistant', 'user', 'system', 'result' ç­‰</span>
      <span class="hljs-comment">// æ ¹æ®ä¸åŒçš„æ¶ˆæ¯ç±»å‹åšä¸šåŠ¡é€»è¾‘</span>
      <span class="hljs-keyword">switch</span> (message.<span class="hljs-property">type</span>){
        <span class="hljs-keyword">case</span> <span class="hljs-string">'assistant'</span>:
          <span class="hljs-comment">// message.message.content æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬å¾ªç¯æ‰€æœ‰çš„ msg</span>
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> msg <span class="hljs-keyword">of</span> message.<span class="hljs-property">message</span>.<span class="hljs-property">content</span>) {
            <span class="hljs-comment">// æ‰“å° text ç±»å‹çš„è¾“å‡º</span>
            <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">type</span> === <span class="hljs-string">"text"</span>) {
              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg.<span class="hljs-property">text</span>)
            }
          }
      }
    }
  }
</code></pre>
<p>åœ¨ <code>index.ts</code> ä¸­è°ƒç”¨ <code>basicExample</code> å‡½æ•°ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { basicExample } <span class="hljs-keyword">from</span> <span class="hljs-string">"./core/basic-example"</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Starting Claude Agent Demo...'</span>);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">basicExample</span>();
}

<span class="hljs-title function_">main</span>();
</code></pre>
<p>æ‰§è¡Œ <code>tsx src/index.ts</code></p>
<p>å¯ä»¥åœ¨ç»ˆç«¯çœ‹åˆ°</p>
<pre><code class="hljs language-bash" lang="bash">&gt; claude-agent-demo@1.0.0 dev
&gt; tsx src/index.ts

Starting Claude Agent Demo...
ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ï¼æˆ‘æ˜¯ Claudeï¼Œä¸€ä¸ª AI åŠ©æ‰‹ã€‚æˆ‘å¯ä»¥å¸®åŠ©ä½ ï¼š

- ç¼–å†™å’Œè°ƒè¯•ä»£ç 
- æœç´¢å’Œåˆ†æä»£ç åº“
- æ‰§è¡Œå‘½ä»¤å’Œè¿è¡Œè„šæœ¬
- ç®¡ç†æ–‡ä»¶å’Œé¡¹ç›®
- å›ç­”æŠ€æœ¯é—®é¢˜

æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ
</code></pre>
<h2 data-id="heading-3">Session ä¼šè¯ç®¡ç†</h2>
<p>Claude Agent SDK è‡ªå¸¦äº†ä¼šè¯ç®¡ç†åŠŸèƒ½ï¼Œå½“æ–°å»ºä¸€ä¸ª query æ—¶ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª session IDï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ª ID æ¥ä¿å­˜å’Œæ¢å¤ä¼šè¯ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å°† session ID å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œä»¥ä¾¿åœ¨ç”¨æˆ·ä¸‹æ¬¡ç™»å½•æ—¶æ¢å¤ä¼šè¯ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> {query, <span class="hljs-title class_">Query</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">"@anthropic-ai/claude-agent-sdk"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sessionExample</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>

    <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Query</span> = <span class="hljs-title function_">query</span>({
      <span class="hljs-attr">prompt</span>: <span class="hljs-string">"ä½ å¥½"</span>,
      <span class="hljs-attr">options</span>: {
        <span class="hljs-comment">// options çš„ resume å‚æ•°ä¼ å…¥è®°å½•çš„ sessionIdï¼Œå°±å¯ä»¥ç»§ç»­å¯¹è¯äº†</span>
          <span class="hljs-attr">resume</span>: sessionId
      }
  })

  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> message <span class="hljs-keyword">of</span> result) {
    <span class="hljs-keyword">switch</span> (message.<span class="hljs-property">type</span>) {
      <span class="hljs-comment">// message.type === 'assistant' &amp;&amp; message.subtype === 'init' çš„æ—¶å€™</span>
      <span class="hljs-comment">// ä¼šè¿”å›ä¸€ä¸ª session_idï¼Œéœ€è¦æŠŠè¿™ä¸ª session_id å­˜ä¸‹æ¥</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'system'</span>:
        <span class="hljs-keyword">if</span> (message.<span class="hljs-property">subtype</span> === <span class="hljs-string">'init'</span>) {
          sessionId = message.<span class="hljs-property">session_id</span>
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current Session ID: <span class="hljs-subst">${sessionId}</span>`</span>)
        }
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'assistant'</span>:
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> msg <span class="hljs-keyword">of</span> message.<span class="hljs-property">message</span>.<span class="hljs-property">content</span>) {
          <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">type</span> === <span class="hljs-string">"text"</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Assistant: <span class="hljs-subst">${msg.text}</span>`</span>)
          }
        }
        <span class="hljs-keyword">break</span>
    }
  }
}
</code></pre>
<h2 data-id="heading-4">å®ç°è¿ç»­å¯¹è¯</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šåœ¨ç»ˆç«¯ä½¿ç”¨ node åšä¸€ä¸‹ç®€å•çš„äº¤äº’ï¼Œä½¿å¾—ç”¨æˆ·å¯è¾“å…¥å†…å®¹ï¼Œç„¶åä½¿ç”¨ session ID å®ç°è¿ç»­å¯¹è¯ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ª <code>tui-chat.ts</code>:</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">tuiChat</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
        <span class="hljs-attr">input</span>: process.<span class="hljs-property">stdin</span>,
        <span class="hljs-attr">output</span>: process.<span class="hljs-property">stdout</span>,
        <span class="hljs-attr">prompt</span>: <span class="hljs-string">'User: '</span>
    })

    rl.<span class="hljs-title function_">prompt</span>()

    rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'line'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span>) =&gt; {
        <span class="hljs-keyword">const</span> userInput = input.<span class="hljs-title function_">trim</span>()
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`User: <span class="hljs-subst">${userInput}</span>`</span>)
        rl.<span class="hljs-title function_">prompt</span>()
    })


    rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"exit the chat"</span>)
        process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>);
    });

}
</code></pre>
<p>ä»¥ä¸Šä»£ç å°±èƒ½å®ç°ç”¨æˆ·åœ¨ç»ˆç«¯è¿ç»­è¾“å…¥å†…å®¹ã€‚
æ¥ç€å†™ AI å¯¹è¯çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ª prompt ç”¨æˆ·è¾“å…¥ï¼Œä¸€ä¸ªå½“å‰ä¼šè¯ id</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chatExample</span>(<span class="hljs-params">prompt: <span class="hljs-built_in">string</span>, sessionId: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span></span>) {

  <span class="hljs-comment">// å‡½æ•°å†…éƒ¨å®šä¹‰ä¼šè¯ id</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">_sessionId</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>

  <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Query</span> = <span class="hljs-title function_">query</span>({
    <span class="hljs-attr">prompt</span>: prompt,
    <span class="hljs-attr">options</span>: {
      <span class="hljs-comment">// options çš„ resume å‚æ•°ä¼ å…¥è®°å½•çš„ sessionIdï¼Œå°±å¯ä»¥ç»§ç»­å¯¹è¯äº†</span>
      <span class="hljs-attr">resume</span>: sessionId
    }
  })
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> message <span class="hljs-keyword">of</span> result) {
    <span class="hljs-keyword">switch</span> (message.<span class="hljs-property">type</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'system'</span>:
        <span class="hljs-keyword">if</span> (message.<span class="hljs-property">subtype</span> === <span class="hljs-string">'init'</span>) {
          <span class="hljs-comment">// ç³»ç»Ÿåˆå§‹åŒ–æ—¶è®°å½•ä¼šè¯ID</span>
          _sessionId = message.<span class="hljs-property">session_id</span>
        }
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'assistant'</span>:
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> msg <span class="hljs-keyword">of</span> message.<span class="hljs-property">message</span>.<span class="hljs-property">content</span>) {
          <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">type</span> === <span class="hljs-string">"text"</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Assistant: <span class="hljs-subst">${msg.text}</span>`</span>)
          }
        }
        <span class="hljs-keyword">break</span>
    }
  }

  <span class="hljs-comment">// æŠŠå½“å‰ä¼šè¯ id è¿”å›ç»™è°ƒç”¨è€…</span>
  <span class="hljs-keyword">return</span> _sessionId
}
</code></pre>
<p>ç„¶åè°ƒç”¨è¿™ä¸ª <code>chatExample</code> å°±è¡Œï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">tuiChat</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è®°å½• sessionId</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>

  <span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
    <span class="hljs-attr">input</span>: process.<span class="hljs-property">stdin</span>,
    <span class="hljs-attr">output</span>: process.<span class="hljs-property">stdout</span>,
    <span class="hljs-attr">prompt</span>: <span class="hljs-string">'User: '</span>
  })

  rl.<span class="hljs-title function_">prompt</span>()

  rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'line'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span>) =&gt; {
    <span class="hljs-keyword">const</span> userInput = input.<span class="hljs-title function_">trim</span>()
    <span class="hljs-comment">// èµ‹å€¼è¿”å›çš„ sessionId</span>
    sessionId = <span class="hljs-keyword">await</span> <span class="hljs-title function_">chatExample</span>(userInput, sessionId)

    rl.<span class="hljs-title function_">prompt</span>()
  })


  rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"exit the chat"</span>)
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>);
  });
}
</code></pre>
<p>å¥½çš„ï¼Œç°åœ¨æˆ‘ä»¬æ¥æ‰§è¡Œä¸€ä¸‹çœ‹çœ‹æ•ˆæœï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Starting Claude Agent Demo...
User: hello
Assistant: Hello! ğŸ‘‹ How can I <span class="hljs-built_in">help</span> you today? I<span class="hljs-string">'m Claude, and I can assist you with a variety of tasks like:

- Writing, editing, or reviewing code
- Searching through codebases and files
- Running commands and tests
- Creating pull requests and managing git operations
- Answering questions about your project
- And much more!

What would you like to work on?
User: ä½ æ˜¯è°
Assistant: ä½ å¥½ï¼æˆ‘æ˜¯ Claudeï¼Œç”± Anthropic å¼€å‘çš„ AI åŠ©æ‰‹ã€‚

åœ¨è¿™ä¸ªç¯å¢ƒä¸­ï¼Œæˆ‘æ˜¯ Claude Code - ä¸€ä¸ªä¸“é—¨ç”¨äºç¼–ç¨‹å’Œå¼€å‘ä»»åŠ¡çš„ç‰ˆæœ¬ã€‚æˆ‘å¯ä»¥å¸®åŠ©ä½ ï¼š

- ç¼–å†™ã€ç¼–è¾‘å’Œå®¡æŸ¥ä»£ç 
- æœç´¢å’Œåˆ†æä»£ç åº“
- è¿è¡Œå‘½ä»¤å’Œæµ‹è¯•
- ç®¡ç† Git æ“ä½œå’Œåˆ›å»º Pull Request
- å›ç­”å…³äºé¡¹ç›®çš„é—®é¢˜
- è¿˜æœ‰æ›´å¤šå…¶ä»–åŠŸèƒ½ï¼

æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ
User: æˆ‘è·Ÿä½ è¯´çš„ä¸Šä¸€å¥è¯æ˜¯ä»€ä¹ˆ
Assistant: ä½ ä¸Šä¸€å¥è¯æ˜¯"ä½ æ˜¯è°"ã€‚
</span></code></pre>
<p>å®Œç¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯å’Œ Agent è¿ç»­å¯¹è¯äº†ï¼Œå®ƒèƒ½è®°ä½æˆ‘ä»¬ä¸Šä¸€å¥è¯ï¼Œè¯´æ˜å½“å‰ä¼šè¯æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<h2 data-id="heading-5">å·¥å…·è°ƒç”¨</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šè‡ªå®šä¹‰ä¸€ä¸ªç”¨äºæ•°å­¦è®¡ç®—çš„å·¥å…·ï¼Œå’Œä¸€ä¸ª MCP Serverã€‚</p>
<p>å…ˆå®‰è£… <a href="https://link.juejin.cn?target=https%3A%2F%2Fmathjs.org%2F" target="_blank" title="https://mathjs.org/" ref="nofollow noopener noreferrer"><code>mathjs</code></a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fzod.dev%2F" target="_blank" title="https://zod.dev/" ref="nofollow noopener noreferrer"><code>zod</code></a></p>
<pre><code class="hljs language-bash" lang="bash">npm install mathjs
npm install zod@3.25.76
</code></pre>
<p>Claude Agent SDK å†…éƒ¨ä½¿ç”¨çš„ zod è¿˜æ˜¯ 3.25 ç‰ˆæœ¬ï¼Œè€Œæœ€æ–°ç‰ˆå·²ç»æ˜¯ 4.1.12ï¼Œä¼šæœ‰å…¼å®¹é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å®‰è£…äº†æŒ‡å®šç‰ˆæœ¬ã€‚</p>
<p><code>mathjs</code> æ˜¯ä¸€ä¸ªæ•°å­¦è®¡ç®—çš„åº“ï¼Œä»–æœ‰ä¸€ä¸ª <code>evaluate</code> æ–¹æ³•ï¼Œå¯ä»¥æ‰§è¡Œå­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> math <span class="hljs-keyword">from</span> <span class="hljs-string">'mathjs'</span>;

math.evaluate(<span class="hljs-string">'1.2 * (2 + 4.5)'</span>)
</code></pre>
<p>åˆ›å»ºä¸€ä¸ª <code>tools/calc-tool.ts</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { tool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@anthropic-ai/claude-agent-sdk"</span>;

<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>
<span class="hljs-keyword">import</span> { calculator } <span class="hljs-keyword">from</span> <span class="hljs-string">"../utils/calculator"</span>;

<span class="hljs-comment">// ä½¿ç”¨ tool å‡½æ•°åˆ›å»ºä¸€ä¸ªå·¥å…·</span>
<span class="hljs-comment">// å‰ä¸¤ä¸ªå‚æ•°æ˜¯å·¥å…·åç§°å’Œæè¿°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> calcTool = <span class="hljs-title function_">tool</span>(
  <span class="hljs-string">"calculator"</span>,
  <span class="hljs-string">"Perform a calculation using an expression string. The strings used here are executed using mathjs evaluate function. eg  "</span> + <span class="hljs-string">"1.2 * (2 + 4.5)"</span>,
  <span class="hljs-comment">// ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ inputSchemaï¼Œä½¿ç”¨ zod æ¥å®šä¹‰</span>
  {
    <span class="hljs-attr">expression</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"The expression to be evaluated"</span>)
  },
  <span class="hljs-keyword">async</span> (args) =&gt;{
    <span class="hljs-comment">// å›è°ƒå‡½æ•°é‡Œæ‰§è¡Œå·¥å…·çš„å…·ä½“ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">calculator</span>(args.<span class="hljs-property">expression</span>)

    <span class="hljs-comment">// è¿”å›è¿™ä¸ªç»“æ„å³å¯</span>
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">content</span>: [
        {
          <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span>,
          <span class="hljs-attr">text</span>: result
        }
      ]
    }
  }
)
</code></pre>
<p>åˆ›å»ºä¸€ä¸ª <code>utils/calculator.ts</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> math <span class="hljs-keyword">from</span> <span class="hljs-string">'mathjs'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">calculator</span>(<span class="hljs-params">expression:<span class="hljs-built_in">string</span></span>) : <span class="hljs-built_in">string</span>{
  <span class="hljs-keyword">const</span> result = math.evaluate(expression)
  <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toString</span>()
}
</code></pre>
<p>å·¥å…·å®šä¹‰å®Œæ¯•ï¼ŒClaude Agent SDK è¦æ±‚æˆ‘ä»¬å¿…é¡»å®šä¹‰ä¸€ä¸ª MCP Server æ¥ä½¿ç”¨å·¥å…·ã€‚</p>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>mcps/mcp-example-server.ts</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { createSdkMcpServer } <span class="hljs-keyword">from</span> <span class="hljs-string">"@anthropic-ai/claude-agent-sdk"</span>;
<span class="hljs-keyword">import</span> { calcTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"../tools/calc-tool"</span>;

<span class="hljs-comment">// createSdkMcpServer æ˜¯å®šä¹‰ MCP Server çš„å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> utilitiesServer = <span class="hljs-title function_">createSdkMcpServer</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"utilities"</span>,
  <span class="hljs-attr">version</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-attr">tools</span>: [calcTool],
})

</code></pre>
<p>å¥½çš„ï¼ŒMCP Server åˆ›å»ºå®Œæ¯•ã€‚</p>
<p>æ¥æˆ‘ä»¬å›åˆ° <code>chatExample</code> å‡½æ•°ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { utilitiesServer } <span class="hljs-keyword">from</span> <span class="hljs-string">"../mcps/mcp-example-server"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chatExample</span>(<span class="hljs-params">prompt: <span class="hljs-built_in">string</span>, sessionId: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span></span>) {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">_sessionId</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>

  <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Query</span> = <span class="hljs-title function_">query</span>({
    <span class="hljs-attr">prompt</span>: prompt,
    <span class="hljs-attr">options</span>: {
      <span class="hljs-attr">resume</span>: sessionId,
      <span class="hljs-comment">// systemPrompt å¯ä»¥è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯</span>
      <span class="hljs-attr">systemPrompt</span>: <span class="hljs-string">"You are a helpful assistant that can use tools to get information. You can use the following tools: calculator"</span>,
      <span class="hljs-comment">// mcpServers æ˜¯ä¸€ä¸ªå¯¹è±¡å‚æ•°ï¼Œä¼ å…¥è‡ªå®šä¹‰çš„ MCP utilitiesServer</span>
      <span class="hljs-attr">mcpServers</span>: {
        <span class="hljs-attr">utilities</span>: utilitiesServer
      },
      <span class="hljs-comment">// å¿…é¡»åœ¨ allowedTools é‡ŒæŒ‡å®šçš„å·¥å…·æ‰èƒ½ä½¿ç”¨</span>
      <span class="hljs-comment">// å·¥å…·çš„å‘½åæ ¼å¼æ˜¯å›ºå®šçš„ï¼šmcp__{server_name}__{tool_name}</span>
      <span class="hljs-comment">// è¿™é‡Œå°±æ˜¯ mcp__utilities__calculator</span>
      <span class="hljs-attr">allowedTools</span>: [
        <span class="hljs-string">"mcp__utilities__calculator"</span>,
      ]
    }
  })
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> message <span class="hljs-keyword">of</span> result) {
    <span class="hljs-keyword">switch</span> (message.<span class="hljs-property">type</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'system'</span>:
        <span class="hljs-keyword">if</span> (message.<span class="hljs-property">subtype</span> === <span class="hljs-string">'init'</span>) {
          _sessionId = message.<span class="hljs-property">session_id</span>
        }
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'assistant'</span>:
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> msg <span class="hljs-keyword">of</span> message.<span class="hljs-property">message</span>.<span class="hljs-property">content</span>) {
          <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">type</span> === <span class="hljs-string">"text"</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Assistant: <span class="hljs-subst">${msg.text}</span>`</span>)
          }
          <span class="hljs-comment">// æ‰“å° tool_use ç±»å‹çš„çš„æ¶ˆæ¯</span>
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">type</span> === <span class="hljs-string">"tool_use"</span>) {
            process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">`Using tool:  <span class="hljs-subst">${msg.name}</span> `</span>)
            <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">input</span>) {
                <span class="hljs-comment">// tool å¾—åˆ°çš„è¡¨è¾¾å¼</span>
                process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">` - Input: <span class="hljs-subst">${msg.input.expression}</span> `</span>)
            }

            process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">'\n'</span>)
          }
        }
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'user'</span>:
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> msg <span class="hljs-keyword">of</span> message.<span class="hljs-property">message</span>.<span class="hljs-property">content</span>) {
          <span class="hljs-comment">// æ‰“å° tool_result ç±»å‹çš„æ¶ˆæ¯</span>
          <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">type</span> === <span class="hljs-string">"tool_result"</span>) {
            process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">"Tool Results: "</span>)
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> result <span class="hljs-keyword">of</span> msg.<span class="hljs-property">content</span>) {
              <span class="hljs-keyword">if</span> (result.<span class="hljs-property">type</span> === <span class="hljs-string">"text"</span>) {
                process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(result.<span class="hljs-property">text</span>)
                process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">" - "</span>)
              }
            }
            process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">'\n'</span>)
          }
        }
        <span class="hljs-keyword">break</span>
    }
  }

  <span class="hljs-keyword">return</span> _sessionId
}
</code></pre>
<p>æˆ‘ä»¬è¿è¡Œçœ‹çœ‹æ•ˆæœï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Starting Claude Agent Demo...
User: ä½ å¥½
Assistant: ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ã€‚æˆ‘æ˜¯ Claudeï¼Œä¸€ä¸ª AI åŠ©æ‰‹ã€‚æˆ‘å¯ä»¥å¸®ä½ è¿›è¡Œè®¡ç®—ã€å›ç­”é—®é¢˜ã€è§£å†³é—®é¢˜ç­‰ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ
User: 2454+23546ï¼Œå†å¹³æ–¹ï¼Œå†é™¤ä»¥ 32ï¼Œç­‰äºå¤šå°‘ï¼Ÿ
Assistant: æˆ‘æ¥å¸®ä½ è®¡ç®—è¿™ä¸ªé—®é¢˜ã€‚
Using tool:  mcp__utilities__calculator  - Input: (2454 + 23546)^2 / 32
Tool Results: 21125000 -
Assistant: è®¡ç®—ç»“æœæ˜¯ï¼š**21,125,000**

è®©æˆ‘å±•ç¤ºä¸€ä¸‹è®¡ç®—æ­¥éª¤ï¼š
1. é¦–å…ˆï¼š2454 + 23546 = 26000
2. ç„¶åå¹³æ–¹ï¼š26000Â² = 676,000,000
3. æœ€åé™¤ä»¥ 32ï¼š676,000,000 Ã· 32 = 21,125,000
</code></pre>
<p>æˆ‘ä»¬æé—®äº†ä¸€ä¸ªæ•°å­¦é—®é¢˜ï¼Œå®ƒæŠŠä»–è§£æä¸ºå·¥å…·éœ€è¦çš„è¡¨è¾¾å¼ï¼Œç„¶åä½¿ç”¨äº†å·¥å…·ï¼Œå¾—åˆ°äº†æ­£ç¡®ç»“æœï¼Œå®Œç¾ï¼</p>
<h2 data-id="heading-6">ç»“å°¾</h2>
<p>ä½¿ç”¨ Claude Agent SDKï¼Œæˆ‘ä»¬ç”¨å¾ˆå°‘çš„ä»£ç å°±å†™äº†ä¸€ä¸ªç®€å•çš„ Agentï¼Œè¿™ä¸ª SDK åº”è¯¥æ˜¯å­¦ä¹  Agent å¼€å‘èµ·æ‰‹æ¯”è¾ƒç®€å•çš„å·¥å…·äº†ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šä¼˜ç§€çš„ Agent æ¡†æ¶ï¼Œæ¯”å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fdocs%2Fai-sdk" target="_blank" title="https://vercel.com/docs/ai-sdk" ref="nofollow noopener noreferrer">Vercel AI SDK</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fmastra.ai%2F" target="_blank" title="https://mastra.ai/" ref="nofollow noopener noreferrer">Mastra</a>, ç­‰ç­‰ï¼Œåç»­ä¹Ÿä¼šå­¦ä¹ ä½¿ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gogsè¿ç§»åˆ°Giteaä¸å®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571272874847354932</link>    <guid>https://juejin.cn/post/7571272874847354932</guid>    <pubDate>2025-11-11T16:36:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571272874847354932" data-draft-id="7571285984089554996" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gogsè¿ç§»åˆ°Giteaä¸å®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="Git,åç«¯"/> <meta itemprop="datePublished" content="2025-11-11T16:36:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="tianming2019"/> <meta itemprop="url" content="https://juejin.cn/user/1750078243746087"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gogsè¿ç§»åˆ°Giteaä¸å®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1750078243746087/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    tianming2019
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T16:36:01.000Z" title="Tue Nov 11 2025 16:36:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Gogsè¿ç§»åˆ°Giteaä¸å®Œå…¨æŒ‡å—</h2>
<p>å¤§å®¶å¦‚æœæœ‰ç”¨è¿‡<code>Gogs</code>å°±ä¼šå‘ç°å®ƒå·²ç»å¾ˆä¹…æ²¡æœ‰å•¥ç‰ˆæœ¬æ›´æ–°äº†ï¼Œç›¸æ¯”è¾ƒè€Œè¨€ï¼Œ<code>Gitea</code>çš„æ›´æ–°é¢‘ç‡ç›¸å¯¹è¾ƒé«˜ä¸€äº›ï¼Œç¤¾åŒºæ–‡æ¡£ä¹Ÿæ›´å®Œå–„ã€‚ä½†æœ‰ä¸€ç‚¹æ¯”è¾ƒå¤´ç–¼çš„æ˜¯è€æ—§ä»“åº“è¿ç§»ä¸€æ˜¯æ¯”è¾ƒçç¢ï¼›äºŒåˆ™commit activities ç­‰ç­‰éƒ½æ¶ˆå¤±äº†ï¼Œä»Šå¤©å°±ç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªé‡è·¯å­, åŸºæœ¬æ€è·¯å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä»gogs å¯¼å‡ºæ•°æ®å¹¶è§£å‹ã€æå–å¯¼å‡ºæ•°æ®ä¸­çš„<code>repositories.zip</code></li>
<li>ä¸Šä¼ <code>repositories.zip</code>æ–‡ä»¶åˆ°<code>Gitea</code>å®¹å™¨å¹¶è§£å‹</li>
<li>é€šè¿‡<code>Gitea</code>çš„ç®¡ç†é¡µé¢è¯†åˆ«å¹¶é‡æ–°å…³è”ä»“åº“</li>
</ul>
<p>æœ¬æ–‡ä»¥ä¸¤è€…ç¯å¢ƒå‡ä¸ºdockerå®¹å™¨ä¸ºä¾‹,ä¸»è¦æ¶‰åŠå®¹å™¨ç‰ˆæœ¬ï¼š</p>
<ul>
<li>gogs/gogs:latest
<ul>
<li>version: 0.14.0+</li>
<li>sha256: b9b164e0dc299185af6079adde3eed693da55b920887aee92eda19d36030d416</li>
</ul>
</li>
<li>docker.gitea.com/gitea:1.25.1
<ul>
<li>version: 1.25.1</li>
<li>sha256: dbb4b148024bc4462c39332acbdeace8f12cee5646a4e46db75c1d16aa4eaf4b</li>
</ul>
</li>
</ul>
<h3 data-id="heading-1">Gogsæ•°æ®å¯¼å‡º</h3>
<p>è¿›å…¥gogså®¹å™¨åï¼Œé»˜è®¤æƒ…å†µä¸‹æ•°æ®æ–‡ä»¶åœ¨ <code>/data</code>ç›®å½•ä¸‹ï¼Œå®é™…çš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹</p>
<pre><code class="hljs language-plaintext" lang="plaintext">data
â”œâ”€â”€ git
â”‚   â””â”€â”€ gogs-repositories
â”‚       â”œâ”€â”€ gogs
â”‚       â”‚   â”œâ”€â”€ download.git
â”‚       â”‚   â”œâ”€â”€ electron-vite-vue.git
â”‚       â”‚   â”œâ”€â”€ gogs.git
â”‚       â””â”€â”€ nobody
â”œâ”€â”€ gogs
â”‚   â”œâ”€â”€ conf
â”‚   â”‚   â””â”€â”€ app.ini
â”‚   â”œâ”€â”€ custom
â”‚   â”‚   â””â”€â”€ conf
â”‚   â”‚       â””â”€â”€ app.ini
â”‚   â”œâ”€â”€ data
â”‚   â”‚   â”œâ”€â”€ avatars
â”‚   â”‚   â”‚   â””â”€â”€ 3
â”‚   â”‚   â””â”€â”€ sessions
â”‚   â””â”€â”€ log
â”‚       â”œâ”€â”€ gogs.log
â”‚       â”œâ”€â”€ gorm.log
â”‚       â”œâ”€â”€ hooks
â”‚       â”‚   â”œâ”€â”€ post-receive.log
â”‚       â”‚   â”œâ”€â”€ pre-receive.log
â”‚       â”‚   â”œâ”€â”€ update.log
â”‚       â”‚   â””â”€â”€ xorm.log
â”‚       â””â”€â”€ xorm.log
â””â”€â”€ ssh
    â”œâ”€â”€ ssh_host_dsa_key
    â”œâ”€â”€ ssh_host_dsa_key.pub
    â”œâ”€â”€ ssh_host_ecdsa_key
    â”œâ”€â”€ ssh_host_ecdsa_key.pub
    â”œâ”€â”€ ssh_host_ed25519_key
    â”œâ”€â”€ ssh_host_ed25519_key.pub
    â”œâ”€â”€ ssh_host_rsa_key
    â””â”€â”€ ssh_host_rsa_key.pub

43 directories, 18 files
</code></pre>
<p>é€šè¿‡ gogsçš„ backup å‘½ä»¤è¿›è¡Œå¤‡ä»½çš„è¯é»˜è®¤ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">gogs-backup
â”œâ”€â”€ custom
â”‚   â”œâ”€â”€ conf
â”‚   â”‚   â””â”€â”€ app.ini
â”‚   â”œâ”€â”€ custom
â”‚   â”‚   â””â”€â”€ conf
â”‚   â”‚       â””â”€â”€ app.ini
â”‚   â””â”€â”€ log
â”‚       â”œâ”€â”€ gogs.log
â”‚       â”œâ”€â”€ gogs.log.2022-11-06
â”‚       â”œâ”€â”€ gorm.log
â”‚       â”œâ”€â”€ gorm.log.2022-11-06
â”‚       â”œâ”€â”€ hooks
â”‚       â”‚   â”œâ”€â”€ post-receive.log
â”‚       â”‚   â”œâ”€â”€ pre-receive.log
â”‚       â”‚   â”œâ”€â”€ update.log
â”‚       â”‚   â””â”€â”€ xorm.log
â”‚       â”œâ”€â”€ xorm.log
â”‚       â”œâ”€â”€ xorm.log.2022-11-06
â”œâ”€â”€ data
â”‚   â””â”€â”€ avatars
â”‚       â””â”€â”€ 3
â”œâ”€â”€ db
â”‚   â”œâ”€â”€ TeamRepo.json
â”‚   â”œâ”€â”€ TeamUser.json
â”œâ”€â”€ metadata.ini
â””â”€â”€ repositories.zip
10 directories, 49 files
</code></pre>
<blockquote>
<p>å¦‚æœæŒ‡å®šäº† command options ,åˆ™ä¼šåˆ å‡éƒ¨åˆ†å†…å®¹ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š</p>
<ul>
<li>exclude-mirror-repos ä¸å¤‡ä»½å¤–éƒ¨ä»“åº“</li>
<li>exclude-repos å®Œå…¨ä¸å¤‡ä»½ ä»“åº“</li>
<li>database-only åªå¤‡ä»½dbæ•°æ®</li>
</ul>
</blockquote>
<pre><code class="hljs language-shell" lang="shell">mkdir -p /backup/file
su git
cd /backup
c94803f5f8bf:/backup$ /app/gogs/gogs backup -v --tempdir ./tmp --target ./file 
<span class="hljs-meta prompt_"># </span><span class="bash">exclude-mirror-repos</span>
<span class="hljs-meta prompt_"># </span><span class="bash">c94803f5f8bf:/backup$ /app/gogs/gogs backup -v --tempdir ./tmp --target ./file --exclude-mirror-repos</span>
</code></pre>
<p>å¯¼å‡ºæ–‡ä»¶çš„å‘½åæ ¼å¼ä¸º: <code>gogs-backup-20251111070003.zip</code> ,æˆ‘ä»¬è§£å‹æ–‡ä»¶åå¯ä»¥çœ‹åˆ°ä¸¤ç§å¤‡ä»½æ–¹å¼çš„ä¸»è¦åŒºåˆ«æ˜¯æœ‰æ— sshå¯†é’¥é…ç½®ï¼Œå»ºè®®å¤‡ä»½æ•°æ®åé€šè¿‡æ­¤æ–¹å¼å†æ¬¡è¿›è¡Œå¤‡ä»½ï¼Œé¿å…æ•°æ®ä¸¢å¤±</p>
<pre><code class="hljs language-shell" lang="shell">cd /backup/file
tar -cf tar_data_20251111.tar /data
</code></pre>
<p>å®Œæˆå¤‡ä»½ä¹‹åé€€å‡ºå®¹å™¨ï¼Œå¹¶é€šè¿‡ <code>docker cp</code> å¤åˆ¶æ–‡ä»¶åˆ°å®¿ä¸»æœºå³å¯</p>
<h3 data-id="heading-2">Giteaæ•°æ®å¯¼å…¥</h3>
<p>åˆ›å»ºå®¹å™¨åé¦–æ¬¡è¿›å…¥é¡µé¢éœ€è¦é…ç½®<code>Gitea</code>,<strong>æ³¨å†ŒGiteaè´¦å·æ—¶å»ºè®®ä½¿ç”¨gogsçš„ç®¡ç†å‘˜è´¦å·,å¯¼å…¥æ•°æ®åå¯ä»»æ„æ·»åŠ </strong></p>
<p>é€šè¿‡<code>docker cp</code> å¤åˆ¶<code>gogs-backup-20251111070003.zip</code> æ–‡ä»¶ä¸­çš„ <code>repositories.zip</code>
ç™»å½•giteaå®¹å™¨å¹¶åˆ‡æ¢åˆ°<code>/app/gitea</code> æˆ–è€… <code>/tmp</code>ç›®å½•ä¸‹</p>
<ul>
<li>è§£å‹ç¼©<code>repositories.zip</code>æ–‡ä»¶
<ul>
<li><code>unzip repositories.zip</code></li>
</ul>
</li>
<li>ä¿®æ”¹æ–‡ä»¶æƒé™
<ul>
<li><code>chown -R git:git gogs-repositories</code></li>
</ul>
</li>
<li>æŒªåŠ¨æ–‡ä»¶åˆ°<code>/data/git/repositories</code>ç›®å½•
<ul>
<li><strong>ä¸€å®šè¦ç¡®è®¤ç›®å½•ä¸‹æ˜¯å¦ä¸ºç©ºï¼Œé¿å…è¦†ç›–æ•°æ®</strong></li>
</ul>
</li>
</ul>
<h3 data-id="heading-3">é€šè¿‡Giteaç®¡ç†é¡µé¢æ·»åŠ ä»“åº“</h3>
<ul>
<li>
<p>é€šè¿‡ipæˆ–è€…é…ç½®çš„åŸŸåç™»å½•ç®¡ç†å‘˜è´¦å·ï¼ŒæŒ‰å›¾ç¤ºè¿›å…¥gitea ä»“åº“ç®¡ç†é¢æ¿-æœªæ”¶å½•ä»“åº“</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c7f58fb3d0544579348d6f7bae78596~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGlhbm1pbmcyMDE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763483761&amp;x-signature=UwqkwlwTmoS1g2WO6JkCYBaqhak%3D" alt="enter dashboard" loading="lazy"/></p>
</li>
<li>
<p>æœç´¢æŒ‡å®šè´¦å·(å³ä¸º<code>repositories.zip</code>ä¸‹çš„ä¸€çº§æ–‡ä»¶å¤¹åç§°)ï¼Œé€ä¸ªæ·»åŠ ä»“åº“</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52826e5a22804c6199ed1bcb6ab03a66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGlhbm1pbmcyMDE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763483761&amp;x-signature=9mKOCXiYMxM%2FGtDBb9TTcw4z32k%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p>éšæ„è¿›å…¥å…¶ä¸­ä¸€ä¸ªä»“åº“éªŒè¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8429388300a407f9fdae80427860f34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGlhbm1pbmcyMDE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763483761&amp;x-signature=HjQOYRoVRkojJXt9X8ULH0I5fQ8%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p>éšæ„ä¸‹è½½ä»“åº“éªŒè¯
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f6cf7e8dcd744b9b54dea102e3b1632~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGlhbm1pbmcyMDE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763483761&amp;x-signature=LvV%2BudChtGkA2OdXRHTOZKAOQRw%3D" alt="image.png" loading="lazy"/></p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE AI çœŸå¼ºï¼Œè¿å¤–å›½äººéƒ½åœ¨ç”¨è¿™äº›AIæŠ€å·§]]></title>    <link>https://juejin.cn/post/7571342319893741603</link>    <guid>https://juejin.cn/post/7571342319893741603</guid>    <pubDate>2025-11-12T01:50:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571342319893741603" data-draft-id="7568425510792609792" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE AI çœŸå¼ºï¼Œè¿å¤–å›½äººéƒ½åœ¨ç”¨è¿™äº›AIæŠ€å·§"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-12T01:50:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="golangå­¦ä¹ è®°"/> <meta itemprop="url" content="https://juejin.cn/user/4371313964100990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE AI çœŸå¼ºï¼Œè¿å¤–å›½äººéƒ½åœ¨ç”¨è¿™äº›AIæŠ€å·§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313964100990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    golangå­¦ä¹ è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T01:50:31.000Z" title="Wed Nov 12 2025 01:50:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ è¿˜åœ¨æ‰‹åŠ¨æ•² <code>for</code> å¾ªç¯ã€æŸ¥ Stack Overflowã€éƒ¨ç½²ç½‘ç«™æ—¶æ‰‹æŠ–ç‚¹é”™æŒ‰é’®â€¦â€¦é‚£ä½ çœŸçš„è¯¥è¯•è¯• <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.datacamp.com%2Ftutorial%2Ftrae-ai" target="_blank" title="https://www.datacamp.com/tutorial/trae-ai" ref="nofollow noopener noreferrer"><strong>Trae AI</strong></a> äº†ã€‚æˆªè‡³ <strong>2025 å¹´ 10 æœˆ</strong>ï¼Œå®ƒå·²ç»ç™»é¡¶ <strong>SWE-bench</strong>ï¼ˆä¸€ä¸ªç”¨ 500 ä¸ªçœŸå® GitHub Issue æµ‹è¯„ AI ç¼–ç¨‹èƒ½åŠ›çš„æƒå¨æ¦œå•ï¼‰ç¬¬ä¸€ï¼Œè€Œä¸”æ˜¯å”¯ä¸€ä¸€ä¸ªä½œä¸ºå®Œæ•´ IDE å‚èµ›å¹¶å¤ºå† çš„å·¥å…·ï¼</p>
<p>ä¸‹é¢æˆ‘ä»¬å°±ç”¨<strong>è½»æ¾å¥½ç© + å®æˆ˜æˆªå›¾</strong>çš„æ–¹å¼ï¼Œå¸¦ä½ å¿«é€Ÿä¸Šæ‰‹ Trae AI çš„é‚£äº›è¶…å®ç”¨æŠ€å·§ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ§  Trae AI æ˜¯å•¥ï¼Ÿâ€”â€”ä½ çš„ AI å·¥ç¨‹å¸ˆåŠ©ç†</h2>
<p>Trae è‡ªç§° â€œ<strong>The Real AI Engineer</strong>â€ï¼ˆçœŸæ­£çš„ AI å·¥ç¨‹å¸ˆï¼‰ï¼Œå¬èµ·æ¥æœ‰ç‚¹ç‹‚ï¼Ÿä½†å®ƒç¡®å®å¹²äº†å·¥ç¨‹å¸ˆè¯¥å¹²çš„æ´»ï¼š</p>
<ul>
<li>å¬ä½ ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼ˆæ¯”å¦‚ï¼šâ€œç»™æˆ‘å†™ä¸ª 4x4 äº•å­—æ£‹â€ï¼‰</li>
<li>è‡ªåŠ¨è§„åˆ’ä»£ç ç»“æ„ã€ç”Ÿæˆæ–‡ä»¶ã€å†™æ–‡æ¡£</li>
<li>èƒ½è”ç½‘æŸ¥èµ„æ–™ã€è°ƒæ¥å£ã€ç”¨å·¥å…·ï¼ˆé  MCPï¼‰</li>
<li>ç”šè‡³èƒ½ä¸€é”®éƒ¨ç½²ç½‘ç«™åˆ° Vercelï¼</li>
<li>è¿˜æ”¯æŒ<strong>è¯­éŸ³è¾“å…¥</strong>â€”â€”è¾¹å–å¥¶èŒ¶è¾¹è¯´â€œåŠ ä¸ªç™»å½•é¡µâ€ï¼Œå®ƒå°±å¹²äº†ï¼</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bab136c723e74fc2a6e27343414f53b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517031&amp;x-signature=US4jfRY7vgMuSfhxdeXk0kgRM2g%3D" alt="Trae AI ç•Œé¢" loading="lazy"/><br/>
<em>ğŸ‘‰ ç•Œé¢æ¸…çˆ½ï¼Œå·¦è¾¹èŠå¤© + ä¸­é—´ä»£ç  + ä¸‹æ–¹ç»ˆç«¯ï¼ŒVS Code ç”¨æˆ·ç§’ä¸Šæ‰‹</em></p>
<hr/>
<h2 data-id="heading-1">ğŸ’° ä»·æ ¼é¦™åˆ°ç¦»è°±ï¼šé¦–æœˆåªè¦ 3 ç¾å…ƒï¼</h2>
<p>Trae AI æœˆè´¹ <strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mtext>ï¼ˆçº¦</mtext><mn>72</mn><mtext>å…ƒäººæ°‘å¸ï¼‰</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ï¼Œ</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mtext>é¦–æœˆåªè¦</mtext></mrow><annotation encoding="application/x-tex">10ï¼ˆçº¦ 72 å…ƒäººæ°‘å¸ï¼‰**ï¼Œ**é¦–æœˆåªè¦ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">10</span><span class="mord cjk_fallback">ï¼ˆçº¦</span><span class="mord">72</span><span class="mord cjk_fallback">å…ƒäººæ°‘å¸ï¼‰</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">é¦–æœˆåªè¦</span></span></span></span></span>3</strong>ï¼å¯¹æ¯” Cursorï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn><mtext>ï¼‰ã€</mtext><mi>W</mi><mi>i</mi><mi>n</mi><mi>d</mi><mi>s</mi><mi>u</mi><mi>r</mi><mi>f</mi><mtext>ï¼ˆ</mtext></mrow><annotation encoding="application/x-tex">20ï¼‰ã€Windsurfï¼ˆ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord">20</span><span class="mord cjk_fallback">ï¼‰ã€</span><span class="mord mathnormal">Win</span><span class="mord mathnormal">d</span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord cjk_fallback">ï¼ˆ</span></span></span></span></span>15+ï¼‰ï¼Œç®€ç›´ç™½èœä»·ï¼</p>
<p>ä½ è¿˜ä¼šè·å¾—ï¼š</p>
<ul>
<li><strong>600 æ¬¡â€œå¿«è¯·æ±‚â€</strong>ï¼ˆç”¨ Claude 4 Sonnetã€Gemini 2.5 Pro ç­‰é¡¶çº§æ¨¡å‹ï¼‰</li>
<li><strong>æ— é™æ¬¡â€œæ…¢è¯·æ±‚â€</strong>ï¼ˆé€‚åˆä¸ç€æ€¥çš„ä»»åŠ¡ï¼‰</li>
</ul>
<blockquote>
<p>âš ï¸ å°æé†’ï¼šå®ƒçš„â€œè¯·æ±‚è®¡æ•°â€æ˜¯æŒ‰â€œæ¬¡æ•°â€è€Œéâ€œtoken æ•°â€ï¼Œå¤æ‚ä»»åŠ¡å’Œç®€å•ä¿®æ”¹ç®—ä¸€æ ·çš„æ¬¡æ•°â€”â€”è¿™æ¨¡å¼å¯èƒ½æ’‘ä¸ä¹…ï¼Œ<strong>è¶ä¾¿å®œå¿«ä¸Šè½¦</strong>ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ› ï¸ å®æˆ˜æŠ€å·§ 1ï¼šç”¨ Builder å†™ä¸ªå½©è‰²äº•å­—æ£‹æ¸¸æˆ</h2>
<p>æˆ‘ä»¬æ¥è¯•è¯•å®ƒçš„æ ¸å¿ƒåŠŸèƒ½ï¼š<strong>Builder æ¨¡å¼</strong>ã€‚</p>
<p>åœ¨ç©ºç™½é¡¹ç›®é‡Œè¾“å…¥ï¼š</p>
<pre><code class="hljs language-text" lang="text">æˆ‘æƒ³ç”¨ Python åšä¸€ä¸ª 4x4 çš„äº•å­—æ£‹ç»ˆç«¯æ¸¸æˆï¼Œæ”¯æŒä¸¤äººè½®æµä¸‹æ£‹ï¼Œ
èƒ½åˆ¤æ–­è¡Œã€åˆ—ã€å¯¹è§’çº¿è·èƒœï¼Œè¿˜è¦æ”¯æŒå¹³å±€ã€‚
ç•Œé¢è¦æœ‰é¢œè‰²ï¼Œä½†åˆ«å¤ªèŠ±ï¼Œç®€æ´æ¸…æ–°å°±å¥½ã€‚
</code></pre>
<p><strong>ç»“æœï¼Ÿ99% å®Œç¾ï¼</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d570cd4dda7343778386f2df5461170a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517031&amp;x-signature=KJEAzc9cnEN0njQhbUnIebl6zAc%3D" alt="Trae ç”Ÿæˆçš„å½©è‰²äº•å­—æ£‹" loading="lazy"/></p>
<p>å®ƒä¸ä»…å†™äº†ä»£ç ï¼Œè¿˜ï¼š</p>
<ul>
<li>è‡ªåŠ¨ç”Ÿæˆ <code>README.md</code></li>
<li>è‡ªåŠ¨è¿è¡Œ <code>python tictactoe.py</code> æµ‹è¯•</li>
<li>ç”¨äº† <code>colorama</code> åº“å®ç°å½©è‰²è¾“å‡º</li>
<li>é€»è¾‘å®Œå…¨æ­£ç¡®ï¼Œè¿è¾¹ç•Œæƒ…å†µéƒ½å¤„ç†äº†ï¼</li>
</ul>
<hr/>
<h2 data-id="heading-3">ğŸ” å®æˆ˜æŠ€å·§ 2ï¼šå†…ç½®æµè§ˆå™¨ + è”ç½‘æœç´¢ï¼Œä¸ç”¨åˆ‡çª—å£ï¼</h2>
<p>ä»¥å‰å†™ä»£ç æ—¶ï¼Œæ€»å¾—åœ¨ IDE å’Œ Chrome ä¹‹é—´æ¥å›è·³ã€‚Trae ç›´æ¥åœ¨èŠå¤©æ¡†é‡Œ<strong>å†…ç½®ç½‘é¡µæœç´¢</strong>ï¼</p>
<p>è¯•è¯•è¾“å…¥ï¼š</p>
<pre><code class="hljs language-text" lang="text">æœä¸€ä¸‹åˆ«äººæ˜¯æ€ä¹ˆåšäº•å­—æ£‹æ¸¸æˆçš„ï¼Ÿæœ‰æ²¡æœ‰åŠ  AI å¯¹æˆ˜æˆ– undo åŠŸèƒ½ï¼Ÿ
</code></pre>
<p>å®ƒä¼šè‡ªåŠ¨è”ç½‘ï¼Œæ•´ç†å‡ºç»“æ„åŒ–ç»“æœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0796981af6704dd0abd129e416a6b3e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517031&amp;x-signature=EAlwObpOxoKw57z2uXmlwNtRDk4%3D" alt="Trae å†…ç½®æœç´¢ç»“æœ" loading="lazy"/></p>
<p>ä½ å¯ä»¥ç›´æ¥è®©å®ƒï¼šâ€œæ ¹æ®è¿™ä¸ªåŠ ä¸ªâ€˜æ‚”æ£‹â€™åŠŸèƒ½â€ï¼Œå®ƒé©¬ä¸Šæ”¹ä»£ç ï¼</p>
<hr/>
<h2 data-id="heading-4">ğŸ“‹ å®æˆ˜æŠ€å·§ 3ï¼šç”¨ <code>#</code> å’Œ <code>@</code> ç²¾å‡†æ§åˆ¶ä¸Šä¸‹æ–‡</h2>
<ul>
<li><code>#filename.py</code> â†’ æŠŠè¿™ä¸ªæ–‡ä»¶å†…å®¹å–‚ç»™ AI</li>
<li><code>#rulename</code> â†’ å¼•ç”¨ä½ å†™çš„è§„åˆ™æ–‡ä»¶ï¼ˆæ¯”å¦‚ <code>#design_philosophy</code>ï¼‰</li>
<li><code>@DocAgent</code> â†’ åˆ‡æ¢åˆ°â€œæ–‡æ¡£ä¸“ç”¨ AI åŠ©æ‰‹â€</li>
</ul>
<p>ä½ ç”šè‡³å¯ä»¥åˆ›å»ºè‡ªå·±çš„è§„åˆ™æ–‡ä»¶ï¼Œæ¯”å¦‚ <code>.trae/rules/architecture.md</code>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®å¿…é¡»ç”¨ Flaskï¼Œå‰ç«¯ç”¨ HTMXï¼Œä¸è®¸ç”¨ Reactã€‚</span>
æ‰€æœ‰ API è¿”å› JSONï¼ŒçŠ¶æ€ç è¦è§„èŒƒã€‚
</code></pre>
<p>ä¸‹æ¬¡ä½ å†™åç«¯æ—¶ï¼Œåªè¦è¯´ <code>#architecture</code>ï¼ŒAI å°±è‡ªåŠ¨éµå®ˆï¼</p>
<hr/>
<h2 data-id="heading-5">ğŸ§© å®æˆ˜æŠ€å·§ 4ï¼šç”¨ MCP è¿æ•°æ®åº“ã€APIã€Gitâ€¦â€¦</h2>
<p><strong>MCPï¼ˆModel Context Protocolï¼‰</strong> æ˜¯ Trae çš„â€œå¤–æŒ‚æ’ä»¶ç³»ç»Ÿâ€ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>è¿ PostgreSQL æŸ¥è¡¨ç»“æ„</li>
<li>è°ƒå…¬å¸å†…éƒ¨ API è‡ªåŠ¨ç”Ÿæˆ SDK</li>
<li>è¯»å– Jira å·¥å•è‡ªåŠ¨å†™ä»£ç </li>
</ul>
<p>å®ƒè¿˜æœ‰ä¸ª <strong>MCP å¸‚åœº</strong>ï¼Œä¸€é”®å®‰è£…å¸¸ç”¨å·¥å…·ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e710c1ded024714b601351468d1d99b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517031&amp;x-signature=LsThH5ZGjH5HCFTqKHVFTSbgCmY%3D" alt="MCP å¸‚åœº" loading="lazy"/></p>
<p>è£…å®Œåï¼Œåˆ‡æ¢åˆ° <strong>â€œBuilder with MCPâ€</strong> æ¨¡å¼ï¼ŒAI å°±èƒ½â€œæ“ä½œçœŸå®ä¸–ç•Œâ€äº†ï¼</p>
<hr/>
<h2 data-id="heading-6">ğŸ¤– éšè—å¤§æ‹›ï¼šè‡ªå®šä¹‰ AI ä»£ç†ï¼ˆCustom Agentsï¼‰</h2>
<p>ä¸æƒ³æ¯æ¬¡éƒ½è§£é‡Šâ€œè¦å†™ç±»å‹æ³¨è§£ + Google é£æ ¼ docstringâ€ï¼Ÿ<br/>
é‚£å°±é€ ä¸€ä¸ªä¸“å± AIï¼š</p>
<ul>
<li>å«å®ƒ <strong>@CodeReviewer</strong>ï¼šä¸“æ‰¾ bugã€å®‰å…¨æ¼æ´ã€æ€§èƒ½é—®é¢˜</li>
<li>å«å®ƒ <strong>@FrontendGuru</strong>ï¼šåªå†™ Tailwind + Vueï¼Œæ‹’ç» jQuery</li>
</ul>
<p>åˆ›å»ºåï¼Œåœ¨èŠå¤©æ¡†é¡¶éƒ¨ä¸‹æ‹‰é€‰æ‹©ï¼Œæˆ–ç›´æ¥ <code>@FrontendGuru åšä¸ªç™»å½•é¡µ</code>ï¼Œå®ƒå°±æŒ‰ä½ çš„è§„çŸ©å¹²æ´»ï¼</p>
<hr/>
<h2 data-id="heading-7">ğŸš€ ç»ˆæé»‘ç§‘æŠ€ï¼šSOLO æ¨¡å¼</h2>
<p>SOLO æ¨¡å¼æ‰æ˜¯ Trae çš„â€œç‹ç‚¸â€ï¼šä½ åªè¯´â€œæˆ‘è¦åšä¸ªå¾…åŠæ¸…å•ç½‘ç«™â€ï¼Œå®ƒä¼šï¼š</p>
<ol>
<li>è‡ªåŠ¨è§„åˆ’æŠ€æœ¯æ ˆï¼ˆFlask + SQLite + HTMXï¼‰</li>
<li>ç”Ÿæˆæ‰€æœ‰æ–‡ä»¶ + æµ‹è¯•ç”¨ä¾‹</li>
<li>å†™å¥½ README å’Œéƒ¨ç½²æ–‡æ¡£</li>
<li><strong>ä¸€é”®éƒ¨ç½²åˆ° Vercel</strong></li>
<li>æµè§ˆå™¨é‡Œç›´æ¥é¢„è§ˆï¼</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e98fb130d0149e2bc19722721940404~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517031&amp;x-signature=9ILqk8cVwqgzg6ru60mi%2BJaksjk%3D" alt="SOLO æ¨¡å¼" loading="lazy"/></p>
<blockquote>
<p>â— ç›®å‰ SOLO ä»…é™é‚€è¯·ç”¨æˆ·ï¼Œè¿ä»˜è´¹ç”¨æˆ·éƒ½æœªå¿…èƒ½ç”¨ã€‚ä½†<strong>é¦–æœˆ $3 çš„æœºä¼šæˆæœ¬å¤ªä½</strong>ï¼Œå€¼å¾—ä¸€è¯•ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ğŸ†š Trae vs Cursorï¼šè°æ›´é¦™ï¼Ÿ</h2>













































<table><thead><tr><th>åŠŸèƒ½</th><th>Trae AI</th><th>Cursor</th></tr></thead><tbody><tr><td>ä»·æ ¼</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mtext>ï¼ˆé¦–æœˆ</mtext></mrow><annotation encoding="application/x-tex">10ï¼ˆé¦–æœˆ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">10</span><span class="mord cjk_fallback">ï¼ˆé¦–æœˆ</span></span></span></span></span>3ï¼‰</td><td>$20</td></tr><tr><td>è‡ªå®šä¹‰ä»£ç†</td><td>âœ…</td><td>âŒ</td></tr><tr><td>ä¸€é”®éƒ¨ç½²</td><td>âœ…ï¼ˆVercelï¼‰</td><td>âŒ</td></tr><tr><td>å†…ç½®æµè§ˆå™¨</td><td>âœ…</td><td>âŒ</td></tr><tr><td>èƒŒæ™¯è¿è¡Œ</td><td>âŒ</td><td>âœ…</td></tr><tr><td>ç§»åŠ¨ç«¯/Slack</td><td>âŒ</td><td>âœ…</td></tr><tr><td>ç•Œé¢é¢œå€¼</td><td>â­â­â­â­â­</td><td>â­â­â­</td></tr></tbody></table>
<p><strong>ç»“è®º</strong>ï¼šå¦‚æœä½ æƒ³è¦<strong>æ–°æ½®ã€ä¾¿å®œã€åŠŸèƒ½å¼º</strong>çš„ AI IDEï¼ŒTrae æ˜¯å½“å‰æ€§ä»·æ¯”ä¹‹ç‹ï¼</p>
<hr/>
<p><strong>å½©è›‹</strong>ï¼šTrae è¿˜æ”¯æŒä» VS Code / Cursor <strong>ä¸€é”®å¯¼å…¥è®¾ç½®</strong>ï¼Œè¿ç§»æˆæœ¬å‡ ä¹ä¸ºé›¶ï¼</p>
<p>å¿«å»è¯•è¯•å§ï¼Œè¯´ä¸å®šä½ çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ï¼Œå°±æ˜¯ AI å’Œä½ ä¸€èµ·â€œç»“å¯¹ç¼–ç¨‹â€å®Œæˆçš„ ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ubuntu24.02å®‰è£…pythonåº“ä»¥åŠéƒ¨ç½²pythoné¡¹ç›®]]></title>    <link>https://juejin.cn/post/7571334572768935979</link>    <guid>https://juejin.cn/post/7571334572768935979</guid>    <pubDate>2025-11-12T00:57:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571334572768935979" data-draft-id="7571306072422924330" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ubuntu24.02å®‰è£…pythonåº“ä»¥åŠéƒ¨ç½²pythoné¡¹ç›®"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-11-12T00:57:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©ä¸‹ä¸å–µ"/> <meta itemprop="url" content="https://juejin.cn/user/9257993379453"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ubuntu24.02å®‰è£…pythonåº“ä»¥åŠéƒ¨ç½²pythoné¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/9257993379453/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©ä¸‹ä¸å–µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:57:05.000Z" title="Wed Nov 12 2025 00:57:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€. é—®é¢˜å¼•å…¥</h2>
<p>åœ¨æœåŠ¡å™¨çš„ç³»ç»Ÿé•œåƒæ¢åˆ°æœ€æ–°çš„Ubuntu24.02åï¼ŒåŸå…ˆçš„pythonå®‰è£…æœºåˆ¶å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹‹å‰çš„pipå®‰è£…çš„æ–¹å¼å˜å¾—ä¸å¯ç”¨ã€‚</p>
<h2 data-id="heading-1">äºŒ. é—®é¢˜åŠè§£å†³è®°å½•</h2>
<h3 data-id="heading-2">1.  pythonæŒ‡ä»¤ä¸å¯ç”¨</h3>
<p>æ‰§è¡ŒpythonæŒ‡ä»¤æŠ¥é”™:</p>
<pre><code class="hljs language-bash" lang="bash">python --version
    Command <span class="hljs-string">'python'</span> not found, did you mean:
    <span class="hljs-built_in">command</span> <span class="hljs-string">'python3'</span> from deb python3
    <span class="hljs-built_in">command</span> <span class="hljs-string">'python'</span> from deb python-is-python3
</code></pre>
<p>åŸå› :Ubuntu24.02è‡ªå¸¦python3
è§£å†³æ–¹æ³•: <code>python3 --version</code></p>
<h3 data-id="heading-3">2. æœªå®‰è£…pip</h3>
<p>æ‰§è¡ŒpipæŒ‡ä»¤æŠ¥é”™æœªå®‰è£…:</p>
<pre><code class="hljs language-bash" lang="bash">pip list packages
Command <span class="hljs-string">'pip'</span> not found, but can be installed with:
sudo apt install python3-pip
</code></pre>
<p>åŸå› :æœªå®‰è£…pip
è§£å†³æ–¹æ³•:</p>
<pre><code class="hljs language-bash" lang="bash">sudo apt install python-pip
</code></pre>
<h3 data-id="heading-4">3. éƒ¨ç½²pythoné¡¹ç›®</h3>
<p><strong>åœ¨è¾ƒæ–°çš„ Ubuntu ç‰ˆæœ¬ä¸­ï¼Œç³»ç»Ÿ Python ç¯å¢ƒè¢«æ ‡è®°ä¸º"å¤–éƒ¨ç®¡ç†ç¯å¢ƒ"ï¼Œä¸å†æ”¯æŒç›´æ¥ä½¿ç”¨pipå®‰è£…å¸è½½pythonåº“ï¼Œè¿™æ˜¯ä¸ºäº†ä¿æŠ¤ç³»ç»Ÿå®Œæ•´æ€§ã€‚</strong></p>
<h4 data-id="heading-5">æ–¹æ³•1ï¼Œä½¿ç”¨apt install å®‰è£…ç›¸åº”çš„pythonåº“(ä¸æ¨è)</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰ FastAPI çš„åŒ…</span>
apt search fastapi
sudo apt install python3-venv
sudo apt install python3-pip
</code></pre>
<h4 data-id="heading-6">æ–¹æ³•2. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå®‰è£…ç›¸åº”çš„pythonåº“(æ¨è)</h4>
<p><strong>æ¨èä½¿ç”¨æ–¹æ¡ˆ2.ï¼ˆè™šæ‹Ÿç¯å¢ƒï¼‰</strong> ï¼Œè¿™æ˜¯ Python å¼€å‘çš„æœ€ä½³å®è·µï¼Œå¯ä»¥é¿å…åŒ…å†²çªå’Œç³»ç»Ÿç¯å¢ƒæ±¡æŸ“ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…è™šæ‹Ÿç¯å¢ƒå·¥å…·</span>
sudo apt install python3.12-venv

<span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
python3 -m venv myenv

<span class="hljs-comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span>
<span class="hljs-built_in">source</span> myenv/bin/activate

<span class="hljs-comment"># åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£… FastAPI</span>
pip install fastapi uvicorn

<span class="hljs-comment"># ä½¿ç”¨å®Œæˆåé€€å‡ºè™šæ‹Ÿç¯å¢ƒ</span>
<span class="hljs-comment"># deactivate</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[pythonç¬¬ä¸‰æ–¹åº“å¯ä»¥å¤„ç†å¤šçº¿ç¨‹è¯·æ±‚æ¥å£ç»“æœé¡ºåºé—®é¢˜ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571338749198172210</link>    <guid>https://juejin.cn/post/7571338749198172210</guid>    <pubDate>2025-11-12T00:13:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571338749198172210" data-draft-id="7571332468898103323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="pythonç¬¬ä¸‰æ–¹åº“å¯ä»¥å¤„ç†å¤šçº¿ç¨‹è¯·æ±‚æ¥å£ç»“æœé¡ºåºé—®é¢˜ï¼Ÿ"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-11-12T00:13:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·22176592792"/> <meta itemprop="url" content="https://juejin.cn/user/4461135061323432"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            pythonç¬¬ä¸‰æ–¹åº“å¯ä»¥å¤„ç†å¤šçº¿ç¨‹è¯·æ±‚æ¥å£ç»“æœé¡ºåºé—®é¢˜ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4461135061323432/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·22176592792
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:13:13.000Z" title="Wed Nov 12 2025 00:13:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é™¤äº†ä¹‹å‰æåˆ°çš„æ ‡å‡†åº“æ–¹æ¡ˆå’Œ â€‹<code>â€‹aiohttpâ€‹</code>â€‹ï¼ˆå¼‚æ­¥åº“ï¼‰ï¼Œè¿˜æœ‰å¤šä¸ª <strong>ç¬¬ä¸‰æ–¹åº“</strong> å¯ä¼˜é›…å¤„ç†å¤šçº¿ç¨‹/å¹¶å‘è¯·æ±‚çš„ç»“æœé¡ºåºé—®é¢˜ï¼Œæ ¸å¿ƒä¼˜åŠ¿æ˜¯ <strong>å°è£…å®Œå–„ã€æ— éœ€æ‰‹åŠ¨å¤„ç†çº¿ç¨‹å®‰å…¨/æ’åºé€»è¾‘</strong>ï¼ŒåŒæ—¶å…¼é¡¾å¹¶å‘æ•ˆç‡ã€‚ä»¥ä¸‹æ˜¯ 4 ä¸ªé«˜é¢‘å®ç”¨åº“ï¼Œé™„å…·ä½“å®ç°å’Œåœºæ™¯é€‚é…ï¼š</p>
<h4 data-id="heading-0">ä¸€ã€â€‹<code>â€‹grequestsâ€‹</code>â€‹ï¼ˆrequests + geventï¼Œåç¨‹å¹¶å‘+æœ‰åºç»“æœï¼‰</h4>
<h5 data-id="heading-1">æ ¸å¿ƒç‰¹ç‚¹</h5>
<ul>
<li>åŸºäº â€‹<code>â€‹requestsâ€‹</code>â€‹ï¼ˆå…¼å®¹å…¶æ‰€æœ‰ APIï¼‰å’Œ â€‹<code>â€‹geventâ€‹</code>â€‹ï¼ˆåç¨‹åº“ï¼‰ï¼Œæœ¬è´¨æ˜¯â€œåç¨‹å¹¶å‘â€ï¼ˆéå¤šçº¿ç¨‹ï¼Œä½†æ•ˆç‡é«˜äºå¤šçº¿ç¨‹ï¼Œæ—  GIL é™åˆ¶ï¼‰ï¼›</li>
<li>å¤©ç„¶æ”¯æŒ <strong>ç»“æœé¡ºåºä¸è¯·æ±‚æäº¤é¡ºåºä¸€è‡´</strong>ï¼ˆé€šè¿‡ â€‹<code>â€‹grequests.map()â€‹</code>â€‹ å®ç°ï¼‰ï¼›</li>
<li>è¯­æ³•æç®€ï¼Œå‡ ä¹æ— éœ€ä¿®æ”¹åŸæœ‰ â€‹<code>â€‹requestsâ€‹</code>â€‹ ä»£ç ï¼Œå³å¯å®ç°é«˜å¹¶å‘ã€‚</li>
</ul>
<h5 data-id="heading-2">å®‰è£…</h5>
<pre><code class="hljs">pip install grequests
</code></pre>
<h5 data-id="heading-3">å®Œæ•´å®ç°ï¼ˆæœ‰åºç»“æœï¼‰</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> grequests
<span class="hljs-keyword">import</span> time

API_URL = <span class="hljs-string">"https://jsonplaceholder.typicode.com/posts/{}"</span>
TOTAL_REQUESTS = <span class="hljs-number">20</span>
TIMEOUT = <span class="hljs-number">5</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">request_api</span>(<span class="hljs-params">index: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">tuple</span>:
    <span class="hljs-string">"""å•ä¸ªè¯·æ±‚å‡½æ•°ï¼šè¿”å›ï¼ˆç´¢å¼•ï¼Œæ˜¯å¦æˆåŠŸï¼Œç»“æœä¿¡æ¯ï¼‰"""</span>
    url = API_URL.<span class="hljs-built_in">format</span>(index % <span class="hljs-number">10</span> + <span class="hljs-number">1</span>)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># ç”¨ grequests.get æ›¿ä»£ requests.getï¼Œæ”¯æŒåç¨‹å¹¶å‘</span>
        response = grequests.get(url, timeout=TIMEOUT)
        response.send()  <span class="hljs-comment"># å‘é€è¯·æ±‚ï¼ˆéé˜»å¡ï¼‰</span>
        response = response.response  <span class="hljs-comment"># è·å–å“åº”å¯¹è±¡</span>
        response.raise_for_status()
        <span class="hljs-keyword">return</span> (index, <span class="hljs-literal">True</span>, <span class="hljs-string">f"å“åº”ï¼š<span class="hljs-subst">{response.json()[<span class="hljs-string">'title'</span>][:<span class="hljs-number">20</span>]}</span>..."</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">return</span> (index, <span class="hljs-literal">False</span>, <span class="hljs-string">f"å¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)[:<span class="hljs-number">30</span>]}</span>"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    start_time = time.time()

    <span class="hljs-comment"># 1. æ„é€ è¯·æ±‚åˆ—è¡¨ï¼ˆæŒ‰é¡ºåºæäº¤ï¼‰</span>
    requests_list = [grequests.get(API_URL.<span class="hljs-built_in">format</span>(i % <span class="hljs-number">10</span> + <span class="hljs-number">1</span>), timeout=TIMEOUT) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(TOTAL_REQUESTS)]
    
    <span class="hljs-comment"># 2. å¹¶å‘æ‰§è¡Œï¼Œmap æ–¹æ³•ä¿è¯ç»“æœé¡ºåºä¸è¯·æ±‚é¡ºåºä¸€è‡´</span>
    responses = grequests.<span class="hljs-built_in">map</span>(requests_list, size=<span class="hljs-number">10</span>)  <span class="hljs-comment"># size=å¹¶å‘æ•°ï¼ˆç±»ä¼¼çº¿ç¨‹æ± å¤§å°ï¼‰</span>

    <span class="hljs-comment"># 3. æŒ‰é¡ºåºå¤„ç†ç»“æœï¼ˆresponses é¡ºåº = è¯·æ±‚æäº¤é¡ºåºï¼‰</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"grequests åç¨‹å¹¶å‘ - æŒ‰è¯·æ±‚é¡ºåºè¾“å‡ºï¼š"</span>)
    <span class="hljs-keyword">for</span> idx, response <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(responses):
        <span class="hljs-keyword">if</span> response <span class="hljs-keyword">and</span> response.status_code == <span class="hljs-number">200</span>:
            msg = <span class="hljs-string">f"å“åº”ï¼š<span class="hljs-subst">{response.json()[<span class="hljs-string">'title'</span>][:<span class="hljs-number">20</span>]}</span>..."</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»»åŠ¡[<span class="hljs-subst">{idx}</span>]ï¼šâœ… <span class="hljs-subst">{msg}</span>"</span>)
        <span class="hljs-keyword">else</span>:
            err_msg = response.reason <span class="hljs-keyword">if</span> response <span class="hljs-keyword">else</span> <span class="hljs-string">"è¯·æ±‚è¶…æ—¶/å¤±è´¥"</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»»åŠ¡[<span class="hljs-subst">{idx}</span>]ï¼šâŒ å¤±è´¥ï¼š<span class="hljs-subst">{err_msg[:<span class="hljs-number">30</span>]}</span>"</span>)

    total_cost = <span class="hljs-built_in">round</span>(time.time() - start_time, <span class="hljs-number">3</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ€»è€—æ—¶ï¼š<span class="hljs-subst">{total_cost}</span>s"</span>)
</code></pre>
<h5 data-id="heading-4">å…³é”®ä¼˜åŠ¿&amp;åœºæ™¯</h5>
<ul>
<li>ä¼˜åŠ¿ï¼šè¯­æ³•ç®€æ´ï¼ˆå…¼å®¹ â€‹<code>â€‹requestsâ€‹</code>â€‹ï¼‰ã€å¹¶å‘æ•ˆç‡é«˜ï¼ˆåç¨‹æ— çº¿ç¨‹åˆ‡æ¢å¼€é”€ï¼‰ã€å¤©ç„¶æœ‰åºï¼›</li>
<li>åœºæ™¯ï¼šéœ€è¦é«˜å¹¶å‘æ¥å£è¯·æ±‚ï¼Œä¸”å¸Œæœ›ç»“æœä¸æäº¤é¡ºåºä¸€è‡´ï¼Œæ— éœ€å¤æ‚é…ç½®ã€‚</li>
</ul>
<h4 data-id="heading-5">äºŒã€â€‹<code>â€‹httpxâ€‹</code>â€‹ï¼ˆæ–°ä¸€ä»£ HTTP å®¢æˆ·ç«¯ï¼Œæ”¯æŒåŒæ­¥/å¼‚æ­¥+æœ‰åºç»“æœï¼‰</h4>
<h5 data-id="heading-6">æ ¸å¿ƒç‰¹ç‚¹</h5>
<ul>
<li>æ”¯æŒ <strong>åŒæ­¥ã€å¼‚æ­¥</strong> ä¸¤ç§æ¨¡å¼ï¼ŒAPI è®¾è®¡ä¼˜é›…ï¼Œå¯æ›¿ä»£ â€‹<code>â€‹requestsâ€‹</code>â€‹ï¼›</li>
<li>å¼‚æ­¥æ¨¡å¼åŸºäº â€‹<code>â€‹asyncioâ€‹</code>â€‹ï¼Œå¹¶å‘æ•ˆç‡é«˜ï¼Œä¸” â€‹<code>â€‹asyncio.gather()â€‹</code>â€‹ å¤©ç„¶ä¿è¯ç»“æœé¡ºåºï¼›</li>
<li>æ”¯æŒ HTTP/2ã€è¿æ¥æ± å¤ç”¨ï¼Œç¨³å®šæ€§ä¼˜äº â€‹<code>â€‹requestsâ€‹</code>â€‹ã€‚</li>
</ul>
<h5 data-id="heading-7">å®‰è£…</h5>
<pre><code class="hljs">pip install httpx
</code></pre>
<h5 data-id="heading-8">å®Œæ•´å®ç°ï¼ˆå¼‚æ­¥å¹¶å‘+æœ‰åºç»“æœï¼‰</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> httpx
<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> time

API_URL = <span class="hljs-string">"https://jsonplaceholder.typicode.com/posts/{}"</span>
TOTAL_REQUESTS = <span class="hljs-number">20</span>
TIMEOUT = <span class="hljs-number">5</span>
CONCURRENT_NUM = <span class="hljs-number">10</span>  <span class="hljs-comment"># å¹¶å‘æ•°</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">request_api</span>(<span class="hljs-params">client: httpx.AsyncClient, index: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">tuple</span>:
    <span class="hljs-string">"""å¼‚æ­¥è¯·æ±‚å‡½æ•°"""</span>
    url = API_URL.<span class="hljs-built_in">format</span>(index % <span class="hljs-number">10</span> + <span class="hljs-number">1</span>)
    <span class="hljs-keyword">try</span>:
        response = <span class="hljs-keyword">await</span> client.get(url, timeout=TIMEOUT)
        response.raise_for_status()
        data = response.json()
        <span class="hljs-keyword">return</span> (index, <span class="hljs-literal">True</span>, <span class="hljs-string">f"å“åº”ï¼š<span class="hljs-subst">{data[<span class="hljs-string">'title'</span>][:<span class="hljs-number">20</span>]}</span>..."</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">return</span> (index, <span class="hljs-literal">False</span>, <span class="hljs-string">f"å¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)[:<span class="hljs-number">30</span>]}</span>"</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    start_time = time.time()

    <span class="hljs-comment"># 1. åˆ›å»ºå¼‚æ­¥å®¢æˆ·ç«¯ï¼ˆæ”¯æŒè¿æ¥æ± å¤ç”¨ï¼‰</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.AsyncClient(limits=httpx.Limits(max_connections=CONCURRENT_NUM)) <span class="hljs-keyword">as</span> client:
        <span class="hljs-comment"># 2. æ„é€ å¼‚æ­¥ä»»åŠ¡åˆ—è¡¨ï¼ˆæŒ‰é¡ºåºæäº¤ï¼‰</span>
        tasks = [request_api(client, i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(TOTAL_REQUESTS)]
        <span class="hljs-comment"># 3. å¹¶å‘æ‰§è¡Œï¼Œgather ä¿è¯ç»“æœé¡ºåºä¸ä»»åŠ¡é¡ºåºä¸€è‡´</span>
        results = <span class="hljs-keyword">await</span> asyncio.gather(*tasks)

    <span class="hljs-comment"># 4. æŒ‰é¡ºåºè¾“å‡ºç»“æœ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"httpx å¼‚æ­¥å¹¶å‘ - æŒ‰è¯·æ±‚é¡ºåºè¾“å‡ºï¼š"</span>)
    <span class="hljs-keyword">for</span> idx, is_success, msg <span class="hljs-keyword">in</span> results:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»»åŠ¡[<span class="hljs-subst">{idx}</span>]ï¼š<span class="hljs-subst">{<span class="hljs-string">'âœ…'</span> <span class="hljs-keyword">if</span> is_success <span class="hljs-keyword">else</span> <span class="hljs-string">'âŒ'</span>}</span> <span class="hljs-subst">{msg}</span>"</span>)

    total_cost = <span class="hljs-built_in">round</span>(time.time() - start_time, <span class="hljs-number">3</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ€»è€—æ—¶ï¼š<span class="hljs-subst">{total_cost}</span>s"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># å…¼å®¹ Windows ç³»ç»Ÿ</span>
    <span class="hljs-keyword">import</span> sys
    <span class="hljs-keyword">if</span> sys.platform == <span class="hljs-string">"win32"</span>:
        asyncio.set_event_loop_policy(asyncio.WindowsSelectorEventLoopPolicy())
    asyncio.run(main())
</code></pre>
<h5 data-id="heading-9">å…³é”®ä¼˜åŠ¿&amp;åœºæ™¯</h5>
<ul>
<li>ä¼˜åŠ¿ï¼šæ”¯æŒåŒæ­¥/å¼‚æ­¥åˆ‡æ¢ã€HTTP/2 ç‰¹æ€§ã€è¿æ¥æ± ä¼˜åŒ–ã€å¤©ç„¶æœ‰åºï¼›</li>
<li>åœºæ™¯ï¼šéœ€è¦æ›¿ä»£ â€‹<code>â€‹requestsâ€‹</code>â€‹ ä¸”è¿½æ±‚æ›´é«˜æ€§èƒ½ï¼ŒåŒæ—¶è¦æ±‚ç»“æœæœ‰åºçš„å¹¶å‘è¯·æ±‚ã€‚</li>
</ul>
<h4 data-id="heading-10">ä¸‰ã€â€‹<code>â€‹tenacityâ€‹</code>â€‹ï¼ˆé‡è¯•+ç»“åˆå¤šçº¿ç¨‹/å¼‚æ­¥ï¼Œä¿è¯æœ‰åºç»“æœï¼‰</h4>
<h5 data-id="heading-11">æ ¸å¿ƒç‰¹ç‚¹</h5>
<ul>
<li>å¹¶éä¸“é—¨çš„ HTTP åº“ï¼Œè€Œæ˜¯ <strong>é‡è¯•åº“</strong>ï¼Œå¯ä¸ â€‹<code>â€‹requestsâ€‹</code>â€‹ã€â€‹<code>â€‹aiohttpâ€‹</code>â€‹ã€â€‹<code>â€‹ThreadPoolExecutorâ€‹</code>â€‹ ç»“åˆï¼›</li>
<li>æ”¯æŒå¤±è´¥è‡ªåŠ¨é‡è¯•ï¼ˆæŒ‡å®šé‡è¯•æ¡ä»¶ã€é—´éš”ã€æ¬¡æ•°ï¼‰ï¼ŒåŒæ—¶ä¸ç ´åç»“æœé¡ºåºï¼›</li>
<li>é€‚åˆæ¥å£ä¸ç¨³å®šåœºæ™¯ï¼Œç¡®ä¿æœ‰åºç»“æœçš„åŒæ—¶æå‡æˆåŠŸç‡ã€‚</li>
</ul>
<h5 data-id="heading-12">å®‰è£…</h5>
<pre><code class="hljs">pip install tenacity
</code></pre>
<h5 data-id="heading-13">å®Œæ•´å®ç°ï¼ˆç»“åˆ ThreadPoolExecutor + é‡è¯•+æœ‰åºç»“æœï¼‰</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor
<span class="hljs-keyword">from</span> tenacity <span class="hljs-keyword">import</span> retry, stop_after_attempt, wait_exponential, retry_if_exception_type
<span class="hljs-keyword">import</span> time

API_URL = <span class="hljs-string">"https://jsonplaceholder.typicode.com/posts/{}"</span>
THREAD_NUM = <span class="hljs-number">10</span>
TOTAL_REQUESTS = <span class="hljs-number">20</span>
TIMEOUT = <span class="hljs-number">5</span>

<span class="hljs-comment"># é…ç½®é‡è¯•ç­–ç•¥ï¼šå¤±è´¥æœ€å¤šé‡è¯• 2 æ¬¡ï¼Œæ¯æ¬¡é—´éš” 1sã€2sï¼ˆæŒ‡æ•°é€€é¿ï¼‰</span>
<span class="hljs-meta">@retry(<span class="hljs-params">
    stop=stop_after_attempt(<span class="hljs-params"><span class="hljs-number">2</span></span>),  <span class="hljs-comment"># æœ€å¤šé‡è¯• 2 æ¬¡</span>
    wait=wait_exponential(<span class="hljs-params">multiplier=<span class="hljs-number">1</span>, <span class="hljs-built_in">min</span>=<span class="hljs-number">1</span>, <span class="hljs-built_in">max</span>=<span class="hljs-number">5</span></span>),  <span class="hljs-comment"># é‡è¯•é—´éš”ï¼š1sã€2sã€4s...</span>
    retry=retry_if_exception_type(<span class="hljs-params">(<span class="hljs-params">requests.exceptions.Timeout, requests.exceptions.ConnectionError</span>)</span>)  <span class="hljs-comment"># ä»…å¯¹è¶…æ—¶/è¿æ¥é”™è¯¯é‡è¯•</span>
</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">request_api</span>(<span class="hljs-params">index: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">tuple</span>:
    <span class="hljs-string">"""å•ä¸ªè¯·æ±‚å‡½æ•°ï¼ˆå¸¦é‡è¯•ï¼‰"""</span>
    url = API_URL.<span class="hljs-built_in">format</span>(index % <span class="hljs-number">10</span> + <span class="hljs-number">1</span>)
    <span class="hljs-keyword">try</span>:
        response = requests.get(url, timeout=TIMEOUT)
        response.raise_for_status()
        <span class="hljs-keyword">return</span> (index, <span class="hljs-literal">True</span>, <span class="hljs-string">f"å“åº”ï¼š<span class="hljs-subst">{response.json()[<span class="hljs-string">'title'</span>][:<span class="hljs-number">20</span>]}</span>..."</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">return</span> (index, <span class="hljs-literal">False</span>, <span class="hljs-string">f"å¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)[:<span class="hljs-number">30</span>]}</span>"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    start_time = time.time()

    <span class="hljs-comment"># ç»“åˆ ThreadPoolExecutor æœ‰åºæ”¶é›†ç»“æœ</span>
    <span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=THREAD_NUM) <span class="hljs-keyword">as</span> executor:
        future_list = [executor.submit(request_api, i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(TOTAL_REQUESTS)]
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ThreadPoolExecutor + tenacity é‡è¯• - æŒ‰è¯·æ±‚é¡ºåºè¾“å‡ºï¼š"</span>)
        <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> future_list:  <span class="hljs-comment"># æŒ‰æäº¤é¡ºåºè·å–ç»“æœï¼ˆæœ‰åºï¼‰</span>
            idx, is_success, msg = future.result()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»»åŠ¡[<span class="hljs-subst">{idx}</span>]ï¼š<span class="hljs-subst">{<span class="hljs-string">'âœ…'</span> <span class="hljs-keyword">if</span> is_success <span class="hljs-keyword">else</span> <span class="hljs-string">'âŒ'</span>}</span> <span class="hljs-subst">{msg}</span>"</span>)

    total_cost = <span class="hljs-built_in">round</span>(time.time() - start_time, <span class="hljs-number">3</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ€»è€—æ—¶ï¼š<span class="hljs-subst">{total_cost}</span>s"</span>)
</code></pre>
<h5 data-id="heading-14">å…³é”®ä¼˜åŠ¿&amp;åœºæ™¯</h5>
<ul>
<li>ä¼˜åŠ¿ï¼šä¸“æ³¨é‡è¯•é€»è¾‘ï¼Œä¸å½±å“ç»“æœé¡ºåºï¼Œå¯ä¸ä»»æ„å¹¶å‘æ–¹æ¡ˆç»“åˆï¼›</li>
<li>åœºæ™¯ï¼šæ¥å£ä¸ç¨³å®šï¼ˆè¶…æ—¶ã€è¿æ¥é”™è¯¯é¢‘ç¹ï¼‰ï¼Œéœ€è¦ä¿è¯æœ‰åºç»“æœä¸”æå‡æˆåŠŸç‡ã€‚</li>
</ul>
<h4 data-id="heading-15">å››ã€â€‹<code>â€‹trioâ€‹</code>â€‹ï¼ˆå¼‚æ­¥å¹¶å‘åº“ï¼Œæ›´ç®€æ´çš„æœ‰åºç»“æœå¤„ç†ï¼‰</h4>
<h5 data-id="heading-16">æ ¸å¿ƒç‰¹ç‚¹</h5>
<ul>
<li>åŸºäº â€‹<code>â€‹asyncioâ€‹</code>â€‹ çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä¸“æ³¨â€œç»“æ„åŒ–å¹¶å‘â€ï¼ŒAPI æ›´ç®€æ´ã€é”™è¯¯å¤„ç†æ›´ä¼˜é›…ï¼›</li>
<li>å¤©ç„¶æ”¯æŒç»“æœé¡ºåºä¸ä»»åŠ¡æäº¤é¡ºåºä¸€è‡´ï¼Œæ— éœ€é¢å¤–æ’åºï¼›</li>
<li>é€‚åˆè¿½æ±‚ç®€æ´å¼‚æ­¥ä»£ç ï¼ŒåŒæ—¶è¦æ±‚æœ‰åºç»“æœçš„åœºæ™¯ã€‚</li>
</ul>
<h5 data-id="heading-17">å®‰è£…</h5>
<pre><code class="hljs language-arduino" lang="arduino">pip install trio httpx-trio  <span class="hljs-meta"># httpx-trio æ˜¯ httpx çš„ trio é€‚é…åº“</span>
</code></pre>
<h5 data-id="heading-18">å®Œæ•´å®ç°ï¼ˆå¼‚æ­¥å¹¶å‘+æœ‰åºç»“æœï¼‰</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> trio
<span class="hljs-keyword">import</span> httpx
<span class="hljs-keyword">import</span> time

API_URL = <span class="hljs-string">"https://jsonplaceholder.typicode.com/posts/{}"</span>
TOTAL_REQUESTS = <span class="hljs-number">20</span>
TIMEOUT = <span class="hljs-number">5</span>
CONCURRENT_NUM = <span class="hljs-number">10</span>  <span class="hljs-comment"># æœ€å¤§å¹¶å‘æ•°</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">request_api</span>(<span class="hljs-params">client: httpx.AsyncClient, index: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">tuple</span>:
    <span class="hljs-string">"""å¼‚æ­¥è¯·æ±‚å‡½æ•°"""</span>
    url = API_URL.<span class="hljs-built_in">format</span>(index % <span class="hljs-number">10</span> + <span class="hljs-number">1</span>)
    <span class="hljs-keyword">try</span>:
        response = <span class="hljs-keyword">await</span> client.get(url, timeout=TIMEOUT)
        response.raise_for_status()
        data = response.json()
        <span class="hljs-keyword">return</span> (index, <span class="hljs-literal">True</span>, <span class="hljs-string">f"å“åº”ï¼š<span class="hljs-subst">{data[<span class="hljs-string">'title'</span>][:<span class="hljs-number">20</span>]}</span>..."</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">return</span> (index, <span class="hljs-literal">False</span>, <span class="hljs-string">f"å¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)[:<span class="hljs-number">30</span>]}</span>"</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    start_time = time.time()

    <span class="hljs-comment"># 1. åˆ›å»ºå¼‚æ­¥å®¢æˆ·ç«¯ï¼ˆç»“åˆ trioï¼‰</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.AsyncClient(limits=httpx.Limits(max_connections=CONCURRENT_NUM)) <span class="hljs-keyword">as</span> client:
        <span class="hljs-comment"># 2. æ„é€ ä»»åŠ¡åˆ—è¡¨ï¼ˆæŒ‰é¡ºåºï¼‰ï¼Œç”¨ trio.gather å¹¶å‘æ‰§è¡Œå¹¶ä¿è¯é¡ºåº</span>
        results = <span class="hljs-keyword">await</span> trio.gather(*[request_api(client, i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(TOTAL_REQUESTS)])

    <span class="hljs-comment"># 3. æŒ‰é¡ºåºè¾“å‡ºç»“æœ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"trio + httpx å¼‚æ­¥å¹¶å‘ - æŒ‰è¯·æ±‚é¡ºåºè¾“å‡ºï¼š"</span>)
    <span class="hljs-keyword">for</span> idx, is_success, msg <span class="hljs-keyword">in</span> results:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»»åŠ¡[<span class="hljs-subst">{idx}</span>]ï¼š<span class="hljs-subst">{<span class="hljs-string">'âœ…'</span> <span class="hljs-keyword">if</span> is_success <span class="hljs-keyword">else</span> <span class="hljs-string">'âŒ'</span>}</span> <span class="hljs-subst">{msg}</span>"</span>)

    total_cost = <span class="hljs-built_in">round</span>(time.time() - start_time, <span class="hljs-number">3</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ€»è€—æ—¶ï¼š<span class="hljs-subst">{total_cost}</span>s"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    trio.run(main())  <span class="hljs-comment"># trio è‡ªå¸¦äº‹ä»¶å¾ªç¯ï¼Œæ— éœ€æ‰‹åŠ¨å¯åŠ¨</span>
</code></pre>
<h5 data-id="heading-19">å…³é”®ä¼˜åŠ¿&amp;åœºæ™¯</h5>
<ul>
<li>ä¼˜åŠ¿ï¼šç»“æ„åŒ–å¹¶å‘ã€API ç®€æ´ã€é”™è¯¯å¤„ç†ä¼˜é›…ã€å¤©ç„¶æœ‰åºï¼›</li>
<li>åœºæ™¯ï¼šå–œæ¬¢å¼‚æ­¥ç¼–ç¨‹ï¼Œä¸”è¿½æ±‚ä»£ç ç®€æ´æ€§ï¼Œéœ€è¦æœ‰åºç»“æœçš„å¹¶å‘è¯·æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-20">ç¬¬ä¸‰æ–¹åº“å¯¹æ¯”&amp;é€‰å‹å»ºè®®</h3>



































<table><thead><tr><th>åº“å</th><th>æ ¸å¿ƒæœºåˆ¶</th><th>å…³é”®ä¼˜åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>grequests</td><td>åç¨‹ï¼ˆgeventï¼‰</td><td>å…¼å®¹ requestsã€è¯­æ³•æç®€ã€å¹¶å‘æ•ˆç‡é«˜</td><td>å¿«é€Ÿæ›¿æ¢ requests å®ç°é«˜å¹¶å‘+æœ‰åºç»“æœ</td></tr><tr><td>httpx</td><td>å¼‚æ­¥ï¼ˆasyncioï¼‰</td><td>æ”¯æŒåŒæ­¥/å¼‚æ­¥ã€HTTP/2ã€è¿æ¥æ± ä¼˜åŒ–</td><td>æ›¿ä»£ requests ä¸”è¿½æ±‚é«˜æ€§èƒ½+æœ‰åºç»“æœ</td></tr><tr><td>tenacity</td><td>é‡è¯•æœºåˆ¶</td><td>ä¸“æ³¨å¤±è´¥é‡è¯•ã€å¯ä¸ä»»æ„å¹¶å‘æ–¹æ¡ˆç»“åˆ</td><td>æ¥å£ä¸ç¨³å®šï¼Œéœ€è¦é‡è¯•+æœ‰åºç»“æœ</td></tr><tr><td>trio</td><td>ç»“æ„åŒ–å¹¶å‘</td><td>ä»£ç ç®€æ´ã€é”™è¯¯å¤„ç†ä¼˜é›…</td><td>å¼‚æ­¥ç¼–ç¨‹çˆ±å¥½è€…ï¼Œè¿½æ±‚ç®€æ´æ€§+æœ‰åºç»“æœ</td></tr></tbody></table>
<h3 data-id="heading-21">é¢è¯•&amp;å®æˆ˜å…³é”®è¦ç‚¹</h3>
<ol>
<li><strong>å¹¶å‘æ¨¡å‹ä¼˜å…ˆé€‰å¼‚æ­¥</strong>ï¼šâ€‹<code>â€‹grequestsâ€‹</code>â€‹ã€â€‹<code>â€‹httpxâ€‹</code>â€‹ã€â€‹<code>â€‹trioâ€‹</code>â€‹ å‡åŸºäºåç¨‹/å¼‚æ­¥ï¼Œæ•ˆç‡é«˜äºå¤šçº¿ç¨‹ï¼ˆæ—  GIL é™åˆ¶ã€æ— çº¿ç¨‹åˆ‡æ¢å¼€é”€ï¼‰ï¼Œæ˜¯æ¥å£è¯·æ±‚çš„æœ€ä¼˜è§£ï¼›</li>
<li><strong>æœ‰åºçš„æ ¸å¿ƒæ˜¯â€œä»»åŠ¡ä¸ç»“æœç»‘å®šâ€</strong> ï¼šæ‰€æœ‰åº“çš„æœ‰åºæ€§æœ¬è´¨æ˜¯â€œæäº¤é¡ºåº=ä»»åŠ¡åˆ—è¡¨é¡ºåº=ç»“æœåˆ—è¡¨é¡ºåºâ€ï¼Œæ— éœ€æ‰‹åŠ¨æ’åºï¼›</li>
<li><strong>ç»“åˆåœºæ™¯é€‰æ‹©åº“</strong>ï¼š</li>
</ol>
<ul>
<li>ç®€å•åœºæ™¯ï¼šç”¨ â€‹<code>â€‹grequestsâ€‹</code>â€‹ï¼ˆæœ€å¿«ä¸Šæ‰‹ï¼‰ï¼›</li>
<li>é«˜æ€§èƒ½åœºæ™¯ï¼šç”¨ â€‹<code>â€‹httpxâ€‹</code>â€‹ï¼ˆæ”¯æŒ HTTP/2ï¼‰ï¼›</li>
<li>æ¥å£ä¸ç¨³å®šï¼šç”¨ â€‹<code>â€‹tenacityâ€‹</code>â€‹+ä»»æ„å¹¶å‘åº“ï¼ˆé‡è¯•ä¿éšœï¼‰ï¼›</li>
<li>å¼‚æ­¥ç®€æ´æ€§ï¼šç”¨ â€‹<code>â€‹trioâ€‹</code>â€‹ï¼›</li>
</ul>
<ol start="4">
<li><strong>é¿å…è¿‡åº¦ä¾èµ–åº“</strong>ï¼šæ ¸å¿ƒéœ€æ±‚æ˜¯â€œæœ‰åº+å¹¶å‘â€ï¼Œä¼˜å…ˆé€‰æ ‡å‡†åº“ï¼ˆâ€‹<code>â€‹ThreadPoolExecutorâ€‹</code>â€‹ã€â€‹<code>â€‹asyncioâ€‹</code>â€‹ï¼‰ï¼Œå¤æ‚åœºæ™¯å†å¼•å…¥ç¬¬ä¸‰æ–¹åº“ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[012.ä»Šå¤©æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªâ€œè‡ªå·±çš„ GPTâ€]]></title>    <link>https://juejin.cn/post/7571316028322250787</link>    <guid>https://juejin.cn/post/7571316028322250787</guid>    <pubDate>2025-11-12T01:52:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571316028322250787" data-draft-id="7571355989132902415" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="012.ä»Šå¤©æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªâ€œè‡ªå·±çš„ GPTâ€"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-12T01:52:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å±±æµ·å®ˆé—¨äºº"/> <meta itemprop="url" content="https://juejin.cn/user/3868524948238876"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            012.ä»Šå¤©æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªâ€œè‡ªå·±çš„ GPTâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3868524948238876/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å±±æµ·å®ˆé—¨äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T01:52:47.000Z" title="Wed Nov 12 2025 01:52:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¯¥æ•™ç¨‹æ—¨åœ¨å¸¦å¤§å®¶ä» 0 èµ·æ­¥ï¼ŒæŒæ¡ç”¨ Python å¼€å‘å¤§æ¨¡å‹åº”ç”¨çš„æŠ€èƒ½ã€‚è‹¥å½“å‰å†…å®¹è®©ä½ æ„Ÿåˆ°æ™¦æ¶©ï¼Œå¯å›æº¯æœ¬åˆé›†çš„å‰æœŸæ–‡ç« ï¼Œé™ä½å­¦ä¹ éš¾åº¦ã€‚</p>
</blockquote>
<h2 data-id="heading-0">1. å…ˆçœ‹æ¼”ç¤ºæ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f89a84c894749c6af112396fd105086~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGx5rW35a6I6Zeo5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517167&amp;x-signature=MEJqq8ewfDeNXTZq14CXOvUcqNU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ç°åŠŸèƒ½ï¼šå¯è‡ªå®šä¹‰ç§˜é’¥ï¼›æœ‰å¤šè½®è®°å¿†ï¼›å¯æ¸…é™¤å†å²å¯¹è¯ã€‚</p>
<h2 data-id="heading-1">2. å…·ä½“å®ç°</h2>
<h3 data-id="heading-2">2.1. å…ˆå†™å·¥å…·ç±»Â <code>get_chat_response</code></h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># utils.py</span>
<span class="hljs-keyword">import</span>Â os
<span class="hljs-keyword">from</span>Â langchain.chainsÂ <span class="hljs-keyword">import</span>Â ConversationChain
<span class="hljs-keyword">from</span>Â langchain.memoryÂ <span class="hljs-keyword">import</span>Â ConversationBufferMemory
<span class="hljs-keyword">from</span>Â langchain_deepseekÂ <span class="hljs-keyword">import</span>Â ChatDeepSeek

<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_chat_response</span>(<span class="hljs-params">prompt, memory, api_key</span>):
Â  Â  model = ChatDeepSeek(model=<span class="hljs-string">"deepseek-chat"</span>, api_key=api_key, temperature=<span class="hljs-number">0</span>)
Â  Â  chain = ConversationChain(llm=model, memory=memory)
Â  Â  response = chain.invoke({<span class="hljs-string">"input"</span>: prompt})
Â  Â  <span class="hljs-keyword">return</span>Â response[<span class="hljs-string">"response"</span>]
</code></pre>
<h3 data-id="heading-3">2.2. æœ¬åœ°æµ‹è¯•ä»£ç </h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># test.py</span>
<span class="hljs-keyword">from</span>Â utilsÂ <span class="hljs-keyword">import</span>Â get_chat_response
<span class="hljs-keyword">from</span>Â langchain.memoryÂ <span class="hljs-keyword">import</span>Â ConversationBufferMemory

memory = ConversationBufferMemory(return_messages=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">print</span>(get_chat_response(<span class="hljs-string">"ç‰›é¡¿æå‡ºå“ªäº›çŸ¥åå®šå¾‹ï¼Ÿ"</span>, memory, os.getenv(<span class="hljs-string">"DEEPSEEK_API_KEY"</span>)))
<span class="hljs-built_in">print</span>(get_chat_response(<span class="hljs-string">"æˆ‘ä¸Šä¸€ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ"</span>, memory, os.getenv(<span class="hljs-string">"DEEPSEEK_API_KEY"</span>)))
</code></pre>
<h3 data-id="heading-4">2.3. åˆ›å»º Streamlit é¡µé¢æ¡†æ¶</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># app.py</span>
<span class="hljs-keyword">import</span>Â streamlitÂ <span class="hljs-keyword">as</span>Â st
<span class="hljs-keyword">from</span>Â langchain.memoryÂ <span class="hljs-keyword">import</span>Â ConversationBufferMemory
<span class="hljs-keyword">from</span>Â utilsÂ <span class="hljs-keyword">import</span>Â get_chat_response

st.title(<span class="hljs-string">"å…‹éš†GPT"</span>)
</code></pre>
<h3 data-id="heading-5">2.4. è®©ç”¨æˆ·è¾“å…¥å¯†é’¥</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">with</span>Â st.sidebar:
Â  Â  deepseek_api_key = st.text_input(<span class="hljs-string">"è¯·è¾“å…¥DeepSeek APIå¯†é’¥ï¼š"</span>,Â <span class="hljs-built_in">type</span>=<span class="hljs-string">"password"</span>)
Â  Â  st.markdown(<span class="hljs-string">"[è·å–DeepSeek APIå¯†é’¥](https://platform.deepseek.com/api_keys)"</span>)
</code></pre>
<h3 data-id="heading-6">2.5. æŠŠ memory &amp; message æ”¾å…¥ session</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span>Â <span class="hljs-string">"memory"</span>Â <span class="hljs-keyword">not</span>Â <span class="hljs-keyword">in</span>Â st.session_state:
Â  Â  st.session_state[<span class="hljs-string">"memory"</span>] = ConversationBufferMemory(return_messages=<span class="hljs-literal">True</span>)
<span class="hljs-keyword">if</span>Â <span class="hljs-string">"message"</span>Â <span class="hljs-keyword">not</span>Â <span class="hljs-keyword">in</span>Â st.session_state:
Â  Â  st.session_state[<span class="hljs-string">"message"</span>] = [{<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"ai"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ"</span>}]
</code></pre>
<h3 data-id="heading-7">2.6. æ˜¾ç¤ºå†å²æ¶ˆæ¯ï¼ˆAI åˆå§‹æ¬¢è¿å·²åœ¨å†…ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">for</span>Â messageÂ <span class="hljs-keyword">in</span>Â st.session_state[<span class="hljs-string">"message"</span>]:
Â  Â  st.chat_message(message[<span class="hljs-string">"role"</span>]).write(message[<span class="hljs-string">"content"</span>])
</code></pre>
<h3 data-id="heading-8">2.7. è·å–ç”¨æˆ·è¾“å…¥</h3>
<pre><code class="hljs language-python" lang="python">prompt = st.chat_input()
<span class="hljs-keyword">if</span>Â prompt:
Â  Â  <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â deepseek_api_key:
Â  Â  Â  Â  st.info(<span class="hljs-string">"è¯·è¾“å…¥ä½ çš„API key"</span>)
Â  Â  Â  Â  st.stop()
Â  Â  <span class="hljs-comment"># 8. ç«‹å³å±•ç¤ºç”¨æˆ·æ¶ˆæ¯</span>
Â  Â  st.session_state[<span class="hljs-string">"message"</span>].append({<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"human"</span>,Â <span class="hljs-string">"content"</span>: prompt})
Â  Â  st.chat_message(<span class="hljs-string">"human"</span>).write(prompt)
</code></pre>
<h3 data-id="heading-9">2.8. è°ƒç”¨ AI å¹¶å›æ˜¾</h3>
<pre><code class="hljs language-python" lang="python">Â  Â  <span class="hljs-keyword">with</span>Â st.spinner(<span class="hljs-string">"AIæ­£åœ¨æ€è€ƒä¸­ï¼Œè¯·ç¨ç­‰..."</span>):
Â  Â  Â  Â  response = get_chat_response(prompt, st.session_state[<span class="hljs-string">"memory"</span>], deepseek_api_key)
Â  Â  <span class="hljs-comment"># 9. æŠŠ AI å›ç­”åŠ å…¥ä¼šè¯</span>
Â  Â  msg = {<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"ai"</span>,Â <span class="hljs-string">"content"</span>: response}
Â  Â  st.session_state[<span class="hljs-string">"message"</span>].append(msg)
Â  Â  st.chat_message(<span class="hljs-string">"ai"</span>).write(response)
</code></pre>
<h3 data-id="heading-10">2.9. æ·»åŠ æ¸…é™¤ä¼šè¯æŒ‰é’®</h3>
<pre><code class="hljs language-python" lang="python">Â  Â  <span class="hljs-keyword">if</span>Â st.button(<span class="hljs-string">"æ¸…é™¤å†å²å¯¹è¯"</span>):
Â  Â  Â  Â  st.session_state[<span class="hljs-string">"memory"</span>] = ConversationBufferMemory(return_messages=<span class="hljs-literal">True</span>)
Â  Â  Â  Â  st.session_state[<span class="hljs-string">"message"</span>] = [{<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"ai"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ"</span>}]
Â  Â  Â  Â  st.success(<span class="hljs-string">"å†å²å¯¹è¯å·²æ¸…é™¤"</span>)
</code></pre>
<h2 data-id="heading-11">3. å®Œæ•´ä»£ç </h2>
<h3 data-id="heading-12">3.1. æ–‡ä»¶ç»“æ„</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6b74c3159a044e9abb385515808adb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGx5rW35a6I6Zeo5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517167&amp;x-signature=t%2FU5UT8kZX9aGi1ItLgdd2YtOrk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-13">3.2. ä»£ç </h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span>Â os

<span class="hljs-keyword">from</span>Â langchain.chains.conversation.baseÂ <span class="hljs-keyword">import</span>Â ConversationChain
<span class="hljs-keyword">from</span>Â langchain.memoryÂ <span class="hljs-keyword">import</span>Â ConversationBufferMemory
<span class="hljs-keyword">from</span>Â langchain_deepseekÂ <span class="hljs-keyword">import</span>Â ChatDeepSeek


<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_chat_response</span>(<span class="hljs-params">prompt, memory, api_key</span>):
Â  Â  model = ChatDeepSeek(model=<span class="hljs-string">"deepseek-chat"</span>, api_key=api_key, temperature=<span class="hljs-number">0</span>)
Â  Â  chain = ConversationChain(llm=model, memory=memory)

Â  Â  response = chain.invoke({<span class="hljs-string">"input"</span>: prompt})
Â  Â  <span class="hljs-built_in">print</span>(response)
Â  Â  <span class="hljs-keyword">return</span>Â response[<span class="hljs-string">"response"</span>]

<span class="hljs-comment"># memory = ConversationBufferMemory(return_messages=True)</span>
<span class="hljs-comment"># print(get_chat_response("ç‰›é¡¿æå‡ºå“ªäº›çŸ¥åå®šå¾‹ï¼Ÿ", memory, os.getenv("DEEPSEEK_API_KEY")))</span>
<span class="hljs-comment"># print(get_chat_response("æˆ‘ä¸Šä¸€ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ", memory, os.getenv("DEEPSEEK_API_KEY")))</span>
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span>Â streamlitÂ <span class="hljs-keyword">as</span>Â st
<span class="hljs-keyword">from</span>Â langchain.memoryÂ <span class="hljs-keyword">import</span>Â ConversationBufferMemory

<span class="hljs-keyword">from</span>Â utilsÂ <span class="hljs-keyword">import</span>Â get_chat_response

st.title(<span class="hljs-string">"å…‹éš†GPT"</span>)

<span class="hljs-keyword">with</span>Â st.sidebar:
Â  Â  deepseek_api_key = st.text_input(<span class="hljs-string">"è¯·è¾“å…¥DeepSeek APIå¯†é’¥ï¼š"</span>,Â <span class="hljs-built_in">type</span>=<span class="hljs-string">"password"</span>)
Â  Â  st.markdown(<span class="hljs-string">"[è·å–DeepSeek APIå¯†é’¥](https://platform.deepseek.com/api_keys)"</span>)

Â  Â  <span class="hljs-comment"># æ·»åŠ æ¸…é™¤å¯¹è¯æŒ‰é’®</span>
Â  Â  <span class="hljs-keyword">if</span>Â st.button(<span class="hljs-string">"æ¸…é™¤å†å²å¯¹è¯"</span>):
Â  Â  Â  Â  <span class="hljs-comment"># é‡ç½®è®°å¿†å¯¹è±¡</span>
Â  Â  Â  Â  st.session_state[<span class="hljs-string">"memory"</span>] = ConversationBufferMemory(return_messages=<span class="hljs-literal">True</span>)
Â  Â  Â  Â  <span class="hljs-comment"># é‡ç½®æ¶ˆæ¯åˆ—è¡¨ï¼ˆä¿ç•™åˆå§‹æ¬¢è¿æ¶ˆæ¯ï¼‰</span>
Â  Â  Â  Â  st.session_state[<span class="hljs-string">"message"</span>] = [{<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"ai"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ"</span>}]
Â  Â  Â  Â  <span class="hljs-comment"># æ˜¾ç¤ºæ¸…é™¤æˆåŠŸæç¤º</span>
Â  Â  Â  Â  st.success(<span class="hljs-string">"å†å²å¯¹è¯å·²æ¸…é™¤"</span>)

<span class="hljs-comment"># åˆå§‹åŒ–ä¼šè¯çŠ¶æ€ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">if</span>Â <span class="hljs-string">"memory"</span>Â <span class="hljs-keyword">not</span>Â <span class="hljs-keyword">in</span>Â st.session_state:
Â  Â  st.session_state[<span class="hljs-string">"memory"</span>] = ConversationBufferMemory(return_messages=<span class="hljs-literal">True</span>)
<span class="hljs-keyword">if</span>Â <span class="hljs-string">"message"</span>Â <span class="hljs-keyword">not</span>Â <span class="hljs-keyword">in</span>Â st.session_state:
Â  Â  st.session_state[<span class="hljs-string">"message"</span>] = [{<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"ai"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ"</span>}]

<span class="hljs-comment"># æ˜¾ç¤ºå†å²æ¶ˆæ¯</span>
<span class="hljs-keyword">for</span>Â messageÂ <span class="hljs-keyword">in</span>Â st.session_state[<span class="hljs-string">"message"</span>]:
Â  Â  st.chat_message(message[<span class="hljs-string">"role"</span>]).write(message[<span class="hljs-string">"content"</span>])

<span class="hljs-comment"># å¤„ç†ç”¨æˆ·è¾“å…¥</span>
prompt = st.chat_input()
<span class="hljs-keyword">if</span>Â prompt:
Â  Â  <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â deepseek_api_key:
Â  Â  Â  Â  st.info(<span class="hljs-string">"è¯·è¾“å…¥ä½ çš„API key"</span>)
Â  Â  Â  Â  st.stop()

Â  Â  <span class="hljs-comment"># æ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°ä¼šè¯çŠ¶æ€å¹¶æ˜¾ç¤º</span>
Â  Â  st.session_state[<span class="hljs-string">"message"</span>].append({<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"human"</span>,Â <span class="hljs-string">"content"</span>: prompt})
Â  Â  st.chat_message(<span class="hljs-string">"human"</span>).write(prompt)

Â  Â  <span class="hljs-comment"># è·å–AIå“åº”</span>
Â  Â  <span class="hljs-keyword">with</span>Â st.spinner(<span class="hljs-string">"AIæ­£åœ¨æ€è€ƒä¸­ï¼Œè¯·ç¨ç­‰..."</span>):
Â  Â  Â  Â  response = get_chat_response(prompt, st.session_state[<span class="hljs-string">"memory"</span>], deepseek_api_key)

Â  Â  <span class="hljs-comment"># æ·»åŠ AIå“åº”åˆ°ä¼šè¯çŠ¶æ€å¹¶æ˜¾ç¤º</span>
Â  Â  msg = {<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"ai"</span>,Â <span class="hljs-string">"content"</span>: response}
Â  Â  st.session_state[<span class="hljs-string">"message"</span>].append(msg)
Â  Â  st.chat_message(<span class="hljs-string">"ai"</span>).write(response)
</code></pre>
<h2 data-id="heading-14">4. è¿è¡Œå‘½ä»¤</h2>
<pre><code class="hljs language-shell" lang="shell">streamlit run main.py
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Figma ååŒç¼–è¾‘æ˜¯å¦‚ä½•åšç”¨æˆ·çŠ¶æ€åŒæ­¥çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571378103281369094</link>    <guid>https://juejin.cn/post/7571378103281369094</guid>    <pubDate>2025-11-12T02:08:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571378103281369094" data-draft-id="7571295102851629082" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Figma ååŒç¼–è¾‘æ˜¯å¦‚ä½•åšç”¨æˆ·çŠ¶æ€åŒæ­¥çš„ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T02:08:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯è¥¿ç“œå“¥"/> <meta itemprop="url" content="https://juejin.cn/user/2066737589133015"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Figma ååŒç¼–è¾‘æ˜¯å¦‚ä½•åšç”¨æˆ·çŠ¶æ€åŒæ­¥çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2066737589133015/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯è¥¿ç“œå“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:08:44.000Z" title="Wed Nov 12 2025 02:08:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å‰ç«¯è¥¿ç“œå“¥ã€‚</p>
<p>åœ¨ååŒç¼–è¾‘ä¸­ï¼ŒåŒæ­¥ç”¨æˆ·çŠ¶æ€æ˜¯å¿…ä¸å¯å°‘çš„åŠŸèƒ½ã€‚é€šè¿‡æ„ŸçŸ¥åˆ°å…¶ä»–ç”¨æˆ·çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰æ„è¯†åœ°é¿å…æ“ä½œåŒä¸€ä¸ªå¯¹è±¡ï¼Œå¯¼è‡´å†²çªå’Œç›¸äº’è¦†ç›–ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹ Figma æ˜¯æ€ä¹ˆè¿›è¡Œç”¨æˆ·çŠ¶æ€çš„åŒæ­¥çš„ã€‚</p>
<h2 data-id="heading-0">éœ€è¦åŒæ­¥çš„çŠ¶æ€</h2>
<p>Figma åŒæ­¥çš„çŠ¶æ€åˆ†ä¸ºå‡ ç§ã€‚</p>
<h3 data-id="heading-1">ç”¨æˆ·åŸºæœ¬ä¿¡æ¯</h3>
<p>é¦–å…ˆæ˜¯ <strong>ç”¨æˆ·åŸºæœ¬ä¿¡æ¯</strong>ã€‚</p>
<p>ç”¨äºé¡¶éƒ¨æ˜¾ç¤ºè¿›å…¥å½“å‰ â€œæˆ¿é—´â€ çš„ç”¨æˆ·æœ‰å“ªäº›ï¼Œä»¥åŠå…‰æ ‡ä¸Šæ˜¾ç¤ºå¯¹åº”çš„åå­—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d54316fd31d54fa89627d7072bc06a68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6KW_55Oc5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518124&amp;x-signature=vEikE68F8Ch9o0fFm8Ou4o5lcHk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>1ã€ <strong>nameï¼šç”¨æˆ·å</strong>ï¼›</p>
<p>2ã€<strong>imageURLï¼šç”¨æˆ·å¤´åƒ url</strong>ï¼›</p>
<p>3ã€<strong>userIDï¼šç”¨æˆ· id</strong>ï¼›</p>
<p>4ã€<strong>sessionIDï¼šä¼šè¯ id</strong>ã€‚</p>
<p>æ¯ä¸ªå®¢æˆ·ç«¯éƒ½æœ‰æœ‰ä¸€ä¸ªå”¯ä¸€çš„ sessionIDã€‚å› ä¸ºä¸€ä¸ªç”¨æˆ·å¯èƒ½ä¼šåŒæ—¶æ‰“å¼€å¤šä¸ªå®¢æˆ·ç«¯ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ userID åšåŒºåˆ†ã€‚</p>
<p>sessionID æ˜¯æœåŠ¡ç«¯æä¾›çš„ï¼Œç¡®ä¿å”¯ä¸€æ€§ï¼Œå¹¶åœ¨åˆ›å»ºå›¾å½¢æ—¶ï¼Œä½œä¸º guid çš„ä¸€éƒ¨åˆ†ï¼Œç¡®ä¿å›¾å½¢ id çš„å”¯ä¸€æ€§ï¼Œä»¥ç¡®ä¿ç±» CRDT çš„ååŒç¼–è¾‘æœºåˆ¶èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<p>5ã€<strong>deviceNameï¼šè®¾å¤‡å</strong>ï¼Œé€šå¸¸æ˜¯ "editor"ã€‚</p>
<p>6ã€<strong>canWriteï¼šæ˜¯å¦æœ‰ç¼–è¾‘æƒé™</strong>ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">{
Â Â sessionID:Â <span class="hljs-number">23</span>,
<span class="hljs-symbol">stableSessionID:</span>Â <span class="hljs-comment">'eccba7720656d0a2f5adeb7b7ca1700915d62b7d',</span>
<span class="hljs-symbol">connected:</span>Â <span class="hljs-literal">true</span>,
<span class="hljs-symbol">name:</span>Â <span class="hljs-comment">'xigua',</span>
<span class="hljs-symbol">imageURL:</span>Â <span class="hljs-comment">'&lt;url&gt;',</span>
<span class="hljs-symbol">deviceName:</span>Â <span class="hljs-comment">'editor',</span>
<span class="hljs-symbol">userID:</span>Â <span class="hljs-comment">'1166195885685703702',</span>
<span class="hljs-symbol">canWrite:</span>Â <span class="hljs-literal">true</span>,
<span class="hljs-symbol">connectedAtTimeS:</span>Â <span class="hljs-number">205</span>,
// ...
};

</code></pre>
<h3 data-id="heading-2">å…‰æ ‡ä¿¡æ¯</h3>
<p>å…‰æ ‡ä¿¡æ¯å¯ä»¥å‘ŠçŸ¥å…¶ä»–ååŒè€…ï¼Œå½“å‰å®¢æˆ·ç«¯çš„æ“ä½œæ„å›¾ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d01bea56ae1042e4a62e0a2394a55135~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6KW_55Oc5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518124&amp;x-signature=lSlVLW%2FLC6Jy%2Bd64FnIEf1AFA6U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>1ã€<strong>cursor: å…‰æ ‡æ ·å¼</strong>ï¼›</p>
<p>é€šå¸¸æ˜¯ "DEFAULT"ï¼ˆé»˜è®¤å…‰æ ‡ï¼‰ã€‚å¸¸è§çš„è¿˜æœ‰ "PEN"ã€"CROSSHAIR"ã€"PENCIL"ã€"HAND"ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d83cfcf600a4c72aaf2a71b1a3cf58f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6KW_55Oc5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518124&amp;x-signature=tZiZiyoIKRQlk5ExCFd3GalQMsI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>2ã€<strong>canvasSpaceLocationï¼šå…‰æ ‡ä½ç½®</strong>ã€‚ç”¨ xã€y è¡¨ç¤ºï¼›</p>
<p>3ã€<strong>canvasSpaceSelectionBoxï¼šé€‰åŒº</strong>ã€‚ç”¨ xã€yã€widthã€height è¡¨ç¤ºï¼›</p>
<p>4ã€<strong>colorï¼šå…‰æ ‡é¢œè‰²</strong>ã€‚ä½¿ç”¨å½’ä¸€çš„ rgba æ ¼å¼ï¼›</p>
<p>5ã€<strong>canvasGuidï¼šå…‰æ ‡æ‰€åœ¨çš„ç”»å¸ƒ id</strong>ã€‚</p>
<pre><code class="hljs language-css" lang="css">{
Â Â mouse: {
Â  Â Â <span class="hljs-attribute">cursor</span>:Â <span class="hljs-string">'DEFAULT'</span>,
Â  Â Â canvasSpaceLocation: {
Â  Â  Â Â x:Â -<span class="hljs-number">72</span>,
Â  Â  Â Â y:Â -<span class="hljs-number">101</span>,
Â  Â  },
Â  Â Â canvasSpaceSelectionBox: {
Â  Â  Â Â x:Â null,
Â  Â  Â Â y:Â null,
Â  Â  Â Â w:Â null,
Â  Â  Â Â h:Â null,
Â  Â  },
Â  Â Â canvasGuid: {
Â  Â  Â Â sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â Â localID:Â <span class="hljs-number">1</span>,
Â  Â  },
Â  Â Â cursorHiddenReason:Â <span class="hljs-number">0</span>,
Â  },
<span class="hljs-attribute">color</span>: {
Â  Â Â r:Â <span class="hljs-number">1</span>,
Â  Â Â g:Â <span class="hljs-number">0.1411764770746231</span>,
Â  Â Â b:Â <span class="hljs-number">0.7411764860153198</span>,
Â  Â Â a:Â <span class="hljs-number">1</span>,
Â  },
}

</code></pre>
<h3 data-id="heading-3">è§†å£ä¿¡æ¯</h3>
<p>1ã€<strong>canvasSpaceBoundsï¼šè§†å£çŸ©å½¢</strong>ï¼›</p>
<p>åœ¨ follow å¦ä¸€ä¸ªç”¨æˆ·æ—¶ä¼šç”¨åˆ°ï¼Œå°±æ˜¯è·Ÿéšå¦ä¸€ä¸ªç”¨æˆ·çš„ viewportï¼Œå°†å…¶ fit åˆ°è‡ªå·±çš„ viewport ä¸Šã€‚</p>
<pre><code class="hljs language-css" lang="css">{
Â Â viewport: {
Â  Â Â canvasSpaceBounds: {
Â  Â  Â Â x:Â -<span class="hljs-number">345.7548522949219</span>,
Â  Â  Â Â y:Â -<span class="hljs-number">208.17074584960938</span>,
Â  Â  Â Â w:Â <span class="hljs-number">317.0416564941406</span>,
Â  Â  Â Â h:Â <span class="hljs-number">512.650390625</span>,
Â  Â  },
Â  Â Â pixelPreview:Â false,
Â  Â Â pixelDensity:Â <span class="hljs-number">1</span>,
Â  Â Â canvasGuid: {
Â  Â  Â Â sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â Â localID:Â <span class="hljs-number">1</span>,
Â  Â  },
Â  },
}

</code></pre>
<h3 data-id="heading-4">è¢«é€‰ä¸­å›¾å½¢ä¿¡æ¯</h3>
<p>ä¼šä¿å­˜åœ¨ selection æ•°ç»„ä¸­ï¼Œé‡Œé¢æ˜¯è¢«é€‰ä¸­å›¾å½¢çš„ idã€‚</p>
<p>è¿™ä¸ªæ˜¯å…¨é‡æäº¤çš„ï¼Œæ‰€ä»¥å¦‚æœé€‰çš„å›¾å½¢æ¯”è¾ƒå¤šï¼Œæ•°æ®é‡è¿˜æ˜¯æŒºå¤§çš„ã€‚</p>
<pre><code class="hljs language-css" lang="css">{
Â Â selection: [
Â  Â  {Â sessionID:Â <span class="hljs-number">26</span>,Â localID:Â <span class="hljs-number">2</span>Â },
Â  Â  {Â sessionID:Â <span class="hljs-number">67</span>,Â localID:Â <span class="hljs-number">2</span>Â },
Â  Â  {Â sessionID:Â <span class="hljs-number">67</span>,Â localID:Â <span class="hljs-number">3</span>Â },
Â  Â  {Â sessionID:Â <span class="hljs-number">68</span>,Â localID:Â <span class="hljs-number">2</span>Â },
Â  Â  {Â sessionID:Â <span class="hljs-number">34</span>,Â localID:Â <span class="hljs-number">2</span>Â },
Â  Â  {Â sessionID:Â <span class="hljs-number">67</span>,Â localID:Â <span class="hljs-number">4</span>Â },
Â  ],
}

</code></pre>
<p>å› ä¸ºååŒçš„åŸå› ï¼Œå›¾å½¢æ•°æ®æ˜¯åŠ¨æ€çš„ï¼Œæ²¡æ³•æäº¤ä¸€ä¸ªèŒƒå›´æ¥æ›¿ä»£é›†åˆã€‚</p>
<h3 data-id="heading-5">è·Ÿéšä¿¡æ¯</h3>
<p>observing æ˜¯å½“å‰å®¢æˆ·ç«¯æ­£åœ¨è·Ÿéšå“ªä¸ªå®¢æˆ·ç«¯ï¼Œé‡Œé¢ä¿å­˜çš„æ˜¯ sessionIDã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢è¡¨ç¤ºå½“å‰ç”¨æˆ·æ­£åœ¨è·ŸéšsessionID ä¸º 83 çš„å®¢æˆ·ç«¯ã€‚</p>
<pre><code class="hljs language-css" lang="css">{
Â Â observing: [<span class="hljs-number">83</span>],
}

</code></pre>
<h2 data-id="heading-6">é€šä¿¡çš„å„ç§åœºæ™¯</h2>
<h3 data-id="heading-7">åˆå§‹åŒ–</h3>
<p>å®¢æˆ·ç«¯åˆå§‹åŒ–ï¼Œä¼šè¿›è¡Œ websocket è¿æ¥ï¼Œç„¶åæœåŠ¡ç«¯ä¼šè¿”å›å½“å‰æˆ¿é—´çš„æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…æ‹¬è‡ªå·±çš„ã€‚</p>
<p>è‡ªèº«ä¿¡æ¯ä¼šæ¯”è¾ƒå°‘ï¼Œå› ä¸ºæ‰åˆå§‹åŒ–ï¼Œæ²¡æœ‰å…‰æ ‡ä½ç½®ç­‰ä¿¡æ¯ã€‚å…¶ä¸­æ¯”è¾ƒé‡è¦çš„æ˜¯æœåŠ¡ç«¯åˆ†é…çš„ sessionIDï¼Œåé¢çš„ CRDT ååŒéƒ½éœ€è¦å®ƒã€‚</p>
<pre><code class="hljs language-css" lang="css">{
Â  type: <span class="hljs-string">'USER_CHANGES'</span>,
Â  userChanges: [
Â  Â  {
Â  Â  Â  sessionID:Â <span class="hljs-number">56</span>,
Â  Â  Â  stableSessionID: <span class="hljs-string">'74469ea15d268d1713737bd8994b122b500ebfa0'</span>,
Â  Â  Â  connected:Â true,
Â  Â  Â  name: <span class="hljs-string">'watermelon'</span>,
Â  Â  Â  color: {
Â  Â  Â  Â  r:Â <span class="hljs-number">0.4000000059604645</span>,
Â  Â  Â  Â  g:Â <span class="hljs-number">0.46666666865348816</span>,
Â  Â  Â  Â  b:Â <span class="hljs-number">0.6000000238418579</span>,
Â  Â  Â  Â  a:Â <span class="hljs-number">1</span>,
Â  Â  Â  },
Â  Â  Â  imageURL: <span class="hljs-string">'&lt;url&gt;'</span>,
Â  Â  Â  viewport: {
Â  Â  Â  Â  canvasSpaceBounds: {
Â  Â  Â  Â  Â  x:Â -<span class="hljs-number">808</span>,
Â  Â  Â  Â  Â  y:Â -<span class="hljs-number">619</span>,
Â  Â  Â  Â  Â  w:Â <span class="hljs-number">945</span>,
Â  Â  Â  Â  Â  h:Â <span class="hljs-number">860</span>,
Â  Â  Â  Â  },
Â  Â  Â  Â  pixelPreview:Â false,
Â  Â  Â  Â  pixelDensity:Â <span class="hljs-number">1</span>,
Â  Â  Â  Â  canvasGuid: {
Â  Â  Â  Â  Â  sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â  Â  Â  localID:Â <span class="hljs-number">1</span>,
Â  Â  Â  Â  },
Â  Â  Â  },
Â  Â  Â  mouse: {
Â  Â  Â  Â  <span class="hljs-attribute">cursor</span>: <span class="hljs-string">'DEFAULT'</span>,
Â  Â  Â  Â  canvasSpaceLocation: {
Â  Â  Â  Â  Â  x:Â -<span class="hljs-number">806</span>,
Â  Â  Â  Â  Â  y:Â -<span class="hljs-number">285</span>,
Â  Â  Â  Â  },
Â  Â  Â  Â  canvasSpaceSelectionBox: {
Â  Â  Â  Â  Â  x:Â null,
Â  Â  Â  Â  Â  y:Â null,
Â  Â  Â  Â  Â  w:Â null,
Â  Â  Â  Â  Â  h:Â null,
Â  Â  Â  Â  },
Â  Â  Â  Â  canvasGuid: {
Â  Â  Â  Â  Â  sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â  Â  Â  localID:Â <span class="hljs-number">1</span>,
Â  Â  Â  Â  },
Â  Â  Â  Â  cursorHiddenReason:Â <span class="hljs-number">0</span>,
Â  Â  Â  },
Â  Â  Â  selection: [],
Â  Â  Â  observing: [],
Â  Â  Â  deviceName: <span class="hljs-string">'editor'</span>,
Â  Â  Â  userID: <span class="hljs-string">'1157564275155718012'</span>,
Â  Â  Â  canWrite:Â true,
Â  Â  Â  connectedAtTimeS:Â <span class="hljs-number">588</span>,
Â  Â  },
Â  Â  {
Â  Â  Â  sessionID:Â <span class="hljs-number">58</span>,
Â  Â  Â  stableSessionID: <span class="hljs-string">'5a11edba43222d4fa6e14da9451ca8fff537a8e3'</span>,
Â  Â  Â  connected:Â true,
Â  Â  Â  name: <span class="hljs-string">'xigua'</span>,
Â  Â  Â  color: {
Â  Â  Â  Â  r:Â <span class="hljs-number">0.0784313753247261</span>,
Â  Â  Â  Â  g:Â <span class="hljs-number">0.6823529601097107</span>,
Â  Â  Â  Â  b:Â <span class="hljs-number">0.3607843220233917</span>,
Â  Â  Â  Â  a:Â <span class="hljs-number">1</span>,
Â  Â  Â  },
Â  Â  Â  imageURL: <span class="hljs-string">'&lt;url&gt;'</span>,
Â  Â  Â  deviceName: <span class="hljs-string">'editor'</span>,
Â  Â  Â  userID: <span class="hljs-string">'1166195885685703702'</span>,
Â  Â  Â  canWrite:Â true,
Â  Â  Â  connectedAtTimeS:Â <span class="hljs-number">618</span>,
Â  Â  },
Â  ],
}

</code></pre>
<h3 data-id="heading-8">å…‰æ ‡å’Œé€‰åŒºä¿¡æ¯åŒæ­¥</h3>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰å½“å‰ â€œæˆ¿é—´â€ æœ‰ 2 ä¸ªäººåŠä»¥ä¸Šï¼Œç”¨æˆ·çš„çŠ¶æ€æ‰ä¼šæäº¤ç»™å®¢æˆ·ç«¯ã€‚</strong></p>
<p>ç”¨æˆ·åœ¨ç”»å¸ƒä¸Šç§»åŠ¨å…‰æ ‡å’Œè¿›è¡Œæ¡†é€‰æ—¶ï¼Œä¼šå°†å…‰æ ‡ä½ç½®å’Œé€‰åŒºçš„ä¿¡æ¯å‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¼šå¹¿æ’­ç»™å…¶ä»–å®¢æˆ·ç«¯ã€‚</p>
<p>mousemove çš„é¢‘ç‡è¿˜æ˜¯æŒºé«˜çš„ï¼Œæ‰€ä»¥å‘é€çš„ä¿¡æ¯ä¼šåš <strong>èŠ‚æµ</strong>ï¼Œå¦åˆ™æœåŠ¡ç«¯å‹åŠ›ä¼šè¿‡å¤§ã€‚å…¶ä»–æ‰€æœ‰æ“ä½œéƒ½ä¼šåšèŠ‚æµã€‚</p>
<p><strong>è¿™é‡Œå‘é€çš„ sessionID æ°¸è¿œæ˜¯ 0ï¼Œå› ä¸ºæœåŠ¡ç«¯ä¸ä¼šä¿¡ä»»å®¢æˆ·ç«¯çš„ sessionIDï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ® websocket è¿æ¥ï¼Œæ‹¿åˆ°ç»å¯¹æ­£ç¡®çš„ sessionID</strong>ã€‚</p>
<pre><code class="hljs language-css" lang="css">{
Â Â type:Â <span class="hljs-string">'USER_CHANGES'</span>,
userChanges: [
Â  Â  {
Â  Â  Â Â sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â Â mouse: {
Â  Â  Â  Â Â <span class="hljs-attribute">cursor</span>:Â <span class="hljs-string">'DEFAULT'</span>,
Â  Â  Â  Â Â canvasSpaceLocation: {
Â  Â  Â  Â  Â Â x:Â -<span class="hljs-number">87</span>,
Â  Â  Â  Â  Â Â y:Â -<span class="hljs-number">633</span>,
Â  Â  Â  Â  },
Â  Â  Â  Â Â canvasSpaceSelectionBox: {
Â  Â  Â  Â  Â Â x:Â -<span class="hljs-number">308</span>,
Â  Â  Â  Â  Â Â y:Â -<span class="hljs-number">792</span>,
Â  Â  Â  Â  Â Â w:Â <span class="hljs-number">221</span>,
Â  Â  Â  Â  Â Â h:Â <span class="hljs-number">159</span>,
Â  Â  Â  Â  },
Â  Â  Â  Â Â canvasGuid: {
Â  Â  Â  Â  Â Â sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â  Â  Â Â localID:Â <span class="hljs-number">1</span>,
Â  Â  Â  Â  },
Â  Â  Â  Â Â cursorHiddenReason:Â <span class="hljs-number">0</span>,
Â  Â  Â  },
Â  Â  },
Â  ],
sentTimestamp:Â <span class="hljs-string">'1762581990493'</span>,
};

</code></pre>
<h3 data-id="heading-9">é€‰ä¸­å›¾å½¢</h3>
<p>é€‰ä¸­å›¾å½¢çš„è¯ï¼Œä¼šå‘é€é€‰ä¸­å›¾å½¢æ•°æ®ã€‚</p>
<pre><code class="hljs language-css" lang="css">{
Â Â type:Â <span class="hljs-string">'USER_CHANGES'</span>,
userChanges: [
Â  Â  {
Â  Â  Â Â sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â Â viewport: {
Â  Â  Â  Â Â canvasSpaceBounds: {
Â  Â  Â  Â  Â Â x:Â -<span class="hljs-number">372</span>,
Â  Â  Â  Â  Â Â y:Â -<span class="hljs-number">889</span>,
Â  Â  Â  Â  Â Â w:Â <span class="hljs-number">356</span>,
Â  Â  Â  Â  Â Â h:Â <span class="hljs-number">1092</span>,
Â  Â  Â  Â  },
Â  Â  Â  Â Â pixelPreview:Â false,
Â  Â  Â  Â Â pixelDensity:Â <span class="hljs-number">1</span>,
Â  Â  Â  Â Â canvasGuid: {
Â  Â  Â  Â  Â Â sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â  Â  Â Â localID:Â <span class="hljs-number">1</span>,
Â  Â  Â  Â  },
Â  Â  Â  },
Â  Â  Â Â selection: [
Â  Â  Â  Â  {Â sessionID:Â <span class="hljs-number">26</span>,Â localID:Â <span class="hljs-number">2</span>Â },
Â  Â  Â  Â  {Â sessionID:Â <span class="hljs-number">67</span>,Â localID:Â <span class="hljs-number">2</span>Â },
Â  Â  Â  Â  {Â sessionID:Â <span class="hljs-number">67</span>,Â localID:Â <span class="hljs-number">3</span>Â },
Â  Â  Â  Â  {Â sessionID:Â <span class="hljs-number">68</span>,Â localID:Â <span class="hljs-number">2</span>Â },
Â  Â  Â  Â  {Â sessionID:Â <span class="hljs-number">34</span>,Â localID:Â <span class="hljs-number">2</span>Â },
Â  Â  Â  Â  {Â sessionID:Â <span class="hljs-number">67</span>,Â localID:Â <span class="hljs-number">4</span>Â },
Â  Â  Â  ],
Â  Â  },
Â  ],
sentTimestamp:Â <span class="hljs-string">'1762582166098'</span>,
}

</code></pre>
<h3 data-id="heading-10">è·Ÿéš</h3>
<p>ç‚¹å‡»ç”¨æˆ·å¤´åƒå³å¯è·Ÿéšå¯¹åº”ç”¨æˆ·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69124ba4358645a59c0f3b4a0a4122e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6KW_55Oc5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518124&amp;x-signature=YbMhOcQSngNkq6JB8la9hmq61U0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¼šå‘é€æ¶ˆæ¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">{
Â Â type:Â <span class="hljs-string">'USER_CHANGES'</span>,
userChanges: [
Â  Â  {
Â  Â  Â Â sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â Â viewport: {
Â  Â  Â  Â Â canvasSpaceBounds: {
Â  Â  Â  Â  Â Â x:Â -<span class="hljs-number">1016.8021240234375</span>,
Â  Â  Â  Â  Â Â y:Â -<span class="hljs-number">1148.079345703125</span>,
Â  Â  Â  Â  Â Â w:Â <span class="hljs-number">1004.8677978515625</span>,
Â  Â  Â  Â  Â Â h:Â <span class="hljs-number">1484.62646484375</span>,
Â  Â  Â  Â  },
Â  Â  Â  Â Â pixelPreview:Â false,
Â  Â  Â  Â Â pixelDensity:Â <span class="hljs-number">1</span>,
Â  Â  Â  Â Â canvasGuid: {
Â  Â  Â  Â  Â Â sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â  Â  Â Â localID:Â <span class="hljs-number">1</span>,
Â  Â  Â  Â  },
Â  Â  Â  },
Â  Â  Â Â observing: [<span class="hljs-number">71</span>],
Â  Â  },
Â  ],
sentTimestamp:Â <span class="hljs-string">'1762585440201'</span>,
}

</code></pre>
<h3 data-id="heading-11">è§†å£å‘ç”Ÿæ”¹å˜</h3>
<p>viewport å‘ç”Ÿå˜åŒ–æ˜¯è¦åŒæ­¥çš„ã€‚</p>
<p>é™¤äº†è§†å£ä¿¡æ¯ï¼Œè¿˜é¢å¤–ä¼ äº†é¼ æ ‡ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-css" lang="css">{
Â Â type:Â <span class="hljs-string">'USER_CHANGES'</span>,
userChanges: [
Â  Â  {
Â  Â  Â Â sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â Â viewport: {
Â  Â  Â  Â Â canvasSpaceBounds: {
Â  Â  Â  Â  Â Â x:Â -<span class="hljs-number">1032</span>,
Â  Â  Â  Â  Â Â y:Â -<span class="hljs-number">803</span>,
Â  Â  Â  Â  Â Â w:Â <span class="hljs-number">842</span>,
Â  Â  Â  Â  Â Â h:Â <span class="hljs-number">1244</span>,
Â  Â  Â  Â  },
Â  Â  Â  Â Â pixelPreview:Â false,
Â  Â  Â  Â Â pixelDensity:Â <span class="hljs-number">1</span>,
Â  Â  Â  Â Â canvasGuid: {
Â  Â  Â  Â  Â Â sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â  Â  Â Â localID:Â <span class="hljs-number">1</span>,
Â  Â  Â  Â  },
Â  Â  Â  },
Â  Â  Â Â mouse: {
Â  Â  Â  Â Â <span class="hljs-attribute">cursor</span>:Â <span class="hljs-string">'DEFAULT'</span>,
Â  Â  Â  Â Â canvasSpaceLocation: {
Â  Â  Â  Â  Â Â x:Â -<span class="hljs-number">187</span>,
Â  Â  Â  Â  Â Â y:Â -<span class="hljs-number">570</span>,
Â  Â  Â  Â  },
Â  Â  Â  Â Â canvasSpaceSelectionBox: {
Â  Â  Â  Â  Â Â x:Â null,
Â  Â  Â  Â  Â Â y:Â null,
Â  Â  Â  Â  Â Â w:Â null,
Â  Â  Â  Â  Â Â h:Â null,
Â  Â  Â  Â  },
Â  Â  Â  Â Â canvasGuid: {
Â  Â  Â  Â  Â Â sessionID:Â <span class="hljs-number">0</span>,
Â  Â  Â  Â  Â Â localID:Â <span class="hljs-number">1</span>,
Â  Â  Â  Â  },
Â  Â  Â  Â Â cursorHiddenReason:Â <span class="hljs-number">0</span>,
Â  Â  Â  },
Â  Â  },
Â  ],
sentTimestamp:Â <span class="hljs-string">'1762586450176'</span>,
}

</code></pre>
<h3 data-id="heading-12">è¿›å…¥æˆ¿é—´</h3>
<p>æœåŠ¡ç«¯æ£€æµ‹åˆ° WebSocket è¿æ¥ï¼Œå…¶ä»–å®¢æˆ·ç«¯ä¼šæ¥æ”¶åˆ°è¿™ä¸ªæ–°ç”¨æˆ·çš„ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-css" lang="css">{
Â Â type:Â <span class="hljs-string">'USER_CHANGES'</span>,
userChanges: [
Â  Â  {
Â  Â  Â Â sessionID:Â <span class="hljs-number">95</span>,
Â  Â  Â Â stableSessionID:Â <span class="hljs-string">'19a3dcd3fc347d0fa1289243f69c3a7340a55922'</span>,
Â  Â  Â Â connected:Â true,
Â  Â  Â Â name:Â <span class="hljs-string">'watermelon'</span>,
Â  Â  Â Â color: {
Â  Â  Â  Â Â r:Â <span class="hljs-number">0.0784313753247261</span>,
Â  Â  Â  Â Â g:Â <span class="hljs-number">0.6823529601097107</span>,
Â  Â  Â  Â Â b:Â <span class="hljs-number">0.3607843220233917</span>,
Â  Â  Â  Â Â a:Â <span class="hljs-number">1</span>,
Â  Â  Â  },
Â  Â  Â Â imageURL:Â <span class="hljs-string">'&lt;url&gt;'</span>,
Â  Â  Â Â deviceName:Â <span class="hljs-string">'editor'</span>,
Â  Â  Â Â userID:Â <span class="hljs-string">'1157564275155718012'</span>,
Â  Â  Â Â canWrite:Â true,
Â  Â  Â Â connectedAtTimeS:Â <span class="hljs-number">8084</span>,
Â  Â  },
Â  ],
}

</code></pre>
<h3 data-id="heading-13">é€€å‡ºæˆ¿é—´</h3>
<p>å½“æœ‰ç”¨æˆ·ç¦»å¼€æˆ¿é—´ï¼ŒWebSocket æ–­å¼€ï¼ŒæœåŠ¡ç«¯å¹¿æ’­ã€‚</p>
<p>å…¶ä»–å®¢æˆ·åº¦ä¼šæ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">{
Â Â type:Â <span class="hljs-string">'USER_CHANGES'</span>,
Â Â userChanges: [
Â  Â  {
Â  Â  Â Â sessionID:Â <span class="hljs-number">91</span>,
Â  Â  Â Â connected:Â <span class="hljs-literal">false</span>,
Â  Â  },
Â  ],
}

</code></pre>
<h2 data-id="heading-14">ç»“å°¾</h2>
<p>æˆ‘æ˜¯å‰ç«¯è¥¿ç“œå“¥ï¼Œå…³æ³¨æˆ‘ï¼Œå­¦ä¹ æ›´å¤šååŒç¼–è¾‘çŸ¥è¯†ã€‚</p>
<hr/>
<p>ç›¸å…³é˜…è¯»ï¼Œ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI0NTc2NTEyNA%3D%3D%26mid%3D2247488240%26idx%3D1%26sn%3D1c8bcf327a0c3d3566c45dfb5043cfa4%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI0NTc2NTEyNA==&amp;mid=2247488240&amp;idx=1&amp;sn=1c8bcf327a0c3d3566c45dfb5043cfa4&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä½¿ç”¨ yjs ç»™å›¾å½¢ç¼–è¾‘å™¨åŠ ä¸Šå¤šäººååŒç¼–è¾‘åŠŸèƒ½</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI0NTc2NTEyNA%3D%3D%26mid%3D2247488221%26idx%3D1%26sn%3D6560730593fd9443c24e264f1017dfc3%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI0NTc2NTEyNA==&amp;mid=2247488221&amp;idx=1&amp;sn=6560730593fd9443c24e264f1017dfc3&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å¤šäººååŒåœºæ™¯ä¸‹ï¼Œå›¾å½¢ç¼–è¾‘å™¨å¦‚ä½•å®ç°å¤šäººå…‰æ ‡åŠŸèƒ½ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI0NTc2NTEyNA%3D%3D%26mid%3D2247487894%26idx%3D1%26sn%3Da56438fcdad16696e06de0a831b85ac6%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI0NTc2NTEyNA==&amp;mid=2247487894&amp;idx=1&amp;sn=a56438fcdad16696e06de0a831b85ac6&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">CRDT ååŒç¼–è¾‘ï¼šå¦‚ä½•ç¡®å®šæ“ä½œæ—¶åºï¼Ÿ</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çˆ¬è™«æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿä»åŸç†åˆ°ç”¨é€”]]></title>    <link>https://juejin.cn/post/7571355989133377551</link>    <guid>https://juejin.cn/post/7571355989133377551</guid>    <pubDate>2025-11-12T02:16:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571355989133377551" data-draft-id="7571372478803918863" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çˆ¬è™«æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿä»åŸç†åˆ°ç”¨é€”"/> <meta itemprop="keywords" content="çˆ¬è™«,Python,æ•°æ®æŒ–æ˜"/> <meta itemprop="datePublished" content="2025-11-12T02:16:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº‘åŠ¨é›¨é¢¤"/> <meta itemprop="url" content="https://juejin.cn/user/772323170591859"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çˆ¬è™«æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿä»åŸç†åˆ°ç”¨é€”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/772323170591859/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº‘åŠ¨é›¨é¢¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:16:13.000Z" title="Wed Nov 12 2025 02:16:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ä¿¡æ¯çˆ†ç‚¸çš„äº’è”ç½‘æ—¶ä»£ï¼Œæƒ³ä»æµ·é‡ç½‘é¡µä¸­æ”¶é›†æ•°æ®ï¼Œé äººå·¥ä¸€ä¸ªä¸ªå¤åˆ¶ç²˜è´´æ˜¾ç„¶ä¸ç°å®ã€‚è€Œçˆ¬è™«ç¨‹åºï¼Œå°±åƒä¸€ä½ä¸çŸ¥ç–²å€¦çš„â€œç½‘é¡µæ¢é™©å®¶â€ï¼Œèƒ½è‡ªåŠ¨ç©¿æ¢­åœ¨ç½‘é¡µä¹‹é—´ï¼ŒæŠŠéœ€è¦çš„ä¿¡æ¯ç­›é€‰ã€æ”¶é›†èµ·æ¥ã€‚ä»Šå¤©å°±ç»™å¤§å®¶åˆ†äº«ä¸€äº›çˆ¬è™«çš„å·¥ä½œåŸç†ã€å®é™…ç”¨å¤„ï¼Œè¿˜æœ‰æœ€é‡è¦çš„â€œçˆ¬å–è§„çŸ©â€ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€çˆ¬è™«æ˜¯æ€ä¹ˆâ€œé€›â€ç½‘é¡µçš„ï¼Ÿ</h2>
<p>è¦ç†è§£çˆ¬è™«ï¼Œå…ˆæƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼šä½ æ‹¿åˆ°ä¸€å¼ è—å®å›¾ï¼Œå›¾ä¸Šæ ‡ç€â€œè·¯å¾„å’Œå®è—â€ï¼Œæ¯ä¸€ä¸ªè—å®ç‚¹çš„å‘¨å›´éƒ½æœ‰å‡ æ¡å°è·¯é€šå‘å…¶ä»–çš„è—å®ç‚¹ï¼Œè€Œäº’è”ç½‘å°±åƒè¿™å¼ è—å®å›¾ï¼Œæ¯ä¸ªç½‘é¡µå°±æ˜¯â€œè—å®ç‚¹â€ï¼Œç½‘é¡µé‡Œçš„é“¾æ¥æ˜¯â€œå°è·¯â€ï¼Œçˆ¬è™«å°±æ˜¯æŒ‰å›¾ç´¢éª¥çš„â€œå¯»å®äººâ€ã€‚</p>
<p>å®ƒçš„å·¥ä½œæµç¨‹ç‰¹åˆ«åƒæˆ‘ä»¬é€›ç½‘ç«™çš„é€»è¾‘ï¼Œä½†é€Ÿåº¦å¿«æ— æ•°å€ï¼š</p>
<ol>
<li><strong>ç¡®å®šèµ·ç‚¹</strong>ï¼šä»ä¸€ä¸ªæˆ–å¤šä¸ªâ€œèµ·å§‹ç½‘é¡µâ€å‡ºå‘ï¼ˆæ¯”å¦‚æŸç½‘ç«™çš„é¦–é¡µï¼‰ï¼Œå°±åƒå¯»å®äººä»ç¬¬ä¸€ä¸ªè—å®ç‚¹å¼€å§‹ï¼›</li>
<li><strong>æŠ“å–å†…å®¹</strong>ï¼šç¿»å¼€è—å®ç‚¹çš„ç›’å­ï¼Œè¯»å–å½“å‰ç½‘é¡µçš„å…¨éƒ¨ä¿¡æ¯ï¼›</li>
<li><strong>å¯»æ‰¾â€œå°è·¯â€</strong>ï¼šåˆ†æç½‘é¡µé‡Œçš„é“¾æ¥ï¼ˆæ¯”å¦‚â€œä¸‹ä¸€é¡µâ€â€œç›¸å…³æ–‡ç« â€çš„é“¾æ¥ï¼‰ï¼Œæ‰¾åˆ°é€šå‘å…¶ä»–ç½‘é¡µçš„â€œå°è·¯â€ï¼›</li>
<li><strong>å¾ªç¯æ¢ç´¢</strong>ï¼šé¡ºç€æ‰¾åˆ°çš„é“¾æ¥ï¼Œè·³åˆ°ä¸‹ä¸€ä¸ªç½‘é¡µï¼Œé‡å¤â€œæŠ“å–å†…å®¹â†’æ‰¾é“¾æ¥â€çš„æ­¥éª¤ï¼Œç›´åˆ°çˆ¬å®Œç›®æ ‡èŒƒå›´ï¼Œå°±åƒå¯»å®äººèµ°éæ‰€æœ‰ç›¸è¿çš„è—å®ç‚¹ã€‚</li>
</ol>
<p>ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœç”¨çˆ¬è™«çˆ¬å–æŸæ–°é—»ç½‘ç«™ï¼Œå®ƒä¼šå…ˆä»é¦–é¡µæŠ“å–å¤´æ¡æ–°é—»ï¼Œå†é€šè¿‡â€œå›½å†…æ–°é—»â€â€œå›½é™…æ–°é—»â€çš„é“¾æ¥ï¼Œåˆ†åˆ«çˆ¬å–è¿™äº›æ ç›®ä¸‹çš„æ¯ä¸€ç¯‡æ–‡ç« ï¼Œæœ€åæŠŠæ‰€æœ‰æ–°é—»å†…å®¹æ”¶é›†èµ·æ¥â€”â€”æ•´ä¸ªè¿‡ç¨‹æ— éœ€äººå·¥å¹²é¢„ï¼Œå‡ å°æ—¶å°±èƒ½å®Œæˆäººå‡ å¤©çš„å·¥ä½œé‡ã€‚</p>
<h2 data-id="heading-2">äºŒã€çˆ¬è™«æ”¶é›†çš„æ•°æ®ï¼Œèƒ½ç”¨æ¥åšä»€ä¹ˆï¼Ÿ</h2>
<p>çˆ¬è™«æŠ“å–çš„ç½‘é¡µå†…å®¹ï¼Œä¸æ˜¯ç®€å•å †åœ¨ä¸€èµ·ï¼Œè€Œæ˜¯èƒ½æ ¹æ®éœ€æ±‚åŠ å·¥æˆæœ‰ç”¨çš„ä¿¡æ¯ï¼Œå°±åƒâ€œå¯»å®äººæŠŠæ”¶é›†çš„å®è—åˆ†ç±»æ•´ç†ï¼Œå˜æˆæœ‰ä»·å€¼çš„è—å“â€ã€‚</p>
<h3 data-id="heading-3">1. æœç´¢å¼•æ“çš„â€œå¹•ååŠŸè‡£â€</h3>
<p>æˆ‘ä»¬æ¯å¤©ç”¨çš„ç™¾åº¦ã€è°·æ­Œï¼ŒèƒŒåå…¨é çˆ¬è™«æ”¯æ’‘ã€‚æ¯”å¦‚ç™¾åº¦çš„çˆ¬è™«ä¼šå®šæœŸâ€œæ‰«è¡â€äº’è”ç½‘ä¸Šçš„ç½‘é¡µï¼ŒæŠŠå†…å®¹æŠ“å›æ¥åï¼š</p>
<ul>
<li>å…ˆè¿‡æ»¤æ‰æ— æ•ˆã€è¿è§„çš„å†…å®¹ï¼ˆæ¯”å¦‚åƒåœ¾å¹¿å‘Šé¡µï¼‰ï¼›</li>
<li>å†å¯¹ç½‘é¡µå†…å®¹åšâ€œåˆ†è¯å¤„ç†â€ï¼ˆæ¯”å¦‚æŠŠâ€œäººå·¥æ™ºèƒ½å‘å±•è¶‹åŠ¿â€æ‹†æˆâ€œäººå·¥æ™ºèƒ½â€â€œå‘å±•è¶‹åŠ¿â€ï¼‰ï¼›</li>
<li>æœ€åå»ºç«‹â€œå€’æ’ç´¢å¼•â€ï¼ˆè®°å½•æ¯ä¸ªå…³é”®è¯å‡ºç°åœ¨å“ªäº›ç½‘é¡µé‡Œï¼‰ã€‚
è¿™æ ·æˆ‘ä»¬æœç´¢å…³é”®è¯æ—¶ï¼Œç™¾åº¦æ‰èƒ½åœ¨0.1ç§’å†…æ‰¾å‡ºç›¸å…³ç½‘é¡µâ€”â€”æ²¡æœ‰çˆ¬è™«ï¼Œæœç´¢å¼•æ“å°±æˆäº†â€œæ— ç±³ä¹‹ç‚Šâ€ã€‚</li>
</ul>
<h3 data-id="heading-4">2. ä¸ªäºº/ä¼ä¸šçš„æ•°æ®æ”¶é›†å·¥å…·</h3>
<p>å¦‚æœå¯¹æŸä¸ªé¢†åŸŸçš„ä¿¡æ¯æ„Ÿå…´è¶£ï¼Œçˆ¬è™«èƒ½å¸®ä½ é«˜æ•ˆæ”¶é›†ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>å­¦ç”Ÿåšç§‘ç ”ï¼šçˆ¬å–å­¦æœ¯ç½‘ç«™çš„è®ºæ–‡æ ‡é¢˜ã€æ‘˜è¦ï¼Œæ•´ç†æˆç ”ç©¶æ–‡çŒ®åº“ï¼›</li>
<li>ç”µå•†å–å®¶ï¼šçˆ¬å–ç«äº‰å¯¹æ‰‹çš„å•†å“ä»·æ ¼ã€é”€é‡æ•°æ®ï¼Œåˆ†æå®šä»·ç­–ç•¥ï¼›</li>
<li>è‡ªåª’ä½“äººï¼šçˆ¬å–çƒ­é—¨å¹³å°çš„çˆ†æ¬¾æ–‡ç« æ ‡é¢˜ï¼Œæ€»ç»“åˆ›ä½œè¶‹åŠ¿ã€‚</li>
</ul>
<h3 data-id="heading-5">3. ç½‘ç«™å†…å®¹çš„â€œè¿ç§»åŠ©æ‰‹â€</h3>
<p>æœ‰æ—¶å€™ç½‘ç«™éœ€è¦æ›´æ–°è¿­ä»£ï¼Œæˆ–è€…ä»æ—§å¹³å°è¿ç§»åˆ°æ–°å¹³å°ï¼Œçˆ¬è™«èƒ½å¸®ç€â€œæ¬å®¶â€ã€‚æ¯”å¦‚æŸåšå®¢å¹³å°è¦å…³é—­ï¼Œç”¨æˆ·å¯ä»¥ç”¨çˆ¬è™«æŠŠè‡ªå·±å‘å¸ƒçš„æ‰€æœ‰æ–‡ç« ã€è¯„è®ºçˆ¬ä¸‹æ¥ï¼Œå†å¯¼å…¥åˆ°æ–°çš„åšå®¢å¹³å°ï¼Œé¿å…å†…å®¹ä¸¢å¤±â€”â€”è¿™æ¯”æ‰‹åŠ¨å¤åˆ¶æ¯ä¸€ç¯‡æ–‡ç« é«˜æ•ˆå¤ªå¤šã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€é‡è¦æé†’ï¼šçˆ¬è™«ä¹Ÿè¦â€œå®ˆè§„çŸ©â€ï¼Œrobotsåè®®ä¸èƒ½å¿½è§†</h2>
<p>çˆ¬è™«çˆ¬å–ç½‘é¡µæ—¶ï¼Œæœ‰å¿…é¡»éµå®ˆçš„è§„åˆ™â€”â€”<strong>robotsåè®®</strong>ï¼Œè¿™æ˜¯äº’è”ç½‘ä¸–ç•Œçš„â€œçˆ¬å–ç¤¼ä»ªâ€ã€‚</p>
<h3 data-id="heading-7">1. robotsåè®®æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>robotsåè®®æ˜¯ç½‘ç«™ä¸»äººæ”¾åœ¨æœåŠ¡å™¨æ ¹ç›®å½•çš„ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶ï¼ˆé€šå¸¸åœ°å€æ˜¯â€œç½‘ç«™åŸŸå/robots.txtâ€ï¼‰ï¼Œé‡Œé¢ä¼šæ˜ç¡®å‘Šè¯‰çˆ¬è™«ï¼šâ€œå“ªäº›é¡µé¢å¯ä»¥çˆ¬ï¼Œå“ªäº›é¡µé¢ä¸èƒ½çˆ¬â€ã€‚æ¯”å¦‚æŸè´­ç‰©ç½‘ç«™çš„robotsåè®®å¯èƒ½ä¼šå†™ï¼šâ€œå…è®¸çˆ¬å–å•†å“åˆ—è¡¨é¡µï¼Œä½†ç¦æ­¢çˆ¬å–ç”¨æˆ·çš„ä¸ªäººè®¢å•é¡µâ€ã€‚</p>
<h3 data-id="heading-8">2. ä¸ºä»€ä¹ˆè¦éµå®ˆï¼Ÿ</h3>
<ul>
<li><strong>å°Šé‡ç½‘ç«™æƒç›Š</strong>ï¼šæœ‰äº›é¡µé¢åŒ…å«éšç§ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·ç™»å½•åçš„ä¸ªäººä¸­å¿ƒï¼‰æˆ–æ•æ„Ÿæ•°æ®ï¼ˆå¦‚ä¼ä¸šå†…éƒ¨æ–‡æ¡£ï¼‰ï¼Œç½‘ç«™ä¸å¸Œæœ›è¢«çˆ¬è™«æŠ“å–ï¼Œéµå®ˆåè®®æ˜¯å¯¹ä»–äººæƒç›Šçš„å°Šé‡ï¼›</li>
<li><strong>é¿å…æ³•å¾‹é£é™©</strong>ï¼šå¦‚æœæ— è§†robotsåè®®ï¼Œå¼ºè¡Œçˆ¬å–ç¦æ­¢è®¿é—®çš„é¡µé¢ï¼Œå¯èƒ½ä¼šè¢«è®¤å®šä¸ºâ€œéæ³•è·å–æ•°æ®â€ï¼Œé¢ä¸´æ³•å¾‹çº çº·ï¼›</li>
<li><strong>å‡å°‘æœåŠ¡å™¨å‹åŠ›</strong>ï¼šè¿‡åº¦çˆ¬å–ä¼šå ç”¨ç½‘ç«™å¤§é‡å¸¦å®½å’Œç®—åŠ›ï¼Œå¯¼è‡´ç½‘ç«™å¡é¡¿ç”šè‡³å´©æºƒï¼Œéµå®ˆåè®®èƒ½é¿å…è¿™ç§â€œæ¶æ„æ¶ˆè€—â€ã€‚</li>
</ul>
<p>æ¯”å¦‚æŸçŸ¥åçˆ¬è™«å·¥å…·æ›¾å› å¤§é‡çˆ¬å–æŸç¤¾äº¤å¹³å°çš„ç”¨æˆ·æ•°æ®ï¼Œä¸”æ— è§†robotsåè®®çš„ç¦æ­¢è§„åˆ™ï¼Œæœ€ç»ˆè¢«èµ·è¯‰ï¼Œä¸ä»…èµ”å¿äº†å·¨é¢ç½šæ¬¾ï¼Œè¿˜æš‚åœäº†ç›¸å…³åŠŸèƒ½â€”â€”â€œæ— è§„çŸ©ä¸æˆæ–¹åœ†â€ï¼Œçˆ¬è™«çš„é«˜æ•ˆå¿…é¡»å»ºç«‹åœ¨åˆè§„çš„åŸºç¡€ä¸Šã€‚</p>
<h2 data-id="heading-9">å››ã€çˆ¬è™«ä¸æ˜¯â€œä¸‡èƒ½çš„â€ï¼Œè¿™äº›é™åˆ¶è¦çŸ¥é“</h2>
<p>è™½ç„¶çˆ¬è™«å¾ˆå¼ºå¤§ï¼Œä½†ä¹Ÿä¸æ˜¯ä»€ä¹ˆéƒ½èƒ½çˆ¬ï¼Œæœ‰3ä¸ªå¸¸è§é™åˆ¶ï¼š</p>
<ul>
<li><strong>åçˆ¬æœºåˆ¶æ‹¦æˆª</strong>ï¼šå¾ˆå¤šç½‘ç«™ä¼šè®¾ç½®â€œåçˆ¬æªæ–½â€ï¼Œæ¯”å¦‚é™åˆ¶åŒä¸€IPçš„è®¿é—®é¢‘ç‡ï¼ˆé¢‘ç¹çˆ¬å–ä¼šè¢«æš‚æ—¶å°ç¦IPï¼‰ã€è¦æ±‚è¾“å…¥éªŒè¯ç ã€åŠ¨æ€åŠ è½½å†…å®¹ï¼ˆç”¨JavaScriptæ¸²æŸ“é¡µé¢ï¼Œæ™®é€šçˆ¬è™«æŠ“ä¸åˆ°ï¼‰ï¼Œè¿™æ—¶å€™éœ€è¦æ›´ä¸“ä¸šçš„çˆ¬è™«æŠ€æœ¯æ‰èƒ½åº”å¯¹ï¼›</li>
<li><strong>æ•°æ®ç‰ˆæƒé—®é¢˜</strong>ï¼šå³ä½¿çˆ¬å–äº†å…¬å¼€ç½‘é¡µçš„å†…å®¹ï¼Œä¹Ÿä¸èƒ½éšæ„ä½¿ç”¨ã€‚æ¯”å¦‚çˆ¬å–åˆ«äººçš„åŸåˆ›æ–‡ç« åï¼Œç›´æ¥å¤åˆ¶å‘å¸ƒåˆ°è‡ªå·±çš„å¹³å°ï¼Œå¯èƒ½ä¾µçŠ¯è‘—ä½œæƒï¼›</li>
<li><strong>æŠ€æœ¯é—¨æ§›å·®å¼‚</strong>ï¼š
<ul>
<li>ç®€å•çš„çˆ¬è™«ï¼ˆæ¯”å¦‚çˆ¬å–é™æ€ç½‘é¡µï¼‰ç”¨Pythonçš„â€œrequestsâ€â€œBeautifulSoupâ€åº“å°±èƒ½å®ç°ï¼Œæ–°æ‰‹è·Ÿç€æ•™ç¨‹ä¹Ÿèƒ½åšï¼›</li>
<li>å¤æ‚çš„çˆ¬è™«ï¼ˆæ¯”å¦‚çˆ¬å–éœ€è¦ç™»å½•çš„å¹³å°ã€åŠ¨æ€ç½‘é¡µï¼‰ï¼Œéœ€è¦æŒæ¡æ›´å¤šæŠ€æœ¯ï¼ˆå¦‚Seleniumã€APIæ¥å£è°ƒç”¨ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-10">äº”ã€æ€»ç»“</h2>
<p>çˆ¬è™«æœ¬èº«æ²¡æœ‰â€œå¥½åâ€ä¹‹åˆ†ï¼Œå®ƒå°±åƒä¸€æŠŠâ€œé“²å­â€ï¼šç”¨å®ƒåˆè§„åœ°æŒ–æ˜å…¬å¼€ä¿¡æ¯ï¼Œèƒ½å¸®æˆ‘ä»¬æé«˜æ•ˆç‡ã€è§£å†³é—®é¢˜ï¼›ä½†å¦‚æœç”¨å®ƒç ´åè§„åˆ™ã€è·å–æ•æ„Ÿæ•°æ®ï¼Œå°±ä¼šå˜æˆâ€œéº»çƒ¦åˆ¶é€ è€…â€ã€‚</p>
<p>ç†è§£çˆ¬è™«çš„å·¥ä½œåŸç†ï¼Œä¸ä»…èƒ½å¸®æˆ‘ä»¬æ›´å¥½åœ°åˆ©ç”¨è¿™ä¸ªå·¥å…·ï¼Œä¹Ÿèƒ½æ˜ç™½â€œä¸ºä»€ä¹ˆæœç´¢å¼•æ“èƒ½å¿«é€Ÿæ‰¾åˆ°ä¿¡æ¯â€â€œä¸ºä»€ä¹ˆæœ‰äº›ç½‘ç«™ä¼šé™åˆ¶çˆ¬å–â€â€”â€”é€è¿‡çˆ¬è™«ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½æ›´æ‡‚äº’è”ç½‘çš„è¿è¡Œé€»è¾‘ã€‚å¦‚æœä»¥åæƒ³å°è¯•ç”¨çˆ¬è™«ï¼Œè®°å¾—å…ˆä»â€œå°èŒƒå›´ã€åˆè§„çš„çˆ¬å–â€å¼€å§‹ï¼Œåšä¸€ä¸ªæœ‰â€œé“å¾·â€çš„â€œç½‘é¡µæ¢é™©å®¶â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è—ä¸ä½äº†ï¼TinyVue æ‚„æ‚„ä¸Šçº¿ Space ç»„ä»¶ï¼Œä¸æ­¢æŒ‰é’®è¡¨æ ¼ï¼Œå¼¹æ€§é—´è·å…¨æå®š]]></title>    <link>https://juejin.cn/post/7571342319893889059</link>    <guid>https://juejin.cn/post/7571342319893889059</guid>    <pubDate>2025-11-12T02:16:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571342319893889059" data-draft-id="7571280402964398115" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è—ä¸ä½äº†ï¼TinyVue æ‚„æ‚„ä¸Šçº¿ Space ç»„ä»¶ï¼Œä¸æ­¢æŒ‰é’®è¡¨æ ¼ï¼Œå¼¹æ€§é—´è·å…¨æå®š"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,GitHub"/> <meta itemprop="datePublished" content="2025-11-12T02:16:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OpenTinyç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/3808325101432983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è—ä¸ä½äº†ï¼TinyVue æ‚„æ‚„ä¸Šçº¿ Space ç»„ä»¶ï¼Œä¸æ­¢æŒ‰é’®è¡¨æ ¼ï¼Œå¼¹æ€§é—´è·å…¨æå®š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808325101432983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OpenTinyç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:16:10.000Z" title="Wed Nov 12 2025 02:16:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ç”±TinySpaceç»„ä»¶è´¡çŒ®è€…å¤é›¯æ–åŒå­¦åŸåˆ›ã€‚</p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>è¿‘æœŸï¼ŒTinyVueæ­£å¼å‘å¸ƒ v3.27.0ç‰ˆæœ¬ï¼Œè¿™æ¬¡ç‰ˆæœ¬æ›´æ–°ä¹Ÿå¢åŠ äº†å¾ˆå¤šæ–°ç‰¹æ€§ï¼Œspaceç»„ä»¶å°±æ˜¯å…¶ä¸­æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªç‰¹æ€§ã€‚<br/>
<strong>Spaceç»„ä»¶</strong> æ˜¯ <strong>OpenTiny Vue</strong>ç»„ä»¶åº“ä¸­çš„ä¸€ä¸ªå¸ƒå±€å®¹å™¨ç»„ä»¶ï¼Œç”¨äºåœ¨å­å…ƒç´ ä¹‹é—´æä¾›çµæ´»çš„é—´è·æ§åˆ¶ã€‚
å®ƒæ”¯æŒæ°´å¹³ä¸å‚ç›´æ–¹å‘æ’åˆ—ã€è‡ªåŠ¨æ¢è¡Œã€å¯¹é½ä¸åˆ†å¸ƒæ§åˆ¶ã€ä»¥åŠé¡ºåºè°ƒæ•´ç­‰åŠŸèƒ½ï¼Œèƒ½å¸®åŠ©å¼€å‘è€…è½»æ¾å®ç°å“åº”å¼ã€æ•´é½çš„ç»„ä»¶å¸ƒå±€ã€‚</p>
<h3 data-id="heading-1">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>è¡¨å•é¡¹æˆ–æŒ‰é’®ç»„çš„å¸ƒå±€</li>
<li>åˆ—è¡¨é¡¹çš„æ°´å¹³/å‚ç›´é—´è·</li>
<li>å·¥å…·æ å…ƒç´ çš„åˆ†å¸ƒæ§åˆ¶</li>
<li>åœ¨å“åº”å¼å¸ƒå±€ä¸­æ§åˆ¶é—´è·ä¸æ¢è¡Œ</li>
</ul>
<h2 data-id="heading-2">ç¯å¢ƒå‡†å¤‡ä¸å®‰è£…</h2>
<h3 data-id="heading-3">1. ç¯å¢ƒè¦æ±‚</h3>
<p>ç¡®ä¿å·²å®‰è£… <strong>Node.js 10.13+</strong> åŠåŒ…ç®¡ç†å™¨ npm/pnpm/yarnã€‚</p>
<pre><code class="hljs language-bash" lang="bash">node -v
</code></pre>
<h3 data-id="heading-4">2. å®‰è£… OpenTiny Vue</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># npm</span>
npm install @opentiny/vue

<span class="hljs-comment"># æˆ– pnpm</span>
pnpm add @opentiny/vue
</code></pre>
<h3 data-id="heading-5">3.å¼•å…¥TinySpace</h3>
<pre><code class="hljs language-vue" lang="vue">import { TinySpace } from '@opentiny/vue'
</code></pre>
<h2 data-id="heading-6">å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-7">åŸºç¡€ä½¿ç”¨</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div id="tiny-space-all" style="padding: 16px; max-width: 600px"&gt;
    &lt;h2&gt;TinySpace å…¨åŠŸèƒ½æ¼”ç¤º&lt;/h2&gt;

    &lt;!-- æ§åˆ¶é¢æ¿ --&gt;
    &lt;div style="margin-bottom: 16px; display: flex; flex-direction: column; gap: 12px;"&gt;
      &lt;!-- é—´è·æ§åˆ¶ --&gt;
      &lt;div&gt;
        &lt;strong&gt;é—´è·ï¼š&lt;/strong&gt;
        &lt;tiny-button @click="size = [10, 10]"&gt;[10, 10]&lt;/tiny-button&gt;
        &lt;tiny-button @click="size = [10, 30]"&gt;[10, 30]&lt;/tiny-button&gt;
        &lt;tiny-button @click="size = [20, 40]"&gt;[20, 40]&lt;/tiny-button&gt;
      &lt;/div&gt;

      &lt;!-- å¸ƒå±€æ–¹å‘ --&gt;
      &lt;div&gt;
        &lt;strong&gt;æ–¹å‘ï¼š&lt;/strong&gt;
        &lt;tiny-button-group&gt;
          &lt;tiny-button @click="direction = 'row'"&gt;æ°´å¹³ row&lt;/tiny-button&gt;
          &lt;tiny-button @click="direction = 'column'"&gt;å‚ç›´ column&lt;/tiny-button&gt;
        &lt;/tiny-button-group&gt;
      &lt;/div&gt;

      &lt;!-- ä¸»è½´å¯¹é½ --&gt;
      &lt;div&gt;
        &lt;strong&gt;ä¸»è½´å¯¹é½ (justify)ï¼š&lt;/strong&gt;
        &lt;tiny-select v-model="justify" style="width: 160px"&gt;
          &lt;tiny-option label="start" value="start" /&gt;
          &lt;tiny-option label="center" value="center" /&gt;
          &lt;tiny-option label="end" value="end" /&gt;
          &lt;tiny-option label="space-between" value="space-between" /&gt;
          &lt;tiny-option label="space-around" value="space-around" /&gt;
        &lt;/tiny-select&gt;
      &lt;/div&gt;

      &lt;!-- äº¤å‰è½´å¯¹é½ --&gt;
      &lt;div&gt;
        &lt;strong&gt;äº¤å‰è½´å¯¹é½ (align)ï¼š&lt;/strong&gt;
        &lt;tiny-select v-model="align" style="width: 160px"&gt;
          &lt;tiny-option label="start" value="start" /&gt;
          &lt;tiny-option label="center" value="center" /&gt;
          &lt;tiny-option label="end" value="end" /&gt;
          &lt;tiny-option label="baseline" value="baseline" /&gt;
        &lt;/tiny-select&gt;
      &lt;/div&gt;

      &lt;!-- è‡ªåŠ¨æ¢è¡Œ --&gt;
      &lt;div&gt;
        &lt;tiny-switch v-model="wrap" active-text="è‡ªåŠ¨æ¢è¡Œ" inactive-text="ä¸æ¢è¡Œ" /&gt;
      &lt;/div&gt;

      &lt;!-- é¡ºåºæ§åˆ¶ --&gt;
      &lt;div&gt;
        &lt;strong&gt;é¡ºåºæ§åˆ¶ï¼š&lt;/strong&gt;
        &lt;tiny-button @click="order = ['3', '1', '2']"&gt;3 â†’ 1 â†’ 2&lt;/tiny-button&gt;
        &lt;tiny-button @click="order = ['2', '3', '1']"&gt;2 â†’ 3 â†’ 1&lt;/tiny-button&gt;
        &lt;tiny-button @click="order = []"&gt;åŸé¡ºåº&lt;/tiny-button&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;!-- Space å¸ƒå±€æ¼”ç¤º --&gt;
    &lt;tiny-space
      class="tiny-space-demo"
      :size="size"
      :direction="direction"
      :justify="justify"
      :align="align"
      :wrap="wrap"
      :order="order"
      style="border: 1px dashed #bbb; padding: 10px; min-height: 120px;"
    &gt;
      &lt;tiny-button key="1" type="primary"&gt;æŒ‰é’® 1&lt;/tiny-button&gt;
      &lt;tiny-button key="2" type="success"&gt;æŒ‰é’® 2&lt;/tiny-button&gt;
      &lt;tiny-button key="3" type="warning"&gt;æŒ‰é’® 3&lt;/tiny-button&gt;
      &lt;tiny-button key="4" type="danger"&gt;æŒ‰é’® 4&lt;/tiny-button&gt;
      &lt;tiny-button key="5" type="info"&gt;æŒ‰é’® 5&lt;/tiny-button&gt;
    &lt;/tiny-space&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'
import { TinyButton, TinyButtonGroup, TinySwitch, TinySelect, TinyOption } from '@opentiny/vue'
import TinySpace from '@opentiny/vue-space'


// å“åº”å¼é…ç½®é¡¹
const size = ref([10, 20])
const direction = ref('row')
const justify = ref('start')
const align = ref('center')
const wrap = ref(true)
const order = ref([])
&lt;/script&gt;

&lt;style scoped&gt;
.tiny-space-demo .tiny-button {
  min-width: 80px;
}
&lt;/style&gt;
</code></pre>
<blockquote>
<p>é»˜è®¤æ–¹å‘ä¸º <code>row</code>ï¼ˆæ°´å¹³æ’åˆ—ï¼‰ï¼Œé»˜è®¤é—´è·ä¸º <code>8px</code>ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd7b54484b284787b1ca9b9ef8d51b87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763519933&amp;x-signature=ow1hXW%2Foq%2FyzCAFnrVpJf3V5OJU%3D" alt="TinySpace æ•ˆæœå›¾" loading="lazy"/></p>
<h3 data-id="heading-8">é…ç½®è¯¦è§£</h3>
<h4 data-id="heading-9">1.æ§åˆ¶é—´è· size</h4>
<p><code>size</code> æ˜¯æœ€æ ¸å¿ƒçš„å±æ€§ï¼Œæ”¯æŒå¤šç§å†™æ³•ã€‚</p>
<h5 data-id="heading-10">1.1æ•°å€¼å†™æ³•</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;tiny-space :size="20"/&gt;
</code></pre>
<p>é—´è·ä¸º <code>20px</code>ã€‚</p>
<h5 data-id="heading-11">1.2æ•°ç»„å†™æ³•ï¼ˆ[rowGap, columnGap]ï¼‰</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;tiny-space :size="[50, 50]"/&gt;
</code></pre>
<p>è¡Œé—´è· <code>50px</code>ï¼Œåˆ—é—´è· <code>50px</code>ï¼Œæ–¹ä¾¿å®ç°ä¸ç­‰è·å¸ƒå±€ã€‚</p>
<h5 data-id="heading-12">1.3å­—ç¬¦ä¸²å†™æ³•</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;tiny-space size="100px"/&gt;
</code></pre>
<p>é—´è·ä¸º <code>100px</code></p>
<pre><code class="hljs language-vue" lang="vue">&lt;tiny-space size="small"/&gt;
// small | medium | large
</code></pre>
<h4 data-id="heading-13">2.æ§åˆ¶æ’åˆ—æ–¹å‘ direction</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;tiny-space :size="12" direction="row"/&gt;
</code></pre>
<p>- <code>'row'</code>ï¼ˆé»˜è®¤ï¼‰ï¼šæ°´å¹³æ’åˆ—</p>
<p>- <code>'column'</code>ï¼šå‚ç›´æ’åˆ—</p>
<p>å¯ä»¥é€šè¿‡åˆ‡æ¢ <code>direction</code> å®ç°å“åº”å¼å¸ƒå±€ï¼ˆå¦‚æ‰‹æœºç«¯ç«–æ’ã€PCç«¯æ¨ªæ’ï¼‰ã€‚</p>
<h4 data-id="heading-14">3.å¯¹é½ align ä¸åˆ†å¸ƒ justify</h4>
<p>é€šè¿‡ <code>align</code> å’Œ <code>justify</code> æ§åˆ¶å…ƒç´ å¯¹é½ä¸åˆ†å¸ƒæ–¹å¼ã€‚</p>
<h5 data-id="heading-15">3.1 justify</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;tiny-space :size="10" justify="center"/&gt;
</code></pre>
<h5 data-id="heading-16">3.2 aligin</h5>
<pre><code class="hljs language-VUE" lang="VUE">&lt;tiny-space :size="10" align="baseline"/&gt;     
</code></pre>




















<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>å¯é€‰å€¼</th></tr></thead><tbody><tr><td><code>align</code></td><td>å‚ç›´å¯¹é½</td><td><code>start</code> / <code>center</code> / <code>end</code>/<code>baseline</code>/<code>stretch</code></td></tr><tr><td><code>justify</code></td><td>æ°´å¹³åˆ†å¸ƒ</td><td><code>start</code> / <code>center</code> / <code>end</code> / <code>space-between</code></td></tr></tbody></table>
<h4 data-id="heading-17">4.è‡ªåŠ¨æ¢è¡Œ wrap</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;tiny-space :wrap="true" :size="[10, 12]"&gt;
  &lt;tiny-button v-for="n in 10" :key="n"&gt;æŒ‰é’® {{ n }}&lt;/tiny-button&gt;
&lt;/tiny-space&gt;
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼š  å½“å®½åº¦ä¸å¤Ÿæ—¶ï¼ŒæŒ‰é’®ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œä»ç„¶ä¿æŒé—´è·ä¸€è‡´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b077325374d64489b63671382b917a3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763519933&amp;x-signature=BcJrWKhoFFOj7MHmB10tsN284HM%3D" alt="2.JPG" loading="lazy"/></p>
<h4 data-id="heading-18">5.æ§åˆ¶é¡ºåº order</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;tiny-space :order="order" style="border: 1px dashed #ccc"&gt;
    &lt;tiny-button key="1"&gt;First Button&lt;/tiny-button&gt;
    &lt;tiny-button key="2"&gt;Second Button&lt;/tiny-button&gt;
    &lt;tiny-button key="3"&gt;Third Button&lt;/tiny-button&gt;
    &lt;tiny-button&gt;Fourth Button&lt;/tiny-button&gt;
  &lt;/tiny-space&gt;
&lt;/template&gt;
&lt;script setup&gt;
import { TinyButton, TinySpace } from '@opentiny/vue'
const order = ['2', '3', '1'] // è‡ªå®šä¹‰é¡ºåºï¼šç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªã€ç„¶åç¬¬ä¸€ä¸ª
&lt;/script&gt;

</code></pre>
<p>è®¾ç½® <code>order="['2', '3', '1']"</code> åï¼Œæ¸²æŸ“é¡ºåºä¼šå˜ä¸º <strong><strong>2 â†’ 3 â†’ 1</strong></strong>ã€‚</p>
<blockquote>
<p>é€‚ç”¨äºåœ¨å“åº”å¼å¸ƒå±€ä¸­å¿«é€Ÿè°ƒæ¢å†…å®¹é¡ºåºã€‚</p>
</blockquote>
<h4 data-id="heading-19">6.åµŒå¥—å¸ƒå±€ï¼ˆç»„åˆä½¿ç”¨ï¼‰</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;tiny-space direction="column" :size="16"&gt;
 &lt;tiny-space direction="row" :size="8"&gt;
  &lt;tiny-button&gt;å·¦&lt;/tiny-button&gt;
  &lt;tiny-button&gt;ä¸­&lt;/tiny-button&gt;
  &lt;tiny-button&gt;å³&lt;/tiny-button&gt;
 &lt;/tiny-space&gt;

 &lt;tiny-space direction="row" :size="8"&gt;
  &lt;tiny-button&gt;ä¸Š&lt;/tiny-button&gt;
  &lt;tiny-button&gt;ä¸‹&lt;/tiny-button&gt;
 &lt;/tiny-space&gt;
&lt;/tiny-space&gt;
</code></pre>
<h4 data-id="heading-20">7.æµ‹è¯•ä¸ç¨³å®šæ€§</h4>
<p><code>TinySpace</code> å·²é€šè¿‡ Playwright E2E è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ŒéªŒè¯ï¼š</p>
<ul>
<li>
<p>é—´è·æ­£ç¡®æ¸²æŸ“ï¼ˆ<code>rowGap</code> / <code>columnGap</code>ï¼‰</p>
</li>
<li>
<p>åŠ¨æ€æ•°æ®æ›´æ–°å“åº”</p>
</li>
<li>
<p>æ¢è¡Œä¸æ–¹å‘åˆ‡æ¢ç¨³å®š</p>
</li>
<li>
<p>å…¼å®¹ Vue 2 &amp; Vue 3 ç¯å¢ƒ</p>
</li>
</ul>
<h4 data-id="heading-21">8.æœ€ä½³å®è·µæ€»ç»“</h4>





















<table><thead><tr><th>åœºæ™¯</th><th>æ¨èé…ç½®</th></tr></thead><tbody><tr><td>è¡¨å•é¡¹å‚ç›´é—´è·</td><td><code>&lt;tiny-space direction="column" :size="12"&gt;</code></td></tr><tr><td>æŒ‰é’®ç»„</td><td><code>&lt;tiny-space :size="8" align="center"&gt;</code></td></tr><tr><td>å¯æ¢è¡Œæ ‡ç­¾é›†åˆ</td><td><code>&lt;tiny-space :size="[8, 16]" wrap&gt;</code></td></tr></tbody></table>
<h4 data-id="heading-22">9.å°ç»“</h4>
<p><strong>TinySpace</strong> æ˜¯ä¸€ä¸ªè½»é‡çº§ã€çµæ´»çš„å¸ƒå±€ç»„ä»¶ï¼Œä¸“ä¸ºæ§åˆ¶å­å…ƒç´ é—´è·è€Œè®¾è®¡ã€‚
å®ƒæ”¯æŒï¼š</p>
<ul>
<li>æ•°å€¼ã€é¢„è®¾ã€æ•°ç»„å¤šç§é—´è·å½¢å¼</li>
<li>å‚ç›´ä¸æ°´å¹³æ’åˆ—</li>
<li>è‡ªåŠ¨æ¢è¡Œä¸å¯¹é½åˆ†å¸ƒ</li>
<li>é¡ºåºæ§åˆ¶</li>
<li>Vue 2 / Vue 3 åŒç‰ˆæœ¬å…¼å®¹</li>
</ul>
<p>é€šè¿‡å®ƒï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾æ„å»ºæ•´æ´ã€ç¾è§‚ã€å“åº”å¼çš„ UI å¸ƒå±€ã€‚</p>
<h3 data-id="heading-23">å±æ€§ä¸€è§ˆ</h3>















































<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>size</code></td><td><code>number</code> /<code>array</code> / <code>string</code></td><td><code>small</code></td><td>è®¾ç½®é—´è·å¤§å°ï¼Œå¯ä¸ºå­—ç¬¦ä¸²ã€æ•°å­—æˆ–æ•°ç»„ï¼Œæ•°ç»„å½¢å¼ä¸º [æ¨ªå‘é—´è·, çºµå‘é—´è·]</td></tr><tr><td><code>direction</code></td><td><code>string</code></td><td><code> row</code></td><td><code>row</code> | <code>column</code></td></tr><tr><td><code>align</code></td><td><code>string</code></td><td><code>stretch</code></td><td>è®¾ç½®äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼Œå¯¹åº” CSS <code>align-items</code> å±æ€§</td></tr><tr><td><code>justify</code></td><td><code>string</code></td><td><code>start</code></td><td>è®¾ç½®ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼Œå¯¹åº” CSS<code> justify-content</code> å±æ€§</td></tr><tr><td><code>wrap</code></td><td><code>boolean</code></td><td><code>false</code></td><td>æ˜¯å¦è‡ªåŠ¨æ¢è¡Œ</td></tr><tr><td><code>order</code></td><td><code>string[]</code></td><td>-</td><td>æ§åˆ¶å­é¡¹æ˜¾ç¤ºé¡ºåº</td></tr></tbody></table>
<h2 data-id="heading-24">å…³äºOpenTiny</h2>
<p>æ¬¢è¿åŠ å…¥ OpenTiny å¼€æºç¤¾åŒºã€‚æ·»åŠ å¾®ä¿¡å°åŠ©æ‰‹ï¼šopentiny-official ä¸€èµ·å‚ä¸äº¤æµå‰ç«¯æŠ€æœ¯ï½</p>
<p>OpenTiny å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design" target="_blank" title="https://opentiny.design" ref="nofollow noopener noreferrer">opentiny.design</a><br/>
OpenTiny ä»£ç ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny" target="_blank" title="https://github.com/opentiny" ref="nofollow noopener noreferrer">github.com/opentiny</a><br/>
TinyVue æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-vue" target="_blank" title="https://github.com/opentiny/tiny-vue" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a><br/>
TinyEngine æºç ï¼šâ€…<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-engine" target="_blank" title="https://github.com/opentiny/tiny-engine" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a><br/>
æ¬¢è¿è¿›å…¥ä»£ç ä»“åº“ StarğŸŒŸTinyEngineã€TinyVueã€TinyNGã€TinyCLIã€TinyEditor~
å¦‚æœä½ ä¹Ÿæƒ³è¦å…±å»ºï¼Œå¯ä»¥è¿›å…¥ä»£ç ä»“åº“ï¼Œæ‰¾åˆ° good first issue æ ‡ç­¾ï¼Œä¸€èµ·å‚ä¸å¼€æºè´¡çŒ®~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CCFç¨‹åºå‘˜å¤§ä¼šç åŠ›å…¨å¼€ï¼šAIåŠ é€Ÿè¥ï¼Œ10wå¥–é‡‘ç­‰ä½ æ‹¿ï¼]]></title>    <link>https://juejin.cn/post/7571355989133475855</link>    <guid>https://juejin.cn/post/7571355989133475855</guid>    <pubDate>2025-11-12T02:23:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571355989133475855" data-draft-id="7564485874726993920" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CCFç¨‹åºå‘˜å¤§ä¼šç åŠ›å…¨å¼€ï¼šAIåŠ é€Ÿè¥ï¼Œ10wå¥–é‡‘ç­‰ä½ æ‹¿ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-12T02:23:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–‡å¿ƒå¿«ç BaiduComate"/> <meta itemprop="url" content="https://juejin.cn/user/992209294070809"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CCFç¨‹åºå‘˜å¤§ä¼šç åŠ›å…¨å¼€ï¼šAIåŠ é€Ÿè¥ï¼Œ10wå¥–é‡‘ç­‰ä½ æ‹¿ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/992209294070809/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–‡å¿ƒå¿«ç BaiduComate
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:23:39.000Z" title="Wed Nov 12 2025 02:23:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>CCFç¨‹åºå‘˜å¤§ä¼šç åŠ›å…¨å¼€ï¼šAIåŠ é€Ÿè¥</strong>ï¼Œæ­£å¼å¯åŠ¨ï¼æ´»åŠ¨ç”±ä¸­å›½è®¡ç®—æœºå­¦ä¼šä¸»åŠï¼Œæ–‡å¿ƒå¤§æ¨¡å‹ã€æ–‡å¿ƒå¿«ç ã€msupè”åˆæ‰¿åŠï¼Œè¯šé‚€ä½ ä¸€èµ·æˆä¸ºAIçš„â€œé­”æ³•å¸ˆâ€â€”â€”ç”¨ä»£ç ç‚¹äº®åˆ›æ„ï¼Œä»¥æŠ€æœ¯åˆ›é€ æœªæ¥ã€‚</p>
<p>æäº¤ä¼˜ç§€ä½œå“ï¼Œå³æœ‰æœºä¼š<strong>ç“œåˆ†è¶…10wå…ƒå¥–é‡‘</strong>ğŸ’°ï¼æ›´æœ‰æœºä¼šäº«å—ä¼ä¸šå®è®­ç›´é€šã€è¡Œä¸šå³°ä¼šäº®ç›¸ã€åª’ä½“æ›å…‰ç­‰å…¨â½…ä½çš„èµ„æºä¸æœåŠ¡ï¼ŒåŠ©ä½ ä»æ´»åŠ¨èµ°å‘æ›´å¹¿é˜”çš„èˆå°ï¼</p>
<h2 data-id="heading-0">ä¸€ã€æ´»åŠ¨ç†å¿µ</h2>
<h3 data-id="heading-1">åˆ›æ„ä¸è®¾é™</h3>
<p>é¢å‘æ‰€æœ‰AIçˆ±å¥½è€…ã€åˆ›ä¸šå›¢é˜Ÿã€ç‹¬ç«‹å¼€å‘è€…å’Œé«˜æ ¡å¸ˆç”Ÿï¼Œå€ŸåŠ©æ–‡å¿ƒå¿«ç ä¸æ–‡å¿ƒå¤§æ¨¡å‹æŠ€æœ¯ï¼Œå°†åˆ›æ„çµæ„Ÿè½åœ°ä¸ºå¯å±•ç¤ºã€å¯äº¤äº’çš„åº”ç”¨ä½œå“ã€‚æˆ‘ä»¬æœŸå¾…ä½ æ‰“ç ´å¸¸è§„ï¼Œé‡Šæ”¾æƒ³è±¡ï¼Œç”¨ä»£ç æ„å»ºä¸ä¸€æ ·çš„ä¸–ç•Œï¼</p>
<h3 data-id="heading-2">AIå‘å–„</h3>
<p>æŠ€æœ¯ï¼Œå› æƒ…æ€€è€Œæ›´æœ‰æ¸©åº¦ã€‚æˆ‘ä»¬é¼“åŠ±å°†æ­£å‘ä»·å€¼è§‚ä¸ç¤¾ä¼šè´£ä»»æ„Ÿèå…¥ä½œå“ã€‚æœŸå¾…ä½ çš„åˆ›ä½œä¸ä»…åœ¨æŠ€æœ¯ä¸Šåˆ›æ–°ï¼Œæ›´èƒ½ä»¥äººä¸ºæœ¬ï¼Œèµ‹èƒ½ç¤¾ä¼šï¼Œè®©AIæœåŠ¡äºç¤¾ä¼šçš„ç¾å¥½å‘å±•ã€‚</p>
<p>å¾®ä¿¡æ‰«ç åŠ å…¥æ´»åŠ¨ä¸“å±ç¤¾ç¾¤ï¼Œäº†è§£æ›´å¤šæ´»åŠ¨è¯¦æƒ…ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa9cb286cc9e44c8a917180ecea0f348~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763519019&amp;x-signature=sjVZhr51Q2rkQBVBegMMWzVR55Q%3D" alt="infoflow 2025-11-12 10-17-47.png" loading="lazy"/></p>
<ul>
<li>è·å–â€œäº”ä¸‡å…ƒäººæ°”å¥–â€è¯¦ç»†è¯„é€‰è§„åˆ™ä¸å‚ä¸æœºåˆ¶ï¼›</li>
<li>äº«æœ‰æŠ€æœ¯å¯¼å¸ˆåœ¨çº¿ç­”ç–‘ï¼ŒåŠæ—¶è§£å†³å¼€å‘éš¾é¢˜ï¼›</li>
<li>èå…¥äº’åŠ©ã€å…±äº«ã€å…±åˆ›çš„å¼€å‘è€…ç¤¾åŒºï¼Œä¸åŒè¡Œä¸€èµ·æˆé•¿ã€‚</li>
</ul>
<h2 data-id="heading-3">äºŒã€æ´»åŠ¨æ–¹å‘</h2>
<p>é€‰æ‹©æ„Ÿå…´è¶£çš„æ–¹å‘ï¼Œä¸AI Codingå·¥å…·ç»“å¯¹ï¼Œé‡Šæ”¾ä½ çš„åˆ›é€ åŠ›ï¼</p>
<h3 data-id="heading-4">1 å·¥å…·ææ•ˆ</h3>
<p>åœ¨ç”Ÿæ´»æœåŠ¡ã€æ•™è‚²ã€åŠå…¬ç­‰é¢†åŸŸï¼Œæ•°æ®è§„æ¨¡å’Œåœºæ™¯å¤æ‚åº¦æŒç»­å¢é•¿ï¼Œäººä»¬å¯¹æ•ˆç‡æå‡ä¸ä¸ªæ€§åŒ–ä½“éªŒçš„è¯‰æ±‚æ—¥ç›Šå¼ºçƒˆã€‚æˆ‘ä»¬é¼“åŠ±ä½ è¿ç”¨AIç¼–ç¨‹ï¼Œèšç„¦å…·ä½“åœºæ™¯ï¼Œæ‰“é€ ä¸€æ¬¾åˆ‡å®æå‡æ•ˆèƒ½çš„æ™ºèƒ½å·¥å…·ï¼Œè®©AIæˆä¸ºå·¥ä½œä¸ç”Ÿæ´»ä¸­çš„å¯é ä¼™ä¼´ï¼Œå®ç°â€œæŠ€æœ¯æœåŠ¡äºäººâ€ã€‚</p>
<p>ç¤ºä¾‹ï¼šæ—©æœŸäººç±»å¥´å½¹AIå®å½•ï¼šç”¨Comate Zulu 10minåšä¸€æ¬¾Chromeæ’ä»¶</p>
<h3 data-id="heading-5">2 ç¤¾ä¼šèµ‹èƒ½</h3>
<p>AIä¸ä»…æ˜¯æŠ€æœ¯é©å‘½ï¼Œæ›´æ˜¯æ¨åŠ¨äº§ä¸šå‡çº§ä¸æŠ€æœ¯è¿›æ­¥çš„é‡è¦åŠ›é‡ã€‚æˆ‘ä»¬æœŸå¾…ä½ å›´ç»•çœŸå®ç¤¾ä¼šéœ€æ±‚ï¼Œå¼€å‘å…·å¤‡ç°å®æ ¹åŸºä¸å¯æŒç»­ä»·å€¼çš„åº”ç”¨ä½œå“ï¼Œè¦†ç›–å…¬ç›Šã€ç¯ä¿ã€å¥åº·ã€åŠ©è€ã€æ–‡åŒ–ä¼ æ‰¿ç­‰é¢†åŸŸï¼Œä¹Ÿæ¬¢è¿å…·æœ‰å•†ä¸šæ½œåŠ›çš„åˆ›æ–°æ–¹æ¡ˆã€‚ç”¨ä»£ç ä¼ é€’ç§‘æŠ€çš„æ¸©åº¦ï¼Œè®©AIæœåŠ¡äºç¤¾ä¼šçš„ç¾å¥½å‘å±•ã€‚</p>
<p>ç¤ºä¾‹ï¼šæ”¾å¼ƒCursoré€‰æ‹©æ–‡å¿ƒå¿«ç ï¼Œæˆ‘ä»ç®—æ³•å·¥ç¨‹å¸ˆè¿›é˜¶åˆ°äº†å…¨æ ˆå·¥ç¨‹å¸ˆ</p>
<h3 data-id="heading-6">3 æ— é™åˆ›æ„</h3>
<p>åœ¨è¿™é‡Œï¼Œæƒ³è±¡åŠ›æ— ç•Œï¼Œåˆ›é€ è‡ªç”±ã€‚æˆ‘ä»¬é¼“åŠ±ä½ æ‰“ç ´ä¸€åˆ‡å¸¸è§„ï¼Œç”¨AIå®ç°é‚£äº›å¤©é©¬è¡Œç©ºçš„æ„æƒ³â€”â€”æ— è®ºæ˜¯ç”Ÿæˆäº’åŠ¨è‰ºæœ¯ã€æ„é€ è™šæ‹Ÿä¸–ç•Œã€å¼€å‘æƒ…æ„Ÿè®¡ç®—åº”ç”¨ï¼Œè¿˜æ˜¯åˆ›é€ å…¨æ–°çš„äº¤äº’ä½“éªŒã€‚ä½ çš„ä½œå“ï¼Œå°±æ˜¯èµ›é“ã€‚ä¸è®¾é™ï¼Œä¸å®šä¹‰ï¼Œåªä¸ºè§è¯æŠ€æœ¯å¦‚ä½•å› åˆ›æ„è€Œç»½æ”¾æ— é™å¯èƒ½ã€‚</p>
<h3 data-id="heading-7">4 â€œæ¨¡â€åŠ›åŠ ç </h3>
<p>æ¨¡å‹æ˜¯AIç¼–ç¨‹çš„æœ€å¼ºå¤§è„‘ğŸ§ ï¼æ¨èåœ¨é¡¹ç›®æ ¸å¿ƒåŠŸèƒ½æˆ–ç”Ÿæˆæµç¨‹ä¸­è°ƒç”¨æ–‡å¿ƒ4.5å¼€æºç³»åˆ—æ¨¡å‹ï¼Œç”¨äºå®Œæˆç†è§£ã€ç”Ÿæˆã€æ¨ç†ç­‰æ™ºèƒ½ä»»åŠ¡ã€‚è®©æ‚¨çš„ä½œå“â€œæ¨¡â€åŠ›æ»¡æ»¡ï½</p>
<h2 data-id="heading-8">ä¸‰ã€å¥–åŠ±è®¾ç½®</h2>
<h3 data-id="heading-9">1 æ€»åˆ†TOP3</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a787afba5fd4745a4115bd3cc10bf76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763519019&amp;x-signature=R94pcqMl5dy14uazRftVLjIVSF0%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-10">2 å•é¡¹å¥–</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f12652af24fb4b07b2df9662c9eae3ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763519019&amp;x-signature=315LblTCJx9qCTYCp7Ap7q1WLRU%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å† ã€äºšã€å­£å†›ä¸å¯é‡å¤è·å¥–</p>
<h3 data-id="heading-11">3 â€œæ¨¡â€åŠ›åŠ æˆå¥–</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/905876f17f214383afd5b44bdd12aafb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763519019&amp;x-signature=6kQ3165cN1DwYiX79%2FORuQtRrdM%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ¨èåœ¨æ ¸å¿ƒåŠŸèƒ½æˆ–ç”Ÿæˆæµç¨‹ä¸­è°ƒç”¨æ–‡å¿ƒå¤§æ¨¡å‹</p>
<h3 data-id="heading-12">4 æœ€å…·äººæ°”å¥–</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84b6def0a1bc41918755c294a42ed9be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763519019&amp;x-signature=PbAB9ZXYJTUJBMRCQCwkjwlfX%2Bc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å‚ä¸è€…å°†ä½œå“ç§¯æåˆ†äº«åœ¨æŠ€æœ¯ç¤¾åŒºå’Œç¤¾äº¤åª’ä½“ï¼Œå¯é¢å¤–ç“œåˆ†ä»·å€¼5wå…ƒå®ç‰©å¥–åŠ±ï½</p>
<p>å‚ä¸è€…åŠ¡å¿…åŠ å…¥ã€Œæ´»åŠ¨ç­”ç–‘ç¾¤ã€ï¼ï¼ç¤¾ç¾¤å°†å…¬å¸ƒäººæ°”å¥–ç“œåˆ†ç»†åˆ™å¹¶ç»Ÿè®¡å‘å¸ƒæ¸ é“</p>
<h3 data-id="heading-13">5 å®è®­ç›´é€š</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4b4f33520c24f64b3d95e3fece95361~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763519019&amp;x-signature=E1R4GqMGVkAoNr4Uq4hoIyceGYM%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-14">6 é¡¹ç›®æ›å…‰</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4807e295f42840a6bb5c0e1250693ffb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763519019&amp;x-signature=gP6jtIE%2BSwfNEj3m9shbzZn9P0U%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h2 data-id="heading-15">å››ã€æ´»åŠ¨æµç¨‹</h2>
<ul>
<li><strong>10.24 æ´»åŠ¨å¼€å¯</strong></li>
<li><strong>11.15 æŠ¥åæˆªæ­¢</strong></li>
<li><strong>11.20 é¡¹ç›®æäº¤æˆªæ­¢</strong></li>
<li><strong>12æœˆåˆ è·å¥–ä½œå“å…¬ç¤º&amp;å¥–åŠ±å‘æ”¾</strong></li>
</ul>
<h2 data-id="heading-16">äº”ã€å‚èµ›è¦æ±‚</h2>
<p>1.é¡»ä½¿ç”¨<strong>æ–‡å¿ƒå¿«ç  (Baidu Comate)</strong> è¿›è¡Œå¼€å‘ï¼›</p>
<p>ä¸€é”®ä¸‹è½½Baidu Comateï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcomate.baidu.com%2Fzh%2Fdownload" target="_blank" title="https://comate.baidu.com/zh/download" ref="nofollow noopener noreferrer">comate.baidu.com/zh/download</a></p>
<p>2.é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·ä¸æ–‡å¿ƒå¿«ç ç»“åˆï¼Œæ¢ç´¢æ›´ä¸°å¯Œçš„ä½œå“å½¢æ€ï¼›</p>
<p>3.æœ€ç»ˆæäº¤é¡¹ç›®æ˜¯å¯å…¬å¼€å±•ç¤ºçš„åº”ç”¨ï¼Œéœ€<strong>æäº¤GitHubé“¾æ¥æˆ–å¯å…¬å¼€è®¿é—®ä½œå“çš„é“¾æ¥æˆ–è‡³å®˜ç½‘</strong>ï¼ˆç‚¹å‡»æ´»åŠ¨å®˜ç½‘â€œæäº¤ä½œå“â€æŒ‰é’®ï¼Œæäº¤ä¸ªäººåŠä½œå“ä¿¡æ¯ï¼‰ï¼›</p>
<p>4.æ¨èä½¿ç”¨æ–‡å¿ƒæ¨¡å‹ï¼Œæœ‰æœºä¼šè·å¾—é¢å¤–å¥–åŠ±ï¼›</p>
<p><strong>5.é¼“åŠ±å¤šæ¸ é“åˆ†äº«</strong>ï¼ˆç™¾åº¦æ˜Ÿæ²³ç¤¾åŒºã€ç¨€åœŸæ˜é‡‘ã€CSDNã€çŸ¥ä¹ç­‰æŠ€æœ¯ç¤¾åŒºå’Œç¤¾äº¤åª’ä½“ï¼‰ä½œå“ï¼Œå¯<strong>é¢å¤–ç“œåˆ†ä»·å€¼5wå…ƒ</strong>äººæ°”å¥–ï¼›</p>
<p>6.æ¯ä¸ªæ–¹å‘éƒ½èƒ½ä»¥ä¸ªäººæˆ–å›¢é˜Ÿåä¹‰å‚ä¸ï¼›</p>
<p>7.åŸåˆ›æ€§ï¼šä½œå“æ ¸å¿ƒåˆ›æ„ã€é€»è¾‘å’Œå®ç°éœ€ä¸ºåŸåˆ›ï¼Œä¸¥ç¦æŠ„è¢­ã€å‰½çªƒã€‚å¦‚å¼•ç”¨ç¬¬ä¸‰æ–¹èµ„æºéœ€æ³¨æ˜å‡ºå¤„ï¼›</p>
<p>8.å†…å®¹åˆè§„ï¼šä½œå“å†…å®¹éœ€ç¬¦åˆå›½å®¶æ³•å¾‹æ³•è§„åŠå…¬åºè‰¯ä¿—ï¼Œä¸å¾—åŒ…å«ä¾µæƒã€è¿æ³•ã€è‰²æƒ…ã€æš´åŠ›ã€æ­§è§†ç­‰ä¸è‰¯ä¿¡æ¯ã€‚</p>
<p>äº†è§£æ›´å¤šæ´»åŠ¨è¯¦æƒ…æˆ–æŠ¥åå‚ä¸ï¼Œè¯·è®¿é—®æ´»åŠ¨å®˜ç½‘ğŸ‘‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fcomate.baidu.com%2Fzh%2FactivityComate1024" target="_blank" title="https://comate.baidu.com/zh/activityComate1024" ref="nofollow noopener noreferrer">comate.baidu.com/zh/activityâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯æ—¥å‰ç«¯çŸ¥è¯†ç‚¹ï¼ˆä¸€ï¼‰ï¼šåŸå‹ä¸åŸå‹é“¾]]></title>    <link>https://juejin.cn/post/7571355989133279247</link>    <guid>https://juejin.cn/post/7571355989133279247</guid>    <pubDate>2025-11-12T02:09:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571355989133279247" data-draft-id="7570866247979909172" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯æ—¥å‰ç«¯çŸ¥è¯†ç‚¹ï¼ˆä¸€ï¼‰ï¼šåŸå‹ä¸åŸå‹é“¾"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-11-12T02:09:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Milian"/> <meta itemprop="url" content="https://juejin.cn/user/2041125009126061"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯æ—¥å‰ç«¯çŸ¥è¯†ç‚¹ï¼ˆä¸€ï¼‰ï¼šåŸå‹ä¸åŸå‹é“¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2041125009126061/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Milian
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:09:41.000Z" title="Wed Nov 12 2025 02:09:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">1. é¦–å…ˆç†è§£ä½¿ç”¨classå®ç°ç»§æ‰¿</h2>
<blockquote>
<p>extendså…³é”®å­—å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œé€šè¿‡superè¿™ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œå…¶å®æ˜¯åŸå‹æ¥å®ç°</p>
</blockquote>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span> {<span class="hljs-comment">//çˆ¶ç±»</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }
  <span class="hljs-title function_">drink</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å–æ°´'</span>)
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Parent</span>{<span class="hljs-comment">//extends ç»§æ‰¿çˆ¶ç±»</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">super</span>(name)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
  }
  <span class="hljs-title function_">intruduce</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>å·²ç»<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span>å²äº†`</span>)
  }
}

<span class="hljs-keyword">const</span> student = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-number">3</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(student, <span class="hljs-string">'student'</span>);
student.<span class="hljs-title function_">intruduce</span>();

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Parent</span>{
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">super</span>(name)
    <span class="hljs-comment">// this.name = name;</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
  }
}

<span class="hljs-keyword">const</span> person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'æå››'</span>, <span class="hljs-number">6</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person, <span class="hljs-string">'person'</span>);
person.<span class="hljs-title function_">drink</span>();
</code></pre>
<h2 data-id="heading-1">2. åŸå‹æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>å…ˆä¸Šä»£ç </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
    }
    <span class="hljs-title function_">intruduce</span>(<span class="hljs-params"/>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>å·²ç»<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span>å²äº†`</span>)
    }
}

<span class="hljs-keyword">const</span> student = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-number">3</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(student, <span class="hljs-string">'student'</span>);
student.<span class="hljs-title function_">intruduce</span>();
</code></pre>
<h4 data-id="heading-2">a. studentå®ä¾‹å¯¹è±¡</h4>
<h5 data-id="heading-3">â…°. ä¸‹å›¾å¯ä»¥çœ‹å‡ºï¼Œstudentå¯¹è±¡è¿™ä¸ªå®ä¾‹å¯¹è±¡å¹¶æ²¡æœ‰åŒ…å«intruduceæ–¹æ³•</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c99d6f0938fe478096affba88b33c068~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlsaWFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518260&amp;x-signature=qDluC4Lu2nrvUhge%2FVyBG1Uw1QM%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-4">â…±. æˆ‘ä»¬æŠŠå®ƒå±•å¼€åï¼Œå…¶å®æ˜¯åŒ…å«åœ¨__proto__ä¸­</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb4bb78fcfaf4f04bace9fd35d6c7a6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlsaWFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518260&amp;x-signature=ST%2FAUCJe2KCpuU%2Bs0vp8k19njsg%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-5">â…². __proto__åˆ™ä¸ºstudentçš„éšå¼åŸå‹</h5>
<p>æ‰€ä»¥å½“æˆ‘ä»¬å»æ‰¾ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•çš„æ—¶å€™ï¼Œå½“å‰çš„å¯¹è±¡ä¸Šæ‰¾ä¸åˆ°çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šå»å®ƒçš„éšå¼åŸå‹ä¸Šæ‰¾ï¼Œå¦‚æœéšå¼åŸå‹ä¸Šæœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒå°±ä¼šå»è®¿é—®è¿™ä¸ªæ–¹æ³•ï¼Œç„¶åè¿›è¡Œè°ƒç”¨ã€‚</p>
<p>è°ƒç”¨æ–¹å¼å°±æ˜¯student.<strong>proto</strong></p>
<h4 data-id="heading-6">b. Studentç±»</h4>
<h5 data-id="heading-7">â…°. Studentä¸Šé¢æœ‰ä¸€ä¸ªå±æ€§å«prototype,ä¹Ÿå¯ä»¥æ‰“å°å‡ºå®ƒçš„æ–¹æ³•</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df87a9a93b9b4a6dba6c56e0cacaa800~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlsaWFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518260&amp;x-signature=fPmysmO%2Fh5rbUkvB476IKhPapNY%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-8">â…±. è€Œstudent.__proto__ä¹ŸåŒæ ·æœ‰è¿™äº›æ–¹æ³•ï¼Œæˆ‘ä»¬å¯¹æ¯”åå‘ç°å®ƒä»¬æ˜¯ä¸€æ‘¸ä¸€æ ·çš„</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e351cd9086a40a09da7e18ed8c3012d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlsaWFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518260&amp;x-signature=79twcAf6Ee%2FghJ1KV46RgUXTi08%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9">c. ä»è¿™å¼ å›¾å¯ä»¥çœ‹å‡ºå®ƒä»¬æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œprototypeæ˜¯Studentè¿™ä¸ªç±»çš„æ˜¾ç¤ºåŸå‹</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0a89b2b36974f5f822c4b800e6fff0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlsaWFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518260&amp;x-signature=beVN0wtIf%2BKMODFfZqcIKhEjRUY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">3. åŸå‹é“¾åˆæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>åœ¨ä¸Šä»£ç </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {<span class="hljs-comment">//çˆ¶ç±»</span>
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    }
    <span class="hljs-title function_">drink</span>(<span class="hljs-params"/>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å–æ°´'</span>)
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Teacher</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Person</span>{
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) {
        <span class="hljs-variable language_">super</span>(name);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
    }
    <span class="hljs-title function_">intruduce</span>(<span class="hljs-params"/>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>å·²ç»<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span>å²äº†`</span>)
    }
}

<span class="hljs-keyword">const</span> teacher = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-number">3</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(teacher, <span class="hljs-string">'teacher'</span>);
teacher.<span class="hljs-title function_">intruduce</span>();
</code></pre>
<h4 data-id="heading-11">a. å®ä¾‹å¯¹è±¡teacherè°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œé¦–å…ˆä¼šåœ¨è‡ªèº«å¼€å§‹æ‰¾ï¼Œæ‰¾ä¸åˆ°å°±é€šè¿‡__proto__éšå¼åŸå‹æ‰€æŒ‡å‘çš„Teacherç±»çš„æ˜¾ç¤ºåŸå‹çš„prototypeå»æ‰¾ï¼Œæ‰¾åˆ°åæ‰§è¡Œè¿™ä¸ªæ–¹æ³•,å¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œåˆå› ä¸ºTeacher.prototypeæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä¹Ÿæœ‰ä¸€ä¸ª__proto__å±æ€§ï¼Œç„¶åå°±ä¼šå»æ‰¾å®ƒæ‰€ç»§æ‰¿çš„çˆ¶ç±»Personçš„æ˜¾ç¤ºåŸå‹Person.prototypeé‡Œé¢çš„æ–¹æ³•ï¼Œæ‰€ä»¥teacheré€šè¿‡è¿™æ ·ä¸€ä¸ªé“¾ä¸€å±‚ä¸€å±‚çš„æ‰¾åˆ°ç›®æ ‡çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„åŸå‹é“¾ã€‚</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2047218d069e4e2595fcfff2dd13989b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlsaWFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518260&amp;x-signature=A1oNpgq8AozhY1B2s%2FGZXFBMqE4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50dc032004944489b6427c6106c21c03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlsaWFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518260&amp;x-signature=b4xYlu5uHYgrM%2FCfPSYJ0tixQC8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-12">b. æ£€æµ‹æŸ¥çœ‹å±æ€§å’Œæ–¹æ³•æ˜¯å¦æ˜¯è‡ªèº«æ‰€æ‹¥æœ‰çš„</h4>
<pre><code class="hljs language-js" lang="js">teacher.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">"teacher"</span>)<span class="hljs-comment">//false</span>
teacher.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">"name"</span>)<span class="hljs-comment">//true</span>
</code></pre>
<blockquote>
<p>é‚£ä¹ˆhasOwnPropertyè¿™ä¸ªå±æ€§æ˜¯ä»å“ªå„¿æ¥çš„å‘¢ï¼Ÿ</p>
<p>å¯¹è±¡çš„æœ€ç»ˆä¼šæŒ‡å‘é‚£æˆ‘ä»¬å‘ç°personè¿™ä¸ªçˆ¶ç±»å…¶å®æ˜¯ç»§æ‰¿äº†objectsè¿™ä¸ªç±»ï¼Œä¹Ÿå°±æ˜¯person.Prototypeçš„éšå¼åŸå‹__proto__å…¶å®æ˜¯æŒ‡å‘Object.prototypeè¿™ä¸ªåŸå‹,ç„¶åæ‰€æœ‰çš„å¯¹è±¡æœ€ç»ˆéƒ½ä¼šæŒ‡å‘objectï¼Œæœ€åobjectå¯¹è±¡çš„åŸå‹æœ€ç»ˆä¼šæŒ‡å‘nullã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31c9bd3ea7d545449e3119a86e214bbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlsaWFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518260&amp;x-signature=C7ujsIFfQNL%2Fd9c1%2BLjZzzvdUCQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/164bd69209274d738e44029c5cc8ead9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlsaWFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518260&amp;x-signature=UiCoePmeJAbvgwmkLKm05zpOSCM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-13">4. instanceof æ£€æŸ¥ç±»å‹</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f21c7cc4fffd43578af7a70004d0cdc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlsaWFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518260&amp;x-signature=%2FNiD9aXHTZpRll%2F4dIhy4thSwIQ%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>åŸç†ï¼šåŸå‹é“¾</p>
</blockquote>
<p>å¦‚æœæ˜¯åœ¨teacherçš„åŸå‹é“¾çš„ä¸œè¥¿ï¼Œéƒ½ä¼šè¿”å›true,è€ŒArrayä¸å­˜åœ¨åŸå‹é“¾ä¸Šæ‰€ä»¥è¿”å›false</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9483b9611bef453d8785997e7c9eda5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlsaWFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518260&amp;x-signature=z2PCVA38aa97osezvF0Hvco8GTc%3D" alt="" loading="lazy"/></p>
<h6 data-id="heading-14"><code>åˆ°è¿™é‡Œåº”è¯¥èƒ½ç†è§£åŸå‹ä¸åŸå‹é“¾çš„æ¦‚å¿µäº†</code></h6></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶åˆ°ä¸€ï¼šç¼–å†™ä¸€ä¸ªç®€å•çš„ Umi æ’ä»¶å¹¶å‘å¸ƒåˆ° npm]]></title>    <link>https://juejin.cn/post/7571378103281434630</link>    <guid>https://juejin.cn/post/7571378103281434630</guid>    <pubDate>2025-11-12T02:21:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571378103281434630" data-draft-id="7571334572769542187" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶åˆ°ä¸€ï¼šç¼–å†™ä¸€ä¸ªç®€å•çš„ Umi æ’ä»¶å¹¶å‘å¸ƒåˆ° npm"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶,React.js"/> <meta itemprop="datePublished" content="2025-11-12T02:21:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lcy453"/> <meta itemprop="url" content="https://juejin.cn/user/2921833644950300"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶åˆ°ä¸€ï¼šç¼–å†™ä¸€ä¸ªç®€å•çš„ Umi æ’ä»¶å¹¶å‘å¸ƒåˆ° npm
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2921833644950300/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lcy453
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:21:25.000Z" title="Wed Nov 12 2025 02:21:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<h2 data-id="heading-0">Â ä¸€ã€å‰è¨€</h2>
<p>Â Â Â Â Â Â Â Â æœ€è¿‘åœ¨å­¦ä¹  Umi æ¡†æ¶æ—¶ï¼Œå‘ç°å®ƒçš„æ’ä»¶æœºåˆ¶ç‰¹åˆ«çµæ´»ã€‚äºæ˜¯æˆ‘å°è¯•å†™ä¸€ä¸ªæœ€ç®€å•çš„ Umi æ’ä»¶ï¼Œæ¯”å¦‚åœ¨å¯åŠ¨é¡¹ç›®æ—¶è¾“å‡ºä¸€å¥æç¤ºè¯­ã€‚</p>
<p>Â  Â  Â  Â  åšå®Œè¿™ä¸ªæˆ‘ä»¬å¯ä»¥äº†è§£æ’ä»¶çš„åŸºæœ¬è§„èŒƒï¼Œä»¥åŠå¦‚ä½•æ‰“åŒ…å‘å¸ƒåˆ°npmï¼Œå¦‚ä½•è®©åˆ«äººnpm install ç›´æ¥å®‰è£…ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-1">äºŒã€åˆ›å»ºæ’ä»¶é¡¹ç›®</h2>
<p>Â Â Â Â Â Â Â Â åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹Â  Â Â <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e75d5df7967842bfbc03ce34d491d1fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGN5NDUz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518885&amp;x-signature=a79YrQ50K8RrFC82BRKPopnWNhY%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e747a280b7c74570a939920d7e17e73b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGN5NDUz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518885&amp;x-signature=oupg7n91lLa4fvtC%2F4BDFCrL1lA%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>Â  Â  Â  Â  è¿™æ ·é¡¹ç›®å°±åˆ›å»ºå¥½äº†ï¼Œè€Œä¸”æºå¸¦äº†package.jsonæ–‡ä»¶ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªä¾èµ–umiï¼Œç„¶åå®‰è£…umiã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c528f5b6abc4e55997d612be2aef52f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGN5NDUz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518885&amp;x-signature=q3FyB1bJlbmwLGGBDoc8yl0VvRE%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>æ‰§è¡Œpnpm install å°±è‡ªåŠ¨å®‰è£…å¥½ä¾èµ–äº†ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€æ³¨å†Œç™»å½•npmç„¶åå‘å¸ƒæœ¬åœ°æ’ä»¶åˆ°npm</h2>
<p>Â  Â  Â  Â  æ³¨å†Œåˆ°npmå®˜ç½‘å°±å¯ä»¥ï¼Œè¿™é‡Œæˆ‘ç›´æ¥ç™»å½•å¥½äº†ã€‚</p>
<p>Â Â Â Â Â Â Â Â <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6038d0aa54e466886312c102307f048~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGN5NDUz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518885&amp;x-signature=u3jKM%2FABCPQVL0cB09kluAyLZKU%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>Â  Â  Â  Â  ç™»å½•ä¹‹åå°±å¯ä»¥ç›´æ¥npm publish ç›´æ¥ä¸Šä¼ åˆ°npmäº†ã€‚</p>
<p>Â  Â  Â  Â  ä¹Ÿå¯ä»¥ç”¨å‘½ä»¤æ³¨å†Œï¼Œnpm adduser ç„¶åè¾“å…¥è´¦æˆ·å¯†ç å°±å¯ä»¥äº†ï¼Œé‚®ç®±ä¹Ÿéœ€è¦å¡«å†™ã€‚</p>
<h2 data-id="heading-3">4ã€å‘å¸ƒä¹‹åé€šè¿‡npm install å®‰è£…æ’ä»¶å¹¶ä¸”ä½¿ç”¨</h2>
<p>Â  Â  Â  Â  é¦–å…ˆå¯ä»¥æœ¬åœ°å†™å¥½æ’ä»¶ä¸Šä¼ å‘å¸ƒä¹‹å‰åœ¨è‡ªå·±é¡¹ç›®ç”¨pnpm link æ’ä»¶åç§°æœ¬åœ°æµ‹è¯•ä¸€ä¸‹ã€‚</p>
<p>Â  Â  Â  Â  é¦–å…ˆåœ¨æ’ä»¶é¡¹ç›®ç›®å½•pnpm link å°†æ’ä»¶åŒ…linkåˆ°npm æˆ–è€…pnpmç¯å¢ƒ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d502642cb01e44e3981de67f537ac461~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGN5NDUz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518885&amp;x-signature=nUwxg3iSwa5WgcxCeBRWXANTS7o%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>Â  Â  Â  Â  ç„¶ååœ¨é¡¹ç›®ç›®å½•npm link æ’ä»¶åŒ…åè¿è¡Œå³å¯</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c6bf7f7953343ffbc58e7d104890227~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGN5NDUz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518885&amp;x-signature=z1IKwOObEZWfUqNihcAYGDtMlR4%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>Â  Â  Â  Â  åœ¨è‡ªå·±çš„é¡¹ç›®è¾“å…¥npm install è‡ªå·±çš„æ’ä»¶åç§°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3885619cc7c74c9d9231a5d13db666dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGN5NDUz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518885&amp;x-signature=OhJ3JQ%2FXKWbHhS45l3hCT1uY%2FG8%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7b5bc322e284857b4c8be3bc6c596b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGN5NDUz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518885&amp;x-signature=hmMLfpqdz47c8EPqoFaZHi3xXmM%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>Â  Â  Â  Â  è¿™æ ·æ’ä»¶å°±å®‰è£…å®Œæˆäº†ã€‚</p>
<p>Â  Â  Â  Â  å®‰è£…å®Œä¹‹åæˆ‘ä»¬åœ¨è‡ªå·±çš„umié¡¹ç›®é‡Œé¢ï¼Œåœ¨.umirc.tsé…ç½®æˆ–è€…config/config.tsä¸­é…ç½®defineConfigä¸­çš„pluginsæ’ä»¶é…ç½®é¡¹å°±å¯ä»¥äº†ã€‚</p>
<pre><code class="hljs language-php" lang="php">import { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"umi"</span>;

export <span class="hljs-keyword">default</span> <span class="hljs-title function_ invoke__">defineConfig</span>({
  <span class="hljs-attr">routes</span>: [
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">"index"</span> },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/docs"</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">"docs"</span> },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/login"</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">"login"</span>, <span class="hljs-attr">layout</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/weather"</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">"weather"</span> },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/promise"</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">"Promise"</span> },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/aiChat"</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">"aiChat"</span>, <span class="hljs-attr">layout</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/websocket"</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">"websocket"</span>, <span class="hljs-attr">layout</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/test"</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">"test"</span>, <span class="hljs-attr">layout</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/streamingChat"</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">"streamingChat"</span>, <span class="hljs-attr">layout</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/fileUploadDemo"</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">"FileUploadDemo"</span>, <span class="hljs-attr">layout</span>: <span class="hljs-literal">false</span> },
  ],
  <span class="hljs-attr">npmClient</span>: <span class="hljs-string">"pnpm"</span>,
  <span class="hljs-attr">mock</span>: {
    <span class="hljs-attr">include</span>: [<span class="hljs-string">"src/mock/**/*.ts"</span>], // å¯ç”¨mockåŠŸèƒ½å¹¶æŒ‡å®šmockæ–‡ä»¶ä½ç½®
  },
  <span class="hljs-attr">plugins</span>: [<span class="hljs-string">"umi-plugin-hello-lcy"</span>],
});
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>Â  Â  Â  Â  è¿è¡Œé¡¹ç›®æ§åˆ¶å°ä¼šè¾“å‡º</p>
<p>Â Â Â Â Â Â Â Â <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13a208464e2c48a4a19aee59874a2baf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGN5NDUz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518885&amp;x-signature=SIh%2BfeHFAWJZhUNQ5jFkWAhrGGc%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<h2 data-id="heading-4">5ã€å¸¸è§é—®é¢˜Â  Â  Â  Â </h2>

























<table><thead><tr><th>é—®é¢˜</th><th>åŸå› </th><th>è§£å†³åŠæ³•</th></tr></thead><tbody><tr><td><code>npm error EPRIVATE</code></td><td><code>package.json</code> ä¸­ <code>"private": true</code></td><td>åˆ é™¤è¯¥å­—æ®µ</td></tr><tr><td><code>npm error 402 Payment Required</code></td><td>ä½¿ç”¨äº†ä½œç”¨åŸŸåŒ…ï¼ˆ<code>@xxx/</code>ï¼‰ä¸”æ²¡è®¾ç½®å…¬å¼€</td><td>åŠ ä¸Š <code>--access public</code></td></tr><tr><td>æ’ä»¶æœªç”Ÿæ•ˆ</td><td>æ²¡åœ¨ Umi é…ç½®æ–‡ä»¶ä¸­å¯ç”¨</td><td>ç¡®è®¤åœ¨ <code>plugins</code> æ•°ç»„ä¸­å£°æ˜</td></tr></tbody></table>
<h2 data-id="heading-5">6ã€æ€»ç»“</h2>
<p>è¿™ä¸€å¥—æµç¨‹ä¸‹æ¥ï¼Œä½ å·²ç»ç†è§£äº† Umi æ’ä»¶çš„åŸºæœ¬ç»“æ„,èƒ½åœ¨æœ¬åœ°æµ‹è¯•æ’ä»¶(npm link æ’ä»¶åç§°),æˆåŠŸå°†æ’ä»¶å‘å¸ƒåˆ° npm,<br/>
å¹¶èƒ½è¢«å…¶ä»–é¡¹ç›®ç›´æ¥å®‰è£…ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-6">å€¼å¾—ä¸€æçš„å·¥å…·</h4>
<ul>
<li>nrmåŒ…é•œåƒæºç®¡ç†å·¥å…·ç±»ä¼¼äºnvmï¼Œç®¡ç†é•œåƒæº</li>
<li>å¦‚æœè¦åœ¨npmå…¬å¸ƒä¸Šä¼ æ’ä»¶åŒ…ï¼Œéœ€è¦åˆ‡æ¢åˆ°å¯¹åº”npmé•œåƒæºç„¶åç™»å½•</li>
<li>å¦‚æœå…¬å¸å†…ç½‘ä¹Ÿéœ€è¦åˆ‡æ¢åˆ°å†…ç½‘é•œåƒæº</li>
<li>ç›¸å…³å‘½ä»¤ä¸º nrm ls æŸ¥çœ‹å½“å‰é•œåƒæºä»¥åŠä½¿ç”¨çš„é•œåƒæº</li>
<li>nrm use åˆ‡æ¢é•œåƒæº
â€‹</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HTML/CSS/JS é¡µé¢æ¸²æŸ“æœºåˆ¶ï¼šæ­ç§˜æµè§ˆå™¨å¦‚ä½•å°†å¹³å‡¡ä»£ç ç‚¹åŒ–ä¸ºè§†è§‰é­”æ³•]]></title>    <link>https://juejin.cn/post/7571355989133459471</link>    <guid>https://juejin.cn/post/7571355989133459471</guid>    <pubDate>2025-11-12T02:22:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571355989133459471" data-draft-id="7569580617709781046" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HTML/CSS/JS é¡µé¢æ¸²æŸ“æœºåˆ¶ï¼šæ­ç§˜æµè§ˆå™¨å¦‚ä½•å°†å¹³å‡¡ä»£ç ç‚¹åŒ–ä¸ºè§†è§‰é­”æ³•"/> <meta itemprop="keywords" content="å‰ç«¯,HTML,CSS"/> <meta itemprop="datePublished" content="2025-11-12T02:22:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAé˜¿giao"/> <meta itemprop="url" content="https://juejin.cn/user/473218785740627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HTML/CSS/JS é¡µé¢æ¸²æŸ“æœºåˆ¶ï¼šæ­ç§˜æµè§ˆå™¨å¦‚ä½•å°†å¹³å‡¡ä»£ç ç‚¹åŒ–ä¸ºè§†è§‰é­”æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/473218785740627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAé˜¿giao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:22:57.000Z" title="Wed Nov 12 2025 02:22:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æµè§ˆå™¨æ¸²æŸ“æµç¨‹æ¦‚è§ˆ</h2>
<p>åœ¨äº’è”ç½‘æ—¶ä»£ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨ä¸ç½‘é¡µæ‰“äº¤é“ï¼Œä½†ä½ æ˜¯å¦æ€è€ƒè¿‡ï¼Œå½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥URLåï¼Œé¡µé¢æ˜¯å¦‚ä½•ä»ä»£ç å˜æˆæˆ‘ä»¬çœ‹åˆ°çš„ç²¾ç¾ç•Œé¢çš„å‘¢ï¼Ÿæµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¤æ‚è€Œç²¾å¦™çš„æµç¨‹ï¼Œç†è§£å®ƒå¯¹äºå‰ç«¯å¼€å‘è€…è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-1">æµè§ˆå™¨æ¸²æŸ“æµç¨‹</h3>
<ol>
<li><strong>è¾“å…¥</strong>ï¼šHTML/CSS/JS ä»£ç </li>
<li><strong>æµè§ˆå™¨å¤„ç†</strong>ï¼šè§£æã€æ„å»ºã€æ¸²æŸ“</li>
<li><strong>è¾“å‡º</strong>ï¼šæœ€ç»ˆå‘ˆç°çš„é¡µé¢</li>
</ol>
<p>æµè§ˆå™¨æ¯ç§’å¯ä»¥ç»˜åˆ¶60æ¬¡ï¼ˆ16.6ms/å¸§ï¼‰ï¼Œè¿™ä¿è¯äº†é¡µé¢æµç•…çš„è§†è§‰ä½“éªŒã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€æ¸²æŸ“è¿‡ç¨‹è¯¦è§£</h2>
<h3 data-id="heading-3">1. æ„å»ºDOMæ ‘</h3>
<p>æµè§ˆå™¨è§£æHTMLå­—ç¬¦ä¸²ï¼Œå°†å…¶è½¬æ¢ä¸ºDOMï¼ˆDocument Object Modelï¼‰æ ‘ã€‚DOMæ ‘æ˜¯ä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œä»£è¡¨äº†HTMLæ–‡æ¡£çš„ç»“æ„ã€‚</p>
<ul>
<li><strong>è¾“å…¥</strong>ï¼šHTMLå­—ç¬¦ä¸²</li>
<li><strong>å¤„ç†</strong>ï¼šè§£æHTMLï¼Œæ„å»ºDOMæ ‘</li>
<li><strong>è¾“å‡º</strong>ï¼šDOMæ ‘ï¼ˆå†…å­˜ä¸­çš„ç»“æ„ï¼‰</li>
</ul>
<p>ç¤ºä¾‹HTMLæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ä»‹ç»<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æ¸²æŸ“æµç¨‹<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>green<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>red<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>è¿è¡Œè¯¥æ–‡ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­å³é”®é€‰æ‹© æ£€æŸ¥ ï¼Œé€‰æ‹©æ§åˆ¶å°ï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç </p>
<pre><code class="hljs language-css" lang="css">document<span class="hljs-selector-class">.getElementsByTagName</span>('<span class="hljs-selector-tag">p</span>')<span class="hljs-selector-attr">[1]</span>
</code></pre>
<p>å¯ä»¥æŸ¥è¯¢åˆ°DOMæ ‘çš„å¯¹åº”èŠ‚ç‚¹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54aab8848a8d42c096892bd1eb0776c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518977&amp;x-signature=o7Q0racwAz51OwUunQQL89GKJqE%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦DOMæ ‘ï¼Ÿ</strong></p>
<ul>
<li>æµè§ˆå™¨æ— æ³•ç›´æ¥å¤„ç†HTMLå­—ç¬¦ä¸²</li>
<li>æ ‘çŠ¶ç»“æ„ä¾¿äºè¡¨ç¤ºé¡µé¢çš„å±‚æ¬¡å…³ç³»</li>
<li>æ¯ä¸ªHTMLæ ‡ç­¾å…·æœ‰ç‰¹å®šè¯­ä¹‰ï¼ˆå¦‚headerã€footerã€articleï¼‰ï¼Œåº”æ ¹æ®å†…å®¹å«ä¹‰æ­£ç¡®é€‰ç”¨</li>
</ul>
<h3 data-id="heading-4">2. æ„å»ºCSSOMæ ‘</h3>
<p>æµè§ˆå™¨è§£æCSSå­—ç¬¦ä¸²ï¼Œæ„å»ºCSSOMï¼ˆCSS Object Modelï¼‰æ ‘ã€‚</p>
<ul>
<li><strong>è¾“å…¥</strong>ï¼šCSSå­—ç¬¦ä¸²</li>
<li><strong>å¤„ç†</strong>ï¼šè§£æCSSï¼Œæ„å»ºCSSOMæ ‘</li>
<li><strong>è¾“å‡º</strong>ï¼šCSSOMæ ‘</li>
</ul>
<p><strong>CSSOMæ ‘ç»“æ„</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªCSSè§„åˆ™æ˜¯ä¸€ä¸ªèŠ‚ç‚¹</li>
<li>æ¯ä¸ªèŠ‚ç‚¹åŒ…å«é€‰æ‹©å™¨å’Œå£°æ˜å—</li>
<li>å£°æ˜å—åŒ…å«å±æ€§å’Œå€¼</li>
</ul>
<h3 data-id="heading-5">3. åˆå¹¶DOMå’ŒCSSOMï¼Œç”Ÿæˆæ¸²æŸ“æ ‘</h3>
<p>æµè§ˆå™¨å°†DOMæ ‘å’ŒCSSOMæ ‘åˆå¹¶ï¼Œç”Ÿæˆæ¸²æŸ“æ ‘ï¼ˆRender Treeï¼‰ã€‚</p>
<h3 data-id="heading-6">4. å¸ƒå±€ï¼ˆLayoutï¼‰</h3>
<p>è®¡ç®—æ¯ä¸ªå…ƒç´ åœ¨é¡µé¢ä¸Šçš„ä½ç½®å’Œå¤§å°ã€‚</p>
<h3 data-id="heading-7">5. ç»˜åˆ¶ï¼ˆPaintingï¼‰</h3>
<p>å°†æ¸²æŸ“æ ‘è½¬æ¢ä¸ºå±å¹•ä¸Šçš„åƒç´ ï¼Œæœ€ç»ˆå‘ˆç°é¡µé¢ã€‚</p>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€å†™å¥½HTMLâ€”â€”æ­£ç¡®ä½¿ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾</h2>
<h3 data-id="heading-9">1. ä»€ä¹ˆæ˜¯è¯­ä¹‰åŒ–æ ‡ç­¾ï¼Ÿ</h3>
<p>è¯­ä¹‰åŒ–æ ‡ç­¾æ˜¯æŒ‡å…·æœ‰æ˜ç¡®å«ä¹‰çš„HTMLæ ‡ç­¾ï¼Œå¦‚<code>&lt;header&gt;</code>ã€<code>&lt;footer&gt;</code>ã€<code>&lt;article&gt;</code>ã€<code>&lt;section&gt;</code>ç­‰ï¼Œè€Œéä»…ä½¿ç”¨<code>&lt;div&gt;</code>ã€‚</p>
<h3 data-id="heading-10">2. è¯­ä¹‰åŒ–æ ‡ç­¾çš„ä½œç”¨</h3>
<ul>
<li><strong>æé«˜ä»£ç å¯è¯»æ€§</strong>ï¼šè®©å¼€å‘è€…æ›´å®¹æ˜“ç†è§£ä»£ç ç»“æ„</li>
<li><strong>æ–¹ä¾¿æœç´¢å¼•æ“ç´¢å¼•</strong>ï¼šæé«˜SEOæ•ˆæœ</li>
<li><strong>æ–¹ä¾¿å±å¹•é˜…è¯»å™¨è§£æ</strong>ï¼šæå‡æ— éšœç¢è®¿é—®ä½“éªŒ</li>
</ul>
<h3 data-id="heading-11">3. SEOä¸è¯­ä¹‰åŒ–</h3>
<p>SEOï¼ˆSearch Engine Optimizationï¼Œæœç´¢å¼•æ“ä¼˜åŒ–ï¼‰æ˜¯ç½‘ç«™åœ¨æœç´¢å¼•æ“ä¸­è·å¾—æ›´å¥½æ’åçš„å…³é”®ã€‚ç™¾åº¦ç­‰æœç´¢å¼•æ“ä¼šæ´¾å‡º"èœ˜è››"çˆ¬å–ç½‘ç«™ï¼Œé’ˆå¯¹HTMLè¿›è¡Œç®—æ³•åˆ†æï¼Œè¯„ä¼°æŸ¥è¯¢å†…å®¹ä¸ç½‘é¡µçš„ç›¸å…³æ€§ã€‚</p>
<p><strong>å¦‚ä½•æé«˜SEOï¼Ÿ</strong></p>
<ul>
<li>ä½¿ç”¨æ­£ç¡®çš„è¯­ä¹‰åŒ–æ ‡ç­¾</li>
<li>ä¸ºå†…å®¹æä¾›æ¸…æ™°çš„ç»“æ„</li>
<li>ç¡®ä¿å†…å®¹å¯è¢«æœç´¢å¼•æ“ç†è§£</li>
</ul>
<h3 data-id="heading-12">4. å¸¸ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾</h3>
<h4 data-id="heading-13">ç¤ºä¾‹HTMLä»£ç </h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>HTML5è¯­ä¹‰åŒ–æ ‡ç­¾--SEO<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  * {
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">box-sizing</span>: border-box;
  }
  <span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.5</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f4f4f4</span>;
  }
  <span class="hljs-selector-tag">header</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#333</span>;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
    <span class="hljs-attribute">text-align</span>: center;
  }
  <span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-comment">/* css å†…ç½®å‡½æ•° */</span>
    <span class="hljs-attribute">min-height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span>-<span class="hljs-number">120px</span>);
  }
  <span class="hljs-selector-tag">main</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;<span class="hljs-comment">/*ä¸»å†…å®¹åŒºåŸŸ å…¶å®ƒå…ƒç´ å å®Œåï¼Œä½™ä¸‹çš„éƒ½æ˜¯ä¸»å…ƒç´ çš„*/</span>
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.5rem</span>;
  }
  <span class="hljs-selector-tag">aside</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">250px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ecf0f1</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.5rem</span>;
  }
  <span class="hljs-selector-class">.aside-left</span> {
     <span class="hljs-attribute">order</span>: -<span class="hljs-number">1</span>;  <span class="hljs-comment">/* å·¦ä¾§è¾¹æ å…ˆä¸‹è½½ */</span>
  }
  <span class="hljs-selector-class">.aside-right</span> {
    <span class="hljs-attribute">order</span>: <span class="hljs-number">1</span>;  <span class="hljs-comment">/* å³ä¾§è¾¹æ åä¸‹è½½,å› ä¸º-1æ¯”1å° */</span>
  }
  <span class="hljs-selector-tag">footer</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#333</span>;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
    <span class="hljs-attribute">text-align</span>: center;
    <span class="hljs-attribute">margin-top</span>: auto;
  }
  <span class="hljs-comment">/* åª’ä½“æŸ¥è¯¢ è®¾å¤‡çš„å®½åº¦ 375px &lt; 480px */</span>
  <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
    <span class="hljs-selector-class">.container</span> {
      <span class="hljs-attribute">flex-direction</span>: column;  <span class="hljs-comment">/* ä¸»è½´è®¾ç½®ä¸ºå‚ç›´æ–¹å‘ */</span>
    }
    <span class="hljs-selector-class">.aside-left</span>{
      <span class="hljs-attribute">order</span>: <span class="hljs-number">1</span>;  <span class="hljs-comment">/* å·¦ä¾§è¾¹æ åä¸‹è½½ */</span>
    }
    <span class="hljs-selector-class">.aside-right</span>{
      <span class="hljs-attribute">order</span>: <span class="hljs-number">2</span>;  <span class="hljs-comment">/* å³ä¾§è¾¹æ åä¸‹è½½ */</span>
    }
    <span class="hljs-selector-tag">aside</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
    }
  }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>HTML5è¯­ä¹‰åŒ–æ ‡ç­¾--Agiaoçš„æŠ€æœ¯åšå®¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ä¸»è¦å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™é‡Œæ˜¯é¡µé¢çš„æ ¸å¿ƒå†…å®¹åŒºåŸŸ
          <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span><span class="hljs-symbol">&amp;lt;</span>main<span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span>
          å’Œ<span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span><span class="hljs-symbol">&amp;lt;</span>section<span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span>
          æ ‡ç­¾è¡¨ç°ç»“æ„æ¸…æ™°
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>HTML5çš„è¯­ä¹‰æ ‡ç­¾æœ‰åŠ©äºSEOå’Œæ— éšœç¢è®¿é—®<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
       
      <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"aside-left"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å·¦ä¾§è¾¹æ <span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¯¼èˆªé“¾æ¥ã€ç›®å½•å’Œå¹¿å‘Šä½<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>è”ç³»<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"aside-right"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å³ä¾§ä¾§è¾¹æ <span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç›¸å…³æ–‡ç« ã€æ¨èå†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-symbol">&amp;copy;</span>2025 Agiao. All rights reserved.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>é¡µé¢æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a13102698b44e0e862e7fdcc8fee281~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518977&amp;x-signature=xMbzPdA760QeVKe5U5Z%2FbAN8yg4%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-14">ç»“æ„è¯­ä¹‰åŒ–æ ‡ç­¾</h4>
<ul>
<li><code>header</code>ï¼šé¡µé¢å¤´éƒ¨</li>
<li><code>footer</code>ï¼šé¡µé¢åº•éƒ¨</li>
<li><code>article</code>ï¼šç‹¬ç«‹æ–‡ç« å†…å®¹</li>
<li><code>section</code>ï¼šæ–‡æ¡£ä¸­çš„ç« èŠ‚</li>
<li><code>nav</code>ï¼šå¯¼èˆªåŒºåŸŸ</li>
<li><code>aside</code>ï¼šä¾§è¾¹æ å†…å®¹</li>
<li><code>main</code>ï¼šä¸»è¦å†…å®¹åŒºåŸŸ</li>
<li><code>figure</code>ï¼šå›¾ç‰‡æˆ–å›¾è¡¨</li>
<li><code>figcaption</code>ï¼šå›¾ç‰‡æè¿°</li>
</ul>
<h4 data-id="heading-15">åŠŸèƒ½è¯­ä¹‰åŒ–æ ‡ç­¾</h4>
<ul>
<li><code>button</code>ï¼šæŒ‰é’®</li>
<li><code>a</code>ï¼šé“¾æ¥</li>
<li><code>ul/ol/li</code>ï¼šåˆ—è¡¨</li>
<li><code>table</code>ï¼šè¡¨æ ¼</li>
<li><code>form</code>ï¼šè¡¨å•</li>
<li><code>input</code>ï¼šè¾“å…¥æ¡†</li>
<li><code>textarea</code>ï¼šæ–‡æœ¬åŸŸ</li>
<li><code>select</code>ï¼šé€‰æ‹©æ¡†</li>
<li><code>option</code>ï¼šé€‰é¡¹æ¡†</li>
</ul>
<hr/>
<h2 data-id="heading-16">å››ã€å¸ƒå±€ä¼˜åŒ–æŠ€å·§</h2>
<h3 data-id="heading-17">1. è¯­ä¹‰åŒ–æ ‡ç­¾çš„å¸ƒå±€é¡ºåº</h3>
<p>åœ¨é¡µé¢ç»“æ„ä¸­ï¼Œåº”å°†<code>main</code>ï¼ˆä¸»è¦å†…å®¹ï¼‰æ”¾åœ¨<code>aside</code>ï¼ˆä¾§è¾¹æ ï¼‰ä¹‹å‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">main</span>&gt;ä¸»è¦å†…å®¹&lt;/<span class="hljs-selector-tag">main</span>&gt;
&lt;<span class="hljs-selector-tag">aside</span>&gt;ä¾§è¾¹æ å†…å®¹&lt;/<span class="hljs-selector-tag">aside</span>&gt;
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>ä¸»è¦å†…å®¹å…ˆä¸‹è½½ï¼Œä¾§è¾¹æ åä¸‹è½½</li>
<li>é€šè¿‡CSS Flexboxçš„ order å±æ€§å¯ä»¥æ§åˆ¶ä¸‹è½½é¡ºåºï¼š</li>
</ul>
<p><strong>order</strong> ï¼šé»˜è®¤å€¼ä¸º<code>0</code>ï¼Œå€¼è¶Šå°æ’åˆ—è¶Šé å‰ï¼Œæ”¯æŒè´Ÿæ•°ï¼š<code>order: -1</code>æ¯”<code>order: 0</code>æ›´é å‰</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: flex;
}
<span class="hljs-selector-tag">main</span> {
  <span class="hljs-attribute">order</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* è§†è§‰ä¸Šæ”¾åœ¨ä¸­é—´ */</span>
}
<span class="hljs-selector-class">.aside-left</span> {
  <span class="hljs-attribute">order</span>: -<span class="hljs-number">1</span>;  <span class="hljs-comment">/* å·¦ä¾§è¾¹æ å…ˆä¸‹è½½ */</span>
}
<span class="hljs-selector-class">.aside-right</span> {
  <span class="hljs-attribute">order</span>: <span class="hljs-number">1</span>;  <span class="hljs-comment">/* å³ä¾§è¾¹æ åä¸‹è½½,å› ä¸º-1æ¯”1å° */</span>
}
</code></pre>
<h3 data-id="heading-18">2. CSSé€‰æ‹©å™¨ä¼˜å…ˆçº§ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<p>CSSé€‰æ‹©å™¨çš„ä¹¦å†™æ–¹å¼ç›´æ¥å½±å“æ¸²æŸ“æ€§èƒ½ï¼Œç†è§£ä¼˜å…ˆçº§æœºåˆ¶å¯¹ä¼˜åŒ–è‡³å…³é‡è¦ï¼š</p>
<p><strong>ä¼˜å…ˆçº§è®¡ç®—å…¬å¼</strong>ï¼š<strong><code>å†…è”æ ·å¼(1000) &gt; ID(100) &gt; ç±»/å±æ€§/ä¼ªç±»(10) &gt; å…ƒç´ (1)</code></strong></p>
<p><strong>å…³é”®åŸåˆ™</strong>ï¼š</p>
<ul>
<li><strong>ä»å³å‘å·¦åŒ¹é…</strong>ï¼šæµè§ˆå™¨è§£æé€‰æ‹©å™¨æ—¶ä»å³å‘å·¦ï¼Œ<code>.nav a</code>ä¼šå…ˆæ‰¾æ‰€æœ‰<code>a</code>å†ç­›é€‰<code>.nav</code>å†…çš„</li>
<li><strong>è¶Šç®€å•è¶Šå¿«</strong>ï¼š<code>button.primary</code>Â æ¯”Â <code>div.main-content section.buttons button.primary</code>Â å¿«10å€ä»¥ä¸Š</li>
<li><strong>é¿å…é€šé…ç¬¦</strong>ï¼š<code>*</code>å’Œ<code>*::after</code>ä¼šå¼ºåˆ¶æµè§ˆå™¨æ£€æŸ¥æ¯ä¸ªå…ƒç´ </li>
</ul>
<p><strong>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">/*  ä½æ•ˆï¼šè¿‡åº¦åµŒå¥— + å¤æ‚ç»“æ„ */</span>
<span class="hljs-selector-tag">body</span> <span class="hljs-selector-tag">div</span><span class="hljs-selector-class">.main-content</span> <span class="hljs-selector-tag">ul</span><span class="hljs-selector-class">.sidebar</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-class">.item</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.link</span><span class="hljs-selector-pseudo">:hover</span> { ... }

<span class="hljs-comment">/*  é«˜æ•ˆï¼šæ‰å¹³åŒ– + è¯­ä¹‰åŒ–ç±»å */</span>
<span class="hljs-selector-class">.sidebar-link</span><span class="hljs-selector-pseudo">:hover</span> { ... }

<span class="hljs-comment">/*  æ…ç”¨ï¼šé«˜ä¼˜å…ˆçº§ä¸”éš¾è¦†ç›– */</span>
<span class="hljs-selector-id">#main</span> <span class="hljs-selector-class">.content</span> <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.important</span> { ... }

<span class="hljs-comment">/*  æ¨èï¼šä½¿ç”¨ç±»åä»£æ›¿IDï¼Œä¿æŒä½ç‰¹å¼‚æ€§ */</span>
<span class="hljs-selector-class">.main-content</span> <span class="hljs-selector-class">.highlight</span> { ... }
</code></pre>
<p><strong>é‡è¦æç¤º</strong>ï¼šå½“å¿…é¡»è¦†ç›–æ ·å¼æ—¶ï¼Œä¼˜å…ˆå¢åŠ é€‰æ‹©å™¨ç‰¹å¼‚æ€§è€Œéä½¿ç”¨ <strong><code>!important</code></strong>ã€‚ç‰¹å¼‚æ€§å†²çªæ˜¯CSSç»´æŠ¤ä¸­æœ€å¸¸è§çš„é—®é¢˜ï¼Œä¿æŒé€‰æ‹©å™¨"æ‰å¹³åŒ–"ï¼ˆ1-3å±‚ï¼‰èƒ½æ˜¾è‘—æå‡æ¸²æŸ“æ€§èƒ½å’Œä»£ç å¯ç»´æŠ¤æ€§ã€‚</p>
<h3 data-id="heading-19">3. è¯­ä¹‰åŒ–æ ‡ç­¾ä¸SEO</h3>
<p>ä»ä¸Šä¼ çš„æ–‡ä»¶2.htmlä¸­å¯ä»¥çœ‹å‡ºï¼Œ"HTML5çš„è¯­ä¹‰æ ‡ç­¾æœ‰åŠ©äºSEOå’Œæ— éšœç¢è®¿é—®"ã€‚ä½¿ç”¨æ­£ç¡®çš„è¯­ä¹‰åŒ–æ ‡ç­¾ï¼Œå¯ä»¥è®©æœç´¢å¼•æ“æ›´å¥½åœ°ç†è§£é¡µé¢å†…å®¹ï¼Œä»è€Œæé«˜æœç´¢æ’åã€‚</p>
<h3 data-id="heading-20">4. ç§»åŠ¨ç«¯å¸ƒå±€ä¿®æ”¹</h3>
<p>å¦‚æœæŒ‰ç…§æºä»£ç ï¼Œè¯¥å¸ƒå±€åœ¨ç§»åŠ¨ç«¯æ˜¾ç¤ºæ—¶ï¼Œå†…å®¹ç´§å‡‘æ— æ³•çªå‡ºé‡ç‚¹ï¼Œå¦‚å›¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e79833af87294af49955b954671619f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518977&amp;x-signature=ukcXifL%2FoISeoSFhZnC1iRtyPM8%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>å¯ä»¥åˆ©ç”¨å¼¹æ€§å¸ƒå±€çš„å±æ€§ï¼Œåœ¨Styleä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/*  é’ˆå¯¹å®½åº¦ â‰¤768px çš„è®¾å¤‡ï¼ˆå¹³æ¿åŠæ‰‹æœºï¼‰ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">flex-direction</span>: column;  <span class="hljs-comment">/* ä¸»è½´è®¾ç½®ä¸ºå‚ç›´æ–¹å‘ï¼Œå°†æ°´å¹³å¸ƒå±€è½¬ä¸ºå‚ç›´å †å  */</span>
  }
  <span class="hljs-selector-class">.aside-left</span> {
    <span class="hljs-attribute">order</span>: -<span class="hljs-number">1</span>;  <span class="hljs-comment">/* è§†è§‰æ’åºï¼Œéä¸‹è½½é¡ºåºï¼ */</span>
  }
  <span class="hljs-selector-class">.aside-right</span> {
    <span class="hljs-attribute">order</span>: <span class="hljs-number">1</span>;  <span class="hljs-comment">/* è§†è§‰æ’åºï¼Œéä¸‹è½½é¡ºåºï¼ */</span>
  }
}
</code></pre>
<p><strong>å…³é”®æ¦‚å¿µè§£æ</strong></p>
<p><strong>åª’ä½“æŸ¥è¯¢æ¡ä»¶</strong></p>
<ul>
<li><strong>å®é™…ç”Ÿæ•ˆæ¡ä»¶</strong>ï¼šå±å¹•å®½åº¦â‰¤768pxï¼ˆå¹³æ¿/æ‰‹æœºï¼‰</li>
</ul>
<p><strong>Flexboxå¸ƒå±€è½¬æ¢</strong></p>
<ul>
<li><code>flex-direction: column</code>Â å°†ä¸»è½´ä»<strong>æ°´å¹³</strong>å˜ä¸º<strong>å‚ç›´</strong></li>
<li>åœ¨å°å±å¹•ä¸Šï¼Œå†…å®¹ä»å¹¶æ’æ˜¾ç¤ºå˜ä¸º<strong>è‡ªä¸Šè€Œä¸‹å †å </strong></li>
<li>è§£å†³å°å±å¹•ç©ºé—´ä¸è¶³çš„é—®é¢˜</li>
</ul>
<p><strong>orderå±æ€§çš„çœŸç›¸</strong></p>
<ul>
<li>
<p><strong>ä»…æ”¹å˜è§†è§‰é¡ºåº</strong>ï¼Œä¸å½±å“ï¼š</p>
<ul>
<li>èµ„æºä¸‹è½½é¡ºåº</li>
<li>DOMç»“æ„é¡ºåº</li>
<li>å±å¹•é˜…è¯»å™¨è¯»å–é¡ºåº</li>
<li>SEOæƒé‡åˆ†é…</li>
</ul>
</li>
</ul>
<p>Â ä¿®æ”¹åæ˜¾ç¤ºé¡µé¢å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57cbf3681760451996fa49e0dc11e6f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518977&amp;x-signature=lRlDxfJfyCgvHNm1Tcv7YKsl1zI%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-21">äº”ã€æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-22">1. æ¸²æŸ“æµç¨‹çš„æ€§èƒ½è€ƒé‡</h3>
<p>æ¸²æŸ“è¿‡ç¨‹æ˜¯æµè§ˆå™¨çš„"é‡å¤´æˆ"ï¼Œæµç¨‹å¤æ‚ä¸”æ—¶é—´å¼€é”€è¾ƒå¤§ã€‚ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å…¥æ‰‹ï¼š</p>
<ul>
<li>å‡å°‘DOMèŠ‚ç‚¹æ•°é‡</li>
<li>é¿å…å¤æ‚çš„CSSé€‰æ‹©å™¨</li>
<li>å‡å°‘é‡æ’ï¼ˆreflowï¼‰å’Œé‡ç»˜ï¼ˆrepaintï¼‰</li>
<li>åˆç†ä½¿ç”¨CSSåŠ¨ç”»</li>
</ul>
<h3 data-id="heading-23">2. è¯­ä¹‰åŒ–ä¸æ€§èƒ½</h3>
<p>è¯­ä¹‰åŒ–æ ‡ç­¾ä¸ä»…å¯¹SEOæœ‰ç›Šï¼Œä¹Ÿèƒ½æå‡é¡µé¢åŠ è½½æ€§èƒ½ã€‚é€šè¿‡æ­£ç¡®çš„æ ‡ç­¾ä½¿ç”¨ï¼Œæµè§ˆå™¨å¯ä»¥æ›´å¿«åœ°æ„å»ºDOMæ ‘ï¼Œå‡å°‘è§£ææ—¶é—´ã€‚</p>
<hr/>
<h2 data-id="heading-24">å…­ã€ç»“è¯­</h2>
<p>HTML/CSS/JSçš„æ¸²æŸ“æµç¨‹æ˜¯æµè§ˆå™¨å·¥ä½œçš„æ ¸å¿ƒã€‚ç†è§£è¿™ä¸ªæµç¨‹ï¼Œç‰¹åˆ«æ˜¯DOMæ ‘å’ŒCSSOMæ ‘çš„æ„å»ºï¼Œå¯¹äºç¼–å†™é«˜æ•ˆã€å¯ç»´æŠ¤çš„å‰ç«¯ä»£ç è‡³å…³é‡è¦ã€‚è¯­ä¹‰åŒ–HTMLä¸ä»…è®©ä»£ç æ›´æ¸…æ™°ã€æ›´æ˜“äºç»´æŠ¤ï¼Œè¿˜èƒ½æå‡SEOæ•ˆæœå’Œæ— éšœç¢è®¿é—®ä½“éªŒã€‚</p>
<p>è®°ä½ï¼š<strong>æ­£ç¡®ä½¿ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾ï¼Œæ˜¯æ„å»ºç°ä»£ã€é«˜æ€§èƒ½ã€å¯è®¿é—®ç½‘é¡µçš„ç¬¬ä¸€æ­¥</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VonaJS: ç›´è§‚å¥½ç”¨çš„åˆ†å¸ƒå¼é”]]></title>    <link>https://juejin.cn/post/7571379089991335990</link>    <guid>https://juejin.cn/post/7571379089991335990</guid>    <pubDate>2025-11-12T02:29:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571379089991335990" data-draft-id="7571378103281516550" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VonaJS: ç›´è§‚å¥½ç”¨çš„åˆ†å¸ƒå¼é”"/> <meta itemprop="keywords" content="Node.js,TypeScript,NestJS"/> <meta itemprop="datePublished" content="2025-11-12T02:29:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¿®æ°´å¤§å”"/> <meta itemprop="url" content="https://juejin.cn/user/1119781972622208"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VonaJS: ç›´è§‚å¥½ç”¨çš„åˆ†å¸ƒå¼é”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1119781972622208/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¿®æ°´å¤§å”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:29:24.000Z" title="Wed Nov 12 2025 02:29:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åˆ†å¸ƒå¼é”</h2>
<p>VonaJS åŸºäº<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsesamecare%2Fredlock%2F" target="_blank" title="https://github.com/sesamecare/redlock/" ref="nofollow noopener noreferrer">Redlock</a>æä¾›äº†ç›´è§‚ã€æ˜“ç”¨çš„åˆ†å¸ƒå¼é”</p>
<h3 data-id="heading-1">åˆ›å»ºåˆ†å¸ƒå¼é”</h3>
<p>æ¯”å¦‚ï¼Œåœ¨æ¨¡å— demo-student ä¸­åˆ›å»ºåˆ†å¸ƒå¼é”</p>
<h4 data-id="heading-2">1. Cliå‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash">$ vona :create:bean meta redlock --module=demo-student
</code></pre>
<h4 data-id="heading-3">2. èœå•å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash">å³é”®èœå• - [æ¨¡å—è·¯å¾„]: `Vona Meta/Redlock`
</code></pre>
<h3 data-id="heading-4">åˆ†å¸ƒå¼é”å®šä¹‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">TypeRedlockLockResource</span> = <span class="hljs-built_in">never</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">TypeRedlockLockIsolateResource</span> = <span class="hljs-built_in">never</span>;

<span class="hljs-meta">@Meta</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetaRedlock</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BeanRedlockBase</span>&lt;<span class="hljs-title class_">TypeRedlockLockResource</span>, <span class="hljs-title class_">TypeRedlockLockIsolateResource</span>&gt; {}
</code></pre>
<ul>
<li><code>TypeRedlockLockResource</code>: å®šä¹‰<code>lock</code>æ–¹æ³•ä½¿ç”¨çš„é”èµ„æº</li>
<li><code>TypeRedlockLockIsolateResource</code>: å®šä¹‰<code>lockIsolate</code>æ–¹æ³•ä½¿ç”¨çš„é”èµ„æº</li>
</ul>
<h3 data-id="heading-5">å®šä¹‰é”èµ„æº</h3>
<p>å½“æˆ‘ä»¬ä½¿ç”¨åˆ†å¸ƒå¼é”æ—¶ï¼Œéœ€è¦æŒ‡å®šå¯¹åº”çš„é”èµ„æºã€‚æ¯”å¦‚ï¼Œä¸º<code>lock</code>æ–¹æ³•å®šä¹‰é”èµ„æº<code>name</code>:</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- export type TypeRedlockLockResource = never;</span>
<span class="hljs-addition">+ export type TypeRedlockLockResource = 'name';</span>
</code></pre>
<h3 data-id="heading-6">ä½¿ç”¨åˆ†å¸ƒå¼é”</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ControllerStudent</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-property">redlock</span>.<span class="hljs-title function_">lock</span>(<span class="hljs-string">'name'</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-comment">// do something in lock</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">'some result'</span>;
    });
  }
}  
</code></pre>
<ul>
<li><code>redlock.lock</code>ï¼šä¼ å…¥é”èµ„æº<code>name</code></li>
</ul>
<h3 data-id="heading-7"><code>lock/lockIsolate</code></h3>
<p>VonaJS æä¾›äº†ä¸¤ä¸ªé”æ–¹æ³•: <code>lock/lockIsolate</code>ã€‚äºŒè€…çš„åŒºåˆ«æ˜¯ï¼š<code>lockIsolate</code>è‡ªåŠ¨å®ç°äº†<code>æ•°æ®æºåˆ†çº§</code>ï¼Œä»è€Œé¿å…å› æ•°æ®æºç«äº‰è€Œå¯¼è‡´çš„æ­»é”æƒ…å†µ</p>
<ul>
<li>å‚è§: <a href="https://link.juejin.cn?target=https%3A%2F%2Fvona.js.org%2Fzh%2Fguide%2Fdistributed%2Fqueue%2Fdb-level.html" target="_blank" title="https://vona.js.org/zh/guide/distributed/queue/db-level.html" ref="nofollow noopener noreferrer">æ•°æ®æºåˆ†çº§</a></li>
</ul>
<h4 data-id="heading-8">å®šä¹‰é”èµ„æº: lockIsolate</h4>
<p>ä¸º<code>lockIsolate</code>æ–¹æ³•å®šä¹‰é”èµ„æº:</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- export type TypeRedlockLockIsolateResource = never;</span>
<span class="hljs-addition">+ export type TypeRedlockLockIsolateResource = 'name';</span>
</code></pre>
<h4 data-id="heading-9">ä½¿ç”¨åˆ†å¸ƒå¼é”: lockIsolate</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ControllerStudent</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-property">redlock</span>.<span class="hljs-title function_">lockIsolate</span>(<span class="hljs-string">'name'</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-comment">// do something in lock</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">'some result'</span>;
    });
  }
}  
</code></pre>
<h3 data-id="heading-10">å®šä¹‰é”èµ„æº: å­—é¢é‡æ¨¡ç‰ˆ</h3>
<p>é”èµ„æºè¿˜å¯ä»¥æ˜¯<code>å­—é¢é‡æ¨¡ç‰ˆ</code></p>
<p>æ¯”å¦‚ï¼Œå¦‚æœè¦ä¸ºä¸åŒçš„ç”¨æˆ·å•ç‹¬æä¾›é”èµ„æºï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å½¢å¦‚<code>user-${userId}</code>çš„å­—ç¬¦ä¸²ï¼Œä½œä¸ºé”èµ„æºåç§°</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- export type TypeRedlockLockIsolateResource = 'name';</span>
<span class="hljs-addition">+ export type TypeRedlockLockIsolateResource = 'name' | `user-${string}`;</span>
</code></pre>
<p>è¿™æ ·ï¼Œåœ¨ä½¿ç”¨<code>lockIsolate</code>æ–¹æ³•æ—¶åŒæ ·å¯ä»¥æä¾›ç±»å‹æç¤º</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ControllerStudent</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> userId = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-property">redlock</span>.<span class="hljs-title function_">lockIsolate</span>(<span class="hljs-string">`user-<span class="hljs-subst">${userId}</span>`</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-comment">// do something in lock</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">'some result'</span>;
    });
  }
}  
</code></pre>
<h3 data-id="heading-11">æŸ¥çœ‹å½“å‰ç”Ÿæ•ˆçš„åˆ†å¸ƒå¼é”æ¸…å•</h3>
<p>å¯ä»¥ç›´æ¥è¾“å‡ºå½“å‰ç”Ÿæ•ˆçš„åˆ†å¸ƒå¼é”æ¸…å•</p>
<pre><code class="hljs language-diff" lang="diff">class ControllerStudent {
  @Web.get('test')
  test() {
<span class="hljs-addition">+   this.bean.onion.meta.inspectMeta('redlock');</span>
  }
}
</code></pre>
<ul>
<li><code>this.bean.onion</code>: å–å¾—å…¨å±€ Service å®ä¾‹ <code>onion</code></li>
<li><code>.meta</code>: å–å¾—ä¸ meta ç›¸å…³çš„ Service å®ä¾‹</li>
<li><code>.inspectMeta</code>: è¾“å‡ºå½“å‰ç”Ÿæ•ˆçš„åˆ†å¸ƒå¼é”æ¸…å•</li>
</ul>
<p>å½“è®¿é—®<code>test</code> API æ—¶ï¼Œä¼šè‡ªåŠ¨åœ¨æ§åˆ¶å°è¾“å‡ºå½“å‰ç”Ÿæ•ˆçš„åˆ†å¸ƒå¼é”æ¸…å•ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaf3a61f69054411a42ff5bb37067108~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r-u5rC05aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763519364&amp;x-signature=%2BDlsMnJgL6lM319QWxug6lh9rQs%3D" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-12">èµ„æº</h3>
<ul>
<li>Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvonajs%2Fvona" target="_blank" title="https://github.com/vonajs/vona" ref="nofollow noopener noreferrer">github.com/vonajs/vona</a></li>
<li>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvona.js.org%2F" target="_blank" title="https://vona.js.org/" ref="nofollow noopener noreferrer">vona.js.org/</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SwiftUI-WebView å…¨é¢æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571379089991385142</link>    <guid>https://juejin.cn/post/7571379089991385142</guid>    <pubDate>2025-11-12T02:38:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571379089991385142" data-draft-id="7571348736153616420" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SwiftUI-WebView å…¨é¢æŒ‡å—"/> <meta itemprop="keywords" content="iOS,SwiftUI"/> <meta itemprop="datePublished" content="2025-11-12T02:38:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="YungFan"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006567000"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SwiftUI-WebView å…¨é¢æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006567000/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    YungFan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:38:29.000Z" title="Wed Nov 12 2025 02:38:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»‹ç»</h2>
<p>åœ¨ iOS å¼€å‘ä¸­ï¼Œç½‘é¡µå†…å®¹å±•ç¤ºå‡ ä¹æ˜¯æ¯ä¸ª App çš„åˆšéœ€åœºæ™¯ã€‚æ— è®ºæ˜¯å±•ç¤ºå¸®åŠ©ä¸­å¿ƒã€éšç§æ”¿ç­–ï¼Œè¿˜æ˜¯åµŒå…¥åœ¨çº¿è¯¾ç¨‹ã€æ–‡æ¡£é¢„è§ˆç­‰ï¼ŒWebView éƒ½æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚SwiftUI 7.0 é€šè¿‡ WebKit æ¨¡å—ï¼Œå¯ä»¥è½»æ¾å®ç°ç½‘é¡µåŠ è½½ã€å¯¼èˆªæ§åˆ¶ä»¥åŠ JavaScript äº¤äº’åŠŸèƒ½ã€‚æœ¬æ–‡å°†ä»åŸºç¡€åˆ°é«˜çº§ï¼Œå¾ªåºæ¸è¿›ä»‹ç» SwiftUI ä¸­çš„ WebView ç”¨æ³•ã€‚</p>
<h2 data-id="heading-1">ç½‘é¡µåŠ è½½</h2>
<ul>
<li>åœ¨ä½¿ç”¨ WebView å‰ï¼Œéœ€è¦å…ˆå¯¼å…¥ WebKit æ¨¡å—ã€‚</li>
<li>å€ŸåŠ© URL æˆ–è€… WebPageï¼Œå¯ä»¥å®ç°ç½‘é¡µåŠ è½½ä¸çŠ¶æ€ç®¡ç†åŠŸèƒ½ã€‚</li>
</ul>
<h3 data-id="heading-2">ç›´æ¥åŠ è½½URL</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI
<span class="hljs-keyword">import</span> WebKit

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://www.apple.com.cn"</span>)<span class="hljs-operator">!</span>

    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">WebView</span>(url: url)
    }
}
</code></pre>
<h3 data-id="heading-3">ä½¿ç”¨WebPage</h3>
<p>WebPage æ˜¯ä¸€ä¸ªåŠŸèƒ½æ›´å¼ºçš„ç±»å‹ï¼Œå®ƒä¸ä»…èƒ½åŠ è½½ç½‘é¡µï¼Œè¿˜èƒ½å®æ—¶ç›‘æ§ç½‘é¡µçš„æ ‡é¢˜ã€åŠ è½½è¿›åº¦ã€URL çŠ¶æ€ç­‰ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-4">åŸºæœ¬ç”¨æ³•</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI
<span class="hljs-keyword">import</span> WebKit

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> webPage <span class="hljs-operator">=</span> <span class="hljs-type">WebPage</span>()
    <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://www.apple.com.cn"</span>)<span class="hljs-operator">!</span>

    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">WebView</span>(webPage)
            .ignoresSafeArea()
            .onAppear {
                webPage.load(<span class="hljs-type">URLRequest</span>(url: url))
            }
    }
}
</code></pre>
<h4 data-id="heading-5">å†…å®¹æ§åˆ¶</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI
<span class="hljs-keyword">import</span> WebKit

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> webPage <span class="hljs-operator">=</span> <span class="hljs-type">WebPage</span>()
    <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://www.apple.com.cn"</span>)<span class="hljs-operator">!</span>

    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-comment">// æ ‡é¢˜</span>
            <span class="hljs-type">Text</span>(webPage.title)
            <span class="hljs-comment">// è¿›åº¦</span>
            <span class="hljs-type">ProgressView</span>(<span class="hljs-string">""</span>, value: webPage.estimatedProgress, total: <span class="hljs-number">1.0</span>)
            <span class="hljs-comment">// å†…å®¹</span>
            <span class="hljs-type">WebView</span>(webPage)
                .ignoresSafeArea()
                .onAppear {
                    webPage.load(<span class="hljs-type">URLRequest</span>(url: url))
                }
        }
    }
}
</code></pre>
<h2 data-id="heading-6">é«˜çº§æ§åˆ¶</h2>
<h3 data-id="heading-7">å¯¼èˆªç­–ç•¥</h3>
<p>å¦‚æœéœ€è¦åœ¨ç½‘é¡µè·³è½¬æ—¶è¿›è¡Œåˆ¤æ–­ï¼ˆä¾‹å¦‚æ‹¦æˆªæŸäº› URLã€ä»…å…è®¸è®¿é—®ç‰¹å®šåŸŸåï¼‰ï¼Œå¯ä»¥è‡ªå®šä¹‰å¯¼èˆªç­–ç•¥ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI
<span class="hljs-keyword">import</span> WebKit

<span class="hljs-comment">// å¯¼èˆªå¤„ç†æ–¹å¼</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">NavigationDecider</span>: <span class="hljs-title class_">WebPage</span>.<span class="hljs-title class_">NavigationDeciding</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">decidePolicy</span>(<span class="hljs-params">for</span> <span class="hljs-params">response</span>: <span class="hljs-type">WebPage</span>.<span class="hljs-type">NavigationResponse</span>) <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">WKNavigationResponsePolicy</span> {
        <span class="hljs-keyword">if</span> response.response.url<span class="hljs-operator">?</span>.absoluteString.starts(with: <span class="hljs-string">"https://www.apple.com"</span>) <span class="hljs-operator">==</span> <span class="hljs-literal">true</span> {
            .allow
        } <span class="hljs-keyword">else</span> {
            .cancel
        }
    }
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> webPage: <span class="hljs-type">WebPage</span> <span class="hljs-operator">=</span> {
        <span class="hljs-keyword">var</span> config <span class="hljs-operator">=</span> <span class="hljs-type">WebPage</span>.<span class="hljs-type">Configuration</span>()
        config.applicationNameForUserAgent <span class="hljs-operator">=</span> <span class="hljs-string">"User Agent"</span>
        <span class="hljs-keyword">return</span> <span class="hljs-type">WebPage</span>(configuration: config, navigationDecider: <span class="hljs-type">NavigationDecider</span>())
    }()
    <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://www.baidu.com"</span>)<span class="hljs-operator">!</span>

    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-type">Text</span>(webPage.title)
            
            <span class="hljs-type">ProgressView</span>(<span class="hljs-string">""</span>, value: webPage.estimatedProgress, total: <span class="hljs-number">1.0</span>)

            <span class="hljs-type">WebView</span>(webPage)
                .ignoresSafeArea()
                .onAppear {
                    webPage.load(<span class="hljs-type">URLRequest</span>(url: url))
                }
        }
    }
}
</code></pre>
<h3 data-id="heading-8">JavaScript äº¤äº’</h3>
<p>è®¸å¤šåœºæ™¯éœ€è¦ä¸ç½‘é¡µå†…éƒ¨çš„ JavaScript è¿›è¡Œäº¤äº’ï¼Œå¦‚è°ƒç”¨å‡½æ•°ã€è·å–è¿”å›å€¼ç­‰ã€‚SwiftUI ä¹Ÿæä¾›äº†éå¸¸æ–¹ä¾¿çš„å¼‚æ­¥è°ƒç”¨æ–¹å¼ã€‚</p>
<h4 data-id="heading-9">ä»£ç </h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI
<span class="hljs-keyword">import</span> WebKit

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> webPage <span class="hljs-operator">=</span> <span class="hljs-type">WebPage</span>()
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> title <span class="hljs-operator">=</span> <span class="hljs-string">""</span>
    <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://www.apple.com.cn"</span>)<span class="hljs-operator">!</span>

    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            title.isEmpty <span class="hljs-operator">?</span> <span class="hljs-type">Text</span>(webPage.title) : <span class="hljs-type">Text</span>(title)

            <span class="hljs-type">ProgressView</span>(<span class="hljs-string">""</span>, value: webPage.estimatedProgress, total: <span class="hljs-number">1.0</span>)

            <span class="hljs-type">WebView</span>(webPage)
                .ignoresSafeArea()
                .onAppear {
                    webPage.load(<span class="hljs-type">URLRequest</span>(url: url))
                }
                .task {
                    <span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(for: .seconds(<span class="hljs-number">3</span>), clock: .suspending)
                    <span class="hljs-keyword">let</span> jsResult <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> webPage.callJavaScript(
                        <span class="hljs-string">"""
                        console.log("Hello SwiftUI")
                        return "JavaScript Returned Value"
                        """</span>
                    )
                    title <span class="hljs-operator">=</span> jsResult <span class="hljs-keyword">as!</span> <span class="hljs-type">String</span>
                }
        }
    }
}
</code></pre>
<h4 data-id="heading-10">æ•ˆæœ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4e4680b677c425fa8ea5588ddbc52d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWXVuZ0Zhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763519909&amp;x-signature=k%2FJwN1d%2BJuHhdCxJQQhW1cZ90Rc%3D" alt="æ•ˆæœ.gif" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ›´æ–°ï¼Figma MCP + Cursorï¼šå¤§å‰ç«¯æ—¶ä»£çš„UIåˆ°ä»£ç è‡ªåŠ¨åŒ–]]></title>    <link>https://juejin.cn/post/7571299394346303530</link>    <guid>https://juejin.cn/post/7571299394346303530</guid>    <pubDate>2025-11-12T01:10:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571299394346303530" data-draft-id="7570984341414969359" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ›´æ–°ï¼Figma MCP + Cursorï¼šå¤§å‰ç«¯æ—¶ä»£çš„UIåˆ°ä»£ç è‡ªåŠ¨åŒ–"/> <meta itemprop="keywords" content="Android,å‰ç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-12T01:10:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»˜åä¸€"/> <meta itemprop="url" content="https://juejin.cn/user/1556564197255975"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ›´æ–°ï¼Figma MCP + Cursorï¼šå¤§å‰ç«¯æ—¶ä»£çš„UIåˆ°ä»£ç è‡ªåŠ¨åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1556564197255975/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»˜åä¸€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T01:10:41.000Z" title="Wed Nov 12 2025 01:10:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c10ff6dcb42e46f980c358cdf50fcb70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuY5Y2B5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763514640&amp;x-signature=oT6LuaRehwBiLD6ulm9yQLYwEbE%3D" alt="image.png" loading="lazy"/>
Figmaå®˜æ–¹åœ¨9æœˆä»½æ¨å‡º<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.figma.com%2Fmcp-catalog%2F" target="_blank" title="https://www.figma.com/mcp-catalog/" ref="nofollow noopener noreferrer">MCPæœåŠ¡</a>ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œè¿˜éœ€è¦ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgrab%2Fcursor-talk-to-figma-mcp" target="_blank" title="https://github.com/grab/cursor-talk-to-figma-mcp" ref="nofollow noopener noreferrer">cursor-talk-to-figma-mcp</a>è¿›è¡Œè¿æ¥ï¼Œæµç¨‹æ¯”è¾ƒç¹çï¼Œè¿™æ¬¡Figmaçš„æ›´æ–°æ— ç–‘æé«˜äº†è¿æ¥æ•ˆç‡å’ŒUIç”Ÿæˆå‡†ç¡®ç‡ã€‚</p>
<p><strong>æ ¸å¿ƒä»·å€¼ï¼šFigma MCP èƒ½è§£å†³ä»€ä¹ˆå®é™…é—®é¢˜ï¼Ÿ</strong></p>
<p>ä¸€å¥è¯ï¼š</p>
<p><strong>é€šè¿‡ MCP ç›´æ¥è¯»å– Figma æ–‡ä»¶çš„ç»“æ„åŒ–è®¾è®¡æ•°æ®ï¼Œç»“åˆ Cursor çš„ä»£ç æ™ºèƒ½ï¼Œå®ç°å¤šå¹³å° UI ä»£ç çš„è‡ªåŠ¨ç”Ÿæˆï¼ŒåŒ…æ‹¬ Android XMLã€iOS SwiftUIã€H5ã€RN ç­‰ã€‚</strong></p>
<p><strong>å…·ä½“è§£å†³çš„ç—›ç‚¹ï¼š</strong></p>
<ol>
<li><strong>æ¶ˆé™¤è®¾è®¡åˆ°ä»£ç çš„ä¿¡æ¯åå·®</strong>Â - ç›´æ¥è·å–ç²¾ç¡®çš„è®¾è®¡æ•°æ®</li>
<li><strong>å¤§å¹…å‡å°‘é‡å¤åŠ³åŠ¨</strong>Â - è‡ªåŠ¨åŒ–ç”ŸæˆåŸºç¡€ UI ä»£ç </li>
<li><strong>æå‡è·¨å¹³å°ä¸€è‡´æ€§</strong>Â - åŒä¸€è®¾è®¡æºç”Ÿæˆå¤šå¹³å°ä»£ç </li>
<li><strong>åŠ é€Ÿå¼€å‘è¿­ä»£</strong>Â - ä»è®¾è®¡åˆ°å¯ç”¨ä»£ç ä»…éœ€å‡ åˆ†é’Ÿ</li>
</ol>
<h2 data-id="heading-0">ä¸€ã€å®æˆ˜æŒ‡å—ï¼šCursor + Figma MCP è¿æ¥æµç¨‹</h2>
<h3 data-id="heading-1">1. 1ã€è¿æ¥æµç¨‹</h3>
<ol>
<li>è¿›å…¥Figmaå®˜ç½‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.figma.com%2Fmcp-catalog%2F" target="_blank" title="https://www.figma.com/mcp-catalog/" ref="nofollow noopener noreferrer">MCPæœåŠ¡</a> ç‚¹å‡»Cursorä¸­â€œAdd MCP to Cursorâ€ï¼Œä¼šè·³è½¬åˆ°Cursorå®¢æˆ·ç«¯ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73c25eb5ad3248b3b65e99099f64eff1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuY5Y2B5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763514640&amp;x-signature=23PvWrDAjxq%2FILdcVk%2FI%2Fa1kZ3Y%3D" alt="image.png" loading="lazy"/></p>
<ol start="2">
<li>ç‚¹å‡»Â <strong>Install</strong>Â </li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8169401b4ea446539a8fa61fa03b64e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuY5Y2B5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763514640&amp;x-signature=VJATUe%2BYVLgrDjk9Md6l3vMPVQ0%3D" alt="image.png" loading="lazy"/></p>
<ol start="3">
<li>ç‚¹å‡»Â <strong>Connect</strong>Â å†å¼€å§‹èº«ä»½éªŒè¯è¿‡ç¨‹ã€‚</li>
<li>ç‚¹å‡»Â <strong>Open</strong>.Â 
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/264013dcf6d2478f9ccf092966230e2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuY5Y2B5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763514640&amp;x-signature=gdJ%2BOjjtdv0rJXtGzSeL7kifqwU%3D" alt="Cursor MCP open dialog" loading="lazy"/></li>
<li><strong>Allow access</strong>Â </li>
</ol>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb2589e704e64044b5f953a4e5ea7301~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuY5Y2B5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763514640&amp;x-signature=WD15BgVqRtKIfWvahLx3JCI%2FWxc%3D" alt="Cursor allow access dialog" width="70%" loading="lazy"/>
<h3 data-id="heading-2">1.2ã€å¼€å§‹ä½¿ç”¨MCPæœåŠ¡</h3>
<ol>
<li>æ‰“å¼€Figmaå®¢æˆ·ç«¯ä»¥åŠåˆ‡æ¢åˆ°DEV MODEï¼Œé€‰æ‹©å›¾å±‚ copy link to selection</li>
</ol>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6927cea2e87f485081cdb6177080eb9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuY5Y2B5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763514640&amp;x-signature=KkxL8MatiwG3SS0rBn%2B8JBGDw%2F8%3D" alt="image.png" width="70%" loading="lazy"/>
<ol start="2">
<li>å°†å¤åˆ¶çš„é“¾æ¥ç²˜è´´åˆ°Cursorï¼Œè®©Cursorç”Ÿæˆç›¸åº”ä»£ç </li>
</ol>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4735fcdbd72405790b81038f3cab695~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuY5Y2B5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763514640&amp;x-signature=tfEH2lyXc7ghTGZg3KiD0rl7KbI%3D" alt="image.png" width="70%" loading="lazy"/>
<h3 data-id="heading-3">1.3ã€æ•ˆæœå¯¹æ¯”</h3>













<table><thead><tr><th>è®¾è®¡ç¨¿å›¾</th><th>AIç”Ÿæˆæ•ˆæœå›¾ï¼ˆç¬¬1ç‰ˆï¼‰</th></tr></thead><tbody><tr><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82b1af3518de4c09985d36f8d63b31e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuY5Y2B5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763514640&amp;x-signature=6WFqeByXPDoQVd%2BRH9iFaKaKBG0%3D" alt="image.png" width="100%" loading="lazy"/></td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38798f32175a4dffa79b75439945a18a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuY5Y2B5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763514640&amp;x-signature=pr01rx7G9axhJJb%2BEpTl0b9l98Y%3D" alt="image.png" width="90%" loading="lazy"/></td></tr></tbody></table>
<p>ç”±äºç›®å‰Cursor+Figmaè¿˜æ— æ³•è‡ªåŠ¨ä¸‹è½½æœ¬åœ°èµ„æºå›¾ç‰‡ï¼Œç¬¬ä¸€ç‰ˆçš„UIå›¾åƒç¼ºå¤±ï¼Œä½†æ•´ä½“çœ‹80%çš„ç»„ä»¶å’Œè®¾è®¡ç¨¿ä¸€è‡´ï¼Œæ¥ä¸‹æ¥æˆ‘å°†äººå·¥ä¸‹è½½å›¾ç‰‡å¹¶ä¸”æ¤å…¥</p>













<table><thead><tr><th>è®¾è®¡ç¨¿å›¾</th><th>AIç”Ÿæˆæ•ˆæœå›¾ï¼ˆç¬¬2ç‰ˆï¼‰</th></tr></thead><tbody><tr><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82b1af3518de4c09985d36f8d63b31e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuY5Y2B5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763514640&amp;x-signature=6WFqeByXPDoQVd%2BRH9iFaKaKBG0%3D" alt="image.png" width="100%" loading="lazy"/></td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a064376050854cfe94c51a4803d5441e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuY5Y2B5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763514640&amp;x-signature=rhCLZ2IMEkIgjxwsfVUp%2FLa78hY%3D" alt="image.png" width="85%" loading="lazy"/></td></tr></tbody></table>
<h3 data-id="heading-4">1.4ã€å°ç»“</h3>
<p><strong>å·²å®ç°</strong></p>
<ol>
<li><strong>è¿æ¥æµç¨‹æ ‡å‡†åŒ–</strong>Â - å®˜æ–¹é›†æˆè®©è®¾ç½®å˜å¾—ç®€å•å¯é </li>
<li><strong>è®¾è®¡æ•°æ®ç²¾å‡†è·å–</strong>Â - èƒ½å¤Ÿå‡†ç¡®è¯»å–å°ºå¯¸ã€é¢œè‰²ã€å­—ä½“ã€é—´è·ç­‰æ ¸å¿ƒæ ·å¼å±æ€§</li>
<li><strong>å¤šå¹³å°ä»£ç ç”Ÿæˆ</strong>Â - æ”¯æŒç”Ÿæˆç¬¦åˆå„å¹³å°è§„èŒƒçš„ UI ä»£ç </li>
<li><strong>ç»„ä»¶ç»“æ„è¿˜åŸ</strong>Â - èƒ½å¤Ÿæ­£ç¡®ç†è§£å¹¶é‡å»ºè®¾è®¡ä¸­çš„ç»„ä»¶å±‚æ¬¡å…³ç³»</li>
</ol>
<p><strong>ç°æœ‰å±€é™æ€§</strong></p>
<ol>
<li><strong>å›¾ç‰‡èµ„æºå¤„ç†</strong>Â - ä»éœ€æ‰‹åŠ¨ä¸‹è½½å¹¶æ›¿æ¢å›¾ç‰‡èµ„æº</li>
<li><strong>å¤æ‚äº¤äº’é€»è¾‘</strong>Â - ä¸»è¦ç”Ÿæˆé™æ€ UIï¼Œå¤æ‚äº¤äº’éœ€è¦é¢å¤–å¼€å‘</li>
</ol>
<h2 data-id="heading-5">äºŒã€é—®é¢˜</h2>
<p>ä»è¯»å– Figma åˆ°ç”Ÿæˆ Android UI ä»£ç ï¼ŒCursor æ€»è€—æ—¶ä¸åˆ° 1 åˆ†é’Ÿï¼Œè§†è§‰è¿˜åŸåº¦æ¥è¿‘ 90%ï¼Œè¿™æ— ç–‘å¤§å¹…æå‡äº†å¼€å‘æ•ˆç‡ã€‚ä½†åœ¨å®é™…ä¼ä¸šé¡¹ç›®ä¸­åº”ç”¨æ—¶ï¼Œä»ä¼šå‘ç°ä¸€äº›éœ€è¦ä¼˜åŒ–çš„å…³é”®é—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>ä¼ä¸šç»„ä»¶åº“é€‚é…é—®é¢˜</strong><br/>
å…¬å¸é¡¹ç›®é€šå¸¸åŸºäºè‡ªç ” UI ç»„ä»¶åº“å¼€å‘ï¼Œè€Œ AI é»˜è®¤ç”Ÿæˆçš„æ˜¯ç³»ç»ŸåŸç”Ÿç»„ä»¶ï¼Œå¯¼è‡´ç”Ÿæˆçš„ä»£ç æ— æ³•ç›´æ¥é›†æˆ</p>
</li>
<li>
<p><strong>å¸ƒå±€è¯†åˆ«ç²¾åº¦ä¸è¶³</strong><br/>
è®¾è®¡ç¨¿ä¸­çš„åˆ—è¡¨ç»“æ„ï¼ˆRecyclerViewï¼‰å¸¸è¢«è¯¯åˆ¤ä¸ºå¹³é“ºçš„é™æ€ Viewï¼Œç¼ºä¹å¯¹åŠ¨æ€å†…å®¹çš„æ™ºèƒ½è¯†åˆ«</p>
</li>
</ol>
<p>ä¸Šè¿°é—®é¢˜çš„æœ¬è´¨åœ¨äºç¼ºä¹å¯¹ AI ç”Ÿæˆè¿‡ç¨‹çš„çº¦æŸä¸å¼•å¯¼ã€‚è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒåœ¨äºåˆ¶å®šç²¾å‡†çš„<strong>Cursor Rules</strong>ï¼Œæ¯”å¦‚Figmaå›¾å±‚ååŒ…å«â€œitem_â€â€œlist_â€è¿™ç±»å‰ç¼€ã€‚Ruleså¯ä»¥æ¤å…¥è¿™ç§åˆ¤æ–­é€»è¾‘ï¼Œå¼ºåˆ¶ç”ŸæˆRecyclerViewå’ŒAdapteræ¨¡æ¿ï¼Œè€Œä¸æ˜¯å‚»ä¹ä¹ç½—åˆ—Viewã€‚é€šè¿‡è§„åˆ™ä½“ç³»æ¥è§„èŒƒåŒ–ä»£ç è¾“å‡ºï¼Œç¡®ä¿ç”Ÿæˆç»“æœç¬¦åˆä¼ä¸šçº§é¡¹ç›®çš„æŠ€æœ¯è¦æ±‚ã€‚</p>
<p>é€šè¿‡ç³»ç»ŸåŒ–çš„è§„åˆ™é…ç½®ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†ä¼ä¸šçš„å¼€å‘è§„èŒƒã€ç»„ä»¶åº“æ ‡å‡†å›ºåŒ–åˆ°AIç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œä»è€Œå®ç°ä»"å¯ç”¨"åˆ°"å¥½ç”¨"çš„è´¨å˜ã€‚</p>
<p><strong>å¼•ç”¨</strong></p>
<p><em><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.figma.com%2Fmcp-catalog%2F" target="_blank" title="https://www.figma.com/mcp-catalog/" ref="nofollow noopener noreferrer">www.figma.com/mcp-catalogâ€¦</a></em></p>
<p>æ‹›äººï¼š
å¾—ç‰©ç»„å†…ç¼º Androidå’ŒiOSï¼Œæ€¥æ‹›ï¼Œå†…æ¨å¯è”ç³»æˆ‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ·ï¸ HTML å±æ€§å‚è€ƒ - å¸¸ç”¨ä¸å…¨å±€å±æ€§çš„è¡Œä¸ºã€å…¼å®¹æ€§ä¸æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7571379089991483446</link>    <guid>https://juejin.cn/post/7571379089991483446</guid>    <pubDate>2025-11-12T02:49:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571379089991483446" data-draft-id="7571334572769771563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ·ï¸ HTML å±æ€§å‚è€ƒ - å¸¸ç”¨ä¸å…¨å±€å±æ€§çš„è¡Œä¸ºã€å…¼å®¹æ€§ä¸æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,HTML,JavaScript"/> <meta itemprop="datePublished" content="2025-11-12T02:49:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Bug_Constructer"/> <meta itemprop="url" content="https://juejin.cn/user/254742426830856"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ·ï¸ HTML å±æ€§å‚è€ƒ - å¸¸ç”¨ä¸å…¨å±€å±æ€§çš„è¡Œä¸ºã€å…¼å®¹æ€§ä¸æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/254742426830856/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Bug_Constructer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:49:48.000Z" title="Wed Nov 12 2025 02:49:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ¯ <strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šç³»ç»ŸæŒæ¡HTMLå¸¸ç”¨å±æ€§ä¸å…¨å±€å±æ€§çš„è¯­ä¹‰ä¸è¡Œä¸ºï¼Œç†è§£å¸ƒå°”/æšä¸¾å±æ€§çš„å·®å¼‚ã€è·¨æºä¸å®‰å…¨ç›¸å…³å±æ€§çš„æ­£ç¡®é…ç½®ï¼Œå¹¶å½¢æˆå¯è½åœ°çš„å…¼å®¹æ€§ä¸å¯è®¿é—®æ€§æœ€ä½³å®è·µ</p>
<p>ğŸ“Š <strong>éš¾åº¦ç­‰çº§</strong>ï¼šåˆçº§-ä¸­çº§<br/>
ğŸ·ï¸ <strong>æŠ€æœ¯æ ‡ç­¾</strong>ï¼š<code>#HTML</code> <code>#å±æ€§</code> <code>#å…¨å±€å±æ€§</code> <code>#å¸ƒå°”å±æ€§</code> <code>#data-*</code> <code>#ARIA</code> <code>#å…¼å®¹æ€§</code><br/>
â±ï¸ <strong>é˜…è¯»æ—¶é—´</strong>ï¼šçº¦9åˆ†é’Ÿ</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸŒŸ å¼•è¨€</h2>
<p>HTML çš„å±æ€§ï¼ˆattributeï¼‰å†³å®šäº†å…ƒç´ çš„è¯­ä¹‰ã€è¡Œä¸ºå’Œè¡¨ç°ã€‚çœ‹ä¼¼ç®€å•çš„ <code>disabled</code>ã€<code>contenteditable</code>ã€<code>hidden</code> æˆ– <code>data-*</code>ï¼Œåœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸æµè§ˆå™¨å®ç°ä¸­å´æœ‰ä¸å°‘å·®å¼‚ï¼šå¸ƒå°”å±æ€§æ˜¯å¦éœ€è¦å†™å€¼ï¼Ÿæšä¸¾å±æ€§æœ‰å“ªäº›åˆæ³•å–å€¼ï¼Ÿ<code>crossorigin</code> ä¸ <code>integrity</code> å¦‚ä½•ååŒä¿éšœèµ„æºå®‰å…¨ï¼Ÿè¿™äº›é—®é¢˜è‹¥å¤„ç†ä¸å½“ï¼Œä¼šå¸¦æ¥å¯è®¿é—®æ€§ã€æ€§èƒ½ç”šè‡³å®‰å…¨é£é™©ã€‚</p>
<p>åœ¨æ—¥å¸¸çš„å‰ç«¯å¼€å‘ä¸­ï¼Œä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„å›°æ‰°ï¼š</p>
<ul>
<li>å¸ƒå°”å±æ€§å†™æˆ <code>disabled="false"</code> ä»ç„¶ç”Ÿæ•ˆï¼Œå¯¼è‡´äº¤äº’å¼‚å¸¸ï¼›</li>
<li>æ»¥ç”¨ <code>contenteditable</code> é€ æˆé”®ç›˜å¯è®¿é—®æ€§é€€åŒ–ï¼›</li>
<li>å¤–é“¾è„šæœ¬æœªé…ç½® SRI ä¸ CORSï¼Œè¢«å®‰å…¨ç­–ç•¥æ‹¦æˆªæˆ–é”™è¯¯ä¸é€æ˜ï¼›</li>
<li>å›¾ç‰‡æ‡’åŠ è½½ä¸è§£ç ç­–ç•¥æ··ç”¨ï¼Œå‡ºç°é¦–å±é—ªçƒä¸å¸ƒå±€æŠ–åŠ¨ï¼›</li>
</ul>
<p>ä»Šå¤©åˆ†äº« 7 ä¸ªã€Œå±æ€§è¡Œä¸ºä¸æœ€ä½³å®è·µã€æ ¸å¿ƒæŠ€å·§ï¼Œå¸®ä½ åœ¨å¼€å‘ä¸­å°‘è¸©å‘ã€å†™å‡ºæ›´ç¨³å¦¥çš„é¡µé¢ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ’¡ æ ¸å¿ƒæŠ€å·§è¯¦è§£</h2>
<blockquote>
<p>ğŸ“ ä½¿ç”¨è¯´æ˜ï¼šæœ¬æ–‡é€‰æ‹© 7 ä¸ªæœ€å¸¸ç”¨ã€æœ€æ˜“æ··æ·†çš„å±æ€§ä¸»é¢˜è¿›è¡Œè®²è§£ï¼Œæ¯èŠ‚å‡å«åœºæ™¯ã€å¸¸è§è¯¯åŒºã€æ¨èæ–¹æ¡ˆä¸è¦ç‚¹ã€‚</p>
</blockquote>
<h3 data-id="heading-2">1. å…¨å±€å±æ€§é€ŸæŸ¥ï¼šè¯­ä¹‰æ¸…æ™°ã€è¡Œä¸ºå¯æ§</h3>
<h4 data-id="heading-3">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>éœ€è¦ä¸ºå…ƒç´ æ·»åŠ æ ‡è¯†ä¸è¯­ä¹‰ã€è°ƒæ•´æ–¹å‘ä¸å¯ç¼–è¾‘æ€§ã€æ§åˆ¶æ˜¾ç¤ºä¸æ‹–æ‹½èƒ½åŠ›ç­‰é€šç”¨è¡Œä¸ºã€‚</p>
<p>å¸¸è§çš„å…¨å±€å±æ€§åŒ…æ‹¬ï¼š<code>id</code>ã€<code>class</code>ã€<code>title</code>ã€<code>lang</code>ã€<code>dir</code>ã€<code>hidden</code>ã€<code>draggable</code>ã€<code>contenteditable</code>ã€‚</p>
<h4 data-id="heading-4">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li>æ»¥ç”¨ <code>id</code> å¯¼è‡´é¡µé¢å†…å”¯ä¸€æ€§è¢«ç ´åï¼›</li>
<li><code>dir</code>/<code>lang</code> æœªè®¾ç½®ï¼ŒRTL/LTR æ–‡æœ¬æ–¹å‘æˆ–è¯­è¨€è¯†åˆ«é”™è¯¯ï¼›</li>
<li>éå¿…è¦åœºæ™¯å¯ç”¨ <code>contenteditable</code>ï¼Œå¯è®¿é—®æ€§ä¸è¾“å…¥æ³•ä½“éªŒå˜å·®ï¼›</li>
<li>ç”¨ <code>hidden</code> æ›¿ä»£é€»è¾‘å¸è½½ï¼Œäº§ç”Ÿæ— æ„ä¹‰çš„å¯èšç„¦å…ƒç´ ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ç¤ºä¾‹ï¼šä»»æ„å¯ç”¨ contenteditable ä¸éšèº«å…ƒç´ å¯èšç„¦é—®é¢˜ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"card"</span> <span class="hljs-attr">hidden</span> <span class="hljs-attr">contenteditable</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"ç¼–è¾‘å¡ç‰‡"</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… æ¨èï¼šä»…åœ¨æ˜ç¡®ç¼–è¾‘åœºæ™¯å¯ç”¨ contenteditableï¼›æŒ‰éœ€è®¾ç½®è¯­è¨€ä¸æ–¹å‘ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"profile"</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span> <span class="hljs-attr">dir</span>=<span class="hljs-string">"ltr"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"ç”¨æˆ·èµ„æ–™"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"profile__title"</span>&gt;</span>èµ„æ–™<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"profile__desc"</span>&gt;</span>å¯ç¼–è¾‘åŒºåŸŸä»…é™ä¸‹é¢çš„å¤‡æ³¨ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"memo"</span> <span class="hljs-attr">contenteditable</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"ç¼–è¾‘å¤‡æ³¨"</span>&gt;</span>åœ¨æ­¤æ·»åŠ å¤‡æ³¨...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * å®‰å…¨å¯ç”¨/å…³é—­å¯ç¼–è¾‘åŒºåŸŸ
 * <span class="hljs-doctag">@description</span> æ ¹æ®å¸ƒå°”å¼€å…³æ§åˆ¶å…ƒç´ çš„ contenteditable ä¸å¯èšç„¦æ€§
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">el</span> - ç›®æ ‡å…ƒç´ 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} <span class="hljs-variable">enable</span> - æ˜¯å¦å¯ç”¨å¯ç¼–è¾‘
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleEditable</span> = (<span class="hljs-params">el, enable</span>) =&gt; {
  <span class="hljs-comment">// ä»…åœ¨éœ€è¦æ—¶æ‰å¯ç”¨ï¼Œé¿å…å…¨å±€æ»¥ç”¨</span>
  el.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'contenteditable'</span>, enable ? <span class="hljs-string">'true'</span> : <span class="hljs-string">'false'</span>);
  el.<span class="hljs-property">tabIndex</span> = enable ? <span class="hljs-number">0</span> : -<span class="hljs-number">1</span>; <span class="hljs-comment">// æ§åˆ¶é”®ç›˜å¯è®¿é—®æ€§</span>
};
</code></pre>
<h4 data-id="heading-6">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li><code>id</code> å¿…é¡»å…¨é¡µé¢å”¯ä¸€ï¼›</li>
<li>ä¸ºæ–‡æ¡£æˆ–åŒºåŸŸè®¾ç½®æ­£ç¡®çš„ <code>lang</code> ä¸ <code>dir</code>ï¼›</li>
<li><code>hidden</code> ä¼šå°†å…ƒç´ ä»å¯è®¿é—®æ€§æ ‘ä¸­ç§»é™¤ï¼ˆä½†ä»åœ¨ DOMï¼‰ï¼Œç”¨äºæš‚æ—¶éšè—è€Œéå¸è½½ï¼›</li>
<li><code>contenteditable</code> ä»…ç”¨äºç¼–è¾‘åœºæ™¯ï¼Œæ³¨æ„é”®ç›˜ä¸ç„¦ç‚¹ç®¡ç†ã€‚</li>
</ul>
<h4 data-id="heading-7">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>åœ¨å¯Œæ–‡æœ¬ç»„ä»¶ä¸­ï¼Œä»…å¯¹ç¼–è¾‘å®¹å™¨å¯ç”¨ <code>contenteditable</code>ï¼ŒåŒæ—¶ç»“åˆ <code>aria-label</code> ä¸é”®ç›˜å¯¼èˆªæç¤ºæ”¹å–„å¯è®¿é—®æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-8">2. å¸ƒå°”å±æ€§è¡Œä¸ºï¼šå­˜åœ¨å³ä¸ºçœŸï¼Œå€¼ä¼šè¢«å¿½ç•¥</h3>
<h4 data-id="heading-9">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>æ§åˆ¶äº¤äº’çŠ¶æ€ï¼Œå¦‚ç¦ç”¨ã€è‡ªåŠ¨èšç„¦ã€å¿…å¡«ã€éšè—ç­‰ï¼š<code>disabled</code>ã€<code>autofocus</code>ã€<code>required</code>ã€<code>hidden</code>ã€<code>checked</code>ã€‚</p>
<h4 data-id="heading-10">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li>å†™æˆ <code>disabled="false"</code> ä»ç„¶æ˜¯ç¦ç”¨ï¼›</li>
<li>å°†å¸ƒå°”å±æ€§èµ‹ä¸ºå­—ç¬¦ä¸²ï¼Œè¯¯ä»¥ä¸ºå¯å…³é—­è¡Œä¸ºï¼›</li>
<li>è¯¯ç”¨ <code>autofocus</code> å½±å“æ— éšœç¢ä½“éªŒï¼ˆé¡µé¢åˆå§‹ç„¦ç‚¹è·³è·ƒï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ç¤ºä¾‹ï¼šdisabled="false" ä»ç„¶ç¦ç”¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">"false"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h4 data-id="heading-11">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… æ¨èï¼šé€šè¿‡å±æ€§å­˜åœ¨æ€§è¡¨è¾¾å¸ƒå°”å«ä¹‰ï¼›JS æ§åˆ¶ç”¨ property æ›´ç›´è§‚ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"submitBtn"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * åˆ‡æ¢å¸ƒå°”å±æ€§ï¼šå­˜åœ¨å³ä¸ºçœŸ
 * <span class="hljs-doctag">@description</span> ä½¿ç”¨ property æ§åˆ¶æ›´ç›´è§‚ï¼Œé¿å…å­—ç¬¦ä¸²èµ‹å€¼æ­§ä¹‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLButtonElement</span>} <span class="hljs-variable">btn</span> - ç›®æ ‡æŒ‰é’®
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} <span class="hljs-variable">disabled</span> - æ˜¯å¦ç¦ç”¨
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">setDisabled</span> = (<span class="hljs-params">btn, disabled</span>) =&gt; {
  btn.<span class="hljs-property">disabled</span> = disabled; <span class="hljs-comment">// ä½¿ç”¨ property ä»£æ›¿ setAttribute('disabled', 'false')</span>
};

<span class="hljs-comment">/**
 * åˆå§‹åŒ–é¡µé¢ç„¦ç‚¹
 * <span class="hljs-doctag">@description</span> è°¨æ…ä½¿ç”¨ autofocusï¼Œä¼˜å…ˆåœ¨è„šæœ¬ä¸­è®¾å®šåˆå§‹ç„¦ç‚¹
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">target</span> - éœ€è¦è·å¾—ç„¦ç‚¹çš„å…ƒç´ 
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">initFocus</span> = (<span class="hljs-params">target</span>) =&gt; {
  target.<span class="hljs-title function_">focus</span>(); <span class="hljs-comment">// ç»Ÿä¸€åœ¨è„šæœ¬ä¸­ç®¡ç†åˆå§‹ç„¦ç‚¹</span>
};
</code></pre>
<h4 data-id="heading-12">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li>å¸ƒå°”å±æ€§ä»…å‡­ã€Œå­˜åœ¨ã€å³å¯ç”Ÿæ•ˆï¼Œå±æ€§å€¼é€šå¸¸è¢«å¿½ç•¥ï¼›</li>
<li>åœ¨ JS ä¸­ä¼˜å…ˆä½¿ç”¨ propertyï¼ˆå¦‚ <code>el.disabled = true</code>ï¼‰ï¼Œæ›´ç›´è§‚ä¹Ÿæ›´å…¼å®¹ï¼›</li>
<li>é¿å…åœ¨åˆå§‹åŠ è½½é˜¶æ®µä½¿ç”¨ <code>autofocus</code> å½±å“è¯»å±ä¸é”®ç›˜ç”¨æˆ·ã€‚</li>
</ul>
<h4 data-id="heading-13">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>è¡¨å•ç»„ä»¶åº“ä¸­ç»Ÿä¸€å°è£… <code>disabled</code> æ§åˆ¶é€»è¾‘ï¼Œæ‰€æœ‰æŒ‰é’®ä¸è¾“å…¥æ¡†é‡‡ç”¨ property æ§åˆ¶ï¼Œé¿å…å±æ€§å­—ç¬¦ä¸²è¯¯ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-14">3. æšä¸¾å±æ€§ï¼šåˆæ³•å–å€¼ä¸é»˜è®¤è¡Œä¸º</h3>
<h4 data-id="heading-15">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>æ§åˆ¶ç­–ç•¥é€‰æ‹©æˆ–è¡Œä¸ºæ–¹å¼ï¼š<code>loading</code>ï¼ˆimgï¼š<code>auto</code>/<code>lazy</code>/<code>eager</code>ï¼‰ã€<code>decoding</code>ï¼ˆimgï¼š<code>sync</code>/<code>async</code>/<code>auto</code>ï¼‰ã€<code>crossorigin</code>ï¼ˆ<code>anonymous</code>/<code>use-credentials</code>ï¼‰ã€<code>autocomplete</code>ï¼ˆå¤šæšä¸¾å€¼ï¼‰ã€‚</p>
<h4 data-id="heading-16">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li>å†™å…¥ä¸åˆæ³•å–å€¼è¢«å¿½ç•¥ï¼Œå¯¼è‡´è¡Œä¸ºå›é€€åˆ°é»˜è®¤ï¼›</li>
<li>ä¸äº†è§£é»˜è®¤å€¼ï¼Œé€ æˆæ€§èƒ½æˆ–å…¼å®¹æ€§é—®é¢˜ï¼ˆå¦‚å›¾ç‰‡è§£ç æŠ–åŠ¨ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ï¼šä¸åˆæ³•å–å€¼å°†è¢«å¿½ç•¥ï¼Œé€€å›é»˜è®¤è¡Œä¸º --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/img/hero.jpg"</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">"fast"</span> <span class="hljs-attr">decoding</span>=<span class="hljs-string">"quick"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"æ¨ªå¹…"</span> /&gt;</span>
</code></pre>
<h4 data-id="heading-17">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… åˆæ³•å–å€¼ï¼šlazy ä¸ async å¯é…åˆå‡å°‘é¦–å±æŠ–åŠ¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/img/hero.jpg"</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">"lazy"</span> <span class="hljs-attr">decoding</span>=<span class="hljs-string">"async"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"æ¨ªå¹…"</span> /&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * è§„èŒƒåŒ–æšä¸¾å±æ€§å–å€¼
 * <span class="hljs-doctag">@description</span> ä¿è¯å±æ€§åœ¨åˆæ³•é›†åˆå†…ï¼Œå¦åˆ™å›é€€åˆ°å®‰å…¨é»˜è®¤
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">el</span> - ç›®æ ‡å…ƒç´ 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">name</span> - æšä¸¾å±æ€§å
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string[]</span>} <span class="hljs-variable">allowed</span> - åˆæ³•å–å€¼é›†åˆ
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">value</span> - å¾…è®¾ç½®çš„å€¼
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">setEnumAttr</span> = (<span class="hljs-params">el, name, allowed, value</span>) =&gt; {
  <span class="hljs-keyword">const</span> v = allowed.<span class="hljs-title function_">includes</span>(value) ? value : allowed[<span class="hljs-number">0</span>];
  el.<span class="hljs-title function_">setAttribute</span>(name, v);
};
</code></pre>
<h4 data-id="heading-18">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li>æ˜ç¡®æ¯ä¸ªæšä¸¾å±æ€§çš„åˆæ³•å–å€¼é›†åˆä¸é»˜è®¤å€¼ï¼›</li>
<li>å›¾ç‰‡å»ºè®® <code>loading="lazy"</code> + <code>decoding="async"</code>ï¼Œå‡å°‘é˜»å¡ä¸æŠ–åŠ¨ï¼›</li>
<li>è·¨æºæšä¸¾å€¼ä»…é™ <code>anonymous</code> ä¸ <code>use-credentials</code>ï¼Œå½±å“èµ„æºè¯·æ±‚ä¸é”™è¯¯å¯è§æ€§ã€‚</li>
</ul>
<h4 data-id="heading-19">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>èµ„æºç®¡ç†ç»„ä»¶ç»Ÿä¸€é€šè¿‡æšä¸¾æ ¡éªŒå‡½æ•°è®¾ç½® <code>loading</code>/<code>decoding</code>ï¼Œç¡®ä¿é…ç½®åˆæ³•ä¸è¡¨ç°ç¨³å®šã€‚</p>
<hr/>
<h3 data-id="heading-20">4. æ•°æ®å±æ€§ data-* ä¸ datasetï¼šç»“æ„åŒ–æºå¸¦ä¸šåŠ¡æ•°æ®</h3>
<h4 data-id="heading-21">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>åœ¨ä¸æ±¡æŸ“è¯­ä¹‰çš„å‰æä¸‹ï¼Œä¸ºå…ƒç´ é™„åŠ ç»“æ„åŒ–å…ƒæ•°æ®ï¼Œé…åˆè„šæœ¬è¯»å–ä¸æ›´æ–°ã€‚</p>
<h4 data-id="heading-22">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li>å°†ä¸šåŠ¡çŠ¶æ€å¡è¿› <code>class</code>/<code>id</code>ï¼Œéš¾ä»¥ç»´æŠ¤ï¼›</li>
<li>ç”¨ <code>innerHTML</code> æ‹¼å­—ç¬¦ä¸²è¯»å–æ•°æ®ï¼Œæ˜“é­XSSé£é™©ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ï¼šç”¨ class/id å­˜ä¸šåŠ¡çŠ¶æ€ï¼Œè€¦åˆæ ·å¼ä¸è„šæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"order_1234"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn processing"</span>&gt;</span>ä¸‹å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h4 data-id="heading-23">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… æ¨èï¼šä½¿ç”¨ data-* æè¿°å…ƒæ•°æ®ï¼Œè„šæœ¬é€šè¿‡ dataset è¯»å–/æ›´æ–° --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"orderBtn"</span> <span class="hljs-attr">data-order-id</span>=<span class="hljs-string">"1234"</span> <span class="hljs-attr">data-state</span>=<span class="hljs-string">"processing"</span>&gt;</span>ä¸‹å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * è¯»å–å¹¶æ›´æ–° dataset
 * <span class="hljs-doctag">@description</span> é€šè¿‡ dataset è¯»å–/å†™å…¥ data-*ï¼Œä¿æŒç»“æ„åŒ–ä¸å®‰å…¨
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">el</span> - ç›®æ ‡å…ƒç´ 
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">{orderId:string,state:string</span>}}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useDataset</span> = (<span class="hljs-params">el</span>) =&gt; {
  <span class="hljs-keyword">const</span> { orderId, state } = el.<span class="hljs-property">dataset</span>;
  <span class="hljs-comment">// æ›´æ–°çŠ¶æ€ä¸ºå·²å®Œæˆ</span>
  el.<span class="hljs-property">dataset</span>.<span class="hljs-property">state</span> = <span class="hljs-string">'done'</span>;
  <span class="hljs-keyword">return</span> { orderId, state };
};
</code></pre>
<h4 data-id="heading-24">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li><code>data-*</code> å€¼å§‹ç»ˆæ˜¯å­—ç¬¦ä¸²ï¼›å¤æ‚æ•°æ®è¯·ç”¨ JSON å¹¶åœ¨è„šæœ¬ä¸­è§£æï¼›</li>
<li>è¯»å–ä½¿ç”¨ <code>el.dataset.xxx</code>ï¼ˆè‡ªåŠ¨å°† <code>data-xxx</code> è½¬é©¼å³°ï¼‰ï¼›</li>
<li>é¿å…å°†è§†è§‰æ ·å¼ä¸ä¸šåŠ¡çŠ¶æ€è€¦åˆåœ¨ <code>class</code>/<code>id</code>ã€‚</li>
</ul>
<h4 data-id="heading-25">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>åœ¨åˆ—è¡¨é¡¹ä¸­ç”¨ <code>data-id</code>/<code>data-type</code> é™„åŠ å…ƒæ•°æ®ï¼Œäº‹ä»¶å§”æ‰˜æ—¶é€šè¿‡ <code>dataset</code> ç²¾ç¡®è¯†åˆ«ç›®æ ‡é¡¹ã€‚</p>
<hr/>
<h3 data-id="heading-26">5. è¡¨å•å±æ€§æœ€ä½³å®è·µï¼šå¯ç”¨æ€§ä¸å®‰å…¨</h3>
<h4 data-id="heading-27">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>æ–‡ä»¶é€‰æ‹©ä¸æ‹ç…§ã€è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ã€è¾“å…¥åˆæ³•æ€§ï¼š<code>accept</code>ã€<code>capture</code>ã€<code>autocomplete</code>ã€<code>required</code> ç­‰ã€‚</p>
<h4 data-id="heading-28">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li><code>accept</code> å†™é”™ MIME/æ‰©å±•åï¼Œå¯¼è‡´ç³»ç»Ÿé€‰æ‹©å™¨æ— æ³•è¿‡æ»¤ï¼›</li>
<li><code>capture</code> ç›²ç›®å¼€å¯ï¼Œç§»åŠ¨ç«¯ç›´æ¥æ‹‰èµ·æ‘„åƒå¤´å½±å“ä½“éªŒï¼›</li>
<li><code>autocomplete</code> æœªæŒ‰æšä¸¾å€¼é…ç½®ï¼Œè‡ªåŠ¨å¡«å……å¤±è´¥æˆ–æ‰°æ°‘ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ï¼šaccept å†™é”™æ‰©å±•åæˆ–ç¼ºå°‘ MIME --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/jpg"</span> /&gt;</span>
</code></pre>
<h4 data-id="heading-29">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… æ¨èï¼šç²¾ç¡®çš„ MIME æˆ–æ‰©å±•åï¼›æŒ‰éœ€é…ç½® capture ä¸ autocomplete --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fileInput"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/jpeg,image/png"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cameraInput"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/*"</span> <span class="hljs-attr">capture</span>=<span class="hljs-string">"environment"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">autocomplete</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">required</span> /&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * æ ¡éªŒæ–‡ä»¶é€‰æ‹©ç±»å‹
 * <span class="hljs-doctag">@description</span> æ£€æŸ¥æ–‡ä»¶æ‰©å±•åæ˜¯å¦ç¬¦åˆ accept ç­–ç•¥
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">File</span>} <span class="hljs-variable">file</span> - ç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} æ˜¯å¦é€šè¿‡æ ¡éªŒ
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">validateFileType</span> = (<span class="hljs-params">file</span>) =&gt; {
  <span class="hljs-keyword">const</span> ok = <span class="hljs-regexp">/(jpe?g|png)$/i</span>.<span class="hljs-title function_">test</span>(file.<span class="hljs-property">name</span>);
  <span class="hljs-keyword">return</span> ok;
};
</code></pre>
<h4 data-id="heading-30">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li><code>accept</code> å»ºè®®ä½¿ç”¨ MIME ç±»å‹ï¼ˆæ›´é€šç”¨ï¼‰+ æ‰©å±•åå…œåº•ï¼›</li>
<li>ç§»åŠ¨ç«¯è°¨æ…ä½¿ç”¨ <code>capture</code>ï¼Œä¸ºç”¨æˆ·ä¿ç•™ä»ç›¸å†Œé€‰æ‹©çš„è·¯å¾„ï¼›</li>
<li><code>autocomplete</code> ä½¿ç”¨æ ‡å‡†æšä¸¾å–å€¼æå‡å¯ç”¨æ€§ä¸å®‰å…¨ï¼ˆå¦‚ <code>email</code>ã€<code>username</code>ã€<code>current-password</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-31">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>ä¸Šä¼ ç»„ä»¶åœ¨å®¢æˆ·ç«¯å…ˆåšè½»é‡ç±»å‹æ ¡éªŒï¼Œå¤±è´¥æ—¶ä¸è§¦å‘ç½‘ç»œè¯·æ±‚ï¼Œå‡å°‘åç«¯å‹åŠ›ä¸æ— æ•ˆæµé‡ã€‚</p>
<hr/>
<h3 data-id="heading-32">6. è·¨æºä¸å®‰å…¨å±æ€§ï¼š<code>crossorigin</code>ã€<code>integrity</code>ã€<code>referrerpolicy</code></h3>
<h4 data-id="heading-33">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>å¤–é“¾è„šæœ¬/æ ·å¼/å›¾ç‰‡èµ„æºçš„å®‰å…¨ä¸é”™è¯¯é€æ˜åŒ–ï¼ŒCDN èµ„æºåŠ è½½ã€‚</p>
<h4 data-id="heading-34">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li>ä½¿ç”¨ SRIï¼ˆ<code>integrity</code>ï¼‰å´æœªè®¾ç½®åŒ¹é…çš„ CORSï¼ˆ<code>crossorigin</code>ï¼‰ï¼Œå¯¼è‡´æ ¡éªŒå¤±è´¥æˆ–é”™è¯¯ä¸å¯è§ï¼›</li>
<li>æœªé…ç½® <code>referrerpolicy</code>ï¼Œæ•æ„Ÿé¡µé¢æ³„éœ²æ¥æºä¿¡æ¯ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ï¼šSRI æœªé…åˆ CORSï¼Œå¯èƒ½å¯¼è‡´èµ„æºæ ¡éªŒå¤±è´¥æˆ–é”™è¯¯ä¿¡æ¯è¢«éšè— --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.example.com/app.min.js"</span> <span class="hljs-attr">integrity</span>=<span class="hljs-string">"sha384-..."</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-35">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… SRI + CORS ååŒï¼›å¯æŒ‰éœ€è®¾ç½® referrerpolicy --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>
  <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.example.com/app.min.js"</span>
  <span class="hljs-attr">integrity</span>=<span class="hljs-string">"sha384-..."</span>
  <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>
  <span class="hljs-attr">referrerpolicy</span>=<span class="hljs-string">"no-referrer"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * æ ¡éªŒè·¨æºé…ç½®æ˜¯å¦å®Œæ•´
 * <span class="hljs-doctag">@description</span> ç®€å•æ£€æŸ¥å…ƒç´ æ˜¯å¦åŒæ—¶å…·å¤‡ integrity ä¸åˆé€‚çš„ crossorigin
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLScriptElement</span>} <span class="hljs-variable">el</span> - å¤–é“¾è„šæœ¬å…ƒç´ 
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} æ˜¯å¦æ»¡è¶³åŸºæœ¬å®‰å…¨é…ç½®
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">checkCrossOriginSafety</span> = (<span class="hljs-params">el</span>) =&gt; {
  <span class="hljs-keyword">const</span> hasSRI = !!el.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'integrity'</span>);
  <span class="hljs-keyword">const</span> co = el.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'crossorigin'</span>);
  <span class="hljs-keyword">const</span> ok = hasSRI &amp;&amp; (co === <span class="hljs-string">'anonymous'</span> || co === <span class="hljs-string">'use-credentials'</span>);
  <span class="hljs-keyword">return</span> ok;
};
</code></pre>
<h4 data-id="heading-36">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li>SRI è¦ä¸ <code>crossorigin</code> ååŒï¼›</li>
<li><code>referrerpolicy</code> æ ¹æ®åœºæ™¯åˆç†é…ç½®ï¼ˆå¦‚ä¸‹è½½é¡µå¯ç”¨ <code>no-referrer</code>ï¼‰ï¼›</li>
<li>äº†è§£é”™è¯¯å¯è§æ€§ï¼šè·¨æºè„šæœ¬åœ¨æ—  CORS æ—¶é”™è¯¯å †æ ˆå—é™ã€‚</li>
</ul>
<h4 data-id="heading-37">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>CDN èµ„æºç»Ÿä¸€æ¨¡æ¿åŒ–ï¼šæ‰€æœ‰å¤–é“¾è„šæœ¬/æ ·å¼è‡ªåŠ¨é™„åŠ  <code>integrity</code> ä¸ <code>crossorigin</code>ï¼Œå¹¶æä¾›ç­–ç•¥ä½å¯é…ç½® <code>referrerpolicy</code>ã€‚</p>
<hr/>
<h3 data-id="heading-38">7. å¯è®¿é—®æ€§ä¸ ARIAï¼šå±æ€§ä¸è§’è‰²çš„ååŒ</h3>
<h4 data-id="heading-39">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>è‡ªå®šä¹‰ç»„ä»¶ï¼ˆå¦‚ä¼ªæŒ‰é’®ã€å¯æŠ˜å åŒºåŸŸï¼‰éœ€è¦é€šè¿‡ <code>role</code> ä¸ <code>aria-*</code> æå‡è¯­ä¹‰ä¸å¯æ“ä½œæ€§ã€‚</p>
<h4 data-id="heading-40">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li>ä»…é  <code>div</code> + ç‚¹å‡»äº‹ä»¶å……å½“æŒ‰é’®ï¼Œé”®ç›˜ç”¨æˆ·æ— æ³•æ“ä½œï¼›</li>
<li>è¯¯ç”¨ <code>aria-*</code> ä¸åŸç”Ÿå±æ€§å†²çªï¼ˆå¦‚å¯¹ <code>&lt;button&gt;</code> é‡å¤å£°æ˜ <code>role="button"</code>ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ï¼šæ— é”®ç›˜å¯è®¿é—®æ€§ä¸è¯­ä¹‰ç¼ºå¤± --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"like"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"doLike()"</span>&gt;</span>ç‚¹èµ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-41">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… ä½¿ç”¨ role ä¸ aria-* æ”¹å–„è¯­ä¹‰ä¸äº¤äº’ï¼›åŒæ—¶å¤„ç†é”®ç›˜äº‹ä»¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"like"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"ç‚¹èµ"</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"0"</span>&gt;</span>ç‚¹èµ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * ä¸ºä¼ªæŒ‰é’®æ·»åŠ é”®ç›˜å¯è®¿é—®æ€§
 * <span class="hljs-doctag">@description</span> å¤„ç† Enter/Space é”®ä»¥è§¦å‘ç‚¹å‡»è¡Œä¸º
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">el</span> - ä¼ªæŒ‰é’®å…ƒç´ 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">() =&gt; void</span>} <span class="hljs-variable">onActive</span> - æ¿€æ´»æ—¶çš„å›è°ƒ
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">enhancePseudoButton</span> = (<span class="hljs-params">el, onActive</span>) =&gt; {
  el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> k = e.<span class="hljs-property">key</span>;
    <span class="hljs-keyword">if</span> (k === <span class="hljs-string">'Enter'</span> || k === <span class="hljs-string">' '</span>) {
      e.<span class="hljs-title function_">preventDefault</span>();
      <span class="hljs-title function_">onActive</span>();
    }
  });
};
</code></pre>
<h4 data-id="heading-42">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li>åŸç”Ÿæ§ä»¶ä¼˜å…ˆï¼ˆ<code>&lt;button&gt;</code>ã€<code>&lt;a&gt;</code> ç­‰ï¼‰ï¼›è‹¥å¿…é¡»è‡ªå®šä¹‰ï¼Œå†ä½¿ç”¨ <code>role</code> ä¸ <code>aria-*</code>ï¼›</li>
<li>å§‹ç»ˆä¸ºå¯äº¤äº’å…ƒç´ æä¾›é”®ç›˜ç­‰æ•ˆæ“ä½œï¼›</li>
<li>é¿å…ä¸åŸç”Ÿå±æ€§å†²çªçš„å†—ä½™ <code>role</code> å£°æ˜ã€‚</li>
</ul>
<h4 data-id="heading-43">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>åœ¨å¡ç‰‡ç»„ä»¶çš„å¯æŠ˜å åŒºåŸŸä½¿ç”¨ <code>aria-expanded</code> ä¸é”®ç›˜äº‹ä»¶ï¼Œä¿è¯è¯»å±ä¸é”®ç›˜ç”¨æˆ·ä½“éªŒä¸€è‡´ã€‚</p>
<hr/>
<h2 data-id="heading-44">ğŸ“Š æŠ€å·§å¯¹æ¯”æ€»ç»“</h2>





















































<table><thead><tr><th>æŠ€å·§</th><th>ä½¿ç”¨åœºæ™¯</th><th>ä¼˜åŠ¿</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>å…¨å±€å±æ€§é€ŸæŸ¥</td><td>å…ƒç´ è¯­ä¹‰ä¸è¡Œä¸º</td><td>ç»Ÿä¸€ç®¡ç† <code>lang/dir</code> ä¸ç¼–è¾‘æ€§</td><td>æ…ç”¨ <code>contenteditable</code> ä¸ <code>hidden</code></td></tr><tr><td>å¸ƒå°”å±æ€§è¡Œä¸º</td><td>äº¤äº’ç¦ç”¨/ç„¦ç‚¹</td><td>property æ§åˆ¶ç›´è§‚å…¼å®¹</td><td>é¿å… <code>autofocus</code> å½±å“å¯è®¿é—®æ€§</td></tr><tr><td>æšä¸¾å±æ€§</td><td>èµ„æºåŠ è½½ä¸ç­–ç•¥</td><td>æ˜ç¡®åˆæ³•å–å€¼ä¸é»˜è®¤å€¼</td><td><code>crossorigin</code> ä»…ä¸¤ç§å–å€¼</td></tr><tr><td>data-* ä¸ dataset</td><td>æºå¸¦å…ƒæ•°æ®</td><td>ç»“æ„åŒ–ä¸å®‰å…¨</td><td>å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œå¤æ‚ç”¨ JSON</td></tr><tr><td>è¡¨å•å±æ€§</td><td>æ–‡ä»¶ä¸è‡ªåŠ¨å¡«å……</td><td>å¯ç”¨æ€§ä¸å®‰å…¨</td><td>è°¨æ… <code>capture</code>ï¼Œç²¾ç¡® <code>accept</code></td></tr><tr><td>è·¨æºä¸å®‰å…¨</td><td>å¤–é“¾èµ„æº</td><td>SRI + CORS ååŒ</td><td>é”™è¯¯å¯è§æ€§å—è·¨æºå½±å“</td></tr><tr><td>ARIA å¯è®¿é—®æ€§</td><td>è‡ªå®šä¹‰ç»„ä»¶</td><td>è¯­ä¹‰ä¸é”®ç›˜å¯ç”¨æ€§</td><td>é¿å…ä¸åŸç”Ÿå±æ€§å†²çª</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-45">ğŸ¯ å®æˆ˜åº”ç”¨å»ºè®®</h2>
<h3 data-id="heading-46">æœ€ä½³å®è·µ</h3>
<ol>
<li>å…¨å±€å¯ç”¨æ–‡æ¡£ <code>lang</code> ä¸åˆç†çš„ <code>dir</code> é…ç½®ï¼Œå›½é™…åŒ–åœºæ™¯æ›´ç¨³ã€‚</li>
<li>ç»Ÿä¸€å°è£…å¸ƒå°”å±æ€§æ§åˆ¶ï¼Œå…¨éƒ¨èµ° propertyï¼ˆ<code>el.disabled = true</code>ï¼‰ã€‚</li>
<li>å›¾ç‰‡ä½¿ç”¨ <code>loading="lazy"</code> + <code>decoding="async"</code>ï¼Œå‡å°‘é¦–å±é˜»å¡ä¸æŠ–åŠ¨ã€‚</li>
<li>ä¸šåŠ¡å…ƒæ•°æ®ç»Ÿä¸€ä½¿ç”¨ <code>data-*</code>ï¼Œé¿å…ä¸æ ·å¼è€¦åˆã€‚</li>
<li>è¡¨å•çš„ <code>accept/capture/autocomplete</code> æŒ‰æšä¸¾è§„èŒƒé…ç½®ï¼Œå…¼é¡¾ä½“éªŒä¸å®‰å…¨ã€‚</li>
<li>å¤–é“¾èµ„æºæ¨¡æ¿åŒ– SRI + CORSï¼Œå¿…è¦æ—¶åŠ  <code>referrerpolicy</code>ï¼Œä¿éšœå®‰å…¨ä¸éšç§ã€‚</li>
</ol>
<h3 data-id="heading-47">æ€§èƒ½è€ƒè™‘</h3>
<ul>
<li>å›¾ç‰‡ä¸åª’ä½“ä¼˜å…ˆä½¿ç”¨æ‡’åŠ è½½ä¸å¼‚æ­¥è§£ç ï¼›</li>
<li>å‡å°‘ä¸å¿…è¦çš„å¯ç¼–è¾‘åŒºåŸŸä¸èšç„¦è·³è½¬ï¼›</li>
<li>å¤–é“¾èµ„æºå¼€å¯æ ¡éªŒä¸è·¨æºé…ç½®ï¼Œé™ä½å¤±è´¥æˆæœ¬å¹¶æå‡é”™è¯¯å¯è§æ€§ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-48">ğŸ’¡ æ€»ç»“</h2>
<p>è¿™ 7 ä¸ªå±æ€§ä¸»é¢˜è¦†ç›–äº†æ—¥å¸¸å¼€å‘ä¸­æœ€å¸¸è§ä¸”æœ€æ˜“æ··æ·†çš„è¡Œä¸ºã€‚æŒæ¡å®ƒä»¬èƒ½è®©ä½ çš„é¡µé¢ï¼š</p>
<ol>
<li>æ›´è¯­ä¹‰åŒ–ã€å¯è®¿é—®ï¼›</li>
<li>æ›´å¯æ§ã€å°‘è¸©å‘ï¼›</li>
<li>æ›´å®‰å…¨ã€å¯è§‚æµ‹ï¼›</li>
<li>æ›´ç¨³å®šã€é«˜æ€§èƒ½ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-49">ğŸ”— ç›¸å…³èµ„æº</h2>
<ul>
<li>MDN: HTML attribute reference â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FHTML%2FAttributes" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
<li>MDN: Global attributes â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FHTML%2FGlobal_attributes" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
<li>MDN: ARIA roles, states and properties â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAccessibility%2FARIA" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
<li>MDN: Subresource Integrity (SRI) â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FSecurity%2FSubresource_Integrity" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
</ul>
<hr/>
<blockquote>
<p>ğŸ’¡ ä»Šæ—¥æ”¶è·ï¼šç†è§£äº†å¸ƒå°”ä¸æšä¸¾å±æ€§çš„å·®å¼‚ã€data-* çš„å®‰å…¨ç”¨æ³•ä¸è·¨æºå®‰å…¨é…ç½®çš„å…³é”®ç‚¹ï¼Œèƒ½å¤Ÿåœ¨é¡¹ç›®ä¸­è½åœ°æ›´ç¨³å¦¥çš„å±æ€§ç­–ç•¥ã€‚</p>
</blockquote>
<p><strong>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—å’Œåˆ†äº«ï¼æœ‰ä»»ä½•é—®é¢˜ä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</strong> ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript DOMæ“ä½œä¸äº‹ä»¶å¤„ç†ï¼šä»å°å…”é²œå„¿ç”µå•†ç½‘ç«™çœ‹ç°ä»£å‰ç«¯å¼€å‘å®è·µ]]></title>    <link>https://juejin.cn/post/7571348736152961060</link>    <guid>https://juejin.cn/post/7571348736152961060</guid>    <pubDate>2025-11-11T15:51:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571348736152961060" data-draft-id="7571306072423104554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript DOMæ“ä½œä¸äº‹ä»¶å¤„ç†ï¼šä»å°å…”é²œå„¿ç”µå•†ç½‘ç«™çœ‹ç°ä»£å‰ç«¯å¼€å‘å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-11T15:51:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿›å‡»çš„é‡äºº"/> <meta itemprop="url" content="https://juejin.cn/user/1458425238667008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript DOMæ“ä½œä¸äº‹ä»¶å¤„ç†ï¼šä»å°å…”é²œå„¿ç”µå•†ç½‘ç«™çœ‹ç°ä»£å‰ç«¯å¼€å‘å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1458425238667008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿›å‡»çš„é‡äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T15:51:56.000Z" title="Tue Nov 11 2025 15:51:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å½“ä»Šçš„Webå¼€å‘é¢†åŸŸï¼ŒJavaScriptçš„DOMæ“ä½œå’Œäº‹ä»¶å¤„ç†èƒ½åŠ›æ˜¯æ„å»ºäº¤äº’å¼ç”¨æˆ·ä½“éªŒçš„æ ¸å¿ƒæŠ€æœ¯ã€‚æœ¬æ–‡å°†é€šè¿‡åˆ†æä¸€ä¸ªå®Œæ•´çš„ç”µå•†ç½‘ç«™æ¡ˆä¾‹â€”â€”"å°å…”é²œå„¿"ï¼Œæ·±å…¥æ¢è®¨JavaScriptåœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯äº‹ä»¶æµã€äº‹ä»¶å§”æ‰˜ã€æ»šåŠ¨äº¤äº’ç­‰å…³é”®æ¦‚å¿µã€‚</p>
<h2 data-id="heading-0">äº‹ä»¶æµï¼šç†è§£äº‹ä»¶ä¼ æ’­æœºåˆ¶</h2>
<p>äº‹ä»¶æµæè¿°äº†äº‹ä»¶åœ¨DOMç»“æ„ä¸­ä¼ æ’­çš„é¡ºåºï¼Œåˆ†ä¸ºæ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µã€‚åœ¨å°å…”é²œå„¿ç½‘ç«™ä¸­ï¼Œæˆ‘ä»¬éšå¤„å¯è§äº‹ä»¶æµçš„åº”ç”¨ã€‚</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// äº‹ä»¶æ•è·ç¤ºä¾‹</span>
element.<span class="hljs-built_in">addEventListener</span>(<span class="hljs-string">'click'</span>, handler, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// äº‹ä»¶å†’æ³¡ç¤ºä¾‹ï¼ˆé»˜è®¤ï¼‰</span>
element.<span class="hljs-built_in">addEventListener</span>(<span class="hljs-string">'click'</span>, handler, <span class="hljs-literal">false</span>);
</code></pre>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨äº‹ä»¶å†’æ³¡ï¼Œå› ä¸ºå®ƒæ›´ç¬¦åˆç›´è§‰ã€‚ä½†å½“éœ€è¦æå‰æ‹¦æˆªäº‹ä»¶æ—¶ï¼Œäº‹ä»¶æ•è·å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>mouseenter</code>å’Œ<code>mouseleave</code>äº‹ä»¶æ²¡æœ‰å†’æ³¡é˜¶æ®µï¼Œè¿™æ˜¯å®ƒä»¬ä¸<code>mouseover</code>å’Œ<code>mouseout</code>çš„é‡è¦åŒºåˆ«ã€‚åœ¨å°å…”é²œå„¿çš„ä¸»å¯¼èˆªæ‚¬åœæ•ˆæœä¸­ï¼Œæ­£æ˜¯åˆ©ç”¨äº†è¿™äº›äº‹ä»¶çš„ç‰¹æ€§æ¥å®ç°å¹³æ»‘çš„äº¤äº’æ•ˆæœã€‚</p>
<h2 data-id="heading-1">äº‹ä»¶è§£ç»‘ä¸æ€§èƒ½ä¼˜åŒ–</h2>
<p>éšç€Webåº”ç”¨è¶Šæ¥è¶Šå¤æ‚ï¼Œåˆç†ç®¡ç†äº‹ä»¶ç›‘å¬å™¨å˜å¾—è‡³å…³é‡è¦ã€‚å°å…”é²œå„¿ç½‘ç«™å±•ç¤ºäº†æ­£ç¡®çš„äº‹ä»¶è§£ç»‘å®è·µï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‰é’®è¢«ç‚¹å‡»'</span>);
}

<span class="hljs-comment">// ç»‘å®šäº‹ä»¶</span>
element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleClick);

<span class="hljs-comment">// è§£ç»‘äº‹ä»¶</span>
element.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handleClick);
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŒ¿åå‡½æ•°æ— æ³•è¢«è§£ç»‘ï¼Œè¿™å¼ºè°ƒäº†åœ¨é‡è¦äº¤äº’ä¸­ä½¿ç”¨å‘½åå‡½æ•°çš„é‡è¦æ€§ã€‚åœ¨å•é¡µåº”ç”¨(SPA)ä¸­ï¼Œå¿½è§†äº‹ä»¶è§£ç»‘å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå½±å“åº”ç”¨æ€§èƒ½ã€‚</p>
<h2 data-id="heading-2">äº‹ä»¶å§”æ‰˜ï¼šé«˜æ•ˆå¤„ç†åŠ¨æ€å†…å®¹</h2>
<p>äº‹ä»¶å§”æ‰˜æ˜¯å°å…”é²œå„¿ç½‘ç«™ä¸­å¹¿æ³›åº”ç”¨çš„é«˜çº§æŠ€å·§ï¼Œå®ƒåˆ©ç”¨äº†äº‹ä»¶å†’æ³¡çš„ç‰¹æ€§ï¼š</p>
<p>html</p>
<p>å¤åˆ¶ä¸‹è½½è¿è¡Œ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç¬¬1ä¸ªå­©å­<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç¬¬2ä¸ªå­©å­<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç¬¬3ä¸ªå­©å­<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> ul = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'ul'</span>);
  ul.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-keyword">if</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">tagName</span> === <span class="hljs-string">'LI'</span>) {
      e.<span class="hljs-property">target</span>.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'red'</span>;
    }
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>è¿™ç§æ¨¡å¼çš„ä¼˜ç‚¹éå¸¸æ˜æ˜¾ï¼š</p>
<ul>
<li>å‡å°‘å†…å­˜ä½¿ç”¨ï¼Œåªéœ€è¦ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨</li>
<li>åŠ¨æ€æ·»åŠ çš„å…ƒç´ è‡ªåŠ¨æ‹¥æœ‰äº‹ä»¶å¤„ç†èƒ½åŠ›</li>
<li>ä»£ç æ›´åŠ ç®€æ´æ˜“ç»´æŠ¤</li>
</ul>
<p>åœ¨å°å…”é²œå„¿çš„tabæ åˆ‡æ¢ç»„ä»¶ä¸­ï¼Œäº‹ä»¶å§”æ‰˜å‘æŒ¥äº†é‡è¦ä½œç”¨ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> ul = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.tab-nav ul'</span>);
ul.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-keyword">if</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">tagName</span> === <span class="hljs-string">'A'</span>) {
    <span class="hljs-comment">// ç§»é™¤ä¹‹å‰æ´»è·ƒçš„æ ‡ç­¾</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.tab-nav .active'</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>);
    <span class="hljs-comment">// è®¾ç½®å½“å‰æ ‡ç­¾ä¸ºæ´»è·ƒçŠ¶æ€</span>
    e.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>);
    
    <span class="hljs-keyword">const</span> i = +e.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">id</span>; <span class="hljs-comment">// å­—ç¬¦ä¸²è½¬ä¸ºæ•°å­—</span>
    <span class="hljs-comment">// åˆ‡æ¢å¯¹åº”å†…å®¹</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.tab-content .active'</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">`.tab-content .item:nth-child(<span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span>)`</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>);
  }
});
</code></pre>
<h2 data-id="heading-3">é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼šæŒæ§æµè§ˆå™¨åŸç”Ÿäº¤äº’</h2>
<p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦é˜»æ­¢æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºä»¥æä¾›è‡ªå®šä¹‰äº¤äº’ã€‚å°å…”é²œå„¿ç½‘ç«™ä¸­çš„è¡¨å•å¤„ç†å°±ä½“ç°äº†è¿™ä¸€æŠ€æœ¯ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> form = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'form'</span>);
form.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'submit'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  e.<span class="hljs-title function_">preventDefault</span>();
  <span class="hljs-comment">// è‡ªå®šä¹‰æäº¤é€»è¾‘</span>
});
</code></pre>
<p>è¿™ä¸€æŠ€æœ¯è¿˜å¹¿æ³›åº”ç”¨äºé˜»æ­¢é“¾æ¥è·³è½¬ã€å³é”®èœå•ç­‰åœºæ™¯ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ›´ç²¾ç»†çš„äº¤äº’æ§åˆ¶èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-4">æ»šåŠ¨äº¤äº’ï¼šæå‡ç”¨æˆ·ä½“éªŒçš„å…³é”®</h2>
<p>æ»šåŠ¨ç›¸å…³çš„äº¤äº’åœ¨ç°ä»£ç½‘ç«™ä¸­æ— å¤„ä¸åœ¨ï¼Œå°å…”é²œå„¿ç½‘ç«™é€šè¿‡å¤šç§æ»šåŠ¨æŠ€æœ¯åˆ›é€ äº†æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-5">æ»šåŠ¨äº‹ä»¶åŸºç¡€</h3>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> n = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">scrollTop</span>;
  <span class="hljs-comment">// æ ¹æ®æ»šåŠ¨ä½ç½®æ‰§è¡Œç›¸åº”æ“ä½œ</span>
});
</code></pre>
<p><code>scrollTop</code>å±æ€§æ˜¯å¯è¯»å†™çš„ï¼Œè¿™å…è®¸æˆ‘ä»¬ä¸ä»…ç›‘å¬æ»šåŠ¨ï¼Œè¿˜èƒ½ä»¥ç¼–ç¨‹æ–¹å¼æ§åˆ¶æ»šåŠ¨ä½ç½®ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">scrollTop</span> = <span class="hljs-number">800</span>;

<span class="hljs-comment">// å¹³æ»‘æ»šåŠ¨åˆ°é¡¶éƒ¨</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({
  <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span>
});
</code></pre>
<h3 data-id="heading-6">å“åº”å¼å¸ƒå±€ä¸å°ºå¯¸ç›‘æ§</h3>
<p>å°å…”é²œå„¿ç½‘ç«™é€šè¿‡ç›‘å¬çª—å£å°ºå¯¸å˜åŒ–ï¼Œç¡®ä¿åœ¨ä¸åŒè®¾å¤‡ä¸Šéƒ½èƒ½æä¾›è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è°ƒæ•´å¸ƒå±€æˆ–é‡æ–°è®¡ç®—å…ƒç´ ä½ç½®</span>
});
</code></pre>
<h3 data-id="heading-7">å…ƒç´ å°ºå¯¸ä¸ä½ç½®è·å–</h3>
<p>å‡†ç¡®è·å–å…ƒç´ å°ºå¯¸å’Œä½ç½®æ˜¯å®ç°ç²¾ç»†äº¤äº’çš„åŸºç¡€ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'div'</span>);

<span class="hljs-comment">// è·å–ä¸åŒ…å«è¾¹æ¡†çš„å®½é«˜</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(div.<span class="hljs-property">clientWidth</span>, div.<span class="hljs-property">clientHeight</span>);

<span class="hljs-comment">// è·å–åŒ…å«è¾¹æ¡†çš„å®½é«˜</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(div.<span class="hljs-property">offsetWidth</span>, div.<span class="hljs-property">offsetHeight</span>);

<span class="hljs-comment">// è·å–ç›¸å¯¹äºå®šä½çˆ¶å…ƒç´ çš„ä½ç½®</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(div.<span class="hljs-property">offsetTop</span>, div.<span class="hljs-property">offsetLeft</span>);

<span class="hljs-comment">// è·å–å…ƒç´ ç›¸å¯¹äºè§†å£çš„ä½ç½®å’Œå°ºå¯¸</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(div.<span class="hljs-title function_">getBoundingClientRect</span>());
</code></pre>
<h2 data-id="heading-8">å®æˆ˜æ¡ˆä¾‹ï¼šå°å…”é²œå„¿ç”µæ¢¯å¯¼èˆª</h2>
<p>å°å…”é²œå„¿ç½‘ç«™çš„ç”µæ¢¯å¯¼èˆªæ˜¯ä¸€ä¸ªç»¼åˆåº”ç”¨ä¸Šè¿°æŠ€æœ¯çš„å…¸å‹æ¡ˆä¾‹ï¼Œå®ƒåŒ…å«äº†ä¸‰ä¸ªä¸»è¦åŠŸèƒ½ï¼š</p>
<h3 data-id="heading-9">1. æ»šåŠ¨æ˜¾ç¤º/éšè—</h3>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-ini" lang="ini">(function() {
  const <span class="hljs-attr">entry</span> = document.querySelector(<span class="hljs-string">'.xtx_entry'</span>)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">elevator</span> = document.querySelector(<span class="hljs-string">'.xtx-elevator'</span>)<span class="hljs-comment">;</span>
  
  window.addEventListener('scroll', function() {
    const <span class="hljs-attr">n</span> = document.documentElement.scrollTop<span class="hljs-comment">;</span>
    <span class="hljs-attr">elevator.style.opacity</span> = n &gt;= entry.<span class="hljs-literal">off</span>setTop ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span><span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>

  // è¿”å›é¡¶éƒ¨åŠŸèƒ½
  const <span class="hljs-attr">backTop</span> = document.querySelector(<span class="hljs-string">'#backTop'</span>)<span class="hljs-comment">;</span>
  backTop.addEventListener('click', function() {
    window.scrollTo(0, 0)<span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>
})()<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-10">2. ç‚¹å‡»å¯¼èˆªå¹³æ»‘æ»šåŠ¨</h3>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">list</span> = document.querySelector(<span class="hljs-string">'.xtx-elevator-list'</span>)<span class="hljs-comment">;</span>
list.addEventListener('click', function(e) {
  if (<span class="hljs-attr">e.target.tagName</span> === <span class="hljs-string">'A'</span> &amp;&amp; e.target.dataset.name) {
    // æ’ä»–æ€æƒ³æ›´æ–°æ´»è·ƒçŠ¶æ€
    const <span class="hljs-attr">old</span> = document.querySelector(<span class="hljs-string">'.xtx-elevator-list .active'</span>)<span class="hljs-comment">;</span>
    if (old) old.classList.remove('active')<span class="hljs-comment">;</span>
    e.target.classList.add('active')<span class="hljs-comment">;</span>
    
    // æ»šåŠ¨åˆ°å¯¹åº”åŒºåŸŸ
    const <span class="hljs-attr">top</span> = document.querySelector(`.xtx_goods_<span class="hljs-variable">${e.target.dataset.name}</span>`).<span class="hljs-literal">off</span>setTop<span class="hljs-comment">;</span>
    <span class="hljs-attr">document.documentElement.scrollTop</span> = top<span class="hljs-comment">;</span>
  }
})<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-11">3. æ»šåŠ¨æ—¶é«˜äº®å¯¹åº”å¯¼èˆªé¡¹</h3>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'scroll'</span>, function() {
  <span class="hljs-comment">// ç§»é™¤ä¹‹å‰çš„æ´»è·ƒçŠ¶æ€</span>
  <span class="hljs-keyword">const</span> old = <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">'.xtx-elevator-list .active'</span>);
  <span class="hljs-keyword">if</span> (old) old.classList.remove(<span class="hljs-string">'active'</span>);
  
  <span class="hljs-comment">// æ ¹æ®æ»šåŠ¨ä½ç½®è®¾ç½®æ–°çš„æ´»è·ƒçŠ¶æ€</span>
  <span class="hljs-keyword">const</span> n = <span class="hljs-built_in">document</span>.documentElement.scrollTop;
  <span class="hljs-keyword">const</span> news = <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">'.xtx_goods_new'</span>);
  <span class="hljs-keyword">const</span> popular = <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">'.xtx_goods_popular'</span>);
  <span class="hljs-keyword">const</span> brand = <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">'.xtx_goods_brand'</span>);
  <span class="hljs-keyword">const</span> topic = <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">'.xtx_goods_topic'</span>);
  
  <span class="hljs-keyword">if</span> (n &gt;= news.offsetTop &amp;&amp; n &lt; popular.offsetTop) {
    <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">'[data-name=new]'</span>).classList.add(<span class="hljs-string">'active'</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n &gt;= popular.offsetTop &amp;&amp; n &lt; brand.offsetTop) {
    <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">'[data-name=popular]'</span>).classList.add(<span class="hljs-string">'active'</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n &gt;= brand.offsetTop &amp;&amp; n &lt; topic.offsetTop) {
    <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">'[data-name=brand]'</span>).classList.add(<span class="hljs-string">'active'</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n &gt;= topic.offsetTop) {
    <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">'[data-name=topic]'</span>).classList.add(<span class="hljs-string">'active'</span>);
  }
});
</code></pre>
<h2 data-id="heading-12">æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</h2>
<p>åœ¨å°å…”é²œå„¿è¿™æ ·çš„ç”µå•†ç½‘ç«™ä¸­ï¼Œæ€§èƒ½ä¼˜åŒ–å°¤ä¸ºé‡è¦ï¼š</p>
<ol>
<li><strong>èŠ‚æµæ»šåŠ¨äº‹ä»¶</strong>ï¼šé«˜é¢‘è§¦å‘çš„scrolläº‹ä»¶åº”è¯¥è¿›è¡ŒèŠ‚æµå¤„ç†</li>
<li><strong>é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€</strong>ï¼šè¿ç»­è¯»å–å’Œä¿®æ”¹DOMå±æ€§ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜</li>
<li><strong>ä½¿ç”¨CSSåŠ¨ç”»</strong>ï¼šå°½å¯èƒ½ä½¿ç”¨CSSè€ŒéJavaScriptå®ç°åŠ¨ç”»æ•ˆæœ</li>
<li><strong>äº‹ä»¶å§”æ‰˜</strong>ï¼šå¦‚å‰æ‰€è¿°ï¼Œå‡å°‘äº‹ä»¶ç›‘å¬å™¨æ•°é‡</li>
</ol>
<h2 data-id="heading-13">æ€»ç»“</h2>
<p>é€šè¿‡åˆ†æå°å…”é²œå„¿ç”µå•†ç½‘ç«™ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç°ä»£JavaScript DOMæ“ä½œå’Œäº‹ä»¶å¤„ç†æŠ€æœ¯çš„å…¨é¢åº”ç”¨ã€‚ä»åŸºç¡€çš„äº‹ä»¶æµç†è§£åˆ°é«˜çº§çš„äº‹ä»¶å§”æ‰˜æ¨¡å¼ï¼Œä»ç®€å•çš„ç‚¹å‡»å¤„ç†åˆ°å¤æ‚çš„æ»šåŠ¨äº¤äº’ï¼Œè¿™äº›æŠ€æœ¯å…±åŒæ„å»ºäº†æµç•…ã€å“åº”å¼çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå¹³è¡¡åŠŸèƒ½å®ç°ä¸æ€§èƒ½ä¼˜åŒ–ï¼Œå§‹ç»ˆä»¥ç”¨æˆ·ä½“éªŒä¸ºä¸­å¿ƒï¼Œè¿™æ‰æ˜¯å‰ç«¯å¼€å‘çš„çœŸæ­£è‰ºæœ¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[5.2 Spring AI OpenAI åµŒå…¥æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7571281406509793331</link>    <guid>https://juejin.cn/post/7571281406509793331</guid>    <pubDate>2025-11-11T09:38:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571281406509793331" data-draft-id="7571281406509776947" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="5.2 Spring AI OpenAI åµŒå…¥æ¨¡å‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-11T09:38:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´ç¥–è´¤"/> <meta itemprop="url" content="https://juejin.cn/user/1961184475492103"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            5.2 Spring AI OpenAI åµŒå…¥æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1961184475492103/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´ç¥–è´¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T09:38:50.000Z" title="Tue Nov 11 2025 09:38:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Spring AI OpenAI åµŒå…¥æ¨¡å‹</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>Spring AI æ”¯æŒ OpenAI çš„æ–‡æœ¬åµŒå…¥æ¨¡å‹ã€‚</p>
<p>OpenAI çš„æ–‡æœ¬åµŒå…¥ç”¨äºè¡¡é‡æ–‡æœ¬å­—ç¬¦ä¸²çš„ç›¸å…³æ€§ã€‚åµŒå…¥æ˜¯ä¸€ä¸ªå‘é‡ï¼ˆæµ®ç‚¹æ•°åˆ—è¡¨ï¼‰ã€‚ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„è·ç¦»è¡¡é‡å®ƒä»¬çš„ç›¸å…³æ€§ã€‚å°è·ç¦»è¡¨ç¤ºé«˜ç›¸å…³æ€§ï¼Œå¤§è·ç¦»è¡¨ç¤ºä½ç›¸å…³æ€§ã€‚</p>
<h3 data-id="heading-2">å‰ææ¡ä»¶</h3>
<p>æ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ª OpenAI API æ¥è®¿é—® OpenAI åµŒå…¥æ¨¡å‹ã€‚</p>
<p>åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fsignup" target="_blank" title="https://platform.openai.com/signup" ref="nofollow noopener noreferrer">OpenAI æ³¨å†Œé¡µé¢</a> åˆ›å»ºè´¦æˆ·ï¼Œå¹¶åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Faccount%2Fapi-keys" target="_blank" title="https://platform.openai.com/account/api-keys" ref="nofollow noopener noreferrer">API Keys é¡µé¢</a> ç”Ÿæˆä»¤ç‰Œã€‚</p>
<p>Spring AI é¡¹ç›®å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>spring.ai.openai.api-key</code> çš„é…ç½®å±æ€§ï¼Œæ‚¨åº”è¯¥å°†å…¶è®¾ç½®ä¸ºä» openai.com è·å–çš„ <code>API Key</code> çš„å€¼ã€‚</p>
<p>æ‚¨å¯ä»¥åœ¨ <code>application.properties</code> æ–‡ä»¶ä¸­è®¾ç½®æ­¤é…ç½®å±æ€§ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.ai.openai.api-key=&lt;your-openai-api-key&gt;
</code></pre>
<p>ä¸ºäº†åœ¨å¤„ç† API å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯æ—¶å¢å¼ºå®‰å…¨æ€§ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Spring Expression Language (SpEL) æ¥å¼•ç”¨ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># In application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">ai:</span>
    <span class="hljs-attr">openai:</span>
      <span class="hljs-attr">api-key:</span> <span class="hljs-string">${OPENAI_API_KEY}</span>
</code></pre>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># In your environment or .env file</span>
<span class="hljs-built_in">export</span> OPENAI_API_KEY=&lt;your-openai-api-key&gt;
</code></pre>
<p>æ‚¨ä¹Ÿå¯ä»¥åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­ä»¥ç¼–ç¨‹æ–¹å¼è®¾ç½®æ­¤é…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Retrieve API key from a secure source or environment variable</span>
<span class="hljs-type">String</span> <span class="hljs-variable">apiKey</span> <span class="hljs-operator">=</span> System.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>);
</code></pre>
<h4 data-id="heading-3">æ·»åŠ ä»“åº“å’Œ BOM</h4>
<p>Spring AI æ„ä»¶å‘å¸ƒåœ¨ Maven Central å’Œ Spring Snapshot ä»“åº“ä¸­ã€‚å‚è€ƒ<a href="https://link.juejin.cn?target=..%2F..%2Fgetting-started.html%23artifact-repositories" target="_blank" title="../../getting-started.html#artifact-repositories" ref="nofollow noopener noreferrer">æ„ä»¶ä»“åº“</a>éƒ¨åˆ†ï¼Œå°†è¿™äº›ä»“åº“æ·»åŠ åˆ°æ‚¨çš„æ„å»ºç³»ç»Ÿä¸­ã€‚</p>
<p>ä¸ºäº†å¸®åŠ©ä¾èµ–ç®¡ç†ï¼ŒSpring AI æä¾›äº† BOMï¼ˆç‰©æ–™æ¸…å•ï¼‰æ¥ç¡®ä¿æ•´ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ä¸€è‡´çš„ Spring AI ç‰ˆæœ¬ã€‚å‚è€ƒ<a href="https://link.juejin.cn?target=..%2F..%2Fgetting-started.html%23dependency-management" target="_blank" title="../../getting-started.html#dependency-management" ref="nofollow noopener noreferrer">ä¾èµ–ç®¡ç†</a>éƒ¨åˆ†ï¼Œå°† Spring AI BOM æ·»åŠ åˆ°æ‚¨çš„æ„å»ºç³»ç»Ÿä¸­ã€‚</p>
<h3 data-id="heading-4">è‡ªåŠ¨é…ç½®</h3>
<blockquote>
<p><strong>æ³¨æ„</strong>
Spring AI è‡ªåŠ¨é…ç½®ã€å¯åŠ¨å™¨æ¨¡å—çš„æ„ä»¶åç§°å‘ç”Ÿäº†é‡å¤§å˜åŒ–ã€‚è¯·å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-ai%2Freference%2Fupgrade-notes.html" target="_blank" title="https://docs.spring.io/spring-ai/reference/upgrade-notes.html" ref="nofollow noopener noreferrer">å‡çº§è¯´æ˜</a>äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p>
</blockquote>
<p>Spring AI ä¸º OpenAI åµŒå…¥æ¨¡å‹æä¾›äº† Spring Boot è‡ªåŠ¨é…ç½®ã€‚è¦å¯ç”¨å®ƒï¼Œè¯·å°†ä»¥ä¸‹ä¾èµ–é¡¹æ·»åŠ åˆ°æ‚¨é¡¹ç›®çš„ Maven <code>pom.xml</code> æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-model-openai<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>æˆ–æ·»åŠ åˆ°æ‚¨çš„ Gradle <code>build.gradle</code> æ„å»ºæ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">dependencies {
    implementation 'org.springframework.ai:spring-ai-starter-model-openai'
}
</code></pre>
<blockquote>
<p><strong>æç¤º</strong>
å‚è€ƒ<a href="https://link.juejin.cn?target=..%2F..%2Fgetting-started.html%23dependency-management" target="_blank" title="../../getting-started.html#dependency-management" ref="nofollow noopener noreferrer">ä¾èµ–ç®¡ç†</a>éƒ¨åˆ†ï¼Œå°† Spring AI BOM æ·»åŠ åˆ°æ‚¨çš„æ„å»ºæ–‡ä»¶ä¸­ã€‚</p>
</blockquote>
<h4 data-id="heading-5">åµŒå…¥å±æ€§</h4>
<h5 data-id="heading-6">é‡è¯•å±æ€§</h5>
<p>å‰ç¼€ <code>spring.ai.retry</code> ç”¨ä½œå±æ€§å‰ç¼€ï¼Œè®©æ‚¨å¯ä»¥ä¸º OpenAI åµŒå…¥æ¨¡å‹é…ç½®é‡è¯•æœºåˆ¶ã€‚</p>













































<table><thead><tr><th>å±æ€§</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>spring.ai.retry.max-attempts</td><td>æœ€å¤§é‡è¯•å°è¯•æ¬¡æ•°ã€‚</td><td>10</td></tr><tr><td>spring.ai.retry.backoff.initial-interval</td><td>æŒ‡æ•°é€€é¿ç­–ç•¥çš„åˆå§‹ç¡çœ æŒç»­æ—¶é—´ã€‚</td><td>2 sec.</td></tr><tr><td>spring.ai.retry.backoff.multiplier</td><td>é€€é¿é—´éš”å€æ•°ã€‚</td><td>5</td></tr><tr><td>spring.ai.retry.backoff.max-interval</td><td>æœ€å¤§é€€é¿æŒç»­æ—¶é—´ã€‚</td><td>3 min.</td></tr><tr><td>spring.ai.retry.on-client-errors</td><td>å¦‚æœä¸º falseï¼ŒæŠ›å‡º NonTransientAiExceptionï¼Œä¸å°è¯•å¯¹ <code>4xx</code> å®¢æˆ·ç«¯é”™è¯¯ä»£ç è¿›è¡Œé‡è¯•</td><td>false</td></tr><tr><td>spring.ai.retry.exclude-on-http-codes</td><td>ä¸åº”è§¦å‘é‡è¯•çš„ HTTP çŠ¶æ€ä»£ç åˆ—è¡¨ï¼ˆä¾‹å¦‚ï¼ŒæŠ›å‡º NonTransientAiExceptionï¼‰ã€‚</td><td>empty</td></tr><tr><td>spring.ai.retry.on-http-codes</td><td>åº”è¯¥è§¦å‘é‡è¯•çš„ HTTP çŠ¶æ€ä»£ç åˆ—è¡¨ï¼ˆä¾‹å¦‚ï¼ŒæŠ›å‡º TransientAiExceptionï¼‰ã€‚</td><td>empty</td></tr></tbody></table>
<h5 data-id="heading-7">è¿æ¥å±æ€§</h5>
<p>å‰ç¼€ <code>spring.ai.openai</code> ç”¨ä½œè¿æ¥åˆ° OpenAI çš„å±æ€§å‰ç¼€ã€‚</p>






























<table><thead><tr><th>å±æ€§</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>spring.ai.openai.base-url</td><td>è¦è¿æ¥çš„ URL</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.openai.com" target="_blank" title="https://api.openai.com" ref="nofollow noopener noreferrer">api.openai.com</a></td></tr><tr><td>spring.ai.openai.api-key</td><td>API å¯†é’¥</td><td>-</td></tr><tr><td>spring.ai.openai.organization-id</td><td>å¯é€‰æ‹©åœ°ï¼Œæ‚¨å¯ä»¥æŒ‡å®šç”¨äº API è¯·æ±‚çš„ç»„ç»‡ã€‚</td><td>-</td></tr><tr><td>spring.ai.openai.project-id</td><td>å¯é€‰æ‹©åœ°ï¼Œæ‚¨å¯ä»¥æŒ‡å®šç”¨äº API è¯·æ±‚çš„é¡¹ç›®ã€‚</td><td>-</td></tr></tbody></table>
<blockquote>
<p><strong>æç¤º</strong>
å¯¹äºå±äºå¤šä¸ªç»„ç»‡çš„ç”¨æˆ·ï¼ˆæˆ–é€šè¿‡å…¶æ—§ç‰ˆç”¨æˆ· API å¯†é’¥è®¿é—®å…¶é¡¹ç›®ï¼‰ï¼Œå¯é€‰æ‹©åœ°ï¼Œæ‚¨å¯ä»¥æŒ‡å®šç”¨äº API è¯·æ±‚çš„ç»„ç»‡å’Œé¡¹ç›®ã€‚è¿™äº› API è¯·æ±‚çš„ä½¿ç”¨å°†è®¡ä¸ºæŒ‡å®šç»„ç»‡å’Œé¡¹ç›®çš„ä½¿ç”¨é‡ã€‚</p>
</blockquote>
<h5 data-id="heading-8">é…ç½®å±æ€§</h5>
<blockquote>
<p><strong>æ³¨æ„</strong>
åµŒå…¥è‡ªåŠ¨é…ç½®çš„å¯ç”¨å’Œç¦ç”¨ç°åœ¨é€šè¿‡å‰ç¼€ä¸º <code>spring.ai.model.embedding</code> çš„é¡¶çº§å±æ€§é…ç½®ã€‚</p>
<p>è¦å¯ç”¨ï¼Œè®¾ç½® spring.ai.model.embedding=openaiï¼ˆé»˜è®¤å¯ç”¨ï¼‰</p>
<p>è¦ç¦ç”¨ï¼Œè®¾ç½® spring.ai.model.embedding=noneï¼ˆæˆ–ä»»ä½•ä¸åŒ¹é… openai çš„å€¼ï¼‰</p>
<p>è¿›è¡Œæ­¤æ›´æ”¹æ˜¯ä¸ºäº†å…è®¸é…ç½®å¤šä¸ªæ¨¡å‹ã€‚</p>
</blockquote>
<p>å‰ç¼€ <code>spring.ai.openai.embedding</code> æ˜¯é…ç½® OpenAI çš„ <code>EmbeddingModel</code> å®ç°çš„å±æ€§å‰ç¼€ã€‚</p>






































































<table><thead><tr><th>å±æ€§</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>spring.ai.openai.embedding.enabled (å¿…éœ€ä¸”ä¸å†æœ‰æ•ˆ)</td><td>å¯ç”¨ OpenAI åµŒå…¥æ¨¡å‹ã€‚</td><td>true</td></tr><tr><td>spring.ai.model.embedding</td><td>å¯ç”¨ OpenAI åµŒå…¥æ¨¡å‹ã€‚</td><td>openai</td></tr><tr><td>spring.ai.openai.embedding.base-url</td><td>å¯é€‰æ‹©åœ°è¦†ç›– spring.ai.openai.base-url ä»¥æä¾›ç‰¹å®šçš„åµŒå…¥ URL</td><td>-</td></tr><tr><td>spring.ai.openai.embedding.embeddings-path</td><td>è¦é™„åŠ åˆ° base-url çš„è·¯å¾„</td><td><code>/v1/embeddings</code></td></tr><tr><td>spring.ai.openai.embedding.api-key</td><td>å¯é€‰æ‹©åœ°è¦†ç›– spring.ai.openai.api-key ä»¥æä¾›ç‰¹å®šçš„åµŒå…¥ API å¯†é’¥</td><td>-</td></tr><tr><td>spring.ai.openai.embedding.organization-id</td><td>å¯é€‰æ‹©åœ°ï¼Œæ‚¨å¯ä»¥æŒ‡å®šç”¨äº API è¯·æ±‚çš„ç»„ç»‡ã€‚</td><td>-</td></tr><tr><td>spring.ai.openai.embedding.project-id</td><td>å¯é€‰æ‹©åœ°ï¼Œæ‚¨å¯ä»¥æŒ‡å®šç”¨äº API è¯·æ±‚çš„é¡¹ç›®ã€‚</td><td>-</td></tr><tr><td>spring.ai.openai.embedding.metadata-mode</td><td>æ–‡æ¡£å†…å®¹æå–æ¨¡å¼ã€‚</td><td>EMBED</td></tr><tr><td>spring.ai.openai.embedding.options.model</td><td>è¦ä½¿ç”¨çš„æ¨¡å‹</td><td>text-embedding-ada-002ï¼ˆå…¶ä»–é€‰é¡¹ï¼štext-embedding-3-large, text-embedding-3-smallï¼‰</td></tr><tr><td>spring.ai.openai.embedding.options.encodingFormat</td><td>è¿”å›åµŒå…¥çš„æ ¼å¼ã€‚å¯ä»¥æ˜¯ float æˆ– base64ã€‚</td><td>-</td></tr><tr><td>spring.ai.openai.embedding.options.user</td><td>ä»£è¡¨æ‚¨çš„æœ€ç»ˆç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¯ä»¥å¸®åŠ© OpenAI ç›‘æ§å’Œæ£€æµ‹æ»¥ç”¨ã€‚</td><td>-</td></tr><tr><td>spring.ai.openai.embedding.options.dimensions</td><td>ç”Ÿæˆçš„è¾“å‡ºåµŒå…¥åº”è¯¥å…·æœ‰çš„ç»´åº¦æ•°ã€‚ä»…åœ¨ <code>text-embedding-3</code> åŠæ›´é«˜ç‰ˆæœ¬æ¨¡å‹ä¸­æ”¯æŒã€‚</td><td>-</td></tr></tbody></table>
<blockquote>
<p><strong>æ³¨æ„</strong>
æ‚¨å¯ä»¥ä¸º <code>ChatModel</code> å’Œ <code>EmbeddingModel</code> å®ç°è¦†ç›–é€šç”¨çš„ <code>spring.ai.openai.base-url</code> å’Œ <code>spring.ai.openai.api-key</code>ã€‚å¦‚æœè®¾ç½®äº† <code>spring.ai.openai.embedding.base-url</code> å’Œ <code>spring.ai.openai.embedding.api-key</code> å±æ€§ï¼Œå®ƒä»¬å°†ä¼˜å…ˆäºé€šç”¨å±æ€§ã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœè®¾ç½®äº† <code>spring.ai.openai.chat.base-url</code> å’Œ <code>spring.ai.openai.chat.api-key</code> å±æ€§ï¼Œå®ƒä»¬å°†ä¼˜å…ˆäºé€šç”¨å±æ€§ã€‚å¦‚æœæ‚¨æƒ³ä¸ºä¸åŒçš„æ¨¡å‹å’Œä¸åŒçš„æ¨¡å‹ç«¯ç‚¹ä½¿ç”¨ä¸åŒçš„ OpenAI è´¦æˆ·ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚</p>
</blockquote>
<blockquote>
<p><strong>æç¤º</strong>
æ‰€æœ‰ä»¥ <code>spring.ai.openai.embedding.options</code> ä¸ºå‰ç¼€çš„å±æ€§éƒ½å¯ä»¥é€šè¿‡åœ¨ <code>EmbeddingRequest</code> è°ƒç”¨ä¸­æ·»åŠ è¯·æ±‚ç‰¹å®šçš„<a href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E9%80%89%E9%A1%B9" title="#%E8%BF%90%E8%A1%8C%E6%97%B6%E9%80%89%E9%A1%B9">è¿è¡Œæ—¶é€‰é¡¹</a>æ¥åœ¨è¿è¡Œæ—¶è¦†ç›–ã€‚</p>
</blockquote>
<h3 data-id="heading-9">è¿è¡Œæ—¶é€‰é¡¹</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-projects%2Fspring-ai%2Fblob%2Fmain%2Fmodels%2Fspring-ai-openai%2Fsrc%2Fmain%2Fjava%2Forg%2Fspringframework%2Fai%2Fopenai%2FOpenAiEmbeddingOptions.java" target="_blank" title="https://github.com/spring-projects/spring-ai/blob/main/models/spring-ai-openai/src/main/java/org/springframework/ai/openai/OpenAiEmbeddingOptions.java" ref="nofollow noopener noreferrer">OpenAiEmbeddingOptions.java</a> æä¾› OpenAI é…ç½®ï¼Œå¦‚è¦ä½¿ç”¨çš„æ¨¡å‹ç­‰ã€‚</p>
<p>é»˜è®¤é€‰é¡¹ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>spring.ai.openai.embedding.options</code> å±æ€§è¿›è¡Œé…ç½®ã€‚</p>
<p>åœ¨å¯åŠ¨æ—¶ï¼Œä½¿ç”¨ <code>OpenAiEmbeddingModel</code> æ„é€ å‡½æ•°è®¾ç½®æ‰€æœ‰åµŒå…¥è¯·æ±‚ä½¿ç”¨çš„é»˜è®¤é€‰é¡¹ã€‚åœ¨è¿è¡Œæ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>OpenAiEmbeddingOptions</code> å®ä¾‹ä½œä¸º <code>EmbeddingRequest</code> çš„ä¸€éƒ¨åˆ†æ¥è¦†ç›–é»˜è®¤é€‰é¡¹ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè¦†ç›–ç‰¹å®šè¯·æ±‚çš„é»˜è®¤æ¨¡å‹åç§°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">EmbeddingResponse</span> <span class="hljs-variable">embeddingResponse</span> <span class="hljs-operator">=</span> embeddingModel.call(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">EmbeddingRequest</span>(List.of(<span class="hljs-string">"Hello World"</span>, <span class="hljs-string">"World is big and salvation is near"</span>),
        OpenAiEmbeddingOptions.builder()
            .model(<span class="hljs-string">"Different-Embedding-Model-Deployment-Name"</span>)
        .build()));
</code></pre>
<h3 data-id="heading-10">ç¤ºä¾‹æ§åˆ¶å™¨</h3>
<p>è¿™å°†åˆ›å»ºä¸€ä¸ªå¯ä»¥æ³¨å…¥åˆ°ç±»ä¸­çš„ <code>EmbeddingModel</code> å®ç°ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>EmbeddingModel</code> å®ç°çš„ç®€å• <code>@Controller</code> ç±»ç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-properties" lang="properties">spring.ai.openai.api-key=YOUR_API_KEY
spring.ai.openai.embedding.options.model=text-embedding-ada-002
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmbeddingController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EmbeddingModel embeddingModel;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">EmbeddingController</span><span class="hljs-params">(EmbeddingModel embeddingModel)</span> {
        <span class="hljs-built_in">this</span>.embeddingModel = embeddingModel;
    }

    <span class="hljs-meta">@GetMapping("/ai/embedding")</span>
    <span class="hljs-keyword">public</span> Map <span class="hljs-title function_">embed</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(value = "message", defaultValue = "Tell me a joke")</span> String message)</span> {
        <span class="hljs-type">EmbeddingResponse</span> <span class="hljs-variable">embeddingResponse</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.embeddingModel.embedForResponse(List.of(message));
        <span class="hljs-keyword">return</span> Map.of(<span class="hljs-string">"embedding"</span>, embeddingResponse);
    }
}
</code></pre>
<h3 data-id="heading-11">æ‰‹åŠ¨é…ç½®</h3>
<p>å¦‚æœæ‚¨ä¸ä½¿ç”¨ Spring Bootï¼Œå¯ä»¥æ‰‹åŠ¨é…ç½® OpenAI åµŒå…¥æ¨¡å‹ã€‚ä¸ºæ­¤ï¼Œå°† <code>spring-ai-openai</code> ä¾èµ–é¡¹æ·»åŠ åˆ°æ‚¨é¡¹ç›®çš„ Maven <code>pom.xml</code> æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-openai<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>æˆ–æ·»åŠ åˆ°æ‚¨çš„ Gradle <code>build.gradle</code> æ„å»ºæ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">dependencies {
    implementation 'org.springframework.ai:spring-ai-openai'
}
</code></pre>
<blockquote>
<p><strong>æç¤º</strong>
å‚è€ƒ<a href="https://link.juejin.cn?target=..%2F..%2Fgetting-started.html%23dependency-management" target="_blank" title="../../getting-started.html#dependency-management" ref="nofollow noopener noreferrer">ä¾èµ–ç®¡ç†</a>éƒ¨åˆ†ï¼Œå°† Spring AI BOM æ·»åŠ åˆ°æ‚¨çš„æ„å»ºæ–‡ä»¶ä¸­ã€‚</p>
</blockquote>
<blockquote>
<p><strong>æ³¨æ„</strong>
<code>spring-ai-openai</code> ä¾èµ–é¡¹ä¹Ÿæä¾›å¯¹ <code>OpenAiChatModel</code> çš„è®¿é—®ã€‚æœ‰å…³ <code>OpenAiChatModel</code> çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ <a href="https://link.juejin.cn?target=..%2Fchat%2Fopenai-chat.html" target="_blank" title="../chat/openai-chat.html" ref="nofollow noopener noreferrer">OpenAI èŠå¤©å®¢æˆ·ç«¯</a> éƒ¨åˆ†ã€‚</p>
</blockquote>
<p>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ª <code>OpenAiEmbeddingModel</code> å®ä¾‹ï¼Œå¹¶ä½¿ç”¨å®ƒè®¡ç®—ä¸¤ä¸ªè¾“å…¥æ–‡æœ¬ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">var</span> <span class="hljs-variable">openAiApi</span> <span class="hljs-operator">=</span> OpenAiApi.builder()
                .apiKey(System.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>))
                .build();

<span class="hljs-type">var</span> <span class="hljs-variable">embeddingModel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAiEmbeddingModel</span>(
		<span class="hljs-built_in">this</span>.openAiApi,
        MetadataMode.EMBED,
        OpenAiEmbeddingOptions.builder()
                .model(<span class="hljs-string">"text-embedding-ada-002"</span>)
                .user(<span class="hljs-string">"user-6"</span>)
                .build(),
        RetryUtils.DEFAULT_RETRY_TEMPLATE);

<span class="hljs-type">EmbeddingResponse</span> <span class="hljs-variable">embeddingResponse</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.embeddingModel
        .embedForResponse(List.of(<span class="hljs-string">"Hello World"</span>, <span class="hljs-string">"World is big and salvation is near"</span>));
</code></pre>
<p><code>OpenAiEmbeddingOptions</code> æä¾›åµŒå…¥è¯·æ±‚çš„é…ç½®ä¿¡æ¯ã€‚api å’Œé€‰é¡¹ç±»æä¾› <code>builder()</code> ä»¥ä¾¿äºé€‰é¡¹åˆ›å»ºã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®©Â ETLÂ æ›´æ‡‚è¯­ä¹‰ï¼šDataWorksÂ æ”¯æŒæ•°æ®é›†æˆÂ AIÂ è¾…åŠ©å¤„ç†èƒ½åŠ›]]></title>    <link>https://juejin.cn/post/7569566666528325672</link>    <guid>https://juejin.cn/post/7569566666528325672</guid>    <pubDate>2025-11-07T06:01:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7569566666528325672" data-draft-id="7569480265568845824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®©Â ETLÂ æ›´æ‡‚è¯­ä¹‰ï¼šDataWorksÂ æ”¯æŒæ•°æ®é›†æˆÂ AIÂ è¾…åŠ©å¤„ç†èƒ½åŠ›"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-07T06:01:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®©Â ETLÂ æ›´æ‡‚è¯­ä¹‰ï¼šDataWorksÂ æ”¯æŒæ•°æ®é›†æˆÂ AIÂ è¾…åŠ©å¤„ç†èƒ½åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-07T06:01:14.000Z" title="Fri Nov 07 2025 06:01:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç”Ÿæˆå¼Â AIÂ æµªæ½®ä¸‹ï¼Œæ•°æ®ä¸å†åªæ˜¯â€œè¢«æ¬è¿çš„åŸæ–™â€ï¼Œæ›´åº”æ˜¯â€œå¯ç†è§£ã€å¯æ¨ç†ã€å¯æŒ–æ˜ä»·å€¼â€çš„æ™ºèƒ½èµ„äº§ã€‚ç„¶è€Œï¼Œä¼ ç»ŸÂ ETLï¼ˆExtract-Transform-Loadï¼‰æµç¨‹ä»åœç•™åœ¨ç»“æ„åŒ–æ•°æ®å¤„ç†å±‚é¢ï¼Œé¢å¯¹æµ·é‡æ–‡æœ¬ã€æ—¥å¿—ã€åé¦ˆç­‰éç»“æ„åŒ–æ•°æ®æ—¶ï¼Œå¾€å¾€ä¾èµ–äººå·¥æ ‡æ³¨æˆ–å¤æ‚å¼€å‘é“¾è·¯ï¼Œæ•ˆç‡ä½ã€æˆæœ¬é«˜ã€å“åº”æ…¢ã€‚</p>
<p>ä¸ºæ­¤ï¼Œé˜¿é‡Œäº‘å¤§æ•°æ®å¼€å‘æ²»ç†å¹³å°Â DataWorksÂ æ•°æ®é›†æˆå…¨æ–°æ™ºèƒ½åŒ–å‡çº§ï¼Œä»¥â€œÂ AIÂ é‡Šæ”¾æ•°æ®ä»·å€¼â€ä¸ºæ ¸å¿ƒï¼Œæ­£å¼æ¨å‡ºÂ AIÂ è¾…åŠ©å¤„ç†èƒ½åŠ›ï¼Œå¹¶å°†è¯¥åŠŸèƒ½åœ¨é˜¿é‡Œäº‘å…¨çƒæ‰€æœ‰åœ°åŸŸå…¨é¢å¼€æ”¾ï¼å°†å¤§æ¨¡å‹è¯­ä¹‰ç†è§£ã€AIÂ æ™ºèƒ½åˆ†æèƒ½åŠ›æ·±åº¦èå…¥ç¦»çº¿åŒæ­¥ä»»åŠ¡çš„æ•°æ®é›†æˆä»»åŠ¡ï¼ŒçœŸæ­£å®ç°â€œè®©æ¯ä¸€æ¡æ•°æ®æµéƒ½èƒ½æ€è€ƒâ€ã€‚</p>
<h2 data-id="heading-0">æ ¸å¿ƒèƒ½åŠ›-å¼€ç®±å³ç”¨çš„æ™ºèƒ½Â ETLÂ å¼•æ“</h2>
<p>DataWorksÂ ServerlessÂ èµ„æºç»„å…¨æ–°å‡çº§ï¼Œæ”¯æŒå¤§æ¨¡å‹ä¸€é”®éƒ¨ç½²ä¸é«˜æ•ˆè°ƒç”¨ï¼ç°å·²æ”¯æŒÂ Qwen3Â ç³»åˆ—ã€DeepSeekÂ ç³»åˆ—åŠÂ EmbeddingÂ æ¨¡å‹ï¼Œæä¾›å¤šç§Â GPUÂ è§„æ ¼æŒ‰éœ€é€‰ç”¨ï¼ŒæŒ‰é‡ä»˜è´¹ï¼Œçµæ´»æˆæœ¬ã€‚é€šè¿‡Â AIÂ FunctionÂ å¯ä¾¿æ·è°ƒç”¨æ¨¡å‹æœåŠ¡ï¼Œå°å°ºå¯¸æ¨¡å‹æ¨ç†æ€§èƒ½æå‡è¿‘Â 10Â å€ï¼Œå¹¶æ”¯æŒä½¿ç”¨Â DataWorksÂ ServerlessÂ CUÂ èµ„æºæŠµæ‰£ï¼ŒåŠ©åŠ›Â AIÂ åº”ç”¨å¿«é€Ÿæ„å»ºä¸å¼¹æ€§æ‰©å±•ã€‚</p>
<p>DataWorksÂ æ•°æ®é›†æˆç°å·²æ”¯æŒåœ¨ç¦»çº¿åŒæ­¥ä»»åŠ¡ä¸­ç›´æ¥è°ƒç”¨å¤§æ¨¡å‹æœåŠ¡ï¼Œç”¨æˆ·æ— éœ€éƒ¨ç½²æ¨¡å‹ã€æ— éœ€ç¼–å†™ä»£ç ã€æ— éœ€é¢å¤–ä»˜è´¹ï¼Œåªéœ€é€šè¿‡è‡ªç„¶è¯­è¨€æç¤ºï¼ˆPromptï¼‰ï¼Œå³å¯å®Œæˆå¤æ‚çš„æ•°æ®æ¸…æ´—ã€å¢å¼ºä¸è¯­ä¹‰ç»“æ„åŒ–æ“ä½œã€‚</p>





























<table><thead><tr><th><strong>åŠŸèƒ½</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>AIÂ è¾…åŠ©å¤„ç†</td><td>æ”¯æŒæƒ…æ„Ÿåˆ†æã€æ–‡æœ¬åˆ†ç±»ã€æ‘˜è¦ç”Ÿæˆã€å…³é”®è¯æå–ã€ç¿»è¯‘ç­‰å¸¸è§Â NLPÂ ä»»åŠ¡</td></tr><tr><td>å‘é‡åŒ–ï¼ˆEmbeddingï¼‰å¤„ç†</td><td>è‡ªåŠ¨å°†æ–‡æœ¬å­—æ®µè½¬åŒ–ä¸ºé«˜ç»´å‘é‡ï¼Œç”¨äºè¯­ä¹‰æœç´¢ã€RAGã€æ¨èç³»ç»Ÿç­‰Â AIÂ åº”ç”¨</td></tr><tr><td>å¤šå¹³å°æ¨¡å‹æ”¯æŒ</td><td>*   é€šè¿‡é˜¿é‡Œäº‘Â DataWorksÂ éƒ¨ç½²æ¨¡å‹æœåŠ¡<br/>    <br/>*   é€šè¿‡é˜¿é‡Œäº‘Â PAIÂ æ¨¡å‹å¸‚åœºå¼€é€šæ¨¡å‹æœåŠ¡<br/>    <br/>*   é€šè¿‡é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°å¼€é€šå¤§æ¨¡å‹æœåŠ¡</td></tr><tr><td>é›¶ä»£ç é…ç½®</td><td>å…¨å›¾å½¢åŒ–ç•Œé¢æ“ä½œï¼Œä¸šåŠ¡äººå‘˜ä¹Ÿèƒ½è½»æ¾å®šä¹‰Â AIÂ å¤„ç†é€»è¾‘</td></tr><tr><td>ç»“æœç›´å†™ç›®æ ‡è¡¨</td><td>æ‰€æœ‰Â AIÂ å¤„ç†ç»“æœå¯ç›´æ¥æ˜ å°„è‡³ç›®æ ‡æ•°æ®åº“å­—æ®µï¼Œæ— ç¼å¯¹æ¥ä¸‹æ¸¸åº”ç”¨</td></tr></tbody></table>
<p>æ•´ä¸ªè¿‡ç¨‹å®Œå…¨æ‰˜ç®¡ï¼Œä¸”Â AIÂ å¤„ç†åŠŸèƒ½æœ¬èº«ä¸é¢å¤–æ”¶è´¹Â â€”â€”Â æ‚¨åªéœ€ä¸ºåŒæ­¥ä»»åŠ¡æ¶ˆè€—çš„è®¡ç®—èµ„æºä»˜è´¹ï¼Œä¸å…¶ä»–æ™®é€šç¦»çº¿åŒæ­¥ä»»åŠ¡è®¡è´¹æ–¹å¼å®Œå…¨ä¸€è‡´ã€‚</p>
<h2 data-id="heading-1">é€‚ç”¨åœºæ™¯-å¤šè¡Œä¸šå¤šåœºæ™¯èµ‹èƒ½ä¼ä¸šÂ AIÂ è½åœ°</h2>
<p>æ™ºèƒ½æ•°æ®å¤„ç†åœ¨æ•°æ®åŒæ­¥Â ETLÂ æµç¨‹ä¸­å¯å¹¿æ³›åº”ç”¨äºå¤šä¸ªä¼ä¸šåœºæ™¯ï¼Œé€šè¿‡æƒ…æ„Ÿåˆ†æã€æ‘˜è¦ç”Ÿæˆã€å…³é”®è¯æå–ã€ç¿»è¯‘å’Œå‘é‡åŒ–ç­‰èƒ½åŠ›æå‡æ•°æ®å¤„ç†æ•ˆç‡ä¸æ´å¯Ÿæ·±åº¦ã€‚è¿™äº›åº”ç”¨å¯ä»¥æ˜¾è‘—æå‡äº†ä¼ä¸šçš„å†³ç­–æ”¯æŒèƒ½åŠ›å’Œè¿è¥æ™ºèƒ½åŒ–æ°´å¹³ã€‚</p>
<h3 data-id="heading-2">1ã€ç”µå•†å®¢æœåœºæ™¯ï¼šç”¨æˆ·åé¦ˆåˆ†æä¸æƒ…æ„Ÿåˆ†ç±»</h3>
<p>ç¤ºä¾‹ï¼Œå®¢æˆ·ç•™è¨€ï¼šâ€œå¿«é€’å¤ªæ…¢äº†ï¼Œç­‰äº†åŠä¸ªæœˆè¿˜æ²¡åˆ°ï¼â€</p>

























<table><thead><tr><th>æ•°æ®å¤„ç†åœºæ™¯</th><th>æç¤ºè¯­</th><th>å¤„ç†ç»“æœç¤ºä¾‹</th></tr></thead><tbody><tr><td>æƒ…æ„Ÿåˆ†æ</td><td>å¯¹ç”¨æˆ·æŠ•è¯‰/å’¨è¯¢æ–‡æœ¬è¿›è¡Œæƒ…æ„Ÿåˆ†ç±»ï¼ˆæ­£é¢/è´Ÿé¢/ä¸­æ€§ï¼‰</td><td>è´Ÿé¢</td></tr><tr><td>æ‘˜è¦ç”Ÿæˆ</td><td>å°†é•¿æ–‡æœ¬çš„ç”¨æˆ·åé¦ˆå‹ç¼©ä¸ºç®€çŸ­æ‘˜è¦ï¼Œæå–æ ¸å¿ƒé—®é¢˜</td><td>ç”¨æˆ·æŠ•è¯‰ç‰©æµæ—¶æ•ˆé—®é¢˜</td></tr><tr><td>å…³é”®è¯æå–</td><td>è¯†åˆ«é«˜é¢‘é—®é¢˜å…³é”®è¯ï¼ˆå¦‚â€œç‰©æµå»¶è¿Ÿâ€â€œäº§å“è´¨é‡â€ï¼‰</td><td>ç‰©æµå»¶è¿Ÿã€å¿«é€’ã€æ—¶æ•ˆ</td></tr></tbody></table>
<p>ğŸ‘‰Â è‡ªåŠ¨å½’ç±»åƒä¸‡çº§è¯„è®ºï¼Œæ”¯æ’‘è¿è¥å†³ç­–ä¸æœåŠ¡è´¨é‡ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-3">2.ã€æ™ºèƒ½æ±½è½¦åœºæ™¯ï¼šè®¾å¤‡æ—¥å¿—åˆ†æä¸é¢„æµ‹æ€§ç»´æŠ¤</h3>
<p>ç¤ºä¾‹ï¼Œæ—¥å¿—å†…å®¹ï¼šâ€œTheÂ breakÂ pumpÂ pressureï¼šabnormal;Â sensorÂ exceedingÂ :Â 15%â€</p>

























<table><thead><tr><th>æ•°æ®å¤„ç†åœºæ™¯</th><th>æç¤ºè¯­</th><th>å¤„ç†ç»“æœç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ–‡æœ¬æ€»ç»“</td><td>å°†è®¾å¤‡è¿è¡Œæ—¥å¿—ä¸­çš„æ•…éšœæè¿°å‹ç¼©ä¸ºå…³é”®ä¿¡æ¯</td><td>åˆ¹è½¦æ³µæµ¦å‹åŠ›è¶…é™ï¼Œéœ€ç«‹å³æ£€æŸ¥</td></tr><tr><td>ä¸¥é‡æ€§åˆ¤æ–­</td><td>åˆ¤æ–­æ—¥å¿—ä¸­æè¿°çš„æ•…éšœä¸¥é‡æ€§ï¼ˆå¦‚â€œç´§æ€¥â€â€œè­¦å‘Šâ€ï¼‰</td><td>é«˜å±</td></tr><tr><td>ç¿»è¯‘</td><td>ç»Ÿä¸€ç¿»è¯‘ä¸ºä¸­æ–‡</td><td>åˆ¹è½¦æ³µæµ¦å‹åŠ›å¼‚å¸¸ï¼Œä¼ æ„Ÿå™¨æ˜¾ç¤ºå€¼é«˜äºé˜ˆå€¼15%</td></tr></tbody></table>
<p>ğŸ‘‰Â å°†éç»“æ„åŒ–æ—¥å¿—è½¬ä¸ºç»“æ„åŒ–å‘Šè­¦ä¿¡æ¯ï¼ŒåŠ©åŠ›é¢„æµ‹æ€§ç»´æŠ¤ç³»ç»Ÿå¿«é€Ÿå“åº”ã€‚</p>
<h3 data-id="heading-4">3ã€ä¾›åº”é“¾åœºæ™¯ï¼šä¾›åº”å•†åé¦ˆåˆ†æä¸é£é™©é¢„è­¦</h3>
<p>ç¤ºä¾‹ï¼Œä¾›åº”å•†é‚®ä»¶ï¼šâ€œWeÂ areÂ unableÂ toÂ fulfillÂ theÂ orderÂ dueÂ toÂ aÂ shortageÂ ofÂ rawÂ materials.â€</p>

























<table><thead><tr><th>æ•°æ®å¤„ç†åœºæ™¯</th><th>æç¤ºè¯­</th><th>å¤„ç†ç»“æœç¤ºä¾‹</th></tr></thead><tbody><tr><td>æƒ…æ„Ÿåˆ†æ</td><td>è¯„ä¼°ä¾›åº”å•†åˆä½œæ€åº¦ï¼ˆç§¯æ/æ¶ˆæï¼‰</td><td>æ¶ˆæ</td></tr><tr><td>æ‘˜è¦ç”Ÿæˆ</td><td>æå–ä¾›åº”å•†åé¦ˆçš„æ ¸å¿ƒé—®é¢˜ï¼ˆå¦‚â€œäº¤ä»˜å»¶è¿Ÿâ€ï¼‰</td><td>ä¾›åº”å•†å› åŸææ–™çŸ­ç¼ºæ— æ³•å®Œæˆè®¢å•</td></tr><tr><td>ç¿»è¯‘</td><td>å°†éä¸­æ–‡ä¾›åº”å•†é‚®ä»¶ç¿»è¯‘ä¸ºä¸­æ–‡</td><td>ç”±äºåŸææ–™çŸ­ç¼ºï¼Œæˆ‘ä»¬æ— æ³•å®Œæˆè¯¥è®¢å•</td></tr></tbody></table>
<p>ğŸ‘‰Â è‡ªåŠ¨è¯†åˆ«äº¤ä»˜é£é™©ï¼Œæå‰è§¦å‘å¤‡é€‰ä¾›åº”å•†è°ƒåº¦æœºåˆ¶ã€‚</p>
<h3 data-id="heading-5">4ã€æ³•å¾‹åœºæ™¯ï¼šåˆåŒæ¡æ¬¾åˆ†æä¸é£é™©æ ‡æ³¨</h3>
<p>ç¤ºä¾‹ï¼ŒåˆåŒæ¡æ¬¾ï¼šâ€œInÂ theÂ eventÂ ofÂ forceÂ majeure,Â theÂ deliveryÂ deadlineÂ mayÂ beÂ extended.â€</p>

























<table><thead><tr><th>æ•°æ®å¤„ç†åœºæ™¯</th><th>æç¤ºè¯­</th><th>å¤„ç†ç»“æœç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ‘˜è¦ç”Ÿæˆ</td><td>æå–åˆåŒæ ¸å¿ƒæ¡æ¬¾ï¼ˆå¦‚ä»˜æ¬¾æ¡ä»¶ã€è¿çº¦è´£ä»»ï¼‰</td><td>ä¸å¯æŠ—åŠ›æ¡æ¬¾å…è®¸å»¶æœŸäº¤è´§</td></tr><tr><td>å…³é”®è¯æå–</td><td>è¯†åˆ«å…³é”®æ³•å¾‹æœ¯è¯­ï¼ˆå¦‚â€œä¸å¯æŠ—åŠ›â€â€œä»²è£æ¡æ¬¾â€ï¼‰</td><td>ä¸å¯æŠ—åŠ›ã€äº¤è´§æœŸé™</td></tr><tr><td>ç¿»è¯‘</td><td>å°†å¤–æ–‡åˆåŒç¿»è¯‘ä¸ºä¸­æ–‡</td><td>è‹¥å‘ç”Ÿä¸å¯æŠ—åŠ›ï¼Œäº¤è´§æœŸé™å¯å»¶é•¿</td></tr></tbody></table>
<p>ğŸ‘‰Â æå‡æ³•åŠ¡å®¡æŸ¥æ•ˆç‡ï¼Œé™ä½åˆåŒå±¥çº¦é£é™©ã€‚</p>
<h2 data-id="heading-6">æ¡ˆä¾‹è¯´æ˜</h2>
<p>æ¥ä¸‹æ¥ä»‹ç»å¦‚ä½•ä½¿ç”¨AIè¾…åŠ©å¤„ç†åŠŸèƒ½ï¼Œå°†æ•°æ®æ¥æºè¡¨ä¸­<code>feedback_info</code>åˆ—çš„æ•°æ®ç¿»è¯‘ä¸ºè‹±æ–‡å¹¶åŒæ­¥è‡³ç›®æ ‡è¡¨ã€‚</p>
<p>æ¥æºè¡¨æ•°æ®å‡†å¤‡</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> customer_feedback (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    device STRING,
    feedback_info STRING,
    pt <span class="hljs-type">INT</span>
)
PARTITIONED <span class="hljs-keyword">BY</span> (pt)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(id)
<span class="hljs-keyword">WITH</span> (table_type<span class="hljs-operator">=</span><span class="hljs-string">'Duplication'</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> customer_feedback (id, device, feedback_info, pt)
<span class="hljs-keyword">VALUES</span>
(<span class="hljs-number">8</span>, <span class="hljs-string">'Huawei MateBook D14'</span>, <span class="hljs-string">'ä»·æ ¼å®æƒ ï¼Œé€‚åˆå­¦ç”Ÿå…šï¼Œæ€§èƒ½å¤Ÿç”¨'</span>, <span class="hljs-number">2020</span>),
(<span class="hljs-number">1</span>, <span class="hljs-string">'iphone'</span>, <span class="hljs-string">'è¿™ä¸ªå•†å“è¿˜è¡Œï¼Œæˆ‘ç”¨äº†1å¹´'</span>, <span class="hljs-number">2013</span>),
(<span class="hljs-number">10</span>, <span class="hljs-string">'Bose QuietComfort 35 II'</span>, <span class="hljs-string">'é™å™ªè€³æœºä¸­çš„ç»å…¸ï¼Œèˆ’é€‚åº¦æ»¡åˆ†'</span>, <span class="hljs-number">2021</span>);
</code></pre>
<h3 data-id="heading-7">ä¸€ã€åˆ›å»ºç¦»çº¿åŒæ­¥ä»»åŠ¡</h3>
<p>è¿›å…¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fdataworks.console.aliyun.com%2Fworkspace%2Flist" target="_blank" title="https://dataworks.console.aliyun.com/workspace/list" ref="nofollow noopener noreferrer">DataWorkså·¥ä½œç©ºé—´åˆ—è¡¨é¡µ</a>ï¼Œåœ¨é¡¶éƒ¨åˆ‡æ¢è‡³ç›®æ ‡åœ°åŸŸï¼Œæ‰¾åˆ°å·²åˆ›å»ºçš„å·¥ä½œç©ºé—´ï¼Œå•å‡»æ“ä½œåˆ—çš„å¿«é€Ÿè¿›å…¥Â &gt;Â DataÂ Studioï¼Œè¿›å…¥DataÂ Studioã€‚</p>
<p>åœ¨å·¦ä¾§å¯¼èˆªæ å•å‡»æŒ‰é’®&lt;/&gt;ï¼Œè¿›å…¥æ•°æ®å¼€å‘é¡µé¢ï¼Œåœ¨é¡¹ç›®ç›®å½•å³ä¾§å•å‡»æŒ‰é’®+ï¼Œé€‰æ‹©æ–°å»ºèŠ‚ç‚¹Â &gt;Â æ•°æ®é›†æˆÂ &gt;Â ç¦»çº¿åŒæ­¥ï¼Œè¿›å…¥æ–°å»ºèŠ‚ç‚¹å¯¹è¯æ¡†ã€‚</p>
<p>è®¾ç½®èŠ‚ç‚¹è·¯å¾„ã€æ•°æ®æ¥æºå»å‘å’ŒèŠ‚ç‚¹åç§°åï¼Œå•å‡»ç¡®è®¤ï¼Œåˆ›å»ºç¦»çº¿åŒæ­¥èŠ‚ç‚¹ã€‚</p>
<p>æœ¬æ–‡ä»¥HologresåŒæ­¥è‡³Hologresä¸ºä¾‹ï¼Œä»‹ç»ç¦»çº¿åŒæ­¥ä»»åŠ¡ä¸­çš„AIè¾…åŠ©å¤„ç†åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-8">äºŒã€é…ç½®åŒæ­¥ä»»åŠ¡</h3>
<p>åˆ›å»ºç¦»çº¿åŒæ­¥èŠ‚ç‚¹åï¼Œä¼šè‡ªåŠ¨è¿›å…¥ä»»åŠ¡ç¼–è¾‘é¡µé¢ï¼Œæ‚¨éœ€è¦åœ¨æ­¤é¡µé¢é…ç½®å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<h4 data-id="heading-9">1ã€æ•°æ®æº</h4>
<p>åˆ†åˆ«é…ç½®æ•°æ®åŒæ­¥ä»»åŠ¡çš„æ•°æ®æ¥æºå’Œæ•°æ®å»å‘ã€‚</p>
<p>ç±»å‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fdataworks%2Fuser-guide%2Foffline-synchronization-task-ai-auxiliary-processing%3Fspm%3Da2c4g.11186623.help-menu-72772.d_2_1_4_0_5_1.8ae72b0fixOwu4%23afff3df480tlb" target="_blank" title="https://help.aliyun.com/zh/dataworks/user-guide/offline-synchronization-task-ai-auxiliary-processing?spm=a2c4g.11186623.help-menu-72772.d_2_1_4_0_5_1.8ae72b0fixOwu4#afff3df480tlb" ref="nofollow noopener noreferrer">åˆ›å»ºç¦»çº¿åŒæ­¥ä»»åŠ¡</a>æ­¥éª¤ä¸­å·²é€‰æ‹©çš„æ•°æ®æ¥æºå’Œå»å‘çš„æ•°æ®æºç±»å‹ï¼Œä¸æ”¯æŒä¿®æ”¹ï¼Œå¦‚éœ€ä¿®æ”¹è¯·é‡æ–°åˆ›å»ºç¦»çº¿åŒæ­¥ä»»åŠ¡ã€‚</p>
<p>é…ç½®æ–¹å¼ï¼š</p>
<p>å¿«é€Ÿé…ç½®ï¼šæ‰‹åŠ¨é…ç½®æ•°æ®æ¥æºä¸æ•°æ®å»å‘çš„è¿æ¥ä¿¡æ¯ï¼Œè¯¦ç»†çš„é…ç½®å‚æ•°è§£é‡Šå¯åœ¨é…ç½®ç•Œé¢æŸ¥çœ‹å¯¹åº”å‚æ•°çš„æ–‡æ¡ˆæç¤ºã€‚</p>
<p>ä½¿ç”¨å·²æœ‰æ•°æ®æºï¼šè¯·åœ¨æ•°æ®æºå‚æ•°åçš„ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©å·²åˆ›å»ºçš„æ•°æ®æºã€‚</p>
<p>è¯´æ˜</p>
<p>æ•°æ®æºä¸­åªå±•ç¤ºå¯¹åº”ç±»å‹çš„æ•°æ®æºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83c1d555c5b045a9816f61193727fdfa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763459453&amp;x-signature=GxpfZs6W6F2Jq5jVP5YpqL6dfQ4%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-10">2ã€è¿è¡Œèµ„æº</h4>
<p>é€‰æ‹©åŒæ­¥ä»»åŠ¡æ‰€ä½¿ç”¨çš„èµ„æºç»„ã€‚å¦‚æœä½¿ç”¨Â ServerlessÂ èµ„æºç»„ï¼Œæ‚¨è¿˜å¯ä»¥ä¸ºè¯¥ä»»åŠ¡åˆ†é…èµ„æºå ç”¨Â CUÂ æ•°ã€‚</p>
<p>é€‰æ‹©èµ„æºç»„åï¼Œæ•°æ®é›†æˆå°†è‡ªåŠ¨æ£€æµ‹èµ„æºç»„ä¸æ•°æ®æ¥æºã€æ•°æ®å»å‘çš„è¿é€šæ€§ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨å•å‡»è¿é€šæ€§æ£€æŸ¥ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3dff26b085294b7d834e03dddf924269~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763459453&amp;x-signature=fBOd%2B0j5IpZnMUOUV7%2BQIf4QgAA%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-11">3ã€æ•°æ®æ¥æº</h4>
<p>é…ç½®æ•°æ®æ¥æºå…·ä½“å¾…åŒæ­¥çš„è¡¨ä¿¡æ¯ï¼Œå¦‚Schemaã€è¡¨ã€åˆ†åŒºå’Œæ•°æ®è¿‡æ»¤æ¡ä»¶ç­‰ã€‚æ‚¨å¯ä»¥å•å‡»æ•°æ®é¢„è§ˆï¼ŒæŸ¥çœ‹å¾…åŒæ­¥çš„å…·ä½“æ•°æ®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76057c7da546479186c0f8257b431f66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763459453&amp;x-signature=0BRLI5L3qHOfleoXjJcdKbgqgGg%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-12">4ã€æ•°æ®å¤„ç†</h4>
<p>åœ¨æ•°æ®å¤„ç†åŒºåŸŸï¼Œæ‚¨å¯ä»¥å¼€å¯æ•°æ®å¤„ç†èƒ½åŠ›ï¼Œæ•°æ®å¤„ç†èƒ½åŠ›éœ€è¦æ›´å¤šçš„è®¡ç®—èµ„æºï¼Œä¼šå¢åŠ ä»»åŠ¡çš„èµ„æºå ç”¨å¼€é”€ã€‚</p>
<p>å•å‡»æ·»åŠ èŠ‚ç‚¹ï¼Œå½“å‰æ”¯æŒå­—ç¬¦ä¸²æ›¿æ¢å’ŒAIè¾…åŠ©å¤„ç†ã€‚æœ¬æ¡ˆä¾‹ä»¥AIè¾…åŠ©å¤„ç†ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bb24eb64bee46f49aaa0c3c2c53e5b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763459453&amp;x-signature=SpNEFvzIumQEjr%2F9LMv2abSw360%3D" alt="image.png" loading="lazy"/></p>
<p>é…ç½®AIè¾…åŠ©å¤„ç†ç›¸å…³ä¿¡æ¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39b7a981881e400db0a6c43945479814~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763459453&amp;x-signature=i%2BweMrvSBBT57GdbuyHT0qawDqk%3D" alt="image.png" loading="lazy"/>
å…³é”®å‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š</p>





























<table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>æ¨¡å‹æä¾›å•†</td><td>æ”¯æŒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fdataworks%2Fuser-guide%2Fllm-service-management%2F" target="_blank" title="https://help.aliyun.com/zh/dataworks/user-guide/llm-service-management/" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘DataWorksæ¨¡å‹æœåŠ¡</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fmodel-studio%2Fwhat-is-model-studio" target="_blank" title="https://help.aliyun.com/zh/model-studio/what-is-model-studio" ref="nofollow noopener noreferrer">é˜¿é‡Œç™¾ç‚¼å¹³å°</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fpai%2Fproduct-overview%2Fwhat-is-machine-learning-platform-for-ai%2F" target="_blank" title="https://help.aliyun.com/zh/pai/product-overview/what-is-machine-learning-platform-for-ai/" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘PAIæ¨¡å‹å¸‚åœº</a>ã€‚</td></tr><tr><td>æ¨¡å‹åç§°</td><td>è´Ÿè´£æ™ºèƒ½æ•°æ®å¤„ç†çš„æ¨¡å‹ï¼ŒæŒ‰éœ€é€‰æ‹©ã€‚</td></tr><tr><td>APIÂ Key</td><td>è®¿é—®æ¨¡å‹çš„APIÂ KEYï¼Œè¯·å‰å¾€æ¨¡å‹æä¾›å•†è·å–ã€‚<br/>é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fmodel-studio%2Fget-api-key" target="_blank" title="https://help.aliyun.com/zh/model-studio/get-api-key" ref="nofollow noopener noreferrer">è·å–ç™¾ç‚¼APIÂ Key</a>ã€‚<br/>é˜¿é‡Œäº‘PAIæ¨¡å‹å¸‚åœºï¼šå‰å¾€éƒ¨ç½²çš„EASä»»åŠ¡ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fpai%2Fuser-guide%2Fcall-a-service-over-a-public-endpoint" target="_blank" title="https://help.aliyun.com/zh/pai/user-guide/call-a-service-over-a-public-endpoint" ref="nofollow noopener noreferrer">è¿›å…¥åœ¨çº¿è°ƒè¯•</a>ï¼Œè·å–Tokenï¼Œå°†å…¶ä½œä¸ºAPIÂ KEYå¡«å†™åˆ°æ­¤å¤„ã€‚</td></tr><tr><td>å¤„ç†å·¥ä½œæè¿°</td><td>è¯·ä½¿ç”¨è‡ªç„¶è¯­è¨€æè¿°å¯¹æ¥æºå­—æ®µçš„å¤„ç†ï¼Œå­—æ®µåä»¥<code>#{column_name}</code>æ ¼å¼ä¹¦å†™ã€‚ä¾‹å¦‚ï¼Œæœ¬æ¡ˆä¾‹ä¸­ï¼Œæ­¤å¤„å¡«å†™<code>è¯·å°†'#{feedback_info}'ç¿»è¯‘æˆè‹±æ–‡</code>ã€‚</td></tr><tr><td>å†™å…¥å­—æ®µ</td><td>æ­¤å¤„è¯·è¾“å…¥å­˜å‚¨ç»“æœå­—æ®µçš„åç§°ï¼Œå¦‚æœå¯¹åº”å­—æ®µä¸å­˜åœ¨ï¼Œå°†è‡ªåŠ¨æ–°å¢ä¸€ä¸ªå­—æ®µã€‚</td></tr></tbody></table>
<p>è¯´æ˜</p>
<p>æœ¬æ¡ˆä¾‹çš„ç¤ºä¾‹é…ç½®ä¸­ï¼Œä¼šå°†æ¥æºè¡¨çš„<code>feedback_info</code>å­—æ®µç¿»è¯‘æˆè‹±æ–‡ï¼Œå¹¶å­˜å‚¨åˆ°<code>feedback_processed</code>å­—æ®µä¸­ã€‚</p>
<p>æ‚¨å¯ä»¥å•å‡»AIè¾…åŠ©å¤„ç†åŒºåŸŸå³ä¸Šè§’çš„æ•°æ®è¾“å‡ºé¢„è§ˆï¼ŒæŸ¥çœ‹è¾“å‡ºçš„æœ€ç»ˆæ•°æ®æ•ˆæœã€‚</p>
<p>ï¼ˆå¯é€‰ï¼‰æ‚¨å¯ä»¥é…ç½®å¤šä¸ªå…ˆåæŒ‰é¡ºåºæ‰§è¡Œçš„æ•°æ®å¤„ç†æµç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf8a2bf3850c44aabb75403228dcff7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763459453&amp;x-signature=PvZoEdDwCUYGoRNCX1jQ6pK%2BMRU%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-13">5ã€æ•°æ®å»å‘</h4>
<p>é…ç½®æ•°æ®åŒæ­¥çš„ç›®æ ‡è¡¨ä¿¡æ¯ï¼Œä¾‹å¦‚Schemaã€è¡¨åã€åˆ†åŒºç­‰ã€‚</p>
<p>æ‚¨å¯ä»¥å•å‡»ä¸€é”®ç”Ÿæˆç›®æ ‡è¡¨ç»“æ„ï¼Œå¿«é€Ÿç”Ÿæˆç›®æ ‡è¡¨ã€‚</p>
<p>å¦‚æœç›®æ ‡ç«¯ä¸­å·²å­˜åœ¨è¡¨ç”¨äºæ¥æ”¶æ•°æ®ï¼Œåˆ™æŒ‰éœ€é€‰æ‹©å³å¯ã€‚</p>
<p>é…ç½®å†™å…¥æ¨¡å¼ä»¥åŠå†™å…¥å†²çªç­–ç•¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a7a992867164bdca8f5a350be256b8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763459453&amp;x-signature=DX9aaHrbB1V8bTtjo8HkoMxGJrA%3D" alt="image.png" loading="lazy"/></p>
<p>é…ç½®åŒæ­¥å‰æ˜¯å¦è¦æ¸…ç©ºHologresè¡¨ä¸­çš„å·²æœ‰æ•°æ®ã€‚</p>
<p>ï¼ˆå¯é€‰ï¼‰é…ç½®æœ€å¤§è¿æ¥æ•°ã€‚</p>
<p>æœ€å¤§è¿æ¥æ•°ä»…åœ¨å†™å…¥æ¨¡å¼ä¸º<code>SQL(INSERTÂ INTO)</code>ä¸‹ç”Ÿæ•ˆï¼Œåœ¨å¼€å¯ä»»åŠ¡æ—¶è¯·ç¡®ä¿Hologreså®ä¾‹æœ‰å……è¶³çš„ç©ºé—²è¿æ¥ã€‚ä¸€ä¸ªä»»åŠ¡æœ€å¤šä½¿ç”¨9ä¸ªè¿æ¥ã€‚</p>
<h4 data-id="heading-14">6ã€å»å‘å­—æ®µæ˜ å°„</h4>
<p>é…ç½®å®Œæˆæ•°æ®æ¥æºã€æ•°æ®å¤„ç†å’Œæ•°æ®å»å‘åï¼Œä¼šåœ¨æ­¤å¤„å±•ç¤ºæ¥æºä¸å»å‘è¡¨é—´çš„å­—æ®µæ˜ å°„å…³ç³»ï¼Œé»˜è®¤ä¸ºåŒåæ˜ å°„å’ŒåŒè¡Œæ˜ å°„ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰éœ€è¿›è¡Œè°ƒæ•´ã€‚</p>
<p>è¯´æ˜</p>
<p>æœ¬æ¡ˆä¾‹ä¸­é™¤äº†å°†æºè¡¨å·²æœ‰å­—æ®µï¼ˆ<code>id</code>ã€<code>device</code>ã€<code>feedback_info</code>ã€<code>pt</code>ï¼‰åŒåæ˜ å°„å¤–ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨å°†æºè¡¨ä¸­å­˜å‚¨ç¿»è¯‘åç»“æœçš„<code>feedback_processed</code>å­—æ®µï¼Œæ˜ å°„è‡³ç›®æ ‡è¡¨çš„<code>translate_feedback</code>å­—æ®µä¸­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b79070d570bd432cbc631bfaa9eb8a97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763459453&amp;x-signature=C9fVvrn2Os79QHzFwLVywZAugDk%3D" alt="image.png" loading="lazy"/>
<img src="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/3BMqYybEJ6wRmqwZ/img/033b5cb1-c739-451a-b45c-3443aebde642.png" alt="image" loading="lazy"/></p>
<h3 data-id="heading-15">ä¸‰ã€è°ƒè¯•ä»»åŠ¡</h3>
<p>åœ¨ç¦»çº¿åŒæ­¥ä»»åŠ¡çš„ç¼–è¾‘çª—å£å³ä¾§ï¼Œå•å‡»è°ƒè¯•é…ç½®ï¼Œé…ç½®è°ƒè¯•æœ¬èŠ‚ç‚¹ä½¿ç”¨çš„èµ„æºç»„å’Œç›¸å…³è„šæœ¬å‚æ•°ã€‚</p>
<p>å•å‡»èŠ‚ç‚¹é¡¶éƒ¨å·¥å…·æ çš„ä¿å­˜ï¼Œç„¶åå•å‡»è¿è¡Œï¼Œç­‰å¾…è¿è¡Œç»“æŸï¼ŒæŸ¥çœ‹è¿è¡Œç»“æœæ˜¯å¦æˆåŠŸï¼Œæ‚¨å¯ä»¥å‰å¾€ç›®æ ‡ç«¯æ•°æ®åº“æŸ¥çœ‹è¡¨æ•°æ®æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p>
<h3 data-id="heading-16">å››ã€è°ƒåº¦é…ç½®</h3>
<p>è‹¥ç¦»çº¿åŒæ­¥èŠ‚ç‚¹éœ€è¦å‘¨æœŸæ€§è°ƒåº¦æ‰§è¡Œï¼Œæ‚¨éœ€è¦åœ¨èŠ‚ç‚¹å³ä¾§çš„è°ƒåº¦é…ç½®ä¸­è®¾ç½®è°ƒåº¦ç­–ç•¥ï¼Œé…ç½®ç›¸å…³çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fdataworks%2Fuser-guide%2Fnode-scheduling%2F" target="_blank" title="https://help.aliyun.com/zh/dataworks/user-guide/node-scheduling/" ref="nofollow noopener noreferrer">èŠ‚ç‚¹è°ƒåº¦å±æ€§</a>ã€‚</p>
<h3 data-id="heading-17">äº”ã€èŠ‚ç‚¹å‘å¸ƒ</h3>
<p>è¯·å•å‡»èŠ‚ç‚¹å·¥å…·æ çš„å‘å¸ƒå›¾æ ‡å”¤èµ·<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fdataworks%2Fuser-guide%2Ftask-release%2F" target="_blank" title="https://help.aliyun.com/zh/dataworks/user-guide/task-release/" ref="nofollow noopener noreferrer">å‘å¸ƒæµç¨‹</a>ï¼Œé€šè¿‡è¯¥æµç¨‹å°†ä»»åŠ¡å‘å¸ƒè‡³ç”Ÿäº§ç¯å¢ƒã€‚åªæœ‰åœ¨å‘å¸ƒè‡³ç”Ÿäº§ç¯å¢ƒåï¼Œæ‰ä¼šè¿›è¡Œå‘¨æœŸæ€§è°ƒåº¦ã€‚</p>
<h3 data-id="heading-18">åç»­æ“ä½œï¼šä»»åŠ¡è¿ç»´</h3>
<p>èŠ‚ç‚¹å‘å¸ƒåï¼Œæ‚¨å¯ä»¥åœ¨å‘å¸ƒæµç¨‹ä¸­å•å‡»è¡¥æ•°æ®æˆ–å»è¿ç»´ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring AI å®ç°MCPç®€å•æ¡ˆä¾‹]]></title>    <link>https://juejin.cn/post/7571306072422858794</link>    <guid>https://juejin.cn/post/7571306072422858794</guid>    <pubDate>2025-11-11T13:55:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571306072422858794" data-draft-id="7571258854901383211" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring AI å®ç°MCPç®€å•æ¡ˆä¾‹"/> <meta itemprop="keywords" content="åç«¯,Java,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-11T13:55:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»ä»å®¹å®¹æ¸¸åˆƒæœ‰ä½™"/> <meta itemprop="url" content="https://juejin.cn/user/4107431173952525"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring AI å®ç°MCPç®€å•æ¡ˆä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4107431173952525/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»ä»å®¹å®¹æ¸¸åˆƒæœ‰ä½™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T13:55:10.000Z" title="Tue Nov 11 2025 13:55:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Spring AI å®ç°MCPç®€å•æ¡ˆä¾‹</h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>éšç€å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åœ¨ä¼ä¸šåº”ç”¨ä¸­çš„æ™®åŠï¼Œå¦‚ä½•æœ‰æ•ˆåœ°è¿æ¥æ¨¡å‹ä¸å¤–éƒ¨å·¥å…·ã€æ•°æ®å’ŒæœåŠ¡æˆä¸ºäº†å¼€å‘äººå‘˜é¢ä¸´çš„é‡è¦æŒ‘æˆ˜ã€‚2024å¹´11æœˆï¼ŒAnthropicæ¨å‡ºäº†<strong>æ¨¡å‹ä¸Šä¸‹æ–‡åè®®</strong>ï¼ˆModel Context Protocolï¼Œç®€ç§°MCPï¼‰ï¼Œè¿™ä¸€å¼€æ”¾æ ‡å‡†ä¸ºè§£å†³AIç³»ç»Ÿä¸­ç»„ä»¶ååŒé—®é¢˜æä¾›äº†å…¨æ–°çš„è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨MCPçš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå®é™…çš„Spring AIç¤ºä¾‹é¡¹ç›®å±•ç¤ºå…¶å¼ºå¤§åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-2">MCPåè®®ç®€ä»‹</h3>
<p>MCPï¼ˆModel Context Protocolï¼‰æ˜¯ä¸€ç§ä¸“ä¸ºäººå·¥æ™ºèƒ½æ¨¡å‹è®¾è®¡çš„é€šä¿¡åè®®ï¼Œæ—¨åœ¨è§£å†³å¤æ‚AIç³»ç»Ÿä¸­å¤šä¸ªæ¨¡å‹æˆ–ç»„ä»¶ä¹‹é—´çš„ååŒå·¥ä½œé—®é¢˜ã€‚ä½ å¯ä»¥æŠŠMCPæƒ³è±¡æˆAIé¢†åŸŸçš„"USBæ¥å£"ï¼Œå®ƒæä¾›äº†ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼å°†AIæ¨¡å‹è¿æ¥åˆ°å„ç§å·¥å…·å’Œæ•°æ®æºã€‚</p>
<h4 data-id="heading-3">MCPçš„æ ¸å¿ƒä¼˜åŠ¿</h4>
<ol>
<li><strong>æ ‡å‡†åŒ–é€šä¿¡</strong>ï¼šå®šä¹‰äº†æ¨¡å‹ä¸å¤–éƒ¨å·¥å…·äº¤äº’çš„æ ‡å‡†æ¥å£</li>
<li><strong>è‡ªåŠ¨å‘ç°èƒ½åŠ›</strong>ï¼šå®¢æˆ·ç«¯å¯ä»¥è‡ªåŠ¨å‘ç°å¹¶ä½¿ç”¨æœåŠ¡ç«¯æä¾›çš„å·¥å…·</li>
<li><strong>è·¨å¹³å°å…¼å®¹</strong>ï¼šä»»ä½•å®ç°MCPçš„ç³»ç»Ÿéƒ½å¯ä»¥æ— ç¼é›†æˆ</li>
<li><strong>é™ä½é›†æˆæˆæœ¬</strong>ï¼šå¼€å‘è€…æ— éœ€ä¸ºæ¯ä¸ªæ¨¡å‹é‡æ–°å®ç°å·¥å…·è°ƒç”¨é€»è¾‘</li>
<li><strong>å¢å¼ºå®‰å…¨æ€§</strong>ï¼šæä¾›äº†å®‰å…¨çš„æ•°æ®äº¤æ¢æœºåˆ¶</li>
</ol>
<h3 data-id="heading-4">Spring AIä¸­çš„MCPå®ç°</h3>
<p>Spring AIæ¡†æ¶å·²ç»å†…ç½®äº†å¯¹MCPåè®®çš„æ”¯æŒï¼Œä½¿Javaå¼€å‘è€…èƒ½å¤Ÿè½»æ¾æ„å»ºMCPæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯åº”ç”¨ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå®é™…çš„ç¤ºä¾‹é¡¹ç›®æ¥æ¼”ç¤ºSpring AIå¦‚ä½•å®ç°MCPåŠŸèƒ½ã€‚</p>
<h4 data-id="heading-5">é¡¹ç›®æ¶æ„æ¦‚è§ˆ</h4>
<p>æˆ‘ä»¬çš„ç¤ºä¾‹é¡¹ç›®<code>mcp-demos</code>åŒ…å«ä¸¤ä¸ªä¸»è¦æ¨¡å—ï¼š</p>
<ol>
<li><strong>mcp-server-demo</strong>ï¼šå®ç°äº†MCPæœåŠ¡å™¨ï¼Œæä¾›å¤©æ°”æŸ¥è¯¢ç­‰å·¥å…·æœåŠ¡</li>
<li><strong>mcp-client-demo</strong>ï¼šå®ç°äº†MCPå®¢æˆ·ç«¯ï¼Œè¿æ¥åˆ°æœ¬åœ°Ollamaæ¨¡å‹å¹¶è‡ªåŠ¨å‘ç°æœåŠ¡å™¨æä¾›çš„å·¥å…·</li>
</ol>
<h3 data-id="heading-6">æœåŠ¡ç«¯å®ç°è¯¦è§£</h3>
<h4 data-id="heading-7">åˆ›å»ºMCPæœåŠ¡å™¨</h4>
<p>MCPæœåŠ¡å™¨æ˜¯ä¸€ä¸ªåŸºäºSpring Bootçš„åº”ç”¨ç¨‹åºï¼Œé€šè¿‡ç®€å•çš„é…ç½®å³å¯å¯ç”¨MCPåŠŸèƒ½ã€‚</p>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸»åº”ç”¨ç±»çš„å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">McpServerApplication</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(McpServerApplication.class, args);
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ToolCallbackProvider <span class="hljs-title function_">weatherTools</span><span class="hljs-params">(WeatherService weatherService)</span> {
        <span class="hljs-keyword">return</span> MethodToolCallbackProvider.builder().toolObjects(weatherService).build();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">record</span> <span class="hljs-title class_">TextInput</span><span class="hljs-params">(String input)</span> {}

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ToolCallback <span class="hljs-title function_">toUpperCase</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> FunctionToolCallback.builder(<span class="hljs-string">"toUpperCase"</span>, (TextInput input) -&gt; input.input().toUpperCase())
                .inputType(TextInput.class)
                .description(<span class="hljs-string">"Put the text to upper case"</span>)
                .build();
    }
}
</code></pre>
<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸¤ä¸ªå…³é”®çš„Beanå®šä¹‰ï¼š</p>
<ol>
<li><code>weatherTools</code>ï¼šå°†<code>WeatherService</code>ç±»ä¸­æ ‡è®°ä¸ºå·¥å…·çš„æ–¹æ³•æ³¨å†Œä¸ºMCPæœåŠ¡</li>
<li><code>toUpperCase</code>ï¼šåˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„æ–‡æœ¬è½¬æ¢å·¥å…·ï¼Œç”¨äºå°†æ–‡æœ¬è½¬æ¢ä¸ºå¤§å†™</li>
</ol>
<h4 data-id="heading-8">å®ç°å·¥å…·æœåŠ¡</h4>
<p>ä¸‹é¢æ˜¯<code>WeatherService</code>ç±»çš„æ ¸å¿ƒå®ç°ï¼Œå±•ç¤ºäº†å¦‚ä½•å®šä¹‰MCPå·¥å…·æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">BASE_URL</span> <span class="hljs-operator">=</span> <span class="hljs-string">"https://api.weather.gov"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RestClient restClient;

    <span class="hljs-comment">// æ„é€ å‡½æ•°åˆå§‹åŒ–RestClient...</span>

    <span class="hljs-meta">@Tool(description = "Get weather forecast for a specific latitude/longitude")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getWeatherForecastByLocation</span><span class="hljs-params">(<span class="hljs-type">double</span> latitude, <span class="hljs-type">double</span> longitude)</span> {
        <span class="hljs-comment">// å®ç°å¤©æ°”æŸ¥è¯¢é€»è¾‘...</span>
    }

    <span class="hljs-meta">@Tool(description = "Get weather alerts for a US state. Input is Two-letter US state code (e.g. CA, NY)")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getAlerts</span><span class="hljs-params">(String state)</span> {
        <span class="hljs-comment">// å®ç°å¤©æ°”è­¦æŠ¥æŸ¥è¯¢é€»è¾‘...</span>
    }
}
</code></pre>
<p><strong>å…³é”®æŠ€æœ¯ç‚¹</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>@Tool</code>æ³¨è§£æ ‡è®°å¯è¢«MCPå‘ç°çš„æ–¹æ³•</li>
<li><code>description</code>å‚æ•°æä¾›äº†å·¥å…·çš„æè¿°ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£å·¥å…·çš„åŠŸèƒ½å’Œä½¿ç”¨æ–¹å¼</li>
<li>æ–¹æ³•å‚æ•°å’Œè¿”å›ç±»å‹ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºé€‚åˆæ¨¡å‹ç†è§£çš„æ ¼å¼</li>
</ol>
<h4 data-id="heading-9">æœåŠ¡ç«¯é…ç½®</h4>
<p>æœåŠ¡ç«¯çš„MCPåŠŸèƒ½é€šè¿‡<code>application.properties</code>æ–‡ä»¶è¿›è¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.ai.mcp.server.name=mcp-server-demo
spring.ai.mcp.server.version=0.0.1
spring.ai.mcp.server.protocol=SSE
spring.ai.mcp.server.capabilities.resource=true
spring.ai.mcp.server.capabilities.tool=true
spring.ai.mcp.server.capabilities.completion=true
spring.ai.mcp.server.capabilities.prompt=true
spring.ai.mcp.server.streamable-http.mcp-endpoint=/mcp
</code></pre>
<p><strong>é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>spring.ai.mcp.server.name</code>ï¼šæœåŠ¡å™¨åç§°</li>
<li><code>spring.ai.mcp.server.protocol</code>ï¼šé€šä¿¡åè®®ï¼Œè¿™é‡Œä½¿ç”¨SSEï¼ˆServer-Sent Eventsï¼‰</li>
<li><code>spring.ai.mcp.server.capabilities.*</code>ï¼šå£°æ˜æœåŠ¡å™¨æ”¯æŒçš„åŠŸèƒ½</li>
<li><code>spring.ai.mcp.server.streamable-http.mcp-endpoint</code>ï¼šMCPç«¯ç‚¹è·¯å¾„</li>
</ul>
<h3 data-id="heading-10">å®¢æˆ·ç«¯å®ç°è¯¦è§£</h3>
<h4 data-id="heading-11">åˆ›å»ºMCPå®¢æˆ·ç«¯</h4>
<p>MCPå®¢æˆ·ç«¯è¿æ¥åˆ°æœ¬åœ°Ollamaæ¨¡å‹ï¼Œå¹¶è‡ªåŠ¨å‘ç°æœåŠ¡ç«¯æä¾›çš„å·¥å…·ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OllamaConfig</span> {

    <span class="hljs-meta">@Value("${ai.user.input}")</span>
    <span class="hljs-keyword">private</span> String userInput;

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ChatClient.Builder <span class="hljs-title function_">chatClientBuilder</span><span class="hljs-params">(OllamaChatModel ollamaChatModel)</span> {
        <span class="hljs-keyword">return</span> ChatClient.builder(ollamaChatModel);
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> CommandLineRunner <span class="hljs-title function_">predefinedQuestions</span><span class="hljs-params">(ChatClient.Builder chatClientBuilder
            , ToolCallbackProvider tools, ConfigurableApplicationContext context)</span> {

        System.out.println(tools.getToolCallbacks());
        <span class="hljs-keyword">return</span> args -&gt; {
            <span class="hljs-type">var</span> <span class="hljs-variable">chatClient</span> <span class="hljs-operator">=</span> chatClientBuilder
                    .defaultToolCallbacks(tools)
                    .build();

            System.out.println(<span class="hljs-string">"\n&gt;&gt;&gt; QUESTION: "</span> + userInput);
            System.out.println(<span class="hljs-string">"\n&gt;&gt;&gt; ASSISTANT: "</span> + chatClient.prompt(userInput).call().content());

            context.close();
        };
    }
}
</code></pre>
<p><strong>å…³é”®æŠ€æœ¯ç‚¹</strong>ï¼š</p>
<ol>
<li>é€šè¿‡<code>ToolCallbackProvider</code>è‡ªåŠ¨è·å–æ‰€æœ‰å¯ç”¨çš„å·¥å…·ï¼ˆåŒ…æ‹¬é€šè¿‡MCPå‘ç°çš„è¿œç¨‹å·¥å…·ï¼‰</li>
<li>å°†è¿™äº›å·¥å…·é…ç½®åˆ°<code>ChatClient</code>ä¸­ï¼Œä½¿å…¶å¯ä»¥åœ¨ä¸æ¨¡å‹äº¤äº’æ—¶è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å·¥å…·</li>
</ol>
<h4 data-id="heading-12">å®¢æˆ·ç«¯é…ç½®</h4>
<p>å®¢æˆ·ç«¯çš„é…ç½®åŒæ ·åœ¨<code>application.properties</code>æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.ai.model.chat=ollama
spring.ai.ollama.base-url=http://localhost:11434
spring.ai.ollama.chat.options.model=llama3.2:1b
spring.ai.mcp.client.name=mcp-client-demo
spring.ai.mcp.client.toolcallback.enabled=true
spring.ai.mcp.client.sse.connections.mcp-server-demo.url=http://localhost:8080
ai.user.input=What tools are available?
</code></pre>
<p><strong>é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>spring.ai.model.chat=ollama</code>ï¼šä½¿ç”¨Ollamaä½œä¸ºèŠå¤©æ¨¡å‹</li>
<li><code>spring.ai.ollama.*</code>ï¼šé…ç½®Ollamaè¿æ¥ä¿¡æ¯</li>
<li><code>spring.ai.mcp.client.toolcallback.enabled=true</code>ï¼šå¯ç”¨MCPå·¥å…·å›è°ƒ</li>
<li><code>spring.ai.mcp.client.sse.connections.*</code>ï¼šé…ç½®MCPæœåŠ¡å™¨è¿æ¥</li>
</ul>
<h3 data-id="heading-13">å®é™…ä½¿ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-14">ç¤ºä¾‹1ï¼šè·å–å¤©æ°”é¢„æŠ¥</h4>
<p>å½“ç”¨æˆ·å‘é€å¦‚ä¸‹è¯·æ±‚æ—¶ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">What<span class="hljs-symbol">'s</span> the weather forecast <span class="hljs-keyword">for</span> <span class="hljs-title class_">New</span> York City?
</code></pre>
<p>ç³»ç»Ÿçš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯å°†è¯·æ±‚å‘é€ç»™Ollamaæ¨¡å‹</li>
<li>æ¨¡å‹åˆ†æè¯·æ±‚ï¼Œå‘ç°éœ€è¦è·å–çº½çº¦çš„å¤©æ°”é¢„æŠ¥</li>
<li>æ¨¡å‹è¯†åˆ«åˆ°å¯ä»¥ä½¿ç”¨<code>getWeatherForecastByLocation</code>å·¥å…·</li>
<li>å®¢æˆ·ç«¯è°ƒç”¨è¯¥å·¥å…·ï¼ˆé€šè¿‡MCPåè®®ï¼‰</li>
<li>æœåŠ¡ç«¯æ‰§è¡Œå¤©æ°”æŸ¥è¯¢å¹¶è¿”å›ç»“æœ</li>
<li>æ¨¡å‹å¤„ç†ç»“æœå¹¶è¿”å›ç»™ç”¨æˆ·</li>
</ol>
<h4 data-id="heading-15">ç¤ºä¾‹2ï¼šä½¿ç”¨æ–‡æœ¬è½¬æ¢å·¥å…·</h4>
<p>å½“ç”¨æˆ·å‘é€å¦‚ä¸‹è¯·æ±‚æ—¶ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">Please <span class="hljs-keyword">convert</span> <span class="hljs-string">'hello world'</span> <span class="hljs-keyword">to</span> uppercase.
</code></pre>
<p>ç³»ç»Ÿä¼šä½¿ç”¨<code>toUpperCase</code>å·¥å…·å°†æ–‡æœ¬è½¬æ¢ä¸ºå¤§å†™ï¼Œæ•´ä¸ªè¿‡ç¨‹å¯¹ç”¨æˆ·å®Œå…¨é€æ˜ã€‚</p>
<h3 data-id="heading-16">MCPçš„å·¥ä½œåŸç†</h3>
<p>MCPåè®®çš„å·¥ä½œåŸç†å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li><strong>æœåŠ¡æ³¨å†Œ</strong>ï¼šMCPæœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œä¼šæ³¨å†Œæ‰€æœ‰æ ‡è®°ä¸ºå·¥å…·çš„æ–¹æ³•</li>
<li><strong>å®¢æˆ·ç«¯å‘ç°</strong>ï¼šMCPå®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨åï¼Œè‡ªåŠ¨å‘ç°å¯ç”¨çš„å·¥å…·</li>
<li><strong>å·¥å…·è°ƒç”¨</strong>ï¼šå½“æ¨¡å‹éœ€è¦ä½¿ç”¨å·¥å…·æ—¶ï¼Œé€šè¿‡MCPåè®®è°ƒç”¨è¿œç¨‹å·¥å…·</li>
<li><strong>ç»“æœå¤„ç†</strong>ï¼šå·¥å…·æ‰§è¡Œç»“æœé€šè¿‡MCPè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œç„¶åç”±æ¨¡å‹è¿›è¡Œå¤„ç†</li>
</ol>
<p>è¿™ç§æœºåˆ¶ä½¿å¾—æ¨¡å‹å¯ä»¥æ— ç¼åœ°ä½¿ç”¨å„ç§å¤–éƒ¨å·¥å…·ï¼Œè€Œä¸éœ€è¦äº†è§£å·¥å…·çš„å…·ä½“å®ç°ç»†èŠ‚ã€‚</p>
<h3 data-id="heading-17">å®ç°ç»†èŠ‚ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-18">å·¥å…·æ–¹æ³•è®¾è®¡</h4>
<p>åœ¨è®¾è®¡MCPå·¥å…·æ–¹æ³•æ—¶ï¼Œåº”éµå¾ªä»¥ä¸‹æœ€ä½³å®è·µï¼š</p>
<ol>
<li><strong>æ¸…æ™°çš„æè¿°</strong>ï¼šä½¿ç”¨è¯¦ç»†çš„<code>description</code>å‚æ•°ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£å·¥å…·çš„ç”¨é€”</li>
<li><strong>åˆç†çš„å‚æ•°</strong>ï¼šä½¿ç”¨ç®€å•æ˜äº†çš„å‚æ•°ç±»å‹å’Œåç§°</li>
<li><strong>ç»“æ„åŒ–è¿”å›</strong>ï¼šè¿”å›æ ¼å¼è‰¯å¥½çš„ç»“æ„åŒ–æ•°æ®</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå¦¥å–„å¤„ç†å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸</li>
</ol>
<h4 data-id="heading-19">æ€§èƒ½ä¼˜åŒ–</h4>
<p>å¯¹äºç”Ÿäº§ç¯å¢ƒçš„MCPåº”ç”¨ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<ol>
<li><strong>å·¥å…·ç¼“å­˜</strong>ï¼šç¼“å­˜å·¥å…·å‘ç°ç»“æœï¼Œå‡å°‘é‡å¤å‘ç°å¼€é”€</li>
<li><strong>è¯·æ±‚æ‰¹å¤„ç†</strong>ï¼šæ‰¹é‡å¤„ç†ç›¸å…³çš„å·¥å…·è°ƒç”¨</li>
<li><strong>å¼‚æ­¥æ‰§è¡Œ</strong>ï¼šä½¿ç”¨å¼‚æ­¥æ–¹å¼æ‰§è¡Œè€—æ—¶çš„å·¥å…·è°ƒç”¨</li>
<li><strong>è¿æ¥æ± ç®¡ç†</strong>ï¼šåˆç†ç®¡ç†MCPè¿æ¥æ± </li>
</ol>
<h3 data-id="heading-20">MCPä¸å…¶ä»–æ–¹æ¡ˆçš„å¯¹æ¯”</h3>
<p>ç›¸æ¯”ä¼ ç»Ÿçš„APIé›†æˆæ–¹å¼ï¼ŒMCPå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>MCP</th><th>ä¼ ç»ŸAPI</th></tr></thead><tbody><tr><td>è‡ªåŠ¨å‘ç°</td><td>âœ“</td><td>âœ—</td></tr><tr><td>æ ‡å‡†æ¥å£</td><td>âœ“</td><td>å„å‚å•†ä¸åŒ</td></tr><tr><td>æ¨¡å‹ç†è§£</td><td>æè¿°æ€§å…ƒæ•°æ®</td><td>æ— </td></tr><tr><td>è·¨å¹³å°å…¼å®¹</td><td>âœ“</td><td>éœ€è¦é€‚é…</td></tr><tr><td>é›†æˆå¤æ‚åº¦</td><td>ä½</td><td>é«˜</td></tr></tbody></table>
<h3 data-id="heading-21">æœªæ¥å‘å±•ä¸è¶‹åŠ¿</h3>
<p>éšç€MCPåè®®çš„ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬å¯ä»¥æœŸå¾…ï¼š</p>
<ol>
<li>æ›´å¤šæ¡†æ¶å’Œå¹³å°å¯¹MCPçš„æ”¯æŒ</li>
<li>æ›´ä¸°å¯Œçš„å·¥å…·ç”Ÿæ€ç³»ç»Ÿ</li>
<li>å®‰å…¨æ€§å’Œéšç§ä¿æŠ¤çš„å¢å¼º</li>
<li>æ›´é«˜æ•ˆçš„é€šä¿¡åè®®å’Œæœºåˆ¶</li>
</ol>
<h3 data-id="heading-22">ç»“è®º</h3>
<p>MCPåè®®ä¸ºAIæ¨¡å‹ä¸å¤–éƒ¨å·¥å…·çš„äº¤äº’æä¾›äº†ä¸€ç§æ ‡å‡†åŒ–ã€é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡Spring AIçš„å®ç°ï¼ŒJavaå¼€å‘è€…å¯ä»¥è½»æ¾æ„å»ºæ”¯æŒMCPçš„åº”ç”¨ç¨‹åºï¼Œå®ç°æ¨¡å‹ä¸å·¥å…·çš„æ— ç¼é›†æˆã€‚æœ¬æ–‡ä»‹ç»çš„ç¤ºä¾‹é¡¹ç›®å±•ç¤ºäº†MCPçš„åŸºæœ¬åŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¸Œæœ›èƒ½ä¸ºå¼€å‘è€…æä¾›æœ‰ä»·å€¼çš„å‚è€ƒã€‚</p>
<p>éšç€AIæŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒMCPè¿™æ ·çš„æ ‡å‡†åŒ–åè®®å°†åœ¨AIåº”ç”¨ç”Ÿæ€ç³»ç»Ÿä¸­å‘æŒ¥è¶Šæ¥è¶Šé‡è¦çš„ä½œç”¨ï¼Œæ¨åŠ¨AIåº”ç”¨çš„æ™®åŠå’Œåˆ›æ–°ã€‚</p>
<h3 data-id="heading-23">å‚è€ƒæ–‡çŒ®</h3>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fintroduction" target="_blank" title="https://modelcontextprotocol.io/introduction" ref="nofollow noopener noreferrer">MCPå®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-ai%2Freference%2F3-concepts%2Fmodel-context-protocol.html" target="_blank" title="https://docs.spring.io/spring-ai/reference/3-concepts/model-context-protocol.html" ref="nofollow noopener noreferrer">Spring AI MCPæ–‡æ¡£</a></li>
<li>Anthropic, "Model Context Protocol: A New Standard for AI Tool Integration", 2024</li>
</ol>
<hr/>
<h3 data-id="heading-24">ä»£ç é“¾æ¥</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Ftree_boss%2Fmcp-demos.git" target="_blank" title="https://gitee.com/tree_boss/mcp-demos.git" ref="nofollow noopener noreferrer">gitee.com/tree_boss/mâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…³äº2Däººç‰©å†’é™©æ¸¸æˆé—ªç°é€»è¾‘çš„å®ç°æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7571306072422989866</link>    <guid>https://juejin.cn/post/7571306072422989866</guid>    <pubDate>2025-11-11T15:16:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571306072422989866" data-draft-id="7571299394345812010" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…³äº2Däººç‰©å†’é™©æ¸¸æˆé—ªç°é€»è¾‘çš„å®ç°æ–¹æ³•"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘"/> <meta itemprop="datePublished" content="2025-11-11T15:16:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥­ç’ƒå¦–"/> <meta itemprop="url" content="https://juejin.cn/user/2534812613608265"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…³äº2Däººç‰©å†’é™©æ¸¸æˆé—ªç°é€»è¾‘çš„å®ç°æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2534812613608265/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥­ç’ƒå¦–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T15:16:39.000Z" title="Tue Nov 11 2025 15:16:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ–°äººç¬¬ä¸€ç¯‡å¸¦æœ‰çºªå¿µæ€§çš„æ–‡ç« <br/>
æ¸¸æˆdemoæ¥æºäºbç«™upä¸»M_Studioéº¦æ‰£è€å¸ˆçš„æ•™ç¨‹ã€Šå‹‡å£«ä¼ è¯´ã€‹ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œçš„æ‹“å±•å†…å®¹å®ç°</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7823f42e2b546d8a511552f4b466010~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56Wt55KD5aaW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763478999&amp;x-signature=w1zbUtvs6haRoh9suyCdjZWb3IU%3D" alt="é—ªç°.gif" loading="lazy"/></p>
<p align="center">è¿™æ˜¯æˆå“ï¼Œé™¤äº†éšç°åŠ¨ç”»æ²¡æœ‰ç´ æï¼Œå…¶ä»–éƒ½è¾¾åˆ°äº†æˆ‘æƒ³è¦å®ç°çš„æ•ˆæœğŸ˜‹</p>
<p>å½“ç„¶æˆ‘è‡ªå·±ä¸å¤ªä¼šè¿™ä¸ªé€»è¾‘ï¼Œäºæ˜¯æˆ‘å¯»æ±‚äº†gptçš„å¸®åŠ©</p>
<p>æ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">private void <span class="hljs-built_in">Slash</span>(InputAction.CallbackContext context)
{
Â  Â  if (fadeCoroutine != null)
Â  Â  {
Â  Â  Â  Â  <span class="hljs-built_in">StopCoroutine</span>(fadeCoroutine);<span class="hljs-comment">//é˜²æ­¢ä¸Šæ¬¡åç¨‹æ²¡æ¸…ç©º</span>
Â  Â  }
Â  Â  fadeCoroutine = <span class="hljs-built_in">StartCoroutine</span>(FadeOutAndBack());<span class="hljs-comment">//å¯åŠ¨æ–°åç¨‹</span>
}
</code></pre>
<p>åœ¨è¿™é‡Œä½¿ç”¨äº†StartCoroutineå¯åŠ¨åç¨‹åè°ƒç”¨IEnumeratorçŠ¶æ€æœºæ¥å®ç°é—ªç°ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨åç¨‹å‘¢ï¼Ÿ</p>
<p>1.ä¸ç”¨æ‰‹å†™è®¡æ—¶å™¨ã€ä¸ç”¨åœ¨ Update() é‡Œç®¡ç†çŠ¶æ€æœºï¼Œé€»è¾‘æ›´æ¸…æ™°</p>
<p>2.é¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œåç¨‹åœ¨æ¯å¸§ä¹‹é—´è‡ªåŠ¨æš‚åœï¼Œä¸ä¼šå¡ä½æ¸¸æˆ</p>
<p>3.å¯ä»¥åµŒå¥—ä½¿ç”¨å…¶ä»–åç¨‹ï¼ˆæ¸éš â†’ å†²åˆº â†’ åœé¡¿ â†’ æ¸æ˜¾ï¼‰ï¼Œæ–¹ä¾¿ç®¡ç†å„ç§çŠ¶æ€</p>
<p>åº•ä¸‹æ˜¯ç®¡ç†å„ç§åç¨‹çš„çŠ¶æ€æœº</p>
<pre><code class="hljs language-csharp" lang="csharp">Â <span class="hljs-function"><span class="hljs-keyword">private</span> IEnumerator <span class="hljs-title">FadeOutAndBack</span>()</span>
{
Â  Â  <span class="hljs-function"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-title">StartCoroutine</span>(<span class="hljs-params">FadeTo(<span class="hljs-number">0f</span>, fadeDuration</span>))</span>;<span class="hljs-comment">//å¯åŠ¨æ¸éšåç¨‹</span>
Â  Â  <span class="hljs-function"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-title">StartCoroutine</span>(<span class="hljs-params">Dash(dashDistance, dashDuration</span>))</span>;<span class="hljs-comment">//å¯åŠ¨å†²åˆºåç¨‹</span>
Â  Â  <span class="hljs-function"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title">WaitForSeconds</span>(<span class="hljs-params">invisibleTime</span>)</span>;<span class="hljs-comment">//ç­‰å¾…ä¸€æ®µæ—¶é—´</span>
Â  Â  <span class="hljs-function"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-title">StartCoroutine</span>(<span class="hljs-params">FadeTo(<span class="hljs-number">1f</span>, fadeDuration</span>))</span>;<span class="hljs-comment">//å¯åŠ¨æ¸æ˜¾åç¨‹</span>
Â  Â  fadeCoroutine = <span class="hljs-literal">null</span>;
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>å½“ç„¶æœ€é‡è¦çš„æ˜¯æˆ‘ä»¬è¦å®ç°åœ¨ä¸€æ®µæ—¶é—´å†…æ¸éšï¼Œæ¸æ˜¾ï¼Œæ¶‰åŠåˆ°æ—¶é—´çš„æŒç»­ç”¨åç¨‹æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ã€‚</p>
<p>å› ä¸ºUnityç»™äº†æˆ‘ä»¬å¾ˆæ–¹ä¾¿çš„å·¥å…·å»è°ƒç”¨ï¼Œæ¯”å¦‚åœ¨IEnumeratorçŠ¶æ€æœºé‡Œé¢è°ƒç”¨yield return new WaitForSeconds(0.5f);å¯ä»¥è®©åç¨‹æš‚åœ0.5ç§’è€Œä¸ä¼šå½±å“ä¸»çº¿ç¨‹çš„é€»è¾‘ï¼Œé˜²æ­¢é˜»å¡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">Â private IEnumerator Dash(float distance, float duration)
{
Â  Â  float <span class="hljs-attr">faceSign</span> = Mathf.Sign(transform.localScale.x)<span class="hljs-comment">;</span>
Â  Â  Vector2 <span class="hljs-attr">dir</span> = new Vector2(-faceSign, <span class="hljs-number">0</span>f).normalized<span class="hljs-comment">; // æœå‘å‘é‡ï¼Œå‘å³ä¸º (1,0)</span>
Â  Â  Vector2 <span class="hljs-attr">start</span> = rb.position<span class="hljs-comment">;//èµ·å§‹ä½ç½®</span>
Â  Â  Vector2 <span class="hljs-attr">target</span> = start + dir * distance<span class="hljs-comment">;//ç›®æ ‡ä½ç½®</span>
Â  Â  <span class="hljs-attr">rb.velocity</span> = new Vector2(<span class="hljs-number">0</span>f, rb.velocity.y)<span class="hljs-comment">;//è®¾ç½®å†²åˆºçš„æ—¶å€™æ°´å¹³é€Ÿåº¦å…ˆå½’é›¶</span>
Â  Â  rb.MovePosition(target)<span class="hljs-comment">;</span>
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°äººç‰©è°ƒç”¨äº†MovePositionè¿™ä¸ªæ–¹æ³•æ¥å®ç°å¿«é€Ÿç§»åŠ¨ï¼Œæ ¹æ®unityå®˜æ–¹æ‰‹å†Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…³äºä»–çš„æè¿°ï¼š<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e93f6d715c214f95937204b1a98a797e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56Wt55KD5aaW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763478999&amp;x-signature=6wnBwIOVQx4UUiqcy5cjK%2FzHiC8%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>MovePositonæ˜¯åœ¨è°ƒç”¨åçš„ä¸‹ä¸€æ¬¡ç‰©ç†æ›´æ–°ï¼ˆåº”è¯¥å°±æ˜¯ç‰©ç†å¸§ï¼‰å°†ç‰©ä½“ç§»åŠ¨è‡³æŒ‡å®šä½ç½®ï¼Œå¹¶ä¸”åœ¨ç§»åŠ¨è¿‡ç¨‹ä¸­æ£€æµ‹ç‰©ç†ç¢°æ’ï¼Œç›¸æ¯”äºç›´æ¥æ”¹å˜transform.positionæ¥è¯´æ›´ä¸å®¹æ˜“ç©¿å¢™ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆèƒ½ç©¿è¿‡é‡çŒªå‘¢ï¼Ÿ</p>
<p>æˆ‘åœ¨ä»£ç é‡Œé¢å¹¶æ²¡æœ‰ç‰¹åˆ«å†™å…³äºå¿½ç•¥é—ªç°è¿‡ç¨‹ä¸­æ•Œäººè§¦å‘å™¨çš„ç¢°æ’ï¼Œæ‰€ä»¥æˆ‘æ‰¾åˆ°äº†é‡çŒªèº«ä¸Šæœ‰å…³ä¼¤å®³è§¦å‘çš„ä»£ç </p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">OnTriggerStay2D</span><span class="hljs-params">(Collider2D collision)</span>
</span>{
Â  Â  collision.<span class="hljs-built_in">GetComponent</span>&lt;Character&gt;()?.<span class="hljs-built_in">TakeDamage</span>(<span class="hljs-keyword">this</span>);
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°æˆ‘è°ƒç”¨çš„æ˜¯OnTriggerStay2Dæ–¹æ³•ï¼Œå†æ¬¡æŸ¥è¯¢Unityæ‰‹å†Œå¯ä»¥çœ‹åˆ°å…³äºOnTriggerStay2Dæ–¹æ³•çš„æè¿°ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96d3a6be60234732a830b81176bb1312~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56Wt55KD5aaW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763478999&amp;x-signature=%2BifqlfAUzp45N2H%2B0c7wpPMcUZE%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>ç¨å¾®æœ‰ç‚¹çœ‹ä¸æ‡‚ï¼Œé—®è¿‡gptä¹‹åå¯ä»¥çŸ¥é“ï¼šOnTriggerStay2Dæ˜¯ä¸¤ä¸ªcolliderè§¦å‘å™¨åœ¨ä¸€å¸§å†…æœ‰é‡å å°±ä¼šè§¦å‘è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸ºä»€ä¹ˆMovePositionå¯ä»¥ç©¿è¿‡é‡çŒªè€Œä¸èƒ½ç©¿å¢™çš„ç»“è®ºäº†ã€‚</p>
<p>ç”±äºMovePositionçš„æ“ä½œåœ¨ä¸¤æ¬¡ç‰©ç†å¸§ä¹‹é—´å®Œæˆï¼Œå¼€å§‹çš„ç¬¬ä¸€å¸§æˆ‘æ²¡æœ‰ä¸é‡çŒªé‡å ï¼Œå¹¶ä¸”åœ¨ä¸‹ä¸€å¸§æˆ‘å°†äººç‰©ç§»åŠ¨è‡³ç›®æ ‡ç‚¹ï¼Œè¿™ä¸¤å¸§æœŸé—´æˆ‘çš„äººç‰©å¹¶æ²¡æœ‰ä¸é‡çŒªäº§ç”Ÿé‡å ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘OnTriggerStay2Dï¼Œé‚£ä¹ˆåŒç†OnTriggerEnter2Då’ŒOnTriggerExit2Dä¹Ÿä¸ä¼šè¢«è§¦å‘ï¼Œå› ä¸ºå¹¶æ²¡æœ‰äº§ç”Ÿå®é™…çš„è§¦å‘å™¨é‡å ã€‚</p>
<p>oké—ªç°çš„é€»è¾‘è®²å®Œäº†æˆ‘ä»¬æ¥çœ‹çœ‹äººç‰©é€æ¸æ¶ˆå¤±åˆé€æ¸å‡ºç°çš„å®ç°é€»è¾‘ï¼Œå…ˆæ¥çœ‹çœ‹æºä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Â private IEnumerator FadeTo(float targetAlpha, float duration)
{
Â  Â  Color <span class="hljs-attr">c</span> = sprite.color<span class="hljs-comment">;//ç”±äºcoloræ˜¯å€¼ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½å•ç‹¬æ”¹color.aï¼Œè¿™é‡Œç”¨cæ¥æ”¹</span>
Â  Â  float <span class="hljs-attr">startAlpha</span> = c.a<span class="hljs-comment">;</span>
Â  Â  if (Mathf.Approximately(startAlpha, targetAlpha) || duration &lt;= 0f)
Â  Â  {
Â  Â  Â  Â  <span class="hljs-attr">c.a</span> = targetAlpha<span class="hljs-comment">;</span>
Â  Â  Â  Â  <span class="hljs-attr">sprite.color</span> = c<span class="hljs-comment">;</span>
Â  Â  Â  Â  yield break<span class="hljs-comment">;</span>
Â  Â  }
Â  Â  float <span class="hljs-attr">t</span> = <span class="hljs-number">0</span>f<span class="hljs-comment">;</span>
Â  Â  while (t &lt; duration)
Â  Â  {
Â  Â  Â  Â  t += Time.deltaTime<span class="hljs-comment">;</span>
Â  Â  Â  Â  float <span class="hljs-attr">a</span> = Mathf.Lerp(startAlpha, targetAlpha, t / duration)<span class="hljs-comment">;//æ ¸å¿ƒå®ç°</span>
Â  Â  Â  Â  <span class="hljs-attr">c.a</span> = a<span class="hljs-comment">;</span>
Â  Â  Â  Â  <span class="hljs-attr">sprite.color</span> = c<span class="hljs-comment">;</span>
Â  Â  Â  Â  yield return null<span class="hljs-comment">;</span>
Â  Â  }
Â  Â  <span class="hljs-attr">c.a</span> = targetAlpha<span class="hljs-comment">;</span>
Â  Â  <span class="hljs-attr">sprite.color</span> = c<span class="hljs-comment">;</span>
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>å…¶å®æ ¸å¿ƒé€»è¾‘å°±æ˜¯å¦‚ä½•å®ç°ä»0åˆ°1çš„å¹³æ»‘è¿‡æ¸¡ï¼Œè¿™ä¸€ç‚¹çš„è¯æˆ‘ä¸€å¼€å§‹æœ‰æƒ³åˆ°é€šè¿‡åŠ¨ç”»å™¨è‡ªå¸¦çš„å¹³æ»‘è¿‡æ¸¡æ¥å®ç°ï¼Œä½†æ˜¯å®é™…å†™ä¸‹æ¥å‘ç°äººç‰©çš„éšç°å¹¶ä¸èƒ½è·Ÿéšä¸Šä¸€å¸§äººç‰©çš„å½¢æ€ï¼Œéšç°çš„æ—¶å€™åªä¼šæ‰§è¡ŒåŠ¨ç”»ä¸­çš„äººç‰©åŠ¨ç”»ï¼Œæ‰€ä»¥æˆ‘æ”¾å¼ƒäº†åœ¨åŠ¨ç”»å™¨é‡Œå»å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<p>äºæ˜¯æˆ‘è¯¢é—®äº†gptï¼ˆå“å‘€è¿™gptæ€ä¹ˆè¿™ä¹ˆå¥½ç”¨ï¼‰ï¼Œä»–ç»™å‡ºçš„æ ¸å¿ƒæ–¹æ³•å°±æ˜¯Mathf.Lerpï¼ŒæŸ¥è¯¢unityæ‰‹å†Œå¯ä»¥çœ‹åˆ°ï¼š</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd17c9558e4b4c70974b7ec61fe12b4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56Wt55KD5aaW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763478999&amp;x-signature=mbCinU2dEahYnittyxmvkMVjd4c%3D" alt="" width="60%" loading="lazy"/>â€‹</p>
<p>è¿™ä¸ªæ–¹æ³•å¯ä»¥æ ¹æ®æœ€åä¸€ä¸ªå‚æ•°æ¥å¹³æ»‘åœ°ä»ç¬¬ä¸€ä¸ªå‚æ•°å˜åŒ–åˆ°ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™è¡Œä»£ç </p>
<pre><code class="hljs language-ini" lang="ini">float <span class="hljs-attr">a</span> = Mathf.Lerp(startAlpha, targetAlpha, t / duration)<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>å°±æ˜¯å®ç°éšç°çš„æ ¸å¿ƒï¼Œdurationæ˜¯éšç°çš„æŒç»­æ—¶é—´ï¼Œt/durationå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ª0-1çš„å€¼ï¼Œè€Œtæ˜¯æ ¹æ®Time.deltatimeå˜åŒ–çš„ï¼Œæ¯æ¬¡æ›´æ–°åªä¼šå˜åŒ–éå¸¸å°çš„ä¸€ä¸ªå•ä½ï¼Œæ‰€ä»¥èƒ½å¤Ÿå¾ˆå¹³æ»‘åœ°ä»0è¿‡æ¸¡åˆ°1ï¼Œè€Œfloat aå°±æ˜¯å†³å®šäººç‰©color.açš„å‚æ•°ï¼Œè€Œæˆ‘ä»¬çš„éšç°é€»è¾‘åˆæ˜¯åœ¨åç¨‹é‡Œå®ç°çš„ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥è¿›è¡Œçš„ï¼Œå¹¶ä¸”è¿è¡Œå¹³æ»‘ï¼Œæ‰€ä»¥å°±å®ç°äº†äººç‰©éšç°çš„åŠŸèƒ½ã€‚</p>
<p>å¥½äº†è¿™ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±å·®ä¸å¤šç»“æŸäº†ï¼Œæœ€åè·Ÿå¤§å®¶è®²ä¸€ç‚¹é¢˜å¤–è¯å§ã€‚</p>
<p>æœ¬äººæ˜¯åŒ—äº¬ç§‘æŠ€å¤§å­¦çš„ä¸€åå¤§äºŒå­¦ç”Ÿï¼Œç°åœ¨å¤§äºŒä¸Šï¼Œå¤§ä¸€å½“äº†ä¸€å¹´åšé¢˜è›†ï¼ŒæŠŠç»©ç‚¹å·åˆ°äº†ä¿ç ”çº¿ï¼Œå½“æ—¶ä¹Ÿä¸çŸ¥é“è¯»ç ”èƒ½å¹²ä»€ä¹ˆï¼ŒåªçŸ¥é“å¤§å®¶éƒ½åœ¨è¯´è¯»ç ”ç©¶ç”Ÿå¥½æ‰¾å·¥ä½œï¼Œéƒ½æ”¯æŒè¯»ç ”ï¼Œæ‰€ä»¥åœ¨å…¥å­¦çš„æ—¶å€™æˆ‘çš„æ½œç›®æ ‡å°±æ˜¯æŠŠç»©ç‚¹å·èµ·æ¥ç„¶åä¿ç ”ï¼Œç„¶åæ‰¾ä¸ªå¥½å·¥ä½œã€‚</p>
<p>ç„¶è€Œåœ¨å¤§äºŒçš„æ—¶å€™æˆ‘åŠ å…¥äº†æˆ‘ä»¬å­¦æ ¡å‹¤æ•è½©â€œ806â€å®éªŒå®¤é‡Œé¢çš„æ¸¸æˆéƒ¨ï¼Œå› ä¸ºæˆ‘ååˆ†çƒ­çˆ±æ¸¸æˆå¼€å‘ï¼Œä¹Ÿåœ¨å¤§ä¸€å·ç»©ç‚¹çš„åŒæ—¶è‡ªå­¦äº†Unityå’ŒC#çš„ä¸€äº›çŸ¥è¯†ï¼Œè¿›æ¥ä¹‹åæˆ‘çœ‹åˆ°äº†è®¸å¤šå¼€å‘èƒ½åŠ›å¾ˆå¼ºçš„å¤§ä½¬ä»¬ï¼Œä»–ä»¬ä¸åœ¨ä¹ç»©ç‚¹ï¼Œæ¯å¤©æ³¡åœ¨å®éªŒå®¤æ—·è¯¾å†™ä»£ç ï¼Œå°±é‚£æ—¶å€™æˆ‘è§‰å¾—æˆ‘å¤§ä¸€ä¸€å¹´éƒ½æµªè´¹äº†ï¼Œå·çš„ç»©ç‚¹å¥½åƒä¹Ÿæ²¡é‚£ä¹ˆæœ‰ç”¨äº†ï¼Œæˆ‘çš„æœ€ç»ˆç›®æ ‡æ˜¯å¼€å‘æ¸¸æˆï¼Œæœ€åå…¥èŒæ¸¸æˆå…¬å¸è·Ÿä»–ä»¬ä¸€èµ·åšæ¸¸æˆã€‚é‚£ä¹ˆåè¿‡æ¥æƒ³ï¼Œå¦‚æœæˆ‘æ˜¯æ¸¸æˆå…¬å¸çš„HRï¼Œæˆ‘ä¼šæ‹›ä¸€ä¸ªæœ‰ç»©ç‚¹ï¼Œæœ‰å­¦å†ï¼Œä½†æ˜¯Unityçš„ä¸€äº›åŸºæœ¬æ“ä½œéƒ½ä¸ç†Ÿæ‚‰ï¼Œæ²¡æœ‰å¼€å‘è¿‡å®Œæ•´æ¸¸æˆé¡¹ç›®çš„ä¸€ä¸ªäººå—ï¼Ÿæˆ‘æƒ³æ˜¯ä¸ä¼šçš„ã€‚</p>
<p>æ‰€ä»¥æ€ç´¢å†ä¸‰ï¼Œæˆ‘ä¸‹å®šå†³å¿ƒæŠ›å¼ƒæˆ‘å¤§ä¸€å·è¿‡çš„æ‰€æœ‰æˆç»©ï¼Œæ”¾å¼ƒä¿ç ”ï¼Œå…¨åŠ›æŠ•å…¥æ¸¸æˆå¼€å‘ï¼Œæå‡è‡ªå·±çš„èƒ½åŠ›ï¼Œè·Ÿæˆ‘ä»¬æ¸¸æˆéƒ¨æˆå‘˜æ²Ÿé€šä¹‹åï¼Œå…ˆæ‰¾åˆ°äº†è¿™æ¬¾è¾ƒä¸ºå®Œæ•´çš„æ•™ç¨‹ï¼Œå¸¦æˆ‘ä»¬ç†Ÿæ‚‰Unityçš„ä¸€äº›åŸºæœ¬æ“ä½œï¼Œä¹‹åå†å¼€å‘å±äºè‡ªå·±çš„æ¸¸æˆã€‚ï¼ˆå…¶å®è¿˜æœ‰ä¸€ä¸ªä¸»è¦åŸå› æ˜¯æˆ‘å’¨è¯¢äº†å­¦é•¿ï¼Œå­¦é•¿è¯´ä¸åšå¼•æ“çš„è¯ï¼Œè¯»ç ”å¯¹æ¸¸æˆå¼€å‘æ²¡ä»€ä¹ˆå¸®åŠ©ï¼‰</p>
<p>æˆ‘åœ¨è·Ÿæ•™ç¨‹çš„è¿‡ç¨‹ä¸­æƒ³å°è¯•è‡ªå·±å®ç°ä¸€äº›ç‚«é…·çš„é—ªç°åŠŸèƒ½ï¼Œæœ‰æ„Ÿè€Œå‘å†™äº†è¿™ç¯‡æ–‡ç« ï¼Œé¡ºä¾¿ä»¥æ­¤æ¥çºªå¿µæˆ‘ä»åšé¢˜è›†åˆ°ä¸€åæ¸¸æˆå¼€å‘è€…çš„èœ•å˜ã€‚</p>
<p>å¤§å®¶å…³äºæ¸¸æˆå¼€å‘è¿™æ–¹é¢æœ‰ä»€ä¹ˆå¥½çš„è§è§£ä¹Ÿæ¬¢è¿ä¸æˆ‘è¿›è¡Œäº¤æµğŸ˜‹ï¼ˆä»€ä¹ˆéƒ½è¡Œï¼‰</p>
<p>æ„Ÿè°¢æ‚¨è§‚çœ‹æˆ‘çš„æ–‡ç« </p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥JavaScriptæ•°ç»„ï¼šä»å†…å­˜æ¨¡å‹åˆ°éå†æ€§èƒ½ï¼Œæ‰“é€ é«˜æ€§èƒ½ä»£ç çš„åŸºçŸ³]]></title>    <link>https://juejin.cn/post/7571338749197991986</link>    <guid>https://juejin.cn/post/7571338749197991986</guid>    <pubDate>2025-11-11T15:58:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571338749197991986" data-draft-id="7571126773809381386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥JavaScriptæ•°ç»„ï¼šä»å†…å­˜æ¨¡å‹åˆ°éå†æ€§èƒ½ï¼Œæ‰“é€ é«˜æ€§èƒ½ä»£ç çš„åŸºçŸ³"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-11-11T15:58:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·1203911294726"/> <meta itemprop="url" content="https://juejin.cn/user/2517262684662348"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥JavaScriptæ•°ç»„ï¼šä»å†…å­˜æ¨¡å‹åˆ°éå†æ€§èƒ½ï¼Œæ‰“é€ é«˜æ€§èƒ½ä»£ç çš„åŸºçŸ³
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517262684662348/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·1203911294726
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T15:58:07.000Z" title="Tue Nov 11 2025 15:58:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥JavaScriptæ•°ç»„ï¼šä»å†…å­˜æ¨¡å‹åˆ°éå†æ€§èƒ½ï¼Œæ‰“é€ é«˜æ€§èƒ½ä»£ç çš„åŸºçŸ³</h2>
<p>å½“æˆ‘ä»¬è°ˆèµ·JavaScriptçš„æ•°æ®ç»“æ„ï¼Œæ•°ç»„æ— ç–‘æ˜¯å…¶ä¸­æœ€å¸¸ç”¨ã€æœ€åŸºç¡€çš„ä¸€ä¸ªã€‚æ— è®ºæ˜¯ç®€å•çš„æ•°æ®åˆ—è¡¨ï¼Œè¿˜æ˜¯å¤æ‚çš„ç®—æ³•å®ç°ï¼Œæ•°ç»„éƒ½æ‰®æ¼”ç€æ ¸å¿ƒè§’è‰²ã€‚ç„¶è€Œï¼Œä½ çœŸçš„äº†è§£ä½ æ‰‹ä¸­çš„æ•°ç»„å—ï¼Ÿå®ƒæ˜¯å¦‚ä½•åœ¨å†…å­˜ä¸­å­˜åœ¨çš„ï¼Ÿä¸ºä»€ä¹ˆå„ç§éå†æ–¹æ³•æ€§èƒ½è¿¥å¼‚ï¼ŸåŠ¨æ€æ‰©å®¹çš„èƒŒååˆéšè—ç€ä»€ä¹ˆä»£ä»·ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ æ·±å…¥JavaScriptæ•°ç»„çš„å†…éƒ¨ä¸–ç•Œï¼Œä»å†…å­˜æ¨¡å‹è®²åˆ°éå†æ€§èƒ½ï¼ŒåŠ©ä½ å†™å‡ºæ›´ä¸“ä¸šã€æ›´é«˜æ€§èƒ½çš„ä»£ç ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ•°ç»„çš„æœ¬è´¨ï¼šä¸€æ®µè¿ç»­çš„çº¿æ€§å†…å­˜ç©ºé—´</h3>
<p>åœ¨è®¨è®ºä»»ä½•é«˜çº§ç‰¹æ€§ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å›å½’æœ¬è´¨ï¼š<strong>æ•°ç»„æ˜¯ä¸€ç§çº¿æ€§æ•°æ®ç»“æ„ï¼Œåœ¨å†…å­˜ä¸­å æ®ä¸€æ®µè¿ç»­çš„ç©ºé—´</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">arr</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™è¡Œç®€å•çš„ä»£ç èƒŒåï¼Œå‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<ul>
<li><strong>æ ˆå†…å­˜ï¼ˆStackï¼‰</strong> ï¼šå˜é‡ <code>arr</code>æœ¬èº«è¢«å­˜å‚¨åœ¨æ ˆå†…å­˜ä¸­ï¼Œå®ƒä¿å­˜çš„æ˜¯ä¸€ä¸ª<strong>å¼•ç”¨åœ°å€</strong>ï¼ˆä¸€ä¸ªæŒ‡å‘å †å†…å­˜ä¸­å®é™…æ•°ç»„å¯¹è±¡çš„æŒ‡é’ˆï¼‰ã€‚</li>
<li><strong>å †å†…å­˜ï¼ˆHeapï¼‰</strong> ï¼šæ•°ç»„çœŸæ­£çš„æ•°æ® <code>[1, 2, 3, 4, 5, 6]</code>è¢«å­˜å‚¨åœ¨å †å†…å­˜ä¸­ã€‚JavaScriptå¼•æ“ä¼šä¸ºå®ƒç”³è¯·ä¸€æ®µ<strong>è¿ç»­çš„å­˜å‚¨ç©ºé—´</strong>ï¼Œä¾æ¬¡å­˜æ”¾æ¯ä¸ªå…ƒç´ ã€‚</li>
</ul>
<p>è¿™ç§â€œè¿ç»­â€çš„ç‰¹æ€§ï¼Œæ˜¯æ•°ç»„æœ€æ ¸å¿ƒçš„ä¼˜åŠ¿ï¼Œå®ƒä½¿å¾—é€šè¿‡ç´¢å¼•ï¼ˆ<code>index</code>ï¼‰è®¿é—®å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œå³æ— è®ºæ•°ç»„å¤šå¤§ï¼Œ<code>arr[1000]</code>å’Œ <code>arr[0]</code>çš„è®¿é—®é€Ÿåº¦å‡ ä¹ä¸€æ ·å¿«ï¼Œå› ä¸ºåœ°å€å¯ä»¥ç›´æ¥é€šè¿‡â€œåŸºåœ°å€ + ç´¢å¼• * å…ƒç´ å¤§å°â€è®¡ç®—å‡ºæ¥ã€‚</p>
<h4 data-id="heading-2">æ•°ç»„çš„åˆ›å»ºä¸åˆå§‹åŒ–</h4>
<p>æˆ‘ä»¬é€šå¸¸ç”¨å­—é¢é‡æ–¹å¼åˆ›å»ºæ•°ç»„ã€‚ä½†å½“æˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ä¸€ä¸ªé•¿åº¦å·²çŸ¥ã€å†…å®¹å›ºå®šçš„æ•°ç»„æ—¶ï¼Œæœ‰æ›´ä¼˜é›…çš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º6ï¼Œä¸”æ¯ä¸ªå…ƒç´ åˆå§‹å€¼éƒ½ä¸º0çš„æ•°ç»„</span>
<span class="hljs-keyword">const</span> arr = (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">6</span>)).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr); <span class="hljs-comment">// è¾“å‡º: [0, 0, 0, 0, 0, 0]</span>

<span class="hljs-comment">// ä¸æ¨èçš„æ–¹å¼ï¼šè¿™åªä¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º6çš„â€œç©ºæ§½â€æ•°ç»„</span>
<span class="hljs-keyword">const</span> arr2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">6</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr2); <span class="hljs-comment">// è¾“å‡º: [ &lt;6 empty items&gt; ]</span>
</code></pre>
<p><code>new Array(6)</code>åˆ›å»ºäº†ä¸€ä¸ªæœ‰6ä¸ªç©ºä½ï¼ˆemptyï¼‰çš„æ•°ç»„ï¼Œç›´æ¥è®¿é—®è¿™äº›ç©ºä½ä¼šè¿”å› <code>undefined</code>ï¼Œä½† <code>fill</code>æ–¹æ³•å¯ä»¥å®‰å…¨åœ°å¡«å……è¿™äº›ä½ç½®ã€‚æ˜ç¡®åˆå§‹åŒ–æ˜¯é¿å…æ„å¤–è¡Œä¸ºçš„æœ€ä½³å®è·µã€‚</p>
<h3 data-id="heading-3">äºŒã€éå†æ•°ç»„çš„â€œåå…«èˆ¬æ­¦è‰ºâ€ä¸æ€§èƒ½æŠ‰æ‹©</h3>
<p>å¦‚ä½•éå†æ•°ç»„ï¼ŸJavaScriptæä¾›äº†å¤šç§æ–¹æ³•ï¼Œä½†å®ƒä»¬çš„æ€§èƒ½ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯å¤§ä¸ç›¸åŒã€‚</p>
<h4 data-id="heading-4">1. ç‹è€…ï¼šç»å…¸<code>for</code>å¾ªç¯ï¼ˆè®¡æ•°å¾ªç¯ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">arr</span> = (new Array(<span class="hljs-number">6</span>)).fill(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">len</span> = arr.length<span class="hljs-comment">; // å…³é”®æ­¥éª¤ï¼šç¼“å­˜æ•°ç»„é•¿åº¦</span>

for(let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; len; i++) {</span>
    console.log(arr<span class="hljs-section">[i]</span>)<span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆå®ƒæ€§èƒ½æœ€å¥½ï¼Ÿ</strong></p>
<ul>
<li><strong>ä¸CPUå·¥ä½œæ–¹å¼å¥‘åˆ</strong>ï¼š<code>for</code>å¾ªç¯æ˜¯çº¯ç²¹çš„è®¡æ•°å¾ªç¯ï¼Œé€»è¾‘ç®€å•ï¼Œç°ä»£JavaScriptå¼•æ“ï¼ˆå¦‚V8ï¼‰å¯ä»¥å¯¹å…¶è¿›è¡Œæå¼ºçš„ä¼˜åŒ–ï¼ˆä¾‹å¦‚å¾ªç¯å±•å¼€ï¼‰ã€‚</li>
<li><strong>å‡å°‘å±æ€§æŸ¥æ‰¾</strong>ï¼šé€šè¿‡åœ¨å¾ªç¯å¤–ç¼“å­˜ <code>arr.length</code>ï¼Œé¿å…äº†æ¯æ¬¡å¾ªç¯éƒ½æŸ¥è¯¢ <code>length</code>å±æ€§çš„å¼€é”€ã€‚è™½ç„¶å¼•æ“ä¹Ÿä¼šä¼˜åŒ–ï¼Œä½†æ˜¾å¼ç¼“å­˜æ˜¯æ›´ä¿é™©çš„æ€§èƒ½ä¹ æƒ¯ã€‚</li>
<li><strong>æ§åˆ¶åŠ›å¼º</strong>ï¼šå¯ä»¥ä½¿ç”¨ <code>break</code>å’Œ <code>continue</code>éšæ—¶ä¸­æ–­æˆ–è·³è¿‡å¾ªç¯ã€‚</li>
</ul>
<h4 data-id="heading-5">2. æ–°è´µï¼š<code>for...of</code>å¾ªç¯</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">for</span>(const a of arr) {
    console<span class="hljs-selector-class">.log</span>(a);
}
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li><strong>è¯­æ³•ç®€æ´ï¼Œå¯è¯»æ€§æä½³</strong>ï¼šç›´æ¥è¿­ä»£å…ƒç´ å€¼ï¼Œæ— éœ€æ“ä½œç´¢å¼•ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜å¼‚</strong>ï¼šåœ¨ç°ä»£å¼•æ“ä¸­ï¼Œ<code>for...of</code>å¾ªç¯çš„æ€§èƒ½éå¸¸æ¥è¿‘ä¼ ç»Ÿçš„ <code>for</code>å¾ªç¯ï¼Œæ˜¯<strong>å¯è¯»æ€§ä¸æ€§èƒ½çš„å®Œç¾å¹³è¡¡ç‚¹</strong>ã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>æ— æ³•ç›´æ¥è·å–å½“å‰å…ƒç´ çš„ç´¢å¼•ï¼ˆä½†å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼é—´æ¥è·å¾—ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-6">3. å‡½æ•°å¼ä¼˜é›…ï¼š<code>forEach</code>ä¸<code>map</code></h4>
<p><strong><code>forEach</code>ï¼š</strong> â€‹ ä¸ºæ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item, index);
});
</code></pre>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li><strong>æ€§èƒ½å¼€é”€</strong>ï¼šæ¶‰åŠå‡½æ•°çš„<strong>å…¥æ ˆå’Œå‡ºæ ˆ</strong>æ“ä½œï¼Œæ¯”çº¯å¾ªç¯çš„å¼€é”€å¤§ã€‚</li>
<li><strong>æ— æ³•ä¸­æ–­</strong>ï¼šä¸èƒ½ä½¿ç”¨ <code>break</code>è¯­å¥ä¸­é€”è·³å‡ºå¾ªç¯ã€‚</li>
</ul>
<p><strong><code>map</code>ï¼š</strong> â€‹ åœ¨éå†çš„åŒæ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">const</span> newArr = arr.<span class="hljs-built_in">map</span>(item =&gt; item + <span class="hljs-number">1</span>); <span class="hljs-comment">// [2, 3, 4, 5, 6, 7]</span>
</code></pre>
<p><code>map</code>å…·æœ‰å’Œ <code>forEach</code>ç›¸åŒçš„æ€§èƒ½ç‰¹ç‚¹ã€‚å®ƒç”¨äº<strong>æ•°æ®è½¬æ¢</strong>ï¼Œå¦‚æœä½ éœ€è¦æ–°æ•°ç»„ï¼Œä½¿ç”¨ <code>map</code>ï¼›å¦‚æœåªæ˜¯éå†ï¼Œè¯·é€‰æ‹© <code>forEach</code>æˆ–å…¶ä»–å¾ªç¯ã€‚</p>
<h4 data-id="heading-7">4. è¯¯åŒºï¼š<code>for...in</code>å¾ªç¯</h4>
<p><strong><code>for...in</code>æ˜¯ä¸ºéå†æ™®é€šå¯¹è±¡çš„å¯æšä¸¾å±æ€§è€Œè®¾è®¡çš„ï¼Œå¹¶éç”¨äºæ•°ç»„ï¼</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä¸æ¨èç”¨äºæ•°ç»„ï¼</span>
<span class="hljs-built_in">for</span>(let key in arr) {
    console<span class="hljs-selector-class">.log</span>(key, arr[key]); <span class="hljs-comment">// key æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ç´¢å¼• "0", "1"...</span>
}

<span class="hljs-comment">// å®ƒçš„çœŸæ­£ç”¨é€”æ˜¯éå†å¯¹è±¡</span>
const obj = { name: <span class="hljs-string">'å°æ˜'</span>, age: <span class="hljs-number">18</span> };
<span class="hljs-built_in">for</span>(let k in obj) {
    console<span class="hljs-selector-class">.log</span>(k, obj[k]); <span class="hljs-comment">// name å°æ˜, age 18</span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä¸ç”¨äºæ•°ç»„ï¼Ÿ</strong></p>
<ul>
<li><strong>éå†åŸå‹é“¾</strong>ï¼šå®ƒä¼šéå†å¯¹è±¡åŸå‹é“¾ä¸Šçš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œé™¤éä½¿ç”¨ <code>hasOwnProperty</code>åˆ¤æ–­ï¼Œå¦åˆ™å¯èƒ½éå†å‡ºæ„å¤–å±æ€§ã€‚</li>
<li><strong>æ€§èƒ½ä½ä¸‹</strong>ï¼šå®ƒçš„éå†æœºåˆ¶æ¯” <code>for</code>æˆ– <code>for...of</code>æ…¢å¾—å¤šã€‚</li>
<li><strong>é¡ºåºä¸ç¡®å®š</strong>ï¼šè™½ç„¶ç°åœ¨è§„èŒƒè§„å®šäº†å±æ€§é¡ºåºï¼Œä½†ä¾èµ– <code>for...in</code>çš„éå†é¡ºåºä¾ç„¶æ˜¯ä¸å®‰å…¨çš„ã€‚</li>
</ul>
<p><strong>ç»“è®ºï¼šå¯¹è±¡ç”¨ <code>for...in</code>ï¼Œæ•°ç»„ç”¨ <code>for</code>æˆ– <code>for...of</code>ã€‚</strong></p>
<h3 data-id="heading-8">ä¸‰ã€åŠ¨æ€æ•°ç»„çš„ä»£ä»·ï¼šæ‰©å®¹ä¸â€œæ¬å®¶â€</h3>
<p>åœ¨å¼ºç±»å‹è¯­è¨€ï¼ˆå¦‚C++ã€Javaï¼‰ä¸­ï¼Œæ•°ç»„çš„å¤§å°é€šå¸¸æ˜¯å›ºå®šçš„ã€‚ä½†JavaScriptçš„æ•°ç»„æ˜¯<strong>åŠ¨æ€çš„</strong>ï¼Œä½ å¯ä»¥éšæ—¶ä½¿ç”¨ <code>push</code>ã€<code>pop</code>ã€<code>shift</code>ç­‰æ–¹æ³•æ”¹å˜å…¶é•¿åº¦ã€‚ è¿™å¸¦æ¥äº†ä¾¿åˆ©ï¼Œä½†ä¹Ÿéšè—ç€æ€§èƒ½é™·é˜±ã€‚å½“æ•°ç»„ä¸æ–­å¢é•¿ï¼Œåˆå§‹åˆ†é…çš„å†…å­˜ä¸å¤Ÿç”¨æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<ol>
<li><strong>ç”³è¯·æ–°å®¶</strong>ï¼šJavaScriptå¼•æ“ä¼šç”³è¯·ä¸€å—æ›´å¤§çš„ã€è¿ç»­çš„å†…å­˜ç©ºé—´ï¼ˆä¾‹å¦‚ï¼Œå½“å‰å®¹é‡çš„2å€ï¼‰ã€‚</li>
<li><strong>æ¬å®¶</strong>ï¼šå°†åŸæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œé€ä¸ªå¤åˆ¶åˆ°æ–°çš„å†…å­˜ç©ºé—´ä¸­ã€‚</li>
<li><strong>é”€æ¯æ—§å®¶</strong>ï¼šé‡Šæ”¾åŸå…ˆå ç”¨çš„è¾ƒå°å†…å­˜å—ã€‚</li>
</ol>
<p>è¿™ä¸ªâ€œæ¬å®¶â€è¿‡ç¨‹ï¼ˆé‡æ–°åˆ†é…å†…å­˜å’Œå¤åˆ¶æ•°æ®ï¼‰çš„å¼€é”€æ˜¯ <strong>O(n)</strong> â€‹ çš„ï¼Œå³ä¸æ•°ç»„é•¿åº¦æˆæ­£æ¯”ã€‚åœ¨é¢‘ç¹å‘å¤§å‹æ•°ç»„æ·»åŠ å…ƒç´ çš„åœºæ™¯ä¸‹ï¼Œè¿™ç§å¼€é”€ä¸å®¹å¿½è§†ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<strong>é“¾è¡¨</strong>â€‹ è¿™ç§ç¦»æ•£çš„æ•°æ®ç»“æ„ï¼Œæ·»åŠ å…ƒç´ ä¸éœ€è¦æ¬è¿ï¼Œåªéœ€ä¿®æ”¹æŒ‡é’ˆã€‚å› æ­¤ï¼Œåœ¨éœ€è¦é¢‘ç¹åœ¨å¤´éƒ¨æˆ–ä¸­éƒ¨è¿›è¡Œæ’å…¥/åˆ é™¤æ“ä½œæ—¶ï¼Œé“¾è¡¨å¯èƒ½æ›´æœ‰ä¼˜åŠ¿ã€‚ä½†å¯¹äº<strong>ç»å¤§å¤šæ•°éœ€è¦å¿«é€Ÿéšæœºè®¿é—®çš„åœºæ™¯ï¼Œæ•°ç»„ç”±äºå…¶O(1)çš„è®¿é—®æ•ˆç‡ï¼Œä¾ç„¶æ˜¯æ›´ä¼˜çš„é€‰æ‹©</strong>ã€‚å¼•æ“çš„ä¼˜åŒ–å·²ç»éå¸¸æ™ºèƒ½ï¼Œä½¿å¾—åŠ¨æ€æ•°ç»„åœ¨å¤šæ•°æƒ…å†µä¸‹è¡¨ç°å“è¶Šã€‚</p>
<h3 data-id="heading-9">å››ã€è¿›é˜¶çŸ¥è¯†ï¼šå¾ªç¯ä¸é—­åŒ…çš„ç›¸äº’ä½œç”¨</h3>
<p>è€ƒè™‘ä»¥ä¸‹ç»å…¸é¢è¯•é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i); <span class="hljs-comment">// è¾“å‡ºä»€ä¹ˆï¼Ÿ</span>
    }, <span class="hljs-number">1000</span>);
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/758ddd9e7de34302b015aa527ea0e36e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MTIwMzkxMTI5NDcyNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763481487&amp;x-signature=GVRmQkBOpOOG46HX5mfmHGuQ090%3D" alt="5f38222591efefd79d9a10ae65e492c6.png" loading="lazy"/></p>
<p>ç­”æ¡ˆæ˜¯æŒ‰é¡ºåºè¾“å‡º <code>0</code>åˆ° <code>9</code>ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<ul>
<li><strong><code>let</code>çš„å—çº§ä½œç”¨åŸŸ</strong>ï¼š<code>let</code>å£°æ˜çš„ <code>i</code>åœ¨æ¯æ¬¡å¾ªç¯ä¸­éƒ½æœ‰ä¸€ä¸ª<strong>ç‹¬ç«‹çš„è¯æ³•ç¯å¢ƒ</strong>ã€‚å¯ä»¥ç†è§£ä¸ºï¼Œå¾ªç¯ä½“æ‰§è¡Œäº†10æ¬¡ï¼Œåˆ›å»ºäº†10ä¸ªä¸åŒçš„ <code>i</code>ã€‚</li>
<li><strong>é—­åŒ…</strong>ï¼š<code>setTimeout</code>çš„å›è°ƒå‡½æ•°å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼Œå¼•ç”¨äº†å®ƒ<strong>å®šä¹‰æ—¶æ‰€åœ¨ä½œç”¨åŸŸ</strong>çš„å˜é‡ <code>i</code>ã€‚ç”±äºæœ‰10ä¸ªä¸åŒçš„ <code>i</code>ï¼Œæ¯ä¸ªå›è°ƒå‡½æ•°éƒ½â€œè®°ä½â€äº†å¯¹åº”çš„é‚£ä¸ªå€¼ã€‚</li>
</ul>
<p><strong>å†…å­˜å˜åŒ–</strong>ï¼š æœ€åˆï¼Œå˜é‡ <code>i</code>å­˜åœ¨äºæ ˆå†…å­˜ä¸­ã€‚ä½†ç”±äºè¢«é—­åŒ…å¼•ç”¨ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸè¢«å»¶é•¿ï¼ŒJavaScriptå¼•æ“ä¼šå°†å…¶ä»æ ˆä¸­â€œæå‡â€åˆ°å †å†…å­˜ä¸­å­˜å‚¨ï¼Œä»¥ç¡®ä¿åœ¨ <code>for</code>å¾ªç¯ç»“æŸåï¼Œå›è°ƒå‡½æ•°ä¾ç„¶èƒ½è®¿é—®åˆ°æ­£ç¡®çš„ <code>i</code>å€¼ã€‚è¿™å°±æ˜¯é—­åŒ…å»¶é•¿å˜é‡ç”Ÿå‘½å‘¨æœŸçš„æœºåˆ¶ã€‚ å¦‚æœè¿™é‡Œä½¿ç”¨ <code>var i</code>ï¼Œç”±äº <code>var</code>æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œæ•´ä¸ªå¾ªç¯å…±äº«åŒä¸€ä¸ªå…¨å±€æˆ–å‡½æ•°ä½œç”¨åŸŸçš„ <code>i</code>ã€‚å½“å›è°ƒå‡½æ•°æ‰§è¡Œæ—¶ï¼Œå¾ªç¯æ—©å·²ç»“æŸï¼Œ<code>i</code>çš„å€¼å·²ç»æ˜¯10ï¼Œæ‰€ä»¥ä¼šæ‰“å°10ä¸ª10ã€‚</p>
<h3 data-id="heading-10">æ€»ç»“</h3>



































<table><thead><tr><th>ç‰¹æ€§/æ–¹æ³•</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>**ç»å…¸ <code>for</code>**â€‹</td><td><strong>æ€§èƒ½æè‡´</strong>ï¼Œæ§åˆ¶åŠ›å¼º</td><td>ä»£ç ç¨æ˜¾ç¹ç</td><td><strong>æ€§èƒ½æ•æ„Ÿ</strong>åœºæ™¯ï¼Œéœ€è¦ä¸­æ–­å¾ªç¯æ—¶</td></tr><tr><td>**<code>for...of</code>**â€‹</td><td>æ€§èƒ½ä¼˜ç§€ï¼Œ<strong>è¯­æ³•ç®€æ´å¯è¯»</strong>â€‹</td><td>æ— æ³•ç›´æ¥è·å–ç´¢å¼•</td><td><strong>æ—¥å¸¸éå†çš„é¦–é€‰</strong>ï¼Œå…¼é¡¾å¯è¯»æ€§ä¸æ€§èƒ½</td></tr><tr><td>**<code>forEach/map</code>**â€‹</td><td>å‡½æ•°å¼é£æ ¼ï¼Œä»£ç ä¼˜é›…</td><td><strong>æ€§èƒ½æœ‰å¼€é”€</strong>ï¼Œæ— æ³•ä¸­æ–­</td><td>æ— éœ€ä¸­æ–­çš„ç®€å•éå†(<code>forEach</code>)æˆ–éœ€ç”Ÿæˆæ–°æ•°ç»„(<code>map</code>)</td></tr><tr><td>**<code>for...in</code>**â€‹</td><td>ç”¨äºéå†å¯¹è±¡å±æ€§</td><td><strong>ç»å¯¹ä¸è¦ç”¨äºéå†æ•°ç»„</strong>â€‹</td><td>éå†<strong>å¯¹è±¡</strong>çš„å¯æšä¸¾å±æ€§</td></tr></tbody></table>
<p>ç†è§£æ•°ç»„çš„è¿ç»­å†…å­˜æ¨¡å‹ï¼Œæ˜¯ç†è§£å…¶é«˜æ•ˆéšæœºè®¿é—®çš„åŸºç¡€ï¼›æ˜æ™ºåœ°é€‰æ‹©éå†æ–¹æ³•ï¼Œæ˜¯ç¼–å†™é«˜æ€§èƒ½JavaScriptä»£ç çš„å…³é”®ä¸€æ­¥ï¼›è€ŒçŸ¥æ™“åŠ¨æ€æ‰©å®¹çš„ä»£ä»·ï¼Œåˆ™èƒ½è®©ä½ åœ¨å¤æ‚åº”ç”¨ä¸­è¿›è¡Œæ›´åˆç†çš„æ•°æ®ç»“æ„é€‰å‹ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ é‡æ–°å®¡è§†è¿™ä¸ªæœ€ç†Ÿæ‚‰çš„â€œé™Œç”Ÿäººâ€ï¼Œå¹¶åœ¨æœªæ¥çš„å¼€å‘ä¸­æ›´å¥½åœ°é©¾é©­å®ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆè¯´æ•°ç»„æ˜¯ JavaScript å¼€å‘è€…å¿…é¡»ç²¾é€šçš„æ•°æ®ç»“æ„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571258854901514283</link>    <guid>https://juejin.cn/post/7571258854901514283</guid>    <pubDate>2025-11-11T14:58:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571258854901514283" data-draft-id="7571334572768526379" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆè¯´æ•°ç»„æ˜¯ JavaScript å¼€å‘è€…å¿…é¡»ç²¾é€šçš„æ•°æ®ç»“æ„ï¼Ÿ"/> <meta itemprop="keywords" content="æ•°æ®ç»“æ„,å‰ç«¯,ç®—æ³•"/> <meta itemprop="datePublished" content="2025-11-11T14:58:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰æ„ä¹‰"/> <meta itemprop="url" content="https://juejin.cn/user/1739866211617625"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆè¯´æ•°ç»„æ˜¯ JavaScript å¼€å‘è€…å¿…é¡»ç²¾é€šçš„æ•°æ®ç»“æ„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739866211617625/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰æ„ä¹‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T14:58:11.000Z" title="Tue Nov 11 2025 14:58:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“è¢«é—®åŠ â€œæ•°æ®ç»“æ„æœ‰å“ªäº›â€ æ—¶ï¼Œè‹¥åªç½—åˆ— â€œæ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€æ ‘â€ï¼Œéš¾å…æ˜¾å¾—å•è–„ä¸”ç¼ºä¹é€»è¾‘ã€‚å…¶å®ï¼Œæ•°æ®ç»“æ„å¯æ¸…æ™°åˆ’åˆ†ä¸ºä¸¤å¤§æ ¸å¿ƒç±»åˆ« â€”â€”çº¿æ€§ç»“æ„ä¸éçº¿æ€§ç»“æ„ï¼Œå„ç±»ç»“æ„çš„è®¾è®¡é€»è¾‘å’Œåº”ç”¨åœºæ™¯å„æœ‰ä¾§é‡ï¼Œç†è§£å…¶æœ¬è´¨èƒ½è®©æˆ‘ä»¬æ›´çµæ´»åœ°è¿ç”¨ã€‚â€‹</p>
<p>çº¿æ€§ç»“æ„æ˜¯æ•°æ®æŒ‰ â€œä¸€å¯¹ä¸€â€ é¡ºåºæ’åˆ—çš„ç»“æ„ï¼Œæ—¥å¸¸å¼€å‘ä¸­æœ€ä¸ºå¸¸ç”¨ï¼Œæ ¸å¿ƒæˆå‘˜åŒ…æ‹¬æ•°ç»„ã€é“¾è¡¨ã€æ ˆå’Œé˜Ÿåˆ—ã€‚å…¶ä¸­ï¼Œæ•°ç»„å ªç§° â€œä¸‡èƒ½åŸºç¡€æ¬¾â€ï¼Œå‡­å€Ÿè¿ç»­çš„å†…å­˜ç©ºé—´å®ç°é«˜æ•ˆéšæœºè®¿é—®ï¼Œæ“ä½œç®€å•ã€æ€§èƒ½ç¨³å®šï¼Œæ˜¯å„ç±»åœºæ™¯çš„é¦–é€‰ï¼›è€Œé“¾è¡¨è™½ä¸åŠæ•°ç»„æ™®åŠï¼Œå´ä»¥ç¦»æ•£çš„å†…å­˜åˆ†é…æ‰“ç ´äº†ç©ºé—´è¿ç»­æ€§é™åˆ¶ï¼Œèƒ½çµæ´»åº”å¯¹åŠ¨æ€å¢åˆ åœºæ™¯ï¼Œå®Œç¾å¼¥è¡¥äº†æ•°ç»„çš„çŸ­æ¿ã€‚å†çœ‹æ ˆä¸é˜Ÿåˆ—ï¼ŒäºŒè€…è™½å‡åŸºäºçº¿æ€§é€»è¾‘ï¼Œä½†éµå¾ªæˆªç„¶ä¸åŒçš„æ“ä½œè§„åˆ™ï¼šæ ˆæ˜¯ â€œå…ˆè¿›åå‡ºï¼ˆFILOï¼‰â€ çš„ â€œå­˜å–å®¹å™¨â€ï¼Œå¸¸è§äºå‡½æ•°è°ƒç”¨ã€è¡¨è¾¾å¼æ±‚å€¼ç­‰åœºæ™¯ï¼›é˜Ÿåˆ—åˆ™æ˜¯ â€œå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰â€ çš„ â€œæ’é˜Ÿæ¨¡å‹â€ï¼Œå¹¿æ³›åº”ç”¨äºä»»åŠ¡è°ƒåº¦ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰éœ€æ±‚ä¸­ã€‚â€‹</p>
<p>éçº¿æ€§ç»“æ„åˆ™æ˜¯æ•°æ®å‘ˆ â€œä¸€å¯¹å¤šâ€ æˆ– â€œå¤šå¯¹å¤šâ€ å…³è”çš„ç»“æ„ï¼Œå…¶ä¸­æ ‘ç»“æ„æœ€ä¸ºæ ¸å¿ƒï¼Œå°¤å…¶ä»¥äºŒå‰æ ‘ä¸ºè€ƒå¯Ÿé‡ç‚¹ â€”â€” æ— è®ºæ˜¯ç®—æ³•é¢è¯•è¿˜æ˜¯å®é™…å¼€å‘ä¸­çš„æœç´¢ã€æ’åºåœºæ™¯ï¼ŒäºŒå‰æ ‘åŠå…¶è¡ç”Ÿç»“æ„ï¼ˆå¦‚äºŒå‰æœç´¢æ ‘ã€çº¢é»‘æ ‘ï¼‰éƒ½å æ®é‡è¦åœ°ä½ã€‚â€‹</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†èšç„¦çº¿æ€§ç»“æ„ä¸­çš„ â€œæ ¸å¿ƒæˆå‘˜â€â€”â€” æ•°ç»„ï¼Œè¯¦ç»†æ‹†è§£å®ƒçš„åº•å±‚åŸç†ã€ä½¿ç”¨åœºæ™¯ä¸å®æˆ˜æŠ€å·§ã€‚</p>
<h2 data-id="heading-0">æ–°å»ºæ•°ç»„</h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> arr = (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">6</span>)).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr);
<span class="hljs-keyword">const</span> arr2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">6</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr2);
<span class="hljs-comment">//æµè§ˆå™¨æ˜¾ç¤º  [ç©º Ã—6]</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b49fd20d126c44d9b3404e2ab47884cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763477891&amp;x-signature=AOjmESSCv8JzqFPTYEaLVylh74o%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç”¨Â <code>new Array(length)</code>Â åˆ›å»ºçš„æ•°ç»„ï¼Œåœ¨æ²¡æœ‰åˆå§‹åŒ–ä¹‹å‰ï¼Œå®ƒçš„å…ƒç´ æ˜¯ â€œç©ºâ€ çš„ï¼ˆemptyï¼‰ï¼Œè€Œä¸æ˜¯Â <code>undefined</code>Â æˆ–å…¶ä»–å€¼ã€‚</strong></p>
<h2 data-id="heading-1">éå†æ•°ç»„   for(i=0;i&lt;len;i++)</h2>
<p>æˆ‘ä»¬æ¥çœ‹è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-keyword">const</span> arr = (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">6</span>)).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> len = arr.<span class="hljs-property">length</span>; 
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;i&lt;len;i++){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i]);
}
</code></pre>
<p>åœ¨å¾ªç¯æ¡ä»¶ä¸­ç›´æ¥ä½¿ç”¨Â <code>arr.length</code>Â ä¼šæœ‰å¾®å°çš„æ€§èƒ½å¼€é”€ã€‚</p>
<p><strong>åŸå› å¦‚ä¸‹ï¼š</strong></p>
<p>åœ¨ JavaScript ä¸­ï¼Œæ•°ç»„æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ã€‚<code>arr.length</code>Â ä¸æ˜¯ä¸€ä¸ªç®€å•çš„å˜é‡ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>è®¿é—®å™¨å±æ€§ï¼ˆAccessor Propertyï¼‰</strong> ã€‚è¿™æ„å‘³ç€ï¼Œæ¯æ¬¡ä½ è®¿é—®Â <code>arr.length</code>Â æ—¶ï¼ŒJavaScript å¼•æ“å®é™…ä¸Šæ˜¯åœ¨è°ƒç”¨ä¸€ä¸ªéšè—çš„å‡½æ•°æ¥è·å–æ•°ç»„çš„é•¿åº¦ã€‚</p>
<p>åœ¨æ—©æœŸçš„ JavaScript å¼•æ“ä¸­ï¼Œè¿™ä¸ªå‡½æ•°è°ƒç”¨çš„å¼€é”€æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„ã€‚å¦‚æœåœ¨ä¸€ä¸ªå¾ªç¯ä¸­ï¼ˆä¾‹å¦‚æ‰§è¡Œ 10000 æ¬¡ï¼‰æ¯æ¬¡éƒ½å»è°ƒç”¨å®ƒï¼Œç´¯ç§¯çš„å¼€é”€å°±ä¼šå˜å¾—å¯è§‚ã€‚</p>
<h2 data-id="heading-2">éå†æ•°ç»„ foreach</h2>
<p>æˆ‘ä»¬æ¥ç€è¯´Â <code>forEach</code>ï¼Œä½ æåˆ°çš„ä¸¤ç‚¹ â€”â€”<strong>ä¸èƒ½Â <code>break</code></strong>Â å’ŒÂ <strong>æ€§èƒ½ç›¸å¯¹è¾ƒå·®</strong>â€”â€” éå¸¸å…³é”®ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†å±•å¼€ï¼Œå¹¶è¡¥å……ä¸€äº›ä½ å¯èƒ½å¿½ç•¥çš„ç»†èŠ‚ã€‚</p>
<hr/>
<h2 data-id="heading-3">1.Â <code>forEach</code>Â åŸºæœ¬ç”¨æ³•</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index, array</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item, index, array);
});
</code></pre>
<ul>
<li>
<p><strong>å›è°ƒå‚æ•°</strong>ï¼š</p>
<ul>
<li><code>item</code>ï¼šå½“å‰éå†çš„å…ƒç´ ï¼ˆå¿…é€‰ï¼‰</li>
<li><code>index</code>ï¼šå½“å‰å…ƒç´ çš„ç´¢å¼•ï¼ˆå¯é€‰ï¼‰</li>
<li><code>array</code>ï¼šæ­£åœ¨éå†çš„åŸæ•°ç»„ï¼ˆå¯é€‰ï¼‰</li>
</ul>
</li>
<li>
<p><strong>è¿”å›å€¼</strong>ï¼š<code>undefined</code>ï¼ˆæ— è®ºå›è°ƒé‡Œå†™ä»€ä¹ˆÂ <code>return</code>ï¼Œéƒ½ä¸ä¼šæ”¹å˜è¿™ä¸€ç‚¹ï¼‰</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-4">ï¼ˆ1ï¼‰æ— æ³•ä¸­é€”é€€å‡º</h3>
<p><code>forEach</code>Â æ²¡æœ‰åƒÂ <code>for</code>Â å¾ªç¯é‚£æ ·çš„Â <code>break</code>Â æˆ–Â <code>continue</code>Â æœºåˆ¶ã€‚</p>
<ul>
<li>
<p><strong>æƒ³æå‰ç»ˆæ­¢ï¼Ÿåšä¸åˆ°</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (item === <span class="hljs-number">2</span>) <span class="hljs-keyword">break</span>; <span class="hljs-comment">// æŠ¥é”™ï¼šIllegal break statement</span>
});
</code></pre>
</li>
<li>
<p><strong>æƒ³è·³è¿‡å½“å‰å…ƒç´ ï¼Ÿç”¨Â <code>return</code>Â æ¨¡æ‹ŸÂ <code>continue</code></strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (item === <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// è·³è¿‡å½“å‰è¿­ä»£ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item); <span class="hljs-comment">// è¾“å‡º 1, 3</span>
});
</code></pre>
</li>
</ul>
<h3 data-id="heading-5"><code>map</code></h3>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// map</span>
<span class="hljs-comment">// ä½œç”¨ï¼šéå†æ•°ç»„ï¼Œå¹¶å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡ŒæŒ‡å®šæ“ä½œï¼ˆåŠ å·¥/è½¬æ¢ï¼‰ï¼Œ</span>
<span class="hljs-comment">//      ç„¶åå°†æ‰€æœ‰æ“ä½œç»“æœæ”¶é›†èµ·æ¥ï¼Œè¿”å›ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ã€‚</span>
<span class="hljs-comment">// æ ¸å¿ƒï¼šä¸æ”¹å˜åŸæ•°ç»„ï¼Œè¿”å›ä¸€ä¸ªé•¿åº¦ç›¸åŒã€å€¼ç»è¿‡è½¬æ¢çš„æ–°æ•°ç»„ã€‚</span>
<span class="hljs-comment">// é€‚ç”¨åœºæ™¯ï¼šå½“ä½ éœ€è¦ä»ä¸€ä¸ªæ•°ç»„â€œæ´¾ç”Ÿâ€å‡ºå¦ä¸€ä¸ªç»“æ„ç›¸ä¼¼ä½†å€¼ä¸åŒçš„æ•°ç»„æ—¶ã€‚</span>

<span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];
<span class="hljs-keyword">const</span> newArr = arr.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item + <span class="hljs-number">1</span>); <span class="hljs-comment">// å¯¹æ¯ä¸ªå…ƒç´ åŠ  1</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr);    <span class="hljs-comment">// è¾“å‡º: [1, 2, 3, 4, 5, 6] (åŸæ•°ç»„æœªæ”¹å˜)</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newArr); <span class="hljs-comment">// è¾“å‡º: [2, 3, 4, 5, 6, 7] (æ–°æ•°ç»„)</span>

<span class="hljs-comment">// å›è°ƒå‡½æ•°å‚æ•°è¯¦è§£ï¼š</span>
<span class="hljs-comment">// item: å½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´  (å¿…é€‰)</span>
<span class="hljs-comment">// index: å½“å‰å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼• (å¯é€‰)</span>
<span class="hljs-comment">// array: è°ƒç”¨ map æ–¹æ³•çš„åŸæ•°ç»„æœ¬èº« (å¯é€‰)</span>
<span class="hljs-keyword">const</span> doubledWithIndex = arr.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Index <span class="hljs-subst">${index}</span>: <span class="hljs-subst">${item * <span class="hljs-number">2</span>}</span>`</span>;
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(doubledWithIndex); <span class="hljs-comment">// è¾“å‡º: ["Index 0: 2", "Index 1: 4", "Index 2: 6", ...]</span>

<span class="hljs-comment">// ä¸ forEach çš„åŒºåˆ«ï¼š</span>
<span class="hljs-comment">// 1. forEach ä»…ç”¨äºéå†ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼ˆè¿”å› undefinedï¼‰ã€‚</span>
<span class="hljs-comment">// 2. map ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ›´é€‚åˆæ•°æ®è½¬æ¢ã€‚</span>
<span class="hljs-comment">// ç®€å•è¯´ï¼šæƒ³â€œç”Ÿæˆæ–°æ•°ç»„â€ç”¨ mapï¼Œæƒ³â€œå•çº¯éå†åšæ“ä½œâ€ç”¨ forEachã€‚</span>
</code></pre>
<hr/>
<h3 data-id="heading-6"><code>for...of</code></h3>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// for...of</span>
<span class="hljs-comment">// ä½œç”¨ï¼šES6 å¼•å…¥çš„ä¸€ç§æ–°å‹å¾ªç¯è¯­å¥ï¼Œç”¨äºéå†å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚ Array, Map, Set, String ç­‰ï¼‰ã€‚</span>
<span class="hljs-comment">// æ ¸å¿ƒï¼šæä¾›äº†ä¸€ç§æ›´ç®€æ´ã€æ›´å…·å¯è¯»æ€§çš„æ–¹å¼æ¥éå†é›†åˆä¸­çš„å€¼ã€‚</span>
<span class="hljs-comment">// ä¼˜ç‚¹ï¼š</span>
<span class="hljs-comment">//   - è¯­æ³•ç®€æ´ï¼Œå¯è¯»æ€§è¿œè¶…ä¼ ç»Ÿ for å¾ªç¯ã€‚</span>
<span class="hljs-comment">//   - é¿å…äº† for...in å¾ªç¯éå†æ•°ç»„æ—¶å¯èƒ½é‡åˆ°çš„åŸå‹é“¾æ±¡æŸ“é—®é¢˜ã€‚</span>
<span class="hljs-comment">//   - å¯ä»¥ä¸ break, continue, return é…åˆä½¿ç”¨ã€‚</span>

<span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];

<span class="hljs-comment">// åŸºæœ¬ç”¨æ³•</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> arr) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item); <span class="hljs-comment">// ä¾æ¬¡è¾“å‡º: 1, 2, 3, 4, 5, 6</span>
}

<span class="hljs-comment">// å¦‚æœéœ€è¦ç´¢å¼•ï¼Œå¯ä»¥ç»“åˆ Array.prototype.entries() ä½¿ç”¨</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> [index, item] <span class="hljs-keyword">of</span> arr.<span class="hljs-title function_">entries</span>()) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Index <span class="hljs-subst">${index}</span>: <span class="hljs-subst">${item}</span>`</span>); <span class="hljs-comment">// ä¾æ¬¡è¾“å‡º: "Index 0: 1", "Index 1: 2", ...</span>
}

<span class="hljs-comment">// ä¸ä¼ ç»Ÿ for å¾ªç¯å¯¹æ¯”</span>
<span class="hljs-comment">// ä¼ ç»Ÿ for å¾ªç¯ï¼š</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i]);
}
<span class="hljs-comment">// for...of å†™æ³•æ›´ç®€æ´ï¼Œæ„å›¾æ›´æ˜ç¡®ã€‚</span>

<span class="hljs-comment">// ä¸ for...in å¯¹æ¯” (æ³¨æ„ï¼šä¸æ¨èç”¨ for...in éå†æ•°ç»„)</span>
<span class="hljs-comment">// for...in éå†çš„æ˜¯é”®åï¼ˆç´¢å¼•ï¼‰ï¼Œä¸”å¯èƒ½éå†åˆ°æ•°ç»„åŸå‹ä¸Šçš„å±æ€§ã€‚</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> arr) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key); <span class="hljs-comment">// è¾“å‡º: "0", "1", "2", ... (å­—ç¬¦ä¸²å½¢å¼çš„ç´¢å¼•)</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-7">æ€»ç»“å¯¹æ¯”</h3>








































<table><thead><tr><th align="left">ç‰¹æ€§ / æ–¹æ³•</th><th align="left"><code>map()</code></th><th align="left"><code>for...of</code></th></tr></thead><tbody><tr><td align="left"><strong>æ ¸å¿ƒç”¨é€”</strong></td><td align="left"><strong>æ•°æ®è½¬æ¢</strong>ï¼Œç”Ÿæˆæ–°æ•°ç»„ã€‚</td><td align="left"><strong>éå†è¿­ä»£</strong>ï¼Œè®¿é—®é›†åˆä¸­çš„æ¯ä¸ªå€¼ã€‚</td></tr><tr><td align="left"><strong>è¿”å›å€¼</strong></td><td align="left">è¿”å›ä¸€ä¸ª<strong>æ–°æ•°ç»„</strong>ã€‚</td><td align="left">æ— è¿”å›å€¼ (<code>undefined</code>)ã€‚</td></tr><tr><td align="left"><strong>æ˜¯å¦æ”¹å˜åŸæ•°ç»„</strong></td><td align="left">ä¸æ”¹å˜ï¼ˆé™¤éå›è°ƒå‡½æ•°å†…æ‰‹åŠ¨ä¿®æ”¹ï¼‰ã€‚</td><td align="left">ä¸æ”¹å˜ï¼ˆé™¤éå¾ªç¯ä½“å†…æ‰‹åŠ¨ä¿®æ”¹ï¼‰ã€‚</td></tr><tr><td align="left"><strong>é€‚ç”¨å¯¹è±¡</strong></td><td align="left">ä»…æ•°ç»„ (<code>Array</code>)ã€‚</td><td align="left">æ‰€æœ‰<strong>å¯è¿­ä»£å¯¹è±¡</strong>Â (<code>Array</code>,Â <code>String</code>,Â <code>Map</code>,Â <code>Set</code>,Â <code>arguments</code>Â ç­‰)ã€‚</td></tr><tr><td align="left"><strong>ä¸­æ–­å¾ªç¯</strong></td><td align="left">æ— æ³•ä¸­æ–­ï¼ˆå¿…é¡»éå†å®Œæ‰€æœ‰å…ƒç´ ï¼‰ã€‚</td><td align="left">å¯ä»¥ä½¿ç”¨Â <code>break</code>Â æˆ–Â <code>continue</code>Â ä¸­æ–­æˆ–è·³è¿‡ã€‚</td></tr><tr><td align="left"><strong>è·å–ç´¢å¼•</strong></td><td align="left">å›è°ƒå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°å³ä¸ºç´¢å¼•ã€‚</td><td align="left">éœ€è¦é…åˆÂ <code>arr.entries()</code>Â æ‰èƒ½æ–¹ä¾¿åœ°è·å–ç´¢å¼•ã€‚</td></tr></tbody></table>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼Ÿ</strong></p>
<ul>
<li><strong>ä½¿ç”¨Â <code>map</code></strong>ï¼šå½“ä½ éœ€è¦å°†ä¸€ä¸ªæ•°ç»„çš„æ¯ä¸ªå…ƒç´ æŒ‰ç…§æŸç§è§„åˆ™è¿›è¡Œè½¬æ¢ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„æ—¶ã€‚ä¾‹å¦‚ï¼Œä» API è·å–ç”¨æˆ·åˆ—è¡¨åï¼Œæå–æ¯ä¸ªç”¨æˆ·çš„Â <code>id</code>Â å’ŒÂ <code>name</code>Â ç»„æˆæ–°æ•°ç»„ã€‚</li>
<li><strong>ä½¿ç”¨Â <code>for...of</code></strong>ï¼šå½“ä½ éœ€è¦éå†ä¸€ä¸ªæ•°ç»„æˆ–å…¶ä»–å¯è¿­ä»£å¯¹è±¡ï¼Œå¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€äº›æ“ä½œï¼ˆå¦‚æ‰“å°ã€ç´¯åŠ ã€æ ¹æ®æ¡ä»¶è¿›è¡Œå¤æ‚å¤„ç†ç­‰ï¼‰ï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦ä¸­é€”åœæ­¢å¾ªç¯æ—¶ã€‚å®ƒæ˜¯æ—¥å¸¸éå†ä»»åŠ¡ä¸­æ›¿ä»£ä¼ ç»ŸÂ <code>for</code>Â å¾ªç¯å’ŒÂ <code>forEach</code>Â çš„ä¼˜ç§€é€‰æ‹©ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Springäº‹åŠ¡ä¼ æ’­æœºåˆ¶æ·±åº¦è§£æï¼š7ç§ä¼ æ’­è¡Œä¸ºçš„ä½¿ç”¨åœºæ™¯å’Œé™·é˜±]]></title>    <link>https://juejin.cn/post/7571295102851350554</link>    <guid>https://juejin.cn/post/7571295102851350554</guid>    <pubDate>2025-11-11T16:04:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571295102851350554" data-draft-id="7571060853354348554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Springäº‹åŠ¡ä¼ æ’­æœºåˆ¶æ·±åº¦è§£æï¼š7ç§ä¼ æ’­è¡Œä¸ºçš„ä½¿ç”¨åœºæ™¯å’Œé™·é˜±"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-11T16:04:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å¤´an"/> <meta itemprop="url" content="https://juejin.cn/user/618374030438861"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Springäº‹åŠ¡ä¼ æ’­æœºåˆ¶æ·±åº¦è§£æï¼š7ç§ä¼ æ’­è¡Œä¸ºçš„ä½¿ç”¨åœºæ™¯å’Œé™·é˜±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/618374030438861/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å¤´an
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T16:04:20.000Z" title="Tue Nov 11 2025 16:04:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<blockquote>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¤æ‚ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œäº‹åŠ¡çš„è¾¹ç•Œç®¡ç†å˜å¾—å°¤ä¸ºé‡è¦ã€‚Springæ¡†æ¶æä¾›äº†7ç§äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼Œä½†ä½ æ˜¯å¦çœŸæ­£ç†è§£å®ƒä»¬çš„åŒºåˆ«ï¼Ÿæ˜¯å¦æ›¾åœ¨åµŒå¥—äº‹åŠ¡ä¸­è¸©è¿‡å‘ï¼Ÿæœ¬æ–‡å°†æ·±å…¥å‰–ææ¯ç§ä¼ æ’­æœºåˆ¶çš„åŸç†ã€ä½¿ç”¨åœºæ™¯å’Œå¸¸è§é™·é˜±ï¼Œå¸®åŠ©ä½ åœ¨å¤æ‚ä¸šåŠ¡ä¸­æ¸¸åˆƒæœ‰ä½™åœ°ç®¡ç†äº‹åŠ¡ã€‚</p>
</blockquote>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼Ÿ</h2>
<p>äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼ˆTransaction Propagationï¼‰å®šä¹‰äº†åœ¨å¤šä¸ªäº‹åŠ¡æ–¹æ³•ç›¸äº’è°ƒç”¨æ—¶ï¼Œäº‹åŠ¡åº”è¯¥å¦‚ä½•ä¼ æ’­ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒå›ç­”äº†"å½“å‰æ–¹æ³•åº”è¯¥åŠ å…¥ç°æœ‰äº‹åŠ¡ï¼Œè¿˜æ˜¯å¼€å¯æ–°äº‹åŠ¡"çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒæ¦‚å¿µå›é¡¾</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Propagation</span> {
    REQUIRED,
    SUPPORTS,
    MANDATORY,
    REQUIRES_NEW,
    NOT_SUPPORTED,
    NEVER,
    NESTED
}
</code></pre>
<h2 data-id="heading-3">ä¼ æ’­æœºåˆ¶è¯¦è§£</h2>
<h3 data-id="heading-4">1. REQUIREDï¼ˆé»˜è®¤ï¼‰ - éœ€è¦äº‹åŠ¡</h3>
<p><strong>å®šä¹‰</strong>ï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå¤§å¤šæ•°ä¸šåŠ¡æ–¹æ³•çš„é»˜è®¤é€‰æ‹©ï¼Œç¡®ä¿æ“ä½œåœ¨äº‹åŠ¡ä¸­æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderMapper orderMapper;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> InventoryService inventoryService;
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRED)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// å¦‚æœè°ƒç”¨æ–¹æœ‰äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡</span>
        <span class="hljs-comment">// å¦‚æœè°ƒç”¨æ–¹æ— äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºæ–°äº‹åŠ¡</span>
        orderMapper.insert(order);
        inventoryService.deductStock(order.getItems());
    }
}
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">åœºæ™¯<span class="hljs-number">1</span>ï¼šæ— äº‹åŠ¡ä¸Šä¸‹æ–‡
<span class="hljs-selector-attr">[å¼€å§‹REQUIREDäº‹åŠ¡]</span> â†’ æ‰§è¡Œæ–¹æ³• â†’ <span class="hljs-selector-attr">[æäº¤/å›æ»šäº‹åŠ¡]</span>

åœºæ™¯<span class="hljs-number">2</span>ï¼šæœ‰äº‹åŠ¡ä¸Šä¸‹æ–‡  
<span class="hljs-selector-attr">[åŠ å…¥ç°æœ‰äº‹åŠ¡]</span> â†’ æ‰§è¡Œæ–¹æ³• â†’ <span class="hljs-selector-attr">[ç”±å¤–éƒ¨äº‹åŠ¡ç»Ÿä¸€æäº¤/å›æ»š]</span>
</code></pre>
<h3 data-id="heading-5">2. SUPPORTS - æ”¯æŒäº‹åŠ¡</h3>
<p><strong>å®šä¹‰</strong>ï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šæŸ¥è¯¢æ“ä½œï¼Œå¯ä»¥æ¥å—åœ¨æœ‰äº‹åŠ¡æ—¶åŠ å…¥äº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥æ— äº‹åŠ¡è¿è¡Œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QueryService</span> {
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.SUPPORTS)</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">findOrderById</span><span class="hljs-params">(Long orderId)</span> {
        <span class="hljs-comment">// å¦‚æœæœ‰äº‹åŠ¡ï¼Œåœ¨äº‹åŠ¡ä¸­æŸ¥è¯¢ï¼ˆä¿è¯è¯»å–æœ€æ–°æ•°æ®ï¼‰</span>
        <span class="hljs-comment">// å¦‚æœæ— äº‹åŠ¡ï¼Œç›´æ¥æŸ¥è¯¢ï¼ˆå¯èƒ½è¯»å–åˆ°æ—§æ•°æ®ï¼‰</span>
        <span class="hljs-keyword">return</span> orderMapper.selectById(orderId);
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)</span>
    <span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">findUserOrders</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-comment">// åªè¯»æŸ¥è¯¢ï¼Œé€‚åˆåœ¨åªè¯»å‰¯æœ¬ä¸Šæ‰§è¡Œ</span>
        <span class="hljs-keyword">return</span> orderMapper.selectByUserId(userId);
    }
}
</code></pre>
<p><strong>é™·é˜±è­¦å‘Š</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ä½¿ç”¨ï¼šæœŸæœ›åœ¨æ— äº‹åŠ¡æ—¶è‡ªåŠ¨åˆ›å»ºäº‹åŠ¡</span>
<span class="hljs-meta">@Transactional(propagation = Propagation.SUPPORTS)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateOrderStatus</span><span class="hljs-params">(Long orderId, String status)</span> {
    <span class="hljs-comment">// å¦‚æœè°ƒç”¨æ–¹æ— äº‹åŠ¡ï¼Œæ­¤æ›´æ–°æ“ä½œä¸åœ¨äº‹åŠ¡ä¸­ï¼</span>
    orderMapper.updateStatus(orderId, status);
    <span class="hljs-comment">// å¯èƒ½é€ æˆæ•°æ®ä¸ä¸€è‡´</span>
}
</code></pre>
<h3 data-id="heading-6">3. MANDATORY - å¼ºåˆ¶è¦æ±‚äº‹åŠ¡</h3>
<p><strong>å®šä¹‰</strong>ï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå¼ºåˆ¶è¦æ±‚å¿…é¡»åœ¨äº‹åŠ¡ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œçš„æ–¹æ³•ï¼Œé˜²æ­¢è¯¯è°ƒç”¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuditService</span> {
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.MANDATORY)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">auditOperation</span><span class="hljs-params">(String operation, String operator)</span> {
        <span class="hljs-comment">// å¿…é¡»åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œå¦åˆ™æŠ›å‡ºIllegalTransactionStateException</span>
        auditMapper.insert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AuditLog</span>(operation, operator));
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BusinessService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> AuditService auditService;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">businessOperation</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ­£ç¡®ï¼šåœ¨äº‹åŠ¡ä¸­è°ƒç”¨</span>
        doBusinessLogic();
        auditService.auditOperation(<span class="hljs-string">"ä¸šåŠ¡æ“ä½œ"</span>, <span class="hljs-string">"user1"</span>); <span class="hljs-comment">// æ­£å¸¸æ‰§è¡Œ</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">businessOperationWithoutTx</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// é”™è¯¯ï¼šæ— äº‹åŠ¡ä¸Šä¸‹æ–‡</span>
        doBusinessLogic();
        auditService.auditOperation(<span class="hljs-string">"ä¸šåŠ¡æ“ä½œ"</span>, <span class="hljs-string">"user1"</span>); <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸ï¼</span>
    }
}
</code></pre>
<h3 data-id="heading-7">4. REQUIRES_NEW - æ–°å»ºäº‹åŠ¡</h3>
<p><strong>å®šä¹‰</strong>ï¼šåˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŒ‚èµ·å½“å‰äº‹åŠ¡ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šéœ€è¦ç‹¬ç«‹äº‹åŠ¡çš„æ“ä½œï¼Œå¦‚å®¡è®¡æ—¥å¿—ã€æ¶ˆæ¯å‘é€ç­‰ï¼Œä¸å¸Œæœ›å—å¤–éƒ¨äº‹åŠ¡å›æ»šå½±å“ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NotificationService</span> {
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendOrderNotification</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-keyword">try</span> {
            notificationMapper.insert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Notification</span>(order));
            <span class="hljs-comment">// å³ä½¿å¤–éƒ¨äº‹åŠ¡å›æ»šï¼Œé€šçŸ¥è®°å½•ä»ç„¶ä¿å­˜</span>
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// æœ¬åœ°äº‹åŠ¡å›æ»šï¼Œä¸å½±å“å¤–éƒ¨äº‹åŠ¡</span>
            log.error(<span class="hljs-string">"å‘é€é€šçŸ¥å¤±è´¥"</span>, e);
        }
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> NotificationService notificationService;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-keyword">try</span> {
            orderMapper.insert(order);
            inventoryService.deductStock(order.getItems());
            
            <span class="hljs-comment">// ç‹¬ç«‹äº‹åŠ¡å‘é€é€šçŸ¥</span>
            notificationService.sendOrderNotification(order);
            
        } <span class="hljs-keyword">catch</span> (InventoryException e) {
            <span class="hljs-comment">// è®¢å•åˆ›å»ºå›æ»šï¼Œä½†é€šçŸ¥å¯èƒ½å·²å‘é€ï¼ˆå¦‚æœé€šçŸ¥å…ˆæäº¤ï¼‰</span>
            log.error(<span class="hljs-string">"åº“å­˜ä¸è¶³ï¼Œè®¢å•åˆ›å»ºå¤±è´¥"</span>, e);
            <span class="hljs-keyword">throw</span> e;
        }
    }
}
</code></pre>
<p><strong>æ‰§è¡Œæ—¶åº</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">å¤–éƒ¨äº‹åŠ¡Tx1å¼€å§‹
  â†’ æ‰§è¡Œè®¢å•åˆ›å»ºé€»è¾‘
  â†’ æŒ‚èµ·Tx1ï¼Œå¼€å¯æ–°äº‹åŠ¡Tx2
<span class="hljs-code">    â†’ å‘é€é€šçŸ¥ï¼ˆTx2ï¼‰
    â†’ æäº¤Tx2
  â†’ æ¢å¤Tx1
  â†’ ç»§ç»­æ‰§è¡Œ...
  â†’ æäº¤/å›æ»šTx1ï¼ˆä¸å½±å“å·²æäº¤çš„Tx2ï¼‰
</span></code></pre>
<h3 data-id="heading-8">5. NOT_SUPPORTED - ä¸æ”¯æŒäº‹åŠ¡</h3>
<p><strong>å®šä¹‰</strong>ï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŒ‚èµ·å½“å‰äº‹åŠ¡ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šä¸é€‚åˆåœ¨äº‹åŠ¡ä¸­æ‰§è¡Œçš„æ“ä½œï¼Œå¦‚è°ƒç”¨å¤–éƒ¨ç³»ç»Ÿã€æ–‡ä»¶æ“ä½œç­‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExternalService</span> {
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.NOT_SUPPORTED)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callExternalSystem</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// ä¸åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œé¿å…é•¿äº‹åŠ¡</span>
        externalApiClient.sendOrder(order);
        <span class="hljs-comment">// å³ä½¿å¤–éƒ¨äº‹åŠ¡å›æ»šï¼Œå¤–éƒ¨è°ƒç”¨ä¸ä¼šå›æ»š</span>
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.NOT_SUPPORTED)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">generateReport</span><span class="hljs-params">(Long orderId)</span> {
        <span class="hljs-comment">// ç”Ÿæˆå¤æ‚æŠ¥è¡¨ï¼Œå¯èƒ½è€—æ—¶è¾ƒé•¿</span>
        <span class="hljs-comment">// ä¸å¸Œæœ›é˜»å¡ä¸»äº‹åŠ¡</span>
        <span class="hljs-type">Report</span> <span class="hljs-variable">report</span> <span class="hljs-operator">=</span> reportService.generateOrderReport(orderId);
        fileService.saveReport(report);
    }
}
</code></pre>
<h3 data-id="heading-9">6. NEVER - ç¦æ­¢äº‹åŠ¡</h3>
<p><strong>å®šä¹‰</strong>ï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šæ˜ç¡®ç¦æ­¢åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œçš„æ–¹æ³•ï¼Œå¦‚æŸäº›æ€§èƒ½æ•æ„Ÿçš„æ‰¹é‡æ“ä½œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BatchOperationService</span> {
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.NEVER)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchInsertOrders</span><span class="hljs-params">(List&lt;Order&gt; orders)</span> {
        <span class="hljs-comment">// æ˜ç¡®è¦æ±‚ä¸èƒ½åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ</span>
        <span class="hljs-comment">// å¦‚æœè°ƒç”¨æ–¹æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</span>
        <span class="hljs-keyword">for</span> (Order order : orders) {
            orderMapper.insert(order);
        }
    }
}

<span class="hljs-comment">// é”™è¯¯ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WrongUsageService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processBatchInTransaction</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// é”™è¯¯ï¼šåœ¨äº‹åŠ¡ä¸­è°ƒç”¨NEVERæ–¹æ³•</span>
        List&lt;Order&gt; orders = generateOrders();
        batchOperationService.batchInsertOrders(orders); <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸ï¼</span>
    }
}
</code></pre>
<h3 data-id="heading-10">7. NESTED - åµŒå¥—äº‹åŠ¡</h3>
<p><strong>å®šä¹‰</strong>ï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºæ–°äº‹åŠ¡ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå¤æ‚çš„ä¸šåŠ¡æ“ä½œï¼Œå¸Œæœ›éƒ¨åˆ†æ“ä½œå¯ä»¥ç‹¬ç«‹å›æ»šè€Œä¸å½±å“æ•´ä¸ªäº‹åŠ¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ComplexOrderService</span> {
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.NESTED)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processOrderWithNestedTransaction</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// åœ¨ä¸»äº‹åŠ¡çš„åµŒå¥—äº‹åŠ¡ä¸­æ‰§è¡Œ</span>
        orderMapper.insert(order);
        
        <span class="hljs-keyword">try</span> {
            inventoryService.deductStock(order.getItems());
        } <span class="hljs-keyword">catch</span> (InventoryException e) {
            <span class="hljs-comment">// åº“å­˜æ“ä½œå¤±è´¥ï¼Œå›æ»šåˆ°ä¿å­˜ç‚¹</span>
            <span class="hljs-comment">// ä½†è®¢å•è®°å½•å¯èƒ½ä¿ç•™ï¼ˆå–å†³äºå…·ä½“å®ç°ï¼‰</span>
            log.error(<span class="hljs-string">"åº“å­˜æ“ä½œå¤±è´¥ï¼Œå›æ»šåµŒå¥—äº‹åŠ¡"</span>, e);
            <span class="hljs-comment">// åµŒå¥—äº‹åŠ¡å›æ»šï¼Œå¤–éƒ¨äº‹åŠ¡ç»§ç»­</span>
            <span class="hljs-keyword">throw</span> e;
        }
        
        <span class="hljs-comment">// å…¶ä»–æ“ä½œ...</span>
    }
}
</code></pre>
<p><strong>é‡è¦è¯´æ˜</strong>ï¼š</p>
<ul>
<li>NESTEDä½¿ç”¨ä¿å­˜ç‚¹ï¼ˆSavepointï¼‰å®ç°</li>
<li>åµŒå¥—äº‹åŠ¡å›æ»šä¸ä¼šå¯¼è‡´å¤–éƒ¨äº‹åŠ¡å›æ»š</li>
<li>å¤–éƒ¨äº‹åŠ¡å›æ»šä¼šå¯¼è‡´æ‰€æœ‰åµŒå¥—äº‹åŠ¡å›æ»š</li>
<li>éœ€è¦æ•°æ®åº“æ”¯æŒä¿å­˜ç‚¹ï¼ˆå¤§å¤šæ•°ç°ä»£æ•°æ®åº“éƒ½æ”¯æŒï¼‰</li>
</ul>
<h2 data-id="heading-11">å®æˆ˜åœºæ™¯åˆ†æ</h2>
<h3 data-id="heading-12">åœºæ™¯ä¸€ï¼šè®¢å•åˆ›å»º + åº“å­˜æ‰£å‡ + å‘é€é€šçŸ¥</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderFullProcessService</span> {
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRED)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrderFullProcess</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// ä¸»äº‹åŠ¡ï¼šè®¢å•æ ¸å¿ƒä¸šåŠ¡</span>
        orderMapper.insert(order);
        inventoryService.deductStock(order.getItems());
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ç‹¬ç«‹äº‹åŠ¡ï¼šå‘é€é€šçŸ¥ï¼ˆå³ä½¿ä¸»äº‹åŠ¡å›æ»šï¼Œé€šçŸ¥å·²å‘é€ï¼‰</span>
            notificationService.sendOrderNotification(order);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// é€šçŸ¥å¤±è´¥ä¸å½±å“ä¸»äº‹åŠ¡</span>
            log.warn(<span class="hljs-string">"å‘é€é€šçŸ¥å¤±è´¥ï¼Œä½†è®¢å•ç»§ç»­å¤„ç†"</span>, e);
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// éäº‹åŠ¡ï¼šè°ƒç”¨å¤–éƒ¨ç³»ç»Ÿï¼ˆé¿å…é•¿äº‹åŠ¡ï¼‰</span>
            externalService.callExternalSystem(order);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.warn(<span class="hljs-string">"å¤–éƒ¨è°ƒç”¨å¤±è´¥ï¼Œä½†è®¢å•ç»§ç»­å¤„ç†"</span>, e);
        }
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InventoryService</span> {
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.MANDATORY)</span> <span class="hljs-comment">// å¿…é¡»åœ¨äº‹åŠ¡ä¸­</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deductStock</span><span class="hljs-params">(List&lt;OrderItem&gt; items)</span> {
        <span class="hljs-keyword">for</span> (OrderItem item : items) {
            <span class="hljs-keyword">if</span> (item.getQuantity() &gt; getAvailableStock(item.getProductId())) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InventoryException</span>(<span class="hljs-string">"åº“å­˜ä¸è¶³: "</span> + item.getProductId());
            }
            inventoryMapper.deductStock(item.getProductId(), item.getQuantity());
        }
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NotificationService</span> {
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span> <span class="hljs-comment">// ç‹¬ç«‹äº‹åŠ¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendOrderNotification</span><span class="hljs-params">(Order order)</span> {
        notificationMapper.insert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Notification</span>(order));
        <span class="hljs-comment">// å³ä½¿å¤–éƒ¨äº‹åŠ¡å›æ»šï¼Œé€šçŸ¥è®°å½•ä»ç„¶ä¿å­˜</span>
    }
}
</code></pre>
<h3 data-id="heading-13">åœºæ™¯äºŒï¼šæ‰¹é‡å¤„ç† + è¿›åº¦è®°å½•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BatchProcessService</span> {
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.NOT_SUPPORTED)</span> <span class="hljs-comment">// æ— äº‹åŠ¡æ‰¹é‡å¤„ç†</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processLargeBatch</span><span class="hljs-params">(List&lt;Data&gt; batchData)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">successCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> batchData.size();
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; total; i++) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ¯ä¸ªé¡¹ç›®åœ¨ç‹¬ç«‹äº‹åŠ¡ä¸­å¤„ç†</span>
                processSingleItemInTransaction(batchData.get(i));
                successCount++;
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.error(<span class="hljs-string">"å¤„ç†ç¬¬{}æ¡æ•°æ®å¤±è´¥"</span>, i, e);
            }
            
            <span class="hljs-comment">// æ— äº‹åŠ¡è®°å½•è¿›åº¦</span>
            updateProgress(i + <span class="hljs-number">1</span>, total, successCount);
        }
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span> <span class="hljs-comment">// æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹äº‹åŠ¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processSingleItemInTransaction</span><span class="hljs-params">(Data data)</span> {
        dataMapper.process(data);
        <span class="hljs-comment">// å•æ¡æ•°æ®å¤„ç†å¤±è´¥ä¸å½±å“å…¶ä»–æ•°æ®</span>
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.NOT_SUPPORTED)</span> <span class="hljs-comment">// æ— äº‹åŠ¡è¿›åº¦æ›´æ–°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateProgress</span><span class="hljs-params">(<span class="hljs-type">int</span> processed, <span class="hljs-type">int</span> total, <span class="hljs-type">int</span> success)</span> {
        progressMapper.update(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Progress</span>(processed, total, success));
        <span class="hljs-comment">// è¿›åº¦æ›´æ–°ç«‹å³æäº¤ï¼Œå³ä½¿åç»­å¤„ç†å¤±è´¥</span>
    }
}
</code></pre>
<h2 data-id="heading-14">å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-15">é™·é˜±ä¸€ï¼šREQUIRES_NEWçš„äº‹åŠ¡æ‚¬æŒ‚</h3>
<p><strong>é—®é¢˜</strong>ï¼šåœ¨REQUIRES_NEWä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œå¯¼è‡´å¤–éƒ¨äº‹åŠ¡æ— æ³•æ­£å¸¸ç»§ç»­ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">outerMethod</span><span class="hljs-params">()</span> {
    step1();
    innerMethod(); <span class="hljs-comment">// REQUIRES_NEW</span>
    step3(); <span class="hljs-comment">// å¦‚æœinnerMethodå¼‚å¸¸ï¼Œè¿™é‡Œä¸ä¼šæ‰§è¡Œ</span>
}

<span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">innerMethod</span><span class="hljs-params">()</span> {
    step2();
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å†…éƒ¨æ–¹æ³•å¤±è´¥"</span>);
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">outerMethod</span><span class="hljs-params">()</span> {
    step1();
    <span class="hljs-keyword">try</span> {
        innerMethod(); <span class="hljs-comment">// REQUIRES_NEW</span>
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.error(<span class="hljs-string">"å†…éƒ¨æ–¹æ³•æ‰§è¡Œå¤±è´¥ï¼Œç»§ç»­å¤–éƒ¨äº‹åŠ¡"</span>, e);
    }
    step3(); <span class="hljs-comment">// æ­£å¸¸æ‰§è¡Œ</span>
}
</code></pre>
<h3 data-id="heading-16">é™·é˜±äºŒï¼šNESTEDäº‹åŠ¡çš„è¯¯è§£</h3>
<p><strong>é—®é¢˜</strong>ï¼šè¯¯ä»¥ä¸ºNESTEDäº‹åŠ¡å®Œå…¨ç‹¬ç«‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ç†è§£</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parentMethod</span><span class="hljs-params">()</span> {
    parentStep();
    nestedMethod(); <span class="hljs-comment">// NESTED</span>
    parentStep(); <span class="hljs-comment">// è®¤ä¸ºnestedMethodå›æ»šä¸å½±å“è¿™é‡Œ</span>
}

<span class="hljs-meta">@Transactional(propagation = Propagation.NESTED)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">nestedMethod</span><span class="hljs-params">()</span> {
    nestedStep();
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"åµŒå¥—äº‹åŠ¡å¤±è´¥"</span>);
    <span class="hljs-comment">// å®é™…ä¼šå›æ»šåˆ°ä¿å­˜ç‚¹ï¼Œåç»­parentStepä¸ä¼šæ‰§è¡Œï¼</span>
}
</code></pre>
<p><strong>æ­£ç¡®ç†è§£</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parentMethod</span><span class="hljs-params">()</span> {
    parentStep();
    <span class="hljs-keyword">try</span> {
        nestedMethod(); <span class="hljs-comment">// NESTED</span>
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.error(<span class="hljs-string">"åµŒå¥—äº‹åŠ¡å¤±è´¥ï¼Œç»§ç»­ä¸»äº‹åŠ¡"</span>, e);
    }
    parentStep(); <span class="hljs-comment">// è¿™é‡Œä¼šæ‰§è¡Œ</span>
}
</code></pre>
<h3 data-id="heading-17">é™·é˜±ä¸‰ï¼šä¼ æ’­æœºåˆ¶ç»„åˆä¸å½“</h3>
<p><strong>é—®é¢˜</strong>ï¼šä¼ æ’­æœºåˆ¶ç»„åˆå¯¼è‡´äº‹åŠ¡è¾¹ç•Œæ··ä¹±ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ··ä¹±çš„äº‹åŠ¡è¾¹ç•Œ</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfusedService</span> {
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRED)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodA</span><span class="hljs-params">()</span> {
        methodB(); <span class="hljs-comment">// SUPPORTS</span>
        methodC(); <span class="hljs-comment">// REQUIRES_NEW</span>
        methodD(); <span class="hljs-comment">// NEVER - è¿™é‡Œä¼šæŠ›å¼‚å¸¸ï¼</span>
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.SUPPORTS)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodB</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¯èƒ½ä¸åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ</span>
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span>  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodC</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ–°äº‹åŠ¡</span>
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.NEVER)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodD</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ç¦æ­¢äº‹åŠ¡ - åœ¨methodAäº‹åŠ¡ä¸­è°ƒç”¨ä¼šæŠ›å¼‚å¸¸ï¼</span>
    }
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šæ˜ç¡®äº‹åŠ¡è¾¹ç•Œï¼Œåˆç†è®¾è®¡æœåŠ¡å±‚ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClearBoundaryService</span> {
    
    <span class="hljs-comment">// äº‹åŠ¡è¾¹ç•Œæ¸…æ™°çš„æœåŠ¡</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transactionalProcess</span><span class="hljs-params">()</span> {
        transactionalStep1();
        transactionalStep2();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">nonTransactionalProcess</span><span class="hljs-params">()</span> {
        nonTransactionalStep1();
        independentTransactionalStep();
        nonTransactionalStep2();
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">independentTransactionalStep</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ç‹¬ç«‹äº‹åŠ¡æ“ä½œ</span>
    }
}
</code></pre>
<h2 data-id="heading-18">æ€§èƒ½è€ƒè™‘ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-19">1. äº‹åŠ¡ç²’åº¦çš„æ§åˆ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸æ¨èï¼šè¿‡å¤§çš„äº‹åŠ¡</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processLargeBatch</span><span class="hljs-params">(List&lt;Data&gt; dataList)</span> {
    <span class="hljs-keyword">for</span> (Data data : dataList) {
        processSingle(data); <span class="hljs-comment">// æ¯ä¸ªå¤„ç†éƒ½åœ¨å¤§äº‹åŠ¡ä¸­</span>
    }
    <span class="hljs-comment">// äº‹åŠ¡è¿‡å¤§ï¼Œé”æŒæœ‰æ—¶é—´è¿‡é•¿</span>
}

<span class="hljs-comment">// æ¨èï¼šåˆé€‚çš„äº‹åŠ¡ç²’åº¦</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processLargeBatch</span><span class="hljs-params">(List&lt;Data&gt; dataList)</span> {
    <span class="hljs-keyword">for</span> (Data data : dataList) {
        processSingleInTransaction(data); <span class="hljs-comment">// æ¯ä¸ªç‹¬ç«‹äº‹åŠ¡</span>
    }
}

<span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processSingleInTransaction</span><span class="hljs-params">(Data data)</span> {
    processSingle(data);
    <span class="hljs-comment">// çŸ­äº‹åŠ¡ï¼Œå¿«é€Ÿé‡Šæ”¾é”</span>
}
</code></pre>
<h3 data-id="heading-20">2. åªè¯»äº‹åŠ¡çš„ä¼˜åŒ–</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸ¥è¯¢æœåŠ¡ä½¿ç”¨åªè¯»äº‹åŠ¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QueryService</span> {
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">findOrderById</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-keyword">return</span> orderMapper.selectById(id);
    }
    
    <span class="hljs-meta">@Transactional(readOnly = true)</span> 
    <span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">findComplexOrders</span><span class="hljs-params">(QueryCondition condition)</span> {
        <span class="hljs-comment">// å¤æ‚æŸ¥è¯¢åœ¨åªè¯»äº‹åŠ¡ä¸­æ‰§è¡Œ</span>
        <span class="hljs-comment">// å¯èƒ½è·¯ç”±åˆ°åªè¯»æ•°æ®åº“å‰¯æœ¬</span>
        <span class="hljs-keyword">return</span> orderMapper.selectByComplexCondition(condition);
    }
}
</code></pre>
<h3 data-id="heading-21">3. å¼‚å¸¸å¤„ç†ç­–ç•¥</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RobustService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">robustProcess</span><span class="hljs-params">()</span> {
        criticalOperation();
        
        <span class="hljs-keyword">try</span> {
            optionalOperationWithNewTx();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.warn(<span class="hljs-string">"å¯é€‰æ“ä½œå¤±è´¥ï¼Œç»§ç»­ä¸»æµç¨‹"</span>, e);
        }
        
        <span class="hljs-keyword">try</span> {
            externalCallWithoutTx();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.warn(<span class="hljs-string">"å¤–éƒ¨è°ƒç”¨å¤±è´¥ï¼Œç»§ç»­ä¸»æµç¨‹"</span>, e);
        }
        
        anotherCriticalOperation();
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">optionalOperationWithNewTx</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ç‹¬ç«‹äº‹åŠ¡ï¼Œå¤±è´¥ä¸å½±å“ä¸»æµç¨‹</span>
    }
    
    <span class="hljs-meta">@Transactional(propagation = Propagation.NOT_SUPPORTED)</span>  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">externalCallWithoutTx</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ— äº‹åŠ¡å¤–éƒ¨è°ƒç”¨</span>
    }
}
</code></pre>
<h2 data-id="heading-22">è°ƒè¯•ä¸ç›‘æ§</h2>
<h3 data-id="heading-23">äº‹åŠ¡è°ƒè¯•æŠ€å·§</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">debugTransactionMethod</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// æŸ¥çœ‹å½“å‰äº‹åŠ¡çŠ¶æ€</span>
    <span class="hljs-type">TransactionStatus</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> TransactionAspectSupport.currentTransactionStatus();
    log.debug(<span class="hljs-string">"äº‹åŠ¡ä¿¡æ¯: {}"</span>, status);
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ˜¯æ–°å»ºäº‹åŠ¡</span>
    <span class="hljs-keyword">if</span> (status.isNewTransaction()) {
        log.debug(<span class="hljs-string">"è¿™æ˜¯æ–°åˆ›å»ºçš„äº‹åŠ¡"</span>);
    } <span class="hljs-keyword">else</span> {
        log.debug(<span class="hljs-string">"è¿™æ˜¯å·²å­˜åœ¨çš„äº‹åŠ¡"</span>);
    }
    
    <span class="hljs-comment">// æ£€æŸ¥äº‹åŠ¡åç§°</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">transactionName</span> <span class="hljs-operator">=</span> status.getTransactionName();
    log.debug(<span class="hljs-string">"äº‹åŠ¡åç§°: {}"</span>, transactionName);
}
</code></pre>
<h3 data-id="heading-24">æ—¥å¿—é…ç½®</h3>
<pre><code class="hljs language-properties" lang="properties"># application.properties
# å¼€å¯äº‹åŠ¡è°ƒè¯•æ—¥å¿—
logging.level.org.springframework.transaction.interceptor=TRACE
logging.level.org.springframework.transaction.support=DEBUG
logging.level.org.springframework.orm.jpa=DEBUG
logging.level.org.springframework.jdbc.datasource=DEBUG

# æ˜¾ç¤ºäº‹åŠ¡è¾¹ç•Œ
logging.level.org.springframework.transaction=DEBUG
</code></pre>
<h3 data-id="heading-25">ç›‘æ§æŒ‡æ ‡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionMetrics</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MeterRegistry meterRegistry;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Counter&gt; propagationCounters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitorTransaction</span><span class="hljs-params">(TransactionEvent event)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">propagation</span> <span class="hljs-operator">=</span> getPropagationType(event);
        <span class="hljs-type">Counter</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> propagationCounters.computeIfAbsent(
            propagation, 
            key -&gt; meterRegistry.counter(<span class="hljs-string">"transaction.propagation"</span>, <span class="hljs-string">"type"</span>, key)
        );
        counter.increment();
    }
}
</code></pre>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>Springçš„7ç§äº‹åŠ¡ä¼ æ’­æœºåˆ¶ä¸ºå¤æ‚ä¸šåŠ¡åœºæ™¯æä¾›äº†çµæ´»çš„äº‹åŠ¡ç®¡ç†æ–¹æ¡ˆã€‚æ­£ç¡®ç†è§£å’Œä½¿ç”¨è¿™äº›ä¼ æ’­è¡Œä¸ºï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼š</p>
<ol>
<li><strong>REQUIRED</strong> - å¤§å¤šæ•°ä¸šåŠ¡æ–¹æ³•çš„é»˜è®¤é€‰æ‹©</li>
<li><strong>SUPPORTS</strong> - é€‚åˆæŸ¥è¯¢æ“ä½œï¼Œçµæ´»é€‚åº”äº‹åŠ¡ä¸Šä¸‹æ–‡</li>
<li><strong>MANDATORY</strong> - å¼ºåˆ¶äº‹åŠ¡ç¯å¢ƒï¼Œé˜²æ­¢è¯¯ç”¨</li>
<li><strong>REQUIRES_NEW</strong> - ç‹¬ç«‹äº‹åŠ¡æ“ä½œï¼Œé¿å…ç›¸äº’å½±å“</li>
<li><strong>NOT_SUPPORTED</strong> - éäº‹åŠ¡æ“ä½œï¼Œé¿å…é•¿äº‹åŠ¡</li>
<li><strong>NEVER</strong> - æ˜ç¡®ç¦æ­¢äº‹åŠ¡ï¼Œä¿è¯æ— äº‹åŠ¡æ‰§è¡Œ</li>
<li><strong>NESTED</strong> - å¤æ‚äº‹åŠ¡åœºæ™¯ï¼Œéƒ¨åˆ†å›æ»šèƒ½åŠ›</li>
</ol>
<p>è®°ä½ï¼Œæ²¡æœ‰"æœ€å¥½"çš„ä¼ æ’­æœºåˆ¶ï¼Œåªæœ‰"æœ€é€‚åˆ"å½“å‰åœºæ™¯çš„é€‰æ‹©ã€‚åˆç†ç»„åˆä½¿ç”¨è¿™äº›æœºåˆ¶ï¼Œå¯ä»¥æ„å»ºå‡ºæ—¢å¥å£®åˆé«˜æ€§èƒ½çš„äº‹åŠ¡å¤„ç†ç³»ç»Ÿã€‚</p>
<hr/>
<p><strong>ä¸‹æœŸé¢„å‘Š</strong>ï¼šã€ŠSpringäº‹åŠ¡éš”ç¦»çº§åˆ«å…¨è§£æï¼šä»è¯»æœªæäº¤åˆ°åºåˆ—åŒ–ã€‹</p>
<p>å¦‚æœè§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ï¼æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„å®æˆ˜ç»éªŒå’Œé‡åˆ°çš„é—®é¢˜ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linux é˜²ç«å¢™åŒé›„ï¼šiptables ä¸ firewalld é…ç½®æ¡ˆä¾‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7571352754896355354</link>    <guid>https://juejin.cn/post/7571352754896355354</guid>    <pubDate>2025-11-11T23:33:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571352754896355354" data-draft-id="7570909641683173416" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linux é˜²ç«å¢™åŒé›„ï¼šiptables ä¸ firewalld é…ç½®æ¡ˆä¾‹è¯¦è§£"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2025-11-11T23:33:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LCGå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/3097802498120889"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linux é˜²ç«å¢™åŒé›„ï¼šiptables ä¸ firewalld é…ç½®æ¡ˆä¾‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097802498120889/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LCGå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T23:33:55.000Z" title="Tue Nov 11 2025 23:33:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. Linux é˜²ç«å¢™åŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-1">1.1 é˜²ç«å¢™çš„é‡è¦æ€§</h3>
<p>åœ¨å½“ä»Šçš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œé˜²ç«å¢™æ˜¯ä¿æŠ¤ç³»ç»Ÿå®‰å…¨çš„ç¬¬ä¸€é“é˜²çº¿ã€‚å®ƒé€šè¿‡æ§åˆ¶ç½‘ç»œæµé‡è¿›å‡ºç³»ç»Ÿï¼Œæœ‰æ•ˆé˜»æ­¢æœªç»æˆæƒçš„è®¿é—®å’Œæ¶æ„æ”»å‡»ã€‚</p>
<h3 data-id="heading-2">1.2 iptables ä¸ firewalld çš„å…³ç³»</h3>
<p>iptables æ˜¯ Linux å†…æ ¸ä¸­ç½‘ç»œåŒ…è¿‡æ»¤ç³»ç»Ÿçš„ç”¨æˆ·ç©ºé—´å·¥å…·ï¼Œè€Œ firewalld æ˜¯åŸºäº iptables çš„é«˜çº§ç®¡ç†å·¥å…·ï¼Œæä¾›äº†æ›´å‹å¥½çš„åŠ¨æ€ç®¡ç†æ¥å£ã€‚</p>
<h2 data-id="heading-3">2. iptables é…ç½®è¯¦è§£</h2>
<h3 data-id="heading-4">2.1 iptables åŸºç¡€æ¶æ„</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[ç½‘ç»œæ•°æ®åŒ…] --&gt; B{iptables é“¾é€‰æ‹©}
    B --&gt; C[INPUT é“¾]
    B --&gt; D[FORWARD é“¾]
    B --&gt; E[OUTPUT é“¾]
    
    C --&gt; F{INPUT è§„åˆ™åŒ¹é…}
    F --&gt; G[è§„åˆ™1: å…è®¸SSH]
    F --&gt; H[è§„åˆ™2: å…è®¸HTTP]
    F --&gt; I[è§„åˆ™3: é»˜è®¤æ‹’ç»]
    G --&gt; J[æ¥å—]
    H --&gt; J
    I --&gt; K[æ‹’ç»]
    
    D --&gt; L{FORWARD è§„åˆ™åŒ¹é…}
    L --&gt; M[è§„åˆ™1: å…è®¸è½¬å‘]
    L --&gt; N[è§„åˆ™2: é»˜è®¤æ‹’ç»]
    M --&gt; O[æ¥å—]
    N --&gt; P[æ‹’ç»]
    
    E --&gt; Q{OUTPUT è§„åˆ™åŒ¹é…}
    Q --&gt; R[è§„åˆ™1: å…è®¸æ‰€æœ‰]
    R --&gt; S[æ¥å—]
    
    style A fill:#e1f5fe
    style J fill:#c8e6c9
    style K fill:#ffcdd2
    style O fill:#c8e6c9
    style P fill:#ffcdd2
    style S fill:#c8e6c9
    style G fill:#4fc3f7
    style H fill:#4fc3f7
    style I fill:#ff9800
    style M fill:#4fc3f7
    style N fill:#ff9800
    style R fill:#4fc3f7
</code></pre>
<h3 data-id="heading-5">2.2 åˆ›å»ºåŸºç¡€ iptables é…ç½®æ–‡ä»¶</h3>
<p><strong>åˆ›å»ºæ–‡ä»¶ï¼š</strong> <code>/root/iptables-basic-setup.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># iptables åŸºç¡€é˜²ç«å¢™é…ç½®è„šæœ¬</span>
<span class="hljs-comment"># ä½œè€…ï¼šLinux ç³»ç»Ÿç®¡ç†å‘˜</span>
<span class="hljs-comment"># æè¿°ï¼šé…ç½®åŸºæœ¬çš„é˜²ç«å¢™è§„åˆ™ï¼Œä¿æŠ¤æœåŠ¡å™¨å®‰å…¨</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹é…ç½® iptables é˜²ç«å¢™..."</span>

<span class="hljs-comment"># 1. æ¸…é™¤æ‰€æœ‰ç°æœ‰è§„åˆ™</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤1: æ¸…é™¤æ‰€æœ‰ç°æœ‰è§„åˆ™"</span>
iptables -F
iptables -X
iptables -t nat -F
iptables -t nat -X
iptables -t mangle -F
iptables -t mangle -X

<span class="hljs-comment"># 2. è®¾ç½®é»˜è®¤ç­–ç•¥</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤2: è®¾ç½®é»˜è®¤ç­–ç•¥"</span>
iptables -P INPUT DROP
iptables -P FORWARD DROP
iptables -P OUTPUT ACCEPT

<span class="hljs-comment"># 3. å…è®¸æœ¬åœ°å›ç¯æ¥å£</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤3: é…ç½®æœ¬åœ°å›ç¯æ¥å£è§„åˆ™"</span>
iptables -A INPUT -i lo -j ACCEPT
iptables -A OUTPUT -o lo -j ACCEPT

<span class="hljs-comment"># 4. å…è®¸å·²å»ºç«‹çš„è¿æ¥å’Œç›¸å…³çš„è¿æ¥</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤4: å…è®¸å·²å»ºç«‹çš„è¿æ¥"</span>
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

<span class="hljs-comment"># 5. å…è®¸ SSH è¿æ¥ (ç«¯å£22)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤5: é…ç½® SSH è®¿é—®è§„åˆ™"</span>
iptables -A INPUT -p tcp --dport 22 -m state --state NEW -j ACCEPT

<span class="hljs-comment"># 6. å…è®¸ HTTP å’Œ HTTPS è®¿é—®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤6: é…ç½® Web æœåŠ¡è®¿é—®è§„åˆ™"</span>
iptables -A INPUT -p tcp --dport 80 -m state --state NEW -j ACCEPT
iptables -A INPUT -p tcp --dport 443 -m state --state NEW -j ACCEPT

<span class="hljs-comment"># 7. å…è®¸ ICMP (ping)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤7: é…ç½® ICMP è§„åˆ™"</span>
iptables -A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT

<span class="hljs-comment"># 8. è®°å½•è¢«æ‹’ç»çš„æ•°æ®åŒ…</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤8: é…ç½®æ—¥å¿—è®°å½•è§„åˆ™"</span>
iptables -A INPUT -j LOG --log-prefix <span class="hljs-string">"IPTABLES-DROPPED: "</span> --log-level 4

<span class="hljs-comment"># 9. æ˜¾ç¤ºè§„åˆ™åˆ—è¡¨</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤9: æ˜¾ç¤ºå½“å‰è§„åˆ™"</span>
iptables -L -v

<span class="hljs-built_in">echo</span> <span class="hljs-string">"iptables åŸºç¡€é…ç½®å®Œæˆï¼"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯·æ³¨æ„ï¼šå½“å‰ SSH è¿æ¥ä¸ä¼šè¢«ä¸­æ–­ï¼Œä½†æ–°è¿æ¥å°†å—è§„åˆ™é™åˆ¶ã€‚"</span>
</code></pre>
<h3 data-id="heading-6">2.3 åˆ›å»ºé«˜çº§ iptables é…ç½®</h3>
<p><strong>åˆ›å»ºæ–‡ä»¶ï¼š</strong> <code>/root/iptables-advanced-setup.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># iptables é«˜çº§é˜²ç«å¢™é…ç½®è„šæœ¬</span>
<span class="hljs-comment"># åŒ…å«ç«¯å£é™åˆ¶ã€è¿æ¥é™åˆ¶å’Œæ”»å‡»é˜²æŠ¤</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹é…ç½®é«˜çº§ iptables é˜²ç«å¢™..."</span>

<span class="hljs-comment"># æ¸…é™¤ç°æœ‰è§„åˆ™</span>
iptables -F
iptables -X

<span class="hljs-comment"># é»˜è®¤ç­–ç•¥</span>
iptables -P INPUT DROP
iptables -P FORWARD DROP
iptables -P OUTPUT ACCEPT

<span class="hljs-comment"># 1. åŸºç¡€è§„åˆ™</span>
iptables -A INPUT -i lo -j ACCEPT
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

<span class="hljs-comment"># 2. ä¿æŠ¤ against å¸¸è§æ”»å‡»</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®å¸¸è§æ”»å‡»é˜²æŠ¤..."</span>

<span class="hljs-comment"># 2.1 é˜²æ­¢ SYN æ´ªæ°´æ”»å‡»</span>
iptables -A INPUT -p tcp --syn -m <span class="hljs-built_in">limit</span> --<span class="hljs-built_in">limit</span> 1/s --limit-burst 3 -j ACCEPT
iptables -A INPUT -p tcp --syn -j DROP

<span class="hljs-comment"># 2.2 é˜²æ­¢ ping æ´ªæ°´æ”»å‡»</span>
iptables -A INPUT -p icmp --icmp-type echo-request -m <span class="hljs-built_in">limit</span> --<span class="hljs-built_in">limit</span> 1/s -j ACCEPT

<span class="hljs-comment"># 2.3 é˜²æ­¢ç«¯å£æ‰«æ</span>
iptables -A INPUT -p tcp --tcp-flags ALL FIN,URG,PSH -j DROP
iptables -A INPUT -p tcp --tcp-flags ALL ALL -j DROP
iptables -A INPUT -p tcp --tcp-flags ALL NONE -j DROP

<span class="hljs-comment"># 3. æœåŠ¡ç«¯å£é…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®æœåŠ¡ç«¯å£..."</span>

<span class="hljs-comment"># 3.1 SSH ä¿æŠ¤ - é™åˆ¶è¿æ¥é¢‘ç‡</span>
iptables -A INPUT -p tcp --dport 22 -m state --state NEW -m recent --<span class="hljs-built_in">set</span> --name SSH
iptables -A INPUT -p tcp --dport 22 -m state --state NEW -m recent --update --seconds 60 --hitcount 4 --rttl --name SSH -j DROP
iptables -A INPUT -p tcp --dport 22 -j ACCEPT

<span class="hljs-comment"># 3.2 Web æœåŠ¡</span>
iptables -A INPUT -p tcp --dport 80 -m state --state NEW -j ACCEPT
iptables -A INPUT -p tcp --dport 443 -m state --state NEW -j ACCEPT

<span class="hljs-comment"># 3.3 æ•°æ®åº“æœåŠ¡ (MySQL)</span>
iptables -A INPUT -p tcp --dport 3306 -s 192.168.1.0/24 -j ACCEPT

<span class="hljs-comment"># 3.4 è‡ªå®šä¹‰åº”ç”¨ç«¯å£</span>
iptables -A INPUT -p tcp --dport 8080 -j ACCEPT
iptables -A INPUT -p tcp --dport 8443 -j ACCEPT

<span class="hljs-comment"># 4. æ—¶é—´é™åˆ¶è§„åˆ™ç¤ºä¾‹</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®æ—¶é—´é™åˆ¶è§„åˆ™..."</span>

<span class="hljs-comment"># å…è®¸åŠå…¬æ—¶é—´è®¿é—®ç‰¹å®šæœåŠ¡ (9:00-18:00)</span>
iptables -A INPUT -p tcp --dport 9090 -m time --timestart 09:00 --timestop 18:00 --weekdays Mon,Tue,Wed,Thu,Fri -j ACCEPT

<span class="hljs-comment"># 5. åœ°ç†é™åˆ¶ç¤ºä¾‹ (éœ€è¦ xt_geoip æ¨¡å—)</span>
<span class="hljs-comment"># iptables -A INPUT -p tcp --dport 80 -m geoip --src-cc CN,US,JP -j ACCEPT</span>

<span class="hljs-comment"># 6. è®°å½•è¢«æ‹’ç»çš„è¿æ¥</span>
iptables -A INPUT -m <span class="hljs-built_in">limit</span> --<span class="hljs-built_in">limit</span> 5/min -j LOG --log-prefix <span class="hljs-string">"iptables denied: "</span> --log-level 7

<span class="hljs-comment"># ä¿å­˜è§„åˆ™</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¿å­˜è§„åˆ™..."</span>
service iptables save

<span class="hljs-comment"># æ˜¾ç¤ºæœ€ç»ˆè§„åˆ™</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æœ€ç»ˆé˜²ç«å¢™è§„åˆ™ï¼š"</span>
iptables -L -v -n

<span class="hljs-built_in">echo</span> <span class="hljs-string">"é«˜çº§ iptables é…ç½®å®Œæˆï¼"</span>
</code></pre>
<h3 data-id="heading-7">2.4 åˆ›å»º iptables æŒä¹…åŒ–è„šæœ¬</h3>
<p><strong>åˆ›å»ºæ–‡ä»¶ï¼š</strong> <code>/root/iptables-persistent-setup.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># iptables è§„åˆ™æŒä¹…åŒ–é…ç½®è„šæœ¬</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½® iptables è§„åˆ™æŒä¹…åŒ–..."</span>

<span class="hljs-comment"># æ£€æŸ¥ç³»ç»Ÿç±»å‹</span>
<span class="hljs-keyword">if</span> [ -f /etc/redhat-release ]; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># CentOS/RHEL ç³»ç»Ÿ</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ° CentOS/RHEL ç³»ç»Ÿ"</span>
    
    <span class="hljs-comment"># å®‰è£… iptables-services</span>
    yum install -y iptables-services
    
    <span class="hljs-comment"># ä¿å­˜å½“å‰è§„åˆ™</span>
    iptables-save &gt; /etc/sysconfig/iptables
    
    <span class="hljs-comment"># å¯ç”¨æœåŠ¡</span>
    systemctl <span class="hljs-built_in">enable</span> iptables
    systemctl start iptables
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è§„åˆ™å·²ä¿å­˜åˆ° /etc/sysconfig/iptables"</span>
    
<span class="hljs-keyword">elif</span> [ -f /etc/debian_version ]; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># Debian/Ubuntu ç³»ç»Ÿ</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ° Debian/Ubuntu ç³»ç»Ÿ"</span>
    
    <span class="hljs-comment"># å®‰è£… iptables-persistent</span>
    apt-get update
    apt-get install -y iptables-persistent
    
    <span class="hljs-comment"># ä¿å­˜è§„åˆ™</span>
    iptables-save &gt; /etc/iptables/rules.v4
    ip6tables-save &gt; /etc/iptables/rules.v6
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è§„åˆ™å·²ä¿å­˜åˆ° /etc/iptables/rules.v4"</span>
    
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æœªçŸ¥çš„ç³»ç»Ÿç±»å‹ï¼Œè¯·æ‰‹åŠ¨ä¿å­˜è§„åˆ™ã€‚"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯ä»¥ä½¿ç”¨: iptables-save &gt; /path/to/iptables.rules"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># åˆ›å»ºå¤‡ä»½</span>
BACKUP_DIR=<span class="hljs-string">"/root/iptables-backup"</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$BACKUP_DIR</span>
iptables-save &gt; <span class="hljs-variable">$BACKUP_DIR</span>/iptables-backup-$(<span class="hljs-built_in">date</span> +%Y%m%d-%H%M%S).rules

<span class="hljs-built_in">echo</span> <span class="hljs-string">"iptables æŒä¹…åŒ–é…ç½®å®Œæˆï¼"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½æ–‡ä»¶ä¿å­˜åœ¨: <span class="hljs-variable">$BACKUP_DIR</span>"</span>
</code></pre>
<h2 data-id="heading-8">3. firewalld é…ç½®è¯¦è§£</h2>
<h3 data-id="heading-9">3.1 firewalld æ ¸å¿ƒæ¦‚å¿µ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[firewalld å®ˆæŠ¤è¿›ç¨‹] --&gt; B[è¿è¡Œæ—¶é…ç½®]
    A --&gt; C[æ°¸ä¹…é…ç½®]
    
    B --&gt; D[ç«‹å³ç”Ÿæ•ˆ]
    B --&gt; E[é‡å¯åä¸¢å¤±]
    
    C --&gt; F[é‡å¯åç”Ÿæ•ˆ]
    C --&gt; G[éœ€è¦é‡è½½]
    
    H[é˜²ç«å¢™è§„åˆ™] --&gt; I[ Zones åŒºåŸŸ ]
    H --&gt; J[ Services æœåŠ¡ ]
    H --&gt; K[ Ports ç«¯å£ ]
    H --&gt; L[ Rich Rules å¯Œè§„åˆ™ ]
    
    I --&gt; M[public]
    I --&gt; N[internal]
    I --&gt; O[dmz]
    I --&gt; P[trusted]
    
    J --&gt; Q[ssh]
    J --&gt; R[http]
    J --&gt; S[https]
    
    K --&gt; T[ç«¯å£è½¬å‘]
    K --&gt; U[ç›´æ¥è§„åˆ™]
    
    L --&gt; V[å¤æ‚è§„åˆ™]
    L --&gt; W[æºåœ°å€é™åˆ¶]
    L --&gt; X[æ—¶é—´é™åˆ¶]
    
    style A fill:#1565c0
    style I fill:#00796b
    style J fill:#d84315
    style K fill:#6a1b9a
    style L fill:#ff8f00
    style M fill:#4caf50
    style N fill:#4caf50
    style O fill:#4caf50
    style P fill:#4caf50
</code></pre>
<h3 data-id="heading-10">3.2 åŸºç¡€ firewalld é…ç½®è„šæœ¬</h3>
<p><strong>åˆ›å»ºæ–‡ä»¶ï¼š</strong> <code>/root/firewalld-basic-setup.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># firewalld åŸºç¡€é…ç½®è„šæœ¬</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹é…ç½® firewalld é˜²ç«å¢™..."</span>

<span class="hljs-comment"># 1. å¯åŠ¨å’Œå¯ç”¨ firewalld</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤1: å¯åŠ¨ firewalld æœåŠ¡"</span>
systemctl start firewalld
systemctl <span class="hljs-built_in">enable</span> firewalld

<span class="hljs-comment"># 2. æ£€æŸ¥ firewalld çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤2: æ£€æŸ¥æœåŠ¡çŠ¶æ€"</span>
firewall-cmd --state
systemctl status firewalld --no-pager -l

<span class="hljs-comment"># 3. æŸ¥çœ‹é»˜è®¤åŒºåŸŸ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤3: æŸ¥çœ‹å½“å‰åŒºåŸŸé…ç½®"</span>
firewall-cmd --get-default-zone
firewall-cmd --get-active-zones

<span class="hljs-comment"># 4. é…ç½®é»˜è®¤åŒºåŸŸä¸º public</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤4: é…ç½®é»˜è®¤åŒºåŸŸ"</span>
firewall-cmd --set-default-zone=public

<span class="hljs-comment"># 5. æ·»åŠ åŸºæœ¬æœåŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤5: æ·»åŠ åŸºæœ¬æœåŠ¡åˆ°é˜²ç«å¢™"</span>

<span class="hljs-comment"># 5.1 SSH æœåŠ¡</span>
firewall-cmd --permanent --add-service=ssh
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ·»åŠ  SSH æœåŠ¡"</span>

<span class="hljs-comment"># 5.2 HTTP æœåŠ¡</span>
firewall-cmd --permanent --add-service=http
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ·»åŠ  HTTP æœåŠ¡"</span>

<span class="hljs-comment"># 5.3 HTTPS æœåŠ¡</span>
firewall-cmd --permanent --add-service=https
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ·»åŠ  HTTPS æœåŠ¡"</span>

<span class="hljs-comment"># 6. ç§»é™¤ä¸éœ€è¦çš„æœåŠ¡ (ç¤ºä¾‹)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤6: ç§»é™¤ä¸éœ€è¦çš„æœåŠ¡"</span>
firewall-cmd --permanent --remove-service=dhcpv6-client 2&gt;/dev/null || <span class="hljs-literal">true</span>

<span class="hljs-comment"># 7. æ·»åŠ è‡ªå®šä¹‰ç«¯å£</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤7: æ·»åŠ è‡ªå®šä¹‰ç«¯å£"</span>
firewall-cmd --permanent --add-port=8080/tcp
firewall-cmd --permanent --add-port=8443/tcp
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ·»åŠ ç«¯å£ 8080/tcp å’Œ 8443/tcp"</span>

<span class="hljs-comment"># 8. é…ç½®å¯Œè§„åˆ™ (Rich Rules)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤8: é…ç½®å¯Œè§„åˆ™"</span>

<span class="hljs-comment"># 8.1 é™åˆ¶ SSH è®¿é—®æ¥æº</span>
firewall-cmd --permanent --add-rich-rule=<span class="hljs-string">'rule family="ipv4" source address="192.168.1.0/24" service name="ssh" accept'</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é™åˆ¶ SSH è®¿é—®æ¥æºä¸º 192.168.1.0/24"</span>

<span class="hljs-comment"># 8.2 æ‹’ç»å…¶ä»–æ‰€æœ‰æµé‡</span>
firewall-cmd --permanent --add-rich-rule=<span class="hljs-string">'rule family="ipv4" source address="0.0.0.0/0" service name="ssh" drop'</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‹’ç»å…¶ä»–æ¥æºçš„ SSH è®¿é—®"</span>

<span class="hljs-comment"># 9. é‡è½½é˜²ç«å¢™é…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤9: é‡è½½é˜²ç«å¢™é…ç½®"</span>
firewall-cmd --reload

<span class="hljs-comment"># 10. éªŒè¯é…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤10: éªŒè¯é˜²ç«å¢™é…ç½®"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰åŒºåŸŸæœåŠ¡:"</span>
firewall-cmd --list-services
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰åŒºåŸŸç«¯å£:"</span>
firewall-cmd --list-ports
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯Œè§„åˆ™:"</span>
firewall-cmd --list-rich-rules

<span class="hljs-built_in">echo</span> <span class="hljs-string">"firewalld åŸºç¡€é…ç½®å®Œæˆï¼"</span>
</code></pre>
<h3 data-id="heading-11">3.3 é«˜çº§ firewalld é…ç½®è„šæœ¬</h3>
<p><strong>åˆ›å»ºæ–‡ä»¶ï¼š</strong> <code>/root/firewalld-advanced-setup.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># firewalld é«˜çº§é…ç½®è„šæœ¬</span>
<span class="hljs-comment"># åŒ…å«å¤šä¸ªåŒºåŸŸé…ç½®ã€ç«¯å£è½¬å‘å’Œé«˜çº§ç‰¹æ€§</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹é«˜çº§ firewalld é…ç½®..."</span>

<span class="hljs-comment"># ç¡®ä¿ firewalld è¿è¡Œ</span>
systemctl start firewalld

<span class="hljs-comment"># 1. åˆ›å»ºè‡ªå®šä¹‰åŒºåŸŸ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤1: åˆ›å»ºè‡ªå®šä¹‰åŒºåŸŸ"</span>

<span class="hljs-comment"># 1.1 åˆ›å»º webzone åŒºåŸŸ</span>
firewall-cmd --permanent --new-zone=webzone
firewall-cmd --permanent --new-zone=internal

<span class="hljs-comment"># 1.2 é…ç½® webzone åŒºåŸŸ</span>
firewall-cmd --permanent --zone=webzone --add-service=http
firewall-cmd --permanent --zone=webzone --add-service=https
firewall-cmd --permanent --zone=webzone --add-port=8080/tcp
firewall-cmd --permanent --zone=webzone --set-target=ACCEPT

<span class="hljs-comment"># 1.3 é…ç½® internal åŒºåŸŸ</span>
firewall-cmd --permanent --zone=internal --add-service=ssh
firewall-cmd --permanent --zone=internal --add-service=mysql
firewall-cmd --permanent --zone=internal --add-service=postgresql
firewall-cmd --permanent --zone=internal --add-source=192.168.1.0/24

<span class="hljs-comment"># 2. é…ç½®ç«¯å£è½¬å‘</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤2: é…ç½®ç«¯å£è½¬å‘"</span>

<span class="hljs-comment"># 2.1 å¯ç”¨ IP ä¼ªè£…</span>
firewall-cmd --permanent --zone=public --add-masquerade

<span class="hljs-comment"># 2.2 é…ç½®ç«¯å£è½¬å‘ (å°†å…¬ç½‘80ç«¯å£è½¬å‘åˆ°å†…ç½‘æœåŠ¡å™¨)</span>
firewall-cmd --permanent --zone=public --add-forward-port=port=80:proto=tcp:toport=8080:toaddr=192.168.1.100

<span class="hljs-comment"># 3. ICMP é˜»å¡é…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤3: é…ç½® ICMP é˜»å¡"</span>
firewall-cmd --permanent --zone=public --add-icmp-block=echo-request
firewall-cmd --permanent --zone=public --add-icmp-block=echo-reply

<span class="hljs-comment"># 4. ç›´æ¥è§„åˆ™é…ç½® (Direct Rules)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤4: é…ç½®ç›´æ¥è§„åˆ™"</span>

<span class="hljs-comment"># 4.1 æ·»åŠ ç›´æ¥è§„åˆ™åˆ° INPUT é“¾</span>
firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 0 -p tcp --dport 9090 -j ACCEPT

<span class="hljs-comment"># 4.2 æ·»åŠ è¿æ¥é™åˆ¶è§„åˆ™</span>
firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 0 -p tcp --dport 22 -m state --state NEW -m recent --<span class="hljs-built_in">set</span> --name ssh --rsource
firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 0 -p tcp --dport 22 -m state --state NEW -m recent --update --seconds 60 --hitcount 4 --name ssh --rsource -j DROP

<span class="hljs-comment"># 5. ææ…Œæ¨¡å¼é…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤5: é…ç½®ææ…Œæ¨¡å¼"</span>
firewall-cmd --set-panic-off
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ææ…Œæ¨¡å¼å·²å…³é—­"</span>

<span class="hljs-comment"># 6. é”å®šé…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤6: é…ç½®ç™½åå•é”å®š"</span>
firewall-cmd --permanent --add-lockdown-whitelist-command=/usr/bin/systemctl
firewall-cmd --permanent --add-lockdown-whitelist-command=/usr/bin/firewall-cmd
firewall-cmd --permanent --add-lockdown-whitelist-user=root

<span class="hljs-comment"># 7. é‡è½½é…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤7: é‡è½½é˜²ç«å¢™é…ç½®"</span>
firewall-cmd --reload

<span class="hljs-comment"># 8. éªŒè¯é«˜çº§é…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤8: éªŒè¯é«˜çº§é…ç½®"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰€æœ‰åŒºåŸŸ:"</span>
firewall-cmd --list-all-zones

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç›´æ¥è§„åˆ™:"</span>
firewall-cmd --direct --get-all-rules

<span class="hljs-built_in">echo</span> <span class="hljs-string">"é”å®šç™½åå•:"</span>
firewall-cmd --list-lockdown-whitelist-commands
firewall-cmd --list-lockdown-whitelist-users

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç«¯å£è½¬å‘:"</span>
firewall-cmd --list-forward-ports

<span class="hljs-built_in">echo</span> <span class="hljs-string">"é«˜çº§ firewalld é…ç½®å®Œæˆï¼"</span>
</code></pre>
<h3 data-id="heading-12">3.4 firewalld æœåŠ¡ç®¡ç†è„šæœ¬</h3>
<p><strong>åˆ›å»ºæ–‡ä»¶ï¼š</strong> <code>/root/firewalld-service-management.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># firewalld æœåŠ¡ç®¡ç†è„šæœ¬</span>
<span class="hljs-comment"># ç”¨äºç®¡ç†è‡ªå®šä¹‰æœåŠ¡å®šä¹‰</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹é…ç½® firewalld è‡ªå®šä¹‰æœåŠ¡..."</span>

<span class="hljs-comment"># åˆ›å»ºè‡ªå®šä¹‰æœåŠ¡ç›®å½•</span>
CUSTOM_SERVICE_DIR=<span class="hljs-string">"/etc/firewalld/services"</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$CUSTOM_SERVICE_DIR</span>

<span class="hljs-comment"># 1. åˆ›å»ºè‡ªå®šä¹‰åº”ç”¨æœåŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤1: åˆ›å»ºè‡ªå®šä¹‰æœåŠ¡å®šä¹‰"</span>

<span class="hljs-comment"># 1.1 åˆ›å»º nodejs-app æœåŠ¡</span>
<span class="hljs-built_in">cat</span> &gt; <span class="hljs-variable">$CUSTOM_SERVICE_DIR</span>/nodejs-app.xml &lt;&lt; <span class="hljs-string">EOF
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;service&gt;
  &lt;short&gt;Node.js Application&lt;/short&gt;
  &lt;description&gt;This service allows access to Node.js web application on ports 3000 and 3001.&lt;/description&gt;
  &lt;port protocol="tcp" port="3000"/&gt;
  &lt;port protocol="tcp" port="3001"/&gt;
  &lt;module name="nf_conntrack_netbios_ns"/&gt;
&lt;/service&gt;
EOF</span>

<span class="hljs-comment"># 1.2 åˆ›å»º mongodb æœåŠ¡</span>
<span class="hljs-built_in">cat</span> &gt; <span class="hljs-variable">$CUSTOM_SERVICE_DIR</span>/mongodb.xml &lt;&lt; <span class="hljs-string">EOF
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;service&gt;
  &lt;short&gt;MongoDB Database&lt;/short&gt;
  &lt;description&gt;This service allows access to MongoDB database on default port 27017.&lt;/description&gt;
  &lt;port protocol="tcp" port="27017"/&gt;
&lt;/service&gt;
EOF</span>

<span class="hljs-comment"># 1.3 åˆ›å»º redis æœåŠ¡</span>
<span class="hljs-built_in">cat</span> &gt; <span class="hljs-variable">$CUSTOM_SERVICE_DIR</span>/redis.xml &lt;&lt; <span class="hljs-string">EOF
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;service&gt;
  &lt;short&gt;Redis Cache&lt;/short&gt;
  &lt;description&gt;This service allows access to Redis caching service on port 6379.&lt;/description&gt;
  &lt;port protocol="tcp" port="6379"/&gt;
&lt;/service&gt;
EOF</span>

<span class="hljs-comment"># 2. è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤2: è®¾ç½®æ–‡ä»¶æƒé™"</span>
<span class="hljs-built_in">chown</span> root:root <span class="hljs-variable">$CUSTOM_SERVICE_DIR</span>/*.xml
<span class="hljs-built_in">chmod</span> 640 <span class="hljs-variable">$CUSTOM_SERVICE_DIR</span>/*.xml

<span class="hljs-comment"># 3. é‡è½½ firewalld ä»¥è¯†åˆ«æ–°æœåŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤3: é‡è½½æœåŠ¡å®šä¹‰"</span>
firewall-cmd --reload

<span class="hljs-comment"># 4. æ·»åŠ è‡ªå®šä¹‰æœåŠ¡åˆ°é˜²ç«å¢™</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤4: æ·»åŠ è‡ªå®šä¹‰æœåŠ¡åˆ°é˜²ç«å¢™"</span>

<span class="hljs-comment"># 4.1 æ·»åŠ  nodejs-app æœåŠ¡åˆ° internal åŒºåŸŸ</span>
firewall-cmd --permanent --zone=internal --add-service=nodejs-app

<span class="hljs-comment"># 4.2 æ·»åŠ  mongodb æœåŠ¡åˆ° internal åŒºåŸŸ</span>
firewall-cmd --permanent --zone=internal --add-service=mongodb

<span class="hljs-comment"># 4.3 æ·»åŠ  redis æœåŠ¡åˆ° internal åŒºåŸŸ</span>
firewall-cmd --permanent --zone=internal --add-service=redis

<span class="hljs-comment"># 5. é‡è½½é…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤5: é‡è½½é˜²ç«å¢™é…ç½®"</span>
firewall-cmd --reload

<span class="hljs-comment"># 6. éªŒè¯è‡ªå®šä¹‰æœåŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤6: éªŒè¯è‡ªå®šä¹‰æœåŠ¡é…ç½®"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯ç”¨çš„è‡ªå®šä¹‰æœåŠ¡:"</span>
firewall-cmd --get-services | grep -E <span class="hljs-string">"(nodejs-app|mongodb|redis)"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"internal åŒºåŸŸçš„æœåŠ¡:"</span>
firewall-cmd --zone=internal --list-services

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æœåŠ¡æ–‡ä»¶å†…å®¹:"</span>
<span class="hljs-keyword">for</span> service_file <span class="hljs-keyword">in</span> <span class="hljs-variable">$CUSTOM_SERVICE_DIR</span>/*.xml; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== <span class="hljs-variable">$service_file</span> ==="</span>
    <span class="hljs-built_in">cat</span> <span class="hljs-variable">$service_file</span>
    <span class="hljs-built_in">echo</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"firewalld è‡ªå®šä¹‰æœåŠ¡é…ç½®å®Œæˆï¼"</span>
</code></pre>
<h2 data-id="heading-13">4. å®æˆ˜é…ç½®æ¡ˆä¾‹</h2>
<h3 data-id="heading-14">4.1 Web æœåŠ¡å™¨é˜²ç«å¢™é…ç½®</h3>
<p><strong>åˆ›å»ºæ–‡ä»¶ï¼š</strong> <code>/root/web-server-firewall.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># Web æœåŠ¡å™¨ä¸“ç”¨é˜²ç«å¢™é…ç½®</span>
<span class="hljs-comment"># é€‚ç”¨äº Apache/Nginx web æœåŠ¡å™¨</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹é…ç½® Web æœåŠ¡å™¨é˜²ç«å¢™..."</span>

<span class="hljs-comment"># æ£€æµ‹ä½¿ç”¨çš„é˜²ç«å¢™å·¥å…·</span>
<span class="hljs-keyword">if</span> systemctl is-active --quiet firewalld; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä½¿ç”¨ firewalld è¿›è¡Œé…ç½®"</span>
    FIREWALL_TYPE=<span class="hljs-string">"firewalld"</span>
<span class="hljs-keyword">elif</span> systemctl is-active --quiet iptables; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä½¿ç”¨ iptables è¿›è¡Œé…ç½®"</span>
    FIREWALL_TYPE=<span class="hljs-string">"iptables"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æœªå‘ç°æ´»åŠ¨çš„é˜²ç«å¢™æœåŠ¡ï¼Œå°†å®‰è£…å¹¶é…ç½® firewalld"</span>
    yum install -y firewalld || apt-get install -y firewalld
    systemctl start firewalld
    systemctl <span class="hljs-built_in">enable</span> firewalld
    FIREWALL_TYPE=<span class="hljs-string">"firewalld"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$FIREWALL_TYPE</span>"</span> = <span class="hljs-string">"firewalld"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># firewalld é…ç½®</span>
    
    <span class="hljs-comment"># åˆ›å»º web-server åŒºåŸŸ</span>
    firewall-cmd --permanent --new-zone=web-server
    
    <span class="hljs-comment"># é…ç½® web-server åŒºåŸŸ</span>
    firewall-cmd --permanent --zone=web-server --add-service=http
    firewall-cmd --permanent --zone=web-server --add-service=https
    firewall-cmd --permanent --zone=web-server --add-service=ssh
    firewall-cmd --permanent --zone=web-server --add-port=8080/tcp
    firewall-cmd --permanent --zone=web-server --add-port=8443/tcp
    
    <span class="hljs-comment"># è®¾ç½®é»˜è®¤åŒºåŸŸ</span>
    firewall-cmd --set-default-zone=web-server
    
    <span class="hljs-comment"># æ·»åŠ å¯Œè§„åˆ™ä¿æŠ¤</span>
    firewall-cmd --permanent --zone=web-server --add-rich-rule=<span class="hljs-string">'
        rule family="ipv4" source address="192.168.1.0/24" port port="22" protocol="tcp" accept'</span>
    
    firewall-cmd --permanent --zone=web-server --add-rich-rule=<span class="hljs-string">'
        rule family="ipv4" source address="0.0.0.0/0" port port="22" protocol="tcp" drop'</span>
    
    <span class="hljs-comment"># é‡è½½é…ç½®</span>
    firewall-cmd --reload
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"firewalld Web æœåŠ¡å™¨é…ç½®å®Œæˆ"</span>
    
<span class="hljs-keyword">else</span>
    <span class="hljs-comment"># iptables é…ç½®</span>
    
    <span class="hljs-comment"># æ¸…é™¤ç°æœ‰è§„åˆ™</span>
    iptables -F
    iptables -X
    
    <span class="hljs-comment"># é»˜è®¤ç­–ç•¥</span>
    iptables -P INPUT DROP
    iptables -P FORWARD DROP
    iptables -P OUTPUT ACCEPT
    
    <span class="hljs-comment"># åŸºç¡€è§„åˆ™</span>
    iptables -A INPUT -i lo -j ACCEPT
    iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
    
    <span class="hljs-comment"># Web æœåŠ¡ç«¯å£</span>
    iptables -A INPUT -p tcp --dport 80 -m state --state NEW -j ACCEPT
    iptables -A INPUT -p tcp --dport 443 -m state --state NEW -j ACCEPT
    iptables -A INPUT -p tcp --dport 8080 -m state --state NEW -j ACCEPT
    iptables -A INPUT -p tcp --dport 8443 -m state --state NEW -j ACCEPT
    
    <span class="hljs-comment"># SSH ä¿æŠ¤</span>
    iptables -A INPUT -p tcp --dport 22 -s 192.168.1.0/24 -j ACCEPT
    iptables -A INPUT -p tcp --dport 22 -j DROP
    
    <span class="hljs-comment"># ä¿å­˜è§„åˆ™</span>
    service iptables save
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"iptables Web æœåŠ¡å™¨é…ç½®å®Œæˆ"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ˜¾ç¤ºæœ€ç»ˆé…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æœ€ç»ˆé˜²ç«å¢™é…ç½®:"</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$FIREWALL_TYPE</span>"</span> = <span class="hljs-string">"firewalld"</span> ]; <span class="hljs-keyword">then</span>
    firewall-cmd --list-all
<span class="hljs-keyword">else</span>
    iptables -L -v -n
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Web æœåŠ¡å™¨é˜²ç«å¢™é…ç½®å®Œæˆï¼"</span>
</code></pre>
<h3 data-id="heading-15">4.2 æ•°æ®åº“æœåŠ¡å™¨é˜²ç«å¢™é…ç½®</h3>
<p><strong>åˆ›å»ºæ–‡ä»¶ï¼š</strong> <code>/root/database-server-firewall.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ•°æ®åº“æœåŠ¡å™¨ä¸“ç”¨é˜²ç«å¢™é…ç½®</span>
<span class="hljs-comment"># é€‚ç”¨äº MySQL, PostgreSQL, MongoDB ç­‰æ•°æ®åº“</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹é…ç½®æ•°æ®åº“æœåŠ¡å™¨é˜²ç«å¢™..."</span>

<span class="hljs-comment"># ä½¿ç”¨ firewalld è¿›è¡Œé…ç½®</span>
systemctl start firewalld
systemctl <span class="hljs-built_in">enable</span> firewalld

<span class="hljs-comment"># åˆ›å»º database-zone åŒºåŸŸ</span>
firewall-cmd --permanent --new-zone=database-zone

<span class="hljs-comment"># é…ç½®æ•°æ®åº“åŒºåŸŸ</span>
firewall-cmd --permanent --zone=database-zone --add-service=ssh
firewall-cmd --permanent --zone=database-zone --add-service=mysql
firewall-cmd --permanent --zone=database-zone --add-service=postgresql

<span class="hljs-comment"># æ·»åŠ è‡ªå®šä¹‰æ•°æ®åº“ç«¯å£</span>
firewall-cmd --permanent --zone=database-zone --add-port=27017/tcp  <span class="hljs-comment"># MongoDB</span>
firewall-cmd --permanent --zone=database-zone --add-port=5432/tcp   <span class="hljs-comment"># PostgreSQL</span>
firewall-cmd --permanent --zone=database-zone --add-port=3306/tcp   <span class="hljs-comment"># MySQL</span>

<span class="hljs-comment"># è®¾ç½®æºåœ°å€é™åˆ¶</span>
firewall-cmd --permanent --zone=database-zone --add-source=192.168.1.0/24
firewall-cmd --permanent --zone=database-zone --add-source=10.0.0.0/24

<span class="hljs-comment"># è®¾ç½®é»˜è®¤åŒºåŸŸä¸º drop</span>
firewall-cmd --permanent --zone=database-zone --set-target=DROP

<span class="hljs-comment"># è®¾ç½® database-zone ä¸ºé»˜è®¤åŒºåŸŸ</span>
firewall-cmd --set-default-zone=database-zone

<span class="hljs-comment"># é‡è½½é…ç½®</span>
firewall-cmd --reload

<span class="hljs-comment"># éªŒè¯é…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ•°æ®åº“åŒºåŸŸé…ç½®:"</span>
firewall-cmd --zone=database-zone --list-all

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ•°æ®åº“æœåŠ¡å™¨é˜²ç«å¢™é…ç½®å®Œæˆï¼"</span>
</code></pre>
<h2 data-id="heading-16">5. ç›‘æ§å’Œæ•…éšœæ’é™¤</h2>
<h3 data-id="heading-17">5.1 é˜²ç«å¢™ç›‘æ§è„šæœ¬</h3>
<p><strong>åˆ›å»ºæ–‡ä»¶ï¼š</strong> <code>/root/firewall-monitor.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># é˜²ç«å¢™ç›‘æ§å’ŒçŠ¶æ€æ£€æŸ¥è„šæœ¬</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹é˜²ç«å¢™çŠ¶æ€æ£€æŸ¥..."</span>

<span class="hljs-comment"># è·å–å½“å‰æ—¶é—´</span>
CURRENT_TIME=$(<span class="hljs-built_in">date</span> <span class="hljs-string">"+%Y-%m-%d %H:%M:%S"</span>)
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æŸ¥æ—¶é—´: <span class="hljs-variable">$CURRENT_TIME</span>"</span>

<span class="hljs-comment"># æ£€æŸ¥é˜²ç«å¢™æœåŠ¡çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== é˜²ç«å¢™æœåŠ¡çŠ¶æ€ ==="</span>
<span class="hljs-keyword">if</span> systemctl is-active --quiet firewalld; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"firewalld: è¿è¡Œä¸­"</span>
    systemctl status firewalld --no-pager -l | grep -E <span class="hljs-string">"(Active|Main PID|CGroup)"</span>
<span class="hljs-keyword">elif</span> systemctl is-active --quiet iptables; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"iptables: è¿è¡Œä¸­"</span>
    systemctl status iptables --no-pager -l | grep -E <span class="hljs-string">"(Active|Main PID|CGroup)"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è­¦å‘Š: æœªå‘ç°è¿è¡Œçš„é˜²ç«å¢™æœåŠ¡"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># æ£€æŸ¥å½“å‰è§„åˆ™</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== å½“å‰é˜²ç«å¢™è§„åˆ™ ==="</span>
<span class="hljs-keyword">if</span> systemctl is-active --quiet firewalld; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"firewalld é…ç½®:"</span>
    firewall-cmd --list-all-zones
<span class="hljs-keyword">elif</span> systemctl is-active --quiet iptables; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"iptables è§„åˆ™:"</span>
    iptables -L -v -n
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># æ£€æŸ¥è¿æ¥çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== å½“å‰ç½‘ç»œè¿æ¥ ==="</span>
ss -tunlp | <span class="hljs-built_in">head</span> -20

<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># æ£€æŸ¥è¢«æ‹’ç»çš„è¿æ¥</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== æœ€è¿‘è¢«æ‹’ç»çš„è¿æ¥ ==="</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v journalctl &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    journalctl -u firewalld --since <span class="hljs-string">"1 hour ago"</span> | grep -i <span class="hljs-string">"denied\|rejected"</span> | <span class="hljs-built_in">tail</span> -10
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—ä¸­çš„é˜²ç«å¢™ç›¸å…³æ¡ç›®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== ç³»ç»Ÿæ—¥å¿—ä¸­çš„é˜²ç«å¢™æ¡ç›® ==="</span>
dmesg | grep -i <span class="hljs-string">"firewall\|iptables"</span> | <span class="hljs-built_in">tail</span> -10

<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># ç«¯å£æ‰«ææ£€æŸ¥</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== ç›‘å¬ç«¯å£æ£€æŸ¥ ==="</span>
netstat -tuln | grep LISTEN

<span class="hljs-built_in">echo</span> <span class="hljs-string">"é˜²ç«å¢™çŠ¶æ€æ£€æŸ¥å®Œæˆï¼"</span>
</code></pre>
<h3 data-id="heading-18">5.2 é˜²ç«å¢™æ•…éšœæ’é™¤è„šæœ¬</h3>
<p><strong>åˆ›å»ºæ–‡ä»¶ï¼š</strong> <code>/root/firewall-troubleshoot.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># é˜²ç«å¢™æ•…éšœæ’é™¤è„šæœ¬</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹é˜²ç«å¢™æ•…éšœæ’é™¤..."</span>

<span class="hljs-comment"># 1. æ£€æŸ¥åŸºæœ¬è¿æ¥</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤1: æ£€æŸ¥åŸºæœ¬ç½‘ç»œè¿æ¥"</span>
ping -c 3 8.8.8.8 &gt; /dev/null 2&gt;&amp;1
<span class="hljs-keyword">if</span> [ $? -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ å¤–éƒ¨ç½‘ç»œè¿æ¥æ­£å¸¸"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ— å¤–éƒ¨ç½‘ç»œè¿æ¥å¤±è´¥"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 2. æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤2: æ£€æŸ¥é˜²ç«å¢™æœåŠ¡çŠ¶æ€"</span>
<span class="hljs-keyword">if</span> systemctl is-active --quiet firewalld; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ firewalld æœåŠ¡è¿è¡Œæ­£å¸¸"</span>
    
    <span class="hljs-comment"># æ£€æŸ¥ firewalld é…ç½®</span>
    <span class="hljs-keyword">if</span> firewall-cmd --state &gt; /dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ firewalld é…ç½®åŠ è½½æ­£å¸¸"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ— firewalld é…ç½®åŠ è½½å¤±è´¥"</span>
    <span class="hljs-keyword">fi</span>
    
<span class="hljs-keyword">elif</span> systemctl is-active --quiet iptables; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ iptables æœåŠ¡è¿è¡Œæ­£å¸¸"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ— æ²¡æœ‰è¿è¡Œçš„é˜²ç«å¢™æœåŠ¡"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 3. æ£€æŸ¥è§„åˆ™å†²çª</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤3: æ£€æŸ¥è§„åˆ™å†²çª"</span>
<span class="hljs-keyword">if</span> systemctl is-active --quiet firewalld &amp;&amp; systemctl is-active --quiet iptables; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è­¦å‘Š: firewalld å’Œ iptables åŒæ—¶è¿è¡Œï¼Œå¯èƒ½å­˜åœ¨å†²çª"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 4. æ£€æŸ¥ç«¯å£çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤4: æ£€æŸ¥å…³é”®ç«¯å£çŠ¶æ€"</span>
PORTS_TO_CHECK=<span class="hljs-string">"22 80 443 3306"</span>

<span class="hljs-keyword">for</span> port <span class="hljs-keyword">in</span> <span class="hljs-variable">$PORTS_TO_CHECK</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> ss -tuln | grep <span class="hljs-string">":<span class="hljs-variable">$port</span> "</span> &gt; /dev/null; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ ç«¯å£ <span class="hljs-variable">$port</span> æ­£åœ¨ç›‘å¬"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ— ç«¯å£ <span class="hljs-variable">$port</span> æœªç›‘å¬"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># 5. æ£€æŸ¥ SELinux çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤5: æ£€æŸ¥ SELinux çŠ¶æ€"</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v getenforce &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    selinux_status=$(getenforce)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"SELinux çŠ¶æ€: <span class="hljs-variable">$selinux_status</span>"</span>
    <span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$selinux_status</span>"</span> = <span class="hljs-string">"Enforcing"</span> ]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ³¨æ„: SELinux å¤„äºå¼ºåˆ¶æ¨¡å¼ï¼Œå¯èƒ½å½±å“ç½‘ç»œè¿æ¥"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 6. è¯Šæ–­ç‰¹å®šé—®é¢˜</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤6: å¸¸è§é—®é¢˜è¯Šæ–­"</span>

<span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰è¢«æ‹’ç»çš„è¿æ¥</span>
<span class="hljs-keyword">if</span> dmesg | grep -i <span class="hljs-string">"reject"</span> &gt; /dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å‘ç°è¢«æ‹’ç»çš„è¿æ¥ï¼ŒæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯:"</span>
    dmesg | grep -i <span class="hljs-string">"reject"</span> | <span class="hljs-built_in">tail</span> -5
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥æ—¥å¿—ä¸­çš„é˜²ç«å¢™é”™è¯¯</span>
<span class="hljs-keyword">if</span> journalctl -u firewalld --since <span class="hljs-string">"1 hour ago"</span> | grep -i <span class="hljs-string">"error"</span> &gt; /dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å‘ç° firewalld é”™è¯¯æ—¥å¿—:"</span>
    journalctl -u firewalld --since <span class="hljs-string">"1 hour ago"</span> | grep -i <span class="hljs-string">"error"</span> | <span class="hljs-built_in">tail</span> -5
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ•…éšœæ’é™¤å®Œæˆï¼"</span>
</code></pre>
<h2 data-id="heading-19">6. å®‰å…¨æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-20">6.1 é˜²ç«å¢™å®‰å…¨åŠ å›ºè„šæœ¬</h3>
<p><strong>åˆ›å»ºæ–‡ä»¶ï¼š</strong> <code>/root/firewall-hardening.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># é˜²ç«å¢™å®‰å…¨åŠ å›ºè„šæœ¬</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹é˜²ç«å¢™å®‰å…¨åŠ å›º..."</span>

<span class="hljs-comment"># ä½¿ç”¨ firewalld è¿›è¡ŒåŠ å›º</span>
systemctl start firewalld

<span class="hljs-comment"># 1. åˆ›å»ºå®‰å…¨åŒºåŸŸ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤1: åˆ›å»ºå®‰å…¨åŒºåŸŸç»“æ„"</span>

<span class="hljs-comment"># åˆ é™¤é»˜è®¤åŒºåŸŸï¼ˆå¦‚æœå­˜åœ¨ï¼‰</span>
firewall-cmd --permanent --delete-zone=public 2&gt;/dev/null || <span class="hljs-literal">true</span>
firewall-cmd --permanent --delete-zone=internal 2&gt;/dev/null || <span class="hljs-literal">true</span>

<span class="hljs-comment"># åˆ›å»ºæ–°çš„å®‰å…¨åŒºåŸŸ</span>
firewall-cmd --permanent --new-zone=external
firewall-cmd --permanent --new-zone=restricted
firewall-cmd --permanent --new-zone=management

<span class="hljs-comment"># 2. é…ç½®å¤–éƒ¨åŒºåŸŸ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤2: é…ç½®å¤–éƒ¨åŒºåŸŸ"</span>
firewall-cmd --permanent --zone=external --add-service=http
firewall-cmd --permanent --zone=external --add-service=https
firewall-cmd --permanent --zone=external --set-target=DROP

<span class="hljs-comment"># 3. é…ç½®å—é™åˆ¶åŒºåŸŸ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤3: é…ç½®å—é™åˆ¶åŒºåŸŸ"</span>
firewall-cmd --permanent --zone=restricted --add-service=ssh
firewall-cmd --permanent --zone=restricted --add-source=192.168.1.0/24
firewall-cmd --permanent --zone=restricted --set-target=ACCEPT

<span class="hljs-comment"># 4. é…ç½®ç®¡ç†åŒºåŸŸ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤4: é…ç½®ç®¡ç†åŒºåŸŸ"</span>
firewall-cmd --permanent --zone=management --add-service=ssh
firewall-cmd --permanent --zone=management --add-service=cockpit
firewall-cmd --permanent --zone=management --add-source=10.0.0.0/24
firewall-cmd --permanent --zone=management --set-target=ACCEPT

<span class="hljs-comment"># 5. é…ç½®é»˜è®¤åŒºåŸŸ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤5: è®¾ç½®é»˜è®¤åŒºåŸŸ"</span>
firewall-cmd --set-default-zone=external

<span class="hljs-comment"># 6. é…ç½®é«˜çº§ä¿æŠ¤è§„åˆ™</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤6: é…ç½®é«˜çº§ä¿æŠ¤"</span>

<span class="hljs-comment"># 6.1 é˜²æ­¢ç¢ç‰‡æ”»å‡»</span>
firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 0 -f -j DROP

<span class="hljs-comment"># 6.2 é˜²æ­¢æ— æ•ˆæ•°æ®åŒ…</span>
firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 0 -m state --state INVALID -j DROP

<span class="hljs-comment"># 6.3 é™åˆ¶æ–°è¿æ¥é€Ÿç‡</span>
firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 0 -p tcp -m state --state NEW -m <span class="hljs-built_in">limit</span> --<span class="hljs-built_in">limit</span> 60/min --limit-burst 100 -j ACCEPT

<span class="hljs-comment"># 7. é…ç½®æ—¥å¿—è§„åˆ™</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤7: é…ç½®è¯¦ç»†æ—¥å¿—"</span>

<span class="hljs-comment"># è®°å½•è¢«æ‹’ç»çš„è¿æ¥</span>
firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 0 -m <span class="hljs-built_in">limit</span> --<span class="hljs-built_in">limit</span> 12/min -j LOG --log-prefix <span class="hljs-string">"FIREWALL: "</span> --log-level 4

<span class="hljs-comment"># 8. ç¦ç”¨ä¸å¿…è¦çš„ ICMP ç±»å‹</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤8: é…ç½® ICMP è¿‡æ»¤"</span>
firewall-cmd --permanent --zone=external --add-icmp-block-inversion
firewall-cmd --permanent --zone=external --remove-icmp-block=echo-request
firewall-cmd --permanent --zone=external --remove-icmp-block=echo-reply

<span class="hljs-comment"># 9. é‡è½½é…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤9: åº”ç”¨é…ç½®"</span>
firewall-cmd --reload

<span class="hljs-comment"># 10. éªŒè¯åŠ å›ºé…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­¥éª¤10: éªŒè¯åŠ å›ºç»“æœ"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰€æœ‰åŒºåŸŸé…ç½®:"</span>
firewall-cmd --list-all-zones

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç›´æ¥è§„åˆ™:"</span>
firewall-cmd --direct --get-all-rules

<span class="hljs-built_in">echo</span> <span class="hljs-string">"é˜²ç«å¢™å®‰å…¨åŠ å›ºå®Œæˆï¼"</span>
</code></pre>
<h2 data-id="heading-21">7. æ€»ç»“</h2>
<p>æœ¬æ•™ç¨‹è¯¦ç»†ä»‹ç»äº† Linux ç³»ç»Ÿä¸­ä¸¤ç§ä¸»è¦çš„é˜²ç«å¢™å·¥å…·ï¼šiptables å’Œ firewalldã€‚é€šè¿‡å®é™…çš„é…ç½®æ¡ˆä¾‹å’Œè¯¦ç»†çš„æ­¥éª¤è¯´æ˜ï¼Œå³ä½¿æ˜¯é›¶åŸºç¡€çš„åˆå­¦è€…ä¹Ÿèƒ½å¤ŸæŒ‰ç…§æ•™ç¨‹å®Œæˆå®é™…çš„é˜²ç«å¢™é…ç½®ã€‚</p>
<h3 data-id="heading-22">7.1 å…³é”®è¦ç‚¹</h3>
<ol>
<li><strong>iptables</strong> æ˜¯åº•å±‚çš„åŒ…è¿‡æ»¤å·¥å…·ï¼ŒåŠŸèƒ½å¼ºå¤§ä½†é…ç½®å¤æ‚</li>
<li><strong>firewalld</strong> æ˜¯åŸºäº iptables çš„é«˜çº§ç®¡ç†å·¥å…·ï¼Œæä¾›åŠ¨æ€ç®¡ç†å’Œæ›´å‹å¥½çš„é…ç½®æ¥å£</li>
<li>ä¸¤ç§å·¥å…·éƒ½å¯ä»¥æœ‰æ•ˆä¿æŠ¤æœåŠ¡å™¨å®‰å…¨ï¼Œé€‰æ‹©å–å†³äºå…·ä½“éœ€æ±‚å’Œä¸ªäººåå¥½</li>
<li>æŒä¹…åŒ–é…ç½®æ˜¯ç¡®ä¿é˜²ç«å¢™è§„åˆ™åœ¨é‡å¯åä»ç„¶æœ‰æ•ˆçš„å…³é”®</li>
</ol>
<h3 data-id="heading-23">7.2 åç»­å»ºè®®</h3>
<ul>
<li>å®šæœŸå®¡æŸ¥å’Œæ›´æ–°é˜²ç«å¢™è§„åˆ™</li>
<li>ç›‘æ§é˜²ç«å¢™æ—¥å¿—ä»¥æ£€æµ‹æ½œåœ¨çš„å®‰å…¨å¨èƒ</li>
<li>åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰ï¼Œå…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯è§„åˆ™</li>
<li>ä¿æŒé˜²ç«å¢™è½¯ä»¶æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬</li>
</ul>
<p>é€šè¿‡æœ¬æ•™ç¨‹çš„å­¦ä¹ ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿç†Ÿç»ƒé…ç½®å’Œç®¡ç† Linux ç³»ç»Ÿçš„é˜²ç«å¢™ï¼Œä¸ºæœåŠ¡å™¨æä¾›åšå®çš„å®‰å…¨é˜²æŠ¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨ Elasticsearch ä¸­ä¸ºç»“æ„åŒ–æ–‡æ¡£é…ç½®é€’å½’åˆ†å—]]></title>    <link>https://juejin.cn/post/7571348736153141284</link>    <guid>https://juejin.cn/post/7571348736153141284</guid>    <pubDate>2025-11-12T00:34:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571348736153141284" data-draft-id="7571355146770333738" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨ Elasticsearch ä¸­ä¸ºç»“æ„åŒ–æ–‡æ¡£é…ç½®é€’å½’åˆ†å—"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2025-11-12T00:34:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Elasticsearch"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360441448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨ Elasticsearch ä¸­ä¸ºç»“æ„åŒ–æ–‡æ¡£é…ç½®é€’å½’åˆ†å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360441448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Elasticsearch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:34:09.000Z" title="Wed Nov 12 2025 00:34:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ¥è‡ª ElasticÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fsearch-labs%2Fauthor%2Fdaniel-rubinstein" title="https://www.elastic.co/search-labs/author/daniel-rubinstein" target="_blank" ref="nofollow noopener noreferrer">Daniel Rubinstein</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/046667f17a2e46dabb794503611495a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512448&amp;x-signature=sFaHH9ywb5yDybxouzh3LR2WGeY%3D" alt="" loading="lazy"/></p>
<p>äº†è§£å¦‚ä½•åœ¨ Elasticsearch ä¸­ä½¿ç”¨åˆ†å—å¤§å°ã€åˆ†éš”ç¬¦ç»„å’Œè‡ªå®šä¹‰åˆ†éš”ç¬¦åˆ—è¡¨æ¥é…ç½®é€’å½’åˆ†å—ï¼Œä»¥å®ç°æœ€ä½³çš„ç»“æ„åŒ–æ–‡æ¡£ç´¢å¼•ã€‚</p>
<p>åˆšæ¥è§¦ Elasticsearch å—ï¼ŸåŠ å…¥æˆ‘ä»¬çš„ â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fvirtual-events%2Fgetting-started-elasticsearch" title="https://www.elastic.co/virtual-events/getting-started-elasticsearch" target="_blank" ref="nofollow noopener noreferrer">Elasticsearch å…¥é—¨</a>â€ ç½‘ç»œç ”è®¨ä¼šå§ã€‚ä½ ä¹Ÿå¯ä»¥ç°åœ¨å¼€å§‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.elastic.co%2Fregistration" title="https://cloud.elastic.co/registration" target="_blank" ref="nofollow noopener noreferrer">å…è´¹äº‘ç«¯è¯•ç”¨</a>ï¼Œæˆ–åœ¨ä½ çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F143747798" title="https://elasticstack.blog.csdn.net/article/details/143747798" target="_blank" ref="nofollow noopener noreferrer">æœºå™¨</a>ä¸Šä½“éªŒ Elasticã€‚</p>
<p>ä» 8.16 ç‰ˆæœ¬å¼€å§‹ï¼Œç”¨æˆ·å¯ä»¥åœ¨å°†é•¿æ–‡æ¡£å¯¼å…¥è¯­ä¹‰æ–‡æœ¬å­—æ®µæ—¶é…ç½®åˆ†å—ç­–ç•¥ã€‚ä» 9.1 / 8.19 ç‰ˆæœ¬èµ·ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ç§æ–°çš„å¯é…ç½®é€’å½’åˆ†å—ç­–ç•¥ï¼Œå®ƒä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åˆ—è¡¨å¯¹æ–‡æ¡£è¿›è¡Œåˆ†å—ã€‚åˆ†å—çš„ç›®æ ‡æ˜¯å°†é•¿æ–‡æ¡£æ‹†åˆ†æˆåŒ…å«ç›¸å…³å†…å®¹çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬ç°æœ‰çš„ç­–ç•¥ä¼šæŒ‰è¯æˆ–å¥å­çš„ç²’åº¦æ‹†åˆ†æ–‡æœ¬ï¼Œä½†ä½¿ç”¨ç»“æ„åŒ–æ ¼å¼ï¼ˆä¾‹å¦‚ Markdownï¼‰ç¼–å†™çš„æ–‡æ¡£é€šå¸¸åœ¨ç”±æŸäº›åˆ†éš”å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚æ ‡é¢˜ï¼‰å®šä¹‰çš„éƒ¨åˆ†ä¸­åŒ…å«ç›¸å…³å†…å®¹ã€‚å¯¹äºè¿™ç±»æ–‡æ¡£ï¼Œæˆ‘ä»¬å¼•å…¥äº†é€’å½’åˆ†å—ç­–ç•¥ï¼Œä»¥åˆ©ç”¨ç»“æ„åŒ–æ–‡æ¡£çš„æ ¼å¼åˆ›å»ºæ›´ä¼˜è´¨çš„åˆ†å—ï¼</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯é€’å½’åˆ†å—ï¼Ÿ</h2>
<p>é€’å½’åˆ†å—ä¼šéå†ä¸€ç»„æä¾›çš„åˆ†åŒºåˆ†éš”æ¨¡å¼ï¼Œé€æ­¥å°†æ–‡æ¡£æ‹†åˆ†æˆæ›´å°çš„æ®µï¼Œç›´åˆ°å®ƒä»¬ç¬¦åˆæ‰€éœ€çš„æœ€å¤§åˆ†å—å¤§å°ã€‚</p>
<h3 data-id="heading-1">å¦‚ä½•é…ç½®é€’å½’åˆ†å—ï¼Ÿ</h3>
<p>ä»¥ä¸‹æ˜¯ç”¨æˆ·ä¸ºé€’å½’åˆ†å—å¯é…ç½®çš„å‚æ•°ï¼š</p>
<ul>
<li>
<p>ï¼ˆå¿…éœ€ï¼‰max_chunk_sizeï¼šæ¯ä¸ªåˆ†å—ä¸­å…è®¸çš„æœ€å¤§å•è¯æ•°ã€‚</p>
</li>
<li>
<p>ä»¥ä¸‹ä¸¤è€…ä¹‹ä¸€ï¼š</p>
<ul>
<li>
<p>separatorsï¼šç”¨äºå°†æ–‡æ¡£æ‹†åˆ†æˆåˆ†å—çš„æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²åˆ—è¡¨ã€‚</p>
</li>
<li>
<p>separator_groupï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äºæ˜ å°„åˆ°ç”± Elastic å®šä¹‰çš„é»˜è®¤åˆ†éš”ç¬¦åˆ—è¡¨ï¼Œä»¥ä¾¿é’ˆå¯¹ç‰¹å®šç±»å‹çš„æ–‡æ¡£ä½¿ç”¨ã€‚ç›®å‰æ”¯æŒ markdown å’Œ plaintextã€‚</p>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">é€’å½’åˆ†å—å¦‚ä½•å·¥ä½œï¼Ÿ</h3>
<p>å½“ç»™å®šè¾“å…¥æ–‡æ¡£ã€max_chunk_sizeï¼ˆä»¥å•è¯ä¸ºå•ä½ï¼‰å’Œåˆ†éš”ç¬¦å­—ç¬¦ä¸²åˆ—è¡¨æ—¶ï¼Œé€’å½’åˆ†å—çš„å¤„ç†è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>å¦‚æœè¾“å…¥æ–‡æ¡£å·²åœ¨æœ€å¤§åˆ†å—å¤§å°èŒƒå›´å†…ï¼Œåˆ™è¿”å›ä¸€ä¸ªè¦†ç›–æ•´ä¸ªè¾“å…¥çš„å•ä¸ªåˆ†å—ã€‚</p>
</li>
<li>
<p>æ ¹æ®åˆ†éš”ç¬¦å‡ºç°çš„ä½ç½®å°†æ–‡æœ¬æ‹†åˆ†ä¸ºæ½œåœ¨åˆ†å—ã€‚å¯¹æ¯ä¸ªæ½œåœ¨åˆ†å—æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>
<p>å¦‚æœæ½œåœ¨åˆ†å—åœ¨æœ€å¤§åˆ†å—å¤§å°èŒƒå›´å†…ï¼Œå°†å…¶æ·»åŠ åˆ°è¦è¿”å›ç»™ç”¨æˆ·çš„åˆ†å—åˆ—è¡¨ä¸­ã€‚</p>
</li>
<li>
<p>å¦åˆ™ï¼Œä»ç¬¬ 2 æ­¥é‡æ–°å¼€å§‹ï¼Œä»…ä½¿ç”¨æ½œåœ¨åˆ†å—çš„æ–‡æœ¬ï¼Œå¹¶ä½¿ç”¨ä¸‹ä¸€ä¸ªåˆ†éš”ç¬¦è¿›è¡Œæ‹†åˆ†ã€‚</p>
</li>
<li>
<p>å¦‚æœæ²¡æœ‰æ›´å¤šåˆ†éš”ç¬¦å¯ç”¨ï¼Œåˆ™é€€å›åˆ°åŸºäºå¥å­çš„åˆ†å—ã€‚</p>
</li>
</ul>
</li>
</ol>
<h2 data-id="heading-3">é…ç½®é€’å½’åˆ†å—çš„ç¤ºä¾‹</h2>
<p>é™¤äº†åˆ†å—å¤§å°ä¹‹å¤–ï¼Œé€’å½’åˆ†å—çš„ä¸»è¦é…ç½®æ˜¯é€‰æ‹©ç”¨äºæ‹†åˆ†æ–‡æ¡£çš„åˆ†éš”ç¬¦ã€‚å¦‚æœä½ ä¸ç¡®å®šä»å“ªé‡Œå¼€å§‹ï¼ŒElasticsearch æä¾›äº†ä¸€äº›é»˜è®¤çš„åˆ†éš”ç¬¦ç»„ï¼Œå¯ç”¨äºå¸¸è§çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-4">ä½¿ç”¨åˆ†éš”ç¬¦ç»„</h3>
<p>è¦ä½¿ç”¨åˆ†éš”ç¬¦ç»„ï¼Œåªéœ€åœ¨é…ç½®åˆ†å—è®¾ç½®æ—¶æä¾›ä½ æƒ³ä½¿ç”¨çš„ç»„åå³å¯ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-json" lang="json">`

<span class="hljs-number">1.</span>  <span class="hljs-attr">"chunking_settings"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
<span class="hljs-number">2.</span>      <span class="hljs-attr">"strategy"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"recursive"</span><span class="hljs-punctuation">,</span>
<span class="hljs-number">3.</span>      <span class="hljs-attr">"max_chunk_size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">25</span><span class="hljs-punctuation">,</span>
<span class="hljs-number">4.</span>      <span class="hljs-attr">"separator_group"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"plaintext"</span>
<span class="hljs-number">5.</span>  <span class="hljs-punctuation">}</span>

`AIå†™ä»£ç 
</code></pre>
<p>è¿™å°†ä¸ºä½ æä¾›ä¸€ç§é€’å½’åˆ†å—ç­–ç•¥ï¼Œä½¿ç”¨çš„åˆ†éš”ç¬¦åˆ—è¡¨ä¸º ["(?&lt;!\n)\n\n(?!\n)", "(?&lt;!\n)\n(?!\n)"]ã€‚è¿™å¯¹é€šç”¨çº¯æ–‡æœ¬åº”ç”¨éå¸¸æœ‰æ•ˆï¼Œå…ˆæŒ‰ä¸¤ä¸ªæ¢è¡Œç¬¦æ‹†åˆ†ï¼Œç„¶åæŒ‰ä¸€ä¸ªæ¢è¡Œç¬¦æ‹†åˆ†ã€‚</p>
<p>æˆ‘ä»¬è¿˜æä¾›äº†ä¸€ä¸ªåä¸º markdown çš„åˆ†éš”ç¬¦ç»„ï¼Œå®ƒä½¿ç”¨çš„åˆ†éš”ç¬¦åˆ—è¡¨ä¸ºï¼š</p>
<pre><code class="hljs language-swift" lang="swift">`

<span class="hljs-number">1</span>.  [
<span class="hljs-number">2</span>.  <span class="hljs-string">"<span class="hljs-subst">\n</span># "</span>,
<span class="hljs-number">3</span>.         <span class="hljs-string">"<span class="hljs-subst">\n</span>## "</span>,
<span class="hljs-number">4</span>.         <span class="hljs-string">"<span class="hljs-subst">\n</span>### "</span>,
<span class="hljs-number">5</span>.         <span class="hljs-string">"<span class="hljs-subst">\n</span>#### "</span>,
<span class="hljs-number">6</span>.         <span class="hljs-string">"<span class="hljs-subst">\n</span>##### "</span>,
<span class="hljs-number">7</span>.         <span class="hljs-string">"<span class="hljs-subst">\n</span>###### "</span>,
<span class="hljs-number">8</span>.         <span class="hljs-string">"<span class="hljs-subst">\n</span>^(?!<span class="hljs-subst">\\</span>s*$).*<span class="hljs-subst">\\</span>n-{1,}<span class="hljs-subst">\\</span>n"</span>,
<span class="hljs-number">9</span>.         <span class="hljs-string">"<span class="hljs-subst">\n</span>^(?!<span class="hljs-subst">\\</span>s*$).*<span class="hljs-subst">\\</span>n={1,}<span class="hljs-subst">\\</span>n"</span>
<span class="hljs-number">10</span>.  ]

`<span class="hljs-type">AIå†™ä»£ç </span>![](https:<span class="hljs-comment">//csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)</span>
</code></pre>
<p>è¿™ä¸ªåˆ†éš”ç¬¦åˆ—è¡¨éå¸¸é€‚ç”¨äºé€šç”¨çš„ markdown ä½¿ç”¨åœºæ™¯ï¼Œä¼šæ ¹æ® 6 ä¸ªæ ‡é¢˜çº§åˆ«å’Œåˆ†æ®µå­—ç¬¦è¿›è¡Œæ‹†åˆ†ã€‚</p>
<p>åœ¨åˆ›å»ºèµ„æºï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Felastic-inference" title="https://www.elastic.co/docs/explore-analyze/elastic-inference" target="_blank" ref="nofollow noopener noreferrer">æ¨ç†</a>ç«¯ç‚¹ / è¯­ä¹‰æ–‡æœ¬å­—æ®µï¼‰æ—¶ï¼Œä¸åˆ†éš”ç¬¦ç»„å¯¹åº”çš„åˆ†éš”ç¬¦åˆ—è¡¨ä¼šå­˜å‚¨åœ¨ä½ çš„é…ç½®ä¸­ã€‚å¦‚æœåˆ†éš”ç¬¦ç»„åœ¨ä¹‹åè¢«æ›´æ–°ï¼Œå®ƒä¸ä¼šæ”¹å˜ä½ å·²åˆ›å»ºèµ„æºçš„è¡Œä¸ºã€‚</p>
<h3 data-id="heading-5">ä½¿ç”¨è‡ªå®šä¹‰åˆ†éš”ç¬¦åˆ—è¡¨</h3>
<p>å¦‚æœé¢„å®šä¹‰çš„åˆ†éš”ç¬¦ç»„ä¸é€‚åˆä½ çš„ä½¿ç”¨åœºæ™¯ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªç¬¦åˆéœ€æ±‚çš„è‡ªå®šä¹‰åˆ†éš”ç¬¦åˆ—è¡¨ã€‚è¯·æ³¨æ„ï¼Œåˆ†éš”ç¬¦åˆ—è¡¨ä¸­å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨è‡ªå®šä¹‰åˆ†éš”ç¬¦é…ç½®åˆ†å—è®¾ç½®çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">`

<span class="hljs-number">1</span>.  <span class="hljs-string">"chunking_settings"</span>: {
<span class="hljs-number">2</span>.      <span class="hljs-string">"strategy"</span>: <span class="hljs-string">"recursive"</span>,
<span class="hljs-number">3</span>.      <span class="hljs-string">"max_chunk_size"</span>: <span class="hljs-number">25</span>,
<span class="hljs-number">4</span>.      <span class="hljs-string">"separators"</span>: [<span class="hljs-string">"<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>"</span>, <span class="hljs-string">"<span class="hljs-subst">\n</span>"</span>, <span class="hljs-string">"&lt;my-custom-separator&gt;"</span>]
<span class="hljs-number">5</span>.  }

`<span class="hljs-type">AIå†™ä»£ç </span>
</code></pre>
<p>ä¸Šé¢çš„åˆ†å—ç­–ç•¥ä¼šå…ˆæŒ‰ä¸¤ä¸ªæ¢è¡Œç¬¦æ‹†åˆ†ï¼Œç„¶åæŒ‰ä¸€ä¸ªæ¢è¡Œç¬¦æ‹†åˆ†ï¼Œæœ€åæŒ‰å­—ç¬¦ä¸² â€œâ€ æ‹†åˆ†ã€‚</p>
<h2 data-id="heading-6">é€’å½’åˆ†å—ç¤ºä¾‹</h2>
<p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªé€’å½’åˆ†å—çš„å®é™…ç¤ºä¾‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹åˆ†å—è®¾ç½®ï¼Œé€šè¿‡è‡ªå®šä¹‰åˆ†éš”ç¬¦åˆ—è¡¨æŒ‰ markdown æ–‡æ¡£çš„å‰ä¸¤ä¸ªæ ‡é¢˜çº§åˆ«è¿›è¡Œæ‹†åˆ†ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">`

<span class="hljs-number">1</span>.  <span class="hljs-string">"chunking_settings"</span>: {
<span class="hljs-number">2</span>.      <span class="hljs-string">"strategy"</span>: <span class="hljs-string">"recursive"</span>,
<span class="hljs-number">3</span>.      <span class="hljs-string">"max_chunk_size"</span>: <span class="hljs-number">25</span>,
<span class="hljs-number">4</span>.      <span class="hljs-string">"separators"</span>: [<span class="hljs-string">"<span class="hljs-subst">\n</span># "</span>, <span class="hljs-string">"<span class="hljs-subst">\n</span>## "</span>]
<span class="hljs-number">5</span>.  }

`<span class="hljs-type">AIå†™ä»£ç </span>
</code></pre>
<p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæœªåˆ†å—çš„ç®€å• Markdown æ–‡æ¡£ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/778a416a940547818868c450f97341fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512448&amp;x-signature=yGix2SAmSFVtGHQ3%2FMXFSeJe8Zw%3D" alt="" loading="lazy"/></p>
<p>ç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„åˆ†å—è®¾ç½®æ¥å¯¹æ–‡æ¡£è¿›è¡Œåˆ†å—ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4c1a5b79c064a1bafc72d38de799c99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512448&amp;x-signature=e1pJH%2BnHSc1ktztddMOg1m3SJ3w%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ccd29a02d55c448cba78434a1c267607~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512448&amp;x-signature=r%2BOzsLYJimFl4pOIQ8i8PNCgnKE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dbcef7021f04d5cab76e1df0627841d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512448&amp;x-signature=e49ikxjbrzHNsJrMp0ZDeCqP36w%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šæ¯ä¸ªåˆ†å—æœ«å°¾çš„æ¢è¡Œç¬¦ï¼ˆé™¤äº†åˆ†å— 3ï¼‰æœªé«˜äº®æ˜¾ç¤ºï¼Œä½†åŒ…å«åœ¨å®é™…çš„åˆ†å—è¾¹ç•Œå†…ã€‚</p>
</blockquote>
<h2 data-id="heading-7">ä»Šå¤©å°±å¼€å§‹ä½¿ç”¨é€’å½’åˆ†å—å§ï¼</h2>
<p>æœ‰å…³å¦‚ä½•ä½¿ç”¨æ­¤åŠŸèƒ½çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Felastic-inference%2Finference-api%23chunking-strategies" title="https://www.elastic.co/docs/explore-analyze/elastic-inference/inference-api#chunking-strategies" target="_blank" ref="nofollow noopener noreferrer">é…ç½®åˆ†å—è®¾ç½®çš„æ–‡æ¡£</a>ã€‚</p>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fsearch-labs%2Fblog%2Frecursive-chunking-structured-documents-elasticsearch" title="https://www.elastic.co/search-labs/blog/recursive-chunking-structured-documents-elasticsearch" target="_blank" ref="nofollow noopener noreferrer">www.elastic.co/search-labsâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“ä¸Šä¼ ä¸å†åªæ˜¯ /uploadï¼Œæˆ‘ä»¬æ˜¯æ€ä¹ˆè®¾è®¡å¤§æ–‡ä»¶ä¸Šä¼ çš„]]></title>    <link>https://juejin.cn/post/7571355989133099023</link>    <guid>https://juejin.cn/post/7571355989133099023</guid>    <pubDate>2025-11-12T01:58:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571355989133099023" data-draft-id="7570394530316369920" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“ä¸Šä¼ ä¸å†åªæ˜¯ /uploadï¼Œæˆ‘ä»¬æ˜¯æ€ä¹ˆè®¾è®¡å¤§æ–‡ä»¶ä¸Šä¼ çš„"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-12T01:58:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ´›å¡å¡äº†"/> <meta itemprop="url" content="https://juejin.cn/user/888839672963544"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“ä¸Šä¼ ä¸å†åªæ˜¯ /uploadï¼Œæˆ‘ä»¬æ˜¯æ€ä¹ˆè®¾è®¡å¤§æ–‡ä»¶ä¸Šä¼ çš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/888839672963544/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ´›å¡å¡äº†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T01:58:46.000Z" title="Wed Nov 12 2025 01:58:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»34åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸šåŠ¡èƒŒæ™¯</h3>
<p>åœ¨æ­£å¼è®²ä¹‹å‰ï¼Œå…ˆçœ‹ä¸€ä¸ªæˆ‘ä»¬åšçš„å¤§æ–‡ä»¶ä¸Šä¼ demoã€‚<br/>
ä¸‹é¢è¿™ä¸ªè§†é¢‘æ¼”ç¤ºçš„æ˜¯ä¸Šä¼ ä¸€ä¸ª 1GB çš„å‹ç¼©åŒ…ï¼Œæ•´ä¸ªè¿‡ç¨‹æ”¯æŒåˆ†ç‰‡ä¸Šä¼ ã€æ–­ç‚¹ç»­ä¼ ã€æš‚åœå’Œæ¢å¤ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°é€Ÿåº¦ä¸æ˜¯ç‰¹åˆ«å¿«ï¼Œè¿™ä¸ªæ˜¯æˆ‘æ•…æ„æ²¡å»ä¼˜åŒ–çš„ã€‚<br/>
å‰ç«¯é‚£è¾¹è®¡ç®—æ–‡ä»¶ MD5ã€ä»¥åŠæœ€ååˆå¹¶æ–‡ä»¶çš„æ—¶é—´æˆ‘éƒ½ä¿ç•™äº†ï¼Œ<br/>
ä¸»è¦æ˜¯æƒ³è®©å¤§å®¶èƒ½çœ‹åˆ°æ•´ä¸ªæµç¨‹æ˜¯æ€ä¹ˆè·‘é€šçš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4eb07ebdb67942bf8bbb528d0913c679~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517525&amp;x-signature=xLviIrXTV3tcfpMPnD62Tn%2F8SBc%3D" alt="output1111.gif" loading="lazy"/></p>
<p>å¹³æ—¶æˆ‘ä»¬åœ¨åšä¸€äº› SaaS ç³»ç»Ÿçš„æ—¶å€™ï¼Œæ–‡ä»¶ä¸Šä¼ è¿™å—å…¶å®åŸºæœ¬ä¸Šéƒ½è®¾è®¡çš„æŒºç®€å•çš„ã€‚<br/>
å‰ç«¯åšä¸ªåˆ†ç‰‡ä¸Šä¼ ï¼Œåç«¯æŠŠåˆ†ç‰‡åˆå¹¶èµ·æ¥ï¼Œæœ€åå­˜ OSS æˆ–è€…æœåŠ¡å™¨æŸä¸ªè·¯å¾„ä¸Šï¼Œå†è¿”å›ä¸€ä¸ª URL å°±å®Œäº‹äº†ã€‚<br/>
å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„æ–¹æ¡ˆä¹Ÿç¡®å®å¤Ÿç”¨ã€‚</p>
<p>ä½†æ˜¯æœ€è¿‘æˆ‘åœ¨åšä¸€ä¸ªç§æœ‰åŒ–é¡¹ç›®ï¼Œåœºæ™¯å®Œå…¨ä¸ä¸€æ ·ã€‚<br/>
é¡¹ç›®æ˜¯ç»™æ”¿ä¼å®¢æˆ·éƒ¨ç½²çš„å†…éƒ¨ç³»ç»Ÿï¼Œé‡Œé¢æœ‰ AI å¤§æ¨¡å‹å®¢æœé—®ç­”çš„åŠŸèƒ½ã€‚<br/>
å®¢æˆ·éœ€è¦æŠŠä»–ä»¬å†…éƒ¨çš„æ–‡æ¡£ã€æ‰‹å†Œã€è§„èŒƒã€å›¾çº¸ã€æµç¨‹ç­‰èµ„æ–™æ‰“åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œç”¨æ¥åšåç»­çš„å‘é‡åŒ–ã€çŸ¥è¯†æ£€ç´¢æˆ–è€…æ¨¡å‹è®­ç»ƒã€‚</p>
<p>è¿™ç±»åœºæ™¯å¦‚æœè¿˜æ²¿ç”¨ä¹‹å‰ SaaS ç³»ç»Ÿé‚£ç§ä¸Šä¼ æ–¹å¼ï¼Œå¾€å¾€å°±ä¸å¤ªé€‚ç”¨äº†ã€‚<br/>
å› ä¸ºè¿™äº›æ–‡ä»¶å¾€å¾€æœ‰å‡ ä¸ªå…±åŒç‚¹ï¼š</p>
<ol start="0">
<li>æ–‡ä»¶æ•°é‡å¤šï¼ŒåŠ¨è¾„å‡ ç™¾ä¸Šåƒä»½ï¼ˆWordã€PDFã€PPTã€Markdown éƒ½æœ‰ï¼‰ï¼›</li>
<li>æ–‡ä»¶ä½“ç§¯å¤§ï¼Œæ‰“æˆ zip åŠ¨ä¸åŠ¨å°±æ˜¯å‡ ä¸ª Gï¼Œç”šè‡³åå‡ äºŒåä¸ª Gï¼›</li>
<li>ä¸Šä¼ ç¯å¢ƒå¤æ‚ï¼Œå®¢æˆ·ä¸€èˆ¬åœ¨å†…ç½‘æˆ–å±€åŸŸç½‘ï¼Œæœ‰çš„ç”šè‡³å®Œå…¨æ–­ç½‘ï¼›</li>
<li>æœ‰å®‰å…¨è¦æ±‚ï¼Œæ–‡ä»¶ä¸èƒ½ç»è¿‡äº‘ç«¯ OSSï¼Œé‡Œé¢å¯èƒ½æœ‰ä¿å¯†èµ„æ–™ï¼›</li>
<li>éœ€è¦å®¡è®¡ï¼Œè¦èƒ½çŸ¥é“æ˜¯è°ä¸Šä¼ çš„ã€ä»€ä¹ˆæ—¶å€™ä¼ çš„ã€æ–‡ä»¶ç°åœ¨å­˜å“ªï¼›</li>
<li>ä¸Šä¼ å®Œä¹‹åè¿˜è¦è¿›ä¸€æ­¥å¤„ç†ï¼Œæ¯”å¦‚è‡ªåŠ¨è§£å‹ã€è§£ææ–‡æœ¬ã€æ‹†é¡µã€å‘é‡åŒ–ï¼Œç„¶åå†å­˜å…¥ Milvus æˆ– pgvectorã€‚</li>
</ol>
<p>æ‰€ä»¥è¿™ç§æƒ…å†µè¿˜ç”¨ SaaS ç³»ç»Ÿé‚£ç§â€œç®€å•ä¸Šä¼ +äº‘å­˜å‚¨â€æ–¹æ¡ˆçš„è¯ï¼Œé‚£å¯èƒ½é—®é¢˜å°±ä¸€å †ï¼š</p>
<ul>
<li>ä¸Šä¼ ä¸­æ–­åç”¨æˆ·ä¸€åˆ·æ–°æµè§ˆå™¨å°±å¾—é‡ä¼ æ•´ä¸ªåŒ…ï¼›</li>
<li>é›†ç¾¤éƒ¨ç½²æ—¶åˆ†ç‰‡æ‰“åˆ°ä¸åŒæœºå™¨ä¸Šæ ¹æœ¬æ— æ³•åˆå¹¶ï¼›</li>
<li>å¤šäººåŒæ—¶ä¸Šä¼ å¯èƒ½ä¼šå‘ç”Ÿæ–‡ä»¶è¦†ç›–æˆ–è·¯å¾„å†²çªï¼›</li>
<li>æ²¡æœ‰ä»»ä½•ä¸Šä¼ è®°å½•ï¼Œä¹Ÿè¿½è¸ªä¸åˆ°æ˜¯è°ä¼ çš„ï¼›</li>
<li>å¯¹æ”¿ä¼æ¥è¯´ï¼Œå®¡è®¡ã€åˆè§„ã€ä¿å¯†å…¨éƒ½ä¸è¾¾æ ‡ã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è®¾è®¡æ–‡ä»¶ä¸Šä¼ çš„åŠŸèƒ½é€»è¾‘ã€‚<br/>
ç›®çš„æ˜¯è®©å®ƒä¸ä»…èƒ½æ”¯æŒå¤§æ–‡ä»¶ã€æ–­ç‚¹ç»­ä¼ ã€é›†ç¾¤éƒ¨ç½²ï¼Œè¿˜èƒ½åŒæ—¶é€‚é…å†…ç½‘ç¯å¢ƒã€æƒé™ç®¡æ§ï¼Œä»¥åŠåç»­çš„ AI æ–‡æ¡£è§£æå’ŒçŸ¥è¯†å‘é‡åŒ–ç­‰å¤„ç†æµç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆå¾ˆå¤šé¡¹ç›®åªéœ€è¦ä¸€ä¸ª upload æ¥å£</h3>
<p>å¦‚æœæˆ‘ä»¬å›å¤´çœ‹ä¸€ä¸‹è‡ªå·±å¹³å¸¸åšè¿‡çš„ä¸€äº›å¸¸è§„ Web é¡¹ç›®ï¼Œå°¤å…¶æ˜¯å„ç§ SaaS ç³»ç»Ÿæˆ–è€…åå°ç®¡ç†ç³»ç»Ÿï¼Œ<br/>
å…¶å®å¤§å¤šæ•°æ—¶å€™åç«¯åªä¼šæä¾›ä¸€ä¸ª <code>/upload</code> æ¥å£ï¼Œ å‰ç«¯æ‹¿åˆ°æ–‡ä»¶åç›´æ¥è°ƒç”¨è¿™ä¸ªæ¥å£ï¼Œåç«¯ä¿å­˜æ–‡ä»¶å†è¿”å›ä¸€ä¸ª URL å°±ç»“æŸäº†ã€‚</p>
<p>ç”šè‡³æˆ‘ä»¬åœ¨å¾ˆå¤šé¡¹ç›®é‡Œï¼Œå‰ç«¯éƒ½ä¸ä¼šæŠŠæ–‡ä»¶ä¼ ç»™ä¸šåŠ¡æœåŠ¡ï¼Œ<br/>
è€Œæ˜¯ç›´æ¥é€šè¿‡å‰ç«¯ SDKï¼ˆæ¯”å¦‚é˜¿é‡Œäº‘ OSSã€è…¾è®¯äº‘ COSã€ä¸ƒç‰›äº‘ç­‰ï¼‰ä¸Šä¼ åˆ°äº‘å­˜å‚¨ï¼Œ<br/>
ä¸Šä¼ å®Œåæ‹¿åˆ°æ–‡ä»¶åœ°å€ï¼Œå†æŠŠè¿™ä¸ªåœ°å€å›ä¼ ç»™åç«¯ä¿å­˜ã€‚</p>
<p>è¿™ç§æ–¹å¼åœ¨ SaaS ç³»ç»Ÿæˆ–è€…è½»é‡çº§çš„ä¸šåŠ¡é‡Œéå¸¸æ™®éï¼Œä¹Ÿéå¸¸é«˜æ•ˆã€‚ ä¸»è¦åŸå› æœ‰å‡ ä¸ªï¼š</p>
<ol>
<li><strong>æ–‡ä»¶éƒ½æ¯”è¾ƒå°</strong>ï¼Œå¤§å¤šæ•°å°±æ˜¯å‡  MB çš„å›¾ç‰‡ã€PDF æˆ– Excelï¼›</li>
<li><strong>äº‘å­˜å‚¨è¶³å¤Ÿç¨³å®š</strong>ï¼Œä¸Šä¼ ã€ä¸‹è½½ã€è®¿é—®éƒ½æœ‰å®Œæ•´çš„ SDK æ”¯æ’‘ï¼›</li>
<li><strong>ç³»ç»Ÿæ˜¯å…¬ç½‘éƒ¨ç½²</strong>ï¼Œä¸éœ€è¦è€ƒè™‘å±€åŸŸç½‘ã€å†…ç½‘æ–­ç½‘è¿™äº›é—®é¢˜ï¼›</li>
<li><strong>å¯¹å®‰å…¨å’Œå®¡è®¡çš„è¦æ±‚ä¸é«˜</strong>ï¼Œæ–‡ä»¶å†…å®¹ä¹Ÿä¸æ˜¯æ¶‰å¯†æ•°æ®ï¼›</li>
<li><strong>ç”¨æˆ·ä½“éªŒä¼˜å…ˆ</strong>ï¼Œæ‰€ä»¥ç›´æ¥æŠŠæ–‡ä»¶ä¸Šä¼ åˆ°äº‘ç«¯æ˜¯æœ€çœäº‹çš„æ–¹æ¡ˆã€‚</li>
</ol>
<p>æ¢å¥è¯è¯´ï¼Œè¿™ç§â€œä¸€ä¸ª upload æ¥å£â€æˆ–â€œå‰ç«¯ç›´ä¼  OSSâ€æ¨¡å¼ï¼Œå…¶å®æ˜¯é¢å‘<strong>é€šç”¨å‹ SaaS åœºæ™¯</strong>çš„ã€‚<br/>
å¯¹äºç»å¤§å¤šæ•°äº’è”ç½‘ä¸šåŠ¡æ¥è¯´ï¼Œå®ƒæ—¢å¤Ÿå¿«åˆå¤Ÿçœå¿ƒã€‚</p>
<p>ä½†ä¸€æ—¦é¡¹ç›®æ¢æˆæ”¿ä¼ã€ç§æœ‰åŒ–éƒ¨ç½²æˆ–è€… AI è®­ç»ƒå¹³å°è¿™ç§ç¯å¢ƒï¼Œ<br/>
å°±å®Œå…¨ä¸æ˜¯ä¸€ä¸ªé‡çº§çš„é—®é¢˜äº†ã€‚<br/>
è¿™é‡Œçš„å…³é”®ä¸åœ¨â€œèƒ½ä¸èƒ½ä¸Šä¼ â€ï¼Œ<br/>
è€Œåœ¨äº<strong>æ–‡ä»¶ä¸Šä¼ ä¹‹åçš„å¯æ§æ€§ã€å¯è¿½æº¯æ€§å’Œå®‰å…¨æ€§</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-2">å‰ç«¯å¸¸è§çš„å¤§æ–‡ä»¶ä¸Šä¼ æ–¹å¼</h3>
<p>åœ¨é‡æ–°è®¾è®¡åç«¯æ¥å£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ç°åœ¨å‰ç«¯å¸¸è§çš„å¤§æ–‡ä»¶ä¸Šä¼ æ€è·¯ã€‚<br/>
å…¶å®è¿‘å‡ å¹´å‰ç«¯è¿™å—å·²ç»æ¯”è¾ƒæˆç†Ÿäº†ï¼Œä¸»æµæ–¹æ¡ˆå¤§ä½“éƒ½æ˜¯å›´ç»•å‡ ä¸ªæ ¸å¿ƒç‚¹å±•å¼€çš„ï¼š<br/>
<strong>ç§’ä¼ æ£€æµ‹ã€åˆ†ç‰‡ä¸Šä¼ ã€æ–­ç‚¹ç»­ä¼ ã€å¹¶å‘æ§åˆ¶ã€è¿›åº¦å±•ç¤ºã€‚</strong></p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå‰ç«¯æ‹¿åˆ°æ–‡ä»¶åï¼Œä¼šå…ˆè®¡ç®—ä¸€ä¸ªæ–‡ä»¶å“ˆå¸Œå€¼ï¼Œæ¯”å¦‚ç”¨ MD5ã€‚<br/>
è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†åš<strong>ç§’ä¼ æ£€æµ‹</strong>ï¼š<br/>
å¦‚æœæœåŠ¡å™¨ä¸Šå·²ç»å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œå°±å¯ä»¥ç›´æ¥è·³è¿‡ä¸Šä¼ ï¼ŒèŠ‚çœæ—¶é—´å’Œå¸¦å®½ã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯<strong>åˆ†ç‰‡ä¸Šä¼ </strong>ã€‚<br/>
æ–‡ä»¶å¤ªå¤§æ—¶ï¼Œå‰ç«¯ä¼šæŠŠæ–‡ä»¶æ‹†æˆå¤šä¸ªå›ºå®šå¤§å°çš„å°å—ï¼ˆæ¯”å¦‚æ¯å— 5MB æˆ– 10MBï¼‰ï¼Œ<br/>
ç„¶åä¸€ç‰‡ä¸€ç‰‡åœ°ä¸Šä¼ ã€‚è¿™æ ·åšå¯ä»¥é¿å…ä¸€æ¬¡æ€§ä¼ è¾“å¤§æ–‡ä»¶å¯¼è‡´æµè§ˆå™¨å¡é¡¿æˆ–ç½‘ç»œä¸­æ–­ã€‚</p>
<p>ç„¶åå°±æ˜¯<strong>æ–­ç‚¹ç»­ä¼ </strong>ã€‚<br/>
å‰ç«¯ä¼šè®°å½•å“ªäº›åˆ†ç‰‡å·²ç»ä¸Šä¼ æˆåŠŸï¼Œå¦‚æœä¸Šä¼ è¿‡ç¨‹ä¸­ç½‘ç»œä¸­æ–­æˆ–æµè§ˆå™¨åˆ·æ–°ï¼Œ<br/>
ä¸‹æ¬¡åªéœ€è¦ä»æœªå®Œæˆçš„åˆ†ç‰‡ç»§ç»­ä¸Šä¼ ï¼Œä¸ç”¨é‡æ–°ä¼ æ•´åŒ…æ–‡ä»¶ã€‚</p>
<p>åœ¨æ€§èƒ½æ–¹é¢ï¼Œå‰ç«¯è¿˜ä¼šåš<strong>å¹¶å‘æ§åˆ¶</strong>ã€‚<br/>
æ¯”å¦‚åŒæ—¶ä¸Šä¼ ä¸‰åˆ°äº”ä¸ªåˆ†ç‰‡ï¼Œä¸Šä¼ å®Œä¸€ä¸ªå°±ç«‹åˆ»è¡¥ä¸‹ä¸€ä¸ªï¼Œ<br/>
è¿™æ ·æ•´ä½“é€Ÿåº¦æ¯”å•çº¿ç¨‹ä¸²è¡Œä¸Šä¼ è¦å¿«å¾ˆå¤šã€‚</p>
<p>æœ€åæ˜¯<strong>è¿›åº¦å±•ç¤º</strong>ã€‚<br/>
é€šè¿‡ç›‘å¬æ¯ä¸ªåˆ†ç‰‡çš„ä¸Šä¼ çŠ¶æ€ï¼Œå‰ç«¯å¯ä»¥è®¡ç®—æ•´ä½“è¿›åº¦ï¼Œ<br/>
ç»™ç”¨æˆ·å±•ç¤ºä¸€ä¸ªå®æ—¶çš„ä¸Šä¼ ç™¾åˆ†æ¯”æˆ–è¿›åº¦æ¡ï¼Œè®©ä½“éªŒæ›´å¯æ§ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå‰ç«¯çš„å¤§æ–‡ä»¶ä¸Šä¼ æ–¹æ¡ˆå·²ç»å½¢æˆäº†ä¸€å¥—ç›¸å¯¹æ ‡å‡†çš„æ¨¡å¼ã€‚<br/>
æ‰€ä»¥è¿™æ¬¡æˆ‘åœ¨é‡æ–°è®¾è®¡åç«¯çš„æ—¶å€™ï¼Œå°±æ‰“ç®—åŸºäºè¿™ç§å‰ç«¯é€»è¾‘ï¼Œ<br/>
å»æ„å»ºä¸€å¥—æ›´è´´åˆä¼ä¸šç§æœ‰åŒ–ç¯å¢ƒçš„ä¸Šä¼ æ¥å£æ§åˆ¶ä½“ç³»ã€‚<br/>
ç›®æ ‡æ˜¯è®©å‰åç«¯çš„èŒè´£åˆ’åˆ†æ›´æ¸…æ™°ï¼š<br/>
å‰ç«¯è´Ÿè´£åˆ‡ç‰‡ã€æ§åˆ¶ä¸æ¢å¤ï¼›åç«¯è´Ÿè´£å­˜å‚¨ã€æ ¡éªŒä¸åˆå¹¶ã€‚</p>
<hr/>
<h3 data-id="heading-3">åç«¯æ¥å£è®¾è®¡æ€è·¯</h3>
<p>å‰ç«¯çš„å¤§æ–‡ä»¶ä¸Šä¼ æµç¨‹å…¶å®å·²ç»ç›¸å¯¹å›ºå®šäº†ï¼Œæˆ‘ä»¬åªè¦è®©åç«¯çš„æ¥å£å’Œå®ƒé…åˆå¾—ä¸Šï¼Œå°±èƒ½æŠŠæ•´ä¸ªä¸Šä¼ é“¾è·¯æ‰“é€šã€‚<br/>
æ‰€ä»¥æˆ‘è¿™æ¬¡é‡æ–°è®¾è®¡æ—¶ï¼ŒæŠŠä¸Šä¼ æ¥å£æ‹†æˆäº†å‡ ä¸ªæ¯”è¾ƒç‹¬ç«‹çš„é˜¶æ®µï¼š<br/>
<strong>ç§’ä¼ æ£€æŸ¥ã€åˆå§‹åŒ–ä»»åŠ¡ã€ä¸Šä¼ åˆ†ç‰‡ã€åˆå¹¶æ–‡ä»¶ã€æš‚åœä»»åŠ¡ã€å–æ¶ˆä»»åŠ¡ã€ä»»åŠ¡åˆ—è¡¨ã€‚</strong><br/>
æ¯ä¸ªæ¥å£éƒ½åªè´Ÿè´£ä¸€ä»¶äº‹ï¼Œè¿™æ ·æ¥å£çš„èŒè´£ä¼šæ›´æ¸…æ™°ï¼Œä¹Ÿæ–¹ä¾¿åæœŸæ‰©å±•ã€‚</p>
<h4 data-id="heading-4">ä¸€ã€/upload/check â€”â€” ç§’ä¼ æ£€æŸ¥</h4>
<p>è¿™ä¸ªæ¥å£æ˜¯æ•´ä¸ªæµç¨‹çš„ç¬¬ä¸€æ­¥ï¼Œç”¨æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å·²ç»ä¸Šä¼ è¿‡ã€‚<br/>
å‰ç«¯åœ¨è®¡ç®—å®Œæ–‡ä»¶çš„å…¨å±€ MD5ï¼ˆæˆ–å…¶ä»– hashï¼‰åï¼Œä¼šå…ˆè°ƒè¿™ä¸ªæ¥å£ã€‚<br/>
å¦‚æœåç«¯å‘ç°æ•°æ®åº“é‡Œå·²ç»æœ‰ç›¸åŒ hash çš„æ–‡ä»¶ï¼Œå°±ç›´æ¥è¿”å›â€œå·²å­˜åœ¨â€ï¼Œå‰ç«¯å°±ä¸ç”¨å†ä¸Šä¼ äº†ã€‚</p>
<p><strong>è¯·æ±‚ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json">POST /api/upload/check
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"fileHash"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"md5_abc123def456"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"fileName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"training-docs.zip"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"fileSize"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5342245120</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¿”å›ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"exists"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¦‚æœ <code>exists = true</code>ï¼Œè¯´æ˜æœåŠ¡ç«¯å·²ç»æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥èµ°â€œç§’ä¼ æˆåŠŸâ€çš„é€»è¾‘ã€‚</p>
<p><strong>ä¼ªä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/check")</span>
<span class="hljs-keyword">public</span> Result&lt;?&gt; checkFile(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; body) {
    <span class="hljs-comment">// 1. æ ¡éªŒ fileHash å‚æ•°æ˜¯å¦ä¸ºç©º</span>
    <span class="hljs-comment">// 2. æŸ¥è¯¢ file_info è¡¨æ˜¯å¦å·²æœ‰è¯¥æ–‡ä»¶</span>
    <span class="hljs-comment">// 3. å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œç›´æ¥è¿”å›ç§’ä¼ æˆåŠŸï¼ˆexists = trueï¼‰</span>
    <span class="hljs-comment">// 4. å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼ŒæŸ¥è¯¢ upload_task è¡¨ä¸­æ˜¯å¦æœ‰æœªå®Œæˆä»»åŠ¡ï¼ˆæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼‰</span>
}
</code></pre>
<h4 data-id="heading-5">äºŒã€/upload/init â€”â€” åˆå§‹åŒ–ä¸Šä¼ ä»»åŠ¡</h4>
<p>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°±è¦å…ˆåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ä¸Šä¼ ä»»åŠ¡ã€‚<br/>
è¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯åˆ›å»ºä¸€æ¡ <code>upload_task</code> è®°å½•ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªå”¯ä¸€çš„ <code>uploadId</code>ã€‚<br/>
å‰ç«¯ä¼šç”¨è¿™ä¸ª uploadId æ¥æ ‡è¯†æ•´ä¸ªä¸Šä¼ è¿‡ç¨‹ã€‚</p>
<p><strong>è¯·æ±‚ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json">POST /api/upload/init
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"fileHash"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"md5_abc123def456"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"fileName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"training-docs.zip"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"totalChunks"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">320</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"chunkSize"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5242880</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¿”å›ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"uploadId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"b4f8e3a7-1a0c-4a1d-88af-61e98d91a49b"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"uploadedChunks"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><code>uploadedChunks</code> ç”¨æ¥æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œå¦‚æœä¹‹å‰æœ‰éƒ¨åˆ†åˆ†ç‰‡ä¸Šä¼ è¿‡ï¼Œå°±ä¼šåœ¨è¿™é‡Œè¿”å›ç´¢å¼•æ•°ç»„ã€‚</p>
<p><strong>ä¼ªä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/init")</span>
<span class="hljs-keyword">public</span> Result&lt;UploadInitResponse&gt; <span class="hljs-title function_">initUpload</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> UploadInitRequest request)</span> {
    <span class="hljs-comment">// 1. æ£€æŸ¥æ˜¯å¦å·²æœ‰åŒ fileHash çš„ä»»åŠ¡ï¼Œè‹¥æœ‰åˆ™è¿”å›æ—§ä»»åŠ¡ä¿¡æ¯ï¼ˆæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼‰</span>
    <span class="hljs-comment">// 2. å¦åˆ™åˆ›å»ºæ–°çš„ upload_task è®°å½•ï¼Œç”Ÿæˆ uploadId</span>
    <span class="hljs-comment">// 3. åˆå§‹åŒ–åˆ†ç‰‡æ•°é‡ã€å¤§å°ã€çŠ¶æ€ç­‰ä¿¡æ¯</span>
    <span class="hljs-comment">// 4. è¿”å› uploadId ä¸å·²ä¸Šä¼ åˆ†ç‰‡ç´¢å¼•åˆ—è¡¨</span>
}

</code></pre>
<h4 data-id="heading-6">ä¸‰ã€/upload/chunk â€”â€” ä¸Šä¼ å•ä¸ªåˆ†ç‰‡</h4>
<p>è¿™æ˜¯æ•´ä¸ªä¸Šä¼ è¿‡ç¨‹é‡Œè°ƒç”¨æ¬¡æ•°æœ€å¤šçš„æ¥å£ã€‚<br/>
æ¯ä¸ªåˆ†ç‰‡éƒ½ä¼šå•ç‹¬ä¸Šä¼ ä¸€æ¬¡ï¼Œå¹¶åœ¨æœåŠ¡ç«¯ä¿å­˜ä¸ºä¸´æ—¶æ–‡ä»¶ï¼ŒåŒæ—¶å†™å…¥ <code>upload_chunk</code> è¡¨ã€‚<br/>
ä¸Šä¼ æˆåŠŸåï¼Œåç«¯ä¼šæ›´æ–° <code>upload_task</code> çš„è¿›åº¦ä¿¡æ¯ã€‚</p>
<p><strong>è¯·æ±‚ç¤ºä¾‹ï¼ˆè¡¨å•ä¸Šä¼ ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json">POST /api/upload/chunk
Content-Type<span class="hljs-punctuation">:</span> multipart/form-data

formData<span class="hljs-punctuation">:</span>
  uploadId<span class="hljs-punctuation">:</span> b4f8e3a7<span class="hljs-number">-1</span>a0c<span class="hljs-number">-4</span>a1d<span class="hljs-number">-88</span>af<span class="hljs-number">-61e98</span>d91a49b
  chunkIndex<span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
  chunkSize<span class="hljs-punctuation">:</span> <span class="hljs-number">5242880</span>
  chunkHash<span class="hljs-punctuation">:</span> md5_001
  file<span class="hljs-punctuation">:</span> (äºŒè¿›åˆ¶åˆ†ç‰‡æ•°æ®)
</code></pre>
<p><strong>è¿”å›ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"uploadId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"b4f8e3a7-1a0c-4a1d-88af-61e98d91a49b"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"chunkIndex"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"chunkSize"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5242880</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ä¼ªä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping(value = "/chunk", consumes = MediaType.MULTIPART_FORM_DATA_VALUE)</span>
<span class="hljs-keyword">public</span> Result&lt;?&gt; uploadChunk(<span class="hljs-meta">@ModelAttribute</span> UploadChunkRequest req) {
    <span class="hljs-comment">// 1. æ ¡éªŒä»»åŠ¡çŠ¶æ€ï¼Œç¦æ­¢ä¸Šä¼ å·²å–æ¶ˆæˆ–å·²å®Œæˆçš„ä»»åŠ¡</span>
    <span class="hljs-comment">// 2. æ£€æŸ¥æœ¬åœ°ç›®å½•ï¼ˆæˆ–äº‘ç«¯å­˜å‚¨æ¡¶ï¼‰æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º</span>
    <span class="hljs-comment">// 3. æ¥æ”¶å½“å‰åˆ†ç‰‡æ–‡ä»¶å¹¶å†™å…¥ä¸´æ—¶è·¯å¾„</span>
    <span class="hljs-comment">// 4. å†™å…¥ upload_chunk è¡¨ï¼Œæ ‡è®°çŠ¶æ€ä¸º â€œå·²ä¸Šä¼ â€</span>
    <span class="hljs-comment">// 5. æ›´æ–° upload_task çš„ uploaded_chunks æ•°é‡</span>
}

</code></pre>
<h4 data-id="heading-7">å››ã€/upload/merge â€”â€” åˆå¹¶åˆ†ç‰‡</h4>
<p>å½“å‰ç«¯ç¡®è®¤æ‰€æœ‰åˆ†ç‰‡éƒ½ä¸Šä¼ å®Œåï¼Œä¼šè°ƒç”¨ <code>/upload/merge</code>ã€‚<br/>
åç«¯æ”¶åˆ°è¿™ä¸ªè¯·æ±‚åï¼Œå»æ£€æŸ¥æ‰€æœ‰åˆ†ç‰‡æ˜¯å¦å®Œæ•´ï¼Œç„¶åæŒ‰ç…§ç´¢å¼•é¡ºåºä¾æ¬¡åˆå¹¶ã€‚<br/>
åˆå¹¶æˆåŠŸåï¼Œä¼šåˆ é™¤ä¸´æ—¶åˆ†ç‰‡æ–‡ä»¶ï¼Œå¹¶æ›´æ–° <code>upload_task</code> çŠ¶æ€ä¸ºâ€œå®Œæˆâ€ã€‚<br/>
å¦‚æœå¯ç”¨äº†äº‘å­˜å‚¨ï¼Œè¿™ä¸€æ­¥ä¹Ÿå¯ä»¥ç›´æ¥æŠŠåˆå¹¶åçš„æ–‡ä»¶ä¸Šä¼ åˆ° OSSã€‚</p>
<p><strong>è¯·æ±‚ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json">POST /api/upload/merge
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"uploadId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"b4f8e3a7-1a0c-4a1d-88af-61e98d91a49b"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"fileHash"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"md5_abc123def456"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¿”å›ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ–‡ä»¶åˆå¹¶æˆåŠŸ"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"storagePath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/data/uploads/training-docs.zip"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ä¼ªä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/merge")</span>
<span class="hljs-keyword">public</span> Result&lt;?&gt; mergeFile(<span class="hljs-meta">@RequestBody</span> UploadMergeRequest req) {
    <span class="hljs-comment">// 1. æ£€æŸ¥ upload_task çŠ¶æ€æ˜¯å¦å…è®¸åˆå¹¶</span>
    <span class="hljs-comment">// 2. æ ¡éªŒæ‰€æœ‰åˆ†ç‰‡æ˜¯å¦éƒ½ä¸Šä¼ å®Œæˆ</span>
    <span class="hljs-comment">// 3. å¦‚æœæ˜¯æœ¬åœ°å­˜å‚¨ï¼šæŒ‰ chunk_index é¡ºåºæµå¼åˆå¹¶æ–‡ä»¶</span>
    <span class="hljs-comment">// 4. å¦‚æœæ˜¯äº‘å­˜å‚¨ï¼šè°ƒç”¨äº‘ç«¯åˆ†ç‰‡åˆå¹¶ APIï¼ˆå¦‚ OSSã€COSï¼‰</span>
    <span class="hljs-comment">// 5. æ ¡éªŒæ–‡ä»¶ hash å®Œæ•´æ€§ï¼Œæ›´æ–°ä»»åŠ¡çŠ¶æ€ä¸º COMPLETED</span>
    <span class="hljs-comment">// 6. å°†æœ€ç»ˆæ–‡ä»¶ä¿¡æ¯å†™å…¥ file_info è¡¨</span>
}
</code></pre>
<h4 data-id="heading-8">äº”ã€/upload/pause â€”â€” æš‚åœä»»åŠ¡</h4>
<p>è¿™ä¸ªæ¥å£ç”¨äºåœ¨ä¸Šä¼ è¿‡ç¨‹ä¸­æ‰‹åŠ¨æš‚åœä»»åŠ¡ã€‚<br/>
å‰ç«¯å¯èƒ½ä¼šåœ¨ç½‘ç»œæ³¢åŠ¨æˆ–ç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»æš‚åœæ—¶è°ƒç”¨ã€‚<br/>
åç«¯ä¼šæ›´æ–°ä»»åŠ¡çŠ¶æ€ä¸ºâ€œå·²æš‚åœâ€ï¼Œå¹¶è®°å½•å½“å‰å·²ä¸Šä¼ çš„åˆ†ç‰‡æ•°ã€‚</p>
<p><strong>è¯·æ±‚ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json">POST /api/upload/pause
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"uploadId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"b4f8e3a7-1a0c-4a1d-88af-61e98d91a49b"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¿”å›ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä»»åŠ¡å·²æš‚åœ"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ä¼ªä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/pause")</span>
<span class="hljs-keyword">public</span> Result&lt;Void&gt; <span class="hljs-title function_">pauseUpload</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> UploadPauseRequest req)</span> {
    <span class="hljs-comment">// 1. æŸ¥æ‰¾å¯¹åº”çš„ upload_task</span>
    <span class="hljs-comment">// 2. æ›´æ–°ä»»åŠ¡çŠ¶æ€ä¸º â€œå·²æš‚åœâ€</span>
    <span class="hljs-comment">// 3. è¿”å›ä»»åŠ¡çŠ¶æ€ç¡®è®¤ä¿¡æ¯</span>
}
</code></pre>
<h4 data-id="heading-9">å…­ã€/upload/cancel â€”â€” å–æ¶ˆä»»åŠ¡</h4>
<p>å¦‚æœç”¨æˆ·æƒ³æ”¾å¼ƒæœ¬æ¬¡ä¸Šä¼ ï¼Œå¯ä»¥è°ƒç”¨ <code>/cancel</code>ã€‚<br/>
åç«¯ä¼šæŠŠä»»åŠ¡çŠ¶æ€æ ‡è®°ä¸ºâ€œå·²å–æ¶ˆâ€ï¼Œå¹¶æ¸…ç†å¯¹åº”çš„ä¸´æ—¶åˆ†ç‰‡æ–‡ä»¶ã€‚<br/>
è¿™æ ·èƒ½é¿å…ç£ç›˜ä¸Šå †ç§¯æ— ç”¨æ•°æ®ã€‚</p>
<p><strong>è¯·æ±‚ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json">POST /api/upload/cancel
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"uploadId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"b4f8e3a7-1a0c-4a1d-88af-61e98d91a49b"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¿”å›ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä»»åŠ¡å·²å–æ¶ˆ"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ä¼ªä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/cancel")</span>
<span class="hljs-keyword">public</span> Result&lt;?&gt; cancelUpload(<span class="hljs-meta">@RequestBody</span> UploadCancelRequest req) {
    <span class="hljs-comment">// 1. æŸ¥æ‰¾å¯¹åº”çš„ upload_task</span>
    <span class="hljs-comment">// 2. æ›´æ–°ä»»åŠ¡çŠ¶æ€ä¸º â€œå·²å–æ¶ˆâ€</span>
    <span class="hljs-comment">// 3. åˆ é™¤æˆ–æ ‡è®°å·²ä¸Šä¼ çš„åˆ†ç‰‡æ–‡ä»¶ä¸ºå¾…æ¸…ç†</span>
    <span class="hljs-comment">// 4. è¿”å›æ“ä½œç»“æœ</span>
}
</code></pre>
<h4 data-id="heading-10">ä¸ƒã€/upload/list â€”â€” æŸ¥è¯¢ä»»åŠ¡åˆ—è¡¨</h4>
<p>è¿™ä¸ªæ¥å£æˆ‘ä»¬ç”¨äºç®¡ç†åå°æŸ¥çœ‹å½“å‰ä¸Šä¼ ä»»åŠ¡çš„æ•´ä½“æƒ…å†µã€‚<br/>
å¯ä»¥å±•ç¤ºæ¯ä¸ªä»»åŠ¡çš„æ–‡ä»¶åã€å¤§å°ã€è¿›åº¦ã€çŠ¶æ€ã€ä¸Šä¼ äººç­‰ä¿¡æ¯ï¼Œæ–¹ä¾¿è¿½è¸ªå’Œå®¡è®¡ã€‚</p>
<p><strong>è¯·æ±‚ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json">GET /api/upload/list
</code></pre>
<p><strong>è¿”å›ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"uploadId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"b4f8e3a7-1a0c-4a1d-88af-61e98d91a49b"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"fileName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"training-docs.zip"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"COMPLETED"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"uploadedChunks"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">320</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"totalChunks"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">320</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"uploader"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"admin"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"createdAt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-10-20 14:30:12"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ä¼ªä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping("/list")</span>
<span class="hljs-keyword">public</span> Result&lt;List&lt;UploadTaskSummary&gt;&gt; <span class="hljs-title function_">listUploadTasks</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. æŸ¥è¯¢æ‰€æœ‰ä¸Šä¼ ä»»åŠ¡</span>
    <span class="hljs-comment">// 2. æŒ‰åˆ›å»ºæ—¶é—´æˆ–çŠ¶æ€æ’åº</span>
    <span class="hljs-comment">// 3. è¿”å›ä»»åŠ¡æ‘˜è¦ä¿¡æ¯ï¼ˆä»»åŠ¡åã€çŠ¶æ€ã€è¿›åº¦ã€ä¸Šä¼ äººç­‰ï¼‰</span>
}
</code></pre>
<h4 data-id="heading-11">æ¥å£è°ƒç”¨é¡ºåºå°ç»“</h4>
<p>é‚£æˆ‘ä»¬è¿™æ•´ä¸ªä¸Šä¼ è¿‡ç¨‹çš„è°ƒç”¨é¡ºåºå°±æ˜¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">1. /upload/check     â†’ ç§’ä¼ æ£€æµ‹
2. /upload/init      â†’ åˆå§‹åŒ–ä¸Šä¼ ä»»åŠ¡
3. /upload/chunk     â†’ å¾ªç¯ä¸Šä¼ æ‰€æœ‰åˆ†ç‰‡
4. /upload/merge     â†’ æ‰€æœ‰åˆ†ç‰‡å®Œæˆååˆå¹¶
ï¼ˆå¯é€‰ï¼‰/upload/pauseã€/upload/cancel ç”¨äºæ§åˆ¶ä»»åŠ¡
ï¼ˆå¯é€‰ï¼‰/upload/list ç”¨äºä»»åŠ¡è¿½è¸ªä¸å®¡è®¡
</code></pre>
<h4 data-id="heading-12">æ¥å£è°ƒç”¨é¡ºåºç¤ºæ„å›¾</h4>
<p>ä¸‹é¢è¿™å¼ æ—¶åºå›¾å±•ç¤ºäº†å‰ç«¯ã€åç«¯ã€æ•°æ®åº“åœ¨æ•´ä¸ªä¸Šä¼ è¿‡ç¨‹ä¸­çš„äº¤äº’å…³ç³»ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5f79241f518495f8774a900301e638f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517525&amp;x-signature=Kcr8YME9sua2zjXuRaAfOSQGCSY%3D" alt="Untitled diagram-2025-11-10-031845.png" loading="lazy"/></p>
<p>è¿™æ ·å®‰æ’æœ‰å‡ ä¸ªå¥½å¤„ï¼š</p>
<ol>
<li><strong>é€»è¾‘è¡”æ¥é¡º</strong>ï¼šä¸Šé¢åˆšè®²å®Œæ¯ä¸ªæ¥å£çš„èŒè´£ï¼Œä¸‹é¢ç«‹åˆ»ç”¨å›¾æ€»ç»“ï¼›</li>
<li><strong>è§†è§‰èŠ‚å¥å¹³è¡¡</strong>ï¼šè¯»è€…è¯»åˆ°è¿™é‡Œå·²ç»çœ‹äº†ä¸å°‘æ–‡å­—ï¼Œç”¨å›¾èƒ½ç¼“è§£é˜…è¯»ç–²åŠ³ï¼›</li>
<li><strong>æ‰¿ä¸Šå¯ä¸‹</strong>ï¼šè¿™å¼ å›¾æ—¢æ€»ç»“æ¥å£æµç¨‹ï¼Œåˆèƒ½è‡ªç„¶å¼•å‡ºä¸‹ä¸€èŠ‚â€œæ•°æ®åº“è¡¨è®¾è®¡â€ã€‚</li>
</ol>
<p>è¿™å¥—æ¥å£è®¾è®¡åŸºæœ¬èƒ½è¦†ç›–å¤§æ–‡ä»¶ä¸Šä¼ åœ¨ä¼ä¸šé¡¹ç›®ä¸­çš„å¸¸è§éœ€æ±‚ã€‚<br/>
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹æ”¯æ’‘è¿™å¥—æ¥å£èƒŒåçš„æ•°æ®åº“è¡¨è®¾è®¡ã€‚<br/>
æ•°æ®åº“çš„ä½œç”¨æ˜¯è®©ä¸Šä¼ ä»»åŠ¡çš„çŠ¶æ€å¯è¿½è¸ªã€å¯æ¢å¤ï¼Œä¹Ÿèƒ½åœ¨é›†ç¾¤éƒ¨ç½²æ—¶ä¿æŒä¸€è‡´æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-13">æ•°æ®åº“è¡¨è®¾è®¡æ€è·¯</h3>
<p>å‰é¢è¯´çš„é‚£ä¸€å¥—æ¥å£ï¼Œè¦çœŸæ­£ç¨³å®šåœ°è·‘èµ·æ¥ï¼Œ<br/>
åç«¯å¿…é¡»æœ‰ä¸€å¥—èƒ½è®°å½•ä»»åŠ¡çŠ¶æ€ã€åˆ†ç‰‡ä¿¡æ¯ã€æ–‡ä»¶å­˜å‚¨è·¯å¾„çš„æ•°æ®åº“ç»“æ„ã€‚<br/>
å› ä¸ºä¸Šä¼ è¿™ç§åœºæ™¯ä¸æ˜¯â€œä¸€æ¬¡è¯·æ±‚å°±ç»“æŸâ€çš„æ“ä½œï¼Œå®ƒå¾€å¾€ä¼šæŒç»­å‡ åˆ†é’Ÿç”šè‡³å‡ ä¸ªå°æ—¶ï¼Œ<br/>
æ‰€ä»¥æˆ‘ä»¬éœ€è¦è®©ä»»åŠ¡çŠ¶æ€å¯ä»¥è¿½è¸ªã€å¯ä»¥æ¢å¤ï¼Œè¿˜è¦èƒ½æ”¯æ’‘é›†ç¾¤éƒ¨ç½²ã€‚</p>
<p>æˆ‘è¿™æ¬¡ä¸»è¦è®¾è®¡äº†ä¸‰å¼ æ ¸å¿ƒè¡¨ï¼š<br/>
<code>upload_task</code>ï¼ˆä¸Šä¼ ä»»åŠ¡è¡¨ï¼‰ã€<code>upload_chunk</code>ï¼ˆåˆ†ç‰‡è¡¨ï¼‰ã€<code>file_info</code>ï¼ˆæ–‡ä»¶ä¿¡æ¯è¡¨ï¼‰ã€‚<br/>
å®ƒä»¬åˆ†åˆ«è´Ÿè´£è®°å½•ä»»åŠ¡ã€åˆ†ç‰‡å’Œæœ€ç»ˆæ–‡ä»¶ä¸‰å±‚çš„æ•°æ®å…³ç³»ã€‚</p>
<h4 data-id="heading-14">ä¸€ã€upload_task â€”â€” ä¸Šä¼ ä»»åŠ¡è¡¨</h4>
<p>è¿™å¼ è¡¨æ˜¯æ•´ä¸ªä¸Šä¼ è¿‡ç¨‹çš„â€œæ€»è´¦â€ï¼Œ<br/>
æ¯ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ ä»»åŠ¡ï¼Œä¸ç®¡åˆ†æˆå¤šå°‘ç‰‡ï¼Œéƒ½ä¼šåœ¨è¿™é‡Œç”Ÿæˆä¸€æ¡è®°å½•ã€‚<br/>
å®ƒä¸»è¦ç”¨æ¥ä¿å­˜ä»»åŠ¡çš„å…¨å±€ä¿¡æ¯ï¼Œæ¯”å¦‚æ–‡ä»¶åã€å¤§å°ã€ä¸Šä¼ è¿›åº¦ã€çŠ¶æ€ã€å­˜å‚¨æ–¹å¼ç­‰ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `upload_task` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
  `upload_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä»»åŠ¡å”¯ä¸€IDï¼ˆUUIDï¼‰'</span>,
  `file_hash` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ–‡ä»¶å“ˆå¸Œï¼ˆç”¨äºç§’ä¼ ä¸æ–­ç‚¹ç»­ä¼ ï¼‰'</span>,
  `file_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ–‡ä»¶åç§°'</span>,
  `file_size` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ–‡ä»¶æ€»å¤§å°ï¼ˆå­—èŠ‚ï¼‰'</span>,
  `chunk_size` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¯ä¸ªåˆ†ç‰‡å¤§å°ï¼ˆå­—èŠ‚ï¼‰'</span>,
  `total_chunks` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ†ç‰‡æ€»æ•°'</span>,
  `uploaded_chunks` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'å·²ä¸Šä¼ åˆ†ç‰‡æ•°é‡'</span>,
  `status` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'ä»»åŠ¡çŠ¶æ€ï¼š0-å¾…ä¸Šä¼  1-ä¸Šä¼ ä¸­ 2-åˆå¹¶ä¸­ 3-å®Œæˆ 4-å–æ¶ˆ 5-å¤±è´¥ 6-å·²åˆå¹¶ 7-å·²æš‚åœ'</span>,
  `storage_type` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'local'</span> COMMENT <span class="hljs-string">'å­˜å‚¨ç±»å‹ï¼šlocal/oss/cos/minio/s3ç­‰'</span>,
  `storage_url` <span class="hljs-type">varchar</span>(<span class="hljs-number">512</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ–‡ä»¶æœ€ç»ˆå­˜å‚¨åœ°å€ï¼ˆäº‘ç«¯æˆ–æœ¬åœ°è·¯å¾„ï¼‰'</span>,
  `local_path` <span class="hljs-type">varchar</span>(<span class="hljs-number">512</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æœ¬åœ°ä¸´æ—¶æ–‡ä»¶æˆ–åˆå¹¶æ–‡ä»¶è·¯å¾„'</span>,
  `remark` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¤‡æ³¨ä¿¡æ¯'</span>,
  `uploader` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸Šä¼ äºº'</span>,
  `created_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `updated_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `upload_id` (`upload_id`),
  KEY `idx_hash` (`file_hash`),
  KEY `idx_status` (`status`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'ä¸Šä¼ ä»»åŠ¡è¡¨ï¼ˆæ”¯æŒå¤šç§äº‘å­˜å‚¨ï¼‰'</span>;
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li><code>upload_id</code> æ˜¯å‰ç«¯åˆå§‹åŒ–ä»»åŠ¡åç”±åç«¯ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†ï¼›</li>
<li><code>file_hash</code> ç”¨æ¥æ”¯æŒç§’ä¼ é€»è¾‘ï¼›</li>
<li><code>status</code> æ§åˆ¶ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸï¼ˆç­‰å¾…ã€ä¸Šä¼ ä¸­ã€åˆå¹¶ä¸­ã€å®Œæˆç­‰ï¼‰ï¼›</li>
<li><code>storage_type</code>ã€<code>storage_url</code> å¯ä»¥å…¼å®¹å¤šç§å­˜å‚¨æ–¹æ¡ˆï¼ˆæœ¬åœ°ã€OSSã€COSã€MinIOï¼‰ï¼›</li>
<li><code>uploaded_chunks</code> å­—æ®µè®©ä»»åŠ¡èƒ½éšæ—¶æ¢å¤ï¼Œé€‚é…æ–­ç‚¹ç»­ä¼ ã€‚</li>
</ul>
<h4 data-id="heading-15">äºŒã€upload_chunk â€”â€” åˆ†ç‰‡è¡¨</h4>
<p>è¿™å¼ è¡¨å¯¹åº”æ¯ä¸ªä¸Šä¼ ä»»åŠ¡ä¸‹çš„æ‰€æœ‰åˆ†ç‰‡ã€‚<br/>
æ¯ä¸€ä¸ªåˆ†ç‰‡éƒ½ä¼šå•ç‹¬åœ¨è¿™é‡Œå ä¸€æ¡è®°å½•ï¼Œç”¨æ¥è¿½è¸ªå®ƒçš„ä¸Šä¼ çŠ¶æ€ã€‚<br/>
è¿™å¼ è¡¨çš„å­˜åœ¨è®©æˆ‘ä»¬èƒ½åšæ–­ç‚¹ç»­ä¼ ã€è¿›åº¦ç»Ÿè®¡ã€ä»¥åŠåˆå¹¶å‰çš„å®Œæ•´æ€§æ£€æŸ¥ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `upload_chunk` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
  `upload_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ‰€å±ä¸Šä¼ ä»»åŠ¡ID'</span>,
  `chunk_index` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ†ç‰‡ç´¢å¼•ï¼ˆä»0å¼€å§‹ï¼‰'</span>,
  `chunk_size` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å®é™…åˆ†ç‰‡å¤§å°ï¼ˆå­—èŠ‚ï¼‰'</span>,
  `chunk_hash` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¯é€‰ï¼šåˆ†ç‰‡hashï¼ˆç”¨äºé«˜çº§å»é‡ï¼‰'</span>,
  `status` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'çŠ¶æ€ï¼š0-å¾…ä¸Šä¼  1-å·²ä¸Šä¼  2-å·²åˆå¹¶'</span>,
  `local_path` <span class="hljs-type">varchar</span>(<span class="hljs-number">512</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ†ç‰‡æœ¬åœ°è·¯å¾„'</span>,
  `created_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `updated_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uniq_task_chunk` (`upload_id`,`chunk_index`),
  KEY `idx_upload_id` (`upload_id`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'ä¸Šä¼ åˆ†ç‰‡è¡¨'</span>;
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li><code>upload_id</code> æ˜¯ä»»åŠ¡å¤–é”®ï¼Œå’Œ <code>upload_task</code> ä¸€ä¸€å¯¹åº”ï¼›</li>
<li><code>chunk_index</code> ä»£è¡¨åˆ†ç‰‡é¡ºåºï¼Œåˆå¹¶æ–‡ä»¶æ—¶ä¼šæŒ‰è¿™ä¸ªæ’åºï¼›</li>
<li><code>chunk_hash</code> å¯é€‰å­—æ®µï¼Œç”¨æ¥åœ¨ä¸Šä¼ å‰ååšå®Œæ•´æ€§æ ¡éªŒï¼›</li>
<li><code>status</code> å­—æ®µæ§åˆ¶ä¸Šä¼ è¿›åº¦ï¼ˆå¾…ä¸Šä¼ ã€å·²ä¸Šä¼ ã€å·²åˆå¹¶ï¼‰ï¼›</li>
<li>å”¯ä¸€ç´¢å¼• (<code>upload_id</code>, <code>chunk_index</code>) é¿å…é‡å¤æ’å…¥åˆ†ç‰‡ã€‚</li>
</ul>
<p>é€šè¿‡è¿™å¼ è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°æ–­ç‚¹ç»­ä¼ ï¼š<br/>
å½“ç”¨æˆ·é‡æ–°å¼€å§‹ä¸Šä¼ æ—¶ï¼Œåç«¯åªè¿”å›æœªå®Œæˆçš„åˆ†ç‰‡ç´¢å¼•ï¼Œå‰ç«¯è·³è¿‡å·²ä¸Šä¼ çš„éƒ¨åˆ†ã€‚</p>
<h4 data-id="heading-16">ä¸‰ã€file_info â€”â€” æ–‡ä»¶ä¿¡æ¯è¡¨</h4>
<p>è¿™å¼ è¡¨è®°å½•çš„æ˜¯ä¸Šä¼ å®Œæˆåçš„â€œæœ€ç»ˆæ–‡ä»¶ä¿¡æ¯â€ï¼Œ<br/>
ç›¸å½“äºç³»ç»Ÿçš„æ–‡ä»¶ç´¢å¼•è¡¨ã€‚åªè¦æ–‡ä»¶åˆå¹¶æˆåŠŸå¹¶é€šè¿‡æ ¡éªŒï¼Œ<br/>
åç«¯å°±ä¼šå¾€è¿™é‡Œå†™å…¥ä¸€æ¡è®°å½•ã€‚</p>
<p>è¿™å¼ è¡¨æ”¯æ’‘ç§’ä¼ åŠŸèƒ½ï¼Œä¹Ÿèƒ½è¢«åç»­çš„æ–‡æ¡£è§£ææˆ–å‘é‡åŒ–ä»»åŠ¡ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `file_info` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
  `file_hash` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ–‡ä»¶hashï¼Œç”¨äºç§’ä¼ '</span>,
  `file_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ–‡ä»¶åç§°'</span>,
  `file_size` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ–‡ä»¶å¤§å°'</span>,
  `storage_type` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'local'</span> COMMENT <span class="hljs-string">'å­˜å‚¨ç±»å‹ï¼šlocal/oss/cos/minio/s3ç­‰'</span>,
  `storage_url` <span class="hljs-type">varchar</span>(<span class="hljs-number">512</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ–‡ä»¶æœ€ç»ˆå­˜å‚¨åœ°å€ï¼ˆäº‘ç«¯æˆ–æœ¬åœ°è·¯å¾„ï¼‰'</span>,
  `uploader` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸Šä¼ äºº'</span>,
  `status` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1'</span> COMMENT <span class="hljs-string">'çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ2-åˆ é™¤ä¸­ï¼Œ3-å·²å½’æ¡£'</span>,
  `remark` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¤‡æ³¨'</span>,
  `created_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `file_hash` (`file_hash`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'å·²ä¸Šä¼ æ–‡ä»¶ä¿¡æ¯è¡¨ï¼ˆæ”¯æŒå¤šäº‘å­˜å‚¨ï¼‰'</span>;
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li><code>file_hash</code> æ˜¯å…¨å±€å”¯ä¸€æ ‡è¯†ï¼Œç”¨äºç§’ä¼ å’ŒæŸ¥é‡ï¼›</li>
<li><code>storage_url</code> è®°å½•æœ€ç»ˆå¯è®¿é—®è·¯å¾„ï¼›</li>
<li><code>status</code> å¯æ‰©å±•ä¸ºåˆ é™¤ã€å½’æ¡£ç­‰åç»­æ“ä½œï¼›</li>
<li>è¿™å¼ è¡¨å’Œä¸šåŠ¡ç³»ç»Ÿä¸­çš„â€œæ–‡æ¡£è§£æâ€ã€â€œçŸ¥è¯†åº“æ„å»ºâ€å¯ä»¥ç›´æ¥å…³è”ã€‚</li>
</ul>
<h4 data-id="heading-17">å››ã€ä¸‰å¼ è¡¨ä¹‹é—´çš„å…³ç³»</h4>
<p>è¿™ä¸‰å¼ è¡¨ä¹‹é—´çš„å…³ç³»æˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss">upload_task  (ä¸Šä¼ ä»»åŠ¡)
    â”œâ”€â”€ upload_chunk (åˆ†ç‰‡è¯¦æƒ…)
    â””â”€â”€ file_info    (æœ€ç»ˆæ–‡ä»¶)
</code></pre>
<ul>
<li><code>upload_task</code> ç®¡ç†ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸï¼›</li>
<li><code>upload_chunk</code> è·Ÿè¸ªæ¯ä¸ªåˆ†ç‰‡çš„ä¸Šä¼ è¿›åº¦ï¼›</li>
<li><code>file_info</code> ä¿å­˜æœ€ç»ˆæ–‡ä»¶ç´¢å¼•ï¼Œç”¨äºç§’ä¼ ä¸åç»­ AI å¤„ç†ã€‚</li>
</ul>
<p>è¿™æ ·è®¾è®¡çš„å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>ä¸Šä¼ çŠ¶æ€å¯è¿½è¸ªï¼›</li>
<li>ä¸Šä¼ ä»»åŠ¡å¯æ¢å¤ï¼›</li>
<li>æ–‡ä»¶ä¿¡æ¯å¯ç»Ÿä¸€ç®¡ç†ï¼›</li>
<li>å¤šèŠ‚ç‚¹éƒ¨ç½²ä¹Ÿèƒ½ä¿è¯ä¸€è‡´æ€§ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-18">ä¸Šä¼ çŠ¶æ€æµè½¬ä¸ä»»åŠ¡æ¢å¤æœºåˆ¶</h3>
<p>æœ‰äº†å‰é¢çš„ä¸‰å¼ æ ¸å¿ƒè¡¨ï¼Œæ•´ä¸ªä¸Šä¼ çš„è¿‡ç¨‹å°±èƒ½è¢«â€œçŠ¶æ€æœºåŒ–â€ç®¡ç†ã€‚<br/>
ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›æ¯ä¸€ä¸ªä¸Šä¼ ä»»åŠ¡ä»åˆ›å»ºã€ä¸Šä¼ ã€åˆå¹¶åˆ°å®Œæˆï¼Œéƒ½èƒ½æœ‰ä¸€ä¸ªæ˜ç¡®çš„çŠ¶æ€ï¼Œ<br/>
ç³»ç»Ÿä¹Ÿèƒ½åœ¨ä»»æ„é˜¶æ®µä¸­æ–­åæ¢å¤ï¼Œä¸éœ€è¦ç”¨æˆ·é‡æ–°æ¥ä¸€éã€‚</p>
<p>æˆ‘ä»¬æŠŠæ•´ä¸ªä¸Šä¼ ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†æˆå‡ ä¸ªå…³é”®çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-java" lang="java">WAITING(<span class="hljs-number">0</span>, <span class="hljs-string">"å¾…ä¸Šä¼ "</span>),
UPLOADING(<span class="hljs-number">1</span>, <span class="hljs-string">"ä¸Šä¼ ä¸­"</span>),
MERGING(<span class="hljs-number">2</span>, <span class="hljs-string">"åˆå¹¶ä¸­"</span>),
COMPLETED(<span class="hljs-number">3</span>, <span class="hljs-string">"å·²å®Œæˆ"</span>),
CANCELED(<span class="hljs-number">4</span>, <span class="hljs-string">"å·²å–æ¶ˆ"</span>),
FAILED(<span class="hljs-number">5</span>, <span class="hljs-string">"ä¸Šä¼ å¤±è´¥"</span>),
CHUNK_MERGED(<span class="hljs-number">6</span>, <span class="hljs-string">"å·²åˆå¹¶"</span>),
PAUSED(<span class="hljs-number">7</span>, <span class="hljs-string">"å·²æš‚åœ"</span>);
</code></pre>
<h4 data-id="heading-19">ä¸€ã€WAITINGï¼ˆå¾…ä¸Šä¼ ï¼‰</h4>
<p>å½“ç”¨æˆ·åœ¨å‰ç«¯å‘èµ·ä¸Šä¼ ã€æ–‡ä»¶åˆ‡ç‰‡è¿˜æ²¡çœŸæ­£ä¼ ä¸Šæ¥ä¹‹å‰ï¼Œ<br/>
ç³»ç»Ÿä¼šå…ˆç”Ÿæˆä¸€ä¸ªä¸Šä¼ ä»»åŠ¡è®°å½•ï¼ˆä¹Ÿå°±æ˜¯ <code>/upload/init</code> æ¥å£é‚£ä¸€æ­¥ï¼‰ã€‚<br/>
è¿™ä¸ªæ—¶å€™ä»»åŠ¡åªæ˜¯â€œç™»è®°â€åœ¨æ•°æ®åº“é‡Œï¼Œè¿˜æ²¡å¼€å§‹ä¼ æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>ä»»åŠ¡åˆšåˆ›å»ºï¼Œè¿˜æ²¡å¼€å§‹è·‘ã€‚</p>
<p>æ­¤æ—¶å‰ç«¯æ‹¿åˆ° uploadIdï¼Œå°±å¯ä»¥å¼€å§‹é€ç‰‡ä¸Šä¼ äº†ã€‚</p>
</blockquote>
<p>åœ¨æ•°æ®åº“å±‚é¢ï¼Œ<code>upload_task.status = 0</code>ï¼Œæ‰€æœ‰çš„åˆ†ç‰‡è¡¨é‡Œè¿˜æ²¡æœ‰æ•°æ®ã€‚</p>
<h4 data-id="heading-20">äºŒã€UPLOADINGï¼ˆä¸Šä¼ ä¸­ï¼‰</h4>
<p>å½“ç¬¬ä¸€ä¸ªåˆ†ç‰‡å¼€å§‹ä¸Šä¼ æ—¶ï¼Œç³»ç»Ÿä¼šæŠŠä»»åŠ¡çŠ¶æ€æ›´æ–°ä¸º <strong>ä¸Šä¼ ä¸­</strong>ã€‚<br/>
è¿™æ—¶å€™æ¯ä¸Šä¼ ä¸€å—åˆ†ç‰‡ï¼Œéƒ½ä¼šå¾€ <code>upload_chunk</code> è¡¨é‡Œå†™å…¥ä¸€æ¡è®°å½•ï¼Œ<br/>
å¹¶ä¸”æ›´æ–°ä»»åŠ¡çš„ <code>uploaded_chunks</code> å­—æ®µã€‚</p>
<p>æˆ‘ä»¬ä¼šå‘¨æœŸæ€§åœ°æ ¹æ®åˆ†ç‰‡ä¸Šä¼ æ•°é‡å»æ›´æ–°è¿›åº¦æ¡ï¼Œ<br/>
æ¯”å¦‚å·²ä¸Šä¼  35 / 100 å—ï¼Œç³»ç»Ÿå°±çŸ¥é“è¿™éƒ¨åˆ†å¯ä»¥æ¢å¤ã€‚</p>
<p>è¿™ä¸ªé˜¶æ®µæ˜¯ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸé‡Œæœ€æ´»è·ƒçš„ä¸€æ®µï¼š<br/>
ç”¨æˆ·å¯èƒ½æš‚åœã€æ–­ç½‘ã€åˆ·æ–°é¡µé¢ã€ç”šè‡³æµè§ˆå™¨å´©æºƒã€‚<br/>
ä½†æ˜¯æ²¡å…³ç³»ï¼Œå› ä¸ºåˆ†ç‰‡ä¿¡æ¯éƒ½è½åœ°åˆ°æ•°æ®åº“äº†ï¼Œ<br/>
æˆ‘ä»¬èƒ½éšæ—¶é€šè¿‡ <code>upload_chunk</code> çš„çŠ¶æ€é‡æ–°æ¢å¤ä¸Šä¼ ã€‚</p>
<h4 data-id="heading-21">ä¸‰ã€PAUSEDï¼ˆå·²æš‚åœï¼‰</h4>
<p>å¦‚æœç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»â€œæš‚åœä¸Šä¼ â€ï¼Œ<br/>
ç³»ç»Ÿå°±ä¼šæŠŠä»»åŠ¡çŠ¶æ€æ ‡è®°ä¸º <code>PAUSED</code>ã€‚</p>
<p>æš‚åœå¹¶ä¸ä¼šåˆ é™¤åˆ†ç‰‡ï¼Œåªæ˜¯å‘Šè¯‰ç³»ç»Ÿâ€œä¸è¦å†ç»§ç»­å‘è¯·æ±‚â€ã€‚<br/>
è¿™æ ·å½“ç”¨æˆ·é‡æ–°ç‚¹å‡»â€œç»§ç»­ä¸Šä¼ â€æ—¶ï¼Œ<br/>
å‰ç«¯åªéœ€ä»åç«¯æ‹¿åˆ°â€œå“ªäº›åˆ†ç‰‡è¿˜æ²¡ä¸Šä¼ â€ï¼Œå°±èƒ½æ–­ç‚¹ç»­ä¼ ã€‚</p>
<p>è¿™ä¸ªçŠ¶æ€ä¸€èˆ¬åªåœ¨ç”¨æˆ·æ§åˆ¶çš„æƒ…å†µä¸‹å‡ºç°ï¼Œ<br/>
æ¯”å¦‚ç½‘ç»œä¸å¥½ã€æˆ–è€…ä¸­é€”åˆ‡æ¢ç½‘ç»œæ—¶æš‚åœã€‚</p>
<h4 data-id="heading-22">å››ã€CANCELEDï¼ˆå·²å–æ¶ˆï¼‰</h4>
<p>å–æ¶ˆå’Œæš‚åœä¸åŒï¼Œå–æ¶ˆæ„å‘³ç€ç”¨æˆ·å½»åº•æ”¾å¼ƒäº†è¿™ä¸ªä¸Šä¼ ä»»åŠ¡ã€‚<br/>
ä»»åŠ¡ä¼šè¢«æ ‡è®°ä¸º <code>CANCELED</code>ï¼ŒåŒæ—¶ç³»ç»Ÿå¯ä»¥é€‰æ‹©ï¼š</p>
<ul>
<li>åˆ é™¤å·²ç»ä¸Šä¼ çš„ä¸´æ—¶åˆ†ç‰‡æ–‡ä»¶ï¼›</li>
<li>æˆ–è€…ä¿ç•™ä¸€æ®µæ—¶é—´ç­‰å¾…æ¸…ç†ä»»åŠ¡ã€‚</li>
</ul>
<p>åœ¨åå°æ—¥å¿—ä¸­ï¼Œè¿™ä¸ªçŠ¶æ€ä¸»è¦ç”¨äºå®¡è®¡ï¼š<br/>
è®°å½•è°å–æ¶ˆäº†ä»»åŠ¡ã€åœ¨ä»€ä¹ˆæ—¶é—´ã€ä¸Šä¼ äº†å¤šå°‘è¿›åº¦ã€‚</p>
<h4 data-id="heading-23">äº”ã€MERGINGï¼ˆåˆå¹¶ä¸­ï¼‰</h4>
<p>å½“æ‰€æœ‰åˆ†ç‰‡éƒ½ä¸Šä¼ å®Œæˆåï¼Œ<br/>
åç«¯ä¼šè‡ªåŠ¨æˆ–æ‰‹åŠ¨è§¦å‘æ–‡ä»¶åˆå¹¶é€»è¾‘ï¼ˆè°ƒç”¨ <code>/upload/merge</code>ï¼‰ã€‚<br/>
æ­¤æ—¶ä»»åŠ¡çŠ¶æ€ä¼šåˆ‡æ¢ä¸º <strong>MERGING</strong>ï¼Œè¡¨ç¤ºç³»ç»Ÿæ­£åœ¨è¿›è¡Œæœ€åä¸€æ­¥ã€‚</p>
<p>åœ¨è¿™ä¸€æ­¥é‡Œï¼š</p>
<ul>
<li>å¦‚æœæ˜¯æœ¬åœ°å­˜å‚¨ï¼Œä¼šé€ä¸ªè¯»å–åˆ†ç‰‡æ–‡ä»¶å¹¶æ‹¼æ¥ä¸ºå®Œæ•´æ–‡ä»¶ï¼›</li>
<li>å¦‚æœæ˜¯äº‘å­˜å‚¨ï¼ˆæ¯”å¦‚ OSSã€MinIOï¼‰ï¼Œåˆ™ä¼šè§¦å‘æœåŠ¡ç«¯çš„åˆ†ç‰‡åˆå¹¶ APIã€‚</li>
</ul>
<p>åˆå¹¶è¿‡ç¨‹é€šå¸¸æ¯”è¾ƒè€—æ—¶ï¼Œå°¤å…¶æ˜¯å‡  GB çš„æ–‡ä»¶ï¼Œ<br/>
æ‰€ä»¥å•ç‹¬æ‹¿å‡ºæ¥ä½œä¸ºä¸€ä¸ªæ˜ç¡®çŠ¶æ€æ˜¯å¿…è¦çš„ã€‚</p>
<h4 data-id="heading-24">å…­ã€CHUNK_MERGEDï¼ˆå·²åˆå¹¶ï¼‰</h4>
<p>æœ‰äº›ç³»ç»Ÿä¼šæŠŠåˆå¹¶æˆåŠŸä½†æœªåšåç»­å¤„ç†çš„çŠ¶æ€å•ç‹¬æ ‡å‡ºæ¥ï¼Œ<br/>
æ¯”å¦‚æ–‡ä»¶å·²ç»åˆå¹¶ï¼Œä½†è¿˜æ²¡å…¥åº“ã€è¿˜æ²¡è§£æã€‚<br/>
è¿™ä¸ªçŠ¶æ€å¯ä»¥è®©æˆ‘ä»¬åœ¨åˆå¹¶ä¹‹åè¿˜æœ‰æœºä¼šåšæ–‡ä»¶æ ¡éªŒæˆ–åå¤„ç†ã€‚</p>
<p>ä¸è¿‡åœ¨å®é™…é¡¹ç›®é‡Œï¼Œä¹Ÿå¯ä»¥ç›´æ¥è·³è¿‡è¿™ä¸€æ­¥ï¼Œ<br/>
åˆå¹¶å®Œåç«‹åˆ»è¿›å…¥ä¸‹ä¸€çŠ¶æ€â€”â€”<code>COMPLETED</code>ã€‚</p>
<h4 data-id="heading-25">ä¸ƒã€COMPLETEDï¼ˆå·²å®Œæˆï¼‰</h4>
<p>æ–‡ä»¶åˆå¹¶å®Œæˆã€éªŒè¯é€šè¿‡ã€å­˜å‚¨è·¯å¾„è½åœ°ã€å†™å…¥ <code>file_info</code> è¡¨ï¼Œ<br/>
è¿™æ—¶å€™ä»»åŠ¡å°±ç®—å½»åº•å®Œæˆäº†ã€‚</p>
<p>åœ¨è¿™ä¸ªçŠ¶æ€ä¸‹ï¼š</p>
<ul>
<li>ç”¨æˆ·å¯ä»¥æ­£å¸¸è®¿é—®æ–‡ä»¶ï¼›</li>
<li>ç³»ç»Ÿå¯ä»¥æ‰§è¡Œåç»­çš„è§£æä»»åŠ¡ï¼ˆæ¯”å¦‚æ–‡æ¡£æ‹†é¡µã€å‘é‡åŒ–ç­‰ï¼‰ï¼›</li>
<li>æ–‡ä»¶å…·å¤‡ç§’ä¼ æ¡ä»¶ï¼Œä¸‹æ¬¡å†ä¸Šä¼ åŒæ ·çš„æ–‡ä»¶ä¼šç›´æ¥è·³è¿‡ã€‚</li>
</ul>
<p><code>COMPLETED</code> æ˜¯æ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„ç»ˆç‚¹çŠ¶æ€ã€‚<br/>
åœ¨æ•°æ®åº“ä¸­ï¼Œä»»åŠ¡è®°å½•ä¼šæ›´æ–°æœ€ç»ˆè·¯å¾„ã€å­˜å‚¨ç±»å‹ã€å®Œæˆæ—¶é—´ç­‰å­—æ®µã€‚</p>
<h4 data-id="heading-26">å…«ã€FAILEDï¼ˆä¸Šä¼ å¤±è´¥ï¼‰</h4>
<p>ä¸Šä¼ è¿‡ç¨‹ä¸­å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œæ¯”å¦‚ç½‘ç»œä¸­æ–­ã€ç£ç›˜å†™å…¥å¼‚å¸¸ã€OSS ä¸Šä¼ å¤±è´¥ç­‰ï¼Œ<br/>
ç³»ç»Ÿä¼šæ ‡è®°ä»»åŠ¡ä¸º <code>FAILED</code>ã€‚<br/>
è¿™ä¸€çŠ¶æ€ä¸ä¼šè‡ªåŠ¨æ¸…ç†ï¼Œ<br/>
æ–¹ä¾¿ç®¡ç†å‘˜äº‹åè¿½è¸ªé”™è¯¯åŸå› æˆ–äººå·¥æ¢å¤ã€‚</p>
<p>å¤±è´¥ä»»åŠ¡åœ¨è®¾è®¡ä¸Šä¸€èˆ¬å…è®¸â€œé‡æ–°å¯åŠ¨â€ï¼Œ<br/>
ä¹Ÿå°±æ˜¯é€šè¿‡ä»»åŠ¡ ID é‡æ–°è§¦å‘ä¸Šä¼ ï¼Œä»æœªå®Œæˆçš„åˆ†ç‰‡ç»§ç»­ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢è¿™å¼ å›¾å¯ä»¥æ›´ç›´è§‚åœ°çœ‹åˆ°æ•´ä¸ªä¸Šä¼ ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a26c793e4d0b4e418d2c8dd72653b72a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517525&amp;x-signature=2puIDO4Ge2N6k5yY%2BVJ4srWSB1c%3D" alt="Untitled diagram-2025-11-10-033341.png" loading="lazy"/></p>
<h4 data-id="heading-27">ä¹ã€ä»»åŠ¡æ¢å¤æœºåˆ¶</h4>
<p>åœ¨è¿™å¥—æœºåˆ¶ä¸‹ï¼Œä»»åŠ¡æ¢å¤å°±å˜å¾—éå¸¸è‡ªç„¶ã€‚<br/>
å‰ç«¯æ¯æ¬¡è¿›å…¥ä¸Šä¼ é¡µé¢æ—¶ï¼Œåªè¦ä¼ å…¥æ–‡ä»¶çš„ hashï¼Œ<br/>
åç«¯å°±èƒ½é€šè¿‡ <code>upload_task</code> å’Œ <code>upload_chunk</code> åˆ¤æ–­ï¼š</p>
<ol>
<li>è¿™ä¸ªæ–‡ä»¶æœ‰æ²¡æœ‰ä¸Šä¼ ä»»åŠ¡ï¼›</li>
<li>å¦‚æœæœ‰ï¼Œå“ªäº›åˆ†ç‰‡å·²ç»ä¸Šä¼ ï¼›</li>
<li>ä»»åŠ¡å½“å‰çŠ¶æ€æ˜¯ä»€ä¹ˆï¼ˆæš‚åœã€å¤±è´¥è¿˜æ˜¯ä¸Šä¼ ä¸­ï¼‰ã€‚</li>
</ol>
<p>ç„¶åå‰ç«¯åªéœ€è¡¥ä¼ é‚£äº›æœªä¸Šä¼ çš„åˆ†ç‰‡å³å¯ã€‚<br/>
è¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ <strong>æ–­ç‚¹ç»­ä¼ ï¼ˆResumable Uploadï¼‰</strong> ã€‚</p>
<p>åœ¨é›†ç¾¤ç¯å¢ƒä¸­ï¼Œè¿™å¥—é€»è¾‘åŒæ ·æˆç«‹ï¼Œ<br/>
å› ä¸ºä»»åŠ¡ä¸åˆ†ç‰‡çŠ¶æ€éƒ½è½åœ¨æ•°æ®åº“ï¼Œä¸ä¾èµ–å•å°æœåŠ¡å™¨ã€‚<br/>
æ— è®ºè¯·æ±‚æ‰“åˆ°å“ªä¸€å°æœºå™¨ï¼Œä¸Šä¼ è¿›åº¦éƒ½æ˜¯ç»Ÿä¸€å¯è§çš„ã€‚</p>
<h4 data-id="heading-28">åã€ä¸­æ–­åå¦‚ä½•ç»­ä¼ </h4>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œç”¨æˆ·ä¸Šä¼ ä¸­æ–­æ˜¯å¾ˆå¸¸è§çš„ã€‚<br/>
æ¯”å¦‚æ–‡ä»¶å¤ªå¤§ä¸Šä¼ åˆ°ä¸€åŠï¼Œæµè§ˆå™¨çªç„¶å…³äº†ï¼›<br/>
æˆ–è€…å…¬å¸ç½‘ç»œæ–­äº†ï¼Œæœºå™¨é‡å¯äº†ï¼›<br/>
ç”šè‡³æœ‰äººç›´æ¥æ¢äº†ç”µè„‘ç»§ç»­æ“ä½œã€‚</p>
<p>å¦‚æœç³»ç»Ÿæ²¡æœ‰ä»»åŠ¡æ¢å¤æœºåˆ¶ï¼Œé‚£ç”¨æˆ·æ¯æ¬¡éƒ½å¾—é‡æ–°ä¼ ä¸€éï¼Œ<br/>
å°¤å…¶æ˜¯é‚£ç§å‡ ä¸ª G çš„æ–‡ä»¶ï¼Œä¸ä½†æµªè´¹æ—¶é—´ï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚<br/>
æ‰€ä»¥æˆ‘ä»¬åœ¨è®¾è®¡è¿™å¥—ä¸Šä¼ ä¸­å¿ƒæ—¶ï¼Œ<br/>
ä¸€å¼€å§‹å°±è€ƒè™‘äº†â€œ<strong>æ–­ç‚¹ç»­ä¼ </strong>â€å’Œâ€œ<strong>ä»»åŠ¡æ¢å¤</strong>â€çš„é—®é¢˜ã€‚</p>
<p><strong>1. æ¢å¤ä¸Šä¼ é çš„å…¶å®æ˜¯æ•°æ®åº“é‡Œçš„çŠ¶æ€</strong></p>
<p>æ–­ç‚¹ç»­ä¼ çš„æ ¸å¿ƒé€»è¾‘ï¼Œå…¶å®å¾ˆç®€å•ï¼š<br/>
æˆ‘ä»¬è®©ä»»åŠ¡å’Œåˆ†ç‰‡çš„çŠ¶æ€éƒ½å†™è¿›æ•°æ®åº“ã€‚</p>
<p>æ¯å½“ç”¨æˆ·é‡æ–°è¿›å…¥ä¸Šä¼ é¡µé¢ã€é€‰ä¸­åŒä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œ<br/>
å‰ç«¯ä¼šå…ˆè®¡ç®—å‡ºæ–‡ä»¶çš„ hashï¼Œç„¶åè°ƒç”¨ <code>/upload/check</code> æ¥å£ã€‚<br/>
åç«¯æ”¶åˆ° hash åï¼Œä¼šä¾æ¬¡å»æŸ¥ä¸‰å¼ è¡¨ï¼š</p>
<ol>
<li>
<p><strong>å…ˆæŸ¥ <code>file_info</code></strong><br/>
å¦‚æœèƒ½æŸ¥åˆ°ï¼Œè¯´æ˜æ–‡ä»¶ä¹‹å‰å·²ç»ä¸Šä¼ å¹¶åˆå¹¶æˆåŠŸï¼Œ<br/>
è¿™æ—¶å€™ç›´æ¥è¿”å›â€œæ–‡ä»¶å·²å­˜åœ¨â€ï¼Œå‰ç«¯å°±èƒ½å®ç°â€œç§’ä¼ â€ï¼Œä¸éœ€è¦é‡æ–°ä¸Šä¼ ã€‚</p>
</li>
<li>
<p><strong>æŸ¥ä¸åˆ° <code>file_info</code>ï¼Œå°±å»æŸ¥ <code>upload_task</code></strong><br/>
å¦‚æœæ‰¾åˆ°äº†å¯¹åº”ä»»åŠ¡ï¼Œå°±è¯´æ˜è¿™ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°ä¸€åŠè¢«ä¸­æ–­äº†ã€‚<br/>
è¿™æ—¶æˆ‘ä»¬ä¼šè¿”å›è¿™ä¸ªä»»åŠ¡çš„ uploadIdã€‚</p>
</li>
<li>
<p><strong>å†æŸ¥ `upload_chunk``</strong><br/>
ç³»ç»Ÿä¼šç»Ÿè®¡å‡ºå“ªäº›åˆ†ç‰‡å·²ç»ä¸Šä¼ æˆåŠŸï¼Œå“ªäº›è¿˜æ²¡ä¼ ã€‚<br/>
ç„¶åè¿”å›ä¸€ä¸ªâ€œæœªå®Œæˆçš„åˆ†ç‰‡ç´¢å¼•åˆ—è¡¨â€ç»™å‰ç«¯ã€‚</p>
</li>
</ol>
<p>å‰ç«¯æ‹¿åˆ°è¿™äº›ä¿¡æ¯åï¼Œå°±èƒ½ä»ä¸­æ–­çš„åœ°æ–¹ç»§ç»­å¾€ä¸‹ä¼ ï¼Œ<br/>
ä¸ç”¨å†é‡å¤ä¸Šä¼ å·²ç»å®Œæˆçš„éƒ¨åˆ†ã€‚</p>
<p><strong>2. å‰ç«¯ç»­ä¼ æ—¶çš„æµç¨‹</strong></p>
<p>å‰ç«¯æ‹¿åˆ°æ—§çš„ uploadId å’Œæœªå®Œæˆåˆ†ç‰‡åˆ—è¡¨åï¼Œ<br/>
åªéœ€è¦è·³è¿‡é‚£äº›å·²ç»ä¸Šä¼ æˆåŠŸçš„åˆ†ç‰‡ï¼Œ<br/>
ç„¶åç…§å¸¸è°ƒç”¨ <code>/upload/chunk</code> å»ä¸Šä¼ å‰©ä¸‹çš„éƒ¨åˆ†ã€‚</p>
<p>ä¸Šä¼ è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªåˆ†ç‰‡çš„çŠ¶æ€éƒ½ä¼šè¢«å®æ—¶æ›´æ–°åˆ° <code>upload_chunk</code> è¡¨ä¸­ï¼Œ<br/>
<code>upload_task</code> è¡¨çš„ uploaded_chunks ä¹Ÿä¼šè·Ÿç€åŒæ­¥å¢åŠ ã€‚<br/>
å½“æ‰€æœ‰åˆ†ç‰‡éƒ½ä¸Šä¼ å®Œåï¼Œä»»åŠ¡çŠ¶æ€è‡ªåŠ¨è¿›å…¥ MERGINGï¼ˆåˆå¹¶ä¸­ï¼‰é˜¶æ®µã€‚</p>
<p>æ‰€ä»¥æ•´ä¸ªç»­ä¼ è¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯**â€œåŸºäºæ•°æ®åº“çŠ¶æ€çš„å¢é‡ä¸Šä¼ â€**ã€‚<br/>
ç”¨æˆ·ä¸éœ€è¦é¢å¤–æ“ä½œï¼Œç³»ç»Ÿè‡ªå·±å°±èƒ½æ¢å¤ä¸Šæ¬¡çš„è¿›åº¦ã€‚</p>
<p><strong>3. ä»»åŠ¡çŠ¶æ€å’Œæ¢å¤åˆ¤æ–­</strong></p>
<p>ä»»åŠ¡æ˜¯å¦å…è®¸æ¢å¤ï¼Œç³»ç»Ÿä¼šæ ¹æ® <code>upload_task.status</code> æ¥åˆ¤æ–­ã€‚<br/>
å¤§è‡´é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p>













































<table><thead><tr><th>çŠ¶æ€</th><th>æ˜¯å¦å¯æ¢å¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>WAITING</td><td>å¯ä»¥</td><td>ä»»åŠ¡åˆšåˆ›å»ºï¼Œè¿˜æ²¡å¼€å§‹ä¼ </td></tr><tr><td>UPLOADING</td><td>å¯ä»¥</td><td>æ­£åœ¨ä¸Šä¼ ä¸­ï¼Œå¯ä»¥ç»§ç»­</td></tr><tr><td>PAUSED</td><td>å¯ä»¥</td><td>ç”¨æˆ·ä¸»åŠ¨æš‚åœï¼Œå¯ä»¥æ¢å¤</td></tr><tr><td>FAILED</td><td>å¯ä»¥</td><td>ä¸Šä¼ å¤±è´¥ï¼Œå¯ä»¥é‡æ–°å°è¯•</td></tr><tr><td>CANCELED</td><td>ä¸å¯ä»¥</td><td>ç”¨æˆ·ä¸»åŠ¨å–æ¶ˆï¼Œä¸å†æ¢å¤</td></tr><tr><td>COMPLETED</td><td>ä¸éœ€è¦</td><td>å·²ç»å®Œæˆï¼Œç›´æ¥ç§’ä¼ </td></tr><tr><td>MERGING</td><td>ç­‰å¾…ä¸­</td><td>ç³»ç»Ÿæ­£åœ¨åˆå¹¶ï¼Œå‰ç«¯ç­‰å¾…å³å¯</td></tr></tbody></table>
<p>è¿™å¥—åˆ¤æ–­é€»è¾‘è®©ä»»åŠ¡çš„è¡Œä¸ºæ›´æ¸…æ™°ã€‚<br/>
æ¯”å¦‚ç”¨æˆ·æš‚åœä¸Šä¼ å†å›æ¥æ—¶ï¼Œå¯ä»¥ç›´æ¥æ¢å¤ï¼›<br/>
å¦‚æœä»»åŠ¡å·²ç»å–æ¶ˆï¼Œé‚£å°±ç®—ç”¨æˆ·é‡å¯ä¹Ÿä¸ä¼šå†è‡ªåŠ¨ç»­ä¼ ã€‚</p>
<p><strong>4. å¤šæœºå™¨éƒ¨ç½²ä¸‹çš„æ¢å¤é—®é¢˜</strong></p>
<p>æœ‰äº›äººä¼šæ‹…å¿ƒï¼šå¦‚æœæˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯é›†ç¾¤éƒ¨ç½²çš„ï¼Œ<br/>
ä¸Šä¼ æ—¶ä¸­æ–­åå†ç»­ä¼ ï¼Œä¸‡ä¸€è¯·æ±‚æ‰“åˆ°å¦ä¸€å°æœºå™¨ä¸Šï¼Œ<br/>
è¿˜èƒ½æ¢å¤å—ï¼Ÿ</p>
<p>å…¶å®æ²¡é—®é¢˜ã€‚<br/>
å› ä¸ºæˆ‘ä»¬æ‰€æœ‰ä»»åŠ¡å’Œåˆ†ç‰‡çš„çŠ¶æ€éƒ½æ˜¯å†™è¿›æ•°æ®åº“çš„ï¼Œ<br/>
ä¸ä¾èµ–å†…å­˜æˆ–æœ¬åœ°æ–‡ä»¶ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå“ªæ€•ç”¨æˆ·ä¸Šæ¬¡ä¸Šä¼ åœ¨ A æœºå™¨ï¼Œè¿™æ¬¡ç»­ä¼ åˆ°äº† B æœºå™¨ï¼Œ<br/>
ç³»ç»Ÿä»ç„¶èƒ½æ ¹æ®æ•°æ®åº“çš„è®°å½•çŸ¥é“ï¼š<br/>
è¿™ä¸ª uploadId ä¸‹çš„å“ªäº›åˆ†ç‰‡å·²ç»ä¸Šä¼ å®Œï¼Œå“ªäº›è¿˜æ²¡ä¼ ã€‚</p>
<p>æ‰€ä»¥é›†ç¾¤éƒ¨ç½²ä¸‹ä¹Ÿèƒ½æ— ç¼ç»­ä¼ ï¼Œä¸ä¼šå‡ºç°â€œä¸åŒæœºå™¨ä¸è®¤ä»»åŠ¡â€çš„æƒ…å†µã€‚</p>
<p><strong>5. å°ç»“</strong></p>
<p>æ•´ä¸ªä»»åŠ¡æ¢å¤æœºåˆ¶é çš„å°±æ˜¯ä¸¤å¼ è¡¨ï¼š<code>upload_task</code> å’Œ <code>upload_chunk</code>ã€‚<br/>
<code>upload_task</code> è´Ÿè´£è®°å½•ä»»åŠ¡æ€»ä½“è¿›åº¦ï¼Œ<br/>
<code>upload_chunk</code> è´Ÿè´£è®°å½•æ¯ä¸ªåˆ†ç‰‡çš„ä¸Šä¼ çŠ¶æ€ã€‚</p>
<p>å½“ç”¨æˆ·é‡æ–°ä¸Šä¼ æ—¶ï¼Œæˆ‘ä»¬æŸ¥è¡¨åˆ¤æ–­è¿›åº¦ï¼Œ<br/>
å‰ç«¯ä»æœªå®Œæˆçš„åœ°æ–¹ç»§ç»­ä¼ ï¼Œå°±èƒ½å®ç°çœŸæ­£æ„ä¹‰ä¸Šçš„â€œæ–­ç‚¹ç»­ä¼ â€ã€‚</p>
<p>è¿™å¥—æœºåˆ¶æœ‰å‡ ä¸ªæ˜¾è‘—çš„å¥½å¤„ï¼š</p>
<ul>
<li>ä¸Šä¼ è¿›åº¦å¯è¿½è¸ªï¼›</li>
<li>ä¸­æ–­åå¯æ¢å¤ï¼›</li>
<li>æ”¯æŒé›†ç¾¤éƒ¨ç½²ï¼›</li>
<li>ä¸ä¾èµ–æµè§ˆå™¨ç¼“å­˜æˆ– Sessionã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œåªè¦æ•°æ®åº“æ²¡ä¸¢ï¼Œä»»åŠ¡è®°å½•è¿˜åœ¨ï¼Œ<br/>
ä¸Šä¼ è¿›åº¦å°±èƒ½æ¢å¤ï¼Œå“ªæ€•æ¢æœºå™¨ã€é‡å¯ç³»ç»Ÿéƒ½æ²¡é—®é¢˜ã€‚</p>
<hr/>
<h4 data-id="heading-29">æ–‡ä»¶åˆå¹¶ä¸å®Œæ•´æ€§æ ¡éªŒ</h4>
<p>å‰é¢çš„æ‰€æœ‰æ­¥éª¤ï¼Œå…¶å®éƒ½æ˜¯åœ¨ä¸ºè¿™ä¸€åˆ»åšå‡†å¤‡ã€‚<br/>
å½“ç”¨æˆ·çš„æ‰€æœ‰åˆ†ç‰‡éƒ½ä¸Šä¼ å®Œæˆåï¼Œæ¥ä¸‹æ¥æœ€é‡è¦çš„å·¥ä½œå°±æ˜¯ï¼š<br/>
<strong>æŠŠè¿™äº›åˆ†ç‰‡æ‹¼æˆä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶ï¼Œå¹¶ä¸”ç¡®ä¿æ–‡ä»¶å†…å®¹æ²¡æœ‰å‡ºé”™ã€‚</strong></p>
<p>è¿™ä¸€æ­¥çœ‹ä¼¼ç®€å•ï¼Œä½†å…¶å®æ˜¯æ•´ä¸ªå¤§æ–‡ä»¶ä¸Šä¼ æµç¨‹é‡Œæœ€å®¹æ˜“å‡ºé—®é¢˜çš„åœ°æ–¹ã€‚<br/>
å°¤å…¶åœ¨é›†ç¾¤éƒ¨ç½²ä¸‹ï¼Œå¦‚æœä¸åŒåˆ†ç‰‡åˆ†å¸ƒåœ¨ä¸åŒæœºå™¨ä¸Šï¼Œ<br/>
é‚£åˆå¹¶é€»è¾‘å°±ä¸èƒ½åªé æœ¬åœ°æ–‡ä»¶è·¯å¾„å»æ‹¼æ¥ï¼Œå¦åˆ™æ ¹æœ¬æ‰¾ä¸åˆ°æ‰€æœ‰åˆ†ç‰‡ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å…ˆæ¥ç†ä¸€ç†æ•´ä¸ªæ€è·¯ã€‚</p>
<h4 data-id="heading-30">ä¸€ã€åˆå¹¶çš„è§¦å‘æ—¶æœº</h4>
<p>å‰ç«¯åœ¨æ£€æµ‹åˆ°æ‰€æœ‰åˆ†ç‰‡éƒ½ä¸Šä¼ å®Œæˆåï¼Œä¼šè°ƒç”¨ <code>/upload/merge</code> æ¥å£ã€‚<br/>
è¿™ä¸ªæ¥å£çš„ä½œç”¨å°±æ˜¯é€šçŸ¥åç«¯ï¼š<br/>
â€œè¿™ä¸ªä»»åŠ¡çš„æ‰€æœ‰åˆ†ç‰‡éƒ½ä¼ å®Œäº†ï¼Œç°åœ¨å¯ä»¥å¼€å§‹åˆå¹¶äº†ã€‚â€</p>
<p>åç«¯æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šå…ˆå»æŸ¥æ•°æ®åº“ç¡®è®¤å‡ ä¸ªå…³é”®ä¿¡æ¯ï¼š</p>
<ol>
<li>è¿™ä¸ªä»»åŠ¡å¯¹åº”çš„ uploadId æ˜¯å¦å­˜åœ¨ï¼›</li>
<li><code>upload_chunk</code> è¡¨é‡Œæ‰€æœ‰åˆ†ç‰‡æ˜¯å¦éƒ½å¤„äº â€œå·²ä¸Šä¼ â€ çŠ¶æ€ï¼›</li>
<li>å½“å‰ä»»åŠ¡çŠ¶æ€æ˜¯å¦å…è®¸åˆå¹¶ï¼ˆä¾‹å¦‚ä¸æ˜¯æš‚åœã€å–æ¶ˆæˆ–å¤±è´¥ï¼‰ã€‚</li>
</ol>
<p>ç¡®è®¤æ— è¯¯åï¼Œä»»åŠ¡çŠ¶æ€ä¼šä» <code>UPLOADING</code> å˜æˆ <code>MERGING</code>ï¼Œ<br/>
æ­£å¼è¿›å…¥æ–‡ä»¶åˆå¹¶é˜¶æ®µã€‚</p>
<h4 data-id="heading-31">äºŒã€æœ¬åœ°åˆå¹¶é€»è¾‘</h4>
<p>å¦‚æœç³»ç»Ÿé…ç½®çš„æ˜¯æœ¬åœ°å­˜å‚¨ï¼ˆä¹Ÿå°±æ˜¯ <code>cloud.enable = false</code>ï¼‰ï¼Œ<br/>
é‚£æ‰€æœ‰åˆ†ç‰‡æ–‡ä»¶éƒ½ä¿å­˜åœ¨æœåŠ¡å™¨çš„ä¸´æ—¶ç›®å½•ä¸­ã€‚</p>
<p>åˆå¹¶é€»è¾‘å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>åç«¯æŒ‰åˆ†ç‰‡çš„ <code>chunk_index</code> é¡ºåºï¼Œä¾æ¬¡è¯»å–æ¯ä¸ªåˆ†ç‰‡æ–‡ä»¶ã€‚</li>
<li>é€ä¸ªå†™å…¥åˆ°ä¸€ä¸ªæ–°çš„ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚ <code>merge.zip</code>ã€‚</li>
<li>æ¯åˆå¹¶ä¸€ä¸ªåˆ†ç‰‡ï¼Œå°±æ›´æ–°æ•°æ®åº“ä¸­çš„çŠ¶æ€ã€‚</li>
<li>åˆå¹¶å®Œæˆåï¼ŒæŠŠä»»åŠ¡çŠ¶æ€æ›´æ–°ä¸º <code>COMPLETED</code>ï¼Œå¹¶å†™å…¥æœ€ç»ˆè·¯å¾„ã€‚</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹çœ‹èµ·æ¥å¾ˆç›´è§‚ï¼Œ<br/>
ä½†è¿™é‡Œæœ‰ä¸¤ä¸ªè¦ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p>
<ul>
<li><strong>å†™å…¥é¡ºåºè¦ä¸¥æ ¼æŒ‰ç…§åˆ†ç‰‡ç´¢å¼•</strong>ï¼Œå¦åˆ™æ–‡ä»¶å†…å®¹ä¼šé”™ä¹±ï¼›</li>
<li><strong>æ–‡ä»¶ IO è¦ç”¨æµå¼å†™å…¥ï¼ˆStreamï¼‰</strong> ï¼Œé¿å…å†…å­˜ä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰åˆ†ç‰‡å¯¼è‡´æº¢å‡ºã€‚</li>
</ul>
<p>åˆå¹¶å®Œæˆåï¼Œæˆ‘ä»¬ä¼šè®¡ç®—æ•´ä¸ªæ–‡ä»¶çš„ MD5ï¼Œä¸åŸå§‹ fileHash å¯¹æ¯”ï¼Œ<br/>
å¦‚æœä¸ä¸€è‡´ï¼Œå°±è¯´æ˜åˆå¹¶è¿‡ç¨‹ä¸­æ•°æ®ä¸¢å¤±æˆ–å‡ºé”™ã€‚<br/>
è¿™ç§æƒ…å†µä»»åŠ¡ä¼šè¢«æ ‡è®°ä¸º <code>FAILED</code>ï¼Œå¹¶åœ¨æ—¥å¿—ä¸­ç•™ä¸‹å¼‚å¸¸è®°å½•ã€‚</p>
<h4 data-id="heading-32">ä¸‰ã€äº‘ç«¯åˆå¹¶é€»è¾‘</h4>
<p>å¦‚æœæˆ‘ä»¬é…ç½®äº†äº‘å­˜å‚¨ï¼ˆæ¯”å¦‚ OSSã€COSã€MinIO ç­‰ï¼‰ï¼Œ<br/>
é‚£åˆ†ç‰‡æ–‡ä»¶å°±ä¸æ˜¯å­˜åœ¨æœ¬åœ°ç£ç›˜ï¼Œè€Œæ˜¯ä¸Šä¼ åˆ°äº‘ç«¯çš„å¯¹è±¡å­˜å‚¨æ¡¶é‡Œã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆå¹¶é€»è¾‘å°±ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±æ‹¼æ–‡ä»¶äº†ï¼Œ<br/>
å› ä¸ºå¤§éƒ¨åˆ†äº‘å­˜å‚¨æœåŠ¡éƒ½æä¾›äº†â€œåˆ†ç‰‡åˆå¹¶â€çš„ APIã€‚</p>
<p>æ¯”å¦‚ä»¥ OSS ä¸ºä¾‹ï¼Œä¸Šä¼ æ—¶æˆ‘ä»¬è°ƒç”¨çš„æ˜¯ <code>uploadPart</code> æ¥å£ï¼Œ<br/>
åˆå¹¶æ—¶åªéœ€è¦è°ƒç”¨ <code>completeMultipartUpload</code>ï¼Œ<br/>
å®ƒä¼šæ ¹æ®ä¸Šä¼ æ—¶çš„åˆ†ç‰‡é¡ºåºè‡ªåŠ¨åˆå¹¶ä¸ºä¸€ä¸ªå®Œæ•´å¯¹è±¡ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹çš„ä¼˜ç‚¹æ˜¯ï¼š</p>
<ul>
<li>ä¸å ç”¨æœ¬åœ°ç£ç›˜ï¼›</li>
<li>ä¸å—å•æœº IO é™åˆ¶ï¼›</li>
<li>äº‘ç«¯è‡ªåŠ¨æ ¡éªŒæ¯ä¸ªåˆ†ç‰‡çš„å®Œæ•´æ€§ã€‚</li>
</ul>
<p>æ‰€ä»¥åœ¨äº‘å­˜å‚¨åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦åšä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>é€šçŸ¥äº‘æœåŠ¡å»æ‰§è¡Œåˆå¹¶ï¼›</li>
<li>æˆåŠŸåè®°å½•æœ€ç»ˆçš„æ–‡ä»¶åœ°å€ï¼ˆ<code>storage_url</code>ï¼‰åˆ°æ•°æ®åº“ã€‚</li>
</ol>
<p>è¿™æ ·æ•´ä¸ªæµç¨‹å°±é—­ç¯äº†ã€‚</p>
<h4 data-id="heading-33">å››ã€é›†ç¾¤éƒ¨ç½²ä¸‹çš„åˆå¹¶é—®é¢˜</h4>
<p>å•æœºæƒ…å†µä¸‹ï¼Œåˆå¹¶å¾ˆç®€å•ï¼Œå› ä¸ºæ‰€æœ‰åˆ†ç‰‡éƒ½åœ¨æœ¬åœ°ã€‚<br/>
ä½†å¦‚æœç³»ç»Ÿæ˜¯é›†ç¾¤éƒ¨ç½²çš„ï¼Œåˆ†ç‰‡è¯·æ±‚å¯èƒ½æ‰“åˆ°äº†ä¸åŒæœºå™¨ï¼Œ<br/>
è¿™æ—¶å€™åˆ†ç‰‡æ–‡ä»¶å°±ä¼šåˆ†æ•£åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šã€‚</p>
<p>æˆ‘ä»¬åœ¨è®¾è®¡æ—¶è€ƒè™‘äº†ä¸‰ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<p><strong>æ–¹æ¡ˆ 1ï¼šå…±äº«å­˜å‚¨ï¼ˆç§æœ‰åŒ–éƒ¨ç½²ä¸‹æ¯”è¾ƒæ¨èï¼‰</strong></p>
<p>æœ€å¸¸è§çš„åšæ³•æ˜¯æŠŠæ‰€æœ‰æœºå™¨çš„ä¸Šä¼ ç›®å½•æŒ‡å‘åŒä¸€ä¸ªå…±äº«è·¯å¾„ï¼Œ<br/>
æ¯”å¦‚é€šè¿‡ NFSã€NASã€æˆ–å¯¹è±¡å­˜å‚¨æŒ‚è½½åˆ° <code>/data/uploads</code>ã€‚<br/>
è¿™æ ·æ— è®ºç”¨æˆ·ä¸Šä¼ çš„åˆ†ç‰‡æ‰“åˆ°å“ªå°æœºå™¨ï¼Œ<br/>
æœ€ç»ˆéƒ½ä¼šå†™å…¥åŒä¸€ä¸ªç‰©ç†ç›®å½•ã€‚</p>
<p>å½“åˆå¹¶è¯·æ±‚å‘èµ·æ—¶ï¼Œä»»æ„ä¸€å°æœºå™¨éƒ½èƒ½è®¿é—®åˆ°å®Œæ•´çš„åˆ†ç‰‡æ–‡ä»¶ã€‚<br/>
è¿™æ˜¯ç›®å‰åœ¨ä¼ä¸šéƒ¨ç½²ä¸­æœ€ç¨³å®šã€æœ€é€šç”¨çš„æ–¹æ¡ˆã€‚</p>
<p><strong>æ–¹æ¡ˆ 2ï¼šäº‘å­˜å‚¨ä¸­è½¬</strong></p>
<p>å¦‚æœæœºå™¨ä¹‹é—´æ²¡æœ‰å…±äº«ç›®å½•ï¼Œé‚£æˆ‘ä»¬å¯ä»¥è®©æ¯ä¸ªåˆ†ç‰‡å…ˆä¸Šä¼ åˆ°äº‘ç«¯ï¼Œ<br/>
åˆå¹¶æ—¶å†è°ƒç”¨äº‘æœåŠ¡çš„ API è¿›è¡Œåˆ†ç‰‡åˆå¹¶ã€‚<br/>
è¿™ç§æ–¹å¼é€‚åˆå…¬ç½‘å¯è®¿é—®çš„ SaaS ç¯å¢ƒã€‚<br/>
ä½†å¯¹äºæ”¿ä¼å†…ç½‘éƒ¨ç½²ï¼Œå°±ä¸ä¸€å®šè¡Œå¾—é€šã€‚</p>
<p><strong>æ–¹æ¡ˆ 3ï¼šç»Ÿä¸€è°ƒåº¦èŠ‚ç‚¹</strong></p>
<p>è¿˜æœ‰ä¸€ç§æ˜¯æˆ‘ä»¬è‡ªå·±ç»´æŠ¤ä¸€ä¸ªâ€œåˆå¹¶è°ƒåº¦èŠ‚ç‚¹â€ï¼Œ<br/>
æ‰€æœ‰åˆ†ç‰‡ä¸Šä¼ å®Œåï¼Œç³»ç»Ÿä¼šæŠŠåˆå¹¶ä»»åŠ¡åˆ†é…åˆ°ä¸€ä¸ªæŒ‡å®šèŠ‚ç‚¹æ‰§è¡Œï¼Œ<br/>
è¿™ä¸ªèŠ‚ç‚¹ä¼šä»å…¶ä»–æœºå™¨æ‹‰å–åˆ†ç‰‡ï¼ˆæ¯”å¦‚é€šè¿‡ HTTP å†…éƒ¨ä¼ è¾“æˆ– RPCï¼‰ã€‚<br/>
è¿™ç§æ–¹å¼æ›´å¤æ‚ï¼Œé€‚åˆå¤§è§„æ¨¡åˆ†å¸ƒå¼å­˜å‚¨åœºæ™¯ã€‚</p>
<p>åœ¨ç§æœ‰åŒ–é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨ç¬¬ä¸€ç§æ–¹å¼â€”â€”<strong>å…±äº«ç›®å½• + æœ¬åœ°åˆå¹¶</strong>ã€‚<br/>
æ—¢èƒ½ä¿è¯æ€§èƒ½ï¼Œä¹Ÿèƒ½å…¼é¡¾å®‰å…¨æ€§ã€‚</p>
<h4 data-id="heading-34">äº”ã€å®Œæ•´æ€§æ ¡éªŒ</h4>
<p>æ–‡ä»¶åˆå¹¶å®Œæˆåï¼Œæœ€åä¸€æ­¥æ˜¯å®Œæ•´æ€§æ ¡éªŒã€‚<br/>
æˆ‘ä»¬ä¼šé‡æ–°è®¡ç®—åˆå¹¶åæ–‡ä»¶çš„ MD5ï¼Œä¸å‰ç«¯æœ€åˆä¸Šä¼ çš„ <code>fileHash</code> å¯¹æ¯”ã€‚</p>
<p>å¦‚æœä¸€è‡´ï¼Œå°±è¯´æ˜æ–‡ä»¶åˆå¹¶æˆåŠŸï¼Œå†…å®¹æ²¡æœ‰ä¸¢å¤±ï¼›<br/>
å¦‚æœä¸ä¸€è‡´ï¼Œå°±è¯´æ˜æŸä¸ªåˆ†ç‰‡æŸåæˆ–é¡ºåºé”™è¯¯ï¼Œ<br/>
ä»»åŠ¡ä¼šè¢«æ ‡è®°ä¸º <code>FAILED</code>ï¼Œå¹¶è‡ªåŠ¨è®°å½•é”™è¯¯æ—¥å¿—ã€‚</p>
<p>è¿™æ ·å¯ä»¥ç¡®ä¿æ–‡ä»¶æ•°æ®çš„å®‰å…¨æ€§ï¼Œ<br/>
é¿å…åœ¨åç»­ AI è§£ææˆ–å‘é‡åŒ–é˜¶æ®µå‡ºç°å†…å®¹å¼‚å¸¸ã€‚</p>
<h4 data-id="heading-35">å…­ã€å¼‚æ­¥å¤„ç†ä¸æ€§èƒ½ä¼˜åŒ–</h4>
<p>å¼€å¤´çš„è§†é¢‘é‡Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†ï¼Œæ•´ä¸ªä¸Šä¼ å’Œåˆå¹¶è¿‡ç¨‹æˆ‘ä»¬æ˜¯<strong>åŒæ­¥æ‰§è¡Œ</strong>çš„ã€‚<br/>
ä»å‰ç«¯å¼€å§‹ä¸Šä¼ åˆ†ç‰‡ï¼Œåˆ°æœ€åæ–‡ä»¶åˆå¹¶å®Œæˆï¼Œéƒ½åœ¨ç­‰å¾…åŒä¸€ä¸ªæµç¨‹èµ°å®Œã€‚<br/>
è¿™ç§æ–¹å¼åœ¨æ¼”ç¤ºæ—¶å¾ˆç›´è§‚ï¼Œä½†åœ¨çœŸå®é¡¹ç›®ä¸­å…¶å®é—®é¢˜ä¸å°‘ã€‚</p>
<p>æœ€æ˜æ˜¾çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯â€”â€”æ—¶é—´å¤ªé•¿ã€‚<br/>
åƒæˆ‘ä»¬åˆšæ‰é‚£ä¸ª 1GB çš„æ–‡ä»¶ï¼Œå³ä½¿ç½‘ç»œç¨³å®šã€æœåŠ¡å™¨æ€§èƒ½è¿˜å¯ä»¥ï¼Œ<br/>
æ•´ä¸ªæµç¨‹ä¹Ÿè¦å‡ åˆ†é’Ÿç”šè‡³æ›´ä¹…ã€‚<br/>
å¦‚æœæˆ‘ä»¬è®©å‰ç«¯ä¸€ç›´ç­‰å¾…å“åº”ï¼Œæ¥å£è¶…æ—¶ã€è¿æ¥æ–­å¼€ã€å‰ç«¯åˆ·æ–°è¿™äº›é—®é¢˜å°±éƒ½ä¼šå†’å‡ºæ¥ã€‚</p>
<p>æ‰€ä»¥ï¼Œåœ¨çœŸæ­£çš„ä¸šåŠ¡ç³»ç»Ÿé‡Œï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šæŠŠ<strong>åˆå¹¶ã€æ ¡éªŒã€è¿ç§» OSS æˆ–è§£æå…¥åº“</strong>è¿™äº›æ“ä½œæ”¹æˆ<strong>å¼‚æ­¥ä»»åŠ¡</strong>æ¥åšã€‚<br/>
æ¥å£åªè´Ÿè´£æ¥æ”¶åˆ†ç‰‡ã€ç™»è®°çŠ¶æ€ï¼Œç„¶åç«‹åˆ»è¿”å›â€œä»»åŠ¡å·²åˆ›å»ºâ€æˆ–â€œä¸Šä¼ å®Œæˆï¼Œæ­£åœ¨å¤„ç†ä¸­â€çš„æç¤ºã€‚<br/>
åç»­çš„åˆå¹¶ã€æ ¡éªŒã€æ¸…ç†ä¸´æ—¶æ–‡ä»¶è¿™äº›å·¥ä½œäº¤ç»™åå°çš„å¼‚æ­¥çº¿ç¨‹ã€ä»»åŠ¡é˜Ÿåˆ—æˆ–è€…è°ƒåº¦å™¨å»è·‘ã€‚</p>
<p>è¿™æ ·åšçš„å¥½å¤„æœ‰å‡ ä¸ªï¼š</p>
<ul>
<li>å‰ç«¯ä½“éªŒæ›´æµç•…ï¼Œä¸ç”¨å¡åœ¨â€œç­‰å¾…åˆå¹¶â€é˜¶æ®µï¼›</li>
<li>åç«¯å¯ä»¥æ‰¹é‡å¤„ç†ä»»åŠ¡ï¼Œå‡å°‘é«˜å³°æœŸçš„ IO å‹åŠ›ï¼›</li>
<li>å¦‚æœä»»åŠ¡å¤±è´¥æˆ–ä¸­æ–­ï¼Œä¹Ÿèƒ½é€šè¿‡ä»»åŠ¡è¡¨é‡è¯•æˆ–è¡¥å¿ï¼›</li>
<li>å¯¹æ¥å¤–éƒ¨å­˜å‚¨æˆ– AI è§£ææµç¨‹æ—¶ï¼Œä¹Ÿèƒ½è‡ªç„¶è¡”æ¥åç»­ä»»åŠ¡é“¾ã€‚</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œä¸Šä¼ åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œ<br/>
è€Œåˆå¹¶ã€æ ¡éªŒã€è½¬å­˜è¿™äº›æ“ä½œæœ¬è´¨ä¸Šæ›´åƒæ˜¯åå°ä»»åŠ¡ã€‚<br/>
æˆ‘ä»¬åœ¨ç³»ç»Ÿè®¾è®¡æ—¶åªè¦æŠŠè¿™äº›ç¯èŠ‚åˆ†å¼€ï¼Œè®©æ¥å£å°½é‡â€œè½»â€ï¼Œ<br/>
è¿™å¥—ä¸Šä¼ ç³»ç»Ÿå°±èƒ½åœ¨é¢å¯¹æ›´å¤§æ–‡ä»¶ã€æ›´å¤æ‚åœºæ™¯æ—¶ä¾ç„¶ç¨³å®šå¯é ã€‚</p>
<h4 data-id="heading-36">ä¸ƒã€å°ç»“</h4>
<p>æ•´ä¸ªåˆå¹¶ä¸æ ¡éªŒé˜¶æ®µï¼Œæ˜¯æŠŠå‰é¢æ‰€æœ‰åˆ†ç‰‡ä¸Šä¼ å·¥ä½œâ€œæ”¶å°¾â€çš„è¿‡ç¨‹ã€‚<br/>
æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æœºåˆ¶ä¿è¯äº†ç¨³å®šæ€§ï¼š</p>
<ul>
<li>æœ¬åœ°å­˜å‚¨åœºæ™¯ä¸‹ï¼šé¡ºåºè¯»å– + æµå¼å†™å…¥ + hash æ ¡éªŒï¼›</li>
<li>äº‘å­˜å‚¨åœºæ™¯ä¸‹ï¼šä¾èµ–äº‘ç«¯åˆ†ç‰‡åˆå¹¶ APIï¼›</li>
<li>é›†ç¾¤ç¯å¢ƒä¸‹ï¼šé€šè¿‡å…±äº«å­˜å‚¨æˆ–ç»Ÿä¸€è°ƒåº¦èŠ‚ç‚¹è§£å†³æ–‡ä»¶åˆ†æ•£é—®é¢˜ï¼›</li>
<li>æ•°æ®åº“å±‚é¢ï¼šå®æ—¶è®°å½•çŠ¶æ€ï¼Œä¾¿äºè¿½è¸ªå’Œå®¡è®¡ã€‚</li>
</ul>
<p>æœ€ç»ˆï¼Œå½“æ–‡ä»¶åˆå¹¶æˆåŠŸã€æ ¡éªŒé€šè¿‡åï¼Œ<br/>
ç³»ç»Ÿä¼šå°†ç»“æœå†™å…¥ <code>file_info</code> è¡¨ï¼Œ<br/>
æ•´æ¡ä¸Šä¼ é“¾è·¯å°±ç®—æ˜¯å®Œæ•´é—­ç¯ã€‚</p>
<hr/>
<h3 data-id="heading-37">æœ€å</h3>
<p>æˆ‘ä»¬å¹³å¸¸åšçš„é¡¹ç›®ï¼Œå¤§å¤šæ•°æ—¶å€™æ–‡ä»¶ä¸Šä¼ éƒ½æŒºç®€å•çš„ã€‚<br/>
å‰ç«¯ä¼ åˆ° OSSï¼Œåç«¯æ¥ä¸ªåœ°å€å­˜èµ·æ¥å°±è¡Œã€‚<br/>
ä½†ç­‰çœŸæ­£åšç§æœ‰åŒ–é¡¹ç›®çš„æ—¶å€™ï¼Œä¹Ÿå°±ä¼šå‘ç°å¾ˆå¤šåœ°æ–¹éƒ½ä¸ä¸€æ ·äº†ã€‚<br/>
è¦æ±‚æ›´å¤šï¼Œè€ƒè™‘çš„ç»†èŠ‚ä¹Ÿå¤šå¾—å¤šã€‚</p>
<p>åƒè¿™æ¬¡åšçš„å¤§æ–‡ä»¶ä¸Šä¼ å°±æ˜¯ä¸ªå¾ˆå…¸å‹çš„ä¾‹å­ã€‚<br/>
ä»¥å‰é‚£ç§ç®€å•æ–¹æ¡ˆï¼Œæ”¾åœ¨è¿™ç§ç¯å¢ƒä¸‹å°±å®Œå…¨ä¸å¤Ÿç”¨äº†ã€‚<br/>
å¾—è€ƒè™‘æ–­ç‚¹ç»­ä¼ ã€ä»»åŠ¡æ¢å¤ã€é›†ç¾¤éƒ¨ç½²ã€æƒé™ã€å®¡è®¡è¿™äº›ä¸œè¥¿ï¼Œ<br/>
ä¸€æ­¥æ²¡æƒ³å¥½ï¼Œåé¢å…¨æ˜¯å‘ã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨è¿™å¥—è®¾è®¡ï¼Œå…¶å®å°±æ˜¯åœ¨è§£å†³è¿™äº›â€œç°å®é—®é¢˜â€ã€‚<br/>
æ¥å£è™½ç„¶å¤šä¸€ç‚¹ï¼Œä½†æ¯ä¸ªèŒè´£éƒ½å¾ˆæ¸…æ™°ï¼Œ<br/>
ä»»åŠ¡çŠ¶æ€èƒ½è¿½è¸ªï¼Œä¸Šä¼ ä¸­æ–­èƒ½æ¢å¤ï¼Œ<br/>
ç”šè‡³ä»¥åå¦‚æœæˆ‘ä»¬æƒ³å•ç‹¬æŠ½å‡ºæ¥åšä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿæ¨¡å—ä¹Ÿå®Œå…¨æ²¡é—®é¢˜ã€‚<br/>
ä¸ç®¡æ˜¯æ‹¿æ¥ç»™çŸ¥è¯†åº“ç”¨ï¼Œè¿˜æ˜¯ AI å‘é‡åŒ–ã€æ–‡æ¡£è§£æï¼Œè¿™å¥—é€»è¾‘éƒ½èƒ½å¤ç”¨ã€‚</p>
<p>å…¶å®å¾ˆå¤šä»¥å‰è§‰å¾—â€œç®€å•â€çš„åŠŸèƒ½ï¼Œ<br/>
ä¸€æ—¦é‡åˆ°å¤æ‚åœºæ™¯ï¼Œå…¶å®éƒ½å¾—é‡æ–°æƒ³ã€‚<br/>
ä½†å¥½å¤„æ˜¯ï¼Œä¸€æ—¦åšé€šäº†ï¼Œè¿™å¥—ä¸œè¥¿å°±èƒ½ç¨³å®šç”¨å¾ˆä¹…ã€‚</p>
<p>åˆ°è¿™é‡Œï¼Œå¤§æ–‡ä»¶ä¸Šä¼ è¿™å—æˆ‘ä»¬ç®—æ˜¯å®Œæ•´èµ°äº†ä¸€éã€‚<br/>
ä»¥åå†é‡åˆ°ç±»ä¼¼éœ€æ±‚ï¼Œæˆ‘ä»¬å°±æœ‰ç»éªŒäº†ï¼Œ<br/>
ä¸ç”¨å†ä»å¤´æ‰å‘é‡Œçˆ¬å‡ºæ¥ä¸€æ¬¡å“ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elasticsearch çš„ç»“æ„åŒ–æ–‡æ¡£é…ç½® - é€’å½’åˆ†å—å®è·µ]]></title>    <link>https://juejin.cn/post/7571348736153632804</link>    <guid>https://juejin.cn/post/7571348736153632804</guid>    <pubDate>2025-11-12T01:54:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571348736153632804" data-draft-id="7571306072423956522" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elasticsearch çš„ç»“æ„åŒ–æ–‡æ¡£é…ç½® - é€’å½’åˆ†å—å®è·µ"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2025-11-12T01:54:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Elasticsearch"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360441448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elasticsearch çš„ç»“æ„åŒ–æ–‡æ¡£é…ç½® - é€’å½’åˆ†å—å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360441448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Elasticsearch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T01:54:44.000Z" title="Wed Nov 12 2025 01:54:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©æˆ‘å‘è¡¨çš„ä¸€ç¯‡æ–‡ç«  â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F154722870" title="https://elasticstack.blog.csdn.net/article/details/154722870" target="_blank" ref="nofollow noopener noreferrer">åœ¨ Elasticsearch ä¸­ä¸ºç»“æ„åŒ–æ–‡æ¡£é…ç½®é€’å½’åˆ†å—</a>â€ çœ‹ç€å¾ˆç®€å•ã€‚å¯èƒ½å¾ˆå¤šå¼€å‘è€…è¿˜æ˜¯ä¸èƒ½å¾—å…¶è¦é¢†ï¼Œç‰¹åˆ«æ˜¯åœ¨æœ€æ–°çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬çš„å‘é‡åœ¨é»˜è®¤çš„æƒ…å†µä¸‹æ˜¯ä¸åœ¨ source é‡Œè¿›è¡Œå±•ç¤ºçš„ã€‚å¾ˆéš¾ç†è§£å…¶ä¸­ç²¾é«“ã€‚æˆ‘åœ¨è¿™ç¯‡æ–‡ç« é‡Œï¼Œä½¿ç”¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥è¿›è¡Œå±•ç¤ºã€‚</p>
<h2 data-id="heading-0">ä¾‹å­</h2>
<p>æˆ‘ä»¬å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Felastic-inference%2Finference-api" title="https://www.elastic.co/docs/explore-analyze/elastic-inference/inference-api" target="_blank" ref="nofollow noopener noreferrer">Inference integrations</a>â€ æ¥è¿›è¡Œå±•ç¤ºã€‚é¦–å…ˆï¼Œæˆ‘ä»¬é€‰æ‹©ç³»ç»Ÿè‡ªå¸¦çš„ ELSER æ¨¡å‹æ¥è¿›è¡Œå±•ç¤ºã€‚æˆ‘ä»¬å¿…é¡»å®‰è£…å¥½ ELSER æ¨¡å‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a72721867b84f7ca30276c2141fa66b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517284&amp;x-signature=XtTWN07lYKYC8Idmdq7hm5Ihie0%3D" alt="" loading="lazy"/></p>
<p>é¦–å…ˆæˆ‘ä»¬å®šä¹‰å¦‚ä¸‹çš„ä¸€ä¸ª inference endpointï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  PUT _inference/sparse_embedding/recursive_markdown_chunks
2.  {
3.    <span class="hljs-string">"service"</span>: <span class="hljs-string">"elasticsearch"</span>,
4.    <span class="hljs-string">"service_settings"</span>: {
5.      <span class="hljs-string">"model_id"</span>: <span class="hljs-string">".elser_model_2"</span>,
6.      <span class="hljs-string">"num_allocations"</span>: 1,
7.      <span class="hljs-string">"num_threads"</span>: 1
8.    },
9.    <span class="hljs-string">"chunking_settings"</span>: {
10.      <span class="hljs-string">"strategy"</span>: <span class="hljs-string">"recursive"</span>,
11.      <span class="hljs-string">"max_chunk_size"</span>: 25,
12.      <span class="hljs-string">"separators"</span>: [
13.        <span class="hljs-string">"\n# "</span>,
14.        <span class="hljs-string">"\n## "</span>
15.      ]
16.    }
17.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Felastic-inference%2Finference-api%23recursive" title="https://www.elastic.co/docs/explore-analyze/elastic-inference/inference-api#recursive" target="_blank" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>æ¥äº†è§£ recursive æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚é€’å½’ç­–ç•¥æ ¹æ®å¯é…ç½®çš„åˆ†éš”ç¬¦æ¨¡å¼åˆ—è¡¨ï¼ˆä¾‹å¦‚æ¢è¡Œç¬¦æˆ– Markdown æ ‡é¢˜ï¼‰æ‹†åˆ†è¾“å…¥æ–‡æœ¬ã€‚åˆ†å—å™¨æŒ‰é¡ºåºåº”ç”¨è¿™äº›åˆ†éš”ç¬¦ï¼Œé€’å½’åœ°æ‹†åˆ†è¶…è¿‡ max_chunk_size å•è¯é™åˆ¶çš„ä»»ä½•åˆ†å—ã€‚å¦‚æœæ²¡æœ‰åˆ†éš”ç¬¦ç”Ÿæˆè¶³å¤Ÿå°çš„åˆ†å—ï¼Œè¯¥ç­–ç•¥å°†é€€å›åˆ°å¥å­çº§æ‹†åˆ†ã€‚</p>
<p>åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† custom separator groupï¼šä¹Ÿå°±æ˜¯åŸºäºç¬¬ä¸€ç¬¬äºŒçº§çš„ heading æ¥è¿›è¡Œåˆ†éš”æå‰ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç´¢å¼•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  PUT recursive_markdown_vectors
2.  {
3.    <span class="hljs-string">"mappings"</span>: {
4.      <span class="hljs-string">"properties"</span>: {
5.        <span class="hljs-string">"content"</span>: {
6.          <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
7.          <span class="hljs-string">"copy_to"</span>: <span class="hljs-string">"inference_field"</span>
8.        },
9.        <span class="hljs-string">"inference_field"</span>: {
10.          <span class="hljs-string">"type"</span>: <span class="hljs-string">"semantic_text"</span>,
11.          <span class="hljs-string">"inference_id"</span>: <span class="hljs-string">"recursive_markdown_chunks"</span>
12.        }
13.      }
14.    }
15.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>ç„¶åï¼Œæˆ‘ä»¬å†™å…¥æ–‡æ¡£ï¼š</p>
<pre><code class="hljs language-less" lang="less">`

<span class="hljs-number">1</span>.  <span class="hljs-selector-tag">POST</span> <span class="hljs-selector-tag">recursive_markdown_vectors</span>/<span class="hljs-selector-tag">_doc</span>/<span class="hljs-number">1</span>
<span class="hljs-number">2</span>.  {
<span class="hljs-number">3</span>.    "<span class="hljs-selector-tag">content</span>": "# <span class="hljs-selector-tag">First</span> <span class="hljs-selector-tag">Header</span>
<span class="hljs-number">4</span>.  <span class="hljs-selector-tag">This</span> <span class="hljs-selector-tag">first</span> <span class="hljs-selector-tag">test</span> <span class="hljs-selector-tag">sentence</span> <span class="hljs-selector-tag">has</span> <span class="hljs-selector-tag">ten</span> <span class="hljs-selector-tag">total</span> <span class="hljs-selector-tag">words</span> <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">it</span>.

<span class="hljs-number">6</span>.  ## <span class="hljs-selector-tag">Second</span> <span class="hljs-selector-tag">header</span>
<span class="hljs-number">7</span>.  <span class="hljs-selector-tag">This</span> <span class="hljs-selector-tag">second</span> <span class="hljs-selector-tag">test</span> <span class="hljs-selector-tag">sentence</span> <span class="hljs-selector-tag">has</span> <span class="hljs-selector-tag">ten</span> <span class="hljs-selector-tag">total</span> <span class="hljs-selector-tag">words</span> <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">it</span>.

<span class="hljs-number">9</span>.  # <span class="hljs-selector-tag">Third</span> <span class="hljs-selector-tag">Header</span>
<span class="hljs-number">10</span>.  <span class="hljs-selector-tag">This</span> <span class="hljs-selector-tag">third</span> <span class="hljs-selector-tag">test</span> <span class="hljs-selector-tag">sendtence</span> <span class="hljs-selector-tag">has</span> <span class="hljs-selector-tag">ten</span> <span class="hljs-selector-tag">total</span> <span class="hljs-selector-tag">words</span> <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">it</span>.

<span class="hljs-number">12</span>.  ## <span class="hljs-selector-tag">Fourth</span> <span class="hljs-selector-tag">Header</span>
<span class="hljs-number">13</span>.  <span class="hljs-selector-tag">This</span> <span class="hljs-selector-tag">Fourth</span> <span class="hljs-selector-tag">test</span> <span class="hljs-selector-tag">sendtence</span> <span class="hljs-selector-tag">has</span> <span class="hljs-selector-tag">ten</span> <span class="hljs-selector-tag">total</span> <span class="hljs-selector-tag">words</span> <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">it</span>.

<span class="hljs-number">16</span>.  ## <span class="hljs-selector-tag">Fifth</span> <span class="hljs-selector-tag">Header</span>
<span class="hljs-number">17</span>.  <span class="hljs-selector-tag">This</span> <span class="hljs-selector-tag">fifth</span> <span class="hljs-selector-tag">test</span> <span class="hljs-selector-tag">sentence</span> <span class="hljs-selector-tag">has</span> <span class="hljs-selector-tag">ten</span> <span class="hljs-selector-tag">total</span> <span class="hljs-selector-tag">words</span> <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">it</span>. <span class="hljs-selector-tag">This</span> <span class="hljs-selector-tag">sixth</span> <span class="hljs-selector-tag">test</span> <span class="hljs-selector-tag">sentence</span> <span class="hljs-selector-tag">has</span> <span class="hljs-selector-tag">ten</span> <span class="hljs-selector-tag">total</span> <span class="hljs-selector-tag">words</span> <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">it</span>. <span class="hljs-selector-tag">This</span> <span class="hljs-selector-tag">seventh</span> <span class="hljs-selector-tag">test</span> <span class="hljs-selector-tag">sentence</span> <span class="hljs-selector-tag">has</span> <span class="hljs-selector-tag">ten</span> <span class="hljs-selector-tag">total</span> <span class="hljs-selector-tag">words</span> <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">it</span>."
<span class="hljs-number">18</span>.  }

`<span class="hljs-selector-tag">AI</span>å†™ä»£ç !<span class="hljs-selector-attr">[]</span>(<span class="hljs-attribute">https</span>:<span class="hljs-comment">//csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)</span>
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±å¤§åŠŸå‘Šæˆäº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æŸ¥è¯¢æ¥è¿›è¡Œå±•ç¤ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  GET recursive_markdown_vectors/_search?filter_path=**.hits
2.  {
3.    <span class="hljs-string">"fields"</span>: [
4.      {
5.        <span class="hljs-string">"field"</span>: <span class="hljs-string">"inference_field"</span>,
6.        <span class="hljs-string">"format"</span>: <span class="hljs-string">"chunks"</span>
7.      }
8.    ]
9.  }

`AIå†™ä»£ç 
</code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šä¸Šé¢çš„ fields åªå¯¹ 9.2+ åŠä»¥ä¸Šç‰ˆæœ¬èµ·ä½œç”¨ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„æŸ¥è¯¢ç»“æœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40352a0dcdc6471c8583e2f1887adaad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517284&amp;x-signature=V98yL5ZjREVzniTUCigPcCqIYHA%3D" alt="" loading="lazy"/></p>
<p>ä»ä¸Šé¢çš„ç»“æœä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ 3 ä¸ª chunksã€‚</p>
<p>æˆ‘ä»¬æ¥ä¸‹æ¥æŠŠÂ max_chunk_size è®¾ç½®ä¸º 10ï¼Œçœ‹çœ‹æœ€åçš„ç»“æœï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  PUT _inference/sparse_embedding/recursive_markdown_chunks
2.  {
3.    <span class="hljs-string">"service"</span>: <span class="hljs-string">"elasticsearch"</span>,
4.    <span class="hljs-string">"service_settings"</span>: {
5.      <span class="hljs-string">"model_id"</span>: <span class="hljs-string">".elser_model_2"</span>,
6.      <span class="hljs-string">"num_allocations"</span>: 1,
7.      <span class="hljs-string">"num_threads"</span>: 1
8.    },
9.    <span class="hljs-string">"chunking_settings"</span>: {
10.      <span class="hljs-string">"strategy"</span>: <span class="hljs-string">"recursive"</span>,
11.      <span class="hljs-string">"max_chunk_size"</span>: 10,
12.      <span class="hljs-string">"separators"</span>: [
13.        <span class="hljs-string">"\n# "</span>,
14.        <span class="hljs-string">"\n## "</span>
15.      ]
16.    }
17.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b9498c81c8e4c87bb20185602a0323d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517284&amp;x-signature=JCLV70P0fjshDmpVwpO99hNiBfI%3D" alt="" loading="lazy"/></p>
<p>å¾ˆæ˜¾ç„¶ï¼Œå®ƒå’Œæˆ‘ä»¬ä¹‹å‰çš„åˆ†å—è¿˜æ˜¯æœ‰ç‚¹ä¸ä¸€æ ·ã€‚æˆ‘ä»¬å¯ä»¥è¯•è¯•ä¸åŒçš„å€¼æ¥çœ‹çœ‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  PUT _inference/sparse_embedding/recursive_markdown_chunks
2.  {
3.    <span class="hljs-string">"service"</span>: <span class="hljs-string">"elasticsearch"</span>,
4.    <span class="hljs-string">"service_settings"</span>: {
5.      <span class="hljs-string">"model_id"</span>: <span class="hljs-string">".elser_model_2"</span>,
6.      <span class="hljs-string">"num_allocations"</span>: 1,
7.      <span class="hljs-string">"num_threads"</span>: 1
8.    },
9.    <span class="hljs-string">"chunking_settings"</span>: {
10.      <span class="hljs-string">"strategy"</span>: <span class="hljs-string">"recursive"</span>,
11.      <span class="hljs-string">"max_chunk_size"</span>: 35,
12.      <span class="hljs-string">"separators"</span>: [
13.        <span class="hljs-string">"\n# "</span>,
14.        <span class="hljs-string">"\n## "</span>
15.      ]
16.    }
17.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1e6c54c0067494dbd25796c07bc9a69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517284&amp;x-signature=o5HzfWQQODkzmhFeQru%2FH6Wh%2BUk%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨ "separator_group":Â  "markdown"ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  PUT _inference/sparse_embedding/recursive_markdown_chunks
2.  {
3.    <span class="hljs-string">"service"</span>: <span class="hljs-string">"elasticsearch"</span>,
4.    <span class="hljs-string">"service_settings"</span>: {
5.      <span class="hljs-string">"model_id"</span>: <span class="hljs-string">".elser_model_2"</span>,
6.      <span class="hljs-string">"num_allocations"</span>: 1,
7.      <span class="hljs-string">"num_threads"</span>: 1
8.    },
9.    <span class="hljs-string">"chunking_settings"</span>: {
10.      <span class="hljs-string">"strategy"</span>: <span class="hljs-string">"recursive"</span>,
11.      <span class="hljs-string">"max_chunk_size"</span>: 25,
12.      <span class="hljs-string">"separator_group"</span>: <span class="hljs-string">"markdown"</span>
13.    }
14.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c23a98f076324ce6be122caac80d7daa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517284&amp;x-signature=6bB2H%2BYjRm0Xkxnc6lLVyK8TUsU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41499d9c17c0463badf7d093ec6e9c93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763517284&amp;x-signature=oS2QMUh6UxNupVq9PRbM2WGqJag%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œå®ƒçš„ç»“æœå’Œæˆ‘ä»¬ä¹‹å‰ç¬¬ä¸€ä¸ªç»“æœçš„æ²¡æœ‰ä»€ä¹ˆä¸ä¸€æ ·çš„ï¼Œè¿™æ˜¯å› ä¸º markdown æ‰€åŒ…å«çš„ separators é‡Œä¹Ÿæ˜¯å¯¹ heading è¿›è¡Œåˆ†æ®µçš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šæ‰‹æ’•ç±»Vue2çš„å“åº”å¼æ ¸å¿ƒæ€æƒ³ï¼šæˆ‘çš„å­¦ä¹ å¿ƒè·¯å†ç¨‹ã€‹]]></title>    <link>https://juejin.cn/post/7571306072423153706</link>    <guid>https://juejin.cn/post/7571306072423153706</guid>    <pubDate>2025-11-11T16:14:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571306072423153706" data-draft-id="7571102074039418921" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šæ‰‹æ’•ç±»Vue2çš„å“åº”å¼æ ¸å¿ƒæ€æƒ³ï¼šæˆ‘çš„å­¦ä¹ å¿ƒè·¯å†ç¨‹ã€‹"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-11T16:14:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ®‹å†¬é†‰ç¦»æ®‡"/> <meta itemprop="url" content="https://juejin.cn/user/1145072454220539"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šæ‰‹æ’•ç±»Vue2çš„å“åº”å¼æ ¸å¿ƒæ€æƒ³ï¼šæˆ‘çš„å­¦ä¹ å¿ƒè·¯å†ç¨‹ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145072454220539/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ®‹å†¬é†‰ç¦»æ®‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T16:14:14.000Z" title="Tue Nov 11 2025 16:14:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€å‰è¨€ï¼šä»€ä¹ˆæ˜¯å“åº”å¼ï¼Ÿ</h3>
<p>å“åº”å¼çš„æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•ï¼š<strong>å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºè¿™ä¸ªæ•°æ®çš„å‡½æ•°ï¼ˆä¾‹å¦‚è§†å›¾æ¸²æŸ“å‡½æ•°ã€è®¡ç®—å‡½æ•°ç­‰ï¼‰ä¼šè‡ªåŠ¨é‡æ–°æ‰§è¡Œ</strong>ï¼Œä»è€Œä¿æŒæ•°æ®ä¸ä¾èµ–å®ƒçš„äº‹ç‰©åŒæ­¥ã€‚åœ¨Vue2ä¸­ï¼Œè¿™æ˜¯é€šè¿‡<code>Object.defineProperty</code>å®ç°çš„ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±é¡ºç€è¿™ä¸ªæ€è·¯ï¼Œç”¨åŸç”ŸJavaScriptæ‰‹å†™ä¸€ä¸ªç®€æ˜“çš„å“åº”å¼Demoã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21e4f4f8481741f0855dae800d0022fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q6L5Yas6YaJ56a75q6H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763482454&amp;x-signature=10u%2FGqtjrC2peLmDDZ37Z5d7FrM%3D" alt="å®ä¾‹æ•ˆæœ.gif" loading="lazy"/></p>
<h3 data-id="heading-1">äºŒã€åŸºç¡€ç‰ˆæœ¬ï¼šæ‰‹åŠ¨è§¦å‘æ›´æ–°</h3>
<p>æˆ‘ä»¬å…ˆå®ç°ä¸€ä¸ªæœ€åŸºç¡€çš„ç‰ˆæœ¬ã€‚ç‚¹å‡»æŒ‰é’®ï¼Œè®©<code>obj.age</code>å¢åŠ ï¼Œå¹¶åŒæ­¥æ›´æ–°é¡µé¢ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"age"</span>&gt;</span>18<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"changeObj()"</span>&gt;</span>å¹´é¾„++<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. å®šä¹‰æ•°æ®å¯¹è±¡</span>
<span class="hljs-keyword">const</span> obj = {
    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>
};

<span class="hljs-comment">// 2. è·å–DOMå…ƒç´ </span>
<span class="hljs-keyword">const</span> ageEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#age'</span>);

<span class="hljs-comment">// 3. å®šä¹‰æ›´æ–°DOMçš„å‡½æ•°</span>
<span class="hljs-keyword">const</span> updateDom = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    ageEl.<span class="hljs-property">textContent</span> = obj.<span class="hljs-property">age</span>.<span class="hljs-title function_">toString</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¡µé¢å·²æ›´æ–°: '</span>, ageEl.<span class="hljs-property">textContent</span>);
}

<span class="hljs-comment">// 4. å®šä¹‰æ”¹å˜æ•°æ®çš„å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">changeObj</span> = (<span class="hljs-params"/>) =&gt; {
    obj.<span class="hljs-property">age</span>++; <span class="hljs-comment">// ä¿®æ”¹æ•°æ®</span>
    <span class="hljs-title function_">updateDom</span>(); <span class="hljs-comment">// æ‰‹åŠ¨æ›´æ–°DOM</span>
}
</code></pre>
<p><strong>æ•ˆæœï¼š</strong> ç‚¹å‡»æŒ‰é’®ï¼Œå¹´é¾„å¢åŠ ï¼Œé¡µé¢æ˜¾ç¤ºåŒæ­¥æ›´æ–°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/065c57e05f0b48aeb6189d319254b07c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q6L5Yas6YaJ56a75q6H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763482454&amp;x-signature=2VNxYZBVL3UBOALCp6rwTm9UZpY%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ç¡®å®å¤ç°äº†â€œå“åº”å¼â€çš„æ•ˆæœï¼Œä½†å­˜åœ¨ä¸€ä¸ªæ˜æ˜¾é—®é¢˜ï¼š<strong>æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è°ƒç”¨<code>updateDom</code></strong>ã€‚å¦‚æœä¾èµ–<code>obj.age</code>çš„å‡½æ•°å¾ˆå¤šï¼Œæ¯”å¦‚æœ‰<code>dependFn1</code>,Â <code>dependFn2</code>,Â <code>dependFn3</code>ï¼Œé‚£ä¹ˆ<code>changeObj</code>å‡½æ•°ä¼šå˜å¾—éå¸¸å†—é•¿å’Œéš¾ä»¥ç»´æŠ¤ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> updateDom = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    age.<span class="hljs-property">textContent</span> = obj.<span class="hljs-property">age</span>.<span class="hljs-title function_">toString</span>()
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age.<span class="hljs-property">textContent</span>);
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">dependFn1</span> = (<span class="hljs-params"/>)=&gt;{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">dependFn2</span> = (<span class="hljs-params"/>)=&gt;{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">dependFn3</span> = (<span class="hljs-params"/>)=&gt;{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">changeObj</span> = (<span class="hljs-params"/>)=&gt;{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
    obj.<span class="hljs-property">age</span>++
    <span class="hljs-title function_">updateDom</span>()<span class="hljs-comment">//æ›´æ–°dom</span>
    <span class="hljs-title function_">dependFn1</span>()
    <span class="hljs-title function_">dependFn2</span>()
    <span class="hljs-title function_">dependFn3</span>()
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddb48f72293b4dd28b20befe9f082314~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q6L5Yas6YaJ56a75q6H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763482454&amp;x-signature=eGa1auY9FA8QpVKa%2FMeFajzRIjs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">ä¸‰ã€ä¼˜åŒ–ä¸€ï¼šç»Ÿä¸€ç®¡ç†ä¾èµ–å‡½æ•°</h3>
<p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰ä¾èµ–å‡½æ•°æ”¶é›†åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œç»Ÿä¸€éå†æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//åˆ›å»ºä¾èµ–å‡½æ•°æ•°ç»„</span>
<span class="hljs-keyword">let</span> fnArrays = []

<span class="hljs-comment">//åˆ›å»ºè§¦å‘ä¾èµ–å‡½æ•°çš„å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">dispatchFns</span> = (<span class="hljs-params"/>)=&gt;{
  fnArrays.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>())
}

<span class="hljs-comment">//æ”¶é›†ä¾èµ–å‡½æ•°çš„å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">gatherFns</span> = (<span class="hljs-params">fn</span>)=&gt;{
  fnArrays.<span class="hljs-title function_">push</span>(fn)
}

<span class="hljs-title function_">gatherFns</span>(dependFn1)
<span class="hljs-title function_">gatherFns</span>(dependFn2)
<span class="hljs-title function_">gatherFns</span>(dependFn3)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">changeObj</span> = (<span class="hljs-params"/>)=&gt;{
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
  obj.<span class="hljs-property">age</span>++
  <span class="hljs-title function_">updateDom</span>()<span class="hljs-comment">//æ›´æ–°dom</span>
  <span class="hljs-title function_">dispatchFns</span>()
}
</code></pre>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨ä¸€æ¬¡<code>dispatchFns()</code>ï¼Œæ‰€æœ‰ä¾èµ–å‡½æ•°éƒ½ä¼šæ‰§è¡Œã€‚ä½†è¿™ç§æ–¹å¼ä¾ç„¶ä¸å¤Ÿçµæ´»ï¼Œå¦‚æœå¤šä¸ªæ•°æ®å¯¹è±¡æ‹¥æœ‰å„è‡ªçš„ä¾èµ–å‡½æ•°ï¼Œç®¡ç†èµ·æ¥ä¼šéå¸¸æ··ä¹±ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e403574ff8c4d29876ceb35e500f6ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q6L5Yas6YaJ56a75q6H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763482454&amp;x-signature=mrLWWlQ0diKRc0pJLfB18eDwqZI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">å››ã€ä¼˜åŒ–äºŒï¼šå¼•å…¥Dependç±»</h3>
<p>æ›´å¥½çš„åšæ³•æ˜¯ä¸ºæ¯ä¸ªå“åº”å¼æ•°æ®åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„<strong>ä¾èµ–ç®¡ç†å™¨</strong>ã€‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>Depend</code>ç±»æ¥ä¸“é—¨è´Ÿè´£æ”¶é›†å’Œè§¦å‘ä¾èµ–å‡½æ•°ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//è¿™æ—¶å€™å¾—åˆ›å»ºä¸€ä¸ªDepend(ä¾èµ–ï¼‰ç±»</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">Depend</span> {
      <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">dependFns</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
      }

      <span class="hljs-comment">//æ”¶é›†ä¾èµ–å‡½æ•°</span>
      <span class="hljs-title function_">gatherFns</span>(<span class="hljs-params">fn</span>){
          <span class="hljs-keyword">if</span>(fn &amp;&amp; <span class="hljs-keyword">typeof</span> fn === <span class="hljs-string">'function'</span>){
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">dependFns</span>.<span class="hljs-title function_">add</span>(fn)
          }
      }

      <span class="hljs-comment">//ç»Ÿä¸€è°ƒç”¨ä¾èµ–å‡½æ•°</span>
      <span class="hljs-title function_">dispatchFns</span>(<span class="hljs-params"/>){
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">dependFns</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> {
              <span class="hljs-title function_">fn</span>()
          })
      }
  }

  <span class="hljs-keyword">const</span> depend1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Depend</span>()

  depend1.<span class="hljs-title function_">gatherFns</span>(dependFn1)
  depend1.<span class="hljs-title function_">gatherFns</span>(dependFn2)
  depend1.<span class="hljs-title function_">gatherFns</span>(dependFn3)

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeObj</span> = (<span class="hljs-params"/>)=&gt;{
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
      obj.<span class="hljs-property">age</span>++
      <span class="hljs-title function_">updateDom</span>()<span class="hljs-comment">//æ›´æ–°dom</span>
      depend1.<span class="hljs-title function_">dispatchFns</span>()
  }
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6136e264d79241f4955d68571fd57e4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q6L5Yas6YaJ56a75q6H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763482454&amp;x-signature=ELBvWPKn3BK7kVssjdoFmwxocFI%3D" alt="image.png" loading="lazy"/></p>
<p>ç°åœ¨ï¼Œæ¯ä¸ªå“åº”å¼æ•°æ®éƒ½æœ‰è‡ªå·±çš„<code>Depend</code>å®ä¾‹ï¼Œä¾èµ–ç®¡ç†æ›´åŠ æ¸…æ™°ã€‚ä½†æˆ‘ä»¬ä»ç„¶éœ€è¦åœ¨ä¿®æ”¹æ•°æ®å<strong>æ‰‹åŠ¨è°ƒç”¨<code>dispatchFns()</code></strong>ã€‚</p>
<h3 data-id="heading-4">äº”ã€æ ¸å¿ƒå®ç°ï¼šè‡ªåŠ¨ä¾èµ–æ”¶é›†å’Œè§¦å‘</h3>
<p>è¦å®ç°çœŸæ­£çš„è‡ªåŠ¨å“åº”å¼ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<strong>è·å–æ•°æ®æ—¶è‡ªåŠ¨æ”¶é›†ä¾èµ–</strong>ï¼Œåœ¨<strong>ä¿®æ”¹æ•°æ®æ—¶è‡ªåŠ¨è§¦å‘æ›´æ–°</strong>ã€‚è¿™å¯ä»¥é€šè¿‡<code>Object.defineProperty</code>æ‹¦æˆªæ•°æ®çš„è¯»å–å’Œä¿®æ”¹æ“ä½œæ¥å®ç°ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªmyReactiveçš„å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè¿›è¡Œå¯¹å®ƒçš„å±æ€§åŠ«æŒ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">myReactive</span>(<span class="hljs-params">obj</span>){
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Depend</span>() <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡</span>
        <span class="hljs-keyword">let</span> value = obj[key] <span class="hljs-comment">//è·å–å¯¹åº”å±æ€§çš„å€¼ï¼Œä¿ç•™ç­‰ä¸‹è¦ç”¨</span>

        <span class="hljs-comment">//åŠ ä¸Šå±æ€§åŠ«æŒ</span>
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj,key,{
            get : <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
                <span class="hljs-keyword">return</span> value
            },
            set : <span class="hljs-keyword">function</span>(<span class="hljs-params">newValue</span>){
                value = newValue
                <span class="hljs-comment">//é€šçŸ¥å¯¹åº”çš„å®ä¾‹æ‰§è¡Œæ‰€æœ‰ä¾èµ–å‡½æ•°</span>
                instance.<span class="hljs-title function_">dispatchFns</span>()
            }
        })
    })
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/410abf3c8f604860a2e5a8c1a3fc7f1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q6L5Yas6YaJ56a75q6H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763482454&amp;x-signature=%2Ffdak%2FgQzSG5CFSSIXs5lR5d37I%3D" alt="image.png" loading="lazy"/></p>
<p>ç°åœ¨æ˜¯è§£å†³äº†å¯¹è±¡å±æ€§æ”¹å˜æ—¶ï¼Œå¯ä»¥åŠ«æŒä½¿ç”¨setæ–¹æ³•è¿›è¡Œè°ƒç”¨ä¾èµ–å‡½æ•°ï¼Œä½†æ˜¯æ”¶é›†å‡½æ•°å°±æˆäº†ä¸€ä¸ªéš¾é¢˜ï¼Œå› ä¸ºå®ä¾‹æ˜¯åœ¨å†…éƒ¨åˆ›å»ºçš„ï¼Œå½¢æˆäº†é—­åŒ…ï¼Œå¤–ç•Œæ‹¿ä¸åˆ°å†…éƒ¨çš„å®ä¾‹ï¼Œæ‰€ä»¥åªæœ‰ä¸€ä¸ªæ–¹æ³•äº†ï¼Œå°±æ˜¯è®¾ç½®ä¸€ä¸ªå…¨å±€æ´»è·ƒå‡½æ•°ï¼Œå½“è°ƒç”¨ä¾èµ–å‡½æ•°æ—¶ï¼Œä¼šè§¦å‘è·å–å¯¹è±¡å±æ€§ï¼Œè§¦å‘getæ–¹æ³•ï¼Œå°±å¯ä»¥åœ¨getæ–¹æ³•è°ƒç”¨å†…éƒ¨çš„instanceå¯ä»¥è·å–å¤–éƒ¨çš„å…¨å±€æ´»è·ƒå‡½æ•°ï¼Œå°†å…¶åŠ å…¥å®ä¾‹ä¸­çš„Setæ•°ç»„ä¸­ï¼</p>
<h4 data-id="heading-5">å…³é”®æ€è·¯ï¼šè®¾ç½®"å…¨å±€æ´»è·ƒå‡½æ•°"</h4>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹æ³•æ¥æ ‡è®°å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ï¼Œè¿™æ ·åœ¨è¯»å–æ•°æ®æ—¶ï¼Œå°±èƒ½çŸ¥é“æ˜¯å“ªä¸ªå‡½æ•°ä¾èµ–äº†è¿™ä¸ªæ•°æ®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//è®¾ç½®æ´»è·ƒå‡½æ•°</span>
<span class="hljs-keyword">let</span> activeFn = <span class="hljs-literal">null</span>
<span class="hljs-comment">//åŠ å…¥ä¾èµ–çš„å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">addDependFn</span> = (<span class="hljs-params">fn</span>)=&gt;{
    activeFn = fn
    <span class="hljs-title function_">fn</span>()
    activeFn = <span class="hljs-literal">null</span>
}

<span class="hljs-title function_">addDependFn</span>(dependFn1)
<span class="hljs-title function_">addDependFn</span>(dependFn2)
<span class="hljs-title function_">addDependFn</span>(dependFn3)

<span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªmyReactiveçš„å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè¿›è¡Œå¯¹å®ƒçš„å±æ€§åŠ«æŒ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">myReactive</span>(<span class="hljs-params">obj</span>){
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Depend</span>() <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡</span>
        <span class="hljs-keyword">let</span> value = obj[key] <span class="hljs-comment">//è·å–å¯¹åº”å±æ€§çš„å€¼ï¼Œä¿ç•™ç­‰ä¸‹è¦ç”¨</span>

        <span class="hljs-comment">//åŠ ä¸Šå±æ€§åŠ«æŒ</span>
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj,key,{
            get : <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
                instance.<span class="hljs-title function_">gatherFns</span>(activeFn)
                <span class="hljs-keyword">return</span> value
            },
            set : <span class="hljs-keyword">function</span>(<span class="hljs-params">newValue</span>){
                value = newValue
                <span class="hljs-comment">//é€šçŸ¥å¯¹åº”çš„å®ä¾‹æ‰§è¡Œæ‰€æœ‰ä¾èµ–å‡½æ•°</span>
                instance.<span class="hljs-title function_">dispatchFns</span>()
            }
        })
    })
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7294aceb2c744f9921626c62c784667~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q6L5Yas6YaJ56a75q6H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763482454&amp;x-signature=0WNPoe8M2peWvDAbRekiIptYn7c%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>å…¶å®åˆ°è¿™é‡Œå°±å·²ç»å®ç°äº†ç®€å•çš„å“åº”å¼å•¦ï¼å“ˆå“ˆå“ˆï¼Œ å®Œæ•´demoä»£ç å¦‚ä¸‹</p>
</blockquote>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ‰‹æ’•ç±»Vue2å“åº”å¼demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"age"</span>&gt;</span>18<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"changeObj()"</span>&gt;</span>å¹´é¾„++<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// objå¯¹è±¡</span>
        <span class="hljs-keyword">const</span> obj = {
            age : <span class="hljs-number">18</span>
        }

        <span class="hljs-comment">//ä½¿ç”¨åŸç”Ÿæ‹¿åˆ°å…ƒç´ </span>
        <span class="hljs-keyword">const</span> age = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#age'</span>)

        <span class="hljs-keyword">const</span> updateDom = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            age.<span class="hljs-property">textContent</span> = obj.<span class="hljs-property">age</span>.<span class="hljs-title function_">toString</span>()
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age.<span class="hljs-property">textContent</span>);
        }

        <span class="hljs-comment">//æ¨¡æ‹Ÿä¾èµ–å‡½æ•°1</span>
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">dependFn1</span> = (<span class="hljs-params"/>)=&gt;{
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
        }

        <span class="hljs-comment">//æ¨¡æ‹Ÿä¾èµ–å‡½æ•°2</span>
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">dependFn2</span> = (<span class="hljs-params"/>)=&gt;{
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
        }

        <span class="hljs-comment">//æ¨¡æ‹Ÿä¾èµ–å‡½æ•°3</span>
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">dependFn3</span> = (<span class="hljs-params"/>)=&gt;{
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
        }

        <span class="hljs-comment">//è¿™æ—¶å€™å¾—åˆ›å»ºä¸€ä¸ªç±»</span>
        <span class="hljs-keyword">class</span> <span class="hljs-title class_">Depend</span> {
            <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">dependFns</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
            }

            <span class="hljs-comment">//æ”¶é›†ä¾èµ–å‡½æ•°</span>
            <span class="hljs-title function_">gatherFns</span>(<span class="hljs-params">fn</span>){
                <span class="hljs-keyword">if</span>(fn &amp;&amp; <span class="hljs-keyword">typeof</span> fn === <span class="hljs-string">'function'</span>){
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dependFns</span>.<span class="hljs-title function_">add</span>(fn)
                }
            }

            <span class="hljs-comment">//ç»Ÿä¸€è°ƒç”¨ä¾èµ–å‡½æ•°</span>
            <span class="hljs-title function_">dispatchFns</span>(<span class="hljs-params"/>){
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">dependFns</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> {
                    <span class="hljs-title function_">fn</span>()
                })
            }
        }

        <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeObj</span> = (<span class="hljs-params"/>)=&gt;{
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
            obj.<span class="hljs-property">age</span>++
        }

        <span class="hljs-comment">//è®¾ç½®æ´»è·ƒå‡½æ•°</span>
        <span class="hljs-keyword">let</span> activeFn = <span class="hljs-literal">null</span>
        <span class="hljs-comment">//åŠ å…¥ä¾èµ–çš„å‡½æ•°</span>
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">addDependFn</span> = (<span class="hljs-params">fn</span>)=&gt;{
            activeFn = fn
            <span class="hljs-title function_">fn</span>()
            activeFn = <span class="hljs-literal">null</span>
        }

        <span class="hljs-comment">//æ‰‹åŠ¨æ‰§è¡Œä¸€éå‡½æ•°</span>
        <span class="hljs-title function_">addDependFn</span>(dependFn1)
        <span class="hljs-title function_">addDependFn</span>(dependFn2)
        <span class="hljs-title function_">addDependFn</span>(dependFn3)

        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªmyReactiveçš„å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè¿›è¡Œå¯¹å®ƒçš„å±æ€§åŠ«æŒ</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">myReactive</span>(<span class="hljs-params">obj</span>){
            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
                <span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Depend</span>() <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡</span>
                <span class="hljs-keyword">let</span> value = obj[key] <span class="hljs-comment">//è·å–å¯¹åº”å±æ€§çš„å€¼ï¼Œä¿ç•™ç­‰ä¸‹è¦ç”¨</span>

                <span class="hljs-comment">//åŠ ä¸Šå±æ€§åŠ«æŒ</span>
                <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj,key,{
                    get : <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
                        instance.<span class="hljs-title function_">gatherFns</span>(activeFn)
                        <span class="hljs-keyword">return</span> value
                    },
                    set : <span class="hljs-keyword">function</span>(<span class="hljs-params">newValue</span>){
                        value = newValue
                        <span class="hljs-comment">//é€šçŸ¥å¯¹åº”çš„å®ä¾‹æ‰§è¡Œæ‰€æœ‰ä¾èµ–å‡½æ•°</span>
                        instance.<span class="hljs-title function_">dispatchFns</span>()
                    }
                })
            })
        }

        <span class="hljs-title function_">myReactive</span>(obj) <span class="hljs-comment">//ä¼ å…¥å¯¹è±¡ï¼Œæ·»åŠ åŠ«æŒ</span>
        <span class="hljs-title function_">addDependFn</span>(updateDom) <span class="hljs-comment">//æ·»åŠ æ´»è·ƒå‡½æ•°</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">å…­ã€æœ€ç»ˆä¼˜åŒ–</h3>
<blockquote>
<p>ä½†æ˜¯åˆ°ç°åœ¨ï¼Œå…¶å®å®ƒè¿˜æœ‰å¾ˆå¤šå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œæ¯”å¦‚å¯èƒ½ä¸€ä¸ªå¯¹è±¡å¤šæ¬¡ä¼ å…¥myReactiveå‡½æ•°ï¼Œä¼šåˆ›å»ºå¤šä¸ªå®ä¾‹ï¼Œè¿˜æœ‰å®ä¾‹æ˜¯åœ¨myReactiveå‡½æ•°é‡Œé¢åˆ›å»ºçš„ï¼Œå±äºé—­åŒ…ï¼Œå¯èƒ½å‡ºç°å†…å­˜æ³„æ¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡‡ç”¨WeakMapé›†åˆæ¥æ”¶é›†å¯¹è±¡ï¼Œè¿™æ ·å­çš„è¯ï¼Œå°±å¯ä»¥åœ¨myReactiveå‡½æ•°å¼€å§‹é‚£é‡Œåˆ¤æ–­ä¸€ä¸‹å¯¹è±¡æ˜¯å¦åˆ›å»ºè¿‡ã€‚ç„¶åæ¯ä¸€ä¸ªå¯¹è±¡å¯¹åº”ç€ä¸€ä¸ªï¼ˆå±æ€§-å®ä¾‹ï¼‰Mapè¡¨ï¼Œè¿™æ ·å­çš„è¯ï¼Œå°±å¯ä»¥æ–¹ä¾¿çš„æ‹¿åˆ°å®ä¾‹äº†ï¼Œå°±ä¸ä¼šæœ‰å¼ºå¼•ç”¨æ¥æ³„æ¼å†…å­˜äº†ã€‚</p>
</blockquote>
<p>è¿™é‡Œæ˜¯ä¼˜åŒ–ï¼Œå°±ä¸èµ˜è¿°äº†ï¼Œç›´æ¥ä¸Šä»£ç </p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ‰‹æ’•ç±»Vue2å“åº”å¼demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"age"</span>&gt;</span>18<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"changeObj()"</span>&gt;</span>å¹´é¾„++<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// objå¯¹è±¡</span>
        <span class="hljs-keyword">const</span> obj = {
            age : <span class="hljs-number">18</span>
        }

        <span class="hljs-comment">//ä½¿ç”¨åŸç”Ÿæ‹¿åˆ°å…ƒç´ </span>
        <span class="hljs-keyword">const</span> age = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#age'</span>)

        <span class="hljs-keyword">const</span> updateDom = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            age.<span class="hljs-property">textContent</span> = obj.<span class="hljs-property">age</span>.<span class="hljs-title function_">toString</span>()
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age.<span class="hljs-property">textContent</span>);
        }

        <span class="hljs-comment">//æ¨¡æ‹Ÿä¾èµ–å‡½æ•°1</span>
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">dependFn1</span> = (<span class="hljs-params"/>)=&gt;{
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
        }

        <span class="hljs-comment">//æ¨¡æ‹Ÿä¾èµ–å‡½æ•°2</span>
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">dependFn2</span> = (<span class="hljs-params"/>)=&gt;{
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
        }

        <span class="hljs-comment">//æ¨¡æ‹Ÿä¾èµ–å‡½æ•°3</span>
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">dependFn3</span> = (<span class="hljs-params"/>)=&gt;{
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
        }

        <span class="hljs-comment">//è¿™æ—¶å€™å¾—åˆ›å»ºä¸€ä¸ªç±»</span>
        <span class="hljs-keyword">class</span> <span class="hljs-title class_">Depend</span> {
            <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">dependFns</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
            }

            <span class="hljs-comment">//æ”¶é›†ä¾èµ–å‡½æ•°</span>
            <span class="hljs-title function_">gatherFns</span>(<span class="hljs-params">fn</span>){
                <span class="hljs-keyword">if</span>(fn &amp;&amp; <span class="hljs-keyword">typeof</span> fn === <span class="hljs-string">'function'</span>){
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dependFns</span>.<span class="hljs-title function_">add</span>(fn)
                }
            }

            <span class="hljs-comment">//ç»Ÿä¸€è°ƒç”¨ä¾èµ–å‡½æ•°</span>
            <span class="hljs-title function_">dispatchFns</span>(<span class="hljs-params"/>){
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">dependFns</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> {
                    <span class="hljs-title function_">fn</span>()
                })
            }
        }

        <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeObj</span> = (<span class="hljs-params"/>)=&gt;{
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">age</span>);
            obj.<span class="hljs-property">age</span>++
        }

        <span class="hljs-comment">//è®¾ç½®æ´»è·ƒå‡½æ•°</span>
        <span class="hljs-keyword">let</span> activeFn = <span class="hljs-literal">null</span>
        <span class="hljs-comment">//åŠ å…¥ä¾èµ–çš„å‡½æ•°</span>
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">addDependFn</span> = (<span class="hljs-params">fn</span>)=&gt;{
            activeFn = fn
            <span class="hljs-title function_">fn</span>()
            activeFn = <span class="hljs-literal">null</span>
        }

        <span class="hljs-comment">//æ‰‹åŠ¨æ‰§è¡Œä¸€éå‡½æ•°</span>
        <span class="hljs-title function_">addDependFn</span>(dependFn1)
        <span class="hljs-title function_">addDependFn</span>(dependFn2)
        <span class="hljs-title function_">addDependFn</span>(dependFn3)

        <span class="hljs-keyword">const</span> targetMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>()<span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå°†å“åº”å¼å¯¹è±¡æ”¾è¿›å»</span>

        <span class="hljs-comment">//æŸ¥æ‰¾ä¾èµ–å®ä¾‹çš„å‡½æ•°</span>
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDepend</span> = (<span class="hljs-params">obj,key</span>)=&gt;{
            <span class="hljs-keyword">let</span> target = targetMap.<span class="hljs-title function_">get</span>(obj)

            <span class="hljs-keyword">if</span>(!target){
                <span class="hljs-comment">//åˆ›å»º</span>
                <span class="hljs-keyword">const</span> propertyDependMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>() <span class="hljs-comment">//åˆ›å»ºä¸€å¼ å±æ€§å’Œå¯¹åº”ä¾èµ–å®ä¾‹çš„å¯¹ç…§è¡¨</span>
                targetMap.<span class="hljs-title function_">set</span>(obj,propertyDependMap) <span class="hljs-comment">//å°†å¯¹è±¡å’Œå¯¹åº”çš„å±æ€§å’Œå¯¹åº”ä¾èµ–å®ä¾‹çš„å¯¹ç…§è¡¨å…³è”ï¼Œå¯ä»¥é€šè¿‡å¯¹è±¡æ‰¾åˆ°å¯¹ç…§è¡¨</span>
                target = targetMap.<span class="hljs-title function_">get</span>(obj)
            }

            <span class="hljs-keyword">let</span> depend = target.<span class="hljs-title function_">get</span>(key)
            <span class="hljs-keyword">if</span>(!depend){
                <span class="hljs-comment">//åˆ›å»º</span>
                <span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Depend</span>()
                target.<span class="hljs-title function_">set</span>(key,instance) <span class="hljs-comment">//å°†æ˜ å°„å…³ç³»å†™å¥½</span>
                depend = instance
            }

            <span class="hljs-keyword">return</span> depend
        }

        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªmyReactiveçš„å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè¿›è¡Œå¯¹å®ƒçš„å±æ€§åŠ«æŒ</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">myReactive</span>(<span class="hljs-params">obj</span>){
            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
                <span class="hljs-keyword">let</span> value = obj[key] <span class="hljs-comment">//è·å–å¯¹åº”å±æ€§çš„å€¼ï¼Œä¿ç•™ç­‰ä¸‹è¦ç”¨</span>

                <span class="hljs-comment">//åŠ ä¸Šå±æ€§åŠ«æŒ</span>
                <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj,key,{
                    get : <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
                        <span class="hljs-title function_">getDepend</span>(obj,key).<span class="hljs-title function_">gatherFns</span>(activeFn)
                        <span class="hljs-keyword">return</span> value
                    },
                    set : <span class="hljs-keyword">function</span>(<span class="hljs-params">newValue</span>){
                        value = newValue
                        <span class="hljs-comment">//é€šçŸ¥å¯¹åº”çš„å®ä¾‹æ‰§è¡Œæ‰€æœ‰ä¾èµ–å‡½æ•°</span>
                        <span class="hljs-title function_">getDepend</span>(obj,key).<span class="hljs-title function_">dispatchFns</span>()
                    }
                })
            })
        }

        <span class="hljs-title function_">myReactive</span>(obj)
        <span class="hljs-title function_">addDependFn</span>(updateDom)
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a45a65bfae0547a8b389d312ef7481f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q6L5Yas6YaJ56a75q6H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763482454&amp;x-signature=LctjD%2BFN%2F1IXxBC0y8udQWCqX0Q%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">ä¸ƒã€æ€»ç»“</h3>
<p>å“åº”å¼å…¶å®å°±æ˜¯3ä¸ªé‡è¦çš„ç‚¹</p>
<ol>
<li><strong>ä¾èµ–æ”¶é›†</strong>ï¼šé€šè¿‡<code>Object.defineProperty</code>çš„getteræ‹¦æˆªå±æ€§è®¿é—®ï¼Œæ”¶é›†å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ä½œä¸ºä¾èµ–</li>
<li><strong>ä¾èµ–è§¦å‘</strong>ï¼šé€šè¿‡setteræ‹¦æˆªå±æ€§ä¿®æ”¹ï¼Œè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰ä¾èµ–å‡½æ•°æ›´æ–°</li>
<li><strong>ä¾èµ–ç®¡ç†</strong>ï¼šä½¿ç”¨<code>Depend</code>ç±»ç®¡ç†æ¯ä¸ªå±æ€§çš„ä¾èµ–å…³ç³»ï¼Œä½¿ç”¨<code>WeakMap</code>å’Œ<code>Map</code>å»ºç«‹å¯¹è±¡-å±æ€§-ä¾èµ–çš„æ˜ å°„å…³ç³»</li>
</ol>
<blockquote>
<p>è¿™ä¸ªç®€æ˜“å®ç°åŒ…å«äº†Vue2å“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒæ€æƒ³ï¼Œä½†æ˜¯vueå°è£…çš„æ›´åŠ å¤æ‚ï¼è¿™ä¸ªåªæ˜¯æˆ‘çš„ä¸ªäººæ€»ç»“ï¼Œå¦‚æœèƒ½å¸®åˆ°ä½ çš„è¯ï¼Œå°±æ›´å¥½å•¦ï¼å¦‚æœè§‰å¾—å†™çš„å¥½çš„è¯ï¼Œå¯ä»¥ç»™ä¸ªä¸€é”®ä¸‰è¿å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3 Props å“åº”å¼æ·±åº¦è§£æï¼šä»åŸç†åˆ°æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7571342319892987939</link>    <guid>https://juejin.cn/post/7571342319892987939</guid>    <pubDate>2025-11-12T00:07:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571342319892987939" data-draft-id="7571344319702384680" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3 Props å“åº”å¼æ·±åº¦è§£æï¼šä»åŸç†åˆ°æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T00:07:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ¨æ˜“å£«å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/588993963763751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3 Props å“åº”å¼æ·±åº¦è§£æï¼šä»åŸç†åˆ°æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993963763751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ¨æ˜“å£«å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:07:38.000Z" title="Wed Nov 12 2025 00:07:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>åœ¨ Vue 3 çš„å“åº”å¼ç³»ç»Ÿä¸­ï¼Œ<code>props</code> æ˜¯å®ç°ç»„ä»¶é—´æ•°æ®é€šä¿¡çš„æ ¸å¿ƒæœºåˆ¶ã€‚å®ƒæ—¢å¼ºå¤§åˆå¾®å¦™â€”â€”çœ‹ä¼¼ç®€å•ï¼Œå´è•´å«ç€å“åº”å¼ç³»ç»Ÿçš„è®¾è®¡å“²å­¦ã€‚è®¸å¤šå¼€å‘è€…è¯¯ä»¥ä¸ºâ€œåªè¦ä¼ äº†å€¼å°±ä¼šè‡ªåŠ¨æ›´æ–°â€ï¼Œä½†çœŸå®åœºæ™¯è¿œæ¯”è¿™å¤æ‚ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ç†è§£ <code>props</code> çš„å“åº”å¼æœ¬è´¨ã€è¾¹ç•Œè¡Œä¸ºï¼Œå¹¶æä¾›å¯è½åœ°çš„æœ€ä½³å®è·µæ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ Props å“åº”å¼æœ¬è´¨ï¼šå•å‘æ•°æ®æµçš„æ ¸å¿ƒ</h2>
<h3 data-id="heading-2">1.å“åº”å¼åŸç†å‰–æ</h3>
<p>Vue 3 çš„ <code>props</code> å¹¶éå‡­ç©ºå…·å¤‡å“åº”èƒ½åŠ›ï¼Œè€Œæ˜¯å…¶åº•å±‚å“åº”å¼ç³»ç»Ÿï¼ˆåŸºäº <code>Proxy</code> å’Œ <code>reactive</code>ï¼‰çš„è‡ªç„¶å»¶ä¼¸ã€‚å½“çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®æ—¶ï¼ŒVue å†…éƒ¨ä¼šå°†åŸå§‹ props å¯¹è±¡åŒ…è£…æˆä¸€ä¸ª<strong>åªè¯»çš„å“åº”å¼ä»£ç†</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue å†…éƒ¨ç®€åŒ–é€»è¾‘ç¤ºæ„</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createPropsProxy</span>(<span class="hljs-params">rawProps, instance</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">reactive</span>(rawProps); <span class="hljs-comment">// åŸºäº reactive() åˆ›å»ºå“åº”å¼ä»£ç†</span>
}
</code></pre>
<blockquote>
<p><strong>å…³é”®æ´å¯Ÿ</strong>ï¼š<br/>
<code>props</code> çš„å“åº”å¼ä¸æ˜¯â€œé­”æ³•â€ï¼Œè€Œæ˜¯ Vue å“åº”å¼ç³»ç»Ÿçš„æ ‡å‡†è¡Œä¸ºã€‚ä½†ä¸æ™®é€š <code>reactive</code> å¯¹è±¡ä¸åŒï¼Œ<strong>props æ˜¯åªè¯»çš„</strong>â€”â€”è¿™æ˜¯ä¸ºäº†å¼ºåˆ¶éµå®ˆâ€œå•å‘æ•°æ®æµâ€åŸåˆ™ï¼Œé˜²æ­¢å­ç»„ä»¶æ„å¤–ä¿®æ”¹çˆ¶çŠ¶æ€ï¼Œä»è€Œé¿å…éš¾ä»¥è¿½è¸ªçš„æ•°æ®æ±¡æŸ“ã€‚</p>
</blockquote>
<h3 data-id="heading-3">2. å“åº”å¼å±‚çº§åˆ†æ</h3>
<p>å¹¶éæ‰€æœ‰é€šè¿‡ <code>props</code> ä¼ é€’çš„æ•°æ®éƒ½å…·æœ‰ç›¸åŒçš„å“åº”è¡Œä¸ºã€‚ç†è§£å…¶å±‚çº§å·®å¼‚ï¼Œæ˜¯é¿å…â€œä¸ºä»€ä¹ˆæ²¡æ›´æ–°ï¼Ÿâ€è¿™ç±»é—®é¢˜çš„å…³é”®ï¼š</p>






























<table><thead><tr><th>æ•°æ®å±‚çº§</th><th>å“åº”å¼è¡¨ç°</th><th>ç¤ºä¾‹è¯´æ˜</th></tr></thead><tbody><tr><td>Prop æœ¬èº«ï¼ˆåŸºæœ¬ç±»å‹ï¼‰</td><td>å¼•ç”¨å˜åŒ–æ—¶å“åº”</td><td>çˆ¶ç»„ä»¶ <code>:count="refCount"</code>ï¼Œå½“ <code>refCount.value</code> æ”¹å˜ï¼Œå­ç»„ä»¶è‡ªåŠ¨æ›´æ–°</td></tr><tr><td>Prop å¯¹è±¡å†…éƒ¨å±æ€§</td><td>æ·±åº¦å“åº”å¼</td><td><code>user.name</code> å˜åŒ–ä¼šè§¦å‘æ›´æ–°ï¼Œå¾—ç›Šäº <code>reactive</code> çš„é€’å½’ä»£ç†</td></tr><tr><td>é™æ€å­—é¢é‡</td><td>æ— å“åº”å¼</td><td><code>title="é™æ€æ ‡é¢˜"</code> æ˜¯å¸¸é‡ï¼Œä¸ä¼šå˜åŒ–ï¼Œè‡ªç„¶æ— éœ€å“åº”</td></tr><tr><td>è®¡ç®—å±æ€§ä½œä¸º prop</td><td>ä¾èµ–å˜åŒ–æ—¶å“åº”</td><td>çˆ¶ç»„ä»¶ä¼ å…¥ <code>:value="computedValue"</code>ï¼Œå½“ <code>computedValue</code> ä¾èµ–é¡¹å˜åŒ–ï¼Œå­ç»„ä»¶åŒæ­¥æ›´æ–°</td></tr></tbody></table>
<blockquote>
<p><strong>å®è·µæç¤º</strong>ï¼šå¦‚æœä½ å‘ç°å­ç»„ä»¶æœªéšçˆ¶ç»„ä»¶æ›´æ–°ï¼Œè¯·é¦–å…ˆç¡®è®¤ï¼š<strong>çˆ¶ç»„ä»¶ä¼ é€’çš„æ˜¯å“åº”å¼æ•°æ®ï¼ˆå¦‚ <code>ref</code>/<code>reactive</code>ï¼‰ï¼Œè€Œéå­—é¢é‡æˆ–æ™®é€šå˜é‡</strong>ã€‚</p>
</blockquote>
<h2 data-id="heading-4">äºŒã€ é«˜çº§å£°æ˜æ¨¡å¼ï¼šç±»å‹å®‰å…¨ä¸è¿è¡Œæ—¶ä¿éšœ</h2>
<p>ç°ä»£ Vue å¼€å‘å¼ºè°ƒ<strong>ç±»å‹å®‰å…¨</strong>ä¸<strong>è¿è¡Œæ—¶å¯é æ€§</strong>ã€‚åˆç†å£°æ˜ <code>props</code> ä¸ä»…èƒ½æå‡å¼€å‘ä½“éªŒï¼Œè¿˜èƒ½åœ¨æ„å»ºé˜¶æ®µæ•è·æ½œåœ¨é”™è¯¯ã€‚</p>
<h3 data-id="heading-5">1. ç±»å‹å®‰å…¨çš„ Props å£°æ˜ï¼ˆTypeScriptï¼‰</h3>
<p>åœ¨ <code>&lt;script setup&gt;</code> ä¸­ç»“åˆ TypeScript æ¥å£ï¼Œå¯å®ç°ç«¯åˆ°ç«¯çš„ç±»å‹æ¨å¯¼ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
interface User {
  id: number
  name: string
  email: string
}

interface Props {
  title: string
  count: number
  user: User
  tags?: string[]
  onAction?: (payload: any) =&gt; void
}

// withDefaults æä¾›é»˜è®¤å€¼ï¼ŒåŒæ—¶ä¿æŒç±»å‹æ¨æ–­
const props = withDefaults(defineProps&lt;Props&gt;(), {
  count: 0,
  tags: () =&gt; ['default'] // æ³¨æ„ï¼šæ•°ç»„/å¯¹è±¡éœ€ç”¨å·¥å‚å‡½æ•°
})

// æ­¤å¤„ props.user.id å…·å¤‡å®Œæ•´ç±»å‹æç¤ºå’Œæ£€æŸ¥
console.log(props.user.id)
&lt;/script&gt;
</code></pre>
<blockquote>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>ç¼–è¾‘å™¨æ™ºèƒ½æç¤º</li>
<li>ç¼–è¯‘æœŸç±»å‹æ ¡éªŒ</li>
<li>å‡å°‘è¿è¡Œæ—¶é”™è¯¯</li>
</ul>
</blockquote>
<h3 data-id="heading-6">2. è¿è¡Œæ—¶éªŒè¯ä¸ TypeScript ç»“åˆ</h3>
<p>å³ä½¿ä½¿ç”¨ TypeScriptï¼ŒæŸäº›ä¸šåŠ¡é€»è¾‘ä»éœ€è¿è¡Œæ—¶éªŒè¯ï¼ˆå¦‚æšä¸¾å€¼ã€æ•°æ®æ ¼å¼ï¼‰ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { PropType } from 'vue'

const props = defineProps({
  user: {
    type: Object as PropType&lt;User&gt;,
    required: true,
    validator: (value: User) =&gt; {
      // è‡ªå®šä¹‰éªŒè¯è§„åˆ™ï¼šID å¿…é¡»ä¸ºæ­£ï¼Œåç§°éç©º
      return value.id &gt; 0 &amp;&amp; value.name.length &gt; 0
    }
  },
  status: {
    type: String as PropType&lt;'pending' | 'success' | 'error'&gt;,
    default: 'pending'
  }
})
&lt;/script&gt;
</code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼š<br/>
<code>validator</code> åœ¨ç”Ÿäº§ç¯å¢ƒä¼šè¢« Tree-shaking ç§»é™¤ï¼Œå› æ­¤<strong>ä¸èƒ½ä¾èµ–å®ƒåšå®‰å…¨æ ¡éªŒ</strong>ï¼Œä»…ç”¨äºå¼€å‘è°ƒè¯•ã€‚</p>
</blockquote>
<h2 data-id="heading-7">ä¸‰ã€ å“åº”å¼è¾¹ç•Œä¸æ€§èƒ½ä¼˜åŒ–</h2>
<p>éšç€åº”ç”¨å¤æ‚åº¦æå‡ï¼Œ<code>props</code> å¯èƒ½æ‰¿è½½å¤§å‹å¯¹è±¡æˆ–é«˜é¢‘æ›´æ–°æ•°æ®ã€‚æ­¤æ—¶ï¼Œç›²ç›®ä¾èµ–é»˜è®¤å“åº”å¼è¡Œä¸ºå¯èƒ½å¯¼è‡´æ€§èƒ½ç“¶é¢ˆã€‚</p>
<h3 data-id="heading-8">1. æ·±åº¦ç›‘å¬çš„å¼€é”€ä¸ä¼˜åŒ–ç­–ç•¥</h3>
<p>å¯¹å¤§å‹åµŒå¥—å¯¹è±¡ä½¿ç”¨ <code>{ deep: true }</code> ç›‘å¬ï¼Œä¼šè§¦å‘å¤§é‡ä¸å¿…è¦çš„è®¡ç®—ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
const props = defineProps({
  largeData: Object // å¯èƒ½åŒ…å«æ•°åƒé¡¹çš„é…ç½®æ ‘
})

//  æ€§èƒ½é™·é˜±ï¼šä»»ä½•åµŒå¥—å­—æ®µå˜åŒ–éƒ½ä¼šè§¦å‘å›è°ƒ
watch(props.largeData, (newVal) =&gt; {
  // ...
}, { deep: true })

//  ä¼˜åŒ–æ–¹æ¡ˆ1ï¼šç²¾å‡†ç›‘å¬å…³é”®è·¯å¾„
watch(() =&gt; props.largeData.criticalField, (newVal) =&gt; {
  // ä»…å½“æ ¸å¿ƒå­—æ®µå˜åŒ–æ—¶å¤„ç†
})

//  ä¼˜åŒ–æ–¹æ¡ˆ2ï¼šè‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘ï¼ˆé¿å…å…¨é‡ diffï¼‰
watch(() =&gt; props.largeData, (newVal, oldVal) =&gt; {
  if (JSON.stringify(newVal.importantPart) !== JSON.stringify(oldVal.importantPart)) {
    handleImportantChange(newVal.importantPart)
  }
}, { deep: true })

//  ä¼˜åŒ–æ–¹æ¡ˆ3ï¼šé˜²æŠ– + æ‰¹é‡å¤„ç†
import { debounce } from 'lodash-es'
const debouncedHandler = debounce((data) =&gt; {
  updateExpensiveUI(data)
}, 300)

watch(() =&gt; props.largeData, debouncedHandler, { deep: true })
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-9">2. ä¸å¯å˜æ•°æ®æ¨¡å¼ï¼šé™ä½å“åº”å¼å¼€é”€</h3>
<p>å¯¹äºé¢‘ç¹æ•´ä½“æ›¿æ¢çš„æ•°æ®ï¼ˆå¦‚åˆ—è¡¨åˆ·æ–°ï¼‰ï¼Œå¯é‡‡ç”¨<strong>ä¸å¯å˜æ›´æ–° + æµ…å±‚å“åº”å¼</strong>ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
const props = defineProps({
  items: Array // å¤§å‹åˆ—è¡¨ï¼Œæ¯æ¬¡åˆ†é¡µéƒ½æ•´ä½“æ›¿æ¢
})

// ä½¿ç”¨ shallowRef é¿å… Vue å¯¹æ¯ä¸ª item åšæ·±åº¦ä»£ç†
import { shallowRef, computed } from 'vue'
const itemsRef = shallowRef(props.items)

// å½“ props.items å¼•ç”¨å˜åŒ–æ—¶ï¼Œæ›´æ–° shallowRef
watch(() =&gt; props.items, (newItems) =&gt; {
  itemsRef.value = newItems // æ•´ä½“æ›¿æ¢ï¼Œæ— åµŒå¥—å“åº”å¼å¼€é”€
})

// æ¨¡æ¿ä¸­é€šè¿‡ computed å®‰å…¨è®¿é—®
const processedItems = computed(() =&gt; 
  itemsRef.value.map(item =&gt; ({ ...item, processed: true }))
)
&lt;/script&gt;
</code></pre>
<blockquote>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>è¡¨æ ¼/åˆ—è¡¨æ•°æ®</li>
<li>é…ç½®å¿«ç…§</li>
<li>ä¸€æ¬¡æ€§æ¸²æŸ“å†…å®¹</li>
</ul>
</blockquote>
<h2 data-id="heading-10">å››ã€ é«˜çº§å“åº”å¼æ¨¡å¼ï¼šè§£æ„ã€æ¡ä»¶å¤„ç†ä¸ç»„åˆé€»è¾‘</h2>
<h3 data-id="heading-11">1. å“åº”å¼ Props è§£æ„ï¼šå¦‚ä½•ä¸ä¸¢å¤±å“åº”æ€§ï¼Ÿ</h3>
<p>ç›´æ¥è§£æ„ <code>props</code> ä¼šå¯¼è‡´å“åº”å¼è¿æ¥æ–­è£‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//  é”™è¯¯ï¼šuser æˆä¸ºæ™®é€šå€¼ï¼Œä¸å†å“åº”</span>
<span class="hljs-keyword">const</span> { user } = props
</code></pre>
<p>æ­£ç¡®åšæ³•æœ‰ä¸‰ç§ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { toRefs, computed } from 'vue'

const props = defineProps({ user: Object, settings: Object })

//  æ–¹æ¡ˆ1ï¼štoRefs ä¿æŒå“åº”å¼å¼•ç”¨
const { user, settings } = toRefs(props)

//  æ–¹æ¡ˆ2ï¼šcomputed æ´¾ç”Ÿï¼ˆæ¨èç”¨äºæ¨¡æ¿å±•ç¤ºï¼‰
const userName = computed(() =&gt; props.user.name)
const theme = computed(() =&gt; props.settings.theme)

//  æ–¹æ¡ˆ3ï¼šé€‰æ‹©æ€§è§£æ„ + é»˜è®¤å€¼ï¼ˆTypeScript å‹å¥½ï¼‰
const { user = defaultUser } = toRefs(props)
&lt;/script&gt;
</code></pre>
<blockquote>
<p><strong>ä½•æ—¶ç”¨å“ªç§ï¼Ÿ</strong></p>
<ul>
<li><code>toRefs</code>ï¼šéœ€è¦åœ¨ <code>setup()</code> ä¸­é¢‘ç¹è®¿é—®å¤šä¸ªå±æ€§</li>
<li><code>computed</code>ï¼šç”¨äºæ¨¡æ¿æˆ–æ´¾ç”Ÿé€»è¾‘ï¼Œè¯­ä¹‰æ›´æ¸…æ™°</li>
<li>ç›´æ¥ <code>props.xxx</code>ï¼šæœ€ç®€å•åœºæ™¯ï¼Œé¿å…è¿‡åº¦æŠ½è±¡</li>
</ul>
</blockquote>
<h3 data-id="heading-12">2. æ¡ä»¶å“åº”å¼å¤„ç†ï¼šåº”å¯¹ null/undefined</h3>
<p>ç°å®é¡¹ç›®ä¸­ï¼Œ<code>props</code> å¸¸å› å¼‚æ­¥åŠ è½½è€Œæš‚æ—¶ä¸º <code>null</code>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
const props = defineProps({
  data: [Object, null] // å…è®¸ null
})

// å®‰å…¨è®¿é—®ï¼šé¿å… .xxx æŠ¥é”™
const safeData = computed(() =&gt; props.data ?? {})

// æ¡ä»¶ç›‘å¬ï¼šä»…åœ¨æœ‰æ•ˆæ•°æ®åˆ°æ¥æ—¶å¤„ç†
watch(() =&gt; props.data, (newData) =&gt; {
  if (newData) {
    initializeComponent(newData)
  }
})

// æˆ–ä½¿ç”¨ watchEffect è‡ªåŠ¨è¿½è¸ªä¾èµ–
watchEffect(() =&gt; {
  if (props.data?.id) {
    // è‡ªåŠ¨ä¾èµ– props.dataï¼Œä¸”ä»…åœ¨ id å­˜åœ¨æ—¶æ‰§è¡Œ
    fetchRelatedData(props.data.id)
  }
})
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-13">äº”ã€ å¤æ‚æ•°æ®æµæ¨¡å¼ï¼šè·¨å±‚çº§é€šä¿¡ä¸çŠ¶æ€èåˆ</h2>
<h3 data-id="heading-14">1.å¤šå±‚çº§ç»„ä»¶é€šä¿¡ï¼šé€ä¼ ä¸ä¸­é—´å¤„ç†</h3>
<p>åœ¨æ·±å±‚åµŒå¥—ç»„ä»¶ä¸­ï¼Œä¸­é—´å±‚ç»„ä»¶å¸¸éœ€â€œé€ä¼ å¹¶å¢å¼ºâ€ propsï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- ä¸­é—´å±‚ç»„ä»¶ --&gt;
&lt;script setup&gt;
const props = defineProps({
  config: Object,
  state: Object
})

// å¯¹é€ä¼ çš„ config æ·»åŠ ä¸­é—´å±‚å…ƒä¿¡æ¯
const processedConfig = computed(() =&gt; ({
  ...props.config,
  processedAt: Date.now(),
  version: 'v2'
}))

// äº‹ä»¶è½¬å‘ + æ ¡éªŒ
const emit = defineEmits(['update:state'])
const handleStateChange = (newState) =&gt; {
  const validated = validateState(newState)
  if (validated.isValid) {
    emit('update:state', validated.data)
  } else {
    console.warn('Invalid state update:', validated.errors)
  }
}
&lt;/script&gt;

&lt;template&gt;
  &lt;ChildComponent 
    :config="processedConfig"
    :state="state"
    @update:state="handleStateChange"
  /&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-15">2. çŠ¶æ€æå‡ä¸æœ¬åœ°çŠ¶æ€èåˆ</h3>
<p>æœ‰æ—¶éœ€è¦å°†å¤–éƒ¨çŠ¶æ€ï¼ˆpropsï¼‰ä¸æœ¬åœ°çŠ¶æ€åˆå¹¶ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
const props = defineProps({
  externalState: Object // æ¥è‡ªå…¨å±€ store æˆ–çˆ¶ç»„ä»¶
})

const localState = ref({ editing: false, draft: '' })

// å½“å¤–éƒ¨çŠ¶æ€é‡ç½®æ—¶ï¼Œæ¸…ç©ºæœ¬åœ°è‰ç¨¿
watch(() =&gt; props.externalState, (newState) =&gt; {
  if (newState.shouldResetLocal) {
    localState.value = { editing: false, draft: '' }
  }
}, { deep: true })

// åˆå¹¶çŠ¶æ€ä¾›æ¨¡æ¿ä½¿ç”¨
const mergedState = computed(() =&gt; ({
  ...props.externalState,
  ...localState.value,
  isDirty: localState.value.draft !== props.externalState.content
}))
&lt;/script&gt;
</code></pre>
<blockquote>
<p><strong>è®¾è®¡æ€æƒ³</strong>ï¼š<br/>
å°†â€œå—æ§â€ï¼ˆæ¥è‡ª propsï¼‰ä¸â€œéå—æ§â€ï¼ˆæœ¬åœ°çŠ¶æ€ï¼‰åˆ†ç¦»ï¼Œå†é€šè¿‡ <code>computed</code> èåˆï¼Œæ˜¯å¤æ‚è¡¨å•ã€ç¼–è¾‘å™¨ç­‰åœºæ™¯çš„å¸¸è§æ¨¡å¼ã€‚</p>
</blockquote>
<h2 data-id="heading-16">å…­ã€ æ€§èƒ½ä¸è°ƒè¯•æŠ€å·§</h2>
<h3 data-id="heading-17">1.  å“åº”å¼è°ƒè¯•ï¼šçœ‹æ¸…ä¾èµ–å…³ç³»</h3>
<p>å¼€å‘é˜¶æ®µå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è§‚å¯Ÿ props çš„å“åº”è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
const props = defineProps({ complexData: Object })

// watchEffect ä¼šæ‰“å°æ¯æ¬¡è®¿é—®çš„ä¾èµ–
watchEffect(() =&gt; {
  console.log('[Debug] Accessing props:', {
    data: props.complexData,
    keys: Object.keys(props.complexData || {})
  })
})

// è·å–ç»„ä»¶å®ä¾‹ï¼ŒæŸ¥çœ‹åŸå§‹ props
import { getCurrentInstance, onMounted } from 'vue'
const instance = getCurrentInstance()
onMounted(() =&gt; {
  console.log('Raw props:', instance?.props)
})
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-18">2. è®°å¿†åŒ–ä¸ç¼“å­˜ï¼šé¿å…é‡å¤è®¡ç®—</h3>
<p>å¯¹æ˜‚è´µçš„æ´¾ç”Ÿè®¡ç®—ï¼Œåº”ä½¿ç”¨ç¼“å­˜ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
const props = defineProps({
  items: Array,
  filter: String
})

// æ–¹æ¡ˆ1ï¼šcomputed è‡ªåŠ¨ç¼“å­˜ï¼ˆæ¨èï¼‰
const filteredItems = computed(() =&gt; 
  props.items.filter(item =&gt; item.name.includes(props.filter))
)

// æ–¹æ¡ˆ2ï¼šæ‰‹åŠ¨ç¼“å­˜ + ç²¾ç¡®ä¾èµ–
const cachedResult = ref([])
watch([() =&gt; props.items, () =&gt; props.filter], 
  ([items, filter]) =&gt; {
    cachedResult.value = expensiveComputation(items, filter)
  }, 
  { immediate: true }
)
&lt;/script&gt;
</code></pre>
<blockquote>
<p><strong>ç»éªŒæ³•åˆ™</strong>ï¼š<br/>
ä¼˜å…ˆä½¿ç”¨ <code>computed</code>ï¼Œé™¤éä½ éœ€è¦æ§åˆ¶ç¼“å­˜ç­–ç•¥ï¼ˆå¦‚ LRUã€è¿‡æœŸæ—¶é—´ç­‰ï¼‰ã€‚</p>
</blockquote>
<h2 data-id="heading-19">ä¸ƒã€ å“åº”å¼ Props æ¨¡å¼æ€»ç»“</h2>
<h3 data-id="heading-20">1. åœºæ™¯æ–¹æ¡ˆæ€»ç»“</h3>








































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ¨¡å¼</th><th>æ›¿ä»£/è¡¥å……æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>åŸºæœ¬ç±»å‹ä¼ é€’</td><td>ç›´æ¥ä½¿ç”¨ <code>props.xxx</code></td><td><code>toRef(props, 'xxx')</code>ï¼ˆéœ€è§£æ„æ—¶ï¼‰</td></tr><tr><td>å¯¹è±¡å†…éƒ¨å±æ€§è®¿é—®</td><td>é»˜è®¤æ·±åº¦å“åº”å¼</td><td><code>watch(() =&gt; props.obj.field, ...)</code></td></tr><tr><td>å¤§å‹æ•°æ®é›†ï¼ˆåˆ—è¡¨/æ ‘ï¼‰</td><td><code>shallowRef</code> + æ•´ä½“æ›¿æ¢</td><td>è™šæ‹Ÿæ»šåŠ¨ + åˆ†é¡µåŠ è½½</td></tr><tr><td>é«˜é¢‘æ›´æ–°ï¼ˆå¦‚æ‹–æ‹½åæ ‡ï¼‰</td><td>é˜²æŠ– + æ¡ä»¶æ›´æ–°</td><td>ä½¿ç”¨ <code>requestAnimationFrame</code> èŠ‚æµ</td></tr><tr><td>ç±»å‹å®‰å…¨éœ€æ±‚</td><td>TypeScript æ¥å£ + <code>withDefaults</code></td><td>è¿è¡Œæ—¶ <code>validator</code>ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰</td></tr><tr><td>å¤æ‚è½¬æ¢é€»è¾‘</td><td><code>computed</code> æ´¾ç”Ÿ</td><td>è‡ªå®šä¹‰ç»„åˆå¼å‡½æ•°ï¼ˆcomposablesï¼‰</td></tr></tbody></table>
<h3 data-id="heading-21">2.ä½¿ç”¨å»ºè®®</h3>
<ol>
<li><strong>å£°æ˜æ˜ç¡®</strong>ï¼šå§‹ç»ˆä¸º <code>props</code> æä¾›ç±»å‹å®šä¹‰ï¼ˆTSï¼‰æˆ–è¿è¡Œæ—¶éªŒè¯ï¼ˆJSï¼‰</li>
<li><strong>åšå®ˆå•å‘æµ</strong>ï¼šé€šè¿‡ <code>emit</code> å‘ä¸Šé€šä¿¡ï¼Œç»ä¸ç›´æ¥ä¿®æ”¹ <code>props</code></li>
<li><strong>æ€§èƒ½æ•æ„Ÿ</strong>ï¼šå¯¹å¤§å‹/é«˜é¢‘æ•°æ®ï¼Œè¯„ä¼°æ˜¯å¦éœ€æµ…å±‚å“åº”å¼æˆ–æ‰‹åŠ¨æ§åˆ¶</li>
<li><strong>é˜²å¾¡æ€§ç¼–ç¨‹</strong>ï¼šå¤„ç† <code>null</code>/<code>undefined</code>ï¼Œé¿å… <code>.xxx</code> æŠ¥é”™</li>
<li><strong>å¼€å‘å‹å¥½</strong>ï¼šåœ¨è°ƒè¯•é˜¶æ®µæ·»åŠ  <code>watchEffect</code> æ—¥å¿—ï¼Œç†æ¸…ä¾èµ–</li>
<li><strong>æµ‹è¯•è¦†ç›–</strong>ï¼šç¼–å†™å•å…ƒæµ‹è¯•ï¼ŒéªŒè¯ <code>props</code> å˜åŒ–æ—¶çš„ç»„ä»¶è¡Œä¸º</li>
</ol>
<h2 data-id="heading-22">å…«ã€ è¿›é˜¶å­¦ä¹ è·¯å¾„</h2>
<p>è¦è¿›ä¸€æ­¥æŒæ¡ Vue 3 å“åº”å¼ç³»ç»Ÿï¼Œå»ºè®®æ·±å…¥ä»¥ä¸‹æ–¹å‘ï¼š</p>
<ul>
<li><strong>æºç é˜…è¯»</strong>ï¼šç ”ç©¶ <code>reactive.ts</code>ã€<code>componentProps.ts</code> å®ç°</li>
<li><strong>è‡ªå®šä¹‰æ¸²æŸ“å™¨</strong>ï¼šäº†è§£ <code>props</code> åœ¨é DOM ç¯å¢ƒï¼ˆå¦‚å°ç¨‹åºï¼‰ä¸­çš„å¤„ç†</li>
<li><strong>SSR åºåˆ—åŒ–</strong>ï¼šç†è§£æœåŠ¡ç«¯å¦‚ä½•ä¼ é€’ <code>props</code> åˆ°å®¢æˆ·ç«¯</li>
<li><strong>DevTools è°ƒè¯•</strong>ï¼šä½¿ç”¨ Vue DevTools çš„ â€œComponentsâ€ é¢æ¿å®æ—¶è§‚å¯Ÿ <code>props</code> å˜åŒ–</li>
</ul>
<p>é€šè¿‡æ·±å…¥ç†è§£ <code>props</code> çš„å“åº”å¼æœºåˆ¶ï¼Œä½ ä¸ä»…èƒ½é¿å…å¸¸è§é™·é˜±ï¼Œæ›´èƒ½è®¾è®¡å‡ºé«˜æ€§èƒ½ã€é«˜å¯ç»´æŠ¤æ€§çš„ç»„ä»¶æ¶æ„ã€‚è®°ä½ï¼š<strong>å“åº”å¼æ˜¯å·¥å…·ï¼Œä¸æ˜¯ç›®çš„</strong>ã€‚åˆç†ä½¿ç”¨ï¼Œæ–¹èƒ½å‘æŒ¥ Vue 3 çš„æœ€å¤§å¨åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å®ç°ä¸€ä¸ªä½ä»£ç ç¼–è¾‘å™¨ï¼šæ­ç§˜å¯è§†åŒ–æ­å»ºçš„æ ¸å¿ƒåŸç†]]></title>    <link>https://juejin.cn/post/7571344319702433832</link>    <guid>https://juejin.cn/post/7571344319702433832</guid>    <pubDate>2025-11-12T00:15:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571344319702433832" data-draft-id="7568746602805166107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å®ç°ä¸€ä¸ªä½ä»£ç ç¼–è¾‘å™¨ï¼šæ­ç§˜å¯è§†åŒ–æ­å»ºçš„æ ¸å¿ƒåŸç†"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,ä½ä»£ç "/> <meta itemprop="datePublished" content="2025-11-12T00:15:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FogLetter"/> <meta itemprop="url" content="https://juejin.cn/user/933907109778611"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å®ç°ä¸€ä¸ªä½ä»£ç ç¼–è¾‘å™¨ï¼šæ­ç§˜å¯è§†åŒ–æ­å»ºçš„æ ¸å¿ƒåŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933907109778611/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FogLetter
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:15:32.000Z" title="Wed Nov 12 2025 00:15:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šå½“ç¼–ç¨‹é‡ä¸Šã€Œæ‹–æ‹½ã€</h2>
<p>è¿˜è®°å¾—ç¬¬ä¸€æ¬¡æ¥è§¦ç¼–ç¨‹æ—¶çš„å…´å¥‹å—ï¼Ÿåœ¨é»‘è‰²çš„ç»ˆç«¯é‡Œè¾“å…¥å‡ è¡Œç¥ç§˜çš„ä»£ç ï¼Œå°±èƒ½è®©è®¡ç®—æœºæŒ‰ç…§æˆ‘ä»¬çš„æ„æ„¿å·¥ä½œã€‚ä½†éšç€ç¼–ç¨‹ç»éªŒçš„å¢é•¿ï¼Œæˆ‘ä»¬ä¹Ÿä¼šå‘ç°ï¼šå¾ˆå¤šé‡å¤æ€§çš„é¡µé¢å¼€å‘å·¥ä½œï¼Œå…¶å®å¹¶ä¸éœ€è¦æ¯æ¬¡éƒ½ä»å¤´å¼€å§‹å†™ä»£ç ã€‚</p>
<p>è¿™å°±æ˜¯ä½ä»£ç /é›¶ä»£ç å¹³å°è¯ç”Ÿçš„èƒŒæ™¯ã€‚ä½œä¸ºä¸€åå¼€å‘è€…ï¼Œæˆ‘æœ€åˆå¯¹è¿™ç±»å¹³å°æ˜¯æŠ±æœ‰æ€€ç–‘æ€åº¦çš„â€”â€”ã€Œæ‹–æ‹½å°±èƒ½ç”Ÿæˆåº”ç”¨ï¼Ÿè‚¯å®šå¾ˆé¸¡è‚‹å§ï¼ã€ç›´åˆ°æˆ‘çœŸæ­£æ·±å…¥ä½¿ç”¨å¹¶å®ç°äº†ä¸€ä¸ªä½ä»£ç ç¼–è¾‘å™¨ï¼Œæ‰å‘ç°å…¶ä¸­çš„æŠ€æœ¯å†…æ¶µè¿œæ¯”æƒ³è±¡ä¸­ä¸°å¯Œã€‚</p>
<p>ä»Šå¤©ï¼Œå°±è®©æˆ‘å¸¦ä½ ä¸€èµ·æ­å¼€ä½ä»£ç ç¼–è¾‘å™¨çš„ç¥ç§˜é¢çº±ï¼Œçœ‹çœ‹è¿™çœ‹ä¼¼ç®€å•çš„ã€Œæ‹–æ‹½ã€èƒŒåï¼Œåˆ°åº•è—ç€æ€æ ·çš„æŠ€æœ¯å¥¥ç§˜ã€‚</p>
<h2 data-id="heading-1">ä½ä»£ç ä¸é›¶ä»£ç ï¼šæ¦‚å¿µè¾¨æ</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ä½ä»£ç /é›¶ä»£ç ï¼Ÿ</h3>
<p><strong>ä½ä»£ç </strong>ï¼ˆLow-Codeï¼‰å’Œ<strong>é›¶ä»£ç </strong>ï¼ˆNo-Codeï¼‰éƒ½æ˜¯é€šè¿‡å¯è§†åŒ–ç•Œé¢å’Œé…ç½®åŒ–æ–¹å¼ï¼Œå‡å°‘æˆ–æ›¿ä»£ä¼ ç»Ÿæ‰‹å†™ä»£ç çš„åº”ç”¨å¼€å‘æ–¹æ³•ã€‚</p>
<ul>
<li><strong>ä½ä»£ç </strong>ï¼šä¸»è¦é¢å‘å¼€å‘è€…ï¼Œæä¾›å¯è§†åŒ–å¼€å‘å·¥å…·æå‡å¼€å‘æ•ˆç‡</li>
<li><strong>é›¶ä»£ç </strong>ï¼šè®©éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½æ­å»ºç®€å•åº”ç”¨ï¼Œå¦‚è¡¨å•ã€å®¡æ‰¹æµç¨‹ã€æ•°æ®çœ‹æ¿ç­‰</li>
</ul>
<h3 data-id="heading-3">å®é™…åº”ç”¨åœºæ™¯</h3>
<p>åœ¨ä¸€ä¸ªä¼ä¸šå†…éƒ¨ç®¡ç†ç³»ç»Ÿé¡¹ç›®ä¸­ï¼Œå¼€å‘è€…ä½¿ç”¨ä½ä»£ç å¹³å°å¿«é€Ÿæ­å»ºäº†ï¼š</p>
<ol>
<li><strong>å‘˜å·¥è¯·å‡å®¡æ‰¹æµç¨‹</strong></li>
<li><strong>æ•°æ®æŠ¥è¡¨å±•ç¤ºçœ‹æ¿</strong></li>
<li><strong>å®¢æˆ·ä¿¡æ¯ç®¡ç†è¡¨å•</strong></li>
</ol>
<p>åŸæœ¬éœ€è¦2å‘¨å¼€å‘çš„åŠŸèƒ½ï¼Œåœ¨ä½ä»£ç å¹³å°ä¸Šåªç”¨äº†2å¤©å°±å®Œæˆäº†é…ç½®å’Œæµ‹è¯•ï¼Œæ•ˆç‡æå‡æƒŠäººï¼</p>
<h2 data-id="heading-4">ä½ä»£ç ç¼–è¾‘å™¨æ ¸å¿ƒæ¶æ„</h2>
<h3 data-id="heading-5">ä¸‰å¤§æ ¸å¿ƒåŒºåŸŸ</h3>
<p>ä»»ä½•ä½ä»£ç ç¼–è¾‘å™¨éƒ½åŒ…å«ä¸‰ä¸ªåŸºæœ¬åŒºåŸŸï¼š</p>
<ol>
<li><strong>ç‰©æ–™åŒºåŸŸ</strong>ï¼šæä¾›å¯æ‹–æ‹½çš„ç»„ä»¶</li>
<li><strong>ç¼–è¾‘åŒºåŸŸ</strong>ï¼šç»„ä»¶ç»„åˆå’Œå¸ƒå±€çš„åŒºåŸŸ</li>
<li><strong>å±æ€§è®¾ç½®åŒºåŸŸ</strong>ï¼šé…ç½®ç»„ä»¶å±æ€§çš„é¢æ¿</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// ç¼–è¾‘å™¨å¸ƒå±€ç»„ä»¶ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Allotment</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'allotment'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">LowcodeEditor</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-[100vh] flex flex-col"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Allotment</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Allotment.Pane</span> <span class="hljs-attr">preferredSize</span>=<span class="hljs-string">{240}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Material</span> /&gt;</span> {/* ç‰©æ–™åŒºåŸŸ */}
        <span class="hljs-tag">&lt;/<span class="hljs-name">Allotment.Pane</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Allotment.Pane</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">EditArea</span> /&gt;</span> {/* ç¼–è¾‘åŒºåŸŸ */}
        <span class="hljs-tag">&lt;/<span class="hljs-name">Allotment.Pane</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Allotment.Pane</span> <span class="hljs-attr">preferredSize</span>=<span class="hljs-string">{300}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Setting</span> /&gt;</span> {/* å±æ€§è®¾ç½®åŒºåŸŸ */}
        <span class="hljs-tag">&lt;/<span class="hljs-name">Allotment.Pane</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Allotment</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-6">æ ¸å¿ƒæŠ€æœ¯æ ˆ</h3>
<p>åœ¨å®ç°ä½ä»£ç ç¼–è¾‘å™¨æ—¶ï¼Œæˆ‘ä»¬é€‰æ‹©äº†ä»¥ä¸‹æŠ€æœ¯æ ˆï¼š</p>
<ul>
<li><strong>React</strong> + <strong>TypeScript</strong>ï¼šç»„ä»¶åŒ–å¼€å‘å’Œç±»å‹å®‰å…¨</li>
<li><strong>react-dnd</strong>ï¼šå®ç°æ‹–æ‹½åŠŸèƒ½</li>
<li><strong>allotment</strong>ï¼šå¯è°ƒæ•´å¤§å°çš„åˆ†æ å¸ƒå±€</li>
<li><strong>zustand</strong>ï¼šè½»é‡çº§çŠ¶æ€ç®¡ç†</li>
<li><strong>tailwindcss</strong>ï¼šåŸå­åŒ–CSSæ ·å¼</li>
</ul>
<h2 data-id="heading-7">å®ç°ç»†èŠ‚æ·±åº¦è§£æ</h2>
<h3 data-id="heading-8">çŠ¶æ€ç®¡ç†ï¼šç¼–è¾‘å™¨çš„ã€Œå¤§è„‘ã€</h3>
<p>ä½ä»£ç ç¼–è¾‘å™¨çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªè¡¨ç¤ºç»„ä»¶æ ‘ç»“æ„çš„çŠ¶æ€ç®¡ç†ã€‚æˆ‘ä»¬ä½¿ç”¨ zustand æ¥ç®¡ç†è¿™ä¸ªçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç»„ä»¶æ•°æ®ç»“æ„å®šä¹‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Component</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;      <span class="hljs-comment">// ç»„ä»¶ç±»å‹ï¼Œå¦‚ 'Button', 'Container'</span>
  <span class="hljs-attr">props</span>: <span class="hljs-built_in">any</span>;        <span class="hljs-comment">// ç»„ä»¶å±æ€§</span>
  children?: <span class="hljs-title class_">Component</span>[]; <span class="hljs-comment">// å­ç»„ä»¶</span>
  parentId?: <span class="hljs-built_in">number</span>;     <span class="hljs-comment">// çˆ¶ç»„ä»¶ID</span>
}

<span class="hljs-comment">// çŠ¶æ€ç®¡ç†store</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useComponentsStore = create&lt;<span class="hljs-title class_">State</span> &amp; <span class="hljs-title class_">Action</span>&gt;(<span class="hljs-function">(<span class="hljs-params">set, get</span>) =&gt;</span> ({
  <span class="hljs-attr">components</span>: [
    {
      <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">name</span>: <span class="hljs-string">'Page'</span>,
      <span class="hljs-attr">props</span>: {},
      <span class="hljs-attr">desc</span>: <span class="hljs-string">'é¡µé¢'</span>
    },
  ],
  <span class="hljs-comment">// æ·»åŠ ç»„ä»¶</span>
  <span class="hljs-attr">addComponent</span>: <span class="hljs-function">(<span class="hljs-params">component, parentId</span>) =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (parentId) {
      <span class="hljs-comment">// æ‰¾åˆ°çˆ¶ç»„ä»¶å¹¶æ·»åŠ å­ç»„ä»¶</span>
      <span class="hljs-keyword">const</span> parentComponent = <span class="hljs-title function_">getComponentById</span>(parentId, state.<span class="hljs-property">components</span>);
      <span class="hljs-keyword">if</span> (parentComponent) {
        <span class="hljs-keyword">if</span> (parentComponent.<span class="hljs-property">children</span>) {
          parentComponent.<span class="hljs-property">children</span>.<span class="hljs-title function_">push</span>(component);
        } <span class="hljs-keyword">else</span> {
          parentComponent.<span class="hljs-property">children</span> = [component];
        }
      }
      component.<span class="hljs-property">parentId</span> = parentId;
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">components</span>: [...state.<span class="hljs-property">components</span>],
      }
    }
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">components</span>: [...state.<span class="hljs-property">components</span>, component],
    }
  }),
  <span class="hljs-comment">// å…¶ä»–æ“ä½œ...</span>
}));
</code></pre>
<p>è¿™ä¸ªæ•°æ®ç»“æ„è™½ç„¶ç®€å•ï¼Œä½†å´æ˜¯æ•´ä¸ªç¼–è¾‘å™¨çš„æ ¸å¿ƒã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€æ£µæ ‘ï¼Œé€šè¿‡ <code>parentId</code> å’Œ <code>children</code> å±æ€§æ„å»ºå‡ºå®Œæ•´çš„ç»„ä»¶å±‚çº§å…³ç³»ã€‚</p>
<h3 data-id="heading-9">ç»„ä»¶é…ç½®ç®¡ç†ï¼šç¼–è¾‘å™¨çš„ã€Œç»„ä»¶åº“ã€</h3>
<p>ä¸ºäº†è®©ç¼–è¾‘å™¨çŸ¥é“æœ‰å“ªäº›ç»„ä»¶å¯ç”¨ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç»„ä»¶é…ç½®ç®¡ç†ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ComponentConfig</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">defaultProps</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;; <span class="hljs-comment">// é»˜è®¤å±æ€§</span>
  <span class="hljs-attr">component</span>: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// Reactç»„ä»¶</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useComponentConfigStore = create&lt;<span class="hljs-title class_">State</span> &amp; <span class="hljs-title class_">Actions</span>&gt;(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">componentConfig</span>: {
    <span class="hljs-title class_">Container</span>: {
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Container"</span>,
      <span class="hljs-attr">defaultProps</span>: {},
      <span class="hljs-attr">component</span>: <span class="hljs-title class_">Container</span>
    },
    <span class="hljs-title class_">Button</span>: {
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Button"</span>,
      <span class="hljs-attr">defaultProps</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"primary"</span>,
        <span class="hljs-attr">text</span>: <span class="hljs-string">"æŒ‰é’®"</span>,
      },
      <span class="hljs-attr">component</span>: <span class="hljs-title class_">Button</span>
    },
    <span class="hljs-title class_">Page</span>: {
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Page"</span>,
      <span class="hljs-attr">defaultProps</span>: {},
      <span class="hljs-attr">component</span>: <span class="hljs-title class_">Page</span>
    },
  },
  <span class="hljs-comment">// æ³¨å†Œæ–°ç»„ä»¶</span>
  <span class="hljs-attr">registerComponent</span>: <span class="hljs-function">(<span class="hljs-params">name, componentConfig</span>) =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> {
      ...state,
      <span class="hljs-attr">componentConfig</span>: {
        ...state.<span class="hljs-property">componentConfig</span>,
        [name]: componentConfig,
      }
    }
  }),
}));
</code></pre>
<h3 data-id="heading-10">æ‹–æ‹½å®ç°ï¼šç¼–è¾‘å™¨çš„ã€Œäº¤äº’çµé­‚ã€</h3>
<p>æ‹–æ‹½åŠŸèƒ½æ˜¯ä½ä»£ç ç¼–è¾‘å™¨æœ€æ ¸å¿ƒçš„äº¤äº’æ–¹å¼ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>react-dnd</code> æ¥å®ç°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç‰©æ–™é¡¹ - å¯æ‹–æ‹½çš„ç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MaterialItem</span>(<span class="hljs-params">props: MaterialItemProps</span>) {
  <span class="hljs-keyword">const</span> { name } = props;
  <span class="hljs-keyword">const</span> [_, drag] = <span class="hljs-title function_">useDrag</span>({
    <span class="hljs-attr">type</span>: name,
    <span class="hljs-attr">item</span>: {
      <span class="hljs-attr">type</span>: name,
    }
  });
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{drag}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"border-dashed border-[1px] border-[#000] py-[8px] px-[10px] m-[10px] cursor-move inline-block"</span>
    &gt;</span>
      {name}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-comment">// æ”¾ç½®åŒºåŸŸhook</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMaterialDrop</span>(<span class="hljs-params">accept: <span class="hljs-built_in">string</span>[], id: <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-keyword">const</span> { addComponent } = <span class="hljs-title function_">useComponentsStore</span>();
  <span class="hljs-keyword">const</span> { componentConfig } = <span class="hljs-title function_">useComponentConfigStore</span>();
  
  <span class="hljs-keyword">const</span> [{ canDrop }, drop] = <span class="hljs-title function_">useDrop</span>(<span class="hljs-function">() =&gt;</span> ({
    accept,
    <span class="hljs-attr">drop</span>: <span class="hljs-function">(<span class="hljs-params">item: { <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span> }, monitor</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> didDrop = monitor.<span class="hljs-title function_">didDrop</span>();
      <span class="hljs-keyword">if</span> (didDrop) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// é˜²æ­¢é‡å¤è§¦å‘</span>
      
      <span class="hljs-keyword">const</span> props = componentConfig[item.<span class="hljs-property">type</span>].<span class="hljs-property">defaultProps</span>;
      <span class="hljs-title function_">addComponent</span>({
        <span class="hljs-attr">id</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>(),
        <span class="hljs-attr">name</span>: item.<span class="hljs-property">type</span>,
        props
      }, id);
    },
    <span class="hljs-attr">collect</span>: <span class="hljs-function">(<span class="hljs-params">monitor</span>) =&gt;</span> ({
      <span class="hljs-attr">canDrop</span>: monitor.<span class="hljs-title function_">canDrop</span>(),
    }),
  }));
  
  <span class="hljs-keyword">return</span> { canDrop, drop };
}
</code></pre>
<h3 data-id="heading-11">ç»„ä»¶æ¸²æŸ“ï¼šä»æ•°æ®åˆ°UI</h3>
<p>ç¼–è¾‘åŒºåŸŸéœ€è¦å°†ç»„ä»¶æ ‘æ•°æ®æ¸²æŸ“ä¸ºå®é™…çš„UIï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">EditArea</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { components } = <span class="hljs-title function_">useComponentsStore</span>();
  <span class="hljs-keyword">const</span> { componentConfig } = <span class="hljs-title function_">useComponentConfigStore</span>();

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderComponents</span>(<span class="hljs-params">components: Component[]</span>): <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span> {
    <span class="hljs-keyword">return</span> components.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">component: Component</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> config = componentConfig?.[component.<span class="hljs-property">name</span>];
      <span class="hljs-keyword">if</span> (!config?.<span class="hljs-property">component</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      
      <span class="hljs-comment">// é€’å½’æ¸²æŸ“å­ç»„ä»¶</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(
        config.<span class="hljs-property">component</span>,
        {
          <span class="hljs-attr">key</span>: component.<span class="hljs-property">id</span>,
          <span class="hljs-attr">id</span>: component.<span class="hljs-property">id</span>,
          ...config.<span class="hljs-property">defaultProps</span>,
          ...component.<span class="hljs-property">props</span>,
        },
        <span class="hljs-title function_">renderComponents</span>(component.<span class="hljs-property">children</span> || [])
      );
    })
  }

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span>{renderComponents(components)}<span class="hljs-tag">&lt;/&gt;</span></span>;
}
</code></pre>
<h2 data-id="heading-12">å®é™…ç»„ä»¶ç¤ºä¾‹</h2>
<h3 data-id="heading-13">åŸºç¡€å®¹å™¨ç»„ä»¶</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> type { <span class="hljs-title class_">CommonComponentProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../interface"</span>;
<span class="hljs-keyword">import</span> { useMaterialDrop } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../hooks/useMaterialDrop'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Container</span> = (<span class="hljs-params">{ id, name, children }: CommonComponentProps</span>) =&gt; {
  <span class="hljs-comment">// å®¹å™¨å¯ä»¥æ¥å— Button å’Œ Container ç±»å‹çš„æ‹–æ‹½</span>
  <span class="hljs-keyword">const</span> { canDrop, drop } = <span class="hljs-title function_">useMaterialDrop</span>([<span class="hljs-string">'Button'</span>, <span class="hljs-string">'Container'</span>], id);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{drop}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"border-[1px] border-[#000] min-h-[100px] p-[20px]"</span>
    &gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Container</span>;
</code></pre>
<h3 data-id="heading-14">æŒ‰é’®ç»„ä»¶</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">AntdButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">ButtonType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/button"</span>;

<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">ButtonProps</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>;
  <span class="hljs-attr">text</span>: string;
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Button</span> = (<span class="hljs-params">{ type, text }: ButtonProps</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AntdButton</span> <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span>&gt;</span>{text}<span class="hljs-tag">&lt;/<span class="hljs-name">AntdButton</span>&gt;</span></span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Button</span>;
</code></pre>
<h2 data-id="heading-15">æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-16">é—®é¢˜ï¼šuseDrop é‡å¤è§¦å‘</h3>
<p>åœ¨å®ç°æ‹–æ‹½åŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªå¸¸è§é—®é¢˜ï¼šå½“åœ¨åµŒå¥—çš„å®¹å™¨ä¸­æ‹–æ‹½ç»„ä»¶æ—¶ï¼Œ<code>useDrop</code> ä¼šè¢«å¤šæ¬¡è§¦å‘ï¼Œå¯¼è‡´åŒä¸€ä¸ªç»„ä»¶è¢«é‡å¤æ·»åŠ ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šé€šè¿‡ <code>monitor.didDrop()</code> æ£€æŸ¥æ˜¯å¦å·²ç»åœ¨å­å…ƒç´ ä¸­å¤„ç†äº† drop äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-attr">drop</span>: <span class="hljs-function">(<span class="hljs-params">item: { <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span> }, monitor</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> didDrop = monitor.<span class="hljs-title function_">didDrop</span>();
  <span class="hljs-keyword">if</span> (didDrop) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å¦‚æœå·²ç»åœ¨å­å…ƒç´ å¤„ç†è¿‡ï¼Œåˆ™ä¸å†å¤„ç†</span>
  
  <span class="hljs-comment">// æ­£å¸¸çš„æ·»åŠ ç»„ä»¶é€»è¾‘...</span>
}
</code></pre>
<h3 data-id="heading-17">é—®é¢˜ï¼šç»„ä»¶æ ‘æ“ä½œå¤æ‚æ€§</h3>
<p>å¯¹ç»„ä»¶æ ‘è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œæ—¶ï¼Œéœ€è¦è€ƒè™‘åµŒå¥—ç»“æ„å¸¦æ¥çš„å¤æ‚æ€§ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå®ç°é€’å½’å·¥å…·å‡½æ•°æ¥å¤„ç†ç»„ä»¶æ ‘ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getComponentById</span>(<span class="hljs-params">
  id: <span class="hljs-built_in">number</span> | <span class="hljs-literal">null</span>,
  components: Component[]
</span>): <span class="hljs-title class_">Component</span> | <span class="hljs-literal">null</span> {
  <span class="hljs-keyword">if</span> (!id) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> component <span class="hljs-keyword">of</span> components) {
    <span class="hljs-keyword">if</span> (component.<span class="hljs-property">id</span> === id) <span class="hljs-keyword">return</span> component;
    
    <span class="hljs-keyword">if</span> (component.<span class="hljs-property">children</span> &amp;&amp; component.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> found = <span class="hljs-title function_">getComponentById</span>(id, component.<span class="hljs-property">children</span>);
      <span class="hljs-keyword">if</span> (found) <span class="hljs-keyword">return</span> found;
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>
<h2 data-id="heading-18">ä½ä»£ç ç¼–è¾‘å™¨çš„ä»·å€¼æ€è€ƒ</h2>
<h3 data-id="heading-19">å¯¹å¼€å‘è€…çš„ä»·å€¼</h3>
<ol>
<li><strong>æå‡å¼€å‘æ•ˆç‡</strong>ï¼šé‡å¤æ€§é¡µé¢å¯ä»¥å¿«é€Ÿæ­å»º</li>
<li><strong>é™ä½ç»´æŠ¤æˆæœ¬</strong>ï¼šå¯è§†åŒ–é…ç½®æ¯”ä»£ç æ›´ç›´è§‚æ˜“æ‡‚</li>
<li><strong>ä¿ƒè¿›å›¢é˜Ÿåä½œ</strong>ï¼šäº§å“ã€è®¾è®¡ä¹Ÿèƒ½å‚ä¸é¡µé¢æ­å»º</li>
</ol>
<h3 data-id="heading-20">å¯¹ä¼ä¸šçš„ä»·å€¼</h3>
<ol>
<li><strong>é™ä½æŠ€æœ¯é—¨æ§›</strong>ï¼šä¸šåŠ¡äººå‘˜ä¹Ÿèƒ½æ­å»ºç®€å•åº”ç”¨</li>
<li><strong>å¿«é€Ÿå“åº”éœ€æ±‚</strong>ï¼šä¸šåŠ¡å˜åŒ–æ—¶èƒ½å¿«é€Ÿè°ƒæ•´</li>
<li><strong>æˆæœ¬æ§åˆ¶</strong>ï¼šå‡å°‘å¯¹é«˜çº§å¼€å‘äººå‘˜çš„ä¾èµ–</li>
</ol>
<h2 data-id="heading-21">æ‰©å±•æ€è·¯ï¼šè®©ç¼–è¾‘å™¨æ›´å¼ºå¤§</h2>
<p>åŸºç¡€çš„ä½ä»£ç ç¼–è¾‘å™¨å®ç°åï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘æ·»åŠ æ›´å¤šé«˜çº§åŠŸèƒ½ï¼š</p>
<h3 data-id="heading-22">1. æ’¤é”€é‡åšåŠŸèƒ½</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">HistoryState</span> {
  <span class="hljs-attr">past</span>: <span class="hljs-title class_">Component</span>[][];
  <span class="hljs-attr">present</span>: <span class="hljs-title class_">Component</span>[];
  <span class="hljs-attr">future</span>: <span class="hljs-title class_">Component</span>[][];
}

<span class="hljs-comment">// åœ¨æ¯æ¬¡çŠ¶æ€å˜æ›´æ—¶è®°å½•å†å²</span>
</code></pre>
<h3 data-id="heading-23">2. ç»„ä»¶æ•°æ®ç»‘å®š</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ”¯æŒå°†ç»„ä»¶å±æ€§ç»‘å®šåˆ°æ•°æ®æº</span>
{
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"bind"</span>,
  <span class="hljs-string">"value"</span>: <span class="hljs-string">"{{user.name}}"</span>
}
</code></pre>
<h3 data-id="heading-24">3. æ¡ä»¶æ¸²æŸ“å’Œå¾ªç¯æ¸²æŸ“</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ”¯æŒæ ¹æ®æ¡ä»¶æ˜¾ç¤º/éšè—ç»„ä»¶</span>
{
  <span class="hljs-string">"condition"</span>: <span class="hljs-string">"{{user.isAdmin}}"</span>,
  <span class="hljs-string">"component"</span>: <span class="hljs-string">"AdminPanel"</span>
}

<span class="hljs-comment">// æ”¯æŒå¾ªç¯æ¸²æŸ“</span>
{
  <span class="hljs-string">"loop"</span>: <span class="hljs-string">"{{userList}}"</span>,
  <span class="hljs-string">"component"</span>: <span class="hljs-string">"UserItem"</span>
}
</code></pre>
<h3 data-id="heading-25">4. äº‹ä»¶å¤„ç†ç³»ç»Ÿ</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é…ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶</span>
{
  <span class="hljs-string">"onClick"</span>: {
    <span class="hljs-string">"action"</span>: <span class="hljs-string">"navigate"</span>,
    <span class="hljs-string">"params"</span>: {
      <span class="hljs-string">"url"</span>: <span class="hljs-string">"/detail"</span>
    }
  }
}
</code></pre>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>é€šè¿‡è¿™ä¸ªç®€å•çš„ä½ä»£ç ç¼–è¾‘å™¨å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p>
<ol>
<li><strong>ä½ä»£ç çš„æ ¸å¿ƒæ˜¯æ•°æ®ç»“æ„</strong>ï¼šä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„ç»„ä»¶æ ‘ç»“æ„æ˜¯åŸºç¡€</li>
<li><strong>æ‹–æ‹½äº¤äº’æ˜¯å…³é”®ä½“éªŒ</strong>ï¼šæµç•…çš„æ‹–æ‹½ä½“éªŒå†³å®šç¼–è¾‘å™¨çš„æ˜“ç”¨æ€§</li>
<li><strong>ç»„ä»¶åŒ–æ€ç»´æ˜¯æ¡¥æ¢</strong>ï¼šå°†UIæ‹†åˆ†ä¸ºå¯é…ç½®çš„ç»„ä»¶æ˜¯å®ç°å¯è§†åŒ–çš„å‰æ</li>
<li><strong>æ‰©å±•æ€§æ˜¯ç”Ÿå‘½åŠ›</strong>ï¼šè‰¯å¥½çš„æ¶æ„è®¾è®¡è®©åç»­åŠŸèƒ½æ‰©å±•æˆä¸ºå¯èƒ½</li>
</ol>
<p>ä½ä»£ç å¹¶ä¸æ˜¯è¦å–ä»£ä¼ ç»Ÿå¼€å‘ï¼Œè€Œæ˜¯ä¸ºç‰¹å®šåœºæ™¯æä¾›æ›´é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚ä½œä¸ºå¼€å‘è€…ï¼Œç†è§£ä½ä»£ç èƒŒåçš„åŸç†ï¼Œä¸ä»…èƒ½è®©æˆ‘ä»¬æ›´å¥½åœ°ä½¿ç”¨è¿™ç±»å¹³å°ï¼Œè¿˜èƒ½åœ¨é€‚å½“æ—¶æœºè‡ªå·±æ„å»ºé€‚åˆä¸šåŠ¡çš„å¯è§†åŒ–å·¥å…·ã€‚</p>
<p>æŠ€æœ¯çš„æœ¬è´¨ä¸æ˜¯å †ç Œå¤æ‚åº¦ï¼Œè€Œæ˜¯åœ¨ç†è§£åŸç†çš„åŸºç¡€ä¸Šåšå‡ºæ°å½“çš„ç®€åŒ–ã€‚å¸Œæœ›è¿™ç¯‡ç¬”è®°èƒ½å¸®åŠ©ä½ ç†è§£ä½ä»£ç ç¼–è¾‘å™¨çš„æ ¸å¿ƒåŸç†ï¼Œåœ¨å¯è§†åŒ–å¼€å‘çš„é“è·¯ä¸Šèµ°å¾—æ›´è¿œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue å…¨å®¶æ¡¶æ·±åº¦æ¢ç´¢ï¼šä»è¯­æ³•ç²¾è¦åˆ°é¡¹ç›®å®æˆ˜]]></title>    <link>https://juejin.cn/post/7571303808116801588</link>    <guid>https://juejin.cn/post/7571303808116801588</guid>    <pubDate>2025-11-12T00:24:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571303808116801588" data-draft-id="7568796644348280832" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue å…¨å®¶æ¡¶æ·±åº¦æ¢ç´¢ï¼šä»è¯­æ³•ç²¾è¦åˆ°é¡¹ç›®å®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-12T00:24:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FogLetter"/> <meta itemprop="url" content="https://juejin.cn/user/933907109778611"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue å…¨å®¶æ¡¶æ·±åº¦æ¢ç´¢ï¼šä»è¯­æ³•ç²¾è¦åˆ°é¡¹ç›®å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933907109778611/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FogLetter
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:24:54.000Z" title="Wed Nov 12 2025 00:24:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼ŒVue.js ä»¥å…¶æ¸è¿›å¼æ¡†æ¶çš„ç‰¹æ€§å’Œå‹å¥½çš„å­¦ä¹ æ›²çº¿ï¼Œèµ¢å¾—äº†å¤§é‡å¼€å‘è€…çš„é’çã€‚ä»Šå¤©ï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·æ¥æ·±å…¥æ¢ç´¢ Vue å…¨å®¶æ¡¶çš„é­…åŠ›æ‰€åœ¨ï¼</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€Vue ä¸ Reactï¼šç†å¿µçš„ç¢°æ’</h2>
<p>åœ¨å¼€å§‹ Vue å…¨å®¶æ¡¶çš„æ·±åº¦æ¢ç´¢ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ¥ç†è§£ Vue ä¸ React è¿™å¯¹"æ¬¢å–œå†¤å®¶"çš„æ ¸å¿ƒå·®å¼‚ã€‚</p>
<h3 data-id="heading-1">1.1 è®¾è®¡å“²å­¦å¯¹æ¯”</h3>
<p><strong>React</strong> æ¨å´‡å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œå¼ºè°ƒä¸å¯å˜æ€§å’Œå•å‘æ•°æ®æµã€‚å®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯ï¼š</p>
<ul>
<li>å•å‘æ•°æ®ç»‘å®šï¼š<code>æ•°æ® -&gt; è§†å›¾</code> + <code>äº‹ä»¶ -&gt; æ•°æ®æ›´æ–°</code></li>
<li>ä¸€åˆ‡éƒ½æ˜¯ JavaScriptï¼šJSX å°†æ ‡è®°ä¸é€»è¾‘è€¦åˆ</li>
<li>æ‰‹åŠ¨ä¼˜åŒ–ï¼šéœ€è¦å¼€å‘è€…å…³æ³¨æ€§èƒ½ä¼˜åŒ–ç‚¹</li>
</ul>
<p><strong>Vue</strong> åˆ™æ›´å€¾å‘äºæ¸è¿›å¼å’Œå“åº”å¼ï¼š</p>
<ul>
<li>åŒå‘æ•°æ®ç»‘å®šï¼š<code>v-model</code> æŒ‡ä»¤ç®€åŒ–è¡¨å•å¤„ç†</li>
<li>å…³æ³¨ç‚¹åˆ†ç¦»ï¼šæ¨¡æ¿ã€é€»è¾‘ã€æ ·å¼ç›¸å¯¹ç‹¬ç«‹</li>
<li>è‡ªåŠ¨ä¼˜åŒ–ï¼šå“åº”å¼ç³»ç»Ÿè‡ªåŠ¨å¤„ç†ä¾èµ–è¿½è¸ª</li>
</ul>
<h3 data-id="heading-2">1.2 ä»£ç é£æ ¼å¯¹æ¯”</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨ç»„ä»¶æ¥æ„Ÿå—ä¸¤è€…çš„å·®å¼‚ï¼š</p>
<p><strong>React å®ç°ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰è®¡æ•°: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;
        ç‚¹å‡»+1
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>Vue å®ç°ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;å½“å‰è®¡æ•°: {{ count }}&lt;/p&gt;
    &lt;button @click="count++"&gt;
      ç‚¹å‡»+1
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';

const count = ref(0);
&lt;/script&gt;
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒVue çš„ <code>ref</code> å’Œæ¨¡æ¿è¯­æ³•è®©ä»£ç æ›´åŠ ç®€æ´ç›´è§‚ã€‚ç‰¹åˆ«æ˜¯ <code>@click="count++"</code> è¿™ç§ç›´æ¥ä¿®æ”¹çš„æ–¹å¼ï¼Œä½“ç°äº† Vue å“åº”å¼ç³»ç»Ÿçš„ä¾¿åˆ©æ€§ã€‚</p>
<h2 data-id="heading-3">äºŒã€Vue 3 è¯­æ³•ç²¾è¦</h2>
<h3 data-id="heading-4">2.1 SFCï¼šå•æ–‡ä»¶ç»„ä»¶çš„è‰ºæœ¯</h3>
<p>Vue çš„å•æ–‡ä»¶ç»„ä»¶ï¼ˆSingle File Componentï¼‰æ˜¯æˆ‘æœ€å–œæ¬¢çš„è®¾è®¡ä¹‹ä¸€ã€‚å®ƒå°†ä¸€ä¸ªç»„ä»¶çš„æ¨¡æ¿ã€é€»è¾‘å’Œæ ·å¼å°è£…åœ¨å•ä¸ª <code>.vue</code> æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- è§†å›¾å±‚ --&gt;
  &lt;div class="greeting"&gt;{{ message }}&lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
// é€»è¾‘å±‚
import { ref } from 'vue';

const message = ref('Hello Vue!');
&lt;/script&gt;

&lt;style scoped&gt;
/* æ ·å¼å±‚ */
.greeting {
  color: #42b983;
  font-size: 1.5rem;
}
&lt;/style&gt;
</code></pre>
<p>è¿™ç§ç»„ç»‡æ–¹å¼è®©ç»„ä»¶å˜å¾—é«˜åº¦å¯ç»´æŠ¤ï¼Œç‰¹åˆ«æ˜¯ <code>&lt;style scoped&gt;</code> ä¸­çš„æ ·å¼ä½œç”¨åŸŸæœºåˆ¶ï¼Œå®Œç¾è§£å†³äº† CSS æ±¡æŸ“é—®é¢˜ã€‚</p>
<h3 data-id="heading-5">2.2 æ¨¡æ¿è¯­æ³•ï¼šå£°æ˜å¼æ¸²æŸ“çš„é­…åŠ›</h3>
<p>Vue çš„æ¨¡æ¿è¯­æ³•æ—¢å¼ºå¤§åˆç›´è§‚ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- æ–‡æœ¬æ’å€¼ --&gt;
    &lt;h1&gt;{{ title }}&lt;/h1&gt;
    
    &lt;!-- å±æ€§ç»‘å®š --&gt;
    &lt;img :src="avatarUrl" :alt="userName"&gt;
    
    &lt;!-- æ¡ä»¶æ¸²æŸ“ --&gt;
    &lt;div v-if="isVisible"&gt;ä½ çœ‹å¾—è§æˆ‘ï¼&lt;/div&gt;
    &lt;div v-else&gt;ç°åœ¨çœ‹ä¸è§äº†&lt;/div&gt;
    
    &lt;!-- åˆ—è¡¨æ¸²æŸ“ --&gt;
    &lt;ul&gt;
      &lt;li v-for="item in items" :key="item.id"&gt;
        {{ item.name }}
      &lt;/li&gt;
    &lt;/ul&gt;
    
    &lt;!-- åŒå‘ç»‘å®š --&gt;
    &lt;input v-model="searchText" placeholder="æœç´¢..."&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-6">2.3 å“åº”å¼ç³»ç»Ÿï¼šVue çš„çµé­‚</h3>
<p>Vue 3 çš„å“åº”å¼ç³»ç»ŸåŸºäº Proxyï¼Œæä¾›äº† <code>ref</code> å’Œ <code>reactive</code> ä¸¤ç§ APIï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, reactive, computed, watch } from 'vue';

// åŸºæœ¬ç±»å‹ä½¿ç”¨ ref
const count = ref(0);
const searchField = ref('');

// å¯¹è±¡ç±»å‹å¯ä»¥ä½¿ç”¨ reactive
const user = reactive({
  name: 'å¼ ä¸‰',
  age: 25,
  profile: {
    level: 'VIP'
  }
});

// è®¡ç®—å±æ€§
const userInfo = computed(() =&gt; {
  return `${user.name} - ${user.age}å²`;
});

// ä¾¦å¬å™¨
watch(count, (newValue, oldValue) =&gt; {
  console.log(`è®¡æ•°ä» ${oldValue} å˜ä¸º ${newValue}`);
});

// æ–¹æ³•
const increment = () =&gt; {
  count.value++;
};
&lt;/script&gt;
</code></pre>
<p><strong>å“åº”å¼çš„é‡è¦æç¤ºï¼š</strong></p>
<ul>
<li><code>ref</code> åˆ›å»ºçš„å€¼åœ¨ JS ä¸­è®¿é—®éœ€è¦ä½¿ç”¨ <code>.value</code></li>
<li><code>reactive</code> åˆ›å»ºçš„å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®å±æ€§</li>
<li>æ¨¡æ¿ä¸­éƒ½ä¸éœ€è¦ <code>.value</code>ï¼ŒVue ä¼šè‡ªåŠ¨è§£åŒ…</li>
</ul>
<h2 data-id="heading-7">ä¸‰ã€Piniaï¼šæ–°ä¸€ä»£çŠ¶æ€ç®¡ç†</h2>
<p>Pinia æ˜¯ Vue å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼Œç›¸æ¯” Vuexï¼Œå®ƒæ›´åŠ ç®€æ´å’Œç±»å‹å®‰å…¨ã€‚</p>
<h3 data-id="heading-8">3.1 Store çš„å®šä¹‰ä¸ä½¿ç”¨</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// store/homeStore.ts</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>;
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">HomeTopBarItem</span>, <span class="hljs-title class_">RecentlyViewedItem</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/types/home'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useHomeStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'home'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// çŠ¶æ€å®šä¹‰</span>
  <span class="hljs-keyword">const</span> topBarState = ref&lt;<span class="hljs-title class_">HomeTopBarItem</span>[]&gt;([
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">"æ¸¸è§ˆ&amp;ä½“éªŒ"</span>,
      <span class="hljs-attr">icon</span>: <span class="hljs-string">'photo-o'</span>
    },
    <span class="hljs-comment">// ... æ›´å¤šé¡¹</span>
  ]);
  
  <span class="hljs-keyword">const</span> recentlyViewedState = ref&lt;<span class="hljs-title class_">RecentlyViewedItem</span>[]&gt;([
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">"æ›¼è°· &amp; èŠ­è¾¾é›…æ™¯ç‚¹é€šç¥¨"</span>,
      <span class="hljs-attr">cover</span>: <span class="hljs-string">"https://example.com/image.jpg"</span>,
      <span class="hljs-attr">price</span>: <span class="hljs-number">173</span>,
    },
    <span class="hljs-comment">// ... æ›´å¤šé¡¹</span>
  ]);

  <span class="hljs-comment">// Getterï¼ˆè®¡ç®—å±æ€§ï¼‰</span>
  <span class="hljs-keyword">const</span> expensiveItems = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> recentlyViewedState.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">price</span> &gt; <span class="hljs-number">100</span>);
  });

  <span class="hljs-comment">// Actionï¼ˆæ–¹æ³•ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">addRecentlyViewed</span> = (<span class="hljs-params">item: RecentlyViewedItem</span>) =&gt; {
    recentlyViewedState.<span class="hljs-property">value</span>.<span class="hljs-title function_">unshift</span>(item);
    <span class="hljs-comment">// ä¿æŒæœ€è¿‘æµè§ˆä¸è¶…è¿‡10ä¸ª</span>
    <span class="hljs-keyword">if</span> (recentlyViewedState.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">10</span>) {
      recentlyViewedState.<span class="hljs-property">value</span>.<span class="hljs-title function_">pop</span>();
    }
  };

  <span class="hljs-keyword">return</span> {
    topBarState,
    recentlyViewedState,
    expensiveItems,
    addRecentlyViewed
  };
});
</code></pre>
<h3 data-id="heading-9">3.2 åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Store</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="home"&gt;
    &lt;van-search
      v-model="searchField"
      placeholder="è¯·è¾“å…¥æœç´¢å…³é”®è¯"
      show-action
      shape="round"
    &gt;
      &lt;template #action&gt;
        &lt;div class="text-white"&gt;
          &lt;van-icon name="shopping-cart-o" size="1.25rem" /&gt;
        &lt;/div&gt;
      &lt;/template&gt;
    &lt;/van-search&gt;
    
    &lt;section class="topbar flex justify-around mb-3"&gt;
      &lt;div 
        v-for="item in topBarState"
        :key="item.title"
        class="topbar-item"
      &gt;
        &lt;van-icon :name="item.icon" size="2rem" /&gt;
        &lt;span class="text-xs"&gt;{{ item.title }}&lt;/span&gt;
      &lt;/div&gt;
    &lt;/section&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { toRefs, ref, onMounted } from 'vue';
import { useHomeStore } from '@/store/homeStore';

const searchField = ref&lt;string&gt;('');
const homeStore = useHomeStore();

// ä½¿ç”¨ toRefs ä¿æŒå“åº”å¼
const { topBarState, recentlyViewedState } = toRefs(homeStore);

// ç›´æ¥ä½¿ç”¨ action
const handleAddItem = () =&gt; {
  homeStore.addRecentlyViewed({
    title: "æ–°æ™¯ç‚¹",
    cover: "https://example.com/new.jpg",
    price: 200,
  });
};

onMounted(() =&gt; {
  // ç»„ä»¶æŒ‚è½½åå¯ä»¥æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ
  console.log('Home ç»„ä»¶å·²æŒ‚è½½');
});
&lt;/script&gt;
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ <code>toRefs</code>ï¼Ÿ</strong></p>
<ul>
<li>å½“ä» store ä¸­è§£æ„çŠ¶æ€æ—¶ï¼Œä½¿ç”¨ <code>toRefs</code> å¯ä»¥ä¿æŒå“åº”å¼</li>
<li>å¦åˆ™ç›´æ¥è§£æ„ä¼šå¤±å»å“åº”å¼è¿æ¥</li>
</ul>
<h2 data-id="heading-10">å››ã€è·¯ç”±ç®¡ç†ï¼šVue Router æ·±åº¦åº”ç”¨</h2>
<h3 data-id="heading-11">4.1 è·¯ç”±é…ç½®ä¸ç±»å‹å®‰å…¨</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// router/index.ts</span>
<span class="hljs-keyword">import</span> {
  createRouter,
  createWebHistory,
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">RouteRecordRaw</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-comment">// ä½¿ç”¨ TypeScript ç¡®ä¿è·¯ç”±é…ç½®æ­£ç¡®</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">rootRoutes</span>: <span class="hljs-title class_">RouteRecordRaw</span>[] = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/home'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/HomePage/HomePage.vue'</span>),
    <span class="hljs-attr">name</span>: <span class="hljs-string">'home'</span>,
    <span class="hljs-attr">meta</span>: {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'é¦–é¡µ'</span>,
      <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">false</span>
    }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/account'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Account/Account.vue'</span>),
    <span class="hljs-attr">name</span>: <span class="hljs-string">'account'</span>,
    <span class="hljs-attr">meta</span>: {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'æˆ‘çš„è´¦æˆ·'</span>,
      <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>
    }
  },
  <span class="hljs-comment">// ... æ›´å¤šè·¯ç”±</span>
];

<span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title class_">RouteRecordRaw</span>[] = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'App'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/TheRoot.vue'</span>),
    <span class="hljs-attr">redirect</span>: <span class="hljs-string">'/home'</span>,
    <span class="hljs-attr">children</span>: rootRoutes
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/:pathMatch(.*)*'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'NotFound'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/NotFound.vue'</span>)
  }
];

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(),
  routes
});

<span class="hljs-comment">// è·¯ç”±å®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> {
  <span class="hljs-comment">// ä¿®æ”¹é¡µé¢æ ‡é¢˜</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span>) {
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;
  }
  
  <span class="hljs-comment">// èº«ä»½éªŒè¯æ£€æŸ¥</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span> &amp;&amp; !<span class="hljs-title function_">isLoggedIn</span>()) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">name</span>: <span class="hljs-string">'login'</span> };
  }
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;
</code></pre>
<h3 data-id="heading-12">4.2 å¸ƒå±€ç»„ä»¶ä¸è·¯ç”±è§†å›¾</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- App.vue --&gt;
&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;router-view /&gt;
    &lt;TabBar v-if="showTabBar" /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { computed } from 'vue';
import { useRoute } from 'vue-router';
import TabBar from '@/views/layout/TabBar.vue';

const route = useRoute();

// æ ¹æ®å½“å‰è·¯ç”±å†³å®šæ˜¯å¦æ˜¾ç¤ºåº•éƒ¨å¯¼èˆª
const showTabBar = computed(() =&gt; {
  const hiddenRoutes = ['/login', '/register'];
  return !hiddenRoutes.includes(route.path);
});
&lt;/script&gt;
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- TheRoot.vue --&gt;
&lt;template&gt;
  &lt;div class="root-layout"&gt;
    &lt;header v-if="showHeader" class="app-header"&gt;
      &lt;van-nav-bar
        :title="currentTitle"
        left-arrow
        @click-left="router.back()"
      /&gt;
    &lt;/header&gt;
    
    &lt;main class="app-main"&gt;
      &lt;router-view /&gt;
    &lt;/main&gt;
    
    &lt;footer class="app-footer"&gt;
      &lt;TabBar /&gt;
    &lt;/footer&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { computed } from 'vue';
import { useRoute, useRouter } from 'vue-router';

const route = useRoute();
const router = useRouter();

const currentTitle = computed(() =&gt; route.meta.title || 'é»˜è®¤æ ‡é¢˜');
const showHeader = computed(() =&gt; !route.meta.hideHeader);
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-13">äº”ã€æ’æ§½ç³»ç»Ÿï¼šç»„ä»¶çš„çµæ´»æ€§ä¹‹æº</h2>
<p>Vue çš„æ’æ§½ç³»ç»Ÿè®©ç»„ä»¶å…·å¤‡äº†æé«˜çš„å¯å®šåˆ¶æ€§ã€‚</p>
<h3 data-id="heading-14">5.1 åŸºç¡€æ’æ§½ä½¿ç”¨</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- BaseCard.vue --&gt;
&lt;template&gt;
  &lt;div class="card"&gt;
    &lt;div class="card-header"&gt;
      &lt;!-- å…·åæ’æ§½ --&gt;
      &lt;slot name="header"&gt;
        &lt;!-- é»˜è®¤å†…å®¹ --&gt;
        &lt;h3&gt;é»˜è®¤æ ‡é¢˜&lt;/h3&gt;
      &lt;/slot&gt;
    &lt;/div&gt;
    
    &lt;div class="card-body"&gt;
      &lt;!-- é»˜è®¤æ’æ§½ --&gt;
      &lt;slot&gt;
        &lt;p&gt;é»˜è®¤å†…å®¹&lt;/p&gt;
      &lt;/slot&gt;
    &lt;/div&gt;
    
    &lt;div class="card-actions"&gt;
      &lt;!-- ä½œç”¨åŸŸæ’æ§½ --&gt;
      &lt;slot name="actions" :item="itemData" :isFavorite="isFavorite"&gt;
        &lt;button @click="handleDefaultAction"&gt;é»˜è®¤æ“ä½œ&lt;/button&gt;
      &lt;/slot&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-15">5.2 æ’æ§½çš„ä½¿ç”¨</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;BaseCard&gt;
    &lt;!-- å…·åæ’æ§½ä½¿ç”¨ --&gt;
    &lt;template #header&gt;
      &lt;div class="custom-header"&gt;
        &lt;van-icon name="star" /&gt;
        &lt;h3&gt;è‡ªå®šä¹‰æ ‡é¢˜&lt;/h3&gt;
      &lt;/div&gt;
    &lt;/template&gt;
    
    &lt;!-- é»˜è®¤æ’æ§½å†…å®¹ --&gt;
    &lt;p&gt;è¿™æ˜¯å¡ç‰‡çš„ä¸»è¦å†…å®¹...&lt;/p&gt;
    
    &lt;!-- ä½œç”¨åŸŸæ’æ§½ä½¿ç”¨ --&gt;
    &lt;template #actions="{ item, isFavorite }"&gt;
      &lt;van-button 
        :type="isFavorite ? 'primary' : 'default'"
        @click="toggleFavorite(item)"
      &gt;
        {{ isFavorite ? 'å·²æ”¶è—' : 'æ”¶è—' }}
      &lt;/van-button&gt;
      &lt;van-button @click="viewDetail(item)"&gt;
        æŸ¥çœ‹è¯¦æƒ…
      &lt;/van-button&gt;
    &lt;/template&gt;
  &lt;/BaseCard&gt;
&lt;/template&gt;
</code></pre>
<h2 data-id="heading-16">å…­ã€TypeScriptï¼šVue çš„å®Œç¾æ­æ¡£</h2>
<p>TypeScript ä¸º Vue å¼€å‘å¸¦æ¥äº†ç±»å‹å®‰å…¨å’Œæ›´å¥½çš„å¼€å‘ä½“éªŒã€‚</p>
<h3 data-id="heading-17">6.1 ç±»å‹å®šä¹‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// types/home.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">HomeTopBarItem</span> {
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">icon</span>: <span class="hljs-built_in">string</span>;
  badge?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// å¯é€‰å±æ€§</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">RecentlyViewedItem</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">cover</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span>;
  originalPrice?: <span class="hljs-built_in">number</span>;
  rating?: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// æ³›å‹å“åº”ç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiResponse</span>&lt;T&gt; {
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">data</span>: T;
  <span class="hljs-attr">timestamp</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// ç»„ä»¶ Props ç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">RecentlyViewedProps</span> {
  <span class="hljs-attr">items</span>: <span class="hljs-title class_">RecentlyViewedItem</span>[];
  maxDisplay?: <span class="hljs-built_in">number</span>;
  showPrice?: <span class="hljs-built_in">boolean</span>;
}
</code></pre>
<h3 data-id="heading-18">6.2 ç»„åˆå¼å‡½æ•°ä¸ç±»å‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// composables/useApi.ts</span>
<span class="hljs-keyword">import</span> { ref, <span class="hljs-keyword">type</span> <span class="hljs-title class_">Ref</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { request } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useApi&lt;T&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">Ref</span>&lt;T | <span class="hljs-literal">null</span>&gt; = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> error = ref&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">params?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) =&gt; {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
    error.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> request&lt;T&gt;({
        url,
        <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
        params
      });
      data.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span>;
    } <span class="hljs-keyword">catch</span> (err) {
      error.<span class="hljs-property">value</span> = err <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span> ? err.<span class="hljs-property">message</span> : <span class="hljs-string">'æœªçŸ¥é”™è¯¯'</span>;
    } <span class="hljs-keyword">finally</span> {
      loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    }
  };
  
  <span class="hljs-keyword">return</span> {
    data,
    loading,
    error,
    fetchData
  };
}
</code></pre>
<h2 data-id="heading-19">ä¸ƒã€å·¥å…·é“¾ä¸å·¥ç¨‹åŒ–</h2>
<h3 data-id="heading-20">7.1 Vite é…ç½®ä¼˜åŒ–</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Components</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-vue-components/vite'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">VantResolver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vant/auto-import-resolver'</span>;
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">vue</span>(),
    <span class="hljs-title class_">Components</span>({
      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">VantResolver</span>()],
      <span class="hljs-attr">dts</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶</span>
    }),
  ],
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'@'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
    },
  },
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">proxy</span>: {
      <span class="hljs-string">'/api'</span>: {
        <span class="hljs-attr">target</span>: <span class="hljs-string">'http://localhost:3000'</span>,
        <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">rewrite</span>: <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> path.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\/api/</span>, <span class="hljs-string">''</span>),
      },
    },
  },
});
</code></pre>
<h3 data-id="heading-21">7.2 è¯·æ±‚å°è£…ä¸æ‹¦æˆªå™¨</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// utils/request.ts</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {
  <span class="hljs-title class_">AxiosRequestConfig</span>, 
  <span class="hljs-title class_">AxiosResponse</span>,
  <span class="hljs-title class_">AxiosError</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;
<span class="hljs-keyword">import</span> { showToast } <span class="hljs-keyword">from</span> <span class="hljs-string">'vant'</span>;

<span class="hljs-keyword">const</span> instance = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_API_BASE_URL</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">10</span> * <span class="hljs-number">1000</span>,
  <span class="hljs-attr">withCredentials</span>: <span class="hljs-literal">true</span>,
});

<span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨</span>
instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-comment">// æ·»åŠ è®¤è¯ token</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);
    <span class="hljs-keyword">if</span> (token) {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
    }
    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }
);

<span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨</span>
instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> response;
  },
  <span class="hljs-function">(<span class="hljs-params">error: AxiosError</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> status = error.<span class="hljs-property">response</span>?.<span class="hljs-property">status</span>;
    
    <span class="hljs-keyword">switch</span> (status) {
      <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
        <span class="hljs-title function_">showToast</span>(<span class="hljs-string">'è¯·å…ˆç™»å½•'</span>);
        <span class="hljs-comment">// è·³è½¬åˆ°ç™»å½•é¡µ</span>
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">403</span>:
        <span class="hljs-title function_">showToast</span>(<span class="hljs-string">'æ²¡æœ‰æƒé™'</span>);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">500</span>:
        <span class="hljs-title function_">showToast</span>(<span class="hljs-string">'æœåŠ¡å™¨é”™è¯¯'</span>);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-attr">default</span>:
        <span class="hljs-title function_">showToast</span>(<span class="hljs-string">'ç½‘ç»œé”™è¯¯'</span>);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }
);

<span class="hljs-comment">// æ³›å‹è¯·æ±‚å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> request = &lt;T = <span class="hljs-built_in">any</span>&gt;(
  <span class="hljs-attr">config</span>: <span class="hljs-title class_">AxiosRequestConfig</span>
): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">AxiosResponse</span>&lt;T&gt;&gt; =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">instance</span>(config);
};

<span class="hljs-comment">// å…·ä½“çš„ API è¯·æ±‚</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> api = {
  <span class="hljs-attr">get</span>: &lt;T = <span class="hljs-built_in">any</span>&gt;<span class="hljs-function">(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, params?: <span class="hljs-built_in">any</span></span>) =&gt;</span> 
    request&lt;T&gt;({ <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>, url, params }),
  
  <span class="hljs-attr">post</span>: &lt;T = <span class="hljs-built_in">any</span>&gt;<span class="hljs-function">(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">any</span></span>) =&gt;</span>
    request&lt;T&gt;({ <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, url, data }),
    
  <span class="hljs-attr">put</span>: &lt;T = <span class="hljs-built_in">any</span>&gt;<span class="hljs-function">(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">any</span></span>) =&gt;</span>
    request&lt;T&gt;({ <span class="hljs-attr">method</span>: <span class="hljs-string">'PUT'</span>, url, data }),
    
  <span class="hljs-attr">delete</span>: &lt;T = <span class="hljs-built_in">any</span>&gt;<span class="hljs-function">(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>) =&gt;</span>
    request&lt;T&gt;({ <span class="hljs-attr">method</span>: <span class="hljs-string">'DELETE'</span>, url }),
};
</code></pre>
<h2 data-id="heading-22">å…«ã€æ ·å¼ä¸ Tailwind CSS</h2>
<h3 data-id="heading-23">8.1 åŸå­åŒ– CSS çš„ä¼˜åŠ¿</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="home"&gt;
    &lt;!-- æ¸å˜èƒŒæ™¯ --&gt;
    &lt;div class="top-bg absolute h-36 -z-10 w-screen 
                bg-gradient-to-b from-orange-500 to-white"&gt;
    &lt;/div&gt;
    
    &lt;!-- æœç´¢æ¡† --&gt;
    &lt;van-search
      class="mb-2 mx-4 rounded-lg shadow-sm"
      background="transparent"
    /&gt;
    
    &lt;!-- å†…å®¹åŒºåŸŸ --&gt;
    &lt;main class="flex flex-col space-y-4 px-4"&gt;
      &lt;header class="w-[calc(100vw-2rem)] min-h-24 
                     bg-white rounded-2xl p-4 shadow-md 
                     self-center transition-all 
                     hover:shadow-lg"&gt;
        &lt;!-- å“åº”å¼è®¾è®¡ --&gt;
        &lt;section class="topbar flex justify-around 
                        flex-wrap gap-4 mb-4 
                        md:flex-nowrap md:gap-0"&gt;
          &lt;div 
            v-for="item in topBarState"
            :key="item.title"
            class="topbar-item flex flex-col items-center 
                   cursor-pointer transition-transform 
                   hover:scale-105 min-w-[60px]"
          &gt;
            &lt;div class="topbar-item__icon mb-1"&gt;
              &lt;van-icon :name="item.icon" 
                        class="text-2xl text-orange-500" /&gt;
            &lt;/div&gt;
            &lt;div class="topbar-item__text text-xs 
                        text-gray-600 font-medium"&gt;
              {{ item.title }}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      &lt;/header&gt;
    &lt;/main&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-24">8.2 è‡ªå®šä¹‰æ ·å¼ä¸ Tailwind ç»“åˆ</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* style.css */</span>
<span class="hljs-keyword">@tailwind</span> base;
<span class="hljs-keyword">@tailwind</span> components;
<span class="hljs-keyword">@tailwind</span> utilities;

<span class="hljs-comment">/* è‡ªå®šä¹‰ç»„ä»¶æ ·å¼ */</span>
<span class="hljs-keyword">@layer</span> components {
  <span class="hljs-selector-class">.btn-primary</span> {
    <span class="hljs-keyword">@apply</span> bg-orange-<span class="hljs-number">500</span> text-white px-<span class="hljs-number">4</span> py-<span class="hljs-number">2</span> 
           rounded-lg <span class="hljs-attribute">hover</span>:bg-orange-<span class="hljs-number">600</span> 
           transition-colors <span class="hljs-attribute">focus</span>:outline-none 
           <span class="hljs-attribute">focus</span>:ring-<span class="hljs-number">2</span> <span class="hljs-attribute">focus</span>:ring-orange-<span class="hljs-number">300</span> 
           <span class="hljs-attribute">disabled</span>:opacity-<span class="hljs-number">50</span> <span class="hljs-attribute">disabled</span>:cursor-not-allowed;
  }
  
  <span class="hljs-selector-class">.card</span> {
    <span class="hljs-keyword">@apply</span> bg-white rounded-xl shadow-sm 
           border border-gray-<span class="hljs-number">100</span> 
           <span class="hljs-attribute">hover</span>:shadow-md transition-shadow;
  }
}

<span class="hljs-comment">/* è‡ªå®šä¹‰å·¥å…·ç±» */</span>
<span class="hljs-keyword">@layer</span> utilities {
  <span class="hljs-selector-class">.text-shadow</span> {
    <span class="hljs-attribute">text-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
  }
  
  <span class="hljs-selector-class">.scrollbar-hide</span> {
    -ms-<span class="hljs-attribute">overflow</span>-style: none;
    <span class="hljs-attribute">scrollbar-width</span>: none;
  }
  
  <span class="hljs-selector-class">.scrollbar-hide</span>::-webkit-scrollbar {
    <span class="hljs-attribute">display</span>: none;
  }
}
</code></pre>
<h2 data-id="heading-25">ä¹ã€é¡¹ç›®æ¶æ„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-26">9.1 ç›®å½•ç»“æ„è®¾è®¡</h3>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ assets/          <span class="hljs-comment"># é™æ€èµ„æº</span>
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ styles/
â”œâ”€â”€ components/      <span class="hljs-comment"># é€šç”¨ç»„ä»¶</span>
â”‚   â”œâ”€â”€ ui/         <span class="hljs-comment"># åŸºç¡€UIç»„ä»¶</span>
â”‚   â””â”€â”€ business/   <span class="hljs-comment"># ä¸šåŠ¡ç»„ä»¶</span>
â”œâ”€â”€ views/          <span class="hljs-comment"># é¡µé¢ç»„ä»¶</span>
â”œâ”€â”€ store/          <span class="hljs-comment"># çŠ¶æ€ç®¡ç†</span>
â”‚   â”œâ”€â”€ modules/    <span class="hljs-comment"># æ¨¡å—åŒ–store</span>
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ router/         <span class="hljs-comment"># è·¯ç”±é…ç½®</span>
â”œâ”€â”€ utils/          <span class="hljs-comment"># å·¥å…·å‡½æ•°</span>
â”‚   â”œâ”€â”€ request.ts
â”‚   â””â”€â”€ helpers.ts
â”œâ”€â”€ types/          <span class="hljs-comment"># ç±»å‹å®šä¹‰</span>
â”œâ”€â”€ composables/    <span class="hljs-comment"># ç»„åˆå¼å‡½æ•°</span>
â”œâ”€â”€ api/            <span class="hljs-comment"># APIæ¥å£</span>
â””â”€â”€ main.ts
</code></pre>
<h3 data-id="heading-27">9.2 ç»„ä»¶è®¾è®¡åŸåˆ™</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å¥½çš„ç»„ä»¶è®¾è®¡ç¤ºä¾‹ --&gt;
&lt;template&gt;
  &lt;ProductCard
    :product="product"
    :show-price="true"
    :favorite="isFavorite"
    @favorite-toggle="handleFavoriteToggle"
    @click="handleCardClick"
  &gt;
    &lt;template #badge&gt;
      &lt;van-tag v-if="product.isNew" type="primary"&gt;
        æ–°å“
      &lt;/van-tag&gt;
    &lt;/template&gt;
    
    &lt;template #actions&gt;
      &lt;van-button 
        size="small" 
        type="primary"
        @click.stop="handleBuy"
      &gt;
        ç«‹å³è´­ä¹°
      &lt;/van-button&gt;
    &lt;/template&gt;
  &lt;/ProductCard&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
// æ˜ç¡®çš„ Props å®šä¹‰
interface Props {
  product: Product;
  showPrice?: boolean;
  favorite?: boolean;
}

const props = withDefaults(defineProps&lt;Props&gt;(), {
  showPrice: true,
  favorite: false
});

// æ˜ç¡®çš„äº‹ä»¶å®šä¹‰
const emit = defineEmits&lt;{
  'favorite-toggle': [id: string, value: boolean];
  click: [product: Product];
}&gt;();

// ç»„åˆå¼å‡½æ•°å¤ç”¨
const { toggleFavorite } = useFavorite();
const { addToCart } = useCart();

const handleFavoriteToggle = async () =&gt; {
  const newValue = !props.favorite;
  await toggleFavorite(props.product.id, newValue);
  emit('favorite-toggle', props.product.id, newValue);
};

const handleCardClick = () =&gt; {
  emit('click', props.product);
};
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-28">åã€æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-29">10.1 ç»„ä»¶æ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–é•¿åˆ—è¡¨ --&gt;
  &lt;RecycleScroller
    :items="largeList"
    :item-size="80"
    key-field="id"
    v-slot="{ item }"
    class="h-96"
  &gt;
    &lt;ProductItem :item="item" /&gt;
  &lt;/RecycleScroller&gt;
  
  &lt;!-- å›¾ç‰‡æ‡’åŠ è½½ --&gt;
  &lt;img
    v-for="image in images"
    :key="image.id"
    v-lazy="image.url"
    class="product-image"
    alt="äº§å“å›¾ç‰‡"
  /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { computed, watchEffect, shallowRef } from 'vue';

// ä½¿ç”¨ shallowRef é¿å…æ·±åº¦å“åº”å¼
const largeList = shallowRef([]);

// è®¡ç®—å±æ€§ç¼“å­˜
const filteredList = computed(() =&gt; {
  return largeList.value.filter(item =&gt; 
    item.price &gt; 0 &amp;&amp; item.stock &gt; 0
  );
});

// ç›‘å¬ä¼˜åŒ–
watchEffect(() =&gt; {
  // åªæœ‰å½“ä¾èµ–å˜åŒ–æ—¶æ‰æ‰§è¡Œ
  if (filteredList.value.length &gt; 0) {
    updateStatistics(filteredList.value);
  }
});

// å‡½æ•°è®°å¿†åŒ–
const expensiveCalculation = computed(() =&gt; {
  return heavyCalculation(filteredList.value);
});
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-30">10.2 æ‰“åŒ…ä¼˜åŒ–</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">rollupOptions</span>: {
      <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">manualChunks</span>: {
          <span class="hljs-string">'vue-vendor'</span>: [<span class="hljs-string">'vue'</span>, <span class="hljs-string">'vue-router'</span>, <span class="hljs-string">'pinia'</span>],
          <span class="hljs-string">'ui-library'</span>: [<span class="hljs-string">'vant'</span>],
          <span class="hljs-string">'utils'</span>: [<span class="hljs-string">'axios'</span>, <span class="hljs-string">'dayjs'</span>, <span class="hljs-string">'lodash-es'</span>]
        }
      }
    },
    <span class="hljs-attr">chunkSizeWarningLimit</span>: <span class="hljs-number">1000</span>
  }
});
</code></pre>
<h2 data-id="heading-31">æ€»ç»“</h2>
<p>Vue å…¨å®¶æ¡¶æä¾›äº†ä¸€ä¸ªå®Œæ•´ã€ä¼˜é›…çš„å‰ç«¯è§£å†³æ–¹æ¡ˆã€‚ä»å“åº”å¼ç³»ç»Ÿåˆ°çŠ¶æ€ç®¡ç†ï¼Œä»è·¯ç”±æ§åˆ¶åˆ°æ„å»ºå·¥å…·ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½ä½“ç°äº† Vue å›¢é˜Ÿå¯¹å¼€å‘è€…ä½“éªŒçš„æ·±åº¦æ€è€ƒã€‚</p>
<p><strong>Vue çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ol>
<li><strong>æ¸è¿›å¼</strong>ï¼šå¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚é€æ­¥é‡‡ç”¨</li>
<li><strong>å“åº”å¼</strong>ï¼šè‡ªåŠ¨çš„ä¾èµ–è¿½è¸ªå’Œæ›´æ–°</li>
<li><strong>ç»„åˆå¼</strong>ï¼šä¼˜ç§€çš„é€»è¾‘å¤ç”¨èƒ½åŠ›</li>
<li><strong>ç±»å‹å‹å¥½</strong>ï¼šä¸ TypeScript å®Œç¾ç»“åˆ</li>
<li><strong>ç”Ÿæ€ä¸°å¯Œ</strong>ï¼šå®Œæ•´çš„å·¥å…·é“¾å’Œç»„ä»¶åº“</li>
</ol>
<p>æ— è®ºæ˜¯åˆåˆ›é¡¹ç›®è¿˜æ˜¯å¤§å‹ä¼ä¸šåº”ç”¨ï¼ŒVue å…¨å®¶æ¡¶éƒ½èƒ½æä¾›å‡ºè‰²çš„å¼€å‘ä½“éªŒå’Œè¿è¡Œæ€§èƒ½ã€‚å¸Œæœ›è¿™ç¯‡ç¬”è®°èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œè¿ç”¨ Vue å…¨å®¶æ¡¶ï¼Œåœ¨å¼€å‘è·¯ä¸Šè¶Šèµ°è¶Šè¿œï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter ä»å…¥é—¨åˆ°ç²¾é€šï¼šæ·±å…¥ Navigator 2.0 - GoRouter è·¯ç”±å®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571316028321595427</link>    <guid>https://juejin.cn/post/7571316028321595427</guid>    <pubDate>2025-11-12T00:31:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571316028321595427" data-draft-id="7571342319893037091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter ä»å…¥é—¨åˆ°ç²¾é€šï¼šæ·±å…¥ Navigator 2.0 - GoRouter è·¯ç”±å®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="Flutter,iOS,Android"/> <meta itemprop="datePublished" content="2025-11-12T00:31:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Zuckjet_"/> <meta itemprop="url" content="https://juejin.cn/user/3200023607119418"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter ä»å…¥é—¨åˆ°ç²¾é€šï¼šæ·±å…¥ Navigator 2.0 - GoRouter è·¯ç”±å®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3200023607119418/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Zuckjet_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:31:09.000Z" title="Wed Nov 12 2025 00:31:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€ç¯‡å…³äºå¯¼èˆªçš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº† <code>Navigator 1.0</code>ï¼Œä¹Ÿå°±æ˜¯å¤§å®¶æ‰€ç†ŸçŸ¥çš„ <code>push</code> å’Œ <code>pop</code> æ–¹æ³•ã€‚å¯¹äºç®€å•çš„çº¿æ€§é¡µé¢æµï¼Œå®ƒå·¥ä½œå¾—éå¸¸å¥½ã€‚ä½†éšç€åº”ç”¨å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œ<code>Navigator 1.0</code> çš„å±€é™æ€§ä¹Ÿé€æ¸æ˜¾ç°ã€‚</p>
<p>æƒ³è±¡ä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li><strong>æ·±åº¦é“¾æ¥ (Deep Linking)</strong>ï¼šç”¨æˆ·ç‚¹å‡»ä¸€ä¸ª <code>URL</code> (<code>myapp://details/123</code>)ï¼Œéœ€è¦ç›´æ¥æ‰“å¼€åº”ç”¨çš„ç‰¹å®šé¡µé¢ã€‚</li>
<li><strong>Web åº”ç”¨æ”¯æŒ</strong>ï¼šåœ¨ <code>Flutter Web</code> ä¸­ï¼Œä½ éœ€è¦åŒæ­¥æµè§ˆå™¨çš„åœ°å€æ å’Œå†å²è®°å½•ï¼ˆå‰è¿›/åé€€æŒ‰é’®ï¼‰ã€‚</li>
<li><strong>å¤æ‚åµŒå¥—å¯¼èˆª</strong>ï¼šåº”ç”¨æ‹¥æœ‰åº•éƒ¨å¯¼èˆªæ ï¼Œæ¯ä¸ªæ ‡ç­¾é¡µéƒ½ç»´æŠ¤ç€è‡ªå·±çš„å¯¼èˆªå †æ ˆã€‚</li>
</ul>
<p>ç”¨ <code>Navigator 1.0</code> (å‘½ä»¤å¼è·¯ç”±) æ¥å¤„ç†è¿™äº›éœ€æ±‚ï¼Œä¼šå˜å¾—å¼‚å¸¸æ£˜æ‰‹å’Œæ··ä¹±ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œ<code>Flutter</code> å›¢é˜Ÿå¼•å…¥äº† <code>Navigator 2.0</code> (å£°æ˜å¼è·¯ç”±)ã€‚ä½†ä¸å¾—ä¸æ‰¿è®¤ï¼Œ<code>Navigator 2.0</code> çš„åŸç”Ÿ <code>API</code>ï¼ˆå¦‚ <code>Router</code>, <code>RouterDelegate</code>, <code>RouteInformationParser</code>ï¼‰éå¸¸å¤æ‚ï¼Œå­¦ä¹ æ›²çº¿é™¡å³­ï¼ŒåŠé€€äº†å¤§é‡å¼€å‘è€…ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸å¿…ç›´æ¥å’Œè¿™äº›å¤æ‚çš„ <code>API</code> æ‰“äº¤é“ã€‚<code>Flutter</code> å®˜æ–¹å›¢é˜Ÿæ¨å‡ºäº† <code>GoRouter</code>ï¼Œä¸€ä¸ªæ„å»ºåœ¨ <code>Navigator 2.0</code> ä¹‹ä¸Šçš„ã€å¼ºå¤§ä¸”ç®€å•æ˜“ç”¨çš„è·¯ç”±åº“ã€‚å®ƒå®Œç¾åœ°ç®€åŒ–äº†å£°æ˜å¼è·¯ç”±ï¼Œå¹¶æˆä¸ºå½“å‰ <code>Flutter</code> è·¯ç”±ç®¡ç†çš„é¦–é€‰æ–¹æ¡ˆã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ï¼Œå°±æ˜¯ä½ æŒæ¡ <code>GoRouter</code> çš„å®Œå…¨æŒ‡å—ã€‚</p>
<h4 data-id="heading-0">1. ä¸ºä»€ä¹ˆé€‰æ‹© GoRouterï¼Ÿ</h4>
<ul>
<li><strong>åŸºäº URL</strong>ï¼šä»¥æˆ‘ä»¬ç†Ÿæ‚‰çš„ <code>URL</code> å­—ç¬¦ä¸²æ¥å®šä¹‰å’Œå¯¼èˆªé¡µé¢ï¼Œç›´è§‚ä¸”æ˜“äºç®¡ç†ã€‚</li>
<li><strong>å£°æ˜å¼</strong>ï¼šä½ åªéœ€è¦å®šä¹‰å¥½è·¯ç”±è¡¨ï¼Œ<code>GoRouter</code> ä¼šè‡ªåŠ¨å¤„ç†åº•å±‚çš„ <code>Navigator 2.0</code> é€»è¾‘ã€‚</li>
<li><strong>å®Œç¾æ”¯æŒ Web</strong>ï¼šè‡ªåŠ¨å¤„ç†æµè§ˆå™¨åœ°å€æ åŒæ­¥å’Œå†å²è®°å½•ã€‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šæ–°ç‰ˆæœ¬æ”¯æŒç±»å‹å®‰å…¨åœ°ä¼ é€’å‚æ•°ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯ã€‚</li>
<li><strong>è½»æ¾å¤„ç†å¤æ‚åœºæ™¯</strong>ï¼šæ— è®ºæ˜¯å‚æ•°ä¼ é€’ã€åµŒå¥—è·¯ç”±ã€è¿˜æ˜¯è·¯ç”±é‡å®šå‘ï¼ˆå¦‚ç™»å½•æ‹¦æˆªï¼‰ï¼Œéƒ½æä¾›äº†ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</li>
</ul>
<h4 data-id="heading-1">2. GoRouter å®æˆ˜æ¼”ç»ƒ</h4>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„é¡¹ç›®å¼€å§‹ï¼Œä¸€æ­¥æ­¥æ¢ç´¢ <code>GoRouter</code> çš„æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<h5 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–</h5>
<p>é¦–å…ˆï¼Œåœ¨ä½ çš„ <code>pubspec.yaml</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>go_router</code> ä¾èµ–ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">flutter:</span>
    <span class="hljs-attr">sdk:</span> <span class="hljs-string">flutter</span>
  <span class="hljs-attr">go_router:</span> <span class="hljs-string">^14.1.0</span> <span class="hljs-comment"># å»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬</span>
</code></pre>
<p>ç„¶åè¿è¡Œ <code>flutter pub get</code> å®‰è£…ã€‚</p>
<h5 data-id="heading-3">ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸºç¡€è·¯ç”±é…ç½®</h5>
<p>åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶æ¥ç®¡ç†è·¯ç”±ï¼Œä¾‹å¦‚ <code>lib/router/app_router.dart</code>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:go_router/go_router.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-comment">// å¯¼å…¥ä½ çš„é¡µé¢ Widget</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'../screens/home_screen.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'../screens/details_screen.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'../screens/not_found_screen.dart'</span>;

<span class="hljs-keyword">final</span> GoRouter router = GoRouter(
  <span class="hljs-comment">// 404 é¡µé¢</span>
  errorBuilder: (context, state) =&gt; <span class="hljs-keyword">const</span> NotFoundScreen(),

  <span class="hljs-comment">// è·¯ç”±é…ç½®</span>
  routes: [
    GoRoute(
      path: <span class="hljs-string">'/'</span>,
      builder: (context, state) =&gt; <span class="hljs-keyword">const</span> HomeScreen(),
    ),
    GoRoute(
      path: <span class="hljs-string">'/details'</span>,
      builder: (context, state) =&gt; <span class="hljs-keyword">const</span> DetailsScreen(),
    ),
  ],
);
</code></pre>
<ul>
<li><code>GoRouter(...)</code>ï¼šè¿™æ˜¯è·¯ç”±é…ç½®çš„å…¥å£ã€‚</li>
<li><code>errorBuilder</code>ï¼šå½“ç”¨æˆ·è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„è·¯å¾„æ—¶ï¼Œä¼šæ˜¾ç¤ºè¿™ä¸ªé¡µé¢ã€‚</li>
<li><code>routes</code>: ä¸€ä¸ª <code>GoRoute</code> åˆ—è¡¨ï¼Œå®šä¹‰äº†åº”ç”¨çš„æ¯ä¸ªé¡µé¢ã€‚
<ul>
<li><code>path</code>: é¡µé¢çš„è®¿é—®è·¯å¾„ (URL)ã€‚</li>
<li><code>builder</code>: ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å¯¹åº”è·¯å¾„çš„ <code>Widget</code>ã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-4">ç¬¬ä¸‰æ­¥ï¼šé›†æˆåˆ° MaterialApp</h5>
<p>ç°åœ¨ï¼Œå›åˆ°ä½ çš„ <code>main.dart</code>ï¼Œä½¿ç”¨ <code>MaterialApp.router</code> æ¥é›†æˆ <code>GoRouter</code>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'router/app_router.dart'</span>; <span class="hljs-comment">// å¯¼å…¥ä½ çš„è·¯ç”±é…ç½®</span>

<span class="hljs-keyword">void</span> main() {
  runApp(<span class="hljs-keyword">const</span> MyApp());
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> MyApp({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-comment">// ä½¿ç”¨ MaterialApp.router æ„é€ å‡½æ•°</span>
    <span class="hljs-keyword">return</span> MaterialApp.router(
      title: <span class="hljs-string">'GoRouter Demo'</span>,
      <span class="hljs-comment">// å°†æˆ‘ä»¬åˆ›å»ºçš„ router å¯¹è±¡é…ç½®ç»™ routerConfig</span>
      routerConfig: router,
    );
  }
}
</code></pre>
<p>è‡³æ­¤ï¼Œä½ çš„åº”ç”¨å·²ç»ç”± <code>GoRouter</code> å…¨æƒæ¥ç®¡è·¯ç”±äº†ï¼</p>
<h5 data-id="heading-5">ç¬¬å››æ­¥ï¼šé¡µé¢è·³è½¬ (Navigation)</h5>
<p><code>GoRouter</code> æä¾›äº†ä¸€ç»„ <code>BuildContext</code> çš„æ‰©å±•æ–¹æ³•æ¥è¿›è¡Œå¯¼èˆªï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<p>åœ¨ä½ çš„ <code>HomeScreen</code> ä¸­ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// home_screen.dart</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:go_router/go_router.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomeScreen</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> HomeScreen({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Home Screen'</span>)),
      body: Center(
        child: ElevatedButton(
          onPressed: () {
            <span class="hljs-comment">// è·³è½¬åˆ° /details é¡µé¢</span>
            context.go(<span class="hljs-string">'/details'</span>);
          },
          child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Go to Details'</span>),
        ),
      ),
    );
  }
}
</code></pre>
<ul>
<li><code>context.go(path)</code>ï¼šè·³è½¬åˆ°æ–°é¡µé¢ï¼Œå®ƒä¼š<strong>æ›¿æ¢</strong>å½“å‰çš„è·¯ç”±å †æ ˆã€‚è¿™æ›´é€‚ç”¨äº <code>Web</code> è¡Œä¸ºæˆ–ä¸»æ ‡ç­¾é¡µåˆ‡æ¢ã€‚</li>
<li><code>context.push(path)</code>ï¼šå°†æ–°é¡µé¢<strong>æ¨å…¥</strong>åˆ°å½“å‰çš„è·¯ç”±å †æ ˆä¹‹ä¸Šï¼Œè¿™å’Œ <code>Navigator.push</code> è¡Œä¸ºä¸€è‡´ï¼Œé€šå¸¸ç”¨äºä»åˆ—è¡¨é¡µè¿›å…¥è¯¦æƒ…é¡µã€‚</li>
</ul>
<p>åœ¨è¯¦æƒ…é¡µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>context.pop()</code> è¿”å›ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// details_screen.dart</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:go_router/go_router.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DetailsScreen</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> DetailsScreen({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Details Screen'</span>)),
      body: Center(
        child: ElevatedButton(
          onPressed: () {
            <span class="hljs-comment">// è¿”å›ä¸Šä¸€é¡µ</span>
            context.pop();
          },
          child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Go Back'</span>),
        ),
      ),
    );
  }
}
</code></pre>
<h5 data-id="heading-6">ç¬¬äº”æ­¥ï¼šä¼ é€’å‚æ•°</h5>
<p>è¿™æ˜¯ <code>GoRouter</code> çš„å¼ºé¡¹ã€‚æˆ‘ä»¬æœ‰ä¸‰ç§å¸¸è§çš„ä¼ å‚æ–¹å¼ï¼š</p>
<p><strong>1. è·¯å¾„å‚æ•° (Path Parameters)</strong></p>
<p>è¿™é€‚ç”¨äºä¼ é€’ç®€å•çš„ <code>ID</code> æˆ–æ ‡è¯†ç¬¦ã€‚</p>
<p>ä¿®æ”¹è·¯ç”±é…ç½®ï¼Œåœ¨ <code>path</code> ä¸­ä½¿ç”¨å†’å· (<code>:</code>) å®šä¹‰å‚æ•°ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// app_router.dart</span>
GoRoute(
  <span class="hljs-comment">// :id æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼ŒåŒ¹é… /details/ä»»æ„å­—ç¬¦ä¸²</span>
  path: <span class="hljs-string">'/details/:id'</span>, 
  builder: (context, state) {
    <span class="hljs-comment">// é€šè¿‡ state.pathParameters è·å–è·¯å¾„å‚æ•°</span>
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> id = state.pathParameters[<span class="hljs-string">'id'</span>] ?? <span class="hljs-string">'0'</span>;
    <span class="hljs-keyword">return</span> DetailsScreen(id: id);
  },
),
</code></pre>
<p>ä¿®æ”¹ <code>DetailsScreen</code> ä»¥æ¥æ”¶å‚æ•°ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// details_screen.dart</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DetailsScreen</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> id;
  <span class="hljs-keyword">const</span> DetailsScreen({<span class="hljs-keyword">super</span>.key, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.id});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Details Screen'</span>)),
      body: Center(
        child: Text(<span class="hljs-string">'You are viewing details for item: <span class="hljs-subst">$id</span>'</span>),
      ),
      <span class="hljs-comment">// ...</span>
    );
  }
}
</code></pre>
<p>è·³è½¬æ—¶ï¼Œç›´æ¥åœ¨è·¯å¾„ä¸­æä¾›å‚æ•°å€¼ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// home_screen.dart</span>
context.push(<span class="hljs-string">'/details/123'</span>); <span class="hljs-comment">// è·³è½¬åˆ°è¯¦æƒ…é¡µï¼Œå¹¶ä¼ é€’ id '123'</span>
</code></pre>
<p><strong>2. æŸ¥è¯¢å‚æ•° (Query Parameters)</strong></p>
<p>é€‚ç”¨äºä¼ é€’è¿‡æ»¤ã€æœç´¢ç­‰éå¿…éœ€å‚æ•°ã€‚</p>
<p>è·¯ç”±é…ç½®ä¸éœ€è¦æ”¹å˜ã€‚è·³è½¬æ—¶ï¼Œåƒå†™ <code>URL</code> ä¸€æ ·é™„åŠ å‚æ•°ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">context.push(<span class="hljs-string">'/details/123?source=homepage&amp;sort=asc'</span>);
</code></pre>
<p>åœ¨ <code>DetailsScreen</code> ä¸­ï¼Œé€šè¿‡ <code>state.uri.queryParameters</code> è·å–ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// details_screen.dart builder function</span>
builder: (context, state) {
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> id = state.pathParameters[<span class="hljs-string">'id'</span>] ?? <span class="hljs-string">'0'</span>;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String?</span> source = state.uri.queryParameters[<span class="hljs-string">'source'</span>]; <span class="hljs-comment">// "homepage"</span>
  <span class="hljs-keyword">return</span> DetailsScreen(id: id, source: source);
}
</code></pre>
<p><strong>3. extra å‚æ•°</strong></p>
<p>å½“ä½ æƒ³ä¼ é€’ä¸€ä¸ªå¤æ‚çš„è‡ªå®šä¹‰å¯¹è±¡ï¼ˆå¦‚ <code>Model</code> å®ä¾‹ï¼‰æ—¶ï¼Œ<code>extra</code> å‚æ•°æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p>
<p>è·³è½¬æ—¶ï¼Œåœ¨ <code>push</code> æˆ– <code>go</code> æ–¹æ³•ä¸­ä¼ å…¥ <code>extra</code>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å‡è®¾ä½ æœ‰ä¸€ä¸ª Product ç±»</span>
<span class="hljs-keyword">final</span> product = Product(id: <span class="hljs-string">'123'</span>, name: <span class="hljs-string">'Flutter Book'</span>);
context.push(<span class="hljs-string">'/details/123'</span>, extra: product);
</code></pre>
<p>åœ¨ <code>DetailsScreen</code> çš„ <code>builder</code> ä¸­æ¥æ”¶å®ƒï¼š</p>
<pre><code class="hljs language-dart" lang="dart">builder: (context, state) {
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> id = state.pathParameters[<span class="hljs-string">'id'</span>]!;
  <span class="hljs-comment">// state.extra æ˜¯ Object? ç±»å‹ï¼Œéœ€è¦è¿›è¡Œç±»å‹è½¬æ¢</span>
  <span class="hljs-keyword">final</span> Product? product = state.extra <span class="hljs-keyword">as</span> Product?; 
  <span class="hljs-keyword">return</span> DetailsScreen(id: id, product: product);
}
</code></pre>
<h5 data-id="heading-7">ç¬¬å…­æ­¥ï¼šåµŒå¥—è·¯ç”± (Nested Navigation)</h5>
<p><code>GoRouter</code> è®©å®ç°å¸¦åº•éƒ¨å¯¼èˆªæ çš„å¤æ‚å¸ƒå±€å˜å¾—éå¸¸ç®€å•ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <code>StatefulShellRoute.indexedStack</code>ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªåº”ç”¨æœ‰ä¸‰ä¸ªä¸»é¡µé¢ï¼š<code>Home</code>, <code>Feed</code>, <code>Settings</code>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// app_router.dart</span>
<span class="hljs-comment">// 1. å®šä¹‰ä¸€ä¸ª shell widgetï¼Œå®ƒåŒ…å« BottomNavigationBar å’Œç”¨äºæ˜¾ç¤ºå­é¡µé¢çš„ body</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'../screens/scaffold_with_nav_bar.dart'</span>; 

<span class="hljs-keyword">final</span> GoRouter router = GoRouter(
  initialLocation: <span class="hljs-string">'/home'</span>, <span class="hljs-comment">// åˆå§‹é¡µé¢</span>
  routes: [
    <span class="hljs-comment">// 2. ä½¿ç”¨ StatefulShellRoute.indexedStack å®šä¹‰åµŒå¥—è·¯ç”±</span>
    StatefulShellRoute.indexedStack(
      builder: (context, state, navigationShell) {
        <span class="hljs-comment">// è¿”å›ä½ çš„ Shell UI (ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¦ BottomNavigationBarçš„ Scaffold)</span>
        <span class="hljs-keyword">return</span> ScaffoldWithNavBar(navigationShell: navigationShell);
      },
      branches: [
        <span class="hljs-comment">// ç¬¬ä¸€ä¸ªåˆ†æ”¯ (tab)</span>
        StatefulShellBranch(
          routes: [
            GoRoute(
              path: <span class="hljs-string">'/home'</span>,
              builder: (context, state) =&gt; <span class="hljs-keyword">const</span> HomeScreen(),
            ),
          ],
        ),
        <span class="hljs-comment">// ç¬¬äºŒä¸ªåˆ†æ”¯</span>
        StatefulShellBranch(
          routes: [
            GoRoute(
              path: <span class="hljs-string">'/feed'</span>,
              builder: (context, state) =&gt; <span class="hljs-keyword">const</span> FeedScreen(),
              routes: [
                <span class="hljs-comment">// Feed é¡µé¢ä¸‹çš„å­é¡µé¢</span>
                GoRoute(
                  path: <span class="hljs-string">'details/:id'</span>, <span class="hljs-comment">// è·¯å¾„ä¼šè‡ªåŠ¨æ‹¼æ¥ä¸º /feed/details/:id</span>
                  builder: (context, state) =&gt; DetailsScreen(id: state.pathParameters[<span class="hljs-string">'id'</span>]!),
                ),
              ]
            ),
          ],
        ),
        <span class="hljs-comment">// ç¬¬ä¸‰ä¸ªåˆ†æ”¯</span>
        StatefulShellBranch(
          routes: [
            GoRoute(
              path: <span class="hljs-string">'/settings'</span>,
              builder: (context, state) =&gt; <span class="hljs-keyword">const</span> SettingsScreen(),
            ),
          ],
        ),
      ],
    ),
  ],
);
</code></pre>
<p>ä½ çš„ <code>ScaffoldWithNavBar</code> ä¼šæ¥æ”¶ä¸€ä¸ª <code>navigationShell</code> å¯¹è±¡ï¼Œç”¨å®ƒæ¥æ„å»º <code>BottomNavigationBar</code> å¹¶æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„é¡µé¢ã€‚ <code>StatefulShellRoute</code> çš„ç¾å¦™ä¹‹å¤„åœ¨äºï¼Œå½“ä½ åˆ‡æ¢æ ‡ç­¾é¡µæ—¶ï¼Œæ¯ä¸ªåˆ†æ”¯çš„å¯¼èˆªçŠ¶æ€éƒ½ä¼šè¢«å®Œæ•´ä¿ç•™ï¼</p>
<h5 data-id="heading-8">ç¬¬ä¸ƒæ­¥ï¼šé‡å®šå‘ (Redirect) - ç™»å½•éªŒè¯</h5>
<p><code>GoRouter</code> çš„ <code>redirect</code> åŠŸèƒ½æ˜¯å®ç°è·¯ç”±å®ˆå«ï¼ˆä¾‹å¦‚ç™»å½•æ‹¦æˆªï¼‰çš„åˆ©å™¨ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// app_router.dart</span>
<span class="hljs-keyword">final</span> GoRouter router = GoRouter(
  redirect: (BuildContext context, GoRouterState state) {
    <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªç™»å½•çŠ¶æ€</span>
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> loggedIn = <span class="hljs-keyword">false</span>; <span class="hljs-comment">// åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œä½ ä¼šä»çŠ¶æ€ç®¡ç†ä¸­è·å–</span>
    
    <span class="hljs-comment">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨è®¿é—®ç™»å½•é¡µ</span>
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> isLoggingIn = state.matchedLocation == <span class="hljs-string">'/login'</span>;

    <span class="hljs-comment">// å¦‚æœç”¨æˆ·æœªç™»å½•ä¸”ä¸åœ¨ç™»å½•é¡µï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µ</span>
    <span class="hljs-keyword">if</span> (!loggedIn &amp;&amp; !isLoggingIn) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'/login'</span>;
    }
    
    <span class="hljs-comment">// å¦‚æœç”¨æˆ·å·²ç™»å½•ä¸”åœ¨è®¿é—®ç™»å½•é¡µï¼Œé‡å®šå‘åˆ°é¦–é¡µ</span>
    <span class="hljs-keyword">if</span> (loggedIn &amp;&amp; isLoggingIn) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'/'</span>;
    }

    <span class="hljs-comment">// å…¶ä»–æƒ…å†µï¼Œä¸é‡å®šå‘</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
  },
  routes: [
    GoRoute(
      path: <span class="hljs-string">'/'</span>,
      builder: (context, state) =&gt; <span class="hljs-keyword">const</span> HomeScreen(),
    ),
    GoRoute(
      path: <span class="hljs-string">'/login'</span>,
      builder: (context, state) =&gt; <span class="hljs-keyword">const</span> LoginScreen(),
    ),
    GoRoute(
      path: <span class="hljs-string">'/profile'</span>,
      builder: (context, state) =&gt; <span class="hljs-keyword">const</span> ProfileScreen(),
    ),
  ],
);
</code></pre>
<p>è¿™ä¸ª <code>redirect</code> å‡½æ•°ä¼šåœ¨æ¯æ¬¡å¯¼èˆªå‘ç”Ÿå‰è¢«è°ƒç”¨ã€‚ä½ å¯ä»¥æ ¹æ®åº”ç”¨çŠ¶æ€ï¼ˆå¦‚ç™»å½•çŠ¶æ€ã€ç”¨æˆ·æƒé™ç­‰ï¼‰è¿”å›ä¸€ä¸ªæ–°çš„è·¯å¾„æ¥ä¸­æ–­å¹¶é‡å®šå‘å¯¼èˆªï¼Œæˆ–è€…è¿”å› <code>null</code> è¡¨ç¤ºå…è®¸æœ¬æ¬¡å¯¼èˆªã€‚</p>
<h4 data-id="heading-9">æ€»ç»“</h4>
<p><code>Navigator 2.0</code> çš„å£°æ˜å¼æ€æƒ³ä¸º <code>Flutter</code> å¸¦æ¥äº†æ›´å¼ºå¤§ã€æ›´çµæ´»çš„è·¯ç”±ç³»ç»Ÿï¼Œè€Œ <code>GoRouter</code> åˆ™æ˜¯æˆ‘ä»¬é©¾é©­è¿™å¥—ç³»ç»Ÿçš„æœ€ä½³å·¥å…·ã€‚</p>
<p>é€šè¿‡æœ¬æ•™ç¨‹ï¼Œæˆ‘ä»¬å­¦ä¹ äº† <code>GoRouter</code> çš„æ ¸å¿ƒç”¨æ³•ï¼š</p>
<ol>
<li><strong>åŸºç¡€é…ç½®</strong>ï¼šé€šè¿‡ <code>GoRouter</code> å’Œ <code>GoRoute</code> å®šä¹‰è·¯ç”±è¡¨ã€‚</li>
<li><strong>é¡µé¢å¯¼èˆª</strong>ï¼šä½¿ç”¨ <code>context.go</code>, <code>context.push</code>, <code>context.pop</code>ã€‚</li>
<li><strong>å‚æ•°ä¼ é€’</strong>ï¼šæŒæ¡äº†è·¯å¾„å‚æ•°ã€æŸ¥è¯¢å‚æ•°å’Œ <code>extra</code> å¯¹è±¡ä¼ å‚ã€‚</li>
<li><strong>åµŒå¥—è·¯ç”±</strong>ï¼šä½¿ç”¨ <code>StatefulShellRoute</code> è½»æ¾å®ç°å¤æ‚çš„ <code>UI</code> å¸ƒå±€ã€‚</li>
<li><strong>è·¯ç”±é‡å®šå‘</strong>ï¼šé€šè¿‡ <code>redirect</code> å®ç°ç™»å½•æ‹¦æˆªç­‰è·¯ç”±å®ˆå«ã€‚</li>
</ol>
<p>æŒæ¡ <code>GoRouter</code>ï¼Œä½ å°†èƒ½å¤Ÿè‡ªä¿¡åœ°æ„å»ºä»»ä½•å¤æ‚çš„ <code>Flutter</code> åº”ç”¨ï¼Œå¹¶è½»æ¾åº”å¯¹ <code>Web</code> å’Œæ·±åº¦é“¾æ¥å¸¦æ¥çš„æŒ‘æˆ˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS å®šä½è¯¦è§£ï¼šä»æ–‡æ¡£æµåˆ°äº”ç§å®šä½æ–¹å¼]]></title>    <link>https://juejin.cn/post/7571295102851498010</link>    <guid>https://juejin.cn/post/7571295102851498010</guid>    <pubDate>2025-11-12T00:33:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571295102851498010" data-draft-id="7571304204755058742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS å®šä½è¯¦è§£ï¼šä»æ–‡æ¡£æµåˆ°äº”ç§å®šä½æ–¹å¼"/> <meta itemprop="keywords" content="CSS,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T00:33:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿›å‡»çš„é‡äºº"/> <meta itemprop="url" content="https://juejin.cn/user/1458425238667008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS å®šä½è¯¦è§£ï¼šä»æ–‡æ¡£æµåˆ°äº”ç§å®šä½æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1458425238667008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿›å‡»çš„é‡äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:33:44.000Z" title="Wed Nov 12 2025 00:33:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç½‘é¡µè®¾è®¡ä¸å¼€å‘ä¸­ï¼ŒCSS å®šä½æ˜¯æ§åˆ¶å…ƒç´ å¸ƒå±€çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚ç†è§£ä¸åŒçš„å®šä½æ–¹å¼åŠå…¶å¯¹æ–‡æ¡£æµçš„å½±å“ï¼Œå¯¹äºåˆ›å»ºå¤æ‚ä¸”å“åº”å¼çš„é¡µé¢å¸ƒå±€è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ CSS ä¸­çš„äº”ç§å®šä½æ–¹å¼ï¼šstaticã€relativeã€absoluteã€fixed å’Œ stickyï¼Œå¹¶é€šè¿‡å…·ä½“ä»£ç ç¤ºä¾‹è§£æå®ƒä»¬çš„è¡Œä¸ºç‰¹æ€§ã€‚</p>
<h2 data-id="heading-0">æ–‡æ¡£æµåŸºç¡€</h2>
<p>åœ¨æ·±å…¥æ¢è®¨å®šä½ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£æ–‡æ¡£æµï¼ˆNormal Flowï¼‰çš„æ¦‚å¿µã€‚æ–‡æ¡£æµæ˜¯ HTML å…ƒç´ é»˜è®¤çš„å¸ƒå±€æ–¹å¼ï¼šå—çº§å…ƒç´ å‚ç›´æ’åˆ—ï¼Œè¡Œå†…å…ƒç´ æ°´å¹³æ’åˆ—ï¼Œéµå¾ªä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³çš„è‡ªç„¶é¡ºåºã€‚</p>
<p>å½“å…ƒç´ å¤„äºæ–‡æ¡£æµä¸­æ—¶ï¼Œå®ƒä»¬æŒ‰ç…§åœ¨ HTML ä¸­çš„å‡ºç°é¡ºåºè¿›è¡Œå¸ƒå±€ã€‚ç„¶è€Œï¼ŒæŸäº› CSS å±æ€§ï¼ˆå¦‚å®šä½ï¼‰å¯ä»¥ä½¿å…ƒç´ "ç¦»å¼€æ–‡æ¡£æµ"ï¼Œä»è€Œæ”¹å˜è¿™ç§é»˜è®¤è¡Œä¸ºã€‚</p>
<h2 data-id="heading-1">ç›¸å¯¹å®šä½ï¼ˆRelative Positioningï¼‰</h2>
<p>ç›¸å¯¹å®šä½æ˜¯ CSS ä¸­æœ€åŸºç¡€çš„å®šä½æ–¹å¼ä¹‹ä¸€ã€‚é€šè¿‡è®¾ç½®Â <code>position: relative</code>ï¼Œå…ƒç´ å¯ä»¥æ ¹æ®å…¶åœ¨æ–‡æ¡£æµä¸­çš„åŸå§‹ä½ç½®è¿›è¡Œåç§»ã€‚</p>
<p>html</p>
<p>å¤åˆ¶ä¸‹è½½è¿è¡Œ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Relative ç›¸å¯¹å®šä½<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    *{
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    }
    <span class="hljs-selector-class">.parent</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
      <span class="hljs-attribute">background</span>: pink;
      <span class="hljs-attribute">position</span>: relative;
      <span class="hljs-attribute">left</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">top</span>: <span class="hljs-number">100px</span>;
    }
    <span class="hljs-selector-class">.child</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">background</span>: gold;
    }
    <span class="hljs-selector-class">.box</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">background-color</span>: greenyellow;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>.parent</code>Â å…ƒç´ è®¾ç½®äº†Â <code>position: relative</code>Â å¹¶å‘å³å’Œå‘ä¸‹å„åç§»äº† 100pxã€‚ç›¸å¯¹å®šä½çš„å…³é”®ç‰¹æ€§æ˜¯ï¼š</p>
<ol>
<li><strong>ç›¸å¯¹è‡ªèº«å®šä½</strong>ï¼šå…ƒç´ ç›¸å¯¹äºå…¶åœ¨æ–‡æ¡£æµä¸­çš„åŸå§‹ä½ç½®è¿›è¡Œåç§»</li>
<li><strong>ä¸è„±ç¦»æ–‡æ¡£æµ</strong>ï¼šå…ƒç´ ä»ç„¶å æ®åŸæ¥çš„ç©ºé—´ï¼Œä¸ä¼šå½±å“å…¶ä»–å…ƒç´ çš„å¸ƒå±€</li>
<li><strong>å¯ä½¿ç”¨åç§»å±æ€§</strong>ï¼šå¯ä»¥ä½¿ç”¨Â <code>top</code>ã€<code>right</code>ã€<code>bottom</code>Â å’ŒÂ <code>left</code>Â å±æ€§è¿›è¡Œç²¾ç¡®æ§åˆ¶</li>
</ol>
<p>ç›¸å¯¹å®šä½å¸¸ç”¨äºå¾®è°ƒå…ƒç´ ä½ç½®ï¼Œæˆ–ä½œä¸ºç»å¯¹å®šä½å­å…ƒç´ çš„å‚è€ƒå®¹å™¨ã€‚</p>
<h2 data-id="heading-2">ç»å¯¹å®šä½ï¼ˆAbsolute Positioningï¼‰</h2>
<p>ç»å¯¹å®šä½ä½¿å…ƒç´ å®Œå…¨è„±ç¦»æ–‡æ¡£æµï¼Œä¸å†å æ®åŸæ¥çš„ç©ºé—´ã€‚ç»å¯¹å®šä½çš„å…ƒç´ éœ€è¦å‚è€ƒä¸€ä¸ªå…·æœ‰å®šä½å±æ€§ï¼ˆé staticï¼‰çš„ç¥–å…ˆå…ƒç´ ã€‚</p>
<p>html</p>
<p>å¤åˆ¶ä¸‹è½½è¿è¡Œ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>absolute ç»å¯¹å®šä½<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    * {
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    }
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">background-color</span>: azure;
    }
    <span class="hljs-selector-class">.parent</span> {
      <span class="hljs-attribute">opacity</span>:<span class="hljs-number">1</span>;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">550px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
      <span class="hljs-attribute">background-color</span>: hotpink;
      <span class="hljs-attribute">position</span>:relative;
    }
    <span class="hljs-selector-class">.child</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">background-color</span>: skyblue;
      <span class="hljs-attribute">position</span>: absolute;
      <span class="hljs-attribute">right</span>: <span class="hljs-number">100px</span>;
    }
    <span class="hljs-selector-class">.box</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">background-color</span>: turquoise;
      <span class="hljs-attribute">position</span>:absolute;
      <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
      <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
      <span class="hljs-attribute">transform</span>:<span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>,-<span class="hljs-number">50%</span>);
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>123<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>456<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸¤ç§ç»å¯¹å®šä½çš„åº”ç”¨ï¼š</p>
<ol>
<li><strong>å­å…ƒç´ ç›¸å¯¹äºçˆ¶å…ƒç´ å®šä½</strong>ï¼š<code>.child</code>Â å…ƒç´ è®¾ç½®äº†Â <code>position: absolute</code>Â å’ŒÂ <code>right: 100px</code>ï¼Œå®ƒç›¸å¯¹äºè®¾ç½®äº†Â <code>position: relative</code>Â çš„Â <code>.parent</code>Â å…ƒç´ è¿›è¡Œå®šä½ã€‚</li>
<li><strong>ç›¸å¯¹äºè§†å£å®šä½</strong>ï¼š<code>.box</code>Â å…ƒç´ ä¹Ÿè®¾ç½®äº†Â <code>position: absolute</code>ï¼Œä½†ç”±äºæ²¡æœ‰å®šä½çš„ç¥–å…ˆå…ƒç´ ï¼Œå®ƒç›¸å¯¹äºè§†å£è¿›è¡Œå®šä½ã€‚é€šè¿‡Â <code>left: 50%</code>Â å’ŒÂ <code>top: 50%</code>Â å°†å…¶å·¦ä¸Šè§’å®šä½åœ¨è§†å£ä¸­å¿ƒï¼Œå†é€šè¿‡Â <code>transform: translate(-50%, -50%)</code>Â å°†å…¶è‡ªèº«ä¸­å¿ƒç‚¹å¯¹å‡†è§†å£ä¸­å¿ƒã€‚</li>
</ol>
<p>ç»å¯¹å®šä½çš„å…³é”®ç‰¹æ€§ï¼š</p>
<ol>
<li><strong>è„±ç¦»æ–‡æ¡£æµ</strong>ï¼šå…ƒç´ ä¸å†å æ®ç©ºé—´ï¼Œåç»­å…ƒç´ ä¼šå¡«è¡¥å…¶ä½ç½®</li>
<li><strong>å‚è€ƒæœ€è¿‘çš„å®šä½ç¥–å…ˆ</strong>ï¼šå…ƒç´ ç›¸å¯¹äºæœ€è¿‘çš„é static å®šä½ç¥–å…ˆè¿›è¡Œå®šä½</li>
<li><strong>æ— å®šä½ç¥–å…ˆæ—¶å‚è€ƒè§†å£</strong>ï¼šå¦‚æœæ²¡æœ‰å®šä½ç¥–å…ˆï¼Œåˆ™ç›¸å¯¹äºåˆå§‹åŒ…å«å—ï¼ˆé€šå¸¸æ˜¯è§†å£ï¼‰å®šä½</li>
<li><strong>ä¸å“åº”æ–‡æ¡£æ»šåŠ¨</strong>ï¼šé™¤éå…¶å®šä½ç¥–å…ˆæ»šåŠ¨</li>
</ol>
<h2 data-id="heading-3">å›ºå®šå®šä½ï¼ˆFixed Positioningï¼‰</h2>
<p>å›ºå®šå®šä½ç±»ä¼¼äºç»å¯¹å®šä½ï¼Œä½†å®ƒæ€»æ˜¯ç›¸å¯¹äºæµè§ˆå™¨è§†å£è¿›è¡Œå®šä½ï¼Œå³ä½¿é¡µé¢æ»šåŠ¨ï¼Œå…ƒç´ ä¹Ÿä¼šä¿æŒåœ¨å›ºå®šä½ç½®ã€‚</p>
<p>html</p>
<p>å¤åˆ¶ä¸‹è½½è¿è¡Œ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>fixed<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    *{
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>; 
    }
    <span class="hljs-selector-tag">body</span>{
      <span class="hljs-attribute">height</span>: <span class="hljs-number">2000px</span>;
    }
    <span class="hljs-selector-class">.parent</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">550px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
      <span class="hljs-attribute">background-color</span>: green;
    }
    <span class="hljs-selector-class">.child</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">background-color</span>: blue;
      <span class="hljs-attribute">position</span>: fixed;
      <span class="hljs-attribute">right</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">bottom</span>: <span class="hljs-number">100px</span>;
    }
    <span class="hljs-selector-class">.box</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">background-color</span>: pink;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>.child</code>Â å…ƒç´ è®¾ç½®äº†Â <code>position: fixed</code>ï¼Œå¹¶å®šä½åœ¨è§†å£å³ä¸‹è§’ 100px å¤„ã€‚å³ä½¿é¡µé¢æ»šåŠ¨ï¼Œè¯¥å…ƒç´ ä¹Ÿä¼šä¿æŒåœ¨å›ºå®šä½ç½®ã€‚</p>
<p>å›ºå®šå®šä½çš„å…³é”®ç‰¹æ€§ï¼š</p>
<ol>
<li><strong>ç›¸å¯¹äºè§†å£å®šä½</strong>ï¼šæ€»æ˜¯ç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½</li>
<li><strong>è„±ç¦»æ–‡æ¡£æµ</strong>ï¼šä¸å æ®ç©ºé—´ï¼Œä¸å½±å“å…¶ä»–å…ƒç´ å¸ƒå±€</li>
<li><strong>ä¸éšé¡µé¢æ»šåŠ¨</strong>ï¼šé¡µé¢æ»šåŠ¨æ—¶å…ƒç´ ä¿æŒå›ºå®šä½ç½®</li>
<li><strong>å¸¸ç”¨äºå›ºå®šå¯¼èˆªã€å¹¿å‘Šç­‰</strong>ï¼šé€‚åˆéœ€è¦å§‹ç»ˆå¯è§çš„ç•Œé¢å…ƒç´ </li>
</ol>
<h2 data-id="heading-4">ç²˜æ€§å®šä½ï¼ˆSticky Positioningï¼‰</h2>
<p>ç²˜æ€§å®šä½æ˜¯ç›¸å¯¹å®šä½å’Œå›ºå®šå®šä½çš„æ··åˆã€‚å…ƒç´ åœ¨è·¨è¶Šç‰¹å®šé˜ˆå€¼å‰ä¸ºç›¸å¯¹å®šä½ï¼Œä¹‹åä¸ºå›ºå®šå®šä½ã€‚</p>
<p>html</p>
<p>å¤åˆ¶ä¸‹è½½è¿è¡Œ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    *{
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    }
    <span class="hljs-selector-tag">body</span>{
      <span class="hljs-attribute">height</span>: <span class="hljs-number">2000px</span>;
    }
    <span class="hljs-selector-class">.parent</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
      <span class="hljs-attribute">background-color</span>: palegreen;
    }
    <span class="hljs-selector-class">.child</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">background-color</span>: orange;
    }
    <span class="hljs-selector-class">.box</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">background-color</span>: brown;
      <span class="hljs-attribute">position</span>:sticky;
      <span class="hljs-attribute">top</span>:<span class="hljs-number">100px</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
    153
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>.box</code>Â å…ƒç´ è®¾ç½®äº†Â <code>position: sticky</code>Â å’ŒÂ <code>top: 100px</code>ã€‚å½“é¡µé¢æ»šåŠ¨æ—¶ï¼Œè¯¥å…ƒç´ ä¼šæ­£å¸¸æ»šåŠ¨ç›´åˆ°è·ç¦»è§†å£é¡¶éƒ¨ 100px çš„ä½ç½®ï¼Œç„¶åå˜ä¸ºå›ºå®šå®šä½ï¼Œä¿æŒåœ¨è¯¥ä½ç½®ã€‚</p>
<p>ç²˜æ€§å®šä½çš„å…³é”®ç‰¹æ€§ï¼š</p>
<ol>
<li><strong>æ··åˆå®šä½æ¨¡å¼</strong>ï¼šåœ¨é˜ˆå€¼å‰ä¸ºç›¸å¯¹å®šä½ï¼Œè·¨è¶Šé˜ˆå€¼åä¸ºå›ºå®šå®šä½</li>
<li><strong>ç›¸å¯¹äºæœ€è¿‘æ»šåŠ¨ç¥–å…ˆ</strong>ï¼šå…ƒç´ ç›¸å¯¹äºæœ€è¿‘çš„æ»šåŠ¨ç¥–å…ˆè¿›è¡Œå®šä½</li>
<li><strong>éœ€è¦æŒ‡å®šé˜ˆå€¼</strong>ï¼šå¿…é¡»æŒ‡å®šè‡³å°‘ä¸€ä¸ªÂ <code>top</code>ã€<code>right</code>ã€<code>bottom</code>Â æˆ–Â <code>left</code>Â å€¼</li>
<li><strong>å¸¸ç”¨äºç²˜æ€§å¯¼èˆªã€æ ‡é¢˜ç­‰</strong>ï¼šé€‚åˆéœ€è¦åœ¨æ»šåŠ¨æ—¶ä¿æŒå¯è§ä½†åˆä¸ä¸€ç›´å›ºå®šçš„å…ƒç´ </li>
</ol>
<h2 data-id="heading-5">é™æ€å®šä½ï¼ˆStatic Positioningï¼‰</h2>
<p>é™æ€å®šä½æ˜¯å…ƒç´ çš„é»˜è®¤å®šä½æ–¹å¼ï¼Œå…ƒç´ æŒ‰ç…§æ­£å¸¸çš„æ–‡æ¡£æµè¿›è¡Œå¸ƒå±€ã€‚</p>
<p>html</p>
<p>å¤åˆ¶ä¸‹è½½è¿è¡Œ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    *{
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    }
    <span class="hljs-selector-class">.parent</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
      <span class="hljs-attribute">background-color</span>: pink;
      <span class="hljs-attribute">left</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">position</span>: absolute;
    }
    <span class="hljs-selector-class">.child</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">background-color</span>: blue;
    }
    <span class="hljs-selector-class">.box</span>{
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">background-color</span>: green;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
    153
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> oParent = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.parent'</span>);
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      oParent.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'static'</span>;
    },<span class="hljs-number">2000</span>);
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>.parent</code>Â å…ƒç´ åˆå§‹è®¾ç½®ä¸ºÂ <code>position: absolute</code>ï¼Œä½† 2 ç§’åé€šè¿‡ JavaScript å˜ä¸ºÂ <code>position: static</code>ã€‚å½“å˜ä¸ºé™æ€å®šä½åï¼Œ<code>left: 100px</code>Â å±æ€§å°†ä¸å†ç”Ÿæ•ˆï¼Œå› ä¸ºé™æ€å®šä½çš„å…ƒç´ ä¸æ¥å—åç§»å±æ€§ã€‚</p>
<p>é™æ€å®šä½çš„å…³é”®ç‰¹æ€§ï¼š</p>
<ol>
<li><strong>é»˜è®¤å®šä½æ–¹å¼</strong>ï¼šæ‰€æœ‰å…ƒç´ çš„é»˜è®¤å®šä½æ–¹å¼</li>
<li><strong>å¿½ç•¥åç§»å±æ€§</strong>ï¼š<code>top</code>ã€<code>right</code>ã€<code>bottom</code>Â å’ŒÂ <code>left</code>Â å±æ€§æ— æ•ˆ</li>
<li><strong>æ­£å¸¸æ–‡æ¡£æµ</strong>ï¼šå…ƒç´ æŒ‰ç…§æ­£å¸¸çš„æ–‡æ¡£æµè¿›è¡Œå¸ƒå±€</li>
<li><strong>ç”¨äºå–æ¶ˆå®šä½</strong>ï¼šå¯ç”¨äºè¦†ç›–å…¶ä»–å®šä½æ–¹å¼ï¼Œä½¿å…ƒç´ å›åˆ°æ­£å¸¸æ–‡æ¡£æµ</li>
</ol>
<h2 data-id="heading-6">å®šä½ä¸å…ƒç´ æ˜¾ç¤º</h2>
<p>åœ¨ CSS ä¸­ï¼Œæœ‰å¤šç§æ–¹å¼å¯ä»¥éšè—å…ƒç´ ï¼Œä½†å®ƒä»¬çš„è¡Œä¸ºæœ‰æ‰€ä¸åŒï¼š</p>
<ul>
<li><strong>display: none</strong>ï¼šå®Œå…¨éšè—å…ƒç´ ï¼Œä¸å ç”¨ç©ºé—´ï¼Œä¸ä¼šå½±å“å…¶ä»–å…ƒç´ çš„å¸ƒå±€</li>
<li><strong>opacity: 0</strong>ï¼šä½¿å…ƒç´ å®Œå…¨é€æ˜ï¼Œä½†ä»ç„¶å ç”¨ç©ºé—´ï¼Œä¼šå½±å“å…¶ä»–å…ƒç´ çš„å¸ƒå±€</li>
<li><strong>visibility: hidden</strong>ï¼šéšè—å…ƒç´ ï¼Œä½†ä»ç„¶å ç”¨ç©ºé—´ï¼Œä½†ä¸ä¼šå“åº”é¼ æ ‡äº‹ä»¶</li>
</ul>
<p>åœ¨å®šä½ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™äº›å±æ€§çš„é€‰æ‹©ä¼šå½±å“å¸ƒå±€ç»“æœã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨Â <code>opacity: 0</code>Â éšè—çš„å®šä½å…ƒç´ ä»ç„¶ä¼šå æ®å…¶å®šä½ç©ºé—´ï¼Œè€Œä½¿ç”¨Â <code>display: none</code>Â åˆ™å®Œå…¨ä»å¸ƒå±€ä¸­ç§»é™¤ã€‚</p>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>CSS å®šä½æ˜¯ç½‘é¡µå¸ƒå±€çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œç†è§£ä¸åŒå®šä½æ–¹å¼çš„è¡Œä¸ºç‰¹æ€§å¯¹äºåˆ›å»ºå¤æ‚ä¸”å“åº”å¼çš„é¡µé¢è‡³å…³é‡è¦ã€‚ç›¸å¯¹å®šä½ç”¨äºå¾®è°ƒï¼Œç»å¯¹å®šä½ç”¨äºç²¾ç¡®æ§åˆ¶ï¼Œå›ºå®šå®šä½ç”¨äºåˆ›å»ºå›ºå®šå…ƒç´ ï¼Œç²˜æ€§å®šä½ç”¨äºæ»šåŠ¨æ—¶çš„ç²˜æ€§æ•ˆæœï¼Œè€Œé™æ€å®šä½åˆ™æ˜¯é»˜è®¤çš„æ–‡æ¡£æµå¸ƒå±€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Solidity ç¬¬å››å‘¨ ï¼ˆä¸‹ï¼‰ï¼šè§£æ„DeFiçš„æ ¸å¿ƒå¼•æ“â€”â€”æ™ºèƒ½åˆçº¦æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7571348736153337892</link>    <guid>https://juejin.cn/post/7571348736153337892</guid>    <pubDate>2025-11-12T01:25:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571348736153337892" data-draft-id="7571355146770628650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Solidity ç¬¬å››å‘¨ ï¼ˆä¸‹ï¼‰ï¼šè§£æ„DeFiçš„æ ¸å¿ƒå¼•æ“â€”â€”æ™ºèƒ½åˆçº¦æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="Solidity"/> <meta itemprop="datePublished" content="2025-11-12T01:25:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="cainiaoeba"/> <meta itemprop="url" content="https://juejin.cn/user/4302806371543898"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Solidity ç¬¬å››å‘¨ ï¼ˆä¸‹ï¼‰ï¼šè§£æ„DeFiçš„æ ¸å¿ƒå¼•æ“â€”â€”æ™ºèƒ½åˆçº¦æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4302806371543898/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    cainiaoeba
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T01:25:58.000Z" title="Wed Nov 12 2025 01:25:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Solidity ç¬¬å››å‘¨ ï¼ˆä¸‹ï¼‰ï¼šè§£æ„DeFiçš„æ ¸å¿ƒå¼•æ“â€”â€”æ™ºèƒ½åˆçº¦æ·±åº¦è§£æ</h2>
<p>è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ æ¢ç´¢ä¸‰ä¸ªDeFié¢†åŸŸçš„â€œåœ£æ¯â€çº§åˆçº¦ï¼š<strong>è‡ªåŠ¨åŒ–åšå¸‚å•†ï¼ˆAMMï¼‰</strong>ã€<strong>æ”¶ç›Šå†œåœºï¼ˆYield Farmingï¼‰</strong> å’Œ <strong>å»ä¸­å¿ƒåŒ–æ²»ç†ï¼ˆDAOï¼‰</strong>ã€‚å‡†å¤‡å¥½ï¼Œæˆ‘ä»¬å°†ä¸€èµ·æ­å¼€â€œé‡‘èä¹é«˜â€çš„ç¥ç§˜é¢çº±ã€‚</p>
<h3 data-id="heading-1">ğŸš€ ä¸€ã€è‡ªåŠ¨åŒ–åšå¸‚å•†ï¼ˆAMMï¼‰ï¼š<code>x * y = k</code> çš„é­”åŠ›</h3>
<p>åœ¨ä¼ ç»Ÿé‡‘èä¸­ï¼Œäº¤æ˜“ä¾èµ–äºâ€œè®¢å•ç°¿â€â€”â€”ä¹°å®¶å’Œå–å®¶æŒ‚å‡ºè‡ªå·±çš„å¿ƒç†ä»·ä½ï¼Œç­‰å¾…å¯¹æ‰‹æ–¹æ’®åˆã€‚ä½†åœ¨åŒºå—é“¾ä¸Šï¼Œè¿™ç§æ¨¡å¼å› gasè´¹ç”¨é«˜æ˜‚å’ŒæµåŠ¨æ€§ä¸è¶³è€Œéš¾ä»¥ä¸ºç»§ã€‚AMMçš„å‡ºç°ï¼Œå½»åº•æ”¹å˜äº†æ¸¸æˆè§„åˆ™ã€‚</p>
<p>Uniswap V2æ‰€æ¨å¹¿çš„<strong>æ’å®šä¹˜ç§¯å…¬å¼ <code>x * y = k</code></strong> æ˜¯AMMçš„çµé­‚ã€‚å®ƒä¸éœ€è¦è®¢å•ç°¿ï¼Œè€Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ªâ€œæµåŠ¨æ€§æ± â€ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸è¿™ä¸ªæ± å­è¿›è¡Œäº¤æ˜“ã€‚</p>
<h4 data-id="heading-2">AMMæ ¸å¿ƒé€»è¾‘</h4>
<ul>
<li><strong>æµåŠ¨æ€§æ±  (Liquidity Pool)</strong>: åˆçº¦ä¸­é”å®šä¸¤ç§ä»£å¸ï¼ˆå¦‚Token Aå’ŒToken Bï¼‰ã€‚</li>
<li><strong>æ’å®šä¹˜ç§¯</strong>: <code>Token A çš„å‚¨å¤‡é‡ (x)</code> ä¹˜ä»¥ <code>Token B çš„å‚¨å¤‡é‡ (y)</code> å¿…é¡»å§‹ç»ˆç­‰äºä¸€ä¸ªå¸¸æ•° <code>k</code>ï¼ˆå¿½ç•¥æ‰‹ç»­è´¹ï¼‰ã€‚</li>
<li><strong>ä»·æ ¼å‘ç°</strong>: å½“ä½ ç”¨Token Aå…‘æ¢Token Bæ—¶ï¼Œä½ å‘æ± ä¸­å¢åŠ äº†Aï¼ˆxå¢å¤§ï¼‰ï¼Œä¸ºäº†ä¿æŒkä¸å˜ï¼Œæ± å­å¿…é¡»å‡å°‘Bï¼ˆyå‡å°ï¼‰å¹¶ç»™ä½ ã€‚æ± ä¸­ä¸¤ç§ä»£å¹£çš„ç›¸å¯¹æ•°é‡å˜åŒ–ï¼Œè‡ªåŠ¨å¯¼è‡´äº†ä»·æ ¼çš„å˜åŒ–ã€‚</li>
</ul>
<h4 data-id="heading-3">å…³é”®ä»£ç å®ç°</h4>
<h5 data-id="heading-4">1. æ·»åŠ æµåŠ¨æ€§ (<code>addLiquidity</code>)</h5>
<p>ç”¨æˆ·æŒ‰å½“å‰æ± å†…ä»£å¸çš„æ¯”ä¾‹ï¼ŒåŒæ—¶å­˜å…¥ä¸¤ç§ä»£å¸ï¼Œæˆä¸ºæµåŠ¨æ€§æä¾›è€…ï¼ˆLPï¼‰ï¼Œå¹¶è·å¾—ä»£è¡¨å…¶ä»½é¢çš„LPå‡­è¯ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">// AutomatedMarketMaker.sol
function addLiquidity(uint256 amountA, uint256 amountB) external {
    // ...
    tokenA.transferFrom(msg.sender, address(this), amountA);
    tokenB.transferFrom(msg.sender, address(this), amountB);

    uint256 liquidity;
    // å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªæµåŠ¨æ€§æä¾›è€…ï¼ŒLPæ•°é‡ = sqrt(a * b)
    if (totalSupply() == 0) {
        liquidity = sqrt(amountA * amountB);
    } else {
        // åç»­æä¾›è€…æŒ‰æ¯”ä¾‹è·å¾—LP
        liquidity = min(
            amountA * totalSupply() / reserveA,
            amountB * totalSupply() / reserveB
        );
    }

    _mint(msg.sender, liquidity); // é“¸é€ LPä»£å¸ç»™ç”¨æˆ·
    // ...
}
</code></pre>
<h5 data-id="heading-5">2. ä»£å¸äº¤æ¢ (<code>swapAforB</code>)</h5>
<p>è¿™æ˜¯AMMçš„æ ¸å¿ƒåŠŸèƒ½ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»·æ ¼è®¡ç®—çš„å®ç°ï¼Œå…¶ä¸­åŒ…å«0.3%çš„æ‰‹ç»­è´¹ï¼Œè¿™éƒ¨åˆ†æ‰‹ç»­è´¹ä¼šç•™åœ¨æ± ä¸­ï¼Œå¥–åŠ±ç»™æµåŠ¨æ€§æä¾›è€…ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">function swapAforB(uint256 amountAIn, uint256 minBOut) external {
    require(amountAIn &gt; 0, "Amount must be &gt; 0");
    require(reserveA &gt; 0 &amp;&amp; reserveB &gt; 0, "Insufficient reserves");

    // Uniswap V2 ç»å…¸æ‰‹ç»­è´¹æ¨¡å‹ï¼šæ‰£é™¤0.3%
    // 1000ä»½é‡Œå–997ä»½ç”¨äºè®¡ç®—ï¼Œå‰©ä¸‹3ä»½ä½œä¸ºæ‰‹ç»­è´¹
    uint256 amountAInWithFee = amountAIn * 997 / 1000;
    
    // æ ¸å¿ƒå…¬å¼ï¼š (x + Î”x) * (y - Î”y) = k
    // æ¨å¯¼å¾—å‡º Î”y = (y * Î”x') / (x + Î”x')  å…¶ä¸­ Î”x' æ˜¯æ‰£è´¹åçš„è¾“å…¥
    uint256 amountBOut = reserveB * amountAInWithFee / (reserveA + amountAInWithFee);

    require(amountBOut &gt;= minBOut, "Slippage too high");

    // ... æ‰§è¡Œè½¬è´¦å’Œæ›´æ–°å‚¨å¤‡é‡
    reserveA += amountAIn; // æ³¨æ„ï¼šæ€»å‚¨å¤‡é‡å¢åŠ çš„æ˜¯å…¨éƒ¨è¾“å…¥
    reserveB -= amountBOut;
    // ...
}
</code></pre>
<blockquote>
<p><strong>æ€è€ƒ</strong>: ä¸ºä»€ä¹ˆ<code>reserveA</code>å¢åŠ çš„æ˜¯<code>amountAIn</code>è€Œä¸æ˜¯<code>amountAInWithFee</code>ï¼Ÿå› ä¸ºæ‰‹ç»­è´¹ç•™åœ¨äº†æ± å­é‡Œï¼Œæˆä¸ºäº†æµåŠ¨æ€§çš„ä¸€éƒ¨åˆ†ï¼Œå¢åŠ äº†<code>k</code>å€¼ï¼Œä»è€Œè®©LPä»¬è·åˆ©ã€‚</p>
</blockquote>
<h5 data-id="heading-6">3. å·¥å‚æ¨¡å¼ (<code>MiniDexFactory</code>)</h5>
<p>ä¸€ä¸ªDEXéœ€è¦æ”¯æŒæˆåƒä¸Šä¸‡çš„äº¤æ˜“å¯¹ã€‚æ‰‹åŠ¨ä¸ºæ¯ä¸ªäº¤æ˜“å¯¹éƒ¨ç½²ä¸€ä¸ªåˆçº¦æ˜¯ä¸ç°å®çš„ã€‚<strong>å·¥å‚åˆçº¦</strong>åº”è¿è€Œç”Ÿï¼Œå®ƒå¯ä»¥åŠ¨æ€åœ°åˆ›å»ºå’Œç®¡ç†æ‰€æœ‰çš„äº¤æ˜“å¯¹åˆçº¦ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">// MiniDexFactory.sol
contract MiniDexFactory is Ownable {
    // è®°å½•æ‰€æœ‰å·²åˆ›å»ºçš„äº¤æ˜“å¯¹
    mapping(address =&gt; mapping(address =&gt; address)) public getPair;
    address[] public allPairs;

    function createPair(address _tokenA, address _tokenB) external onlyOwner returns (address pair) {
        // ... çœç•¥éªŒè¯é€»è¾‘
        
        // ä¸ºäº†é¿å… (A,B) å’Œ (B,A) åˆ›å»ºå‡ºä¸¤ä¸ªä¸åŒçš„åˆçº¦ï¼Œæˆ‘ä»¬è¿›è¡Œåœ°å€æ’åº
        (address token0, address token1) = _tokenA &lt; _tokenB ? (_tokenA, _tokenB) : (_tokenB, _tokenA);

        // ä½¿ç”¨ `new` å…³é”®å­—åˆ›å»ºæ–°çš„äº¤æ˜“å¯¹åˆçº¦
        pair = address(new MiniDexPair(token0, token1));
        
        // è®°å½•æ–°åˆ›å»ºçš„äº¤æ˜“å¯¹
        getPair[token0][token1] = pair;
        getPair[token1][token0] = pair; // ä¸¤ä¸ªæ–¹å‘éƒ½è®°å½•ï¼Œæ–¹ä¾¿æŸ¥è¯¢
        allPairs.push(pair);
        
        emit PairCreated(token0, token1, pair, allPairs.length - 1);
    }
}
</code></pre>
<h4 data-id="heading-7">å°ç»“</h4>
<p>AMMå’Œå·¥å‚æ¨¡å¼æ˜¯DeFiå¯ç»„åˆæ€§çš„å…¸èŒƒã€‚é€šè¿‡å®ƒä»¬ï¼Œæˆ‘ä»¬ç†è§£äº†ï¼š</p>
<ul>
<li><strong>ç®—æ³•å¦‚ä½•å–ä»£ä¼ ç»Ÿé‡‘èä¸­ä»‹</strong>ï¼Œå®ç°å»ä¸­å¿ƒåŒ–äº¤æ˜“ã€‚</li>
<li><strong>æµåŠ¨æ€§æä¾›è€…å’Œäº¤æ˜“è€…ä¹‹é—´çš„ç»æµæ¿€åŠ±æ¨¡å‹</strong>ã€‚</li>
<li><strong>å·¥å‚è®¾è®¡æ¨¡å¼</strong>å¦‚ä½•è®©ä¸€ä¸ªåè®®æ— é™æ‰©å±•ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">ğŸŒ¾ äºŒã€æ”¶ç›Šå†œåœºï¼ˆYieldFarmingï¼‰ï¼šè®©ä½ çš„èµ„äº§â€œç”Ÿæ¯â€</h3>
<p>å¦‚æœè¯´AMMæ˜¯äº¤æ˜“å¼•æ“ï¼Œé‚£ä¹ˆæ”¶ç›Šå†œåœºå°±æ˜¯DeFiçš„å¢é•¿æ¿€ç´ ã€‚é¡¹ç›®æ–¹é€šè¿‡å®ƒæ¥æ¿€åŠ±ç”¨æˆ·æä¾›æµåŠ¨æ€§æˆ–é”å®šä»£å¸ï¼Œç”¨æˆ·åˆ™é€šè¿‡â€œè€•ä½œâ€æ¥èµšå–å›æŠ¥ã€‚</p>
<p>å…¶æ ¸å¿ƒåœ¨äº<strong>å…¬å¹³åœ°åˆ†é…å¥–åŠ±</strong>ï¼Œé€šå¸¸ä¸ç”¨æˆ·<strong>è´¨æŠ¼çš„é‡‘é¢</strong>å’Œ<strong>è´¨æŠ¼çš„æ—¶é•¿</strong>æˆæ­£æ¯”ã€‚</p>
<h4 data-id="heading-9">æ ¸å¿ƒè®¾è®¡ï¼šæ—¶é—´åŠ æƒçš„å¥–åŠ±è®¡ç®—</h4>
<p>ç®€å•ç²—æš´åœ°æŒ‰æ¯”ä¾‹åˆ†é…å¥–åŠ±æ˜¯ä¸å…¬å¹³çš„ï¼Œå› ä¸ºå®ƒå¿½ç•¥äº†æ—¶é—´ç»´åº¦ã€‚ä¸€ä¸ªè´¨æŠ¼äº†1000ä»£å¸1å¤©çš„ç”¨æˆ·ï¼Œå’Œä¸€ä¸ªè´¨æŠ¼100ä»£å¸10å¤©çš„ç”¨æˆ·ï¼Œè´¡çŒ®å¯èƒ½ç›¸ä¼¼ã€‚<code>YieldFarming</code>åˆçº¦é€šè¿‡<code>updateRewards</code>å‡½æ•°å®Œç¾åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">// YieldFarming.sol
contract YieldFarming is ReentrancyGuard {
    // ...
    uint256 public rewardRatePerSecond; // æ¯ç§’é’Ÿæ€»å…±åˆ†å‘å¤šå°‘å¥–åŠ±
    uint8 public stakingTokenDecimals; // è´¨æŠ¼ä»£å¸çš„ç²¾åº¦
    
    struct StakerInfo {
        uint256 stakedAmount; // è´¨æŠ¼æ•°é‡
        uint256 rewardDebt;   // å·²ç´¯è®¡ä½†æœªé¢†å–çš„å¥–åŠ±
        uint256 lastUpdate;   // ä¸Šæ¬¡æ›´æ–°å¥–åŠ±çš„æ—¶é—´æˆ³
    }

    mapping(address =&gt; StakerInfo) public stakers;

    // å†…éƒ¨å‡½æ•°ï¼Œåœ¨æ¯æ¬¡ç”¨æˆ·æ“ä½œï¼ˆè´¨æŠ¼ã€å–å›ã€é¢†å–ï¼‰å‰è°ƒç”¨
    function updateRewards(address user) internal {
        StakerInfo storage staker = stakers[user];

        if (staker.stakedAmount &gt; 0) {
            // 1. è®¡ç®—æ—¶é—´å·®
            uint256 timeDiff = block.timestamp - staker.lastUpdate;
            
            // 2. è€ƒè™‘ä»£å¸ç²¾åº¦ï¼Œè®¡ç®—å¥–åŠ±ä¹˜æ•°
            uint256 rewardMultiplier = 10 ** stakingTokenDecimals;
            
            // 3. è®¡ç®—è¿™æ®µæ—¶é—´åº”å¾—çš„å¥–åŠ±
            // å…¬å¼ï¼šæ—¶é•¿ * æ¯ç§’å¥–åŠ±ç‡ * ä¸ªäººè´¨æŠ¼é‡ / æ€»è´¨æŠ¼é‡ (è¿™é‡Œç®€åŒ–ä¸ºä¸ä¸ªäººè´¨æŠ¼é‡æˆæ­£æ¯”)
            uint256 pendingReward = (timeDiff * rewardRatePerSecond * staker.stakedAmount) / rewardMultiplier;
            
            // 4. ç´¯åŠ åˆ°ç”¨æˆ·çš„å¥–åŠ±å€ºåŠ¡ä¸­
            staker.rewardDebt += pendingReward;
        }

        // 5. æ›´æ–°æœ€åæ›´æ–°æ—¶é—´
        staker.lastUpdate = block.timestamp;
    }
    // ...
}
</code></pre>
<p>æ¯æ¬¡ç”¨æˆ·<code>stake</code>, <code>unstake</code>æˆ–<code>claimRewards</code>æ—¶ï¼Œæˆ‘ä»¬éƒ½å…ˆè°ƒç”¨<code>updateRewards</code>ï¼Œç»“æ¸…ä»–åˆ°å½“å‰æ—¶é—´ç‚¹çš„æ‰€æœ‰æ”¶ç›Šï¼Œå­˜å…¥<code>rewardDebt</code>ã€‚è¿™æ ·ï¼Œæ— è®ºä»–æ¥ä¸‹æ¥åšä»€ä¹ˆæ“ä½œï¼Œä¹‹å‰çš„æ”¶ç›Šéƒ½ä¸ä¼šä¸¢å¤±ï¼Œä¿è¯äº†å…¬å¹³æ€§ã€‚</p>
<h4 data-id="heading-10">å°ç»“</h4>
<p>æ”¶ç›Šå†œåœºåˆçº¦æ•™ä¼šæˆ‘ä»¬ï¼š</p>
<ul>
<li><strong>å¦‚ä½•è®¾è®¡ä¸€ä¸ªä¸æ—¶é—´å’Œé‡‘é¢éƒ½ç›¸å…³çš„å¤æ‚å¥–åŠ±ç³»ç»Ÿ</strong>ã€‚</li>
<li><strong>å†…éƒ¨å‡½æ•° (<code>internal</code>) åœ¨çŠ¶æ€å˜æ›´å‰ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§çš„é‡è¦æ€§</strong>ã€‚</li>
<li><strong>å¤„ç†ä¸åŒä»£å¸ç²¾åº¦</strong>åœ¨DeFiæ•°å­¦è®¡ç®—ä¸­çš„æ™®éæ€§å’Œå¿…è¦æ€§ã€‚</li>
</ul>
<hr/>
<p>##ğŸ›ï¸ ä¸‰ã€å»ä¸­å¿ƒåŒ–æ²»ç†ï¼ˆDAOï¼‰ï¼šä»£ç å³æ³•å¾‹ï¼Œç¤¾åŒºå…±æ²»</p>
<p>å½“ä¸€ä¸ªé¡¹ç›®è¶³å¤Ÿå»ä¸­å¿ƒåŒ–æ—¶ï¼Œè°æ¥å†³å®šå®ƒçš„æœªæ¥ï¼Ÿç­”æ¡ˆæ˜¯<strong>DAO (Decentralized Autonomous Organization)</strong>ã€‚DAOé€šè¿‡æ™ºèƒ½åˆçº¦å°†æ²»ç†è§„åˆ™ç¼–ç ï¼Œè®©ä»£å¸æŒæœ‰è€…é€šè¿‡æŠ•ç¥¨æ¥å†³å®šä¸€åˆ‡ï¼Œä»åè®®å‚æ•°ä¿®æ”¹åˆ°å›½åº“èµ„é‡‘ä½¿ç”¨ã€‚</p>
<p><code>DecentralisedGovernance</code>åˆçº¦æ˜¯ä¸€ä¸ªéº»é›€è™½å°äº”è„ä¿±å…¨çš„DAOå®ç°ã€‚</p>
<h4 data-id="heading-11">è¶…è¶Šç®€å•æŠ•ç¥¨çš„æ ¸å¿ƒæœºåˆ¶</h4>
<ol>
<li>
<p><strong>ä»£å¸åŠ æƒæŠ•ç¥¨</strong>: ä½ çš„æŠ•ç¥¨æƒé‡å–å†³äºä½ æŒæœ‰çš„æ²»ç†ä»£å¸æ•°é‡ã€‚ä¸€å¸ä¸€ç¥¨ï¼Œè€Œéä¸€äººä¸€ç¥¨ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">// DecentralisedGovernance.sol
function vote(uint256 proposalId, bool support) external {
    // ...
    // æŠ•ç¥¨æƒé‡ = ç”¨æˆ·æŒæœ‰çš„æ²»ç†ä»£å¸ä½™é¢
    uint256 weight = governanceToken.balanceOf(msg.sender);

    if (support) {
        proposal.votesFor += weight;
    } else {
        proposal.votesAgainst += weight;
    }
    // ...
}
</code></pre>
</li>
<li>
<p><strong>ææ¡ˆæŠ¼é‡‘ (<code>proposalDeposit</code>)</strong>: ä¸ºäº†é˜²æ­¢åƒåœ¾ææ¡ˆï¼Œå‘èµ·äººéœ€è¦æŠµæŠ¼ä¸€å®šæ•°é‡çš„ä»£å¸ã€‚åªæœ‰å½“ææ¡ˆé€šè¿‡å¹¶æˆåŠŸæ‰§è¡Œåï¼ŒæŠ¼é‡‘æ‰ä¼šè¢«é€€è¿˜ã€‚</p>
</li>
<li>
<p><strong>æ³•å®šäººæ•° (<code>Quorum</code>)</strong>: ææ¡ˆä¸ä»…è¦è·å¾—å¤šæ•°ç¥¨ï¼Œæ€»æŠ•ç¥¨æ•°è¿˜å¿…é¡»è¾¾åˆ°ä¸€ä¸ªæœ€ä½é—¨æ§›ï¼ˆå¦‚æ€»ä»£å¸ä¾›åº”é‡çš„5%ï¼‰ã€‚è¿™å¯ä»¥é˜²æ­¢å°‘æ•°å·¨é²¸åœ¨ç¤¾åŒºæ™®éä¸å…³å¿ƒçš„æƒ…å†µä¸‹è½»æ˜“é€šè¿‡ææ¡ˆã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">function finalizeProposal(uint256 proposalId) external {
    // ...
    uint256 totalSupply = governanceToken.totalSupply();
    uint256 totalVotes = proposal.votesFor + proposal.votesAgainst;
    uint256 quorumNeeded = (totalSupply * quorumPercentage) / 100;

    if (totalVotes &gt;= quorumNeeded &amp;&amp; proposal.votesFor &gt; proposal.votesAgainst) {
        // ææ¡ˆé€šè¿‡ï¼Œè¿›å…¥æ—¶é—´é”
        // ...
    } else {
        // ææ¡ˆå¤±è´¥
        // ...
    }
}
</code></pre>
</li>
<li>
<p><strong>æ—¶é—´é” (<code>Timelock</code>)</strong>: å³ä½¿ææ¡ˆé€šè¿‡ï¼Œä¹Ÿä¸ä¼šç«‹å³æ‰§è¡Œã€‚å®ƒä¼šè¿›å…¥ä¸€ä¸ªâ€œæ—¶é—´é”â€ç­‰å¾…æœŸã€‚è¿™ç»™äº†ç¤¾åŒºæˆå‘˜æœ€åååº”çš„æ—¶é—´â€”â€”å¦‚æœä»–ä»¬å¼ºçƒˆåå¯¹è¿™ä¸ªææ¡ˆï¼Œä»–ä»¬å¯ä»¥åœ¨æ‰§è¡Œå‰å–æ‰ä»£å¸æˆ–é‡‡å–å…¶ä»–è¡ŒåŠ¨ã€‚</p>
</li>
<li>
<p><strong>é“¾ä¸Šæ‰§è¡Œ (<code>executeProposal</code>)</strong>: æ—¶é—´é”ç»“æŸåï¼Œä»»ä½•äººéƒ½å¯ä»¥è°ƒç”¨<code>executeProposal</code>å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¼š<strong>è‡ªåŠ¨æ‰§è¡Œ</strong>ææ¡ˆä¸­å®šä¹‰çš„æ“ä½œï¼Œæ¯”å¦‚è°ƒç”¨å¦ä¸€ä¸ªåˆçº¦çš„å‡½æ•°ã€è½¬ç§»èµ„é‡‘ç­‰ã€‚è¿™æ˜¯DAOæœ€å¼ºå¤§çš„åœ°æ–¹â€”â€”å†³è®®çš„æ‰§è¡Œæ˜¯æ— éœ€è®¸å¯å’Œè‡ªåŠ¨çš„ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">function executeProposal(uint256 proposalId) external nonReentrant {
    // ...
    // éå†ææ¡ˆä¸­å®šä¹‰çš„æ‰€æœ‰ç›®æ ‡å’Œæ“ä½œ
    for (uint256 i = 0; i &lt; proposal.executionTargets.length; i++) {
        // æ ¸å¿ƒï¼šä½¿ç”¨åº•å±‚çš„ .call() æ–¹æ³•æ‰§è¡Œä»»æ„æ“ä½œ
        (bool success, ) = proposal.executionTargets[i].call(proposal.executionData[i]);
        require(success, "Execution failed");
    }
    // ... é€€è¿˜æŠ¼é‡‘
}
</code></pre>
</li>
</ol>
<h4 data-id="heading-12">å°ç»“</h4>
<p>DAOçš„æ„å»ºè®©æˆ‘ä»¬è§¦æ‘¸åˆ°äº†Web3çš„çµé­‚ï¼š</p>
<ul>
<li><strong>å°†å¤æ‚çš„æ²»ç†è§„åˆ™ä»£ç åŒ–</strong>ï¼Œå®ç°çœŸæ­£çš„â€œä»£ç å³æ³•å¾‹â€ã€‚</li>
<li><strong>ç†è§£äº†<code>Quorum</code>ã€<code>Timelock</code>ç­‰æœºåˆ¶åœ¨å»ä¸­å¿ƒåŒ–ç³»ç»Ÿé£é™©æ§åˆ¶ä¸­çš„é‡è¦ä½œç”¨</strong>ã€‚</li>
<li><strong>æŒæ¡äº†é€šè¿‡<code>.call()</code>å®ç°åˆçº¦é—´é€šç”¨äº¤äº’çš„å¼ºå¤§èƒ½åŠ›</strong>ã€‚</li>
</ul>
<h3 data-id="heading-13">æœ€ç»ˆæ€»ç»“</h3>
<p>ä»ä¸Šç¯‡çš„å®ç”¨å·¥å…·åˆ°ä¸‹ç¯‡çš„DeFiå¼•æ“ï¼Œæˆ‘ä»¬äº²æ‰‹æ„å»ºäº†Web3ä¸–ç•Œçš„æ ¸å¿ƒç»„ä»¶ã€‚æˆ‘ä»¬å‘ç°ï¼Œé‚£äº›çœ‹ä¼¼é«˜æ·±è«æµ‹çš„DeFiåè®®å’ŒDAOç»„ç»‡ï¼Œå…¶åº•å±‚éƒ½æ˜¯ç”±è¿™äº›æ¸…æ™°ã€æ¨¡å—åŒ–çš„æ™ºèƒ½åˆçº¦â€œä¹é«˜â€ç§¯æœ¨æ­å»ºè€Œæˆçš„ã€‚</p>
<p>â€œ30å¤©ç²¾é€šSolidityâ€çš„æ—…ç¨‹å¯èƒ½å³å°†ç»“æŸï¼Œä½†çœŸæ­£çš„å¼€å‘è€…ä¹‹è·¯æ‰åˆšåˆšå¼€å§‹ã€‚å¸Œæœ›è¿™ä¸¤ç¯‡æ–‡ç« èƒ½æˆä¸ºä½ æ¢ç´¢Web3ä¸›æ—çš„ä¸€ä»½åœ°å›¾ã€‚ä¸æ–­å­¦ä¹ ï¼Œä¸æ–­æ„å»ºï¼Œæœªæ¥åœ¨ä½ æ‰‹ä¸­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Solidity ç¬¬å››å‘¨ ï¼ˆä¸Šï¼‰ ï¼šæ„å»ºWeb3åº”ç”¨çš„åŸºçŸ³â€”â€”æ™ºèƒ½åˆçº¦æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7571334572769181739</link>    <guid>https://juejin.cn/post/7571334572769181739</guid>    <pubDate>2025-11-12T01:23:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571334572769181739" data-draft-id="7571299394346450986" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Solidity ç¬¬å››å‘¨ ï¼ˆä¸Šï¼‰ ï¼šæ„å»ºWeb3åº”ç”¨çš„åŸºçŸ³â€”â€”æ™ºèƒ½åˆçº¦æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="Solidity"/> <meta itemprop="datePublished" content="2025-11-12T01:23:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="cainiaoeba"/> <meta itemprop="url" content="https://juejin.cn/user/4302806371543898"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Solidity ç¬¬å››å‘¨ ï¼ˆä¸Šï¼‰ ï¼šæ„å»ºWeb3åº”ç”¨çš„åŸºçŸ³â€”â€”æ™ºèƒ½åˆçº¦æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4302806371543898/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    cainiaoeba
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T01:23:44.000Z" title="Wed Nov 12 2025 01:23:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Solidity ç¬¬å››å‘¨ ï¼ˆä¸Šï¼‰ ï¼šæ„å»ºWeb3åº”ç”¨çš„åŸºçŸ³â€”â€”æ™ºèƒ½åˆçº¦æ·±åº¦è§£æ</h2>
<p>ä½ å¥½ï¼Œæ˜é‡‘çš„å¼€å‘è€…ä»¬ï¼</p>
<p>åœ¨Web3çš„ä¸–ç•Œé‡Œï¼Œæ™ºèƒ½åˆçº¦æ˜¯æ„å»ºä¸€åˆ‡ä¿¡ä»»å’Œä»·å€¼çš„åŸºçŸ³ã€‚å®ƒä»¬ä¸ä»…ä»…æ˜¯ä»£ç ï¼Œæ›´æ˜¯ä¸€ç§å°†è§„åˆ™å’Œé€»è¾‘åˆ»åœ¨åŒºå—é“¾ä¸Šã€æ°¸ä¸å¯ç¯¡æ”¹çš„æ‰¿è¯ºã€‚åœ¨â€œ30å¤©ç²¾é€šSolidityâ€çš„å­¦ä¹ æ—…ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»ç†è®ºèµ°å‘å®è·µï¼Œäº²æ‰‹æ„å»ºäº†å¤šä¸ªçœŸå®ä¸–ç•Œçš„åº”ç”¨åœºæ™¯ã€‚</p>
<p>åœ¨è¿™ç¯‡æ–‡ç« ï¼ˆä¸Šç¯‡ï¼‰ä¸­ï¼Œæˆ‘å°†å¸¦ä½ å›é¡¾ä¸¤ä¸ªæœ€åŸºç¡€ä¹Ÿæ˜¯æœ€å®ç”¨çš„æ™ºèƒ½åˆçº¦ï¼š<strong>å»ä¸­å¿ƒåŒ–æ‰˜ç®¡åˆçº¦</strong>å’Œ<strong>NFTå¸‚åœºåˆçº¦</strong>ã€‚æˆ‘ä»¬å°†ä¸€èµ·å‰–æå®ƒä»¬çš„è®¾è®¡å“²å­¦ã€æ ¸å¿ƒé€»è¾‘å’Œä»£ç å®ç°ï¼Œç†è§£å¦‚ä½•ç”¨Solidityè§£å†³ç°å®ä¸–ç•Œä¸­çš„ä¿¡ä»»é—®é¢˜ã€‚</p>
<h3 data-id="heading-1">ğŸ” ä¸€ã€å»ä¸­å¿ƒåŒ–æ‰˜ç®¡ï¼ˆDecentralisedEscrowï¼‰ï¼šç”¨ä»£ç é‡å¡‘ä¿¡ä»»</h3>
<p>åœ¨ä»»ä½•äº¤æ˜“ä¸­ï¼Œå°¤å…¶æ˜¯çº¿ä¸Šäº¤æ˜“ï¼Œä¿¡ä»»éƒ½æ˜¯æœ€å¤§çš„éš¾é¢˜ã€‚ä¹°å®¶æ€•ä»˜æ¬¾åæ”¶ä¸åˆ°è´§ï¼Œå–å®¶æ€•å‘è´§åæ”¶ä¸åˆ°æ¬¾ã€‚ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆæ˜¯å¼•å…¥ä¸€ä¸ªä¸­å¿ƒåŒ–çš„â€œä¸­é—´äººâ€ï¼Œå¦‚æ”¯ä»˜å®æˆ–PayPalã€‚ä½†åœ¨Web3ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä»£ç åˆ›é€ ä¸€ä¸ªæ— éœ€ä¿¡ä»»ä»»ä½•ç¬¬ä¸‰æ–¹ã€å®Œå…¨è‡ªåŠ¨æ‰§è¡Œçš„ä¸­é—´äººã€‚</p>
<p><code>EnhancedSimpleEscrow</code>åˆçº¦å°±æ˜¯è¿™æ ·ä¸€ä¸ªå®Œç¾çš„ä¾‹å­ã€‚</p>
<h4 data-id="heading-2">æ ¸å¿ƒè®¾è®¡æ€æƒ³</h4>
<p>è¿™ä¸ªåˆçº¦çš„æ ¸å¿ƒåœ¨äº**çŠ¶æ€æœºï¼ˆState Machineï¼‰**çš„è®¾è®¡ã€‚æ•´ä¸ªæ‰˜ç®¡æµç¨‹è¢«ç²¾ç¡®åœ°å®šä¹‰ä¸ºå‡ ä¸ªçŠ¶æ€ï¼Œå¹¶ä¸”åˆçº¦çš„è¡Œä¸ºä¸¥æ ¼å—é™äºå½“å‰çš„çŠ¶æ€ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨<code>enum</code>æ¥å®šä¹‰è¿™äº›çŠ¶æ€ï¼Œè¿™è®©ä»£ç é€»è¾‘æ¸…æ™°ä¸”å®‰å…¨ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

contract EnhancedSimpleEscrow {
    // ä½¿ç”¨æšä¸¾æ¸…æ™°åœ°å®šä¹‰æ‰˜ç®¡æµç¨‹çš„æ¯ä¸€æ­¥
    enum EscrowState { 
        AWAITING_PAYMENT,   // ç­‰å¾…ä»˜æ¬¾
        AWAITING_DELIVERY,  // ç­‰å¾…å‘è´§/ç¡®è®¤æ”¶è´§
        COMPLETE,           // å®Œæˆ
        DISPUTED,           // äº‰è®®ä¸­
        CANCELLED           // å·²å–æ¶ˆ
    }

    EscrowState public state; // åˆçº¦å½“å‰çš„çŠ¶æ€

    // ... å…¶ä»–å˜é‡
}
</code></pre>
<h4 data-id="heading-3">å…³é”®è§’è‰²ä¸æµç¨‹</h4>
<p>åˆçº¦ä¸­æœ‰ä¸‰ä¸ªå…³é”®è§’è‰²ï¼Œåœ¨éƒ¨ç½²æ—¶å°±å·²ç¡®å®šä¸”ä¸å¯æ›´æ”¹ï¼ˆ<code>immutable</code>ï¼‰ï¼Œä¿è¯äº†åˆçº¦çš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">    address public immutable buyer;   // ä¹°å®¶ (éƒ¨ç½²è€…)
    address public immutable seller;  // å–å®¶
    address public immutable arbiter; // ä»²è£å‘˜
</code></pre>
<h5 data-id="heading-4">1. æ­£å¸¸æµç¨‹ï¼šâ€œå¿«ä¹è·¯å¾„â€ (Happy Path)</h5>
<ol>
<li>
<p><strong>ä¹°å®¶å­˜æ¬¾ (<code>deposit</code>)</strong>: ä¹°å®¶è°ƒç”¨<code>deposit</code>å‡½æ•°ï¼Œå°†çº¦å®šé‡‘é¢çš„ETHé”å…¥åˆçº¦ã€‚æ­¤æ—¶ï¼Œåˆçº¦çŠ¶æ€ä»<code>AWAITING_PAYMENT</code>å˜ä¸º<code>AWAITING_DELIVERY</code>ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">function deposit() external payable {
    // åªæœ‰ä¹°å®¶å¯ä»¥å­˜æ¬¾ï¼Œä¸”åªèƒ½åœ¨ç­‰å¾…ä»˜æ¬¾çŠ¶æ€ä¸‹è¿›è¡Œ
    require(msg.sender == buyer, "Only buyer can deposit");
    require(state == EscrowState.AWAITING_PAYMENT, "Already paid");
    require(msg.value &gt; 0, "Amount must be greater than zero");

    amount = msg.value;
    state = EscrowState.AWAITING_DELIVERY;
    depositTime = block.timestamp; // è®°å½•å­˜æ¬¾æ—¶é—´ï¼Œä¸ºè¶…æ—¶é€»è¾‘åšå‡†å¤‡
    emit PaymentDeposited(buyer, amount);
}
</code></pre>
</li>
<li>
<p><strong>ä¹°å®¶ç¡®è®¤æ”¶è´§ (<code>confirmDelivery</code>)</strong>: ä¹°å®¶æ”¶åˆ°å•†å“æˆ–æœåŠ¡åï¼Œè°ƒç”¨æ­¤å‡½æ•°ã€‚åˆçº¦å°†æ¬¾é¡¹è½¬ç»™å–å®¶ï¼ŒçŠ¶æ€å˜ä¸º<code>COMPLETE</code>ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">function confirmDelivery() external {
    require(msg.sender == buyer, "Only buyer can confirm");
    require(state == EscrowState.AWAITING_DELIVERY, "Not in delivery state");

    state = EscrowState.COMPLETE;
    payable(seller).transfer(amount); // å°†èµ„é‡‘è½¬ç»™å–å®¶
    emit DeliveryConfirmed(buyer, seller, amount);
}
</code></pre>
</li>
</ol>
<h5 data-id="heading-5">2. å¼‚å¸¸å¤„ç†ï¼šäº‰è®®ä¸è¶…æ—¶</h5>
<p>Web3çš„è®¾è®¡å¿…é¡»è€ƒè™‘åˆ°æœ€åçš„æƒ…å†µã€‚å¦‚æœäº¤æ˜“å‡ºç°é—®é¢˜æ€ä¹ˆåŠï¼Ÿ</p>
<ul>
<li>
<p><strong>å‘èµ·äº‰è®® (<code>raiseDispute</code>)</strong>: åœ¨<code>AWAITING_DELIVERY</code>çŠ¶æ€ä¸‹ï¼Œä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥å‘èµ·äº‰è®®ï¼Œå°†çŠ¶æ€åˆ‡æ¢ä¸º<code>DISPUTED</code>ã€‚æ­¤æ—¶èµ„é‡‘è¢«å†»ç»“ï¼Œç­‰å¾…ä»²è£å‘˜ä»‹å…¥ã€‚</p>
</li>
<li>
<p><strong>ä»²è£è§£å†³ (<code>resolveDispute</code>)</strong>: åªæœ‰<code>arbiter</code>å¯ä»¥è°ƒç”¨æ­¤å‡½æ•°ã€‚ä»²è£å‘˜æ ¹æ®é“¾ä¸‹è¯æ®åˆ¤æ–­ï¼Œå†³å®šå°†èµ„é‡‘é‡Šæ”¾ç»™ä¹°å®¶è¿˜æ˜¯å–å®¶ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">function resolveDispute(bool _releaseToSeller) external {
    require(msg.sender == arbiter, "Only arbiter can resolve");
    require(state == EscrowState.DISPUTED, "No dispute to resolve");

    state = EscrowState.COMPLETE;
    if (_releaseToSeller) {
        payable(seller).transfer(amount);
        emit DisputeResolved(arbiter, seller, amount);
    } else {
        payable(buyer).transfer(amount);
        emit DisputeResolved(arbiter, buyer, amount);
    }
}
</code></pre>
</li>
<li>
<p><strong>è¶…æ—¶å–æ¶ˆ (<code>cancelAfterTimeout</code>)</strong>: ä¸ºäº†ä¿æŠ¤ä¹°å®¶ï¼Œé˜²æ­¢èµ„é‡‘è¢«æ— é™æœŸé”å®šï¼Œæˆ‘ä»¬å¼•å…¥äº†è¶…æ—¶æœºåˆ¶ã€‚å¦‚æœåœ¨<code>depositTime</code>ä¹‹åè¶…è¿‡äº†é¢„è®¾çš„<code>deliveryTimeout</code>æ—¶é—´ï¼Œä¹°å®¶å°±å¯ä»¥å•æ–¹é¢å–æ¶ˆäº¤æ˜“å¹¶å–å›èµ„é‡‘ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">function cancelAfterTimeout() external {
    require(msg.sender == buyer, "Only buyer can trigger timeout cancellation");
    require(state == EscrowState.AWAITING_DELIVERY, "Cannot cancel in current state");
    // æ ¸å¿ƒé€»è¾‘ï¼šå½“å‰æ—¶é—´æ˜¯å¦å·²ç»è¶…è¿‡äº†å­˜æ¬¾æ—¶é—´+è¶…æ—¶æ—¶é•¿
    require(block.timestamp &gt;= depositTime + deliveryTimeout, "Timeout not reached");

    state = EscrowState.CANCELLED;
    payable(buyer).transfer(address(this).balance); // é€€æ¬¾
    emit EscrowCancelled(buyer);
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-6">å°ç»“</h4>
<p>é€šè¿‡æ‰˜ç®¡åˆçº¦ï¼Œæˆ‘ä»¬å­¦ä¼šäº†ï¼š</p>
<ul>
<li><strong>ä½¿ç”¨<code>enum</code>è¿›è¡Œç²¾ç»†çš„çŠ¶æ€ç®¡ç†</strong>ï¼Œè¿™æ˜¯ç¼–å†™å®‰å…¨ã€å¯é¢„æµ‹åˆçº¦çš„å…³é”®ã€‚</li>
<li><strong>åˆ©ç”¨<code>block.timestamp</code>å®ç°æ—¶é—´é”å®šå’Œè¶…æ—¶é€»è¾‘</strong>ã€‚</li>
<li><strong>è®¾è®¡å¤šæ–¹å‚ä¸å’Œæƒé™æ§åˆ¶</strong>ï¼Œæ˜ç¡®<code>buyer</code>, <code>seller</code>, <code>arbiter</code>å„è‡ªçš„èŒè´£ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">ğŸ–¼ï¸ äºŒã€NFTå¸‚åœºï¼ˆNFTMarketplaceï¼‰ï¼šæ„å»ºä½ çš„æ•°å­—è—å“äº¤æ˜“å¹³å°</h3>
<p>å¦‚æœè¯´æ‰˜ç®¡åˆçº¦æ˜¯å¤„ç†â€œåŒè´¨åŒ–â€ä»·å€¼ï¼ˆETHï¼‰çš„å·¥å…·ï¼Œé‚£ä¹ˆNFTå¸‚åœºå°±æ˜¯ä¸ºâ€œéåŒè´¨åŒ–â€ä»·å€¼ï¼ˆNFTï¼‰é‡èº«å®šåšçš„äº¤æ˜“å¹³å°ã€‚å®ƒåƒä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„OpenSeaï¼Œè®©ä»»ä½•äººéƒ½å¯ä»¥ä¸Šæ¶ã€è´­ä¹°å’Œå‡ºå”®ç‹¬ç‰¹çš„æ•°å­—èµ„äº§ã€‚</p>
<h4 data-id="heading-8">æ ¸å¿ƒæ•°æ®ç»“æ„</h4>
<p>ä¸€ä¸ªå¥½çš„å¸‚åœºï¼Œé¦–å…ˆè¦èƒ½æ¸…æ™°åœ°ç®¡ç†å•†å“ä¿¡æ¯ã€‚æˆ‘ä»¬ä½¿ç”¨<code>struct</code>æ¥å®šä¹‰æ¯ä¸€ä¸ªâ€œä¸Šæ¶å•†å“â€ï¼ˆListingï¼‰çš„æ•°æ®ç»“æ„ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">// ... imports
import "@openzeppelin/contracts/token/ERC721/IERC721.sol";
import "@openzeppelin/contracts/security/ReentrancyGuard.sol";

contract NFTMarketplace is ReentrancyGuard {
    struct Listing {
        address seller;         // å–å®¶åœ°å€
        address nftAddress;     // NFTåˆçº¦åœ°å€
        uint256 tokenId;        // NFTçš„ID
        uint256 price;          // ä»·æ ¼ (in wei)
        address royaltyReceiver;// ç‰ˆç¨æ¥æ”¶è€…
        uint256 royaltyPercent; // ç‰ˆç¨ç™¾åˆ†æ¯” (åŸºç‚¹)
        bool isListed;          // æ˜¯å¦æ­£åœ¨ä¸Šæ¶
    }
    
    // åµŒå¥—æ˜ å°„ï¼šnftåˆçº¦åœ°å€ -&gt; tokenId -&gt; Listingä¿¡æ¯
    mapping(address =&gt; mapping(uint256 =&gt; Listing)) public listings;
}
</code></pre>
<p>è¿™ä¸ªåµŒå¥—<code>mapping</code>éå¸¸å·§å¦™ï¼Œå®ƒå…è®¸æˆ‘ä»¬çš„å¸‚åœºæ”¯æŒæ¥è‡ª<strong>ä»»ä½•NFTåˆçº¦</strong>çš„<strong>ä»»ä½•tokenId</strong>ï¼Œæ‰©å±•æ€§æå¼ºã€‚</p>
<h4 data-id="heading-9">å…³é”®æµç¨‹è§£æ</h4>
<h5 data-id="heading-10">1. ä¸Šæ¶NFT (<code>listNFT</code>)</h5>
<p>ä¸Šæ¶çš„æ ¸å¿ƒæ˜¯<strong>æ‰€æœ‰æƒ</strong>å’Œ<strong>æˆæƒ</strong>çš„éªŒè¯ã€‚å–å®¶å¿…é¡»æ˜¯NFTçš„çœŸæ­£æ‰€æœ‰è€…ï¼Œå¹¶ä¸”å¿…é¡»æˆæƒå¸‚åœºåˆçº¦åœ¨æˆäº¤æ—¶å¯ä»¥è½¬ç§»è¯¥NFTã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">function listNFT(
    address nftAddress,
    uint256 tokenId,
    uint256 price,
    address royaltyReceiver,
    uint256 royaltyPercent
) external {
    require(price &gt; 0, "Price must be above zero");

    // å®ä¾‹åŒ–ä¸€ä¸ªIERC721æ¥å£ï¼Œä»¥ä¾¿ä¸NFTåˆçº¦äº¤äº’
    IERC721 nft = IERC721(nftAddress);
    
    // éªŒè¯1: è°ƒç”¨è€…å¿…é¡»æ˜¯NFTçš„æ‰€æœ‰è€…
    require(nft.ownerOf(tokenId) == msg.sender, "Not the owner");
    
    // éªŒè¯2: å¸‚åœºåˆçº¦å¿…é¡»è¢«æˆæƒè½¬ç§»è¿™ä¸ªNFT
    // å¯ä»¥æ˜¯å•æ¬¡æˆæƒ (getApproved) æˆ–å…¨å±€æˆæƒ (isApprovedForAll)
    require(
        nft.getApproved(tokenId) == address(this) || nft.isApprovedForAll(msg.sender, address(this)),
        "Marketplace not approved"
    );

    // åˆ›å»ºå¹¶å­˜å‚¨Listingä¿¡æ¯
    listings[nftAddress][tokenId] = Listing({
        seller: msg.sender,
        // ... å…¶ä»–ä¿¡æ¯
        isListed: true
    });

    emit Listed(msg.sender, nftAddress, tokenId, price, royaltyReceiver, royaltyPercent);
}
</code></pre>
<blockquote>
<p><strong>é‡ç‚¹</strong>: <code>approve</code>æˆ–<code>setApprovalForAll</code>æ˜¯ç”¨æˆ·ä¸DeFiæˆ–NFT DAppäº¤äº’å‰çš„æ ‡å‡†æ“ä½œã€‚ç”¨æˆ·æˆæƒDAppåœ¨ç‰¹å®šåœºæ™¯ä¸‹æ“ä½œè‡ªå·±çš„èµ„äº§ï¼Œè¿™æ˜¯Web3å®‰å…¨æ¨¡å‹çš„åŸºç¡€ã€‚</p>
</blockquote>
<h5 data-id="heading-11">2. è´­ä¹°NFT (<code>buyNFT</code>)</h5>
<p>è¿™æ˜¯å¸‚åœºçš„å¿ƒè„ã€‚å®ƒå¤„ç†èµ„é‡‘çš„æ¥æ”¶ã€åˆ†é…ï¼Œä»¥åŠNFTçš„è½¬ç§»ã€‚æ•´ä¸ªè¿‡ç¨‹å¿…é¡»æ˜¯<strong>åŸå­æ€§</strong>çš„ï¼Œå³è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">function buyNFT(address nftAddress, uint256 tokenId) external payable nonReentrant {
    Listing memory item = listings[nftAddress][tokenId];
    require(item.isListed, "Not listed");
    require(msg.value == item.price, "Incorrect ETH sent");

    // 1. è®¡ç®—è´¹ç”¨ï¼šç‰ˆç¨å’Œå¸‚åœºè´¹ (ä½¿ç”¨åŸºç‚¹ï¼Œé¿å…æµ®ç‚¹æ•°)
    uint256 feeAmount = (msg.value * marketplaceFeePercent) / 10000;
    uint256 royaltyAmount = (msg.value * item.royaltyPercent) / 10000;
    uint256 sellerAmount = msg.value - feeAmount - royaltyAmount;

    // 2. åˆ†é…èµ„é‡‘
    if (feeAmount &gt; 0) {
        payable(feeRecipient).transfer(feeAmount);
    }
    if (royaltyAmount &gt; 0 &amp;&amp; item.royaltyReceiver != address(0)) {
        payable(item.royaltyReceiver).transfer(royaltyAmount);
    }
    payable(item.seller).transfer(sellerAmount);

    // 3. è½¬ç§»NFTç»™ä¹°å®¶
    IERC721(item.nftAddress).safeTransferFrom(item.seller, msg.sender, item.tokenId);

    // 4. æ¸…ç†ä¸Šæ¶ä¿¡æ¯
    delete listings[nftAddress][tokenId];

    emit Purchase(...);
}
</code></pre>
<blockquote>
<p><strong>å®‰å…¨æç¤º</strong>: æ³¨æ„åˆ°<code>nonReentrant</code>ä¿®é¥°ç¬¦äº†å—ï¼Ÿå®ƒæ¥è‡ªOpenZeppelinçš„<code>ReentrancyGuard</code>ã€‚ç”±äºæ­¤å‡½æ•°æ¶‰åŠå¤šæ¬¡å¤–éƒ¨ETHè½¬è´¦ï¼Œä½¿ç”¨å®ƒå¯ä»¥æœ‰æ•ˆé˜²æ­¢â€œé‡å…¥æ”»å‡»â€ï¼Œç¡®ä¿åœ¨èµ„é‡‘åˆ†é…å®Œæˆå‰ï¼Œæ²¡æœ‰æ¶æ„åˆçº¦èƒ½é‡æ–°è¿›å…¥æ­¤å‡½æ•°é€ æˆèµ„é‡‘æŸå¤±ã€‚</p>
</blockquote>
<h4 data-id="heading-12">å°ç»“</h4>
<p>é€šè¿‡æ„å»ºNFTå¸‚åœºï¼Œæˆ‘ä»¬æŒæ¡äº†ï¼š</p>
<ul>
<li><strong>ä¸å¤–éƒ¨åˆçº¦ï¼ˆERC721ï¼‰çš„äº¤äº’æ–¹å¼</strong>ï¼Œè¿™æ˜¯æ„å»ºå¤æ‚DAppçš„å¿…å¤‡æŠ€èƒ½ã€‚</li>
<li><strong>ç‰ˆç¨å’Œæ‰‹ç»­è´¹ç­‰å¤æ‚èµ„é‡‘åˆ†é…é€»è¾‘</strong>çš„å®ç°ã€‚</li>
<li><strong>ä½¿ç”¨<code>struct</code>å’Œ<code>mapping</code>è®¾è®¡å¯æ‰©å±•çš„æ•°æ®æ¨¡å‹</strong>ã€‚</li>
<li><strong>è®¤è¯†åˆ°<code>ReentrancyGuard</code>ç­‰å®‰å…¨å·¥å…·çš„é‡è¦æ€§</strong>ã€‚</li>
</ul>
<h3 data-id="heading-13">æ€»ç»“</h3>
<p>ä»æ‰˜ç®¡åˆçº¦çš„çŠ¶æ€æœºåˆ°NFTå¸‚åœºçš„å¤šæ–¹äº¤äº’ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿæ„å»ºå‡ºè§£å†³å…·ä½“é—®é¢˜çš„ã€å®ç”¨çš„Web3åº”ç”¨ã€‚è¿™äº›åˆçº¦è™½ç„¶çœ‹ä¼¼ç®€å•ï¼Œä½†å®ƒä»¬è•´å«äº†æ™ºèƒ½åˆçº¦è®¾è®¡çš„æ ¸å¿ƒæ€æƒ³ï¼š<strong>çŠ¶æ€ç®¡ç†ã€æƒé™æ§åˆ¶ã€å®‰å…¨ç¬¬ä¸€ã€ä»¥åŠä¸å¤–éƒ¨ä¸–ç•Œçš„æ ‡å‡†åŒ–äº¤äº’</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBootå®æˆ˜é¿å‘æŒ‡å—ï¼šæˆ‘åœ¨å¾®æœåŠ¡é¡¹ç›®ä¸­æ€»ç»“çš„12æ¡é«˜æ•ˆå¼€å‘ç»éªŒ]]></title>    <link>https://juejin.cn/post/7571285984090144820</link>    <guid>https://juejin.cn/post/7571285984090144820</guid>    <pubDate>2025-11-12T00:16:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571285984090144820" data-draft-id="7571344319702450216" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBootå®æˆ˜é¿å‘æŒ‡å—ï¼šæˆ‘åœ¨å¾®æœåŠ¡é¡¹ç›®ä¸­æ€»ç»“çš„12æ¡é«˜æ•ˆå¼€å‘ç»éªŒ"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-12T00:16:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBootå®æˆ˜é¿å‘æŒ‡å—ï¼šæˆ‘åœ¨å¾®æœåŠ¡é¡¹ç›®ä¸­æ€»ç»“çš„12æ¡é«˜æ•ˆå¼€å‘ç»éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:16:53.000Z" title="Wed Nov 12 2025 00:16:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>SpringBootå®æˆ˜é¿å‘æŒ‡å—ï¼šæˆ‘åœ¨å¾®æœåŠ¡é¡¹ç›®ä¸­æ€»ç»“çš„12æ¡é«˜æ•ˆå¼€å‘ç»éªŒ</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>SpringBootä½œä¸ºJavaç”Ÿæ€ä¸­æœ€æµè¡Œçš„å¾®æœåŠ¡æ¡†æ¶ä¹‹ä¸€ï¼Œä»¥å…¶"çº¦å®šä¼˜äºé…ç½®"çš„ç†å¿µå’Œå¼ºå¤§çš„è‡ªåŠ¨åŒ–èƒ½åŠ›èµ¢å¾—äº†å¹¿å¤§å¼€å‘è€…çš„é’çã€‚ç„¶è€Œåœ¨å®é™…ä¼ä¸šçº§é¡¹ç›®ä¸­ï¼Œå°¤å…¶æ˜¯å¤æ‚çš„å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œå¼€å‘è€…ä»ç„¶ä¼šé‡åˆ°å„ç§æ„æƒ³ä¸åˆ°çš„"å‘"ã€‚æœ¬æ–‡åŸºäºç¬”è€…åœ¨å¤šä¸ªå¤§å‹å¾®æœåŠ¡é¡¹ç›®ä¸­çš„å®æˆ˜ç»éªŒï¼Œæ€»ç»“äº†12æ¡é«˜æ•ˆå¼€å‘çš„é»„é‡‘æ³•åˆ™ï¼Œæ¶µç›–é…ç½®ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–ã€å¼‚å¸¸å¤„ç†ç­‰å…³é”®é¢†åŸŸï¼Œå¸®åŠ©å¼€å‘è€…é¿å¼€å¸¸è§é™·é˜±ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€é…ç½®ç®¡ç†ç¯‡</h3>
<h4 data-id="heading-3">1. å¤šç¯å¢ƒé…ç½®çš„æ­£ç¡®æ‰“å¼€æ–¹å¼</h4>
<p>æ–°æ‰‹å¸¸çŠ¯çš„é”™è¯¯æ˜¯å°†ä¸åŒç¯å¢ƒçš„é…ç½®ç¡¬ç¼–ç åœ¨application.propertiesä¸­ã€‚æ›´ä¸“ä¸šçš„åšæ³•æ˜¯ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">profiles:</span>
    <span class="hljs-attr">active:</span> <span class="hljs-string">@activatedProperties@</span>
</code></pre>
<p>é…åˆMaven Profileå®ç°åŠ¨æ€åˆ‡æ¢ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">activeByDefault</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">activeByDefault</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">activatedProperties</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">activatedProperties</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
</code></pre>
<h4 data-id="heading-4">2. æ•æ„Ÿä¿¡æ¯çš„å®‰å…¨å¤„ç†</h4>
<p>æ°¸è¿œä¸è¦åœ¨ä»£ç åº“ä¸­æäº¤æ˜æ–‡å¯†ç ï¼æ¨èç»„åˆæ–¹æ¡ˆï¼š</p>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨Vaultæˆ–Kubernetes Secrets</li>
<li>å¼€å‘ç¯å¢ƒä½¿ç”¨JasyptåŠ å¯†ï¼š</li>
</ul>
<pre><code class="hljs language-properties" lang="properties"># åŠ å¯†åçš„é…ç½®ç¤ºä¾‹
db.password=ENC(AQICAHhML...)
</code></pre>
<h4 data-id="heading-5">3. Configuration Propertiesçš„éªŒè¯æŠ€å·§</h4>
<p>é¿å…ç®€å•çš„<code>@Value</code>æ³¨å…¥ï¼Œæ”¹ç”¨ç±»å‹å®‰å…¨çš„ç»‘å®šï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ConfigurationProperties(prefix = "app.mail")</span>
<span class="hljs-meta">@Validated</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MailProperties</span> {
    <span class="hljs-meta">@NotEmpty</span> <span class="hljs-keyword">private</span> String host;
    <span class="hljs-meta">@Min(1025)</span> <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;
}
</code></pre>
<p>é…åˆ<code>@EnableConfigurationProperties</code>å¯ç”¨ï¼ŒSpringBootä¼šè‡ªåŠ¨éªŒè¯å‚æ•°åˆæ³•æ€§ã€‚</p>
<h3 data-id="heading-6">äºŒã€æ€§èƒ½ä¼˜åŒ–ç¯‡</h3>
<h4 data-id="heading-7">4. å¯åŠ¨é€Ÿåº¦çš„æè‡´ä¼˜åŒ–</h4>
<p>å½“ä¾èµ–è¿‡å¤šå¯¼è‡´å¯åŠ¨ç¼“æ…¢æ—¶ï¼š</p>
<ol>
<li>ä½¿ç”¨SpringBootçš„Lazy Initializationæ¨¡å¼ï¼š</li>
</ol>
<pre><code class="hljs language-properties" lang="properties">spring.main.lazy-initialization=true
</code></pre>
<ol start="2">
<li>é€šè¿‡<code>spring-context-indexer</code>åŠ é€Ÿç»„ä»¶æ‰«æï¼š</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context-indexer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 data-id="heading-8">5. JPA/Hibernateçš„æ€§èƒ½é™·é˜±</h4>
<p>N+1æŸ¥è¯¢é—®é¢˜æ˜¯å¸¸è§æ€§èƒ½æ€æ‰‹ã€‚è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>Always JOIN FETCHå…³è”å¯¹è±¡ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@EntityGraph(attributePaths = "orders")</span>
List&lt;Customer&gt; <span class="hljs-title function_">findByActiveTrue</span><span class="hljs-params">()</span>;
</code></pre>
<ul>
<li>Batch Fetchingé…ç½®ï¼š</li>
</ul>
<pre><code class="hljs language-properties" lang="properties">spring.jpa.properties.hibernate.default_batch_fetch_size=20
</code></pre>
<h4 data-id="heading-9">6. Redisç¼“å­˜çš„æœ€ä½³å®è·µ</h4>
<p>é¿å…ç¼“å­˜ç©¿é€çš„ä¸‰é‡é˜²æŠ¤ï¼š</p>
<ol>
<li>Nullå€¼ç¼“å­˜ï¼š<code>cache-null-values: true</code></li>
<li>BloomFilterå‰ç½®è¿‡æ»¤</li>
<li>synchronizedæœ¬åœ°é”æ§åˆ¶å¹¶å‘é‡å»º</li>
</ol>
<h3 data-id="heading-10">ä¸‰ã€å¼‚å¸¸å¤„ç†ç¯‡</h3>
<h4 data-id="heading-11">7. RESTful APIçš„ç»Ÿä¸€å¼‚å¸¸å¤„ç†</h4>
<p>å‘Šåˆ«æ··ä¹±çš„try-catchå—ï¼Œä½¿ç”¨<code>@ControllerAdvice</code>æ ‡å‡†åŒ–é”™è¯¯å“åº”ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ExceptionHandler(BusinessException.class)</span>
<span class="hljs-keyword">public</span> ResponseEntity&lt;ErrorResponse&gt; <span class="hljs-title function_">handleBusinessException</span><span class="hljs-params">(
    BusinessException ex)</span> {
    <span class="hljs-keyword">return</span> ResponseEntity.status(ex.getStatusCode())
           .body(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ErrorResponse</span>(ex.getErrorCode(), ex.getMessage()));
}
</code></pre>
<p>é…å¥—å®šä¹‰å…¨å±€é”™è¯¯ç æšä¸¾ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ErrorCode</span> {
    PARAM_INVALID(<span class="hljs-number">40001</span>, <span class="hljs-string">"å‚æ•°æ ¡éªŒå¤±è´¥"</span>),
    SERVICE_UNAVAILABLE(<span class="hljs-number">50002</span>, <span class="hljs-string">"æœåŠ¡æš‚ä¸å¯ç”¨"</span>);
}
</code></pre>
<h4 data-id="heading-12">8. Transactionalæ³¨è§£çš„éšè—ç»†èŠ‚</h4>
<p>äº‹åŠ¡å¤±æ•ˆçš„äº”ç§å¸¸è§åœºæ™¯ï¼š</p>
<ol>
<li>
<p><strong>è‡ªè°ƒç”¨é—®é¢˜</strong>ï¼šåŒç±»æ–¹æ³•å†…è°ƒç”¨ä¸ä¼šè§¦å‘AOPä»£ç†<br/>
âœ… Solutionï¼šæ³¨å…¥selfæˆ–ä½¿ç”¨AopContext</p>
</li>
<li>
<p><strong>å¼‚å¸¸ç±»å‹ä¸åŒ¹é…</strong>ï¼šé»˜è®¤åªå›æ»šRuntimeException<br/>
âœ… Solutionï¼šæ˜ç¡®æŒ‡å®š<code>rollbackFor</code></p>
</li>
<li>
<p><strong>ä¼ æ’­è¡Œä¸ºè¯¯ç”¨</strong>ï¼šREQUIRES_NEWéœ€è¦æ–°è¿æ¥<br/>
âœ… Solutionï¼šè¯„ä¼°äº‹åŠ¡è¾¹ç•Œè®¾è®¡</p>
</li>
<li>
<p><strong>épublicæ–¹æ³•</strong><br/>
âœ… Solutionï¼šéµå¾ªSpring AOPè§„èŒƒ</p>
</li>
<li>
<p><strong>å¼‚æ­¥ä¸Šä¸‹æ–‡ä¸¢å¤±</strong><br/>
âœ… Solutionï¼šæ‰‹åŠ¨ä¼ é€’TransactionTemplate</p>
</li>
</ol>
<h3 data-id="heading-13">å››ã€æµ‹è¯•ä¸éƒ¨ç½²ç¯‡</h3>
<h4 data-id="heading-14">9. SpringBootTestçš„æ­£ç¡®å§¿åŠ¿</h4>
<p>é›†æˆæµ‹è¯•çš„èµ„æºæ¶ˆè€—ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<ul>
<li><strong>åˆ†å±‚æµ‹è¯•</strong>ï¼šçº¯å•å…ƒæµ‹è¯•ä¸ç”¨åŠ è½½Springä¸Šä¸‹æ–‡</li>
<li><strong>MockBeanç²¾å‡†æ›¿æ¢</strong>ï¼šé¿å…å…¨é‡å¯åŠ¨æ•°æ®åº“</li>
<li><strong>Testcontainersæ›¿ä»£H2</strong>ï¼šæ›´çœŸå®çš„é›†æˆæµ‹è¯•ç¯å¢ƒ</li>
</ul>
<p>ç¤ºä¾‹DockeråŒ–æµ‹è¯•é…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Testcontainers</span> 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentServiceIT</span> {
   <span class="hljs-meta">@Container</span> 
   <span class="hljs-keyword">static</span> PostgreSQLContainer&lt;?&gt; postgres = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PostgreSQLContainer</span>&lt;&gt;();
   
   <span class="hljs-meta">@DynamicPropertySource</span> 
   <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(DynamicPropertyRegistry registry)</span> {
       registry.add(<span class="hljs-string">"spring.datasource.url"</span>, postgres::getJdbcUrl);
   }
}
</code></pre>
<h4 data-id="heading-15">10.Kuberneteså¥åº·æ£€æŸ¥æ·±åº¦å®šåˆ¶</h4>
<p>è¶…è¶Šactuatorçš„åŸºç¡€å¥åº·æŒ‡ç¤ºå™¨ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># deployment.yamlç‰‡æ®µ </span>
<span class="hljs-attr">livenessProbe:</span>
   <span class="hljs-attr">httpGet:</span>
     <span class="hljs-attr">path:</span> <span class="hljs-string">/actuator/health/liveness</span> 
     <span class="hljs-attr">port:</span> <span class="hljs-string">actuator-port</span> 
<span class="hljs-string">initialDelaySeconds:60</span> <span class="hljs-comment">#æ ¹æ®åº”ç”¨å®é™…å¯åŠ¨æ—¶é—´è°ƒæ•´ </span>

<span class="hljs-attr">readinessProbe:</span>
   <span class="hljs-attr">httpGet:</span>
     <span class="hljs-string">path:/actuator/health/readiness?components=custom-service-check</span> 
</code></pre>
<p>è‡ªå®šä¹‰å¥åº·æŒ‡æ ‡å®ç°ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span> 
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomHealthIndicator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HealthIndicator</span> {
   <span class="hljs-meta">@Override</span> <span class="hljs-keyword">public</span> Health <span class="hljs-title function_">health</span><span class="hljs-params">()</span> {
      <span class="hljs-type">boolean</span> <span class="hljs-variable">available</span> <span class="hljs-operator">=</span> checkExternalService();
      <span class="hljs-keyword">return</span> available ? Health.up().build() : Health.down().build();
   }
} 
</code></pre>
<p>###äº”ã€æ¶æ„è®¾è®¡ç¯‡</p>
<p>####11.DDDä¸SpringBootçš„ç»“åˆå®è·µ</p>
<p>é¿å…è´«è¡€æ¨¡å‹çš„ä¸‰ä¸ªå…³é”®ç‚¹ï¼š</p>
<p>1.<strong>é¢†åŸŸå±‚ä¿æŒçº¯å‡€</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Entity</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> { <span class="hljs-comment">//ä¸æ˜¯ç®€å•çš„POJOæ¨¡å‹ç±»ï¼</span>
<span class="hljs-keyword">public</span> Money <span class="hljs-title function_">calculateTotal</span><span class="hljs-params">()</span> { ... } <span class="hljs-comment">//ä¸šåŠ¡é€»è¾‘å†…èšå°è£… }</span>
</code></pre>
<p>2.<strong>åŸºç¡€è®¾æ–½å±‚ä¾èµ–åè½¬</strong></p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-keyword">package</span> infrastructure; <span class="hljs-comment">//å®ç°æ”¾åœ¨åŸºç¡€è®¾æ–½å±‚ @Repository public class JpaOrderRepository implements OrderRepository {} ```</span>

<span class="hljs-number">3.</span>**CQRSæ¨¡å¼çš„åº”ç”¨**
``` properties spring.datasource.write.url=jdbc:postgresql:<span class="hljs-comment">//master-db spring.datasource.read.url=jdbc:postgresql://replica-db ```</span>

####<span class="hljs-number">12.</span>Sagaåˆ†å¸ƒå¼äº‹åŠ¡æ¨¡å¼å®ç° 

åœ¨æ²¡æœ‰XAçš„æƒ…å†µä¸‹ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ï¼š

äº‹ä»¶ç¼–æ’æ¨¡å¼ç¤ºä¾‹åºåˆ—å›¾:

</code></pre>
<p>[Order Service] -&gt; [Payment Service]: Reserve Credit (async event)
[Payment Service] --&gt; [Order Service]: Credit Reserved Event<br/>
[Order Service] -&gt; [Inventory Service]: Prepare Items (async event)
[Inventory Service] --&gt; [Order Service]: Items Prepared Event</p>
<pre><code class="hljs language-css" lang="css">
è¡¥å¿äº‹åŠ¡çš„å…³é”®ä»£ç ç»“æ„:
``` java @Transactional public void <span class="hljs-built_in">cancelOrder</span>(Long orderId) { orderRepository<span class="hljs-selector-class">.findById</span>(orderId)<span class="hljs-selector-class">.ifPresent</span>(<span class="hljs-attribute">order</span> -&gt; { paymentService<span class="hljs-selector-class">.refund</span>(<span class="hljs-attribute">order</span>); inventoryService<span class="hljs-selector-class">.restock</span>(<span class="hljs-attribute">order</span>); <span class="hljs-attribute">order</span><span class="hljs-selector-class">.cancel</span>(); }); } ```

###æ€»ç»“ 

SpringBootè™½ç„¶æå¤§åœ°ç®€åŒ–äº†å¼€å‘æµç¨‹,ä½†è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ„å»ºå¥å£®çš„å¾®æœåŠ¡ç³»ç»Ÿ,ä»ç„¶éœ€è¦æ·±å…¥ç†è§£å…¶å·¥ä½œåŸç†å¹¶éµå¾ªæœ€ä½³å®è·µã€‚æœ¬æ–‡æ€»ç»“çš„<span class="hljs-number">12</span>æ¡ç»éªŒæ¶µç›–äº†ä»åŸºç¡€é…ç½®åˆ°é«˜çº§æ¶æ„è®¾è®¡çš„å¤šä¸ªç»´åº¦,å…¶ä¸­ç‰¹åˆ«å¼ºè°ƒçš„ä¸¤ç‚¹æ˜¯:

<span class="hljs-number">1</span>.**çº¦å®šä¼˜äºé…ç½®ä¸ç­‰äºé›¶é…ç½®**,åˆç†çš„æ˜¾å¼å£°æ˜å¾€å¾€æ¯”éšå¼è¡Œä¸ºæ›´å¯é    
<span class="hljs-number">2</span>.**å¾®æœåŠ¡çš„æ ¸å¿ƒæŒ‘æˆ˜æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿé—®é¢˜**,å•çº¯çš„æŠ€æœ¯æ ˆå‡çº§ä¸èƒ½è§£å†³æ¶æ„ç¼ºé™·    

å¸Œæœ›è¿™äº›ç»è¿‡å®æˆ˜æ£€éªŒçš„å»ºè®®èƒ½å¸®åŠ©å¼€å‘è€…åœ¨SpringBooté¡¹ç›®ä¸­å°‘èµ°å¼¯è·¯,æ„å»ºå‡ºé«˜æ€§èƒ½ã€æ˜“ç»´æŠ¤çš„ç”Ÿäº§çº§åº”ç”¨ã€‚è®°ä½,å¥½çš„æ¡†æ¶åº”è¯¥è§£æ”¾ç”Ÿäº§åŠ›è€Œéæ©ç›–é—®é¢˜æœ¬è´¨ã€‚
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonç¼–ç¨‹å®æˆ˜ - Pythonå®ç”¨å·¥å…·ä¸åº“ - çˆ¬è™«é˜²å°ä¸ä»£ç†æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7571351275976605747</link>    <guid>https://juejin.cn/post/7571351275976605747</guid>    <pubDate>2025-11-12T00:21:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571351275976605747" data-draft-id="7571352754896437274" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonç¼–ç¨‹å®æˆ˜ - Pythonå®ç”¨å·¥å…·ä¸åº“ - çˆ¬è™«é˜²å°ä¸ä»£ç†æœºåˆ¶"/> <meta itemprop="keywords" content="åç«¯,Python,IPython"/> <meta itemprop="datePublished" content="2025-11-12T00:21:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonç¼–ç¨‹å®æˆ˜ - Pythonå®ç”¨å·¥å…·ä¸åº“ - çˆ¬è™«é˜²å°ä¸ä»£ç†æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:21:57.000Z" title="Wed Nov 12 2025 00:21:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨è¿›è¡Œç½‘é¡µçˆ¬å–æ—¶ï¼Œå¦‚æœé¢‘ç¹è®¿é—®åŒä¸€ç½‘ç«™ï¼Œææœ‰å¯èƒ½è¢«ç½‘ç«™è¯†åˆ«ä¸ºçˆ¬è™«ï¼Œä»è€Œå°ç¦ IP æˆ–è¦æ±‚éªŒè¯ç éªŒè¯ã€‚
ä¸ºäº†ä¿è¯çˆ¬è™«ç¨³å®šã€é«˜æ•ˆè¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦äº†è§£å¹¶æŒæ¡ <strong>é˜²å°æœºåˆ¶ä¸ä»£ç†ä½¿ç”¨æ–¹æ³•</strong>ã€‚</p>
</blockquote>
<p>æœ¬ç« å°†ä»‹ç» Python çˆ¬è™«ä¸­å¸¸ç”¨çš„é˜²å°ç­–ç•¥ã€ä»£ç†åŸç†åŠå®æˆ˜åº”ç”¨æŠ€å·§ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆä¼šè¢«å°</h2>
<p>ç½‘ç«™å°ç¦çˆ¬è™«ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢èµ„æºæ»¥ç”¨ä¸æœåŠ¡å™¨è¿‡è½½ã€‚å¸¸è§çš„å°ç¦æ‰‹æ®µåŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>IP å°ç¦</strong>ï¼šçŸ­æ—¶é—´å†…è¯·æ±‚é¢‘ç¹ï¼Œç›´æ¥æ‹‰é»‘è®¿é—® IPã€‚</li>
<li><strong>User-Agent æ£€æµ‹</strong>ï¼šè¯†åˆ«è¯·æ±‚å¤´ä¸­æ˜¯å¦åŒ…å«æµè§ˆå™¨æ ‡è¯†ã€‚</li>
<li><strong>Referer æ£€æŸ¥</strong>ï¼šåˆ¤æ–­è¯·æ±‚æ˜¯å¦æ¥è‡ªæ­£å¸¸é¡µé¢è·³è½¬ã€‚</li>
<li><strong>Cookie æ ¡éªŒ</strong>ï¼šéªŒè¯ç™»å½•çŠ¶æ€æˆ–è®¿é—®æ¥æºã€‚</li>
<li><strong>è¯·æ±‚é¢‘ç‡é™åˆ¶</strong>ï¼šåŒä¸€ç”¨æˆ·çŸ­æ—¶é—´å†…è¿‡å¤šè¯·æ±‚è§¦å‘åçˆ¬ã€‚</li>
</ol>
<p>è¦åº”å¯¹è¿™äº›æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä» <strong>â€œä¼ªè£…è‡ªå·±â€</strong> å’Œ <strong>â€œå¤šIPè®¿é—®â€</strong> ä¸¤ä¸ªæ–¹å‘å…¥æ‰‹ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€è¯·æ±‚ä¼ªè£…ï¼šæ¨¡æ‹ŸçœŸå®ç”¨æˆ·è®¿é—®</h2>
<h3 data-id="heading-2">1. è®¾ç½®è¯·æ±‚å¤´</h3>
<p><code>requests</code> æ”¯æŒé€šè¿‡ <code>headers</code> å‚æ•°è‡ªå®šä¹‰è¯·æ±‚å¤´ã€‚
å¸¸è§åšæ³•æ˜¯æ·»åŠ æµè§ˆå™¨ä¿¡æ¯ï¼Œè®©æœåŠ¡å™¨è®¤ä¸ºè¯·æ±‚æ¥è‡ªæ­£å¸¸ç”¨æˆ·ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests

url = <span class="hljs-string">"https://example.com"</span>
headers = {
    <span class="hljs-string">"User-Agent"</span>: <span class="hljs-string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) "</span>
                  <span class="hljs-string">"AppleWebKit/537.36 (KHTML, like Gecko) "</span>
                  <span class="hljs-string">"Chrome/122.0.0.0 Safari/537.36"</span>,
    <span class="hljs-string">"Referer"</span>: <span class="hljs-string">"https://www.google.com"</span>,
}
response = requests.get(url, headers=headers)
<span class="hljs-built_in">print</span>(response.status_code)
</code></pre>
<hr/>
<h3 data-id="heading-3">2. éšæœºåˆ‡æ¢ User-Agent</h3>
<p>ä¸ºäº†é¿å…å•ä¸€ User-Agent è¢«è¯†åˆ«ä¸ºçˆ¬è™«ï¼Œå¯ä»¥åœ¨è¯·æ±‚ä¸­éšæœºåˆ‡æ¢æµè§ˆå™¨æ ‡è¯†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> random

user_agents = [
    <span class="hljs-string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/123.0.0.0 Safari/537.36"</span>,
    <span class="hljs-string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) Firefox/124.0"</span>,
    <span class="hljs-string">"Mozilla/5.0 (Linux; Android 10) Mobile Safari/537.36"</span>,
]

headers = {<span class="hljs-string">"User-Agent"</span>: random.choice(user_agents)}
</code></pre>
<p>æ¯æ¬¡è®¿é—®æ—¶éšæœºé€‰æ‹©ä¸€ä¸ªå¤´éƒ¨ï¼Œèƒ½æœ‰æ•ˆå‡å°‘è¢«è¯†åˆ«é£é™©ã€‚</p>
<hr/>
<h3 data-id="heading-4">3. æ·»åŠ å»¶æ—¶ä¸éšæœºç­‰å¾…</h3>
<p>é¢‘ç¹è®¿é—®ç½‘ç«™æœ€å®¹æ˜“è§¦å‘é£æ§ã€‚
åˆç†çš„åšæ³•æ˜¯æ·»åŠ è®¿é—®é—´éš”ï¼Œå¹¶éšæœºåŒ–ç­‰å¾…æ—¶é—´ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> random

time.sleep(random.uniform(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>))  <span class="hljs-comment"># ç­‰å¾…1~3ç§’</span>
</code></pre>
<p>è¿™æ ·èƒ½è®©è®¿é—®èŠ‚å¥æ›´åƒäººç±»æ“ä½œã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ä½¿ç”¨ä»£ç†æœåŠ¡å™¨ï¼ˆProxyï¼‰</h2>
<p>å½“ IP è¢«å°æ—¶ï¼Œä½¿ç”¨ä»£ç†æœåŠ¡å™¨å¯ä»¥åˆ‡æ¢å‡ºå£ IPï¼Œä»è€Œç»§ç»­è®¿é—®ã€‚</p>
<p>ä»£ç†æœåŠ¡å™¨ä¼šä»£æ›¿ä½ è®¿é—®ç›®æ ‡ç½‘ç«™ï¼Œç„¶åå°†ç»“æœè¿”å›ã€‚
Python ä¸­å¯ä»¥é€šè¿‡ <code>requests</code> è½»æ¾ä½¿ç”¨ä»£ç†ã€‚</p>
<hr/>
<h3 data-id="heading-6">1. è®¾ç½®ä»£ç†å‚æ•°</h3>
<pre><code class="hljs language-python" lang="python">proxies = {
    <span class="hljs-string">"http"</span>: <span class="hljs-string">"http://123.45.67.89:8080"</span>,
    <span class="hljs-string">"https"</span>: <span class="hljs-string">"http://123.45.67.89:8080"</span>,
}

response = requests.get(<span class="hljs-string">"https://httpbin.org/ip"</span>, proxies=proxies, timeout=<span class="hljs-number">10</span>)
<span class="hljs-built_in">print</span>(response.text)
</code></pre>
<p>å¦‚æœä»£ç†æœ‰æ•ˆï¼Œè¿”å›çš„ IP å°†ä¸æœ¬æœºä¸åŒã€‚</p>
<hr/>
<h3 data-id="heading-7">2. ä½¿ç”¨ä»£ç†æ± ï¼ˆProxy Poolï¼‰</h3>
<p>æ‰‹åŠ¨è®¾ç½®ä»£ç†ä¸æ–¹ä¾¿ï¼Œå¯ä»¥ä½¿ç”¨ <strong>ä»£ç†æ± </strong> è‡ªåŠ¨éšæœºé€‰å–å¯ç”¨ä»£ç†ã€‚</p>
<p>ç®€å•ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> random
<span class="hljs-keyword">import</span> time

proxies_list = [
    <span class="hljs-string">"http://111.22.33.44:8080"</span>,
    <span class="hljs-string">"http://222.11.55.66:8888"</span>,
    <span class="hljs-string">"http://77.88.99.100:3128"</span>,
]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_random_proxy</span>():
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"http"</span>: random.choice(proxies_list), <span class="hljs-string">"https"</span>: random.choice(proxies_list)}

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    proxy = get_random_proxy()
    <span class="hljs-keyword">try</span>:
        res = requests.get(<span class="hljs-string">"https://httpbin.org/ip"</span>, proxies=proxy, timeout=<span class="hljs-number">5</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½¿ç”¨ä»£ç† <span class="hljs-subst">{proxy[<span class="hljs-string">'http'</span>]}</span> -&gt; <span class="hljs-subst">{res.json()}</span>"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»£ç†å¤±æ•ˆï¼š"</span>, e)
    time.sleep(random.uniform(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))
</code></pre>
<hr/>
<h3 data-id="heading-8">3. è´­ä¹°æˆ–æ­å»ºä»£ç†æ± </h3>
<p>å…è´¹ä»£ç†å¸¸å¸¸ä¸ç¨³å®šï¼Œå»ºè®®ï¼š</p>
<ul>
<li>ä½¿ç”¨ä»˜è´¹ä»£ç†æœåŠ¡ï¼ˆå¦‚èŠéº»ä»£ç†ã€å¿«ä»£ç†ç­‰ï¼‰ã€‚</li>
<li>è‡ªè¡Œæ­å»ºä»£ç†æ± æœåŠ¡ï¼Œç»“åˆ Redis å­˜å‚¨å’Œè‡ªåŠ¨æ£€æµ‹å¯ç”¨ IPã€‚</li>
</ul>
<p>ä¸€ä¸ªç®€å•çš„ä»£ç†æ± æ¶æ„ï¼š</p>
<pre><code class="hljs">çˆ¬è™«ç¨‹åº â†’ è¯·æ±‚ä»£ç†æ± æ¥å£ â†’ è¿”å›å¯ç”¨ä»£ç† â†’ è®¿é—®ç›®æ ‡ç½‘ç«™
ä»£ç†æ± åå° â†’ å®šæœŸæ£€æµ‹ä»£ç†å¯ç”¨æ€§ â†’ æ¸…ç†æ— æ•ˆIP
</code></pre>
<hr/>
<h2 data-id="heading-9">å››ã€Cookie ä¸ä¼šè¯ä¿æŒ</h2>
<p>æŸäº›ç½‘ç«™éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®æ•°æ®ï¼Œè¿™æ—¶éœ€è¦å¤„ç† <strong>Cookie</strong>ã€‚
å¯ä»¥ä½¿ç”¨ <code>requests.Session()</code> è‡ªåŠ¨ä¿æŒä¼šè¯çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-python" lang="python">session = requests.Session()
login_url = <span class="hljs-string">"https://example.com/login"</span>
payload = {<span class="hljs-string">"username"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"password"</span>: <span class="hljs-string">"pass"</span>}
session.post(login_url, data=payload)

<span class="hljs-comment"># ç™»å½•æˆåŠŸåç»§ç»­è®¿é—®é¡µé¢</span>
resp = session.get(<span class="hljs-string">"https://example.com/user/profile"</span>)
<span class="hljs-built_in">print</span>(resp.text)
</code></pre>
<p><code>Session</code> ä¼šè‡ªåŠ¨ä¿å­˜ç™»å½•åçš„ Cookie ä¿¡æ¯ï¼Œé¿å…æ¯æ¬¡è¯·æ±‚é‡æ–°è®¤è¯ã€‚</p>
<hr/>
<h2 data-id="heading-10">äº”ã€éªŒè¯ç ä¸é«˜çº§é˜²çˆ¬</h2>
<p>æœ‰çš„ç½‘ç«™ä¼šè¦æ±‚è¾“å…¥éªŒè¯ç æˆ– JavaScript åŠ å¯†éªŒè¯è¯·æ±‚ã€‚
å¸¸è§åº”å¯¹æ€è·¯åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>äººå·¥è¾…åŠ©è¯†åˆ«</strong>ï¼šé‡åˆ°éªŒè¯ç æš‚åœçˆ¬å–ï¼Œæ‰‹åŠ¨è¾“å…¥ã€‚</li>
<li><strong>OCR è¯†åˆ«éªŒè¯ç </strong>ï¼šé€šè¿‡ <code>pytesseract</code> è¯†åˆ«ç®€å•å›¾ç‰‡éªŒè¯ç ã€‚</li>
<li><strong>æ¨¡æ‹Ÿæµè§ˆå™¨è¡Œä¸º</strong>ï¼šä½¿ç”¨ <code>selenium</code> æˆ– <code>playwright</code> æ‰§è¡Œç½‘é¡µä¸­çš„ JS é€»è¾‘ã€‚</li>
</ol>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver

driver = webdriver.Chrome()
driver.get(<span class="hljs-string">"https://example.com"</span>)
<span class="hljs-built_in">print</span>(driver.title)
driver.quit()
</code></pre>
<p>è¿™ç§æ–¹å¼èƒ½ç»•è¿‡å¤§éƒ¨åˆ†åŸºäº JS æ¸²æŸ“æˆ–éªŒè¯çš„é˜²çˆ¬æœºåˆ¶ã€‚</p>
<hr/>
<h2 data-id="heading-11">å…­ã€å¼‚å¸¸ä¸é‡è¯•æœºåˆ¶</h2>
<p>ç½‘ç»œè¯·æ±‚å®¹æ˜“è¶…æ—¶æˆ–å¤±è´¥ï¼Œå»ºè®®æ·»åŠ å¼‚å¸¸é‡è¯•æœºåˆ¶ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">def</span> <span class="hljs-title function_">safe_request</span>(<span class="hljs-params">url, retries=<span class="hljs-number">3</span></span>):
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(retries):
        <span class="hljs-keyword">try</span>:
            res = requests.get(url, timeout=<span class="hljs-number">10</span>)
            <span class="hljs-keyword">if</span> res.status_code == <span class="hljs-number">200</span>:
                <span class="hljs-keyword">return</span> res.text
        <span class="hljs-keyword">except</span> requests.RequestException:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span> æ¬¡è¯·æ±‚å¤±è´¥ï¼Œé‡è¯•ä¸­..."</span>)
            time.sleep(<span class="hljs-number">2</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<hr/>
<h2 data-id="heading-12">ä¸ƒã€ç»¼åˆå®æˆ˜ç¤ºä¾‹</h2>
<p>ç»¼åˆä»¥ä¸ŠæŠ€å·§ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªç¨³å®šã€æŠ—å°çš„çˆ¬è™«ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests, random, time

headers_list = [
    {<span class="hljs-string">"User-Agent"</span>: <span class="hljs-string">"Mozilla/5.0 Chrome/122.0.0.0"</span>},
    {<span class="hljs-string">"User-Agent"</span>: <span class="hljs-string">"Mozilla/5.0 Firefox/124.0"</span>},
]
proxies_list = [
    <span class="hljs-string">"http://123.45.67.89:8080"</span>,
    <span class="hljs-string">"http://222.111.55.66:8888"</span>
]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-params">url</span>):
    headers = random.choice(headers_list)
    proxy = {<span class="hljs-string">"http"</span>: random.choice(proxies_list), <span class="hljs-string">"https"</span>: random.choice(proxies_list)}
    <span class="hljs-keyword">try</span>:
        response = requests.get(url, headers=headers, proxies=proxy, timeout=<span class="hljs-number">10</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è®¿é—®æˆåŠŸï¼š"</span>, response.status_code, <span class="hljs-string">"IPï¼š"</span>, proxy)
        <span class="hljs-keyword">return</span> response.text
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è®¿é—®å¤±è´¥ï¼š"</span>, e)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    html = fetch(<span class="hljs-string">"https://httpbin.org/ip"</span>)
    time.sleep(random.uniform(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>))
</code></pre>
<hr/>
<h2 data-id="heading-13">å…«ã€æ€»ç»“</h2>

































<table><thead><tr><th>ç­–ç•¥</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è¯·æ±‚ä¼ªè£…</strong></td><td>è®¾ç½®éšæœº User-Agentã€Referer ç­‰å¤´ä¿¡æ¯</td></tr><tr><td><strong>è¯·æ±‚é—´éš”æ§åˆ¶</strong></td><td>ä½¿ç”¨éšæœºå»¶æ—¶ï¼Œæ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸º</td></tr><tr><td><strong>ä»£ç†æœºåˆ¶</strong></td><td>é€šè¿‡ä»£ç†IPåˆ‡æ¢è®¿é—®æ¥æº</td></tr><tr><td><strong>ä¼šè¯ä¿æŒ</strong></td><td>ä½¿ç”¨ Session ç®¡ç†ç™»å½•çŠ¶æ€</td></tr><tr><td><strong>å¼‚å¸¸é‡è¯•</strong></td><td>é˜²æ­¢ä¸´æ—¶ç½‘ç»œé”™è¯¯å¯¼è‡´ç¨‹åºä¸­æ–­</td></tr><tr><td><strong>æµè§ˆå™¨æ¨¡æ‹Ÿ</strong></td><td>å¤„ç†éªŒè¯ç æˆ–åŠ¨æ€æ¸²æŸ“å†…å®¹</td></tr></tbody></table>
<hr/>
<p>é€šè¿‡åˆç†è¿ç”¨è¿™äº›é˜²å°ç­–ç•¥ä¸ä»£ç†æœºåˆ¶ï¼Œä½ çš„ Python çˆ¬è™«å°†æ›´ç¨³å®šã€æ›´é«˜æ•ˆã€æ›´æ¥è¿‘çœŸå®ç”¨æˆ·è®¿é—®è¡Œä¸ºï¼Œä¸ºåç»­æ•°æ®é‡‡é›†ä¸åˆ†æå¥ å®šåšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonç¼–ç¨‹å®æˆ˜ - Pythonå®ç”¨å·¥å…·ä¸åº“ - æ“ä½œExcelï¼šopenpyxl / pandas]]></title>    <link>https://juejin.cn/post/7571332468898136091</link>    <guid>https://juejin.cn/post/7571332468898136091</guid>    <pubDate>2025-11-12T00:22:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571332468898136091" data-draft-id="7571351275976622131" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonç¼–ç¨‹å®æˆ˜ - Pythonå®ç”¨å·¥å…·ä¸åº“ - æ“ä½œExcelï¼šopenpyxl / pandas"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Python"/> <meta itemprop="datePublished" content="2025-11-12T00:22:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonç¼–ç¨‹å®æˆ˜ - Pythonå®ç”¨å·¥å…·ä¸åº“ - æ“ä½œExcelï¼šopenpyxl / pandas
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:22:29.000Z" title="Wed Nov 12 2025 00:22:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨æ—¥å¸¸æ•°æ®å¤„ç†å·¥ä½œä¸­ï¼ŒExcel æ˜¯æœ€å¸¸è§çš„æ•°æ®æ–‡ä»¶æ ¼å¼ä¹‹ä¸€ã€‚æ— è®ºæ˜¯è´¢åŠ¡æŠ¥è¡¨ã€é”€å”®ç»Ÿè®¡è¿˜æ˜¯å®éªŒæ•°æ®ï¼ŒPython éƒ½èƒ½é€šè¿‡å¼ºå¤§çš„åº“å¿«é€Ÿè¯»å†™å’Œå¤„ç† Excel æ–‡ä»¶ã€‚å…¶ä¸­æœ€å¸¸ç”¨çš„å°±æ˜¯ <strong>openpyxl</strong> å’Œ <strong>pandas</strong>ã€‚</p>
</blockquote>
<p>æœ¬æ–‡å°†å¸¦ä½ äº†è§£è¿™ä¸¤ä¸ªåº“çš„æ ¸å¿ƒç”¨æ³•ï¼Œå¹¶é€šè¿‡å®æˆ˜ç¤ºä¾‹å±•ç¤ºå¦‚ä½•é«˜æ•ˆæ“ä½œ Excel æ–‡ä»¶ã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€openpyxlï¼šåŸç”Ÿ Excel æ–‡ä»¶æ“ä½œåº“</h3>
<p><code>openpyxl</code> æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºè¯»å†™ <code>.xlsx</code> æ–‡ä»¶çš„çº¯ Python åº“ã€‚å®ƒæ”¯æŒå•å…ƒæ ¼è¯»å†™ã€æ ·å¼è®¾ç½®ã€å›¾è¡¨åˆ›å»ºç­‰é«˜çº§åŠŸèƒ½ï¼Œé€‚åˆå¯¹ Excel æ–‡ä»¶ç»“æ„è¿›è¡Œç²¾ç»†æ§åˆ¶çš„åœºæ™¯ã€‚</p>
<h4 data-id="heading-1">1. å®‰è£… openpyxl</h4>
<pre><code class="hljs language-bash" lang="bash">pip install openpyxl
</code></pre>
<h4 data-id="heading-2">2. åˆ›å»º Excel æ–‡ä»¶</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> openpyxl <span class="hljs-keyword">import</span> Workbook

<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ä½œç°¿</span>
wb = Workbook()
ws = wb.active

<span class="hljs-comment"># å†™å…¥æ•°æ®</span>
ws[<span class="hljs-string">'A1'</span>] = <span class="hljs-string">'å§“å'</span>
ws[<span class="hljs-string">'B1'</span>] = <span class="hljs-string">'æˆç»©'</span>
ws.append([<span class="hljs-string">'Alice'</span>, <span class="hljs-number">95</span>])
ws.append([<span class="hljs-string">'Bob'</span>, <span class="hljs-number">88</span>])

<span class="hljs-comment"># ä¿å­˜æ–‡ä»¶</span>
wb.save(<span class="hljs-string">'æˆç»©è¡¨.xlsx'</span>)
</code></pre>
<p>è¿è¡Œåï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ªåŒ…å«å­¦ç”Ÿæˆç»©çš„ Excel æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-3">3. è¯»å– Excel æ–‡ä»¶</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> openpyxl <span class="hljs-keyword">import</span> load_workbook

wb = load_workbook(<span class="hljs-string">'æˆç»©è¡¨.xlsx'</span>)
ws = wb.active

<span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> ws.iter_rows(values_only=<span class="hljs-literal">True</span>):
    <span class="hljs-built_in">print</span>(row)
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">(<span class="hljs-string">'å§“å'</span>, <span class="hljs-string">'æˆç»©'</span>)
(<span class="hljs-string">'Alice'</span>, <span class="hljs-number">95</span>)
(<span class="hljs-string">'Bob'</span>, <span class="hljs-number">88</span>)
</code></pre>
<h4 data-id="heading-4">4. ä¿®æ”¹å•å…ƒæ ¼å†…å®¹</h4>
<pre><code class="hljs language-python" lang="python">ws[<span class="hljs-string">'B2'</span>] = <span class="hljs-number">98</span>  <span class="hljs-comment"># ä¿®æ”¹ Alice çš„æˆç»©</span>
wb.save(<span class="hljs-string">'æˆç»©è¡¨_ä¿®æ”¹.xlsx'</span>)
</code></pre>
<h4 data-id="heading-5">5. è®¾ç½®å•å…ƒæ ¼æ ·å¼ï¼ˆå¯é€‰ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> openpyxl.styles <span class="hljs-keyword">import</span> Font, Alignment

ws[<span class="hljs-string">'A1'</span>].font = Font(bold=<span class="hljs-literal">True</span>, color=<span class="hljs-string">"FF0000"</span>)
ws[<span class="hljs-string">'A1'</span>].alignment = Alignment(horizontal=<span class="hljs-string">'center'</span>)
wb.save(<span class="hljs-string">'æˆç»©è¡¨_æ ¼å¼.xlsx'</span>)
</code></pre>
<hr/>
<h3 data-id="heading-6">äºŒã€pandasï¼šé«˜æ•ˆçš„æ•°æ®åˆ†æåˆ©å™¨</h3>
<p>å¦‚æœä½ æ›´å…³æ³¨æ•°æ®åˆ†æå’Œæ‰¹é‡å¤„ç†ï¼Œè€Œä¸æ˜¯ Excel çš„æ ¼å¼ç»†èŠ‚ï¼Œé‚£ä¹ˆ <code>pandas</code> æ˜¯æ›´é«˜æ•ˆçš„é€‰æ‹©ã€‚
<code>pandas</code> å¯ä»¥è½»æ¾åœ°è¯»å†™ Excel æ–‡ä»¶å¹¶ä¸ DataFrame æ— ç¼ç»“åˆã€‚</p>
<h4 data-id="heading-7">1. å®‰è£… pandas</h4>
<pre><code class="hljs language-bash" lang="bash">pip install pandas openpyxl
</code></pre>
<h4 data-id="heading-8">2. ä» Excel è¯»å–æ•°æ®</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

df = pd.read_excel(<span class="hljs-string">'æˆç»©è¡¨.xlsx'</span>)
<span class="hljs-built_in">print</span>(df)
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">     å§“å  æˆç»©
0  Alice  95
1    Bob  88
</span></code></pre>
<h4 data-id="heading-9">3. ä¿®æ”¹æ•°æ®å¹¶å†™å› Excel</h4>
<pre><code class="hljs language-python" lang="python">df.loc[df[<span class="hljs-string">'å§“å'</span>] == <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'æˆç»©'</span>] = <span class="hljs-number">90</span>
df.to_excel(<span class="hljs-string">'æˆç»©è¡¨_æ›´æ–°.xlsx'</span>, index=<span class="hljs-literal">False</span>)
</code></pre>
<h4 data-id="heading-10">4. å¤šè¡¨æ ¼ï¼ˆå¤š Sheetï¼‰æ“ä½œ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">with</span> pd.ExcelWriter(<span class="hljs-string">'å¤šè¡¨æ ¼.xlsx'</span>) <span class="hljs-keyword">as</span> writer:
    df.to_excel(writer, sheet_name=<span class="hljs-string">'ä¸€ç­'</span>, index=<span class="hljs-literal">False</span>)
    df.to_excel(writer, sheet_name=<span class="hljs-string">'äºŒç­'</span>, index=<span class="hljs-literal">False</span>)
</code></pre>
<h4 data-id="heading-11">5. ä»å¤šä¸ª Excel æ–‡ä»¶åˆå¹¶æ•°æ®</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> glob

files = glob.glob(<span class="hljs-string">"data/*.xlsx"</span>)
all_data = pd.concat((pd.read_excel(f) <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> files))
all_data.to_excel(<span class="hljs-string">'åˆå¹¶ç»“æœ.xlsx'</span>, index=<span class="hljs-literal">False</span>)
</code></pre>
<hr/>
<h3 data-id="heading-12">ä¸‰ã€openpyxl ä¸ pandas çš„æ¯”è¾ƒ</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>openpyxl</th><th>pandas</th></tr></thead><tbody><tr><td>æ–‡ä»¶ç±»å‹</td><td><code>.xlsx</code></td><td><code>.xls</code>, <code>.xlsx</code>, <code>.csv</code></td></tr><tr><td>æ“ä½œç²’åº¦</td><td>å•å…ƒæ ¼çº§åˆ«</td><td>è¡¨æ ¼/æ•°æ®çº§åˆ«</td></tr><tr><td>é€‚åˆåœºæ™¯</td><td>ç²¾ç»†åŒ–æ ¼å¼æ§åˆ¶ã€è¡¨æ ¼æ ·å¼ã€ç¾åŒ–</td><td>æ‰¹é‡å¤„ç†ã€åˆ†æè®¡ç®—ã€æ•°æ®è½¬æ¢</td></tr><tr><td>æ˜¯å¦æ”¯æŒæ ·å¼</td><td>âœ… æ˜¯</td><td>âŒ å¦ï¼ˆä»…é™æ•°æ®ï¼‰</td></tr></tbody></table>
<p><strong>ç»“è®ºï¼š</strong></p>
<ul>
<li>å¦‚æœä½ éœ€è¦ç²¾ç»†æ§åˆ¶ Excel å¤–è§‚ï¼ˆå¦‚æ¨¡æ¿ã€ç¾åŒ–ï¼‰ï¼Œæ¨è <strong>openpyxl</strong>ã€‚</li>
<li>å¦‚æœä½ ä¸»è¦å…³æ³¨æ•°æ®è®¡ç®—å’Œå¤„ç†ï¼Œæ¨è <strong>pandas</strong>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">å››ã€å®æˆ˜æ¡ˆä¾‹ï¼šé”€å”®æ•°æ®æ±‡æ€»</h3>
<p>å‡è®¾ä½ æœ‰å¤šä¸ªé”€å”® Excel æ–‡ä»¶ï¼ˆå¦‚æ¯æœˆé”€å”®æ•°æ®ï¼‰ï¼Œéœ€è¦å¿«é€Ÿæ±‡æ€»å¹¶è¾“å‡ºæ€»é”€å”®é¢ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> glob

<span class="hljs-comment"># åˆå¹¶æ‰€æœ‰é”€å”®æ–‡ä»¶</span>
files = glob.glob(<span class="hljs-string">"sales/*.xlsx"</span>)
df = pd.concat([pd.read_excel(f) <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> files])

<span class="hljs-comment"># æ±‡æ€»è®¡ç®—</span>
summary = df.groupby(<span class="hljs-string">'é”€å”®å‘˜'</span>)[<span class="hljs-string">'é”€å”®é¢'</span>].<span class="hljs-built_in">sum</span>().reset_index()

<span class="hljs-comment"># å¯¼å‡ºç»“æœ</span>
summary.to_excel(<span class="hljs-string">'é”€å”®æ±‡æ€».xlsx'</span>, index=<span class="hljs-literal">False</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ±‡æ€»å®Œæˆï¼"</span>)
</code></pre>
<p>è¿™æ®µä»£ç å¯ä»¥å¸®ä½ è‡ªåŠ¨è¯»å–æ‰€æœ‰é”€å”®æ–‡ä»¶ï¼Œç»Ÿè®¡æ¯ä½é”€å”®å‘˜çš„æ€»é”€å”®é¢ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„æ±‡æ€»æ–‡ä»¶ã€‚</p>
<hr/>
<h3 data-id="heading-14">äº”ã€æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ åº”è¯¥æŒæ¡äº†ä»¥ä¸‹å†…å®¹ï¼š</p>
<ol>
<li>ä½¿ç”¨ <strong>openpyxl</strong> åˆ›å»ºã€ä¿®æ”¹å’Œç¾åŒ– Excel æ–‡ä»¶ã€‚</li>
<li>ä½¿ç”¨ <strong>pandas</strong> å¿«é€Ÿè¯»å†™ã€åˆ†æå’Œæ±‡æ€» Excel æ•°æ®ã€‚</li>
<li>ç†è§£ä¸¤è€…çš„å·®å¼‚ä¸é€‚ç”¨åœºæ™¯ã€‚</li>
<li>æŒæ¡ä¸€ä¸ªå®æˆ˜çº§çš„æ•°æ®æ±‡æ€»æ¡ˆä¾‹ã€‚</li>
</ol>
<p>æ— è®ºä½ æ˜¯åšæ•°æ®åˆ†æã€åŠå…¬è‡ªåŠ¨åŒ–ï¼Œè¿˜æ˜¯æ„å»ºæ•°æ®é©±åŠ¨åº”ç”¨ï¼ŒExcel æ“ä½œéƒ½æ˜¯ Python å·¥å…·ç®±ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯ã€‚
ä¸‹ä¸€æ­¥ï¼Œä½ å¯ä»¥ç»§ç»­å­¦ä¹ å¦‚ä½•ç”¨ <strong>pandas</strong> + <strong>Matplotlib</strong> å®ç°æ•°æ®å¯è§†åŒ–ï¼Œä¸ºæ•°æ®æŠ¥å‘Šæ·»åŠ å›¾å½¢æ´å¯Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»Šå¤©æˆ‘å»é¢è¯•æ¸¸æˆå¼€å‘ï¼Œè¯´æˆ‘å›ç­”å¾—ä¸å…¨é¢...]]></title>    <link>https://juejin.cn/post/7571360278970318857</link>    <guid>https://juejin.cn/post/7571360278970318857</guid>    <pubDate>2025-11-12T00:31:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571360278970318857" data-draft-id="7571272874847338548" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»Šå¤©æˆ‘å»é¢è¯•æ¸¸æˆå¼€å‘ï¼Œè¯´æˆ‘å›ç­”å¾—ä¸å…¨é¢..."/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T00:31:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¿å…ƒç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1972988307323236"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»Šå¤©æˆ‘å»é¢è¯•æ¸¸æˆå¼€å‘ï¼Œè¯´æˆ‘å›ç­”å¾—ä¸å…¨é¢...
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972988307323236/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¿å…ƒç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:31:34.000Z" title="Wed Nov 12 2025 00:31:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç‚¹å‡»ä¸Šæ–¹äº¿å…ƒç¨‹åºå‘˜+å…³æ³¨å’Œâ˜…æ˜Ÿæ ‡</p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<hr/>
<p><strong>é¢è¯•å®˜</strong>ï¼šâ€œæˆ‘ä»¬ä¸Šä¸€ä¸ªé¡¹ç›®å°±åœ¨åŒ…ä½“å¤§å°ä¸Šåƒäº†äºï¼Œä½ èƒ½è¯¦ç»†è®²è®²ï¼Œæœ‰å“ªäº›æ‰‹æ®µå¯ä»¥ä¼˜åŒ–æ¸¸æˆåŒ…ä½“å—ï¼Ÿâ€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30ffd41aa8da46ee9e78bb784f457c44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512293&amp;x-signature=0GRg1pf8%2Bb9GPi3Jg8kHKsf4lWI%3D" alt="è¡¨æƒ…åŒ…æºäºç½‘ç»œ" loading="lazy"/></p>
<p><strong>æˆ‘å˜´è§’å¾®å¾®ä¸Šæ‰¬</strong>ï¼Œè¿™é¢˜æˆ‘ä¼šï¼š</p>
<blockquote>
<p>**å—¯â€¦**åŒ…ä½“ä¼˜åŒ–å¾ˆé‡è¦ã€‚</p>
<p><strong>æˆ‘ä»¬</strong>ä¸»è¦æ˜¯å‹ç¼©å›¾ç‰‡ï¼ŒæŠŠå°çš„å›¾ç‰‡åˆæˆä¸€å¼ å¤§å›¾ï¼Œè¿™æ ·å¯ä»¥å‡å°‘<strong>DrawCall</strong>ã€‚</p>
<p><strong>è¿˜æœ‰</strong>å°±æ˜¯éŸ³é¢‘æ–‡ä»¶ä¸èƒ½å¤ªå¤§ï¼Œè¦ç”¨<strong>MP3</strong>æ ¼å¼ã€‚</p>
<p><strong>å¦å¤–</strong>ï¼Œæ„å»ºçš„æ—¶å€™å¯ä»¥æŠŠä¸éœ€è¦çš„å¼•æ“æ¨¡å—å»æ‰ã€‚</p>
<p><strong>å·®ä¸å¤šå°±è¿™äº›å§</strong>ã€‚</p>
</blockquote>
<hr/>
<p><strong>å“ˆå–½å¤§å®¶å¥½</strong>ï¼Œæ„Ÿè°¢ç²‰ä¸æä¾›çš„ä¸Šé¢çš„ç´ æï¼Œä»–è¯´æ•´ä¸ªé¢è¯•è¿‡ç¨‹å¯èƒ½å°±<strong>1-2</strong>åˆ†é’Ÿï¼Œæœ€åè¢«æŒ‡å‡ºå›ç­”å¾—ä¸å¤Ÿå…¨é¢ã€‚</p>
<p><strong>å¦‚æœæ˜¯æˆ‘</strong>ï¼Œæˆ‘å¯èƒ½è§‰å¾—æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ï¼Œæ—¢ç„¶è¢«æŒ‡å‡ºäº†ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸€èµ·æ¥åˆ†æä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-1">é¢è¯•å®˜ä¸ºä»€ä¹ˆè§‰å¾—â€œä¸å¤Ÿå…¨é¢â€ï¼Ÿ</h2>
<p><del>é¦–å…ˆå¯èƒ½é¢è¯•å®˜å¿ƒæƒ…ä¸å¥½ã€‚</del></p>
<p><del>å…¶æ¬¡å‘¢å¯èƒ½å·²ç»æ‹›åˆ°äººäº†ï¼Œè±¡å¾æ€§åœ°é¢è¯•ä¸€ä¸‹ã€‚</del></p>
<p><del>æœ€ååº”è¯¥æ˜¯ç¼˜åˆ†æœªåˆ°ã€‚</del></p>
<p><strong>ä¸Šé¢éƒ½æ˜¯æˆ‘çè¯´çš„ã€‚</strong></p>
<p><strong>æˆ‘ä»¬</strong>ä¸€èµ·æ¥æ‹†è§£ä¸€ä¸‹è¿™ä½ç²‰ä¸çš„å›ç­”ï¼š</p>
<h3 data-id="heading-2">1.æåˆ°äº†èµ„æºä¼˜åŒ–ï¼Œä½†éå¸¸ç¬¼ç»Ÿï¼š</h3>
<ul>
<li>åªè¯´äº†â€œå‹ç¼©å›¾ç‰‡â€å’Œâ€œåˆå›¾â€ã€‚</li>
<li>åªè¯´äº†éŸ³é¢‘ç”¨MP3ï¼Œä½†æ²¡æœ‰æåˆ°å¯ä»¥æ ¹æ®åœºæ™¯ï¼ˆé•¿èƒŒæ™¯éŸ³ä¹/çŸ­éŸ³æ•ˆï¼‰é€‰æ‹©ä¸åŒæ ¼å¼å’Œå‚æ•°ã€‚</li>
</ul>
<h3 data-id="heading-3">2.å¿½ç•¥äº†èµ„æºç®¡ç†çš„æ ¸å¿ƒé—®é¢˜ï¼š</h3>
<ul>
<li>å®Œå…¨æ²¡æœ‰æåˆ° â€œæ¸…ç†æœªå¼•ç”¨èµ„æºâ€ã€‚è¿™æ˜¯å¯¼è‡´åŒ…ä½“æ— æ•…å¢å¤§çš„æœ€å¸¸è§åŸå› ä¹‹ä¸€ã€‚å¼€å‘è¿‡ç¨‹ä¸­å¯¼å…¥åˆå¼ƒç”¨çš„èµ„æºï¼Œå¦‚æœæ²¡ä»é¡¹ç›®ç§»é™¤ï¼Œä¼šè¢«æ‰“è¿›åŒ…é‡Œã€‚</li>
</ul>
<h3 data-id="heading-4">3.å¯¹æ„å»ºé…ç½®çš„ç†è§£è¾ƒæµ…ï¼š</h3>
<ul>
<li>æåˆ°äº†â€œç§»é™¤å¼•æ“æ¨¡å—â€ï¼Œè¿™æ˜¯å¯¹çš„ï¼Œä½†åªæ˜¯æ„å»ºé…ç½®çš„å…¶ä¸­ä¸€é¡¹ã€‚</li>
<li>å®Œå…¨æ²¡æœ‰æåˆ° MD5 Cacheã€ä»£ç è£å‰ªã€å‹ç¼©é€‰é¡¹ï¼ˆå¦‚Zipå‹ç¼©ï¼‰ç­‰æ„å»ºé¢æ¿é‡Œçš„å…¶ä»–åˆ©å™¨ã€‚</li>
</ul>
<h3 data-id="heading-5">4.ç¼ºä¹å±‚æ¬¡æ„Ÿå’Œç³»ç»Ÿæ€§ï¼š</h3>
<ul>
<li>å›ç­”æ˜¯ç‚¹çŠ¶çš„ï¼Œæƒ³åˆ°ä»€ä¹ˆè¯´ä»€ä¹ˆï¼Œæ²¡æœ‰å½¢æˆä¸€ä¸ªä»åŸºç¡€åˆ°é«˜çº§ã€ä»å¼€å‘æ—¶åˆ°æ„å»ºæ—¶çš„é€»è¾‘é“¾æ¡ã€‚è¿™åæ˜ å‡ºå€™é€‰äººå¯¹è¿™ä¸ªé—®é¢˜çš„è®¤çŸ¥æ˜¯é›¶æ•£çš„ï¼Œè€Œéä½“ç³»åŒ–çš„ã€‚</li>
</ul>
<h2 data-id="heading-6">é‚£å¦‚ä½•å›ç­”â€œå…¨é¢åˆå‡ºè‰²â€ï¼Ÿ</h2>
<p><strong>æˆ‘ä¸è¦ä½ è§‰å¾—ï¼Œæˆ‘è¦æˆ‘è§‰å¾—ï¼</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38a30f50ad1f41309fbe3ff612211e74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512293&amp;x-signature=dG0Jz%2BixuBB%2FHYdMzik1DBoU9AE%3D" alt="è¡¨æƒ…åŒ…æºäºç½‘ç»œ" loading="lazy"/></p>
<p><strong>å½“ç„¶ä¸æ˜¯ä¸Šé¢è¿™æ ·å›ç­”</strong>ï¼Œä¸€ä¸ªé«˜åˆ†çš„å›ç­”ï¼Œåº”è¯¥åƒä¸€ç¯‡ç»“æ„æ¸…æ™°çš„å°ä½œæ–‡ï¼Œæœ‰å±‚æ¬¡ã€æœ‰ç»†èŠ‚ã€æœ‰æ€»ç»“ã€‚</p>
<p><strong>å¯ä»¥è¿™æ ·ç»„ç»‡è¯­è¨€ï¼š</strong></p>
<p><strong>é¦–å…ˆ</strong>ï¼šæ‰¿ä¸Šå¯ä¸‹ï¼Œç»“æ„åŒ–ç­”æ¡ˆ</p>
<p><strong>å…³äº</strong>Cocosçš„åŒ…ä½“ä¼˜åŒ–ï¼Œè¿™æ˜¯ä¸€ä¸ªç³»ç»Ÿå·¥ç¨‹ï¼Œé€šå¸¸ä¼šä» <strong>èµ„æºä¼˜åŒ–</strong>ã€<strong>ä»£ç ä¸å¼•æ“ä¼˜åŒ–</strong>ã€<strong>æ„å»ºé…ç½®ä¼˜åŒ–</strong>ä»¥åŠ<strong>è¿›é˜¶ç­–ç•¥</strong>è¿™å››ä¸ªå±‚é¢æ¥ç»¼åˆè€ƒè™‘ã€‚</p>
<p><strong>ç„¶å</strong>ï¼šåˆ†ç‚¹é˜è¿°ï¼Œç»†èŠ‚è‡´èƒœ</p>
<h3 data-id="heading-7">1. èµ„æºä¼˜åŒ–ï¼ˆè¿™æ˜¯å¤§å¤´ï¼Œå æ¯”æœ€é«˜ï¼‰</h3>
<ul>
<li><strong>å›¾ç‰‡èµ„æºï¼š</strong>
<ul>
<li><strong>åˆå›¾ï¼š</strong> ä¸»è¦ç›®çš„å¹¶ä¸æ˜¯ä¼˜åŒ–åŒ…ä½“ï¼Œä½¿ç”¨åˆå›¾é€šå¸¸åªä¼šåˆ™å¢å¤§åŒ…ä½“ï¼Œä»…æœ‰å¾ˆæè‡´çš„ç¾æœ¯çº¦æŸæ‰ä¼šå‡å°åŒ…ä½“ã€‚</li>
<li><strong>æ¸…ç†å†—ä½™ï¼š</strong> åœ¨æ„å»ºå‰ï¼Œæ£€æŸ¥æœªè¢«ä½¿ç”¨ä½†è¢«è¯¯å¼•ç”¨çš„èµ„æºã€‚åŒæ—¶ï¼Œåˆ©ç”¨â€œä¾èµ–åˆ—è¡¨â€æ’ä»¶ï¼ŒæŸ¥æ‰¾å¹¶æ¸…ç†å®Œå…¨æœªè¢«å¼•ç”¨çš„èµ„æºã€‚</li>
</ul>
</li>
<li><strong>éŸ³é¢‘èµ„æºï¼š</strong>
<ul>
<li>æ ¹æ®ç”¨é€”åŒºåˆ†å¤„ç†ï¼šèƒŒæ™¯éŸ³ä¹è¿™ç±»é•¿éŸ³é¢‘ï¼Œé‡‡ç”¨é«˜å‹ç¼©æ¯”çš„<code>MP3</code>ï¼›çŸ­éŸ³æ•ˆåˆ™è€ƒè™‘ä½¿ç”¨<code>WAV</code>æˆ–æ›´ä½ç ç‡çš„<code>MP3</code>ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6aa545afac28459da0f338a7fd1b5e76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512293&amp;x-signature=Sd0jCABMnPRAbyqqQ1S0I20PlBE%3D" alt="è¡¨æƒ…åŒ…æºäºç½‘ç»œ" loading="lazy"/></li>
</ul>
</li>
<li><strong>å­—ä½“èµ„æºï¼š</strong> å¯¹äºå­—ä½“æ–‡ä»¶ï¼ŒåŠ¨æ€è£å‰ªï¼Œåªä¿ç•™é¡¹ç›®ç”¨åˆ°çš„å­—ï¼›</li>
</ul>
<p><strong>2. ä»£ç ä¸å¼•æ“ä¼˜åŒ–</strong></p>
<ul>
<li><strong>å¼•æ“è£å‰ªï¼š</strong> åœ¨æ„å»ºæ—¶ï¼Œå–æ¶ˆå‹¾é€‰é¡¹ç›®æ ¹æœ¬ç”¨ä¸åˆ°çš„å¼•æ“æ¨¡å—ï¼Œæ¯”å¦‚ç”¨ä¸åˆ°3Dæ¨¡å—ã€è§†é¢‘æ’­æ”¾ã€WebViewç­‰ï¼Œå°±ä¸€å®šè¦æŠŠå®ƒä»¬å»æ‰ï¼Œè¿™æ˜¯æœ€ç›´æ¥çš„ä»£ç ä½“ç§¯å‰Šå‡ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/863fc18de28f4194be6ea2ea05c262fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512293&amp;x-signature=ev3SpKO2l5TXcASqp%2BU3wLaA0qY%3D" alt="" loading="lazy"/></li>
<li><strong>ä»£ç æœ¬èº«</strong>ï¼šé€šè¿‡ä»£ç å‹ç¼©æˆ–è€…æ··æ·†ã€‚å°±æ˜¯å°†ä½ é¡¹ç›®é‡Œé¢å¤æ‚çš„å‘½åå‹ç¼©æˆ–è€…æ··æ·†æˆç®€çŸ­çš„å‘½åï¼Œä¾‹å¦‚<code>let checkZiYuanIsBeRelease = true</code>å‹ç¼©æˆ–è€…æ··æ·†æˆ<code>let aaa = !0</code>ã€‚</li>
</ul>
<p><strong>3. æ„å»ºé…ç½®ä¼˜åŒ–</strong></p>
<ul>
<li>
<p><strong>MD5 Cacheï¼š</strong> é€šè¿‡è¿™ä¸ªå¯ä»¥ç»™æ„å»ºåçš„æ‰€æœ‰èµ„æºæ–‡ä»¶åå°†åŠ ä¸ŠMD5ä¿¡æ¯ï¼Œè§£å†³CDNèµ„æºç¼“å­˜é—®é¢˜ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d9733940580448fb71a85ca54a56cf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512293&amp;x-signature=NW%2F%2F6JX2He1pwZTlRJz%2Fo4b8INM%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p><strong>å‹ç¼©é€‰é¡¹ï¼š</strong> åœ¨æ„å»ºWeb Mobileæ—¶ï¼Œå¯ä»¥å¼€å¯Zipå‹ç¼©ï¼Œè®©æ•´ä¸ªBundleå‹ç¼©æˆä¸ºä¸€ä¸ªZipæ–‡ä»¶ï¼Œä½“ç§¯æ›´å°ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73c357bfb4f5471897e6b2c03812905a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512293&amp;x-signature=rvX%2Fepyax8GcvkP0u2KKeYzQIoY%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p><strong>å°æ¸¸æˆå¹³å°ç‰¹æ®Šå¤„ç†ï¼š</strong>
å¯¹äºå¾®ä¿¡å°æ¸¸æˆç­‰å¹³å°ï¼Œå¯ä»¥ä½¿ç”¨åˆ†ç¦»å¼•æ“ä»£ç ï¼Œç¼“å­˜è¿‡åæ— éœ€å†æ¬¡ä¸‹è½½ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8df6b38aa8e049948f0ef9af864c0e32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512293&amp;x-signature=D%2B0xdGBpEkP2zeaIXwVKloaZQLM%3D" alt="" loading="lazy"/>
å¼•æ“åŸç”Ÿä»£ç (wasm/asmjs)åˆ†åŒ…ç­‰ç­‰ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6159a282a2f5427497a0c57009ac5518~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512293&amp;x-signature=%2BXFwGOuSIJHvOvvDkJxRm%2FAed1o%3D" alt="" loading="lazy"/></p>
</li>
</ul>
<p><strong>4. è¿›é˜¶ä¸æ¶æ„ç­–ç•¥</strong></p>
<ul>
<li><strong>èµ„æºåŠ¨æ€åŠ è½½ä¸çƒ­æ›´æ–°ï¼š</strong> å¯¹äºéé¦–å±å¿…é¡»çš„èµ„æºï¼Œå…¨éƒ¨é‡‡ç”¨åŠ¨æ€åŠ è½½ã€‚åŒæ—¶ï¼Œæ­å»ºçƒ­æ›´æ–°ï¼Œè®©ç©å®¶åªä¸‹è½½å˜æ›´çš„èµ„æºï¼Œè€Œä¸æ˜¯æ‰€æœ‰èµ„æºã€‚</li>
</ul>
<p><strong>æœ€å</strong>ï¼šæ€»ç»“ä¸å±•æœ›</p>
<p><strong>æ ¹æ®</strong>ä¸åŒè¿‡çš„é¡¹ç›®é€‰æ‹©ä¸åŒçš„ä¼˜åŒ–ç­–ç•¥ï¼Œä½†æ˜¯å¯ä»¥éµå¾ªä¸€ä¸ªæ€è·¯ï¼šå…ˆæ¸…ç†åå‹ç¼©ã€å…ˆé™æ€ååŠ¨æ€ã€å…ˆé€šç”¨åå¹³å°ã€‚</p>
<h2 data-id="heading-8">ç»“è¯­</h2>
<p><strong>é¢è¯•</strong>ä¸ä»…ä»…æ˜¯çŸ¥é“â€œæ˜¯ä»€ä¹ˆâ€ï¼Œæ›´é‡è¦çš„æ˜¯å±•ç°ä½ å¦‚ä½•ç³»ç»Ÿæ€§åœ°æ€è€ƒé—®é¢˜å’Œè§£å†³é—®é¢˜ã€‚</p>
<p><strong>ä½†æ˜¯</strong>é¢è¯•æœ‰æ—¶å€™é™¤äº†çœ‹çœ‹é¢è¯•è€…çš„æ°´å¹³å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–å› ç´ ï¼Œå°ä¼™ä¼´ä»¬çŸ¥é“éƒ½æœ‰å“ªäº›å—ï¼Ÿ</p>
<p><strong>æˆ‘æ˜¯"äº¿å…ƒç¨‹åºå‘˜"ï¼Œä¸€ä½æœ‰ç€8å¹´æ¸¸æˆè¡Œä¸šç»éªŒçš„ä¸»ç¨‹ã€‚åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œå¸Œæœ›èƒ½ç»™åˆ°æ‚¨å¸®åŠ©, ä¹Ÿå¸Œæœ›é€šè¿‡æ‚¨èƒ½å¸®åŠ©åˆ°å¤§å®¶ã€‚</strong></p>
<p>AD:ç¬”è€…çº¿ä¸Šçš„å°æ¸¸æˆã€Šæ‰“èºä¸é—¯å…³ã€‹ã€Šè´ªåƒè›‡æŒæœºç»å…¸ã€‹ã€Šé‡åŠ›è¿·å®«çƒã€‹ã€Šå¡«è‰²ä¹‹æ—…ã€‹ã€Šæ–¹å—æŒæœºç»å…¸ã€‹å¤§å®¶å¯ä»¥è‡ªè¡Œç‚¹å‡»æœç´¢ä½“éªŒã€‚</p>
<p>å®ä¸ç›¸ç’ï¼Œæƒ³è¦ä¸ª<strong>èµ</strong>å’Œ<strong>çˆ±å¿ƒ</strong>ï¼è¯·æŠŠè¯¥æ–‡ç« <strong>åˆ†äº«</strong>ç»™ä½ è§‰å¾—æœ‰éœ€è¦çš„å…¶ä»–å°ä¼™ä¼´ã€‚è°¢è°¢ï¼</p>
<p>æ¨èä¸“æ ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3175880857546129410%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3175880857546129410#wechat_redirect" ref="nofollow noopener noreferrer">çŸ¥è¯†ä»˜è´¹ä¸“æ </a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26mid%3D2247487282%26idx%3D1%26sn%3De3cb8ab6f5c0d5f804d5c29e2e90b9ad%26chksm%3Dc00daec5f77a27d33933e877464d8cde24c4c947d3755f5e8262c634634617e7c26de3953a54%26token%3D336413522%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg5NTY2MjIzMg==&amp;mid=2247487282&amp;idx=1&amp;sn=e3cb8ab6f5c0d5f804d5c29e2e90b9ad&amp;chksm=c00daec5f77a27d33933e877464d8cde24c4c947d3755f5e8262c634634617e7c26de3953a54&amp;token=336413522&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">ä½ çŸ¥é“å’Œä¸çŸ¥é“çš„å¾®ä¿¡å°æ¸¸æˆå¸¸ç”¨APIæ•´ç†ï¼Œèµ¶ç´§æ”¶è—ç”¨èµ·æ¥~</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3207702867494305797%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3207702867494305797#wechat_redirect" ref="nofollow noopener noreferrer">100ä¸ªCocoså®ä¾‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3073771187570999299%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3073771187570999299#wechat_redirect" ref="nofollow noopener noreferrer">8å¹´ä¸»ç¨‹æ‰‹æŠŠæ‰‹æ‰“é€ Cocosç‹¬ç«‹æ¸¸æˆå¼€å‘æ¡†æ¶</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3121583619634626562%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3121583619634626562#wechat_redirect" ref="nofollow noopener noreferrer">å’Œ8å¹´æ¸¸æˆä¸»ç¨‹ä¸€èµ·å­¦ä¹ è®¾è®¡æ¨¡å¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3Faction%3Dgetalbum%26__biz%3DMzg5NTY2MjIzMg%3D%3D%26scene%3D1%26album_id%3D3038883468588089350%26count%3D3%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;__biz=Mzg5NTY2MjIzMg==&amp;scene=1&amp;album_id=3038883468588089350&amp;count=3#wechat_redirect" ref="nofollow noopener noreferrer">ä»é›¶å¼€å§‹å¼€å‘è´ªåƒè›‡å°æ¸¸æˆåˆ°ä¸Šçº¿ç³»åˆ—</a></p>
<p>ç‚¹å‡»ä¸‹æ–¹ç°è‰²æŒ‰é’®+å…³æ³¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨šæ™–å›å…¬å¸çš„æœ€æ–°å·¥èµ„å’Œæ‹›äººæ ‡å‡†]]></title>    <link>https://juejin.cn/post/7571352754896535578</link>    <guid>https://juejin.cn/post/7571352754896535578</guid>    <pubDate>2025-11-12T00:45:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571352754896535578" data-draft-id="7571352754896502810" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨šæ™–å›å…¬å¸çš„æœ€æ–°å·¥èµ„å’Œæ‹›äººæ ‡å‡†"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-12T00:45:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CodeSheep"/> <meta itemprop="url" content="https://juejin.cn/user/4371313961738616"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨šæ™–å›å…¬å¸çš„æœ€æ–°å·¥èµ„å’Œæ‹›äººæ ‡å‡†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313961738616/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CodeSheep
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:45:43.000Z" title="Wed Nov 12 2025 00:45:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºå…·èº«æ™ºèƒ½é¢†åŸŸçš„ç‹¬è§’å…½ï¼Œæ™ºå…ƒæœºå™¨äººè¿™ä¸¤å¹´åœ¨èµ„æœ¬å¸‚åœºå¯è°“æ˜¯å¤‡å—å…³æ³¨.</p>
<p>è°éƒ½æ²¡æœ‰æƒ³åˆ°ï¼Œè¿™å®¶æˆç«‹ä»…ä»…æ‰ä¸¤å¹´çš„åˆ›ä¸šå…¬å¸ï¼Œå¦‚ä»Šå·²ç»æˆä¸ºäº†å›½å†…å…·èº«æ™ºèƒ½é¢†åŸŸä¼°å€¼æœ€é«˜çš„å…¬å¸ä¹‹ä¸€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66a1445752bf4b22bae1105708bf8456~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513142&amp;x-signature=BOhfiqDbXH4%2FJsoGwg0mjCtsnvg%3D" alt="" loading="lazy"/></p>
<p>æˆç«‹ä¸¤å¹´å¤šï¼Œæ™ºå…ƒå·²ç»å®Œæˆäº†å¤šè½®æ¬¡èèµ„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23ab85ed82d140f99806b3db5ef49a1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513142&amp;x-signature=jGj3B5JX0KmPxAoZvz1xqCOiMn4%3D" alt="" loading="lazy"/></p>
<p>è€Œå½“æˆ‘ä»¬ç¿»å¼€æ™ºå…ƒæœºå™¨äººçš„è‚¡ä¸œåå†Œï¼Œå¯æ˜¯å ªç§°ç§‘æŠ€åˆ›æŠ•ç•Œçš„â€œæ˜æ˜Ÿé˜µå®¹â€ï¼šæ—¢æœ‰é«˜ç“´åˆ›æŠ•ã€çº¢æ‰ä¸­å›½ã€é¼æ™–æŠ•èµ„ç­‰é¡¶çº§é£æŠ•ï¼›ä¹ŸåŒ…å«æ¯”äºšè¿ªã€ä¸Šæ±½ã€åŒ—æ±½ç­‰è½¦ä¼å·¨å¤´ï¼›é™¤æ­¤ä¹‹å¤–è¿˜æœ‰åƒç«‹è®¯ç²¾å¯†ç­‰è¿™æ ·çš„äº§ä¸šé¾™å¤´ã€‚</p>
<p>åŒ…æ‹¬ä¸ä¹…å‰è…¾è®¯å’Œäº¬ä¸œè¿™ä¸¤å¤§äº’è”ç½‘å·¨å¤´åœ¨å…·èº«æ™ºèƒ½é¢†åŸŸçš„æŠ•èµ„çº·çº·ä¹Ÿéƒ½é€‰æ‹©äº†æ™ºå…ƒï¼Œè¿™ä¹Ÿå……åˆ†è¯æ˜è¿™å®¶å…¬å¸åœ¨èµ„æœ¬å¸‚åœºçš„ç‹¬ç‰¹åœ°ä½ã€‚</p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œä¸€ä¸ªæœˆå‰æ™ºå…ƒæ­£å¼å®˜å®£åˆä¼™äººå›¢é˜Ÿï¼Œæ­£å¼å…¬å¸ƒäº†ã€Œä¸ƒäººæ ¸å¿ƒå›¢é˜Ÿã€åå•ï¼Œæ½æ‰©äº†åŒ…æ‹¬æŠ€æœ¯ç ”å‘ã€å¸‚åœºè¥é”€ã€ä¸šåŠ¡å¼€å‘å’ŒäººåŠ›èµ„æºç­‰<strong>å„ä¸ªé¢†åŸŸçš„ç²¾è‹±</strong>ã€‚</p>
<p>çœ‹åˆ°è¿™é‡Œï¼Œ<strong>ç›¸ä¿¡å¤§å®¶ä¹ŸæŒºå¥½å¥‡</strong>ï¼Œæ—¢ç„¶è¿™ä¸ªå…¬å¸åœ¨èµ„æœ¬å¸‚åœºå¦‚æ­¤å‡ºåœˆï¼Œå¤–åŠ åˆæœ‰å„è·¯å¤§ä½¬ç›¸ç»§ä¸ºä¹‹å¥”èµ´ï¼Œé‚£ä»–ä»¬<strong>åœ¨ä¸šå†…çš„ã€Œè–ªèµ„æ°´å¹³ã€å’Œã€Œæ‹›äººæ ‡å‡†ã€ç©¶ç«Ÿåˆæ˜¯æ€æ ·çš„å‘¢</strong>ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76bc646554014d268ea648752f8754b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513142&amp;x-signature=XtQsCS0bCKNlpP6O0wecRHxaNzA%3D" alt="" loading="lazy"/></p>
<p>åŒ…æ‹¬å‰æ®µæ—¶é—´æ™ºå…ƒ 2026 æ ¡æ‹›å¯åŠ¨æ—¶ï¼Œä¹Ÿæœ‰ä¸å°‘åŒå­¦ä¹Ÿå…³å¿ƒè¿™å®¶å…¬å¸çš„ã€Œæ‹›è˜å²—ä½ã€å’Œã€Œè–ªèµ„å¾…é‡ã€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14d69b119a3347c3b72de20108cbe8aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513142&amp;x-signature=Ep5lFOQpuY8B6Ay4bswlUi4F4lo%3D" alt="æ™ºå…ƒ2026æ ¡å›­æ‹›è˜å®˜æ–¹æµ·æŠ¥" loading="lazy"/></p>
<p>æ­£å¥½æœ€è¿‘ï¼Œæˆ‘å‘ç°æ™ºå…ƒåœ¨æŸæ‹›è˜å¹³å°ä¸Š<strong>åˆæ›´æ–°äº†ä¸€å¤§æ³¢æœ€æ–°æ‹›è˜ä¿¡æ¯å’Œå²—ä½</strong>ï¼Œè€Œå…¶ä¸­<strong>è¿‘å…«æˆ</strong>éƒ½æ˜¯æŠ€æœ¯ç ”å‘å²—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f70b59b5ada8468dbe7fb316fba848e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513142&amp;x-signature=joque0JrxwuBqHvgOUgRC5rQIcM%3D" alt="" loading="lazy"/></p>
<p>å…¶å·¥ä½œåœ°ç‚¹ä¸»è¦ base åœ¨åŒ—äº¬ã€ä¸Šæµ·å’Œæ·±åœ³ã€‚</p>
<p>å°±æŠ€æœ¯ç ”å‘å²—è€Œè¨€ï¼Œæ™ºå…ƒçš„æ‹›è˜å²—ä½åŸºæœ¬è¦†ç›–äº†æœºå™¨äººç ”å‘çš„å„ä¸ªç¯èŠ‚ï¼Œè€Œä¸”<strong>æ ¸å¿ƒå²—å…¨å¼€æ”¾</strong>ã€‚</p>
<p>å…·ä½“æ¥çœ‹ï¼Œçƒ­æ‹›å²—ä½åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ç®—æ³•ç±»</strong>ï¼šå…·èº«ç®—æ³•å·¥ç¨‹å¸ˆã€è¿åŠ¨æ§åˆ¶ç®—æ³•å·¥ç¨‹å¸ˆã€å¤šæ¨¡æ€å¤§æ¨¡å‹ç®—æ³•å·¥ç¨‹å¸ˆç­‰</li>
<li><strong>è½¯ä»¶ç³»ç»Ÿç±»</strong>ï¼šC++å¼€å‘å·¥ç¨‹å¸ˆã€ä»¿çœŸç³»ç»Ÿå¼€å‘å·¥ç¨‹å¸ˆã€åµŒå…¥å¼è½¯ä»¶å·¥ç¨‹å¸ˆç­‰</li>
<li><strong>ç¡¬ä»¶ä¸ç»“æ„ç±»</strong>ï¼šç»“æ„å·¥ç¨‹å¸ˆã€ç¡¬ä»¶å·¥ç¨‹å¸ˆç­‰</li>
<li><strong>æµ‹è¯•ç±»</strong>ï¼šè½¯ä»¶æµ‹è¯•å·¥ç¨‹å¸ˆã€ç¡¬ä»¶æµ‹è¯•å·¥ç¨‹å¸ˆã€æµ‹è¯•å¼€å‘å·¥ç¨‹å¸ˆç­‰</li>
</ul>
<p>è€ŒéæŠ€æœ¯ç ”å‘å²—è¿™ä¸€å—ï¼Œæ™ºå…ƒä¹Ÿæä¾›äº†åŒ…æ‹¬<strong>ç”Ÿäº§</strong>ã€<strong>è¿è¥</strong>ã€<strong>é‡‡è´­</strong>ã€<strong>å¸‚åœº</strong>ã€<strong>é”€æœ</strong>ã€<strong>ç­–åˆ’</strong>ä»¥åŠå…¶ä»–è¯¸å¤š<strong>èŒèƒ½ç±»</strong>ã€<strong>æ”¯æŒç±»</strong>å²—ä½ã€‚</p>
<p>è¯ä¸å¤šè¯´ï¼Œ<strong>å…ˆæ¥çœ‹çœ‹å²—ä½ JD å’Œæ‹›äººæ ‡å‡†ã€‚</strong></p>
<p>è¿™é‡Œä¹Ÿé›†ä¸­æ¢³ç†äº†ä¸€ä¸‹ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>
<p><strong>å…·èº«ç®—æ³•ç±»å²—ä½</strong>åŸºæœ¬éƒ½æ˜¯æœºå™¨äººæ“ä½œï¼ˆæ¯”å¦‚çµå·§æ‰‹ä¹‹ç±»ï¼‰ç®—æ³•ç ”ç©¶ï¼Œè¦æ‡‚å¤§æ¨¡å‹ï¼Œè¦æ‡‚å¼ºåŒ–å­¦ä¹ ï¼Œæœ‰ä»¿çœŸèƒ½åŠ›å’Œå·¥ç¨‹èƒ½åŠ›é‚£æ›´æ˜¯å¤´ç­‰åŠ åˆ†é¡¹ã€‚</p>
</li>
<li>
<p><strong>è¿æ§ç±»å²—ä½</strong>åˆ™éœ€è¦æ‡‚æœºå™¨äººå­¦ã€åˆšä½“è¿åŠ¨å­¦ã€åˆšä½“åŠ¨åŠ›å­¦ï¼ŒæŒæ¡å¸¸ç”¨çš„FK/IKæ–¹æ³•åŸºæœ¬æ˜¯æ ‡é…ï¼ŒRBDLã€Pinocchio ç­‰åŠ¨åŠ›å­¦åº“ç©å¾—æºœçš„è¯é‚£æ˜¯æœ€å¥½ä¸è¿‡çš„äº†ã€‚</p>
</li>
<li>
<p><strong>ä»¿çœŸå¼€å‘ç±»å²—ä½</strong>åˆ™éœ€è¦ä½ æ‡‚æœºå™¨äººä»¿çœŸå¹³å°ï¼Œç†Ÿæ‚‰ ROS2 ä»¥åŠ Isaac Simã€MuJoCo ç­‰å…·ä½“çš„ä»¿çœŸå¼•æ“æˆ–å¹³å°ã€‚</p>
</li>
</ul>
<p><strong>å¯ä»¥è¯´ï¼Œæƒ³åœ¨æ™ºå…ƒåšæŠ€æœ¯ï¼Œç†Ÿç»ƒ Python/C++ ç¼–ç¨‹æ˜¯æ ‡é…ï¼Œç†Ÿæ‚‰ ROS/ROS2 ç³»ç»Ÿæ˜¯æ ‡é…ï¼Œç†Ÿæ‚‰æœºå™¨äººä»¿çœŸå·¥å…·åŸºæœ¬è¿˜æ˜¯æ ‡é…</strong>ã€‚</p>
<p>åŒæ—¶å¦‚æœä½ è¿˜æœ‰ RoboMaster ç­‰<strong>ç«èµ›ç»éªŒ</strong>ã€æœºå™¨äºº<strong>é¡¶ä¼š</strong>ï¼ˆICRAã€RSSã€IROSç­‰ï¼‰æˆ–<strong>æœŸåˆŠ</strong>ï¼ˆT-ROã€IJRRã€T-FRã€T-MECHç­‰ï¼‰çš„è®ºæ–‡çš„è¯ï¼Œé‚£æ­å–œä½ ï¼Œè¿™å¯å°±å¤ªåƒé¦™äº†ã€‚</p>
<p>å†å…·ä½“ä¸€ç‚¹æ¥çœ‹ï¼Œç®—æ³•ç±»æˆ‘ä»¬ä»¥ã€Œ<strong>å…·èº«ç®—æ³•å·¥ç¨‹å¸ˆ</strong>ã€å²—ä½ä¸ºä¾‹ï¼Œå¤§å®¶å¯ä»¥è¯¦ç»†ç›´è§‚æ„Ÿå—ä¸€ä¸‹ä»–ä»¬çš„è¯¦ç»†æ‹›è˜æ ‡å‡†å’Œå²—ä½è¦æ±‚ã€‚</p>
<blockquote>
<p><strong>èŒä½æè¿°</strong></p>
<ul>
<li>è®¾è®¡å¹¶å®ç°VLAç®—æ³•æ–¹æ¡ˆï¼Œä»¥é‡äº§è½åœ°ä¸ºå¯¼å‘ï¼Œç†Ÿæ‚‰RT-1/2ã€pi0ç­‰ä¸»æµå¤šæ¨¡æ€å…·èº«å¤§æ¨¡å‹ä¼˜åŠ£ï¼Œæ”¹å–„è°ƒä¼˜</li>
<li>è´Ÿè´£æœºå™¨äººå…·èº«æ“ä½œä»»åŠ¡çš„å¼ºåŒ–å­¦ä¹ ç®—æ³•è®¾è®¡ã€å¼€å‘å’Œä¼˜åŒ– ä¼˜åŒ–Sim2Realçš„è¿ç§»æŠ€æœ¯ï¼Œæé«˜ç®—æ³•é²æ£’æ€§ï¼›è·Ÿè¸ªå‰æ²¿æŠ€æœ¯ï¼Œè¿›è¡Œå¼ºåŒ–å­¦ä¹ ç®—æ³•çš„è°ƒç ”ã€æ€§èƒ½å¯¹æ¯”å’Œè¯„ä¼°</li>
<li>ç ”ç©¶å¤šæ¨¡æ€å­¦ä¹ æ–¹æ³•ï¼Œç»“åˆè§†è§‰ã€è§¦è§‰ã€åŠ›åé¦ˆæå‡æœºå™¨äººå†³ç­–èƒ½åŠ› åŒ…æ‹¬VLMçš„è®­ç»ƒä¸å¾®è°ƒï¼Œå®ç°æ¨¡å‹å®é™…åœºæ™¯çš„è½åœ°éœ€æ±‚ï¼Œå¤šæ¨¡æ€æ•°æ®é›†çš„æ„å»ºã€æ¸…æ´—ç­‰ï¼Œæå‡ç®—æ³•æ€§èƒ½å’Œå†³ç­–è´¨é‡ç­‰</li>
</ul>
</blockquote>
<blockquote>
<p><strong>èŒä½è¦æ±‚</strong></p>
<ul>
<li>è®¡ç®—æœºç§‘å­¦ã€äººå·¥æ™ºèƒ½ã€æœºå™¨äººå·¥ç¨‹æˆ–ç›¸å…³é¢†åŸŸç¡•å£«åŠä»¥ä¸Šå­¦å†</li>
<li>å…·å¤‡æ·±åº¦å­¦ä¹ ã€è®¡ç®—æœºè§†è§‰å’Œè‡ªç„¶è¯­è¨€å¤„ç†çš„æ‰å®ç†è®ºåŸºç¡€å’Œå®è·µç»éªŒ</li>
<li>ç†Ÿç»ƒæŒæ¡Pythonã€C++ç­‰ç¼–ç¨‹è¯­è¨€ï¼Œæœ‰ä½¿ç”¨PyTorchã€TensorFlowç­‰æ·±åº¦å­¦ä¹ æ¡†æ¶çš„ç»éªŒ</li>
<li>ç†Ÿæ‚‰VLM/MLLMæ¨¡å‹çš„è®­ç»ƒæµç¨‹ï¼Œäº†è§£å¸¸è§çš„å¢é‡è®­ç»ƒæ–¹æ³•ä¸å¾®è°ƒæ–¹æ³•</li>
<li>ç†Ÿæ‚‰ä¸»æµçš„å¤šæ¨¡æ€é¢„è®­ç»ƒåŸºåº§ï¼Œç†Ÿæ‚‰å¤šæ¨¡æ€å¯¹é½ç­‰å…³é”®æŠ€æœ¯</li>
<li>å…·å¤‡è‰¯å¥½çš„å›¢é˜Ÿåˆä½œç²¾ç¥å’Œæ²Ÿé€šèƒ½åŠ›ï¼Œèƒ½å¤Ÿé€šè¿‡å›¢é˜Ÿåä½œæ¨è¿›é¡¹ç›®è¿›å±•</li>
</ul>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå…¶å¯¹å­¦å†ã€ç‰¹å®šå‚ç›´é¢†åŸŸçš„ç¼–ç¨‹èƒ½åŠ›å’Œå¼€å‘ç»éªŒç­‰éƒ½æœ‰ä¸ä½çš„è¦æ±‚ï¼Œå¦‚æœæœ‰ç§‘ç ”æˆæœã€è®ºæ–‡æˆ–è€…ç«èµ›åŠ æŒï¼Œé‚£æ›´æ˜¯åŠ åˆ†é¡¹ã€‚</p>
<p>è€Œç±»ä¼¼äºã€Œ<strong>C++è½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆ</strong>ã€è¿™æ ·çš„å¼€å‘ç±»å²—ä½ï¼Œå…¶æ‰€è¦æ±‚çš„ç¼–ç ç»éªŒå’Œå·¥ç¨‹èƒ½åŠ›ä¹Ÿéƒ½æ˜¯éœ€è¦ä¸<strong>æœºå™¨äººæ§åˆ¶</strong>ã€<strong>é€šä¿¡åè®®</strong>ã€<strong>æ§åˆ¶å·¥ç¨‹</strong>ç­‰å¼ºç›¸å…³ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fea8dcef68f24317a7b47cec9bc35c0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513142&amp;x-signature=xhAPcxc2WLS4Lh2vSDn3Z%2Bu9mKA%3D" alt="" loading="lazy"/></p>
<p>é™¤äº†å¸¸è§„æŠ€æœ¯æ‹›è˜å²—ä¹‹å¤–ï¼Œæ™ºå…ƒè¿˜è®¾æœ‰é¢å‘å…¨çƒé¡¶å°–æŠ€æœ¯äººæ‰çš„<strong>ä¼˜æ‰è®¡åˆ’</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1e1b88d0b8242b7844864dd4b1f0f2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513142&amp;x-signature=xM5PPtKQ7lju5gvO08jiXrrAtzM%3D" alt="" loading="lazy"/></p>
<p>è¯¥è®¡åˆ’ä¸»è¦é¢å‘å…¬å¸å†…éƒ¨çš„ã€Œ<strong>æ™ºå…ƒ X-Lab</strong>ã€å’Œã€Œ<strong>æ™ºå…ƒå…·èº«ç ”ç©¶ä¸­å¿ƒ</strong>ã€ä¸¤å¤§æ ¸å¿ƒæŠ€æœ¯ç ”ç©¶ä¸­å¿ƒï¼Œå…¶ä¸­å‰è€…ç›´æ¥ç”± CTO ç¨šæ™–å›ç›´æ¥ç®¡ç†ï¼Œè€Œåè€…åˆ™ç”±å…·èº«å¤§ä½¬ç½—å‰‘å²šåšå£«äº²è‡ªç‰µå¤´ç»„å»ºå’Œå¸¦é˜Ÿã€‚</p>
<p>å¤§å®¶å¦‚æœæƒ³è¿›æ™ºå…ƒåšæŠ€æœ¯çš„è¯ï¼Œèƒ½è¿›è¿™ä¸¤å¤§æŠ€æœ¯ç ”ç©¶ä¸­å¿ƒç®€ç›´ä¸è¦å¤ªé¦™å•Šï¼Œä¸¤ä½é¢†åŸŸå†…é¡¶å°–çš„ 90 åæŠ€æœ¯å¤§ä½¬äº²è‡ªå¸¦é˜ŸåŸ¹å…»ï¼Œæˆé•¿é€Ÿåº¦ç›´æ¥æ‹‰æ»¡ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8bee41a70d34b0480f1efbf986081ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513142&amp;x-signature=7aLvKiu4JfcN1bqLE8YoDiZ42Fo%3D" alt="" loading="lazy"/></p>
<p>èŠå®Œå²—ä½ JD å’Œæ‹›äººæ ‡å‡†ï¼Œæ¥ç€æˆ‘ä»¬<strong>å†æ¥çœ‹ä¸€çœ¼è–ªèµ„æ•°æ®</strong>ã€‚</p>
<p>æ€ä¹ˆè¯´å‘¢ï¼Œæ”¾åœ¨å‚ç›´é¢†åŸŸå†…æ¥çœ‹è¿˜ç®—æ¯”è¾ƒå…·æœ‰å¸å¼•åŠ›ï¼Œä¸æ˜¯æœ€é¡¶å°–ï¼Œä½†æ˜¯æ™®ééƒ½ä¸ä½ï¼Œå¤§å¤šéƒ½æ˜¯ 15 è–ªã€‚</p>
<p>ç»†çœ‹äº†ä¸€ä¸‹ï¼Œå…¶ä¸­ã€Œ<strong>ç®—æ³•å²—</strong>ã€å’Œã€Œ<strong>æœºå™¨äººç ”å‘æ ¸å¿ƒå²—</strong>ã€è–ªèµ„æ®µä½åŸºæœ¬æ˜¯æœ€é«˜çš„ï¼Œä¸å°‘éƒ½èƒ½ç»™åˆ° ï¼ˆ30K-60Kï¼‰*15 è–ªçš„æ°´å¹³ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/393298556cba41a1bd6659e10b0f4475~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513142&amp;x-signature=3QXJAON8sPT7BB03ffK8rNhPdAg%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶åƒã€Œç®—æ³•ä¸“å®¶ã€ã€ã€Œç®—æ³•æ¶æ„å¸ˆã€ã€ã€Œç®—æ³•æ€»ç›‘ã€è¿™ç±»å²—ä½è–ªèµ„ä¼šç»™çš„æ›´é«˜ï¼ŒåŸºæœ¬éƒ½æ˜¯ï¼ˆ50K-80Kï¼‰*15 è–ªè¿™æ ·ä¸€ä¸ªæ°´å¹³ï¼Œè¿™ç§é«˜ç«¯å²—ä½åŸºæœ¬éƒ½æ˜¯å¥”ç€å¹´å…¥ç™¾ä¸‡å»çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe42296d11d941d1a0eaf37560f75023~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513142&amp;x-signature=rxOqjW9h14JXk%2FzRqU%2B2Pr4yQqw%3D" alt="" loading="lazy"/></p>
<p>è€Œç±»ä¼¼ã€Œ<strong>è½¯ä»¶å¼€å‘</strong>ã€ã€ã€Œ<strong>C++å¼€å‘</strong>ã€ç­‰å¼€å‘å²—è¾ƒç®—æ³•å²—è–ªèµ„ç›¸æ¯”åŸºæœ¬æ˜¯è¦ä½ä¸Šä¸€æ¡£ï¼Œå¤§è‡´èŒƒå›´é”šå®šåœ¨ï¼ˆ20K-40Kï¼‰*15 è¿™æ ·ä¸€ä¸ªåŒºé—´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/177a6520a9c34e119c4f93ca8c643650~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513142&amp;x-signature=YdOEiJgfOd5DO9ftPxXjuj8snf0%3D" alt="" loading="lazy"/></p>
<p>å¤§å®¶è§‰å¾—è¿™ä¸ªæ•°æ®æ€ä¹ˆæ ·ï¼Ÿ</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæ™ºå…ƒå®˜ç½‘è¿˜å‘å¸ƒäº†å¾ˆå¤šä¸å®ä¹ ç›¸å…³çš„å²—ä½æ‹›è˜ï¼Œå¤§æ¨¡å‹å®ä¹ ã€å…·èº«ç®—æ³•å®ä¹ ã€åµŒå…¥å¼å®ä¹ ã€ç¡¬ä»¶å®ä¹ ç­‰ç­‰éƒ½æœ‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bae291d12f64fdd96e769e194faa235~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513142&amp;x-signature=ovpr1jwnVf9VqWWVP0w00%2FVDLVo%3D" alt="" loading="lazy"/></p>
<p>å®ä¹ ç”Ÿå®ä¹ å¾…é‡è¿™å—åŸºæœ¬é”šå®šåœ¨æœ¬ç§‘ 200-300å…ƒ/å¤©ï¼Œç¡•å£« 300-400å…ƒ/å¤©ï¼Œåšå£« 500-600å…ƒ/å¤©ï¼Œè¡¨ç°ä¼˜ç§€çš„è¯æœ‰é¡¹ç›®å¥–é‡‘ï¼Œæ­¤å¤–è¿˜æä¾›ä¸€æ—¥ä¸‰é¤ã€åŠ ç­é¤è¡¥ï¼Œéƒ¨åˆ†åŸå¸‚æœ‰æä¾›å®ä¹ å®¿èˆæˆ–ä½æˆ¿è¡¥è´´ç­‰ã€‚</p>
<p>æ€»ä½“æ¥çœ‹ï¼Œä½œä¸ºä¸€å®¶æœºå™¨äººåˆåˆ›å…¬å¸ï¼Œè¿™ä¸ªè–ªèµ„æ°´å¹³æ”¾åˆ°è¡Œä¸šæ¥çœ‹ç®—ä¸ä¸Šæœ€é¡¶å°–ï¼Œä½†ä¹Ÿè¿˜å¯ä»¥ï¼ŒåŒæ—¶ä»è¿™äº›æ‹›è˜ä¿¡æ¯ä¸­ä¹Ÿèƒ½æŠ˜å°„å‡ºè¿™å®¶å¹´è½»ä¼ä¸šå¯¹æŠ€æœ¯åˆ›æ–°å’Œå“è¶Šäººæ‰çš„æ¸´æ±‚ã€‚</p>
<p>å¯¹äºæœ‰å¿—äºæŠ•èº«æœºå™¨äººè¡Œä¸šçš„ä¸“ä¸šäººå£«å’Œå¹´è½»å­¦å­æ¥è¯´ï¼Œæ™ºå…ƒçš„ç¡®æ˜¯ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„å¹³å°ã€‚</p>
<p>åœ¨å½“ä»Šå¿«é€Ÿå‘å±•çš„äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œå…·èº«æ™ºèƒ½æœºå™¨äººå·²ç»æˆä¸ºæœ€ç‚™æ‰‹å¯çƒ­çš„èµ›é“ä¹‹ä¸€ï¼Œä½œä¸ºç§‘æŠ€å¯†é›†å‹è¡Œä¸šï¼Œå¹¶ä¸”ç›®å‰å¤„äºä¸Šè¡ŒæœŸï¼Œåé¢æ½œåŠ›å¯æœŸï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´æœæ–­å¯ä»¥è¯•è¯•ã€‚</p>
<p>å¥½äº†ï¼Œé‚£ä»¥ä¸Šå°±æ˜¯ä»Šå¤©çš„å†…å®¹åˆ†äº«äº†ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼Œæˆ‘ä»¬ä¸‹ç¯‡è§ã€‚</p>
<blockquote>
<p>æ³¨ï¼šæœ¬æ–‡åœ¨GitHubå¼€æºä»“åº“ã€Œç¼–ç¨‹ä¹‹è·¯ã€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frd2coding%2FRoad2Coding" target="_blank" title="https://github.com/rd2coding/Road2Coding" ref="nofollow noopener noreferrer">github.com/rd2coding/Râ€¦</a> ä¸­å·²ç»æ”¶å½•ï¼Œé‡Œé¢æœ‰æˆ‘æ•´ç†çš„6å¤§ç¼–ç¨‹æ–¹å‘(å²—ä½)çš„è‡ªå­¦è·¯çº¿+çŸ¥è¯†ç‚¹å¤§æ¢³ç†ã€é¢è¯•è€ƒç‚¹ã€æˆ‘çš„ç®€å†ã€å‡ æœ¬ç¡¬æ ¸pdfç¬”è®°ï¼Œä»¥åŠç¨‹åºå‘˜ç”Ÿæ´»å’Œæ„Ÿæ‚Ÿï¼Œæ¬¢è¿starã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¥äº†è§£ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä½ çš„ Flutter WebView åœ¨ iOS 26 ä¸Šæœ‰ç‚¹å‡»é—®é¢˜ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571306072423448618</link>    <guid>https://juejin.cn/post/7571306072423448618</guid>    <pubDate>2025-11-12T00:48:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571306072423448618" data-draft-id="7571348736153174052" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¥äº†è§£ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä½ çš„ Flutter WebView åœ¨ iOS 26 ä¸Šæœ‰ç‚¹å‡»é—®é¢˜ï¼Ÿ"/> <meta itemprop="keywords" content="Android,Flutter,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T00:48:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹çŒ«deå°éƒ­"/> <meta itemprop="url" content="https://juejin.cn/user/817692379985752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¥äº†è§£ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä½ çš„ Flutter WebView åœ¨ iOS 26 ä¸Šæœ‰ç‚¹å‡»é—®é¢˜ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692379985752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹çŒ«deå°éƒ­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:48:32.000Z" title="Wed Nov 12 2025 00:48:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰æ®µæ—¶é—´ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F175099" target="_blank" title="https://github.com/flutter/flutter/issues/175099" ref="nofollow noopener noreferrer">#175099</a> åˆæå‡ºäº†ä¸€ä¸ª  iOS 26  çš„é—®é¢˜ï¼Œå¤§æ¦‚å°±æ˜¯ <code>webview_flutter</code> çš„ç‚¹å‡»äº‹ä»¶åˆå‡ºç°äº†â€œç‚¹ä¸åŠ¨â€æˆ–â€œç‚¹äº†ä¸è§¦å‘â€ çš„æƒ…å†µï¼Œæºå¤´è¿˜æ˜¯ <strong>WKWebViewï¼ˆWebKitï¼‰å†…éƒ¨çš„æ‰‹åŠ¿è¯†åˆ«å™¨ä¸ Flutter åœ¨ Engine é‡Œç”¨äºâ€œé˜»æ­¢/å»¶è¿Ÿâ€æ‰‹åŠ¿çš„ recognizer ä¹‹é—´çš„å†²çª</strong>ã€‚</p>
<p>é’ˆå¯¹å’Œè¿™ä¸ªé—®é¢˜ï¼Œå»å¹´ iOS 18.2  beta é‡Œæœ‰å‡ºç°ç±»ä¼¼æƒ…å†µï¼Œè€Œé‚£æ—¶å€™åœ¨ Engine é‡Œï¼Œå¯ä»¥é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fengine%2Fpull%2F56804%2Ffiles" target="_blank" title="https://github.com/flutter/engine/pull/56804/files" ref="nofollow noopener noreferrer">#56804</a> è¿™ä¸ª PRï¼Œä¸´æ—¶ç§»é™¤å¹¶å†æ·»åŠ  <code>delayingRecognizer</code> çš„å®ç°æ¥æš‚æ—¶ç»•è¿‡é—®é¢˜ï¼Œ<strong>ä¸»è¦æ˜¯é€šè¿‡åˆ·æ–° WebKit çš„å†…éƒ¨çŠ¶æ€ä»è€Œä¸´æ—¶ä¿®å¤</strong>ï¼Œä½†è¿™ä¸ªç»•è¿‡åœ¨ iOS 26 ä¸Šé€ æˆäº†å¦ä¸€ä¸ªä¸¥é‡å›å½’ï¼ˆoverlay çš„æ‰‹åŠ¿é˜»æ­¢å¤±æ•ˆã€è§¦æ‘¸ç©¿é€åº•ä¸‹çš„ WebViewï¼‰ï¼Œå› æ­¤åœ¨æœ€è¿‘è¢«é’ˆå¯¹ iOS 26 çš„æ¡ä»¶ä¸‹å›é€€ï¼ˆrevertï¼‰äº†è¯¥æäº¤ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f6feca614be4cceb0fb9faa35caa7d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513312&amp;x-signature=%2Bswyzp5RL6k6T5wFGilvuDrFs0I%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>å¦å¤–ä¹Ÿæ˜¯å› ä¸º Flutter å›¢é˜Ÿå‘ç°è¿™æ˜¯ Apple / WebKit çš„ bug ï¼Œæ‰€ä»¥ä¹Ÿå·²ç»åŒæ­¥ä¸ŠæŠ¥è¯·æ±‚å’Œ Apple åä½œã€‚</p>
</blockquote>
<p>é—®é¢˜æœ€å¼€å§‹å‡ºç°åœ¨ iOS 18.2 beta ç‰ˆæœ¬ä¸Šï¼Œå½“é¡µé¢ä¸Šå…ˆè§¦å‘äº†æŸäº› Flutter widgetï¼ˆæˆ–è€… overlayï¼Œæ¯”å¦‚ context menu / Drawerï¼‰åï¼Œ<strong>WKWebView å†…çš„ç‚¹å‡»ï¼ˆé“¾æ¥ã€æŒ‰é’®ï¼‰ä¸å†å“åº”</strong>ï¼ˆå¯é«˜äº®ï¼Œä½†ä¸ä¼šæ¿€æ´»ï¼‰ï¼Œéœ€è¦é‡æ–°åŠ è½½ WebView æ‰æ¢å¤ã€‚</p>
<p>è€Œå…·ä½“åŸå› åœ¨äºï¼ŒFlutter åœ¨ iOS çš„ PlatformViewï¼ˆä¾‹å¦‚æ‰¿è½½ WKWebView çš„è§†å›¾ï¼‰ä¸Šå®ç°äº†ä¸€å¥—â€œæ‰‹åŠ¿æ‹¦æˆª/å»¶è¿Ÿâ€æœºåˆ¶ï¼šåœ¨éœ€è¦æ—¶ä¼šæŠŠä¸€ä¸ª <code>FlutterDelayingGestureRecognizer</code>ï¼ˆ<code>delayingRecognizer</code> ï¼‰åˆ‡åˆ°æŸäº›çŠ¶æ€ï¼ˆ<code>possible</code>, <code>ended</code>, <code>failed</code> ç­‰ï¼‰æ¥å‘Šè¯‰ UIKit æˆ–è€…å…¶ä»– recognizers æ˜¯å¦åº”è¯¥é˜»æ­¢/å…è®¸æ‰‹åŠ¿ä¼ é€’ã€‚</p>
<p>è€Œ UIKit çš„æ‰‹åŠ¿è¯†åˆ«å™¨æœ‰è‡ªå·±çš„çŠ¶æ€æœºï¼ˆ<code>possible</code> â†’ <code>recognized/failed</code> / <code>ended</code> ï¼‰ï¼Œä¸åŒ recognizer ç›¸äº’ä¹‹é—´ä¼šæœ‰é˜»å¡/ä¾èµ–å…³ç³»ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecab37a2a3a94e3185c643faca291935~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513312&amp;x-signature=Hgu%2FfYJ3tDGsK7jMeYJp3P%2FXUWw%3D" alt="https://developer.apple.com/documentation/uikit/about-the-gesture-recognizer-state-machine" loading="lazy"/></p>
<p>è¿™é‡Œéœ€è¦ç®€å•ä»‹ç»ä¸€ä¸ªèƒŒæ™¯çŸ¥è¯†ï¼š<strong>Flutter + iOS å¹³å°è§†å›¾çš„æ‰‹åŠ¿å¤„ç†æœºåˆ¶</strong>ï¼Œåœ¨ iOS ä¸Šå½“ä½ æŠŠä¸€ä¸ªåŸç”Ÿæ§ä»¶ï¼ˆæ¯”å¦‚ WKWebViewï¼‰åµŒè¿› Flutter æ—¶ï¼Œå®é™…ä¸Šä¼šç»å†ä»¥ä¸‹å±‚çº§ï¼š</p>
<pre><code class="hljs language-objectivec" lang="objectivec">[FlutterView]               â† æ•´ä¸ª Flutter æ¸²æŸ“å±‚ï¼ˆDart UI å±‚ï¼‰
   â”œâ”€ Flutter widgets
   â”‚     â†‘
   â”‚     â”‚ æ‰‹åŠ¿äº‹ä»¶ç”± Flutter frameworkï¼ˆDartï¼‰å¤„ç†
   â”‚
   â””â”€ PlatformView (e.g. <span class="hljs-built_in">WKWebView</span>)
         â†‘
         â”‚ æ‰‹åŠ¿äº‹ä»¶ç”± <span class="hljs-built_in">UIKit</span> / WebKit å†…éƒ¨ recognizer å¤„ç†
</code></pre>
<p>Flutter å’Œ UIKit éƒ½å„è‡ªæœ‰æ‰‹åŠ¿è¯†åˆ«ç³»ç»Ÿï¼ˆGestureRecognizerï¼‰ï¼Œä¸ºäº†é˜²æ­¢äº’ç›¸æŠ¢äº‹ä»¶ï¼ŒFlutter engine åœ¨ iOS ä¸ŠåŠ å…¥äº†ä¸€ä¸ªâ€œ<strong>delaying gesture recognizer</strong>â€ï¼ˆå»¶è¿Ÿè¯†åˆ«å™¨ï¼‰ï¼š</p>
<blockquote>
<p>å®ƒçš„ä½œç”¨æ˜¯ï¼šå½“ Flutter æ¡†æ¶æ£€æµ‹åˆ°æŸä¸ª widget æƒ³â€œé˜»æ­¢â€äº‹ä»¶æ—¶ï¼ˆæ¯”å¦‚ <code>GestureDetector</code> æˆ– overlay é®ç½©ï¼‰ï¼ŒFlutter ä¼šè®©è¿™ä¸ª <code>delayingRecognizer</code>  é˜»æ­¢ UIKit é‡Œçš„ recognizerï¼ˆä¾‹å¦‚ WKWebView çš„ç‚¹å‡»è¯†åˆ«å™¨ï¼‰å“åº”ã€‚</p>
</blockquote>
<p>è¿™ä¸ªç³»ç»Ÿåœ¨ Flutter â†’ UIKit æ‰‹åŠ¿äº¤ç•Œå¤„éå¸¸æ•æ„Ÿï¼Œè€Œé—®é¢˜å°±å‡ºç°åœ¨ï¼š<strong>WebKitï¼ˆWKWebViewï¼‰å†…éƒ¨çš„æŸäº› recognizer ä¼šâ€œç¼“å­˜â€æˆ–æŒæœ‰å¯¹  <code>delayingRecognizer</code>  çš„â€œæ—§çŠ¶æ€â€</strong>ï¼Œå¯¼è‡´å½“ Flutter åœ¨è¿è¡Œæ—¶åˆ‡æ¢ <code>delayingRecognizer</code>  çŠ¶æ€ï¼ˆä¾‹å¦‚ blockGestureï¼‰æ—¶ï¼ŒWebKit çš„éƒ¨åˆ†è¯†åˆ«å™¨è·å–åˆ°äº†è¿‡æ—¶çŠ¶æ€ï¼Œä»è€Œæ— æ³•è§¦å‘æ­£ç¡®çš„â€œæ¿€æ´» clickâ€é€»è¾‘ï¼Œä¾‹å¦‚ï¼š</p>
<blockquote>
<p>å®ƒä»¬å¯èƒ½åªçœ‹åˆ° <code>failed</code>/<code>possible</code> çš„ä¸ä¸€è‡´ç»„åˆï¼Œå¯¼è‡´åªé«˜äº®ä¸æ‰§è¡ŒåŠ¨ä½œã€‚</p>
</blockquote>
<p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ iOS 18.2 æ—¶ï¼ŒFlutter å›¢é˜Ÿè¿›è¡Œäº†å¤šç§å°è¯•ï¼Œæ¯”å¦‚ toggle <code>enabled</code>ã€æ’å…¥ dummy recognizerã€å¼‚æ­¥ dispatchã€é‡å»º recognizer å®ä¾‹ç­‰ï¼Œæœ€åå‘ç°<strong>ç§»é™¤å¹¶é‡æ–°æ·»åŠ åŒä¸€ä¸ª <code>delayingRecognizer</code>  å®ä¾‹</strong> ä¼šè§¦å‘ UIKit é‡æ–°åˆ·æ–°ç›¸å…³ recognizers çš„å…³è”ï¼Œä»è€Œè®© WebKit çš„å†…éƒ¨è¯†åˆ«å™¨çœ‹åˆ°â€œæœ€æ–°â€çŠ¶æ€å¹¶æ¢å¤ç‚¹å‡»åŠŸèƒ½ï¼š</p>
<blockquote>
<p>åœ¨ blockGesture çš„å¤„ç†æµç¨‹é‡ŒæŠŠ  <code>delayingRecognizer</code>  <strong>ç§»é™¤åå†æ·»åŠ å›å»</strong>ï¼Œä»¥å¼ºåˆ¶ UIKit/WebKit åˆ·æ–°è¯†åˆ«å™¨å…³ç³»ï¼Œè¿™ä¸ªåŠŸèƒ½åº”è¯¥æ˜¯åœ¨ 3.29 çš„ç‰ˆæœ¬é‡Œå‘å¸ƒäº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49dcd06d72024bc7bd4506f482b6f8db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513312&amp;x-signature=ry8WmjTkiUzE948oA6mOnhgBX40%3D" alt="" loading="lazy"/></p>
</blockquote>
<p>ä¸è¿‡åœ¨ iOS 26 ä¸Šï¼Œè¿™ä¸ªâ€œç§»é™¤å†æ·»åŠ â€çš„æ“ä½œå¸¦æ¥äº†æ–°çš„ä¸¥é‡é—®é¢˜ï¼š<strong>Flutter çš„æ‰‹åŠ¿é˜»å¡ç³»ç»Ÿåœ¨æŸäº›åœºæ™¯ï¼ˆæ¯”å¦‚ Drawer/overlayï¼‰é‡Œå®Œå…¨å¤±æ•ˆï¼Œè§¦æ‘¸ä¼šç©¿é€åˆ°ä¸‹é¢çš„ WebView</strong>ï¼Œè¿™æ¯”â€œç‚¹ä¸åŠ¨â€æ›´ç³Ÿï¼Œå› ä¸ºä¼šé€ æˆé”™ç‚¹ä¸åŠŸèƒ½é”™ä¹±ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8029c396e4d84899a1ae6fbe828fe012~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513312&amp;x-signature=ppgexoEpirehhIZo6%2Ft3n2w2hnA%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼ŒFlutter åœ¨é’ˆå¯¹ <strong>iOS 26ï¼ˆ<code>@available(iOS 26.0, \*)</code>ï¼‰ä¸Šä¸å†æ‰§è¡Œâ€œç§»é™¤å†æ·»åŠ  <code>delayingRecognizer</code>  â€ çš„ç»•è¿‡é€»è¾‘</strong>ï¼Œä½†å›é€€ä¼šè®©ä¹‹å‰é€šè¿‡ç»•è¿‡è§£å†³çš„â€œWebView ç‚¹ä¸åŠ¨â€é—®é¢˜åœ¨ iOS 26 ä¸Šå†æ¬¡å‡ºç°ã€‚</p>
<blockquote>
<p>å¾ˆæ˜æ˜¾è¿™æ˜¯ä¸€ä¸ª iOS 18.2 æ—¶ WKWebView è‡ªèº«å°±å­˜åœ¨çš„ bugï¼Œå¹¶ä¸”å› ä¸ºç³»ç»Ÿå‡çº§ä¿®æ”¹ï¼ŒWebKit å†…éƒ¨ recognizer ç¼“å­˜è¡Œä¸ºåœ¨æ–°ç‰ˆ iOS ä¸Šå˜åŒ–ï¼Œæ‰€ä»¥å¦‚æœè¦å®Œæˆä¿®å¤é—®é¢˜ï¼Œè¿˜æ˜¯éœ€è¦å’Œ Apple ä¸€èµ·ä¿®å¤å¤„ç†ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bae374d84a74f96955847ed2ddd9fff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513312&amp;x-signature=inBSX8X19Dxhz6C%2B8nT3Ba5cESE%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥é—®é¢˜ä¸»è¦å‡ºç°çš„åœºæ™¯åœ¨äºï¼šâ€œ<strong>å¿…é¡»åœ¨ WebView ä¸Šå‡ºç°è¿‡ overlay æˆ–ç±»ä¼¼è§¦æ‘¸é˜»æ­¢çš„ widgetâ€ æ‰ä¼šè§¦å‘ Bug</strong> ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ‰“å¼€äº†ä¸€ä¸ªåŠé€æ˜çš„ ModalBarrier</li>
<li>å¼¹å‡ºäº†ä¸€ä¸ª Drawer</li>
<li>æ˜¾ç¤ºäº†ä¸€ä¸ªåŠé€æ˜çš„ PopupMenu</li>
<li>ä½¿ç”¨äº† <code>showDialog()</code></li>
<li>ç”šè‡³æŸäº›åŠ¨ç”»ï¼ˆHero ï¼‰åœ¨å†…éƒ¨ä¹Ÿä¼šä¸´æ—¶åˆ›å»º overlay å±‚</li>
</ul>
<p>è¿™äº›æ“ä½œçš„é‡Œæ ¹æœ¬çš„è¯±é¥µå°±æ˜¯ï¼šâ€œè¦é˜»æ­¢è§¦æ‘¸ä¼ é€’åˆ°åº•å±‚ platform viewâ€ ï¼Œäºæ˜¯ engine è°ƒç”¨ <code>delaying_recognizer.blockGesture(true)</code>ï¼›ï¼ŒWKWebView çš„å†…éƒ¨ recognizer å› æ­¤æš‚åœè§¦å‘ï¼Œç„¶å overlay æ¶ˆå¤±åï¼Œengine å†æ‰§è¡Œ <code>blockGesture(false)</code> ï¼Œä½†æ˜¯ UIKit æ²¡æœ‰æ¢å¤ WKWebView recognizer çš„å“åº”ï¼Œä»è€Œå¯¼è‡´é—®é¢˜ã€‚</p>
<blockquote>
<p>è€Œåœ¨ iOS18.2 å¯ä»¥é€šè¿‡ remove/add çš„æ–¹å¼æ¥é‡ç½®åˆ·æ–°çŠ¶æ€ï¼Œä½†æ˜¯åœ¨ iOS 26 ä¸Š Recognizer é‡æ–°æ·»åŠ åï¼Œçœ‹èµ·æ¥ç³»ç»Ÿä¼šé‡æ–°å»ºç«‹é»˜è®¤çš„ä¾èµ–å…³ç³»ï¼Œä¹Ÿå°±æ˜¯å½“ Flutter æŠŠ delaying recognizer ç§»é™¤å†æ·»åŠ æ—¶ï¼ŒUIKit ä¸ä»…åˆ·æ–°äº†å®ƒçš„ä¾èµ–ï¼Œ è¿˜é‡ç½®äº†æŸäº›å…¨å±€ recognizer çš„ <code>delaysTouchesBegan</code> / <code>requiresFailureOf</code> é…ç½®ï¼Œè¿™äº›é…ç½®æ­£æ˜¯ Flutter engine ç”¨æ¥é˜²æ­¢ overlay ç‚¹å‡»ç©¿é€çš„ç›¸å…³é€»è¾‘ã€‚</p>
</blockquote>
<p><strong>è€Œé’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œç›®å‰ç¤¾åŒºå±‚é¢çš„ä¸´æ—¶è§£å†³æ–¹æ³•æ˜¯é€šè¿‡ <code>pointer_interceptor </code> æ¥è§„é¿ overlay ä¸ WebView çš„äº‹ä»¶ç«äº‰</strong>ï¼Œæ ¸å¿ƒæ˜¯åœ¨ iOS 26 ä¸Šçš„ WebView ï¼Œåªè¦åœ¨å®ƒä¸Šæ–¹æœ‰è§†å›¾å¹¶ç‚¹å‡»å°±ä¼šå¯¼è‡´å®ƒåœæ­¢æ¥å—ç‚¹å‡»ï¼Œè€Œåœ¨æ­¤ä¹‹å‰ WebView  ä¸€ç›´å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œæ‰€ä»¥ä½¿ç”¨ PointerInterceptor å¯ä»¥é˜²æ­¢åœ¨ä¸ WebView ä¸Šæ–¹çš„è§†å›¾äº¤äº’åä¸­æ–­ WebViewï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">  <span class="hljs-comment">// to know anytime if we are on top of navigation stack</span>
  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> _isTopOfNavigationStack =&gt; ModalRoute.of(context)?.isCurrent ?? <span class="hljs-keyword">false</span>;

  <span class="hljs-comment">// Wrapper for the webview</span>
  Widget buildWebviewWithIOSWorkaround(BuildContext context) {
    <span class="hljs-keyword">return</span> Stack(
      children: [
        buildWebView(context),
        <span class="hljs-keyword">if</span> (Platform.isIOS)
          Positioned.fill(
            child: PointerInterceptor(
              intercepting: !_isTopOfNavigationStack, <span class="hljs-comment">// the webview is not on top -&gt; inhib click</span>
              debug: <span class="hljs-keyword">false</span>,
              child: <span class="hljs-keyword">const</span> SizedBox.expand()
            ),
          )
      ],
    );
  }
</code></pre>
<p>å¦å¤–ï¼Œåœ¨å’Œ Apple è¿›è¡Œé—®é¢˜æ¨åŠ¨ä¿®å¤çš„åŒæ—¶ï¼ŒFlutter ä¹Ÿåœ¨éœ€æ±‚ä¸€äº›å¤–éƒ¨è§£å†³æ€è·¯ï¼Œä¾‹å¦‚é€šè¿‡å…¨æ–°çš„ <code>HitTest</code> æ¥è§„é¿é—®é¢˜ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a43281ac96a408f9691d60eca07cdf1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513312&amp;x-signature=g7qiy%2Bf8CEIaGn7hu6qu5CF%2BLPM%3D" alt="" loading="lazy"/></p>
<p>æ ¹æ®   <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F176597" target="_blank" title="https://github.com/flutter/flutter/pull/176597" ref="nofollow noopener noreferrer">#176597</a>  ï¼Œä¸»è¦åŸºäºå‡è®¾å¤§å¤šæ•°ç”¨ä¾‹å¹³å°è§†å›¾åªæœ‰ä¸€ä¸ªé‡å ï¼Œå¦‚æœè§¦æ‘¸ä½ç½®åœ¨ Flutter  Widget å’Œå¹³å°è§†å›¾ä¹‹é—´çš„â€œé‡å â€èŒƒå›´å†…ï¼ŒFlutter ä¼šé˜»æ­¢å¹³å°è§†å›¾ä¸Šçš„æ‰€æœ‰ UIGestureRecognizerï¼Œå…·ä½“ä¸ºï¼š</p>
<ul>
<li>å®šä¹‰äº†ä¸€ä¸ªæ–°çš„æ‹¦æˆªç­–ç•¥æšä¸¾å€¼ï¼š<code>FlutterPlatformViewGestureRecognizersBlockingPolicyHitTestByOverlay</code>ï¼ˆ â€œé€šè¿‡ overlay å±‚çš„ hitTest æ¥é˜»æ­¢æ‰‹åŠ¿â€ï¼‰</li>
<li>åœ¨ platform view çš„ touch / hitTest é€»è¾‘é‡ŒåŠ å…¥åˆ¤æ–­ï¼šå¦‚æœæŸç‚¹è½åœ¨ overlay åŒºåŸŸï¼Œå°±è®© <code>hitTest:</code> è¿”å›æ‹¦æˆªè‡ªå·±ï¼ˆ<code>self</code>ï¼‰ï¼Œè€Œä¸æ˜¯é»˜è®¤èµ°åˆ°åº•å±‚ WebViewï¼Œä¹Ÿå°±æ˜¯è¯´ <strong>åœ¨ Flutter å±‚â€œç”¨ hitTestâ€æ¥å±è”½åº•å±‚ç‚¹å‡»</strong></li>
<li>åœ¨ <code>blockGesture</code> æ–¹æ³•é‡Œï¼Œå¯¹äºè¿™ç§ overlay-hitTest ç±»å‹çš„ç­–ç•¥ï¼ŒPR æŠŠåŸæ¥ <code>blockGesture</code> çš„é€»è¾‘æ”¹ä¸º â€œno-opâ€ï¼ˆä»€ä¹ˆéƒ½ä¸åšï¼‰ï¼Œå› ä¸ºåœ¨è¿™ä¸ªç­–ç•¥ä¸‹ï¼Œâ€œæ‹¦æˆªâ€æ˜¯åœ¨ hitTest å±‚åšäº†ï¼Œä¸éœ€è¦å†åœ¨ delaying recognizer å±‚å»å¹²é¢„</li>
<li>åœ¨ controller æ›´æ–° overlay å±‚ï¼ˆ<code>bringLayersIntoView:</code>ï¼‰æ—¶ï¼ŒæŠŠ overlay è§†å›¾å¼•ç”¨è®°å½•ä¸‹æ¥ï¼Œå¹¶èµ‹ç»™å†…éƒ¨çš„ intercepting viewï¼ˆ<code>interceptor.overlays = overlays;</code>ï¼‰è¿™æ ·æ‹¦æˆªé€»è¾‘æœ‰ overlay åŒºåŸŸä¿¡æ¯å¯ç”¨</li>
</ul>
<p>æ€»çš„æ¥è¯´ï¼Œ<strong>æ”¹åŠ¨æä¾›äº†ä¸€ç§ â€œhitTest å±‚é¢çš„ overlay æ‹¦æˆªâ€ ç­–ç•¥ï¼Œä¸ä¾èµ– delaying recognizer çš„çŠ¶æ€åˆ‡æ¢ï¼Œä»¥é¿å…æ‰‹åŠ¿çŠ¶æ€åˆ‡æ¢å¸¦æ¥çš„å¤æ‚æ€§</strong>ï¼š</p>
<blockquote>
<p>ä½†æ˜¯ï¼Œå¦‚æœå¤šä¸ªé‡å è¢«åˆå¹¶åˆ°ä¸€ä¸ªè§¦æ‘¸é˜»æŒ¡åŒºåŸŸæ—¶ï¼Œblocking area å°†æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰é‡å çš„åŒºåŸŸã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c6a8fa7d1c144d6b6a4b0da011d860d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513312&amp;x-signature=HXKEciN%2Fg5%2B0dRoFpjYMsmIeHMs%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡ç»´æŠ¤äººå‘˜åœ¨è¿›è¡Œåˆ°ä¸€åŠçš„æ—¶å€™å‘ç°ï¼Œå®Œæ•´è§£å†³æ–¹æ¡ˆä¹Ÿè®¸å¹¶ä¸éš¾æ¨è¿›ï¼ˆ<em>æˆ‘æ„Ÿè§‰æ˜¯ä»–çš„ä¸€å¢æƒ…æ„¿å±…å¤š</em>ï¼‰ï¼Œæ‰€ä»¥å†³å®šå…³é—­ä¸´æ—¶çš„ MVP æ–¹æ¡ˆï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23ee7c5c4a1645e58fe19393929a8521~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513312&amp;x-signature=W0UyNj%2FMTs%2BDaqNwt4IXgAEDJt4%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7a849e4aa7d456fb833df1f95f82c83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513312&amp;x-signature=zZzoRxEbg1Zwku5nF4%2BZc03iuww%3D" alt="" loading="lazy"/></p>
<p><strong>å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œæ˜¯ä¾èµ–äº FFI ä» Flutter çš„æ‰‹åŠ¿ç«æŠ€åœºåŒæ­¥æŸ¥è¯¢æ¥åšå‡ºå†³å®šï¼Œä¸è¿‡è¿™åˆæ˜¯å±äºå¦å¤–ä¸€ä¸ªé‡å¤§æ”¹åŠ¨äº†</strong>ã€‚</p>
<p>æ‰€ä»¥ç›®å‰æ¨è¿›æµç¨‹è¿›å…¥åˆ°äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F177859" target="_blank" title="https://github.com/flutter/flutter/pull/177859" ref="nofollow noopener noreferrer">#177859</a> ï¼ŒPR å°† <strong>ä¸å†é€šè¿‡â€œå»¶è¿Ÿï¼ˆdelayingï¼‰æ‰‹åŠ¿è¯†åˆ«å™¨â€æ¥é˜»å¡ platform view çš„æ‰‹åŠ¿</strong>ï¼Œæ”¹æˆåœ¨ iOS ç«¯å¯¹è§¦ç‚¹åš <strong>åŒæ­¥ hit-testï¼ˆåˆ©ç”¨ FFI ä» framework æŸ¥è¯¢æ˜¯å¦åº”æ¥å—/é˜»æ­¢è¯¥æ‰‹åŠ¿ï¼‰</strong>ï¼Œè§£å†³äº† web_view / admob ç­‰å¹³å°è§†å›¾ä¸å¯ç‚¹æŒ‰çš„é—®é¢˜ï¼Œå¹¶æ–°å¢ä¸€ä¸ªå¯é€‰çš„ blocking policyï¼ˆ<code>FlutterPlatformViewGestureRecognizersBlockingPolicyHitTest</code>ï¼‰</p>
<p>å…·ä½“è°ƒæ•´æœ‰ï¼š</p>
<ul>
<li>
<p><strong>ä»â€œå»¶è¿Ÿè¯†åˆ«å™¨ï¼ˆdelaying recognizerï¼‰â€åˆ‡æ¢åˆ°â€œhit testâ€å†³ç­–</strong></p>
<ul>
<li>ä»¥å¾€çš„æ–¹æ¡ˆæ˜¯æŠŠè¯†åˆ«å™¨è®¾ç½®æˆ delaying ç±»å‹ï¼Œç„¶åç”¨å»¶è¿Ÿå†³ç­–æ¥é˜»å¡/æ¥å—æ‰‹åŠ¿ï¼Œæœ¬æ¬¡ PR ç›´æ¥æ”¹æˆç›´æ¥åš hit test åˆ¤æ–­æ˜¯å¦åº”é˜»æ­¢è¯¥æ‰‹åŠ¿ï¼ˆåœ¨è§¦ç‚¹å¤„æ˜¯å¦è½åœ¨åº”è¯¥è¢« platform view æ‹¦æˆªçš„åŒºåŸŸï¼‰</li>
</ul>
</li>
<li>
<p><strong>FFI åŒæ­¥è°ƒç”¨æ¡†æ¶ï¼ˆframeworkï¼‰ä»¥é¿å…æ­»é”</strong></p>
<ul>
<li>ç›´æ¥è®© embedder åœ¨ä¸»çº¿ç¨‹ç­‰å¾… framework çš„å¼‚æ­¥å›åº”ä¼šå¯¼è‡´ä¸»çº¿ç¨‹äº’ç›¸ç­‰å¾…ï¼ˆdeadlockï¼‰ï¼Œåˆ©ç”¨ FFI åœ¨ native å±‚<strong>åŒæ­¥è°ƒç”¨</strong>æ¡†æ¶ä¸­çš„å‡½æ•°ï¼ˆ_platformViewShouldAcceptGesture<code>/</code>platformViewShouldAcceptGesture`ï¼‰æ¥è·å¾—æ˜¯å¦æ¥å—æ‰‹åŠ¿çš„ç»“æœï¼Œä»è€Œé¿å…çº¿ç¨‹æ­»é”é—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>æ–°å¢/ä¿®æ”¹ policy ä¸ API è¾…åŠ©</strong></p>
<ul>
<li>é€šè¿‡ <code>FlutterPlatformViewGestureRecognizersBlockingPolicyHitTest</code>ï¼Œé€æ­¥é‡‡çº³å¹¶é™ä½å…¨å±€å›å½’é£é™©ï¼ˆä¹Ÿå°±æ˜¯è¯´ä¸æŠŠæ—§ç­–ç•¥ç›´æ¥æ›¿æ¢æ‰ï¼Œè€Œæ˜¯å¢åŠ æ–°çš„ç­–ç•¥ä¾›æ’ä»¶æˆ–å†…éƒ¨ä½¿ç”¨ï¼‰</li>
</ul>
</li>
</ul>
<p>PR è¿˜æ¶‰åŠ engine çš„ UI å±‚ï¼ˆ <code>engine/src/.../hooks.dart</code>ã€<code>platform_configuration.cc</code> ç­‰ï¼‰ä»¥åŠ iOS å¹³å° view / embedder ç›¸å…³ä»£ç ï¼Œ è¿™äº›æ”¹åŠ¨æŠŠ hit-test çš„å…¥å£å‡½æ•°å’Œ FFI ç»‘å®šã€ä»¥åŠ platform view æ‰‹åŠ¿å†³ç­–è·¯å¾„è¿æ¥èµ·æ¥ ã€‚</p>
<p>æ‰€ä»¥ï¼Œè¿™ä¼šæ˜¯ä¸€ä¸ªæ¶‰åŠå¾ˆå¤šåœ°æ–¹çš„åº•å±‚è°ƒæ•´ï¼Œä¹Ÿç®—æ˜¯ä¸€ä¸ªé«˜é£é™©çš„ä¿®æ”¹ï¼Œç‰¹åˆ«æ˜¯ iOS å¹³å° viewï¼ˆplatform viewï¼‰æ‰‹åŠ¿å¤„ç†è·¯å¾„ï¼ˆå°¤å…¶ web_viewã€admobã€ä»»ä½•åµŒå…¥ UIView çš„æ’ä»¶ï¼‰ï¼Œç›®å‰å»ºè®®äº‹æ˜¯éœ€è¦æ’ä»¶ä½œè€…ï¼ˆç‰¹åˆ«æ˜¯å®˜æ–¹ 1P æ’ä»¶ï¼‰åˆ‡æ¢ä½¿ç”¨æ–° policyã€‚</p>
<p>å½“ç„¶ï¼ŒPR è¿˜éœ€è¦ç­‰ç­‰ï¼Œç›®å‰é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åšçš„è§„é¿é—®é¢˜è¿˜æœ‰ï¼š</p>
<ul>
<li><strong>é¿å…åœ¨ WebView ä¸Šæ–¹æ˜¾ç¤ºéœ€è¦æ‹¦æˆªæ‰‹åŠ¿çš„å¤æ‚ overlayï¼ˆå°½é‡å‡å°‘äº¤äº’å‹ overlayï¼‰</strong>ï¼Œå¦‚æœèƒ½é¿å…è¦†ç›– WebViewï¼Œé—®é¢˜å°±ä¸ä¼šè§¦å‘</li>
<li><strong>åœ¨ overlay å…³é—­åé‡è½½æˆ–é‡å»º WebViewï¼ˆé‡å»º controller / reloadï¼‰</strong>ï¼Œä¸è¿‡è¿™ç§é€ æˆçš„é—ªçƒå…¶å®å¹¶ä¸å‹å¥½</li>
</ul>
<p>æ‰€ä»¥ç›®å‰çš„æ–¹å‘ï¼Œåº”è¯¥æ˜¯å…ˆå®Œæˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F176597" target="_blank" title="https://github.com/flutter/flutter/pull/176597" ref="nofollow noopener noreferrer">#176597</a> çš„ PRï¼Œä¹‹åå†å®ç° FFI ä»æ¡†æ¶ä¸­è¿›è¡ŒæŸ¥è¯¢çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯ä»ç›®å‰æ¥è¯´ï¼š</p>
<ul>
<li>å¯¹äº iOS 18.2 ä¸Šçš„å› ä¸ºé‡å æ§ä»¶å¯¼è‡´  WebView ç‚¹å‡»é—®é¢˜ï¼Œéœ€è¦ 3.29 ä»¥åŠä»¥ä¸Šç‰ˆæœ¬è§£å†³</li>
<li>å¯¹äº iOS 26 ä¸Šçš„å› ä¸ºé‡å æ§ä»¶å¯¼è‡´  WebView ç‚¹å‡»é—®é¢˜
<ul>
<li>3.35.4 ä¹‹å‰ï¼Œä¼šå‡ºç°è§¦æ‘¸ç©¿é€é—®é¢˜</li>
<li>3.35.4 ä¹‹åï¼Œç”±äº cp revertï¼Œä¼šæ¢å¤æˆç‚¹å‡»æ— æ•ˆé—®é¢˜</li>
<li>ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜å¯ä»¥ä½¿ç”¨  <code>pointer_interceptor </code> æ¥å°è¯•è§„é¿</li>
</ul>
</li>
<li>ç­‰å¾…å®˜æ–¹å†…ç½® HitTest å’Œ FFI è§£å†³æ–¹æ¡ˆå‘å¸ƒ</li>
</ul>
<p>åªèƒ½è¯´ï¼Œä¹‹å‰å‘å¸ƒçš„çº¿ç¨‹åˆå¹¶ä¸º FFI æä¾›äº†æ”¯æŒçš„åŸºç¡€ï¼Œä¹Ÿä¸ºè¿™æ¬¡è°ƒæ•´çš„æ–¹å‘æä¾›äº†ä¸€ç§å…¨æ–°çš„æ€è·¯ï¼Œåªæ˜¯è¿™ä¸ªä¿®æ”¹éœ€è¦æ›´åŠ è°¨æ…ã€‚</p>
<h2 data-id="heading-0">å‚è€ƒé“¾æ¥</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F176597" target="_blank" title="https://github.com/flutter/flutter/pull/176597" ref="nofollow noopener noreferrer">github.com/flutter/fluâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F175099" target="_blank" title="https://github.com/flutter/flutter/issues/175099" ref="nofollow noopener noreferrer">github.com/flutter/fluâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F177859" target="_blank" title="https://github.com/flutter/flutter/pull/177859" ref="nofollow noopener noreferrer">github.com/flutter/fluâ€¦</a></p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[H5å¼€å‘é¿å‘ï¼è§£å†³Safariæµè§ˆå™¨çš„videoä¼šè¦†ç›–z-index:1çš„ç»å¯¹å®šä½å…ƒç´ ]]></title>    <link>https://juejin.cn/post/7571299394346156074</link>    <guid>https://juejin.cn/post/7571299394346156074</guid>    <pubDate>2025-11-12T00:34:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571299394346156074" data-draft-id="7569946369989886015" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="H5å¼€å‘é¿å‘ï¼è§£å†³Safariæµè§ˆå™¨çš„videoä¼šè¦†ç›–z-index:1çš„ç»å¯¹å®šä½å…ƒç´ "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-12T00:34:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            H5å¼€å‘é¿å‘ï¼è§£å†³Safariæµè§ˆå™¨çš„videoä¼šè¦†ç›–z-index:1çš„ç»å¯¹å®šä½å…ƒç´ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:34:14.000Z" title="Wed Nov 12 2025 00:34:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p><code>H5</code>å¼€å‘ä¸­ï¼Œè·¨æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜æ€»æ•°è®©äººè„‘å£³ç–¼ã€‚æœ€è¿‘æˆ‘åœ¨å¼€å‘è§†é¢‘ç›¸å…³é¡µé¢æ—¶ï¼Œå°±é‡åˆ°äº†ä¸€ä¸ªå…¸å‹çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼šç›¸åŒçš„å±‚å å¸ƒå±€ä»£ç ï¼Œåœ¨<code>Chrome</code>æµè§ˆå™¨ä¸­è¡¨ç°æ­£å¸¸ï¼Œè€Œåœ¨<code>Safari</code>æµè§ˆå™¨ï¼ˆåŒ…æ‹¬macOSå’ŒiOSç‰ˆæœ¬ï¼‰ä¸­ï¼Œæœ¬è¯¥æ˜¾ç¤ºåœ¨è§†é¢‘ä¸Šæ–¹çš„ç»å¯¹å®šä½å›¾æ ‡å´ç¦»å¥‡æ¶ˆå¤±ï¼Œæˆ‘åˆæ­¥ä¼°è®¡æ˜¯è¢«<code>video</code>å…ƒç´ å®Œå…¨è¦†ç›–äº†ã€‚ä¸‹é¢æˆ‘å°†ä»é—®é¢˜å¤ç°ã€æ ¹æºå‰–æåˆ°è§£å†³ï¼Œä¸€æ­¥ä¸€æ­¥æ‹†è§£æ€è·¯ï¼Œå¸Œæœ›å¯ä»¥å¸®åˆ°æœ‰åŒæ ·é­é‡çš„å¼€å‘è€…ã€‚</p>
<h2 data-id="heading-0">1. é—®é¢˜åœºæ™¯å¤ç°</h2>
<p>åœºæ™¯å¸ƒå±€å¾ˆç®€å•ï¼šå¤–å±‚ä¸€ä¸ª<code>relative</code>å®šä½çš„<code>div</code>å®¹å™¨ï¼Œå†…éƒ¨åŒ…å«<code>video</code>è§†é¢‘å…ƒç´ å’Œä¸€ä¸ª<code>absolute</code>å®šä½çš„å…³é—­æŒ‰é’®å›¾æ ‡ï¼Œå›¾æ ‡è®¾ç½®<code>z-index:1;top: 8px;right: 8px;</code>ç½®äºè§†é¢‘å³ä¸Šè§’ï¼Œå¦‚ä¸‹ï¼š</p>
<p><strong>HTMLï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main-wrapper"</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">video</span>
		<span class="hljs-attr">autoplay</span>
		<span class="hljs-attr">loop</span>
		<span class="hljs-attr">muted</span>
		<span class="hljs-attr">playsinline</span>
		<span class="hljs-attr">webkit-playsinline</span>
		<span class="hljs-attr">disablepictureinpicture</span>
		<span class="hljs-attr">disable-remote-playback</span>
		<span class="hljs-attr">poster</span>
		<span class="hljs-attr">controlsList</span>=<span class="hljs-string">"nodownload nofullscreen noremoteplayback noplaybackrate"</span>
		<span class="hljs-attr">class</span>=<span class="hljs-string">"video-dom"</span>
	&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./water-drop.mp4"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"video/mp4"</span> /&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ video æ ‡ç­¾<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge"</span>&gt;</span>å…³é—­<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>CSSï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.main-wrapper</span> {
	<span class="hljs-attribute">position</span>: relative;
	<span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
}
<span class="hljs-selector-class">.video-dom</span> {
	<span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
	<span class="hljs-attribute">object-fit</span>: contain;
}
<span class="hljs-selector-class">.badge</span> {
	<span class="hljs-attribute">position</span>: absolute;
	<span class="hljs-attribute">top</span>: <span class="hljs-number">8px</span>;
	<span class="hljs-attribute">right</span>: <span class="hljs-number">8px</span>;
	<span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;
	<span class="hljs-attribute">width</span>: fit-content;
	<span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
	<span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.7</span>);
	<span class="hljs-attribute">padding</span>: <span class="hljs-number">0px</span> <span class="hljs-number">8px</span>;
	<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;
	<span class="hljs-attribute">color</span>: white;
	<span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
	<span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
	<span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;
}
</code></pre>
<p>è€Œä¸¤å¤§æµè§ˆå™¨è¡¨ç°å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><strong>Chromeæµè§ˆå™¨</strong>ï¼šè¡¨ç°æ­£å¸¸ï¼Œå…³é—­å›¾æ ‡ç¨³å®šæ˜¾ç¤ºåœ¨è§†é¢‘å³ä¸Šè§’ï¼Œå±‚çº§æ­£ç¡®ã€‚</p>
</li>
<li>
<p><strong>Safariæµè§ˆå™¨</strong>ï¼šå›¾æ ‡å®Œå…¨æ¶ˆå¤±ï¼Œé€šè¿‡å¼€å‘è€…å·¥å…·æ£€æŸ¥å‘ç°å›¾æ ‡ç¡®å®å­˜åœ¨äºDOMä¸­ï¼Œä½†è¢«videoå…ƒç´ å®Œå…¨è¦†ç›–ï¼Œz-index:1æœªç”Ÿæ•ˆã€‚</p>
</li>
</ul>
<h2 data-id="heading-1">2. æ ¹æºå‰–æ</h2>
<p>è¦è§£å†³é—®é¢˜ï¼Œå¿…é¡»å…ˆææ‡‚â€œä¸ºä»€ä¹ˆâ€ã€‚è¡¨é¢ä¸Šçœ‹æ˜¯<code>z-index</code>å¤±æ•ˆï¼Œä½†æœ¬è´¨æ˜¯<code>Safari</code>ä¸<code>Chrome</code>å¯¹<strong>å±‚å ä¸Šä¸‹æ–‡</strong>å’Œ<strong>ç‰¹æ®Šå…ƒç´ æ¸²æŸ“æœºåˆ¶</strong>çš„å¤„ç†å­˜åœ¨å·®å¼‚ï¼Œæ ¸å¿ƒåŸå› æœ‰ä¸¤ç‚¹ã€‚</p>
<h3 data-id="heading-2">2.1. å±‚å ä¸Šä¸‹æ–‡çš„éšæ€§è§„åˆ™</h3>
<p>æ ¹æ®CSSå±‚å è§„èŒƒï¼Œ<code>z-index</code>ä»…åœ¨<strong>å·²å»ºç«‹çš„å±‚å ä¸Šä¸‹æ–‡</strong>ä¸­ç”Ÿæ•ˆï¼Œè€Œå±‚å ä¸Šä¸‹æ–‡çš„å»ºç«‹æœ‰æ˜ç¡®æ¡ä»¶ï¼ˆå¦‚positionä¸ºrelative/absoluteä¸”z-indexä¸ä¸ºautoã€flexå®¹å™¨çš„å­å…ƒç´ ç­‰ï¼‰ã€‚åœ¨æˆ‘ä»¬çš„åˆå§‹ä»£ç ä¸­ï¼š</p>
<ul>
<li>
<p>å¤–å±‚.main-wrapperä»…è®¾ç½®<code>position:relative</code>ï¼Œæœªè®¾ç½®<code>z-index</code>ï¼Œå› æ­¤<strong>æœªå»ºç«‹ç‹¬ç«‹çš„å±‚å ä¸Šä¸‹æ–‡</strong>ï¼Œå…¶å†…éƒ¨å…ƒç´ çš„å±‚å å…³ç³»å—å…¨å±€ä¸Šä¸‹æ–‡å½±å“ã€‚</p>
</li>
<li>
<p>Chromeç­‰æµè§ˆå™¨ä¸­ï¼Œæœªè®¾ç½®positionçš„videoå…ƒç´ å±äº<strong>æ™®é€šæµå…ƒç´ </strong>ï¼Œå±‚å å±‚çº§ä½äº<code>absolute</code>å®šä½çš„å…ƒç´ ï¼ˆå³ä½¿z-index:1ï¼‰ï¼›ä½†<code>Safari</code>ä¸­ï¼Œ<code>video</code>å…ƒç´ è¢«å½’ä¸º<strong>ç‰¹æ®Šæ¸²æŸ“å±‚</strong>ï¼Œé»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ªéšæ€§çš„å±‚å ä¸Šä¸‹æ–‡ï¼Œä¸”å±‚çº§é«˜äºæ™®é€šçš„<code>absolute</code>å…ƒç´ ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">2.2. Safariå¯¹videoå…ƒç´ çš„ç‰¹æ®Šæ¸²æŸ“ä¼˜åŒ–</h3>
<p><code>Safari</code>ä¸ºäº†æå‡è§†é¢‘æ’­æ”¾çš„æµç•…åº¦ï¼ˆå°¤å…¶æ˜¯ç¡¬ä»¶åŠ é€Ÿæ’­æ”¾ï¼‰ï¼Œå¯¹<code>video</code>å…ƒç´ é‡‡ç”¨äº†ç‰¹æ®Šçš„æ¸²æŸ“ç­–ç•¥ï¼šå°†<code>video</code>å…ƒç´ ç‹¬ç«‹æ¸²æŸ“åœ¨ä¸€ä¸ª<strong>ç¡¬ä»¶åŠ é€Ÿå±‚</strong>ä¸­ï¼Œè¿™ä¸ªå±‚çš„ä¼˜å…ˆçº§é»˜è®¤é«˜äºæ™®é€šçš„DOMå…ƒç´ å±‚ã€‚å³ä½¿å¼€å‘è€…æ²¡æœ‰ä¸º<code>video</code>è®¾ç½®ä»»ä½•<code>positionå’Œz-index</code>ï¼Œ<code>Safari</code>ä¹Ÿä¼šè®©å…¶<strong>æ¼‚æµ®</strong>åœ¨æ™®é€šDOMå±‚ä¹‹ä¸Šï¼Œå¯¼è‡´æ™®é€š<code>absolute</code>å…ƒç´ æ— æ³•è¦†ç›–ã€‚</p>
<p>å…³é”®ç»“è®ºï¼šSafariä¸­ï¼Œvideoå…ƒç´ é»˜è®¤å¤„äºâ€œé«˜ä¼˜å…ˆçº§æ¸²æŸ“å±‚â€ï¼Œè€Œæœªå»ºç«‹ç‹¬ç«‹å±‚å ä¸Šä¸‹æ–‡çš„absoluteå…ƒç´ ï¼Œå³ä½¿è®¾ç½®z-indexï¼Œä¹Ÿæ— æ³•çªç ´è¿™ä¸ªå±‚çº§é™åˆ¶ã€‚</p>
<h2 data-id="heading-4">3. è§£å†³æ–¹æ¡ˆ</h2>
<p>åŸºäºä¸Šè¿°åˆ†æï¼Œè§£å†³æ€è·¯çš„æ ¸å¿ƒæ˜¯ï¼š<strong>é€šè¿‡æ˜¾å¼å»ºç«‹å±‚å ä¸Šä¸‹æ–‡ï¼Œè®©å›¾æ ‡å’Œvideoå…ƒç´ å¤„äºåŒä¸€â€œå±‚çº§åæ ‡ç³»â€ä¸­ï¼Œä»è€Œä½¿z-indexç”Ÿæ•ˆ</strong>ã€‚æˆ‘æµ‹è¯•äº†3ç§æ–¹æ¡ˆï¼Œä»ç®€å•åˆ°å¤æ‚ï¼Œå‡èƒ½è§£å†³é—®é¢˜ï¼Œå¤§å®¶å¯æ ¹æ®åœºæ™¯é€‰æ‹©ã€‚</p>
<h3 data-id="heading-5">3.1 æ–¹æ¡ˆä¸€ï¼šç»™å¤–å±‚å®¹å™¨åŠ z-index:0</h3>
<p>è¿™æ˜¯æœ€ç¬¦åˆCSSè§„èŒƒã€å…¼å®¹æ€§æœ€å¥½çš„æ–¹æ¡ˆï¼Œä»…éœ€ä¿®æ”¹ä¸€è¡Œä»£ç ã€‚æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šç»™å¤–å±‚.main-wrapperä»…è®¾ç½®è®¾ç½®<code>z-index:0</code>ï¼Œå¼ºåˆ¶å…¶å»ºç«‹ç‹¬ç«‹çš„å±‚å ä¸Šä¸‹æ–‡ï¼Œæ­¤æ—¶å†…éƒ¨çš„videoå’Œå›¾æ ‡éƒ½å¤„äºè¿™ä¸ªä¸Šä¸‹æ–‡å†…ï¼Œz-indexè§„åˆ™å³å¯æ­£å¸¸ç”Ÿæ•ˆã€‚</p>
<p><strong>ä¿®æ”¹åçš„CSSä»£ç </strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.main-wrapper</span> {
	<span class="hljs-attribute">position</span>: relative;
	<span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
	<span class="hljs-attribute">z-index</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* å…³é”®ä¿®æ”¹ï¼šå»ºç«‹ç‹¬ç«‹å±‚å ä¸Šä¸‹æ–‡ */</span>
}
</code></pre>
<p><strong>åŸç†éªŒè¯ï¼š</strong></p>
<p>è®¾ç½®<code>z-index:0</code>åï¼Œ.main-wrapperæˆä¸ºå±‚å ä¸Šä¸‹æ–‡å®¹å™¨ï¼Œå†…éƒ¨å…ƒç´ çš„å±‚å å…³ç³»ä»…ç›¸å¯¹äº.main-wrapperç”Ÿæ•ˆï¼š</p>
<ul>
<li>
<p>videoå…ƒç´ æœªè®¾ç½®<code>position</code>å’Œ<code>z-index</code>ï¼Œåœ¨å®¹å™¨å†…å±äº<strong>æ™®é€šæµå±‚</strong>ï¼Œå±‚çº§é»˜è®¤è¾ƒä½ã€‚</p>
</li>
<li>
<p>.badgeè®¾ç½®<code>absolute</code>å’Œ<code>z-index:1</code>ï¼Œåœ¨å®¹å™¨å†…å±‚çº§é«˜äº<code>video</code>ï¼Œè‡ªç„¶æ˜¾ç¤ºåœ¨ä¸Šæ–¹ã€‚</p>
</li>
</ul>
<p>æ­¤æ–¹æ¡ˆçš„ä¼˜åŠ¿ï¼šæ— å‰¯ä½œç”¨ã€ä»£ç æ”¹åŠ¨æœ€å°ã€å…¼å®¹æ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ˆåŒ…æ‹¬Safari 10+ã€Chromeã€Firefoxç­‰ï¼‰ã€‚</p>
<h3 data-id="heading-6">3.2. æ–¹æ¡ˆäºŒï¼šç»™videoåŠ relativeå’Œz-index:-1</h3>
<p>å¦‚æœå› ä¸šåŠ¡é™åˆ¶æ— æ³•ä¿®æ”¹å¤–å±‚å®¹å™¨æ ·å¼ï¼Œå¯é€šè¿‡è°ƒæ•´<code>video</code>å…ƒç´ çš„å±‚çº§å®ç°ã€‚æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šç»™<code>video</code>è®¾ç½®<code>position:relative</code>ï¼ˆä½¿å…¶èƒ½å“åº”z-indexï¼‰ï¼Œå¹¶è®¾ç½®<code>z-index:-1</code>ï¼Œå°†å…¶å±‚çº§é™è‡³å›¾æ ‡ä¸‹æ–¹ã€‚</p>
<p><strong>ä¿®æ”¹åçš„CSSä»£ç </strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.video-dom</span> {
	<span class="hljs-attribute">position</span>: relative; <span class="hljs-comment">/* å…³é”®ï¼šè®©z-indexç”Ÿæ•ˆ */</span>
	<span class="hljs-attribute">z-index</span>: -<span class="hljs-number">1</span>; <span class="hljs-comment">/* å°†è§†é¢‘å±‚çº§é™è‡³æœ€ä½ */</span>
	<span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
	<span class="hljs-attribute">object-fit</span>: contain;
}
</code></pre>
<p>æ­¤æ–¹æ¡ˆè™½èƒ½ç”Ÿæ•ˆï¼Œä½†éœ€æ³¨æ„ä¸¤ä¸ªç‚¹ï¼š</p>
<ul>
<li>
<p><code>z-index:-1</code>ä¼šè®©<code>video</code>å…ƒç´ å±‚çº§ä½äºå®¹å™¨çš„èƒŒæ™¯ï¼ˆå¦‚æœå®¹å™¨æœ‰èƒŒæ™¯è‰²ï¼‰ï¼Œéœ€ç¡®ä¿å®¹å™¨æ— èƒŒæ™¯æˆ–èƒŒæ™¯é€æ˜ã€‚</p>
</li>
<li>
<p>éƒ¨åˆ†è€æ—§è®¾å¤‡çš„<code>Safari</code>ç‰ˆæœ¬ï¼ˆå¦‚Safari 9åŠä»¥ä¸‹ï¼‰å¯¹è´Ÿ<code>z-index</code>çš„æ”¯æŒæœ‰ç‘•ç–µï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚</p>
</li>
</ul>
<h3 data-id="heading-7">3.3. æ–¹æ¡ˆä¸‰ï¼šç”¨transformè§¦å‘3Dæ¸²æŸ“</h3>
<p>å¦‚æœå‰ä¸¤ç§æ–¹æ¡ˆå› ç‰¹æ®Šåœºæ™¯å¤±æ•ˆï¼ˆå¦‚åµŒå¥—äº†å¤šä¸ªå±‚å ä¸Šä¸‹æ–‡ï¼‰ï¼Œå¯é‡‡ç”¨<strong>è§¦å‘3Dæ¸²æŸ“</strong>çš„æŠ€å·§ã€‚æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šç»™å›¾æ ‡å…ƒç´ æ·»åŠ <code>transform: translateZ(1px)</code>ï¼Œå¼ºåˆ¶æµè§ˆå™¨ä¸ºå…¶åˆ›å»ºä¸€ä¸ª3Dæ¸²æŸ“å±‚ï¼Œæå‡å±‚çº§ä¼˜å…ˆçº§ã€‚</p>
<p><strong>ä¿®æ”¹åçš„CSSä»£ç </strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.video-dom</span> {
	<span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
	<span class="hljs-attribute">object-fit</span>: contain;
	<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(-<span class="hljs-number">1px</span>); <span class="hljs-comment">/* å…³é”®ï¼šè§¦å‘3Dæ¸²æŸ“å±‚ */</span>
}
<span class="hljs-selector-class">.badge</span> {
	<span class="hljs-attribute">position</span>: absolute;
	<span class="hljs-attribute">top</span>: <span class="hljs-number">8px</span>;
	<span class="hljs-attribute">right</span>: <span class="hljs-number">8px</span>;
	<span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;
	<span class="hljs-attribute">width</span>: fit-content;
	<span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
	<span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.7</span>);
	<span class="hljs-attribute">padding</span>: <span class="hljs-number">0px</span> <span class="hljs-number">8px</span>;
	<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;
	<span class="hljs-attribute">color</span>: white;
	<span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
	<span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
	<span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;
	<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(<span class="hljs-number">1px</span>); <span class="hljs-comment">/* å…³é”®ï¼šè§¦å‘3Dæ¸²æŸ“å±‚ */</span>
}
</code></pre>
<p>åŸç†è¯´æ˜ï¼š</p>
<p>æ ¹æ®CSSè§„èŒƒï¼Œ<code>transform</code>å±æ€§ï¼ˆénoneå€¼ï¼‰ä¼šè§¦å‘å…ƒç´ å»ºç«‹ç‹¬ç«‹çš„å±‚å ä¸Šä¸‹æ–‡ï¼Œä¸”3Dæ¸²æŸ“å±‚çš„ä¼˜å…ˆçº§é«˜äºæ™®é€šå±‚ã€‚æ­¤æ–¹æ¡ˆå±äº<strong>å…¼å®¹æ€§hack</strong>ï¼Œé€‚ç”¨äºå‰ä¸¤ç§æ–¹æ¡ˆæ— æ³•ä½¿ç”¨çš„æç«¯åœºæ™¯ã€‚</p>
<h2 data-id="heading-8">4. æ€»ç»“ä¸æ‹“å±•</h2>
<p>è§£å†³å®Œå…·ä½“é—®é¢˜åï¼Œæˆ‘ä»¬éœ€è¦æç‚¼é€šç”¨è§„å¾‹ï¼Œé¿å…æœªæ¥é‡åˆ°ç±»ä¼¼çš„è·¨æµè§ˆå™¨å±‚å é—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>å±‚å ä¸Šä¸‹æ–‡æ˜¯z-indexç”Ÿæ•ˆçš„å‰æ</strong>ï¼šå½“å…ƒç´ å±‚çº§å¼‚å¸¸æ—¶ï¼Œå…ˆé€šè¿‡å¼€å‘è€…å·¥å…·æ£€æŸ¥å…¶çˆ¶å®¹å™¨æ˜¯å¦å»ºç«‹äº†ç‹¬ç«‹çš„å±‚å ä¸Šä¸‹æ–‡ã€‚</p>
</li>
<li>
<p><strong>Safariå¯¹ç‰¹æ®Šå…ƒç´ æœ‰ç‰¹æ®Šå¤„ç†</strong>ï¼šé™¤äº†<code>video</code>ï¼Œ<code>canvas</code>ã€<code>iframe</code>ç­‰å…ƒç´ åœ¨<code>Safari</code>ä¸­ä¹Ÿå¯èƒ½è¢«èµ‹äºˆè¾ƒé«˜çš„é»˜è®¤æ¸²æŸ“å±‚çº§ï¼Œéœ€æå‰åšå¥½å…¼å®¹é¢„æ¡ˆã€‚</p>
</li>
<li>
<p><strong>ä¼˜å…ˆé‡‡ç”¨è§„èŒƒæ–¹æ¡ˆ</strong>ï¼šæ–¹æ¡ˆä¸€ç¬¦åˆCSSæ ‡å‡†ï¼Œæ— å‰¯ä½œç”¨ï¼Œåº”ä½œä¸ºé¦–é€‰ï¼›æ–¹æ¡ˆäºŒå’Œä¸‰ä½œä¸ºå¤‡é€‰å…œåº•ã€‚</p>
</li>
</ol>
<h3 data-id="heading-9">4.1. è°ƒè¯•æŠ€å·§</h3>
<p>é‡åˆ°å±‚å é—®é¢˜æ—¶ï¼Œå¯é€šè¿‡ä»¥ä¸‹å·¥å…·å¿«é€Ÿå®šä½ï¼š</p>
<ul>
<li>
<p><strong>Chrome/Safariå¼€å‘è€…å·¥å…·</strong>ï¼šæ‰“å¼€â€œElementsâ€é¢æ¿ï¼Œé€‰ä¸­å…ƒç´ åæŸ¥çœ‹â€œComputedâ€ä¸­çš„z-indexå’Œå±‚å ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼›â€œLayersâ€é¢æ¿å¯ç›´è§‚çœ‹åˆ°å…ƒç´ çš„å±‚çº§å †å ã€‚</p>
</li>
<li>
<p><strong>ä¸´æ—¶è°ƒè¯•</strong>ï¼šç»™å¯ç–‘å…ƒç´ æ·»åŠ <code>background: red</code>ç­‰é†’ç›®æ ·å¼ï¼Œå¿«é€Ÿåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ä¸”ä½ç½®æ­£ç¡®ï¼Œæ’é™¤<strong>å…ƒç´ ä¸å­˜åœ¨</strong>æˆ–<strong>å®šä½é”™è¯¯</strong>ç­‰éå±‚å é—®é¢˜çš„å¹²æ‰°ã€‚</p>
</li>
</ul>
<p>è·¨æµè§ˆå™¨å…¼å®¹é—®é¢˜çš„æœ¬è´¨ï¼Œå¾€å¾€æ˜¯ä¸åŒæµè§ˆå™¨å¯¹è§„èŒƒçš„è§£è¯»æˆ–ä¼˜åŒ–ç­–ç•¥ä¸åŒã€‚é‡åˆ°é—®é¢˜æ—¶ï¼Œå…ˆå¤ç°ã€å†å‰–ææ ¹æºã€æœ€åé’ˆå¯¹æ€§è½åœ°æ–¹æ¡ˆï¼Œæ‰èƒ½åšåˆ°â€œæœ‰ç†æœ‰æ®ï¼Œä¸€æ­¥ä¸€è¥â€ï¼Œè€Œä¸æ˜¯ç›²ç›®è¯•é”™ã€‚å¸Œæœ›æœ¬æ–‡çš„æ€è·¯èƒ½ä¸ºå¤§å®¶æä¾›å‚è€ƒï¼Œè®©åç»­çš„H5å¼€å‘å°‘è¸©å‘ã€æ›´é«˜æ•ˆã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7568192652286754870" target="_blank" title="https://juejin.cn/post/7568192652286754870">çº¯å‰ç«¯æå–å›¾ç‰‡é¢œè‰²æ’ä»¶Color-Thiefæ•™å­¦+å®æˆ˜å®Œæ•´æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7565737512816771135" target="_blank" title="https://juejin.cn/post/7565737512816771135">react-konvaå®æˆ˜æŒ‡å—ï¼šCanvasé«˜æ€§èƒ½+æ˜“ç»´æŠ¤çš„ç»„ä»¶åŒ–å›¾å½¢å¼€å‘å®ç°æ•™ç¨‹</a></li>
<li><a href="https://juejin.cn/post/7560905838074462271" target="_blank" title="https://juejin.cn/post/7560905838074462271">Reactæ— é™æ»šåŠ¨æ’ä»¶react-infinite-scroll-componentçš„é…ç½®+ä¼˜åŒ–+é¿å‘æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7560542615484137491" target="_blank" title="https://juejin.cn/post/7560542615484137491">å‰ç«¯éŸ³é¢‘å…¼å®¹è§£å†³ï¼šéŸ³é¢‘ç¥å™¨howler.jsä»åŸºç¡€åˆ°è¿›é˜¶å®Œæ•´ä½¿ç”¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7559871680015024169" target="_blank" title="https://juejin.cn/post/7559871680015024169">ä½¿ç”¨React-OAuthè¿›è¡ŒGoogle/GitHubç™»å½•çš„æ•™ç¨‹å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7550585427834404927" target="_blank" title="https://juejin.cn/post/7550585427834404927">çº¯å‰ç«¯äººè„¸è¯†åˆ«åˆ©å™¨ï¼šface-api.jsæ‰‹æŠŠæ‰‹æ·±å…¥è§£ææ•™å­¦</a></li>
<li><a href="https://juejin.cn/post/7553865490732433462" target="_blank" title="https://juejin.cn/post/7553865490732433462">å…³äºReactçˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•forwardRefçš„è¯¦è§£å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7553484874609410074" target="_blank" title="https://juejin.cn/post/7553484874609410074">Reactè·¨ç»„ä»¶æ•°æ®å…±äº«useContextè¯¦è§£å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7545087762837815334" target="_blank" title="https://juejin.cn/post/7545087762837815334">Webå›¾åƒç¼–è¾‘ç¥å™¨tui.image-editorä»åŸºç¡€åˆ°è¿›é˜¶çš„å®æˆ˜æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7544323659788288046" target="_blank" title="https://juejin.cn/post/7544323659788288046">å¼€å‘ä¸ªäººå¾®ä¿¡å°ç¨‹åºç±»ç›®é€‰æ‹©/ç›ˆåˆ©æ–¹å¼/æˆæœ¬æ§åˆ¶ä¸æœåŠ¡å™¨æ¥å…¥æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7541741121400864778" target="_blank" title="https://juejin.cn/post/7541741121400864778">å‰ç«¯å›¾ç‰‡è£å‰ªCropper.jsæ ¸å¿ƒåŠŸèƒ½ä¸å®æˆ˜æŠ€å·§è¯¦è§£</a></li>
<li><a href="https://juejin.cn/post/7536530451461472265" target="_blank" title="https://juejin.cn/post/7536530451461472265">ç¼–è¾‘å™¨ä¹Ÿæœ‰é‚ªä¿®ï¼Ÿç›˜ç‚¹VS Codeé‚ªé—¨/æœ‰è¶£çš„æ‰©å±•</a></li>
<li><a href="https://juejin.cn/post/7535005018257981466" target="_blank" title="https://juejin.cn/post/7535005018257981466">jsä½¿ç”¨IntersectionObserverå®ç°ç›®æ ‡å…ƒç´ å¯è§åº¦çš„äº¤äº’</a></li>
<li><a href="https://juejin.cn/post/7534547200330121225" target="_blank" title="https://juejin.cn/post/7534547200330121225">Webå‰ç«¯é¡µé¢å¼€å‘é˜¿æ‹‰ä¼¯è¯­ç§é€‚é…æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7516122409948020736" target="_blank" title="https://juejin.cn/post/7516122409948020736">è®©ç½‘é¡µæ‹¥æœ‰Appä½“éªŒï¼ŸPWA å°†ç½‘é¡µå˜ä¸ºæ¡Œé¢åº”ç”¨çš„ä¿å§†çº§æ•™ç¨‹PWA</a></li>
<li><a href="https://juejin.cn/post/6953803916484018206" target="_blank" title="https://juejin.cn/post/6953803916484018206">ä½¿ç”¨nvmç®¡ç†node.jsç‰ˆæœ¬ä»¥åŠæ›´æ¢npmæ·˜å®é•œåƒæº</a></li>
<li><a href="https://juejin.cn/post/7140443283209060383" target="_blank" title="https://juejin.cn/post/7140443283209060383">æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè§„èŒƒçš„å›¢é˜Ÿvueé¡¹ç›®ï¼ŒåŒ…å«commitlintï¼Œeslintï¼Œprettierï¼Œhuskyï¼Œcommitizenç­‰ç­‰</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin è·¨å¹³å°å¼€å‘ä¸­çš„æƒè¡¡]]></title>    <link>https://juejin.cn/post/7571316028321628195</link>    <guid>https://juejin.cn/post/7571316028321628195</guid>    <pubDate>2025-11-12T00:35:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571316028321628195" data-draft-id="7568785441128153122" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin è·¨å¹³å°å¼€å‘ä¸­çš„æƒè¡¡"/> <meta itemprop="keywords" content="Android,iOS,Kotlin"/> <meta itemprop="datePublished" content="2025-11-12T00:35:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin è·¨å¹³å°å¼€å‘ä¸­çš„æƒè¡¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:35:44.000Z" title="Wed Nov 12 2025 00:35:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto;border:3px solid rgba(62,175,124,.2)}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-weight:700;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:6px;border:2px solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c}.markdown-body a:active,.markdown-body a:hover{border-bottom:1.5px solid #3eaf7c}.markdown-body a:before{content:"â‡²"}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(62,175,124,.2)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:.5rem solid;border-color:#42b983;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none}.markdown-body ul li:before{content:"â€¢";margin-right:4px;color:#3eaf7c}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/020a1ae80ed7481f9738db369f2f51e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512544&amp;x-signature=6MZQfJysJ%2BsBWg6eHkcWk51pR%2Fg%3D" alt="0.png" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>â€œå¼€å‘ä¸€è‡´æ€§å¾ˆå…³é”®â€â€”â€”è¿™å¥è¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé¢†åŸŸç»å¸¸è¢«æåŠï¼Œåœ¨ç§»åŠ¨å’Œ Web åº”ç”¨å¼€å‘ä¸­åŒæ ·é€‚ç”¨ã€‚</p>
<p>åœ¨å½“ä»Šè¿™ä¸ªå•ä¸ªåº”ç”¨éœ€è¦åœ¨å¤šä¸ªå¹³å°ä¸Šæ— ç¼è¿è¡Œçš„æ—¶ä»£ï¼Œç¡®ä¿å„å¹³å°ä¹‹é—´çš„ä¸€è‡´æ€§ä¸ä»…æ˜¯ä¸€ä¸ªç›®æ ‡ï¼Œæ›´æ˜¯ä¸€ç§å¿…è¦ã€‚å¤šå¹´æ¥ï¼Œå¼€å‘è€…ä»¬ä¸€ç›´é¢ä¸´ç€è‰°éš¾çš„æŠ‰æ‹©ï¼šæ˜¯ä¸ºæ¯ä¸ªå¹³å°åˆ†åˆ«æ„å»ºåŸç”Ÿåº”ç”¨ï¼Œè¿˜æ˜¯é‡‡ç”¨è·¨å¹³å°æ¡†æ¶ã€‚</p>
<p>ä»ä¼ ç»Ÿæ„ä¹‰ä¸Šæ¥è¯´ï¼Œé’ˆå¯¹ Android å’Œ iOS è¿›è¡ŒåŸç”Ÿå¼€å‘éœ€è¦å°†èµ„æºç¿»å€æŠ•å…¥ï¼šä¸¤å¥—ä»£ç åº“ã€ä¸¤æ”¯å·¥ç¨‹å›¢é˜Ÿï¼Œè¿˜éœ€è¦ä»˜å‡ºåŒå€çš„åŠªåŠ›æ¥ç¡®ä¿åŠŸèƒ½å’Œä¸šåŠ¡é€»è¾‘åŒæ­¥ã€‚å½“åº”ç”¨ç¨‹åºéœ€è¦ä¸€è‡´çš„ UI å’Œç›¸åŒçš„ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œè‡ªç„¶å°±éœ€è¦å…±äº«é©±åŠ¨å®ƒä»¬è¿è¡Œçš„ä»£ç ã€‚</p>
<p>è¿™ç§éœ€æ±‚å‚¬ç”Ÿäº†åƒ <strong>Flutter</strong> å’Œ <strong>React Native</strong> è¿™æ ·çš„è·¨å¹³å°å·¥å…·ã€‚è™½ç„¶è¿™äº›å·¥å…·éå¸¸æœ‰æ•ˆï¼Œä½†å¾€å¾€éœ€è¦åšå‡ºé‡å¤§çš„æƒè¡¡ã€‚å®ƒä»¬é€šå¸¸è¦æ±‚å¼€å‘è€…ä½¿ç”¨ä¸åŒçš„ UI æ¸²æŸ“å¼•æ“ï¼ˆ<strong>Flutter</strong>ï¼‰æˆ–ä½¿ç”¨æ¡¥æ¥ï¼ˆ<strong>React Native</strong>ï¼‰ï¼Œä¸åŸç”Ÿä»£ç ç›¸æ¯”ï¼Œè¿™åŠ¿å¿…ä¼šå¯¼è‡´æ€§èƒ½æŸå¤±ã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<strong>KMP</strong>ï¼ˆKotlin Multiplatformï¼‰ æä¾›äº†ä¸€ç§ç‹¬ç‰¹çš„æ–¹æ³•ã€‚<strong>KMP</strong> å¹¶ä¸æ˜¯å–ä»£åŸç”Ÿå¹³å°çš„ SDKï¼Œè€Œæ˜¯ä¸ä¹‹ååŒå·¥ä½œï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿå…±äº«é€šç”¨ä»£ç ï¼Œå¹¶èƒ½ä»¥ç›´è§‚çš„æƒ¯ç”¨æ–¹å¼è®¿é—®å¹³å° APIã€‚å…·ä½“æ¥è¯´ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åƒä½¿ç”¨ <strong>React Native</strong> ä¸€æ ·ï¼Œé€šè¿‡ä½¿ç”¨åŸç”Ÿ UI å·¥å…·åŒ…æ¥åˆ›å»ºä¸€æ¬¾ä¿ç•™å„å¹³å°å¤–è§‚å’Œæ„Ÿè§‰çš„ <strong>KMP</strong> åº”ç”¨ç¨‹åºã€‚ä½ ä¹Ÿå¯ä»¥é‡‡ç”¨ <strong>CMP</strong>ï¼ˆCompose Multiplatformï¼‰ï¼Œæ•ˆä»¿ <strong>Flutter</strong> çš„æ–¹å¼å…±äº« UI å®ç°ï¼Œå°½ç®¡è¿™å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨åœ¨ iOS ä¸Šå¤±å» â€œåŸç”Ÿâ€ å¤–è§‚ã€‚</p>
<p>æ€»ä¹‹ï¼Œå½“ä¸ <strong>CMP</strong> ç»“åˆä½¿ç”¨æ—¶ï¼Œ<strong>KMP</strong> æä¾›äº†ä¸€ä¸ªæå…·å¸å¼•åŠ›çš„åº”ç”¨åœºæ™¯ï¼šä¸ <strong>Flutter</strong> ç±»ä¼¼ï¼Œå®ƒèƒ½ç¼–è¯‘æˆæœ¬åœ°ä»£ç ä»¥å®ç°å‡ºè‰²çš„æ€§èƒ½ï¼ŒåŒæ—¶ä¹Ÿä¿ç•™äº†ä½¿ç”¨åŸç”Ÿ UI å·¥å…·åŒ…çš„é€‰é¡¹ï¼Œè¿™ä¸€ç‚¹ä¸ <strong>React Native</strong> ä¸€æ ·å…·æœ‰çµæ´»æ€§ã€‚</p>
<p><strong>KMP</strong> æ­£æˆä¸ºè·¨å¹³å°å¼€å‘çš„ä¸€ä¸ªå¼ºå¤§æ›¿ä»£æ–¹æ¡ˆï¼Œå®ƒæä¾›äº†ä¸€ç§åœ¨ä¸ç‰ºç‰²åŸç”Ÿåº”ç”¨æ€§èƒ½å’Œä½“éªŒçš„å‰æä¸‹å…±äº«ä»£ç çš„é€”å¾„ã€‚ä½œä¸ºä¸€ç§æ›¿ä»£æ–¹æ¡ˆï¼Œ<strong>KMP</strong> ä¹Ÿæœ‰è‡ªèº«éœ€è¦æƒè¡¡çš„æ–¹é¢ï¼Œæœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™äº›é—®é¢˜ã€‚</p>
<p>è™½ç„¶æœ¬æ–‡ä¸»è¦å…³æ³¨ Android å’Œ iOS å¼€å‘ï¼Œä½† <strong>KMP</strong> çš„åº”ç”¨å‰æ™¯æ›´ä¸ºå¹¿é˜”ã€‚å€ŸåŠ©åŒæ ·çš„å…±äº«é€»è¾‘ï¼Œå®ƒå¯ç”¨äºæ„å»ºæ¡Œé¢åº”ç”¨ï¼ˆWindowsã€macOSã€Linuxï¼‰ã€ç½‘é¡µåº”ç”¨ï¼ˆé€šè¿‡ <strong>Kotlin/JavaScript</strong>ï¼‰ï¼Œç”šè‡³æœåŠ¡å™¨ç«¯åº”ç”¨ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯ Kotlin è·¨å¹³å°ï¼ˆKMPï¼‰</h2>
<p><strong>KMP</strong> å…è®¸å¼€å‘å›¢é˜Ÿåœ¨ä¸åŒå¹³å°é—´ç¼–å†™å’Œå…±äº«ä»£ç ï¼Œè€Œä¸”å€ŸåŠ© <strong>CMP</strong>ï¼Œä»å¯é€‰æ‹©æ„å»ºåŸç”Ÿ UIã€‚å®ƒå¹¶éé‚£ç§å°†å¹³å°ç‰¹æ€§å®Œå…¨æŠ½è±¡æ‰çš„ â€œéæ­¤å³å½¼â€ çš„æ¡†æ¶ã€‚ç›¸åï¼Œå®ƒæ˜¯ä¸€ä¸ªç²¾å¦™çš„å·¥å…·ï¼Œèƒ½è®©ä½ å…±äº«åº”ç”¨ä¸­ä¸å¹³å°æ— å…³çš„éƒ¨åˆ†ï¼ŒåŒæ—¶è®©ç‰¹å®šäºå¹³å°çš„éƒ¨åˆ†ä¿æŒåŸç”Ÿç‰¹æ€§ã€‚Android å¼€å‘è€…å¯ä»¥ç”¨ <strong>Kotlin</strong> ç¼–å†™ UI ä»£ç ï¼ŒiOS å¼€å‘è€…åˆ™å¯ä»¥ç”¨ <strong>Objective-C</strong> æˆ– <strong>Swift</strong> ç¼–å†™ UI ä»£ç ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€åªèƒ½ä½¿ç”¨åŸç”Ÿç•Œé¢æ„å»º UIï¼Œè¿™æ˜¯ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ã€‚<strong>KMP</strong> ä¸ºä½ æä¾›äº†æŒ‰è‡ªå·±æ„æ„¿æ„å»º UI çš„çµæ´»æ€§ã€‚</p>
<h3 data-id="heading-2">KMP æ˜¯å¦‚ä½•å·¥ä½œçš„</h3>
<p><strong>KMP</strong> æœ‰ç‰¹å®šçš„é¡¹ç›®ç»“æ„ä»¥åŠ <code>expect/actual</code> æœºåˆ¶ï¼Œè¿™ä½¿å…¶èƒ½å¤Ÿè·¨å¹³å°è¿è¡Œã€‚ä¸€ä¸ªå…¸å‹çš„ <strong>KMP</strong> é¡¹ç›®åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼š</p>
<ul>
<li><code>commonMain</code> åŒ…å«é€šç”¨ä»£ç ã€‚è¿™æ®µä»£ç åªéœ€ç¼–è¯‘ä¸€æ¬¡ï¼Œå³å¯åœ¨æ‰€æœ‰ç›®æ ‡å¹³å°ä¸Šå…±äº«ã€‚ä½ å¯ä»¥å°†ä¸šåŠ¡é€»è¾‘ã€ç½‘ç»œè°ƒç”¨ç­‰æ”¾åœ¨è¿™ä¸ªæ¨¡å—ä¸­ã€‚</li>
<li><code>androidMain</code> åŒ…å« Android å®ç°ã€‚Android è®¾å¤‡çš„ UI å¯ä»¥åœ¨è¿™ä¸ªæ¨¡å—ä¸­ç”¨ <strong>Kotlin</strong> ç¼–å†™ã€‚</li>
<li><code>iosMain</code> åŒ…å« iOS å®ç°ã€‚iOS è®¾å¤‡çš„ UI å¯ä»¥ç”¨ <strong>Swift</strong> æˆ– <strong>Objective-C</strong> ç¼–å†™ã€‚</li>
</ul>
<p><code>expect</code> å’Œ <code>actual</code> å…³é”®å­—æ˜¯é€šç”¨å®ç°ä¸ç‰¹å®šå¹³å°å®ç°ä¹‹é—´çš„æ¡¥æ¢ã€‚åœ¨ <code>commonMain</code> ä¸­ï¼Œä½ å¯ä»¥é¢„æœŸæŸä¸ªç±»æˆ–å‡½æ•°å­˜åœ¨ï¼Œå¹¶å®šä¹‰å…¶ APIã€‚ç„¶åï¼Œåœ¨ <code>androidMain</code> å’Œ <code>iosMain</code> ä¸­ï¼Œä¸ºè¯¥å£°æ˜æä¾›ç‰¹å®šäºå¹³å°çš„å®é™…å®ç°ã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>commonMain</code> ä¸­ä½ å¯èƒ½é¢„æœŸæœ‰ä¸€ä¸ªç”Ÿæˆå”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆUUIDï¼‰çš„å‡½æ•°ï¼Œç„¶ååœ¨ <code>androidMain</code> ä¸­ä½¿ç”¨ Android çš„ <code>UUID.randomUUID()</code> ï¼Œåœ¨ <code>iosMain</code> ä¸­ä½¿ç”¨ iOS çš„ <code>NSUUID().uuidString</code> æ¥æä¾›å®é™…å®ç°ã€‚</p>
<p>åˆ©ç”¨ä¸Šè¿°ç»“æ„ï¼Œå¯ä»¥ä¸ºè·¨å¹³å°åº”ç”¨åŒæ—¶è¿›è¡Œæ„å»ºï¼Œè€Œä¸ä¼šç‰ºç‰²åº”ç”¨æ€§èƒ½ã€‚</p>
<h2 data-id="heading-3">KMP çš„ä¼˜åŠ¿</h2>
<h3 data-id="heading-4">é™ä½æˆæœ¬</h3>
<p>ç»Ÿä¸€æ¶æ„å¹¶ä½¿åŒä¸€æ‰¹å¼€å‘è€…èƒ½å¤Ÿä¸ºå¤šä¸ªå¹³å°ç¼–å†™ä»£ç ï¼Œæ— ç–‘èƒ½æ˜¾è‘—é™ä½å·¥ç¨‹æˆæœ¬ã€‚é€šè¿‡å°†ä¸šåŠ¡é€»è¾‘ã€ç½‘ç»œç­‰åŠŸèƒ½ç½®äºå…±äº«çš„ <code>commonMain</code> æ¨¡å—ä¸­ï¼Œå°±æ— éœ€é’ˆå¯¹åŒä¸€åŠŸèƒ½åœ¨ä¸åŒå¹³å°é‡å¤å®ç°å’Œæµ‹è¯•ã€‚è¿™ç›´æ¥é¿å…äº†é‡å¤å·¥ä½œï¼Œä¹Ÿå‡å°‘äº†ç‰¹å®šäºå¹³å°çš„é”™è¯¯ï¼Œä»è€Œæ‰“é€ å‡ºæ›´å¼ºå¤§ã€æ›´å¯é çš„äº§å“ã€‚æ­¤å¤–ï¼Œç”±äºæ ¸å¿ƒé€»è¾‘åªéœ€æµ‹è¯•ä¸€æ¬¡ï¼Œè¿™ä¹Ÿç®€åŒ–äº†è´¨é‡ä¿è¯æµç¨‹ã€‚éœ€è¦é‡ç‚¹æŒ‡å‡ºçš„æ˜¯ï¼Œ<strong>Flutter</strong> å’Œ <strong>React Native</strong> ä¹Ÿå…·å¤‡è¿™ä¸€ä¼˜åŠ¿ã€‚åœ¨è¿™æ–¹é¢ï¼Œ<strong>KMP</strong> å¹¶ä¸æ¯”å…¶ä»–æŠ€æœ¯æ›´å…·æœ‰ä¼˜åŠ¿ã€‚</p>
<h3 data-id="heading-5">åŸç”Ÿæ€§èƒ½</h3>
<p>ä¸å…¶ä»–è·¨å¹³å°å·¥å…·ä¸åŒï¼Œ<strong>KMP</strong> å…è®¸å¼€å‘è€…ä½¿ç”¨å¹³å°çš„åŸç”Ÿå·¥å…·æ„å»º UIã€‚å…±äº«çš„ <strong>Kotlin</strong> ä»£ç ä¼šè¢«ç¼–è¯‘æˆç›®æ ‡å¹³å°æ‰€éœ€çš„æ ¼å¼ï¼Œä¸º Android ç”Ÿæˆ <strong>JVM</strong> å­—èŠ‚ç ï¼Œä¸º iOS ç”ŸæˆåŸç”ŸäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ä¸ <strong>React Native</strong> ä¸åŒï¼Œè¿è¡Œæ—¶ä¸å­˜åœ¨è§£é‡Šå±‚ï¼Œè¿™ä½¿å¾—åº”ç”¨ç¨‹åºèƒ½å¤Ÿå®ç°æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½ã€‚</p>
<h3 data-id="heading-6">é€æ­¥é‡‡ç”¨</h3>
<p><strong>Flutter</strong>ï¼ˆä½¿ç”¨ <strong>Dart</strong>ï¼‰å’Œ <strong>React Native</strong>ï¼ˆä½¿ç”¨ <strong>TypeScript</strong> æˆ– <strong>JavaScript</strong>ï¼‰éœ€è¦ â€œå…¨æœ‰æˆ–å…¨æ— â€ å¼çš„é‡‡ç”¨æ–¹å¼ï¼Œè€Œ <strong>Kotlin</strong> å¤šå¹³å°åˆ™å¹¶éå¦‚æ­¤ã€‚å®ƒå¯ä»¥åœ¨ä»£ç åº“ä¸­é€æ­¥å¼•å…¥ï¼Œè¿‡æ¸¡ä¼šæ›´åŠ å¹³ç¼“ã€‚ä½ å¯ä»¥å°† <strong>KMP</strong> é€æ­¥å¼•å…¥åˆ°ç°æœ‰çš„åŸç”Ÿåº”ç”¨ä¸­ï¼Œè¿™æœ‰åŠ©äºç¡®ä¿åº”ç”¨åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ä¿æŒç¨³å®šã€‚å¸¸è§çš„èµ·ç‚¹æ˜¯å°†å•ä¸ªåŠŸèƒ½æˆ–ç‰¹å®šå±‚è¿ç§»åˆ°å…±äº«çš„ <strong>KMP</strong> æ¨¡å—ä¸­ã€‚</p>
<h3 data-id="heading-7">å¹³æ»‘æ¼”è¿›</h3>
<p>ç”±äºè°·æ­Œæ­£å¼è®¤å¯ <strong>Kotlin</strong> ä½œä¸ºå®‰å“å¼€å‘çš„ä¸»è¦è¯­è¨€ï¼Œå¤§å¤šæ•°å®‰å“å¼€å‘å›¢é˜Ÿéƒ½å·²åœ¨ä½¿ç”¨ <strong>Kotlin</strong> è¿›è¡Œå¼€å‘ã€‚å¯¹äºè¿™äº›å›¢é˜Ÿæ¥è¯´ï¼Œå‘ <strong>Kotlin</strong> å¤šå¹³å°çš„è¿‡æ¸¡é—¨æ§›æä½ã€‚</p>
<h2 data-id="heading-8">Flutter vs React Native vs KMP</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/284f77dd8e5647afa6e97a293bbe27d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512544&amp;x-signature=%2BXwyK3Dr6SrFtZYCHgh%2Bh4uNQX8%3D" alt="cmp.png" loading="lazy"/></p>
<p>è™½ç„¶è¿™ä¸‰é¡¹æŠ€æœ¯éƒ½æ”¯æŒè·¨å¹³å°å¼€å‘ï¼Œä½†å®ƒä»¬çš„å·¥ä½œåŸç†ä¸åŒï¼Œç‰¹åˆ«æ˜¯åœ¨ UI å’Œæ•´ä½“ç†å¿µæ–¹é¢ã€‚ä¸‹è¡¨æ€»ç»“äº†æˆ‘ä»¬ä¸Šé¢è®¨è®ºçš„ä¸»è¦å·®å¼‚ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th><strong>Flutter</strong></th><th><strong>React Native</strong></th><th><strong>KMP</strong></th></tr></thead><tbody><tr><td>è¯­è¨€</td><td><strong>Dart</strong></td><td><strong>JavaScript / TypeScript</strong></td><td><strong>Kotlin</strong></td></tr><tr><td>UI æ¸²æŸ“</td><td>ä½¿ç”¨ <strong>Skia</strong> å¼•æ“æ¸²æŸ“è‡ªå·±çš„ UI</td><td>é€šè¿‡ <strong>JS</strong> æ¡¥æ§åˆ¶åŸç”Ÿ UI ç»„ä»¶</td><td>å¯ä»¥ä½¿ç”¨åŸç”Ÿ UI (<strong>SwiftUI/Compose</strong>) æˆ–å…±äº« UI (<strong>Compose Multiplatform</strong>)</td></tr><tr><td>æ€§èƒ½</td><td>ä¼˜ç§€ï¼Œç¼–è¯‘ä¸ºåŸç”Ÿä»£ç ï¼Œæ— éœ€æ¡¥æ¥</td><td>è‰¯å¥½ï¼Œä½† <strong>JavaScript</strong> æ¡¥å¯èƒ½ä¼šæˆä¸ºç“¶é¢ˆ</td><td>ä¼˜ç§€ï¼Œç¼–è¯‘ä¸ºå¹³å°åŸç”Ÿæ ¼å¼ï¼Œæ— éœ€æ¡¥æ¥</td></tr><tr><td>é‡‡ç”¨</td><td>å®Œå…¨æŠ•å…¥</td><td>å®Œå…¨æŠ•å…¥</td><td>é€æ­¥é‡‡ç”¨</td></tr></tbody></table>
<h2 data-id="heading-9">iOS ç³»ç»Ÿä¸­çš„ç°çŠ¶</h2>
<p>å†å²ä¸Šï¼Œ<strong>Kotlin</strong> ä»æœªç”¨äºå¼€å‘ iOS åº”ç”¨ç¨‹åºã€‚ä½†æœ‰äº† <strong>KMP</strong> å’Œ <strong>CMP</strong>ï¼Œç°åœ¨è¿™å·²ç»æˆä¸ºå¯èƒ½ã€‚</p>
<p>é•¿æœŸä»¥æ¥ï¼Œ<strong>Kotlin</strong> å¤šå¹³å°åœ¨ iOS æ–¹é¢ç§‰æŒçš„ç†å¿µæ˜¯ â€œå…±äº«é€»è¾‘ï¼ŒåŸç”Ÿæ„å»ºç”¨æˆ·ç•Œé¢â€ã€‚è™½è¯´è¿™æ˜¯ä¸€ç§å¼ºå¤§çš„æ–¹æ³•ï¼Œä½†å®ƒä»æ„å‘³ç€ç”¨æˆ·ç•Œé¢å¼€å‘æ˜¯ç‰¹å®šäºå¹³å°çš„ä»»åŠ¡ã€‚éšç€ <code>1.8.0</code> ç¨³å®šç‰ˆçš„å‘å¸ƒï¼Œè¿™ç§æƒ…å†µå‘ç”Ÿäº†æ”¹å˜ã€‚æˆªè‡³ 2025 å¹´ 5 æœˆ 6 æ—¥ï¼Œç”¨äº iOS çš„ <strong>CMP</strong> è¾¾åˆ°ä¸€ä¸ªç¨³å®šçš„ã€å¯ç”¨äºç”Ÿäº§ç¯å¢ƒçš„é‡Œç¨‹ç¢‘ã€‚</p>
<p>è¿™ä¸€é‡Œç¨‹ç¢‘å¯¹äº <strong>Kotlin</strong> å¤šå¹³å°ç”Ÿæ€ç³»ç»Ÿè€Œè¨€æ˜¯ä¸€é¡¹é‡å¤§æˆæœã€‚<strong>Jetpack Compose</strong> æ˜¯è°·æ­Œä¸ºå®‰å“ç³»ç»Ÿæ‰“é€ çš„ç°ä»£å£°æ˜å¼ç”¨æˆ·ç•Œé¢å·¥å…·åŒ…ã€‚æœ‰äº† <strong>CMP</strong>ï¼Œç°åœ¨ä½ å¯ä»¥ä½¿ç”¨å®Œå…¨ç›¸åŒçš„ <strong>Kotlin</strong> ä»£ç ä¸º Android å’Œ iOS å®šä¹‰ UIã€‚è¿™æ„å‘³ç€ä¸ä»…ä¸šåŠ¡é€»è¾‘å¯ä»¥å…±äº«ï¼Œç”¨æˆ·ç•Œé¢æœ¬èº«ä¹Ÿèƒ½å…±äº«ã€‚ç›®å‰ï¼Œè¯¥æ¡†æ¶åœ¨åŠŸèƒ½ä¸Šå·²ç»ä¸é¢å‘ iOS çš„ <strong>Jetpack Compose</strong> ä¸ç›¸ä¸Šä¸‹ï¼Œè¿™ä½¿å…¶æˆä¸ºæ–°é¡¹ç›®çš„å¯è¡Œé€‰æ‹©ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œ<strong>CMP</strong> <code>1.8.0</code> ç‰ˆæœ¬ä¸ä»…å¯¹ iOS å¼€å‘æœ‰ä»·å€¼ï¼Œè€Œä¸”å®ç°äº† <strong>KMP</strong> çœŸæ­£çš„ä»·å€¼ä¸»å¼ ï¼Œå› ä¸ºå¼€å‘è€…ç°åœ¨èƒ½å¤ŸåŸºäºæ­¤æ„å»ºæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚</p>
<p>æ­¤å¤–ï¼ŒæŸäº›å±å¹•ä½¿ç”¨åŸç”Ÿ <strong>Swift/UIKit</strong>ï¼Œè€Œå…¶ä»–å±å¹•ä½¿ç”¨ <strong>Compose</strong> è¿›è¡Œæ··åˆæ­é…çš„é€‰é¡¹æä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚ä¸ºæ­¤ï¼Œä½ å¯ä»¥ä¾èµ–æ¡†æ¶æä¾›çš„ç‰¹å®šåŒ…è£…ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶åˆ©ç”¨äº† <strong>SwiftUI/UIKit</strong> çš„äº’æ“ä½œæ€§ã€‚ä¾‹å¦‚ï¼Œè¦åœ¨åŸç”Ÿ <strong>SwiftUI</strong> åº”ç”¨ä¸­ä½¿ç”¨ <strong>CMP</strong> ç•Œé¢ï¼Œå¯å°†å¯ç»„åˆ UI åŒ…è£…åœ¨ <code>ComposeUIViewController</code> ä¸­ã€‚ç„¶åï¼Œåœ¨ <strong>SwiftUI</strong> ä»£ç ä¸­ï¼Œä¸º <code>UIViewControllerRepresentable</code> åè®®åˆ›å»ºä¸€ä¸ªç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“å°†ç®¡ç†æ§åˆ¶å™¨ã€‚è‹¥è¦åœ¨ <strong>Compose</strong> UI ä¸­ä½¿ç”¨åŸç”Ÿ <strong>SwiftUI</strong> ç•Œé¢ï¼Œå¯å°† <strong>SwiftUI</strong> è§†å›¾æ‰˜ç®¡åœ¨ <code>UIHostingController</code> ä¸­ï¼Œè¯¥æ§åˆ¶å™¨å¯ä½¿ç”¨ <code>UIKitView</code> å¯ç»„åˆé¡¹ç›´æ¥åµŒå…¥åˆ° <strong>Compose</strong> å¸ƒå±€ä¸­ã€‚</p>
<h2 data-id="heading-10">ä½¿ç”¨ KMP çš„å¤§ç”¨æˆ·</h2>
<p><strong>KMP</strong> å¹¶éåªæ˜¯ä¸€ä¸ªç†è®ºæ¦‚å¿µï¼Œåƒç½‘é£ï¼ˆNetflixï¼‰ã€éº¦å½“åŠ³ï¼ˆMcDonaldâ€™sï¼‰å’Œé£åˆ©æµ¦ï¼ˆPhilipsï¼‰è¿™æ ·çš„å…¨çƒå¤§å‹å…¬å¸éƒ½åœ¨å®é™…äº§å“ä¸­ä½¿ç”¨å®ƒã€‚</p>
<h3 data-id="heading-11">ç½‘é£</h3>
<p>ç½‘é£æ˜¯ <strong>KMP</strong> çš„æ—©æœŸé‡è¦ç”¨æˆ·ï¼Œè‡ª 2020 å¹´ 10 æœˆå°±å¼€å§‹é‡‡ç”¨è¯¥æŠ€æœ¯ã€‚ä»–ä»¬åˆ©ç”¨ <strong>KMP</strong> ç»Ÿä¸€äº†å„åº”ç”¨ç¨‹åºä¸­çš„ä¸šåŠ¡é€»è¾‘ï¼Œç¡®ä¿æ— è®ºç”¨æˆ·ä½¿ç”¨ä½•ç§è®¾å¤‡ï¼Œå„é¡¹åŠŸèƒ½çš„è¿è¡Œè¡¨ç°ä¸€è‡´ã€‚ä»–ä»¬è¿˜åœ¨å†…éƒ¨çš„ <strong>Prodicle</strong> åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨äº†è¯¥æŠ€æœ¯ï¼Œè¯¥åº”ç”¨ç¨‹åºä¸ºç”µè§†å’Œç”µå½±é¡¹ç›®çš„å®é™…åˆ¶ä½œæä¾›æ”¯æŒã€‚</p>
<blockquote>
<p>æˆ‘ä»¬çš„ Android å’Œ iOS åº”ç”¨ç¨‹åºæœ‰ç€å…±äº«çš„æ¶æ„ï¼Œä¸¤ä¸ªå¹³å°ä¸Šç¼–å†™çš„ä¸šåŠ¡é€»è¾‘ç›¸ä¼¼ï¼Œç”šè‡³åœ¨æŸäº›æƒ…å†µä¸‹å®Œå…¨ç›¸åŒã€‚â€”â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fnetflixtechblog.com%2Fnetflix-android-and-ios-studio-apps-kotlin-multiplatform-d6d4d8d25d23" target="_blank" title="https://netflixtechblog.com/netflix-android-and-ios-studio-apps-kotlin-multiplatform-d6d4d8d25d23" ref="nofollow noopener noreferrer">ç½‘é£</a></p>
</blockquote>
<p>ç½‘é£èƒ½å¤Ÿå®ç°ä»£ç ä¸åº•å±‚å¹³å° 50% çš„è§£è€¦ã€‚å±•æœ›æœªæ¥ï¼Œç½‘é£è¿˜è°ˆåˆ°äº†å°†å…¶åº”ç”¨ç¨‹åºå‘å±•æˆä¸ºä¸€ä¸ªè–„ UI å±‚çš„å¯èƒ½æ€§ï¼Œè¯¥ UI å±‚å…±äº«ç”¨ <strong>KMP</strong> ç¼–å†™çš„ç›¸åŒä¸šåŠ¡é€»è¾‘ã€‚</p>
<h3 data-id="heading-12">éº¦å½“åŠ³</h3>
<p>éº¦å½“åŠ³åœ¨å…¶åº”ç”¨ç¨‹åºä¸­å¼•å…¥åº”ç”¨å†…æ”¯ä»˜åŠŸèƒ½æ—¶ï¼Œå¼€å§‹ä½¿ç”¨ <strong>KMP</strong>ï¼ˆæ—©æœŸç‰ˆæœ¬ä¸­ç§°ä¸º <strong>KMM</strong>ï¼‰ã€‚åœ¨éªŒè¯äº†è¿™ç§æ–¹æ³•åï¼Œä»–ä»¬å°† <strong>KMP</strong> çš„ä½¿ç”¨æ‰©å±•åˆ°å…¶ä»–æœåŠ¡ã€‚</p>
<blockquote>
<p>å°† <strong>KMM</strong> é›†æˆåˆ°åº”ç”¨ç¨‹åºæµç¨‹ä¸­ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸€ä¸ªåœ°æ–¹å¼€å‘è§£æå’Œå­˜å‚¨é€»è¾‘ï¼Œæ­¤å¤–è¿˜èƒ½å¼€å‘åœ¨æ¯ä¸ªå¹³å°ä¸Šæ­£ç¡®æ˜¾ç¤ºæœ¬åœ°åŒ–æ•°æ®å’Œäº§å“æ‰€éœ€çš„ä¸šåŠ¡é€»è¾‘ã€‚â€”â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2Fmcdonalds-technical-blog%2Fmobile-multiplatform-development-at-mcdonalds-3b72c8d44ebc" target="_blank" title="https://medium.com/mcdonalds-technical-blog/mobile-multiplatform-development-at-mcdonalds-3b72c8d44ebc" ref="nofollow noopener noreferrer">éº¦å½“åŠ³</a></p>
</blockquote>
<p>ä¾‹å¦‚ï¼Œä¸ºäº†æ»¡è¶³ä¸åŒå›½é™…åœ°åŒºå®¢æˆ·çš„å„ç§éœ€æ±‚ï¼Œä»–ä»¬å°†ç®¡ç†ç‰¹å®šåœ°åŒºäº§å“å’Œæ•°æ®çš„é€»è¾‘é›†ä¸­åˆ°ä¸€ä¸ªå…±äº«çš„ <strong>KMP</strong> æ¨¡å—ä¸­ã€‚åœ¨è¿™ä¸ªæ¨¡å—é‡Œï¼Œä»–ä»¬å°† <strong>KMP</strong> å¼•å…¥åˆ°å¤„ç†ç‰¹å®šåœ°åŒºå’Œè®¾å¤‡çš„äº§å“ä¸æ•°æ®çš„ä¸šåŠ¡é€»è¾‘ä¸­ã€‚</p>
<p>æœ€ç»ˆï¼Œéº¦å½“åŠ³é‡å†™äº†æ•´ä¸ªåº”ç”¨ç¨‹åºä»¥é‡‡ç”¨ <strong>KMP</strong>ã€‚é€šè¿‡è¿™ä¸€æˆ˜ç•¥è½¬å˜ï¼Œä»–ä»¬å°†ç‹¬ç«‹çš„ Android å’Œ iOS å¼€å‘å›¢é˜Ÿåˆå¹¶æˆä¸€ä¸ªæ›´åŠ ç»Ÿä¸€ä¸”é«˜æ•ˆçš„ç§»åŠ¨å¼€å‘å›¢é˜Ÿã€‚</p>
<h3 data-id="heading-13">é£åˆ©æµ¦</h3>
<p>2018 å¹´ï¼Œé£åˆ©æµ¦é‡‡ç”¨ <strong>KMP</strong> æ¥æ‘†è„±åŸç”Ÿå¼€å‘ã€‚é£åˆ©æµ¦åˆ©ç”¨ <strong>KMP</strong> ä¸ºå…¶äº’è”æ¶ˆè´¹äº§å“å’Œä¸ªäººå¥åº·äº§å“å¼€å‘äº†ä¸€ä¸ªç”¨äºè®¾å¤‡é€šä¿¡å’Œæ•°æ®åŒæ­¥çš„å…±äº« SDKï¼Œå®ç°äº†ç‰™åˆ·å’Œç©ºæ°”å‡€åŒ–å™¨ç­‰è®¾å¤‡ä¸ç§»åŠ¨åº”ç”¨çš„è¿æ¥ã€‚é€šè¿‡ä½¿ç”¨ <strong>KMP</strong>ï¼Œä»–ä»¬å¾—ä»¥ä¿ç•™å…±äº«çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>
<blockquote>
<p>è“ç‰™ä½åŠŸè€—æ¥å£å­˜åœ¨å¾ˆå¤§å·®å¼‚ï¼Œä»¥è‡³äºæ— æ³•è®¾è®¡å‡ºä¸€ç§èƒ½åŒæ—¶é€‚é…ä¸¤è€…çš„æ–¹æ¡ˆã€‚æ‰€ä»¥åœ¨è¿™æ–¹é¢ï¼Œæˆ‘ä»¬ä»å°†é‡‡ç”¨åŸç”Ÿå¼€å‘æ–¹å¼ã€‚â€”â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DhZPL8QqiLi8" target="_blank" title="https://www.youtube.com/watch?v=hZPL8QqiLi8" ref="nofollow noopener noreferrer">é£åˆ©æµ¦</a></p>
</blockquote>
<p>ä»–ä»¬æœ€åˆåœ¨å¤„ç†è“ç‰™ä½åŠŸè€—çš„è“ç‰™ API æ—¶é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»–ä»¬å¯¹è“ç‰™åè®®æ ˆä¿ç•™äº†åŸç”Ÿå®ç°ï¼Œè¿™è¡¨æ˜å¼€å‘äººå‘˜å¹¶éåœ¨æ•´ä¸ªä»£ç åº“ä¸­éƒ½é‡‡ç”¨ <strong>KMP</strong>ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šçš„å…¬å¸æ­£åœ¨é‡‡ç”¨ <strong>KMP</strong>ï¼Œå®ƒå¼€å§‹å—åˆ°é‡è§†ã€‚å„å…¬å¸ä¸€å¼€å§‹è¡ŒåŠ¨è¾ƒä¸ºç¼“æ…¢ï¼Œä½†éšç€ä»–ä»¬å¼€å§‹çœ‹åˆ°å…¶å¥½å¤„ï¼Œä¾¿é€æ¸å¢åŠ äº†ä½¿ç”¨æ¡ˆä¾‹ã€‚æˆ‘å»ºè®®å¤§å®¶æŸ¥çœ‹æ‰€æœ‰è¿™äº›æ¡ˆä¾‹ç ”ç©¶ï¼Œå› ä¸ºæˆ‘ä»…æåŠäº†å°‘æ•°å‡ ä¸ªã€‚</p>
<h2 data-id="heading-14">æŒ‘æˆ˜ä¸è€ƒé‡</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/077a51d6259042fba256bc6968e44f4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512544&amp;x-signature=oPKwLpDGIul5IDH0DfvbZY36DJw%3D" alt="bl.png" loading="lazy"/></p>
<p>è™½ç„¶ <strong>KMP</strong> ä¸ºè·¨å¹³å°å¼€å‘æä¾›äº†ä¸€ç§å¾ˆæœ‰å‰æ™¯çš„æ–¹æ³•ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¿…é¡»è®¤è¯†åˆ° <strong>KMP</strong> ç›®å‰çš„å±€é™æ€§ã€‚</p>
<h3 data-id="heading-15">ç”Ÿæ€ç³»ç»Ÿæˆç†Ÿåº¦</h3>
<p>ä¸ç°æœ‰çš„å·¥å…·ï¼ˆå¦‚ <strong>Flutter</strong> å’Œ <strong>React Native</strong>ï¼‰ç›¸æ¯”ï¼Œä¸€ä¸ªä¸»è¦æŒ‘æˆ˜åœ¨äº <strong>KMP</strong> çš„å¼€å‘è€…ç¤¾åŒºè§„æ¨¡è¾ƒå°ï¼Œæ”¯æŒç”Ÿæ€ç³»ç»Ÿä¹Ÿä¸å¤Ÿå®Œå–„ã€‚è™½ç„¶æ ¸å¿ƒåŠŸèƒ½å¾—åˆ°äº†å¾ˆå¥½çš„æ”¯æŒï¼Œä½†è¦æ‰¾åˆ°æ»¡è¶³ç‰¹å®šéœ€æ±‚ï¼ˆæ¯”å¦‚é«˜çº§è“ç‰™äº¤äº’æˆ–åå°æœåŠ¡ï¼‰çš„ã€é€‚é… <strong>KMP</strong> çš„åº“ï¼Œæƒ…å†µä¾ç„¶ä¸å®¹ä¹è§‚ï¼Œå°±å¦‚åŒæˆ‘ä»¬åœ¨é£åˆ©æµ¦æ¡ˆä¾‹ä¸­çœ‹åˆ°çš„ï¼Œå¯èƒ½ä»éœ€ç¼–å†™ç‰¹å®šå¹³å°çš„ä»£ç å®ç°ã€‚è¿™æœ‰æ—¶æ„å‘³ç€å¼€å‘è€…éœ€è¦å›´ç»•åŸç”Ÿè§£å†³æ–¹æ¡ˆåˆ›å»ºè‡ªå·±çš„åŒ…è£…å™¨ï¼Œè¿™å¹¶ä¸æ˜¯ç†æƒ³çš„æƒ…å†µ ã€‚</p>
<h3 data-id="heading-16">iOS å›¢é˜Ÿçš„å­¦ä¹ æ›²çº¿</h3>
<p>å¯¹äº iOS å›¢é˜Ÿè€Œè¨€ï¼Œé‡‡ç”¨ <strong>Kotlin</strong> å’Œ <strong>Gradle</strong> æ„å»ºç³»ç»Ÿå¯èƒ½ä¼šæœ‰ä¸€å®šçš„å­¦ä¹ æ›²çº¿ï¼Œå®ƒä»¬åœ¨å®‰å“ç”Ÿæ€ç³»ç»Ÿä¸­å¾ˆå¸¸è§ï¼Œä½†å¯¹å¤§å¤šæ•° iOS å¼€å‘è€…æ¥è¯´æ˜¯æ–°é²œäº‹ç‰©ã€‚</p>
<h3 data-id="heading-17">Kotlin/Native äº’æ“ä½œæ€§</h3>
<p><strong>Kotlin/Native</strong> ä¸ <strong>Swift/Objective-C</strong> ä¹‹é—´çš„äº’æ“ä½œæ€§å­˜åœ¨è‡ªèº«çš„å±€é™æ€§ã€‚<strong>Kotlin/Native</strong> é€šè¿‡ <strong>Swift/Objective-C</strong> æä¾›é—´æ¥äº’æ“ä½œæ€§ã€‚ä¾‹å¦‚ï¼Œä¸€äº› <strong>Kotlin</strong> è¯­è¨€ç‰¹æ€§åœ¨ <strong>Objective-C</strong> ä¸­å¯èƒ½æ²¡æœ‰ç›´æ¥å¯¹åº”çš„ç‰¹æ€§ï¼Œè¿™å°±è¦æ±‚å¼€å‘è€…åœ¨å¼€å‘è¿‡ç¨‹ä¸­äº†è§£è¿™äº›å·®å¼‚ã€‚è¿™ä¸€è¦æ±‚å¯èƒ½ä¼šæˆä¸ºä¸€ä¸ªå¾ˆå¤§çš„éšœç¢ï¼Œå› ä¸ºå¤§å¤šæ•°å¼€å‘è€…åœ¨å¼€å§‹å¼€å‘ä¹‹å‰å¹¶ä¸äº†è§£è¿™ä¸€ç‚¹ã€‚æ³›å‹å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œåœ¨è½¬æ¢è¿‡ç¨‹ä¸­ç±»å‹ä¿¡æ¯ä¼šä¸¢å¤±ã€‚å¼€å‘è€…éœ€è¦ç•™æ„ä¼ é€’çš„ç±»å‹ï¼Œå¹¶å›´ç»•æ­¤è¿›è¡Œæ£€æŸ¥ã€‚</p>
<h3 data-id="heading-18">å·¥å…·å’Œå¼€å‘æµç¨‹</h3>
<p>è™½ç„¶ç›¸å…³å·¥å…·åœ¨ä¸æ–­æ”¹è¿›ï¼Œä½†ç›®å‰ä»ä¸å¦‚åŸç”Ÿå¼€å‘å·¥å…·é‚£æ ·æ— ç¼è¡”æ¥ã€‚<strong>KMP</strong> æœ‰ä¸€äº›æ’ä»¶ï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ ä¾¿æ·ï¼Œè€Œä¸” <strong>JetBrains</strong> æ­£åœ¨ç§¯æå¼€å‘è¿™äº›æ’ä»¶ã€‚</p>
<p>è™½ç„¶é¢ä¸´çš„æŒ‘æˆ˜ä¸å°‘ä¸”ä¸å®¹å¿½è§†ï¼Œä½†è¿™ç§æƒ…å†µæ­£åœ¨è¿…é€Ÿæ”¹å˜ã€‚å¯ä»¥è¯´ï¼Œå¯¹ <strong>Kotlin</strong> æœ¬èº«çš„æ”¯æŒå·²ç»æˆç†Ÿï¼Œå¹¶ä¸”è¿˜åœ¨ä¸æ–­å‘å±•ï¼Œè€Œ <strong>KMP</strong> ç¤¾åŒºæ­£æ˜¯è¿™ä¸€è¶‹åŠ¿çš„ç›´æ¥å—ç›Šè€…ã€‚éšç€é‡‡ç”¨ç‡çš„æé«˜ï¼Œå…±äº«çŸ¥è¯†å’Œå¼€æºåº“çš„æ•°é‡ä¹Ÿä¼šå¢åŠ ã€‚</p>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>è·¨å¹³å°å¼€å‘ä¸€ç›´æ˜¯åœ¨æƒè¡¡åˆ©å¼Šä¸­è¿›è¡Œçš„ï¼šè¦åœ¨å¼€å‘æ•ˆç‡ä¸åŸç”Ÿæ€§èƒ½ä»¥åŠå¤–è§‚å’Œç”¨æˆ·ä½“éªŒä¹‹é—´æ‰¾åˆ°å¹³è¡¡ ã€‚æœ‰äº† <strong>KMP</strong>ï¼Œè¿™äº›æƒè¡¡å› ç´ åœ¨ä¸€å®šç¨‹åº¦ä¸Šæœ‰æ‰€å‡å°‘ã€‚ä½ å¯ä»¥è·å¾—å…±äº«ä»£ç åº“å¸¦æ¥çš„æ•ˆç‡ï¼ŒåŒæ—¶äº¤ä»˜å‡ ä¹ä¸åŸç”Ÿåº”ç”¨æ€§èƒ½ç›¸å½“çš„äº§å“ã€‚</p>
<p>è™½ç„¶æ ¸å¿ƒåŠŸèƒ½æœ‰è‰¯å¥½çš„æ”¯æŒï¼Œä½†è¦æ‰¾åˆ°æ»¡è¶³ç‰¹å®šéœ€æ±‚ï¼ˆå¦‚é«˜çº§è“ç‰™ä½åŠŸè€—äº¤äº’æˆ–åå°å®šä½æœåŠ¡ï¼‰çš„ç°æˆ <strong>KMP</strong> åº“ï¼Œå¯èƒ½ä»éœ€è¦ç¼–å†™ç‰¹å®šäºå¹³å°çš„å®ç°ä»£ç ã€‚è¿™ç¡®å®æ˜¯ä¸ªé—®é¢˜ï¼Œå› ä¸ºéœ€è¦æ‰€æœ‰è¿™äº›åŠŸèƒ½çš„åº”ç”¨ç¨‹åºæ— æ³•ä»…é€šè¿‡ <strong>KMP</strong> æ„å»ºã€‚ä½†æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªè¿­ä»£æ¼”è¿›çš„è¿‡ç¨‹ï¼Œç”±äº <strong>KMP</strong> å¼€å‘æ´»è·ƒï¼Œæ›´å¥½çš„æ”¯æŒå°†ä¼šæ¨å‡ºã€‚</p>
<blockquote>
<p>æ¨èä¸€ä¸ªç½‘ç«™ï¼Œå¯ä»¥æœç´¢å½“å‰çš„ <strong>KMP</strong> ç›¸å…³çš„åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fklibs.io%2F" target="_blank" title="https://klibs.io/" ref="nofollow noopener noreferrer">klibs.io</a>ã€‚</p>
</blockquote>
<p><strong>KMP</strong> æä¾›äº†ä¸€ä¸ªçµæ´»ä¸”æœ‰å‰æ™¯çš„å‰è¿›æ–¹å‘ï¼Œä½¿å›¢é˜Ÿèƒ½å¤Ÿä¸ºå¤šå¹³å°ä¸–ç•Œæ„å»ºä¸€è‡´çš„é«˜æ€§èƒ½åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶åˆä¸è„±ç¦»åŸç”ŸåŸºç¡€ã€‚å¯¹ <strong>Kotlin</strong> çš„æ”¯æŒåŠ›åº¦å¾ˆå¤§ï¼Œå…¶å¤šå¹³å°åŠŸèƒ½ä¹Ÿåªä¼šä»æ­¤ä¸æ–­å‘å±•å£®å¤§ã€‚</p>
<hr/>
<blockquote>
<p>åŸæ–‡<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.infoq.com%2Farticles%2Fkotlin-multiplatform-evaluation%2F" target="_blank" title="https://www.infoq.com/articles/kotlin-multiplatform-evaluation/" ref="nofollow noopener noreferrer">www.infoq.com/articles/koâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®°ç¬¬ä¸€æ¬¡é¸¿è’™åº”ç”¨ä¸Šæ¶ä¹‹æ—…ï¼šä¸€åœºç•¥å¸¦é—æ†¾çš„æ—…é€”]]></title>    <link>https://juejin.cn/post/7571338749198188594</link>    <guid>https://juejin.cn/post/7571338749198188594</guid>    <pubDate>2025-11-12T00:35:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571338749198188594" data-draft-id="7571360278970351625" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®°ç¬¬ä¸€æ¬¡é¸¿è’™åº”ç”¨ä¸Šæ¶ä¹‹æ—…ï¼šä¸€åœºç•¥å¸¦é—æ†¾çš„æ—…é€”"/> <meta itemprop="keywords" content="å‰ç«¯,HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-12T00:35:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‡å°‘"/> <meta itemprop="url" content="https://juejin.cn/user/4441682708283191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®°ç¬¬ä¸€æ¬¡é¸¿è’™åº”ç”¨ä¸Šæ¶ä¹‹æ—…ï¼šä¸€åœºç•¥å¸¦é—æ†¾çš„æ—…é€”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4441682708283191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‡å°‘
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.5 å¦‚é±¼å¾—æ°´
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.5 å¦‚é±¼å¾—æ°´" title="VIP.5 å¦‚é±¼å¾—æ°´" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:35:52.000Z" title="Wed Nov 12 2025 00:35:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®°ç¬¬ä¸€æ¬¡é¸¿è’™åº”ç”¨ä¸Šæ¶ä¹‹æ—…ï¼šä¸€åœºç•¥å¸¦é—æ†¾çš„æ—…é€”</h2>
<h4 data-id="heading-1">è®°ç¬¬ä¸€æ¬¡é¸¿è’™åº”ç”¨ä¸Šæ¶ä¹‹æ—…ï¼šä¸€åœºç•¥å¸¦é—æ†¾çš„æ—…é€”</h4>
<p>æˆ‘ä»¬åˆ¶ä½œçš„ä¸€æ¬¾æ—…è¡Œç±»åº”ç”¨ â€”â€”<strong>é¸¿é€”æ™ºå¯¼</strong>ï¼Œä¸Šæ¶ä¹Ÿæœ‰ä¸€å‘¨å¤šäº†ã€‚</p>
<p>å¯¹æˆ‘æ¥è¯´ï¼Œä½œä¸ºç¬¬ä¸€æ¬¾ä¸Šæ¶çš„åº”ç”¨ï¼ŒæŒ‰ç†æ¥è¯´åº”è¯¥æ»¡å¿ƒå…´å¥‹ï¼Œä½†æˆ–è®¸æ˜¯æˆ˜çº¿æ‹‰å¾—å¤ªé•¿ï¼Œä¹Ÿç»å†äº†è®¸å¤šæ›²æŠ˜ï¼Œå†…å¿ƒå·²æ²¡æœ‰å¤ªå¤šæ³¢æ¾œï¼Œæ›´å¤šçš„æ˜¯é—æ†¾ã€‚</p>
<p>æ­¤è¯æ€è®²å‘¢ï¼Ÿæ°å·§ä»Šå¤©ç•¥æœ‰ç©ºé—²ï¼Œå°±æ¥ç»™å¤§å®¶èŠèŠè¿™æ¬¾åº”ç”¨ï¼Œä»¥åŠæˆ‘ä»¬å“­ç¬‘ä¸å¾—çš„å¼€å‘å†ç¨‹ã€‚</p>
<p><strong>ä½¿ç”¨é“¾æ¥</strong>ï¼š</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fappgallery.huawei.com%2Fapp%2Fdetail%3Fid%3Dhongtuzhidao.qinglanzhuma.huawei%26channelId%3DSHARE%26source%3Dappshare" target="_blank" title="https://appgallery.huawei.com/app/detail?id=hongtuzhidao.qinglanzhuma.huawei&amp;channelId=SHARE&amp;source=appshare" ref="nofollow noopener noreferrer">appgallery.huawei.com/app/detail?â€¦</a></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ca44250e5fb43ec89f89926b4f3405f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512552&amp;x-signature=VqOMdH8VnvllX1Zk9nTV%2BNGtVjU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<hr/>
<h5 data-id="heading-2">è¿™æ˜¯ä¸€æ¬¾ä»€ä¹ˆæ ·çš„äº§å“ï¼Ÿ</h5>
<p>å…ˆå’Œå¤§å®¶è¯´è¯´æ ¸å¿ƒåŠŸèƒ½ç‚¹ï¼Œæ¯ä¸€ä¸ªéƒ½è—ç€æˆ‘ä»¬å¯¹æ—…è¡Œçš„å°æœŸå¾…ï½</p>
<h6 data-id="heading-3">ğŸŒ åº”ç”¨é¦–é¡µï¼šä½ çš„æ—…è¡Œæƒ…æŠ¥ç«™</h6>
<p>å¤©æ°”å¡ç‰‡ + æ¯æ—¥æ™¯ç‚¹æ¨è + çƒ­é—¨æ’è¡Œæ¦œï¼Œæ‰“å¼€ APP å°±èƒ½è§£é”å½“æ—¥æ—…è¡Œçµæ„Ÿï¼Œä¸€é”®å¼€å¯é¸¿é€”ä¹‹æ—…ï½</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0614dda0567448e398d314e8df305225~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512552&amp;x-signature=JvjbQT%2FmG4fk7VGbJa7HxWfQBEI%3D" alt="åº”ç”¨é¦–é¡µ" loading="lazy"/></p>
<p>åº”ç”¨é¦–é¡µ</p>
<h6 data-id="heading-4">ğŸ—£ï¸ éšè¡Œæ¢å®¢ï¼šä½ çš„ä¸“å±å¯¼æ¸¸</h6>
<p>æ ¹æ®å½“å‰ä½ç½®ä¿¡æ¯ï¼Œä¸ºä½ ç”Ÿæˆä¸“å±è¯­éŸ³å¯¼è§ˆï¼Œèµ°åˆ°å“ªå„¿è®²åˆ°å“ªå„¿ï¼Œå†ä¹Ÿä¸ç”¨æå‰åšæ”»ç•¥è®°çŸ¥è¯†ç‚¹ï½</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19f2b89c857b4af1ac3b7fc704a1b429~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512552&amp;x-signature=5HcIUNG5PbduNkKMArThnFXDPLA%3D" alt="éšè¡Œæ¢å®¢åŠŸèƒ½" loading="lazy"/></p>
<p>éšè¡Œæ¢å®¢åŠŸèƒ½</p>
<h6 data-id="heading-5">ğŸ“¸ æ´è§ä¸‡ç‰©ï¼šä¸€æ‹å³æ‡‚</h6>
<p>é‡åˆ°ä¸çŸ¥åçš„ç¾æ™¯ã€å¤å»ºç­‘ã€æ¤ç‰©ï¼ŸæŠŠæ‘„åƒæœºå¯¹å‡†å®ƒï¼Œå³åˆ»è·å–è¯¦ç»†ä»‹ç»ï¼Œæ—…è¡Œä¸­çš„å¥½å¥‡å¿ƒéšæ—¶æ»¡è¶³ï½</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/053c2af5ca0643faa69fc7ddfaeec914~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512552&amp;x-signature=QMcdJxkoPXsaYYB20NaL3pFkcug%3D" alt="æ´è§ä¸‡ç‰©åŠŸèƒ½" loading="lazy"/></p>
<p>æ´è§ä¸‡ç‰©åŠŸèƒ½</p>
<h6 data-id="heading-6">âœï¸ æ”»ç•¥åˆ†äº«ï¼šæ‰“å¼€ä½ çš„æ—…è¡Œçµæ„Ÿåº“</h6>
<p>è®°å½•æ—…é€”è¶£äº‹ã€åˆ†äº«å°ä¼—ç©æ³•ï¼Œå’Œå…¶ä»–æ—…è¡Œè€…äº¤æµå¿ƒå¾—ï¼Œè®©æ¯ä¸€æ¬¡å‡ºè¡Œéƒ½æœ‰è¿¹å¯å¾ªï½</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e46a96e8dafd42a38ef91681be2ac5d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763512552&amp;x-signature=is1TOOUSLyAvbiVOXrZSe2ZEzAI%3D" alt="æ”»ç•¥åˆ†äº«åŠŸèƒ½" loading="lazy"/></p>
<p>æ”»ç•¥åˆ†äº«åŠŸèƒ½</p>
<hr/>
<h5 data-id="heading-7">æˆ‘ä»¬æœ¬æƒ³åšä¸€æ¬¾ã€Œæ›´å®Œç¾ã€çš„äº§å“</h5>
<p>èŠå®Œç°æœ‰åŠŸèƒ½ï¼Œå°±è¯¥è¯´è¯´é‚£ä»½ã€Œé—æ†¾ã€çš„ç”±æ¥ â€”â€” å…ˆå’Œå¤§å®¶è®²è®²æˆ‘ä»¬æœ€åˆçš„ç¾å¥½è®¾æƒ³ã€‚</p>
<p>åœ¨åšè¿™æ¬¾äº§å“å‰ï¼Œæˆ‘ä»¬ç ”ç©¶äº†å¸‚é¢ä¸Šå¤§éƒ¨åˆ†æ—…è¡Œç±» APPï¼Œå‘ç°å®ƒä»¬å¤§è‡´åˆ†ä¸ºå››ç§é£æ ¼ï¼Œä½†å„æœ‰ä¼˜åŠ£ï¼š</p>
<ul>
<li><strong>å…¨èƒ½å‹</strong>ï¼ˆæºç¨‹ã€é©¬èœ‚çªã€é«˜å¾·ç­‰ï¼‰ï¼šè¦†ç›–äº¤é€šã€é…’åº—ã€è´­ç¥¨å…¨é“¾è·¯ï¼Œä½†åŠŸèƒ½è‡ƒè‚¿ï¼Œæ‰¾å…¥å£è´¹åŠ²ï¼›</li>
<li><strong>ç¤¾äº¤å‹</strong>ï¼ˆå°çº¢ä¹¦ï¼‰ï¼šæ”»ç•¥å‚è€ƒä¸°å¯Œã€ç”¨æˆ·ç²˜æ€§é«˜ï¼Œä½†æ—…è¡Œç›¸å…³åŠŸèƒ½ç›¸å¯¹å•ä¸€ï¼›</li>
<li><strong>AI é—®ç­”å‹</strong>ï¼ˆå¦‚è±†åŒ…ï¼‰ï¼šèƒ½åšæ”»ç•¥ã€è®²æ™¯ç‚¹ï¼Œä½†æ”»ç•¥æ•£è½åœ¨å¯¹è¯ä¸­ï¼Œä¸æ˜“æŸ¥æ‰¾å’ŒäºŒæ¬¡ç¼–è¾‘ï¼›</li>
<li><strong>æ—…ç¨‹ç®¡ç†å‹</strong>ï¼ˆå¦‚åœ†å‘¨æ—…è¿¹ï¼‰ï¼šèšç„¦æ—…è¡Œå‰è§„åˆ’ï¼Œå´å¿½ç•¥äº†æ—…è¡Œä¸­çš„å®æ—¶ä½“éªŒä¼˜åŒ–ã€‚</li>
</ul>
<p>æˆ‘ä»¬æƒ³åšçš„ï¼Œæ˜¯<strong>å–å„å®¶æ‰€é•¿ï¼Œèšç„¦ã€Œæ—…è¡Œä¸­ã€çš„ä½“éªŒä¼˜åŒ–</strong>â€”â€” æ‰“é€ ä¸€æ¬¾ã€Œæ—…è¡Œç™¾å®ç®±ã€å¼çš„ APPï¼š</p>
<p>âœ… å†…ç½® AI å¯¹è¯å°åŠ©æ‰‹ï¼Œéšæ—¶è§£ç­”æ—…è¡Œä¸­é‡åˆ°çš„é—®é¢˜ï¼›</p>
<p>âœ… æ™ºèƒ½å¯¼æ¸¸åŒæ¨¡å¼ï¼š</p>
<ul>
<li>
<p>å®æ—¶ä½ç½®è¯­éŸ³å¯¼è§ˆ + çŸ­æ—¶è¡Œç¨‹è§„åˆ’ï¼ˆ3 å°æ—¶ / åŠå¤© / 1 å¤©ï¼‰ï¼Œæ”¯æŒäºŒæ¬¡è°ƒæ•´ç¼–è¾‘ï¼›</p>
</li>
<li>
<p>å›¾ç‰‡è¯†åˆ«åŠŸèƒ½ï¼Œç¾æ™¯ä¸€æ‹å³æ‡‚ï¼Œæ»¡è¶³å¥½å¥‡å¿ƒï¼›</p>
<p>âœ… æ—…è¡Œè€…äº¤æµç¤¾åŒº + æ¯æ—¥æ™¯ç‚¹æ¨èï¼Œæå‡æ—¥å¸¸ä½¿ç”¨ç‡å’Œç²˜æ€§ã€‚</p>
</li>
</ul>
<p>æœ‰äº†è¿™ä¸ªæƒ³æ³•ï¼Œæˆ‘ä»¬å°±ä¸€å¤´æ‰è¿›äº†å¼€å‘é‡Œ â€”â€” ä»åˆšå¼€å§‹æ¥è§¦é¸¿è’™ç³»ç»Ÿçš„è¾¹å­¦è¾¹ç»ƒï¼Œåˆ°é‡åˆ°éš¾é¢˜æ—¶çš„å½»å¤œç¢ç£¨ï¼Œå†åˆ°é€æ­¥å®ç°åŠŸèƒ½çš„æˆå°±æ„Ÿï¼Œæ¯ä¸€æ­¥éƒ½èµ°å¾—å¾ˆæ‰å®ã€‚</p>
<p>ç»ˆäºï¼Œæˆ‘ä»¬åŸºæœ¬å®Œæˆäº†æœ€åˆçš„æ„æƒ³ï¼Œæœ¬ä»¥ä¸ºèƒ½å¸¦ç€ã€Œå®Œæ•´ç‰ˆã€å’Œå¤§å®¶è§é¢ï¼Œå´æ²¡æƒ³åˆ°è¢«ç°å®æ³¼äº†å†·æ°´ã€‚</p>
<hr/>
<h5 data-id="heading-8">ä¸Šæ¶è·¯ä¸Šçš„ã€Œå¦¥åã€ï¼šä»å®Œæ•´ç‰ˆåˆ°é’æ˜¥ç‰ˆ</h5>
<p>ç¬¬ä¸€æ¬¡æäº¤å®¡æ ¸åï¼Œæˆ‘ä»¬æ”¶åˆ°äº†è¦æ±‚ï¼šéœ€è¦æä¾› AI ç”Ÿæˆã€ç¤¾åŒºå®‰å…¨ç›¸å…³çš„èµ„è´¨è¯ä¹¦ã€‚</p>
<p>å…¶å®è¿™ä¸€ç‚¹æˆ‘ä»¬æ—©æœ‰é¢„æ–™ï¼Œäºæ˜¯å…µåˆ†ä¸¤è·¯ï¼šä¸€è¾¹ç”³è¯·èµ„è´¨ï¼Œä¸€è¾¹è°ƒæ•´åŠŸèƒ½ã€è¡¥å……ç»†èŠ‚ï¼ˆæ¯”å¦‚æ·»åŠ å†…å®¹å®¡æ ¸ã€ç”Ÿæˆæ ‡è¯†ã€ä¸¾æŠ¥å…¥å£ï¼‰ï¼Œå¸Œæœ›èƒ½å…ˆå®ç°ä¸Šæ¶ã€‚</p>
<p>ä½†ä¿®ä¿®æ”¹æ”¹å‡ æ¬¡åï¼Œå®¡æ ¸ä»å¡åœ¨è¯»èµ„è´¨ä¸Šã€‚å°±è¿™æ ·ç­‰äº†å·®ä¸å¤šä¸€ä¸ªæœˆï¼Œèµ„è´¨ç”³è¯·æœ‰äº†æ¶ˆæ¯ï¼Œå´ä¸æ˜¯å¥½æ¶ˆæ¯ â€”â€” ä¸€é•¿ä¸²å¤æ‚çš„æ‰‹ç»­ã€æ•°æ®åŒæ­¥å…±äº«ç­‰è¦æ±‚ï¼Œè®©æˆ‘ä»¬è¿™ä¸ªå°å›¢é˜Ÿæœ‰äº›æ‹›æ¶ä¸ä½ã€‚</p>
<p>æƒè¡¡å†ä¸‰ï¼Œæˆ‘ä»¬ä¸å¾—ä¸åšå‡ºå¦¥åï¼š<strong>éšè—éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½ï¼Œå°½é‡å» AI åŒ–ï¼Œç®€åŒ–äº§å“å½¢æ€</strong>ã€‚</p>
<p>äºæ˜¯ï¼ŒåŸæœ¬è®¾æƒ³çš„ã€Œå…¨èƒ½ç™¾å®ç®±ã€ï¼Œæœ€ç»ˆä»¥ã€Œé’æ˜¥ç‰ˆã€çš„æ ·å­å’Œå¤§å®¶è§é¢äº†ã€‚</p>
<p>è¯´å®è¯ï¼Œæˆ‘ä»¬å¯¹è¿™ä¸ªç‰ˆæœ¬å¹¶ä¸å®Œå…¨æ»¡æ„ â€”â€” å®ƒæ²¡èƒ½å®Œå…¨å±•ç°æˆ‘ä»¬çš„åˆè¡·ï¼Œä¹Ÿå°‘äº†å¾ˆå¤šæˆ‘ä»¬è®¤ä¸ºã€Œèƒ½æå‡æ—…è¡Œä½“éªŒã€çš„å…³é”®åŠŸèƒ½ã€‚</p>
<p>ä½†è‡³å°‘ï¼Œå®ƒä¸Šæ¶äº†ï¼Œç®—æ˜¯ç»™è¿™æ®µæ—¶é—´çš„åŠªåŠ›ä¸€ä¸ªé˜¶æ®µæ€§äº¤ä»£ã€‚</p>
<hr/>
<h5 data-id="heading-9">æ•…äº‹è¿˜æ²¡ç»“æŸï¼Œæˆ‘ä»¬ä»åœ¨åŠªåŠ›</h5>
<p>è™½ç„¶è¿™æ¬¡ä¸Šæ¶å¸¦ç€é—æ†¾ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬æ”¾å¼ƒäº†æœ€åˆçš„æ„æƒ³ã€‚</p>
<p>ç›®å‰ï¼Œæˆ‘ä»¬è¿˜åœ¨å°½åŠ›åŠç†ç›¸å…³èµ„è´¨å’Œææ–™ï¼ŒåŒæ—¶ä¹Ÿåœ¨æ”¶é›†ç”¨æˆ·åé¦ˆï¼ŒæŒç»­ä¼˜åŒ–ç°æœ‰åŠŸèƒ½ã€‚</p>
<p>å¦‚æœä½ æ„¿æ„æ”¯æŒæˆ‘ä»¬è¿™ä¸ªå°å›¢é˜Ÿï¼Œæ¬¢è¿ä¸‹è½½ã€Œé¸¿é€”æ™ºå¯¼ã€ä½“éªŒï½ æ— è®ºæ˜¯åŠŸèƒ½å»ºè®®ã€ä½¿ç”¨é—®é¢˜ï¼Œè¿˜æ˜¯ä½ å¿ƒä¸­ã€Œç†æƒ³æ—…è¡Œ APPã€çš„æ ·å­ï¼Œéƒ½æ¬¢è¿åœ¨è¯„è®ºåŒºç•…æ‰€æ¬²è¨€ï¼Œä½ çš„æ¯ä¸€æ¡åé¦ˆï¼Œéƒ½æ˜¯æˆ‘ä»¬å®Œå–„äº§å“çš„åŠ¨åŠ›ã€‚</p>
<p>æœŸå¾…ä¸ä¹…çš„å°†æ¥ï¼Œæˆ‘ä»¬èƒ½å¸¦ç€ã€Œå®Œæ•´ç‰ˆã€ç”šè‡³ã€ŒPro Max ç‰ˆã€å›å½’ï¼ŒçœŸæ­£å®ç°æœ€åˆçš„è®¾æƒ³ï¼Œè®©æ¯ä¸€æ®µæ—…ç¨‹éƒ½æ›´ç²¾å½©ã€æ›´çœå¿ƒï½</p>
<p>ğŸ‘‰ ç‚¹å‡»ä¸‹è½½ï¼šã€é¸¿é€”æ™ºå¯¼ã€‘é¸¿è’™åº”ç”¨å•†åº—æœç´¢å³å¯</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fappgallery.huawei.com%2Fapp%2Fdetail%3Fid%3Dhongtuzhidao.qinglanzhuma.huawei%26channelId%3DSHARE%26source%3Dappshare" target="_blank" title="https://appgallery.huawei.com/app/detail?id=hongtuzhidao.qinglanzhuma.huawei&amp;channelId=SHARE&amp;source=appshare" ref="nofollow noopener noreferrer">appgallery.huawei.com/app/detail?â€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ118ï¼‰Redisçš„ç¼“å­˜æœºåˆ¶å¦‚ä½•å®ç°ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571285984089964596</link>    <guid>https://juejin.cn/post/7571285984089964596</guid>    <pubDate>2025-11-11T23:07:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571285984089964596" data-draft-id="7571303808116686900" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ118ï¼‰Redisçš„ç¼“å­˜æœºåˆ¶å¦‚ä½•å®ç°ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-11T23:07:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ118ï¼‰Redisçš„ç¼“å­˜æœºåˆ¶å¦‚ä½•å®ç°ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T23:07:06.000Z" title="Tue Nov 11 2025 23:07:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Redis ä½œä¸ºä¸€ä¸ªé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œå¹¿æ³›åº”ç”¨äºç¼“å­˜æœºåˆ¶ä¸­ï¼Œä»¥å¿«é€Ÿå­˜å–æ•°æ®ã€å‡è½»æ•°æ®åº“å‹åŠ›ã€‚Redis æä¾›äº†å¤šç§ç¼“å­˜ç­–ç•¥å’ŒæŒä¹…åŒ–é€‰é¡¹ï¼Œå¸®åŠ©ç”¨æˆ·å®ç°é«˜æ•ˆçš„ç¼“å­˜ç®¡ç†ã€‚ä»¥ä¸‹æ˜¯ Redis ç¼“å­˜æœºåˆ¶çš„è¯¦ç»†è®²è§£åŠä»£ç ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-0">1. åŸºæœ¬ç¼“å­˜æ“ä½œ</h3>
<p>Redis æä¾›äº†ä¸€ç³»åˆ—å‘½ä»¤æ¥è¿›è¡Œç¼“å­˜æ“ä½œï¼Œå¦‚ <code>SET</code>ã€<code>GET</code>ã€<code>EXPIRE</code> ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›åŸºæœ¬çš„ç¼“å­˜æ“ä½œç¤ºä¾‹ï¼š</p>
<h4 data-id="heading-1">è®¾ç½®ç¼“å­˜</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisCacheExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-comment">// è®¾ç½®é”®å€¼å¯¹</span>
            jedis.set(<span class="hljs-string">"key1"</span>, <span class="hljs-string">"value1"</span>);

            <span class="hljs-comment">// è®¾ç½®é”®å€¼å¯¹å¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´ (å•ä½: ç§’)</span>
            jedis.setex(<span class="hljs-string">"key2"</span>, <span class="hljs-number">3600</span>, <span class="hljs-string">"value2"</span>); <span class="hljs-comment">// 1 å°æ—¶åè¿‡æœŸ</span>

            <span class="hljs-comment">// è·å–é”®å€¼å¯¹</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(<span class="hljs-string">"key1"</span>);
            System.out.println(<span class="hljs-string">"key1: "</span> + value);
        }
    }
}
</code></pre>
<h3 data-id="heading-2">2. ç¼“å­˜è¿‡æœŸç­–ç•¥</h3>
<p>Redis æä¾›äº†å¤šç§æ–¹æ³•æ¥è®¾ç½®ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼š</p>
<ul>
<li><code>EXPIRE key seconds</code>ï¼šè®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ã€‚</li>
<li><code>PEXPIRE key milliseconds</code>ï¼šè®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚</li>
<li><code>EXPIREAT key timestamp</code>ï¼šè®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ä¸ºç‰¹å®šæ—¶é—´æˆ³ï¼ˆç§’ï¼‰ã€‚</li>
<li><code>PEXPIREAT key timestamp</code>ï¼šè®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ä¸ºç‰¹å®šæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ã€‚</li>
<li><code>TTL key</code>ï¼šæŸ¥çœ‹é”®çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´ï¼ˆç§’ï¼‰ã€‚</li>
<li><code>PTTL key</code>ï¼šæŸ¥çœ‹é”®çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-3">è®¾ç½®å’Œè·å–è¿‡æœŸæ—¶é—´</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisExpireExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-comment">// è®¾ç½®é”®å€¼å¯¹å¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´</span>
            jedis.set(<span class="hljs-string">"key3"</span>, <span class="hljs-string">"value3"</span>);
            jedis.expire(<span class="hljs-string">"key3"</span>, <span class="hljs-number">10</span>); <span class="hljs-comment">// 10 ç§’åè¿‡æœŸ</span>

            <span class="hljs-comment">// è·å–è¿‡æœŸæ—¶é—´</span>
            <span class="hljs-type">Long</span> <span class="hljs-variable">ttl</span> <span class="hljs-operator">=</span> jedis.ttl(<span class="hljs-string">"key3"</span>);
            System.out.println(<span class="hljs-string">"TTL for key3: "</span> + ttl);
        }
    }
}
</code></pre>
<h3 data-id="heading-4">3. ç¼“å­˜æ·˜æ±°ç­–ç•¥</h3>
<p>å½“ Redis è¾¾åˆ°æœ€å¤§å†…å­˜é™åˆ¶æ—¶ï¼Œä¼šæ ¹æ®é…ç½®çš„æ·˜æ±°ç­–ç•¥åˆ é™¤ä¸€äº›é”®ä»¥é‡Šæ”¾å†…å­˜ã€‚å¸¸è§çš„ç­–ç•¥åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>noeviction</code>ï¼šå½“å†…å­˜ä¸è¶³æ—¶ï¼Œè¿”å›é”™è¯¯ï¼Œä¸ä¼šåˆ é™¤ä»»ä½•é”®ã€‚</li>
<li><code>allkeys-lru</code>ï¼šç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é”®ã€‚</li>
<li><code>volatile-lru</code>ï¼šç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ã€‚</li>
<li><code>allkeys-random</code>ï¼šéšæœºç§»é™¤ä¸€äº›é”®ã€‚</li>
<li><code>volatile-random</code>ï¼šéšæœºç§»é™¤ä¸€äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ã€‚</li>
<li><code>volatile-ttl</code>ï¼šç§»é™¤ä¸€äº›å°†è¦è¿‡æœŸçš„é”®ã€‚</li>
</ul>
<p>å¯ä»¥åœ¨ <code>redis.conf</code> æ–‡ä»¶ä¸­é…ç½®ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">maxmemory 256mb
maxmemory-policy allkeys-lru
</code></pre>
<h3 data-id="heading-5">4. ä½¿ç”¨ç¼“å­˜çš„ç¤ºä¾‹ï¼šç¼“å­˜æ•°æ®åº“æŸ¥è¯¢ç»“æœ</h3>
<p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Redis ç¼“å­˜æ•°æ®åº“æŸ¥è¯¢ç»“æœï¼Œä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</p>
<h4 data-id="heading-6">æ•°æ®åº“æŸ¥è¯¢ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Database</span> {
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">query</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"DB_Value_for_"</span> + key;
    }
}
</code></pre>
<h4 data-id="heading-7">ç¼“å­˜ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span> {
    <span class="hljs-keyword">private</span> Jedis jedis;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> cacheExpireTime;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Cache</span><span class="hljs-params">(Jedis jedis, <span class="hljs-type">int</span> cacheExpireTime)</span> {
        <span class="hljs-built_in">this</span>.jedis = jedis;
        <span class="hljs-built_in">this</span>.cacheExpireTime = cacheExpireTime;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getData</span><span class="hljs-params">(String key, Database db)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(key);
        <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// ç¼“å­˜æœªå‘½ä¸­ï¼Œä»æ•°æ®åº“æŸ¥è¯¢</span>
            value = db.query(key);
            <span class="hljs-comment">// å°†ç»“æœç¼“å­˜åˆ° Redisï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´</span>
            jedis.setex(key, cacheExpireTime, value);
        }
        <span class="hljs-keyword">return</span> value;
    }
}
</code></pre>
<h4 data-id="heading-8">ä¸»ç¨‹åº</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">Database</span> <span class="hljs-variable">db</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Database</span>();
            <span class="hljs-type">Cache</span> <span class="hljs-variable">cache</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cache</span>(jedis, <span class="hljs-number">3600</span>); <span class="hljs-comment">// ç¼“å­˜ 1 å°æ—¶</span>

            <span class="hljs-comment">// æŸ¥è¯¢å¹¶ç¼“å­˜ç»“æœ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> cache.getData(<span class="hljs-string">"key1"</span>, db);
            System.out.println(<span class="hljs-string">"Result: "</span> + value);
        }
    }
}
</code></pre>
<h3 data-id="heading-9">5. ç¼“å­˜çš„æŒä¹…åŒ–</h3>
<p>Redis æä¾›äº† RDB å’Œ AOF ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼Œä»¥ç¡®ä¿æ•°æ®åœ¨é‡å¯æˆ–æ•…éšœåçš„æ¢å¤ã€‚</p>
<h4 data-id="heading-10">RDB æŒä¹…åŒ–</h4>
<p>RDB (Redis Database Backup) æ˜¯ä¸€ç§å®šæœŸå¿«ç…§çš„æŒä¹…åŒ–æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡é…ç½® <code>redis.conf</code> æ¥å¯ç”¨ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">save 900 1
save 300 10
save 60 10000
</code></pre>
<h4 data-id="heading-11">AOF æŒä¹…åŒ–</h4>
<p>AOF (Append-Only File) æ˜¯ä¸€ç§å°†æ¯æ¬¡å†™æ“ä½œè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶çš„æŒä¹…åŒ–æ–¹å¼ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">appendonly yes
appendfsync everysec
</code></pre>
<h3 data-id="heading-12">6. å®ç°ç¼“å­˜æ›´æ–°æœºåˆ¶</h3>
<p>å½“æ•°æ®æºï¼ˆå¦‚æ•°æ®åº“ï¼‰æ›´æ–°æ—¶ï¼Œéœ€è¦åŒæ­¥æ›´æ–°ç¼“å­˜ï¼Œä»¥ç¡®ä¿ç¼“å­˜æ•°æ®çš„ä¸€è‡´æ€§ã€‚å¸¸è§çš„ç­–ç•¥åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ä¸»åŠ¨æ›´æ–°</strong>ï¼šåœ¨æ•°æ®æºæ›´æ–°æ—¶ï¼Œä¸»åŠ¨æ›´æ–°æˆ–åˆ é™¤ç¼“å­˜ã€‚</li>
<li><strong>å®šæ—¶åˆ·æ–°</strong>ï¼šå®šæœŸåˆ·æ–°ç¼“å­˜ä¸­çš„æ•°æ®ã€‚</li>
<li><strong>ç¼“å­˜å¤±æ•ˆ</strong>ï¼šè®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜è‡ªåŠ¨å¤±æ•ˆã€‚</li>
</ul>
<h4 data-id="heading-13">ä¸»åŠ¨æ›´æ–°ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span> {
    <span class="hljs-keyword">private</span> Jedis jedis;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> cacheExpireTime;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Cache</span><span class="hljs-params">(Jedis jedis, <span class="hljs-type">int</span> cacheExpireTime)</span> {
        <span class="hljs-built_in">this</span>.jedis = jedis;
        <span class="hljs-built_in">this</span>.cacheExpireTime = cacheExpireTime;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getData</span><span class="hljs-params">(String key, Database db)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(key);
        <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// ç¼“å­˜æœªå‘½ä¸­ï¼Œä»æ•°æ®åº“æŸ¥è¯¢</span>
            value = db.query(key);
            <span class="hljs-comment">// å°†ç»“æœç¼“å­˜åˆ° Redisï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´</span>
            jedis.setex(key, cacheExpireTime, value);
        }
        <span class="hljs-keyword">return</span> value;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateData</span><span class="hljs-params">(String key, String newValue)</span> {
        <span class="hljs-comment">// æ›´æ–°æ•°æ®åº“</span>
        <span class="hljs-comment">// db.update(key, newValue);</span>

        <span class="hljs-comment">// æ›´æ–°ç¼“å­˜</span>
        jedis.setex(key, cacheExpireTime, newValue);
    }
}
</code></pre>
<h3 data-id="heading-14">æ€»ç»“</h3>
<p>Redis æä¾›äº†å¼ºå¤§çš„ç¼“å­˜æœºåˆ¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæå‡ç³»ç»Ÿæ€§èƒ½ã€‚åœ¨ä½¿ç”¨ Redis å®ç°ç¼“å­˜æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å…¶æä¾›çš„å¤šç§ç¼“å­˜ç­–ç•¥ã€è¿‡æœŸç­–ç•¥å’Œæ·˜æ±°ç­–ç•¥ï¼Œå¹¶ç»“åˆå®é™…ä¸šåŠ¡éœ€æ±‚è¿›è¡Œåˆç†é…ç½®ã€‚æ­¤å¤–ï¼Œé€šè¿‡ç¼“å­˜æ•°æ®åº“æŸ¥è¯¢ç»“æœã€å®ç°ç¼“å­˜æ›´æ–°æœºåˆ¶ï¼Œå¯ä»¥ç¡®ä¿ç¼“å­˜æ•°æ®çš„ä¸€è‡´æ€§å’Œæœ‰æ•ˆæ€§ã€‚é€šè¿‡ä¸Šè¿°ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œå®ç° Redis çš„ç¼“å­˜æœºåˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ119ï¼‰Redisçš„å®‰å…¨æœºåˆ¶å¦‚ä½•é…ç½®ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571272874847682612</link>    <guid>https://juejin.cn/post/7571272874847682612</guid>    <pubDate>2025-11-11T23:07:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571272874847682612" data-draft-id="7571285984089980980" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ119ï¼‰Redisçš„å®‰å…¨æœºåˆ¶å¦‚ä½•é…ç½®ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-11T23:07:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ119ï¼‰Redisçš„å®‰å…¨æœºåˆ¶å¦‚ä½•é…ç½®ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T23:07:57.000Z" title="Tue Nov 11 2025 23:07:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Redis æä¾›äº†ä¸€äº›å®‰å…¨æœºåˆ¶æ¥ä¿æŠ¤å…¶å…å—æœªæˆæƒè®¿é—®å’Œå…¶ä»–æ½œåœ¨çš„å®‰å…¨å¨èƒã€‚ä»¥ä¸‹æ˜¯ Redis å®‰å…¨æœºåˆ¶çš„è¯¦ç»†ä»‹ç»åŠé…ç½®ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-0">1. ç»‘å®š IP åœ°å€</h3>
<p>Redis é»˜è®¤ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼Œå»ºè®®å°†å…¶ç»‘å®šåˆ°æŒ‡å®šçš„ IP åœ°å€ä»¥é™åˆ¶è®¿é—®èŒƒå›´ã€‚å¯ä»¥åœ¨ <code>redis.conf</code> æ–‡ä»¶ä¸­é…ç½® <code>bind</code> é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-conf" lang="conf"># ç»‘å®šåˆ°æœ¬åœ°å›ç¯åœ°å€
bind 127.0.0.1
</code></pre>
<h3 data-id="heading-1">2. è®¾ç½®å¯†ç </h3>
<p>Redis æ”¯æŒè®¾ç½®å¯†ç æ¥é™åˆ¶æœªæˆæƒè®¿é—®ã€‚å¯ä»¥åœ¨ <code>redis.conf</code> æ–‡ä»¶ä¸­é…ç½® <code>requirepass</code> é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-conf" lang="conf"># è®¾ç½®è®¿é—®å¯†ç 
requirepass your_password_here
</code></pre>
<p>åœ¨ä»£ç ä¸­éœ€è¦ä½¿ç”¨å¯†ç è¿›è¡Œè¿æ¥ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisAuthExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            jedis.auth(<span class="hljs-string">"your_password_here"</span>);
            jedis.set(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(<span class="hljs-string">"key"</span>);
            System.out.println(<span class="hljs-string">"key: "</span> + value);
        }
    }
}
</code></pre>
<h3 data-id="heading-2">3. ä¿æŠ¤æ¨¡å¼</h3>
<p>Redis ä»ç‰ˆæœ¬ 3.2 å¼€å§‹å¼•å…¥äº†ä¿æŠ¤æ¨¡å¼ã€‚åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®å¯†ç ä¸” Redis ç»‘å®šåˆ°æ‰€æœ‰ç½‘ç»œæ¥å£ï¼ˆ0.0.0.0ï¼‰ï¼Œåˆ™é»˜è®¤æ‹’ç»å¤–éƒ¨è¿æ¥ã€‚å¯ä»¥åœ¨ <code>redis.conf</code> æ–‡ä»¶ä¸­é…ç½® <code>protected-mode</code> é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">protected-mode yes
</code></pre>
<h3 data-id="heading-3">4. ç¦ç”¨å±é™©å‘½ä»¤</h3>
<p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå¯ä»¥ç¦ç”¨ä¸€äº›å±é™©å‘½ä»¤ï¼Œå¦‚ <code>FLUSHALL</code>ã€<code>CONFIG</code> ç­‰ã€‚å¯ä»¥åœ¨ <code>redis.conf</code> æ–‡ä»¶ä¸­é…ç½® <code>rename-command</code> é€‰é¡¹å°†è¿™äº›å‘½ä»¤é‡å‘½åä¸ºä¸€ä¸ªæ— æ•ˆçš„å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-conf" lang="conf"># é‡å‘½åå±é™©å‘½ä»¤ï¼Œä½¿å…¶ä¸å¯ç”¨
rename-command FLUSHALL ""
rename-command CONFIG ""
</code></pre>
<h3 data-id="heading-4">5. é€šè¿‡é˜²ç«å¢™é™åˆ¶è®¿é—®</h3>
<p>é™¤äº†åœ¨ <code>redis.conf</code> ä¸­è¿›è¡Œé…ç½®ï¼Œè¿˜å¯ä»¥ä½¿ç”¨é˜²ç«å¢™æ¥é™åˆ¶ Redis çš„è®¿é—®ã€‚ä¾‹å¦‚ï¼Œåœ¨ Linux ä¸Šä½¿ç”¨ <code>iptables</code>ï¼š</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># åªå…è®¸æœ¬åœ°è®¿é—® Redis</span>
iptables -A INPUT -p tcp --dport 6379 -s 127.0.0.1 -j ACCEPT
iptables -A INPUT -p tcp --dport 6379 -j DROP
</code></pre>
<h3 data-id="heading-5">6. å¯ç”¨ TLS åŠ å¯†</h3>
<p>ä» Redis 6.0 å¼€å§‹ï¼ŒRedis æ”¯æŒ TLS åŠ å¯†ã€‚é…ç½® TLS åŠ å¯†éœ€è¦ç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥ï¼Œå¹¶åœ¨ <code>redis.conf</code> æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">tls-port 6379
port 0
tls-cert-file /path/to/redis.crt
tls-key-file /path/to/redis.key
tls-ca-cert-file /path/to/ca.crt
</code></pre>
<p>å®¢æˆ·ç«¯è¿æ¥æ—¶ä¹Ÿéœ€è¦ä½¿ç”¨ TLS è¯ä¹¦ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisShardInfo;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisTLSExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">JedisShardInfo</span> <span class="hljs-variable">shardInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisShardInfo</span>(<span class="hljs-string">"rediss://localhost:6379"</span>);
        shardInfo.setPassword(<span class="hljs-string">"your_password_here"</span>);
        shardInfo.setSsl(<span class="hljs-literal">true</span>);
        shardInfo.setSslSocketFactory(SSLContext.getDefault().getSocketFactory());

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(shardInfo)) {
            jedis.set(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(<span class="hljs-string">"key"</span>);
            System.out.println(<span class="hljs-string">"key: "</span> + value);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<h3 data-id="heading-6">7. é…ç½®å®¢æˆ·ç«¯è¿æ¥é™åˆ¶</h3>
<p>é€šè¿‡é…ç½® <code>redis.conf</code> æ–‡ä»¶ä¸­çš„ <code>maxclients</code> é€‰é¡¹ï¼Œå¯ä»¥é™åˆ¶åŒæ—¶è¿æ¥åˆ° Redis çš„æœ€å¤§å®¢æˆ·ç«¯æ•°é‡ï¼Œä»¥é˜²æ­¢èµ„æºè€—å°½ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">maxclients 10000
</code></pre>
<h3 data-id="heading-7">8. é…ç½®æœ€å¤§å†…å­˜ä½¿ç”¨</h3>
<p>é€šè¿‡é…ç½® <code>redis.conf</code> æ–‡ä»¶ä¸­çš„ <code>maxmemory</code> é€‰é¡¹ï¼Œå¯ä»¥é™åˆ¶ Redis ä½¿ç”¨çš„æœ€å¤§å†…å­˜é‡ï¼Œä»¥é˜²æ­¢å†…å­˜ä½¿ç”¨è¿‡å¤šï¼š</p>
<pre><code class="hljs language-conf" lang="conf">maxmemory 256mb
</code></pre>
<h3 data-id="heading-8">9. æ—¥å¿—å®¡è®¡</h3>
<p>Redis æ”¯æŒå°†æ—¥å¿—è®°å½•åˆ°æ–‡ä»¶æˆ–æ ‡å‡†è¾“å‡ºã€‚å¯ä»¥åœ¨ <code>redis.conf</code> æ–‡ä»¶ä¸­é…ç½® <code>logfile</code> å’Œ <code>loglevel</code> é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">logfile "/var/log/redis/redis-server.log"
loglevel notice
</code></pre>
<h3 data-id="heading-9">10. ç¤ºä¾‹é…ç½®æ–‡ä»¶</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ <code>redis.conf</code> æ–‡ä»¶ï¼Œç»“åˆäº†ä¸Šè¿°å®‰å…¨é…ç½®ï¼š</p>
<pre><code class="hljs language-conf" lang="conf"># ç½‘ç»œç»‘å®š
bind 127.0.0.1

# ä¿æŠ¤æ¨¡å¼
protected-mode yes

# è®¿é—®å¯†ç 
requirepass your_password_here

# é‡å‘½åå±é™©å‘½ä»¤
rename-command FLUSHALL ""
rename-command CONFIG ""

# TLS åŠ å¯†
tls-port 6379
port 0
tls-cert-file /path/to/redis.crt
tls-key-file /path/to/redis.key
tls-ca-cert-file /path/to/ca.crt

# å®¢æˆ·ç«¯è¿æ¥é™åˆ¶
maxclients 10000

# æœ€å¤§å†…å­˜ä½¿ç”¨
maxmemory 256mb

# æ—¥å¿—é…ç½®
logfile "/var/log/redis/redis-server.log"
loglevel notice
</code></pre>
<h3 data-id="heading-10">æ€»ç»“</h3>
<p>é€šè¿‡åˆç†é…ç½® Redis çš„å®‰å…¨æœºåˆ¶ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ä¿æŠ¤ Redis å®ä¾‹å…å—æœªæˆæƒè®¿é—®å’Œå…¶ä»–æ½œåœ¨çš„å®‰å…¨å¨èƒã€‚ä¸Šè¿°é…ç½®æ¶µç›–äº† IP ç»‘å®šã€å¯†ç ä¿æŠ¤ã€ä¿æŠ¤æ¨¡å¼ã€ç¦ç”¨å±é™©å‘½ä»¤ã€é˜²ç«å¢™é™åˆ¶ã€TLS åŠ å¯†ã€å®¢æˆ·ç«¯è¿æ¥é™åˆ¶ã€æœ€å¤§å†…å­˜ä½¿ç”¨å’Œæ—¥å¿—å®¡è®¡ç­‰æ–¹é¢ã€‚ç»“åˆå…·ä½“ä¸šåŠ¡éœ€æ±‚ï¼Œå¯ä»¥è¿›ä¸€æ­¥å®šåˆ¶å’Œä¼˜åŒ– Redis çš„å®‰å…¨é…ç½®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>