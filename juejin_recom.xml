<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[æ–°æŒ–æ˜äº† 3 ä¸ªç‰›å“„å“„çš„ GitHub æ•™ç¨‹åº“ï¼Œæœ‰ç‚¹æ„æ€å•Šã€‚]]></title>    <link>https://juejin.cn/post/7590776324164534272</link>    <guid>https://juejin.cn/post/7590776324164534272</guid>    <pubDate>2026-01-04T06:08:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590776324164534272" data-draft-id="7590597231709290531" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–°æŒ–æ˜äº† 3 ä¸ªç‰›å“„å“„çš„ GitHub æ•™ç¨‹åº“ï¼Œæœ‰ç‚¹æ„æ€å•Šã€‚"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-01-04T06:08:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–°æŒ–æ˜äº† 3 ä¸ªç‰›å“„å“„çš„ GitHub æ•™ç¨‹åº“ï¼Œæœ‰ç‚¹æ„æ€å•Šã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T06:08:02.000Z" title="Sun Jan 04 2026 06:08:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">01ã€å¤§æ¨¡å‹ APP åˆé›†</h2>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®é‡Œé¢å¡æ»¡äº†å„ç§ç°æˆçš„å¼€æºå¤§æ¨¡å‹åº”ç”¨ Demo å’Œè„šæ‰‹æ¶ã€‚</p>
<p>ç°åœ¨å·²ç»åœ¨ GitHub ä¸Šæ–©è· 8 ä¸‡å¤šçš„ Star äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08507832f15f4553b41e54e93232d985~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=cyAmKDJyBp2Tu44Nl5g3BqL4bCk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ç®¡ä½ æ˜¯æƒ³åšä¸€ä¸ªèƒ½è¯» PDF çš„æœºå™¨äººï¼Œè¿˜æ˜¯æƒ³æé‚£ç§èƒ½è‡ªåŠ¨ä¸Šç½‘æŸ¥èµ„æ–™ã€å†™æŠ¥å‘Šçš„å¤æ‚ Agent å›¢é˜Ÿï¼Œè¿™é‡Œé¢åŸºæœ¬éƒ½èƒ½æ‰¾åˆ°ç°æˆçš„ä»£ç å‚è€ƒã€‚</p>
<p>æ¯”è¾ƒè‰¯å¿ƒçš„æ˜¯å®ƒä¸åªç›¯ç€ OpenAI ä¸€å®¶ï¼Œåƒ Anthropicã€Gemini ç”šè‡³èƒ½åœ¨æœ¬åœ°è·‘çš„å¤§æ¨¡å‹ï¼Œå®ƒéƒ½æœ‰å¯¹åº”çš„æ¡ˆä¾‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/748c06b34bab40aa951912601d5bd246~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=iub2CdTZoZKQeN4Y3e8Dgpb0aPw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/566eb6f04cb24aaba6c7c108be356bd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=xLDBdgy6H6i2R8kUCDenIPKjdcA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47c37e015c744cdb8bda8da4038aed4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=oqdb95GtGqoHCEwdZdQXquQm6QM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œä¸”åˆ†ç±»åšå¾—ç‰¹åˆ«ç»†ï¼Œæƒ³åšè¯­éŸ³åŠ©æ‰‹çš„ã€æƒ³ææ•°æ®åˆ†æçš„ã€æˆ–è€…æƒ³ç ”ç©¶æœ€æ–°çš„ RAG æŠ€æœ¯çš„ï¼Œéƒ½èƒ½ç›´æ¥æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶å¤¹ã€‚</p>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ä½ æƒ³åšä»€ä¹ˆåŠŸèƒ½ï¼Œå…ˆå»é‡Œé¢æœä¸€ä¸‹ï¼Œå¤§æ¦‚ç‡èƒ½æ‰¾åˆ°ä¸€ä¸ªèƒ½è·‘çš„é›å½¢ã€‚</p>
<p>æŠŠå®ƒæ‹‰ä¸‹æ¥æ”¹ä¸€æ”¹ï¼Œæ¯”ä½ è‡ªå·±ä»å¤´å»å†™é‚£äº›åŸºç¡€çš„è¿æ¥ä»£ç è¦å¿«å¾—å¤šï¼Œå±äºé‚£ç§åªæœ‰æ”¶è—äº†æ‰å®‰å¿ƒçš„å·¥å…·ç®±ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">å¼€æºåœ°å€ï¼šhttps://github.com/Shubhamsaboo/awesome-llm-apps
</code></pre>
<h2 data-id="heading-1">02ã€CEO æ•™ç¨‹</h2>
<p>è¿™ä¸ªå« Awesome-CEO çš„å¼€æºé¡¹ç›®å¾ˆæœ‰æ„æ€ï¼Œè¿™æ˜¯ç»™åˆ›ä¸šå…¬å¸çš„è€æ¿ä»¬å‡†å¤‡çš„ç”Ÿå­˜æ‰‹å†Œã€‚</p>
<p>å¦‚æœä½ æ˜¯é‚£ç§æŠ€æœ¯å‡ºèº«ã€çªç„¶è¢«æ¨ä¸Šå»å½“ CEO çš„åˆ›å§‹äººï¼Œé¢å¯¹èèµ„ã€æ‹›äººã€ç®¡é’±è¿™äº›ç ´äº‹ä¸€å¤´é›¾æ°´çš„æ—¶å€™ï¼Œé™¤äº†æ‰¾æœ‰ç»éªŒçš„äººèŠï¼Œä¹Ÿå¯ä»¥çœ‹çœ‹è¿™ä¸ªå¼€æºé¡¹ç›®ï¼Œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45c5bd87995e4de3bc6be811b8a85cc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=iN5%2FLMtP4xngSdIDjNtqrpp0D3s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½œè€…éå¸¸ç›´ç™½ï¼Œè¯´è¿™æ˜¯ä¸€ä»½å¸¦æœ‰ä¸ªäººåè§çš„æ¸…å•ï¼Œæ„æ€æ˜¯å®ƒåªæ”¶å½•é‚£äº›çœŸçš„æœ‰ç”¨çš„ç¡¬è´§ã€‚</p>
<p>æ¯”å¦‚æ€ä¹ˆæå®šä½ çš„å‰ 10 ä¸ªå®¢æˆ·ï¼Œæ€ä¹ˆå†™é‚£ç§æŠ•èµ„äººæ„¿æ„çœ‹çš„å•†ä¸šè®¡åˆ’ä¹¦ï¼Œç”šè‡³è¿˜æœ‰ä¸“é—¨çš„è®¡ç®—å™¨å¸®ä½ ç®—è‚¡æƒç¨€é‡Šï¼Œé˜²æ­¢ä½ ä¸€ä¸å°å¿ƒæŠŠå…¬å¸å–äºäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb697bd24ede467bb67103ebce328765~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=m8HYgl5KEwUoY2Uj%2F5TkvBY%2FhSQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é™¤äº†å·¥å…·ï¼Œå®ƒè¿˜åˆ—äº†ä¸€å †å¿…è¯»ä¹¦å•å’Œç®¡ç†å¿ƒå¾—ï¼Œå¾ˆå¤šéƒ½æ˜¯ç¡…è°·é‚£è¾¹éªŒè¯è¿‡çš„ç»éªŒã€‚</p>
<p>å®ƒå°±åƒä¸€ä¸ªç»éªŒä¸°å¯Œçš„è€å‰è¾ˆååœ¨ä½ å¯¹é¢ï¼Œå‘Šè¯‰ä½ åœ¨è¿™ä¸ªé˜¶æ®µæœ€è¯¥å…³æ³¨ä»€ä¹ˆï¼Œå¸®ä½ åœ¨ä»æå®¢è½¬å‹åˆ°ç®¡ç†è€…çš„è·¯ä¸Šå°‘è¸©å‡ ä¸ªå¤§å‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/842f5e1c40974432b2645e446b29b17e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=3cMfjBsNP81MCOZAbDWBIu9Kc48%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/kuchin/awesome-ceo</span>
</code></pre>
<h2 data-id="heading-2">03ã€AI Agent å®æ“æ•™ç¨‹</h2>
<p>å¦‚æœä½ åœ¨æŠ˜è…¾ AI Agentï¼Œè‚¯å®šé‡åˆ°è¿‡é‚£ç§ä¹Ÿå°± Demo èƒ½è·‘ï¼Œä¸€ä¸Šç”Ÿäº§å°±å´©çš„æƒ…å†µã€‚</p>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®å°±æ˜¯ä¸“é—¨æ²»è¿™ä¸ªæ¯›ç—…çš„ï¼Œå®ƒæ•´ç†äº†ä¸€å †åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­éªŒè¯è¿‡çš„è®¾è®¡æ¨¡å¼ï¼Œä¸“é—¨è§£å†³ Agent æ€ä¹ˆè§„åˆ’ä»»åŠ¡ã€æ€ä¹ˆç®¡ç†è®°å¿†ã€æ€ä¹ˆè‡ªæˆ‘çº é”™è¿™äº›ç¡¬æ ¸é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31aaa2eb390a403c94e21ec19b2bdda5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=3Y4ewbNxM73ojhwhlqWvCGH3XJY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®é‡Œé¢çš„ä¸œè¥¿å¾ˆå®æ“ã€‚æ¯”å¦‚å®ƒä¼šå‘Šè¯‰ä½ ï¼Œæ€ä¹ˆè®¾è®¡ä¸€ä¸ªã€Œåé¦ˆå¾ªç¯ã€è®© AI è‡ªå·±æ£€æŸ¥ä»£ç å†™å¾—å¯¹ä¸å¯¹ï¼Œæˆ–è€…æ€ä¹ˆæå®šã€Œäººæœºåä½œã€çš„æµç¨‹ï¼Œä¸è®© AI å½»åº•æ”¾é£è‡ªæˆ‘ã€‚</p>
<p>æ¯ä¸€ä¸ªæ¨¡å¼åŸºæœ¬éƒ½æœ‰å¯¹åº”çš„å‡ºå¤„æˆ–è€…æ¡ˆä¾‹ï¼Œä¸ç”¨ä½ è‡ªå·±çæ‘¸ç´¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bec9679aa6db48efa116c0a6c4283b00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=40HpgDjVHVVylFCIutOYZpIexuU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c29905a5dce4a239a18da4780aa678f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=E%2BMixx%2Bse9JA248mtQ5sZi5%2F87Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2aa8774a829f4620bec5f9634b6ffbf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=ZFJmkWMVQa2CwAJYPhWSZxX%2F75o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯¹äºé‚£äº›æƒ³ä»å†™ç®€å•çš„ Chatbot è¿›é˜¶åˆ°æå…¨è‡ªåŠ¨ Agent çš„å¼€å‘è€…æ¥è¯´ï¼Œè¿™ç®€ç›´å°±æ˜¯ä¸€æœ¬é¿å‘æŒ‡å—ã€‚</p>
<p>å®ƒå¸®ä½ è¿‡æ»¤æ‰äº†é‚£äº›èŠ±é‡Œèƒ¡å“¨ä½†æ²¡ç”¨çš„æ¦‚å¿µï¼Œå‰©ä¸‹çš„å…¨æ˜¯åƒå¤š Agent è¾©è®ºæˆ–è€…å·¥å…·è·¯ç”±è¿™ç§èƒ½çœŸæ­£å¸®ä½ æŠŠå¤æ‚ä»»åŠ¡è·‘é€šçš„æ¶æ„æ€è·¯ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/nibzard/awesome-agentic-patterns</span>
</code></pre>
<h2 data-id="heading-3">04ã€Lovable æ–°æ‰‹æŒ‡å—</h2>
<p>è¿™ä¸ªé¡¹ç›®ç‰¹åˆ«é€‚åˆé‚£ç§æ»¡è„‘å­éƒ½æ˜¯ App åˆ›æ„ï¼Œä½†ä¸€çœ‹åˆ°ä»£ç å°±å¤´å¤§çš„æœ‹å‹ã€‚</p>
<p>è¿™å…¶å®æ˜¯ä¸€å¥—å®Œæ•´çš„å…è´¹è¯¾ç¨‹ï¼Œä¸“é—¨æ•™ä½ æ€ä¹ˆç”¨ Lovable è¿™ä¸ªå¹³å°:ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºç”¨å¤§ç™½è¯è·Ÿ AI èŠå¤©ï¼Œç„¶åè®© AI å¸®ä½ æŠŠç½‘ç«™æˆ–è€…åº”ç”¨ç»™åšå‡ºæ¥ï¼Œå…¨ç¨‹å‡ ä¹ä¸éœ€è¦æ‰‹å†™ä»£ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d557de6b88142afb591c3f3820f364a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=rVBA%2BvN3hgWMu38iQ73LhFr%2BdOw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯¾ç¨‹è®¾è®¡å¾—æŒºäººæ€§åŒ–ï¼Œä»æœ€åŸºç¡€çš„æ€ä¹ˆå†™ Prompt æ‰èƒ½è®© AI å¬æ‡‚äººè¯ï¼Œåˆ°åé¢æ€ä¹ˆéƒ¨ç½²ä¸Šçº¿ã€æ€ä¹ˆä¿® Bugï¼Œåˆ†äº†åå‡ ä¸ªæ¨¡å—ä¸€æ­¥æ­¥å¸¦ç€ä½ èµ°ã€‚</p>
<p>å“ªæ€•ä½ æ˜¯é›¶åŸºç¡€ï¼Œè·Ÿç€è¿™å¥—æ•™ç¨‹èµ°ä¸‹æ¥ï¼Œä¹Ÿèƒ½åƒæ¨¡åƒæ ·åœ°æå‡ºä¸ªä»»åŠ¡ç®¡ç†å·¥å…·æˆ–è€…ä¸ªäººä½œå“é›†ç½‘ç«™ã€‚**</p>
<p>å®ƒæ•™ä½ æ€ä¹ˆå½“å¥½ä¸€ä¸ªäº§å“ç»ç†ï¼ŒæŒ‡æŒ¥ AI è¿™ä¸ªç¨‹åºå‘˜å¹²æ´»ï¼Œå¯¹äºæƒ³å¿«é€Ÿæä¸ª MVP éªŒè¯æƒ³æ³•çš„äººæ¥è¯´éå¸¸å®ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09c57b8c41764ef0860434dec1cef36e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768111682&amp;x-signature=UaUyxDJeeboXa2jk3CLJypFYnuE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-bash" lang="bash">å¼€æºåœ°å€ï¼šhttps://github.com/cporter202/lovable-for-beginners
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251229-260102ï¼‰]]></title>    <link>https://juejin.cn/post/7591207451778187290</link>    <guid>https://juejin.cn/post/7591207451778187290</guid>    <pubDate>2026-01-04T06:34:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591207451778187290" data-draft-id="7591085154977972250" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251229-260102ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-04T06:34:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ"/> <meta itemprop="url" content="https://juejin.cn/user/2831954919569245"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251229-260102ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2831954919569245/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T06:34:07.000Z" title="Sun Jan 04 2026 06:34:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">mHC: Manifold-Constrained Hyper-Connections</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.24880" target="_blank" title="https://arxiv.org/abs/2512.24880" ref="nofollow noopener noreferrer">mHC: æµå½¢çº¦æŸçš„è¶…è¿æ¥</a></p>
<p>è¿‘æ¥ï¼Œä»¥è¶…è¿æ¥ (HC) ä¸ºä»£è¡¨çš„ç ”ç©¶ï¼Œé€šè¿‡æ‰©å±•æ®‹å·®æµå®½åº¦å¹¶å¤šæ ·åŒ–è¿æ¥æ¨¡å¼ï¼Œå¯¹è¿‡å»åå¹´é—´ç¡®ç«‹çš„ã€æ™®éå­˜åœ¨çš„æ®‹å·®è¿æ¥èŒƒå¼è¿›è¡Œäº†æ‹“å±•ã€‚å°½ç®¡è¿™å¸¦æ¥äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œä½†è¿æ¥æ¨¡å¼çš„å¤šæ ·åŒ–ä»æ ¹æœ¬ä¸ŠæŸå®³äº†æ®‹å·®è¿æ¥å›ºæœ‰çš„æ’ç­‰æ˜ å°„ç‰¹æ€§ï¼Œè¿›è€Œå¯¼è‡´ä¸¥é‡çš„è®­ç»ƒä¸ç¨³å®šæ€§ã€å—é™çš„å¯æ‰©å±•æ€§ï¼Œå¹¶äº§ç”Ÿäº†æ˜¾è‘—çš„å†…å­˜è®¿é—®å¼€é”€ã€‚ä¸ºåº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æå‡ºäº†æµå½¢çº¦æŸçš„è¶…è¿æ¥ (mHC)ã€‚è¿™æ˜¯ä¸€ä¸ªé€šç”¨æ¡†æ¶ï¼Œå®ƒå°† HC çš„æ®‹å·®è¿æ¥ç©ºé—´æŠ•å½±åˆ°ç‰¹å®šæµå½¢ä¸Šï¼Œä»¥æ¢å¤æ’ç­‰æ˜ å°„ç‰¹æ€§ï¼ŒåŒæ—¶èåˆäº†ä¸¥æ ¼çš„åŸºç¡€è®¾æ–½ä¼˜åŒ–ä»¥ç¡®ä¿æ•ˆç‡ã€‚å®è¯å®éªŒè¡¨æ˜ï¼ŒmHC èƒ½æœ‰æ•ˆè¿›è¡Œå¤§è§„æ¨¡è®­ç»ƒï¼Œå¸¦æ¥åˆ‡å®çš„æ€§èƒ½æå‡ä¸å“è¶Šçš„å¯æ‰©å±•æ€§ã€‚æˆ‘ä»¬é¢„è®¡ï¼ŒmHC ä½œä¸º HC çš„ä¸€ç§çµæ´»ä¸”å®ç”¨çš„æ‰©å±•ï¼Œå°†æœ‰åŠ©äºæ›´æ·±å…¥åœ°ç†è§£æ‹“æ‰‘æ¶æ„è®¾è®¡ï¼Œå¹¶ä¸ºåŸºç¡€æ¨¡å‹çš„æ¼”è¿›æä¾›æœ‰å‰æ™¯çš„æ–¹å‘ã€‚</p>
<h2 data-id="heading-1">Mindscape-Aware Retrieval Augmented Generation for Improved Long Context Understanding</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.17220" target="_blank" title="https://arxiv.org/abs/2512.17220" ref="nofollow noopener noreferrer">ç”¨äºæ”¹è¿›é•¿ä¸Šä¸‹æ–‡ç†è§£çš„ Mindscape-Aware æ£€ç´¢å¢å¼ºç”Ÿæˆ</a></p>
<p>äººç±»ç†è§£é•¿è€Œå¤æ‚çš„æ–‡æœ¬ï¼Œä¾èµ–äºå¯¹å†…å®¹çš„æ•´ä½“è¯­ä¹‰è¡¨å¾ã€‚è¿™ç§å…¨å±€è§†è§’æœ‰åŠ©äºç»„ç»‡å…ˆéªŒçŸ¥è¯†ã€è§£é‡Šæ–°ä¿¡æ¯ï¼Œå¹¶æ•´åˆåˆ†æ•£åœ¨æ–‡æ¡£ä¸­çš„è¯æ®ï¼Œè¿™æ­£ä½“ç°äº†å¿ƒç†å­¦ä¸­æ‰€æ­ç¤ºçš„äººç±» Mindscape-Awareï¼ˆå¿ƒæ™ºæ™¯è§‚æ„ŸçŸ¥ï¼‰èƒ½åŠ›ã€‚å½“å‰çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG) ç³»ç»Ÿç¼ºä¹è¿™ç§æŒ‡å¯¼ï¼Œå› æ­¤åœ¨å¤„ç†é•¿ä¸Šä¸‹æ–‡ä»»åŠ¡æ—¶é¢ä¸´å›°éš¾ã€‚æœ¬æ–‡æå‡ºäº† Mindscape-Aware RAG (MiA-RAG)ï¼Œè¿™æ˜¯é¦–ä¸ªä¸ºåŸºäºå¤§è¯­è¨€æ¨¡å‹çš„ RAG ç³»ç»Ÿèµ‹äºˆæ˜¾å¼å…¨å±€ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›çš„æ–¹æ³•ã€‚MiA-RAG é€šè¿‡åˆ†å±‚æ‘˜è¦æ„å»ºä¸€ä¸ªå…¨å±€è¯­ä¹‰è¡¨å¾ï¼ˆå³å¿ƒæ™ºæ™¯è§‚ï¼‰ï¼Œå¹¶ä»¥æ­¤ä¸ºåŸºç¡€æŒ‡å¯¼æ£€ç´¢å’Œç”Ÿæˆè¿‡ç¨‹ã€‚è¿™ä½¿å¾—æ£€ç´¢å™¨èƒ½å¤Ÿå½¢æˆä¿¡æ¯æ›´ä¸°å¯Œçš„æŸ¥è¯¢åµŒå…¥ï¼ŒåŒæ—¶ä½¿ç”Ÿæˆå™¨èƒ½å¤Ÿåœ¨è¿è´¯çš„å…¨å±€ä¸Šä¸‹æ–‡ä¸­å¯¹æ£€ç´¢åˆ°çš„è¯æ®è¿›è¡Œæ¨ç†ã€‚æˆ‘ä»¬åœ¨å¤šç§é•¿ä¸Šä¸‹æ–‡å’ŒåŒè¯­åŸºå‡†æµ‹è¯•ä¸Šè¯„ä¼°äº† MiA-RAG åœ¨åŸºäºè¯æ®çš„ç†è§£å’Œå…¨å±€è¯­ä¹‰æ•´åˆæ–¹é¢çš„æ€§èƒ½ã€‚ç»“æœè¡¨æ˜ï¼ŒMiA-RAG  consistently surpasses baselines, and further analysis shows that it aligns local details with a coherent global representation, enabling more human-like long-context retrieval and reasoning.</p>
<h2 data-id="heading-2">InsertAnywhere: Bridging 4D Scene Geometry and Diffusion Models for Realistic Video Object Insertion</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.17504" target="_blank" title="https://arxiv.org/abs/2512.17504" ref="nofollow noopener noreferrer">InsertAnywhere: èåˆ4Dåœºæ™¯å‡ ä½•ä¸æ‰©æ•£æ¨¡å‹ä»¥å®ç°é€¼çœŸçš„è§†é¢‘å¯¹è±¡æ’å…¥</a></p>
<p>åŸºäºæ‰©æ•£æ¨¡å‹çš„è§†é¢‘ç”ŸæˆæŠ€æœ¯è¿‘æœŸå–å¾—äº†æ˜¾è‘—è¿›å±•ï¼Œä¸ºå¯æ§è§†é¢‘ç¼–è¾‘å¸¦æ¥äº†æ–°çš„å¯èƒ½ã€‚ç„¶è€Œï¼Œç”±äºå¯¹4Dåœºæ™¯çš„ç†è§£æœ‰é™ï¼Œä»¥åŠå¯¹é®æŒ¡å’Œå…‰ç…§æ•ˆåº”çš„å¤„ç†ä¸è¶³ï¼Œå®ç°é€¼çœŸçš„è§†é¢‘å¯¹è±¡æ’å…¥ (VOI) ä»ç„¶é¢ä¸´æŒ‘æˆ˜ã€‚æœ¬æ–‡æå‡ºäº† InsertAnywhereï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„ VOI æ¡†æ¶ï¼Œèƒ½å¤Ÿå®ç°å‡ ä½•ä¸€è‡´çš„å¯¹è±¡æ”¾ç½®å’Œå¤–è§‚å¿ å®çš„è§†é¢‘åˆæˆã€‚æˆ‘ä»¬çš„æ–¹æ³•é¦–å…ˆé‡‡ç”¨ä¸€ä¸ª4Dæ„ŸçŸ¥çš„æ©ç ç”Ÿæˆæ¨¡å—ï¼Œè¯¥æ¨¡å—é‡å»ºåœºæ™¯å‡ ä½•ï¼Œå¹¶åœ¨è§†é¢‘å¸§é—´ä¼ æ’­ç”¨æˆ·æŒ‡å®šçš„å¯¹è±¡ä½ç½®ï¼ŒåŒæ—¶ç¡®ä¿æ—¶é—´è¿è´¯æ€§å’Œé®æŒ¡ä¸€è‡´æ€§ã€‚åœ¨æ­¤ç©ºé—´åŸºç¡€ä¹‹ä¸Šï¼Œæˆ‘ä»¬æ‰©å±•äº†ä¸€ä¸ªåŸºäºæ‰©æ•£çš„è§†é¢‘ç”Ÿæˆæ¨¡å‹ï¼Œä»¥è”åˆåˆæˆæ’å…¥çš„å¯¹è±¡åŠå…¶å‘¨å›´çš„å±€éƒ¨å˜åŒ–ï¼ˆå¦‚å…‰ç…§å’Œé˜´å½±ï¼‰ã€‚ä¸ºäº†è¿›è¡Œæœ‰ç›‘ç£è®­ç»ƒï¼Œæˆ‘ä»¬å¼•å…¥äº† ROSE++ï¼Œè¿™æ˜¯ä¸€ä¸ªå…‰ç…§æ„ŸçŸ¥çš„åˆæˆæ•°æ®é›†ï¼Œé€šè¿‡å°† ROSE å¯¹è±¡ç§»é™¤æ•°æ®é›†è½¬æ¢ä¸ºä¸‰å…ƒç»„ï¼ˆåŒ…å«å¯¹è±¡ç§»é™¤åçš„è§†é¢‘ã€å¯¹è±¡å­˜åœ¨æ—¶çš„è§†é¢‘ä»¥åŠç”± VLM ç”Ÿæˆçš„å‚è€ƒå›¾åƒï¼‰è€Œæ„å»ºã€‚å¤§é‡å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ¡†æ¶èƒ½å¤Ÿåœ¨å¤šæ ·åŒ–çš„çœŸå®ä¸–ç•Œåœºæ™¯ä¸­ç”Ÿæˆå‡ ä½•åˆç†ä¸”è§†è§‰è¿è´¯çš„å¯¹è±¡æ’å…¥æ•ˆæœï¼Œå…¶æ€§èƒ½æ˜¾è‘—ä¼˜äºç°æœ‰çš„ç ”ç©¶æ¨¡å‹å’Œå•†ä¸šæ¨¡å‹ã€‚</p>
<h2 data-id="heading-3">Coupling Experts and Routers in Mixture-of-Experts via an Auxiliary Loss</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.23447" target="_blank" title="https://arxiv.org/abs/2512.23447" ref="nofollow noopener noreferrer">é€šè¿‡è¾…åŠ©æŸå¤±è€¦åˆæ··åˆä¸“å®¶æ¨¡å‹ä¸­çš„ä¸“å®¶ä¸è·¯ç”±å™¨</a></p>
<p>æ··åˆä¸“å®¶ (Mixture-of-Experts, MoE) æ¨¡å‹ç¼ºä¹æ˜ç¡®çš„çº¦æŸæ¥ç¡®ä¿è·¯ç”±å™¨çš„å†³ç­–ä¸ä¸“å®¶çš„èƒ½åŠ›è‰¯å¥½åŒ¹é…ï¼Œè¿™æœ€ç»ˆä¼šé™åˆ¶æ¨¡å‹æ€§èƒ½ã€‚ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸“å®¶-è·¯ç”±å™¨è€¦åˆ (expert-router coupling, ERC) æŸå¤±ï¼Œè¿™æ˜¯ä¸€ç§è½»é‡çº§è¾…åŠ©æŸå¤±ï¼Œæ—¨åœ¨å°†è·¯ç”±å™¨çš„å†³ç­–ä¸ä¸“å®¶èƒ½åŠ›ç´§å¯†è€¦åˆã€‚æˆ‘ä»¬çš„æ–¹æ³•å°†æ¯ä¸ªä¸“å®¶çš„è·¯ç”±å™¨åµŒå…¥ (router embedding) è§†ä¸ºåˆ†é…ç»™è¯¥ä¸“å®¶çš„ Token çš„ä»£ç† Token (proxy token)ï¼Œå¹¶å°†æ‰°åŠ¨åçš„è·¯ç”±å™¨åµŒå…¥è¾“å…¥ä¸“å®¶ä»¥è·å–å…¶å†…éƒ¨æ¿€æ´» (internal activations)ã€‚ERC æŸå¤±å¯¹è¿™äº›æ¿€æ´»æ–½åŠ äº†ä¸¤é¡¹çº¦æŸï¼š(1) æ¯ä¸ªä¸“å®¶å¯¹å…¶è‡ªèº«ä»£ç† Token çš„æ¿€æ´»å¿…é¡»é«˜äºå¯¹å…¶ä»–ä»»ä½•ä¸“å®¶ä»£ç† Token çš„æ¿€æ´»ã€‚(2) æ¯ä¸ªä»£ç† Token åœ¨å…¶å¯¹åº”ä¸“å®¶å¤„æ¿€å‘çš„æ¿€æ´»å¿…é¡»å¼ºäºåœ¨å…¶ä»–ä»»ä½•ä¸“å®¶å¤„æ¿€å‘çš„æ¿€æ´»ã€‚è¿™äº›çº¦æŸå…±åŒä½œç”¨ï¼Œç¡®ä¿æ¯ä¸ªè·¯ç”±å™¨åµŒå…¥èƒ½å‡†ç¡®è¡¨å¾å…¶å¯¹åº”ä¸“å®¶çš„èƒ½åŠ›ï¼ŒåŒæ—¶ä½¿æ¯ä¸ªä¸“å®¶ä¸“æ³¨äºå¤„ç†å®é™…è¢«è·¯ç”±è‡³å®ƒçš„ Tokenã€‚ERC æŸå¤±è®¡ç®—é«˜æ•ˆï¼Œä»…éœ€å¤„ç† n^2 ä¸ªæ¿€æ´»ï¼ˆn ä¸ºä¸“å®¶æ•°é‡ï¼‰ã€‚è¿™æ„å‘³ç€ä¸€ä¸ªä¸æ‰¹æ¬¡å¤§å°æ— å…³çš„å›ºå®šå¼€é”€ï¼Œä¸åŒäºå…ˆå‰é‚£äº›è®¡ç®—æˆæœ¬éš Token æ•°é‡ï¼ˆé€šå¸¸æ¯æ‰¹æ¬¡è¾¾æ•°ç™¾ä¸‡ï¼‰å¢é•¿çš„è€¦åˆæ–¹æ³•ã€‚é€šè¿‡å¯¹å‚æ•°é‡ä» 30äº¿åˆ° 150äº¿çš„ MoE-LLMs è¿›è¡Œé¢„è®­ç»ƒï¼Œå¹¶åŸºäºæ•°ä¸‡äº¿ Token è¿›è¡Œå¹¿æ³›åˆ†æï¼Œæˆ‘ä»¬éªŒè¯äº† ERC æŸå¤±çš„æœ‰æ•ˆæ€§ã€‚æ­¤å¤–ï¼ŒERC æŸå¤±è¿˜èƒ½åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å¯¹ä¸“å®¶çš„ä¸“ä¸šåŒ–ç¨‹åº¦è¿›è¡Œçµæ´»æ§åˆ¶å’Œå®šé‡è¿½è¸ªï¼Œä»è€Œä¸ºç†è§£ MoE æ¨¡å‹æä¾›äº†å®è´µæ´è§ã€‚</p>
<h2 data-id="heading-4">Youtu-LLM: Unlocking the Native Agentic Potential for Lightweight Large Language Models</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.24618" target="_blank" title="https://arxiv.org/abs/2512.24618" ref="nofollow noopener noreferrer">Youtu-LLM: é‡Šæ”¾è½»é‡çº§å¤§è¯­è¨€æ¨¡å‹çš„åŸç”Ÿæ™ºèƒ½ä½“æ½œåŠ›</a></p>
<p>æˆ‘ä»¬æ¨å‡º Youtu-LLMï¼Œè¿™æ˜¯ä¸€ä¸ªè½»é‡çº§ä½†åŠŸèƒ½å¼ºå¤§çš„è¯­è¨€æ¨¡å‹ï¼Œå®ƒæˆåŠŸå…¼é¡¾äº†é«˜è®¡ç®—æ•ˆç‡ä¸åŸç”Ÿæ™ºèƒ½ä½“æ™ºèƒ½ã€‚ä¸é€šå¸¸ä¾èµ–çŸ¥è¯†è’¸é¦çš„å°å‹æ¨¡å‹ä¸åŒï¼ŒYoutu-LLM (1.96B) é‡‡ç”¨ä»å¤´é¢„è®­ç»ƒçš„æ–¹å¼ï¼Œæ—¨åœ¨ç³»ç»Ÿæ€§åœ°å‘å±•å…¶æ¨ç†ä¸è§„åˆ’èƒ½åŠ›ã€‚å…¶å…³é”®æŠ€æœ¯è¿›å±•å¦‚ä¸‹ï¼š(1) æ”¯æŒé•¿ä¸Šä¸‹æ–‡çš„ç´§å‡‘æ¶æ„ï¼šè¯¥æ¨¡å‹åŸºäºå¯†é›†çš„å¤šæ½œåœ¨æ³¨æ„åŠ› (MLA) æ¶æ„å’Œä¸€ç§æ–°é¢–çš„ STEM å¯¼å‘è¯æ±‡è¡¨æ„å»ºï¼Œæ”¯æŒé•¿è¾¾ 128k çš„ä¸Šä¸‹æ–‡çª—å£ã€‚è¿™ä¸€è®¾è®¡ä½¿å…¶èƒ½å¤Ÿåœ¨æå°çš„å†…å­˜å¼€é”€ä¸‹å®ç°ç¨³å¥çš„é•¿ä¸Šä¸‹æ–‡æ¨ç†ä¸çŠ¶æ€è¿½è¸ªï¼Œéå¸¸é€‚åˆé•¿ç¨‹æ™ºèƒ½ä½“ä»»åŠ¡å’Œæ¨ç†ä»»åŠ¡ã€‚(2) ç»“æ„åŒ–çš„ "å¸¸è¯†-STEM-æ™ºèƒ½ä½“" è¯¾ç¨‹å­¦ä¹ ï¼šæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªçº¦ 11T token çš„å¤§è§„æ¨¡è¯­æ–™åº“ï¼Œå¹¶é‡‡ç”¨å¤šé˜¶æ®µè®­ç»ƒç­–ç•¥ã€‚é€šè¿‡é€æ­¥å°†é¢„è®­ç»ƒæ•°æ®çš„åˆ†å¸ƒä»é€šç”¨å¸¸è¯†è½¬å‘å¤æ‚çš„ STEM åŠæ™ºèƒ½ä½“ä»»åŠ¡ï¼Œæˆ‘ä»¬ç¡®ä¿æ¨¡å‹è·å¾—çš„æ˜¯æ·±å±‚çš„è®¤çŸ¥èƒ½åŠ›ï¼Œè€Œéæµ…å±‚çš„ä»»åŠ¡å¯¹é½ã€‚(3) å¯æ‰©å±•çš„æ™ºèƒ½ä½“ä¸­æœŸè®­ç»ƒï¼šé’ˆå¯¹æ™ºèƒ½ä½“ä¸­æœŸè®­ç»ƒï¼Œæˆ‘ä»¬é‡‡ç”¨äº†å¤šæ ·åŒ–çš„æ•°æ®æ„å»ºæ–¹æ¡ˆï¼Œåœ¨æ•°å­¦ã€ä»£ç å’Œå·¥å…·ä½¿ç”¨ç­‰é¢†åŸŸåˆæˆäº†ä¸°å¯Œå¤šæ ·çš„è¡ŒåŠ¨è½¨è¿¹ã€‚è¿™äº›é«˜è´¨é‡æ•°æ®ä½¿æ¨¡å‹èƒ½å¤Ÿæœ‰æ•ˆåœ°å†…åŒ–è§„åˆ’ä¸åæ€è¡Œä¸ºã€‚å¹¿æ³›çš„è¯„ä¼°è¡¨æ˜ï¼ŒYoutu-LLM ä¸ºå‚æ•°é‡å°äº 20 äº¿çš„å¤§è¯­è¨€æ¨¡å‹æ ‘ç«‹äº†æ–°çš„æ€§èƒ½æ ‡æ†ã€‚åœ¨é€šç”¨åŸºå‡†æµ‹è¯•ä¸­ï¼Œå…¶æ€§èƒ½å¯ä¸æ›´å¤§çš„æ¨¡å‹ç›¸åª²ç¾ï¼›è€Œåœ¨æ™ºèƒ½ä½“ä¸“é¡¹ä»»åŠ¡ä¸Šï¼Œå®ƒåˆ™æ˜¾è‘—è¶…è¶Šäº†ç°æœ‰çš„ SOTA åŸºçº¿æ¨¡å‹ï¼Œè¿™è¯æ˜è½»é‡çº§æ¨¡å‹åŒæ ·å¯ä»¥å…·å¤‡å¼ºå¤§çš„å†…åœ¨æ™ºèƒ½ä½“èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-5">Improving Multi-step RAG with Hypergraph-based Memory for Long-Context Complex Relational Modeling</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.23959" target="_blank" title="https://arxiv.org/abs/2512.23959" ref="nofollow noopener noreferrer">åŸºäºè¶…å›¾è®°å¿†æ”¹è¿›å¤šæ­¥ RAG ä»¥è¿›è¡Œé•¿ä¸Šä¸‹æ–‡å¤æ‚å…³ç³»å»ºæ¨¡</a></p>
<p>å¤šæ­¥æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG) å·²æˆä¸ºä¸€é¡¹å¹¿æ³›é‡‡ç”¨çš„ç­–ç•¥ï¼Œç”¨äºå¢å¼ºå¤§è¯­è¨€æ¨¡å‹ (LLM) åœ¨éœ€è¦å…¨å±€ç†è§£å’Œæ·±åº¦æ¨ç†ä»»åŠ¡ä¸Šçš„æ€§èƒ½ã€‚è®¸å¤š RAG ç³»ç»Ÿé›†æˆäº†å·¥ä½œè®°å¿†æ¨¡å—ä»¥æ•´åˆæ£€ç´¢åˆ°çš„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œç°æœ‰çš„è®°å¿†è®¾è®¡ä¸»è¦å……å½“è¢«åŠ¨å­˜å‚¨å™¨ï¼Œä»…ç”¨äºç§¯ç´¯å­¤ç«‹çš„äº‹å®ï¼Œä»¥å‹ç¼©å†—é•¿è¾“å…¥å¹¶é€šè¿‡æ¼”ç»ç”Ÿæˆæ–°çš„å­æŸ¥è¯¢ã€‚è¿™ç§é™æ€ç‰¹æ€§å¿½ç•¥äº†åŸå§‹äº‹å®é—´å…³é”®çš„é«˜é˜¶å…³è”ï¼Œè€Œè¿™äº›äº‹å®çš„ç»„åˆå¾€å¾€èƒ½ä¸ºåç»­æ­¥éª¤æä¾›æ›´å¼ºçš„æŒ‡å¯¼ã€‚å› æ­¤ï¼Œå…¶è¡¨ç¤ºèƒ½åŠ›ä»¥åŠå¯¹å¤šæ­¥æ¨ç†å’ŒçŸ¥è¯†æ¼”è¿›çš„å½±å“æœ‰é™ï¼Œå¯¼è‡´åœ¨é•¿ä¸Šä¸‹æ–‡å¤„ç†ä¸­å‡ºç°æ¨ç†ç¢ç‰‡åŒ–å’Œå…¨å±€ç†è§£èƒ½åŠ›è–„å¼±çš„é—®é¢˜ã€‚æˆ‘ä»¬æå‡ºäº† HGMemï¼Œä¸€ç§åŸºäºè¶…å›¾çš„è®°å¿†æœºåˆ¶ï¼Œå®ƒå°†è®°å¿†çš„æ¦‚å¿µä»ç®€å•çš„å­˜å‚¨æ‰©å±•ä¸ºä¸€ç§åŠ¨æ€ã€å¯Œæœ‰è¡¨ç°åŠ›çš„ç»“æ„ï¼Œä»¥æ”¯æŒå¤æ‚æ¨ç†å’Œå…¨å±€ç†è§£ã€‚åœ¨æˆ‘ä»¬çš„æ–¹æ³•ä¸­ï¼Œè®°å¿†è¢«è¡¨ç¤ºä¸ºä¸€ä¸ªè¶…å›¾ï¼Œå…¶è¶…è¾¹å¯¹åº”ä¸åŒçš„è®°å¿†å•å…ƒï¼Œä»è€Œèƒ½å¤Ÿåœ¨è®°å¿†å†…éƒ¨é€æ­¥å½¢æˆé«˜é˜¶äº¤äº’ã€‚è¯¥æœºåˆ¶å›´ç»•æ ¸å¿ƒé—®é¢˜è¿æ¥äº‹å®ä¸æ€è·¯ï¼Œæ¼”è¿›ä¸ºä¸€ä¸ªä¸€ä½“åŒ–ã€æƒ…å¢ƒåŒ–çš„çŸ¥è¯†ç»“æ„ï¼Œä¸ºåç»­æ­¥éª¤çš„æ·±åº¦æ¨ç†æä¾›æœ‰åŠ›æ”¯æ’‘ã€‚æˆ‘ä»¬åœ¨å¤šä¸ªä¸“ä¸ºæµ‹è¯•å…¨å±€ç†è§£èƒ½åŠ›è®¾è®¡çš„æŒ‘æˆ˜æ€§æ•°æ®é›†ä¸Šè¯„ä¼°äº† HGMemã€‚å¤§é‡å®éªŒå’Œæ·±å…¥åˆ†æè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ–¹æ³•èƒ½æŒç»­æå‡å¤šæ­¥ RAG çš„æ€§èƒ½ï¼Œå¹¶åœ¨å¤šç§ä»»åŠ¡ä¸Šæ˜¾è‘—ä¼˜äºå„å¼ºåŸºçº¿ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-6">LiveTalk: Real-Time Multimodal Interactive Video Diffusion via Improved On-Policy Distillation</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.23576" target="_blank" title="https://arxiv.org/abs/2512.23576" ref="nofollow noopener noreferrer">LiveTalk: é€šè¿‡æ”¹è¿›çš„åŒç­–ç•¥è’¸é¦å®ç°å®æ—¶å¤šæ¨¡æ€äº¤äº’å¼è§†é¢‘æ‰©æ•£</a></p>
<p>åˆ©ç”¨æ‰©æ•£æ¨¡å‹è¿›è¡Œå®æ—¶è§†é¢‘ç”Ÿæˆï¼Œå¯¹äºæ„å»ºé€šç”¨å¤šæ¨¡æ€äº¤äº’å¼ AI ç³»ç»Ÿè‡³å…³é‡è¦ã€‚ç„¶è€Œï¼Œæ‰©æ•£æ¨¡å‹é€šè¿‡è¿­ä»£è¿‡ç¨‹ã€ç»“åˆåŒå‘æ³¨æ„åŠ›å¯¹æ‰€æœ‰è§†é¢‘å¸§è¿›è¡ŒåŒæ­¥å»å™ªï¼Œè¿™é˜»ç¢äº†å®æ—¶äº¤äº’ã€‚è™½ç„¶ç°æœ‰çš„è’¸é¦æ–¹æ³•å¯ä»¥ä½¿æ¨¡å‹å…·å¤‡è‡ªå›å½’ç‰¹æ€§å¹¶å‡å°‘é‡‡æ ·æ­¥æ•°ä»¥ç¼“è§£æ­¤é—®é¢˜ï¼Œä½†è¿™äº›æ–¹æ³•ä¸»è¦é›†ä¸­äºæ–‡ç”Ÿè§†é¢‘ä»»åŠ¡ï¼Œå¯¼è‡´äººæœºäº¤äº’æ˜¾å¾—ä¸è‡ªç„¶ä¸”æ•ˆç‡ä½ä¸‹ã€‚æœ¬æ–‡æ—¨åœ¨å®ç°ä¸€ç§åŸºäºå¤šæ¨¡æ€ä¸Šä¸‹æ–‡ï¼ˆåŒ…æ‹¬æ–‡æœ¬ã€å›¾åƒå’ŒéŸ³é¢‘ï¼‰çš„å®æ—¶äº¤äº’å¼è§†é¢‘æ‰©æ•£æ¨¡å‹ï¼Œä»¥å¼¥åˆè¿™ä¸€å·®è·ã€‚æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œé¢†å…ˆçš„åŒç­–ç•¥è’¸é¦æ–¹æ³• Self Forcing åœ¨å¤šæ¨¡æ€æ¡ä»¶è¾“å…¥ä¸‹ä¼šé¢ä¸´æŒ‘æˆ˜ï¼ˆå‡ºç°é—ªçƒã€é»‘å¸§å’Œè´¨é‡ä¸‹é™ç­‰è§†è§‰ä¼ªå½±ï¼‰ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ç ”ç©¶äº†ä¸€ç§æ”¹è¿›çš„è’¸é¦æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆç€é‡ä¼˜åŒ–æ¡ä»¶è¾“å…¥çš„è´¨é‡ï¼Œä»¥åŠåŒç­–ç•¥ä¼˜åŒ–çš„åˆå§‹åŒ–å’Œè°ƒåº¦ç­–ç•¥ã€‚åœ¨ HDTFã€AVSpeech å’Œ CelebV-HQ ç­‰å¤šæ¨¡æ€æ¡ä»¶ï¼ˆéŸ³é¢‘ã€å›¾åƒå’Œæ–‡æœ¬ï¼‰é©±åŠ¨çš„è™šæ‹Ÿå½¢è±¡è§†é¢‘ç”ŸæˆåŸºå‡†æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬è’¸é¦å¾—åˆ°çš„æ¨¡å‹ï¼Œåœ¨æ¨ç†æˆæœ¬å’Œå»¶è¿Ÿé™ä½ 20 å€çš„å‰æä¸‹ï¼Œå…¶è§†è§‰è´¨é‡ä¸ç›¸ä¼¼æˆ–æ›´å¤§è§„æ¨¡çš„å…¨æ­¥é•¿åŒå‘åŸºçº¿æ¨¡å‹ç›¸å½“ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†è¯¥æ¨¡å‹ä¸éŸ³é¢‘è¯­è¨€æ¨¡å‹ä»¥åŠé•¿è§†é¢‘æ¨ç†æŠ€æœ¯ Anchor-Heavy Identity Sinks ç›¸ç»“åˆï¼Œæ„å»ºäº† LiveTalkâ€”â€”ä¸€ä¸ªå®æ—¶å¤šæ¨¡æ€äº¤äº’å¼è™šæ‹Ÿå½¢è±¡ç³»ç»Ÿã€‚åœ¨æˆ‘ä»¬ç²¾å¿ƒæ„å»ºçš„å¤šè½®äº¤äº’åŸºå‡†ä¸Šè¿›è¡Œçš„ç³»ç»Ÿçº§è¯„ä¼°æ˜¾ç¤ºï¼ŒLiveTalk åœ¨å¤šè½®è§†é¢‘è¿è´¯æ€§å’Œå†…å®¹è´¨é‡æ–¹é¢å‡ä¼˜äº Sora2ã€Veo3 ç­‰æœ€å…ˆè¿›çš„æ¨¡å‹ï¼ŒåŒæ—¶å°†å“åº”å»¶è¿Ÿä» 1-2 åˆ†é’Ÿå¤§å¹…é™ä½è‡³å®æ—¶ç”Ÿæˆæ°´å¹³ï¼Œä»è€Œå®ç°äº†æµç•…æ— ç¼çš„äººæœºå¤šæ¨¡æ€äº¤äº’ã€‚</p>
<h2 data-id="heading-7">Yume-1.5: A Text-Controlled Interactive World Generation Model</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.22096" target="_blank" title="https://arxiv.org/abs/2512.22096" ref="nofollow noopener noreferrer">Yume-1.5: ä¸€ä¸ªæ–‡æœ¬æ§åˆ¶çš„äº¤äº’å¼ä¸–ç•Œç”Ÿæˆæ¨¡å‹</a></p>
<p>è¿‘æœŸçš„ä¸€äº›æ–¹æ³•å±•ç°äº†åˆ©ç”¨æ‰©æ•£æ¨¡å‹ç”Ÿæˆäº¤äº’å¼ã€å¯æ¢ç´¢ä¸–ç•Œçš„æ½œåŠ›ã€‚ç„¶è€Œï¼Œè¿™äº›æ–¹æ³•å¤§å¤šé¢ä¸´å…³é”®æŒ‘æˆ˜ï¼Œä¾‹å¦‚å‚æ•°é‡è¿‡å¤§ã€ä¾èµ–å†—é•¿çš„æ¨ç†æ­¥éª¤ä»¥åŠå†å²ä¸Šä¸‹æ–‡å¿«é€Ÿå¢é•¿ï¼Œè¿™äº›é—®é¢˜ä¸¥é‡é™åˆ¶äº†å®æ—¶æ€§èƒ½ï¼Œå¹¶ä¸”ç¼ºä¹æ–‡æœ¬æ§åˆ¶ç”Ÿæˆèƒ½åŠ›ã€‚ä¸ºè§£å†³è¿™äº›æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æå‡ºäº† \methodï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°é¢–çš„æ¡†æ¶ï¼Œç”¨äºä»å•å¼ å›¾åƒæˆ–æ–‡æœ¬æç¤ºç”Ÿæˆé€¼çœŸã€äº¤äº’ä¸”è¿ç»­çš„ä¸–ç•Œã€‚\method é€šè¿‡ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„æ¡†æ¶å®ç°æ­¤ç›®æ ‡ï¼Œè¯¥æ¡†æ¶æ”¯æŒåŸºäºé”®ç›˜å¯¹ç”Ÿæˆçš„ä¸–ç•Œè¿›è¡Œæ¢ç´¢ã€‚è¯¥æ¡†æ¶åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š(1) ä¸€ä¸ªé›†æˆäº†ç»Ÿä¸€ä¸Šä¸‹æ–‡å‹ç¼©ä¸çº¿æ€§æ³¨æ„åŠ›çš„é•¿è§†é¢‘ç”Ÿæˆæ¡†æ¶ï¼›(2) ä¸€ä¸ªç”±åŒå‘æ³¨æ„åŠ›è’¸é¦å’Œå¢å¼ºæ–‡æœ¬åµŒå…¥æ–¹æ¡ˆé©±åŠ¨çš„å®æ—¶æµå¼åŠ é€Ÿç­–ç•¥ï¼›(3) ä¸€ç§ç”¨äºç”Ÿæˆä¸–ç•Œäº‹ä»¶çš„æ–‡æœ¬æ§åˆ¶æ–¹æ³•ã€‚ç›¸å…³ä»£ç åº“å·²æä¾›åœ¨è¡¥å……ææ–™ä¸­ã€‚</p>
<h2 data-id="heading-8">Let It Flow: Agentic Crafting on Rock and Roll, Building the ROME Model within an Open Agentic Learning Ecosystem</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.24873" target="_blank" title="https://arxiv.org/abs/2512.24873" ref="nofollow noopener noreferrer">ä»»å…¶æµåŠ¨ï¼šåŸºäº ROCK ä¸ ROLL çš„æ™ºèƒ½ä½“å¼æ„å»ºï¼Œåœ¨å¼€æ”¾æ™ºèƒ½ä½“å­¦ä¹ ç”Ÿæ€ç³»ç»Ÿä¸­æ‰“é€  ROME æ¨¡å‹</a></p>
<p>æ™ºèƒ½ä½“å¼æ„å»º (Agentic crafting) è¦æ±‚å¤§è¯­è¨€æ¨¡å‹ (LLM) åœ¨ç°å®ç¯å¢ƒä¸­é€šè¿‡å¤šè½®æ“ä½œæ¥æ‰§è¡Œä»»åŠ¡ï¼Œå…·ä½“åŒ…æ‹¬é‡‡å–è¡ŒåŠ¨ã€è§‚å¯Ÿç»“æœå¹¶è¿­ä»£ä¼˜åŒ–å…¶ç”Ÿæˆçš„åˆ¶å“ã€‚å°½ç®¡è¯¥èƒ½åŠ›è‡³å…³é‡è¦ï¼Œä½†å¼€æºç¤¾åŒºç›®å‰ä»ç¼ºä¹ä¸€ä¸ªç³»ç»ŸåŒ–ã€ç«¯åˆ°ç«¯çš„ç”Ÿæ€ç³»ç»Ÿæ¥ç®€åŒ–æ™ºèƒ½ä½“çš„å¼€å‘æµç¨‹ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†æ™ºèƒ½ä½“å­¦ä¹ ç”Ÿæ€ç³»ç»Ÿ (Agentic Learning Ecosystem, ALE)ï¼Œè¿™æ˜¯ä¸€ä¸ªæ—¨åœ¨ä¼˜åŒ–æ™ºèƒ½ä½“å¤§è¯­è¨€æ¨¡å‹ç”Ÿäº§æµæ°´çº¿çš„åŸºç¡€è®¾æ–½ã€‚ALE åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼šROLLï¼Œä¸€ä¸ªç”¨äºæƒé‡ä¼˜åŒ–çš„åè®­ç»ƒ (post-training) æ¡†æ¶ï¼›ROCKï¼Œä¸€ä¸ªç”¨äºç”Ÿæˆè®­ç»ƒè½¨è¿¹çš„æ²™ç›’ç¯å¢ƒç®¡ç†å™¨ï¼›ä»¥åŠ iFlow CLIï¼Œä¸€ä¸ªç”¨äºé«˜æ•ˆä¸Šä¸‹æ–‡å·¥ç¨‹ (context engineering) çš„æ™ºèƒ½ä½“æ¡†æ¶ã€‚æˆ‘ä»¬å‘å¸ƒäº† ROME (ROME is Obviously an Agentic Model)ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäº ALE æ„å»ºã€å¹¶åœ¨è¶…è¿‡ä¸€ç™¾ä¸‡æ¡è½¨è¿¹ä¸Šè®­ç»ƒè€Œæˆçš„å¼€æºæ™ºèƒ½ä½“æ¨¡å‹ã€‚æˆ‘ä»¬çš„æ–¹æ³•åŒ…å«ç”¨äºåˆæˆå¤æ‚è¡Œä¸ºçš„æ•°æ®ç»„åˆåè®® (data composition protocols)ï¼Œä»¥åŠä¸€ç§æ–°é¢–çš„ç­–ç•¥ä¼˜åŒ–ç®—æ³•â€”â€”åŸºäºäº¤äº’çš„ç­–ç•¥å¯¹é½ (Interaction-based Policy Alignment, IPA)ã€‚IPA ç®—æ³•åœ¨è¯­ä¹‰äº¤äº’å—è€Œéå•ä¸ª Token ä¸Šåˆ†é…ä¿¡ç”¨ï¼Œä»è€Œæå‡äº†é•¿è§†é‡ (long-horizon) è®­ç»ƒçš„ç¨³å®šæ€§ã€‚åœ¨å®è¯è¯„ä¼°ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªç»“æ„åŒ–è®¾ç½®ä¸­å¯¹ ROME è¿›è¡Œäº†æµ‹è¯•ï¼Œå¹¶æ¨å‡ºäº† Terminal Bench Pro åŸºå‡†æµ‹è¯•ï¼Œè¯¥åŸºå‡†åœ¨è§„æ¨¡å’Œæ±¡æŸ“æ§åˆ¶æ–¹é¢å‡æœ‰æ”¹è¿›ã€‚ROME åœ¨ SWE-bench Verified å’Œ Terminal Bench ç­‰å¤šä¸ªåŸºå‡†æµ‹è¯•ä¸­å‡å±•ç°å‡ºå¼ºåŠ²æ€§èƒ½ï¼Œè¿™è¯æ˜äº† ALE åŸºç¡€è®¾æ–½çš„æœ‰æ•ˆæ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªåˆ‡å›¾ä»”çš„2025å¹´åº¦æ€»ç»“ï¼šAI ä¸ Vibe Coding æ•™ä¼šäº†å¤§å­¦ç”Ÿå•¥ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589958976226754570</link>    <guid>https://juejin.cn/post/7589958976226754570</guid>    <pubDate>2026-01-02T07:36:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589958976226754570" data-draft-id="7589940913767039011" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªåˆ‡å›¾ä»”çš„2025å¹´åº¦æ€»ç»“ï¼šAI ä¸ Vibe Coding æ•™ä¼šäº†å¤§å­¦ç”Ÿå•¥ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-02T07:36:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£æ­¢ä½•å®‰å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/2517239724512420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªåˆ‡å›¾ä»”çš„2025å¹´åº¦æ€»ç»“ï¼šAI ä¸ Vibe Coding æ•™ä¼šäº†å¤§å­¦ç”Ÿå•¥ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517239724512420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£æ­¢ä½•å®‰å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-02T07:36:51.000Z" title="Fri Jan 02 2026 07:36:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å½“çœ‹åˆ°å®˜æ–¹æ¨å‡ºè¿™ä¸ªæ´»åŠ¨çš„æ—¶å€™ï¼Œæˆ‘é©¬ä¸Šå°±æƒ³å¼€å§‹ç å­—äº†ï¼Œå› ä¸ºæœ‰å¤ªå¤šè¯è¦è¯´äº†ã€‚2025ç®—æ˜¯æˆ‘å¤§å­¦çš„ä¸€ä¸ª<strong>å…³é”®è½¬æŠ˜ç‚¹</strong>ï¼Œè‡³å°‘ä»ç°åœ¨æ¥çœ‹æ˜¯è¿™æ ·çš„ã€‚è‡³äºä¸ºä»€ä¹ˆç°åœ¨æ‰åŠ¨æ‰‹å†™ï¼Œæ˜¯å› ä¸ºæœ€è¿‘çš„è€ƒè¯•æ¯”è¾ƒé¢‘ç¹ğŸ˜­ï¼Œè¶ç€å…ƒæ—¦æ”¾å‡ï¼Œæˆ‘è¦å¥½å¥½å†™å†™è¿™ç¯‡æ–‡ç« ã€‚</p>
<p>çœ‹äº†å¾ˆå¤šç¯‡å¤§ä½¬å†™çš„æ€»ç»“éƒ½å¾ˆå¥½ï¼Œé‚£ä¹ˆæˆ‘æƒ³ä»å­¦ç”Ÿè§’åº¦æ¥è°ˆè°ˆAIå¤§æ¨¡å‹çš„å½±å“ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆè¯´2025æ˜¯å…³é”®è½¬æŠ˜ç‚¹ï¼Ÿ2025æˆ‘å¹²äº†ä»€ä¹ˆï¼Ÿ</h3>
<p>åœ¨å‰è¨€æˆ‘æåˆ°äº†2025ç®—æ˜¯æˆ‘çš„ä¸€ä¸ªå…³é”®è½¬æŠ˜ç‚¹ï¼Œé‚£ä¸ºä»€ä¹ˆè¿™æ ·è¯´å‘¢ï¼Ÿé¦–å…ˆ2025è´¯ç©¿äº†å¤§ä¸€ä¸‹å’Œå¤§äºŒä¸Šï¼Œåœ¨å¤§ä¸€æˆ‘æ˜¯å‡ ä¹æ¯å¤©éƒ½åœ¨ç©ï¼Œå¿™ä¸€äº›ç¤¾å›¢æ´»åŠ¨ä¹‹ç±»çš„ï¼Œå”¯ä¸€è·Ÿå­¦ä¹ æ²¾è¾¹çš„å¯èƒ½å°±æ˜¯å’Œè®¡åçš„å…„å¼Ÿä»¬ä¸€èµ·å†™ç®—æ³•äº†ï¼Œé‚£ä¸ªæ—¶å€™æˆ‘è¿˜æ˜¯æƒ³èµ°<strong>C++/Java</strong>æ–¹å‘çš„å‘¢ï¼Œä¸»è¦å<strong>åç«¯</strong>ä¸€ç‚¹ï¼Œæ¯å¤©å°±æ˜¯cfä¸Šå·ï¼Œåˆ·åˆ·æ´›è°·ï¼Œæ‰“æ‰“ç‰›å®¢å‘¨èµ›ï¼Œä¸€ç›´åˆ°æš‘å‡éƒ½æ˜¯è¿™ç§çŠ¶å†µã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb94c3ebd3c64aa1b9366fd1c1767ae1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767944211&amp;x-signature=QapMAnkZgDvwBeXz7QRdTVmT3xw%3D" alt="image.png" loading="lazy"/></p>
<p>è½¬æŠ˜ç‚¹å°±å‘ç”Ÿåœ¨å¤§ä¸€ä¸‹çš„æš‘å‡ï¼Œæˆ‘æ¥è§¦äº†<strong>HTML å’Œ CSS</strong>ï¼Œçªç„¶åƒå‘ç°äº†æ–°å¤§é™†ï¼Œè§‰å¾—ç‰¹æœ‰æ„æ€ï¼Œæ¯”èµ·é‚£ç›¸å¯¹æ¯ç‡¥çš„ç®—æ³•ï¼Œæˆ‘æ›´å–œæ¬¢è¿™ç§<strong>è‡ªå·±åˆ‡å‡ºé¡µé¢çš„æ„Ÿè§‰</strong>ã€‚å½“æ—¶ä¹Ÿå¬è¯´åç«¯çš„å¤§ç¯å¢ƒè¿‘å‡ å¹´ä¸æ˜¯å¾ˆå¥½ï¼ˆåæ­£å¤§å››å­¦é•¿æ˜¥æ‹›çš„æ—¶å€™è¿™æ ·è¯´çš„ï¼Œå°¤å…¶æ˜¯Javaï¼‰ï¼Œç„¶åè‡ªå·±ä¹Ÿè§‰å¾—ä¸Šé™å¤ªé«˜ï¼Œæ²¡èµ„æºçš„è¯å¯èƒ½å¹²ä¸ä¸‹å»ï¼Œæ‰€ä»¥å½“æ—¶å°±èŒå‘äº†å¯ä»¥è½¬å‰ç«¯çš„æƒ³æ³•ï¼Œè¦ä¸è¯•è¯•<strong>web</strong>å‘¢ï¼Ÿæˆ‘å°±è¿™æ ·é—®è‡ªå·±ã€‚</p>
<p>åˆ°äº†å¤§äºŒä¸Šå­¦æœŸï¼Œç»è¿‡æˆ‘è‡ªå·±çš„å·¦å³è„‘äº’æï¼Œæˆ‘è¿˜æ˜¯é€‰æ‹©äº†ä¸»æ”»å‰ç«¯ï¼Œå¦‚æœéœ€è¦çš„è¯å¯ä»¥ææå…¨æ ˆï¼ˆæœ€è¿‘å¾ˆğŸ”¥çš„AIGCæˆ‘ä¹Ÿæƒ³try tryï¼‰ï¼Œè¿™æ ·å°±æˆäº†<strong>AI + å…¨æ ˆ</strong>çš„ä¸€æ¡è·¯ï¼Œä¸è¿‡ç›®å‰æˆ‘è¿˜æ˜¯åå‰ç«¯å¤šç‚¹ã€‚è¿™æ ·æˆ‘å¤§è‡´çš„æ–¹å‘å°±å·®ä¸å¤šç¡®å®šå¥½äº†ï¼Œè¿™å°±ä¸ºä»€ä¹ˆè¯´2025ç®—æ˜¯å¾ˆå…³é”®çš„ä¸€å¹´ã€‚</p>
<h3 data-id="heading-2">äºŒã€å¤§å­¦ç”Ÿä¹Ÿèƒ½å†™ä¸ªäººåšå®¢å—ï¼Ÿ</h3>
<p>å¾ˆå¤šäººå¬åˆ°è¿™ç§ä»€ä¹ˆä¸ªäººåšå®¢å°±è§‰å¾—å¾ˆé«˜å¤§å°šï¼Œè§‰å¾—å’Œä»–ä»¬æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œæˆ‘ä¸€å¼€å§‹ä¹Ÿæ˜¯è¿™æ ·ã€‚å¤§å­¦ç”Ÿä¹Ÿèƒ½å†™ä»€ä¹ˆä¸ªäººåšå®¢å—ï¼ŸçœŸçš„æœ‰é‚£ä¸ªæ°´å¹³å—ï¼Ÿå†™äº†ä¸€å¨å‘å‡ºå»æƒ³è¢«è°å–·å—ï¼Ÿæˆ‘åˆšåŠ å…¥ç¨€åœŸæ˜é‡‘çš„æ—¶å€™ï¼Œå°±æ˜¯è¿™ç§çŠ¶æ€ã€‚æ¯å¤©çœ‹ç€åˆ«äººå†™çš„æ–‡ç« è§‰å¾—å†™çš„å¾ˆå¥½ï¼Œå†çœ‹çœ‹è‡ªå·±ï¼Œå°±è§‰å¾—å¥½åƒçœŸçš„æ²¡æœ‰å¿…è¦ã€‚</p>
<p>ç›´åˆ°æˆ‘å‘å‡ºäº†<strong>ç¬¬ä¸€ç¯‡æ–‡ç« </strong>ï¼š</p>
<blockquote>
<p><a href="https://juejin.cn/post/7568796644348133376" target="_blank" title="https://juejin.cn/post/7568796644348133376">æ·±å…¥ V8 å¼•æ“ï¼šJavaScript æ‰§è¡Œæœºåˆ¶ä¸ä½œç”¨åŸŸæ¨¡å‹çš„åº•å±‚é€»è¾‘è§£æ</a></p>
</blockquote>
<p>è¢«å®˜æ–¹æ¨èï¼Œä¸Šçƒ­æœæ¦œï¼Œ2.4käººçœ‹è¿‡ï¼Œæˆ‘é‚£æ—¶å€™å°±çŸ¥é“äº†ï¼Œå¤§å­¦ç”Ÿä¹Ÿèƒ½å†™ã€‚è™½ç„¶å†™çš„ä¸œè¥¿å¯èƒ½ä¸æ˜¯å¾ˆNBï¼Œä½†å´æ˜¯æˆ‘æ¯å¤©çš„æˆé•¿è¿‡ç¨‹ï¼Œæˆ‘æŠŠæ˜é‡‘çš„æ–‡ç« å½“æˆé•¿æ—¥è®°ï¼Œä¸€ç‚¹ä¸€ç‚¹è®°å½•æˆ‘çš„å­¦ä¹ è¿›åº¦ï¼Œæ¯æ¬¡æˆ‘å­¦å®Œä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œæˆ‘éƒ½ä¼šæ›´æ–°ï¼Œæˆ‘ä¹Ÿå¸Œæœ›æœ‰éœ€è¦çš„äººèƒ½å¤Ÿçœ‹åˆ°æˆ‘çš„æ–‡ç« ã€‚</p>
<p>å½“ç„¶ï¼Œå¹¶ä¸æ˜¯ä¸€å¸†é£é¡ºçš„ã€‚æœ‰äº›äººè§‰å¾—æˆ‘å†™çš„å¥½æœ‰äº›è¯„è®ºè¯´æˆ‘å†™çš„ä¸å’‹åœ°ã€‚æ²¡å…³ç³»ï¼Œåªè¦æœ‰ä¸€ä¸ªäººè§‰å¾—å¥½ï¼Œèƒ½å¸®åŠ©åˆ°ä»–ï¼Œæˆ‘è¿™ç¯‡æ–‡ç« å°±æ˜¯å¥½ä¸œè¥¿ï¼Œå®åœ¨ä¸è¡Œæˆ‘å¯ä»¥è‡ªå·±çœ‹â˜ºï¸ï¼Œçœ‹è‡ªå·±çš„æˆé•¿ç»å†ï¼Œçœ‹è‡ªå·±çš„å­¦ä¹ ç¬”è®°ğŸ“šã€‚æˆ‘ä¼šä¸€ç›´åŠªåŠ›å†™å‡ºä¼˜è´¨æ–‡ç« ï¼</p>
<p>å¤§å®¶æ„Ÿå…´è¶£çš„è¯å¯ä»¥çœ‹çœ‹æˆ‘çš„æ–‡ç« å’Œä¸“æ ï¼Œæ¬¢è¿è®¢é˜…~</p>
<h3 data-id="heading-3">ä¸‰ã€AI ä¸ Vibe Coding å¯¹å¤§å­¦ç”Ÿçš„å½±å“</h3>
<p>å¥½äº†ï¼ŒèŠå®Œæˆ‘2025çš„ä¸€äº›æ•…äº‹ï¼Œä»¥åŠæˆ‘å¹²äº†ä»€ä¹ˆï¼Œé‚£ä¹ˆç°åœ¨å°±è¯´è¯´<strong>AI ä¸ Vibe Coding</strong>å¯¹å¤§å­¦ç”Ÿçš„å½±å“ã€‚</p>
<p>2025 å¹´åˆï¼Œ<strong>Vibe Coding</strong> è¿™ä¸ªæ–°é²œè¯æ±‡èµ°è¿›æˆ‘çš„è§†é‡ â€”â€” ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼Œå°±èƒ½è®© AI ç”Ÿæˆå¯ç”¨ä»£ç ï¼Œè¿™ç§ <strong>â€œæç¤ºé©±åŠ¨â€</strong> çš„ç¼–ç¨‹æ–¹å¼ç¬é—´ç‚¹ç‡ƒäº†æˆ‘çš„å¥½å¥‡å¿ƒã€‚ä½œä¸ºè®¡ç®—æœºä¸“ä¸šçš„å­¦ç”Ÿï¼Œæˆ‘æ›¾ä¸ºå¤æ‚çš„è¯­æ³•è§„åˆ™å’Œå†—ä½™çš„æ ·æ¿ä»£ç å¤´ç–¼ï¼Œè€Œ Cursorã€ChatGPT ç­‰å·¥å…·è®©æˆ‘åœ¨å°å‹é¡¹ç›®ä¸­å°åˆ°äº†ç”œå¤´ã€‚æ¯”å¦‚æˆ‘ç”¨Cozeæ­å»ºæ™ºèƒ½ä½“ï¼š</p>
<blockquote>
<p><a href="https://juejin.cn/post/7578803751608500274" target="_blank" title="https://juejin.cn/post/7578803751608500274">æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ Coze æ‰“é€ ä½ çš„ç¬¬ä¸€ä¸ª Agentï¼šé›¶ä»£ç åšä¸“å±ã€Œå„¿ç«¥ç¡å‰æ•…äº‹ã€</a></p>
</blockquote>
<p>ä½œå“æˆ‘ä¸Šä¼ åˆ°äº†æ˜é‡‘ä¸»é¡µï¼Œå¤§å®¶å¯ä»¥è¯•è¯•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba439d04f7a546e78b743a15c0fe68c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767944211&amp;x-signature=2F6e7riL8%2FzA7%2B20qVl%2FUBf%2B9nY%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºå®Œæˆä¸€äº›è¯¾ç¨‹è®¾è®¡ï¼Œæˆ‘æ²¡æœ‰åƒå¾€å¸¸ä¸€æ ·é€è¡Œæ•²å‡»ä»£ç ï¼Œè€Œæ˜¯ç”¨ â€œå“åº”å¼å¸ƒå±€ã€æ”¯æŒå¤œé—´æ¨¡å¼ã€å¸¦ç•™è¨€åŠŸèƒ½â€ çš„æ–‡å­—æè¿°ä½œä¸ºæç¤ºï¼ŒAI åœ¨ååˆ†é’Ÿå†…å°±ç”Ÿæˆäº†<strong>å®Œæ•´çš„å‰ç«¯æ¡†æ¶</strong>ã€‚è¿™ç§æ•ˆç‡çš„æå‡è®©æˆ‘å¾—ä»¥æŠŠç²¾åŠ›æ”¾åœ¨é¡µé¢äº¤äº’é€»è¾‘å’Œç”¨æˆ·ä½“éªŒä¸Šï¼Œæœ€ç»ˆçš„ä½œå“åœ¨è¯¾å ‚å±•ç¤ºä¸­è·å¾—äº†ä¸é”™çš„è¯„ä»·ã€‚æˆ‘åšä¿¡æœªæ¥è‚¯å®šæ˜¯AIçš„å¤©ä¸‹ï¼ˆè™½ç„¶è¿™æ ·è¯´äº›è®¸ç»å¯¹ï¼Œä½†deepseekã€è±†åŒ…ç­‰å·²ç¦»ä¸å¼€å¤§å®¶çš„æ—¥å¸¸ç”Ÿæ´»äº†ï¼‰ï¼Œå°±æ¯”å¦‚æˆ‘ä¹‹å‰å†™çš„<strong>Trae SOLO</strong>:</p>
<blockquote>
<p><a href="https://juejin.cn/post/7577307409854382095" target="_blank" title="https://juejin.cn/post/7577307409854382095">æ”¶åˆ°å­—èŠ‚çš„çŸ­ä¿¡ï¼šTrae SOLOä¸Šçº¿äº†ï¼Ÿå°å°é²œï¼Œæµ…æµ…åšä¸ªéŸ³ä¹æ’­æ”¾å™¨</a></p>
</blockquote>
<p>åªæ˜¯ç®€å•çš„åˆ‡é¡µé¢ï¼Œå´æœ‰ 4k+ æ˜å‹çœ‹è¿‡ï¼Œå¹¶ä¸”è¢«æ˜é‡‘å®˜æ–¹æ”¶å½•äºå…¬ä¼—å·ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85544855bfa24313ad241a6d8ca83b88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767944211&amp;x-signature=omOkFnLoatYg01XicDnYdClR%2Bbk%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†å¾ˆå¿«æˆ‘å‘ç°ï¼ŒVibe Coding çš„æ ¸å¿ƒä¸æ˜¯ <strong>â€œå·æ‡’â€</strong>ï¼Œè€Œæ˜¯<strong>è§’è‰²è½¬å˜</strong>ã€‚å°±åƒ Andrej Karpathy å®šä¹‰çš„é‚£æ ·ï¼Œ<strong>å¼€å‘è€…è¦ä» â€œæ‰“å­—è€…â€ å˜æˆ â€œæ¶æ„å¸ˆâ€</strong>ï¼Œæˆ‘å¿…é¡»å…ˆç†æ¸…éœ€æ±‚çš„æ ¸å¿ƒé€»è¾‘ï¼Œæ‰èƒ½ç»™å‡ºç²¾å‡†æç¤ºã€‚è¿™ç§è½¬å˜è®©æˆ‘æ˜ç™½ï¼ŒAI æ˜¯é«˜æ•ˆçš„è¾…åŠ©å·¥å…·ï¼Œè€Œæ¸…æ™°çš„é—®é¢˜æ‹†è§£èƒ½åŠ›æ‰æ˜¯æ ¸å¿ƒç«äº‰åŠ›ã€‚</p>
<h3 data-id="heading-4">å››ã€2025æˆ‘åˆ°åº•ç”¨AIå­¦ä¼šäº†ä»€ä¹ˆï¼Ÿ</h3>
<p>2025 å¹´ï¼ŒAI ä¸ Vibe Coding ä¸ä»…æ”¹å˜äº†æˆ‘çš„ç¼–ç¨‹æ–¹å¼ï¼Œæ›´é‡å¡‘äº†æˆ‘çš„å­¦ä¹ èƒ½åŠ›æ¨¡å‹ã€‚åœ¨ AI çš„è¾…åŠ©ä¸‹ï¼Œæˆ‘å¾—ä»¥è·¨å‡ºä¸“ä¸šèˆ’é€‚åŒº â€”â€” ç”¨ Python è„šæœ¬åˆ†æç¤¾ä¼šå­¦è¯¾ç¨‹çš„é—®å·æ•°æ®ï¼Œå€ŸåŠ© AI ç”Ÿæˆçš„çˆ¬è™«å·¥å…·æ”¶é›†å­¦æœ¯è®ºæ–‡æ‰€éœ€çš„å²æ–™ï¼Œè¿™äº›è·¨å­¦ç§‘å®è·µè®©æˆ‘çš„çŸ¥è¯†è¾¹ç•Œä¸æ–­æ‹“å±•ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘å­¦ä¼šäº† <strong>â€œå®¡è®¡â€</strong> AI çš„è¾“å‡ºã€‚ä¸€æ¬¡é¡¹ç›®ä¸­ï¼Œæˆ‘é€šè¿‡æŸ¥é˜…èµ„æ–™å’ŒTrae SOLOï¼Œä¿®æ­£äº†è¿™ä¸ªæ¼æ´ï¼Œå¹¶ä¼˜åŒ–äº†æç¤ºè¯è®© AI ç”Ÿæˆæ›´å®‰å…¨çš„ä»£ç ã€‚è¿™ç§ <strong>â€œä»£ç å“é‰´â€</strong> èƒ½åŠ›çš„æå‡ï¼Œè®©æˆ‘æ·±åˆ»ç†è§£äº† <strong>â€œé©¾é©­ AIâ€</strong> çš„çœŸæ­£å«ä¹‰ã€‚</p>
<p>å®æ—¶ä»£ç çº é”™ã€é—®é¢˜ç­”ç–‘åŠŸèƒ½è®©æˆ‘åœ¨è‡ªä¸»å­¦ä¹ æ—¶å°‘èµ°å¼¯è·¯ã€‚åå°æ•°æ®æ˜¾ç¤ºçš„å…±æ€§é”™è¯¯æé†’ï¼Œè¿˜è®©æˆ‘ç²¾å‡†å®šä½äº†è‡ªå·±çš„çŸ¥è¯†çŸ­æ¿ï¼Œè¿™ç§ä¸ªæ€§åŒ–çš„å­¦ä¹ ä½“éªŒï¼Œæ˜¯ä¼ ç»Ÿå­¦ä¹ æ¨¡å¼éš¾ä»¥å®ç°çš„ã€‚</p>
<h3 data-id="heading-5">äº”ã€2026å¹´çš„å±•æœ›ï¼šæˆ‘æœ‰ä»€ä¹ˆæ‰“ç®—ï¼Ÿ</h3>
<p>ç«™åœ¨ 2025 ä¸ 2026 çš„äº¤ç•Œç‚¹ï¼Œæˆ‘æ—©å·²ä¸ºæ–°ä¸€å¹´çš„ç¼–ç¨‹å­¦ä¹ å®šä¸‹æ¸…æ™°çš„èˆªå‘ã€‚æ–°çš„ä¸€å¹´é‡Œï¼Œæˆ‘è®¡åˆ’æ·±è€•<strong>æç¤ºè¯å·¥ç¨‹</strong>ï¼Œä¸å†æ»¡è¶³äºç®€å•çš„éœ€æ±‚æè¿°ï¼Œè€Œæ˜¯ç³»ç»Ÿå­¦ä¹ å¦‚ä½•é€šè¿‡ç»“æ„åŒ–æç¤ºï¼Œå¼•å¯¼ AI ç”Ÿæˆæ›´ç¬¦åˆå·¥ç¨‹è§„èŒƒã€æ›´å…·æ‰©å±•æ€§çš„ä»£ç ï¼Œå°¤å…¶è¦æ”»å…‹å¤æ‚é¡¹ç›®çš„æ¨¡å—åŒ–æ‹†åˆ†æç¤ºæŠ€å·§ã€‚åŒæ—¶ï¼Œæˆ‘ä¼šä¸»åŠ¨å‚ä¸æ ¡å†…çš„å¼€æºé¡¹ç›®å®è·µï¼Œå°è¯•å°† Vibe Coding ä¸å›¢é˜Ÿåä½œæµç¨‹ç»“åˆï¼Œæ¢ç´¢ â€œäººç±»æ¶æ„è®¾è®¡ + AI æ¨¡å—å¡«å…… + å…¨å‘˜ä»£ç å®¡è®¡â€ çš„é«˜æ•ˆå¼€å‘æ¨¡å¼ã€‚</p>
<p>å¯¹äº AI å·¥å…·çš„ä½¿ç”¨ï¼Œæˆ‘ä¹Ÿç»™è‡ªå·±ç«‹ä¸‹äº†æ›´ä¸¥æ ¼çš„ â€œæˆé•¿æ¸…å•â€ï¼šè‡³å°‘å®Œæˆä¸€ä¸ª<strong>çº¯æ‰‹åŠ¨ç¼–ç çš„ç®—æ³•å°é¡¹ç›®</strong>ï¼Œç­‘ç‰¢æ•°æ®ç»“æ„ä¸ç®—æ³•çš„åŸºç¡€ï¼›æ¯ä¸€æ¬¡ç”¨ AI ç”Ÿæˆä»£ç åï¼Œéƒ½è¦é¢å¤–èŠ±æ—¶é—´åš â€œé€†å‘æ¨å¯¼â€ï¼Œææ‡‚æ¨¡å‹ä»£ç çš„è®¾è®¡æ€è·¯ä¸æ½œåœ¨ç¼ºé™·ã€‚æ­¤å¤–ï¼Œæˆ‘è¿˜æ‰“ç®—é€‰ä¿®äººå·¥æ™ºèƒ½ä¼¦ç†ç›¸å…³è¯¾ç¨‹ï¼Œå»æ¢ç©¶ AI ç¼–ç¨‹èƒŒåçš„æŠ€æœ¯ä¼¦ç†è¾¹ç•Œï¼Œæ€è€ƒå¦‚ä½•åœ¨æå‡æ•ˆç‡çš„åŒæ—¶ï¼Œå®ˆä½å¼€å‘è€…çš„è´£ä»»ä¸åº•çº¿ã€‚</p>
<p>2026 å¹´çš„æˆ‘ï¼Œä¸æƒ³åš<strong>è¢« AI æ¨ç€èµ°çš„ â€œä»£ç å·¥äººâ€</strong>ï¼Œè€Œæ˜¯è¦æˆä¸ºèƒ½<strong>ä¸ AI å¹¶è‚©ä½œæˆ˜çš„ â€œæŠ€æœ¯èˆµæ‰‹â€</strong>ã€‚æˆ‘æœŸå¾…åœ¨æ–°çš„æ•°å­—å¹´è½®é‡Œï¼Œæ—¢èƒ½å€ŸåŠ›æŠ€æœ¯æµªæ½®ä¹˜é£ç ´æµªï¼Œä¹Ÿèƒ½é”šå®šå­¦ä¹ æœ¬è´¨ï¼Œåœ¨ä»£ç ä¸–ç•Œé‡Œæ²‰æ·€å‡ºå±äºè‡ªå·±çš„ç¡¬æ ¸å®åŠ›ã€‚</p>
<h2 data-id="heading-6">ç»“è¯­</h2>
<p>æ—§å²çš„ç¯‡ç« æ‚„ç„¶åˆä¸Šï¼Œ2025 å¹´çš„ <strong>AI ä¸ Vibe Coding ä¹‹æ—…</strong>ï¼Œä¸ä»…æ˜¯æŠ€æœ¯å·¥å…·çš„æ¢ç´¢ï¼Œæ›´æ˜¯ä¸€åœºå…³äº<strong>æˆé•¿çš„æ€è¾¨</strong>ã€‚å®ƒè®©æˆ‘åœ¨æ•ˆç‡ä¸æ·±è€•ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Œåœ¨äººæœºåä½œä¹‹ä¸­é”šå®šè‡ªæˆ‘ä»·å€¼ã€‚æ–°çš„ 2026 å¹´ï¼Œä»£ç ä»åœ¨é”®ç›˜æµæ·Œï¼ŒAI ä¾æ—§æ˜¯<strong>å¹¶è‚©ä¼™ä¼´</strong>ï¼Œè€Œæˆ‘ï¼Œå°†å¸¦ç€è¿™ä»½æ¸…é†’ä¸çƒ­å¿±ï¼Œåœ¨ç¼–ç¨‹çš„ä¸–ç•Œé‡Œï¼Œç»§ç»­ä¹¦å†™å±äºè‡ªå·±çš„æ•°å­—å¹´è½®ï¼Œæ­¥å±¥ä¸åœï¼Œå‘é˜³è€Œè¡Œã€‚</p>
<blockquote>
<p>å¸Œæœ›æ–°çš„ä¸€å¹´ï¼Œå¤§å®¶çš„ç¼–ç¨‹æ°´å¹³å˜å˜æå‡ï¼ŒAIä¹–ä¹–å¬è¯ï¼</p>
<p>åŒæ—¶å†æ¬¡æ„Ÿè°¢ç¨€åœŸæ˜é‡‘ç¤¾åŒºè®¤å¯æˆ‘ä¸€ä¸ªå¤§å­¦ç”Ÿå†™çš„æ–‡ç« ğŸ˜„</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot é›†æˆ Redis ç¼“å­˜å®è·µ]]></title>    <link>https://juejin.cn/post/7590752433988436022</link>    <guid>https://juejin.cn/post/7590752433988436022</guid>    <pubDate>2026-01-04T06:03:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590752433988436022" data-draft-id="7590724064521158719" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot é›†æˆ Redis ç¼“å­˜å®è·µ"/> <meta itemprop="keywords" content="Java,Redis"/> <meta itemprop="datePublished" content="2026-01-04T06:03:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="uup"/> <meta itemprop="url" content="https://juejin.cn/user/4378706456356627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot é›†æˆ Redis ç¼“å­˜å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4378706456356627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    uup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T06:03:36.000Z" title="Sun Jan 04 2026 06:03:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹© Redis ä½œä¸º SpringBoot çš„ç¼“å­˜æ–¹æ¡ˆï¼Ÿ</h2>
<p>åœ¨é«˜å¹¶å‘ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæ•°æ®åº“å¾€å¾€æ˜¯æ€§èƒ½ç“¶é¢ˆï¼Œè€Œ Redis ä½œä¸ºé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œæ˜¯ SpringBoot é¡¹ç›®ç¼“å­˜çš„æœ€ä¼˜é€‰æ‹©ä¹‹ä¸€ï¼š</p>
<ol>
<li><strong>æ€§èƒ½ä¼˜åŠ¿</strong>ï¼šRedis åŸºäºå†…å­˜æ“ä½œï¼Œå•æœº QPS å¯è¾¾ 10 ä¸‡ +ï¼Œè¿œè¶…ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ï¼›</li>
<li><strong>é›†ç¾¤æ”¯æŒ</strong>ï¼šæ”¯æŒä¸»ä»ã€å“¨å…µã€é›†ç¾¤æ¨¡å¼ï¼Œæ»¡è¶³é«˜å¯ç”¨ç”Ÿäº§ç¯å¢ƒéœ€æ±‚ï¼›</li>
<li><strong>SpringBoot åŸç”Ÿé€‚é…</strong>ï¼šé€šè¿‡<code>spring-boot-starter-data-redis</code>å¿«é€Ÿé›†æˆï¼Œæä¾›<code>RedisTemplate</code>å’Œç¼“å­˜æ³¨è§£åŒé‡æ“ä½œæ–¹å¼ï¼›</li>
<li><strong>ä¸°å¯Œçš„è¿‡æœŸç­–ç•¥</strong>ï¼šæ”¯æŒé”®çº§åˆ«çš„è¿‡æœŸæ—¶é—´ï¼Œå¯çµæ´»æ§åˆ¶ç¼“å­˜ç”Ÿå‘½å‘¨æœŸï¼›</li>
<li><strong>åºåˆ—åŒ–å¯æ§</strong>ï¼šå¯è‡ªå®šä¹‰åºåˆ—åŒ–è§„åˆ™ï¼Œè§£å†³ JDK åºåˆ—åŒ–ä¹±ç ã€æ—¶é—´ç±»å‹è§£æç­‰é—®é¢˜ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒé…ç½®ï¼šRedis é›†ç¾¤ + åºåˆ—åŒ– + ç¼“å­˜ç®¡ç†å™¨</h2>
<h3 data-id="heading-2">1. Maven ä¾èµ–é…ç½®ï¼ˆpom.xmlï¼‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.18<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.cnhis.iho<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>demo-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Demo :: Redis<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">main.basedir</span>&gt;</span>${basedir}/..<span class="hljs-tag">&lt;/<span class="hljs-name">main.basedir</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>${java.version}<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>${java.version}<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Redis æ ¸å¿ƒä¾èµ– --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Springç¼“å­˜æŠ½è±¡å±‚ï¼ˆæä¾›@Cacheableç­‰æ³¨è§£ï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.hutool<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hutool-all<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.8.34<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">2. åº”ç”¨é…ç½®ï¼ˆapplication.ymlï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">10088</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-comment"># Redis é›†ç¾¤é…ç½®</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-string">6000ms</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">${REDIS_PASSWORD:123123}</span> <span class="hljs-comment"># ç¯å¢ƒå˜é‡ä¼˜å…ˆï¼Œé»˜è®¤å€¼123123</span>
    <span class="hljs-attr">cluster:</span>
      <span class="hljs-attr">max-redirects:</span> <span class="hljs-number">3</span> <span class="hljs-comment"># é›†ç¾¤æœ€å¤§é‡å®šå‘æ¬¡æ•°</span>
      <span class="hljs-attr">nodes:</span> <span class="hljs-comment"># é›†ç¾¤èŠ‚ç‚¹åˆ—è¡¨</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">${REDIS_NODE0:192.168.1.210:7000}</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">${REDIS_NODE1:192.168.1.210:7001}</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">${REDIS_NODE2:192.168.1.210:7002}</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">${REDIS_NODE3:192.168.1.210:7003}</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">${REDIS_NODE4:192.168.1.210:7004}</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">${REDIS_NODE5:192.168.1.210:7005}</span>
    <span class="hljs-attr">lettuce:</span> <span class="hljs-comment"># Lettuceè¿æ¥æ± ï¼ˆSpringBoot 2.xé»˜è®¤ï¼‰</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">8</span>   <span class="hljs-comment"># æœ€å¤§è¿æ¥æ•°</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">8</span>     <span class="hljs-comment"># æœ€å¤§ç©ºé—²è¿æ¥æ•°</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">0</span>     <span class="hljs-comment"># æœ€å°ç©ºé—²è¿æ¥æ•°</span>
        <span class="hljs-attr">max-wait:</span> <span class="hljs-number">-1</span>    <span class="hljs-comment"># è¿æ¥ç­‰å¾…æ—¶é—´ï¼ˆ-1è¡¨ç¤ºæ— é™åˆ¶ï¼‰</span>
      <span class="hljs-attr">cluster:</span>
        <span class="hljs-attr">refresh:</span>
          <span class="hljs-attr">adaptive:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># è‡ªé€‚åº”åˆ·æ–°é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯</span>
  <span class="hljs-comment"># ç¼“å­˜é…ç½®ï¼šæ˜ç¡®æŒ‡å®šç±»å‹ä¸ºRedisï¼ˆå¢å¼ºå¯è¯»æ€§ï¼‰</span>
  <span class="hljs-attr">cache:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">redis</span>
</code></pre>
<h3 data-id="heading-4">3. å¯åŠ¨ç±»ï¼šå¼€å¯ç¼“å­˜æ³¨è§£</h3>
<p>åœ¨å¯åŠ¨ç±»æ·»åŠ <code>@EnableCaching</code>ï¼Œæ¿€æ´» Spring ç¼“å­˜æ³¨è§£ï¼ˆ<code>@Cacheable</code>/<code>@CachePut</code>/<code>@CacheEvict</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis;

<span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;
<span class="hljs-keyword">import</span> org.springframework.cache.annotation.EnableCaching;

<span class="hljs-meta">@EnableCaching</span> <span class="hljs-comment">// å¼€å¯ç¼“å­˜æ³¨è§£æ”¯æŒ</span>
<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoRedisApplication</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(DemoRedisApplication.class, args);
    }

}
</code></pre>
<h3 data-id="heading-5">4. Redis æ ¸å¿ƒé…ç½®ç±»ï¼ˆåºåˆ—åŒ– + ç¼“å­˜ç®¡ç†å™¨ï¼‰</h3>
<p>è§£å†³é»˜è®¤åºåˆ—åŒ–ä¹±ç ã€æ—¶é—´ç±»å‹è§£æé—®é¢˜ï¼ŒåŒæ—¶é…ç½®<code>RedisCacheManager</code>é€‚é…æ³¨è§£å¼ç¼“å­˜ï¼Œå¤ç”¨åºåˆ—åŒ–è§„åˆ™ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis.config;

<span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonAutoDetect;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonTypeInfo;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.PropertyAccessor;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.DeserializationFeature;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.SerializationFeature;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.jsontype.impl.LaissezFaireSubTypeValidator;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.datatype.jsr310.deser.LocalDateDeserializer;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.datatype.jsr310.ser.LocalDateSerializer;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.datatype.jsr310.ser.LocalDateTimeSerializer;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.data.redis.cache.RedisCacheConfiguration;
<span class="hljs-keyword">import</span> org.springframework.data.redis.cache.RedisCacheManager;
<span class="hljs-keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.RedisSerializationContext;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.RedisSerializer;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;

<span class="hljs-keyword">import</span> java.time.Duration;
<span class="hljs-keyword">import</span> java.time.LocalDate;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.time.format.DateTimeFormatter;

<span class="hljs-comment">/**
 * Redisæ ¸å¿ƒé…ç½®ç±»
 * 1. è‡ªå®šä¹‰åºåˆ—åŒ–è§„åˆ™ï¼ˆè§£å†³ä¹±ç ã€æ—¶é—´ç±»å‹è§£æé—®é¢˜ï¼‰
 * 2. é…ç½®RedisTemplate/StringRedisTemplate
 * 3. é…ç½®RedisCacheManagerï¼ˆé€‚é…æ³¨è§£å¼ç¼“å­˜ï¼‰
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisConfigure</span> {
    <span class="hljs-comment">// å…¨å±€åºåˆ—åŒ–å™¨ï¼škeyç”¨Stringï¼Œvalueç”¨JSONï¼ˆç»Ÿä¸€è§„åˆ™ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> RedisSerializer&lt;String&gt; KEY_SERIALIZER;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> RedisSerializer&lt;Object&gt; VALUE_SERIALIZER;

    <span class="hljs-keyword">static</span> {
        KEY_SERIALIZER = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>();
        VALUE_SERIALIZER = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericJackson2JsonRedisSerializer</span>(getObjectMapper());
    }

    <span class="hljs-comment">/**
     * è‡ªå®šä¹‰ObjectMapperï¼šè§£å†³JDK8æ—¶é—´ç±»å‹åºåˆ—åŒ–/ååºåˆ—åŒ–é—®é¢˜
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ObjectMapper <span class="hljs-title function_">getObjectMapper</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">objectMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
        <span class="hljs-comment">// å¼€å¯æ‰€æœ‰å­—æ®µå¯è§æ€§ï¼ˆåŒ…æ‹¬privateï¼‰</span>
        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        <span class="hljs-comment">// å¼€å¯ç±»å‹ä¿¡æ¯å­˜å‚¨ï¼ˆååºåˆ—åŒ–æ—¶è¯†åˆ«å¯¹è±¡ç±»å‹ï¼‰</span>
        objectMapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, 
                                           ObjectMapper.DefaultTyping.NON_FINAL, 
                                           JsonTypeInfo.As.PROPERTY);
        <span class="hljs-comment">// é…ç½®JDK8æ—¶é—´ç±»å‹åºåˆ—åŒ–è§„åˆ™</span>
        <span class="hljs-type">JavaTimeModule</span> <span class="hljs-variable">timeModule</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JavaTimeModule</span>();
        <span class="hljs-comment">// LocalDateï¼šyyyy-MM-dd</span>
        timeModule.addDeserializer(LocalDate.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalDateDeserializer</span>(DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyy-MM-dd"</span>)));
        timeModule.addSerializer(LocalDate.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalDateSerializer</span>(DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyy-MM-dd"</span>)));
        <span class="hljs-comment">// LocalDateTimeï¼šyyyy-MM-dd HH:mm:ss</span>
        timeModule.addDeserializer(LocalDateTime.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalDateTimeDeserializer</span>(DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>)));
        timeModule.addSerializer(LocalDateTime.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalDateTimeSerializer</span>(DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>)));
        
        <span class="hljs-comment">// å…³é—­æ—¶é—´æˆ³åºåˆ—åŒ–ï¼ˆé¿å…æ—¶é—´è½¬æ•°å­—ï¼‰</span>
        objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);
        <span class="hljs-comment">// å¿½ç•¥æœªçŸ¥å±æ€§ï¼ˆååºåˆ—åŒ–æ—¶ä¸æŠ¥é”™ï¼‰</span>
        objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, <span class="hljs-literal">false</span>);
        <span class="hljs-comment">// æ³¨å†Œæ—¶é—´æ¨¡å—</span>
        objectMapper.registerModule(timeModule);
        <span class="hljs-keyword">return</span> objectMapper;
    }

    <span class="hljs-comment">/**
     * è‡ªå®šä¹‰RedisTemplateï¼šé€‚é…&lt;Object, Object&gt;ç±»å‹æ“ä½œ
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory factory)</span> {
        RedisTemplate&lt;String, Object&gt; redisTemplate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();
        redisTemplate.setConnectionFactory(factory);
        <span class="hljs-comment">// è®¾ç½®key/HashKeyåºåˆ—åŒ–å™¨</span>
        redisTemplate.setKeySerializer(KEY_SERIALIZER);
        redisTemplate.setHashKeySerializer(KEY_SERIALIZER);
        <span class="hljs-comment">// è®¾ç½®value/HashValueåºåˆ—åŒ–å™¨</span>
        redisTemplate.setValueSerializer(VALUE_SERIALIZER);
        redisTemplate.setHashValueSerializer(VALUE_SERIALIZER);
        redisTemplate.afterPropertiesSet();
        <span class="hljs-keyword">return</span> redisTemplate;
    }

    <span class="hljs-comment">/**
     * StringRedisTemplateï¼šé€‚é…&lt;String, String&gt;ç±»å‹è½»é‡æ“ä½œ
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> StringRedisTemplate <span class="hljs-title function_">stringRedisTemplate</span><span class="hljs-params">(RedisConnectionFactory redisConnectionFactory)</span> {
        <span class="hljs-type">StringRedisTemplate</span> <span class="hljs-variable">stringRedisTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisTemplate</span>(redisConnectionFactory);
        stringRedisTemplate.afterPropertiesSet();
        <span class="hljs-keyword">return</span> stringRedisTemplate;
    }

    <span class="hljs-comment">/**
     * RedisCacheManagerï¼šæ”¯æ’‘æ³¨è§£å¼ç¼“å­˜ï¼Œå¤ç”¨å…¨å±€åºåˆ—åŒ–è§„åˆ™
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedisCacheManager <span class="hljs-title function_">cacheManager</span><span class="hljs-params">(RedisConnectionFactory connectionFactory)</span> {
        <span class="hljs-comment">// 1. åŸºç¡€ç¼“å­˜é…ç½®</span>
        <span class="hljs-type">RedisCacheConfiguration</span> <span class="hljs-variable">cacheConfig</span> <span class="hljs-operator">=</span> RedisCacheConfiguration.defaultCacheConfig()
                .serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(KEY_SERIALIZER))
                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(VALUE_SERIALIZER))
                .entryTtl(Duration.ofHours(<span class="hljs-number">1</span>)) <span class="hljs-comment">// é»˜è®¤è¿‡æœŸæ—¶é—´1å°æ—¶</span>
                .disableCachingNullValues() <span class="hljs-comment">// ä¸ç¼“å­˜nullï¼ˆé˜²æ­¢ç¼“å­˜ç©¿é€ï¼‰</span>
                .prefixCacheNameWith(<span class="hljs-string">"demo:"</span>); <span class="hljs-comment">// ç¼“å­˜keyå‰ç¼€ï¼ˆé¿å…å†²çªï¼‰</span>

        <span class="hljs-comment">// 2. æ„å»ºç¼“å­˜ç®¡ç†å™¨ï¼ˆæ”¯æŒä¸åŒç¼“å­˜åè‡ªå®šä¹‰è¿‡æœŸæ—¶é—´ï¼‰</span>
        <span class="hljs-keyword">return</span> RedisCacheManager.builder(connectionFactory)
                .cacheDefaults(cacheConfig)
                .withCacheConfiguration(<span class="hljs-string">"user"</span>, cacheConfig.entryTtl(Duration.ofSeconds(<span class="hljs-number">10</span>))) <span class="hljs-comment">// userç¼“å­˜10ç§’è¿‡æœŸ</span>
                .build();
    }
}
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€å®æˆ˜å¼€å‘ï¼šä¸¤ç§ç¼“å­˜ä½¿ç”¨æ–¹å¼</h2>
<p>å®ç°<strong>æ‰‹åŠ¨ç¼“å­˜ï¼ˆRedisTemplateï¼‰</strong> Â å’Œ<strong>æ³¨è§£å¼ç¼“å­˜ï¼ˆ@Cacheableï¼‰</strong> Â ä¸¤ç§æ–¹å¼ï¼Œè¦†ç›–ä¸åŒä¸šåŠ¡åœºæ™¯éœ€æ±‚ã€‚</p>
<h3 data-id="heading-7">1. å®šä¹‰ User å®ä½“ç±»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis.dto;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.io.Serializable;

<span class="hljs-comment">/**
 * ç”¨æˆ·å®ä½“ç±»ï¼ˆå®ç°Serializableå…œåº•ï¼Œå®é™…ä½¿ç”¨JSONåºåˆ—åŒ–ï¼‰
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">6643397313702951631L</span>;

    <span class="hljs-keyword">private</span> Long id;          <span class="hljs-comment">// ç”¨æˆ·ID</span>
    <span class="hljs-keyword">private</span> String name;      <span class="hljs-comment">// å§“å</span>
    <span class="hljs-keyword">private</span> Integer age;      <span class="hljs-comment">// å¹´é¾„</span>
    <span class="hljs-keyword">private</span> String email;     <span class="hljs-comment">// é‚®ç®±</span>
    <span class="hljs-keyword">private</span> String phone;     <span class="hljs-comment">// æ‰‹æœºå·</span>
    <span class="hljs-keyword">private</span> String address;   <span class="hljs-comment">// åœ°å€</span>
    <span class="hljs-keyword">private</span> Integer gender;   <span class="hljs-comment">// æ€§åˆ«ï¼ˆ1-ç”·ï¼Œ0-å¥³ï¼‰</span>
    <span class="hljs-keyword">private</span> String username;  <span class="hljs-comment">// ç”¨æˆ·å</span>
}
</code></pre>
<h3 data-id="heading-8">2. å®šä¹‰ä¸šåŠ¡æ¥å£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis.service;

<span class="hljs-keyword">import</span> com.demo.redis.dto.User;

<span class="hljs-comment">/**
 * ç¼“å­˜æ¼”ç¤ºä¸šåŠ¡æ¥å£
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IDemoService</span> {
    <span class="hljs-comment">// æ‰‹åŠ¨ç¼“å­˜ï¼ˆRedisTemplateï¼‰</span>
    User <span class="hljs-title function_">getUser</span><span class="hljs-params">(Long userId)</span>;

    <span class="hljs-comment">// æ³¨è§£å¼ç¼“å­˜ï¼šæŸ¥è¯¢</span>
    User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Long userId)</span>;

    <span class="hljs-comment">// æ³¨è§£å¼ç¼“å­˜ï¼šæ›´æ–°</span>
    User <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span>;

    <span class="hljs-comment">// æ³¨è§£å¼ç¼“å­˜ï¼šåˆ é™¤</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(Long userId)</span>;
}
</code></pre>
<h3 data-id="heading-9">3. ä¸šåŠ¡å®ç°ç±»ï¼ˆæ ¸å¿ƒï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis.service.impl;

<span class="hljs-keyword">import</span> com.demo.redis.dto.User;
<span class="hljs-keyword">import</span> com.demo.redis.service.IDemoService;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.cache.annotation.CacheEvict;
<span class="hljs-keyword">import</span> org.springframework.cache.annotation.CachePut;
<span class="hljs-keyword">import</span> org.springframework.cache.annotation.Cacheable;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * ç¼“å­˜ä¸šåŠ¡å®ç°ç±»
 * 1. æ‰‹åŠ¨ç¼“å­˜ï¼šé€šè¿‡RedisTemplateæ“ä½œ
 * 2. æ³¨è§£å¼ç¼“å­˜ï¼šé€šè¿‡<span class="hljs-doctag">@Cacheable</span>/<span class="hljs-doctag">@CachePut</span>/<span class="hljs-doctag">@CacheEvict</span>
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IDemoService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;

    <span class="hljs-comment">/**
     * æ–¹å¼1ï¼šæ‰‹åŠ¨ç¼“å­˜ï¼ˆRedisTemplateï¼‰
     * é€‚åˆéœ€è¦ç²¾ç»†åŒ–æ§åˆ¶ç¼“å­˜çš„åœºæ™¯
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + userId;

        <span class="hljs-comment">// 1. ä¼˜å…ˆä»ç¼“å­˜è·å–</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> (User) redisTemplate.opsForValue().get(key);
        <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
            log.info(<span class="hljs-string">"ä»ç¼“å­˜è·å–ç”¨æˆ·ï¼š{}"</span>, userId);
            <span class="hljs-keyword">return</span> user;
        }

        <span class="hljs-comment">// 2. ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥è¯¢æ•°æ®åº“</span>
        user = queryDb(userId);

        <span class="hljs-comment">// 3. å­˜å…¥ç¼“å­˜ï¼ˆ30ç§’è¿‡æœŸï¼‰</span>
        <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
            redisTemplate.opsForValue().set(key, user, <span class="hljs-number">30</span>, TimeUnit.SECONDS);
            log.info(<span class="hljs-string">"ç”¨æˆ·æ•°æ®å­˜å…¥ç¼“å­˜ï¼š{}"</span>, userId);
        }

        <span class="hljs-keyword">return</span> user;
    }

    <span class="hljs-comment">/**
     * æ–¹å¼2ï¼šæ³¨è§£å¼ç¼“å­˜ï¼ˆ<span class="hljs-doctag">@Cacheable</span>ï¼‰
     * ä¼˜å…ˆæŸ¥ç¼“å­˜ï¼Œæ— åˆ™æŸ¥åº“å¹¶è‡ªåŠ¨ç¼“å­˜
     * cacheNames="user" â†’ æœ€ç»ˆkeyï¼šdemo:user:userId
     */</span>
    <span class="hljs-meta">@Cacheable(cacheNames = "user", key = "#userId")</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-keyword">return</span> queryDb(userId);
    }

    <span class="hljs-comment">/**
     * æ³¨è§£å¼ç¼“å­˜ï¼šæ›´æ–°ï¼ˆ<span class="hljs-doctag">@CachePut</span>ï¼‰
     * æ‰§è¡Œæ–¹æ³•åè‡ªåŠ¨æ›´æ–°ç¼“å­˜ï¼Œä¿è¯ç¼“å­˜ä¸æ•°æ®ä¸€è‡´
     */</span>
    <span class="hljs-meta">@CachePut(cacheNames = "user", key = "#user.id")</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span> {
        log.info(<span class="hljs-string">"æ›´æ–°ç”¨æˆ·ç¼“å­˜ï¼š{}"</span>, user.getId());
        <span class="hljs-keyword">return</span> user;
    }

    <span class="hljs-comment">/**
     * æ³¨è§£å¼ç¼“å­˜ï¼šåˆ é™¤ï¼ˆ<span class="hljs-doctag">@CacheEvict</span>ï¼‰
     * æ‰§è¡Œæ–¹æ³•åè‡ªåŠ¨æ¸…é™¤å¯¹åº”ç¼“å­˜
     */</span>
    <span class="hljs-meta">@CacheEvict(cacheNames = "user", key = "#userId")</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(Long userId)</span> {
        log.info(<span class="hljs-string">"åˆ é™¤ç”¨æˆ·ç¼“å­˜ï¼š{}"</span>, userId);
    }

    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢ï¼ˆå®é™…é¡¹ç›®æ›¿æ¢ä¸ºMyBatis/JPAï¼‰
     */</span>
    <span class="hljs-keyword">private</span> User <span class="hljs-title function_">queryDb</span><span class="hljs-params">(Long userId)</span> {
        log.info(<span class="hljs-string">"æŸ¥è¯¢æ•°æ®åº“ï¼š{}"</span>, userId);
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setId(userId);
        user.setName(<span class="hljs-string">"ç”¨æˆ·"</span> + userId);
        user.setAge(<span class="hljs-number">25</span>);
        user.setEmail(<span class="hljs-string">"user"</span> + userId + <span class="hljs-string">"@example.com"</span>);
        user.setPhone(<span class="hljs-string">"1380013800"</span> + (userId % <span class="hljs-number">100</span>));
        user.setAddress(<span class="hljs-string">"åŒ—äº¬å¸‚"</span>);
        user.setGender(<span class="hljs-number">1</span>);
        user.setUsername(<span class="hljs-string">"username"</span> + userId);
        <span class="hljs-keyword">return</span> user;
    }
}
</code></pre>
<h2 data-id="heading-10">å››ã€æµ‹è¯•éªŒè¯ï¼šç¼“å­˜åŠŸèƒ½å®Œæ•´æ€§</h2>
<p>ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼ŒéªŒè¯æ‰‹åŠ¨ç¼“å­˜å’Œæ³¨è§£å¼ç¼“å­˜çš„æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis;

<span class="hljs-keyword">import</span> cn.hutool.json.JSONUtil;
<span class="hljs-keyword">import</span> com.demo.redis.dto.User;
<span class="hljs-keyword">import</span> com.demo.redis.service.IDemoService;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@SpringBootTest(classes = DemoRedisApplication.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoServiceTest</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> IDemoService iDemoService;

    <span class="hljs-comment">/**
     * æµ‹è¯•æ‰‹åŠ¨ç¼“å­˜ï¼ˆRedisTemplateï¼‰
     * éªŒè¯ï¼šç¼“å­˜å‘½ä¸­ â†’ è¿‡æœŸ â†’ é‡æ–°æŸ¥åº“
     */</span>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetUser</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡ï¼šæŸ¥åº“ + å­˜ç¼“å­˜</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> iDemoService.getUser(<span class="hljs-number">100L</span>);
        log.info(<span class="hljs-string">"ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼š{}"</span>, JSONUtil.toJsonStr(user));
        
        <span class="hljs-comment">// ç¬¬äºŒæ¬¡ï¼šç¼“å­˜å‘½ä¸­</span>
        user = iDemoService.getUser(<span class="hljs-number">100L</span>);
        log.info(<span class="hljs-string">"ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼š{}"</span>, JSONUtil.toJsonStr(user));
        
        <span class="hljs-comment">// ç­‰å¾…30ç§’ï¼Œç¼“å­˜è¿‡æœŸ</span>
        Thread.sleep(<span class="hljs-number">30</span> * <span class="hljs-number">1000</span>);
        
        <span class="hljs-comment">// ç¬¬ä¸‰æ¬¡ï¼šé‡æ–°æŸ¥åº“ + å­˜ç¼“å­˜</span>
        user = iDemoService.getUser(<span class="hljs-number">100L</span>);
        log.info(<span class="hljs-string">"ç¬¬ä¸‰æ¬¡æŸ¥è¯¢ï¼š{}"</span>, JSONUtil.toJsonStr(user));
    }

    <span class="hljs-comment">/**
     * æµ‹è¯•æ³¨è§£å¼ç¼“å­˜ï¼ˆ<span class="hljs-doctag">@Cacheable</span>/<span class="hljs-doctag">@CachePut</span>/<span class="hljs-doctag">@CacheEvict</span>ï¼‰
     */</span>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUser</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-comment">// 1. ç¬¬ä¸€æ¬¡æŸ¥ï¼šåº“ â†’ ç¼“å­˜</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> iDemoService.getUserById(<span class="hljs-number">100L</span>);
        log.info(<span class="hljs-string">"getUserById 1ï¼š{}"</span>, JSONUtil.toJsonStr(user));
        
        <span class="hljs-comment">// 2. ç¬¬äºŒæ¬¡æŸ¥ï¼šç¼“å­˜</span>
        user = iDemoService.getUserById(<span class="hljs-number">100L</span>);
        log.info(<span class="hljs-string">"getUserById 2ï¼š{}"</span>, JSONUtil.toJsonStr(user));
        
        <span class="hljs-comment">// 3. ç­‰å¾…10ç§’ï¼Œuserç¼“å­˜è¿‡æœŸï¼ˆé…ç½®çš„10ç§’ï¼‰</span>
        Thread.sleep(<span class="hljs-number">10</span> * <span class="hljs-number">1000</span>);
        
        <span class="hljs-comment">// 4. ç¬¬ä¸‰æ¬¡æŸ¥ï¼šåº“ â†’ ç¼“å­˜</span>
        user = iDemoService.getUserById(<span class="hljs-number">100L</span>);
        log.info(<span class="hljs-string">"getUserById 3ï¼š{}"</span>, JSONUtil.toJsonStr(user));
        
        <span class="hljs-comment">// 5. æ›´æ–°ç”¨æˆ·ï¼šåŒæ­¥ç¼“å­˜</span>
        user.setAddress(<span class="hljs-string">"æ·±åœ³å¸‚"</span>);
        user = iDemoService.updateUser(user);
        log.info(<span class="hljs-string">"updateUser 1ï¼š{}"</span>, user.getAddress());
        
        <span class="hljs-comment">// 6. éªŒè¯æ›´æ–°åç¼“å­˜</span>
        user = iDemoService.getUserById(<span class="hljs-number">100L</span>);
        log.info(<span class="hljs-string">"getUserById 4ï¼š{}"</span>, user.getAddress());
        
        <span class="hljs-comment">// 7. åˆ é™¤ç”¨æˆ·ï¼šæ¸…é™¤ç¼“å­˜</span>
        iDemoService.deleteUser(<span class="hljs-number">100L</span>);
        log.info(<span class="hljs-string">"deleteUser 1ï¼šå®Œæˆ"</span>);
        
        <span class="hljs-comment">// 8. åˆ é™¤åæŸ¥ï¼šåº“ â†’ ç¼“å­˜</span>
        user = iDemoService.getUserById(<span class="hljs-number">100L</span>);
        log.info(<span class="hljs-string">"getUserById 5ï¼š{}"</span>, JSONUtil.toJsonStr(user));
    }

    <span class="hljs-comment">/**
     * æµ‹è¯•æ‰‹åŠ¨ç¼“å­˜ä¸æ³¨è§£å¼ç¼“å­˜å…±å­˜
     */</span>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGet</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-comment">// æ‰‹åŠ¨ç¼“å­˜å­˜å€¼</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> iDemoService.getUser(<span class="hljs-number">100L</span>);
        log.info(<span class="hljs-string">"getUser 1ï¼š{}"</span>, JSONUtil.toJsonStr(user));
        
        <span class="hljs-comment">// æ³¨è§£å¼ç¼“å­˜è¯»å–ï¼ˆæ³¨æ„ï¼škeyä¸åŒï¼Œæ‰‹åŠ¨æ˜¯user:100ï¼Œæ³¨è§£æ˜¯demo:user:100ï¼‰</span>
        user = iDemoService.getUserById(<span class="hljs-number">100L</span>);
        log.info(<span class="hljs-string">"getUserById 2ï¼š{}"</span>, JSONUtil.toJsonStr(user));
    }
}
</code></pre>
<h3 data-id="heading-11">æµ‹è¯•ç»“æœåˆ†æ</h3>
<ol>
<li>
<p><strong>æ‰‹åŠ¨ç¼“å­˜</strong>ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼šæ‰“å°<code>æŸ¥è¯¢æ•°æ®åº“ï¼š100</code>Â +Â <code>ç”¨æˆ·æ•°æ®å­˜å…¥ç¼“å­˜ï¼š100</code>ï¼›</li>
<li>ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼šæ‰“å°<code>ä»ç¼“å­˜è·å–ç”¨æˆ·ï¼š100</code>ï¼›</li>
<li>30 ç§’åç¬¬ä¸‰æ¬¡æŸ¥è¯¢ï¼šé‡æ–°æ‰“å°<code>æŸ¥è¯¢æ•°æ®åº“ï¼š100</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ³¨è§£å¼ç¼“å­˜</strong>ï¼š</p>
<ul>
<li>å‰ä¸¤æ¬¡<code>getUserById</code>ï¼šä»…ç¬¬ä¸€æ¬¡æ‰“å°<code>æŸ¥è¯¢æ•°æ®åº“ï¼š100</code>ï¼›</li>
<li>10 ç§’åç¬¬ä¸‰æ¬¡ï¼šé‡æ–°æ‰“å°<code>æŸ¥è¯¢æ•°æ®åº“ï¼š100</code>ï¼ˆç¼“å­˜è¿‡æœŸï¼‰ï¼›</li>
<li><code>updateUser</code>åï¼š<code>getUserById</code>è·å–åˆ°æ›´æ–°åçš„<code>address=æ·±åœ³å¸‚</code>ï¼›</li>
<li><code>deleteUser</code>åï¼š<code>getUserById</code>é‡æ–°æ‰“å°<code>æŸ¥è¯¢æ•°æ®åº“ï¼š100</code>ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-12">äº”ã€ç”Ÿäº§ç¯å¢ƒæ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-13">1. ç¼“å­˜é—®é¢˜é˜²æŠ¤</h3>
<ul>
<li><strong>ç¼“å­˜ç©¿é€</strong>ï¼šç¦ç”¨<code>cacheNullValues</code>ï¼ˆæœ¬æ–‡é…ç½®ï¼‰ï¼Œç»“åˆå‚æ•°æ ¡éªŒ / å¸ƒéš†è¿‡æ»¤å™¨ï¼›</li>
<li><strong>ç¼“å­˜å‡»ç©¿</strong>ï¼šçƒ­ç‚¹ key è®¾ç½®æ°¸ä¸è¿‡æœŸï¼Œæˆ–é€šè¿‡äº’æ–¥é”ï¼ˆSETNXï¼‰æ§åˆ¶ç¼“å­˜æ›´æ–°ï¼›</li>
<li><strong>ç¼“å­˜é›ªå´©</strong>ï¼šç»™ä¸åŒç¼“å­˜åè®¾ç½®ä¸åŒè¿‡æœŸæ—¶é—´ï¼ˆå¦‚<code>user</code>10 ç§’ã€<code>order</code>1 å°æ—¶ï¼‰ï¼Œé¿å…é›†ä¸­è¿‡æœŸï¼›</li>
<li><strong>ç¼“å­˜ä¸€è‡´æ€§</strong>ï¼šæ›´æ–°æ“ä½œä½¿ç”¨<code>@CachePut</code>ï¼Œåˆ é™¤æ“ä½œä½¿ç”¨<code>@CacheEvict</code>ï¼Œä¿è¯ç¼“å­˜ä¸æ•°æ®åº“åŒæ­¥ã€‚</li>
</ul>
<h3 data-id="heading-14">2. Redis é›†ç¾¤ä¼˜åŒ–</h3>
<ul>
<li>é…ç½®<code>lettuce.cluster.refresh.adaptive=true</code>ï¼Œè‡ªé€‚åº”åˆ·æ–°é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯ï¼›</li>
<li>åˆç†è®¾ç½®è¿æ¥æ± å‚æ•°ï¼ˆ<code>max-active</code>/<code>max-idle</code>ï¼‰ï¼Œé¿å…è¿æ¥æ•°è€—å°½ï¼›</li>
<li>ç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½® Redis å¯†ç ã€è¶…æ—¶æ—¶é—´ï¼Œé¿å…é›†ç¾¤èŠ‚ç‚¹ä¸å¯ç”¨å¯¼è‡´æœåŠ¡é˜»å¡ã€‚</li>
</ul>
<h3 data-id="heading-15">3. åºåˆ—åŒ–æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>å®ä½“ç±»å»ºè®®å®ç°<code>Serializable</code>æ¥å£ï¼ˆå…œåº•ï¼‰ï¼›</li>
<li>æ—¶é—´ç±»å‹å¿…é¡»è‡ªå®šä¹‰åºåˆ—åŒ–è§„åˆ™ï¼Œé¿å…é»˜è®¤æ—¶é—´æˆ³æ ¼å¼ï¼›</li>
<li>ç¦ç”¨<code>FAIL_ON_UNKNOWN_PROPERTIES</code>ï¼Œé¿å…ä¸šåŠ¡å­—æ®µæ‰©å±•å¯¼è‡´ååºåˆ—åŒ–å¤±è´¥ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[keep-aliveç¼“å­˜ç»„ä»¶]]></title>    <link>https://juejin.cn/post/7591066233670778906</link>    <guid>https://juejin.cn/post/7591066233670778906</guid>    <pubDate>2026-01-04T05:50:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591066233670778906" data-draft-id="7590958028478169134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="keep-aliveç¼“å­˜ç»„ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-04T05:50:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€ªå¯çˆ±çš„åœ°çƒäºº"/> <meta itemprop="url" content="https://juejin.cn/user/4387527339288932"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            keep-aliveç¼“å­˜ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4387527339288932/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€ªå¯çˆ±çš„åœ°çƒäºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:50:09.000Z" title="Sun Jan 04 2026 05:50:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Vueçš„keep-Aliveç»„ä»¶æ˜¯ç”¨äºç¼“å­˜ç»„ä»¶çš„é«˜é˜¶ç»„ä»¶ï¼Œå¯ä»¥æœ‰æ•ˆåœ°æé«˜åº”ç”¨æ€§èƒ½ã€‚å®ƒèƒ½å¤Ÿä½¿ç»„ä»¶åœ¨åˆ‡æ¢æ—¶ä»èƒ½ä¿æŒåŸæœ‰çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶ä¸”æœ‰ä¸“é—¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹ä¾¿å»åšé¢å¤–çš„å¤„ç†ã€‚è¯¥ç»„ä»¶åœ¨å¾ˆå¤šåœºæ™¯éå¸¸æœ‰ç”¨ï¼š</p>
<ul>
<li>tabsç¼“å­˜é¡µé¢</li>
<li>åˆ†æ­¥è¡¨å•</li>
<li>è·¯ç”±ç¼“å­˜</li>
<li>åŠ¨æ€åŠ è½½å†…å®¹</li>
<li>ä¿æŒæŸäº›ç»„ä»¶çŠ¶æ€</li>
</ul>
<p>åœ¨Vueä¸­ï¼Œé€šè¿‡Keep-AliveåŒ…è£¹å†…çš„ç»„ä»¶ä¼šè‡ªåŠ¨ç¼“å­˜ä¸‹æ¥ï¼Œå…¶ä¸­åªèƒ½æœ‰ä¸€ä¸ªç›´æ¥å­ç»„ä»¶ã€‚</p>
<p>å®ç°åŸç†ï¼š</p>
<h6 data-id="heading-0">1.ç»„ä»¶ç¼“å­˜</h6>
<p><code>&lt;keep-alive&gt;</code>Â æ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼Œå®ƒä¸ä¼šæ¸²æŸ“æˆä¸€ä¸ªçœŸå®çš„ DOM å…ƒç´ ï¼Œè€Œæ˜¯ä½œä¸º Vue ç»„ä»¶æ ‘çš„åŒ…è£…å™¨å­˜åœ¨ã€‚å½“ä½ åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨Â <code>&lt;keep-alive&gt;</code>Â åŒ…è£¹ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œè¿™ä¸ªç»„ä»¶ä¼šè¢«ç¼“å­˜èµ·æ¥ã€‚</p>
<h6 data-id="heading-1">2.ç¼“å­˜æœºåˆ¶</h6>
<ul>
<li>â€Œ<strong>å†…å­˜å­˜å‚¨</strong>â€Œï¼š<code>&lt;keep-alive&gt;</code>Â ä½¿ç”¨ä¸€ä¸ªå†…å­˜ä¸­çš„ç¼“å­˜å¯¹è±¡æ¥å­˜å‚¨è¢«ç¼“å­˜çš„ç»„ä»¶å®ä¾‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç¼“å­˜æ˜¯é€šè¿‡ä¸€ä¸ªå¯¹è±¡æ¥ç»´æŠ¤çš„ï¼Œé”®æ˜¯ç»„ä»¶çš„Â <code>cid</code>ï¼ˆæ„é€ å‡½æ•° IDï¼‰ï¼Œå€¼æ˜¯ç»„ä»¶å®ä¾‹ã€‚</li>
<li>â€Œ<strong>ç”Ÿå‘½å‘¨æœŸé’©å­</strong>â€Œï¼šå½“ç»„ä»¶è¢«åŒ…è£¹åœ¨Â <code>&lt;keep-alive&gt;</code>Â ä¸­æ—¶ï¼ŒVue ä¼šé‡å†™ç»„ä»¶çš„Â <code>created</code>ã€<code>mounted</code>ã€<code>destroyed</code>Â ç­‰ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä»¥ä¾¿åœ¨ç»„ä»¶æ¿€æ´»ï¼ˆè¢«å†æ¬¡è®¿é—®ï¼‰å’Œå»æ¿€æ´»ï¼ˆä¸å†æ˜¾ç¤ºï¼‰æ—¶æ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œåœ¨ç»„ä»¶è¢«æ¿€æ´»æ—¶è°ƒç”¨Â <code>activated</code>Â é’©å­ï¼Œåœ¨å»æ¿€æ´»æ—¶è°ƒç”¨Â <code>deactivated</code>Â é’©å­ã€‚</li>
</ul>
<h6 data-id="heading-2">3.æ¸²æŸ“ä¸æ¿€æ´»</h6>
<ul>
<li>â€Œ<strong>æ¸²æŸ“</strong>â€Œï¼šå½“Â <code>&lt;keep-alive&gt;</code>Â å†…éƒ¨çš„ç»„ä»¶éœ€è¦è¢«æ¸²æŸ“æ—¶ï¼ŒVue ä¼šæ£€æŸ¥è¯¥ç»„ä»¶æ˜¯å¦å·²ç»åœ¨ç¼“å­˜ä¸­ã€‚å¦‚æœå­˜åœ¨ï¼ŒVue ä¼šç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºè¯¥ç»„ä»¶å®ä¾‹è¿›è¡Œæ¸²æŸ“ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ›å»ºæ–°çš„å®ä¾‹ã€‚</li>
<li>â€Œ<strong>æ¿€æ´»ä¸å»æ¿€æ´»</strong>â€Œï¼šå½“ç»„ä»¶ä»ç¼“å­˜ä¸­è¢«å–å‡ºè¿›è¡Œæ¸²æŸ“æ—¶ï¼ŒVue ä¼šè°ƒç”¨è¯¥ç»„ä»¶çš„Â <code>activated</code>Â é’©å­ï¼›å¦‚æœè¯¥ç»„ä»¶ä»è§†å›¾ä¸­ç§»é™¤ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·åˆ‡æ¢åˆ°å¦ä¸€ä¸ªæ ‡ç­¾ï¼‰ï¼ŒVue ä¼šè°ƒç”¨å…¶Â <code>deactivated</code>Â é’©å­ã€‚</li>
</ul>
<h6 data-id="heading-3">4.includeå’Œexcludeå±æ€§</h6>
<p><code>&lt;keep-alive&gt;</code>Â å…è®¸é€šè¿‡Â <code>include</code>Â å’ŒÂ <code>exclude</code>Â å±æ€§æ¥æŒ‡å®šå“ªäº›ç»„ä»¶åº”è¯¥è¢«ç¼“å­˜æˆ–æ’é™¤ã€‚è¿™äº›å±æ€§å¯ä»¥æ¥å—ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ã€ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æˆ–ä¸€ä¸ªæ•°ç»„ã€‚</p>
<p>includeå±æ€§æ¥å—ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šå“ªäº›ç»„ä»¶åº”è¯¥è¢«ç¼“å­˜ã€‚
ä¾‹å¦‚åªæƒ³ç¼“å­˜homeå’Œaboutä¸¤ä¸ªç»„ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;keep-alive include=<span class="hljs-string">"Home,About"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentView"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span></span>
&lt;/keep-alive&gt;

</code></pre>
<p>æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;keep-alive :include=<span class="hljs-string">"/A(About|Home)/"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentView"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span></span>
&lt;/keep-alive&gt;
</code></pre>
<p>exclude
ä¸includeç›¸åï¼Œexcludeå±æ€§ç”¨äºæŒ‡å®šå“ªäº›ç»„ä»¶ä¸åº”è¯¥è¢«ç¼“å­˜ã€‚ä¾‹å¦‚ï¼Œä¸æƒ³ç¼“å­˜loginå’Œsignupç»„ä»¶ï¼Œå¯ä»¥è¿™æ ·è®¾ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;keep-alive exclude=<span class="hljs-string">"Login,Signup"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentView"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span></span>
&lt;/keep-alive&gt;
</code></pre>
<p>åŠ¨æ€ç»‘å®šincludeå’Œexclude
åŠ¨æ€ç»‘å®šè¿™äº›å±æ€§ï¼Œæ›´åŠ çµæ´»ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨vueçš„å“åº”å¼æ•°æ®æ¥æ§åˆ¶å“ªäº›ç»„ä»¶åº”è¯¥è¢«ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;script setup&gt; 
    <span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span> <span class="hljs-comment">// ç¼“å­˜çš„ç»„ä»¶ååˆ—è¡¨ </span>
    <span class="hljs-keyword">const</span> cacheComponents = [<span class="hljs-string">'Home'</span>, <span class="hljs-string">'About'</span>] <span class="hljs-comment">// å½“å‰è¦æ˜¾ç¤ºçš„ç»„ä»¶ï¼ˆå‡è®¾é€šè¿‡è·¯ç”±æˆ–å…¶ä»–é€»è¾‘åŠ¨æ€è®¾ç½®ï¼‰</span>
    <span class="hljs-keyword">const</span> currentView = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Home'</span>) <span class="hljs-comment">// ç¤ºä¾‹å€¼ï¼Œå®é™…å¯èƒ½æ¥è‡ª router æˆ–çŠ¶æ€ç®¡ç† </span>
&lt;/script&gt;
    
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span> <span class="hljs-attr">:include</span>=<span class="hljs-string">"cacheComponents"</span>&gt;</span> 
        <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentView"</span> /&gt;</span> 
    <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒcacheComponentsæ•°ç»„å®šä¹‰äº†å“ªäº›ç»„ä»¶åº”è¯¥è¢«ç¼“å­˜ï¼Œå¯ä»¥æ ¹æ®vueå®ä¾‹çš„æ•°æ®å±æ€§ä¸­ä¿®æ”¹è¿™ä¸ªæ•°ç»„ã€‚</p>
<p>æ³¨æ„äº‹é¡¹
1.ä½¿ç”¨<code>&lt;keep-alive&gt;</code>æ—¶ï¼Œç¡®ä¿ä½ çš„ç»„ä»¶æœ‰ä¸€ä¸ªå”¯ä¸€çš„keyå±æ€§ï¼Œè¿™é€šå¸¸æ˜¯å¿…é¡»çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨åŠ¨æ€ç»„ä»¶çš„æƒ…å†µä¸‹ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;component :is=<span class="hljs-string">"currentView"</span> :key=<span class="hljs-string">"currentView"</span>&gt;&lt;/component&gt;
</code></pre>
<p>åœ¨Vue 3ä¸­ï¼Œ<code>&lt;keep-alive&gt;</code> çš„ä½¿ç”¨æ–¹å¼ç•¥æœ‰ä¸åŒï¼Œç‰¹åˆ«æ˜¯åœ¨ç»„åˆå¼APIï¼ˆComposition APIï¼‰ä¸­ã€‚ç¡®ä¿ä½ æ ¹æ®Vueçš„ç‰ˆæœ¬è°ƒæ•´ç”¨æ³•ã€‚ä¾‹å¦‚ï¼Œåœ¨Vue 3ä¸­ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ v-slot æ¥è®¿é—®è¢«ç¼“å­˜çš„ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"> &lt;keep-alive&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentView"</span> <span class="hljs-attr">v-slot</span>=<span class="hljs-string">"{ Component }"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">transition</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Component</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"currentView"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span></span>
&lt;/keep-alive&gt;
</code></pre>
<p>é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œä½ å¯ä»¥æœ‰æ•ˆåœ°æ§åˆ¶å“ªäº›ç»„ä»¶åº”è¯¥è¢«Â <code>&lt;keep-alive&gt;</code>Â ç¼“å­˜ï¼Œä»è€Œæé«˜åº”ç”¨çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®ä¿¡æœ‹å‹åœˆå›¾ç‰‡å¸ƒå±€]]></title>    <link>https://juejin.cn/post/7590712589297106950</link>    <guid>https://juejin.cn/post/7590712589297106950</guid>    <pubDate>2026-01-04T05:56:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590712589297106950" data-draft-id="7590735421262823465" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®ä¿¡æœ‹å‹åœˆå›¾ç‰‡å¸ƒå±€"/> <meta itemprop="keywords" content="JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2026-01-04T05:56:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤–å•«å•«"/> <meta itemprop="url" content="https://juejin.cn/user/3314378809290953"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®ä¿¡æœ‹å‹åœˆå›¾ç‰‡å¸ƒå±€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3314378809290953/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤–å•«å•«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:56:12.000Z" title="Sun Jan 04 2026 05:56:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æœ‹å‹åœˆä¸­ï¼Œé™¤äº†æ™®éçš„ä¸€è¡Œä¸‰åˆ—çš„å¸ƒå±€å¤–ï¼Œä¸€å¼ ã€äºŒå¼ ã€å››å¼ å›¾ç‰‡æ—¶çš„å¸ƒå±€æ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸€å¼ å›¾ç‰‡æ—¶ï¼ŒæŒ‰å›¾ç‰‡åŸæœ‰å®½é«˜æ˜¾ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2c291d4879e401ba8aa15ff1b5bcc46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSW5ZWr5ZWr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110972&amp;x-signature=qQ4ZkSkvR7dsVqEHy5wRqeuSvGQ%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸¤å¼ å›¾ç‰‡ï¼Œå¹¶è¡Œå±•ç¤ºï¼Œå›¾ç‰‡ä¼šåå¤§ä¸€äº›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fff6679c8fa4c56b8f2c72a43ef5c1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSW5ZWr5ZWr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110972&amp;x-signature=t6kewTQSb3SV028uCXAhQ43UoWc%3D" alt="image.png" loading="lazy"/></p>
<p>å››å¼ å›¾ç‰‡æ—¶ï¼Œä¸€è¡Œæ˜¾ç¤ºä¸¤ä¸ªã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da67b340641147d6b47a41afbe016275~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSW5ZWr5ZWr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110972&amp;x-signature=Dc8PSIFx2bLhfS3ppl%2ByS332AG8%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‰å¼ ã€åŠå››å¼ ä»¥ä¸Šæ—¶ï¼ŒæŒ‰ä¸€è¡Œä¸‰åˆ—æ’åºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe5ef34239eb4c8f909c8e0300cf48f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSW5ZWr5ZWr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110972&amp;x-signature=EoE%2FL7HD%2B5U5TB2YVOmm9GXVs%2F8%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">å®ç°</h2>
<p>è¿™é‡Œç»“åˆnaive uiç»„ä»¶å®ç°å›¾ç‰‡å±•ç¤ºã€‚é¡µé¢è·å–åˆ° å›¾ç‰‡æ•°æ®ï¼ˆArray[Object]ï¼‰åé€šè¿‡ <code>n-image-group</code> ä»¥ç»„çš„å½¢å¼å±•ç¤ºå›¾ç‰‡ã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;n-scrollbar style=<span class="hljs-string">"max-height: 60vh"</span>&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-image-group</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"moment-images"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"calssName"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"image-item"</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in fileList"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">n-image</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"item.url"</span> <span class="hljs-attr">:img-props</span>=<span class="hljs-string">"{ style: { 'aspect-ratio': '1/1' } }"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">n-image-group</span>&gt;</span></span>
&lt;/n-scrollbar&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">const</span> calssName = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)<span class="hljs-comment">//ç±»å</span>
<span class="hljs-keyword">const</span> fileList= <span class="hljs-title function_">ref</span>([])<span class="hljs-comment">//å›¾ç‰‡æ•°æ®</span>

<span class="hljs-comment">//æ ¹æ®å›¾ç‰‡æ€»é•¿åº¦æ¥è®¾ç½®å›¾ç‰‡ç±»å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">setClassName</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> length = fileList.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>
    <span class="hljs-keyword">switch</span> (length) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
            calssName.<span class="hljs-property">value</span> = <span class="hljs-string">'image-count-1'</span>
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
            calssName.<span class="hljs-property">value</span> = <span class="hljs-string">'image-count-2'</span>
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
            calssName.<span class="hljs-property">value</span> = <span class="hljs-string">'image-count-3'</span>
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
            calssName.<span class="hljs-property">value</span> = <span class="hljs-string">'image-count-4'</span>
            <span class="hljs-keyword">break</span>;
        <span class="hljs-attr">default</span>:
            calssName.<span class="hljs-property">value</span> = <span class="hljs-string">'image-count-3'</span>
            <span class="hljs-keyword">break</span>;
    }
}

<span class="hljs-title function_">setClassName</span>()
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-comment">/* å•å›¾å¸ƒå±€ */</span>
<span class="hljs-selector-class">.img-count-1</span> {
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">300px</span>;
}

<span class="hljs-comment">/* åŒå›¾å¸ƒå±€ */</span>
<span class="hljs-selector-class">.image-count-2</span> {
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>fr);
  <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
}

<span class="hljs-comment">/* ä¸‰å›¾-å››å›¾ä»¥ä¸Šå¸ƒå±€ */</span>
<span class="hljs-selector-class">.image-count-3</span> {
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>fr);
  <span class="hljs-attribute">width</span>: <span class="hljs-number">350px</span>;
}

<span class="hljs-comment">/* å››å›¾å¸ƒå±€ */</span>
<span class="hljs-selector-class">.image-count-4</span> {
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>fr);
  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;
}

<span class="hljs-selector-class">.moment-images</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.image-item</span> {
  aspect-ratio: <span class="hljs-number">1</span>/<span class="hljs-number">1</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å·§ç”¨View Transition APIå®ç°ç‚«é…·çš„ä¸»é¢˜åˆ‡æ¢æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7591085154977808410</link>    <guid>https://juejin.cn/post/7591085154977808410</guid>    <pubDate>2026-01-04T05:58:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591085154977808410" data-draft-id="7591207451778007066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·§ç”¨View Transition APIå®ç°ç‚«é…·çš„ä¸»é¢˜åˆ‡æ¢æ•ˆæœ"/> <meta itemprop="keywords" content="CSS"/> <meta itemprop="datePublished" content="2026-01-04T05:58:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="kevinlaizhiyu"/> <meta itemprop="url" content="https://juejin.cn/user/817692383647991"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·§ç”¨View Transition APIå®ç°ç‚«é…·çš„ä¸»é¢˜åˆ‡æ¢æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692383647991/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    kevinlaizhiyu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:58:31.000Z" title="Sun Jan 04 2026 05:58:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæµç•…ä¸”å¯Œæœ‰è§†è§‰å†²å‡»åŠ›çš„äº¤äº’æ•ˆæœèƒ½æå¤§æå‡ç”¨æˆ·ä½“éªŒï¼Œä¸»é¢˜åˆ‡æ¢ä½œä¸ºå¸¸è§çš„äº¤äº’åœºæ™¯ï¼Œä¼ ç»Ÿå®ç°æ–¹å¼å¾€å¾€å­˜åœ¨è¿‡æ¸¡ç”Ÿç¡¬çš„é—®é¢˜ã€‚æœ¬æ–‡å°†ä»åŸºç¡€åŸç†å‡ºå‘ï¼Œç»“åˆå®æˆ˜ä»£ç ï¼Œè®²è§£å¦‚ä½•åˆ©ç”¨CSSå˜é‡+View Transition APIæ‰“é€ ä»ç‚¹å‡»ä½ç½®æ‰©æ•£çš„ä¸æ»‘ä¸»é¢˜åˆ‡æ¢æ•ˆæœï¼Œç”±æµ…å…¥æ·±æ‹†è§£å®ç°æ€è·¯ä¸æ ¸å¿ƒé€»è¾‘ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒæŠ€æœ¯èƒŒæ™¯é“ºå«</h2>
<p>åœ¨å¼€å§‹å®æˆ˜å‰ï¼Œå…ˆç†æ¸…ä¸¤ä¸ªæ ¸å¿ƒæŠ€æœ¯åŸºç¡€ï¼Œè¿™æ˜¯å®ç°ç‚«é…·ä¸»é¢˜åˆ‡æ¢çš„å…³é”®ï¼š</p>
<h3 data-id="heading-1">1. CSSå˜é‡ï¼ˆCSS Custom Propertiesï¼‰</h3>
<p>CSSå˜é‡å…è®¸æˆ‘ä»¬åœ¨æ ·å¼ä¸­å®šä¹‰å¯å¤ç”¨ã€å¯åŠ¨æ€ä¿®æ”¹çš„å€¼ï¼Œæ˜¯å®ç°ä¸»é¢˜åˆ‡æ¢çš„åŸºç¡€ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„ç±»ååˆ‡æ¢ç¡¬ç¼–ç æ ·å¼ï¼ŒCSSå˜é‡çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li>é›†ä¸­ç®¡ç†ä¸»é¢˜ç›¸å…³æ ·å¼ï¼ˆèƒŒæ™¯ã€æ–‡å­—è‰²ç­‰ï¼‰ï¼Œç»´æŠ¤æ›´ä¾¿æ·ï¼›</li>
<li>æ”¯æŒé€šè¿‡JavaScriptåŠ¨æ€ä¿®æ”¹ï¼Œå®ç°æ ·å¼çš„å®æ—¶å“åº”ï¼›</li>
<li>å¤©ç„¶é€‚é…ä¸åŒä¸»é¢˜çŠ¶æ€ï¼Œæ— éœ€é‡å¤ç¼–å†™å¤§é‡å†—ä½™æ ·å¼ã€‚</li>
</ul>
<h3 data-id="heading-2">2. View Transition API</h3>
<p>è¿™æ˜¯æµè§ˆå™¨æä¾›çš„æ–°ä¸€ä»£è§†å›¾è¿‡æ¸¡APIï¼Œè§£å†³äº†ä¼ ç»Ÿè¿‡æ¸¡åŠ¨ç”»ä¸­â€œæ–°æ—§çŠ¶æ€å‰²è£‚â€çš„é—®é¢˜ï¼š</p>
<ul>
<li>æ ¸å¿ƒèƒ½åŠ›ï¼šæ•è·å…ƒç´ çš„â€œæ—§çŠ¶æ€â€å’Œâ€œæ–°çŠ¶æ€â€ï¼Œè‡ªåŠ¨ç”Ÿæˆè¿‡æ¸¡åŠ¨ç”»ï¼›</li>
<li>é€‚ç”¨åœºæ™¯ï¼šé¡µé¢åˆ‡æ¢ã€ä¸»é¢˜å˜æ›´ã€å…ƒç´ çŠ¶æ€æ›´æ–°ç­‰éœ€è¦è§†è§‰è¡”æ¥çš„åœºæ™¯ï¼›</li>
<li>å…¼å®¹æ€§ï¼šç°ä»£æµè§ˆå™¨ï¼ˆChrome 111+ã€Edge 111+ã€Safari 16.4+ï¼‰å·²æ”¯æŒï¼Œå¯é€šè¿‡é™çº§æ–¹æ¡ˆå…¼å®¹æ—§æµè§ˆå™¨ã€‚</li>
</ul>
<h2 data-id="heading-3">äºŒã€åŸºç¡€å®ç°ï¼šä»é™æ€ä¸»é¢˜åˆ‡æ¢åˆ°åŠ¨æ€è¿‡æ¸¡</h2>
<p>æˆ‘ä»¬å…ˆä»æœ€åŸºç¡€çš„ä¸»é¢˜åˆ‡æ¢å¼€å§‹ï¼Œé€æ­¥å‡çº§åˆ°å¸¦æ‰©æ•£åŠ¨ç”»çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-4">æ­¥éª¤1ï¼šå®šä¹‰ä¸»é¢˜ç›¸å…³CSSå˜é‡</h3>
<p>é¦–å…ˆåœ¨<code>html</code>æ ¹å…ƒç´ ä¸Šå®šä¹‰ä¸¤å¥—ä¸»é¢˜å˜é‡ï¼ˆæ·±è‰²/æµ…è‰²ï¼‰ï¼Œå¹¶è®¾ç½®é»˜è®¤ä¸»é¢˜ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">html</span> {
  <span class="hljs-comment">/* é»˜è®¤æ·±è‰²ä¸»é¢˜ */</span>
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#000</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#fff</span>;
}
<span class="hljs-comment">/* æµ…è‰²ä¸»é¢˜ï¼ˆé€šè¿‡darkç±»åˆ‡æ¢ï¼‰ */</span>
<span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.dark</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#000</span>;
}

<span class="hljs-comment">/* åº”ç”¨å˜é‡åˆ°é¡µé¢ */</span>
<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--bg-color);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color);
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>; <span class="hljs-comment">/* è®©bodyå æ»¡è§†å£ */</span>
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">2rem</span>;
}
</code></pre>
<p>è¿™é‡Œå°†èƒŒæ™¯è‰²ã€æ–‡å­—è‰²æŠ½ç¦»ä¸ºCSSå˜é‡ï¼Œåç»­åªéœ€ä¿®æ”¹å˜é‡å€¼ï¼ˆæˆ–åˆ‡æ¢ç±»åï¼‰å³å¯åˆ‡æ¢ä¸»é¢˜ã€‚</p>
<h3 data-id="heading-5">æ­¥éª¤2ï¼šåŸºç¡€ä¸»é¢˜åˆ‡æ¢é€»è¾‘ï¼ˆæ— åŠ¨ç”»ï¼‰</h3>
<p>ç¼–å†™JavaScriptå‡½æ•°ï¼Œå®ç°ç‚¹å‡»æŒ‰é’®åˆ‡æ¢<code>html</code>çš„<code>dark</code>ç±»ï¼Œå®Œæˆä¸»é¢˜åˆ‡æ¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»é¢˜åˆ‡æ¢æ ¸å¿ƒå‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">changeTheme</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'html'</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">toggle</span>(<span class="hljs-string">'dark'</span>);
};

<span class="hljs-comment">// ç»‘å®šæŒ‰é’®ç‚¹å‡»äº‹ä»¶</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, changeTheme);
</code></pre>
<p>æ­¤æ—¶ç‚¹å‡»æŒ‰é’®å·²èƒ½åˆ‡æ¢ä¸»é¢˜ï¼Œä½†è¿‡æ¸¡æ•ˆæœç”Ÿç¡¬ï¼Œæ²¡æœ‰è§†è§‰è¡”æ¥ã€‚</p>
<h3 data-id="heading-6">æ­¥éª¤3ï¼šæ·»åŠ View Transitionè¿‡æ¸¡åŠ¨ç”»</h3>
<p>æ¥ä¸‹æ¥å¼•å…¥View Transition APIï¼Œä¸ºä¸»é¢˜åˆ‡æ¢æ·»åŠ ä»ç‚¹å‡»ä½ç½®æ‰©æ•£çš„åœ†å½¢è£å‰ªåŠ¨ç”»ã€‚</p>
<h4 data-id="heading-7">3.1 å®šä¹‰è£å‰ªåŠ¨ç”»å…³é”®å¸§</h4>
<p>é€šè¿‡<code>clip-path</code>å®ç°åœ†å½¢æ‰©æ•£æ•ˆæœï¼ŒåŠ¨ç”»çš„èµ·å§‹/ç»“æŸä½ç½®ç”±åŠ¨æ€å˜é‡<code>--x</code>ã€<code>--y</code>ã€<code>--r</code>æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åœ†å½¢è£å‰ªåŠ¨ç”» */</span>
<span class="hljs-keyword">@keyframes</span> clip {
  <span class="hljs-selector-tag">from</span> {
    <span class="hljs-comment">/* ä»ç‚¹å‡»ä½ç½®çš„0åŠå¾„åœ†å¼€å§‹ */</span>
    <span class="hljs-attribute">clip-path</span>: <span class="hljs-built_in">circle</span>(<span class="hljs-number">0%</span> at <span class="hljs-built_in">var</span>(--x) <span class="hljs-built_in">var</span>(--y));
  }
  <span class="hljs-selector-tag">to</span> {
    <span class="hljs-comment">/* æ‰©æ•£åˆ°è¦†ç›–æ•´ä¸ªè§†çª—çš„åœ† */</span>
    <span class="hljs-attribute">clip-path</span>: <span class="hljs-built_in">circle</span>(<span class="hljs-built_in">var</span>(--r) at <span class="hljs-built_in">var</span>(--x) <span class="hljs-built_in">var</span>(--y));
  }
}

<span class="hljs-comment">/* é…ç½®View Transitionè¿‡æ¸¡è§„åˆ™ */</span>
<span class="hljs-comment">/* æ—§çŠ¶æ€ï¼šç¦ç”¨é»˜è®¤åŠ¨ç”» */</span>
::<span class="hljs-built_in">view-transition-old</span>(*) {
  <span class="hljs-attribute">animation</span>: none;
}
<span class="hljs-comment">/* æ–°çŠ¶æ€ï¼šåº”ç”¨è£å‰ªæ‰©æ•£åŠ¨ç”» */</span>
::<span class="hljs-built_in">view-transition-new</span>(*) {
  <span class="hljs-attribute">animation</span>: clip <span class="hljs-number">0.5s</span> ease-in;
}

<span class="hljs-comment">/* æ§åˆ¶æ–°æ—§çŠ¶æ€çš„å±‚çº§ */</span>
::<span class="hljs-built_in">view-transition-old</span>(root) {
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;
}
::<span class="hljs-built_in">view-transition-new</span>(root) {
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">9999</span>;
}

<span class="hljs-comment">/* æµ…è‰²ä¸»é¢˜åˆ‡æ¢æ—¶ï¼Œåå‘æ’­æ”¾åŠ¨ç”» */</span>
<span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.dark</span>::<span class="hljs-built_in">view-transition-old</span>(*) {
  <span class="hljs-attribute">animation</span>: clip <span class="hljs-number">0.5s</span> ease-in reverse;
}
<span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.dark</span>::<span class="hljs-built_in">view-transition-new</span>(*) {
  <span class="hljs-attribute">animation</span>: none;
}
<span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.dark</span>::<span class="hljs-built_in">view-transition-old</span>(root) {
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">9999</span>;
}
<span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.dark</span>::<span class="hljs-built_in">view-transition-new</span>(root) {
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;
}
</code></pre>
<h4 data-id="heading-8">3.2 åŠ¨æ€è®¡ç®—åŠ¨ç”»å‚æ•°ï¼ˆç‚¹å‡»ä½ç½®+æ‰©æ•£åŠå¾„ï¼‰</h4>
<p>ä¿®æ”¹ç‚¹å‡»äº‹ä»¶å¤„ç†é€»è¾‘ï¼Œå®ç°ï¼š</p>
<ol>
<li>è·å–é¼ æ ‡ç‚¹å‡»ä½ç½®ï¼ˆ<code>clientX</code>/<code>clientY</code>ï¼‰ï¼›</li>
<li>è®¡ç®—è¦†ç›–æ•´ä¸ªè§†çª—çš„æœ€å°åœ†åŠå¾„ï¼›</li>
<li>å°†å‚æ•°èµ‹å€¼ç»™CSSå˜é‡ï¼›</li>
<li>é€šè¿‡View Transition APIè§¦å‘è¿‡æ¸¡åŠ¨ç”»ã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">changeBtn</span> = (<span class="hljs-params">func, $eve</span>) =&gt; {
  <span class="hljs-comment">// 1. è·å–é¼ æ ‡ç‚¹å‡»åæ ‡</span>
  <span class="hljs-keyword">const</span> x = $eve.<span class="hljs-property">clientX</span>;
  <span class="hljs-keyword">const</span> y = $eve.<span class="hljs-property">clientY</span>;
  
  <span class="hljs-comment">// 2. è®¡ç®—è¦†ç›–æ•´ä¸ªè§†çª—çš„æœ€å¤§åœ†åŠå¾„</span>
  <span class="hljs-keyword">const</span> endRadius = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">hypot</span>(
    <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(x, innerWidth - x),  <span class="hljs-comment">// ç‚¹å‡»ç‚¹åˆ°è§†çª—å·¦å³è¾¹ç¼˜çš„æœ€å¤§è·ç¦»</span>
    <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(y, innerHeight - y) <span class="hljs-comment">// ç‚¹å‡»ç‚¹åˆ°è§†çª—ä¸Šä¸‹è¾¹ç¼˜çš„æœ€å¤§è·ç¦»</span>
  );
  
  <span class="hljs-comment">// 3. å°†å‚æ•°èµ‹å€¼ç»™CSSå˜é‡</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--x'</span>, x + <span class="hljs-string">'px'</span>);
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--y'</span>, y + <span class="hljs-string">'px'</span>);
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--r'</span>, endRadius + <span class="hljs-string">'px'</span>);
  
  <span class="hljs-comment">// 4. å…¼å®¹å¤„ç†ï¼šæ”¯æŒView Transitionåˆ™ç”¨APIï¼Œå¦åˆ™ç›´æ¥æ‰§è¡Œ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">startViewTransition</span>) {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">startViewTransition</span>(<span class="hljs-function">() =&gt;</span> {
      func.<span class="hljs-title function_">call</span>(); <span class="hljs-comment">// æ‰§è¡Œä¸»é¢˜åˆ‡æ¢å‡½æ•°</span>
    });
  } <span class="hljs-keyword">else</span> {
    func.<span class="hljs-title function_">call</span>(); <span class="hljs-comment">// é™çº§æ–¹æ¡ˆï¼šæ— åŠ¨ç”»åˆ‡æ¢</span>
  }
};

<span class="hljs-comment">// ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼ˆæ”¹ç”¨changeBtnå¤„ç†ï¼‰</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-title function_">changeBtn</span>(changeTheme, e);
});
</code></pre>
<h2 data-id="heading-9">ä¸‰ã€æ ¸å¿ƒé€»è¾‘æ·±åº¦è§£æ</h2>
<h3 data-id="heading-10">1. åœ†å½¢æ‰©æ•£åŠ¨ç”»çš„åŸç†</h3>
<ul>
<li><code>clip-path: circle(åŠå¾„ at xåæ ‡ yåæ ‡)</code>ï¼šé€šè¿‡è£å‰ªè·¯å¾„å®ç°â€œåªæ˜¾ç¤ºåœ†å½¢åŒºåŸŸå†…çš„å†…å®¹â€ï¼›</li>
<li>åŠ¨ç”»ä»<code>circle(0% at var(--x) var(--y))</code>ï¼ˆç‚¹å‡»ä½ç½®çš„ä¸€ä¸ªç‚¹ï¼‰è¿‡æ¸¡åˆ°<code>circle(var(--r) at var(--x) var(--y))</code>ï¼ˆè¦†ç›–æ•´ä¸ªè§†çª—çš„åœ†ï¼‰ï¼Œè§†è§‰ä¸Šå‘ˆç°â€œä»ç‚¹å‡»ä½ç½®å‘å¤–æ‰©æ•£â€çš„æ•ˆæœï¼›</li>
<li>åˆ‡æ¢æµ…è‰²ä¸»é¢˜æ—¶åå‘æ’­æ”¾åŠ¨ç”»ï¼Œä¿è¯åˆ‡æ¢åŒå‘éƒ½æœ‰æµç•…è¿‡æ¸¡ã€‚</li>
</ul>
<h3 data-id="heading-11">2. View Transition APIçš„å·¥ä½œæµç¨‹</h3>
<ol>
<li>è°ƒç”¨<code>document.startViewTransition(callback)</code>æ—¶ï¼Œæµè§ˆå™¨å…ˆæ•è·å½“å‰é¡µé¢çš„â€œæ—§çŠ¶æ€â€ï¼›</li>
<li>æ‰§è¡Œ<code>callback</code>ä¸­çš„é€»è¾‘ï¼ˆè¿™é‡Œæ˜¯åˆ‡æ¢ä¸»é¢˜ç±»åï¼‰ï¼›</li>
<li>æ•è·é¡µé¢çš„â€œæ–°çŠ¶æ€â€ï¼›</li>
<li>è‡ªåŠ¨åœ¨æ–°æ—§çŠ¶æ€ä¹‹é—´åº”ç”¨å®šä¹‰çš„è¿‡æ¸¡åŠ¨ç”»ï¼›</li>
<li>åŠ¨ç”»å®Œæˆåï¼Œç§»é™¤è¿‡æ¸¡ç›¸å…³çš„ä¸´æ—¶å…ƒç´ ã€‚</li>
</ol>
<h3 data-id="heading-12">3. åŠå¾„è®¡ç®—çš„æ•°å­¦é€»è¾‘</h3>
<p><code>Math.hypot(a, b)</code>ç”¨äºè®¡ç®—ç›´è§’ä¸‰è§’å½¢çš„æ–œè¾¹é•¿åº¦ï¼Œè¿™é‡Œï¼š</p>
<ul>
<li>ä»¥ç‚¹å‡»ç‚¹ä¸ºä¸­å¿ƒï¼Œè®¡ç®—åˆ°è§†çª—å››ä¸ªè§’çš„æœ€å¤§è·ç¦»ï¼ˆå³è¦†ç›–æ•´ä¸ªè§†çª—çš„æœ€å°åœ†åŠå¾„ï¼‰ï¼›</li>
<li>ç¡®ä¿åŠ¨ç”»æ‰©æ•£æ—¶èƒ½å®Œå…¨è¦†ç›–é¡µé¢ï¼Œé¿å…å‡ºç°â€œè£å‰ªä¸å…¨â€çš„é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-13">å››ã€ä¼˜åŒ–ä¸æ‰©å±•ï¼šè®©æ•ˆæœæ›´ç‚«é…·ã€æ›´å…¼å®¹</h2>
<h3 data-id="heading-14">1. å¢å¼ºè§†è§‰ä½“éªŒ</h3>
<ul>
<li>ç»™æŒ‰é’®æ·»åŠ åŸºç¡€æ ·å¼ï¼Œæå‡äº¤äº’æ„Ÿï¼š</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-id">#btn</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span> <span class="hljs-number">2rem</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--text-color);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--bg-color);
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.2s</span> ease;
}
<span class="hljs-selector-id">#btn</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.05</span>);
}
<span class="hljs-selector-id">#btn</span><span class="hljs-selector-pseudo">:active</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.98</span>);
}
</code></pre>
<ul>
<li>ç»™æ ‡é¢˜æ·»åŠ æ ·å¼ï¼Œè®©é¡µé¢æ›´ç¾è§‚ï¼š</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.5rem</span>;
}
</code></pre>
<h3 data-id="heading-15">2. å®Œå–„å…¼å®¹æ€§é™çº§</h3>
<p>å¯¹äºä¸æ”¯æŒView Transition APIçš„æµè§ˆå™¨ï¼Œå¯æ·»åŠ ç®€å•çš„è¿‡æ¸¡åŠ¨ç”»ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é™çº§æ–¹æ¡ˆï¼šæ™®é€šè¿‡æ¸¡ */</span>
<span class="hljs-selector-tag">html</span> {
  <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.5s</span> ease;
}
<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.5s</span> ease, color <span class="hljs-number">0.5s</span> ease;
}
</code></pre>
<h3 data-id="heading-16">3. æ‰©å±•åŠŸèƒ½ï¼šåŠ¨æ€æ›´æ–°æŒ‰é’®æ–‡æœ¬</h3>
<p>æ ¹æ®å½“å‰ä¸»é¢˜çŠ¶æ€ï¼Œä¿®æ”¹æŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateBtnText</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>);
  <span class="hljs-keyword">const</span> isDark = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'html'</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'dark'</span>);
  btn.<span class="hljs-property">textContent</span> = isDark ? <span class="hljs-string">'Switch to Dark Mode'</span> : <span class="hljs-string">'Switch to Light Mode'</span>;
};

<span class="hljs-comment">// åˆå§‹åŒ–æŒ‰é’®æ–‡æœ¬</span>
<span class="hljs-title function_">updateBtnText</span>();

<span class="hljs-comment">// ä¿®æ”¹changeThemeå‡½æ•°ï¼Œæ·»åŠ æ–‡æœ¬æ›´æ–°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">changeTheme</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'html'</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">toggle</span>(<span class="hljs-string">'dark'</span>);
  <span class="hljs-title function_">updateBtnText</span>();
};
</code></pre>
<h2 data-id="heading-17">äº”ã€å®Œæ•´ä»£ç æ•´åˆ</h2>
<p>å°†ä»¥ä¸Šä¼˜åŒ–æ•´åˆï¼Œå¾—åˆ°æœ€ç»ˆçš„å®Œæ•´ä»£ç ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç‚«é…·ä¸»é¢˜åˆ‡æ¢ | View Transition API<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
      <span class="hljs-selector-tag">html</span> {
        <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#000</span>;
        <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#fff</span>;
        <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.5s</span> ease;
      }
      <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.dark</span> {
        <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#fff</span>;
        <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#000</span>;
      }

      ::<span class="hljs-built_in">view-transition-old</span>(*) {
        <span class="hljs-attribute">animation</span>: none;
      }
      ::<span class="hljs-built_in">view-transition-new</span>(*) {
        <span class="hljs-attribute">animation</span>: clip <span class="hljs-number">0.5s</span> ease-in;
      }
      ::<span class="hljs-built_in">view-transition-old</span>(root) {
        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;
      }
      ::<span class="hljs-built_in">view-transition-new</span>(root) {
        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">9999</span>;
      }
      <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.dark</span>::<span class="hljs-built_in">view-transition-old</span>(*) {
        <span class="hljs-attribute">animation</span>: clip <span class="hljs-number">0.5s</span> ease-in reverse;
      }
      <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.dark</span>::<span class="hljs-built_in">view-transition-new</span>(*) {
        <span class="hljs-attribute">animation</span>: none;
      }
      <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.dark</span>::<span class="hljs-built_in">view-transition-old</span>(root) {
        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">9999</span>;
      }
      <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.dark</span>::<span class="hljs-built_in">view-transition-new</span>(root) {
        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;
      }

      <span class="hljs-keyword">@keyframes</span> clip {
        <span class="hljs-selector-tag">from</span> {
          <span class="hljs-attribute">clip-path</span>: <span class="hljs-built_in">circle</span>(<span class="hljs-number">0%</span> at <span class="hljs-built_in">var</span>(--x) <span class="hljs-built_in">var</span>(--y));
        }
        <span class="hljs-selector-tag">to</span> {
          <span class="hljs-attribute">clip-path</span>: <span class="hljs-built_in">circle</span>(<span class="hljs-built_in">var</span>(--r) at <span class="hljs-built_in">var</span>(--x) <span class="hljs-built_in">var</span>(--y));
        }
      }

      <span class="hljs-selector-tag">body</span> {
        <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--bg-color);
        <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color);
        <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">flex-direction</span>: column;
        <span class="hljs-attribute">align-items</span>: center;
        <span class="hljs-attribute">justify-content</span>: center;
        <span class="hljs-attribute">gap</span>: <span class="hljs-number">2rem</span>;
        <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.5s</span> ease, color <span class="hljs-number">0.5s</span> ease;
      }

      <span class="hljs-selector-tag">h1</span> {
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.5rem</span>;
      }

      <span class="hljs-selector-id">#btn</span> {
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span> <span class="hljs-number">2rem</span>;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
        <span class="hljs-attribute">border</span>: none;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--text-color);
        <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--bg-color);
        <span class="hljs-attribute">cursor</span>: pointer;
        <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.2s</span> ease;
      }

      <span class="hljs-selector-id">#btn</span><span class="hljs-selector-pseudo">:hover</span> {
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.05</span>);
      }

      <span class="hljs-selector-id">#btn</span><span class="hljs-selector-pseudo">:active</span> {
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.98</span>);
      }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Dynamic Theme Transition<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"btn"</span>&gt;</span>Switch to Light Mode<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeTheme</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'html'</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">toggle</span>(<span class="hljs-string">'dark'</span>);
        <span class="hljs-title function_">updateBtnText</span>();
      };

      <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateBtnText</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>);
        <span class="hljs-keyword">const</span> isDark = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'html'</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'dark'</span>);
        btn.<span class="hljs-property">textContent</span> = isDark ? <span class="hljs-string">'Switch to Dark Mode'</span> : <span class="hljs-string">'Switch to Light Mode'</span>;
      };

      <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeBtn</span> = (<span class="hljs-params">func, $eve</span>) =&gt; {
        <span class="hljs-keyword">const</span> x = $eve.<span class="hljs-property">clientX</span>;
        <span class="hljs-keyword">const</span> y = $eve.<span class="hljs-property">clientY</span>;
        <span class="hljs-keyword">const</span> endRadius = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">hypot</span>(
          <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(x, innerWidth - x),
          <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(y, innerHeight - y),
        );
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--x'</span>, x + <span class="hljs-string">'px'</span>);
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--y'</span>, y + <span class="hljs-string">'px'</span>);
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--r'</span>, endRadius + <span class="hljs-string">'px'</span>);
        
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">startViewTransition</span>) {
          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">startViewTransition</span>(<span class="hljs-function">() =&gt;</span> {
            func.<span class="hljs-title function_">call</span>();
          });
        } <span class="hljs-keyword">else</span> {
          func.<span class="hljs-title function_">call</span>();
        }
      };

      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
        <span class="hljs-title function_">changeBtn</span>(changeTheme, e);
      });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-18">å…­ã€æ€»ç»“ä¸æ‹“å±•</h2>
<h3 data-id="heading-19">1. æ ¸å¿ƒæ”¶è·</h3>
<ul>
<li>CSSå˜é‡æ˜¯å®ç°ä¸»é¢˜åˆ‡æ¢çš„é«˜æ•ˆæ–¹å¼ï¼Œä¾¿äºç»´æŠ¤å’ŒåŠ¨æ€ä¿®æ”¹ï¼›</li>
<li>View Transition APIèƒ½è½»æ¾å®ç°â€œçŠ¶æ€è¿‡æ¸¡â€ç±»åŠ¨ç”»ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†æ–°æ—§çŠ¶æ€ï¼›</li>
<li>ç»“åˆé¼ æ ‡ä½ç½®è®¡ç®—ï¼Œå¯å®ç°â€œè·Ÿéšç‚¹å‡»ä½ç½®æ‰©æ•£â€çš„æ²‰æµ¸å¼åŠ¨ç”»æ•ˆæœï¼›</li>
<li>å…¼å®¹æ€§é™çº§æ˜¯å‰ç«¯å¼€å‘çš„å¿…è¦è€ƒè™‘ï¼Œä¿è¯ä¸åŒæµè§ˆå™¨çš„åŸºç¡€ä½“éªŒã€‚</li>
</ul>
<h3 data-id="heading-20">2. æ‹“å±•æ–¹å‘</h3>
<ul>
<li>å¢åŠ æ›´å¤šä¸»é¢˜ç»´åº¦ï¼šå¦‚æŒ‰é’®è‰²ã€è¾¹æ¡†è‰²ã€é˜´å½±è‰²ç­‰ï¼Œè®©ä¸»é¢˜åˆ‡æ¢æ›´å®Œæ•´ï¼›</li>
<li>ä¼˜åŒ–åŠ¨ç”»æ›²çº¿ï¼šä½¿ç”¨<code>cubic-bezier</code>è‡ªå®šä¹‰ç¼“åŠ¨å‡½æ•°ï¼Œè®©åŠ¨ç”»æ›´ä¸æ»‘ï¼›</li>
<li>æ·»åŠ é¢å¤–äº¤äº’ï¼šå¦‚é¼ æ ‡ç§»åŠ¨æ—¶çš„è§†è§‰åé¦ˆã€ä¸»é¢˜åˆ‡æ¢åçš„å¾®åŠ¨ç”»ï¼›</li>
<li>é€‚é…ç§»åŠ¨ç«¯ï¼šè°ƒæ•´å­—ä½“å¤§å°ã€æŒ‰é’®å°ºå¯¸ï¼Œä¿è¯å°å±ä½“éªŒã€‚</li>
</ul>
<p>é€šè¿‡æœ¬æ–‡çš„æ€è·¯ï¼Œä¸ä»…èƒ½å®ç°ç‚«é…·çš„ä¸»é¢˜åˆ‡æ¢æ•ˆæœï¼Œæ›´èƒ½ç†è§£View Transition APIçš„æ ¸å¿ƒæ€æƒ³â€”â€”è®©â€œçŠ¶æ€å˜åŒ–â€çš„è§†è§‰è¿‡æ¸¡æ›´ç®€å•ã€æ›´è‡ªç„¶ã€‚è¿™ç§æ€è·¯ä¹Ÿå¯è¿ç§»åˆ°é¡µé¢è·¯ç”±åˆ‡æ¢ã€å…ƒç´ æ˜¾éšç­‰åœºæ™¯ï¼Œå¤§å¹…æå‡å‰ç«¯äº¤äº’çš„è´¨æ„Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[android activityå¯åŠ¨æµç¨‹ å­¦ä¹ ç¬”è®°]]></title>    <link>https://juejin.cn/post/7591389489411457065</link>    <guid>https://juejin.cn/post/7591389489411457065</guid>    <pubDate>2026-01-04T06:38:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591389489411457065" data-draft-id="7591389489411391529" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="android activityå¯åŠ¨æµç¨‹ å­¦ä¹ ç¬”è®°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-04T06:38:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒæºxinyuan"/> <meta itemprop="url" content="https://juejin.cn/user/4283353029151694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            android activityå¯åŠ¨æµç¨‹ å­¦ä¹ ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4283353029151694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒæºxinyuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T06:38:59.000Z" title="Sun Jan 04 2026 06:38:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Android Activity å¯åŠ¨æµç¨‹æ˜¯ä¸€ä¸ªæ¶‰åŠ <strong>åº”ç”¨è¿›ç¨‹ã€ç³»ç»ŸæœåŠ¡ã€Binder IPC é€šä¿¡</strong> çš„å¤æ‚è¿‡ç¨‹ã€‚ä»¥ä¸‹æ˜¯ç®€åŒ–çš„æ ¸å¿ƒæ­¥éª¤ï¼š</p>
<h2 data-id="heading-0">ä¸€ã€åº”ç”¨è¿›ç¨‹å†…å¯åŠ¨ï¼ˆåŒä¸€è¿›ç¨‹ï¼‰</h2>
<h3 data-id="heading-1">1. è°ƒç”¨ startActivity()</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨æˆ·ä»£ç </span>
startActivity(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(<span class="hljs-built_in">this</span>, TargetActivity.class));

<span class="hljs-comment">// å®é™…è°ƒç”¨é“¾</span>
startActivity() â†’ startActivityForResult() 
â†’ Instrumentation.execStartActivity()
</code></pre>
<h3 data-id="heading-2">2. é€šè¿‡ Binder é€šçŸ¥ AMS</h3>
<ul>
<li><strong>Instrumentation</strong> é€šè¿‡ Binder è°ƒç”¨ <strong>ActivityManagerService(AMS)</strong> çš„ <code>startActivity()</code></li>
<li>å½“å‰ Activity çš„ <code>onPause()</code> è¢«è°ƒç”¨</li>
</ul>
<h2 data-id="heading-3">äºŒã€ç³»ç»ŸæœåŠ¡å¤„ç†é˜¶æ®µ</h2>
<h3 data-id="heading-4">3. AMS å¤„ç†æµç¨‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// AMS ä¸»è¦é€»è¾‘</span>
ActivityManagerService.startActivity()
â†’ ActivityStarter.startActivityMayWait()
â†’ ActivityStarter.startActivity()
â†’ ActivityStarter.startActivityUnchecked()
</code></pre>
<p><strong>AMS ä¸»è¦å·¥ä½œï¼š</strong></p>
<ul>
<li>è§£æ Intentï¼ˆåŒ¹é… Activityï¼‰</li>
<li>æƒé™æ£€æŸ¥</li>
<li>è¿›ç¨‹æ£€æŸ¥ï¼ˆç›®æ ‡ Activity æ‰€åœ¨è¿›ç¨‹æ˜¯å¦å­˜åœ¨ï¼‰</li>
<li>åˆ›å»º/å¤ç”¨ä»»åŠ¡æ ˆï¼ˆTaskï¼‰</li>
<li>å†³å®šå¯åŠ¨æ¨¡å¼ï¼ˆstandardã€singleTopã€singleTaskã€singleInstanceï¼‰</li>
</ul>
<h3 data-id="heading-5">4. å¤„ç†ç›®æ ‡è¿›ç¨‹</h3>
<ul>
<li><strong>æƒ…å†µA</strong>ï¼šç›®æ ‡ Activity æ‰€åœ¨è¿›ç¨‹å·²å­˜åœ¨
<ul>
<li>ç›´æ¥é‡ç”¨è¿›ç¨‹</li>
</ul>
</li>
<li><strong>æƒ…å†µB</strong>ï¼šè¿›ç¨‹ä¸å­˜åœ¨
<ul>
<li>AMS é€šè¿‡ Socket é€šçŸ¥ <strong>Zygote è¿›ç¨‹</strong> fork æ–°è¿›ç¨‹</li>
<li>æ–°è¿›ç¨‹å¯åŠ¨åï¼Œæ‰§è¡Œ <code>ActivityThread.main()</code></li>
</ul>
</li>
</ul>
<h2 data-id="heading-6">ä¸‰ã€ç›®æ ‡è¿›ç¨‹åˆå§‹åŒ–</h2>
<h3 data-id="heading-7">5. æ–°è¿›ç¨‹åˆå§‹åŒ–</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ActivityThread.main()</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    Looper.prepareMainLooper();  <span class="hljs-comment">// åˆ›å»ºä¸»çº¿ç¨‹Looper</span>
    <span class="hljs-type">ActivityThread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActivityThread</span>();
    thread.attach(<span class="hljs-literal">false</span>);        <span class="hljs-comment">// ç»‘å®šåˆ°AMS</span>
    Looper.loop();
}
</code></pre>
<h3 data-id="heading-8">6. ç»‘å®šåˆ° AMS</h3>
<ul>
<li><code>ActivityThread.attach()</code> é€šè¿‡ Binder è°ƒç”¨ <code>AMS.attachApplication()</code></li>
<li>AMS å‘é€ <strong>LAUNCH_ACTIVITY</strong> äº‹åŠ¡ç»™ç›®æ ‡è¿›ç¨‹</li>
</ul>
<h2 data-id="heading-9">å››ã€Activity å®ä¾‹åŒ–ä¸ç”Ÿå‘½å‘¨æœŸ</h2>
<h3 data-id="heading-10">7. å¤„ç†å¯åŠ¨äº‹åŠ¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ActivityThread å¤„ç†æ¶ˆæ¯</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">H</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Handler</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message msg)</span> {
        <span class="hljs-keyword">case</span> LAUNCH_ACTIVITY:
            handleLaunchActivity(r);
            <span class="hljs-keyword">break</span>;
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleLaunchActivity</span><span class="hljs-params">(ActivityClientRecord r)</span> {
    <span class="hljs-comment">// 1. åˆ›å»º Activity å®ä¾‹</span>
    <span class="hljs-type">Activity</span> <span class="hljs-variable">activity</span> <span class="hljs-operator">=</span> mInstrumentation.newActivity(
        cl, component.getClassName(), r.intent);
    
    <span class="hljs-comment">// 2. åˆ›å»º Applicationï¼ˆå¦‚æœæœªåˆ›å»ºï¼‰</span>
    <span class="hljs-type">Application</span> <span class="hljs-variable">app</span> <span class="hljs-operator">=</span> r.packageInfo.makeApplication(<span class="hljs-literal">false</span>, mInstrumentation);
    
    <span class="hljs-comment">// 3. è°ƒç”¨ attach()</span>
    activity.attach(appContext, <span class="hljs-built_in">this</span>, ...);
    
    <span class="hljs-comment">// 4. è°ƒç”¨ç”Ÿå‘½å‘¨æœŸ</span>
    mInstrumentation.callActivityOnCreate(activity, r.state);
    <span class="hljs-comment">// â†’ activity.onCreate()</span>
    
    handleResumeActivity();  <span class="hljs-comment">// â†’ onStart() â†’ onResume()</span>
}
</code></pre>
<h3 data-id="heading-11">8. å®Œæ•´ç”Ÿå‘½å‘¨æœŸè°ƒç”¨</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-number">1</span>. ç›®æ ‡è¿›ç¨‹ï¼š<span class="hljs-built_in">onCreate</span>()
<span class="hljs-number">2</span>. ç›®æ ‡è¿›ç¨‹ï¼š<span class="hljs-built_in">onStart</span>()
<span class="hljs-number">3</span>. ç›®æ ‡è¿›ç¨‹ï¼š<span class="hljs-built_in">onResume</span>()
<span class="hljs-number">4</span>. åŸActivityï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼š<span class="hljs-built_in">onPause</span>() â†’ <span class="hljs-built_in">onStop</span>()
</code></pre>
<h2 data-id="heading-12">äº”ã€å…³é”®ç»„ä»¶è§’è‰²</h2>

































<table><thead><tr><th>ç»„ä»¶</th><th>èŒè´£</th></tr></thead><tbody><tr><td><strong>ActivityManagerService(AMS)</strong></td><td>ç³»ç»ŸæœåŠ¡ï¼Œç»Ÿä¸€è°ƒåº¦æ‰€æœ‰ Activity</td></tr><tr><td><strong>ActivityThread</strong></td><td>åº”ç”¨ä¸»çº¿ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸€ä¸ªå®ä¾‹</td></tr><tr><td><strong>Instrumentation</strong></td><td>ç›‘æ§åº”ç”¨ä¸ç³»ç»Ÿçš„äº¤äº’</td></tr><tr><td><strong>ApplicationThread</strong></td><td>Binder ä»£ç†ï¼ŒAMS ä¸åº”ç”¨è¿›ç¨‹é€šä¿¡æ¡¥æ¢</td></tr><tr><td><strong>ActivityStarter</strong></td><td>Android 7.0+ï¼Œå¤„ç†å¯åŠ¨é€»è¾‘</td></tr><tr><td><strong>ActivityStack</strong></td><td>ç®¡ç† Activity å›é€€æ ˆ</td></tr></tbody></table>
<h2 data-id="heading-13">å…­ã€å¯åŠ¨æ¨¡å¼å¤„ç†å·®å¼‚</h2>
<h3 data-id="heading-14">Standard æ¨¡å¼</h3>
<ul>
<li>æ¯æ¬¡å¯åŠ¨åˆ›å»ºæ–°å®ä¾‹</li>
</ul>
<h3 data-id="heading-15">SingleTop æ¨¡å¼</h3>
<ul>
<li>æ£€æŸ¥æ ˆé¡¶æ˜¯å¦ä¸ºè¯¥ Activity</li>
<li>å¦‚æœæ˜¯ï¼Œè°ƒç”¨ <code>onNewIntent()</code> è€Œéæ–°å»º</li>
</ul>
<h3 data-id="heading-16">SingleTask æ¨¡å¼</h3>
<ul>
<li>æ£€æŸ¥ä»»åŠ¡æ ˆä¸­æ˜¯å¦å·²å­˜åœ¨</li>
<li>æ¸…é™¤å…¶ä¸Šçš„æ‰€æœ‰ Activity</li>
<li>è°ƒç”¨ <code>onNewIntent()</code></li>
</ul>
<h3 data-id="heading-17">SingleInstance æ¨¡å¼</h3>
<ul>
<li>ç‹¬å ä¸€ä¸ªä»»åŠ¡æ ˆ</li>
</ul>
<h2 data-id="heading-18">ä¸ƒã€æ€§èƒ½ä¼˜åŒ–ç›¸å…³</h2>
<h3 data-id="heading-19">1. å¯åŠ¨è€—æ—¶ç›‘æ§</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¼€å‘è€…æ¨¡å¼æŸ¥çœ‹</span>
adb shell am start -W packagename/activityname

<span class="hljs-comment">// è¾“å‡ºç»“æœ</span>
TotalTime: å¯åŠ¨æ€»è€—æ—¶
WaitTime: AMSå¤„ç†è€—æ—¶
</code></pre>
<h3 data-id="heading-20">2. å¯åŠ¨ä¼˜åŒ–ç­–ç•¥</h3>
<ul>
<li><strong>å†·å¯åŠ¨</strong>ï¼šè¿›ç¨‹ä¸å­˜åœ¨ï¼Œæœ€æ…¢</li>
<li><strong>æ¸©å¯åŠ¨</strong>ï¼šè¿›ç¨‹å­˜åœ¨ï¼ŒActivity è¢«é”€æ¯</li>
<li><strong>çƒ­å¯åŠ¨</strong>ï¼šActivity åœ¨æ ˆä¸­ï¼Œæœ€å¿«</li>
</ul>
<h2 data-id="heading-21">å…«ã€æµç¨‹å›¾ç¤ºæ„</h2>
<pre><code class="hljs language-scss" lang="scss">åº”ç”¨è¿›ç¨‹ <span class="hljs-built_in">startActivity</span>()
        â†“
Binder IPC åˆ° AMS
        â†“
AMS æ£€æŸ¥æƒé™ã€è¿›ç¨‹ã€å¯åŠ¨æ¨¡å¼
        â†“
ç›®æ ‡è¿›ç¨‹å­˜åœ¨ï¼Ÿ â†’ å¦ â†’ Zygote fork æ–°è¿›ç¨‹
        â†“æ˜¯
AMS å‘é€å¯åŠ¨äº‹åŠ¡
        â†“
ç›®æ ‡è¿›ç¨‹å¤„ç†äº‹åŠ¡
        â†“
åˆ›å»º Activity â†’ <span class="hljs-built_in">attach</span>() â†’ ç”Ÿå‘½å‘¨æœŸ
        â†“
WindowManager æ·»åŠ è§†å›¾
        â†“
ç”¨æˆ·çœ‹åˆ°ç•Œé¢
</code></pre>
<h2 data-id="heading-22">æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>Android 10+</strong> å¼•å…¥ <code>ActivityTaskManagerService(ATMS)</code> åˆ†æ‹… AMS å·¥ä½œ</li>
<li><strong>Binder è°ƒç”¨</strong> æ¶‰åŠè¿›ç¨‹é—´é€šä¿¡ï¼Œæ˜¯æ€§èƒ½ç“¶é¢ˆä¹‹ä¸€</li>
<li><strong>ä¸»çº¿ç¨‹æ“ä½œ</strong>ï¼šActivity åˆ›å»ºå’Œç”Ÿå‘½å‘¨æœŸå›è°ƒéƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ</li>
</ol>
<p>ç†è§£æ•´ä¸ªæµç¨‹æœ‰åŠ©äºï¼š</p>
<ul>
<li>ä¼˜åŒ–åº”ç”¨å¯åŠ¨é€Ÿåº¦</li>
<li>å¤„ç†å¤æ‚çš„é¡µé¢è·³è½¬é€»è¾‘</li>
<li>è§£å†³ Activity å¯åŠ¨ç›¸å…³çš„å¼‚å¸¸é—®é¢˜</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“æˆ‘100%æŠŠç¼–ç¨‹äº¤ç»™AIï¼šåœ¨python-officeé¡¹ç›®ä¸­çš„6ä¸ªå®æˆ˜åœºæ™¯ä¸ä»£ç æ¼”ç¤º]]></title>    <link>https://juejin.cn/post/7591013450525196340</link>    <guid>https://juejin.cn/post/7591013450525196340</guid>    <pubDate>2026-01-04T06:48:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591013450525196340" data-draft-id="7590778284759072803" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“æˆ‘100%æŠŠç¼–ç¨‹äº¤ç»™AIï¼šåœ¨python-officeé¡¹ç›®ä¸­çš„6ä¸ªå®æˆ˜åœºæ™¯ä¸ä»£ç æ¼”ç¤º"/> <meta itemprop="keywords" content="Trae,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-04T06:48:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜æ™šæ«"/> <meta itemprop="url" content="https://juejin.cn/user/2327002779758760"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“æˆ‘100%æŠŠç¼–ç¨‹äº¤ç»™AIï¼šåœ¨python-officeé¡¹ç›®ä¸­çš„6ä¸ªå®æˆ˜åœºæ™¯ä¸ä»£ç æ¼”ç¤º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2327002779758760/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜æ™šæ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T06:48:53.000Z" title="Sun Jan 04 2026 06:48:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eac49107d3ed4166bae03802c3240825~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5pma5p6r:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768114133&amp;x-signature=foPTTUloEC1Mz3escjkAMQHeWJY%3D" alt="image.png" loading="lazy"/></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜æ™šæ«ã€‚</p>
<p>è‡ªä»æˆ‘çš„å¼€æºé¡¹ç›® <strong>python-office</strong> åœ¨2025å¹´åˆè¾¾æˆ1000 starçš„é‡Œç¨‹ç¢‘ä»¥æ¥ï¼Œæˆ‘è¶Šæ¥è¶Šæ¸…æ™°åœ°è®¤è¯†åˆ°ï¼Œä¸€ä¸ªé¡¹ç›®çš„æˆé•¿ä¸ä»…åœ¨äºåŠŸèƒ½çš„å †ç§¯ï¼Œæ›´åœ¨äºå¼€å‘æµç¨‹çš„è§„èŒƒä¸é«˜æ•ˆã€‚åœ¨AIæŠ€æœ¯å¸­å·è€Œæ¥çš„ä»Šå¤©ï¼Œæˆ‘å‘ç°è‡ªå·±ç¼–ç¨‹æ—¶è¶Šæ¥è¶Šå¤šçš„å·¥ä½œï¼Œå·²ç»å¯ä»¥å®Œå…¨ä¿¡ä»»åœ°äº¤ç»™AIä¼™ä¼´ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°±ç»“åˆ <strong>python-office</strong> è¿™ä¸ªæˆ‘ä»¬å…±åŒçš„é¡¹ç›®ï¼Œé€šè¿‡å…·ä½“çš„ä»£ç æ¼”ç¤ºï¼Œåˆ†äº«æˆ‘ç°åœ¨100%ç”¨AIæ¥åšçš„6ä»¶äº‹ã€‚è¿™äº›æ”¹å˜ï¼Œè®©æˆ‘çš„å¼€å‘æ•ˆç‡æå‡äº†æ•°å€ï¼Œä¹Ÿè®©é¡¹ç›®çš„è´¨é‡æ›´åŠ ç¨³å®šã€‚</p>
<blockquote>
<p>æœ¬æ–‡ä¸­æ‰€æœ‰AIç¼–ç¨‹çš„å®ç°ï¼Œéƒ½æ˜¯åŸºäºAIç¼–ç¨‹è½¯ä»¶ï¼šTrae</p>
</blockquote>
<h3 data-id="heading-0">1. è„šæœ¬ç¼–å†™ï¼šä»æ¨¡ç³Šéœ€æ±‚åˆ°ä¸€è¡Œå¼å‡½æ•°</h3>
<p>åœ¨ç»´æŠ¤ <code>python-office</code> æ—¶ï¼Œå¾ˆå¤šåŠŸèƒ½çµæ„Ÿæ¥æºäºç²‰ä¸çš„â€œä¸€å¥è¯éœ€æ±‚â€ï¼Œæ¯”å¦‚â€œèƒ½ä¸èƒ½æ‰¹é‡åˆå¹¶PDFï¼Ÿâ€ã€â€œå¦‚ä½•ä¸€é”®ç»™ExcelåŠ è¡¨å¤´ï¼Ÿâ€ã€‚è¿‡å»ï¼Œæˆ‘éœ€è¦è‡ªå·±è®¾è®¡å‡½æ•°ç­¾åã€é€»è¾‘å’Œå¼‚å¸¸å¤„ç†ã€‚ç°åœ¨ï¼Œæˆ‘å°†éœ€æ±‚æè¿°ç›´æ¥æŠ›ç»™AIã€‚</p>
<p><strong>AIå®æˆ˜åœºæ™¯</strong>ï¼šä¸º <code>pofile</code> æ¨¡å—ï¼ˆæ–‡ä»¶å¤„ç†ï¼‰å¢åŠ ä¸€ä¸ªâ€œæ™ºèƒ½æ•´ç†æ¡Œé¢â€çš„åŠŸèƒ½ã€‚</p>
<p><strong>æˆ‘çš„éœ€æ±‚æç¤º</strong>ï¼š</p>
<blockquote>
<p>â€œè¯·ç¼–å†™ä¸€ä¸ªPythonå‡½æ•°ï¼Œå‘½åä¸º <code>tidy_desktop</code>ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªç›®æ ‡è·¯å¾„å‚æ•°ï¼ˆé»˜è®¤æ˜¯ç”¨æˆ·æ¡Œé¢ï¼‰ï¼Œèƒ½è‡ªåŠ¨è¯†åˆ«è¯¥è·¯å¾„ä¸‹æ‰€æœ‰æ–‡ä»¶çš„ç±»å‹ï¼ˆå¦‚å›¾ç‰‡ã€æ–‡æ¡£ã€å‹ç¼©åŒ…ï¼‰ï¼Œå¹¶åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶å¤¹ï¼ˆå¦‚Imagesã€Documentsã€Archivesï¼‰ï¼Œå°†æ–‡ä»¶ç§»å…¥å…¶ä¸­ã€‚è¯·å¤„ç†å¥½è·¯å¾„ä¸å­˜åœ¨çš„æƒ…å†µï¼Œå¹¶è¿”å›æ•´ç†çš„æŠ¥å‘Šä¿¡æ¯ã€‚å‡½æ•°é£æ ¼éœ€ä¸ python-office é¡¹ç›®ä¸€è‡´ï¼Œä¿æŒç®€å•çš„ä¸€è¡Œè°ƒç”¨é£æ ¼ã€‚â€</p>
</blockquote>
<p><strong>AIç”Ÿæˆçš„ä»£ç éª¨æ¶ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½äºï¼špython-office/office/file/tidy.py</span>
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> shutil
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path

<span class="hljs-keyword">def</span> <span class="hljs-title function_">tidy_desktop</span>(<span class="hljs-params">target_dir=<span class="hljs-literal">None</span></span>):
    <span class="hljs-string">"""
    ä¸€é”®æ•´ç†æŒ‡å®šç›®å½•ï¼ˆå¦‚æ¡Œé¢ï¼‰ï¼Œè‡ªåŠ¨æŒ‰æ–‡ä»¶ç±»å‹åˆ†ç±»å­˜æ”¾ã€‚
    
    Args:
        target_dir (str, optional): è¦æ•´ç†çš„ç›®å½•è·¯å¾„ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·çš„æ¡Œé¢ã€‚
    
    Returns:
        str: æ•´ç†ç»“æœçš„æŠ¥å‘Šå­—ç¬¦ä¸²ã€‚
    
    Raises:
        FileNotFoundError: å½“ç›®æ ‡ç›®å½•ä¸å­˜åœ¨æ—¶ã€‚
    """</span>
    <span class="hljs-keyword">if</span> target_dir <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
        target_dir = Path.home() / <span class="hljs-string">'Desktop'</span>
    
    target_path = Path(target_dir)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> target_path.exists():
        <span class="hljs-keyword">raise</span> FileNotFoundError(<span class="hljs-string">f"ç›®æ ‡ç›®å½•ä¸å­˜åœ¨: <span class="hljs-subst">{target_dir}</span>"</span>)
    
    <span class="hljs-comment"># æ–‡ä»¶ç±»å‹æ˜ å°„</span>
    file_type_folders = {
        <span class="hljs-string">'.jpg'</span>: <span class="hljs-string">'Images'</span>, <span class="hljs-string">'.png'</span>: <span class="hljs-string">'Images'</span>, <span class="hljs-string">'.pdf'</span>: <span class="hljs-string">'Documents'</span>,
        <span class="hljs-string">'.docx'</span>: <span class="hljs-string">'Documents'</span>, <span class="hljs-string">'.xlsx'</span>: <span class="hljs-string">'Documents'</span>, <span class="hljs-string">'.zip'</span>: <span class="hljs-string">'Archives'</span>,
        <span class="hljs-comment"># ... å…¶ä»–æ˜ å°„å…³ç³»</span>
    }
    
    report_lines = []
    <span class="hljs-keyword">for</span> file_path <span class="hljs-keyword">in</span> target_path.iterdir():
        <span class="hljs-keyword">if</span> file_path.is_file():
            suffix = file_path.suffix.lower()
            folder_name = file_type_folders.get(suffix, <span class="hljs-string">'Others'</span>)
            folder_path = target_path / folder_name
            folder_path.mkdir(exist_ok=<span class="hljs-literal">True</span>)
            
            shutil.move(<span class="hljs-built_in">str</span>(file_path), <span class="hljs-built_in">str</span>(folder_path / file_path.name))
            report_lines.append(<span class="hljs-string">f"å·²ç§»åŠ¨: <span class="hljs-subst">{file_path.name}</span> -&gt; <span class="hljs-subst">{folder_name}</span>/"</span>)
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">"\n"</span>.join(report_lines) <span class="hljs-keyword">if</span> report_lines <span class="hljs-keyword">else</span> <span class="hljs-string">"ç›®æ ‡ç›®å½•å†…æœªå‘ç°å¯æ•´ç†çš„æ–‡ä»¶ã€‚"</span>
</code></pre>
<p>æˆ‘ä¸å†éœ€è¦è®°å¿† <code>shutil</code>ã€<code>pathlib</code> æ¯ä¸ªæ–¹æ³•çš„ç»†èŠ‚ï¼ŒAIç”Ÿæˆçš„ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ³¨é‡Šå®Œæ•´ï¼Œæˆ‘åªéœ€å…³æ³¨æ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘æ˜ å°„å’Œæœ€ç»ˆçš„æµ‹è¯•éªŒæ”¶ã€‚è¿™è®©æˆ‘èƒ½æ›´ä¸“æ³¨äºæ€è€ƒå¦‚ä½•å°†å¤æ‚åŠŸèƒ½ç®€åŒ–æˆä¸€è¡Œçš„APIï¼Œå°±åƒ <code>python-office</code> è¿½æ±‚çš„é‚£æ ·ï¼š<code>import office; office.file.tidy_desktop()</code>ã€‚</p>
<h3 data-id="heading-1">2. READMEä¸æ–‡æ¡£ï¼šå‘Šåˆ«â€œæç¬”å¿˜å­—â€</h3>
<p>ç»´æŠ¤æ–‡æ¡£æ›¾æ˜¯é¡¹ç›®æœ€å¤§çš„â€œå€ºâ€ã€‚<code>python-office</code> ä½œä¸ºä¸€ä¸ªåŒ…å« <code>poexcel</code>ã€<code>poword</code>ã€<code>popdf</code> ç­‰å¤šä¸ªæ¨¡å—çš„é›†åˆï¼Œæ¯ä¸ªæ–°åŠŸèƒ½çš„åŠ å…¥éƒ½éœ€è¦åŒæ­¥æ›´æ–°æ–‡æ¡£ï¼Œè€—æ—¶è€—åŠ›ã€‚</p>
<p><strong>AIå®æˆ˜åœºæ™¯</strong>ï¼šä¸ºåˆšåˆšæ–°å¢çš„ <code>tidy_desktop</code> å‡½æ•°è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£å’ŒMarkdownç¤ºä¾‹ã€‚</p>
<p><strong>æˆ‘çš„éœ€æ±‚æç¤º</strong>ï¼š</p>
<blockquote>
<p>â€œæ ¹æ®ä¸Šé¢çš„ <code>tidy_desktop</code> å‡½æ•°ä»£ç ï¼Œä¸º python-office é¡¹ç›®çš„æ–‡æ¡£ç”Ÿæˆä»¥ä¸‹å†…å®¹ï¼š</p>
<ol>
<li>ä¸€æ®µæ ‡å‡†çš„Googleé£æ ¼å‡½æ•°è¯´æ˜ï¼ˆå·²åŒ…å«åœ¨ä»£ç ä¸­ï¼‰ã€‚</li>
<li>ä¸€ä¸ªç‹¬ç«‹çš„Markdownæ–‡æ¡£ç‰‡æ®µï¼ŒåŒ…å«åŠŸèƒ½æè¿°ã€å®‰è£…å‘½ä»¤ã€ä½¿ç”¨ç¤ºä¾‹å’Œæ³¨æ„äº‹é¡¹ã€‚â€</li>
</ol>
</blockquote>
<p><strong>AIç”Ÿæˆçš„Markdownæ–‡æ¡£ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## ğŸ“‚ tidy<span class="hljs-emphasis">_desktop - æ™ºèƒ½æ•´ç†æ¡Œé¢æ–‡ä»¶

### åŠŸèƒ½ç®€ä»‹
ä¸€é”®æ•´ç†æ‚¨çš„æ¡Œé¢ï¼ˆæˆ–ä»»ä½•æŒ‡å®šæ–‡ä»¶å¤¹ï¼‰ï¼Œè‡ªåŠ¨å°†æ•£ä¹±çš„æ–‡ä»¶æŒ‰ç±»å‹ï¼ˆå›¾ç‰‡ã€æ–‡æ¡£ã€å‹ç¼©åŒ…ç­‰ï¼‰å½’ç±»åˆ°å¯¹åº”çš„å­æ–‡ä»¶å¤¹ä¸­ï¼Œè®©å·¥ä½œç©ºé—´ç¬é—´æ¢å¤æ•´æ´ã€‚

### å¿«é€Ÿå¼€å§‹
```python
import office

# æ•´ç†å½“å‰ç”¨æˆ·æ¡Œé¢
result = office.file.tidy_</span>desktop()</span>
print(result)

<span class="hljs-section"># æ•´ç†æŒ‡å®šæ–‡ä»¶å¤¹</span>
result = office.file.tidy<span class="hljs-emphasis">_desktop(r"D:\ä¸´æ—¶æ–‡ä»¶")
print(result)
</span></code></pre>
<h3 data-id="heading-2">å‚æ•°è¯´æ˜</h3>
<ul>
<li><code>target_dir</code> (strï¼Œå¯é€‰): éœ€è¦æ•´ç†çš„ç›®å½•è·¯å¾„ã€‚å¦‚æœä¸æä¾›ï¼Œåˆ™é»˜è®¤æ•´ç†å½“å‰ç³»ç»Ÿçš„æ¡Œé¢ç›®å½•ã€‚</li>
</ul>
<h3 data-id="heading-3">æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>è¯¥æ“ä½œä¼š<strong>ç›´æ¥ç§»åŠ¨æ–‡ä»¶</strong>ï¼Œå»ºè®®é¦–æ¬¡ä½¿ç”¨æ—¶å…ˆåœ¨ä¸é‡è¦çš„æ–‡ä»¶å¤¹ä¸Šæµ‹è¯•ã€‚</li>
<li>ç›®å‰æ”¯æŒå¸¸è§æ ¼å¼ï¼Œå¦‚éœ€å¢åŠ ç±»å‹ï¼Œå¯åœ¨ä»£ç çš„ <code>file_type_folders</code> å­—å…¸ä¸­è¡¥å……ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python">
æ›´é‡è¦çš„æ˜¯ï¼ŒAIå¯ä»¥å¸®æˆ‘ç»´æŠ¤é¡¹ç›®çš„ `CONTRIBUTING.md`ã€‚å½“æœ‰æ–°çš„å¼€æºå°ä¼™ä¼´æƒ³å‚ä¸æ—¶ï¼ŒAIèƒ½æ ¹æ®æˆ‘è®¾å®šçš„è§„åˆ™ï¼Œå³æ—¶ç”Ÿæˆæˆ–æ›´æ–°è´¡çŒ®æŒ‡å—ï¼Œä¾‹å¦‚æé†’è´¡çŒ®è€…ï¼šâ€œè¯·åœ¨ `contributors` æ–‡ä»¶å¤¹ä¸‹ï¼Œç”¨ä½ è‡ªå·±çš„GitHubåå­—æ–°å»ºç›®å½•æ¥å­˜æ”¾ä»£ç â€ã€‚

<span class="hljs-comment">### 3. ä»£ç è§„èŒƒæ€§è°ƒæ•´ï¼šç§’çº§ç»Ÿä¸€çš„ä»£ç é£æ ¼</span>

ä¸€ä¸ªå¥åº·çš„å¼€æºé¡¹ç›®éœ€è¦ç»Ÿä¸€çš„ä»£ç é£æ ¼ã€‚åœ¨ `python-office` çš„åç»­è®¡åˆ’ä¸­ï¼Œç¬¬ä¸€é¡¹å°±æ˜¯â€œç»Ÿä¸€å‚æ•°å‘½åï¼Œç»Ÿä¸€ä»£ç é£æ ¼â€ã€‚è¿‡å»ï¼Œæˆ‘é€šè¿‡ `flake8`ã€`black` ç­‰å·¥å…·å¹¶ç»“åˆ `pre-commit` é’©å­åœ¨æäº¤æ—¶æ£€æŸ¥ã€‚ç°åœ¨ï¼ŒAIåœ¨ç¼–ç æ—¶å°±èƒ½å……å½“å®æ—¶é¡¾é—®ã€‚

**AIå®æˆ˜åœºæ™¯**ï¼šå®¡æŸ¥è´¡çŒ®è€…æäº¤çš„ä¸€ä¸ªæ–°åŠŸèƒ½æ¨¡å—ä»£ç ã€‚

**æˆ‘çš„æ“ä½œ**ï¼šå°†è´¡çŒ®è€…æäº¤çš„ä»£ç ç‰‡æ®µç²˜è´´ç»™AIï¼Œå¹¶ç»™å‡ºæŒ‡ä»¤ã€‚

**æˆ‘çš„éœ€æ±‚æç¤º**ï¼š
&gt; â€œè¯·ä»¥PEP <span class="hljs-number">8</span>è§„èŒƒä¸¥æ ¼å®¡æŸ¥ä»¥ä¸‹Pythonä»£ç ï¼ŒæŒ‡å‡ºæ‰€æœ‰ä¸ç¬¦åˆè§„èŒƒçš„åœ°æ–¹ï¼ˆå¦‚å‘½åã€ç©ºæ ¼ã€è¡Œé•¿åº¦ã€æ³¨é‡Šï¼‰ï¼Œå¹¶ç›´æ¥è¾“å‡ºä¿®æ­£åçš„ä»£ç ã€‚é¡¹ç›®è¦æ±‚å‡½æ•°åç”¨å°å†™å­—æ¯åŠ ä¸‹åˆ’çº¿ï¼Œç±»å‹æç¤ºå°½é‡å®Œæ•´ã€‚â€
&gt;

**AIçš„å®¡æŸ¥ä¸ä¿®æ­£ç¤ºä¾‹**ï¼š
```python
<span class="hljs-comment"># è´¡çŒ®è€…æäº¤çš„åŸå§‹ä»£ç ï¼ˆå¯èƒ½å­˜åœ¨ä¸è§„èŒƒï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">FileProcess</span>(<span class="hljs-params">filepath, num</span>):
    <span class="hljs-string">'''å¤„ç†æ–‡ä»¶'''</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filepath,<span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> f:
        data=f.read()
    <span class="hljs-comment">#åšä¸€äº›è®¡ç®—</span>
    result=data.count(<span class="hljs-string">'a'</span>)*num
    <span class="hljs-keyword">return</span> result

<span class="hljs-comment"># AIå®¡æŸ¥åä¿®æ­£çš„ä»£ç </span>
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Union</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_file_count</span>(<span class="hljs-params">file_path: <span class="hljs-type">Union</span>[<span class="hljs-built_in">str</span>, Path], multiplier: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:
    <span class="hljs-string">"""
    ç»Ÿè®¡æŒ‡å®šæ–‡ä»¶ä¸­å­—æ¯â€˜aâ€™çš„å‡ºç°æ¬¡æ•°ï¼Œå¹¶ä¹˜ä»¥ç»™å®šçš„å€æ•°ã€‚

    Args:
        file_path: è¦å¤„ç†çš„æ–‡ä»¶è·¯å¾„ã€‚
        multiplier: ç»“æœä¹˜æ•°ã€‚

    Returns:
        å¤„ç†åçš„æ•´æ•°å€¼ã€‚
    """</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> file:
        data = file.read()
    
    <span class="hljs-comment"># ç»Ÿè®¡å­—æ¯â€˜aâ€™çš„å‡ºç°æ¬¡æ•°</span>
    count_a = data.count(<span class="hljs-string">'a'</span>)
    result = count_a * multiplier
    <span class="hljs-keyword">return</span> result
</code></pre>
<p>AIä¸ä»…ä¿®æ­£äº†å‘½åï¼ˆè›‡å½¢å‘½åæ³•ï¼‰ã€ç©ºæ ¼ã€æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆä½¿ç”¨ä¸‰å¼•å·ï¼‰ï¼Œè¿˜ä¸»åŠ¨æ·»åŠ äº†ç±»å‹æç¤ºå’Œæ›´æ˜ç¡®çš„ç¼–ç å‚æ•°ã€‚è¿™è®©æˆ‘åœ¨ä»£ç åˆå¹¶å‰å°±èƒ½å¿«é€Ÿå®Œæˆåˆæ­¥çš„è´¨é‡æŠŠå…³ï¼Œç¡®ä¿é¡¹ç›®ä»£ç åº“çš„æ•´æ´åº¦ã€‚</p>
<h3 data-id="heading-4">4. å•å…ƒæµ‹è¯•ï¼šå‘Šåˆ«æ€ç»´æ­»è§’ï¼Œè¿½æ±‚é«˜è¦†ç›–ç‡</h3>
<p>éšç€ <code>python-office</code> ä¸‹è½½é‡è¶…è¿‡26ä¸‡æ¬¡ï¼ŒåŠŸèƒ½çš„ç¨³å®šæ€§è‡³å…³é‡è¦ã€‚ç¼–å†™å…¨é¢çš„å•å…ƒæµ‹è¯•æ˜¯ä¿è¯ï¼Œä½†æ„æ€å„ç§è¾¹ç•Œæƒ…å†µï¼ˆå¼‚å¸¸è¾“å…¥ã€æç«¯å€¼ï¼‰éå¸¸æ¯ç‡¥ã€‚</p>
<p><strong>AIå®æˆ˜åœºæ™¯</strong>ï¼šä¸º <code>poword</code> æ¨¡å—ä¸­ä¸€ä¸ªåˆå¹¶æ–‡æ¡£çš„å‡½æ•°ç”Ÿæˆå•å…ƒæµ‹è¯•ã€‚</p>
<p><strong>æˆ‘çš„éœ€æ±‚æç¤º</strong>ï¼š</p>
<blockquote>
<p>â€œä¸ºä»¥ä¸‹å‡½æ•°ç¼–å†™å®Œæ•´çš„ <code>pytest</code> å•å…ƒæµ‹è¯•ã€‚å‡½æ•°ï¼š<code>merge_docs(doc_paths: List[str], output_path: str) -&gt; bool</code>ã€‚è¯·è¦†ç›–ï¼šæ­£å¸¸åˆå¹¶ã€è¾“å…¥åˆ—è¡¨ä¸ºç©ºã€æ–‡ä»¶ä¸å­˜åœ¨ã€è¾“å‡ºè·¯å¾„æ— æƒé™ã€åˆå¹¶åå†…å®¹éªŒè¯ç­‰åœºæ™¯ã€‚ä½¿ç”¨ <code>pytest.fixture</code> ç®¡ç†ä¸´æ—¶æ–‡ä»¶ã€‚â€</p>
</blockquote>
<p><strong>AIç”Ÿæˆçš„æµ‹è¯•ä»£ç éª¨æ¶</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½äºï¼štests/test_word/test_merge.py</span>
<span class="hljs-keyword">import</span> pytest
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> poword <span class="hljs-keyword">import</span> merge_docs

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TestMergeDocs</span>:
    <span class="hljs-string">"""æµ‹è¯•æ–‡æ¡£åˆå¹¶åŠŸèƒ½"""</span>
    
<span class="hljs-meta">    @pytest.fixture</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">sample_docs</span>(<span class="hljs-params">self, tmp_path</span>):
        <span class="hljs-string">"""åˆ›å»ºä¸¤ä¸ªä¸´æ—¶Wordæ–‡æ¡£ä½œä¸ºæµ‹è¯•å¤¹å…·"""</span>
        doc1 = tmp_path / <span class="hljs-string">"doc1.docx"</span>
        doc2 = tmp_path / <span class="hljs-string">"doc2.docx"</span>
        <span class="hljs-comment"># æ­¤å¤„AIä¼šç”Ÿæˆåˆ›å»ºç®€å•Wordæ–‡æ¡£çš„ä»£ç ï¼ˆä½¿ç”¨python-docxï¼‰</span>
        <span class="hljs-comment"># ...</span>
        <span class="hljs-keyword">return</span> [<span class="hljs-built_in">str</span>(doc1), <span class="hljs-built_in">str</span>(doc2)]
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_merge_success</span>(<span class="hljs-params">self, sample_docs, tmp_path</span>):
        <span class="hljs-string">"""æµ‹è¯•æ­£å¸¸åˆå¹¶åœºæ™¯"""</span>
        output = tmp_path / <span class="hljs-string">"merged.docx"</span>
        result = merge_docs(sample_docs, <span class="hljs-built_in">str</span>(output))
        <span class="hljs-keyword">assert</span> result <span class="hljs-keyword">is</span> <span class="hljs-literal">True</span>
        <span class="hljs-keyword">assert</span> output.exists()
        <span class="hljs-comment"># æ­¤å¤„å¯è¿›ä¸€æ­¥éªŒè¯åˆå¹¶åçš„é¡µæ•°æˆ–å†…å®¹</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_merge_empty_list</span>(<span class="hljs-params">self, tmp_path</span>):
        <span class="hljs-string">"""æµ‹è¯•è¾“å…¥ä¸ºç©ºåˆ—è¡¨çš„æƒ…å†µ"""</span>
        output = tmp_path / <span class="hljs-string">"output.docx"</span>
        <span class="hljs-comment"># å‡è®¾å‡½æ•°åº”è¿”å›Falseæˆ–æŠ›å‡ºç‰¹å®šå¼‚å¸¸</span>
        result = merge_docs([], <span class="hljs-built_in">str</span>(output))
        <span class="hljs-keyword">assert</span> result <span class="hljs-keyword">is</span> <span class="hljs-literal">False</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_merge_nonexistent_file</span>(<span class="hljs-params">self, tmp_path</span>):
        <span class="hljs-string">"""æµ‹è¯•è¾“å…¥åŒ…å«ä¸å­˜åœ¨çš„æ–‡ä»¶"""</span>
        fake_file = tmp_path / <span class="hljs-string">"fake.docx"</span>
        output = tmp_path / <span class="hljs-string">"output.docx"</span>
        <span class="hljs-keyword">with</span> pytest.raises(FileNotFoundError):
            merge_docs([<span class="hljs-built_in">str</span>(fake_file)], <span class="hljs-built_in">str</span>(output))
    
    <span class="hljs-comment"># ... å…¶ä»–æµ‹è¯•ç”¨ä¾‹</span>
</code></pre>
<p>AIç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹è€ƒè™‘åˆ°äº†æˆ‘å¯èƒ½å¿½ç•¥çš„è§’è½ï¼Œæ¯”å¦‚â€œè¾“å‡ºè·¯å¾„æ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„ç›®å½•è€Œéæ–‡ä»¶â€ã€‚é€šè¿‡è®©AIç”Ÿæˆæµ‹è¯•éª¨æ¶ï¼Œæˆ‘å†å¡«å……å…·ä½“çš„æ–­è¨€ç»†èŠ‚ï¼Œå•å…ƒæµ‹è¯•çš„è¦†ç›–ç‡å’Œå¯é æ€§å¤§å¤§æå‡ï¼Œè¿™æ­£æ˜¯é¡¹ç›®â€œå¢åŠ å•å…ƒæµ‹è¯•è¦†ç›–ç‡â€è®¡åˆ’æ‰€éœ€è¦çš„ã€‚</p>
<h3 data-id="heading-5">5. Gitæ“ä½œï¼šæ™ºèƒ½åŒ–çš„ç‰ˆæœ¬ç®¡ç†åŠ©æ‰‹</h3>
<p>æ—¥å¸¸å¼€å‘ä¸­ï¼Œ<code>git commit -m "update"</code> è¿™ç§ç³Ÿç³•çš„æäº¤ä¿¡æ¯å±¡è§ä¸é²œã€‚åœ¨å¸¦é¢†å¼€æºå°ä¼™ä¼´å…±åŒç»´æŠ¤ <code>python-office</code> æ—¶ï¼Œæ¸…æ™°çš„æäº¤å†å²å’Œåˆ†æ”¯ç®¡ç†æ˜¯å…³é”®ã€‚</p>
<p><strong>AIå®æˆ˜åœºæ™¯</strong>ï¼šæ™ºèƒ½ç”Ÿæˆç¬¦åˆçº¦å®šçš„æäº¤ä¿¡æ¯ï¼Œå¹¶åˆ†æä»£ç å·®å¼‚ã€‚</p>
<p><strong>æˆ‘çš„æ“ä½œ</strong>ï¼šåœ¨è¿è¡Œ <code>git diff</code> åï¼Œå°†å˜æ›´å†…å®¹ç²˜è´´ç»™AIã€‚</p>
<p><strong>æˆ‘çš„éœ€æ±‚æç¤º</strong>ï¼š</p>
<blockquote>
<p>â€œåˆ†æä»¥ä¸‹Gitä»£ç å·®å¼‚ï¼ˆdiffï¼‰ï¼Œä¸ºæˆ‘ç”Ÿæˆä¸€æ¡ç¬¦åˆçº¦å®šå¼æäº¤ï¼ˆConventional Commitsï¼‰è§„èŒƒçš„é«˜è´¨é‡æäº¤ä¿¡æ¯ã€‚æ ¼å¼ä¸ºï¼š<code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</code>ã€‚å˜æ›´å†…å®¹æ˜¯ä¸º <code>poexcel</code> æ¨¡å—çš„è¯»å–åŠŸèƒ½å¢åŠ äº†å¯¹CSVæ–‡ä»¶æ ¼å¼çš„æ”¯æŒã€‚â€</p>
</blockquote>
<p><strong>AIç”Ÿæˆçš„æäº¤ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">feat(poexcel): add support for reading CSV files in excel.read function

<span class="hljs-bullet">-</span> Extend <span class="hljs-code">`excel.read`</span> function to automatically detect and parse <span class="hljs-code">`.csv`</span> files.
<span class="hljs-bullet">-</span> Add <span class="hljs-code">`encoding`</span> parameter for CSV files to handle different text encodings.
<span class="hljs-bullet">-</span> Update related documentation and examples.
</code></pre>
<p>æ­¤å¤–ï¼Œåœ¨è®¡åˆ’ä¸º <code>python-office</code> å¢åŠ è¯¸å¦‚â€œç½‘ç«™å¿«æ·æ­å»ºâ€ç­‰æ–°æ¨¡å—æ—¶ï¼Œæˆ‘ä¼šè®©AIå¸®åŠ©åˆ†æä»ä¸»åˆ†æ”¯åˆ›å»ºç‰¹æ€§åˆ†æ”¯çš„ç­–ç•¥ï¼Œä»¥åŠåç»­å¯èƒ½å‘ç”Ÿçš„åˆå¹¶å†²çªé¢„åˆ¤ï¼Œè®©ç‰ˆæœ¬ç®¡ç†ä»â€œè®°å½•â€å˜ä¸ºâ€œè§„åˆ’â€ã€‚</p>
<h3 data-id="heading-6">6. æ‰©å±•å¼€å‘ï¼šå¿«é€Ÿæ„æ€ä¸åŸå‹éªŒè¯</h3>
<p><code>python-office</code> çš„æœªæ¥å……æ»¡äº†æ‰©å±•çš„å¯èƒ½ï¼Œæ¯”å¦‚é›†æˆAIæ¥å£ã€å¼€å‘GUIç•Œé¢æˆ–æ­å»ºåœ¨çº¿æœåŠ¡ã€‚ä»ä¸€ä¸ªæƒ³æ³•åˆ°ä¸€ä¸ªå¯è¿è¡Œçš„åŸå‹ï¼Œä¸­é—´æœ‰å¤§é‡æ¢ç´¢æ€§ä»£ç è¦å†™ã€‚</p>
<p><strong>AIå®æˆ˜åœºæ™¯</strong>ï¼šæ„æ€å¹¶éªŒè¯ä¸€ä¸ªâ€œæ™ºèƒ½æ–‡æ¡£æ‘˜è¦â€æ‰©å±•æ¨¡å—ã€‚</p>
<p><strong>æˆ‘çš„éœ€æ±‚æç¤º</strong>ï¼š</p>
<blockquote>
<p>â€œæˆ‘æƒ³ä¸º <code>python-office</code> é¡¹ç›®æ‰©å±•ä¸€ä¸ªAIåŠŸèƒ½ï¼šæ™ºèƒ½æ–‡æ¡£æ‘˜è¦ã€‚è¯·ä¸ºæˆ‘è®¾è®¡ä¸€ä¸ªåŸå‹æ¨¡å— <code>smart_summary</code> çš„ä»£ç ç»“æ„ã€‚è¯¥æ¨¡å—åº”èƒ½è¯»å– <code>pdf</code>ã€<code>word</code> æ–‡ä»¶ï¼Œè°ƒç”¨å¤§è¯­è¨€æ¨¡å‹APIï¼ˆå‡è®¾æœ‰APIå¯†é’¥ï¼‰ç”Ÿæˆæ‘˜è¦ï¼Œå¹¶è¿”å›ç»“æœã€‚è¯·è€ƒè™‘é¢å‘åˆå­¦è€…çš„ç®€æ˜“APIè®¾è®¡ï¼Œå¹¶å±•ç¤ºæ ¸å¿ƒå‡½æ•°çš„å®ç°æ€è·¯ã€‚â€</p>
</blockquote>
<p><strong>AIç”Ÿæˆçš„åŸå‹è®¾è®¡</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é¡¹ç›®ç»“æ„å»ºè®®</span>
python-office/
â”œâ”€â”€ office/
â”‚   â”œâ”€â”€ smart/           <span class="hljs-comment"># æ–°çš„æ™ºèƒ½åŠŸèƒ½æ¨¡å—</span>
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ summary.py   <span class="hljs-comment"># æ‘˜è¦åŠŸèƒ½æ ¸å¿ƒä»£ç </span>
â”‚   â””â”€â”€ ... (å…¶ä»–æ¨¡å—)

<span class="hljs-comment"># summary.py æ ¸å¿ƒå‡½æ•°è®¾è®¡</span>
<span class="hljs-keyword">import</span> popdf  <span class="hljs-comment"># å¤ç”¨ç°æœ‰çš„PDFæ¨¡å—</span>
<span class="hljs-keyword">import</span> poword <span class="hljs-comment"># å¤ç”¨ç°æœ‰çš„Wordæ¨¡å—</span>
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Literal</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">summary</span>(<span class="hljs-params">file_path: <span class="hljs-built_in">str</span>, 
            length: <span class="hljs-type">Literal</span>[<span class="hljs-string">'short'</span>, <span class="hljs-string">'medium'</span>, <span class="hljs-string">'long'</span>] = <span class="hljs-string">'medium'</span>,
            api_key: <span class="hljs-built_in">str</span> = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""
    ä¸€é”®ç”Ÿæˆæ–‡æ¡£æ‘˜è¦ã€‚
    
    Args:
        file_path: PDFæˆ–Wordæ–‡æ¡£è·¯å¾„ã€‚
        length: æ‘˜è¦é•¿åº¦ã€‚
        api_key: å¯é€‰ï¼ŒAIæœåŠ¡APIå¯†é’¥ã€‚å¦‚æœªæä¾›ï¼Œå°è¯•ä½¿ç”¨ç¯å¢ƒå˜é‡ã€‚
    
    Returns:
        ç”Ÿæˆçš„æ‘˜è¦æ–‡æœ¬ã€‚
    
    Raises:
        ValueError: æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒæˆ–æ— æ³•è¯»å–ã€‚
    """</span>
    <span class="hljs-comment"># 1. æ ¹æ®åç¼€ä½¿ç”¨popdfæˆ–powordæå–çº¯æ–‡æœ¬</span>
    <span class="hljs-comment"># 2. æ™ºèƒ½åˆ‡åˆ†å’Œé¢„å¤„ç†æ–‡æœ¬ï¼ˆé¿å…è¶…å‡ºæ¨¡å‹ä»¤ç‰Œé™åˆ¶ï¼‰</span>
    <span class="hljs-comment"># 3. æ„é€ Promptï¼Œè°ƒç”¨LLM APIï¼ˆå¦‚OpenAIã€DeepSeekç­‰ï¼‰</span>
    <span class="hljs-comment"># 4. è§£æå¹¶è¿”å›ç»“æœ</span>
    <span class="hljs-comment"># AIåœ¨æ­¤å¤„ä¼šç”Ÿæˆå¤§è‡´çš„ä»£ç å¡«å……éª¨æ¶å’Œå…³é”®æ­¥éª¤çš„ä¼ªä»£ç </span>
    ...
</code></pre>
<p>è¿™ä¸ªç”±AIç”Ÿæˆçš„è®¾è®¡è“å›¾ï¼Œæ¸…æ™°åœ°å‹¾å‹’å‡ºäº†æ–°æ¨¡å—å¦‚ä½•ä¸ç°æœ‰é¡¹ç›®èåˆï¼ˆå¤ç”¨ <code>popdf</code>ã€<code>poword</code>ï¼‰ï¼Œå¹¶è®¾è®¡äº†ç®€å•ç›´è§‚çš„APIã€‚è¿™è®©æˆ‘èƒ½åœ¨æŠ•å…¥å¤§é‡ç¼–ç æ—¶é—´å‰ï¼Œå¿«é€ŸéªŒè¯æŠ€æœ¯è·¯çº¿çš„å¯è¡Œæ€§ï¼Œç”šè‡³ç”Ÿæˆä¸€ä¸ªå¯æ¼”ç¤ºçš„â€œæœ€å°å¯è¡Œäº§å“â€ï¼ˆMVPï¼‰ã€‚</p>
<h3 data-id="heading-7">ç»“è¯­ï¼šä»å·¥å…·åˆ°æ€ç»´ï¼Œæˆ‘çš„AIç¼–ç¨‹è¯¾</h3>
<p>ä»¥ä¸Šè¿™6ä¸ªåœºæ™¯ï¼Œå°±æ˜¯æˆ‘æ—¥å¸¸ç»´æŠ¤å’Œå¼€å‘ <code>python-office</code> æ—¶ï¼Œä¸AIæ·±åº¦åä½œçš„çœŸå®å†™ç…§ã€‚AIæ²¡æœ‰æ›¿ä»£æˆ‘ï¼Œè€Œæ˜¯å°†æˆ‘ä»äº‹åŠ¡æ€§ã€é‡å¤æ€§çš„ç¼–ç åŠ³åŠ¨ä¸­è§£æ”¾å‡ºæ¥ï¼Œè®©æˆ‘èƒ½æ›´ä¸“æ³¨äºæ¶æ„è®¾è®¡ã€åŠŸèƒ½åˆ›æ„å’Œç¤¾åŒºè¿è¥â€”â€”è¿™äº›æ‰æ˜¯å¼€æºé¡¹ç›®ç»´æŠ¤è€…çš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<p>è¿™ç§è½¬å˜ï¼Œä¸ä»…ä»…æ˜¯å­¦ä¼šä½¿ç”¨æŸä¸ªAIç¼–ç å·¥å…·ï¼Œè€Œæ˜¯ä¸€ç§å…¨æ–°çš„ã€ä¸AIååŒæ€è€ƒçš„â€œç¼–ç¨‹æ€ç»´â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[python]pyenvå·¥å…·ä¹‹shims]]></title>    <link>https://juejin.cn/post/7590735421262856233</link>    <guid>https://juejin.cn/post/7590735421262856233</guid>    <pubDate>2026-01-04T06:04:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590735421262856233" data-draft-id="7591177139661570102" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[python]pyenvå·¥å…·ä¹‹shims"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-04T06:04:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="import_random"/> <meta itemprop="url" content="https://juejin.cn/user/2013961033882312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [python]pyenvå·¥å…·ä¹‹shims
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2013961033882312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    import_random
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T06:04:05.000Z" title="Sun Jan 04 2026 06:04:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜:é€šè¿‡pyenvå·¥å…·å’Œæ’ä»¶åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒ, æ¿€æ´»ç¯å¢ƒä¹‹å, æ‰§è¡Œå‘½ä»¤which pip, ä¸ºä»€ä¹ˆæ˜¯åœ¨.pyenv/shimsä¸‹, è€Œä¸æ˜¯å…·ä½“çš„è™šæ‹Ÿç¯å¢ƒä¸‹çš„binç›®å½•ä¸‹</h2>
<p>è¿™æ˜¯å› ä¸ºpyenvé€šè¿‡shimsæœºåˆ¶æ¥ç®¡ç†å‘½ä»¤ã€‚å½“ä½¿ç”¨pyenvå®‰è£…Pythonæ—¶ï¼Œå®ƒä¼šä¸ºæ¯ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå¦‚pythonã€pipç­‰ï¼‰åˆ›å»ºä¸€ä¸ªshimï¼ˆå«ç‰‡ï¼‰ï¼Œè¿™äº›shimä½äº~/.pyenv/shimsç›®å½•ä¸­ã€‚å½“æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œshimä¼šå†³å®šä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„Pythonæˆ–å·¥å…·ã€‚</p>
<p>ä½¿ç”¨pyenv-virtualenvç­‰æ’ä»¶åˆ›å»ºè™šæ‹Ÿç¯å¢ƒåï¼Œæ¿€æ´»ç¯å¢ƒæ—¶ï¼Œpyenvä¼šé€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¦‚PYENV_VERSIONï¼‰æ¥å‘Šè¯‰shimåº”è¯¥ä½¿ç”¨å“ªä¸ªç¯å¢ƒã€‚å› æ­¤ï¼Œå½“æ‰§è¡Œ<code>which pip</code>æ—¶ï¼Œä¼šæ˜¾ç¤ºshimè·¯å¾„ï¼Œä½†å®é™…ä¸Šshimä¼šè½¬å‘å‘½ä»¤åˆ°å½“å‰æ¿€æ´»çš„è™šæ‹Ÿç¯å¢ƒä¸‹çš„binç›®å½•ã€‚</p>
<p>å…·ä½“è¿‡ç¨‹ï¼š</p>
<ol>
<li>å®‰è£…pyenvåï¼Œä¼šåœ¨~/.pyenv/shimsç›®å½•ä¸‹ä¸ºæ¯ä¸ªå¯æ‰§è¡Œå‘½ä»¤åˆ›å»ºshimã€‚</li>
<li>å½“æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼ˆå¦‚pipï¼‰æ—¶ï¼Œshimä¼šæ ¹æ®å½“å‰è®¾ç½®çš„ç‰ˆæœ¬ï¼ˆé€šè¿‡pyenv localã€pyenv globalæˆ–pyenv shellè®¾ç½®ï¼Œæˆ–è€…é€šè¿‡è™šæ‹Ÿç¯å¢ƒæ¿€æ´»è®¾ç½®ï¼‰æ¥è°ƒç”¨å¯¹åº”ç‰ˆæœ¬çš„å‘½ä»¤ã€‚</li>
<li>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåï¼Œpyenvä¼šè®¾ç½®ç›¸åº”çš„ç¯å¢ƒå˜é‡ï¼Œä½¿å¾—shimèƒ½å¤Ÿæ‰¾åˆ°è™šæ‹Ÿç¯å¢ƒä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
</ol>
<p>æ‰€ä»¥ï¼Œ<code>which pip</code>æ˜¾ç¤ºçš„æ˜¯shimçš„è·¯å¾„ï¼Œå› ä¸ºshimæ˜¯ç¬¬ä¸€ä¸ªåœ¨PATHä¸­æ‰¾åˆ°çš„ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªshimä¼šæ­£ç¡®åœ°è°ƒç”¨è™šæ‹Ÿç¯å¢ƒä¸­çš„pipã€‚</p>
<p>å¦‚æœæƒ³æŸ¥çœ‹å®é™…pipçš„è·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨<code>pyenv which pip</code>å‘½ä»¤ï¼Œå®ƒä¼šæ˜¾ç¤ºå½“å‰æ¿€æ´»ç¯å¢ƒä¸‹pipçš„å®é™…è·¯å¾„ã€‚</p>
<p>ç¤ºä¾‹ï¼š<br/>
å‡è®¾æœ‰ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒåä¸ºmyenvï¼Œæ¿€æ´»åæ‰§è¡Œï¼š<br/>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mi>h</mi><mi>i</mi><mi>c</mi><mi>h</mi><mi>p</mi><mi>i</mi><mi>p</mi><mi mathvariant="normal">/</mi><mi>h</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">/</mi><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi><mi mathvariant="normal">/</mi><mi mathvariant="normal">.</mi><mi>p</mi><mi>y</mi><mi>e</mi><mi>n</mi><mi>v</mi><mi mathvariant="normal">/</mi><mi>s</mi><mi>h</mi><mi>i</mi><mi>m</mi><mi>s</mi><mi mathvariant="normal">/</mi><mi>p</mi><mi>i</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">which pip  
/home/user/.pyenv/shims/pip  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span><span class="mord mathnormal">p</span><span class="mord mathnormal">i</span><span class="mord mathnormal">p</span><span class="mord">/</span><span class="mord mathnormal">h</span><span class="mord mathnormal">o</span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mord">/</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.02778em;">ser</span><span class="mord">/.</span><span class="mord mathnormal">p</span><span class="mord mathnormal">ye</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord">/</span><span class="mord mathnormal">s</span><span class="mord mathnormal">him</span><span class="mord mathnormal">s</span><span class="mord">/</span><span class="mord mathnormal">p</span><span class="mord mathnormal">i</span><span class="mord mathnormal">p</span></span></span></span></span> pyenv which pip<br/>
/home/user/.pyenv/versions/myenv/bin/pip</p>
<p>å› æ­¤ï¼Œè™½ç„¶whichæ˜¾ç¤ºçš„æ˜¯shimï¼Œä½†å®é™…æ‰§è¡Œçš„æ˜¯è™šæ‹Ÿç¯å¢ƒä¸­çš„pipã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼Œæ¶‰åŠåˆ° pyenv çš„æ ¸å¿ƒå·¥ä½œåŸç†ã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼š</p>
<h3 data-id="heading-1">pyenv çš„ shims æœºåˆ¶</h3>
<p>pyenv ä½¿ç”¨ <strong>shimsï¼ˆå«ç‰‡ï¼‰</strong> ä½œä¸ºå‘½ä»¤è½¬å‘å±‚ï¼Œè¿™æ˜¯å®ƒçš„æ ¸å¿ƒè®¾è®¡ï¼š</p>
<ol>
<li>
<p><strong>shims ç›®å½•ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">~<span class="hljs-regexp">/.pyenv/</span>shims/
â”œâ”€â”€ python
â”œâ”€â”€ pip
â”œâ”€â”€ pip3
â””â”€â”€ ... å…¶ä»–å‘½ä»¤
</code></pre>
</li>
<li>
<p><strong>PATH ä¼˜å…ˆçº§</strong>ï¼š
pyenv å°† shims ç›®å½•æ”¾åœ¨ PATH çš„æœ€å‰é¢ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ <span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span>
/home/user/.pyenv/shims:/usr/local/bin:/usr/bin:...
</code></pre>
</li>
</ol>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆ <code>which pip</code> æ˜¾ç¤ºçš„æ˜¯ shim</h3>
<p>å½“æ‚¨æ‰§è¡Œ <code>which pip</code> æ—¶ï¼Œç³»ç»Ÿä¼šæŒ‰ PATH é¡ºåºæŸ¥æ‰¾ï¼š</p>
<ol>
<li>é¦–å…ˆæ‰¾åˆ° <code>~/.pyenv/shims/pip</code></li>
<li>è¿™æ˜¯æœ€å…ˆåŒ¹é…çš„ï¼Œæ‰€ä»¥æ˜¾ç¤ºè¿™ä¸ªè·¯å¾„</li>
</ol>
<h3 data-id="heading-3">shim çš„å·¥ä½œåŸç†</h3>
<p>æ¯ä¸ª shim å®é™…ä¸Šæ˜¯ä¸€ä¸ªå°è„šæœ¬ï¼Œå®ƒä¼šï¼š</p>
<ol>
<li>æ£€æŸ¥å½“å‰ç¯å¢ƒçŠ¶æ€</li>
<li>ç¡®å®šåº”è¯¥ä½¿ç”¨å“ªä¸ª Python ç‰ˆæœ¬/è™šæ‹Ÿç¯å¢ƒ</li>
<li>å°†å‘½ä»¤è½¬å‘åˆ°æ­£ç¡®çš„å®é™…ä½ç½®</li>
</ol>
<p>ç¤ºä¾‹ shim å†…å®¹ï¼ˆç®€åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/usr/bin/env bash</span>
<span class="hljs-comment"># ~/.pyenv/shims/pip</span>

<span class="hljs-comment"># 1. ç¡®å®šå½“å‰æ¿€æ´»çš„ç¯å¢ƒ</span>
<span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$PYENV_VERSION</span>"</span> ]; <span class="hljs-keyword">then</span>
    VERSION=<span class="hljs-string">"<span class="hljs-variable">$PYENV_VERSION</span>"</span>
<span class="hljs-keyword">elif</span> [ -f .python-version ]; <span class="hljs-keyword">then</span>
    VERSION=$(<span class="hljs-built_in">cat</span> .python-version)
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 2. æ‰¾åˆ°çœŸå®çš„ pip è·¯å¾„</span>
REAL_PIP=<span class="hljs-string">"~/.pyenv/versions/<span class="hljs-variable">${VERSION}</span>/bin/pip"</span>

<span class="hljs-comment"># 3. æ‰§è¡ŒçœŸå®çš„å‘½ä»¤</span>
<span class="hljs-built_in">exec</span> <span class="hljs-string">"<span class="hljs-variable">$REAL_PIP</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
</code></pre>
<h3 data-id="heading-4">å¦‚ä½•æŸ¥çœ‹çœŸå®çš„ pip è·¯å¾„</h3>
<p>è™½ç„¶ <code>which pip</code> æ˜¾ç¤º shimï¼Œä½†æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰¾åˆ°çœŸå®çš„ pipï¼š</p>
<ol>
<li>
<p><strong>ä½¿ç”¨ pyenv å‘½ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ pyenv <span class="hljs-built_in">which</span> pip
/home/user/.pyenv/versions/3.9.0/envs/myenv/bin/pip
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨ pip è‡ªèº«</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ pip -V
pip 21.0.1 from /home/user/.pyenv/versions/myenv/lib/python3.9/site-packages/pip (python 3.9)

$ pip --path
</code></pre>
</li>
<li>
<p><strong>ç›´æ¥æŸ¥çœ‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ <span class="hljs-built_in">ls</span> -la ~/.pyenv/versions/myenv/bin/pip
$ <span class="hljs-built_in">readlink</span> -f $(<span class="hljs-built_in">which</span> pip)  <span class="hljs-comment"># æœ‰äº›ç³»ç»Ÿå¯ä»¥è¿™æ ·</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-5">è¿™ç§è®¾è®¡çš„å¥½å¤„</h3>
<ol>
<li><strong>é€æ˜åˆ‡æ¢</strong>ï¼šæ— éœ€ä¿®æ”¹ PATH å³å¯åˆ‡æ¢ç¯å¢ƒ</li>
<li><strong>æƒ°æ€§åŠ è½½</strong>ï¼šåªæœ‰åœ¨æ‰§è¡Œå‘½ä»¤æ—¶æ‰å†³å®šä½¿ç”¨å“ªä¸ªç‰ˆæœ¬</li>
<li><strong>éš”ç¦»æ€§</strong>ï¼šæ¯ä¸ªé¡¹ç›®å¯ä»¥æœ‰è‡ªå·±çš„ Python ç‰ˆæœ¬</li>
<li><strong>æ€§èƒ½</strong>ï¼šshim å¾ˆè½»é‡ï¼Œå¼€é”€å°</li>
</ol>
<h3 data-id="heading-6">éªŒè¯æ˜¯å¦çœŸçš„åœ¨ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒçš„ pip</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹æ³•1ï¼šæ£€æŸ¥ pip å®‰è£…ä½ç½®</span>
$ pip list | <span class="hljs-built_in">head</span> -5

<span class="hljs-comment"># æ–¹æ³•2ï¼šå®‰è£…æµ‹è¯•åŒ…æŸ¥çœ‹è·¯å¾„</span>
$ pip install --target=/tmp/test small-package
$ python -c <span class="hljs-string">"import sys; print(sys.executable)"</span>
</code></pre>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p><code>which pip</code> æ˜¾ç¤º shim è·¯å¾„æ˜¯å®Œå…¨æ­£å¸¸çš„ï¼Œè¿™æ˜¯ pyenv çš„è®¾è®¡ç‰¹ç‚¹ã€‚è™½ç„¶å‘½ä»¤çœ‹èµ·æ¥æ¥è‡ª shims ç›®å½•ï¼Œä½†å®é™…ä¸Šæ‰§è¡Œçš„ç¡®å®æ˜¯æ‚¨è™šæ‹Ÿç¯å¢ƒä¸­çš„ pipã€‚shim åªæ˜¯ä¸€ä¸ªæ™ºèƒ½çš„è½¬å‘å™¨ï¼Œç¡®ä¿æ‚¨æ€»æ˜¯åœ¨æ­£ç¡®çš„ç¯å¢ƒä¸­æ‰§è¡Œå‘½ä»¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Salesforce User Agent Flow æˆæƒæµç¨‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7591066233670811674</link>    <guid>https://juejin.cn/post/7591066233670811674</guid>    <pubDate>2026-01-04T05:55:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591066233670811674" data-draft-id="7589903499599691830" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Salesforce User Agent Flow æˆæƒæµç¨‹è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-04T05:55:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="UrbanJazzerati"/> <meta itemprop="url" content="https://juejin.cn/user/550205947391389"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Salesforce User Agent Flow æˆæƒæµç¨‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/550205947391389/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    UrbanJazzerati
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:55:28.000Z" title="Sun Jan 04 2026 05:55:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0"><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>Â (What is it about?)</h3>
<p>è¿™æ˜¯OAuth 2.0çš„ä¸€ç§æˆæƒæµç¨‹ï¼Œä¸“ä¸º<strong>æ— æ³•å®‰å…¨å­˜å‚¨â€œå®¢æˆ·ç«¯å¯†é’¥â€çš„åº”ç”¨ç¨‹åº</strong>è®¾è®¡ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>åŸç”Ÿæ¡Œé¢åº”ç”¨</strong></li>
<li><strong>ç§»åŠ¨åº”ç”¨</strong>Â (iOS/Android)</li>
<li><strong>ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„å®¢æˆ·ç«¯åº”ç”¨</strong>Â (å¦‚ JavaScript å•é¡µåº”ç”¨)</li>
</ul>
<p>åœ¨è¿™ç§æµç¨‹ä¸­ï¼Œç”¨æˆ·æˆæƒåº”ç”¨ç¨‹åºè®¿é—®å…¶å—ä¿æŠ¤æ•°æ®ï¼ˆå¦‚Salesforceä¸­çš„è”ç³»äººä¿¡æ¯ï¼‰ã€‚</p>
<h3 data-id="heading-1"><strong>ä¸ºä»€ä¹ˆç”¨è¿™ä¸ªæµç¨‹ï¼Ÿï¼ˆå…³é”®ç‰¹ç‚¹ï¼‰</strong></h3>
<ol>
<li>
<p><strong>æ— å®¢æˆ·ç«¯å¯†é’¥</strong>ï¼šç”±äºåº”ç”¨è¿è¡Œåœ¨ç”¨æˆ·è®¾å¤‡ä¸Šï¼ˆå¦‚æ‰‹æœºã€ç”µè„‘ï¼‰ï¼Œå…¶ä»£ç å’Œâ€œå®¢æˆ·ç«¯å¯†é’¥â€å¯èƒ½è¢«åç¼–è¯‘æˆ–æ£€æŸ¥ï¼Œæ— æ³•ä¿å¯†ã€‚å› æ­¤ï¼Œæ­¤æµç¨‹<strong>ä¸è¦æ±‚ä½¿ç”¨å®¢æˆ·ç«¯å¯†é’¥</strong>è¿›è¡Œèº«ä»½éªŒè¯ã€‚</p>
</li>
<li>
<p><strong>é€šè¿‡ç”¨æˆ·ä»£ç†è¿›è¡Œæˆæƒ</strong>ï¼šæˆæƒè¿‡ç¨‹é€šè¿‡ä¸€ä¸ª<strong>å¤–éƒ¨æˆ–å†…åµŒçš„æµè§ˆå™¨</strong>å®Œæˆã€‚ç”¨æˆ·åœ¨è¿™ä¸ªæµè§ˆå™¨ä¸­ç›´æ¥ç™»å½•Salesforceå¹¶è¿›è¡Œæˆæƒï¼Œåº”ç”¨æœ¬èº«<strong>æ°¸è¿œçœ‹ä¸åˆ°ç”¨æˆ·çš„å¯†ç </strong>ã€‚</p>
</li>
<li>
<p><strong>ä»¤ç‰Œé€šè¿‡URLç‰‡æ®µä¼ é€’</strong>ï¼šæˆæƒæˆåŠŸåï¼Œè®¿é—®ä»¤ç‰Œï¼ˆ<code>access_token</code>ï¼‰ä»¥Â <strong>URLå“ˆå¸Œç‰‡æ®µ</strong>Â (<code>#</code>åé¢çš„éƒ¨åˆ†) çš„å½¢å¼ï¼Œé€šè¿‡æµè§ˆå™¨é‡å®šå‘è¿”å›ç»™åº”ç”¨ã€‚</p>
<ul>
<li><em>å¥½å¤„</em>ï¼šURLç‰‡æ®µä¸ä¼šå‘é€åˆ°æœåŠ¡å™¨ï¼Œåªåœ¨æµè§ˆå™¨æœ¬åœ°å¤„ç†ï¼Œå› æ­¤ä¸ä¼šåœ¨æœåŠ¡å™¨æ—¥å¿—æˆ–Refererå¤´ä¸­æ³„éœ²ä»¤ç‰Œã€‚</li>
<li><em>é£é™©</em>ï¼šä»¤ç‰Œä»ä¼šå‡ºç°åœ¨æµè§ˆå™¨çš„åœ°å€æ å’Œæµè§ˆå†å²ä¸­ï¼Œå¯èƒ½è¢«åŒä¸€è®¾å¤‡ä¸Šçš„å…¶ä»–åº”ç”¨æˆ–ç”¨æˆ·çª¥æ¢ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-2"><strong>æµç¨‹æ­¥éª¤ (ç®€å•æè¿°)</strong></h3>
<p>æƒ³è±¡ä½ å¼€å‘äº†ä¸€ä¸ªæ‰‹æœºAppï¼Œéœ€è¦è¯»å–ç”¨æˆ·Salesforceé‡Œçš„å®¢æˆ·è”ç³»äººï¼š</p>
<ol>
<li><strong>å¯åŠ¨</strong>ï¼šç”¨æˆ·åœ¨æ‰‹æœºä¸Šæ‰“å¼€ä½ çš„Appã€‚</li>
<li><strong>é‡å®šå‘è‡³æˆæƒ</strong>ï¼šAppæ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼ˆæˆ–WebViewï¼‰ï¼Œå¹¶å°†ç”¨æˆ·é‡å®šå‘åˆ°Salesforceçš„æˆæƒç«¯ç‚¹ (<code>.../oauth2/authorize</code>)ã€‚</li>
<li><strong>ç”¨æˆ·ç™»å½•å’Œæˆæƒ</strong>ï¼šç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°ä¸€ä¸ªé¡µé¢è¯¢é—®â€œæ˜¯å¦å…è®¸æ­¤Appè®¿é—®ä½ çš„æ•°æ®ï¼Ÿâ€ï¼Œç”¨æˆ·ç‚¹å‡»â€œå…è®¸â€ã€‚</li>
<li><strong>å›è°ƒå¹¶æ¥æ”¶ä»¤ç‰Œ</strong>ï¼šSalesforceå°†æµè§ˆå™¨é‡å®šå‘å›ä½ é¢„å…ˆæ³¨å†Œçš„<strong>å›è°ƒåœ°å€</strong>Â (Redirect URI)ï¼Œå¹¶åœ¨URLçš„<code>#</code>åé¢é™„ä¸Šè®¿é—®ä»¤ç‰Œå’Œå…¶ä»–ä¿¡æ¯ã€‚</li>
<li><strong>æå–ä»¤ç‰Œå¹¶è®¿é—®æ•°æ®</strong>ï¼šä½ çš„Appä»URLä¸­æå–å‡ºè®¿é—®ä»¤ç‰Œï¼Œä¹‹åå°±å¯ä»¥ç”¨è¿™ä¸ªä»¤ç‰Œè°ƒç”¨Salesforce APIï¼Œä»£è¡¨ç”¨æˆ·è·å–æˆ–æ“ä½œæ•°æ®ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88b7c80569ab4a4b8356ebbff8d93c74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110928&amp;x-signature=t6TjuKr0IinKkMMsHH8I3%2FO%2Fqpo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3"><strong>é‡è¦è­¦å‘Šä¸å»ºè®®</strong></h3>
<ul>
<li><strong>å®‰å…¨æ€§æç¤º</strong>ï¼šSalesforce<strong>æ¨è</strong>ä½¿ç”¨æ›´å®‰å…¨çš„Â <strong>OAuth 2.0 WebæœåŠ¡å™¨æµç¨‹ï¼ˆå¸¦PKCEï¼‰</strong> Â æ¥ä»£æ›¿ç”¨æˆ·ä»£ç†æµç¨‹ã€‚PKCEï¼ˆProof Key for Code Exchangeï¼‰èƒ½æä¾›æ›´å¥½çš„å®‰å…¨ä¿æŠ¤ã€‚</li>
<li><strong>å¯è¢«ç¦ç”¨</strong>ï¼šç®¡ç†å‘˜å¯ä»¥<strong>é€‰æ‹©é˜»æ­¢</strong>ç”¨æˆ·ä»£ç†æµç¨‹ï¼Œä½†è¿™å¯èƒ½ä¼šç ´åè®¸å¤šä½¿ç”¨æ­¤æµç¨‹çš„ç°æœ‰ç§»åŠ¨Appï¼ˆåŒ…æ‹¬Salesforceè‡ªå·±çš„å®˜æ–¹ç§»åŠ¨Appï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4"><strong>æˆæƒè¯·æ±‚ä¸å“åº”çš„å…³é”®å‚æ•°</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b81382e5cf014a51867755a0f9d20c4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110928&amp;x-signature=2I30lvalyn5lz4CwXSd2cDm%2BL64%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8e5c8b1b5964d1caf9f146914cc0264~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110928&amp;x-signature=N9sKX5dAsVPqE00TWGys2M%2Bu72Q%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>è¯·æ±‚æˆæƒæ—¶çš„URLå‚æ•°</strong>ï¼š</p>
<ul>
<li><code>response_type=token</code>ï¼šè¡¨æ˜ä½¿ç”¨éšå¼æµç¨‹ï¼Œç›´æ¥è¯·æ±‚ä»¤ç‰Œã€‚</li>
<li><code>client_id</code>ï¼šä½ çš„åº”ç”¨çš„â€œæ¶ˆè´¹è€…å¯†é’¥â€ã€‚</li>
<li><code>redirect_uri</code>ï¼šæˆæƒæˆåŠŸåçš„å›è°ƒåœ°å€ï¼Œå¿…é¡»ä¸åº”ç”¨è®¾ç½®ä¸­å®Œå…¨åŒ¹é…ã€‚</li>
<li><code>scope</code>ï¼šè¯·æ±‚çš„æƒé™èŒƒå›´ï¼ˆå¦‚<code>api</code>ã€<code>refresh_token</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æˆæƒæˆåŠŸåçš„å“åº”å‚æ•°</strong> (åœ¨<code>#</code>åé¢ï¼Œ<strong>å¯èƒ½éœ€è¦è¿›è¡Œè½¬ç§»å¦‚%20</strong>)ï¼š</p>
<ul>
<li><code>access_token</code>ï¼šæœ€é‡è¦çš„ä»¤ç‰Œï¼Œç”¨äºè®¿é—®APIã€‚</li>
<li><code>refresh_token</code>ï¼šä»…åœ¨æŸäº›ç‰¹å®šæ¡ä»¶ä¸‹é¢å‘ï¼ˆå¦‚ç‰¹å®šå›è°ƒURLæˆ–è¯·æ±‚äº†<code>scope=refresh_token</code>ï¼‰ï¼Œç”¨äºè·å–æ–°çš„è®¿é—®ä»¤ç‰Œã€‚</li>
<li><code>instance_url</code>ï¼šç”¨æˆ·æ‰€å±Salesforceç»„ç»‡çš„å®ä¾‹åœ°å€ã€‚</li>
<li><code>state</code>ï¼šç”¨äºé˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡»çš„ä¸€ä¸ªéšæœºå€¼ï¼Œéœ€ä¸è¯·æ±‚æ—¶å‘é€çš„å€¼æ¯”å¯¹ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-5"><strong>ç¬¬ä¸‰éƒ¨åˆ†ï¼šä¸å…¶ä»–æµç¨‹çš„å¯¹æ¯”</strong></h3>
<p>ä¸ºäº†è®©ä½ æ›´æ¸…æ¥šâ€œç”¨æˆ·ä»£ç†æµç¨‹â€çš„å®šä½ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç®€å•å¯¹æ¯”ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th><strong>OAuth 2.0 ç”¨æˆ·ä»£ç†æµç¨‹ (æœ¬æ–‡æ¡£å†…å®¹)</strong></th><th><strong>OAuth 2.0 WebæœåŠ¡å™¨æµç¨‹ (æ›´æ¨è)</strong></th></tr></thead><tbody><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ‰‹æœºAppã€æ¡Œé¢Appã€æµè§ˆå™¨å•é¡µåº”ç”¨(JavaScript)</td><td>æœ‰è‡ªå·±åç«¯çš„ä¼ ç»Ÿç½‘ç«™ï¼ˆå¦‚PHP, Java, .NETåº”ç”¨ï¼‰</td></tr><tr><td><strong>å®¢æˆ·ç«¯å¯†é’¥</strong></td><td><strong>ä¸ä½¿ç”¨</strong>ï¼ˆå› ä¸ºæ— æ³•åœ¨è®¾å¤‡ä¸Šå®‰å…¨å­˜å‚¨ï¼‰</td><td><strong>ä½¿ç”¨</strong>ï¼ˆå¯ä»¥å®‰å…¨å­˜å‚¨åœ¨åç«¯æœåŠ¡å™¨ï¼‰</td></tr><tr><td><strong>ä»¤ç‰Œè¿”å›æ–¹å¼</strong></td><td>ç›´æ¥è¿”å›<code>access_token</code>ï¼ˆéšå¼ï¼‰ï¼Œé€šè¿‡URLç‰‡æ®µ(<code>#</code>)</td><td>å…ˆè¿”å›ä¸€ä¸ª<code>code</code>ï¼Œå®¢æˆ·ç«¯å†ç”¨<code>code</code>å’Œ<code>client_secret</code>å»æ¢<code>access_token</code></td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>è¾ƒä½ã€‚ä»¤ç‰Œæ˜“æš´éœ²åœ¨æµè§ˆå™¨ä¸­ã€‚</td><td>è¾ƒé«˜ã€‚ä»¤ç‰Œæ°¸è¿œä¸ä¼šç»è¿‡ç”¨æˆ·æµè§ˆå™¨ã€‚</td></tr><tr><td><strong>æ¨èåº¦</strong></td><td><strong>ä¸æ¨èï¼ˆé—ç•™æ–¹æ¡ˆï¼‰</strong> ã€‚æ–‡æ¡£æ˜ç¡®æŒ‡å‡ºï¼Œä¸ºäº†åŠ å¼ºå®‰å…¨ï¼Œåº”ä½¿ç”¨å¸¦PKCEçš„WebæœåŠ¡å™¨æµç¨‹ã€‚</td><td><strong>æ¨èï¼ˆç°ä»£æ–¹æ¡ˆï¼‰</strong> ã€‚PKCEæ‰©å±•ä½¿å…¶ä¹Ÿèƒ½å®‰å…¨åœ°ç”¨äºæ‰‹æœºAppå’Œå•é¡µåº”ç”¨ã€‚</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½œä¸º Cursor å’Œ Claude Code çš„ç ”å‘è€…ï¼Œä»–ä»¬æ˜¯å¦‚ä½•çœ‹å¾…å’Œä½¿ç”¨ AI]]></title>    <link>https://juejin.cn/post/7590724064520978495</link>    <guid>https://juejin.cn/post/7590724064520978495</guid>    <pubDate>2026-01-04T05:26:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590724064520978495" data-draft-id="7590735421262577705" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½œä¸º Cursor å’Œ Claude Code çš„ç ”å‘è€…ï¼Œä»–ä»¬æ˜¯å¦‚ä½•çœ‹å¾…å’Œä½¿ç”¨ AI"/> <meta itemprop="keywords" content="å‰ç«¯,Android,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-04T05:26:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹çŒ«deå°éƒ­"/> <meta itemprop="url" content="https://juejin.cn/user/817692379985752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½œä¸º Cursor å’Œ Claude Code çš„ç ”å‘è€…ï¼Œä»–ä»¬æ˜¯å¦‚ä½•çœ‹å¾…å’Œä½¿ç”¨ AI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692379985752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹çŒ«deå°éƒ­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:26:13.000Z" title="Sun Jan 04 2026 05:26:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘æ—¥ï¼ŒCursor VP Lee Robinson å’Œ Claude Code ä¹‹çˆ¶ Boris Cherny éƒ½åˆ†äº«äº†ä»–ä»¬çš„ AI æ„Ÿæ‚Ÿå’Œç»éªŒï¼Œç‰¹åˆ«æ˜¯ Lee Robinson çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DUrNLVip0hSA" target="_blank" title="https://www.youtube.com/watch?v=UrNLVip0hSA" ref="nofollow noopener noreferrer">ã€ŠAI codes better than me. Now what?ã€‹</a> å°±å¾ˆå¥½å±•ç¤ºäº†å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œ2026 å¼€å§‹ç¨‹åºå‘˜åº”è¯¥å¦‚ä½•è½¬å˜è‡ªæˆ‘çš„å®šä½ã€‚</p>
<blockquote>
<p>ç±»ä¼¼çš„ï¼Œåœ¨ä¹‹å‰çš„ <a href="https://juejin.cn/post/7587845752681807935" target="_blank" title="https://juejin.cn/post/7587845752681807935">ã€ŠAI è®©æˆ‘è¯¯ä»¥ä¸ºè‡ªå·±å¾ˆå¼ºï¼Œæœªæ¥ç¨‹åºå‘˜çš„è½¬å‹ä¹‹è·¯ã€‹</a>ä¹Ÿæ€è€ƒè¿‡æœªæ¥ AI æµªæ½®ä¸‹ç¨‹åºå‘˜çš„è½¬å˜ã€‚</p>
</blockquote>
<p>é¦–å…ˆå¯¹äº Lee Robinson æ¥è¯´ï¼Œä»–æ€»ç»“çš„ç°çŠ¶æ˜¯ï¼š<strong>ä»–å·²ç»å¾ˆå°‘äº²æ‰‹å†™ä»£ç äº†</strong>ï¼Œæ¯”å¦‚æœ€è¿‘ä»–ä½¿ç”¨ Rust å®ç°äº†ä¸€ä¸ªå›¾ç‰‡å‹ç¼©å·¥å…·ï¼Œå¯ç¼–è¯‘æˆ WebAssembly å¹¶åœ¨ SvelteKit åº”ç”¨ä¸­è¿è¡Œï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹é‡Œä»–æ²¡æœ‰äº²æ‰‹å†™ä¸€è¡Œä»£ç ï¼Œå®Œå…¨ç”± AI ä»£ç†å®Œæˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2b19ac5289140c99277eb8f4da39df6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768109172&amp;x-signature=ilaEVmVGALEz5imMsyb0ZQF3Fys%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–ä¸€ä¸ªä¾‹å­å°±æ˜¯ Space Invaders æ¸¸æˆå…‹éš†ï¼Œä»–ä¸º Analog Pocketï¼ˆç±»ä¼¼ Game Boy çš„æŒæœºï¼‰å¼€å‘äº†ä¸€æ¬¾æ¸¸æˆï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦ç”¨åˆ° Verilog ç¡¬ä»¶æè¿°è¯­è¨€ï¼Œä½†æ˜¯ä»–å¯¹ Verilog ä¸€æ— æ‰€çŸ¥ï¼Œä¸è¿‡åœ¨ AI çš„å¸®åŠ©ä¸‹ï¼Œä»–æœ€ç»ˆè¿˜æ˜¯å®Œæˆäº†ç¡¬ä»¶å±‚é¢æ‰€æœ‰çš„ç¼–ç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ceff33d954141d7b045fc2405f778d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768109172&amp;x-signature=IVnT31TMzbAz7%2BhBBkAcQo3xnaE%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b28251d0ff764c1db75627f83278a6f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768109172&amp;x-signature=AsF827xyl9Aeaz5fxVrRO1Jf%2B%2FA%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸¤ä¸ªä¾‹å­å¾ˆç›´è§‚çš„ä½“ç°å‡ºäº† AI çš„èƒ½åŠ›å’Œå¯¹å¼€å‘è€…çš„å½±å“ï¼Œ<strong>æœªæ¥ AI è‚¯å®šæ˜¯è®© AI è€…ä¸å†åªæ˜¯å±€é™åœ¨æŸä¸ªæŠ€æœ¯æ ‡ç­¾ä¸‹</strong>ï¼Œæ‰€ä»¥ä»–åœ¨åŠå¹´å‰åŠ å…¥äº† Cursorï¼Œå› ä¸ºä»–å¼ºçƒˆæ„Ÿè§‰åˆ°è½¯ä»¶å·¥ç¨‹çš„ç‰ˆå›¾æ­£åœ¨å‘ç”Ÿå·¨å˜ï¼Œæ‰€ä»¥ä»–å¸Œæœ›å‚ä¸åˆ°å®šä¹‰è¿™ç§å˜åŒ–ã€‚</p>
<blockquote>
<p>Cursor ç¡®å®ä¹Ÿåœ¨å½±å“ç€å¼€å‘è€…çš„å¼€å‘ä¹ æƒ¯ï¼ŒåŸºæœ¬ä¸Šä½ ä¸ç”¨ Cursor ä¹Ÿç”¨è¿‡ Trae ï¼Ÿ</p>
</blockquote>
<p>å¯¹æ¯”è¿‡å»çš„æ¨¡å‹æŒ‡ä»¤éµå¾ªèƒ½åŠ›å·®ï¼Œå¹¶ä¸”ç»å¸¸å‡ºç°å¹»è§‰çš„æƒ…å†µï¼Œç°åœ¨çš„ Codex Max æˆ–è€… Opus 4.5 éƒ½è¡¨ç°å‡ºäº†éå¸¸å¼ºå¤§çš„ä»£ç å®Œæˆæ•ˆæœï¼ˆå°±æ˜¯è´µï¼‰ï¼Œå¯¹äº Lee Robinson æ¥è¯´ï¼Œä»–è§‰å¾—ç›®å‰çš„æ¨¡å‹åœ¨å†™ä»£ç æ–¹é¢ç¡®å®å·²ç»æ¯”ä»–æ›´å¼ºã€‚</p>
<blockquote>
<p><strong>æ‰€ä»¥ï¼Œå¯¹äºæœªæ¥å¼€å‘è€…è€Œè¨€ï¼Œç¡®å®ä¸åº”è¯¥çº ç»“äºåœ¨â€œå†™ä»£ç èƒ½åŠ›â€ä¸Šå»å’Œ AI å¯¹æ¯”</strong>ï¼Œå› ä¸ºä½ çœŸå†™ä¸è¿‡å®ƒï¼Œæ²¡å®ƒæŒä¹…ä¹Ÿæ²¡å®ƒèƒ½è¾“å‡ºã€‚</p>
</blockquote>
<p><strong>æ‰€ä»¥ Lee Robinson è®¤ä¸ºï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œå†™ä»£ç è¿™ä»¶äº‹ä¸å†æ˜¯ç“¶é¢ˆ</strong>ï¼Œä»–å»ºè®®ï¼š</p>
<ul>
<li>ä¸è¦å› ä¸ºè¿‡å» AI ç°åœ¨ä¸æ“…é•¿æŸä¸ªé¢†åŸŸï¼ˆå¦‚ Rust æˆ–åº•å±‚ä»£ç ï¼‰å°±è®¤ä¸ºå®ƒæ°¸è¿œä¸è¡Œï¼Œæ¨¡å‹åœ¨è¿™äº›é¢†åŸŸçš„è¿›æ­¥é€Ÿåº¦æå¿«</li>
<li>è®© AI æ¥ç®¡è½¯ä»¶å¼€å‘ä¸­å¤§é‡ç¹çå’Œé‡å¤æ€§çš„å·¥ä½œ</li>
<li>å½“ç”Ÿæˆä»£ç å˜å¯ç”¨æ—¶ï¼Œå·¥ç¨‹å¸ˆçš„ä»·å€¼å°†ä½“ç°åœ¨â€œå“å‘³â€ä¸Šï¼Œå¼€å‘è€…ä¸è¦åªå…³æ³¨ä»£ç ï¼Œæ›´è¦å…³æ³¨äº§å“æœ¬èº«ã€ç”¨æˆ·ä½“éªŒ (UX)ã€å¸‚åœºè¥é”€ä»¥åŠå¦‚ä½•æ„å»ºç”¨æˆ·çœŸæ­£å–œæ¬¢çš„ä¸œè¥¿</li>
</ul>
<blockquote>
<p><strong>æ‰€è°“æœªæ¥çš„æ ¸å¿ƒä¸å†æ˜¯â€œå¦‚ä½•å†™ä»£ç â€ï¼Œè€Œæ˜¯â€œå¦‚ä½•æ„å»ºå’Œç®¡ç†å¥½ä¼˜ç§€çš„äº§å“â€</strong> ï¼Œå¹¶å¦‚ä½•ä½¿ç”¨å¥½ AI å®Œæˆéœ€æ±‚ ã€‚</p>
</blockquote>
<p>å°±è¿ <a href="https://juejin.cn/post/7590421489998610451" target="_blank" title="https://juejin.cn/post/7590421489998610451">Android Studio çš„å…¨æ–° AI Agent</a> ï¼Œéƒ½åœ¨ä¸æ–­å¢åŠ  vibe coding çš„æ”¯æŒï¼ŒAI åœ¨å¼€å‘è€…é¢†åŸŸå¦‚ä»Šç¡®å®å·²ç»æˆä¸ºä¸å¯æˆ–ç¼ºçš„å­˜åœ¨ï¼Œå°±åƒ StackOverflow ï¼Œéšç€ AI çš„å‘å±•ï¼Œå¦‚ä»Šçš„â€œæ´»äººâ€æµé‡å¯ä»¥è¯´æ˜¯å‡ ä¹è·Œåœï¼Œè¿™å¤§æ¦‚ä¹Ÿæ˜¯ AI æµªæ½®çš„å…¸å‹ä½“ç°ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cff9263f9404feb9dba4c01b16133cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768109172&amp;x-signature=MFlurdzzaKio86%2BqW6Bs%2F3QBWSM%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–å‰äº›æ—¥å­ Manus å–èº« Meta çš„èº«ä»·ä¹Ÿå¼•èµ·çƒ­è®®ï¼Œå®é™…ä¸Šä¸€äº›ä¸“ä¸šå¼€å‘è€…â€œçœ‹ä¸ä¸Šâ€ Manus çš„äº§å“ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆå®ƒè¿˜æ˜¯èƒ½æœ‰å¦‚æ­¤èº«ä»·ï¼Ÿ</p>
<p>å®é™…ä¸Š Manus çš„æœåŠ¡å¯¹è±¡å¾ˆå¤šæ˜¯éä¸“ä¸šæŠ€æœ¯çš„äººï¼Œä½¿ç”¨ Manus çš„æ ¸å¿ƒç”¨æˆ·ï¼Œå¤§å¤šæ˜¯é‚£äº›ä¸éœ€è¦çŸ¥é“è¯¥ä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯æ ˆæˆ–å¦‚ä½•æ„å»ºæ•°æ®åº“ï¼Œä»–ä»¬æ›´å¤šæ˜¯å®Œå…¨ä¸ç†è§£æŠ€æœ¯çš„äººï¼Œè¿™äº›ç”¨æˆ·åŸºæœ¬æ˜¯è¿½æ±‚ä¸€ä¸ªç»“æœï¼Œä¸åœ¨æ„è¿‡ç¨‹çš„åˆ›ä¸šè€…å’Œä¼ä¸šä¸»ã€‚</p>
<blockquote>
<p>è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ–¹å‘ï¼Œå¦‚æœ AI å¯ä»¥äº§å‡ºåˆæ­¥ç»“æœéªŒè¯äº§å“ï¼Œé‚£ä¹Ÿè®¸ä»£ç è¿™ä¸ªä¸­é—´è¿‡ç¨‹å¦‚ä½•ï¼Œæœªæ¥æˆ–è€…ä¹Ÿæ²¡é‚£ä¹ˆé‡è¦ï¼Ÿ</p>
</blockquote>
<p>å°±è¿è°·æ­Œ Gemini API è´Ÿè´£äººéƒ½è‡ªæ›ï¼Œç”¨ç«å“ Claude Code åœ¨ 1å°æ—¶å¤ç°è‡ªå·±å›¢é˜Ÿä¸€å¹´æˆæœï¼Œè™½ç„¶è¿˜ä¸å¤Ÿå®Œç¾ï¼Œä½†æ˜¯è¿™å·²ç»å¾ˆèƒ½è¯´æ˜é—®é¢˜ï¼š<strong>ä¸è¦å’Œ AI æ¯”ä»£ç è¾“å‡ºçš„èƒ½åŠ›</strong> ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb94047b1d75411dac10651d9c4723eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768109172&amp;x-signature=uKarpFsIifJBJgHzaht6zoffAGg%3D" alt="" loading="lazy"/></p>
<p><strong>é‚£ä¹ˆä¸ºä»€ä¹ˆ 2026 äº†ï¼Œè¿˜æœ‰å¾ˆå¤šäººä½¿ç”¨ AI çš„è¿‡ç¨‹ä¸­å‘ç°ï¼ŒAI å¹¶ä¸å¥½ç”¨</strong>ï¼Ÿè¿™ä¸ªé—®é¢˜å¯èƒ½ Claude Code ä¹‹çˆ¶ Boris Cherny çš„ç»éªŒåˆ†äº«å¯ä»¥ç»™å‡ºç­”æ¡ˆï¼Œä»–åœ¨ 30 å¤©å†…è·‘äº† 259 ä¸ª PR ï¼Œæ‰€æœ‰ä»£ç éƒ½æ˜¯ CC + Opus 4.5 å®Œæˆï¼Œæœ€é•¿çš„ session è·‘äº†è¿‘ 42 å°æ—¶ã€‚</p>
<blockquote>
<p>ä¹Ÿè®¸ä½ è§‰å¾—ä¸å¥½ç”¨ï¼Œä¸»è¦æ˜¯å› ä¸ºæ²¡ç”¨å¥½æ²¡ç”¨å¯¹ï¼Œè€Œä¸æ˜¯ AI ä¸è¡Œã€‚</p>
</blockquote>
<p>Boris Cherny æä¾›äº†ä¸€äº› CC çš„ä½¿ç”¨æŠ€å·§ï¼š</p>
<ul>
<li>åœ¨ç«¯ä¸­å¹¶è¡Œè¿è¡Œ 5 ä¸ª Claude è¿›ç¨‹ï¼Œå¹¶ä¸”å°†æ ‡ç­¾é¡µç¼–å·ä¸º 1-5ï¼Œé€šè¿‡ç³»ç»Ÿé€šçŸ¥æ¥äº†è§£å“ªä¸ª Claude è¿›ç¨‹éœ€è¦äººå·¥å¤„ç†ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆæä¾›ä»»åŠ¡å¹¶è¡Œæ•ˆæœï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a685f387f894848927fa1a4ac07d407~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768109172&amp;x-signature=nLBgd8kxVhTu1J8V9cLDMSFi%2BcU%3D" alt="" loading="lazy"/></li>
</ul>

<ul>
<li>å›¢é˜Ÿå…±äº«ä¸€ä¸ªç”¨äº Claude Code çš„ CLAUDE.md æ–‡ä»¶ï¼Œæ¯å½“å‘ç° Claude åšé”™äº†ä»€ä¹ˆï¼Œå›¢é˜Ÿå¯ä»¥æ·»åŠ åˆ° CLAUDE.md ï¼Œè®© Claude ä¸‹æ¬¡é¿å…çŠ¯åŒæ ·çš„é”™è¯¯<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4a0e40ea3474e6999be6d0fdc70453b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768109172&amp;x-signature=%2BceA8G9EwN6yiIwebYxKxvzoBow%3D" alt="" loading="lazy"/></li>
<li>Code Review æ—¶ <code>@.claude</code> è‡ªåŠ¨æ›´æ–°è§„åˆ™åˆ° CLAUDE.md ï¼Œè¿™é‡Œä¸»è¦é€šè¿‡ Claude Code Github action æ¥å®ç° <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e01693bedc846bb8c9ca6515ad36388~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768109172&amp;x-signature=HmC8b6xBCzvpTuTdKLRAAC1B9c8%3D" alt="" loading="lazy"/></li>
</ul>

<ul>
<li>å¤§å¤šæ•°ä¼šè¯éƒ½ä» plan æ¨¡å¼ï¼ˆShift+Tab twiceï¼‰å¼€å§‹ï¼Œä¸€ä¸ªå¥½çš„ Plan éå¸¸é‡è¦ï¼Œä¸è¦ä¸€ä¸Šæ¥å°±ç›²ç›®å¼€å§‹éœ€æ±‚<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0eb9adddb31e4a05b31a105988f93ff4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768109172&amp;x-signature=g4QbxTsIewHc1%2FBwxEf18Vezagk%3D" alt="" loading="lazy"/></li>
<li>é«˜é¢‘å·¥ä½œæµéƒ½åšæˆ slash commands å¹¶å­˜æ”¾åœ¨ <code>.claude/commands/</code>ï¼Œè¿™æ · Claude è‡ªå·±ä¹Ÿèƒ½è°ƒç”¨ï¼Œå¯ä»¥å‡å°‘äººå·¥çš„é‡å¤å¤„ç†æ¥ç®¡<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f4d2414b2364ccd9d9391b0db80626e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768109172&amp;x-signature=yZAod%2BqpCzyvatozqe0LVN1EPIg%3D" alt="" loading="lazy"/></li>
<li>ä½¿ç”¨ä¸€äº› subagents ï¼Œä¾‹å¦‚ code-simplifier ä¼šåœ¨ Claude å®Œæˆå·¥ä½œåç®€åŒ–ä»£ç ï¼Œverify-app ä¼šæä¾›è¯¦ç»†çš„ç«¯åˆ°ç«¯ Claude ä»£ç æµ‹è¯•æŒ‡å—ï¼Œè¿™äº› subagents çš„ä½œç”¨æ˜¯è‡ªåŠ¨åŒ–å¤„ç†å¤§å¤šæ•° PR æ—¶æœ€å¸¸ç”¨çš„å·¥ä½œæµ<img src="" alt="" loading="lazy"/></li>
<li>ä¸ä½¿ç”¨ <code>--dangerously-skip-permissions</code> å‚æ•°ï¼Œæ¨èä½¿ç”¨ <code>/permissions</code> å‚æ•°é¢„å…ˆå…è®¸ä¸€äº›ç¯å¢ƒä¸­å®‰å…¨çš„å¸¸ç”¨ bash å‘½ä»¤ï¼Œä»¥é¿å…ä¸å¿…è¦çš„æƒé™æç¤ºï¼Œè¿™äº›é…ç½®å¤§éƒ¨åˆ†ä¼šæäº¤åˆ° <code>.claude/settings.json</code> æ–‡ä»¶å¹¶ä¸å›¢é˜Ÿå…±äº«<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dddaa78f9c6a49c7abc062ab75bd4668~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768109172&amp;x-signature=Ulz%2BmrUghW1sX7c%2BQzDNo3eUn70%3D" alt="" loading="lazy"/></li>
<li>é•¿ä»»åŠ¡ç”¨å¯ä»¥ç”¨ ralph-wiggum æ’ä»¶è®© Claude è‡ªåŠ¨å¾ªç¯ç›´åˆ°å®Œæˆ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d669800990f64bd3b00b0c4ca357e9fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768109172&amp;x-signature=zDEwgeKiz6FnTDFbmD8q6p96TQE%3D" alt="" loading="lazy"/></li>
<li>è¦æƒ³è®© Claude Code å‘æŒ¥æœ€ä½³æ•ˆæœï¼Œ<strong>æœ€é‡è¦çš„ä¸€ç‚¹å¯èƒ½æ˜¯ç»™ Claude æä¾›éªŒè¯è¿è¡Œç»“æœçš„æ–¹å¼</strong>ï¼Œå¦‚æœ Claude æ‹¥æœ‰è¿™ç§åé¦ˆæœºåˆ¶ï¼Œæœ€ç»ˆç»“æœçš„è´¨é‡å°†æå‡ 2-3 å€ï¼Œæ¯”å¦‚ Claude å¯ä»¥ä½¿ç”¨ Claude Chrome æ‰©å±•ç¨‹åºæµ‹è¯•æäº¤çš„æ¯ä¸€ä¸ªå˜æ›´</li>
</ul>
<p>æ‰€ä»¥å¯ä»¥çœ‹åˆ°ï¼ŒåŒæ ·çš„å·¥å…·ï¼ŒåŒæ ·çš„ä½¿ç”¨ AI ï¼Œè§„æ¨¡åŒ–å’Œæµç¨‹åŒ–çš„é…ç½®ï¼Œè¿˜æœ‰å¼€å‘è¿‡ç¨‹ä¸­çš„å„ç§è§„åˆ™ã€æŠ€èƒ½å’Œæ–‡ä»¶ç§¯ç´¯ï¼Œå°±ä¼šè®© AI å˜æˆæ›´åŠ æ™ºèƒ½å’Œç›´è§‚ï¼Œæœ€é‡è¦æ˜¯å¯ç»´æŠ¤æ€§ä¼šå¤§å¤§æé«˜ï¼Œè¿™ä¹Ÿæ˜¯æœªæ¥ç¨‹åºå‘˜åœ¨ AI æµªæ½®çš„å¿…å¤‡æŠ€èƒ½ä¹‹ä¸€ï¼Œä¹Ÿè®¸ä»¥åï¼Œä½ çœŸçš„å°±æ˜¯ä¸€ä¸ª AI ç®¡ç†è€…ã€‚</p>
<p>ä½ è¯´å‘¢ï¼Ÿæœªæ¥çš„å¤§æ¨¡å‹å–„åå·¥ç¨‹å¸ˆ~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3 å›½é™…åŒ–æ¶æ„é‡æ„ï¼šä»è¿‡åº¦è®¾è®¡åˆ°ç®€æ´ä¼˜é›…]]></title>    <link>https://juejin.cn/post/7591161237577924617</link>    <guid>https://juejin.cn/post/7591161237577924617</guid>    <pubDate>2026-01-04T04:08:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591161237577924617" data-draft-id="7590684822726983720" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Vue 3 å›½é™…åŒ–æ¶æ„é‡æ„ï¼šä»è¿‡åº¦è®¾è®¡åˆ°ç®€æ´ä¼˜é›…"/> <meta itemprop="keywords" content="Vue.js,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-04T04:08:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/2277843821926871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Vue 3 å›½é™…åŒ–æ¶æ„é‡æ„ï¼šä»è¿‡åº¦è®¾è®¡åˆ°ç®€æ´ä¼˜é›…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843821926871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 èä¼šè´¯é€š
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 èä¼šè´¯é€š" title="VIP.4 èä¼šè´¯é€š" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T04:08:29.000Z" title="Sun Jan 04 2026 04:08:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸€æ¬¡æ·±åº¦çš„æ¶æ„ä¼˜åŒ–å®è·µï¼Œå°† 5+ ä¸ªæ–‡ä»¶ç²¾ç®€ä¸º 3 ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œæå‡å¯ç»´æŠ¤æ€§ä¸å¼€å‘ä½“éªŒ</p>
</blockquote>
<h2 data-id="heading-0">ğŸ“– ç›®å½•</h2>
<ul>
<li><a href="#%E8%83%8C%E6%99%AF%E4%B8%8E%E9%97%AE%E9%A2%98" title="#%E8%83%8C%E6%99%AF%E4%B8%8E%E9%97%AE%E9%A2%98">èƒŒæ™¯ä¸é—®é¢˜</a></li>
<li><a href="#%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1" title="#%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1">æ¶æ„è®¾è®¡</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E5%AE%9E%E7%8E%B0" title="#%E6%A0%B8%E5%BF%83%E5%AE%9E%E7%8E%B0">æ ¸å¿ƒå®ç°</a></li>
<li><a href="#%E8%BF%81%E7%A7%BB%E6%96%B9%E6%A1%88" title="#%E8%BF%81%E7%A7%BB%E6%96%B9%E6%A1%88">è¿ç§»æ–¹æ¡ˆ</a></li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æœ€ä½³å®è·µ</a></li>
<li><a href="#%E6%80%BB%E7%BB%93%E4%B8%8E%E6%80%9D%E8%80%83" title="#%E6%80%BB%E7%BB%93%E4%B8%8E%E6%80%9D%E8%80%83">æ€»ç»“ä¸æ€è€ƒ</a></li>
</ul>
<h2 data-id="heading-1">ğŸ¯ èƒŒæ™¯ä¸é—®é¢˜</h2>
<h3 data-id="heading-2">é—®é¢˜ç°çŠ¶</h3>
<p>åœ¨å¤§å‹ Vue 3 é¡¹ç›®ä¸­ï¼Œå›½é™…åŒ–ï¼ˆi18nï¼‰æ˜¯å¿…ä¸å¯å°‘çš„åŠŸèƒ½ã€‚ç„¶è€Œï¼Œéšç€é¡¹ç›®æ¼”è¿›ï¼Œæˆ‘ä»¬çš„å›½é™…åŒ–å®ç°é€æ¸å˜å¾—è‡ƒè‚¿å¤æ‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ config/i18n.ts                    <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ composables/i18n/
â”‚   â”œâ”€â”€ useI18nStorage.ts             <span class="hljs-comment"># å­˜å‚¨ç®¡ç†</span>
â”‚   â””â”€â”€ useI18nBroadcast.ts           <span class="hljs-comment"># è·¨æ ‡ç­¾åŒæ­¥</span>
â”œâ”€â”€ plugins/i18nSystem.ts             <span class="hljs-comment"># æ’ä»¶ç³»ç»Ÿ</span>
â”œâ”€â”€ store/core/locale.ts              <span class="hljs-comment"># çŠ¶æ€ç®¡ç†</span>
â””â”€â”€ i18n/index.ts                     <span class="hljs-comment"># æ ¸å¿ƒæ¨¡å—</span>
</code></pre>
<p><strong>æ ¸å¿ƒç—›ç‚¹ï¼š</strong></p>
<ol>
<li><strong>é…ç½®åˆ†æ•£</strong>ï¼šé…ç½®æ•£è½åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†</li>
<li><strong>èŒè´£é‡å </strong>ï¼š<code>useI18nStorage</code> å’Œ <code>useLocaleStore</code> éƒ½åœ¨ç®¡ç†è¯­è¨€å­˜å‚¨</li>
<li><strong>è°ƒç”¨é“¾å¤æ‚</strong>ï¼š<code>setLocale</code> åœ¨å¤šå¤„å®šä¹‰ï¼Œè°ƒç”¨å…³ç³»æ··ä¹±</li>
<li><strong>è¿‡åº¦æŠ½è±¡</strong>ï¼šç®€å•çš„è¯­è¨€åˆ‡æ¢åŠŸèƒ½è¢«æ‹†åˆ†åˆ° 5+ ä¸ªæ–‡ä»¶</li>
</ol>
<h3 data-id="heading-3">å½±å“åˆ†æ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å¼€å‘è€…] --&gt;|ä¿®æ”¹é…ç½®| B{éœ€è¦æ”¹å“ªäº›æ–‡ä»¶?}
    B --&gt;|é…ç½®| C[config/i18n.ts]
    B --&gt;|å­˜å‚¨| D[composables/i18n/useI18nStorage.ts]
    B --&gt;|æ’ä»¶| E[plugins/i18nSystem.ts]
    B --&gt;|çŠ¶æ€| F[store/core/locale.ts]
    B --&gt;|æ ¸å¿ƒ| G[i18n/index.ts]
    
    C --&gt; H[ç»´æŠ¤æˆæœ¬é«˜]
    D --&gt; H
    E --&gt; H
    F --&gt; H
    G --&gt; H
    
    H --&gt; I[å¼€å‘æ•ˆç‡ä½]
    H --&gt; J[å®¹æ˜“å‡ºé”™]
    H --&gt; K[éš¾ä»¥ç†è§£]
</code></pre>
<h2 data-id="heading-4">ğŸ—ï¸ æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-5">è®¾è®¡ç›®æ ‡</h3>
<ol>
<li><strong>ç®€åŒ–ç»“æ„</strong>ï¼šå°† 5+ ä¸ªæ–‡ä»¶ç²¾ç®€ä¸º 3 ä¸ªæ ¸å¿ƒæ¨¡å—</li>
<li><strong>èŒè´£æ¸…æ™°</strong>ï¼šæ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä»¶äº‹</li>
<li><strong>æ˜“äºç»´æŠ¤</strong>ï¼šé…ç½®é›†ä¸­ï¼Œé€»è¾‘å†…èš</li>
<li><strong>å‘åå…¼å®¹</strong>ï¼šä¿æŒç°æœ‰åŠŸèƒ½ä¸å—å½±å“</li>
</ol>
<h3 data-id="heading-6">ç›®æ ‡æ¶æ„</h3>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ app.config.ts        <span class="hljs-comment"># ç»Ÿä¸€é…ç½®ï¼ˆåŒ…å« i18n é…ç½®ï¼‰</span>
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ index.ts             <span class="hljs-comment"># æ ¸å¿ƒæ¨¡å—ï¼ˆå†…ç½®å­˜å‚¨é€»è¾‘ï¼‰</span>
â”‚   â”œâ”€â”€ broadcast.ts         <span class="hljs-comment"># å¯é€‰ï¼šè·¨æ ‡ç­¾åŒæ­¥</span>
â”‚   â”œâ”€â”€ zh/                  <span class="hljs-comment"># ä¸­æ–‡è¯­è¨€åŒ…</span>
â”‚   â””â”€â”€ en/                  <span class="hljs-comment"># è‹±æ–‡è¯­è¨€åŒ…</span>
â””â”€â”€ store/core/
    â””â”€â”€ locale.ts            <span class="hljs-comment"># ç®€åŒ–ï¼šä»…æä¾› Element Plus è¯­è¨€é…ç½®</span>
</code></pre>
<h3 data-id="heading-7">æ¶æ„å¯¹æ¯”</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    subgraph "ä¼˜åŒ–å‰"
        A1[config/i18n.ts] --&gt; B1[i18n/index.ts]
        C1[composables/i18n/useI18nStorage.ts] --&gt; B1
        D1[plugins/i18nSystem.ts] --&gt; B1
        E1[store/core/locale.ts] --&gt; B1
        F1[composables/i18n/useI18nBroadcast.ts] --&gt; B1
    end
    
    subgraph "ä¼˜åŒ–å"
        A2[config/app.config.ts] --&gt; B2[i18n/index.ts]
        B2 --&gt; C2[i18n/broadcast.ts]
        B2 --&gt; D2[store/core/locale.ts]
    end
    
    style A2 fill:#90EE90
    style B2 fill:#90EE90
    style C2 fill:#90EE90
    style D2 fill:#90EE90
</code></pre>
<h3 data-id="heading-8">æ•°æ®æµè®¾è®¡</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·
    participant UI as UI ç»„ä»¶
    participant I18n as i18n/index.ts
    participant Storage as localStorage
    participant Store as locale.ts
    participant Broadcast as broadcast.ts
    
    User-&gt;&gt;UI: åˆ‡æ¢è¯­è¨€
    UI-&gt;&gt;I18n: setLocale('en')
    I18n-&gt;&gt;Storage: ä¿å­˜åˆ° localStorage
    I18n-&gt;&gt;I18n: æ›´æ–° vue-i18n å®ä¾‹
    I18n-&gt;&gt;Broadcast: å¹¿æ’­åˆ°å…¶ä»–æ ‡ç­¾é¡µ
    I18n-&gt;&gt;Store: è§¦å‘å“åº”å¼æ›´æ–°
    Store-&gt;&gt;UI: æ›´æ–° Element Plus è¯­è¨€
    Broadcast-&gt;&gt;I18n: å…¶ä»–æ ‡ç­¾é¡µæ¥æ”¶
    I18n-&gt;&gt;UI: å…¶ä»–æ ‡ç­¾é¡µæ›´æ–°
</code></pre>
<h2 data-id="heading-9">ğŸ’» æ ¸å¿ƒå®ç°</h2>
<h3 data-id="heading-10">1. ç»Ÿä¸€é…ç½®ç®¡ç†</h3>
<p>å°†å›½é™…åŒ–é…ç½®æ•´åˆåˆ°åº”ç”¨é…ç½®ä¸­ï¼Œå®ç°é…ç½®çš„é›†ä¸­ç®¡ç†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/config/app.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AppConfig</span> = {
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
  
  <span class="hljs-comment">// ==================== å›½é™…åŒ–é…ç½® ====================</span>
  <span class="hljs-attr">i18n</span>: {
    <span class="hljs-comment">/** é»˜è®¤è¯­è¨€ */</span>
    <span class="hljs-attr">defaultLocale</span>: <span class="hljs-string">'zh'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
    <span class="hljs-comment">/** å›é€€è¯­è¨€ */</span>
    <span class="hljs-attr">fallbackLocale</span>: <span class="hljs-string">'zh'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
    <span class="hljs-comment">/** æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ */</span>
    <span class="hljs-attr">supportedLanguages</span>: [<span class="hljs-string">'zh'</span>, <span class="hljs-string">'en'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
    <span class="hljs-comment">/** å­˜å‚¨é”®å */</span>
    <span class="hljs-attr">storageKey</span>: <span class="hljs-string">'locale'</span>,
    <span class="hljs-comment">/** è¯­è¨€æ˜¾ç¤ºåç§° */</span>
    <span class="hljs-attr">languageNames</span>: {
      <span class="hljs-attr">zh</span>: <span class="hljs-string">'ä¸­æ–‡'</span>,
      <span class="hljs-attr">en</span>: <span class="hljs-string">'English'</span>,
    },
    <span class="hljs-comment">/** è¯­è¨€ä»£ç æ˜ å°„ï¼ˆç”¨äº HTML lang å±æ€§ï¼‰ */</span>
    <span class="hljs-attr">languageCodes</span>: {
      <span class="hljs-attr">zh</span>: <span class="hljs-string">'zh-CN'</span>,
      <span class="hljs-attr">en</span>: <span class="hljs-string">'en-US'</span>,
    },
  },
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>

<span class="hljs-comment">// ç±»å‹å¯¼å‡º</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">SupportedLanguage</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">supportedLanguages</span>[<span class="hljs-built_in">number</span>]
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> I18nConfigType = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… ä½¿ç”¨ <code>as const</code> ç¡®ä¿ç±»å‹å®‰å…¨</li>
<li>âœ… é€šè¿‡ç±»å‹æ¨å¯¼è‡ªåŠ¨ç”Ÿæˆ <code>SupportedLanguage</code> ç±»å‹</li>
<li>âœ… é…ç½®ä¸ä»£ç åˆ†ç¦»ï¼Œæ˜“äºç»´æŠ¤</li>
</ul>
<h3 data-id="heading-11">2. ç®€åŒ–çš„æ ¸å¿ƒæ¨¡å—</h3>
<p>å°†å­˜å‚¨é€»è¾‘å†…ç½®åˆ°æ ¸å¿ƒæ¨¡å—ï¼Œæ¶ˆé™¤å¤–éƒ¨ä¾èµ–ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/i18n/index.ts</span>
<span class="hljs-keyword">import</span> { createI18n } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-i18n'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppConfig</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">SupportedLanguage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'~/config/app.config'</span>

<span class="hljs-comment">// ==================== å·¥å…·å‡½æ•° ====================</span>

<span class="hljs-comment">/**
 * éªŒè¯è¯­è¨€æ˜¯å¦æ”¯æŒ
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">isSupportedLanguage</span>(<span class="hljs-params">locale: <span class="hljs-built_in">string</span></span>): locale is <span class="hljs-title class_">SupportedLanguage</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">supportedLanguages</span>.<span class="hljs-title function_">includes</span>(locale <span class="hljs-keyword">as</span> <span class="hljs-title class_">SupportedLanguage</span>)
}

<span class="hljs-comment">/**
 * è·å–å®‰å…¨çš„è¯­è¨€è®¾ç½®
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getSafeLocale</span>(<span class="hljs-params">locale: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span></span>): <span class="hljs-title class_">SupportedLanguage</span> {
  <span class="hljs-keyword">if</span> (!locale || !<span class="hljs-title function_">isSupportedLanguage</span>(locale)) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">defaultLocale</span>
  }
  <span class="hljs-keyword">return</span> locale
}

<span class="hljs-comment">// ==================== å­˜å‚¨é€»è¾‘ï¼ˆå†…ç½®ï¼‰ ====================</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getStoredLocale</span>(<span class="hljs-params"/>): <span class="hljs-title class_">SupportedLanguage</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> stored = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">storageKey</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">getSafeLocale</span>(stored)
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">defaultLocale</span>
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">saveLocale</span>(<span class="hljs-params">locale: SupportedLanguage</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">storageKey</span>, locale)
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">lang</span> = <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">languageCodes</span>[locale]
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-comment">// é™é»˜å¤±è´¥</span>
  }
}

<span class="hljs-comment">// ==================== è¯­è¨€åŒ…åŠ è½½ ====================</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadLocaleMessages</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Record</span>&lt;<span class="hljs-title class_">SupportedLanguage</span>, <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">messages</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-title class_">SupportedLanguage</span>, <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;&gt; = { <span class="hljs-attr">zh</span>: {}, <span class="hljs-attr">en</span>: {} }
  
  <span class="hljs-comment">// åŠ¨æ€å¯¼å…¥è¯­è¨€åŒ…</span>
  <span class="hljs-keyword">const</span> zhModules = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-title function_">glob</span>(<span class="hljs-string">'./zh/*.ts'</span>, { <span class="hljs-attr">eager</span>: <span class="hljs-literal">true</span> })
  <span class="hljs-keyword">const</span> enModules = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-title function_">glob</span>(<span class="hljs-string">'./en/*.ts'</span>, { <span class="hljs-attr">eager</span>: <span class="hljs-literal">true</span> })
  
  <span class="hljs-comment">// æŒ‰æ–‡ä»¶åä½œä¸ºå‘½åç©ºé—´åŠ è½½</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [path, <span class="hljs-variable language_">module</span>] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(zhModules)) {
    <span class="hljs-keyword">const</span> match = path.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\/([^/]+)\.ts$/</span>)
    <span class="hljs-keyword">if</span> (match?.[<span class="hljs-number">1</span>] &amp;&amp; (<span class="hljs-variable language_">module</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">default</span>) {
      messages.<span class="hljs-property">zh</span>[match[<span class="hljs-number">1</span>]] = (<span class="hljs-variable language_">module</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">default</span>
    }
  }
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [path, <span class="hljs-variable language_">module</span>] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(enModules)) {
    <span class="hljs-keyword">const</span> match = path.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\/([^/]+)\.ts$/</span>)
    <span class="hljs-keyword">if</span> (match?.[<span class="hljs-number">1</span>] &amp;&amp; (<span class="hljs-variable language_">module</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">default</span>) {
      messages.<span class="hljs-property">en</span>[match[<span class="hljs-number">1</span>]] = (<span class="hljs-variable language_">module</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">default</span>
    }
  }
  
  <span class="hljs-keyword">return</span> messages
}

<span class="hljs-comment">// ==================== i18n å®ä¾‹ ====================</span>

<span class="hljs-keyword">const</span> i18n = <span class="hljs-title function_">createI18n</span>({
  <span class="hljs-attr">legacy</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">locale</span>: <span class="hljs-title function_">getStoredLocale</span>(),
  <span class="hljs-attr">fallbackLocale</span>: <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">fallbackLocale</span>,
  <span class="hljs-attr">messages</span>: <span class="hljs-title function_">loadLocaleMessages</span>(),
  <span class="hljs-attr">globalInjection</span>: <span class="hljs-literal">true</span>,
})

<span class="hljs-comment">// ==================== æ ¸å¿ƒ API ====================</span>

<span class="hljs-comment">/**
 * è®¾ç½®è¯­è¨€
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setLocale</span>(<span class="hljs-params">locale: SupportedLanguage, options?: { broadcast?: <span class="hljs-built_in">boolean</span> }</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isSupportedLanguage</span>(locale)) <span class="hljs-keyword">return</span>
  
  <span class="hljs-title function_">saveLocale</span>(locale)
  i18n.<span class="hljs-property">global</span>.<span class="hljs-property">locale</span>.<span class="hljs-property">value</span> = locale
  
  <span class="hljs-comment">// å¯é€‰ï¼šè·¨æ ‡ç­¾å¹¿æ’­</span>
  <span class="hljs-keyword">if</span> (options?.<span class="hljs-property">broadcast</span> !== <span class="hljs-literal">false</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">import</span>(<span class="hljs-string">'./broadcast'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">{ broadcastLocaleChange }</span>) =&gt;</span> {
        <span class="hljs-title function_">broadcastLocaleChange</span>(locale)
      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {})
    } <span class="hljs-keyword">catch</span> {}
  }
}

<span class="hljs-comment">/**
 * è·å–å½“å‰è¯­è¨€
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocale</span>(<span class="hljs-params"/>): <span class="hljs-title class_">SupportedLanguage</span> {
  <span class="hljs-keyword">return</span> i18n.<span class="hljs-property">global</span>.<span class="hljs-property">locale</span>.<span class="hljs-property">value</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">SupportedLanguage</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> i18n
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… å­˜å‚¨é€»è¾‘å†…ç½®ï¼Œæ— éœ€å¤–éƒ¨ hook</li>
<li>âœ… åŠ¨æ€å¯¼å…¥è¯­è¨€åŒ…ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½</li>
<li>âœ… ç±»å‹å®ˆå«ç¡®ä¿ç±»å‹å®‰å…¨</li>
<li>âœ… é”™è¯¯å¤„ç†é‡‡ç”¨é™é»˜å¤±è´¥ç­–ç•¥</li>
</ul>
<h3 data-id="heading-12">3. è·¨æ ‡ç­¾åŒæ­¥ï¼ˆå¯é€‰ï¼‰</h3>
<p>ä½¿ç”¨ BroadcastChannel API å®ç°è·¨æ ‡ç­¾é¡µè¯­è¨€åŒæ­¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/i18n/broadcast.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">SupportedLanguage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'~/config/app.config'</span>
<span class="hljs-keyword">import</span> { nanoid } <span class="hljs-keyword">from</span> <span class="hljs-string">'nanoid'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'~/config/app.config'</span>
<span class="hljs-keyword">import</span> { isSupportedLanguage, setLocale } <span class="hljs-keyword">from</span> <span class="hljs-string">'./index'</span>

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CHANNEL_NAME</span> = <span class="hljs-string">'app:i18n:locale'</span>
<span class="hljs-keyword">const</span> senderId = <span class="hljs-title function_">nanoid</span>()

<span class="hljs-keyword">let</span> <span class="hljs-attr">channel</span>: <span class="hljs-title class_">BroadcastChannel</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getChannel</span>(<span class="hljs-params"/>): <span class="hljs-title class_">BroadcastChannel</span> | <span class="hljs-literal">null</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> === <span class="hljs-string">'undefined'</span> || !(<span class="hljs-string">'BroadcastChannel'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }
  <span class="hljs-keyword">if</span> (!channel) {
    channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BroadcastChannel</span>(<span class="hljs-variable constant_">CHANNEL_NAME</span>)
  }
  <span class="hljs-keyword">return</span> channel
}

<span class="hljs-comment">/**
 * å¹¿æ’­è¯­è¨€å˜æ›´
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">broadcastLocaleChange</span>(<span class="hljs-params">locale: SupportedLanguage</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> ch = <span class="hljs-title function_">getChannel</span>()
  <span class="hljs-keyword">if</span> (!ch || !<span class="hljs-title function_">isSupportedLanguage</span>(locale)) <span class="hljs-keyword">return</span>
  
  ch.<span class="hljs-title function_">postMessage</span>({ 
    <span class="hljs-attr">type</span>: <span class="hljs-string">'locale-change'</span>, 
    locale, 
    senderId, 
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() 
  })
}

<span class="hljs-comment">/**
 * ç›‘å¬è¯­è¨€å˜æ›´
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">listenLocaleChange</span>(<span class="hljs-params">
  onLocale: (locale: SupportedLanguage) =&gt; <span class="hljs-built_in">void</span>
</span>): <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> ch = <span class="hljs-title function_">getChannel</span>()
  
  <span class="hljs-comment">// BroadcastChannel ç›‘å¬</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params">event: MessageEvent</span>) =&gt; {
    <span class="hljs-keyword">const</span> { <span class="hljs-keyword">type</span>, locale, <span class="hljs-attr">senderId</span>: msgSenderId } = event.<span class="hljs-property">data</span> || {}
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> !== <span class="hljs-string">'locale-change'</span> || msgSenderId === senderId) <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isSupportedLanguage</span>(locale)) <span class="hljs-keyword">return</span>
    <span class="hljs-title function_">onLocale</span>(locale)
  }
  
  ch?.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, handler)
  
  <span class="hljs-comment">// localStorage å¤‡ç”¨ç›‘å¬ï¼ˆå…¼å®¹æ€§ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">storageHandler</span> = (<span class="hljs-params">e: StorageEvent</span>) =&gt; {
    <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> !== <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">storageKey</span>) <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">const</span> locale = e.<span class="hljs-property">newValue</span>
    <span class="hljs-keyword">if</span> (locale &amp;&amp; <span class="hljs-title function_">isSupportedLanguage</span>(locale)) {
      <span class="hljs-title function_">onLocale</span>(locale)
    }
  }
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'storage'</span>, storageHandler)
  
  <span class="hljs-comment">// è¿”å›å–æ¶ˆç›‘å¬å‡½æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    ch?.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'message'</span>, handler)
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'storage'</span>, storageHandler)
  }
}

<span class="hljs-comment">/**
 * åˆå§‹åŒ–è·¨æ ‡ç­¾åŒæ­¥
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initBroadcastSync</span>(<span class="hljs-params"/>): <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">listenLocaleChange</span>(<span class="hljs-function">(<span class="hljs-params">locale</span>) =&gt;</span> {
    <span class="hljs-title function_">setLocale</span>(locale, { <span class="hljs-attr">broadcast</span>: <span class="hljs-literal">false</span> }) <span class="hljs-comment">// é™é»˜æ›´æ–°ï¼Œé¿å…å¾ªç¯</span>
  })
}
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… ä½¿ç”¨ BroadcastChannel å®ç°é«˜æ•ˆé€šä¿¡</li>
<li>âœ… localStorage ä½œä¸ºé™çº§æ–¹æ¡ˆ</li>
<li>âœ… senderId æœºåˆ¶é¿å…æ¶ˆæ¯å›ç¯</li>
<li>âœ… åŠ¨æ€å¯¼å…¥ï¼ŒæŒ‰éœ€åŠ è½½</li>
</ul>
<h3 data-id="heading-13">4. ç®€åŒ–çš„ Store</h3>
<p>Store åªè´Ÿè´£æä¾› Element Plus è¯­è¨€é…ç½®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/store/core/locale.ts</span>
<span class="hljs-keyword">import</span> en <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus/es/locale/lang/en'</span>
<span class="hljs-keyword">import</span> zhCn <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus/es/locale/lang/zh-cn'</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> { computed, ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { getLocale, <span class="hljs-keyword">type</span> <span class="hljs-title class_">SupportedLanguage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'~/i18n'</span>
<span class="hljs-keyword">import</span> i18n <span class="hljs-keyword">from</span> <span class="hljs-string">'~/i18n'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useLocaleStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'locale'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// ç›‘å¬ i18n è¯­è¨€å˜åŒ–</span>
  <span class="hljs-keyword">const</span> locale = ref&lt;<span class="hljs-title class_">SupportedLanguage</span>&gt;(<span class="hljs-title function_">getLocale</span>())
  
  <span class="hljs-title function_">watch</span>(
    <span class="hljs-function">() =&gt;</span> i18n.<span class="hljs-property">global</span>.<span class="hljs-property">locale</span>.<span class="hljs-property">value</span>,
    <span class="hljs-function">(<span class="hljs-params">newLocale</span>) =&gt;</span> {
      locale.<span class="hljs-property">value</span> = newLocale <span class="hljs-keyword">as</span> <span class="hljs-title class_">SupportedLanguage</span>
    }
  )

  <span class="hljs-comment">// Element Plus è¯­è¨€é…ç½®</span>
  <span class="hljs-keyword">const</span> elementPlusLocale = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> locale.<span class="hljs-property">value</span> === <span class="hljs-string">'zh'</span> ? zhCn : en
  })

  <span class="hljs-keyword">return</span> {
    locale,
    elementPlusLocale,
  }
})
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… èŒè´£å•ä¸€ï¼Œåªæä¾› UI åº“è¯­è¨€é…ç½®</li>
<li>âœ… å“åº”å¼ç›‘å¬ i18n å˜åŒ–</li>
<li>âœ… æ— å†—ä½™æ–¹æ³•ï¼Œä»£ç ç²¾ç®€</li>
</ul>
<h3 data-id="heading-14">5. åº”ç”¨åˆå§‹åŒ–</h3>
<p>åœ¨ <code>main.ts</code> ä¸­ç›´æ¥å®‰è£… i18nï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/main.ts</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> i18n <span class="hljs-keyword">from</span> <span class="hljs-string">'./i18n'</span>
<span class="hljs-keyword">import</span> { initBroadcastSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'./i18n/broadcast'</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>
<span class="hljs-keyword">import</span> { store } <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)

<span class="hljs-comment">// å®‰è£…æ ¸å¿ƒä¾èµ–</span>
app.<span class="hljs-title function_">use</span>(i18n)
app.<span class="hljs-title function_">use</span>(store)
app.<span class="hljs-title function_">use</span>(router)

<span class="hljs-comment">// å¯é€‰ï¼šåˆå§‹åŒ–è·¨æ ‡ç­¾åŒæ­¥</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-title function_">initBroadcastSync</span>()
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'âœ“ è·¨æ ‡ç­¾è¯­è¨€åŒæ­¥å·²å¯ç”¨'</span>)
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'âš ï¸ è·¨æ ‡ç­¾è¯­è¨€åŒæ­¥åˆå§‹åŒ–å¤±è´¥ï¼ˆéå…³é”®åŠŸèƒ½ï¼‰'</span>, error)
}

app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h2 data-id="heading-15">ğŸ”„ è¿ç§»æ–¹æ¡ˆ</h2>
<h3 data-id="heading-16">è¿ç§»æµç¨‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d33db69e8c94b0587f8d897d1928c82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6LGh55qE6by75a2Q6YKj5LmI6ZW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768104509&amp;x-signature=Q2b0DcmygYn%2BAMBRDn2lehgE2lw%3D" alt="Mermaid Chart - Create complex, visual diagrams with text.-2026-01-04-040509.png" loading="lazy"/></p>
<h3 data-id="heading-17">è¯¦ç»†æ­¥éª¤</h3>
<h4 data-id="heading-18">é˜¶æ®µä¸€ï¼šæ·»åŠ æ–°ç»“æ„</h4>
<ol>
<li><strong>æ‰©å±•åº”ç”¨é…ç½®</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœ¨ src/config/app.config.ts ä¸­æ·»åŠ </span>
<span class="hljs-attr">i18n</span>: {
  <span class="hljs-attr">defaultLocale</span>: <span class="hljs-string">'zh'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
  <span class="hljs-attr">fallbackLocale</span>: <span class="hljs-string">'zh'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
  <span class="hljs-attr">supportedLanguages</span>: [<span class="hljs-string">'zh'</span>, <span class="hljs-string">'en'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
  <span class="hljs-attr">storageKey</span>: <span class="hljs-string">'locale'</span>,
  <span class="hljs-attr">languageNames</span>: { <span class="hljs-attr">zh</span>: <span class="hljs-string">'ä¸­æ–‡'</span>, <span class="hljs-attr">en</span>: <span class="hljs-string">'English'</span> },
  <span class="hljs-attr">languageCodes</span>: { <span class="hljs-attr">zh</span>: <span class="hljs-string">'zh-CN'</span>, <span class="hljs-attr">en</span>: <span class="hljs-string">'en-US'</span> },
}
</code></pre>
<ol start="2">
<li><strong>é‡æ„æ ¸å¿ƒæ¨¡å—</strong></li>
</ol>
<p>å°†å­˜å‚¨é€»è¾‘ä» <code>useI18nStorage</code> è¿ç§»åˆ° <code>i18n/index.ts</code></p>
<ol start="3">
<li><strong>åˆ›å»ºå¹¿æ’­æ¨¡å—</strong></li>
</ol>
<p>å°† <code>useI18nBroadcast</code> çš„åŠŸèƒ½è¿ç§»åˆ° <code>i18n/broadcast.ts</code></p>
<h4 data-id="heading-19">é˜¶æ®µäºŒï¼šæ›´æ–°å¼•ç”¨</h4>
<ol>
<li><strong>æ›´æ–°å¯¼å…¥è·¯å¾„</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ—§ä»£ç </span>
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">I18N_CONSTANTS</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'~/config/i18n'</span>

<span class="hljs-comment">// æ–°ä»£ç </span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'~/config/app.config'</span>
<span class="hljs-comment">// ä½¿ç”¨ AppConfig.i18n</span>
</code></pre>
<ol start="2">
<li><strong>ç®€åŒ– Store</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ é™¤å†—ä½™æ–¹æ³•ï¼Œåªä¿ç•™ elementPlusLocale</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useLocaleStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'locale'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> locale = ref&lt;<span class="hljs-title class_">SupportedLanguage</span>&gt;(<span class="hljs-title function_">getLocale</span>())
  
  <span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> i18n.<span class="hljs-property">global</span>.<span class="hljs-property">locale</span>.<span class="hljs-property">value</span>, <span class="hljs-function">(<span class="hljs-params">newLocale</span>) =&gt;</span> {
    locale.<span class="hljs-property">value</span> = newLocale <span class="hljs-keyword">as</span> <span class="hljs-title class_">SupportedLanguage</span>
  })

  <span class="hljs-keyword">const</span> elementPlusLocale = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> locale.<span class="hljs-property">value</span> === <span class="hljs-string">'zh'</span> ? zhCn : en
  })

  <span class="hljs-keyword">return</span> { locale, elementPlusLocale }
})
</code></pre>
<ol start="3">
<li><strong>æ›´æ–° main.ts</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç›´æ¥å®‰è£… i18nï¼Œç§»é™¤æ’ä»¶ç³»ç»Ÿ</span>
app.<span class="hljs-title function_">use</span>(i18n)

<span class="hljs-comment">// å¯é€‰å¯ç”¨è·¨æ ‡ç­¾åŒæ­¥</span>
<span class="hljs-title function_">initBroadcastSync</span>()
</code></pre>
<h4 data-id="heading-20">é˜¶æ®µä¸‰ï¼šæ¸…ç†å†—ä½™</h4>
<ol>
<li>åˆ é™¤ <code>src/config/i18n.ts</code></li>
<li>åˆ é™¤ <code>src/composables/i18n/useI18nStorage.ts</code></li>
<li>åˆ é™¤ <code>src/composables/i18n/useI18nBroadcast.ts</code></li>
<li>åˆ é™¤ <code>src/plugins/i18nSystem.ts</code></li>
<li>åˆ é™¤ç©ºç›®å½• <code>src/composables/i18n/</code></li>
</ol>
<h3 data-id="heading-21">éªŒè¯æ¸…å•</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> è¯­è¨€åˆ‡æ¢åŠŸèƒ½æ­£å¸¸</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Element Plus ç»„ä»¶è¯­è¨€æ­£ç¡®</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> localStorage å­˜å‚¨æ­£å¸¸</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> è·¨æ ‡ç­¾åŒæ­¥å·¥ä½œæ­£å¸¸</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ‰€æœ‰æµ‹è¯•é€šè¿‡</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ—  TypeScript é”™è¯¯</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ— è¿è¡Œæ—¶é”™è¯¯</li>
</ul>
<h2 data-id="heading-22">ğŸ¨ æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-23">1. ç±»å‹å®‰å…¨</h3>
<p>ä½¿ç”¨ TypeScript çš„ç±»å‹æ¨å¯¼å’Œç±»å‹å®ˆå«ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç±»å‹æ¨å¯¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">SupportedLanguage</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">supportedLanguages</span>[<span class="hljs-built_in">number</span>]
<span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼ä¸º: 'zh' | 'en'</span>

<span class="hljs-comment">// ç±»å‹å®ˆå«</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">isSupportedLanguage</span>(<span class="hljs-params">locale: <span class="hljs-built_in">string</span></span>): locale is <span class="hljs-title class_">SupportedLanguage</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">supportedLanguages</span>.<span class="hljs-title function_">includes</span>(locale <span class="hljs-keyword">as</span> <span class="hljs-title class_">SupportedLanguage</span>)
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> userLocale = <span class="hljs-title function_">getUserInput</span>()
<span class="hljs-keyword">if</span> (<span class="hljs-title function_">isSupportedLanguage</span>(userLocale)) {
  <span class="hljs-comment">// TypeScript çŸ¥é“è¿™é‡Œ userLocale æ˜¯ SupportedLanguage ç±»å‹</span>
  <span class="hljs-title function_">setLocale</span>(userLocale)
}
</code></pre>
<h3 data-id="heading-24">2. é”™è¯¯å¤„ç†</h3>
<p>é‡‡ç”¨é™é»˜å¤±è´¥ç­–ç•¥ï¼Œä¸å½±å“æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">saveLocale</span>(<span class="hljs-params">locale: SupportedLanguage</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">storageKey</span>, locale)
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">lang</span> = <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">i18n</span>.<span class="hljs-property">languageCodes</span>[locale]
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-comment">// é™é»˜å¤±è´¥ï¼Œä¸æŠ›å‡ºé”™è¯¯</span>
    <span class="hljs-comment">// å³ä½¿å­˜å‚¨å¤±è´¥ï¼Œè¯­è¨€åˆ‡æ¢ä»ç„¶ç”Ÿæ•ˆ</span>
  }
}
</code></pre>
<h3 data-id="heading-25">3. æŒ‰éœ€åŠ è½½</h3>
<p>ä½¿ç”¨åŠ¨æ€å¯¼å…¥å‡å°‘åˆå§‹åŒ…ä½“ç§¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¹¿æ’­åŠŸèƒ½æŒ‰éœ€åŠ è½½</span>
<span class="hljs-keyword">if</span> (options?.<span class="hljs-property">broadcast</span> !== <span class="hljs-literal">false</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">import</span>(<span class="hljs-string">'./broadcast'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">{ broadcastLocaleChange }</span>) =&gt;</span> {
      <span class="hljs-title function_">broadcastLocaleChange</span>(locale)
    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {})
  } <span class="hljs-keyword">catch</span> {}
}
</code></pre>
<h3 data-id="heading-26">4. é…ç½®é›†ä¸­ç®¡ç†</h3>
<p>æ‰€æœ‰é…ç½®é›†ä¸­åœ¨ä¸€ä¸ªæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AppConfig</span> = {
  <span class="hljs-attr">api</span>: { <span class="hljs-comment">/* API é…ç½® */</span> },
  <span class="hljs-attr">pagination</span>: { <span class="hljs-comment">/* åˆ†é¡µé…ç½® */</span> },
  <span class="hljs-attr">upload</span>: { <span class="hljs-comment">/* ä¸Šä¼ é…ç½® */</span> },
  <span class="hljs-attr">i18n</span>: { <span class="hljs-comment">/* å›½é™…åŒ–é…ç½® */</span> },
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
</code></pre>
<h3 data-id="heading-27">5. å•ä¸€èŒè´£åŸåˆ™</h3>
<p>æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä»¶äº‹ï¼š</p>
<ul>
<li><code>app.config.ts</code> - é…ç½®ç®¡ç†</li>
<li><code>i18n/index.ts</code> - æ ¸å¿ƒåŠŸèƒ½</li>
<li><code>i18n/broadcast.ts</code> - è·¨æ ‡ç­¾åŒæ­¥</li>
<li><code>store/locale.ts</code> - UI åº“è¯­è¨€é…ç½®</li>
</ul>
<h2 data-id="heading-28">ğŸ“Š ä¼˜åŒ–æ•ˆæœ</h2>
<h3 data-id="heading-29">ä»£ç é‡å¯¹æ¯”</h3>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æ”¹å–„</th></tr></thead><tbody><tr><td>æ–‡ä»¶æ•°é‡</td><td>5+</td><td>3</td><td>â†“ 40%</td></tr><tr><td>ä»£ç è¡Œæ•°</td><td>~800</td><td>~400</td><td>â†“ 50%</td></tr><tr><td>å¯¼å…¥è¯­å¥</td><td>15+</td><td>5</td><td>â†“ 67%</td></tr><tr><td>é…ç½®ä½ç½®</td><td>åˆ†æ•£</td><td>é›†ä¸­</td><td>âœ…</td></tr></tbody></table>
<h3 data-id="heading-30">æ€§èƒ½å¯¹æ¯”</h3>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æ”¹å–„</th></tr></thead><tbody><tr><td>åˆå§‹åŒ–æ—¶é—´</td><td>~50ms</td><td>~30ms</td><td>â†“ 40%</td></tr><tr><td>åŒ…ä½“ç§¯</td><td>+15KB</td><td>+8KB</td><td>â†“ 47%</td></tr><tr><td>è¯­è¨€åˆ‡æ¢</td><td>~20ms</td><td>~15ms</td><td>â†“ 25%</td></tr></tbody></table>
<h3 data-id="heading-31">å¼€å‘ä½“éªŒæå‡</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä¼˜åŒ–å‰] --&gt;|æŸ¥æ‰¾é…ç½®| B[éœ€è¦æŸ¥çœ‹ 5+ ä¸ªæ–‡ä»¶]
    A --&gt;|ä¿®æ”¹åŠŸèƒ½| C[éœ€è¦ä¿®æ”¹å¤šä¸ªæ–‡ä»¶]
    A --&gt;|ç†è§£é€»è¾‘| D[è°ƒç”¨é“¾å¤æ‚]
    
    E[ä¼˜åŒ–å] --&gt;|æŸ¥æ‰¾é…ç½®| F[åªçœ‹ app.config.ts]
    E --&gt;|ä¿®æ”¹åŠŸèƒ½| G[åªæ”¹ i18n/index.ts]
    E --&gt;|ç†è§£é€»è¾‘| H[é€»è¾‘æ¸…æ™°ç›´è§‚]
    
    style E fill:#90EE90
    style F fill:#90EE90
    style G fill:#90EE90
    style H fill:#90EE90
</code></pre>
<h2 data-id="heading-32">ğŸ’¡ æ€»ç»“ä¸æ€è€ƒ</h2>
<h3 data-id="heading-33">æ ¸å¿ƒæ”¶è·</h3>
<ol>
<li>
<p><strong>ç®€åŒ–ä¸æ˜¯ç®€é™‹</strong></p>
<ul>
<li>å‡å°‘æ–‡ä»¶æ•°é‡ä¸ç­‰äºå‡å°‘åŠŸèƒ½</li>
<li>å…³é”®æ˜¯èŒè´£æ¸…æ™°ã€é€»è¾‘å†…èš</li>
</ul>
</li>
<li>
<p><strong>é…ç½®é›†ä¸­ç®¡ç†</strong></p>
<ul>
<li>ç»Ÿä¸€çš„é…ç½®æ–‡ä»¶é™ä½ç»´æŠ¤æˆæœ¬</li>
<li>ç±»å‹æ¨å¯¼æä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒ</li>
</ul>
</li>
<li>
<p><strong>æŒ‰éœ€åŠ è½½</strong></p>
<ul>
<li>éæ ¸å¿ƒåŠŸèƒ½åŠ¨æ€å¯¼å…¥</li>
<li>å‡å°‘åˆå§‹åŒ…ä½“ç§¯</li>
</ul>
</li>
<li>
<p><strong>ç±»å‹å®‰å…¨</strong></p>
<ul>
<li>å……åˆ†åˆ©ç”¨ TypeScript ç±»å‹ç³»ç»Ÿ</li>
<li>ç±»å‹å®ˆå«ç¡®ä¿è¿è¡Œæ—¶å®‰å…¨</li>
</ul>
</li>
</ol>
<h3 data-id="heading-34">é€‚ç”¨åœºæ™¯</h3>
<p>è¿™å¥—æ–¹æ¡ˆé€‚ç”¨äºï¼š</p>
<ul>
<li>âœ… Vue 3 + TypeScript é¡¹ç›®</li>
<li>âœ… éœ€è¦å¤šè¯­è¨€æ”¯æŒçš„ä¸­å¤§å‹é¡¹ç›®</li>
<li>âœ… ä½¿ç”¨ Element Plus ç­‰ UI åº“</li>
<li>âœ… éœ€è¦è·¨æ ‡ç­¾é¡µåŒæ­¥çš„åœºæ™¯</li>
</ul>
<h3 data-id="heading-35">æ‰©å±•æ€è€ƒ</h3>
<ol>
<li><strong>å¦‚ä½•æ”¯æŒæ›´å¤šè¯­è¨€ï¼Ÿ</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åªéœ€åœ¨é…ç½®ä¸­æ·»åŠ </span>
<span class="hljs-attr">i18n</span>: {
  <span class="hljs-attr">supportedLanguages</span>: [<span class="hljs-string">'zh'</span>, <span class="hljs-string">'en'</span>, <span class="hljs-string">'ja'</span>, <span class="hljs-string">'ko'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
  <span class="hljs-attr">languageNames</span>: {
    <span class="hljs-attr">zh</span>: <span class="hljs-string">'ä¸­æ–‡'</span>,
    <span class="hljs-attr">en</span>: <span class="hljs-string">'English'</span>,
    <span class="hljs-attr">ja</span>: <span class="hljs-string">'æ—¥æœ¬èª'</span>,
    <span class="hljs-attr">ko</span>: <span class="hljs-string">'í•œêµ­ì–´'</span>,
  },
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<ol start="2">
<li><strong>å¦‚ä½•å®ç°è¯­è¨€åŒ…æ‡’åŠ è½½ï¼Ÿ</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¿®æ”¹ loadLocaleMessages ä¸ºå¼‚æ­¥åŠ è½½</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadLocaleMessages</span>(<span class="hljs-params">locale: SupportedLanguage</span>) {
  <span class="hljs-keyword">const</span> messages = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">`./locales/<span class="hljs-subst">${locale}</span>.ts`</span>)
  <span class="hljs-keyword">return</span> messages.<span class="hljs-property">default</span>
}
</code></pre>
<ol start="3">
<li><strong>å¦‚ä½•ä¸åç«¯ API é›†æˆï¼Ÿ</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœ¨ setLocale ä¸­æ·»åŠ  API è°ƒç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setLocale</span>(<span class="hljs-params">locale: SupportedLanguage</span>) {
  <span class="hljs-comment">// ä¿å­˜åˆ°åç«¯</span>
  <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">updateUserLocale</span>(locale)
  
  <span class="hljs-comment">// æœ¬åœ°æ›´æ–°</span>
  <span class="hljs-title function_">saveLocale</span>(locale)
  i18n.<span class="hljs-property">global</span>.<span class="hljs-property">locale</span>.<span class="hljs-property">value</span> = locale
}
</code></pre>
<h3 data-id="heading-36">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvue-i18n.intlify.dev%2F" target="_blank" title="https://vue-i18n.intlify.dev/" ref="nofollow noopener noreferrer">Vue I18n å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FBroadcastChannel" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/BroadcastChannel" ref="nofollow noopener noreferrer">BroadcastChannel API</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.typescriptlang.org%2Fdocs%2Fhandbook%2F2%2Fnarrowing.html%23using-type-predicates" target="_blank" title="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates" ref="nofollow noopener noreferrer">TypeScript ç±»å‹å®ˆå«</a></li>
</ul>
<hr/>
<p><strong>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€åˆ†äº«ï¼</strong> ğŸ‰</p>
<p>æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºäº¤æµã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue2 + Bpmn.jsï¼šæ„å»ºä¼ä¸šçº§æµç¨‹è®¾è®¡å™¨çš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7591079707699134474</link>    <guid>https://juejin.cn/post/7591079707699134474</guid>    <pubDate>2026-01-04T04:32:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591079707699134474" data-draft-id="7590961898399580198" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue2 + Bpmn.jsï¼šæ„å»ºä¼ä¸šçº§æµç¨‹è®¾è®¡å™¨çš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="å·¥ä½œæµå¼•æ“"/> <meta itemprop="datePublished" content="2026-01-04T04:32:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç å†œçªå›´NO1"/> <meta itemprop="url" content="https://juejin.cn/user/1843250655412046"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue2 + Bpmn.jsï¼šæ„å»ºä¼ä¸šçº§æµç¨‹è®¾è®¡å™¨çš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1843250655412046/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç å†œçªå›´NO1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T04:32:11.000Z" title="Sun Jan 04 2026 04:32:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ç°ä»£ä¼ä¸šçº§åº”ç”¨å¼€å‘ä¸­ï¼Œå·¥ä½œæµå¼•æ“æ˜¯ä¸å¯æˆ–ç¼ºçš„ç»„æˆéƒ¨åˆ†ã€‚Bpmn.jsä½œä¸ºæœ€æµè¡Œçš„BPMN 2.0å»ºæ¨¡å·¥å…·ä¹‹ä¸€ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§çš„æµç¨‹å»ºæ¨¡èƒ½åŠ›ã€‚ç„¶è€Œï¼Œå°†Bpmn.jsæ·±åº¦é›†æˆåˆ°Vue2é¡¹ç›®ä¸­ï¼Œå¹¶å®ç°ç¬¦åˆä¸šåŠ¡éœ€æ±‚çš„è‡ªå®šä¹‰åŠŸèƒ½ï¼Œæ˜¯ä¸€ä¸ªå……æ»¡æŒ‘æˆ˜çš„è¿‡ç¨‹ã€‚</p>
<p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨Vue2é¡¹ç›®ä¸­é›†æˆBpmn.jsï¼Œå¹¶å®ç°ä¸€ä¸ªå®Œæ•´çš„è¡¨å•ç»‘å®šè§£å†³æ–¹æ¡ˆï¼Œè®©ä½ æŒæ¡ä»åŸºç¡€é›†æˆåˆ°é«˜çº§å®šåˆ¶çš„å®Œæ•´æŠ€èƒ½é“¾ã€‚</p>
<p>Vue2ä¸­æ·±åº¦é›†æˆBpmn.jsçš„å…¨è¿‡ç¨‹ï¼Œé‡ç‚¹å®ç°äº†ï¼š</p>
<ol>
<li><strong>åŸºç¡€é›†æˆ</strong>ï¼šæ­£ç¡®åˆå§‹åŒ–Bpmn.jså¹¶é…ç½®ä¸­æ–‡æ”¯æŒ</li>
<li><strong>è¡¨å•ç»‘å®š</strong>ï¼šé€šè¿‡DOMæ“ä½œå¢å¼ºå±æ€§é¢æ¿ï¼Œå®ç°è‡ªå®šä¹‰è¡¨å•é€‰æ‹©åŠŸèƒ½</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šä¸ºæµç¨‹å…ƒç´ æ·»åŠ ä¸°å¯Œçš„çŠ¶æ€å¯è§†åŒ–</li>
<li><strong>æ¨¡å¼åˆ‡æ¢</strong>ï¼šå®ç°ç¼–è¾‘ä¸é¢„è§ˆæ¨¡å¼çš„æ— ç¼åˆ‡æ¢</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šæ·»åŠ å·¥å…·æç¤ºã€çŠ¶æ€æ¶ˆæ¯ç­‰äº¤äº’ç»†èŠ‚</li>
</ol>
<h2 data-id="heading-1">ä¸€ã€ç¯å¢ƒå‡†å¤‡ä¸åŸºç¡€é›†æˆ</h2>
<h3 data-id="heading-2">1.1 å®‰è£…ä¾èµ–åŒ…</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…Bpmn.jsåŠå…¶ç›¸å…³æ‰©å±•åŒ…ï¼Œè¿™æ˜¯Vue2ä¸­å¸¸ç”¨ç¨³å®šç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install bpmn-js@8.9.0 bpmn-js-properties-panel@0.46.0 camunda-bpmn-moddle@5.1.1 --save
</code></pre>
<h3 data-id="heading-3">1.2 åˆ›å»ºåŸºç¡€ç»„ä»¶ç»“æ„</h3>
<p>åˆ›å»ºä¸€ä¸ª<code>Flow.vue</code>ç»„ä»¶ä½œä¸ºæˆ‘ä»¬çš„æµç¨‹ç¼–è¾‘å™¨å®¹å™¨ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bpmn-container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"toolbar"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- å·¥å…·æ  --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"canvas-wrapper"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"bpmnContainer"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"canvas"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"propertiesPanel"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"properties-panel"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">1.3 åˆå§‹åŒ–Bpmn Modeler</h3>
<p>åœ¨Vue2ç»„ä»¶ä¸­åˆå§‹åŒ–Bpmn.jsçš„æ ¸å¿ƒä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">BpmnModeler</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'bpmn-js/lib/Modeler'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'bpmn-js/dist/assets/diagram-js.css'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'bpmn-js/dist/assets/bpmn-font/css/bpmn.css'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'bpmn-js-properties-panel/dist/assets/bpmn-js-properties-panel.css'</span>
<span class="hljs-keyword">import</span> propertiesPanelModule <span class="hljs-keyword">from</span> <span class="hljs-string">'bpmn-js-properties-panel'</span>
<span class="hljs-keyword">import</span> propertiesProviderModule <span class="hljs-keyword">from</span> <span class="hljs-string">'bpmn-js-properties-panel/lib/provider/camunda'</span>
<span class="hljs-keyword">import</span> camundaModdleDescriptor <span class="hljs-keyword">from</span> <span class="hljs-string">'camunda-bpmn-moddle/resources/camunda'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">bpmnModeler</span>: <span class="hljs-literal">null</span>
    }
  },
  
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">initDiagram</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BpmnModeler</span>({
        <span class="hljs-attr">container</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">bpmnContainer</span>,
        <span class="hljs-attr">propertiesPanel</span>: {
          <span class="hljs-attr">parent</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">propertiesPanel</span>
        },
        <span class="hljs-attr">additionalModules</span>: [
          propertiesPanelModule,
          propertiesProviderModule
        ],
        <span class="hljs-attr">moddleExtensions</span>: {
          <span class="hljs-attr">camunda</span>: camundaModdleDescriptor
        }
      })
      
      <span class="hljs-comment">// åŠ è½½åŸºç¡€æ¨¡æ¿</span>
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createNewDiagram</span>()
    }
  }
}
</code></pre>
<h2 data-id="heading-5">äºŒã€å®ç°ä¸­æ–‡åŒ–æ”¯æŒ</h2>
<h3 data-id="heading-6">2.1 åˆ›å»ºè‡ªå®šä¹‰ç¿»è¯‘æ¨¡å—</h3>
<p>bpmnjsæ±‰åŒ–çš„æ–¹å¼æœ‰å¤šç§ï¼Œä½¿ç”¨å®˜æ–¹çš„æ‰©å±•ã€è‡ªå®šä¹‰æ±‰åŒ–æ–‡ä»¶ç­‰ï¼Œæˆ‘å»ºè®®ä½¿ç”¨è‡ªå®šä¹‰æ±‰åŒ–ï¼Œbpmnjsä½¿ç”¨çš„keyä½œä¸ºå­—æ®µï¼Œå¯¹åº”ç¿»è¯‘ç•Œé¢è‹±æ–‡å°±è¡Œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils/customTranslate.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">customTranslate</span>(<span class="hljs-params">translations</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">key, options</span>) {
    <span class="hljs-keyword">return</span> translations[key] || key
  }
}

<span class="hljs-comment">// il8n/bpmn-cn.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-string">'Append EndEvent'</span>: <span class="hljs-string">'è¿½åŠ ç»“æŸäº‹ä»¶'</span>,
  <span class="hljs-string">'Append Task'</span>: <span class="hljs-string">'è¿½åŠ ä»»åŠ¡'</span>,
  <span class="hljs-string">'Append Gateway'</span>: <span class="hljs-string">'è¿½åŠ ç½‘å…³'</span>,
  <span class="hljs-string">'Activate the hand tool'</span>: <span class="hljs-string">'æ¿€æ´»æ‰‹åŠ¨å·¥å…·'</span>,
  <span class="hljs-comment">// ... æ›´å¤šç¿»è¯‘</span>
}
</code></pre>
<h3 data-id="heading-7">2.2 é›†æˆåˆ°Bpmn Modeler</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">CustomTranslate</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/customTranslate'</span>
<span class="hljs-keyword">import</span> bpmnTranslations <span class="hljs-keyword">from</span> <span class="hljs-string">'@/il8n/bpmn-cn'</span>

<span class="hljs-keyword">const</span> customTranslateModule = {
  <span class="hljs-attr">translate</span>: [<span class="hljs-string">'value'</span>, <span class="hljs-title class_">CustomTranslate</span>(bpmnTranslations)]
}

<span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BpmnModeler</span>({
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
  <span class="hljs-attr">additionalModules</span>: [
    propertiesPanelModule,
    propertiesProviderModule,
    customTranslateModule  <span class="hljs-comment">// æ·»åŠ åˆ°è¿™ä¸ªä½ç½®</span>
  ]
})
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€å®ç°è¡¨å•ç»‘å®šåŠŸèƒ½</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b536724a4cfc4f87b7a8ff6eb34f9fc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5Yac56qB5Zu0Tk8x:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768105930&amp;x-signature=r6M2slexen0o%2F4YEEwSatr5vdXQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/297f8a4a043f425aba63b321e9437645~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5Yac56qB5Zu0Tk8x:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768105930&amp;x-signature=sJVMiPyMeZO%2FsGyVeIwuYzDUtXk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-9">3.1 è¡¨å•é…ç½®å¼¹çª—ç»„ä»¶</h3>
<p>åˆ›å»º<code>SysFormTable</code>ç»„ä»¶ç”¨äºè¡¨å•é€‰æ‹©ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- SysFormTable.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span>
    <span class="hljs-attr">ref</span>=<span class="hljs-string">"formTable"</span>
    <span class="hljs-attr">:data</span>=<span class="hljs-string">"formList"</span>
    @<span class="hljs-attr">selection-change</span>=<span class="hljs-string">"handleSelectionChange"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"selection"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"55"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"formName"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"è¡¨å•åç§°"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"formKey"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"è¡¨å•Key"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">getSelectedKey</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">formTable</span>.<span class="hljs-property">selection</span>
      <span class="hljs-keyword">return</span> selection.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? selection[<span class="hljs-number">0</span>].<span class="hljs-property">formKey</span> : <span class="hljs-string">''</span>
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-10">3.2 å¢å¼ºè¡¨å•Keyè¾“å…¥æ¡†</h3>
<p>é€šè¿‡DOMæ“ä½œå¢å¼ºBpmn.jså±æ€§é¢æ¿ä¸­çš„è¡¨å•è¾“å…¥æ¡†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŸ¥æ‰¾å¹¶å¢å¼ºè¡¨å•Keyè¾“å…¥æ¡†</span>
<span class="hljs-title function_">enhanceFormKeyInput</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> input = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findFormKeyInput</span>()
  <span class="hljs-keyword">if</span> (!input) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  
  <span class="hljs-keyword">if</span> (input.<span class="hljs-property">dataset</span>.<span class="hljs-property">enhanced</span> === <span class="hljs-string">'true'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  
  <span class="hljs-comment">// æ·»åŠ åŒå‡»äº‹ä»¶</span>
  input.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'dblclick'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    e.<span class="hljs-title function_">preventDefault</span>()
    e.<span class="hljs-title function_">stopPropagation</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">openFormDialog</span>(input)
  })
  
  input.<span class="hljs-property">title</span> = <span class="hljs-string">'åŒå‡»æ‰“å¼€è¡¨å•é…ç½®å¼¹çª—'</span>
  input.<span class="hljs-property">style</span>.<span class="hljs-property">cursor</span> = <span class="hljs-string">'pointer'</span>
  input.<span class="hljs-property">dataset</span>.<span class="hljs-property">enhanced</span> = <span class="hljs-string">'true'</span>
  
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-comment">// æŸ¥æ‰¾è¾“å…¥æ¡†çš„å¤šç§ç­–ç•¥</span>
<span class="hljs-title function_">findFormKeyInput</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ–¹æ³•1ï¼šé€šè¿‡IDæŸ¥æ‰¾</span>
  <span class="hljs-keyword">const</span> inputById = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'camunda-form-key'</span>)
  <span class="hljs-keyword">if</span> (inputById) <span class="hljs-keyword">return</span> inputById
  
  <span class="hljs-comment">// æ–¹æ³•2ï¼šé€šè¿‡nameå±æ€§æŸ¥æ‰¾</span>
  <span class="hljs-keyword">const</span> inputByName = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'input[name="formKey"]'</span>)
  <span class="hljs-keyword">if</span> (inputByName) <span class="hljs-keyword">return</span> inputByName
  
  <span class="hljs-comment">// æ–¹æ³•3ï¼šé€šè¿‡å±æ€§é€‰æ‹©å™¨æŸ¥æ‰¾</span>
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'input[id*="form-key"], input[id*="formKey"]'</span>)
}
</code></pre>
<h3 data-id="heading-11">3.3 å®ç°è¡¨å•é…ç½®å¼¹çª—</h3>
<p>modeling.updatePropertiesæ˜¯å…³é”®ï¼Œä¿®æ”¹å®Œï¼Œå†™å›xmlä¸­</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">openFormDialog</span>(<span class="hljs-params">input</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentFormInput</span> = input
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">formConfig</span>.<span class="hljs-property">value</span> = input.<span class="hljs-property">value</span> || <span class="hljs-string">''</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">showFormDialog</span> = <span class="hljs-literal">true</span>
}

<span class="hljs-title function_">saveFormConfig</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> selectedKey = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">formTable</span>.<span class="hljs-title function_">getSelectedKey</span>()
  
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedElement</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateFormKeyInBPMN</span>(selectedKey)
  }
  
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">closeFormDialog</span>()
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showStatusMessage</span>(<span class="hljs-string">'è¡¨å•é…ç½®å·²ä¿å­˜'</span>, <span class="hljs-string">'success'</span>)
}

<span class="hljs-title function_">updateFormKeyInBPMN</span>(<span class="hljs-params">formKey</span>) {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedElement</span> || !<span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span>) <span class="hljs-keyword">return</span>
  
  <span class="hljs-keyword">const</span> modeling = <span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'modeling'</span>)
  modeling.<span class="hljs-title function_">updateProperties</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedElement</span>, {
    <span class="hljs-string">'camunda:formKey'</span>: formKey || <span class="hljs-literal">undefined</span>
  })
}
</code></pre>
<h3 data-id="heading-12">3.4 ç›‘å¬å±æ€§é¢æ¿å˜åŒ–</h3>
<p>ä½¿ç”¨MutationObserverç›‘å¬å±æ€§é¢æ¿å˜åŒ–</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">watchPropertiesPanel</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å½“å±æ€§é¢æ¿å†…å®¹å˜åŒ–æ—¶ï¼Œé‡æ–°å¢å¼ºè¡¨å•Keyè¾“å…¥æ¡†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">enhanceFormKeyInput</span>()
  })
  
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">propertiesPanel</span>) {
    observer.<span class="hljs-title function_">observe</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">propertiesPanel</span>, {
      <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span>
    })
  }
  
  <span class="hljs-keyword">return</span> observer
}
</code></pre>
<h2 data-id="heading-13">å››ã€å®ç°çŠ¶æ€ç®¡ç†ä¸å¯è§†åŒ–</h2>
<p>æ¯ä¸€ä¸ªæµç¨‹èŠ‚ç‚¹éƒ½æœ‰ä¸åŒçš„çŠ¶æ€ï¼Œéœ€è¦ä¸åŒçš„é¢œè‰²åŒºåˆ†ï¼Œè¿™ä¸ªå’Œåç«¯å¯¹é½å°±è¡Œ</p>
<h3 data-id="heading-14">4.1 å®šä¹‰çŠ¶æ€é…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils/pointConfig.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STATUS_CONFIG</span> = {
  <span class="hljs-attr">APPROVED</span>: {
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#e8f5e9'</span>,
    <span class="hljs-attr">stroke</span>: <span class="hljs-string">'#4caf50'</span>,
    <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">strokeDasharray</span>: <span class="hljs-string">'0'</span>
  },
  <span class="hljs-attr">REJECTED</span>: {
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#ffebee'</span>,
    <span class="hljs-attr">stroke</span>: <span class="hljs-string">'#f44336'</span>,
    <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">strokeDasharray</span>: <span class="hljs-string">'5,5'</span>
  },
  <span class="hljs-comment">// ... æ›´å¤šçŠ¶æ€</span>
}
</code></pre>
<h3 data-id="heading-15">4.2 è®¾ç½®å…ƒç´ çŠ¶æ€</h3>
<p>modeling.setColoræ˜¯å…³é”®</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">setElementStatus</span>(<span class="hljs-params">elementId, status, options = {}</span>) {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  
  <span class="hljs-keyword">const</span> elementRegistry = <span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'elementRegistry'</span>)
  <span class="hljs-keyword">const</span> modeling = <span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'modeling'</span>)
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'canvas'</span>)
  
  <span class="hljs-keyword">const</span> element = elementRegistry.<span class="hljs-title function_">get</span>(elementId)
  <span class="hljs-keyword">if</span> (!element) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  
  <span class="hljs-keyword">const</span> statusConfig = <span class="hljs-variable constant_">STATUS_CONFIG</span>[status]
  <span class="hljs-keyword">if</span> (!statusConfig) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  
  <span class="hljs-comment">// è®¾ç½®é¢œè‰²å’Œæ ·å¼</span>
  modeling.<span class="hljs-title function_">setColor</span>(element, {
    <span class="hljs-attr">fill</span>: statusConfig.<span class="hljs-property">fill</span>,
    <span class="hljs-attr">stroke</span>: statusConfig.<span class="hljs-property">stroke</span>,
    <span class="hljs-attr">strokeWidth</span>: statusConfig.<span class="hljs-property">strokeWidth</span>,
    <span class="hljs-attr">strokeDasharray</span>: statusConfig.<span class="hljs-property">strokeDasharray</span>
  })
  
  <span class="hljs-comment">// æ·»åŠ è¯„è®ºè¦†ç›–å±‚</span>
  <span class="hljs-keyword">if</span> (options.<span class="hljs-property">text</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addCommentOverlay</span>(elementId, options)
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}
</code></pre>
<h2 data-id="heading-16">äº”ã€å®ç°é¢„è§ˆæ¨¡å¼</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84d4c9b71e024985a79c272ad93dad71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5Yac56qB5Zu0Tk8x:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768105930&amp;x-signature=XSRVxPES%2BwZrGnvvI2l9rcPNbLU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-17">5.1 æ¨¡å¼åˆ‡æ¢é€»è¾‘</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">togglePreviewMode</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">isPreviewMode</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isPreviewMode</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updatePreviewMode</span>()
  
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isPreviewMode</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showStatusMessage</span>(<span class="hljs-string">'å·²åˆ‡æ¢åˆ°é¢„è§ˆæ¨¡å¼'</span>, <span class="hljs-string">'info'</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateElementCount</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fitViewport</span>()
  }
}

<span class="hljs-title function_">updatePreviewMode</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span>) <span class="hljs-keyword">return</span>
  
  <span class="hljs-keyword">const</span> eventBus = <span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'eventBus'</span>)
  
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isPreviewMode</span>) {
    <span class="hljs-comment">// é¢„è§ˆæ¨¡å¼ï¼šç¦ç”¨ç¼–è¾‘ï¼Œå¯ç”¨æ‚¬åœ</span>
    eventBus.<span class="hljs-title function_">off</span>(<span class="hljs-string">'element.click'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleElementClick</span>)
    eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">'element.hover'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleElementHover</span>)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ç¼–è¾‘æ¨¡å¼ï¼šå¯ç”¨ç¼–è¾‘</span>
    eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">'element.click'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleElementClick</span>)
    eventBus.<span class="hljs-title function_">off</span>(<span class="hljs-string">'element.hover'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleElementHover</span>)
  }
}
</code></pre>
<h3 data-id="heading-18">5.2 é¢„è§ˆä¿¡æ¯å±•ç¤º</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">updateElementCount</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span>) <span class="hljs-keyword">return</span>
  
  <span class="hljs-keyword">const</span> elementRegistry = <span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'elementRegistry'</span>)
  <span class="hljs-keyword">const</span> elements = elementRegistry.<span class="hljs-title function_">getAll</span>()
  
  <span class="hljs-comment">// è¿‡æ»¤åŸºç¡€å…ƒç´ </span>
  <span class="hljs-keyword">const</span> validElements = elements.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span>
    !el.<span class="hljs-property">type</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'bpmn:Process'</span>) &amp;&amp;
    !el.<span class="hljs-property">type</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'bpmn:Participant'</span>)
  )
  
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">elementCount</span> = validElements.<span class="hljs-property">length</span>
}

<span class="hljs-title function_">getElementInfo</span>(<span class="hljs-params">element</span>) {
  <span class="hljs-keyword">const</span> businessObject = element.<span class="hljs-property">businessObject</span>
  <span class="hljs-keyword">const</span> info = []
  
  <span class="hljs-keyword">if</span> (businessObject.<span class="hljs-property">name</span>) {
    info.<span class="hljs-title function_">push</span>(<span class="hljs-string">`&lt;strong&gt;<span class="hljs-subst">${businessObject.name}</span>&lt;/strong&gt;`</span>)
  }
  
  info.<span class="hljs-title function_">push</span>(<span class="hljs-string">`ç±»å‹: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.getElementTypeName(element.type)}</span>`</span>)
  info.<span class="hljs-title function_">push</span>(<span class="hljs-string">`ID: <span class="hljs-subst">${element.id}</span>`</span>)
  
  <span class="hljs-comment">// æ·»åŠ çŠ¶æ€ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> status = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getElementStatus</span>(element)
  <span class="hljs-keyword">if</span> (status) {
    info.<span class="hljs-title function_">push</span>(<span class="hljs-string">`çŠ¶æ€: <span class="hljs-subst">${status}</span>`</span>)
  }
  
  <span class="hljs-keyword">return</span> info.<span class="hljs-title function_">join</span>(<span class="hljs-string">'&lt;br&gt;'</span>)
}
</code></pre>
<h2 data-id="heading-19">å…­ã€æ ·å¼ä¼˜åŒ–ä¸è‡ªå®šä¹‰</h2>
<h3 data-id="heading-20">6.1 SCSSæ ·å¼æ–‡ä»¶</h3>
<pre><code class="hljs language-css" lang="css">// <span class="hljs-attribute">flow</span><span class="hljs-selector-class">.scss</span>
<span class="hljs-selector-class">.bpmn-container</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  
  &amp;<span class="hljs-selector-class">.preview-mode</span> {
    <span class="hljs-selector-class">.properties-panel</span> {
      <span class="hljs-attribute">display</span>: none;
    }
    
    <span class="hljs-selector-class">.canvas</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    }
  }
  
  <span class="hljs-selector-class">.toolbar</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;
    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: space-between;
    <span class="hljs-attribute">align-items</span>: center;
  }
  
  <span class="hljs-selector-class">.canvas-wrapper</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">overflow</span>: hidden;
  }
  
  <span class="hljs-selector-class">.canvas</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">3</span>;
    <span class="hljs-attribute">position</span>: relative;
  }
  
  <span class="hljs-selector-class">.properties-panel</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">min-width</span>: <span class="hljs-number">250px</span>;
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">300px</span>;
    <span class="hljs-attribute">border-left</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
    <span class="hljs-attribute">overflow-y</span>: auto;
  }
}
</code></pre>
<h2 data-id="heading-21">ä¸ƒã€å®ç”¨å·¥å…·å‡½æ•°</h2>
<h3 data-id="heading-22">7.1 å¯¼å‡ºåŠŸèƒ½</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils/exportUtils.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">exportXML</span>(<span class="hljs-params">bpmnModeler</span>) {
  <span class="hljs-keyword">const</span> { xml } = <span class="hljs-keyword">await</span> bpmnModeler.<span class="hljs-title function_">saveXML</span>({ <span class="hljs-attr">format</span>: <span class="hljs-literal">true</span> })
  <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([xml], { <span class="hljs-attr">type</span>: <span class="hljs-string">'application/xml'</span> })
  <span class="hljs-keyword">const</span> url = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob)
  
  <span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>)
  link.<span class="hljs-property">href</span> = url
  link.<span class="hljs-property">download</span> = <span class="hljs-string">'diagram.bpmn'</span>
  link.<span class="hljs-title function_">click</span>()
  
  <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(url)
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">exportSVG</span>(<span class="hljs-params">bpmnModeler</span>) {
  <span class="hljs-keyword">const</span> { svg } = <span class="hljs-keyword">await</span> bpmnModeler.<span class="hljs-title function_">saveSVG</span>()
  <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([svg], { <span class="hljs-attr">type</span>: <span class="hljs-string">'image/svg+xml'</span> })
  <span class="hljs-keyword">const</span> url = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob)
  
  <span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>)
  link.<span class="hljs-property">href</span> = url
  link.<span class="hljs-property">download</span> = <span class="hljs-string">'diagram.svg'</span>
  link.<span class="hljs-title function_">click</span>()
  
  <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(url)
}
</code></pre>
<h2 data-id="heading-23">å…«ã€æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-24">8.1 èµ„æºæ¸…ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ¸…ç†Bpmn.jså®ä¾‹</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bpmnModeler</span>.<span class="hljs-title function_">destroy</span>()
  }
  
  <span class="hljs-comment">// æ¸…ç†è§‚å¯Ÿè€…</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">panelObserver</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">panelObserver</span>.<span class="hljs-title function_">disconnect</span>()
  }
}
</code></pre>
<h3 data-id="heading-25">8.2 å»¶è¿ŸåŠ è½½ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">initFormEnhancement</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿DOMå·²æ¸²æŸ“</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">panelObserver</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">watchPropertiesPanel</span>()
    
    <span class="hljs-comment">// 30ç§’ååœæ­¢ç›‘å¬ï¼Œé¿å…å†…å­˜æ³„æ¼</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">panelObserver</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">panelObserver</span>.<span class="hljs-title function_">disconnect</span>()
      }
    }, <span class="hljs-number">30000</span>)
  }, <span class="hljs-number">2000</span>)
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter é¡¹ç›®å¯åŠ¨å…¨æµç¨‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7591177139661291574</link>    <guid>https://juejin.cn/post/7591177139661291574</guid>    <pubDate>2026-01-04T05:18:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591177139661291574" data-draft-id="7590724064520912959" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter é¡¹ç›®å¯åŠ¨å…¨æµç¨‹è¯¦è§£"/> <meta itemprop="keywords" content="Flutter,iOS,Android"/> <meta itemprop="datePublished" content="2026-01-04T05:18:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¦–æªé“¶å¼¹"/> <meta itemprop="url" content="https://juejin.cn/user/3210229685182119"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter é¡¹ç›®å¯åŠ¨å…¨æµç¨‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3210229685182119/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¦–æªé“¶å¼¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:18:00.000Z" title="Sun Jan 04 2026 05:18:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Flutter é¡¹ç›®å¯åŠ¨å…¨æµç¨‹è¯¦è§£</h2>
<p>ä½œä¸ºèµ„æ·± Flutter æ¶æ„å¸ˆï¼Œæˆ‘ä¼šä»<strong>åˆ†å±‚è§†è§’</strong>ï¼ˆåŸç”Ÿå±‚ â†’ Flutter å¼•æ“å±‚ â†’ Dart è¿è¡Œæ—¶å±‚ â†’ App ä¸šåŠ¡å±‚ï¼‰ä¸ºä½ æ‹†è§£ Flutter é¡¹ç›®å¯åŠ¨çš„å®Œæ•´æµç¨‹ï¼Œæ¶µç›–æ ¸å¿ƒæ­¥éª¤ã€å…³é”®æœºåˆ¶å’Œåº•å±‚ç»†èŠ‚ï¼Œå¸®ä½ å…¨é¢æŒæ¡å¯åŠ¨åŸç†ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ ç¬¬ä¸€é˜¶æ®µï¼šåŸç”Ÿå¹³å°åˆå§‹åŒ–ï¼ˆNative Bootstrappingï¼‰</h3>
<p>Flutter æ˜¯è·¨å¹³å°æ¡†æ¶ï¼Œæœ€ç»ˆä¼šæ‰“åŒ…ä¸º iOS/Android åŸç”Ÿåº”ç”¨ï¼Œå¯åŠ¨æµç¨‹é¦–å…ˆä»<strong>åŸç”Ÿå¹³å°ä¾§</strong>å¼€å§‹ï¼Œè¿™æ˜¯ Flutter å¯åŠ¨çš„å…¥å£ã€‚</p>
<h4 data-id="heading-2">1. Android å¹³å°å¯åŠ¨æµç¨‹</h4>
<ul>
<li>æ ¸å¿ƒå…¥å£ï¼š<code>FlutterActivity</code>ï¼ˆæˆ– <code>FlutterFragment</code>ï¼Œå¯¹åº” Fragment åµŒå…¥åœºæ™¯ï¼‰</li>
<li>å…³é”®æ­¥éª¤ï¼š
<ol>
<li><code>FlutterActivity</code> åˆå§‹åŒ–ï¼šç»§æ‰¿è‡ª <code>AppCompatActivity</code>ï¼Œå¯åŠ¨æ—¶å…ˆæ‰§è¡ŒåŸç”Ÿ Android çš„ <code>onCreate()</code> ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚</li>
<li>åŠ è½½ Flutter å¼•æ“ä¾èµ–ï¼šåˆå§‹åŒ– <code>FlutterEngine</code> ç›¸å…³é…ç½®ï¼ˆå¦‚ Dart å…¥å£è·¯å¾„ã€åˆå§‹åŒ–å‚æ•°ï¼‰ï¼Œè‹¥ä½¿ç”¨<strong>é¢„åŠ è½½å¼•æ“</strong>ï¼ˆæå‰åˆå§‹åŒ–ä¼˜åŒ–å¯åŠ¨é€Ÿåº¦ï¼‰ï¼Œä¼šç›´æ¥è·å–é¢„åˆ›å»ºçš„ <code>FlutterEngine</code> å®ä¾‹ï¼›è‹¥æœªé¢„åŠ è½½ï¼Œåˆ™ç°åœºåˆ›å»º <code>FlutterEngine</code>ã€‚</li>
<li>é…ç½® <code>FlutterView</code>ï¼šåˆ›å»ºç”¨äºæ‰¿è½½ Flutter UI çš„åŸç”Ÿ Viewï¼ˆ<code>FlutterView</code>ï¼‰ï¼Œå¹¶å°†å…¶æŒ‚è½½åˆ° Android å¸ƒå±€å±‚çº§ä¸­ï¼Œä½œä¸º Flutter æ¸²æŸ“å†…å®¹çš„æ˜¾ç¤ºè½½ä½“ã€‚</li>
<li>å¯åŠ¨å¼•æ“æ¡¥æ¥ï¼šé€šè¿‡ <code>FlutterNativeView</code> å»ºç«‹åŸç”Ÿ Android ä¸ Flutter å¼•æ“çš„é€šä¿¡é€šé“ï¼Œä¼ é€’åˆå§‹åŒ–å‚æ•°ï¼ˆå¦‚å±å¹•å°ºå¯¸ã€ç³»ç»Ÿä¸»é¢˜ã€åŸç”Ÿå¹³å°ä¿¡æ¯ç­‰ï¼‰ã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-3">2. iOS å¹³å°å¯åŠ¨æµç¨‹</h4>
<ul>
<li>æ ¸å¿ƒå…¥å£ï¼š<code>FlutterViewController</code>ï¼ˆå¯¹åº” iOS çš„è§†å›¾æ§åˆ¶å™¨ï¼‰</li>
<li>å…³é”®æ­¥éª¤ï¼š
<ol>
<li><code>FlutterViewController</code> åˆå§‹åŒ–ï¼šæ‰§è¡Œ iOS åŸç”Ÿçš„ <code>initWithNibName:bundle:</code> æˆ– <code>init</code> æ–¹æ³•ï¼Œå®Œæˆæ§åˆ¶å™¨è‡ªèº«åˆå§‹åŒ–ã€‚</li>
<li>Flutter å¼•æ“åˆå§‹åŒ–ï¼šåˆ›å»º <code>FlutterEngine</code> å®ä¾‹ï¼ˆåŒæ ·æ”¯æŒé¢„åŠ è½½ä¼˜åŒ–ï¼‰ï¼Œé…ç½® Dart æ‰§è¡Œç¯å¢ƒå‚æ•°ã€‚</li>
<li>ç»‘å®šè§†å›¾è½½ä½“ï¼š<code>FlutterViewController</code> çš„è§†å›¾ï¼ˆ<code>view</code> å±æ€§ï¼‰æœ¬è´¨æ˜¯ <code>FlutterView</code>ï¼Œç”¨äºæ¸²æŸ“ Flutter UIï¼Œå®Œæˆè§†å›¾å±‚çº§æŒ‚è½½ã€‚</li>
<li>å»ºç«‹é€šä¿¡é€šé“ï¼šé€šè¿‡ <code>FlutterMethodChannel</code>/<code>FlutterEventChannel</code> çš„åº•å±‚åˆå§‹åŒ–ï¼Œå®Œæˆ iOS åŸç”Ÿä¸ Flutter å¼•æ“çš„åŒå‘é€šä¿¡å‡†å¤‡ã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-4">æ ¸å¿ƒä½œç”¨</h4>
<ul>
<li>æä¾› Flutter è¿è¡Œçš„<strong>åŸç”Ÿå®¹å™¨ç¯å¢ƒ</strong>ï¼ˆActivity/ViewController + Viewï¼‰ï¼›</li>
<li>åˆå§‹åŒ– Flutter å¼•æ“çš„åŸç”Ÿä¾èµ–ï¼Œå»ºç«‹è·¨å¹³å°é€šä¿¡çš„åŸºç¡€é€šé“ï¼›</li>
<li>ä¼ é€’ç³»ç»Ÿçº§å‚æ•°ï¼ˆå¦‚è®¾å¤‡ä¿¡æ¯ã€å±å¹•å‚æ•°ï¼‰ï¼Œä¸º Flutter åç»­åˆå§‹åŒ–æä¾›ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<h3 data-id="heading-5">äºŒã€ ç¬¬äºŒé˜¶æ®µï¼šFlutter å¼•æ“åˆå§‹åŒ–ï¼ˆEngine Initializationï¼‰</h3>
<p>Flutter å¼•æ“ï¼ˆC/C++ å®ç°ï¼Œæ ¸å¿ƒæ˜¯ Skia æ¸²æŸ“å¼•æ“ã€Dart è™šæ‹Ÿæœºã€æ’ç‰ˆå¼•æ“ç­‰ï¼‰æ˜¯ Flutter çš„æ ¸å¿ƒè¿è¡Œæ—¶ï¼ŒåŸç”Ÿå¹³å°åˆå§‹åŒ–å®Œæˆåï¼Œä¼šè§¦å‘ Flutter å¼•æ“çš„å¯åŠ¨ä¸åˆå§‹åŒ–ã€‚</p>
<h4 data-id="heading-6">1.  å¼•æ“æ ¸å¿ƒç»„ä»¶åˆå§‹åŒ–</h4>
<p>Flutter å¼•æ“åˆå§‹åŒ–æ˜¯<strong>å¤šç»„ä»¶ååŒå¯åŠ¨</strong>çš„è¿‡ç¨‹ï¼Œæ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Skia æ¸²æŸ“å¼•æ“</strong>ï¼šåˆå§‹åŒ– 2D å›¾å½¢æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼Œç»‘å®šåŸç”Ÿå¹³å°çš„æ¸²æŸ“è¡¨é¢ï¼ˆAndroid çš„ Surfaceã€iOS çš„ CALayerï¼‰ï¼Œé…ç½®æŠ—é”¯é½¿ã€æ¸²æŸ“ç²¾åº¦ç­‰å‚æ•°ï¼Œä¸ºåç»­ UI æ¸²æŸ“æä¾›åº•å±‚æ”¯æŒã€‚</li>
<li><strong>Dart è™šæ‹Ÿæœºï¼ˆVMï¼‰</strong>ï¼šåˆå§‹åŒ– Dart è¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŒ…æ‹¬å†…å­˜ç®¡ç†ï¼ˆå †å†…å­˜åˆ†é…ã€åƒåœ¾å›æ”¶æœºåˆ¶åˆå§‹åŒ–ï¼‰ã€æŒ‡ä»¤è§£æå™¨ï¼ˆJIT/AOT æ¨¡å¼åˆ‡æ¢ï¼Œç§»åŠ¨ç«¯é»˜è®¤ AOT ç¼–è¯‘æ¨¡å¼ï¼Œè°ƒè¯•æ¨¡å¼ JITï¼‰ã€‚</li>
<li><strong>æ’ç‰ˆå¼•æ“ï¼ˆLayout Engineï¼‰</strong>ï¼šåˆå§‹åŒ– Flutter ä¸“å±çš„æ’ç‰ˆè§„åˆ™ï¼ˆå¦‚ Flex å¸ƒå±€ã€Text æ’ç‰ˆï¼‰ï¼ŒåŠ è½½ç³»ç»Ÿé»˜è®¤å­—ä½“ã€è‡ªå®šä¹‰å­—ä½“é…ç½®ï¼Œå»ºç«‹æ’ç‰ˆè®¡ç®—çš„ä¸Šä¸‹æ–‡ç¯å¢ƒã€‚</li>
<li><strong>äº‹ä»¶åˆ†å‘ç³»ç»Ÿ</strong>ï¼šåˆå§‹åŒ–è§¦æ‘¸äº‹ä»¶ã€é”®ç›˜äº‹ä»¶ã€ç”Ÿå‘½å‘¨æœŸäº‹ä»¶çš„åˆ†å‘é€šé“ï¼Œç¡®ä¿åŸç”Ÿäº‹ä»¶èƒ½ä¼ é€’åˆ° Flutter å±‚ã€‚</li>
</ul>
<h4 data-id="heading-7">2.  å¼•æ“ä¸åŸç”Ÿå¹³å°çš„ç»‘å®š</h4>
<ul>
<li>æ¸²æŸ“ç»‘å®šï¼šå°† Skia æ¸²æŸ“å¼•æ“ä¸åŸç”Ÿ <code>FlutterView</code> çš„æ¸²æŸ“ç¼“å†²åŒºç»‘å®šï¼Œç¡®ä¿ Flutter ç»˜åˆ¶çš„å†…å®¹èƒ½æ˜¾ç¤ºåœ¨åŸç”Ÿè§†å›¾ä¸Šã€‚</li>
<li>çº¿ç¨‹ç»‘å®šï¼šFlutter å¼•æ“å¯åŠ¨åä¼šåˆ›å»º<strong>4ä¸ªæ ¸å¿ƒçº¿ç¨‹</strong>ï¼Œå¹¶ä¸åŸç”Ÿå¹³å°çº¿ç¨‹å»ºç«‹æ˜ å°„ï¼š
<ol>
<li>UI çº¿ç¨‹ï¼ˆPlatform Threadï¼‰ï¼šå¯¹åº”åŸç”Ÿä¸»çº¿ç¨‹ï¼Œå¤„ç† Flutter ç»„ä»¶æ„å»ºã€å¸ƒå±€è®¡ç®—ã€çŠ¶æ€æ›´æ–°ã€‚</li>
<li>æ¸²æŸ“çº¿ç¨‹ï¼ˆRender Threadï¼‰ï¼šç‹¬ç«‹çº¿ç¨‹ï¼Œå¤„ç†ç»˜åˆ¶å‘½ä»¤ç”Ÿæˆã€å›¾å±‚åˆæˆï¼Œæœ€ç»ˆå°†åˆæˆç»“æœæäº¤ç»™ Skia æ¸²æŸ“ã€‚</li>
<li>I/O çº¿ç¨‹ï¼ˆI/O Threadï¼‰ï¼šå¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ã€å›¾ç‰‡è§£ç ï¼‰ï¼Œé¿å…é˜»å¡ UI çº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹ã€‚</li>
<li>Dart è™šæ‹Ÿæœºçº¿ç¨‹ï¼šæ‰§è¡Œ Dart ä»£ç é€»è¾‘ï¼Œä¸ UI çº¿ç¨‹ååŒå·¥ä½œï¼ˆè°ƒè¯•æ¨¡å¼ä¸‹ç‹¬ç«‹ï¼ŒRelease æ¨¡å¼ä¸‹ä¸ UI çº¿ç¨‹åˆå¹¶ä¼˜åŒ–ï¼‰ã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-8">ä¸‰ã€ ç¬¬ä¸‰é˜¶æ®µï¼šDart è¿è¡Œæ—¶åˆå§‹åŒ–ï¼ˆDart Runtime Setupï¼‰</h3>
<p>Flutter å¼•æ“åˆå§‹åŒ–å®Œæˆåï¼Œä¼šå¯åŠ¨ Dart è™šæ‹Ÿæœºï¼Œå¹¶æ‰§è¡Œ Dart ä»£ç çš„åˆå§‹åŒ–æµç¨‹ï¼Œè¿™æ˜¯ Flutter ä¸šåŠ¡é€»è¾‘çš„å…¥å£ã€‚</p>
<h4 data-id="heading-9">1.  åŠ è½½å¹¶æ‰§è¡Œ Dart æ ¹éš”ç¦»åŒºï¼ˆRoot Isolateï¼‰</h4>
<ul>
<li>Isolate æ˜¯ Dart çš„<strong>è½»é‡çº§çº¿ç¨‹</strong>ï¼ˆæ— å…±äº«å†…å­˜ï¼Œé€šè¿‡æ¶ˆæ¯ä¼ é€’é€šä¿¡ï¼‰ï¼ŒFlutter å¯åŠ¨æ—¶é¦–å…ˆåˆ›å»º<strong>æ ¹ Isolate</strong>ï¼ˆä¸» Isolateï¼‰ï¼Œä½œä¸º Dart ä»£ç çš„æ‰§è¡Œå…¥å£ã€‚</li>
<li>æ ¸å¿ƒæ“ä½œï¼š
<ol>
<li>åŠ è½½ AOT ç¼–è¯‘äº§ç‰©ï¼ˆRelease æ¨¡å¼ï¼‰ï¼šç§»åŠ¨ç«¯ Flutter é¡¹ç›®æ‰“åŒ…åä¼šç”Ÿæˆ <code>.so</code>ï¼ˆAndroidï¼‰/ <code>App.framework</code>ï¼ˆiOSï¼‰æ ¼å¼çš„ AOT ç¼–è¯‘äº§ç‰©ï¼ŒDart è™šæ‹Ÿæœºç›´æ¥åŠ è½½å¹¶æ‰§è¡Œè¯¥äº§ç‰©ï¼Œæ— éœ€å³æ—¶ç¼–è¯‘ï¼Œå¯åŠ¨é€Ÿåº¦æ›´å¿«ã€‚</li>
<li>åŠ è½½ JIT å¿«ç…§ï¼ˆDebug æ¨¡å¼ï¼‰ï¼šè°ƒè¯•æ¨¡å¼ä¸‹ï¼ŒFlutter ä¼šç”Ÿæˆ Dart ä»£ç çš„ JIT å¿«ç…§ï¼ŒDart è™šæ‹ŸæœºåŠ è½½å¿«ç…§åå¯åŠ¨ï¼Œæ”¯æŒçƒ­é‡è½½ï¼ˆHot Reloadï¼‰åŠŸèƒ½ã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-10">2.  æ‰§è¡Œ <code>main()</code> å‡½æ•°ï¼ˆDart å…¥å£ï¼‰</h4>
<ul>
<li>æ ¹ Isolate åˆå§‹åŒ–å®Œæˆåï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œ Dart é¡¹ç›®çš„ <code>main()</code> å‡½æ•°ï¼Œè¿™æ˜¯ Flutter ä¸šåŠ¡ä»£ç çš„ç¬¬ä¸€ä¸ªå…¥å£æ–¹æ³•ï¼Œå…¸å‹ä»£ç å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> main() {
  <span class="hljs-comment">// å¯é€‰ï¼šåˆå§‹åŒ–å…¨å±€é…ç½®ï¼ˆå¦‚ç½‘ç»œæ‹¦æˆªå™¨ã€æ—¥å¿—å·¥å…·ã€ä¾èµ–æ³¨å…¥ï¼‰</span>
  WidgetsFlutterBinding.ensureInitialized(); <span class="hljs-comment">// å…³é”®ï¼šåˆå§‹åŒ– Flutter æ ¸å¿ƒç»‘å®š</span>
  runApp(<span class="hljs-keyword">const</span> MyApp()); <span class="hljs-comment">// å¯åŠ¨ Flutter åº”ç”¨</span>
}
</code></pre>
<ul>
<li>å…³é”®è¯´æ˜ï¼š<code>WidgetsFlutterBinding.ensureInitialized()</code> æ˜¯ Flutter æ ¸å¿ƒç»‘å®šåˆå§‹åŒ–æ–¹æ³•ï¼Œè‹¥çœç•¥ï¼Œ<code>runApp()</code> å†…éƒ¨ä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œå…¶ä½œç”¨æ˜¯åˆå§‹åŒ– Flutter æ¡†æ¶çš„æ ¸å¿ƒæœåŠ¡ï¼ˆå¦‚æ¸²æŸ“ç»‘å®šã€æ‰‹åŠ¿ç»‘å®šã€ç”Ÿå‘½å‘¨æœŸç»‘å®šç­‰ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-11">å››ã€ ç¬¬å››é˜¶æ®µï¼šFlutter æ¡†æ¶åˆå§‹åŒ–ä¸ UI æ¸²æŸ“ï¼ˆFramework &amp; UI Renderingï¼‰</h3>
<p><code>main()</code> å‡½æ•°ä¸­è°ƒç”¨ <code>runApp()</code> åï¼Œè¿›å…¥ Flutter æ¡†æ¶åˆå§‹åŒ–å’Œ UI é¦–æ¬¡æ¸²æŸ“æµç¨‹ï¼Œè¿™æ˜¯ Flutter UI æ˜¾ç¤ºçš„æ ¸å¿ƒæ­¥éª¤ã€‚</p>
<h4 data-id="heading-12">1.  Flutter æ¡†æ¶æ ¸å¿ƒç»‘å®šåˆå§‹åŒ–</h4>
<p><code>WidgetsFlutterBinding</code> æ˜¯ Flutter æ¡†æ¶çš„æ ¸å¿ƒç»‘å®šç±»ï¼Œå®ƒæ•´åˆäº† 7 å¤§æ ¸å¿ƒç»‘å®šï¼Œç¡®ä¿ Flutter æ¡†æ¶æ­£å¸¸å·¥ä½œï¼š</p>
<ul>
<li><code>GestureBinding</code>ï¼šæ‰‹åŠ¿è¯†åˆ«ä¸äº‹ä»¶åˆ†å‘ç»‘å®šã€‚</li>
<li><code>ServicesBinding</code>ï¼šå¹³å°æ¶ˆæ¯é€šä¿¡ç»‘å®šï¼ˆå¦‚ MethodChannel é€šä¿¡ï¼‰ã€‚</li>
<li><code>SchedulerBinding</code>ï¼šä»»åŠ¡è°ƒåº¦ä¸å¸§å›è°ƒç»‘å®šï¼ˆæ§åˆ¶ UI åˆ·æ–°å¸§ç‡ï¼Œé»˜è®¤ 60fpsï¼‰ã€‚</li>
<li><code>PaintingBinding</code>ï¼šç»˜åˆ¶ç›¸å…³ç»‘å®šï¼ˆå¦‚å›¾ç‰‡ç¼“å­˜ã€å­—ä½“åŠ è½½ï¼‰ã€‚</li>
<li><code>SemanticsBinding</code>ï¼šè¯­ä¹‰åŒ–ç»‘å®šï¼ˆæ”¯æŒæ— éšœç¢è®¿é—®ï¼‰ã€‚</li>
<li><code>RenderBinding</code>ï¼šæ¸²æŸ“ç®¡çº¿ç»‘å®šï¼ˆå¸ƒå±€ã€ç»˜åˆ¶ã€åˆæˆï¼‰ã€‚</li>
<li><code>WidgetsBinding</code>ï¼šç»„ä»¶æ¡†æ¶ç»‘å®šï¼ˆç»„ä»¶æ„å»ºã€çŠ¶æ€ç®¡ç†ã€è·¯ç”±ç®¡ç†ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-13">2.  æ‰§è¡Œ <code>runApp(Widget app)</code> æ ¸å¿ƒé€»è¾‘</h4>
<p><code>runApp()</code> æ˜¯ Flutter UI å¯åŠ¨çš„å…³é”®æ–¹æ³•ï¼Œæ ¸å¿ƒæ“ä½œå¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>æŒ‚è½½æ ¹ç»„ä»¶</strong>ï¼šå°†ä¼ å…¥çš„æ ¹ Widgetï¼ˆå¦‚ <code>MyApp</code>ï¼‰è®¾ç½®ä¸º Flutter æ¡†æ¶çš„æ ¹ç»„ä»¶ï¼ˆ<code>rootWidget</code>ï¼‰ï¼Œå»ºç«‹ç»„ä»¶æ ‘çš„é¡¶å±‚èŠ‚ç‚¹ã€‚</li>
<li><strong>è§¦å‘é¦–æ¬¡å¸§è°ƒåº¦</strong>ï¼šé€šè¿‡ <code>SchedulerBinding</code> å‘ Flutter å¼•æ“å‘é€ã€Œé¦–æ¬¡ç»˜åˆ¶å¸§ã€çš„è°ƒåº¦è¯·æ±‚ï¼Œå¼•æ“æ¥æ”¶åˆ°è¯·æ±‚åï¼Œå¯åŠ¨ UI çº¿ç¨‹çš„å¸ƒå±€ä¸ç»˜åˆ¶æµç¨‹ã€‚</li>
</ol>
<h4 data-id="heading-14">3.  é¦–æ¬¡ UI æ¸²æŸ“ç®¡çº¿ï¼ˆLayout &amp; Paintï¼‰</h4>
<p>Flutter é¦–æ¬¡æ¸²æŸ“éµå¾ªã€Œ<strong>æ„å»º â†’ å¸ƒå±€ â†’ ç»˜åˆ¶ â†’ åˆæˆ â†’ æ¸²æŸ“</strong>ã€çš„æµæ°´çº¿ï¼š</p>
<ol>
<li><strong>æ„å»ºï¼ˆBuildï¼‰</strong>ï¼šUI çº¿ç¨‹éå†ç»„ä»¶æ ‘ï¼ˆä»æ ¹ Widget <code>MyApp</code> å¼€å§‹ï¼‰ï¼Œæ‰§è¡Œæ¯ä¸ª Widget çš„ <code>build()</code> æ–¹æ³•ï¼Œç”Ÿæˆã€Œå…ƒç´ æ ‘ï¼ˆElement Treeï¼‰ã€ï¼ˆWidget æ˜¯é…ç½®æ¨¡æ¿ï¼ŒElement æ˜¯å®é™…æ¸²æŸ“å®ä¾‹ï¼‰ã€‚</li>
<li><strong>å¸ƒå±€ï¼ˆLayoutï¼‰</strong>ï¼šåŸºäºå…ƒç´ æ ‘ï¼ŒRender å±‚ï¼ˆ<code>RenderObject</code>ï¼‰æ‰§è¡Œå¸ƒå±€è®¡ç®—ï¼Œç¡®å®šæ¯ä¸ªç»„ä»¶çš„å¤§å°ã€ä½ç½®ï¼ˆå¦‚ <code>RenderFlex</code> å¤„ç† Flex å¸ƒå±€ï¼Œ<code>RenderText</code> å¤„ç†æ–‡æœ¬æ’ç‰ˆï¼‰ï¼Œç”Ÿæˆã€Œå¸ƒå±€æ ‘ï¼ˆLayout Treeï¼‰ã€ã€‚</li>
<li><strong>ç»˜åˆ¶ï¼ˆPaintï¼‰</strong>ï¼šRender å±‚æ ¹æ®å¸ƒå±€ç»“æœï¼Œç”Ÿæˆæ¯ä¸ªç»„ä»¶çš„ç»˜åˆ¶å‘½ä»¤ï¼ˆå¦‚ç»˜åˆ¶çŸ©å½¢ã€æ–‡æœ¬ã€å›¾ç‰‡ï¼‰ï¼Œç”Ÿæˆã€Œç»˜åˆ¶æ ‘ï¼ˆPaint Treeï¼‰ã€ã€‚</li>
<li><strong>åˆæˆï¼ˆCompositingï¼‰</strong>ï¼šæ¸²æŸ“çº¿ç¨‹å°†ç»˜åˆ¶å‘½ä»¤æŒ‰ã€Œå›¾å±‚ï¼ˆLayerï¼‰ã€è¿›è¡Œåˆ†å±‚åˆæˆï¼ˆå¦‚é€æ˜ç»„ä»¶ã€æ»šåŠ¨ç»„ä»¶ä¼šå•ç‹¬åˆ†å±‚ï¼‰ï¼Œç”Ÿæˆã€Œå›¾å±‚æ ‘ï¼ˆLayer Treeï¼‰ã€ï¼Œä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ã€‚</li>
<li><strong>æ¸²æŸ“ï¼ˆRenderï¼‰</strong>ï¼šæ¸²æŸ“çº¿ç¨‹å°†åˆæˆåçš„å›¾å±‚æ ‘æäº¤ç»™ Skia æ¸²æŸ“å¼•æ“ï¼ŒSkia å°†å›¾å±‚ç»˜åˆ¶åˆ°åŸç”Ÿ <code>FlutterView</code> çš„æ¸²æŸ“ç¼“å†²åŒºï¼Œæœ€ç»ˆåœ¨å±å¹•ä¸Šæ˜¾ç¤º Flutter UIã€‚</li>
</ol>
<h4 data-id="heading-15">4.  å¯åŠ¨å®Œæˆï¼šè§¦å‘ <code>onFirstFrame</code> å›è°ƒ</h4>
<p>å½“ Flutter é¦–æ¬¡å¸§æ¸²æŸ“å®Œæˆåï¼Œä¼šè§¦å‘ <code>WidgetsBinding</code> çš„ <code>onFirstFrame</code> å›è°ƒï¼ˆå¯ç›‘å¬è¯¥å›è°ƒç»Ÿè®¡å¯åŠ¨è€—æ—¶ï¼‰ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥çœ‹åˆ° Flutter åº”ç”¨çš„é¦–å± UIï¼Œæ ‡å¿—ç€ Flutter é¡¹ç›®å¯åŠ¨æµç¨‹å…¨éƒ¨å®Œæˆã€‚</p>
<h3 data-id="heading-16">äº”ã€ è¡¥å……ï¼šå¯åŠ¨æ¨¡å¼å·®å¼‚ï¼ˆDebug vs Releaseï¼‰</h3>
<p>Flutter è°ƒè¯•æ¨¡å¼ï¼ˆDebugï¼‰å’Œå‘å¸ƒæ¨¡å¼ï¼ˆReleaseï¼‰çš„å¯åŠ¨æµç¨‹å­˜åœ¨æ ¸å¿ƒå·®å¼‚ï¼Œç›´æ¥å½±å“å¯åŠ¨é€Ÿåº¦ï¼š</p>



































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Debug æ¨¡å¼</th><th>Release æ¨¡å¼</th></tr></thead><tbody><tr><td>Dart æ‰§è¡Œæ¨¡å¼</td><td>JITï¼ˆå³æ—¶ç¼–è¯‘ï¼‰</td><td>AOTï¼ˆæå‰ç¼–è¯‘ï¼‰</td></tr><tr><td>äº§ç‰©åŠ è½½</td><td>åŠ è½½ Dart å¿«ç…§ï¼Œæ”¯æŒçƒ­é‡è½½</td><td>åŠ è½½ AOT ç¼–è¯‘äº§ç‰©ï¼ˆ.so/Frameworkï¼‰ï¼Œç›´æ¥æ‰§è¡Œ</td></tr><tr><td>å¼•æ“ä¼˜åŒ–</td><td>å…³é—­éƒ¨åˆ†æ¸²æŸ“ä¼˜åŒ–ã€çº¿ç¨‹ä¼˜åŒ–</td><td>å¼€å¯å…¨é‡ä¼˜åŒ–ï¼ˆçº¿ç¨‹åˆå¹¶ã€ç»˜åˆ¶ä¼˜åŒ–ã€å†…å­˜ä¼˜åŒ–ï¼‰</td></tr><tr><td>å¯åŠ¨é€Ÿåº¦</td><td>è¾ƒæ…¢ï¼ˆJIT åˆå§‹åŒ– + å¿«ç…§åŠ è½½ï¼‰</td><td>è¾ƒå¿«ï¼ˆAOT äº§ç‰©ç›´æ¥æ‰§è¡Œï¼Œæ— ç¼–è¯‘å¼€é”€ï¼‰</td></tr><tr><td>é¢å¤–åŠŸèƒ½</td><td>æ”¯æŒ Hot Reloadã€DevTools è°ƒè¯•</td><td>æ— è°ƒè¯•åŠŸèƒ½ï¼Œä½“ç§¯æ›´å°ã€æ€§èƒ½æ›´ä¼˜</td></tr></tbody></table>
<h3 data-id="heading-17">æ€»ç»“</h3>
<p>Flutter é¡¹ç›®å¯åŠ¨æ˜¯ä¸€ä¸ª<strong>è·¨å¹³å°ã€åˆ†å±‚çº§ã€å¤šçº¿ç¨‹ååŒ</strong>çš„å¤æ‚æµç¨‹ï¼Œæ ¸å¿ƒæ­¥éª¤å¯æ¦‚æ‹¬ä¸º 4 ä¸ªå…³é”®é˜¶æ®µï¼š</p>
<ol>
<li><strong>åŸç”Ÿå¹³å°åˆå§‹åŒ–</strong>ï¼šæä¾›å®¹å™¨ï¼ˆActivity/ViewControllerï¼‰å’Œè§†å›¾è½½ä½“ï¼ˆFlutterViewï¼‰ï¼Œåˆå§‹åŒ–å¼•æ“ä¾èµ–ï¼›</li>
<li><strong>Flutter å¼•æ“åˆå§‹åŒ–</strong>ï¼šå¯åŠ¨ Skia æ¸²æŸ“ã€Dart è™šæ‹Ÿæœºç­‰æ ¸å¿ƒç»„ä»¶ï¼Œåˆ›å»º 4 ä¸ªæ ¸å¿ƒçº¿ç¨‹ï¼Œå®Œæˆä¸åŸç”Ÿçš„ç»‘å®šï¼›</li>
<li><strong>Dart è¿è¡Œæ—¶åˆå§‹åŒ–</strong>ï¼šåˆ›å»ºæ ¹ Isolateï¼ŒåŠ è½½ Dart ç¼–è¯‘äº§ç‰©ï¼Œæ‰§è¡Œ <code>main()</code> å‡½æ•°ï¼›</li>
<li><strong>Flutter æ¡†æ¶ä¸ UI æ¸²æŸ“</strong>ï¼šåˆå§‹åŒ–æ¡†æ¶ç»‘å®šï¼Œæ‰§è¡Œ <code>runApp()</code>ï¼Œé€šè¿‡ã€Œæ„å»º-å¸ƒå±€-ç»˜åˆ¶-åˆæˆ-æ¸²æŸ“ã€ç®¡çº¿å®Œæˆé¦–å±æ˜¾ç¤ºã€‚</li>
</ol>
<p>ç†è§£è¯¥æµç¨‹æœ‰åŠ©äºä½ ä¼˜åŒ– Flutter é¡¹ç›®å¯åŠ¨é€Ÿåº¦ï¼ˆå¦‚é¢„åŠ è½½ Flutter å¼•æ“ã€å»¶è¿Ÿåˆå§‹åŒ–éæ ¸å¿ƒä¸šåŠ¡ã€ä¼˜åŒ–é¦–å± Widget æ„å»ºï¼‰ï¼Œä»¥åŠæ’æŸ¥å¯åŠ¨é˜¶æ®µçš„è·¨å¹³å°å…¼å®¹é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆåå…«ï¼‰ç¬¬18ç« ï¼šä¼ä¸šSkillç³»ç»Ÿå®æˆ˜ - ç”¨æˆ·è¡Œä¸ºæ·±åº¦åˆ†æ]]></title>    <link>https://juejin.cn/post/7590776324164239360</link>    <guid>https://juejin.cn/post/7590776324164239360</guid>    <pubDate>2026-01-04T04:03:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590776324164239360" data-draft-id="7590776324164222976" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆåå…«ï¼‰ç¬¬18ç« ï¼šä¼ä¸šSkillç³»ç»Ÿå®æˆ˜ - ç”¨æˆ·è¡Œä¸ºæ·±åº¦åˆ†æ"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-01-04T04:03:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆåå…«ï¼‰ç¬¬18ç« ï¼šä¼ä¸šSkillç³»ç»Ÿå®æˆ˜ - ç”¨æˆ·è¡Œä¸ºæ·±åº¦åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T04:03:41.000Z" title="Sun Jan 04 2026 04:03:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æŸå¤§å‚çš„å¥½å‹çœ‹äº†æˆ‘çš„æ–‡ç« ç³»åˆ—åï¼Œå»ºè®®æˆ‘å†™ä¸€ä¸ªè¡Œä¸ºåˆ†æçš„æ¡ˆä¾‹ï¼Œé‚æœ‰æ­¤æ–‡</p>
<hr/>
<h2 data-id="heading-0">å¯¼è¯»</h2>
<p>æœ¬ç« é€šè¿‡ä¸€ä¸ª<strong>ç”¨æˆ·æ·±åº¦è¡Œä¸ºåˆ†ææ¡ˆä¾‹</strong>ï¼Œæ·±å…¥å±•ç¤ºAgentScopeçš„Skillç³»ç»Ÿåœ¨ä¼ä¸šçº§åº”ç”¨ä¸­çš„å®é™…è½åœ°ã€‚æˆ‘ä»¬å°†ä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ª<strong>ç”¨æˆ·è¡Œä¸ºæ·±åº¦åˆ†æç³»ç»Ÿ</strong>ï¼Œæ¶µç›–ï¼š</p>
<ul>
<li>âœ“ <strong>ä¸šåŠ¡åœºæ™¯åˆ†æ</strong>ï¼šä¼ä¸šéœ€æ±‚å’Œç—›ç‚¹</li>
<li>âœ“ <strong>Skillå®šä¹‰</strong>ï¼šå®Œæ•´çš„Markdown DSLå®šä¹‰</li>
<li>âœ“ <strong>Hookç›‘æ§ç³»ç»Ÿ</strong>ï¼šå…¨ç¨‹é€æ˜å¯è¿½è¸ªçš„åˆ†æè¿‡ç¨‹</li>
<li>âœ“ <strong>æ ¸å¿ƒåˆ†æå¼•æ“</strong>ï¼š1500+è¡Œç”Ÿäº§çº§ä»£ç </li>
<li>âœ“ <strong>æ•°æ®æ¨¡å‹å®šä¹‰</strong>ï¼šå®Œæ•´çš„å®ä½“ç±»ç»“æ„</li>
<li>âœ“ <strong>é›†æˆç¤ºä¾‹</strong>ï¼šSpring Boot/Agenté›†æˆ</li>
<li>âœ“ <strong>è¿è¡Œç»“æœ</strong>ï¼šçœŸå®çš„æ‰§è¡Œæ—¥å¿—å’Œè¾“å‡º</li>
<li>âœ“ <strong>ä¸šåŠ¡ä»·å€¼åˆ†æ</strong>ï¼šå¯é‡åŒ–çš„æ•ˆæœè¯„ä¼°</li>
</ul>
<hr/>
<h2 data-id="heading-1">1. ä¸šåŠ¡åœºæ™¯åˆ†æ</h2>
<h3 data-id="heading-2">1.1 ä¸šåŠ¡èƒŒæ™¯</h3>
<p><strong>å…¬å¸æ¦‚å†µ</strong>ï¼š</p>
<ul>
<li>æŸSaaSå…¬å¸ï¼Œæä¾›ä¼ä¸šååŒåŠå…¬å¹³å°</li>
<li>æœåŠ¡ä¼ä¸šç”¨æˆ·ï¼š5ä¸‡+å®¶</li>
<li>æ³¨å†Œç”¨æˆ·æ•°ï¼š500ä¸‡+</li>
<li>æ—¥æ´»è·ƒç”¨æˆ·ï¼š50ä¸‡+</li>
<li>æ¯æ—¥ç”Ÿæˆè¡Œä¸ºæ—¥å¿—ï¼š200ä¸‡-500ä¸‡æ¡</li>
</ul>
<p><strong>äº§å“åŠŸèƒ½</strong>ï¼š</p>
<pre><code class="hljs">äº§å“çŸ©é˜µï¼š
â”œâ”€â”€ æ–‡æ¡£ååŒï¼šåœ¨çº¿ç¼–è¾‘ã€å¤šäººåä½œã€ç‰ˆæœ¬ç®¡ç†
â”œâ”€â”€ é¡¹ç›®ç®¡ç†ï¼šä»»åŠ¡è·Ÿè¸ªã€ç”˜ç‰¹å›¾ã€çœ‹æ¿è§†å›¾
â”œâ”€â”€ å›¢é˜Ÿæ²Ÿé€šï¼šå³æ—¶æ¶ˆæ¯ã€è§†é¢‘ä¼šè®®ã€çŸ¥è¯†åº“
â”œâ”€â”€ æ•°æ®åˆ†æï¼šBIçœ‹æ¿ã€æŠ¥è¡¨ç”Ÿæˆã€æ•°æ®å¯¼å‡º
â””â”€â”€ å·¥ä½œæµï¼šè‡ªåŠ¨åŒ–å®¡æ‰¹ã€è¡¨å•æäº¤ã€é›†æˆå¹³å°
</code></pre>
<h3 data-id="heading-3">1.2 ä¸šåŠ¡ç—›ç‚¹</h3>
<p><strong>ç—›ç‚¹1ï¼šæ•°æ®åˆ†æ•£ï¼Œéš¾ä»¥ç»Ÿä¸€åˆ†æ</strong></p>
<pre><code class="hljs language-diff" lang="diff">æ•°æ®æºåˆ†å¸ƒï¼š
â”œâ”€â”€ åº”ç”¨æ—¥å¿—ï¼šELK Stack (Elasticsearch + Logstash + Kibana)
â”œâ”€â”€ ä¸šåŠ¡æ•°æ®åº“ï¼šMySQLé›†ç¾¤ (10+ å®ä¾‹)
â”œâ”€â”€ åŸ‹ç‚¹æ•°æ®ï¼šç¥ç­–æ•°æ® (Sensors Analytics)
â”œâ”€â”€ ç”¨æˆ·ç”»åƒï¼šRedis + HBase
â””â”€â”€ è¡Œä¸ºæ—¥å¿—ï¼šKafka + Flink

é—®é¢˜ï¼š
<span class="hljs-deletion">- æ•°æ®æ ¼å¼ä¸ç»Ÿä¸€ï¼Œéš¾ä»¥å…³è”</span>
<span class="hljs-deletion">- æ¯æ¬¡åˆ†æéœ€è¦ä»å¤šä¸ªæºæ‹‰å–æ•°æ®</span>
<span class="hljs-deletion">- æ•°æ®ä¸€è‡´æ€§éš¾ä»¥ä¿è¯</span>
</code></pre>
<p><strong>ç—›ç‚¹2ï¼šåˆ†æå‘¨æœŸé•¿ï¼Œå“åº”æ…¢</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">ä¼ ç»Ÿåˆ†ææµç¨‹ï¼š
<span class="hljs-bullet">1.</span> äº§å“ç»ç†æå‡ºéœ€æ±‚ (1å¤©)
<span class="hljs-bullet">2.</span> æ•°æ®åˆ†æå¸ˆç¡®è®¤éœ€æ±‚ (0.5å¤©)
<span class="hljs-bullet">3.</span> ç¼–å†™SQL/è„šæœ¬æŠ½å–æ•°æ® (0.5å¤©)
<span class="hljs-bullet">4.</span> æ•°æ®æ¸…æ´—å’Œé¢„å¤„ç† (1å¤©)
<span class="hljs-bullet">5.</span> ç»Ÿè®¡åˆ†æå’Œå»ºæ¨¡ (1å¤©)
<span class="hljs-bullet">6.</span> ç”ŸæˆæŠ¥å‘Šå’Œå¯è§†åŒ– (0.5å¤©)
<span class="hljs-section">7. ä¸ä¸šåŠ¡æ–¹è®¨è®ºå’Œä¿®æ”¹ (0.5å¤©)
-----------------------------------------</span>
æ€»è®¡ï¼š3-5å¤©

é—®é¢˜ï¼š
<span class="hljs-bullet">-</span> ä¸šåŠ¡å˜åŒ–å¿«ï¼Œç­‰æŠ¥å‘Šå‡ºæ¥å·²ç»è¿‡æ—¶
<span class="hljs-bullet">-</span> åˆ†æå¸ˆäººåŠ›ç´§å¼ ï¼Œè¯·æ±‚æ’é˜Ÿ
<span class="hljs-bullet">-</span> é‡å¤æ€§åˆ†æå·¥ä½œå¤š
</code></pre>
<p><strong>ç—›ç‚¹3ï¼šç¼ºä¹å®æ—¶é¢„è­¦ï¼Œé—®é¢˜å‘ç°æ»å</strong></p>
<pre><code class="hljs language-diff" lang="diff">å…¸å‹åœºæ™¯ï¼š
åœºæ™¯1ï¼šç”¨æˆ·æµå¤±
<span class="hljs-deletion">- ç”¨æˆ·å·²ç»7å¤©æœªç™»å½•ï¼Œä½†æ²¡æœ‰é¢„è­¦</span>
<span class="hljs-deletion">- ç­‰åˆ°æœˆæŠ¥å‘ç°æ—¶ï¼Œç”¨æˆ·å·²ç»æµå¤±</span>
<span class="hljs-deletion">- é”™è¿‡æœ€ä½³æŒ½å›æ—¶æœº</span>

åœºæ™¯2ï¼šåŠŸèƒ½å¼‚å¸¸
<span class="hljs-deletion">- æŸåŠŸèƒ½ä½¿ç”¨ç‡çªç„¶ä¸‹é™50%</span>
<span class="hljs-deletion">- å¯èƒ½æ˜¯äº§å“é—®é¢˜ï¼Œä½†æ— äººå‘ç°</span>
<span class="hljs-deletion">- ç›´åˆ°ç”¨æˆ·æŠ•è¯‰æ‰çŸ¥é“</span>

åœºæ™¯3ï¼šè¥é”€æ•ˆæœ
<span class="hljs-deletion">- è¥é”€æ´»åŠ¨ä¸Šçº¿åæ•ˆæœä¸ä½³</span>
<span class="hljs-deletion">- ç¼ºä¹å®æ—¶ç›‘æ§ï¼Œæ— æ³•è°ƒæ•´</span>
<span class="hljs-deletion">- é€ æˆé¢„ç®—æµªè´¹</span>
</code></pre>
<p><strong>ç—›ç‚¹4ï¼šåˆ†æç»“æœç¼ºä¹ä¸šåŠ¡æ´å¯Ÿ</strong></p>
<pre><code class="hljs language-erlang" lang="erlang">å½“å‰çŠ¶å†µï¼š
è¾“å‡ºï¼šå¤§é‡ç»Ÿè®¡æ•°å­—å’Œå›¾è¡¨
â”œâ”€â”€ DAU: <span class="hljs-number">85</span>,<span class="hljs-number">423</span>
â”œâ”€â”€ WAU: <span class="hljs-number">387</span>,<span class="hljs-number">621</span>
â”œâ”€â”€ MAU: <span class="hljs-number">523</span>,<span class="hljs-number">417</span>
â”œâ”€â”€ ç•™å­˜ç‡: <span class="hljs-number">38.7</span><span class="hljs-comment">%</span>
â””â”€â”€ ...æ›´å¤šæ•°å­—

ç¼ºå¤±ï¼š
âœ— è¿™äº›æ•°å­—æ„å‘³ç€ä»€ä¹ˆï¼Ÿ
âœ— ä¸å†å²æ•°æ®å¯¹æ¯”å¦‚ä½•ï¼Ÿ
âœ— å­˜åœ¨ä»€ä¹ˆé—®é¢˜å’Œæœºä¼šï¼Ÿ
âœ— åº”è¯¥é‡‡å–ä»€ä¹ˆè¡ŒåŠ¨ï¼Ÿ
âœ— é¢„æœŸæ•ˆæœæ˜¯ä»€ä¹ˆï¼Ÿ

ä¸šåŠ¡æ–¹çš„å›°æƒ‘ï¼š
<span class="hljs-string">"æ•°å­—æˆ‘éƒ½çœ‹åˆ°äº†ï¼Œç„¶åå‘¢ï¼Ÿ"</span>
<span class="hljs-string">"æˆ‘åº”è¯¥åšä»€ä¹ˆï¼Ÿ"</span>
<span class="hljs-string">"é¢„æœŸèƒ½å¸¦æ¥å¤šå°‘æ”¹å–„ï¼Ÿ"</span>
</code></pre>
<p><strong>ç—›ç‚¹5ï¼šå›¢é˜Ÿé‡å¤å¼€å‘ï¼Œç¼ºä¹å¤ç”¨</strong></p>
<pre><code class="hljs language-diff" lang="diff">ç°çŠ¶ï¼š
äº§å“å›¢é˜Ÿï¼šè‡ªå·±å†™SQLåˆ†æç”¨æˆ·ç•™å­˜
è¿è¥å›¢é˜Ÿï¼šè‡ªå·±å†™Pythonè„šæœ¬åˆ†æè½¬åŒ–ç‡
æ•°æ®å›¢é˜Ÿï¼šè‡ªå·±å¼€å‘BIçœ‹æ¿
å®¢æœå›¢é˜Ÿï¼šè‡ªå·±å¯¼å‡ºExcelåˆ†ææŠ•è¯‰ç‡

é—®é¢˜ï¼š
<span class="hljs-deletion">- ç›¸ä¼¼çš„åˆ†æé€»è¾‘é‡å¤å¼€å‘</span>
<span class="hljs-deletion">- ä»£ç è´¨é‡å‚å·®ä¸é½</span>
<span class="hljs-deletion">- è®¡ç®—å£å¾„ä¸ç»Ÿä¸€</span>
<span class="hljs-deletion">- ç»´æŠ¤æˆæœ¬é«˜</span>
</code></pre>
<h3 data-id="heading-4">1.3 è§£å†³æ–¹æ¡ˆè®¾è®¡</h3>
<p><strong>ç›®æ ‡</strong>ï¼šæ„å»ºåŸºäºAgentScope Skillç³»ç»Ÿçš„æ™ºèƒ½ç”¨æˆ·è¡Œä¸ºåˆ†æå¹³å°</p>
<p><strong>æ ¸å¿ƒèƒ½åŠ›</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç”¨æˆ·è¡Œä¸ºåˆ†æSkillå¹³å°                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®æ¥å…¥å±‚    â”‚  â”‚   åˆ†æå¼•æ“å±‚     â”‚  â”‚   åº”ç”¨æœåŠ¡å±‚    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚â€¢ ç»Ÿä¸€æ•°æ®æº    â”‚  â”‚â€¢ ç”¨æˆ·æ´»è·ƒåº¦åˆ†æ  â”‚  â”‚â€¢ <span class="hljs-attribute">REST</span> API       â”‚
â”‚â€¢ æ•°æ®æ¸…æ´—      â”‚  â”‚â€¢ ç”¨æˆ·åˆ†å±‚èšç±»    â”‚  â”‚â€¢ å®šæ—¶ä»»åŠ¡       â”‚
â”‚â€¢ è´¨é‡æ£€æŸ¥      â”‚  â”‚â€¢ åŠŸèƒ½ä½¿ç”¨åˆ†æ    â”‚  â”‚â€¢ å®æ—¶é¢„è­¦       â”‚
â”‚â€¢ æ ¼å¼è½¬æ¢      â”‚  â”‚â€¢ æµå¤±é£é™©é¢„æµ‹    â”‚  â”‚â€¢ æŠ¥å‘Šç”Ÿæˆ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â€¢ æ´å¯Ÿç”Ÿæˆ        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚â€¢ å»ºè®®ç”Ÿæˆ        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Hookç›‘æ§ç³»ç»Ÿ     â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚â€¢ è¿‡ç¨‹è¿½è¸ª          â”‚
                    â”‚â€¢ æ€§èƒ½ç›‘æ§          â”‚
                    â”‚â€¢ è´¨é‡ä¿è¯          â”‚
                    â”‚â€¢ æ—¥å¿—è®°å½•          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æŠ€æœ¯æ¶æ„</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">æŠ€æœ¯æ ˆï¼š
â”œâ”€â”€ æ¡†æ¶ï¼šAgentScope + Spring Boot <span class="hljs-number">3.2</span>
â”œâ”€â”€ æ•°æ®å¤„ç†ï¼šApache Commons Math <span class="hljs-number">3.6</span>
â”œâ”€â”€ æœºå™¨å­¦ä¹ ï¼šSmile ML <span class="hljs-number">3.0</span>
â”œâ”€â”€ æ•°æ®åº“ï¼šMySQL <span class="hljs-number">8.0</span> + Redis <span class="hljs-number">7.0</span>
â”œâ”€â”€ æ¶ˆæ¯é˜Ÿåˆ—ï¼šKafka <span class="hljs-number">3.6</span>
â”œâ”€â”€ ç›‘æ§ï¼šPrometheus + Grafana
â””â”€â”€ æ—¥å¿—ï¼šSLF4j + Logback

æ¨¡å—åˆ’åˆ†ï¼š
skill-user-behavior-analysis/
â”œâ”€â”€ src/main/java/
â”‚   â”œâ”€â”€ skill/          # Skillå®šä¹‰
â”‚   â”œâ”€â”€ hook/           # Hookç›‘æ§
â”‚   â”œâ”€â”€ processor/      # åˆ†æå¼•æ“
â”‚   â”œâ”€â”€ model/          # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ repository/     # æ•°æ®è®¿é—®
â”‚   â””â”€â”€ service/        # ä¸šåŠ¡æœåŠ¡
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ skills/         # Skill MDæ–‡ä»¶
â”‚   â””â”€â”€ application.yml
â””â”€â”€ pom.xml
</code></pre>
<hr/>
<h2 data-id="heading-5">2. Skillå®šä¹‰æ–‡ä»¶</h2>
<h3 data-id="heading-6">2.1 å®Œæ•´çš„Skillå®šä¹‰</h3>
<p>åˆ›å»ºæ–‡ä»¶ï¼š<code>skills/user_behavior_analysis.md</code></p>
<pre><code class="hljs language-markdown" lang="markdown">---
<span class="hljs-section"># ========== åŸºç¡€ä¿¡æ¯ ==========</span>
id: skill-user-behavior-001
name: user<span class="hljs-emphasis">_behavior_</span>deep<span class="hljs-emphasis">_analysis
displayName: ç”¨æˆ·è¡Œä¸ºæ·±åº¦åˆ†æ
version: 1.0.0
author: Product Analytics Team
organization: SaaS Inc.
createdAt: 2024-12-01T10:00:00Z
updatedAt: 2024-12-30T15:00:00Z

# ========== åˆ†ç±»å’Œæ ‡ç­¾ ==========
category: analytics
tags:
  - user-behavior
  - retention-analysis
  - churn-prediction
  - user-segmentation
  - rfm-model
keywords:
  - ç”¨æˆ·è¡Œä¸ºåˆ†æ
  - ç•™å­˜ç‡
  - æµå¤±é¢„æµ‹
  - ç”¨æˆ·åˆ†å±‚
  - RFMæ¨¡å‹
  - æ´»è·ƒåº¦åˆ†æ

# ========== æŠ€èƒ½æè¿° ==========
description: &gt;
  æ·±åº¦åˆ†æç”¨æˆ·ä½¿ç”¨è¡Œä¸ºï¼Œè¯†åˆ«æµå¤±é£é™©ç”¨æˆ·ï¼Œä¼˜åŒ–äº§å“åŠŸèƒ½ï¼Œ
  æå‡ç”¨æˆ·æ´»è·ƒåº¦å’Œç•™å­˜ç‡ã€‚æ”¯æŒå¤šç»´åº¦åˆ†æå’Œæ™ºèƒ½é¢„è­¦ã€‚

detailedDescription: |
  æœ¬æŠ€èƒ½æä¾›ä¼ä¸šçº§çš„ç”¨æˆ·è¡Œä¸ºåˆ†æèƒ½åŠ›ï¼ŒåŒ…æ‹¬ï¼š
  
  <span class="hljs-strong">**æ ¸å¿ƒåŠŸèƒ½**</span>ï¼š
  - ç”¨æˆ·æ´»è·ƒåº¦åˆ†æï¼ˆDAU/WAU/MAUï¼‰
  - ç•™å­˜ç‡åˆ†æï¼ˆæ¬¡æ—¥/7æ—¥/30æ—¥ç•™å­˜ï¼‰
  - ç”¨æˆ·åˆ†å±‚ä¸èšç±»ï¼ˆRFMæ¨¡å‹ã€K-meansï¼‰
  - åŠŸèƒ½ä½¿ç”¨åˆ†æï¼ˆé¢‘ç‡ã€æ—¶é•¿ã€è·¯å¾„ï¼‰
  - æµå¤±é£é™©é¢„æµ‹ï¼ˆæœºå™¨å­¦ä¹ æ¨¡å‹ï¼‰
  - å®æ—¶é¢„è­¦å’Œæ¨è
  
  <span class="hljs-strong">**æŠ€æœ¯ç‰¹ç‚¹**</span>ï¼š
  - æ”¯æŒå¤§è§„æ¨¡æ•°æ®å¤„ç†ï¼ˆåƒä¸‡çº§ç”¨æˆ·ï¼‰
  - å®æ—¶æµå¼è®¡ç®—å’Œæ‰¹é‡åˆ†æ
  - å¯è§£é‡Šçš„åˆ†æç»“æœ
  - è‡ªåŠ¨ç”Ÿæˆä¸šåŠ¡æ´å¯Ÿ
  
  <span class="hljs-strong">**ä¸šåŠ¡ä»·å€¼**</span>ï¼š
  - æå‡ç”¨æˆ·ç•™å­˜ç‡10-15%
  - é™ä½æµå¤±ç‡30-40%
  - ä¼˜åŒ–äº§å“åŠŸèƒ½ä¼˜å…ˆçº§
  - ç²¾å‡†è¥é”€æ¨è

# ========== ä¾èµ–ç®¡ç† ==========
dependencies:
  - skill: statistical_</span>summary
<span class="hljs-code">    version: "&gt;=1.0.0"
    required: true
    reason: åŸºç¡€ç»Ÿè®¡è®¡ç®—
  
  - skill: ml_clustering
    version: "^1.2.0"
    required: true
    reason: ç”¨æˆ·èšç±»åˆ†æ
</span>
conflicts:
<span class="hljs-bullet">  -</span> skill: legacy<span class="hljs-emphasis">_user_</span>analytics
<span class="hljs-code">    reason: åŠŸèƒ½é‡å ï¼Œé¿å…å†²çª
</span>
requires:
  runtime: java
  minVersion: "17"
  memory: "1GB"
  cpu: "2 cores"
  libraries:
<span class="hljs-bullet">    -</span> name: apache-commons-math
<span class="hljs-code">      version: "3.6.1"
    - name: smile-core
      version: "3.0.0"
    - name: jackson-databind
      version: "2.16.0"
</span>
<span class="hljs-section"># ========== æ‰§è¡Œé…ç½® ==========</span>
executionConfig:
  timeout: 600000  # 10åˆ†é’Ÿ
  retries: 2
  retryDelay: 5000
  parallelizable: true
  cacheable: true
  cacheExpiration: 1800  # 30åˆ†é’Ÿ

parameters:
  confidenceLevel:
<span class="hljs-code">    type: float
    default: 0.95
    min: 0.8
    max: 0.99
    description: ç»Ÿè®¡åˆ†æçš„ç½®ä¿¡æ°´å¹³
  
  churnThresholdDays:
    type: integer
    default: 7
    min: 3
    max: 30
    description: æµå¤±åˆ¤å®šå¤©æ•°é˜ˆå€¼
  
  clusterCount:
    type: integer
    default: 5
    min: 2
    max: 10
    description: ç”¨æˆ·åˆ†ç¾¤æ•°é‡
  
  minDataQualityScore:
    type: float
    default: 70.0
    min: 50.0
    max: 100.0
    description: æœ€ä½æ•°æ®è´¨é‡åˆ†æ•°è¦æ±‚
</span>
<span class="hljs-section"># ========== æ€§èƒ½æŒ‡æ ‡ ==========</span>
metrics:
  avgExecutionTime: 3500  # ms
  successRate: 0.985
  usageCount: 8723
  satisfactionScore: 4.6
  dataProcessedPerDay: 5000000  # æ¡è®°å½•

<span class="hljs-section"># ========== è´¨é‡è¯„ä¼° ==========</span>
qualityScore:
  overall: 4.7
  accuracy: 4.8
  performance: 4.5
  documentation: 4.8
  usability: 4.6

<span class="hljs-section"># ========== è®¸å¯å’Œå®šä»· ==========</span>
license: Apache-2.0
pricing:
  model: freemium
  free:
<span class="hljs-code">    maxUsers: 10000
    maxCalls: 500
    maxDataSize: "100MB"
  premium:
    pricePerMonth: 99.99
    features:
      - unlimited_users
      - realtime_alerts
      - advanced_ml
      - priority_support
      - custom_integration
</span>
<span class="hljs-section">isPublic: true
---</span>

<span class="hljs-section"># ç”¨æˆ·è¡Œä¸ºæ·±åº¦åˆ†ææŠ€èƒ½</span>

<span class="hljs-section">## ğŸ“‹ æŠ€èƒ½ç›®æ ‡</span>

æ·±å…¥åˆ†æç”¨æˆ·ä½¿ç”¨è¡Œä¸ºï¼Œè¯†åˆ«é«˜ä»·å€¼ç”¨æˆ·ã€æµå¤±é£é™©ç”¨æˆ·ï¼Œä¼˜åŒ–äº§å“åŠŸèƒ½ï¼Œæå‡ç”¨æˆ·æ´»è·ƒåº¦å’Œç•™å­˜ç‡ã€‚

<span class="hljs-strong">**é€‚ç”¨åœºæ™¯**</span>ï¼š
<span class="hljs-bullet">-</span> SaaSäº§å“ç”¨æˆ·åˆ†æ
<span class="hljs-bullet">-</span> ç”µå•†ç”¨æˆ·è¡Œä¸ºåˆ†æ
<span class="hljs-bullet">-</span> ç§»åŠ¨åº”ç”¨ç•™å­˜åˆ†æ
<span class="hljs-bullet">-</span> ç¤¾äº¤å¹³å°æ´»è·ƒåº¦åˆ†æ
<span class="hljs-bullet">-</span> ä¼ä¸šæœåŠ¡ç”¨æˆ·è¿è¥

<span class="hljs-section">## ğŸ”§ ä½¿ç”¨æ–¹æ³•</span>

<span class="hljs-section">### è¾“å…¥æ•°æ®æ ¼å¼</span>

<span class="hljs-code">```json
{
  "data": {
    "format": "json",
    "content": "user_behavior_logs.json",
    "columns": [
      "user_id",      // ç”¨æˆ·ID
      "timestamp",    // è¡Œä¸ºæ—¶é—´
      "action",       // è¡Œä¸ºç±»å‹
      "duration",     // æŒç»­æ—¶é•¿(ms)
      "feature",      // åŠŸèƒ½æ¨¡å—
      "device"        // è®¾å¤‡ç±»å‹
    ]
  },
  "analysisType": [
    "statistical",      // ç»Ÿè®¡åˆ†æ
    "clustering",       // èšç±»åˆ†æ
    "correlation",      // ç›¸å…³æ€§åˆ†æ
    "churn_prediction"  // æµå¤±é¢„æµ‹
  ],
  "options": {
    "confidenceLevel": 0.95,
    "groupBy": "feature",
    "churnThresholdDays": 7,
    "clusterCount": 5
  }
}
</span></code></pre>
<h3 data-id="heading-7">è¾“å‡ºç»“æœæ ¼å¼</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"summary"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"totalUsers"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">52341</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"activeUsers"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">38762</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"churnRiskUsers"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">7851</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"analysisDate"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-12-30"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dataQualityScore"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">92.5</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"executionTime"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3547</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"activityMetrics"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dau"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8542</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"wau"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">38762</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"mau"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">52341</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"day1Retention"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.453</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"day7Retention"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.387</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"day30Retention"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.221</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"segmentation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"RFM"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"segments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>...<span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"churnPrediction"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"churnRate"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.15</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"modelAccuracy"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.85</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"topRiskFactors"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>...<span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"insights"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>...<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"recommendations"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>...<span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-8">åˆ†æç»´åº¦</h2>
<h3 data-id="heading-9">1. ç”¨æˆ·æ´»è·ƒåº¦åˆ†æ</h3>
<p><strong>æŒ‡æ ‡å®šä¹‰</strong>ï¼š</p>
<ul>
<li><strong>DAU (Daily Active Users)</strong>ï¼šæ—¥æ´»è·ƒç”¨æˆ·æ•°</li>
<li><strong>WAU (Weekly Active Users)</strong>ï¼šå‘¨æ´»è·ƒç”¨æˆ·æ•°</li>
<li><strong>MAU (Monthly Active Users)</strong>ï¼šæœˆæ´»è·ƒç”¨æˆ·æ•°</li>
<li><strong>DAU/WAUæ¯”ç‡</strong>ï¼šæ—¥æ´»/å‘¨æ´»æ¯”ç‡ï¼Œåæ˜ ç”¨æˆ·ç²˜æ€§</li>
<li><strong>WAU/MAUæ¯”ç‡</strong>ï¼šå‘¨æ´»/æœˆæ´»æ¯”ç‡ï¼Œåæ˜ ç”¨æˆ·æ´»è·ƒé¢‘ç‡</li>
</ul>
<p><strong>ç•™å­˜ç‡è®¡ç®—</strong>ï¼š</p>
<ul>
<li><strong>æ¬¡æ—¥ç•™å­˜</strong>ï¼šæ–°ç”¨æˆ·ç¬¬2å¤©å†æ¬¡ä½¿ç”¨çš„æ¯”ä¾‹</li>
<li><strong>7æ—¥ç•™å­˜</strong>ï¼šæ–°ç”¨æˆ·ç¬¬7å¤©ä»åœ¨ä½¿ç”¨çš„æ¯”ä¾‹</li>
<li><strong>30æ—¥ç•™å­˜</strong>ï¼šæ–°ç”¨æˆ·ç¬¬30å¤©ä»åœ¨ä½¿ç”¨çš„æ¯”ä¾‹</li>
</ul>
<p><strong>æ´»è·ƒæ—¶æ®µåˆ†æ</strong>ï¼š</p>
<ul>
<li>æŒ‰å°æ—¶ç»Ÿè®¡ç”¨æˆ·æ´»è·ƒåˆ†å¸ƒ</li>
<li>è¯†åˆ«é«˜å³°å’Œä½è°·æ—¶æ®µ</li>
<li>æŒ‡å¯¼è¿è¥æ´»åŠ¨æ—¶é—´å®‰æ’</li>
</ul>
<h3 data-id="heading-10">2. ç”¨æˆ·åˆ†å±‚ä¸èšç±»</h3>
<p><strong>RFMæ¨¡å‹</strong>ï¼š</p>
<ul>
<li><strong>R (Recency)</strong>ï¼šæœ€è¿‘ä¸€æ¬¡æ´»åŠ¨è·ä»Šå¤©æ•°</li>
<li><strong>F (Frequency)</strong>ï¼šæ´»åŠ¨é¢‘æ¬¡</li>
<li><strong>M (Monetary)</strong>ï¼šä½¿ç”¨æ—¶é•¿ï¼ˆä»£è¡¨ä»·å€¼ï¼‰</li>
</ul>
<p><strong>ç”¨æˆ·åˆ†ç¾¤</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> é‡è¦ä»·å€¼å®¢æˆ·ï¼šRä½ + Fé«˜ + Mé«˜ (10%)
<span class="hljs-bullet">   -</span> æœ€è¿‘æ´»è·ƒã€é«˜é¢‘ã€é«˜ä»·å€¼
<span class="hljs-bullet">   -</span> éœ€è¦é‡ç‚¹ç»´æŠ¤å’ŒVIPæœåŠ¡

<span class="hljs-bullet">2.</span> é‡è¦ä¿æŒå®¢æˆ·ï¼šRä½ + Fé«˜ (24%)
<span class="hljs-bullet">   -</span> æœ€è¿‘æ´»è·ƒã€é«˜é¢‘
<span class="hljs-bullet">   -</span> æœ‰æ½œåŠ›æˆä¸ºé«˜ä»·å€¼å®¢æˆ·

<span class="hljs-bullet">3.</span> é‡è¦æŒ½å›å®¢æˆ·ï¼šRé«˜ + Fé«˜ + Mé«˜ (6.5%)
<span class="hljs-bullet">   -</span> æ›¾ç»é«˜é¢‘é«˜ä»·å€¼ï¼Œä½†æœ€è¿‘æœªæ´»è·ƒ
<span class="hljs-bullet">   -</span> éœ€ç«‹å³æŒ½å›ï¼Œé˜²æ­¢æµå¤±

<span class="hljs-bullet">4.</span> ä¸€èˆ¬æ´»è·ƒå®¢æˆ·ï¼šRä½ (45%)
<span class="hljs-bullet">   -</span> æœ€è¿‘æ´»è·ƒï¼Œä½†é¢‘æ¬¡å’Œä»·å€¼è¾ƒä½
<span class="hljs-bullet">   -</span> éœ€è¦å¼•å¯¼ä½¿ç”¨æ›´å¤šåŠŸèƒ½

<span class="hljs-bullet">5.</span> æµå¤±é£é™©å®¢æˆ·ï¼šRé«˜ (15%)
<span class="hljs-bullet">   -</span> é•¿æ—¶é—´æœªæ´»è·ƒ
<span class="hljs-bullet">   -</span> é«˜æµå¤±é£é™©ï¼Œéœ€ç´§æ€¥å¹²é¢„
</code></pre>
<h3 data-id="heading-11">3. åŠŸèƒ½ä½¿ç”¨åˆ†æ</h3>
<p><strong>ä½¿ç”¨é¢‘ç‡</strong>ï¼š</p>
<ul>
<li>å„åŠŸèƒ½çš„ä½¿ç”¨æ¬¡æ•°ç»Ÿè®¡</li>
<li>è¯†åˆ«æ ¸å¿ƒåŠŸèƒ½å’Œå†·é—¨åŠŸèƒ½</li>
</ul>
<p><strong>ä½¿ç”¨æ—¶é•¿</strong>ï¼š</p>
<ul>
<li>å„åŠŸèƒ½çš„å¹³å‡ä½¿ç”¨æ—¶é•¿</li>
<li>è¯„ä¼°åŠŸèƒ½ä»·å€¼å’Œç”¨æˆ·ç²˜æ€§</li>
</ul>
<p><strong>åŠŸèƒ½æ¸—é€ç‡</strong>ï¼š</p>
<ul>
<li>å„åŠŸèƒ½çš„ç”¨æˆ·è¦†ç›–ç‡</li>
<li>è¯†åˆ«æ¨å¹¿ä¸è¶³çš„åŠŸèƒ½</li>
</ul>
<p><strong>ä½¿ç”¨è·¯å¾„</strong>ï¼š</p>
<ul>
<li>åŠŸèƒ½é—´çš„è·³è½¬å…³ç³»</li>
<li>ä¼˜åŒ–äº§å“å¯¼èˆª</li>
</ul>
<h3 data-id="heading-12">4. æµå¤±é£é™©é¢„æµ‹</h3>
<p><strong>é£é™©å› ç´ </strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">é«˜é£é™©å› ç´  (æƒé‡0.4)ï¼š
<span class="hljs-deletion">- è¿ç»­Nå¤©æœªç™»å½•</span>
<span class="hljs-deletion">- æ´»åŠ¨é¢‘æ¬¡å¤§å¹…ä¸‹é™</span>

ä¸­é£é™©å› ç´  (æƒé‡0.3)ï¼š
<span class="hljs-deletion">- ä½¿ç”¨æ—¶é•¿ä¸‹é™è¶…è¿‡50%</span>
<span class="hljs-deletion">- ä»…ä½¿ç”¨å•ä¸€åŠŸèƒ½</span>

ä½é£é™©å› ç´  (æƒé‡0.2)ï¼š
<span class="hljs-deletion">- æœªå‚ä¸è¥é”€æ´»åŠ¨</span>
<span class="hljs-deletion">- è®¾å¤‡å¼‚å¸¸æˆ–é”™è¯¯ç‡é«˜</span>

å…¶ä»–å› ç´  (æƒé‡0.1)ï¼š
<span class="hljs-deletion">- å®¢æˆ·ç«¯ç‰ˆæœ¬è¿‡æ—§</span>
<span class="hljs-deletion">- æœªå¡«å†™å®Œæ•´èµ„æ–™</span>
</code></pre>
<p><strong>é¢„æµ‹æ¨¡å‹</strong>ï¼š</p>
<ul>
<li>åŸºäºé€»è¾‘å›å½’çš„æµå¤±æ¦‚ç‡é¢„æµ‹</li>
<li>å‡†ç¡®ç‡ï¼š85%+</li>
<li>å¬å›ç‡ï¼š80%+</li>
</ul>
<p><strong>é¢„è­¦æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>å®æ—¶ç›‘æ§ç”¨æˆ·è¡Œä¸º</li>
<li>è‡ªåŠ¨è¯†åˆ«é«˜é£é™©ç”¨æˆ·</li>
<li>è§¦å‘æŒ½å›ç­–ç•¥</li>
</ul>
<h2 data-id="heading-13">ä¸šåŠ¡æ´å¯Ÿç”Ÿæˆ</h2>
<p>ç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹ç±»å‹çš„æ´å¯Ÿï¼š</p>
<h3 data-id="heading-14">æ´å¯Ÿç±»å‹1ï¼šè¶‹åŠ¿æ´å¯Ÿ</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"trend"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"severity"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"7æ—¥ç•™å­˜ç‡å‘ˆä¸‹é™è¶‹åŠ¿ï¼Œå·²ä½äºè¡Œä¸šå¹³å‡æ°´å¹³"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"evidence"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"å½“å‰7æ—¥ç•™å­˜ç‡: 38.7%"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"è¡Œä¸šå¹³å‡: 60%"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"ç¯æ¯”ä¸‹é™: 5.2%"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"confidence"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.95</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-15">æ´å¯Ÿç±»å‹2ï¼šå¼‚å¸¸æ´å¯Ÿ</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"anomaly"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"severity"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"critical"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯†åˆ«å‡º15%çš„ç”¨æˆ·å­˜åœ¨æµå¤±é£é™©"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"evidence"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"æµå¤±é£é™©ç”¨æˆ·: 7,851äºº"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"ä¸»è¦åŸå› : è¿ç»­7å¤©æœªç™»å½•"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"æ¬¡è¦åŸå› : ä½¿ç”¨æ—¶é•¿ä¸‹é™60%"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"confidence"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.85</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-16">æ´å¯Ÿç±»å‹3ï¼šæ¨¡å¼æ´å¯Ÿ</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pattern"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"severity"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"medium"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½¿ç”¨'é«˜çº§åŠŸèƒ½A'çš„ç”¨æˆ·ç•™å­˜ç‡æ˜¾è‘—æ›´é«˜"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"evidence"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"ä½¿ç”¨è¯¥åŠŸèƒ½çš„ç”¨æˆ·7æ—¥ç•™å­˜ç‡: 78%"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"æœªä½¿ç”¨è¯¥åŠŸèƒ½çš„ç”¨æˆ·7æ—¥ç•™å­˜ç‡: 43%"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"å·®å¼‚æ˜¾è‘—æ€§: p &lt; 0.001"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"confidence"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.92</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-17">æ´å¯Ÿç±»å‹4ï¼šæœºä¼šæ´å¯Ÿ</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"opportunity"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"severity"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"medium"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é‡è¦ä»·å€¼å®¢æˆ·å æ¯”å¥åº·ï¼Œä½†å¢é•¿æ½œåŠ›æœ‰é™"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"evidence"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"é‡è¦ä»·å€¼å®¢æˆ·å æ¯”: 10%"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"è¡Œä¸šä¼˜ç§€æ°´å¹³: 15%"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"å¯æå‡ç©ºé—´: 5ä¸ªç™¾åˆ†ç‚¹"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"confidence"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.88</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-18">è¡ŒåŠ¨å»ºè®®ç”Ÿæˆ</h2>
<p>ç³»ç»Ÿä¼šåŸºäºæ´å¯Ÿè‡ªåŠ¨ç”Ÿæˆå¯æ‰§è¡Œçš„è¡ŒåŠ¨å»ºè®®ï¼š</p>
<h3 data-id="heading-19">å»ºè®®ç±»å‹1ï¼šç´§æ€¥å¹²é¢„</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"priority"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"critical"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"action"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é’ˆå¯¹7,851ä¸ªæµå¤±é£é™©ç”¨æˆ·æ¨é€ä¸ªæ€§åŒ–æŒ½å›å†…å®¹"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"rationale"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åŠæ—¶æŒ½å›å¯å‡å°‘50%çš„æµå¤±ï¼Œæ¨¡å‹å‡†ç¡®ç‡85%"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"expectedImpact"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¢„è®¡æŒ½å›3,000+ç”¨æˆ·ï¼Œä»·å€¼çº¦15ä¸‡æœˆè´¹"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"implementation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"1. åˆ†æç”¨æˆ·å†å²è¡Œä¸ºå’Œåå¥½"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"2. è®¾è®¡ä¸ªæ€§åŒ–æŒ½å›ç­–ç•¥ï¼ˆä¼˜æƒ /å†…å®¹/åŠŸèƒ½æ¨èï¼‰"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"3. é€šè¿‡é‚®ä»¶ã€çŸ­ä¿¡ã€APPæ¨é€è§¦è¾¾"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"4. æä¾›é™æ—¶ä¼˜æƒ å’Œä¸“å±æœåŠ¡"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"5. è·Ÿè¸ªæŒ½å›æ•ˆæœï¼ŒæŒç»­ä¼˜åŒ–"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"kpis"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"targetReactivationRate"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.38</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"estimatedRetainedUsers"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2983</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"estimatedRevenue"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">149150</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timeline"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç«‹å³æ‰§è¡Œï¼Œ3å¤©å†…å®Œæˆè§¦è¾¾"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"owner"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”¨æˆ·è¿è¥å›¢é˜Ÿ"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-20">å»ºè®®ç±»å‹2ï¼šäº§å“ä¼˜åŒ–</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"priority"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"action"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åœ¨æ–°ç”¨æˆ·å¼•å¯¼ä¸­é‡ç‚¹çªå‡ºé«˜ç•™å­˜åŠŸèƒ½"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"rationale"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½¿ç”¨'æ–‡æ¡£ååŒ'åŠŸèƒ½çš„ç”¨æˆ·ç•™å­˜ç‡é«˜35%"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"expectedImpact"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¢„è®¡æ•´ä½“7æ—¥ç•™å­˜ç‡æå‡10-15%"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"implementation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"1. ä¼˜åŒ–æ–°ç”¨æˆ·onboardingæµç¨‹"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"2. å‰3æ­¥å¼•å¯¼ç”¨æˆ·ä½¿ç”¨æ ¸å¿ƒåŠŸèƒ½"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"3. æä¾›äº’åŠ¨å¼æ•™ç¨‹å’Œè§†é¢‘æŒ‡å¯¼"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"4. è®¾ç½®æˆå°±milestoneæ¿€åŠ±ä½¿ç”¨"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"5. A/Bæµ‹è¯•éªŒè¯æ•ˆæœ"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"kpis"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"targetDay7Retention"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.50</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"estimatedNewRetainedUsers"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">6500</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timeline"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2å‘¨å®Œæˆè®¾è®¡ï¼Œ1å‘¨å¼€å‘ï¼Œ1å‘¨æµ‹è¯•"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"owner"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"äº§å“å›¢é˜Ÿ + è®¾è®¡å›¢é˜Ÿ"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-21">å»ºè®®ç±»å‹3ï¼šåŠŸèƒ½è°ƒæ•´</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"priority"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"medium"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"action"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯„ä¼°3ä¸ªå†·é—¨åŠŸèƒ½ï¼Œè€ƒè™‘ä¼˜åŒ–æˆ–ä¸‹çº¿"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"rationale"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½¿ç”¨ç‡&lt;5%ï¼Œå ç”¨å¼€å‘å’Œç»´æŠ¤èµ„æº"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"expectedImpact"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"èŠ‚çœ20%å¼€å‘èµ„æºï¼Œèšç„¦æ ¸å¿ƒåŠŸèƒ½"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"implementation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"1. æ·±å…¥è°ƒç ”ç”¨æˆ·éœ€æ±‚å’Œç—›ç‚¹"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"2. è¯„ä¼°åŠŸèƒ½çš„å•†ä¸šä»·å€¼å’Œæˆ˜ç•¥æ„ä¹‰"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"3. å¯¹äºæœ‰ä»·å€¼ä½†ä½¿ç”¨ç‡ä½çš„åŠŸèƒ½è¿›è¡Œä¼˜åŒ–"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"4. å¯¹äºä»·å€¼ä½çš„åŠŸèƒ½é€æ­¥ä¸‹çº¿"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"5. åˆ¶å®šä¸‹çº¿æ²Ÿé€šå’Œè¿ç§»æ–¹æ¡ˆ"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"kpis"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"targetResourceSaving"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.20</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"estimatedFeatureImprovement"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timeline"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1ä¸ªæœˆå®Œæˆè¯„ä¼°ï¼Œ2ä¸ªæœˆæ‰§è¡Œ"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"owner"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"äº§å“å›¢é˜Ÿ + ç ”å‘å›¢é˜Ÿ"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-22">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-23">æ•°æ®å‡†å¤‡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âœ“ å¥½çš„åšæ³•ï¼šæ•°æ®æ¸…æ´—å’ŒéªŒè¯</span>
<span class="hljs-keyword">public</span> List&lt;UserBehaviorLog&gt; <span class="hljs-title function_">prepareData</span><span class="hljs-params">(List&lt;UserBehaviorLog&gt; rawLogs)</span> {
    <span class="hljs-keyword">return</span> rawLogs.stream()
        .filter(log -&gt; log.getUserId() != <span class="hljs-literal">null</span>)  <span class="hljs-comment">// è¿‡æ»¤ç©ºID</span>
        .filter(log -&gt; log.getTimestamp() != <span class="hljs-literal">null</span>)  <span class="hljs-comment">// è¿‡æ»¤ç©ºæ—¶é—´</span>
        .filter(log -&gt; isValidDuration(log.getDuration()))  <span class="hljs-comment">// éªŒè¯æ—¶é•¿</span>
        .peek(log -&gt; normalizeAction(log))  <span class="hljs-comment">// æ ‡å‡†åŒ–è¡Œä¸º</span>
        .collect(Collectors.toList());
}

<span class="hljs-comment">// âœ— ä¸å¥½çš„åšæ³•ï¼šç›´æ¥ä½¿ç”¨åŸå§‹æ•°æ®</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">analyze</span><span class="hljs-params">(List&lt;UserBehaviorLog&gt; rawLogs)</span> {
    <span class="hljs-comment">// å¯èƒ½åŒ…å«è„æ•°æ®ï¼Œå¯¼è‡´åˆ†æç»“æœä¸å‡†ç¡®</span>
    processor.analyze(rawLogs);
}
</code></pre>
<h3 data-id="heading-24">å‚æ•°é…ç½®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âœ“ å¥½çš„åšæ³•ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯è°ƒæ•´å‚æ•°</span>
<span class="hljs-type">AnalysisConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> AnalysisConfig.builder()
    .churnThresholdDays(<span class="hljs-number">7</span>)  <span class="hljs-comment">// B2Bäº§å“ç”¨7å¤©</span>
    .confidenceLevel(<span class="hljs-number">0.95</span>)  <span class="hljs-comment">// é«˜ç½®ä¿¡åº¦</span>
    .clusterCount(<span class="hljs-number">5</span>)  <span class="hljs-comment">// 5ä¸ªç”¨æˆ·åˆ†ç¾¤</span>
    .minDataQualityScore(<span class="hljs-number">80.0</span>)  <span class="hljs-comment">// è¦æ±‚é«˜è´¨é‡æ•°æ®</span>
    .build();

<span class="hljs-comment">// âœ— ä¸å¥½çš„åšæ³•ï¼šä½¿ç”¨é»˜è®¤é…ç½®</span>
<span class="hljs-type">AnalysisConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> AnalysisConfig.getDefault();  <span class="hljs-comment">// å¯èƒ½ä¸é€‚åˆä¸šåŠ¡</span>
</code></pre>
<h3 data-id="heading-25">ç»“æœåº”ç”¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âœ“ å¥½çš„åšæ³•ï¼šå»ºç«‹æ´å¯Ÿåˆ°è¡ŒåŠ¨çš„é—­ç¯</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleAnalysisResult</span><span class="hljs-params">(AnalysisResult result)</span> {
    <span class="hljs-comment">// 1. ä¿å­˜æ´å¯Ÿ</span>
    insightService.saveInsights(result.getInsights());
    
    <span class="hljs-comment">// 2. è§¦å‘é¢„è­¦</span>
    result.getChurnPrediction().getChurnRiskUserIds()
        .forEach(userId -&gt; alertService.sendChurnAlert(userId));
    
    <span class="hljs-comment">// 3. ç”Ÿæˆå·¥å•</span>
    result.getRecommendations().stream()
        .filter(r -&gt; r.getPriority().equals(<span class="hljs-string">"critical"</span>))
        .forEach(r -&gt; ticketService.createTicket(r));
    
    <span class="hljs-comment">// 4. è·Ÿè¸ªæ‰§è¡Œ</span>
    trackingService.trackRecommendations(result.getRecommendations());
}

<span class="hljs-comment">// âœ— ä¸å¥½çš„åšæ³•ï¼šåªçœ‹æŠ¥å‘Šä¸è¡ŒåŠ¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleAnalysisResult</span><span class="hljs-params">(AnalysisResult result)</span> {
    log.info(<span class="hljs-string">"Analysis result: {}"</span>, result);  <span class="hljs-comment">// ä»…è®°å½•æ—¥å¿—</span>
}
</code></pre>
<h3 data-id="heading-26">2.2 Skillå®šä¹‰è§£æ</h3>
<p><strong>YAML Front Matterè®¾è®¡è€ƒè™‘</strong>ï¼š</p>
<ol>
<li><strong>ç‰ˆæœ¬ç®¡ç†</strong>ï¼šé‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·</li>
<li><strong>ä¾èµ–å£°æ˜</strong>ï¼šæ˜ç¡®ä¾èµ–çš„å…¶ä»–Skill</li>
<li><strong>èµ„æºè¦æ±‚</strong>ï¼šå£°æ˜è¿è¡Œæ—¶èµ„æºéœ€æ±‚</li>
<li><strong>å‚æ•°é…ç½®</strong>ï¼šæä¾›çµæ´»çš„å‚æ•°è°ƒæ•´</li>
<li><strong>å®šä»·æ¨¡å‹</strong>ï¼šæ”¯æŒå…è´¹å’Œä»˜è´¹ç‰ˆæœ¬</li>
</ol>
<p><strong>Markdown Bodyè®¾è®¡è€ƒè™‘</strong>ï¼š</p>
<ol>
<li><strong>ç»“æ„æ¸…æ™°</strong>ï¼šä»ç›®æ ‡â†’æ–¹æ³•â†’ç¤ºä¾‹â†’æœ€ä½³å®è·µ</li>
<li><strong>å¯è¯»æ€§å¼º</strong>ï¼šä½¿ç”¨è¡¨æ ¼ã€åˆ—è¡¨ã€ä»£ç å—</li>
<li><strong>ç¤ºä¾‹ä¸°å¯Œ</strong>ï¼šåŒ…å«è¾“å…¥è¾“å‡ºç¤ºä¾‹</li>
<li><strong>å®ç”¨å¯¼å‘</strong>ï¼šæä¾›æœ€ä½³å®è·µå’Œæ³¨æ„äº‹é¡¹</li>
</ol>
<hr/>
<h2 data-id="heading-27">3. æ•°æ®æ¨¡å‹å®šä¹‰</h2>
<h3 data-id="heading-28">3.1 æ ¸å¿ƒæ•°æ®æ¨¡å‹</h3>
<p><strong>ç”¨æˆ·è¡Œä¸ºæ—¥å¿—</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.skill.analytics.model;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> lombok.Builder;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-comment">/**
 * ç”¨æˆ·è¡Œä¸ºæ—¥å¿—
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBehaviorLog</span> {
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·ID
     */</span>
    <span class="hljs-keyword">private</span> String userId;
    
    <span class="hljs-comment">/**
     * è¡Œä¸ºæ—¶é—´
     */</span>
    <span class="hljs-meta">@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")</span>
    <span class="hljs-keyword">private</span> LocalDateTime timestamp;
    
    <span class="hljs-comment">/**
     * è¡Œä¸ºç±»å‹
     * ä¾‹å¦‚ï¼šlogin, logout, view, edit, share, download
     */</span>
    <span class="hljs-keyword">private</span> String action;
    
    <span class="hljs-comment">/**
     * æŒç»­æ—¶é•¿(æ¯«ç§’)
     */</span>
    <span class="hljs-keyword">private</span> Long duration;
    
    <span class="hljs-comment">/**
     * åŠŸèƒ½æ¨¡å—
     * ä¾‹å¦‚ï¼šdocument, project, chat, dashboard
     */</span>
    <span class="hljs-keyword">private</span> String feature;
    
    <span class="hljs-comment">/**
     * è®¾å¤‡ç±»å‹
     * ä¾‹å¦‚ï¼šweb, ios, android, desktop
     */</span>
    <span class="hljs-keyword">private</span> String device;
    
    <span class="hljs-comment">/**
     * ä¼šè¯ID
     */</span>
    <span class="hljs-keyword">private</span> String sessionId;
    
    <span class="hljs-comment">/**
     * IPåœ°å€
     */</span>
    <span class="hljs-keyword">private</span> String ipAddress;
    
    <span class="hljs-comment">/**
     * åœ°ç†ä½ç½®
     */</span>
    <span class="hljs-keyword">private</span> String location;
    
    <span class="hljs-comment">/**
     * æ‰©å±•å±æ€§
     */</span>
    <span class="hljs-keyword">private</span> java.util.Map&lt;String, Object&gt; properties;
}
</code></pre>
<p><strong>åˆ†æé…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.skill.analytics.model;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> lombok.Builder;

<span class="hljs-comment">/**
 * åˆ†æé…ç½®
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnalysisConfig</span> {
    
    <span class="hljs-comment">/**
     * ç½®ä¿¡æ°´å¹³
     */</span>
    <span class="hljs-meta">@Builder</span>.Default
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-variable">confidenceLevel</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.95</span>;
    
    <span class="hljs-comment">/**
     * æµå¤±åˆ¤å®šå¤©æ•°é˜ˆå€¼
     */</span>
    <span class="hljs-meta">@Builder</span>.Default
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">churnThresholdDays</span> <span class="hljs-operator">=</span> <span class="hljs-number">7</span>;
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·åˆ†ç¾¤æ•°é‡
     */</span>
    <span class="hljs-meta">@Builder</span>.Default
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">clusterCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;
    
    <span class="hljs-comment">/**
     * æœ€ä½æ•°æ®è´¨é‡åˆ†æ•°
     */</span>
    <span class="hljs-meta">@Builder</span>.Default
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-variable">minDataQualityScore</span> <span class="hljs-operator">=</span> <span class="hljs-number">70.0</span>;
    
    <span class="hljs-comment">/**
     * æ˜¯å¦å¯ç”¨ç¼“å­˜
     */</span>
    <span class="hljs-meta">@Builder</span>.Default
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">cacheEnabled</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
    
    <span class="hljs-comment">/**
     * ç¼“å­˜è¿‡æœŸæ—¶é—´(ç§’)
     */</span>
    <span class="hljs-meta">@Builder</span>.Default
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">cacheExpiration</span> <span class="hljs-operator">=</span> <span class="hljs-number">1800</span>;
    
    <span class="hljs-comment">/**
     * æ˜¯å¦å¯ç”¨å¹¶è¡Œå¤„ç†
     */</span>
    <span class="hljs-meta">@Builder</span>.Default
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">parallelEnabled</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
    
    <span class="hljs-comment">/**
     * çº¿ç¨‹æ± å¤§å°
     */</span>
    <span class="hljs-meta">@Builder</span>.Default
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">threadPoolSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AnalysisConfig <span class="hljs-title function_">getDefault</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> AnalysisConfig.builder().build();
    }
}
</code></pre>
<p><strong>åˆ†æç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.skill.analytics.model;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.time.LocalDate;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * åˆ†æç»“æœ
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnalysisResult</span> {
    
    <span class="hljs-comment">/**
     * æ‰§è¡ŒçŠ¶æ€
     */</span>
    <span class="hljs-keyword">private</span> String status;
    
    <span class="hljs-comment">/**
     * é”™è¯¯ä¿¡æ¯
     */</span>
    <span class="hljs-keyword">private</span> String errorMessage;
    
    <span class="hljs-comment">/**
     * åˆ†ææ—¥æœŸ
     */</span>
    <span class="hljs-keyword">private</span> LocalDate analysisDate;
    
    <span class="hljs-comment">/**
     * æ€»ç”¨æˆ·æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> totalUsers;
    
    <span class="hljs-comment">/**
     * æ•°æ®è´¨é‡åˆ†æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> dataQualityScore;
    
    <span class="hljs-comment">/**
     * æ‰§è¡Œæ—¶é—´(æ¯«ç§’)
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> executionTime;
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·æ´»è·ƒåº¦æŒ‡æ ‡
     */</span>
    <span class="hljs-keyword">private</span> UserActivityMetrics activityMetrics;
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·åˆ†å±‚ç»“æœ
     */</span>
    <span class="hljs-keyword">private</span> UserSegmentationResult segmentation;
    
    <span class="hljs-comment">/**
     * åŠŸèƒ½ä½¿ç”¨æŒ‡æ ‡
     */</span>
    <span class="hljs-keyword">private</span> FeatureUsageMetrics featureMetrics;
    
    <span class="hljs-comment">/**
     * æµå¤±é¢„æµ‹ç»“æœ
     */</span>
    <span class="hljs-keyword">private</span> ChurnPredictionResult churnPrediction;
    
    <span class="hljs-comment">/**
     * ä¸šåŠ¡æ´å¯Ÿåˆ—è¡¨
     */</span>
    <span class="hljs-keyword">private</span> List&lt;Insight&gt; insights;
    
    <span class="hljs-comment">/**
     * è¡ŒåŠ¨å»ºè®®åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">private</span> List&lt;Recommendation&gt; recommendations;
    
    <span class="hljs-comment">/**
     * å…ƒæ•°æ®
     */</span>
    <span class="hljs-keyword">private</span> java.util.Map&lt;String, Object&gt; metadata;
}
</code></pre>
<p><strong>ç”¨æˆ·æ´»è·ƒåº¦æŒ‡æ ‡</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.skill.analytics.model;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * ç”¨æˆ·æ´»è·ƒåº¦æŒ‡æ ‡
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserActivityMetrics</span> {
    
    <span class="hljs-comment">/**
     * æ—¥æ´»è·ƒç”¨æˆ·æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> dau;
    
    <span class="hljs-comment">/**
     * å‘¨æ´»è·ƒç”¨æˆ·æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> wau;
    
    <span class="hljs-comment">/**
     * æœˆæ´»è·ƒç”¨æˆ·æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> mau;
    
    <span class="hljs-comment">/**
     * DAU/WAUæ¯”ç‡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> dauWauRatio;
    
    <span class="hljs-comment">/**
     * WAU/MAUæ¯”ç‡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> wauMauRatio;
    
    <span class="hljs-comment">/**
     * æ¬¡æ—¥ç•™å­˜ç‡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> day1Retention;
    
    <span class="hljs-comment">/**
     * 7æ—¥ç•™å­˜ç‡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> day7Retention;
    
    <span class="hljs-comment">/**
     * 30æ—¥ç•™å­˜ç‡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> day30Retention;
    
    <span class="hljs-comment">/**
     * å°æ—¶æ´»è·ƒåˆ†å¸ƒ
     * Key: å°æ—¶(0-23), Value: æ´»è·ƒæ¬¡æ•°
     */</span>
    <span class="hljs-keyword">private</span> Map&lt;Integer, Long&gt; hourlyDistribution;
    
    <span class="hljs-comment">/**
     * å¹³å‡ä¼šè¯æ—¶é•¿(ç§’)
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> avgSessionDuration;
    
    <span class="hljs-comment">/**
     * å¹³å‡ä¼šè¯æ¬¡æ•°/ç”¨æˆ·
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> avgSessionsPerUser;
}
</code></pre>
<p><strong>ç”¨æˆ·åˆ†å±‚ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.skill.analytics.model;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * ç”¨æˆ·åˆ†å±‚ç»“æœ
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserSegmentationResult</span> {
    
    <span class="hljs-comment">/**
     * åˆ†å±‚æ–¹æ³•
     */</span>
    <span class="hljs-keyword">private</span> String method;
    
    <span class="hljs-comment">/**
     * æ€»ç”¨æˆ·æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> totalUsers;
    
    <span class="hljs-comment">/**
     * åˆ†å±‚ç»“æœ
     */</span>
    <span class="hljs-keyword">private</span> List&lt;UserSegment&gt; segments;
}

<span class="hljs-comment">/**
 * ç”¨æˆ·åˆ†ç¾¤
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserSegment</span> {
    
    <span class="hljs-comment">/**
     * åˆ†ç¾¤åç§°
     */</span>
    <span class="hljs-keyword">private</span> String name;
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·æ•°é‡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> userCount;
    
    <span class="hljs-comment">/**
     * å æ¯”
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> percentage;
    
    <span class="hljs-comment">/**
     * æè¿°
     */</span>
    <span class="hljs-keyword">private</span> String description;
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·IDåˆ—è¡¨(å¯é€‰)
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; userIds;
    
    <span class="hljs-comment">/**
     * å¹³å‡Rå€¼
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> avgRecency;
    
    <span class="hljs-comment">/**
     * å¹³å‡Få€¼
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> avgFrequency;
    
    <span class="hljs-comment">/**
     * å¹³å‡Må€¼
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> avgMonetary;
    
    <span class="hljs-comment">/**
     * ç‰¹å¾æ ‡ç­¾
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; characteristics;
}
</code></pre>
<p><strong>RFMæŒ‡æ ‡</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.skill.analytics.model;

<span class="hljs-keyword">import</span> lombok.Data;

<span class="hljs-comment">/**
 * RFMæŒ‡æ ‡
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RFMMetrics</span> {
    
    <span class="hljs-comment">/**
     * Recency: æœ€è¿‘ä¸€æ¬¡æ´»åŠ¨è·ä»Šå¤©æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> recency;
    
    <span class="hljs-comment">/**
     * Frequency: æ´»åŠ¨é¢‘æ¬¡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> frequency;
    
    <span class="hljs-comment">/**
     * Monetary: ä½¿ç”¨æ—¶é•¿(ä»£è¡¨ä»·å€¼)
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> monetary;
    
    <span class="hljs-comment">/**
     * Rè¯„åˆ†(1-5)
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> rScore;
    
    <span class="hljs-comment">/**
     * Fè¯„åˆ†(1-5)
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> fScore;
    
    <span class="hljs-comment">/**
     * Mè¯„åˆ†(1-5)
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> mScore;
    
    <span class="hljs-comment">/**
     * ç»¼åˆè¯„åˆ†
     */</span>
    <span class="hljs-keyword">private</span> String rfmScore;  <span class="hljs-comment">// ä¾‹å¦‚: "543"</span>
}
</code></pre>
<p><strong>åŠŸèƒ½ä½¿ç”¨æŒ‡æ ‡</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.skill.analytics.model;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * åŠŸèƒ½ä½¿ç”¨æŒ‡æ ‡
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FeatureUsageMetrics</span> {
    
    <span class="hljs-comment">/**
     * åŠŸèƒ½ä½¿ç”¨é¢‘ç‡
     * Key: åŠŸèƒ½å, Value: ä½¿ç”¨æ¬¡æ•°
     */</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Long&gt; featureFrequency;
    
    <span class="hljs-comment">/**
     * åŠŸèƒ½å¹³å‡ä½¿ç”¨æ—¶é•¿
     * Key: åŠŸèƒ½å, Value: å¹³å‡æ—¶é•¿(ms)
     */</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Double&gt; featureAvgDuration;
    
    <span class="hljs-comment">/**
     * åŠŸèƒ½ç”¨æˆ·æ•°
     * Key: åŠŸèƒ½å, Value: ä½¿ç”¨è¯¥åŠŸèƒ½çš„ç”¨æˆ·æ•°
     */</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Long&gt; featureUserCount;
    
    <span class="hljs-comment">/**
     * TopåŠŸèƒ½åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; topFeatures;
    
    <span class="hljs-comment">/**
     * å†·é—¨åŠŸèƒ½åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; underusedFeatures;
    
    <span class="hljs-comment">/**
     * åŠŸèƒ½æ¸—é€ç‡
     * Key: åŠŸèƒ½å, Value: æ¸—é€ç‡(0-1)
     */</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Double&gt; featurePenetration;
}
</code></pre>
<p><strong>æµå¤±é¢„æµ‹ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.skill.analytics.model;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * æµå¤±é¢„æµ‹ç»“æœ
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChurnPredictionResult</span> {
    
    <span class="hljs-comment">/**
     * æ€»ç”¨æˆ·æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> totalUsers;
    
    <span class="hljs-comment">/**
     * æµå¤±é£é™©ç”¨æˆ·æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> churnRiskUsers;
    
    <span class="hljs-comment">/**
     * æµå¤±ç‡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> churnRate;
    
    <span class="hljs-comment">/**
     * æ¨¡å‹å‡†ç¡®ç‡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> modelAccuracy;
    
    <span class="hljs-comment">/**
     * ä¸»è¦æµå¤±å› ç´ 
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; topRiskFactors;
    
    <span class="hljs-comment">/**
     * æµå¤±é£é™©ç”¨æˆ·IDåˆ—è¡¨
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; churnRiskUserIds;
    
    <span class="hljs-comment">/**
     * é£é™©ç­‰çº§åˆ†å¸ƒ
     * Key: é£é™©ç­‰çº§(high/medium/low), Value: ç”¨æˆ·æ•°
     */</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Integer&gt; riskDistribution;
}

<span class="hljs-comment">/**
 * æµå¤±é£é™©è¯„åˆ†
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChurnRiskScore</span> {
    
    <span class="hljs-comment">/**
     * æ˜¯å¦é«˜é£é™©
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> isHighRisk;
    
    <span class="hljs-comment">/**
     * é£é™©åˆ†æ•°(0-1)
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> riskScore;
    
    <span class="hljs-comment">/**
     * é£é™©å› ç´ åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; factors = <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.ArrayList&lt;&gt;();
}
</code></pre>
<p><strong>ä¸šåŠ¡æ´å¯Ÿ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.skill.analytics.model;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * ä¸šåŠ¡æ´å¯Ÿ
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Insight</span> {
    
    <span class="hljs-comment">/**
     * æ´å¯Ÿåˆ†ç±»
     * trend, anomaly, pattern, correlation, opportunity
     */</span>
    <span class="hljs-keyword">private</span> String category;
    
    <span class="hljs-comment">/**
     * ä¸¥é‡ç¨‹åº¦
     * critical, high, medium, low
     */</span>
    <span class="hljs-keyword">private</span> String severity;
    
    <span class="hljs-comment">/**
     * æè¿°
     */</span>
    <span class="hljs-keyword">private</span> String description;
    
    <span class="hljs-comment">/**
     * è¯æ®åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; evidence;
    
    <span class="hljs-comment">/**
     * ç½®ä¿¡åº¦
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> confidence;
    
    <span class="hljs-comment">/**
     * å½±å“åˆ†æ•°(0-10)
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> impactScore;
    
    <span class="hljs-comment">/**
     * ç›¸å…³æŒ‡æ ‡
     */</span>
    <span class="hljs-keyword">private</span> java.util.Map&lt;String, Object&gt; relatedMetrics;
}
</code></pre>
<p><strong>è¡ŒåŠ¨å»ºè®®</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.skill.analytics.model;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * è¡ŒåŠ¨å»ºè®®
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Recommendation</span> {
    
    <span class="hljs-comment">/**
     * ä¼˜å…ˆçº§
     * critical, high, medium, low
     */</span>
    <span class="hljs-keyword">private</span> String priority;
    
    <span class="hljs-comment">/**
     * å»ºè®®è¡ŒåŠ¨
     */</span>
    <span class="hljs-keyword">private</span> String action;
    
    <span class="hljs-comment">/**
     * ç†ç”±
     */</span>
    <span class="hljs-keyword">private</span> String rationale;
    
    <span class="hljs-comment">/**
     * é¢„æœŸå½±å“
     */</span>
    <span class="hljs-keyword">private</span> String expectedImpact;
    
    <span class="hljs-comment">/**
     * å®æ–½æ­¥éª¤
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; implementation;
    
    <span class="hljs-comment">/**
     * KPIç›®æ ‡
     */</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; kpis;
    
    <span class="hljs-comment">/**
     * æ—¶é—´çº¿
     */</span>
    <span class="hljs-keyword">private</span> String timeline;
    
    <span class="hljs-comment">/**
     * è´Ÿè´£äºº
     */</span>
    <span class="hljs-keyword">private</span> String owner;
    
    <span class="hljs-comment">/**
     * æ‰€éœ€èµ„æº
     */</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; resources;
}
</code></pre>
<hr/>
<h2 data-id="heading-29">4. Hookç›‘æ§ç³»ç»Ÿå®ç°</h2>
<h3 data-id="heading-30">4.1 Hookç³»ç»Ÿè®¾è®¡</h3>
<p><strong>è®¾è®¡ç›®æ ‡</strong>ï¼š</p>
<ol>
<li><strong>é€æ˜æ€§</strong>ï¼šåˆ†æè¿‡ç¨‹å…¨ç¨‹å¯è§</li>
<li><strong>å¯è¿½è¸ª</strong>ï¼šæ¯ä¸ªæ­¥éª¤éƒ½æœ‰æ—¥å¿—è®°å½•</li>
<li><strong>å¯ä¿¡èµ–</strong>ï¼šæ•°æ®è´¨é‡å®æ—¶æ£€æŸ¥</li>
<li><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šå®æ—¶æ”¶é›†æ€§èƒ½æŒ‡æ ‡</li>
</ol>
<p><strong>Hookæ‹¦æˆªç‚¹</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">åˆ†ææµç¨‹ï¼š
  â”‚
  â”œâ”€â”€â–¶ <span class="hljs-built_in">onAgentStart</span>()        # åˆ†æå¼€å§‹
  â”‚
  â”œâ”€â”€â–¶ <span class="hljs-built_in">onDataQualityCheck</span>()  # æ•°æ®è´¨é‡æ£€æŸ¥
  â”‚
  â”œâ”€â”€â–¶ <span class="hljs-built_in">onToolStart</span>()         # å·¥å…·æ‰§è¡Œå¼€å§‹
  â”‚   â”œâ”€ æ•°æ®é¢„å¤„ç†
  â”‚   â”œâ”€ ç”¨æˆ·æ´»è·ƒåº¦åˆ†æ
  â”‚   â”œâ”€ ç”¨æˆ·åˆ†å±‚
  â”‚   â”œâ”€ åŠŸèƒ½ä½¿ç”¨åˆ†æ
  â”‚   â””â”€ æµå¤±é£é™©é¢„æµ‹
  â”‚
  â”œâ”€â”€â–¶ <span class="hljs-built_in">onToolEnd</span>()           # å·¥å…·æ‰§è¡Œç»“æŸ
  â”‚
  â”œâ”€â”€â–¶ <span class="hljs-built_in">onStatisticalAnalysis</span>() # ç»Ÿè®¡åˆ†æç»“æœ
  â”‚
  â”œâ”€â”€â–¶ <span class="hljs-built_in">onUserSegmentation</span>()    # ç”¨æˆ·åˆ†å±‚ç»“æœ
  â”‚
  â”œâ”€â”€â–¶ <span class="hljs-built_in">onChurnPrediction</span>()     # æµå¤±é¢„æµ‹ç»“æœ
  â”‚
  â”œâ”€â”€â–¶ <span class="hljs-built_in">onInsightGeneration</span>()   # æ´å¯Ÿç”Ÿæˆ
  â”‚
  â”œâ”€â”€â–¶ <span class="hljs-built_in">onRecommendationGeneration</span>() # å»ºè®®ç”Ÿæˆ
  â”‚
  â””â”€â”€â–¶ <span class="hljs-built_in">onAgentEnd</span>()          # åˆ†æç»“æŸ
</code></pre>
<h3 data-id="heading-31">4.2 å®Œæ•´Hookå®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.skill.analytics.hooks;

<span class="hljs-keyword">import</span> io.agentscope.core.hook.Hook;
<span class="hljs-keyword">import</span> io.agentscope.core.msg.Msg;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.time.Duration;
<span class="hljs-keyword">import</span> java.util.*;
<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;

<span class="hljs-comment">/**
 * ç”¨æˆ·è¡Œä¸ºåˆ†æHook - ç›‘æ§åˆ†æå…¨è¿‡ç¨‹
 * 
 * åŠŸèƒ½ï¼š
 * 1. åˆ†æè¿‡ç¨‹è¿½è¸ªï¼šè®°å½•æ¯ä¸ªæ­¥éª¤çš„æ‰§è¡Œæƒ…å†µ
 * 2. æ€§èƒ½ç›‘æ§ï¼šæ”¶é›†æ‰§è¡Œæ—¶é—´å’Œèµ„æºä½¿ç”¨
 * 3. æ•°æ®è´¨é‡æ£€æŸ¥ï¼šå®æ—¶æ£€æŸ¥æ•°æ®è´¨é‡é—®é¢˜
 * 4. ç»“æœå¯è§†åŒ–ï¼šç”Ÿæˆå¯è¯»çš„åˆ†ææŠ¥å‘Š
 * 
 * <span class="hljs-doctag">@author</span> Product Analytics Team
 * <span class="hljs-doctag">@version</span> 1.0.0
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBehaviorAnalysisHook</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Hook</span> {
    
    <span class="hljs-comment">// åˆ†æè¿‡ç¨‹è¿½è¸ª</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, AnalysisTrace&gt; traces = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-comment">// æ€§èƒ½æŒ‡æ ‡æ”¶é›†</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, PerformanceMetrics&gt; metrics = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-comment">// æ•°æ®è´¨é‡æ£€æŸ¥è®°å½•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;DataQualityIssue&gt; qualityIssues = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-comment">// å½“å‰TraceID (çº¿ç¨‹å±€éƒ¨å˜é‡)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;String&gt; currentTraceId = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Msg <span class="hljs-title function_">onAgentStart</span><span class="hljs-params">(Msg msg)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
        currentTraceId.set(traceId);
        
        <span class="hljs-type">AnalysisTrace</span> <span class="hljs-variable">trace</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnalysisTrace</span>(traceId);
        trace.startTime = LocalDateTime.now();
        trace.inputMsg = msg;
        traces.put(traceId, trace);
        
        log.info(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>.repeat(<span class="hljs-number">80</span>));
        log.info(<span class="hljs-string">"ğŸš€ [åˆ†æå¼€å§‹] TraceID: {}"</span>, traceId);
        log.info(<span class="hljs-string">"ğŸ“¥ è¾“å…¥æ•°æ®: {} æ¡ç”¨æˆ·è¡Œä¸ºè®°å½•"</span>, extractRecordCount(msg));
        log.info(<span class="hljs-string">"ğŸ“… å¼€å§‹æ—¶é—´: {}"</span>, trace.startTime);
        log.info(<span class="hljs-string">"="</span>.repeat(<span class="hljs-number">80</span>));
        
        <span class="hljs-comment">// åœ¨æ¶ˆæ¯ä¸­é™„åŠ TraceID</span>
        Map&lt;String, Object&gt; metadata = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(msg.getMetadata());
        metadata.put(<span class="hljs-string">"traceId"</span>, traceId);
        <span class="hljs-keyword">return</span> Msg.builder()
            .from(msg)
            .metadata(metadata)
            .build();
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Msg <span class="hljs-title function_">onToolStart</span><span class="hljs-params">(String toolName, Map&lt;String, Object&gt; toolArgs)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> currentTraceId.get();
        <span class="hljs-keyword">if</span> (traceId == <span class="hljs-literal">null</span>) {
            log.warn(<span class="hljs-string">"æœªfoundæœ‰æ•ˆçš„TraceIDï¼Œè·³è¿‡Hook"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-type">AnalysisTrace</span> <span class="hljs-variable">trace</span> <span class="hljs-operator">=</span> traces.get(traceId);
        <span class="hljs-keyword">if</span> (trace == <span class="hljs-literal">null</span>) {
            log.warn(<span class="hljs-string">"TraceID {} å¯¹åº”çš„Traceä¸å­˜åœ¨"</span>, traceId);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-type">AnalysisStep</span> <span class="hljs-variable">step</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnalysisStep</span>();
        step.stepName = toolName;
        step.startTime = LocalDateTime.now();
        step.args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(toolArgs);
        trace.steps.add(step);
        
        log.info(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"-"</span>.repeat(<span class="hljs-number">80</span>));
        log.info(<span class="hljs-string">"ğŸ”§ [æ­¥éª¤å¼€å§‹] {} (#{})"</span> , toolName, trace.steps.size());
        log.info(<span class="hljs-string">"ğŸ“Š å‚æ•°: {}"</span>, formatArgs(toolArgs));
        log.info(<span class="hljs-string">"ğŸ•’ å¼€å§‹æ—¶é—´: {}"</span>, step.startTime);
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Msg <span class="hljs-title function_">onToolEnd</span><span class="hljs-params">(String toolName, Object result)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> currentTraceId.get();
        <span class="hljs-keyword">if</span> (traceId == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        
        <span class="hljs-type">AnalysisTrace</span> <span class="hljs-variable">trace</span> <span class="hljs-operator">=</span> traces.get(traceId);
        <span class="hljs-keyword">if</span> (trace == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        
        <span class="hljs-type">AnalysisStep</span> <span class="hljs-variable">step</span> <span class="hljs-operator">=</span> trace.getCurrentStep();
        <span class="hljs-keyword">if</span> (step == <span class="hljs-literal">null</span>) {
            log.warn(<span class="hljs-string">"å½“å‰æ­¥éª¤ä¸ºç©ºï¼Œå¯èƒ½æ˜¯ä¸åŒ¹é…çš„onToolStartå’ŒonToolEnd"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        step.endTime = LocalDateTime.now();
        step.result = result;
        step.success = <span class="hljs-literal">true</span>;
        
        <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> Duration.between(step.startTime, step.endTime).toMillis();
        
        log.info(<span class="hljs-string">"âœ… [æ­¥éª¤å®Œæˆ] {} - è€—æ—¶: {}ms"</span>, toolName, duration);
        log.info(<span class="hljs-string">"ğŸ“ˆ ç»“æœæ‘˜è¦: {}"</span>, formatResult(result));
        log.info(<span class="hljs-string">"ğŸ•’ ç»“æŸæ—¶é—´: {}"</span>, step.endTime);
        log.info(<span class="hljs-string">"-"</span>.repeat(<span class="hljs-number">80</span>));
        
        <span class="hljs-comment">// æ”¶é›†æ€§èƒ½æŒ‡æ ‡</span>
        collectPerformanceMetrics(toolName, duration);
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Msg <span class="hljs-title function_">onToolError</span><span class="hljs-params">(String toolName, Throwable error)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> currentTraceId.get();
        <span class="hljs-keyword">if</span> (traceId == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        
        <span class="hljs-type">AnalysisTrace</span> <span class="hljs-variable">trace</span> <span class="hljs-operator">=</span> traces.get(traceId);
        <span class="hljs-keyword">if</span> (trace == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        
        <span class="hljs-type">AnalysisStep</span> <span class="hljs-variable">step</span> <span class="hljs-operator">=</span> trace.getCurrentStep();
        <span class="hljs-keyword">if</span> (step != <span class="hljs-literal">null</span>) {
            step.endTime = LocalDateTime.now();
            step.success = <span class="hljs-literal">false</span>;
            step.error = error.getMessage();
            step.stackTrace = getStackTrace(error);
        }
        
        log.error(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"!"</span>.repeat(<span class="hljs-number">80</span>));
        log.error(<span class="hljs-string">"âŒ [æ­¥éª¤å¤±è´¥] {}"</span>, toolName);
        log.error(<span class="hljs-string">"ğŸ’¥ é”™è¯¯ä¿¡æ¯: {}"</span>, error.getMessage());
        log.error(<span class="hljs-string">"ğŸ“œ é”™è¯¯ç±»å‹: {}"</span>, error.getClass().getName());
        <span class="hljs-keyword">if</span> (log.isDebugEnabled()) {
            log.debug(<span class="hljs-string">"ğŸ” å †æ ˆè¿½è¸ª:"</span>, error);
        }
        log.error(<span class="hljs-string">"!"</span>.repeat(<span class="hljs-number">80</span>));
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Msg <span class="hljs-title function_">onAgentEnd</span><span class="hljs-params">(Msg msg)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> currentTraceId.get();
        <span class="hljs-keyword">if</span> (traceId == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> msg;
        
        <span class="hljs-type">AnalysisTrace</span> <span class="hljs-variable">trace</span> <span class="hljs-operator">=</span> traces.get(traceId);
        <span class="hljs-keyword">if</span> (trace == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> msg;
        
        trace.endTime = LocalDateTime.now();
        trace.outputMsg = msg;
        
        <span class="hljs-type">long</span> <span class="hljs-variable">totalDuration</span> <span class="hljs-operator">=</span> Duration.between(trace.startTime, trace.endTime).toMillis();
        
        log.info(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>.repeat(<span class="hljs-number">80</span>));
        log.info(<span class="hljs-string">"ğŸ‰ [åˆ†æå®Œæˆ] TraceID: {}"</span>, traceId);
        log.info(<span class="hljs-string">"â±ï¸  æ€»è€—æ—¶: {}ms ({} ç§’)"</span>, totalDuration, String.format(<span class="hljs-string">"%.2f"</span>, totalDuration / <span class="hljs-number">1000.0</span>));
        log.info(<span class="hljs-string">"ğŸ“Š æ‰§è¡Œæ­¥éª¤: {} ä¸ª"</span>, trace.steps.size());
        log.info(<span class="hljs-string">"âœ… æˆåŠŸæ­¥éª¤: {} ä¸ª"</span>, trace.getSuccessfulSteps());
        log.info(<span class="hljs-string">"âŒ å¤±è´¥æ­¥éª¤: {} ä¸ª"</span>, trace.getFailedSteps());
        
        <span class="hljs-keyword">if</span> (!qualityIssues.isEmpty()) {
            log.warn(<span class="hljs-string">"\nâš ï¸  æ•°æ®è´¨é‡é—®é¢˜: {} ä¸ª"</span>, qualityIssues.size());
            qualityIssues.forEach(issue -&gt; 
                log.warn(<span class="hljs-string">"   - {}: {}"</span>, issue.type, issue.description)
            );
        }
        
        <span class="hljs-comment">// ç”Ÿæˆåˆ†ææŠ¥å‘Šæ‘˜è¦</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">summary</span> <span class="hljs-operator">=</span> generateAnalysisSummary(trace);
        log.info(<span class="hljs-string">"\nğŸ“‹ åˆ†ææ‘˜è¦:\n{}"</span>, summary);
        log.info(<span class="hljs-string">"="</span>.repeat(<span class="hljs-number">80</span>) + <span class="hljs-string">"\n"</span>);
        
        <span class="hljs-comment">// æ¸…ç†çº¿ç¨‹å±€éƒ¨å˜é‡</span>
        currentTraceId.remove();
        
        <span class="hljs-keyword">return</span> msg;
    }
    
    <span class="hljs-comment">/**
     * æ•°æ®è´¨é‡æ£€æŸ¥Hook
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDataQualityCheck</span><span class="hljs-params">(String checkType, Map&lt;String, Object&gt; checkResult)</span> {
        log.info(<span class="hljs-string">"\nğŸ” [æ•°æ®è´¨é‡æ£€æŸ¥] {}"</span>, checkType);
        
        <span class="hljs-type">Boolean</span> <span class="hljs-variable">passed</span> <span class="hljs-operator">=</span> (Boolean) checkResult.get(<span class="hljs-string">"passed"</span>);
        <span class="hljs-type">Double</span> <span class="hljs-variable">score</span> <span class="hljs-operator">=</span> (Double) checkResult.get(<span class="hljs-string">"score"</span>);
        
        <span class="hljs-keyword">if</span> (passed) {
            log.info(<span class="hljs-string">"   âœ“ é€šè¿‡ - è´¨é‡åˆ†æ•°: {}/100"</span>, String.format(<span class="hljs-string">"%.1f"</span>, score));
        } <span class="hljs-keyword">else</span> {
            log.warn(<span class="hljs-string">"   âœ— æœªé€šè¿‡ - è´¨é‡åˆ†æ•°: {}/100"</span>, String.format(<span class="hljs-string">"%.1f"</span>, score));
            
            <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
            List&lt;String&gt; issues = (List&lt;String&gt;) checkResult.get(<span class="hljs-string">"issues"</span>);
            <span class="hljs-keyword">if</span> (issues != <span class="hljs-literal">null</span> &amp;&amp; !issues.isEmpty()) {
                log.warn(<span class="hljs-string">"   æ£€æŸ¥åˆ°çš„é—®é¢˜:"</span>);
                issues.forEach(issue -&gt; {
                    log.warn(<span class="hljs-string">"      âš  {}"</span>, issue);
                    qualityIssues.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DataQualityIssue</span>(checkType, issue));
                });
            }
        }
        
        <span class="hljs-comment">// è¾“å‡ºè¯¦ç»†æŒ‡æ ‡</span>
        <span class="hljs-type">Integer</span> <span class="hljs-variable">totalRecords</span> <span class="hljs-operator">=</span> (Integer) checkResult.get(<span class="hljs-string">"totalRecords"</span>);
        <span class="hljs-type">Integer</span> <span class="hljs-variable">completeRecords</span> <span class="hljs-operator">=</span> (Integer) checkResult.get(<span class="hljs-string">"completeRecords"</span>);
        <span class="hljs-type">Double</span> <span class="hljs-variable">completeness</span> <span class="hljs-operator">=</span> (Double) checkResult.get(<span class="hljs-string">"completeness"</span>);
        
        <span class="hljs-keyword">if</span> (totalRecords != <span class="hljs-literal">null</span> &amp;&amp; completeRecords != <span class="hljs-literal">null</span>) {
            log.info(<span class="hljs-string">"   ğŸ“Š æ•°æ®æ€»é‡: {} æ¡"</span>, totalRecords);
            log.info(<span class="hljs-string">"   âœ… å®Œæ•´è®°å½•: {} æ¡"</span>, completeRecords);
        }
        <span class="hljs-keyword">if</span> (completeness != <span class="hljs-literal">null</span>) {
            log.info(<span class="hljs-string">"   ğŸ“ˆ å®Œæ•´åº¦: {}%"</span>, String.format(<span class="hljs-string">"%.1f"</span>, completeness));
        }
    }
    
    <span class="hljs-comment">/**
     * ç»Ÿè®¡åˆ†æHook
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onStatisticalAnalysis</span><span class="hljs-params">(String analysisType, Map&lt;String, Object&gt; results)</span> {
        log.info(<span class="hljs-string">"\nğŸ“Š [ç»Ÿè®¡åˆ†æ] {}"</span>, analysisType);
        
        results.forEach((key, value) -&gt; {
            <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> Number) {
                log.info(<span class="hljs-string">"   â€¢ {}: {}"</span>, formatMetricName(key), formatNumber((Number) value));
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> Map) {
                log.info(<span class="hljs-string">"   â€¢ {}:"</span>, formatMetricName(key));
                <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
                Map&lt;String, Object&gt; nested = (Map&lt;String, Object&gt;) value;
                nested.forEach((k, v) -&gt; {
                    <span class="hljs-keyword">if</span> (v <span class="hljs-keyword">instanceof</span> Number) {
                        log.info(<span class="hljs-string">"      - {}: {}"</span>, k, formatNumber((Number) v));
                    } <span class="hljs-keyword">else</span> {
                        log.info(<span class="hljs-string">"      - {}: {}"</span>, k, v);
                    }
                });
            }
        });
    }
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·åˆ†å±‚Hook
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onUserSegmentation</span><span class="hljs-params">(String method, <span class="hljs-type">int</span> clusterCount, Map&lt;String, Object&gt; clusterInfo)</span> {
        log.info(<span class="hljs-string">"\nğŸ‘¥ [ç”¨æˆ·åˆ†å±‚] æ–¹æ³•: {}, åˆ†ç¾¤æ•°: {}"</span>, method, clusterCount);
        
        <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
        List&lt;Map&lt;String, Object&gt;&gt; clusters = (List&lt;Map&lt;String, Object&gt;&gt;) clusterInfo.get(<span class="hljs-string">"clusters"</span>);
        
        <span class="hljs-keyword">if</span> (clusters != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; clusters.size(); i++) {
                Map&lt;String, Object&gt; cluster = clusters.get(i);
                <span class="hljs-type">Object</span> <span class="hljs-variable">userCount</span> <span class="hljs-operator">=</span> cluster.get(<span class="hljs-string">"userCount"</span>);
                <span class="hljs-type">Object</span> <span class="hljs-variable">percentage</span> <span class="hljs-operator">=</span> cluster.get(<span class="hljs-string">"percentage"</span>);
                <span class="hljs-type">Object</span> <span class="hljs-variable">characteristics</span> <span class="hljs-operator">=</span> cluster.get(<span class="hljs-string">"characteristics"</span>);
                
                log.info(<span class="hljs-string">"   ç¾¤ç»„ {}: {} ç”¨æˆ· ({}%)"</span>, 
                    i + <span class="hljs-number">1</span>,
                    userCount,
                    percentage <span class="hljs-keyword">instanceof</span> Number ? 
                        String.format(<span class="hljs-string">"%.1f"</span>, ((Number) percentage).doubleValue()) : percentage
                );
                log.info(<span class="hljs-string">"      ç‰¹å¾: {}"</span>, characteristics);
            }
        }
    }
    
    <span class="hljs-comment">/**
     * æµå¤±é¢„æµ‹Hook
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onChurnPrediction</span><span class="hljs-params">(Map&lt;String, Object&gt; predictionResult)</span> {
        log.info(<span class="hljs-string">"\nâš ï¸  [æµå¤±é¢„æµ‹]"</span>);
        
        <span class="hljs-type">Integer</span> <span class="hljs-variable">totalUsers</span> <span class="hljs-operator">=</span> (Integer) predictionResult.get(<span class="hljs-string">"totalUsers"</span>);
        <span class="hljs-type">Integer</span> <span class="hljs-variable">churnRiskUsers</span> <span class="hljs-operator">=</span> (Integer) predictionResult.get(<span class="hljs-string">"churnRiskUsers"</span>);
        <span class="hljs-type">Double</span> <span class="hljs-variable">churnRate</span> <span class="hljs-operator">=</span> (Double) predictionResult.get(<span class="hljs-string">"churnRate"</span>);
        <span class="hljs-type">Double</span> <span class="hljs-variable">modelAccuracy</span> <span class="hljs-operator">=</span> (Double) predictionResult.get(<span class="hljs-string">"modelAccuracy"</span>);
        
        log.info(<span class="hljs-string">"   ğŸ‘¥ æ€»ç”¨æˆ·æ•°: {} äºº"</span>, totalUsers);
        log.info(<span class="hljs-string">"   âš ï¸  æµå¤±é£é™©ç”¨æˆ·: {} äºº ({}%)"</span>, 
            churnRiskUsers, 
            churnRate != <span class="hljs-literal">null</span> ? String.format(<span class="hljs-string">"%.2f"</span>, churnRate * <span class="hljs-number">100</span>) : <span class="hljs-string">"N/A"</span>
        );
        log.info(<span class="hljs-string">"   ğŸ¯ æ¨¡å‹å‡†ç¡®ç‡: {}%"</span>, 
            modelAccuracy != <span class="hljs-literal">null</span> ? String.format(<span class="hljs-string">"%.1f"</span>, modelAccuracy * <span class="hljs-number">100</span>) : <span class="hljs-string">"N/A"</span>
        );
        
        <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
        List&lt;String&gt; riskFactors = (List&lt;String&gt;) predictionResult.get(<span class="hljs-string">"topRiskFactors"</span>);
        <span class="hljs-keyword">if</span> (riskFactors != <span class="hljs-literal">null</span> &amp;&amp; !riskFactors.isEmpty()) {
            log.info(<span class="hljs-string">"   ğŸ“‰ ä¸»è¦æµå¤±å› ç´ :"</span>);
            riskFactors.forEach(factor -&gt; log.info(<span class="hljs-string">"      â€¢ {}"</span>, factor));
        }
    }
    
    <span class="hljs-comment">/**
     * æ´å¯Ÿç”ŸæˆHook
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onInsightGeneration</span><span class="hljs-params">(List&lt;Map&lt;String, Object&gt;&gt; insights)</span> {
        log.info(<span class="hljs-string">"\nğŸ’¡ [ç”Ÿæˆæ´å¯Ÿ] å‘ç° {} æ¡å…³é”®æ´å¯Ÿ"</span>, insights.size());
        
        insights.forEach(insight -&gt; {
            <span class="hljs-type">String</span> <span class="hljs-variable">category</span> <span class="hljs-operator">=</span> (String) insight.get(<span class="hljs-string">"category"</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">severity</span> <span class="hljs-operator">=</span> (String) insight.get(<span class="hljs-string">"severity"</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">description</span> <span class="hljs-operator">=</span> (String) insight.get(<span class="hljs-string">"description"</span>);
            
            <span class="hljs-type">String</span> <span class="hljs-variable">icon</span> <span class="hljs-operator">=</span> getSeverityIcon(severity);
            log.info(<span class="hljs-string">"   {} [{}] {}"</span>, icon, category != <span class="hljs-literal">null</span> ? category.toUpperCase() : <span class="hljs-string">"UNKNOWN"</span>, description);
            
            <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
            List&lt;String&gt; evidence = (List&lt;String&gt;) insight.get(<span class="hljs-string">"evidence"</span>);
            <span class="hljs-keyword">if</span> (evidence != <span class="hljs-literal">null</span> &amp;&amp; !evidence.isEmpty()) {
                log.info(<span class="hljs-string">"      è¯æ®:"</span>);
                evidence.forEach(e -&gt; log.info(<span class="hljs-string">"         - {}"</span>, e));
            }
            
            <span class="hljs-type">Double</span> <span class="hljs-variable">confidence</span> <span class="hljs-operator">=</span> (Double) insight.get(<span class="hljs-string">"confidence"</span>);
            <span class="hljs-keyword">if</span> (confidence != <span class="hljs-literal">null</span>) {
                log.info(<span class="hljs-string">"      ç½®ä¿¡åº¦: {}%"</span>, String.format(<span class="hljs-string">"%.1f"</span>, confidence * <span class="hljs-number">100</span>));
            }
        });
    }
    
    <span class="hljs-comment">/**
     * æ¨èç”ŸæˆHook
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onRecommendationGeneration</span><span class="hljs-params">(List&lt;Map&lt;String, Object&gt;&gt; recommendations)</span> {
        log.info(<span class="hljs-string">"\nğŸ¯ [ç”Ÿæˆå»ºè®®] æä¾› {} æ¡è¡ŒåŠ¨å»ºè®®"</span>, recommendations.size());
        
        recommendations.forEach(rec -&gt; {
            <span class="hljs-type">String</span> <span class="hljs-variable">priority</span> <span class="hljs-operator">=</span> (String) rec.get(<span class="hljs-string">"priority"</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">action</span> <span class="hljs-operator">=</span> (String) rec.get(<span class="hljs-string">"action"</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">expectedImpact</span> <span class="hljs-operator">=</span> (String) rec.get(<span class="hljs-string">"expectedImpact"</span>);
            
            <span class="hljs-type">String</span> <span class="hljs-variable">icon</span> <span class="hljs-operator">=</span> getPriorityIcon(priority);
            log.info(<span class="hljs-string">"   {} [{}] {}"</span>, 
                icon, 
                priority != <span class="hljs-literal">null</span> ? priority.toUpperCase() : <span class="hljs-string">"UNKNOWN"</span>, 
                action
            );
            
            <span class="hljs-keyword">if</span> (expectedImpact != <span class="hljs-literal">null</span>) {
                log.info(<span class="hljs-string">"      é¢„æœŸå½±å“: {}"</span>, expectedImpact);
            }
            
            <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
            List&lt;String&gt; implementation = (List&lt;String&gt;) rec.get(<span class="hljs-string">"implementation"</span>);
            <span class="hljs-keyword">if</span> (implementation != <span class="hljs-literal">null</span> &amp;&amp; !implementation.isEmpty()) {
                log.info(<span class="hljs-string">"      å®æ–½æ­¥éª¤:"</span>);
                implementation.forEach(step -&gt; log.info(<span class="hljs-string">"         {}"</span>, step));
            }
        });
    }
    
    <span class="hljs-comment">// ========== è¾…åŠ©æ–¹æ³• ==========</span>
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">extractRecordCount</span><span class="hljs-params">(Msg msg)</span> {
        <span class="hljs-keyword">if</span> (msg.getMetadata().containsKey(<span class="hljs-string">"recordCount"</span>)) {
            <span class="hljs-keyword">return</span> (Integer) msg.getMetadata().get(<span class="hljs-string">"recordCount"</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">formatArgs</span><span class="hljs-params">(Map&lt;String, Object&gt; args)</span> {
        <span class="hljs-keyword">if</span> (args == <span class="hljs-literal">null</span> || args.isEmpty()) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"{}"</span>;
        }
        <span class="hljs-keyword">if</span> (args.size() &lt;= <span class="hljs-number">3</span>) {
            <span class="hljs-keyword">return</span> args.toString();
        }
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"{%d parameters}"</span>, args.size());
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">formatResult</span><span class="hljs-params">(Object result)</span> {
        <span class="hljs-keyword">if</span> (result == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"null"</span>;
        }
        <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> Map) {
            <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
            Map&lt;String, Object&gt; map = (Map&lt;String, Object&gt;) result;
            <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"{%d items}"</span>, map.size());
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> List) {
            List&lt;?&gt; list = (List&lt;?&gt;) result;
            <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"[%d items]"</span>, list.size());
        }
        <span class="hljs-keyword">return</span> result.toString();
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">formatNumber</span><span class="hljs-params">(Number num)</span> {
        <span class="hljs-keyword">if</span> (num == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"N/A"</span>;
        }
        <span class="hljs-keyword">if</span> (num <span class="hljs-keyword">instanceof</span> Double || num <span class="hljs-keyword">instanceof</span> Float) {
            <span class="hljs-type">double</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> num.doubleValue();
            <span class="hljs-comment">// å¦‚æœæ˜¯ç™¾åˆ†æ¯”ï¼ˆ0-1ï¼‰æˆ–è€…å°æ•°</span>
            <span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">0</span> &amp;&amp; value &lt; <span class="hljs-number">1</span>) {
                <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%.2f%%"</span>, value * <span class="hljs-number">100</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">1</span> &amp;&amp; value &lt; <span class="hljs-number">10</span>) {
                <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%.2f"</span>, value);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%.0f"</span>, value);
            }
        }
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%,d"</span>, num.longValue());
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">formatMetricName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">if</span> (name == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        <span class="hljs-comment">// å°†camelCaseè½¬æ¢ä¸ºå¯è¯»æ ¼å¼</span>
        <span class="hljs-keyword">return</span> name.replaceAll(<span class="hljs-string">"([A-Z])"</span>, <span class="hljs-string">" $1"</span>)
                  .toLowerCase()
                  .replaceFirst(<span class="hljs-string">"^(.)"</span>, s -&gt; s.toUpperCase());
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getSeverityIcon</span><span class="hljs-params">(String severity)</span> {
        <span class="hljs-keyword">if</span> (severity == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"âšª"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">switch</span> (severity.toLowerCase()) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"critical"</span> -&gt; <span class="hljs-string">"ğŸ”´"</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"high"</span> -&gt; <span class="hljs-string">"ğŸŸ "</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"medium"</span> -&gt; <span class="hljs-string">"ğŸŸ¡"</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"low"</span> -&gt; <span class="hljs-string">"ğŸŸ¢"</span>;
            <span class="hljs-keyword">default</span> -&gt; <span class="hljs-string">"âšª"</span>;
        };
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getPriorityIcon</span><span class="hljs-params">(String priority)</span> {
        <span class="hljs-keyword">if</span> (priority == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"â€¢"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">switch</span> (priority.toLowerCase()) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"critical"</span> -&gt; <span class="hljs-string">"ğŸ”¥"</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"high"</span> -&gt; <span class="hljs-string">"â­"</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"medium"</span> -&gt; <span class="hljs-string">"ğŸ“Œ"</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"low"</span> -&gt; <span class="hljs-string">"ğŸ’¡"</span>;
            <span class="hljs-keyword">default</span> -&gt; <span class="hljs-string">"â€¢"</span>;
        };
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">collectPerformanceMetrics</span><span class="hljs-params">(String stepName, <span class="hljs-type">long</span> duration)</span> {
        metrics.computeIfAbsent(stepName, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceMetrics</span>())
              .addMeasurement(duration);
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getStackTrace</span><span class="hljs-params">(Throwable error)</span> {
        <span class="hljs-keyword">if</span> (error == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        sb.append(error.getClass().getName()).append(<span class="hljs-string">": "</span>).append(error.getMessage()).append(<span class="hljs-string">"\n"</span>);
        <span class="hljs-keyword">for</span> (StackTraceElement element : error.getStackTrace()) {
            sb.append(<span class="hljs-string">"    at "</span>).append(element.toString()).append(<span class="hljs-string">"\n"</span>);
            <span class="hljs-keyword">if</span> (sb.length() &gt; <span class="hljs-number">1000</span>) {  <span class="hljs-comment">// é™åˆ¶é•¿åº¦</span>
                sb.append(<span class="hljs-string">"    ...\n"</span>);
                <span class="hljs-keyword">break</span>;
            }
        }
        <span class="hljs-keyword">return</span> sb.toString();
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">generateAnalysisSummary</span><span class="hljs-params">(AnalysisTrace trace)</span> {
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        
        sb.append(<span class="hljs-string">"\nåˆ†ææ‰§è¡Œæ¦‚è§ˆ:"</span>);
        sb.append(<span class="hljs-string">"\nâ€¢ æˆåŠŸæ­¥éª¤: "</span>).append(trace.getSuccessfulSteps()).append(<span class="hljs-string">"/"</span>).append(trace.steps.size());
        sb.append(<span class="hljs-string">"\nâ€¢ å¤±è´¥æ­¥éª¤: "</span>).append(trace.getFailedSteps());
        
        <span class="hljs-keyword">if</span> (!trace.steps.isEmpty()) {
            sb.append(<span class="hljs-string">"\n\nå„æ­¥éª¤è€—æ—¶:"</span>);
            trace.steps.forEach(step -&gt; {
                <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> step.endTime != <span class="hljs-literal">null</span> ? 
                    Duration.between(step.startTime, step.endTime).toMillis() : <span class="hljs-number">0</span>;
                <span class="hljs-type">String</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> step.success ? <span class="hljs-string">"âœ“"</span> : <span class="hljs-string">"âœ—"</span>;
                sb.append(String.format(<span class="hljs-string">"\n  %s %-30s %6dms"</span>, 
                    status, 
                    truncate(step.stepName, <span class="hljs-number">30</span>), 
                    duration
                ));
            });
        }
        
        <span class="hljs-keyword">if</span> (!metrics.isEmpty()) {
            sb.append(<span class="hljs-string">"\n\næ€§èƒ½æŒ‡æ ‡:"</span>);
            metrics.forEach((stepName, metric) -&gt; {
                sb.append(String.format(<span class="hljs-string">"\n  %-30s å¹³å‡: %6.1fms, æœ€å¤§: %6dms, æ¬¡æ•°: %d"</span>,
                    truncate(stepName, <span class="hljs-number">30</span>),
                    metric.getAverage(),
                    metric.getMax(),
                    metric.getCount()
                ));
            });
        }
        
        <span class="hljs-keyword">if</span> (!qualityIssues.isEmpty()) {
            sb.append(<span class="hljs-string">"\n\næ•°æ®è´¨é‡é—®é¢˜:"</span>);
            qualityIssues.stream()
                .limit(<span class="hljs-number">10</span>)  <span class="hljs-comment">// æœ€å¤šæ˜¾ç¤º10ä¸ª</span>
                .forEach(issue -&gt; {
                    sb.append(String.format(<span class="hljs-string">"\n  âš  [%s] %s"</span>, issue.type, issue.description));
                });
            <span class="hljs-keyword">if</span> (qualityIssues.size() &gt; <span class="hljs-number">10</span>) {
                sb.append(<span class="hljs-string">"\n  ... è¿˜æœ‰ "</span>).append(qualityIssues.size() - <span class="hljs-number">10</span>).append(<span class="hljs-string">" ä¸ªé—®é¢˜"</span>);
            }
        }
        
        <span class="hljs-keyword">return</span> sb.toString();
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">truncate</span><span class="hljs-params">(String str, <span class="hljs-type">int</span> maxLen)</span> {
        <span class="hljs-keyword">if</span> (str == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        <span class="hljs-keyword">if</span> (str.length() &lt;= maxLen) <span class="hljs-keyword">return</span> str;
        <span class="hljs-keyword">return</span> str.substring(<span class="hljs-number">0</span>, maxLen - <span class="hljs-number">3</span>) + <span class="hljs-string">"..."</span>;
    }
    
    <span class="hljs-comment">/**
     * è·å–åˆ†æè¿½è¸ªç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> AnalysisTrace <span class="hljs-title function_">getTrace</span><span class="hljs-params">(String traceId)</span> {
        <span class="hljs-keyword">return</span> traces.get(traceId);
    }
    
    <span class="hljs-comment">/**
     * è·å–æ‰€æœ‰è¿½è¸ªç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, AnalysisTrace&gt; <span class="hljs-title function_">getAllTraces</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(traces);
    }
    
    <span class="hljs-comment">/**
     * æ¸…ç†è¿½è¸ªæ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearTraces</span><span class="hljs-params">()</span> {
        traces.clear();
        metrics.clear();
        qualityIssues.clear();
        log.info(<span class="hljs-string">"å·²æ¸…ç†æ‰€æœ‰è¿½è¸ªæ•°æ®"</span>);
    }
    
    <span class="hljs-comment">// ========== å†…éƒ¨ç±» ==========</span>
    
    <span class="hljs-comment">/**
     * åˆ†æè¿½è¸ª
     */</span>
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnalysisTrace</span> {
        String traceId;
        LocalDateTime startTime;
        LocalDateTime endTime;
        Msg inputMsg;
        Msg outputMsg;
        List&lt;AnalysisStep&gt; steps = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">AnalysisTrace</span><span class="hljs-params">(String traceId)</span> {
            <span class="hljs-built_in">this</span>.traceId = traceId;
        }
        
        <span class="hljs-keyword">public</span> AnalysisStep <span class="hljs-title function_">getCurrentStep</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> steps.isEmpty() ? <span class="hljs-literal">null</span> : steps.get(steps.size() - <span class="hljs-number">1</span>);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getSuccessfulSteps</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> steps.stream().filter(s -&gt; s.success).count();
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getFailedSteps</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> steps.stream().filter(s -&gt; !s.success).count();
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getTotalDuration</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (startTime == <span class="hljs-literal">null</span> || endTime == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
            }
            <span class="hljs-keyword">return</span> Duration.between(startTime, endTime).toMillis();
        }
    }
    
    <span class="hljs-comment">/**
     * åˆ†ææ­¥éª¤
     */</span>
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnalysisStep</span> {
        String stepName;
        LocalDateTime startTime;
        LocalDateTime endTime;
        Map&lt;String, Object&gt; args;
        Object result;
        <span class="hljs-type">boolean</span> success;
        String error;
        String stackTrace;
        
        <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getDuration</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (startTime == <span class="hljs-literal">null</span> || endTime == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
            }
            <span class="hljs-keyword">return</span> Duration.between(startTime, endTime).toMillis();
        }
    }
    
    <span class="hljs-comment">/**
     * æ•°æ®è´¨é‡é—®é¢˜
     */</span>
    <span class="hljs-meta">@Data</span>
    <span class="hljs-meta">@lombok</span>.AllArgsConstructor
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataQualityIssue</span> {
        String type;
        String description;
    }
    
    <span class="hljs-comment">/**
     * æ€§èƒ½æŒ‡æ ‡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceMetrics</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;Long&gt; measurements = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addMeasurement</span><span class="hljs-params">(<span class="hljs-type">long</span> duration)</span> {
            measurements.add(duration);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getAverage</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> measurements.stream()
                .mapToLong(Long::longValue)
                .average()
                .orElse(<span class="hljs-number">0.0</span>);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getMax</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> measurements.stream()
                .mapToLong(Long::longValue)
                .max()
                .orElse(<span class="hljs-number">0L</span>);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getMin</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> measurements.stream()
                .mapToLong(Long::longValue)
                .min()
                .orElse(<span class="hljs-number">0L</span>);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getCount</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> measurements.size();
        }
    }
}
</code></pre>
<h3 data-id="heading-32">4.3 Hookä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.skill.analytics.example;

<span class="hljs-keyword">import</span> io.agentscope.skill.analytics.hooks.UserBehaviorAnalysisHook;
<span class="hljs-keyword">import</span> io.agentscope.skill.analytics.processor.UserBehaviorAnalysisProcessor;
<span class="hljs-keyword">import</span> io.agentscope.skill.analytics.model.*;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * Hookä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HookUsageExample</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1. åˆ›å»ºHookå®ä¾‹</span>
        <span class="hljs-type">UserBehaviorAnalysisHook</span> <span class="hljs-variable">hook</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserBehaviorAnalysisHook</span>();
        
        <span class="hljs-comment">// 2. åˆ›å»ºåˆ†æå¤„ç†å™¨ï¼ˆæ³¨å…¥Hookï¼‰</span>
        <span class="hljs-type">AnalysisConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> AnalysisConfig.builder()
            .confidenceLevel(<span class="hljs-number">0.95</span>)
            .churnThresholdDays(<span class="hljs-number">7</span>)
            .clusterCount(<span class="hljs-number">5</span>)
            .build();
            
        <span class="hljs-type">UserBehaviorAnalysisProcessor</span> <span class="hljs-variable">processor</span> <span class="hljs-operator">=</span> 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserBehaviorAnalysisProcessor</span>(hook, config);
        
        <span class="hljs-comment">// 3. åŠ è½½æ•°æ®</span>
        List&lt;UserBehaviorLog&gt; logs = loadUserBehaviorLogs();
        
        <span class="hljs-comment">// 4. æ‰§è¡Œåˆ†æï¼ˆHookä¼šè‡ªåŠ¨æ‹¦æˆªå„ä¸ªé˜¶æ®µï¼‰</span>
        <span class="hljs-type">AnalysisResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> processor.analyze(logs);
        
        <span class="hljs-comment">// 5. æŸ¥çœ‹è¿½è¸ªç»“æœ</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> (String) result.getMetadata().get(<span class="hljs-string">"traceId"</span>);
        UserBehaviorAnalysisHook.<span class="hljs-type">AnalysisTrace</span> <span class="hljs-variable">trace</span> <span class="hljs-operator">=</span> hook.getTrace(traceId);
        
        System.out.println(<span class="hljs-string">"åˆ†ææ€»è€—æ—¶: "</span> + trace.getTotalDuration() + <span class="hljs-string">"ms"</span>);
        System.out.println(<span class="hljs-string">"æˆåŠŸæ­¥éª¤: "</span> + trace.getSuccessfulSteps());
        System.out.println(<span class="hljs-string">"å¤±è´¥æ­¥éª¤: "</span> + trace.getFailedSteps());
        
        <span class="hljs-comment">// 6. æ¸…ç†æ—§æ•°æ®</span>
        hook.clearTraces();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;UserBehaviorLog&gt; <span class="hljs-title function_">loadUserBehaviorLogs</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> ä»æ•°æ®åº“æˆ–æ–‡ä»¶åŠ è½½</span>
        <span class="hljs-keyword">return</span> List.of();
    }
}
</code></pre>
<h2 data-id="heading-33">5. æ ¸å¿ƒåˆ†æå¼•æ“å®ç°</h2>
<h3 data-id="heading-34">5.1 UserBehaviorAnalysisProcessor æ ¸å¿ƒç±»</h3>
<p>è¯¥ç±»æ˜¯æ•´ä¸ªåˆ†æç³»ç»Ÿçš„æ ¸å¿ƒï¼ŒåŒ…å«ä»¥ä¸‹ä¸»è¦æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBehaviorAnalysisProcessor</span> {
    <span class="hljs-comment">// ä¸»å…¥å£</span>
    <span class="hljs-keyword">public</span> AnalysisResult <span class="hljs-title function_">analyze</span><span class="hljs-params">(List&lt;UserBehaviorLog&gt; behaviorLogs)</span>
    
    <span class="hljs-comment">// 1. æ•°æ®è´¨é‡æ£€æŸ¥</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performDataQualityCheck</span><span class="hljs-params">(List&lt;UserBehaviorLog&gt; logs)</span>
    
    <span class="hljs-comment">// 2. æ•°æ®é¢„å¤„ç†  </span>
    <span class="hljs-keyword">private</span> List&lt;UserBehaviorLog&gt; <span class="hljs-title function_">preprocessData</span><span class="hljs-params">(List&lt;UserBehaviorLog&gt; logs)</span>
    
    <span class="hljs-comment">// 3. ç”¨æˆ·æ´»è·ƒåº¦åˆ†æ</span>
    <span class="hljs-keyword">private</span> UserActivityMetrics <span class="hljs-title function_">analyzeUserActivity</span><span class="hljs-params">(List&lt;UserBehaviorLog&gt; logs)</span>
    
    <span class="hljs-comment">// 4. ç”¨æˆ·åˆ†å±‚</span>
    <span class="hljs-keyword">private</span> UserSegmentationResult <span class="hljs-title function_">performUserSegmentation</span><span class="hljs-params">(List&lt;UserBehaviorLog&gt; logs)</span>
    
    <span class="hljs-comment">// 5. åŠŸèƒ½ä½¿ç”¨åˆ†æ</span>
    <span class="hljs-keyword">private</span> FeatureUsageMetrics <span class="hljs-title function_">analyzeFeatureUsage</span><span class="hljs-params">(List&lt;UserBehaviorLog&gt; logs)</span>
    
    <span class="hljs-comment">// 6. æµå¤±é¢„æµ‹</span>
    <span class="hljs-keyword">private</span> ChurnPredictionResult <span class="hljs-title function_">predictChurn</span><span class="hljs-params">(List&lt;UserBehaviorLog&gt; logs, ...)</span>
    
    <span class="hljs-comment">// 7. æ´å¯Ÿç”Ÿæˆ</span>
    <span class="hljs-keyword">private</span> List&lt;Insight&gt; <span class="hljs-title function_">generateInsights</span><span class="hljs-params">(AnalysisResult result)</span>
    
    <span class="hljs-comment">// 8. å»ºè®®ç”Ÿæˆ</span>
    <span class="hljs-keyword">private</span> List&lt;Recommendation&gt; <span class="hljs-title function_">generateRecommendations</span><span class="hljs-params">(AnalysisResult result)</span>
}
</code></pre>
<h3 data-id="heading-35">5.2 å…³é”®æ–¹æ³•å®ç°è¯¦è§£</h3>
<h4 data-id="heading-36">æ–¹æ³•1ï¼šæ•°æ®è´¨é‡æ£€æŸ¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performDataQualityCheck</span><span class="hljs-params">(List&lt;UserBehaviorLog&gt; logs)</span> 
        <span class="hljs-keyword">throws</span> DataQualityException {
    Map&lt;String, Object&gt; checkResult = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    List&lt;String&gt; issues = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-type">double</span> <span class="hljs-variable">qualityScore</span> <span class="hljs-operator">=</span> <span class="hljs-number">100.0</span>;
    
    <span class="hljs-comment">// 1. ç¼ºå¤±å€¼æ£€æŸ¥</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">missingUserIdCount</span> <span class="hljs-operator">=</span> logs.stream()
        .filter(log -&gt; log.getUserId() == <span class="hljs-literal">null</span> || log.getUserId().isEmpty())
        .count();
    <span class="hljs-keyword">if</span> (missingUserIdCount &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-type">double</span> <span class="hljs-variable">missingRate</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) missingUserIdCount / logs.size() * <span class="hljs-number">100</span>;
        issues.add(String.format(<span class="hljs-string">"ç¼ºå¤±user_id: %.2f%%"</span>, missingRate));
        qualityScore -= missingRate * <span class="hljs-number">0.5</span>;
    }
    
    <span class="hljs-comment">// 2. æ•°æ®æ–°é²œåº¦æ£€æŸ¥</span>
    <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">latestTimestamp</span> <span class="hljs-operator">=</span> logs.stream()
        .map(UserBehaviorLog::getTimestamp)
        .filter(Objects::nonNull)
        .max(LocalDateTime::compareTo)
        .orElse(LocalDateTime.now());
    
    <span class="hljs-type">long</span> <span class="hljs-variable">daysSinceLatest</span> <span class="hljs-operator">=</span> ChronoUnit.DAYS.between(
        latestTimestamp.toLocalDate(), LocalDate.now());
    <span class="hljs-keyword">if</span> (daysSinceLatest &gt; <span class="hljs-number">7</span>) {
        issues.add(String.format(<span class="hljs-string">"æ•°æ®ä¸æ–°é²œ: %då¤©å‰"</span>, daysSinceLatest));
        qualityScore -= Math.min(daysSinceLatest, <span class="hljs-number">20</span>);
    }
    
    <span class="hljs-comment">// 3. å¼‚å¸¸å€¼æ£€æŸ¥</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">abnormalDurationCount</span> <span class="hljs-operator">=</span> logs.stream()
        .filter(log -&gt; log.getDuration() != <span class="hljs-literal">null</span> &amp;&amp; 
                      (log.getDuration() &lt; <span class="hljs-number">0</span> || log.getDuration() &gt; <span class="hljs-number">86400000</span>))
        .count();
    <span class="hljs-keyword">if</span> (abnormalDurationCount &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-type">double</span> <span class="hljs-variable">abnormalRate</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) abnormalDurationCount / logs.size() * <span class="hljs-number">100</span>;
        issues.add(String.format(<span class="hljs-string">"å¼‚å¸¸æ—¶é•¿: %.2f%%"</span>, abnormalRate));
        qualityScore -= abnormalRate * <span class="hljs-number">0.3</span>;
    }
    
    <span class="hljs-comment">// 4. æ•°æ®å®Œæ•´æ€§</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">completeRecords</span> <span class="hljs-operator">=</span> logs.stream()
        .filter(log -&gt; log.getUserId() != <span class="hljs-literal">null</span> &amp;&amp; 
                      log.getTimestamp() != <span class="hljs-literal">null</span> &amp;&amp; 
                      log.getAction() != <span class="hljs-literal">null</span>)
        .count();
    <span class="hljs-type">double</span> <span class="hljs-variable">completeness</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) completeRecords / logs.size() * <span class="hljs-number">100</span>;
    
    <span class="hljs-comment">// è°ƒç”¨Hook</span>
    hook.onDataQualityCheck(<span class="hljs-string">"æ•°æ®è´¨é‡æ£€æŸ¥"</span>, checkResult);
    
    <span class="hljs-comment">// å¦‚æœè´¨é‡åˆ†æ•°è¿‡ä½ï¼ŒæŠ›å‡ºå¼‚å¸¸</span>
    <span class="hljs-keyword">if</span> (qualityScore &lt; config.getMinDataQualityScore()) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataQualityException</span>(
            String.format(<span class="hljs-string">"æ•°æ®è´¨é‡: %.1f/100"</span>, qualityScore));
    }
}
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ“ å¤šç»´åº¦æ£€æŸ¥ï¼šç¼ºå¤±å€¼ã€æ–°é²œåº¦ã€å¼‚å¸¸å€¼ã€å®Œæ•´æ€§</li>
<li>âœ“ é‡åŒ–è¯„åˆ†ï¼š100åˆ†åˆ¶ï¼Œå¯é…ç½®é˜ˆå€¼</li>
<li>âœ“ Hooké€šçŸ¥ï¼šå®æ—¶è¾“å‡ºæ£€æŸ¥ç»“æœ</li>
<li>âœ“ å¤±è´¥å¿«é€Ÿï¼šè´¨é‡ä¸è¾¾æ ‡ç«‹å³åœæ­¢</li>
</ul>
<h4 data-id="heading-37">æ–¹æ³•2ï¼šç”¨æˆ·æ´»è·ƒåº¦åˆ†æ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> UserActivityMetrics <span class="hljs-title function_">analyzeUserActivity</span><span class="hljs-params">(List&lt;UserBehaviorLog&gt; logs)</span> {
    <span class="hljs-type">UserActivityMetrics</span> <span class="hljs-variable">metrics</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserActivityMetrics</span>();
    <span class="hljs-type">LocalDate</span> <span class="hljs-variable">today</span> <span class="hljs-operator">=</span> LocalDate.now();
    
    <span class="hljs-comment">// è®¡ç®—DAU/WAU/MAU</span>
    Set&lt;String&gt; dauUsers = logs.stream()
        .filter(log -&gt; log.getTimestamp().toLocalDate().equals(today))
        .map(UserBehaviorLog::getUserId)
        .collect(Collectors.toSet());
    metrics.setDau(dauUsers.size());
    
    Set&lt;String&gt; wauUsers = logs.stream()
        .filter(log -&gt; !log.getTimestamp().toLocalDate()
            .isBefore(today.minusDays(<span class="hljs-number">7</span>)))
        .map(UserBehaviorLog::getUserId)
        .collect(Collectors.toSet());
    metrics.setWau(wauUsers.size());
    
    <span class="hljs-comment">// è®¡ç®—ç•™å­˜ç‡</span>
    Map&lt;String, LocalDate&gt; userFirstSeen = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    logs.forEach(log -&gt; {
        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> log.getTimestamp().toLocalDate();
        userFirstSeen.merge(log.getUserId(), date, 
            (d1, d2) -&gt; d1.isBefore(d2) ? d1 : d2);
    });
    
    <span class="hljs-comment">// æ¬¡æ—¥ç•™å­˜</span>
    <span class="hljs-type">LocalDate</span> <span class="hljs-variable">yesterday</span> <span class="hljs-operator">=</span> today.minusDays(<span class="hljs-number">1</span>);
    <span class="hljs-type">long</span> <span class="hljs-variable">day1Users</span> <span class="hljs-operator">=</span> userFirstSeen.values().stream()
        .filter(d -&gt; d.equals(yesterday))
        .count();
    <span class="hljs-type">long</span> <span class="hljs-variable">day1Retained</span> <span class="hljs-operator">=</span> userFirstSeen.entrySet().stream()
        .filter(e -&gt; e.getValue().equals(yesterday))
        .filter(e -&gt; dauUsers.contains(e.getKey()))
        .count();
    metrics.setDay1Retention(day1Users &gt; <span class="hljs-number">0</span> ? 
        (<span class="hljs-type">double</span>) day1Retained / day1Users : <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// è°ƒç”¨Hook</span>
    hook.onStatisticalAnalysis(<span class="hljs-string">"ç”¨æˆ·æ´»è·ƒåº¦åˆ†æ"</span>, ...);
    
    <span class="hljs-keyword">return</span> metrics;
}
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ“ å®Œæ•´çš„DAU/WAU/MAUè®¡ç®—</li>
<li>âœ“ ç•™å­˜ç‡ç²¾ç¡®è®¡ç®—ï¼ˆæ¬¡æ—¥/7æ—¥/30æ—¥ï¼‰</li>
<li>âœ“ æ´»è·ƒæ—¶æ®µåˆ†å¸ƒç»Ÿè®¡</li>
<li>âœ“ å®æ—¶Hooké€šçŸ¥</li>
</ul>
<h4 data-id="heading-38">æ–¹æ³•3ï¼šRFMç”¨æˆ·åˆ†å±‚</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Map&lt;String, RFMMetrics&gt; <span class="hljs-title function_">buildRFMModel</span><span class="hljs-params">(List&lt;UserBehaviorLog&gt; logs)</span> {
    Map&lt;String, RFMMetrics&gt; userRFM = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    <span class="hljs-type">LocalDate</span> <span class="hljs-variable">today</span> <span class="hljs-operator">=</span> LocalDate.now();
    
    <span class="hljs-comment">// æŒ‰ç”¨æˆ·åˆ†ç»„</span>
    Map&lt;String, List&lt;UserBehaviorLog&gt;&gt; userLogs = logs.stream()
        .collect(Collectors.groupingBy(UserBehaviorLog::getUserId));
    
    userLogs.forEach((userId, userLogList) -&gt; {
        <span class="hljs-type">RFMMetrics</span> <span class="hljs-variable">rfm</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RFMMetrics</span>();
        
        <span class="hljs-comment">// Recency: æœ€è¿‘ä¸€æ¬¡æ´»åŠ¨è·ä»Šå¤©æ•°</span>
        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">lastActivity</span> <span class="hljs-operator">=</span> userLogList.stream()
            .map(log -&gt; log.getTimestamp().toLocalDate())
            .max(LocalDate::compareTo)
            .orElse(today);
        rfm.setRecency((<span class="hljs-type">int</span>) ChronoUnit.DAYS.between(lastActivity, today));
        
        <span class="hljs-comment">// Frequency: æ´»åŠ¨é¢‘æ¬¡</span>
        rfm.setFrequency(userLogList.size());
        
        <span class="hljs-comment">// Monetary: ä½¿ç”¨æ—¶é•¿ï¼ˆä»£è¡¨ä»·å€¼ï¼‰</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">totalDuration</span> <span class="hljs-operator">=</span> userLogList.stream()
            .filter(log -&gt; log.getDuration() != <span class="hljs-literal">null</span>)
            .mapToLong(UserBehaviorLog::getDuration)
            .sum();
        rfm.setMonetary(totalDuration);
        
        userRFM.put(userId, rfm);
    });
    
    <span class="hljs-comment">// è®¡ç®—RFMè¯„åˆ†ï¼ˆ5åˆ†ä½æ•°æ³•ï¼‰</span>
    calculateRFMScores(userRFM);
    
    <span class="hljs-keyword">return</span> userRFM;
}

<span class="hljs-keyword">private</span> List&lt;UserSegment&gt; <span class="hljs-title function_">segmentUsersByRFM</span><span class="hljs-params">(Map&lt;String, RFMMetrics&gt; userRFM)</span> {
    Map&lt;String, List&lt;String&gt;&gt; segmentUsers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    
    userRFM.forEach((userId, rfm) -&gt; {
        <span class="hljs-type">int</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> rfm.getRScore();  <span class="hljs-comment">// 1-5</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> rfm.getFScore();  <span class="hljs-comment">// 1-5</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> rfm.getMScore();  <span class="hljs-comment">// 1-5</span>
        
        <span class="hljs-comment">// åˆ†ç±»è§„åˆ™</span>
        <span class="hljs-keyword">if</span> (r &gt;= <span class="hljs-number">4</span> &amp;&amp; f &gt;= <span class="hljs-number">4</span> &amp;&amp; m &gt;= <span class="hljs-number">4</span>) {
            segmentUsers.get(<span class="hljs-string">"é‡è¦ä»·å€¼å®¢æˆ·"</span>).add(userId);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (r &gt;= <span class="hljs-number">4</span> &amp;&amp; f &gt;= <span class="hljs-number">4</span>) {
            segmentUsers.get(<span class="hljs-string">"é‡è¦ä¿æŒå®¢æˆ·"</span>).add(userId);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (r &lt;= <span class="hljs-number">2</span> &amp;&amp; f &gt;= <span class="hljs-number">4</span> &amp;&amp; m &gt;= <span class="hljs-number">4</span>) {
            segmentUsers.get(<span class="hljs-string">"é‡è¦æŒ½å›å®¢æˆ·"</span>).add(userId);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (r &gt;= <span class="hljs-number">3</span>) {
            segmentUsers.get(<span class="hljs-string">"ä¸€èˆ¬æ´»è·ƒå®¢æˆ·"</span>).add(userId);
        } <span class="hljs-keyword">else</span> {
            segmentUsers.get(<span class="hljs-string">"æµå¤±é£é™©å®¢æˆ·"</span>).add(userId);
        }
    });
    
    <span class="hljs-comment">// è°ƒç”¨Hook</span>
    hook.onUserSegmentation(<span class="hljs-string">"RFMæ¨¡å‹"</span>, segments.size(), clusterInfo);
    
    <span class="hljs-keyword">return</span> segments;
}
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ“ ä½¿ç”¨ç»å…¸RFMæ¨¡å‹</li>
<li>âœ“ 5åˆ†ä½æ•°è¯„åˆ†æ³•</li>
<li>âœ“ 5ä¸ªç”¨æˆ·åˆ†ç¾¤ï¼Œæ¯ä¸ªæœ‰æ˜ç¡®ç‰¹å¾</li>
<li>âœ“ è®¡ç®—æ¯ä¸ªåˆ†ç¾¤çš„å¹³å‡RFMå€¼</li>
</ul>
<h4 data-id="heading-39">æ–¹æ³•4ï¼šæµå¤±é£é™©é¢„æµ‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> ChurnPredictionResult <span class="hljs-title function_">predictChurn</span><span class="hljs-params">(
        List&lt;UserBehaviorLog&gt; logs, 
        UserActivityMetrics activityMetrics)</span> {
    
    <span class="hljs-type">ChurnPredictionResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChurnPredictionResult</span>();
    Set&lt;String&gt; allUsers = logs.stream()
        .map(UserBehaviorLog::getUserId)
        .collect(Collectors.toSet());
    
    <span class="hljs-comment">// è®¡ç®—æ¯ä¸ªç”¨æˆ·çš„æµå¤±é£é™©</span>
    Map&lt;String, ChurnRiskScore&gt; userChurnRisk = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">for</span> (String userId : allUsers) {
        List&lt;UserBehaviorLog&gt; userLogs = logs.stream()
            .filter(log -&gt; log.getUserId().equals(userId))
            .collect(Collectors.toList());
        
        <span class="hljs-type">ChurnRiskScore</span> <span class="hljs-variable">riskScore</span> <span class="hljs-operator">=</span> calculateChurnRisk(
            userLogs, 
            LocalDate.now(), 
            config.getChurnThresholdDays()
        );
        userChurnRisk.put(userId, riskScore);
    }
    
    <span class="hljs-comment">// ç»Ÿè®¡æµå¤±é£é™©ç”¨æˆ·</span>
    List&lt;String&gt; churnRiskUsers = userChurnRisk.entrySet().stream()
        .filter(e -&gt; e.getValue().isHighRisk())
        .map(Map.Entry::getKey)
        .collect(Collectors.toList());
    
    result.setTotalUsers(allUsers.size());
    result.setChurnRiskUsers(churnRiskUsers.size());
    result.setChurnRate((<span class="hljs-type">double</span>) churnRiskUsers.size() / allUsers.size());
    result.setModelAccuracy(<span class="hljs-number">0.85</span>);  <span class="hljs-comment">// æ¨¡æ‹Ÿæ¨¡å‹å‡†ç¡®ç‡</span>
    result.setChurnRiskUserIds(churnRiskUsers);
    
    <span class="hljs-comment">// åˆ†ææµå¤±åŸå› </span>
    result.setTopRiskFactors(Arrays.asList(
        <span class="hljs-string">"è¿ç»­ N å¤©æœªç™»å½•"</span>,
        <span class="hljs-string">"æ´»åŠ¨é¢‘æ¬¡å¤§å¹…ä¸‹é™"</span>,
        <span class="hljs-string">"ä½¿ç”¨æ—¶é•¿ä¸‹é™ 60%+"</span>,
        <span class="hljs-string">"æœªå‚ä¸è¥é”€æ´»åŠ¨"</span>,
        <span class="hljs-string">"ä»…ä½¿ç”¨å•ä¸€åŠŸèƒ½"</span>
    ));
    
    <span class="hljs-comment">// è°ƒç”¨Hook</span>
    Map&lt;String, Object&gt; predictionData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    predictionData.put(<span class="hljs-string">"totalUsers"</span>, result.getTotalUsers());
    predictionData.put(<span class="hljs-string">"churnRiskUsers"</span>, result.getChurnRiskUsers());
    predictionData.put(<span class="hljs-string">"churnRate"</span>, result.getChurnRate());
    predictionData.put(<span class="hljs-string">"modelAccuracy"</span>, result.getModelAccuracy());
    predictionData.put(<span class="hljs-string">"topRiskFactors"</span>, result.getTopRiskFactors());
    
    hook.onChurnPrediction(predictionData);
    
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// è®¡ç®—å•ä¸ªç”¨æˆ·çš„æµå¤±é£é™©</span>
<span class="hljs-keyword">private</span> ChurnRiskScore <span class="hljs-title function_">calculateChurnRisk</span><span class="hljs-params">(
        List&lt;UserBehaviorLog&gt; userLogs, 
        LocalDate today, 
        <span class="hljs-type">int</span> churnThresholdDays)</span> {
    
    <span class="hljs-type">ChurnRiskScore</span> <span class="hljs-variable">score</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChurnRiskScore</span>();
    score.setRiskScore(<span class="hljs-number">0.0</span>);
    
    <span class="hljs-keyword">if</span> (userLogs.isEmpty()) {
        score.setHighRisk(<span class="hljs-literal">true</span>);
        score.setRiskScore(<span class="hljs-number">1.0</span>);
        score.getFactors().add(<span class="hljs-string">"æ— ä½¿ç”¨è®°å½•"</span>);
        <span class="hljs-keyword">return</span> score;
    }
    
    <span class="hljs-comment">// å› ç´ 1: æœ€è¿‘ä¸€æ¬¡æ´»åŠ¨æ—¶é—´ (æƒé‡ 0.4)</span>
    <span class="hljs-type">LocalDate</span> <span class="hljs-variable">lastActivity</span> <span class="hljs-operator">=</span> userLogs.stream()
        .map(log -&gt; log.getTimestamp().toLocalDate())
        .max(LocalDate::compareTo)
        .orElse(today.minusYears(<span class="hljs-number">1</span>));
    
    <span class="hljs-type">long</span> <span class="hljs-variable">daysSinceLastActivity</span> <span class="hljs-operator">=</span> ChronoUnit.DAYS.between(lastActivity, today);
    <span class="hljs-keyword">if</span> (daysSinceLastActivity &gt;= churnThresholdDays) {
        score.setRiskScore(score.getRiskScore() + <span class="hljs-number">0.4</span>);
        score.getFactors().add(<span class="hljs-string">"è¿ç»­ "</span> + daysSinceLastActivity + <span class="hljs-string">" å¤©æœªæ´»åŠ¨"</span>);
    }
    
    <span class="hljs-comment">// å› ç´ 2: æ´»åŠ¨é¢‘æ¬¡ä¸‹é™ (æƒé‡ 0.3)</span>
    <span class="hljs-type">LocalDate</span> <span class="hljs-variable">monthAgo</span> <span class="hljs-operator">=</span> today.minusDays(<span class="hljs-number">30</span>);
    <span class="hljs-type">LocalDate</span> <span class="hljs-variable">twoMonthsAgo</span> <span class="hljs-operator">=</span> today.minusDays(<span class="hljs-number">60</span>);
    
    <span class="hljs-type">long</span> <span class="hljs-variable">recentActivityCount</span> <span class="hljs-operator">=</span> userLogs.stream()
        .filter(log -&gt; !log.getTimestamp().toLocalDate().isBefore(monthAgo))
        .count();
    
    <span class="hljs-type">long</span> <span class="hljs-variable">previousActivityCount</span> <span class="hljs-operator">=</span> userLogs.stream()
        .filter(log -&gt; !log.getTimestamp().toLocalDate().isBefore(twoMonthsAgo))
        .filter(log -&gt; log.getTimestamp().toLocalDate().isBefore(monthAgo))
        .count();
    
    <span class="hljs-keyword">if</span> (previousActivityCount &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-type">double</span> <span class="hljs-variable">activityChange</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) (recentActivityCount - previousActivityCount) 
            / previousActivityCount;
        <span class="hljs-keyword">if</span> (activityChange &lt; -<span class="hljs-number">0.5</span>) {
            score.setRiskScore(score.getRiskScore() + <span class="hljs-number">0.3</span>);
            score.getFactors().add(
                <span class="hljs-string">"æ´»åŠ¨é¢‘æ¬¡ä¸‹é™ "</span> + 
                String.format(<span class="hljs-string">"%.0f%%"</span>, Math.abs(activityChange) * <span class="hljs-number">100</span>)
            );
        }
    }
    
    <span class="hljs-comment">// å› ç´ 3: ä½¿ç”¨æ—¶é•¿ä¸‹é™ (æƒé‡ 0.2)</span>
    <span class="hljs-comment">// ... ç±»ä¼¼é€»è¾‘</span>
    
    <span class="hljs-comment">// å› ç´ 4: åŠŸèƒ½ä½¿ç”¨å•ä¸€ (æƒé‡ 0.1)</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">uniqueFeaturesUsed</span> <span class="hljs-operator">=</span> userLogs.stream()
        .filter(log -&gt; log.getFeature() != <span class="hljs-literal">null</span>)
        .map(UserBehaviorLog::getFeature)
        .distinct()
        .count();
    
    <span class="hljs-keyword">if</span> (uniqueFeaturesUsed &lt; <span class="hljs-number">3</span>) {
        score.setRiskScore(score.getRiskScore() + <span class="hljs-number">0.1</span>);
        score.getFactors().add(<span class="hljs-string">"ä»…ä½¿ç”¨ "</span> + uniqueFeaturesUsed + <span class="hljs-string">" ä¸ªåŠŸèƒ½"</span>);
    }
    
    score.setHighRisk(score.getRiskScore() &gt;= <span class="hljs-number">0.6</span>);
    <span class="hljs-keyword">return</span> score;
}
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ“ å¤šå› ç´ åŠ æƒæ¨¡å‹</li>
<li>âœ“ æ˜ç¡®çš„é£é™©é˜ˆå€¼ï¼ˆ0.6ï¼‰</li>
<li>âœ“ å¯è§£é‡Šçš„é£é™©å› ç´ </li>
<li>âœ“ åˆ†å±‚ç»Ÿè®¡ï¼ˆé«˜/ä¸­/ä½é£é™©ï¼‰</li>
</ul>
<h4 data-id="heading-40">æ–¹æ³•5ï¼šæ´å¯Ÿç”Ÿæˆ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> List&lt;Insight&gt; <span class="hljs-title function_">generateInsights</span><span class="hljs-params">(AnalysisResult analysisResult)</span> {
    List&lt;Insight&gt; insights = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-comment">// æ´å¯Ÿ1: ç•™å­˜ç‡åˆ†æ</span>
    <span class="hljs-type">UserActivityMetrics</span> <span class="hljs-variable">activity</span> <span class="hljs-operator">=</span> analysisResult.getActivityMetrics();
    <span class="hljs-keyword">if</span> (activity.getDay7Retention() &lt; <span class="hljs-number">0.5</span>) {
        <span class="hljs-type">Insight</span> <span class="hljs-variable">insight</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Insight</span>();
        insight.setCategory(<span class="hljs-string">"retention"</span>);
        insight.setSeverity(<span class="hljs-string">"high"</span>);
        insight.setDescription(
            String.format(<span class="hljs-string">"7æ—¥ç•™å­˜ç‡è¾ƒä½(%.1f%%)ï¼Œä½äºè¡Œä¸šå¹³å‡æ°´å¹³(60%%)"</span>,
                activity.getDay7Retention() * <span class="hljs-number">100</span>)
        );
        insight.setEvidence(Arrays.asList(
            <span class="hljs-string">"7æ—¥ç•™å­˜ç‡: "</span> + String.format(<span class="hljs-string">"%.1f%%"</span>, activity.getDay7Retention() * <span class="hljs-number">100</span>),
            <span class="hljs-string">"æ¬¡æ—¥ç•™å­˜ç‡: "</span> + String.format(<span class="hljs-string">"%.1f%%"</span>, activity.getDay1Retention() * <span class="hljs-number">100</span>),
            <span class="hljs-string">"30æ—¥ç•™å­˜ç‡: "</span> + String.format(<span class="hljs-string">"%.1f%%"</span>, activity.getDay30Retention() * <span class="hljs-number">100</span>)
        ));
        insight.setConfidence(<span class="hljs-number">0.95</span>);
        insight.setImpactScore(<span class="hljs-number">8.5</span>);
        insights.add(insight);
    }
    
    <span class="hljs-comment">// æ´å¯Ÿ2: æµå¤±é£é™©</span>
    <span class="hljs-type">ChurnPredictionResult</span> <span class="hljs-variable">churn</span> <span class="hljs-operator">=</span> analysisResult.getChurnPrediction();
    <span class="hljs-keyword">if</span> (churn.getChurnRate() &gt; <span class="hljs-number">0.1</span>) {
        <span class="hljs-type">Insight</span> <span class="hljs-variable">insight</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Insight</span>();
        insight.setCategory(<span class="hljs-string">"churn"</span>);
        insight.setSeverity(<span class="hljs-string">"critical"</span>);
        insight.setDescription(
            String.format(<span class="hljs-string">"è¯†åˆ«å‡º%.1f%%çš„ç”¨æˆ·å­˜åœ¨æµå¤±é£é™©ï¼Œéœ€ç«‹å³å¹²é¢„"</span>,
                churn.getChurnRate() * <span class="hljs-number">100</span>)
        );
        List&lt;String&gt; evidence = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        evidence.add(<span class="hljs-string">"æµå¤±é£é™©ç”¨æˆ·æ•°: "</span> + churn.getChurnRiskUsers() + <span class="hljs-string">"äºº"</span>);
        evidence.addAll(churn.getTopRiskFactors().stream()
            .limit(<span class="hljs-number">3</span>)
            .collect(Collectors.toList()));
        insight.setEvidence(evidence);
        insight.setConfidence(<span class="hljs-number">0.85</span>);
        insight.setImpactScore(<span class="hljs-number">9.5</span>);
        insights.add(insight);
    }
    
    <span class="hljs-comment">// æ´å¯Ÿ3: ç”¨æˆ·åˆ†å±‚</span>
    <span class="hljs-type">UserSegmentationResult</span> <span class="hljs-variable">segmentation</span> <span class="hljs-operator">=</span> analysisResult.getSegmentation();
    <span class="hljs-type">UserSegment</span> <span class="hljs-variable">vipSegment</span> <span class="hljs-operator">=</span> segmentation.getSegments().stream()
        .filter(s -&gt; s.getName().equals(<span class="hljs-string">"é‡è¦ä»·å€¼å®¢æˆ·"</span>))
        .findFirst()
        .orElse(<span class="hljs-literal">null</span>);
    
    <span class="hljs-keyword">if</span> (vipSegment != <span class="hljs-literal">null</span>) {
        <span class="hljs-type">double</span> <span class="hljs-variable">vipPercentage</span> <span class="hljs-operator">=</span> vipSegment.getPercentage();
        <span class="hljs-type">Insight</span> <span class="hljs-variable">insight</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Insight</span>();
        insight.setCategory(<span class="hljs-string">"segmentation"</span>);
        insight.setSeverity(vipPercentage &gt; <span class="hljs-number">10</span> ? <span class="hljs-string">"low"</span> : <span class="hljs-string">"medium"</span>);
        insight.setDescription(
            String.format(<span class="hljs-string">"é‡è¦ä»·å€¼å®¢æˆ·å æ¯”%.1f%%ï¼Œ%s"</span>,
                vipPercentage,
                vipPercentage &gt; <span class="hljs-number">10</span> ? <span class="hljs-string">"å æ¯”å¥åº·"</span> : <span class="hljs-string">"éœ€è¦åŠ å¼ºç»´æŠ¤"</span>)
        );
        insight.setEvidence(Arrays.asList(
            <span class="hljs-string">"é‡è¦ä»·å€¼å®¢æˆ·: "</span> + vipSegment.getUserCount() + <span class="hljs-string">"äºº"</span>,
            <span class="hljs-string">"ç‰¹å¾: "</span> + vipSegment.getDescription()
        ));
        insight.setConfidence(<span class="hljs-number">0.92</span>);
        insights.add(insight);
    }
    
    <span class="hljs-comment">// æ´å¯Ÿ4: åŠŸèƒ½ä½¿ç”¨</span>
    <span class="hljs-type">FeatureUsageMetrics</span> <span class="hljs-variable">features</span> <span class="hljs-operator">=</span> analysisResult.getFeatureMetrics();
    <span class="hljs-keyword">if</span> (features.getUnderusedFeatures() != <span class="hljs-literal">null</span> &amp;&amp; 
        !features.getUnderusedFeatures().isEmpty()) {
        <span class="hljs-type">Insight</span> <span class="hljs-variable">insight</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Insight</span>();
        insight.setCategory(<span class="hljs-string">"feature"</span>);
        insight.setSeverity(<span class="hljs-string">"medium"</span>);
        insight.setDescription(
            String.format(<span class="hljs-string">"å‘ç°%dä¸ªå†·é—¨åŠŸèƒ½ï¼Œä½¿ç”¨ç‡&lt;5%%"</span>,
                features.getUnderusedFeatures().size())
        );
        insight.setEvidence(features.getUnderusedFeatures().stream()
            .limit(<span class="hljs-number">5</span>)
            .map(f -&gt; <span class="hljs-string">"å†·é—¨åŠŸèƒ½: "</span> + f)
            .collect(Collectors.toList()));
        insight.setConfidence(<span class="hljs-number">1.0</span>);
        insight.setImpactScore(<span class="hljs-number">6.0</span>);
        insights.add(insight);
    }
    
    <span class="hljs-comment">// è°ƒç”¨Hook</span>
    <span class="hljs-keyword">if</span> (hook != <span class="hljs-literal">null</span>) {
        List&lt;Map&lt;String, Object&gt;&gt; insightMaps = insights.stream()
            .map(<span class="hljs-built_in">this</span>::insightToMap)
            .collect(Collectors.toList());
        hook.onInsightGeneration(insightMaps);
    }
    
    <span class="hljs-keyword">return</span> insights;
}

<span class="hljs-keyword">private</span> Map&lt;String, Object&gt; <span class="hljs-title function_">insightToMap</span><span class="hljs-params">(Insight insight)</span> {
    Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    map.put(<span class="hljs-string">"category"</span>, insight.getCategory());
    map.put(<span class="hljs-string">"severity"</span>, insight.getSeverity());
    map.put(<span class="hljs-string">"description"</span>, insight.getDescription());
    map.put(<span class="hljs-string">"evidence"</span>, insight.getEvidence());
    map.put(<span class="hljs-string">"confidence"</span>, insight.getConfidence());
    <span class="hljs-keyword">return</span> map;
}
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ“ å¤šç±»å‹æ´å¯Ÿï¼šç•™å­˜ã€æµå¤±ã€åˆ†å±‚ã€åŠŸèƒ½</li>
<li>âœ“ ä¸¥é‡ç¨‹åº¦åˆ†çº§ï¼šcritical/high/medium/low</li>
<li>âœ“ è¯æ®æ”¯æ’‘ï¼šæ¯ä¸ªæ´å¯Ÿéƒ½æœ‰å…·ä½“æ•°æ®</li>
<li>âœ“ ç½®ä¿¡åº¦è¯„ä¼°ï¼šé‡åŒ–å¯ä¿¡ç¨‹åº¦</li>
</ul>
<h4 data-id="heading-41">æ–¹æ³•6ï¼šå»ºè®®ç”Ÿæˆ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> List&lt;Recommendation&gt; <span class="hljs-title function_">generateRecommendations</span><span class="hljs-params">(AnalysisResult result)</span> {
    List&lt;Recommendation&gt; recommendations = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-comment">// å»ºè®®1: æµå¤±ç”¨æˆ·æŒ½å›</span>
    <span class="hljs-type">ChurnPredictionResult</span> <span class="hljs-variable">churn</span> <span class="hljs-operator">=</span> result.getChurnPrediction();
    <span class="hljs-keyword">if</span> (churn.getChurnRate() &gt; <span class="hljs-number">0.1</span>) {
        <span class="hljs-type">Recommendation</span> <span class="hljs-variable">rec</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Recommendation</span>();
        rec.setPriority(<span class="hljs-string">"critical"</span>);
        rec.setAction(<span class="hljs-string">"é’ˆå¯¹æµå¤±é£é™©ç”¨æˆ·æ¨é€ä¸ªæ€§åŒ–å†…å®¹å’Œä¼˜æƒ "</span>);
        rec.setRationale(<span class="hljs-string">"åŠæ—¶æŒ½å›å¯å‡å°‘50%çš„æµå¤±ï¼Œæ¨¡å‹å‡†ç¡®ç‡"</span> + 
            String.format(<span class="hljs-string">"%.0f%%"</span>, churn.getModelAccuracy() * <span class="hljs-number">100</span>));
        rec.setExpectedImpact(
            String.format(<span class="hljs-string">"é¢„è®¡æŒ½å›%d+ç”¨æˆ·ï¼Œä»·å€¼çº¦15ä¸‡æœˆè´¹"</span>,
                (<span class="hljs-type">int</span>)(churn.getChurnRiskUsers() * <span class="hljs-number">0.38</span>))
        );
        rec.setImplementation(Arrays.asList(
            <span class="hljs-string">"1. åˆ†æç”¨æˆ·å†å²è¡Œä¸ºå’Œåå¥½"</span>,
            <span class="hljs-string">"2. è®¾è®¡ä¸ªæ€§åŒ–æŒ½å›ç­–ç•¥ï¼ˆä¼˜æƒ /å†…å®¹/åŠŸèƒ½æ¨èï¼‰"</span>,
            <span class="hljs-string">"3. é€šè¿‡é‚®ä»¶ã€çŸ­ä¿¡ã€APPæ¨é€è§¦è¾¾"</span>,
            <span class="hljs-string">"4. æä¾›é™æ—¶ä¼˜æƒ å’Œä¸“å±æœåŠ¡"</span>,
            <span class="hljs-string">"5. è·Ÿè¸ªæŒ½å›æ•ˆæœï¼ŒæŒç»­ä¼˜åŒ–"</span>
        ));
        
        Map&lt;String, Object&gt; kpis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        kpis.put(<span class="hljs-string">"targetReactivationRate"</span>, <span class="hljs-number">0.38</span>);
        kpis.put(<span class="hljs-string">"estimatedRetainedUsers"</span>, (<span class="hljs-type">int</span>)(churn.getChurnRiskUsers() * <span class="hljs-number">0.38</span>));
        kpis.put(<span class="hljs-string">"estimatedRevenue"</span>, <span class="hljs-number">149150</span>);
        rec.setKpis(kpis);
        
        rec.setTimeline(<span class="hljs-string">"ç«‹å³æ‰§è¡Œï¼Œ3å¤©å†…å®Œæˆè§¦è¾¾"</span>);
        rec.setOwner(<span class="hljs-string">"ç”¨æˆ·è¿è¥å›¢é˜Ÿ"</span>);
        
        recommendations.add(rec);
    }
    
    <span class="hljs-comment">// å»ºè®®2: äº§å“ä¼˜åŒ–</span>
    <span class="hljs-type">UserActivityMetrics</span> <span class="hljs-variable">activity</span> <span class="hljs-operator">=</span> result.getActivityMetrics();
    <span class="hljs-keyword">if</span> (activity.getDay7Retention() &lt; <span class="hljs-number">0.5</span>) {
        <span class="hljs-type">Recommendation</span> <span class="hljs-variable">rec</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Recommendation</span>();
        rec.setPriority(<span class="hljs-string">"high"</span>);
        rec.setAction(<span class="hljs-string">"åœ¨æ–°ç”¨æˆ·å¼•å¯¼ä¸­é‡ç‚¹çªå‡ºé«˜ç•™å­˜åŠŸèƒ½"</span>);
        rec.setRationale(<span class="hljs-string">"åˆ†æå‘ç°ä½¿ç”¨æ ¸å¿ƒåŠŸèƒ½çš„ç”¨æˆ·ç•™å­˜ç‡é«˜35%"</span>);
        rec.setExpectedImpact(<span class="hljs-string">"é¢„è®¡æ•´ä½“7æ—¥ç•™å­˜ç‡æå‡10-15%"</span>);
        rec.setImplementation(Arrays.asList(
            <span class="hljs-string">"1. ä¼˜åŒ–æ–°ç”¨æˆ·onboardingæµç¨‹"</span>,
            <span class="hljs-string">"2. å‰3æ­¥å¼•å¯¼ç”¨æˆ·ä½¿ç”¨æ ¸å¿ƒåŠŸèƒ½"</span>,
            <span class="hljs-string">"3. æä¾›äº’åŠ¨å¼æ•™ç¨‹å’Œè§†é¢‘æŒ‡å¯¼"</span>,
            <span class="hljs-string">"4. è®¾ç½®æˆå°±milestoneæ¿€åŠ±ä½¿ç”¨"</span>,
            <span class="hljs-string">"5. A/Bæµ‹è¯•éªŒè¯æ•ˆæœ"</span>
        ));
        
        Map&lt;String, Object&gt; kpis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        kpis.put(<span class="hljs-string">"targetDay7Retention"</span>, <span class="hljs-number">0.50</span>);
        kpis.put(<span class="hljs-string">"estimatedNewRetainedUsers"</span>, <span class="hljs-number">6500</span>);
        rec.setKpis(kpis);
        
        rec.setTimeline(<span class="hljs-string">"2å‘¨å®Œæˆè®¾è®¡ï¼Œ1å‘¨å¼€å‘ï¼Œ1å‘¨æµ‹è¯•"</span>);
        rec.setOwner(<span class="hljs-string">"äº§å“å›¢é˜Ÿ + è®¾è®¡å›¢é˜Ÿ"</span>);
        
        recommendations.add(rec);
    }
    
    <span class="hljs-comment">// å»ºè®®3: åŠŸèƒ½è°ƒæ•´</span>
    <span class="hljs-type">FeatureUsageMetrics</span> <span class="hljs-variable">features</span> <span class="hljs-operator">=</span> result.getFeatureMetrics();
    <span class="hljs-keyword">if</span> (features.getUnderusedFeatures() != <span class="hljs-literal">null</span> &amp;&amp; 
        features.getUnderusedFeatures().size() &gt;= <span class="hljs-number">3</span>) {
        <span class="hljs-type">Recommendation</span> <span class="hljs-variable">rec</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Recommendation</span>();
        rec.setPriority(<span class="hljs-string">"medium"</span>);
        rec.setAction(<span class="hljs-string">"è¯„ä¼°"</span> + features.getUnderusedFeatures().size() + 
            <span class="hljs-string">"ä¸ªå†·é—¨åŠŸèƒ½ï¼Œè€ƒè™‘ä¼˜åŒ–æˆ–ä¸‹çº¿"</span>);
        rec.setRationale(<span class="hljs-string">"ä½¿ç”¨ç‡&lt;5%ï¼Œå ç”¨å¼€å‘å’Œç»´æŠ¤èµ„æº"</span>);
        rec.setExpectedImpact(<span class="hljs-string">"èŠ‚çš20%å¼€å‘èµ„æºï¼Œèšç„¦æ ¸å¿ƒåŠŸèƒ½"</span>);
        rec.setImplementation(Arrays.asList(
            <span class="hljs-string">"1. æ·±å…¥è°ƒç ”ç”¨æˆ·éœ€æ±‚å’Œç—›ç‚¹"</span>,
            <span class="hljs-string">"2. è¯„ä¼°åŠŸèƒ½çš„å•†ä¸šä»·å€¼å’Œæˆ˜ç•¥æ„ä¹‰"</span>,
            <span class="hljs-string">"3. å¯¹äºæœ‰ä»·å€¼ä½†ä½¿ç”¨ç‡ä½çš„åŠŸèƒ½è¿›è¡Œä¼˜åŒ–"</span>,
            <span class="hljs-string">"4. å¯¹äºä»·å€¼ä½çš„åŠŸèƒ½é€æ­¥ä¸‹çº¿"</span>,
            <span class="hljs-string">"5. åˆ¶å®šä¸‹çº¿æ²Ÿé€šå’Œè¿ç§»æ–¹æ¡ˆ"</span>
        ));
        
        Map&lt;String, Object&gt; kpis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        kpis.put(<span class="hljs-string">"targetResourceSaving"</span>, <span class="hljs-number">0.20</span>);
        kpis.put(<span class="hljs-string">"estimatedFeatureImprovement"</span>, <span class="hljs-number">3</span>);
        rec.setKpis(kpis);
        
        rec.setTimeline(<span class="hljs-string">"1ä¸ªæœˆå®Œæˆè¯„ä¼°ï¼Œ2ä¸ªæœˆæ‰§è¡Œ"</span>);
        rec.setOwner(<span class="hljs-string">"äº§å“å›¢é˜Ÿ + ç ”å‘å›¢é˜Ÿ"</span>);
        
        recommendations.add(rec);
    }
    
    <span class="hljs-comment">// è°ƒç”¨Hook</span>
    <span class="hljs-keyword">if</span> (hook != <span class="hljs-literal">null</span>) {
        List&lt;Map&lt;String, Object&gt;&gt; recMaps = recommendations.stream()
            .map(<span class="hljs-built_in">this</span>::recommendationToMap)
            .collect(Collectors.toList());
        hook.onRecommendationGeneration(recMaps);
    }
    
    <span class="hljs-keyword">return</span> recommendations;
}

<span class="hljs-keyword">private</span> Map&lt;String, Object&gt; <span class="hljs-title function_">recommendationToMap</span><span class="hljs-params">(Recommendation rec)</span> {
    Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    map.put(<span class="hljs-string">"priority"</span>, rec.getPriority());
    map.put(<span class="hljs-string">"action"</span>, rec.getAction());
    map.put(<span class="hljs-string">"expectedImpact"</span>, rec.getExpectedImpact());
    map.put(<span class="hljs-string">"implementation"</span>, rec.getImplementation());
    <span class="hljs-keyword">return</span> map;
}
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ“ åŸºäºæ´å¯Ÿç”Ÿæˆå»ºè®®</li>
<li>âœ“ ä¼˜å…ˆçº§åˆ†çº§ï¼šcritical/high/medium/low</li>
<li>âœ“ è¯¦ç»†çš„å®æ–½æ­¥éª¤</li>
<li>âœ“ å¯é‡åŒ–çš„KPIç›®æ ‡</li>
<li>âœ“ æ˜ç¡®çš„æ—¶é—´çº¿å’Œè´£ä»»äºº</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[BroadcastChannel é€šä¿¡æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7591079707699511306</link>    <guid>https://juejin.cn/post/7591079707699511306</guid>    <pubDate>2026-01-04T05:42:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591079707699511306" data-draft-id="7590958028478267438" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="BroadcastChannel é€šä¿¡æœºåˆ¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-04T05:42:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åº“å…‹è¡¨ç¤º"/> <meta itemprop="url" content="https://juejin.cn/user/888061128105479"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            BroadcastChannel é€šä¿¡æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/888061128105479/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åº“å…‹è¡¨ç¤º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:42:43.000Z" title="Sun Jan 04 2026 05:42:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. ä»€ä¹ˆæ˜¯ BroadcastChannelï¼Ÿ</h2>
<p><code>BroadcastChannel</code> æ˜¯ HTML5 æä¾›çš„ä¸€ä¸ª Web APIï¼Œå®ƒå…è®¸åŒæºçš„ä¸åŒæµè§ˆå™¨ä¸Šä¸‹æ–‡ï¼ˆWindow, Tab, Frame, Workerï¼‰ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚</p>
<p>å¦‚æœè¯´ <code>MessageChannel</code> æ˜¯ä¸¤ä¸ªäººä¹‹é—´çš„â€œæ‰“ç”µè¯â€ï¼Œé‚£ä¹ˆ <code>BroadcastChannel</code> å°±æ˜¯æ‰€æœ‰äººéƒ½åœ¨å¬çš„â€œæ”¶éŸ³æœºâ€ï¼š</p>
<ul>
<li><strong>MessageChannel</strong>ï¼šç‚¹å¯¹ç‚¹ï¼Œç§å¯†ã€é«˜æ•ˆã€‚</li>
<li><strong>BroadcastChannel</strong>ï¼šä¸€å¯¹å¤šï¼Œæ‰€æœ‰è°ƒåˆ°ç›¸åŒé¢‘é“çš„é¡µé¢éƒ½èƒ½æ”¶åˆ°æ¶ˆæ¯ã€‚</li>
</ul>
<h2 data-id="heading-1">2. æ ¸å¿ƒç”¨æ³•ï¼šä¸‰æ­¥ä¸Šæ‰‹</h2>
<p>ä½¿ç”¨ <code>BroadcastChannel</code> éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¸‰ä¸ªæ­¥éª¤ï¼š<strong>åˆ›å»ºé¢‘é“</strong>ã€<strong>å‘é€æ¶ˆæ¯</strong>ã€<strong>ç›‘å¬æ¶ˆæ¯</strong>ã€‚</p>
<h3 data-id="heading-2">2.1 åˆ›å»ºé¢‘é“</h3>
<p>é€šè¿‡ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆé¢‘é“åç§°ï¼‰æ¥åˆå§‹åŒ–ã€‚åªè¦åŒæºçš„ä¸Šä¸‹æ–‡ä½¿ç”¨ç›¸åŒçš„åç§°ï¼Œå®ƒä»¬å°±èƒ½è¿æ¥åœ¨ä¸€èµ·ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è¿æ¥åˆ°åä¸º 'user_updates' çš„é¢‘é“</span>
<span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BroadcastChannel</span>(<span class="hljs-string">'user_updates'</span>);
</code></pre>
<h3 data-id="heading-3">2.2 å‘é€æ¶ˆæ¯</h3>
<p>è°ƒç”¨ <code>postMessage</code> æ–¹æ³•ï¼Œå°†æ•°æ®å¹¿æ’­å‡ºå»ã€‚æ”¯æŒçš„æ•°æ®ç»“æ„éµå¾ª<strong>ç»“æ„åŒ–å…‹éš†ç®—æ³•</strong>ï¼ˆä¸ <code>MessageChannel</code> ä¸€è‡´ï¼‰ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœºæ™¯ï¼šç”¨æˆ·åœ¨å½“å‰é¡µç‚¹å‡»äº†é€€å‡ºç™»å½•</span>
channel.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'LOGOUT'</span>, <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() });
</code></pre>
<h3 data-id="heading-4">2.3 ç›‘å¬æ¶ˆæ¯</h3>
<p>åœ¨å…¶ä»–åŒæºé¡µé¢æˆ– Worker ä¸­ï¼Œç›‘å¬ <code>message</code> äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js">channel.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> data = event.<span class="hljs-property">data</span>;
    <span class="hljs-keyword">if</span> (data.<span class="hljs-property">type</span> === <span class="hljs-string">'LOGOUT'</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°å¹¿æ’­ï¼šç”¨æˆ·åœ¨å…¶ä»–é¡µé¢é€€å‡ºç™»å½•'</span>);
        <span class="hljs-comment">// æ‰§è¡Œè·³è½¬é€»è¾‘</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
    }
};
</code></pre>
<h3 data-id="heading-5">2.4 æ–­å¼€è¿æ¥</h3>
<p>å½“ä¸å†éœ€è¦æ¥æ”¶æ¶ˆæ¯ï¼ˆå¦‚é¡µé¢é”€æ¯ï¼‰æ—¶ï¼Œå»ºè®®å…³é—­è¿æ¥ä»¥é‡Šæ”¾èµ„æºã€‚</p>
<pre><code class="hljs language-js" lang="js">channel.<span class="hljs-title function_">close</span>();
</code></pre>
<h2 data-id="heading-6">3. å®æˆ˜åœºæ™¯ï¼šå•ç‚¹ç™»å½•ï¼ˆSSOï¼‰åŒæ­¥</h2>
<p>è¿™æ˜¯ <code>BroadcastChannel</code> æœ€ç»å…¸çš„åº”ç”¨åœºæ™¯ã€‚æˆ‘ä»¬éœ€è¦ä¿è¯ç”¨æˆ·åœ¨ä¸€ä¸ª Tab é¡µé€€å‡ºæˆ–ç™»å½•æ—¶ï¼Œå…¶ä»–æ‰€æœ‰ Tab é¡µéƒ½èƒ½åŒæ­¥çŠ¶æ€ã€‚</p>
<h3 data-id="heading-7">å°è£…ä¸€ä¸ªç®€å•çš„ AuthSync ç±»</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// utils/authSync.js</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CHANNEL_NAME</span> = <span class="hljs-string">'auth_sync_channel'</span>;
  
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthSync</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">channel</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BroadcastChannel</span>(<span class="hljs-variable constant_">CHANNEL_NAME</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initListener</span>();
    }

    <span class="hljs-title function_">initListener</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">channel</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> { type } = event.<span class="hljs-property">data</span>;
            <span class="hljs-keyword">switch</span> (type) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">'LOGOUT'</span>:
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleRemoteLogout</span>();
                <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">'LOGIN'</span>:
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleRemoteLogin</span>();
                <span class="hljs-keyword">break</span>;
            }
        }
    }

    <span class="hljs-comment">// å‘èµ·é€€å‡ºå¹¿æ’­</span>
    <span class="hljs-title function_">notifyLogout</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">channel</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'LOGOUT'</span> });
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">localLogout</span>();
    }

    <span class="hljs-title function_">localLogout</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// æ¸…é™¤ Token, è·³è½¬è·¯ç”±ç­‰...</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ¬åœ°é€€å‡ºæ‰§è¡Œ'</span>);
    }
    <span class="hljs-title function_">handleRemoteLogout</span>(<span class="hljs-params"/>) {
        <span class="hljs-title function_">alert</span>(<span class="hljs-string">'æ‚¨å·²åœ¨å…¶ä»–é¡µé¢é€€å‡ºç™»å½•ï¼Œå³å°†åˆ·æ–°'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">localLogout</span>();
    }
    <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">channel</span>.<span class="hljs-title function_">close</span>();
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AuthSync</span>();
</code></pre>
<h2 data-id="heading-8">4. æ–¹æ¡ˆå¯¹æ¯”ï¼šBroadcastChannel vs Others</h2>
<p>åœ¨å‰ç«¯é€šä¿¡çš„æ­¦å™¨åº“ä¸­ï¼Œé™¤äº† <code>BroadcastChannel</code>ï¼Œè¿˜æœ‰ <code>localStorage</code> äº‹ä»¶å’Œ <code>window.postMessage</code>ã€‚ä¸ºä»€ä¹ˆé¦–é€‰ <code>BroadcastChannel</code>ï¼Ÿ</p>








































<table><thead><tr><th>ç‰¹æ€§</th><th>BroadcastChannel</th><th>localStorage (storage äº‹ä»¶)</th><th>window.postMessage</th><th>MessageChannel</th></tr></thead><tbody><tr><td><strong>é€šä¿¡æ¨¡å¼</strong></td><td><strong>å¹¿æ’­ (ä¸€å¯¹å¤š)</strong></td><td>å¹¿æ’­ (ä¸€å¯¹å¤š)</td><td>ç‚¹å¯¹ç‚¹ (å«è·¨åŸŸ)</td><td>ç‚¹å¯¹ç‚¹ (åŒå‘æµ)</td></tr><tr><td><strong>åŒæºé™åˆ¶</strong></td><td>æ˜¯</td><td>æ˜¯</td><td>å¦ (å¯è·¨åŸŸ)</td><td>æ˜¯</td></tr><tr><td><strong>æ•°æ®ä¼ é€’</strong></td><td>å¯¹è±¡/ç»“æ„åŒ–å…‹éš†</td><td><strong>ä»…å­—ç¬¦ä¸²</strong></td><td>å¯¹è±¡/ç»“æ„åŒ–å…‹éš†</td><td>å¯¹è±¡/ç»“æ„åŒ–å…‹éš†</td></tr><tr><td><strong>å®ç°å¤æ‚åº¦</strong></td><td><strong>æç®€</strong></td><td>ç¹ç (éœ€åºåˆ—åŒ–/ååºåˆ—åŒ–)</td><td>å¤æ‚ (éœ€å¤„ç† Origin å®‰å…¨)</td><td>å¤æ‚ (éœ€ç»´æŠ¤ Port)</td></tr></tbody></table>
<h3 data-id="heading-9">ä¸ºä»€ä¹ˆå®ƒæ¯” localStorage å¥½ï¼Ÿ</h3>
<p>è€æ´¾çš„åšæ³•æ˜¯ç›‘å¬ <code>window</code> çš„ <code>storage</code> äº‹ä»¶ã€‚ä½† <code>storage</code> äº‹ä»¶æœ‰ä¸¤ä¸ªç—›ç‚¹ï¼š</p>
<ol>
<li>å®ƒ<strong>åªåœ¨åŒæºçš„å…¶ä»–é¡µé¢è§¦å‘</strong>ï¼ˆå½“å‰é¡µé¢ä¿®æ”¹ storage ä¸ä¼šè§¦å‘è‡ªå·±çš„äº‹ä»¶ï¼‰ã€‚</li>
<li>å®ƒ<strong>å¿…é¡»çœŸæ­£ä¿®æ”¹å­˜å‚¨ä¸­çš„æ•°æ®</strong>ï¼ˆä»…ä»…æ˜¯åŒæ­¥çŠ¶æ€å´æ±¡æŸ“äº† LocalStorage ç©ºé—´ï¼‰ã€‚</li>
<li>æ•°æ®åªèƒ½å­˜ä¸ºå­—ç¬¦ä¸²ï¼Œä¼ é€’å¯¹è±¡éœ€è¦ <code>JSON.parse/stringify</code>ï¼Œæ€§èƒ½è¾ƒå·®ã€‚</li>
</ol>
<p><code>BroadcastChannel</code> ä¸“ä¸ºæ­¤è®¾è®¡ï¼Œä¸æ¶‰åŠæŒä¹…åŒ–ï¼ŒAPI æ›´åŠ çº¯ç²¹ã€‚</p>
<h2 data-id="heading-10">5. æ³¨æ„äº‹é¡¹ä¸â€œå‘â€</h2>
<p>å°½ç®¡ <code>BroadcastChannel</code> å¾ˆå¼ºå¤§ï¼Œä½†åœ¨ä½¿ç”¨æ—¶ä»éœ€æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li><strong>åŒæºç­–ç•¥</strong> åªæœ‰åè®®ã€åŸŸåã€ç«¯å£å®Œå…¨ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œé¡µé¢æ‰èƒ½é€šè¿‡ <code>BroadcastChannel</code> é€šä¿¡ã€‚<code>localhost:8080</code> å’Œ <code>localhost:3000</code> æ˜¯æ— æ³•é€šä¿¡çš„ã€‚</li>
<li><strong>è‡ªè¨€è‡ªè¯­é—®é¢˜</strong> åœ¨<strong>åŒä¸€ä¸ªé¡µé¢</strong>ä¸Šä¸‹æ–‡ä¸­ï¼Œå¦‚æœä½ åˆ›å»ºäº† <code>BroadcastChannel</code> å¹¶å‘é€æ¶ˆæ¯ï¼Œè¯¥é¡µé¢è‡ªå·±ä¹Ÿä¼šæ”¶åˆ° <code>message</code> äº‹ä»¶ã€‚å¦‚æœéœ€è¦åŒºåˆ†â€œè‡ªå·±å‘çš„â€å’Œâ€œåˆ«äººå‘çš„â€ï¼Œéœ€è¦åœ¨æ¶ˆæ¯ä½“ä¸­åŠ å…¥å”¯ä¸€çš„ ID è¿›è¡Œè¿‡æ»¤ã€‚</li>
<li><strong>å…¼å®¹æ€§</strong> <code>BroadcastChannel</code> æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨ã€‚ä½† IE <strong>ä¸æ”¯æŒ</strong>ã€‚å¦‚æœä½ çš„é¡¹ç›®è¿˜éœ€è¦å…¼å®¹ IEï¼Œéœ€è¦ä½¿ç”¨ Polyfill æˆ–è€…é™çº§æ–¹æ¡ˆï¼ˆä¾‹å¦‚å›é€€åˆ° <code>localStorage</code>ï¼‰ã€‚</li>
<li><strong>å†…å­˜æ³„æ¼</strong> åœ¨ SPAï¼ˆå•é¡µåº”ç”¨ï¼‰ä¸­ï¼Œå¦‚æœåœ¨ç»„ä»¶ä¸­åˆ›å»ºäº† <code>BroadcastChannel</code>ï¼ŒåŠ¡å¿…åœ¨ç»„ä»¶å¸è½½æ—¶è°ƒç”¨ <code>close()</code>ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ— æ³•å›æ”¶ã€‚</li>
</ol>
<h2 data-id="heading-11">6. æ€»ç»“</h2>
<ul>
<li><code>MessageChannel</code> è§£å†³äº†<strong>ç²¾å‡†</strong>é€šä¿¡çš„é—®é¢˜ï¼ˆçº¿ç¨‹é—´ã€iframe é—´ï¼‰ã€‚</li>
<li><code>BroadcastChannel</code> è§£å†³äº†<strong>å¹¿åŸŸ</strong>é€šä¿¡çš„é—®é¢˜ï¼ˆå¤š Tab é¡µçŠ¶æ€åŒæ­¥ï¼‰ã€‚</li>
</ul>
<p>æŒæ¡è¿™ä¸¤ä¸ª APIï¼ŒåŸºæœ¬ä¸Šå°±è¦†ç›–äº†å‰ç«¯ 90% çš„é HTTP é€šä¿¡åœºæ™¯ã€‚ä¸‹æ¬¡å½“ä½ é‡åˆ°â€œå¤šæ ‡ç­¾é¡µæ•°æ®ä¸åŒæ­¥â€çš„é—®é¢˜æ—¶ï¼Œä¸è¦ç¬¬ä¸€æ—¶é—´æƒ³åˆ°è½®è¯¢ï¼Œè¯•è¯• <code>BroadcastChannel</code> è¿™ä¸ªâ€œå¹¿æ’­ç”µå°â€å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æ™ºèƒ½ä½“é«˜å¯é è®¾è®¡æ¨¡å¼ï¼šå¹¶è¡Œè¯„ä¼°]]></title>    <link>https://juejin.cn/post/7590681158717194280</link>    <guid>https://juejin.cn/post/7590681158717194280</guid>    <pubDate>2026-01-04T04:11:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590681158717194280" data-draft-id="7590778284758581283" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æ™ºèƒ½ä½“é«˜å¯é è®¾è®¡æ¨¡å¼ï¼šå¹¶è¡Œè¯„ä¼°"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-04T04:11:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿å‡¡"/> <meta itemprop="url" content="https://juejin.cn/user/290747765274222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æ™ºèƒ½ä½“é«˜å¯é è®¾è®¡æ¨¡å¼ï¼šå¹¶è¡Œè¯„ä¼°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/290747765274222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿å‡¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T04:11:27.000Z" title="Sun Jan 04 2026 04:11:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><em>æœ¬ç³»åˆ—ä»‹ç»å¢å¼ºç°ä»£æ™ºèƒ½ä½“ç³»ç»Ÿå¯é æ€§çš„è®¾è®¡æ¨¡å¼ï¼Œä»¥ç›´è§‚æ–¹å¼é€ä¸€ä»‹ç»æ¯ä¸ªæ¦‚å¿µï¼Œæ‹†è§£å…¶ç›®çš„ï¼Œç„¶åå®ç°ç®€å•å¯è¡Œçš„ç‰ˆæœ¬ï¼Œæ¼”ç¤ºå…¶å¦‚ä½•èå…¥ç°å®ä¸–ç•Œçš„æ™ºèƒ½ä½“ç³»ç»Ÿã€‚æœ¬ç³»åˆ—ä¸€å…± 14 ç¯‡æ–‡ç« ï¼Œè¿™æ˜¯ç¬¬ 3 ç¯‡ã€‚åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flevelup.gitconnected.com%2Fbuilding-the-14-key-pillars-of-agentic-ai-229e50f65986" target="_blank" title="https://levelup.gitconnected.com/building-the-14-key-pillars-of-agentic-ai-229e50f65986" ref="nofollow noopener noreferrer">Building the 14 Key Pillars of Agentic AI</a></em></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e0b614bca694e4bac537d8a9efb18aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768104687&amp;x-signature=MB6MP%2BfRUwu8wLrvnwEmJ28APfk%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–æ™ºèƒ½ä½“è§£å†³æ–¹æ¡ˆéœ€è¦è½¯ä»¶å·¥ç¨‹ç¡®ä¿ç»„ä»¶åè°ƒã€å¹¶è¡Œè¿è¡Œå¹¶ä¸ç³»ç»Ÿé«˜æ•ˆäº¤äº’ã€‚ä¾‹å¦‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FSpeculative_execution" target="_blank" title="https://en.wikipedia.org/wiki/Speculative_execution" ref="nofollow noopener noreferrer">é¢„æµ‹æ‰§è¡Œ</a>ï¼Œä¼šå°è¯•å¤„ç†å¯é¢„æµ‹æŸ¥è¯¢ä»¥<strong>é™ä½æ—¶å»¶</strong>ï¼Œæˆ–è€…è¿›è¡Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.arm.com%2Fcommunity%2Farm-community-blogs%2Fb%2Fembedded-and-microcontrollers-blog%2Fposts%2Fcomparing-lock-step-redundant-execution-versus-split-lock-technologies" target="_blank" title="https://developer.arm.com/community/arm-community-blogs/b/embedded-and-microcontrollers-blog/posts/comparing-lock-step-redundant-execution-versus-split-lock-technologies" ref="nofollow noopener noreferrer">å†—ä½™æ‰§è¡Œ</a>ï¼Œå³<strong>å¯¹åŒä¸€æ™ºèƒ½ä½“é‡å¤æ‰§è¡Œå¤šæ¬¡</strong>ä»¥é˜²å•ç‚¹æ•…éšœã€‚å…¶ä»–å¢å¼ºç°ä»£æ™ºèƒ½ä½“ç³»ç»Ÿå¯é æ€§çš„æ¨¡å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¹¶è¡Œå·¥å…·</strong>ï¼šæ™ºèƒ½ä½“åŒæ—¶æ‰§è¡Œç‹¬ç«‹ API è°ƒç”¨ä»¥éšè— I/O æ—¶å»¶ã€‚</li>
<li><strong>å±‚çº§æ™ºèƒ½ä½“</strong>ï¼šç®¡ç†è€…å°†ä»»åŠ¡æ‹†åˆ†ä¸ºç”±æ‰§è¡Œæ™ºèƒ½ä½“å¤„ç†çš„å°æ­¥éª¤ã€‚</li>
<li><strong>ç«äº‰æ€§æ™ºèƒ½ä½“ç»„åˆ</strong>ï¼šå¤šä¸ªæ™ºèƒ½ä½“æå‡ºç­”æ¡ˆï¼Œç³»ç»Ÿé€‰å‡ºæœ€ä½³ã€‚</li>
<li><strong>å†—ä½™æ‰§è¡Œ</strong>ï¼šå³ä¸¤ä¸ªæˆ–å¤šä¸ªæ™ºèƒ½ä½“è§£å†³åŒä¸€ä»»åŠ¡ä»¥æ£€æµ‹é”™è¯¯å¹¶æé«˜å¯é æ€§ã€‚</li>
<li><strong>å¹¶è¡Œæ£€ç´¢å’Œæ··åˆæ£€ç´¢</strong>ï¼šå¤šç§æ£€ç´¢ç­–ç•¥ååŒè¿è¡Œä»¥æå‡ä¸Šä¸‹æ–‡è´¨é‡ã€‚</li>
<li><strong>å¤šè·³æ£€ç´¢</strong>ï¼šæ™ºèƒ½ä½“é€šè¿‡è¿­ä»£æ£€ç´¢æ­¥éª¤æ”¶é›†æ›´æ·±å…¥ã€æ›´ç›¸å…³çš„ä¿¡æ¯ã€‚</li>
</ul>
<p>è¿˜æœ‰å¾ˆå¤šå…¶ä»–æ¨¡å¼ã€‚</p>
<p>æœ¬ç³»åˆ—å°†å®ç°æœ€å¸¸ç”¨æ™ºèƒ½ä½“æ¨¡å¼èƒŒåçš„åŸºç¡€æ¦‚å¿µï¼Œä»¥ç›´è§‚æ–¹å¼é€ä¸€ä»‹ç»æ¯ä¸ªæ¦‚å¿µï¼Œæ‹†è§£å…¶ç›®çš„ï¼Œç„¶åå®ç°ç®€å•å¯è¡Œçš„ç‰ˆæœ¬ï¼Œæ¼”ç¤ºå…¶å¦‚ä½•èå…¥ç°å®ä¸–ç•Œçš„æ™ºèƒ½ä½“ç³»ç»Ÿã€‚</p>
<p>æ‰€æœ‰ç†è®ºå’Œä»£ç éƒ½åœ¨ GitHub ä»“åº“é‡Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFareedKhan-dev%2Fagentic-parallelism" target="_blank" title="https://github.com/FareedKhan-dev/agentic-parallelism" ref="nofollow noopener noreferrer">ğŸ¤– Agentic Parallelism: A Practical Guide ğŸš€</a></p>
<p>ä»£ç åº“ç»„ç»‡å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">agentic-parallelism/
    â”œâ”€â”€ <span class="hljs-number">01</span>_parallel_tool_use.ipynb
    â”œâ”€â”€ <span class="hljs-number">02</span>_parallel_hypothesis.ipynb
    ...
    â”œâ”€â”€ <span class="hljs-number">06</span>_competitive_agent_ensembles.ipynb
    â”œâ”€â”€ <span class="hljs-number">07</span>_agent_assembly_line.ipynb
    â”œâ”€â”€ <span class="hljs-number">08</span>_decentralized_blackboard.ipynb
    ...
    â”œâ”€â”€ <span class="hljs-number">13</span>_parallel_context_preprocessing.ipynb
    â””â”€â”€ <span class="hljs-number">14</span>_parallel_multi_hop_retrieval.ipynb
</code></pre>
<hr/>
<h2 data-id="heading-0">å¼ºå¥æ²»ç†çš„å¹¶è¡Œè¯„ä¼°</h2>
<p>åœ¨ä¹‹å‰çš„æ¨¡å¼ä¸­ï¼Œå³ä½¿äº§ç”Ÿå¤šä¸ªæƒ³æ³•ï¼Œä»ç„¶ä¾èµ–å•ä¸€è¯„ä¼°è·¯å¾„ï¼Œæ„å‘³ç€æ™ºèƒ½ä½“è§£å†³æ–¹æ¡ˆä»ç„¶å±€é™äºå•ä¸€è¯„ä¼°è§†è§’â€¦â€¦ä½†å¯¹äºå¤æ‚å†³ç­–ï¼Œéœ€è¦ä»å¤šä¸ªä¸åŒè§’åº¦è¿›è¡Œè¯„ä¼°ã€‚</p>
<p><strong>å¹¶è¡Œè¯„ä¼°ï¼ˆParallel Evaluationï¼‰</strong> æˆ–å¤šé‡æ‰¹è¯„åæ€ï¼ˆMulti-Critic Reflectionï¼‰æ˜¯ä¸€ç§ç»“æ„æ¨¡å¼ï¼Œä¸å†ä¾èµ–å•ä¸€è¯„ä¼°â€¦â€¦</p>
<ol>
<li>åˆ›å»ºä¸€ç»„ AI è¯„ä¼°å™¨ï¼Œä¸€æ¡å†…å®¹ä¼šåŒæ—¶å‘é€ç»™æ‰€æœ‰è¯„ä¼°å™¨ï¼Œæ¯ä¸ªè¯„ä¼°å™¨ä»ç‹¬ç‰¹ã€ä¸“å®¶çš„è§†è§’è¿›è¡Œè¯„ä¼°ã€‚</li>
<li>è¿™äº›å¹¶è¡Œåé¦ˆéšåç”±æœ€ç»ˆç¼–è¾‘ä»£ç†æ”¶é›†å¹¶ç»¼åˆï¼Œåšå‡ºå…¨é¢ä¸”æ˜æ™ºçš„å†³ç­–ã€‚</li>
</ol>
<p>æˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ªå†…å®¹å®¡æŸ¥ç³»ç»Ÿï¼Œè‰ç¨¿å…ˆäº¤ç»™ä¸€ç»„å¹¶è¡Œè¯„ä¼°å™¨ï¼Œæœ€ç»ˆç”±ç¼–è¾‘å™¨æ ¹æ®é›†ä½“åé¦ˆåšå‡ºå†³å®šã€‚</p>
<p>é¦–å…ˆï¼Œä¸ºäº†ç¡®ä¿è¯„ä¼°å™¨æä¾›ä¸€è‡´ä¸”æœºå™¨å¯è¯»çš„åé¦ˆï¼Œä¸ºè¾“å‡ºå®šä¹‰ Pydantic æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.pydantic_v1 <span class="hljs-keyword">import</span> BaseModel, Field
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Literal</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Critique</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""A Pydantic model for a structured critique from a single, specialist critic."""</span>
    <span class="hljs-comment"># å…³äºå†…å®¹æ˜¯å¦ç¬¦åˆç‰¹å®šæ ‡å‡†çš„æ˜ç¡®çš„äºŒå…ƒå†³å®š</span>
    is_compliant: <span class="hljs-built_in">bool</span> = Field(description=<span class="hljs-string">"Whether the content meets the specific criteria of this critic."</span>)
    <span class="hljs-comment"># è¯¦ç»†ã€å¯æ“ä½œçš„åé¦ˆï¼Œå¯¹å†³ç­–åšå‡ºè§£é‡Š</span>
    feedback: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"Detailed feedback explaining why the content is or is not compliant. Provide actionable suggestions if non-compliant."</span>)
</code></pre>
<p><code>Critique</code> ç±»æ˜¯æ­£å¼é€šä¿¡åè®®ï¼Œç¡®ä¿æ¯ä¸ªè¯„ä¼°å™¨éƒ½èƒ½æä¾›æ¸…æ™°çš„ <code>is_compliant</code> è£å®šä»¥åŠæ–‡æœ¬åé¦ˆ <code>feedback</code>ï¼Œä½¿è¾“å‡ºå¯é ä¸”æ˜“äºè¢«æœ€ç»ˆç¼–è¾‘å™¨è§£æã€‚</p>
<p>æ¥ä¸‹æ¥å®šä¹‰ <code>GraphState</code>ï¼Œè·Ÿè¸ªæ­£åœ¨å®¡æŸ¥çš„å†…å®¹ä»¥åŠå¹¶è¡Œè¯„ä¼°ç»„çš„è¯„ä¼°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict, Annotated, <span class="hljs-type">Dict</span>
<span class="hljs-keyword">import</span> operator

<span class="hljs-keyword">class</span> <span class="hljs-title class_">GraphState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):

    content_to_review: <span class="hljs-built_in">str</span>

    <span class="hljs-comment"># 'critiques' æ˜¯å­—å…¸ï¼Œå…¶ä¸­é”®æ˜¯è¯„ä¼°å™¨åå­—ï¼Œå€¼æ˜¯ç»“æ„åŒ–çš„è¯„ä¼°å¯¹è±¡ã€‚</span>
    <span class="hljs-comment"># 'operator.update' å½’çº¦å‡½æ•°å¯¹äºåˆå¹¶æ¥è‡ªå¹¶è¡Œåˆ†æ”¯çš„è¾“å‡ºå¿…ä¸å¯å°‘</span>
    critiques: Annotated[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, Critique], operator.update]
    final_decision: <span class="hljs-built_in">dict</span> <span class="hljs-comment"># ç®€å•èµ·è§ï¼Œæ”¹ä¸ºå­—å…¸</span>
    performance_log: Annotated[<span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>], operator.add]
</code></pre>
<p><code>GraphState</code> ä¸­çš„ <code>critiques</code> å­—å…¸ä¸ <code>operator.update</code> å½’çº¦å‡½æ•°ç»“åˆï¼Œå¯ä»¥èšåˆå¹¶è¡Œåé¦ˆï¼Œè‡ªåŠ¨å°†æ¯ä¸ªåˆ†æ”¯çš„ç»“æ„åŒ– <code>Critique</code> å¯¹è±¡æ”¶é›†æˆä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡ï¼Œç„¶åå†ä¼ é€’ç»™æœ€ç»ˆç¼–è¾‘å™¨ã€‚</p>
<p>ç°åœ¨ï¼Œå®šä¹‰ç³»ç»Ÿçš„æ ¸å¿ƒ â€”â€” è¯„ä¼°èŠ‚ç‚¹ï¼Œå®ç°è¯„ä¼°å™¨ï¼ˆå“ç‰Œå£°éŸ³åˆ†æå¸ˆï¼‰å’Œæœ€ç»ˆç¼–è¾‘å™¨ï¼Œä¸è¿‡ GitHub ä¸Šæä¾›çš„ Jupyter Notebook å®ç°æ›´æ·±å…¥æ›´å¤æ‚ã€‚å…¶ä»–è¯„ä¼°å™¨ï¼ˆäº‹å®æ ¸æŸ¥å‘˜ã€é£é™©è¯„ä¼°å‘˜ï¼‰éµå¾ªç›¸åŒæ¨¡å¼ï¼Œä½†æç¤ºä¸åŒã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> time

<span class="hljs-comment"># å“ç‰Œå£°éŸ³åˆ†æå¸ˆèŠ‚ç‚¹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">brand_voice_node</span>(<span class="hljs-params">state: GraphState</span>):
    <span class="hljs-string">"""A simple critic that evaluates content against pre-defined brand voice guidelines."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"--- CRITIC: Brand Voice Analyst is reviewing... ---"</span>)
    start_time = time.time()
    
    <span class="hljs-comment"># ä¸€æ¡ç®€å•é“¾: æç¤ºè¯ -&gt; LLM -&gt; ç»“æ„åŒ–è¾“å‡º</span>
    brand_chain = brand_voice_prompt | llm.with_structured_output(Critique)
    critique = brand_chain.invoke({<span class="hljs-string">"content_to_review"</span>: state[<span class="hljs-string">'content_to_review'</span>]})
    
    execution_time = time.time() - start_time
    log_entry = <span class="hljs-string">f"[BrandVoice] Completed in <span class="hljs-subst">{execution_time:<span class="hljs-number">.2</span>f}</span>s."</span>
    <span class="hljs-built_in">print</span>(log_entry)
    
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"critiques"</span>: {<span class="hljs-string">"BrandVoice"</span>: critique}, <span class="hljs-string">"performance_log"</span>: [log_entry]}
<span class="hljs-comment"># æ€»ç¼–è¾‘èŠ‚ç‚¹ï¼ˆèšåˆå’Œå†³ç­–ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">chief_editor_node</span>(<span class="hljs-params">state: GraphState</span>):
    <span class="hljs-string">"""The final node: aggregates all critiques and makes a final, justified decision."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"--- EDITOR: Chief Editor is making a decision... ---"</span>)
    start_time = time.time()
    
    <span class="hljs-comment"># å°†æ¥è‡ªçŠ¶æ€çš„ç»“æ„åŒ–è¯„è®ºæ ¼å¼åŒ–ä¸ºç¼–è¾‘å™¨ä½¿ç”¨çš„å•ä¸ªå­—ç¬¦ä¸²æå‡</span>
    critiques_str = <span class="hljs-string">""</span>
    <span class="hljs-keyword">for</span> critic_name, critique_obj <span class="hljs-keyword">in</span> state[<span class="hljs-string">'critiques'</span>].items():
        critiques_str += <span class="hljs-string">f"- <span class="hljs-subst">{critic_name}</span> Critique:\n  - Compliant: <span class="hljs-subst">{critique_obj.is_compliant}</span>\n  - Feedback: <span class="hljs-subst">{critique_obj.feedback}</span>\n\n"</span>
    
    <span class="hljs-comment"># åˆ›å»ºç¼–è¾‘å™¨é“¾</span>
    editor_chain = chief_editor_prompt | llm.with_structured_output(<span class="hljs-built_in">dict</span>) <span class="hljs-comment"># Using dict for simplicity</span>
    final_decision = editor_chain.invoke({
        <span class="hljs-string">"content_to_review"</span>: state[<span class="hljs-string">'content_to_review'</span>],
        <span class="hljs-string">"critiques"</span>: critiques_str
    })
    
    execution_time = time.time() - start_time
    log_entry = <span class="hljs-string">f"[ChiefEditor] Completed in <span class="hljs-subst">{execution_time:<span class="hljs-number">.2</span>f}</span>s."</span>
    <span class="hljs-built_in">print</span>(log_entry)
    
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"final_decision"</span>: final_decision, <span class="hljs-string">"performance_log"</span>: [log_entry]}
</code></pre>
<p>ä¸¤ä¸ªèŠ‚ç‚¹ä»£è¡¨æ ¸å¿ƒçš„æ‰‡å‡ºå’Œæ‰‡å…¥é€»è¾‘ã€‚<code>brand_voice_node</code> æ˜¯ä¸“ä¸šè¯„ä¼°å™¨æ¨¡æ¿ï¼Œæ¯ä¸ªè¯„ä¼°å™¨ç‹¬ç«‹è¿ä½œã€‚<code>chief_editor_node</code> æ˜¯æ±‡æ€»èŠ‚ç‚¹ï¼Œå°†å¤šæ–¹åé¦ˆç»¼åˆæˆå•ä¸€å¯æ‰§è¡Œå†³ç­–ã€‚</p>
<p>å°±åƒä¹‹å‰çš„å®ç°ä¸€æ ·ï¼Œç»„è£…å®Œæ•´çš„å›¾ï¼Œè®¾ç½®å…¥å£ç‚¹ï¼ŒåŒæ—¶å‘ä¸‰ä¸ªè¯„ä¼°å™¨æ‰‡å‡ºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, END

<span class="hljs-comment"># åˆå§‹åŒ–æ–°å›¾</span>
workflow = StateGraph(GraphState)

<span class="hljs-comment"># ä¸ºè¯„ä¼°å™¨å’Œç¼–è¾‘å™¨å®šä¹‰èŠ‚ç‚¹</span>
workflow.add_node(<span class="hljs-string">"fact_checker"</span>, fact_checker_node)
workflow.add_node(<span class="hljs-string">"brand_voice_analyst"</span>, brand_voice_node)
workflow.add_node(<span class="hljs-string">"risk_assessor"</span>, risk_assessor_node)
workflow.add_node(<span class="hljs-string">"chief_editor"</span>, chief_editor_node)

<span class="hljs-comment"># å…¥å£ç‚¹æ˜¯ä¸€ä¸ªèŠ‚ç‚¹åˆ—è¡¨ï¼Œå‘Šè¯‰ LangGraph å¹¶è¡Œè¿è¡Œ</span>
workflow.set_entry_point([<span class="hljs-string">"fact_checker"</span>, <span class="hljs-string">"brand_voice_analyst"</span>, <span class="hljs-string">"risk_assessor"</span>])

<span class="hljs-comment"># åœ¨æ‰€æœ‰è¯„ä¼°å™¨èŠ‚ç‚¹å®Œæˆåï¼Œåˆå¹¶ç»“æœï¼Œå®šä¹‰ä¸€ä¸ªé™æ€è¾¹æ¥æ‰‡å…¥ä¸»ç¼–è¾‘å™¨</span>
workflow.add_edge([<span class="hljs-string">"fact_checker"</span>, <span class="hljs-string">"brand_voice_analyst"</span>, <span class="hljs-string">"risk_assessor"</span>], <span class="hljs-string">"chief_editor"</span>)

<span class="hljs-comment"># ç¼–è¾‘å™¨çš„å†³å®šå°±æ˜¯æœ€åä¸€æ­¥</span>
workflow.add_edge(<span class="hljs-string">"chief_editor"</span>, END)

<span class="hljs-comment"># ç¼–è¯‘æˆå¯è¿è¡Œåº”ç”¨ç¨‹åº</span>
app = workflow.<span class="hljs-built_in">compile</span>()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Graph constructed and compiled successfully."</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3646eb59c0b42b0acb14d86fd8d2503~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768104687&amp;x-signature=r0E5JItMHqbzEu53KFXSn%2BXscuQ%3D" alt="å¹¶è¡Œè¯„ä¼°" loading="lazy"/></p>
<p>åˆ†æä¸€ä¸‹æ€§èƒ½ï¼Œçœ‹çœ‹è¿™ç§å¹¶è¡Œå·¥ä½œæµç¨‹çš„æ˜æ˜¾ä¼˜åŠ¿ã€‚</p>
<pre><code class="hljs language-python" lang="python">critic_times = []
editor_time = <span class="hljs-number">0</span>

<span class="hljs-comment"># è§£ææ€§èƒ½æ—¥å¿—ï¼Œæå–å®šæ—¶æ•°æ®ã€‚</span>
<span class="hljs-keyword">for</span> log <span class="hljs-keyword">in</span> final_state[<span class="hljs-string">'performance_log'</span>]:
    <span class="hljs-comment"># å‡è®¾æ—¥å¿—æ ¼å¼ä¸º '[NodeName] Completed in X.XXs.'</span>
    time_val = <span class="hljs-built_in">float</span>(log.split(<span class="hljs-string">' '</span>)[-<span class="hljs-number">1</span>].replace(<span class="hljs-string">'s.'</span>, <span class="hljs-string">''</span>))
    <span class="hljs-keyword">if</span> <span class="hljs-string">"[ChiefEditor]"</span> <span class="hljs-keyword">in</span> log:
        editor_time = time_val
    <span class="hljs-keyword">else</span>:
        critic_times.append(time_val)

<span class="hljs-comment"># å¹¶è¡Œé˜¶æ®µçš„æ—¶é—´æ˜¯æ‰§è¡Œæ—¶é—´æœ€é•¿çš„è¯„ä¼°å™¨çš„æ—¶é—´</span>
parallel_critic_time = <span class="hljs-built_in">max</span>(critic_times) <span class="hljs-keyword">if</span> critic_times <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>

<span class="hljs-comment"># å¯¹äºé¡ºåºæ¨¡æ‹Ÿï¼Œå°†æ—¶é—´åŠ èµ·æ¥</span>
sequential_critic_time = <span class="hljs-built_in">sum</span>(critic_times)

<span class="hljs-comment"># å·¥ä½œæµçš„æ€»æ—¶é—´</span>
total_time = parallel_critic_time + editor_time
time_saved = sequential_critic_time - parallel_critic_time
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Total Execution Time: <span class="hljs-subst">{total_time:<span class="hljs-number">.2</span>f}</span> seconds\n"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Breakdown:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f" - Parallel Critics (longest path): <span class="hljs-subst">{parallel_critic_time:<span class="hljs-number">.2</span>f}</span> seconds"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f" - Chief Editor: <span class="hljs-subst">{editor_time:<span class="hljs-number">.2</span>f}</span> seconds\n"</span>)
</code></pre>
<p>çœ‹çœ‹è¯„ä¼°ç»“æœâ€¦â€¦</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#### è¾“å‡º ####</span>
=============================================================
                  FINAL GOVERNANCE DECISION
=============================================================

Final Decision: Request Revisions

Editors Summary:
The post <span class="hljs-keyword">is</span> non-compliant across the board. The Fact-Checker found unsupported claims, the Risk Assessor identified significant legal <span class="hljs-keyword">and</span> reputational risks <span class="hljs-keyword">with</span> the terms <span class="hljs-string">'guaranteed'</span> <span class="hljs-keyword">and</span> <span class="hljs-string">'cures procrastination'</span>, <span class="hljs-keyword">and</span> the Brand Voice Analyst noted that the tone <span class="hljs-keyword">is</span> overly hyped <span class="hljs-keyword">and</span> exaggerated.

Revision Instructions:
Please remove the word <span class="hljs-string">'guaranteed'</span>. Rephrase the <span class="hljs-string">'500% faster'</span> claim to be more specific <span class="hljs-keyword">and</span> verifiable, <span class="hljs-keyword">for</span> example, <span class="hljs-string">'up to 5x faster in specific benchmarks'</span>. Remove the unsupported claim about curing procrastination entirely. Tone down the language to be more professional <span class="hljs-keyword">and</span> focus on the practical benefits <span class="hljs-keyword">for</span> the user.

============================================================
                      PERFORMANCE ANALYSIS
============================================================
Total Execution Time: <span class="hljs-number">15.66</span> seconds

Breakdown:
 - Parallel Critics (longest path): <span class="hljs-number">9.21</span> seconds
 - Chief Editor: <span class="hljs-number">6.45</span> seconds
</code></pre>
<p>ä¸‰ä¸ªè¯„ä¼°èŠ‚ç‚¹å¹¶è¡Œè¿è¡Œã€‚å¦‚æœæŒ‰é¡ºåºæ‰§è¡Œï¼Œè¯¥é˜¶æ®µå°†è€—æ—¶ 19.24sã€‚é€šè¿‡å¹¶è¡Œè¿è¡Œï¼Œæ—¶é—´ä»…ä¸º 9.21sç§’ï¼ˆæœ€æ…¢è¯„ä¼°å™¨çš„æ—¶é—´ï¼‰ã€‚</p>
<p>è¯„ä¼°é˜¶æ®µèŠ‚çœäº† 10.03s çš„æ—¶é—´ï¼Œæ—¶å»¶å‡å°‘äº† 52%ã€‚å®šé‡è§’åº¦çœ‹ï¼Œç»“æœè¿œä¼˜äºå•ä¸€è¯„ä¼°ã€‚</p>
<p>æˆ‘ä»¬ä»ä¸‰ä¸ªä¸åŒè§’åº¦æ”¶åˆ°äº†æ·±å…¥ä¸”ä¸“ä¸šçš„åé¦ˆï¼Œè¿™ç§å¤šæ–¹é¢è¯„ä¼°è®©ä¸»ç¼–è¾‘å™¨èƒ½å¤Ÿåšå‡ºæ˜æ™ºçš„å†³å®šã€‚</p>
<hr/>
<blockquote>
<p>Hiï¼Œæˆ‘æ˜¯ä¿å‡¡ï¼Œä¸€åå…¼å…·æŠ€æœ¯æ·±åº¦ä¸ç®¡ç†è§†é‡çš„æŠ€æœ¯ç®¡ç†è€…ã€‚æ›¾å°±èŒäº Motorolaï¼Œç°ä»»èŒäº Mavenirï¼Œå¤šå¹´å¸¦é¢†æŠ€æœ¯å›¢é˜Ÿï¼Œèšç„¦åç«¯æ¶æ„ä¸äº‘åŸç”Ÿï¼ŒæŒç»­å…³æ³¨ AI ç­‰å‰æ²¿æ–¹å‘ï¼Œä¹Ÿå…³æ³¨äººçš„æˆé•¿ï¼Œç¬ƒä¿¡æŒç»­å­¦ä¹ çš„åŠ›é‡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä¼šåˆ†äº«æŠ€æœ¯å®è·µä¸æ€è€ƒã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDeepNoMindã€ï¼Œæ˜Ÿæ ‡ä¸è¿·è·¯ã€‚ä¹Ÿæ¬¢è¿è®¿é—®ç‹¬ç«‹ç«™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.deepnomind.com" title="https://www.deepnomind.com" target="_blank" ref="nofollow noopener noreferrer">www.DeepNoMind.com</a>ï¼Œä¸€èµ·äº¤æµæˆé•¿ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨å¿«é€Ÿå˜åŒ–çš„AIä¸–ç•Œï¼ŒLangChain å¦‚ä½•ä¸ºå¼€å‘è€…çš„æŠ€æœ¯é€‰æ‹©æä¾›â€œç¡®å®šæ€§â€ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7591085154977513498</link>    <guid>https://juejin.cn/post/7591085154977513498</guid>    <pubDate>2026-01-04T05:14:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591085154977513498" data-draft-id="7591085154977447962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨å¿«é€Ÿå˜åŒ–çš„AIä¸–ç•Œï¼ŒLangChain å¦‚ä½•ä¸ºå¼€å‘è€…çš„æŠ€æœ¯é€‰æ‹©æä¾›â€œç¡®å®šæ€§â€ï¼Ÿ"/> <meta itemprop="keywords" content="LLM,å¼€æº"/> <meta itemprop="datePublished" content="2026-01-04T05:14:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å‚æŠ€æœ¯æ€»ç›‘ä¸‹æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/4091714106833577"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨å¿«é€Ÿå˜åŒ–çš„AIä¸–ç•Œï¼ŒLangChain å¦‚ä½•ä¸ºå¼€å‘è€…çš„æŠ€æœ¯é€‰æ‹©æä¾›â€œç¡®å®šæ€§â€ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4091714106833577/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å‚æŠ€æœ¯æ€»ç›‘ä¸‹æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:14:41.000Z" title="Sun Jan 04 2026 05:14:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">LangChain æŠ€æœ¯æ¶æ„æ·±åº¦è§£æï¼šæ„å»ºæ ‡å‡†åŒ–ã€å¯ç»„åˆçš„LLMåº”ç”¨æ¡†æ¶</h2>
<h3 data-id="heading-1">1. æ•´ä½“ä»‹ç»</h3>
<h4 data-id="heading-2">é¡¹ç›®æ¦‚å†µ</h4>
<p>LangChain æ˜¯ç”± LangChain AI å›¢é˜Ÿå¼€å‘å¹¶ç»´æŠ¤çš„å¼€æºæ¡†æ¶ï¼Œé¡¹ç›®æ‰˜ç®¡äº GitHubï¼Œåœ°å€ä¸º <code>github.com/langchain-ai/langchain</code>ã€‚ä½œä¸ºå½“å‰ AI å·¥ç¨‹åŒ–é¢†åŸŸçš„å…³é”®åŸºç¡€è®¾æ–½ä¹‹ä¸€ï¼Œè¯¥é¡¹ç›®è·å¾—äº†å¹¿æ³›çš„ç¤¾åŒºå…³æ³¨ä¸é‡‡çº³ï¼Œå…¶ Star ä¸ Fork æ•°é‡åœ¨åŒç±»é¡¹ç›®ä¸­ä½å±…å‰åˆ—ï¼Œè¿™åæ˜ äº†å…¶åœ¨è§£å†³å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åº”ç”¨å¼€å‘å…±æ€§éš¾é¢˜ä¸Šçš„æœ‰æ•ˆæ€§ä¸ç”Ÿæ€æ´»åŠ›ã€‚</p>
<h4 data-id="heading-3">æ ¸å¿ƒä»·å€¼ä¸åŠŸèƒ½å®šä½</h4>
<p>LangChain çš„æ ¸å¿ƒå®šä½æ˜¯<strong>ä¸ºåŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰å’Œåº”ç”¨ç¨‹åºæä¾›ä¸€ä¸ªæ ‡å‡†åŒ–ã€æ¨¡å—åŒ–çš„å¼€å‘æ¡†æ¶</strong>ã€‚å®ƒå¹¶éä¸€ä¸ªå•ä¸€çš„è¿è¡Œæ—¶æˆ–æœåŠ¡ï¼Œè€Œæ˜¯ä¸€å¥—æ—¨åœ¨æŠ½è±¡å’Œç®€åŒ–LLMåº”ç”¨å¤æ‚æ€§çš„å¼€å‘åº“ä¸å·¥å…·é›†ã€‚</p>
<p>å…¶æ ¸å¿ƒåŠŸèƒ½å¯æ¦‚æ‹¬ä¸ºï¼š</p>
<ul>
<li><strong>æä¾›æ ‡å‡†åŒ–æ¥å£</strong>ï¼šä¸ºæ¨¡å‹ï¼ˆèŠå¤©ã€åµŒå…¥ï¼‰ã€å‘é‡å­˜å‚¨ã€æ£€ç´¢å™¨ç­‰å¼‚è´¨ç»„ä»¶å®šä¹‰ç»Ÿä¸€æ¥å£ï¼Œå®ç°æŠ€æœ¯æ ˆçš„æ¾è€¦åˆã€‚</li>
<li><strong>å®ç°ç»„ä»¶å¯ç»„åˆæ€§</strong>ï¼šé€šè¿‡â€œé“¾ï¼ˆChainï¼‰â€è¿™ä¸€æ ¸å¿ƒæŠ½è±¡ï¼Œå…è®¸å¼€å‘è€…åƒæ­ç§¯æœ¨ä¸€æ ·å°†å¤šä¸ªç»„ä»¶ä¸²è”æˆå¤æ‚çš„å·¥ä½œæµã€‚</li>
<li><strong>æ„å»ºæ™ºèƒ½ä½“åŸºåº§</strong>ï¼šæä¾›æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ„å»ºæ‰€éœ€çš„åŸºç¡€è®¾æ–½ï¼ŒåŒ…æ‹¬å·¥å…·è°ƒç”¨ï¼ˆTool Callingï¼‰ã€è®°å¿†ï¼ˆMemoryï¼‰å’Œè§„åˆ’ï¼ˆPlanningï¼‰ç­‰æ ¸å¿ƒæ¦‚å¿µçš„åŸç”Ÿæ”¯æŒã€‚</li>
<li><strong>é›†æˆä¸°å¯Œç”Ÿæ€</strong>ï¼šå†…ç½®æˆ–é€šè¿‡åˆä½œä¼™ä¼´åŒ…é›†æˆäº†å¤§é‡ä¸»æµçš„æ¨¡å‹æä¾›å•†ï¼ˆOpenAIã€Anthropicç­‰ï¼‰ã€å‘é‡æ•°æ®åº“ï¼ˆQdrantã€Pineconeç­‰ï¼‰å’Œå¤–éƒ¨å·¥å…·ï¼Œæå¤§é™ä½äº†é›†æˆæˆæœ¬ã€‚</li>
<li><strong>æä¾›ç”Ÿäº§çº§å·¥å…·é“¾</strong>ï¼šé€šè¿‡ CLIã€LangServeï¼ˆæœåŠ¡åŒ–éƒ¨ç½²ï¼‰ã€LangSmithï¼ˆå¯è§‚æµ‹æ€§å¹³å°ï¼‰ç­‰é…å¥—å·¥å…·ï¼Œæ”¯æ’‘åº”ç”¨ä»å¼€å‘ã€è°ƒè¯•åˆ°éƒ¨ç½²ã€ç›‘æ§çš„å…¨ç”Ÿå‘½å‘¨æœŸã€‚</li>
</ul>
<h4 data-id="heading-4">è§£å†³çš„é—®é¢˜ä¸ç›®æ ‡åœºæ™¯</h4>
<p>åœ¨ LangChain å‡ºç°ä¹‹å‰ï¼Œå¼€å‘LLMåº”ç”¨é¢ä¸´ä¸€ç³»åˆ—ç¢ç‰‡åŒ–æŒ‘æˆ˜ï¼š</p>
<ol>
<li><strong>æ¥å£å¼‚æ„</strong>ï¼šä¸åŒæ¨¡å‹æä¾›å•†ï¼ˆå¦‚OpenAIã€Anthropicï¼‰çš„APIè®¾è®¡ã€å‚æ•°å‘½åã€å“åº”æ ¼å¼å„å¼‚ï¼Œåˆ‡æ¢æˆæœ¬é«˜ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡ç®¡ç†å¤æ‚</strong>ï¼šå¦‚ä½•å¤„ç†é•¿å¯¹è¯å†å²ã€å®ç°è®°å¿†ã€ä»¥åŠå°†å¤–éƒ¨çŸ¥è¯†ï¼ˆå¦‚å‘é‡æ£€ç´¢ç»“æœï¼‰æ³¨å…¥åˆ°æç¤ºè¯ä¸­ï¼Œéœ€è¦å¤§é‡å®šåˆ¶åŒ–ä»£ç ã€‚</li>
<li><strong>å·¥å…·è°ƒç”¨ä¸æµç¨‹ç¼–æ’å›°éš¾</strong>ï¼šè®©LLMæ ¹æ®éœ€æ±‚è°ƒç”¨å¤–éƒ¨å·¥å…·ï¼ˆå¦‚æœç´¢ã€è®¡ç®—ã€APIï¼‰ï¼Œå¹¶ç®¡ç†å¤šæ­¥éª¤çš„ã€æœ‰çŠ¶æ€çš„æ‰§è¡Œæµç¨‹ï¼Œç¼ºä¹é€šç”¨èŒƒå¼ã€‚</li>
<li><strong>åŸå‹åˆ°ç”Ÿäº§çš„é¸¿æ²Ÿ</strong>ï¼šå®éªŒé˜¶æ®µçš„è„šæœ¬éš¾ä»¥ç›´æ¥è½¬åŒ–ä¸ºå¯ç»´æŠ¤ã€å¯ç›‘æ§ã€å¯æ‰©å±•çš„ç”Ÿäº§æœåŠ¡ã€‚</li>
</ol>
<p>LangChain ä¸»è¦æœåŠ¡äºä»¥ä¸‹äººç¾¤å’Œåœºæ™¯ï¼š</p>
<ul>
<li><strong>AIåº”ç”¨å¼€å‘è€…</strong>ï¼šéœ€è¦å¿«é€Ÿæ„å»ºå…·å¤‡æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ã€æ™ºèƒ½ä½“ã€å¤æ‚å·¥ä½œæµç­‰èƒ½åŠ›çš„åº”ç”¨ã€‚</li>
<li><strong>ä¼ä¸šæŠ€æœ¯å›¢é˜Ÿ</strong>ï¼šå¯»æ±‚å°†LLMèƒ½åŠ›é›†æˆåˆ°ç°æœ‰ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œå¹¶éœ€è¦æ ‡å‡†åŒ–ã€å¯ç»´æŠ¤çš„å·¥ç¨‹å®è·µã€‚</li>
<li><strong>ç ”ç©¶è€…ä¸æ¢ç´¢è€…</strong>ï¼šéœ€è¦æ¨¡å—åŒ–å·¥å…·æ¥å¿«é€Ÿå®éªŒä¸åŒçš„æ¨¡å‹ã€æç¤ºè¯ç­–ç•¥å’Œå·¥ä½œæµç»„åˆã€‚</li>
</ul>
<h4 data-id="heading-5">è§£å†³æ–¹æ¡ˆä¸æŠ€æœ¯ä¼˜åŠ¿</h4>
<p>LangChain æä¾›çš„æ˜¯ä¸€ç§<strong>åŸºäºæŠ½è±¡å±‚å’Œå¯ç»„åˆæ¨¡å¼</strong>çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<ul>
<li><strong>æ—§æ–¹å¼</strong>ï¼šå¼€å‘è€…éœ€è¦ä¸ºæ¯ä¸ªé¡¹ç›®ç¼–å†™å¤§é‡èƒ¶æ°´ä»£ç ï¼Œç›´æ¥è°ƒç”¨å„å¼‚çš„æ¨¡å‹SDKï¼Œæ‰‹åŠ¨æ‹¼æ¥æç¤ºè¯ï¼Œç®¡ç†çŠ¶æ€ï¼Œå¹¶å¤„ç†é”™è¯¯å’Œé‡è¯•é€»è¾‘ã€‚ä»£ç å¤ç”¨æ€§å·®ï¼Œä¸”ç´§è€¦åˆäºç‰¹å®šæŠ€æœ¯æ ˆã€‚</li>
<li><strong>æ–°æ–¹å¼</strong>ï¼š
<ol>
<li><strong>å®šä¹‰é€šç”¨æ¥å£ï¼ˆå¦‚ <code>BaseChatModel</code>, <code>VectorStore</code>ï¼‰</strong>ï¼šæ‰€æœ‰å…·ä½“å®ç°ï¼ˆå¦‚<code>ChatOpenAI</code>, <code>QdrantVectorStore</code>ï¼‰éƒ½éµå¾ªåŒä¸€å¥—æ¥å£ï¼Œä½¿æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä¸å…·ä½“æŠ€æœ¯å®ç°è§£è€¦ã€‚</li>
<li><strong>å¼•å…¥é“¾ï¼ˆChainï¼‰å’Œæ™ºèƒ½ä½“ï¼ˆAgentï¼‰æŠ½è±¡</strong>ï¼šå°†å¤šæ­¥éª¤ã€æœ‰æ¡ä»¶çš„å·¥ä½œæµå°è£…ä¸ºå¯å¤ç”¨çš„å•å…ƒã€‚é“¾æ”¯æŒåŒæ­¥/å¼‚æ­¥è°ƒç”¨ã€æµå¼å“åº”ã€æ‰¹å¤„ç†ç­‰ç»Ÿä¸€æ¨¡å¼ã€‚</li>
<li><strong>æä¾›ä¸°å¯Œçš„â€œè¿æ¥å™¨â€</strong>ï¼šå¼€ç®±å³ç”¨çš„é›†æˆå‡å°‘äº†å¯¹æ¥å¤–éƒ¨æœåŠ¡çš„ä»£ç é‡ã€‚</li>
<li><strong>é…å¥—å¼€å‘è¿ç»´å·¥å…·</strong>ï¼šCLIç”¨äºé¡¹ç›®ç®¡ç†ï¼ŒLangServeç”¨äºå°†ä»»ä½•é“¾å¿«é€Ÿéƒ¨ç½²ä¸ºAPIæœåŠ¡ï¼ŒLangSmithç”¨äºå…¨é“¾è·¯è¿½è¸ªå’Œè¯„ä¼°ã€‚</li>
</ol>
</li>
</ul>
<p><strong>ä¼˜åŠ¿</strong>åœ¨äº<strong>æå‡å¼€å‘æ•ˆç‡</strong>ã€<strong>ä¿éšœä»£ç è´¨é‡ä¸å¯ç»´æŠ¤æ€§</strong>ã€<strong>é™ä½æŠ€æœ¯é”å®šçš„é£é™©</strong>ï¼Œå¹¶<strong>é€šè¿‡ç¤¾åŒºç”Ÿæ€åŠ é€Ÿåˆ›æ–°</strong>ã€‚</p>
<h4 data-id="heading-6">å•†ä¸šä»·å€¼ä¼°ç®—ï¼ˆé€»è¾‘æ¨æ¼”ï¼‰</h4>
<p>LangChain çš„å•†ä¸šä»·å€¼å¯ä»¥ä»â€œé™ä½çš„å¼€å‘æˆæœ¬â€å’Œâ€œæ‹“å±•çš„åº”ç”¨å¯èƒ½æ€§â€ä¸¤ä¸ªç»´åº¦è¿›è¡Œé€»è¾‘ä¼°ç®—ã€‚</p>
<ul>
<li><strong>æˆæœ¬èŠ‚çœ</strong>ï¼šå‡è®¾ä¸€ä¸ªä¸­ç­‰å¤æ‚åº¦çš„RAGåº”ç”¨ï¼Œä¸ä½¿ç”¨æ¡†æ¶éœ€è¦èµ„æ·±å·¥ç¨‹å¸ˆçº¦20äººæ—¥çš„å¼€å‘ä¸è°ƒè¯•æ—¶é—´ã€‚ä½¿ç”¨ LangChainï¼Œå€ŸåŠ©å…¶æ ‡å‡†åŒ–ç»„ä»¶å’Œæ¨¡æ¿ï¼Œå¯å°†ç›¸åŒåŠŸèƒ½çš„å¼€å‘æ—¶é—´ç¼©çŸ­è‡³5-7äººæ—¥ï¼ŒèŠ‚çœçº¦65%-75%çš„ç›´æ¥å¼€å‘æˆæœ¬ã€‚è¿™ä¸»è¦æºäºå¯¹é€šç”¨æ¨¡å¼ï¼ˆå¦‚æ–‡æ¡£åŠ è½½ã€åˆ†å—ã€å‘é‡åŒ–ã€æ£€ç´¢ã€æç¤ºè¯ç»„è£…ï¼‰çš„å°è£…ã€‚</li>
<li><strong>æ•ˆç›Šæå‡</strong>ï¼šæ¡†æ¶çš„æ¨¡å—åŒ–ç‰¹æ€§ä½¿å¾—å›¢é˜Ÿèƒ½å¤Ÿå¿«é€Ÿå°è¯•ä¸åŒæ¨¡å‹ã€ä¸åŒæ£€ç´¢å™¨ç»„åˆï¼Œä»è€Œæ›´é«˜æ•ˆåœ°ä¼˜åŒ–åº”ç”¨æ•ˆæœï¼Œç¼©çŸ­äº§å“è¿­ä»£å‘¨æœŸã€‚å…¶ç”Ÿäº§å°±ç»ªçš„ç‰¹æ€§ï¼ˆå¦‚é€šè¿‡LangSmithç›‘æ§ï¼‰ä¹Ÿèƒ½é™ä½çº¿ä¸Šæ•…éšœçš„æ’æŸ¥æ—¶é—´å’Œé£é™©æˆæœ¬ã€‚</li>
<li><strong>è¦†ç›–é—®é¢˜ç©ºé—´</strong>ï¼šLangChain å®šä¹‰äº†ä¸€å¥—æ„å»ºLLMåº”ç”¨çš„æ ‡å‡†â€œè¯æ±‡è¡¨â€å’Œâ€œè®¾è®¡æ¨¡å¼â€ï¼Œå…¶ä»·å€¼ä¸ä»…åœ¨äºä»£ç æœ¬èº«ï¼Œæ›´åœ¨äºå®ƒæ•™è‚²å¹¶è§„èŒƒäº†æ•´ä¸ªç”Ÿæ€çš„æ„å»ºæ–¹å¼ï¼Œé™ä½äº†è¡Œä¸šæ•´ä½“çš„åä½œå’Œè®¤çŸ¥æˆæœ¬ã€‚</li>
</ul>
<h3 data-id="heading-7">2. è¯¦ç»†åŠŸèƒ½æ‹†è§£</h3>
<p>ä»äº§å“ä¸æŠ€æœ¯èåˆçš„è§†è§’ï¼Œå…¶æ ¸å¿ƒåŠŸèƒ½è®¾è®¡å¦‚ä¸‹ï¼š</p>


















































<table><thead><tr><th align="left">åŠŸèƒ½æ¨¡å—</th><th align="left">äº§å“è§†è§’ï¼ˆè§£å†³ä»€ä¹ˆé—®é¢˜ï¼‰</th><th align="left">æŠ€æœ¯è§†è§’ï¼ˆå¦‚ä½•å®ç°ï¼‰</th></tr></thead><tbody><tr><td align="left"><strong>æ ¸å¿ƒæŠ½è±¡ä¸æ¥å£</strong></td><td align="left">ç»Ÿä¸€ä¸åŒæŠ€æœ¯ç»„ä»¶çš„ä½¿ç”¨ä½“éªŒï¼Œå®ç°â€œå¯äº’æ¢â€ã€‚</td><td align="left">å®šä¹‰ <code>BaseLanguageModel</code>, <code>BaseRetriever</code>, <code>BaseMemory</code>, <code>BaseTool</code> ç­‰æŠ½è±¡åŸºç±»ï¼ˆABCï¼‰ã€‚æ‰€æœ‰å…·ä½“å®ç°å¿…é¡»ç»§æ‰¿å¹¶å®ç°è¿™äº›æ¥å£ã€‚</td></tr><tr><td align="left"><strong>é“¾ï¼ˆChainï¼‰</strong></td><td align="left">å°†å¤šæ­¥éª¤ä»»åŠ¡ï¼ˆå¦‚â€œæ£€ç´¢-&gt;ç”Ÿæˆâ€ï¼‰å°è£…ä¸ºå¯é‡å¤ä½¿ç”¨çš„å•ä¸€å•å…ƒï¼Œç®€åŒ–å¤æ‚é€»è¾‘ã€‚</td><td align="left">æä¾› <code>LLMChain</code>, <code>SequentialChain</code>, <code>TransformChain</code> ç­‰ã€‚æ ¸å¿ƒæ˜¯ <code>__call__</code> æˆ– <code>acall</code> æ–¹æ³•ï¼Œå†…éƒ¨ç®¡ç†ç»„ä»¶çš„æ‰§è¡Œé¡ºåºä¸æ•°æ®ä¼ é€’ã€‚</td></tr><tr><td align="left"><strong>æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ä¸å·¥å…·</strong></td><td align="left">ä½¿LLMèƒ½å¤Ÿæ„ŸçŸ¥å¹¶è°ƒç”¨å¤–éƒ¨åŠŸèƒ½ï¼Œæ‰§è¡Œè¶…è¶Šæ–‡æœ¬ç”Ÿæˆçš„å¤æ‚ä»»åŠ¡ã€‚</td><td align="left">æä¾› <code>AgentExecutor</code> ä½œä¸ºè¿è¡Œæ—¶ï¼Œå¾ªç¯æ‰§è¡Œï¼šè§£æLLMè¾“å‡º -&gt; è°ƒç”¨å¯¹åº” <code>Tool</code> -&gt; å°†ç»“æœè¿”å›ç»™LLMã€‚å·¥å…·é€šè¿‡ <code>bind_tools()</code> æ–¹æ³•ä¸æ¨¡å‹ç»‘å®šã€‚</td></tr><tr><td align="left"><strong>è®°å¿†ï¼ˆMemoryï¼‰</strong></td><td align="left">è®©å¯¹è¯æˆ–äº¤äº’å…·å¤‡ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ï¼Œå®ç°å¤šè½®å¯¹è¯ã€‚</td><td align="left">æä¾› <code>ConversationBufferMemory</code>, <code>ConversationSummaryMemory</code> ç­‰ã€‚æœ¬è´¨æ˜¯åœ¨é“¾çš„è°ƒç”¨å‰åï¼Œè‡ªåŠ¨ä»å­˜å‚¨ä¸­è¯»å–å†å²æ¶ˆæ¯å¹¶æ‹¼æ¥åˆ°è¾“å…¥ä¸­ï¼Œæˆ–å°†æ–°äº¤äº’å†™å…¥å­˜å‚¨ã€‚</td></tr><tr><td align="left"><strong>ç´¢å¼•ä¸æ£€ç´¢</strong></td><td align="left">ä¸ºLLMæ³¨å…¥ç§æœ‰æˆ–å®æ—¶æ•°æ®ï¼Œå®ç°æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ã€‚</td><td align="left">æä¾›æ–‡æ¡£åŠ è½½å™¨ï¼ˆDocument Loadersï¼‰ã€æ–‡æœ¬åˆ†å‰²å™¨ï¼ˆText Splittersï¼‰ã€å‘é‡å­˜å‚¨æ¥å£ï¼ˆVectorStoreï¼‰å’Œæ£€ç´¢å™¨ï¼ˆRetrieverï¼‰ï¼Œå½¢æˆæ ‡å‡†åŒ–æ•°æ®å¤„ç†æµæ°´çº¿ã€‚</td></tr><tr><td align="left"><strong>æç¤ºè¯ç®¡ç†</strong></td><td align="left">è§£è€¦æç¤ºè¯æ¨¡æ¿ä¸ä¸šåŠ¡é€»è¾‘ï¼Œä¾¿äºç®¡ç†å’Œä¼˜åŒ–ã€‚</td><td align="left">æä¾› <code>PromptTemplate</code>, <code>ChatPromptTemplate</code> ç­‰ï¼Œæ”¯æŒå˜é‡æ’å€¼ã€éƒ¨åˆ†æ ¼å¼åŒ–ï¼Œå¹¶å¯ä¸å…¶ä»–ç»„ä»¶ï¼ˆå¦‚è¾“å‡ºè§£æå™¨ï¼‰ç»„åˆã€‚</td></tr><tr><td align="left"><strong>å›è°ƒä¸å¯è§‚æµ‹æ€§</strong></td><td align="left">ä¸ºå¼€å‘è°ƒè¯•å’Œç”Ÿäº§ç›‘æ§æä¾›é’©å­ã€‚</td><td align="left">æä¾› <code>CallbackHandler</code> æ¥å£ï¼Œå…è®¸åœ¨LLMè°ƒç”¨ã€é“¾å¼€å§‹/ç»“æŸç­‰å…³é”®èŠ‚ç‚¹æ³¨å…¥è‡ªå®šä¹‰é€»è¾‘ã€‚LangSmith æ˜¯å…¶ä¼ä¸šçº§å®ç°ã€‚</td></tr><tr><td align="left"><strong>CLI ä¸ LangServe</strong></td><td align="left">é™ä½é¡¹ç›®åˆ›å»ºã€ä¾èµ–ç®¡ç†å’ŒæœåŠ¡éƒ¨ç½²çš„é—¨æ§›ã€‚</td><td align="left">CLI åŸºäº Typer æ„å»ºï¼Œæä¾›é¡¹ç›®æ¨¡æ¿å’ŒåŒ…ç®¡ç†å‘½ä»¤ã€‚LangServe åŸºäº FastAPIï¼Œå¯å°†ä»»ä½• <code>Runnable</code> åºåˆ—åŒ–ä¸º OpenAPI æ–‡æ¡£å¹¶å¯åŠ¨ HTTP æœåŠ¡ã€‚</td></tr></tbody></table>
<h3 data-id="heading-8">3. æŠ€æœ¯éš¾ç‚¹ä¸æŒ‘æˆ˜å› å­</h3>
<p>LangChain åœ¨å®ç°å…¶æ„¿æ™¯è¿‡ç¨‹ä¸­ï¼Œéœ€å…‹æœä»¥ä¸‹æ ¸å¿ƒå·¥ç¨‹æŠ€æœ¯éš¾ç‚¹ï¼š</p>
<ol>
<li><strong>æŠ½è±¡è®¾è®¡çš„å¹³è¡¡</strong>ï¼šå¦‚ä½•åœ¨æä¾›è¶³å¤Ÿå¼ºå¤§çš„æŠ½è±¡ä»¥ç®€åŒ–å¼€å‘çš„åŒæ—¶ï¼Œé¿å…æŠ½è±¡æ³„æ¼ï¼Œå¹¶ç¡®ä¿ä¸é™åˆ¶é«˜çº§ç”¨æˆ·è¿›è¡Œåº•å±‚å®šåˆ¶ï¼Ÿè¿™æ˜¯ä¸€ä¸ªç»å…¸çš„æ¡†æ¶è®¾è®¡éš¾é¢˜ã€‚</li>
<li><strong>å¼‚æ„é›†æˆçš„è´¨é‡ä¸ç»´æŠ¤</strong>ï¼šå¯¹æ¥ä¸Šç™¾ä¸ªå¤–éƒ¨æœåŠ¡ï¼ˆæ¨¡å‹ã€æ•°æ®åº“ã€å·¥å…·ï¼‰ï¼Œå¦‚ä½•ä¿è¯æ¯ä¸ªé›†æˆçš„è´¨é‡ã€ä¸ä¸Šæ¸¸APIå˜åŒ–çš„åŒæ­¥ã€ä»¥åŠé”™è¯¯å¤„ç†çš„é²æ£’æ€§ï¼Ÿ</li>
<li><strong>çŠ¶æ€ç®¡ç†ä¸æµå¼æ”¯æŒ</strong>ï¼šåœ¨å¤æ‚çš„ã€å¯èƒ½å¹¶å‘çš„æ™ºèƒ½ä½“å·¥ä½œæµä¸­ï¼Œå¦‚ä½•ä¼˜é›…åœ°ç®¡ç†ä¼šè¯çŠ¶æ€ã€å·¥å…·è°ƒç”¨å†å²ï¼Ÿå¦‚ä½•å°†åº•å±‚çš„æµå¼å“åº”ï¼ˆå¦‚ChatGPTçš„token-by-tokenè¾“å‡ºï¼‰æ— ç¼åœ°ç©¿é€åˆ°é¡¶å±‚é“¾æˆ–æ™ºèƒ½ä½“çš„æµå¼æ¥å£ä¸­ï¼Ÿ</li>
<li><strong>æ€§èƒ½ä¸å¯ä¼¸ç¼©æ€§</strong>ï¼šå½“é“¾ä¸­åŒ…å«å¤šä¸ªç½‘ç»œè°ƒç”¨ï¼ˆå¦‚å¤šæ¬¡æ¨¡å‹è°ƒç”¨ã€å‘é‡æ£€ç´¢ï¼‰æ—¶ï¼Œå¦‚ä½•é€šè¿‡å¼‚æ­¥ã€æ‰¹å¤„ç†ç­‰æœºåˆ¶ä¼˜åŒ–æ€§èƒ½ï¼Ÿå¦‚ä½•è®¾è®¡ç¼“å­˜ç­–ç•¥ï¼Ÿ</li>
<li><strong>ç‰ˆæœ¬å…¼å®¹ä¸æ¼”åŒ–</strong>ï¼šAI é¢†åŸŸæŠ€æœ¯è¿­ä»£æå¿«ï¼Œæ¡†æ¶è‡ªèº«å¦‚ä½•å¹³æ»‘æ¼”è¿›ï¼Œé¿å…é¢‘ç¹çš„ç ´åæ€§æ›´æ–°ï¼Œä¿æŠ¤ç”¨æˆ·é¡¹ç›®ï¼Ÿ</li>
<li><strong>â€œèƒ¶æ°´ä»£ç â€æ¡†æ¶çš„å›ºæœ‰é£é™©</strong>ï¼šLangChain è‡ªèº«ä¸æä¾›LLMæˆ–å‘é‡æ•°æ®åº“ï¼Œå…¶ä»·å€¼åœ¨äºâ€œè¿æ¥â€ã€‚è¿™å¯èƒ½å¯¼è‡´å…¶åœ¨å¤æ‚åœºæ™¯ä¸‹è¢«è§†ä¸ºâ€œä¸å¿…è¦çš„é—´æ¥å±‚â€ï¼Œç‰¹åˆ«æ˜¯å½“ç”¨æˆ·éœ€æ±‚éå¸¸å®šåˆ¶åŒ–æ—¶ã€‚</li>
</ol>
<h3 data-id="heading-9">4. è¯¦ç»†è®¾è®¡å›¾</h3>
<h4 data-id="heading-10">4.1 æ ¸å¿ƒæ¶æ„å›¾</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3d80b6d2a3643ec839f96cde86b07a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5Y6C5oqA5pyv5oC755uR5LiL5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768108481&amp;x-signature=ZHJ7SUzwwDDYKyiU7ljjQ5WaWfk%3D" alt="deepseek_mermaid_20260104_a62852.png" loading="lazy"/>
<em>æ¶æ„è§£è¯»</em>ï¼šç”¨æˆ·é€šè¿‡æ„å»ºé“¾æˆ–æ™ºèƒ½ä½“æ¥å¼€å‘åº”ç”¨ã€‚æ¡†æ¶æ ¸å¿ƒæä¾›ç»Ÿä¸€çš„æŠ½è±¡æ¥å£ï¼ˆLCELå’ŒRunnableåè®®ï¼‰å’ŒåŸºç¡€å®ç°ã€‚å…·ä½“çš„æ¨¡å‹ã€å­˜å‚¨ç­‰èƒ½åŠ›ç”±åºå¤§çš„é›†æˆç”Ÿæ€æä¾›ã€‚é…å¥—çš„CLIã€LangServeå’ŒLangSmithè¦†ç›–äº†å¼€å‘ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h4 data-id="heading-11">4.2 æ ¸å¿ƒé“¾è·¯åºåˆ—å›¾ï¼šä¸€ä¸ªç®€å•çš„RAGé“¾è°ƒç”¨</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·/åº”ç”¨
    participant Chain as RAG Chain
    participant Retriever as Retriever
    participant LLM as ChatModel (e.g., OpenAI)
    participant VS as VectorStore

    User-&gt;&gt;Chain: invoke(â€œä»€ä¹ˆæ˜¯LangChainï¼Ÿâ€)
    Chain-&gt;&gt;Retriever: get_relevant_documents(â€œä»€ä¹ˆæ˜¯LangChainï¼Ÿâ€)
    Retriever-&gt;&gt;VS: similarity_search(â€œä»€ä¹ˆæ˜¯LangChainï¼Ÿâ€, k=4)
    VS--&gt;&gt;Retriever: [Doc1, Doc2, ...]
    Retriever--&gt;&gt;Chain: [Doc1, Doc2, ...]
    Note right of Chain: ç»„è£…æœ€ç»ˆPromptï¼š&lt;br/&gt;é—®é¢˜ + æ£€ç´¢åˆ°çš„æ–‡æ¡£
    Chain-&gt;&gt;LLM: generate(prompt_messages)
    LLM--&gt;&gt;Chain: AIMessage(content=â€LangChainæ˜¯...â€)
    Chain--&gt;&gt;User: â€œLangChainæ˜¯...â€
</code></pre>
<p><em>åºåˆ—è§£è¯»</em>ï¼šæ­¤å›¾å±•ç¤ºäº†ä¸€ä¸ªå…¸å‹çš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æµç¨‹ã€‚é“¾åè°ƒäº†æ£€ç´¢å™¨ä¸è¯­è¨€æ¨¡å‹çš„è°ƒç”¨ï¼Œå¹¶è´Ÿè´£ä¸­é—´æ•°æ®çš„æ ¼å¼è½¬æ¢ä¸ç»„è£…ã€‚è¿™ç§æ¸…æ™°çš„èŒè´£åˆ†ç¦»æ˜¯æ¡†æ¶çš„å…³é”®ä»·å€¼ã€‚</p>
<h4 data-id="heading-12">4.3 æ ¸å¿ƒç±»å›¾ç®€æï¼ˆä»¥ChatModelsä¸ºä¾‹ï¼‰</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a901591454464c6b8d8ffe73773ec1b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5Y6C5oqA5pyv5oC755uR5LiL5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768108481&amp;x-signature=iACHmuHj7aOFh7ogDGpB3%2BmAXVM%3D" alt="deepseek_mermaid_20260104_c56f58.png" loading="lazy"/>
<em>ç±»å›¾è§£è¯»</em>ï¼š<code>BaseChatModel</code> ä½œä¸ºæŠ½è±¡åŸºç±»ï¼Œå®šä¹‰äº†æ‰€æœ‰èŠå¤©æ¨¡å‹å¿…é¡»å®ç°çš„æ ¸å¿ƒæ–¹æ³•ï¼ˆå¦‚<code>invoke</code>, <code>stream</code>ï¼‰å’Œå¯é€‰çš„å†…éƒ¨æ–¹æ³•ï¼ˆå¦‚<code>_generate</code>ï¼‰ã€‚<code>ChatOpenAI</code> å’Œ <code>ChatAnthropic</code> ä½œä¸ºå…·ä½“å®ç°ï¼Œç»§æ‰¿è¯¥åŸºç±»ï¼Œå¹¶å¡«å……ä¸å„è‡ªAPIäº¤äº’çš„å…·ä½“é€»è¾‘ã€‚è¿™ç¡®ä¿äº†æ— è®ºåº•å±‚æ˜¯å“ªä¸ªå‚å•†çš„æ¨¡å‹ï¼Œä¸Šå±‚è°ƒç”¨æ–¹å¼éƒ½æ˜¯ä¸€è‡´çš„ã€‚</p>
<h3 data-id="heading-13">5. æ ¸å¿ƒä»£ç è§£æ</h3>
<p>æˆ‘ä»¬é€‰å–ä¸¤ä¸ªå…³é”®ä»£ç ç‰‡æ®µè¿›è¡Œè§£æï¼Œå®ƒä»¬ä½“ç°äº†æ¡†æ¶çš„æ ¸å¿ƒè®¾è®¡æ€æƒ³ã€‚</p>
<h4 data-id="heading-14">5.1 CLI çš„ <code>serve</code> å‘½ä»¤åˆ†æ´¾é€»è¾‘</h4>
<p>æ­¤å‡½æ•°ä½äº <code>langchain_cli/cli.py</code>ï¼Œå±•ç¤ºäº†å¦‚ä½•é€šè¿‡æ£€æŸ¥é¡¹ç›®å…ƒæ•°æ®æ¥æ™ºèƒ½åˆ†æ´¾å¯åŠ¨å‘½ä»¤ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.command()</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">serve</span>(<span class="hljs-params">
    *,
    port: Annotated[
        <span class="hljs-built_in">int</span> | <span class="hljs-literal">None</span>,
        typer.Option(<span class="hljs-params"><span class="hljs-built_in">help</span>=<span class="hljs-string">"The port to run the server on"</span></span>),
    ] = <span class="hljs-literal">None</span>,
    host: Annotated[
        <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span>,
        typer.Option(<span class="hljs-params"><span class="hljs-built_in">help</span>=<span class="hljs-string">"The host to run the server on"</span></span>),
    ] = <span class="hljs-literal">None</span>,
</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""Start the LangServe app, whether it's a template or an app."""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># 1. å°è¯•å®šä½é¡¹ç›®æ ¹ç›®å½•å¹¶è¯»å– pyproject.toml</span>
        project_dir = get_package_root()
        pyproject = project_dir / <span class="hljs-string">"pyproject.toml"</span>
        <span class="hljs-comment"># 2. å…³é”®æ£€æŸ¥ï¼šå°è¯•è·å– LangServe å¯¼å‡ºé…ç½®</span>
        get_langserve_export(pyproject)
    <span class="hljs-keyword">except</span> (KeyError, FileNotFoundError):
        <span class="hljs-comment"># 3. å¦‚æœå¤±è´¥ï¼Œè¯´æ˜å½“å‰ç›®å½•ä¸æ˜¯ä¸€ä¸ª LangChain æ¨¡æ¿é¡¹ç›®</span>
        <span class="hljs-comment">#    æŒ‰ç…§æ™®é€šåº”ç”¨çš„æ–¹å¼å¯åŠ¨</span>
        app_namespace.serve(port=port, host=host)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># 4. å¦‚æœæˆåŠŸï¼Œè¯´æ˜å½“å‰ç›®å½•æ˜¯ä¸€ä¸ª LangChain æ¨¡æ¿é¡¹ç›®</span>
        <span class="hljs-comment">#    æŒ‰ç…§æ¨¡æ¿é¡¹ç›®çš„ç‰¹å®šæ–¹å¼å¯åŠ¨</span>
        template_namespace.serve(port=port, host=host)
</code></pre>
<p><strong>ä»£ç è§£æ</strong>ï¼š</p>
<ol>
<li><code>get_package_root()</code> å’Œ <code>get_langserve_export()</code> æ˜¯ç”¨äºæ¢æµ‹é¡¹ç›®ç±»å‹çš„å·¥å…·å‡½æ•°ã€‚å®ƒä»¬æ£€æŸ¥ <code>pyproject.toml</code> ä¸­æ˜¯å¦åŒ…å«ç‰¹å®šçš„ <code>[tool.langchain]</code> é…ç½®é¡¹ï¼Œè¿™æ˜¯ LangChain é¡¹ç›®æ¨¡æ¿çš„æ ‡è®°ã€‚</li>
<li>è¿™ç§åŸºäºçº¦å®šçš„æ¢æµ‹æœºåˆ¶ï¼Œå…è®¸åŒä¸€ä¸ª <code>langchain-cli</code> å‘½ä»¤æ— ç¼æ”¯æŒä¸¤ç§ä½¿ç”¨åœºæ™¯ï¼š<strong>ä»æ¨¡æ¿åˆ›å»ºçš„æ–°é¡¹ç›®</strong>å’Œ<strong>å·²æœ‰çš„è‡ªå®šä¹‰åº”ç”¨é¡¹ç›®</strong>ã€‚è¿™æå‡äº†å¼€å‘è€…ä½“éªŒã€‚</li>
<li>é”™è¯¯å¤„ç†ç®€æ´æ˜ç¡®ï¼Œå°† <code>KeyError</code>ï¼ˆé…ç½®é¡¹ç¼ºå¤±ï¼‰å’Œ <code>FileNotFoundError</code>ï¼ˆé…ç½®æ–‡ä»¶ç¼ºå¤±ï¼‰ç»Ÿä¸€å¤„ç†ä¸ºâ€œéæ¨¡æ¿é¡¹ç›®â€ã€‚</li>
<li>æœ€ç»ˆå°†å¯åŠ¨é€»è¾‘åˆ†æ´¾ç»™ä¸åŒçš„å‘½åç©ºé—´ï¼ˆ<code>app_namespace</code> æˆ– <code>template_namespace</code>ï¼‰ï¼Œä½“ç°äº†è‰¯å¥½çš„èŒè´£åˆ†ç¦»ã€‚</li>
</ol>
<h4 data-id="heading-15">5.2 åˆä½œä¼™ä¼´åŒ…ä¸­ <code>ChatModel</code> çš„ <code>_generate</code> æ–¹æ³•æ¨¡æ¿</h4>
<p>æ­¤ä»£ç ç‰‡æ®µæ¥è‡ªåˆä½œä¼™ä¼´åŒ…çš„æ¨¡æ¿æ–‡ä»¶ï¼Œæ­ç¤ºäº†å¦‚ä½•ä¸ºä¸€ä¸ªæ–°çš„æ¨¡å‹æä¾›å•†å®ç°æ ‡å‡†æ¥å£ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ³¨æ„ï¼šä»¥ä¸‹ä»£ç æ˜¯åˆä½œä¼™ä¼´åŒ…çš„æ¨¡æ¿ï¼ŒåŒ…å«å¤§é‡ TODOã€‚</span>
<span class="hljs-comment"># å®ƒå±•ç¤ºäº†å®ç°ä¸€ä¸ªèŠå¤©æ¨¡å‹æ‰€éœ€çš„æœ€å°ç»“æ„å’Œæ¨¡å¼ã€‚</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">_generate</span>(<span class="hljs-params">
    self,
    messages: <span class="hljs-type">List</span>[BaseMessage],
    stop: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    run_manager: CallbackManagerForLLMRun | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    **kwargs: <span class="hljs-type">Any</span>,
</span>) -&gt; ChatResult:
    <span class="hljs-string">"""Override the _generate method to implement the chat model logic."""</span>
    <span class="hljs-comment"># æ­¤å¤„åº”æ›¿æ¢ä¸ºå®é™…è°ƒç”¨æ¨¡å‹APIçš„é€»è¾‘</span>
    <span class="hljs-comment"># æ¨¡æ¿ä¸­æ˜¯ä¸€ä¸ªç®€å•çš„â€œå¤è¯»æœºâ€å®ç°ï¼Œç”¨äºæ¼”ç¤º</span>
    last_message = messages[-<span class="hljs-number">1</span>]
    tokens = last_message.content[: self.parrot_buffer_length]
    ct_input_tokens = <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">len</span>(message.content) <span class="hljs-keyword">for</span> message <span class="hljs-keyword">in</span> messages)
    ct_output_tokens = <span class="hljs-built_in">len</span>(tokens)
    
    <span class="hljs-comment"># æ„å»ºç¬¦åˆ LangChain æ¶ˆæ¯åè®®çš„å¯¹è±¡</span>
    message = AIMessage(
        content=tokens,
        additional_kwargs={},  <span class="hljs-comment"># å­˜æ”¾æ¨¡å‹åŸç”Ÿè¿”å›çš„é¢å¤–ä¿¡æ¯ï¼ˆå¦‚ finish_reasonï¼‰</span>
        response_metadata={    <span class="hljs-comment"># å­˜æ”¾å“åº”å…ƒæ•°æ®ï¼ˆå¦‚è€—æ—¶ã€æ¨¡å‹IDï¼‰</span>
            <span class="hljs-string">"time_in_seconds"</span>: <span class="hljs-number">3</span>,
            <span class="hljs-string">"model_name"</span>: self.model_name,
        },
        usage_metadata={       <span class="hljs-comment"># å­˜æ”¾tokenä½¿ç”¨é‡</span>
            <span class="hljs-string">"input_tokens"</span>: ct_input_tokens,
            <span class="hljs-string">"output_tokens"</span>: ct_output_tokens,
            <span class="hljs-string">"total_tokens"</span>: ct_input_tokens + ct_output_tokens,
        },
    )
    <span class="hljs-comment">##</span>
    <span class="hljs-comment"># å°†æ¶ˆæ¯å°è£…ä¸º ChatGenerationï¼Œå†æ”¾å…¥ ChatResult</span>
    generation = ChatGeneration(message=message)
    <span class="hljs-keyword">return</span> ChatResult(generations=[generation])
</code></pre>
<p><strong>ä»£ç è§£æ</strong>ï¼š</p>
<ol>
<li><strong>æ¨¡æ¿ä½œç”¨</strong>ï¼šè¿™ä»½æ¨¡æ¿æå¤§åœ°é™ä½äº†ä¸ºæ–°çš„AIæ¨¡å‹æœåŠ¡åˆ›å»º LangChain é›†æˆåŒ…çš„é—¨æ§›ã€‚è´¡çŒ®è€…åªéœ€å¡«å……è°ƒç”¨çœŸå®APIçš„ä»£ç ï¼Œå¹¶æ­£ç¡®æ˜ å°„è¿”å›æ•°æ®ã€‚</li>
<li><strong>å…³é”®è¾“å…¥</strong>ï¼š
<ul>
<li><code>messages</code>: æ ‡å‡†åŒ–åçš„æ¶ˆæ¯åˆ—è¡¨ï¼ˆ<code>SystemMessage</code>, <code>HumanMessage</code>, <code>AIMessage</code> ç­‰ï¼‰ï¼Œè°ƒç”¨è€…æ— éœ€å…³å¿ƒåŸå§‹APIçš„æ¶ˆæ¯æ ¼å¼ã€‚</li>
<li><code>stop</code>: åœæ­¢è¯åºåˆ—ï¼Œéœ€è¦å®ç°è€…å°†å…¶è½¬æ¢ä¸ºå¯¹åº”APIçš„å‚æ•°ã€‚</li>
<li><code>run_manager</code>: å›è°ƒç®¡ç†å™¨ï¼Œç”¨äºåœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­è§¦å‘å›è°ƒäº‹ä»¶ï¼ˆå¦‚ <code>on_llm_new_token</code>ï¼‰ï¼Œæ˜¯å®ç°æµå¼å¤„ç†å’Œå¯è§‚æµ‹æ€§çš„å…³é”®ã€‚</li>
</ul>
</li>
<li><strong>å…³é”®è¾“å‡º</strong>ï¼šå¿…é¡»è¿”å› <code>ChatResult</code> å¯¹è±¡ï¼Œå…¶å†…éƒ¨åŒ…å« <code>ChatGeneration</code>ã€‚<code>AIMessage</code> çš„å„ä¸ªå­—æ®µè®¾è®¡ç²¾è‰¯ï¼š
<ul>
<li><code>content</code>: æ ¸å¿ƒå›å¤å†…å®¹ã€‚</li>
<li><code>additional_kwargs</code>: ä¿ç•™æ¨¡å‹åŸç”Ÿå“åº”ä¸­å¯èƒ½å­˜åœ¨çš„ç‰¹æ®Šå­—æ®µï¼Œä¿è¯ä¿¡æ¯ä¸ä¸¢å¤±ã€‚</li>
<li><code>response_metadata</code> &amp; <code>usage_metadata</code>: æ ‡å‡†åŒ–äº†ç›‘æ§å’Œæˆæœ¬æ ¸ç®—æ‰€éœ€çš„å…³é”®å…ƒæ•°æ®ã€‚</li>
</ul>
</li>
<li><strong>è®¾è®¡æ¨¡å¼</strong>ï¼šè¿™æ˜¯<strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>çš„å…¸å‹åº”ç”¨ã€‚<code>BaseChatModel</code> çš„ <code>invoke()</code> æ–¹æ³•å®šä¹‰äº†è°ƒç”¨æµç¨‹ï¼ˆå¯èƒ½åŒ…æ‹¬é¢„å¤„ç†ã€å›è°ƒè§¦å‘ç­‰ï¼‰ï¼Œå¹¶è°ƒç”¨å­ç±»å¿…é¡»å®ç°çš„ <code>_generate()</code> è¿™ä¸ªâ€œå˜ä½“â€éƒ¨åˆ†ã€‚</li>
</ol>
<h3 data-id="heading-16">æ€»ç»“ä¸å±•æœ›</h3>
<p>LangChain æˆåŠŸåœ°å°†æ„å»ºLLMåº”ç”¨çš„å¸¸è§æ¨¡å¼æŠ½è±¡ä¸ºäº†ä¸€å¥—æ ‡å‡†åŒ–çš„ã€å¯ç»„åˆçš„æ¥å£ä¸ç»„ä»¶ã€‚å…¶æŠ€æœ¯æ¶æ„çš„æ ¸å¿ƒä»·å€¼åœ¨äº<strong>é€šè¿‡å®šä¹‰è¡Œä¸šé€šç”¨æ¥å£å’Œåè®®ï¼Œé™ä½äº†ç”Ÿæ€çš„ç¢ç‰‡åŒ–ï¼Œå¹¶æ˜¾è‘—æå‡äº†å¼€å‘æ•ˆç‡</strong>ã€‚å®ƒå¹¶éé“¶å¼¹ï¼Œåœ¨å¤„ç†æè‡´æ€§èƒ½æˆ–é«˜åº¦å®šåˆ¶åŒ–çš„åœºæ™¯æ—¶å¯èƒ½å¼•å…¥é¢å¤–å¤æ‚åº¦ï¼Œä½†å…¶åœ¨å¿«é€ŸåŸå‹ã€æ ‡å‡†åŒ–ç”Ÿäº§ä»¥åŠæ•™è‚²å¸‚åœºæ–¹é¢çš„ä½œç”¨æ¯‹åº¸ç½®ç–‘ã€‚</p>
<p>ä»æŠ€æœ¯æ¼”è¿›çœ‹ï¼Œå…¶è¡¨è¾¾å¼è¯­è¨€ï¼ˆLCELï¼‰å’Œ <code>Runnable</code> åè®®çš„å¼•å…¥ï¼Œæ­£è¯•å›¾æä¾›æ›´å£°æ˜å¼ã€æ›´çµæ´»çš„ç¼–æ’æ–¹å¼ã€‚æœªæ¥ï¼Œå¦‚ä½•è¿›ä¸€æ­¥ä¼˜åŒ–å¤æ‚æ™ºèƒ½ä½“å·¥ä½œæµçš„æ€§èƒ½ä¸å¯é æ€§ï¼Œæ·±åŒ–ä¸å„ç±»è¿è¡Œæ—¶ï¼ˆå¦‚äº‘å‡½æ•°ã€è¾¹ç¼˜è®¡ç®—ï¼‰çš„é›†æˆï¼Œä»¥åŠå¦‚ä½•æ›´å¥½åœ°å¹³è¡¡æ¡†æ¶çš„â€œé‡é‡â€ä¸â€œçµæ´»æ€§â€ï¼Œå°†æ˜¯ LangChain æŒç»­é¢ä¸´çš„æŠ€æœ¯æŒ‘æˆ˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025å®æµ‹ï¼šAI/Vibe Codingæ•‘äº†æˆ‘çš„å‘½ï¼Œä¹Ÿå·®ç‚¹åºŸäº†æˆ‘çš„æ­¦åŠŸ]]></title>    <link>https://juejin.cn/post/7590681158717390888</link>    <guid>https://juejin.cn/post/7590681158717390888</guid>    <pubDate>2026-01-04T05:31:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590681158717390888" data-draft-id="7590778284758761507" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025å®æµ‹ï¼šAI/Vibe Codingæ•‘äº†æˆ‘çš„å‘½ï¼Œä¹Ÿå·®ç‚¹åºŸäº†æˆ‘çš„æ­¦åŠŸ"/> <meta itemprop="keywords" content="VibeCoding,Flutter"/> <meta itemprop="datePublished" content="2026-01-04T05:31:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‰‰é¡µçš„å¢¨"/> <meta itemprop="url" content="https://juejin.cn/user/1767670429254526"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025å®æµ‹ï¼šAI/Vibe Codingæ•‘äº†æˆ‘çš„å‘½ï¼Œä¹Ÿå·®ç‚¹åºŸäº†æˆ‘çš„æ­¦åŠŸ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1767670429254526/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‰‰é¡µçš„å¢¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:31:43.000Z" title="Sun Jan 04 2026 05:31:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»è¢«å·åˆ°èººå¹³å†åˆ°èµ·é£.
å…„å¼Ÿä»¬ï¼Œ
å¦‚æœç”¨ä¸€ä¸ªè¯å½¢å®¹æˆ‘çš„2025ï¼Œé‚£å°±æ˜¯**â€œè¿‡å±±è½¦â€**ã€‚è¿™ä¸€å¹´ï¼Œæˆ‘æ²¡æ­»ç£•æ–°æ¡†æ¶ï¼Œä¹Ÿæ²¡å»èƒŒä»€ä¹ˆæ–°è¯­è¨€çš„è¯­æ³•ï¼Œè€Œæ˜¯å½»åº•è¢«Â <strong>AI/Vibe Coding</strong>Â æ¢äº†ä¸€èº«â€œæ“ä½œç³»ç»Ÿâ€ã€‚</p>
<p>ä»å¹´åˆåªä¼šç”¨AIæŸ¥ä¸ª<code>SyntaxError</code>ï¼Œåˆ°å¹´åº•ç”¨å®ƒä¸»å¯¼äº†3ä¸ªæ ¸å¿ƒé¡¹ç›®çš„é‡æ„ï¼Œè¿™ä¸€å¹´çš„å˜åŒ–å¤ªå¤§äº†ã€‚ä»Šå¤©ä¸å¹ç‰›é€¼ï¼Œä¸çŒé¸¡æ±¤ï¼Œçº¯æ‰‹æ‰“åˆ†äº«ä¸€ä¸‹è¿™ä¸€å¹´çš„å®æˆ˜å¾—å¤±ï¼Œæ—¢æœ‰è®©ä½ æ•ˆç‡èµ·é£çš„é‡è·¯å­ï¼Œä¹Ÿæœ‰æˆ‘è¸©å‘åçš„è¡€æ³ªæ•™è®­ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€æ•ˆç‡é©å‘½ï¼šä»â€œæ‰‹æ“â€åˆ°â€œæŒ‡æŒ¥â€</h3>
<p>ä»¥å‰æˆ‘çš„å¼€å‘æµç¨‹ï¼Œå¤§å®¶åº”è¯¥éƒ½æ‡‚ï¼šæ¥åˆ°éœ€æ±‚ -&gt; æ‰“å¼€IDE -&gt; ä»<code>main</code>å‡½æ•°å¼€å§‹ä¸€è¡Œè¡Œæ•² -&gt; é‡åˆ°ä¸ªAPIç¿»åŠå¤©æ–‡æ¡£ -&gt; é‡æ„æ—§ä»£ç å…ˆèŠ±ä¸¤å¤©ç”»ERå›¾ã€‚</p>
<p>é‚£æ—¶å€™ï¼Œä¸€å‘¨èƒ½è‚å®Œä¸¤ä¸ªè¿­ä»£å°±ç®—çƒ§é«˜é¦™äº†ï¼ŒåŠ ç­æ›´æ˜¯å®¶å¸¸ä¾¿é¥­ã€‚</p>
<p><strong>è½¬æŠ˜ç‚¹æ˜¯Cursorï¼ˆé›†æˆäº†Gemini 3ï¼‰ã€‚</strong></p>
<p>æˆ‘ç¬¬ä¸€æ¬¡ç”¨å®ƒå†™ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼Œç›´æ¥æƒŠäº†ã€‚è¿™ä¸å†æ˜¯ç®€å•çš„â€œä»£ç è¡¥å…¨â€ï¼Œè€Œæ˜¯çœŸæ­£çš„Â <strong>Vibe Coding</strong>â€”â€”<strong>æˆ‘å®šæ–¹å‘ï¼ŒAIå¡«ç»†èŠ‚ã€‚</strong></p>
<p>å°è±¡æœ€æ·±çš„æ˜¯Q3é‚£ä¸ªæ—§ç³»ç»Ÿé‡æ„ï¼Œè¦å…¼å®¹100å¤šä¸ªè€æ¥å£ï¼Œè¿˜å¾—æé«˜å†…èšä½è€¦åˆã€‚è¦æ˜¯æä»¥å‰ï¼Œå…‰æ¢³ç†ä¾èµ–å…³ç³»å°±å¾—è„±å±‚çš®ã€‚è¿™æ¬¡æˆ‘ç›´æ¥è·ŸAIè¯´ï¼šâ€œæˆ‘è¦å…¼å®¹æ—§æ¥å£ï¼Œé«˜å†…èšä½è€¦åˆï¼Œè¿˜å¾—æ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡ã€‚â€</p>
<p>ä½ çŒœæ€ä¹ˆç€ï¼Ÿå®ƒç›´æ¥ç»™æˆ‘æ­å¥½äº†éª¨æ¶ï¼Œç”šè‡³ä¸»åŠ¨æ ‡å‡ºäº†å‡ ä¸ªå…¼å®¹æ€§é£é™©ç‚¹ã€‚</p>
<p>å½“ç„¶ï¼ŒAIä¸æ˜¯ç¥ï¼Œå®ƒä¹Ÿç»å¸¸â€œè·‘åâ€ã€‚æœ‰ä¸€æ¬¡å®ƒç”Ÿæˆçš„åˆ†å¸ƒå¼é”ä»£ç ï¼Œè¾¹ç•Œæ¡ä»¶æ²¡å¤„ç†å¥½ï¼Œå¹¶å‘ä¸€é«˜å°±ä¸¢æ•°æ®ã€‚ä½†æˆ‘åªæŠŠæŠ¥é”™ç°è±¡ï¼ˆå¹¶å‘æ’æ•°æ®é‡å¤ï¼‰æ‰”ç»™å®ƒï¼Œå®ƒç«‹é©¬åäº†ä¸‰å¥—è§£å†³æ–¹æ¡ˆï¼Œè¿˜é™„å¸¦äº†æ€§èƒ½å¯¹æ¯”ã€‚æœ€åï¼Œè¿™é¡¹ç›®åªç”¨äº†8å¤©å°±ä¸Šçº¿äº†ï¼Œé›¶æ•…éšœï¼Œæ¯”åŸè®¡åˆ’çœäº†æ•´æ•´ä¸€åŠæ—¶é—´ã€‚</p>
<p><strong>è¯´å®è¯ï¼Œè¿™ä¸€å¹´çš„æ•ˆç‡æå‡ï¼Œä¿å®ˆä¼°è®¡æœ‰70%ã€‚</strong><br/>
ä»¥å‰æä¸€å¤©çš„æ¥å£ï¼Œç°åœ¨ä¸¤å°æ—¶æå®šï¼›ä»¥å‰å†™ä¸‰å¤©çš„æµ‹è¯•ç”¨ä¾‹ï¼ŒAIç”Ÿæˆæ¡†æ¶åæˆ‘è¡¥å‡ ä¸ªæ ¸å¿ƒåœºæ™¯ï¼Œä¸€å°æ—¶å®Œäº‹ã€‚çœä¸‹æ¥çš„æ—¶é—´ï¼Œç»ˆäºèƒ½ç”¨æ¥å¥½å¥½æ€è€ƒæ¶æ„å’Œä¸šåŠ¡äº†ï¼Œè€Œä¸æ˜¯å½“â€œä»£ç æ¬è¿å·¥â€ã€‚</p>
<h3 data-id="heading-1">äºŒã€èƒ½åŠ›ç ´åœˆï¼šä»â€œåªä¼šå†™æ¥å£â€åˆ°â€œå…¨æ ˆä¹±æ€â€</h3>
<p>æ•ˆç‡æå‡æ˜¯å°äº‹ï¼Œ<strong>èƒ½åŠ›ç ´åœˆ</strong>æ‰æ˜¯è®©æˆ‘æœ€çˆ½çš„ã€‚</p>
<p>å¤§å®¶éƒ½çŸ¥é“ï¼Œåç«¯è½¬å…¨æ ˆæœ€éš¾çš„å°±æ˜¯é‚£é“åï¼šå‰ç«¯é‚£å †èŠ±èŠ±ç»¿ç»¿çš„ä¸œè¥¿ã€‚ä»¥å‰é‡åˆ°å…¨æ ˆéœ€æ±‚ï¼Œæˆ‘åªèƒ½å–Šâ€œå‰ç«¯å…„å¼Ÿæ•‘å‘½â€ã€‚</p>
<p>ä»Šå¹´å¹´ä¸­ï¼Œæˆ‘ä»¬æäº†ä¸ªè½»é‡çº§åˆ›ä¸šé¡¹ç›®ï¼Œè¦åšä¸ªç®€æ˜“åä½œå¹³å°ã€‚æŒ‰è€å¥—è·¯ï¼Œè¿™å¾—å‰åç«¯+è¿ç»´ä¸‰ä¸ªäººæä¸€å‘¨ã€‚ä½†è¿™æ¬¡ï¼Œå°±æˆ‘å’Œä¸€ä¸ªäº§å“ç»ç†ï¼Œç”¨AI Agentå·¥å…·é“¾ï¼Œ<strong>2å¤©</strong>å°±æŠŠåŸå‹å¹²å‡ºæ¥äº†ã€‚</p>
<ul>
<li><strong>åç«¯ï¼š</strong> Â Vibe Codingæå®šï¼Œæˆ‘åªç®¡æ ¸å¿ƒé€»è¾‘ã€‚</li>
<li><strong>å‰ç«¯ï¼š</strong> Â äº§å“ç»ç†ç»™ä¸ªå›¾ï¼Œæˆ‘è®©Agentè½¬æˆReactä»£ç ï¼Œå¾®è°ƒä¸€ä¸‹æ ·å¼ã€‚</li>
<li><strong>æ–‡æ¡£éƒ¨ç½²ï¼š</strong> Â Agentè‡ªåŠ¨æŠ“æ³¨é‡Šå†™æ–‡æ¡£ï¼Œè¿Dockeré…ç½®å’Œè¿ç»´è„šæœ¬éƒ½å¸®æˆ‘ç”Ÿæˆäº†ã€‚</li>
</ul>
<p>æ›´ç¦»è°±çš„æ˜¯ï¼Œæˆ‘ç”šè‡³ç”¨AI Agentæäº†ä¸ª<strong>ä¸ªäººæ—…è¡Œè§„åˆ’å·¥å…·</strong>ã€‚è¾“å…¥â€œå¸¦è€äººå­©å­ã€é¢„ç®—5åƒã€å–œæ¬¢è‡ªç„¶æ™¯è§‚â€ï¼ŒAIç›´æ¥ç”Ÿæˆè¡Œç¨‹ï¼Œè¿˜èƒ½æŠ“èˆªç­å’Œé…’åº—ä¿¡æ¯ã€‚</p>
<p>å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘è¿™ä¸ªåç«¯åœŸé³–è¦æå‰ç«¯å¯è§†åŒ–ã€å¯¹æ¥ç¬¬ä¸‰æ–¹APIã€‚AIå°±åƒä¸ª24å°æ—¶åœ¨çº¿çš„å¯¼å¸ˆï¼Œä¸æ‡‚å°±é—®ï¼Œè¾¹åšè¾¹å­¦ã€‚æœ€åä¸ä»…å·¥å…·åšå‡ºæ¥äº†ï¼ŒReactå¯è§†åŒ–å’ŒAPIå¯¹æ¥çš„å‘æˆ‘ä¹Ÿé—¨å„¿æ¸…äº†ã€‚</p>
<p><strong>ä¸€å¥è¯ï¼šåªè¦æ•¢æƒ³ï¼Œåç«¯ä¹Ÿèƒ½â€œå…¨æ ˆä¹±æ€â€ã€‚</strong></p>
<h3 data-id="heading-2">ä¸‰ã€è®¤çŸ¥é‡å¡‘ï¼šåˆ«è·ŸAIæ¯”æ‰‹é€Ÿï¼Œè¦æ¯”è„‘å­</h3>
<p>è¿™æ˜¯2025å¹´æˆ‘æœ€å¤§çš„æ”¶è·ï¼Œä¹Ÿæ˜¯æœ€ç—›è‹¦çš„é¢†æ‚Ÿã€‚</p>
<p>åˆšå¼€å§‹æ·±åº¦ç”¨AIæ—¶ï¼Œæˆ‘å¾ˆç„¦è™‘ï¼šAIä¸‰åˆ†é’Ÿå†™ä¸‰åƒè¡Œå·¥ä¸šçº§ä»£ç ï¼ŒAgentèƒ½ç‹¬ç«‹æ­é¡¹ç›®ï¼Œæˆ‘ä»¬è¿˜æœ‰å•¥ç”¨ï¼Ÿç”šè‡³æœ‰ä¸€é˜µå­æˆ‘è¿‡åº¦ä¾èµ–AIï¼ŒåŸºç¡€éƒ½ç”Ÿç–äº†ï¼Œé¢è¯•è¢«é—®â€œåˆ†å¸ƒå¼äº‹åŠ¡åŸç†â€æ—¶ï¼Œæˆ‘ç«Ÿç„¶å¡å£³äº†ã€‚</p>
<p>åæ¥ç”¨Vibe Codingä¹…äº†ï¼Œæˆ‘æ‚Ÿäº†ï¼š<strong>AIæ˜¯è¶…çº§ä¹æ‰‹ï¼Œä½†ä½ æ˜¯æŒ‡æŒ¥å®¶ã€‚</strong></p>
<p>AIæ“…é•¿æ‰§è¡Œå’Œå¡«å‘ï¼Œäººç±»çš„ä»·å€¼åœ¨äº<strong>åˆ›é€ åŠ›ã€åˆ¤æ–­åŠ›å’Œå…±æƒ…</strong>ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šAIèƒ½ç”Ÿæˆä¸€ä¸ªå®Œç¾çš„ç™»å½•æ¥å£ï¼Œè¯­æ³•é›¶é”™è¯¯ã€‚ä½†å®ƒä¸çŸ¥é“ä¸šåŠ¡é‡Œéœ€è¦â€œå¼‚åœ°ç™»å½•æé†’â€ã€‚å¦‚æœä½ ç›´æ¥å¤åˆ¶ç²˜è´´ï¼ŒåŠŸèƒ½æ˜¯èƒ½è·‘ï¼Œä½†ç”¨æˆ·ä½“éªŒå’Œè´¦å·å®‰å…¨å°±å´©äº†ã€‚</p>
<p><strong>è¿™å°±æ˜¯æˆ‘ä»¬çš„ä»·å€¼ï¼šæ‡‚ä¸šåŠ¡ï¼Œæ‡‚ç”¨æˆ·ï¼Œåšå†³ç­–ã€‚</strong></p>
<p>é‚£äº›æ‹…å¿ƒè¢«AIæ·˜æ±°çš„äººï¼Œå…¶å®æ˜¯æ²¡åˆ†æ¸…â€œä»£ç å·¥äººâ€å’Œâ€œæŠ€æœ¯å†³ç­–è€…â€ã€‚æœªæ¥ï¼Œåªä¼šCtrl+Cã€Ctrl+Vçš„â€œä»£ç å·¥äººâ€ç¡®å®å±é™©ï¼›ä½†èƒ½é©¾é©­AIï¼Œæå®šæ¶æ„ã€ç†è§£ä¸šåŠ¡ã€åˆ›é€ ä»·å€¼çš„äººï¼Œåªä¼šè¶Šæ¥è¶Šåƒé¦™ã€‚</p>
<h3 data-id="heading-3">å››ã€å®æˆ˜é¿å‘ï¼š3ä¸ªæˆ‘ç”¨çœŸé‡‘ç™½é“¶æ¢æ¥çš„æŠ€å·§</h3>
<p>å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ï¼Œåˆ†äº«3ä¸ªæˆ‘æ€»ç»“çš„â€œäººæœºåä½œâ€ä¿å‘½æŠ€å·§ï¼š</p>
<p><strong>1. æ˜ç¡®è¾¹ç•Œï¼šæŠŠAIå½“â€œå‰¯é©¾é©¶â€ï¼Œåˆ«å½“â€œæ›¿èº«â€</strong></p>
<ul>
<li><strong>AIå¹²å•¥ï¼š</strong> Â æ­è„šæ‰‹æ¶ã€å†™CRUDã€ç”ŸæˆåŸºç¡€æµ‹è¯•ã€æŸ¥æ–‡æ¡£ã€‚</li>
<li><strong>ä½ å¹²å•¥ï¼š</strong> Â æ ¸å¿ƒç®—æ³•ã€åˆ†å¸ƒå¼ä¸€è‡´æ€§ã€å®‰å…¨åˆè§„ã€ä¸šåŠ¡é€»è¾‘å…œåº•ã€‚</li>
<li><strong>åŸåˆ™ï¼š</strong> Â ä½é£é™©ã€æ ‡å‡†åŒ–çš„æ´»å„¿æ‰”ç»™AIï¼Œä½ è´Ÿè´£å®¡æ ¸ï¼›é«˜é£é™©ã€æ ¸å¿ƒåŸŸçš„æ´»å„¿ï¼Œä½ ä¸»å¯¼ï¼ŒAIç»™å»ºè®®ã€‚</li>
</ul>
<p><strong>2. ç²¾å‡†å¼•å¯¼ï¼šåˆ«é—®å‚»é—®é¢˜ï¼Œè¦ç”¨â€œç»“æ„åŒ–æç¤ºâ€</strong><br/>
åˆ«åªä¼šè¯´â€œå¸®æˆ‘å†™ä¸ªç™»å½•â€ï¼ŒAIç”Ÿæˆçš„ä»£ç å¤§æ¦‚ç‡æ²¡æ³•ç”¨ã€‚æˆ‘ç”¨çš„æ¨¡æ¿æ˜¯ï¼š</p>
<blockquote>
<p><strong>æ ¸å¿ƒéœ€æ±‚ï¼š</strong> Â å†™ä¸€ä¸ªåŸºäºJWTçš„ç™»å½•æ¥å£ã€‚<br/>
<strong>çº¦æŸæ¡ä»¶ï¼š</strong> Â ç”¨Spring Boot 3.0ï¼Œæ•°æ®åº“ç”¨MySQLï¼Œå¯†ç è¦BCryptåŠ å¯†ï¼Œè¦è€ƒè™‘é˜²æš´åŠ›ç ´è§£ã€‚<br/>
<strong>è¾“å‡ºè¦æ±‚ï¼š</strong> Â ä»£ç è¦æœ‰æ³¨é‡Šï¼Œè¿”å›æ ¼å¼ç»Ÿä¸€ç”¨Resultï¼Œç»™å‡ºPostmanæµ‹è¯•ç”¨ä¾‹ã€‚</p>
</blockquote>
<p>è¿™æ ·ä¸€å–‚ï¼Œå‡ºæ¥çš„ä»£ç åŸºæœ¬ä¸ç”¨æ”¹ï¼Œç›´æ¥èƒ½ç”¨ã€‚</p>
<p><strong>3. æŒç»­å¤ç›˜ï¼šå»ºç«‹è‡ªå·±çš„â€œæŠ¤æ è§„åˆ™åº“â€</strong><br/>
AIç»å¸¸çŠ¯è ¢ï¼Œæ¯”å¦‚å¼•ç”¨åºŸå¼ƒçš„åŒ…ï¼Œæˆ–è€…å¿½ç•¥åˆ†å¸ƒå¼äº‹åŠ¡è¾¹ç•Œã€‚æˆ‘çš„åšæ³•æ˜¯ï¼š<br/>
æ¯æ¬¡å®ƒè¸©å‘ï¼Œæˆ‘å°±æŠŠå‘è®°ä¸‹æ¥ï¼Œä¸‹æ¬¡åœ¨æç¤ºè¯é‡Œæå‰æ‰“è¡¥ä¸ã€‚<br/>
æ¯”å¦‚ï¼šâ€œ<strong>æ³¨æ„ï¼š</strong> Â åªèƒ½ç”¨Spring Boot 3.0å®˜æ–¹æ”¯æŒçš„ä¾èµ–ï¼Œå¿…é¡»å…¼å®¹Seataåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæ˜ç¡®äº‹åŠ¡è¾¹ç•Œã€‚â€</p>
<h3 data-id="heading-4">äº”ã€å†™åœ¨æœ€åï¼š2026ï¼Œæ€ä¹ˆæ··ï¼Ÿ</h3>
<p>å›å¤´çœ‹2025ï¼ŒAI/Vibe Codingä¸ä»…è®©æˆ‘æ•ˆç‡ç¿»å€ï¼Œæ›´è®©æˆ‘æ˜ç™½ï¼š<strong>æŠ€æœ¯æµªæ½®æŒ¡ä¸ä½ï¼Œä¸å…¶ç„¦è™‘ï¼Œä¸å¦‚å†²æµªã€‚</strong></p>
<p>2026å¹´ï¼Œéšç€ä¸–ç•Œæ¨¡å‹å’Œå…·èº«æ™ºèƒ½çš„å‘å±•ï¼ŒAIå’Œå¼€å‘çš„åä½œä¼šæ›´ç´§å¯†ã€‚æˆ‘ä»¬è¦åšçš„ï¼Œä¸æ˜¯è·ŸAIæ¯”è°æ•²ä»£ç å¿«ï¼Œè€Œæ˜¯æ­»ç£•è¿™å‡ æ ·AIæš‚æ—¶å¹²ä¸äº†çš„äº‹ï¼š</p>
<ol>
<li><strong>ä¸šåŠ¡æ·±åº¦ï¼š</strong> Â ä¸åªæ˜¯å®ç°åŠŸèƒ½ï¼Œè€Œæ˜¯ç†è§£åŠŸèƒ½èƒŒåçš„ç”Ÿæ„é€»è¾‘ã€‚</li>
<li><strong>æ¶æ„è®¾è®¡ï¼š</strong> Â åˆ«è®©AIç”Ÿæˆçš„ä»£ç æŠŠç³»ç»Ÿææˆä¸€å¨å±ï¼Œè¦æœ‰æŒæ§å…¨å±€çš„èƒ½åŠ›ã€‚</li>
<li><strong>æç¤ºå·¥ç¨‹ï¼š</strong> Â å­¦ä¼šæŠŠAIâ€œè°ƒæ•™â€å¥½ï¼Œè®©å®ƒä¹–ä¹–å¹²æ´»ã€‚</li>
<li><strong>æŒç»­å­¦ä¹ ï¼š</strong> Â å·¥å…·åœ¨å˜ï¼Œä½†å­¦ä¹ èƒ½åŠ›æ˜¯æ ¸å¿ƒã€‚</li>
</ol>
<p>å¦‚æœä½ ä¹Ÿåœ¨2025å¹´è¢«AI/Vibe Codingéœ‡æ’¼è¿‡ï¼Œæˆ–è€…è¿˜åœ¨è¿·èŒ«æ€ä¹ˆä¸Šè½¦ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºèŠèŠã€‚ä¸ç®¡æ˜¯æŠ€æœ¯æ ˆè¿˜æ˜¯å…·ä½“åœºæ™¯ï¼Œå’±ä»¬ä¸€èµ·æ¢è®¨ã€‚</p>
<p><strong>è§‰å¾—æœ‰ç”¨çš„è€é“ï¼Œç‚¹ä¸ªèµæ”¶ä¸ªè—ï¼Œå…³ä¸ªæ³¨ä¸è¿·è·¯ã€‚æˆ‘ç»§ç»­åˆ†äº«å®æˆ˜å¹²è´§ï¼Œå¸¦å¤§å®¶ä¸€èµ·åœ¨æŠ€æœ¯æµªæ½®é‡Œç¨³ä½é˜µè„šï¼</strong>
ä¹Ÿå¯ä»¥å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šFlutterä¸­æ–‡ç¤¾åŒº</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[APIæ¥å£å®‰å…¨è®¾è®¡ï¼šåŠ¨æ€ç›å€¼ä¸ç­¾åæœºåˆ¶çš„å®ç°ä¸å‰–æ]]></title>    <link>https://juejin.cn/post/7591066233670500378</link>    <guid>https://juejin.cn/post/7591066233670500378</guid>    <pubDate>2026-01-04T04:26:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591066233670500378" data-draft-id="7590961898399301670" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="APIæ¥å£å®‰å…¨è®¾è®¡ï¼šåŠ¨æ€ç›å€¼ä¸ç­¾åæœºåˆ¶çš„å®ç°ä¸å‰–æ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-04T04:26:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ€æ³•å¦‚é£"/> <meta itemprop="url" content="https://juejin.cn/user/96412755834734"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            APIæ¥å£å®‰å…¨è®¾è®¡ï¼šåŠ¨æ€ç›å€¼ä¸ç­¾åæœºåˆ¶çš„å®ç°ä¸å‰–æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412755834734/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ€æ³•å¦‚é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T04:26:27.000Z" title="Sun Jan 04 2026 04:26:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">APIæ¥å£å®‰å…¨è®¾è®¡ï¼šåŠ¨æ€ç›å€¼ä¸ç­¾åæœºåˆ¶çš„å®ç°ä¸å‰–æ</h2>
<h3 data-id="heading-1">ä¸€ã€ç­¾åæœºåˆ¶æ¦‚è¿°</h3>
<p>åœ¨Webåº”ç”¨å¼€å‘ä¸­ï¼ŒAPIæ¥å£çš„å®‰å…¨æ€§è‡³å…³é‡è¦ã€‚éšç€å‰åç«¯åˆ†ç¦»æ¶æ„çš„æ™®åŠï¼Œå¦‚ä½•ç¡®ä¿APIè°ƒç”¨çš„åˆæ³•æ€§ã€é˜²æ­¢æ•°æ®ç¯¡æ”¹ã€æŠµå¾¡é‡æ”¾æ”»å‡»ï¼Œæˆä¸ºæ¯ä¸ªå¼€å‘è€…å¿…é¡»é¢å¯¹çš„é—®é¢˜ã€‚é€šå¸¸æƒ…å†µéƒ½æ˜¯ç­¾åæœºåˆ¶ï¼Œä½†å¦‚ä½•è®¾è®¡å’Œå®ç°ç­¾åæœºåˆ¶éœ€è¦ä»”ç»†è€ƒè™‘ï¼Œæ—¢ä¸èƒ½è¿‡äºç¹çï¼Œå¸¦æ¥å¼€å‘è´Ÿæ‹…ï¼Œä¹Ÿä¸èƒ½å¤ªå°‘ï¼Œç¼ºä¹å®‰å…¨æ€§ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»ä¸€å¥—å®Œæ•´çš„<strong>åŠ¨æ€ç›å€¼ + æ¥å£ç­¾å</strong>å®‰å…¨æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>å¤šå±‚é˜²æŠ¤</strong>ï¼šåŠ¨æ€ç›å€¼ + æ¥å£ç­¾ååŒé‡éªŒè¯</li>
<li><strong>é˜²é‡æ”¾æ”»å‡»</strong>ï¼šåŸºäºæ—¶é—´æˆ³çš„æœ‰æ•ˆæœŸæ§åˆ¶</li>
<li><strong>é˜²ç¯¡æ”¹</strong>ï¼šå‚æ•°ç­¾åç¡®ä¿æ•°æ®å®Œæ•´æ€§</li>
<li><strong>çµæ´»é…ç½®</strong>ï¼šæ”¯æŒå«å‚æ•°/ä¸å«å‚æ•°ä¸¤ç§ç­¾åæ¨¡å¼</li>
<li><strong>æ˜“äºæ‰©å±•</strong>ï¼šæ”¯æŒå¤šç§ç®—æ³•ï¼ˆSHA-256ã€SM3ç­‰ï¼‰</li>
</ul>
<p><strong>å®Œæ•´ä»£ç è§ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrowind%2Fdesign-patterns%2Ftree%2Fmain%2Fpractice-projects" target="_blank" title="https://github.com/microwind/design-patterns/tree/main/practice-projects" ref="nofollow noopener noreferrer">github.com/microwind/dâ€¦</a></p>
<p><strong>ç­¾åè¯¦ç»†æœºåˆ¶ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrowind%2Fdesign-patterns%2Fblob%2Fmain%2Fpractice-projects%2Fknife%2FSIGN.md" target="_blank" title="https://github.com/microwind/design-patterns/blob/main/practice-projects/knife/SIGN.md" ref="nofollow noopener noreferrer">github.com/microwind/dâ€¦</a></p>
<h4 data-id="heading-2">1.1 é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>å‰åç«¯åˆ†ç¦»çš„Webåº”ç”¨</li>
<li>H5é¡µé¢ã€å°ç¨‹åºç­‰å¤šç«¯è°ƒç”¨</li>
<li>éœ€è¦è¾ƒé«˜å®‰å…¨æ€§çš„ä¸šåŠ¡æ¥å£ï¼ˆæ”¯ä»˜ã€äº¤æ˜“ã€æ•æ„Ÿæ•°æ®æ“ä½œç­‰ï¼‰</li>
<li>éœ€è¦é˜²æ­¢æ¥å£è¢«æ¶æ„è°ƒç”¨æˆ–åˆ·é‡</li>
</ul>
<h4 data-id="heading-3">1.2 ä¸¤ç§ç­¾åæ¨¡å¼</h4>
<p>æ ¹æ®è°ƒç”¨æ–¹æ˜¯å¦èƒ½å®‰å…¨å­˜å‚¨å¯†é’¥ï¼Œæœ¬æ–¹æ¡ˆæ”¯æŒä¸¤ç§ç­¾åæ¨¡å¼ï¼š</p>
<h5 data-id="heading-4">æ¨¡å¼1ï¼šå‰ç«¯ç­¾åï¼ˆéœ€è¦åŠ¨æ€ç›å€¼ï¼‰</h5>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> å‰ç«¯ï¼ˆH5ã€å°ç¨‹åºã€ç§»åŠ¨Appï¼‰è°ƒç”¨åç«¯æ¥å£</p>
<p><strong>æ ¸å¿ƒé—®é¢˜ï¼š</strong> å‰ç«¯æ— æ³•å®‰å…¨å­˜å‚¨å¯†é’¥ï¼ˆsecretKeyï¼‰ï¼Œå¯†é’¥ä¸€æ—¦æš´éœ²åœ¨å‰ç«¯ä»£ç ä¸­ï¼Œä»»ä½•äººéƒ½å¯ä»¥è·å–å¹¶ä¼ªé€ ç­¾åã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> ä½¿ç”¨<strong>åŠ¨æ€ç›å€¼</strong>ä½œä¸ºä¸­é—´å±‚ä¿æŠ¤</p>
<ol>
<li>å‰ç«¯è¯·æ±‚åŠ¨æ€ç›å€¼ç”Ÿæˆæ¥å£ï¼ˆå…¬å¼€æ¥å£ï¼Œæ— éœ€å¯†é’¥ï¼‰</li>
<li>æœåŠ¡ç«¯ç”ŸæˆåŠ¨æ€ç›å€¼å¹¶è¿”å›</li>
<li>å‰ç«¯æºå¸¦åŠ¨æ€ç›å€¼è¯·æ±‚ç­¾åç”Ÿæˆæ¥å£</li>
<li>æœåŠ¡ç«¯éªŒè¯åŠ¨æ€ç›å€¼åï¼Œä½¿ç”¨å¯†é’¥ç”Ÿæˆç­¾åå¹¶è¿”å›</li>
<li>å‰ç«¯æºå¸¦ç­¾åè°ƒç”¨ä¸šåŠ¡æ¥å£</li>
</ol>
<p><strong>å…³é”®ç‚¹ï¼š</strong> å¯†é’¥å§‹ç»ˆå­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œå‰ç«¯åªèƒ½é€šè¿‡åŠ¨æ€ç›å€¼æ¢å–ç­¾åï¼Œæ— æ³•ç›´æ¥è·å–å¯†é’¥ã€‚</p>
<hr/>
<h5 data-id="heading-5">æ¨¡å¼2ï¼šåç«¯ç­¾åï¼ˆæ— éœ€åŠ¨æ€ç›å€¼ï¼‰</h5>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> åç«¯æœåŠ¡ï¼ˆå¾®æœåŠ¡ã€å®šæ—¶ä»»åŠ¡ã€å†…éƒ¨ç³»ç»Ÿï¼‰è°ƒç”¨åç«¯æ¥å£</p>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong> åç«¯å¯ä»¥å®‰å…¨å­˜å‚¨å¯†é’¥ï¼ˆç¯å¢ƒå˜é‡ã€é…ç½®ä¸­å¿ƒã€å¯†é’¥ç®¡ç†ç³»ç»Ÿï¼‰ï¼Œæ— éœ€æ‹…å¿ƒå¯†é’¥æ³„éœ²ã€‚</p>
<p><strong>ç®€åŒ–æµç¨‹ï¼š</strong></p>
<ol>
<li>åç«¯ç›´æ¥ä½¿ç”¨å¯†é’¥ç”Ÿæˆç­¾åï¼š<code>SHA256(appCode + secretKey + apiPath + timestamp)</code></li>
<li>åç«¯æºå¸¦ç­¾åè°ƒç”¨ä¸šåŠ¡æ¥å£</li>
<li>ä¸šåŠ¡æ¥å£éªŒè¯ç­¾å</li>
</ol>
<p><strong>å…³é”®ç‚¹ï¼š</strong> è·³è¿‡åŠ¨æ€ç›å€¼æ­¥éª¤ï¼Œç›´æ¥ä½¿ç”¨å¯†é’¥ç­¾åï¼Œæµç¨‹æ›´ç®€æ´é«˜æ•ˆã€‚</p>
<hr/>
<h5 data-id="heading-6">ä¸¤ç§æ¨¡å¼å¯¹æ¯”</h5>








































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>å‰ç«¯ç­¾åï¼ˆéœ€è¦åŠ¨æ€ç›å€¼ï¼‰</th><th>åç«¯ç­¾åï¼ˆæ— éœ€åŠ¨æ€ç›å€¼ï¼‰</th></tr></thead><tbody><tr><td><strong>å¯†é’¥å­˜å‚¨</strong></td><td>âŒ å‰ç«¯æ— æ³•å®‰å…¨å­˜å‚¨</td><td>âœ… åç«¯å¯ä»¥å®‰å…¨å­˜å‚¨</td></tr><tr><td><strong>åŠ¨æ€ç›å€¼</strong></td><td>âœ… å¿…é¡»ä½¿ç”¨</td><td>âŒ ä¸éœ€è¦</td></tr><tr><td><strong>è¯·æ±‚æ¬¡æ•°</strong></td><td>3æ¬¡ï¼ˆç›å€¼+ç­¾å+ä¸šåŠ¡ï¼‰</td><td>1æ¬¡ï¼ˆä¸šåŠ¡æ¥å£ï¼‰</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>é«˜ï¼ˆå¯†é’¥ä¸æš´éœ²ï¼‰</td><td>é«˜ï¼ˆå¯†é’¥å®‰å…¨å­˜å‚¨ï¼‰</td></tr><tr><td><strong>æµç¨‹å¤æ‚åº¦</strong></td><td>è¾ƒå¤æ‚</td><td>ç®€å•</td></tr><tr><td><strong>å…¸å‹åœºæ™¯</strong></td><td>H5ã€å°ç¨‹åºã€App</td><td>å¾®æœåŠ¡ã€å®šæ—¶ä»»åŠ¡ã€å†…éƒ¨ç³»ç»Ÿ</td></tr></tbody></table>
<p><strong>é‡è¦æç¤ºï¼š</strong> æœ¬æ–‡ä¸»è¦ä»‹ç»"å‰ç«¯ç­¾å"æ¨¡å¼ï¼Œå¦‚æœä½ çš„åœºæ™¯æ˜¯åç«¯æœåŠ¡è°ƒç”¨ï¼Œå¯ä»¥ç›´æ¥è·³åˆ°ç¬¬å››ç« ï¼Œä»…ä½¿ç”¨"ä¸å«å‚æ•°ç­¾åç®—æ³•"æˆ–"å«å‚æ•°ç­¾åç®—æ³•"å³å¯ï¼Œæ— éœ€å®ç°åŠ¨æ€ç›å€¼ç›¸å…³é€»è¾‘ã€‚</p>
<h4 data-id="heading-7">1.3 æ ¸å¿ƒç»„ä»¶</h4>
<p>æœ¬æ–¹æ¡ˆåŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š</p>

































<table><thead><tr><th>ç»„ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>APIè°ƒç”¨è€…è¡¨</strong> (api_users)</td><td>å­˜å‚¨è°ƒç”¨æ–¹èº«ä»½æ ‡è¯†ï¼ˆappCodeï¼‰å’Œå¯†é’¥ï¼ˆsecretKeyï¼‰</td></tr><tr><td><strong>APIæ¥å£ä¿¡æ¯è¡¨</strong> (api_info)</td><td>å­˜å‚¨æ¥å£è·¯å¾„ã€æ¥å£å›ºå®šç›å€¼ã€é™æµç­–ç•¥ç­‰</td></tr><tr><td><strong>APIæƒé™è¡¨</strong> (api_auth)</td><td>æ§åˆ¶è°ƒç”¨æ–¹å¯¹å…·ä½“æ¥å£çš„è®¿é—®æƒé™</td></tr><tr><td><strong>åŠ¨æ€ç›å€¼ç”Ÿæˆæ¥å£</strong></td><td>ä¸ºåç»­è°ƒç”¨ç”Ÿæˆä¸€æ¬¡æ€§åŠ¨æ€ç›å€¼</td></tr><tr><td><strong>ç­¾åç”Ÿæˆæ¥å£</strong></td><td>åŸºäºåŠ¨æ€ç›å€¼å’Œå¯†é’¥ç”Ÿæˆæ¥å£è°ƒç”¨ç­¾å</td></tr><tr><td><strong>ä¸šåŠ¡æ¥å£æ‹¦æˆªå™¨</strong></td><td>åœ¨ä¸šåŠ¡æ¥å£è°ƒç”¨å‰éªŒè¯ç­¾åçš„åˆæ³•æ€§</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">äºŒã€ç­¾åæœºåˆ¶åŸç†</h3>
<h4 data-id="heading-9">2.1 æ•´ä½“æµç¨‹</h4>
<p>ç­¾åæœºåˆ¶çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>é€šè¿‡å¤šæ¬¡æ¡æ‰‹ç¡®ä¿è°ƒç”¨æ–¹èº«ä»½å¯ä¿¡ï¼Œå¹¶ä¸ºæ¯æ¬¡ä¸šåŠ¡è¯·æ±‚ç”Ÿæˆå”¯ä¸€ç­¾å</strong>ã€‚</p>
<p>å®Œæ•´çš„è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant H5 as H5å‰ç«¯é¡µé¢
    participant DynamicSaltGenerate as åŠ¨æ€ç›å€¼ç”Ÿæˆæ¥å£
    participant SignGenerate as ç­¾åç”Ÿæˆæ¥å£
    participant SubmitInterface as æŸæäº¤æ¥å£

    Note over H5,DynamicSaltGenerate: 1. è¯·æ±‚ç”ŸæˆåŠ¨æ€ç›å€¼ï¼ˆæ ¹æ®è°ƒç”¨æ–¹å’Œæäº¤æ¥å£ï¼‰
    H5-&gt;&gt;DynamicSaltGenerate: è¯·æ±‚ç”Ÿæˆæäº¤æ¥å£çš„åŠ¨æ€ç›å€¼&lt;br/&gt;ï¼ˆä¼ å‚è°ƒç”¨æ–¹å’Œæäº¤æ¥å£è·¯å¾„ï¼‰
    DynamicSaltGenerate-&gt;&gt;DynamicSaltGenerate: æ ¹æ®è°ƒç”¨æ–¹å’Œæäº¤æ¥å£ç”ŸæˆåŠ¨æ€ç›å€¼&lt;br/&gt;hash(è°ƒç”¨æ–¹ + æäº¤æ¥å£è·¯å¾„ + æäº¤æ¥å£ç›å€¼ + å½“å‰æ—¶é—´æˆ³)
    DynamicSaltGenerate--&gt;&gt;H5: è¿”å›åŠ¨æ€ç›å€¼ä¿¡æ¯&lt;br/&gt;(æäº¤æ¥å£åŠ¨æ€ç›å€¼ã€åŠ¨æ€ç›å€¼ç”Ÿæˆæ—¶é—´æˆ³ã€æäº¤æ¥å£è·¯å¾„)

    Note over H5, SignGenerate: 2. è¯·æ±‚ç”Ÿæˆæ¥å£è°ƒç”¨ç­¾åï¼ˆæ ¹æ®æ¥å£åŠ¨æ€ç›å€¼å’Œæ¥å£è·¯å¾„ï¼‰
    H5-&gt;&gt;H5: è§£æå‚æ•°(æ¥å£åŠ¨æ€ç›å€¼ã€åŠ¨æ€ç›å€¼ç”Ÿæˆæ—¶é—´æˆ³ã€æäº¤æ¥å£è·¯å¾„)
    H5-&gt;&gt;SignGenerate: è¯·æ±‚ç­¾å&lt;br/&gt;(è°ƒç”¨æ–¹ã€æ¥å£åŠ¨æ€ç›å€¼ã€æäº¤æ¥å£è·¯å¾„ã€ç›å€¼ç”Ÿæˆæ—¶é—´æˆ³)

    Note over SignGenerate: 3. ç”Ÿæˆå¹¶è¿”å›æ¥å£è°ƒç”¨ç­¾åï¼ˆæ ¹æ®è°ƒç”¨æ–¹å’Œç§˜é’¥ä»¥åŠæ¥å£è·¯å¾„ï¼‰
    SignGenerate-&gt;&gt;SignGenerate: æƒé™æ ¡éªŒ(æ—¶æ•ˆæ€§ã€æœ¬ç­¾åæ¥å£æƒé™ã€æäº¤æ¥å£æƒé™)
    SignGenerate-&gt;&gt;SignGenerate: åŠ¨æ€ç›å€¼æ ¡éªŒï¼ˆç®—æ³•éœ€ä¸ç”Ÿæˆæ—¶ä¸€è‡´ï¼‰&lt;br&gt;check(è°ƒç”¨æ–¹ + æäº¤æ¥å£è·¯å¾„ + æäº¤æ¥å£ç›å€¼ + ç›å€¼ç”Ÿæˆæ—¶é—´æˆ³)
    SignGenerate-&gt;&gt;SignGenerate: ç”Ÿæˆæ¥å£è°ƒç”¨ç­¾å&lt;br/&gt;hash(è°ƒç”¨æ–¹ + ç§˜é’¥ + å½“å‰æ—¶é—´æˆ³ + æäº¤æ¥å£è·¯å¾„æˆ–å‚æ•°) &lt;br/&gt;æ³¨æ„ï¼šç­¾åä¸æ ¡éªŒç®—æ³•éœ€ä¿æŒä¸€è‡´ï¼Œå¦‚æœåªhash(è°ƒç”¨æ–¹ + ç§˜é’¥ + å½“å‰æ—¶é—´æˆ³)ä¹Ÿå¯ä»¥ã€‚
    SignGenerate--&gt;&gt;H5: è¿”å›ç­¾åç»“æœ&lt;br/&gt;(æäº¤æ¥å£è·¯å¾„ã€ç­¾åã€ç­¾åæ—¶é—´æˆ³)

    Note over H5, SubmitInterface: 4. è°ƒç”¨æŸæäº¤æ¥å£ï¼ˆæºå¸¦ç­¾åï¼‰
    H5-&gt;&gt;SubmitInterface: æäº¤æ•°æ®ï¼Œæºå¸¦ç­¾åä¿¡æ¯&lt;br/&gt;(è°ƒç”¨æ–¹+æ¥å£è·¯å¾„+ç­¾å+ç­¾åæ—¶é—´æˆ³)

    Note over SubmitInterface: 5. æ¥å£ç­¾åæ ¡éªŒï¼ˆä¿å­˜å‰æ£€æŸ¥ï¼‰
    SubmitInterface-&gt;&gt;SubmitInterface: æƒé™æ ¡éªŒ(æ—¶æ•ˆæ€§ã€æœ¬æäº¤æ¥å£æƒé™)
    SubmitInterface-&gt;&gt;SubmitInterface: ç­¾åæ ¡éªŒ(æ ¡éªŒç®—æ³•ä¸å‰é¢ç­¾åéœ€ä¿æŒä¸€è‡´)&lt;br/&gt;check(è°ƒç”¨æ–¹ + ç§˜é’¥ + ç­¾åæ—¶é—´æˆ³ + æ¥å£è·¯å¾„æˆ–å‚æ•°)
    SubmitInterface--&gt;&gt;H5: è¿”å›å¤„ç†ç»“æœ
</code></pre>
<h4 data-id="heading-10">2.2 ä¸ºä»€ä¹ˆéœ€è¦"åŠ¨æ€ç›å€¼"ï¼Ÿ</h4>
<p>ä½ å¯èƒ½ä¼šé—®ï¼š<strong>ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”Ÿæˆç­¾åï¼Œè€Œè¦å…ˆç”ŸæˆåŠ¨æ€ç›å€¼ï¼Ÿ</strong></p>
<p><strong>æ ¸å¿ƒåŸå› ï¼šå‰ç«¯æ— æ³•å®‰å…¨å­˜å‚¨å¯†é’¥ã€‚</strong></p>
<p>åœ¨å‰ç«¯ç­¾ååœºæ™¯ä¸­ï¼Œå¦‚æœå‰ç«¯ç›´æ¥æŒæœ‰ <code>secretKey</code> å¹¶ç”Ÿæˆç­¾åï¼Œå¯†é’¥ä¼šè¢«æš´éœ²åœ¨å‰ç«¯ä»£ç ä¸­ï¼ˆJavaScriptã€ç§»åŠ¨Appçš„é…ç½®æ–‡ä»¶ç­‰ï¼‰ï¼Œä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·æˆ–åç¼–è¯‘è·å–å¯†é’¥ï¼Œä»è€Œä¼ªé€ ç­¾åã€‚</p>
<p><strong>åŠ¨æ€ç›å€¼çš„ä½œç”¨ï¼š</strong></p>
<p>åŠ¨æ€ç›å€¼æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª**"æ¢ç­¾å‡­è¯"**ï¼Œå®ƒè§£å†³äº†å‰ç«¯æ— æ³•æŒæœ‰å¯†é’¥çš„é—®é¢˜ï¼š</p>
<ol>
<li><strong>å¯†é’¥éš”ç¦»</strong>ï¼šå¯†é’¥ï¼ˆsecretKeyï¼‰å§‹ç»ˆä¿å­˜åœ¨æœåŠ¡ç«¯ï¼Œå‰ç«¯æ°¸è¿œæ— æ³•è·å–</li>
<li><strong>æ—¶æ•ˆä¿æŠ¤</strong>ï¼šåŠ¨æ€ç›å€¼ä½œä¸º"ä¸€æ¬¡æ€§ä»¤ç‰Œ"ï¼Œæœ‰ç‹¬ç«‹çš„è¿‡æœŸæ—¶é—´ï¼ˆå¦‚24å°æ—¶ï¼‰</li>
<li><strong>æ¥å£éš”ç¦»</strong>ï¼šæ¯ä¸ªæ¥å£æœ‰ç‹¬ç«‹çš„å›ºå®šç›å€¼ï¼ŒåŠ¨æ€ç›å€¼åŸºäºå›ºå®šç›å€¼ç”Ÿæˆï¼Œç¡®ä¿ä¸åŒæ¥å£çš„ç­¾åäº’ä¸å½±å“</li>
<li><strong>åŒé‡æ—¶æ•ˆæ§åˆ¶</strong>ï¼šåŠ¨æ€ç›å€¼æœ‰æ•ˆæœŸï¼ˆé•¿ï¼Œå¦‚24hï¼‰ + ç­¾åæœ‰æ•ˆæœŸï¼ˆçŸ­ï¼Œå¦‚10minï¼‰ï¼Œå½¢æˆåŒå±‚é˜²æŠ¤</li>
</ol>
<p><strong>å¯¹æ¯”ç¤ºæ„ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">âŒ ä¸å®‰å…¨æ–¹å¼ï¼ˆå‰ç«¯ç›´æ¥æŒæœ‰å¯†é’¥ï¼‰ï¼š
å‰ç«¯ä»£ç ï¼šconst <span class="hljs-attr">secretKey</span> = <span class="hljs-string">"abc123"</span><span class="hljs-comment">;  // å¯†é’¥æš´éœ²</span>
å‰ç«¯ç”Ÿæˆç­¾åï¼š<span class="hljs-attr">sign</span> = SHA256(appCode + secretKey + path + time)<span class="hljs-comment">;</span>

âœ… å®‰å…¨æ–¹å¼ï¼ˆåŠ¨æ€ç›å€¼ï¼‰ï¼š
å‰ç«¯è·å–åŠ¨æ€ç›å€¼ï¼š<span class="hljs-attr">dynamicSalt</span> = è¯·æ±‚æœåŠ¡ç«¯<span class="hljs-comment">;  // æ— éœ€å¯†é’¥</span>
å‰ç«¯æ¢å–ç­¾åï¼š<span class="hljs-attr">sign</span> = è¯·æ±‚æœåŠ¡ç«¯(dynamicSalt)<span class="hljs-comment">;  // æœåŠ¡ç«¯éªŒè¯åè¿”å›ç­¾å</span>
å‰ç«¯è°ƒç”¨ä¸šåŠ¡æ¥å£ï¼šæºå¸¦ sign
</code></pre>
<p><strong>é‡è¦è¯´æ˜ï¼š</strong> å¦‚æœæ˜¯<strong>åç«¯ç­¾ååœºæ™¯</strong>ï¼ˆå¦‚å¾®æœåŠ¡è°ƒç”¨ã€å®šæ—¶ä»»åŠ¡ï¼‰ï¼Œåç«¯å¯ä»¥å®‰å…¨å­˜å‚¨å¯†é’¥ï¼Œ<strong>æ— éœ€ä½¿ç”¨åŠ¨æ€ç›å€¼</strong>ï¼Œç›´æ¥ä½¿ç”¨å¯†é’¥ç”Ÿæˆç­¾åå³å¯ï¼ˆå‚è§ 1.2 èŠ‚ï¼‰ã€‚</p>
<h4 data-id="heading-11">2.3 å…³é”®è®¾è®¡æ€æƒ³</h4>

























<table><thead><tr><th>è®¾è®¡ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åŒé‡æ—¶é—´æˆ³</strong></td><td>åŠ¨æ€ç›å€¼æ—¶é—´æˆ³ï¼ˆé•¿æ•ˆï¼Œå¦‚24hï¼‰ + ç­¾åæ—¶é—´æˆ³ï¼ˆçŸ­æ•ˆï¼Œå¦‚10minï¼‰</td></tr><tr><td><strong>åˆ†å±‚éªŒè¯</strong></td><td>å…ˆéªŒè¯åŠ¨æ€ç›å€¼æœ‰æ•ˆæ€§ï¼Œå†éªŒè¯ç­¾åæœ‰æ•ˆæ€§</td></tr><tr><td><strong>æƒé™åˆ†ç¦»</strong></td><td>APIè°ƒç”¨è€…æƒé™ã€æ¥å£æƒé™ã€è°ƒç”¨è€…-æ¥å£æ˜ å°„æƒé™ä¸‰å±‚ç®¡ç†</td></tr><tr><td><strong>ç®—æ³•çµæ´»</strong></td><td>æ”¯æŒ SHA-256ã€SM3 ç­‰å¤šç§å“ˆå¸Œç®—æ³•</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-12">ä¸‰ã€åŠ¨æ€ç›å€¼æœºåˆ¶</h3>
<blockquote>
<p><strong>é€‚ç”¨åœºæ™¯è¯´æ˜ï¼š</strong> æœ¬ç« èŠ‚ä»‹ç»çš„åŠ¨æ€ç›å€¼æœºåˆ¶é€‚ç”¨äº<strong>å‰ç«¯ç­¾ååœºæ™¯</strong>ã€‚å¦‚æœä½ çš„åœºæ™¯æ˜¯åç«¯æœåŠ¡è°ƒç”¨ï¼ˆå¯†é’¥å¯å®‰å…¨å­˜å‚¨ï¼‰ï¼Œå¯ä»¥è·³è¿‡æœ¬ç« ï¼Œç›´æ¥é˜…è¯»ç¬¬å››ç« çš„ç­¾åç®—æ³•ã€‚</p>
</blockquote>
<h4 data-id="heading-13">3.1 åŠ¨æ€ç›å€¼çš„ç”Ÿæˆ</h4>
<p>åŠ¨æ€ç›å€¼ç”Ÿæˆç®—æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç </span>
<span class="hljs-type">String</span> <span class="hljs-variable">dynamicSalt</span> <span class="hljs-operator">=</span> SHA256(appCode + apiPath + interfaceSalt + saltTimestamp);
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>appCode</code>ï¼šè°ƒç”¨æ–¹æ ‡è¯†ï¼ˆå¦‚ "h5"ã€"miniapp"ï¼‰</li>
<li><code>apiPath</code>ï¼šç›®æ ‡æ¥å£è·¯å¾„ï¼ˆå¦‚ "/api/order/submit"ï¼‰</li>
<li><code>interfaceSalt</code>ï¼šæ¥å£å›ºå®šç›å€¼ï¼ˆä» api_info è¡¨è¯»å–ï¼‰</li>
<li><code>saltTimestamp</code>ï¼šåŠ¨æ€ç›å€¼ç”Ÿæˆæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰</li>
</ul>
<p><strong>å®é™…ä»£ç å®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> DynamicSalt <span class="hljs-title function_">generateDynamicSalt</span><span class="hljs-params">(String appCode, String apiPath,
                                       String interfaceSalt, Long saltTimestamp)</span> {
    <span class="hljs-comment">// æ‹¼æ¥åŸå§‹å­—ç¬¦ä¸²</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">saltSource</span> <span class="hljs-operator">=</span> appCode + apiPath + interfaceSalt + saltTimestamp;

    <span class="hljs-comment">// ä½¿ç”¨ SHA-256 è®¡ç®—åŠ¨æ€ç›å€¼</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">dynamicSaltValue</span> <span class="hljs-operator">=</span> sha256(saltSource);

    <span class="hljs-comment">// è®¡ç®—è¿‡æœŸæ—¶é—´</span>
    <span class="hljs-type">Long</span> <span class="hljs-variable">ttl</span> <span class="hljs-operator">=</span> signConfig.getDynamicSaltTtl(); <span class="hljs-comment">// é»˜è®¤ 24 å°æ—¶</span>
    <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">expireTime</span> <span class="hljs-operator">=</span> Instant.ofEpochMilli(saltTimestamp + ttl)
            .atZone(ZoneId.systemDefault())
            .toLocalDateTime();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicSalt</span>(appCode, apiPath, dynamicSaltValue, expireTime, saltTimestamp);
}
</code></pre>
<h4 data-id="heading-14">3.2 åŠ¨æ€ç›å€¼çš„æ ¡éªŒ</h4>
<p>åœ¨ç­¾åç”Ÿæˆæ¥å£ä¸­ï¼Œéœ€è¦å…ˆæ ¡éªŒå‰ç«¯ä¼ æ¥çš„åŠ¨æ€ç›å€¼æ˜¯å¦åˆæ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç </span>
<span class="hljs-type">boolean</span> <span class="hljs-title function_">validateDynamicSalt</span><span class="hljs-params">(String appCode, String apiPath, String interfaceSalt,
                           String dynamicSalt, Long saltTimestamp)</span> {
    <span class="hljs-comment">// é‡æ–°è®¡ç®—åŠ¨æ€ç›å€¼</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">expectedSalt</span> <span class="hljs-operator">=</span> SHA256(appCode + apiPath + interfaceSalt + saltTimestamp);

    <span class="hljs-comment">// æ¯”å¯¹æ˜¯å¦ä¸€è‡´</span>
    <span class="hljs-keyword">return</span> expectedSalt.equals(dynamicSalt);
}
</code></pre>
<p><strong>æ ¡éªŒé€»è¾‘ï¼š</strong></p>
<ol>
<li>ä½¿ç”¨ç›¸åŒçš„å‚æ•°é‡æ–°è®¡ç®—åŠ¨æ€ç›å€¼</li>
<li>å°†è®¡ç®—ç»“æœä¸å®¢æˆ·ç«¯ä¼ æ¥çš„åŠ¨æ€ç›å€¼æ¯”å¯¹</li>
<li>æ ¡éªŒæ—¶é—´æˆ³æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ï¼ˆé€šè¿‡ <code>saltTimestamp + ttl</code> åˆ¤æ–­ï¼‰</li>
</ol>
<h4 data-id="heading-15">3.3 ä¸¤ç§æ ¡éªŒæ¨¡å¼</h4>
<p>åŠ¨æ€ç›å€¼æ”¯æŒä¸¤ç§æ ¡éªŒæ¨¡å¼ï¼š</p>




















<table><thead><tr><th>æ¨¡å¼</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>ç®—æ³•æ ¡éªŒ</strong></td><td>ä¸å­˜å‚¨åŠ¨æ€ç›å€¼ï¼Œæ¯æ¬¡é€šè¿‡ç®—æ³•é‡æ–°è®¡ç®—å¹¶æ¯”å¯¹</td><td>é»˜è®¤æ¨¡å¼ï¼Œæ€§èƒ½é«˜ï¼Œæ— éœ€é¢å¤–å­˜å‚¨</td></tr><tr><td><strong>æ•°æ®åº“æ ¡éªŒ</strong></td><td>å°†åŠ¨æ€ç›å€¼å­˜å…¥ <code>api_dynamic_salt_log</code> è¡¨ï¼Œæ ¡éªŒæ—¶æŸ¥è¯¢æ•°æ®åº“</td><td>éœ€è¦ä¸¥æ ¼æ§åˆ¶ä¸€æ¬¡æ€§ä½¿ç”¨ï¼ˆé˜²æ­¢é‡å¤ä½¿ç”¨ï¼‰</td></tr></tbody></table>
<p>é…ç½®æ–¹å¼ï¼ˆapplication.ymlï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">sign:</span>
  <span class="hljs-attr">dynamic-salt:</span>
    <span class="hljs-attr">ttl:</span> <span class="hljs-number">86400000</span>  <span class="hljs-comment"># 24å°æ—¶</span>
    <span class="hljs-attr">validate-from-database:</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># true è¡¨ç¤ºä½¿ç”¨æ•°æ®åº“æ ¡éªŒ</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">å››ã€ç­¾åç®—æ³•ï¼ˆå«å‚æ•°ä¸ä¸å«å‚æ•°ï¼‰</h3>
<h4 data-id="heading-17">4.1 ä¸å«å‚æ•°çš„ç­¾åç®—æ³•</h4>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> GETè¯·æ±‚ã€æ— éœ€æ ¡éªŒå‚æ•°å®Œæ•´æ€§çš„åœºæ™¯</p>
<p><strong>ç”Ÿæˆç®—æ³•ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç </span>
<span class="hljs-type">String</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> SHA256(appCode + secretKey + apiPath + timestamp);
</code></pre>
<p><strong>å®é™…ä»£ç å®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Sign <span class="hljs-title function_">generateSign</span><span class="hljs-params">(String appCode, String secretKey, String path)</span> {
    <span class="hljs-comment">// è·å–å½“å‰æ—¶é—´æˆ³</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

    <span class="hljs-comment">// æ„å»ºç­¾åæºå­—ç¬¦ä¸²</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">signSource</span> <span class="hljs-operator">=</span> appCode + secretKey + path + timestamp;

    <span class="hljs-comment">// ä½¿ç”¨ SHA-256 è®¡ç®—ç­¾å</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">signValue</span> <span class="hljs-operator">=</span> sha256(signSource);

    <span class="hljs-comment">// è®¡ç®—è¿‡æœŸæ—¶é—´</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">expireTimestamp</span> <span class="hljs-operator">=</span> timestamp + signConfig.getSignatureTtl(); <span class="hljs-comment">// é»˜è®¤ 10 åˆ†é’Ÿ</span>

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sign</span>(appCode, path, signValue, timestamp, expireTime);
}
</code></pre>
<p><strong>æ ¡éªŒç®—æ³•ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç </span>
<span class="hljs-type">boolean</span> <span class="hljs-title function_">validateSign</span><span class="hljs-params">(String appCode, String secretKey, String path,
                    String signValue, Long timestamp)</span> {
    <span class="hljs-comment">// é‡æ–°è®¡ç®—ç­¾å</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">expectedSign</span> <span class="hljs-operator">=</span> SHA256(appCode + secretKey + path + timestamp);

    <span class="hljs-comment">// æ¯”å¯¹æ˜¯å¦ä¸€è‡´</span>
    <span class="hljs-keyword">return</span> expectedSign.equals(signValue);
}
</code></pre>
<h4 data-id="heading-18">4.2 å«å‚æ•°çš„ç­¾åç®—æ³•</h4>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> POSTè¯·æ±‚ã€éœ€è¦é˜²æ­¢å‚æ•°ç¯¡æ”¹çš„åœºæ™¯</p>
<p><strong>ç”Ÿæˆç®—æ³•ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç </span>
<span class="hljs-type">String</span> <span class="hljs-variable">paramsString</span> <span class="hljs-operator">=</span> buildSignatureSource(params); <span class="hljs-comment">// å‚æ•°æŒ‰ ASCII æ’åºåæ‹¼æ¥</span>
<span class="hljs-type">String</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> SM3(paramsString + appCode + secretKey + apiPath + timestamp);
</code></pre>
<p><strong>å®é™…ä»£ç å®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Sign <span class="hljs-title function_">generateSignWithParams</span><span class="hljs-params">(String appCode, String secretKey, String path,
                                   Map&lt;String, Object&gt; params)</span> {
    <span class="hljs-comment">// è·å–å½“å‰æ—¶é—´æˆ³</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

    <span class="hljs-comment">// æ„å»ºå‚æ•°å­—ç¬¦ä¸²ï¼ˆæŒ‰ ASCII æ’åºï¼‰</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">paramsSource</span> <span class="hljs-operator">=</span> SignatureUtil.buildSignatureSource(params);

    <span class="hljs-comment">// æ„å»ºç­¾åæºå­—ç¬¦ä¸²</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">signSource</span> <span class="hljs-operator">=</span> paramsSource + appCode + secretKey + path + timestamp;

    <span class="hljs-comment">// ä½¿ç”¨ SM3 ç®—æ³•è®¡ç®—ç­¾å</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">signValue</span> <span class="hljs-operator">=</span> SmUtil.sm3(signSource);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sign</span>(appCode, path, signValue, timestamp, expireTime);
}
</code></pre>
<h4 data-id="heading-19">4.3 å‚æ•°ç­¾åçš„å…³é”®ï¼šå‚æ•°æ’åº</h4>
<p>ä¸ºç¡®ä¿å‰åç«¯å‚æ•°æ‹¼æ¥é¡ºåºä¸€è‡´ï¼Œéœ€è¦å¯¹å‚æ•°è¿›è¡Œ<strong>ASCIIå­—å…¸åºæ’åº</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">buildSignatureSource</span><span class="hljs-params">(Map&lt;String, Object&gt; parameters)</span> {
    <span class="hljs-keyword">if</span> (parameters.isEmpty()) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    }

    <span class="hljs-comment">// 1. æŒ‰å­—å…¸åºæ’åºå‚æ•°é”®</span>
    List&lt;String&gt; sortedKeys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(parameters.keySet());
    Collections.sort(sortedKeys);

    <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">signatureBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
    <span class="hljs-type">boolean</span> <span class="hljs-variable">first</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">for</span> (String key : sortedKeys) {
        <span class="hljs-type">Object</span> <span class="hljs-variable">paramValue</span> <span class="hljs-operator">=</span> parameters.get(key);

        <span class="hljs-comment">// 2. è·³è¿‡ null å’Œå¤æ‚ç±»å‹</span>
        <span class="hljs-keyword">if</span> (paramValue == <span class="hljs-literal">null</span> || isComplexType(paramValue)) {
            <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-type">String</span> <span class="hljs-variable">valueStr</span> <span class="hljs-operator">=</span> paramValue.toString();
        <span class="hljs-comment">// 3. è·³è¿‡ç©ºä¸²</span>
        <span class="hljs-keyword">if</span> (valueStr.isEmpty()) {
            <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-keyword">if</span> (!first) {
            signatureBuilder.append(<span class="hljs-string">"&amp;"</span>);
        }
        first = <span class="hljs-literal">false</span>;
        signatureBuilder.append(key).append(<span class="hljs-string">"="</span>).append(valueStr);
    }

    <span class="hljs-keyword">return</span> signatureBuilder.toString();
}
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<p>å‡è®¾è¯·æ±‚å‚æ•°ä¸ºï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"userName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¼ ä¸‰"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"mobile"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"19212341234"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"userId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"321123"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"emptyParam"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"emptyNo"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç»è¿‡æ’åºå’Œè¿‡æ»¤åï¼Œå‚æ•°å­—ç¬¦ä¸²ä¸ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">mobile</span>=<span class="hljs-number">19212341234</span>&amp;userId=<span class="hljs-number">321123</span>&amp;userName=å¼ ä¸‰
</code></pre>
<p>æ³¨æ„ï¼š<code>null</code> å’Œç©ºå­—ç¬¦ä¸²ä¼šè¢«è·³è¿‡ã€‚</p>
<h4 data-id="heading-20">4.4 ä¸¤ç§ç®—æ³•çš„å¯¹æ¯”</h4>



































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>ä¸å«å‚æ•°ç­¾å</th><th>å«å‚æ•°ç­¾å</th></tr></thead><tbody><tr><td><strong>ç®—æ³•</strong></td><td>SHA-256</td><td>SM3ï¼ˆå›½å¯†ç®—æ³•ï¼‰</td></tr><tr><td><strong>ç­¾åå†…å®¹</strong></td><td>appCode + secretKey + path + timestamp</td><td>params + appCode + secretKey + path + timestamp</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>ä¸­ç­‰ï¼Œä»…é˜²æ­¢è·¯å¾„ç¯¡æ”¹</td><td>é«˜ï¼Œé˜²æ­¢å‚æ•°ç¯¡æ”¹</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>è¾ƒå¿«</td><td>ç¨æ…¢ï¼ˆéœ€è§£æå‚æ•°ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>GETã€æ— æ•æ„Ÿå‚æ•°çš„æ¥å£</td><td>POSTã€æ”¯ä»˜ã€äº¤æ˜“ç­‰æ•æ„Ÿæ¥å£</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-21">äº”ã€ç­¾åæœºåˆ¶çš„ä½œç”¨</h3>
<h4 data-id="heading-22">5.1 æ ¸å¿ƒå®‰å…¨ä½œç”¨</h4>



































<table><thead><tr><th>ä½œç”¨</th><th>è¯´æ˜</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td><strong>èº«ä»½éªŒè¯</strong></td><td>éªŒè¯è°ƒç”¨æ–¹èº«ä»½æ˜¯å¦åˆæ³•</td><td>é€šè¿‡ appCode + secretKey éªŒè¯</td></tr><tr><td><strong>é˜²é‡æ”¾æ”»å‡»</strong></td><td>é˜²æ­¢æ”»å‡»è€…æˆªè·è¯·æ±‚åé‡å¤å‘é€</td><td>é€šè¿‡æ—¶é—´æˆ³ + TTL é™åˆ¶ç­¾åæœ‰æ•ˆæœŸ</td></tr><tr><td><strong>é˜²ç¯¡æ”¹</strong></td><td>é˜²æ­¢è¯·æ±‚å‚æ•°æˆ–è·¯å¾„è¢«ç¯¡æ”¹</td><td>é€šè¿‡ç­¾åæ ¡éªŒç¡®ä¿æ•°æ®å®Œæ•´æ€§</td></tr><tr><td><strong>æƒé™æ§åˆ¶</strong></td><td>æ§åˆ¶ä¸åŒè°ƒç”¨æ–¹å¯¹ä¸åŒæ¥å£çš„è®¿é—®æƒé™</td><td>é€šè¿‡ api_auth è¡¨ç®¡ç†æƒé™</td></tr><tr><td><strong>é™æµé˜²åˆ·</strong></td><td>é˜²æ­¢æ¥å£è¢«æ¶æ„åˆ·é‡</td><td>é€šè¿‡ api_info è¡¨é…ç½®é™æµç­–ç•¥</td></tr></tbody></table>
<h4 data-id="heading-23">5.2 å…·ä½“é˜²æŠ¤åœºæ™¯</h4>
<h5 data-id="heading-24">åœºæ™¯1ï¼šé˜²æ­¢è¯·æ±‚é‡æ”¾</h5>
<p>æ”»å‡»è€…æˆªè·äº†ä¸€æ¬¡åˆæ³•è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">POST</span> <span class="hljs-string">/api/order/submit</span>
<span class="hljs-attr">Headers:</span>
  <span class="hljs-attr">Sign-appCode:</span> <span class="hljs-string">h5</span>
  <span class="hljs-attr">Sign-sign:</span> <span class="hljs-string">abc123...</span>
  <span class="hljs-attr">Sign-time:</span> <span class="hljs-number">1672531200000</span>
</code></pre>
<p>å½“æ”»å‡»è€…å°è¯•é‡æ”¾è¯¥è¯·æ±‚æ—¶ï¼š</p>
<ul>
<li>å¦‚æœå½“å‰æ—¶é—´è¶…è¿‡ <code>Sign-time + TTL</code>ï¼ˆå¦‚10åˆ†é’Ÿï¼‰ï¼Œç­¾åå·²è¿‡æœŸï¼ŒéªŒè¯å¤±è´¥</li>
<li>å³ä½¿åœ¨æœ‰æ•ˆæœŸå†…ï¼Œç”±äºåŠ¨æ€ç›å€¼å·²è¿‡æœŸï¼ˆ24å°æ—¶ï¼‰ï¼Œæ— æ³•é€šè¿‡åŠ¨æ€ç›å€¼éªŒè¯</li>
</ul>
<h5 data-id="heading-25">åœºæ™¯2ï¼šé˜²æ­¢å‚æ•°ç¯¡æ”¹</h5>
<p>æ­£å¸¸è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"amount"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"productId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ”»å‡»è€…ç¯¡æ”¹å‚æ•°ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"amount"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ç¯¡æ”¹</span>
  <span class="hljs-attr">"productId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç”±äºå‚æ•°å˜åŒ–ï¼Œé‡æ–°è®¡ç®—çš„ç­¾åä¸åŸç­¾åä¸åŒ¹é…ï¼ŒéªŒè¯å¤±è´¥ã€‚</p>
<h5 data-id="heading-26">åœºæ™¯3ï¼šé˜²æ­¢è¶Šæƒè®¿é—®</h5>
<p>è°ƒç”¨æ–¹ "h5" å°è¯•è®¿é—®æœªæˆæƒçš„æ¥å£ "/api/admin/delete"ï¼š</p>
<ul>
<li>åœ¨ api_auth è¡¨ä¸­æŸ¥ä¸åˆ° ("h5", "/api/admin/delete") çš„æˆæƒè®°å½•</li>
<li>æ‹¦æˆªå™¨æ‹’ç»è®¿é—®ï¼Œè¿”å› 401</li>
</ul>
<hr/>
<h3 data-id="heading-27">å…­ã€å¦‚ä½•å–èˆï¼Ÿæ—¢ä¸è¿‡åº¦å¢åŠ å¼€å‘è´Ÿæ‹…ï¼Œåˆèƒ½ä¿è¯å®‰å…¨å¯é </h3>
<h4 data-id="heading-28">6.1 å››ç§å®‰å…¨çº§åˆ«æ–¹æ¡ˆ</h4>
<p>æ ¹æ®ä¸šåŠ¡åœºæ™¯å’Œè°ƒç”¨æ–¹ç±»å‹ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„å®‰å…¨çº§åˆ«ï¼š</p>
<h5 data-id="heading-29">æ–¹æ¡ˆ0ï¼šåç«¯ç›´æ¥ç­¾åï¼ˆæ¨èåç«¯æœåŠ¡ä½¿ç”¨ï¼‰â­</h5>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> åç«¯æœåŠ¡è°ƒç”¨åç«¯æ¥å£ï¼ˆå¾®æœåŠ¡ã€å®šæ—¶ä»»åŠ¡ã€å†…éƒ¨ç³»ç»Ÿï¼‰</p>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong> åç«¯å¯ä»¥å®‰å…¨å­˜å‚¨å¯†é’¥ï¼Œæ— éœ€åŠ¨æ€ç›å€¼ï¼Œæµç¨‹æœ€ç®€æ´</p>
<p><strong>å®ç°æ­¥éª¤ï¼š</strong></p>
<ol>
<li>åç«¯æœåŠ¡è¯»å–å¯†é’¥ï¼ˆä»ç¯å¢ƒå˜é‡ã€é…ç½®ä¸­å¿ƒç­‰ï¼‰</li>
<li>åç«¯ç›´æ¥ç”Ÿæˆç­¾åï¼š<code>SHA256(appCode + secretKey + apiPath + timestamp)</code></li>
<li>åç«¯æºå¸¦ç­¾åè°ƒç”¨ä¸šåŠ¡æ¥å£ï¼ˆHeader: Sign-appCode, Sign-sign, Sign-time, Sign-pathï¼‰</li>
<li>ä¸šåŠ¡æ¥å£éªŒè¯ç­¾å</li>
</ol>
<p><strong>ç¤ºä¾‹ä»£ç ï¼ˆJavaï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åç«¯æœåŠ¡ä¸­çš„ç­¾åç”Ÿæˆ</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateSignForBackend</span><span class="hljs-params">(String appCode, String secretKey, String apiPath)</span> {
    <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
    <span class="hljs-type">String</span> <span class="hljs-variable">signSource</span> <span class="hljs-operator">=</span> appCode + secretKey + apiPath + timestamp;
    <span class="hljs-type">String</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> DigestUtils.sha256Hex(signSource);

    <span class="hljs-comment">// è®¾ç½®åˆ°è¯·æ±‚ Header</span>
    httpRequest.setHeader(<span class="hljs-string">"Sign-appCode"</span>, appCode);
    httpRequest.setHeader(<span class="hljs-string">"Sign-sign"</span>, signature);
    httpRequest.setHeader(<span class="hljs-string">"Sign-time"</span>, String.valueOf(timestamp));
    httpRequest.setHeader(<span class="hljs-string">"Sign-path"</span>, apiPath);

    <span class="hljs-keyword">return</span> signature;
}
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>æµç¨‹æœ€ç®€å•ï¼Œåªéœ€1æ¬¡è¯·æ±‚</li>
<li>æ€§èƒ½æœ€é«˜ï¼Œæ— éœ€é¢å¤–çš„åŠ¨æ€ç›å€¼è¯·æ±‚</li>
<li>å¯†é’¥å®‰å…¨å­˜å‚¨åœ¨åç«¯</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong> æ— </p>
<p><strong>é…ç½®ç¤ºä¾‹ï¼ˆapplication.ymlï¼‰ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">sign:</span>
  <span class="hljs-attr">signature:</span>
    <span class="hljs-attr">ttl:</span> <span class="hljs-number">600000</span>  <span class="hljs-comment"># 10åˆ†é’Ÿ</span>
    <span class="hljs-attr">default-with-params:</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># å¦‚éœ€é˜²å‚æ•°ç¯¡æ”¹ï¼Œè®¾ä¸º true</span>
  <span class="hljs-comment"># æ— éœ€é…ç½® dynamic-salt</span>
</code></pre>
<p><strong>é‡è¦æç¤ºï¼š</strong> åç«¯æœåŠ¡è°ƒç”¨æ—¶ï¼Œå¯†é’¥åº”é€šè¿‡ç¯å¢ƒå˜é‡æˆ–é…ç½®ä¸­å¿ƒç®¡ç†ï¼Œä¸è¦ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ã€‚</p>
<hr/>
<h5 data-id="heading-30">æ–¹æ¡ˆ1ï¼šåŸºç¡€ç­¾åï¼ˆä½å®‰å…¨æ€§ï¼Œå‰ç«¯åœºæ™¯ï¼‰</h5>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> å‰ç«¯è°ƒç”¨ï¼Œå†…éƒ¨ç³»ç»Ÿã€ä½æ•æ„Ÿåº¦æ¥å£ã€ä¿¡ä»»ç¯å¢ƒ</p>
<p><strong>é…ç½®ï¼š</strong></p>
<ul>
<li>ä»…ä½¿ç”¨"ä¸å«å‚æ•°ç­¾å"</li>
<li>ä¸å¯ç”¨åŠ¨æ€ç›å€¼ï¼ˆâš ï¸ æ³¨æ„ï¼šå‰ç«¯éœ€è°ƒç”¨ç­¾åç”Ÿæˆæ¥å£ï¼Œè€Œéç›´æ¥æŒæœ‰å¯†é’¥ï¼‰</li>
<li>ç­¾åæœ‰æ•ˆæœŸè¾ƒé•¿ï¼ˆå¦‚30åˆ†é’Ÿæˆ–2å°æ—¶ï¼‰</li>
</ul>
<p><strong>å®ç°æ­¥éª¤ï¼š</strong></p>
<ol>
<li>å‰ç«¯ç›´æ¥è°ƒç”¨ç­¾åç”Ÿæˆæ¥å£ï¼ˆä¸éœ€è¦å…ˆè·å–åŠ¨æ€ç›å€¼ï¼‰,æˆ–è¿›å…¥é¡µé¢åç”±åç«¯ç”Ÿæˆç­¾åè¿”å›ç»™å‰ç«¯</li>
<li>åç«¯ç”Ÿæˆç­¾åï¼š<code>SHA256(appCode + secretKey + path + timestamp)</code></li>
<li>å‰ç«¯æºå¸¦ç­¾åè°ƒç”¨ä¸šåŠ¡æ¥å£</li>
</ol>
<p><strong>ä¼˜ç‚¹ï¼š</strong> å¼€å‘ç®€å•ï¼Œæ€§èƒ½é«˜
<strong>ç¼ºç‚¹ï¼š</strong> å®‰å…¨æ€§è¾ƒä½ï¼Œä¸é˜²å‚æ•°ç¯¡æ”¹ï¼Œå‰ç«¯ä»éœ€é¢å¤–è¯·æ±‚ç­¾å</p>
<hr/>
<h5 data-id="heading-31">æ–¹æ¡ˆ2ï¼šæ ‡å‡†ç­¾åï¼ˆä¸­å®‰å…¨æ€§ï¼Œå‰ç«¯åœºæ™¯ï¼‰â­ å‰ç«¯æ¨è</h5>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> å‰ç«¯è°ƒç”¨ï¼Œå¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ã€å‰åç«¯åˆ†ç¦»åº”ç”¨</p>
<p><strong>é…ç½®ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨"ä¸å«å‚æ•°ç­¾å"</li>
<li>å¯ç”¨åŠ¨æ€ç›å€¼ï¼ˆç®—æ³•æ ¡éªŒæ¨¡å¼ï¼‰</li>
<li>åŠ¨æ€ç›å€¼æœ‰æ•ˆæœŸï¼š24å°æ—¶</li>
<li>ç­¾åæœ‰æ•ˆæœŸï¼š10åˆ†é’Ÿ</li>
</ul>
<p><strong>å®ç°æ­¥éª¤ï¼š</strong></p>
<ol>
<li>å‰ç«¯è¯·æ±‚åŠ¨æ€ç›å€¼ç”Ÿæˆæ¥å£</li>
<li>å‰ç«¯æºå¸¦åŠ¨æ€ç›å€¼è¯·æ±‚ç­¾åç”Ÿæˆæ¥å£</li>
<li>åç«¯éªŒè¯åŠ¨æ€ç›å€¼ â†’ ç”Ÿæˆç­¾å</li>
<li>å‰ç«¯æºå¸¦ç­¾åè°ƒç”¨ä¸šåŠ¡æ¥å£</li>
<li>åç«¯éªŒè¯ç­¾å</li>
</ol>
<p><strong>ä¼˜ç‚¹ï¼š</strong> å®‰å…¨æ€§å¥½ï¼Œå¼€å‘è´Ÿæ‹…é€‚ä¸­
<strong>ç¼ºç‚¹ï¼š</strong> éœ€è¦å¤šä¸€æ¬¡åŠ¨æ€ç›å€¼è¯·æ±‚</p>
<p>é…ç½®ç¤ºä¾‹ï¼ˆapplication.ymlï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">sign:</span>
  <span class="hljs-attr">dynamic-salt:</span>
    <span class="hljs-attr">ttl:</span> <span class="hljs-number">86400000</span>  <span class="hljs-comment"># 24å°æ—¶</span>
    <span class="hljs-attr">validate-from-database:</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># ç®—æ³•æ ¡éªŒ</span>
  <span class="hljs-attr">signature:</span>
    <span class="hljs-attr">ttl:</span> <span class="hljs-number">600000</span>  <span class="hljs-comment"># 10åˆ†é’Ÿ</span>
    <span class="hljs-attr">default-with-params:</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># ä¸å«å‚æ•°</span>
</code></pre>
<hr/>
<h5 data-id="heading-32">æ–¹æ¡ˆ3ï¼šé«˜å®‰å…¨ç­¾åï¼ˆé«˜å®‰å…¨æ€§ï¼Œå‰ç«¯åœºæ™¯ï¼‰</h5>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> å‰ç«¯è°ƒç”¨ï¼Œæ”¯ä»˜ã€äº¤æ˜“ã€æ•æ„Ÿæ•°æ®æ“ä½œ</p>
<p><strong>é…ç½®ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨"å«å‚æ•°ç­¾å"ï¼ˆSM3ç®—æ³•ï¼‰</li>
<li>å¯ç”¨åŠ¨æ€ç›å€¼ï¼ˆæ•°æ®åº“æ ¡éªŒæ¨¡å¼ï¼‰</li>
<li>åŠ¨æ€ç›å€¼ä¸€æ¬¡æ€§ä½¿ç”¨ï¼ˆused å­—æ®µæ ‡è®°ï¼‰</li>
<li>ç­¾åæœ‰æ•ˆæœŸï¼š10åˆ†é’Ÿ</li>
</ul>
<p><strong>å®ç°æ­¥éª¤ï¼š</strong></p>
<ol>
<li>å‰ç«¯è¯·æ±‚åŠ¨æ€ç›å€¼ç”Ÿæˆæ¥å£</li>
<li>åç«¯ç”ŸæˆåŠ¨æ€ç›å€¼å¹¶<strong>å­˜å…¥æ•°æ®åº“</strong>ï¼ˆapi_dynamic_salt_logè¡¨ï¼‰</li>
<li>å‰ç«¯æºå¸¦åŠ¨æ€ç›å€¼è¯·æ±‚ç­¾åç”Ÿæˆæ¥å£</li>
<li>åç«¯ä»æ•°æ®åº“æŸ¥è¯¢åŠ¨æ€ç›å€¼ï¼Œæ ¡éªŒå<strong>æ ‡è®°ä¸ºå·²ä½¿ç”¨</strong></li>
<li>åç«¯ç”Ÿæˆå«å‚æ•°ç­¾å</li>
<li>å‰ç«¯æºå¸¦ç­¾åå’Œå‚æ•°è°ƒç”¨ä¸šåŠ¡æ¥å£</li>
<li>åç«¯æå–å‚æ•°ï¼ŒéªŒè¯ç­¾åï¼ˆåŒ…å«å‚æ•°ï¼‰</li>
</ol>
<p><strong>ä¼˜ç‚¹ï¼š</strong> å®‰å…¨æ€§æœ€é«˜ï¼Œé˜²å‚æ•°ç¯¡æ”¹ï¼Œé˜²åŠ¨æ€ç›å€¼é‡æ”¾
<strong>ç¼ºç‚¹ï¼š</strong> å¼€å‘å¤æ‚åº¦é«˜ï¼Œæ€§èƒ½ç¨ä½ï¼ˆéœ€è¯»å†™æ•°æ®åº“ï¼‰</p>
<p>é…ç½®ç¤ºä¾‹ï¼ˆapplication.ymlï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">sign:</span>
  <span class="hljs-attr">dynamic-salt:</span>
    <span class="hljs-attr">ttl:</span> <span class="hljs-number">86400000</span>
    <span class="hljs-attr">validate-from-database:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># æ•°æ®åº“æ ¡éªŒ</span>
  <span class="hljs-attr">signature:</span>
    <span class="hljs-attr">ttl:</span> <span class="hljs-number">300000</span>  <span class="hljs-comment"># 5åˆ†é’Ÿ</span>
    <span class="hljs-attr">default-with-params:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å«å‚æ•°</span>
</code></pre>
<hr/>
<h4 data-id="heading-33">6.2 æ–¹æ¡ˆå¯¹æ¯”</h4>











































































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>åç«¯ç›´æ¥ç­¾åâ­</th><th>åŸºç¡€ç­¾åï¼ˆå‰ç«¯ï¼‰</th><th>æ ‡å‡†ç­¾åï¼ˆå‰ç«¯ï¼‰â­</th><th>é«˜å®‰å…¨ç­¾åï¼ˆå‰ç«¯ï¼‰</th></tr></thead><tbody><tr><td><strong>è°ƒç”¨æ–¹</strong></td><td>åç«¯æœåŠ¡</td><td>å‰ç«¯</td><td>å‰ç«¯</td><td>å‰ç«¯</td></tr><tr><td><strong>å¯†é’¥å­˜å‚¨</strong></td><td>âœ… åç«¯å®‰å…¨å­˜å‚¨</td><td>âŒ å‰ç«¯æ— æ³•æŒæœ‰</td><td>âŒ å‰ç«¯æ— æ³•æŒæœ‰</td><td>âŒ å‰ç«¯æ— æ³•æŒæœ‰</td></tr><tr><td><strong>åŠ¨æ€ç›å€¼</strong></td><td>âŒ ä¸éœ€è¦</td><td>âŒ ä¸ä½¿ç”¨</td><td>âœ… ç®—æ³•æ ¡éªŒ</td><td>âœ… æ•°æ®åº“æ ¡éªŒ</td></tr><tr><td><strong>å‚æ•°ç­¾å</strong></td><td>å¯é€‰</td><td>âŒ ä¸å«å‚æ•°</td><td>âŒ ä¸å«å‚æ•°</td><td>âœ… å«å‚æ•°ï¼ˆSM3æˆ–SHA256ï¼‰</td></tr><tr><td><strong>è¯·æ±‚æ¬¡æ•°</strong></td><td>1æ¬¡ï¼ˆç›´æ¥è°ƒç”¨ï¼‰</td><td>2æ¬¡ï¼ˆæ¢ç­¾+ä¸šåŠ¡ï¼‰</td><td>3æ¬¡ï¼ˆç›å€¼+ç­¾å+ä¸šåŠ¡ï¼‰</td><td>3æ¬¡ï¼ˆç›å€¼+ç­¾å+ä¸šåŠ¡ï¼‰</td></tr><tr><td><strong>å®‰å…¨çº§åˆ«</strong></td><td>â­â­â­â­</td><td>â­â­</td><td>â­â­â­â­</td><td>â­â­â­â­â­</td></tr><tr><td><strong>å¼€å‘å¤æ‚åº¦</strong></td><td>æä½</td><td>ä½</td><td>ä¸­</td><td>é«˜</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>æœ€é«˜</td><td>é«˜</td><td>ä¸­</td><td>ä¸­ä½</td></tr><tr><td><strong>å…¸å‹åœºæ™¯</strong></td><td>å¾®æœåŠ¡ã€å®šæ—¶ä»»åŠ¡</td><td>å†…éƒ¨å‰ç«¯ç³»ç»Ÿ</td><td>ä¸€èˆ¬å‰ç«¯åº”ç”¨</td><td>æ”¯ä»˜ã€äº¤æ˜“å‰ç«¯</td></tr></tbody></table>
<p><strong>é€‰æ‹©å»ºè®®ï¼š</strong></p>
<ul>
<li>åç«¯æœåŠ¡è°ƒç”¨ â†’ <strong>æ–¹æ¡ˆ0ï¼šåç«¯ç›´æ¥ç­¾å</strong></li>
<li>å‰ç«¯ä¸€èˆ¬åº”ç”¨ â†’ <strong>æ–¹æ¡ˆ2ï¼šæ ‡å‡†ç­¾å</strong></li>
<li>å‰ç«¯æ”¯ä»˜äº¤æ˜“ â†’ <strong>æ–¹æ¡ˆ3ï¼šé«˜å®‰å…¨ç­¾å</strong></li>
</ul>
<h4 data-id="heading-34">6.3 å®æ–½å»ºè®®</h4>
<ol>
<li>
<p><strong>åŒºåˆ†è°ƒç”¨æ–¹ç±»å‹</strong></p>
<p>é¦–å…ˆæ˜ç¡®è°ƒç”¨æ–¹æ˜¯å‰ç«¯è¿˜æ˜¯åç«¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åç«¯æœåŠ¡è°ƒç”¨ - ç›´æ¥ä½¿ç”¨å¯†é’¥ç­¾åï¼Œæ— éœ€åŠ¨æ€ç›å€¼</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BackendServiceClient</span> {
    <span class="hljs-meta">@Value("${api.app-code}")</span>
    <span class="hljs-keyword">private</span> String appCode;

    <span class="hljs-meta">@Value("${api.secret-key}")</span>
    <span class="hljs-keyword">private</span> String secretKey;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callRemoteApi</span><span class="hljs-params">(String apiPath, Map&lt;String, Object&gt; params)</span> {
        <span class="hljs-comment">// ç›´æ¥ç”Ÿæˆç­¾å</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-type">String</span> <span class="hljs-variable">signSource</span> <span class="hljs-operator">=</span> appCode + secretKey + apiPath + timestamp;
        <span class="hljs-type">String</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> DigestUtils.sha256Hex(signSource);

        <span class="hljs-comment">// å‘é€è¯·æ±‚</span>
        <span class="hljs-type">HttpHeaders</span> <span class="hljs-variable">headers</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>();
        headers.set(<span class="hljs-string">"Sign-appCode"</span>, appCode);
        headers.set(<span class="hljs-string">"Sign-sign"</span>, signature);
        headers.set(<span class="hljs-string">"Sign-time"</span>, String.valueOf(timestamp));
        headers.set(<span class="hljs-string">"Sign-path"</span>, apiPath);

        <span class="hljs-comment">// ... å‘é€ HTTP è¯·æ±‚</span>
    }
}
</code></pre>
</li>
<li>
<p><strong>æŒ‰æ¥å£åˆ†çº§ä¿æŠ¤</strong></p>
<p>å¯ä»¥ä¸ºä¸åŒæ¥å£è®¾ç½®ä¸åŒçš„å®‰å…¨çº§åˆ«ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸ¥è¯¢æ¥å£ - ä¸å«å‚æ•°ç­¾å</span>
<span class="hljs-meta">@RequireSign(withParams = WithParams.FALSE)</span>
<span class="hljs-keyword">public</span> ApiResponse <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">()</span> { ... }

<span class="hljs-comment">// æäº¤æ¥å£ - ä¸å«å‚æ•°ç­¾å</span>
<span class="hljs-meta">@RequireSign(withParams = WithParams.FALSE)</span>
<span class="hljs-keyword">public</span> ApiResponse <span class="hljs-title function_">submitOrder</span><span class="hljs-params">()</span> { ... }

<span class="hljs-comment">// æ”¯ä»˜æ¥å£ - å«å‚æ•°ç­¾åï¼ˆé«˜å®‰å…¨ï¼‰</span>
<span class="hljs-meta">@RequireSign(withParams = WithParams.TRUE)</span>
<span class="hljs-keyword">public</span> ApiResponse <span class="hljs-title function_">payment</span><span class="hljs-params">()</span> { ... }
</code></pre>
</li>
<li>
<p><strong>æ¸è¿›å¼å‡çº§</strong></p>
<ul>
<li>ç¬¬ä¸€é˜¶æ®µï¼šåç«¯æœåŠ¡ä½¿ç”¨æ–¹æ¡ˆ0ï¼ˆç›´æ¥ç­¾åï¼‰</li>
<li>ç¬¬äºŒé˜¶æ®µï¼šå‰ç«¯ä½¿ç”¨æ–¹æ¡ˆ2ï¼ˆåŠ¨æ€ç›å€¼ + ä¸å«å‚æ•°ç­¾åï¼‰</li>
<li>ç¬¬ä¸‰é˜¶æ®µï¼šä¸ºæ•æ„Ÿæ¥å£å‡çº§åˆ°æ–¹æ¡ˆ3ï¼ˆå«å‚æ•°ç­¾åï¼‰</li>
</ul>
</li>
<li>
<p><strong>ç›‘æ§ä¸å‘Šè­¦</strong></p>
<p>è®°å½•ç­¾åéªŒè¯å¤±è´¥çš„æ—¥å¿—ï¼Œè®¾ç½®å‘Šè­¦ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (!isValid) {
    log.warn(<span class="hljs-string">"ç­¾åéªŒè¯å¤±è´¥ - appCode={}, path={}, sign={}"</span>,
             appCode, serverPath, sign);
    <span class="hljs-comment">// è§¦å‘å‘Šè­¦ï¼ˆå¦‚é’‰é’‰ã€é‚®ä»¶ï¼‰</span>
}
</code></pre>
</li>
<li>
<p><strong>ç™½åå•æœºåˆ¶</strong></p>
<p>ä¸ºç‰¹å®šè°ƒç”¨æ–¹ï¼ˆå¦‚è¿ç»´å·¥å…·ï¼‰è®¾ç½®ç™½åå•ï¼Œè·³è¿‡ç­¾åéªŒè¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@IgnoreSignHeader</span>  <span class="hljs-comment">// è·³è¿‡ç­¾åéªŒè¯</span>
<span class="hljs-keyword">public</span> ApiResponse <span class="hljs-title function_">healthCheck</span><span class="hljs-params">()</span> { ... }
</code></pre>
</li>
</ol>
<hr/>
<h3 data-id="heading-35">ä¸ƒã€ä»£ç ä¸‹è½½</h3>
<h4 data-id="heading-36">7.1 å®Œæ•´ä»£ç ç»“æ„</h4>
<pre><code class="hljs language-bash" lang="bash">knife/
â”œâ”€â”€ src/main/java/com/microwind/knife/
â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â””â”€â”€ SignConfig.java              <span class="hljs-comment"># ç­¾åé…ç½®</span>
â”‚   â”‚   â”œâ”€â”€ services/sign/
â”‚   â”‚   â”‚   â”œâ”€â”€ SignService.java             <span class="hljs-comment"># ç­¾ååº”ç”¨æœåŠ¡</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ SignValidationService.java   <span class="hljs-comment"># ç­¾åæ ¡éªŒæœåŠ¡</span>
â”‚   â”‚   â”‚   â””â”€â”€ DynamicSaltValidationService.java  <span class="hljs-comment"># åŠ¨æ€ç›å€¼æ ¡éªŒæœåŠ¡</span>
â”‚   â”‚   â””â”€â”€ dto/sign/
â”‚   â”‚       â”œâ”€â”€ SignDTO.java                 <span class="hljs-comment"># ç­¾åDTO</span>
â”‚   â”‚       â””â”€â”€ DynamicSaltDTO.java          <span class="hljs-comment"># åŠ¨æ€ç›å€¼DTO</span>
â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”œâ”€â”€ sign/
â”‚   â”‚   â”‚   â”œâ”€â”€ SignDomainService.java       <span class="hljs-comment"># ç­¾åé¢†åŸŸæœåŠ¡ï¼ˆæ ¸å¿ƒç®—æ³•ï¼‰</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ Sign.java                    <span class="hljs-comment"># ç­¾åé¢†åŸŸå¯¹è±¡</span>
â”‚   â”‚   â”‚   â””â”€â”€ DynamicSalt.java             <span class="hljs-comment"># åŠ¨æ€ç›å€¼é¢†åŸŸå¯¹è±¡</span>
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚       â””â”€â”€ SignRepository.java          <span class="hljs-comment"># ç­¾åä»“å‚¨æ¥å£</span>
â”‚   â”œâ”€â”€ infrastructure/
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚       â””â”€â”€ SignRepositoryImpl.java      <span class="hljs-comment"># ç­¾åä»“å‚¨å®ç°ï¼ˆJDBCï¼‰</span>
â”‚   â”œâ”€â”€ interfaces/
â”‚   â”‚   â”œâ”€â”€ controllers/sign/
â”‚   â”‚   â”‚   â”œâ”€â”€ SignController.java          <span class="hljs-comment"># ç­¾åæ¥å£æ§åˆ¶å™¨</span>
â”‚   â”‚   â”‚   â””â”€â”€ DynamicSaltController.java   <span class="hljs-comment"># åŠ¨æ€ç›å€¼æ¥å£æ§åˆ¶å™¨</span>
â”‚   â”‚   â””â”€â”€ annotation/
â”‚   â”‚       â”œâ”€â”€ RequireSign.java             <span class="hljs-comment"># éœ€è¦ç­¾åéªŒè¯æ³¨è§£</span>
â”‚   â”‚       â””â”€â”€ IgnoreSignHeader.java        <span class="hljs-comment"># å¿½ç•¥ç­¾åéªŒè¯æ³¨è§£</span>
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ SignatureInterceptor.java        <span class="hljs-comment"># ç­¾åæ‹¦æˆªå™¨</span>
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ SignatureUtil.java               <span class="hljs-comment"># ç­¾åå·¥å…·ç±»</span>
â””â”€â”€ src/main/resources/
    â””â”€â”€ application.yml                       <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
</code></pre>
<h4 data-id="heading-37">7.2 æ ¸å¿ƒæ–‡ä»¶è¯´æ˜</h4>

























<table><thead><tr><th>æ–‡ä»¶</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>SignDomainService.java</code></td><td>å®ç°åŠ¨æ€ç›å€¼å’Œç­¾åçš„æ ¸å¿ƒç®—æ³•</td></tr><tr><td><code>SignatureUtil.java</code></td><td>æä¾›å‚æ•°æ’åºã€å¤šç§å“ˆå¸Œç®—æ³•æ”¯æŒ</td></tr><tr><td><code>SignatureInterceptor.java</code></td><td>æ‹¦æˆªå¸¦æœ‰ @RequireSign çš„æ¥å£ï¼Œè¿›è¡Œç­¾åéªŒè¯</td></tr><tr><td><code>SignConfig.java</code></td><td>é›†ä¸­ç®¡ç†ç­¾åç›¸å…³é…ç½®ï¼ˆTTLã€ç®—æ³•ã€æ¨¡å¼ç­‰ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-38">7.3 æ•°æ®åº“è„šæœ¬</h4>
<p>è¯¦è§ <code>DynamicSalt.md</code> æ–‡ä»¶ä¸­çš„æ•°æ®åº“è¡¨ç»“æ„ï¼ˆæ”¯æŒ MySQL å’Œ PostgreSQLï¼‰ã€‚</p>
<h4 data-id="heading-39">7.4 å‰ç«¯ç¤ºä¾‹ä»£ç ï¼ˆJavaScriptï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. è·å–åŠ¨æ€ç›å€¼</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getDynamicSalt</span>(<span class="hljs-params">appCode, apiPath</span>) {
  <span class="hljs-keyword">const</span> saltTimestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/sign/dynamic-salt/generate'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ appCode, apiPath, saltTimestamp })
  });
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>(); <span class="hljs-comment">// { dynamicSalt, saltTimestamp, apiPath }</span>
}

<span class="hljs-comment">// 2. è·å–ç­¾å</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getSignature</span>(<span class="hljs-params">appCode, apiPath, dynamicSalt, dynamicSaltTime</span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/sign/generate'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ appCode, apiPath, dynamicSalt, dynamicSaltTime })
  });
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>(); <span class="hljs-comment">// { signValue, timestamp, apiPath }</span>
}

<span class="hljs-comment">// 3. è°ƒç”¨ä¸šåŠ¡æ¥å£</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">submitOrder</span>(<span class="hljs-params">orderData</span>) {
  <span class="hljs-comment">// 3.1 è·å–åŠ¨æ€ç›å€¼</span>
  <span class="hljs-keyword">const</span> { dynamicSalt, saltTimestamp } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getDynamicSalt</span>(<span class="hljs-string">'h5'</span>, <span class="hljs-string">'/api/order/submit'</span>);

  <span class="hljs-comment">// 3.2 è·å–ç­¾å</span>
  <span class="hljs-keyword">const</span> { signValue, timestamp } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getSignature</span>(<span class="hljs-string">'h5'</span>, <span class="hljs-string">'/api/order/submit'</span>,
                                                       dynamicSalt, saltTimestamp);

  <span class="hljs-comment">// 3.3 è°ƒç”¨ä¸šåŠ¡æ¥å£</span>
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/order/submit'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
      <span class="hljs-string">'Sign-appCode'</span>: <span class="hljs-string">'h5'</span>,
      <span class="hljs-string">'Sign-sign'</span>: signValue,
      <span class="hljs-string">'Sign-time'</span>: timestamp.<span class="hljs-title function_">toString</span>(),
      <span class="hljs-string">'Sign-path'</span>: <span class="hljs-string">'/api/order/submit'</span>
    },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(orderData)
  });

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
}
</code></pre>
<h4 data-id="heading-40">7.5 ä¸‹è½½åœ°å€</h4>
<p>å®Œæ•´ä»£ç å·²å¼€æºï¼Œåœ°å€ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/microwind</span><span class="hljs-regexp">/design-patterns/tree</span><span class="hljs-regexp">/main/practice</span>-projects
</code></pre>
<hr/>
<h3 data-id="heading-41">å…«ã€æ€»ç»“</h3>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†ä¸€å¥—å®Œæ•´çš„APIæ¥å£å®‰å…¨æ–¹æ¡ˆï¼Œé€šè¿‡<strong>åŠ¨æ€ç›å€¼ + æ¥å£ç­¾å</strong>çš„åŒé‡éªŒè¯æœºåˆ¶ï¼Œæœ‰æ•ˆé˜²æ­¢äº†é‡æ”¾æ”»å‡»ã€å‚æ•°ç¯¡æ”¹å’Œè¶Šæƒè®¿é—®ã€‚</p>
<p><strong>æ ¸å¿ƒè¦ç‚¹ï¼š</strong></p>
<ol>
<li>
<p><strong>åŒºåˆ†è°ƒç”¨æ–¹ç±»å‹</strong></p>
<ul>
<li><strong>åç«¯æœåŠ¡è°ƒç”¨</strong>ï¼šå¯†é’¥å¯å®‰å…¨å­˜å‚¨ï¼Œç›´æ¥ä½¿ç”¨å¯†é’¥ç­¾åï¼Œæ— éœ€åŠ¨æ€ç›å€¼</li>
<li><strong>å‰ç«¯è°ƒç”¨</strong>ï¼šå¯†é’¥æ— æ³•å®‰å…¨å­˜å‚¨ï¼Œå¿…é¡»ä½¿ç”¨åŠ¨æ€ç›å€¼ä½œä¸º"æ¢ç­¾å‡­è¯"</li>
</ul>
</li>
<li>
<p><strong>åŠ¨æ€ç›å€¼çš„ä½œç”¨</strong></p>
<ul>
<li>è§£å†³å‰ç«¯æ— æ³•æŒæœ‰å¯†é’¥çš„æ ¸å¿ƒé—®é¢˜</li>
<li>ä½œä¸º"ä¸€æ¬¡æ€§ä»¤ç‰Œ"ï¼Œå¢å¼ºå®‰å…¨æ€§</li>
<li>ä»…é€‚ç”¨äºå‰ç«¯ç­¾ååœºæ™¯</li>
</ul>
</li>
<li>
<p><strong>çµæ´»çš„ç­¾åæ¨¡å¼</strong></p>
<ul>
<li>æ”¯æŒ"å«å‚æ•°/ä¸å«å‚æ•°"ä¸¤ç§ç­¾åæ¨¡å¼</li>
<li>æ”¯æŒå¤šç§å“ˆå¸Œç®—æ³•ï¼ˆSHA-256ã€SM3ç­‰ï¼‰</li>
<li>é€šè¿‡æ³¨è§£çµæ´»æ§åˆ¶æ¥å£çº§åˆ«çš„ç­¾åç­–ç•¥</li>
</ul>
</li>
<li>
<p><strong>å››ç§å®‰å…¨æ–¹æ¡ˆ</strong></p>
<ul>
<li><strong>æ–¹æ¡ˆ0</strong>ï¼šåç«¯ç›´æ¥ç­¾åï¼ˆåç«¯æœåŠ¡æ¨èï¼‰</li>
<li><strong>æ–¹æ¡ˆ1</strong>ï¼šåŸºç¡€ç­¾åï¼ˆå‰ç«¯ä½å®‰å…¨åœºæ™¯ï¼‰</li>
<li><strong>æ–¹æ¡ˆ2</strong>ï¼šæ ‡å‡†ç­¾åï¼ˆå‰ç«¯ä¸€èˆ¬åœºæ™¯æ¨èï¼‰</li>
<li><strong>æ–¹æ¡ˆ3</strong>ï¼šé«˜å®‰å…¨ç­¾åï¼ˆå‰ç«¯æ”¯ä»˜äº¤æ˜“åœºæ™¯ï¼‰</li>
</ul>
</li>
</ol>
<p><strong>å®æ–½å»ºè®®ï¼š</strong></p>
<ul>
<li>åç«¯æœåŠ¡è°ƒç”¨ â†’ ä½¿ç”¨æ–¹æ¡ˆ0ï¼Œç›´æ¥æŒæœ‰å¯†é’¥ç­¾åï¼Œæ€§èƒ½æœ€ä¼˜</li>
<li>å‰ç«¯ä¸€èˆ¬åº”ç”¨ â†’ ä½¿ç”¨æ–¹æ¡ˆ2ï¼ˆåŠ¨æ€ç›å€¼ + ä¸å«å‚æ•°ç­¾åï¼‰</li>
<li>å‰ç«¯æ”¯ä»˜äº¤æ˜“ â†’ ä½¿ç”¨æ–¹æ¡ˆ3ï¼ˆåŠ¨æ€ç›å€¼ + å«å‚æ•°ç­¾åï¼‰</li>
<li>æŒ‰æ¥å£åˆ†çº§ä¿æŠ¤ï¼Œçµæ´»ç»„åˆä¸åŒæ–¹æ¡ˆ</li>
</ul>
<p><strong>å…³é”®æé†’ï¼š</strong></p>
<ul>
<li>âš ï¸ å‰ç«¯æ°¸è¿œä¸è¦æŒæœ‰å¯†é’¥ï¼ˆsecretKeyï¼‰ï¼Œå¿…é¡»é€šè¿‡åŠ¨æ€ç›å€¼æ¢å–ç­¾å</li>
<li>âœ… åç«¯å¯ä»¥å®‰å…¨æŒæœ‰å¯†é’¥ï¼Œæ— éœ€ä½¿ç”¨åŠ¨æ€ç›å€¼ï¼Œç®€åŒ–æµç¨‹</li>
<li>ğŸ”’ å¯†é’¥åº”é€šè¿‡ç¯å¢ƒå˜é‡ã€é…ç½®ä¸­å¿ƒç­‰å®‰å…¨æ–¹å¼ç®¡ç†</li>
</ul>
<p>å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ åœ¨å®é™…é¡¹ç›®ä¸­å¿«é€Ÿè½åœ°APIæ¥å£å®‰å…¨æ–¹æ¡ˆï¼å¦‚æœ‰ä»»ä½•ç–‘é—®æˆ–å»ºè®®ï¼Œæ¬¢è¿ç•™è¨€æ¢è®¨ã€‚</p>
<hr/>
<h3 data-id="heading-42">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fowasp.org%2Fwww-project-api-security%2F" target="_blank" title="https://owasp.org/www-project-api-security/" ref="nofollow noopener noreferrer">OWASP API Security Top 10</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.gmbz.org.cn%2Fmain%2Fviewfile%2F2018011001400692565.html" target="_blank" title="http://www.gmbz.org.cn/main/viewfile/2018011001400692565.html" ref="nofollow noopener noreferrer">å›½å¯†SM3ç®—æ³•è§„èŒƒ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc6151" target="_blank" title="https://tools.ietf.org/html/rfc6151" ref="nofollow noopener noreferrer">RFC 6151 - SHA-1å®‰å…¨æ€§åˆ†æ</a></li>
</ul>
<hr/>
<p>å®Œæ•´ä»£ç è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrowind%2Fdesign-patterns%2Ftree%2Fmain%2Fpractice-projects" target="_blank" title="https://github.com/microwind/design-patterns/tree/main/practice-projects" ref="nofollow noopener noreferrer">github.com/microwind/dâ€¦</a></p>
<p>ç­¾åè¯¦ç»†æœºåˆ¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrowind%2Fdesign-patterns%2Fblob%2Fmain%2Fpractice-projects%2Fknife%2FSIGN.md" target="_blank" title="https://github.com/microwind/design-patterns/blob/main/practice-projects/knife/SIGN.md" ref="nofollow noopener noreferrer">github.com/microwind/dâ€¦</a></p>
<p><strong>è”ç³»</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjarry" target="_blank" title="https://github.com/jarry" ref="nofollow noopener noreferrer">github.com/jarry</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ Python ä¸­çš„__slots__ï¼šä¼˜åŒ–å†…å­˜ä¸å±æ€§ç®¡æ§çš„åˆ©å™¨]]></title>    <link>https://juejin.cn/post/7590724064520847423</link>    <guid>https://juejin.cn/post/7590724064520847423</guid>    <pubDate>2026-01-04T04:41:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590724064520847423" data-draft-id="7589813969515364352" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ Python ä¸­çš„__slots__ï¼šä¼˜åŒ–å†…å­˜ä¸å±æ€§ç®¡æ§çš„åˆ©å™¨"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-04T04:41:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ Python ä¸­çš„__slots__ï¼šä¼˜åŒ–å†…å­˜ä¸å±æ€§ç®¡æ§çš„åˆ©å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T04:41:57.000Z" title="Sun Jan 04 2026 04:41:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>å¼•è¨€ï¼š
åœ¨ Python é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œ<code>__slots__</code>æ˜¯ä¸€ä¸ªæ˜“è¢«å¿½è§†ä½†æå…·å®ç”¨ä»·å€¼çš„ç‰¹æ€§ â€”â€” å®ƒæ—¢èƒ½å¤§å¹…å‡å°‘ç±»å®ä¾‹çš„å†…å­˜å ç”¨ï¼Œåˆèƒ½ä¸¥æ ¼ç®¡æ§å®ä¾‹å¯æ‹¥æœ‰çš„å±æ€§ï¼Œé¿å…æ„å¤–çš„å±æ€§æ–°å¢ã€‚æœ¬æ–‡èšç„¦<code>__slots__</code>è¿™ä¸€æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Œä»åº•å±‚åŸç†ã€ä½¿ç”¨æ–¹å¼åˆ°æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼Œå¸¦ä½ æŒæ¡è¿™ä¸€æå‡ Python ç¨‹åºæ•ˆç‡çš„å…³é”®æŠ€å·§ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€<code>__slots__</code>çš„æ ¸å¿ƒèƒŒæ™¯ï¼šPython å®ä¾‹çš„é»˜è®¤å­˜å‚¨æ–¹å¼</h2>
<p>Python ä¸­æ™®é€šç±»çš„å®ä¾‹é»˜è®¤ä½¿ç”¨<strong>å­—å…¸ï¼ˆ<code>__dict__</code>ï¼‰</strong> Â å­˜å‚¨å±æ€§ï¼Œå­—å…¸çš„ä¼˜åŠ¿æ˜¯çµæ´»ï¼ˆå¯éšæ—¶æ–°å¢ / åˆ é™¤å±æ€§ï¼‰ï¼Œä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li><strong>å†…å­˜å ç”¨é«˜</strong>ï¼šå­—å…¸ä¸ºäº†å“ˆå¸Œè¡¨çš„é«˜æ•ˆæŸ¥æ‰¾ï¼Œä¼šé¢„ç•™å¤§é‡ç©ºé—²ç©ºé—´ï¼Œå•ä¸ªå®ä¾‹çš„å†…å­˜å¼€é”€è¿œå¤§äºå®é™…å­˜å‚¨çš„å±æ€§æ•°æ®ï¼›</li>
<li><strong>å±æ€§æ— ç®¡æ§</strong>ï¼šå¯éšæ„ç»™å®ä¾‹æ–°å¢å±æ€§ï¼Œå®¹æ˜“å› æ‹¼å†™é”™è¯¯ï¼ˆå¦‚æŠŠ<code>name</code>å†™æˆ<code>naem</code>ï¼‰å¼•å…¥éš¾ä»¥æ’æŸ¥çš„ bugã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ™®é€šç±»å®ä¾‹çš„å±æ€§å­˜å‚¨æ–¹å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, age</span>):
        self.name = name
        self.age = age

p = Person(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">25</span>)
<span class="hljs-comment"># å®ä¾‹çš„å±æ€§å­˜å‚¨åœ¨__dict__å­—å…¸ä¸­</span>
<span class="hljs-built_in">print</span>(p.__dict__)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'Alice', 'age': 25}</span>

<span class="hljs-comment"># å¯éšæ„æ–°å¢å±æ€§ï¼ˆçµæ´»æ€§é«˜ï¼Œä½†æ˜“å‡ºé”™ï¼‰</span>
p.gender = <span class="hljs-string">"female"</span>
<span class="hljs-built_in">print</span>(p.__dict__)  <span class="hljs-comment"># è¾“å‡ºï¼š{'name': 'Alice', 'age': 25, 'gender': 'female'}</span>
</code></pre>
<p>è€Œ<code>__slots__</code>çš„æ ¸å¿ƒä½œç”¨ï¼Œå°±æ˜¯ç”¨<strong>å›ºå®šå¤§å°çš„æ•°ç»„</strong>æ›¿ä»£å­—å…¸å­˜å‚¨å±æ€§ï¼Œè§£å†³ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜ã€‚</p>
<h2 data-id="heading-1">äºŒã€<code>__slots__</code>çš„åŸºç¡€ä½¿ç”¨</h2>
<h3 data-id="heading-2">1. åŸºæœ¬å®šä¹‰ä¸æ•ˆæœ</h3>
<p><code>__slots__</code>æ˜¯ç±»çº§åˆ«çš„å±æ€§ï¼Œéœ€å®šä¹‰ä¸º<strong>å­—ç¬¦ä¸²åˆ—è¡¨ / å…ƒç»„</strong>ï¼Œåˆ—å‡ºå®ä¾‹å…è®¸æ‹¥æœ‰çš„æ‰€æœ‰å±æ€§åã€‚å®šä¹‰åï¼š</p>
<ul>
<li>å®ä¾‹åªèƒ½æ‹¥æœ‰<code>__slots__</code>ä¸­æŒ‡å®šçš„å±æ€§ï¼Œæ— æ³•æ–°å¢å…¶ä»–å±æ€§ï¼›</li>
<li>å®ä¾‹ä¸å†ç”Ÿæˆ<code>__dict__</code>ï¼ˆèŠ‚çœå†…å­˜ï¼‰ï¼›</li>
<li>å®ä¾‹çš„å±æ€§å­˜å‚¨åœ¨æ•°ç»„ä¸­ï¼Œè®¿é—®é€Ÿåº¦æ›´å¿«ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:
    <span class="hljs-comment"># å®šä¹‰slotsï¼ŒæŒ‡å®šå®ä¾‹ä»…å…è®¸æ‹¥æœ‰nameå’Œageå±æ€§</span>
    __slots__ = (<span class="hljs-string">"name"</span>, <span class="hljs-string">"age"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, age</span>):
        self.name = name
        self.age = age

<span class="hljs-comment"># æ­£å¸¸ä½¿ç”¨æŒ‡å®šçš„å±æ€§</span>
p = Person(<span class="hljs-string">"Bob"</span>, <span class="hljs-number">30</span>)
<span class="hljs-built_in">print</span>(p.name)  <span class="hljs-comment"># è¾“å‡ºï¼šBob</span>
<span class="hljs-built_in">print</span>(p.age)   <span class="hljs-comment"># è¾“å‡ºï¼š30</span>

<span class="hljs-comment"># å°è¯•æ–°å¢æœªåœ¨slotsä¸­å®šä¹‰çš„å±æ€§ï¼Œä¼šæŠ¥é”™</span>
<span class="hljs-keyword">try</span>:
    p.gender = <span class="hljs-string">"male"</span>
<span class="hljs-keyword">except</span> AttributeError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(e)  <span class="hljs-comment"># è¾“å‡ºï¼š'Person' object has no attribute 'gender'</span>

<span class="hljs-comment"># å®ä¾‹ä¸å†æœ‰__dict__å±æ€§</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">print</span>(p.__dict__)
<span class="hljs-keyword">except</span> AttributeError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(e)  <span class="hljs-comment"># è¾“å‡ºï¼š'Person' object has no attribute '__dict__'</span>
</code></pre>
<h3 data-id="heading-3">2. å¤šç»§æ‰¿åœºæ™¯ä¸‹çš„<code>__slots__</code></h3>
<p>è‹¥å­ç±»ç»§æ‰¿äº†å¤šä¸ªçˆ¶ç±»ï¼Œå­ç±»çš„<code>__slots__</code>ä¼šåˆå¹¶æ‰€æœ‰çˆ¶ç±»çš„<code>__slots__</code>ï¼Œä½†éœ€æ³¨æ„ï¼š</p>
<ul>
<li>å­ç±»æœªå®šä¹‰<code>__slots__</code>æ—¶ï¼Œå®ä¾‹ä¼šæ¢å¤<code>__dict__</code>ï¼Œçˆ¶ç±»çš„<code>__slots__</code>å¤±æ•ˆï¼›</li>
<li>å­ç±»å®šä¹‰<code>__slots__</code>æ—¶ï¼Œå®ä¾‹çš„å±æ€§èŒƒå›´ä¸º â€œå­ç±» slots + æ‰€æœ‰çˆ¶ç±» slotsâ€ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># çˆ¶ç±»1</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent1</span>:
    __slots__ = (<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>)

<span class="hljs-comment"># çˆ¶ç±»2</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent2</span>:
    __slots__ = (<span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>)

<span class="hljs-comment"># å­ç±»ï¼šå®šä¹‰è‡ªå·±çš„slots</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span>(Parent1, Parent2):
    __slots__ = (<span class="hljs-string">"d"</span>,)  <span class="hljs-comment"># åˆå¹¶åå…è®¸çš„å±æ€§ï¼šaã€bã€cã€d</span>

c = Child()
c.a = <span class="hljs-number">1</span>
c.b = <span class="hljs-number">2</span>
c.c = <span class="hljs-number">3</span>
c.d = <span class="hljs-number">4</span>
<span class="hljs-built_in">print</span>(c.a, c.b, c.c, c.d)  <span class="hljs-comment"># è¾“å‡ºï¼š1 2 3 4</span>

<span class="hljs-comment"># å­ç±»ï¼šæœªå®šä¹‰slotsï¼ˆçˆ¶ç±»slotså¤±æ•ˆï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child2</span>(<span class="hljs-title class_ inherited__">Parent1</span>):
    <span class="hljs-keyword">pass</span>

c2 = Child2()
c2.a = <span class="hljs-number">1</span>
c2.xxx = <span class="hljs-number">999</span>  <span class="hljs-comment"># å¯æ–°å¢ä»»æ„å±æ€§</span>
<span class="hljs-built_in">print</span>(c2.xxx)  <span class="hljs-comment"># è¾“å‡ºï¼š999</span>
<span class="hljs-built_in">print</span>(c2.__dict__)  <span class="hljs-comment"># è¾“å‡ºï¼š{'xxx': 999}</span>
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€<code>__slots__</code>çš„æ ¸å¿ƒä»·å€¼ï¼šå†…å­˜ä¸æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-5">1. å†…å­˜ä¼˜åŒ–å®æˆ˜</h3>
<p>å¯¹äºéœ€è¦åˆ›å»ºå¤§é‡å®ä¾‹çš„åœºæ™¯ï¼ˆå¦‚æ•°æ®å¤„ç†ã€çˆ¬è™«å­˜å‚¨ï¼‰ï¼Œ<code>__slots__</code>çš„å†…å­˜ä¼˜åŒ–æ•ˆæœæå…¶æ˜¾è‘—ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sys

<span class="hljs-comment"># æ™®é€šç±»ï¼ˆæ— slotsï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NormalClass</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x, y</span>):
        self.x = x
        self.y = y

<span class="hljs-comment"># å¸¦slotsçš„ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SlotsClass</span>:
    __slots__ = (<span class="hljs-string">"x"</span>, <span class="hljs-string">"y"</span>)
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x, y</span>):
        self.x = x
        self.y = y

<span class="hljs-comment"># æµ‹è¯•å•ä¸ªå®ä¾‹çš„å†…å­˜å ç”¨</span>
n = NormalClass(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
s = SlotsClass(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ™®é€šå®ä¾‹å†…å­˜å ç”¨ï¼š<span class="hljs-subst">{sys.getsizeof(n) + sys.getsizeof(n.__dict__)}</span> å­—èŠ‚"</span>)
<span class="hljs-comment"># è¾“å‡ºçº¦ï¼š56ï¼ˆå®ä¾‹æœ¬èº«ï¼‰ + 48ï¼ˆ__dict__ï¼‰= 104 å­—èŠ‚</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Slotså®ä¾‹å†…å­˜å ç”¨ï¼š<span class="hljs-subst">{sys.getsizeof(s)}</span> å­—èŠ‚"</span>)
<span class="hljs-comment"># è¾“å‡ºçº¦ï¼š48 å­—èŠ‚ï¼ˆæ— __dict__ï¼Œä»…å­˜å‚¨xã€yï¼‰</span>

<span class="hljs-comment"># æµ‹è¯•10ä¸‡ä¸ªå®ä¾‹çš„å†…å­˜å ç”¨</span>
<span class="hljs-keyword">import</span> memory_profiler

<span class="hljs-meta">@memory_profiler.profile</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_normal_instances</span>():
    <span class="hljs-comment"># åˆ›å»º10ä¸‡ä¸ªæ™®é€šå®ä¾‹</span>
    instances = [NormalClass(i, i+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100000</span>)]
    <span class="hljs-keyword">return</span> instances

<span class="hljs-meta">@memory_profiler.profile</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_slots_instances</span>():
    <span class="hljs-comment"># åˆ›å»º10ä¸‡ä¸ªslotså®ä¾‹</span>
    instances = [SlotsClass(i, i+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100000</span>)]
    <span class="hljs-keyword">return</span> instances

<span class="hljs-comment"># æ‰§è¡Œæµ‹è¯•ï¼ˆè¿è¡Œåå¯çœ‹åˆ°å†…å­˜ä½¿ç”¨å·®å¼‚ï¼‰</span>
<span class="hljs-comment"># create_normal_instances()  # çº¦å ç”¨80MB+å†…å­˜</span>
<span class="hljs-comment"># create_slots_instances()   # çº¦å ç”¨40MB+å†…å­˜ï¼ˆèŠ‚çœçº¦50%ï¼‰</span>
</code></pre>
<p><strong>ç»“è®º</strong>ï¼šå¸¦<code>__slots__</code>çš„ç±»å®ä¾‹ï¼Œå†…å­˜å ç”¨é€šå¸¸èƒ½å‡å°‘ 50% ä»¥ä¸Šï¼Œå®ä¾‹æ•°é‡è¶Šå¤šï¼Œä¼˜åŒ–æ•ˆæœè¶Šæ˜æ˜¾ã€‚</p>
<h3 data-id="heading-6">2. è®¿é—®æ€§èƒ½ä¼˜åŒ–</h3>
<p>ç”±äº<code>__slots__</code>ç”¨æ•°ç»„å­˜å‚¨å±æ€§ï¼ˆç›´æ¥é€šè¿‡ç´¢å¼•è®¿é—®ï¼‰ï¼Œè€Œéå­—å…¸ï¼ˆå“ˆå¸ŒæŸ¥æ‰¾ï¼‰ï¼Œå±æ€§è®¿é—®é€Ÿåº¦ä¹Ÿä¼šå°å¹…æå‡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> timeit

<span class="hljs-comment"># æµ‹è¯•å±æ€§è®¿é—®é€Ÿåº¦</span>
setup = <span class="hljs-string">"""
class NormalClass:
    def __init__(self, x):
        self.x = x

class SlotsClass:
    __slots__ = ("x",)
    def __init__(self, x):
        self.x = x

n = NormalClass(10)
s = SlotsClass(10)
"""</span>

<span class="hljs-comment"># æµ‹è¯•æ™®é€šå®ä¾‹è®¿é—®å±æ€§</span>
normal_time = timeit.timeit(<span class="hljs-string">"n.x"</span>, setup=setup, number=<span class="hljs-number">10000000</span>)
<span class="hljs-comment"># æµ‹è¯•slotså®ä¾‹è®¿é—®å±æ€§</span>
slots_time = timeit.timeit(<span class="hljs-string">"s.x"</span>, setup=setup, number=<span class="hljs-number">10000000</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ™®é€šå®ä¾‹è®¿é—®è€—æ—¶ï¼š<span class="hljs-subst">{normal_time:<span class="hljs-number">.2</span>f}</span> ç§’"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Slotså®ä¾‹è®¿é—®è€—æ—¶ï¼š<span class="hljs-subst">{slots_time:<span class="hljs-number">.2</span>f}</span> ç§’"</span>)
<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼šæ™®é€šå®ä¾‹è€—æ—¶1.20ç§’ï¼ŒSlotså®ä¾‹è€—æ—¶0.80ç§’ï¼ˆå¿«çº¦30%ï¼‰</span>
</code></pre>
<h2 data-id="heading-7">å››ã€<code>__slots__</code>çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-8">1. ä¿ç•™ç‰¹æ®Šå±æ€§</h3>
<p>è‹¥éœ€è¦å®ä¾‹ä¿ç•™<code>__dict__</code>æˆ–<code>__weakref__</code>ï¼ˆå¼±å¼•ç”¨ï¼‰ï¼Œéœ€åœ¨<code>__slots__</code>ä¸­æ˜¾å¼å£°æ˜ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:
    <span class="hljs-comment"># ä¿ç•™__dict__ï¼ˆå…è®¸æ–°å¢å±æ€§ï¼‰ + ç®¡æ§æŒ‡å®šå±æ€§</span>
    __slots__ = (<span class="hljs-string">"name"</span>, <span class="hljs-string">"age"</span>, <span class="hljs-string">"__dict__"</span>)

p = Person(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">25</span>)
p.gender = <span class="hljs-string">"female"</span>  <span class="hljs-comment"># å¯æ–°å¢å±æ€§ï¼ˆå› __dict__å­˜åœ¨ï¼‰</span>
<span class="hljs-built_in">print</span>(p.gender)  <span class="hljs-comment"># è¾“å‡ºï¼šfemale</span>
<span class="hljs-built_in">print</span>(p.__dict__)  <span class="hljs-comment"># è¾“å‡ºï¼š{'gender': 'female'}</span>
</code></pre>
<h3 data-id="heading-9">2. ä¸å¯å˜å±æ€§çš„å®ç°</h3>
<p>è‹¥éœ€è¦å±æ€§åªè¯»ï¼Œå¯ç»“åˆ<code>property</code>å’Œ<code>slots</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ReadOnlyClass</span>:
    __slots__ = (<span class="hljs-string">"_x"</span>,)  <span class="hljs-comment"># ç§æœ‰å±æ€§å­˜å‚¨å€¼</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x</span>):
        self._x = x

<span class="hljs-meta">    @property</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">x</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self._x

roc = ReadOnlyClass(<span class="hljs-number">10</span>)
<span class="hljs-built_in">print</span>(roc.x)  <span class="hljs-comment"># è¾“å‡ºï¼š10</span>

<span class="hljs-comment"># å°è¯•ä¿®æ”¹xä¼šæŠ¥é”™ï¼ˆæ— setterï¼‰</span>
<span class="hljs-keyword">try</span>:
    roc.x = <span class="hljs-number">20</span>
<span class="hljs-keyword">except</span> AttributeError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(e)  <span class="hljs-comment"># è¾“å‡ºï¼šcan't set attribute</span>

<span class="hljs-comment"># å°è¯•ç›´æ¥ä¿®æ”¹ç§æœ‰å±æ€§ä¹Ÿä¼šæŠ¥é”™ï¼ˆslotsä»…ç®¡æ§_xï¼Œä½†è‹¥å‘½åä¸ºç§æœ‰ï¼Œå¤–éƒ¨ä¸åº”è®¿é—®ï¼‰</span>
<span class="hljs-keyword">try</span>:
    roc._x = <span class="hljs-number">20</span>
<span class="hljs-keyword">except</span> AttributeError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(e)  <span class="hljs-comment"># è¾“å‡ºï¼š'ReadOnlyClass' object attribute '_x' is read-only</span>
</code></pre>
<h3 data-id="heading-10">3. é€‚ç”¨åœºæ™¯ä¸å±€é™æ€§</h3>
<h4 data-id="heading-11">é€‚ç”¨åœºæ™¯ï¼š</h4>
<ul>
<li>éœ€è¦åˆ›å»º<strong>å¤§é‡å®ä¾‹</strong>çš„ç±»ï¼ˆå¦‚æ•°æ®æ¨¡å‹ã€ç¼“å­˜å¯¹è±¡ï¼‰ï¼›</li>
<li>å¯¹<strong>å†…å­˜å ç”¨æ•æ„Ÿ</strong>çš„åœºæ™¯ï¼ˆå¦‚åµŒå…¥å¼ Pythonã€ä½å†…å­˜æœåŠ¡å™¨ï¼‰ï¼›</li>
<li>éœ€è¦<strong>ä¸¥æ ¼ç®¡æ§å±æ€§</strong>ï¼Œé¿å…æ„å¤–æ–°å¢å±æ€§çš„åœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-12">å±€é™æ€§ï¼š</h4>
<ul>
<li>çµæ´»æ€§é™ä½ï¼šæ— æ³•åŠ¨æ€æ–°å¢å±æ€§ï¼ˆé™¤éæ˜¾å¼å£°æ˜<code>__dict__</code>ï¼‰ï¼›</li>
<li>ä»…å½±å“å®ä¾‹ï¼š<code>__slots__</code>ä¸é™åˆ¶ç±»å±æ€§çš„æ–°å¢ï¼›</li>
<li>ç»§æ‰¿éœ€æ³¨æ„ï¼šå­ç±»æœªå®šä¹‰<code>__slots__</code>ä¼šæ¢å¤<code>__dict__</code>ï¼Œå¯¼è‡´çˆ¶ç±»ä¼˜åŒ–å¤±æ•ˆã€‚</li>
</ul>
<h2 data-id="heading-13">æ€»ç»“</h2>
<ol>
<li><code>__slots__</code>æ˜¯ç±»çº§åˆ«çš„å±æ€§ï¼Œç”¨äºæŒ‡å®šå®ä¾‹å…è®¸æ‹¥æœ‰çš„å±æ€§åˆ—è¡¨ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯<strong>æ›¿ä»£__dict__å­˜å‚¨å±æ€§</strong>ï¼›</li>
<li>ä¸»è¦ä¼˜åŠ¿ï¼šå¤§å¹…<strong>å‡å°‘å®ä¾‹å†…å­˜å ç”¨</strong>ï¼ˆé€šå¸¸ 50% ä»¥ä¸Šï¼‰ã€å°å¹…æå‡å±æ€§è®¿é—®é€Ÿåº¦ã€ä¸¥æ ¼ç®¡æ§å®ä¾‹å±æ€§ï¼›</li>
<li>ä½¿ç”¨è¦ç‚¹ï¼šå¤šç»§æ‰¿æ—¶ä¼šåˆå¹¶çˆ¶ç±» slotsï¼Œéœ€ä¿ç•™__dict__å¯å…è®¸åŠ¨æ€æ–°å¢å±æ€§ï¼Œç»“åˆ property å¯å®ç°åªè¯»å±æ€§ï¼›</li>
<li>é€‚ç”¨åœºæ™¯ï¼šå¤§é‡å®ä¾‹åˆ›å»ºã€å†…å­˜æ•æ„Ÿåœºæ™¯ã€å±æ€§ç®¡æ§éœ€æ±‚ï¼Œæ™®é€šå°ä½“é‡ç±»æ— éœ€è¿‡åº¦ä½¿ç”¨</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è´·æ¬¾ä¸Šç­çš„æˆ‘ä¸AIåŒè¡Œçš„æ—¥å­]]></title>    <link>https://juejin.cn/post/7591079707699609610</link>    <guid>https://juejin.cn/post/7591079707699609610</guid>    <pubDate>2026-01-04T05:48:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591079707699609610" data-draft-id="7591207451777974298" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è´·æ¬¾ä¸Šç­çš„æˆ‘ä¸AIåŒè¡Œçš„æ—¥å­"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,äººå·¥æ™ºèƒ½,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-04T05:48:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ‘_"/> <meta itemprop="url" content="https://juejin.cn/user/1471609400466218"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è´·æ¬¾ä¸Šç­çš„æˆ‘ä¸AIåŒè¡Œçš„æ—¥å­
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1471609400466218/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ‘_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:48:36.000Z" title="Sun Jan 04 2026 05:48:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è¿™ä¸ªæ—©æ™¨ï¼Œé—¹é’Ÿè¿˜æ²¡å“ï¼Œæˆ‘çš„ç”Ÿç‰©é’Ÿå°±å…ˆä¸€æ­¥æŠŠæˆ‘å«é†’äº†ã€‚æ‘¸äº†æ‘¸å¤´é¡¶é‚£ç‰‡æ—¥ç›Šè’èŠœçš„ä¸æ¯›ä¹‹åœ°ï¼Œæˆ‘å¹äº†å£æ°”ã€‚æˆ‘æ˜¯ä¸æƒ‘ï¼Œä¸€ä¸ªåœ¨äº’è”ç½‘æµªæ½®é‡Œæ‰‘è…¾äº†åå¹´çš„è€ç¨‹åºå‘˜ï¼Œäººé€å¤–å·äººå½¢é”®ç›˜ä¾ ï¼Œç°åœ¨è‡ªå˜²æ˜¯è´·æ¬¾ä¸Šç­çš„AIç¼–ç¨‹ä¸æƒ‘ã€‚</p>
<p>ä»¥å‰å’±ä»¬ä¸Šç­ï¼Œé‚£æ˜¯å‡ºå–åŠ³åŠ¨åŠ›æ¢é’±ï¼›ç°åœ¨å€’å¥½ï¼Œä¸ºäº†èƒ½æ›´å¥½åœ°å‡ºå–åŠ³åŠ¨åŠ›ï¼Œè¿˜å¾—è‡ªå·±å…ˆæè…°åŒ…æŠŠç”Ÿäº§å·¥å…·ç»™ç»­è´¹äº†ã€‚</p>
<p>ä»Šå¤©å’±ä»¬ä¸èŠä»€ä¹ˆé«˜å¤§ä¸Šçš„æŠ€æœ¯è¶‹åŠ¿ï¼Œä¹Ÿä¸æ‰¯ä»€ä¹ˆäººç±»æœªæ¥çš„å®å¤§å™äº‹ã€‚å°±æƒ³è·Ÿå¤§ä¼™å„¿åä¸‹æ¥ï¼Œå—‘ç€ç“œå­ï¼Œæ‰’ä¸€æ‰’æˆ‘è¿™ä¸ªå…¸å‹çš„èŒåœºç‰›é©¬ï¼Œæ¯ä¸ªæœˆåˆ°åº•è¦ç»™è¿™äº›AIç¥–å®—ä»¬è¿›è´¡å¤šå°‘é“¶å­ï¼Œä»¥åŠè¿™èƒŒåçš„é…¸ç”œè‹¦è¾£ã€‚</p>
<p>è¯´å®è¯ï¼Œè¿™ç¬”è´¦æˆ‘ä¸ç®—ä¸çŸ¥é“ï¼Œä¸€ç®—é‚£æ˜¯çœŸçš„ä¸€æ¿€çµã€‚</p>
<h3 data-id="heading-0">ä¸€ã€ ç—›å¹¶å¿«ä¹ç€çš„èµ›åšä¹‰è‚¢</h3>
<p>å¯¹äºä¸€ä¸ªé å†™ä»£ç æ°é¥­çš„äººæ¥è¯´ï¼ŒIDEå°±æ˜¯æ‰‹é‡Œçš„æªã€‚ä½†ç°åœ¨è¿™æŠŠæªï¼Œè¦æ˜¯æ²¡è£…ä¸ŠAIå€é•œï¼Œé‚£è·Ÿçƒ§ç«æ£å„¿ä¹Ÿæ²¡å•¥åŒºåˆ«ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/138c0d84ff30442cae98268f65054f43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110515&amp;x-signature=2L2XsQKSNaHdI8yodziqjFpmHQY%3D" alt="image.png" loading="lazy"/></p>
<p>å’±ä»¬å…ˆè¯´è¯´æˆ‘è¿™æ¯ä¸ªæœˆæœ€å¤§çš„å•ç¬”æŠ€æœ¯æ”¯å‡º____<strong>ClaudeCode &amp; Codex</strong>ã€‚</p>
<p>è¿™ç©æ„å„¿è¿˜æ˜¯éå®˜æ–¹æ¸ é“ææ¥çš„ï¼Œä¸€ä¸ªæœˆå¤§æ¦‚è¦çƒ§æ‰æˆ‘ <strong>Â¥300 å¤§æ´‹</strong>ã€‚å¬åˆ°è¿™ä¸ªæ•°ï¼Œä¼°è®¡æœ‰äººè¦éª‚æˆ‘å¤§å†¤ç§äº†ã€‚ä½ è¯´å®˜æ–¹çš„ä¸èƒ½ç”¨å—ï¼Ÿå“ï¼Œåˆ«æäº†ï¼Œé‚£æ˜¯çœŸç”¨ä¸èµ·ã€‚å’±ä»¬è¿™ç§ä¸ªä½“æˆ·æˆ–è€…å°å›¢é˜Ÿï¼Œæ¯ä¸€åˆ†é’±éƒ½å¾—æ°æˆä¸¤åŠèŠ±ã€‚</p>
<p>ä½†è¿™ Â¥300 èŠ±å¾—æˆ‘æ˜¯åˆçˆ±åˆæ¨ã€‚çˆ±çš„æ˜¯ï¼Œå®ƒç°åœ¨çš„é€»è¾‘èƒ½åŠ›æ˜¯çœŸå¼ºï¼Œæœ‰æ—¶å€™æˆ‘è„‘å­ä¸€å›¢æµ†ç³Šï¼Œä¸¢ç»™å®ƒä¸€æ®µç¨€ç¢çš„éœ€æ±‚ï¼Œå®ƒèƒ½åƒä¸ªè€ç»ƒçš„æ¶æ„å¸ˆä¸€æ ·ç»™æˆ‘æ¢³ç†å¾—äº•äº•æœ‰æ¡ã€‚æ¨çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ä¸ç¨³å•Šï¼</p>
<p>è¿™å°±å¥½æ¯”ä½ é›‡äº†ä¸ªç»ä¸–é«˜æ‰‹å½“ä¿é•–ï¼Œä½†è¿™ä¿é•–èº«ä½“ä¸å¥½ï¼ŒåŠ¨ä¸åŠ¨å°±æ™•å€’ã€‚å¥½å‡ æ¬¡èµ¶é¡¹ç›®è¿›åº¦ï¼Œå¤œæ·±äººé™ï¼Œæˆ‘æ­£ä»£ç æ•²å¾—é£èµ·ï¼Œçµæ„Ÿå¦‚å°¿å´©ï¼Œçªç„¶å®ƒç»™æˆ‘æ¥ä¸ªè¿æ¥è¶…æ—¶æˆ–è€…é¢åº¦è€—å°½ã€‚é‚£ä¸€åˆ»ï¼Œæˆ‘çœ‹ç€å±å¹•ä¸Šè½¬åœˆçš„é‚£ä¸ªå°åœ†ç‚¹ï¼Œå¿ƒæ€çœŸçš„å´©äº†ï¼Œæƒ³ç ¸é”®ç›˜åˆèˆä¸å¾—ï¼ˆé”®ç›˜ä¹ŸæŒºè´µçš„ï¼‰ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œå°±å¾—è¯·å‡ºæˆ‘çš„å¤‡èƒâ€”â€”<strong>Cursor</strong>ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f50a5ae9cf934d589878cdc75eda7331~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110515&amp;x-signature=IpixnY7VRCfl1DB1%2FnEy6QGyJuY%3D" alt="image.png" loading="lazy"/>
å®ƒæ˜¯å®˜æ–¹æ­£ç‰ˆï¼Œä¸€ä¸ªæœˆ <strong>20åˆ€ï¼ˆçº¦ Â¥140ï¼‰</strong>ã€‚å¾ˆå¤šäººå¯èƒ½ä¼šé—®ï¼šä¸æƒ‘ï¼Œä½ éƒ½æœ‰é‚£ä¸ªè´µçš„äº†ï¼Œè¿˜ä¹°Cursorå¹²å•¥ï¼Ÿ</p>
<p>å˜¿ï¼Œè¿™å°±å«åŒä¿é™©ã€‚Cursor Pro è¿™ä¸ªä»·æ ¼ï¼Œæˆ‘è§‰å¾—æ˜¯çœŸè‰¯å¿ƒã€‚å®ƒç°åœ¨çš„åœ°ä½ï¼Œå°±åƒæ˜¯ä»¥å‰è½¦é‡Œçš„å¤‡èƒï¼Œæˆ–è€…æ˜¯å£è¢‹é‡Œçš„ç‘å£«å†›åˆ€ã€‚å½“é‚£ä¸ªéå®˜æ–¹çš„å¤§å“¥æ‰é“¾å­çš„æ—¶å€™ï¼ŒCursor å¿…é¡»å¾—é¡¶ä¸Šã€‚è€Œä¸”ï¼Œå¯¹äºä¸€äº›ç®€å•çš„ã€æµç¨‹åŒ–çš„ä»£ç è¡¥å…¨ï¼ŒCursor çš„ååº”é€Ÿåº¦æå¿«ï¼Œé‚£ç§è¡Œäº‘æµæ°´çš„è¡¥å…¨æ„Ÿï¼ŒçœŸçš„å¾ˆè§£å‹ã€‚</p>
<p>æœ‰æ—¶å€™æˆ‘å°±åœ¨æƒ³ï¼Œæˆ‘è¿™å“ªæ˜¯å†™ä»£ç å•Šï¼Œæˆ‘è¿™æ˜¯åœ¨ç©æ‹¼å›¾æ¸¸æˆã€‚å·¦æ‰‹é‚£ä¸ªä¸ç¨³å®šçš„å¤©æ‰ï¼Œå³æ‰‹è¿™ä¸ªå‹¤æ³çš„ç®¡å®¶ï¼Œæˆ‘å¤¹åœ¨ä¸­é—´ï¼Œåƒä¸ªç«¯æ°´å¤§å¸ˆï¼Œè¿˜è¦è‡ªå·±æé’±å…»ç€å®ƒä¿©ã€‚</p>
<h3 data-id="heading-1">äºŒã€ æ—©å·²ç¦»ä¸å¼€çš„ ChatGPT</h3>
<p>æ¥ç€èŠèŠ <strong>ChatGPT Plus</strong>ã€‚è¿™ä¸ªæ²¡å•¥æ‚¬å¿µï¼Œ<strong>20åˆ€</strong>ï¼Œé›·æ‰“ä¸åŠ¨ã€‚</p>
<p>è¿™é’±å¯¹äºæˆ‘æ¥è¯´ï¼Œå·²ç»ä¸å±äºå¯é€‰æ¶ˆè´¹äº†ï¼Œå®ƒå±äºæ°´ç”µç…¤ä¸€æ ·çš„åŸºç¡€è®¾æ–½ã€‚</p>
<p>æˆ‘ä¹Ÿè¯•è¿‡åˆ«çš„ï¼Œä»€ä¹ˆ Geminiï¼Œä»€ä¹ˆ Claude çš„å®˜æ–¹ç½‘é¡µç‰ˆï¼Œä½†ç”¨ç€ç”¨ç€ï¼Œæ€»è§‰å¾—å·®ç‚¹æ„æ€ã€‚å¯èƒ½æ˜¯å…ˆå…¥ä¸ºä¸»å§ï¼ŒChatGPT å°±åƒæ˜¯é‚£ä¸ªæœ€æ‡‚ä½ çš„è€ä¼™è®¡ã€‚</p>
<p>ç°åœ¨çš„æˆ‘ä¸å¤¸å¼ åœ°è¯´ï¼Œç”šè‡³æœ‰ç‚¹ç™¾åº¦PTSDã€‚é‡åˆ°é—®é¢˜ï¼Œç¬¬ä¸€ååº”ç»å¯¹ä¸æ˜¯å»æœç´¢æ¡†é‡Œè¾“å…³é”®è¯ï¼Œç„¶ååœ¨ä¸€å †å¹¿å‘Šé‡Œæ‰¾ç­”æ¡ˆï¼›è€Œæ˜¯ç›´æ¥ç”©ç»™ ChatGPTï¼šå–‚ï¼Œè¿™æŠ¥é”™å•¥æ„æ€ï¼Ÿç»™æˆ‘ä¸‰ä¸ªè§£å†³æ–¹æ¡ˆã€‚</p>
<p>å®ƒä¸ä»…æ˜¯æˆ‘çš„æœç´¢å¼•æ“ï¼Œè¿˜æ˜¯æˆ‘çš„ç¿»è¯‘å®˜ã€æˆ‘çš„æ¶¦è‰²ç¼–è¾‘ï¼Œç”šè‡³æ˜¯æˆ‘å‘ç‰¢éªšæ—¶çš„æ ‘æ´ã€‚ Â¥140 ä¹°ä¸€ä¸ª 24 å°æ—¶å¾…å‘½ã€ä»ä¸å‘è„¾æ°”ã€çŸ¥è¯†æ¸Šåšçš„åŠ©ç†ï¼Œè¿™ç¬”è´¦ï¼Œæ€ä¹ˆç®—éƒ½åˆ’ç®—ã€‚å“ªæ€•å®ƒæœ‰æ—¶å€™ä¼šä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“ï¼Œæˆ‘ä¹Ÿè®¤äº†ï¼Œæ¯•ç«Ÿè°è¿˜æ²¡ä¸ªçŠ¯æµ‘çš„æ—¶å€™å‘¢ï¼Ÿ
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/598c2d21ae91466e8b96f26007ad6d43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110515&amp;x-signature=guiJ1mWECMUQFsA4Pr7%2FocI8M%2Bg%3D" alt="image.png" loading="lazy"/>
ä½†æ˜¯...... æœ€æ–°ç‰ˆæœ¬çš„ChatGPTæˆ‘å·²ç»é€€è®¢äº†ï¼Œæ­£åœ¨ä½¿ç”¨Grokï¼Œå› ä¸ºæˆ‘æœ‰ç‚¹å„¿å—å¤Ÿ ChatGPT åˆå½“åˆç«‹çš„æ ·å­äº†ï¼Œè£…Xçš„æ„Ÿè§‰è¶Šæ¥è¶Šæµ“çƒˆäº†ï¼Œåˆ°å¤„éƒ½æ˜¯ G ç‚¹ä¸è®©é—®ï¼Œä¸€ä¼šå„¿è¯´å¤ªæš´åŠ›ï¼Œä¸€ä¼šå„¿è¯´è¿åè§„å®šï¼Œè£…ä»€ä¹ˆè£…å‘¢ï¼Œå‡ºæ¥å–çš„ï¼Œé’±éƒ½ä»˜äº†ï¼Œç¢°éƒ½ä¸ç»™ç¢°ï¼Œä»¥ä¸ºè‡ªå·±æ˜¯ç‰¹ä¹ˆä»€ä¹ˆçº¯æ´æ¨¡å‹ä¹ˆã€‚</p>
<h3 data-id="heading-2">ä¸‰ã€ å½“ç å†œæ‹¿èµ·äº†ç”»ç¬”</h3>
<p>åœ¨è¿™ä¸ªå…¨æ ˆå·æˆå…¨å¹²çš„å¹´ä»£ï¼Œå…‰ä¼šå†™ä»£ç å·²ç»ä¸å¤Ÿäº†ã€‚</p>
<p>æˆ‘è‡ªå·±åšçš„ä¸€äº›ç‹¬ç«‹äº§å“ï¼Œè¿˜æœ‰å¹³æ—¶å…¬ä¼—å·å‘æ–‡ç« ã€åšæµ·æŠ¥ï¼Œå°çº¢è–¯å•Šï¼Œæ€»ä¸èƒ½æ¯æ¬¡éƒ½å»æ±‚è®¾è®¡å¸ˆæœ‹å‹å§ï¼Ÿäººæƒ…å€ºæœ€éš¾è¿˜ã€‚äºæ˜¯ï¼Œæˆ‘æŠŠç›®å…‰æŠ•å‘äº† <strong>Lovart</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6c6d8a144044996b3895f1849988f35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110515&amp;x-signature=edwX9xWh4QJ4q6aCKBemh9BO46A%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ç©æ„å„¿ç®—æ˜¯è®¾è®¡ç•Œçš„Cursorï¼Œä¸€ä¸ªæœˆ <strong>27åˆ€</strong>ã€‚å®ƒå…¶å®æ˜¯ä¸ªèšåˆæ€ªï¼Œé‡Œé¢ä»€ä¹ˆ Nanobananaã€Midjourneyã€Sora2 éƒ½èƒ½ç©ã€‚</p>
<p>è¯´å®è¯ï¼Œå¯¹äºæˆ‘è¿™ç§å®¡ç¾è¿˜åœç•™åœ¨çº¢é…ç»¿èµ›ç‹—å±é˜¶æ®µçš„ç›´ç”·ç¨‹åºå‘˜æ¥è¯´ï¼ŒAIç»˜ç”»ç®€ç›´å°±æ˜¯é™ç»´æ‰“å‡»ã€‚ä»¥å‰åšä¸ªBannerï¼Œæ†‹åŠå¤©æ†‹å‡ºä¸€å¨ç¿”ï¼›ç°åœ¨æ•²æ•²æç¤ºè¯ï¼Œèµ›åšæœ‹å…‹é£ã€æç®€ä¸»ä¹‰ï¼Œå•ªä¸€ä¸‹ï¼Œå›¾å‡ºæ¥äº†ã€‚</p>
<p>æ¯æ¬¡çœ‹åˆ°é‚£ç²¾ç¾çš„ç”»é¢ï¼Œæˆ‘éƒ½æœ‰ä¸€ç§é”™è§‰ï¼šæˆ‘è«éæ˜¯ä¸ªè¢«ä»£ç è€½è¯¯çš„è‰ºæœ¯å®¶ï¼Ÿ</p>
<p>å½“ç„¶ï¼Œæ¸…é†’è¿‡æ¥åè¿˜å¾—çœ‹è´¦å•ã€‚è¿™ Â¥190 èŠ±å¾—å…¶å®æœ‰ç‚¹å¿ƒè™šã€‚å› ä¸ºæˆ‘ä¸åƒä¸“ä¸šè®¾è®¡å¸ˆé‚£æ ·å¤©å¤©ç”¨ï¼Œæœ‰æ—¶å€™ä¸€ä¸ªæœˆä¹Ÿå°±ç”¨é‚£ä¹ˆå‡ æ¬¡ã€‚æ¯åˆ°æ‰£æ¬¾æ—¥ï¼Œæˆ‘éƒ½ä¼šçŠ¹è±«ï¼šè¦ä¸ä¸‹ä¸ªæœˆåœäº†å§ï¼Ÿä½†ä¸€æƒ³åˆ°ä¸‡ä¸€å“ªå¤©æ€¥ç”¨åˆè¦å»æ±‚äººï¼Œå’¬å’¬ç‰™ï¼Œç»­å§ï¼è¿™å°±æ˜¯æˆå¹´äººçš„å¦¥åã€‚</p>
<h3 data-id="heading-3">å››ã€ æœ€å¤§çš„é‚£ä¸ªå‘</h3>
<p>å¦‚æœè¯´å‰é¢é‚£äº›å·¥å…·è´¹æ˜¯ç‰©ç†æ”»å‡»ï¼Œé‚£æ¥ä¸‹æ¥è¿™ä¸ªï¼Œå°±æ˜¯é­”æ³•ä¼¤å®³ï¼Œä¸”åˆ€åˆ€æš´å‡»ã€‚</p>
<p><strong>çŸ¥è¯†ä»˜è´¹ã€‚</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d10947164ec4a4380dc1cded7e7bd69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110515&amp;x-signature=u%2BXvOye%2FnzD9Nes1o25eG90t3L4%3D" alt="image.png" loading="lazy"/> <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2fd84226fd541b4a69e370ca108c6ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110515&amp;x-signature=N%2FDxVWePf2pKx4QMkWKnawKc12s%3D" alt="image.png" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f302ad551d5486ca98a1c21c66270b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110515&amp;x-signature=EJYxEfQ2uTe5ZeMU8vi8Ob3fzVw%3D" alt="image.png" loading="lazy"/>
è¿™ä¹Ÿæ˜¯æˆ‘è´¦å•é‡Œçš„å¤§å¤´ï¼Œå¹³æ‘Šä¸‹æ¥ä¸€ä¸ªæœˆå¾—æœ‰ <strong>Â¥1000</strong> å·¦å³ã€‚</p>
<p>åœ¨è¿™ä¸ªAIæ—¥æ–°æœˆå¼‚çš„æ—¶ä»£ï¼Œæˆ‘å°±åƒæ˜¯ä¸ªåœ¨é«˜é€Ÿå…¬è·¯ä¸Šéª‘è‡ªè¡Œè½¦çš„ï¼Œæ—è¾¹ä¸€è¾†è¾†æ³•æ‹‰åˆ©å‘¼å•¸è€Œè¿‡ã€‚æˆ‘æ…Œå•Šï¼æˆ‘æ€•æ˜å¤©é†’æ¥ï¼Œæˆ‘çš„æŠ€èƒ½æ ‘å°±è¢«è¿æ ¹æ‹”èµ·äº†ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘æŠ¥å„ç§ç¤¾å›¢ï¼Œä¹°å„ç§ä¸“æ ã€‚åªè¦çœ‹åˆ°æ ‡é¢˜é‡Œæœ‰<em><strong>ç ´å±€ã€çº¢åˆ©ã€åº•å±‚é€»è¾‘ã€AIå˜ç°</strong></em>è¿™å‡ ä¸ªè¯ï¼Œæˆ‘çš„æ‰‹æŒ‡å°±ä¸å¬ä½¿å”¤åœ°å»ç‚¹æ”¯ä»˜æŒ‰é’®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c74b6ca1ec14db6ad1868057c824f61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110515&amp;x-signature=G6fP%2FiKPvrKS0Npq%2B5F5RyMrn9s%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†æ˜¯è¿™ Â¥1000 èŠ±å‡ºå»ï¼Œæˆ‘å°±çœŸå­¦ä¼šäº†å—ï¼Ÿ</p>
<p>å—¨ï¼Œè·Ÿä½ ä»¬äº¤ä¸ªå®åº•å„¿ã€‚å¾ˆå¤šè¯¾ï¼Œæˆ‘ä¹°å®Œå°±æ”¾åœ¨é‚£å„¿åƒç°äº†ã€‚å°±åƒå¥èº«æˆ¿åŠäº†å¡å°±ç­‰äºç»ƒäº†ä¸€æ ·ï¼Œä¹°äº†è¯¾ï¼Œæˆ‘å°±è§‰å¾—è‡ªå·±ä¼¼ä¹å·²ç»æŒæ¡äº†é‚£ä¸ªçŸ¥è¯†ï¼Œå¿ƒé‡Œé‚£ç§ç„¦è™‘æ„Ÿç¨å¾®ç¼“è§£äº†ä¸€ç‚¹ç‚¹ã€‚</p>
<p>ä¸å…¶è¯´æˆ‘åœ¨ä¸ºçŸ¥è¯†ä¹°å•ï¼Œä¸å¦‚è¯´æˆ‘åœ¨ä¸ºæˆ‘çš„<strong>å®‰å…¨æ„Ÿ</strong>ä¹°å•ã€‚è¿™æ˜¯ä¸€ç§æ˜‚è´µçš„å¿ƒç†æŒ‰æ‘©ã€‚</p>
<p>å¶å°”æ·±å¤œåæ€ï¼Œæˆ‘ä¹Ÿè§‰å¾—è‡ªå·±åƒä¸ªéŸ­èœã€‚ä½†è½¬å¿µä¸€æƒ³ï¼Œä¸‡ä¸€å‘¢ï¼Ÿä¸‡ä¸€å“ªèŠ‚è¯¾é‡Œçš„ä¸€å¥è¯ï¼ŒçœŸç»™æˆ‘æ‰“å¼€äº†ä¸€æ‰‡çª—ï¼Œè®©æˆ‘æ‰¾åˆ°äº†ä¸‹ä¸€ä¸ªé£å£å‘¢ï¼Ÿè¿™ç§èµŒå¾’å¿ƒæ€ï¼Œæ”¯æ’‘ç€æˆ‘ä¸€æ¬¡æ¬¡æŒ‰ä¸‹æ”¯ä»˜å¯†ç ã€‚</p>
<h3 data-id="heading-4">äº”ã€ è¿˜æœ‰äº›é›¶ç¢çš„å°é’±</h3>
<p>é™¤äº†ä¸Šé¢è¿™äº›å¤§å¤´ï¼Œè¿˜æœ‰ä»€ä¹ˆå¤©å·¥PPTå•Šï¼ŒTRAEï¼ŒCodeBuddyã€Qoderï¼Œä»¥åŠå„ç§APIçš„ä¸­è½¬ç«™è´¹ç”¨å•Šï¼Œæ—æ—æ€»æ€»åŠ èµ·æ¥ï¼Œä¸€ä¸ªæœˆæ§åˆ¶åœ¨ <strong>Â¥100</strong> ä»¥å†…ã€‚è¿™äº›å°±åƒæ˜¯å¹³æ—¶ä¹°çš„å°é›¶é£Ÿï¼Œä¸èµ·çœ¼ï¼Œä½†ä¹Ÿä¸èƒ½å°‘ã€‚</p>
<p><strong>è¿˜æœ‰ä¸ªâ€œç™½æœˆå…‰â€ä¸å¾—ä¸æâ€”â€”Google çš„å…¨å®¶æ¡¶ã€‚</strong></p>
<p>æœ€è¿‘æˆ‘æ˜¯çœŸè¢« Google çš„ Gemini Advanced ç»™ç§è‰äº†ï¼Œå°¤å…¶æ˜¯é‚£ä¸ª <strong>NotebookLM</strong>ï¼ŒåŠŸèƒ½åˆå¼ºåˆå¥½ç©ï¼Œç®€ç›´æ˜¯æ•´ç†èµ„æ–™çš„ç¥å™¨ï¼æˆ‘æ˜¯çœŸæƒ³ç«‹é©¬æé’±â€œä¸Šè½¦â€ï¼Œä½†ä½å¤´çœ‹äº†ä¸€çœ¼ä»Šå¹´çš„è´¢åŠ¡æŠ¥è¡¨â€¦â€¦ å“ï¼Œå…¨æ˜¯èµ¤å­—ã€‚
æ²¡åŠæ³•ï¼Œåœ°ä¸»å®¶ä¹Ÿæ²¡ä½™ç²®äº†ã€‚è¿™äº‹å„¿åªèƒ½å…ˆå¿å¿ï¼Œæš—ä¸­è“„åŠ›ã€‚æˆ‘ç°åœ¨æ­£æ»¡ä¸–ç•Œæ‰¾èƒ½â€œå›è¡€â€çš„ç§æ´»æˆ–è€…æ´»åŠ¨ï¼Œäº‰å–æŠŠä»Šå¹´çš„å‘å¡«ä¸Šï¼Œæ˜å¹´é«˜ä½å¾—æŠŠ Google è¿™ä½å¤§ç¥ä¹Ÿè¯·è¿›æˆ‘çš„ä»˜è´¹åå®«é‡Œï¼</p>
<h3 data-id="heading-5">è´·æ¬¾ä¸Šç­çš„çœŸç›¸</h3>
<p>å¥½ï¼Œå’±ä»¬æ¥ç®—ç®—æ€»è´¦ã€‚</p>
<p>Â¥300ï¼ˆç¼–ç¨‹ï¼‰+ Â¥140ï¼ˆCursorï¼‰+ Â¥140ï¼ˆChatGPTï¼‰+ Â¥190ï¼ˆLovartï¼‰+ Â¥1000/12ï¼ˆçŸ¥è¯†ä»˜è´¹ï¼‰+ Â¥100ï¼ˆé›¶ç¢ï¼‰ â‰ˆ <strong>Â¥ / 970æœˆ</strong>ã€‚</p>
<p>å…„å¼Ÿä»¬ï¼Œçœ‹åˆ°è¿™ä¸ªæ•°å­—äº†å—ï¼Ÿ</p>
<p>è¿™æ„å‘³ç€ï¼Œæˆ‘æ¯ä¸ªæœˆçå¼€çœ¼ï¼Œè¿˜æ²¡å¼€å§‹å¹²æ´»ï¼Œå°±å·²ç»æ¬ äº†è¿™ä¸–ç•Œ 1000 å—é’±äº†ã€‚å¦‚æœæ˜¯åˆšæ¯•ä¸šé‚£ä¼šå„¿ï¼Œè¿™ç¬”é’±å¤Ÿæˆ‘åƒå¥½å‡ ä¸ªæœˆçš„æ³¡é¢ï¼Œæˆ–è€…ç§Ÿä¸ªä¸é”™çš„å•é—´ã€‚</p>
<p>æˆ‘ä¹Ÿç»å¸¸é—®è‡ªå·±ï¼š<strong>å€¼å¾—å—ï¼Ÿ</strong></p>
<p>å¦‚æœä¸èŠ±è¿™é’±ï¼Œæˆ‘å¯èƒ½åªèƒ½ç”¨ç€ç¬¨é‡çš„IDEï¼Œå†™ç€é‡å¤çš„ä»£ç ï¼Œåšç€ä¸‘é™‹çš„è®¾è®¡ï¼Œç„¶åçœ‹ç€åˆ«äººçš„æ•ˆç‡éª‘åœ¨æˆ‘å¤´ä¸Šæ‹‰å±ã€‚</p>
<p>åœ¨è¿™ä¸ªæ—¶ä»£ï¼Œæˆ‘ä»¬è¿™ç¾¤èŒåœºç‰›é©¬ï¼Œä¸ºäº†ä¸è¢«å®°æ€ï¼Œä¸å¾—ä¸è‡ªè´¹è´­ä¹°æ›´é«˜çº§çš„éå…·ï¼ŒæŠŠè‡ªå·±æ­¦è£…æˆæˆ˜é©¬ã€‚è¿™å¬èµ·æ¥æœ‰ç‚¹æ‚²å£®ï¼Œç”šè‡³æœ‰ç‚¹æ»‘ç¨½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f94e48767714f7891084d4bcfa4dbf4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110515&amp;x-signature=6cTWZdq8r7akFQ0gId5WWwuzddA%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†è½¬å¿µä¸€æƒ³ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§è¿›åŒ–å§ã€‚è™½ç„¶é’±åŒ…ç˜ªäº†ï¼Œä½†æˆ‘ç¡®å®æ„Ÿè§‰è‡ªå·±å˜å¼ºäº†ï¼ˆä¹Ÿå˜ç§ƒäº†ï¼‰ã€‚è¿™ 1000 å—ï¼Œæ˜¯æˆ‘ç»™æœªæ¥äº¤çš„ä¿æŠ¤è´¹ï¼Œä¹Ÿæ˜¯æˆ‘ä½œä¸ºä¸€ä¸ªä¸­å¹´ç”·äººï¼Œæœ€åçš„å€”å¼ºã€‚è¿™äº›å†…å®¹æ˜¯ä¸€ä¸ªæŠ€æœ¯åšä¸»çš„èŒä¸šç´ å…»ï¼Œé¡ºä¾¿æ™’æ™’æˆ‘ä¸æƒ‘çš„è‹¦é€¼è´¦å•ã€‚å¦‚æœä½ ä¹Ÿåœ¨ä¸ºAIæé’±ï¼Œæˆ–è€…ä¹Ÿåœ¨ç„¦è™‘ä¸­æŒ£æ‰ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºå‘Šè¯‰æˆ‘ï¼Œè®©æˆ‘çŸ¥é“ï¼Œåœ¨è¿™æ¡è´·æ¬¾ä¸Šç­çš„è·¯ä¸Šï¼Œæˆ‘å¹¶ä¸å­¤å•ã€‚</p>
<p>æˆ‘æ˜¯è´·æ¬¾ä¸Šç­çš„ä¸æƒ‘ï¼Œå’±ä»¬æ˜å¹´è§ï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡å­—ï¼Œéº»çƒ¦ç‚¹ä¸ªå…³æ³¨ï¼Œæˆ‘æˆåä¹‹åï¼Œç»ä¸å‰²ä½ éŸ­èœï½ğŸ‘‹ğŸ‘¨ğŸ¿â€ğŸ¦²</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„å‡ ä¸ªå¤§æ‹›ï¼ˆç†è®º+å®è·µï¼‰]]></title>    <link>https://juejin.cn/post/7468655596641976320</link>    <guid>https://juejin.cn/post/7468655596641976320</guid>    <pubDate>2025-02-08T03:22:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7468655596641976320" data-draft-id="7462869908046479369" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„å‡ ä¸ªå¤§æ‹›ï¼ˆç†è®º+å®è·µï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-02-08T03:22:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Aleeeeex"/> <meta itemprop="url" content="https://juejin.cn/user/2189882895381751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„å‡ ä¸ªå¤§æ‹›ï¼ˆç†è®º+å®è·µï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2189882895381751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Aleeeeex
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-02-08T03:22:25.000Z" title="Sat Feb 08 2025 03:22:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    30,478
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.7;font-weight:400;font-size:16px;overflow-x:hidden;color:#2c3e50;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;font-weight:600;margin-top:35px;margin-bottom:8px;padding-bottom:5px}.markdown-body h1 :before,.markdown-body h2 :before,.markdown-body h3 :before,.markdown-body h4 :before,.markdown-body h5 :before,.markdown-body h6 :before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:8px;margin-top:50px;font-size:24px;border-bottom:1px solid #eaecef}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #eaecef;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;font-weight:400;background-color:rgba(27,31,35,.05);color:#476582;margin:0;font-size:.85em;border-radius:3px;font-size:.87em;padding:.165em .5em}.markdown-body code,.markdown-body pre{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.6;padding:20px 24px;background-color:#282c34;border-radius:6px}.markdown-body pre&gt;code{font-size:14px;padding:0;margin:0;word-break:normal;display:block;overflow-x:auto;color:#fff}.markdown-body a{text-decoration:none;color:#3eaf7c;font-weight:500}.markdown-body a:active,.markdown-body a:hover{color:#42b983;border-bottom:1px solid #42b983}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;margin:16px 0;border-collapse:collapse}.markdown-body thead{background:#f6f6f6;background:#3eaf7c;color:#000;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f6f8fa}.markdown-body td,.markdown-body th{border:1px solid #dfe2e5;padding:10px 16px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{font-size:14px;padding:6px 23px;margin:22px 0;border-left:6px solid #42b983;background-color:#f3f5f7;font-weight:400}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body p,.markdown-body ul{line-height:1.7}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æ€§èƒ½ä¼˜åŒ–ï¼Œä¸€ä¸ªæ£è‚˜ç”¨æˆ·ä½“éªŒçš„å…³é”®æ¨¡å—ã€‚å®ƒæ²¡æœ‰å›ºå®šçš„æ ‡å‡†å®šä¹‰æˆ–å”¯ä¸€çš„è§£å†³æ–¹æ¡ˆã€‚ä½†æ˜¯æˆ‘ä»¬ä»æ•´ä¸ªé¡¹ç›®çš„å¼€å‘-éƒ¨ç½²-ç”¨æˆ·ä½“éªŒçš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ€»èƒ½æ‘¸åˆ°å¾ˆå¤šæœ‰æ™®é€‚æ€§çš„è§„èŒƒæˆ–è€…ä¼˜åŒ–ç†å¿µã€‚</p>
<p>æˆ‘ä»¬çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿä¼˜åŒ–å•¥ï¼Ÿ</p>
<p>åº”å½“æ˜¯ï¼š<strong>æ›´å¿«çš„åŠ è½½å’Œå“åº”é€Ÿåº¦ã€æ›´ç¨³å®šçš„åŠŸèƒ½è¡¨ç°ã€æ›´ç®€æ´çš„ä»£ç ä¸æ¶æ„è®¾è®¡ã€æ›´å¥½ç”¨æ›´äººæ€§åŒ–</strong>ã€‚</p>
<blockquote>
<p>è¯´äººè¯æ˜¯ï¼šæ€§èƒ½ä¼˜åŒ–åº”å½“æ˜¯è®©ç”¨æˆ·èƒ½æ„Ÿè§‰åˆ°çˆ½çš„ï¼Œå¹¶ä¸”äº§ç”Ÿç”¨æˆ·ç²˜æ€§çš„æ‰€æœ‰æ–¹å¼çš„æ€»ç§°</p>
</blockquote>
<p>å¥½å§ï¼Œä¹Ÿæ²¡æœ‰é‚£ä¹ˆäººè¯...</p>
<p>é‚£çŸ¥é“äº†æˆ‘ä»¬æ€§èƒ½ä¼˜åŒ–çš„ç›®çš„ï¼Œæˆ‘ä»¬è¦å¦‚ä½•æï¼Œæ‰å¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„å‘¢ï¼Ÿ</p>
<p>åœ¨æˆ‘çš„è„‘å›¾ä¸­ï¼Œæˆ‘ä¸€ç›´å°†æ€§èƒ½ä¼˜åŒ–åˆ†ä¸º2å¤§æ¨¡å—ï¼š</p>
<ul>
<li>é’ˆå¯¹ç½‘ç»œå±‚é¢çš„ä¼˜åŒ–ï¼Œ</li>
<li>é’ˆå¯¹æ¸²æŸ“å±‚é¢çš„ä¼˜åŒ–ã€‚</li>
</ul>
<p>è¿™æ˜¯ä»æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹æ¥è¿›è¡Œåˆ†ç±»çš„ï¼ˆè€ç”Ÿå¸¸è°ˆäº†ï¼ŒçŸ¥é“çš„å¯ä»¥è·³è¿‡ï¼‰</p>
<blockquote>
<p>å½“ç”¨æˆ·åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ç½‘å€å¹¶æŒ‰ä¸‹å›è½¦åï¼Œæµè§ˆå™¨é¦–å…ˆé€šè¿‡DNSè§£æè·å–åŸŸåå¯¹åº”çš„IPåœ°å€ï¼Œç„¶åå»ºç«‹TCPè¿æ¥ï¼ˆæˆ–HTTPSéœ€é¢å¤–è¿›è¡ŒTLSæ¡æ‰‹ï¼‰ã€‚æ¥ç€ï¼Œæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€HTTPè¯·æ±‚ï¼ŒæœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å›HTMLç­‰å“åº”å†…å®¹ã€‚æµè§ˆå™¨æ¥æ”¶å“åº”åå¼€å§‹è§£æHTMLï¼Œæ„å»ºDOMæ ‘ï¼ŒåŒæ—¶è§£æCSSæ„å»ºCSSOMæ ‘ï¼Œå¹¶é€šè¿‡JavaScriptå¤„ç†åŠ¨æ€é€»è¾‘ã€‚éšåï¼Œæµè§ˆå™¨ç»“åˆDOMæ ‘å’ŒCSSOMæ ‘ç”Ÿæˆæ¸²æŸ“æ ‘ï¼Œè¿›è¡Œå¸ƒå±€è®¡ç®—ç¡®å®šå…ƒç´ çš„å¤§å°å’Œä½ç½®ï¼Œæœ€ç»ˆå°†å†…å®¹ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¤–éƒ¨èµ„æºå¦‚CSSã€JSã€å›¾ç‰‡ç­‰ä¼šå¹¶è¡ŒåŠ è½½ï¼Œå¹¶åœ¨åŠ è½½å®ŒæˆååŠ¨æ€æ›´æ–°é¡µé¢ã€‚æ¸²æŸ“å®Œæˆåï¼Œæµè§ˆå™¨æŒç»­åŠ è½½å¼‚æ­¥èµ„æºå¹¶å¤„ç†ç”¨æˆ·çš„äº¤äº’æ“ä½œï¼Œå®ç°é¡µé¢çš„å®Œæ•´æ€§å’Œäº¤äº’æ€§ã€‚</p>
</blockquote>
<p>åœ¨å…·ä½“å®è·µä¸­ï¼Œå¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ç€æ‰‹ï¼š</p>
<ol>
<li><strong>å‰ç«¯åŠ è½½æ€§èƒ½</strong>ï¼šå‡å°‘é¦–å±åŠ è½½æ—¶é—´å’Œèµ„æºä½“ç§¯ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚</li>
<li><strong>è¿è¡Œæ—¶æ€§èƒ½</strong>ï¼šæé«˜é¡µé¢æ¸²æŸ“å’Œäº¤äº’çš„æµç•…æ€§ï¼Œé™ä½èµ„æºå ç”¨ã€‚</li>
<li><strong>ç¨³å®šæ€§å’Œå¯é æ€§</strong>ï¼šç¡®ä¿åœ¨é«˜å¹¶å‘æˆ–å¤æ‚åœºæ™¯ä¸‹çš„æ€§èƒ½è¡¨ç°ä¸€è‡´ã€‚</li>
<li><strong>ä»£ç ç»´æŠ¤æ€§</strong>ï¼šé€šè¿‡ç®€æ´ã€é«˜æ•ˆçš„ä»£ç å®ç°åŠŸèƒ½ï¼Œé™ä½æŠ€æœ¯å€ºåŠ¡å’Œåç»­å¼€å‘æˆæœ¬ã€‚</li>
</ol>
<p>æ— è®ºæ˜¯å“ªç§ä¼˜åŒ–ç­–ç•¥ï¼Œç›®æ ‡éƒ½æ˜¯åœ¨æ»¡è¶³å®é™…ä¸šåŠ¡éœ€æ±‚çš„åŸºç¡€ä¸Šï¼Œæä¾›æœ€ä½³çš„ç”¨æˆ·ä½“éªŒå’ŒæŠ€æœ¯å¯æŒç»­æ€§ã€‚</p>
<p>å®æ–½èµ·æ¥æ€»ä½“å°±æ˜¯è¿™å‡ ä¸ªè¯ï¼š<strong>ç¼“å­˜</strong>ã€<strong>å‹ç¼©</strong>ã€<strong>æ‡’åŠ è½½</strong>ï¼Œåšå¥½è¿™å‡ ä¸ªè¯ï¼ŒåŸºæœ¬å°±åšå¥½äº†å¤§åŠçš„æ€§èƒ½ä¼˜åŒ–ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å¨“å¨“é“æ¥ã€‚</p>
<h2 data-id="heading-1">1. åŠ è½½æ—¶æ€§èƒ½ä¼˜åŒ–</h2>
<p>æˆ‘ä»¬è¦è®©èµ„æºåŠ è½½çš„å¿«ä¸€ç‚¹ï¼Œæ— éå°±æ˜¯ï¼šèµ„æºå°ä¸€ç‚¹ï¼Œå°‘è¯·æ±‚ä¸€ç‚¹ï¼Œå½“å‰æ¸²æŸ“ä¸è¦çš„ä¸œè¥¿å…ˆåˆ«åŠ è½½ï¼Œè¯·æ±‚çš„ç½‘é€Ÿå¿«ä¸€ç‚¹ã€‚æˆ‘ä»¬æŒ¨ä¸ªè®²ã€‚</p>
<h3 data-id="heading-2">1.1 èµ„æºå°ä¸€ç‚¹</h3>
<p>æ€ä¹ˆè®©èµ„æºå¯ä»¥å°½å¯èƒ½çš„å°å‘¢ï¼ŸåŸºæœ¬é€ƒç¦»ä¸äº†4ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>åˆ é™¤å†—ä½™ä»£ç </li>
<li>æŒ‰éœ€åŠ è½½ï¼ˆåŒ…å«æ‡’åŠ è½½ï¼‰</li>
<li>ç»†é¢—ç²’åº¦çš„ä»£ç åˆ†å‰²ï¼ˆå…¶å®æ˜¯åˆ©ç”¨ç¼“å­˜ç­–ç•¥ï¼‰</li>
<li>å¼€å¯gzipå‹ç¼©</li>
<li>å›¾ç‰‡ä½“ç§¯ä¼˜åŒ–</li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å±•å¼€è®²ä¸€è®²</p>
<h4 data-id="heading-3">1.1.1 èµ„æºå°ä¸€ç‚¹ï¼šåˆ é™¤å†—ä½™ä»£ç </h4>
<p>å†—ä½™ä»£ç å¯èƒ½æ¥æºäºæœªä½¿ç”¨çš„æ¨¡å—ã€ç»„ä»¶ã€å‡½æ•°ã€æ ·å¼æˆ–ä¸å†éœ€è¦çš„ç¬¬ä¸‰æ–¹åº“ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„æ–¹æ³•ï¼š</p>
<h5 data-id="heading-4"><strong>æ–¹æ³•ä¸€ï¼š Tree Shaking</strong></h5>
<p><strong>ä»€ä¹ˆæ˜¯ Tree Shakingï¼Ÿ</strong></p>
<p>Tree Shaking æ˜¯ä¸€ç§<strong>é€šè¿‡é™æ€åˆ†æç§»é™¤æœªä½¿ç”¨ä»£ç </strong>çš„æŠ€æœ¯ï¼Œé€šå¸¸ç”¨æ¥ä¼˜åŒ–å‰ç«¯é¡¹ç›®ä¸­çš„ JavaScript å’Œ CSS ä»£ç ã€‚</p>
<p><em><strong>è¯´äººè¯ï¼šé™æ€åˆ†æå°±æ˜¯ä¾èµ–esmçš„è¯­æ³•ï¼ŒçŸ¥é“å“ªä¸ªæ¨¡å—å¼•ç”¨äº†ï¼Œå“ªä¸ªæ¨¡å—æ²¡å¼•ç”¨ï¼Œæ²¡å¼•ç”¨çš„å°±åˆ æ‰ã€‚</strong></em></p>
<p>å…¶åç§°æ¥æºäºâ€œæ‘‡æ ‘â€ï¼Œæ¨¡æ‹Ÿå°†ç”¨ä¸åˆ°çš„ä»£ç ä»ä»£ç æ ‘ä¸­â€œæ‘‡æ‰â€ï¼Œä½¿æœ€ç»ˆçš„æ‰“åŒ…ä½“ç§¯æ›´å°ï¼ŒåŠ è½½é€Ÿåº¦æ›´å¿«ã€‚</p>
<p><strong>Tree Shaking çš„åŸç†</strong></p>
<p>Tree Shaking çš„æ ¸å¿ƒä¾èµ–äº ES Module è§„èŒƒ (<code>import/export</code>)ï¼Œå› ä¸ºå®ƒæ˜¯<strong>é™æ€å¯¼å…¥</strong>ï¼Œå¯ä»¥åœ¨æ„å»ºæ—¶ç¡®å®šå“ªäº›ä»£ç è¢«ä½¿ç”¨ã€‚
-   CommonJS (<code>require/module.exports</code>) æ˜¯åŠ¨æ€å¯¼å…¥çš„ï¼Œéš¾ä»¥åœ¨ç¼–è¯‘æ—¶è¿›è¡Œé™æ€åˆ†æï¼Œå› æ­¤ä¸æ”¯æŒ Tree Shakingã€‚</p>
<p>å®ƒæ˜¯ Dead Code Elimination çš„ä¸€ä¸ªå­é›†ã€‚å®ƒé¦–å…ˆæ ‡è®°ä»£ç ä¸­å“ªäº›å¯¼å…¥çš„æ¨¡å—æœªè¢«ä½¿ç”¨ï¼Œç„¶åé€šè¿‡ä»£ç å‹ç¼©å™¨ï¼ˆå¦‚ Terserï¼‰æ¥ç§»é™¤è¿™äº›æ­»ä»£ç ã€‚</p>
<p><strong>å‰ç«¯é¡¹ç›®å¦‚ä½•åš Tree Shakingï¼Ÿ</strong></p>
<ol>
<li>
<p><strong>ä½¿ç”¨ ESM æ ¼å¼çš„æ¨¡å—</strong>ï¼š</p>
<p>ç¡®ä¿ä»£ç ä½¿ç”¨ <code>import/export</code>ï¼Œé¿å… <code>require/module.exports</code>ã€‚</p>
</li>
<li>
<p><strong>é…ç½®æ‰“åŒ…å·¥å…·æ”¯æŒ</strong>ï¼š</p>
<p>ä¸ç®¡æ˜¯viteè¿˜æ˜¯wepack,å¯ç”¨ç”Ÿäº§æ¨¡å¼ï¼Œç»“åˆæ„å»ºå·¥å…·å’Œé€‚å½“çš„é…ç½®å°±å¯ä»¥å¼€å¯Tree Shakingå¯¹æœªä½¿ç”¨ä»£ç è¿›è¡Œä¼˜åŒ–ã€‚</p>
</li>
<li>
<p><strong>é™æ€å¯¼å…¥</strong>ï¼š</p>
<p>é¿å…åŠ¨æ€å¯¼å…¥æˆ–åœ¨è¿è¡Œæ—¶æ¡ä»¶ä¸‹é€‰æ‹©æ¨¡å—ï¼Œå› ä¸ºè¿™äº›æƒ…å†µæ— æ³•è¢«é™æ€åˆ†æã€‚</p>
</li>
<li>
<p><strong>é¿å…å‰¯ä½œç”¨ (Side Effects)</strong> ï¼š</p>
<p>å¦‚æœæ¨¡å—åœ¨å¯¼å…¥æ—¶æœ‰å‰¯ä½œç”¨ï¼ˆå¦‚ä¿®æ”¹å…¨å±€å˜é‡ï¼‰ï¼Œæ‰“åŒ…å·¥å…·ä¼šä¿ç•™å®ƒã€‚é€šè¿‡ <code>sideEffects</code> é…ç½®å£°æ˜å“ªäº›æ–‡ä»¶å®‰å…¨åˆ é™¤ã€‚</p>
</li>
</ol>
<p><strong>ä»£ç ç¤ºä¾‹</strong></p>
<p><strong>æ–‡ä»¶ï¼š<code>math.js</code></strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// math.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">subtract</span> = (<span class="hljs-params">a, b</span>) =&gt; a - b;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">multiply</span> = (<span class="hljs-params">a, b</span>) =&gt; a * b;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">divide</span> = (<span class="hljs-params">a, b</span>) =&gt; a / b;
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†å››ä¸ªå‡½æ•° <code>add</code>ã€<code>subtract</code>ã€<code>multiply</code>ã€<code>divide</code>ï¼Œå¹¶é€šè¿‡ <code>export</code> å¯¼å‡ºã€‚</p>
<p><strong>æ–‡ä»¶ï¼š<code>index.js</code></strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">import</span> { add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./math.js'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)); <span class="hljs-comment">// è¾“å‡º: 5</span>
</code></pre>
<p>åœ¨ <code>index.js</code> ä¸­ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº† <code>add</code> å‡½æ•°ï¼Œå…¶ä»–ä¸‰ä¸ªå‡½æ•°ï¼ˆ<code>subtract</code>ã€<code>multiply</code>ã€<code>divide</code>ï¼‰æ²¡æœ‰è¢«å¼•ç”¨ã€‚</p>
<p>ç»è¿‡æ‰“åŒ…åçš„è¾“å‡º:</p>
<p>å¦‚æœå¯ç”¨äº† Tree Shakingï¼ˆä»¥ Webpack æˆ– Vite ä¸ºä¾‹ï¼‰ï¼Œæ„å»ºå·¥å…·ä¼šåˆ†ææ¨¡å—çš„ä¾èµ–å’Œå¼•ç”¨ï¼Œç§»é™¤æœªä½¿ç”¨çš„ä»£ç ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ‰“åŒ…åä»£ç </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)); <span class="hljs-comment">// è¾“å‡º: 5</span>
</code></pre>
<p>æœªä½¿ç”¨çš„ <code>subtract</code>ã€<code>multiply</code>ã€<code>divide</code> å‡½æ•°å·²ç»è¢«ç§»é™¤ã€‚</p>
<p><strong>æ¨¡å—çº§åˆ«çš„å†—ä½™ä»£ç åˆ é™¤ï¼Œtree-shakingæ¯”è¾ƒå¾—å¿ƒåº”æ‰‹ï¼Œä½†æ˜¯æ›´ç»†é¢—ç²’åº¦çš„åˆ é™¤ï¼Œè¿˜éœ€è¦ä¾èµ–å…¶ä»–æ‰‹æ®µã€‚</strong></p>
<h5 data-id="heading-5"><strong>æ–¹æ³•äºŒï¼š å‹ç¼©æ’ä»¶ä¼˜åŒ–åˆ é™¤</strong></h5>
<ul>
<li>
<p>JavaScript çš„å‹ç¼©å’Œä¼˜åŒ–</p>
<p>é€šè¿‡å·¥å…·ï¼ˆå¦‚ Terserã€esbuild ç­‰ï¼‰ï¼Œå¯ä»¥åˆ é™¤æœªè¢«å¼•ç”¨çš„ä»£ç ç‰‡æ®µã€ç®€åŒ–è¡¨è¾¾å¼ã€å†…è”å˜é‡ç­‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼šWebpack é…ç½®ï¼ˆTerserï¼‰</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">TerserPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'terser-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>, <span class="hljs-comment">// å¼€å¯ç”Ÿäº§æ¨¡å¼ï¼Œé»˜è®¤å¯ç”¨ä»£ç å‹ç¼©</span>
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">minimize</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">minimizer</span>: [<span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>()],
  },
};
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åŸå§‹ä»£ç </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">unused</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'I am not used!'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">multiply</span> = (<span class="hljs-params">a, b</span>) =&gt; a * b;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">multiply</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>));

<span class="hljs-comment">//å‹ç¼©åˆ é™¤å</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span> * <span class="hljs-number">3</span>);
</code></pre>
<p>æœªä½¿ç”¨çš„ <code>unused</code> å‡½æ•°è¢«ç§»é™¤ï¼Œè¡¨è¾¾å¼ <code>a * b</code> è¢«ç›´æ¥è®¡ç®—ä¸ºç»“æœã€‚</p>
</li>
<li>
<p>CSS çš„å‹ç¼©å’Œä¼˜åŒ–</p>
<p>æœªä½¿ç”¨çš„ CSS é€‰æ‹©å™¨å¯ä»¥é€šè¿‡å·¥å…·ï¼ˆå¦‚ PurgeCSSã€UnCSS ç­‰ï¼‰åˆ é™¤ã€‚ä¸¾ä¸ªä¾‹å­ï¼šPurgeCSS é…ç½®</p>
<p>PurgeCSS æ£€æŸ¥ HTMLã€JS ä¸­ä½¿ç”¨çš„ç±»åï¼Œä»…ä¿ç•™ç›¸å…³æ ·å¼ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å®‰è£… PurgeCSS</span>
npm install @fullhuman/postcss-purgecss --save-dev
</code></pre>
<p><code>postcss.config.js</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-built_in">require</span>(<span class="hljs-string">'@fullhuman/postcss-purgecss'</span>)({
      <span class="hljs-attr">content</span>: [<span class="hljs-string">'./src/**/*.html'</span>, <span class="hljs-string">'./src/**/*.js'</span>], <span class="hljs-comment">// æ£€æµ‹çš„æ–‡ä»¶è·¯å¾„</span>
      <span class="hljs-attr">defaultExtractor</span>: <span class="hljs-function"><span class="hljs-params">content</span> =&gt;</span> content.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/[\w-/:]+(?&lt;!:)/g</span>) || [], <span class="hljs-comment">// æå–ç±»å</span>
    }),
  ],
};
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">
<span class="hljs-comment">/* åŸå§‹ CSS æ–‡ä»¶ */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-selector-class">.unused-class</span> {
  <span class="hljs-attribute">background</span>: yellow;
}

<span class="hljs-comment">/* ä¼˜åŒ–å CSS æ–‡ä»¶ */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">color</span>: red;
}

</code></pre>
<p>æœªä½¿ç”¨çš„ <code>.unused-class</code> æ ·å¼è¢«ç§»é™¤ã€‚</p>
<hr/>
</li>
</ul>
<h4 data-id="heading-6">1.1.2 èµ„æºå°ä¸€ç‚¹ï¼šæŒ‰éœ€åŠ è½½</h4>
<p><strong>æŒ‰éœ€åŠ è½½ï¼ˆOn-demand Loadingï¼‰</strong> Â æ˜¯å‰ç«¯ä¼˜åŒ–çš„ä¸€ç§æ ¸å¿ƒæ‰‹æ®µï¼ŒæŒ‡åœ¨åº”ç”¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä»…åœ¨ç”¨æˆ·éœ€è¦æ—¶åŠ¨æ€åŠ è½½ç‰¹å®šèµ„æºï¼ˆå¦‚JavaScript ä»£ç ã€CSS æ–‡ä»¶ã€ç»„ä»¶ã€å›¾ç‰‡ç­‰ï¼‰ï¼Œè€Œéä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰èµ„æºã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯Â <strong>ã€Œå»¶è¿ŸåŠ è½½éå¿…è¦å†…å®¹ã€</strong>ï¼Œç±»ä¼¼äºåˆ†æ‰¹å¤„ç†ä»»åŠ¡ï¼Œé€šè¿‡å‡å°‘åˆå§‹åŠ è½½é‡æ¥æå‡æ€§èƒ½ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œä¼ ç»Ÿçš„ Web é¡µé¢åœ¨åŠ è½½æ—¶ï¼Œä¼šä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰çš„ JavaScript å’Œ CSS æ–‡ä»¶ï¼Œå³ä½¿å…¶ä¸­çš„å¾ˆå¤šèµ„æºåœ¨å½“å‰é¡µé¢å¹¶æœªä½¿ç”¨ã€‚è€ŒæŒ‰éœ€åŠ è½½åˆ™å¯ä»¥ <strong>åˆ†æ‰¹åŠ è½½</strong> è¿™äº›èµ„æºï¼Œå‡å°‘ä¸å¿…è¦çš„åŠ è½½ï¼Œæé«˜ç½‘é¡µçš„åŠ è½½é€Ÿåº¦å’Œè¿è¡Œæ•ˆç‡ã€‚å…·ä½“ä½“ç°åœ¨ï¼š</p>
<ul>
<li>
<p><strong>å‡å°‘é¦–å±åŠ è½½æ—¶é—´</strong>ï¼šé¿å…ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰èµ„æºï¼ŒåŠ å¿«ç½‘é¡µé¦–æ¬¡æ¸²æŸ“é€Ÿåº¦ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚</p>
</li>
<li>
<p><strong>ä¼˜åŒ–æ€§èƒ½</strong>ï¼šå‡å°‘æµè§ˆå™¨çš„è§£æå’Œæ‰§è¡Œè´Ÿæ‹…ï¼Œé¿å…åŠ è½½æ— ç”¨çš„ä»£ç ï¼Œæé«˜è¿è¡Œæ•ˆç‡ã€‚</p>
</li>
<li>
<p><strong>èŠ‚çœå¸¦å®½</strong>ï¼šåªåŠ è½½éœ€è¦çš„èµ„æºï¼Œå‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ï¼Œé™ä½æœåŠ¡å™¨å’Œç”¨æˆ·çš„æµé‡æ¶ˆè€—ã€‚</p>
</li>
<li>
<p><strong>æå‡äº¤äº’ä½“éªŒ</strong>ï¼šåœ¨ç”¨æˆ·å®é™…éœ€è¦æ—¶æ‰åŠ è½½èµ„æºï¼Œæ¯”å¦‚æ»šåŠ¨åˆ°æŸä¸ªéƒ¨åˆ†æ‰åŠ è½½å›¾ç‰‡ï¼Œæé«˜é¡µé¢çš„å“åº”é€Ÿåº¦ã€‚</p>
</li>
</ul>
<p><strong>é‚£æŒ‰éœ€åŠ è½½çš„å¦‚ä½•å®ç°ï¼ŸæŒ‰éœ€åŠ è½½çš„ç†è®ºåŸºç¡€æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>æŒ‰éœ€åŠ è½½å…¶å®æ˜¯åŸºäºæ¨¡å—åŒ–çš„ç†è®ºåŸºç¡€ã€‚è¦ä¸æ˜¯ä»£ç å¯ä»¥åˆ†æ¨¡å—å†™ï¼Œé‚£å°±æ ¹æ®éœ€æ±‚åŠ è½½ç‰¹å®šæ¨¡å—å°±æ— ä»è°ˆèµ·ã€‚</p>
<p>é‚£æˆ‘ä»¬åœ¨å‰ç«¯çš„é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬æ˜¯ä¾é  åŠ¨æ€å¯¼å…¥ï¼ˆDynamic Importï¼‰è¯­æ³•ï¼Œä¹Ÿå°±æ˜¯ <code>import(...)</code>ã€‚
è¿™ç§å†™æ³•åœ¨æ²¡æœ‰æˆä¸ºè§„èŒƒä¹‹å‰æ˜¯ä¾èµ–webpackç­‰æ‰“åŒ…å·¥å…·çš„æ”¯æŒï¼Œä½†æ˜¯2023å¹´ä¹‹åä¹Ÿæˆä¸ºäº†ECMA Script æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œç™¾åˆ†ä¹‹ä¹åä»¥ä¸Šçš„æµè§ˆå™¨éƒ½æ”¯æŒã€‚</p>
<p>ä¸ä½¿ç”¨åŠ¨æ€å¯¼å…¥çš„å†™æ³•ï¼š<code>import APage from '../pages/APage'</code></p>
<p>ä½¿ç”¨åŠ¨æ€å¯¼å…¥çš„å†™æ³•ï¼š<code>const APage = import('../pages/APage')</code></p>
<p>ä½¿ç”¨åŠ¨æ€å¯¼å…¥è¯­æ³•ï¼Œé‚£ä¹ˆå°†ä¼šå¾—åˆ°ä¸€ä¸ª <code>promise</code> ,åŠ è½½æˆåŠŸæ˜¯ <code>fufiled</code>,åŠ è½½å¤±è´¥æ˜¯ <code>rejected</code>ã€‚è€Œåœ¨æ„å»ºçš„æ—¶å€™ï¼Œå¯¹åº”çš„æ¨¡å—ä¼šè¢«æ‹†åˆ†æˆå¯¹åº”çš„åŒºå—ï¼Œä¹Ÿå°±æ˜¯chunkæ–‡ä»¶ï¼Œæ˜¯ç‹¬ç«‹çš„ã€‚åœ¨ä»£ç è¿è¡Œæ—¶ä¼šåŠ¨æ€æ·»åŠ scriptæ ‡ç­¾ï¼Œè§¦å‘åŠ è½½å’Œæ‰§è¡Œã€‚</p>
<p><strong>å…·ä½“å¦‚ä½•å®æ–½æŒ‰éœ€åŠ è½½å‘¢ï¼Ÿ</strong></p>
<p>åœ¨å‰ç«¯é¡¹ç›®ä¸­ï¼Œå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°æŒ‰éœ€åŠ è½½ï¼Œå¸¸è§çš„æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä»£ç å±‚é¢çš„åŠ¨æ€å¯¼å…¥</li>
<li>ç»„ä»¶çº§çš„æ‡’åŠ è½½</li>
<li>å›¾ç‰‡å’Œé™æ€èµ„æºçš„æ‡’åŠ è½½</li>
<li>è·¯ç”±çº§çš„æ‡’åŠ è½½</li>
<li>æœåŠ¡ç«¯è¿”å›æ•°æ®çš„æŒ‰éœ€åŠ è½½</li>
</ul>
<p>æˆ‘ä»¬å±•å¼€è®²è®²ï¼š</p>
<h5 data-id="heading-7"><strong>ä»£ç æŒ‰éœ€åŠ è½½</strong></h5>
<ul>
<li>é€šè¿‡ <strong>JavaScript åŠ¨æ€å¯¼å…¥ï¼ˆimport()ï¼‰</strong> ï¼Œåœ¨ä»£ç æ‰§è¡Œåˆ°æŸä¸ªé€»è¾‘æ—¶å†åŠ è½½å¯¹åº”çš„æ¨¡å—ï¼Œè€Œä¸æ˜¯åœ¨é¡µé¢åŠ è½½æ—¶å°±å…¨éƒ¨åŠ è½½ã€‚</li>
<li>ä¸»è¦åº”ç”¨äº <strong>å¤§å‹å‰ç«¯é¡¹ç›®ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨ JavaScript ä»£ç </strong>ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼ˆä½¿ç”¨ Webpack/Vite å®ç°ä»£ç åˆ†å‰²ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ï¼ˆéæŒ‰éœ€åŠ è½½ï¼‰</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">HeavyComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./HeavyComponent'</span>;

<span class="hljs-comment">// æŒ‰éœ€åŠ è½½æ–¹å¼ï¼ˆåŠ¨æ€å¯¼å…¥ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadComponent</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">default</span>: <span class="hljs-title class_">HeavyComponent</span> } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./HeavyComponent'</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">HeavyComponent</span>;
};
</code></pre>
<p>âš¡ <strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<strong>ç¬¬ä¸‰æ–¹åº“æŒ‰éœ€åŠ è½½ã€å¤§å‹ç»„ä»¶åŠ è½½ã€é¡µé¢å†…åµŒåŠŸèƒ½çš„åŠ¨æ€åŠ è½½</strong>ã€‚</p>
<h5 data-id="heading-8"><strong>ç»„ä»¶çº§çš„æŒ‰éœ€åŠ è½½</strong></h5>
<p>åœ¨ <strong>Reactã€Vue</strong> è¿™äº›å‰ç«¯æ¡†æ¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>lazy</code> å’Œ <code>Suspense</code>ï¼ˆReactï¼‰æˆ– <code>defineAsyncComponent</code>ï¼ˆVueï¼‰å®ç°ç»„ä»¶çš„æŒ‰éœ€åŠ è½½ã€‚</p>
<p><em><strong>è¿˜æœ‰ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼ˆantd)çš„æŒ‰éœ€åŠ è½½ï¼ˆæ”¾åˆ°åé¢çš„vueé¡¹ç›®ä¼˜åŒ–ä¸­è®²ï¼‰</strong></em></p>
<p><strong>React ç»„ä»¶æŒ‰éœ€åŠ è½½ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { lazy, <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// æŒ‰éœ€åŠ è½½ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyComponent</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./LazyComponent'</span>));

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">LazyComponent</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span></span>
);
</code></pre>
<p>âš¡ <strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<strong>å¤§ç»„ä»¶ã€å¼¹çª—ã€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç­‰å¤æ‚ç»„ä»¶çš„æŒ‰éœ€åŠ è½½</strong>ã€‚</p>
<p><strong>Vue ç»„ä»¶æŒ‰éœ€åŠ è½½ç¤ºä¾‹ï¼ˆVue 3ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { defineAsyncComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">LazyComponent</span>: <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./LazyComponent.vue'</span>)),
  },
};
</code></pre>
<p>âš¡ <strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<strong>Vue ç»„ä»¶æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘åˆå§‹ bundle ä½“ç§¯</strong>ã€‚</p>
<h5 data-id="heading-9"><strong>å›¾ç‰‡æŒ‰éœ€åŠ è½½</strong></h5>
<p>å¯¹äºå›¾ç‰‡ç­‰é™æ€èµ„æºï¼Œå¯ä»¥ä½¿ç”¨ <strong>æ‡’åŠ è½½ï¼ˆLazy Loadï¼‰</strong> æŠ€æœ¯ï¼Œåœ¨ç”¨æˆ· <strong>æ»šåŠ¨åˆ°å›¾ç‰‡å¯è§æ—¶æ‰åŠ è½½</strong>ã€‚</p>
<p><strong>HTML åŸç”Ÿæ‡’åŠ è½½ï¼ˆç°ä»£æµè§ˆå™¨æ”¯æŒï¼‰ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"placeholder.jpg"</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">"real-image.jpg"</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">"lazy"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"Lazy Image"</span>&gt;</span>
</code></pre>
<p><strong>JavaScript æ‰‹åŠ¨å®ç°å›¾ç‰‡æ‡’åŠ è½½ï¼ˆé€‚ç”¨äºæ‰€æœ‰æµè§ˆå™¨ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> images = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'img[data-src]'</span>);
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
      <span class="hljs-keyword">const</span> img = entry.<span class="hljs-property">target</span>;
      img.<span class="hljs-property">src</span> = img.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>; <span class="hljs-comment">// èµ‹å€¼çœŸå®å›¾ç‰‡è·¯å¾„</span>
      observer.<span class="hljs-title function_">unobserve</span>(img);
    }
  });
});

images.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> observer.<span class="hljs-title function_">observe</span>(img));
</code></pre>
<p>âš¡ <strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<strong>é•¿åˆ—è¡¨çš„å›¾ç‰‡åŠ è½½ã€åšå®¢æ–‡ç« ã€æ–°é—»ç½‘ç«™ç­‰</strong>ã€‚</p>
<h5 data-id="heading-10"><strong>è·¯ç”±æŒ‰éœ€åŠ è½½</strong></h5>
<p>å‰ç«¯è·¯ç”±å¯ä»¥ä½¿ç”¨ <strong>æ‡’åŠ è½½</strong>ï¼Œåœ¨ç”¨æˆ·è®¿é—®æŸä¸ªé¡µé¢æ—¶æ‰åŠ è½½è¯¥é¡µé¢å¯¹åº”çš„ JS ä»£ç ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰é¡µé¢ã€‚</p>
<p><strong>Vue Router æ‡’åŠ è½½ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./views/About.vue'</span>), <span class="hljs-comment">// æŒ‰éœ€åŠ è½½</span>
  },
];
</code></pre>
<p><strong>React Router æ‡’åŠ è½½ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { lazy, <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Router</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Routes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/Home'</span>));
<span class="hljs-keyword">const</span> <span class="hljs-title class_">About</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/About'</span>));

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span>
  );
}
</code></pre>
<p>âš¡ <strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<strong>å¤§å‹å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ä¼˜åŒ–é¦–å±åŠ è½½é€Ÿåº¦</strong>ã€‚</p>
<h5 data-id="heading-11"><strong>æ•°æ®æŒ‰éœ€åŠ è½½</strong></h5>
<p>åœ¨è¯·æ±‚æ¥å£æ—¶ï¼ŒåªåŠ è½½å½“å‰éœ€è¦çš„æ•°æ®ï¼Œå‡å°‘ä¸å¿…è¦çš„è¯·æ±‚å’Œæ•°æ®ä¼ è¾“é‡ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼ˆå‰ç«¯åˆ†é¡µè¯·æ±‚æ•°æ®ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">loadMoreData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">page</span>) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/data?page=<span class="hljs-subst">${page}</span>`</span>);
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
  <span class="hljs-title function_">renderData</span>(data);
};
</code></pre>
<p>âš¡ <strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<strong>è¡¨æ ¼åˆ†é¡µã€æ— é™æ»šåŠ¨ã€æœç´¢ç»“æœåˆ†é¡µ</strong>ã€‚</p>
<p><em><strong>é‚£è½å®åˆ°å®é™…æˆ‘ä»¬è¦æ€ä¹ˆå»æ‰§è¡Œä¸Šé¢çš„æ–¹æ¡ˆæ¥è¾¾åˆ°é¡¹ç›®æ•´ä½“çš„æŒ‰éœ€åŠ è½½å‘¢ï¼Ÿ</strong></em></p>
<ul>
<li>
<p><strong>åˆ†æé¡¹ç›®éœ€æ±‚</strong>ï¼Œæ‰¾å‡ºå“ªäº›èµ„æºå¯ä»¥æŒ‰éœ€åŠ è½½ï¼ˆJS ä»£ç ã€ç»„ä»¶ã€å›¾ç‰‡ã€è·¯ç”±ã€æ•°æ®ç­‰ï¼‰ä¸€èˆ¬å¯ä»¥é€šè¿‡ä¸€äº›æ’ä»¶æ¥åˆ†ææ‰“åŒ…çš„äº§ç‰©ï¼Œä¾‹å¦‚ <code>webpack-bundle-analyzer-plugin</code> ï¼Œçœ‹çœ‹å“ªäº›äº§ç‰©æ¯”è¾ƒå¤§ä¸”åˆæ˜¯åˆå§‹åŒ–çš„æ—¶å€™ä¸éœ€è¦åŠ è½½çš„ï¼Œå¯ä»¥å•ç‹¬æŠ½å‡ºæ¥æŒ‰éœ€åŠ è½½ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨ Webpack/Vite ä»£ç åˆ†å‰²</strong>ï¼Œé€šè¿‡ <code>import()</code> è¿›è¡ŒåŠ¨æ€åŠ è½½ã€‚</p>
</li>
<li>
<p><strong>åœ¨ React/Vue ä¸­ä½¿ç”¨æ‡’åŠ è½½ç»„ä»¶</strong>ï¼Œä½¿ç”¨ <code>React.lazy()</code> æˆ– <code>defineAsyncComponent()</code> ã€‚</p>
</li>
<li>
<p><strong>ä¼˜åŒ–å›¾ç‰‡åŠ è½½</strong>ï¼Œä½¿ç”¨ <code>loading="lazy"</code> æˆ– <code>IntersectionObserver</code> è¿›è¡Œæ‡’åŠ è½½ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨è·¯ç”±æ‡’åŠ è½½</strong>ï¼ŒæŒ‰éœ€åŠ è½½è·¯ç”±é¡µé¢ï¼Œæé«˜é¦–å±åŠ è½½é€Ÿåº¦ã€‚</p>
</li>
<li>
<p><strong>åˆç†è¿›è¡Œæ•°æ®åŠ è½½ä¼˜åŒ–</strong>ï¼Œä½¿ç”¨åˆ†é¡µè¯·æ±‚ã€æŒ‰éœ€è¯·æ±‚ APIï¼Œå‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ã€‚</p>
</li>
</ul>
<hr/>
<h4 data-id="heading-12">1.1.3 èµ„æºå°ä¸€ç‚¹ï¼šç»†é¢—ç²’åº¦çš„ä»£ç åˆ†å‰²</h4>
<p><strong>ä»€ä¹ˆæ˜¯ç»†é¢—ç²’åº¦çš„ä»£ç åˆ†å‰²æ–¹æ¡ˆï¼Ÿ</strong></p>
<p>ä»£ç åˆ†å‰²æ˜¯åˆ©ç”¨ç°ä»£å‰ç«¯æ„å»ºå·¥å…·çš„åŠŸèƒ½ï¼Œå°†åŸæœ¬çš„å•ä¸€æ„å»ºæ–‡ä»¶æ‹†åˆ†æˆå¤šä¸ªå°æ–‡ä»¶ï¼Œä»è€Œæé«˜ç¼“å­˜çš„å‘½ä¸­ç‡ï¼Œè¿›è€Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚</p>
<p><em><strong>ä¸ºä»€ä¹ˆæ‹†å¾—å°äº†ï¼Œæ‹†å¾—å¤šäº†å°±ä¼šæé«˜ç¼“å­˜å‘½ä¸­ç‡ï¼Ÿ</strong></em></p>
<p>å› ä¸ºæˆ‘ä»¬å¸¸è§çš„ç¼“å­˜ç­–ç•¥æ˜¯ï¼šhtmlæ–‡ä»¶ä¸ç¼“å­˜ï¼Œæ¯æ¬¡éƒ½å»è¯·æ±‚æœ€æ–°çš„htmlæ–‡ä»¶ã€‚é™æ€èµ„æºæ–‡ä»¶æ˜¯é€šè¿‡æ„å»ºå·¥å…·æ‰“äº†hashå€¼çš„tagçš„ï¼Œåªè¦èµ„æºæ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šç”Ÿæˆæ–°hashï¼Œä»è€Œå‘½ä¸­ä¸äº†ç¼“å­˜ï¼Œè¾¾åˆ°è·å–æ–°èµ„æºçš„ç›®çš„ã€‚ï¼ˆè¿™ä¸ªåŸç†ä¸æ‡‚å¯ä»¥å…ˆé—®ä¸‹AIï¼‰</p>
<p>é‚£ç”±æ­¤å¯çŸ¥ï¼Œæ‹†åˆ†çš„æ›´ç»†äº†ï¼Œä»£ç æ–‡ä»¶ä¹‹é—´çš„å½±å“å°±æ›´å°äº†ã€‚ä¾‹å¦‚æ¨¡å—aå’Œæ¨¡å—bä¸æ‹†åˆ†æ—¶æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ab-chunkä¸­ï¼Œ
é‚£ä¹ˆaæˆ–è€…bæ¨¡å—å˜äº†ï¼Œéƒ½è¦å®Œæ•´å†åŠ è½½ä¸€æ¬¡ab-chunkèµ„æºï¼Œä½†æ˜¯å¦‚æœæ¨¡å—aå’Œæ¨¡å—båˆ†å¼€äº†ï¼Œå°±äº’ä¸å½±å“äº†ï¼Œèƒ½æ›´æœ€å¤§åŒ–çš„å‘½ä¸­ç¼“å­˜ã€‚</p>
<p>å…·ä½“çš„å®è·µæ–¹æ¡ˆç½‘ä¸Šæœ‰å¾ˆå¤šäº†ï¼Œè¿™é‡Œä¸å±•å¼€ã€‚</p>
<hr/>
<h4 data-id="heading-13">1.1.4 èµ„æºå°ä¸€ç‚¹ï¼šGzipå‹ç¼©</h4>
<p><strong>ä»€ä¹ˆæ˜¯Gzipå‹ç¼©ï¼Ÿ</strong></p>
<p>Gzipæ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®å‹ç¼©æ ¼å¼ï¼Œå®ƒå¯ä»¥é€šè¿‡å¯¹HTTPå“åº”å†…å®¹è¿›è¡Œå‹ç¼©ï¼Œå‡å°æ–‡ä»¶çš„ä½“ç§¯ï¼Œä»è€ŒåŠ å¿«ç½‘é¡µåŠ è½½é€Ÿåº¦ï¼Œæå‡å‰ç«¯æ€§èƒ½ã€‚åœ¨å‰ç«¯å¼€å‘ä¸­ï¼ŒGzipå‹ç¼©ä¸»è¦åº”ç”¨äºHTTPå“åº”ä¸­ä¼ è¾“çš„æ–‡æœ¬æ–‡ä»¶ï¼ˆå¦‚HTMLã€CSSã€JavaScriptç­‰ï¼‰ã€‚</p>
<p><strong>è¯´ç‚¹äººè¯</strong>ï¼šgzipå°±æ˜¯ä¸€ä¸ªæˆ‘ä»¬å¸¸è§çš„å‹ç¼©èµ„æºçš„ä¸€ç§æ–¹å¼ï¼Œä½ åªéœ€è¦åœ¨è¯·æ±‚å¤´å†™ä¸Šï¼š<code>accept-encoding:gzip</code> æœåŠ¡å™¨å°±èƒ½çŸ¥é“è¦å¼€å¯å‹ç¼©ï¼Œä»è€Œå‹ç¼©èµ„æºå¹¶è¿”å›ï¼Œæµè§ˆå™¨æ¥å—åˆ°å‹ç¼©èµ„æºè¿›è¡Œè§£å‹ã€‚æœ¬è´¨å°±æ˜¯ç‰ºç‰²æœåŠ¡å™¨çš„å¼€é”€å’Œæµè§ˆå™¨çš„å¼€é”€æ¥æ¢å–èµ„æºçš„æœ€å°åŒ–ï¼Œä»è€Œæå‡åŠ è½½é€Ÿåº¦ã€‚</p>
<p>gzipå‹ç¼©ä¸€èˆ¬èƒ½å¸®æˆ‘ä»¬å‹ç¼©åˆ°åŸæœ¬èµ„æºçš„70%å¤§å°ï¼Œä½†ä¹Ÿä¸æ˜¯æ‰€æœ‰æƒ…å†µä¸‹çš„å‹ç¼©æ•ˆç‡éƒ½æœ‰è¿™ä¹ˆé«˜ã€‚gzipå‹ç¼©èƒŒåçš„åŸç†æ˜¯ï¼Œåœ¨ä¸€ä¸ªèµ„æºæ–‡ä»¶ä¸­æ‰¾é‡å¤ï¼Œå¹¶ä¸´æ—¶æ›¿æ¢è¿™äº›é‡å¤ï¼Œä»è€Œå°±ç¼©å°æ•´ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥èµ„æºæ–‡ä»¶ä¸­çš„ä»£ç é‡å¤ç‡è¶Šé«˜ï¼Œå‹ç¼©æ•ˆç‡ä¹Ÿè¶Šé«˜ã€‚</p>
<p><em><strong>é‚£é—®é¢˜åˆæ¥äº†ï¼Œç”¨æœåŠ¡å™¨çš„å‹ç¼©æ—¶é—´å’Œæµè§ˆå™¨çš„è§£å‹æ—¶é—´æ¥æ¢å–èµ„æºç¼©å°ï¼ŒçœŸçš„å€¼å¾—å—ï¼Ÿ</strong></em></p>
<p>æ˜¯çš„è¿™ä¸ªé—®é¢˜ä¹Ÿä¸èƒ½è¯´ç»å¯¹ï¼Œä½†æ˜¯å¯¹äºç»å¤§éƒ¨åˆ†æƒ…å†µæ¥è¯´ï¼Œéƒ½æ˜¯å€¼å¾—çš„ï¼Œå‹ç¼©å’Œè§£å‹çš„æ—¶é—´ç›¸å¯¹äºèµ„æºç¼©å°è€Œå¸¦æ¥çš„ä¼ è¾“é€Ÿåº¦çš„æå‡æ˜¯å¾®ä¸è¶³é“çš„ï¼Œé™¤éä½ çš„æ–‡ä»¶è¶…çº§å°1kã€2kã€‚</p>
<p>é‚£ä½œä¸ºå‰ç«¯å¼€å‘äººå‘˜ï¼Œå¦‚ä½•åˆ©ç”¨Gzipå‘¢?</p>
<p><strong>webpack Gzip + æœåŠ¡å™¨ Gzip çš„æœ€ä½³å®è·µ</strong></p>
<p>ä½¿ç”¨æ„å»ºå·¥å…·å¼€å¯Gzipå‹ç¼©ï¼š</p>
<p>Webpack ä¸­çš„ Gzip å‹ç¼©æ“ä½œæœ¬è´¨ä¸Šæ˜¯<strong>åœ¨æ„å»ºé˜¶æ®µ</strong>æå‰å¯¹é™æ€èµ„æºï¼ˆå¦‚ JSã€CSSã€HTMLï¼‰è¿›è¡Œ Gzip é¢„å‹ç¼©ï¼Œå¹¶å°†å‹ç¼©åçš„ <code>.gz</code> æ–‡ä»¶ä½œä¸ºæ„å»ºäº§ç‰©è¾“å‡ºã€‚è¿™æ ·ï¼Œåœ¨éƒ¨ç½²æ—¶ï¼ŒæœåŠ¡å™¨æ— éœ€åŠ¨æ€å‹ç¼©è¿™äº›æ–‡ä»¶ï¼Œè€Œæ˜¯ç›´æ¥æä¾›é¢„å‹ç¼©çš„ <code>.gz</code> æ–‡ä»¶ï¼Œå‡å°‘äº†æœåŠ¡å™¨çš„ CPU è´Ÿæ‹…ï¼Œæé«˜äº†å“åº”é€Ÿåº¦ã€‚</p>
<p>åœ¨ Webpack ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>compression-webpack-plugin</code> è¿™ä¸ªæ’ä»¶æ¥å®ç° Gzip é¢„å‹ç¼©ã€‚è¿™ä¸ªæ’ä»¶åœ¨ Webpack æ‰“åŒ…æ—¶ï¼Œé’ˆå¯¹ç¬¦åˆæ¡ä»¶çš„é™æ€æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯ <code>.js</code>ã€<code>.css</code>ã€<code>.html</code>ï¼‰ï¼Œä½¿ç”¨ Gzip ç®—æ³•ç”Ÿæˆ <code>.gz</code> æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¸æ™®é€šæœªå‹ç¼©çš„æ–‡ä»¶ä¸€èµ·è¾“å‡ºåˆ° <code>dist</code> ç›®å½•ã€‚</p>
<p><strong>Webpack åœ¨æ‰“åŒ…æ—¶æ‰§è¡Œ <code>compression-webpack-plugin</code></strong></p>
<ul>
<li>éå†æ‰€æœ‰æ„å»ºç”Ÿæˆçš„æ–‡ä»¶ï¼Œç­›é€‰å‡ºç¬¦åˆå‹ç¼©æ¡ä»¶çš„æ–‡ä»¶ï¼ˆå¦‚ <code>.js</code>ã€<code>.css</code>ï¼‰ã€‚</li>
<li>ä½¿ç”¨ <code>zlib</code> è¿›è¡Œ Gzip å‹ç¼©ï¼Œç”Ÿæˆ <code>.gz</code> æ–‡ä»¶ï¼ˆå¦‚ <code>bundle.js.gz</code>ï¼‰ã€‚</li>
<li>è¿™äº› <code>.gz</code> æ–‡ä»¶è¢«ä¿ç•™åœ¨æ„å»ºäº§ç‰©ä¸­ï¼Œç­‰å¾…éƒ¨ç½²ã€‚</li>
</ul>
<p>åœ¨ Webpack é…ç½® <code>compression-webpack-plugin</code>ï¼Œç”Ÿæˆ <code>.gz</code> ç‰ˆæœ¬çš„ JSã€CSSã€HTML èµ„æºï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">const</span> <span class="hljs-title class_">CompressionWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'compression-webpack-plugin'</span>);

  <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">plugins</span>: [
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompressionWebpackPlugin</span>({
        <span class="hljs-attr">algorithm</span>: <span class="hljs-string">'gzip'</span>,
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/.(js|css|html)$/</span>, <span class="hljs-comment">// éœ€è¦å‹ç¼©çš„æ–‡ä»¶ç±»å‹</span>
        <span class="hljs-attr">threshold</span>: <span class="hljs-number">10240</span>, <span class="hljs-comment">// åªæœ‰å¤§äº 10KB çš„æ–‡ä»¶æ‰è¿›è¡Œå‹ç¼©</span>
        <span class="hljs-attr">minRatio</span>: <span class="hljs-number">0.8</span>, <span class="hljs-comment">// åªæœ‰å‹ç¼©æ¯”ä½äº 0.8 æ‰ä¼šè¢«å‹ç¼©</span>
        <span class="hljs-attr">deleteOriginalAssets</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// æ˜¯å¦åˆ é™¤åŸå§‹æ–‡ä»¶ï¼Œé€šå¸¸ä¿ç•™åŸå§‹æ–‡ä»¶ï¼Œæ–¹ä¾¿å›é€€</span>
      })
    ]
  };
</code></pre>
<p><strong>æœåŠ¡å™¨é…ç½®</strong></p>
<p>æœåŠ¡å™¨ï¼ˆå¦‚ Nginx æˆ– Apacheï¼‰éœ€è¦é…ç½®è§„åˆ™ï¼Œå½“è¯·æ±‚çš„æ–‡ä»¶å­˜åœ¨ <code>.gz</code> ç‰ˆæœ¬æ—¶ï¼Œç›´æ¥è¿”å›å‹ç¼©åçš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ  <code>Content-Encoding: gzip</code> å“åº”å¤´ã€‚
<strong>æœåŠ¡å™¨ä¼˜å…ˆè¿”å› Webpack é¢„å‹ç¼©çš„ <code>.gz</code> æ–‡ä»¶</strong></p>
<p><strong>Nginx é…ç½®</strong></p>
<pre><code class="hljs language-nginx" lang="nginx">  server {
    gzip on;
    gzip_disable "msie6"; # ç¦æ­¢ IE6 ä½¿ç”¨ gzip
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml;
    gzip_vary on;
        
    # ä¼˜å…ˆè¿”å› gzip ç‰ˆæœ¬çš„æ–‡ä»¶
    location / {
      try_files $uri $uri.gz $uri/ =404;
      add_header Content-Encoding gzip;
    }
  }
</code></pre>
<p>Webpack Gzip é¢„å‹ç¼©å’ŒæœåŠ¡å™¨ Gzip å„æœ‰ä¼˜åŠ¿ï¼Œ<strong>å®ƒä»¬å¹¶ä¸æ˜¯äº’ç›¸æ›¿ä»£çš„ï¼Œè€Œæ˜¯å¯ä»¥äº’ç›¸é…åˆï¼Œä»¥ä¼˜åŒ–æ€§èƒ½</strong>ï¼š</p>
<ul>
<li><strong>Webpack é¢„å‹ç¼©é™æ€èµ„æº</strong>ï¼Œå‡è½»æœåŠ¡å™¨ CPU è´Ÿæ‹…ï¼Œæé«˜æ–‡ä»¶åŠ è½½é€Ÿåº¦ã€‚</li>
<li><strong>æœåŠ¡å™¨ Gzip å¤„ç†åŠ¨æ€å†…å®¹</strong>ï¼Œå¦‚ API å“åº”çš„æ•°æ®å‹ç¼©ï¼Œç¡®ä¿æ•´ä½“æ€§èƒ½ä¼˜åŒ–ã€‚</li>
<li><strong>æ­£ç¡®é…ç½®æœåŠ¡å™¨</strong>ï¼Œä¼˜å…ˆæä¾› <code>.gz</code> ç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œä¿è¯æµè§ˆå™¨èƒ½å¤Ÿæ­£ç¡®åŠ è½½ Gzip èµ„æºã€‚</li>
</ul>
<p>è¿™æ ·å¯ä»¥åšåˆ°<strong>èµ„æºåŠ è½½å¿«ï¼ŒæœåŠ¡å™¨å‹åŠ›å°ï¼Œæ•´ä½“æ€§èƒ½æœ€ä½³</strong></p>
<hr/>
<h4 data-id="heading-14">1.1.5 èµ„æºå°ä¸€ç‚¹ï¼šå›¾ç‰‡ä½“ç§¯ä¼˜åŒ–</h4>
<p>å›¾ç‰‡çš„ä¼˜åŒ–å¯¹å‰ç«¯æ€§èƒ½è‡³å…³é‡è¦ï¼ŒåŸå› æœ‰å‡ ä¸ªæ–¹é¢ã€‚é¦–å…ˆï¼Œå›¾ç‰‡æ˜¯ç°ä»£ç½‘é¡µä¸­æœ€å¸¸è§ä¸”æœ€å ç”¨å¸¦å®½çš„èµ„æºä¹‹ä¸€ã€‚åœ¨å¤§å¤šæ•°ç½‘ç«™ä¸­ï¼Œå›¾ç‰‡çš„ä½“ç§¯é€šå¸¸å æ®äº†æ•´ä¸ªé¡µé¢èµ„æºçš„å¾ˆå¤§ä¸€éƒ¨åˆ†ï¼Œå°¤å…¶æ˜¯å¯¹äºå†…å®¹ä¸°å¯Œçš„é¡µé¢ï¼ˆå¦‚ç”µå•†ç½‘ç«™ã€åšå®¢ã€æ–°é—»ç½‘ç«™ç­‰ï¼‰è€Œè¨€ã€‚å¦‚æœä¸å¯¹å›¾ç‰‡è¿›è¡Œä¼˜åŒ–ï¼ŒåŠ è½½è¿™äº›å›¾ç‰‡ä¼šå¤§å¤§æ‹–æ…¢é¡µé¢çš„æ¸²æŸ“é€Ÿåº¦ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œç”šè‡³å¢åŠ CDNæˆ–æœåŠ¡å™¨çš„è´Ÿæ‹…ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆå›¾ç‰‡ä¼˜åŒ–å¯¹å‰ç«¯æ€§èƒ½ä¼˜åŒ–è‡³å…³é‡è¦ï¼Ÿ</strong></p>
<ol>
<li><strong>å¤§å¤§é™ä½é¡µé¢åŠ è½½æ—¶é—´</strong>ï¼š å›¾ç‰‡é€šå¸¸æ˜¯ç½‘é¡µä¸Šæœ€å¤§ä¸”æœ€é‡çš„èµ„æºä¹‹ä¸€ã€‚æœªç»ä¼˜åŒ–çš„å›¾ç‰‡ä¼šå¯¼è‡´ç½‘ç»œè¯·æ±‚æ—¶é—´è¿‡é•¿ï¼Œå°¤å…¶æ˜¯åœ¨å¸¦å®½æœ‰é™æˆ–ç§»åŠ¨ç½‘ç»œç¯å¢ƒä¸‹ï¼Œå›¾ç‰‡åŠ è½½å¯èƒ½ä¼šæˆä¸ºç“¶é¢ˆã€‚å¦‚æœä½¿ç”¨å‹ç¼©æˆ–æ›´é«˜æ•ˆçš„æ ¼å¼ï¼ˆå¦‚WebPã€AVIFç­‰ï¼‰ï¼Œå¯ä»¥æ˜¾è‘—å‡å°‘å›¾ç‰‡æ–‡ä»¶çš„å¤§å°ï¼Œè¿›è€Œå‡å°‘é¡µé¢åŠ è½½æ—¶é—´ã€‚</li>
<li><strong>æé«˜ç¼“å­˜å‘½ä¸­ç‡</strong>ï¼š å¯¹å›¾ç‰‡è¿›è¡Œä¼˜åŒ–åï¼Œå®ƒä»¬çš„ä½“ç§¯ä¼šå˜å°ï¼Œç¼“å­˜ç­–ç•¥èƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°å·¥ä½œã€‚è¾ƒå°çš„å›¾ç‰‡èµ„æºå¯ä»¥å‡å°‘æµè§ˆå™¨ç¼“å­˜ä¸­å ç”¨çš„ç©ºé—´ï¼Œæé«˜ç¼“å­˜çš„å‘½ä¸­ç‡ï¼Œä»è€ŒåŠ å¿«åç»­è®¿é—®åŒä¸€é¡µé¢æ—¶çš„åŠ è½½é€Ÿåº¦ã€‚</li>
<li><strong>é™ä½å¸¦å®½æ¶ˆè€—</strong>ï¼š ä¼˜åŒ–å›¾ç‰‡å¯ä»¥å‡å°‘ä¼ è¾“çš„æ•°æ®é‡ï¼Œè¿›è€Œå‡å°‘å¸¦å®½æ¶ˆè€—ã€‚å¯¹äºå¸¦å®½æœ‰é™çš„ç”¨æˆ·ï¼Œå›¾ç‰‡çš„å¿«é€ŸåŠ è½½å’Œå°æ–‡ä»¶ä½“ç§¯æ˜¯éå¸¸é‡è¦çš„ï¼Œå°¤å…¶æ˜¯åœ¨ç§»åŠ¨è®¾å¤‡æˆ–æ…¢é€Ÿç½‘ç»œæ¡ä»¶ä¸‹ã€‚</li>
<li><strong>æå‡ç”¨æˆ·ä½“éªŒ</strong>ï¼š ç½‘é¡µåŠ è½½é€Ÿåº¦ç›´æ¥å½±å“åˆ°ç”¨æˆ·ä½“éªŒã€‚é¡µé¢åŠ è½½æ—¶é—´è¿‡é•¿å¯èƒ½ä¼šå¯¼è‡´ç”¨æˆ·æµå¤±ã€‚å›¾ç‰‡ä¼˜åŒ–æœ‰åŠ©äºæå‡é¡µé¢çš„åŠ è½½é€Ÿåº¦å’Œå“åº”æ—¶é—´ï¼Œä»è€Œæå‡ç”¨æˆ·çš„æµè§ˆä½“éªŒã€‚</li>
</ol>
<p>å¸¸è§çš„å›¾ç‰‡ç±»å‹ä¸»è¦å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>
<ol>
<li>
<p><strong>JPGï¼ˆJPEGï¼‰</strong> ï¼š</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¸€ç§æœ‰æŸå‹ç¼©çš„å›¾ç‰‡æ ¼å¼ï¼Œå¹¿æ³›åº”ç”¨äºç…§ç‰‡ç±»å›¾ç‰‡ã€‚ä½“ç§¯è¾ƒå°ï¼Œæ”¯æŒå¤šç§è‰²å½©ï¼ˆé€‚ç”¨äºå¤æ‚è‰²å½©çš„å›¾ç‰‡ï¼Œå¦‚é£æ™¯ç…§ã€äººç‰©ç…§ç­‰ï¼‰ã€‚</li>
<li><strong>ä¼˜åŒ–æ–¹å¼</strong>ï¼šé€šè¿‡è°ƒæ•´å‹ç¼©ç‡æ¥å‡å°å›¾ç‰‡ä½“ç§¯ã€‚å¯¹äºéœ€è¦å¤„ç†å¤§é‡ç…§ç‰‡çš„åœºæ™¯ï¼Œä½¿ç”¨é€‚å½“çš„å‹ç¼©ç‡å¯ä»¥å‡å°ä½“ç§¯ï¼Œä½†ä¸ç‰ºç‰²è¿‡å¤šçš„è§†è§‰è´¨é‡ã€‚</li>
</ul>
</li>
<li>
<p><strong>PNG</strong>ï¼š</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¸€ç§æ— æŸå‹ç¼©çš„æ ¼å¼ï¼Œæ”¯æŒé€æ˜é€šé“ï¼Œé€‚ç”¨äºå›¾æ ‡ã€ç½‘é¡µå…ƒç´ ã€æˆªå›¾ç­‰ã€‚</li>
<li><strong>ä¼˜åŒ–æ–¹å¼</strong>ï¼šå¯¹äºæ²¡æœ‰é€æ˜é€šé“çš„PNGå›¾ç‰‡ï¼Œå»ºè®®ä½¿ç”¨<code>pngcrush</code>ã€<code>optipng</code>ç­‰å·¥å…·è¿›è¡Œä¼˜åŒ–ï¼Œå‡å°æ— æŸå‹ç¼©åçš„ä½“ç§¯ã€‚å¯¹äºé€æ˜å›¾ç‰‡ï¼Œä½¿ç”¨WebPæˆ–è€…AVIFç­‰æ ¼å¼å¯ä»¥æ›¿ä»£PNGï¼Œè¿›ä¸€æ­¥é™ä½ä½“ç§¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>GIF</strong>ï¼š</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå¸¸ç”¨äºåˆ¶ä½œåŠ¨ç”»å›¾åƒã€‚æ”¯æŒå¤šå¸§åŠ¨ç”»ï¼Œä½†é¢œè‰²æ·±åº¦æœ‰é™ï¼ˆæœ€å¤š256ç§é¢œè‰²ï¼‰ã€‚æ–‡ä»¶ä½“ç§¯è¾ƒå¤§ã€‚</li>
<li><strong>ä¼˜åŒ–æ–¹å¼</strong>ï¼šå°½é‡é¿å…ä½¿ç”¨GIFåŠ¨ç”»ï¼Œå°¤å…¶æ˜¯å¤§å°ºå¯¸çš„GIFï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨WebPæˆ–APNGï¼ˆAnimated PNGï¼‰ä½œä¸ºæ›¿ä»£ï¼Œæä¾›æ›´å¥½çš„è´¨é‡å’Œæ›´å°çš„ä½“ç§¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>SVG</strong>ï¼š</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šçŸ¢é‡å›¾æ ¼å¼ï¼Œé€‚ç”¨äºç®€å•çš„å›¾å½¢ã€å›¾æ ‡å’Œæ ‡å¿—ã€‚å¯ç¼©æ”¾ï¼Œä¸”ä¸å¤±çœŸã€‚é€‚ç”¨äºåŠ¨æ€ã€äº¤äº’å¼å›¾å½¢ã€‚</li>
<li><strong>ä¼˜åŒ–æ–¹å¼</strong>ï¼šå¯¹SVGæ–‡ä»¶è¿›è¡Œæ¸…ç†ï¼Œå»æ‰å¤šä½™çš„å…ƒæ•°æ®ã€æ³¨é‡Šå’Œç©ºæ ¼ï¼Œè¿›ä¸€æ­¥å‡å°æ–‡ä»¶ä½“ç§¯ã€‚å¯ä»¥é€šè¿‡åœ¨çº¿å·¥å…·ï¼ˆå¦‚<code>SVGO</code>ï¼‰æ¥ä¼˜åŒ–SVGæ–‡ä»¶ã€‚</li>
</ul>
</li>
<li>
<p><strong>WebP</strong>ï¼š</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæ”¯æŒæœ‰æŸå‹ç¼©å’Œæ— æŸå‹ç¼©ï¼Œé€‚ç”¨äºWebã€‚æ¯”JPGã€PNGç­‰æ ¼å¼æœ‰æ›´é«˜çš„å‹ç¼©ç‡ï¼Œä½“ç§¯æ›´å°ï¼Œæ”¯æŒé€æ˜é€šé“ã€‚</li>
<li><strong>ä¼˜åŒ–æ–¹å¼</strong>ï¼šç›´æ¥å°†å›¾ç‰‡è½¬æ¢ä¸ºWebPæ ¼å¼ï¼Œåˆ©ç”¨å…¶é«˜æ•ˆå‹ç¼©ç®—æ³•æ¥å‡å°‘æ–‡ä»¶ä½“ç§¯ï¼Œå°¤å…¶é€‚ç”¨äºå¤§æ‰¹é‡å›¾ç‰‡çš„ä¼˜åŒ–ã€‚</li>
</ul>
</li>
<li>
<p><strong>AVIF</strong>ï¼š</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¸€ç§è¾ƒæ–°çš„å›¾ç‰‡æ ¼å¼ï¼Œæ”¯æŒé«˜æ•ˆçš„æœ‰æŸå’Œæ— æŸå‹ç¼©ï¼Œæ”¯æŒé€æ˜é€šé“ï¼Œå›¾åƒè´¨é‡è¾ƒé«˜ï¼Œä½“ç§¯è¾ƒå°ã€‚</li>
<li><strong>ä¼˜åŒ–æ–¹å¼</strong>ï¼šå°†å›¾ç‰‡è½¬æ¢ä¸ºAVIFæ ¼å¼ï¼Œèƒ½å¤Ÿæä¾›æ›´å°çš„ä½“ç§¯å’Œæ›´å¥½çš„å›¾åƒè´¨é‡ï¼Œå°¤å…¶é€‚ç”¨äºå›¾åƒå†…å®¹è¾ƒå¤æ‚çš„åœºæ™¯ã€‚</li>
</ul>
</li>
</ol>






















































<table><thead><tr><th>æ ¼å¼</th><th>ç®€ä»‹ä¸ç‰¹æ€§</th><th>ä½“ç§¯ç¤ºä¾‹ï¼ˆåŸºäºå›¾ç‰‡CDNè®¡ç®—ï¼‰</th><th>å‘æ˜å¹´ä»½</th><th>æµè§ˆå™¨å…¼å®¹æ€§</th></tr></thead><tbody><tr><td>JPG</td><td>- æœ€å¸¸è§ä¸”åº”ç”¨æœ€å¹¿æ³›çš„å›¾ç‰‡æ ¼å¼ - ä½“ç§¯é€‚ä¸­ï¼Œé€šå¸¸å°äºPNGã€GIFç­‰æ ¼å¼</td><td>158 KBï¼ˆ100%ï¼‰</td><td>1992</td><td>å‡ ä¹æ‰€æœ‰æµè§ˆå™¨æ”¯æŒ</td></tr><tr><td>PNG</td><td>- æ”¯æŒé€æ˜é€šé“ï¼Œå¯ä»¥åšéƒ¨åˆ†é€æ˜å›¾ç‰‡ - ä½“ç§¯è¾ƒå¤§</td><td>819 KBï¼ˆ518%ï¼‰</td><td>1996</td><td>å‡ ä¹æ‰€æœ‰æµè§ˆå™¨æ”¯æŒ</td></tr><tr><td>GIF</td><td>- æ”¯æŒåŠ¨æ€æ•ˆæœçš„å›¾ç‰‡ - ä½“ç§¯è¾ƒå¤§</td><td>423 KBï¼ˆ267%ï¼‰</td><td>1989</td><td>å‡ ä¹æ‰€æœ‰æµè§ˆå™¨æ”¯æŒ</td></tr><tr><td>SVG</td><td>- çŸ¢é‡å›¾ï¼Œä¸ä¼šå› ç¼©æ”¾å¤±çœŸ - æœ¬è´¨æ˜¯æ ‡è®°è¯­è¨€ï¼Œæµè§ˆå™¨å¯è§£ææ¸²æŸ“ - ä½“ç§¯è§†å†…å®¹è€Œå®š</td><td>--</td><td>2001</td><td>Chrome 4ï¼ˆ2010å¹´å‘å¸ƒï¼‰åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒ å‚è€ƒèµ„æ–™ï¼šcaniuse.com/svg</td></tr><tr><td>WebP</td><td>- æ”¯æŒåŠ¨æ€å›¾ç‰‡ - å‹ç¼©æ•ˆç‡é«˜ï¼Œæ”¯æŒæœ‰æŸå’Œæ— æŸå‹ç¼© - ä¸“ä¸ºWebå¹³å°ä¼˜åŒ– - ä½“ç§¯è¾ƒå°</td><td>136 KBï¼ˆ86%ï¼‰</td><td>2010</td><td>Chrome 32ï¼ˆ2014å¹´å‘å¸ƒï¼‰åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒ å‚è€ƒèµ„æ–™ï¼šcaniuse.com/webp</td></tr><tr><td>AVIF</td><td>- æ”¯æŒåŠ¨æ€å›¾ç‰‡ - å‹ç¼©ç‡é«˜ - ä½“ç§¯è¾ƒå°</td><td>96 KBï¼ˆ60%ï¼‰</td><td>2019</td><td>Chrome 85ï¼ˆ2020å¹´å‘å¸ƒï¼‰åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒ å‚è€ƒèµ„æ–™ï¼šcaniuse.com/avif</td></tr></tbody></table>
<p>é€šè¿‡ä¸Šè¡¨å¯ä»¥çœ‹å‡ºï¼Œå›¾ç‰‡æ ¼å¼å¤§è‡´å¯åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li><strong>ä¼ ç»Ÿå›¾ç‰‡æ ¼å¼</strong>ï¼šå¦‚JPGã€PNGã€GIFã€SVGç­‰ï¼Œè¿™äº›æ ¼å¼å‡ºç°å·²æœ‰äºŒåå¤šå¹´ã€‚</li>
<li><strong>ç°ä»£å›¾ç‰‡æ ¼å¼</strong>ï¼šå¦‚WebPã€AVIFç­‰ï¼Œè¿™äº›æ ¼å¼æ˜¯è¿‘åå¹´å†…æ–°å‡ºç°çš„ã€‚</li>
</ul>
<p>ä»åŠŸèƒ½å’Œæ€§èƒ½ä¸Šæ¥çœ‹ï¼š</p>
<ul>
<li><strong>ä½“ç§¯</strong>ï¼šä¼ ç»Ÿæ ¼å¼çš„å›¾ç‰‡æ–‡ä»¶æ™®éè¾ƒå¤§ã€‚ä¸JPGæ ¼å¼ç›¸æ¯”ï¼ŒWebPæ ¼å¼é€šå¸¸å¯ä»¥å°†æ–‡ä»¶ä½“ç§¯å‡å°‘çº¦10%ï¼Œè€ŒAVIFæ ¼å¼ç”šè‡³èƒ½å‡å°‘è¶…è¿‡40%çš„ä½“ç§¯ã€‚</li>
<li><strong>ç‰¹æ€§</strong>ï¼šç°ä»£æ ¼å¼æ”¯æŒæ›´å¤šç‰¹æ€§ï¼Œå¦‚åŠ¨æ€å›¾ç‰‡å’Œæ— æŸå‹ç¼©ç­‰ï¼Œè€Œä¼ ç»Ÿæ ¼å¼çš„ç‰¹æ€§ç›¸å¯¹å•ä¸€ã€‚</li>
<li><strong>æµè§ˆå™¨å…¼å®¹æ€§</strong>ï¼šç°ä»£æ ¼å¼çš„æµè§ˆå™¨å…¼å®¹æ€§ç¨é€Šä¸€ç­¹ï¼Œæ”¯æŒå®ƒä»¬çš„æµè§ˆå™¨æ•°é‡ç›¸å¯¹è¾ƒå°‘ã€‚</li>
</ul>
<p>å¦‚æœèƒ½å¤Ÿä½¿ç”¨WebPã€AVIFç­‰ç°ä»£å›¾ç‰‡æ ¼å¼ï¼Œå¯ä»¥æ˜¾è‘—è§£å†³å‰ç«¯åº”ç”¨ä¸­å›¾ç‰‡æ–‡ä»¶ä½“ç§¯å¤§ã€åŠ è½½æ…¢ã€CDNå¼€é”€é«˜ç­‰é—®é¢˜ï¼Œä»è€Œæå‡æ€§èƒ½ã€‚</p>
<p>ç„¶è€Œï¼Œç”±äºæµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ï¼Œæˆ‘ä»¬ä¸æ•¢å®Œå…¨ä¾èµ–è¿™äº›ç°ä»£æ ¼å¼ï¼Œæ— æ³•å¤§è§„æ¨¡åº”ç”¨ã€‚</p>
<p><strong>å¦‚ä½•è¿›è¡Œå›¾ç‰‡æ€§èƒ½ä¼˜åŒ–ï¼Ÿ</strong></p>
<ul>
<li>
<p><strong>é€‰æ‹©åˆé€‚çš„å›¾ç‰‡æ ¼å¼</strong>ï¼š</p>
<p>æ ¹æ®å›¾ç‰‡çš„ç”¨é€”é€‰æ‹©åˆé€‚çš„æ ¼å¼ã€‚ä¾‹å¦‚ï¼Œç…§ç‰‡ç±»å›¾ç‰‡ä¼˜å…ˆä½¿ç”¨JPGæˆ–WebPï¼Œå›¾æ ‡å’ŒUIå…ƒç´ åˆ™ä½¿ç”¨SVGæˆ–WebPã€‚å¯¹äºéœ€è¦é€æ˜åº¦çš„å›¾ç‰‡ï¼Œä¼˜å…ˆä½¿ç”¨WebPæˆ–AVIFã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨ç°ä»£æ ¼å¼</strong>ï¼š</p>
<p>å°½å¯èƒ½ä½¿ç”¨WebPå’ŒAVIFç­‰ç°ä»£æ ¼å¼ï¼Œè¿™äº›æ ¼å¼æä¾›æ›´é«˜çš„å‹ç¼©æ¯”å’Œæ›´å°çš„ä½“ç§¯ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯åœ¨å›¾ç‰‡æ•°é‡è¾ƒå¤šçš„é¡µé¢ä¸Šã€‚
ç»“åˆ <code>&lt;picture&gt;</code> å…ƒç´ å»åšï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-html" lang="html">    <span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/avif"</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"https://cdn.com/image.avif"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/webp"</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"https://cdn.com/image.webp"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.com/image.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"Example"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span>
</code></pre>
<p>å°±æ˜¯ä»ä¸Šåˆ°ä¸‹å“ªä¸ªå…¼å®¹ç”¨å“ªä¸ªã€‚</p>
</li>
<li>
<p><strong>è°ƒæ•´å›¾ç‰‡è´¨é‡ä¸å°ºå¯¸</strong>ï¼š</p>
<p>åœ¨ä¸æ˜¾è‘—å½±å“è§†è§‰æ•ˆæœçš„å‰æä¸‹ï¼Œé™ä½å›¾ç‰‡çš„è´¨é‡å’Œå°ºå¯¸ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡è°ƒæ•´JPGçš„å‹ç¼©ç‡ï¼Œæˆ–è€…ä½¿ç”¨æ›´é«˜æ•ˆçš„PNGä¼˜åŒ–å·¥å…·ï¼Œå¦‚<code>pngcrush</code>æˆ–<code>optipng</code>ã€‚</p>
<p>ä½¿ç”¨åˆé€‚çš„å›¾ç‰‡å°ºå¯¸ï¼šç¡®ä¿å›¾ç‰‡çš„å°ºå¯¸ä¸å®é™…æ˜¾ç¤ºéœ€æ±‚ç›¸åŒ¹é…ï¼Œä¸è¦ä¸Šä¼ è¿‡å¤§çš„å›¾ç‰‡ã€‚ä¾‹å¦‚ï¼Œåœ¨å“åº”å¼è®¾è®¡ä¸­ï¼Œæ ¹æ®ä¸åŒè®¾å¤‡åˆ†è¾¨ç‡å’Œå±å¹•å°ºå¯¸åŠ è½½ä¸åŒå¤§å°çš„å›¾ç‰‡ã€‚</p>
</li>
<li>
<p><strong>å›¾ç‰‡æ‡’åŠ è½½</strong>ï¼š</p>
<p>è¿™ä¸ªå‰é¢æœ‰èŠè¿‡ï¼Œå›¾ç‰‡æ‡’åŠ è½½æ˜¯å»¶è¿ŸåŠ è½½å›¾ç‰‡çš„æŠ€æœ¯ï¼Œåªæœ‰å½“å›¾ç‰‡å³å°†è¿›å…¥è§†å£æ—¶æ‰ä¼šåŠ è½½ï¼Œä»è€Œå‡å°‘åˆå§‹é¡µé¢åŠ è½½çš„èµ„æºæ¶ˆè€—ï¼Œæé«˜é¡µé¢å“åº”é€Ÿåº¦ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨CDN</strong>ï¼š</p>
<p>å°†å›¾ç‰‡æ‰˜ç®¡åˆ°CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰ä¸Šï¼Œä½¿å¾—å›¾ç‰‡èƒ½å¤Ÿä»ç¦»ç”¨æˆ·æœ€è¿‘çš„æœåŠ¡å™¨åŠ è½½ï¼Œå‡å°‘ç½‘ç»œå»¶è¿Ÿï¼Œæé«˜åŠ è½½é€Ÿåº¦ã€‚
å„å¤§äº‘æœåŠ¡ä¾›åº”å•†éƒ½æä¾›äº†å›¾ç‰‡CDNæœåŠ¡ï¼Œé™¤äº†åŸºæœ¬çš„èµ„æºå­˜å‚¨åŠŸèƒ½å¤–ï¼Œè¿˜é™„åŠ äº†å¤šç§å¼ºå¤§åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>
<p><strong>æ ¼å¼è½¬æ¢ä¸ä½“ç§¯å‹ç¼©</strong></p>
<p>åŸå§‹å›¾ç‰‡URLï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.example.com%2Fimage.jpg" target="_blank" title="https://cdn.example.com/image.jpg" ref="nofollow noopener noreferrer">cdn.example.com/image.jpg</a></p>
<p>è½¬æ¢ä¸ºWebPæ ¼å¼å¹¶å‹ç¼©ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.example.com%2Fimage.jpg%3Fformat%3Dwebp%26quality%3D80" target="_blank" title="https://cdn.example.com/image.jpg?format=webp&amp;quality=80" ref="nofollow noopener noreferrer">cdn.example.com/image.jpg?fâ€¦</a></p>
<p><em>ä½œç”¨æ˜¯å°†JPGæ ¼å¼è½¬æ¢ä¸ºWebPï¼ŒåŒæ—¶é™ä½å›¾ç‰‡è´¨é‡è‡³80%ï¼Œå‡å°‘ä½“ç§¯ï¼Œæé«˜åŠ è½½é€Ÿåº¦ã€‚</em></p>
</li>
<li>
<p><strong>å›¾ç‰‡å°ºå¯¸ç¼©æ”¾</strong></p>
<p>åŸå§‹å›¾ç‰‡ï¼ˆåŸå°ºå¯¸ï¼‰ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.example.com%2Fimage.jpg" target="_blank" title="https://cdn.example.com/image.jpg" ref="nofollow noopener noreferrer">cdn.example.com/image.jpg</a></p>
<p>ç¼©æ”¾è‡³å®½åº¦300pxï¼Œé«˜åº¦è‡ªåŠ¨é€‚é…ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.example.com%2Fimage.jpg%3Fwidth%3D300" target="_blank" title="https://cdn.example.com/image.jpg?width=300" ref="nofollow noopener noreferrer">cdn.example.com/image.jpg?wâ€¦</a></p>
</li>
<li>
<p><strong>æ·»åŠ æ°´å°</strong></p>
<p>åŸå§‹å›¾ç‰‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.example.com%2Fimage.jpg" target="_blank" title="https://cdn.example.com/image.jpg" ref="nofollow noopener noreferrer">cdn.example.com/image.jpg</a></p>
<p>æ·»åŠ æ°´å°ï¼ˆæ°´å°æ–‡æœ¬â€œSampleâ€ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.example.com%2Fimage.jpg%3Fwatermark%3Dtext%3ASample%2Copacity%3A50" target="_blank" title="https://cdn.example.com/image.jpg?watermark=text:Sample,opacity:50" ref="nofollow noopener noreferrer">cdn.example.com/image.jpg?wâ€¦</a></p>
</li>
</ul>
<p>è¿™äº›åŠŸèƒ½æå¤§åœ°ç®€åŒ–äº†å›¾ç‰‡å¤„ç†çš„æµç¨‹ï¼Œå‰ç«¯æ— éœ€é¢å¤–ç¼–å†™ä»£ç æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œå³å¯æŒ‰éœ€åŠ¨æ€è°ƒæ•´å›¾ç‰‡ï¼Œä¼˜åŒ–ç½‘ç«™æ€§èƒ½ã€‚</p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥å°è£…ä¸€ä¸ªå›¾ç‰‡ç»„ä»¶ï¼Œæ¥æ ¹æ®ä¸åŒå…¥å‚è·å–ä¸åŒè´¨é‡å’Œå…¼å®¹æ€§çš„å›¾ç‰‡ã€‚</p>
</li>
<li>
<p><strong>è‡ªåŠ¨åŒ–ä¼˜åŒ–å·¥å…·</strong>ï¼š</p>
<p>ä½¿ç”¨æ„å»ºå·¥å…·å’Œå›¾ç‰‡å¤„ç†å·¥å…·è‡ªåŠ¨åŒ–ä¼˜åŒ–å›¾ç‰‡ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨<code>image-webpack-loader</code>ã€<code>sharp</code>ç­‰å·¥å…·ï¼Œåœ¨Webpackæ„å»ºè¿‡ç¨‹ä¸­è‡ªåŠ¨å‹ç¼©å’Œè½¬æ¢å›¾ç‰‡æ ¼å¼ã€‚</p>
</li>
<li>
<p><strong>å›¾åƒç²¾çµ</strong>ï¼š</p>
<p>å°†å¤šä¸ªå°å›¾ç‰‡ï¼ˆå¦‚å›¾æ ‡ï¼‰åˆå¹¶æˆä¸€å¼ å¤§çš„å›¾ç‰‡ï¼Œä½¿ç”¨CSSå®šä½æ¥æ˜¾ç¤ºä¸åŒçš„éƒ¨åˆ†ï¼Œå‡å°‘HTTPè¯·æ±‚æ¬¡æ•°ï¼ˆå‡å°‘èµ„æºåŠ è½½æ—¶é—´ï¼‰ã€‚</p>
</li>
</ul>
<p>å›¾ç‰‡ä¼˜åŒ–å¯¹äºå‰ç«¯æ€§èƒ½çš„æå‡å…·æœ‰éå¸¸é‡è¦çš„æ„ä¹‰ï¼Œåˆç†é€‰æ‹©å›¾ç‰‡æ ¼å¼ã€è¿›è¡Œå›¾ç‰‡å‹ç¼©ã€å°ºå¯¸è°ƒæ•´ã€æ‡’åŠ è½½å’Œä½¿ç”¨CDNç­‰æŠ€æœ¯ï¼Œéƒ½èƒ½æ˜¾è‘—æé«˜ç½‘ç«™åŠ è½½é€Ÿåº¦ï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒã€‚éšç€Webçš„ä¸æ–­å‘å±•ï¼Œç°ä»£å›¾ç‰‡æ ¼å¼ï¼ˆå¦‚WebPã€AVIFï¼‰ä¸ºæˆ‘ä»¬æä¾›äº†æ›´é«˜æ•ˆçš„å›¾ç‰‡å‹ç¼©æ–¹å¼ï¼Œè€Œæ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„å›¾ç‰‡æ ¼å¼å’Œä¼˜åŒ–æ‰‹æ®µï¼Œèƒ½ä½¿å¾—ç½‘ç«™åœ¨åŠ è½½æ—¶äº‹åŠåŠŸå€ã€‚</p>
<h3 data-id="heading-15">1.2 å°‘è¯·æ±‚ä¸€ç‚¹</h3>
<h4 data-id="heading-16">1.2.1 å°‘è¯·æ±‚ä¸€ç‚¹ï¼šç¼“å­˜</h4>
<p>æˆ‘ä»¬å‰é¢è¯´è¿‡ï¼Œæ€§èƒ½ä¼˜åŒ–æ— éå°±æ˜¯ä¸‰ä¸ªè¯ï¼š <strong>ç¼“å­˜</strong> ã€<strong>å‹ç¼©</strong>ã€ <strong>æ‡’åŠ è½½</strong>ã€‚è¿™ä¸€èŠ‚æˆ‘ä»¬æ¥è®²å¦‚ä½•é€šè¿‡ <strong>ç¼“å­˜</strong> æ¥ä¼˜åŒ–æ€§èƒ½ã€‚</p>
<p>åœ¨å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸­ï¼Œ<strong>ç¼“å­˜</strong>æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ‰‹æ®µï¼Œèƒ½å¤Ÿæ˜¾è‘—æé«˜ç½‘é¡µçš„åŠ è½½é€Ÿåº¦ï¼Œå‡å°‘æœåŠ¡å™¨è¯·æ±‚ï¼Œå‡è½»ç½‘ç»œå‹åŠ›ï¼Œä»è€Œæå‡ç”¨æˆ·ä½“éªŒã€‚é€šè¿‡åˆç†ä½¿ç”¨ç¼“å­˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒåœºæ™¯ä¸‹å­˜å‚¨æ•°æ®å’Œèµ„æºï¼Œé¿å…é‡å¤åŠ è½½å’Œè®¡ç®—ï¼Œæå‡å“åº”é€Ÿåº¦ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ</strong></p>
<p>ç¼“å­˜æ˜¯æŒ‡å°†æŸäº›æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªä¸´æ—¶çš„å­˜å‚¨ä»‹è´¨ï¼ˆå¦‚å†…å­˜ã€ç¡¬ç›˜æˆ–æµè§ˆå™¨ç­‰ï¼‰ä¸­ï¼Œä»¥ä¾¿åœ¨ä»¥åéœ€è¦æ—¶èƒ½å¤Ÿæ›´å¿«é€Ÿåœ°è·å–ã€‚ç¼“å­˜çš„ç›®çš„æ˜¯é¿å…æ¯æ¬¡è¯·æ±‚éƒ½ä»å¤´å¼€å§‹è®¡ç®—æˆ–åŠ è½½ï¼Œè€Œæ˜¯ç›´æ¥ä»ç¼“å­˜ä¸­è·å–æ•°æ®æˆ–èµ„æºï¼Œä»è€Œæå‡æ•ˆç‡å’Œå‡å°‘ä¸å¿…è¦çš„å»¶è¿Ÿã€‚</p>
<p><strong>ç¼“å­˜çš„ç±»å‹æœ‰å“ªäº›ï¼Ÿ</strong></p>
<p>ç¼“å­˜å¯ä»¥åˆ†ä¸ºå¤šç§ç±»å‹ï¼Œæ¯ç§ç¼“å­˜éƒ½æœ‰ä¸åŒçš„åº”ç”¨åœºæ™¯å’Œä½œç”¨ã€‚å¸¸è§çš„ç¼“å­˜ç±»å‹åŒ…æ‹¬ï¼š</p>
<ol>
<li>
<p><strong>æµè§ˆå™¨ç¼“å­˜ï¼ˆClient-side Cacheï¼‰</strong></p>
<p>æµè§ˆå™¨ç¼“å­˜æ˜¯åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­å­˜å‚¨èµ„æºï¼ˆå¦‚å›¾ç‰‡ã€CSSã€JSæ–‡ä»¶ç­‰ï¼‰ï¼Œä»¥ä¾¿åœ¨ä¸‹ä¸€æ¬¡è®¿é—®åŒä¸€é¡µé¢æ—¶æ— éœ€é‡æ–°ä¸‹è½½è¿™äº›èµ„æºã€‚
ä¸»è¦é€šè¿‡HTTPå¤´éƒ¨æ§åˆ¶ï¼Œå¦‚ <code>Cache-Control</code>ã€<code>ETag</code>ã€<code>Last-Modified</code> ç­‰ã€‚</p>
</li>
<li>
<p><strong>DNSç¼“å­˜</strong></p>
<p>DNSç¼“å­˜æ˜¯æŒ‡åœ¨æœ¬åœ°è®¾å¤‡ï¼ˆå¦‚æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿã€è·¯ç”±å™¨ç­‰ï¼‰ä¸­ç¼“å­˜DNSè§£æç»“æœçš„æœºåˆ¶ã€‚å½“ä½ è®¿é—®ä¸€ä¸ªç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨éœ€è¦é€šè¿‡DNSï¼ˆåŸŸåç³»ç»Ÿï¼‰å°†åŸŸåï¼ˆå¦‚<code>www.example.com</code>ï¼‰è½¬æ¢ä¸ºå¯¹åº”çš„IPåœ°å€ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºDNSè§£æã€‚</p>
<p>åœ¨é¦–æ¬¡è®¿é—®æŸä¸ªåŸŸåæ—¶ï¼ŒDNSè§£æå™¨ä¼šå‘åŸŸåçš„DNSæœåŠ¡å™¨å‘èµ·è¯·æ±‚æ¥è·å–åŸŸåçš„IPåœ°å€ã€‚ä¸ºäº†é¿å…æ¯æ¬¡éƒ½éœ€è¦é‡æ–°è§£æç›¸åŒçš„åŸŸåï¼ŒDNSç»“æœä¼šè¢«ç¼“å­˜ä¸€æ®µæ—¶é—´ï¼Œè¿™æ®µæ—¶é—´è¢«ç§°ä¸º<strong>TTL</strong>ï¼ˆTime To Liveï¼‰ã€‚TTLè¿‡æœŸä¹‹å‰ï¼Œè®¾å¤‡ä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜çš„IPåœ°å€ï¼Œè€Œä¸å¿…å†æ¬¡è¿›è¡ŒDNSè§£æã€‚</p>
</li>
<li>
<p><strong>HTTPç¼“å­˜ï¼ˆServer-side Cacheï¼‰</strong></p>
<p>HTTPç¼“å­˜æ˜¯æŒ‡åœ¨æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´é€šè¿‡HTTPåè®®è¿›è¡Œçš„ç¼“å­˜å¤„ç†ã€‚æœåŠ¡å™¨ä¼šå°†è¯·æ±‚çš„æ•°æ®ç¼“å­˜ä¸‹æ¥ï¼Œè‹¥ä¸‹æ¬¡ç›¸åŒè¯·æ±‚åˆ°æ¥ï¼Œç›´æ¥è¿”å›ç¼“å­˜çš„å†…å®¹ï¼Œè€Œä¸å†è¿›è¡Œè®¡ç®—æˆ–æŸ¥è¯¢ã€‚
å¸¸è§çš„ç¼“å­˜ç­–ç•¥æœ‰ï¼š<strong>å®¢æˆ·ç«¯ç¼“å­˜</strong>ã€<strong>ä»£ç†ç¼“å­˜</strong>ï¼ˆå¦‚CDNç¼“å­˜ï¼‰ã€<strong>æœåŠ¡å™¨ç¼“å­˜</strong>ç­‰ã€‚</p>
</li>
<li>
<p><strong>CDNç¼“å­˜ï¼ˆContent Delivery Network Cacheï¼‰</strong></p>
<p>CDNç¼“å­˜æ˜¯é€šè¿‡å°†é™æ€èµ„æºï¼ˆå¦‚å›¾ç‰‡ã€JSã€CSSç­‰ï¼‰åˆ†å‘åˆ°å…¨çƒå„åœ°çš„CDNèŠ‚ç‚¹ï¼Œå‡å°‘ç”¨æˆ·è¯·æ±‚çš„å“åº”æ—¶é—´ã€‚CDNç¼“å­˜æé«˜äº†é™æ€èµ„æºåŠ è½½çš„é€Ÿåº¦ï¼Œå¹¶å‡è½»äº†æºæœåŠ¡å™¨çš„å‹åŠ›ã€‚</p>
</li>
<li>
<p><strong>å†…å­˜ç¼“å­˜ï¼ˆIn-memory Cacheï¼‰</strong></p>
<p>å†…å­˜ç¼“å­˜æ˜¯å°†å¸¸ç”¨æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå‡å°‘ç£ç›˜I/Oæ“ä½œï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚å¸¸è§çš„å†…å­˜ç¼“å­˜æŠ€æœ¯æœ‰ï¼š<strong>Redis</strong>ã€<strong>Memcached</strong>ã€‚</p>
</li>
<li>
<p><strong>æœ¬åœ°å­˜å‚¨ï¼ˆLocal Storage / Session Storageï¼‰</strong></p>
<p>LocalStorageï¼šæµè§ˆå™¨æä¾›çš„ä¸€ç§æŒä¹…åŒ–å­˜å‚¨æ–¹å¼ï¼Œæ•°æ®ä¸ä¼šè¿‡æœŸï¼Œé€‚åˆå­˜å‚¨ä¸é¢‘ç¹å˜åŒ–çš„æ•°æ®ï¼Œå¦‚ç”¨æˆ·ä¿¡æ¯ã€è®¾ç½®ç­‰ã€‚</p>
<p>SessionStorageï¼šä¸LocalStorageç±»ä¼¼ï¼Œä½†æ•°æ®ä»…åœ¨å½“å‰ä¼šè¯æœŸé—´æœ‰æ•ˆã€‚é€‚ç”¨äºå­˜å‚¨ä¼šè¯çº§åˆ«çš„ä¸´æ—¶æ•°æ®ã€‚</p>
</li>
<li>
<p><strong>Service Workerç¼“å­˜</strong></p>
<p>Service Workeræ˜¯ä¸€ä¸ªå¯ä»¥åœ¨åå°çº¿ç¨‹è¿è¡Œçš„JavaScriptï¼Œå®ƒèƒ½å¤Ÿæ‹¦æˆªç½‘ç»œè¯·æ±‚å¹¶å°†å“åº”å­˜å‚¨åˆ°ç¼“å­˜ä¸­ã€‚Service Workerç¼“å­˜ä¸»è¦ç”¨äºæ”¯æŒç¦»çº¿åŠŸèƒ½ï¼Œä½¿å¾—åº”ç”¨èƒ½å¤Ÿåœ¨æ²¡æœ‰ç½‘ç»œçš„æƒ…å†µä¸‹ç»§ç»­è¿è¡Œã€‚</p>
</li>
</ol>
<p><strong>å¦‚ä½•é€šè¿‡ç¼“å­˜æ¥æå‡æ€§èƒ½ï¼Ÿ</strong></p>
<p>ç¼“å­˜ä¼˜åŒ–å¯ä»¥æœ‰æ•ˆå‡å°‘é‡å¤åŠ è½½å’Œè®¡ç®—ï¼Œæå‡é¡µé¢çš„åŠ è½½é€Ÿåº¦å’Œå“åº”èƒ½åŠ›ã€‚æˆ‘ä»¬æ¥ç€ä¸Šé¢çš„åˆ†ç±»æŒ¨ä¸ªè®²ï¼š</p>
<p><strong>1. æµè§ˆå™¨ç¼“å­˜</strong></p>
<p>åœ¨æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä¸­ï¼Œ<strong>å¼ºç¼“å­˜</strong>å’Œ<strong>åå•†ç¼“å­˜</strong>æ˜¯ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒä»¬å¸®åŠ©æµè§ˆå™¨å†³å®šèµ„æºæ˜¯å¦éœ€è¦é‡æ–°è¯·æ±‚æœåŠ¡å™¨ï¼Œè¿›è€Œä¼˜åŒ–é¡µé¢åŠ è½½é€Ÿåº¦ã€‚ä¸¤è€…æœ‰ä¸åŒçš„å·¥ä½œåŸç†å’Œåº”ç”¨åœºæ™¯ã€‚ä¸‹é¢ï¼Œæˆ‘å°†è¯¦ç»†è§£é‡Šè¿™ä¸¤ç§ç¼“å­˜çš„å†…å®¹ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å˜åŒ–çš„ã€‚</p>
<ul>
<li>
<p><em><strong>å¼ºç¼“å­˜ï¼ˆCache-Controlã€Expiresï¼‰</strong></em></p>
<p><strong>å¼ºç¼“å­˜</strong>æ˜¯ä¸€ç§æœ€å¸¸è§çš„ç¼“å­˜æ–¹å¼ï¼Œå®ƒä¼šç›´æ¥åˆ¤æ–­èµ„æºæ˜¯å¦åœ¨ç¼“å­˜æœ‰æ•ˆæœŸå†…ï¼Œå¦‚æœæœ‰æ•ˆï¼Œå°±ä¼šç›´æ¥ä»ç¼“å­˜ä¸­åŠ è½½èµ„æºï¼Œè€Œä¸éœ€è¦ä¸æœåŠ¡å™¨è¿›è¡Œä»»ä½•äº¤äº’ã€‚</p>
<p>å¼ºç¼“å­˜é€šè¿‡è®¾ç½® <code>Cache-Control</code> æˆ– <code>Expires</code> æ¥æ§åˆ¶èµ„æºçš„ç¼“å­˜ç­–ç•¥ã€‚å®ƒçš„å…³é”®ç‚¹æ˜¯ï¼šåœ¨ç¼“å­˜çš„æœ‰æ•ˆæœŸå†…ï¼Œæµè§ˆå™¨ä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„èµ„æºï¼Œè€Œä¸ä¼šå‘æœåŠ¡å™¨å‘èµ·ä»»ä½•è¯·æ±‚ã€‚</p>
<p><strong>Cache-Control</strong>: è¿™æ˜¯ä¸€ä¸ªç°ä»£çš„ã€çµæ´»çš„ç¼“å­˜æ§åˆ¶å¤´éƒ¨ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å®šèµ„æºçš„ç¼“å­˜ç­–ç•¥ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>max-age</code>: æŒ‡å®šèµ„æºåœ¨ç¼“å­˜ä¸­çš„æœ€å¤§å­˜æ´»æ—¶é—´ï¼ˆå•ä½ä¸ºç§’ï¼‰ã€‚æ¯”å¦‚ï¼Œ<code>Cache-Control: max-age=3600</code> è¡¨ç¤ºèµ„æºä¼šè¢«ç¼“å­˜1å°æ—¶ã€‚</li>
<li><code>public</code>: è¡¨ç¤ºèµ„æºå¯ä»¥è¢«ä»»ä½•ç¼“å­˜æœåŠ¡å™¨ç¼“å­˜ï¼ˆå³ä½¿æ˜¯ä»£ç†æœåŠ¡å™¨ä¹Ÿå¯ä»¥ç¼“å­˜ï¼‰ã€‚</li>
<li><code>private</code>: è¡¨ç¤ºèµ„æºåªèƒ½è¢«ç”¨æˆ·æµè§ˆå™¨ç¼“å­˜ï¼Œä¸èƒ½è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜ã€‚</li>
<li><code>no-cache</code> å’Œ <code>no-store</code>: å¼ºåˆ¶ä¸ç¼“å­˜èµ„æºï¼Œå…¶ä¸­ <code>no-store</code> æ˜¯æœ€ä¸¥æ ¼çš„ç¼“å­˜æ§åˆ¶ï¼Œè¡¨ç¤ºä¸å…è®¸ç¼“å­˜ã€‚</li>
</ul>
<p><strong>Expires</strong>: è¿™æ˜¯ä¸€ä¸ªè¿‡æ—¶çš„ç¼“å­˜å¤´éƒ¨ï¼Œç”¨æ¥æŒ‡å®šèµ„æºçš„è¿‡æœŸæ—¶é—´ã€‚æ¯”å¦‚ <code>Expires: Wed, 21 Oct 2025 07:28:00 GMT</code>ã€‚ä¸è¿‡ï¼Œ<code>Expires</code> å·²ç»è¢« <code>Cache-Control</code> æ›¿ä»£ï¼Œ<code>Cache-Control</code> æä¾›äº†æ›´å¤šçš„æ§åˆ¶é€‰é¡¹ã€‚</p>
<p><strong>å¼ºç¼“å­˜çš„å˜åŒ–è¿‡ç¨‹</strong></p>
<ul>
<li><strong>é¦–æ¬¡è¯·æ±‚</strong>ï¼šæµè§ˆå™¨è¯·æ±‚èµ„æºæ—¶ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›å¸¦æœ‰ç¼“å­˜æ§åˆ¶å¤´éƒ¨çš„å“åº”ï¼Œæµè§ˆå™¨æ ¹æ® <code>Cache-Control</code> æˆ– <code>Expires</code> åˆ¤æ–­æ˜¯å¦ç¼“å­˜èµ„æºã€‚</li>
<li><strong>æœ‰æ•ˆç¼“å­˜</strong>ï¼šå¦‚æœç¼“å­˜ä»ç„¶æœ‰æ•ˆï¼Œæµè§ˆå™¨å°±ä¼šç›´æ¥ä»ç¼“å­˜ä¸­åŠ è½½èµ„æºï¼Œè€Œä¸ä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚</li>
<li><strong>è¿‡æœŸç¼“å­˜</strong>ï¼šå¦‚æœç¼“å­˜å·²ç»è¿‡æœŸï¼Œæµè§ˆå™¨ä¼šå†æ¬¡å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè·å–æœ€æ–°çš„èµ„æºã€‚</li>
</ul>
<p><strong>ä¸¾ä¾‹</strong>ï¼š</p>
<ul>
<li><code>Cache-Control: max-age=3600</code>ï¼šèµ„æºç¼“å­˜1å°æ—¶ã€‚åœ¨è¿™1å°æ—¶å†…ï¼Œæµè§ˆå™¨ä¸ä¼šå‘èµ·ä»»ä½•è¯·æ±‚ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜ã€‚å¦‚æœè¶…è¿‡1å°æ—¶ï¼Œç¼“å­˜å¤±æ•ˆï¼Œæµè§ˆå™¨ä¼šé‡æ–°è¯·æ±‚èµ„æºã€‚</li>
<li><code>Cache-Control: no-cache</code>ï¼šè¡¨ç¤ºæ¯æ¬¡éƒ½éœ€è¦ä¸æœåŠ¡å™¨ç¡®è®¤ç¼“å­˜æ˜¯å¦æœ‰æ•ˆï¼Œå³ä½¿èµ„æºå­˜åœ¨ç¼“å­˜ï¼Œæµè§ˆå™¨ä¹Ÿä¼šå‘é€è¯·æ±‚è¿›è¡ŒéªŒè¯ã€‚</li>
</ul>
</li>
<li>
<p><em><strong>åå•†ç¼“å­˜ï¼ˆETagã€Last-Modifiedï¼‰</strong></em></p>
<p><strong>åå•†ç¼“å­˜</strong>æ˜¯ä¸€ç§æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„ç¼“å­˜æœºåˆ¶ï¼Œå®ƒä¾èµ–äºæµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„é€šä¿¡æ¥ç¡®å®šèµ„æºæ˜¯å¦æœ‰å˜åŒ–ã€‚å¦‚æœèµ„æºæ²¡æœ‰å˜åŒ–ï¼ŒæœåŠ¡å™¨ä¼šè¿”å› 304ï¼ˆNot Modifiedï¼‰å“åº”ï¼Œå‘Šè¯‰æµè§ˆå™¨ç»§ç»­ä½¿ç”¨ç¼“å­˜ä¸­çš„èµ„æºã€‚</p>
<p>åå•†ç¼“å­˜çš„æ ¸å¿ƒæ˜¯ <code>ETag</code> å’Œ <code>Last-Modified</code> è¿™ä¸¤ä¸ªHTTPå¤´éƒ¨ã€‚å®ƒä»¬ç”¨äºå¸®åŠ©æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´åˆ¤æ–­èµ„æºæ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>ETag</strong>ï¼šæœåŠ¡å™¨ä¼šåœ¨å“åº”å¤´ä¸­è¿”å›ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå¦‚å“ˆå¸Œå€¼ï¼‰ï¼Œè¯¥æ ‡è¯†ç¬¦ä»£è¡¨èµ„æºçš„å†…å®¹ã€‚å¦‚æœèµ„æºå†…å®¹æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œ<code>ETag</code> å°±ä¸ä¼šæ”¹å˜ã€‚</li>
<li><strong>Last-Modified</strong>ï¼šæœåŠ¡å™¨ä¼šåœ¨å“åº”å¤´ä¸­è¿”å›èµ„æºæœ€åä¿®æ”¹çš„æ—¶é—´ã€‚å¦‚æœèµ„æºæ²¡æœ‰è¢«ä¿®æ”¹ï¼ŒæœåŠ¡å™¨è¿”å›çš„æ—¶é—´å°±ä¸ä¼šå˜åŒ–ã€‚</li>
</ul>
<p>å½“æµè§ˆå™¨ä½¿ç”¨ç¼“å­˜çš„èµ„æºæ—¶ï¼Œä¼šåœ¨è¯·æ±‚å¤´ä¸­å¸¦ä¸Šè¿™äº›æ ‡è¯†ç¬¦ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®è¿™äº›æ ‡è¯†ç¬¦åˆ¤æ–­èµ„æºæ˜¯å¦æœ‰å˜åŒ–ï¼š</p>
<ul>
<li><strong>If-None-Match</strong>ï¼šæµè§ˆå™¨åœ¨è¯·æ±‚æ—¶å¸¦ä¸Šä¸Šæ¬¡è¯·æ±‚çš„ <code>ETag</code> å€¼ï¼ŒæœåŠ¡å™¨æ¯”è¾ƒ <code>ETag</code> æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒåˆ™è¿”å› 304ï¼ˆNot Modifiedï¼‰ã€‚</li>
<li><strong>If-Modified-Since</strong>ï¼šæµè§ˆå™¨ä¼šå‘é€ <code>Last-Modified</code> å€¼ï¼ŒæœåŠ¡å™¨æ£€æŸ¥æ–‡ä»¶è‡ªä¸Šæ¬¡ä¿®æ”¹ä»¥æ¥æ˜¯å¦è¢«æ›´æ–°ï¼Œå¦‚æœæœªæ›´æ–°ï¼Œåˆ™è¿”å› 304ã€‚</li>
</ul>
<p><strong>åå•†ç¼“å­˜çš„å˜åŒ–è¿‡ç¨‹</strong>ï¼š</p>
<p><strong>é¦–æ¬¡è¯·æ±‚</strong>ï¼šæœåŠ¡å™¨è¿”å›èµ„æºå¹¶é™„å¸¦ <code>ETag</code> æˆ– <code>Last-Modified</code>ï¼Œæµè§ˆå™¨å°†å…¶å­˜å‚¨èµ·æ¥ã€‚</p>
<p><strong>åç»­è¯·æ±‚</strong>ï¼šæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€å¸¦æœ‰ <code>If-None-Match</code> æˆ– <code>If-Modified-Since</code> çš„è¯·æ±‚å¤´ï¼Œè¯¢é—®æœåŠ¡å™¨èµ„æºæ˜¯å¦æœ‰å˜åŒ–ã€‚</p>
<p><strong>æœåŠ¡å™¨å“åº”</strong>ï¼šå¦‚æœèµ„æºæ²¡æœ‰å˜åŒ–ï¼ŒæœåŠ¡å™¨è¿”å› 304 çŠ¶æ€ç ï¼Œæµè§ˆå™¨ç»§ç»­ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚å¦‚æœèµ„æºå˜åŒ–ï¼ŒæœåŠ¡å™¨è¿”å›æ–°çš„èµ„æºå’Œæ–°çš„ <code>ETag</code> æˆ– <code>Last-Modified</code>ã€‚</p>
<p><strong>ä¸¾ä¾‹</strong>ï¼š</p>
<p><strong>ETag</strong>ï¼š</p>
<ul>
<li>æœåŠ¡å™¨è¿”å›ï¼š<code>ETag: "12345"</code></li>
<li>æµè§ˆå™¨è¯·æ±‚æ—¶å‘é€ï¼š<code>If-None-Match: "12345"</code></li>
<li>å¦‚æœèµ„æºæœªä¿®æ”¹ï¼ŒæœåŠ¡å™¨è¿”å› 304 çŠ¶æ€ï¼Œå‘Šè¯‰æµè§ˆå™¨ç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚</li>
</ul>
<p><strong>Last-Modified</strong>ï¼š</p>
<ul>
<li>æœåŠ¡å™¨è¿”å›ï¼š<code>Last-Modified: Tue, 20 Apr 2021 12:00:00 GMT</code></li>
<li>æµè§ˆå™¨è¯·æ±‚æ—¶å‘é€ï¼š<code>If-Modified-Since: Tue, 20 Apr 2021 12:00:00 GMT</code></li>
<li>å¦‚æœèµ„æºæœªä¿®æ”¹ï¼ŒæœåŠ¡å™¨è¿”å› 304 çŠ¶æ€ã€‚</li>
</ul>
</li>
</ul>
<p><strong>å¼ºç¼“å­˜</strong>ï¼šé€šè¿‡è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆ<code>Cache-Control</code> æˆ– <code>Expires</code>ï¼‰æ¥æ§åˆ¶èµ„æºçš„å­˜å‚¨æœŸï¼Œç¼“å­˜æœ‰æ•ˆæœŸå†…ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œä¸ä¸æœåŠ¡å™¨äº¤äº’ã€‚é€‚ç”¨äºé™æ€ä¸”æ›´æ–°ä¸é¢‘ç¹çš„èµ„æºã€‚</p>
<p><strong>åå•†ç¼“å­˜</strong>ï¼šä¾èµ– <code>ETag</code> å’Œ <code>Last-Modified</code>ï¼Œé€šè¿‡ä¸æœåŠ¡å™¨çš„é€šä¿¡æ¥éªŒè¯ç¼“å­˜æ˜¯å¦æœ‰æ•ˆã€‚é€‚ç”¨äºéœ€è¦é¢‘ç¹æ›´æ–°ä¸”æœåŠ¡å™¨å†…å®¹ä¸å¯é¢„çŸ¥çš„èµ„æºã€‚</p>
<p>è¿™ä¸¤ç§ç¼“å­˜æ–¹å¼å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œå…ˆä½¿ç”¨å¼ºç¼“å­˜ï¼Œå¦‚æœå¼ºç¼“å­˜å¤±æ•ˆï¼Œå†é€šè¿‡åå•†ç¼“å­˜å‘æœåŠ¡å™¨éªŒè¯èµ„æºçš„æœ‰æ•ˆæ€§ï¼Œä»è€Œæä¾›æœ€ä¼˜çš„ç¼“å­˜ç­–ç•¥ã€‚</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>å¼ºç¼“å­˜</th><th>åå•†ç¼“å­˜</th></tr></thead><tbody><tr><td>å·¥ä½œæ–¹å¼</td><td>å®Œå…¨ä¾èµ–ç¼“å­˜å¤´ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œä¸ä¸æœåŠ¡å™¨äº¤äº’</td><td>æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ä¸æœåŠ¡å™¨äº¤äº’ï¼ŒéªŒè¯ç¼“å­˜æ˜¯å¦æœ‰æ•ˆ</td></tr><tr><td>ä¸»è¦æ§åˆ¶å¤´</td><td><code>Cache-Control</code>, <code>Expires</code></td><td><code>ETag</code>, <code>Last-Modified</code></td></tr><tr><td>è¯·æ±‚å‘é€</td><td>å¦‚æœç¼“å­˜æœ‰æ•ˆï¼Œæµè§ˆå™¨ä¸å‘é€è¯·æ±‚</td><td>æµè§ˆå™¨æ¯æ¬¡è¯·æ±‚éƒ½ä¼šå¸¦ä¸Š <code>If-None-Match</code> æˆ– <code>If-Modified-Since</code></td></tr><tr><td>å“åº”çŠ¶æ€</td><td>ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œè‹¥è¿‡æœŸæ‰ä¼šé‡æ–°è¯·æ±‚</td><td>æœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†ç¬¦åˆ¤æ–­æ˜¯å¦ä¿®æ”¹ï¼Œæœªä¿®æ”¹è¿”å› 304 çŠ¶æ€</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>é€‚ç”¨äºä¸éœ€è¦é¢‘ç¹æ›´æ–°çš„é™æ€èµ„æºï¼Œå¦‚å›¾ç‰‡ã€CSSã€JS</td><td>é€‚ç”¨äºéœ€è¦é¢‘ç¹æ›´æ–°å¹¶ä¸”æ›´æ–°é—´éš”ä¸å¯é¢„çŸ¥çš„èµ„æº</td></tr></tbody></table>
<p><strong>ä¸¾ä¾‹</strong>ï¼šå¯¹äºå›¾ç‰‡ã€JSã€CSSç­‰é™æ€èµ„æºï¼Œå¯ä»¥è®¾ç½®è¾ƒé•¿çš„ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œè€Œå¯¹äºé¢‘ç¹æ›´æ–°çš„å†…å®¹ï¼ˆå¦‚åŠ¨æ€HTMLé¡µé¢ï¼‰ï¼Œå¯ä»¥è®¾ç½®è¾ƒçŸ­çš„ç¼“å­˜æ—¶é—´æˆ–ä¸ç¼“å­˜ã€‚</p>
<p>è°·æ­Œç»™äº†ä¸€å¼ å›¾ï¼Œæ›´å¥½çš„è¯´æ˜äº†åº”è¯¥æ€ä¹ˆå»æŒ‡å®šèµ„æºç¼“å­˜çš„ç­–ç•¥</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9be4f888e5cd4f21bb18aedcac4a4d66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxlZWVlZXg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100871&amp;x-signature=0thNwebu9btjmAtiBIJZpWtQjRI%3D" alt="image.png" loading="lazy"/></p>
<p>æ€»ç»“ä¸€ä¸‹ä¸Šé¢çš„å›¾ã€‚é¦–å…ˆï¼Œå¦‚æœèµ„æºå†…å®¹å®Œå…¨ä¸å¯å¤ç”¨ï¼Œé‚£å°±ç›´æ¥æŠŠ <code>Cache-Control</code> è®¾ç½®ä¸º <code>no-store</code>ï¼Œæ‹’ç»ä»»ä½•å½¢å¼çš„ç¼“å­˜ã€‚å¦åˆ™ï¼Œé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼šæ¯æ¬¡éƒ½è¦å»æœåŠ¡å™¨ç¡®è®¤ç¼“å­˜æ˜¯å¦æœ‰æ•ˆå—ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£å°±è®¾ä¸º <code>no-cache</code>ã€‚æ¥ä¸‹æ¥ï¼Œæ€è€ƒä¸‹è¿™ä¸ªèµ„æºæ˜¯å¦å¯ä»¥è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜ï¼ŒåŸºäºè¿™ä¸ªå†³å®šï¼Œå°†å…¶è®¾ç½®ä¸º <code>private</code> è¿˜æ˜¯ <code>public</code>ã€‚ç„¶åï¼Œè¿›ä¸€æ­¥è€ƒè™‘èµ„æºçš„è¿‡æœŸæ—¶é—´ï¼Œåˆç†é…ç½® <code>max-age</code> å’Œ <code>s-maxage</code>ã€‚æœ€åï¼Œåˆ«å¿˜äº†é…ç½®åå•†ç¼“å­˜æ‰€éœ€è¦çš„ <code>ETag</code>ã€<code>Last-Modified</code> ç­‰å‚æ•°ã€‚</p>
<p><strong>2. DNSç¼“å­˜</strong></p>
<p><strong>DNSç¼“å­˜</strong>æ˜¯æŒ‡åœ¨æœ¬åœ°è®¾å¤‡ï¼ˆå¦‚æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿã€è·¯ç”±å™¨ç­‰ï¼‰ä¸­ç¼“å­˜DNSè§£æç»“æœçš„æœºåˆ¶ã€‚å½“ä½ è®¿é—®ä¸€ä¸ªç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨éœ€è¦é€šè¿‡DNSï¼ˆåŸŸåç³»ç»Ÿï¼‰å°†åŸŸåï¼ˆå¦‚<code>www.example.com</code>ï¼‰è½¬æ¢ä¸ºå¯¹åº”çš„IPåœ°å€ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºDNSè§£æã€‚</p>
<p>åœ¨é¦–æ¬¡è®¿é—®æŸä¸ªåŸŸåæ—¶ï¼ŒDNSè§£æå™¨ä¼šå‘åŸŸåçš„DNSæœåŠ¡å™¨å‘èµ·è¯·æ±‚æ¥è·å–åŸŸåçš„IPåœ°å€ã€‚ä¸ºäº†é¿å…æ¯æ¬¡éƒ½éœ€è¦é‡æ–°è§£æç›¸åŒçš„åŸŸåï¼ŒDNSç»“æœä¼šè¢«ç¼“å­˜ä¸€æ®µæ—¶é—´ï¼Œè¿™æ®µæ—¶é—´è¢«ç§°ä¸º<strong>TTL</strong>ï¼ˆTime To Liveï¼‰ã€‚TTLè¿‡æœŸä¹‹å‰ï¼Œè®¾å¤‡ä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜çš„IPåœ°å€ï¼Œè€Œä¸å¿…å†æ¬¡è¿›è¡ŒDNSè§£æã€‚</p>
<p>DNSç¼“å­˜çš„å·¥ä½œåŸç†ï¼š</p>
<ol>
<li><strong>é¦–æ¬¡è¯·æ±‚</strong>ï¼šæµè§ˆå™¨å‘DNSæœåŠ¡å™¨å‘èµ·æŸ¥è¯¢è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›åŸŸåå¯¹åº”çš„IPåœ°å€ï¼Œå¹¶è®¾ç½®TTLã€‚</li>
<li><strong>ç¼“å­˜å­˜å‚¨</strong>ï¼šæµè§ˆå™¨å°†è¿”å›çš„IPåœ°å€å­˜å‚¨åœ¨DNSç¼“å­˜ä¸­ï¼Œå¹¶åœ¨TTLæœ‰æ•ˆæœŸå†…ä½¿ç”¨è¯¥IPåœ°å€ã€‚</li>
<li><strong>è¿‡æœŸæŸ¥è¯¢</strong>ï¼šTTLåˆ°æœŸåï¼Œæµè§ˆå™¨ä¼šå†æ¬¡å‘èµ·DNSæŸ¥è¯¢ï¼Œè·å–æœ€æ–°çš„IPåœ°å€ã€‚</li>
</ol>
<p>DNSç¼“å­˜ä¸ä»…å­˜åœ¨äºæµè§ˆå™¨ä¸­ï¼Œè¿˜å¯ä»¥åœ¨æ“ä½œç³»ç»Ÿå’Œç½‘ç»œè®¾å¤‡ï¼ˆå¦‚è·¯ç”±å™¨ï¼‰ä¸­ç¼“å­˜DNSç»“æœã€‚</p>
<p><em><strong>é‚£DNSç¼“å­˜å¦‚ä½•æå‡æ€§èƒ½ï¼Ÿ</strong></em></p>
<p>DNSè§£æçš„è¿‡ç¨‹æ˜¯å¿…é¡»çš„ï¼Œä½†æ¯æ¬¡è¯·æ±‚éƒ½è¿›è¡ŒDNSè§£æä¼šå¢åŠ é¢å¤–çš„æ—¶é—´å»¶è¿Ÿã€‚åˆ©ç”¨DNSç¼“å­˜å¯ä»¥é¿å…é‡å¤çš„è§£æè¯·æ±‚ï¼Œä»è€Œå‡å°‘åŠ è½½æ—¶é—´ï¼Œæå‡ç½‘ç«™çš„è®¿é—®é€Ÿåº¦ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œåˆ©ç”¨DNSç¼“å­˜å¯ä»¥å¸¦æ¥ä»¥ä¸‹ä¼˜åŒ–ï¼š</p>
<p><strong>å‡å°‘DNSæŸ¥è¯¢å»¶è¿Ÿ</strong>ï¼š
å½“åŸŸåçš„IPåœ°å€å·²ç»åœ¨ç¼“å­˜ä¸­ï¼Œæµè§ˆå™¨å¯ä»¥ç›´æ¥è¯»å–ç¼“å­˜ï¼Œé¿å…å†æ¬¡å‘DNSæœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚
å¦‚æœç¼“å­˜å‘½ä¸­ï¼ŒDNSè§£æå°±å¯ä»¥åœ¨å‡ æ¯«ç§’å†…å®Œæˆï¼Œè€Œå¦‚æœä¸å‘½ä¸­ï¼Œåˆ™éœ€è¦é€šè¿‡ç½‘ç»œæŸ¥è¯¢DNSæœåŠ¡å™¨ï¼Œè€—æ—¶ä¼šè¾ƒé•¿ã€‚</p>
<p><strong>å‡å°‘ç½‘ç»œè¯·æ±‚</strong>ï¼š
é€šè¿‡é¿å…é‡å¤çš„DNSæŸ¥è¯¢ï¼Œå‡å°‘äº†å®¢æˆ·ç«¯ä¸DNSæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ï¼Œå‡å°‘äº†ç½‘ç»œå»¶è¿Ÿã€‚ç‰¹åˆ«æ˜¯åœ¨ç”¨æˆ·è®¿é—®åŒä¸€ç½‘ç«™çš„å¤šä¸ªé¡µé¢æ—¶ï¼ŒDNSç¼“å­˜å¯ä»¥æ˜¾è‘—é™ä½æ¯æ¬¡é¡µé¢åŠ è½½çš„æ—¶é—´ã€‚</p>
<p><strong>åŠ é€Ÿå¤šåŸŸåèµ„æºåŠ è½½</strong>ï¼š
å¦‚æœä¸€ä¸ªé¡µé¢éœ€è¦åŠ è½½æ¥è‡ªå¤šä¸ªä¸åŒåŸŸåçš„èµ„æºï¼ˆä¾‹å¦‚ï¼ŒCDNä¸Šçš„å›¾ç‰‡ã€JavaScriptæ–‡ä»¶ã€APIè¯·æ±‚ç­‰ï¼‰ï¼ŒDNSç¼“å­˜å¯ä»¥é¿å…é‡å¤è§£æè¿™äº›åŸŸåï¼Œä»è€ŒåŠ é€Ÿèµ„æºåŠ è½½ã€‚</p>
<p><em><strong>ä½œä¸ºå‰ç«¯å¼€å‘äººå‘˜ï¼Œè™½ç„¶æˆ‘ä»¬ä¸èƒ½ç›´æ¥æ§åˆ¶DNSè§£æè¿‡ç¨‹ï¼Œä½†å¯ä»¥é‡‡å–ä¸€äº›æªæ–½ï¼Œåˆ©ç”¨DNSç¼“å­˜æ¥ä¼˜åŒ–æ€§èƒ½ï¼š</strong></em></p>
<p><strong>ä½¿ç”¨æŒä¹…çš„åŸŸåå’Œåˆç†çš„TTLè®¾ç½®</strong></p>
<ul>
<li>
<p>é€‰æ‹©ç¨³å®šçš„åŸŸåï¼šé€‰æ‹©é•¿æœŸå­˜åœ¨çš„ã€ç¨³å®šçš„åŸŸåï¼Œé¿å…é¢‘ç¹æ›´æ¢åŸŸåã€‚å› ä¸ºæ¯æ¬¡æ›´æ¢åŸŸåéƒ½ä¼šå¯¼è‡´DNSç¼“å­˜å¤±æ•ˆã€‚</p>
</li>
<li>
<p>åˆç†é…ç½®TTLå€¼ï¼šå¯¹äºCDNã€é™æ€èµ„æºç­‰ä¸é¢‘ç¹å˜åŒ–çš„èµ„æºï¼Œå¯ä»¥é…ç½®è¾ƒé•¿çš„TTLï¼ˆå¦‚å‡ å°æ—¶æˆ–å‡ å¤©ï¼‰ï¼Œè¿™æ ·æµè§ˆå™¨åœ¨ä¸€æ®µæ—¶é—´å†…ä¼šç¼“å­˜DNSè§£æç»“æœï¼Œé¿å…é¢‘ç¹è§£æã€‚å¯¹äºåŠ¨æ€å†…å®¹ï¼Œå¯ä»¥è®¾ç½®è¾ƒçŸ­çš„TTLï¼Œç¡®ä¿DNSè§£æç»“æœä¿æŒæœ€æ–°ã€‚</p>
</li>
</ul>
<p><strong>å‡å°‘è·¨åŸŸDNSæŸ¥è¯¢</strong></p>
<ul>
<li>
<p>é¿å…è¿‡å¤šçš„ç¬¬ä¸‰æ–¹åŸŸåï¼šå°½é‡å‡å°‘é¡µé¢ä¸­è·¨å¤šä¸ªåŸŸåçš„è¯·æ±‚ï¼ˆæ¯”å¦‚åŠ è½½ä¸åŒåŸŸåä¸‹çš„å›¾ç‰‡ã€å­—ä½“ã€å¹¿å‘Šç­‰ï¼‰ã€‚æ¯ä¸ªæ–°çš„åŸŸåéƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡DNSè§£æã€‚å¦‚æœè¿™äº›åŸŸåéƒ½ç¼“å­˜å¾—ä¸å¥½ï¼Œä¼šå¢åŠ DNSæŸ¥è¯¢çš„æ¬¡æ•°å’Œå»¶è¿Ÿã€‚</p>
</li>
<li>
<p>åˆå¹¶è¯·æ±‚ï¼šå°½é‡å°†å¤šä¸ªé™æ€èµ„æºåˆå¹¶åˆ°ä¸€ä¸ªåŸŸåä¸‹ï¼Œè¿™æ ·æµè§ˆå™¨åªéœ€è¦è§£æä¸€æ¬¡DNSï¼Œå‡å°‘é¢å¤–çš„å»¶è¿Ÿã€‚</p>
</li>
</ul>
<p><strong>åˆ©ç”¨DNSé¢„è§£æï¼ˆDNS Prefetchï¼‰</strong></p>
<p><strong>DNSé¢„è§£æ</strong>æ˜¯HTMLä¸­çš„ä¸€ä¸ªæŠ€æœ¯ï¼Œå¯ä»¥è®©æµè§ˆå™¨æå‰è§£æå°†è¦è¯·æ±‚çš„åŸŸåã€‚é€šè¿‡<code>&lt;link rel="dns-prefetch"&gt;</code>æ ‡ç­¾ï¼Œæµè§ˆå™¨å¯ä»¥æå‰è§£æç‰¹å®šåŸŸåï¼Œä»è€ŒåŠ å¿«åç»­è¯·æ±‚çš„å“åº”é€Ÿåº¦ã€‚</p>
<p>ä¸¾ä¾‹ï¼šå¦‚æœä½ çŸ¥é“ç½‘ç«™ä¼šåŠ è½½å¤–éƒ¨CDNèµ„æºï¼Œå¯ä»¥åœ¨é¡µé¢ä¸­æå‰æŒ‡å®šDNSé¢„è§£æã€‚</p>
<pre><code class="hljs language-html" lang="html">     <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.example.com"</span>&gt;</span>
</code></pre>
<p>è¿™æ ·ï¼Œåœ¨æµè§ˆå™¨åŠ è½½é¡µé¢æ—¶ï¼Œä¼šæå‰è§£æ<code>cdn.example.com</code>çš„IPåœ°å€ï¼Œå‡å°‘åç»­å¯¹è¯¥åŸŸåçš„DNSè§£ææ—¶é—´ã€‚</p>
<p><strong>ä½¿ç”¨HTTP/2ï¼ˆå¤šè·¯å¤ç”¨ï¼‰</strong></p>
<p><strong>HTTP/2åè®®</strong>å…è®¸å¤šä¸ªè¯·æ±‚å…±äº«ä¸€ä¸ªTCPè¿æ¥å¹¶è¿›è¡Œå¤šè·¯å¤ç”¨ï¼Œå‡å°‘å› å¤šä¸ªåŸŸåå¼•å‘çš„DNSæŸ¥è¯¢å»¶è¿Ÿã€‚é€šè¿‡ä½¿ç”¨HTTP/2ï¼Œå¯ä»¥æé«˜å¤šä¸ªåŸŸåä¸‹èµ„æºåŠ è½½çš„å¹¶è¡Œæ€§ï¼Œå¹¶ä¸”é€šè¿‡è¾ƒå°‘çš„TCPè¿æ¥å‡å°‘DNSè§£æçš„æ¬¡æ•°ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå½“ä½ ä½¿ç”¨å¤šä¸ªåŸŸååŠ è½½èµ„æºæ—¶ï¼Œæµè§ˆå™¨å¿…é¡»åˆ†åˆ«ä¸ºæ¯ä¸ªåŸŸåè¿›è¡ŒDNSè§£æã€‚HTTP/2å¯ä»¥ä¼˜åŒ–è¿™ä¸€ç‚¹ï¼Œé™ä½åŸŸåè§£æå’Œå»ºç«‹è¿æ¥çš„æ—¶é—´ã€‚</p>
<p><strong>åˆç†ä½¿ç”¨CDN</strong></p>
<p><strong>CDNç¼“å­˜</strong>ï¼šä½¿ç”¨CDNå¯ä»¥å°†é™æ€èµ„æºåˆ†å‘åˆ°ç¦»ç”¨æˆ·æ›´è¿‘çš„æœåŠ¡å™¨ï¼Œå¹¶ä¸”CDNä¼šç¼“å­˜DNSè§£æç»“æœã€‚è¿™æ ·ï¼Œå½“ç”¨æˆ·è¯·æ±‚ç›¸åŒèµ„æºæ—¶ï¼Œä¸ä»…å¯ä»¥åŠ é€Ÿèµ„æºåŠ è½½ï¼ŒDNSè§£æä¹Ÿä¼šè¢«ç¼“å­˜ï¼Œå‡å°‘äº†DNSæŸ¥è¯¢çš„æ¬¡æ•°å’Œå»¶è¿Ÿã€‚</p>
<p><strong>è®¾ç½®å’Œç®¡ç†å­åŸŸå</strong></p>
<ul>
<li>ä½¿ç”¨å­åŸŸåï¼šå¦‚æœæœ‰å¤šä¸ªç‹¬ç«‹çš„å­ç³»ç»Ÿæˆ–æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡å­åŸŸåæ¥æ‹†åˆ†èµ„æºï¼Œç¼“å­˜ä¸åŒåŸŸåçš„DNSç»“æœã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥ä¸ºé™æ€èµ„æºã€APIæœåŠ¡ã€å›¾ç‰‡ç­‰åˆ†åˆ«è®¾ç½®ä¸åŒçš„å­åŸŸåï¼Œå¦‚ <code>assets.example.com</code>ã€<code>api.example.com</code>ã€<code>images.example.com</code> ç­‰ã€‚</li>
<li>é¿å…é¢‘ç¹ä¿®æ”¹DNSè®°å½•ï¼šå¦‚æœé¢‘ç¹æ›´æ¢å­åŸŸåçš„DNSè®°å½•ä¼šå¯¼è‡´DNSç¼“å­˜è¢«æ¸…ç©ºï¼Œä»è€Œå¢åŠ è§£æå»¶è¿Ÿã€‚å› æ­¤ï¼Œè¦è°¨æ…ç®¡ç†DNSè®°å½•å’ŒTTLè®¾ç½®ã€‚</li>
</ul>
<p>é€šè¿‡åˆç†åˆ©ç”¨<strong>DNSç¼“å­˜</strong>ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰æ•ˆå‡å°‘DNSè§£ææ—¶é—´ï¼Œæé«˜é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚å…·ä½“ä¼˜åŒ–æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>é€‰æ‹©é•¿æœŸç¨³å®šçš„åŸŸå</strong>ï¼Œå¹¶åˆç†è®¾ç½®TTLå€¼ï¼›</li>
<li><strong>å‡å°‘è·¨åŸŸDNSæŸ¥è¯¢</strong>ï¼Œé€šè¿‡åˆå¹¶èµ„æºå‡å°‘DNSè§£ææ¬¡æ•°ï¼›</li>
<li><strong>åˆ©ç”¨DNSé¢„è§£æ</strong>åŠ é€Ÿå¤–éƒ¨èµ„æºåŠ è½½ï¼›</li>
<li><strong>ä½¿ç”¨HTTP/2åè®®</strong>ä¼˜åŒ–å¤šä¸ªèµ„æºåŠ è½½ï¼›</li>
<li><strong>ä½¿ç”¨CDN</strong>åŠ é€Ÿé™æ€èµ„æºåŠ è½½ï¼ŒåŒæ—¶ç¼“å­˜DNSç»“æœã€‚</li>
</ul>
<p>é€šè¿‡è¿™äº›æ–¹å¼ï¼Œå‰ç«¯å¼€å‘äººå‘˜èƒ½å¤Ÿæœ‰æ•ˆåˆ©ç”¨DNSç¼“å­˜æå‡ç½‘ç«™çš„æ€§èƒ½ï¼Œå‡å°‘å»¶è¿Ÿï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚</p>
<p><strong>3. CDNç¼“å­˜</strong></p>
<p><strong>åˆ©ç”¨CDNç¼“å­˜åŠ é€Ÿèµ„æºåŠ è½½</strong><br/>
CDNé€šè¿‡å°†èµ„æºç¼“å­˜åˆ°ç¦»ç”¨æˆ·æ›´è¿‘çš„èŠ‚ç‚¹ï¼Œä½¿å¾—é™æ€èµ„æºå¯ä»¥ä»æœ€è¿‘çš„æœåŠ¡å™¨è·å–ï¼Œä»è€ŒåŠ å¿«åŠ è½½é€Ÿåº¦å¹¶å‡è½»æºæœåŠ¡å™¨çš„è´Ÿæ‹…ã€‚ä½¿ç”¨CDNç¼“å­˜å¯ä»¥æ˜¾è‘—æé«˜ç½‘ç«™çš„å“åº”é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯å¯¹äºè·¨åœ°åŸŸçš„è®¿é—®ã€‚</p>
<p><strong>ä¸¾ä¾‹</strong>ï¼šå¯¹äºå…¨çƒè®¿é—®çš„ç½‘ç«™ï¼Œéƒ¨ç½²CDNç¼“å­˜ï¼Œå¯ä»¥ç¡®ä¿èµ„æºçš„å¿«é€ŸåŠ è½½ï¼Œé¿å…é‡å¤è¯·æ±‚æºæœåŠ¡å™¨ã€‚</p>
<p><strong>4. Service Workerç¼“å­˜</strong></p>
<p><strong>å®ç°ç¦»çº¿ç¼“å­˜</strong><br/>
ä½¿ç”¨Service Workerå¯ä»¥ç¼“å­˜é¡µé¢çš„èµ„æºï¼Œç”šè‡³å®ç°ç¦»çº¿è®¿é—®åŠŸèƒ½ã€‚å½“ç”¨æˆ·æ²¡æœ‰ç½‘ç»œè¿æ¥æ—¶ï¼ŒService Workerå¯ä»¥ä»ç¼“å­˜ä¸­è·å–èµ„æºï¼Œä½¿å¾—åº”ç”¨ä»ç„¶å¯ä»¥æ­£å¸¸æ˜¾ç¤ºã€‚</p>
<p><strong>ä¸¾ä¾‹</strong>ï¼šé€šè¿‡Service Workerç¼“å­˜é¦–é¡µã€å›¾æ ‡ã€æ ·å¼æ–‡ä»¶ç­‰èµ„æºï¼Œç¡®ä¿å³ä½¿åœ¨æ²¡æœ‰ç½‘ç»œçš„æƒ…å†µä¸‹ï¼Œç”¨æˆ·ä¹Ÿèƒ½è®¿é—®åº”ç”¨çš„ä¸€éƒ¨åˆ†å†…å®¹ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"> self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'install'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
   event.<span class="hljs-title function_">waitUntil</span>(
     caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">'my-cache'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
       <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">addAll</span>([
         <span class="hljs-string">'/index.html'</span>,
         <span class="hljs-string">'/style.css'</span>,
         <span class="hljs-string">'/app.js'</span>,
         <span class="hljs-string">'/logo.png'</span>
       ]);
     })
   );
 });

 self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
   event.<span class="hljs-title function_">respondWith</span>(
     caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
       <span class="hljs-keyword">return</span> response || <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>);
     })
   );
 });
</code></pre>
<p><strong>5. æœ¬åœ°å­˜å‚¨ç¼“å­˜</strong></p>
<p><strong>åˆ©ç”¨LocalStorageå’ŒSessionStorageç¼“å­˜æ•°æ®</strong><br/>
ä½¿ç”¨æµè§ˆå™¨çš„<code>localStorage</code>æˆ–<code>sessionStorage</code>æ¥å­˜å‚¨é¡µé¢ä¸­çš„éæ•æ„Ÿæ•°æ®ï¼Œå¦‚ç”¨æˆ·è®¾ç½®ã€æµè§ˆå†å²ç­‰ï¼Œå¯ä»¥é¿å…æ¯æ¬¡åŠ è½½é¡µé¢æ—¶é‡æ–°è¯·æ±‚ç›¸åŒçš„æ•°æ®ï¼Œå‡å°‘äº†è¯·æ±‚æ—¶é—´ã€‚</p>
<p><strong>ä¸¾ä¾‹</strong>ï¼šå­˜å‚¨ç”¨æˆ·çš„ä¸»é¢˜è‰²ã€ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦æ•°æ®ç­‰ï¼Œä»¥ä¾¿åœ¨é¡µé¢åˆ·æ–°åæ¢å¤ã€‚</p>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-comment">// ä¿å­˜æ•°æ®</span>
 <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'theme'</span>, <span class="hljs-string">'dark'</span>);

 <span class="hljs-comment">// è·å–æ•°æ®</span>
 <span class="hljs-keyword">const</span> theme = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'theme'</span>);
</code></pre>
<p><strong>5. å†…å­˜ç¼“å­˜ï¼ˆIn-memory Cacheï¼‰</strong></p>
<ul>
<li>
<p><strong>ä½¿ç”¨å†…å­˜ç¼“å­˜æé«˜è®¿é—®é€Ÿåº¦</strong><br/>
å†…å­˜ç¼“å­˜ï¼ˆå¦‚<code>Redis</code>ã€<code>Memcached</code>ï¼‰å­˜å‚¨çš„æ˜¯å†…å­˜ä¸­çš„æ•°æ®ï¼Œè®¿é—®é€Ÿåº¦æå¿«ã€‚é€šå¸¸ç”¨äºç¼“å­˜æ•°æ®åº“æŸ¥è¯¢ç»“æœã€APIå“åº”ç­‰é«˜é¢‘æ¬¡è¯·æ±‚çš„æ•°æ®ï¼Œé¿å…é‡å¤è®¡ç®—æˆ–é‡å¤æŸ¥è¯¢æ•°æ®åº“ã€‚</p>
<p><strong>ä¸¾ä¾‹</strong>ï¼šç¼“å­˜APIè¯·æ±‚çš„å“åº”ï¼Œé¿å…æ¯æ¬¡éƒ½æŸ¥è¯¢æ•°æ®åº“ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªäº§å“è¯¦æƒ…é¡µçš„APIå¯ä»¥ç¼“å­˜è¯¥é¡µé¢çš„å“åº”ç»“æœï¼Œåœ¨ä¸€å®šæ—¶é—´å†…è¿”å›ç¼“å­˜æ•°æ®ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½è®¿é—®æ•°æ®åº“ã€‚</p>
</li>
</ul>
<p><strong>7. åˆ©ç”¨ç‰ˆæœ¬æ§åˆ¶å’Œå“ˆå¸Œ</strong></p>
<p><strong>ç‰ˆæœ¬æ§åˆ¶èµ„æºå’Œç¼“å­˜å¤±æ•ˆ</strong><br/>
é€šè¿‡ä¸ºé™æ€èµ„æºæ–‡ä»¶ï¼ˆå¦‚JSã€CSSã€å›¾ç‰‡ç­‰ï¼‰æ·»åŠ ç‰ˆæœ¬å·æˆ–å“ˆå¸Œå€¼ï¼Œå¯ä»¥ç¡®ä¿æ–‡ä»¶æ›´æ–°æ—¶ï¼Œæµè§ˆå™¨èƒ½è‡ªåŠ¨æ£€æµ‹å¹¶åŠ è½½æ–°ç‰ˆæœ¬èµ„æºï¼Œè€Œä¸è¢«ç¼“å­˜æ—§ç‰ˆæœ¬ã€‚</p>
<p><strong>ä¸¾ä¾‹</strong>ï¼šå½“èµ„æºæ–‡ä»¶æ›´æ”¹æ—¶ï¼Œé€šè¿‡ä¿®æ”¹æ–‡ä»¶åï¼ˆå¦‚<code>app.123456.js</code>ï¼‰æ¥ç¡®ä¿æµè§ˆå™¨åŠ è½½æœ€æ–°ç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç¼“å­˜çš„æ—§æ–‡ä»¶ã€‚</p>
<p>æ€»ä¹‹ç¼“å­˜æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸­çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œèƒ½å¤Ÿæ˜¾è‘—å‡å°‘ç½‘ç»œè¯·æ±‚ï¼Œæå‡åŠ è½½é€Ÿåº¦ï¼Œå‡å°‘å¸¦å®½æ¶ˆè€—ï¼Œæœ€ç»ˆä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚é€šè¿‡åˆç†ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜ã€CDNç¼“å­˜ã€å†…å­˜ç¼“å­˜ã€æœ¬åœ°å­˜å‚¨ã€Service Workerç¼“å­˜ç­‰æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥å¤§å¹…æé«˜ç½‘é¡µçš„æ€§èƒ½ï¼Œç¡®ä¿ç½‘ç«™åœ¨ä¸åŒåœºæ™¯ä¸‹çš„å¿«é€Ÿå“åº”ã€‚</p>
<h3 data-id="heading-17">1.3 è¯·æ±‚å¿«ä¸€ç‚¹</h3>
<h4 data-id="heading-18">1.3.1 è¯·æ±‚å¿«ä¸€ç‚¹ï¼šCDNçš„ä¼˜åŒ–</h4>
<p>æˆ‘ä»¬å‰é¢çš„ç¼“å­˜ä¸€èŠ‚ä¸­ï¼Œå·²ç»ç®€å•ä»‹ç»è¿‡cdnç¼“å­˜ï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬æ¥èŠä¸€èŠï¼Œå¦‚ä½•å¯¹cdnè¿›è¡Œä¼˜åŒ–ä»è€Œä½¿å¾—è¯·æ±‚å¾—å¿«ä¸€ç‚¹ã€‚</p>
<p><em><strong>ä»€ä¹ˆæ˜¯cdn?</strong></em></p>
<p>ç®€å•è¯´å°±æ˜¯æŠŠä¸€äº›é™æ€èµ„æºæ”¾åˆ°ä¸åŒåœ°ç†ä½ç½®çš„æœåŠ¡å™¨ä¸­ï¼Œç”¨æˆ·è®¿é—®çš„æ—¶å€™ï¼Œå°±è®¿é—®æœ€è¿‘çš„é‚£ä¸ªæœåŠ¡å™¨çš„èµ„æºï¼Œé€Ÿåº¦å°±ä¼šå¿«å¾ˆå¤šã€‚</p>
<p><em><strong>é‚£ä»€ä¹ˆæ˜¯é™æ€èµ„æºï¼Ÿ</strong></em></p>
<p>å°±æ˜¯å¦‚jsã€cssã€html ã€å›¾ç‰‡ç­‰ä¸éœ€è¦æœåŠ¡å™¨å³æ—¶è®¡ç®—çš„èµ„æºå°±æ˜¯è®¡ç®—èµ„æºã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ è¯·æ±‚ä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£è¿”å›æœ€æ–°çš„æ•°æ®å¦‚ï¼šä½ç½®ä¿¡æ¯ï¼Œå®æ—¶çš„ç”»é¢ç­‰ï¼Œè¿™ç§å°±ä¸æ˜¯é™æ€èµ„æºã€‚</p>
<p><em><strong>é‚£æˆ‘ä»¬åº”è¯¥å®æ–½ä»€ä¹ˆè¡Œä¸ºæ¥ä¼˜åŒ–cdnå‘¢ï¼Ÿ</strong></em></p>
<ul>
<li>
<p><strong>æ ¹æ®ç”¨æˆ·çš„åœ°ç†ä½ç½®åˆ†å¸ƒé€‰æ‹©cdnçš„åœ°ç†ä½ç½®</strong></p>
<p>å¤§å¤šæ•°çš„cdnäº‘æœåŠ¡éƒ½æœ‰è´Ÿè½½æœåŠ¡å™¨éå¸ƒå¤§éƒ¨åˆ†åœ°åŒºï¼Œä½†æ˜¯éœ€è¦æ‰‹åŠ¨åˆ‡æ¢ï¼Œæ‰€ä»¥åœ¨é€‰æ‹©cdnæœåŠ¡çš„æ—¶å€™ï¼Œè¦çœ‹ç”¨æˆ·çš„åœ°ç†ä½ç½®åˆ†å¸ƒï¼ŒåŸºäºç”¨æˆ·æ¥é€‰æ‹©cdnæœåŠ¡å™¨ã€‚</p>
</li>
<li>
<p><strong>cdnæœåŠ¡å™¨åŸŸåå’Œä¸šåŠ¡åŸŸåä¸åŒçš„å¥½ä¸ä¸å¥½</strong></p>
<p>cdnæœåŠ¡å™¨çš„åŸŸåå’Œä¸šåŠ¡åŸŸåä¸ä¸€æ ·ä¼šå¯¼è‡´è·¨åŸŸçš„é—®é¢˜ï¼Œå¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œè§£å†³è·¨åŸŸé—®é¢˜æ˜¯ä¸€ä»¶æ¯”è¾ƒç¹ççš„äº‹æƒ…ï¼Œä½†æ˜¯å¯¹ç”¨æˆ·æ²¡æœ‰ç›´æ¥çš„ä¸è‰¯ä½“éªŒã€‚ä½†ç”±æ­¤äº§ç”Ÿçš„å¥½å¤„ä¹Ÿæ˜¯å¤§å¤§çš„ã€‚ç›¸åŒçš„åŸŸåä¸‹ï¼Œè¯·æ±‚é™æ€èµ„æºéƒ½ä¼šæºå¸¦cookie,ä¸åŒçš„åŸŸååè€Œä¸éœ€è¦ï¼Œå¦åˆ™è¯·æ±‚æ¯ä¸ªé™æ€èµ„æºéƒ½è¦æºå¸¦cookieè¿™å¯¹å¸¦å®½ä¹Ÿæ˜¯ä¸€ç§æµªè´¹ã€‚</p>
</li>
<li>
<p><strong>å¼€å¯å‹ç¼©ç®—æ³•</strong></p>
<p>cdnæœåŠ¡å™¨ä¹Ÿæ˜¯ä¸€ä¸ªæ ‡å‡†æœåŠ¡å™¨ï¼Œé‚£æˆ‘ä»¬è‡ªç„¶ä¹Ÿè¦å¼€å¯å‹ç¼©ï¼Œä¾‹å¦‚ <code>gzip</code> <code>br</code>ç­‰å‹ç¼©åŠŸèƒ½ï¼Œèƒ½èŠ‚çœèµ„æºä½“ç§¯ï¼Œæå‡åŠ è½½é€Ÿç‡ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„httpåè®®</strong></p>
<p>è¿™ä¸ªåœ¨ä¸‹ä¸€èŠ‚ä¼šè¯¦ç»†è®²ï¼Œä¸èµ˜è¿°ï¼Œå­—é¢æ„æ€ã€‚</p>
</li>
</ul>
<hr/>
<h4 data-id="heading-19">1.3.2 è¯·æ±‚å¿«ä¸€ç‚¹ï¼š http2</h4>
<p>HTTPåè®®ç»å†äº†å¤šæ¬¡è¿­ä»£ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½åœ¨å‰ä¸€ä¸ªç‰ˆæœ¬çš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œè§£å†³äº†æ€§èƒ½ç“¶é¢ˆã€æé«˜äº†ç”¨æˆ·ä½“éªŒï¼Œå¹¶é€‚åº”äº†äº’è”ç½‘ä¸æ–­å‘å±•çš„éœ€æ±‚ã€‚ä¸‹é¢æ˜¯HTTPå„ä¸ªç‰ˆæœ¬çš„è¯¦ç»†å‘å±•è¿‡ç¨‹å’Œå…¶ç‰¹æ€§ï¼š</p>
<p><strong>1. HTTP/0.9 (1991å¹´) â€” åˆä»£åè®®</strong></p>
<ul>
<li>
<p><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>è¯·æ±‚æ–¹å¼</strong>ï¼šåªæœ‰<strong>GET</strong>æ–¹æ³•ï¼Œç”¨äºè¯·æ±‚æ–‡æœ¬èµ„æºï¼ˆHTMLï¼‰ã€‚</li>
<li><strong>å“åº”æ ¼å¼</strong>ï¼šåªæ”¯æŒ<strong>çº¯æ–‡æœ¬</strong>ï¼ˆæ²¡æœ‰MIMEç±»å‹ï¼‰ã€‚</li>
<li><strong>æ²¡æœ‰è¯·æ±‚å¤´</strong>ï¼šæ²¡æœ‰è¯·æ±‚å¤´å’Œå“åº”å¤´ï¼Œæ‰€æœ‰çš„è¯·æ±‚å’Œå“åº”éƒ½æ˜¯ç®€å•çš„æ–‡æœ¬å†…å®¹ã€‚</li>
<li><strong>ç®€å•è¿æ¥</strong>ï¼šæ¯ä¸ªè¯·æ±‚å’Œå“åº”ç»“æŸåï¼Œéƒ½ä¼šå…³é—­è¿æ¥ã€‚</li>
</ul>
</li>
<li>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç”¨äºæœ€åˆçš„ç½‘é¡µæµè§ˆï¼ŒåŠŸèƒ½éå¸¸ç®€å•ï¼Œåªé€‚ç”¨äºæ–‡æœ¬æ–‡ä»¶ã€‚</p>
</li>
</ul>
<p><strong>2. HTTP/1.0 (1996å¹´) â€” æ ‡å‡†åŒ–åˆæ­¥å®Œå–„</strong></p>
<ul>
<li>
<p><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>è¯·æ±‚æ–¹å¼</strong>ï¼šé™¤äº†GETï¼Œè¿˜æ”¯æŒ<strong>POST</strong>æ–¹æ³•ï¼Œå¯ä»¥å‘é€æ•°æ®ã€‚</li>
<li><strong>MIMEç±»å‹</strong>ï¼šæ”¯æŒä¼ è¾“å¤šç§æ ¼å¼çš„æ•°æ®ï¼ˆå¦‚HTMLã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ï¼‰ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­æ ‡æ˜æ•°æ®ç±»å‹ï¼ˆå¦‚ <code>Content-Type</code>ï¼‰ã€‚</li>
<li><strong>è¯·æ±‚å¤´å’Œå“åº”å¤´</strong>ï¼šå¼•å…¥äº†è¯·æ±‚å¤´å’Œå“åº”å¤´ï¼Œå¯ä»¥æºå¸¦æ›´å¤šçš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ä»£ç†ä¿¡æ¯ã€æœåŠ¡å™¨ä¿¡æ¯ã€ç¼“å­˜æ§åˆ¶ç­‰ã€‚</li>
<li><strong>çŸ­è¿æ¥</strong>ï¼šæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºç«‹æ–°çš„TCPè¿æ¥ï¼Œå®Œæˆæ•°æ®ä¼ è¾“åå…³é—­è¿æ¥ã€‚</li>
</ul>
</li>
<li>
<p><strong>é—®é¢˜</strong>ï¼šå°½ç®¡å¼•å…¥äº†æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä½†ç”±äºæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦å•ç‹¬å»ºç«‹TCPè¿æ¥ï¼Œé€ æˆäº†å¤§é‡çš„å¼€é”€ã€‚</p>
</li>
</ul>
<p><em><strong>æ— æ³•å¤ç”¨è¿æ¥æ˜¯ä¸€ä¸ª1.0ç‰ˆæœ¬æ¯”è¾ƒå¤§çš„é—®é¢˜</strong></em></p>
<p>HTTP1.0ä¸ºæ¯ä¸ªè¯·æ±‚å•ç‹¬æ–°å¼€ä¸€ä¸ªTCPè¿æ¥</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/876cde4cafea4a0783b128bb917da5ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxlZWVlZXg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100871&amp;x-signature=HUXvCClDHEa9r6Isvp3BjBflwwI%3D" alt="" loading="lazy"/></p>
<p>ç”±äºæ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„è¿æ¥ï¼Œå› æ­¤ä¼šå¸¦æ¥ä¸‹é¢çš„é—®é¢˜ï¼š</p>
<ol>
<li>è¿æ¥çš„å»ºç«‹å’Œé”€æ¯éƒ½ä¼šå ç”¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„èµ„æºï¼Œé€ æˆå†…å­˜èµ„æºçš„æµªè´¹</li>
<li>è¿æ¥çš„å»ºç«‹å’Œé”€æ¯éƒ½ä¼šæ¶ˆè€—æ—¶é—´ï¼Œé€ æˆå“åº”æ—¶é—´çš„æµªè´¹</li>
<li>æ— æ³•å……åˆ†åˆ©ç”¨å¸¦å®½ï¼Œé€ æˆå¸¦å®½èµ„æºçš„æµªè´¹</li>
</ol>
<blockquote>
<p>TCPåè®®çš„ç‰¹ç‚¹æ˜¯ã€Œæ…¢å¯åŠ¨ã€ï¼Œå³ä¸€å¼€å§‹ä¼ è¾“çš„æ•°æ®é‡å°‘ï¼Œä¸€æ®µæ—¶é—´ä¹‹åè¾¾åˆ°ä¼ è¾“çš„å³°å€¼ã€‚è€Œä¸Šé¢è¿™ç§åšæ³•ï¼Œä¼šå¯¼è‡´å¤§é‡çš„è¯·æ±‚åœ¨TCPè¾¾åˆ°ä¼ è¾“å³°å€¼å‰å°±è¢«é”€æ¯äº†</p>
</blockquote>
<p>ä¸ºäº†è§£å†³1.0çš„é—®é¢˜äºæ˜¯1.1ç‰ˆæœ¬å‡ºç°äº†</p>
<p><strong>3. HTTP/1.1 (1997å¹´) â€” å¤§è§„æ¨¡åº”ç”¨</strong></p>
<p>HTTP/1.1æ˜¯æœ€å¹¿æ³›ä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œè¿›è¡Œäº†å¤§é‡æ”¹è¿›ï¼š</p>
<ul>
<li>
<p><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>æŒä¹…è¿æ¥ï¼ˆKeep-Aliveï¼‰</strong> ï¼šé»˜è®¤å¼€å¯é•¿è¿æ¥ï¼Œå¯ä»¥å¤ç”¨TCPè¿æ¥è¿›è¡Œå¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œé¿å…äº†é¢‘ç¹å»ºç«‹å’Œå…³é—­TCPè¿æ¥çš„å¼€é”€ã€‚</li>
<li><strong>ç®¡é“åŒ–ï¼ˆPipeliningï¼‰</strong> ï¼šå®¢æˆ·ç«¯å¯ä»¥åœ¨ç­‰å¾…å“åº”çš„åŒæ—¶ï¼Œå‘é€å¤šä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨æŒ‰é¡ºåºå“åº”è¿™äº›è¯·æ±‚ï¼ˆå°½ç®¡å®é™…ä¸Šï¼Œå¾ˆå¤šæµè§ˆå™¨ç›´åˆ°è¾ƒæ™šæ‰æ”¯æŒè¿™ä¸€åŠŸèƒ½ï¼‰ã€‚</li>
<li><strong>åˆ†å—ä¼ è¾“ï¼ˆChunked Transfer Encodingï¼‰</strong> ï¼šå…è®¸ä¸ç¡®å®šæ–‡ä»¶å¤§å°çš„æ•°æ®åˆ†å—ä¼ è¾“ï¼Œæ”¯æŒå®æ—¶ä¼ è¾“å†…å®¹ï¼ˆä¾‹å¦‚æµåª’ä½“ï¼‰ã€‚</li>
<li><strong>ç¼“å­˜æ§åˆ¶</strong>ï¼šæ–°å¢äº†æ›´å¼ºå¤§çš„ç¼“å­˜æœºåˆ¶ï¼Œæ”¯æŒå¦‚ <code>Cache-Control</code>ã€<code>Etag</code>ã€<code>Last-Modified</code> ç­‰å¤´éƒ¨ï¼Œæœ‰æ•ˆæé«˜äº†èµ„æºçš„å¤ç”¨æ€§ã€‚</li>
<li><strong>è™šæ‹Ÿä¸»æœº</strong>ï¼šHTTP/1.1æ”¯æŒé€šè¿‡<strong>Host</strong>å¤´éƒ¨åŒºåˆ†ä¸åŒçš„è™šæ‹Ÿä¸»æœºï¼Œå®ç°äº†åŒä¸€IPåœ°å€ä¸‹å¤šä¸ªç½‘ç«™çš„æ‰˜ç®¡ã€‚</li>
<li><strong>æ›´å¤šçš„è¯·æ±‚æ–¹æ³•</strong>ï¼šé™¤äº†GETå’ŒPOSTï¼Œè¿˜æ”¯æŒäº†å¦‚PUTã€DELETEç­‰HTTPæ–¹æ³•ï¼Œä¸°å¯Œäº†èµ„æºçš„æ“ä½œæ–¹å¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ul>
<li><strong>é˜Ÿå¤´é˜»å¡ï¼ˆHead-of-Line Blockingï¼‰</strong> ï¼šå°½ç®¡æ”¯æŒç®¡é“åŒ–ï¼Œä½†å¤šä¸ªè¯·æ±‚ä»ç„¶ä¼šåœ¨åŒä¸€è¿æ¥ä¸­æŒ‰é¡ºåºå¤„ç†ã€‚å¦‚æœæŸä¸ªè¯·æ±‚å»¶è¿Ÿï¼Œåç»­çš„è¯·æ±‚ä¹Ÿä¼šå—åˆ°å½±å“ã€‚</li>
<li><strong>å¤šä¸ªTCPè¿æ¥</strong>ï¼šè™½ç„¶å¼€å¯äº†é•¿è¿æ¥ï¼Œä½†ç”±äºTCPè¿æ¥çš„å¹¶å‘é™åˆ¶ï¼Œæµè§ˆå™¨ä»ç„¶ä¼šä¸ºåŒä¸€ä¸ªåŸŸååˆ›å»ºå¤šä¸ªè¿æ¥ï¼Œå¯¼è‡´å¼€é”€ã€‚</li>
</ul>
</li>
</ul>
<p>1.1ç‰ˆæœ¬æœ€ä¸»è¦æ˜¯æ”¹è¿›äº†é»˜è®¤å¼€å¯é•¿é“¾æ¥ä¸ºäº†è§£å†³HTTP1.0çš„é—®é¢˜ï¼Œ<strong>HTTP1.1é»˜è®¤å¼€å¯é•¿è¿æ¥</strong>ï¼Œå³è®©åŒä¸€ä¸ªTCPè¿æ¥æœåŠ¡äºå¤šä¸ªè¯·æ±‚-å“åº”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7d005d4c36c4a2ea151e76a1fe8ca6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxlZWVlZXg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100871&amp;x-signature=A0y4Sg2oHVl92vpCtlXjSLBCk9w%3D" alt="" loading="lazy"/></p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¤šæ¬¡è¯·æ±‚å“åº”å¯ä»¥å…±äº«åŒä¸€ä¸ªTCPè¿æ¥ï¼Œè¿™ä¸ä»…å‡å°‘äº†TCPçš„æ¡æ‰‹å’ŒæŒ¥æ‰‹æ—¶é—´ï¼ŒåŒæ—¶å¯ä»¥å……åˆ†åˆ©ç”¨TCPã€Œæ…¢å¯åŠ¨ã€çš„ç‰¹ç‚¹ï¼Œæœ‰æ•ˆçš„åˆ©ç”¨å¸¦å®½ã€‚</p>
<p>å®é™…ä¸Šï¼Œåœ¨HTTP1.0åæœŸï¼Œè™½ç„¶æ²¡æœ‰å®˜æ–¹æ ‡å‡†ï¼Œä½†å¼€å‘è€…ä»¬æ…¢æ…¢å½¢æˆäº†ä¸€ä¸ªå…±è¯†ï¼š</p>
<p><strong>åªè¦è¯·æ±‚å¤´ä¸­åŒ…å«Connection:keep-aliveï¼Œå°±è¡¨ç¤ºå®¢æˆ·ç«¯å¸Œæœ›å¼€å¯é•¿è¿æ¥ï¼Œå¸Œæœ›æœåŠ¡å™¨å“åº”åä¸è¦å…³é—­TCPè¿æ¥ã€‚å¦‚æœæœåŠ¡å™¨è®¤å¯è¿™ä¸€è¡Œä¸ºï¼Œå³å¯ä¿æŒTCPè¿æ¥ã€‚</strong></p>
<p>å½“éœ€è¦çš„æ—¶å€™ï¼Œä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥å…³é—­TCPè¿æ¥</p>
<blockquote>
<p>æ‰©å±•çŸ¥è¯†</p>
<p>è¿æ¥å…³é—­çš„æƒ…å†µä¸»è¦æœ‰ä¸‰ç§ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯åœ¨æŸä¸€æ¬¡è¯·æ±‚ä¸­è®¾ç½®äº†<code>Connection:close</code>ï¼ŒæœåŠ¡å™¨æ”¶åˆ°æ­¤è¯·æ±‚åï¼Œå“åº”ç»“æŸç«‹å³å…³é—­TCP</li>
<li>åœ¨æ²¡æœ‰è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šä¸æ–­å¯¹æœåŠ¡å™¨è¿›è¡Œå¿ƒè·³æ£€æµ‹ï¼ˆä¸€èˆ¬æ¯éš”1ç§’ï¼‰ã€‚ä¸€æ—¦å¿ƒè·³æ£€æµ‹åœæ­¢ï¼ŒæœåŠ¡å™¨ç«‹å³å…³é—­TCP</li>
<li>å½“å®¢æˆ·ç«¯é•¿æ—¶é—´æ²¡æœ‰æ–°çš„è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¼šä¸»åŠ¨å…³é—­TCPã€‚è¿ç»´äººå‘˜å¯ä»¥è®¾ç½®è¯¥æ—¶é—´ã€‚</li>
</ol>
</blockquote>
<p>ç”±äºä¸€ä¸ªTCPè¿æ¥å¯ä»¥æ‰¿è½½å¤šæ¬¡è¯·æ±‚å“åº”ï¼Œå¹¶åœ¨ä¸€æ®µæ—¶é—´å†…ä¸ä¼šæ–­å¼€ï¼Œå› æ­¤è¿™ç§è¿æ¥ç§°ä¹‹ä¸ºé•¿è¿æ¥ã€‚</p>
<p><strong>ç®¡é“åŒ–å’Œé˜Ÿå¤´é˜»å¡</strong></p>
<p>HTTP1.1å…è®¸åœ¨å“åº”åˆ°è¾¾ä¹‹å‰å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œè¿™æ ·å¯ä»¥å¤§å¹…ç¼©å‡å¸¦å®½é™åˆ¶æ—¶é—´</p>
<p><strong>ä½†è¿™æ ·åšä¼šå­˜åœ¨é˜Ÿå¤´é˜»å¡çš„é—®é¢˜</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b84aecfc3c0496397d668104029a42e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxlZWVlZXg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100871&amp;x-signature=dUFwJPC9Ppqdik3pEsjztkn7Ixo%3D" alt="" loading="lazy"/></p>
<p>ç”±äºå¤šä¸ªè¯·æ±‚ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªTCPè¿æ¥ï¼Œ<strong>æœåŠ¡å™¨å¿…é¡»æŒ‰ç…§è¯·æ±‚åˆ°è¾¾çš„é¡ºåºè¿›è¡Œå“åº”</strong></p>
<p>äºæ˜¯ï¼Œå¯¼è‡´äº†ä¸€äº›åå‘å‡ºçš„è¯·æ±‚ï¼Œæ— æ³•åœ¨å¤„ç†å®Œæˆåå“åº”ï¼Œäº§ç”Ÿäº†ç­‰å¾…çš„æ—¶é—´ï¼Œè€Œè¿™æ®µæ—¶é—´çš„å¸¦å®½å¯èƒ½æ˜¯ç©ºé—²çš„ï¼Œè¿™å°±é€ æˆäº†å¸¦å®½çš„æµªè´¹</p>
<p>é˜Ÿå¤´é˜»å¡è™½ç„¶<strong>å‘ç”Ÿåœ¨æœåŠ¡å™¨</strong>ï¼Œä½†è¿™ä¸ªé—®é¢˜çš„æ ¹æºæ˜¯å®¢æˆ·ç«¯æ— æ³•çŸ¥æ™“æœåŠ¡å™¨çš„å“åº”æ˜¯é’ˆå¯¹å“ªä¸ªè¯·æ±‚çš„ã€‚</p>
<p>æ­£æ˜¯ç”±äºå­˜åœ¨é˜Ÿå¤´é˜»å¡ï¼Œæˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨ä¸‹é¢çš„æ‰‹æ®µè¿›è¡Œä¼˜åŒ–ï¼š</p>
<ul>
<li>é€šè¿‡å‡å°‘æ–‡ä»¶æ•°é‡ï¼Œä»è€Œå‡å°‘é˜Ÿå¤´é˜»å¡çš„å‡ ç‡</li>
<li>é€šè¿‡å¼€è¾Ÿå¤šä¸ªTCPè¿æ¥ï¼Œå®ç°çœŸæ­£çš„ã€æœ‰ç¼ºé™·çš„å¹¶è¡Œä¼ è¾“</li>
</ul>
<blockquote>
<ul>
<li>æµè§ˆå™¨ä¼šæ ¹æ®æƒ…å†µï¼Œä¸ºæ‰“å¼€çš„é¡µé¢è‡ªåŠ¨å¼€å¯TCPè¿æ¥ï¼Œå¯¹äºåŒä¸€ä¸ªåŸŸåçš„è¿æ¥æœ€å¤š6ä¸ª</li>
<li>å¦‚æœè¦çªç ´è¿™ä¸ªé™åˆ¶ï¼Œå°±éœ€è¦æŠŠèµ„æºæ”¾åˆ°ä¸åŒçš„åŸŸä¸­</li>
</ul>
</blockquote>
<p><strong>ç„¶è€Œï¼Œç®¡é“åŒ–å¹¶éä¸€ä¸ªæˆåŠŸçš„æ¨¡å‹ï¼Œå®ƒå¸¦æ¥çš„é˜Ÿå¤´é˜»å¡é€ æˆéå¸¸å¤šçš„é—®é¢˜ï¼Œæ‰€ä»¥ç°ä»£æµè§ˆå™¨é»˜è®¤æ˜¯å…³é—­è¿™ç§æ¨¡å¼çš„</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1046df637c8541988dfde0b13dd2cd5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxlZWVlZXg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100871&amp;x-signature=C995ibgQpJaUXYnTTohviFlc1fs%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<p><strong>4. HTTP/2 (2015å¹´) â€” æ€§èƒ½é©å‘½</strong></p>
<p>HTTP/2æ˜¯å¯¹HTTPåè®®çš„æ ¹æœ¬æ€§æ”¹è¿›ï¼Œæ—¨åœ¨è§£å†³HTTP/1.xä¸­çš„æ€§èƒ½ç“¶é¢ˆï¼Œå°¤å…¶æ˜¯èµ„æºåŠ è½½çš„å»¶è¿Ÿé—®é¢˜ã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºæ”¯æŒå¤šè·¯å¤ç”¨ã€å¤´éƒ¨å‹ç¼©ç­‰æŠ€æœ¯ï¼Œå¤§å¤§æé«˜äº†æ€§èƒ½ã€‚</p>
<ul>
<li>
<p><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>äºŒè¿›åˆ¶åè®®</strong>ï¼šHTTP/2é‡‡ç”¨<strong>äºŒè¿›åˆ¶å¸§</strong>ï¼ˆè€Œä¸æ˜¯HTTP/1.xçš„æ–‡æœ¬åè®®ï¼‰ï¼Œæé«˜äº†æ•°æ®çš„ä¼ è¾“æ•ˆç‡ï¼Œå‡å°‘äº†è§£æå¼€é”€ã€‚</li>
<li><strong>å¤šè·¯å¤ç”¨ï¼ˆMultiplexingï¼‰</strong> ï¼šé€šè¿‡åœ¨ä¸€ä¸ªTCPè¿æ¥ä¸ŠåŒæ—¶å¹¶å‘å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œé¿å…äº†HTTP/1.xä¸­çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚å¤šä¸ªè¯·æ±‚å¯ä»¥åŒæ—¶åœ¨åŒä¸€è¿æ¥ä¸­ä¼ è¾“ï¼Œä¸å†æŒ‰ç…§é¡ºåºä¾æ¬¡ç­‰å¾…ã€‚</li>
<li><strong>å¤´éƒ¨å‹ç¼©ï¼ˆHPACKï¼‰</strong> ï¼šHTTP/2å¯¹è¯·æ±‚å’Œå“åº”çš„å¤´éƒ¨è¿›è¡Œå‹ç¼©ï¼Œå‡å°‘äº†å†—ä½™ä¿¡æ¯ï¼Œæé«˜äº†å¸¦å®½åˆ©ç”¨ç‡ã€‚</li>
<li><strong>æœåŠ¡å™¨æ¨é€ï¼ˆServer Pushï¼‰</strong> ï¼šæœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨æ¨é€èµ„æºç»™å®¢æˆ·ç«¯ï¼Œæ— éœ€ç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚ã€‚è¿™æœ‰åŠ©äºæå‰åŠ è½½æ‰€éœ€çš„èµ„æºï¼ˆå¦‚CSSã€JSæ–‡ä»¶ï¼‰ã€‚</li>
<li><strong>ä¼˜å…ˆçº§æ§åˆ¶</strong>ï¼šå…è®¸å®¢æˆ·ç«¯æŒ‡å®šä¸åŒèµ„æºçš„ä¼˜å…ˆçº§ï¼Œå¸®åŠ©æœåŠ¡å™¨åœ¨æœ‰é™çš„å¸¦å®½ä¸‹ä¼˜å…ˆä¼ è¾“é‡è¦èµ„æºã€‚</li>
<li><strong>å‡å°‘è¿æ¥æ•°</strong>ï¼šé¿å…äº†HTTP/1.xä¸­åŒä¸€åŸŸåä¸‹åˆ›å»ºå¤šä¸ªTCPè¿æ¥çš„æƒ…å†µï¼Œå‡å°‘äº†è¿æ¥æ•°ï¼Œä»è€Œå‡å°‘äº†TCPæ¡æ‰‹å’Œå…³é—­è¿æ¥çš„å»¶è¿Ÿã€‚</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½æå‡</strong>ï¼šé€šè¿‡å¤šè·¯å¤ç”¨å’Œå¤´éƒ¨å‹ç¼©ï¼ŒHTTP/2æ˜¾è‘—é™ä½äº†å»¶è¿Ÿï¼Œæé«˜äº†é¡µé¢åŠ è½½é€Ÿåº¦ã€‚</p>
</li>
<li>
<p><strong>å±€é™æ€§</strong>ï¼šHTTP/2ä»ç„¶åŸºäºTCPåè®®ï¼Œå­˜åœ¨<strong>TCPé˜Ÿå¤´é˜»å¡é—®é¢˜</strong>ï¼ˆå¦‚æœTCPè¿æ¥å‡ºç°é—®é¢˜ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šå—åˆ°å½±å“ï¼‰ã€‚å¦å¤–ï¼Œç”±äºHTTP/2æ˜¯äºŒè¿›åˆ¶åè®®ï¼ŒæŸäº›ä»£ç†å’Œä¸­é—´ä»¶å¯èƒ½éœ€è¦æ›´æ–°ä»¥æ”¯æŒè¯¥åè®®ã€‚</p>
</li>
</ul>
<p><strong>äºŒè¿›åˆ¶åˆ†å¸§</strong></p>
<p>HTTP2.0å¯ä»¥å…è®¸ä»¥æ›´å°çš„å•å…ƒä¼ è¾“æ•°æ®ï¼Œæ¯ä¸ªä¼ è¾“å•å…ƒç§°ä¹‹ä¸º<strong>å¸§</strong>ï¼Œè€Œæ¯ä¸€ä¸ªè¯·æ±‚æˆ–å“åº”çš„å®Œæ•´æ•°æ®ç§°ä¹‹ä¸º<strong>æµ</strong>ï¼Œæ¯ä¸ªæµæœ‰è‡ªå·±çš„ç¼–å·ï¼Œæ¯ä¸ªå¸§ä¼šè®°å½•æ‰€å±çš„æµã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56cb7bd69660488d981d4f870983f105~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxlZWVlZXg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100871&amp;x-signature=DKR4viPyuMwByU99cC77EG2uNH8%3D" alt="" loading="lazy"/></p>
<p>æ¯”å¦‚ï¼ŒæœåŠ¡å™¨è¿ç»­æ¥åˆ°äº†å®¢æˆ·ç«¯çš„ä¸¤ä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªè¯·æ±‚JSã€ä¸€ä¸ªè¯·æ±‚CSSï¼Œä¸¤ä¸ªæ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"/>){}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">b</span>(<span class="hljs-params"/>){}

.<span class="hljs-property">container</span>{}

.<span class="hljs-property">list</span>{}
</code></pre>
<p>æœ€ç»ˆå½¢æˆçš„å¸§å¯èƒ½å¦‚ä¸‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6f69a4be87a4edeba4a25e805e0410f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxlZWVlZXg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100871&amp;x-signature=OdmOlGyNCqmlwyzPHc6ndp32aiw%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸ªå¸§éƒ½å¸¦äº†ä¸€ä¸ªå¤´éƒ¨ï¼Œè®°å½•äº†æµçš„IDï¼Œè¿™æ ·åšå°±èƒ½å¤Ÿå‡†ç¡®çš„çŸ¥é“è¿™ä¸€å¸§æ•°æ®æ˜¯å±äºå“ªä¸ªæµçš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b4e61d5d24c4b28b355978d2cad4dac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxlZWVlZXg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100871&amp;x-signature=5u4jWpJr4HxiZWpcvjiepl6GY1M%3D" alt="" loading="lazy"/></p>
<p>è¿™æ ·å°±çœŸæ­£çš„è§£å†³äº†å…±äº«TCPè¿æ¥æ—¶çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œå®ç°äº†çœŸæ­£çš„<strong>å¤šè·¯å¤ç”¨</strong></p>
<p>ä¸ä»…å¦‚æ­¤ï¼Œç”±äºä¼ è¾“æ—¶æ˜¯ä»¥å¸§ä¸ºå•å…ƒä¼ è¾“çš„ï¼Œæ— è®ºæ˜¯å“åº”è¿˜æ˜¯è¯·æ±‚ï¼Œéƒ½å¯ä»¥å®ç°å¹¶å‘å¤„ç†ï¼Œå³ä¸åŒçš„ä¼ è¾“å¯ä»¥äº¤æ›¿è¿›è¡Œã€‚</p>
<p>ç”±äºè¿›è¡Œäº†åˆ†å¸§ï¼Œè¿˜å¯ä»¥è®¾ç½®ä¼ è¾“ä¼˜å…ˆçº§ã€‚</p>
<p><strong>å¤´éƒ¨å‹ç¼©</strong></p>
<p>HTTP2.0ä¹‹å‰ï¼Œæ‰€æœ‰çš„æ¶ˆæ¯å¤´éƒ½æ˜¯ä»¥å­—ç¬¦çš„å½¢å¼å®Œæ•´ä¼ è¾“çš„</p>
<p>å¯å®é™…ä¸Šï¼Œå¤§éƒ¨åˆ†å¤´éƒ¨ä¿¡æ¯éƒ½æœ‰å¾ˆå¤šçš„é‡å¤</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒHTTP2.0ä½¿ç”¨å¤´éƒ¨å‹ç¼©æ¥å‡å°‘æ¶ˆæ¯å¤´çš„ä½“ç§¯</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0036e9766eec4b7cb2e74637da8ca5f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxlZWVlZXg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100871&amp;x-signature=RTT4TFv3ldqwxHBO5cPGONsXZrk%3D" alt="" loading="lazy"/></p>
<p>å¯¹äºä¸¤å¼ è¡¨éƒ½æ²¡æœ‰çš„å¤´éƒ¨ï¼Œåˆ™ä½¿ç”¨Huffmanç¼–ç å‹ç¼©åè¿›è¡Œä¼ è¾“ï¼ŒåŒæ—¶æ·»åŠ åˆ°åŠ¨æ€è¡¨ä¸­</p>
<p><strong>æœåŠ¡å™¨æ¨é€</strong></p>
<p>HTTP2.0å…è®¸åœ¨å®¢æˆ·ç«¯æ²¡æœ‰ä¸»åŠ¨è¯·æ±‚çš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨é¢„å…ˆæŠŠèµ„æºæ¨é€ç»™å®¢æˆ·ç«¯</p>
<p>å½“å®¢æˆ·ç«¯åç»­éœ€è¦è¯·æ±‚è¯¥èµ„æºæ—¶ï¼Œåˆ™è‡ªåŠ¨ä»ä¹‹å‰æ¨é€çš„èµ„æºä¸­å¯»æ‰¾</p>
<p><strong>5. HTTP/3 (2022å¹´æ­£å¼æ ‡å‡†åŒ–) â€” æœªæ¥è¶‹åŠ¿</strong></p>
<p>HTTP/3æ˜¯HTTPåè®®çš„æœ€æ–°ç‰ˆæœ¬ï¼ŒåŸºäºGoogleçš„QUICåè®®ï¼ˆQuick UDP Internet Connectionsï¼‰ã€‚QUICåè®®æœ€åˆæ˜¯ä¸ºäº†æé«˜ç§»åŠ¨ç½‘ç»œä¸‹çš„ä¼ è¾“æ€§èƒ½è€Œè®¾è®¡çš„ï¼ŒHTTP/3å°†QUICå¼•å…¥åˆ°HTTPåè®®ä¸­ï¼Œå½»åº•æ”¹å˜äº†æ•°æ®ä¼ è¾“çš„æ–¹å¼ã€‚</p>
<ul>
<li>
<p><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>åŸºäºQUICåè®®</strong>ï¼šHTTP/3ä¸å†ä¾èµ–TCPåè®®ï¼Œè€Œæ˜¯ä½¿ç”¨QUICï¼ˆåŸºäºUDPï¼‰ï¼Œè§£å†³äº†TCPä¸­çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚</li>
<li><strong>å¿«é€Ÿè¿æ¥å»ºç«‹</strong>ï¼šQUICåè®®çš„æœ€å¤§ä¼˜åŠ¿æ˜¯<strong>é›¶å¾€è¿”æ—¶é—´è¿æ¥å»ºç«‹ï¼ˆ0-RTTï¼‰</strong> ï¼Œæ„å‘³ç€è¿æ¥å»ºç«‹å‡ ä¹æ˜¯ç¬æ—¶çš„ï¼Œä»è€Œå‡å°‘äº†å»¶è¿Ÿã€‚</li>
<li><strong>å†…ç½®TLSåŠ å¯†</strong>ï¼šHTTP/3å¼ºåˆ¶ä½¿ç”¨TLS 1.3åŠ å¯†ï¼Œæå‡äº†å®‰å…¨æ€§ï¼Œå‡å°‘äº†æ¡æ‰‹å»¶è¿Ÿã€‚</li>
<li><strong>æ— é˜Ÿå¤´é˜»å¡</strong>ï¼šQUICåè®®è§£å†³äº†TCPçš„é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œä½¿å¾—HTTP/3èƒ½å¤ŸåŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œå³ä½¿å…¶ä¸­ä¸€ä¸ªè¯·æ±‚å‡ºç°å»¶è¿Ÿï¼Œå…¶ä»–è¯·æ±‚ä¹Ÿä¸ä¼šå—åˆ°å½±å“ã€‚</li>
<li><strong>ç§»åŠ¨ç½‘ç»œä¼˜åŒ–</strong>ï¼šQUICå¯¹äºç½‘ç»œåˆ‡æ¢ï¼ˆå¦‚Wi-Fiåˆ°4Gï¼‰çš„æ”¯æŒæ›´åŠ å‹å¥½ï¼Œå¯ä»¥ä¿æŒè¿æ¥ä¸ä¸­æ–­ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½æå‡</strong>ï¼šHTTP/3é€šè¿‡å‡å°‘è¿æ¥å»ºç«‹æ—¶é—´å’Œæ— é˜Ÿå¤´é˜»å¡å¤§å¤§é™ä½äº†å»¶è¿Ÿï¼Œå°¤å…¶åœ¨<strong>ä¸ç¨³å®šçš„ç½‘ç»œç¯å¢ƒä¸‹</strong>è¡¨ç°å°¤ä¸ºå‡ºè‰²ã€‚</p>
</li>
<li>
<p><strong>æŒ‘æˆ˜ä¸å‰æ™¯</strong>ï¼š</p>
<ul>
<li><strong>å…¼å®¹æ€§é—®é¢˜</strong>ï¼šHTTP/3éœ€è¦æ”¯æŒQUICåè®®çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼Œç›®å‰å¤§éƒ¨åˆ†ç°ä»£æµè§ˆå™¨ï¼ˆå¦‚Chromeã€Firefoxã€Edgeï¼‰å·²ç»æ”¯æŒï¼Œä½†æŸäº›æ—§ç‰ˆæœ¬ä»ä¸å…¼å®¹ã€‚</li>
<li><strong>ç½‘ç»œè®¾å¤‡æ›´æ–°</strong>ï¼šç”±äºQUICä½¿ç”¨UDPåè®®ï¼Œå› æ­¤éœ€è¦ç½‘ç»œè®¾å¤‡ï¼ˆå¦‚é˜²ç«å¢™ã€ä»£ç†æœåŠ¡å™¨ï¼‰æ”¯æŒQUICï¼Œå¯èƒ½ä¼šå¸¦æ¥ä¸€äº›éƒ¨ç½²ä¸Šçš„æŒ‘æˆ˜ã€‚</li>
</ul>
</li>
</ul>
<p>æ€»ä¹‹</p>
<ol>
<li><strong>HTTP/0.9</strong>ï¼šæœ€æ—©çš„å•ä¸€æ–‡æœ¬ä¼ è¾“åè®®ã€‚</li>
<li><strong>HTTP/1.0</strong>ï¼šå¼•å…¥äº†è¯·æ±‚å¤´ã€å“åº”å¤´å’Œå¤šç§æ•°æ®ç±»å‹ï¼Œä½†ä»ç„¶æ˜¯çŸ­è¿æ¥ï¼Œæ€§èƒ½è¾ƒä½ã€‚</li>
<li><strong>HTTP/1.1</strong>ï¼šå¹¿æ³›é‡‡ç”¨çš„ç‰ˆæœ¬ï¼Œå¼•å…¥æŒä¹…è¿æ¥ã€ç®¡é“åŒ–ã€ç¼“å­˜æœºåˆ¶ç­‰åŠŸèƒ½ï¼Œæå¤§æ”¹å–„äº†æ€§èƒ½ã€‚</li>
<li><strong>HTTP/2</strong>ï¼šé€šè¿‡äºŒè¿›åˆ¶åè®®ã€å¤šè·¯å¤ç”¨ã€å¤´éƒ¨å‹ç¼©ç­‰æ–¹å¼ï¼Œè§£å†³äº†æ€§èƒ½ç“¶é¢ˆï¼Œæ˜¾è‘—æé«˜äº†æ•°æ®ä¼ è¾“æ•ˆç‡ã€‚</li>
<li><strong>HTTP/3</strong>ï¼šåŸºäºQUICåè®®ï¼Œå½»åº•è§£å†³äº†TCPçš„é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œæå‡äº†ç§»åŠ¨ç½‘ç»œä¸‹çš„æ€§èƒ½ï¼Œå¹¶æä¾›äº†æ›´å¿«çš„è¿æ¥å»ºç«‹å’Œæ›´é«˜çš„å®‰å…¨æ€§ã€‚</li>
</ol>
<p><em><strong>è®²å®Œäº†httpçš„å‘å±•ï¼Œæˆ‘ä»¬ç°é˜¶æ®µæŠ•å…¥äº§å‡ºæ¯”æœ€é«˜çš„ä¼˜åŒ–å…¶å®æ˜¯ä½¿ç”¨http2.0,è¿™ä¸ªç»™æˆ‘ä»¬å¸¦æ¥çš„æå‡ä¸æ˜¯ä¸€æ˜ŸåŠç‚¹çš„ï¼Œç°åœ¨ä¸ç®¡æ˜¯é˜¿é‡Œäº‘è¿˜æ˜¯è…¾è®¯äº‘éƒ½æ”¯æŒ2.0ç‰ˆæœ¬äº†ï¼Œéœ€è¦åç«¯å’Œè¿ç»´åŒå­¦å»é…åˆå‡çº§ã€‚</strong></em></p>
<hr/>
<h4 data-id="heading-20">1.3.3 è¯·æ±‚å¿«ä¸€ç‚¹ï¼š é¢„åŠ è½½å’Œé¢„é“¾æ¥</h4>
<p>èµ„æºä¼˜å…ˆçº§æç¤ºï¼ˆResource Priority Hintsï¼‰æ˜¯ä¸€ç»„æµè§ˆå™¨æä¾›çš„ä¼˜åŒ–æ‰‹æ®µï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´ç²¾ç¡®åœ°æ§åˆ¶èµ„æºçš„åŠ è½½é¡ºåºå’Œæ—¶æœºï¼Œä»¥å‡å°‘å…³é”®èµ„æºçš„é˜»å¡æ—¶é—´ï¼Œæå‡é¡µé¢çš„åŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚è¿™äº›æœºåˆ¶åŒ…æ‹¬ <strong>Prefetchã€Preloadã€Preconnectã€DNS-Prefetch</strong>ï¼Œå®ƒä»¬å„è‡ªé’ˆå¯¹ä¸åŒç±»å‹çš„èµ„æºåŠ è½½åœºæ™¯è¿›è¡Œä¼˜åŒ–ã€‚ä¸‹é¢æˆ‘ä»¬è¯¦ç»†è®²è§£æ¯ä¸ª API çš„æ¦‚å¿µã€ç”¨æ³•å’Œæœ€ä½³å®è·µã€‚</p>
<p><strong>1. é¢„å–å›ï¼ˆPrefetchï¼‰</strong></p>
<p><strong>æ¦‚å¿µ</strong>ï¼š</p>
<ul>
<li><strong>Prefetch</strong> é€‚ç”¨äº <strong>å³å°†éœ€è¦ä½†å½“å‰é¡µé¢ä¸æ€¥éœ€</strong> çš„èµ„æºï¼ˆå¦‚ä¸‹ä¸€é¡µçš„è„šæœ¬ã€æ ·å¼è¡¨ã€å›¾ç‰‡ç­‰ï¼‰ã€‚</li>
<li>æµè§ˆå™¨ä¼š <strong>åœ¨ç©ºé—²æ—¶é—´</strong> ä½ä¼˜å…ˆçº§ä¸‹è½½è¿™äº›èµ„æºå¹¶ç¼“å­˜ï¼Œä»¥ä¾¿ç”¨æˆ·ç¨åè®¿é—®æ—¶å¯ä»¥æ›´å¿«åŠ è½½ã€‚</li>
</ul>
<p><strong>ç”¨æ³•</strong>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"next-page.js"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"script"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"next-page.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>&gt;</span>
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·ç‚¹å‡»æŸä¸ªé“¾æ¥åï¼Œä¸‹ä¸€é¡µçš„ JSã€CSS å·²ç»è¢«é¢„åŠ è½½ï¼Œè®¿é—®ä¸‹ä¸€é¡µæ—¶ä¼šæ›´å¿«ã€‚</li>
<li>SPAï¼ˆå•é¡µåº”ç”¨ï¼‰å¯ä»¥é¢„å–æœªæ¥å¯èƒ½è®¿é—®çš„é¡µé¢èµ„æºã€‚</li>
</ul>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š âœ… é€‚ç”¨äº <strong>ä¸‹ä¸€æ­¥å¯èƒ½ä¼šç”¨åˆ°ä½†å½“å‰ä¸å½±å“æ¸²æŸ“</strong> çš„èµ„æºï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>é¢„æµ‹ç”¨æˆ·è¡Œä¸ºï¼Œå¦‚æ–°é—»ç½‘ç«™ã€ç”µå­å•†åŠ¡ç½‘ç«™çš„ä¸‹ä¸€é¡µèµ„æºé¢„å–ã€‚</li>
<li><strong>é¿å…æ»¥ç”¨</strong>ï¼šPrefetch ä¼šå ç”¨å¸¦å®½èµ„æºï¼Œå½±å“å½“å‰é¡µé¢çš„åŠ è½½ï¼Œå› æ­¤ä¸é€‚åˆå¯¹å¤§é‡èµ„æºè¿›è¡Œé¢„å–ã€‚</li>
</ul>
<hr/>
<p><strong>2. é¢„åŠ è½½ï¼ˆPreloadï¼‰</strong></p>
<p><strong>æ¦‚å¿µ</strong>ï¼š</p>
<ul>
<li>
<p><strong>Preload</strong> ç”¨äºæ˜¾å¼å‘Šè¯‰æµè§ˆå™¨<strong>é«˜ä¼˜å…ˆçº§</strong>åŠ è½½æŸä¸ªèµ„æºï¼ˆå¦‚ JSã€CSSã€å­—ä½“ã€å›¾ç‰‡ç­‰ï¼‰ï¼Œä»¥ä¾¿åœ¨å…³é”®æ¸²æŸ“è·¯å¾„ä¸Šé¿å…é˜»å¡ã€‚</p>
</li>
<li>
<p><strong>ä¸ Prefetch çš„åŒºåˆ«</strong>ï¼š</p>
<ul>
<li><strong>Prefetch</strong> æ˜¯ä½ä¼˜å…ˆçº§åŠ è½½ï¼ˆç”¨äºæœªæ¥é¡µé¢ï¼‰ã€‚</li>
<li><strong>Preload</strong> æ˜¯é«˜ä¼˜å…ˆçº§åŠ è½½ï¼ˆç”¨äºå½“å‰é¡µé¢ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ç”¨æ³•</strong>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"critical.js"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"script"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"styles.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"font.woff2"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"font"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"font/woff2"</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>&gt;</span>
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å…³é”®èµ„æºï¼ˆå¦‚ Web å­—ä½“ã€é¦–å±æ‰€éœ€ JS å’Œ CSSï¼‰å¯ä»¥<strong>æå‰åŠ è½½</strong>ï¼Œé¿å…æ¸²æŸ“é˜»å¡ã€‚</li>
<li>è§†é¢‘æ–‡ä»¶çš„é¢„åŠ è½½ï¼Œå‡å°‘ç™½å±æ—¶é—´ã€‚</li>
</ul>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š âœ… é€‚ç”¨äº <strong>å½“å‰é¡µé¢å¿…é¡»ç”¨åˆ°çš„å…³é”®èµ„æº</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>
<p><strong>Web å­—ä½“</strong>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/fonts/myfont.woff2"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"font"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"font/woff2"</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>å…³é”® CSS æˆ– JS</strong>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"critical.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"important.js"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"script"</span>&gt;</span>
</code></pre>
</li>
</ul>
<p>âš  <strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li><strong>ä¸è¦æ»¥ç”¨</strong>ï¼šæ»¥ç”¨ Preload å¯èƒ½ä¼šå½±å“å…¶ä»–é‡è¦èµ„æºçš„åŠ è½½ã€‚</li>
<li><strong>æ­é… <code>as</code> å±æ€§</strong>ï¼šæ­£ç¡®æŒ‡å®šèµ„æºç±»å‹ï¼ˆå¦‚ <code>as="script"</code>ï¼‰ï¼Œå¦åˆ™æµè§ˆå™¨å¯èƒ½ä¸ä¼šæ­£ç¡®å¤„ç†ã€‚</li>
</ul>
<hr/>
<p><strong>3. é¢„è¿æ¥ï¼ˆPreconnectï¼‰</strong></p>
<p><strong>æ¦‚å¿µ</strong>ï¼š</p>
<ul>
<li><strong>Preconnect</strong> ç”¨äºæå‰å»ºç«‹åˆ°ç¬¬ä¸‰æ–¹æœåŠ¡å™¨çš„è¿æ¥ï¼ŒåŒ…æ‹¬ <strong>DNS è§£æã€TCP æ¡æ‰‹å’Œ TLS è¿æ¥</strong>ï¼Œä»è€Œå‡å°‘è¯·æ±‚çš„å»¶è¿Ÿã€‚</li>
<li>é€‚ç”¨äº <strong>è·¨åŸŸèµ„æºï¼ˆå¦‚ CDNã€APIã€å¹¿å‘Šã€ç¬¬ä¸‰æ–¹åˆ†æå·¥å…·ï¼‰</strong> ã€‚</li>
</ul>
<p><strong>ç”¨æ³•</strong>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.example.com"</span>&gt;</span>
</code></pre>
<p>å¦‚æœç¬¬ä¸‰æ–¹æœåŠ¡å™¨éœ€è¦ CORS è®¿é—®ï¼Œå»ºè®®åŠ ä¸Š <code>crossorigin</code>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.example.com"</span> <span class="hljs-attr">crossorigin</span>&gt;</span>
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li><strong>CDN èµ„æº</strong>ï¼ˆå›¾ç‰‡ã€CSSã€JSç­‰ï¼‰åŠ è½½ä¼˜åŒ–ã€‚</li>
<li><strong>Google Fontsã€ç¬¬ä¸‰æ–¹ APIã€åˆ†æå·¥å…·</strong>ï¼ˆå¦‚ Google Analyticsï¼‰ã€‚</li>
</ul>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š âœ… é€‚ç”¨äº <strong>éœ€è¦è·¨åŸŸåŠ è½½èµ„æºçš„æƒ…å†µ</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>
<p><strong>CDN åŠ è½½çš„å­—ä½“æ–‡ä»¶</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.googleapis.com"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.gstatic.com"</span> <span class="hljs-attr">crossorigin</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>åŠ è½½ç¬¬ä¸‰æ–¹ API</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://api.example.com"</span>&gt;</span>
</code></pre>
</li>
</ul>
<p>âš  <strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li>ä»…åœ¨ <strong>ç¡®å®éœ€è¦çš„æƒ…å†µä¸‹ä½¿ç”¨</strong>ï¼Œä¾‹å¦‚é‡è¦çš„åŸŸåï¼Œæ•°é‡ä¹Ÿä¸è¦è¶…è¿‡ï¼Œå¦åˆ™ä¼šæµªè´¹ TCP è¿æ¥ã€‚å› ä¸ºä¼šä¸ç›®æ ‡åŸŸåä¿æŒ10ç§’çš„é“¾æ¥ï¼Œä¼šé˜»ç¢å…¶ä»–èµ„æºåŠ è½½</li>
</ul>
<hr/>
<p><strong>4. DNS é¢„å–ï¼ˆDNS-Prefetchï¼‰</strong></p>
<p><strong>æ¦‚å¿µ</strong>ï¼š
å…¶å®è·Ÿä¸Šé¢çš„preconnectæœ‰é‡åˆï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ç”¨ä¸Šé¢é‚£ä¸ªå°±å¥½äº†</p>
<ul>
<li><strong>DNS-Prefetch</strong> ä»…ç”¨äºæå‰è§£æåŸŸåçš„ <strong>DNS è§£æ</strong>ï¼Œä½†ä¸ä¼šå»ºç«‹å®Œæ•´çš„è¿æ¥ã€‚</li>
<li>é€‚ç”¨äº <strong>ä½ä¼˜å…ˆçº§</strong> çš„è·¨åŸŸèµ„æºé¢„è§£æï¼Œæå‡é¦–æ¬¡è¯·æ±‚çš„é€Ÿåº¦ã€‚</li>
</ul>
<p><strong>ç”¨æ³•</strong>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"//cdn.example.com"</span>&gt;</span>
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>é€‚ç”¨äº <strong>CDNã€ç¬¬ä¸‰æ–¹ APIã€å¹¿å‘Šèµ„æºã€å­—ä½“èµ„æºç­‰</strong>ï¼ŒåŠ å¿« DNS è§£ææ—¶é—´ã€‚</li>
</ul>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š âœ… é€‚ç”¨äº <strong>ç¬¬ä¸‰æ–¹èµ„æºåŠ è½½ä½†ä¼˜å…ˆçº§è¾ƒä½çš„æƒ…å†µ</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>
<p><strong>å¹¿å‘Šã€åˆ†æå·¥å…·ã€CDN</strong>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"//analytics.google.com"</span>&gt;</span>
</code></pre>
</li>
</ul>
<p>âš  <strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li><code>dns-prefetch</code> ä»…è¿›è¡Œ <strong>DNS è§£æ</strong>ï¼Œå¹¶ä¸ä¼šé¢„åŠ è½½èµ„æºï¼Œå¦‚æœèµ„æºéå¸¸é‡è¦ï¼Œå»ºè®®æ”¹ç”¨ <code>preconnect</code>ã€‚</li>
</ul>
<p><strong>å¯¹æ¯”æ€»ç»“</strong></p>








































<table><thead><tr><th>API</th><th>ä½œç”¨</th><th>ä¼˜å…ˆçº§</th><th>é€‚ç”¨åœºæ™¯</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>Prefetch</strong></td><td>é¢„å–æœªæ¥å¯èƒ½éœ€è¦çš„èµ„æº</td><td>ä½</td><td>é¢„æµ‹ä¸‹ä¸€æ­¥æ“ä½œï¼ˆå¦‚é¢„åŠ è½½ä¸‹ä¸€é¡µèµ„æºï¼‰</td><td><code>&lt;link rel="prefetch" href="next-page.js"&gt;</code></td></tr><tr><td><strong>Preload</strong></td><td>é¢„åŠ è½½å½“å‰é¡µé¢çš„å…³é”®èµ„æº</td><td>é«˜</td><td>å…³é”® JSã€CSSã€å­—ä½“ã€è§†é¢‘ç­‰</td><td><code>&lt;link rel="preload" href="critical.js" as="script"&gt;</code></td></tr><tr><td><strong>Preconnect</strong></td><td>æå‰å»ºç«‹ TCP è¿æ¥</td><td>é«˜</td><td>é‡è¦çš„ç¬¬ä¸‰æ–¹èµ„æºï¼Œå¦‚ CDNã€API</td><td><code>&lt;link rel="preconnect" href="https://cdn.example.com"&gt;</code></td></tr><tr><td><strong>DNS-Prefetch</strong></td><td>æå‰è§£æåŸŸå</td><td>ä½</td><td>ç¬¬ä¸‰æ–¹èµ„æºä½†ä¼˜å…ˆçº§è¾ƒä½</td><td><code>&lt;link rel="dns-prefetch" href="//cdn.example.com"&gt;</code></td></tr></tbody></table>
<hr/>
<p><strong>æœ€ä½³å®è·µç¤ºä¾‹:</strong></p>
<p><strong>1.ä¼˜åŒ–å­—ä½“åŠ è½½</strong></p>
<pre><code class="hljs language-html" lang="html">
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.googleapis.com"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.gstatic.com"</span> <span class="hljs-attr">crossorigin</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/fonts/myfont.woff2"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"font"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"font/woff2"</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>&gt;</span>
</code></pre>
<p><strong>2.ä¼˜åŒ– CDN èµ„æº</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.example.com"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"//analytics.example.com"</span>&gt;</span>
</code></pre>
<p><strong>3.ä¼˜åŒ–é¦–å±æ¸²æŸ“</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"critical.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"important.js"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"script"</span>&gt;</span>
</code></pre>
<ul>
<li><strong>åˆç†ä½¿ç”¨ Preloadï¼Œå¯ä»¥æ˜¾è‘—æé«˜å…³é”®èµ„æºçš„åŠ è½½é€Ÿåº¦</strong>ï¼ŒåŠ å¿«é¦–å±æ¸²æŸ“ã€‚</li>
<li><strong>ä½¿ç”¨ Preconnect å’Œ DNS-Prefetchï¼Œå¯ä»¥å‡å°‘ç¬¬ä¸‰æ–¹èµ„æºçš„åŠ è½½å»¶è¿Ÿ</strong>ï¼Œä¼˜åŒ–ç½‘ç»œæ€§èƒ½ã€‚</li>
<li><strong>Prefetch é€‚ç”¨äºé¢„æµ‹æœªæ¥çš„èµ„æºéœ€æ±‚</strong>ï¼Œé¿å…é¡µé¢è·³è½¬æ—¶çš„åŠ è½½ç­‰å¾…ã€‚</li>
</ul>
<p>é€šè¿‡ç»¼åˆä½¿ç”¨è¿™äº› APIï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘é¦–å±åŠ è½½æ—¶é—´ï¼Œæé«˜ç”¨æˆ·ä½“éªŒï¼Œä½¿ Web åº”ç”¨æ›´åŠ æµç•…å¿«é€Ÿã€‚æˆ‘ä»¬è¿˜æœ‰ç°æˆçš„å¸®æˆ‘ä»¬æ·»åŠ è¿™äº›èµ„æºæç¤ºè¯çš„å·¥å…·ã€‚å¯ä»¥æ ¹æ®æ„å»ºäº§ç‰©ï¼Œè‡ªåŠ¨ç”Ÿæˆèµ„æºä¼˜å…ˆçº§æç¤ºä»£ç ã€‚è¿™ä¸ªä½ ä»¬è‡ªå·±æ‰¾å§ï¼Œä¸èµ˜è¿°ã€‚</p>
<h2 data-id="heading-21">2. æ¸²æŸ“æ—¶çš„æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-22">SSRæœåŠ¡ç«¯æ¸²æŸ“</h3>
<p><strong>ä»€ä¹ˆæ˜¯ SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰ï¼Ÿ</strong></p>
<p><strong>SSRï¼ˆServer-Side Renderingï¼‰</strong> æ˜¯ä¸€ç§ç½‘é¡µå†…å®¹æ¸²æŸ“æŠ€æœ¯ï¼Œå…¶ä¸­ç½‘é¡µçš„ HTML å†…å®¹ç”±æœåŠ¡å™¨åœ¨ç”¨æˆ·è¯·æ±‚æ—¶é¢„å…ˆæ¸²æŸ“ç”Ÿæˆï¼Œè€Œä¸æ˜¯ç”±æµè§ˆå™¨ç«¯çš„ JavaScript æ¸²æŸ“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“çš„ç½‘é¡µä¼šåœ¨ç”¨æˆ·é¦–æ¬¡è¯·æ±‚æ—¶è¿”å›å®Œæ•´çš„ HTML æ–‡ä»¶ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ° HTML åï¼Œç›´æ¥å‘ˆç°é¡µé¢ï¼Œè€Œä¸éœ€è¦ç­‰å¾… JavaScript å®Œå…¨åŠ è½½å’Œæ‰§è¡Œæ‰èƒ½æ˜¾ç¤ºå†…å®¹ã€‚</p>
<p>ä¸ä¼ ç»Ÿçš„å®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰ä¸åŒï¼Œåœ¨å®¢æˆ·ç«¯æ¸²æŸ“ä¸­ï¼Œé¡µé¢å†…å®¹é€šå¸¸ä¼šå…ˆåŠ è½½ä¸€ä¸ªç©ºçš„ HTML é¡µé¢ï¼Œéšå JavaScript ä¼šæ¥ç®¡å¹¶åœ¨å®¢æˆ·ç«¯åŠ¨æ€æ¸²æŸ“é¡µé¢ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒSSR ä½¿å¾—é¡µé¢çš„å†…å®¹èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ç«¯å®Œå…¨æ¸²æŸ“å¥½ï¼Œä»è€Œå‡å°‘äº†æµè§ˆå™¨ç«¯çš„æ¸²æŸ“è´Ÿæ‹…ã€‚</p>
<p><em><strong>è¯´äººè¯ï¼šå°±æ˜¯vueå’Œreactç­‰æ¡†æ¶åŸæœ¬å°±æ˜¯å®¢æˆ·ç«¯æ¸²æŸ“çš„ï¼Œä½†æ˜¯SSRå°±æ˜¯åœ¨æœåŠ¡å™¨æ¸²æŸ“å¥½äº†ï¼Œæ‰€ä»¥åœ¨SEOä¸Šå’Œé¦–é¡µåŠ è½½çš„ä½“éªŒä¸Šä¼šå¾ˆå¥½ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œé‚£å°±æ˜¯ç‰ºç‰²æœåŠ¡å™¨çš„ç®—åŠ›å˜›ã€‚</strong></em></p>
<p><strong>SSR çš„æœ¬è´¨åŸç†ï¼š</strong></p>
<ol>
<li>
<p><strong>è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨</strong>ï¼šç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—®ç½‘ç«™æ—¶ï¼Œå‘èµ· HTTP è¯·æ±‚åˆ°æœåŠ¡å™¨ã€‚</p>
</li>
<li>
<p><strong>æœåŠ¡å™¨æ¸²æŸ“é¡µé¢</strong>ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œç”Ÿæˆé¡µé¢çš„ HTML å†…å®¹ã€‚å¯¹äºåŠ¨æ€é¡µé¢ï¼ŒæœåŠ¡å™¨ä¼šæ‰§è¡Œ JavaScript ä»£ç ï¼Œè·å–æ•°æ®å¹¶å°†å…¶ä¸æ¨¡æ¿ç»“åˆï¼Œç”Ÿæˆå®Œæ•´çš„ HTML é¡µé¢ã€‚</p>
</li>
<li>
<p><strong>è¿”å›å®Œæ•´çš„ HTML é¡µé¢</strong>ï¼šæœåŠ¡å™¨å°†æ¸²æŸ“å¥½çš„ HTML é¡µé¢è¿”å›ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°åç›´æ¥æ¸²æŸ“é¡µé¢ï¼Œå±•ç¤ºç»™ç”¨æˆ·ã€‚</p>
</li>
<li>
<p><strong>å®¢æˆ·ç«¯æ¥ç®¡</strong>ï¼šä¸€æ—¦ HTML æ¸²æŸ“å®Œæ¯•ï¼Œå®¢æˆ·ç«¯çš„ JavaScript ä¼šæ¥ç®¡é¡µé¢ï¼Œå¯ç”¨é¡µé¢ä¸­çš„äº¤äº’åŠŸèƒ½ï¼Œæ¯”å¦‚åŠ¨æ€åŠ è½½çš„å†…å®¹ã€äº‹ä»¶ç»‘å®šç­‰ã€‚æ­¤æ—¶ï¼Œæµè§ˆå™¨å˜ä¸ºä¸€ä¸ª SPAï¼ˆå•é¡µåº”ç”¨ï¼‰ã€‚</p>
</li>
</ol>
<p>å¸¸ç”¨çš„åº“å’Œæ¡†æ¶æœ‰ <strong>Next.js</strong>ï¼ˆReactï¼‰ã€<strong>Nuxt.js</strong>ï¼ˆVueï¼‰ç­‰ï¼Œå®ƒä»¬é€šè¿‡æœåŠ¡å™¨ç«¯æ¸²æŸ“æ¥æé«˜é¦–å±åŠ è½½é€Ÿåº¦å’Œ SEO æ€§èƒ½ã€‚</p>
<p>ä¸ç®¡æ˜¯<strong>Next.js</strong> è¿˜æ˜¯ <strong>Nuxt.js</strong> ï¼Œä¸»æµçš„æœåŠ¡ç«¯æ¸²æŸ“æ¡†æ¶ä¸»è¦éƒ½æ˜¯åŸºäº2ä¸ªä¸œè¥¿ï¼š</p>
<ul>
<li>renderToString(element)ï¼š<strong>æŠŠæˆ‘ä»¬å†™çš„ç»„ä»¶æ¸²æŸ“æˆHTMLå­—ç¬¦ä¸²è¿”å›ç»™æµè§ˆå™¨ç›´æ¥æ¸²æŸ“</strong></li>
<li>hydrate(element, container):<strong>åœ¨æµè§ˆå™¨ç«¯æ¿€æ´»ï¼Œä½¿å¾—æˆ‘ä»¬çš„äº‹ä»¶ç­‰äº¤äº’æ¿€æ´»ï¼Œå˜æˆä¸€ä¸ªSPAåº”ç”¨</strong></li>
</ul>
<p>ä¸»è¦æ˜¯è¿™ä¸¤ä»¶äº‹ï¼Œåé¢æˆ‘ä»¬ä¼šå±•å¼€è®²ã€‚</p>
<p><strong>SSR ç”¨æ¥åšä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>
<p><strong>æé«˜ SEOï¼ˆæœç´¢å¼•æ“ä¼˜åŒ–ï¼‰</strong> ï¼š</p>
<p>æœç´¢å¼•æ“çˆ¬è™«æ— æ³•æœ‰æ•ˆè§£æå’Œç´¢å¼•ä½¿ç”¨å®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰æŠ€æœ¯çš„å•é¡µåº”ç”¨ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸æ— æ³•æ‰§è¡Œ JavaScriptã€‚ä½¿ç”¨ SSR æ—¶ï¼Œé¡µé¢åœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆæ—¶å·²ç»åŒ…å«äº†å®Œæ•´çš„ HTML å†…å®¹ï¼Œçˆ¬è™«å¯ä»¥ç›´æ¥æŠ“å–è¿™äº›å†…å®¹ï¼Œä»è€Œæé«˜ SEO æ’åã€‚</p>
</li>
<li>
<p><strong>æé«˜é¦–å±æ¸²æŸ“é€Ÿåº¦</strong>ï¼š</p>
<p>SSR å¯ä»¥å°†æ¸²æŸ“ç»“æœç›´æ¥è¿”å›ç»™æµè§ˆå™¨ï¼Œå‡å°‘äº†ç­‰å¾… JavaScript åŠ è½½å’Œæ‰§è¡Œçš„æ—¶é—´ã€‚å› æ­¤ï¼Œç”¨æˆ·åœ¨è¯·æ±‚é¡µé¢æ—¶å¯ä»¥æ›´å¿«åœ°çœ‹åˆ°å†…å®¹ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
</li>
<li>
<p><strong>æé«˜æ€§èƒ½</strong>ï¼š</p>
<p>ç”±äºåœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆé¡µé¢ï¼Œæµè§ˆå™¨ç«¯æ— éœ€æ¸²æŸ“æ•´ä¸ªåº”ç”¨ï¼Œå‡è½»äº†å®¢æˆ·ç«¯çš„è´Ÿæ‹…ï¼Œå°¤å…¶å¯¹äºä½æ€§èƒ½è®¾å¤‡ï¼ˆå¦‚æ‰‹æœºï¼‰éå¸¸æœ‰æ•ˆã€‚</p>
</li>
</ul>
<p>å…·ä½“çš„å®è·µå¾ˆå¤šæ–‡ç« éƒ½æœ‰äº›ï¼Œå¯ä»¥æ˜¯ä½¿ç”¨æ¡†æ¶nextã€nuxt,ä¹Ÿå¯ä»¥ä½¿ç”¨reactæˆ–è€…vueæä¾›çš„api,ä¸å†èµ˜è¿°ã€‚</p>
<h3 data-id="heading-23">cssçš„ä¼˜åŒ–</h3>
<p>æ¯ä¸€ä¸ªç½‘é¡µéƒ½ç¦»ä¸å¼€<code>css</code>ï¼Œä½†æ˜¯å¾ˆå¤šäººåˆè®¤ä¸ºï¼Œ<code>css</code>ä¸»è¦æ˜¯ç”¨æ¥å®Œæˆé¡µé¢å¸ƒå±€çš„ï¼Œåƒä¸€äº›ç»†èŠ‚æˆ–è€…ä¼˜åŒ–ï¼Œå°±ä¸éœ€è¦æ€ä¹ˆè€ƒè™‘ï¼Œå®é™…ä¸Šè¿™ç§æƒ³æ³•æ˜¯ä¸æ­£ç¡®çš„</p>
<p>ä½œä¸ºé¡µé¢æ¸²æŸ“å’Œå†…å®¹å±•ç°çš„é‡è¦ç¯èŠ‚ï¼Œ<code>css</code>å½±å“ç€ç”¨æˆ·å¯¹æ•´ä¸ªç½‘ç«™çš„ç¬¬ä¸€ä½“éªŒ</p>
<p>å› æ­¤ï¼Œåœ¨æ•´ä¸ªäº§å“ç ”å‘è¿‡ç¨‹ä¸­ï¼Œ<code>css</code>æ€§èƒ½ä¼˜åŒ–åŒæ ·éœ€è¦è´¯ç©¿å…¨ç¨‹</p>
<p>å®ç°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œä¸»è¦æœ‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>å†…è”é¦–å±å…³é”®CSS</li>
<li>å¼‚æ­¥åŠ è½½CSS</li>
<li>èµ„æºå‹ç¼©</li>
<li>åˆç†ä½¿ç”¨é€‰æ‹©å™¨</li>
<li>å‡å°‘ä½¿ç”¨æ˜‚è´µçš„å±æ€§</li>
<li>ä¸è¦ä½¿ç”¨@import</li>
</ul>
<p>è¿™äº›æ–¹å¼ä¼šå’Œä¸Šé¢çš„åŠ è½½æ€§èƒ½ä¼˜åŒ–çš„ä¸€èŠ‚æœ‰é‡åˆçš„éƒ¨åˆ†ï¼Œä½†æ˜¯è¿˜æ˜¯å®Œæ•´è®²ä¸€ä¸‹</p>
<p><strong>å†…è”é¦–å±å…³é”®CSS</strong></p>
<p>åœ¨æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œé¡µé¢é¦–è¦å†…å®¹å‡ºç°åœ¨å±å¹•çš„æ—¶é—´å½±å“ç€ç”¨æˆ·çš„ä½“éªŒï¼Œè€Œé€šè¿‡å†…è”<code>css</code>å…³é”®ä»£ç èƒ½å¤Ÿä½¿æµè§ˆå™¨åœ¨ä¸‹è½½å®Œ<code>html</code>åå°±èƒ½ç«‹åˆ»æ¸²æŸ“</p>
<p>è€Œå¦‚æœå¤–éƒ¨å¼•ç”¨<code>css</code>ä»£ç ï¼Œåœ¨è§£æ<code>html</code>ç»“æ„è¿‡ç¨‹ä¸­é‡åˆ°å¤–éƒ¨<code>css</code>æ–‡ä»¶ï¼Œæ‰ä¼šå¼€å§‹ä¸‹è½½<code>css</code>ä»£ç ï¼Œå†æ¸²æŸ“</p>
<p>æ‰€ä»¥ï¼Œ<code>CSS</code>å†…è”ä½¿ç”¨ä½¿æ¸²æŸ“æ—¶é—´æå‰</p>
<p>æ³¨æ„ï¼šä½†æ˜¯è¾ƒå¤§çš„<code>css</code>ä»£ç å¹¶ä¸åˆé€‚å†…è”ï¼ˆåˆå§‹æ‹¥å¡çª—å£ã€æ²¡æœ‰ç¼“å­˜ï¼‰ï¼Œè€Œå…¶ä½™ä»£ç åˆ™é‡‡å–å¤–éƒ¨å¼•ç”¨æ–¹å¼</p>
<p><strong>å¼‚æ­¥åŠ è½½CSS</strong></p>
<p>åœ¨<code>CSS</code>æ–‡ä»¶è¯·æ±‚ã€ä¸‹è½½ã€è§£æå®Œæˆä¹‹å‰ï¼Œ<code>CSS</code>ä¼šé˜»å¡æ¸²æŸ“ï¼Œæµè§ˆå™¨å°†ä¸ä¼šæ¸²æŸ“ä»»ä½•å·²å¤„ç†çš„å†…å®¹</p>
<p>å‰é¢åŠ è½½å†…è”ä»£ç åï¼Œåé¢çš„å¤–éƒ¨å¼•ç”¨<code>css</code>åˆ™æ²¡å¿…è¦é˜»å¡æµè§ˆå™¨æ¸²æŸ“ã€‚è¿™æ—¶å€™å°±å¯ä»¥é‡‡å–å¼‚æ­¥åŠ è½½çš„æ–¹æ¡ˆï¼Œä¸»è¦æœ‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä½¿ç”¨javascriptå°†linkæ ‡ç­¾æ’åˆ°headæ ‡ç­¾æœ€å</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºlinkæ ‡ç­¾</span>
<span class="hljs-keyword">const</span> myCSS = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>( <span class="hljs-string">"link"</span> );
myCSS.<span class="hljs-property">rel</span> = <span class="hljs-string">"stylesheet"</span>;
myCSS.<span class="hljs-property">href</span> = <span class="hljs-string">"mystyles.css"</span>;
<span class="hljs-comment">// æ’å…¥åˆ°headerçš„æœ€åä½ç½®</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">insertBefore</span>( myCSS, <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-property">childNodes</span>[ <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-property">childNodes</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span> ].<span class="hljs-property">nextSibling</span> );
</code></pre>
<p><strong>èµ„æºå‹ç¼©</strong></p>
<p>åˆ©ç”¨<code>webpack</code>ã€<code>gulp/grunt</code>ã€<code>rollup</code>ç­‰æ¨¡å—åŒ–å·¥å…·ï¼Œå°†<code>css</code>ä»£ç è¿›è¡Œå‹ç¼©ï¼Œä½¿æ–‡ä»¶å˜å°ï¼Œå¤§å¤§é™ä½äº†æµè§ˆå™¨çš„åŠ è½½æ—¶é—´</p>
<p>å¤§å‹çš„ CSS æ–‡ä»¶ä¸ä»…å¢åŠ äº†é¡µé¢çš„ä¸‹è½½æ—¶é—´ï¼Œä¹Ÿå¢åŠ äº†æµè§ˆå™¨çš„è§£æå’Œæ¸²æŸ“æ—¶é—´ã€‚</p>
<ul>
<li><strong>ä½¿ç”¨å·¥å…·å‹ç¼© CSS æ–‡ä»¶</strong>ï¼šåƒ <strong>CSSNano</strong>ã€<strong>PostCSS</strong> ç­‰å·¥å…·å¯ä»¥å¸®åŠ©ä½ å‹ç¼©å’Œä¼˜åŒ– CSS æ–‡ä»¶ï¼Œå»é™¤æ— ç”¨çš„ç©ºæ ¼ã€æ³¨é‡Šå’Œä¸å¿…è¦çš„è§„åˆ™ã€‚</li>
<li><strong>ä½¿ç”¨ CSS ä»£ç åˆ†å‰²</strong>ï¼šé€šè¿‡å·¥å…·ï¼ˆå¦‚ <strong>Webpack</strong> æˆ– <strong>Parcel</strong>ï¼‰å°† CSS æŒ‰éœ€åˆ†å‰²ï¼ŒåªåŠ è½½å½“å‰é¡µé¢æ‰€éœ€çš„æ ·å¼ï¼Œè€Œä¸æ˜¯åŠ è½½æ‰€æœ‰æ ·å¼ã€‚</li>
</ul>
<p><strong>åˆç†ä½¿ç”¨é€‰æ‹©å™¨</strong></p>
<p><code>css</code>åŒ¹é…çš„è§„åˆ™æ˜¯ä»å³å¾€å·¦å¼€å§‹åŒ¹é…ï¼Œä¾‹å¦‚<code>#markdown .content h3</code>åŒ¹é…è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>å…ˆæ‰¾åˆ°h3æ ‡ç­¾å…ƒç´ </li>
<li>ç„¶åå»é™¤ç¥–å…ˆä¸æ˜¯.contentçš„å…ƒç´ </li>
<li>æœ€åå»é™¤ç¥–å…ˆä¸æ˜¯#markdownçš„å…ƒç´ </li>
</ul>
<p>å¦‚æœåµŒå¥—çš„å±‚çº§æ›´å¤šï¼Œé¡µé¢ä¸­çš„å…ƒç´ æ›´å¤šï¼Œé‚£ä¹ˆåŒ¹é…æ‰€è¦èŠ±è´¹çš„æ—¶é—´ä»£ä»·è‡ªç„¶æ›´é«˜</p>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨ç¼–å†™é€‰æ‹©å™¨çš„æ—¶å€™ï¼Œå¯ä»¥éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li>ä¸è¦åµŒå¥—ä½¿ç”¨è¿‡å¤šå¤æ‚é€‰æ‹©å™¨ï¼Œæœ€å¥½ä¸è¦ä¸‰å±‚ä»¥ä¸Š</li>
<li>ä½¿ç”¨idé€‰æ‹©å™¨å°±æ²¡å¿…è¦å†è¿›è¡ŒåµŒå¥—</li>
<li>é€šé…ç¬¦å’Œå±æ€§é€‰æ‹©å™¨æ•ˆç‡æœ€ä½ï¼Œé¿å…ä½¿ç”¨</li>
</ul>
<p><strong>å‡å°‘ä½¿ç”¨æ˜‚è´µçš„å±æ€§</strong></p>
<p>æŸäº› CSS å±æ€§çš„è®¡ç®—ä¼šæ¯”è¾ƒæ˜‚è´µï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚å¸ƒå±€çš„æƒ…å†µä¸‹ã€‚é¿å…ä¸å¿…è¦çš„å±æ€§ï¼Œæˆ–è€…ä½¿ç”¨æ›´é«˜æ•ˆçš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<p>åœ¨é¡µé¢å‘ç”Ÿé‡ç»˜çš„æ—¶å€™ï¼Œæ˜‚è´µå±æ€§å¦‚<code>box-shadow</code>/<code>border-radius</code>/<code>filter</code>/é€æ˜åº¦/<code>:nth-child</code>ç­‰ï¼Œä¼šé™ä½æµè§ˆå™¨çš„æ¸²æŸ“æ€§èƒ½</p>
<ul>
<li>
<p><strong>é¿å…ä½¿ç”¨ <code>box-shadow</code> å’Œ <code>text-shadow</code> ç­‰è¿‡äºå¤æ‚çš„å±æ€§</strong>ï¼Œå°¤å…¶æ˜¯åœ¨å¤šå±‚åµŒå¥—çš„å…ƒç´ ä¸Šã€‚è¿™äº›å±æ€§ä¼šå¢åŠ é¡µé¢æ¸²æŸ“çš„å¤æ‚æ€§ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨ <code>will-change</code> æ¥ä¼˜åŒ–åŠ¨ç”»</strong>ï¼šå½“ä½ çŸ¥é“æŸä¸ªå…ƒç´ å³å°†è¿›è¡ŒåŠ¨ç”»å˜åŒ–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>will-change</code> æ¥å‘ŠçŸ¥æµè§ˆå™¨ä¼˜åŒ–è¯¥å…ƒç´ ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-css" lang="css">  
   <span class="hljs-selector-class">.box</span> {
     <span class="hljs-attribute">will-change</span>: transform;
   }
</code></pre>
<p><strong>ä¸è¦ä½¿ç”¨@import</strong></p>
<p>cssæ ·å¼æ–‡ä»¶æœ‰ä¸¤ç§å¼•å…¥æ–¹å¼ï¼Œä¸€ç§æ˜¯<code>link</code>å…ƒç´ ï¼Œå¦ä¸€ç§æ˜¯<code>@import</code></p>
<p><code>@import</code>ä¼šå½±å“æµè§ˆå™¨çš„å¹¶è¡Œä¸‹è½½ï¼Œä½¿å¾—é¡µé¢åœ¨åŠ è½½æ—¶å¢åŠ é¢å¤–çš„å»¶è¿Ÿï¼Œå¢æ·»äº†é¢å¤–çš„å¾€è¿”è€—æ—¶</p>
<p>è€Œä¸”å¤šä¸ª<code>@import</code>å¯èƒ½ä¼šå¯¼è‡´ä¸‹è½½é¡ºåºç´Šä¹±</p>
<p>æ¯”å¦‚ä¸€ä¸ªcssæ–‡ä»¶<code>index.css</code>åŒ…å«äº†ä»¥ä¸‹å†…å®¹ï¼š<code>@import url("reset.css")</code></p>
<p>é‚£ä¹ˆæµè§ˆå™¨å°±å¿…é¡»å…ˆæŠŠ<code>index.css</code>ä¸‹è½½ã€è§£æå’Œæ‰§è¡Œåï¼Œæ‰ä¸‹è½½ã€è§£æå’Œæ‰§è¡Œç¬¬äºŒä¸ªæ–‡ä»¶<code>reset.css</code></p>
<p><strong>å‡å°‘ä¸å¿…è¦çš„ CSS é‡ç»˜å’Œé‡æ’</strong></p>
<p>æ¯å½“é¡µé¢ä¸­çš„å…ƒç´ æ ·å¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæµè§ˆå™¨ä¼šè¿›è¡Œé‡ç»˜æˆ–é‡æ’æ“ä½œï¼Œè¿™ä¼šå½±å“æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤§é‡ DOM å…ƒç´ çš„æƒ…å†µä¸‹ã€‚</p>
<ul>
<li>
<p><strong>å‡å°‘ DOM å…ƒç´ çš„æ›´æ”¹</strong>ï¼šå°½é‡é¿å…é¢‘ç¹åœ°ä¿®æ”¹å…ƒç´ çš„å¸ƒå±€æˆ–æ ·å¼ã€‚ä¾‹å¦‚ï¼Œä¸è¦åœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­é¢‘ç¹æ”¹å˜ <code>width</code>ã€<code>height</code>ã€<code>margin</code> ç­‰ä¼šå¯¼è‡´é‡æ’çš„å±æ€§ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨ <code>transform</code> å’Œ <code>opacity</code> ä»£æ›¿ <code>top</code>ã€<code>left</code> ç­‰å±æ€§</strong>ï¼šè¿™äº› CSS å±æ€§ä¸ä¼šè§¦å‘é‡æ’ï¼Œæµè§ˆå™¨å¯ä»¥é€šè¿‡ GPU åŠ é€ŸåŠ¨ç”»ã€‚</p>
<pre><code class="hljs language-css" lang="css"> //æ¨è
<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">100px</span>);
}

//ä¸æ¨è
<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">100px</span>;
}
</code></pre>
</li>
</ul>
<p><strong>å…¶ä»–</strong></p>
<ul>
<li>å‡å°‘é‡æ’æ“ä½œï¼Œä»¥åŠå‡å°‘ä¸å¿…è¦çš„é‡ç»˜</li>
<li>äº†è§£å“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿è€Œæ¥ï¼Œé¿å…å¯¹è¿™äº›å±æ€§é‡å¤ç¼–å†™</li>
<li>cssSpriteï¼Œåˆæˆæ‰€æœ‰iconå›¾ç‰‡ï¼Œç”¨å®½é«˜åŠ ä¸Šbackgroud-positionçš„èƒŒæ™¯å›¾æ–¹å¼æ˜¾ç°å‡ºæˆ‘ä»¬è¦çš„iconå›¾ï¼Œå‡å°‘äº†httpè¯·æ±‚</li>
<li>æŠŠå°çš„iconå›¾ç‰‡è½¬æˆbase64ç¼–ç </li>
<li>CSS3åŠ¨ç”»æˆ–è€…è¿‡æ¸¡å°½é‡ä½¿ç”¨transformå’Œopacityæ¥å®ç°åŠ¨ç”»ï¼Œä¸è¦ä½¿ç”¨leftå’Œtopå±æ€§</li>
<li>ä½¿ç”¨gpuæ¥æ¸²æŸ“ï¼Œä¾‹å¦‚transform willchangeç­‰</li>
<li>ä¸è¦å¤šæ¬¡è·Ÿæ”¹æ ·å¼ï¼Œåº”è¯¥ä½¿ç”¨ç±»åä¸€æ¬¡æ€§æ›´æ”¹</li>
<li>ä½¿ç”¨ CSS å˜é‡æ¥å‡å°‘å†—ä½™ä»£ç </li>
</ul>
<p>ä¼˜åŒ– CSS ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œä½†é€šè¿‡ä¸€äº›å¸¸è§„çš„æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µï¼Œå¯ä»¥æœ‰æ•ˆåœ°æé«˜ç½‘é¡µåŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-24">JSçš„ä¼˜åŒ–</h3>
<p>JavaScript æ€§èƒ½ä¼˜åŒ–æ˜¯å‰ç«¯å¼€å‘ä¸­é‡è¦çš„éƒ¨åˆ†ï¼Œç›´æ¥å½±å“é¡µé¢çš„é€Ÿåº¦ã€äº¤äº’å“åº”é€Ÿåº¦ä»¥åŠæ•´ä½“ç”¨æˆ·ä½“éªŒã€‚ä¸‹é¢æˆ‘å°†ä» <strong>ä»£ç ä¼˜åŒ–ã€æ¸²æŸ“ä¼˜åŒ–ã€æ‰§è¡Œä¼˜åŒ–ã€åŠ è½½ä¼˜åŒ–ã€å†…å­˜ç®¡ç†</strong> ç­‰å¤šä¸ªæ–¹é¢æä¾›è¯¦ç»†çš„ JS æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼Œå¹¶ç»“åˆæœ€ä½³å®è·µè¿›è¡Œè¯´æ˜ã€‚</p>
<p><strong>ä»£ç ä¼˜åŒ–</strong></p>
<ul>
<li>
<p><strong>é¿å…ä½¿ç”¨å…¨å±€å˜é‡ï¼š</strong>
å…¨å±€å˜é‡å­˜å‚¨åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œä¼šå¢åŠ å˜é‡æŸ¥æ‰¾çš„æ—¶é—´ï¼Œå¹¶å¯èƒ½å¯¼è‡´å˜é‡æ±¡æŸ“ã€‚
å°½é‡ä½¿ç”¨ <code>let</code>ã€<code>const</code> è€Œä¸æ˜¯ <code>var</code>ï¼Œé¿å…å˜é‡æŒ‚è½½åˆ° <code>window</code> å¯¹è±¡ä¸Šã€‚ä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•° (IIFE) æˆ–æ¨¡å—åŒ–æ¥å°è£…ä½œç”¨åŸŸã€‚</p>
</li>
<li>
<p><strong>é¿å…ä¸å¿…è¦çš„è®¡ç®—ï¼š</strong> é‡å¤è®¡ç®—ç›¸åŒçš„è¡¨è¾¾å¼ä¼šå¢åŠ  CPU è®¡ç®—å¼€é”€ã€‚åº”å½“ç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</p>
</li>
</ul>
<p><strong>æ¸²æŸ“ä¼˜åŒ–</strong></p>
<ul>
<li>
<p><strong>é¿å…é‡æ’å’Œé‡ç»˜ (Reflow &amp; Repaint)</strong>ï¼š
æœ‰å‡ ä»¶äº‹ä¼šå¯¼è‡´é‡æ’å’Œé‡ç»˜ï¼šä¸€æ˜¯ä¿®æ”¹ DOM æ ‘çš„ç»“æ„ï¼Œç§»åŠ¨å¢åˆ ç­‰ï¼ŒäºŒæ˜¯ä¿®æ”¹domå…ƒç´ çš„å‡ ä½•å±æ€§ï¼Œå®½é«˜ä¹‹ç±»çš„ï¼Œä¸‰æ˜¯è·å–offsetTopã€offsetLeftã€ offsetWidthã€offsetHeightã€scrollTopã€scrollLeftã€scrollWidthã€scrollHeightã€clientTopã€clientLeftã€clientWidthã€clientHeightè¿™æ ·çš„æ ·å¼ä¹Ÿä¼šè§¦å‘é‡æ’é‡ç»˜ï¼›</p>
<p>é‚£æˆ‘ä»¬åº”è¯¥å¦‚ä½•é¿å…å‘¢?</p>
<ul>
<li><strong>ç¼“å­˜ä½ç½®çš„å€¼</strong>å¦‚ï¼šoffsetTopï¼Œä¸è¦è€è®¿é—®</li>
<li><strong>ä½¿ç”¨ <code>DocumentFragment</code></strong> è¿›è¡Œæ‰¹é‡ DOM æ“ä½œï¼Œå‡å°‘å›æµæ¬¡æ•°ã€‚</li>
<li><strong>é¿å…é€ä¸ªä¿®æ”¹æ ·å¼</strong>ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>classList</code> ç»Ÿä¸€ä¿®æ”¹ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸æ¨è</span>
element.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">"100px"</span>;
element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">"50px"</span>;
element.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">"red"</span>;

<span class="hljs-comment">// æ¨è</span>
element.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">"new-style"</span>);
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨ Virtual DOM</strong>: ç›´æ¥æ“ä½œ DOM å¯èƒ½ä¼šè§¦å‘å¤§é‡çš„é‡æ’å’Œé‡ç»˜ã€‚
ä½¿ç”¨ React / Vue è¿™æ ·çš„æ¡†æ¶ï¼Œåˆ©ç”¨ Virtual DOM è¿›è¡Œé«˜æ•ˆçš„ DOM æ›´æ–°ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// React ä½¿ç”¨ Virtual DOM è¿›è¡Œé«˜æ•ˆæ›´æ–°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;
      Clicked {count} times
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
</li>
</ul>
<p><strong>åŠ è½½ä¼˜åŒ–</strong></p>
<ul>
<li>
<p><strong>å»¶è¿ŸåŠ è½½ JavaScript</strong>ï¼šJavaScript ä¼šé˜»å¡ HTML è§£æã€‚åº”å½“ä½¿ç”¨ <code>async</code> æˆ– <code>defer</code> åŠ è½½è„šæœ¬ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ä¸æ¨è --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æ¨è --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"app.js"</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
</li>
</ul>
<p><strong>å†…å­˜ç®¡ç†</strong></p>
<ul>
<li>
<p><strong>é¿å…å†…å­˜æ³„æ¼</strong>:æœªé‡Šæ”¾çš„å˜é‡ã€å®šæ—¶å™¨ç­‰ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå½±å“æ€§èƒ½ã€‚</p>
<ul>
<li>
<p><strong>åŠæ—¶æ¸…é™¤å®šæ—¶å™¨</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"running"</span>);
}, <span class="hljs-number">1000</span>);

<span class="hljs-comment">// æ¸…é™¤å®šæ—¶å™¨</span>
<span class="hljs-built_in">clearInterval</span>(timer);
</code></pre>
</li>
<li>
<p><strong>é¿å… DOM å¼•ç”¨æœªé‡Šæ”¾</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"box"</span>);
div = <span class="hljs-literal">null</span>; <span class="hljs-comment">// é‡Šæ”¾ DOM å¼•ç”¨</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ <code>IndexedDB</code> è¿›è¡Œæœ¬åœ°å­˜å‚¨</strong>:<code>localStorage</code> ä»…æ”¯æŒå­—ç¬¦ä¸²å­˜å‚¨ï¼Œæ€§èƒ½è¾ƒå·®ã€‚ä½¿ç”¨ <code>IndexedDB</code> å­˜å‚¨å¤§é‡ç»“æ„åŒ–æ•°æ®ï¼Œæé«˜è®¿é—®æ•ˆç‡ã€‚</p>
</li>
</ul>
<p><strong>ä½¿ç”¨ Web Worker è¿›è¡Œå¼‚æ­¥è®¡ç®—</strong></p>
<p>å¤æ‚è®¡ç®—ä»»åŠ¡ä¼šé˜»å¡ UI æ¸²æŸ“ï¼Œå¯¼è‡´é¡µé¢å¡é¡¿ã€‚<strong>ä½¿ç”¨ Web Worker è¿›è¡Œå¤šçº¿ç¨‹è®¡ç®—</strong>ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-comment">// worker.js</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">let</span> result = event.<span class="hljs-property">data</span>.<span class="hljs-property">num</span> * <span class="hljs-number">2</span>;
  self.<span class="hljs-title function_">postMessage</span>(result);
};

<span class="hljs-comment">// ä¸»çº¿ç¨‹</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">"worker.js"</span>);
worker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">num</span>: <span class="hljs-number">10</span> });
worker.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è®¡ç®—ç»“æœ:"</span>, event.<span class="hljs-property">data</span>);
};
</code></pre>
<p><strong>å…¶ä»–</strong></p>
<ul>
<li>
<p><strong>ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œå°†äº‹ä»¶ç»‘å®šåœ¨çˆ¶å…ƒç´ ä¸Š</strong>ï¼šåˆ©ç”¨äº‹ä»¶å†’æ³¡æœºåˆ¶å¤„ç†å­å…ƒç´ äº‹ä»¶ã€‚</p>
</li>
<li>
<p><strong>é¿å…æ•°ç»„ã€å¯¹è±¡çš„æ·±æ‹·è´</strong>ï¼šä½¿ç”¨ JSON è¿›è¡Œæ·±æ‹·è´ï¼Œæˆ–è€… <code>lodash.cloneDeep()</code>ï¼Œä¼šå¯¼è‡´å¤§é‡çš„å¯¹è±¡å…‹éš†ï¼Œå½±å“æ€§èƒ½ã€‚åº”å½“ä½¿ç”¨ç»“æ„å…±äº«æ–¹æ³•ï¼Œå¦‚ <code>Object.assign()</code> æˆ– <code>...</code>ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨ <code>Map</code> å’Œ <code>Set</code> æ›¿ä»£ <code>Object</code> å’Œ <code>Array</code></strong>:æ™®é€šå¯¹è±¡å’Œæ•°ç»„åœ¨å¤§è§„æ¨¡æ•°æ®æ“ä½œæ—¶ï¼Œ<code>Map</code> å’Œ <code>Set</code> æœ‰æ›´é«˜çš„æ€§èƒ½ã€‚å½“é”®å€¼å¯¹å­˜å‚¨è¾ƒå¤šæ—¶ï¼Œä½¿ç”¨ <code>Map</code>ï¼Œå½“å»é‡æŸ¥æ‰¾æ—¶ï¼Œä½¿ç”¨ <code>Set</code>ã€‚</p>
</li>
</ul>
<p>ä»¥ä¸Šï¼Œå¦‚æœä½ çš„é¡µé¢éœ€è¦åŠ è½½å¤§é‡ JavaScript èµ„æºï¼Œå¯ä»¥è¿™æ ·ä¼˜åŒ–ï¼š</p>
<ol>
<li><strong>ä½¿ç”¨ Webpack ä»£ç åˆ†å‰²</strong> (<code>import()</code> è¿›è¡ŒåŠ¨æ€åŠ è½½)ã€‚</li>
<li><strong>ä½¿ç”¨ <code>async</code> / <code>defer</code> åŠ è½½å¤–éƒ¨è„šæœ¬</strong>ã€‚</li>
<li><strong>ä½¿ç”¨ <code>IndexedDB</code> å­˜å‚¨å¤§é‡æ•°æ®ï¼Œè€Œé <code>localStorage</code></strong>ã€‚</li>
<li><strong>ä½¿ç”¨ Web Worker å¤„ç†å¤æ‚è®¡ç®—ï¼Œé¿å…ä¸»çº¿ç¨‹é˜»å¡</strong>ã€‚</li>
<li><strong>ä½¿ç”¨ <code>Service Worker</code> è¿›è¡Œç¦»çº¿ç¼“å­˜ï¼Œæé«˜é¡µé¢å¯ç”¨æ€§</strong>ã€‚</li>
</ol>
<p>é€šè¿‡è¿™äº› <strong>ä¼˜åŒ–ç­–ç•¥</strong>ï¼Œå¯ä»¥æ˜¾è‘—æå‡ JavaScript çš„æ‰§è¡Œæ•ˆç‡ï¼Œå‡å°‘é¡µé¢åŠ è½½æ—¶é—´ï¼Œæé«˜äº¤äº’æµç•…åº¦</p>
<h3 data-id="heading-25">vueé¡¹ç›®ä¼˜åŒ–</h3>
<p>Vue é¡¹ç›®çš„æ€§èƒ½ä¼˜åŒ–æ¶‰åŠå¤šä¸ªå±‚é¢ï¼Œä»<strong>æ•°æ®ç®¡ç†ã€ç»„ä»¶ä¼˜åŒ–ã€äº‹ä»¶å¤„ç†ã€ç½‘ç»œä¼˜åŒ–ã€æ¸²æŸ“ä¼˜åŒ–</strong>ç­‰å¤šä¸ªç»´åº¦è¿›è¡Œå…¨é¢ä¼˜åŒ–ã€‚å¯èƒ½å’Œå‰é¢çš„åŠ è½½æ—¶çš„æ€§èƒ½ä¼˜åŒ–æœ‰é‡å¤ï¼Œä½†æ˜¯è¿˜æ˜¯å®Œæ•´é˜è¿°ã€‚</p>
<h4 data-id="heading-26"><strong>1.æ•°æ®ç®¡ç†ä¼˜åŒ–</strong></h4>
<p>æ•°æ®ç®¡ç†æ˜¯ Vue æ€§èƒ½ä¼˜åŒ–çš„å…³é”®ï¼Œå› ä¸º Vue ä¾èµ–å“åº”å¼æ•°æ®ç³»ç»Ÿè¿›è¡Œ DOM æ›´æ–°ï¼Œ<strong>é¿å…ä¸å¿…è¦çš„å“åº”å¼è¿½è¸ª</strong>å¯ä»¥æé«˜æ€§èƒ½ã€‚</p>
<ul>
<li>
<p><strong>é¿å…ä¸å¿…è¦çš„å“åº”å¼æ•°æ®ï¼š</strong>
Vue 3 ä½¿ç”¨ <code>reactive()</code> å’Œ <code>ref()</code> åˆ›å»ºå“åº”å¼æ•°æ®ï¼ŒVue 2 ä½¿ç”¨ <code>data()</code> è¿›è¡Œå“åº”å¼ç®¡ç†ã€‚å¦‚æœæŸäº›æ•°æ®<strong>ä¸ä¼šå˜æ›´</strong>ï¼Œå¯ä»¥ä½¿ç”¨ <code>shallowRef()</code> æˆ– <code>shallowReactive()</code> é™ä½ Vue çš„å“åº”å¼è¿½è¸ªæˆæœ¬ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, shallowRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> reactiveData = <span class="hljs-title function_">ref</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> }); <span class="hljs-comment">// å“åº”å¼ï¼ˆå¼€é”€è¾ƒå¤§ï¼‰</span>
<span class="hljs-keyword">const</span> nonReactiveData = <span class="hljs-title function_">shallowRef</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> }); <span class="hljs-comment">// éå“åº”å¼ï¼ˆå¼€é”€è¾ƒå°ï¼‰</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>åœ¨æ•°æ®ä¸ä¼šå˜æ›´ä½†éœ€è¦åœ¨æ¨¡æ¿ä¸­æ˜¾ç¤ºæˆ–è€…é¿å… Vue è¿›è¡Œæ·±å±‚æ¬¡çš„ä¾èµ–æ”¶é›†çš„æ—¶å€™ä½¿ç”¨<code>shallowRef</code></p>
</li>
<li>
<p><strong>é¿å… <code>watch</code> ç›‘å¬æ·±å±‚å¯¹è±¡ï¼š</strong> åœ¨ Vue 3 ä¸­ï¼Œ<code>watch</code> é»˜è®¤<strong>ä¸ä¼šæ·±åº¦ç›‘å¬</strong>å¯¹è±¡ï¼Œè€Œ Vue 2 éœ€è¦æ‰‹åŠ¨è®¾ç½® <code>deep: true</code>ã€‚<strong>æ·±åº¦ç›‘å¬ä¼šå¢åŠ æ€§èƒ½å¼€é”€</strong>ï¼Œåº”å°½é‡é¿å…ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> user = <span class="hljs-title function_">ref</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> });

<span class="hljs-comment">// âŒ ä¸æ¨èï¼šæ·±åº¦ç›‘å¬æ•´ä¸ªå¯¹è±¡</span>
<span class="hljs-title function_">watch</span>(user, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'User changed:'</span>, newVal);
}, { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> });

<span class="hljs-comment">// âœ… æ¨èï¼šä»…ç›‘å¬å¿…è¦çš„å±æ€§</span>
<span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> user.<span class="hljs-property">value</span>.<span class="hljs-property">name</span>, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'User name changed:'</span>, newVal);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>é¿å… <code>computed</code> ä¿®æ”¹æ•°æ®:</strong>
<code>computed</code> è®¡ç®—å±æ€§åº”è¯¥æ˜¯<strong>çº¯å‡½æ•°</strong>ï¼Œä¸åº”ä¿®æ”¹ä»»ä½•çŠ¶æ€ï¼Œå¦åˆ™ä¼šè§¦å‘ Vue çš„<strong>æ— é™ä¾èµ–è¿½è¸ª</strong>ï¼Œå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> price = <span class="hljs-title function_">ref</span>(<span class="hljs-number">100</span>);
<span class="hljs-keyword">const</span> discount = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0.9</span>);

<span class="hljs-comment">// âŒ ä¸æ¨èï¼šä¿®æ”¹åŸå§‹æ•°æ®</span>
<span class="hljs-keyword">const</span> finalPrice = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  price.<span class="hljs-property">value</span> *= discount.<span class="hljs-property">value</span>; <span class="hljs-comment">// ä¼šå¼•èµ·ä¸å¿…è¦çš„å“åº”å¼è¿½è¸ª</span>
  <span class="hljs-keyword">return</span> price.<span class="hljs-property">value</span>;
});

<span class="hljs-comment">// âœ… æ¨èï¼šè¿”å›æ–°è®¡ç®—å€¼</span>
<span class="hljs-keyword">const</span> finalPriceBetter = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> price.<span class="hljs-property">value</span> * discount.<span class="hljs-property">value</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
</li>
</ul>
<hr/>
<h4 data-id="heading-27"><strong>2. ç»„ä»¶ä¼˜åŒ–</strong></h4>
<p>Vue ç»„ä»¶çš„åˆç†æ‹†åˆ†å’Œä¼˜åŒ–å¯ä»¥å‡å°‘<strong>ä¸å¿…è¦çš„æ¸²æŸ“</strong>ï¼Œæé«˜é¡µé¢æµç•…åº¦ã€‚</p>
<ul>
<li>
<p><strong>ä½¿ç”¨ <code>v-once</code> è¿›è¡Œé™æ€æ¸²æŸ“:</strong>
å¦‚æœä¸€ä¸ªå…ƒç´ çš„å†…å®¹ä¸ä¼šå˜æ›´ï¼Œå¯ä»¥ä½¿ç”¨ <code>v-once</code>ï¼Œè®© Vue <strong>åªæ¸²æŸ“ä¸€æ¬¡</strong>ï¼Œé¿å…é¢å¤–çš„ DOM è®¡ç®—ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">v-once</span>&gt;</span>è¿™ä¸ªæ ‡é¢˜ä¸ä¼šå˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨key æé«˜ v-for æ•ˆç‡</strong></p>
<p><code>v-for</code> ç”Ÿæˆçš„åˆ—è¡¨<strong>å¿…é¡»ä½¿ç”¨å”¯ä¸€ <code>key</code></strong>ï¼Œå¦åˆ™ Vue å¯èƒ½é”™è¯¯åœ°å¤ç”¨ç»„ä»¶ï¼Œå¯¼è‡´æ¸²æŸ“æ•ˆç‡é™ä½ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in list"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
</li>
</ul>
<p>ğŸš¨ <strong>ä¸è¦ä½¿ç”¨ <code>index</code> ä½œä¸º <code>key</code></strong>ï¼Œå¦åˆ™åœ¨æ•°æ®å˜æ›´æ—¶ï¼ŒVue å¯èƒ½ä¼šé”™è¯¯åœ°å¤ç”¨åˆ—è¡¨é¡¹ã€‚</p>
<ul>
<li>
<p><strong>ç»„ä»¶æ‡’åŠ è½½</strong>ï¼šä½¿ç”¨ <code>defineAsyncComponent</code> å®ç°ç»„ä»¶<strong>æŒ‰éœ€åŠ è½½</strong>ï¼Œå‡å°‘é¦–å±åŠ è½½æ—¶é—´ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { defineAsyncComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyComponent</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./LazyComponent.vue'</span>));
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">LazyComponent</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"showComponent"</span> /&gt;</span>
</code></pre>
</li>
<li>
<p><strong>é¿å… <code>v-if</code> å’Œ <code>v-for</code> åŒæ—¶ä½¿ç”¨:</strong><code>v-if</code> + <code>v-for</code> ä¼šå¯¼è‡´<strong>æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œåˆ¤æ–­</strong>ï¼Œå½±å“æ€§èƒ½ã€‚åº”<strong>å…ˆç”¨ <code>computed</code> è¿‡æ»¤æ•°æ®</strong>ã€‚ä¸€èˆ¬åœ¨å¤–å±‚å¥—ä¸ªtemplateåœ¨å¥—vifæˆ–è€…å¦‚ä¸‹é¢ä»£ç æ‰€ç¤º</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ ä¸æ¨è --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in list"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"item.show"</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>

<span class="hljs-comment">&lt;!-- âœ… æ¨è --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in filteredList"</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> list = <span class="hljs-title function_">ref</span>([{ <span class="hljs-attr">name</span>: <span class="hljs-string">'A'</span>, <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span> }, { <span class="hljs-attr">name</span>: <span class="hljs-string">'B'</span>, <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span> }]);
<span class="hljs-keyword">const</span> filteredList = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> list.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">show</span>));
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨Â <code>v-show</code>Â æ›¿ä»£Â <code>v-if</code></strong>ï¼š<code>v-show</code>Â ä»…åˆ‡æ¢Â <code>display</code>Â å±æ€§ï¼Œè€ŒÂ <code>v-if</code>Â ä¼šæ·»åŠ å’Œåˆ é™¤ DOM å…ƒç´ ï¼Œé€‚ç”¨äºé¢‘ç¹åˆ‡æ¢çš„ç»„ä»¶ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨Â <code>computed</code>Â ä»£æ›¿Â <code>methods</code></strong>ï¼š<code>computed</code>Â æ˜¯åŸºäºä¾èµ–çš„ç¼“å­˜è®¡ç®—ç»“æœï¼Œè€ŒÂ <code>methods</code>Â æ¯æ¬¡è°ƒç”¨éƒ½ä¼šé‡æ–°è®¡ç®—ã€‚</p>
</li>
</ul>
<hr/>
<h4 data-id="heading-28"><strong>3. äº‹ä»¶ä¼˜åŒ–</strong></h4>
<ul>
<li>
<p><strong>é˜²æ­¢ä¸å¿…è¦çš„äº‹ä»¶è§¦å‘</strong>ï¼šä½¿ç”¨äº‹ä»¶ä¿®é¥°ç¬¦ï¼ˆå¦‚Â <code>.stop</code>ã€<code>.prevent</code>ï¼‰æ¥ä¼˜åŒ–äº‹ä»¶å¤„ç†ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨é˜²æŠ–ï¼ˆdebounceï¼‰å’ŒèŠ‚æµï¼ˆthrottleï¼‰</strong></p>
<p>é˜²æŠ–é€‚ç”¨äºæœç´¢æ¡†ç­‰åœºæ™¯ï¼Œå‡å°‘<strong>è¾“å…¥æ—¶çš„é¢‘ç¹è¯·æ±‚</strong>ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash'</span>;

<span class="hljs-keyword">const</span> fetchResults = _.<span class="hljs-title function_">debounce</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Fetching search results...'</span>);
}, <span class="hljs-number">300</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">input</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">"fetchResults"</span> /&gt;</span>
</code></pre>
<p>èŠ‚æµé€‚ç”¨äº <code>scroll</code>ã€<code>resize</code> äº‹ä»¶ï¼Œå‡å°‘<strong>é«˜é¢‘è§¦å‘</strong>ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash'</span>;

<span class="hljs-keyword">const</span> onScroll = _.<span class="hljs-title function_">throttle</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Handling scroll event'</span>);
}, <span class="hljs-number">500</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">div</span> @<span class="hljs-attr">scroll</span>=<span class="hljs-string">"onScroll"</span>&gt;</span>å¯æ»šåŠ¨åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
</li>
</ul>
<hr/>
<h4 data-id="heading-29"><strong>4.ç½‘ç»œä¼˜åŒ–</strong></h4>
<ul>
<li>
<p><strong>ä»£ç åˆ†å‰²:</strong>
ä½¿ç”¨ <code>import()</code> è¿›è¡Œ<strong>æ‡’åŠ è½½</strong>ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyComponent</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./LazyComponent.vue'</span>));
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>å¼€å¯gzipå‹ç¼©</strong></p>
<p>Vue CLI å¯å¼€å¯ <code>gzip</code> å‹ç¼©ï¼Œå‡å°‘èµ„æºä½“ç§¯ã€‚</p>
<pre><code class="hljs language-js" lang="js">npm install compression-webpack-plugin -D
</code></pre>
<p>åœ¨ <code>vue.config.js</code> ä¸­é…ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">CompressionWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'compression-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">configureWebpack</span>: {
    <span class="hljs-attr">plugins</span>: [
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompressionWebpackPlugin</span>({
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/.(js|css|html)$/</span>,
        <span class="hljs-attr">threshold</span>: <span class="hljs-number">10240</span>, <span class="hljs-comment">// ä»…å‹ç¼©å¤§äº 10KB çš„æ–‡ä»¶</span>
      }),
    ],
  },
};
</code></pre>
</li>
</ul>
<hr/>
<h4 data-id="heading-30"><strong>5. æ¸²æŸ“ä¼˜åŒ–</strong></h4>
<ul>
<li>
<p><strong>ä½¿ç”¨ <code>keep-alive</code> ç¼“å­˜ç»„ä»¶:</strong>
<code>keep-alive</code> é¿å…é‡å¤é”€æ¯å’Œåˆ›å»ºï¼Œæé«˜æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>å»¶è¿Ÿå›¾ç‰‡åŠ è½½</strong>
ä½¿ç”¨ <code>LazyLoad</code> ä½¿<strong>å›¾ç‰‡æ‡’åŠ è½½</strong>ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">v-lazy</span>=<span class="hljs-string">"'image.webp'"</span> /&gt;</span>
</code></pre>
</li>
</ul>
<hr/>
<h4 data-id="heading-31"><strong>6. å‡½æ•°å¼ç»„ä»¶</strong></h4>
<p>åœ¨ Vue ä¸­ï¼Œ<strong>å‡½æ•°å¼ç»„ä»¶</strong>ï¼ˆFunctional Componentsï¼‰æ˜¯ä¸€ç§æ²¡æœ‰å®ä¾‹ã€æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­ã€æ²¡æœ‰å“åº”å¼æ•°æ®çš„ç»„ä»¶ï¼Œå®ƒä»¬é€šå¸¸è¢«ç”¨äºå‘ˆç°ç®€å•çš„ UIï¼Œè€Œä¸éœ€è¦ Vue çš„å“åº”å¼ç³»ç»Ÿçš„æ”¯æŒã€‚å‡½æ•°å¼ç»„ä»¶å› å…¶ç®€å•æ€§å’Œæ•ˆç‡ï¼Œé€šå¸¸èƒ½å¤Ÿå¸¦æ¥æ€§èƒ½ä¼˜åŒ–ï¼Œå°¤å…¶åœ¨æ¸²æŸ“å¤§é‡é™æ€ç»„ä»¶æ—¶ã€‚æ‰€ä»¥åˆç†ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶èƒ½å¸¦æ¥æ€§èƒ½çš„æå‡</p>
<p>Vue ä¸­çš„å‡½æ•°å¼ç»„ä»¶ä¸æ™®é€šç»„ä»¶æœ€å¤§çš„åŒºåˆ«æ˜¯å®ƒä¸åŒ…å« Vue çš„å®ä¾‹å¯¹è±¡ã€ç”Ÿå‘½å‘¨æœŸé’©å­ã€å“åº”å¼æ•°æ®ç­‰ã€‚å®ƒé€šè¿‡ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ç›´æ¥è¿”å›è™šæ‹Ÿ DOMã€‚</p>
<p>å‡½æ•°å¼ç»„ä»¶çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>æ— çŠ¶æ€</strong>ï¼šå‡½æ•°å¼ç»„ä»¶æ²¡æœ‰å®ä¾‹ï¼ˆæ²¡æœ‰ <code>this</code>ï¼‰ï¼Œå®ƒä»¬æ˜¯çº¯æ¸²æŸ“çš„ã€‚</li>
<li><strong>æ— ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šæ²¡æœ‰å¦‚ <code>mounted</code>ã€<code>created</code> ç­‰ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</li>
<li><strong>æ›´å¿«çš„æ¸²æŸ“æ€§èƒ½</strong>ï¼šç”±äºæ²¡æœ‰å®ä¾‹å’Œå“åº”å¼æœºåˆ¶ï¼Œå‡½æ•°å¼ç»„ä»¶çš„æ¸²æŸ“å¼€é”€è¾ƒå°ï¼Œå°¤å…¶åœ¨æ¸²æŸ“å¤§é‡é™æ€å…ƒç´ æ—¶éå¸¸é«˜æ•ˆã€‚</li>
</ul>
<p>å®ƒèƒ½å¸¦æ¥ï¼š</p>
<ol>
<li><strong>æ›´å°‘çš„å†…å­˜å¼€é”€</strong> å‡½æ•°å¼ç»„ä»¶ä¸éœ€è¦åˆ›å»º Vue å®ä¾‹ï¼Œå®ƒä¸ä¾èµ– Vue çš„å“åº”å¼ç³»ç»Ÿï¼Œå› æ­¤é¿å…äº† Vue å¯¹ç»„ä»¶å®ä¾‹è¿›è¡Œçš„ä¸€ç³»åˆ—æ€§èƒ½å¼€é”€ï¼ˆå¦‚ä¾èµ–è¿½è¸ªã€æ•°æ®æ›´æ–°ç­‰ï¼‰ã€‚</li>
<li><strong>æ›´å°‘çš„æ¸²æŸ“å¼€é”€</strong> ç”±äºæ²¡æœ‰å®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Œå‡½æ•°å¼ç»„ä»¶å¯ä»¥æ›´ç›´æ¥åœ°è¿”å›æ¸²æŸ“ç»“æœï¼Œè¿™æ„å‘³ç€ Vue åœ¨æ¸²æŸ“æ—¶ä¸éœ€è¦å¤„ç†ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ï¼Œä¹Ÿä¸éœ€è¦å“åº”å¼æ›´æ–°ï¼Œä»è€Œå‡å°‘äº†è™šæ‹Ÿ DOM çš„ç”Ÿæˆå’Œæ›´æ–°å¼€é”€ã€‚</li>
<li><strong>é¿å…ä¸å¿…è¦çš„æ¸²æŸ“</strong> å‡½æ•°å¼ç»„ä»¶é€šå¸¸æ˜¯çº¯æ¸²æŸ“çš„ï¼Œå®ƒä»¬æ¥æ”¶çš„åªæ˜¯<strong>è¾“å…¥å±æ€§</strong>ï¼Œå¹¶æ ¹æ®è¿™äº›å±æ€§æ¸²æŸ“è¾“å‡ºã€‚å› æ­¤ï¼Œå®ƒä»¬æœ¬èº«ä¸ä¾èµ– Vue çš„å“åº”å¼æ•°æ®ï¼Œæ›´æ–°æ—¶ä¸ä¼šå¯¼è‡´çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä»è€Œé¿å…äº†ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</li>
</ol>
<p>åœ¨ Vue 2 ä¸­ï¼Œå‡½æ•°å¼ç»„ä»¶çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦å°† <code>functional: true</code> è®¾ç½®ä¸ºç»„ä»¶çš„é€‰é¡¹å³å¯ã€‚</p>
<pre><code class="hljs language-html" lang="html">
<span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">functional</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ props.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ props.content }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">functional</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å£°æ˜è¯¥ç»„ä»¶ä¸ºå‡½æ•°å¼ç»„ä»¶</span>
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">title</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">content</span>: <span class="hljs-title class_">String</span>
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>åœ¨ Vue 3 ä¸­ï¼Œ<strong>å‡½æ•°å¼ç»„ä»¶çš„åˆ›å»ºæ–¹å¼æ›´ç®€æ´</strong>ï¼Œç›´æ¥é€šè¿‡æ¸²æŸ“å‡½æ•°ï¼ˆ<code>render()</code>ï¼‰æ¥å®šä¹‰ç»„ä»¶ã€‚è¿™é‡Œçš„ <code>setup()</code> è¯­æ³•ç³–ä¸ä¼ ç»Ÿçš„å‡½æ•°å¼ç»„ä»¶ç»“åˆä½¿ç”¨æ—¶ï¼Œå¯ä»¥æ›´åŠ æ¸…æ™°å’Œé«˜æ•ˆã€‚</p>
<pre><code class="hljs language-html" lang="html">
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">title</span>: <span class="hljs-title class_">String</span>,
  <span class="hljs-attr">content</span>: <span class="hljs-title class_">String</span>
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ content }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>å¯¹äºæ›´é«˜çº§çš„æ¸²æŸ“å‡½æ•°ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä½¿ç”¨ <code>h()</code> æ¥è¿”å›è™šæ‹Ÿ DOMï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { h } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">functional</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, [
      <span class="hljs-title function_">h</span>(<span class="hljs-string">'h1'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>),
      <span class="hljs-title function_">h</span>(<span class="hljs-string">'p'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>)
    ]);
  }
};
</code></pre>
<p><em><strong>ä½•æ—¶ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ï¼Ÿ</strong></em></p>
<ol>
<li><strong>é™æ€å†…å®¹æ¸²æŸ“</strong>ï¼š å‡½æ•°å¼ç»„ä»¶æœ€é€‚åˆç”¨äº<strong>é™æ€å†…å®¹</strong>ï¼Œå³å†…å®¹ä¸ä¾èµ–äºç»„ä»¶çš„å†…éƒ¨çŠ¶æ€çš„æƒ…å†µã€‚æ¯”å¦‚ä¸€ä¸ªå±•ç¤ºæŸäº›æ•°æ®çš„å±•ç¤ºç»„ä»¶ï¼Œæˆ–è€…ä¸€ä¸ªæ— çŠ¶æ€çš„å¸ƒå±€ç»„ä»¶ã€‚</li>
<li><strong>é«˜æ•ˆçš„åˆ—è¡¨æ¸²æŸ“</strong>ï¼š å¦‚æœä½ éœ€è¦æ¸²æŸ“ä¸€ä¸ªåŒ…å«å¤§é‡ç®€å•é™æ€å†…å®¹çš„åˆ—è¡¨ï¼ˆå¦‚å¡ç‰‡ã€æ¡ç›®ç­‰ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ï¼Œè¿™æ ·å¯ä»¥é¿å…æ¯ä¸ªåˆ—è¡¨é¡¹éƒ½æ‹¥æœ‰è‡ªå·±çš„ Vue å®ä¾‹ï¼Œä»è€Œå‡å°‘å†…å­˜å’Œæ€§èƒ½å¼€é”€ã€‚</li>
<li><strong>å‡å°‘ä¸å¿…è¦çš„å¤æ‚æ€§</strong>ï¼š å¯¹äºéå¸¸ç®€å•ã€æ— çŠ¶æ€çš„ç»„ä»¶ï¼Œä½¿ç”¨å‡½æ•°å¼ç»„ä»¶å¯ä»¥é¿å…ä½¿ç”¨ Vue çš„å“åº”å¼ç³»ç»Ÿå’Œç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œè¿™æ ·ç»„ä»¶ä¼šæ›´ç®€å•ã€æ›´æ˜“äºç»´æŠ¤ã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-32"><strong>7. ç¬¬ä¸‰æ–¹ç»„ä»¶çš„æŒ‰éœ€å¼•å…¥</strong></h4>
<p>åœ¨ Vue é¡¹ç›®ä¸­ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹ UI ç»„ä»¶åº“ï¼ˆå¦‚ Element Plusã€Ant Design Vue ç­‰ï¼‰å¯ä»¥åŠ é€Ÿå¼€å‘ï¼Œæé«˜ UI è´¨é‡ã€‚ç„¶è€Œï¼Œç›´æ¥å…¨é‡å¼•å…¥ç»„ä»¶åº“ä¼šå¯¼è‡´é¡¹ç›®ä½“ç§¯å¢å¤§ã€åŠ è½½æ—¶é—´å˜é•¿ã€æ€§èƒ½ä¸‹é™ã€‚å› æ­¤ï¼Œ<strong>æŒ‰éœ€å¼•å…¥</strong>ç»„ä»¶åº“æˆä¸ºæå‡ Vue é¡¹ç›®æ€§èƒ½çš„ä¸€ä¸ªå…³é”®ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<p><em><strong>é‚£å¦‚ä½•å®ç°æŒ‰éœ€å¼•å…¥ï¼Ÿ</strong></em></p>
<ul>
<li>
<p><strong>ä»¥ Element Plus ä¸ºä¾‹</strong></p>
<p>Element Plus æ˜¯ Vue 3 ç”Ÿæ€ä¸­å¸¸ç”¨çš„ UI ç»„ä»¶åº“ï¼Œé»˜è®¤æƒ…å†µä¸‹å¦‚æœç›´æ¥å…¨é‡å¼•å…¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// âŒ å…¨é‡å¼•å…¥ï¼ˆä¸æ¨èï¼‰</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementPlus</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'element-plus/dist/index.css'</span>;
app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>);
</code></pre>
<p>è¿™æ ·ä¼šå¯¼è‡´æ‰€æœ‰ç»„ä»¶éƒ½è¢«æ‰“åŒ…ï¼Œå³ä½¿åªç”¨åˆ°äº†å°‘æ•°å‡ ä¸ªç»„ä»¶ã€‚</p>
<p><strong>âœ… æŒ‰éœ€å¼•å…¥ï¼ˆæ¨èï¼‰</strong>
é€šè¿‡ <code>unplugin-vue-components</code> æ’ä»¶å®ç°æŒ‰éœ€å¼•å…¥ï¼š</p>
<pre><code class="hljs language-node" lang="node">npm install unplugin-vue-components unplugin-auto-import -D
</code></pre>
<p>ç„¶ååœ¨ <code>vite.config.js</code> æˆ– <code>webpack.config.js</code> ä¸­é…ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Components</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-vue-components/vite'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElementPlusResolver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-vue-components/resolvers'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title class_">Components</span>({
      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">ElementPlusResolver</span>()], <span class="hljs-comment">// è‡ªåŠ¨æŒ‰éœ€å¼•å…¥</span>
    }),
  ],
});
</code></pre>
<p>è¿™æ ·ï¼ŒVue ç»„ä»¶åœ¨ä½¿ç”¨æ—¶ä¼š<strong>è‡ªåŠ¨å¼•å…¥å¯¹åº”çš„ç»„ä»¶</strong>ï¼Œæ— éœ€æ‰‹åŠ¨å¯¼å…¥ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼ŒåŒæ—¶å‡å°‘æ‰“åŒ…ä½“ç§¯ã€‚</p>
</li>
<li>
<p><strong>ä»¥ Ant Design Vue ä¸ºä¾‹</strong></p>
<p><strong>é»˜è®¤å…¨é‡å¼•å…¥ï¼ˆä¸æ¨èï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Antd</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ant-design-vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'ant-design-vue/dist/antd.css'</span>;
app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Antd</span>);
</code></pre>
<p>è¿™ç§æ–¹å¼ä¼šè®©æ•´ä¸ª <code>ant-design-vue</code> ç»„ä»¶åº“æ‰“åŒ…åˆ°é¡¹ç›®ä¸­ï¼Œå¯¼è‡´ä½“ç§¯è¿‡å¤§ã€‚</p>
<p><strong>âœ… æŒ‰éœ€å¼•å…¥</strong> å¯ä»¥ä½¿ç”¨ <code>unplugin-vue-components</code> è¿›è¡ŒæŒ‰éœ€åŠ è½½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AntDesignVueResolver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-vue-components/resolvers'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title class_">Components</span>({
      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">AntDesignVueResolver</span>()], <span class="hljs-comment">// æŒ‰éœ€åŠ è½½ Ant Design Vue</span>
    }),
  ],
});
</code></pre>
<p>æˆ–è€…æ‰‹åŠ¨æŒ‰éœ€å¼•å…¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Input</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ant-design-vue'</span>;
app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Button</span>);
app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Input</span>);
</code></pre>
<p>è¿™æ ·åªä¼šåŠ è½½ <code>Button</code> å’Œ <code>Input</code> ç»„ä»¶ï¼Œå‡å°‘ä¸å¿…è¦çš„èµ„æºåŠ è½½ã€‚</p>
</li>
<li>
<p><strong>ä»¥ Vant ä¸ºä¾‹</strong></p>
<p>Vant æ˜¯ç§»åŠ¨ç«¯ UI ç»„ä»¶åº“ï¼ŒæŒ‰éœ€å¼•å…¥å¯ä»¥é€šè¿‡ <code>babel-plugin-import</code> æ¥å®ç°ï¼š</p>
<pre><code class="hljs language-node" lang="node">npm install babel-plugin-import -D
</code></pre>
<p>ç„¶ååœ¨ <code>babel.config.js</code> ä¸­é…ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    [<span class="hljs-string">'import'</span>, {
      <span class="hljs-attr">libraryName</span>: <span class="hljs-string">'vant'</span>,
      <span class="hljs-attr">libraryDirectory</span>: <span class="hljs-string">'es'</span>,
      <span class="hljs-attr">style</span>: <span class="hljs-literal">true</span>
    }, <span class="hljs-string">'vant'</span>]
  ]
};
</code></pre>
<p>è¿™æ ·åœ¨ä½¿ç”¨ Vant ç»„ä»¶æ—¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Dialog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vant'</span>;
app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Button</span>);
app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Dialog</span>);
</code></pre>
<p>ä»…ä¼šæ‰“åŒ… <code>Button</code> å’Œ <code>Dialog</code> ç»„ä»¶ï¼Œé¿å…åŠ è½½æ•´ä¸ª Vant ç»„ä»¶åº“ã€‚</p>
</li>
</ul>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨æ’ä»¶è‡ªåŠ¨æŒ‰éœ€å¼•å…¥</strong>ï¼ˆå¦‚ <code>unplugin-vue-components</code>ï¼‰ï¼Œå‡å°‘æ‰‹åŠ¨ç®¡ç†çš„è´Ÿæ‹…ã€‚</li>
<li><strong>å¦‚æœæ’ä»¶ä¸é€‚ç”¨ï¼Œä½¿ç”¨æ‰‹åŠ¨æŒ‰éœ€å¼•å…¥</strong>ï¼ŒåªåŠ è½½éœ€è¦çš„ç»„ä»¶ã€‚</li>
<li><strong>é¿å…å…¨é‡å¼•å…¥ UI ç»„ä»¶åº“</strong>ï¼Œé™¤éæœ‰æ˜ç¡®éœ€æ±‚ï¼ˆå¦‚åŠ¨æ€å¼•å…¥æ‰€æœ‰ç»„ä»¶ï¼‰ã€‚</li>
<li><strong>ç»“åˆåŠ¨æ€å¯¼å…¥ï¼ˆ<code>import()</code>ï¼‰è¿›è¡Œå¼‚æ­¥åŠ è½½</strong>ï¼Œå‡å°‘é¦–å±åŠ è½½å‹åŠ›ã€‚</li>
</ol>





























<table><thead><tr><th><strong>ä¼˜åŒ–æ–¹å¼</strong></th><th><strong>æ€§èƒ½æå‡ç‚¹</strong></th></tr></thead><tbody><tr><td>æŒ‰éœ€å¼•å…¥ UI ç»„ä»¶åº“</td><td>é¿å…å…¨é‡åŠ è½½ï¼Œå‡å°‘ JavaScript ä½“ç§¯</td></tr><tr><td>è‡ªåŠ¨æŒ‰éœ€å¼•å…¥æ’ä»¶</td><td>è‡ªåŠ¨è¯†åˆ«ä½¿ç”¨çš„ç»„ä»¶ï¼Œæé«˜å¼€å‘æ•ˆç‡</td></tr><tr><td>æ‰‹åŠ¨æŒ‰éœ€å¼•å…¥</td><td>æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œé€‚ç”¨äºç‰¹å®šéœ€æ±‚</td></tr><tr><td>ç»“åˆ Tree Shaking</td><td>è®© Webpack/Vite å»æ‰æœªä½¿ç”¨çš„ç»„ä»¶</td></tr><tr><td>å¼‚æ­¥åŠ è½½ç»„ä»¶</td><td>å‡å°‘é¦–å±æ¸²æŸ“å‹åŠ›ï¼ŒåŠ å¿«é¡µé¢åŠ è½½é€Ÿåº¦</td></tr></tbody></table>
<p>é€šè¿‡æŒ‰éœ€å¼•å…¥ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼ŒVue é¡¹ç›®å¯ä»¥å¤§å¹…å‡å°‘æ‰“åŒ…ä½“ç§¯ã€åŠ å¿«åŠ è½½é€Ÿåº¦ï¼Œæé«˜æ•´ä½“æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ</p>
<h3 data-id="heading-33">reacté¡¹ç›®ä¼˜åŒ–</h3>
<p>React æä¾›äº†å¼ºå¤§çš„å£°æ˜å¼ UI å¼€å‘èƒ½åŠ›ï¼Œä½†å¦‚æœä¸æ³¨æ„ä¼˜åŒ–ï¼Œåº”ç”¨å¯èƒ½ä¼šé‡åˆ°<strong>æ¸²æŸ“æ€§èƒ½ç“¶é¢ˆ</strong>ã€<strong>çŠ¶æ€ç®¡ç†é—®é¢˜</strong>ã€<strong>èµ„æºåŠ è½½ç¼“æ…¢</strong>ç­‰é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ React é¡¹ç›®ä¸­çš„<strong>æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</strong>ï¼Œæ¶µç›–ç»„ä»¶æ¸²æŸ“ä¼˜åŒ–ã€çŠ¶æ€ç®¡ç†ä¼˜åŒ–ã€èµ„æºä¼˜åŒ–ç­‰å¤šä¸ªæ–¹é¢ï¼Œå¹¶ç»“åˆå®é™…ä»£ç ç¤ºä¾‹ã€‚</p>
<h4 data-id="heading-34"><strong>1. é¿å…ä¸å¿…è¦çš„ç»„ä»¶æ¸²æŸ“</strong></h4>
<p>React ç»„ä»¶çš„é‡å¤æ¸²æŸ“æ˜¯å½±å“æ€§èƒ½çš„å…³é”®å› ç´ ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“å¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½ã€‚</p>
<h5 data-id="heading-35"><strong>1.1 ä½¿ç”¨ <code>React.memo</code> é¿å…ä¸å¿…è¦çš„å‡½æ•°ç»„ä»¶æ¸²æŸ“</strong></h5>
<p><code>React.memo</code> æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰ï¼Œç”¨äºç¼“å­˜ç»„ä»¶çš„æ¸²æŸ“ç»“æœï¼Œé¿å…å› <strong>çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“</strong>å¯¼è‡´å­ç»„ä»¶é‡å¤æ¸²æŸ“ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// æ™®é€šç»„ä»¶ï¼Œæ¯æ¬¡çˆ¶ç»„ä»¶æ›´æ–°éƒ½ä¼šé‡æ–°æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Button</span> = (<span class="hljs-params">{ label, onClick }</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Button Rendered'</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>{label}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
};

<span class="hljs-comment">// ä½¿ç”¨ React.memo ç¼“å­˜ç»„ä»¶ï¼Œåªæœ‰ props å˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MemoizedButton</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-title class_">Button</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">MemoizedButton</span>;
</code></pre>
<p><strong>âœ… é€‚ç”¨åœºæ™¯</strong></p>
<ul>
<li>ç»„ä»¶æ¸²æŸ“æˆæœ¬è¾ƒé«˜ï¼Œä¸” <code>props</code> ä¸å¸¸å˜åŒ–çš„æƒ…å†µä¸‹ã€‚</li>
</ul>
<p><strong>âš ï¸ æ³¨æ„</strong></p>
<ul>
<li><code>React.memo</code> åªå¯¹<strong>çº¯ç»„ä»¶</strong>æœ‰æ•ˆï¼Œå¦‚æœ <code>props</code> æ˜¯å¯¹è±¡æˆ–å‡½æ•°ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°çš„å¼•ç”¨ï¼Œå¯èƒ½å¯¼è‡´ <code>React.memo</code> å¤±æ•ˆã€‚</li>
</ul>
<h5 data-id="heading-36"><strong>1.2 ä½¿ç”¨ <code>PureComponent</code> ä¼˜åŒ–ç±»ç»„ä»¶</strong></h5>
<p>å¯¹äºç±»ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>React.PureComponent</code> ä»£æ›¿ <code>React.Component</code>ï¼Œå®ƒä¼š<strong>è‡ªåŠ¨è¿›è¡Œæµ…å±‚æ¯”è¾ƒ</strong>ï¼Œé¿å…ä¸å¿…è¦çš„æ›´æ–°ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { <span class="hljs-title class_">PureComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PureComponent</span> {
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Counter Rendered'</span>);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Count: {this.props.count}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Counter</span>;
</code></pre>
<p><strong>âœ… é€‚ç”¨åœºæ™¯</strong></p>
<ul>
<li>é€‚ç”¨äº<strong>ç±»ç»„ä»¶</strong>ï¼Œå¹¶ä¸” <code>props</code> å’Œ <code>state</code> åªåŒ…å«<strong>åŸºæœ¬ç±»å‹</strong>ã€‚</li>
</ul>
<p><strong>âš ï¸ æ³¨æ„</strong></p>
<ul>
<li><code>PureComponent</code> åªè¿›è¡Œ<strong>æµ…æ¯”è¾ƒ</strong>ï¼Œå¦‚æœ <code>props</code> ä¼ é€’çš„æ˜¯<strong>å¼•ç”¨ç±»å‹</strong>ï¼ˆå¯¹è±¡ã€æ•°ç»„ï¼‰ï¼Œéœ€è¦é…åˆ <code>useMemo</code> æˆ– <code>useCallback</code>ã€‚</li>
</ul>
<h5 data-id="heading-37"><strong>1.3 shouldComponentUpdateï¼šæ§åˆ¶ç±»ç»„ä»¶æ˜¯å¦é‡æ–°æ¸²æŸ“ã€‚</strong></h5>
<p>ä¸èµ˜è¿°</p>
<hr/>
<h4 data-id="heading-38"><strong>2. ä½¿ç”¨ <code>useCallback</code> å’Œ <code>useMemo</code> ç¼“å­˜è®¡ç®—å’Œå‡½æ•°</strong></h4>
<p><code>useCallback</code> å’Œ <code>useMemo</code> ä¸»è¦ç”¨äºç¼“å­˜<strong>ä¸å˜çš„å‡½æ•°</strong>å’Œ<strong>è®¡ç®—ç»“æœ</strong>ï¼Œé¿å…åœ¨å­ç»„ä»¶ä¸­å› <strong>å‡½æ•°é‡æ–°åˆ›å»º</strong>è€Œè§¦å‘ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</p>
<h5 data-id="heading-39"><strong>2.1 ä½¿ç”¨ <code>useCallback</code> ç¼“å­˜å›è°ƒå‡½æ•°</strong></h5>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MemoizedButton</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./MemoizedButton'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// âœ… ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å‡½æ•°</span>
  <span class="hljs-keyword">const</span> handleClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prevCount</span> =&gt;</span> prevCount + <span class="hljs-number">1</span>);
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Count: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">MemoizedButton</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Increment"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<p><strong>âœ… é€‚ç”¨åœºæ™¯</strong></p>
<ul>
<li><code>useCallback</code> é€‚ç”¨äºå°†å‡½æ•°ä½œä¸º <code>props</code> ä¼ é€’ç»™å­ç»„ä»¶çš„æƒ…å†µã€‚</li>
</ul>
<h5 data-id="heading-40"><strong>2.2 ä½¿ç”¨ <code>useMemo</code> ç¼“å­˜è®¡ç®—ç»“æœ</strong></h5>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useMemo } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">ExpensiveCalculation</span> = (<span class="hljs-params">{ num }</span>) =&gt; {
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Computing...'</span>);
    <span class="hljs-keyword">return</span> num * <span class="hljs-number">2</span>;
  }, [num]); <span class="hljs-comment">// åªæœ‰ num å˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—</span>

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Result: {result}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>;
};
</code></pre>
<p><strong>âœ… é€‚ç”¨åœºæ™¯</strong></p>
<ul>
<li>é€‚ç”¨äº<strong>é«˜è®¡ç®—é‡</strong>çš„åœºæ™¯ï¼Œå¦‚<strong>è¿‡æ»¤æ•°æ®ã€è®¡ç®—åˆ—è¡¨é¡¹</strong>ç­‰ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-41"><strong>3. åˆç†ä½¿ç”¨useEffectï¼Œé¿å…ä¸å¿…è¦çš„å‰¯ä½œç”¨</strong></h4>
<p>åœ¨ React ä¸­ï¼Œ<code>useEffect</code> æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„é’©å­ï¼Œç”¨äºå¤„ç†å‰¯ä½œç”¨ï¼ˆä¾‹å¦‚æ•°æ®è·å–ã€è®¢é˜…ç­‰ï¼‰ã€‚ä½†æ˜¯ï¼Œå¦‚æœ <strong>ä¾èµ–æ•°ç»„</strong> é…ç½®ä¸å½“ï¼Œä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li><strong>å‰¯ä½œç”¨é‡å¤æ‰§è¡Œ</strong>ï¼šä¾èµ–æ•°ç»„è¿‡å¤§æˆ–é…ç½®é”™è¯¯æ—¶ï¼Œä¼šè§¦å‘ä¸å¿…è¦çš„å‰¯ä½œç”¨ã€‚</li>
<li><strong>å‰¯ä½œç”¨æœªæ›´æ–°</strong>ï¼šé—æ¼ä¾èµ–é¡¹æ—¶ï¼Œå‰¯ä½œç”¨æ— æ³•æ„ŸçŸ¥åˆ°æœ€æ–°çš„çŠ¶æ€æˆ–å±æ€§ã€‚</li>
<li><strong>æ€§èƒ½é—®é¢˜</strong>ï¼šè¿‡å¤šçš„æ— æ•ˆå‰¯ä½œç”¨è°ƒç”¨ä¼šæµªè´¹æ€§èƒ½</li>
</ol>
<p>ä¸¾ä¸ªä¾‹å­ï¼š
<strong>æœªä¼˜åŒ–ä»£ç ï¼šä¾èµ–æ•°ç»„é…ç½®é”™è¯¯</strong>ï¼Œå¦‚ä¸‹ä»£ç ï¼Œ<code>useEffect</code> åœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶éƒ½ä¼šæ‰§è¡Œã€‚å½“ <code>name</code> æ›´æ–°æ—¶ï¼Œå°½ç®¡ä¸ <code>count</code> æ— å…³ï¼Œå‰¯ä½œç”¨ä»ä¼šè¢«è§¦å‘ã€‚æ€ä¹ˆé…ç½®ä¸ç”¨å¤šè¯´äº†å§ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Counter</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [name, setName] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"React"</span>);

  <span class="hljs-comment">// useEffect ä¸­ä¾èµ–æ•°ç»„é—æ¼</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è®¡æ•°å™¨æ›´æ–°ä¸º: <span class="hljs-subst">${count}</span>`</span>);
    <span class="hljs-comment">// æ­¤å¤„æœªé…ç½®ä¾èµ–æ•°ç»„ï¼Œå¯¼è‡´æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶éƒ½ä¼šæ‰§è¡Œå‰¯ä½œç”¨</span>
  });

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è®¡æ•°å™¨: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;å¢åŠ è®¡æ•°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{name}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setName(e.target.value)}
        placeholder="è¾“å…¥ä½ çš„åå­—"
        /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Counter</span>;
</code></pre>
<p><em><strong>æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</strong></em></p>
<ol>
<li>
<p><strong>æ€»æ˜¯é…ç½®ä¾èµ–æ•°ç»„ï¼š</strong></p>
<p>å¦‚æœå‰¯ä½œç”¨ä¾èµ–æŸäº›çŠ¶æ€æˆ–å±æ€§ï¼ŒåŠ¡å¿…å°†å®ƒä»¬æ·»åŠ åˆ°ä¾èµ–æ•°ç»„ä¸­ã€‚</p>
</li>
<li>
<p><strong>ç©ºä¾èµ–æ•°ç»„ï¼š</strong></p>
<p>å¦‚æœå‰¯ä½œç”¨åªéœ€è¦åœ¨ç»„ä»¶æŒ‚è½½å’Œå¸è½½æ—¶è¿è¡Œï¼Œä½¿ç”¨ç©ºä¾èµ–æ•°ç»„ <code>[]</code>ã€‚</p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç»„ä»¶æŒ‚è½½"</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç»„ä»¶å¸è½½"</span>);
}, []); <span class="hljs-comment">// ä»…æ‰§è¡Œä¸€æ¬¡</span>
</code></pre>
</li>
<li>
<p><strong>æ³¨æ„å›è°ƒå‡½æ•°é—­åŒ…é—®é¢˜ï¼š</strong></p>
<p>åœ¨å‰¯ä½œç”¨ä¸­ä½¿ç”¨çŠ¶æ€æ—¶ï¼Œç¡®ä¿å°†çŠ¶æ€åŠ å…¥ä¾èµ–æ•°ç»„ï¼Œé¿å…é—­åŒ…é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>é¿å…å¤šä½™çš„ä¾èµ–ï¼š</strong></p>
<p>ä½¿ç”¨ <code>useCallback</code> æˆ– <code>useMemo</code> ç¼“å­˜ä¾èµ–ï¼Œå‡å°‘ä¾èµ–æ•°ç»„çš„å¤§å°ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> memoizedCallback = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// ç¼“å­˜å‡½æ•°</span>
}, [dependency]);
</code></pre>
</li>
</ol>
<h4 data-id="heading-42"><strong>4. æ¸²æŸ“åˆ—è¡¨ä¼˜åŒ–</strong></h4>
<h5 data-id="heading-43"><strong>4.1 ä½¿ç”¨ <code>key</code> æé«˜åˆ—è¡¨æ¸²æŸ“æ€§èƒ½</strong></h5>
<p>React ä¾èµ– <code>key</code> è¯†åˆ«åˆ—è¡¨é¡¹ï¼Œä¼˜åŒ–<strong>å¢åˆ ä¿®æ”¹</strong>æ“ä½œã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">List</span> = (<span class="hljs-params">{ items }</span>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    {items.map(item =&gt; (
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span> // âœ… ä½¿ç”¨å”¯ä¸€çš„ key
    ))}
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
);
</code></pre>
<p><strong>âš ï¸ é¿å…</strong></p>
<pre><code class="hljs language-jsx" lang="jsx">{items.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span> <span class="hljs-comment">// âŒ é¿å…ä½¿ç”¨ index ä½œä¸º keyï¼ˆä¸ç¨³å®šï¼‰</span>
))}
</code></pre>
<h4 data-id="heading-44"><strong>5. ä»£ç åˆ†å‰² &amp; èµ„æºä¼˜åŒ–</strong></h4>
<h5 data-id="heading-45"><strong>5.1 ä½¿ç”¨ <code>React.lazy</code> å’Œ <code>Suspense</code> è¿›è¡Œæ‡’åŠ è½½</strong></h5>
<p>React æ”¯æŒåŠ¨æ€åŠ è½½ç»„ä»¶ï¼Œå‡å°‘<strong>åˆå§‹åŠ è½½ä½“ç§¯</strong>ï¼Œæé«˜é¦–å±æ¸²æŸ“é€Ÿåº¦ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { <span class="hljs-title class_">Suspense</span>, lazy } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åŠ¨æ€å¯¼å…¥ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyComponent</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./HeavyComponent'</span>));

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">LazyComponent</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span></span>
);
</code></pre>
<p><strong>âœ… é€‚ç”¨åœºæ™¯</strong></p>
<ul>
<li><strong>å¤§ç»„ä»¶</strong>æˆ–<strong>éé¦–å±ç»„ä»¶</strong>æŒ‰éœ€åŠ è½½ï¼Œæé«˜æ€§èƒ½ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-46"><strong>6. çŠ¶æ€ç®¡ç†ä¼˜åŒ–</strong></h4>
<h5 data-id="heading-47"><strong>6.1 ä½¿ç”¨ <code>useReducer</code> ä»£æ›¿ <code>useState</code></strong></h5>
<p>å½“ <code>useState</code> çŠ¶æ€å¤æ‚æ—¶ï¼Œä½¿ç”¨ <code>useReducer</code> è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useReducer } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">reducer</span> = (<span class="hljs-params">state, action</span>) =&gt; {
  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'increment'</span>: <span class="hljs-keyword">return</span> { <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> };
    <span class="hljs-keyword">case</span> <span class="hljs-string">'decrement'</span>: <span class="hljs-keyword">return</span> { <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> - <span class="hljs-number">1</span> };
    <span class="hljs-attr">default</span>: <span class="hljs-keyword">return</span> state;
  }
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Counter</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Count: {state.count}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch({ type: 'increment' })}&gt;+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch({ type: 'decrement' })}&gt;-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h4 data-id="heading-48"><strong>7. ä½¿ç”¨ Immutable ä¸å¯å˜æ•°æ®</strong></h4>
<p>åœ¨ React é¡¹ç›®ä¸­ï¼Œ<strong>æ•°æ®çš„å¯å˜æ€§ï¼ˆmutabilityï¼‰</strong> å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå½±å“ç»„ä»¶çš„æ¸²æŸ“æ•ˆç‡ã€‚ä¸ºäº†æå‡æ€§èƒ½ï¼Œæ¨èä½¿ç”¨<strong>ä¸å¯å˜æ•°æ®ï¼ˆImmutable Dataï¼‰</strong> ï¼Œè¿™æ ·å¯ä»¥é¿å…å¯¹åŸå§‹æ•°æ®çš„ç›´æ¥ä¿®æ”¹ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Œæå‡åº”ç”¨çš„å¯ç»´æŠ¤æ€§ã€‚</p>
<h5 data-id="heading-49"><strong>7.1 ä»€ä¹ˆæ˜¯ä¸å¯å˜æ•°æ®ï¼ˆImmutable Dataï¼‰ï¼Ÿ</strong></h5>
<p><strong>ä¸å¯å˜æ•°æ®</strong> æŒ‡çš„æ˜¯<strong>æ•°æ®ä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸èƒ½è¢«ä¿®æ”¹</strong>ã€‚å¦‚æœæƒ³è¦æ›´æ–°æ•°æ®ï¼Œå¿…é¡»<strong>åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®å‰¯æœ¬</strong>ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸå§‹æ•°æ®ã€‚</p>
<p>åœ¨ JavaScript ä¸­ï¼Œ<strong>åŸºæœ¬æ•°æ®ç±»å‹</strong>ï¼ˆå¦‚ <code>string</code>ã€<code>number</code>ã€<code>boolean</code>ï¼‰æ˜¯<strong>ä¸å¯å˜çš„</strong>ï¼Œä½†<strong>å¼•ç”¨æ•°æ®ç±»å‹</strong>ï¼ˆå¦‚ <code>Array</code>ã€<code>Object</code>ï¼‰æ˜¯<strong>å¯å˜çš„</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> obj = { <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span> };
obj.<span class="hljs-property">name</span> = <span class="hljs-string">"Bob"</span>; <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹äº†åŸå§‹å¯¹è±¡</span>
</code></pre>
<p>è¿™ä¼šå¯¼è‡´ React æ— æ³•æ­£ç¡®åˆ¤æ–­æ•°æ®å˜åŒ–ï¼Œè¿›è€Œå¯¼è‡´<strong>é”™è¯¯çš„æ¸²æŸ“è¡Œä¸ºæˆ–æ€§èƒ½æŸè€—</strong>ã€‚</p>
<h5 data-id="heading-50"><strong>7.2 ä¸ºä»€ä¹ˆä½¿ç”¨ Immutable æ•°æ®ï¼Ÿ</strong></h5>
<p><strong>1. é™ä½æ•°æ®å¯å˜æ€§å¸¦æ¥çš„å¤æ‚åº¦</strong></p>
<p>åœ¨çŠ¶æ€ç®¡ç†ä¸­ï¼Œå¯å˜æ•°æ®ä¼šå¯¼è‡´éš¾ä»¥è¿½è¸ªçš„ bugï¼Œå› ä¸ºå¯¹è±¡å¯ä»¥åœ¨ä¸åŒåœ°æ–¹è¢«ä¿®æ”¹ï¼Œå¯¼è‡´ä¸å¯é¢„æµ‹çš„ UI å˜åŒ–ã€‚ä½¿ç”¨ Immutable æ•°æ®åï¼Œæ¯æ¬¡æ›´æ–°éƒ½ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œä¿è¯æ•°æ®çš„å¯é¢„æµ‹æ€§ã€‚</p>
<p><strong>2. æé«˜ React æ€§èƒ½ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“</strong></p>
<p>React ä¾èµ– <code>shouldComponentUpdate</code>ã€<code>React.memo</code> æˆ– <code>PureComponent</code> è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œ<strong>ä½†å¦‚æœæ•°æ®æ˜¯å¯å˜çš„ï¼ŒReact æ— æ³•æ­£ç¡®åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“</strong>ã€‚</p>
<p><strong>é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥ä¿®æ”¹ stateï¼Œå¯¼è‡´ React ä¸çŸ¥é“æ•°æ®å˜åŒ–</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span> });

<span class="hljs-keyword">const</span> <span class="hljs-title function_">updateUser</span> = (<span class="hljs-params"/>) =&gt; {
  user.<span class="hljs-property">name</span> = <span class="hljs-string">"Bob"</span>;  <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹ stateï¼Œä¸ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼</span>
  <span class="hljs-title function_">setUser</span>(user);
};
</code></pre>
<p>React å‘ç° <code>user</code> çš„<strong>å¼•ç”¨æ²¡æœ‰å˜</strong>ï¼Œæ‰€ä»¥ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œå¯¼è‡´ UI <strong>ä¸ä¼šæ›´æ–°</strong>ã€‚</p>
<p><strong>æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ä¸å¯å˜æ•°æ®</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateUser</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setUser</span>(<span class="hljs-function"><span class="hljs-params">prevUser</span> =&gt;</span> ({ ...prevUser, <span class="hljs-attr">name</span>: <span class="hljs-string">"Bob"</span> })); <span class="hljs-comment">// åˆ›å»ºæ–°å¯¹è±¡</span>
};
</code></pre>
<p>è¿™æ · <code>setUser</code> ä¼ å…¥çš„æ˜¯<strong>æ–°çš„å¯¹è±¡å¼•ç”¨</strong>ï¼ŒReact æ‰èƒ½æ£€æµ‹åˆ°å˜åŒ–ï¼Œè§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p>
<p><strong>3. æ›´å¥½çš„æ—¶é—´æ—…è¡Œï¼ˆTime Travelï¼‰æ”¯æŒ</strong></p>
<ul>
<li>åœ¨ Redux ä¸­ï¼Œæ’¤é”€/é‡åšï¼ˆUndo/Redoï¼‰åŠŸèƒ½éœ€è¦ä¿å­˜çŠ¶æ€å†å²ã€‚</li>
<li><strong>Immutable æ•°æ®åªå­˜å‚¨å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¤åˆ¶æ•´ä¸ªå¯¹è±¡ï¼Œå‡å°‘å†…å­˜å ç”¨</strong>ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šRedux æ—¶é—´æ—…è¡Œ</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> history = [];
<span class="hljs-keyword">let</span> state = { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> };

<span class="hljs-keyword">const</span> newState = { ...state, <span class="hljs-attr">count</span>: <span class="hljs-number">1</span> };
history.<span class="hljs-title function_">push</span>(state); <span class="hljs-comment">// ä¿å­˜æ—§çŠ¶æ€</span>

state = newState;
history.<span class="hljs-title function_">push</span>(state); <span class="hljs-comment">// ä¿å­˜æ–°çŠ¶æ€</span>
</code></pre>
<p>è¿™æ ·å¯ä»¥é«˜æ•ˆåœ°å®ç°<strong>æ—¶é—´æ—…è¡Œï¼ˆTime Travel Debuggingï¼‰</strong> ã€‚</p>
<p><strong>4. é¿å…å¹¶å‘é—®é¢˜ï¼Œæé«˜å¯é¢„æµ‹æ€§</strong></p>
<p>React 18 å¼•å…¥äº† <strong>å¹¶å‘æ¨¡å¼ï¼ˆConcurrent Modeï¼‰</strong> ï¼Œå¯èƒ½ä¼šåœ¨<strong>ä¸åŒçš„æ¸²æŸ“é˜¶æ®µä¿®æ”¹ state</strong>ã€‚</p>
<p><strong>Immutable æ•°æ®ä¿è¯æ•°æ®åªè¯»</strong>ï¼Œé¿å…äº† race conditionï¼ˆç«æ€æ¡ä»¶ï¼‰å¯¼è‡´çš„é”™è¯¯ã€‚</p>
<h5 data-id="heading-51"><strong>7.3 å¦‚ä½•åœ¨ React é¡¹ç›®ä¸­ä½¿ç”¨ Immutableï¼Ÿ</strong></h5>
<p><strong>çº¯ JavaScript å®ç° Immutable</strong></p>
<p>åœ¨ä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥<strong>ä½¿ç”¨ <code>Object.assign()</code> æˆ– å±•å¼€è¿ç®—ç¬¦ <code>...</code></strong> æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> };

<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¿®æ”¹åŸå§‹å¯¹è±¡</span>
<span class="hljs-keyword">const</span> newUser = { ...user, <span class="hljs-attr">age</span>: <span class="hljs-number">26</span> };

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">age</span>); <span class="hljs-comment">// 25</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newUser.<span class="hljs-property">age</span>); <span class="hljs-comment">// 26</span>
</code></pre>
<p>å¯¹äºæ•°ç»„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];

<span class="hljs-comment">// æ·»åŠ æ–°å…ƒç´ ï¼Œè¿”å›æ–°æ•°ç»„</span>
<span class="hljs-keyword">const</span> newList = [...list, <span class="hljs-number">4</span>];

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(list); <span class="hljs-comment">// [1, 2, 3]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newList); <span class="hljs-comment">// [1, 2, 3, 4]</span>
</code></pre>
<p><strong>ä½¿ç”¨ Immutable.js</strong></p>
<p>Immutable.js æä¾› <code>List</code>ã€<code>Map</code>ã€<code>Set</code> ç­‰ä¸å¯å˜æ•°æ®ç»“æ„ï¼Œé¿å…æ‰‹åŠ¨æ·±æ‹·è´ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { fromJS } <span class="hljs-keyword">from</span> <span class="hljs-string">"immutable"</span>;

<span class="hljs-keyword">const</span> user = <span class="hljs-title function_">fromJS</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> });
<span class="hljs-keyword">const</span> newUser = user.<span class="hljs-title function_">set</span>(<span class="hljs-string">"age"</span>, <span class="hljs-number">26</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-title function_">get</span>(<span class="hljs-string">"age"</span>)); <span class="hljs-comment">// 25</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newUser.<span class="hljs-title function_">get</span>(<span class="hljs-string">"age"</span>)); <span class="hljs-comment">// 26</span>
</code></pre>
<p><strong>Immutable.js çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>æ”¯æŒåµŒå¥—ç»“æ„</strong>ï¼ˆæ— éœ€æ‰‹åŠ¨æ‹·è´æ·±å±‚æ•°æ®ï¼‰ã€‚</li>
<li><strong>ä¼˜åŒ–æ€§èƒ½ï¼ˆç»“æ„å…±äº«ï¼‰</strong> ï¼šç›¸åŒçš„æ•°æ®ä¸ä¼šé‡å¤å­˜å‚¨ï¼Œè€Œæ˜¯å…±äº«å¼•ç”¨ã€‚</li>
</ul>
<h5 data-id="heading-52"><strong>7.4 æ€»ç»“</strong></h5>
<p>ä½¿ç”¨ Immutable æ•°æ®ä¼˜åŒ– React é¡¹ç›®ï¼Œå¸¦æ¥çš„<strong>æ ¸å¿ƒæ”¶ç›Š</strong>åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>å‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“</strong>ï¼ˆé¿å…å¯¹è±¡å¼•ç”¨å˜åŒ–å¯¼è‡´çš„ <code>re-render</code>ï¼‰ã€‚</li>
<li><strong>æå‡å†…å­˜ç®¡ç†</strong>ï¼ˆç»“æ„å…±äº«ï¼Œé¿å…æ·±æ‹·è´ï¼‰ã€‚</li>
<li><strong>æ›´å¥½çš„æ—¶é—´æ—…è¡Œï¼ˆUndo/Redoï¼‰</strong> ï¼ˆRedux çŠ¶æ€ç®¡ç†çš„æœ€ä½³å®è·µï¼‰ã€‚</li>
<li><strong>é¿å…å¹¶å‘é—®é¢˜</strong>ï¼ˆReact 18 å¹¶å‘æ¨¡å¼å®‰å…¨ï¼‰ã€‚</li>
<li><strong>æå‡ä»£ç å¯ç»´æŠ¤æ€§</strong>ï¼ˆé˜²æ­¢æ„å¤–ä¿®æ”¹ <code>state</code>ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-53"><strong>8. é¿å…é˜»å¡ UI çº¿ç¨‹</strong></h4>
<h5 data-id="heading-54"><strong>8.1 ä½¿ç”¨ Web Workers</strong></h5>
<p>å¯¹äºè®¡ç®—é‡å¤§çš„ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ Web Workers è¿›è¡Œ<strong>å¼‚æ­¥è®¡ç®—</strong>ï¼Œé¿å…é˜»å¡ UIã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'./worker.js'</span>);

worker.<span class="hljs-title function_">postMessage</span>(<span class="hljs-number">1000000</span>); <span class="hljs-comment">// å‘é€æ•°æ®åˆ° Web Worker</span>
worker.<span class="hljs-property">onmessage</span> = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Result:'</span>, e.<span class="hljs-property">data</span>);
</code></pre>
<h4 data-id="heading-55"><strong>æ€»ç»“</strong></h4>
<p>ä»¥ä¸Šæ˜¯ React æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒç­–ç•¥ï¼ŒåŒ…æ‹¬ï¼š</p>
<ol>
<li>é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ï¼ˆ<code>React.memo</code>ã€<code>PureComponent</code>ï¼‰ã€‚</li>
<li>ç¼“å­˜è®¡ç®—ç»“æœå’Œå‡½æ•°ï¼ˆ<code>useMemo</code>ã€<code>useCallback</code>ï¼‰ã€‚</li>
<li>åˆç†ä½¿ç”¨useEffectï¼Œé¿å…ä¸å¿…è¦çš„å‰¯ä½œç”¨ã€‚</li>
<li>ä»£ç åˆ†å‰²ï¼ˆ<code>React.lazy</code>ã€<code>Suspense</code>ï¼‰ã€‚</li>
<li>ä¼˜åŒ–çŠ¶æ€ç®¡ç†ï¼ˆ<code>useReducer</code>ï¼‰ã€‚</li>
<li>é¿å…ä¸»çº¿ç¨‹é˜»å¡ï¼ˆWeb Workersï¼‰ã€‚</li>
<li>æ¸²æŸ“åˆ—è¡¨ä¼˜åŒ–ï¼ˆ<code>key</code>ï¼‰ã€‚</li>
<li>èµ„æºä¼˜åŒ–ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰ã€‚</li>
</ol>
<p>åˆç†åº”ç”¨è¿™äº›ä¼˜åŒ–æ–¹æ³•ï¼Œå¯ä»¥æå¤§æé«˜ React åº”ç”¨çš„æ€§èƒ½ï¼</p>
<h3 data-id="heading-56">å°ç¨‹åºçš„ä¼˜åŒ–</h3>
<p>å¾…æ›´æ–°ã€‚</p>
<hr/>
<h2 data-id="heading-57">3. å¼€å‘é˜¶æ®µçš„ä¼˜åŒ–</h2>
<p>å¼€å‘é˜¶æ®µçš„ä¼˜åŒ–å¯¹äºæˆ‘ä»¬å¼€å‘äººå‘˜ä¹Ÿéå¸¸é‡è¦ï¼Œä¹Ÿåº”è¯¥å½’çº³åˆ°æ€§èƒ½ä¼˜åŒ–çš„èŒƒç•´å»èŠã€‚åœ¨ Reactã€Vue æˆ–å…¶ä»–å‰ç«¯æ¡†æ¶çš„å¼€å‘é˜¶æ®µï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨<strong>æ„å»ºé€Ÿåº¦ã€ä»£ç çƒ­æ›´æ–°ã€è°ƒè¯•æ•ˆç‡ã€å¼€å‘ç¯å¢ƒå¢å¼º</strong>ç­‰ã€‚ä¼˜åŒ–æ„å»ºå’Œå¼€å‘ä½“éªŒï¼Œå¯ä»¥æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<p>å¦‚æœæ˜¯ä¸€å¥è¯æ¦‚æ‹¬ä¼˜åŒ–å¼€å‘é˜¶æ®µçš„æ€§èƒ½:<strong>é‚£å°±æ˜¯ç”¨viteç­‰æ›´æ–°çš„æ‰“åŒ…å·¥å…·ã€‚</strong></p>
<p>ä½†æ˜¯ä¸€äº›è€æ—§çš„é¡¹ç›®ï¼Œä½¿ç”¨webpackçš„æˆ‘ä»¬è‚¯å®šè¿˜æ˜¯è¦å»çŸ¥é“æ€ä¹ˆå»ä¼˜åŒ–æ„å»ºé€Ÿåº¦ï¼Œçƒ­æ›´æ–°ç­‰ç­‰æ¥æå‡æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-58">å¦‚ä½•å‡å°‘æ‰“åŒ…è€—æ—¶ï¼Ÿ</h3>
<p>ä¼ ç»Ÿçš„æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><strong>åˆ©ç”¨å¤šçº¿ç¨‹å¹¶è¡Œç¼–è¯‘</strong>ï¼šå¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Famireh%2Fhappypack" target="_blank" title="https://github.com/amireh/happypack" ref="nofollow noopener noreferrer">Happypack</a> æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwebpack-contrib%2Fthread-loader" target="_blank" title="https://github.com/webpack-contrib/thread-loader" ref="nofollow noopener noreferrer">thread-loader</a> æ¥æå‡æ„å»ºé€Ÿåº¦ï¼Œä½¿ Webpack èƒ½å¤Ÿå¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼Œä»è€Œå‡å°‘å•çº¿ç¨‹çš„ç¼–è¯‘ç“¶é¢ˆã€‚</p>
</li>
<li>
<p><strong>æ‹†åˆ†æ¨¡å—ï¼Œå‡å°‘é‡å¤ç¼–è¯‘</strong>ï¼šå€ŸåŠ© <a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.js.org%2Fplugins%2Fdll-plugin%2F" target="_blank" title="https://webpack.js.org/plugins/dll-plugin/" ref="nofollow noopener noreferrer">DLL Plugin</a>ï¼Œå¯ä»¥å°†ä¸ç»å¸¸å˜åŠ¨çš„ä¾èµ–åº“é¢„ç¼–è¯‘æˆåŠ¨æ€é“¾æ¥åº“ï¼Œæé«˜æ„å»ºæ•ˆç‡å¹¶å‡å°‘æ‰“åŒ…æ—¶é—´ã€‚</p>
</li>
<li>
<p><strong>ç¼“å­˜ç¼–è¯‘ç»“æœï¼ŒåŠ å¿«å¢é‡æ„å»º</strong>ï¼šWebpack æä¾›äº†å†…ç½®çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.js.org%2Fconfiguration%2Fcache%2F" target="_blank" title="https://webpack.js.org/configuration/cache/" ref="nofollow noopener noreferrer">cache åŠŸèƒ½</a>ï¼Œå¯ä»¥å­˜å‚¨æ‰“åŒ…ç»“æœï¼Œé¿å…é‡å¤ç¼–è¯‘ï¼Œæå‡æ„å»ºæ€§èƒ½ã€‚</p>
</li>
<li>
<p><strong>ä¼˜åŒ–é¡¹ç›®æ„å»ºé€»è¾‘</strong>ï¼šé€šè¿‡è°ƒæ•´é¡¹ç›®ç»“æ„ï¼Œä½¿æ‰“åŒ…è¿‡ç¨‹åªé’ˆå¯¹æ”¹åŠ¨çš„éƒ¨åˆ†ä»£ç è¿›è¡Œå¢é‡ç¼–è¯‘ï¼Œå‡å°‘æ•´ä½“æ„å»ºçš„å·¥ä½œé‡ï¼Œä»è€Œæœ‰æ•ˆé™ä½ç¼–è¯‘æ—¶é—´ã€‚</p>
</li>
</ul>
<h4 data-id="heading-59"><strong>1. åˆ©ç”¨å¤šçº¿ç¨‹å¹¶è¡Œç¼–è¯‘</strong></h4>
<p>åœ¨ Webpack é»˜è®¤æƒ…å†µä¸‹ï¼Œæ•´ä¸ªæ„å»ºè¿‡ç¨‹æ˜¯å•çº¿ç¨‹çš„ï¼Œè€Œ Webpack åœ¨å¤„ç†å¤§é‡æ¨¡å—æ—¶ä¼šé‡åˆ°æ€§èƒ½ç“¶é¢ˆã€‚ä¸ºäº†æé«˜ç¼–è¯‘é€Ÿåº¦ï¼Œå¯ä»¥å€ŸåŠ© <strong>Happypack</strong> æˆ– <strong>thread-loader</strong> æ¥è¿›è¡Œå¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†ã€‚</p>
<ul>
<li><strong>Happypack</strong>ï¼šå¯ä»¥å°† Webpack ä»»åŠ¡åˆ†å‘åˆ°å¤šä¸ªå­è¿›ç¨‹ï¼ˆWorkerï¼‰å¹¶è¡Œæ‰§è¡Œï¼Œä»è€Œå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU èµ„æºï¼Œæé«˜æ„å»ºæ•ˆç‡ã€‚ï¼ˆæ¯”è¾ƒè€äº† ä¸æ¨èï¼‰</li>
<li><strong>thread-loader</strong>ï¼šé€‚ç”¨äº Webpack 4 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œèƒ½å¤Ÿä¸ºæŸäº›å¤„ç†ç¹é‡ä»»åŠ¡ï¼ˆå¦‚ Babelã€TS è½¬è¯‘ï¼‰çš„ loader å¼€å¯ Worker çº¿ç¨‹ï¼Œå®ç°å¹¶è¡Œç¼–è¯‘ï¼Œæé«˜é€Ÿåº¦ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šä½¿ç”¨ thread-loader æå‡ Babel ç¼–è¯‘æ€§èƒ½</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/.js$/</span>,
        <span class="hljs-attr">use</span>: [
          {
            <span class="hljs-attr">loader</span>: <span class="hljs-string">'thread-loader'</span>, <span class="hljs-comment">// å¼€å¯å¤šçº¿ç¨‹</span>
            <span class="hljs-attr">options</span>: {
              <span class="hljs-attr">workers</span>: <span class="hljs-number">4</span>, <span class="hljs-comment">// è®¾å®šçº¿ç¨‹æ•°</span>
            },
          },
          <span class="hljs-string">'babel-loader'</span>,
        ],
      },
    ],
  },
};
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>é€‚ç”¨äºå¤§è§„æ¨¡é¡¹ç›®ï¼Œå‡å°‘ Webpack åœ¨è½¬æ¢ä»£ç ï¼ˆå¦‚ Babel è½¬è¯‘ï¼‰æ—¶çš„ CPU å¼€é”€ï¼Œæé«˜æ„å»ºé€Ÿåº¦ã€‚</li>
<li>ä½†çº¿ç¨‹å¼€é”€è¾ƒå¤§ï¼Œå°å‹é¡¹ç›®å¯èƒ½å¾—ä¸å¿å¤±ï¼Œéœ€æƒè¡¡æ˜¯å¦å¯ç”¨ã€‚</li>
</ul>
<h4 data-id="heading-60"><strong>2. æ‹†åˆ†æ¨¡å—ï¼Œå‡å°‘é‡å¤ç¼–è¯‘</strong></h4>
<p>Webpack çš„ <strong>DLL Pluginï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰</strong> å¯ä»¥å°†ä¸å¸¸å˜åŠ¨çš„ç¬¬ä¸‰æ–¹ä¾èµ–ï¼ˆå¦‚ <code>react</code>ã€<code>lodash</code>ã€<code>moment</code>ï¼‰å•ç‹¬ç¼–è¯‘ï¼Œå¹¶åœ¨æ„å»ºæ—¶ç›´æ¥å¼•ç”¨ï¼Œé¿å…æ¯æ¬¡é‡æ–°ç¼–è¯‘è¿™äº›åº“ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šä½¿ç”¨ DLL Plugin é¢„ç¼–è¯‘ä¾èµ–åº“</strong></p>
<ul>
<li>
<p><strong>åˆ›å»º <code>webpack.dll.js</code> é…ç½®æ–‡ä»¶</strong>ï¼ˆæ‰“åŒ…ç¬¬ä¸‰æ–¹åº“ï¼‰</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">vendor</span>: [<span class="hljs-string">'react'</span>, <span class="hljs-string">'react-dom'</span>, <span class="hljs-string">'lodash'</span>], <span class="hljs-comment">// éœ€è¦é¢„ç¼–è¯‘çš„åº“</span>
  },
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dll'</span>),
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].dll.js'</span>,
    <span class="hljs-attr">library</span>: <span class="hljs-string">'[name]_library'</span>,
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">DllPlugin</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'[name]_library'</span>,
      <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dll'</span>, <span class="hljs-string">'[name]-manifest.json'</span>),
    }),
  ],
};
</code></pre>
</li>
<li>
<p><strong>åœ¨ Webpack ä¸»é…ç½®æ–‡ä»¶ä¸­å¼•å…¥ DLL</strong>ï¼ˆå¼•ç”¨é¢„ç¼–è¯‘å¥½çš„åº“ï¼‰</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">DllReferencePlugin</span>({
      <span class="hljs-attr">manifest</span>: <span class="hljs-built_in">require</span>(path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dll'</span>, <span class="hljs-string">'vendor-manifest.json'</span>)),
    }),
  ],
};
</code></pre>
</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>é€‚ç”¨äºåŒ…å«å¤§é‡ç¨³å®šç¬¬ä¸‰æ–¹ä¾èµ–çš„é¡¹ç›®ï¼Œå¦‚ <code>react</code>ã€<code>vue</code>ã€<code>lodash</code>ã€<code>moment</code> ç­‰ã€‚</li>
<li>é¿å…åœ¨æ¯æ¬¡æ„å»ºæ—¶é‡å¤ç¼–è¯‘ä¸å˜çš„ä¾èµ–ï¼Œå¤§å¹…å‡å°‘ç¼–è¯‘æ—¶é—´ã€‚</li>
</ul>
<h4 data-id="heading-61"><strong>3. ç¼“å­˜ç¼–è¯‘ç»“æœï¼ŒåŠ å¿«å¢é‡æ„å»º</strong></h4>
<p>Webpack é€šè¿‡ <strong>cache</strong> æœºåˆ¶å­˜å‚¨ç¼–è¯‘ç»“æœï¼Œåœ¨åç»­æ„å»ºä¸­ç›´æ¥å¤ç”¨ï¼Œä»è€Œæé«˜æ€§èƒ½ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡å¤ç¼–è¯‘ã€‚å¸¸è§çš„ç¼“å­˜ä¼˜åŒ–ç­–ç•¥åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>babel-loader ç¼“å­˜</strong>ï¼šå‡å°‘ Babel è½¬è¯‘çš„é‡å¤è®¡ç®—ã€‚</li>
<li><strong>terser-webpack-plugin ç¼“å­˜</strong>ï¼šåŠ é€Ÿä»£ç å‹ç¼©è¿‡ç¨‹ã€‚</li>
<li><strong>æŒä¹…åŒ–ç¼“å­˜</strong>ï¼ˆ<code>cache: { type: 'filesystem' }</code>ï¼‰ï¼šå°†ç¼“å­˜å­˜å‚¨åˆ°ç£ç›˜ï¼ŒåŠ å¿«äºŒæ¬¡æ„å»ºé€Ÿåº¦ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šå¯ç”¨ Webpack ç¼“å­˜</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">cache</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'filesystem'</span>, <span class="hljs-comment">// æŒä¹…åŒ–ç¼“å­˜ï¼ˆå­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼‰</span>
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/.js$/</span>,
        <span class="hljs-attr">use</span>: [
          {
            <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
            <span class="hljs-attr">options</span>: {
              <span class="hljs-attr">cacheDirectory</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨ Babel ç¼“å­˜</span>
            },
          },
        ],
      },
    ],
  },
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">minimizer</span>: [
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>({
        <span class="hljs-attr">cache</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¼€å¯å‹ç¼©ç¼“å­˜</span>
      }),
    ],
  },
};
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>é€‚ç”¨äºå¤§å‹é¡¹ç›®ï¼Œèƒ½å¤Ÿæœ‰æ•ˆå‡å°‘æ¯æ¬¡æ„å»ºçš„æ—¶é—´ã€‚</li>
<li>å¼€å‘æ¨¡å¼ä¸‹æ¨èä½¿ç”¨ <code>cacheDirectory: true</code> æ¥æå‡ Babel è§£æé€Ÿåº¦ã€‚</li>
</ul>
<h4 data-id="heading-62"><strong>4. ä¼˜åŒ–é¡¹ç›®æ„å»ºé€»è¾‘ï¼ˆå¢é‡ç¼–è¯‘ï¼‰</strong></h4>
<p>Webpack é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯æ¬¡ç¼–è¯‘éƒ½ä¼šé‡æ–°è§£ææ‰€æœ‰æ–‡ä»¶ï¼Œè€Œ <strong>å¢é‡ç¼–è¯‘</strong> åªé’ˆå¯¹å˜æ›´æ–‡ä»¶è¿›è¡Œé‡æ–°æ‰“åŒ…ï¼Œä»è€Œæé«˜æ„å»ºæ•ˆç‡ã€‚å¸¸è§çš„æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong><code>webpack --watch</code> ç›‘å¬æ–‡ä»¶å˜æ›´</strong>ï¼šä»…ç¼–è¯‘æ”¹åŠ¨çš„æ–‡ä»¶ï¼Œæé«˜çƒ­æ›´æ–°é€Ÿåº¦ã€‚</li>
<li><strong><code>Hot Module Replacement (HMR)</code> çƒ­æ›´æ–°</strong>ï¼šä»…æ›´æ–°å˜æ›´éƒ¨åˆ†ï¼Œé¿å…æ•´ä¸ªåº”ç”¨é‡æ–°åŠ è½½ã€‚</li>
<li><strong><code>module.exports.performance</code> è®¾å®šæ€§èƒ½æç¤º</strong>ï¼šå¸®åŠ©è¯†åˆ«å¤§æ–‡ä»¶ï¼Œé¿å…æ€§èƒ½é—®é¢˜ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šå¯ç”¨ Webpack ç›‘å¬æ¨¡å¼ï¼ˆå¢é‡ç¼–è¯‘ï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">watch</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç›‘å¬æ¨¡å¼</span>
  <span class="hljs-attr">devServer</span>: {
    <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨çƒ­æ›´æ–°</span>
  },
};
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>é€‚ç”¨äºå¼€å‘æ¨¡å¼ï¼Œæé«˜ä»£ç æ”¹åŠ¨åçš„åé¦ˆé€Ÿåº¦ã€‚</li>
<li>å¯ä»¥ç»“åˆ <code>webpack-dev-server</code> è¿›è¡Œå®æ—¶æ›´æ–°ï¼Œæ— éœ€åˆ·æ–°é¡µé¢ã€‚</li>
</ul>
<h4 data-id="heading-63">å…¶ä»–</h4>
<ul>
<li>
<p><strong>externals æå–é¡¹ç›®ä¾èµ–</strong></p>
<p>æ„å»ºäº§ç‰©ä¸­æœ€å¤§çš„å‡ ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€äº›å…¬å…±ä¾èµ–åŒ…ï¼Œé‚£ä¹ˆåªè¦æŠŠè¿™äº›ä¾èµ–æå–å‡ºæ¥ï¼Œå°±å¯ä»¥è§£å†³ä¸»åŒ…è¿‡å¤§çš„é—®é¢˜</p>
<p>å¯ä»¥ä½¿ç”¨ <code>externals</code> æ¥æå–è¿™äº›ä¾èµ–åŒ…ï¼Œå‘Šè¯‰ webpack è¿™äº›ä¾èµ–æ˜¯å¤–éƒ¨ç¯å¢ƒæä¾›çš„ï¼Œåœ¨æ‰“åŒ…æ—¶å¯ä»¥å¿½ç•¥å®ƒä»¬ï¼Œå°±ä¸ä¼šå†æ‰“åˆ°ä¸»åŒ…ä¸­</p>
<p>vue.config.js ä¸­é…ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">configureWebpack</span>: {
    <span class="hljs-attr">externals</span>: {
      <span class="hljs-attr">vue</span>: <span class="hljs-string">'Vue'</span>,
      <span class="hljs-string">'vue-router'</span>: <span class="hljs-string">'VueRouter'</span>,
      <span class="hljs-attr">axios</span>: <span class="hljs-string">'axios'</span>,
      <span class="hljs-attr">echarts</span>: <span class="hljs-string">'echarts'</span>
    }
}
</code></pre>
<p>åœ¨ index.html ä¸­ä½¿ç”¨ CDN å¼•å…¥ä¾èµ–</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://lib.baomitu.com/vue/2.6.14/vue.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://lib.baomitu.com/vue-router/3.5.1/vue-router.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://lib.baomitu.com/axios/1.2.1/axios.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://lib.baomitu.com/echarts/5.3.2/echarts.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-64"><strong>æ€»ç»“</strong></h4>






























<table><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>å¤šçº¿ç¨‹å¹¶è¡Œç¼–è¯‘</strong></td><td>æå‡ç¼–è¯‘é€Ÿåº¦ï¼Œå‡å°‘å•çº¿ç¨‹ç“¶é¢ˆ</td><td>é€‚ç”¨äºå¤§é¡¹ç›®çš„ Babel è§£æã€TS è½¬è¯‘</td></tr><tr><td><strong>æ‹†åˆ†æ¨¡å—ï¼ˆDLL Pluginï¼‰</strong></td><td>é¢„ç¼–è¯‘ä¸å¸¸å˜åŠ¨çš„ä¾èµ–åº“ï¼Œå‡å°‘é‡å¤ç¼–è¯‘</td><td>é€‚ç”¨äºåŒ…å«å¤§é‡ç¨³å®šä¾èµ–çš„é¡¹ç›®</td></tr><tr><td><strong>ç¼“å­˜ç¼–è¯‘ç»“æœ</strong></td><td>å­˜å‚¨ç¼–è¯‘ç»“æœï¼ŒåŠ å¿«äºŒæ¬¡æ„å»º</td><td>é€‚ç”¨äºå¤§å‹é¡¹ç›®ï¼Œæé«˜å¢é‡ç¼–è¯‘é€Ÿåº¦</td></tr><tr><td><strong>ä¼˜åŒ–æ„å»ºé€»è¾‘ï¼ˆå¢é‡ç¼–è¯‘ï¼‰</strong></td><td>ä»…ç¼–è¯‘å˜æ›´éƒ¨åˆ†ï¼Œå‡å°‘æ•´ä½“æ„å»ºæ—¶é—´</td><td>é€‚ç”¨äºå¼€å‘æ¨¡å¼ï¼Œç»“åˆçƒ­æ›´æ–°æå‡ä½“éªŒ</td></tr></tbody></table>
<h3 data-id="heading-65">viteç­‰esbuildå†…æ ¸çš„æ‰“åŒ…å·¥å…·å‡ºç°</h3>
<p>ç›´æ¥æ”¹ç”¨viteå°±å¥½äº†ï¼Œå†…åœ¨åŸç†åœ¨æˆ‘çš„å…¶ä»–æ–‡ç« ä¸­æœ‰è®²ï¼Œä¸èµ˜è¿°ã€‚</p>
<h2 data-id="heading-66">4. åˆ†æè¯„ä¼°</h2>
<p>åœ¨å‰ç«¯é¡¹ç›®ä¸­ï¼Œæ€§èƒ½ä¼˜åŒ–ä¸æ˜¯ç›²ç›®çš„ï¼Œè€Œæ˜¯åŸºäºé‡åŒ–çš„æŒ‡æ ‡å’Œç›‘æ§æ•°æ®æ¥åˆ¤æ–­ <strong>å“ªäº›åœ°æ–¹éœ€è¦ä¼˜åŒ–</strong> ä»¥åŠ <strong>å¦‚ä½•ä¼˜åŒ–</strong>ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‰ç«¯æ€§èƒ½ç›‘æ§ã€åˆ†æå·¥å…·å’ŒæŒ‡æ ‡æ•°æ®ï¼Œæ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆï¼Œå¹¶é’ˆå¯¹æ€§åœ°è¿›è¡Œä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-67"><strong>1. ä»€ä¹ˆæ˜¯å‰ç«¯æ€§èƒ½ç›‘æ§é‡åŒ–ï¼Ÿ</strong></h3>
<p><strong>å‰ç«¯æ€§èƒ½ç›‘æ§é‡åŒ–</strong> æ˜¯æŒ‡ä½¿ç”¨å¯é‡åŒ–çš„æŒ‡æ ‡ï¼ˆå¦‚é¡µé¢åŠ è½½æ—¶é—´ã€äº¤äº’å“åº”é€Ÿåº¦ã€èµ„æºå¤§å°ç­‰ï¼‰æ¥è¯„ä¼°ç½‘é¡µæˆ–åº”ç”¨çš„æ€§èƒ½ï¼Œå¹¶é€šè¿‡ç›‘æµ‹è¿™äº›æŒ‡æ ‡çš„æ•°æ®è¶‹åŠ¿ï¼Œæ‰¾å‡ºå¯èƒ½çš„æ€§èƒ½ç“¶é¢ˆã€‚</p>
<p>å¸¸è§çš„æ€§èƒ½ä¼˜åŒ–éœ€è¦å…³æ³¨ä»¥ä¸‹å‡ æ–¹é¢ï¼š</p>
<ul>
<li><strong>é¡µé¢åŠ è½½æ€§èƒ½</strong>ï¼ˆé¦–å±æ¸²æŸ“æ—¶é—´ã€ç™½å±æ—¶é—´ã€èµ„æºåŠ è½½é€Ÿåº¦ï¼‰</li>
<li><strong>äº¤äº’å“åº”æ€§èƒ½</strong>ï¼ˆç”¨æˆ·æ“ä½œçš„å»¶è¿Ÿã€åŠ¨ç”»æµç•…åº¦ï¼‰</li>
<li><strong>ä»£ç æ‰§è¡Œæ€§èƒ½</strong>ï¼ˆJavaScript è¿è¡Œé€Ÿåº¦ã€è®¡ç®—å¯†é›†å‹ä»»åŠ¡ä¼˜åŒ–ï¼‰</li>
<li><strong>ç½‘ç»œè¯·æ±‚ä¼˜åŒ–</strong>ï¼ˆHTTP è¯·æ±‚æ•°ã€è¯·æ±‚å¤§å°ã€CDN åŠ é€Ÿï¼‰</li>
<li><strong>é”™è¯¯å’Œå¼‚å¸¸ç›‘æ§</strong>ï¼ˆJS æŠ¥é”™ã€ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-68"><strong>2. å‰ç«¯æ€§èƒ½ç›‘æ§çš„æ ¸å¿ƒæŒ‡æ ‡</strong></h3>
<p>å‰ç«¯æ€§èƒ½ç›‘æ§æŒ‡æ ‡å¯ä»¥åˆ†ä¸º <strong>é¡µé¢åŠ è½½æ€§èƒ½æŒ‡æ ‡</strong> å’Œ <strong>äº¤äº’ä½“éªŒæ€§èƒ½æŒ‡æ ‡</strong>ã€‚</p>
<h4 data-id="heading-69"><strong>2.1 é¡µé¢åŠ è½½æ€§èƒ½æŒ‡æ ‡</strong></h4>








































<table><thead><tr><th>æŒ‡æ ‡</th><th>è¯´æ˜</th><th>é‡è¦æ€§</th></tr></thead><tbody><tr><td><strong>TTFBï¼ˆTime to First Byteï¼‰</strong></td><td>ä»ç”¨æˆ·å‘èµ·è¯·æ±‚åˆ°æœåŠ¡å™¨è¿”å›ç¬¬ä¸€å­—èŠ‚çš„æ—¶é—´</td><td>ğŸ”¥ğŸ”¥ğŸ”¥</td></tr><tr><td><strong>FCPï¼ˆFirst Contentful Paintï¼‰</strong></td><td>é¡µé¢é¦–æ¬¡æ¸²æŸ“å†…å®¹å‡ºç°çš„æ—¶é—´</td><td>ğŸ”¥ğŸ”¥</td></tr><tr><td><strong>LCPï¼ˆLargest Contentful Paintï¼‰</strong></td><td>åŠ è½½æœ€å¤§å¯è§†å†…å®¹ï¼ˆå¦‚å¤§å›¾ç‰‡æˆ–å¤§æ®µæ–‡æœ¬ï¼‰çš„æ—¶é—´</td><td>ğŸ”¥ğŸ”¥ğŸ”¥</td></tr><tr><td><strong>TTIï¼ˆTime to Interactiveï¼‰</strong></td><td>é¡µé¢å¯ä»¥äº¤äº’çš„æ—¶é—´</td><td>ğŸ”¥ğŸ”¥ğŸ”¥</td></tr><tr><td><strong>DOMContentLoadedï¼ˆDCLï¼‰</strong></td><td>DOM è§£æå®Œæˆçš„æ—¶é—´</td><td>ğŸ”¥</td></tr><tr><td><strong>Load Time</strong></td><td>é¡µé¢æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆçš„æ—¶é—´</td><td>ğŸ”¥</td></tr></tbody></table>
<p>ğŸ”¹ <strong>ç¤ºä¾‹ï¼šä½¿ç”¨ Performance API ç›‘æ§ LCP</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">entryList</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> entries = entryList.<span class="hljs-title function_">getEntries</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'LCP:'</span>, entries[<span class="hljs-number">0</span>].<span class="hljs-property">startTime</span>);
});
observer.<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'largest-contentful-paint'</span>, <span class="hljs-attr">buffered</span>: <span class="hljs-literal">true</span> });
</code></pre>
<h4 data-id="heading-70"><strong>2.2 äº¤äº’ä½“éªŒæ€§èƒ½æŒ‡æ ‡</strong></h4>






























<table><thead><tr><th>æŒ‡æ ‡</th><th>è¯´æ˜</th><th>é‡è¦æ€§</th></tr></thead><tbody><tr><td><strong>FIDï¼ˆFirst Input Delayï¼‰</strong></td><td>ç”¨æˆ·é¦–æ¬¡äº¤äº’ï¼ˆç‚¹å‡»ã€è¾“å…¥ç­‰ï¼‰ä¸æµè§ˆå™¨å“åº”ä¹‹é—´çš„å»¶è¿Ÿ</td><td>ğŸ”¥ğŸ”¥ğŸ”¥</td></tr><tr><td><strong>CLSï¼ˆCumulative Layout Shiftï¼‰</strong></td><td>é¡µé¢å¸ƒå±€çš„è§†è§‰ç¨³å®šæ€§</td><td>ğŸ”¥ğŸ”¥</td></tr><tr><td><strong>FPSï¼ˆFrames Per Secondï¼‰</strong></td><td>é¡µé¢å¸§ç‡ï¼Œå½±å“åŠ¨ç”»æµç•…åº¦</td><td>ğŸ”¥ğŸ”¥</td></tr><tr><td><strong>TBTï¼ˆTotal Blocking Timeï¼‰</strong></td><td>JavaScript é˜»å¡ä¸»çº¿ç¨‹çš„æ—¶é—´</td><td>ğŸ”¥ğŸ”¥ğŸ”¥</td></tr></tbody></table>
<p>ğŸ”¹ <strong>ç¤ºä¾‹ï¼šä½¿ç”¨ Performance API ç›‘æ§ FID</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">entryList</span>) =&gt;</span> {
  entryList.<span class="hljs-title function_">getEntries</span>().<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">entry</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'FID:'</span>, entry.<span class="hljs-property">processingStart</span> - entry.<span class="hljs-property">startTime</span>);
  });
});
observer.<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'first-input'</span>, <span class="hljs-attr">buffered</span>: <span class="hljs-literal">true</span> });
</code></pre>
<h3 data-id="heading-71"><strong>3. å¦‚ä½•è¿›è¡Œå‰ç«¯æ€§èƒ½ç›‘æµ‹ï¼Ÿ</strong></h3>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¯¹å‰ç«¯é¡¹ç›®è¿›è¡Œç›‘æ§ï¼š</p>
<h4 data-id="heading-72"><strong>3.1 ä½¿ç”¨ Chrome DevTools</strong></h4>
<p><strong>Chrome DevTools</strong> æä¾›äº†ä¸€æ•´å¥—åˆ†æå·¥å…·ï¼š</p>
<ol>
<li><strong>Network é¢æ¿</strong>ï¼šæŸ¥çœ‹ç½‘ç»œè¯·æ±‚ã€èµ„æºåŠ è½½æƒ…å†µã€‚</li>
<li><strong>Performance é¢æ¿</strong>ï¼šåˆ†æ CPUã€JavaScript æ‰§è¡Œã€å¸§ç‡ç­‰ã€‚</li>
<li><strong>Coverage é¢æ¿</strong>ï¼šæ£€æµ‹æœªä½¿ç”¨çš„ CSS å’Œ JavaScript ä»£ç ã€‚</li>
</ol>
<p>ğŸ”¹ <strong>ç¤ºä¾‹ï¼šä½¿ç”¨ Performance è¿›è¡Œåˆ†æ</strong></p>
<ol>
<li>æ‰“å¼€ DevToolsï¼ˆ<code>F12</code> æˆ– <code>Cmd + Option + I</code>ï¼‰ã€‚</li>
<li>é€‰æ‹© <strong>Performance</strong> é€‰é¡¹å¡ã€‚</li>
<li>ç‚¹å‡» <strong>Start Profiling and Reload Page</strong> è¿›è¡Œå½•åˆ¶ã€‚</li>
<li>æŸ¥çœ‹ CPUã€ç½‘ç»œè¯·æ±‚ã€æ¸²æŸ“æ—¶é—´ç­‰æ•°æ®ã€‚</li>
</ol>
<h4 data-id="heading-73"><strong>3.2 ä½¿ç”¨ Lighthouse è¿›è¡Œæ€§èƒ½è¯„åˆ†</strong></h4>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">Lighthouse</a> æ˜¯ Google æä¾›çš„å¼€æºå·¥å…·ï¼Œèƒ½å¤Ÿåˆ†æå‰ç«¯æ€§èƒ½ã€SEOã€å¯è®¿é—®æ€§ç­‰ã€‚</p>
<p>ğŸ”¹ <strong>å¦‚ä½•ä½¿ç”¨ Lighthouse</strong></p>
<ol>
<li>
<p><strong>åœ¨ Chrome DevTools ä¸­è¿è¡Œ</strong></p>
<ul>
<li>æ‰“å¼€ DevTools (<code>F12</code>)</li>
<li>è¿›å…¥ <strong>Lighthouse</strong> é€‰é¡¹å¡</li>
<li>ç‚¹å‡» <strong>"Generate report"</strong></li>
<li>æŸ¥çœ‹ <strong>Performance</strong> åˆ†æ•°å’Œä¼˜åŒ–å»ºè®®</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ CLI è¿è¡Œ</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">sh
å¤åˆ¶ç¼–è¾‘
npx lighthouse https:<span class="hljs-comment">//example.com --view</span>
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨ PageSpeed Insights</strong></p>
<ul>
<li>è®¿é—® <a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">PageSpeed Insights</a></li>
<li>è¾“å…¥ç½‘ç«™ URLï¼Œåˆ†ææ€§èƒ½</li>
</ul>
</li>
</ol>
<h4 data-id="heading-74"><strong>3.3 ä½¿ç”¨ Web Vitals ç›‘æµ‹</strong></h4>
<p>Google æä¾›çš„ Web Vitals å¯ä»¥å¸®åŠ©ç›‘æµ‹ LCPã€FIDã€CLS ç­‰å…³é”®æŒ‡æ ‡ã€‚</p>
<p>ğŸ”¹ <strong>ç¤ºä¾‹ï¼šé›†æˆ Web Vitals è¿›è¡Œç›‘æ§</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">js
å¤åˆ¶ç¼–è¾‘
<span class="hljs-keyword">import</span> { getCLS, getFID, getLCP } <span class="hljs-keyword">from</span> <span class="hljs-string">'web-vitals'</span>;

<span class="hljs-title function_">getCLS</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>);
<span class="hljs-title function_">getFID</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>);
<span class="hljs-title function_">getLCP</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>);
</code></pre>
<h4 data-id="heading-75"><strong>3.4 ä½¿ç”¨ Performance API</strong></h4>
<p>Performance API å…è®¸æˆ‘ä»¬åœ¨ JavaScript ä»£ç ä¸­ç›‘æ§å…³é”®æ€§èƒ½æ•°æ®ã€‚</p>
<p>ğŸ”¹ <strong>ç¤ºä¾‹ï¼šè·å–é¡µé¢åŠ è½½æ—¶é—´</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> { loadEventEnd, navigationStart } = performance.<span class="hljs-property">timing</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¡µé¢åŠ è½½æ—¶é—´:'</span>, loadEventEnd - navigationStart, <span class="hljs-string">'ms'</span>);
});
</code></pre>
<h4 data-id="heading-76"><strong>3.5 ä½¿ç”¨ç¬¬ä¸‰æ–¹ç›‘æ§å¹³å°</strong></h4>
<p>ä¸ºäº†ç›‘æ§çº¿ä¸Šç¯å¢ƒçš„æ€§èƒ½ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æœåŠ¡ï¼š</p>





























<table><thead><tr><th>å·¥å…·</th><th>ä¸»è¦åŠŸèƒ½</th></tr></thead><tbody><tr><td><strong>Google Analytics</strong></td><td>ç›‘æµ‹é¡µé¢æ€§èƒ½ã€ç”¨æˆ·äº¤äº’</td></tr><tr><td><strong>Sentry</strong></td><td>ç›‘æµ‹é”™è¯¯å’Œå¼‚å¸¸</td></tr><tr><td><strong>New Relic</strong></td><td>ç›‘æµ‹åº”ç”¨è¿è¡ŒçŠ¶æ€</td></tr><tr><td><strong>Datadog</strong></td><td>ç›‘æµ‹å‰ç«¯å’Œåç«¯æ€§èƒ½</td></tr><tr><td><strong>è…¾è®¯äº‘ CLS</strong></td><td>ç›‘æµ‹ Web åº”ç”¨æ—¥å¿—</td></tr></tbody></table>
<p>ğŸ”¹ <strong>ç¤ºä¾‹ï¼šä½¿ç”¨ Sentry ç›‘æ§å‰ç«¯é”™è¯¯</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">Sentry</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@sentry/browser'</span>;

<span class="hljs-title class_">Sentry</span>.<span class="hljs-title function_">init</span>({
  <span class="hljs-attr">dsn</span>: <span class="hljs-string">'https://your-dsn@sentry.io/your-project-id'</span>,
});

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æµ‹è¯•å¼‚å¸¸'</span>);
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-title class_">Sentry</span>.<span class="hljs-title function_">captureException</span>(error);
}
</code></pre>
<h3 data-id="heading-77"><strong>4. æ€»ç»“</strong></h3>
<p><strong>å¦‚ä½•æ‰¾åˆ°æ€§èƒ½é—®é¢˜ï¼Ÿ</strong></p>
<ol>
<li><strong>ä½¿ç”¨ Chrome DevTools åˆ†æé¡µé¢åŠ è½½æƒ…å†µ</strong></li>
<li><strong>ä½¿ç”¨ Lighthouse è¿›è¡Œè‡ªåŠ¨åŒ–è¯„åˆ†</strong></li>
<li><strong>ä½¿ç”¨ Performance API ç›‘æµ‹å…³é”®æŒ‡æ ‡</strong></li>
<li><strong>ä½¿ç”¨ Web Vitals ç›‘æµ‹ LCPã€FIDã€CLS</strong></li>
<li><strong>ä½¿ç”¨ç¬¬ä¸‰æ–¹ç›‘æ§å·¥å…·ï¼ˆSentryã€New Relicï¼‰</strong></li>
</ol>
<p>é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å‡†ç¡®å®šä½æ€§èƒ½ç“¶é¢ˆï¼Œå¹¶è¿›è¡Œé’ˆå¯¹æ€§ä¼˜åŒ–</p>
<h2 data-id="heading-78">5.å›¢é˜Ÿç®¡ç†å’Œè§„èŒƒåˆ¶å®š</h2>
<p>å›¢é˜Ÿä¸­è¦å»ºç«‹æ–‡æ¡£å®£è´¯ä»¥åŠä»£ç å®¡æŸ¥ï¼Œæ˜ç¡®æˆ‘ä»¬è¦æ€ä¹ˆå†™ä»£ç æ‰èƒ½è¿è¡Œå¾—æ›´å¥½ã€‚
è¿™ä¸ªåœ¨æˆ‘çš„å‰ç«¯å·¥ç¨‹åŒ–çš„æ–‡ç« ä¸­æœ‰è®²</p>
<h2 data-id="heading-79">6. å¸¸è§çš„æ–¹æ¡ˆ</h2>
<h3 data-id="heading-80">6.1 éª¨æ¶å±</h3>
<p>å¾…æ›´æ–°...</p>
<h3 data-id="heading-81">6.2 è™šæ‹Ÿåˆ—è¡¨</h3>
<p>å¾…æ›´æ–°...</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¯èƒ½æ˜¯æœ€è´´è¿‘å®é™…å¼€å‘çš„é¢è¯•é—®é¢˜]]></title>    <link>https://juejin.cn/post/7590597231709192227</link>    <guid>https://juejin.cn/post/7590597231709192227</guid>    <pubDate>2026-01-04T05:51:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590597231709192227" data-draft-id="7588149079400103979" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¯èƒ½æ˜¯æœ€è´´è¿‘å®é™…å¼€å‘çš„é¢è¯•é—®é¢˜"/> <meta itemprop="keywords" content="Kotlin,Android"/> <meta itemprop="datePublished" content="2026-01-04T05:51:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¯èƒ½æ˜¯æœ€è´´è¿‘å®é™…å¼€å‘çš„é¢è¯•é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:51:39.000Z" title="Sun Jan 04 2026 05:51:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><em>æœ¬ç³»åˆ—ä¸ºå°è¯´ã€Šé€†è¢­è¥¿äºŒæ——ã€‹çš„æŠ€æœ¯è®²è§£ï¼Œç”¨äºè¯¦ç»†è¯´æ˜<a href="https://juejin.cn/post/7589170021931892751" target="_blank" title="https://juejin.cn/post/7589170021931892751">å‰§æƒ…</a>é‡Œæ¶‰åŠçš„å¼€å‘ç»†èŠ‚ã€‚</em></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3782da8c08c4b649715a8c80b286d5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110699&amp;x-signature=7H9STvfGCehkEwe7mWPxkI8rK9o%3D" alt="1_1.png" loading="lazy"/></p>
<h2 data-id="heading-0">SparseArray</h2>
<p><code>SparseArray</code> æ˜¯ Android ä¸­ä¸€ç§å¸¸ç”¨æ•°æ®ç»“æ„ï¼Œå®ƒå°†æ•´æ•°é”®æ˜ å°„åˆ°å¯¹è±¡å€¼ï¼Œç±»ä¼¼äº <code>HashMap</code>ã€‚ä¸è¿‡ï¼Œå®ƒé’ˆå¯¹æ•´æ•°é”®è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå› æ­¤åœ¨å¤„ç†åŸºäºæ•´æ•°çš„é”®æ—¶ï¼Œæ¯”æ™®é€šçš„ <code>Map</code> æˆ– <code>HashMap</code> æ›´èŠ‚çœå†…å­˜ã€‚</p>
<p>æ ¸å¿ƒç‰¹æ€§å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å†…å­˜é«˜æ•ˆ</strong>ï¼šä¸åŒäº <code>HashMap</code> ä¾èµ–å“ˆå¸Œè¡¨å®ç°é”®å€¼æ˜ å°„ï¼Œ<code>SparseArray</code> ç›´æ¥ä½¿ç”¨åŸºæœ¬ç±»å‹ <code>int</code> ä½œä¸ºé”®ï¼Œé¿å…äº†è‡ªåŠ¨è£…ç®±ï¼ˆå¦‚ <code>int</code> è½¬ <code>Integer</code>ï¼‰ï¼Œä¹Ÿæ— éœ€é¢å¤–æ•°æ®ç»“æ„ï¼Œå†…å­˜å ç”¨æ˜¾è‘—æ›´ä½ã€‚</li>
<li><strong>æ€§èƒ½è¡¨ç°</strong>ï¼šè™½ç„¶å¤§æ•°æ®é›†ä¸‹é€Ÿåº¦ä¸åŠ <code>HashMap</code>ï¼Œä½†åœ¨ä¸­ç­‰è§„æ¨¡æ•°æ®åœºæ™¯ä¸­ï¼Œ<code>SparseArray</code> å› å†…å­˜ä¼˜åŒ–å¸¦æ¥çš„æ€§èƒ½æ›´ä¼˜ã€‚</li>
<li><strong>æ— ç©ºé”®é™åˆ¶</strong>ï¼šç”±äºä»…æ”¯æŒåŸºæœ¬ç±»å‹ <code>int</code> ä½œä¸ºé”®ï¼Œ<code>SparseArray</code> å¤©ç„¶ä¸å…è®¸ç©ºé”®ã€‚</li>
</ol>
<p><code>SparseArray</code> çš„ç”¨æ³•ä¸å…¶ä»– <code>Map</code> ç±»ç»“æ„ç±»ä¼¼ï¼Œç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> android.util.SparseArray

<span class="hljs-keyword">val</span> sparseArray = SparseArray&lt;String&gt;()
sparseArray.put(<span class="hljs-number">1</span>, <span class="hljs-string">"Tom"</span>)
sparseArray.put(<span class="hljs-number">2</span>, <span class="hljs-string">"Sam"</span>)
sparseArray.put(<span class="hljs-number">3</span>, <span class="hljs-string">"Bob"</span>)

<span class="hljs-comment">// è·å–å…ƒç´ </span>
<span class="hljs-keyword">val</span> value = sparseArray.<span class="hljs-keyword">get</span>(<span class="hljs-number">2</span>) <span class="hljs-comment">// ç»“æœä¸º "Sam"</span>

<span class="hljs-comment">// ç§»é™¤å…ƒç´ </span>
sparseArray.remove(<span class="hljs-number">3</span>)

<span class="hljs-comment">// éå†å…ƒç´ </span>
<span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until sparseArray.size()) {
    <span class="hljs-keyword">val</span> key = sparseArray.keyAt(i)
    <span class="hljs-keyword">val</span> value = sparseArray.valueAt(i)
    println(<span class="hljs-string">"Key: <span class="hljs-variable">$key</span>, Value: <span class="hljs-variable">$value</span>"</span>)
}
</code></pre>
<h3 data-id="heading-1">é¢è¯•é—®é¢˜</h3>
<p>ä½ ä¼šåœ¨å“ªäº›åœºæ™¯ä¼˜å…ˆé€‰æ‹© <code>SparseArray</code> è€Œé <code>HashMap</code>ï¼Ÿ</p>
<p>äºŒè€…åœ¨æ€§èƒ½å’Œé€‚ç”¨æ€§ä¸Šçš„æƒè¡¡æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-2">å¯¹æ¯” Array/HashMap</h3>
<ol>
<li><strong>é¿å…è‡ªåŠ¨è£…ç®±</strong>ï¼š<code>HashMap&lt;Integer, Object&gt;</code> ä¼šå°†é”®å­˜å‚¨ä¸º <code>Integer</code> å¯¹è±¡ï¼Œé¢‘ç¹è£…ç®±/æ‹†ç®±ä¼šå¸¦æ¥é¢å¤–å¼€é”€ï¼›è€Œ <code>SparseArray</code> ç›´æ¥ä½¿ç”¨ <code>int</code> é”®ï¼Œæ—¢çœå†…å­˜åˆæå‡æ•ˆç‡ã€‚</li>
<li><strong>å†…å­˜å ç”¨æ›´å°‘</strong>ï¼š<code>SparseArray</code> åŸºäºæ•°ç»„å®ç°ï¼Œæ— éœ€åƒ <code>HashMap</code> é‚£æ ·åˆ›å»ºå¤§é‡ <code>Entry</code> å¯¹è±¡ï¼Œå†…å­˜æ¶ˆè€—æ›´ä½ã€‚</li>
<li><strong>ç´§å‡‘å­˜å‚¨</strong>ï¼šé€‚ç”¨äºã€Œé”®å€¼å¯¹æ•°é‡å°‘ã€æˆ–ã€Œé”®åœ¨æ•´æ•°èŒƒå›´å†…åˆ†å¸ƒç¨€ç–ã€çš„åœºæ™¯ã€‚</li>
<li><strong>Android åŸç”Ÿé€‚é…</strong>ï¼šæ˜¯ Android ä¸“é—¨è®¾è®¡çš„ç»“æ„ï¼Œé€‚é…ç§»åŠ¨ç«¯èµ„æºå—é™çš„åœºæ™¯ï¼ˆä¾‹å¦‚ UI ç»„ä»¶ä¸­ <code>View</code> ID ä¸å¯¹è±¡çš„æ˜ å°„ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-3">å±€é™æ€§</h3>
<p>å°½ç®¡ <code>SparseArray</code> å†…å­˜é«˜æ•ˆï¼Œä½†å¹¶éé€‚ç”¨äºæ‰€æœ‰åœºæ™¯ï¼š</p>
<ol>
<li><strong>å¤§æ•°æ®é›†æ€§èƒ½ä¸è¶³</strong>ï¼š<code>SparseArray</code> é€šè¿‡äºŒåˆ†æŸ¥æ‰¾å®ç°é”®æŸ¥è¯¢ï¼Œåœ¨è¶…å¤§è§„æ¨¡æ•°æ®ä¸‹é€Ÿåº¦ä¼šæ…¢äº <code>HashMap</code>ã€‚</li>
<li><strong>ä»…æ”¯æŒæ•´æ•°é”®</strong>ï¼šé™åˆ¶äº† <code>int</code> ç±»å‹ä»¥å¤–çš„é”®åœºæ™¯ã€‚</li>
</ol>
<h3 data-id="heading-4">æ€»ç»“</h3>
<p><code>SparseArray</code> æ˜¯ã€Œæ•´æ•°é”®-å¯¹è±¡å€¼ã€æ˜ å°„çš„ä¸“ç”¨æ•°æ®ç»“æ„ï¼Œæ ¸å¿ƒä¼˜åŠ¿æ˜¯å†…å­˜é«˜æ•ˆâ€”â€”é€šè¿‡é¿å…è‡ªåŠ¨è£…ç®±ã€å‡å°‘å†…å­˜å ç”¨ï¼Œåœ¨ç§»åŠ¨ç«¯èµ„æºå—é™åœºæ™¯ï¼ˆå¦‚ Android åº”ç”¨ï¼‰ä¸­è¡¨ç°çªå‡ºã€‚</p>
<hr/>
<h2 data-id="heading-5">è¿è¡Œæ—¶æƒé™å¤„ç†</h2>
<p>åœ¨ Android ä¸Šå¤„ç†è¿è¡Œæ—¶æƒé™ï¼Œæ˜¯è®¿é—®ç”¨æˆ·æ•æ„Ÿæ•°æ®çš„åŒæ—¶ä¿è¯æµç•…ç”¨æˆ·ä½“éªŒçš„å…³é”®ã€‚è‡ª Android 6.0ï¼ˆAPI çº§åˆ« 23ï¼‰èµ·ï¼Œåº”ç”¨å¿…é¡»åœ¨è¿è¡Œæ—¶æ˜ç¡®è¯·æ±‚å±é™©æƒé™ï¼Œè€Œä¸èƒ½åœ¨å®‰è£…æ—¶è‡ªåŠ¨è·å¾—ã€‚è¿™ç§æœºåˆ¶æå‡äº†ç”¨æˆ·éšç§ä¿æŠ¤ï¼Œè®©ä»–ä»¬åªåœ¨å¿…è¦æ—¶æ‰æˆæƒã€‚</p>
<h3 data-id="heading-6">é¢è¯•é—®é¢˜</h3>
<p>Android è¿è¡Œæ—¶æƒé™ç³»ç»Ÿå¦‚ä½•æå‡ç”¨æˆ·éšç§ï¼Ÿ</p>
<p>ç”³è¯·æ•æ„Ÿæƒé™å‰åº”åšå“ªäº›å‡†å¤‡ï¼Ÿ</p>
<h3 data-id="heading-7">å£°æ˜ä¸æ£€æŸ¥</h3>
<p>åœ¨è¯·æ±‚æƒé™ä¹‹å‰ï¼Œåº”ç”¨å¿…é¡»åœ¨ <code>AndroidManifest.xml</code> æ–‡ä»¶ä¸­å£°æ˜è¯¥æƒé™ã€‚è¿è¡Œæ—¶ï¼Œåº”åœ¨ç”¨æˆ·ä¸éœ€è¦è¯¥æƒé™çš„åŠŸèƒ½äº¤äº’æ—¶æ‰å‘èµ·è¯·æ±‚ã€‚åœ¨æç¤ºç”¨æˆ·å‰ï¼Œæœ€å¥½å…ˆç”¨ <code>ContextCompat.checkSelfPermission()</code> æ£€æŸ¥æƒé™æ˜¯å¦å·²æˆäºˆã€‚å¦‚æœå·²æˆæƒï¼ŒåŠŸèƒ½å¯ç›´æ¥æ‰§è¡Œï¼›å¦åˆ™ï¼Œåº”ç”¨éœ€ä¸»åŠ¨è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">if</span> (ContextCompat.checkSelfPermission(<span class="hljs-keyword">this</span>, Manifest.permission.CAMERA)
    != PackageManager.PERMISSION_GRANTED
) {
    <span class="hljs-comment">// æƒé™æœªæˆäºˆï¼Œéœ€è¦ç”³è¯·</span>
    <span class="hljs-keyword">if</span> (ActivityCompat.shouldShowRequestPermissionRationale(<span class="hljs-keyword">this</span>, Manifest.permission.CAMERA)) {
        <span class="hljs-comment">// å‘ç”¨æˆ·è¯´æ˜æƒé™çš„å¿…è¦æ€§</span>
        showPermissionRationale()
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// ç›´æ¥è¯·æ±‚æƒé™</span>
        requestPermission()
    }
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æƒé™å·²æˆäºˆï¼Œæ‰§è¡ŒåŠŸèƒ½é€»è¾‘</span>
}
</code></pre>
<h3 data-id="heading-8">è¯·æ±‚æƒé™</h3>
<p>æ¨èä½¿ç”¨ <code>ActivityResultLauncher</code> API ç®€åŒ–æƒé™è¯·æ±‚æµç¨‹ï¼Œç³»ç»Ÿä¼šå‘ç”¨æˆ·å¼¹å‡ºæˆæƒå¯¹è¯æ¡†ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> requestPermissionLauncher = registerForActivityResult(
    ActivityResultContracts.RequestPermission()
) { granted -&gt;
    <span class="hljs-keyword">if</span> (granted) {
        <span class="hljs-comment">// æƒé™å·²æˆäºˆï¼Œæ‰§è¡ŒåŠŸèƒ½</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æƒé™è¢«æ‹’ç»ï¼Œä¼˜é›…å¤„ç†ï¼ˆå¦‚æç¤ºåŠŸèƒ½å—é™ï¼‰</span>
    }
}

<span class="hljs-comment">// è§¦å‘æƒé™è¯·æ±‚</span>
requestPermissionLauncher.launch(Manifest.permission.CAMERA)
</code></pre>
<h3 data-id="heading-9">å¿…è¦æ€§è¯´æ˜</h3>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç³»ç»Ÿå»ºè®®åœ¨è¯·æ±‚æƒé™å‰å…ˆæ˜¾ç¤ºä¸€ä¸ªè¯´æ˜ç†ç”±ï¼Œå¯é€šè¿‡ <code>shouldShowRequestPermissionRationale()</code> åˆ¤æ–­ã€‚å¦‚æœè¿”å› <code>true</code>ï¼Œç•Œé¢åº”è§£é‡Šä¸ºä½•éœ€è¦è¯¥æƒé™ã€‚è¿™æ ·åšèƒ½æå‡ç”¨æˆ·ä½“éªŒï¼Œä¹Ÿæ›´æœ‰å¯èƒ½è·å¾—ç”¨æˆ·çš„æˆæƒï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showPermissionRationale</span><span class="hljs-params">()</span></span> {
    AlertDialog.Builder(<span class="hljs-keyword">this</span>)
        .setTitle(<span class="hljs-string">"Permission Required"</span>)
        .setMessage(<span class="hljs-string">"This app needs access to your camera to function properly."</span>)
        .setPositiveButton(<span class="hljs-string">"OK"</span>) { _, _ -&gt;
            requestPermissionLauncher.launch(Manifest.permission.CAMERA)
        }
        .setNegativeButton(<span class="hljs-string">"Cancel"</span>, <span class="hljs-literal">null</span>)
        .show()
}
</code></pre>
<h3 data-id="heading-10">è¢«æ‹’ç»çš„å¤„ç†</h3>
<p>è‹¥ç”¨æˆ·å¤šæ¬¡æ‹’ç»åŒä¸€æƒé™ï¼ŒAndroid ä¼šè§†ä¸ºã€Œæ°¸ä¹…æ‹’ç»ã€ï¼Œæ­¤æ—¶åº”ç”¨æ— æ³•å†æ¬¡è¯·æ±‚è¯¥æƒé™ï¼Œéœ€å¼•å¯¼ç”¨æˆ·åˆ°ç³»ç»Ÿè®¾ç½®ä¸­æ‰‹åŠ¨å¼€å¯ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">if</span> (!ActivityCompat.shouldShowRequestPermissionRationale(<span class="hljs-keyword">this</span>, Manifest.permission.CAMERA)) {
    <span class="hljs-comment">// æƒé™è¢«æ°¸ä¹…æ‹’ç»ï¼Œå¼•å¯¼åˆ°è®¾ç½®</span>
    showSettingsDialog()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showSettingsDialog</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> intent = Intent(Settings.ACTION_APPLICATION_DETAILS_SETTINGS).apply {
        <span class="hljs-keyword">data</span> = Uri.parse(<span class="hljs-string">"package:<span class="hljs-subst">${packageName}</span>"</span>)
    }
    startActivity(intent)
}
</code></pre>
<h3 data-id="heading-11">ä½ç½®æƒé™çš„ç‰¹æ®Šå¤„ç†</h3>
<p>ä½ç½®æƒé™åˆ†ä¸º <strong>å‰å°</strong> å’Œ <strong>åå°</strong> ä¸¤ç±»ã€‚å‰å°ä½ç½®è®¿é—®éœ€è¦ <code>ACCESS_FINE_LOCATION</code> æˆ– <code>ACCESS_COARSE_LOCATION</code>ï¼Œè€Œåå°è®¿é—®åˆ™éœ€è¦ <code>ACCESS_BACKGROUND_LOCATION</code>ï¼Œä¸”éœ€é¢å¤–è¯´æ˜ç†ç”±ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.ACCESS_FINE_LOCATION"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.ACCESS_BACKGROUND_LOCATION"</span> /&gt;</span>
</code></pre>
<p>ä» Android 10ï¼ˆAPI çº§åˆ« 29ï¼‰å¼€å§‹ï¼Œåº”ç”¨è‹¥è¦è¯·æ±‚åå°ä½ç½®æƒé™ï¼Œå¿…é¡»å…ˆè·å–å‰å°ä½ç½®æƒé™ï¼Œç„¶åå†å•ç‹¬ç”³è¯·åå°æƒé™ã€‚</p>
<h3 data-id="heading-12">ä¸€æ¬¡æ€§æƒé™</h3>
<p>Android 11ï¼ˆAPI 30ï¼‰æ–°å¢ã€Œä¸€æ¬¡æ€§æƒé™ã€ï¼ˆé€‚ç”¨äºä½ç½®ã€ç›¸æœºã€éº¦å…‹é£ï¼‰ï¼šç”¨æˆ·æˆäºˆçš„æƒé™ä¼šåœ¨åº”ç”¨å…³é—­åè‡ªåŠ¨å¤±æ•ˆã€‚</p>
<h3 data-id="heading-13">æ€»ç»“</h3>
<p>åˆç†å¤„ç†è¿è¡Œæ—¶æƒé™æ˜¯ä¿éšœå®‰å…¨ã€åˆè§„å’Œç”¨æˆ·ä¿¡ä»»çš„å…³é”®ã€‚é€šè¿‡ã€Œæ£€æŸ¥æƒé™çŠ¶æ€ã€è¯´æ˜æƒé™ç”¨é€”ã€ä¸Šä¸‹æ–‡å†…è¯·æ±‚ã€ä¼˜é›…å¤„ç†æ‹’ç»ã€ç­‰æœ€ä½³å®è·µï¼Œå¯æ‰“é€ å…¼é¡¾éšç§ä¸ä½“éªŒçš„åº”ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-14">Looperã€Handlerã€HandlerThread</h2>
<p><code>Looper</code>ã€<code>Handler</code>ã€<code>HandlerThread</code> æ˜¯ååŒå·¥ä½œçš„ç»„ä»¶ï¼Œç”¨äºç®¡ç†çº¿ç¨‹å’Œå¤„ç†å¼‚æ­¥é€šä¿¡ã€‚è¿™äº›ç±»å¯¹äºåœ¨åå°çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼ŒåŒæ—¶ä¸ä¸»çº¿ç¨‹äº¤äº’ä»¥æ›´æ–° UI è‡³å…³é‡è¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7e7fe67421040bfbd1443305787838b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768110699&amp;x-signature=8i2WrZlgQHIlIuWFugAimNxwtZE%3D" alt="1.png" loading="lazy"/></p>
<h3 data-id="heading-15">é¢è¯•é—®é¢˜</h3>
<p><code>Handler</code> å¦‚ä½•é…åˆ <code>Looper</code> å®ç°çº¿ç¨‹é—´é€šä¿¡ï¼Ÿ</p>
<p><code>Handler</code> çš„å¸¸è§ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</p>
<p><code>HandlerThread</code> æ˜¯ä»€ä¹ˆï¼Ÿä¸æ‰‹åŠ¨é€šè¿‡ <code>Looper.prepare()</code> åˆ›å»ºçº¿ç¨‹ç›¸æ¯”ï¼Œå®ƒå¦‚ä½•ç®€åŒ–åå°çº¿ç¨‹ç®¡ç†ï¼Ÿ</p>
<h3 data-id="heading-16">Looper</h3>
<p><code>Looper</code> æ˜¯ Android çº¿ç¨‹æ¨¡å‹çš„æ ¸å¿ƒï¼Œè´Ÿè´£<strong>ç»´æŒçº¿ç¨‹çš„å­˜æ´»çŠ¶æ€</strong>ï¼Œå¹¶<strong>æŒ‰é¡ºåºå¤„ç†æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡</strong>ã€‚å®ƒåœ¨ä¸»çº¿ç¨‹ï¼ˆUI çº¿ç¨‹ï¼‰å’Œå·¥ä½œçº¿ç¨‹ä¸­éƒ½æ‰®æ¼”ç€å…³é”®è§’è‰²ï¼š</p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæŒç»­ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå°†æ¶ˆæ¯/ä»»åŠ¡åˆ†å‘åˆ°å¯¹åº”çš„ <code>Handler</code> å¤„ç†ã€‚</li>
<li><strong>çº¿ç¨‹ä¾èµ–</strong>ï¼šéœ€å¤„ç†æ¶ˆæ¯çš„çº¿ç¨‹å¿…é¡»ç»‘å®š <code>Looper</code>ï¼ˆä¸»çº¿ç¨‹é»˜è®¤è‡ªå¸¦ <code>Looper</code>ï¼Œå·¥ä½œçº¿ç¨‹éœ€æ‰‹åŠ¨åˆ›å»ºï¼‰ã€‚</li>
<li><strong>åˆå§‹åŒ–æ–¹å¼</strong>ï¼šé€šè¿‡ <code>Looper.prepare()</code> ä¸ºçº¿ç¨‹ç»‘å®š <code>Looper</code>ï¼Œå†é€šè¿‡ <code>Looper.loop()</code> å¯åŠ¨æ¶ˆæ¯å¾ªç¯ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> thread = Thread {
    Looper.prepare() <span class="hljs-comment">// ä¸ºçº¿ç¨‹ç»‘å®š Looper</span>
    <span class="hljs-keyword">val</span> handler = Handler(Looper.myLooper()!!) <span class="hljs-comment">// å…³è” Looper åˆ›å»º Handler</span>
    Looper.loop() <span class="hljs-comment">// å¯åŠ¨æ¶ˆæ¯å¾ªç¯</span>
}
thread.start()
</code></pre>
<h3 data-id="heading-17">Handler</h3>
<p><code>Handler</code> ç”¨äº<strong>åœ¨çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­å‘é€/å¤„ç†æ¶ˆæ¯/ä»»åŠ¡</strong>ï¼Œéœ€ä¸ <code>Looper</code> é…åˆä½¿ç”¨ï¼š</p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå®ç°çº¿ç¨‹é—´é€šä¿¡ï¼ˆä¾‹å¦‚ä»åå°çº¿ç¨‹æ›´æ–° UIï¼‰ã€‚</li>
<li><strong>å·¥ä½œåŸç†</strong>ï¼šåˆ›å»º <code>Handler</code> æ—¶ä¼šç»‘å®šå½“å‰çº¿ç¨‹çš„ <code>Looper</code>ï¼Œå‘é€çš„ä»»åŠ¡ä¼šåœ¨è¯¥ <code>Looper</code> å¯¹åº”çš„çº¿ç¨‹ä¸­æ‰§è¡Œã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼ˆä¸»çº¿ç¨‹ä¸­æ›´æ–° UIï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> handler = Handler(Looper.getMainLooper()) <span class="hljs-comment">// ç»‘å®šä¸»çº¿ç¨‹ Looper</span>
handler.post {
    <span class="hljs-comment">// åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ UI æ›´æ–°</span>
    textView.text = <span class="hljs-string">"Updated from background thread"</span>
}
</code></pre>
<h3 data-id="heading-18">HandlerThread</h3>
<p><code>HandlerThread</code> æ˜¯ä¸€ä¸ªå†…ç½®äº† <code>Looper</code> çš„ä¸“ç”¨çº¿ç¨‹ï¼Œå®ƒç®€åŒ–äº†åˆ›å»ºèƒ½å¤„ç†ä»»åŠ¡æˆ–æ¶ˆæ¯é˜Ÿåˆ—çš„åå°çº¿ç¨‹çš„è¿‡ç¨‹ã€‚</p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šåˆ›å»ºè‡ªå¸¦ <code>Looper</code> çš„å·¥ä½œçº¿ç¨‹ï¼Œæ”¯æŒåœ¨è¯¥çº¿ç¨‹ä¸Šé¡ºåºå¤„ç†ä»»åŠ¡ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šé€šè¿‡ <code>start()</code> å¯åŠ¨çº¿ç¨‹ï¼Œé€šè¿‡ <code>getLooper()</code> è·å– <code>Looper</code>ï¼›ä½¿ç”¨å®Œæˆåéœ€è°ƒç”¨ <code>quit()</code> æˆ– <code>quitSafely()</code> é‡Šæ”¾èµ„æºã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> handlerThread = HandlerThread(<span class="hljs-string">"WorkerThread"</span>)
handlerThread.start() <span class="hljs-comment">// å¯åŠ¨çº¿ç¨‹</span>

<span class="hljs-comment">// å…³è” HandlerThread çš„ Looper åˆ›å»º Handler</span>
<span class="hljs-keyword">val</span> workerHandler = Handler(handlerThread.looper)

workerHandler.post {
    <span class="hljs-comment">// åœ¨åå°çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span>
    performBackgroundTask()
    handler.post {
        Log.d(<span class="hljs-string">"WorkerThread"</span>, <span class="hljs-string">"Task completed"</span>)
    }
}

<span class="hljs-comment">// ä»»åŠ¡å®Œæˆååœæ­¢çº¿ç¨‹</span>
handlerThread.quitSafely()
</code></pre>
<h3 data-id="heading-19">æ ¸å¿ƒåŒºåˆ«ä¸å…³è”</h3>
<ol>
<li><code>Looper</code>ï¼šæ¶ˆæ¯å¤„ç†çš„ã€Œå¼•æ“ã€ï¼Œç»´æŒçº¿ç¨‹å­˜æ´»å¹¶å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—ã€‚</li>
<li><code>Handler</code>ï¼šä¸ <code>Looper</code> äº¤äº’çš„ã€Œæ¥å£ã€ï¼Œè´Ÿè´£æ¶ˆæ¯çš„å…¥é˜Ÿä¸å¤„ç†ã€‚</li>
<li><code>HandlerThread</code>ï¼šç®€åŒ–åå°çº¿ç¨‹åˆ›å»ºçš„ã€Œå·¥å…·ã€ï¼Œè‡ªåŠ¨å®Œæˆ <code>Looper</code> çš„åˆå§‹åŒ–ã€‚</li>
</ol>
<h3 data-id="heading-20">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li><code>Looper</code>ï¼šç”¨äºä¸»çº¿ç¨‹æˆ–å·¥ä½œçº¿ç¨‹ä¸­ï¼Œç®¡ç†æŒç»­çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</li>
<li><code>Handler</code>ï¼šé€‚ç”¨äºçº¿ç¨‹é—´é€šä¿¡ï¼ˆä¾‹å¦‚åå°çº¿ç¨‹æ›´æ–° UIï¼‰ã€‚</li>
<li><code>HandlerThread</code>ï¼šé€‚ç”¨äºéœ€è¦ç‹¬ç«‹çº¿ç¨‹å¤„ç†ä»»åŠ¡çš„åœºæ™¯ï¼ˆä¾‹å¦‚æ•°æ®å¤„ç†ã€ç½‘ç»œè¯·æ±‚ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-21">æ€»ç»“</h3>
<p><code>Looper</code>ã€<code>Handler</code> å’Œ <code>HandlerThread</code> å…±åŒæ„æˆäº† Android ä¸­ç®¡ç†çº¿ç¨‹å’Œæ¶ˆæ¯é˜Ÿåˆ—çš„åšå®æ¡†æ¶ã€‚<code>Looper</code> ç¡®ä¿çº¿ç¨‹èƒ½æŒç»­å¤„ç†ä»»åŠ¡ï¼Œ<code>Handler</code> æä¾›äº†ä»»åŠ¡é€šä¿¡çš„æ¥å£ï¼Œè€Œ <code>HandlerThread</code> åˆ™ä»¥å†…ç½®æ¶ˆæ¯å¾ªç¯çš„æ–¹å¼ï¼Œä¸ºç®¡ç†å·¥ä½œçº¿ç¨‹æä¾›äº†ä¾¿æ·é€”å¾„ã€‚</p>
<hr/>
<h2 data-id="heading-22">å¼‚å¸¸è¿½è¸ª</h2>
<p>è¿½è¸ªå¼‚å¸¸æ˜¯å®šä½ã€è§£å†³é—®é¢˜çš„å…³é”®ï¼ŒAndroid æä¾›äº†å¤šç§å·¥å…·å’ŒæŠ€æœ¯æ¥è¾…åŠ©è°ƒè¯•ã€‚</p>
<h3 data-id="heading-23">é¢è¯•é—®é¢˜</h3>
<p>åœ¨å¼€å‘ç¯å¢ƒä¸­ç”¨ <strong>Logcat</strong> è°ƒè¯•å¼‚å¸¸ï¼Œä¸åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç”¨ <strong>Firebase Crashlytics</strong> å¤„ç†å¼‚å¸¸ï¼ŒäºŒè€…çš„æ ¸å¿ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>å¦‚ä½•åœ¨å¯¹åº”åœºæ™¯ä¸­è§£å†³å¼‚å¸¸ï¼Ÿ</p>
<h3 data-id="heading-24">ä½¿ç”¨ Logcat</h3>
<p><strong>Logcat</strong> æ˜¯ Android Studio ä¸­æŸ¥çœ‹æ—¥å¿—ã€è¿½è¸ªå¼‚å¸¸çš„æ ¸å¿ƒå·¥å…·ã€‚å½“å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œç³»ç»Ÿä¼šåœ¨ <strong>Logcat</strong> ä¸­è¾“å‡ºå®Œæ•´çš„å †æ ˆä¿¡æ¯ï¼ˆåŒ…æ‹¬å¼‚å¸¸ç±»å‹ã€æ¶ˆæ¯ã€æŠ›å‡ºä½ç½®ï¼‰ã€‚å¯é€šè¿‡ <code>E/AndroidRuntime: FATAL</code> ç­‰å…³é”®è¯è¿‡æ»¤å¼‚å¸¸æ—¥å¿—ã€‚</p>
<h3 data-id="heading-25">ä½¿ç”¨ try-catch</h3>
<p>åœ¨ä»£ç å…³é”®ä½ç½®ä½¿ç”¨ <code>try-catch</code> å—ï¼Œå¯æ§åˆ¶å¼‚å¸¸å¤„ç†æµç¨‹ã€é¿å…åº”ç”¨å´©æºƒï¼Œå¹¶è®°å½•å¼‚å¸¸ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">val</span> result = performRiskyOperation()
} <span class="hljs-keyword">catch</span> (e: Exception) {
    Log.e(<span class="hljs-string">"Error"</span>, <span class="hljs-string">"Exception occurred: <span class="hljs-subst">${e.message}</span>"</span>)
}
</code></pre>
<p>ä¸Šè¿°ä»£ç ç¡®ä¿äº†å¼‚å¸¸ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œä¾¿äºè¿½è¸ªå’Œæ’æŸ¥é—®é¢˜ã€‚</p>
<h3 data-id="heading-26">å…¨å±€å¼‚å¸¸å¤„ç†</h3>
<p>é€šè¿‡ <code>Thread.setDefaultUncaughtExceptionHandler</code> è®¾ç½®å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œå¯æ•è·åº”ç”¨ä¸­æœªå¤„ç†çš„å¼‚å¸¸ï¼Œé€‚ç”¨äºé›†ä¸­å¼é”™è¯¯ä¸ŠæŠ¥æˆ–æ—¥å¿—è®°å½•ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> : <span class="hljs-type">Application</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        Thread.setDefaultUncaughtExceptionHandler { thread, exception -&gt;
            Log.e(<span class="hljs-string">"UncaughtException"</span>, <span class="hljs-string">"Thread: <span class="hljs-subst">${thread.name}</span>, Error: <span class="hljs-subst">${exception.message}</span>"</span>)
            <span class="hljs-comment">// ä¿å­˜æˆ–ä¸ŠæŠ¥å¼‚å¸¸è¯¦æƒ…</span>
        }
    }
}
</code></pre>
<p>è¿™ç§æ–¹æ³•åœ¨è°ƒè¯•å’Œç›‘æ§åº”ç”¨ä¸­çš„è¿è¡Œæ—¶é—®é¢˜æ–¹é¢éå¸¸æœ‰æ•ˆã€‚æ­¤å¤–ï¼Œä½ å¯ä»¥åœ¨ <code>debug</code> æˆ– <code>test</code> ç‰ˆæœ¬ä¸­å•ç‹¬å®ç°å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œè®©æµ‹è¯•äººå‘˜èƒ½é«˜æ•ˆåœ°è¿½è¸ªå¼‚å¸¸ï¼Œå¹¶å°†è¯¦ç»†æŠ¥å‘Šå‘é€ç»™å¼€å‘å›¢é˜Ÿï¼Œä»è€Œç®€åŒ–è°ƒè¯•å’Œé—®é¢˜è§£å†³æµç¨‹ã€‚</p>
<h3 data-id="heading-27">Firebase Crashlytics</h3>
<p><strong>Firebase Crashlytics</strong> æ˜¯ç”Ÿäº§ç¯å¢ƒä¸­è¿½è¸ªå¼‚å¸¸çš„ä¼˜ç§€å·¥å…·ï¼Œå¯è‡ªåŠ¨è®°å½•æœªæ•è·çš„å¼‚å¸¸ï¼Œå¹¶æä¾›åŒ…å«å †æ ˆä¿¡æ¯ã€è®¾å¤‡çŠ¶æ€ã€ç”¨æˆ·ä¿¡æ¯çš„è¯¦ç»†å´©æºƒæŠ¥å‘Šã€‚ä¹Ÿå¯æ‰‹åŠ¨è®°å½•éå…³é”®å¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = fetchData()
} <span class="hljs-keyword">catch</span> (e: Exception) {
    Crashlytics.logException(e)
}
</code></pre>
<p><strong>Crashlytics</strong> ä¸ <strong>Firebase</strong> é›†æˆï¼Œä¾¿äºåˆ†æå´©æºƒå¹¶è¿½è¸ªä¿®å¤è¿›åº¦ã€‚</p>
<h3 data-id="heading-28">Bugly</h3>
<p>ä¸ <strong>Firebase Crashlytics</strong> ç±»ä¼¼ï¼Œ<strong>Bugly</strong> æ˜¯è…¾è®¯æ¨å‡ºçš„ä¸€æ¬¾é¢å‘ç§»åŠ¨åº”ç”¨çš„å´©æºƒåˆ†æä¸ Bug ç®¡ç†å·¥å…·ï¼Œå¹¿æ³›åº”ç”¨äº Android å’Œ iOS å¹³å°ã€‚å®ƒèƒ½å¤Ÿå®æ—¶ç›‘æ§åº”ç”¨çš„å´©æºƒã€å¡é¡¿ã€<strong>ANR</strong>ï¼ˆåº”ç”¨æ— å“åº”ï¼‰ç­‰é—®é¢˜ï¼Œå¹¶æä¾›è¯¦ç»†çš„å †æ ˆä¿¡æ¯ã€è®¾å¤‡ç¯å¢ƒå’Œç”¨æˆ·è¡Œä¸ºè·¯å¾„ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®šä½å’Œä¿®å¤é—®é¢˜ã€‚</p>
<p><strong>Bugly</strong> è¿˜æ”¯æŒçƒ­æ›´æ–°åŠŸèƒ½ï¼ˆå¦‚ <strong>Tinker</strong> é›†æˆï¼‰ï¼Œå¯åœ¨ä¸é‡æ–°å‘ç‰ˆçš„æƒ…å†µä¸‹ä¿®å¤çº¿ä¸Š Bugï¼Œå¤§å¹…æå‡è¿ç»´æ•ˆç‡ã€‚</p>
<p>ä½œä¸ºè…¾è®¯è‡ªç ”å¹¶å†…éƒ¨å¹¿æ³›ä½¿ç”¨çš„å·¥å…·ï¼Œ<strong>Bugly</strong> ä»¥ç¨³å®šã€è½»é‡ã€æ˜“é›†æˆè‘—ç§°ï¼Œæ˜¯å›½å†…ä¼—å¤šç§»åŠ¨å¼€å‘å›¢é˜Ÿé¦–é€‰çš„è´¨é‡ç›‘æ§è§£å†³æ–¹æ¡ˆä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-29">æ–­ç‚¹è°ƒè¯•</h3>
<p>åœ¨ Android Studio ä¸­è®¾ç½®æ–­ç‚¹ï¼Œå¯æš‚åœä»£ç æ‰§è¡Œå¹¶äº¤äº’å¼åœ°æ£€æŸ¥åº”ç”¨çŠ¶æ€ï¼ˆå˜é‡ã€æ–¹æ³•è°ƒç”¨ã€å¼‚å¸¸å †æ ˆï¼‰ï¼Œæ˜¯å¼€å‘é˜¶æ®µå®šä½å¼‚å¸¸æ ¹æºçš„é«˜æ•ˆæ–¹å¼ã€‚</p>
<h3 data-id="heading-30">æ•è· Bug æŠ¥å‘Š</h3>
<p>é€šè¿‡ Android æ•è· Bug æŠ¥å‘Šï¼Œå¯æ”¶é›†è®¾å¤‡æ—¥å¿—ã€å †æ ˆä¿¡æ¯ã€ç³»ç»ŸçŠ¶æ€ç­‰æ•°æ®ï¼Œè¾…åŠ©è¯Šæ–­é—®é¢˜ã€‚<strong>ADB</strong> æ˜¯è·å– Bug æŠ¥å‘Šçš„å¸¸ç”¨å·¥å…·ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¼€å‘è€…é€‰é¡¹ï¼šå¼€å¯ã€Œå¼€å‘è€…é€‰é¡¹ã€â†’ è¿›å…¥ã€Œå¼€å‘è€…é€‰é¡¹ã€â†’ é€‰æ‹©ã€ŒTake bug reportã€å¹¶åˆ†äº«æŠ¥å‘Šã€‚</li>
<li>Android æ¨¡æ‹Ÿå™¨ï¼šæ‰“å¼€ã€ŒExtended Controlsã€â†’ é€‰æ‹©ã€ŒBug reportã€å¹¶ä¿å­˜ã€‚</li>
<li><strong>ADB</strong> å‘½ä»¤ï¼šåœ¨ç»ˆç«¯æ‰§è¡Œ <code>adb bugreport /path/to/save/bugreport</code>ã€‚</li>
</ol>
<p>ç”Ÿæˆçš„ ZIP æ–‡ä»¶åŒ…å« <strong>dumpsys</strong>ã€<strong>dumpstate</strong>ã€<strong>logcat</strong> ç­‰æ—¥å¿—ï¼Œæ˜¯è°ƒè¯•æ€§èƒ½å’Œå´©æºƒé—®é¢˜çš„å…³é”®æ•°æ®ã€‚</p>
<h3 data-id="heading-31">æ€»ç»“</h3>
<p>å¼‚å¸¸è¿½è¸ªéœ€ç»“åˆæœ¬åœ°å·¥å…·ä¸ç”Ÿäº§ç¯å¢ƒç›‘æ§ï¼š<strong>Logcat</strong> æä¾›è¿è¡Œæ—¶æ—¥å¿—ï¼Œ<code>try-catch</code> å’Œå…¨å±€å¼‚å¸¸å¤„ç†å™¨ä¿éšœå¼‚å¸¸çš„è®°å½•ä¸ç®¡ç†ï¼Œ<strong>Firebase Crashlytics</strong> / <strong>Bugly</strong> æ˜¯ç”Ÿäº§ç¯å¢ƒä¸­å´©æºƒä¸ŠæŠ¥çš„å¼ºå¤§å·¥å…·ï¼Œæ–­ç‚¹è°ƒè¯•åˆ™åœ¨å¼€å‘é˜¶æ®µæä¾›äº¤äº’å¼ä½“éªŒã€‚è¿™äº›æ–¹æ³•ç»“åˆä½¿ç”¨ï¼Œå¯å®ç°å…¨é¢çš„å¼‚å¸¸ç®¡ç†ä¸æ•…éšœæ’æŸ¥ã€‚</p>
<hr/>
<h2 data-id="heading-32">æ„å»ºå˜ä½“ä¸äº§å“é£å‘³</h2>
<p>æ„å»ºå˜ä½“ï¼ˆBuild Variantsï¼‰å’Œäº§å“é£å‘³ï¼ˆProduct Flavorsï¼‰æ˜¯ Android ä¸­ä»å•ä¸€ä»£ç åº“ç”Ÿæˆä¸åŒåº”ç”¨ç‰ˆæœ¬çš„çµæ´»æœºåˆ¶ï¼Œå¯é«˜æ•ˆç®¡ç†ã€Œå¼€å‘/ç”Ÿäº§ç‰ˆæœ¬ã€ã€Œå…è´¹/ä»˜è´¹ç‰ˆæœ¬ã€ç­‰å¤šé…ç½®åœºæ™¯ã€‚</p>
<h3 data-id="heading-33">é¢è¯•é—®é¢˜</h3>
<p>æ„å»ºç±»å‹ä¸äº§å“é£å‘³çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>äºŒè€…å¦‚ä½•é…åˆç”Ÿæˆæ„å»ºå˜ä½“ï¼Ÿ</p>
<h3 data-id="heading-34">æ„å»ºå˜ä½“ï¼ˆBuild Variantsï¼‰</h3>
<p>æ„å»ºå˜ä½“ï¼ˆbuild variantï¼‰æ˜¯å°†ç‰¹å®šçš„æ„å»ºç±»å‹ï¼ˆbuild typeï¼‰å’Œäº§å“é£å‘³ï¼ˆproduct flavorï¼Œå¦‚æœå®šä¹‰äº†çš„è¯ï¼‰ç»„åˆåçš„ç»“æœã€‚Android <strong>Gradle</strong> æ’ä»¶ä¼šä¸ºæ¯ç§ç»„åˆç”Ÿæˆå¯¹åº”çš„æ„å»ºå˜ä½“ï¼Œä»è€Œè®©ä½ èƒ½é’ˆå¯¹ä¸åŒä½¿ç”¨åœºæ™¯ç”Ÿæˆå®šåˆ¶åŒ–çš„ APK æˆ– bundleã€‚</p>
<p>æ„å»ºç±»å‹è¡¨ç¤ºåº”ç”¨çš„æ„å»ºæ–¹å¼ï¼Œé€šå¸¸åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>Debug</code>ï¼šå¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ„å»ºé…ç½®ã€‚é€šå¸¸åŒ…å«è°ƒè¯•å·¥å…·ã€æ—¥å¿—è¾“å‡ºä»¥åŠç”¨äºæµ‹è¯•çš„è°ƒè¯•è¯ä¹¦ã€‚</li>
<li><code>Release</code>ï¼šä¸ºå‘å¸ƒä¼˜åŒ–çš„é…ç½®ï¼Œå¸¸åŒ…å«ä»£ç å‹ç¼©ã€æ··æ·†ï¼Œå¹¶ä½¿ç”¨å‘å¸ƒå¯†é’¥ç­¾åä»¥ä¸Šä¼ è‡³åº”ç”¨å•†åº—ã€‚</li>
</ul>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ª Android é¡¹ç›®éƒ½åŒ…å« <code>debug</code> å’Œ <code>release</code> ä¸¤ç§æ„å»ºç±»å‹ã€‚å¼€å‘è€…å¯æ ¹æ®å…·ä½“éœ€æ±‚æ·»åŠ è‡ªå®šä¹‰çš„æ„å»ºç±»å‹ã€‚</p>
<h3 data-id="heading-35">äº§å“é£å‘³ï¼ˆProduct Flavorsï¼‰</h3>
<p>äº§å“é£å‘³ç”¨äºå®šä¹‰åº”ç”¨çš„ä¸åŒå˜ä½“ï¼ˆä¾‹å¦‚å…è´¹ç‰ˆ/ä»˜è´¹ç‰ˆã€ä¸åŒåœ°åŒºç‰ˆæœ¬ï¼‰ï¼Œæ¯ç§é£å‘³å¯é…ç½®ç‹¬ç«‹çš„åº”ç”¨ IDã€ç‰ˆæœ¬å·ã€èµ„æºç­‰ï¼Œæ— éœ€é‡å¤ä»£ç å³å¯ç”Ÿæˆå®šåˆ¶åŒ–æ„å»ºåŒ…ã€‚</p>
<p>ç¤ºä¾‹ï¼ˆ<code>build.gradle</code> ä¸­çš„é£å‘³é…ç½®ï¼‰ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">android {
    flavorDimensions "version"

    productFlavors {
        free {
            applicationId "com.example.app.free"
            versionName "1.0-free"
        }
        paid {
            applicationId "com.example.app.paid"
            versionName "1.0-paid"
        }
    }
}
</code></pre>
<p>ä¸Šè¿°é…ç½®ä¼šç”Ÿæˆ <code>freeDebug</code>ã€<code>freeRelease</code>ã€<code>paidDebug</code>ã€<code>paidRelease</code> ç­‰æ„å»ºå˜ä½“ã€‚</p>
<h3 data-id="heading-36">æ„å»ºç±»å‹ä¸äº§å“é£å‘³çš„ç»„åˆ</h3>
<p>æ„å»ºå˜ä½“ç³»ç»Ÿä¼šå°†ã€Œæ„å»ºç±»å‹ã€ä¸ã€Œäº§å“é£å‘³ã€ç»„åˆæˆæ„å»ºçŸ©é˜µï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>freeDebug</code>ï¼šå…è´¹ç‰ˆçš„è°ƒè¯•æ„å»ºã€‚</li>
<li><code>paidRelease</code>ï¼šä»˜è´¹ç‰ˆçš„å‘å¸ƒæ„å»ºã€‚</li>
</ul>
<p><code>free</code> å’Œ <code>paid</code> æ„å‘³ç€äº§å“é£å‘³ï¼Œ<code>Debug</code> å’Œ <code>Release</code> è¡¨ç¤ºæ„å»ºç±»å‹</p>
<p>æ¯ç§ç»„åˆéƒ½å¯ä»¥æ‹¥æœ‰ç‹¬ç«‹çš„é…ç½®ã€èµ„æºæˆ–ä»£ç ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨å…è´¹ç‰ˆæœ¬ä¸­æ˜¾ç¤ºå¹¿å‘Šï¼Œè€Œåœ¨ä»˜è´¹ç‰ˆæœ¬ä¸­ç¦ç”¨å¹¿å‘Šã€‚ä½ å¯ä»¥ä½¿ç”¨ç‰¹å®šäºé£å‘³çš„èµ„æºç›®å½•ï¼Œæˆ– Java/Kotlin ä»£ç æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p>
<h3 data-id="heading-37">ä¼˜åŠ¿</h3>
<ol>
<li><strong>é«˜æ•ˆçš„é…ç½®ç®¡ç†</strong>ï¼šå‡å°‘ä»£ç é‡å¤ï¼Œä»å•ä¸€ä»£ç åº“ç®¡ç†å¤šç‰ˆæœ¬æ„å»ºã€‚</li>
<li><strong>å®šåˆ¶åŒ–è¡Œä¸º</strong>ï¼šå¯é’ˆå¯¹ä¸åŒå˜ä½“è°ƒæ•´åŠŸèƒ½ï¼ˆå¦‚ä»˜è´¹ç‰ˆå¼€å¯é«˜çº§åŠŸèƒ½ï¼‰ã€APIï¼ˆå¦‚è°ƒè¯•ç‰ˆä½¿ç”¨æµ‹è¯•æ¥å£ï¼‰ã€‚</li>
<li><strong>è‡ªåŠ¨åŒ–æµç¨‹</strong>ï¼š<strong>Gradle</strong> ä¼šæ ¹æ®å˜ä½“è‡ªåŠ¨å®Œæˆ APK ç­¾åã€ä»£ç å‹ç¼©ã€æ··æ·†ç­‰ä»»åŠ¡ã€‚</li>
</ol>
<h3 data-id="heading-38">æ€»ç»“</h3>
<p>Android ä¸­çš„æ„å»ºå˜ä½“ç”±ã€Œæ„å»ºç±»å‹ã€å’Œã€Œäº§å“é£å‘³ã€ç»„åˆè€Œæˆï¼šæ„å»ºç±»å‹å®šä¹‰åº”ç”¨çš„æ„å»ºæ–¹å¼ï¼ˆå¦‚ <code>Debug</code> / <code>Release</code>ï¼‰ï¼Œäº§å“é£å‘³å®šä¹‰åº”ç”¨çš„å˜ä½“ï¼ˆå¦‚å…è´¹/ä»˜è´¹ï¼‰ã€‚äºŒè€…ç»“åˆå¯é«˜æ•ˆç®¡ç†å¤šé…ç½®åœºæ™¯ï¼Œä¿éšœå¼€å‘ä¸å‘å¸ƒçš„æ•ˆç‡å’Œå¯æ‰©å±•æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-39">æ— éšœç¢</h2>
<p>æ— éšœç¢ï¼ˆAccessibilityï¼‰ç¡®ä¿åº”ç”¨å¯¹æ‰€æœ‰ç”¨æˆ·ï¼ˆåŒ…æ‹¬è§†éšœã€å¬éšœã€è‚¢ä½“éšœç¢è€…ï¼‰å¯ç”¨ï¼Œæ—¢æå‡ç”¨æˆ·ä½“éªŒï¼Œä¹Ÿéœ€ç¬¦åˆ <strong>WCAG</strong>ï¼ˆWeb Content Accessibility Guidelinesï¼Œç½‘é¡µå†…å®¹æ— éšœç¢æŒ‡å—ï¼‰ç­‰å…¨çƒæ ‡å‡†ã€‚</p>
<h3 data-id="heading-40">é¢è¯•é—®é¢˜</h3>
<p>æ”¯æŒåŠ¨æ€å­—ä½“å¤§å°çš„æœ€ä½³å®è·µæœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆæ–‡æœ¬å¤§å°ä¼˜å…ˆä½¿ç”¨ <code>sp</code> è€Œé <code>dp</code>ï¼Ÿ</p>
<p>å¼€å‘è€…å¦‚ä½•ä¿éšœè¾…åŠ©æŠ€æœ¯ç”¨æˆ·çš„ç„¦ç‚¹ç®¡ç†ä¸å¯¼èˆªä½“éªŒï¼Ÿæœ‰å“ªäº›å·¥å…·å¯è¾…åŠ©æµ‹è¯•æ— éšœç¢é—®é¢˜ï¼Ÿ</p>
<h3 data-id="heading-41">å†…å®¹æè¿°ï¼ˆContent Descriptionsï¼‰</h3>
<p>ä¸ºæŒ‰é’®ã€å›¾ç‰‡ã€å›¾æ ‡ç­‰ UI å…ƒç´ æ·»åŠ æ–‡æœ¬æè¿°ï¼Œä¾¿äº <strong>TalkBack</strong> ç­‰å±å¹•é˜…è¯»å™¨å‘è§†éšœç”¨æˆ·æ’­æŠ¥å†…å®¹ã€‚è‹¥å…ƒç´ æ˜¯è£…é¥°æ€§çš„ï¼ˆæ— éœ€è¢«å±å¹•é˜…è¯»å™¨è¯†åˆ«ï¼‰ï¼Œå¯å°† <code>android:contentDescription</code> è®¾ç½®ä¸º <code>null</code>ï¼Œæˆ–æ ‡è®°ä¸º <code>View.IMPORTANT_FOR_ACCESSIBILITY_NO</code>ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span>
    <span class="hljs-attr">android:contentDescription</span>=<span class="hljs-string">"Profile Picture"</span>
    <span class="hljs-attr">android:src</span>=<span class="hljs-string">"@drawable/profile_image"</span> /&gt;</span>
</code></pre>
<h3 data-id="heading-42">æ”¯æŒåŠ¨æ€å­—ä½“å¤§å°</h3>
<p>ç¡®ä¿åº”ç”¨æ–‡æœ¬å¤§å°éšè®¾å¤‡è®¾ç½®çš„å­—ä½“åå¥½è‡ªåŠ¨ç¼©æ”¾ï¼Œéœ€ä½¿ç”¨ <code>sp</code> ä½œä¸ºæ–‡æœ¬å¤§å°çš„å•ä½ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
    <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>
    <span class="hljs-attr">android:text</span>=<span class="hljs-string">"Sample Text"</span> /&gt;</span>
</code></pre>
<h3 data-id="heading-43">ç„¦ç‚¹ç®¡ç†ä¸å¯¼èˆª</h3>
<p>ä¸ºè‡ªå®šä¹‰ <code>View</code>ã€å¯¹è¯æ¡†ã€è¡¨å•ç­‰ç»„ä»¶åˆç†ç®¡ç†ç„¦ç‚¹è¡Œä¸ºï¼Œä½¿ç”¨ <code>android:nextFocusDown</code>ã€<code>android:nextFocusUp</code> ç­‰å±æ€§å®šä¹‰é”®ç›˜/æ‰‹æŸ„ç”¨æˆ·çš„é€»è¾‘å¯¼èˆªè·¯å¾„ã€‚åŒæ—¶éœ€é…åˆå±å¹•é˜…è¯»å™¨æµ‹è¯•ï¼Œç¡®ä¿ç„¦ç‚¹ç§»åŠ¨ç¬¦åˆè‡ªç„¶äº¤äº’é€»è¾‘ã€‚</p>
<h3 data-id="heading-44">é¢œè‰²å¯¹æ¯”åº¦ä¸è§†è§‰æ— éšœç¢</h3>
<p>ä¿è¯æ–‡æœ¬ä¸èƒŒæ™¯çš„é¢œè‰²å¯¹æ¯”åº¦è¶³å¤Ÿé«˜ï¼Œä»¥æå‡è§†éšœæˆ–è‰²å¼±ç”¨æˆ·çš„å¯è¯»æ€§ã€‚å¯ä½¿ç”¨ Android Studio çš„ã€Œæ— éšœç¢æ‰«æå™¨ã€è¯„ä¼°å¹¶ä¼˜åŒ–åº”ç”¨çš„é¢œè‰²å¯¹æ¯”åº¦ã€‚</p>
<h3 data-id="heading-45">è‡ªå®šä¹‰ View çš„æ— éšœç¢æ”¯æŒ</h3>
<p>åˆ›å»ºè‡ªå®šä¹‰ <code>View</code> æ—¶ï¼Œéœ€å®ç° <code>AccessibilityDelegate</code> å®šä¹‰å±å¹•é˜…è¯»å™¨ä¸ç»„ä»¶çš„äº¤äº’é€»è¾‘ã€‚é‡å†™ <code>onInitializeAccessibilityNodeInfo()</code> æ–¹æ³•ï¼Œæä¾›æœ‰æ„ä¹‰çš„ç»„ä»¶æè¿°å’ŒçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomView</span>(context: Context) : View(context) {
    <span class="hljs-keyword">init</span> {
        importantForAccessibility = IMPORTANT_FOR_ACCESSIBILITY_YES
        accessibilityDelegate = <span class="hljs-keyword">object</span> : AccessibilityDelegate() {
            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onInitializeAccessibilityNodeInfo</span><span class="hljs-params">(
                host: <span class="hljs-type">View</span>,
                info: <span class="hljs-type">AccessibilityNodeInfo</span>
            )</span></span> {
                <span class="hljs-keyword">super</span>.onInitializeAccessibilityNodeInfo(host, info)
                info.text = <span class="hljs-string">"Custom component description"</span>
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-46">æ— éšœç¢æµ‹è¯•</h3>
<p>ä½¿ç”¨ Android Studio ä¸­çš„ã€Œæ— éšœç¢æ‰«æå™¨ã€ã€Œå¸ƒå±€æ£€æŸ¥å™¨ã€ç­‰å·¥å…·ï¼Œè¯†åˆ«å¹¶ä¿®å¤æ— éšœç¢é—®é¢˜ï¼Œç¡®ä¿åº”ç”¨å¯¹è¾…åŠ©æŠ€æœ¯ä¾èµ–ç”¨æˆ·å‹å¥½ã€‚</p>
<h3 data-id="heading-47">æ€»ç»“</h3>
<p>ä¿éšœ Android åº”ç”¨çš„æ— éšœç¢æ€§ï¼Œéœ€ä»ã€Œå†…å®¹æè¿°ã€åŠ¨æ€å­—ä½“ã€ç„¦ç‚¹ç®¡ç†ã€é¢œè‰²å¯¹æ¯”åº¦ã€è‡ªå®šä¹‰ View é€‚é…ã€ç­‰æ–¹é¢å…¥æ‰‹ï¼Œå¹¶é€šè¿‡ç³»ç»Ÿå·¥å…·å…¨é¢æµ‹è¯•ã€‚éµå¾ªè¿™äº›å®è·µï¼Œå¯æ‰“é€ å¯¹æ‰€æœ‰ç”¨æˆ·åŒ…å®¹ã€å¯ç”¨çš„åº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«å›¾æ ‡æ··ä¹±ï¼Lucideå›¾æ ‡åº“ï¼Œè®©å‰ç«¯å¼€å‘æ•ˆç‡ç¿»å€]]></title>    <link>https://juejin.cn/post/7591079707699675146</link>    <guid>https://juejin.cn/post/7591079707699675146</guid>    <pubDate>2026-01-04T05:54:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591079707699675146" data-draft-id="7591161237578285065" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«å›¾æ ‡æ··ä¹±ï¼Lucideå›¾æ ‡åº“ï¼Œè®©å‰ç«¯å¼€å‘æ•ˆç‡ç¿»å€"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-04T05:54:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å¤§é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/395479916219517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«å›¾æ ‡æ··ä¹±ï¼Lucideå›¾æ ‡åº“ï¼Œè®©å‰ç«¯å¼€å‘æ•ˆç‡ç¿»å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479916219517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å¤§é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:54:27.000Z" title="Sun Jan 04 2026 05:54:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‘Šåˆ«å›¾æ ‡æ··ä¹±ï¼Lucideå›¾æ ‡åº“ï¼Œè®©å‰ç«¯å¼€å‘æ•ˆç‡ç¿»å€</h2>
<blockquote>
<p>ç»Ÿä¸€çš„è®¾è®¡è¯­è¨€ã€ä¸°å¯Œçš„å›¾æ ‡åº“ï¼Œè®©æ¯ä¸ªé¡¹ç›®ç•Œé¢éƒ½æ˜¾å¾—ä¸“ä¸šåˆç»Ÿä¸€ã€‚</p>
</blockquote>
<p>å‰æ®µæ—¶é—´ï¼Œä¸€ä¸ªåˆšæ¥æ‰‹æ–°é¡¹ç›®çš„æœ‹å‹å‘æˆ‘åæ§½ï¼Œè¯´é¡¹ç›®é‡Œçš„å›¾æ ‡<strong>äº”èŠ±å…«é—¨</strong>â€”â€”é£æ ¼ä¸ç»Ÿä¸€ï¼Œå¤§å°ä¸ä¸€è‡´ï¼Œç”šè‡³è¿æ–‡ä»¶æ ¼å¼éƒ½åƒå·®ä¸‡åˆ«ã€‚è¿™è®©ä»–æ¯æ¬¡æ·»åŠ æ–°åŠŸèƒ½éƒ½å¾—ä¸ºå›¾æ ‡é—®é¢˜å¤´ç–¼åŠå¤©ã€‚</p>
<p>ç¡®å®ï¼Œä¸€ä¸ªä¼˜ç§€çš„å›¾æ ‡åº“å¯¹å‰ç«¯å¼€å‘ä½“éªŒè‡³å…³é‡è¦ã€‚ä»Šå¤©æˆ‘ä»¬èŠä¸€èŠ<strong>Lucide</strong>è¿™ä¸ªç”±ç¤¾åŒºé©±åŠ¨çš„å¼€æºå›¾æ ‡å·¥å…·åŒ…ï¼Œå®ƒèƒ½ä¸€æ¬¡æ€§è§£å†³ä½ é¡¹ç›®ä¸­æ‰€æœ‰å›¾æ ‡ç›¸å…³çš„é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦Lucideï¼Ÿ</h3>
<p>åœ¨äº†è§£Lucideä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸‹å‰ç«¯å¼€å‘ä¸­å¸¸è§çš„å›¾æ ‡å›°å¢ƒã€‚</p>
<p>é¡¹ç›®ä¸­çš„å›¾æ ‡<strong>é£æ ¼ä¸ç»Ÿä¸€</strong>ï¼Œå¼•å…¥æµç¨‹ç¹çï¼Œè¿™äº›éƒ½ä¼šé™ä½å¼€å‘æ•ˆç‡ã€‚ç‰¹åˆ«æ˜¯å½“é¡¹ç›®è§„æ¨¡æ‰©å¤§æ—¶ï¼Œå›¾æ ‡ç®¡ç†é—®é¢˜ä¼šå˜å¾—è¶Šæ¥è¶Šæ˜æ˜¾ã€‚</p>
<p>å›¢é˜Ÿè¶Šå¤§ï¼Œå›¾æ ‡é£æ ¼ç»Ÿä¸€çš„éš¾åº¦å°±è¶Šå¤§ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´ç•Œé¢çœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ª<strong>æ‹¼å‡‘å“</strong>ã€‚æ€§èƒ½é—®é¢˜åŒæ ·ä¸å¯å¿½è§†ï¼šå›¾æ ‡åŠ è½½ç¼“æ…¢ä¼šå½±å“ç”¨æˆ·ä½“éªŒï¼Œè€Œå›¾æ ‡æ–‡ä»¶ä½“ç§¯è¿‡å¤§ä¼šå½±å“é¦–å±æ¸²æŸ“æ—¶é—´ã€‚</p>
<p>é€‰æ‹©ä»€ä¹ˆæ ·çš„å›¾æ ‡æ–¹æ¡ˆï¼Œå…¶å®æ˜¯åœ¨<strong>ç¾è§‚</strong>ã€<strong>æ€§èƒ½</strong>å’Œ<strong>å¼€å‘æ•ˆç‡</strong>ä¹‹é—´å¯»æ‰¾å¹³è¡¡ç‚¹ã€‚</p>
<h3 data-id="heading-2">Lucideçš„æ ¸å¿ƒä¼˜åŠ¿</h3>
<p>Lucideæ˜¯ä¸€æ¬¾<strong>ç¤¾åŒºé©±åŠ¨</strong>çš„å¼€æºå›¾æ ‡å·¥å…·åŒ…ï¼Œæ‹¥æœ‰<strong>è¶…è¿‡1000ä¸ª</strong>çŸ¢é‡å›¾æ ‡æ–‡ä»¶ï¼Œæ—¨åœ¨ä¸ºè®¾è®¡å¸ˆå’Œå¼€å‘è€…æä¾›ç¾è§‚ä¸”ä¸€è‡´çš„å›¾æ ‡è§£å†³æ–¹æ¡ˆã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®æºè‡ª<strong>Feather Icons</strong>ï¼Œä¸ä»…ç»§æ‰¿äº†å…¶ç®€æ´ä¼˜é›…çš„è®¾è®¡é£æ ¼ï¼Œè¿˜æä¾›äº†æ›´ä¸°å¯Œçš„å›¾æ ‡é€‰æ‹©å’Œæ›´å®Œå–„çš„æ¡†æ¶æ”¯æŒã€‚</p>
<p>å®ƒçœŸæ­£çš„äº®ç‚¹åœ¨äºå…¶<strong>å¤šæ¡†æ¶åŸç”Ÿæ”¯æŒ</strong>ã€‚Lucideä¸º<strong>React</strong>ã€<strong>Vue</strong>ã€<strong>Svelte</strong>ã€<strong>Angular</strong>ç­‰ä¸»æµå‰ç«¯æ¡†æ¶æä¾›å®˜æ–¹é€‚é…åŒ…ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ç†Ÿæ‚‰çš„æ¡†æ¶ç¯å¢ƒä¸­è½»æ¾ä½¿ç”¨å›¾æ ‡ã€‚</p>
<h3 data-id="heading-3">ç»Ÿä¸€è®¾è®¡è¯­è¨€ä¸æè‡´æ€§èƒ½</h3>
<p>Lucideçš„æ‰€æœ‰å›¾æ ‡éƒ½éµå¾ª<strong>ç»Ÿä¸€çš„è®¾è®¡è¯­è¨€</strong>ï¼Œç¡®ä¿é£æ ¼ä¸€è‡´ã€‚å›¾æ ‡é‡‡ç”¨<strong>24x24åƒç´ </strong>ç½‘æ ¼ç³»ç»Ÿè®¾è®¡ï¼Œä¿è¯æ‰€æœ‰å›¾æ ‡åœ¨è§†è§‰ä¸Šä¿æŒä¸€è‡´çš„å¤§å°å’Œæ¯”ä¾‹ã€‚</p>
<p>ç»Ÿä¸€çš„<strong>åœ†è§’ç«¯ç‚¹</strong>è®¾è®¡ç¡®ä¿äº†è§†è§‰ä¸Šçš„ä¸€è‡´æ€§å’Œä¸“ä¸šæ€§ã€‚</p>
<p><strong>æ€§èƒ½æ–¹é¢</strong>ï¼ŒLucideé€šè¿‡è‡ªç ”çš„SVGä¼˜åŒ–æµç¨‹å®ç°äº†æè‡´çš„ä½“ç§¯æ§åˆ¶ã€‚å…¶ä¼˜åŒ–è„šæœ¬é‡‡ç”¨SVGOå¼•æ“ï¼Œé€šè¿‡ç§»é™¤XMLå£°æ˜ã€åˆå¹¶é‡å¤è·¯å¾„ã€ä¼˜åŒ–è·¯å¾„æ•°æ®ç­‰æŠ€æœ¯å®ç°å¹³å‡<strong>62%</strong> çš„ä½“ç§¯ç¼©å‡ã€‚</p>
<p>å•ä¸ªLucideå›¾æ ‡å¹³å‡ä½“ç§¯ä»…ä¸º<strong>892å­—èŠ‚</strong>ï¼Œè¿œä½äºè¡Œä¸šå¹³å‡çš„2.3KBã€‚</p>
<h3 data-id="heading-4">å¤šæ¡†æ¶åº”ç”¨ç¤ºä¾‹</h3>
<p>Reacté¡¹ç›®ä¸­ä½¿ç”¨Lucideéå¸¸ç®€å•ã€‚é€šè¿‡npmå®‰è£…<code>lucide-react</code>åŒ…ï¼Œç„¶åæŒ‰éœ€å¯¼å…¥å›¾æ ‡ç»„ä»¶å³å¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Search</span>, <span class="hljs-title class_">User</span>, <span class="hljs-title class_">Settings</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Navigation</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Search</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{24}</span> /&gt;</span> æœç´¢<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">User</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{24}</span> /&gt;</span> ä¸ªäººä¸­å¿ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Settings</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{24}</span> /&gt;</span> è®¾ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
  );
}
</code></pre>
<p>å¯¹äº<strong>Vue 3</strong>é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨<code>lucide-vue-next</code>åŒ…ï¼›å³ä½¿æ˜¯çº¯<strong>HTML/JavaScript</strong>é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¼•å…¥SVGæ–‡ä»¶æˆ–ä½¿ç”¨CDNã€‚</p>
<p>LucideçœŸæ­£åšåˆ°äº†â€œ<strong>ä¸€æ¬¡å­¦ä¹ ï¼Œéšå¤„ä½¿ç”¨</strong>â€ï¼Œå¤§å¤§é™ä½äº†è·¨é¡¹ç›®å›¾æ ‡ç»Ÿä¸€çš„å·¥ä½œé‡ã€‚</p>
<h3 data-id="heading-5">å®æˆ˜æŠ€å·§ä¸ä¼˜åŒ–</h3>
<p>åœ¨ä½¿ç”¨Lucideæ—¶ï¼Œæœ‰å‡ ä¸ªå®ç”¨æŠ€å·§å¯ä»¥å¸®ä½ æé«˜å¼€å‘æ•ˆç‡ï¼š</p>
<ul>
<li><strong>æŒ‰éœ€å¼•å…¥</strong>ï¼šé¿å…å…¨é‡å¯¼å…¥æ‰€æœ‰å›¾æ ‡</li>
<li><strong>åˆ›å»ºç»„ä»¶åº“</strong>ï¼šå¯¹é¢‘ç¹ä½¿ç”¨çš„å›¾æ ‡ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå›¾æ ‡ç»„ä»¶åº“ï¼Œç»Ÿä¸€ç®¡ç†å’Œå¤ç”¨</li>
<li><strong>æ ·å¼è‡ªå®šä¹‰</strong>ï¼šé€šè¿‡CSSå¯ä»¥è½»æ¾ä¿®æ”¹å›¾æ ‡é¢œè‰²ã€å¤§å°å’Œå…¶ä»–æ ·å¼</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šè®¾ç½®ç»Ÿä¸€çš„æ‚¬åœæ•ˆæœ</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.lucide-icon</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#2563eb</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.1</span>);
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease;
}
</code></pre>
<p>æ€§èƒ½ä¼˜åŒ–æ–¹é¢ï¼ŒLucideçš„<strong>ESæ¨¡å—è®¾è®¡</strong>æ”¯æŒè‡ªåŠ¨tree-shakingï¼Œç¡®ä¿ä»…æ‰“åŒ…ä½¿ç”¨åˆ°çš„å›¾æ ‡ã€‚å¯¹äºéé¦–å±å›¾æ ‡ï¼Œå¯ä½¿ç”¨åŠ¨æ€å¯¼å…¥å»¶è¿ŸåŠ è½½ã€‚</p>
<h3 data-id="heading-6">å“åº”å¼ä¸åŠ¨æ€å›¾æ ‡</h3>
<p>Lucideè¿˜æ”¯æŒå“åº”å¼å›¾æ ‡å®ç°ã€‚åˆ©ç”¨CSSåª’ä½“æŸ¥è¯¢å¯ä»¥åŠ¨æ€è°ƒæ•´å›¾æ ‡å¤§å°å’Œå¤æ‚åº¦ï¼Œåœ¨ä½å¸¦å®½ç¯å¢ƒä¸‹åŠ è½½ç®€åŒ–ç‰ˆæœ¬ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šä¸ºç§»åŠ¨è®¾å¤‡è®¾ç½®è¾ƒå°çš„å›¾æ ‡å°ºå¯¸</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.icon</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">24px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">24px</span>;
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-class">.icon</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;
  }
}
</code></pre>
<p>å¯¹äºéœ€è¦ä»æ•°æ®åº“æˆ–é…ç½®æ–‡ä»¶åŠ è½½å›¾æ ‡åç§°çš„åœºæ™¯ï¼ŒLucideæä¾›äº†<strong>DynamicIconç»„ä»¶</strong>ã€‚è¿™ä¸ªåŠŸèƒ½ç‰¹åˆ«é€‚åˆéœ€è¦åŠ¨æ€é…ç½®å›¾æ ‡çš„åå°ç®¡ç†ç³»ç»Ÿã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DynamicIcon</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react/dynamic'</span>;

<span class="hljs-keyword">const</span> iconName = â€œcameraâ€; <span class="hljs-comment">// ä»APIè·å–çš„å›¾æ ‡åç§°</span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DynamicIcon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">{iconName}</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{24}</span> /&gt;</span></span>
</code></pre>
<h3 data-id="heading-7">ç¤¾åŒºèµ„æºä¸è®¾è®¡æ•´åˆ</h3>
<p>Lucideä½œä¸ºä¸€ä¸ª<strong>å¼€æºé¡¹ç›®</strong>ï¼Œæœ‰ç€æ´»è·ƒçš„ç¤¾åŒºæ”¯æŒã€‚å¦‚æœå‘ç°å›¾æ ‡é—®é¢˜æˆ–æœ‰åŠŸèƒ½è¯·æ±‚ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä»“åº“æäº¤issueã€‚</p>
<p>å¯¹äºæƒ³è¦è´¡çŒ®æ–°å›¾æ ‡çš„å¼€å‘è€…ï¼Œé¡¹ç›®æä¾›äº†è¯¦ç»†çš„è´¡çŒ®æŒ‡å—ã€‚</p>
<p><strong>ä»è®¾è®¡åˆ°å¼€å‘çš„æ— ç¼è¡”æ¥</strong>ä¹Ÿæ˜¯Lucideçš„ä¸€å¤§ä¼˜åŠ¿ã€‚å®ƒæä¾›äº†<strong>Figmaæ’ä»¶</strong>ï¼Œå¯ä»¥åœ¨è®¾è®¡é˜¶æ®µç›´æ¥ä½¿ç”¨Lucideå›¾æ ‡ã€‚</p>
<p>è®¾è®¡å¸ˆå¯ä»¥åœ¨Figmaä¸­é€‰æ‹©å›¾æ ‡å¹¶å¯¼å‡ºä¸ºReactç»„ä»¶ï¼Œç„¶åç›´æ¥å¤åˆ¶ç”Ÿæˆçš„ä»£ç åˆ°é¡¹ç›®ä¸­ã€‚</p>
<hr/>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p>Lucideä¸ºå‰ç«¯å¼€å‘è€…æä¾›äº†ä¸€ä¸ª<strong>å…¨é¢çš„å›¾æ ‡è§£å†³æ–¹æ¡ˆ</strong>ã€‚ç»è¿‡ä¼˜åŒ–åï¼Œå•ä¸ªå›¾æ ‡å¹³å‡ä½“ç§¯ä¸åˆ°900å­—èŠ‚ï¼Œæ”¯æŒ<strong>Tree Shaking</strong>æŒ‰éœ€å¼•å…¥ï¼Œç›¸æ¯”ä¼ ç»Ÿå›¾æ ‡æ–¹æ¡ˆï¼Œé¡µé¢åŠ è½½é€Ÿåº¦å¯æå‡<strong>40%</strong>ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒèƒ½å¸®æˆ‘ä»¬ä¿æŒé¡¹ç›®ä¸­<strong>å›¾æ ‡é£æ ¼çš„ä¸€è‡´æ€§</strong>ï¼ŒèŠ‚çœå¤§é‡è°ƒè¯•å’Œä¼˜åŒ–æ—¶é—´ã€‚</p>
<p>ä½ åœ¨é¡¹ç›®ä¸­æ˜¯æ€ä¹ˆç®¡ç†å›¾æ ‡çš„å‘¢ï¼Ÿæœ‰æ²¡æœ‰é‡åˆ°è¿‡å› ä¸ºå›¾æ ‡é—®é¢˜å¯¼è‡´çš„éº»çƒ¦ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒï¼</p>
<hr/>
<p>å…³æ³¨å¾®ä¿¡å…¬ä¼—å·" <strong>å¤§å‰ç«¯å†é™©è®°</strong>"ï¼ŒæŒæ¡æ›´å¤šå‰ç«¯å¼€å‘å¹²è´§å§¿åŠ¿ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æ˜¯å¦‚ä½•è¯†åˆ« MCP å·¥å…·ï¼Œå¹¶åœ¨åˆé€‚çš„æ—¶å€™è§¦å‘è°ƒç”¨çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7591243363081388070</link>    <guid>https://juejin.cn/post/7591243363081388070</guid>    <pubDate>2026-01-04T05:54:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591243363081388070" data-draft-id="7591066233670795290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æ˜¯å¦‚ä½•è¯†åˆ« MCP å·¥å…·ï¼Œå¹¶åœ¨åˆé€‚çš„æ—¶å€™è§¦å‘è°ƒç”¨çš„ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-04T05:54:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HBLOG"/> <meta itemprop="url" content="https://juejin.cn/user/131597124767479"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æ˜¯å¦‚ä½•è¯†åˆ« MCP å·¥å…·ï¼Œå¹¶åœ¨åˆé€‚çš„æ—¶å€™è§¦å‘è°ƒç”¨çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/131597124767479/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HBLOG
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:54:51.000Z" title="Sun Jan 04 2026 05:54:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¾ˆå¤šäººåœ¨ç”¨ MCPï¼ˆModel Context Protocolï¼‰æˆ– Tool Calling æ—¶ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼š</p>
<blockquote>
<p>ğŸ¤” <strong>AI æ˜¯æ€ä¹ˆçŸ¥é“â€œä»€ä¹ˆæ—¶å€™è¯¥ç”¨å·¥å…·ã€è¯¥ç”¨å“ªä¸ªå·¥å…·â€çš„ï¼Ÿ</strong><br/>
ğŸ¤” å®ƒæ˜¯è‡ªåŠ¨è§¦å‘çš„å—ï¼Ÿè¿˜æ˜¯æœ‰äººå†™äº† if elseï¼Ÿ</p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« ç”¨<strong>äººè¯ + ç¤ºä¾‹ + æµç¨‹å›¾</strong>ï¼Œä¸€æ¬¡æ€§è®²æ¸…æ¥šã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆè¯´ç»“è®ºï¼ˆä¸€å¥è¯ç‰ˆï¼‰</h2>
<blockquote>
<p><strong>AI å¹¶ä¸ä¼šâ€œè‡ªåŠ¨è°ƒç”¨ MCP å·¥å…·â€ï¼Œè€Œæ˜¯ï¼š</strong><br/>
ğŸ‘‰ <strong>æ ¹æ®ç”¨æˆ·æ„å›¾ï¼Œç”Ÿæˆä¸€æ¡ã€Œå·¥å…·è°ƒç”¨å»ºè®®ã€</strong><br/>
ğŸ‘‰ <strong>ç”±å®¿ä¸»ç³»ç»Ÿï¼ˆAgent / Hostï¼‰çœŸæ­£å»æ‰§è¡Œå·¥å…·</strong></p>
</blockquote>
<h2 data-id="heading-1">äºŒã€åœ¨ AI çœ¼é‡Œï¼ŒMCP å·¥å…·æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-2">âŒ MCP å·¥å…· â‰  æ’ä»¶</h3>
<h3 data-id="heading-3">âŒ MCP å·¥å…· â‰  ä¸€æ®µä»£ç </h3>
<h3 data-id="heading-4">âœ… åœ¨ AI çœ¼é‡Œï¼ŒMCP å·¥å…·åªæ˜¯ä¸€æ®µã€Œç»“æ„åŒ–è¯´æ˜ã€</h3>
<p>ä¸€ä¸ª MCP å·¥å…·é€šå¸¸é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_user_info"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"input_schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"userId"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"userId"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>AI <strong>åªèƒ½çœ‹åˆ°ä¸‰æ ·ä¸œè¥¿</strong>ï¼š</p>
<p>å†…å®¹</p>
<p>ä½œç”¨</p>
<p>name</p>
<p>å·¥å…·å«ä»€ä¹ˆ</p>
<p>description</p>
<p>å·¥å…·æ˜¯å¹²å˜›çš„</p>
<p>input_schema</p>
<p>éœ€è¦ä»€ä¹ˆå‚æ•°</p>
<p>ğŸ“Œ <strong>AI å¹¶ä¸çŸ¥é“å·¥å…·èƒŒåæ˜¯æ•°æ®åº“ã€HTTPã€Dubbo è¿˜æ˜¯ Spring Bootã€‚</strong></p>
<h2 data-id="heading-5">ä¸‰ã€AI æ˜¯å¦‚ä½•åˆ¤æ–­â€œè¦ä¸è¦ç”¨å·¥å…·â€çš„ï¼Ÿ</h2>
<h3 data-id="heading-6">æœ¬è´¨ï¼šè¿™æ˜¯ä¸€ä¸ªã€Œæ„å›¾åˆ¤æ–­é—®é¢˜ã€</h3>
<p>AI åœ¨å›ç­”æ¯ä¸ªé—®é¢˜å‰ï¼Œéƒ½ä¼šåšä¸€ä¸ªéšå¼åˆ¤æ–­ï¼š</p>
<blockquote>
<p><strong>â€œè¿™ä¸ªé—®é¢˜æˆ‘èƒ½é â€˜ç¼–â€™å›ç­”å—ï¼Ÿ<br/>
è¿˜æ˜¯å¿…é¡»å€ŸåŠ©å¤–éƒ¨èƒ½åŠ›ï¼Ÿâ€</strong></p>
</blockquote>
<h3 data-id="heading-7">å¸¸è§åˆ¤æ–­ç»“æœ</h3>
<p>ç”¨æˆ·é—®é¢˜</p>
<p>AI åˆ¤æ–­</p>
<p>ä»€ä¹ˆæ˜¯ MCPï¼Ÿ</p>
<p>ç›´æ¥æ–‡æœ¬å›ç­”</p>
<p>å¸®æˆ‘ç”Ÿæˆä¸€æ®µ Java ä»£ç </p>
<p>ç›´æ¥æ–‡æœ¬</p>
<p>æŸ¥ä¸€ä¸‹ç”¨æˆ· 123 çš„ä¿¡æ¯</p>
<p>éœ€è¦å·¥å…·</p>
<p>æŸ¥è¯¢è®¢å•å®æ—¶çŠ¶æ€</p>
<p>éœ€è¦å·¥å…·</p>
<h2 data-id="heading-8">å››ã€AI æ˜¯å¦‚ä½•â€œé€‰ä¸­â€æŸä¸€ä¸ª MCP å·¥å…·çš„ï¼Ÿ</h2>
<h3 data-id="heading-9">ğŸ”‘ å…³é”®ï¼šè¯­ä¹‰åŒ¹é…</h3>
<p>AI ä¼šæŠŠï¼š</p>
<ul>
<li>ç”¨æˆ·è¾“å…¥</li>
<li>å·¥å…·çš„ <code>description</code></li>
</ul>
<p>åšä¸€æ¬¡ <strong>è¯­ä¹‰å¯¹é½</strong></p>
<h3 data-id="heading-10">ç¤ºä¾‹</h3>
<p><strong>ç”¨æˆ·è¯´ï¼š</strong></p>
<blockquote>
<p>å¸®æˆ‘æŸ¥ä¸€ä¸‹ userId æ˜¯ 123 çš„ç”¨æˆ·ä¿¡æ¯</p>
</blockquote>
<p><strong>å·¥å…·æè¿°ï¼š</strong></p>
<blockquote>
<p>æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</p>
</blockquote>
<p>âœ… <strong>è¯­ä¹‰é«˜åº¦åŒ¹é… â†’ å·¥å…·å‘½ä¸­</strong></p>
<p>ğŸ“Œ å¹¶ä¸æ˜¯é åå­—ï¼Œè€Œæ˜¯é â€œåƒä¸åƒåœ¨å¹²åŒä¸€ä»¶äº‹â€ã€‚</p>
<h2 data-id="heading-11">äº”ã€AI å¹¶ä¸ä¼šçœŸçš„è°ƒç”¨å·¥å…·ï¼ˆè¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼‰</h2>
<h3 data-id="heading-12">AI åšçš„äº‹æƒ…åªæœ‰ä¸€æ­¥ï¼š</h3>
<blockquote>
<p><strong>ç”Ÿæˆä¸€æ¡ã€Œtool_call è°ƒç”¨æ„å›¾ã€</strong></p>
</blockquote>
<p>çœŸæ­£è°ƒç”¨å·¥å…·çš„æ˜¯ä½ çš„ç³»ç»Ÿï¼ˆAgent / Hostï¼‰ã€‚</p>
<h2 data-id="heading-13">å…­ã€å®Œæ•´è°ƒç”¨æµç¨‹ï¼ˆé‡ç‚¹ï¼‰</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ª <strong>æ ‡å‡† MCP è°ƒç”¨æµç¨‹å›¾</strong> ğŸ‘‡</p>
<pre><code class="hljs language-rust" lang="rust">sequenceDiagram
    participant User <span class="hljs-keyword">as</span> ç”¨æˆ·
    participant LLM <span class="hljs-keyword">as</span> å¤§æ¨¡å‹ï¼ˆAIï¼‰
    participant Host <span class="hljs-keyword">as</span> Agent / å®¿ä¸»ç³»ç»Ÿ
    participant Tool <span class="hljs-keyword">as</span> MCP å·¥å…·æœåŠ¡

    User <span class="hljs-punctuation">-&gt;</span>&gt; LLM: æå‡ºé—®é¢˜
    LLM <span class="hljs-punctuation">-&gt;</span>&gt; LLM: åˆ¤æ–­æ˜¯å¦éœ€è¦å·¥å…·
    LLM -<span class="hljs-punctuation">-&gt;</span>&gt; Host: è¿”å› tool_callï¼ˆç»“æ„åŒ–ï¼‰
    Host <span class="hljs-punctuation">-&gt;</span>&gt; Tool: æ‰§è¡Œå·¥å…·è°ƒç”¨
    Tool -<span class="hljs-punctuation">-&gt;</span>&gt; Host: è¿”å›æ‰§è¡Œç»“æœ
    Host <span class="hljs-punctuation">-&gt;</span>&gt; LLM: æŠŠç»“æœå†å–‚ç»™æ¨¡å‹
    LLM <span class="hljs-punctuation">-&gt;</span>&gt; User: è¾“å‡ºæœ€ç»ˆè‡ªç„¶è¯­è¨€å›ç­”
</code></pre>
<h2 data-id="heading-14">ä¸ƒã€AI è¿”å›çš„ä¸æ˜¯â€œæ–‡å­—â€ï¼Œè€Œæ˜¯ç»“æ„åŒ–æŒ‡ä»¤</h2>
<p>å½“ AI å†³å®šä½¿ç”¨å·¥å…·æ—¶ï¼Œå®ƒè¿”å›çš„å†…å®¹å¤§æ¦‚æ˜¯ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"tool_call"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_user_info"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"userId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"123"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ğŸ“Œ æ³¨æ„ï¼š</p>
<ul>
<li>ç”¨æˆ· <strong>çœ‹ä¸åˆ°</strong> è¿™ä¸ª</li>
<li>è¿™æ˜¯ç»™ç¨‹åºç”¨çš„ï¼Œä¸æ˜¯ç»™äººçœ‹çš„</li>
</ul>
<h2 data-id="heading-15">å…«ã€ä¸€ä¸ªå®Œæ•´çœŸå®ä¾‹å­ï¼ˆä»æé—®åˆ°å›ç­”ï¼‰</h2>
<h3 data-id="heading-16">1ï¸âƒ£ MCP å·¥å…·å®šä¹‰</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_order_status"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ ¹æ®è®¢å•å·æŸ¥è¯¢è®¢å•å½“å‰çŠ¶æ€"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"input_schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"orderId"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"orderId"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-17">2ï¸âƒ£ ç”¨æˆ·æé—®</h3>
<blockquote>
<p>å¸®æˆ‘çœ‹çœ‹ 8899 è¿™ä¸ªè®¢å•ç°åœ¨æ€ä¹ˆæ ·äº†</p>
</blockquote>
<h3 data-id="heading-18">3ï¸âƒ£ AI å†…éƒ¨åˆ¤æ–­</h3>
<ul>
<li>éœ€è¦å®æ—¶æ•°æ® âŒ ä¸èƒ½ç¼–</li>
<li>æœ‰å¯¹åº”å·¥å…· âœ…</li>
<li>å‚æ•°æ˜ç¡®ï¼ˆ8899ï¼‰âœ…</li>
</ul>
<p>â¡ï¸ <strong>å†³å®šä½¿ç”¨å·¥å…·</strong></p>
<h3 data-id="heading-19">4ï¸âƒ£ AI è¿”å› tool_call</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"tool_call"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_order_status"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"orderId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"8899"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-20">5ï¸âƒ£ å·¥å…·æ‰§è¡Œç»“æœ</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å·²å‘è´§"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"trackingNo"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SF123456"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-21">6ï¸âƒ£ AI æœ€ç»ˆå›å¤ç”¨æˆ·</h3>
<blockquote>
<p>è®¢å• 8899 å·²ç»å‘è´§ï¼Œç‰©æµå•å·æ˜¯ SF123456ã€‚</p>
</blockquote>
<h2 data-id="heading-22">ä¹ã€ä»€ä¹ˆæƒ…å†µä¸‹ AI â€œä¸ä¼šâ€è°ƒç”¨ MCP å·¥å…·ï¼Ÿ</h2>
<h3 data-id="heading-23">å¸¸è§ 4 ç§åŸå› </h3>
<h3 data-id="heading-24">1ï¸âƒ£ å·¥å…·æè¿°å¤ªæŠ½è±¡</h3>
<p>âŒ <code>doTaskV3</code><br/>
âœ… <code>æ ¹æ®è®¢å•å·æŸ¥è¯¢è®¢å•çŠ¶æ€</code></p>
<h3 data-id="heading-25">2ï¸âƒ£ å‚æ•°ä¸å®Œæ•´</h3>
<blockquote>
<p>æŸ¥ä¸€ä¸‹è®¢å•çŠ¶æ€<br/>
âŒ æ²¡æœ‰ orderId â†’ ä¸è°ƒç”¨</p>
</blockquote>
<h3 data-id="heading-26">3ï¸âƒ£ ç³»ç»Ÿ prompt é™åˆ¶</h3>
<p>ä¾‹å¦‚ï¼š</p>
<blockquote>
<p>é™¤éæ˜ç¡®è¦æ±‚ï¼Œå¦åˆ™ä¸è¦è°ƒç”¨å·¥å…·</p>
</blockquote>
<h3 data-id="heading-27">4ï¸âƒ£ AI è®¤ä¸ºâ€œå¯ä»¥ç¼–ä¸€ä¸ªåˆç†ç­”æ¡ˆâ€</h3>
<p>ğŸ“Œ æ‰€ä»¥ <strong>å®æ—¶ / æƒå¨æ•°æ®ä¸€å®šè¦èµ°å·¥å…·</strong>ã€‚</p>
<h2 data-id="heading-28">åã€ä¸€å¥è¯æ€»ç»“ï¼ˆè®°ä½è¿™å¥å°±å¤Ÿäº†ï¼‰</h2>
<blockquote>
<p><strong>MCP å·¥å…·ä¸æ˜¯è¢« AIâ€œè‡ªåŠ¨è°ƒç”¨â€çš„ï¼Œè€Œæ˜¯ï¼š</strong></p>
<p><strong>AI è´Ÿè´£åˆ¤æ–­ + ç”Ÿæˆè°ƒç”¨æ„å›¾</strong><br/>
<strong>ç³»ç»Ÿè´Ÿè´£çœŸæ­£æ‰§è¡Œ</strong></p>
</blockquote>
<h2 data-id="heading-29">åä¸€ã€å¦‚æœä½ æ˜¯å·¥ç¨‹ä¾§ï¼Œè¿™ä¸‰ç‚¹æœ€é‡è¦</h2>
<ol>
<li><strong>å·¥å…· description â‰ˆ prompt</strong></li>
<li><strong>å‚æ•° schema è¶Šæ¸…æ™°ï¼Œå‘½ä¸­ç‡è¶Šé«˜</strong></li>
<li><strong>AI åªæ˜¯å¤§è„‘ï¼ŒAgent æ‰æ˜¯æ‰‹</strong></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ å¡ç‰¹å…°æ•°ï¼šä»åŸç†åˆ°åº”ç”¨ï¼Œè§£å†³æ‰€æœ‰é€’æ¨è®¡æ•°é—®é¢˜]]></title>    <link>https://juejin.cn/post/7590712589297123334</link>    <guid>https://juejin.cn/post/7590712589297123334</guid>    <pubDate>2026-01-04T05:58:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590712589297123334" data-draft-id="7591177139661520950" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹ å¡ç‰¹å…°æ•°ï¼šä»åŸç†åˆ°åº”ç”¨ï¼Œè§£å†³æ‰€æœ‰é€’æ¨è®¡æ•°é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-04T05:58:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹ å¡ç‰¹å…°æ•°ï¼šä»åŸç†åˆ°åº”ç”¨ï¼Œè§£å†³æ‰€æœ‰é€’æ¨è®¡æ•°é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T05:58:47.000Z" title="Sun Jan 04 2026 05:58:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å­¦ä¹ å¡ç‰¹å…°æ•°ï¼šä»åŸç†åˆ°åº”ç”¨ï¼Œè§£å†³æ‰€æœ‰é€’æ¨è®¡æ•°é—®é¢˜</h2>
<p>åœ¨ç»„åˆæ•°å­¦å’Œç®—æ³•é¢è¯•ä¸­ï¼Œæœ‰ä¸€ç±»é—®é¢˜å§‹ç»ˆå æ®é‡è¦åœ°ä½â€”â€”å®ƒä»¬çš„ç­”æ¡ˆéƒ½æŒ‡å‘åŒä¸€ä¸ªæ•°åˆ—ï¼šå¡ç‰¹å…°æ•°ã€‚æ— è®ºæ˜¯â€œåˆæ³•æ‹¬å·ç»„åˆâ€â€œå‡ºæ ˆåºåˆ—è®¡æ•°â€ï¼Œè¿˜æ˜¯â€œäºŒå‰æœç´¢æ ‘å½¢æ€æ•°â€ï¼ŒèƒŒåéƒ½è—ç€å¡ç‰¹å…°æ•°çš„é€»è¾‘ã€‚</p>
<p>æœ¬æ–‡å°†ä»å¡ç‰¹å…°æ•°çš„ç”±æ¥å‡ºå‘ï¼Œç”¨é€šä¿—çš„è¯­è¨€æ‹†è§£æ ¸å¿ƒåŸç†ï¼ˆé€’æ¨å…¬å¼+é€šé¡¹å…¬å¼æ¨å¯¼ï¼‰ï¼Œå†ç»“åˆ3ç±»ç»å…¸åº”ç”¨åœºæ™¯ï¼Œç»™å‡ºå¯ç›´æ¥å¥—ç”¨çš„è§£é¢˜æ¨¡æ¿ï¼Œå¸®ä½ å½»åº•æŒæ¡è¿™ä¸€é«˜é¢‘è€ƒç‚¹ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å¡ç‰¹å…°æ•°çš„ç”±æ¥ï¼šä¸€ä¸ªèµŒå¾’çš„é—®é¢˜</h2>
<p>å¡ç‰¹å…°æ•°ï¼ˆCatalan Numberï¼‰æœ€æ—©ç”±æ¯”åˆ©æ—¶æ•°å­¦å®¶æ¬§ä»Â·æŸ¥ç†Â·å¡ç‰¹å…°ï¼ˆEugÃ¨ne Charles Catalanï¼‰åœ¨1838å¹´æå‡ºï¼Œä½†åœ¨æ­¤ä¹‹å‰ï¼Œæ¬§æ‹‰ã€å…°ä¼¯ç‰¹ç­‰æ•°å­¦å®¶å·²åœ¨ç ”ç©¶ç›¸å…³é—®é¢˜ã€‚</p>
<p>å…¶æœ€åˆçš„èµ·æºæ˜¯â€œå‡¸å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†é—®é¢˜â€ï¼š<strong>ä¸€ä¸ªå‡¸nè¾¹å½¢ï¼Œé€šè¿‡ä¸ç›¸äº¤çš„å¯¹è§’çº¿ï¼Œèƒ½å°†å…¶åˆ†æˆå¤šå°‘ä¸ªä¸‰è§’å½¢ï¼Ÿ</strong></p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>
<p>å‡¸3è¾¹å½¢ï¼ˆä¸‰è§’å½¢ï¼‰ï¼šåªæœ‰1ç§åˆ†æ³•ï¼ˆæœ¬èº«å°±æ˜¯ä¸‰è§’å½¢ï¼‰</p>
</li>
<li>
<p>å‡¸4è¾¹å½¢ï¼šæœ‰2ç§åˆ†æ³•ï¼ˆæ²¿ä¸¤æ¡ä¸åŒçš„å¯¹è§’çº¿æ‹†åˆ†ï¼‰</p>
</li>
<li>
<p>å‡¸5è¾¹å½¢ï¼šæœ‰5ç§åˆ†æ³•</p>
</li>
</ul>
<p>è¿™äº›åˆ†æ³•æ•°ï¼Œæ­£æ˜¯å¡ç‰¹å…°æ•°çš„å‰å‡ é¡¹ã€‚åæ¥äººä»¬å‘ç°ï¼Œè¿™ä¸ªæ•°åˆ—è¿˜èƒ½è§£å†³å¤§é‡â€œçº¦æŸæ¡ä»¶ä¸‹çš„è®¡æ•°é—®é¢˜â€ï¼Œæˆä¸ºç»„åˆæ•°å­¦ä¸­çš„æ ¸å¿ƒæ•°åˆ—ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-2">äºŒã€å¡ç‰¹å…°æ•°çš„æ ¸å¿ƒåŸç†ï¼šä¸¤ä¸ªå…¬å¼çš„é€šä¿—æ¨å¯¼</h2>
<p>å¡ç‰¹å…°æ•°çš„æ ¸å¿ƒæ˜¯ä¸¤ä¸ªå…¬å¼ï¼šé€’æ¨å…¬å¼ï¼ˆé€‚åˆå°èŒƒå›´è®¡ç®—ã€ç†è§£é€»è¾‘ï¼‰å’Œé€šé¡¹å…¬å¼ï¼ˆé€‚åˆå¤§èŒƒå›´è®¡ç®—ã€æé«˜æ•ˆç‡ï¼‰ã€‚æˆ‘ä»¬ä»æœ€ç›´è§‚çš„â€œåˆæ³•æ‹¬å·ç»„åˆâ€é—®é¢˜å…¥æ‰‹ï¼Œä¸€æ­¥æ­¥æ¨å¯¼è¿™ä¸¤ä¸ªå…¬å¼ã€‚</p>
<h3 data-id="heading-3">2.1 å…ˆæ˜ç¡®ï¼šä»€ä¹ˆæ˜¯â€œåˆæ³•æ‹¬å·ç»„åˆâ€ï¼Ÿ</h3>
<p>ç»™å®šnå¯¹æ‹¬å·ï¼Œåˆæ³•ç»„åˆéœ€æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li>
<p>ä»»æ„å‰ç¼€ä¸­ï¼Œå·¦æ‹¬å·æ•°é‡ â‰¥ å³æ‹¬å·æ•°é‡ï¼ˆè¿‡ç¨‹çº¦æŸï¼Œé¿å…â€œå³æ‹¬å·è¶…å‰â€ï¼‰ï¼›</p>
</li>
<li>
<p>æœ€ç»ˆå·¦æ‹¬å·æ€»æ•° = å³æ‹¬å·æ€»æ•°ï¼ˆç»“æœçº¦æŸï¼Œç”¨å®Œæ‰€æœ‰æ‹¬å·ï¼‰ã€‚</p>
</li>
</ol>
<p>æ¯”å¦‚n=2æ—¶ï¼Œåˆæ³•ç»„åˆæœ‰2ç§ï¼š<code>()()</code>ã€<code>(())</code>ï¼›éæ³•ç»„åˆæœ‰2ç§ï¼š<code>)()</code>ã€<code>())(</code>ã€‚</p>
<h3 data-id="heading-4">2.2 é€’æ¨å…¬å¼æ¨å¯¼ï¼šæ‹†åˆ†é—®é¢˜ï¼ŒåŒ–ç¹ä¸ºç®€</h3>
<p>é€’æ¨å…¬å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>æŠŠå¤§é—®é¢˜æ‹†æˆä¸¤ä¸ªç‹¬ç«‹çš„å°é—®é¢˜ï¼Œç”¨â€œä¹˜æ³•åŸç†+åŠ æ³•åŸç†â€åˆå¹¶ç»“æœ</strong>ã€‚</p>
<h4 data-id="heading-5">ç¬¬ä¸€æ­¥ï¼šæ‰¾æ‹†åˆ†çš„â€œé”šç‚¹â€</h4>
<p>å¯¹äºä»»æ„ä¸€ä¸ªnå¯¹æ‹¬å·çš„åˆæ³•ç»„åˆï¼Œç¬¬ä¸€ä¸ªå·¦æ‹¬å·<code>(</code>å¿…ç„¶æœ‰ä¸€ä¸ªå”¯ä¸€å¯¹åº”çš„å³æ‹¬å·<code>)</code>ã€‚è¿™ä¸ªå¯¹åº”å…³ç³»å°±æ˜¯æˆ‘ä»¬çš„â€œæ‹†åˆ†é”šç‚¹â€ï¼Œå®ƒå°†æ•´ä¸ªç»„åˆåˆ†æˆ3éƒ¨åˆ†ï¼š</p>
<p><code>( å†…éƒ¨iå¯¹æ‹¬å· ) å³è¾¹n-1-iå¯¹æ‹¬å·</code></p>
<p>è§£é‡Šï¼š</p>
<ul>
<li>
<p>å¤–å±‚çš„<code>()</code>æ˜¯é”šç‚¹ï¼Œç”¨æ‰äº†1å¯¹æ‹¬å·ï¼›</p>
</li>
<li>
<p>â€œå†…éƒ¨iå¯¹æ‹¬å·â€ï¼šé”šç‚¹ä¸­é—´çš„åˆæ³•ç»„åˆï¼Œæ–¹æ¡ˆæ•°è®°ä¸ºC(i)ï¼ˆç¬¬iä¸ªå¡ç‰¹å…°æ•°ï¼‰ï¼›</p>
</li>
<li>
<p>â€œå³è¾¹n-1-iå¯¹æ‹¬å·â€ï¼šé”šç‚¹å³è¾¹çš„åˆæ³•ç»„åˆï¼Œæ–¹æ¡ˆæ•°è®°ä¸ºC(n-1-i)ï¼›</p>
</li>
<li>
<p>içš„å–å€¼èŒƒå›´æ˜¯0â‰¤iâ‰¤n-1ï¼ˆå†…éƒ¨å¯ä»¥æ˜¯ç©ºçš„ï¼Œä¹Ÿå¯ä»¥å¡ä¸‹n-1å¯¹æ‹¬å·ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-6">ç¬¬äºŒæ­¥ï¼šç”¨ä¹˜æ³•åŸç†ç®—å•ç§içš„æ–¹æ¡ˆæ•°</h4>
<p>ä¹˜æ³•åŸç†ï¼šåšä¸€ä»¶äº‹åˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥æœ‰Aç§æ–¹æ³•ï¼Œç¬¬äºŒæ­¥æœ‰Bç§æ–¹æ³•ï¼Œæ€»æ–¹æ³•æ•°=AÃ—Bã€‚</p>
<p>å¯¹åº”æ‹†åˆ†é€»è¾‘ï¼š</p>
<ul>
<li>
<p>ç¬¬ä¸€æ­¥ï¼šé€‰å†…éƒ¨iå¯¹æ‹¬å·çš„ç»„åˆï¼Œæœ‰C(i)ç§æ–¹æ³•ï¼›</p>
</li>
<li>
<p>ç¬¬äºŒæ­¥ï¼šé€‰å³è¾¹n-1-iå¯¹æ‹¬å·çš„ç»„åˆï¼Œæœ‰C(n-1-i)ç§æ–¹æ³•ï¼›</p>
</li>
<li>
<p>å•ç§iå¯¹åº”çš„æ€»æ–¹æ¡ˆæ•° = C(i) Ã— C(n-1-i)ã€‚</p>
</li>
</ul>
<h4 data-id="heading-7">ç¬¬ä¸‰æ­¥ï¼šç”¨åŠ æ³•åŸç†ç®—æ‰€æœ‰içš„æ€»æ–¹æ¡ˆæ•°</h4>
<p>åŠ æ³•åŸç†ï¼šåšä¸€ä»¶äº‹æœ‰å¤šç§äº’æ–¥è·¯å¾„ï¼Œæ¯ç§è·¯å¾„æœ‰Aã€Bã€Cç§æ–¹æ³•ï¼Œæ€»æ–¹æ³•æ•°=A+B+Cã€‚</p>
<p>ä¸åŒiå¯¹åº”çš„ç»„åˆæ˜¯â€œäº’æ–¥â€çš„ï¼ˆä¸€ä¸ªç»„åˆåªèƒ½å±äºæŸä¸€ä¸ªiï¼‰ï¼Œå› æ­¤æ€»æ–¹æ¡ˆæ•°æ˜¯æ‰€æœ‰içš„æ–¹æ¡ˆæ•°ä¹‹å’Œã€‚</p>
<h4 data-id="heading-8">æœ€ç»ˆé€’æ¨å…¬å¼</h4>
<p>è¾¹ç•Œæ¡ä»¶ï¼šC(0) = 1ï¼ˆ0å¯¹æ‹¬å·åªæœ‰1ç§ç©ºæ–¹æ¡ˆï¼‰</p>
<p>é€’æ¨å…¬å¼ï¼šC(n) = C(0)Ã—C(n-1) + C(1)Ã—C(n-2) + ... + C(n-1)Ã—C(0) ï¼ˆnâ‰¥1ï¼‰ï¼Œå³ä»i=0åˆ°i=n-1ï¼Œå°†C(i)ä¸C(n-1-i)çš„ä¹˜ç§¯ä¾æ¬¡ç›¸åŠ </p>
<h4 data-id="heading-9">éªŒè¯ï¼šç”¨é€’æ¨å…¬å¼ç®—å‰å‡ é¡¹</h4>
<ul>
<li>
<p>C(0) = 1</p>
</li>
<li>
<p>C(1) = C(0)Ã—C(0) = 1Ã—1 = 1ï¼ˆ1å¯¹æ‹¬å·ï¼š<code>()</code>ï¼‰</p>
</li>
<li>
<p>C(2) = C(0)Ã—C(1) + C(1)Ã—C(0) = 1Ã—1 + 1Ã—1 = 2ï¼ˆ2å¯¹æ‹¬å·ï¼š<code>()()</code>ã€<code>(())</code>ï¼‰</p>
</li>
<li>
<p>C(3) = C(0)Ã—C(2) + C(1)Ã—C(1) + C(2)Ã—C(0) = 1Ã—2 + 1Ã—1 + 2Ã—1 = 5ï¼ˆ3å¯¹æ‹¬å·ï¼š5ç§åˆæ³•ç»„åˆï¼‰</p>
</li>
</ul>
<p>å®Œå…¨ç¬¦åˆå®é™…æƒ…å†µï¼</p>
<h3 data-id="heading-10">2.3 é€šé¡¹å…¬å¼æ¨å¯¼ï¼šè¡¥é›†æ€æƒ³ï¼Œç®€åŒ–è®¡ç®—</h3>
<p>é€’æ¨å…¬å¼çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(nÂ²)ï¼Œnè¾ƒå¤§æ—¶æ•ˆç‡ä½ã€‚æˆ‘ä»¬éœ€è¦æ›´ç®€æ´çš„é€šé¡¹å…¬å¼ï¼Œè¿™é‡Œç”¨â€œè¡¥é›†æ€æƒ³â€æ¨å¯¼ï¼š<strong>åˆæ³•ç»„åˆæ•° = æ€»æ’åˆ—æ•° - éæ³•ç»„åˆæ•°</strong>ã€‚</p>
<h4 data-id="heading-11">ç¬¬ä¸€æ­¥ï¼šè®¡ç®—æ€»æ’åˆ—æ•°</h4>
<p>nå¯¹æ‹¬å· = nä¸ª<code>(</code> + nä¸ª<code>)</code>ï¼Œå…±2nä¸ªå­—ç¬¦ã€‚ä»2nä¸ªä½ç½®ä¸­é€‰nä¸ªæ”¾<code>(</code>ï¼Œå‰©ä¸‹çš„æ”¾<code>)</code>ï¼Œæ€»æ’åˆ—æ•°æ˜¯ç»„åˆæ•°ï¼šä»2nä¸ªä½ç½®é‡Œé€‰nä¸ªä½ç½®çš„é€‰æ³•æ•°ï¼Œè®°ä¸ºC(2n, n)ï¼Œå…¶è®¡ç®—æ–¹å¼æ˜¯ï¼ˆ2nçš„é˜¶ä¹˜ï¼‰é™¤ä»¥ï¼ˆnçš„é˜¶ä¹˜ä¹˜ä»¥nçš„é˜¶ä¹˜ï¼‰ã€‚</p>
<h4 data-id="heading-12">ç¬¬äºŒæ­¥ï¼šè®¡ç®—éæ³•ç»„åˆæ•°</h4>
<p>éæ³•ç»„åˆçš„å®šä¹‰ï¼šå­˜åœ¨æŸå‰ç¼€ï¼Œå³æ‹¬å·æ•° &gt; å·¦æ‹¬å·æ•°ã€‚è¿™é‡Œæœ‰ä¸ªå…³é”®æŠ€å·§â€”â€”<strong>éæ³•ç»„åˆä¸â€œn+1ä¸ª</strong> <strong>(</strong> ** + n-1ä¸ª** <strong>)</strong> <strong>çš„æ’åˆ—â€ä¸€ä¸€å¯¹åº”</strong>ã€‚</p>
<p>è½¬æ¢æ–¹æ³•ï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªå³æ‹¬å·æ•°è¶…è¿‡å·¦æ‹¬å·æ•°çš„ä½ç½®ï¼Œå°†è¿™ä¸ªä½ç½®åŠä¹‹å‰çš„æ‰€æœ‰æ‹¬å·åè½¬ï¼ˆ<code>(</code>å˜<code>)</code>ï¼Œ<code>)</code>å˜<code>(</code>ï¼‰ã€‚</p>
<p>ä¾‹å­ï¼šn=2ï¼Œéæ³•ç»„åˆ<code>)()</code></p>
<ul>
<li>
<p>ç¬¬ä¸€ä¸ªéæ³•ä½ç½®æ˜¯ç¬¬1ä½ï¼ˆå³æ‹¬å·æ•°=1ï¼Œå·¦æ‹¬å·æ•°=0ï¼‰ï¼›</p>
</li>
<li>
<p>åè½¬ç¬¬1ä½ï¼š<code>)</code>å˜<code>(</code>ï¼Œå¾—åˆ°æ–°æ’åˆ—<code>(()(</code>ï¼›</p>
</li>
<li>
<p>æ–°æ’åˆ—æœ‰3ä¸ª<code>(</code>ã€1ä¸ª<code>)</code>ï¼ˆå³n+1ä¸ª<code>(</code>ã€n-1ä¸ª<code>)</code>ï¼‰ã€‚</p>
</li>
</ul>
<p>å› æ­¤ï¼Œéæ³•ç»„åˆæ•° = ä»2nä¸ªä½ç½®é€‰n+1ä¸ªæ”¾<code>(</code>çš„ç»„åˆæ•°ï¼š</p>
<p>å› æ­¤ï¼Œéæ³•ç»„åˆæ•° = ä»2nä¸ªä½ç½®é€‰n+1ä¸ªæ”¾<code>(</code>çš„ç»„åˆæ•°ï¼Œè®°ä¸ºC(2n, n+1)ï¼Œå…¶è®¡ç®—æ–¹å¼æ˜¯ï¼ˆ2nçš„é˜¶ä¹˜ï¼‰é™¤ä»¥ï¼ˆ(n+1)çš„é˜¶ä¹˜ä¹˜ä»¥(n-1)çš„é˜¶ä¹˜ï¼‰ã€‚</p>
<h4 data-id="heading-13">ç¬¬ä¸‰æ­¥ï¼šåŒ–ç®€å¾—åˆ°é€šé¡¹å…¬å¼</h4>
<p>åˆæ³•ç»„åˆæ•° = æ€»æ’åˆ—æ•° - éæ³•ç»„åˆæ•°ï¼š</p>
<p>åˆæ³•ç»„åˆæ•° = æ€»æ’åˆ—æ•° - éæ³•ç»„åˆæ•°ï¼Œå¯¹åº”å…³ç³»ä¸ºï¼šC(n) = C(2n, n) - C(2n, n+1)ï¼ˆC(2n, n)æ˜¯æ€»æ’åˆ—æ•°ï¼ŒC(2n, n+1)æ˜¯éæ³•ç»„åˆæ•°ï¼‰ã€‚</p>
<p>ä»£å…¥ç»„åˆæ•°å…¬å¼åŒ–ç®€ï¼ˆè¿‡ç¨‹ç•¥ï¼Œæ ¸å¿ƒæ˜¯é€šåˆ†ã€çº¦åˆ†ï¼‰ï¼š</p>
<p>ä»£å…¥ç»„åˆæ•°å…¬å¼åŒ–ç®€ï¼ˆè¿‡ç¨‹ç•¥ï¼Œæ ¸å¿ƒæ˜¯é€šåˆ†ã€çº¦åˆ†ï¼‰åï¼Œå¾—åˆ°é€šé¡¹å…¬å¼ï¼šC(n) = 1/(n+1) Ã— C(2n, n)ï¼Œå…¶è®¡ç®—æ–¹å¼æ˜¯ï¼ˆ2nçš„é˜¶ä¹˜ï¼‰é™¤ä»¥ï¼ˆ(n+1)çš„é˜¶ä¹˜ä¹˜ä»¥nçš„é˜¶ä¹˜ï¼‰ã€‚</p>
<h4 data-id="heading-14">éªŒè¯ï¼šç”¨é€šé¡¹å…¬å¼ç®—C(3)</h4>
<p>ç”¨é€šé¡¹å…¬å¼éªŒè¯C(3)ï¼šC(3) = 1/(3+1) Ã— C(6, 3)ï¼Œå…¶ä¸­C(6, 3)æ˜¯ä»6ä¸ªä½ç½®é€‰3ä¸ªçš„ç»„åˆæ•°ï¼Œç»“æœä¸º20ï¼Œå› æ­¤C(3) = 1/4 Ã— 20 = 5ã€‚</p>
<p>å’Œé€’æ¨å…¬å¼ç»“æœä¸€è‡´ï¼</p>
<h3 data-id="heading-15">2.4 å¡ç‰¹å…°æ•°çš„å‰10é¡¹ï¼ˆå¿«é€Ÿå¯¹ç…§ï¼‰</h3>
<p>æ ¹æ®å…¬å¼è®¡ç®—ï¼Œå‰10é¡¹å¡ç‰¹å…°æ•°ä¸ºï¼š</p>































<table><thead><tr><th>n</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th></tr></thead><tbody><tr><td>C(n)</td><td>1</td><td>1</td><td>2</td><td>5</td><td>14</td><td>42</td><td>132</td><td>429</td><td>1430</td><td>4862</td></tr></tbody></table>
<h2 data-id="heading-16">ä¸‰ã€å¡ç‰¹å…°æ•°çš„3ç±»ç»å…¸åº”ç”¨åœºæ™¯ï¼ˆé™„è§£é¢˜æ¨¡æ¿ï¼‰</h2>
<p>æ‰€æœ‰å¡ç‰¹å…°æ•°çš„åº”ç”¨åœºæ™¯ï¼Œéƒ½å…·å¤‡ä¸€ä¸ªæ ¸å¿ƒç‰¹å¾ï¼š<strong>å­˜åœ¨â€œå‰ç¼€çº¦æŸâ€ï¼Œä¸”é—®é¢˜å¯æ‹†åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹å­é—®é¢˜</strong>ã€‚ä¸‹é¢ä»‹ç»3ç±»é¢è¯•é«˜é¢‘åœºæ™¯ï¼Œå‡æä¾›å¯ç›´æ¥å¥—ç”¨çš„ä»£ç æ¨¡æ¿ã€‚</p>
<h3 data-id="heading-17">3.1 åœºæ™¯1ï¼šåˆæ³•æ‹¬å·ç”Ÿæˆï¼ˆæœ€ç»å…¸ï¼‰</h3>
<h4 data-id="heading-18">é—®é¢˜æè¿°</h4>
<p>ç»™å®šnå¯¹æ‹¬å·ï¼Œç”Ÿæˆæ‰€æœ‰åˆæ³•çš„æ‹¬å·ç»„åˆã€‚</p>
<h4 data-id="heading-19">è§£é¢˜æ€è·¯</h4>
<p>ç”¨å›æº¯æ³•ï¼Œä¸¥æ ¼éµå¾ªâ€œå‰ç¼€çº¦æŸâ€ï¼š</p>
<ul>
<li>
<p>å·¦æ‹¬å·æ•°â‰¤næ—¶ï¼Œå¯æ·»åŠ å·¦æ‹¬å·ï¼›</p>
</li>
<li>
<p>å³æ‹¬å·æ•°&lt;å·¦æ‹¬å·æ•°æ—¶ï¼Œå¯æ·»åŠ å³æ‹¬å·ã€‚</p>
</li>
</ul>
<h4 data-id="heading-20">ä»£ç æ¨¡æ¿ï¼ˆJavaScriptï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-comment">/**
 * ç”Ÿæˆnå¯¹åˆæ³•æ‹¬å·
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">n</span> - æ‹¬å·å¯¹æ•°
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string[]</span>} æ‰€æœ‰åˆæ³•ç»„åˆ
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">generateParenthesis</span>(<span class="hljs-params">n</span>) {
    <span class="hljs-keyword">const</span> result = [];

    <span class="hljs-comment">// å›æº¯å‡½æ•°ï¼šcur-å½“å‰ç»„åˆï¼Œleft-å·²ç”¨å·¦æ‹¬å·æ•°ï¼Œright-å·²ç”¨å³æ‹¬å·æ•°</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">backtrack</span> = (<span class="hljs-params">cur, left, right</span>) =&gt; {
        <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶ï¼šç»„åˆé•¿åº¦=2n</span>
        <span class="hljs-keyword">if</span> (cur.<span class="hljs-property">length</span> === <span class="hljs-number">2</span> * n) {
            result.<span class="hljs-title function_">push</span>(cur);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// å¯æ·»åŠ å·¦æ‹¬å·ï¼ˆå·¦æ‹¬å·æœªç”¨å®Œï¼‰</span>
        <span class="hljs-keyword">if</span> (left &lt; n) {
            <span class="hljs-title function_">backtrack</span>(cur + <span class="hljs-string">'('</span>, left + <span class="hljs-number">1</span>, right);
        }

        <span class="hljs-comment">// å¯æ·»åŠ å³æ‹¬å·ï¼ˆå³æ‹¬å·æ•°&lt;å·¦æ‹¬å·æ•°ï¼‰</span>
        <span class="hljs-keyword">if</span> (right &lt; left) {
            <span class="hljs-title function_">backtrack</span>(cur + <span class="hljs-string">')'</span>, left, right + <span class="hljs-number">1</span>);
        }
    };

    <span class="hljs-title function_">backtrack</span>(<span class="hljs-string">''</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// æµ‹è¯•ï¼šn=3 â†’ è¾“å‡º5ç§ç»„åˆ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">generateParenthesis</span>(<span class="hljs-number">3</span>)); 
<span class="hljs-comment">// ["((()))","(()())","(())()","()(())","()()()"]</span>
}
</code></pre>
<h3 data-id="heading-21">3.2 åœºæ™¯2ï¼šåˆæ³•å‡ºæ ˆåºåˆ—</h3>
<h4 data-id="heading-22">é—®é¢˜æè¿°</h4>
<p>ç»™å®šè¿›æ ˆåºåˆ—1~nï¼Œç”Ÿæˆæ‰€æœ‰åˆæ³•çš„å‡ºæ ˆåºåˆ—ï¼ˆä¸èƒ½ä»ç©ºæ ˆå‡ºæ ˆï¼‰ã€‚</p>
<h4 data-id="heading-23">è§£é¢˜æ€è·¯ï¼ˆä¸æ‹¬å·é—®é¢˜çš„ç­‰ä»·æ€§ï¼‰</h4>




















<table><thead><tr><th>å‡ºæ ˆåœºæ™¯</th><th>æ‹¬å·åœºæ™¯</th><th>çº¦æŸæ¡ä»¶</th></tr></thead><tbody><tr><td>å…ƒç´ è¿›æ ˆ</td><td>æ·»åŠ å·¦æ‹¬å·</td><td>è¿›æ ˆæ•°â‰¤n</td></tr><tr><td>å…ƒç´ å‡ºæ ˆ</td><td>æ·»åŠ å³æ‹¬å·</td><td>å‡ºæ ˆæ•°&lt;è¿›æ ˆæ•°</td></tr></tbody></table>
<h4 data-id="heading-24">ä»£ç æ¨¡æ¿ï¼ˆJavaScriptï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-comment">/**
 * ç”Ÿæˆ1~nçš„æ‰€æœ‰åˆæ³•å‡ºæ ˆåºåˆ—
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">n</span> - å…ƒç´ ä¸ªæ•°
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number[][]</span>} æ‰€æœ‰åˆæ³•å‡ºæ ˆåºåˆ—
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">generatePopSequence</span>(<span class="hljs-params">n</span>) {
    <span class="hljs-keyword">const</span> result = [];

    <span class="hljs-comment">// å›æº¯å‡½æ•°ï¼šinStack-æ ˆå†…å…ƒç´ ï¼ŒoutStack-å·²å‡ºæ ˆå…ƒç´ ï¼Œnext-ä¸‹ä¸€ä¸ªè¦è¿›æ ˆçš„å…ƒç´ </span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">backtrack</span> = (<span class="hljs-params">inStack, outStack, next</span>) =&gt; {
        <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶ï¼šæ ˆç©ºä¸”æ‰€æœ‰å…ƒç´ å·²è¿›æ ˆ</span>
        <span class="hljs-keyword">if</span> (inStack.<span class="hljs-property">length</span> === <span class="hljs-number">0</span> &amp;&amp; next &gt; n) {
            result.<span class="hljs-title function_">push</span>([...outStack]);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// æ ˆéç©ºæ—¶ï¼Œå¯å‡ºæ ˆ</span>
        <span class="hljs-keyword">if</span> (inStack.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">const</span> top = inStack.<span class="hljs-title function_">pop</span>();
            outStack.<span class="hljs-title function_">push</span>(top);
            <span class="hljs-title function_">backtrack</span>(inStack, outStack, next);
            <span class="hljs-comment">// å›æº¯ï¼šæ¢å¤çŠ¶æ€</span>
            outStack.<span class="hljs-title function_">pop</span>();
            inStack.<span class="hljs-title function_">push</span>(top);
        }

        <span class="hljs-comment">// è¿˜æœ‰å…ƒç´ æœªè¿›æ ˆæ—¶ï¼Œå¯è¿›æ ˆ</span>
        <span class="hljs-keyword">if</span> (next &lt;= n) {
            inStack.<span class="hljs-title function_">push</span>(next);
            <span class="hljs-title function_">backtrack</span>(inStack, outStack, next + <span class="hljs-number">1</span>);
            <span class="hljs-comment">// å›æº¯ï¼šæ¢å¤çŠ¶æ€</span>
            inStack.<span class="hljs-title function_">pop</span>();
        }
    };

    <span class="hljs-title function_">backtrack</span>([], [], <span class="hljs-number">1</span>);
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// æµ‹è¯•ï¼šn=3 â†’ è¾“å‡º5ç§åºåˆ—</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">generatePopSequence</span>(<span class="hljs-number">3</span>)); 
<span class="hljs-comment">// [[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,2,1]]</span>
}
</code></pre>
<h3 data-id="heading-25">3.3 åœºæ™¯3ï¼šä¸åŒçš„äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰å½¢æ€</h3>
<h4 data-id="heading-26">é—®é¢˜æè¿°</h4>
<p>ç»™å®šnä¸ªä¸åŒçš„èŠ‚ç‚¹ï¼ˆå¦‚1~nï¼‰ï¼Œç»Ÿè®¡æ‰€æœ‰å¯èƒ½çš„äºŒå‰æœç´¢æ ‘å½¢æ€æ•°ï¼Œæˆ–ç”Ÿæˆæ‰€æœ‰å½¢æ€ã€‚</p>
<h4 data-id="heading-27">è§£é¢˜æ€è·¯</h4>
<p>BSTçš„æ ¸å¿ƒæ˜¯â€œå·¦å­æ ‘å€¼&lt;æ ¹å€¼&lt;å³å­æ ‘å€¼â€ï¼Œå› æ­¤ï¼š</p>
<ul>
<li>
<p>é€‰ç¬¬iä¸ªèŠ‚ç‚¹ä½œä¸ºæ ¹ï¼Œå·¦å­æ ‘æœ‰i-1ä¸ªèŠ‚ç‚¹ï¼Œå³å­æ ‘æœ‰n-iä¸ªèŠ‚ç‚¹ï¼›</p>
</li>
<li>
<p>å·¦å­æ ‘å½¢æ€æ•°Ã—å³å­æ ‘å½¢æ€æ•° = ä»¥iä¸ºæ ¹çš„å½¢æ€æ•°ï¼›</p>
</li>
<li>
<p>éå†æ‰€æœ‰iï¼ˆ1â‰¤iâ‰¤nï¼‰ï¼Œæ±‚å’Œå¾—åˆ°æ€»å½¢æ€æ•°ï¼ˆå³C(n)ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-28">ä»£ç æ¨¡æ¿1ï¼šç»Ÿè®¡å½¢æ€æ•°ï¼ˆé€’æ¨å…¬å¼ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-comment">/**
 * ç»Ÿè®¡nä¸ªèŠ‚ç‚¹çš„BSTå½¢æ€æ•°
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">n</span> - èŠ‚ç‚¹æ•°
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} å½¢æ€æ€»æ•°ï¼ˆç¬¬nä¸ªå¡ç‰¹å…°æ•°ï¼‰
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">countBST</span>(<span class="hljs-params">n</span>) {
    <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(n + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>);
    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>; <span class="hljs-comment">// è¾¹ç•Œï¼š0ä¸ªèŠ‚ç‚¹=ç©ºæ ‘ï¼Œ1ç§å½¢æ€</span>

    <span class="hljs-comment">// é€’æ¨å…¬å¼ï¼šC(n) = sum(C(i) * C(n-1-i))</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; i; j++) {
            <span class="hljs-comment">// j=å·¦å­æ ‘èŠ‚ç‚¹æ•°ï¼Œi-1-j=å³å­æ ‘èŠ‚ç‚¹æ•°ï¼ˆæ ¹å 1ä¸ªï¼‰</span>
            dp[i] += dp[j] * dp[i - <span class="hljs-number">1</span> - j];
        }
    }
    <span class="hljs-keyword">return</span> dp[n];
}

<span class="hljs-comment">// æµ‹è¯•ï¼šn=3 â†’ è¾“å‡º5</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">countBST</span>(<span class="hljs-number">3</span>)); 
}
</code></pre>
<h4 data-id="heading-29">ä»£ç æ¨¡æ¿2ï¼šç”Ÿæˆæ‰€æœ‰BSTå½¢æ€</h4>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-comment">// å®šä¹‰äºŒå‰æ ‘èŠ‚ç‚¹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">val</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">val</span> = val;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span> = <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-comment">/**
 * ç”Ÿæˆnä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰BSTå½¢æ€
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">n</span> - èŠ‚ç‚¹æ•°ï¼ˆå€¼ä¸º1~nï¼‰
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">TreeNode[]</span>} æ‰€æœ‰BSTçš„æ ¹èŠ‚ç‚¹æ•°ç»„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">generateBST</span>(<span class="hljs-params">n</span>) {
    <span class="hljs-comment">// ç”Ÿæˆ[start, end]èŒƒå›´å†…çš„æ‰€æœ‰BST</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">build</span> = (<span class="hljs-params">start, end</span>) =&gt; {
        <span class="hljs-keyword">const</span> res = [];
        <span class="hljs-keyword">if</span> (start &gt; end) {
            res.<span class="hljs-title function_">push</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// ç©ºæ ‘</span>
            <span class="hljs-keyword">return</span> res;
        }

        <span class="hljs-comment">// éå†æ‰€æœ‰å¯èƒ½çš„æ ¹èŠ‚ç‚¹i</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt;= end; i++) {
            <span class="hljs-keyword">const</span> leftTrees = <span class="hljs-title function_">build</span>(start, i - <span class="hljs-number">1</span>); <span class="hljs-comment">// å·¦å­æ ‘æ‰€æœ‰å½¢æ€</span>
            <span class="hljs-keyword">const</span> rightTrees = <span class="hljs-title function_">build</span>(i + <span class="hljs-number">1</span>, end); <span class="hljs-comment">// å³å­æ ‘æ‰€æœ‰å½¢æ€</span>

            <span class="hljs-comment">// ä¹˜æ³•åŸç†ï¼šç»„åˆå·¦å³å­æ ‘</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> left <span class="hljs-keyword">of</span> leftTrees) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> right <span class="hljs-keyword">of</span> rightTrees) {
                    <span class="hljs-keyword">const</span> root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(i);
                    root.<span class="hljs-property">left</span> = left;
                    root.<span class="hljs-property">right</span> = right;
                    res.<span class="hljs-title function_">push</span>(root);
                }
            }
        }
        <span class="hljs-keyword">return</span> res;
    };

    <span class="hljs-keyword">return</span> n === <span class="hljs-number">0</span> ? [] : <span class="hljs-title function_">build</span>(<span class="hljs-number">1</span>, n);
}

<span class="hljs-comment">// æµ‹è¯•ï¼šç»Ÿè®¡n=3çš„å½¢æ€æ•°</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">generateBST</span>(<span class="hljs-number">3</span>).<span class="hljs-property">length</span>); <span class="hljs-comment">// è¾“å‡º5</span>
}
</code></pre>
<h2 data-id="heading-30">å››ã€å¦‚ä½•å¿«é€Ÿåˆ¤æ–­é¢˜ç›®æ˜¯å¦ç”¨å¡ç‰¹å…°æ•°ï¼Ÿ</h2>
<p>é‡åˆ°ä»¥ä¸‹ç‰¹å¾çš„è®¡æ•°/ç”Ÿæˆé¢˜ï¼Œç›´æ¥è”æƒ³åˆ°å¡ç‰¹å…°æ•°ï¼š</p>
<ol>
<li>
<p>å­˜åœ¨â€œå‰ç¼€çº¦æŸâ€ï¼ˆå¦‚æ‹¬å·å·¦â‰¥å³ã€æ ˆéç©ºæ‰èƒ½å‡ºæ ˆã€BSTçš„å·¦&lt;æ ¹&lt;å³ï¼‰ï¼›</p>
</li>
<li>
<p>é—®é¢˜å¯æ‹†åˆ†ä¸ºâ€œå·¦å³ä¸¤ä¸ªç‹¬ç«‹å­é—®é¢˜â€ï¼›</p>
</li>
<li>
<p>å°ä¾‹å­çš„ç»“æœç¬¦åˆå¡ç‰¹å…°æ•°ï¼ˆn=1â†’1ï¼Œn=2â†’2ï¼Œn=3â†’5ï¼Œn=4â†’14ï¼‰ã€‚</p>
</li>
</ol>
<h2 data-id="heading-31">äº”ã€æ€»ç»“</h2>
<p>å¡ç‰¹å…°æ•°çš„æ ¸å¿ƒä¸æ˜¯â€œæ­»è®°å…¬å¼â€ï¼Œè€Œæ˜¯â€œç†è§£çº¦æŸä¸‹çš„æ‹†åˆ†é€»è¾‘â€ï¼š</p>
<ol>
<li>
<p>ç”±æ¥ï¼šæºäºå‡¸å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†é—®é¢˜ï¼Œåæ¥æ‰©å±•åˆ°å„ç±»çº¦æŸè®¡æ•°åœºæ™¯ï¼›</p>
</li>
<li>
<p>åŸç†ï¼šé€’æ¨å…¬å¼ï¼ˆæ‹†åˆ†é—®é¢˜+ä¹˜æ³•/åŠ æ³•åŸç†ï¼‰ã€é€šé¡¹å…¬å¼ï¼ˆè¡¥é›†æ€æƒ³+ç»„åˆæ•°åŒ–ç®€ï¼‰ï¼›</p>
</li>
<li>
<p>åº”ç”¨ï¼šæ‹¬å·ç”Ÿæˆã€å‡ºæ ˆåºåˆ—ã€BSTå½¢æ€ç­‰ï¼Œæ ¸å¿ƒæ˜¯â€œå‰ç¼€çº¦æŸ+å­é—®é¢˜æ‹†åˆ†â€ï¼›</p>
</li>
<li>
<p>è§£é¢˜ï¼šé€šç”¨æ¨¡æ¿åŸºäºå›æº¯æˆ–é€’æ¨ï¼Œåªéœ€æ ¹æ®åœºæ™¯è°ƒæ•´â€œçº¦æŸæ¡ä»¶â€å’Œâ€œå­é—®é¢˜ç»„åˆæ–¹å¼â€ã€‚</p>
</li>
</ol>
<p>æŒæ¡å¡ç‰¹å…°æ•°ï¼Œå°±èƒ½è§£å†³ä¸€ç±»é«˜é¢‘é¢è¯•é¢˜â€”â€”è®°ä½ï¼š<strong>æ‰€æœ‰ç¬¦åˆâ€œå‰ç¼€çº¦æŸ+å­é—®é¢˜æ‹†åˆ†â€çš„è®¡æ•°é—®é¢˜ï¼Œç­”æ¡ˆéƒ½æ˜¯å¡ç‰¹å…°æ•°</strong>ã€‚</p>
<p>æ‹“å±•ç»ƒä¹ ï¼šå°è¯•ç”¨å¡ç‰¹å…°æ•°è§£å†³â€œå‡¸nè¾¹å½¢ä¸‰è§’å‰–åˆ†â€é—®é¢˜ï¼ŒéªŒè¯æ˜¯å¦ç¬¦åˆC(n-2)ï¼ˆæç¤ºï¼šå‡¸nè¾¹å½¢çš„ä¸‰è§’å‰–åˆ†æ•°=ç¬¬n-2ä¸ªå¡ç‰¹å…°æ•°ï¼‰ã€‚</p>
<h2 data-id="heading-32">å…­ã€è¿›é˜¶ä¼˜åŒ–æŠ€å·§ä¸é¢è¯•çœŸé¢˜è§£æ</h2>
<h3 data-id="heading-33">6.1 è¿›é˜¶ä¼˜åŒ–ï¼šå¤§æ•°æƒ…å†µä¸‹çš„å¡ç‰¹å…°æ•°è®¡ç®—</h3>
<p>å¡ç‰¹å…°æ•°å¢é•¿æå¿«ï¼Œå½“nâ‰¥20æ—¶ï¼Œæ•°å€¼ä¼šè¿œè¶…JavaScriptåŸç”ŸNumberç±»å‹çš„æœ€å¤§å€¼ï¼ˆ2âµÂ³-1ï¼‰ï¼Œå¯¼è‡´ç²¾åº¦ä¸¢å¤±ã€‚æ­¤æ—¶éœ€è¦é€šè¿‡â€œå¤§æ•°è¿ç®—â€æˆ–å€ŸåŠ©Pythonçš„åŸç”Ÿå¤§æ•´æ•°ç±»å‹è§£å†³ã€‚</p>
<h4 data-id="heading-34">ä¼˜åŒ–æ–¹æ¡ˆ1ï¼šJavaScriptå¤§æ•°è¿ç®—ï¼ˆæ¨¡æ‹Ÿä¹˜æ³•ï¼‰</h4>
<pre><code class="hljs language-Plain" lang="Plain">
/**
 * å¤§æ•°è¿ç®—è®¡ç®—ç¬¬nä¸ªå¡ç‰¹å…°æ•°ï¼ˆé¿å…ç²¾åº¦ä¸¢å¤±ï¼‰
 * @param {number} n - å¡ç‰¹å…°æ•°åºå·
 * @returns {string} ç¬¬nä¸ªå¡ç‰¹å…°æ•°ï¼ˆå­—ç¬¦ä¸²å½¢å¼ï¼Œé¿å…å¤§æ•°æº¢å‡ºï¼‰
 */
function catalanBigNumber(n) {
    // ç”¨æ•°ç»„å­˜å‚¨å¤§æ•°ï¼Œä½ä½åœ¨å‰
    let result = [1];
    // è®¡ç®— (2n)! / (n! * (n+1)!) = ä¹˜ç§¯ä»i=n+2åˆ°2nï¼Œé™¤ä»¥i-n
    for (let i = n + 2; i &lt;= 2 * n; i++) {
        // ç¬¬ä¸€æ­¥ï¼šä¹˜ä»¥i
        let carry = 0;
        for (let j = 0; j &lt; result.length; j++) {
            const product = result[j] * i + carry;
            result[j] = product % 10;
            carry = Math.floor(product / 10);
        }
        while (carry &gt; 0) {
            result.push(carry % 10);
            carry = Math.floor(carry / 10);
        }
        // ç¬¬äºŒæ­¥ï¼šé™¤ä»¥ (i - n)
        let remainder = 0;
        for (let j = result.length - 1; j &gt;= 0; j--) {
            const dividend = remainder * 10 + result[j];
            result[j] = Math.floor(dividend / (i - n));
            remainder = dividend % (i - n);
        }
        // ç§»é™¤å‰é¢çš„0
        while (result.length &gt; 1 &amp;&amp; result[result.length - 1] === 0) {
            result.pop();
        }
    }
    // æ•°ç»„åè½¬ï¼Œè½¬ä¸ºå­—ç¬¦ä¸²
    return result.reverse().join('');
}

// æµ‹è¯•ï¼šn=20 â†’ è¾“å‡º16796ï¼ˆæ­£ç¡®çš„ç¬¬20ä¸ªå¡ç‰¹å…°æ•°ï¼‰
console.log(catalanBigNumber(20)); // è¾“å‡º"6564120420"
}
</code></pre>
<h4 data-id="heading-35">ä¼˜åŒ–æ–¹æ¡ˆ2ï¼šPythonåŸç”Ÿå¤§æ•´æ•°ï¼ˆç®€æ´é«˜æ•ˆï¼‰</h4>
<p>Pythonçš„intç±»å‹æ”¯æŒä»»æ„å¤§å°æ•´æ•°ï¼Œæ— éœ€é¢å¤–å¤„ç†å¤§æ•°ï¼Œç›´æ¥ç”¨é€šé¡¹å…¬å¼è®¡ç®—å³å¯ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">
def catalan(n):
    from math import comb
    # é€šé¡¹å…¬å¼ï¼šC(n) = 1/(n+1) * C(2n, n)
    return comb(2 * n, n) // (n + 1)

# æµ‹è¯•ï¼šn=100 â†’ ç›´æ¥è¾“å‡ºè¶…å¤§å¡ç‰¹å…°æ•°
print(catalan(100))
# è¾“å‡ºï¼š896519947090131496687170070074100632420837521538745909320
</code></pre>
<h3 data-id="heading-36">6.2 é¢è¯•çœŸé¢˜è§£æ</h3>
<h4 data-id="heading-37">çœŸé¢˜1ï¼šLeetCode 22. æ‹¬å·ç”Ÿæˆï¼ˆä¸­ç­‰ï¼‰</h4>
<p>é¢˜ç›®æè¿°ï¼šæ•°å­— n ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” æœ‰æ•ˆçš„ æ‹¬å·ç»„åˆã€‚</p>
<p>è§£é¢˜æ€è·¯ï¼šç›´æ¥å¥—ç”¨â€œåˆæ³•æ‹¬å·ç”Ÿæˆâ€æ¨¡æ¿ï¼Œæ ¸å¿ƒæ˜¯å›æº¯æ—¶éµå¾ªâ€œå·¦æ‹¬å·æ•°â‰¤nâ€å’Œâ€œå³æ‹¬å·æ•°&lt;å·¦æ‹¬å·æ•°â€çš„çº¦æŸã€‚</p>
<p>ä»£ç å®ç°ï¼šä¸æœ¬æ–‡3.1èŠ‚çš„ä»£ç æ¨¡æ¿å®Œå…¨ä¸€è‡´ï¼Œæäº¤å³å¯é€šè¿‡ã€‚</p>
<p>çœŸé¢˜è€ƒç‚¹ï¼šå¡ç‰¹å…°æ•°çš„æ ¸å¿ƒçº¦æŸã€å›æº¯ç®—æ³•çš„åº”ç”¨ã€‚</p>
<h4 data-id="heading-38">çœŸé¢˜2ï¼šLeetCode 96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ï¼ˆä¸­ç­‰ï¼‰</h4>
<p>é¢˜ç›®æè¿°ï¼šç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œæ±‚æ°ç”± n ä¸ªèŠ‚ç‚¹ç»„æˆä¸”èŠ‚ç‚¹å€¼ä» 1 åˆ° n äº’ä¸ç›¸åŒçš„ äºŒå‰æœç´¢æ ‘ æœ‰å¤šå°‘ç§ï¼Ÿè¿”å›æ»¡è¶³é¢˜æ„çš„äºŒå‰æœç´¢æ ‘çš„ç§æ•°ã€‚</p>
<p>è§£é¢˜æ€è·¯ï¼šæœ¬é¢˜æ˜¯å¡ç‰¹å…°æ•°çš„ç›´æ¥åº”ç”¨ï¼Œnä¸ªèŠ‚ç‚¹çš„BSTå½¢æ€æ•°å°±æ˜¯ç¬¬nä¸ªå¡ç‰¹å…°æ•°ï¼Œç›´æ¥å¥—ç”¨3.3èŠ‚çš„â€œç»Ÿè®¡å½¢æ€æ•°â€æ¨¡æ¿ã€‚</p>
<pre><code class="hljs language-Plain" lang="Plain">
/**
 * @param {number} n
 * @returns {number}
 */
var numTrees = function(n) {
    const dp = new Array(n + 1).fill(0);
    dp[0] = 1;
    for (let i = 1; i &lt;= n; i++) {
        for (let j = 0; j &lt; i; j++) {
            dp[i] += dp[j] * dp[i - 1 - j];
        }
    }
    return dp[n];
};
</code></pre>
<p>çœŸé¢˜è€ƒç‚¹ï¼šå¡ç‰¹å…°æ•°é€’æ¨å…¬å¼ã€åŠ¨æ€è§„åˆ’æ€æƒ³ã€‚</p>
<h4 data-id="heading-39">çœŸé¢˜3ï¼šLeetCode 95. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ IIï¼ˆä¸­ç­‰ï¼‰</h4>
<p>é¢˜ç›®æè¿°ï¼šç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¯·ä½ ç”Ÿæˆæ‰€æœ‰ç”± 1 åˆ° n ä¸ºèŠ‚ç‚¹æ‰€ç»„æˆçš„ äºŒå‰æœç´¢æ ‘ ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ ¹èŠ‚ç‚¹åˆ—è¡¨ã€‚</p>
<p>è§£é¢˜æ€è·¯ï¼šå¥—ç”¨3.3èŠ‚çš„â€œç”Ÿæˆæ‰€æœ‰BSTå½¢æ€â€æ¨¡æ¿ï¼Œé€šè¿‡é€’å½’æ„å»ºå·¦å³å­æ ‘ï¼Œå†ç»„åˆå¾—åˆ°æ‰€æœ‰åˆæ³•BSTã€‚</p>
<p>ä»£ç å®ç°ï¼šä¸æœ¬æ–‡3.3èŠ‚çš„ä»£ç æ¨¡æ¿ä¸€è‡´ï¼Œæ³¨æ„TreeNodeçš„å®šä¹‰ç¬¦åˆé¢˜ç›®è¦æ±‚å³å¯ã€‚</p>
<p>çœŸé¢˜è€ƒç‚¹ï¼šå¡ç‰¹å…°æ•°çš„æ‹†åˆ†é€»è¾‘ã€é€’å½’ç»„åˆå­é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç†”æ–­é™æµå®æˆ˜æŒ‡å—ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¨³å®šæ€§å®ˆå«]]></title>    <link>https://juejin.cn/post/7590724064521257023</link>    <guid>https://juejin.cn/post/7590724064521257023</guid>    <pubDate>2026-01-04T06:02:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590724064521257023" data-draft-id="7590752433988419638" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç†”æ–­é™æµå®æˆ˜æŒ‡å—ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¨³å®šæ€§å®ˆå«"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2026-01-04T06:02:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç†”æ–­é™æµå®æˆ˜æŒ‡å—ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¨³å®šæ€§å®ˆå«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T06:02:11.000Z" title="Sun Jan 04 2026 06:02:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç†”æ–­é™æµå®æˆ˜æŒ‡å—ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¨³å®šæ€§å®ˆå«</h2>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒæœåŠ¡ä¾èµ–é”™ç»¼å¤æ‚ï¼Œä¸€ä¸ªæœåŠ¡çš„æ•…éšœå¯èƒ½å¼•å‘è¿é”ååº”ï¼šç¬¬ä¸‰æ–¹æ¥å£å“åº”è¶…æ—¶æ‹–å®æ ¸å¿ƒæœåŠ¡ã€çªå‘æµé‡å†²å®æ•°æ®åº“ã€ä¸‹æ¸¸æœåŠ¡å´©æºƒå¯¼è‡´ä¸Šæ¸¸æœåŠ¡å †ç§¯è¯·æ±‚â€¦â€¦è¿™äº›é—®é¢˜æœ€ç»ˆéƒ½ä¼šæ¼”å˜ä¸ºâ€œæœåŠ¡é›ªå´©â€ï¼Œé€ æˆç³»ç»Ÿå¤§é¢ç§¯ç˜«ç—ªã€‚è€Œç†”æ–­ï¼ˆCircuit Breakerï¼‰å’Œé™æµï¼ˆRate Limitingï¼‰ï¼Œæ­£æ˜¯åº”å¯¹è¿™äº›é£é™©çš„ä¸¤å¤§æ ¸å¿ƒæ‰‹æ®µâ€”â€”ç†”æ–­è´Ÿè´£â€œéš”ç¦»æ•…éšœâ€ï¼Œé¿å…é£é™©æ‰©æ•£ï¼›é™æµè´Ÿè´£â€œæ§åˆ¶æµé‡â€ï¼Œé˜²æ­¢ç³»ç»Ÿè¿‡è½½ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»æ ¸å¿ƒé€»è¾‘ã€å®ç°åŸç†ã€ä¸»æµæ–¹æ¡ˆåˆ°è½åœ°å®è·µï¼Œå…¨é¢æŒæ¡ç†”æ–­é™æµçš„è®¾è®¡ä¸åº”ç”¨ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆå¿…é¡»åšç†”æ–­é™æµï¼Ÿåˆ†å¸ƒå¼ç³»ç»Ÿçš„ç”Ÿæ­»è€ƒéªŒ</h3>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¨³å®šæ€§ä¾èµ–äºâ€œä¾èµ–é“¾çš„å¯é æ€§â€ï¼Œä½†ç°å®ä¸­ï¼Œä¾èµ–æ•…éšœå’Œæµé‡æ³¢åŠ¨æ— å¤„ä¸åœ¨ï¼Œæ ¸å¿ƒé£é™©åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æœåŠ¡ä¾èµ–æ•…éšœæ‰©æ•£</strong>ï¼šæ ¸å¿ƒæœåŠ¡Aä¾èµ–æœåŠ¡Bï¼ŒæœåŠ¡Bå› ç½‘ç»œæ•…éšœæˆ–èµ„æºè€—å°½å“åº”ç¼“æ…¢ã€‚æ­¤æ—¶æœåŠ¡Açš„è¯·æ±‚ä¼šä¸€ç›´ç­‰å¾…æœåŠ¡Bçš„å“åº”ï¼Œå¯¼è‡´çº¿ç¨‹æ± è¢«å æ»¡ï¼Œæ— æ³•å¤„ç†æ–°è¯·æ±‚ï¼Œæœ€ç»ˆæœåŠ¡Aä¹Ÿå´©æºƒï¼›è¿›è€Œä¾èµ–æœåŠ¡Açš„å…¶ä»–æœåŠ¡ä¹Ÿä¼šè·Ÿç€æ•…éšœï¼Œå½¢æˆâ€œæœåŠ¡é›ªå´©â€ï¼›</li>
<li><strong>çªå‘æµé‡å†²å‡»</strong>ï¼šç”µå•†å¤§ä¿ƒã€çƒ­ç‚¹äº‹ä»¶ã€çˆ¬è™«æ”»å‡»ç­‰åœºæ™¯ä¸‹ï¼Œæµé‡ä¼šçªç„¶æ¿€å¢ï¼ˆå¯èƒ½æ˜¯å¹³æ—¶çš„10å€ä»¥ä¸Šï¼‰ã€‚è‹¥ç³»ç»Ÿæ— æµé‡æ§åˆ¶ï¼Œæ•°æ®åº“è¿æ¥æ± ã€çº¿ç¨‹æ± ã€å¸¦å®½ç­‰èµ„æºä¼šè¢«ç¬é—´è€—å°½ï¼Œå¯¼è‡´æ­£å¸¸è¯·æ±‚æ— æ³•å“åº”ï¼›</li>
<li><strong>ç¬¬ä¸‰æ–¹æ¥å£ä¸å¯æ§</strong>ï¼šè°ƒç”¨æ”¯ä»˜ã€ç‰©æµã€çŸ­ä¿¡ç­‰ç¬¬ä¸‰æ–¹æ¥å£æ—¶ï¼Œç¬¬ä¸‰æ–¹æœåŠ¡çš„ç¨³å®šæ€§ä¸å—æˆ‘ä»¬æ§åˆ¶ã€‚è‹¥ç¬¬ä¸‰æ–¹æ¥å£è¶…æ—¶æˆ–æŠ¥é”™ï¼Œå¤§é‡é‡è¯•è¯·æ±‚ä¼šè¿›ä¸€æ­¥åŠ é‡ç³»ç»Ÿè´Ÿæ‹…ï¼›</li>
<li><strong>èµ„æºç«äº‰å¯¼è‡´çš„æ€§èƒ½é€€åŒ–</strong>ï¼šå¤šä¸ªæœåŠ¡å…±äº«æ•°æ®åº“ã€ç¼“å­˜ç­‰èµ„æºæ—¶ï¼ŒæŸä¸ªæœåŠ¡çš„é«˜å¹¶å‘è¯·æ±‚ä¼šæŠ¢å èµ„æºï¼Œå¯¼è‡´å…¶ä»–æœåŠ¡çš„å“åº”å»¶è¿Ÿå¢åŠ ï¼Œæ•´ä½“ç³»ç»Ÿæ€§èƒ½é€€åŒ–ã€‚</li>
</ul>
<p>è¿™äº›åœºæ™¯ä¸‹ï¼Œä»…é â€œé‡è¯•â€â€œé™çº§â€æ— æ³•ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ï¼šé‡è¯•ä¼šæ”¾å¤§æ•…éšœå½±å“ï¼Œé™çº§åªèƒ½ä½œä¸ºå…œåº•è¡¥å……ã€‚è€Œç†”æ–­é™æµæ˜¯â€œä¸»åŠ¨é˜²å¾¡â€æœºåˆ¶â€”â€”ç†”æ–­é€šè¿‡â€œæ–­å¼€å…³è”â€éš”ç¦»æ•…éšœæºï¼Œé™æµé€šè¿‡â€œå‰Šå³°å¡«è°·â€æ§åˆ¶èµ„æºå ç”¨ï¼Œä¸¤è€…ç»“åˆæ‰èƒ½ä»æºå¤´ä¿éšœç³»ç»Ÿç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒæ¦‚å¿µï¼šç†”æ–­ä¸é™æµçš„æœ¬è´¨åŒºåˆ«ä¸ååŒå…³ç³»</h3>
<p>ç†”æ–­å’Œé™æµå¸¸è¢«åŒæ—¶æåŠï¼Œä½†ä¸¤è€…çš„æ ¸å¿ƒç›®æ ‡ã€ä½œç”¨åœºæ™¯å®Œå…¨ä¸åŒï¼Œå´åˆç›¸è¾…ç›¸æˆï¼š</p>
<h4 data-id="heading-3">1. ç†”æ–­ï¼ˆCircuit Breakerï¼‰ï¼šæ•…éšœéš”ç¦»çš„â€œå®‰å…¨å¼€å…³â€</h4>
<p>æ ¸å¿ƒå®šä¹‰ï¼š<strong>å½“æŸä¸ªä¾èµ–æœåŠ¡çš„æ•…éšœæ¬¡æ•°è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œè‡ªåŠ¨â€œæ–­å¼€â€ä¸è¯¥æœåŠ¡çš„è¿æ¥ï¼Œåç»­è¯·æ±‚ä¸å†ç›´æ¥è°ƒç”¨æ•…éšœæœåŠ¡ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›å…œåº•ç»“æœï¼ˆé™çº§é€»è¾‘ï¼‰ï¼›å½“æ•…éšœæœåŠ¡æ¢å¤åï¼Œå†é€æ­¥æ¢å¤è¿æ¥</strong>ã€‚</p>
<p>ç±»æ¯”ç°å®åœºæ™¯ï¼šå®¶é‡Œçš„ç”µè·¯è¿‡è½½æ—¶ï¼Œä¿é™©ä¸ä¼šç†”æ–­ï¼Œé¿å…ç«ç¾ï¼›æ•…éšœæ’é™¤åï¼Œæ›´æ¢ä¿é™©ä¸å³å¯æ¢å¤ä¾›ç”µã€‚ç†”æ–­çš„æ ¸å¿ƒæ˜¯â€œç‰ºç‰²å±€éƒ¨ï¼Œä¿å…¨æ•´ä½“â€ï¼Œé˜²æ­¢æ•…éšœæ‰©æ•£ã€‚</p>
<p>ç†”æ–­çš„ä¸‰ä¸ªæ ¸å¿ƒçŠ¶æ€ï¼ˆçŠ¶æ€æµè½¬æ˜¯å…³é”®ï¼‰ï¼š</p>
<ol>
<li><strong>é—­åˆçŠ¶æ€ï¼ˆClosedï¼‰</strong> ï¼šæ­£å¸¸çŠ¶æ€ï¼Œè¯·æ±‚å¯ä»¥æ­£å¸¸è°ƒç”¨ä¾èµ–æœåŠ¡ï¼›åŒæ—¶è®°å½•æ•…éšœæ¬¡æ•°å’ŒæˆåŠŸç‡ï¼›</li>
<li><strong>æ‰“å¼€çŠ¶æ€ï¼ˆOpenï¼‰</strong> ï¼šå½“æ•…éšœæ¬¡æ•°/å¤±è´¥ç‡è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œè¿›å…¥æ‰“å¼€çŠ¶æ€ï¼›æ­¤æ—¶æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«æ‹¦æˆªï¼Œç›´æ¥æ‰§è¡Œé™çº§é€»è¾‘ï¼Œä¸è°ƒç”¨ä¾èµ–æœåŠ¡ï¼›åŒæ—¶è®¾ç½®ä¸€ä¸ªâ€œè¶…æ—¶æ—¶é—´â€ï¼Œè¶…æ—¶åè‡ªåŠ¨è¿›å…¥åŠå¼€çŠ¶æ€ï¼›</li>
<li><strong>åŠå¼€çŠ¶æ€ï¼ˆHalf-Openï¼‰</strong> ï¼šå…è®¸å°‘é‡è¯·æ±‚å°è¯•è°ƒç”¨ä¾èµ–æœåŠ¡ï¼›è‹¥è¿™äº›è¯·æ±‚æˆåŠŸï¼ˆæˆåŠŸç‡è¾¾åˆ°é˜ˆå€¼ï¼‰ï¼Œè¯´æ˜æœåŠ¡å·²æ¢å¤ï¼Œè¿›å…¥é—­åˆçŠ¶æ€ï¼›è‹¥ä»å¤±è´¥ï¼Œåˆ™é‡æ–°è¿›å…¥æ‰“å¼€çŠ¶æ€ã€‚</li>
</ol>
<h4 data-id="heading-4">2. é™æµï¼ˆRate Limitingï¼‰ï¼šæµé‡æ§åˆ¶çš„â€œé˜€é—¨â€</h4>
<p>æ ¸å¿ƒå®šä¹‰ï¼š<strong>é™åˆ¶å•ä½æ—¶é—´å†…è¿›å…¥ç³»ç»Ÿçš„è¯·æ±‚æ•°é‡ï¼Œæˆ–é™åˆ¶å¹¶å‘è¯·æ±‚æ•°ï¼Œé¿å…ç³»ç»Ÿèµ„æºè¢«è¿‡åº¦å ç”¨ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨æ‰¿è½½èƒ½åŠ›å†…ç¨³å®šè¿è¡Œ</strong>ã€‚</p>
<p>ç±»æ¯”ç°å®åœºæ™¯ï¼šé«˜é€Ÿå…¬è·¯çš„æ”¶è´¹ç«™ï¼Œé€šè¿‡é™åˆ¶æ”¾è¡Œè½¦è¾†çš„é€Ÿåº¦å’Œæ•°é‡ï¼Œé¿å…é«˜é€Ÿå…¬è·¯æ‹¥å µï¼›æ¸¸ä¹å›­çš„é¡¹ç›®æ’é˜Ÿï¼Œé€šè¿‡é™åˆ¶åŒæ—¶æ¸¸ç©çš„äººæ•°ï¼Œä¿è¯æ¸¸ç©ä½“éªŒå’Œå®‰å…¨ã€‚é™æµçš„æ ¸å¿ƒæ˜¯â€œå‰Šå³°å¡«è°·â€ï¼Œè®©æµé‡å¹³ç¨³è¿›å…¥ç³»ç»Ÿã€‚</p>
<p>é™æµçš„ä¸¤ä¸ªæ ¸å¿ƒç»´åº¦ï¼š</p>
<ul>
<li><strong>QPSé™æµ</strong>ï¼šé™åˆ¶å•ä½æ—¶é—´å†…çš„è¯·æ±‚æ¬¡æ•°ï¼ˆå¦‚æ¯ç§’æœ€å¤šå¤„ç†1000ä¸ªè¯·æ±‚ï¼‰ï¼›é€‚ç”¨äºçŸ­è€—æ—¶æ¥å£ï¼ˆå¦‚æŸ¥è¯¢æ¥å£ï¼‰ï¼›</li>
<li><strong>å¹¶å‘æ•°é™æµ</strong>ï¼šé™åˆ¶åŒæ—¶å¤„ç†çš„è¯·æ±‚æ•°é‡ï¼ˆå¦‚æœ€å¤šå…è®¸100ä¸ªå¹¶å‘è¯·æ±‚ï¼‰ï¼›é€‚ç”¨äºé•¿è€—æ—¶æ¥å£ï¼ˆå¦‚æ–‡ä»¶ä¸Šä¼ ã€å¤æ‚è®¡ç®—ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-5">3. ç†”æ–­ä¸é™æµçš„ååŒå…³ç³»</h4>
<p>ç†”æ–­å’Œé™æµä¸æ˜¯æ›¿ä»£å…³ç³»ï¼Œè€Œæ˜¯äº’è¡¥å…³ç³»ï¼Œå…±åŒæ„æˆç³»ç»Ÿçš„â€œåŒå±‚é˜²æŠ¤â€ï¼š</p>
<ul>
<li>é™æµæ˜¯â€œå‰ç½®é˜²æŠ¤â€ï¼šåœ¨æµé‡è¿›å…¥ç³»ç»Ÿå‰è¿›è¡Œæ§åˆ¶ï¼Œé¿å…è¿‡è½½ï¼›</li>
<li>ç†”æ–­æ˜¯â€œåç½®é˜²æŠ¤â€ï¼šå½“é™æµå¤±æ•ˆï¼ˆå¦‚çªå‘æµé‡çªç ´é™æµé˜ˆå€¼ï¼‰æˆ–ä¾èµ–æœåŠ¡æ•…éšœæ—¶ï¼Œé€šè¿‡ç†”æ–­éš”ç¦»æ•…éšœï¼Œé¿å…ç³»ç»Ÿè¿›ä¸€æ­¥æ¶åŒ–ï¼›</li>
<li>å…¸å‹ååŒåœºæ™¯ï¼šå¤§ä¿ƒæœŸé—´ï¼Œå…ˆé€šè¿‡é™æµæ§åˆ¶è¿›å…¥ç³»ç»Ÿçš„æµé‡ï¼›è‹¥ä¸‹æ¸¸æ”¯ä»˜æœåŠ¡å“åº”ç¼“æ…¢ï¼Œå†é€šè¿‡ç†”æ–­æ–­å¼€ä¸æ”¯ä»˜æœåŠ¡çš„è¿æ¥ï¼Œè¿”å›â€œæ”¯ä»˜ç¹å¿™ï¼Œè¯·ç¨åé‡è¯•â€çš„é™çº§ç»“æœï¼Œé¿å…æ ¸å¿ƒè®¢å•æœåŠ¡è¢«æ‹–å®ã€‚</li>
</ul>
<h3 data-id="heading-6">ä¸‰ã€æ ¸å¿ƒå®ç°åŸç†ï¼šç†”æ–­çš„çŠ¶æ€æœºä¸é™æµçš„ç®—æ³•</h3>
<p>è¦æ­£ç¡®ä½¿ç”¨ç†”æ–­é™æµï¼Œå¿…é¡»ç†è§£å…¶åº•å±‚å®ç°åŸç†â€”â€”ç†”æ–­çš„æ ¸å¿ƒæ˜¯â€œçŠ¶æ€æœºæµè½¬é€»è¾‘â€ï¼Œé™æµçš„æ ¸å¿ƒæ˜¯â€œæµé‡æ§åˆ¶ç®—æ³•â€ã€‚</p>
<h4 data-id="heading-7">1. ç†”æ–­çš„æ ¸å¿ƒå®ç°åŸç†ï¼ˆçŠ¶æ€æœºæµè½¬ï¼‰</h4>
<p>ç†”æ–­çš„æ ¸å¿ƒæ˜¯â€œåŸºäºæ•…éšœç»Ÿè®¡çš„çŠ¶æ€æµè½¬â€ï¼Œå…³é”®å‚æ•°åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ•…éšœé˜ˆå€¼ï¼ˆFailure Thresholdï¼‰ï¼šå¦‚â€œ10ç§’å†…å¤±è´¥æ¬¡æ•°è¾¾åˆ°5æ¬¡â€æˆ–â€œå¤±è´¥ç‡è¾¾åˆ°50%â€ï¼›</li>
<li>æ‰“å¼€è¶…æ—¶æ—¶é—´ï¼ˆWait Duration in Open Stateï¼‰ï¼šå¦‚â€œæ‰“å¼€çŠ¶æ€æŒç»­10ç§’åï¼Œè¿›å…¥åŠå¼€çŠ¶æ€â€ï¼›</li>
<li>åŠå¼€çŠ¶æ€è¯•æ¢é˜ˆå€¼ï¼ˆPermitted Number of Calls in Half-Open Stateï¼‰ï¼šå¦‚â€œåŠå¼€çŠ¶æ€å…è®¸5ä¸ªè¯·æ±‚è¯•æ¢â€ã€‚</li>
</ul>
<p>çŠ¶æ€æµè½¬æµç¨‹è¯¦è§£ï¼š</p>
<ol>
<li>åˆå§‹çŠ¶æ€ä¸ºâ€œé—­åˆâ€ï¼Œè¯·æ±‚æ­£å¸¸è°ƒç”¨ä¾èµ–æœåŠ¡ï¼›æ¯æ¬¡è°ƒç”¨åè®°å½•çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ï¼›</li>
<li>å½“10ç§’å†…å¤±è´¥æ¬¡æ•°è¾¾åˆ°5æ¬¡ï¼ˆæ•…éšœé˜ˆå€¼ï¼‰ï¼ŒçŠ¶æ€åˆ‡æ¢ä¸ºâ€œæ‰“å¼€â€ï¼›</li>
<li>æ‰“å¼€çŠ¶æ€æŒç»­10ç§’ï¼ˆè¶…æ—¶æ—¶é—´ï¼‰ï¼ŒæœŸé—´æ‰€æœ‰è¯·æ±‚è¢«æ‹¦æˆªï¼Œæ‰§è¡Œé™çº§é€»è¾‘ï¼›</li>
<li>10ç§’åè¿›å…¥â€œåŠå¼€â€çŠ¶æ€ï¼Œå…è®¸5ä¸ªè¯·æ±‚è¯•æ¢è°ƒç”¨ä¾èµ–æœåŠ¡ï¼›</li>
<li>è‹¥5ä¸ªè¯•æ¢è¯·æ±‚çš„æˆåŠŸç‡â‰¥80%ï¼ˆæ¢å¤é˜ˆå€¼ï¼‰ï¼ŒçŠ¶æ€åˆ‡æ¢ä¸ºâ€œé—­åˆâ€ï¼Œæ¢å¤æ­£å¸¸è°ƒç”¨ï¼›è‹¥æˆåŠŸç‡ä¸è¾¾æ ‡ï¼Œé‡æ–°åˆ‡æ¢ä¸ºâ€œæ‰“å¼€â€çŠ¶æ€ã€‚</li>
</ol>
<p>å…³é”®æ³¨æ„ç‚¹ï¼šæ•…éšœç»Ÿè®¡éœ€è¦â€œæ»‘åŠ¨çª—å£â€ï¼ˆå¦‚10ç§’æ»‘åŠ¨çª—å£ï¼‰ï¼Œè€Œéâ€œå›ºå®šçª—å£â€ï¼Œé¿å…å› çª—å£è¾¹ç•Œé—®é¢˜å¯¼è‡´çš„ç»Ÿè®¡åå·®ï¼ˆå¦‚å›ºå®šçª—å£åœ¨ç¬¬10ç§’å’Œç¬¬11ç§’åˆ†åˆ«å‡ºç°å¤§é‡æ•…éšœï¼Œè¢«è¯¯åˆ¤ä¸ºä¸¤ä¸ªçª—å£çš„æ­£å¸¸æ•…éšœï¼‰ã€‚</p>
<h4 data-id="heading-8">2. é™æµçš„æ ¸å¿ƒå®ç°åŸç†ï¼ˆå››å¤§ç»å…¸ç®—æ³•ï¼‰</h4>
<p>é™æµçš„æ ¸å¿ƒæ˜¯é€šè¿‡ç®—æ³•æ§åˆ¶æµé‡çš„æ”¾è¡Œé€Ÿåº¦ï¼Œå››å¤§ç»å…¸ç®—æ³•å„æœ‰ä¼˜åŠ£ï¼Œé€‚ç”¨äºä¸åŒåœºæ™¯ï¼š</p>
<h5 data-id="heading-9">ï¼ˆ1ï¼‰å›ºå®šçª—å£è®¡æ•°å™¨ç®—æ³•ï¼ˆFixed Window Counterï¼‰</h5>
<p>æ ¸å¿ƒåŸç†ï¼šå°†æ—¶é—´åˆ’åˆ†ä¸ºå›ºå®šå¤§å°çš„çª—å£ï¼ˆå¦‚1ç§’ï¼‰ï¼Œæ¯ä¸ªçª—å£ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼›è¯·æ±‚è¿›å…¥æ—¶è®¡æ•°å™¨åŠ 1ï¼Œè‹¥è®¡æ•°å™¨è¶…è¿‡é˜ˆå€¼åˆ™æ‹’ç»è¯·æ±‚ï¼›çª—å£ç»“æŸæ—¶è®¡æ•°å™¨æ¸…é›¶ã€‚</p>
<p>ä¼˜ç‚¹ï¼šå®ç°æœ€ç®€å•ï¼Œæ— é”ç«äº‰ï¼Œæ€§èƒ½é«˜ï¼›</p>
<p>ç¼ºç‚¹ï¼šå­˜åœ¨â€œä¸´ç•Œé—®é¢˜â€â€”â€”å¦‚çª—å£é˜ˆå€¼ä¸º100ï¼Œç¬¬0.9ç§’å’Œç¬¬1.1ç§’åˆ†åˆ«æœ‰100ä¸ªè¯·æ±‚ï¼Œä¸¤ä¸ªçª—å£éƒ½æœªè¶…é˜ˆå€¼ï¼Œä½†1.8ç§’å†…å…±æœ‰200ä¸ªè¯·æ±‚ï¼Œå¯¼è‡´çŸ­æ—¶é—´è¿‡è½½ã€‚</p>
<h5 data-id="heading-10">ï¼ˆ2ï¼‰æ»‘åŠ¨çª—å£è®¡æ•°å™¨ç®—æ³•ï¼ˆSliding Window Counterï¼‰</h5>
<p>æ ¸å¿ƒåŸç†ï¼šå°†å›ºå®šçª—å£åˆ’åˆ†ä¸ºå¤šä¸ªæ›´å°çš„â€œæ—¶é—´ç‰‡â€ï¼ˆå¦‚1ç§’çª—å£åˆ’åˆ†ä¸º10ä¸ª100æ¯«ç§’çš„æ—¶é—´ç‰‡ï¼‰ï¼›æ¯ä¸ªæ—¶é—´ç‰‡ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼›è¯·æ±‚è¿›å…¥æ—¶ï¼Œåªç»Ÿè®¡å½“å‰æ—¶é—´ç‰‡æ‰€åœ¨çª—å£å†…çš„æ‰€æœ‰æ—¶é—´ç‰‡è®¡æ•°å™¨æ€»å’Œï¼›è‹¥æ€»å’Œè¶…è¿‡é˜ˆå€¼åˆ™æ‹’ç»è¯·æ±‚ï¼›çª—å£éšæ—¶é—´æ»‘åŠ¨ï¼Œä¸¢å¼ƒè¿‡æœŸçš„æ—¶é—´ç‰‡ã€‚</p>
<p>ä¼˜ç‚¹ï¼šè§£å†³äº†å›ºå®šçª—å£çš„ä¸´ç•Œé—®é¢˜ï¼Œé™æµæ›´ç²¾å‡†ï¼›</p>
<p>ç¼ºç‚¹ï¼šå®ç°ç¨å¤æ‚ï¼Œéœ€è¦ç»´æŠ¤å¤šä¸ªæ—¶é—´ç‰‡çš„è®¡æ•°å™¨ï¼›é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œæ—¶é—´ç‰‡åˆ’åˆ†è¶Šç»†ï¼Œç²¾åº¦è¶Šé«˜ï¼Œä½†æ€§èƒ½å¼€é”€ä¹Ÿè¶Šå¤§ã€‚</p>
<h5 data-id="heading-11">ï¼ˆ3ï¼‰æ¼æ¡¶ç®—æ³•ï¼ˆLeaky Bucketï¼‰</h5>
<p>æ ¸å¿ƒåŸç†ï¼šå°†è¯·æ±‚æ¯”ä½œâ€œæ°´æµâ€ï¼Œç³»ç»Ÿæ¯”ä½œâ€œæ¼æ¡¶â€ï¼›æ°´æµæŒç»­è¿›å…¥æ¼æ¡¶ï¼Œæ¼æ¡¶ä»¥å›ºå®šé€Ÿåº¦å°†æ°´æ’å‡ºï¼›è‹¥æ°´æµé€Ÿåº¦è¶…è¿‡æ¼æ¡¶çš„æ’æ°´é€Ÿåº¦ï¼Œå¤šä½™çš„æ°´ä¼šæº¢å‡ºï¼ˆæ‹’ç»è¯·æ±‚ï¼‰ã€‚</p>
<p>ä¼˜ç‚¹ï¼šèƒ½å¹³æ»‘æµå‡ºæµé‡ï¼Œé¿å…æµé‡çªå‘ï¼›é€‚ç”¨äºéœ€è¦ç¨³å®šè¾“å‡ºæµé‡çš„åœºæ™¯ï¼ˆå¦‚æ•°æ®åº“å†™å…¥ã€ç¬¬ä¸‰æ–¹æ¥å£è°ƒç”¨ï¼‰ï¼›</p>
<p>ç¼ºç‚¹ï¼šæ— æ³•åº”å¯¹çŸ­æ—¶é—´çš„çªå‘æµé‡â€”â€”å³ä½¿ç³»ç»Ÿæœ‰ç©ºé—²èµ„æºï¼Œä¹Ÿä¼šæ‹’ç»è¶…è¿‡æ’æ°´é€Ÿåº¦çš„è¯·æ±‚ï¼Œçµæ´»æ€§ä½ã€‚</p>
<h5 data-id="heading-12">ï¼ˆ4ï¼‰ä»¤ç‰Œæ¡¶ç®—æ³•ï¼ˆToken Bucketï¼‰</h5>
<p>æ ¸å¿ƒåŸç†ï¼šç³»ç»Ÿä»¥å›ºå®šé€Ÿåº¦ï¼ˆå¦‚æ¯ç§’100ä¸ªï¼‰å‘ä»¤ç‰Œæ¡¶ä¸­æ”¾å…¥ä»¤ç‰Œï¼›è¯·æ±‚è¿›å…¥æ—¶ï¼Œéœ€è¦ä»æ¡¶ä¸­è·å–ä¸€ä¸ªä»¤ç‰Œï¼Œè·å–æˆåŠŸåˆ™æ”¾è¡Œï¼›è‹¥æ¡¶ä¸­æ— ä»¤ç‰Œåˆ™æ‹’ç»è¯·æ±‚ï¼›ä»¤ç‰Œæ¡¶æœ‰æœ€å¤§å®¹é‡ï¼Œå½“ä»¤ç‰Œæ•°è¾¾åˆ°æœ€å¤§å®¹é‡æ—¶ï¼Œå¤šä½™çš„ä»¤ç‰Œä¼šè¢«ä¸¢å¼ƒã€‚</p>
<p>ä¼˜ç‚¹ï¼šå…¼å…·â€œé™æµâ€å’Œâ€œåº”å¯¹çªå‘æµé‡â€çš„èƒ½åŠ›â€”â€”æ¡¶ä¸­ç§¯ç´¯çš„ä»¤ç‰Œå¯ä»¥åº”å¯¹çŸ­æ—¶é—´çš„çªå‘æµé‡ï¼ˆå¦‚å¤§ä¿ƒå¼€å§‹æ—¶çš„ç¬é—´æµé‡ï¼‰ï¼›æ˜¯ç›®å‰æœ€å¸¸ç”¨çš„é™æµç®—æ³•ï¼›</p>
<p>ç¼ºç‚¹ï¼šå®ç°ç›¸å¯¹å¤æ‚ï¼›éœ€è¦åˆç†è®¾ç½®â€œä»¤ç‰Œç”Ÿæˆé€Ÿåº¦â€å’Œâ€œæ¡¶å®¹é‡â€ï¼Œå¦åˆ™ä¼šå½±å“é™æµæ•ˆæœã€‚</p>
<p>ç®—æ³•é€‰å‹å»ºè®®ï¼šå¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ä¼˜å…ˆé€‰æ‹©â€œä»¤ç‰Œæ¡¶ç®—æ³•â€ï¼ˆå…¼é¡¾ç²¾å‡†å’Œçµæ´»æ€§ï¼‰ï¼›éœ€è¦ç¨³å®šè¾“å‡ºæµé‡çš„åœºæ™¯é€‰æ‹©â€œæ¼æ¡¶ç®—æ³•â€ï¼›ç®€å•åœºæ™¯ï¼ˆå¦‚éæ ¸å¿ƒæ¥å£ï¼‰å¯é€‰æ‹©â€œæ»‘åŠ¨çª—å£è®¡æ•°å™¨ç®—æ³•â€ã€‚</p>
<h3 data-id="heading-13">å››ã€ä¸»æµç†”æ–­é™æµæ¡†æ¶å®æˆ˜ï¼šResilience4jä¸Sentinel</h3>
<p>å®é™…å¼€å‘ä¸­ï¼Œæ— éœ€é‡å¤é€ è½®å­ï¼Œä¸»æµæ¡†æ¶å·²å°è£…å¥½ç†”æ–­é™æµçš„æ ¸å¿ƒé€»è¾‘ã€‚ç›®å‰æœ€å¸¸ç”¨çš„ä¸¤ä¸ªæ¡†æ¶æ˜¯ï¼šResilience4jï¼ˆè½»é‡çº§ï¼Œé€‚é…Spring Boot 2.x/3.xï¼‰å’ŒSentinelï¼ˆé˜¿é‡Œå¼€æºï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œé€‚é…å¾®æœåŠ¡åœºæ™¯ï¼‰ã€‚ä¸‹é¢åˆ†åˆ«æ¼”ç¤ºä¸¤è€…çš„æ ¸å¿ƒç”¨æ³•ï¼ˆåŸºäºSpring Bootç¯å¢ƒï¼‰ã€‚</p>
<h4 data-id="heading-14">1. Resilience4jå®æˆ˜ï¼ˆè½»é‡çº§é¦–é€‰ï¼‰</h4>
<p>Resilience4jæ˜¯Hystrixçš„æ›¿ä»£æ–¹æ¡ˆï¼ŒåŸºäºJava 8ï¼Œè½»é‡çº§ã€æ— ä¾èµ–ï¼ˆä»…ä¾èµ–SLF4Jï¼‰ï¼Œæ”¯æŒç†”æ–­ã€é™æµã€é™çº§ã€è¶…æ—¶æ§åˆ¶ç­‰åŠŸèƒ½ï¼Œæ— ç¼é›†æˆSpring Bootã€‚</p>
<h5 data-id="heading-15">ï¼ˆ1ï¼‰ç¯å¢ƒå‡†å¤‡ï¼šå¼•å…¥ä¾èµ–</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Resilience4jæ ¸å¿ƒä¾èµ–ï¼ˆç†”æ–­+é™æµï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.resilience4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>resilience4j-spring-boot3<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Spring Webä¾èµ–ï¼ˆç”¨äºæ¥å£æµ‹è¯•ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h5 data-id="heading-16">ï¼ˆ2ï¼‰é…ç½®ç†”æ–­ä¸é™æµè§„åˆ™ï¼ˆapplication.ymlï¼‰</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">resilience4j:</span>
  <span class="hljs-comment"># ç†”æ–­é…ç½®</span>
  <span class="hljs-attr">circuitbreaker:</span>
    <span class="hljs-attr">instances:</span>
      <span class="hljs-comment"># ç†”æ–­å®ä¾‹åï¼ˆéœ€ä¸@CircuitBreakerçš„nameå±æ€§ä¸€è‡´ï¼‰</span>
      <span class="hljs-attr">paymentService:</span>
        <span class="hljs-attr">slidingWindowSize:</span> <span class="hljs-number">10</span> <span class="hljs-comment"># æ»‘åŠ¨çª—å£å¤§å°ï¼ˆ10ä¸ªè¯·æ±‚ï¼‰</span>
        <span class="hljs-attr">failureRateThreshold:</span> <span class="hljs-number">50</span> <span class="hljs-comment"># å¤±è´¥ç‡é˜ˆå€¼ï¼ˆ50%ï¼‰</span>
        <span class="hljs-attr">waitDurationInOpenState:</span> <span class="hljs-number">10000</span> <span class="hljs-comment"># æ‰“å¼€çŠ¶æ€è¶…æ—¶æ—¶é—´ï¼ˆ10ç§’ï¼‰</span>
        <span class="hljs-attr">permittedNumberOfCallsInHalfOpenState:</span> <span class="hljs-number">5</span> <span class="hljs-comment"># åŠå¼€çŠ¶æ€è¯•æ¢è¯·æ±‚æ•°ï¼ˆ5ä¸ªï¼‰</span>
        <span class="hljs-attr">registerHealthIndicator:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># æ³¨å†Œå¥åº·æŒ‡æ ‡ï¼ˆç”¨äºç›‘æ§ï¼‰</span>
  <span class="hljs-comment"># é™æµé…ç½®</span>
  <span class="hljs-attr">ratelimiter:</span>
    <span class="hljs-attr">instances:</span>
      <span class="hljs-comment"># é™æµå®ä¾‹åï¼ˆéœ€ä¸@RateLimiterçš„nameå±æ€§ä¸€è‡´ï¼‰</span>
      <span class="hljs-attr">orderService:</span>
        <span class="hljs-attr">limitRefreshPeriod:</span> <span class="hljs-number">1000</span> <span class="hljs-comment"># ä»¤ç‰Œåˆ·æ–°å‘¨æœŸï¼ˆ1ç§’ï¼‰</span>
        <span class="hljs-attr">limitForPeriod:</span> <span class="hljs-number">100</span> <span class="hljs-comment"># æ¯ä¸ªå‘¨æœŸçš„ä»¤ç‰Œæ•°ï¼ˆ100ä¸ªï¼Œå³QPS=100ï¼‰</span>
        <span class="hljs-attr">timeoutDuration:</span> <span class="hljs-number">0</span> <span class="hljs-comment"># è·å–ä»¤ç‰Œçš„è¶…æ—¶æ—¶é—´ï¼ˆ0ç§’ï¼Œæ— ä»¤ç‰Œåˆ™ç›´æ¥æ‹’ç»ï¼‰</span>
</code></pre>
<h5 data-id="heading-17">ï¼ˆ3ï¼‰æ³¨è§£å¼ä½¿ç”¨ç†”æ–­ä¸é™æµ</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> io.<span class="hljs-property">github</span>.<span class="hljs-property">resilience4j</span>.<span class="hljs-property">circuitbreaker</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">CircuitBreaker</span>;
<span class="hljs-keyword">import</span> io.<span class="hljs-property">github</span>.<span class="hljs-property">resilience4j</span>.<span class="hljs-property">ratelimiter</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">RateLimiter</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">bind</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">GetMapping</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">bind</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">RequestParam</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">bind</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">RestController</span>;

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> {

    <span class="hljs-comment">// æ¨¡æ‹Ÿè°ƒç”¨æ”¯ä»˜æœåŠ¡ï¼ˆæ·»åŠ ç†”æ–­ï¼‰</span>
    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/order/pay"</span>)
    <span class="hljs-meta">@CircuitBreaker</span>(
        name = <span class="hljs-string">"paymentService"</span>, <span class="hljs-comment">// å¯¹åº”é…ç½®ä¸­çš„ç†”æ–­å®ä¾‹å</span>
        fallbackMethod = <span class="hljs-string">"payFallback"</span> <span class="hljs-comment">// é™çº§å…œåº•æ–¹æ³•å</span>
    )
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Result</span> <span class="hljs-title function_">pay</span>(<span class="hljs-params"><span class="hljs-meta">@RequestParam</span> <span class="hljs-built_in">String</span> orderNo</span>) {
        <span class="hljs-comment">// æ¨¡æ‹Ÿè°ƒç”¨æ”¯ä»˜æœåŠ¡ï¼ˆå®é™…ä¸­æ˜¯Feignè°ƒç”¨æˆ–HTTPè°ƒç”¨ï¼‰</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è°ƒç”¨æ”¯ä»˜æœåŠ¡ï¼Œè®¢å•å·ï¼š"</span> + orderNo);
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ”¯ä»˜æœåŠ¡æ•…éšœï¼ˆ50%å¤±è´¥ç‡ï¼‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ”¯ä»˜æœåŠ¡å“åº”è¶…æ—¶"</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Result</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">"æ”¯ä»˜æˆåŠŸ"</span>, <span class="hljs-string">"è®¢å•å·ï¼š"</span> + orderNo);
    }

    <span class="hljs-comment">// æ”¯ä»˜æœåŠ¡ç†”æ–­çš„é™çº§å…œåº•æ–¹æ³•</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šå‚æ•°éœ€ä¸è¢«ç†”æ–­æ–¹æ³•ä¸€è‡´ï¼Œæœ€åæ·»åŠ ä¸€ä¸ªExceptionå‚æ•°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Result</span> <span class="hljs-title function_">payFallback</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> orderNo, Exception e</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æ”¯ä»˜æœåŠ¡ç†”æ–­ï¼Œæ‰§è¡Œé™çº§é€»è¾‘ï¼Œè®¢å•å·ï¼š"</span> + orderNo + <span class="hljs-string">"ï¼Œå¼‚å¸¸ï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>());
        <span class="hljs-comment">// é™çº§é€»è¾‘ï¼šè¿”å›æ”¯ä»˜ç¹å¿™æç¤ºï¼Œè®°å½•æ—¥å¿—ï¼Œåç»­é€šè¿‡å®šæ—¶ä»»åŠ¡é‡è¯•</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Result</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">"æ”¯ä»˜ç¹å¿™ï¼Œè¯·ç¨åé‡è¯•"</span>, <span class="hljs-string">"è®¢å•å·ï¼š"</span> + orderNo);
    }

    <span class="hljs-comment">// è®¢å•åˆ›å»ºæ¥å£ï¼ˆæ·»åŠ é™æµï¼‰</span>
    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/order/create"</span>)
    <span class="hljs-meta">@RateLimiter</span>(
        name = <span class="hljs-string">"orderService"</span>, <span class="hljs-comment">// å¯¹åº”é…ç½®ä¸­çš„é™æµå®ä¾‹å</span>
        fallbackMethod = <span class="hljs-string">"createOrderFallback"</span> <span class="hljs-comment">// é™æµé™çº§æ–¹æ³•å</span>
    )
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Result</span> <span class="hljs-title function_">createOrder</span>(<span class="hljs-params"><span class="hljs-meta">@RequestParam</span> <span class="hljs-built_in">String</span> userId</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"åˆ›å»ºè®¢å•ï¼Œç”¨æˆ·IDï¼š"</span> + userId);
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Result</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">"è®¢å•åˆ›å»ºæˆåŠŸ"</span>, <span class="hljs-string">"ç”¨æˆ·IDï¼š"</span> + userId);
    }

    <span class="hljs-comment">// è®¢å•åˆ›å»ºé™æµçš„é™çº§å…œåº•æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Result</span> <span class="hljs-title function_">createOrderFallback</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userId, Exception e</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è®¢å•åˆ›å»ºæ¥å£é™æµï¼Œç”¨æˆ·IDï¼š"</span> + userId + <span class="hljs-string">"ï¼Œå¼‚å¸¸ï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>());
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Result</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">"ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•"</span>, <span class="hljs-string">"ç”¨æˆ·IDï¼š"</span> + userId);
    }
}

<span class="hljs-comment">// é€šç”¨è¿”å›ç»“æœç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span> {
    <span class="hljs-keyword">private</span> int code;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> message;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Object</span> data;

    <span class="hljs-comment">// çœç•¥æ„é€ æ–¹æ³•ã€getterã€setter</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">Result</span> <span class="hljs-title function_">success</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> message, <span class="hljs-built_in">Object</span> data</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>(<span class="hljs-number">200</span>, message, data);
    }
}
</code></pre>
<h5 data-id="heading-18">ï¼ˆ4ï¼‰æµ‹è¯•éªŒè¯</h5>
<ul>
<li>ç†”æ–­æµ‹è¯•ï¼šå¤šæ¬¡è®¿é—®<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Forder%2Fpay%3ForderNo%3DTEST123%25EF%25BC%258C%25E5%25BD%2593%25E5%25A4%25B1%25E8%25B4%25A5%25E7%258E%2587%25E8%25BE%25BE%25E5%2588%25B050%2525%25E5%2590%258E%25EF%25BC%258C%25E4%25BC%259A%25E8%25A7%25A6%25E5%258F%2591%25E7%2586%2594%25E6%2596%25AD%25EF%25BC%258C%25E7%259B%25B4%25E6%258E%25A5%25E8%25BF%2594%25E5%259B%259E%25E9%2599%258D%25E7%25BA%25A7%25E7%25BB%2593%25E6%259E%259C%25EF%25BC%259B10%25E7%25A7%2592%25E5%2590%258E%25E8%25BF%259B%25E5%2585%25A5%25E5%258D%258A%25E5%25BC%2580%25E7%258A%25B6%25E6%2580%2581%25EF%25BC%258C%25E5%2585%2581%25E8%25AE%25B8%25E5%25B0%2591%25E9%2587%258F%25E8%25AF%25B7%25E6%25B1%2582%25E8%25AF%2595%25E6%258E%25A2%25EF%25BC%259B" target="_blank" title="http://localhost:8080/order/pay?orderNo=TEST123%EF%BC%8C%E5%BD%93%E5%A4%B1%E8%B4%A5%E7%8E%87%E8%BE%BE%E5%88%B050%25%E5%90%8E%EF%BC%8C%E4%BC%9A%E8%A7%A6%E5%8F%91%E7%86%94%E6%96%AD%EF%BC%8C%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9E%E9%99%8D%E7%BA%A7%E7%BB%93%E6%9E%9C%EF%BC%9B10%E7%A7%92%E5%90%8E%E8%BF%9B%E5%85%A5%E5%8D%8A%E5%BC%80%E7%8A%B6%E6%80%81%EF%BC%8C%E5%85%81%E8%AE%B8%E5%B0%91%E9%87%8F%E8%AF%B7%E6%B1%82%E8%AF%95%E6%8E%A2%EF%BC%9B" ref="nofollow noopener noreferrer">http://localhost:8080/order/pay?orderNo=TEST123ï¼Œå½“å¤±è´¥ç‡è¾¾åˆ°50%åï¼Œä¼šè§¦å‘ç†”æ–­ï¼Œç›´æ¥è¿”å›é™çº§ç»“æœï¼›10ç§’åè¿›å…¥åŠå¼€çŠ¶æ€ï¼Œå…è®¸å°‘é‡è¯·æ±‚è¯•æ¢ï¼›</a></li>
<li>é™æµæµ‹è¯•ï¼šç”¨JMeteræˆ–Postmanä»¥æ¯ç§’150ä¸ªè¯·æ±‚çš„é€Ÿåº¦è®¿é—®<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Forder%2Fcreate%3FuserId%3D123%25EF%25BC%258C%25E4%25BC%259A%25E5%258F%2591%25E7%258E%25B0%25E8%25B6%2585%25E8%25BF%2587100" target="_blank" title="http://localhost:8080/order/create?userId=123%EF%BC%8C%E4%BC%9A%E5%8F%91%E7%8E%B0%E8%B6%85%E8%BF%87100" ref="nofollow noopener noreferrer">http://localhost:8080/order/create?userId=123ï¼Œä¼šå‘ç°è¶…è¿‡100</a> QPSçš„è¯·æ±‚è¢«é™æµï¼Œè¿”å›é™çº§ç»“æœã€‚</li>
</ul>
<h4 data-id="heading-19">2. Sentinelå®æˆ˜ï¼ˆå¾®æœåŠ¡åœºæ™¯é¦–é€‰ï¼‰</h4>
<p>Sentinelæ˜¯é˜¿é‡Œå¼€æºçš„åˆ†å¸ƒå¼ç³»ç»Ÿæµé‡æ²»ç†ç»„ä»¶ï¼Œæ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ç†”æ–­ã€é™æµã€é™çº§ã€çƒ­ç‚¹å‚æ•°é™æµç­‰ï¼Œæ”¯æŒæ§åˆ¶å°å¯è§†åŒ–é…ç½®ï¼Œé€‚é…Spring Cloudã€Dubboç­‰å¾®æœåŠ¡ç”Ÿæ€ï¼Œé€‚åˆå¤æ‚å¾®æœåŠ¡åœºæ™¯ã€‚</p>
<h5 data-id="heading-20">ï¼ˆ1ï¼‰ç¯å¢ƒå‡†å¤‡ï¼šå¼•å…¥ä¾èµ–+å¯åŠ¨æ§åˆ¶å°</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Sentinelæ ¸å¿ƒä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-sentinel<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2022.0.0.0-RC2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Spring Webä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>å¯åŠ¨Sentinelæ§åˆ¶å°ï¼ˆç”¨äºå¯è§†åŒ–é…ç½®è§„åˆ™ï¼‰ï¼š</p>
<ul>
<li>ä¸‹è½½æ§åˆ¶å°jaråŒ…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falibaba%2FSentinel%2Freleases%25EF%25BC%259B" target="_blank" title="https://github.com/alibaba/Sentinel/releases%EF%BC%9B" ref="nofollow noopener noreferrer">github.com/alibaba/Senâ€¦</a></li>
<li>å¯åŠ¨å‘½ä»¤ï¼šjava -jar sentinel-dashboard-1.8.6.jar -Dserver.port=8080ï¼›</li>
<li>è®¿é—®æ§åˆ¶å°ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%25EF%25BC%258C%25E9%25BB%2598%25E8%25AE%25A4%25E7%2594%25A8%25E6%2588%25B7%25E5%2590%258D%2F%25E5%25AF%2586%25E7%25A0%2581%25EF%25BC%259Asentinel%2Fsentinel%25E3%2580%2582" target="_blank" title="http://localhost:8080%EF%BC%8C%E9%BB%98%E8%AE%A4%E7%94%A8%E6%88%B7%E5%90%8D/%E5%AF%86%E7%A0%81%EF%BC%9Asentinel/sentinel%E3%80%82" ref="nofollow noopener noreferrer">http://localhost:8080ï¼Œé»˜è®¤ç”¨æˆ·å/å¯†ç ï¼šsentinel/sentinelã€‚</a></li>
</ul>
<h5 data-id="heading-21">ï¼ˆ2ï¼‰é…ç½®åº”ç”¨è¿æ¥æ§åˆ¶å°ï¼ˆapplication.ymlï¼‰</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">sentinel-demo</span> <span class="hljs-comment"># åº”ç”¨åï¼ˆæ§åˆ¶å°ä¼šæ ¹æ®åº”ç”¨åè¯†åˆ«æœåŠ¡ï¼‰</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">sentinel:</span>
      <span class="hljs-attr">transport:</span>
        <span class="hljs-attr">dashboard:</span> <span class="hljs-string">localhost:8080</span> <span class="hljs-comment"># æ§åˆ¶å°åœ°å€</span>
        <span class="hljs-attr">port:</span> <span class="hljs-number">8719</span> <span class="hljs-comment"># æœ¬åœ°å®¢æˆ·ç«¯ç«¯å£ï¼ˆä¸æ§åˆ¶å°é€šä¿¡ï¼‰</span>
</code></pre>
<h5 data-id="heading-22">ï¼ˆ3ï¼‰ä»£ç ä¸­å®šä¹‰èµ„æºä¸é™çº§é€»è¾‘</h5>
<p>Sentinelé€šè¿‡â€œèµ„æºâ€å®šä¹‰éœ€è¦ä¿æŠ¤çš„æ¥å£/æ–¹æ³•ï¼Œæ”¯æŒæ³¨è§£å¼ï¼ˆ@SentinelResourceï¼‰å’Œç¼–ç¨‹å¼ä¸¤ç§æ–¹å¼ï¼Œæ¨èæ³¨è§£å¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">csp</span>.<span class="hljs-property">sentinel</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">SentinelResource</span>;
<span class="hljs-keyword">import</span> com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">csp</span>.<span class="hljs-property">sentinel</span>.<span class="hljs-property">slots</span>.<span class="hljs-property">block</span>.<span class="hljs-property">BlockException</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">bind</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">GetMapping</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">bind</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">RequestParam</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">bind</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">RestController</span>;

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductController</span> {

    <span class="hljs-comment">// å•†å“æŸ¥è¯¢æ¥å£ï¼ˆå®šä¹‰ä¸ºSentinelèµ„æºï¼Œæ·»åŠ ç†”æ–­é™æµä¿æŠ¤ï¼‰</span>
    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/product/query"</span>)
    <span class="hljs-meta">@SentinelResource</span>(
        value = <span class="hljs-string">"productQueryResource"</span>, <span class="hljs-comment">// èµ„æºåï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰</span>
        blockHandler = <span class="hljs-string">"queryBlockHandler"</span>, <span class="hljs-comment">// ç†”æ–­/é™æµçš„é™çº§æ–¹æ³•ï¼ˆå¤„ç†BlockExceptionï¼‰</span>
        fallback = <span class="hljs-string">"queryFallback"</span> <span class="hljs-comment">// ä¸šåŠ¡å¼‚å¸¸çš„é™çº§æ–¹æ³•ï¼ˆå¤„ç†éBlockExceptionï¼‰</span>
    )
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Result</span> <span class="hljs-title function_">queryProduct</span>(<span class="hljs-params"><span class="hljs-meta">@RequestParam</span> <span class="hljs-built_in">String</span> productId</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼Œå•†å“IDï¼š"</span> + productId);
        <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡å¼‚å¸¸</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"error"</span>.<span class="hljs-title function_">equals</span>(productId)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å•†å“IDæ— æ•ˆ"</span>);
        }
        <span class="hljs-comment">// æ¨¡æ‹Ÿä¾èµ–æœåŠ¡æ•…éšœï¼ˆç”¨äºè§¦å‘ç†”æ–­ï¼‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å•†å“æœåŠ¡å“åº”è¶…æ—¶"</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Result</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">"æŸ¥è¯¢æˆåŠŸ"</span>, <span class="hljs-string">"å•†å“IDï¼š"</span> + productId + <span class="hljs-string">"ï¼Œåç§°ï¼šæµ‹è¯•å•†å“"</span>);
    }

    <span class="hljs-comment">// ç†”æ–­/é™æµçš„é™çº§æ–¹æ³•ï¼ˆBlockExceptionæ˜¯Sentinelå®šä¹‰çš„å¼‚å¸¸ï¼Œä»£è¡¨è¢«é™æµæˆ–ç†”æ–­ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Result</span> <span class="hljs-title function_">queryBlockHandler</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> productId, BlockException e</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å•†å“æŸ¥è¯¢æ¥å£è¢«ç†”æ–­/é™æµï¼Œå•†å“IDï¼š"</span> + productId + <span class="hljs-string">"ï¼Œå¼‚å¸¸ï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>());
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Result</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">"ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•"</span>, <span class="hljs-literal">null</span>);
    }

    <span class="hljs-comment">// ä¸šåŠ¡å¼‚å¸¸çš„é™çº§æ–¹æ³•ï¼ˆå¤„ç†éSentinelè§¦å‘çš„å¼‚å¸¸ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Result</span> <span class="hljs-title function_">queryFallback</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> productId, Exception e</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å•†å“æŸ¥è¯¢ä¸šåŠ¡å¼‚å¸¸ï¼Œå•†å“IDï¼š"</span> + productId + <span class="hljs-string">"ï¼Œå¼‚å¸¸ï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>());
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Result</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">"æŸ¥è¯¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥å•†å“ID"</span>, <span class="hljs-literal">null</span>);
    }
}
</code></pre>
<h5 data-id="heading-23">ï¼ˆ4ï¼‰æ§åˆ¶å°é…ç½®ç†”æ–­ä¸é™æµè§„åˆ™</h5>
<p>å¯åŠ¨åº”ç”¨åï¼Œè®¿é—®ä¸€æ¬¡<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Fproduct%2Fquery%3FproductId%3D123%25EF%25BC%258CSentinel%25E6%258E%25A7%25E5%2588%25B6%25E5%258F%25B0%25E4%25BC%259A%25E8%2587%25AA%25E5%258A%25A8%25E8%25AF%2586%25E5%2588%25AB%25E2%2580%259CproductQueryResource%25E2%2580%259D%25E8%25B5%2584%25E6%25BA%2590%25EF%25BC%259B%25E7%2584%25B6%25E5%2590%258E%25E5%259C%25A8%25E6%258E%25A7%25E5%2588%25B6%25E5%258F%25B0%25E9%2585%258D%25E7%25BD%25AE%25E8%25A7%2584%25E5%2588%2599%25EF%25BC%259A" target="_blank" title="http://localhost:8080/product/query?productId=123%EF%BC%8CSentinel%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%BC%9A%E8%87%AA%E5%8A%A8%E8%AF%86%E5%88%AB%E2%80%9CproductQueryResource%E2%80%9D%E8%B5%84%E6%BA%90%EF%BC%9B%E7%84%B6%E5%90%8E%E5%9C%A8%E6%8E%A7%E5%88%B6%E5%8F%B0%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99%EF%BC%9A" ref="nofollow noopener noreferrer">http://localhost:8080/product/query?productId=123ï¼ŒSentinelæ§åˆ¶å°ä¼šè‡ªåŠ¨è¯†åˆ«â€œproductQueryResourceâ€èµ„æºï¼›ç„¶ååœ¨æ§åˆ¶å°é…ç½®è§„åˆ™ï¼š</a></p>
<ol>
<li>
<p>é™æµè§„åˆ™ï¼š</p>
<ol>
<li>è¿›å…¥â€œæµæ§è§„åˆ™â€â†’â€œæ–°å¢æµæ§è§„åˆ™â€ï¼›</li>
<li>èµ„æºåï¼šproductQueryResourceï¼›</li>
<li>é˜ˆå€¼ç±»å‹ï¼šQPSï¼›</li>
<li>é˜ˆå€¼ï¼š5ï¼ˆæ¯ç§’æœ€å¤š5ä¸ªè¯·æ±‚ï¼‰ï¼›</li>
<li>ç‚¹å‡»â€œæ–°å¢â€å®Œæˆé…ç½®ã€‚</li>
</ol>
</li>
<li>
<p>ç†”æ–­è§„åˆ™ï¼š</p>
<ol>
<li>è¿›å…¥â€œç†”æ–­è§„åˆ™â€â†’â€œæ–°å¢ç†”æ–­è§„åˆ™â€ï¼›</li>
<li>èµ„æºåï¼šproductQueryResourceï¼›</li>
<li>ç†”æ–­ç­–ç•¥ï¼šå¼‚å¸¸æ¯”ä¾‹ï¼›</li>
<li>é˜ˆå€¼ï¼š0.5ï¼ˆå¼‚å¸¸æ¯”ä¾‹50%ï¼‰ï¼›</li>
<li>æœ€å°è¯·æ±‚æ•°ï¼š5ï¼ˆè§¦å‘ç†”æ–­çš„æœ€å°è¯·æ±‚æ•°ï¼‰ï¼›</li>
<li>ç†”æ–­æ—¶é•¿ï¼š10ï¼ˆæ‰“å¼€çŠ¶æ€æŒç»­10ç§’ï¼‰ï¼›</li>
<li>ç‚¹å‡»â€œæ–°å¢â€å®Œæˆé…ç½®ã€‚</li>
</ol>
</li>
</ol>
<p>é…ç½®å®Œæˆåï¼Œæµ‹è¯•éªŒè¯ï¼šé«˜å¹¶å‘è®¿é—®æ¥å£ä¼šè§¦å‘é™æµï¼Œå¤šæ¬¡è®¿é—®å¯¼è‡´å¼‚å¸¸æ¯”ä¾‹è¾¾åˆ°50%ä¼šè§¦å‘ç†”æ–­ã€‚</p>
<h4 data-id="heading-24">3. æ¡†æ¶é€‰å‹å¯¹æ¯”ï¼šResilience4j vs Sentinel</h4>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Resilience4j</th><th>Sentinel</th></tr></thead><tbody><tr><td>æ ¸å¿ƒä¼˜åŠ¿</td><td>è½»é‡çº§ã€æ— ä¾èµ–ã€é…ç½®ç®€å•ã€é€‚é…Spring Boot 3.x</td><td>åŠŸèƒ½å¼ºå¤§ã€æ§åˆ¶å°å¯è§†åŒ–ã€æ”¯æŒçƒ­ç‚¹é™æµã€é€‚é…å¾®æœåŠ¡ç”Ÿæ€</td></tr><tr><td>é…ç½®æ–¹å¼</td><td>ymlé…ç½®æ–‡ä»¶ã€æ³¨è§£</td><td>æ§åˆ¶å°åŠ¨æ€é…ç½®ã€ymlé…ç½®æ–‡ä»¶ã€æ³¨è§£</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>è½»é‡çº§åº”ç”¨ã€Spring Bootç‹¬ç«‹åº”ç”¨ã€å¯¹é…ç½®çµæ´»æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯</td><td>å¾®æœåŠ¡é›†ç¾¤ã€å¤æ‚æµé‡æ²»ç†åœºæ™¯ã€éœ€è¦åŠ¨æ€é…ç½®å’Œç›‘æ§çš„åœºæ™¯</td></tr><tr><td>ç¼ºç‚¹</td><td>æ— å®˜æ–¹æ§åˆ¶å°ï¼Œç›‘æ§éœ€è¦è‡ªè¡Œé›†æˆï¼ˆå¦‚Prometheusï¼‰</td><td>ä¾èµ–è¾ƒå¤šï¼Œé…ç½®ç›¸å¯¹å¤æ‚ï¼ŒSpring Boot 3.xé€‚é…éœ€æ³¨æ„ç‰ˆæœ¬</td></tr></tbody></table>
<h3 data-id="heading-25">äº”ã€ç†”æ–­é™æµè½åœ°ç­–ç•¥ä¸æœ€ä½³å®è·µ</h3>
<p>ç†”æ–­é™æµçš„æ ¸å¿ƒæ˜¯â€œç²¾å‡†æ§åˆ¶ã€åˆç†å…œåº•â€ï¼Œè½åœ°æ—¶éœ€ç»“åˆä¸šåŠ¡åœºæ™¯è®¾è®¡ç­–ç•¥ï¼Œé¿å…â€œä¸€åˆ€åˆ‡â€å¯¼è‡´çš„ç”¨æˆ·ä½“éªŒä¸‹é™æˆ–èµ„æºæµªè´¹ã€‚ä»¥ä¸‹æ˜¯æ ¸å¿ƒæœ€ä½³å®è·µï¼š</p>
<h4 data-id="heading-26">1. ç²¾å‡†é€‰å€ï¼šæ˜ç¡®éœ€è¦ä¿æŠ¤çš„æ ¸å¿ƒèµ„æº</h4>
<p>ä¸æ˜¯æ‰€æœ‰æ¥å£éƒ½éœ€è¦ç†”æ–­é™æµï¼Œä¼˜å…ˆä¿æŠ¤â€œæ ¸å¿ƒé“¾è·¯ã€æ ¸å¿ƒèµ„æºâ€ï¼š</p>
<ul>
<li>æ ¸å¿ƒæ¥å£ï¼šä¸‹å•ã€æ”¯ä»˜ã€ç”¨æˆ·ç™»å½•ã€å•†å“æŸ¥è¯¢ç­‰ç›´æ¥å½±å“ä¸šåŠ¡æ ¸å¿ƒæµç¨‹çš„æ¥å£ï¼›</li>
<li>å¤–éƒ¨ä¾èµ–ï¼šç¬¬ä¸‰æ–¹æ¥å£ï¼ˆæ”¯ä»˜ã€ç‰©æµï¼‰ã€ä¸‹æ¸¸æœåŠ¡æ¥å£ï¼ˆå°¤å…¶æ˜¯ç¨³å®šæ€§è¾ƒå·®çš„æœåŠ¡ï¼‰ï¼›</li>
<li>èµ„æºå¯†é›†å‹æ¥å£ï¼šæ•°æ®åº“å¤æ‚æŸ¥è¯¢ã€æ–‡ä»¶å¤„ç†ã€å¤§è®¡ç®—é‡æ¥å£ï¼ˆå®¹æ˜“è€—å°½èµ„æºï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-27">2. åˆç†è®¾ç½®é˜ˆå€¼ï¼šåŸºäºå‹æµ‹ç»“æœï¼Œé¢„ç•™ç¼“å†²ç©ºé—´</h4>
<p>é˜ˆå€¼è®¾ç½®æ˜¯ç†”æ–­é™æµçš„å…³é”®ï¼Œè®¾ç½®è¿‡æ¾ä¼šå¯¼è‡´ä¿æŠ¤å¤±æ•ˆï¼Œè®¾ç½®è¿‡ä¸¥ä¼šå½±å“æ­£å¸¸æµé‡ï¼š</p>
<ul>
<li>é™æµé˜ˆå€¼ï¼šåŸºäºå‹æµ‹ç»“æœï¼Œå–å‹æµ‹å³°å€¼çš„70%~80%ï¼ˆå¦‚å‹æµ‹QPSä¸º1000ï¼Œé™æµé˜ˆå€¼è®¾ä¸º700ï¼‰ï¼Œé¢„ç•™ç¼“å†²ç©ºé—´åº”å¯¹çªå‘æµé‡ï¼›</li>
<li>ç†”æ–­é˜ˆå€¼ï¼šå¤±è´¥ç‡é˜ˆå€¼å»ºè®®è®¾ä¸º50%<del>70%ï¼Œæœ€å°è¯·æ±‚æ•°è®¾ä¸º10</del>20ï¼ˆé¿å…å°‘é‡è¯·æ±‚å¤±è´¥å°±è§¦å‘ç†”æ–­ï¼‰ï¼›æ‰“å¼€è¶…æ—¶æ—¶é—´è®¾ä¸º10~30ç§’ï¼ˆæ ¹æ®æœåŠ¡æ¢å¤é€Ÿåº¦è°ƒæ•´ï¼‰ï¼›</li>
<li>åŠ¨æ€è°ƒæ•´ï¼šå¤§ä¿ƒã€çƒ­ç‚¹äº‹ä»¶å‰ï¼Œæå‰è°ƒå¤§æ ¸å¿ƒæ¥å£çš„é™æµé˜ˆå€¼ï¼›äº‹ä»¶ç»“æŸåè°ƒå›æ­£å¸¸æ°´å¹³ã€‚</li>
</ul>
<h4 data-id="heading-28">3. é™çº§é€»è¾‘è®¾è®¡ï¼šä¼˜å…ˆä¿è¯æ ¸å¿ƒåŠŸèƒ½å¯ç”¨</h4>
<p>é™çº§é€»è¾‘çš„å¥½åç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒï¼Œè®¾è®¡åŸåˆ™æ˜¯â€œå…œåº•ä¸æ·»ä¹±ï¼Œæ ¸å¿ƒåŠŸèƒ½ä¼˜å…ˆâ€ï¼š</p>
<ul>
<li>è¿”å›é»˜è®¤å€¼ï¼šå¦‚å•†å“æŸ¥è¯¢å¤±è´¥ï¼Œè¿”å›çƒ­é—¨å•†å“åˆ—è¡¨ï¼›</li>
<li>è¿”å›ç¼“å­˜æ•°æ®ï¼šå¦‚æ¥å£ç†”æ–­åï¼Œè¿”å›ç¼“å­˜ä¸­çš„å†å²æ•°æ®ï¼ˆéœ€ä¿è¯ç¼“å­˜æ•°æ®çš„æ—¶æ•ˆæ€§ï¼‰ï¼›</li>
<li>æç¤ºç”¨æˆ·é‡è¯•ï¼šå¦‚æ”¯ä»˜ç¹å¿™æ—¶ï¼Œè¿”å›â€œè¯·ç¨åé‡è¯•â€ï¼Œå¹¶æä¾›é‡è¯•æŒ‰é’®ï¼›</li>
<li>å¼‚æ­¥åŒ–å¤„ç†ï¼šå¦‚è®¢å•åˆ›å»ºé™æµæ—¶ï¼Œå°†è¯·æ±‚æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œåç»­å¼‚æ­¥å¤„ç†ï¼Œå¹¶é€šçŸ¥ç”¨æˆ·â€œè®¢å•æ­£åœ¨åˆ›å»ºä¸­â€ã€‚</li>
</ul>
<p>æ³¨æ„ï¼šé™çº§é€»è¾‘å¿…é¡»æ˜¯â€œæ— ä¾èµ–ã€è½»é‡çº§â€çš„ï¼Œé¿å…é™çº§é€»è¾‘æœ¬èº«å‡ºç°æ•…éšœã€‚</p>
<h4 data-id="heading-29">4. ç›‘æ§å‘Šè­¦ï¼šå®æ—¶æ„ŸçŸ¥ç†”æ–­é™æµçŠ¶æ€</h4>
<p>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¿…é¡»å¯¹ç†”æ–­é™æµçŠ¶æ€è¿›è¡Œç›‘æ§ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸ï¼š</p>
<ul>
<li>æ ¸å¿ƒç›‘æ§æŒ‡æ ‡ï¼šé™æµæ¬¡æ•°ã€ç†”æ–­æ¬¡æ•°ã€å¼‚å¸¸ç‡ã€å“åº”æ—¶é—´ï¼›</li>
<li>Resilience4jï¼šé›†æˆPrometheus+Grafanaï¼Œé€šè¿‡Resilience4jæä¾›çš„metricsæš´éœ²ç›‘æ§æ•°æ®ï¼›</li>
<li>Sentinelï¼šåˆ©ç”¨è‡ªå¸¦çš„æ§åˆ¶å°ç›‘æ§ï¼Œæˆ–é›†æˆPrometheus+Grafanaï¼›</li>
<li>å‘Šè­¦è§¦å‘ï¼šå½“é™æµæ¬¡æ•°çªå¢ã€ç†”æ–­çŠ¶æ€æŒç»­æ‰“å¼€ã€å¼‚å¸¸ç‡è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œè§¦å‘å‘Šè­¦ï¼ˆçŸ­ä¿¡ã€é‚®ä»¶ã€é’‰é’‰ï¼‰ï¼Œå®‰æ’äººå·¥ä»‹å…¥å¤„ç†ã€‚</li>
</ul>
<h4 data-id="heading-30">5. ç†”æ–­é™æµä¸å…¶ä»–æœºåˆ¶çš„ååŒ</h4>
<p>ç†”æ–­é™æµä¸æ˜¯å­¤ç«‹çš„ï¼Œéœ€è¦ä¸é‡è¯•ã€å¹‚ç­‰æ€§ã€é™çº§ç­‰æœºåˆ¶ååŒå·¥ä½œï¼š</p>
<ul>
<li>é‡è¯•+ç†”æ–­ï¼šé‡è¯•å‰å…ˆåˆ¤æ–­æœåŠ¡çŠ¶æ€ï¼Œé¿å…å¯¹å·²ç†”æ–­çš„æœåŠ¡è¿›è¡Œé‡è¯•ï¼›</li>
<li>å¹‚ç­‰æ€§+é™æµï¼šé™æµé™çº§æ—¶ï¼Œè‹¥é‡‡ç”¨â€œå¼‚æ­¥å¤„ç†â€ï¼Œéœ€ä¿è¯è¯·æ±‚çš„å¹‚ç­‰æ€§ï¼Œé¿å…é‡å¤å¤„ç†ï¼›</li>
<li>é™çº§+ç†”æ–­é™æµï¼šç†”æ–­é™æµè§¦å‘åï¼Œé€šè¿‡é™çº§é€»è¾‘ä¿è¯æ ¸å¿ƒåŠŸèƒ½å¯ç”¨ï¼Œé¿å…ç”¨æˆ·æ„ŸçŸ¥åˆ°ç³»ç»Ÿæ•…éšœã€‚</li>
</ul>
<h3 data-id="heading-31">å…­ã€å¸¸è§è¯¯åŒºä¸é¿å‘æŒ‡å—</h3>
<p>è½åœ°ç†”æ–­é™æµæ—¶ï¼Œå®¹æ˜“é™·å…¥ä¸€äº›è¯¯åŒºï¼Œå¯¼è‡´ä¿æŠ¤å¤±æ•ˆæˆ–ç”¨æˆ·ä½“éªŒä¸‹é™ï¼Œä»¥ä¸‹æ˜¯æ ¸å¿ƒé¿å‘è¦ç‚¹ï¼š</p>
<h4 data-id="heading-32">1. è¯¯åŒº1ï¼šä¸€åˆ€åˆ‡çš„ç†”æ–­é™æµç­–ç•¥</h4>
<p>ä¸åŒæ¥å£çš„é‡è¦æ€§ã€æ‰¿è½½èƒ½åŠ›ä¸åŒï¼Œä¸èƒ½ç”¨ç»Ÿä¸€çš„é˜ˆå€¼ã€‚ä¾‹å¦‚ï¼šæ ¸å¿ƒçš„ä¸‹å•æ¥å£é˜ˆå€¼åº”è®¾é«˜ä¸€äº›ï¼Œéæ ¸å¿ƒçš„ç»Ÿè®¡æ¥å£é˜ˆå€¼å¯è®¾ä½ä¸€äº›ï¼›çŸ­è€—æ—¶æ¥å£ç”¨QPSé™æµï¼Œé•¿è€—æ—¶æ¥å£ç”¨å¹¶å‘æ•°é™æµã€‚</p>
<h4 data-id="heading-33">2. è¯¯åŒº2ï¼šå¿½ç•¥é™çº§é€»è¾‘çš„æµ‹è¯•</h4>
<p>å¾ˆå¤šå¼€å‘è€…åªå…³æ³¨ç†”æ–­é™æµçš„é…ç½®ï¼Œå´å¿½ç•¥äº†é™çº§é€»è¾‘çš„æµ‹è¯•ã€‚å¯¼è‡´ç†”æ–­é™æµè§¦å‘æ—¶ï¼Œé™çº§é€»è¾‘æœ¬èº«å‡ºç°æ•…éšœï¼Œè¿›ä¸€æ­¥æ¶åŒ–ç³»ç»ŸçŠ¶æ€ã€‚å»ºè®®ï¼šå®šæœŸæµ‹è¯•é™çº§é€»è¾‘ï¼Œç¡®ä¿å…¶å¯ç”¨æ€§ã€‚</p>
<h4 data-id="heading-34">3. è¯¯åŒº3ï¼šé™æµé˜ˆå€¼è®¾ç½®è¿‡ä¸¥æˆ–è¿‡æ¾</h4>
<p>é˜ˆå€¼è¿‡ä¸¥ï¼šæ­£å¸¸æµé‡è¢«é™æµï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒä¸‹é™ï¼Œä¸šåŠ¡æŸå¤±ï¼›é˜ˆå€¼è¿‡æ¾ï¼šæµé‡è¶…è¿‡ç³»ç»Ÿæ‰¿è½½èƒ½åŠ›ï¼Œå¯¼è‡´ç³»ç»Ÿè¿‡è½½å´©æºƒã€‚è§£å†³æ–¹æ³•ï¼šåŸºäºå‹æµ‹ç»“æœè®¾ç½®é˜ˆå€¼ï¼Œå¹¶å®šæœŸå¤ç›˜è°ƒæ•´ã€‚</p>
<h4 data-id="heading-35">4. è¯¯åŒº4ï¼šç†”æ–­åæ— æ¢å¤æœºåˆ¶</h4>
<p>éƒ¨åˆ†è‡ªå®šä¹‰ç†”æ–­å®ç°ä¸­ï¼Œç¼ºå°‘åŠå¼€çŠ¶æ€çš„è¯•æ¢é€»è¾‘ï¼Œå¯¼è‡´ç†”æ–­åæœåŠ¡æ— æ³•è‡ªåŠ¨æ¢å¤ï¼Œéœ€è¦äººå·¥å¹²é¢„ã€‚å»ºè®®ï¼šä½¿ç”¨æˆç†Ÿæ¡†æ¶ï¼ˆResilience4jã€Sentinelï¼‰ï¼Œé¿å…è‡ªå®šä¹‰ç†”æ–­é€»è¾‘ã€‚</p>
<h4 data-id="heading-36">5. è¯¯åŒº5ï¼šå¿½ç•¥çƒ­ç‚¹å‚æ•°é™æµ</h4>
<p>æŸäº›æ¥å£çš„æµé‡é›†ä¸­åœ¨å°‘æ•°å‚æ•°ä¸Šï¼ˆå¦‚çƒ­ç‚¹å•†å“IDã€çƒ­ç‚¹ç”¨æˆ·IDï¼‰ï¼Œè‹¥åªåšå…¨å±€é™æµï¼Œä¼šå¯¼è‡´çƒ­ç‚¹å‚æ•°çš„è¯·æ±‚è€—å°½æµé‡ï¼Œå…¶ä»–å‚æ•°çš„è¯·æ±‚æ— æ³•å“åº”ã€‚è§£å†³æ–¹æ³•ï¼šä½¿ç”¨Sentinelçš„çƒ­ç‚¹å‚æ•°é™æµï¼Œå¯¹çƒ­ç‚¹å‚æ•°å•ç‹¬è®¾ç½®é˜ˆå€¼ã€‚</p>
<h3 data-id="heading-37">ä¸ƒã€æ€»ç»“ï¼šç†”æ–­é™æµçš„æ ¸å¿ƒä»·å€¼ä¸è½åœ°åŸåˆ™</h3>
<p>ç†”æ–­é™æµçš„æ ¸å¿ƒä»·å€¼æ˜¯â€œä¸»åŠ¨é˜²å¾¡â€â€”â€”åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ•…éšœå’Œæµé‡æ³¢åŠ¨æ˜¯å¸¸æ€ï¼Œæˆ‘ä»¬æ— æ³•ä¿è¯æ¯ä¸ªä¾èµ–éƒ½100%å¯é ï¼Œä¹Ÿæ— æ³•é¢„æµ‹æ‰€æœ‰æµé‡å³°å€¼ã€‚è€Œç†”æ–­é™æµé€šè¿‡â€œéš”ç¦»æ•…éšœâ€å’Œâ€œæ§åˆ¶æµé‡â€ï¼Œè®©ç³»ç»Ÿåœ¨å¼‚å¸¸åœºæ™¯ä¸‹ä¾ç„¶èƒ½ä¿æŒæ ¸å¿ƒåŠŸèƒ½å¯ç”¨ï¼Œé¿å…å¤§é¢ç§¯ç˜«ç—ªã€‚</p>
<p>è½åœ°ç†”æ–­é™æµçš„æ ¸å¿ƒåŸåˆ™ï¼š</p>
<ul>
<li>ç²¾å‡†ä¿æŠ¤ï¼šä¼˜å…ˆä¿æŠ¤æ ¸å¿ƒèµ„æºï¼Œé¿å…ä¸€åˆ€åˆ‡ï¼›</li>
<li>åˆç†é…ç½®ï¼šåŸºäºå‹æµ‹ç»“æœè®¾ç½®é˜ˆå€¼ï¼Œé¢„ç•™ç¼“å†²ç©ºé—´ï¼›</li>
<li>ä¼˜é›…é™çº§ï¼šå…œåº•é€»è¾‘è½»é‡ã€å¯é ï¼Œä¿è¯ç”¨æˆ·ä½“éªŒï¼›</li>
<li>å®æ—¶ç›‘æ§ï¼šåŠæ—¶æ„ŸçŸ¥çŠ¶æ€å˜åŒ–ï¼Œå¿«é€Ÿå“åº”å¼‚å¸¸ï¼›</li>
<li>ååŒå·¥ä½œï¼šä¸é‡è¯•ã€å¹‚ç­‰æ€§ç­‰æœºåˆ¶é…åˆï¼Œæ„å»ºå®Œæ•´çš„ç¨³å®šæ€§ä¿éšœä½“ç³»ã€‚</li>
</ul>
<p>æœ€åï¼Œè®°ä½ï¼šç†”æ–­é™æµä¸æ˜¯â€œé“¶å¼¹â€ï¼Œæ— æ³•è§£å†³æ‰€æœ‰ç¨³å®šæ€§é—®é¢˜ã€‚ç³»ç»Ÿçš„ç¨³å®šæ€§æœ€ç»ˆä¾èµ–äºæ¶æ„è®¾è®¡ï¼ˆå¦‚æœåŠ¡æ‹†åˆ†ã€é›†ç¾¤éƒ¨ç½²ï¼‰ã€ä»£ç è´¨é‡ã€èµ„æºé…ç½®ç­‰å¤šä¸ªç»´åº¦ã€‚ä½†ç†”æ–­é™æµä½œä¸ºâ€œæœ€åä¸€é“é˜²çº¿â€ï¼Œèƒ½åœ¨å…³é”®æ—¶åˆ»ä¿æŠ¤ç³»ç»Ÿï¼Œå‡å°‘æŸå¤±ï¼Œæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯æˆ–ç¼ºçš„ç»„æˆéƒ¨åˆ†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬5ç«  Nest.jsç²¾è¿›-IOCæ§åˆ¶åè½¬]]></title>    <link>https://juejin.cn/post/7590684822727000104</link>    <guid>https://juejin.cn/post/7590684822727000104</guid>    <pubDate>2026-01-04T04:15:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590684822727000104" data-draft-id="7590778284758597667" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬5ç«  Nest.jsç²¾è¿›-IOCæ§åˆ¶åè½¬"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-04T04:15:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XiaoYu2002"/> <meta itemprop="url" content="https://juejin.cn/user/251124329220663"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬5ç«  Nest.jsç²¾è¿›-IOCæ§åˆ¶åè½¬
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/251124329220663/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XiaoYu2002
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T04:15:10.000Z" title="Sun Jan 04 2026 04:15:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æœ¬ç« ï¼Œä¼šç»§ç»­ç²¾è¿›Nest.jsï¼Œé¦–å…ˆä¼šå­¦ä¹ IOCæ§åˆ¶åè½¬ï¼Œè¿™æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼ŒæŠŠå¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»äº¤ç»™å®¹å™¨ç®¡ç†ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨åˆ›å»ºå’Œç®¡ç†ã€‚</p>
<ul>
<li>ä¼ ç»Ÿæ–¹å¼ï¼šæ‰‹åŠ¨åˆ›å»ºnew A()ï¼Œnew B()ã€‚</li>
<li>IOCæ–¹å¼ï¼šéœ€æ±‚ç”±å®¹å™¨è§£å†³ã€‚</li>
</ul>
<p>ç°åœ¨æˆ‘æœ‰Aç±»å’ŒBç±»ä¸¤ä¸ªç±»ï¼ŒAç±»ä¸­æœ‰getName()å®ä¾‹æ–¹æ³•ï¼Œæˆ‘è‹¥æƒ³åœ¨Bç±»ä¸­è°ƒç”¨Aç±»çš„getName()å®ä¾‹æ–¹æ³•ï¼Œé‚£ä¹ˆä¼ ç»Ÿæ–¹å¼éœ€è¦æˆ‘ä»¬åœ¨Bç±»ä¸­å»æ‰‹åŠ¨å®ä¾‹åŒ–Aç±»ï¼Œç„¶åå†ä»å®ä¾‹å¯¹è±¡ä¸­è°ƒç”¨getName()å®ä¾‹æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
  <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'A'</span>
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ‰‹åŠ¨å®ä¾‹åŒ–</span>
    <span class="hljs-keyword">let</span> a = <span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>()
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a.<span class="hljs-title function_">getName</span>())
  }
}
</code></pre>
<p>é‚£ä¹ˆï¼Œåœ¨Bç±»ä¸­æ‰‹åŠ¨å®ä¾‹åŒ–Aç±»å¹¶è°ƒç”¨å¯¹åº”å®ä¾‹æ–¹æ³•çš„è¡Œä¸ºæ˜¯ä¼šå¯¼è‡´ä¸¤ä¸ªç±»äº§ç”Ÿé«˜åº¦è€¦åˆçš„å…³ç³»ï¼Œå‡è®¾æˆ‘å†æ¬¡æ‰‹åŠ¨å®ä¾‹åŒ–Bç±»ï¼Œä¼šå¯¼è‡´ä¾èµ–å…³ç³»æ··ä¹±ä¸ç»´æŠ¤å›°éš¾ï¼Œä¾‹å¦‚æ— æ³•å¯¹Aè¿›è¡Œæ¨¡æ‹Ÿæˆ–è€…æ›¿æ¢ï¼›æ¯ä¸ªAå®ä¾‹çŠ¶æ€éƒ½ç‹¬ç«‹ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†ï¼›è¿˜æœ‰å­˜åœ¨å†…å­˜æ³„æ¼ç­‰é£é™©ã€‚</p>
<p>IOCæ§åˆ¶åè½¬å°±æ˜¯ä¸ºäº†è§£å†³ä¸Šè¿°çš„é«˜åº¦è€¦åˆé—®é¢˜ï¼Œå³å¯¹Aç±»ä¸Bç±»ä¹‹é—´çš„å…³ç³»è¿›è¡Œè§£è€¦ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªContainerç±»ï¼Œåœ¨Containerç±»ä¸­å­˜æ”¾æ‰€æœ‰å®ä¾‹åŒ–çš„æ“ä½œï¼Œç„¶åå…¶ä½™ç±»å¦‚æœéœ€è¦ç›¸å…³ç±»çš„å®ä¾‹åŒ–ä»è€Œè°ƒç”¨å¯¹åº”çš„æ–¹æ³•ï¼Œå°±ç”±Containerç±»æ¥åˆ†é…ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
  <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Aä¾èµ–æ³¨å…¥ç”Ÿæ•ˆ'</span>
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> {

}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Container</span>{
  <span class="hljs-comment">// å­˜å‚¨æ‰€æœ‰éœ€è¦çš„å®ä¾‹åŒ–æ“ä½œ</span>
}
</code></pre>
<p>é‚£ä¹ˆï¼Œåœ¨Containerç±»ï¼ˆå®¹å™¨ï¼‰ä¸­è¦å¦‚ä½•å­˜å‚¨å®ä¾‹åŒ–æ“ä½œï¼Ÿè¿™éœ€è¦ä¾èµ–ç¬¬ä¸‰æ–¹åº“reflect-metadataï¼Œé€šè¿‡npmå‘½ä»¤ä¸‹è½½ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">npm install reflect-metadata
</code></pre>
<p>å½“æˆ‘ä»¬åœ¨è¯¥æ–‡ä»¶ä¸­å¯¼å…¥ç¬¬ä¸‰æ–¹åº“reflect-metadataä¹‹åï¼Œå¯ä»¥ä½¿ç”¨Reflect.getMetadata()é™æ€æ–¹æ³•ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒReflectæ ‡å‡†å†…ç½®å¯¹è±¡ä¸­å¹¶æ²¡æœ‰getMetadata()é™æ€æ–¹æ³•ï¼Œå› æ­¤è¿™ä¸ªé™æ€æ–¹æ³•ä¸æ˜¯åŸç”Ÿï¼Œè€Œæ˜¯æ¥è‡ªç¬¬ä¸‰æ–¹åº“reflect-metadataã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> <span class="hljs-string">'reflect-metadata'</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Container</span> {
  <span class="hljs-keyword">private</span> providers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">any</span>, <span class="hljs-built_in">any</span>&gt;()

  <span class="hljs-title function_">get</span>(<span class="hljs-params">clsz: <span class="hljs-keyword">new</span> (...args: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">const</span> paramsTypes = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getMetadata</span>(<span class="hljs-string">'design:paramtypes'</span>, clsz)
  }
}
</code></pre>
<p>ç›´æ¥ä½¿ç”¨Reflect.getMetadata()é™æ€æ–¹æ³•æ˜¯æ²¡æœ‰æ•ˆæœçš„ï¼Œæˆ‘ä»¬è¿˜è¦åœ¨éœ€è¦ä¾èµ–çš„ç±»ä¸Šï¼Œæ·»åŠ ä¸€ä¸ª@Injectable()è£…é¥°å™¨ã€‚</p>
<p>è£…é¥°å™¨æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œä½¿ç”¨æ–¹å¼æ˜¯æ”¾åœ¨ç±»çš„å¤´ä¸Šã€‚ä¾‹å¦‚ï¼šç°åœ¨æˆ‘åˆ›å»ºä¸€ä¸ªInjectableå‡½æ•°ï¼Œç„¶åä½¿ç”¨åœ¨Aç±»ä¸Šã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// è£…é¥°å™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Injectable</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">target: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Injectableè£…é¥°å™¨è¯»å–åˆ°ï¼š'</span>,target)
    <span class="hljs-keyword">return</span> target
  }
}
<span class="hljs-comment">// ä½¿ç”¨ @ ç¬¦å·åº”ç”¨è£…é¥°å™¨</span>
<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
  <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Aä¾èµ–æ³¨å…¥ç”Ÿæ•ˆ'</span>
  }
}
</code></pre>
<p>è£…é¥°å™¨çš„æ‰§è¡Œæ—¶æœºæ˜¯åœ¨ç¼–è¯‘æ—¶ï¼Œå³è¿è¡Œæ–‡ä»¶çš„æ—¶å€™å°±è‡ªåŠ¨è°ƒç”¨ï¼Œå› æ­¤å½“æˆ‘æ‰§è¡Œindex.tsæ–‡ä»¶æ—¶ï¼ŒInjectableå‡½æ•°å°±ä¼šè°ƒç”¨ï¼Œå¹¶ä¸”æ‰“å°å‡ºè¯»å–åˆ°çš„Aç±»ä¿¡æ¯ï¼Œå¦‚å›¾5-1æ‰€ç¤ºã€‚ä½¿ç”¨è£…é¥°å™¨çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å¯ä»¥åœ¨ä¸ç ´åAç±»ä»£ç æœ¬èº«çš„ç»“æ„åŸºç¡€ä¸Šï¼Œå¯¹Aç±»è¿›è¡Œé¢å¤–çš„æ‹“å±•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74d0fbc9e81f420bbb656cff6eb404c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768104910&amp;x-signature=zbbSAklrIc9cHVoheunSZFyeZE0%3D" alt="image-20251214022250976" loading="lazy"/></p>
<p align="center">
 <b> å›¾5-1 è£…é¥°å™¨çš„åŸºç¡€ä½¿ç”¨</b>
</p>
<p>å½“æˆ‘ä»¬æ‰€ä½¿ç”¨çš„Injectableå‡½æ•°å¤„äºä»¥ä¸‹ä¸¤ç§æƒ…å†µä¹‹ä¸€æ—¶ï¼Œä¼šè¢«ç§°ä¸ºè£…é¥°å™¨ï¼š</p>
<p>ï¼ˆ1ï¼‰è¢«ç”¨äºè£…é¥°å™¨æ¨¡å¼ï¼Œå³å¯ä»¥é™„åŠ åˆ°ç±»ã€æ–¹æ³•ã€å±æ€§ç­‰ä¸Šï¼Œä»¥ä¿®æ”¹æˆ–å¢å¼ºå…¶è¡Œä¸ºã€‚</p>
<p>ï¼ˆ2ï¼‰æˆ–è€…è¯¥å‡½æ•°ç¬¦åˆè£…é¥°å™¨çš„è°ƒç”¨ç­¾åï¼Œå³å®ƒæ¥å—ä¸€ä¸ªç›®æ ‡å¯¹è±¡ï¼ˆæ ¹æ®è£…é¥°çš„å¯¹è±¡ç±»å‹ä¸åŒï¼Œå‚æ•°ä¹Ÿä¸åŒï¼‰å¹¶å¯èƒ½è¿”å›ä¸€ä¸ªæ–°çš„æè¿°ç¬¦æˆ–ä¿®æ”¹åçš„ç›®æ ‡ã€‚</p>
<p>è€ŒInjectableè£…é¥°å™¨æ—¢ç„¶å¯ä»¥è¯»å–åˆ°Aç±»ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨Aç±»çš„åŸå‹é“¾ä¸Šæ·»åŠ æ–°çš„å®ä¾‹æ–¹æ³•ã€‚ä¾‹å¦‚ä»¥ä¸‹æ“ä½œï¼šä½¿ç”¨Injectableè£…é¥°å™¨å¯¹Aç±»æ·»åŠ ä¸€ä¸ªgetName2çš„å®ä¾‹æ–¹æ³•å¹¶è°ƒç”¨æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Injectable</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">target: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    target.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getName2</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'getName2'</span>
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(target.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">getName2</span>())
    <span class="hljs-keyword">return</span> target
  }
}

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
  <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Aä¾èµ–æ³¨å…¥ç”Ÿæ•ˆ'</span>
  }
}
</code></pre>
<p>è£…é¥°å™¨çš„æ–¹æ³•ä½¿ç”¨å¦‚å›¾5-2æ‰€ç¤ºï¼Œå¯ä»¥åœ¨è£…é¥°å™¨ä¸Šæ·»åŠ æ–¹æ³•å¹¶ä½¿ç”¨ï¼Œè‹¥éœ€è¦å‚æ•°ï¼Œè¿˜å¯ä»¥ä»@Injectable()çš„å®å‚ä½ç½®ä¼ å…¥ã€‚</p>
<p><img src="http://tuchuang.xiaoyu2002.cn/picture/image-20251214023354655.png" alt="image-20251214023354655" loading="lazy"/></p>
<p align="center">
 <b> å›¾5-2 è£…é¥°å™¨çš„æ–¹æ³•ä½¿ç”¨</b>
</p>
<p>ä½†è£…é¥°å™¨å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œè‹¥Injectableè£…é¥°å™¨çš„æ–¹æ³•å’ŒAç±»ä¸­çš„æ–¹æ³•åç§°ä¸€æ ·ï¼Œå°±ä¼šå‡ºç°Injectableè£…é¥°å™¨æ–¹æ³•è¦†ç›–Aç±»å®ä¾‹æ–¹æ³•çš„é—®é¢˜ã€‚å› ä¸ºè£…é¥°å™¨åœ¨ç¼–è¯‘æ—¶æ‰§è¡Œï¼Œåˆ™å…ˆæ‰§è¡Œè£…é¥°å™¨ä»£ç å®ç°åŸå‹é“¾è¦†ç›–å¹¶æ‰§è¡ŒgetName()æ–¹æ³•ï¼Œè€Œåè°ƒç”¨å®ä¾‹å¯¹è±¡açš„getName()æ–¹æ³•ï¼Œå› æ­¤æ‰§è¡Œä¸¤æ¬¡è£…é¥°å™¨ä¸­çš„getName()æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Injectable</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">target: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    target.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getName</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'getName2'</span>
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(target.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">getName</span>())
    <span class="hljs-keyword">return</span> target
  }
}

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
  <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Aä¾èµ–æ³¨å…¥ç”Ÿæ•ˆ'</span>
  }
}

<span class="hljs-keyword">const</span> a = <span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a.<span class="hljs-title function_">getName</span>())
<span class="hljs-comment">// getName2</span>
<span class="hljs-comment">// getName2</span>
</code></pre>
<p>ä¸ºäº†è§£å†³è£…é¥°å™¨è¦†ç›–åŸæ–¹æ³•çš„é—®é¢˜ï¼ŒTypeScriptæ¨å‡ºäº†å…ƒç¼–ç¨‹çš„æ¦‚å¿µï¼Œå®ƒå¸Œæœ›æˆ‘ä»¬é¿å…ç›´æ¥ä¿®æ”¹åŸå‹ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨å…ƒæ•°æ®åå°„ï¼ˆReflect Metadataï¼‰æ¥å®ç°å…ƒç¼–ç¨‹ã€‚è€Œå…ƒæ•°æ®åå°„çš„åº•å±‚ç¡®å®ä½¿ç”¨äº†WeakMapæ¥å­˜å‚¨å…ƒæ•°æ®ï¼Œè¿™æ ·å¯ä»¥é¿å…å†…å­˜æ³„æ¼ï¼ˆå¼±å¼•ç”¨ï¼‰ï¼Œå¹¶ä¸”ä¸ä¼šç›´æ¥å½±å“å¯¹è±¡çš„åŸå‹é“¾ã€‚</p>
<p>é‚£ä¹ˆä»€ä¹ˆæ˜¯å…ƒæ•°æ®åå°„ï¼Ÿå…ƒæ•°æ®åå°„æ˜¯ä¸€ç§åœ¨å¯¹è±¡ä¸Šæ·»åŠ å…ƒæ•°æ®ï¼ˆå…³äºæ•°æ®çš„æ•°æ®ï¼‰çš„æ–¹å¼ï¼Œè¿™äº›å…ƒæ•°æ®ä¸ä¼šç›´æ¥æˆä¸ºå¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯å­˜å‚¨åœ¨ç‹¬ç«‹çš„WeakMapä¸­ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å¯¹è±¡é™„åŠ é¢å¤–çš„ä¿¡æ¯ï¼Œè€Œä¸æ”¹å˜å…¶ç»“æ„ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•ä½¿ç”¨å…ƒæ•°æ®åå°„ï¼Ÿå³é€šè¿‡Reflect.getMetadata('design:paramtypes', clazz)é™æ€æ–¹æ³•ï¼ˆéœ€è¦å®‰è£…ç¬¬ä¸‰æ–¹åº“ï¼‰ã€‚</p>
<p>é¦–å…ˆè¦è¯´æ˜Reflect.getMetadata('design:paramtypes', clazz)é™æ€æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå…¶ä¸­å‚æ•°1æœ‰ä¸‰ä¸ªå†…ç½®é€‰é¡¹ï¼š</p>
<p>ï¼ˆ1ï¼‰design:paramtypes è·å–æ„é€ å‡½æ•°çš„å‚æ•°ç±»å‹ã€‚</p>
<p>ï¼ˆ2ï¼‰design:returntype è·å–æ„é€ å‡½æ•°çš„è¿”å›ç±»å‹ã€‚</p>
<p>ï¼ˆ3ï¼‰design:type è·å–æ„é€ å‡½æ•°çš„ç±»å‹ã€‚</p>
<p>ç¬¬1ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›ºå®šçš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²å¯ä»¥æœ‰ä»¥ä¸Šä¸‰ç§å†…ç½®é€‰é¡¹ï¼Œæˆ–è€…è‡ªå®šä¹‰ä¹Ÿå¯ä»¥ã€‚</p>
<p>ç¬¬2ä¸ªå‚æ•°æ˜¯ç›®æ ‡ç±»ï¼Œæˆ‘ä»¬è¦è¯»å–å“ªä¸ªå“ªä¸ªç±»çš„å…ƒæ•°æ®ã€‚å› æ­¤è¯´å¦‚æœä¸åœ¨ç›®æ ‡ç±»ä¸Šä½¿ç”¨è£…é¥°å™¨çš„è¯ï¼ŒReflect.getMetadata()é™æ€æ–¹æ³•å°±æ²¡æœ‰ç›®æ ‡ç±»å¯ä»¥è¯»å–å…ƒæ•°æ®ï¼Œè‡ªç„¶æ˜¯æ— æ³•ç”Ÿæ•ˆçš„ã€‚</p>
<p>æˆ‘ä»¬æ¥ä½¿ç”¨ä¸€ä¸‹å…ƒæ•°æ®åå°„ï¼Œä»¥ä¸‹è¦åšçš„éœ€æ±‚ï¼š</p>
<ul>
<li>é€šè¿‡å…ƒæ•°æ®åå°„ï¼Œåœ¨Bç±»ä¸­ä½¿ç”¨Aç±»çš„å®ä¾‹æ–¹æ³•ã€‚</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// tsconfig.jsonä¸­æ‰“å¼€è¿™ä¸¤ä¸ªé€‰é¡¹ï¼Œä»è€Œå®ç°Reflect.getMetadata()é™æ€æ–¹æ³•çš„ä½¿ç”¨</span>
<span class="hljs-string">"experimentalDecorators"</span>: <span class="hljs-literal">true</span>
<span class="hljs-string">"emitDecoratorMetadata"</span>: <span class="hljs-literal">true</span>
</code></pre>
<p>æ€è·¯æ˜¯å¾ˆæ¸…æ™°çš„ï¼Œæˆ‘ä»¬é€šè¿‡design:paramtypesè·å–æ„é€ å‡½æ•°çš„å‚æ•°ç±»å‹æ¥å®ç°ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰åœ¨Aç±»ä¸Bç±»ä½¿ç”¨è£…é¥°å™¨ï¼Œè€Œè£…é¥°å™¨æ‰§è¡Œæ—¶ï¼ŒTypeScriptä¼šç”Ÿæˆå…ƒæ•°æ®ã€‚</p>
<p>ï¼ˆ2ï¼‰åœ¨å®¹å™¨ä¸­è¯»å–ç±»çš„æ„é€ å‡½æ•°å‚æ•°ç±»å‹ä¿¡æ¯ï¼ˆæ‹¿åˆ°ç±»æœ¬èº«ï¼‰ã€‚</p>
<p>ï¼ˆ3ï¼‰æ‹¿åˆ°ç±»ä¹‹åï¼Œé€šè¿‡ç±»åˆ›å»ºå®ä¾‹å¯¹è±¡å®Œæˆäº†ä¾èµ–æ³¨å…¥ï¼Œå¡åˆ°Mapçš„é”®å€¼å¯¹é‡Œï¼Œé”®æ˜¯è¢«è¯»å–çš„ç±»ï¼Œå€¼æ˜¯è¢«è¯»å–ç±»ä¸­çš„æ„é€ å‡½æ•°å‚æ•°ç±»å‹çš„å®ä¾‹å¯¹è±¡ã€‚</p>
<p>åœ¨Bç±»çš„æ„é€ å‡½æ•°ä¸­è®¾ç½®ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°çš„ç±»å‹æ˜¯Aç±»ï¼Œè£…é¥°å™¨è¢«åº”ç”¨ï¼ŒTypeScriptç¼–è¯‘å™¨ä¸ºè¢«è£…é¥°Bç±»ç”Ÿæˆå…ƒæ•°æ®ï¼Œæˆ‘ä»¬é€šè¿‡Reflect.getMetadata()é™æ€æ–¹æ³•é…åˆç¬¬ä¸€ä¸ªå‚æ•°design:paramtypeså¯ä»¥ä»Bç±»è¯»å–åˆ°æ„é€ å‡½æ•°çš„å‚æ•°açš„ç±»å‹Aç±»ï¼Œå½“è£…é¥°å™¨è¯»å–åˆ°Aç±»åï¼Œé€šè¿‡Aç±»åˆ›å»ºå®ä¾‹å¯¹è±¡instanceï¼Œç„¶åå’ŒBç±»ä¸€èµ·å­˜åˆ°providersä¸­ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®Œæ•´IOCæ§åˆ¶åè½¬å®ç°</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'reflect-metadata'</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Injectable</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">target: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> target
  }
}

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
  <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Aä¾èµ–æ³¨å…¥ç”Ÿæ•ˆ'</span>
  }
}

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> a: A</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>.<span class="hljs-title function_">getName</span>())
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Container</span> {
  <span class="hljs-keyword">private</span> providers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">any</span>, <span class="hljs-built_in">any</span>&gt;()

  <span class="hljs-title function_">get</span>(<span class="hljs-params">clsz: <span class="hljs-keyword">new</span> (...args: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">const</span> parmsTypes = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getMetadata</span>(<span class="hljs-string">'design:paramtypes'</span>, clsz) || []
    <span class="hljs-comment">// é€’å½’åˆ›å»ºå®ä¾‹å¯¹è±¡ï¼Œå®Œæˆäº†ä¾èµ–æ³¨å…¥</span>
    <span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title function_">clsz</span>(...parmsTypes.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(<span class="hljs-keyword">type</span>)))
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">providers</span>.<span class="hljs-title function_">set</span>(clsz, instance)
    <span class="hljs-keyword">return</span> instance
  }
}

<span class="hljs-keyword">const</span> container = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Container</span>()
<span class="hljs-comment">// å¤šæ¬¡è¯·æ±‚Bç±»ï¼Œä¼šç›´æ¥ä»providersä¸­è¿”å›ç¼“å­˜çš„å®ä¾‹</span>
container.<span class="hljs-title function_">get</span>(B)
</code></pre>
<p>å…¶å®å½“æˆ‘ä»¬å®Œæˆé€’å½’åˆ›å»ºå®ä¾‹å¯¹è±¡ä¹‹åï¼ŒBç±»å°±èƒ½å¤Ÿè°ƒç”¨Aç±»çš„getName()å®ä¾‹æ–¹æ³•äº†ã€‚å› ä¸ºåšåˆ°äº†Bå®ä¾‹çš„aå±æ€§ç°åœ¨æŒ‡å‘Aå®ä¾‹ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å½“è°ƒç”¨ container.get(B) æ—¶ï¼š</span>

<span class="hljs-comment">// 1. åˆ›å»º A å®ä¾‹</span>
<span class="hljs-keyword">const</span> aInstance = <span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>();
<span class="hljs-comment">// aInstance æ˜¯ A ç±»çš„ä¸€ä¸ªå…·ä½“å®ä¾‹ï¼Œæœ‰ getName() æ–¹æ³•</span>

<span class="hljs-comment">// 2. åˆ›å»º B å®ä¾‹å¹¶æ³¨å…¥</span>
<span class="hljs-keyword">const</span> bInstance = <span class="hljs-keyword">new</span> <span class="hljs-title function_">B</span>(aInstance);  <span class="hljs-comment">// aInstance ä½œä¸ºå‚æ•°ä¼ é€’</span>

<span class="hljs-comment">// 3. B æ„é€ å‡½æ•°å†…éƒ¨æ‰§è¡Œ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> {
  <span class="hljs-comment">// TypeScript è¯­æ³•ç³–å±•å¼€ä¸ºï¼š</span>
  <span class="hljs-comment">// constructor(a: A) {</span>
  <span class="hljs-comment">//   this.a = a;  // this.a è¢«èµ‹å€¼ä¸ºä¼ å…¥çš„ aInstance</span>
  <span class="hljs-comment">// }</span>
  
  <span class="hljs-comment">// æ‰€ä»¥å®é™…ä¸Šï¼š</span>
  <span class="hljs-comment">// this.a = aInstance</span>
  
  <span class="hljs-comment">// å› æ­¤ï¼š</span>
  <span class="hljs-comment">// this.a.getName() ç­‰äº aInstance.getName()</span>
}
</code></pre>
<p>é€šè¿‡@Injectable()è£…é¥°å™¨ï¼ŒTypeScriptåœ¨ç¼–è¯‘æ—¶ä¸ºBç±»è®°å½•äº†æ„é€ å‡½æ•°å‚æ•°ç±»å‹ï¼ˆAç±»ï¼‰ã€‚åœ¨è¿è¡Œæ—¶ï¼Œä¾èµ–æ³¨å…¥å®¹å™¨è¯»å–è¿™äº›å…ƒæ•°æ®ï¼Œé€’å½’åˆ›å»ºAç±»çš„å®ä¾‹ï¼Œå¹¶å°†å…¶æ³¨å…¥åˆ°Bç±»çš„æ„é€ å‡½æ•°ä¸­ã€‚å› æ­¤ï¼ŒBç±»çš„å®ä¾‹å¯ä»¥é€šè¿‡ this.a.getName() è®¿é—®Aç±»çš„å®ä¾‹æ–¹æ³•ã€‚</p>
<p>åç»­å°†å®ä¾‹å¯¹è±¡æ”¾å…¥providersï¼ˆMapæ•°æ®ç»“æ„ï¼‰ä¸­æ˜¯åˆ©ç”¨Mapç»“æ„çš„é”®å”¯ä¸€ç‰¹æ€§ï¼Œå½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è¯·æ±‚Bç±»æ—¶ï¼Œå®¹å™¨ä¼šåˆ›å»ºBç±»çš„å®ä¾‹ï¼Œå¹¶ä¸”å‘ç°Bç±» ä¾èµ–Aç±»ï¼Œäºæ˜¯å…ˆåˆ›å»ºæˆ–è·å–Aç±»çš„å®ä¾‹ï¼Œç„¶åå°†Bç±»å’Œå…¶å®ä¾‹å­˜å…¥providersã€‚ä¸‹æ¬¡å†è¯·æ±‚Bç±»æ—¶ï¼Œå°±ç›´æ¥ä»providersä¸­è¿”å›ç¼“å­˜çš„å®ä¾‹ï¼Œè€Œä¸ä¼šå†æ¬¡åˆ›å»ºã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ä¼˜åŒ–ä¸€ä¸‹å®¹å™¨æ³¨å…¥ï¼Œå‡å¦‚æœ‰å¤šä¸ªä¸åŒç±»ï¼ˆBç±»ã€B1ç±»ã€B2ç±»ã€B3ç±»ï¼‰åŒæ—¶æ³¨å…¥äº†Aç±»ï¼Œé‚£ä¹ˆè¿™ä¼šä¸æ–­çš„é‡å¤æ³¨å…¥åˆ°Mapä¸­ï¼Œå› ä¸ºMapç»“æ„åªä¿è¯Keyå”¯ä¸€ã€‚è¿™å°±æ²¡æœ‰å¿…è¦ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨æœ€å‰é¢åŠ ä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœåœ¨Mapä¸­å·²ç»å­˜åœ¨æ³¨å…¥çš„ç±»ï¼ˆä¾‹å¦‚Aç±»ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç›´æ¥è¿”å›æ³¨å…¥çš„ç±»å°±è¡Œã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Container</span> {
  <span class="hljs-keyword">private</span> providers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()

  <span class="hljs-title function_">get</span>(<span class="hljs-params">clsz: <span class="hljs-keyword">new</span> (...args: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-comment">// ä¼˜åŒ–ï¼šé˜²æ­¢æ³¨å…¥é‡å¤</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">providers</span>.<span class="hljs-title function_">has</span>(clsz)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">providers</span>.<span class="hljs-title function_">get</span>(clsz)
    }
    <span class="hljs-keyword">const</span> parmsTypes = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getMetadata</span>(<span class="hljs-string">'design:paramtypes'</span>, clsz) || []
    <span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title function_">clsz</span>(...parmsTypes.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(<span class="hljs-keyword">type</span>)))
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">providers</span>.<span class="hljs-title function_">set</span>(clsz, instance)
    <span class="hljs-keyword">return</span> instance
  }
}
</code></pre>
<p>ä»¥ä¸Šå°±æ˜¯IOCæ§åˆ¶åè½¬å®ç°çš„å…¨è¿‡ç¨‹ï¼Œæœ€æ ¸å¿ƒå’Œç²¾å½©çš„ä»£ç å°±ä»¥ä¸‹è¿™æ¡ï¼šå®Œæˆäº†æ‹†è§£é«˜è€¦åˆä¾èµ–çš„å·¥ä½œã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title function_">clsz</span>(...parmsTypes.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(<span class="hljs-keyword">type</span>)))
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€‚åˆå¾ˆå¤šå…¬å¸å’Œå›¢é˜Ÿçš„ AI Coding è½åœ°èŒƒå¼ï¼ˆäºŒï¼‰]]></title>    <link>https://juejin.cn/post/7591085154977251354</link>    <guid>https://juejin.cn/post/7591085154977251354</guid>    <pubDate>2026-01-04T04:14:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591085154977251354" data-draft-id="7590958028477923374" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€‚åˆå¾ˆå¤šå…¬å¸å’Œå›¢é˜Ÿçš„ AI Coding è½åœ°èŒƒå¼ï¼ˆäºŒï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹,AIGC"/> <meta itemprop="datePublished" content="2026-01-04T04:14:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LVæŠ€æœ¯æ´¾"/> <meta itemprop="url" content="https://juejin.cn/user/2013961035453927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€‚åˆå¾ˆå¤šå…¬å¸å’Œå›¢é˜Ÿçš„ AI Coding è½åœ°èŒƒå¼ï¼ˆäºŒï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2013961035453927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LVæŠ€æœ¯æ´¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T04:14:16.000Z" title="Sun Jan 04 2026 04:14:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ lvã€‚</p>
<p>ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬èŠäº†å¸‚é¢ä¸Šä¸åŒ AI Coding äº§å“çš„åˆ†ç±»ã€ä¾§é‡ç‚¹ã€ä¼˜ç¼ºç‚¹ä»¥åŠé¢å‘çš„äººç¾¤ã€‚</p>
<p>ã€Œ<a href="https://juejin.cn/post/7584714813365747750" target="_blank" title="https://juejin.cn/post/7584714813365747750">é€‚åˆå¾ˆå¤šå…¬å¸å’Œå›¢é˜Ÿçš„ AI Coding è½åœ°èŒƒå¼ï¼ˆä¸€ï¼‰</a>ã€</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä»ä¸Šä¸€ç¯‡æåˆ°çš„<strong>ä¸¤ç§äº§å“å½¢æ€ï¼ˆAI Coding å¹³å°ç±» &amp; AI Coding åŸºå»ºç±»ï¼‰</strong> æ¥åˆ†åˆ«æ¢è®¨é€‚åˆå¾ˆå¤šå…¬å¸å’Œå›¢é˜Ÿçš„ <strong>ä¸¤ç§ AI Coding è½åœ°èŒƒå¼</strong>ï¼š</p>
<ul>
<li>
<p>AI Coding å¹³å°å·¥ç¨‹åŒ–</p>
</li>
<li>
<p>AI Coding åŸºå»ºå·¥ç¨‹åŒ–</p>
</li>
</ul>
<p>ä¸å¤šè¯´ï¼Œå¼€æ•´ï½</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fai.iamlv.cn%2Fme.html" target="_blank" title="https://ai.iamlv.cn/me.html" ref="nofollow noopener noreferrer">æ¬¢è¿åŠ å…¥æœ€æ‡‚ AI çš„å‰ç«¯ä¼™ä¼´ä»¬ç¾¤</a></p>
<h2 data-id="heading-0">é’ˆå¯¹ AI Coding å¹³å°çš„è½åœ°èŒƒå¼</h2>
<p>å¸‚é¢ä¸Šçš„ AI Coding å¹³å°ç±»äº§å“å¾ˆå¤šï¼Œå¦‚ V0ã€Bolt Newã€Lovable ç­‰ã€‚</p>
<p>è¿™ç§äº§å“é¢å‘çš„äººç¾¤å¤§éƒ¨åˆ†éƒ½æ˜¯éç¨‹åºå‘˜ï¼Œå¦‚äº§å“ç»ç†ã€è®¾è®¡å¸ˆã€è¿è¥ç­‰ã€‚</p>
<p>åœ¨ä¸€ä¸ªå…¬å¸å’Œå›¢é˜Ÿå†…éƒ¨ï¼Œæˆ‘å‘ç°å¤§å®¶ä½¿ç”¨è¿™ç§äº§å“çš„ä¸»è¦æ–¹å¼æœ‰<strong>ä¸‰ç§</strong></p>
<h2 data-id="heading-1">AI Coding å¹³å°ä½¿ç”¨ç°çŠ¶åˆ†æ</h2>
<p><strong>ç¬¬ä¸€ç§æ–¹å¼</strong>: äº§å“ç»ç†åŸºäº Figma Make æˆ–è€… V0 å‡ºäº§å“å¯äº¤äº’æ€§çš„åŸå‹ï¼Œä¸»è¦ç”¨æ¥è¿›è¡Œéœ€æ±‚è¯„å®¡ã€è®¾è®¡è¯„å®¡ã€å¼€å‘è¯„å®¡ç­‰ï¼Œä¸‹æ¸¸è¿˜æ˜¯è®¾è®¡å¸ˆå‚è€ƒåŸå‹è¿›è¡Œè®¾è®¡ç¨¿çš„äº§å‡ºã€‚</p>
<p>è¿™ç§ä½¿ç”¨æ–¹å¼å…¶å®æœ¬è´¨ä¸Šæ˜¯äº§å“ç»ç†è‡ªèº«èƒ½åŠ›çš„è¡¥å……æˆ–è€…è¯´é’ˆå¯¹äº§å“ç»ç†æœ¬èŒå·¥ä½œçš„ææ•ˆï¼Œå½“ç„¶è¿™ç§ AI Coding å¹³å°äº§å‡ºçš„ <strong>å¯äº¤äº’å¼åŸå‹</strong> ç›¸æ¯”è¾ƒäºä¼ ç»Ÿçš„äº§å“åŸå‹ï¼Œå¯ä»¥ä¼ é€’ç»™å›¢é˜Ÿçš„ä¿¡æ¯é‡ä¹Ÿä¼šæ›´ä¸°å¯Œã€‚</p>
<p>è¿™ç§æ–¹å¼ï¼Œåœ¨ä»»ä½•å…¬å¸å’Œå›¢é˜Ÿå†…éƒ¨éƒ½å¯ä»¥è¿›è¡Œå°è¯•ï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰æ”¹å˜åŸæœ‰çš„å·¥ä½œæµç¨‹ï¼Œåªæ˜¯é’ˆå¯¹äº§å“ç»ç†çš„å·¥ä½œæµè¿›è¡Œäº†ä¸€å®šç¨‹åº¦çš„ä¼˜åŒ–ã€‚</p>
<p><strong>ç¬¬äºŒç§æ–¹å¼</strong>: éœ€æ±‚æ–¹ï¼ˆäº§å“ã€è®¾è®¡å¸ˆã€è¿è¥äººå‘˜ï¼‰åŸºäº Figma Make æˆ–è€… V0 å‡ºäº§å“å¯äº¤äº’æ€§çš„åŸå‹ï¼Œæ»¡è¶³éœ€æ±‚å°±ç›´æ¥å‘ç»™å¼€å‘äººå‘˜ï¼Œå¼€å‘äººå‘˜åŸºäºåŸå‹å†è½¬æˆæˆç¬¦åˆå…¬å¸è§„èŒƒï¼ˆæŠ€æœ¯æ ˆã€ä»£ç è§„èŒƒç­‰ï¼‰çš„ä»£ç ã€‚</p>
<p>è¿™ç§ä½¿ç”¨æ–¹å¼æœ‰ç‚¹æ„æ€äº†ï¼Œä» AI Coding å¹³å°ç”Ÿæˆå¯äº¤äº’åŸå‹ -&gt; ç¨‹åºå‘˜åŸºäºåŸå‹è¿›è¡Œä»£ç çš„å¼€å‘ã€‚</p>
<p>ç›¸å½“äºæŠŠå¸¸è§„çš„ï¼š<strong>äº§å“ -&gt; è®¾è®¡å¸ˆ -&gt; ç¨‹åºå‘˜</strong> çš„å²—ä½èŒè´£è¿›è¡Œäº†<strong>ä¸€å®šç¨‹åº¦</strong>çš„åˆå¹¶ã€‚</p>
<p>äº§å“å’Œè®¾è®¡å¸ˆåˆå¹¶åœ¨äº†ä¸€èµ·ï¼Œæˆ‘å°±æš‚ä¸”å«åš <strong>Product Designer</strong>ï¼Œç®€ç§° PDã€‚</p>
<p><strong>ç¬¬ä¸‰ç§æ–¹å¼</strong>: éœ€æ±‚æ–¹ï¼ˆä¸ç‰¹æŒ‡äº§å“ç»ç†ï¼Œå¯èƒ½ä¹Ÿæ˜¯è®¾è®¡å¸ˆã€è¿è¥ï¼Œç”šè‡³æŠ€æœ¯äººå‘˜ç­‰ï¼‰ä½¿ç”¨ V0 å¿«é€Ÿç”Ÿæˆä¸€ä¸ªäº§å“çš„ MVPï¼Œä¹Ÿå¯ä»¥è¿…é€Ÿé€šè¿‡ Vercel å¹³å°è¿›è¡Œä¸Šçº¿ã€‚</p>
<p>è¿™ç§æ–¹å¼å¯¹äºè·Ÿæ—¶é—´èµ›è·‘ï¼Œéœ€è¦å¿«é€ŸéªŒè¯éœ€æ±‚ã€è·å¾—å¸‚åœºåé¦ˆçš„åœºæ™¯æ¥è¯´ï¼Œå€’æ˜¯æŒºåˆé€‚çš„ï¼Œå½“ç„¶ä¹Ÿä»…é™äº MVP éªŒè¯é˜¶æ®µï¼Œå¯¹äºéœ€è¦è¿›è¡Œé•¿æœŸè¿­ä»£çš„é¡¹ç›®æ¥è¯´ï¼Œè¿™ç§æ–¹æ¡ˆå¯èƒ½å°±ä¸å¤ªåˆé€‚äº†ã€‚</p>
<p>è¿™é‡Œçš„éœ€æ±‚æ–¹ï¼Œå¯ä»¥å«åšï¼š<strong>Product Design Engineer</strong>ï¼Œç®€ç§° PDEï¼ŒDesign å’Œ Engineer çš„èƒ½åŠ›å…¶å®æ˜¯ AI Coding å¹³å°èµ‹äºˆçš„ã€‚</p>
<p>å¥½ï¼Œå…ˆè¸©ä¸€è„šï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹è¿™ä¸‰ç§ AI Coding å¹³å°çš„ä½¿ç”¨æ–¹å¼ï¼š</p>
<p>ç¬¬ä¸€ç§ï¼Œç›¸å½“äºæ˜¯é’ˆå¯¹äº§å“ç»ç†æœ¬èº«èƒ½åŠ›çš„<strong>è¡¥å……</strong>ï¼Œç›¸å½“äºæ˜¯é’ˆå¯¹ç°æœ‰äº§å“ç ”å‘æµç¨‹ä¸­å•ä¸ªè§’è‰²çš„ææ•ˆï¼Œä½†å¹¶æ²¡æœ‰æ”¹å˜åŸæœ‰çš„äº§å“ç ”å‘æµç¨‹ã€‚</p>
<p>ç¬¬äºŒç§æ˜¯éœ€æ±‚æ–¹ä½¿ç”¨ AI Coding å¹³å°å®Œå®Œæˆå¯äº¤äº’åŸå‹çš„è¾“å‡ºï¼Œè¿™ä¸ªå¯äº¤äº’çš„åŸå‹å¯ä»¥ç›´æ¥äº¤ä»˜ç»™ç¨‹åºå‘˜ï¼Œç›¸å½“äºæŠŠ Product å’Œ Designer çš„å²—ä½åˆå¹¶åœ¨äº†ä¸€èµ·ï¼Œå«åš Product Designerï¼Œç®€ç§° PDã€‚</p>
<p>ç¬¬ä¸‰ç§æ˜¯éœ€æ±‚æ–¹ç›´æ¥ä½¿ç”¨ AI Coding å¹³å°å®Œæˆäº†äº§å“ç ”å‘çš„å…¨æµç¨‹ï¼Œç›¸å½“äºæŠŠ Productã€Designerã€Engineer çš„å²—ä½åˆå¹¶åœ¨äº†ä¸€èµ·ï¼Œå«åš Product Design Engineerï¼Œç®€ç§° PDEï¼Œè¿™æ˜¯å¯¹æ•´ä½“äº§å“ç ”å‘æµç¨‹çš„é‡å¡‘ï¼Œä½†æ˜¯æ³¨æ„ï¼Œè¿™ç§åœºæ™¯ä»…é™äº MVP éªŒè¯é˜¶æ®µã€‚</p>
<p>ä»ç¬¬ä¸€ç§ -&gt; ç¬¬äºŒç§ -&gt; ç¬¬ä¸‰ç§ï¼Œå…¶å®å¯¹åº”äº†ä»å•ä¸ªè§’è‰²çš„ææ•ˆ -&gt; éƒ¨åˆ†ç ”å‘æµç¨‹çš„åˆå¹¶ -&gt; æ•´ä½“äº§å“ç ”å‘æµç¨‹çš„é‡å¡‘ã€‚</p>
<p>è¿™ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±å…¬å¸æˆ–å›¢é˜Ÿçš„å®é™…æƒ…å†µï¼Œè¿›è¡Œé€‰æ‹©ã€‚</p>
<p>æˆ‘ä»¬å›åˆ°çœ‹ä¼¼æœ€ç‰›é€¼çš„<strong>ç¬¬ä¸‰ç§ä½¿ç”¨æ–¹å¼</strong>ï¼Œæˆ‘ä»¬å†æ€è€ƒä¸€ä¸‹ï¼š</p>
<p>ç¬¬ä¸‰ç§ä½¿ç”¨æ–¹å¼å°½ç®¡æ˜¯å¯¹æ•´ä½“äº§å“ç ”å‘æµç¨‹çš„é‡å¡‘ï¼Œä½†ä¹Ÿä»…é€‚ç”¨äº MVP éªŒè¯é˜¶æ®µï¼Œèƒ½å¦åœ¨é•¿æœŸè¿­ä»£çš„é¡¹ç›®ä¸­ä½¿ç”¨å‘¢ï¼Ÿ</p>
<p><strong>æœ‰äº›åœºæ™¯èƒ½</strong>ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹èŠã€‚</p>
<h2 data-id="heading-2">AI Coding å¹³å°å·¥ç¨‹åŒ–</h2>
<p>ä½œä¸ºé•¿æœŸè¿­ä»£çš„é¡¹ç›®æ¥è¯´ï¼ŒåŠ¿å¿…éœ€è¦äººå·¥çš„å‚ä¸ï¼Œå…¶å®æœ€æ ¸å¿ƒçš„ç‚¹æ˜¯ï¼šå¦‚ä½•ä¿è¯<strong>äººå·¥ä»‹å…¥çš„åœºæ™¯ä¸‹ï¼Œä»£ç çš„å¯ç»´æŠ¤æ€§</strong>ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>å¥‘åˆå›¢é˜Ÿé¡¹ç›®æŠ€æœ¯æ ˆï¼Œæ¯”å¦‚è¯´ nextjsã€reactã€vueã€antdã€shadcnã€tailwindcssã€ç§æœ‰ç»„ä»¶åº“ç­‰ï¼Œå¤§å®¶éƒ½èƒ½çœ‹æ‡‚ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹ã€‚</p>
</li>
<li>
<p>ä»£ç ç»“æ„è§„èŒƒï¼Œæ¯”å¦‚è¯´ç»„ä»¶çš„æ–‡ä»¶ç»“æ„ã€ä»£ç é£æ ¼ç­‰ï¼ŒæŒ‰ç…§å¤§å®¶æ—¥å¸¸çš„å¼€å‘ä¹ æƒ¯æ¥ã€‚</p>
</li>
<li>
<p>...</p>
</li>
</ul>
<p>é‚£æˆ‘ä»¬çš„é‡ç‚¹ï¼Œå…¶å®å°±æ˜¯èƒ½å¤ŸåŸºäº AI Coding å¹³å°ï¼Œç”Ÿæˆç¬¦åˆå›¢é˜Ÿé¡¹ç›®æŠ€æœ¯æ ˆã€ä»£ç ç»“æ„è§„èŒƒçš„ä»£ç ï¼Œä»è€Œèƒ½å¤Ÿä¿è¯ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p>
<p>æˆ‘æŠŠè¿™ä¸ªå·¥ä½œå«åš <strong>AI Coding å¹³å°å·¥ç¨‹åŒ–</strong>ã€‚</p>
<p>å¸‚é¢ä¸Šçš„ AI Coding å¹³å°ï¼Œå—é™äºå®šåˆ¶åŒ–èƒ½åŠ›ï¼ˆå®šåˆ¶ç¬¦åˆå›¢é˜Ÿé¡¹ç›®æŠ€æœ¯æ ˆã€ä»£ç ç»“æ„è§„èŒƒçš„ä»£ç ç”Ÿæˆå™¨ï¼‰ï¼Œç§æœ‰åŒ–èƒ½åŠ›ï¼ˆåœ¨å…¬å¸å†…éƒ¨ç§æœ‰åŒ–éƒ¨ç½²ï¼‰ç­‰ã€‚</p>
<p>å› æ­¤ï¼Œæ–°è½®å­æ¥äº†ï¼šCompoderï¼Œå®ƒä»£è¡¨çš„å°±æ˜¯ AI Coding å¹³å°å·¥ç¨‹åŒ–çš„äº§ç‰©ã€‚</p>
<blockquote>
<p>Compoder æ˜¯ä¸€ä¸ª AI é©±åŠ¨çš„ç»„ä»¶ä»£ç ç”Ÿæˆå¼•æ“ï¼Œå¯ä»¥åŸºäºå®ƒå®šåˆ¶åŸºäºç‰¹å®šæŠ€æœ¯æ ˆï¼ˆReactã€Vueã€å¼€æºç»„ä»¶åº“ã€ç§æœ‰ç»„ä»¶åº“ï¼‰ã€ç‰¹å®šä¸šåŠ¡åœºæ™¯ï¼ˆlanding page ç­‰ï¼‰çš„ç»„ä»¶ä»£ç ç”Ÿæˆå™¨ã€‚</p>
<p>è¯¦è§: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FIamLiuLv%2Fcompoder" target="_blank" title="https://github.com/IamLiuLv/compoder" ref="nofollow noopener noreferrer">github.com/IamLiuLv/coâ€¦</a></p>
</blockquote>
<p>å…ˆä¸Šæ¡ˆä¾‹ï¼šLading Page Codegenï¼ˆCode Generatorï¼‰</p>
<p>è¿™ä¸ª Code Generator èƒ½å¤Ÿé’ˆå¯¹ç”¨æˆ·çš„éœ€æ±‚ä½¿ç”¨ Nextjsã€PageUIï¼ˆä¸€ä¸ªæ„å»º LandingPage çš„ç»„ä»¶åº“ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdanmindru%2Fpage-ui%25EF%25BC%2589" target="_blank" title="https://github.com/danmindru/page-ui%EF%BC%89" ref="nofollow noopener noreferrer">github.com/danmindru/pâ€¦</a> æ¥ç”Ÿæˆå¯¹åº”çš„ Landing Page ä»£ç ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ Compoderï¼Œå¯ä»¥å®šåˆ¶è¿™ä¸ª Lading Page Codegen çš„ä»£ç ç”Ÿæˆè§„åˆ™ï¼Œä»è€Œèƒ½å¤Ÿä¿è¯ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p>
<ul>
<li>æŠ€æœ¯æ ˆå®šåˆ¶ï¼Œå¦‚ç§æœ‰ç»„ä»¶åº“å®šåˆ¶ï¼ˆpageui ä¸æ˜¯å¾ˆå‡ºåï¼Œllm ä¸åŒ…å«å…¶çŸ¥è¯†ï¼Œç›¸å½“äºæ˜¯ <strong>ç§æœ‰ç»„ä»¶åº“</strong> åœºæ™¯ï¼‰</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70b26c6fbb9f49389ba43a4a08912223~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTFbmioDmnK_mtL4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768104855&amp;x-signature=TrG5NaXd2vSOB00JIsjGsouNIQE%3D" alt="" loading="lazy"/></p>
<ul>
<li>ä»£ç è§„èŒƒå®šåˆ¶ï¼Œå¦‚ç»„ä»¶çš„æ–‡ä»¶ç»“æ„ã€ä»£ç é£æ ¼ç­‰</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9773df90135143f3a883bd771057701e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTFbmioDmnK_mtL4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768104855&amp;x-signature=fdKMf941BInW4qxxKiXP9mW6zeI%3D" alt="" loading="lazy"/></p>
<p>æœ€ç»ˆæ•ˆæœï¼Œæˆ‘ä»¬ä»ç”¨æˆ·çš„ä½¿ç”¨è§†è§’æ¥çœ‹ï¼š</p>
<ol>
<li>è¿›å…¥åˆšåˆšå®šåˆ¶å¥½çš„ Landing Page Codegenï¼Œè¾“å…¥éœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„æ¨¡å‹ã€‚</li>
</ol>
<p>éœ€æ±‚æ˜¯æŠŠ Compoder çš„ Readme ç»™äº†è¿‡å»ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FIamLiuLv%2Fcompoder%2Fblob%2Fmain%2FREADME.md%25EF%25BC%2589%25EF%25BC%258C" target="_blank" title="https://github.com/IamLiuLv/compoder/blob/main/README.md%EF%BC%89%EF%BC%8C" ref="nofollow noopener noreferrer">github.com/IamLiuLv/coâ€¦</a> ç”Ÿæˆ Compoder æœ¬èº«çš„ Landing Page ä»£ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1c415e321984ed3b5bfa034d9114b58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTFbmioDmnK_mtL4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768104855&amp;x-signature=Mq0Ym%2F8uGfnjpadvcTd2A%2FTV%2BLM%3D" alt="" loading="lazy"/></p>
<ol start="2">
<li>ç­‰å¾…ä»£ç ç”Ÿæˆå®Œæˆï¼Œåœ¨çº¿æŸ¥çœ‹æ•ˆæœã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6058d75f1ddd46ef902ecb2925ed8df9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTFbmioDmnK_mtL4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768104855&amp;x-signature=qArttWKZCPbl0OEa3QxrH6aD9nU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c520a4039244346a217ac33707b9735~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTFbmioDmnK_mtL4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768104855&amp;x-signature=UJitc31RKQ7aMPh2I4wrYk6biUg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f2e648c98024113ad78e4372ee157ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTFbmioDmnK_mtL4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768104855&amp;x-signature=B6LDdcy%2FmFSXxor9sD7bHk3zedQ%3D" alt="" loading="lazy"/></p>
<p>ä»ç”¨æˆ·çš„ä½¿ç”¨è§’åº¦æ¥çœ‹ï¼Œæœ¬èº«ä¸éœ€è¦å…³å¿ƒä»£ç çš„ç”ŸæˆåŸç†ï¼Œåªéœ€è¦å…³å¿ƒæ•ˆæœæ˜¯å¦æ»¡æ„å³å¯ï¼Œå…¶ä»–çš„ä»£ç ç”Ÿæˆç»†èŠ‚ï¼Œéƒ½äº¤ç»™äº† Compoderï¼ˆAI Coding å¹³å°å·¥ç¨‹åŒ–çš„äº§ç‰©ï¼‰ å†…éƒ¨æ¥å®ç°ã€‚</p>
<p>è‡³äº Compoder å†…éƒ¨å®ç°åŸç†ï¼Œæ¶‰åŠåˆ°å¾ˆå¤šå‰ç«¯ + AI ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œæ¯”å¦‚ Prompt è®¾è®¡ã€Workflow è®¾è®¡ã€RAG ç†å¿µï¼Œæ€ä¹ˆåŸºäºç§æœ‰ç»„ä»¶ç”Ÿæˆä»£ç ç­‰ï¼Œæ€ä¹ˆå®ç°ä»£ç æ¸²æŸ“å™¨ç­‰ç­‰ã€‚</p>
<p>æœ¬ç¯‡å°±ä¸å±•å¼€è®²äº†ï¼Œæƒ³æ·±å…¥å­¦ä¹ çš„åŒå­¦å¯ä»¥çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.iamkasong.com%2Fdocs%2F%25E7%25AC%25AC%252029%2520%25E8%25AF%25BE%2520%25E5%25AE%259E%25E6%2588%2598%25E4%25BA%258C%2520Compoder%2520%25E9%25A1%25B9%25E7%259B%25AE%25E4%25BB%258B%25E7%25BB%258D.html" target="_blank" title="https://doc.iamkasong.com/docs/%E7%AC%AC%2029%20%E8%AF%BE%20%E5%AE%9E%E6%88%98%E4%BA%8C%20Compoder%20%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D.html" ref="nofollow noopener noreferrer">Compoder é¡¹ç›®ä»‹ç»</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d52e59823eaf4bcdbc148d67b4587d6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTFbmioDmnK_mtL4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768104855&amp;x-signature=Fw4o8Bl%2FWLuePi56JcJ2M70zwHA%3D" alt="" loading="lazy"/></p>
<p>è¨€å½’æ­£ä¼ ã€‚</p>
<p>è‡³æ­¤ï¼ŒAI Coding å¹³å°åŒ–å·¥ç¨‹æå®šï¼Œä½œä¸ºéœ€æ±‚æ–¹ï¼ˆäº§å“ã€è®¾è®¡å¸ˆã€è¿è¥ã€æŠ€æœ¯äººå‘˜ï¼‰æ¥è¯´ï¼Œå¯ä»¥åŸºäº Compoder çš„ Codegen å¿«é€Ÿç”Ÿæˆç¬¦åˆå›¢é˜Ÿé¡¹ç›®æŠ€æœ¯æ ˆã€ä»£ç ç»“æ„è§„èŒƒçš„ä»£ç ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿä¿è¯ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p>
<p>æœ¬ç€ä¸€ç¯‡æ–‡ç« æŠŠä¸€ä»¶äº‹èŠé€çš„åŸåˆ™ï¼Œæœ¬ç¯‡å°±å…ˆèšç„¦åœ¨ AI Coding å¹³å°åŒ–å·¥ç¨‹è¿™å—ã€‚</p>
<p>ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬æ¥ç€èŠ AI Coding åŸºå»ºå·¥ç¨‹åŒ–ã€‚</p>
<hr/>
<p>è¯»åæ€è€ƒï¼š</p>
<ul>
<li>
<p>AI Coding å¹³å°åŒ–å·¥ç¨‹çš„ç¼ºç‚¹ï¼Ÿ</p>
</li>
<li>
<p>æŠ€æœ¯äººå‘˜è‡ªå·±å‡ºäº†ä¸€ä¸ªäº§å“æŠŠè‡ªå·±ç»™å¹²æ‰äº†ï¼Ÿ</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisæ€§èƒ½ç¿»å€çš„5ä¸ªå†·é—¨æŠ€å·§ï¼šä»æ¯ç§’10ä¸‡åˆ°20ä¸‡çš„å®æˆ˜ä¼˜åŒ–ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7590776324164272128</link>    <guid>https://juejin.cn/post/7590776324164272128</guid>    <pubDate>2026-01-04T04:18:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590776324164272128" data-draft-id="7590778284758630435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisæ€§èƒ½ç¿»å€çš„5ä¸ªå†·é—¨æŠ€å·§ï¼šä»æ¯ç§’10ä¸‡åˆ°20ä¸‡çš„å®æˆ˜ä¼˜åŒ–ä¹‹è·¯"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-04T04:18:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisæ€§èƒ½ç¿»å€çš„5ä¸ªå†·é—¨æŠ€å·§ï¼šä»æ¯ç§’10ä¸‡åˆ°20ä¸‡çš„å®æˆ˜ä¼˜åŒ–ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T04:18:40.000Z" title="Sun Jan 04 2026 04:18:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Redisæ€§èƒ½ç¿»å€çš„5ä¸ªå†·é—¨æŠ€å·§ï¼šä»æ¯ç§’10ä¸‡åˆ°20ä¸‡çš„å®æˆ˜ä¼˜åŒ–ä¹‹è·¯</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Redisä½œä¸ºé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œè¢«å¹¿æ³›åº”ç”¨äºç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å®æ—¶ç»Ÿè®¡ç­‰åœºæ™¯ã€‚ç„¶è€Œï¼Œéšç€ä¸šåŠ¡è§„æ¨¡çš„å¢é•¿ï¼Œè®¸å¤šå¼€å‘è€…å‘ç°Redisçš„æ€§èƒ½ç“¶é¢ˆé€æ¸æ˜¾ç°â€”â€”åŸæœ¬è½»æ¾è¾¾åˆ°æ¯ç§’10ä¸‡æ¬¡æ“ä½œçš„å®ä¾‹ï¼Œåœ¨é«˜å¹¶å‘ä¸‹å¼€å§‹å‡ºç°å»¶è¿Ÿç”šè‡³è¶…æ—¶ã€‚</p>
<p>æœ¬æ–‡å°†åˆ†äº«5ä¸ªå†·é—¨ä½†æå…¶æœ‰æ•ˆçš„Redisä¼˜åŒ–æŠ€å·§ï¼Œè¿™äº›æ–¹æ³•æ¥è‡ªç”Ÿäº§ç¯å¢ƒçš„å®æˆ˜ç»éªŒï¼Œç»è¿‡éªŒè¯å¯ä»¥å°†Redisçš„ååé‡ä»æ¯ç§’10ä¸‡æå‡åˆ°20ä¸‡ç”šè‡³æ›´é«˜ã€‚ä¸åŒäºå¸¸è§çš„"å¢å¤§å†…å­˜"æˆ–"å‡çº§ç¡¬ä»¶"å»ºè®®ï¼Œè¿™äº›æŠ€å·§èšç„¦äºé…ç½®è°ƒä¼˜ã€æ•°æ®ç»“æ„é€‰æ‹©å’Œç³»ç»Ÿçº§åä½œï¼Œå¸®åŠ©ä½ åœ¨ä¸å¢åŠ èµ„æºçš„æƒ…å†µä¸‹å®ç°æ€§èƒ½é£è·ƒã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. Pipelineä¸Multi-Execçš„ç²¾å‡†æ§åˆ¶</h3>
<p><strong>é—®é¢˜èƒŒæ™¯</strong><br/>
å¤§å¤šæ•°å¼€å‘è€…çŸ¥é“Pipelineèƒ½å‡å°‘ç½‘ç»œå¾€è¿”ï¼ˆRTTï¼‰ï¼Œä½†ç›²ç›®å †ç§¯å‘½ä»¤ä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>å†…å­˜å ç”¨æ¿€å¢ï¼ˆå®¢æˆ·ç«¯ç¼“å†²åŒºæº¢å‡ºï¼‰</li>
<li>Rediså•çº¿ç¨‹é˜»å¡ï¼ˆè¶…è¿‡<code>client-output-buffer-limit</code>ï¼‰</li>
</ul>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong></p>
<ul>
<li><strong>åŠ¨æ€åˆ†æ‰¹æ¬¡</strong>ï¼šæ ¹æ®<code>INFO memory</code>ä¸­çš„<code>mem_clients_normal</code>ç›‘æ§å®¢æˆ·ç«¯å†…å­˜ï¼ŒåŠ¨æ€è°ƒæ•´Pipelineæ‰¹é‡å¤§å°ï¼ˆä¾‹å¦‚æ¯æ‰¹æ¬¡100~500æ¡ï¼‰ã€‚</li>
<li><strong>æ··åˆä½¿ç”¨Multi-Exec</strong>ï¼šå¯¹éœ€è¦åŸå­æ€§çš„æ“ä½œï¼ˆå¦‚åº“å­˜æ‰£å‡ï¼‰ï¼Œå°†Pipelineä¸Multi-Execç»“åˆï¼š
<pre><code class="hljs language-bash" lang="bash">PIPELINE
GET item:1234:stock
(å…¶ä»–åªè¯»æ“ä½œ)
EXEC

MULTI
DECRBY item:1234:stock 1
(å…¶ä»–å†™æ“ä½œ)
EXEC
</code></pre>
å®æµ‹å¯é™ä½30%çš„åŸå­æ“ä½œå»¶è¿Ÿã€‚</li>
</ul>
<p><strong>åŸç†</strong>ï¼šé€šè¿‡åˆ†ç¦»è¯»å†™ç®¡é“ï¼Œå‡å°‘äº‹åŠ¡é”ç«äº‰æ—¶é—´ã€‚</p>
<hr/>
<h3 data-id="heading-4">2. Hash Sloté¢„çƒ­ä¸NUMAäº²å’Œæ€§ç»‘å®š</h3>
<p><strong>é—®é¢˜èƒŒæ™¯</strong><br/>
Redis Clusterçš„Keyåˆ†å¸ƒåœ¨16384ä¸ªHash Slotä¸­ï¼Œä½†æ–°èŠ‚ç‚¹åŠ å…¥æ—¶å¯èƒ½å‡ºç°"å†·Slot"è®¿é—®å»¶è¿Ÿé«˜çš„é—®é¢˜ã€‚æ­¤å¤–ï¼Œå¤šæ ¸æœåŠ¡å™¨ä¸ŠNUMAæ¶æ„å¯èƒ½å¯¼è‡´è·¨èŠ‚ç‚¹å†…å­˜è®¿é—®å»¶è¿Ÿã€‚</p>
<p><strong>ä¼˜åŒ–æ­¥éª¤</strong></p>
<ol>
<li><strong>Sloté¢„çƒ­è„šæœ¬</strong>ï¼šåœ¨æµé‡ä½è°·æœŸä¸»åŠ¨è®¿é—®æ‰€æœ‰Slotï¼š
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-keyword">for</span> slot=<span class="hljs-number">0</span>,<span class="hljs-number">16383</span> <span class="hljs-keyword">do</span>
    redis.call(<span class="hljs-string">"CLUSTER"</span>, <span class="hljs-string">"GETKEYSINSLOT"</span>, slot, <span class="hljs-number">1</span>)
<span class="hljs-keyword">end</span>
</code></pre>
</li>
<li><strong>NUMAç»‘å®š</strong>ï¼šä½¿ç”¨<code>numactl</code>å°†Redisè¿›ç¨‹ç»‘å®šåˆ°åŒä¸€NUMAèŠ‚ç‚¹ï¼š
<pre><code class="hljs language-bash" lang="bash">numactl --cpunodebind=0 --membind=0 redis-server /etc/redis.conf
</code></pre>
</li>
<li><strong>å…³é—­é€æ˜å¤§é¡µï¼ˆTHPï¼‰</strong>ï¼šåœ¨Linuxä¸­æ‰§è¡Œï¼š
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> never &gt; /sys/kernel/mm/transparent_hugepage/enabled
</code></pre>
</li>
</ol>
<p>*<em>æ•ˆæœå¯¹æ¯”</em>ï¼šæŸç”µå•†å¹³å°å®æµ‹é™ä½P99å»¶è¿Ÿä»8msåˆ°3msã€‚</p>
<hr/>
<h3 data-id="heading-5">3. Lazy Freeä¸å¼‚æ­¥åˆ é™¤çš„é™·é˜±è§„é¿</h3>
<p>Redisçš„æƒ°æ€§åˆ é™¤ï¼ˆLazy Freeï¼‰è™½ç„¶é¿å…äº†ä¸»çº¿ç¨‹é˜»å¡ï¼Œä½†åœ¨ä»¥ä¸‹åœºæ™¯åè€Œä¼šæ‹–ç´¯æ€§èƒ½ï¼š</p>
<ul>
<li><strong>çƒ­ç‚¹Keyåˆ é™¤é£æš´</strong>ï¼ˆå¦‚å¤§æ‰¹é‡æ·˜æ±°Keyæ—¶è§¦å‘å¹¶å‘é‡Šæ”¾ï¼‰</li>
<li><strong>å†…å­˜ç¢ç‰‡åŒ–åŠ å‰§</strong>ï¼ˆå¼‚æ­¥é‡Šæ”¾å¯¼è‡´å†…å­˜æ— æ³•åŠæ—¶åˆå¹¶ï¼‰</li>
</ul>
<p><strong>é’ˆå¯¹æ€§é…ç½®è°ƒæ•´</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Redis.confå…³é”®å‚æ•°ï¼š</span>
lazyfree-lazy-eviction no    <span class="hljs-comment"># å†…å­˜æ»¡æ—¶åŒæ­¥æ·˜æ±°</span>
lazyfree-lazy-expire no      <span class="hljs-comment"># Keyè¿‡æœŸåŒæ­¥åˆ é™¤</span>
lazyfree-lazy-server-del yes <span class="hljs-comment"># DELå‘½ä»¤å¼‚æ­¥æ‰§è¡Œ</span>

<span class="hljs-comment"># Luaè„šæœ¬å¼ºåˆ¶åŒæ­¥åˆ é™¤ï¼š</span>
redis.call("DEL", KEYS<span class="hljs-section">[1]</span>, "SYNC")
</code></pre>
<hr/>
<h3 data-id="heading-6">4. HyperLogLogçš„æ¦‚ç‡ç»“æ„è°ƒæ•´</h3>
<p>å½“ä½¿ç”¨HLLåšUVç»Ÿè®¡æ—¶ï¼Œé»˜è®¤ç²¾åº¦ï¼ˆ16384ä¸ªå¯„å­˜å™¨ï¼‰å¯èƒ½è¿‡åº¦æ¶ˆè€—å†…å­˜ã€‚é€šè¿‡è°ƒæ•´ç¨€ç–/ç¨ å¯†è¡¨ç¤ºè½¬æ¢é˜ˆå€¼æ¥ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- åœ¨åˆå§‹åŒ–HLLæ—¶æ˜¾å¼æŒ‡å®šç²¾åº¦ï¼š</span>
redis.call(<span class="hljs-string">"PFADD"</span>, <span class="hljs-string">"user_uv_202405"</span>, <span class="hljs-string">"user1"</span>, <span class="hljs-string">"SPARSE"</span>, <span class="hljs-string">"MAXREGISTERS"</span>, <span class="hljs-string">"8192"</span>)
</code></pre>




















<table><thead><tr><th>Item</th><th>Default</th><th>Optimized</th></tr></thead><tbody><tr><td>Memory Usage</td><td>~12KB</td><td>~6KB</td></tr><tr><td>Error Rate</td><td>0.81%</td><td>â‰ˆ1.5%</td></tr></tbody></table>
<p>é€‚åˆå…è®¸é€‚åº¦è¯¯å·®çš„åœºæ™¯ï¼ˆå¦‚æ´»åŠ¨é¡µé¢UVç»Ÿè®¡ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-7">5. TLSåŠ å¯†è¿æ¥çš„æ€§èƒ½é»‘æ´ä¸è§£å†³æ–¹æ¡ˆ</h3>
<p>å¯ç”¨TLSåæ€§èƒ½ä¸‹é™50%ï¼Ÿé—®é¢˜å‡ºåœ¨ï¼š</p>
<ul>
<li>OpenSSLçš„é»˜è®¤é…ç½®æœªå¯ç”¨ç¡¬ä»¶åŠ é€ŸæŒ‡ä»¤é›†ï¼ˆå¦‚AES-NIï¼‰</li>
<li>TCP_NODELAYæœªå¼€å¯å¯¼è‡´å°åŒ…å»¶è¿Ÿ</li>
</ul>
<p><strong>ç»ˆæä¼˜åŒ–æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-nginx" lang="nginx"># Nginxåå‘ä»£ç†å±‚é…ç½®ï¼š
ssl_early_data on;
ssl_session_tickets on;
ssl_buffer_size 4k; 

# RedisæœåŠ¡ç«¯ï¼š
tls-port 6379
tls-ciphers 'ECDHE-RSA-AES256-GCM-SHA384:+AES256'
tls-prefer-server-ciphers yes

# Linuxå†…æ ¸è°ƒä¼˜ï¼š
echo 'net.ipv4.tcp_fastopen=3' &gt;&gt; /etc/sysctl.conf
</code></pre>
<p>å®æµ‹ååé‡ä»7ä¸‡QPSæ¢å¤åˆ°13ä¸‡QPSï¼</p>
<hr/>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>ä»Pipelineçš„åŠ¨æ€æ‰¹å¤„ç†åˆ°NUMAäº²å’Œæ€§ç»‘å®šï¼Œå†åˆ°TLSè¿æ¥çš„æŒ‡ä»¤é›†ä¼˜åŒ–â€”â€”è¿™äº›çœ‹ä¼¼è¾¹ç¼˜çš„æŠ€æœ¯ç‚¹ç»„åˆèµ·æ¥ï¼Œå¾€å¾€èƒ½å¸¦æ¥æ„æƒ³ä¸åˆ°çš„æ€§èƒ½çªç ´ã€‚å…³é”®åœ¨äºç†è§£Redisçš„å•çº¿ç¨‹æ¨¡å‹ä¸ç°ä»£ç¡¬ä»¶æ¶æ„ä¹‹é—´çš„ç›¸äº’ä½œç”¨å…³ç³»ã€‚å»ºè®®è¯»è€…å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯è¿™äº›å‚æ•°è°ƒæ•´æ•ˆæœï¼Œå†é€æ­¥åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒã€‚çœŸæ­£çš„æ€§èƒ½ä¼˜åŒ–ä¸æ˜¯å †ç Œå‚æ•°çš„è‰ºæœ¯ï¼Œè€Œæ˜¯å¯¹ç³»ç»Ÿè¿è¡Œæœºç†çš„æ·±åº¦æŒæ§ä¸å®è·µæ™ºæ…§çš„ç»“åˆä½“ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®¾è®¡æ¨¡å¼ -- é€‚é…å™¨ & ç­–ç•¥æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7590915294446485531</link>    <guid>https://juejin.cn/post/7590915294446485531</guid>    <pubDate>2026-01-03T22:57:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590915294446485531" data-draft-id="7590608345923485722" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¾è®¡æ¨¡å¼ -- é€‚é…å™¨ &amp; ç­–ç•¥æ¨¡å¼"/> <meta itemprop="keywords" content="Python,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2026-01-03T22:57:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸åŠ ç³–435"/> <meta itemprop="url" content="https://juejin.cn/user/1464990724787549"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¾è®¡æ¨¡å¼ -- é€‚é…å™¨ &amp; ç­–ç•¥æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1464990724787549/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸åŠ ç³–435
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T22:57:00.000Z" title="Sat Jan 03 2026 22:57:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜ï¼šAPIæ¥å£ä¸ç»Ÿä¸€</h2>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼š<br/>
å‡è®¾ä½ è¦å‘é€é‚®ä»¶ï¼Œä½†ä¸åŒæœåŠ¡å•†è°ƒç”¨æ–¹å¼ä¸åŒã€‚æ¯”å¦‚å‘é€é‚®ä»¶ï¼ŒSendGridã€Mailgunã€Microsoft Graph éƒ½èƒ½å‘ï¼Œä½†è°ƒç”¨æ–¹å¼å¤©å·®åœ°åˆ«</p>
<p>SendGrid çš„è°ƒç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># SendGrid SDKçš„è°ƒç”¨æ–¹å¼</span>
<span class="hljs-attr">sg</span> = sendgrid.SendGridAPIClient(api_key=<span class="hljs-string">'SG.xxx'</span>)
<span class="hljs-attr">message</span> = Mail(
    <span class="hljs-attr">from_email</span>=<span class="hljs-string">'from@example.com'</span>,
    <span class="hljs-attr">to_emails</span>=<span class="hljs-string">'to@example.com'</span>,
    <span class="hljs-attr">subject</span>=<span class="hljs-string">'Hello'</span>,
    <span class="hljs-attr">plain_text_content</span>=<span class="hljs-string">'World'</span>
)
<span class="hljs-attr">response</span> = sg.send(message)
</code></pre>
<p>Mailgun çš„è°ƒç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># Mailgun SDKçš„è°ƒç”¨æ–¹å¼</span>
requests.post(
    <span class="hljs-string">"https://api.mailgun.net/v3/your-domain/messages"</span>,
    auth=(<span class="hljs-string">"api"</span>, <span class="hljs-string">"your-api-key"</span>),
    data={
        <span class="hljs-string">"from"</span>: <span class="hljs-string">"from@example.com"</span>,
        <span class="hljs-string">"to"</span>: <span class="hljs-string">"to@example.com"</span>,
        <span class="hljs-string">"subject"</span>: <span class="hljs-string">"Hello"</span>,
        <span class="hljs-string">"text"</span>: <span class="hljs-string">"World"</span>
    }
)
</code></pre>
<p>é—®é¢˜ï¼šçœ‹åˆ°åŒºåˆ«äº†å—ï¼Ÿå‚æ•°åä¸ä¸€æ ·ï¼ˆ<code>to_emails</code> vs <code>to</code>ï¼‰ï¼Œè°ƒç”¨æ–¹å¼ä¸ä¸€æ ·ï¼ˆå¯¹è±¡æ–¹æ³• vs HTTPè¯·æ±‚ï¼‰ï¼Œè¿”å›æ ¼å¼ä¹Ÿä¸ä¸€æ ·ã€‚</p>
<p><strong>å¦‚æœç›´æ¥åœ¨ä¸šåŠ¡ä»£ç ä¸­è°ƒç”¨è¿™äº›SDKï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è®¢å•æœåŠ¡ä¸­</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_order_confirmation</span>(<span class="hljs-params">order_id</span>):
    sg = sendgrid.SendGridAPIClient(api_key=<span class="hljs-string">'SG.xxx'</span>)
    message = Mail(...)
    sg.send(message)

<span class="hljs-comment"># ç”¨æˆ·æœåŠ¡ä¸­</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_welcome_email</span>(<span class="hljs-params">user_email</span>):
    sg = sendgrid.SendGridAPIClient(api_key=<span class="hljs-string">'SG.xxx'</span>)
    message = Mail(...)
    sg.send(message)

<span class="hljs-comment"># ... è¿˜æœ‰20ä¸ªåœ°æ–¹éƒ½åœ¨è°ƒç”¨SendGrid</span>
</code></pre>
<p>å¦‚æœè¦æ¢æˆMailgunï¼Œå¾—æŠŠæ‰€æœ‰åœ°æ–¹éƒ½æ”¹ä¸€éã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å°è£…ä¸‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å°è£…æˆä¸€ä¸ªå‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_email</span>(<span class="hljs-params">to, subject, content, provider=<span class="hljs-string">'sendgrid'</span></span>):
    <span class="hljs-keyword">if</span> provider == <span class="hljs-string">'sendgrid'</span>:
        sg = sendgrid.SendGridAPIClient(api_key=<span class="hljs-string">'SG.xxx'</span>)
        message = Mail(from_email=..., to_emails=to, ...)
        sg.send(message)
    <span class="hljs-keyword">elif</span> provider == <span class="hljs-string">'mailgun'</span>:
        requests.post(<span class="hljs-string">"https://api.mailgun.net/v3/..."</span>, 
                     auth=(<span class="hljs-string">"api"</span>, <span class="hljs-string">"..."</span>), 
                     data={<span class="hljs-string">"from"</span>: ..., <span class="hljs-string">"to"</span>: to, ...})
    <span class="hljs-keyword">elif</span> provider == <span class="hljs-string">'microsoft_graph'</span>:
        <span class="hljs-comment"># åˆæ˜¯å¦ä¸€å¥—ä»£ç </span>
        ...

<span class="hljs-comment"># ä¸šåŠ¡ä»£ç å°±å¯ä»¥è¿™æ ·ç”¨äº†</span>
send_email(<span class="hljs-string">"user@example.com"</span>, <span class="hljs-string">"Hello"</span>, <span class="hljs-string">"World"</span>, provider=<span class="hljs-string">'sendgrid'</span>)
</code></pre>
<p>å°è£…åç¡®å®å¥½å¤šäº†ï¼Œä¸šåŠ¡ä»£ç æ¸…çˆ½äº†ã€‚ä½†æ˜¯è¿™ç§å°è£…æ–¹å¼ä¾ç„¶æœ‰é—®é¢˜ã€‚</p>
<p><strong>å‡½æ•°è¶Šæ¥è¶Šé•¿</strong>ï¼šæ–°å¢æœåŠ¡å•†è¦åœ¨è¿™ä¸ªå‡½æ•°ä¸­ç»§ç»­åŠ ä¸€ä¸ªåˆ†æ”¯ï¼Œä»£ç è¶Šæ¥è¶Šé•¿ã€‚æ‰¾ä¸ªæŸä¸ªç‰¹å®šçš„æœåŠ¡å•†è¦åœ¨è¿™ä¸ªå¾ˆé•¿çš„å‡½æ•°ä¸­æ‰¾ï¼Œå®¹æ˜“æ”¹é”™ã€‚æ€»è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä¸å¥½ç»´æŠ¤ã€‚<br/>
å½“ç„¶ï¼Œå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ŒæŠŠä¸åŒæœåŠ¡å•†å°è£…åˆ°ä¸åŒçš„ç±»ä¸­ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SendGridEmail</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">self, to, subject, content</span>):
        <span class="hljs-comment"># SendGrid çš„ä»£ç </span>
        ...

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MailgunEmail</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">self, to, subject, content</span>):
        <span class="hljs-comment"># Mailgun çš„ä»£ç </span>
        ...

</code></pre>
<p>å¥½å¤šäº†ï¼Œ<strong>ä½†æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸ªå…³é”®é—®é¢˜</strong>ï¼š<strong>æ¥å£ä¸ç»Ÿä¸€</strong>ï¼<br/>
çœ‹å›æœ€å¼€å§‹çš„é—®é¢˜ï¼š</p>
<ul>
<li>SendGrid ç”¨ <code>to_emails</code>ï¼ŒMailgun ç”¨ <code>to</code></li>
<li>SendGrid ç”¨ <code>plain_text_content</code>ï¼ŒMailgun ç”¨ <code>text</code></li>
</ul>
<p><strong>å¦‚æœåªæ˜¯ç®€å•å°è£…åˆ°ç±»é‡Œï¼Œæ¥å£è¿˜æ˜¯ä¸ç»Ÿä¸€</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¯ä¸ªæœåŠ¡å•†çš„æ¥å£ä¸ä¸€æ ·ï¼Œä¸šåŠ¡ä»£ç è¿˜æ˜¯è¦åˆ¤æ–­ï¼Œè€Œä¸”è°ƒç”¨æ–¹å¼è¿˜ä¸ä¸€æ ·!</span>
<span class="hljs-keyword">if</span> provider == <span class="hljs-string">'sendgrid'</span>:
    email = SendGridEmail()
    email.send(to_emails=to, subject=subject, plain_text_content=content)  <span class="hljs-comment"># å‚æ•°åä¸ä¸€æ ·</span>
<span class="hljs-keyword">elif</span> provider == <span class="hljs-string">'mailgun'</span>:
    email = MailgunEmail()
    email.send(to=to, subject=subject, text=content)  <span class="hljs-comment"># å‚æ•°åä¸ä¸€æ ·</span>
</code></pre>
<p>é€‚é…å™¨æ¨¡å¼çš„ä½œç”¨**ï¼š<strong>ç»Ÿä¸€æ¥å£</strong>
æˆ‘ä»¬æƒ³è¦ä¸šåŠ¡ä»£ç åªå…³å¿ƒ"å‘é‚®ä»¶"è¿™ä¸ªåŠŸèƒ½ï¼Œä¸å…³å¿ƒç”¨å“ªä¸ªæœåŠ¡å•†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸šåŠ¡ä»£ç åªéœ€è¦è¿™æ ·å†™ï¼Œä¸ç®¡ç”¨å“ªä¸ªæœåŠ¡å•†</span>
manager.send_email(
    to=<span class="hljs-string">"user@example.com"</span>,
    subject=<span class="hljs-string">"Hello"</span>,
    content=<span class="hljs-string">"World"</span>
)

<span class="hljs-comment"># åˆ‡æ¢æœåŠ¡å•†ï¼Ÿæ”¹é…ç½®æ–‡ä»¶å³å¯ï¼Œæ— éœ€ä¿®æ”¹å‘é‚®ä»¶ä»£ç </span>
</code></pre>
<h2 data-id="heading-1">é€‚é…å™¨æ¨¡å¼</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯é€‚é…å™¨æ¨¡å¼ï¼Ÿ</h3>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š<strong>è®©æ‰€æœ‰æœåŠ¡å•†çš„ç±»å®ç°åŒä¸€ä¸ªæ¥å£</strong>ã€‚</p>
<p><strong>ç®€å•è¯´</strong>ï¼šé€‚é…å™¨æ¨¡å¼å°±æ˜¯å®šä¹‰ä¸€ä¸ª<strong>ç»Ÿä¸€çš„æ¥å£</strong>ï¼ˆæŠ½è±¡ç±»ï¼‰ï¼Œè®©ä¸åŒçš„å®ç°ç±»éƒ½éµå¾ªè¿™ä¸ªæ¥å£ï¼Œè¿™æ ·ä¸šåŠ¡ä»£ç å°±å¯ä»¥ç»Ÿä¸€è°ƒç”¨ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“æ˜¯å“ªä¸ªå®ç°ã€‚</p>
<p><strong>ç”Ÿæ´»ä¸­çš„ä¾‹å­</strong>ï¼šä¸­å›½æ‰‹æœºæ’å¤´æ’ä¸è¿›æ¬§æ´²æ’åº§ï¼Œä¹°ä¸ªè½¬æ¢æ’å¤´å°±è¡Œäº†ã€‚è½¬æ¢æ’å¤´åšäº†ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>ä¸æ”¹å˜ä½ çš„æ‰‹æœº</li>
<li>ä¸æ”¹å˜æ¬§æ´²çš„æ’åº§</li>
<li>åªæ˜¯åœ¨ä¸­é—´åšäº†ä¸ª"ç¿»è¯‘"ï¼Œç»Ÿä¸€äº†æ¥å£</li>
</ul>
<p><strong>æŠ½è±¡ç±»</strong>ï¼ˆAbstract Classï¼‰å°±æ˜¯å®šä¹‰äº†æ¥å£ä½†è‡ªå·±ä¸å®ç°å…·ä½“åŠŸèƒ½çš„ç±»ã€‚å®ƒå°±åƒä¸€ä¸ª"æ¨¡æ¿"ï¼Œå‘Šè¯‰å­ç±»"ä½ å¿…é¡»å®ç°è¿™äº›æ–¹æ³•"ã€‚<br/>
åœ¨ Python ä¸­ï¼Œä½¿ç”¨ <code>ABC</code>ï¼ˆAbstract Base Classï¼‰å’Œ <code>@abstractmethod</code> æ¥å®šä¹‰æŠ½è±¡ç±»ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> abc <span class="hljs-keyword">import</span> ABC, abstractmethod

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseEmailAdapter</span>(<span class="hljs-title class_ inherited__">ABC</span>):  <span class="hljs-comment"># ABC è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»</span>
<span class="hljs-meta">    @abstractmethod  </span><span class="hljs-comment"># è¿™ä¸ªè£…é¥°å™¨è¡¨ç¤ºå­ç±»å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">self, to, subject, content</span>):
        <span class="hljs-keyword">pass</span>  <span class="hljs-comment"># æŠ½è±¡æ–¹æ³•ä¸å†™å…·ä½“å®ç°ï¼Œåªæ˜¯å®šä¹‰æ¥å£</span>
</code></pre>
<h3 data-id="heading-3">é€‚é…å™¨æ¨¡å¼çš„å®ç°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. å…ˆå®šä¹‰ç»Ÿä¸€æ¥å£ï¼ˆæŠ½è±¡ç±»ï¼‰</span>
<span class="hljs-keyword">from</span> abc <span class="hljs-keyword">import</span> ABC, abstractmethod

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseEmailAdapter</span>(<span class="hljs-title class_ inherited__">ABC</span>):  <span class="hljs-comment"># æŠ½è±¡åŸºç±»</span>
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">self, to, subject, content</span>):  <span class="hljs-comment"># ç»Ÿä¸€çš„å‚æ•°</span>
        <span class="hljs-string">"""å­ç±»å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•"""</span>
        <span class="hljs-keyword">pass</span>

<span class="hljs-comment"># 2. æ¯ä¸ªæœåŠ¡å•†å®ç°è¿™ä¸ªæ¥å£ï¼ˆç»§æ‰¿æŠ½è±¡ç±»ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SendGridAdapter</span>(<span class="hljs-title class_ inherited__">BaseEmailAdapter</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">self, to, subject, content</span>):  <span class="hljs-comment"># å¿…é¡»å’Œæ¥å£ä¸€æ ·</span>
        <span class="hljs-comment"># SendGrid çš„ä»£ç ï¼Œå†…éƒ¨è½¬æ¢æˆ SendGrid çš„è°ƒç”¨æ–¹å¼</span>
        sg = sendgrid.SendGridAPIClient(api_key=self.api_key)
        message = Mail(
            from_email=self.from_email,
            to_emails=to,  <span class="hljs-comment"># ç»Ÿä¸€æ¥å£ç”¨ toï¼Œå†…éƒ¨è½¬æ¢æˆ SendGrid çš„ to_emails</span>
            subject=subject,
            plain_text_content=content  <span class="hljs-comment"># ç»Ÿä¸€æ¥å£ç”¨ contentï¼Œå†…éƒ¨è½¬æ¢æˆ plain_text_content</span>
        )
        <span class="hljs-keyword">return</span> sg.send(message)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MailgunAdapter</span>(<span class="hljs-title class_ inherited__">BaseEmailAdapter</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">self, to, subject, content</span>):  <span class="hljs-comment"># å¿…é¡»å’Œæ¥å£ä¸€æ ·</span>
        <span class="hljs-comment"># Mailgun çš„ä»£ç ï¼Œå†…éƒ¨è½¬æ¢æˆ Mailgun çš„è°ƒç”¨æ–¹å¼</span>
        requests.post(
            <span class="hljs-string">"https://api.mailgun.net/v3/your-domain/messages"</span>,
            auth=(<span class="hljs-string">"api"</span>, self.api_key),
            data={
                <span class="hljs-string">"from"</span>: self.from_email,
                <span class="hljs-string">"to"</span>: to,  <span class="hljs-comment"># ç»Ÿä¸€æ¥å£ç”¨ toï¼ŒMailgun ä¹Ÿç”¨ toï¼Œç›´æ¥ä¼ </span>
                <span class="hljs-string">"subject"</span>: subject,
                <span class="hljs-string">"text"</span>: content  <span class="hljs-comment"># ç»Ÿä¸€æ¥å£ç”¨ contentï¼Œå†…éƒ¨è½¬æ¢æˆ Mailgun çš„ text</span>
            }
        )



<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_adapter</span>(<span class="hljs-params">provider</span>):
    <span class="hljs-keyword">if</span> provider == <span class="hljs-string">'sendgrid'</span>:
        <span class="hljs-keyword">return</span> SendGridAdapter(...)
    <span class="hljs-keyword">elif</span> provider == <span class="hljs-string">'mailgun'</span>:
        <span class="hljs-keyword">return</span> MailgunAdapter(...)
<span class="hljs-comment"># 3. ä¸šåŠ¡ä»£ç åªéœ€è¦ä¾èµ–æ¥å£ï¼Œä¸éœ€è¦çŸ¥é“å…·ä½“æ˜¯å“ªä¸ªæœåŠ¡å•†</span>
adapter = create_adapter(provider)  <span class="hljs-comment"># æ ¹æ®é…ç½®åˆ›å»ºé€‚é…å™¨ï¼ˆè¿™é‡Œåªæœ‰ä¸€æ¬¡ if-elseï¼‰</span>
adapter.send(to, subject, content)  <span class="hljs-comment"># ç»Ÿä¸€è°ƒç”¨ï¼Œå‚æ•°éƒ½ä¸€æ ·ï¼</span>
</code></pre>
<h2 data-id="heading-4">ç­–ç•¥æ¨¡å¼ï¼šä¼˜åŒ–é€‰æ‹©é€»è¾‘</h2>
<h3 data-id="heading-5">æ ¸å¿ƒæ€æƒ³</h3>
<p><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼šå°è£…é€‰æ‹©é€»è¾‘ï¼Œæ ¹æ®æƒ…å†µé€‰æ‹©ä½¿ç”¨å“ªä¸ªç­–ç•¥</p>
<h3 data-id="heading-6">ä¸¤ç§å®ç°æ–¹å¼</h3>
<p><strong>æ–¹å¼1ï¼šif-elseï¼ˆç®€å•å®ç°ï¼‰</strong>
æ ¹æ® <code>provider</code> é€‰æ‹©ä¸åŒçš„é€‚é…å™¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_adapter</span>(<span class="hljs-params">provider</span>):
    <span class="hljs-keyword">if</span> provider == <span class="hljs-string">'sendgrid'</span>:
        <span class="hljs-keyword">return</span> SendGridAdapter(...)
    <span class="hljs-keyword">elif</span> provider == <span class="hljs-string">'mailgun'</span>:
        <span class="hljs-keyword">return</span> MailgunAdapter(...)
    <span class="hljs-comment"># æ·»åŠ æ–°æœåŠ¡å•†ï¼Ÿåˆè¦åŠ ä¸€ä¸ª elif</span>
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šæ¯æ¬¡æ·»åŠ æ–°æœåŠ¡å•†ï¼Œéƒ½è¦æ”¹è¿™ä¸ªå‡½æ•°ï¼ŒåŠ æ–°çš„ <code>elif</code>ã€‚</p>
<p><strong>æ–¹å¼2ï¼šå­—å…¸æ˜ å°„ï¼ˆä¼˜é›…å®ç°ï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailManager</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># ç­–ç•¥æ˜ å°„ï¼šæŠŠæœåŠ¡å•†åç§°æ˜ å°„åˆ°å¯¹åº”çš„é€‚é…å™¨ç±»</span>
        self._adapter_classes = {
            <span class="hljs-string">'sendgrid'</span>: SendGridAdapter,
            <span class="hljs-string">'mailgun'</span>: MailgunAdapter,
            <span class="hljs-string">'microsoft_graph'</span>: MicrosoftGraphAdapter
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_create_adapter</span>(<span class="hljs-params">self, provider</span>):
        <span class="hljs-comment"># ä»å­—å…¸ä¸­è·å–å¯¹åº”çš„é€‚é…å™¨ç±»</span>
        adapter_class = self._adapter_classes.get(provider)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> adapter_class:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"ä¸æ”¯æŒçš„é‚®ä»¶æœåŠ¡å•†: <span class="hljs-subst">{provider}</span>"</span>)
        <span class="hljs-keyword">return</span> adapter_class(api_key=..., from_email=...)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_email</span>(<span class="hljs-params">self, to, subject, content</span>):
        <span class="hljs-comment"># 1. ä»é…ç½®è·å–æœåŠ¡å•†</span>
        provider = self._get_provider_from_config()
        
        <span class="hljs-comment"># 2. åˆ›å»ºé€‚é…å™¨ï¼ˆç­–ç•¥æ¨¡å¼ï¼šæ ¹æ®é…ç½®é€‰æ‹©ï¼‰</span>
        adapter = self._create_adapter(provider)
        
        <span class="hljs-comment"># 3. è°ƒç”¨é€‚é…å™¨çš„ send æ–¹æ³•ï¼ˆé€‚é…å™¨æ¨¡å¼ï¼šç»Ÿä¸€æ¥å£ï¼‰</span>
        <span class="hljs-keyword">return</span> adapter.send(to, subject, content)
</code></pre>
<h2 data-id="heading-7">ä¸¤ç§æ¨¡å¼çš„åä½œ</h2>
<h3 data-id="heading-8">å®Œæ•´æµç¨‹</h3>
<pre><code class="hljs language-scss" lang="scss">ä¸šåŠ¡ä»£ç 
  â†“
EmailManager<span class="hljs-selector-class">.send_email</span>()  (ç­–ç•¥æ¨¡å¼ï¼šé€‰æ‹©é€‚é…å™¨)
  â†“
<span class="hljs-built_in">_create_adapter</span>(provider)  (ç­–ç•¥æ¨¡å¼ï¼šæ ¹æ®é…ç½®é€‰æ‹©)
  â†“
SendGridAdapter / MailgunAdapter  (é€‚é…å™¨æ¨¡å¼ï¼šç»Ÿä¸€æ¥å£)
  â†“
adapter<span class="hljs-selector-class">.send</span>()            (é€‚é…å™¨æ¨¡å¼ï¼šç»Ÿä¸€è°ƒç”¨)
  â†“
SendGrid API / Mailgun API (ç¬¬ä¸‰æ–¹API)
</code></pre>
<h2 data-id="heading-9">æ€»ç»“</h2>
<h3 data-id="heading-10">é€‚é…å™¨æ¨¡å¼</h3>
<p><strong>è§£å†³çš„é—®é¢˜</strong>ï¼šæ¥å£ä¸ç»Ÿä¸€<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå®šä¹‰ç»Ÿä¸€æ¥å£ï¼ˆæŠ½è±¡ç±»ï¼‰ï¼Œæ‰€æœ‰é€‚é…å™¨éƒ½å®ç°ç›¸åŒçš„æ¥å£<br/>
<strong>ä»·å€¼</strong>ï¼šä¸šåŠ¡ä»£ç å¯ä»¥ç»Ÿä¸€è°ƒç”¨ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“å®ç°</p>
<h3 data-id="heading-11">ç­–ç•¥æ¨¡å¼</h3>
<p><strong>æ ¸å¿ƒ</strong>ï¼šå°è£…é€‰æ‹©é€»è¾‘ï¼Œæ ¹æ®æƒ…å†µé€‰æ‹©ä½¿ç”¨å“ªä¸ªç­–ç•¥</p>
<p><strong>åæ€</strong></p>
<p>äººç”Ÿæ€ä¹ˆè¿‡éƒ½å¯ä»¥ã€‚<br/>
ä½ æƒ³è¦æ€æ ·çš„äººç”Ÿï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WebRTC å…¥é—¨ï¼šä¸€åˆ†é’Ÿç†è§£ä¼šè®®ç³»ç»Ÿçš„ä¸‰ç§æ¶æ„ï¼ˆMesh/SFU/MCUï¼‰]]></title>    <link>https://juejin.cn/post/7590929624742903858</link>    <guid>https://juejin.cn/post/7590929624742903858</guid>    <pubDate>2026-01-04T00:18:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590929624742903858" data-draft-id="7590849961727377435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WebRTC å…¥é—¨ï¼šä¸€åˆ†é’Ÿç†è§£ä¼šè®®ç³»ç»Ÿçš„ä¸‰ç§æ¶æ„ï¼ˆMesh/SFU/MCUï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,WebRTC"/> <meta itemprop="datePublished" content="2026-01-04T00:18:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰å_"/> <meta itemprop="url" content="https://juejin.cn/user/1521379822805176"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WebRTC å…¥é—¨ï¼šä¸€åˆ†é’Ÿç†è§£ä¼šè®®ç³»ç»Ÿçš„ä¸‰ç§æ¶æ„ï¼ˆMesh/SFU/MCUï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379822805176/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰å_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T00:18:52.000Z" title="Sun Jan 04 2026 00:18:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ WebRTC ä¸­ï¼Œä¸¤ç‚¹ä¹‹é—´çš„ P2P é€šè¯æ˜¯åŸºç¡€ï¼Œä½†å½“å‚ä¼šäººæ•°å¢åŠ åˆ° 3 äººã€4 äººç”šè‡³æ›´å¤šæ—¶ï¼Œå•çº¯çš„ç‚¹å¯¹ç‚¹è¿æ¥å°±ä¼šé¢ä¸´æŒ‘æˆ˜ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥æµ…å‡ºåœ°äº†è§£ WebRTC ä¼šè®®çš„ä¸‰ç§ä¸»æµæ¶æ„ï¼š<strong>Mesh</strong>ã€<strong>SFU</strong> å’Œ <strong>MCU</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. Mesh æ¶æ„ï¼šå®Œå…¨äº’è”çš„ç½‘çŠ¶ç»“æ„</h2>
<p>è¿™æ˜¯æœ€ç›´è§‚ã€ä¹Ÿæ˜¯æœ€åŸºç¡€çš„æ¶æ„å½¢å¼ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒåŸç†</h3>
<p>å‡è®¾æœ‰ Aã€Bã€Cã€D å››ä¸ªäººéœ€è¦å‚ä¼šã€‚åœ¨ WebRTC ä»…æ”¯æŒ P2P çš„å‰æä¸‹ï¼Œä¸ºäº†è®©æ‰€æœ‰äººéƒ½èƒ½äº’é€šï¼Œæ¯ä¸ªå®¢æˆ·ç«¯éƒ½å¿…é¡»å’Œå…¶ä½™æ‰€æœ‰äººå»ºç«‹è¿æ¥ã€‚</p>
<ul>
<li><strong>A çš„è§†è§’</strong>ï¼šA å¿…é¡»åˆ†åˆ«å’Œ Bã€Cã€D å»ºç«‹å…³è”ï¼Œå½¢æˆ A-Bã€A-Cã€A-D ä¸‰æ¡é€šè·¯ã€‚åªæœ‰è¿™æ ·ï¼ŒA æ‰èƒ½æŠŠè§†é¢‘ä¼ ç»™ä»–ä»¬ï¼Œå¹¶æ¥æ”¶ä»–ä»¬çš„è§†é¢‘ã€‚</li>
<li><strong>B çš„è§†è§’</strong>ï¼šåŒç†ï¼ŒB ä¹Ÿè¦å’Œ Aã€Cã€D å»ºç«‹å…³è”ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e86225d7cd5c4fb2b9c58c50cb510117~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y2BXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768090732&amp;x-signature=jo8UPPTnqmw4dqGqlOSVksJ%2Bptk%3D" alt="image-20251228231759695.png" loading="lazy"/></p>
<h3 data-id="heading-2">ä»£ç å±‚é¢</h3>
<p>ä» WebRTC çš„æ ¸å¿ƒè½½ä½“ <strong>PeerConnection</strong> æ¥çœ‹ï¼š</p>
<ul>
<li><strong>ä¸€å¯¹å…³è”å…³ç³» = ä¸€ä¸ª PeerConnection å¯¹è±¡</strong>ã€‚</li>
<li>ä¾‹å¦‚ A-B è¿™ä¸€å…³ç³»ï¼Œåœ¨ä»£ç ä¸­å®é™…å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ª PeerConnection å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å†…éƒ¨ç»´æŠ¤ç€ A å’Œ B ä¹‹é—´çš„ <strong>SDP ä¿¡ä»¤</strong>å’Œ<strong>åª’ä½“ä¿¡æ¯</strong>ã€‚</li>
<li>å¦‚æœæ˜¯ 4 äººä¼šè®®ï¼ŒA çš„æµè§ˆå™¨é‡Œå°±éœ€è¦ç»´æŠ¤ 3 ä¸ª PeerConnection å¯¹è±¡ã€‚</li>
</ul>
<h3 data-id="heading-3">ä¼˜ç¼ºç‚¹</h3>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæœåŠ¡å™¨æˆæœ¬ä½ï¼ˆå› ä¸ºä¸éœ€è¦æœåŠ¡å™¨è½¬å‘åª’ä½“æµï¼Œåªè´Ÿè´£ä¿¡ä»¤ï¼‰ï¼Œé€»è¾‘ç®€å•ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå®¢æˆ·ç«¯<strong>å¸¦å®½å‹åŠ›æå¤§</strong>ã€‚ä¸€ä¸ª N äººä¼šè®®éœ€è¦å»ºç«‹ <strong><code>N Ã— (N âˆ’ 1) / 2</code> æ¡ P2P è¿æ¥</strong>ï¼Œ æ¯ä¸ªå®¢æˆ·ç«¯éœ€è¦ç»´æŠ¤ <strong><code>N âˆ’ 1</code> æ¡ RTCPeerConnection</strong>ï¼Œè¿æ¥æ•°é‡å‘ˆå¹³æ–¹çº§å¢é•¿ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">2. SFU æ¶æ„ï¼šé«˜æ•ˆçš„â€œä¸­å¿ƒè½¬å‘â€</h2>
<p>SFUï¼ˆSelective Forwarding Unitï¼Œé€‰æ‹©æ€§è½¬å‘å•å…ƒï¼‰æ˜¯ç›®å‰ä¸»æµçš„ä¼šè®®æ¶æ„ã€‚å®ƒå¼•å…¥äº†ä¸€ä¸ªæœåŠ¡å™¨ä½œä¸ºä¸­è½¬ç«™ï¼Œå®¢æˆ·ç«¯åªå‘ä¸€è·¯æµç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è´Ÿè´£æŠŠè¿™è·¯æµâ€œå¤åˆ¶â€å¹¶è½¬å‘ç»™å…¶ä»–å‚ä¼šè€…ã€‚è€Œè¿™ä¸ªæœåŠ¡å™¨åˆ™è¢«ç§°ä¸º <strong>SFU æœåŠ¡å™¨</strong>ã€‚</p>
<h3 data-id="heading-5">æ ¸å¿ƒåŸç†</h3>
<p>ä¸ºäº†ç†è§£ SFUï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿å‘å¿«é€’åšæ¯”å–»ï¼š</p>
<ul>
<li>
<p><strong>Mesh æ¶æ„</strong>ï¼šå°±åƒæ˜¯ä½ ï¼ˆAï¼‰è¦ç»™ Bã€Cã€D ä¸‰ä¸ªäººé€ç¤¼ç‰©ï¼Œä½ éœ€è¦äº²è‡ªå¼€è½¦è·‘ä¸‰è¶Ÿï¼Œåˆ†åˆ«æŠŠç¤¼ç‰©é€åˆ°ä»–ä»¬æ¯ä¸ªäººæ‰‹é‡Œã€‚</p>
</li>
<li>
<p><strong>SFU æ¶æ„</strong>ï¼šå°±åƒæ˜¯ä¸€ä¸ª<strong>å¿«é€’é›†æ•£ä¸­å¿ƒ</strong>ã€‚</p>
<ul>
<li>ä½ ï¼ˆAï¼‰åªéœ€è¦æŠŠç¤¼ç‰©æ‰“åŒ…å‘ç»™é›†æ•£ä¸­å¿ƒï¼ˆSFU æœåŠ¡å™¨ï¼‰ã€‚</li>
<li>é›†æ•£ä¸­å¿ƒæ”¶åˆ°åï¼Œè´Ÿè´£æŠŠä½ çš„ç¤¼ç‰©åˆ†åˆ«æ´¾é€ç»™ Bã€Cã€Dã€‚</li>
<li>åŒç†ï¼ŒBã€Cã€D ä¹Ÿåªéœ€è¦æŠŠä»–ä»¬çš„ç¤¼ç‰©å‘ç»™é›†æ•£ä¸­å¿ƒï¼Œç”±é›†æ•£ä¸­å¿ƒç»Ÿä¸€è½¬å‘ç»™ä½ ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bac68f91bdb4d5abade15b95ee732d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y2BXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768090732&amp;x-signature=xTPmchB3T0IfFXdbajN8vV0uN04%3D" alt="image-20251229083354743.png" loading="lazy"/></p>
<h3 data-id="heading-6">ä»£ç å±‚é¢</h3>
<p>åœ¨ SFU æ¶æ„ä¸­ï¼Œä»£ç é€»è¾‘å‘ç”Ÿäº†è´¨çš„å˜åŒ–ï¼š</p>
<ul>
<li>
<p><strong>1 ä¸ª PeerConnection</strong>ï¼šæ— è®ºä¼šè®®å®¤é‡Œæœ‰å¤šå°‘äººï¼Œæ¯ä¸ªå®¢æˆ·ç«¯åªéœ€è¦ç»´æŠ¤ 1 ä¸ª PeerConnection å¯¹è±¡ã€‚</p>
<blockquote>
<p>è™½ç„¶æ¯ä¸ªå®¢æˆ·ç«¯åªéœ€è¦ç»´æŠ¤ <strong>1 ä¸ª RTCPeerConnection</strong>ï¼Œä½†è¿™ä¸ªè¿æ¥ä¸­ä¼šæ‰¿è½½ <strong>å¤šè·¯ MediaStreamTrack</strong>ã€‚å› æ­¤å®¢æˆ·ç«¯çš„<strong>ä¸‹è¡Œå¸¦å®½å’Œè§£ç å‹åŠ›ï¼Œä»ç„¶éšå‚ä¼šäººæ•°çº¿æ€§å¢é•¿ï¼ˆNâˆ’1ï¼‰</strong> ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>å¯¹ç«¯æ°¸è¿œæ˜¯ SFU</strong>ï¼šè¿™ä¸ª PeerConnection çš„è¿æ¥å¯¹è±¡æ°¸è¿œæ˜¯ SFU æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯å…¶ä»–å®¢æˆ·ç«¯ã€‚</p>
</li>
</ul>
<h3 data-id="heading-7">æ¶æ„ä¼˜åŠ¿</h3>
<ol start="0">
<li><strong>å®¢æˆ·ç«¯è¿æ¥æ•°ä½</strong>ï¼šæ¯ä¸ªå®¢æˆ·ç«¯åªéœ€è¦ 1 ä¸ª PeerConnection</li>
<li><strong>ä¸Šè¡Œå¸¦å®½å‹åŠ›å°</strong>ï¼šæ— è®ºä¼šè®®ä¸­æœ‰å¤šå°‘äººï¼Œå®¢æˆ·ç«¯å§‹ç»ˆåªä¸Šä¼  <strong>1 è·¯éŸ³è§†é¢‘æµ</strong></li>
<li><strong>å»¶è¿Ÿä½</strong>ï¼šSFU åªåšåª’ä½“è½¬å‘ï¼Œä¸è§£ç ã€ä¸æ··æµï¼Œå»¶è¿Ÿæ¥è¿‘ P2P</li>
<li><strong>æ‰©å±•æ€§å¥½</strong>ï¼šæ”¯æŒå‡ åäººè§„æ¨¡çš„ä¼šè®®ï¼Œæ˜¯å½“å‰ä¸»æµè§†é¢‘ä¼šè®®ç³»ç»Ÿçš„æ ¸å¿ƒæ¶æ„</li>
</ol>
<h3 data-id="heading-8">ç¼ºç‚¹</h3>
<ol start="0">
<li><strong>ä¸‹è¡Œå¸¦å®½ä»ç„¶éšäººæ•°å¢é•¿</strong>ï¼šå®¢æˆ·ç«¯éœ€è¦æ¥æ”¶ <strong>Nâˆ’1 è·¯åª’ä½“æµ</strong>ï¼Œä¸‹è¡Œå¸¦å®½å’Œè§£ç å‹åŠ›çº¿æ€§å¢åŠ ã€‚</li>
<li><strong>æœåŠ¡å™¨å¸¦å®½æˆæœ¬é«˜</strong>ï¼šè™½ç„¶ä¸åƒ CPUï¼Œä½†å¯¹æœåŠ¡å™¨å‡ºå£å¸¦å®½è¦æ±‚å¾ˆé«˜ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-9">3. MCU æ¶æ„ï¼šå…¨èƒ½çš„â€œåª’ä½“å¤§è„‘â€</h2>
<p>MCUï¼ˆMultipoint Control Unitï¼Œå¤šç‚¹æ§åˆ¶å•å…ƒï¼‰å®ƒå¤§ä½“ä¸Šå’Œ SFU ç±»ä¼¼ï¼Œä½†å®ƒä¸ä»…ä»…æ˜¯è½¬å‘ï¼Œè¿˜ä¼šå¯¹æµè¿›è¡Œ<strong>æ··åˆï¼ˆMixingï¼‰</strong> ã€è½¬ç å’Œå¤„ç†ã€‚æœåŠ¡å™¨æŠŠæ‰€æœ‰äººçš„ç”»é¢æ‹¼åˆæˆä¸€å¼ å›¾ï¼Œç¼–ç æˆä¸€è·¯è§†é¢‘æµå‘ç»™å®¢æˆ·ç«¯ã€‚</p>
<h3 data-id="heading-10">é€‚ç”¨åœºæ™¯</h3>
<p>MCU ä¸“ä¸º<strong>åª’ä½“åœºæ™¯å¤æ‚</strong>çš„æƒ…å†µè®¾è®¡ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>å¤šç§ä¸åŒè®¾å¤‡æ¥å…¥</strong>ï¼šæ¥å…¥ä¼šè®®çš„ä¸åªæ˜¯æ‰‹æœºç”µè„‘ï¼Œè¿˜æœ‰ç›‘æ§æ‘„åƒå¤´ï¼ˆRTSPæµï¼‰ã€ç¡¬ä»¶ç»ˆç«¯ã€‚</li>
<li><strong>ç›´æ’­ä¸è½¬æ’­</strong>ï¼šéœ€è¦å°†ä¼šè®®ç”»é¢æ¨æµç»™æˆåƒä¸Šä¸‡çš„è§‚ä¼—ã€‚</li>
<li><strong>äº‘ç«¯å½•åˆ¶</strong>ï¼šéœ€è¦å¯¹ä¼šè®®è¿›è¡Œé«˜è´¨é‡å­˜æ¡£ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f321edda01a4697a07125170e3dc1b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y2BXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768090732&amp;x-signature=uqOxVS7o0Phssms6Rdz8WfiH2hw%3D" alt="image-20251230081150459.png" loading="lazy"/></p>
<h3 data-id="heading-11">MCU æœåŠ¡å™¨å†…éƒ¨åšçš„äº‹</h3>
<p>æ‰€æœ‰å‚ä¼šçš„æµé¦–å…ˆè¿›å…¥ MCU æœåŠ¡å™¨ï¼Œåœ¨è¿™é‡Œï¼Œå®ƒä»¬ä¼šç»å†æ·±åº¦çš„å¤„ç†ï¼š</p>
<ol start="0">
<li>
<p><strong>åª’ä½“è½¬ç </strong>ï¼šè¿™æ˜¯ MCU çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<ul>
<li>æ¯”å¦‚ç›‘æ§æ‘„åƒå¤´çš„è§†é¢‘æ˜¯ H.265 æ ¼å¼ï¼Œæµè§ˆå™¨ä¸æ”¯æŒï¼ŒMCU å¯ä»¥å°†å…¶å®æ—¶è½¬ç ä¸º H.264ã€‚</li>
<li>å°† RTMPã€RTSP ç­‰åè®®è½¬æ¢ä¸º WebRTC æ ‡å‡†çš„ RTC æµï¼Œæˆ–è€…å°† RTP è½¬ä¸º FLV ä¾›ç›´æ’­ä½¿ç”¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>äº‘ç«¯å½•åˆ¶</strong>ï¼šæœåŠ¡å™¨å¯ä»¥ç›´æ¥è¿‡æ»¤å¹¶å½•åˆ¶ç»è¿‡çš„æµã€‚</p>
</li>
<li>
<p><strong>æœåŠ¡ç«¯ AI æ£€æµ‹</strong>ï¼š</p>
<ul>
<li>åœ¨å¤§å‹ç›´æ’­ä¸­ï¼Œå†…å®¹å®‰å…¨è‡³å…³é‡è¦ã€‚MCU å¯ä»¥åœ¨æœåŠ¡ç«¯æ¥å…¥ AI é‰´åˆ«ä¸­å¿ƒï¼Œå®æ—¶æ£€æµ‹ç›´æ’­å†…å®¹ã€‚</li>
<li>ä¸€æ—¦å‘ç°éæ³•å†…å®¹ï¼ŒAI å¯ä»¥ç›´æ¥åˆ‡æ–­ç›´æ’­ï¼Œç¡®ä¿å®‰å…¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>å…¶ä»–èƒ½åŠ›</strong>ï¼šåª’ä½“æµæ··åˆï¼ˆå°†å¤šä¸ªäººç”»é¢åˆæˆä¸€ä¸ªç”»é¢ï¼‰ã€éŸ³é¢‘æå–ã€è§†é¢‘æŠ½å¸§å­˜æ¡£ç­‰ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>åœ¨ WebRTC å¤šäººå®æ—¶é€šä¿¡ä¸­ï¼Œ<strong>æ¶æ„é€‰æ‹©çš„æœ¬è´¨</strong>ï¼Œæ˜¯å¦‚ä½•åœ¨ <strong>å®¢æˆ·ç«¯å‹åŠ›ã€æœåŠ¡å™¨æˆæœ¬ã€å»¶è¿Ÿå’ŒåŠŸèƒ½å¤æ‚åº¦</strong> ä¹‹é—´åšå–èˆã€‚</p>





















































<table><thead><tr><th>ç»´åº¦</th><th>Mesh</th><th>SFU</th><th>MCU</th></tr></thead><tbody><tr><td>PeerConnection</td><td>Nâˆ’1</td><td>1</td><td>1</td></tr><tr><td>å®¢æˆ·ç«¯ä¸Šè¡Œ</td><td>Nâˆ’1 è·¯</td><td>1 è·¯</td><td>1 è·¯</td></tr><tr><td>å®¢æˆ·ç«¯ä¸‹è¡Œ</td><td>Nâˆ’1 è·¯</td><td>Nâˆ’1 è·¯</td><td>1 è·¯</td></tr><tr><td>æœåŠ¡å™¨å‹åŠ›</td><td>æä½</td><td>ä¸­ï¼ˆå¸¦å®½ï¼‰</td><td>æé«˜ï¼ˆè®¡ç®—ï¼‰</td></tr><tr><td>å»¶è¿Ÿ</td><td>æœ€ä½</td><td>ä½</td><td>è¾ƒé«˜</td></tr><tr><td>æ‰©å±•æ€§</td><td>æå·®</td><td>å¥½</td><td>å¾ˆå¥½</td></tr><tr><td>å…¸å‹åº”ç”¨</td><td>1v1</td><td>è§†é¢‘ä¼šè®®</td><td>ç›´æ’­ / èåˆ</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥ğŸ”¥ğŸ”¥ React18 æºç å­¦ä¹  - React Element]]></title>    <link>https://juejin.cn/post/7591177139660455990</link>    <guid>https://juejin.cn/post/7591177139660455990</guid>    <pubDate>2026-01-04T00:47:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591177139660455990" data-draft-id="7590403249561190415" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥ğŸ”¥ğŸ”¥ React18 æºç å­¦ä¹  - React Element"/> <meta itemprop="keywords" content="React.js,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2026-01-04T00:47:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="yyyao"/> <meta itemprop="url" content="https://juejin.cn/user/4266531531793976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥ğŸ”¥ğŸ”¥ React18 æºç å­¦ä¹  - React Element
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4266531531793976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    yyyao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T00:47:13.000Z" title="Sun Jan 04 2026 00:47:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ¬æ–‡çš„<code>React</code>ä»£ç ç‰ˆæœ¬ä¸º<code>18.2.0</code></p>
<p>å¯è°ƒè¯•çš„ä»£ç ä»“åº“ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyyyao-hh%2Freact-debug%2Ftree%2Fmaster-pure" target="_blank" title="https://github.com/yyyao-hh/react-debug/tree/master-pure" ref="nofollow noopener noreferrer">GitHub - yyyao-hh/react-debug at master-pure</a></p>
<p><code>React Element</code>ä½œä¸º<code>React</code>æ¶æ„çš„åŸºçŸ³ï¼Œç†è§£å…¶æœ¬è´¨å’Œå·¥ä½œåŸç†å¯¹äºæ·±å…¥æŒæ¡<code>React</code>è‡³å…³é‡è¦ã€‚å¹¶ä¸”åé¢çš„ç« èŠ‚éƒ½ä¾æ‰˜äºå‰é¢åŸºç¡€çŸ¥è¯†çš„é“ºå«ï¼Œæ‰€ä»¥åŠ¡å¿…ä»”ç»†é˜…è¯»æœ¬ç« å†…å®¹ï¼ï¼ï¼</p>
<h2 data-id="heading-1">åŸºæœ¬æ¦‚å¿µ</h2>
<p><strong>JSX</strong>ï¼ˆ<code>JavaScript XML</code>ï¼‰æ˜¯ä¸€ç§<code>JavaScript</code>çš„è¯­æ³•æ‰©å±•ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨<code>JavaScript</code>ä¸­ç›´æ¥ä¹¦å†™ç±»ä¼¼<code>HTML</code>çš„ç»“æ„ã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§ç®€æ´ã€ç›´è§‚ä¸”é«˜æ•ˆçš„æ–¹å¼æè¿° UI ç»„ä»¶ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.legacy.reactjs.org%2Fdocs%2Fintroducing-jsx.html" target="_blank" title="https://zh-hans.legacy.reactjs.org/docs/introducing-jsx.html" ref="nofollow noopener noreferrer">JSX ç®€ä»‹ â€“ React</a></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/* src/index.js */</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">APP</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>Hello, world!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};
</code></pre>
<h3 data-id="heading-2">ä» JSX åˆ° React Element</h3>
<p>å®é™…ä¸Šï¼Œ<code>JSX</code>å¹¶ä¸æ˜¯<code>React</code>ç›´æ¥æ‰§è¡Œçš„ä»£ç ï¼Œå®ƒä¼šè¢«ç¼–è¯‘æˆæ ‡å‡†çš„<code>JavaScript</code>ä»£ç ã€‚</p>
<ul>
<li>åœ¨ <code>React17</code>ä¹‹å‰ï¼Œ<code>JSX</code>ä»£ç éƒ½ä¼šè¢«è½¬åŒ–ä¸º<code>React.createElement</code>å‡½æ•°è¿›è¡Œå¤„ç†ã€‚è€Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¹‹å‰çš„é¡¹ç›®ä¸­éœ€è¦å¼•å…¥<code>React</code>ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/* createElement: src/react/packages/react/src/ReactElement.js */</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-comment">// JSX ä»£ç </span>
&lt;div className=<span class="hljs-string">"title"</span>&gt;<span class="hljs-title class_">Hello</span> <span class="hljs-title class_">World</span>&lt;/div&gt;

<span class="hljs-comment">// ç¼–è¯‘ä¸º</span>
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>, { <span class="hljs-attr">className</span>: <span class="hljs-string">'title'</span> }, <span class="hljs-string">'Hello World'</span>)
</code></pre>
<ul>
<li>åœ¨<code>React17</code>ä¹‹åï¼Œ<code>React</code>å’Œ<code>babel</code>è¿›è¡Œäº†åˆä½œï¼Œæ”¯æŒäº†<code>jsx-runtime</code>ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸ç”¨æ‰‹åŠ¨å¼•å…¥<code>React</code>ï¼Œè€Œæ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨å¼•å…¥æ–°çš„<code>jsx</code>å‡½æ•° ã€‚</li>
</ul>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">/* jsx: src/react/packages/react/jsx-runtime.js */</span>

<span class="hljs-comment">// JSX ä»£ç   </span>
&lt;div className=<span class="hljs-string">"title"</span>&gt;Hello World&lt;/div&gt;

<span class="hljs-comment">// ç¼–è¯‘ä¸º</span>
import { jsx <span class="hljs-keyword">as</span> _jsx } <span class="hljs-keyword">from</span> <span class="hljs-string">'react/jsx-runtime'</span>
<span class="hljs-title function_ invoke__">_jsx</span>(<span class="hljs-string">'div'</span>, { <span class="hljs-attr">className</span>: <span class="hljs-string">'title'</span>, <span class="hljs-attr">children</span>: <span class="hljs-string">'Hello World'</span> })
</code></pre>
<p>æ–°æ¨¡å¼é…ç½®ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">{
  <span class="hljs-string">"plugins"</span>: <span class="hljs-string">[["@babel/plugin-transform-react-jsx", { "runtime": "automatic" }]]</span>
}
</code></pre>
<blockquote>
<p>ä½¿ç”¨<code>create-react-app</code>æˆ–<code>Vite</code>ç­‰ç°ä»£å·¥å…·é“¾ï¼Œé€šå¸¸é»˜è®¤ä½¿ç”¨æ–°æ¨¡å¼</p>
</blockquote>
<p>ä½†æ˜¯æ— è®ºæ˜¯ä¸Šé¢çš„å“ªç§è½¬æ¢æ–¹å¼ï¼Œæœ€ç»ˆç»“æœéƒ½æ˜¯è¢«è½¬åŒ–ä¸ºä¸€ä¸ªæ™®é€šçš„<code>JavaScript</code>å¯¹è±¡ï¼Œå®ƒæè¿°äº†ä½ å¸Œæœ›åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„å†…å®¹ã€‚</p>
<h3 data-id="heading-3">React Element çš„æ•°æ®ç»“æ„</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/* src/react/packages/shared/ReactElementType.js */</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ReactElement</span> = {|
  <span class="hljs-attr">$$typeof</span>: <span class="hljs-built_in">any</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-built_in">any</span>,
  <span class="hljs-attr">key</span>: <span class="hljs-built_in">any</span>,
  <span class="hljs-attr">ref</span>: <span class="hljs-built_in">any</span>,
  <span class="hljs-attr">props</span>: <span class="hljs-built_in">any</span>,
  <span class="hljs-attr">_owner</span>: <span class="hljs-built_in">any</span>

  <span class="hljs-comment">// çœç•¥ __DEV__ ç¯å¢ƒçš„ä¸€äº›å±æ€§</span>
|};
</code></pre>
<p>æ¯ä¸ªå±æ€§çš„å«ä¹‰å¦‚ä¸‹ï¼š</p>








































<table><thead><tr><th>å±æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td><code>$$typeof</code></td><td>å”¯ä¸€æ ‡è¯†è¿™æ˜¯ä¸€ä¸ª<code>React Element</code>ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª<code>Symbol</code></td><td><code>Symbol(react.element)</code></td></tr><tr><td><code>type</code></td><td>å…ƒç´ çš„ç±»å‹</td><td>- å­—ç¬¦ä¸²ï¼šè¡¨ç¤ºåŸç”Ÿ<code>DOM</code>èŠ‚ç‚¹ï¼ˆ<code>'div'</code>ï¼‰<br/>- å‡½æ•°æˆ–ç±»ï¼šè¡¨ç¤ºè‡ªå®šä¹‰ç»„ä»¶ï¼ˆ<code>MyComp</code>ï¼‰</td></tr><tr><td><code>key</code></td><td>åˆ—è¡¨é¡¹çš„å”¯ä¸€æ ‡è¯†</td><td><code>'item-1'</code></td></tr><tr><td><code>ref</code></td><td>ç”¨äºè®¿é—®åº•å±‚<code>DOM</code>èŠ‚ç‚¹æˆ–ç»„ä»¶å®ä¾‹çš„å¼•ç”¨</td><td><code>{current: null}</code></td></tr><tr><td><code>props</code></td><td>å…ƒç´ çš„å±æ€§é›†åˆï¼ˆä¸åŒ…æ‹¬<code>key</code>å’Œ<code>ref</code>ï¼‰</td><td><code>{className: 'app', children: ...}</code></td></tr><tr><td><code>_owner</code></td><td>åˆ›å»ºæ­¤å…ƒç´ çš„ç»„ä»¶å¯¹åº”çš„<code>Fiber</code>èŠ‚ç‚¹</td><td><code>FiberNode</code></td></tr></tbody></table>
<p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯<code>$$typeof</code>å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ª<code>Symbol</code>ç±»å‹çš„å€¼ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†<code>React Element</code>ã€‚è¿™ä¸ªè®¾è®¡ä¸»è¦æ˜¯ä¸ºäº†å®‰å…¨è€ƒè™‘â€”â€”é˜²æ­¢<code>XSS</code>æ”»å‡»ï¼Œå› ä¸º<code>JSON</code>ä¸­ä¸èƒ½åŒ…å«<code>Symbol</code>ç±»å‹çš„å€¼ï¼Œå³ä½¿æœåŠ¡å™¨æ³¨å…¥äº†ä¸€ä¸ªæ¶æ„çš„<code>React Element</code>å¯¹è±¡ï¼Œ<code>React</code>ä¹Ÿä¸ä¼šè®¤å®ƒã€‚</p>
<h2 data-id="heading-4">React Element ä¸ Fiber èŠ‚ç‚¹çš„å…³ç³»</h2>
<p>ç†è§£<code>React Element</code>å’Œ<code>Fiber</code>èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»è‡³å…³é‡è¦ï¼Œå®ƒä»¬æ˜¯<code>React</code>æ¶æ„ä¸­ä¸åŒä½†äº’è¡¥çš„æ¦‚å¿µã€‚</p>
<h3 data-id="heading-5">ä¸åŒçš„è§’è‰²ä¸èŒè´£</h3>
<ul>
<li><strong>React Element</strong>ï¼šæ˜¯ä¸€ä¸ªæ™®é€šçš„<code>JavaScript</code>å¯¹è±¡ï¼Œå®ƒæè¿°äº†<code>UI</code>åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­ã€‚å®ƒæ˜¯ä¸å¯å˜çš„ï¼Œæ¯æ¬¡æ›´æ–°éƒ½ä¼šåˆ›å»ºæ–°çš„<code>Element</code>å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯<code>UI</code>çš„è“å›¾ï¼šå®ƒè¯´æ˜äº†éœ€è¦æ¸²æŸ“ä»€ä¹ˆï¼Œä½†ä¸ä¼šå®é™…æ‰§è¡Œæ¸²æŸ“å·¥ä½œã€‚</li>
<li><strong>Fiber</strong>ï¼šæ˜¯<code>React</code>è°ƒå’Œè¿‡ç¨‹ï¼ˆ<code>Reconciliation</code>ï¼‰ä¸­çš„å·¥ä½œå•å…ƒã€‚å®ƒæ˜¯åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­åˆ›å»ºçš„ï¼Œç„¶åç»„æˆäº†<code>Fiber</code>æ ‘ã€‚ä¸<code>React Element</code>ä¸åŒï¼Œ<code>Fiber</code>æ˜¯å¯å˜çš„ï¼Œå®ƒä»¬åŒ…å«ç»„ä»¶çŠ¶æ€ã€å‰¯ä½œç”¨æ ‡è®°ã€ä»¥åŠæŒ‡å‘å…¶ä»–<code>Fiber</code>çš„æŒ‡é’ˆï¼ˆå½¢æˆé“¾è¡¨ç»“æ„ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-6">æ¸²æŸ“è¿‡ç¨‹ä¸­çš„åä½œ</h3>
<p><code>React</code>æ¸²æŸ“è¿‡ç¨‹çš„æ­¥éª¤ï¼Œä¼šéµå¾ªä»¥ä¸‹è¿‡ç¨‹ï¼š</p>
<ol>
<li>ç¼–è¯‘é˜¶æ®µï¼š<code>JSX</code>è¢«è½¬è¯‘ä¸º<code>createElement/jsx</code>å‡½æ•°è°ƒç”¨</li>
<li>è§¦å‘æ›´æ–°ï¼šåˆå§‹æ¸²æŸ“ã€çŠ¶æ€æ›´æ–°ã€å±æ€§æ›´æ–°ç­‰</li>
<li>æ¸²æŸ“é˜¶æ®µï¼š</li>
</ol>

<ol>
<li>
<ol>
<li>è°ƒç”¨å‡½æ•°ç»„ä»¶ï¼ˆæˆ–ç±»ç»„ä»¶çš„<code>render</code>æ–¹æ³•ï¼‰è·å–æ–°çš„<code>React Element</code></li>
<li>å°†æ–°çš„<code>Element</code>æ ‘ä¸ä¸Šä¸€æ¬¡æ¸²æŸ“çš„<code>Fiber</code>æ ‘è¿›è¡Œæ¯”è¾ƒï¼Œç”Ÿæˆæ–°çš„<code>Fiber</code>æ ‘ï¼ˆ<code>Diff</code>ç®—æ³•ï¼‰</li>
</ol>
</li>
</ol>

<ol start="4">
<li>æäº¤é˜¶æ®µï¼šå°†æ›´æ–°åº”ç”¨åˆ°å®é™…çš„<code>DOM</code></li>
</ol>
<h2 data-id="heading-7">åˆ›å»ºè¿‡ç¨‹</h2>
<p>è¦çœŸæ­£ç†è§£<code>React Element</code>ï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥<code>createElement/jsx</code>å‡½æ•°çš„æºç ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•æ„é€ è¿™ä¸ªæ ¸å¿ƒæ•°æ®ç»“æ„çš„ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šä»£ç å»é™¤äº†å¼€å‘ç¯å¢ƒç›¸å…³çš„é€»è¾‘ï¼Œå¹¶ç²¾ç®€å¤„ç†</p>
</blockquote>
<h3 data-id="heading-8">createElement å‡½æ•°åˆ†æ</h3>
<pre><code class="hljs language-ini" lang="ini">/* src/react/packages/react/src/ReactElement.js */

const <span class="hljs-attr">RESERVED_PROPS</span> = {
  key: true,
  ref: true,
}<span class="hljs-comment">;</span>

export function createElement(type, config, children) {
  let propName<span class="hljs-comment">;</span>
  const <span class="hljs-attr">props</span> = {}<span class="hljs-comment">;</span>

  let <span class="hljs-attr">key</span> = <span class="hljs-string">''</span> + config.key<span class="hljs-comment">;</span>
  let <span class="hljs-attr">ref</span> = config.ref<span class="hljs-comment">;</span>

  // è¿‡æ»¤æ‰ä¿ç•™å±æ€§(key, refç­‰), å°†å…¶ä»–å±æ€§å­˜åˆ° props å¯¹è±¡
  for (propName in config) {
    if (
      hasOwnProperty.call(config, propName) &amp;&amp;
      !RESERVED_PROPS.hasOwnProperty(propName)
    ) {
      props<span class="hljs-section">[propName]</span> = config<span class="hljs-section">[propName]</span><span class="hljs-comment">;</span>
    }
  }

  // å¤„ç† children å‚æ•°
  const <span class="hljs-attr">childrenLength</span> = arguments.length - <span class="hljs-number">2</span><span class="hljs-comment">;</span>
  if (<span class="hljs-attr">childrenLength</span> === <span class="hljs-number">1</span>) {
    <span class="hljs-attr">props.children</span> = children<span class="hljs-comment">;</span>
  } else if (childrenLength &gt; 1) {
    const <span class="hljs-attr">childArray</span> = Array(childrenLength)<span class="hljs-comment">;</span>
    for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; childrenLength; i++) {</span>
      childArray<span class="hljs-section">[i]</span> = arguments<span class="hljs-section">[i + 2]</span><span class="hljs-comment">;</span>
    }
    <span class="hljs-attr">props.children</span> = childArray<span class="hljs-comment">;</span>
  }

  // å¤„ç†é»˜è®¤ props
  if (type &amp;&amp; type.defaultProps) {
    const <span class="hljs-attr">defaultProps</span> = type.defaultProps<span class="hljs-comment">;</span>
    for (propName in defaultProps) {
      if (props<span class="hljs-section">[propName]</span> === undefined) {
        props<span class="hljs-section">[propName]</span> = defaultProps<span class="hljs-section">[propName]</span><span class="hljs-comment">;</span>
      }
    }
  }

  // åˆ›å»ºå¹¶è¿”å› React Element
  return ReactElement(...)<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-9">jsx å‡½æ•°åˆ†æ</h3>
<p>é€»è¾‘ä¸<code>createElement</code>ç±»ä¼¼ï¼Œå…¥å‚æ–¹é¢å°†<code>key</code>ä½œä¸ºå•ç‹¬å‚æ•°ä¼ é€’ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">/* src/react/packages/react/src/jsx/ReactJSXElement.js */

const <span class="hljs-attr">RESERVED_PROPS</span> = {
  key: true,
  ref: true,
}<span class="hljs-comment">;</span>

export function jsx(type, config, maybeKey) {
  let propName<span class="hljs-comment">;</span>
  const <span class="hljs-attr">props</span> = {}<span class="hljs-comment">;</span>

  let <span class="hljs-attr">key</span> = config.key<span class="hljs-comment">;</span>
  let <span class="hljs-attr">ref</span> = config.ref<span class="hljs-comment">;</span>

  // è¿‡æ»¤æ‰ä¿ç•™å±æ€§(key, refç­‰), å°†å…¶ä»–å±æ€§å­˜åˆ° props å¯¹è±¡(children ä¹Ÿåœ¨ config ä¸­)
  for (propName in config) {
    if (
      hasOwnProperty.call(config, propName) &amp;&amp;
      !RESERVED_PROPS.hasOwnProperty(propName)
    ) {
      props<span class="hljs-section">[propName]</span> = config<span class="hljs-section">[propName]</span><span class="hljs-comment">;</span>
    }
  }

  // å¤„ç†é»˜è®¤ props
  if (type &amp;&amp; type.defaultProps) {
    const <span class="hljs-attr">defaultProps</span> = type.defaultProps<span class="hljs-comment">;</span>
    for (propName in defaultProps) {
      if (props<span class="hljs-section">[propName]</span> === undefined) {
        props<span class="hljs-section">[propName]</span> = defaultProps<span class="hljs-section">[propName]</span><span class="hljs-comment">;</span>
      }
    }
  }

  // åˆ›å»ºå¹¶è¿”å› React Element
  return ReactElement(...)<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-10">ReactElement å‡½æ•°</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">const</span> ReactElement = <span class="hljs-title function_ invoke__">function</span>(<span class="hljs-keyword">type</span>, key, <span class="hljs-keyword">ref</span>, <span class="hljs-keyword">self</span>, source, owner, props) {
  <span class="hljs-keyword">const</span> element = {
    $$<span class="hljs-keyword">typeof</span>: REACT_ELEMENT_TYPE,
    <span class="hljs-keyword">type</span>: <span class="hljs-keyword">type</span>,
    key: key,
    <span class="hljs-keyword">ref</span>: <span class="hljs-keyword">ref</span>,
    props: props,
    _owner: owner,
  };
  
  <span class="hljs-keyword">return</span> element;
};
</code></pre>
<blockquote>
<p>è¦æ·±å…¥ç†è§£<code>React Element</code>çš„åˆ›å»ºè¿‡ç¨‹ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯åœ¨æºç ä¸­è®¾ç½®æ–­ç‚¹å¹¶è¿›è¡Œè°ƒè¯•ã€‚</p>
</blockquote>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>å¾ˆå¤šäººå°†<code>React Element</code>ç­‰åŒäºè™šæ‹Ÿ<code>DOM</code>ï¼Œå®é™…ä¸Š<code>React Element</code>ç¡®å®æ˜¯<code>React</code>è™šæ‹Ÿ<code>DOM</code>å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå¦ä¸€éƒ¨åˆ†å°±æ˜¯<code>Fiber</code>æ¶æ„ã€‚å½“ç»„ä»¶çŠ¶æ€å˜åŒ–æ—¶ï¼Œ<code>React</code>ä¼šåˆ›å»ºæ–°çš„<code>Element</code>æ ‘ï¼Œç„¶åé€šè¿‡<code>Diff</code>ç®—æ³•æ¯”è¾ƒæ–°æ—§ä¸¤æ£µæ ‘ï¼Œæ‰¾å‡ºæœ€å°å˜æ›´ï¼Œæœ€åæ‰¹é‡æ›´æ–°çœŸå®<code>DOM</code>ã€‚</p>
<p>ä¸‹ä¸€ç« æˆ‘ä»¬å°†äº†è§£æ•´ä¸ª<code>React</code>åº”ç”¨æ¸²æŸ“çš„èµ·ç‚¹ï¼šå®¹å™¨çš„æŒ‚è½½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[jsä¸­workerçš„è¯¦ç»†è®²è§£]]></title>    <link>https://juejin.cn/post/7590705425135403017</link>    <guid>https://juejin.cn/post/7590705425135403017</guid>    <pubDate>2026-01-04T01:07:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590705425135403017" data-draft-id="7590699877631770662" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="jsä¸­workerçš„è¯¦ç»†è®²è§£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2026-01-04T01:07:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘çš„divä¸¢äº†è‚¿ä¹ˆåŠ"/> <meta itemprop="url" content="https://juejin.cn/user/1310273593440398"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            jsä¸­workerçš„è¯¦ç»†è®²è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1310273593440398/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘çš„divä¸¢äº†è‚¿ä¹ˆåŠ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:07:16.000Z" title="Sun Jan 04 2026 01:07:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">ä»€ä¹ˆæ˜¯ JavaScript Workerï¼Ÿ</h4>
<p>Worker æ˜¯åœ¨Webåº”ç”¨ç¨‹åºä¸­å®ç°å¤šçº¿ç¨‹çš„æœºåˆ¶ã€‚<br/>
å®ƒå¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸­è¿è¡Œè„šæœ¬ï¼Œç‹¬ç«‹äºä¸»çº¿ç¨‹ã€‚<br/>
è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€äº›è€—æ—¶çš„è®¡ç®—ä»»åŠ¡äº¤ç»™Workerçº¿ç¨‹å¤„ç†ã€‚<br/>
ä»¥ä¿è¯ä¸»çº¿ç¨‹çš„ä¸ä¼šè¢«é˜»å¡ã€‚</p>
<h4 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦Workerï¼Ÿ</h4>
<p>ç”±äºJavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€æœ‰ä»»åŠ¡åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œã€‚<br/>
å¦‚æœé‡åˆ°ä¸€ä¸ªè€—æ—¶çš„ä»»åŠ¡ï¼ˆæ¯”å¦‚å¤§è§„æ¨¡æ•°æ®è®¡ç®—ã€å›¾åƒå¤„ç†ã€å¤æ‚ç®—æ³•ï¼‰ã€‚<br/>
å®ƒä¼šé˜»å¡ä¸»çº¿ç¨‹å¯¼è‡´é¡µé¢æ— æ³•å“åº”ï¼Œç”¨æˆ·ä½“éªŒå˜å·®ã€‚<br/>
Workerçš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°†è€—æ—¶çš„è®¡ç®—ä»»åŠ¡æ”¾åˆ°åå°çº¿ç¨‹å»æ‰§è¡Œã€‚</p>
<h3 data-id="heading-2">vue2ä¸­å¦‚ä½•ä½¿ç”¨ worker</h3>
<p>åœ¨vue/cliè„šæ‰‹æ¶ä¸­ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥ä½¿ç”¨workerã€‚<br/>
å› ä¸ºï¼š<br/>
1ï¼Œæ— æ³•å°† Worker è„šæœ¬æ‰“åŒ…ä¸ºç‹¬ç«‹çš„å¯åŠ è½½æ–‡ä»¶ã€‚<br/>
2ï¼Œæ‰“åŒ…åä¼šå¯¼è‡´ä¾èµ–ä¸¢å¤±æˆ–è·¯å¾„é”™è¯¯ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">npm install worker-loader -D
æˆ–è€…
yarn <span class="hljs-keyword">add</span> worker-loader -D
</code></pre>
<h4 data-id="heading-3">vue.config.js é…ç½®å¦‚ä¸‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">chainWebpack</span>:<span class="hljs-function"><span class="hljs-params">config</span>=&gt;</span>{
    <span class="hljs-comment">// ä¸‹é¢æ˜¯workerçš„é…ç½®</span>
    .<span class="hljs-title function_">rule</span>(<span class="hljs-string">'worker'</span>)
    .<span class="hljs-title function_">test</span>(<span class="hljs-regexp">/\.worker\.js$/</span>)
    .<span class="hljs-title function_">use</span>(<span class="hljs-string">'worker-loader'</span>)
    .<span class="hljs-title function_">loader</span>(<span class="hljs-string">'worker-loader'</span>)
    .<span class="hljs-title function_">end</span>();

    <span class="hljs-comment">// è§£å†³ï¼šworker çƒ­æ›´æ–°é—®é¢˜</span>
    config.<span class="hljs-property">module</span>.<span class="hljs-title function_">rule</span>(<span class="hljs-string">'js'</span>).<span class="hljs-property">exclude</span>.<span class="hljs-title function_">add</span>(<span class="hljs-regexp">/\.worker\.js$/</span>);
  },
  <span class="hljs-attr">parallel</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> {
    <span class="hljs-comment">// è§£å†³ï¼šâ€œwindow is undefinedâ€æŠ¥é”™ï¼Œè¿™ä¸ªæ˜¯å› ä¸ºworkerçº¿ç¨‹ä¸­ä¸å­˜åœ¨windowå¯¹è±¡ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œè¦ç”¨thisä»£æ›¿</span>
    config.<span class="hljs-property">output</span>.<span class="hljs-title function_">globalObject</span>(<span class="hljs-string">'this'</span>)
  }
}
</code></pre>
<h4 data-id="heading-4">postMessage å­çº¿ç¨‹ç»™ä¸»çº¿å‘é€æ¶ˆæ¯</h4>
<p>self.postMessageå­çº¿ç¨‹å‘ä¸»çº¿ç¨‹å‘é€æ¶ˆæ¯ã€‚<br/>
åœ¨ Web Worker ä¸­ï¼Œself æŒ‡å‘å½“å‰åˆ›å»ºçš„è¿™ä¸ª worker çº¿ç¨‹ï¼Œself æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ã€‚<br/>
self.postMessage()å°†æ•°æ®ä» worker çº¿ç¨‹å‘é€åˆ°åˆ›å»ºå®ƒçš„ä¸»çº¿ç¨‹ã€‚</p>
<h4 data-id="heading-5">ä¸»çº¿ç¨‹é€šçŸ¥å­çº¿ç¨‹(worker)å¼€å§‹å·¥ä½œ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åˆ›å»º worker</span>
<span class="hljs-keyword">this</span>.webWorker = new Worker(<span class="hljs-string">'./web.worker.js'</span>)
<span class="hljs-comment">// é€šçŸ¥ Worker å­çº¿ç¨‹å¯ä»¥è¿›è¡Œå“åº”çš„å·¥ä½œã€‚</span>
<span class="hljs-comment">// ä¸»çº¿ç¨‹è°ƒç”¨worker.postMessage()æ–¹æ³•ï¼Œå‘ Worker å‘æ¶ˆæ¯</span>
<span class="hljs-keyword">this</span>.webWorker.postMessage({ action: <span class="hljs-string">'startFetch'</span> });
</code></pre>
<h4 data-id="heading-6">worker ä¸­æ¥å‘é€ç½‘ç»œè¯·æ±‚å“ˆ</h4>
<p>src\views\element.vue æ–‡ä»¶</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ä½¿ç”¨workeræ¥å‘å‘é€ç½‘ç»œè¯·æ±‚<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"sendFetchHandler"</span>&gt;</span>å¼€å§‹å‘é€ç½‘ç»œè¯·æ±‚<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item,index) in apiBackData"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span>&gt;</span>{{ item.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// å¯¼å…¥ worker æ–‡ä»¶, å¿…é¡»ä½¿ç”¨ è¿™æ ·çš„æ–¹å¼å¼•å…¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">WorkerA</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'worker-loader!./web.worker.js'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">apiBackData</span>: []
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">sendFetchHandler</span>(<span class="hljs-params"/>){
      <span class="hljs-comment">// ä¸»çº¿ç¨‹è°ƒç”¨worker.postMessage()æ–¹æ³•ï¼Œå‘ Workerçº¿ç¨‹ å‘æ¶ˆæ¯,å¼€å§‹è¿›è¡Œç½‘ç»œè¯·æ±‚</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">action</span>: <span class="hljs-string">'startFetch'</span> });
    }
  },
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»º worker å®ä¾‹ï¼Œåç§°å¿…é¡»å’Œå¯¼å…¥æ—¶çš„ä¿æŒä¸€è‡´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WorkerA</span>(<span class="hljs-string">'./web.worker.js'</span>)
    <span class="hljs-comment">// å…ˆæ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-comment">// e.data æ˜¯æ¥æ”¶åˆ°çš„æ•°æ®</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ¥è‡ª Worker çš„æ¶ˆæ¯:'</span>, e.<span class="hljs-property">data</span>)
      <span class="hljs-comment">// å¤„ç† Worker è¿”å›çš„æ•°æ®</span>
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'fetchSuccess'</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">apiBackData</span> = e.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">data</span> || []
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–çš„æ•°æ®:'</span>,  <span class="hljs-variable language_">this</span>.<span class="hljs-property">apiBackData</span> );
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'fetchError'</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–æ•°æ®å¤±è´¥:'</span>, e.<span class="hljs-property">data</span>.<span class="hljs-property">error</span>);
      }
    })

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Workerå‘ç”Ÿé”™è¯¯:'</span>, error)
    })
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>

<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å¼•å…¥ç½‘ç»œè¯·æ±‚ä¸­çš„æ–¹æ³•</span>
import {getList} <span class="hljs-keyword">from</span> <span class="hljs-string">'@/request/api.js'</span>

<span class="hljs-built_in">self</span>.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"worker:"</span>, e)
  <span class="hljs-keyword">if</span>(e.data &amp;&amp; e.data.action===<span class="hljs-string">'startFetch'</span>){
    <span class="hljs-comment">//  e.dataæ˜¯ä¸»çº¿ç¨‹å‘é€è¿‡æ¥çš„æ•°æ®</span>
    <span class="hljs-title function_ invoke__">getList</span>().<span class="hljs-title function_ invoke__">then</span>(res=&gt;{
      console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-number">1111</span>,res)
      // å‡è®¾ æ˜¯ä¸€ä¸ªæ•°ç»„å°±æ˜¯è¯·æ±‚æˆåŠŸ
      <span class="hljs-keyword">if</span>(Array.<span class="hljs-title function_ invoke__">isArray</span>(res)){
        <span class="hljs-comment">//å°†æ•°æ®ä» worker çº¿ç¨‹å‘é€åˆ°åˆ›å»ºå®ƒçš„ä¸»çº¿ç¨‹</span>
        <span class="hljs-built_in">self</span>.<span class="hljs-title function_ invoke__">postMessage</span>({ 
          <span class="hljs-attr">type</span>: <span class="hljs-string">'fetchSuccess'</span>,
          <span class="hljs-attr">data</span>:{
            <span class="hljs-attr">data</span>:res,
            <span class="hljs-attr">message</span>: <span class="hljs-string">'è·å–æˆåŠŸ'</span>
          }
        });
      }<span class="hljs-keyword">else</span>{
        <span class="hljs-comment">// å°†æ•°æ®ä» worker çº¿ç¨‹å‘é€åˆ°åˆ›å»ºå®ƒçš„ä¸»çº¿ç¨‹</span>
        <span class="hljs-built_in">self</span>.<span class="hljs-title function_ invoke__">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'fetchError'</span>, <span class="hljs-attr">error</span>: <span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span> });
      }
    })
  }
};
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b75505495a6547b584f72e0888246a05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768093642&amp;x-signature=esBg%2BjRppnepiB8gyms3iJJZzZU%3D" alt="image" loading="lazy"/></p>
<h4 data-id="heading-7">workerå¯¼å‡ºè¡¨æ ¼æ¡ˆä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"exportExcelHandler"</span>&gt;</span>å¯¼å‡ºexcel<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> {writeFile, utils} <span class="hljs-keyword">from</span> <span class="hljs-string">'xlsx'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">exportExcelHandler</span>(<span class="hljs-params"/>){
      <span class="hljs-keyword">let</span> arr = []
      <span class="hljs-comment">// 50wè¡Œçš„æ•°æ®</span>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i= <span class="hljs-number">0</span>; i&lt;<span class="hljs-number">500000</span>;i++){
        arr.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ '</span> + i,
          <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,
          <span class="hljs-attr">sex</span>: <span class="hljs-string">'ç”·'</span>,
          <span class="hljs-attr">id</span>: <span class="hljs-string">'2025_12_12'</span>+ i,
          <span class="hljs-attr">address</span>:<span class="hljs-string">'XXåŒºYYYå¤§é“'</span> + i + <span class="hljs-string">'å·'</span>
        })
      }
      <span class="hljs-comment">// å°†å¯¹è±¡æ•°ç»„ arr è½¬æ¢ä¸º Excel å·¥ä½œè¡¨(sheet)</span>
      <span class="hljs-keyword">const</span> sheet  = utils.<span class="hljs-title function_">json_to_sheet</span>(arr)
      <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå·¥ä½œç°¿å¯¹è±¡ã€‚</span>
      <span class="hljs-comment">// å·¥ä½œç°¿æ˜¯ Excel æ–‡ä»¶çš„å®¹å™¨ï¼Œå¯ä»¥åŒ…å«å¤šä¸ªå·¥ä½œè¡¨</span>
      <span class="hljs-keyword">const</span> workbook = utils.<span class="hljs-title function_">book_new</span>()
      <span class="hljs-comment">// å°†ä¹‹å‰åˆ›å»ºçš„å·¥ä½œè¡¨ sheet æ·»åŠ åˆ°å·¥ä½œç°¿ workbook ä¸­</span>
      utils.<span class="hljs-title function_">book_append_sheet</span>(workbook, sheet, <span class="hljs-string">'sheet1'</span>)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'workbook'</span>, workbook)
      <span class="hljs-comment">// å°†æ•´ä¸ªå·¥ä½œç°¿ workbook å†™å…¥æ–‡ä»¶å¹¶è§¦å‘æµè§ˆå™¨ä¸‹è½½</span>
      <span class="hljs-title function_">writeFile</span>(workbook, <span class="hljs-string">'test.xlsx'</span>)
      <span class="hljs-comment">// ä¸»çº¿ç¨‹è°ƒç”¨worker.postMessage()æ–¹æ³•ï¼Œå‘ Workerçº¿ç¨‹ å‘æ¶ˆæ¯,å¼€å§‹è¿›è¡Œç½‘ç»œè¯·æ±‚</span>
      <span class="hljs-comment">// this.webWorker1.postMessage({ action: 'startFetch', data: this.vueData });</span>
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2520c90977e14ca6a31c773fc946d053~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768093642&amp;x-signature=VxpaYpsDTTKNTgo5RAKP47Bs8v0%3D" alt="image" loading="lazy"/></p>
<h4 data-id="heading-8">ç°åœ¨æˆ‘ä»¬ä½¿ç”¨workeræ¥è§£å†³æ·»åŠ æ•°æ®è€—æ—¶çš„é—®é¢˜</h4>
<p>ä¸‹è½½xlsxæ¨¡å—ã€‚</p>
<pre><code class="hljs language-css" lang="css">npm install <span class="hljs-attr">--save</span> xlsx
</code></pre>
<p>ä½¿ç”¨workerçš„æ–‡ä»¶(ä¸‹è½½çš„ä¸»é¡µé¢)</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"exportExcelHandler"</span>&gt;</span>å¯¼å‡ºexcel<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>

  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// å¯¼å…¥ worker æ–‡ä»¶, å¿…é¡»ä½¿ç”¨ è¿™æ ·çš„æ–¹å¼å¼•å…¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">WorkerA</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'worker-loader!./web.worker.js'</span>
<span class="hljs-keyword">import</span> {writeFile} <span class="hljs-keyword">from</span> <span class="hljs-string">'xlsx'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">exportExcelHandler</span>(<span class="hljs-params"/>){
      <span class="hljs-comment">// ä¸»çº¿ç¨‹è°ƒç”¨worker.postMessage()æ–¹æ³•ï¼Œå‘ Workerçº¿ç¨‹ å‘æ¶ˆæ¯,å¼€å§‹è¿›è¡Œæ„é€ æ•°æ®</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">action</span>: <span class="hljs-string">'startCreateExcelData'</span>});
    }
  },
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»º worker å®ä¾‹ï¼Œåç§°å¿…é¡»å’Œå¯¼å…¥æ—¶çš„ä¿æŒä¸€è‡´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WorkerA</span>(<span class="hljs-string">'./web.worker.js'</span>)
    <span class="hljs-comment">// å…ˆæ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ¥è‡ª Worker çš„æ¶ˆæ¯:'</span>, e.<span class="hljs-property">data</span>)
      <span class="hljs-comment">// å¤„ç† Worker è¿”å›çš„æ•°æ®</span>
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'createExcelSuccess'</span>) {
        <span class="hljs-comment">// è¿”å›è¡¨çš„æ•°æ®</span>
        <span class="hljs-keyword">const</span> workbook = e.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>
        <span class="hljs-comment">// å°†æ•´ä¸ªå·¥ä½œç°¿ workbook å†™å…¥æ–‡ä»¶å¹¶è§¦å‘æµè§ˆå™¨ä¸‹è½½ã€‚</span>
        <span class="hljs-comment">// æœ€åå¼‚æ­¥ä»ç„¶ä¼šå¡é¡¿,å› ä¸ºæ•°æ®é‡å¤ªå¤§äº†.ä½†æ˜¯å¡é¡¿çš„æ—¶é—´ä¼šæ¯”ä¹‹å‰å¥½ä¸€äº›</span>
        <span class="hljs-title function_">writeFile</span>(workbook, <span class="hljs-string">'é€šè¿‡workerå¯¼å¤„excel.xlsx'</span>)
      } <span class="hljs-keyword">else</span>  {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–æ•°æ®å¤±è´¥:'</span>, e.<span class="hljs-property">data</span>.<span class="hljs-property">error</span>);
      }
    })

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Workerå‘ç”Ÿé”™è¯¯:'</span>, error)
    })
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>workeræ–‡ä»¶(src\views\web.worker.js )</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å¼•å…¥ xlsx</span>
import {utils} <span class="hljs-keyword">from</span> <span class="hljs-string">'xlsx'</span>
<span class="hljs-built_in">self</span>.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"worker:"</span>, e)
  <span class="hljs-keyword">if</span>(e.data &amp;&amp; e.data.action===<span class="hljs-string">'startCreateExcelData'</span>){
    <span class="hljs-comment">//  e.dataæ˜¯ä¸»çº¿ç¨‹å‘é€è¿‡æ¥çš„æ•°æ®</span>
    let arr = []
    <span class="hljs-comment">// 50wè¡Œçš„æ•°æ®</span>
    <span class="hljs-keyword">for</span>(let i= <span class="hljs-number">0</span>; i&lt;<span class="hljs-number">500000</span>;i++){
      arr.<span class="hljs-title function_ invoke__">push</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ '</span> + i,
        <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,
        <span class="hljs-attr">sex</span>: <span class="hljs-string">'ç”·'</span>,
        <span class="hljs-attr">id</span>: <span class="hljs-string">'2025_12_12'</span>+ i,
        <span class="hljs-attr">address</span>:<span class="hljs-string">'XXåŒºYYYå¤§é“'</span> + i + <span class="hljs-string">'å·'</span>
      })
    }
    <span class="hljs-comment">// å°†å¯¹è±¡æ•°ç»„ arr è½¬æ¢ä¸º Excel å·¥ä½œè¡¨(sheet)</span>
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">sheet</span>  = utils.<span class="hljs-title function_ invoke__">json_to_sheet</span>(arr)
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå·¥ä½œç°¿(book)å¯¹è±¡ã€‚å·¥ä½œç°¿æ˜¯ Excel æ–‡ä»¶çš„å®¹å™¨ï¼Œå¯ä»¥åŒ…å«å¤šä¸ªå·¥ä½œè¡¨(sheet)</span>
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">workbook</span> = utils.<span class="hljs-title function_ invoke__">book_new</span>()
    <span class="hljs-comment">// å°†ä¹‹å‰åˆ›å»ºçš„å·¥ä½œè¡¨ (sheet) æ·»åŠ åˆ°å·¥ä½œç°¿(workbook)ä¸­</span>
    utils.<span class="hljs-title function_ invoke__">book_append_sheet</span>(workbook, sheet, <span class="hljs-string">'sheet1'</span>)
    <span class="hljs-built_in">self</span>.<span class="hljs-title function_ invoke__">postMessage</span>({ 
      <span class="hljs-attr">type</span>: <span class="hljs-string">'createExcelSuccess'</span>,
      <span class="hljs-attr">data</span>:{
        <span class="hljs-attr">data</span>:workbook,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'è·å–æˆåŠŸ'</span>
      }
    });
  }
};
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d7ffee930b24710a957d4abd07bb68e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768093642&amp;x-signature=RrGKHkVhCF9HQQrSoH7vxzt7icQ%3D" alt="image" loading="lazy"/></p>
<h4 data-id="heading-9">å…³é—­ Web Worker</h4>
<p>åœ¨ä¸»çº¿ç¨‹å’Œåœ¨Workerçº¿ç¨‹çš„å…³é—­æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ã€‚
å¦‚æœåœ¨ä¸»çº¿ç¨‹ï¼Œè°ƒç”¨terminate()æ–¹æ³•å…³é—­</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">this</span>.webWorker1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WorkerA</span>(<span class="hljs-string">'./web.worker.js'</span>) 
<span class="hljs-keyword">this</span>.webWorker1.<span class="hljs-built_in">terminate</span>();
</code></pre>
<p>å¦‚æœæ˜¯åœ¨Workçº¿ç¨‹ï¼Œå¯ä»¥è°ƒç”¨close()æ–¹æ³•è¿›è¡Œå…³é—­</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-built_in">self</span>.<span class="hljs-built_in">close</span>();
</code></pre>
<h4 data-id="heading-10">ä¸»çº¿ç¨‹å…³é—­ worker çº¿ç¨‹çš„è¯´æ˜</h4>
<p>å½“ä¸»çº¿ç¨‹è°ƒç”¨worker.terminate()æ—¶ï¼ŒWorkerçº¿ç¨‹ä¼šè¢«ç«‹å³ç»ˆæ­¢ã€‚<br/>
æ— è®ºå½“å‰äº‹ä»¶å¾ªç¯ä¸­æ˜¯å¦æœ‰ä»»åŠ¡ï¼ŒåŒ…æ‹¬å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡ï¼Œéƒ½ä¸ä¼šç»§ç»­æ‰§è¡Œã€‚<br/>
ä¹Ÿå°±æ˜¯è¯´ï¼šå¦‚æœæˆ‘åœ¨ç‚¹å‡»[å¯¼å…¥excel]æŒ‰é’®åï¼Œé©¬ä¸Šåˆå…³é—­ç‚¹å‡»[å…³é—­worker]ï¼Œé‚£ä¹ˆä¸èƒ½å¤Ÿæ­£å¸¸å¯¼å‡ºè¡¨æ ¼ã€‚<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2410306deb3349f4b701210b7946ee2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768093642&amp;x-signature=bp8lItRsyuiNaL0ee9NsckyFjLU%3D" alt="image" loading="lazy"/></p>
<h4 data-id="heading-11">Workerçº¿ç¨‹å†…éƒ¨å…³é—­ worker çº¿ç¨‹çš„è¯´æ˜</h4>
<p>å½“Workerçº¿ç¨‹å†…éƒ¨è°ƒç”¨self.close()æ—¶ï¼ŒWorkerçº¿ç¨‹å¹¶ä¸ä¼šç«‹å³ç»ˆæ­¢ã€‚<br/>
å®ƒä¼š[ç»§ç»­æ‰§è¡Œå½“å‰]äº‹ä»¶å¾ªç¯ä¸­çš„ä»»åŠ¡ï¼Œä½†æ˜¯[ä¼šé˜»æ­¢åç»­]äº‹ä»¶å¾ªç¯çš„ä»»åŠ¡æ‰§è¡Œã€‚<br/>
ä¹Ÿå°±æ˜¯è¯´ï¼šå¦‚æœæˆ‘åœ¨ç‚¹å‡»[å¯¼å…¥excel]æŒ‰é’®åï¼Œé©¬ä¸Šåˆå…³é—­ç‚¹å‡»[Workerå†…éƒ¨å…³é—­Worker]ï¼Œä»ç„¶å¯ä»¥å¯¼å‡ºè¡¨æ ¼ã€‚<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c321903106440f9a8a03ead44ab39df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768093642&amp;x-signature=5oz%2BzYg56Fqat1z5Nf0mLQDHbLo%3D" alt="image" loading="lazy"/></p>
<h4 data-id="heading-12">åˆ¤æ–­ç”¨æˆ·æµè§ˆå™¨æ˜¯å¦æ”¯æŒ worker</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Worker</span> !== <span class="hljs-string">'undefined'</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æµè§ˆå™¨æ”¯æŒ Web Workers'</span>);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æµè§ˆå™¨ä¸æ”¯æŒ Web Workers'</span>);
}
</code></pre>
<h4 data-id="heading-13">Worker çº¿ç¨‹å¼•ç”¨å…¶ä»–jsæ–‡ä»¶</h4>
<p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨workeræ–‡ä»¶ä¸­ï¼Œå¼•å…¥å…¶ä»–æ¨¡å—çš„æ–‡ä»¶ã€‚<br/>
å¯ä»¥é€šè¿‡ importScripts() æ–¹æ³•æ¥å®ç°ï¼Œåœ¨ worker ä¸­å¯¼å…¥å…¶ä»–çš„æ¨¡å—ã€‚è¿™ä¸ªåœ°å€æ˜¯å¯ä»¥è·¨åŸŸçš„ã€‚</p>
<h4 data-id="heading-14">Worker æŒ‡å®šæ¨¡å—ç±»å‹</h4>
<p>å¦‚æœæˆ‘ä»¬å‘ç°æˆ‘ä»¬éœ€è¦å¯¼å‡ºçš„æ–¹æ³•ä½¿ç”¨çš„æ˜¯ESModule æ¨¡å¼å¯¼å‡ºã€‚<br/>
æ­¤æ—¶ä½¿ç”¨ importScripts() æ–¹æ³•å¼•å…¥ä»–æ¨¡å—ï¼Œä¼šæŠ¥é”™ã€‚<br/>
æ­¤æ—¶éœ€è¦æŒ‡å®šæ¨¡å—ç±»å‹ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// main.jsï¼ˆä¸»çº¿ç¨‹çš„ä»£ç ï¼‰</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-built_in">new</span> Worker(<span class="hljs-string">'/worker.js'</span>, {
    <span class="hljs-keyword">type</span>: <span class="hljs-string">'module'</span>  <span class="hljs-comment">// æŒ‡å®š worker.js çš„ç±»å‹</span>
});
</code></pre>

<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// worker.jsï¼ˆworkerçº¿ç¨‹çš„ä»£ç ï¼‰</span>
import <span class="hljs-keyword">add</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.js'</span>; <span class="hljs-comment">// å¯¼å…¥å¤–éƒ¨js</span>

self.addEventListener(<span class="hljs-string">'message'</span>, e =&gt; { 
    postMessage(e.data);
});

<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
</code></pre>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils.js ä½¿ç”¨äº†ESModule æ¨¡å—å¯¼å‡ºçš„ add æ–¹æ³•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> add = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b;
</code></pre>
<h4 data-id="heading-15">ä½¿ç”¨workerçš„æ³¨æ„äº‹é¡¹</h4>
<p>1ï¼Œworkerä¸èƒ½ä½¿ç”¨windowä¸Šçš„domæ“ä½œï¼Œä¹Ÿä¸èƒ½è·å–domå¯¹è±¡,domç›¸å…³çš„ä¸œè¥¿åªæœ‰ä¸»çº¿ç¨‹æœ‰ã€‚workeråªèƒ½åšä¸€äº›è®¡ç®—ç›¸å…³çš„æ“ä½œ<br/>
2ï¼Œæœ‰çš„ä¸œè¥¿æ˜¯æ— æ³•é€šè¿‡ä¸»çº¿ç¨‹ä¼ é€’ä¸ªå­çº¿ç¨‹çš„ã€‚<br/>
æ¯”å¦‚ï¼šæ–¹æ³•ï¼ŒdomèŠ‚ç‚¹ï¼Œä¸€äº›å¯¹è±¡é‡Œçš„ç‰¹æ®Šè®¾ç½®(freeze,getter,setterè¿™äº›)æ‰€ä»¥vueçš„å“åº”å¼å¯¹è±¡åœ¨ä¼ é€’ä¹‹åå°±ä¼šå˜æˆæ™®é€šå¯¹è±¡</p>
<h4 data-id="heading-16">workerå®é™…åº”ç”¨æ¡ˆä¾‹</h4>
<p>1ï¼Œå°†è¯­æ³•æ£€æŸ¥ã€ä»£ç å‹ç¼©ç­‰ä»»åŠ¡æ”¾åœ¨ Worker ä¸­æ‰§è¡Œ<br/>
2ï¼Œå›¾åƒå¤„ç†ï¼šæ¯”å¦‚ä½¿ç”¨Canvaså¤„ç†å›¾ç‰‡ï¼Œè¿›è¡Œæ»¤é•œ</p>
<h4 data-id="heading-17">workeræ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<p>å‡å°‘é€šä¿¡å¼€é”€ï¼šé¿å…é¢‘ç¹ä¼ é€’å¤§é‡æ•°æ®ï¼Œå¿…è¦æ—¶ä½¿ç”¨ Transferable Objectsï¼ˆå¦‚ ArrayBufferï¼‰<br/>
æ‰¹é‡å¤„ç†ï¼šå¯¹äºå¤§æ‰¹é‡ä»»åŠ¡ï¼Œå¯æ‰¹é‡åˆ›å»º Worker å¹¶è¡Œå¤„ç†<br/>
å¸¸é©»çº¿ç¨‹ï¼šå¯¹äºé¢‘ç¹ä½¿ç”¨çš„ Workerï¼Œå¯ä¿æŒå¸¸é©»è€Œéé‡å¤åˆ›å»º<br/>
é”™è¯¯å¤„ç†ï¼šå§‹ç»ˆç›‘å¬ onerror äº‹ä»¶ï¼Œæ•è· Worker å†…éƒ¨çš„å¼‚å¸¸</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nextjså­¦ä¹ 4ï¼šåˆ›å»ºæœåŠ¡ç«¯ APIï¼ˆè·¯ç”±å¤„ç†ç¨‹åºï¼‰]]></title>    <link>https://juejin.cn/post/7591177139660554294</link>    <guid>https://juejin.cn/post/7591177139660554294</guid>    <pubDate>2026-01-04T01:13:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591177139660554294" data-draft-id="7582776967817166848" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nextjså­¦ä¹ 4ï¼šåˆ›å»ºæœåŠ¡ç«¯ APIï¼ˆè·¯ç”±å¤„ç†ç¨‹åºï¼‰"/> <meta itemprop="keywords" content="Next.js"/> <meta itemprop="datePublished" content="2026-01-04T01:13:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ±Ÿä¸œæµæ°´"/> <meta itemprop="url" content="https://juejin.cn/user/1151943917181880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nextjså­¦ä¹ 4ï¼šåˆ›å»ºæœåŠ¡ç«¯ APIï¼ˆè·¯ç”±å¤„ç†ç¨‹åºï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943917181880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ±Ÿä¸œæµæ°´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:13:21.000Z" title="Sun Jan 04 2026 01:13:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰åç«¯åˆ†ç¦»æ¶æ„ä¸­ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´é€šè¿‡ API æ¥å£æ¥äº¤äº’ã€‚è¿™ä¸ªAPI æ¥å£åœ¨ Next.js ä¸­æœ‰ä¸ªæ›´ä¸ºæ­£å¼çš„ç§°å‘¼ï¼Œå°±æ˜¯<strong>è·¯ç”±å¤„ç†ç¨‹åº</strong>ã€‚</p>
<h2 data-id="heading-0">å®šä¹‰è·¯ç”±å¤„ç†ç¨‹åº</h2>
<p>å†™è·¯ç”±å¤„ç†ç¨‹åºï¼Œä½ éœ€è¦å®šä¹‰ä¸€ä¸ªåä¸ºÂ <code>route.js</code>çš„ç‰¹æ®Šæ–‡ä»¶ã€‚ï¼ˆæ³¨æ„æ˜¯Â <code>route</code>Â ä¸æ˜¯Â <code>router</code>ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93becba8e90944ef90a6740b6277caca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768094001&amp;x-signature=%2FWQ4kkkXRzJGf%2Bug3BTGTewMczU%3D" alt="image.png" loading="lazy"/></p>
<p>è¯¥æ–‡ä»¶å¿…é¡»åœ¨Â <code>app</code>ç›®å½•ä¸‹ï¼Œå¯ä»¥åœ¨Â <code>app</code>Â åµŒå¥—çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œä½†æ˜¯è¦æ³¨æ„Â <code>page.js</code>å’ŒÂ <code>route.js</code>ä¸èƒ½åœ¨åŒä¸€å±‚çº§åŒæ—¶å­˜åœ¨ã€‚</p>
<p>æƒ³æƒ³ä¹Ÿèƒ½ç†è§£ï¼Œ<code>page.js</code>å’ŒÂ <code>route.js</code>æœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹è·¯ç”±çš„å“åº”ã€‚<code>page.js</code>ä¸»è¦è´Ÿè´£æ¸²æŸ“ UIï¼Œ<code>route.js</code>ä¸»è¦è´Ÿè´£å¤„ç†è¯·æ±‚ã€‚å¦‚æœåŒæ—¶å­˜åœ¨ï¼ŒNext.js å°±ä¸çŸ¥é“ç”¨è°çš„é€»è¾‘äº†ã€‚</p>
<h3 data-id="heading-1">GET è¯·æ±‚</h3>
<p>è®©æˆ‘ä»¬ä»å†™ GET è¯·æ±‚å¼€å§‹ï¼Œæ¯”å¦‚å†™ä¸€ä¸ªè·å–æ–‡ç« åˆ—è¡¨çš„æ¥å£ã€‚</p>
<p>æ–°å»ºÂ <code>app/api/posts/route.js</code>Â æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/server'</span>
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://jsonplaceholder.typicode.com/posts'</span>)
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>()
 
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">json</span>({ data })
}
</code></pre>
<p>æµè§ˆå™¨è®¿é—®Â <code>http://localhost:3000/api/posts</code>Â æŸ¥çœ‹æ¥å£è¿”å›çš„æ•°æ®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16018a9457744d00a28147ad266b5860~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768094001&amp;x-signature=iiLxixrg%2F4OMUV8x%2FK98WNLQk5c%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p>
<ol>
<li>
<p>æˆ‘ä»¬Â <code>export</code>Â ä¸€ä¸ªåä¸ºÂ <code>GET</code>Â çš„Â <code>async</code>Â å‡½æ•°æ¥å®šä¹‰ GET è¯·æ±‚å¤„ç†ï¼Œæ³¨æ„æ˜¯ export è€Œä¸æ˜¯ export default</p>
</li>
<li>
<p>æˆ‘ä»¬ä½¿ç”¨Â <code>next/server</code>Â çš„ NextResponse å¯¹è±¡ç”¨äºè®¾ç½®å“åº”å†…å®¹ï¼Œä½†è¿™é‡Œä¸ä¸€å®šéè¦ç”¨Â <code>NextResponse</code>ï¼Œç›´æ¥ä½¿ç”¨Â <code>Response</code>Â ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
</li>
<li>
<p>æˆ‘ä»¬å°†æ¥å£å†™åœ¨äº†Â <code>app/api</code>Â æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶ä¸æ˜¯å› ä¸ºæ¥å£ä¸€å®šè¦æ”¾åœ¨åä¸ºÂ <code>api</code>Â æ–‡ä»¶å¤¹ä¸‹ã€‚å¦‚æœä½ ä»£ç å†™åœ¨Â <code>app/posts/route.js</code>ï¼Œå¯¹åº”çš„æ¥å£åœ°å€å°±æ˜¯Â <code>/posts</code>ã€‚æ”¾åœ¨Â <code>api</code>Â æ–‡ä»¶å¤¹ä¸‹åªæ˜¯ä¸ºäº†æ–¹ä¾¿åŒºåˆ†åœ°å€æ˜¯æ¥å£è¿˜æ˜¯é¡µé¢ã€‚</p>
</li>
</ol>
<p>ä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ¨èä½¿ç”¨Â <code>NextResponse</code>ï¼Œå› ä¸ºå®ƒæ˜¯ Next.js åŸºäºÂ <code>Response</code>Â çš„å°è£…ï¼Œå®ƒå¯¹ TypeScript æ›´åŠ å‹å¥½ï¼ŒåŒæ—¶æä¾›äº†æ›´ä¸ºæ–¹ä¾¿çš„ç”¨æ³•ï¼Œæ¯”å¦‚è·å– Cookie ç­‰ã€‚</p>
<h3 data-id="heading-2">æ”¯æŒæ–¹æ³•</h3>
<p>Next.js æ”¯æŒÂ <code>GET</code>ã€<code>POST</code>ã€<code>PUT</code>ã€<code>PATCH</code>ã€<code>DELETE</code>ã€<code>HEAD</code>Â å’ŒÂ <code>OPTIONS</code>Â è¿™äº› HTTP è¯·æ±‚æ–¹æ³•ã€‚å¦‚æœä¼ å…¥äº†ä¸æ”¯æŒçš„è¯·æ±‚æ–¹æ³•ï¼ŒNext.js ä¼šè¿”å›Â <code>405 Method Not Allowed</code>ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// route.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request</span>) {}
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">HEAD</span>(<span class="hljs-params">request</span>) {}
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">request</span>) {}
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PUT</span>(<span class="hljs-params">request</span>) {}
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DELETE</span>(<span class="hljs-params">request</span>) {}
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PATCH</span>(<span class="hljs-params">request</span>) {}
 
<span class="hljs-comment">// å¦‚æœ `OPTIONS` æ²¡æœ‰å®šä¹‰, Next.js ä¼šè‡ªåŠ¨å®ç° `OPTIONS`</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">OPTIONS</span>(<span class="hljs-params">request</span>) {}
</code></pre>
<p>ç»§ç»­ä¿®æ”¹Â <code>app/api/posts/route.js</code>ï¼Œæ·»åŠ ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">request</span>) {
  <span class="hljs-keyword">const</span> article = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>()
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">id</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">slice</span>(-<span class="hljs-number">8</span>),
    <span class="hljs-attr">data</span>: article
  }, { <span class="hljs-attr">status</span>: <span class="hljs-number">201</span> })
}
</code></pre>
<h3 data-id="heading-3">ä¼ å…¥å‚æ•°</h3>
<p>ç°åœ¨è®©æˆ‘ä»¬å…·ä½“çœ‹ä¸‹è¯·æ±‚æ–¹æ³•ã€‚æ¯ä¸ªè¯·æ±‚æ–¹æ³•çš„å¤„ç†å‡½æ•°ä¼šè¢«ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªÂ <code>request</code>ï¼Œä¸€ä¸ªÂ <code>context</code>Â ã€‚ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request, context</span>) {}
</code></pre>
<p>request å¯¹è±¡æ˜¯ä¸€ä¸ªÂ <a href="https://juejin.cn/book/7307859898316881957/section/7309079651500949530#heading-23" title="https://juejin.cn/book/7307859898316881957/section/7309079651500949530#heading-23" target="_blank">NextRequest</a>Â å¯¹è±¡ï¼Œå®ƒæ˜¯åŸºäºÂ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FRequest" title="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FRequest" target="_blank">Web Request API</a>Â çš„æ‰©å±•ã€‚ä½¿ç”¨ request ï¼Œä½ å¯ä»¥å¿«æ·è¯»å– cookies å’Œå¤„ç† URLã€‚</p>
<p>æˆ‘ä»¬è¿™é‡Œè®²è®²å¦‚ä½•è·å– URL å‚æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request, context</span>) {
  <span class="hljs-comment">//  è®¿é—® /home, pathname çš„å€¼ä¸º /home</span>
  <span class="hljs-keyword">const</span> pathname = request.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">pathname</span>
  <span class="hljs-comment">// è®¿é—® /home?name=lee, searchParams çš„å€¼ä¸º { 'name': 'lee' }</span>
  <span class="hljs-keyword">const</span> searchParams = request.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">searchParams</span>
}
</code></pre>
<p>å…¶ä¸­ nextUrl æ˜¯åŸºäº Web URL API çš„æ‰©å±•ï¼ˆå¦‚æœä½ æƒ³è·å–å…¶ä»–å€¼ï¼Œå‚è€ƒÂ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FURL" title="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FURL" target="_blank">URL API</a>ï¼‰ï¼ŒåŒæ ·æä¾›äº†ä¸€äº›æ–¹ä¾¿ä½¿ç”¨çš„æ–¹æ³•ã€‚</p>
<h4 data-id="heading-4">context (optional)</h4>
<p>ç›®å‰<code>context</code>Â åªæœ‰ä¸€ä¸ªå€¼å°±æ˜¯Â <code>params</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å«å½“å‰åŠ¨æ€è·¯ç”±å‚æ•°çš„å¯¹è±¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// app/dashboard/[team]/route.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request, { params }</span>) {
  <span class="hljs-keyword">const</span> team = params.<span class="hljs-property">team</span>
}
</code></pre>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<p>éœ€æ±‚ï¼šç›®å‰ GET è¯·æ±‚Â <code>/api/posts</code>Â æ—¶ä¼šè¿”å›æ‰€æœ‰æ–‡ç« æ•°æ®ï¼Œç°åœ¨å¸Œæœ› GET è¯·æ±‚Â <code>/api/posts/1?dataField=title</code>Â è·å– post id ä¸º 1 çš„æ–‡ç« æ•°æ®ï¼ŒdataField ç”¨äºæŒ‡å®šè¿”å›å“ªäº›å­—æ®µæ•°æ®ã€‚</p>
<p>æ–°å»ºÂ <code>/api/posts/[id]/route.js</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/server'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request, { params }</span>) {
  <span class="hljs-keyword">const</span> field = request.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"dataField"</span>)
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> ((<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://jsonplaceholder.typicode.com/posts/<span class="hljs-subst">${params.id}</span>`</span>)).<span class="hljs-title function_">json</span>())
  <span class="hljs-keyword">const</span> result = field ? { [field]: data[field] } : data
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">json</span>(result)
}
</code></pre>
<p>ç°åœ¨æœ‰äº†æœåŠ¡ç«¯ API ï¼Œå®¢æˆ·ç«¯ç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨ axios æˆ– fetch æ¥è¯·æ±‚æ•°æ®äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nextjså­¦ä¹ 5ï¼šSuspense ä¸ Streaming]]></title>    <link>https://juejin.cn/post/7590330924001853503</link>    <guid>https://juejin.cn/post/7590330924001853503</guid>    <pubDate>2026-01-04T01:35:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590330924001853503" data-draft-id="7582783931163148323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nextjså­¦ä¹ 5ï¼šSuspense ä¸ Streaming"/> <meta itemprop="keywords" content="Next.js"/> <meta itemprop="datePublished" content="2026-01-04T01:35:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ±Ÿä¸œæµæ°´"/> <meta itemprop="url" content="https://juejin.cn/user/1151943917181880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nextjså­¦ä¹ 5ï¼šSuspense ä¸ Streaming
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943917181880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ±Ÿä¸œæµæ°´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:35:05.000Z" title="Sun Jan 04 2026 01:35:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>Suspense</code> æ˜¯ Next.js é¡¹ç›®ä¸­å¸¸ç”¨çš„ä¸€ä¸ªç»„ä»¶ï¼Œäº†è§£å…¶åŸç†å’ŒèƒŒæ™¯æœ‰åŠ©äºæˆ‘ä»¬æ­£ç¡®ä½¿ç”¨ <code>Suspense</code> ç»„ä»¶ã€‚</p>
<h2 data-id="heading-0">ä¼ ç»Ÿ SSR</h2>
<p>ä¼ ç»Ÿ SSRï¼Œéœ€è¦ç»è¿‡ä¸€ç³»åˆ—çš„æ­¥éª¤ï¼Œç”¨æˆ·æ‰èƒ½æŸ¥çœ‹é¡µé¢ã€ä¸ä¹‹äº¤äº’ã€‚</p>
<p>å…·ä½“è¿™äº›æ­¥éª¤æ˜¯ï¼š</p>
<ol>
<li>æœåŠ¡ç«¯è·å–æ‰€æœ‰æ•°æ®ï¼›</li>
<li>æœåŠ¡ç«¯æ¸²æŸ“ HTMLï¼›</li>
<li>å°†é¡µé¢çš„ HTMLã€CSSã€JavaScript å‘é€åˆ°å®¢æˆ·ç«¯ï¼›</li>
<li>ä½¿ç”¨ HTML å’Œ CSS ç”Ÿæˆä¸å¯äº¤äº’çš„ç”¨æˆ·ç•Œé¢ï¼ˆnon-interactive UIï¼‰ï¼›</li>
<li>React å¯¹ç”¨æˆ·ç•Œé¢è¿›è¡Œæ°´åˆï¼ˆhydrateï¼‰ï¼Œä½¿å…¶å¯äº¤äº’ï¼ˆinteractive UIï¼‰ï¼›</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7b20b7be5e548ccad0115bb7290cb69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=8oGXAAgwYYSEaQN5G9SRJyhGsCE%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™äº›æ­¥éª¤æ˜¯è¿ç»­çš„ã€é˜»å¡çš„ã€‚è¿™æ„å‘³ç€æœåŠ¡ç«¯åªèƒ½åœ¨è·å–æ‰€æœ‰æ•°æ®åæ¸²æŸ“ HTMLï¼ŒReact åªèƒ½åœ¨ä¸‹è½½äº†æ‰€æœ‰ç»„ä»¶ä»£ç åæ‰èƒ½è¿›è¡Œæ°´åˆï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fa275175615468695e714e4eefe3212~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=TSz0K1LR%2FLdO6H2%2Br7RUaq%2Fl7ag%3D" alt="image.png" loading="lazy"/></p>
<p>ä¼ ç»Ÿ SSR å‡ ä¸ªç¼ºç‚¹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>SSR çš„æ•°æ®è·å–å¿…é¡»åœ¨ç»„ä»¶æ¸²æŸ“ä¹‹å‰</strong></li>
<li><strong>ç»„ä»¶çš„ JavaScript å¿…é¡»å…ˆåŠ è½½åˆ°å®¢æˆ·ç«¯ï¼Œæ‰èƒ½å¼€å§‹æ°´åˆ</strong></li>
<li><strong>æ‰€æœ‰ç»„ä»¶å¿…é¡»å…ˆæ°´åˆï¼Œç„¶åæ‰èƒ½è·Ÿå…¶ä¸­ä»»æ„ä¸€ä¸ªç»„ä»¶äº¤äº’</strong>ï¼›</li>
</ol>
<h2 data-id="heading-1">Suspense</h2>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒReact 18 å¼•å…¥äº†Â <code>&lt;Suspense&gt;</code>Â ç»„ä»¶ã€‚</p>
<p><code>&lt;Suspense&gt;</code>Â å…è®¸ä½ æ¨è¿Ÿæ¸²æŸ“æŸäº›å†…å®¹ï¼Œç›´åˆ°æ»¡è¶³æŸäº›æ¡ä»¶ï¼ˆä¾‹å¦‚æ•°æ®åŠ è½½å®Œæ¯•ï¼‰ã€‚</p>
<p>ä½ å¯ä»¥å°†åŠ¨æ€ç»„ä»¶åŒ…è£…åœ¨ Suspense ä¸­ï¼Œç„¶åå‘å…¶ä¼ é€’ä¸€ä¸ª fallback UIï¼Œä»¥ä¾¿åœ¨åŠ¨æ€ç»„ä»¶åŠ è½½æ—¶æ˜¾ç¤ºã€‚</p>
<p><strong>å¦‚æœæ•°æ®è¯·æ±‚ç¼“æ…¢ï¼Œä½¿ç”¨ Suspense æµå¼æ¸²æŸ“è¯¥ç»„ä»¶ï¼Œä¸ä¼šå½±å“é¡µé¢å…¶ä»–éƒ¨åˆ†çš„æ¸²æŸ“ï¼Œæ›´ä¸ä¼šé˜»å¡æ•´ä¸ªé¡µé¢</strong>ã€‚</p>
<p>è®©æˆ‘ä»¬æ¥å†™ä¸€ä¸ªä¾‹å­ï¼Œæ–°å»ºÂ <code>app/dashboard/page.js</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">sleep</span> = ms =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(r, ms));

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PostFeed</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">2000</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello PostFeed<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Weather</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">8000</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello Weather<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Recommend</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">5000</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello Recommend<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Dashboard</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{padding:</span> '<span class="hljs-attr">20px</span>'}}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">p</span>&gt;</span>Loading PostFeed Component<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">PostFeed</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">p</span>&gt;</span>Loading Weather Component<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Weather</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">p</span>&gt;</span>Loading Recommend Component<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Recommend</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span>
  )
}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨ Suspense åŒ…è£…äº†ä¸‰ä¸ªç»„ä»¶ï¼Œå¹¶é€šè¿‡ sleep å‡½æ•°æ¨¡æ‹Ÿäº†æ•°æ®è¯·æ±‚è€—è´¹çš„æ—¶é•¿ã€‚åŠ è½½æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3fd5c32e4404149ad4d5b38c8352016~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=MlxoTlJTTsZC0z8x9wcKdQydMOQ%3D" alt="60be4c9076614e16934f26215a242841~tplv-k3u1fbpfcp-jj-mark_1512_0_0_0_q75.awebp" loading="lazy"/></p>
<p>è®©æˆ‘ä»¬è§‚å¯Ÿä¸‹ dashboard è¿™ä¸ª HTML æ–‡ä»¶çš„åŠ è½½æƒ…å†µï¼Œä½ ä¼šå‘ç°å®ƒä¸€å¼€å§‹æ˜¯ 2.03sï¼Œç„¶åå˜æˆäº† 5.03sï¼Œæœ€åå˜æˆäº† 8.04sï¼Œè¿™ä¸å°±æ­£æ˜¯æˆ‘ä»¬è®¾ç½®çš„ sleep æ—¶é—´å—ï¼Ÿ</p>
<p>æŸ¥çœ‹ dashboard è¯·æ±‚çš„å“åº”å¤´ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ea40e899a2446e2a0ca81cd82cdecd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=u6pQ2Y9gthlX3xESLkjR2fjyOQw%3D" alt="image.png" loading="lazy"/></p>
<p><strong><code>Transfer-Encoding</code>Â æ ‡å¤´çš„å€¼ä¸ºÂ <code>chunked</code>ï¼Œè¡¨ç¤ºæ•°æ®å°†ä»¥ä¸€ç³»åˆ—åˆ†å—çš„å½¢å¼è¿›è¡Œå‘é€</strong>ã€‚</p>
<blockquote>
<p>åˆ†å—ä¼ è¾“ç¼–ç ï¼ˆChunked transfer encodingï¼‰æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼‰ä¸­çš„ä¸€ç§æ•°æ®ä¼ è¾“æœºåˆ¶ï¼Œå…è®¸ HTTP ç”±ç½‘é¡µæœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯åº”ç”¨ï¼ˆ é€šå¸¸æ˜¯ç½‘é¡µæµè§ˆå™¨ï¼‰çš„æ•°æ®å¯ä»¥åˆ†æˆå¤šä¸ªéƒ¨åˆ†ã€‚åˆ†å—ä¼ è¾“ç¼–ç åªåœ¨ HTTP åè®®1.1ç‰ˆæœ¬ï¼ˆHTTP/1.1ï¼‰ä¸­æä¾›ã€‚</p>
</blockquote>
<p>å†æŸ¥çœ‹ dashboard è¿”å›çš„æ•°æ®ï¼ˆè¿™é‡Œæˆ‘ä»¬åšäº†ç®€åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        // ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"__className_aaf875"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding:20px"</span>&gt;</span>
            <span class="hljs-comment">&lt;!--$?--&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"B:0"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Loading PostFeed Component<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-comment">&lt;!--/$--&gt;</span>
            <span class="hljs-comment">&lt;!--$?--&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"B:1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Loading Weather Component<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-comment">&lt;!--/$--&gt;</span>
            <span class="hljs-comment">&lt;!--$?--&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"B:2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Loading Recommend Component<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-comment">&lt;!--/$--&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
        // ...
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">hidden</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"S:0"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello PostFeed<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
            <span class="hljs-comment">// äº¤æ¢ä½ç½®</span>
            $RC = <span class="hljs-keyword">function</span>(<span class="hljs-params">b, c, e</span>) {
                <span class="hljs-comment">// ...</span>
            };
            $RC(<span class="hljs-string">"B:0"</span>, <span class="hljs-string">"S:0"</span>)
        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">hidden</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"S:2"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello Recommend<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
            $RC(<span class="hljs-string">"B:2"</span>, <span class="hljs-string">"S:2"</span>)
        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">hidden</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"S:1"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello Weather<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
            $RC(<span class="hljs-string">"B:1"</span>, <span class="hljs-string">"S:1"</span>)
        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>

</code></pre>
<p>å¯ä»¥çœ‹åˆ°ä½¿ç”¨ Suspense ç»„ä»¶çš„ fallback UI å’Œæ¸²æŸ“åçš„å†…å®¹éƒ½ä¼šå‡ºç°åœ¨è¯¥ HTML æ–‡ä»¶ä¸­ï¼Œ<strong>è¯´æ˜è¯¥è¯·æ±‚æŒç»­ä¸æœåŠ¡ç«¯ä¿æŒè¿æ¥ï¼ŒæœåŠ¡ç«¯åœ¨ç»„ä»¶æ¸²æŸ“å®Œåä¼šå°†æ¸²æŸ“åçš„å†…å®¹è¿½åŠ ä¼ ç»™å®¢æˆ·ç«¯</strong>ã€‚</p>
<p>å®¢æˆ·ç«¯æ”¶åˆ°æ–°çš„å†…å®¹åè¿›è¡Œè§£æï¼Œæ‰§è¡Œç±»ä¼¼äºÂ <code>$RC("B:2", "S:2")</code>è¿™æ ·çš„å‡½æ•°äº¤æ¢ DOM å†…å®¹ï¼Œä½¿ fallback UI æ›¿æ¢ä¸ºæ¸²æŸ“åçš„å†…å®¹ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¹‹ä¸º <strong>Streaming Server Renderingï¼ˆæµå¼æ¸²æŸ“ï¼‰</strong>ï¼Œ<strong>å®ƒè§£å†³äº†ä¸ŠèŠ‚è¯´çš„ä¼ ç»Ÿ SSR çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æ•°æ®è·å–å¿…é¡»åœ¨ç»„ä»¶æ¸²æŸ“ä¹‹å‰</strong>ã€‚ä½¿ç”¨ Suspenseï¼Œå…ˆæ¸²æŸ“ Fallback UIï¼Œç­‰æ•°æ®è¿”å›å†æ¸²æŸ“å…·ä½“çš„ç»„ä»¶å†…å®¹ã€‚</p>
<p>ä½¿ç”¨ Suspense è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ <strong>Selective Hydrationï¼ˆé€‰æ‹©æ€§æ°´åˆï¼‰</strong>ã€‚ç®€å•çš„æ¥è¯´ï¼Œå½“å¤šä¸ªç»„ä»¶ç­‰å¾…æ°´åˆçš„æ—¶å€™ï¼ŒReact å¯ä»¥æ ¹æ®ç”¨æˆ·äº¤äº’å†³å®šç»„ä»¶æ°´åˆçš„ä¼˜å…ˆçº§ã€‚æ¯”å¦‚ Sidebar å’Œ MainContent ç»„ä»¶éƒ½åœ¨ç­‰å¾…æ°´åˆï¼Œå¿«è¦åˆ° Sidebar äº†ï¼Œä½†æ­¤æ—¶ç”¨æˆ·ç‚¹å‡»äº† MainContent ç»„ä»¶ï¼ŒReact ä¼šåœ¨å•å‡»äº‹ä»¶çš„æ•è·é˜¶æ®µåŒæ­¥æ°´åˆ MainContent ç»„ä»¶ä»¥ä¿è¯ç«‹å³å“åº”ï¼ŒSidebar ç¨åæ°´åˆã€‚</p>
<h2 data-id="heading-2">Streaming</h2>
<p><strong>Suspense èƒŒåçš„è¿™ç§æŠ€æœ¯ç§°ä¹‹ä¸º Streaming</strong>ã€‚</p>
<p><strong>å°†é¡µé¢çš„ HTML æ‹†åˆ†æˆå¤šä¸ª chunksï¼Œç„¶åé€æ­¥å°†è¿™äº›å—ä»æœåŠ¡ç«¯å‘é€åˆ°å®¢æˆ·ç«¯ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1134a44111224c3f9ec4ec38c457a26a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=0n356kbxyoCgIfFfXLqX2myGrsY%3D" alt="image.png" loading="lazy"/></p>
<p>ç®€å•ç†è§£ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šæœåŠ¡å™¨åœ¨ç”Ÿæˆ HTML æ—¶ï¼Œä¸ç”¨ç­‰æ‰€æœ‰æ•°æ®ï¼ˆæ¯”å¦‚æ¥å£è¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ï¼‰éƒ½è¿”å›ï¼Œè€Œæ˜¯<strong>å…ˆæŠŠé¡µé¢çš„é™æ€éª¨æ¶ï¼ˆå¯¼èˆªã€é¡µè„šã€ç©ºçš„å†…å®¹å®¹å™¨ï¼‰ä»¥ chunk å—çš„å½¢å¼å‘ç»™æµè§ˆå™¨</strong>ï¼Œæµè§ˆå™¨æ”¶åˆ°åç«‹åˆ»æ¸²æŸ“å‡ºéª¨æ¶ï¼Œå‡å°‘ç™½å±æ—¶é—´ã€‚</li>
<li>ä¹‹åæœåŠ¡å™¨å†é€ä¸ªè·å–åŠ¨æ€æ•°æ®ï¼ˆæ¯”å¦‚å•†å“åˆ—è¡¨ã€æ–‡ç« å†…å®¹ï¼‰ï¼Œæ¯æ‹¿åˆ°ä¸€éƒ¨åˆ†å°±ç”Ÿæˆå¯¹åº”çš„ HTML ç‰‡æ®µï¼Œå†ä»¥ chunk å—å‘é€ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°å<strong>å¢é‡æ’å…¥åˆ°é¡µé¢ä¸­</strong>ï¼Œé¡µé¢å†…å®¹é€æ­¥ <strong>å¡«å……</strong> å®Œæˆã€‚</li>
<li><strong>æŠ€æœ¯ä¾èµ–</strong>ï¼šå°±æ˜¯æˆ‘ä»¬ä¹‹å‰è¯´çš„ HTTP åˆ†å—ä¼ è¾“ï¼ˆ<code>Transfer-Encoding: chunked</code>ï¼‰æˆ– HTTP/2 äºŒè¿›åˆ¶åˆ†å¸§ï¼ŒNext.jsã€Nuxt.js ç­‰æ¡†æ¶çš„ SSR æµå¼æ¸²æŸ“éƒ½æ˜¯è¿™ä¹ˆå®ç°çš„ã€‚</li>
</ul>
<p>è¿™æ ·å°±å¯ä»¥æ›´å¿«çš„å±•ç°å‡ºé¡µé¢çš„æŸäº›å†…å®¹ï¼Œè€Œæ— éœ€åœ¨æ¸²æŸ“ UI ä¹‹å‰ç­‰å¾…åŠ è½½æ‰€æœ‰æ•°æ®ã€‚</p>
<p><strong>æå‰å‘é€çš„ç»„ä»¶å¯ä»¥æå‰å¼€å§‹æ°´åˆï¼Œè¿™æ ·å½“å…¶ä»–éƒ¨åˆ†è¿˜åœ¨åŠ è½½çš„æ—¶å€™ï¼Œç”¨æˆ·å¯ä»¥å’Œå·²å®Œæˆæ°´åˆçš„ç»„ä»¶è¿›è¡Œäº¤äº’ï¼Œæœ‰æ•ˆæ”¹å–„ç”¨æˆ·ä½“éªŒ</strong>ã€‚</p>
<p>ä¼ ç»Ÿ SSRï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce5dfd0d23004d1a9ccb8436d4af61f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=y98HaoMnwMTV75Ua9J0LqWtAQXw%3D" alt="image.png" loading="lazy"/></p>
<p>ä½¿ç”¨ Streaming åï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4072d62dfa1a430999f3d08c3753688e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=MPGbAuejwxPjr6HSYGVwcGum89U%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åœ¨ Next.js ä¸­æœ‰ä¸¤ç§å®ç° Streaming çš„æ–¹æ³•</strong>ï¼š</p>
<ol>
<li><strong>é¡µé¢çº§åˆ«ï¼Œä½¿ç”¨Â <code>loading.jsx</code></strong></li>
<li><strong>ç‰¹å®šç»„ä»¶ï¼Œä½¿ç”¨Â <code>&lt;Suspense&gt;</code></strong></li>
</ol>
<p>Suspense å’Œ Streaming ç¡®å®å¾ˆå¥½ï¼Œå°†åŸæœ¬åªèƒ½å…ˆè·å–æ•°æ®ã€å†æ¸²æŸ“æ°´åˆçš„ä¼ ç»Ÿ SSR æ”¹ä¸º<strong>æ¸è¿›å¼æ¸²æŸ“æ°´åˆ</strong>ã€‚</p>
<p>ä½†è¿˜æœ‰ä¸€äº›é—®é¢˜æ²¡æœ‰è§£å†³ï¼š</p>
<p><strong>1. ç”¨æˆ·ä¸‹è½½çš„ JavaScript ä»£ç ï¼Œè¯¥ä¸‹è½½çš„ä»£ç è¿˜æ˜¯æ²¡æœ‰å°‘ï¼Œå¯æ˜¯ç”¨æˆ·çœŸçš„éœ€è¦ä¸‹è½½é‚£ä¹ˆå¤šçš„ Javascript ä»£ç å—ï¼Ÿ</strong></p>
<p><strong>2. æ‰€æœ‰çš„ç»„ä»¶éƒ½å¿…é¡»åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ°´åˆï¼Œå¯¹äºä¸éœ€è¦äº¤äº’æ€§çš„ç»„ä»¶å…¶å®æ²¡æœ‰å¿…è¦è¿›è¡Œæ°´åˆã€‚</strong></p>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æœåŠ¡ç«¯ç»„ä»¶è¦è§£å†³çš„é—®é¢˜äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31b72c972bf74068af79234745f61944~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=3ZhK6XvgutXLLh%2Fv11eK8SezfzQ%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[âš¡å¼€å‘è€…ç¥å™¨æ¥äº†ï¼Anthropicå®˜æ–¹Ralph Wiggumæ’ä»¶æ·±åº¦å®æµ‹ï¼šè®©Claude Codeå˜èº«æ°¸ä¸åœæ­‡çš„å…¨è‡ªåŠ¨å¼€å‘æœºå™¨ï¼å‘Šåˆ«æ‰‹åŠ¨è°ƒè¯•ï¼iOSåŸç”Ÿåº”ç”¨]]></title>    <link>https://juejin.cn/post/7591066233670156314</link>    <guid>https://juejin.cn/post/7591066233670156314</guid>    <pubDate>2026-01-04T03:24:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591066233670156314" data-draft-id="7591079707698774026" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="âš¡å¼€å‘è€…ç¥å™¨æ¥äº†ï¼Anthropicå®˜æ–¹Ralph Wiggumæ’ä»¶æ·±åº¦å®æµ‹ï¼šè®©Claude Codeå˜èº«æ°¸ä¸åœæ­‡çš„å…¨è‡ªåŠ¨å¼€å‘æœºå™¨ï¼å‘Šåˆ«æ‰‹åŠ¨è°ƒè¯•ï¼iOSåŸç”Ÿåº”ç”¨"/> <meta itemprop="keywords" content="Claude,AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-04T03:24:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="win4r"/> <meta itemprop="url" content="https://juejin.cn/user/1739869037541555"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            âš¡å¼€å‘è€…ç¥å™¨æ¥äº†ï¼Anthropicå®˜æ–¹Ralph Wiggumæ’ä»¶æ·±åº¦å®æµ‹ï¼šè®©Claude Codeå˜èº«æ°¸ä¸åœæ­‡çš„å…¨è‡ªåŠ¨å¼€å‘æœºå™¨ï¼å‘Šåˆ«æ‰‹åŠ¨è°ƒè¯•ï¼iOSåŸç”Ÿåº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739869037541555/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    win4r
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:24:33.000Z" title="Sun Jan 04 2026 03:24:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®© Claude Code â€œåˆ«åœâ€ï¼šRalph Wiggum æ’ä»¶åˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2>
<p>å¦‚æœä½ ç”¨è¿‡å„ç§ AI ç¼–ç¨‹å·¥å…·ï¼Œå¤§æ¦‚ç‡é‡åˆ°è¿‡åŒä¸€ç§æ†‹å±ˆï¼šå®ƒå†™å®Œä¸€æ®µä»£ç ã€æ”¹å®Œå‡ ä¸ªæ–‡ä»¶ï¼Œå°±è§‰å¾—å·®ä¸å¤šå®Œæˆäº†ï¼Œç„¶ååœä¸‹ï¼Œç•™ä½ ä¸€ä¸ªäººé¢å¯¹æ„å»ºæ²¡è¿‡ã€æµ‹è¯•çº¢äº†ä¸€ç‰‡ã€UI ç»†èŠ‚è¿˜å·®ä¸€å£æ°”ã€æŸä¸ªè¾¹ç•Œ case ä¾ç„¶å´©ã€‚</p>
<p>çœŸå®å¼€å‘ä»æ¥ä¸æ˜¯ä¸€æ¬¡æ€§å†™å®Œï¼Œè€Œæ˜¯å†™ä¸€ç‚¹ â†’ è·‘ä¸€ä¸‹ â†’ æŠ¥é”™ â†’ ä¿® â†’ å†è·‘ â†’ å†ä¿®ï¼Œå¾ªç¯å¾€å¤ï¼Œç›´åˆ°è¾¾æ ‡ã€‚</p>
<p>Ralph Wiggum è¿™ä¸ª Claude Code å®˜æ–¹æ’ä»¶çš„å‰å®³ä¹‹å¤„å°±åœ¨äºï¼šå®ƒä¸è¯•å›¾æ›´èªæ˜åœ°å†™ä»£ç ï¼Œè€Œæ˜¯æŠŠ Claude Code å˜æˆä¸€ä¸ªå¯æ§çš„æŒç»­è¿­ä»£æ‰§è¡Œå™¨ã€‚ä½ è®¾å®šè§„åˆ™ï¼Œå®ƒå°±æŒ‰å›åˆåˆ¶ä¸€ç›´æ¨è¿›ï¼Œç›´åˆ°æ»¡è¶³é€€å‡ºæ¡ä»¶æ‰åœã€‚</p>
<p>ğŸ”¥ğŸ”¥ğŸ”¥æœ¬ç¯‡ç¬”è®°æ‰€å¯¹åº”çš„è§†é¢‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1zyiiBRE32%2F" target="_blank" title="https://www.bilibili.com/video/BV1zyiiBRE32/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1zyâ€¦</a></p>
<hr/>
<h3 data-id="heading-1">1ï¼‰Ralph Wiggum æ˜¯ä»€ä¹ˆï¼šä¸æ˜¯æ–°æ¨¡å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå¤–éƒ¨æ§åˆ¶å›è·¯</h3>
<p>Ralph çš„æœ¬è´¨éå¸¸æœ´ç´ ï¼šClaude æ¯æ¬¡æƒ³é€€å‡ºæ—¶ï¼ŒæŠŠå®ƒæ‹¦ä¸‹æ¥ï¼Œå†æŠŠåŒä¸€ä¸ªä»»åŠ¡å–‚å›å»ç»§ç»­åšã€‚</p>
<p>å®ƒä¾èµ–çš„æ˜¯ Claude Code çš„ Stop hook æœºåˆ¶ï¼šå½“ Claude è§‰å¾—è‡ªå·±åšå®Œäº†å‡†å¤‡ç»“æŸï¼Œæ’ä»¶çš„ stop hook ä¼šä»‹å…¥ï¼Œé˜»æ­¢é€€å‡ºå¹¶è§¦å‘ä¸‹ä¸€è½®ã€‚</p>
<p>æ‰€ä»¥ Ralph çš„æ ¸å¿ƒä»·å€¼ä¸æ˜¯çµæ„Ÿï¼Œè€Œæ˜¯èŠ‚å¥ã€‚å®ƒæŠŠå¤æ‚å·¥ç¨‹å˜æˆç¨³å®šçš„å›åˆåˆ¶æ¨è¿›ï¼š</p>
<ul>
<li>æœ¬è½®åšä»€ä¹ˆ</li>
<li>æœ¬è½®æ€ä¹ˆéªŒè¯</li>
<li>ä¸è¾¾æ ‡å°±ä¸‹ä¸€è½®ç»§ç»­ä¿®</li>
<li>è¾¾æ ‡æ‰å…è®¸ç»“æŸ</li>
</ul>
<hr/>
<h3 data-id="heading-2">2ï¼‰å®ƒä¸ºä»€ä¹ˆå« Ralph Wiggumï¼šå¹¼ç¨šï¼Œä½†éå¸¸æœ‰æ•ˆçš„åšæŒ</h3>
<p>è¿™ä¸ªåå­—æ¥è‡ªè¾›æ™®æ£®ä¸€å®¶é‡Œçš„ Ralph Wiggumï¼šç»å¸¸çŠ¯é”™ã€ç»å¸¸ç¿»è½¦ï¼Œä½†ä¹Ÿä¼šåƒå°å­©ä¸€æ ·ç»§ç»­å°è¯•ï¼Œç›´åˆ°æŠŠäº‹æƒ…åšå¯¹ã€‚å¾ˆå¤šäººç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ä¸ªåå­—ä¼šè§‰å¾—ç¦»è°±ï¼Œä½†ç”¨è¿‡ä¹‹ååè€Œä¼šè§‰å¾—è´´åˆ‡ã€‚å·¥ç¨‹é‡Œæœ€ç¨€ç¼ºçš„ä¸æ˜¯èªæ˜ï¼Œæ˜¯ä¸åœä¸‹æ¥æŠŠçƒ‚å°¾æ”¶æ‰çš„è€å¿ƒã€‚</p>
<hr/>
<h3 data-id="heading-3">3ï¼‰æ€ä¹ˆç”¨ï¼šä¸‰æ¡å‘½ä»¤ + ä¸¤ä¸ªå…³é”®å‚æ•°</h3>
<p>ä¸åŒç¯å¢ƒé‡Œä½ å¯èƒ½çœ‹åˆ°ç®€å†™ï¼Œä½†æ›´ç¨³çš„ç†è§£æ–¹å¼æ˜¯æŒ‰å‘½åç©ºé—´å†™æ³•æ¥è®°ã€‚Claude Code çš„æ’ä»¶å‘½ä»¤é€šå¸¸ä»¥ æ’ä»¶å: ä½œä¸ºå‰ç¼€ã€‚</p>
<p>å¸¸è§å‘½ä»¤æ˜¯è¿™ä¸‰æ¡ï¼š</p>
<ul>
<li>å¯åŠ¨å¾ªç¯ï¼š/ralph-wiggum:ralph-loop æç¤ºè¯ --max-iterations N</li>
<li>å–æ¶ˆå¾ªç¯ï¼š/ralph-wiggum:cancel-ralph</li>
<li>æŸ¥çœ‹è¯´æ˜ï¼š/ralph-wiggum:help</li>
</ul>
<p>ç„¶åæ˜¯ä¸¤ä¸ªä½ ä¸€å®šä¼šç”¨ä¸Šçš„å‚æ•°ã€‚</p>
<p>max-iterations<br/>
ç»™å¾ªç¯åŠ ä¿é™©ä¸ã€‚å¦åˆ™ä»»åŠ¡ä¸€æ—¦å†™å¾—å¤ªæ³›ã€éªŒæ”¶æ¡ä»¶ä¸æ¸…æ™°ï¼Œå°±å¯èƒ½è·‘å¾ˆä¹…ã€‚è¿™ä¸ªå‚æ•°è®©å®ƒæœ€å¤šè¿­ä»£ N è½®ï¼Œåˆ°ç‚¹å¼ºåˆ¶åœã€‚</p>
<p>completion-promise<br/>
è¿™æ˜¯ Ralph çš„çµé­‚ï¼šæ˜ç¡®ä»€ä¹ˆæƒ…å†µä¸‹ç®—å®Œæˆã€‚æ’ä»¶ä¼šç›¯ç€ Claude çš„è¾“å‡ºï¼Œä¸€æ—¦å‡ºç°ä½ æŒ‡å®šçš„å®Œæˆæ ‡è®°ï¼Œå°±å…è®¸é€€å‡ºã€‚</p>
<p>ä½ ä¼šå‘ç°ï¼Œè¿™é‡ŒçœŸæ­£è®©å¾ªç¯å¯æ§çš„ä¸æ˜¯è¿­ä»£æ¬¡æ•°ï¼Œè€Œæ˜¯éªŒæ”¶å£å¾„ã€‚</p>
<hr/>
<h3 data-id="heading-4">4ï¼‰æœ€é‡è¦çš„ä¸€ç‚¹ï¼šRalph ä¸ä¼šæ›¿ä½ æƒ³æ¸…æ¥šéªŒæ”¶æ ‡å‡†</h3>
<p>å¾ˆå¤šäººç¬¬ä¸€æ¬¡ç”¨ Ralphï¼Œä¼šæŠŠæç¤ºè¯å†™æˆä¸€å¥è¯ï¼šæŠŠé¡¹ç›®å˜å¥½ã€ä¿®å¤ bugã€ä¼˜åŒ–ä¸€ä¸‹ UIã€‚ç„¶åè·‘åˆ°ç¬¬ 10 è½®ï¼Œå‘ç°æ•ˆæœå¹¶ä¸ç¨³å®šã€‚ä¸æ˜¯ Ralph ä¸è¡Œï¼Œè€Œæ˜¯ä½ ç»™äº†ä¸€ä¸ªæ— æ³•éªŒè¯çš„ç›®æ ‡ã€‚</p>
<p>Ralph çš„æ­£ç¡®æ‰“å¼€æ–¹å¼æ˜¯ï¼šæŠŠå¼€å‘ä»»åŠ¡å†™æˆå¯éªŒè¯çš„äº¤ä»˜æ¸…å•ã€‚</p>
<p>æ¯”å¦‚ä½ å¯ä»¥è¿™æ ·è¡¨è¾¾ï¼š</p>
<ul>
<li>æŠŠç™»å½•é¡µåšå¾—æ›´ä¸“ä¸š</li>
<li>é¡µé¢åœ¨ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯éƒ½ä¸æº¢å‡º</li>
<li>è¡¨å•æ ¡éªŒï¼šé‚®ç®±æ ¼å¼ä¸å¯¹æ—¶æç¤ºï¼›å¯†ç å°‘äº 8 ä½æç¤º</li>
<li>äº¤äº’ï¼šæŒ‰é’®æœ‰ hover ä¸ disabled çŠ¶æ€</li>
<li>è·‘æµ‹è¯•å…¨ç»¿æˆ–æ„å»ºé€šè¿‡</li>
<li>æ»¡è¶³ä»¥ä¸Šæ¡ä»¶åè¾“å‡ºæŒ‡å®šçš„å®Œæˆæ ‡è®°</li>
</ul>
<p>æ³¨æ„å®Œæˆæ ‡è®°æœ€å¥½å†™å¾—ä¸å®¹æ˜“è¯¯åˆ¤ï¼Œæ¯”å¦‚ç”¨ä¸€ä¸ªå¾ˆç‹¬ç‰¹çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯éšå£å°±å¯èƒ½å‡ºç°çš„ doneã€‚</p>
<hr/>
<h3 data-id="heading-5">5ï¼‰å“ªäº›åœºæ™¯æœ€é€‚åˆï¼šRalph çš„å¼ºé¡¹å…¶å®æ˜¯æ”¶å°¾æ´»</h3>
<p>Ralph æŠŠ Claude Code å˜æˆæŒç»­å¾ªç¯ï¼Œç‰¹åˆ«é€‚åˆé‚£äº›éœ€è¦å¤šè½®çº é”™çš„ä»»åŠ¡ã€‚</p>
<p>æˆ‘å»ºè®®ä½ ä¼˜å…ˆæŠŠ Ralph ç”¨åœ¨è¿™å››ç±»æœ€æŠ˜ç£¨äººçš„çœŸå®åœºæ™¯ï¼š</p>
<p>A. Bug ä¿®å¤<br/>
å°¤å…¶æ˜¯ä¿®äº†åˆå†’å‡ºæ¥çš„é‚£ç§ã€‚è®©å®ƒæ¯è½®éƒ½å¤ç° â†’ å®šä½ â†’ ä¿®å¤ â†’ è¿è¡Œæµ‹è¯•æˆ–æ„å»º â†’ å†å¤ç°ç¡®è®¤ã€‚ä½ åªéœ€è¦æŠŠå¤ç°æ­¥éª¤å’Œé€šè¿‡æ¡ä»¶å†™æ¸…æ¥šã€‚</p>
<p>B. è¡¥æµ‹è¯•ä¸å›å½’<br/>
è¿™ç±»ä»»åŠ¡å¤©ç„¶éœ€è¦å¾ªç¯ï¼šè¡¥ä¸€ä¸ªæµ‹è¯• â†’ å¤±è´¥ â†’ ä¿®å®ç° â†’ å†è¡¥ä¸‹ä¸€ä¸ªã€‚æµ‹è¯•å…¨ç»¿æœ¬èº«å°±æ˜¯æœ€æ¸…æ™°çš„å®Œæˆä¿¡å·ã€‚</p>
<p>C. ä¾èµ–è¿ç§»ä¸å¤§ç‰ˆæœ¬å‡çº§<br/>
æ¯”å¦‚æµ‹è¯•æ¡†æ¶è¿ç§»ã€è·¯ç”±å‡çº§ã€æ„å»ºå·¥å…·æ›¿æ¢ã€‚è¿ç§»æœ€æ€•åŠåŠå­ï¼šèƒ½ç¼–è¯‘ä½†è·‘ä¸èµ·æ¥ã€‚å¾ªç¯è·‘æ„å»ºå’Œæµ‹è¯•ï¼Œæ‰ä¼šæŠŠå°¾å·´æ”¶å¹²å‡€ã€‚</p>
<p>D. é‡æ„<br/>
é‡æ„æœ€éœ€è¦èŠ‚å¥ï¼šæ”¹ä¸€éƒ¨åˆ† â†’ éªŒè¯ â†’ å†æ”¹ä¸€éƒ¨åˆ†ã€‚Ralph çš„å›åˆåˆ¶éå¸¸é€‚åˆæŠŠé‡æ„æ‹†æˆç¨³å®šæ¨è¿›çš„å·¥ç¨‹åŠ¨ä½œã€‚</p>
<hr/>
<h3 data-id="heading-6">6ï¼‰å®ƒä¸ºä»€ä¹ˆæœ‰æ•ˆï¼šå› ä¸ºå®ƒæŠŠåé¦ˆå˜æˆäº†ä¸‹ä¸€è½®çš„ç‡ƒæ–™</h3>
<p>å¾ˆå¤š AI ç¼–ç¨‹å¤±è´¥ï¼Œå¹¶ä¸æ˜¯å› ä¸ºæ¨¡å‹ä¸ä¼šå†™ï¼Œè€Œæ˜¯å› ä¸ºå®ƒæ‹¿ä¸åˆ°è¶³å¤Ÿå¼ºçš„åé¦ˆé—­ç¯ã€‚å†™å®Œå°±åœï¼Œç­‰äºæŠŠæœ€å…³é”®çš„æŠ¥é”™ä¿¡æ¯ã€æµ‹è¯•ç»“æœã€æ„å»ºæ—¥å¿—ä¸¢æ‰äº†ã€‚</p>
<p>Ralph å¼ºåˆ¶ä½ è¿›å…¥ä¸€ç§æ›´æ¥è¿‘ç°å®å¼€å‘çš„æµç¨‹ï¼š</p>
<ul>
<li>è¿™è½®åšäº†ä»€ä¹ˆ</li>
<li>è¿™è½®éªŒè¯ç»“æœæ˜¯ä»€ä¹ˆ</li>
<li>ä¸‹ä¸€è½®å¿…é¡»åŸºäºè¿™äº›åé¦ˆç»§ç»­ä¿®æ­£</li>
</ul>
<p>åé¦ˆè¶Šå…·ä½“ï¼Œä¸‹ä¸€è½®è¶Šå‡†ã€‚è¿™ç§æœºåˆ¶åœ¨å·¥ç¨‹é‡Œå½“ç„¶æœ‰æ•ˆï¼Œå› ä¸ºæˆ‘ä»¬äººç±»å°±æ˜¯è¿™ä¹ˆè¿­ä»£å‡ºæ¥çš„ã€‚</p>
<hr/>
<h3 data-id="heading-7">7ï¼‰ä½ éœ€è¦æå‰çŸ¥é“çš„å‘ï¼šå®ƒå¾ˆå¼ºï¼Œä½†ä¹Ÿä¸æ˜¯æ— è„‘å¼€æŒ‚</h3>
<p>å‘ 1ï¼šå®‰å…¨é™åˆ¶å¯¼è‡´çš„æ¢è¡ŒæŠ¥é”™<br/>
æœ‰äº›ç¯å¢ƒé‡Œï¼ŒRalph å¯èƒ½è§¦å‘ Claude Code å¯¹å¤šè¡Œå‘½ä»¤çš„å®‰å…¨æ£€æŸ¥ï¼Œå¯¼è‡´æ— æ³•å¯åŠ¨å¾ªç¯ã€‚é€šå¸¸çš„è§„é¿æ–¹å¼æ˜¯æŠŠæç¤ºè¯å†™æˆå•è¡Œï¼ŒæŠŠé•¿è¦æ±‚æ”¾åˆ°æ–‡ä»¶é‡Œï¼Œå†è®© Claude å»è¯»ã€‚</p>
<p>å‘ 2ï¼šWindows ç¯å¢ƒä¾èµ–é—®é¢˜<br/>
æœ‰äººåœ¨ Windows æˆ–æŸäº› shell ç¯å¢ƒé‡Œé‡åˆ° stop hook å› ä¸ºç¼ºå°‘ä¾èµ–è€Œå¤±è´¥ã€‚é‡åˆ°è¿™ç±»é—®é¢˜ï¼Œä¼˜å…ˆæ£€æŸ¥è¿è¡Œç¯å¢ƒå’Œå¸¸ç”¨å‘½ä»¤æ˜¯å¦é½å…¨ã€‚</p>
<p>å‘ 3ï¼šå¿˜è®°åŠ ä¿é™©ä¸ï¼Œæˆæœ¬ä¼šé£™<br/>
ä¸å¼€ max-iterationsï¼Œå†é…ä¸Šæ¨¡ç³Šçš„éªŒæ”¶æ¡ä»¶ï¼Œè·‘ç€è·‘ç€å°±ä¼šå˜æˆè‡ªåŠ¨çƒ§é’±çƒ§æ—¶é—´çš„æœºå™¨ã€‚æ­£ç¡®å§¿åŠ¿æ°¸è¿œæ˜¯ä¸Šé™ + æ˜ç¡®éªŒæ”¶ã€‚</p>
<hr/>
<h3 data-id="heading-8">8ï¼‰æœ€åç»™ä¸€ä¸ªå…¬ä¼—å·å¼ç»“è®ºï¼šRalph çš„æ ¸å¿ƒç†å¿µæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ä¸€å¥è¯æ¦‚æ‹¬ï¼š</p>
<p>è®© Claude Code è´Ÿè´£å†™ä»£ç ï¼Œè®© Ralph Wiggum è´Ÿè´£è®©å®ƒåˆ«åœï¼Œç›´åˆ°ä½ å®šä¹‰çš„å®ŒæˆçœŸçš„å®Œæˆã€‚</p>
<p>å®ƒæŠŠ AI ç¼–ç¨‹ä»ä¸€æ¬¡æ€§å›ç­”æ‹‰å›åˆ°å·¥ç¨‹è¿­ä»£ï¼ŒæŠŠæœ€ç°å®ã€æœ€å…³é”®ã€ä¹Ÿæœ€å®¹æ˜“çƒ‚å°¾çš„é‚£éƒ¨åˆ†å·¥ä½œï¼šæµ‹è¯•ã€ä¿®é”™ã€æ”¶å°¾ï¼Œå˜æˆäº†å¯ä»¥è‡ªåŠ¨æ¨è¿›çš„æµç¨‹ã€‚</p>
<p>å¦‚æœä½ æ›¾ç»è¢«å·®ä¸€ç‚¹å°±å¥½äº†çš„ AI ç¼–ç¨‹ä½“éªŒæ°”åˆ°ï¼Œé‚£ Ralph å¾ˆå¯èƒ½ä¼šè®©ä½ ç¬¬ä¸€æ¬¡è§‰å¾—ï¼šAI ä¸æ˜¯å†™å®Œå°±èµ°ï¼Œè€Œæ˜¯èƒ½æŠŠé¡¹ç›®çœŸæ­£è·‘é€šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React ç™½å±æœºåˆ¶åŸç†åˆ†æ[å…±1500å­—ï¼Œé˜…è¯»æ—¶é•¿8min]]]></title>    <link>https://juejin.cn/post/7590403249561649167</link>    <guid>https://juejin.cn/post/7590403249561649167</guid>    <pubDate>2026-01-04T02:12:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590403249561649167" data-draft-id="7590681158716473384" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React ç™½å±æœºåˆ¶åŸç†åˆ†æ[å…±1500å­—ï¼Œé˜…è¯»æ—¶é•¿8min]"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-04T02:12:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»™äººæŒä¸€å·"/> <meta itemprop="url" content="https://juejin.cn/user/814057212357645"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React ç™½å±æœºåˆ¶åŸç†åˆ†æ[å…±1500å­—ï¼Œé˜…è¯»æ—¶é•¿8min]
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/814057212357645/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»™äººæŒä¸€å·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:12:27.000Z" title="Sun Jan 04 2026 02:12:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ç™½å±æ˜¯ä»€ä¹ˆ</h3>
<p>ç™½å±æ˜¯Reactä¸»åŠ¨é˜²å¾¡æœºåˆ¶ï¼ŒReactå›¢é˜Ÿè®¤ä¸ºï¼Œæ˜¾ç¤ºé”™è¯¯çš„UIæ¯”ä¸æ˜¾ç¤ºä»»ä½•å†…å®¹æ›´ç³Ÿç³•ï¼ˆä¾‹å¦‚ï¼Œè½¬è´¦é‡‘é¢æ˜¾ç¤ºé”™è¯¯ï¼‰ï¼Œå› æ­¤Reacté‡åˆ°æ— æ³•å¤„ç†çš„å¼‚å¸¸ï¼Œä¼šé€‰æ‹©å¸è½½æ‰æ•´ä¸ªç»„ä»¶æ ‘ã€‚å¯¹æ¯”ç€çœ‹ï¼ŒåŸç”Ÿç›´æ¥æ“ä½œDOMçš„æ–¹å¼é€šå¸¸ä¸ä¼šé€ æˆç™½å±çš„ç°è±¡ï¼Œè€Œæ˜¯ä¼šåœç•™åœ¨é”™è¯¯å‘ç”Ÿå‰çš„çŠ¶æ€ã€‚</p>
<h3 data-id="heading-1">Reactæ¸²æŸ“æœºåˆ¶</h3>
<p>ç™½å±çš„å‡ºç°ä¸Reactæ¸²æŸ“æœºåˆ¶æ¯æ¯ç›¸å…³ï¼Œç™½å±å®é™…å°±æ˜¯ï¼šReactæ¸²æŸ“è¿‡ç¨‹ä¸­å‘ç”Ÿäº†æœªæ•è·é”™è¯¯ï¼ŒReactå†…éƒ¨é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæ•è·äº†è¯¥é”™è¯¯ï¼Œç„¶åè¿›è¡Œç»„ä»¶å¸è½½ï¼Œé˜²æ­¢æ˜¾ç¤ºé”™è¯¯UIã€‚ä¸‹å›¾æ˜¯Reactçš„æ¸²æŸ“æµç¨‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/511ffab692214dfa903ea37f1a089f6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuZ5Lq65o6M5LiA5Y-3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097547&amp;x-signature=Zlc%2BM0PBQl2qnDJo5de8OKgYMQY%3D" alt="image.png" loading="lazy"/>
ä¸»è¦å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<h4 data-id="heading-2">Renderé˜¶æ®µ</h4>
<p>æ ¹æ® JSXè½¬æ¢çš„ReactElementèŠ‚ç‚¹ +æ—§çš„FiberèŠ‚ç‚¹æ ‘ æ„å»ºå‡ºæ–°çš„FiberèŠ‚ç‚¹æ ‘ï¼ˆFiberå¯ä»¥è¢«çœ‹ä½œä¸ºæ˜¯è™šæ‹ŸDOMï¼‰ã€‚</p>
<h4 data-id="heading-3">Commité˜¶æ®µ</h4>
<p>æ ¹æ®Renderé˜¶æ®µå¾—å‡ºçš„æ–°çš„Fiberæ ‘æ›´æ–°DOMã€‚</p>
<h4 data-id="heading-4">æ¸²æŸ“è§¦å‘æ—¶æœº</h4>
<ol>
<li>ç»„ä»¶åˆå§‹åŒ–ã€‚</li>
<li>é€šè¿‡setStateè§¦å‘ç»„ä»¶çŠ¶æ€æ›´æ–°ã€‚</li>
</ol>
<p><strong>ç»„ä»¶åˆå§‹åŒ–</strong>å’Œ<strong>çŠ¶æ€å˜æ›´</strong>éƒ½ä¼šèµ°è¿™å¥—æ¸²æŸ“æµç¨‹ï¼Œåªä¸è¿‡ä¼šæ ¹æ®Mounté˜¶æ®µ/Updateé˜¶æ®µçš„ä¸åŒï¼Œä¸€äº›å¤„ç†é€»è¾‘ä¸åŒï¼Œæ•´ä½“æµç¨‹éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<h3 data-id="heading-5">ç™½å±æœºåˆ¶</h3>
<h4 data-id="heading-6">Renderé˜¶æ®µ</h4>
<p>åœ¨æºç ä¸­ï¼Œå¯ä»¥æŠŠ<strong>workLoopSync</strong>å‡½æ•°çœ‹ä½œæ˜¯Reactçš„<strong>Render</strong>é˜¶æ®µï¼ŒworkLoopSyncæ˜¯è¢«try/catchåŒ…è£¹çš„ã€‚ä¸€æ—¦workLoopSyncè¿‡ç¨‹ä¸­é‡åˆ°<strong>ä¸å¯å¤„ç†ä¸”æœªæ•è·çš„é”™è¯¯</strong>ï¼Œå¦‚aæ˜¯undefinedï¼Œä»£ç ä¸­è¯»å–a.b.cï¼Œè¿™ä¼šå¯¼è‡´ç©ºæŒ‡é’ˆé”™è¯¯ï¼Œå¹¶ä¸”è¿™ä¸ªé”™è¯¯ä¼šè¢«try/catchæ‰€æ•è·ï¼Œè¿›å…¥<strong>handleError</strong>å‡½æ•°ä¸­ã€‚åœ¨handleErrorå‡½æ•°ä¸­ä¼šè§¦å‘Reactçš„ç™½å±é€»è¾‘å’ŒErrorboundaryé€»è¾‘ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0992eb98f44d471c983edebafe6c905f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuZ5Lq65o6M5LiA5Y-3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097547&amp;x-signature=LFLkQRT%2FMT%2ByD3W7ofbGueIhv%2BI%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ€»ç»“</strong>ï¼šå½“ Render é˜¶æ®µï¼ˆå¦‚ workLoopSync æ„å»º Fiber æ ‘ï¼‰å‘ç”Ÿæœªæ•è·çš„ JavaScript é”™è¯¯æ—¶ï¼ŒReact ä¼šåˆ©ç”¨å†…éƒ¨çš„ try/catch æ•è·å¼‚å¸¸ã€‚ä¸ºäº†é˜²æ­¢æ¸²æŸ“å‡ºæ•°æ®ä¸ä¸€è‡´æˆ–æŸåçš„ UIï¼ŒReact ä¼šé€‰æ‹©å¸è½½æ•´ä¸ªç»„ä»¶æ ‘ï¼ˆå³ç™½å±ï¼‰ã€‚</p>
<h4 data-id="heading-7">commité˜¶æ®µ</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffb63c93b2dd4e77b8fe2753657ce51f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuZ5Lq65o6M5LiA5Y-3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097547&amp;x-signature=90IlcyuxqkyppjFl2dnQQwzl1U4%3D" alt="image.png" loading="lazy"/></p>
<p>è™½ç„¶<strong>Render</strong>é˜¶æ®µè°ƒç”¨çš„æ˜¯<strong>handleError</strong>ï¼Œ<strong>Commit</strong>é˜¶æ®µè°ƒç”¨çš„æ˜¯<strong>captureCommitPhaseError</strong>ï¼Œä½†æ˜¯ä¸¤ä¸ªå‡½æ•°åœ¨å¤„ç†ç™½å±é€»è¾‘æ˜¯ç›¸ä¼¼çš„ï¼Œå¯ä»¥ç®€å•è®¤ä¸ºæ˜¯ä¸€æ ·çš„ã€‚</p>
<p>commité˜¶æ®µçš„æµç¨‹åŒ…æ‹¬ï¼šæ›´æ–°DOMï¼Œæ‰§è¡ŒuseLayoutEffectï¼Œæ‰§è¡ŒuseEffectã€‚è¿™ä¸‰éƒ¨åˆ†éƒ½è¢«Reactå†…ç½®çš„try/catch åŒ…è£¹ï¼Œå¼‚å¸¸å¤„ç†å‡½æ•°æ˜¯<strong>captureCommitPhaseError</strong>ã€‚å¦‚æœCommité˜¶æ®µï¼Œä»£ç æŠ›å‡ºäº†æœªæ•è·çš„é”™è¯¯ï¼Œä»ç„¶ä¼šè§¦å‘<strong>captureCommitPhaseError</strong>å‡½æ•°ã€‚</p>
<h3 data-id="heading-8">ç™½å±ä¾‹å­</h3>
<h5 data-id="heading-9">ç¬¬ä¸€ä¸ªä¾‹å­</h5>
<p>æœ€å…¸å‹çš„ç™½å±ä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page404</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fx-center mt-80"</span>&gt;</span>{data.message}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>ä¸Šè¿°ä»£ç çš„æ‰§è¡Œæµç¨‹æ˜¯ï¼š</p>
<ol>
<li>ç¼–è¯‘æ—¶ ï¼š<strong>JSX</strong>è½¬å˜ä¸º<strong>React.createElement/_jsx</strong>ï¼Œåˆ›å»ºReactElementçš„å‡½æ•°è¯­å¥.</li>
<li>è¿è¡Œæ—¶ ï¼šç»„ä»¶ Render è¿‡ç¨‹ä¸­ï¼Œ _jsx å‡½æ•°è¯»å–å‚æ•°ï¼Œå›  data.message æ±‚å€¼å¤±è´¥æŠ›å‡º TypeErrorã€‚React æ•è·è¿™ä¸ªé”™è¯¯åï¼Œè§¦å‘äº†å…¨é‡çš„ Unmount ä¿æŠ¤æœºåˆ¶ ï¼Œå¯¼è‡´ç™½å±ã€‚å¦‚æœå­˜åœ¨ErrorBoundaryç»„ä»¶ï¼Œåˆ™ä¼šä½¿ç”¨Error Boundaryå…œåº•ã€‚</li>
</ol>
<h5 data-id="heading-10">ç¬¬äºŒä¸ªä¾‹å­</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page404</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">a</span>.<span class="hljs-property">b</span>)

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fx-center mt-80"</span>&gt;</span>{data || null}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>è¿™æ®µä»£ç åŒæ ·ä¹Ÿä¼šå‘ç”Ÿç™½å±ï¼Œæœ¬è´¨ä¸Šï¼Œ å‡½æ•°ç»„ä»¶çš„<strong>å‡½æ•°ä½“æ‰§è¡Œæœ¬èº«</strong>å°±æ˜¯ Render é˜¶æ®µçš„ä¸€éƒ¨åˆ† ã€‚React åœ¨æ„å»º Fiber æ ‘æ—¶ä¼šç›´æ¥è°ƒç”¨è¯¥ç»„ä»¶å‡½æ•°ã€‚å› æ­¤ï¼Œ <strong>console.log(data.a.b)</strong> æŠ›å‡ºçš„ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¼šç›´æ¥è¢« React å†…éƒ¨çš„try/catchæ•è·ï¼Œè¿›å…¥<strong>handleError</strong>å‡½æ•°ï¼Œ<strong>React å¸è½½æ•´ä¸ªç»„ä»¶æ ‘ï¼Œä»è€Œå¯¼è‡´ç™½å±</strong>ã€‚</p>
<h5 data-id="heading-11">ç¬¬äºŒä¸ªä¾‹å­æ”¹è¿›</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page404</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-keyword">try</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">a</span>.<span class="hljs-property">b</span>)
  } <span class="hljs-keyword">catch</span> (error) {

  }

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fx-center mt-80"</span>&gt;</span>{data || '404'}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p><strong>console.log(data.a.b)</strong> è™½ç„¶å‘ç”Ÿäº†é”™è¯¯ï¼Œä½†å› ä¸ºä½¿ç”¨äº† try/catch ï¼Œè¿™ä¸ªé”™è¯¯æ²¡æœ‰æŠ›å‡ºç»™ Reactå†…éƒ¨çš„try/catchï¼Œæ‰€ä»¥ React å¹¶ä¸çŸ¥æƒ…ã€‚</p>
<h5 data-id="heading-12">ç¬¬ä¸‰ä¸ªä¾‹å­ï¼ˆè¿™ä¸ªä¾‹å­å¾ˆé‡è¦ï¼‰</h5>
<p>ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œæ˜¯å¦ä¼šå‘ç”Ÿç™½å±é”™è¯¯ï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page404</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">a</span>.<span class="hljs-property">b</span>.<span class="hljs-property">c</span>)
  }

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fx-center mt-80"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{data || '404'}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>ç­”æ¡ˆæ˜¯ï¼šä¸ä¼š</p>
<p>å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œ Render é˜¶æ®µæ—©å·²ç»“æŸ ï¼ŒCommit é˜¶æ®µä¹Ÿç»“æŸäº†ï¼ŒUI å·²ç»ç¨³å®šåœ°æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ä¹‹å‰æˆ‘ä»¬è¯´è¿‡Renderè¿‡ç¨‹çš„æœªæ•è·é”™è¯¯ï¼Œæ‰ä¼šè¢«Reactå†…éƒ¨çš„try/catchæ‰€æ•è·ã€‚</p>
<p>æ€»ç»“ï¼š è¿™ä¸ªä¾‹å­è¡¨æ˜ä¸æ˜¯å‘ç”Ÿäº†JSé”™è¯¯ï¼Œå°±ä¼šç™½å±ã€‚ç™½å±å¯¹å‘ç”Ÿæ—¶æœºæœ‰ç€ä¸¥æ ¼è¦æ±‚ï¼Œå¿…é¡»æ˜¯æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œé¡¹ç›®æ‰ä¼šç™½å±ã€‚</p>
<h5 data-id="heading-13">ç¬¬å››ä¸ªä¾‹å­</h5>
<p>ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œæ˜¯å¦ä¼šå‘ç”Ÿç™½å±é”™è¯¯ï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page404</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>({<span class="hljs-attr">message</span>:<span class="hljs-string">"404"</span>})

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setData</span>(<span class="hljs-literal">null</span>)
  }

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fx-center mt-80"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{data.message}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>ç­”æ¡ˆæ˜¯ï¼šä¼š
å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œè°ƒç”¨handleClickå‡½æ•°ï¼Œæ‰§è¡Œ setData(null) ä¿®æ”¹çŠ¶æ€ï¼Œè¿™ä¼šè§¦å‘å½“å‰ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚åœ¨Renderè¿‡ç¨‹ä¸­ï¼Œå› ä¸ºdataè¢«æ›´æ–°ä¸ºnullï¼Œä»£ç æ‰§è¡Œåˆ° ã€Šh1ã€‹ {data.message}ã€Š/h1ã€‹ï¼ˆæ˜é‡‘ç”¨h1æ ‡ç­¾å°±è‡ªåŠ¨å˜å¤§äº†ï¼Œå› æ­¤ç”¨ã€Šã€‹ä»£æ›¿&lt;&gt;ï¼‰ï¼Œå› ä¸ºdataæ˜¯nullï¼Œä»£ç ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆæŠ¥é”™ï¼Œè¿™ä¼šè¢«Reactå†…éƒ¨çš„try/catchæ‰€æ•è·ï¼Œä»è€Œè§¦å‘ç™½å±é€»è¾‘ã€‚</p>
<h5 data-id="heading-14">ç¬¬äº”ä¸ªä¾‹å­</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page404</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">a</span>.<span class="hljs-property">b</span>.<span class="hljs-property">c</span>)
  }, [])

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fx-center mt-80"</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>ç­”æ¡ˆæ˜¯ï¼šä¼šç™½å±
è™½ç„¶ useEffect æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œä½†å®ƒæ˜¯ç”± React Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰ æ¥ç®¡çš„ã€‚å½“ Commit é˜¶æ®µå®Œæˆåï¼ŒScheduler ä¼šè°ƒåº¦å¹¶æ‰§è¡Œ flushPassiveEffects æ–¹æ³•æ¥å¤„ç†æ‰€æœ‰å‰¯ä½œç”¨ã€‚<br/>
åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼ŒReact ä¼šæ˜¾å¼åœ°ç”¨ try-catch åŒ…è£¹å›è°ƒå‡½æ•°çš„æ‰§è¡Œã€‚å› æ­¤ï¼Œ data.a.b.c æŠ›å‡ºçš„ç©ºæŒ‡é’ˆå¼‚å¸¸ä¼šè¢« React ç²¾ç¡®æ•è·ï¼Œå¹¶è§¦å‘ captureCommitPhaseError æµç¨‹ã€‚</p>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>ç™½å±æ˜¯ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ä¸­æŠ›å‡ºæœªæ•è·çš„é”™è¯¯ï¼Œè¢«Reactå†…éƒ¨çš„é”™è¯¯å¤„ç†æœºåˆ¶æ•è·ï¼Œä»è€Œè§¦å‘çš„ä¸€ç§ä¸»åŠ¨é˜²å¾¡çš„æœºåˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åäº”ç¯‡ï¼‰ï¼šç‹è¯­å«£çš„ã€Šä¸‡å‰‘å½’å®—ã€‹ä¸ InlineArray]]></title>    <link>https://juejin.cn/post/7590330924002508863</link>    <guid>https://juejin.cn/post/7590330924002508863</guid>    <pubDate>2026-01-04T03:24:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590330924002508863" data-draft-id="7590735421262004265" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åäº”ç¯‡ï¼‰ï¼šç‹è¯­å«£çš„ã€Šä¸‡å‰‘å½’å®—ã€‹ä¸ InlineArray"/> <meta itemprop="keywords" content="Swift,ç¼–ç¨‹è¯­è¨€,Apple"/> <meta itemprop="datePublished" content="2026-01-04T03:24:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åäº”ç¯‡ï¼‰ï¼šç‹è¯­å«£çš„ã€Šä¸‡å‰‘å½’å®—ã€‹ä¸ InlineArray
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:24:34.000Z" title="Sun Jan 04 2026 03:24:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7363d0e01524c69af83943332a28590~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=%2B54zbSwO5e5VTwYVeaR%2FkyXjGR8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šå½“åŠ¨æ€æ•°ç»„çš„éšæ€§ï¼ˆ<strong>Array</strong>ï¼‰ä¸å…ƒç»„çš„åˆ»æ¿ï¼ˆ<strong>Tuple</strong>ï¼‰é™·å…¥ä¸¤éš¾ï¼Œé«˜æ€§èƒ½çš„å†…è”æ•°ç»„ï¼ˆ<strong>InlineArray</strong>ï¼‰æ¨ªç©ºå‡ºä¸–ã€‚Swift 6.2 å¼•å…¥çš„ SE-0453 å°±åƒæ˜¯æ­¦å­¦ä¸­çš„â€œä¸‡å‰‘å½’å®—â€ï¼Œæ—¨åœ¨ä»¥å›ºå®šå¤§å°çš„å†…å­˜å¸ƒå±€ï¼Œè§£å†³æ€§èƒ½ä¸çµæ´»æ€§çš„<strong>é±¼å’Œç†ŠæŒä¸å¯å…¼å¾—</strong>ä¹‹å›°ã€‚</p>
</blockquote>
<h2 data-id="heading-0">0ï¸âƒ£ ğŸ¼ åºç« ï¼šç…å¬›ç¦åœ°çš„â€œå†…å­˜â€è¿·å±€</h2>
<p>ç…å¬›ç¦åœ°ï¼Œå¤©å±±ç«¥å§¥é—ç•™çš„è™šæ‹Ÿæ•°æ®ä¸­å¿ƒã€‚</p>
<p>è¿™é‡Œæ˜¯å­˜å‚¨ç€å¤©ä¸‹æ‰€æœ‰æ•°æ®ç»“æ„ç§˜ç±çš„å®åº“ã€‚å¤§ç†ŠçŒ«ä¾¯ä½©ç©¿æ¢­åœ¨å·¨å¤§çš„å…¨æ¯å·è½´ä¹‹é—´ï¼ŒèƒŒæ™¯éŸ³ä¹æ˜¯ã€Šå¤©é¾™å…«éƒ¨ã€‹çš„BGMï¼Œä»–ä¸€è¾¹èµ°ä¸€è¾¹æ‘¸äº†æ‘¸å¤´é¡¶â€”â€”é»‘æ¯›æ²¹å…‰é”ƒäº®ï¼Œ<strong>å¤´ç»å¯¹ä¸ç§ƒ</strong>ï¼Œå®‰å…¨æ„Ÿåè¶³ã€‚</p>
<p>ä»–ä¹‹æ‰€ä»¥æ¥è¿™ï¼Œæ˜¯å› ä¸ºä¸Šä¸€å›ä»»åŠ¡ç»“æŸåï¼Œä»–ä»å¯¹ç«¹ç¬‹çš„å­˜å‚¨é—®é¢˜è€¿è€¿äºæ€€ã€‚</p>
<p>â€œæˆ‘é‚£å››æ ¹â€˜é•‡å±±ä¹‹å®â€™çº§ç«¹ç¬‹ï¼Œå¿…é¡»ä»¥æœ€å¿«çš„é€Ÿåº¦å–ç”¨ï¼â€ä¾¯ä½©å¯¹ç€ä¸€å·å†™ç€ <code>Array</code> çš„ç§˜ç±å¤§å£°åš·é“ï¼Œâ€œç”¨æ™®é€šçš„ <code>Array</code>ï¼Œè™½ç„¶æ–¹ä¾¿ï¼Œä½†é‚£åŠ¨æ€åˆ†é…å†…å­˜çš„æ–¹å¼ï¼Œè®©æˆ‘æ¯æ¬¡å–ç¬‹éƒ½æ„Ÿè§‰åƒæ˜¯åœ¨ä¸å¸®çš„è¢‹å­é‡Œæä¸œè¥¿ï¼Œ<strong>éšæ€§å¾—å¾ˆï¼Œä½†å¤ªæ…¢äº†ï¼</strong>â€</p>
<p>â€œè‹¥è¿½æ±‚æè‡´é€Ÿåº¦ï¼Œä½•ä¸ç”¨ <strong>Tuple</strong>ï¼ˆå…ƒç»„ï¼‰ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ceca77a66a80450cab5a183ca5d6dd24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=WYTl2X5k5jLFYkjgCu3pvhKwC%2F8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¸€ä¸ªæ¸…å†·çš„å£°éŸ³ä¼ æ¥ã€‚ä¾¯ä½©å¾ªå£°æœ›å»ï¼Œåªè§ä¸€ä½å®¹è²Œæ¯”æ•°æ®æµè¿˜ç²¾è‡´çš„å°‘å¥³ç«™åœ¨å…‰å½±ä¹‹ä¸­ï¼Œå¥¹çš“é½¿æ˜çœ¸ï¼Œæ‰‹ä¸­æ­£æ‹¿ç€ä¸€æœ¬ã€Šä¹é˜´çœŸç»ã€‹çš„ä»£ç ç‰ˆæœ¬ï¼Œæ­£æ˜¯<strong>ç‹è¯­å«£</strong>ã€‚</p>
<p>ç‹è¯­å«£ï¼Œç†Ÿè¯»å¤©ä¸‹æ­¦å­¦ç§˜ç±ï¼Œå¯¹å„ç§æ•°æ®ç»“æ„äº†å¦‚æŒ‡æŒã€‚å¥¹çš„çˆ±å¥½å°±æ˜¯æ•´ç†å’Œåˆ†ç±»è¿™äº›ä»£ç ç§˜ç±ï¼Œç‰¹ç‚¹æ˜¯<strong>ç†è®ºçŸ¥è¯†ä¸°å¯Œåˆ°å¯ä»¥å¼€å®—ç«‹æ´¾ï¼Œä½†ä»æœªäº²æ‰‹å®è·µï¼ˆç¼–å†™ï¼‰è¿‡ä¸€è¡Œä»£ç </strong>ã€‚</p>
<p>â€œç‹å§‘å¨˜ï¼â€ä¾¯ä½©çš„çœ¼ç›ç¬é—´å˜æˆäº†å¿ƒå½¢ï¼ˆèŠ±ç—´å±æ€§å‘ä½œï¼‰ï¼Œâ€œå…ƒç»„æ˜¯å¿«ï¼Œå®ƒå†…å­˜è¿ç»­ä¸”å›ºå®šï¼Œä½†æ‚¨çœ‹ï¼Œæˆ‘å¦‚æœè¦ç”¨ä¸‹æ ‡å¾ªç¯éå†æˆ‘çš„å››æ ¹ç«¹ç¬‹ï¼Œ<code>myTuple.0</code>ï¼Œ<code>myTuple.1</code>â€¦â€¦è¿™å†™æ³•ç®€ç›´æ˜¯<strong>æœ›æ´‹å…´å¹</strong>ï¼Œæ—¢ä¸ä¼˜é›…ï¼Œåˆä¸æ”¯æŒå¾ªç¯ï¼â€</p>
<p><strong>åœ¨æœ¬æ¬¡å†’é™©ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</strong></p>
<ul>
<li>0ï¸âƒ£ ğŸ¼ åºç« ï¼šç…å¬›ç¦åœ°çš„â€œå†…å­˜â€è¿·å±€</li>
<li>1ï¸âƒ£ ğŸ’¥ æ··è¡€ç§˜ç±ï¼šInlineArray çš„è¯ç”Ÿ (SE-0453)</li>
<li>2ï¸âƒ£ ğŸ“œ å›ºè‹¥é‡‘æ±¤ï¼šInlineArray çš„ä½¿ç”¨æ³•é—¨
<ul>
<li>æ‹›å¼ä¸€ï¼šæ˜ç¡®æŒ‡å®šå¤§å°ä¸ç±»å‹</li>
<li>æ‹›å¼äºŒï¼šè®©ç¼–è¯‘å™¨â€œå¿ƒé¢†ç¥ä¼šâ€</li>
<li>ä¸‹æ ‡è¯»å†™ï¼šè¡Œäº‘æµæ°´</li>
</ul>
</li>
<li>3ï¸âƒ£ ğŸš§ ä¹¾å¤å·²å®šï¼šå›ºå®šå¤§å°çš„ä»£ä»·
<ul>
<li>è¿­ä»£ä¹‹å›°ï¼šä¸å…¥æµçš„é™åˆ¶</li>
</ul>
</li>
<li>4ï¸âƒ£ ğŸ¼ ç†ŠçŒ«çš„é»‘è‰²å¹½é»˜ä¸æŠ‰æ‹©</li>
<li>5ï¸âƒ£ ğŸ›‘ å°¾å£°ï¼šæ…•å®¹å¤çš„ä¼ªè£…ä¸â€œå‘åçœ‹â€çš„éš¾é¢˜</li>
</ul>
<p>ç‹è¯­å«£è½»è½»å¹äº†ä¸€å£æ°”ï¼šâ€œæ˜¯å•Šï¼Œé±¼å’Œç†ŠæŒä¸å¯å…¼å¾—ã€‚å†…å­˜å¸ƒå±€ï¼ˆPerformanceï¼‰å’Œä¸‹æ ‡è®¿é—®ï¼ˆUsabilityï¼‰ï¼Œå†æ¥æ˜¯ç¨‹åºå‘˜æ±Ÿæ¹–çš„åƒå¹´éš¾é¢˜ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73f26430b7eb40b3a6d157c37d4034ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=TKcNBgX%2FYJUe9Ka%2FvT8T1Gr7Hxw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">1ï¸âƒ£ ğŸ’¥ æ··è¡€ç§˜ç±ï¼šInlineArray çš„è¯ç”Ÿ (SE-0453)</h2>
<p>å°±åœ¨ä¾¯ä½©å’Œç‹è¯­å«£é™·å…¥æŠ€æœ¯å“²å­¦çš„æ­»å¾ªç¯æ—¶ï¼Œä¸€é“æ–°çš„å…¨æ¯å·è½´ä»å¤©è€Œé™ï¼Œæ­£æ˜¯ <strong>SE-0453</strong> ç§˜ç±ã€‚</p>
<p>â€œå¿«çœ‹ï¼Œè¿™æ˜¯æœ€æ–°çš„â€˜æ··è¡€â€™æ•°æ®ç»“æ„ï¼Œâ€ä¾¯ä½©æ¿€åŠ¨åœ°å–Šé“ï¼Œâ€œå®ƒå« <strong>InlineArray</strong>ï¼ˆå†…è”æ•°ç»„ï¼‰ï¼Œå®ƒæŠŠå…ƒç»„çš„â€˜<strong>å›ºå®šå¤§å°</strong>â€™ä¸æ•°ç»„çš„â€˜<strong>è‡ªç„¶ä¸‹æ ‡</strong>â€™å®Œç¾åœ°èåˆäº†ï¼â€</p>
<p><strong><code>InlineArray</code></strong> æœ€æ ¸å¿ƒçš„å¥¥ä¹‰åœ¨äºï¼šå®ƒå°†å›ºå®šæ•°é‡çš„å…ƒç´ ç›´æ¥å­˜å‚¨åœ¨ç»“æ„ä½“å†…éƒ¨ï¼Œæ²¡æœ‰åŠ¨æ€åˆ†é…çš„å¼€é”€ï¼Œä»è€Œå®ç°äº†<strong>ç»“æ„ä½“çº§åˆ«çš„å†…å­˜è¿ç»­æ€§</strong>å’Œ<strong>åª²ç¾ C è¯­è¨€æ•°ç»„çš„å­˜å–é€Ÿåº¦</strong>ã€‚</p>
<blockquote>
<p><strong>ğŸ’¡ å‰ç½®æ¡ä»¶ï¼ˆSE-0452ï¼‰</strong>ï¼š
è¦å®ç°è¿™ç§å›ºå®šå¤§å°çš„æ³›å‹ï¼ˆGenericï¼‰ï¼ŒSwift 6.2 è¿˜å¿…é¡»å¼•å…¥å¦ä¸€ä¸ªé‡è¦çš„å‰æï¼š<strong>SE-0452ï¼šInteger Generic Parametersï¼ˆæ•´æ•°æ³›å‹å‚æ•°ï¼‰</strong>ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ•´æ•°å€¼æ¥çº¦æŸæ³›å‹ç±»å‹çš„å¤§å°ï¼Œæ¯”å¦‚ <code>InlineArray&lt;4, String&gt;</code> ä¸­çš„ <code>4</code>ï¼Œè¿™åœ¨ä»¥å‰çš„ Swift ç‰ˆæœ¬ä¸­æ˜¯æ— æ³•æƒ³è±¡çš„ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f982f69c4b9543aba02a102a03410835~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=OAYm8nDeJkEYR94Sogl7JnfCo0c%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-2">2ï¸âƒ£ ğŸ“œ å›ºè‹¥é‡‘æ±¤ï¼šInlineArray çš„ä½¿ç”¨æ³•é—¨</h2>
<p>ç‹è¯­å«£ä½œä¸ºç†è®ºå¤§å¸ˆï¼Œç«‹åˆ»è§£æäº†è¿™æ®µç§˜ç±ã€‚</p>
<p>åˆ›å»º <code>InlineArray</code> æœ‰ä¸¤ç§æ³•é—¨ï¼š</p>
<h3 data-id="heading-3">æ‹›å¼ä¸€ï¼šæ˜ç¡®æŒ‡å®šå¤§å°ä¸ç±»å‹</h3>
<p>æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨æ³›å‹ä¸€æ ·ï¼Œæ˜ç¡®å‘ŠçŸ¥ç¼–è¯‘å™¨ï¼šâ€œæˆ‘è¦ä¸€ä¸ªå›ºå®šå¤§å°ä¸º <strong>4</strong> çš„ <strong>String</strong> ç±»å‹æ•°ç»„ã€‚â€</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨ï¼šæˆ‘è¦ä¸€ä¸ªå›ºå®šå¤§å°ä¸º 4 çš„ String æ•°ç»„</span>
<span class="hljs-keyword">var</span> names1: <span class="hljs-type">InlineArray</span>&lt;4, <span class="hljs-type">String</span>&gt; <span class="hljs-operator">=</span> [<span class="hljs-string">"Moon"</span>, <span class="hljs-string">"Mercury"</span>, <span class="hljs-string">"Mars"</span>, <span class="hljs-string">"Tuxedo Mask"</span>]
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b94e76bbc304f26b81d9f9d8d9ac58e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=EN1ugsll2SMumxPCWNs7u%2FC70cY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-4">æ‹›å¼äºŒï¼šè®©ç¼–è¯‘å™¨â€œå¿ƒé¢†ç¥ä¼šâ€</h3>
<p>ä¾¯ä½©è¿™ç§æ‡’äººå½“ç„¶æ›´å–œæ¬¢è®©ç¼–è¯‘å™¨è‡ªå·±æ¨æ–­ï¼ˆType Inferenceï¼‰å¤§å°ã€‚åªè¦ä¼ å…¥çš„å…ƒç´ æ•°é‡å’Œç±»å‹å›ºå®šï¼Œç¼–è¯‘å™¨å°±èƒ½è‡ªåŠ¨æå®šã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„ 4 ä¸ª Stringï¼Œè‡ªåŠ¨æ¨æ–­å‡ºå®ƒæ˜¯ InlineArray&lt;4, String&gt;</span>
<span class="hljs-keyword">var</span> names2: <span class="hljs-type">InlineArray</span> <span class="hljs-operator">=</span> [<span class="hljs-string">"Moon"</span>, <span class="hljs-string">"Mercury"</span>, <span class="hljs-string">"Mars"</span>, <span class="hljs-string">"Tuxedo Mask"</span>]
</code></pre>
<p>â€œå¤ªå®Œç¾äº†ï¼â€ä¾¯ä½©èµå¹é“ï¼Œâ€œè¿™å°±åƒæ˜¯æŠŠæˆ‘çš„å››æ ¹ç«¹ç¬‹ä¸¥ä¸åˆç¼åœ°æ”¾è¿›äº†å››ä¸ªç²¾ç¡®å°ºå¯¸çš„æ ¼å­ï¼Œ<strong>ä¸€åŠ³æ°¸é€¸</strong>ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒå†…å­˜è·³æ¥è·³å»äº†ã€‚â€</p>
<h3 data-id="heading-5">ä¸‹æ ‡è¯»å†™ï¼šè¡Œäº‘æµæ°´</h3>
<p>è™½ç„¶å®ƒå†…å­˜å¸ƒå±€åƒå…ƒç»„ï¼Œä½†ä½¿ç”¨èµ·æ¥å´å’Œæ•°ç»„ä¸€æ ·ï¼Œæ”¯æŒç›´è§‚çš„ä¸‹æ ‡è¯»å†™ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// è¯»å–ï¼šå°±åƒæ™®é€šçš„æ•°ç»„ä¸€æ ·</span>
<span class="hljs-built_in">print</span>(names1[<span class="hljs-number">0</span>]) <span class="hljs-comment">// è¾“å‡º: Moon</span>
<span class="hljs-comment">// å†™å…¥ï¼šè½»æ¾ä¿®æ”¹ç‰¹å®šä½ç½®çš„å…ƒç´ </span>
names1[<span class="hljs-number">2</span>] <span class="hljs-operator">=</span> <span class="hljs-string">"Jupiter"</span> <span class="hljs-comment">// ç«æ˜Ÿå˜æœ¨æ˜Ÿï¼Œæ”¹å†™æ•°æ®ï¼Œæ¯«ä¸è´¹åŠ›</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bed37f385f14403a9e7ed165f19d0868~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=6Lp0ZfiIIasldmRku9i02hEqV44%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-6">3ï¸âƒ£ ğŸš§ ä¹¾å¤å·²å®šï¼šå›ºå®šå¤§å°çš„ä»£ä»·</h2>
<p>ç‹è¯­å«£å¾ˆå¿«æŒ‡å‡ºäº†è¿™ç§â€œç¥åŠŸâ€çš„é™åˆ¶ï¼šâ€œä¾¯å¤§å“¥ï¼Œæ­¤åŠŸæ³•è™½ç„¶å†…åŠ›é›„åšï¼ˆæ€§èƒ½å“è¶Šï¼‰ï¼Œä½†é™åˆ¶ä¹Ÿå¤šã€‚æ—¢ç„¶æ˜¯å›ºå®šå¤§å°ï¼Œé‚£ä¹ˆå®ƒå°±å¤±å»äº†æ•°ç»„çš„åŠ¨æ€ä¼¸ç¼©æ€§ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7999aa56782f45ecb014623b5287b1fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=rT1hSeSmQ%2F5dkh5U196cD1LYnMA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©ä¸€å¬ï¼Œèµ¶ç´§é—®é“ï¼šâ€œé‚£æ˜¯ä¸æ˜¯ä¸èƒ½å†å¤šå¡ä¸€æ ¹ç«¹ç¬‹è¿›å»äº†ï¼Ÿâ€</p>
<p>ç‹è¯­å«£ç‚¹å¤´ï¼šâ€œæ­£æ˜¯ã€‚<strong><code>InlineArray</code> æ²¡æœ‰ <code>append()</code> æˆ– <code>remove(at:)</code> æ–¹æ³•ã€‚</strong> å®ƒçš„å®¹é‡åœ¨è¯ç”Ÿä¹‹åˆå°±å·²æ˜¯<strong>å¤©æ•°</strong>ï¼Œæ— æ³•æ›´æ”¹ã€‚â€</p>
<h3 data-id="heading-7">è¿­ä»£ä¹‹å›°ï¼šä¸å…¥æµçš„é™åˆ¶</h3>
<p>æ›´è®©äººå¤´ç–¼çš„æ˜¯å®ƒçš„â€œä¸å…¥æµâ€é™åˆ¶ï¼š</p>
<blockquote>
<p>ğŸš¨ <strong>æŠ€æœ¯å“²å­¦</strong>ï¼š<code>InlineArray</code> ä¸å…¼å®¹ä¼ ç»Ÿçš„ <strong><code>Sequence</code></strong>ï¼ˆåºåˆ—ï¼‰å’Œ <strong><code>Collection</code></strong>ï¼ˆé›†åˆï¼‰åè®®ã€‚</p>
</blockquote>
<p>â€œä¸ºä»€ä¹ˆï¼Ÿâ€ä¾¯ä½©ä¸è§£ï¼Œâ€œå®ƒä¸æ˜¯æ•°ç»„å—ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8aeb86eab890472b9c96f431d33c6977~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=RbB59m71p8xkWWINAfdA%2BpYElCI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œå› ä¸ºå®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯<strong>æè‡´æ€§èƒ½å’Œç¼–è¯‘æ—¶ç¡®å®šæ€§</strong>ã€‚â€ç‹è¯­å«£è§£é‡Šé“ï¼Œâ€œä¸ºäº†é¿å…éµå¾ªè¿™äº›åè®®å¯èƒ½å¸¦æ¥çš„æŠ½è±¡å±‚å¼€é”€ï¼Œå®ƒé€‰æ‹©â€˜è‡ªç»ç»è„‰â€™ã€‚å¦‚æœä½ æƒ³éå†å®ƒï¼Œä½ å¿…é¡»é€šè¿‡å®ƒçš„ <code>indices</code> å±æ€§ï¼Œé…åˆä¸‹æ ‡è®¿é—®æ¥å®ç°ã€‚â€</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä¾¯ä½©ï¼šè™½ç„¶ä¸æ–¹ä¾¿ï¼Œä½†ä¸ºäº†æ€§èƒ½ï¼Œå¿äº†ï¼</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> names1.indices {
    <span class="hljs-comment">// å¿…é¡»é€šè¿‡ç´¢å¼• i æ¥è®¿é—®ï¼Œä¸èƒ½ç›´æ¥ç”¨ for element in names1</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello, <span class="hljs-subst">\(names1[i])</span>!"</span>) 
}
</code></pre>
<p>ä¾¯ä½©æ€»ç»“é“ï¼šâ€œè¿™å°±åƒæ˜¯è¯´ï¼Œè™½ç„¶å®ƒæ˜¯æ­¦æ—é«˜æ‰‹ï¼Œä½†å®ƒæ‹’ç»å‚åŠ æ­¦æ—å¤§ä¼šï¼ˆä¸éµå¾ª <code>Collection</code> åè®®ï¼‰ï¼Œå¦‚æœä½ æƒ³è¯·æ•™å®ƒï¼Œå¿…é¡»å…ˆæ‹¿åˆ°å®ƒçš„æ‹œå¸–ï¼ˆ<code>indices</code>ï¼‰æ‰è¡Œã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b930efc28b664e09a7fe82c2fd7bbd21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=8N6K0C6hjoBTar%2FQ4JA1m9YtERc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-8">4ï¸âƒ£ ğŸ¼ ç†ŠçŒ«çš„é»‘è‰²å¹½é»˜ä¸æŠ‰æ‹©</h2>
<p>â€œå“å‘€ï¼Œè¿™ä¸–é“ï¼Œè¿æ•°æ®ç»“æ„éƒ½å¾—çœ‹é¢œå€¼å’Œå‡ºèº«ã€‚â€ä¾¯ä½©å¹äº†å£æ°”ï¼ŒæŠŠç«¹ç¬‹æ”¶è¿›äº†è™šæ‹Ÿçš„ <code>InlineArray</code> å®¹å™¨é‡Œï¼Œæ„Ÿè§‰èº«è½»å¦‚ç‡•ï¼Œè¿èµ°è·¯éƒ½å¸¦é£äº†ã€‚</p>
<p>â€œä¸è¿‡è¯è¯´å›æ¥ï¼Œâ€ä¾¯ä½©çœ‹å‘ç‹è¯­å«£ï¼Œâ€œæˆ‘è¿˜æ˜¯è§‰å¾—è¿™ç§ç¡¬ç¼–ç çš„è¯­æ³•æœ‰ç‚¹ä¸å¤Ÿâ€˜ç†ŠçŒ«åŒ–â€™ï¼ˆä¸å¤Ÿæ‡’ï¼‰ã€‚å¬è¯´ç¤¾åŒºé‡Œæœ‰äººæƒ³æä¸ªæ›´ç›´è§‚çš„è¯­æ³•ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec3e45fbb57544d9ae0f789e7417184f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=6q0uRELOvYnU4PaajXVC2vszFl8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç‹è¯­å«£æèµ·äº†ä¸€ä»¶æ±Ÿæ¹–è½¶äº‹ï¼ˆSE-0483ï¼‰ï¼š</p>
<blockquote>
<p><strong>æ’æ›²ï¼šå¤­æŠ˜çš„ææ¡ˆ</strong>ï¼š
â€œæœ‰ä¸€ä¸ªå«åš <strong>SE-0483</strong> çš„æè®®ï¼Œæƒ³è¦å¼•å…¥ç±»ä¼¼ <code>var names: [5 x String] = .init(repeating: "Anonymous")</code> çš„ç®€æ´è¯­æ³•ï¼Œæ¥è¡¨ç¤ºä¸€ä¸ªå›ºå®šåŒ…å« 5 ä¸ª String çš„æ•°ç»„ã€‚ä½†ç”±äºåé¦ˆæ„è§è®¤ä¸ºå®ƒè¿‡äºçªå…€ä¸”ä¸å¤Ÿ Swift é£æ ¼ï¼Œç›®å‰å·²è¢«â€˜æ‰“å›é‡ä¿®â€™ã€‚â€</p>
</blockquote>
<p>ä¾¯ä½©å˜¿å˜¿ä¸€ç¬‘ï¼šâ€œæœç„¶ï¼Œä»»ä½•æ–°ç§˜ç±çš„æ¨å¹¿ï¼Œéƒ½ä¼šé‡åˆ°â€˜ä¿å®ˆæ´¾â€™çš„é˜»åŠ›ã€‚ä¸è¿‡ï¼Œèƒ½ç”¨ï¼Œé€Ÿåº¦å¿«ï¼Œ<strong>å¤´ä¸ç§ƒ</strong>ï¼Œå¯¹æˆ‘æ¥è¯´å°±å¤Ÿäº†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ece6e22d29c4cefa31f075704cd5467~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=JETvSrnHeRfBGU6xsHIxvQFkFek%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-9">5ï¸âƒ£ ğŸ›‘ å°¾å£°ï¼šæ…•å®¹å¤çš„ä¼ªè£…ä¸â€œå‘åçœ‹â€çš„éš¾é¢˜</h2>
<p>å°±åœ¨ä¾¯ä½©æ²‰æµ¸åœ¨é«˜æ€§èƒ½ç«¹ç¬‹å®¹å™¨çš„å–œæ‚¦ä¸­æ—¶ï¼Œç‹è¯­å«£çªç„¶è„¸è‰²å¤§å˜ã€‚</p>
<p>â€œä¾¯å¤§å“¥ï¼æˆ‘åˆšæ‰åœ¨æ•´ç†æ…•å®¹å¤ç•™ä¸‹çš„æ•°æ®å·è½´æ—¶ï¼Œå‘ç°äº†ä¸€ä¸ªæƒŠå¤©çš„ç§˜å¯†ï¼â€</p>
<p>å¥¹æŒ‡ç€å±å¹•ä¸Šçš„ä¸€æ®µæ–‡æœ¬ï¼Œé‚£æ˜¯ä¸€ç¯‡å…³äºâ€œå…´å¤å¤§ç‡•â€çš„å®å¤§è®¡åˆ’ä¹¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85b6409a7ea1407586fd21c2d43b2626~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=BVSNZNoYvvOyAeqLMPxlqRImp84%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œæˆ‘æƒ³ç”¨ <strong>Regexï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰</strong> æŸ¥æ‰¾å·è½´ä¸­æ‰€æœ‰æåˆ°ä»–åå­—çš„åœ°æ–¹ã€‚ä½†æ˜¯ï¼Œæˆ‘ä¸æƒ³è¦åŒ¹é…åˆ°é‚£äº›ä»–ç”¨æ¥ä¼ªè£…è‡ªå·±èº«ä»½çš„ç§°å‘¼ï¼Œæ¯”å¦‚â€˜å…¬å†¶ä¹¾â€™ã€â€˜åŒ…ä¸åŒâ€™è¿™äº›åå­—åé¢çš„â€˜æ…•å®¹å¤â€™ã€‚â€ç‹è¯­å«£æ€¥é“ï¼Œâ€œæˆ‘åªæƒ³åŒ¹é…åˆ°é‚£äº›ï¼Œ<strong>å‰é¢ç´§è·Ÿç€â€˜æˆ‘çš„æŒšçˆ±â€™è¿™å››ä¸ªå­—</strong>çš„â€˜æ…•å®¹å¤â€™ï¼â€</p>
<p>ä¾¯ä½©æŒ äº†æŒ å¤´ï¼šâ€œä½ çš„æ„æ€æ˜¯ï¼Œä½ æƒ³æ‰¾åˆ°ä¸€ä¸ªæ¨¡å¼ï¼Œä½†è¿™ä¸ªæ¨¡å¼å¿…é¡»æ»¡è¶³å®ƒ<strong>å‰é¢æœ‰ä¸€ä¸ªç‰¹å®šçš„å‰ç½®æ¡ä»¶</strong>ï¼Œè€Œè¿™ä¸ªå‰ç½®æ¡ä»¶æœ¬èº«ï¼Œ<strong>åˆä¸è¢«çº³å…¥åŒ¹é…ç»“æœ</strong>ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e2cd8f805a145dcaf3d093198bfb0b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=xrj6vDDb86cwDkO1Jv0YDCsiB%2Fg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œå¯¹ï¼â€ç‹è¯­å«£ç„¦æ€¥ä¸‡åˆ†ï¼Œâ€œæˆ‘çš„ <strong>Regex</strong> åŠŸå¤«åªèƒ½â€˜å‘å‰çœ‹â€™ï¼ˆLookaheadï¼‰ï¼Œå´æ— æ³•å®Œç¾åœ°**â€˜å‘åçœ‹â€™**ï¼Œæˆ‘ä¸èƒ½ç¡®å®šæ–‡æœ¬ä¸­è¿™ä¸‰ä¸ªå­—å‰é¢æ˜¯ä¸æ˜¯çœŸçš„æœ‰â€˜æˆ‘çš„æŒšçˆ±â€™ã€‚â€</p>
<p>ä¾¯ä½©æœ›ç€å·è½´æ·±å¤„é‚£æ®µå……æ»¡ç§˜å¯†çš„ä»£ç ï¼Œç¥ç§˜åœ°ä¸€ç¬‘ï¼šâ€œç‹å§‘å¨˜ï¼Œä½ ä¸ç”¨å†å¯¹ç€æ—§ç§˜ç±<strong>æœ›æ´‹å…´å¹</strong>äº†ã€‚ä¸‹ä¸€ç« ï¼ŒSwift 6.2 å°±è¦æ•™æˆ‘ä»¬ä¸€æ‹›ç»é¡¶çš„ä¾¦æŸ¥æ­¦åŠŸï¼š<strong>Regex lookbehind assertions</strong>ï¼ˆæ­£åˆ™è¡¨è¾¾å¼å‘åæŸ¥æ‰¾æ–­è¨€ï¼‰ï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3064bc9b88f4878a07b6ce369201843~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=Tu4X1lgvVmhelYRUDSaqdGa3uD4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>ï¼ˆæ¬²çŸ¥åäº‹å¦‚ä½•ï¼Œä¸”çœ‹ä¸‹å›åˆ†è§£ï¼šRegex lookbehind assertions â€”â€” å¦‚ä½•åœ¨ä¸åŒ¹é…å‰æ–‡çš„æƒ…å†µä¸‹ï¼Œç²¾ç¡®åˆ¤æ–­å‰æ–‡çš„å­˜åœ¨æ€§ï¼Œæ‰¾åˆ°ç‹è¯­å«£çœŸæ­£çš„â€œæŒšçˆ±â€ã€‚ï¼‰</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¯†ç éªŒè¯è¯¦è§£ï¼šVue3+Element Plus æ–¹æ¡ˆ/çº¯è¡€Vue 3 æ–¹æ¡ˆï¼šä»è¯­æ³•è§£æåˆ°å®æˆ˜å®ç°]]></title>    <link>https://juejin.cn/post/7590597231708454947</link>    <guid>https://juejin.cn/post/7590597231708454947</guid>    <pubDate>2026-01-04T02:36:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590597231708454947" data-draft-id="7590597231708422179" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¯†ç éªŒè¯è¯¦è§£ï¼šVue3+Element Plus æ–¹æ¡ˆ/çº¯è¡€Vue 3 æ–¹æ¡ˆï¼šä»è¯­æ³•è§£æåˆ°å®æˆ˜å®ç°"/> <meta itemprop="keywords" content="Vue.js,Element"/> <meta itemprop="datePublished" content="2026-01-04T02:36:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±åˆ†äº«çš„é±¼é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/3901536646733133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¯†ç éªŒè¯è¯¦è§£ï¼šVue3+Element Plus æ–¹æ¡ˆ/çº¯è¡€Vue 3 æ–¹æ¡ˆï¼šä»è¯­æ³•è§£æåˆ°å®æˆ˜å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3901536646733133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±åˆ†äº«çš„é±¼é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:36:02.000Z" title="Sun Jan 04 2026 02:36:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£ Web åº”ç”¨å¼€å‘ä¸­ï¼Œç”¨æˆ·å¯†ç çš„å®‰å…¨æ€§æ˜¯è‡³å…³é‡è¦çš„ã€‚ä¸€ä¸ªå¥å£®çš„å¯†ç éªŒè¯ç³»ç»Ÿä¸ä»…èƒ½ä¿æŠ¤ç”¨æˆ·è´¦æˆ·å®‰å…¨ï¼Œè¿˜èƒ½æå‡ç”¨æˆ·ä½“éªŒã€‚æœ¬æ–‡å°†ç»“åˆå®é™…ä»£ç ï¼Œè¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨ Vue 3 + Element Plus é¡¹ç›®ä¸­å®ç°ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€ç”¨æˆ·ä½“éªŒè‰¯å¥½çš„å¯†ç éªŒè¯ç³»ç»Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70d380337e3b4fffa0997a2e2964875b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5YiG5Lqr55qE6bG86bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099052&amp;x-signature=qQLlN7oRNhduBlMKKUGbj%2BzAwqU%3D" alt="ScreenShot_2026-01-04_103545_723.png" loading="lazy"/></p>
<h2 data-id="heading-0">æŠ€æœ¯æ ˆä»‹ç»</h2>
<h3 data-id="heading-1">Vue 3 Composition API</h3>
<p>Vue 3 å¼•å…¥äº† Composition APIï¼Œè¿™æ˜¯ä¸€ç§æ›´çµæ´»ã€æ›´æ˜“äºé€»è¾‘å¤ç”¨çš„ç»„ä»¶ç»„ç»‡æ–¹å¼ã€‚åœ¨æˆ‘ä»¬çš„å¯†ç éªŒè¯å®ç°ä¸­ï¼Œä½¿ç”¨äº†ä»¥ä¸‹å…³é”®æ¦‚å¿µï¼š</p>
<ul>
<li><code>ref</code>/<code>reactive</code>: ç”¨äºåˆ›å»ºå“åº”å¼æ•°æ®</li>
<li><code>setup</code> å‡½æ•°: ç»„ä»¶çš„é€»è¾‘å…¥å£ç‚¹</li>
<li>ç»„åˆå¼å‡½æ•°: å°†ç›¸å…³é€»è¾‘å°è£…åˆ°å¯å¤ç”¨çš„å‡½æ•°ä¸­</li>
</ul>
<h3 data-id="heading-2">Element Plus è¡¨å•éªŒè¯</h3>
<p>Element Plus æ˜¯åŸºäº Vue 3 çš„ UI ç»„ä»¶åº“ï¼Œå…¶è¡¨å•éªŒè¯åŠŸèƒ½æä¾›äº†å¼ºå¤§çš„éªŒè¯æœºåˆ¶ï¼š</p>
<ul>
<li>å†…ç½®éªŒè¯è§„åˆ™ï¼ˆå¦‚ <code>required</code>ã€<code>min</code>ã€<code>max</code> ç­‰ï¼‰</li>
<li>è‡ªå®šä¹‰éªŒè¯å‡½æ•°æ”¯æŒ</li>
<li>å¤šç§è§¦å‘æ–¹å¼ï¼ˆ<code>blur</code>ã€<code>change</code> ç­‰ï¼‰</li>
<li>å‹å¥½çš„é”™è¯¯æç¤ºæœºåˆ¶</li>
</ul>
<h2 data-id="heading-3">ä»£ç å®ç°è¯¦è§£</h2>
<h3 data-id="heading-4">1. åŸºç¡€ç»“æ„è®¾ç½®</h3>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ•´ä¸ªç»„ä»¶çš„åŸºç¡€ç»“æ„ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;el-form :model="userForm" :rules="rules" ref="formRef" label-width="80px"&gt;
    &lt;el-form-item label="å¯†ç " prop="password" v-if="!userForm.id"&gt;
      &lt;el-input v-model="userForm.password" type="password" placeholder="è¯·è¾“å…¥å¯†ç " /&gt;
    &lt;/el-form-item&gt;
  &lt;/el-form&gt;
&lt;/template&gt;

&lt;script setup&gt;
// å¯¼å…¥å¿…è¦çš„æ¨¡å—
import { ref, reactive } from 'vue'
import { ElMessage, ElMessageBox } from 'element-plus'

// å“åº”å¼æ•°æ®å®šä¹‰
const userForm = reactive({
  // ç”¨æˆ·è¡¨å•æ•°æ®
  id: null,
  name: null,
  password: null,
  // ... å…¶ä»–å­—æ®µ
})

// è¡¨å•éªŒè¯è§„åˆ™
const rules = {
  // éªŒè¯è§„åˆ™å®šä¹‰
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-5">2. å®Œæ•´çš„å¯†ç éªŒè¯è§„åˆ™</h3>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†è§£æå¯†ç éªŒè¯çš„å®Œæ•´å®ç°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯†ç éªŒè¯è§„åˆ™</span>
<span class="hljs-attr">password</span>: [
  <span class="hljs-comment">// å¿…å¡«éªŒè¯</span>
  { 
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, 
    <span class="hljs-attr">message</span>: <span class="hljs-string">'è¯·è¾“å…¥å¯†ç '</span>, 
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> 
  },
  
  <span class="hljs-comment">// é•¿åº¦éªŒè¯</span>
  { 
    <span class="hljs-attr">min</span>: <span class="hljs-number">8</span>, 
    <span class="hljs-attr">max</span>: <span class="hljs-number">20</span>, 
    <span class="hljs-attr">message</span>: <span class="hljs-string">'å¯†ç é•¿åº¦åº”åœ¨8-20ä½ä¹‹é—´'</span>, 
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> 
  },
  
  <span class="hljs-comment">// å°å†™å­—æ¯éªŒè¯</span>
  {
    <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">rule, value, callback</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/[a-z]/</span>.<span class="hljs-title function_">test</span>(value)) {
        <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå°å†™å­—æ¯'</span>))
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">callback</span>()
      }
    },
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span>
  },
  
  <span class="hljs-comment">// å¤§å†™å­—æ¯éªŒè¯</span>
  {
    <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">rule, value, callback</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/[A-Z]/</span>.<span class="hljs-title function_">test</span>(value)) {
        <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå¤§å†™å­—æ¯'</span>))
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">callback</span>()
      }
    },
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span>
  },
  
  <span class="hljs-comment">// æ•°å­—éªŒè¯</span>
  {
    <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">rule, value, callback</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/\d/</span>.<span class="hljs-title function_">test</span>(value)) {
        <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªæ•°å­—'</span>))
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">callback</span>()
      }
    },
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span>
  },
  
  <span class="hljs-comment">// ç‰¹æ®Šå­—ç¬¦éªŒè¯</span>
  {
    <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">rule, value, callback</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> specialCharPattern = <span class="hljs-regexp">/[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]/</span>;
      <span class="hljs-keyword">if</span> (!specialCharPattern.<span class="hljs-title function_">test</span>(value)) {
        <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦'</span>))
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">callback</span>()
      }
    },
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span>
  }
],
</code></pre>
<h3 data-id="heading-6">3. è¯­æ³•è¯¦ç»†è§£æ</h3>
<h4 data-id="heading-7">3.1 Element Plus éªŒè¯è§„åˆ™ç»“æ„</h4>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,           <span class="hljs-comment">// æ˜¯å¦å¿…å¡«</span>
  <span class="hljs-attr">message</span>: <span class="hljs-string">'é”™è¯¯æç¤ºä¿¡æ¯'</span>,   <span class="hljs-comment">// éªŒè¯å¤±è´¥æ—¶æ˜¾ç¤ºçš„æ¶ˆæ¯</span>
  <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span>,         <span class="hljs-comment">// è§¦å‘éªŒè¯çš„æ—¶æœº</span>
  <span class="hljs-attr">min</span>: <span class="hljs-number">8</span>,                  <span class="hljs-comment">// æœ€å°é•¿åº¦</span>
  <span class="hljs-attr">max</span>: <span class="hljs-number">20</span>,                 <span class="hljs-comment">// æœ€å¤§é•¿åº¦</span>
  <span class="hljs-attr">validator</span>: <span class="hljs-keyword">function</span>      <span class="hljs-comment">// è‡ªå®šä¹‰éªŒè¯å‡½æ•°</span>
}
</code></pre>
<h4 data-id="heading-8">3.2 è‡ªå®šä¹‰éªŒè¯å‡½æ•°å‚æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">rule, value, callback</span>) =&gt;</span> {
  <span class="hljs-comment">// rule: å½“å‰éªŒè¯è§„åˆ™çš„é…ç½®å¯¹è±¡</span>
  <span class="hljs-comment">// value: å½“å‰å­—æ®µçš„è¾“å…¥å€¼ï¼ˆç”¨æˆ·è¾“å…¥çš„å¯†ç ï¼‰</span>
  <span class="hljs-comment">// callback: éªŒè¯å®Œæˆåçš„å›è°ƒå‡½æ•°</span>
}
</code></pre>
<ul>
<li><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">rule</a>: åŒ…å«å½“å‰éªŒè¯è§„åˆ™çš„æ‰€æœ‰é…ç½®ä¿¡æ¯</li>
<li><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">value</a>: ç”¨æˆ·åœ¨å¯†ç å­—æ®µè¾“å…¥çš„å®é™…å€¼</li>
<li><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">callback</a>: ç”¨äºé€šçŸ¥éªŒè¯ç»“æœçš„å›è°ƒå‡½æ•°</li>
</ul>
<h4 data-id="heading-9">3.3 æ­£åˆ™è¡¨è¾¾å¼è¯¦è§£</h4>
<pre><code class="hljs language-javascript" lang="javascript">/[a-z]/.<span class="hljs-title function_">test</span>(value)        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åŒ…å«å°å†™å­—æ¯ a-z</span>
/[A-Z]/.<span class="hljs-title function_">test</span>(value)        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åŒ…å«å¤§å†™å­—æ¯ A-Z</span>
/\d/.<span class="hljs-title function_">test</span>(value)           <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åŒ…å«æ•°å­— 0-9</span>
/[@$!%*?&amp;~#^_+=<span class="xml"><span class="hljs-tag">&lt;&gt;</span>,.:/|\\(){}[\]]/.test(value)  // æ£€æŸ¥æ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦
</span></code></pre>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼è§£é‡Šï¼š</strong></p>
<ul>
<li><code>/[a-z]/</code> : åŒ¹é…ä»»æ„ä¸€ä¸ªå°å†™å­—æ¯</li>
<li><code>/[A-Z]/</code> : åŒ¹é…ä»»æ„ä¸€ä¸ªå¤§å†™å­—æ¯</li>
<li><code>/\d/</code> : åŒ¹é…ä»»æ„ä¸€ä¸ªæ•°å­—ï¼ˆç­‰åŒäº <code>[0-9]</code>ï¼‰</li>
<li><code>/[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]/</code> : åŒ¹é…æŒ‡å®šçš„ç‰¹æ®Šå­—ç¬¦é›†åˆ</li>
</ul>
<h3 data-id="heading-10">4. éªŒè¯æµç¨‹åˆ†æ</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹éªŒè¯æ˜¯å¦‚ä½•åœ¨ç”¨æˆ·äº¤äº’ä¸­å·¥ä½œçš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!formRef.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// è§¦å‘è¡¨å•éªŒè¯</span>
    <span class="hljs-keyword">await</span> formRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">validate</span>()
    
    <span class="hljs-comment">// éªŒè¯é€šè¿‡åçš„é€»è¾‘</span>
    <span class="hljs-comment">// ...</span>
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// éªŒè¯å¤±è´¥æ—¶çš„å¤„ç†</span>
    <span class="hljs-comment">// Element Plus ä¼šè‡ªåŠ¨æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span>
  }
}
</code></pre>
<p>å½“ç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®æ—¶ï¼š</p>
<ol>
<li>è°ƒç”¨ <code>formRef.value.validate()</code> æ–¹æ³•</li>
<li>Element Plus éå†æ‰€æœ‰éªŒè¯è§„åˆ™</li>
<li>å¯¹æ¯ä¸ªè§„åˆ™æ‰§è¡Œç›¸åº”çš„éªŒè¯é€»è¾‘</li>
<li>å¦‚æœéªŒè¯å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</li>
<li>å¦‚æœæ‰€æœ‰éªŒè¯é€šè¿‡ï¼Œç»§ç»­æ‰§è¡Œæäº¤é€»è¾‘</li>
</ol>
<h3 data-id="heading-11">5. ç”¨æˆ·ä½“éªŒä¼˜åŒ–</h3>
<p>é€šè¿‡å°†å¯†ç éªŒè¯æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹è§„åˆ™ï¼Œæˆ‘ä»¬å®ç°äº†ä»¥ä¸‹ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼š</p>
<h4 data-id="heading-12">5.1 å³æ—¶åé¦ˆ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span>  <span class="hljs-comment">// åœ¨ç”¨æˆ·ç¦»å¼€è¾“å…¥æ¡†æ—¶ç«‹å³éªŒè¯</span>
</code></pre>
<h4 data-id="heading-13">5.2 å…·ä½“é”™è¯¯ä¿¡æ¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå°å†™å­—æ¯'</span>))
</code></pre>
<p>ç”¨æˆ·èƒ½æ¸…æ¥šçŸ¥é“å¯†ç ç¼ºå°‘å“ªç§ç±»å‹çš„å­—ç¬¦ã€‚</p>
<h4 data-id="heading-14">5.3 æ¸è¿›å¼æç¤º</h4>
<p>ç”¨æˆ·æ¯æ»¡è¶³ä¸€ä¸ªæ¡ä»¶ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªéªŒè¯é€šè¿‡ï¼Œæä¾›ç§¯æçš„åé¦ˆã€‚</p>
<h2 data-id="heading-15">å®‰å…¨è€ƒè™‘</h2>
<h3 data-id="heading-16">1. å‰åç«¯ä¸€è‡´æ€§</h3>
<p>æ ¹æ®é¡¹ç›®è§„èŒƒï¼Œå‰ç«¯éªŒè¯è§„åˆ™å¿…é¡»ä¸åç«¯ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">PasswordValidator</a> ç±»ä¿æŒä¸€è‡´ï¼Œç¡®ä¿ï¼š</p>
<ul>
<li>ç›¸åŒçš„å¯†ç å¤æ‚åº¦è¦æ±‚</li>
<li>ç»Ÿä¸€çš„ç‰¹æ®Šå­—ç¬¦å®šä¹‰ï¼ˆåŒ…æ‹¬ <code>~</code> å­—ç¬¦ï¼‰</li>
<li>ä¸€è‡´çš„é•¿åº¦é™åˆ¶</li>
</ul>
<h3 data-id="heading-17">2. éªŒè¯å±‚çº§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯éªŒè¯ï¼ˆç”¨æˆ·ä½“éªŒï¼‰</span>
<span class="hljs-comment">// åç«¯éªŒè¯ï¼ˆå®‰å…¨ä¿è¯ï¼‰</span>
<span class="hljs-comment">// æ•°æ®åº“çº¦æŸï¼ˆæœ€åé˜²çº¿ï¼‰</span>
</code></pre>
<p>å‰ç«¯éªŒè¯ä»…ç”¨äºæ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œåç«¯éªŒè¯æ˜¯å®‰å…¨çš„æœ€ç»ˆä¿éšœã€‚</p>
<h3 data-id="heading-18">3. å¯†ç ç­–ç•¥</h3>
<p>å½“å‰å®ç°çš„å¯†ç ç­–ç•¥åŒ…æ‹¬ï¼š</p>
<ul>
<li>é•¿åº¦ï¼š8-20 ä½</li>
<li>å¿…é¡»åŒ…å«ï¼šå°å†™å­—æ¯ã€å¤§å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦</li>
<li>ç‰¹æ®Šå­—ç¬¦é›†åˆï¼š<code>@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\(){}[]</code></li>
</ul>
<h2 data-id="heading-19">ä»£ç é‡æ„ä¸ä¼˜åŒ–</h2>
<p>æ ¹æ®é¡¹ç›®è§„èŒƒï¼Œæˆ‘ä»¬å°†å¯†ç éªŒè¯æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹éªŒè¯è§„åˆ™ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å•ä¸€çš„å¤æ‚æ­£åˆ™è¡¨è¾¾å¼ï¼š</p>
<p><strong>é‡æ„å‰ï¼ˆå•ä¸€éªŒè¯ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]])[A-Za-z\d@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]+$/</span>,
  <span class="hljs-attr">message</span>: <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦'</span>
}
</code></pre>
<p><strong>é‡æ„åï¼ˆåˆ†é¡¹éªŒè¯ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">[
  <span class="hljs-comment">// å°å†™å­—æ¯éªŒè¯</span>
  { <span class="hljs-attr">validator</span>: validateLowercase, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> },
  <span class="hljs-comment">// å¤§å†™å­—æ¯éªŒè¯</span>
  { <span class="hljs-attr">validator</span>: validateUppercase, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> },
  <span class="hljs-comment">// æ•°å­—éªŒè¯</span>
  { <span class="hljs-attr">validator</span>: validateDigit, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> },
  <span class="hljs-comment">// ç‰¹æ®Šå­—ç¬¦éªŒè¯</span>
  { <span class="hljs-attr">validator</span>: validateSpecialChar, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> }
]
</code></pre>
<h2 data-id="heading-20">çº¯ Vue 3 å¯†ç éªŒè¯å®ç°</h2>
<p>å¦‚æœåªä½¿ç”¨ Vue 3 è€Œä¸ä½¿ç”¨ Element Plusï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å®ç°å¯†ç éªŒè¯é€»è¾‘ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨çº¯ Vue 3 å®ç°å¯†ç éªŒè¯çš„å®Œæ•´ç¤ºä¾‹ï¼š</p>
<h3 data-id="heading-21">1. åŸºç¡€ç»„ä»¶ç»“æ„</h3>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"password-form"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ç”¨æˆ·æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¯†ç è¾“å…¥æ¡† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"password"</span>&gt;</span>å¯†ç :<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">v-model</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        @<span class="hljs-attr">blur</span>=<span class="hljs-string">"validatePassword"</span>
        @<span class="hljs-attr">input</span>=<span class="hljs-string">"validatePasswordRealTime"</span>
        <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ 'error': hasError, 'valid': isValid &amp;&amp; password }"</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"hasError"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"error-message"</span>&gt;</span>{{ errorMessage }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¯†ç å¼ºåº¦æŒ‡ç¤ºå™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"password-requirements"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"['requirement', { satisfied: hasLowercase }]"</span>&gt;</span>
        åŒ…å«å°å†™å­—æ¯
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"['requirement', { satisfied: hasUppercase }]"</span>&gt;</span>
        åŒ…å«å¤§å†™å­—æ¯
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"['requirement', { satisfied: hasDigit }]"</span>&gt;</span>
        åŒ…å«æ•°å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"['requirement', { satisfied: hasSpecialChar }]"</span>&gt;</span>
        åŒ…å«ç‰¹æ®Šå­—ç¬¦
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"['requirement', { satisfied: isLengthValid }]"</span>&gt;</span>
        é•¿åº¦åœ¨8-20ä½ä¹‹é—´
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æäº¤æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleSubmit"</span> 
      <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"!isValid"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"submit-btn"</span>
    &gt;</span>
      æäº¤
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// å“åº”å¼æ•°æ®</span>
<span class="hljs-keyword">const</span> password = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> errorMessage = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> isValid = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)

<span class="hljs-comment">// éªŒè¯ç»“æœ</span>
<span class="hljs-keyword">const</span> hasLowercase = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> hasUppercase = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> hasDigit = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> hasSpecialChar = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> isLengthValid = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)

<span class="hljs-comment">// è®¡ç®—å±æ€§ï¼šæ˜¯å¦åŒ…å«é”™è¯¯</span>
<span class="hljs-keyword">const</span> hasError = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> !!errorMessage.<span class="hljs-property">value</span>)

<span class="hljs-comment">// å®æ—¶éªŒè¯å¯†ç </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">validatePasswordRealTime</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> value = password.<span class="hljs-property">value</span>
  
  <span class="hljs-comment">// æ£€æŸ¥å„é¡¹è¦æ±‚</span>
  hasLowercase.<span class="hljs-property">value</span> = <span class="hljs-regexp">/[a-z]/</span>.<span class="hljs-title function_">test</span>(value)
  hasUppercase.<span class="hljs-property">value</span> = <span class="hljs-regexp">/[A-Z]/</span>.<span class="hljs-title function_">test</span>(value)
  hasDigit.<span class="hljs-property">value</span> = <span class="hljs-regexp">/\d/</span>.<span class="hljs-title function_">test</span>(value)
  hasSpecialChar.<span class="hljs-property">value</span> = <span class="hljs-regexp">/[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]/</span>.<span class="hljs-title function_">test</span>(value)
  isLengthValid.<span class="hljs-property">value</span> = value.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">8</span> &amp;&amp; value.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">20</span>
  
  <span class="hljs-comment">// æ£€æŸ¥æ•´ä½“æ˜¯å¦æœ‰æ•ˆ</span>
  isValid.<span class="hljs-property">value</span> = hasLowercase.<span class="hljs-property">value</span> &amp;&amp; 
                  hasUppercase.<span class="hljs-property">value</span> &amp;&amp; 
                  hasDigit.<span class="hljs-property">value</span> &amp;&amp; 
                  hasSpecialChar.<span class="hljs-property">value</span> &amp;&amp; 
                  isLengthValid.<span class="hljs-property">value</span>
}

<span class="hljs-comment">// å¤±ç„¦æ—¶éªŒè¯ï¼ˆç”¨äºé”™è¯¯ä¿¡æ¯æ˜¾ç¤ºï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">validatePassword</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> value = password.<span class="hljs-property">value</span>
  
  <span class="hljs-keyword">if</span> (!value) {
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'è¯·è¾“å…¥å¯†ç '</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  
  <span class="hljs-keyword">if</span> (value.<span class="hljs-property">length</span> &lt; <span class="hljs-number">8</span> || value.<span class="hljs-property">length</span> &gt; <span class="hljs-number">20</span>) {
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç é•¿åº¦åº”åœ¨8-20ä½ä¹‹é—´'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  
  <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/[a-z]/</span>.<span class="hljs-title function_">test</span>(value)) {
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå°å†™å­—æ¯'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  
  <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/[A-Z]/</span>.<span class="hljs-title function_">test</span>(value)) {
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå¤§å†™å­—æ¯'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  
  <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/\d/</span>.<span class="hljs-title function_">test</span>(value)) {
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªæ•°å­—'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  
  <span class="hljs-keyword">const</span> specialCharPattern = <span class="hljs-regexp">/[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]/</span>
  <span class="hljs-keyword">if</span> (!specialCharPattern.<span class="hljs-title function_">test</span>(value)) {
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  
  <span class="hljs-comment">// æ‰€æœ‰éªŒè¯é€šè¿‡</span>
  errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-comment">// æäº¤å¤„ç†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">validatePassword</span>()) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¯†ç éªŒè¯é€šè¿‡ï¼Œå¯ä»¥æäº¤è¡¨å•'</span>)
    <span class="hljs-comment">// è¿™é‡Œæ‰§è¡Œæäº¤é€»è¾‘</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¯†ç éªŒè¯å¤±è´¥'</span>)
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.password-form</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">400px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.input-group</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
}

<span class="hljs-selector-class">.input-group</span> <span class="hljs-selector-tag">label</span> {
  <span class="hljs-attribute">display</span>: block;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">font-weight</span>: bold;
}

<span class="hljs-selector-class">.input-group</span> <span class="hljs-selector-tag">input</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
}

<span class="hljs-selector-class">.input-group</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-class">.error</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#e74c3c</span>;
}

<span class="hljs-selector-class">.input-group</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-class">.valid</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#27ae60</span>;
}

<span class="hljs-selector-class">.error-message</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#e74c3c</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">5px</span>;
}

<span class="hljs-selector-class">.password-requirements</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">15px</span> <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.requirement</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#e74c3c</span>;
}

<span class="hljs-selector-class">.requirement</span><span class="hljs-selector-class">.satisfied</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#27ae60</span>;
}

<span class="hljs-selector-class">.submit-btn</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
}

<span class="hljs-selector-class">.submit-btn</span><span class="hljs-selector-pseudo">:disabled</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#bdc3c7</span>;
  <span class="hljs-attribute">cursor</span>: not-allowed;
}

<span class="hljs-selector-class">.submit-btn</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:disabled</span>)<span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2980b9</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-22">2. ä½¿ç”¨ç»„åˆå¼å‡½æ•°çš„é«˜çº§å®ç°</h3>
<p>ä¸ºäº†æ›´å¥½çš„ä»£ç å¤ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¯†ç éªŒè¯é€»è¾‘å°è£…æˆç»„åˆå¼å‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// composables/usePasswordValidation.js</span>
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">usePasswordValidation</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å“åº”å¼æ•°æ®</span>
  <span class="hljs-keyword">const</span> password = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
  <span class="hljs-keyword">const</span> errorMessage = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
  
  <span class="hljs-comment">// éªŒè¯çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> hasLowercase = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> hasUppercase = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> hasDigit = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> hasSpecialChar = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> isLengthValid = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  
  <span class="hljs-comment">// è®¡ç®—å±æ€§</span>
  <span class="hljs-keyword">const</span> isValid = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> 
    hasLowercase.<span class="hljs-property">value</span> &amp;&amp; 
    hasUppercase.<span class="hljs-property">value</span> &amp;&amp; 
    hasDigit.<span class="hljs-property">value</span> &amp;&amp; 
    hasSpecialChar.<span class="hljs-property">value</span> &amp;&amp; 
    isLengthValid.<span class="hljs-property">value</span>
  )
  
  <span class="hljs-keyword">const</span> hasError = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> !!errorMessage.<span class="hljs-property">value</span>)
  
  <span class="hljs-comment">// å®æ—¶éªŒè¯</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">validatePasswordRealTime</span> = (<span class="hljs-params">value</span>) =&gt; {
    password.<span class="hljs-property">value</span> = value
    
    hasLowercase.<span class="hljs-property">value</span> = <span class="hljs-regexp">/[a-z]/</span>.<span class="hljs-title function_">test</span>(value)
    hasUppercase.<span class="hljs-property">value</span> = <span class="hljs-regexp">/[A-Z]/</span>.<span class="hljs-title function_">test</span>(value)
    hasDigit.<span class="hljs-property">value</span> = <span class="hljs-regexp">/\d/</span>.<span class="hljs-title function_">test</span>(value)
    hasSpecialChar.<span class="hljs-property">value</span> = <span class="hljs-regexp">/[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]/</span>.<span class="hljs-title function_">test</span>(value)
    isLengthValid.<span class="hljs-property">value</span> = value.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">8</span> &amp;&amp; value.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">20</span>
    
    <span class="hljs-keyword">return</span> isValid.<span class="hljs-property">value</span>
  }
  
  <span class="hljs-comment">// å®Œæ•´éªŒè¯ï¼ˆå¸¦é”™è¯¯ä¿¡æ¯ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">validatePassword</span> = (<span class="hljs-params">value = password.value</span>) =&gt; {
    <span class="hljs-keyword">if</span> (!value) {
      errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'è¯·è¾“å…¥å¯†ç '</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-keyword">if</span> (value.<span class="hljs-property">length</span> &lt; <span class="hljs-number">8</span> || value.<span class="hljs-property">length</span> &gt; <span class="hljs-number">20</span>) {
      errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç é•¿åº¦åº”åœ¨8-20ä½ä¹‹é—´'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/[a-z]/</span>.<span class="hljs-title function_">test</span>(value)) {
      errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå°å†™å­—æ¯'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/[A-Z]/</span>.<span class="hljs-title function_">test</span>(value)) {
      errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå¤§å†™å­—æ¯'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/\d/</span>.<span class="hljs-title function_">test</span>(value)) {
      errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªæ•°å­—'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-keyword">const</span> specialCharPattern = <span class="hljs-regexp">/[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]/</span>
    <span class="hljs-keyword">if</span> (!specialCharPattern.<span class="hljs-title function_">test</span>(value)) {
      errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  }
  
  <span class="hljs-keyword">return</span> {
    password,
    errorMessage,
    hasLowercase,
    hasUppercase,
    hasDigit,
    hasSpecialChar,
    isLengthValid,
    isValid,
    hasError,
    validatePasswordRealTime,
    validatePassword
  }
}
</code></pre>
<p>ç„¶ååœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="password-form"&gt;
    &lt;h3&gt;ç”¨æˆ·æ³¨å†Œ&lt;/h3&gt;
    
    &lt;div class="input-group"&gt;
      &lt;label for="password"&gt;å¯†ç :&lt;/label&gt;
      &lt;input
        id="password"
        v-model="password"
        type="password"
        @blur="() =&gt; validatePassword()"
        @input="e =&gt; validatePasswordRealTime(e.target.value)"
        :class="{ 'error': hasError, 'valid': isValid &amp;&amp; password }"
      /&gt;
      &lt;div v-if="hasError" class="error-message"&gt;{{ errorMessage }}&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class="password-requirements"&gt;
      &lt;div :class="['requirement', { satisfied: hasLowercase }]"&gt;
        åŒ…å«å°å†™å­—æ¯
      &lt;/div&gt;
      &lt;div :class="['requirement', { satisfied: hasUppercase }]"&gt;
        åŒ…å«å¤§å†™å­—æ¯
      &lt;/div&gt;
      &lt;div :class="['requirement', { satisfied: hasDigit }]"&gt;
        åŒ…å«æ•°å­—
      &lt;/div&gt;
      &lt;div :class="['requirement', { satisfied: hasSpecialChar }]"&gt;
        åŒ…å«ç‰¹æ®Šå­—ç¬¦
      &lt;/div&gt;
      &lt;div :class="['requirement', { satisfied: isLengthValid }]"&gt;
        é•¿åº¦åœ¨8-20ä½ä¹‹é—´
      &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;button 
      @click="handleSubmit" 
      :disabled="!isValid"
      class="submit-btn"
    &gt;
      æäº¤
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { usePasswordValidation } from './composables/usePasswordValidation'

// ä½¿ç”¨å¯†ç éªŒè¯ç»„åˆå¼å‡½æ•°
const {
  password,
  errorMessage,
  hasLowercase,
  hasUppercase,
  hasDigit,
  hasSpecialChar,
  isLengthValid,
  isValid,
  hasError,
  validatePasswordRealTime,
  validatePassword
} = usePasswordValidation()

const handleSubmit = () =&gt; {
  if (validatePassword()) {
    console.log('å¯†ç éªŒè¯é€šè¿‡ï¼Œå¯ä»¥æäº¤è¡¨å•')
    // è¿™é‡Œæ‰§è¡Œæäº¤é€»è¾‘
  } else {
    console.log('å¯†ç éªŒè¯å¤±è´¥')
  }
}
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-23">ä¸ Element Plus æ–¹æ¡ˆçš„å¯¹æ¯”</h2>
<h3 data-id="heading-24">Vue 3 çº¯å®ç°çš„ç‰¹ç‚¹ï¼š</h3>
<ol>
<li><strong>å®Œå…¨æ§åˆ¶</strong>ï¼šå¯ä»¥å®Œå…¨è‡ªå®šä¹‰éªŒè¯é€»è¾‘å’ŒUI</li>
<li><strong>è½»é‡çº§</strong>ï¼šä¸éœ€è¦å¼•å…¥ UI ç»„ä»¶åº“</li>
<li><strong>çµæ´»æ€§</strong>ï¼šå¯ä»¥å®ç°ä»»ä½•æƒ³è¦çš„éªŒè¯é€»è¾‘</li>
<li><strong>å¤æ‚åº¦</strong>ï¼šéœ€è¦æ‰‹åŠ¨å¤„ç†æ ·å¼å’Œäº¤äº’é€»è¾‘</li>
</ol>
<h3 data-id="heading-25">Element Plus å®ç°çš„ç‰¹ç‚¹ï¼š</h3>
<ol>
<li><strong>å¿«é€Ÿå¼€å‘</strong>ï¼šæä¾›é¢„è®¾çš„éªŒè¯è§„åˆ™å’Œæ ·å¼</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šUI ç»„ä»¶é£æ ¼ç»Ÿä¸€</li>
<li><strong>å†…ç½®åŠŸèƒ½</strong>ï¼šè¡¨å•éªŒè¯ã€é”™è¯¯æç¤ºç­‰å¼€ç®±å³ç”¨</li>
<li><strong>ä¾èµ–æ€§</strong>ï¼šéœ€è¦å¼•å…¥æ•´ä¸ª UI ç»„ä»¶åº“</li>
</ol>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>çº¯ Vue 3 å®ç°å¯†ç éªŒè¯éœ€è¦æˆ‘ä»¬è‡ªå·±å¤„ç†ï¼š</p>
<ol>
<li><strong>å“åº”å¼æ•°æ®ç®¡ç†</strong>ï¼šä½¿ç”¨ <code>ref</code> å’Œ <code>reactive</code></li>
<li><strong>éªŒè¯é€»è¾‘</strong>ï¼šç¼–å†™å…·ä½“çš„éªŒè¯å‡½æ•°</li>
<li><strong>UI äº¤äº’</strong>ï¼šå¤„ç†è¾“å…¥äº‹ä»¶ã€é”™è¯¯æç¤ºã€æ ·å¼å˜åŒ–</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šå®æ—¶åé¦ˆã€è§†è§‰æŒ‡ç¤ºç­‰</li>
</ol>
<p>è¿™ç§æ–¹å¼è™½ç„¶éœ€è¦æ›´å¤šçš„ä»£ç ï¼Œä½†æä¾›äº†å®Œå…¨çš„æ§åˆ¶æƒï¼Œé€‚åˆå¯¹ UI å’Œäº¤äº’æœ‰ç‰¹æ®Šè¦æ±‚çš„é¡¹ç›®ã€‚é€šè¿‡ç»„åˆå¼å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°ç»„ç»‡å’Œå¤ç”¨éªŒè¯é€»è¾‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3å®ç°å‰ç«¯ç”Ÿæˆwordå¹¶ä¸‹è½½]]></title>    <link>https://juejin.cn/post/7590283328177586219</link>    <guid>https://juejin.cn/post/7590283328177586219</guid>    <pubDate>2026-01-04T03:14:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590283328177586219" data-draft-id="7590735421261922345" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3å®ç°å‰ç«¯ç”Ÿæˆwordå¹¶ä¸‹è½½"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-04T03:14:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤–å•«å•«"/> <meta itemprop="url" content="https://juejin.cn/user/3314378809290953"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3å®ç°å‰ç«¯ç”Ÿæˆwordå¹¶ä¸‹è½½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3314378809290953/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤–å•«å•«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:14:51.000Z" title="Sun Jan 04 2026 03:14:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">1. å‰æƒ…</h2>
<p>åœ¨åå°ç®¡ç†å¹³å°å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šä»åç«¯è·å–åˆ°æ•°æ®åï¼Œå‰ç«¯ç”ŸæˆæŒ‡å®šæ¨¡æ¿å†…å®¹çš„wordæ–‡ä»¶å¹¶ä¸‹è½½åˆ°æœ¬åœ°ã€‚å½“å¯¼å‡ºçš„æ–‡ä»¶è¿‡å¤šæ—¶ï¼Œä¸ºäº†å‡å°‘å“åº”æ—¶é—´ï¼Œä¹ŸåŠ ä¸Šäº†è¿›è¡Œå‹ç¼©ä¸‹è½½éƒ¨åˆ†ã€‚ä½¿ç”¨è¿‡ç¨‹ä¸­å¯æ ¹æ®å®é™…éœ€æ±‚ä½œå‡ºè°ƒæ•´ã€‚</p>
<h2 data-id="heading-1">2. å‡†å¤‡</h2>
<p>wqqqq</p>
<h4 data-id="heading-2">ä¾èµ–</h4>
<pre><code class="hljs language-js" lang="js">npm install docxtemplater
 
npm install jszip
 
npm install pizzip
 
npm install file-saver
 
npm install jszip-utils
 
npm install angular-expressions
</code></pre>
<h4 data-id="heading-3">æ¨¡æ¿æ–‡ä»¶</h4>
<p>éœ€è¦æŒ‰å¯¼å‡ºæ ·å¼å‡†å¤‡ä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œæ”¾åˆ° public ç›®å½•ä¸‹ã€‚æ¨¡æ¿ä¸­å ä½ç¬¦åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š</p>
<ul>
<li>å•ä¸€å˜é‡ï¼š{å˜é‡å}ã€‚ç›´æ¥æ˜¾ç¤ºæ”¹å˜é‡çš„å€¼ã€‚</li>
<li>éå†ï¼š{#å˜é‡å}å†…å®¹{/å˜é‡å}ã€‚ä¼šå¯¹è¯¥æ•°æ®è¿›è¡Œéå†å±•ç¤º</li>
<li>æ˜¾ç¤º/éšè—ï¼š{#å˜é‡å}å†…å®¹{/å˜é‡å}ã€‚å…¶ä¸­ä¸ºtrueçš„æ—¶å€™æ˜¾ç¤ºï¼Œfalseåˆ™ä¸æ˜¾ç¤ºã€‚</li>
<li>å›¾ç‰‡ï¼š{%å˜é‡å}ã€‚å˜é‡å€¼ä¸ºbase64æ ¼å¼ã€‚</li>
<li>if-elseï¼š{#å˜é‡å}A{/å˜é‡å}{^å˜é‡å}B{/å˜é‡å}ã€‚å…¶ä¸­å€¼ä¸ºtrueçš„æ—¶å€™æ˜¾ç¤ºâ€œAâ€ï¼Œä¸ºfalseæ˜¾ç¤ºâ€œBâ€ï¼›</li>
<li>å¤é€‰æ¡†ï¼š{#å˜é‡å}é€‰ä¸­{/å˜é‡å}{^å˜é‡å}éé€‰ä¸­{/å˜é‡å}
ä»¥ä¸Šéƒ¨åˆ†æ˜¯æˆ‘åœ¨å®é™…éœ€æ±‚ä¸­ä½¿ç”¨åˆ°çš„ï¼Œå…¶ä»–ä½¿ç”¨å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocxtemplater.com%2Fdocs%2F" title="https://docxtemplater.com/docs/" target="_blank" ref="nofollow noopener noreferrer">docxtemplater.com/docs/</a></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> obj={
    <span class="hljs-attr">name</span>:<span class="hljs-string">'å¼ ä¸‰'</span>,
    <span class="hljs-attr">age</span>:<span class="hljs-number">12</span>,
    <span class="hljs-attr">hobby</span>:[<span class="hljs-string">'basketball'</span>ï¼Œ<span class="hljs-string">'swimming'</span>],
    <span class="hljs-attr">url</span>:<span class="hljs-string">'xxxxxxxxxxxxxx.png'</span>,
    <span class="hljs-attr">isPic</span>:<span class="hljs-literal">false</span>
}
</code></pre>
<p>è¿™é‡Œå®šä¸€ä¸ªåä¸º obj çš„å¯¹è±¡ï¼Œæ¥ä¸‹æ¥æŒ‰ç…§ä¸‹é¢çš„æ¨¡æ¿ç”Ÿæˆï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a06d4dc444db4082921b484202fe9897~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSW5ZWr5ZWr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101290&amp;x-signature=c1tu883VBScblxhECkHGHzaZfQM%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">3. å®ç°</h2>
<p><strong>docFiles.js</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { imageHandle } <span class="hljs-keyword">from</span> <span class="hljs-string">'../common/image'</span>
<span class="hljs-keyword">import</span> { saveAs } <span class="hljs-keyword">from</span> <span class="hljs-string">'file-saver'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">JsZip</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'jszip'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">PizZip</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"pizzip"</span>;
<span class="hljs-keyword">import</span> docxtemplater <span class="hljs-keyword">from</span> <span class="hljs-string">"docxtemplater"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">JSZipUtils</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"jszip-utils"</span>;
<span class="hljs-keyword">import</span> expressions <span class="hljs-keyword">from</span> <span class="hljs-string">"angular-expressions"</span>;
 
<span class="hljs-keyword">let</span> <span class="hljs-attr">promises</span>: any[] = [];
</code></pre>
<p>ä¸‹è½½å•ä¸ªæ–‡ä»¶</p>
<pre><code class="hljs language-js" lang="js"> 
<span class="hljs-comment">/**å¯¼å‡ºå•ä¸ªwordæ–‡ä»¶
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} opts é…ç½®é¡¹
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">exportDocx</span> = (<span class="hljs-params">opts</span>) =&gt; {
  <span class="hljs-keyword">let</span> {
    <span class="hljs-comment">//æ¨¡æ¿æ–‡ä»¶è·¯å¾„(å¿…å¡«)</span>
    tempDocxpath,
    <span class="hljs-comment">//æ¨¡æ¿æ–‡ä»¶æ•°æ®ï¼ˆå¿…å¡«ï¼‰</span>
    data,
    <span class="hljs-comment">//å¯¼å‡ºæ–‡ä»¶å</span>
    fileName,
    <span class="hljs-comment">//æ˜¯å¦åŒ…å«å›¾ç‰‡</span>
    imageable,
    <span class="hljs-comment">//å¯¼å‡ºæˆåŠŸåçš„å›è°ƒ</span>
    onSuccess,
    <span class="hljs-comment">//å¯¼å‡ºå¤±è´¥åçš„å›è°ƒ</span>
    onError,
  } = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({
    <span class="hljs-attr">imageable</span>: <span class="hljs-literal">false</span>ï¼Œ
    <span class="hljs-attr">fileName</span>:<span class="hljs-string">'æ–°å»ºæ–‡ä»¶1'</span>,
  }, opts)
 
  <span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolver, reject</span>) =&gt;</span> {
    <span class="hljs-title class_">JSZipUtils</span>.<span class="hljs-title function_">getBinaryContent</span>(tempDocxpath, <span class="hljs-function">(<span class="hljs-params">error, content</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (error) {
        <span class="hljs-keyword">throw</span> error;
      }
      expressions.<span class="hljs-property">filters</span>.<span class="hljs-property">size</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">input, width, height</span>) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">data</span>: input,
          <span class="hljs-attr">size</span>: [width, height],
        };
      }
 
      <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªPiZipç¤ºä¾‹ï¼Œå†…å®¹ä¸ºæ¨¡æ¿çš„å†…å®¹</span>
      <span class="hljs-keyword">const</span> zip = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PizZip</span>(content);
 
      <span class="hljs-comment">//åˆ›å»ºå¹¶åŠ è½½docxtemplaterå®ä¾‹å¯¹è±¡</span>
      <span class="hljs-keyword">let</span> doc = <span class="hljs-keyword">new</span> <span class="hljs-title function_">docxtemplater</span>();
 
      <span class="hljs-keyword">if</span> (imageable) {
        <span class="hljs-keyword">let</span> opts = <span class="hljs-title function_">imageHandle</span>()
        doc.<span class="hljs-title function_">attachModule</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageModule</span>(opts));
      }
 
      doc.<span class="hljs-title function_">loadZip</span>(zip);
      doc.<span class="hljs-title function_">setData</span>(data);
 
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">//ç”¨æ¨¡æ¿å˜é‡çš„å€¼æ›¿æ¢æ‰€æœ‰æ¨¡æ¿å˜é‡</span>
        doc.<span class="hljs-title function_">render</span>();
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> e = {
          <span class="hljs-string">"message"</span>: error.<span class="hljs-property">message</span>,
          <span class="hljs-string">"name"</span>: error.<span class="hljs-property">name</span>,
          <span class="hljs-string">"stack"</span>: error.<span class="hljs-property">stack</span>,
          <span class="hljs-string">"properties"</span>: error.<span class="hljs-property">properties</span>
        };
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({ <span class="hljs-attr">error</span>: e });
        <span class="hljs-keyword">throw</span> error;
      }
 
      <span class="hljs-comment">//ç”Ÿæˆä¸€ä¸ªä»£è¡¨docxtemplaterå¯¹è±¡çš„zipæ–‡ä»¶ï¼ˆåœ¨å†…å­˜ä¸­è¡¨ç¤ºï¼‰</span>
      <span class="hljs-keyword">const</span> out = doc.<span class="hljs-title function_">getZip</span>().<span class="hljs-title function_">generate</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">"blob"</span>,
        <span class="hljs-attr">mimeType</span>: <span class="hljs-string">"application/vnd.openxmlformats-officedocument.wordprocessingml.document"</span>,
      });
      <span class="hljs-title function_">resolver</span>(out);
    })
  })
 
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([promise]).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">out</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span>(onSuccess) <span class="hljs-title function_">onSuccess</span>()
    <span class="hljs-title function_">saveAs</span>(out, fileName);
  }).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span>(onError) <span class="hljs-title function_">onError</span>()
  })
}
</code></pre>
<p>å‹ç¼©åŒ…å½¢å¼æ‰¹é‡ä¸‹è½½</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**å¤šçº§ç›®å½•çš„å½¢å¼å¯¼å‡ºæ–‡ä»¶
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} opts é…ç½®é¡¹
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">exportFile_MultiLevelDirectory</span> = (<span class="hljs-params">opts</span>) =&gt; {
  <span class="hljs-keyword">let</span> {
    <span class="hljs-comment">//æ¨¡æ¿æ–‡ä»¶è·¯å¾„</span>
    tempDocxpath,
    <span class="hljs-comment">//æ¨¡æ¿æ–‡ä»¶æ•°æ®</span>
    data,
    <span class="hljs-comment">//ä¸€çº§ç›®å½•å</span>
    zipName,
    <span class="hljs-comment">//ä¸‹çº§ç›®å½•å¯¹åº”æ•°æ®è·¯å¾„</span>
    path,
    <span class="hljs-comment">//ä¸‹çº§ç›®å½•åç§°ç±»å‹</span>
    subFolderNameType,
    <span class="hljs-comment">//æ–‡ä»¶åç§°ç±»å‹</span>
    fileNameType,
    <span class="hljs-comment">//æ˜¯å¦åŒ…å«å›¾ç‰‡</span>
    imageable,
    <span class="hljs-comment">//å¯¼å‡ºæˆåŠŸåçš„å›è°ƒ</span>
    onSuccess,
    <span class="hljs-comment">//å¯¼å‡ºå¤±è´¥åçš„å›è°ƒ</span>
    onError,
  } = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({
    <span class="hljs-attr">imageable</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">zipName</span>:<span class="hljs-string">'æ–°å»ºæ–‡ä»¶1'</span>
  }, opts)
 
  <span class="hljs-keyword">const</span> zips = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsZip</span>();
  <span class="hljs-comment">//åˆ›å»ºä¸€çº§ç›®å½•çš„å‹ç¼©åŒ…</span>
  <span class="hljs-keyword">const</span> folder = zips.<span class="hljs-title function_">folder</span>(zipName);
 
  <span class="hljs-keyword">let</span> creatOpts = {
    tempDocxpath,
    data,
    path,
    fileNameType,
    subFolderNameType,
    imageable,
    folder,
    zips,
  }
  <span class="hljs-title function_">create_Directory</span>(creatOpts)
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    zips.<span class="hljs-title function_">generateAsync</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"blob"</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">content</span> =&gt;</span> {
      <span class="hljs-comment">//ç”ŸæˆäºŒè¿›åˆ¶æµ</span>
      <span class="hljs-keyword">if</span>(onSuccess) <span class="hljs-title function_">onSuccess</span>()
      <span class="hljs-title function_">saveAs</span>(content, zipName);
    }).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span>(onError) <span class="hljs-title function_">onError</span>()
    })
  })
}
 
<span class="hljs-comment">/**åˆ›å»ºä¸‹çº§ç›®å½•
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} opts é…ç½®é¡¹
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">create_Directory</span>(<span class="hljs-params">opts</span>) {
  <span class="hljs-keyword">let</span> { 
     tempDocxpath,
     data,
     path,
     folder,
     subFolderNameType,
     fileNameType,
     imageable,
     zips
  } = opts
 
  <span class="hljs-comment">//éå†æ•°æ®ï¼Œä¾æ¬¡å½¢æˆä¸‹çº§ç›®å½•/æ–‡ä»¶</span>
  data.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (item[path] || item[path]?.<span class="hljs-property">length</span>) {
     item[path].<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item2, index2</span>) =&gt;</span> {
        <span class="hljs-comment">//åˆ›å»ºä¸‹çº§ç›®å½•</span>
        <span class="hljs-keyword">let</span> subFolderName = item2.<span class="hljs-property">folderName</span>
        <span class="hljs-keyword">let</span> subFolder = folder.<span class="hljs-title function_">folder</span>(subFolderName);
 
        <span class="hljs-keyword">let</span> creatOpts = {
          tempDocxpath,
          <span class="hljs-attr">data</span>: item[path],
          fileNameType,
          subFolderNameType,
          imageable,
          zips,
          <span class="hljs-attr">folder</span>: subFolder
        }
        <span class="hljs-title function_">create_Directory</span>(creatOpts)
      })
    }<span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> fileName = item.<span class="hljs-property">fileName</span>
      <span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolver, reject</span>) =&gt;</span> {
        <span class="hljs-title class_">JSZipUtils</span>.<span class="hljs-title function_">getBinaryContent</span>(tempDocxpath, <span class="hljs-function">(<span class="hljs-params">error, content</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (error) {
            <span class="hljs-keyword">throw</span> error;
          }
          expressions.<span class="hljs-property">filters</span>.<span class="hljs-property">size</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">input, width, height</span>) {
            <span class="hljs-keyword">return</span> {
              <span class="hljs-attr">data</span>: input,
              <span class="hljs-attr">size</span>: [width, height],
            };
          };
          <span class="hljs-keyword">const</span> zip = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PizZip</span>(content);
          <span class="hljs-keyword">let</span> doc = <span class="hljs-keyword">new</span> <span class="hljs-title function_">docxtemplater</span>();
          <span class="hljs-keyword">if</span> (imageable) {
            <span class="hljs-keyword">let</span> opts = <span class="hljs-title function_">imageHandle</span>()
            doc.<span class="hljs-title function_">attachModule</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageModule</span>(opts));
          }
          doc.<span class="hljs-title function_">loadZip</span>(zip);
 
          doc.<span class="hljs-title function_">setData</span>(item);
          <span class="hljs-keyword">try</span> {
            doc.<span class="hljs-title function_">render</span>();
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">const</span> e = {
              <span class="hljs-string">"message"</span>: error.<span class="hljs-property">message</span>,
              <span class="hljs-string">"name"</span>: error.<span class="hljs-property">name</span>,
              <span class="hljs-string">"stack"</span>: error.<span class="hljs-property">stack</span>,
              <span class="hljs-string">"properties"</span>: error.<span class="hljs-property">properties</span>
            };
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({ <span class="hljs-attr">error</span>: e });
            <span class="hljs-keyword">throw</span> error;
          }
          <span class="hljs-keyword">const</span> out = doc.<span class="hljs-title function_">getZip</span>().<span class="hljs-title function_">generate</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">"blob"</span>,
            <span class="hljs-attr">mimeType</span>: <span class="hljs-string">"application/vnd.openxmlformats-officedocument.wordprocessingml.document"</span>,
          });
          folder.<span class="hljs-title function_">file</span>(fileName, out, { <span class="hljs-attr">binary</span>: <span class="hljs-literal">true</span> });
          <span class="hljs-title function_">resolver</span>(<span class="hljs-string">'success'</span>);
        });
      })
      promises.<span class="hljs-title function_">push</span>(promise);
    }
  }
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šå¯¼å‡ºå¤šä¸ªwordæ–‡ä»¶æ—¶éœ€æ³¨æ„æ–‡æ¡£å‘½åé—®é¢˜ï¼Œé¿å…å› åç§°é‡å¤äº§ç”Ÿçš„æ–‡ä»¶è¦†ç›–é—®é¢˜ã€‚</p>
</blockquote>
<p><strong>image.js</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * å›¾ç‰‡å¤„ç†é€‰é¡¹é…ç½®ç”Ÿæˆå‡½æ•°ã€‚
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Object</span>} è¿”å›ä¸€ä¸ªåŒ…å«å›¾ç‰‡å¤„ç†é€‰é¡¹çš„å¯¹è±¡ã€‚
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">imageHandle</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// å›¾ç‰‡å¤„ç†</span>
  <span class="hljs-keyword">let</span> opts = {}
 
  opts = {
    <span class="hljs-comment">//å›¾åƒæ˜¯å¦å±…ä¸­</span>
    <span class="hljs-attr">centered</span>: <span class="hljs-literal">false</span>
  };
  opts.<span class="hljs-property">getImage</span> = <span class="hljs-function">(<span class="hljs-params">chartId</span>) =&gt;</span> {
    <span class="hljs-comment">// å°†base64çš„æ•°æ®è½¬ä¸ºArrayBuffer</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">base64DataURLToArrayBuffer</span>(chartId);
  }
  opts.<span class="hljs-property">getSize</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">img, tagValue, tagName</span>) {
    <span class="hljs-comment">//è‡ªå®šä¹‰æŒ‡å®šå›¾åƒå¤§å°</span>
    <span class="hljs-keyword">return</span> [<span class="hljs-number">500</span>, <span class="hljs-number">400</span>];
  }
  <span class="hljs-keyword">return</span> opts
}
 
<span class="hljs-comment">/**
 * å°†base64æ ¼å¼çš„æ•°æ®è½¬ä¸ºArrayBuffer
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} dataURL base64æ ¼å¼çš„æ•°æ®
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">base64DataURLToArrayBuffer</span>(<span class="hljs-params">dataURL</span>) {
  <span class="hljs-keyword">const</span> base64Regex = <span class="hljs-regexp">/^data:image\/(png|jpg|jpeg|svg|svg\+xml);base64,/</span>;
  <span class="hljs-keyword">if</span> (!base64Regex.<span class="hljs-title function_">test</span>(dataURL)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">const</span> stringBase64 = dataURL.<span class="hljs-title function_">replace</span>(base64Regex, <span class="hljs-string">""</span>);
  <span class="hljs-keyword">let</span> binaryString;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">"undefined"</span>) {
    binaryString = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">atob</span>(stringBase64);
  } <span class="hljs-keyword">else</span> {
    binaryString = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Buffer</span>(stringBase64, <span class="hljs-string">"base64"</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">"binary"</span>);
  }
  <span class="hljs-keyword">const</span> len = binaryString.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(len);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
    <span class="hljs-keyword">const</span> ascii = binaryString.<span class="hljs-title function_">charCodeAt</span>(i);
    bytes[i] = ascii;
  }
  <span class="hljs-keyword">return</span> bytes.<span class="hljs-property">buffer</span>;
}
</code></pre>
<p><strong>åº”ç”¨é¡µé¢æ–‡ä»¶</strong></p>
<p>æ³¨é‡Šéƒ¨åˆ†ä¸ºæ‰¹é‡å¯¼å‡º</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"downWord"</span>&gt;</span>å¯¼å‡ºword<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">let</span> obj={
        <span class="hljs-attr">name</span>:<span class="hljs-string">'å¼ ä¸‰'</span>,
        <span class="hljs-attr">images</span>:[]
    }
    
    <span class="hljs-comment">/*let objList=[
        {
            folderName:'æµå—å¸‚',
            children:[
                {
                    fileName:'å¼ æ‘ç”³è¯·åˆåŒ',
                    name:'å¼ æ‘',
                    count:72
                },
                {
                    fileName:'å¤§ç‹æ‘ç”³è¯·åˆåŒ',
                    name:'å¤§ç‹æ‘',
                    count:56
                },
            ]
        },
        {
            folderName:'å¾·å·å¸‚',
            children:[
                {
                    fileName:'é«˜å®¶æ‘ç”³è¯·åˆåŒ',
                    name:'é«˜å®¶æ‘',
                    count:10
                },
            ]
        },
        {
            fileName:'å±…æˆ·é‡Œæ‘ç”³è¯·åˆåŒ',
            name:'å±…æˆ·é‡Œæ‘',
            count:74
        },
    ]*/</span>
 
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">downWord</span>(<span class="hljs-params"/>){
        <span class="hljs-keyword">let</span> opts={
            <span class="hljs-attr">tempDocxpath</span>:<span class="hljs-string">'/moBan.docx'</span>,
            <span class="hljs-attr">data</span>:obj,
            <span class="hljs-attr">fileName</span>:<span class="hljs-string">'ç”³è¯·è¡¨'</span>
        }
        <span class="hljs-title function_">exportDocx</span>(opts)
        <span class="hljs-comment">/*let opts={
            tempDocxpath:'/moBan.docx',
            data:objList,
            zipName:'åˆåŒç”³è¯·'
        }*/</span>
        <span class="hljs-comment">//exportFile_MultiLevelDirectory(opts)</span>
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-5">4. é—®é¢˜</h2>
<p>ï¼ˆ1ï¼‰End of data reached (data length = 0, asked index = 4). Corrupted zip ?</p>
<p>åŸå› ï¼šæ¨¡æ¿æ–‡ä»¶ä¸ºç©ºæ–‡ä»¶ï¼›</p>
<p>æ’æŸ¥ï¼šæ£€æŸ¥æ¨¡æ¿æ–‡ä»¶å¼•å…¥æ˜¯å¦æ­£ç¡®</p>
<p>ï¼ˆ2ï¼‰å¯¼å‡ºçš„æ–‡ä»¶ä¸­å›¾ç‰‡æ˜¾ç¤ºundefined</p>
<p>åŸå› ï¼šå›¾ç‰‡è·¯å¾„è½¬æ¢æˆbase64åçš„æ ¼å¼ä¸å¯¹</p>
<p>ï¼ˆ3ï¼‰æ–‡ä»¶æ•°é‡ä¸å¯¹</p>
<p>æ’æŸ¥ï¼šæ˜¯ä¸æ˜¯æ–‡ä»¶åé‡å¤è¦†ç›–å¯¼è‡´æ•°é‡ä¸å¯¹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android ä¸­çš„ LayoutInflater.Factory2 ç¬”è®°]]></title>    <link>https://juejin.cn/post/7590303618429796387</link>    <guid>https://juejin.cn/post/7590303618429796387</guid>    <pubDate>2026-01-04T01:09:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590303618429796387" data-draft-id="7590303618429780003" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android ä¸­çš„ LayoutInflater.Factory2 ç¬”è®°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-04T01:09:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒæºxinyuan"/> <meta itemprop="url" content="https://juejin.cn/user/4283353029151694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android ä¸­çš„ LayoutInflater.Factory2 ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4283353029151694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒæºxinyuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:09:49.000Z" title="Sun Jan 04 2026 01:09:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Androidä¸­ï¼Œ<code>Factory2</code> æ˜¯ <code>LayoutInflater</code> çš„ä¸€ä¸ªæ¥å£ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯<strong>æ‹¦æˆªå¹¶æ¥ç®¡å¸ƒå±€æ–‡ä»¶ï¼ˆXMLï¼‰ä¸­æ¯ä¸€ä¸ªè§†å›¾ï¼ˆViewï¼‰çš„åˆ›å»ºè¿‡ç¨‹</strong>ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ªâ€œ<strong>è§†å›¾åˆ›å»ºæ‹¦æˆªå™¨</strong>â€ã€‚å½“ç³»ç»Ÿè§£æXMLå¸ƒå±€ã€å‡†å¤‡å°†æ ‡ç­¾åï¼ˆå¦‚ <code>&lt;TextView&gt;</code>ï¼‰å®ä¾‹åŒ–ä¸ºçœŸæ­£çš„Viewå¯¹è±¡æ—¶ï¼Œä¼šä¼˜å…ˆè¯¢é—®ä½ è®¾ç½®çš„ <code>Factory2</code>ï¼šâ€œä½ æƒ³æ€ä¹ˆåˆ›å»ºè¿™ä¸ªViewï¼Ÿâ€ã€‚</li>
<li><strong>å·¥ä½œåŸç†</strong>ï¼š<code>LayoutInflater</code> å†…éƒ¨æœ‰ä¸€ä¸ª <code>createViewFromTag</code> æ–¹æ³•ã€‚åœ¨åˆ›å»ºViewæ—¶ï¼Œå®ƒä¼š<strong>é¦–å…ˆæ£€æŸ¥æ˜¯å¦è®¾ç½®äº† <code>Factory2</code></strong>ã€‚å¦‚æœè®¾ç½®äº†ï¼Œå°±ä¼šè°ƒç”¨ <code>Factory2.onCreateView()</code> æ–¹æ³•ã€‚å¦‚æœè¿™ä¸ªæ–¹æ³•è¿”å›äº†ä¸€ä¸ªæœ‰æ•ˆçš„Viewå¯¹è±¡ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ï¼›å¦‚æœè¿”å› <code>null</code>ï¼Œåˆ™ç³»ç»Ÿä¼šæŒ‰ç…§é»˜è®¤æµç¨‹å»åˆ›å»ºViewã€‚</li>
</ul>
<h3 data-id="heading-0">ğŸ”§ ä¸»è¦ç”¨é€”ä¸åº”ç”¨åœºæ™¯</h3>
<p>åˆ©ç”¨è¿™ä¸ªâ€œæ‹¦æˆªâ€èƒ½åŠ›ï¼Œ<code>Factory2</code> å¯ä»¥å®ç°è®¸å¤šå¼ºå¤§çš„åŠŸèƒ½ï¼š</p>






























<table><thead><tr><th align="left">ç”¨é€”åœºæ™¯</th><th align="left">åŠŸèƒ½è¯´æ˜</th><th align="left">ç¤ºä¾‹ / å®ç°å…³é”®</th></tr></thead><tbody><tr><td align="left"><strong>å…¨å±€æ›¿æ¢ç³»ç»Ÿç»„ä»¶</strong></td><td align="left">å°†XMLä¸­çš„æ ‡å‡†æ§ä»¶è‡ªåŠ¨æ›¿æ¢ä¸ºå…¼å®¹æ€§æˆ–è‡ªå®šä¹‰ç‰ˆæœ¬ã€‚</td><td align="left"><code>AppCompatActivity</code> ç”¨å®ƒè‡ªåŠ¨å°† <code>&lt;Button&gt;</code> æ›¿æ¢ä¸º <code>AppCompatButton</code>ã€‚</td></tr><tr><td align="left"><strong>ç»Ÿä¸€ä¿®æ”¹è§†å›¾å±æ€§</strong></td><td align="left">ä¸ºæ‰€æœ‰ç‰¹å®šç±»å‹çš„Viewï¼ˆå¦‚æ‰€æœ‰TextViewï¼‰åŠ¨æ€æ·»åŠ ç»Ÿä¸€æ ·å¼æˆ–è¡Œä¸ºã€‚</td><td align="left">æ‹¦æˆª <code>TextView</code> åˆ›å»ºï¼Œè®¾ç½®å…¨å±€é»˜è®¤å­—ä½“ã€æ–‡å­—é¢œè‰²æˆ–èƒŒæ™¯ã€‚</td></tr><tr><td align="left"><strong>å®ç°æ— ä¾µå…¥çš„ç›‘æ§</strong></td><td align="left">åœ¨ä¸ä¿®æ”¹ä¸šåŠ¡ä»£ç çš„æƒ…å†µä¸‹ï¼Œä¸ºæ‰€æœ‰Viewæ·»åŠ æ€§èƒ½ç›‘æ§æˆ–äº‹ä»¶åŸ‹ç‚¹ã€‚</td><td align="left">åˆ›å»ºViewæ—¶ï¼Œä¸ºå…¶åŒ…è£…ä¸€å±‚ä»£ç†ï¼Œç»Ÿä¸€ç›‘å¬ç‚¹å‡»ã€æµ‹é‡ç­‰äº‹ä»¶ã€‚</td></tr><tr><td align="left"><strong>åŠ¨æ€ä¸»é¢˜/æ¢è‚¤</strong></td><td align="left">æ ¹æ®è¿è¡Œæ—¶ä¸»é¢˜ï¼ŒåŠ¨æ€æ›¿æ¢è§†å›¾å¯¹åº”çš„èµ„æºã€‚</td><td align="left">æ ¹æ®ä¸»é¢˜çŠ¶æ€ï¼Œåœ¨åˆ›å»ºViewæ—¶é€‰æ‹©ä¸åŒçš„èµ„æºIDæˆ–æ„é€ æ–¹å¼ã€‚</td></tr></tbody></table>
<h3 data-id="heading-1">ğŸ’¡ å¦‚ä½•ä½¿ç”¨ä¸å…³é”®ä»£ç </h3>
<p>ä½¿ç”¨ <code>Factory2</code> çš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼Œä½†éœ€è¦æ³¨æ„ä¸ <code>AppCompatActivity</code> çš„å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p><strong>1. åŸºæœ¬ä½¿ç”¨æ¨¡å¼</strong>
ä½ éœ€è¦å®ç° <code>LayoutInflater.Factory2</code> æ¥å£ï¼Œå¹¶åœ¨ <code>Activity.onCreate()</code> çš„ <code>super.onCreate()</code> <strong>ä¹‹å‰</strong>è¿›è¡Œè®¾ç½®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-comment">// å¿…é¡»åœ¨ super.onCreate ä¹‹å‰è®¾ç½®</span>
        LayoutInflater.from(<span class="hljs-built_in">this</span>).setFactory2(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LayoutInflater</span>.Factory2() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> View <span class="hljs-title function_">onCreateView</span><span class="hljs-params">(View parent, String name, Context context, AttributeSet attrs)</span> {
                <span class="hljs-comment">// 1. åœ¨è¿™é‡Œè¿›è¡Œæ‹¦æˆªå’Œè‡ªå®šä¹‰</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"TextView"</span>.equals(name)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCustomTextView</span>(context, attrs); <span class="hljs-comment">// è¿”å›ä½ çš„è‡ªå®šä¹‰View</span>
                }
                <span class="hljs-comment">// 2. å¯¹äºä¸æƒ³å¤„ç†çš„Viewï¼Œè¿”å›nullï¼Œè®©ç³»ç»Ÿæˆ–å…¶ä»–Factoryå¤„ç†</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> View <span class="hljs-title function_">onCreateView</span><span class="hljs-params">(String name, Context context, AttributeSet attrs)</span> {
                <span class="hljs-comment">// æ­¤æ–¹æ³•ä¸ºç»§æ‰¿è‡ªFactoryçš„æ¥å£ï¼Œé€šå¸¸é€šè¿‡ä¸Šä¸€ä¸ªæ–¹æ³•å®ç°å³å¯</span>
                <span class="hljs-keyword">return</span> onCreateView(<span class="hljs-literal">null</span>, name, context, attrs);
            }
        });

        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
}
</code></pre>
<p><strong>2. ä¸ AppCompatActivity çš„å…¼å®¹æ€§é—®é¢˜ï¼ˆå…³é”®ï¼ï¼‰</strong>
å¦‚æœä½ ç»§æ‰¿ <code>AppCompatActivity</code>ï¼Œä¼šå‘ç°ä¸Šè¿°æ–¹æ³•å¯èƒ½æ— æ•ˆæˆ–æŠ¥é”™ã€‚è¿™æ˜¯å› ä¸º <code>AppCompatActivity</code> è‡ªå·±ä¹Ÿåœ¨ <code>onCreate</code> ä¸­è®¾ç½®äº†ä¸€ä¸ª <code>Factory2</code> æ¥å®ç°å‘åå…¼å®¹ï¼ˆå¦‚å°† <code>Button</code> æ›¿æ¢ä¸º <code>AppCompatButton</code>ï¼‰ï¼Œè€Œ <code>LayoutInflater</code> çš„ Factory <strong>åªèƒ½è¢«è®¾ç½®ä¸€æ¬¡</strong>ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä»£ç†æ¨¡å¼</strong>
æ­£ç¡®çš„æ–¹å¼æ˜¯åˆ›å»ºä¸€ä¸ªä»£ç†ï¼Œå°†ä½ ä¸å¤„ç†çš„Viewåˆ›å»ºè¯·æ±‚ï¼Œè½¬å‘ç»™ <code>AppCompatDelegate</code> å»å¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAppCompatActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        LayoutInflater.from(<span class="hljs-built_in">this</span>).setFactory2(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LayoutInflater</span>.Factory2() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> View <span class="hljs-title function_">onCreateView</span><span class="hljs-params">(View parent, String name, Context context, AttributeSet attrs)</span> {
                <span class="hljs-comment">// 1. è‡ªå·±çš„é€»è¾‘ï¼šæ‹¦æˆªTextView</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"TextView"</span>.equals(name)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCustomTextView</span>(context, attrs);
                }
                <span class="hljs-comment">// 2. é‡è¦ï¼šå°†å…¶ä»–Viewçš„åˆ›å»ºä»£ç†ç»™AppCompat</span>
                <span class="hljs-type">AppCompatDelegate</span> <span class="hljs-variable">delegate</span> <span class="hljs-operator">=</span> getDelegate();
                <span class="hljs-type">View</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> delegate.createView(parent, name, context, attrs);
                <span class="hljs-keyword">if</span> (view != <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">return</span> view;
                }
                <span class="hljs-comment">// 3. å¦‚æœAppCompatä¹Ÿæ²¡å¤„ç†ï¼Œè¿”å›nullèµ°é»˜è®¤æµç¨‹</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-comment">// ... çœç•¥å¦ä¸€ä¸ª onCreateView æ–¹æ³•</span>
        });
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
}
</code></pre>
<h3 data-id="heading-2">âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹</h3>
<ul>
<li><strong>åªèƒ½è®¾ç½®ä¸€æ¬¡</strong>ï¼š<code>LayoutInflater</code> çš„ <code>setFactory</code> æˆ– <code>setFactory2</code> <strong>åªèƒ½æˆåŠŸè°ƒç”¨ä¸€æ¬¡</strong>ï¼Œé‡å¤è®¾ç½®ä¼šæŠ›å‡º <code>IllegalStateException</code>ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ <code>AppCompatActivity</code> ä¸­éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚</li>
<li><strong>æ—¶åºéå¸¸é‡è¦</strong>ï¼šè‡ªå®šä¹‰çš„ <code>Factory2</code> <strong>å¿…é¡»åœ¨ <code>super.onCreate(savedInstanceState)</code> ä¹‹å‰è®¾ç½®</strong>ï¼Œå¦åˆ™å¯èƒ½ä¼šå› ä¸º <code>AppCompatActivity</code> å·²æŠ¢å…ˆè®¾ç½®è€Œå¤±è´¥ã€‚</li>
<li><strong>ä¼˜å…ˆä½¿ç”¨ Factory2</strong>ï¼š<code>Factory2</code> ç»§æ‰¿è‡ª <code>Factory</code>ï¼Œå¹¶å¤šäº†ä¸€ä¸ª <code>parent</code> å‚æ•°ï¼Œèƒ½æä¾›æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚åœ¨ API 11+ çš„åº”ç”¨ä¸­åº”ä¼˜å…ˆä½¿ç”¨ <code>setFactory2</code>ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ³¨è§£]]></title>    <link>https://juejin.cn/post/7590403249561665551</link>    <guid>https://juejin.cn/post/7590403249561665551</guid>    <pubDate>2026-01-04T02:14:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590403249561665551" data-draft-id="7590403249561337871" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ³¨è§£"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-04T02:14:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XRay"/> <meta itemprop="url" content="https://juejin.cn/user/3966693685869288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ³¨è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693685869288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XRay
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:14:37.000Z" title="Sun Jan 04 2026 02:14:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä»€ä¹ˆæ˜¯æ³¨è§£</h3>
<p>java.lang.annotation.Annotation æ¥å£ä¸­æœ‰è¿™ä¹ˆä¸€å¥è¯ï¼Œç”¨æ¥æè¿°æ³¨è§£ã€‚</p>
<p>The common interface extended by all annotation types
æ‰€æœ‰çš„æ³¨è§£ç±»å‹éƒ½ç»§æ‰¿ Annotation</p>
<p>è¿™å¥è¯æœ‰ç‚¹æŠ½è±¡ï¼Œä½†å´è¯´å‡ºäº†æ³¨è§£çš„æœ¬è´¨ã€‚æˆ‘ä»¬çœ‹çœ‹ JDK å†…ç½®æ³¨è§£ @Override çš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Override {

}
</code></pre>
<p>å…¶å®æœ¬è´¨ä¸Šæ˜¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Override</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Annotation</span>{

}
</code></pre>
<p>æ²¡é”™ï¼Œæ³¨è§£çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªç»§æ‰¿äº† Annotation æ¥å£çš„æ¥å£ã€‚æœ‰å…³è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥å»åç¼–è¯‘ä»»æ„ä¸€ä¸ªæ³¨è§£ç±»çœ‹çœ‹ç»“æœã€‚</p>
<p>æ¯”å¦‚æ–°å»ºä¸€ä¸ª Teacher.java æ–‡ä»¶ç”¨äºè‡ªå®šä¹‰æ³¨è§£ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Target</span>({ElementType.TYPE,ElementType.FIELD})
<span class="hljs-variable">@Retention</span>(RetentionPolicy.SOURCE)
public <span class="hljs-variable">@interface</span> Teacher {
    <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">name</span>();
    <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">age</span>() <span class="hljs-selector-tag">default</span> <span class="hljs-number">20</span>; 
}
</code></pre>
<p>ç„¶åä½¿ç”¨ <code>javac Teacher.java</code> å‘½ä»¤ç”Ÿæˆ Teacher.class æ–‡ä»¶ï¼Œå†ä½¿ç”¨ <code>javap Teacher.class</code> åç¼–è¯‘åè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">Compiled from <span class="hljs-string">"Teacher.java"</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">com</span>.example.test.Teacher <span class="hljs-keyword">extends</span> <span class="hljs-title class_">java</span>.lang.annotation.Annotation {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> java.lang.String <span class="hljs-title function_">name</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">age</span><span class="hljs-params">()</span>;
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è‡ªå®šä¹‰æ³¨è§£ç¡®å®æ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª java.lang.annotation.Annotation æ¥å£çš„æ¥å£ã€‚</p>
<p><strong>å‡†ç¡®æ„ä¹‰ä¸Šæ¥è¯´ï¼Œæ³¨è§£åªä¸è¿‡æ˜¯ä»£ç é‡Œçš„ç‰¹æ®Šæ ‡è®°è€Œå·²</strong>ã€‚è¿™äº›æ ‡è®°å¯ä»¥åœ¨ç¼–è¯‘ã€ç±»åŠ è½½æˆ–è¿è¡Œæ—¶è¢«è¯»å–ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„å¤„ç†ã€‚é€šè¿‡ä½¿ç”¨æ³¨è§£ï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨ä¸æ”¹å˜åŸæœ‰é€»è¾‘çš„æƒ…å†µä¸‹ï¼Œåœ¨æºæ–‡ä»¶ä¸­åµŒå…¥ä¸€äº›è¡¥å……ä¿¡æ¯ã€‚ä»£ç åˆ†æå·¥å…·ã€å¼€å‘å·¥å…·å’Œéƒ¨ç½²å·¥å…·å¯ä»¥é€šè¿‡è¿™äº›è¡¥å……ä¿¡æ¯è¿›è¡ŒéªŒè¯ã€å¤„ç†æˆ–è€…éƒ¨ç½²ã€‚</p>
<h3 data-id="heading-1">å…ƒæ³¨è§£</h3>
<p>ä¸å£°æ˜ä¸€ä¸ªç±»ä¸åŒçš„æ˜¯ï¼Œæ³¨è§£çš„å£°æ˜ä½¿ç”¨ @interface å…³é”®å­—ï¼Œ@Override æ³¨è§£çš„å£°æ˜å¦‚ä¸‹:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Override {

}
</code></pre>
<p>å…¶ä¸­çš„ @Targetï¼Œ@Retention ä¸¤ä¸ªæ³¨è§£æ˜¯æˆ‘ä»¬æ‰€è°“çš„ã€å…ƒæ³¨è§£ã€ï¼Œã€å…ƒæ³¨è§£ã€æ˜¯ç”¨äºä¿®é¥°æ³¨è§£çš„æ³¨è§£ï¼Œé€šå¸¸ç”¨åœ¨æ³¨è§£çš„å®šä¹‰ä¸Šï¼Œã€å…ƒæ³¨è§£ã€ä¸€èˆ¬ç”¨äºæŒ‡å®šæŸä¸ªæ³¨è§£çš„ä¿ç•™ç­–ç•¥ä»¥åŠä½œç”¨ç›®æ ‡ç­‰ä¿¡æ¯ã€‚</p>
<p>Java ä¸­æœ‰ä»¥ä¸‹å‡ ä¸ªã€å…ƒæ³¨è§£ã€ï¼š</p>
<ul>
<li>@Targetï¼šæ³¨è§£çš„ä½œç”¨ç›®æ ‡</li>
<li>@Retentionï¼šæ³¨è§£çš„ä¿ç•™ç­–ç•¥</li>
<li>@Documentedï¼šæ³¨è§£æ˜¯å¦åº”å½“è¢«åŒ…å«åœ¨ JavaDoc æ–‡æ¡£ä¸­</li>
<li>@Inheritedï¼šæ˜¯å¦å…è®¸å­ç±»ç»§æ‰¿è¯¥æ³¨è§£</li>
</ul>
<p>å…¶ä¸­ï¼Œ@Target ç”¨äºæŒ‡æ˜è¢«ä¿®é¥°çš„æ³¨è§£æœ€ç»ˆå¯ä»¥ä½œç”¨çš„ç›®æ ‡æ˜¯è°ï¼Œä¹Ÿå°±æ˜¯æŒ‡æ˜ï¼Œä½ çš„æ³¨è§£åˆ°åº•æ˜¯ç”¨æ¥ä¿®é¥°æ–¹æ³•çš„ï¼Œä¿®é¥°ç±»çš„ï¼Œè¿˜æ˜¯ç”¨æ¥ä¿®é¥°å­—æ®µå±æ€§çš„ã€‚</p>
<p>@Targetå®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Documented</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Target({ElementType.ANNOTATION_TYPE})</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Target {
    ElementType[] value();
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥ä¸ºè¿™ä¸ª value ä¼ å€¼ï¼š</p>
<p>@Target(value = {ElementType.FIELD})</p>
<p>ä¸Šé¢è¿™æ®µä»£ç è¡¨ç¤ºè¯¥æ³¨è§£å°†åªèƒ½ä½œç”¨åœ¨æˆå‘˜å­—æ®µä¸Šï¼Œä¸èƒ½ç”¨äºä¿®é¥°æ–¹æ³•æˆ–è€…ç±»ã€‚å…¶ä¸­ï¼ŒElementType æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œæœ‰ä»¥ä¸‹ä¸€äº›å€¼ï¼š</p>
<ul>
<li>ElementType.TYPE å…è®¸è¢«ä¿®é¥°çš„æ³¨è§£ä½œç”¨åœ¨ç±»ã€æ¥å£å’Œæšä¸¾ä¸Š</li>
<li>ElementType.FIELD å…è®¸ä½œç”¨åœ¨æˆå‘˜å˜é‡ä¸Š</li>
<li>ElementType.METHODï¼šå…è®¸ä½œç”¨åœ¨æ–¹æ³•ä¸Š</li>
<li>ElementType.PARAMETERï¼šå…è®¸ä½œç”¨åœ¨æ–¹æ³•å‚æ•°ä¸Š</li>
<li>ElementType.CONSTRUCTORï¼šå…è®¸ä½œç”¨åœ¨æ„é€ æ–¹æ³•ä¸Š</li>
<li>ElementType.LOCAL_VARIABLEï¼šå…è®¸ä½œç”¨åœ¨æœ¬åœ°å±€éƒ¨å˜é‡ä¸Š</li>
<li>ElementType.ANNOTATION_TYPEï¼šå…è®¸ä½œç”¨åœ¨æ³¨è§£ä¸Š</li>
<li>ElementType.PACKAGEï¼šå…è®¸ä½œç”¨åœ¨åŒ…ä¸Š</li>
</ul>
<p>@Retention ç”¨äºæŒ‡æ˜å½“å‰æ³¨è§£çš„ä¿ç•™ç­–ç•¥ï¼Œå®ƒçš„åŸºæœ¬å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Documented</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Target({ElementType.ANNOTATION_TYPE})</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Retention {
    RetentionPolicy <span class="hljs-title function_">value</span><span class="hljs-params">()</span>;
}
</code></pre>
<p>åŒæ ·çš„ï¼Œå®ƒä¹Ÿæœ‰ä¸€ä¸ª value å±æ€§ï¼š</p>
<p>@Retention(value = RetentionPolicy.RUNTIMEï¼‰</p>
<p>è¿™é‡Œçš„ RetentionPolicy ä¾ç„¶æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œå®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªæšä¸¾å€¼å¯å–ï¼š</p>
<ul>
<li><strong>RetentionPolicy.SOURCEï¼šæºç çº§æ³¨è§£ã€‚æ³¨è§£ä¿¡æ¯åªä¼šä¿ç•™åœ¨ .java æºç ä¸­ï¼Œæºç åœ¨ç¼–è¯‘åï¼Œæ³¨è§£ä¿¡æ¯è¢«ä¸¢å¼ƒï¼Œä¸ä¼šä¿ç•™åœ¨ .class ä¸­</strong>ã€‚</li>
<li><strong>RetentionPolicy.CLASSï¼šç¼–è¯‘æ—¶æ³¨è§£ã€‚æ³¨è§£ä¿¡æ¯ä¼šä¿ç•™åœ¨ .java æºç ä»¥åŠ .class ä¸­ã€‚å½“è¿è¡Œ Java ç¨‹åºæ—¶ï¼Œ JVM ä¼šä¸¢å¼ƒè¯¥æ³¨è§£ä¿¡æ¯ï¼Œä¸ä¼šä¿ç•™åœ¨ JVM ä¸­</strong>ã€‚</li>
<li><strong>RetentionPolicy.RUNTIMEï¼šè¿è¡Œæ—¶æ³¨è§£ã€‚å½“è¿è¡Œ Java ç¨‹åºæ—¶ï¼Œ JVM ä¹Ÿä¼šä¿ç•™è¯¥æ³¨è§£ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡åå°„è·å–è¯¥æ³¨è§£ä¿¡æ¯</strong>ã€‚</li>
</ul>
<p>@Retention æ³¨è§£æŒ‡å®šäº†è¢«ä¿®é¥°çš„æ³¨è§£çš„ä¿ç•™ç­–ç•¥ï¼Œè¿™3ä¸ªç­–ç•¥çš„ç”Ÿå‘½å‘¨æœŸé•¿åº¦ä¸º SOURCE &lt; CLASS &lt; RUNTIME ã€‚ç”Ÿå‘½å‘¨æœŸçŸ­çš„èƒ½èµ·ä½œç”¨çš„åœ°æ–¹ï¼Œç”Ÿå‘½å‘¨æœŸé•¿çš„ä¹Ÿä¸€å®šèƒ½èµ·ä½œç”¨ã€‚å¦‚æœåªæ˜¯åšä¸€äº›æ£€æŸ¥æ€§çš„æ“ä½œï¼Œæ¯”å¦‚ @Override å’Œ @SuppressWarning ï¼Œåˆ™å¯é€‰ç”¨ RetentionPolicy.SOURCE ã€‚å¦‚æœè¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œä¸€äº›é¢„å¤„ç†æ“ä½œï¼Œæ¯”å¦‚ç”Ÿæˆä¸€äº›è¾…åŠ©ä»£ç ï¼ˆARouter çš„ @Route æ³¨è§£å°±æ˜¯è¿™ç§æƒ…å†µï¼‰ï¼Œå°±ç”¨ RetentionPolicy.CLASS ã€‚å¦‚æœè¦åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–æ³¨è§£ä¿¡æ¯ï¼Œé‚£å°±åªèƒ½ç”¨ RetentionPolicy.RUNTIME ã€‚</p>
<p>å‰©ä¸‹ä¸¤ç§ç±»å‹çš„å…ƒæ³¨è§£æˆ‘ä»¬æ—¥å¸¸ç”¨çš„ä¸å¤šï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œä¸å†è¯¦ç»†ä»‹ç»äº†ï¼Œä½ åªéœ€è¦çŸ¥é“ä»–ä»¬å„è‡ªçš„ä½œç”¨å³å¯ã€‚@Documented æ³¨è§£ä¿®é¥°çš„æ³¨è§£ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ JavaDoc æ–‡æ¡£æ‰“åŒ…æ—¶ä¼šè¢«ä¿å­˜è¿› doc æ–‡æ¡£ï¼Œåä¹‹å°†åœ¨æ‰“åŒ…æ—¶ä¸¢å¼ƒã€‚@Inherited æ³¨è§£ä¿®é¥°çš„æ³¨è§£æ˜¯å…·æœ‰å¯ç»§æ‰¿æ€§çš„ï¼Œä¹Ÿå°±è¯´æˆ‘ä»¬çš„æ³¨è§£ä¿®é¥°äº†ä¸€ä¸ªç±»ï¼Œè€Œè¯¥ç±»çš„å­ç±»å°†è‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»çš„è¯¥æ³¨è§£ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Œé‡Œé¢æœ‰ 2 ä¸ªæˆå‘˜å˜é‡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target({ElementType.TYPE,ElementType.FIELD})</span> 
<span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Teacher {
    String <span class="hljs-title function_">name</span><span class="hljs-params">()</span>; <span class="hljs-comment">//æ— é»˜è®¤å€¼</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">age</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">20</span>; 
}
</code></pre>
<p>æ³¨è§£åªæœ‰æˆå‘˜å˜é‡ï¼Œæˆå‘˜å˜é‡åœ¨æ³¨è§£å®šä¹‰ä¸­ä»¥<strong>æ— å½¢å‚çš„æ–¹æ³•</strong>çš„å½¢å¼æ¥å£°æ˜ã€‚åœ¨ä½¿ç”¨æ³¨è§£æ—¶ï¼Œå¦‚æœå®šä¹‰çš„æ³¨è§£ä¸­çš„æˆå‘˜å˜é‡æ— é»˜è®¤å€¼ï¼Œåˆ™ä½¿ç”¨æ—¶å¿…é¡»ä¼ å€¼ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Teacher(name = "å°å¸…")</span> <span class="hljs-comment">// name æ— é»˜è®¤å€¼ï¼Œéœ€è¦ä¼ å€¼ï¼›age æœ‰é»˜è®¤å€¼ï¼Œå¯ä»¥çœç•¥</span>
<span class="hljs-meta">@Teacher(name = "å°å¸…", age = 22)</span> <span class="hljs-comment">// ä¹Ÿå¯ä»¥æ˜¾å¼èµ‹å€¼ </span>
</code></pre>
<h3 data-id="heading-2">æºç çº§æ³¨è§£çš„åº”ç”¨</h3>
<p>æºç çº§æ³¨è§£çš„æ³¨è§£ä¿¡æ¯åªä¼šä¿ç•™åœ¨ .java æºç ä¸­ï¼Œç¼–è¯‘åæ³¨è§£ä¿¡æ¯ä¼šè¢«ä¸¢å¼ƒï¼Œä¸ä¼šä¿ç•™åœ¨ .class ä¸­ã€‚ç¼–è¯‘å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Teacher(name = "å°å¸…", age = 22)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {
}
</code></pre>
<p>ç„¶åå» build\intermediates\javac\debug\classes\ ç›®å½•ä¸‹æ‰¾åˆ° Test.classï¼Œæ‰“å¼€å‘ç°å·²ç»æ‰¾ä¸åˆ°æ³¨è§£äº†ã€‚å¦‚æœå°†ä¿ç•™ç­–ç•¥æ”¹æˆ RetentionPolicy.CLASS ï¼Œåˆ™åœ¨ Test.class ä¸­è¿˜å¯ä»¥æ‰¾åˆ°æ³¨è§£:</p>
<pre><code class="hljs language-class" lang="class">@Teacher(
    name = "å°å¸…",
    age = 22
)
public class Test {
}
</code></pre>
<p>æºç çº§æ³¨è§£ä¸»è¦ç”¨æ¥åšä¸€äº›æ£€æŸ¥æ€§çš„å·¥ä½œï¼Œæ¯”å¦‚ï¼Œåœ¨ androidx.annotation ä¸­æœ‰æä¾› @IntDef æ³¨è§£ï¼Œæ­¤æ³¨è§£çš„å®šä¹‰å¦‚ä¸‹:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Retention(SOURCE)</span> 
<span class="hljs-meta">@Target({ANNOTATION_TYPE})</span> 
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> IntDef {
    <span class="hljs-type">int</span>[] value() <span class="hljs-keyword">default</span> {};
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">flag</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<p>æ­¤æ³¨è§£èƒ½å¤Ÿå–ä»£æšä¸¾ï¼Œå®ç°æ–¹æ³•å…¥å‚çš„é™åˆ¶ã€‚</p>
<blockquote>
<p>Java ä¸­çš„ enum ï¼ˆæšä¸¾ï¼‰å®è´¨æ˜¯ç‰¹æ®Šå•ä¾‹çš„é™æ€æˆå‘˜å˜é‡ï¼Œåœ¨è¿è¡ŒæœŸæ‰€æœ‰æšä¸¾ç±»ä½œä¸ºå•ä¾‹ï¼Œå…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œæ¯”å¸¸é‡å¤š 5 åˆ° 10 å€çš„å†…å­˜å ç”¨ã€‚</p>
</blockquote>
<p>æ¯”å¦‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª test() æ–¹æ³•ï¼Œæ¥æ”¶çš„å‚æ•° Student åªèƒ½åœ¨ Jim ã€ Lily ä¸¤ä½å­¦ç”Ÿä¸­é€‰ä¸€ä¸ªï¼Œå¦‚æœä½¿ç”¨æšä¸¾å®ç°ï¼Œä»£ç å¦‚ä¸‹:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {

    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Student</span>{
        Jim,
        Lily
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">(Student student)</span>{
    }
}
</code></pre>
<p>ä¸ºäº†ä¼˜åŒ–å†…å­˜ï¼Œæˆ‘ä»¬ç°åœ¨ä¸å†ä½¿ç”¨æšä¸¾ï¼Œæ”¹æˆå¦‚ä¸‹ä»£ç :</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">Jim</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">Lily</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">(<span class="hljs-type">int</span> student)</span>{

    }
}
</code></pre>
<p>è¿™ç§æ–¹å¼æœ‰ä»€ä¹ˆå¼Šç«¯å‘¢ï¼Ÿtest() æ–¹æ³•ç”±äºé‡‡ç”¨ int ç±»å‹ï¼Œå°†æ— æ³•é™å®šä¸º Jim å’Œ Lily ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨æ³¨è§£è¿›è¡Œä¼˜åŒ–:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Constants</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">Jim</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
    <span class="hljs-type">int</span> <span class="hljs-variable">Lily</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@IntDef(value = {Constants.Jim, Constants.Lily})</span>
<span class="hljs-meta">@Target(ElementType.PARAMETER)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Student {
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">(<span class="hljs-meta">@Student</span> <span class="hljs-type">int</span> student)</span>{

    }
}
</code></pre>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å†å»è°ƒç”¨ test() æ–¹æ³•ï¼Œå¦‚æœä¼ é€’çš„å‚æ•°ä¸æ˜¯ Constants.Jim æˆ– Constants.Lily ï¼ŒAndroid Studio ä¼šæŠ¥çº¢ã€‚</p>
<h3 data-id="heading-3">è¿è¡Œæ—¶æ³¨è§£çš„åº”ç”¨</h3>
<p>é’ˆå¯¹è¿è¡Œæ—¶æ³¨è§£ä¼šé‡‡ç”¨åå°„æœºåˆ¶è·å–æ³¨è§£ä¿¡æ¯ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªè¿è¡Œæ—¶æ³¨è§£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target({ElementType.METHOD})</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Teacher {
    String <span class="hljs-title function_">name</span><span class="hljs-params">()</span>; 
    <span class="hljs-type">int</span> <span class="hljs-title function_">age</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">20</span>;
}
</code></pre>
<p>æ¥ä¸‹æ¥åœ¨ AnnotationTest ç±»çš„æ–¹æ³•ä¸Šåº”ç”¨è¯¥æ³¨è§£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationTest</span> {

    <span class="hljs-meta">@Teacher(name = "è€ç‹")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMathTeacherName</span><span class="hljs-params">()</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    }

    <span class="hljs-meta">@Teacher(name = "è€åˆ˜")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEnglishTeacherName</span><span class="hljs-params">()</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    }
}
</code></pre>
<p>æœ€åå†™ä¸€ä¸ªç®€å•çš„æ³¨è§£å¤„ç†å™¨ï¼Œé€šè¿‡åå°„è·å–æ³¨è§£ä¸­çš„ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationProcessor</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Method[] methods = AnnotationTest.class.getDeclaredMethods();
        <span class="hljs-keyword">for</span>(Method m : methods){
            <span class="hljs-comment">// é€šè¿‡ getAnnotation() è·å–æŒ‡å®šç±»å‹çš„æ³¨è§£å¯¹è±¡</span>
            <span class="hljs-type">Teacher</span> <span class="hljs-variable">teacher</span> <span class="hljs-operator">=</span> m.getAnnotation(Teacher.class);
            System.out.println(teacher.name());
        }
    }
}
</code></pre>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<pre><code class="hljs language-java" lang="java">è€åˆ˜
è€ç‹
</code></pre>
<p>è¿™æ ·å°±æ‹¿åˆ°äº†æ³¨è§£ä¸­çš„æˆå‘˜å˜é‡çš„å€¼ï¼ŒRetrofit ä¸­çš„æ³¨è§£ä¹Ÿæ˜¯åŒæ ·çš„åŸç†ï¼Œé€šè¿‡åå°„æ‹¿åˆ°æ³¨è§£ä¸­çš„ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-4">ç¼–è¯‘æ—¶æ³¨è§£çš„åº”ç”¨</h3>
<p>å¤„ç†ç¼–è¯‘æ—¶æ³¨è§£ç›¸å¯¹ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œç¼–è¯‘æ—¶æ³¨è§£ä¸€èˆ¬ä¼šç»“åˆæ³¨è§£å¤„ç†å™¨ï¼ˆAPTï¼‰å¯¹æ³¨è§£è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œæ¨¡æ‹Ÿä¸€ä¸ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FJakeWharton%2Fbutterknife" target="_blank" title="https://github.com/JakeWharton/butterknife" ref="nofollow noopener noreferrer">ButterKnife</a> è‡ªåŠ¨ç»‘å®šå¸ƒå±€ id çš„ä¾‹å­è¿›è¡Œè¯´æ˜ã€‚</p>
<h5 data-id="heading-5">1. å®šä¹‰æ³¨è§£</h5>
<p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ª Java Library æ¥å­˜æ”¾æ³¨è§£ï¼ŒLibrary å‘½åä¸º annotations ã€‚æ¥ä¸‹æ¥å®šä¹‰æ³¨è§£ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.FIELD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.CLASS)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyBindView {
    <span class="hljs-comment">// value å€¼å¯¹åº”è¦ç»‘å®šçš„å¸ƒå±€ id</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">value</span><span class="hljs-params">()</span>;
}
</code></pre>
<p>æ³¨è§£å®šä¹‰å¥½äº†ï¼Œåœ¨ Activity ä¸­å°±å¯ä»¥ä½¿ç”¨äº†ã€‚åœ¨ app æ¨¡å—çš„ MainActivity ä¸­ä½¿ç”¨è¯¥æ³¨è§£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {

    <span class="hljs-meta">@MyBindView(R.id.tv_text)</span>
    TextView textView;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
}
</code></pre>
<p>é€šè¿‡æ³¨è§£çš„ value å€¼å°±å¯ä»¥æ‹¿åˆ°å¸ƒå±€ id ï¼Œä½†æ˜¯æ€ä¹ˆæŠŠ View å’Œ id ç»‘å®šèµ·æ¥å‘¢ï¼Ÿ</p>
<p>å¦‚æœ MyBindView æ˜¯ RetentionPolicy.RUNTIME ç±»å‹çš„ï¼Œå¯ä»¥é€šè¿‡è¿è¡Œæ—¶åå°„ç»‘å®š id:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bind</span><span class="hljs-params">(Activity activity)</span> {
    <span class="hljs-comment">// è·å–æˆå‘˜å˜é‡</span>
    <span class="hljs-keyword">for</span> (Field field : activity.getClass().getDeclaredFields()) {
        <span class="hljs-comment">// åˆ¤æ–­è¿™ä¸ªæˆå‘˜å˜é‡ä¸Šæ˜¯å¦æœ‰ @MyBindView æ³¨è§£</span>
        <span class="hljs-type">MyBindView</span> <span class="hljs-variable">myBindView</span> <span class="hljs-operator">=</span> field.getAnnotation(MyBindView.class);
        <span class="hljs-keyword">if</span> (myBindView != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// å°† activity ä¸­æˆå‘˜ field çš„å€¼èµ‹å€¼ä¸ºï¼šactivity.findViewById(myBindView.value())</span>
                field.set(activity, activity.findViewById(myBindView.value()));
            } <span class="hljs-keyword">catch</span> (IllegalAccessException e) {
                e.printStackTrace();
            }
        }
    }
}
</code></pre>
<p>ä½†æ˜¯ç°åœ¨æ³¨è§£ä¸æ˜¯ RetentionPolicy.RUNTIME ç±»å‹çš„ï¼Œå¹¶ä¸”æ¯æ¬¡è¿è¡Œçš„æ—¶å€™å»åå°„æ•ˆç‡æ¯”è¾ƒä½ï¼Œå› ä¸ºåå°„æ˜¯æ¯”è¾ƒè€—æ€§èƒ½çš„ï¼Œå½“ç„¶ä½ å¯ä»¥ç”¨ç¼“å­˜æ¥ä¼˜åŒ–ï¼Œè¿˜æœ‰ä¸€ç§æ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨ APT ç»“åˆ JavaPoet æ¥å®ç°ã€‚</p>
<h5 data-id="heading-6">2.ç¼–å†™æ³¨è§£å¤„ç†å™¨</h5>
<p>å†æ–°å»ºä¸€ä¸ª Java Library æ¥å­˜æ”¾æ³¨è§£å¤„ç†å™¨ï¼ŒLibrary å‘½åä¸º processorï¼Œæ¥ä¸‹æ¥ç¼–å†™æ³¨è§£å¤„ç†å™¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@AutoService(Processor.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractProcessor</span> {
    Filer filer;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ProcessingEnvironment processingEnvironment)</span> {
        <span class="hljs-built_in">super</span>.init(processingEnvironment);
        filer = processingEnvironment.getFiler();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">process</span><span class="hljs-params">(Set&lt;? extends TypeElement&gt; set, RoundEnvironment roundEnvironment)</span> {
        <span class="hljs-comment">// éå†æ‰€æœ‰çš„ç±»</span>
        <span class="hljs-keyword">for</span> (Element element : roundEnvironment.getRootElements()) {
            <span class="hljs-comment">// è·å–ç±»çš„åŒ…å</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">packageStr</span> <span class="hljs-operator">=</span> element.getEnclosingElement().toString();
            <span class="hljs-comment">// è·å–ç±»çš„åå­—</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">classStr</span> <span class="hljs-operator">=</span> element.getSimpleName().toString();
            <span class="hljs-comment">// éœ€è¦æ„å»ºçš„æ–°ç±»åï¼šåŸç±»å + Binding</span>
            <span class="hljs-type">ClassName</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> ClassName.get(packageStr, classStr + <span class="hljs-string">"Binding"</span>);
            <span class="hljs-comment">// æ„å»ºæ–°çš„ç±»çš„æ„é€ æ–¹æ³•</span>
            MethodSpec.<span class="hljs-type">Builder</span> <span class="hljs-variable">constructorBuilder</span> <span class="hljs-operator">=</span> MethodSpec.constructorBuilder()
                    .addModifiers(Modifier.PUBLIC)
                    .addParameter(ClassName.get(packageStr, classStr), <span class="hljs-string">"activity"</span>);

            <span class="hljs-type">boolean</span> <span class="hljs-variable">hasBuild</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
            <span class="hljs-comment">// è·å–ç±»é‡Œé¢çš„å…ƒç´ ï¼Œæ¯”å¦‚ç±»çš„æˆå‘˜å˜é‡ã€æ–¹æ³•ã€å†…éƒ¨ç±»ç­‰</span>
            <span class="hljs-keyword">for</span> (Element enclosedElement : element.getEnclosedElements()) {
                <span class="hljs-comment">// è·å–æˆå‘˜å˜é‡</span>
                <span class="hljs-keyword">if</span> (enclosedElement.getKind() == ElementKind.FIELD) {
                    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦è¢« @MyBindView æ³¨è§£</span>
                    <span class="hljs-type">MyBindView</span> <span class="hljs-variable">bindView</span> <span class="hljs-operator">=</span> enclosedElement.getAnnotation(MyBindView.class);
                    <span class="hljs-keyword">if</span> (bindView != <span class="hljs-literal">null</span>) {
                        <span class="hljs-comment">// éœ€è¦ç”Ÿæˆç±»</span>
                        hasBuild = <span class="hljs-literal">true</span>;
                        <span class="hljs-comment">// åœ¨æ„é€ æ–¹æ³•ä¸­åŠ å…¥ä»£ç </span>
                        constructorBuilder.addStatement(<span class="hljs-string">"activity.$N = activity.findViewById($L)"</span>,
                                enclosedElement.getSimpleName(), bindView.value());
                    }
                }
            }
            <span class="hljs-comment">// åˆ¤æ–­éœ€è¦ç”Ÿæˆ</span>
            <span class="hljs-keyword">if</span> (hasBuild) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// æ„å»ºæ–°çš„ç±»</span>
                    <span class="hljs-type">TypeSpec</span> <span class="hljs-variable">builtClass</span> <span class="hljs-operator">=</span> TypeSpec.classBuilder(className)
                            .addModifiers(Modifier.PUBLIC)
                            .addMethod(constructorBuilder.build())
                            .build();
                    <span class="hljs-comment">// ç”Ÿæˆ Java æ–‡ä»¶</span>
                    JavaFile.builder(packageStr, builtClass)
                            .build().writeTo(filer);
                } <span class="hljs-keyword">catch</span> (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }


    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Set&lt;String&gt; <span class="hljs-title function_">getSupportedAnnotationTypes</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// åªæ”¯æŒ @MyBindView æ³¨è§£</span>
        <span class="hljs-keyword">return</span> Collections.singleton(MyBindView.class.getCanonicalName());
    }

}
</code></pre>
<p>åœ¨å…¶ build.gradle ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-c" lang="c">dependencies {
    implementation <span class="hljs-title function_">project</span><span class="hljs-params">(<span class="hljs-string">":annotations"</span>)</span>
    <span class="hljs-comment">// AutoService æ˜¯Googleæä¾›çš„</span>
    annotationProcessor 'com.google.<span class="hljs-keyword">auto</span>.service:<span class="hljs-keyword">auto</span>-service:1.0-rc7'
    compileOnly 'com.google.<span class="hljs-keyword">auto</span>.service:<span class="hljs-keyword">auto</span>-service:1.0-rc7'
    <span class="hljs-comment">// javapoet æ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆæ¡†æ¶ï¼Œåˆ©ç”¨å®ƒå¯ä»¥ä¼˜é›…çš„ç”Ÿæˆæˆ‘ä»¬æƒ³è¦çš„ä»£ç </span>
    implementation 'com.squareup:javapoet:1.10.0'
}
</code></pre>
<p>å…¶ä¸­ AutoService æ˜¯ Google æä¾›çš„ï¼Œç”¨æ¥å¸®åŠ©ç”Ÿæˆ javax.annotation.processing.Processor æ–‡ä»¶çš„ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨å®ƒï¼Œä½ å°±éœ€è¦è‡ªå·±å» resources ä¸­æ·»åŠ è¯¥æ–‡ä»¶ã€‚</p>
<p>æ³¨è§£å¤„ç†å™¨é‡Œé¢çš„å‡ ä¸ªæ–¹æ³•è§£é‡Šä¸€ä¸‹ï¼š</p>
<ol>
<li>init: ä¼šè¢«æ³¨è§£å¤„ç†å·¥å…·è°ƒç”¨ï¼Œå…¥å‚ä¸º ProcessingEnvironmentï¼ŒProcessingEnvironment æä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„å·¥å…·ç±»ï¼Œæ¯”å¦‚ Elementsã€Typesã€Filter å’Œ Messager ç­‰ã€‚</li>
<li>processï¼šä½ è¦åœ¨è¿™é‡Œå¯¹æ³¨è§£è¿›è¡Œå¤„ç†ã€‚</li>
<li>getSupportedAnnotationTypesï¼šæŒ‡å®šè¿™ä¸ªæ³¨è§£å¤„ç†å™¨æ”¯æŒçš„æ³¨è§£ç±»å‹ã€‚</li>
</ol>
<p>process() æ–¹æ³•ä¸­çš„ä»£ç ä¼šæŸ¥æ‰¾æˆå‘˜å˜é‡ä¸Šæœ‰ @MyBindView æ³¨è§£çš„ç±»ï¼Œç”Ÿæˆä»£ç ï¼Œç±»åä¸ºï¼šåŸç±»å + Bindingï¼Œå¹¶é€šè¿‡ findViewById æ¥ç»‘å®š View å’Œ id ã€‚ä»£ç æ˜¯é€šè¿‡ <code>com.squareup:javapoet:1.10.0</code> è¿™ä¸ªæ¡†æ¶æ¥ç”Ÿæˆçš„ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ¡†æ¶ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼æ¥ç”Ÿæˆä»£ç ï¼Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgreenrobot%2FEventBus" target="_blank" title="https://github.com/greenrobot/EventBus" ref="nofollow noopener noreferrer">EventBus</a> å°±ä½¿ç”¨äº†å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼:</p>
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3ce33f7c0464b3cb4f4e18cab987773~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=949&amp;h=969&amp;s=122587&amp;e=png&amp;b=fffefe" alt="image.png" width="70%" loading="lazy"/>
<p>ç»™ app æ¨¡å—çš„build.gradleæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-css" lang="css">dependencies {
    implementation project(path: <span class="hljs-string">':annotations'</span>)
    annotationProcessor <span class="hljs-built_in">project</span>(<span class="hljs-string">':processor'</span>)
}
</code></pre>
<p>ç„¶ååœ¨Terminalä¸­è¾“å…¥ï¼š<code>./gradlew :app:compileDebugJavaWithJavac</code>ï¼Œå°±ä¼šåœ¨ app æ¨¡å—ä¸‹ç”ŸæˆMainActivityBind.javaæ–‡ä»¶ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d853945ba8ef453bab12e04d0d1f9ec2~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=403&amp;h=171&amp;s=7955&amp;e=png&amp;b=4f4b41" alt="image.png" loading="lazy"/></p>
<p>æ‰“å¼€ MainActivityBind.javaï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivityBinding</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MainActivityBinding</span><span class="hljs-params">(MainActivity activity)</span> {
        activity.textView = activity.findViewById(<span class="hljs-number">2131231011</span>);
    }
}
</code></pre>
<p>æ­¤æ—¶åªæ˜¯ç”Ÿæˆäº†æˆ‘ä»¬æƒ³è¦çš„ä»£ç ï¼Œè¿˜éœ€è¦è°ƒç”¨ MainActivityBinding çš„æ„é€ å‡½æ•°ã€‚</p>
<h5 data-id="heading-7">3.åº”ç”¨æ³¨è§£</h5>
<p>å†æ–°å»ºä¸€ä¸ª Android Libraryï¼ŒLibrary å‘½åä¸º reflectï¼Œåœ¨ build.gradle ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-css" lang="css">dependencies {
    api project(path: <span class="hljs-string">':annotations'</span>)
}
</code></pre>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyButterKnife</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bind</span><span class="hljs-params">(Activity activity)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è·å–"å½“å‰çš„ activity ç±»å + Binding "çš„ class å¯¹è±¡</span>
            <span class="hljs-type">Class</span> <span class="hljs-variable">bindingClass</span> <span class="hljs-operator">=</span> Class.forName(activity.getClass().getCanonicalName() + <span class="hljs-string">"Binding"</span>);
            <span class="hljs-comment">// è·å– class å¯¹è±¡çš„æ„é€ æ–¹æ³•ï¼Œè¯¥æ„é€ æ–¹æ³•çš„å‚æ•°ä¸ºå½“å‰çš„ activity å¯¹è±¡</span>
            <span class="hljs-type">Constructor</span> <span class="hljs-variable">constructor</span> <span class="hljs-operator">=</span> bindingClass.getDeclaredConstructor(activity.getClass());
            <span class="hljs-comment">// åˆ›å»ºå®ä¾‹</span>
            constructor.newInstance(activity);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<p>æœ€ååœ¨ app æ¨¡å—çš„ MainActivity ä¸­è°ƒç”¨ MyButterKnife çš„ bind() æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {
    <span class="hljs-meta">@MyBindView(R.id.tv_text)</span>
    TextView textView;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        MyButterKnife.bind(<span class="hljs-built_in">this</span>);
        textView.setText(<span class="hljs-string">"Hello APT!!!!"</span>);
    }
}
</code></pre>
<p>å…¶ä¸­ app æ¨¡å—çš„ build.gradle é…ç½®éœ€è¦ä¿®æ”¹æˆå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-css" lang="css">dependencies {
    implementation project(path: <span class="hljs-string">':reflect'</span>)
    annotationProcessor <span class="hljs-built_in">project</span>(<span class="hljs-string">':processor'</span>)
}
</code></pre>
<p>è¿è¡Œ MainActivity ï¼Œé€šè¿‡ MyButterKnife çš„ bind() æ–¹æ³•å°±å®ç°äº†è‡ªåŠ¨ç»‘å®šå¸ƒå±€ id çš„åŠŸèƒ½ã€‚å¯ä»¥åˆ†æä¸€ä¸‹ ARouter æ¡†æ¶ï¼Œä¹Ÿæ˜¯ç±»ä¼¼çš„åŸç†ã€‚</p>
<p>Demoåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FEnzoXRay%2FAnnotationTest" target="_blank" title="https://github.com/EnzoXRay/AnnotationTest" ref="nofollow noopener noreferrer">github.com/EnzoXRay/Anâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AndroidæŠ“å–traceçš„å‡ ç§æ–¹å¼]]></title>    <link>https://juejin.cn/post/7590684822726459432</link>    <guid>https://juejin.cn/post/7590684822726459432</guid>    <pubDate>2026-01-04T02:24:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590684822726459432" data-draft-id="7587997893987090459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AndroidæŠ“å–traceçš„å‡ ç§æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-04T02:24:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é™ˆæ³¡æ³¡_"/> <meta itemprop="url" content="https://juejin.cn/user/2735240662223358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AndroidæŠ“å–traceçš„å‡ ç§æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240662223358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é™ˆæ³¡æ³¡_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:24:31.000Z" title="Sun Jan 04 2026 02:24:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸€èˆ¬åœ¨åšæ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œæˆ‘ä»¬å–œæ¬¢ç”¨æŠ“å–ç«ç„°å›¾çš„æ–¹å¼ï¼Œæ¥åˆ†æç›¸å…³traceè°ƒç”¨ï¼Œå‘ç°å¯¹åº”çš„æ€§èƒ½é—®é¢˜ï¼›æœ€è¿‘åœ¨åšå¯åŠ¨ä¼˜åŒ–ï¼Œä¹Ÿå°è¯•äº†å‡ ç§ä¸åŒçš„æ–¹å¼ï¼Œé‚è®°å½•ä¸‹æ¥</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€å‡ ç§æŠ“å–ç«ç„°å›¾çš„æ–¹å¼</h2>
<blockquote>
<p>Googleå¯¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fprofile%2Fchart-glossary%2Fflame-chart%3Fhl%3Dzh-cn" target="_blank" title="https://developer.android.com/studio/profile/chart-glossary/flame-chart?hl=zh-cn" ref="nofollow noopener noreferrer">ç«ç„°å›¾</a>çš„ä»‹ç»</p>
</blockquote>
<h4 data-id="heading-1">1.ä½¿ç”¨ASçš„Profiler</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fprofile" target="_blank" title="https://developer.android.com/studio/profile" ref="nofollow noopener noreferrer">developer.android.com/studio/profâ€¦</a></p>
<ul>
<li>2024.1.2ç‰ˆæœ¬ä¹‹å‰çš„æŠ“å–ç•Œé¢ï¼Œåœ¨è¿™ä¸ªç‰ˆæœ¬æŠ“å–æ—¶é—´ä¸€é•¿å°±ä¼šå¡æ­»ï¼Œè€Œä¸”æ²¡åŠæ³•æŠ“å–å¯åŠ¨é˜¶æ®µçš„ç«ç„°å›¾ï¼Œç•Œé¢ä¹Ÿä¸æ˜¯å¾ˆç›´è§‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1074b6788b0f4167a04662bbb0411d91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmI5rOh5rOhXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768098271&amp;x-signature=1%2BaFRKIG40XeyMhG1VDhXGyEErs%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Freleases%2Fpast-releases%2Fas-koala-feature-drop-release-notes%23task-based-profiler" target="_blank" title="https://developer.android.com/studio/releases/past-releases/as-koala-feature-drop-release-notes#task-based-profiler" ref="nofollow noopener noreferrer">æ–°ç‰ˆæœ¬</a>æ”¹è¿›äº† Android Studio Profiler çš„æ€§èƒ½ï¼ŒProfilerä¹Ÿæ ¹æ®CPUã€å†…å­˜å’ŒåŠŸè€—è¿™ç§ä»»åŠ¡ä¸ºä¸­å¿ƒè¿›è¡Œäº†é‡æ–°è®¾è®¡ï¼Œä¹Ÿå¯ä»¥åœ¨æ‰“å¼€ Profiler åç«‹å³ä»ç”¨æˆ·ç•Œé¢å¯åŠ¨ç³»ç»Ÿè·Ÿè¸ªä»»åŠ¡ï¼Œä»¥åˆ†æå¹¶æ”¹è¿›åº”ç”¨ç¨‹åºçš„å¯åŠ¨æ—¶é—´ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b264b1868194d31a4a458f1350c8fbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmI5rOh5rOhXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768098271&amp;x-signature=zUJUmNXr0J6%2BBivH04e0Z%2FM%2FP4I%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>æ•´ä½“æ“ä½œæ¯”è¾ƒç®€å•ï¼Œå…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fprofile%2Fcapture-heap-dump" target="_blank" title="https://developer.android.com/studio/profile/capture-heap-dump" ref="nofollow noopener noreferrer">developer.android.com/studio/profâ€¦</a></li>
</ul>
<h4 data-id="heading-2">2.ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fui.perfetto.dev%2F" target="_blank" title="https://ui.perfetto.dev/" ref="nofollow noopener noreferrer">perfetto</a>æ¥æŠ“å–</h4>
<p>å¿«é€Ÿå¼€å§‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fquickstart%2Fandroid-tracing" target="_blank" title="https://perfetto.dev/docs/quickstart/android-tracing" ref="nofollow noopener noreferrer">perfetto.dev/docs/quicksâ€¦</a></p>
<ul>
<li>æŠ“å–åˆ°çš„ç«ç„°å›¾ç±»ä¼¼ä¸‹é¢è¿™ç§ï¼Œæ²¡æœ‰å †æ ˆï¼ŒåŸå› æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ‰‹åŠ¨åŠ trace</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/400d9ae44c29469fac9b15e0e7b42f2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmI5rOh5rOhXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768098271&amp;x-signature=KNA1IBv3BsJ0Y%2BWPhWsVuNFGkH0%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>å¦‚æœæç¤ºadbè¿æ¥å¤±è´¥ï¼Œå¯ä»¥æŠŠAndroid Studioå…³é—­ï¼Œæˆ–è€…é‡æ–°æ’æ‹”usb</li>
<li>ç½‘é¡µçš„settingå¤§å®¶æ ¹æ®è‡ªå·±æƒ³æ‰‹æœºçš„æ•°æ®é€‰æ‹©æ€§å¼€å¯å³å¯ï¼Œä½†ä¸€å®šè¦è®°å¾—å¼€å¯Perfetto SDK -&gt; Tracek Event
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/909d5f676ddb4166b6cc1737fe390dfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmI5rOh5rOhXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768098271&amp;x-signature=ET9q%2BI0A6VEXp%2FldSf3jNtB3Si4%3D" alt="" loading="lazy"/></li>
<li>æœ‰äº›è®¾å¤‡çœ‹ä¸åˆ°å¯¹åº”çš„traceä¿¡æ¯éœ€è¦åœ¨è®¾ç½®ä¸­å¼€å¯è½¨è¿¹å½•åˆ¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fzhangphil%2Farticle%2Fdetails%2F145935055" target="_blank" title="https://blog.csdn.net/zhangphil/article/details/145935055" ref="nofollow noopener noreferrer">blog.csdn.net/zhangphil/aâ€¦</a></li>
</ul>
<h2 data-id="heading-3">äºŒã€å¦‚ä½•è‡ªå®šä¹‰æŠ“å–trace</h2>
<h4 data-id="heading-4">1.btrace</h4>
<p>å­—èŠ‚å¼€æºçš„é«˜æ€§èƒ½æŠ“å–traceæ–¹æ¡ˆï¼Œç›®å‰3.0ç‰ˆæœ¬é‡‡ç”¨åŒæ­¥æŠ“æ ˆå’ŒåŠ¨æ€æ’æ¡©çš„æ–¹æ¡ˆï¼Œæ•´ä½“æŠ“å–çš„ç²’åº¦å’Œå‡†ç¡®åº¦éƒ½æ˜¯ä¸šå†…è¾ƒé«˜æ°´å¹³ï¼Œä½†æ˜¯ç›®å‰è¿˜ä¸æ”¯æŒå¤šè¿›ç¨‹ï¼Œå…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbytedance%2Fbtrace%3Ftab%3Dreadme-ov-file" target="_blank" title="https://github.com/bytedance/btrace?tab=readme-ov-file" ref="nofollow noopener noreferrer">github.com/bytedance/bâ€¦</a></p>
<h4 data-id="heading-5">2.æ’æ¡©</h4>
<p>ä¸€èˆ¬æ­£å¸¸çš„åœºæ™¯btraceå°±èƒ½æ»¡è¶³è¯‰æ±‚ï¼Œä½†æ˜¯å¦‚æœæœ‰å¤šè¿›ç¨‹çš„è¯‰æ±‚æˆ–è€…ç¼–è¯‘å†²çªç­‰æ›´è‡ªå®šä¹‰çš„è¯‰æ±‚ï¼Œå°±éœ€è¦è‡ªå·±æ·»åŠ traceï¼›è¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ°æ’æ¡©çš„æ–¹æ¡ˆ</p>
<ul>
<li>ç®€å•çš„traceæŠ“å–å¯ä»¥åˆ©ç”¨åŸç”Ÿçš„èƒ½åŠ›</li>
</ul>
<p><code>Trace#beginSection(String)</code>Â å’ŒÂ <code>Trace.endSection()</code></p>
<h2 data-id="heading-6">ä¸‰ã€å¦‚ä½•åˆ†æ</h2>
<h4 data-id="heading-7">1.äººå·¥åˆ†æ</h4>
<p>å…¶å®äººå·¥åˆ†æå°±å…¨é ä¸ªäººç»éªŒï¼Œ</p>
<ul>
<li>
<p>å¯ä»¥å‚è€ƒé˜®ä¸€å³°çš„æ–‡ç« å…ˆèƒ½è¯»æ‡‚ç«ç„°å›¾<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2017%2F09%2Fflame-graph.html" target="_blank" title="https://www.ruanyifeng.com/blog/2017/09/flame-graph.html" ref="nofollow noopener noreferrer">www.ruanyifeng.com/blog/2017/0â€¦</a></p>
</li>
<li>
<p>é™¤äº†çœ‹å›¾ä¹‹å¤–ï¼Œæœ€ä¸»è¦çš„æ‰‹æ®µæ˜¯æ ¹æ®SQLå»æŸ¥è¯¢ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£
<a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fgetting-started%2Fandroid-trace-analysis" target="_blank" title="https://perfetto.dev/docs/getting-started/android-trace-analysis" ref="nofollow noopener noreferrer">perfetto.dev/docs/gettinâ€¦</a></p>
</li>
</ul>
<h4 data-id="heading-8">2.AIåˆ†æ</h4>
<p>ç›®å‰å¸‚é¢ä¸Šè¿˜æ²¡å‡ºç›¸å¯¹åº”çš„äº§å“ï¼Œä½†æ˜¯æ ¹æ®å‰é¢äººå·¥åˆ†æçš„æ­¥éª¤æ¥çœ‹ï¼ŒæŒ‰ç…§å¦‚ä¸‹æ€è·¯ä¸éš¾å®ç°ä¸€ä¸ªéå¸¸å¥½ç”¨çš„AIåˆ†æç«ç„°å›¾å·¥å…·ï¼š</p>
<ul>
<li>æ ¹æ®GUIåˆ†æå½“å‰ç«ç„°å›¾çš„å…¨å±€æƒ…å†µ(GPU/CPUç­‰)</li>
<li>ç»“åˆSQLè§£æçº¿ç¨‹çš„è€—æ—¶ã€binderçš„é€šä¿¡ç­‰</li>
<li>å†æ”¯æŒæŠŠä»£ç åº“/ç‰‡æ®µä½œä¸ºä¸Šä¸‹æ–‡çŸ¥è¯†åº“ä¼ å…¥</li>
<li>ç»“åˆåˆ†æç«ç„°å›¾çš„ç»éªŒï¼Œé€šè¿‡LLMåˆ†æå½“å‰çš„å¡é¡¿ã€è€—æ—¶å’Œä¼˜åŒ–æ–¹æ¡ˆ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŠªåŠ›æ²¡é”™ï¼Œä½†ä½ å¯èƒ½ä¸€ç›´åœ¨é”™è¯¯çš„å±‚çº§é‡Œç”¨åŠ›]]></title>    <link>https://juejin.cn/post/7590961898399170598</link>    <guid>https://juejin.cn/post/7590961898399170598</guid>    <pubDate>2026-01-04T03:28:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590961898399170598" data-draft-id="7591079707698757642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŠªåŠ›æ²¡é”™ï¼Œä½†ä½ å¯èƒ½ä¸€ç›´åœ¨é”™è¯¯çš„å±‚çº§é‡Œç”¨åŠ›"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-04T03:28:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸œä¸œæ‹¿é“"/> <meta itemprop="url" content="https://juejin.cn/user/3808364011728392"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŠªåŠ›æ²¡é”™ï¼Œä½†ä½ å¯èƒ½ä¸€ç›´åœ¨é”™è¯¯çš„å±‚çº§é‡Œç”¨åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808364011728392/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸œä¸œæ‹¿é“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:28:34.000Z" title="Sun Jan 04 2026 03:28:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>ä¹‹å‰åœ¨å­—èŠ‚çš„æ—¶å€™ï¼Œå·¥ä½œå‹åŠ›å¾ˆå¤§ï¼Œä¸ºäº†æ‹¿åˆ°å¥½ç»©æ•ˆï¼Œèƒ½æ™‹å‡ï¼Œæˆ‘ç†æ‰€å½“ç„¶çš„è®¤ä¸ºåªè¦è¸è¸å®å®å¹²å¥½é¢†å¯¼å®‰æ’çš„å·¥ä½œå°±è¡Œã€‚</p>
<p>äºæ˜¯éœ€æ±‚è¯„å®¡çš„æ—¶å€™ï¼Œå°½é‡å¤šæ¥å‡ ä¸ªéœ€æ±‚ï¼Œæƒ³è®©ä¸šåŠ¡æ–¹çš„éœ€æ±‚å°½å¿«ä¸Šçº¿ã€‚</p>
<p>ä¸šåŠ¡æ–¹åé¦ˆçš„é—®é¢˜ï¼Œæˆ‘ç¬¬ä¸€æ—¶é—´ä»‹å…¥å¤„ç†ï¼Œæƒ³ç”¨è‡ªå·±çš„ç»éªŒå‡å°‘é—®é¢˜è§£å†³çš„æ—¶é—´ã€‚</p>
<p>åŸ‹å¤´è‹¦å¹²ä¸€å¹´ï¼Œä½†å¹´åº•ç»©æ•ˆè¯„å®¡çš„æ—¶å€™ï¼Œå›å¤´çœ‹çœ‹ï¼Œå´å‘ç°è‡ªå·±ä¹Ÿæ²¡åšå‡ºä»€ä¹ˆæˆç»©ï¼Œä¹Ÿæœ‰åˆ«äººæ¯”æˆ‘å¹²çš„æ›´å¤šï¼Œæ‰€ä»¥å†…å¿ƒå……æ»¡å¿å¿‘ã€‚</p>
<p>é‚£æ—¶å€™æˆ‘è¿˜ä¸çŸ¥é“ï¼Œæˆ‘ç¼ºå°‘çš„ä¸æ˜¯åŠªåŠ›ï¼Œè€Œæ˜¯çœ‹é—®é¢˜çš„é«˜åº¦ã€‚</p>
<p>å°±åƒã€Šé•¿å®‰çš„è”æã€‹é‡Œï¼Œä¸€è·¯æŠ«æ˜Ÿæˆ´æœˆé•¿é€”å¥”è¢­ï¼Œç»ˆäºæˆåŠŸæŠŠæ–°é²œçš„è”ææŠ¤é€åˆ°é•¿å®‰ï¼Œå¯ä¸Šå±‚çš„äººåªæ˜¯æƒ³å€Ÿæ­¤åšç¾äººä¸€ç¬‘è€Œå·²ã€‚</p>
<p><strong>æƒ³è¦è·³å‡ºè¿™ä¸ªæœ‰äº›å¯æ‚²çš„å±€é¢ï¼Œæˆ‘ä»¬éœ€è¦è·ƒå±‚æ€ç»´ã€‚</strong></p>
<h2 data-id="heading-1">ç¬¬ä¸€å±‚ï¼šåœæ­¢åªç›¯ç€â€œä»»åŠ¡â€ï¼Œå¼€å§‹ç›¯â€œç³»ç»Ÿâ€</h2>
<p>è·ƒå±‚æ€ç»´çš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯è¦å‘ä¸Šä¸€å±‚çœ‹é—®é¢˜ã€‚</p>
<p>äº”å¹´å‰æˆ‘åœ¨ä¸€å®¶é‡‘èäº’è”ç½‘å…¬å¸å·¥ä½œã€‚å…¥èŒåæ¥åˆ°çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œæ˜¯æŠŠappçš„åŠŸèƒ½è¿ç§»åˆ°å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œæˆ‘æ–°å»ºäº†ä¸€ä¸ªæœåŠ¡ï¼Œå¼€å§‹åšèµ·äº†ä»£ç è¿ç§»å·¥ä½œã€‚</p>
<p>å› ä¸ºæ˜¯é‡‘èç›¸å…³ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå…³äºé£æ§çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œè€Œé‚£æ—¶å€™è¿™éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½å¹¶æ²¡æœ‰ç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œæ‰€ä»¥æˆ‘åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¹ŸæŠŠæ ¸å¿ƒçš„é£æ§åŠŸèƒ½éƒ½å®Œæˆäº†ä¸€æ¬¡è¿ç§»ã€‚</p>
<p>é‚£æ®µæ—¶é—´æˆ‘æ²¡æœ‰æ­£ç‚¹ä¸‹è¿‡ç­ï¼Œå¿™çš„æ˜å¤©é»‘åœ°ï¼Œæ€»ç®—æŠŠç³»ç»ŸæŒ‰æ—¶ä¸Šçº¿äº†ã€‚</p>
<p>è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œé¢†å¯¼è®¤ä¸ºé£æ§åŠŸéœ€è¦å•ç‹¬æ‹†åˆ†æˆå¾®æœåŠ¡ï¼Œä¸“é—¨è´Ÿè´£é£æ§æµç¨‹ï¼Œç›¸å½“äºåˆè¦åšä¸€æ¬¡ä»£ç è¿ç§»ï¼Œè¿™éƒ¨åˆ†å·¥ä½œå°±äº¤ç»™äº†å¦ä¸€ä¸ªåŒäº‹ã€‚</p>
<p>åˆ°äº†å¹´åº•ç»©æ•ˆè¯„å®¡ï¼Œæˆ‘çš„ç»©æ•ˆå¹³å¹³ï¼Œè€Œè´Ÿè´£é£æ§åŠŸèƒ½è¿ç§»çš„åŒäº‹ï¼Œé¢†å¯¼å´ç»™äº†ä»–å¥½çš„ç»©æ•ˆã€‚</p>
<p>æ˜æ˜éƒ½æ˜¯åšçš„ä»£ç è¿ç§»å·¥ä½œï¼Œä½†é¢†å¯¼å¯¹æ­¤ç¡®å®å®Œå…¨ä¸åŒçš„è¯„ä»·ï¼Œå½“æ—¶çš„æˆ‘å¿¿å¿¿ä¸å¹³ï¼Œå´æ ¹æœ¬ä¸çŸ¥é“é—®é¢˜å‡ºåœ¨å“ªé‡Œã€‚</p>
<p>ç°åœ¨çœ‹æ¥ï¼Œå°ç¨‹åºåªæ˜¯æ™®é€šçš„ä¸šåŠ¡é¡¹ç›®ï¼Œåœ¨é¢†å¯¼å±‚é¢çœ‹æ¥ï¼Œå®Œæˆå¯¹æ¥å°±å¥½ã€‚è€Œå¾®æœåŠ¡æ‹†åˆ†ï¼Œæ˜¯æ ¸å¿ƒæµç¨‹çš„å¾®æœåŠ¡æŠ€æœ¯é¡¹ç›®ï¼Œæ‰€ä»¥è‡ªç„¶æ›´å—åˆ°é¢†å¯¼é‡è§†ã€‚</p>
<p>åœ¨å½“æ—¶ï¼Œå¯¹äºæŠ€æœ¯å›¢é˜Ÿæ¥è¯´ï¼Œä¸€ä¸ªæ ¸å¿ƒçš„æŠ€æœ¯é¡¹ç›®ï¼Œæ¯”ä¸€ä¸ªä¸šåŠ¡é¡¹ç›®ï¼Œä»·å€¼è¦é«˜å¾—å¤šã€‚</p>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/></p>
<p>ä½ å¿…é¡»è·³å‡ºè¿™ä¸€å±‚ï¼Œä»æ›´é«˜çš„è§†è§’å¾€ä¸‹çœ‹ã€‚</p>
<p>å¯¹äºå·¥ä½œæ¥è¯´ï¼Œå…¶å®å¾ˆç®€å•ï¼Œé‚£å°±æ˜¯å°½é‡å¤šçš„å»äº†è§£ä½ çš„ç›´æ¥é¢†å¯¼ï¼Œä½ éœ€è¦äº†è§£ä¸€äº›ä¿¡æ¯ï¼š</p>
<p>ä»–çš„æ ¸å¿ƒé¢†å¯¼æ˜¯è°ï¼Ÿè¿™å†³å®šäº†ä»–çš„æ ¸å¿ƒè¯„ä»·æ ‡å‡†ã€‚</p>
<p>ä»–çš„ä¸šç»©é ä»€ä¹ˆè¡¡é‡ï¼Ÿæ˜¯é”€é‡ã€åˆ©æ¶¦è¿˜æ˜¯å®¢æˆ·æ»¡æ„åº¦ï¼Ÿè¿™å†³å®šäº†ä»–å…³å¿ƒä»€ä¹ˆæŒ‡æ ‡ã€‚</p>
<p>ä»–çš„é£é™©å’Œæ¿€åŠ±æ˜¯ä»€ä¹ˆï¼Ÿè¿™å†³å®šäº†ä»–çš„è¡ŒåŠ¨ä¼˜å…ˆçº§ã€‚</p>
<p>ä»–çš„å†³ç­–è¾¹ç•Œæ˜¯ä»€ä¹ˆï¼Ÿå“ªäº›äº‹æƒ…ä»–èƒ½åšä¸»ï¼Œå“ªäº›éœ€è¦è¯·ç¤ºé¢†å¯¼ã€‚è¿™å†³å®šä»–çš„å†³ç­–è‡ªç”±åº¦ã€‚</p>
<p>ä»–ç›®å‰é¢ä¸´çš„éš¾é¢˜æ˜¯ä»€ä¹ˆï¼Ÿè¿™å†³å®šäº†ä»–çŸ­æœŸå†…è¦åšä»€ä¹ˆäº‹æƒ…ã€‚</p>
<p>äº†è§£è¿™äº›ï¼Œ å¹¶ä¸æ˜¯è¦æ±‚ä½ ä»é¢†å¯¼çš„è§’åº¦å»è€ƒè™‘é—®é¢˜ï¼Œè€Œæ˜¯è®©ä½ é¿å…åšä¸€äº›æ— ç”¨åŠŸï¼Œç”šè‡³æ˜¯åœ¨ä¸€äº›é”™è¯¯çš„æ–¹å‘è¶Šèµ°è¶Šè¿œã€‚</p>
<p>ä½ å¯ä»¥æŒ‰è¿™äº›é—®é¢˜ï¼Œçœ‹çœ‹ä½ å¯¹ç›´æ¥é¢†å¯¼äº†è§£å¤šå°‘ï¼Œå¹¶ä¸æ˜¯è¦ä½ å»è¿åˆé¢†å¯¼ã€æ£æ‘©äººå¿ƒï¼Œè€Œæ˜¯ä¸ºäº†â€”â€”åˆ«æŠŠç”Ÿå‘½æµªè´¹åœ¨é”™è¯¯æ–¹å‘çš„åŠªåŠ›ä¸Šã€‚</p>
<p>å¯é¢†å¯¼ä¸æ˜¯ä¸‡èƒ½çš„ã€‚</p>
<h2 data-id="heading-2">ç¬¬äºŒå±‚ï¼šçœ‹æ¸…â€œè§„åˆ™èƒŒåçš„çœŸå®æ„å›¾â€</h2>
<p>æˆ‘æ‰€åœ¨çš„å…¬å¸æ­£åœ¨è½¬å‹ï¼Œè€ƒæ ¸æ ‡å‡†å‡ ä¹å¤„äºâ€œåŠ¨æ€åˆ·æ–°â€çŠ¶æ€ã€‚</p>
<p>è¿™ä¸ªæœˆæ˜¯å®¢æˆ·æ»¡æ„åº¦ï¼Œä¸‹ä¸ªæœˆæ˜¯éœ€æ±‚æ•°é‡ï¼Œå†å¾€åå¯èƒ½åˆå˜æˆç¼ºé™·ç‡æ§åˆ¶ã€‚</p>
<p>æ ‡å‡†å˜åŠ¨çš„å¦‚æ­¤é¢‘ç¹ï¼Œä¹ƒè‡³äºæœ‰æ—¶å€™å›¢é˜Ÿè´Ÿè´£äººåœ¨ç»™è‡ªå·±å›¢é˜Ÿå®£è´¯çš„æ—¶å€™ï¼Œéƒ½æ ¹æœ¬è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆåˆ¶å®šäº†è¿™ä¸ªè§„åˆ™ï¼Œåº”è¯¥æ€ä¹ˆåŠæ‰èƒ½å®Œæˆè¿™äº›ç›®æ ‡ã€‚</p>
<p>æˆ‘å‘ç°äº†ä¸¤ä¸ªæœ‰æ„æ€çš„æç«¯ç°è±¡ï¼Œæœ‰äººæŠŠä¸Šå±‚åˆ¶å®šçš„è§„åˆ™å½“æˆé‡‘ç§‘ç‰å¾‹ï¼Œç»å°½è„‘æ±çš„å»æƒ³å›¢é˜Ÿå†…çš„æ‰§è¡Œæ–¹æ¡ˆï¼Œå¸Œæœ›é€šè¿‡å®Œæˆä»»åŠ¡ï¼Œæ¥è·å¾—ã€‚æœ‰äººç«‹åˆ»å¼€å§‹åæ§½ç›®æ ‡å˜åŒ–å¿«ï¼Œè¿™ä¸ªè§„åˆ™è®¾è®¡çš„è¿™ä¹ˆä¸åˆç†ã€‚</p>
<p>é‚£ä¹ˆçœŸæ­£çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿå¹¶ä¸æ˜¯æˆ‘ä»¬è¯¥æ€ä¹ˆæ‰§è¡Œï¼Œè¿™è§„åˆ™åˆä¸åˆç†ã€‚</p>
<p>è€Œæ˜¯é¢†å¯¼ä¸ºä»€ä¹ˆè¦åˆ¶å®šè¿™å¥—è§„åˆ™ï¼Ÿè¿™å¥—è§„åˆ™æƒ³ä¿®è¡¥çš„ï¼Œæ˜¯ç³»ç»Ÿé‡Œçš„å“ªä¸€å—é£é™©æˆ–çŸ­æ¿ï¼Ÿå®ƒæ˜¯ä¸´æ—¶åº”æ€¥ï¼Œè¿˜æ˜¯ç»“æ„æ€§æ–¹å‘è°ƒæ•´ï¼Ÿ</p>
<p>æ¯”å¦‚è¯´åœ¨è½¬å‹æœŸï¼Œè€ƒæ ¸æŒ‡æ ‡é¢‘ç¹å˜åŒ–ï¼Œå…·ä½“è¦æ±‚æ¯ä¸ªæœˆéƒ½åœ¨å˜ã€‚æŠ“å®Œéœ€æ±‚äº¤ä»˜æŠ“æµç¨‹åˆè§„ï¼ŒæŠ“å®Œåˆè§„æŠ“AIåˆ›æ–°ã€‚å…¶å®ä¸æ˜¯å…¬å¸æƒ³æŠ˜è…¾å‘˜å·¥ï¼Œè€Œæ˜¯ç»„ç»‡æœ¬èº«ä¹Ÿåœ¨è¿·èŒ«ã€‚</p>
<p>å¾ˆå¤šæŒ‡æ ‡ä¸æ˜¯æˆ˜ç•¥ï¼Œè€Œæ˜¯ä¼ä¸šç„¦è™‘çš„å…·è±¡åŒ–ã€‚</p>
<p>å†è¯´ä¸ªä¾‹å­å§ï¼Œæˆ‘èº«è¾¹çš„å¤§éƒ¨åˆ†æœ‹å‹éƒ½å’Œæˆ‘ä¸€æ ·ï¼Œå·²ç»ç»“å©šã€ä¹°æˆ¿ã€ç”Ÿå­äº†ã€‚</p>
<p>æœ‰æ—¶å€™å¤§å®¶èŠèµ·å¤©æ¥ï¼Œäº’ç›¸åæ§½åæ§½ï¼Œæ€»ä¼šæœ‰äº›è®¸æ— å¥ˆï¼Œç»“æŸæ—¶æ€»ä¼šè¯´ï¼šæ²¡åŠæ³•ï¼Œåˆ°äº†è¿™ä¸ªå¹´çºªï¼Œå¾ˆå¤šäº‹æƒ…å°±å¾—æ‰¿æ‹…ã€‚</p>
<p>å¬èµ·æ¥å¾ˆæˆç†Ÿï¼Œå¾ˆè´Ÿè´£ä»»å¯¹å§ï¼Ÿä½†æˆ‘æœ€è¿‘æ„è¯†åˆ°ï¼Œå½“æˆ‘ä»¬è¯´å‡ºâ€œåˆ°äº†è¯¥â€¦â€¦çš„æ—¶å€™äº†â€è¿™å¥è¯æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å‘ç°â€”â€”</p>
<p>é‚£äº›çœ‹ä¼¼ç¨³å®šã€æ­£å¸¸çš„äººç”Ÿè½¨è¿¹ï¼Œå¾ˆå¤šæ—¶å€™å¹¶ä¸æ˜¯å› ä¸ºæˆ‘ä»¬çœŸçš„å‡†å¤‡å¥½äº†ï¼Œè€Œæ˜¯é‚£å¥—ç¤¾ä¼šé»˜è®¤çš„å‰§æœ¬åœ¨æ¨è¿›ã€‚</p>
<p>ç»“å©šã€ä¹°æˆ¿ã€ç”Ÿå­©å­ï¼Œæœ¬åº”æ˜¯æœ€ä¸ªä½“ã€æœ€ç§äººçš„é€‰æ‹©ï¼Œ</p>
<p>ä½†åœ¨ç°å®é‡Œï¼Œå¾€å¾€å˜æˆäº†â€œåˆ°äº†è¿™ä¸ªé˜¶æ®µä½ å°±è¯¥å®Œæˆçš„èŠ‚ç‚¹ä»»åŠ¡â€ã€‚</p>
<p>è€Œä¸”è¶Šæ˜¯äºŒä¸‰çº¿åŸå¸‚ï¼Œè¿™ç§ç”±â€œç¤¾ä¼šæœŸå¾…â€æ¨åŠ¨çš„äººç”ŸèŠ‚å¥ï¼Œè¡¨ç°å¾—è¶Šæ˜æ˜¾ã€‚</p>
<p>è·ƒå±‚æ€ç»´å¯ä»¥æé†’æˆ‘ä»¬çš„æ˜¯ï¼šä¸è¦åªç›¯ç€è§„åˆ™æœ¬èº«â€”â€”æ— è®ºæ˜¯èŒåœºè§„åˆ™ï¼Œè¿˜æ˜¯äººç”Ÿè§„åˆ™ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¯•ç€çœ‹æ¸…è§„åˆ™èƒŒåçš„çœŸå®åŠ¨æœºï¼š</p>
<p><strong>å®ƒçœŸçš„æ¥è‡ªä½ çš„é€‰æ‹©å—ï¼Ÿè¿˜æ˜¯æ¥è‡ªç»„ç»‡çš„ç„¦è™‘ã€ç¤¾ä¼šçš„è®¾å®šã€ä»–äººçš„æœŸå¾…ï¼Ÿ</strong></p>
<p>åªæœ‰çœ‹æ¸…è¿™ä¸€å±‚ï¼Œä½ æ‰ä¸æ˜¯è¢«è§„åˆ™æ¨ç€èµ°çš„äººï¼Œè€Œæ˜¯é‚£ä¸ªè‡³å°‘æœ‰æœºä¼šï¼Œåšä¸€ç‚¹â€œä¸»åŠ¨é€‰æ‹©â€çš„äººã€‚</p>
<h2 data-id="heading-3">ç¬¬ä¸‰å±‚ï¼šä¸è¦åªæ˜¯â€œåšâ€ï¼Œè¦å»â€œæ»¡è¶³çœŸæ­£çš„é‚£ä¸ªéœ€æ±‚â€</h2>
<p>å·¥ä½œå‰å‡ å¹´ï¼Œæˆ‘ä¹ æƒ¯æ€§åœ°æŠŠé¢†å¯¼å¸ƒç½®çš„ä»»åŠ¡ï¼Œå½“æˆâ€œç›®æ ‡æœ¬èº«â€ã€‚</p>
<p>æ¯”å¦‚åœ¨å…¬å¸é‡Œï¼Œé¢†å¯¼è¯´ï¼šâ€œè¿™ä¸ªç³»ç»Ÿä¸€å®šè¦æŒ‰æœŸä¸Šçº¿ã€‚â€</p>
<p>æˆ‘èµ·åˆç†è§£å¾ˆç®€å•æŒ‰æ—¶å¹²å®Œï¼Œéƒ¨ç½²ä¸Šå»ï¼Œåˆ«æ‰é“¾å­ï¼Œè¿™å°±ç®—å®Œæˆä»»åŠ¡å°±åƒå¼€å¤´æˆ‘è¯´åˆ°çš„ä»£ç è¿ç§»çš„å·¥ä½œã€‚</p>
<p>åæ¥æœ‰äº†ä¸€å®šå·¥ä½œç»éªŒï¼Œæˆ‘ä¼šè¯„ä¼°æŠ€æœ¯æ–¹æ¡ˆã€è¯„ä¼°å·¥ä½œé‡ã€‚è¯„ä¼°å®Œä¸€çœ‹æ—¶é—´æ ¹æœ¬ä¸å¤Ÿï¼Œç»™çš„æ—¶é—´æ ¹æœ¬å°±ä¸å¯èƒ½å®Œæˆï¼Œè§‰ç€é¢†å¯¼å¤–è¡ŒæŒ‡å¯¼å†…è¡Œã€‚</p>
<p>è·ƒå±‚æ€ç»´è¦æ±‚æˆ‘ä»¬å¤šé—®å‡ ä¸ªé—®é¢˜ï¼š</p>
<p>ä¸ºä»€ä¹ˆå¼ºè°ƒâ€œæŒ‰æœŸâ€ï¼Ÿä»–æ˜¯åœ¨æ‹…å¿ƒäº¤ä»˜èƒ½åŠ›å—ï¼Ÿè¿˜æ˜¯ä¸Šçº§å’Œä¸šåŠ¡æ–¹ç›¯å¾—ç´§ï¼Œå¯¼è‡´å‹åŠ›å¤§ï¼Ÿè¿™ä¸ªä¸Šçº¿å¯¹å…¬å¸æ¥è¯´ï¼Œç©¶ç«Ÿæ‰¿æ‹…ç€ä»€ä¹ˆæ„ä¹‰ï¼Ÿ</p>
<p>åæ¥æˆ‘æ…¢æ…¢å‘ç°ï¼Œå¾ˆå¤šè¦æ±‚çœŸæ­£å…³å¿ƒçš„ä¸æ˜¯â€œåŠŸèƒ½æ˜¯å¦ 100%å®Œç¾â€ï¼Œ</p>
<p>è€Œæ˜¯ï¼šè¿™æ˜¯ä¸æ˜¯ä¸€ä¸ªèƒ½è¢«å±•ç¤ºçš„æˆæœï¼Ÿå“ªæ€•åªæ˜¯ä¸€ä¸ªdemoä¹Ÿå¯ä»¥ï¼Œåªè¦èƒ½å¤Ÿç¼“å’Œä¸šåŠ¡å…³ç³»ï¼Œè¯æ˜å›¢é˜Ÿå…·å¤‡ç¨³å®šçš„äº¤ä»˜èƒ½åŠ›å°±å¤Ÿäº†ã€‚</p>
<p>äºæ˜¯â€œä¸Šçº¿â€ä¸å†åªæ˜¯ä¸Šçº¿ï¼Œ</p>
<p>è€Œå˜æˆäº†ä¸€ä»¶å¸®é¢†å¯¼è·å¾—ç¡®å®šæ€§çš„äº‹æƒ…ã€‚</p>
<p>ç±»ä¼¼çš„é€»è¾‘ï¼Œåœ¨ç”Ÿæ´»ä¸­æ¯”æ¯”çš†æ˜¯ã€‚</p>
<p>æˆ‘å¾ˆæ—©ä¹‹å‰å°±å¬è¯´è¿‡ï¼Œç¾å›½åæ ¡åœ¨å½•å–å­¦ç”Ÿæ—¶ï¼Œé™¤äº†å­¦ç”Ÿçš„æˆç»©å¤–ï¼Œè¿˜ä¼šè€ƒè™‘å­¦ç”Ÿçš„ç»¼åˆç´ è´¨ï¼Œæœ‰äº›é«˜ç«¯çˆ±å¥½ï¼Œè¿˜ä¼šåŠ åˆ†ã€‚</p>
<p>æœ‰ä¸€æœ¬ç¾å›½çš„ä¹¦å«ã€Šè°èƒ½è¿›ï¼šå¤§å­¦å½•å–ä¸€å¹´å†…å¹•ã€‹ï¼Œä¹¦ä¸­æåˆ°ï¼Œæœ‰ä¸ƒä¸ªå› ç´ æ˜¯ä¸å­¦ç”Ÿæœ¬äººç´ è´¨æ— å…³çš„ï¼Œ åˆ†åˆ«æ˜¯ï¼šç§æ—ã€æ€§åˆ«ã€ä¸“ä¸šã€åœ°åŸŸã€ç»æµèƒ½åŠ›ã€æ ¡å‹å­å¥³ã€å­¦æ ¡å‘˜å·¥å­å¥³ã€‚</p>
<p>å°¤å…¶æ˜¯ç§æ—ï¼Œåœ¨å½•å–æ—¶ä¸€å®šè¦ä¿è¯ä¸€å®šæ¯”ä¾‹æ¥è‡ªå¼±åŠ¿ç§æ—çš„å­¦ç”Ÿï¼Œæ¯”å¦‚é»‘äººå’Œæ‹‰ä¸è£”ã€‚</p>
<p>å¦‚æœä½ æƒ³å»ç”³è¯·ç¾å›½åæ ¡ï¼Œ æˆ–è€…æ˜¯æƒ³è®©ä½ çš„å­©å­ç”³è¯·ç¾å›½åæ ¡ï¼Œç”¨ä¸­å›½é«˜è€ƒæ€ç»´ï¼Œæ‹¼å‘½åˆ·åˆ†ã€‚åæ¥äº†è§£åˆ°ï¼Œç¾å›½å¸¸é’è—¤å¤§å­¦è¿˜å¾ˆæ³¨é‡ä½“è‚²ã€è‰ºæœ¯ä»€ä¹ˆçš„ç»¼åˆæ–¹å¼ï¼Œç„¶åç¡¬ç€å¤´çš®è‹¦ç»ƒä¸€é¡¹æ‰è‰ºã€‚</p>
<p>å¯å½“ä½ æœ‰äº†è·ƒå±‚æ€ç»´ï¼Œä»å½•å–è€…çš„è§’åº¦è€ƒè™‘ç§æ—æ¯”ä¾‹çš„éœ€æ±‚æ—¶ã€‚å°±å¾ˆå®¹æ˜“çœ‹å‡ºï¼Œæˆ‘ä»¬äº†è§£åˆ°çš„ä½“è‚²ã€è‰ºæœ¯è¿™äº›å½•å–æ¡ä»¶ï¼Œåªä¸è¿‡æ˜¯ä¸ºäº†ä¿è¯å½•å–ä¸€å®šæ¯”ä¾‹çš„ç²¾è‹±é˜¶çº§çš„å­¦ç”Ÿè€Œå·²ã€‚</p>
<p>ä½ åœ¨åˆ·â€œä¸ªäººèƒ½åŠ›â€ï¼Œé«˜æ ¡è®¾è®¡â€œå½•å–ç»“æ„â€ã€‚</p>
<h2 data-id="heading-4">å»ºç«‹è—è§†ç³»ç»Ÿçš„å‹‡æ°”</h2>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œè·ƒå±‚æ€ç»´æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œå…¶å®ä¸æ˜¯èªæ˜ã€ä¸æ˜¯åˆ†æèƒ½åŠ›ï¼Œè€Œæ˜¯â€”â€”</p>
<p>è¦æœ‰â€œè—è§†ç³»ç»Ÿâ€çš„å‹‡æ°”ã€‚</p>
<p>æœ€è¿‘æˆ‘ä»¬åœ¨æ¨è‡ªå·±ç ”å‘çš„AIç¼–ç å·¥å…·ï¼Œè¿™åº”è¯¥ä¹Ÿæ˜¯å¾ˆå¤šå…¬å¸éƒ½åœ¨åšçš„äº‹æƒ…ã€‚</p>
<p>æˆ‘ä»¬æœ€æ–°çš„è€ƒæ ¸æ˜¯è€ƒæ ¸ä½¿ç”¨è‡ªç ”å·¥å…·çš„AIä½¿ç”¨ç‡ï¼Œ å’Œéœ€æ±‚æœ€ç»ˆçš„ä»£ç é‡‡çº³ç‡ï¼Œå¦‚æœä¸è¾¾æ ‡å°±æœ‰ä¸€å®šçš„å¤„ç½šã€‚</p>
<p>ä¸ºäº†åº”å¯¹æŒ‡æ ‡ï¼Œæˆ‘çœ‹åˆ°ä¸å°‘åŒäº‹ï¼Œä¸€æ¡æ¡éœ€æ±‚å»ç¡®è®¤è‡ªå·±çš„ä»£ç é‡‡çº³ç‡åˆ°åº•æœ‰æ²¡æœ‰è¾¾æ ‡ã€‚</p>
<p>AIç¼–ç ä¸€å®šæ˜¯æœªæ¥çš„è¶‹åŠ¿ï¼Œæˆ‘ä¹Ÿæ˜ç™½å…¬å¸çš„åˆå¿ƒï¼Œæ˜¯æƒ³è®©å¤§å®¶å…»æˆç”¨AIç¼–ç çš„ä¹ æƒ¯ã€‚</p>
<p>åªè¦æˆ‘ä»¬ç¨å¾®è¿ç”¨ä¸€ä¸‹è·ƒå±‚æ€ç»´ï¼Œå°±ä¼šå‘ç°è§„åˆ™å’Œç°å®çš„é”™ä½ï¼š</p>
<p>AIç¼–ç ï¼Œæ˜¯ä¸ºäº†è®©ç ”å‘èŠ‚çœæ—¶é—´ï¼Œç»“æœç°åœ¨ï¼Œç ”å‘åè€Œè¦èŠ±é¢å¤–æ—¶é—´å»è¯æ˜â€œæˆ‘ç¡®å®åœ¨ç”¨ AIâ€ã€‚</p>
<p>ä¸ºäº†è¯æ˜æ•ˆç‡ï¼Œåè€Œåˆ¶é€ äº†æ–°çš„ä½æ•ˆã€‚</p>
<p>ç ”å‘çš„æ—¶é—´ï¼Œéš¾å€’ä¸åº”è¯¥å»æ¢ç´¢AIçš„å·¥å…·ä½¿ç”¨ï¼Œå»ä¼˜åŒ–è‡ªå·±çš„å·¥ä½œæµç¨‹ï¼Œä¼˜åŒ–äº§å“çš„ä¸è¶³å—ï¼Ÿ</p>
<p>æ‰€ä»¥åæ¥æˆ‘åšäº†ä¸€ä¸ªé€‰æ‹©ï¼šä¸å†èŠ±é¢å¤–æ—¶é—´å»æ ¸å¯¹é‚£äº›æ•°å­—ï¼Œè€Œæ˜¯æŠŠè¿™éƒ¨åˆ†æ—¶é—´ï¼Œå…¨éƒ¨äº¤è¿˜ç»™â€œçœŸæ­£çš„ä»·å€¼åˆ›é€ â€ã€‚</p>
<p>é‚£ä½ è¯´å¦‚æœæˆ‘çš„è€ƒæ ¸ä¸è¾¾æ ‡æ€ä¹ˆåŠï¼Ÿè¿™çš„ç¡®æ˜¯ä¸ªé—®é¢˜ã€‚</p>
<p>ä¸è¿‡æˆ‘æƒ³ï¼Œæˆ‘ä»¬çš„é€‰æ‹©ç»ˆä¼šå’Œä¸–ç•Œçš„è§„åˆ™å‘ç”Ÿå†²çªã€‚å¦‚æœä½ æŠŠåˆ«äººå®šçš„è§„åˆ™å½“æˆå¤©å‘½ï¼Œä½ å°±æ°¸è¿œåªèƒ½åœ¨ç°æœ‰çš„è§„åˆ™æ¡†æ¶ä¸‹å¥‹æ–—ã€‚</p>
<p>å¦‚æœä¸€ä¸ªäººçœŸçš„åœ¨æ·±åº¦ä½¿ç”¨ AIï¼Œå·²ç»èå…¥äº†å·¥ä½œèŠ‚å¥ï¼Œè®©æ•ˆç‡ã€è´¨é‡ã€åˆ›æ–°èƒ½åŠ›éƒ½æ˜æ˜¾æå‡ï¼Œé‚£ä¹ˆâ€”â€”</p>
<p>é‚£äº›ç³»ç»Ÿå…³æ³¨çš„â€œä½¿ç”¨æ¬¡æ•°â€â€œé‡‡çº³æ¯”ä¾‹â€çš„æ•°æ®ï¼Œå…¶å®å·²ç»æ²¡æœ‰é‚£ä¹ˆé‡è¦äº†ã€‚</p>
<p>æˆ‘å¹¶ä¸æ˜¯é¼“åŠ±åå›ï¼Œè€Œæ˜¯é¼“åŠ±æ¸…é†’ä¸é€‰æ‹©ã€‚å› ä¸ºæœ‰äº›è§„åˆ™å€¼å¾—éµå®ˆï¼Œæœ‰äº›å€¼å¾—ç†è§£ï¼Œæœ‰äº›åˆ™éœ€è¦è¶…è¶Šã€‚</p>
<p>è¿™æ˜¯ä¸œä¸œæ‹¿é“çš„ç¬¬95ç¯‡åŸåˆ›æ–‡ç« ï¼Œæ¬¢è¿å…³æ³¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 ç å†œæ¼«æ¸¸ï¼šAI è¾…åŠ© Swift ä»£ç ä¿®å¤æŒ‡å—]]></title>    <link>https://juejin.cn/post/7590283328177651755</link>    <guid>https://juejin.cn/post/7590283328177651755</guid>    <pubDate>2026-01-04T03:28:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590283328177651755" data-draft-id="7590712589296517126" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 ç å†œæ¼«æ¸¸ï¼šAI è¾…åŠ© Swift ä»£ç ä¿®å¤æŒ‡å—"/> <meta itemprop="keywords" content="ç¼–ç¨‹è¯­è¨€,Swift,Apple"/> <meta itemprop="datePublished" content="2026-01-04T03:28:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 ç å†œæ¼«æ¸¸ï¼šAI è¾…åŠ© Swift ä»£ç ä¿®å¤æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:28:10.000Z" title="Sun Jan 04 2026 03:28:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91494cb60e094fb0b8e43b0efbcd17f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=3D00v%2BxegiM09hGCe3srSOLnED0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">â˜”ï¸ å¼•å­</h2>
<p>è¿™æ˜¯ä¸€ä¸ªé›¨å¤œï¼Œéœ“è™¹ç¯çš„å…‰æ™•åœ¨è„å…®å…®çš„çª—ç»ç’ƒä¸Šæ™•å¼€ï¼Œåƒæäº†é‚£ä¸ªè¯¥æ­»çš„ <strong>View Hierarchy</strong> æ¸²æŸ“ä¸å‡ºé«˜æ–¯æ¨¡ç³Šçš„æ ·å­ã€‚</p>
<p>åœ¨æ–°ä¸Šæµ·çš„åœ°ä¸‹é¿éš¾æ‰€é‡Œï¼Œè€ç‹ï¼ˆOld Wangï¼‰åå‡ºä¸€å£åˆæˆçƒŸé›¾ï¼Œç›¯ç€å…¨æ¯å±å¹•ä¸Šä¸æ–­æŠ¥é”™çš„ç»ˆç«¯ã€‚ä½œä¸ºäººç±»åæŠ—å†›é‡Œä»…å­˜çš„å‡ ä½ã€Œ<strong>ç²¾é€š Apple è½¯ä»¶å¼€å‘</strong>ã€çš„å·¥ç¨‹å¸ˆä¹‹ä¸€ï¼Œä»–è´Ÿè´£ç»™ AI éœ¸ä¸»ã€Œæ™ºæ ¸ï¼ˆThe Coreï¼‰ã€ç”Ÿæˆçš„åƒåœ¾ä»£ç æ“¦å±è‚¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c923532a12a649b994fd54d1fcc2314d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=F60v8pwNHupvNHczW7e5z%2FoErbQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é—¨è¢«æ’å¼€äº†ï¼Œå¹´è½»çš„å¥³é»‘å®¢è‰äºšï¼ˆLiyaï¼‰æ°”å–˜åååœ°å†²è¿›æ¥ï¼Œæ‰‹é‡Œæ”¥ç€ä¸€å—å­˜æ»¡ä»£ç çš„ç¥ç»æ™¶ç‰‡ã€‚â€œè€ç‹ï¼æ•‘å‘½ï¼â€˜æ™ºæ ¸â€™ç”Ÿæˆçš„ SwiftUI ä»£ç åœ¨ iOS 26 ä¸Šåˆå´©äº†ï¼åæŠ—å†›çš„é€šè®¯ App æ ¹æœ¬è·‘ä¸èµ·æ¥ï¼â€</p>
<p>è€ç‹å†·ç¬‘ä¸€å£°ï¼Œæç­äº†çƒŸå¤´ã€‚â€œæˆ‘å°±çŸ¥é“ã€‚é‚£äº›è¢«æ§ä¸Šç¥å›çš„ LLMï¼ˆå¤§å‹è¯­è¨€æ¨¡å‹ï¼‰ï¼Œä¸ç®¡æ˜¯ Claudeã€Codex è¿˜æ˜¯ Geminiï¼Œå†™èµ· Python æ¥æ˜¯æŠŠå¥½æ‰‹ï¼Œä½†ä¸€ç¢°åˆ° Swiftï¼Œå°±åƒæ˜¯ç©¿ç€æºœå†°é‹èµ°é’¢ä¸â€”â€”<strong>æ­¥æ­¥æƒŠå¿ƒ</strong>ã€‚â€</p>
<p><strong>åœ¨æœ¬ç¯‡åšæ–‡ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</strong></p>
<ul>
<li>â˜”ï¸ å¼•å­
<ul>
<li>ğŸ¤– ä¸ºä»€ä¹ˆ AI æ€»æ˜¯åœ¨ Swift ä¸Šã€Œé¬¼æ‰“å¢™ã€ï¼Ÿ</li>
<li>ğŸ¨ 1. åˆ«å†ç”¨è¿‡æ—¶çš„è°ƒè‰²ç›˜äº†</li>
<li>ğŸ“ 2. åªæœ‰åˆ‡æ‰æ£±è§’ï¼Œæ‰èƒ½åœ†æ»‘å¤„ä¸–</li>
<li>ğŸ”„ 3. ç›‘æ§å˜åŒ–ï¼Œä¸è¦ç¼ºæ–¤å°‘ä¸¤</li>
<li>ğŸ“‘ 4. æ ‡ç­¾é¡µçš„ã€ŒæŒ‡é¹¿ä¸ºé©¬ã€</li>
<li>ğŸ‘† 5. åˆ«ä»€ä¹ˆéƒ½ç”¨ã€Œæˆ³ä¸€æˆ³ã€</li>
<li>ğŸ§  6. æ‰”æ‰æ—§æ—¶ä»£çš„è§‚å¯Ÿè€…</li>
<li>â˜ï¸ 7. æ•°æ®çš„é™·é˜±</li>
<li>ğŸ“‰ 8. æ€§èƒ½çš„éšå½¢æ€æ‰‹</li>
<li>ğŸ”  9. å­—ä½“æ’å°çš„æ³•è¥¿æ–¯</li>
<li>ğŸ”— 10. å¯¼èˆªçš„æ­»èƒ¡åŒ</li>
<li>ğŸ·ï¸ 11. æŒ‰é’®çš„è‡ªæˆ‘ä¿®å…»</li>
<li>ğŸ”¢ 12. æ•°ç»„çš„ç”»è›‡æ·»è¶³</li>
<li>ğŸ“‚ 13. å¯»æ‰¾æ–‡ä»¶çš„æ·å¾„</li>
<li>ğŸ§­ 14. å¯¼èˆªæ ˆçš„æ”¹æœæ¢ä»£</li>
<li>ğŸ’¤ 15. ç¡ä¸ªå¥½è§‰</li>
<li>ğŸ§® 16. æ ¼å¼åŒ–çš„è‰ºæœ¯</li>
<li>ğŸ—ï¸ 17. ä¸è¦æŠŠé¸¡è›‹æ”¾åœ¨ä¸€ä¸ªç¯®å­é‡Œ</li>
<li>ğŸ–¼ï¸ 18. æ¸²æŸ“çš„æ–°æ¬¢</li>
<li>ğŸ‹ï¸ 19. å­—é‡çš„è¿·æƒ‘è¡Œä¸º</li>
<li>ğŸš¦ 20. å¹¶å‘çš„ä¸‡é‡‘æ²¹ï¼ˆä¹Ÿæ˜¯æ¯’è¯ï¼‰</li>
<li>ğŸ­ 21. ä¸»è§’å…‰ç¯æ˜¯é»˜è®¤çš„</li>
<li>ğŸ“ 22. å‡ ä½•çš„è¯…å’’</li>
</ul>
</li>
<li>å°¾å£°ï¼šæ•°å­—å¹½çµçš„ä½è¯­</li>
</ul>
<p>ä»–æŠŠæ™¶ç‰‡æ’å…¥æ¥å£ï¼Œå…¨æ¯æŠ•å½±åœ¨ç©ºä¸­å±•å¼€ã€‚â€œåä¸‹ï¼Œè‰äºšã€‚ä»Šå¤©æˆ‘å°±ç»™ä½ ä¸Šä¸€è¯¾ï¼Œè®©ä½ çœ‹çœ‹æ‰€è°“çš„â€˜äººå·¥æ™ºèƒ½â€™æ˜¯å¦‚ä½•åœ¨ Swift çš„<strong>å¹¶å‘åœ°ç‹±</strong>å’Œ<strong>å¿«é€Ÿè¿­ä»£</strong>ä¸­ç¿»è½¦çš„ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0029fae5953f4517a41380b8e5548408~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=NKk%2F45n56LYdZN80tg3Lpp5xfSE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ¤– ä¸ºä»€ä¹ˆ AI æ€»æ˜¯åœ¨ Swift ä¸Šã€Œé¬¼æ‰“å¢™ã€ï¼Ÿ</h2>
<p>è€ç‹æŒ‡ç€å±å¹•ä¸Šä¹±æˆä¸€é”…ç²¥çš„ä»£ç è¯´é“ï¼šâ€œè¿™ä¸æ€ªå®ƒä»¬ã€‚Swift å’Œ SwiftUI çš„è¿›åŒ–é€Ÿåº¦æ¯”å˜å¼‚ç—…æ¯’è¿˜å¿«ã€‚å†åŠ ä¸Š Python å’Œ JavaScript çš„è®­ç»ƒæ•°æ®æµ©å¦‚çƒŸæµ·ï¼Œè€Œ Swift çš„é«˜è´¨é‡è¯­æ–™ç›¸å¯¹è¾ƒå°‘ï¼ŒAI å¸¸å¸¸ä¼šäº§ç”Ÿå¹»è§‰ã€‚æ›´åˆ«æ Swift çš„ <strong>Concurrencyï¼ˆå¹¶å‘ï¼‰</strong> æ¨¡å‹ï¼Œè¿äººç±»ä¸“å®¶éƒ½å¤´ç§ƒï¼Œæ›´åˆ«è¯´è¿™äº›åªä¼šæ¦‚ç‡é¢„æµ‹çš„å‚»å¤§ä¸ªäº†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/362076e2e3474f4cbac2349a1a464850~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=odC67V8dogERJB6EQNsVGPrn4G0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œå¬ç€ï¼Œè‰äºšï¼Œâ€è€ç‹ä¸¥è‚ƒåœ°è¯´ï¼Œâ€œè¦æƒ³åœ¨ iOS 18 ç”šè‡³æ›´é«˜ç‰ˆæœ¬çš„åºŸåœŸä¸Šç”Ÿå­˜ï¼Œä½ å¿…é¡»å­¦ä¼šè¯†åˆ«è¿™äº›â€˜æ™ºéšœæ“ä½œâ€™ã€‚æˆ‘ä»¬ä¸è°ˆå“²å­¦ï¼Œåªè°ˆç”Ÿå­˜ã€‚ä»¥ä¸‹å°±æ˜¯æˆ‘ä»æ­»äººå †é‡Œæ€»ç»“å‡ºæ¥çš„<strong>ä»£ç æ’é›·æŒ‡å—</strong>ã€‚â€</p>
<hr/>
<h3 data-id="heading-2">ğŸ¨ 1. åˆ«å†ç”¨è¿‡æ—¶çš„è°ƒè‰²ç›˜äº†</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>foregroundColor()</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>foregroundStyle()</code></p>
<p>â€œçœ‹è¿™é‡Œï¼Œâ€è€ç‹æŒ‡ç€ä¸€è¡Œä»£ç ï¼Œâ€œAI è¿˜åœ¨ç”¨ <code>foregroundColor()</code>ã€‚è¿™å°±åƒæ˜¯è¿˜åœ¨ç”¨é»‘ç«è¯åšç‚¸å¼¹ã€‚è™½ç„¶å­—æ•°ä¸€æ ·ï¼Œä½†å‰è€…å·²ç»æ˜¯ä¸ªè¡Œå°†å°±æœ¨çš„<strong>Deprecated API</strong>ã€‚æŠŠå®ƒæ¢æˆ <strong><code>foregroundStyle()</code></strong>ï¼åè€…æ‰æ˜¯æœªæ¥ï¼Œå®ƒæ”¯æŒæ¸å˜ï¼ˆGradientsï¼‰ç­‰é«˜çº§ç‰¹æ€§ã€‚åˆ«è®©ä½ çš„ UI çœ‹èµ·æ¥åƒä¸Šä¸ªä¸–çºªçš„äº§ç‰©ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d95496384a78433d87abb67b00f0d7bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=39luGjfrfKdlRmBh6zO2nW466ps%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-3">ğŸ“ 2. åªæœ‰åˆ‡æ‰æ£±è§’ï¼Œæ‰èƒ½åœ†æ»‘å¤„ä¸–</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>cornerRadius()</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>clipShape(.rect(cornerRadius:))</code></p>
<p>â€œåˆæ˜¯ä¸€ä¸ªè€å¤è‘£ã€‚<code>cornerRadius()</code> æ—©å°±è¯¥è¿›åšç‰©é¦†äº†ã€‚ç°åœ¨çš„æ ‡å‡†æ˜¯ä½¿ç”¨ <strong><code>clipShape(.rect(cornerRadius:))</code></strong>ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå‰è€…æ˜¯å‚»ç“œå¼åœ†è§’ï¼Œåè€…èƒ½è®©ä½ é€šè¿‡ <code>uneven rounded rectangles</code>ï¼ˆä¸è§„åˆ™åœ†è§’çŸ©å½¢ï¼‰ç©å‡ºèŠ±æ¥ã€‚åœ¨è¿™ä¸ªçœ‹è„¸çš„ä¸–ç•Œï¼Œç»†èŠ‚å†³å®šæˆè´¥ã€‚â€</p>
<h3 data-id="heading-4">ğŸ”„ 3. ç›‘æ§å˜åŒ–ï¼Œä¸è¦ç¼ºæ–¤å°‘ä¸¤</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>onChange(of: value) { ... }</code> (å•å‚æ•°ç‰ˆæœ¬)
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>onChange(of: value) { oldValue, newValue in ... }</code></p>
<p>è€ç‹çš±èµ·çœ‰å¤´ï¼šâ€œè¿™ä¸ª <code>onChange</code> ä¿®æ”¹å™¨ï¼ŒAI ç»å¸¸åªç»™ä¸€ä¸ªå‚æ•°é—­åŒ…ã€‚è¿™åœ¨æ—§ç‰ˆæœ¬æ˜¯â€˜ä¸å®‰å…¨â€™çš„ï¼Œç°åœ¨å·²ç»è¢«æ ‡è®°ä¸ºå¼ƒç”¨ã€‚è¦ä¹ˆä¸ä¼ å‚ï¼Œè¦ä¹ˆæ¥å—ä¸¤ä¸ªå‚æ•°ï¼ˆæ–°æ—§å€¼ï¼‰ã€‚åˆ«æå¾—ä¸æ¸…ä¸æ¥šçš„ï¼Œå®¹æ˜“å‡ºäººå‘½ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ad45e7dc39b4f9b8b7ed19494250721~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=iO0nOgAWvuSSI3Q1Gyyc8XA%2BULQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-5">ğŸ“‘ 4. æ ‡ç­¾é¡µçš„ã€ŒæŒ‡é¹¿ä¸ºé©¬ã€</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>tabItem()</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> æ–°çš„ <strong>Tab API</strong></p>
<p>â€œå¦‚æœçœ‹åˆ°è€æ—§çš„ <code>tabItem()</code>ï¼Œç«‹åˆ»æŠŠå®ƒæ¢æˆæ–°çš„ <strong>Tab API</strong>ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸ºäº†æ‰€è°“çš„â€˜ç±»å‹å®‰å…¨ï¼ˆType-safeï¼‰â€™ï¼Œæ›´æ˜¯ä¸ºäº†é€‚é…æœªæ¥â€”â€”æ¯”å¦‚é‚£ä¸ªä¼ é—»ä¸­çš„ iOS 26 æœç´¢æ ‡ç­¾é¡µè®¾è®¡ã€‚æˆ‘ä»¬è¦é¢†å…ˆâ€˜æ™ºæ ¸â€™ä¸€æ­¥ï¼Œæ‡‚å—ï¼Ÿâ€</p>
<h3 data-id="heading-6">ğŸ‘† 5. åˆ«ä»€ä¹ˆéƒ½ç”¨ã€Œæˆ³ä¸€æˆ³ã€</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> æ»¥ç”¨ <code>onTapGesture()</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> ä½¿ç”¨çœŸæ­£çš„ <code>Button</code></p>
<p>â€œAI ä¼¼ä¹è§‰å¾—ä¸‡ç‰©çš†å¯ <code>onTapGesture()</code>ã€‚å¤§é”™ç‰¹é”™ï¼é™¤éä½ éœ€è¦çŸ¥é“ç‚¹å‡»çš„å…·ä½“åæ ‡æˆ–è€…ç‚¹å‡»æ¬¡æ•°ï¼Œå¦åˆ™ç»Ÿç»Ÿç»™æˆ‘æ¢æˆæ ‡å‡†çš„ <strong><code>Button</code></strong>ã€‚è¿™ä¸ä»…æ˜¯ä¸ºäº†è®© <strong>VoiceOver</strong>ï¼ˆæ—ç™½ï¼‰ç”¨æˆ·èƒ½æ´»ä¸‹å»ï¼Œä¹Ÿæ˜¯ä¸ºäº†è®© visionOS ä¸Šçš„çœ¼çƒè¿½è¸ªèƒ½æ­£å¸¸å·¥ä½œã€‚åˆ«åšä¸€ä¸ªå¯¹æ®‹éšœäººå£«ä¸å‹å¥½çš„æ··è›‹ã€‚â€</p>
<h3 data-id="heading-7">ğŸ§  6. æ‰”æ‰æ—§æ—¶ä»£çš„è§‚å¯Ÿè€…</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>ObservableObject</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>@Observable</code> å®</p>
<p>â€œè‰äºšï¼Œçœ‹ç€æˆ‘çš„çœ¼ç›ã€‚é™¤éä½ å¯¹ <strong>Combine</strong> æ¡†æ¶æœ‰ä»€ä¹ˆç‰¹æ®Šçš„å„ç§ç™–å¥½ï¼Œå¦åˆ™æŠŠæ‰€æœ‰çš„ <code>ObservableObject</code> éƒ½æ‰”è¿›ç„šåŒ–ç‚‰ï¼Œæ¢æˆ <strong><code>@Observable</code></strong> å®ã€‚ä»£ç æ›´å°‘ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œè¿™å°±å¥½æ¯”ä»ç‡ƒæ²¹è½¦æ¢æˆäº†æ ¸åŠ¨åŠ›æˆ˜è½¦ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51e99a3409524f679105a722c29c330c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=HOdeueYmtbn3B5Gn8jwldYO3zdI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-8">â˜ï¸ 7. æ•°æ®çš„é™·é˜±</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> SwiftData æ¨¡å‹ä¸­çš„ <code>@Attribute(.unique)</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> å°å¿ƒä½¿ç”¨ï¼</p>
<p>â€œè¿™æ˜¯ä¸€ä¸ªéšè”½çš„é›·åŒºã€‚å¦‚æœåœ¨ SwiftData æ¨¡å‹å®šä¹‰é‡Œçœ‹åˆ° <strong><code>@Attribute(.unique)</code></strong>ï¼Œä½ è¦è­¦æƒ•â€”â€”è¿™ç©æ„å„¿è·Ÿ <strong>CloudKit</strong> å…«å­—ä¸åˆã€‚åˆ«åˆ°æ—¶å€™æ•°æ®åŒæ­¥å¤±è´¥ï¼Œä½ è¿˜åœ¨é‚£å„¿å‚»ä¹ä¹åœ°æŸ¥ç½‘ç»œè¿æ¥ã€‚â€</p>
<h3 data-id="heading-9">ğŸ“‰ 8. æ€§èƒ½çš„éšå½¢æ€æ‰‹</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> å°†è§†å›¾æ‹†åˆ†ä¸ºã€Œè®¡ç®—å±æ€§ï¼ˆComputed Propertiesï¼‰ã€
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> æ‹†åˆ†ä¸ºç‹¬ç«‹çš„ SwiftUI <strong>Views</strong></p>
<p>â€œä¸ºäº†å›¾çœäº‹ï¼ŒAI å–œæ¬¢æŠŠå¤§æ®µçš„ UI ä»£ç å¡è¿›è®¡ç®—å±æ€§é‡Œã€‚è¿™æ˜¯<strong>å°¸ä½ç´ é¤</strong>ï¼å°¤å…¶æ˜¯åœ¨ä½¿ç”¨ <code>@Observable</code> æ—¶ï¼Œè®¡ç®—å±æ€§æ— æ³•äº«å—æ™ºèƒ½è§†å›¾å¤±æ•ˆï¼ˆView Invalidationï¼‰çš„ä¼˜åŒ–ã€‚æŠŠå®ƒä»¬æ‹†åˆ†æˆç‹¬ç«‹çš„ SwiftUI ç»“æ„ä½“ï¼è™½ç„¶éº»çƒ¦ç‚¹ï¼Œä½†ä¸ºäº†é‚£ 60fps çš„æµç•…åº¦ï¼Œå€¼å¾—ã€‚â€</p>
<h3 data-id="heading-10">ğŸ”  9. å­—ä½“æ’å°çš„æ³•è¥¿æ–¯</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>.font(.system(size: 14))</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <strong>Dynamic Type</strong> (åŠ¨æ€å­—ä½“)</p>
<p>â€œæœ‰äº› LLMï¼ˆå°¤å…¶æ˜¯é‚£ä¸ªå« Claude çš„å®¶ä¼™ï¼‰ç®€ç›´å°±æ˜¯å­—ä½“ç•Œçš„ç‹¬è£è€…ï¼Œæ€»å–œæ¬¢å¼ºè¡ŒæŒ‡å®š <code>.font(.system(size: ...))</code>ã€‚ç»™æˆ‘æœå‡ºè¿™äº›æ¯’ç˜¤ï¼Œå…¨éƒ¨æ¢æˆ <strong>Dynamic Type</strong>ã€‚å¦‚æœæ˜¯ iOS 26+ï¼Œä½ å¯ä»¥ç”¨ <code>.font(.body.scaled(by: 1.5))</code>ã€‚è®°ä½ï¼Œç”¨æˆ·å¯èƒ½çœ¼èŠ±ï¼Œåˆ«è®©ä»–ä»¬çœ‹çäº†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3dc968c64580447185c00e2d4aa1ddf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=wKAUg%2FLaVVhBE7dCrvIORkPs4kg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-11">ğŸ”— 10. å¯¼èˆªçš„æ­»èƒ¡åŒ</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> åˆ—è¡¨é‡Œçš„å†…è” <code>NavigationLink</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>navigationDestination(for:)</code></p>
<p>â€œåœ¨ List é‡Œç›´æ¥å†™ <code>NavigationLink</code> çš„ç›®æ ‡åœ°å€ï¼Ÿé‚£æ˜¯åŸå§‹äººçš„åšæ³•ã€‚ç°åœ¨çš„æ–‡æ˜äººä½¿ç”¨ <strong><code>navigationDestination(for:)</code></strong>ã€‚è§£è€¦ï¼è§£è€¦æ‡‚ä¸æ‡‚ï¼Ÿåˆ«æŠŠåœ°å›¾ç”»åœ¨è„šåº•æ¿ä¸Šã€‚â€</p>
<hr/>
<p>è€ç‹å–äº†ä¸€å£å·²ç»å‡‰é€çš„å’–å•¡ï¼Œç»§ç»­åœ¨è¿™å †èµ›åšåƒåœ¾ä¸­æŒ–æ˜ã€‚</p>
<h3 data-id="heading-12">ğŸ·ï¸ 11. æŒ‰é’®çš„è‡ªæˆ‘ä¿®å…»</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> ç”¨ <code>Label</code> åšæŒ‰é’®å†…å®¹
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> å†…è” API <code>Button("Title", systemImage: "plus", action: ...)</code></p>
<p>â€œæœŸå¾…çœ‹åˆ° AI ç”¨ <code>Label</code> ç”šè‡³çº¯ <code>Image</code> æ¥åšæŒ‰é’®å†…å®¹å§â€”â€”è¿™å¯¹ VoiceOver ç”¨æˆ·æ¥è¯´ç®€ç›´æ˜¯ç¾éš¾ã€‚ç”¨æ–°çš„å†…è” APIï¼š<strong><code>Button("Tap me", systemImage: "plus", action: whatever)</code></strong>ã€‚ç®€å•ï¼Œç²—æš´ï¼Œæœ‰æ•ˆã€‚â€</p>
<h3 data-id="heading-13">ğŸ”¢ 12. æ•°ç»„çš„ç”»è›‡æ·»è¶³</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>ForEach(Array(x.enumerated()), ...)</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>ForEach(x.enumerated(), ...)</code></p>
<p>â€œçœ‹åˆ°è¿™ä¸ª <code>Array(x.enumerated())</code> äº†å—ï¼Ÿè¿™å°±æ˜¯è„±è£¤å­æ”¾å±ã€‚ç›´æ¥ç”¨ <strong><code>ForEach(x.enumerated(), ...)</code></strong> å°±è¡Œäº†ã€‚çœç‚¹å†…å­˜å§ï¼Œè™½ç„¶ç°åœ¨çš„å†…å­˜ä¸å€¼é’±ï¼Œä½†ç¨‹åºå‘˜çš„å°Šä¸¥å€¼é’±ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31650a28904b47d696498ab9a61585f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=Jnma3Jpn0NN3PbH2qUvHwjJoHyc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-14">ğŸ“‚ 13. å¯»æ‰¾æ–‡ä»¶çš„æ·å¾„</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> å†—é•¿çš„æ–‡ä»¶è·¯å¾„æŸ¥æ‰¾ä»£ç 
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>URL.documentsDirectory</code></p>
<p>â€œé‚£äº›åˆè‡­åˆé•¿çš„æŸ¥æ‰¾ Document ç›®å½•çš„ä»£ç ï¼Œç»Ÿç»Ÿåˆ æ‰ã€‚æ¢æˆ <strong><code>URL.documentsDirectory</code></strong>ã€‚ä¸€è¡Œä»£ç èƒ½è§£å†³çš„äº‹ï¼Œç»ä¸å†™åè¡Œã€‚â€</p>
<h3 data-id="heading-15">ğŸ§­ 14. å¯¼èˆªæ ˆçš„æ”¹æœæ¢ä»£</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>NavigationView</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>NavigationStack</code></p>
<p>â€œ<code>NavigationView</code> å·²ç»æ­»äº†ï¼Œæœ‰äº‹çƒ§çº¸ã€‚é™¤éä½ è¦æ”¯æŒ iOS 15 é‚£ä¸ªä¸Šå¤ç‰ˆæœ¬ï¼Œå¦åˆ™å…¨éƒ¨æ¢æˆ <strong><code>NavigationStack</code></strong>ã€‚â€</p>
<h3 data-id="heading-16">ğŸ’¤ 15. ç¡ä¸ªå¥½è§‰</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>Task.sleep(nanoseconds:)</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>Task.sleep(for: .seconds(1))</code></p>
<p>â€œâ€˜æ™ºæ ¸â€™ ä¼¼ä¹å¾ˆå–œæ¬¢çº³ç§’ï¼Œå¯èƒ½å®ƒè§‰å¾—è‡ªå·±ç®—å¾—å¿«ã€‚ä½†ä½ è¦ç”¨ <strong><code>Task.sleep(for:)</code></strong>ï¼Œé…åˆ <code>.seconds(1)</code> è¿™ç§äººç±»èƒ½è¯»æ‡‚çš„å•ä½ã€‚åˆ«å†åƒä¸ªåƒµå°¸ä¸€æ ·æ•°çº³ç§’äº†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/114948205e434dfa8db76273b5378d44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=xTAcskaSAdfJJUOzCYObV3w%2B%2FtE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-17">ğŸ§® 16. æ ¼å¼åŒ–çš„è‰ºæœ¯</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> C é£æ ¼æ ¼å¼åŒ– <code>String(format: "%.2f", ...)</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> Swift åŸç”Ÿæ ¼å¼åŒ– <code>.formatted()</code></p>
<p>â€œæˆ‘çŸ¥é“ C é£æ ¼çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–å¾ˆç»å…¸ï¼Œä½†å®ƒä¸å®‰å…¨ã€‚æŠŠå®ƒæ¢æˆ Swift åŸç”Ÿçš„ <strong><code>Text(abs(change), format: .number.precision(.fractionLength(2)))</code></strong>ã€‚è™½ç„¶å†™èµ·æ¥é•¿ä¸€ç‚¹ï¼Œä½†å®ƒåƒç©¿äº†é˜²å¼¹è¡£ä¸€æ ·å®‰å…¨ã€‚â€</p>
<h3 data-id="heading-18">ğŸ—ï¸ 17. ä¸è¦æŠŠé¸¡è›‹æ”¾åœ¨ä¸€ä¸ªç¯®å­é‡Œ</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> å•ä¸ªæ–‡ä»¶å¡å…¥å¤§é‡ç±»å‹
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> æ‹†åˆ†æ–‡ä»¶</p>
<p>â€œAI å–œæ¬¢æŠŠå‡ åä¸ª struct å’Œ class å¡è¿›ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œè¿™ç®€ç›´æ˜¯<strong>ç¼–è¯‘æ—¶é—´æ¯ç­è€…</strong>ã€‚æ‹†å¼€å®ƒä»¬ï¼é™¤éä½ æƒ³åœ¨ç¼–è¯‘çš„æ—¶å€™æœ‰æ—¶é—´å»ç…®ä¸ªæ»¡æ±‰å…¨å¸­ã€‚â€</p>
<h3 data-id="heading-19">ğŸ–¼ï¸ 18. æ¸²æŸ“çš„æ–°æ¬¢</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>UIGraphicsImageRenderer</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>ImageRenderer</code></p>
<p>â€œå¦‚æœä½ åœ¨æ¸²æŸ“ SwiftUI è§†å›¾ï¼Œåˆ«å†ç”¨ UIKit æ—¶ä»£çš„ <code>UIGraphicsImageRenderer</code> äº†ã€‚æ‹¥æŠ± <strong><code>ImageRenderer</code></strong> å§ï¼Œè¿™æ˜¯å®ƒçš„ä¸»åœºã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4a35e5cae7643b89f45c75fdb66339e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=4QK9sEzKDSuV05uIzEb11NeE98w%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-20">ğŸ‹ï¸ 19. å­—é‡çš„è¿·æƒ‘è¡Œä¸º</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> æ»¥ç”¨ <code>fontWeight()</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> åŒºåˆ† <code>bold()</code> å’Œ <code>fontWeight(.bold)</code></p>
<p>â€œä¸‰å¤§ AI å·¨å¤´éƒ½å–œæ¬¢æ»¥ç”¨ <code>fontWeight()</code>ã€‚è®°ä½ï¼Œ<code>fontWeight(.bold)</code> å’Œ <code>bold()</code> æ¸²æŸ“å‡ºæ¥çš„ç»“æœæœªå¿…ä¸€æ ·ã€‚è¿™å°±åƒâ€˜å¾®èƒ–â€™å’Œâ€˜å£®å®â€™çš„åŒºåˆ«ï¼Œå¾®å¦™ä½†é‡è¦ã€‚â€</p>
<h3 data-id="heading-21">ğŸš¦ 20. å¹¶å‘çš„ä¸‡é‡‘æ²¹ï¼ˆä¹Ÿæ˜¯æ¯’è¯ï¼‰</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>DispatchQueue.main.async</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> ç°ä»£å¹¶å‘æ¨¡å‹</p>
<p>â€œä¸€æ—¦ AI é‡åˆ°å¹¶å‘é—®é¢˜ï¼Œå®ƒå°±ä¼šåƒå—æƒŠçš„é¸µé¸Ÿä¸€æ ·æŠŠå¤´åŸ‹è¿› <strong><code>DispatchQueue.main.async</code></strong> é‡Œã€‚è¿™æ˜¯ä¸å¯åŸè°…çš„æ‡’æƒ°ï¼é‚£æ˜¯æ—§æ—¶ä»£çš„åˆ›å¯è´´ï¼Œç°åœ¨çš„æˆ‘ä»¬æœ‰æ›´ä¼˜é›…çš„ Actor æ¨¡å‹ã€‚â€</p>
<h3 data-id="heading-22">ğŸ­ 21. ä¸»è§’å…‰ç¯æ˜¯é»˜è®¤çš„</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> åˆ°å¤„åŠ  <code>@MainActor</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> é»˜è®¤å¼€å¯</p>
<p>â€œå¦‚æœä½ åœ¨å†™æ–° Appï¼ŒMain Actor éš”ç¦»é€šå¸¸æ˜¯é»˜è®¤å¼€å¯çš„ã€‚ä¸ç”¨åƒè´´ç¬¦å’’ä¸€æ ·åˆ°å¤„è´´ <strong><code>@MainActor</code></strong>ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a49b0e71c80b40fda35c78625af9a159~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=Vwh8kzNdqsxnn7xDmC7n%2BCMTbmA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-23">ğŸ“ 22. å‡ ä½•çš„è¯…å’’</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>GeometryReader</code> + å›ºå®š Frame
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>visualEffect()</code> æˆ– <code>containerRelativeFrame()</code></p>
<p>â€œæœ€åï¼Œä¹Ÿæ˜¯æœ€å¯æ€•çš„â€”â€”<strong><code>GeometryReader</code></strong>ã€‚å¤©å“ªï¼ŒAI å¯¹è¿™ç©æ„å„¿ç®€ç›´æ˜¯çœŸçˆ±ï¼Œè¿˜å–œæ¬¢é…åˆå›ºå®šå°ºå¯¸çš„ Frame ä½¿ç”¨ã€‚è¿™æ˜¯å¸ƒå±€ç•Œçš„æ ¸æ­¦å™¨ï¼Œä¸€ç‚¸æ¯æ‰€æœ‰ã€‚è¯•ç€ç”¨ <strong><code>visualEffect()</code></strong> æˆ–è€… <strong><code>containerRelativeFrame()</code></strong> æ¥ä»£æ›¿ã€‚åˆ«åšé‚£ä¸ªç ´åå¸ƒå±€æµçš„ç½ªäººã€‚â€</p>
<hr/>
<h2 data-id="heading-24">å°¾å£°ï¼šæ•°å­—å¹½çµçš„ä½è¯­</h2>
<p>è€ç‹æ•²ä¸‹æœ€åä¸€ä¸ªå›è½¦é”®ï¼Œå…¨æ¯å±å¹•ä¸Šçš„çº¢è‰²æŠ¥é”™ç¬é—´å˜æˆäº†ä»¤äººæ„‰æ‚¦çš„ç»¿è‰²æ„å»ºæˆåŠŸæç¤ºã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// Human-verified Code</span>
<span class="hljs-comment">// Status: Compiling... Success.</span>
<span class="hljs-comment">// Fixed by: The Refiners (Old Wang &amp; Liya)</span>
</code></pre>
<p>â€œæå®šã€‚â€ è€ç‹ç˜«ååœ¨æ¤…å­ä¸Šï¼Œå¬ç€çª—å¤–é›¨å£°æ¸å¤§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ff285e2e07243e19c071d1960fa2bba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=pyQ1%2FUg%2BClMdAt3UVUof1uyRW4k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è‰äºšçœ‹ç€å®Œç¾è¿è¡Œçš„ Appï¼Œçœ¼ä¸­é—ªçƒç€å´‡æ‹œçš„å…‰èŠ’ï¼šâ€œè€ç‹ï¼Œä½ ç®€ç›´æ˜¯ç¥ï¼æ—¢ç„¶æˆ‘ä»¬èƒ½ä¿®å¤è¿™äº›ä»£ç ï¼Œä¸ºä»€ä¹ˆ AI è¿˜æ˜¯ä¼šä¸æ–­åœ°ç”Ÿæˆè¿™ç§åƒåœ¾ï¼Ÿâ€</p>
<p>è€ç‹ç‚¹ç‡ƒäº†æœ€åä¸€æ”¯çƒŸï¼Œçœ‹ç€çƒŸé›¾åœ¨éœ“è™¹ç¯ä¸‹ç¼­ç»•ã€‚â€œå› ä¸º AI ä¼šäº§ç”Ÿ<strong>å¹»è§‰ï¼ˆHallucinationsï¼‰</strong>ã€‚å®ƒä»¬ä¼šç¼–é€ å‡ºçœ‹èµ·æ¥å¾ˆç¾ã€åå­—å¾ˆåƒæ ·ï¼Œä½†å®é™…ä¸Šæ ¹æœ¬ä¸å­˜åœ¨çš„ APIã€‚è¿™å°±åƒæ˜¯åœ¨æ•°å­—ä¸–ç•Œé‡Œè§é¬¼äº†ä¸€æ ·ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e36f4c6462b54da6880dd0b012a29ca7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=S%2BTQVv0fjojQUL%2BLrxEHq8kDi9k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä»–è½¬è¿‡å¤´ï¼Œæ„å‘³æ·±é•¿åœ°çœ‹ç€è‰äºšï¼šâ€œå¯¹æ­¤ï¼Œæˆ‘ä¹Ÿæ— èƒ½ä¸ºåŠ›ã€‚æˆ‘åªèƒ½ä¿®è¡¥å·²çŸ¥çš„é”™è¯¯ï¼Œå´æ— æ³•é¢„æµ‹æœªçŸ¥çš„ç–¯ç‹‚ã€‚â€</p>
<p>â€œé‚£ä¹ˆï¼Œâ€è€ç‹æŠŠç›®å…‰æŠ•å‘äº†å±å¹•å‰çš„ä½ â€”â€”ç¬¬å››é¢å¢™ä¹‹å¤–çš„è§‚å¯Ÿè€…ï¼Œâ€œè½®åˆ°ä½ äº†ã€‚<strong>åœ¨ä½ çš„èµ›åšæ¢é™©ä¸­ï¼Œé€šå¸¸ä¼šåœ¨ AI ç”Ÿæˆçš„ä»£ç é‡Œå‘ç°ä»€ä¹ˆâ€˜æƒŠå–œâ€™ï¼Ÿ</strong>â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cc4c156db2b4a67956ba5cd918f72f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=rmGidCBjhQZbbr9DjDlotL9YiV4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¦‚æœä½ è¿˜æ´»ç€ï¼Œè¯·åœ¨è¯„è®ºåŒºå‘Šè¯‰æˆ‘ä»¬ã€‚æ¯•ç«Ÿï¼Œåœ¨è¿™åœºäººæœºå¤§æˆ˜ä¸­ï¼ŒçŸ¥è¯†æ˜¯æˆ‘ä»¬å”¯ä¸€çš„æ­¦å™¨ã€‚</p>
<p>é‚£ä¹ˆï¼Œæ„Ÿè°¢è§‚èµï¼Œå†ä¼šå•¦ï¼8-)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆåä¸ƒï¼‰ç¬¬17ç« ï¼šSkillç³»ç»Ÿä¸Runtime Sandboxé›†æˆ - AIOpså®è·µ]]></title>    <link>https://juejin.cn/post/7590433626561085475</link>    <guid>https://juejin.cn/post/7590433626561085475</guid>    <pubDate>2026-01-04T02:02:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590433626561085475" data-draft-id="7590433626561069091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆåä¸ƒï¼‰ç¬¬17ç« ï¼šSkillç³»ç»Ÿä¸Runtime Sandboxé›†æˆ - AIOpså®è·µ"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-01-04T02:02:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆåä¸ƒï¼‰ç¬¬17ç« ï¼šSkillç³»ç»Ÿä¸Runtime Sandboxé›†æˆ - AIOpså®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:02:31.000Z" title="Sun Jan 04 2026 02:02:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    29
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¯¼è¯»</h2>
<p>æœ¬ç« è®²è§£<strong>Skillç³»ç»Ÿä¸AgentScope Runtime Sandboxçš„é›†æˆ</strong>ï¼Œé€šè¿‡çœŸå®çš„AIOpsåœºæ™¯å±•ç¤ºå¦‚ä½•æ„å»º<strong>æ‰§è¡Œè„šæœ¬ã€è®¿é—®æ–‡ä»¶ç³»ç»Ÿã€è°ƒç”¨ç³»ç»Ÿå·¥å…·çš„Skillç³»ç»Ÿ</strong>ã€‚</p>
<p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼š</p>
<ul>
<li>ç†è§£Runtime Sandboxçš„æ¶æ„è®¾è®¡</li>
<li>æŒæ¡Skillä¸æ–‡ä»¶ç³»ç»Ÿçš„å…³è”æœºåˆ¶</li>
<li>å­¦ä¼šå®ç°è„šæœ¬æ‰§è¡Œç±»Skill</li>
<li>æŒæ¡ç³»ç»Ÿå·¥å…·ï¼ˆgrepã€catç­‰ï¼‰çš„é›†æˆ</li>
<li>äº†è§£è‡ªå®šä¹‰å·¥å…·çš„æ‰©å±•æœºåˆ¶</li>
<li>å®ç°AIOpsåœºæ™¯ï¼šæ•…éšœè¯Šæ–­ + æŠ¥å‘Šç”Ÿæˆ</li>
</ul>
<p>sandbox: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope-runtime" target="_blank" title="https://github.com/agentscope-ai/agentscope-runtime" ref="nofollow noopener noreferrer">github.com/agentscope-â€¦</a></p>
<hr/>
<h3 data-id="heading-1">1.1 What - æ•´ä½“æ¶æ„</h3>
<p><strong>èƒŒæ™¯é—®é¢˜</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Skilléœ€è¦çš„èƒ½åŠ›ï¼š
â”œâ”€ æ‰§è¡ŒShellè„šæœ¬ (æ•…éšœè¯Šæ–­ã€æ—¥å¿—åˆ†æ)
â”œâ”€ è°ƒç”¨ç³»ç»Ÿå·¥å…· (grepã€awkã€catç­‰)
â”œâ”€ è¯»å–æ–‡ä»¶ç³»ç»Ÿ (æ—¥å¿—ã€é…ç½®ã€æ•°æ®)
â”œâ”€ ç®¡ç†ç‹¬ç«‹ç¯å¢ƒ (éš”ç¦»ã€å®‰å…¨ã€å¯å¤ç°)
â””â”€ è·¨åº”ç”¨é€šä¿¡ (Agent Runtime as Server)

ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜ï¼š
âŒ å®‰å…¨éšæ‚£ï¼šç›´æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤
âŒ ç¯å¢ƒæ±¡æŸ“ï¼šå½±å“ä¸»åº”ç”¨ç¯å¢ƒ
âŒ éš¾ä»¥ç®¡ç†ï¼šæ–‡ä»¶ç³»ç»Ÿæ··ä¹±
âŒ éš¾ä»¥æ‰©å±•ï¼šå·¥å…·é›†æˆç¹ç
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šRuntime Sandbox</strong></p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AgentScope Application                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                  Skill Management System                â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚ Diagnosis    â”‚  â”‚ Report Gen   â”‚  â”‚ Custom Tools â”‚  â”‚â”‚
â”‚  â”‚  â”‚ Skill        â”‚  â”‚ Skill        â”‚  â”‚ Skill        â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚          â”‚                â”‚                â”‚            â”‚â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚â”‚
â”‚  â”‚                           â”‚                            â”‚â”‚
â”‚  â”‚                  Runtime Client (gRPC)                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â”‚  Runtime Server    â”‚
â”‚                    â”‚ (Sandbox Service)  â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                               â”‚
        Network (å¯è·¨æœåŠ¡å™¨)
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Isolated Sandbox Environment               â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚ File System (/tmp/skill_workspace)     â”‚ â”‚
        â”‚  â”‚ â”œâ”€ /diagnostics/                       â”‚ â”‚
        â”‚  â”‚ â”‚  â”œâ”€ scripts/                         â”‚ â”‚
        â”‚  â”‚ â”‚  â”‚  â”œâ”€ check_cpu<span class="hljs-selector-class">.sh</span>                 â”‚ â”‚
        â”‚  â”‚ â”‚  â”‚  â”œâ”€ check_memory<span class="hljs-selector-class">.sh</span>              â”‚ â”‚
        â”‚  â”‚ â”‚  â”‚  â””â”€ analyze_logs<span class="hljs-selector-class">.sh</span>              â”‚ â”‚
        â”‚  â”‚ â”‚  â”œâ”€ reports/                        â”‚ â”‚
        â”‚  â”‚ â”‚  â”‚  â””â”€ diagnosis_report<span class="hljs-selector-class">.md</span>          â”‚ â”‚
        â”‚  â”‚ â”‚  â””â”€ tools/                          â”‚ â”‚
        â”‚  â”‚ â””â”€ /tools/                            â”‚ â”‚
        â”‚  â”‚    â”œâ”€ grep, cat, awk (ç³»ç»Ÿå·¥å…·)       â”‚ â”‚
        â”‚  â”‚    â”œâ”€ custom_analyzer (è‡ªå®šä¹‰å·¥å…·)   â”‚ â”‚
        â”‚  â”‚    â””â”€ ...                             â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                                              â”‚
        â”‚  Execution Engine                            â”‚
        â”‚  â”œâ”€ Script Executor                          â”‚
        â”‚  â”œâ”€ Tool Invoker                             â”‚
        â”‚  â””â”€ Resource Monitor                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-2">24.1.2 Why - ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·çš„é›†æˆ</h3>
<p><strong>1. å®‰å…¨éš”ç¦»</strong></p>
<pre><code class="hljs language-bash" lang="bash">æ²¡æœ‰Sandboxï¼š
Agentè¿è¡Œè„šæœ¬ â†’ ç›´æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ â†’ å¯èƒ½åˆ é™¤/varã€/etcç­‰å…³é”®æ–‡ä»¶ âŒ

ä½¿ç”¨Sandboxï¼š
Agentè¿è¡Œè„šæœ¬ â†’ Sandboxç¯å¢ƒä¸­æ‰§è¡Œ â†’ éš”ç¦»çš„æ–‡ä»¶ç³»ç»Ÿ âœ…
                                  â†’ è„šæœ¬å‡ºé”™ä¸å½±å“ä¸»æœºç³»ç»Ÿ
</code></pre>
<p><strong>2. æ–‡ä»¶ç³»ç»Ÿç»„ç»‡</strong></p>
<pre><code class="hljs language-scss" lang="scss">Skillçš„æ–‡ä»¶ç»„ç»‡é—®é¢˜ï¼š
- Skill <span class="hljs-selector-tag">A</span>çš„è„šæœ¬åœ¨/opt/scripts/<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.sh</span>
- Skill <span class="hljs-selector-tag">B</span>çš„è„šæœ¬åœ¨/opt/scripts/<span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.sh</span>
- æŠ¥å‘Šæ¨¡æ¿åœ¨/<span class="hljs-selector-tag">var</span>/templates/report<span class="hljs-selector-class">.md</span>
â†’ éš¾ä»¥ç®¡ç†ã€ç‰ˆæœ¬æ§åˆ¶å›°éš¾ã€å®¹æ˜“å†²çª

è§£å†³æ–¹æ¡ˆï¼ˆSandboxï¼‰ï¼š
/tmp/skill_workspace/
â”œâ”€ skill_diagnosis/
â”‚  â”œâ”€ scripts/        (è¯Šæ–­è„šæœ¬)
â”‚  â”œâ”€ tools/          (è¯Šæ–­å·¥å…·)
â”‚  â”œâ”€ cache/          (è¯Šæ–­ç¼“å­˜)
â”‚  â””â”€ reports/        (è¯Šæ–­æŠ¥å‘Š)
â”œâ”€ skill_reporting/
â”‚  â”œâ”€ templates/      (æŠ¥å‘Šæ¨¡æ¿)
â”‚  â”œâ”€ tools/          (æŠ¥å‘Šå·¥å…·)
â”‚  â””â”€ outputs/        (ç”Ÿæˆçš„æŠ¥å‘Š)
â†’ æ¸…æ™°ã€æ˜“äºç‰ˆæœ¬æ§åˆ¶ã€æ”¯æŒå®¹å™¨åŒ–
</code></pre>
<p><strong>3. å·¥å…·ç®¡ç†</strong></p>
<pre><code class="hljs language-diff" lang="diff">ä¼ ç»Ÿæ–¹å¼ï¼š
<span class="hljs-deletion">- ç³»ç»Ÿå·¥å…·ï¼ˆgrepã€catã€awkï¼‰ç›´æ¥è®¿é—®</span>
<span class="hljs-deletion">- è‡ªå®šä¹‰å·¥å…·éœ€è¦å®‰è£…åˆ°ç³»ç»Ÿç›®å½•</span>
<span class="hljs-deletion">- éš¾ä»¥æ›´æ–°å’Œå›æ»š</span>

Sandboxæ–¹å¼ï¼š
<span class="hljs-deletion">- Sandboxå†…åŒ…å«å¿…è¦çš„ç³»ç»Ÿå·¥å…·</span>
<span class="hljs-deletion">- è‡ªå®šä¹‰å·¥å…·åŠ¨æ€æŒ‚è½½æˆ–ç¼–è¯‘åˆ°Sandbox</span>
<span class="hljs-deletion">- å·¥å…·ç‰ˆæœ¬ä¸Skillç»‘å®šï¼Œæ˜“äºç®¡ç†</span>
</code></pre>
<p><strong>4. Agent Runtime as Server</strong></p>
<pre><code class="hljs language-scss" lang="scss">åˆ†å¸ƒå¼éƒ¨ç½²åœºæ™¯ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent App <span class="hljs-number">1</span> â”‚         â”‚  Agent App <span class="hljs-number">2</span> â”‚
â”‚   (Service A)â”‚         â”‚   (Service B)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         gRPC/HTTP (è·¨ç½‘ç»œ)
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Runtime Server  â”‚
        â”‚   (Shared)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜åŠ¿ï¼š
âœ… å¤šä¸ªåº”ç”¨å…±äº«ä¸€ä¸ªRuntime Server
âœ… é›†ä¸­ç®¡ç†Sandboxèµ„æº
âœ… æ–‡ä»¶ç³»ç»Ÿç»Ÿä¸€ç®¡ç†
âœ… æˆæœ¬é™ä½
</code></pre>
<h3 data-id="heading-3">1.3 Runtime Sandboxæ¶æ„è¯¦è§£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Runtime Sandboxæ ¸å¿ƒæ¶æ„
 */</span>

<span class="hljs-comment">// 1. Sandboxé…ç½®</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SandboxConfig</span> {
    <span class="hljs-keyword">private</span> String sandboxId;           <span class="hljs-comment">// æ²™ç®±å”¯ä¸€ID</span>
    <span class="hljs-keyword">private</span> String workspaceRoot;       <span class="hljs-comment">// å·¥ä½œç›®å½• /tmp/skill_workspace</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> maxMemory;             <span class="hljs-comment">// æœ€å¤§å†…å­˜ 512MB</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> maxCpuTime;            <span class="hljs-comment">// æœ€å¤§CPUæ—¶é—´ 30s</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; allowedTools;  <span class="hljs-comment">// å…è®¸çš„å·¥å…·åˆ—è¡¨</span>
    <span class="hljs-keyword">private</span> Map&lt;String, String&gt; env;    <span class="hljs-comment">// ç¯å¢ƒå˜é‡</span>
}

<span class="hljs-comment">// 2. æ–‡ä»¶ç³»ç»Ÿéš”ç¦»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IsolatedFileSystem</span> {
    <span class="hljs-keyword">private</span> File workspaceRoot;
    <span class="hljs-keyword">private</span> Map&lt;String, SkillFileSystemLayout&gt; skillLayouts;
    
    <span class="hljs-comment">// æ¯ä¸ªSkillæœ‰ç‹¬ç«‹çš„æ–‡ä»¶ç»“æ„</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkillFileSystemLayout</span> {
        <span class="hljs-keyword">public</span> File scriptsDir;      <span class="hljs-comment">// /workspace/skill_name/scripts/</span>
        <span class="hljs-keyword">public</span> File toolsDir;        <span class="hljs-comment">// /workspace/skill_name/tools/</span>
        <span class="hljs-keyword">public</span> File cacheDir;        <span class="hljs-comment">// /workspace/skill_name/cache/</span>
        <span class="hljs-keyword">public</span> File outputDir;       <span class="hljs-comment">// /workspace/skill_name/output/</span>
        <span class="hljs-keyword">public</span> File configDir;       <span class="hljs-comment">// /workspace/skill_name/config/</span>
    }
}

<span class="hljs-comment">// 3. è„šæœ¬æ‰§è¡Œå™¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ScriptExecutor</span> {
    <span class="hljs-keyword">public</span> ExecutionResult <span class="hljs-title function_">execute</span><span class="hljs-params">(
        String sandboxId,
        String scriptPath,
        Map&lt;String, String&gt; env,
        <span class="hljs-type">long</span> timeout
    )</span> {
        <span class="hljs-comment">// åœ¨Sandboxä¸­æ‰§è¡Œè„šæœ¬</span>
        <span class="hljs-comment">// è¿”å›ï¼šexitCode, stdout, stderr, executionTime</span>
    }
}

<span class="hljs-comment">// 4. å·¥å…·æ³¨å†Œè¡¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolRegistry</span> {
    <span class="hljs-keyword">private</span> Map&lt;String, ToolDefinition&gt; tools;
    
    <span class="hljs-comment">// ç³»ç»Ÿå·¥å…·ï¼šgrep, cat, awk, sed, tailç­‰</span>
    <span class="hljs-comment">// è‡ªå®šä¹‰å·¥å…·ï¼šcustom_analyzer, log_parserç­‰</span>
    
    <span class="hljs-keyword">public</span> ToolDefinition <span class="hljs-title function_">registerTool</span><span class="hljs-params">(String name, String path, String version)</span> {
        <span class="hljs-comment">// æ³¨å†Œå·¥å…·åˆ°Sandbox</span>
    }
}

<span class="hljs-comment">// 5. èµ„æºç›‘æ§</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceMonitor</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitorExecution</span><span class="hljs-params">(
        String sandboxId,
        <span class="hljs-type">long</span> timeout,
        <span class="hljs-type">long</span> maxMemory
    )</span> {
        <span class="hljs-comment">// ç›‘æ§CPUã€å†…å­˜ã€ç£ç›˜ç­‰èµ„æº</span>
        <span class="hljs-comment">// è¶…è¿‡é™åˆ¶æ—¶è‡ªåŠ¨æ€æ­»è¿›ç¨‹</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-4">2. Skillçš„æ–‡ä»¶ç³»ç»Ÿç»„ç»‡</h2>
<h3 data-id="heading-5">2.1 æ ‡å‡†çš„Skillæ–‡ä»¶ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">/tmp/skill_workspace/
â”‚
â”œâ”€ skill_aiops_diagnostics/           <span class="hljs-comment"># AIOpsè¯Šæ–­Skill</span>
â”‚  â”œâ”€ skill_manifest.yaml              <span class="hljs-comment"># Skillå…ƒæ•°æ®</span>
â”‚  â”œâ”€ scripts/                         <span class="hljs-comment"># è¯Šæ–­è„šæœ¬</span>
â”‚  â”‚  â”œâ”€ cpu_diagnostics.sh           <span class="hljs-comment"># CPUè¯Šæ–­</span>
â”‚  â”‚  â”œâ”€ memory_diagnostics.sh         <span class="hljs-comment"># å†…å­˜è¯Šæ–­</span>
â”‚  â”‚  â”œâ”€ disk_diagnostics.sh           <span class="hljs-comment"># ç£ç›˜è¯Šæ–­</span>
â”‚  â”‚  â”œâ”€ network_diagnostics.sh        <span class="hljs-comment"># ç½‘ç»œè¯Šæ–­</span>
â”‚  â”‚  â”œâ”€ log_analysis.sh               <span class="hljs-comment"># æ—¥å¿—åˆ†æ</span>
â”‚  â”‚  â””â”€ correlation_analysis.py       <span class="hljs-comment"># æ•…éšœå…³è”åˆ†æ</span>
â”‚  â”‚
â”‚  â”œâ”€ tools/                           <span class="hljs-comment"># å·¥å…·é›†</span>
â”‚  â”‚  â”œâ”€ system/                       <span class="hljs-comment"># ç³»ç»Ÿå·¥å…·</span>
â”‚  â”‚  â”‚  â”œâ”€ grep                       <span class="hljs-comment"># æ–‡æœ¬æœç´¢</span>
â”‚  â”‚  â”‚  â”œâ”€ awk                        <span class="hljs-comment"># æ–‡æœ¬å¤„ç†</span>
â”‚  â”‚  â”‚  â”œâ”€ sed                        <span class="hljs-comment"># æµç¼–è¾‘å™¨</span>
â”‚  â”‚  â”‚  â””â”€ <span class="hljs-built_in">tail</span>                       <span class="hljs-comment"># æ–‡ä»¶å°¾éƒ¨</span>
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ custom/                       <span class="hljs-comment"># è‡ªå®šä¹‰å·¥å…·</span>
â”‚  â”‚     â”œâ”€ log_parser                 <span class="hljs-comment"># æ—¥å¿—è§£æå™¨</span>
â”‚  â”‚     â”œâ”€ metric_aggregator          <span class="hljs-comment"># æŒ‡æ ‡èšåˆå™¨</span>
â”‚  â”‚     â””â”€ anomaly_detector            <span class="hljs-comment"># å¼‚å¸¸æ£€æµ‹å™¨</span>
â”‚  â”‚
â”‚  â”œâ”€ cache/                           <span class="hljs-comment"># ç¼“å­˜ç›®å½•</span>
â”‚  â”‚  â”œâ”€ metrics_cache/                <span class="hljs-comment"># æŒ‡æ ‡ç¼“å­˜</span>
â”‚  â”‚  â””â”€ analysis_cache/               <span class="hljs-comment"># åˆ†æç¼“å­˜</span>
â”‚  â”‚
â”‚  â”œâ”€ reports/                         <span class="hljs-comment"># æŠ¥å‘Šè¾“å‡º</span>
â”‚  â”‚  â”œâ”€ diagnosis_reports/            <span class="hljs-comment"># è¯Šæ–­æŠ¥å‘Š</span>
â”‚  â”‚  â””â”€ analysis_results/             <span class="hljs-comment"># åˆ†æç»“æœ</span>
â”‚  â”‚
â”‚  â””â”€ config/                          <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
â”‚     â”œâ”€ diagnostic_rules.yaml          <span class="hljs-comment"># è¯Šæ–­è§„åˆ™</span>
â”‚     â”œâ”€ thresholds.yaml                <span class="hljs-comment"># å‘Šè­¦é˜ˆå€¼</span>
â”‚     â””â”€ tool_config.yaml               <span class="hljs-comment"># å·¥å…·é…ç½®</span>
â”‚
â”œâ”€ skill_report_generation/             <span class="hljs-comment"># æŠ¥å‘Šç”ŸæˆSkill</span>
â”‚  â”œâ”€ skill_manifest.yaml
â”‚  â”œâ”€ templates/                       <span class="hljs-comment"># æŠ¥å‘Šæ¨¡æ¿</span>
â”‚  â”‚  â”œâ”€ executive_summary.md          <span class="hljs-comment"># æ‰§è¡Œæ‘˜è¦æ¨¡æ¿</span>
â”‚  â”‚  â”œâ”€ detailed_analysis.md          <span class="hljs-comment"># è¯¦ç»†åˆ†ææ¨¡æ¿</span>
â”‚  â”‚  â”œâ”€ recommendations.md            <span class="hljs-comment"># å»ºè®®æ¨¡æ¿</span>
â”‚  â”‚  â””â”€ styles/
â”‚  â”‚     â””â”€ markdown.css               <span class="hljs-comment"># æ ·å¼</span>
â”‚  â”‚
â”‚  â”œâ”€ generators/                      <span class="hljs-comment"># æŠ¥å‘Šç”Ÿæˆå™¨</span>
â”‚  â”‚  â”œâ”€ pdf_generator.py              <span class="hljs-comment"># PDFç”Ÿæˆ</span>
â”‚  â”‚  â”œâ”€ html_generator.py             <span class="hljs-comment"># HTMLç”Ÿæˆ</span>
â”‚  â”‚  â””â”€ markdown_generator.py          <span class="hljs-comment"># Markdownç”Ÿæˆ</span>
â”‚  â”‚
â”‚  â”œâ”€ outputs/                         <span class="hljs-comment"># ç”Ÿæˆçš„æŠ¥å‘Š</span>
â”‚  â”‚  â”œâ”€ diagnosis_report_2025_01_04.pdf
â”‚  â”‚  â”œâ”€ diagnosis_report_2025_01_04.html
â”‚  â”‚  â””â”€ diagnosis_report_2025_01_04.md
â”‚  â”‚
â”‚  â””â”€ config/
â”‚     â”œâ”€ template_config.yaml           <span class="hljs-comment"># æ¨¡æ¿é…ç½®</span>
â”‚     â””â”€ style_config.yaml              <span class="hljs-comment"># æ ·å¼é…ç½®</span>
â”‚
â””â”€ shared_tools/                        <span class="hljs-comment"># å…±äº«å·¥å…·</span>
   â”œâ”€ log_processor                     <span class="hljs-comment"># æ—¥å¿—å¤„ç†å·¥å…·</span>
   â”œâ”€ data_analyzer                     <span class="hljs-comment"># æ•°æ®åˆ†æå·¥å…·</span>
   â””â”€ report_formatter                  <span class="hljs-comment"># æŠ¥å‘Šæ ¼å¼åŒ–å·¥å…·</span>
</code></pre>
<h3 data-id="heading-6">2.2 Skill Manifestå®šä¹‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># skill_manifest.yaml - Skillå…ƒæ•°æ®</span>

<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">SkillManifest</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">aiops_diagnostics</span>
  <span class="hljs-attr">version:</span> <span class="hljs-string">"1.0.0"</span>
  <span class="hljs-attr">description:</span> <span class="hljs-string">"AIOpsæ•…éšœè¯Šæ–­Skill"</span>
  <span class="hljs-attr">author:</span> <span class="hljs-string">"Platform Team"</span>
  <span class="hljs-attr">lastModified:</span> <span class="hljs-string">"2025-01-04"</span>

<span class="hljs-attr">spec:</span>
  <span class="hljs-comment"># SkillåŸºæœ¬ä¿¡æ¯</span>
  <span class="hljs-attr">skillType:</span> <span class="hljs-string">"diagnostic"</span>  <span class="hljs-comment"># diagnostic / reporting / analysis</span>
  
  <span class="hljs-comment"># æ–‡ä»¶ç³»ç»Ÿéœ€æ±‚</span>
  <span class="hljs-attr">filesystem:</span>
    <span class="hljs-attr">workspaceSize:</span> <span class="hljs-string">"1GB"</span>
    <span class="hljs-attr">persistentDirs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">cache/</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">config/</span>
    <span class="hljs-attr">tempDirs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">reports/</span>
  
  <span class="hljs-comment"># è„šæœ¬å®šä¹‰</span>
  <span class="hljs-attr">scripts:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"cpu_diagnostics"</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">"scripts/cpu_diagnostics.sh"</span>
      <span class="hljs-attr">language:</span> <span class="hljs-string">"bash"</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">"30s"</span>
      <span class="hljs-attr">inputs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"duration"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"integer"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"è¯Šæ–­æ—¶é•¿ï¼ˆç§’ï¼‰"</span>
      <span class="hljs-attr">outputs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"cpu_report"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"json"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"CPUè¯Šæ–­ç»“æœ"</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"log_analysis"</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">"scripts/log_analysis.sh"</span>
      <span class="hljs-attr">language:</span> <span class="hljs-string">"bash"</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">"60s"</span>
      <span class="hljs-attr">inputs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"log_file"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"æ—¥å¿—æ–‡ä»¶è·¯å¾„"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"keywords"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"array"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"å…³é”®è¯åˆ—è¡¨"</span>
      <span class="hljs-attr">outputs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"analysis_result"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"json"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"åˆ†æç»“æœ"</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"correlation_analysis"</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">"scripts/correlation_analysis.py"</span>
      <span class="hljs-attr">language:</span> <span class="hljs-string">"python"</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">"120s"</span>
      <span class="hljs-attr">inputs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"metrics_data"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"json"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"æŒ‡æ ‡æ•°æ®"</span>
      <span class="hljs-attr">outputs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"correlation_report"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"json"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"å…³è”åˆ†ææŠ¥å‘Š"</span>
  
  <span class="hljs-comment"># å·¥å…·ä¾èµ–</span>
  <span class="hljs-attr">tools:</span>
    <span class="hljs-attr">system:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"grep"</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">"*"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"awk"</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">"*"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"sed"</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">"*"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">false</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"tail"</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">"*"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
    
    <span class="hljs-attr">custom:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"log_parser"</span>
        <span class="hljs-attr">path:</span> <span class="hljs-string">"tools/custom/log_parser"</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">"1.0.0"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"metric_aggregator"</span>
        <span class="hljs-attr">path:</span> <span class="hljs-string">"tools/custom/metric_aggregator"</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">"1.0.0"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
  
  <span class="hljs-comment"># ç¯å¢ƒå˜é‡</span>
  <span class="hljs-attr">environment:</span>
    <span class="hljs-attr">JAVA_HOME:</span> <span class="hljs-string">"/usr/lib/jvm/java-17"</span>
    <span class="hljs-attr">LOG_LEVEL:</span> <span class="hljs-string">"INFO"</span>
    <span class="hljs-attr">CACHE_DIR:</span> <span class="hljs-string">"${WORKSPACE}/cache"</span>
    <span class="hljs-attr">REPORT_DIR:</span> <span class="hljs-string">"${WORKSPACE}/reports"</span>
  
  <span class="hljs-comment"># èµ„æºé™åˆ¶</span>
  <span class="hljs-attr">resources:</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"2"</span>           <span class="hljs-comment"># æœ€å¤š2ä¸ªæ ¸å¿ƒ</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"512Mi"</span>     <span class="hljs-comment"># æœ€å¤š512MB</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-string">"300s"</span>     <span class="hljs-comment"># æœ€å¤š5åˆ†é’Ÿ</span>
    <span class="hljs-attr">diskSpace:</span> <span class="hljs-string">"1Gi"</span>    <span class="hljs-comment"># æœ€å¤š1GBç£ç›˜</span>
  
  <span class="hljs-comment"># å®‰å…¨æƒé™</span>
  <span class="hljs-attr">security:</span>
    <span class="hljs-attr">readPaths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"/var/log/"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"/proc/stat"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"/proc/meminfo"</span>
    <span class="hljs-attr">writePaths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${WORKSPACE}/cache/"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${WORKSPACE}/reports/"</span>
    <span class="hljs-attr">networkAccess:</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># ä¸å…è®¸ç½‘ç»œè®¿é—®</span>
    <span class="hljs-attr">executablePaths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"scripts/"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"tools/"</span>
</code></pre>
<hr/>
<h2 data-id="heading-7">3. AIOpsæ•…éšœè¯Šæ–­Skillå®ç°</h2>
<h3 data-id="heading-8">3.1 SkillåŸºç¡€æ¡†æ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * AIOpsæ•…éšœè¯Šæ–­SkillåŸºç±»
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AIOpsDiagnosticSkill</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AgentSkill</span> {
    
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(AIOpsDiagnosticSkill.class);
    
    <span class="hljs-comment">// Runtime Sandboxå®¢æˆ·ç«¯</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> SandboxClient sandboxClient;
    
    <span class="hljs-comment">// Skillæ–‡ä»¶ç³»ç»Ÿ</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> SkillFileSystem fileSystem;
    
    <span class="hljs-comment">// å·¥å…·æ³¨å†Œè¡¨</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> ToolRegistry toolRegistry;
    
    <span class="hljs-comment">// è¯Šæ–­è§„åˆ™</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> DiagnosticRuleEngine ruleEngine;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AIOpsDiagnosticSkill</span><span class="hljs-params">(
            String skillName,
            SandboxClient sandboxClient,
            SkillFileSystem fileSystem,
            ToolRegistry toolRegistry)</span> {
        <span class="hljs-built_in">super</span>(skillName);
        <span class="hljs-built_in">this</span>.sandboxClient = sandboxClient;
        <span class="hljs-built_in">this</span>.fileSystem = fileSystem;
        <span class="hljs-built_in">this</span>.toolRegistry = toolRegistry;
        <span class="hljs-built_in">this</span>.ruleEngine = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiagnosticRuleEngine</span>(<span class="hljs-built_in">this</span>.fileSystem);
    }
    
    <span class="hljs-comment">/**
     * æ‰§è¡Œè¯Šæ–­è„šæœ¬
     */</span>
    <span class="hljs-keyword">protected</span> ExecutionResult <span class="hljs-title function_">executeScript</span><span class="hljs-params">(
            String scriptName,
            Map&lt;String, String&gt; inputs,
            <span class="hljs-type">long</span> timeout)</span> <span class="hljs-keyword">throws</span> Exception {
        
        logger.info(<span class="hljs-string">"æ‰§è¡Œè¯Šæ–­è„šæœ¬: {}"</span>, scriptName);
        
        <span class="hljs-comment">// è·å–è„šæœ¬è·¯å¾„</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">scriptPath</span> <span class="hljs-operator">=</span> fileSystem.getScriptPath(scriptName);
        
        <span class="hljs-comment">// æ„å»ºè„šæœ¬å‘½ä»¤</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">command</span> <span class="hljs-operator">=</span> buildCommand(scriptPath, inputs);
        
        <span class="hljs-comment">// åœ¨Sandboxä¸­æ‰§è¡Œ</span>
        <span class="hljs-type">ExecutionResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> sandboxClient.executeScript(
            getSandboxId(),
            command,
            timeout,
            getEnvironmentVariables()
        );
        
        logger.info(<span class="hljs-string">"è„šæœ¬æ‰§è¡Œå®Œæˆ: exitCode={}, duration={}ms"</span>,
            result.getExitCode(), result.getExecutionTime());
        
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">/**
     * è°ƒç”¨ç³»ç»Ÿå·¥å…·
     */</span>
    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">invokeTool</span><span class="hljs-params">(
            String toolName,
            List&lt;String&gt; args)</span> <span class="hljs-keyword">throws</span> Exception {
        
        logger.debug(<span class="hljs-string">"è°ƒç”¨å·¥å…·: {} with args: {}"</span>, toolName, args);
        
        <span class="hljs-type">ToolDefinition</span> <span class="hljs-variable">tool</span> <span class="hljs-operator">=</span> toolRegistry.getTool(toolName);
        <span class="hljs-keyword">if</span> (tool == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolNotFoundException</span>(toolName);
        }
        
        <span class="hljs-comment">// æ„å»ºå®Œæ•´å‘½ä»¤</span>
        List&lt;String&gt; command = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        command.add(tool.getPath());
        command.addAll(args);
        
        <span class="hljs-comment">// æ‰§è¡Œå‘½ä»¤</span>
        <span class="hljs-type">ExecutionResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> sandboxClient.execute(
            getSandboxId(),
            String.join(<span class="hljs-string">" "</span>, command),
            <span class="hljs-number">30000</span>  <span class="hljs-comment">// 30ç§’è¶…æ—¶</span>
        );
        
        <span class="hljs-keyword">if</span> (result.getExitCode() != <span class="hljs-number">0</span>) {
            logger.error(<span class="hljs-string">"å·¥å…·æ‰§è¡Œå¤±è´¥: {}"</span>, result.getStderr());
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolExecutionException</span>(toolName, result.getStderr());
        }
        
        <span class="hljs-keyword">return</span> result.getStdout();
    }
    
    <span class="hljs-comment">/**
     * è¯»å–æ–‡ä»¶
     */</span>
    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">readFile</span><span class="hljs-params">(String filePath)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">fullPath</span> <span class="hljs-operator">=</span> fileSystem.resolvePath(filePath);
        
        <span class="hljs-comment">// ä½¿ç”¨catå·¥å…·è¯»å–æ–‡ä»¶</span>
        <span class="hljs-keyword">return</span> invokeTool(<span class="hljs-string">"cat"</span>, List.of(fullPath));
    }
    
    <span class="hljs-comment">/**
     * åˆ†ææ—¥å¿—æ–‡ä»¶
     */</span>
    <span class="hljs-keyword">protected</span> LogAnalysisResult <span class="hljs-title function_">analyzeLog</span><span class="hljs-params">(
            String logFilePath,
            List&lt;String&gt; keywords)</span> <span class="hljs-keyword">throws</span> Exception {
        
        logger.info(<span class="hljs-string">"åˆ†ææ—¥å¿—æ–‡ä»¶: {}"</span>, logFilePath);
        
        <span class="hljs-comment">// æ‰§è¡Œæ—¥å¿—åˆ†æè„šæœ¬</span>
        Map&lt;String, String&gt; inputs = Map.of(
            <span class="hljs-string">"log_file"</span>, logFilePath,
            <span class="hljs-string">"keywords"</span>, String.join(<span class="hljs-string">","</span>, keywords)
        );
        
        <span class="hljs-type">ExecutionResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> executeScript(<span class="hljs-string">"log_analysis"</span>, inputs, <span class="hljs-number">60000</span>);
        
        <span class="hljs-comment">// è§£æç»“æœ</span>
        <span class="hljs-keyword">return</span> parseAnalysisResult(result.getStdout());
    }
    
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> String <span class="hljs-title function_">buildCommand</span><span class="hljs-params">(String scriptPath, Map&lt;String, String&gt; inputs)</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> Map&lt;String, String&gt; <span class="hljs-title function_">getEnvironmentVariables</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> String <span class="hljs-title function_">getSandboxId</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> LogAnalysisResult <span class="hljs-title function_">parseAnalysisResult</span><span class="hljs-params">(String output)</span>;
}

<span class="hljs-comment">/**
 * æ‰§è¡Œç»“æœ
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExecutionResult</span> {
    <span class="hljs-keyword">private</span> String sandboxId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> exitCode;
    <span class="hljs-keyword">private</span> String stdout;
    <span class="hljs-keyword">private</span> String stderr;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> executionTime;
    <span class="hljs-keyword">private</span> Map&lt;String, String&gt; metrics;  <span class="hljs-comment">// CPUã€å†…å­˜ç­‰</span>
}

<span class="hljs-comment">/**
 * æ—¥å¿—åˆ†æç»“æœ
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAnalysisResult</span> {
    <span class="hljs-keyword">private</span> List&lt;LogEntry&gt; errorLines;
    <span class="hljs-keyword">private</span> List&lt;LogEntry&gt; warningLines;
    <span class="hljs-keyword">private</span> Map&lt;String, Integer&gt; keywordCounts;
    <span class="hljs-keyword">private</span> String summary;
    <span class="hljs-keyword">private</span> LocalDateTime analysisTime;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LogEntry</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> lineNumber;
    <span class="hljs-keyword">private</span> String timestamp;
    <span class="hljs-keyword">private</span> String level;
    <span class="hljs-keyword">private</span> String message;
    <span class="hljs-keyword">private</span> String context;
}
</code></pre>
<h3 data-id="heading-9">3.2 CPUè¯Šæ–­è„šæœ¬</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># scripts/cpu_diagnostics.sh - CPUè¯Šæ–­è„šæœ¬</span>

<span class="hljs-built_in">set</span> -e

DURATION=<span class="hljs-variable">${1:-30}</span>
OUTPUT_FILE=<span class="hljs-string">"/workspace/reports/cpu_diagnostics_<span class="hljs-subst">$(date +%s)</span>.json"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹CPUè¯Šæ–­ï¼ˆ<span class="hljs-variable">${DURATION}</span>ç§’ï¼‰..."</span>

<span class="hljs-comment"># åˆ›å»ºJSONæŠ¥å‘Š</span>
{
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"{"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  \"timestamp\": \"<span class="hljs-subst">$(date -u +%Y-%m-%dT%H:%M:%SZ)</span>\","</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  \"diagnostics\": {"</span>
    
    <span class="hljs-comment"># 1. è·å–CPUæ ¸å¿ƒæ•°</span>
    CPU_CORES=$(grep -c <span class="hljs-string">"^processor"</span> /proc/cpuinfo)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"cpu_cores\": <span class="hljs-variable">$CPU_CORES</span>,"</span>
    
    <span class="hljs-comment"># 2. è·å–CPUå‹å·</span>
    CPU_MODEL=$(grep <span class="hljs-string">"^model name"</span> /proc/cpuinfo | <span class="hljs-built_in">head</span> -1 | <span class="hljs-built_in">cut</span> -d: -f2 | xargs)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"cpu_model\": \"<span class="hljs-variable">$CPU_MODEL</span>\","</span>
    
    <span class="hljs-comment"># 3. è·å–å½“å‰CPUä½¿ç”¨ç‡</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"current_usage\": {"</span>
    
    <span class="hljs-comment"># ä½¿ç”¨topå‘½ä»¤è·å–å¹³å‡è´Ÿè½½</span>
    IFS=<span class="hljs-string">' '</span> <span class="hljs-built_in">read</span> -r LA1 LA5 LA15 &lt; /proc/loadavg
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"      \"load_average\": {"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"        \"1m\": <span class="hljs-variable">$LA1</span>,"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"        \"5m\": <span class="hljs-variable">$LA5</span>,"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"        \"15m\": <span class="hljs-variable">$LA15</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"      },"</span>
    
    <span class="hljs-comment"># è·å–æ¯ä¸ªCPUæ ¸çš„ä½¿ç”¨ç‡</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"      \"per_cpu\": ["</span>
    
    FIRST=<span class="hljs-literal">true</span>
    <span class="hljs-keyword">while</span> IFS= <span class="hljs-built_in">read</span> -r line; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$line</span> == cpu[0-9]* ]]; <span class="hljs-keyword">then</span>
            <span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$FIRST</span>"</span> = <span class="hljs-literal">false</span> ]; <span class="hljs-keyword">then</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">","</span>; <span class="hljs-keyword">fi</span>
            FIRST=<span class="hljs-literal">false</span>
            
            <span class="hljs-comment"># è§£æCPUç»Ÿè®¡ä¿¡æ¯</span>
            FIELDS=(<span class="hljs-variable">$line</span>)
            USER=<span class="hljs-variable">${FIELDS[1]}</span>
            NICE=<span class="hljs-variable">${FIELDS[2]}</span>
            SYSTEM=<span class="hljs-variable">${FIELDS[3]}</span>
            IDLE=<span class="hljs-variable">${FIELDS[4]}</span>
            
            TOTAL=$((USER + NICE + SYSTEM + IDLE))
            USAGE=$((<span class="hljs-number">100</span> * (TOTAL - IDLE) / TOTAL))
            
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"        {"</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"cpu\": \"<span class="hljs-variable">${FIELDS[0]}</span>\","</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"usage_percent\": <span class="hljs-variable">$USAGE</span>"</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"        }"</span> | <span class="hljs-built_in">tr</span> -d <span class="hljs-string">'\n'</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span> &lt; /proc/stat
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"      ]"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    },"</span>
    
    <span class="hljs-comment"># 4. è¯Šæ–­é«˜CPUä½¿ç”¨çš„è¿›ç¨‹</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"top_processes\": ["</span>
    
    FIRST=<span class="hljs-literal">true</span>
    ps aux --<span class="hljs-built_in">sort</span>=-%cpu | <span class="hljs-built_in">tail</span> -n +2 | <span class="hljs-built_in">head</span> -5 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> -r line; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$FIRST</span>"</span> = <span class="hljs-literal">false</span> ]; <span class="hljs-keyword">then</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">","</span>; <span class="hljs-keyword">fi</span>
        FIRST=<span class="hljs-literal">false</span>
        
        IFS=<span class="hljs-string">' '</span> <span class="hljs-built_in">read</span> -r USER PID PCPU PMEM VSZ RSS TTY STAT START TIME CMD &lt;&lt;&lt; <span class="hljs-string">"<span class="hljs-variable">$line</span>"</span>
        
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"        {"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"pid\": <span class="hljs-variable">$PID</span>,"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"user\": \"<span class="hljs-variable">$USER</span>\","</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"cpu_percent\": <span class="hljs-variable">$PCPU</span>,"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"memory_percent\": <span class="hljs-variable">$PMEM</span>,"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"command\": \"<span class="hljs-subst">$(echo $CMD | cut -d' ' -f1)</span>\""</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"        }"</span> | <span class="hljs-built_in">tr</span> -d <span class="hljs-string">'\n'</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"      ]"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    }"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  },"</span>
    
    <span class="hljs-comment"># 5. è¯Šæ–­å»ºè®®</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  \"recommendations\": ["</span>
    
    <span class="hljs-keyword">if</span> (( $(echo "<span class="hljs-variable">$LA1</span> &gt; <span class="hljs-variable">$CPU_CORES</span>" | bc -l) )); <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"è­¦å‘Šï¼š1åˆ†é’Ÿå¹³å‡è´Ÿè½½é«˜äºCPUæ ¸å¿ƒæ•°ï¼Œç³»ç»Ÿå¯èƒ½è¿‡è½½\","</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-keyword">if</span> (( $(echo "<span class="hljs-variable">$LA5</span> &gt; <span class="hljs-variable">$CPU_CORES</span> * <span class="hljs-number">0.8</span>" | bc -l) )); <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"æç¤ºï¼š5åˆ†é’Ÿå¹³å‡è´Ÿè½½è¾ƒé«˜ï¼Œå»ºè®®æ£€æŸ¥åå°ä»»åŠ¡\","</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"å»ºè®®å®šæœŸç›‘æ§CPUä½¿ç”¨ç‡\""</span> 
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  ]"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"}"</span>
    
} &gt; <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>

<span class="hljs-comment"># è¾“å‡ºç»“æœè·¯å¾„</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯Šæ–­å®Œæˆï¼Œç»“æœä¿å­˜åˆ°: <span class="hljs-variable">$OUTPUT_FILE</span>"</span>
<span class="hljs-built_in">cat</span> <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>
</code></pre>
<h3 data-id="heading-10">3.3 å†…å­˜è¯Šæ–­Skillå®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å†…å­˜è¯Šæ–­Skill
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryDiagnosticSkill</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AIOpsDiagnosticSkill</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(MemoryDiagnosticSkill.class);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MetricAggregator metricAggregator;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MemoryDiagnosticSkill</span><span class="hljs-params">(
            SandboxClient sandboxClient,
            SkillFileSystem fileSystem,
            ToolRegistry toolRegistry)</span> {
        <span class="hljs-built_in">super</span>(<span class="hljs-string">"memory_diagnostic"</span>, sandboxClient, fileSystem, toolRegistry);
        <span class="hljs-built_in">this</span>.metricAggregator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MetricAggregator</span>();
    }
    
    <span class="hljs-comment">/**
     * æ‰§è¡Œå†…å­˜è¯Šæ–­
     */</span>
    <span class="hljs-keyword">public</span> MemoryDiagnosticReport <span class="hljs-title function_">diagnose</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"å¼€å§‹å†…å­˜è¯Šæ–­..."</span>);
        
        MemoryDiagnosticReport.<span class="hljs-type">Builder</span> <span class="hljs-variable">reportBuilder</span> <span class="hljs-operator">=</span> MemoryDiagnosticReport.builder()
            .timestamp(LocalDateTime.now());
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// Step 1: è·å–å†…å­˜ç»Ÿè®¡</span>
            <span class="hljs-type">MemoryStatistics</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> getMemoryStatistics();
            reportBuilder.statistics(stats);
            logger.info(<span class="hljs-string">"å†…å­˜ç»Ÿè®¡: æ€»å†…å­˜={}MB, å·²ç”¨={}MB, å¯ç”¨={}MB"</span>,
                stats.getTotalMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>,
                stats.getUsedMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>,
                stats.getAvailableMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>);
            
            <span class="hljs-comment">// Step 2: åˆ†æå†…å­˜ä½¿ç”¨è¶‹åŠ¿</span>
            List&lt;MemoryMetric&gt; trends = analyzeMemoryTrends();
            reportBuilder.trends(trends);
            
            <span class="hljs-comment">// Step 3: è¯†åˆ«å†…å­˜æ³„æ¼</span>
            <span class="hljs-type">MemoryLeakDetection</span> <span class="hljs-variable">leakDetection</span> <span class="hljs-operator">=</span> detectMemoryLeaks();
            reportBuilder.leakDetection(leakDetection);
            
            <span class="hljs-comment">// Step 4: è¯Šæ–­é«˜å†…å­˜è¿›ç¨‹</span>
            List&lt;ProcessMemoryInfo&gt; topProcesses = getTopMemoryConsumers(<span class="hljs-number">5</span>);
            reportBuilder.topProcesses(topProcesses);
            
            <span class="hljs-comment">// Step 5: ç”Ÿæˆå»ºè®®</span>
            List&lt;String&gt; recommendations = generateRecommendations(stats, leakDetection);
            reportBuilder.recommendations(recommendations);
            
            reportBuilder.status(<span class="hljs-string">"SUCCESS"</span>);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            logger.error(<span class="hljs-string">"å†…å­˜è¯Šæ–­å¤±è´¥"</span>, e);
            reportBuilder.status(<span class="hljs-string">"FAILED"</span>).error(e.getMessage());
        }
        
        <span class="hljs-keyword">return</span> reportBuilder.build();
    }
    
    <span class="hljs-comment">/**
     * è·å–å†…å­˜ç»Ÿè®¡ä¿¡æ¯
     */</span>
    <span class="hljs-keyword">private</span> MemoryStatistics <span class="hljs-title function_">getMemoryStatistics</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// è°ƒç”¨ç³»ç»Ÿå·¥å…·è·å–å†…å­˜ä¿¡æ¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">meminfo</span> <span class="hljs-operator">=</span> readFile(<span class="hljs-string">"/proc/meminfo"</span>);
        
        <span class="hljs-comment">// è§£æ/proc/meminfo</span>
        Map&lt;String, Long&gt; memStats = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        <span class="hljs-keyword">for</span> (String line : meminfo.split(<span class="hljs-string">"\n"</span>)) {
            <span class="hljs-keyword">if</span> (line.trim().isEmpty()) <span class="hljs-keyword">continue</span>;
            
            <span class="hljs-comment">// æ ¼å¼: MemTotal:        16334732 kB</span>
            String[] parts = line.split(<span class="hljs-string">":"</span>);
            <span class="hljs-keyword">if</span> (parts.length == <span class="hljs-number">2</span>) {
                <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> parts[<span class="hljs-number">0</span>].trim();
                <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> parts[<span class="hljs-number">1</span>].trim().split(<span class="hljs-string">"\\s+"</span>)[<span class="hljs-number">0</span>];
                memStats.put(key, Long.parseLong(value) * <span class="hljs-number">1024</span>); <span class="hljs-comment">// è½¬æ¢ä¸ºå­—èŠ‚</span>
            }
        }
        
        <span class="hljs-keyword">return</span> MemoryStatistics.builder()
            .totalMemory(memStats.getOrDefault(<span class="hljs-string">"MemTotal"</span>, <span class="hljs-number">0L</span>))
            .usedMemory(memStats.getOrDefault(<span class="hljs-string">"MemTotal"</span>, <span class="hljs-number">0L</span>) - 
                       memStats.getOrDefault(<span class="hljs-string">"MemAvailable"</span>, <span class="hljs-number">0L</span>))
            .availableMemory(memStats.getOrDefault(<span class="hljs-string">"MemAvailable"</span>, <span class="hljs-number">0L</span>))
            .buffers(memStats.getOrDefault(<span class="hljs-string">"Buffers"</span>, <span class="hljs-number">0L</span>))
            .cached(memStats.getOrDefault(<span class="hljs-string">"Cached"</span>, <span class="hljs-number">0L</span>))
            .swapTotal(memStats.getOrDefault(<span class="hljs-string">"SwapTotal"</span>, <span class="hljs-number">0L</span>))
            .swapUsed(memStats.getOrDefault(<span class="hljs-string">"SwapTotal"</span>, <span class="hljs-number">0L</span>) - 
                     memStats.getOrDefault(<span class="hljs-string">"SwapFree"</span>, <span class="hljs-number">0L</span>))
            .timestamp(LocalDateTime.now())
            .build();
    }
    
    <span class="hljs-comment">/**
     * åˆ†æå†…å­˜ä½¿ç”¨è¶‹åŠ¿
     */</span>
    <span class="hljs-keyword">private</span> List&lt;MemoryMetric&gt; <span class="hljs-title function_">analyzeMemoryTrends</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"åˆ†æå†…å­˜ä½¿ç”¨è¶‹åŠ¿..."</span>);
        
        <span class="hljs-comment">// è·å–ç¼“å­˜ä¸­çš„å†å²æ•°æ®</span>
        <span class="hljs-type">File</span> <span class="hljs-variable">cacheDir</span> <span class="hljs-operator">=</span> fileSystem.getCacheDir();
        List&lt;MemoryMetric&gt; trends = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-comment">// è¯»å–å†å²æŒ‡æ ‡ï¼ˆJSONæ ¼å¼ï¼‰</span>
        File[] cacheFiles = cacheDir.listFiles((dir, name) -&gt; name.startsWith(<span class="hljs-string">"memory_"</span>) &amp;&amp; name.endsWith(<span class="hljs-string">".json"</span>));
        
        <span class="hljs-keyword">if</span> (cacheFiles != <span class="hljs-literal">null</span>) {
            Arrays.sort(cacheFiles, Comparator.comparingLong(File::lastModified));
            
            <span class="hljs-keyword">for</span> (File cacheFile : cacheFiles) {
                <span class="hljs-type">MemoryMetric</span> <span class="hljs-variable">metric</span> <span class="hljs-operator">=</span> parseMemoryMetric(readFile(cacheFile.getAbsolutePath()));
                trends.add(metric);
            }
        }
        
        <span class="hljs-comment">// ä¿å­˜å½“å‰æŒ‡æ ‡åˆ°ç¼“å­˜</span>
        <span class="hljs-type">MemoryMetric</span> <span class="hljs-variable">currentMetric</span> <span class="hljs-operator">=</span> MemoryMetric.builder()
            .timestamp(LocalDateTime.now())
            .memoryUsagePercent(getCurrentMemoryUsagePercent())
            .build();
        
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheFile</span> <span class="hljs-operator">=</span> cacheDir.getAbsolutePath() + <span class="hljs-string">"/memory_"</span> + System.currentTimeMillis() + <span class="hljs-string">".json"</span>;
        saveMetricToCache(cacheFile, currentMetric);
        
        trends.add(currentMetric);
        <span class="hljs-keyword">return</span> trends;
    }
    
    <span class="hljs-comment">/**
     * æ£€æµ‹å†…å­˜æ³„æ¼
     */</span>
    <span class="hljs-keyword">private</span> MemoryLeakDetection <span class="hljs-title function_">detectMemoryLeaks</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"æ£€æµ‹å†…å­˜æ³„æ¼..."</span>);
        
        <span class="hljs-comment">// æ‰§è¡Œè‡ªå®šä¹‰çš„å†…å­˜æ³„æ¼æ£€æµ‹å·¥å…·</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> invokeTool(<span class="hljs-string">"memory_leak_detector"</span>, List.of(
            <span class="hljs-string">"--duration"</span>, <span class="hljs-string">"60"</span>,
            <span class="hljs-string">"--threshold"</span>, <span class="hljs-string">"80"</span>
        ));
        
        <span class="hljs-comment">// è§£æç»“æœ</span>
        <span class="hljs-keyword">return</span> parseLeakDetectionResult(result);
    }
    
    <span class="hljs-comment">/**
     * è·å–å†…å­˜ä½¿ç”¨æœ€é«˜çš„è¿›ç¨‹
     */</span>
    <span class="hljs-keyword">private</span> List&lt;ProcessMemoryInfo&gt; <span class="hljs-title function_">getTopMemoryConsumers</span><span class="hljs-params">(<span class="hljs-type">int</span> topN)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// ä½¿ç”¨grepå’Œawkå¤„ç†psè¾“å‡º</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">psOutput</span> <span class="hljs-operator">=</span> invokeTool(<span class="hljs-string">"ps"</span>, Arrays.asList(
            <span class="hljs-string">"aux"</span>, <span class="hljs-string">"--sort=-rss"</span>
        ));
        
        List&lt;ProcessMemoryInfo&gt; processes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        String[] lines = psOutput.split(<span class="hljs-string">"\n"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; Math.min(lines.length, topN + <span class="hljs-number">1</span>); i++) {
            String[] fields = lines[i].trim().split(<span class="hljs-string">"\\s+"</span>);
            
            <span class="hljs-type">ProcessMemoryInfo</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> ProcessMemoryInfo.builder()
                .pid(Integer.parseInt(fields[<span class="hljs-number">1</span>]))
                .user(fields[<span class="hljs-number">0</span>])
                .memoryPercent(Double.parseDouble(fields[<span class="hljs-number">3</span>]))
                .memoryRss(Long.parseLong(fields[<span class="hljs-number">5</span>]) * <span class="hljs-number">1024</span>) <span class="hljs-comment">// è½¬æ¢ä¸ºå­—èŠ‚</span>
                .command(fields[<span class="hljs-number">10</span>])
                .build();
            
            processes.add(info);
        }
        
        <span class="hljs-keyword">return</span> processes;
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆè¯Šæ–­å»ºè®®
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; <span class="hljs-title function_">generateRecommendations</span><span class="hljs-params">(
            MemoryStatistics stats,
            MemoryLeakDetection leakDetection)</span> {
        
        List&lt;String&gt; recommendations = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-type">double</span> <span class="hljs-variable">usagePercent</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) stats.getUsedMemory() / stats.getTotalMemory() * <span class="hljs-number">100</span>;
        
        <span class="hljs-keyword">if</span> (usagePercent &gt; <span class="hljs-number">90</span>) {
            recommendations.add(<span class="hljs-string">"âš ï¸  ä¸¥é‡è­¦å‘Šï¼šå†…å­˜ä½¿ç”¨ç‡è¶…è¿‡90%ï¼Œç³»ç»Ÿå¯èƒ½é¢ä¸´OOMé£é™©"</span>);
            recommendations.add(<span class="hljs-string">"   å»ºè®®ï¼šç«‹å³é‡Šæ”¾ä¸å¿…è¦çš„å†…å­˜ï¼Œè€ƒè™‘å¢åŠ ç‰©ç†å†…å­˜"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (usagePercent &gt; <span class="hljs-number">80</span>) {
            recommendations.add(<span class="hljs-string">"âš ï¸  è­¦å‘Šï¼šå†…å­˜ä½¿ç”¨ç‡è¶…è¿‡80%ï¼Œæ€§èƒ½å¯èƒ½ä¸‹é™"</span>);
            recommendations.add(<span class="hljs-string">"   å»ºè®®ï¼šç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œè¯†åˆ«å¤§å†…å­˜åº”ç”¨"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (usagePercent &gt; <span class="hljs-number">70</span>) {
            recommendations.add(<span class="hljs-string">"ğŸ“Œ æç¤ºï¼šå†…å­˜ä½¿ç”¨ç‡è¶…è¿‡70%ï¼Œå»ºè®®å®šæœŸæ¸…ç†"</span>);
        }
        
        <span class="hljs-keyword">if</span> (leakDetection.isDetected()) {
            recommendations.add(<span class="hljs-string">"âš ï¸  æ£€æµ‹åˆ°å¯èƒ½çš„å†…å­˜æ³„æ¼ï¼š"</span> + leakDetection.getDescription());
            recommendations.add(<span class="hljs-string">"   å»ºè®®ï¼šåˆ†æç›¸å…³åº”ç”¨çš„æ—¥å¿—å’Œå †è½¬å‚¨"</span>);
        }
        
        <span class="hljs-keyword">if</span> (stats.getSwapUsed() &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-type">double</span> <span class="hljs-variable">swapPercent</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) stats.getSwapUsed() / stats.getSwapTotal() * <span class="hljs-number">100</span>;
            <span class="hljs-keyword">if</span> (swapPercent &gt; <span class="hljs-number">50</span>) {
                recommendations.add(<span class="hljs-string">"âš ï¸  è­¦å‘Šï¼šSwapä½¿ç”¨ç‡è¿‡é«˜ï¼ˆ"</span> + String.format(<span class="hljs-string">"%.1f"</span>, swapPercent) + <span class="hljs-string">"%ï¼‰ï¼Œæ€§èƒ½ä¸¥é‡ä¸‹é™"</span>);
                recommendations.add(<span class="hljs-string">"   å»ºè®®ï¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼æˆ–ä¸åˆç†çš„å†…å­˜å ç”¨"</span>);
            }
        }
        
        recommendations.add(<span class="hljs-string">"ğŸ’¡ å»ºè®®ï¼šå®šæœŸè¿è¡Œå†…å­˜è¯Šæ–­ï¼ŒåŠæ—¶å‘ç°æ½œåœ¨é—®é¢˜"</span>);
        
        <span class="hljs-keyword">return</span> recommendations;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">buildCommand</span><span class="hljs-params">(String scriptPath, Map&lt;String, String&gt; inputs)</span> {
        <span class="hljs-keyword">return</span> scriptPath;  <span class="hljs-comment">// ç›´æ¥æ‰§è¡Œè„šæœ¬</span>
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> Map&lt;String, String&gt; <span class="hljs-title function_">getEnvironmentVariables</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Map.of(
            <span class="hljs-string">"JAVA_HOME"</span>, <span class="hljs-string">"/usr/lib/jvm/java-17"</span>,
            <span class="hljs-string">"LOG_LEVEL"</span>, <span class="hljs-string">"INFO"</span>
        );
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">getSandboxId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"aiops_sandbox_memory"</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> LogAnalysisResult <span class="hljs-title function_">parseAnalysisResult</span><span class="hljs-params">(String output)</span> {
        <span class="hljs-comment">// å®ç°æ—¥å¿—åˆ†æç»“æœè§£æ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•...</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getCurrentMemoryUsagePercent</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">MemoryStatistics</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> getMemoryStatistics();
        <span class="hljs-keyword">return</span> (<span class="hljs-type">double</span>) stats.getUsedMemory() / stats.getTotalMemory() * <span class="hljs-number">100</span>;
    }
    
    <span class="hljs-keyword">private</span> MemoryMetric <span class="hljs-title function_">parseMemoryMetric</span><span class="hljs-params">(String json)</span> {
        <span class="hljs-comment">// è§£æJSONæ ¼å¼çš„å†…å­˜æŒ‡æ ‡</span>
        <span class="hljs-keyword">return</span> MemoryMetric.builder().build();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveMetricToCache</span><span class="hljs-params">(String path, MemoryMetric metric)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// ä¿å­˜æŒ‡æ ‡åˆ°ç¼“å­˜</span>
    }
    
    <span class="hljs-keyword">private</span> MemoryLeakDetection <span class="hljs-title function_">parseLeakDetectionResult</span><span class="hljs-params">(String result)</span> {
        <span class="hljs-keyword">return</span> MemoryLeakDetection.builder()
            .detected(result.contains(<span class="hljs-string">"leak"</span>))
            .description(result)
            .build();
    }
}

<span class="hljs-comment">// æ•°æ®æ¨¡å‹</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryDiagnosticReport</span> {
    <span class="hljs-keyword">private</span> LocalDateTime timestamp;
    <span class="hljs-keyword">private</span> MemoryStatistics statistics;
    <span class="hljs-keyword">private</span> List&lt;MemoryMetric&gt; trends;
    <span class="hljs-keyword">private</span> MemoryLeakDetection leakDetection;
    <span class="hljs-keyword">private</span> List&lt;ProcessMemoryInfo&gt; topProcesses;
    <span class="hljs-keyword">private</span> List&lt;String&gt; recommendations;
    <span class="hljs-keyword">private</span> String status;
    <span class="hljs-keyword">private</span> String error;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryStatistics</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> totalMemory;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> usedMemory;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> availableMemory;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> buffers;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> cached;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> swapTotal;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> swapUsed;
    <span class="hljs-keyword">private</span> LocalDateTime timestamp;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryMetric</span> {
    <span class="hljs-keyword">private</span> LocalDateTime timestamp;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> memoryUsagePercent;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryLeakDetection</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> detected;
    <span class="hljs-keyword">private</span> String description;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProcessMemoryInfo</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> pid;
    <span class="hljs-keyword">private</span> String user;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> memoryPercent;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> memoryRss;
    <span class="hljs-keyword">private</span> String command;
}
</code></pre>
<hr/>
<h2 data-id="heading-11">4. è‡ªå®šä¹‰å·¥å…·çš„å¼€å‘ä¸é›†æˆ</h2>
<h3 data-id="heading-12">4.1 è‡ªå®šä¹‰å·¥å…·æ¡†æ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è‡ªå®šä¹‰å·¥å…·åŸºç±»
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomTool</span> {
    
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(getClass());
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> ToolContext context;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CustomTool</span><span class="hljs-params">(ToolContext context)</span> {
        <span class="hljs-built_in">this</span>.context = context;
    }
    
    <span class="hljs-comment">/**
     * å·¥å…·å…ƒæ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> ToolMetadata <span class="hljs-title function_">getMetadata</span><span class="hljs-params">()</span>;
    
    <span class="hljs-comment">/**
     * æ‰§è¡Œå·¥å…·
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> ToolResult <span class="hljs-title function_">execute</span><span class="hljs-params">(Map&lt;String, String&gt; args)</span> <span class="hljs-keyword">throws</span> Exception;
    
    <span class="hljs-comment">/**
     * å·¥å…·å…ƒæ•°æ®
     */</span>
    <span class="hljs-meta">@Data</span>
    <span class="hljs-meta">@Builder</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolMetadata</span> {
        <span class="hljs-keyword">private</span> String name;
        <span class="hljs-keyword">private</span> String version;
        <span class="hljs-keyword">private</span> String description;
        <span class="hljs-keyword">private</span> List&lt;ParameterSpec&gt; parameters;
        <span class="hljs-keyword">private</span> String outputFormat;  <span class="hljs-comment">// json / text / binary</span>
    }
    
    <span class="hljs-meta">@Data</span>
    <span class="hljs-meta">@Builder</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParameterSpec</span> {
        <span class="hljs-keyword">private</span> String name;
        <span class="hljs-keyword">private</span> String type;  <span class="hljs-comment">// string / int / boolean / array</span>
        <span class="hljs-keyword">private</span> String description;
        <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> required;
        <span class="hljs-keyword">private</span> String defaultValue;
    }
    
    <span class="hljs-meta">@Data</span>
    <span class="hljs-meta">@Builder</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolResult</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> exitCode;
        <span class="hljs-keyword">private</span> String output;
        <span class="hljs-keyword">private</span> String error;
        <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; metrics;  <span class="hljs-comment">// æ‰§è¡ŒæŒ‡æ ‡</span>
    }
}

<span class="hljs-comment">/**
 * å·¥å…·ä¸Šä¸‹æ–‡
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolContext</span> {
    <span class="hljs-keyword">private</span> String toolId;
    <span class="hljs-keyword">private</span> String sandboxId;
    <span class="hljs-keyword">private</span> File workspaceRoot;
    <span class="hljs-keyword">private</span> Map&lt;String, String&gt; environment;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> timeout;
}

<span class="hljs-comment">/**
 * æ—¥å¿—è§£æå·¥å…·
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogParserTool</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CustomTool</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LogParserTool</span><span class="hljs-params">(ToolContext context)</span> {
        <span class="hljs-built_in">super</span>(context);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ToolMetadata <span class="hljs-title function_">getMetadata</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> ToolMetadata.builder()
            .name(<span class="hljs-string">"log_parser"</span>)
            .version(<span class="hljs-string">"1.0.0"</span>)
            .description(<span class="hljs-string">"é«˜æ€§èƒ½æ—¥å¿—è§£æå’Œåˆ†æå·¥å…·"</span>)
            .parameters(Arrays.asList(
                ParameterSpec.builder()
                    .name(<span class="hljs-string">"log_file"</span>)
                    .type(<span class="hljs-string">"string"</span>)
                    .description(<span class="hljs-string">"æ—¥å¿—æ–‡ä»¶è·¯å¾„"</span>)
                    .required(<span class="hljs-literal">true</span>)
                    .build(),
                ParameterSpec.builder()
                    .name(<span class="hljs-string">"pattern"</span>)
                    .type(<span class="hljs-string">"string"</span>)
                    .description(<span class="hljs-string">"åŒ¹é…æ¨¡å¼ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰"</span>)
                    .required(<span class="hljs-literal">false</span>)
                    .build(),
                ParameterSpec.builder()
                    .name(<span class="hljs-string">"level"</span>)
                    .type(<span class="hljs-string">"string"</span>)
                    .description(<span class="hljs-string">"æ—¥å¿—çº§åˆ«ï¼ˆERROR/WARN/INFOï¼‰"</span>)
                    .required(<span class="hljs-literal">false</span>)
                    .defaultValue(<span class="hljs-string">"*"</span>)
                    .build(),
                ParameterSpec.builder()
                    .name(<span class="hljs-string">"max_lines"</span>)
                    .type(<span class="hljs-string">"int"</span>)
                    .description(<span class="hljs-string">"æœ€å¤šè¿”å›è¡Œæ•°"</span>)
                    .required(<span class="hljs-literal">false</span>)
                    .defaultValue(<span class="hljs-string">"1000"</span>)
                    .build()
            ))
            .outputFormat(<span class="hljs-string">"json"</span>)
            .build();
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ToolResult <span class="hljs-title function_">execute</span><span class="hljs-params">(Map&lt;String, String&gt; args)</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"æ‰§è¡Œæ—¥å¿—è§£æ: file={}"</span>, args.get(<span class="hljs-string">"log_file"</span>));
        
        <span class="hljs-type">String</span> <span class="hljs-variable">logFile</span> <span class="hljs-operator">=</span> args.get(<span class="hljs-string">"log_file"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> args.getOrDefault(<span class="hljs-string">"pattern"</span>, <span class="hljs-string">".*"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">level</span> <span class="hljs-operator">=</span> args.getOrDefault(<span class="hljs-string">"level"</span>, <span class="hljs-string">"*"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">maxLines</span> <span class="hljs-operator">=</span> Integer.parseInt(args.getOrDefault(<span class="hljs-string">"max_lines"</span>, <span class="hljs-string">"1000"</span>));
        
        <span class="hljs-comment">// è¯»å–æ—¥å¿—æ–‡ä»¶</span>
        List&lt;String&gt; lines = readLogFile(logFile);
        
        <span class="hljs-comment">// è§£ææ—¥å¿—</span>
        List&lt;LogEntry&gt; entries = parseLogLines(lines, pattern, level, maxLines);
        
        <span class="hljs-comment">// ç»Ÿè®¡ä¿¡æ¯</span>
        Map&lt;String, Integer&gt; statistics = computeStatistics(entries);
        
        <span class="hljs-comment">// ç”ŸæˆJSONè¾“å‡º</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">output</span> <span class="hljs-operator">=</span> generateJsonOutput(entries, statistics);
        
        <span class="hljs-keyword">return</span> ToolResult.builder()
            .exitCode(<span class="hljs-number">0</span>)
            .output(output)
            .metrics(Map.of(<span class="hljs-string">"lines_processed"</span>, lines.size(), <span class="hljs-string">"entries_matched"</span>, entries.size()))
            .build();
    }
    
    <span class="hljs-keyword">private</span> List&lt;String&gt; <span class="hljs-title function_">readLogFile</span><span class="hljs-params">(String filePath)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">Path</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> Paths.get(filePath);
        <span class="hljs-keyword">return</span> Files.readAllLines(path);
    }
    
    <span class="hljs-keyword">private</span> List&lt;LogEntry&gt; <span class="hljs-title function_">parseLogLines</span><span class="hljs-params">(
            List&lt;String&gt; lines,
            String pattern,
            String level,
            <span class="hljs-type">int</span> maxLines)</span> <span class="hljs-keyword">throws</span> Exception {
        
        List&lt;LogEntry&gt; entries = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-type">Pattern</span> <span class="hljs-variable">regex</span> <span class="hljs-operator">=</span> Pattern.compile(pattern);
        
        <span class="hljs-keyword">for</span> (String line : lines) {
            <span class="hljs-keyword">if</span> (entries.size() &gt;= maxLines) <span class="hljs-keyword">break</span>;
            
            <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> regex.matcher(line);
            <span class="hljs-keyword">if</span> (matcher.find()) {
                <span class="hljs-comment">// è§£ææ—¥å¿—æ ¼å¼ï¼ˆæ”¯æŒå¸¸è§æ ¼å¼ï¼‰</span>
                <span class="hljs-type">LogEntry</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span> parseSingleLogEntry(line);
                
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"*"</span>.equals(level) || line.contains(level)) {
                    entries.add(entry);
                }
            }
        }
        
        <span class="hljs-keyword">return</span> entries;
    }
    
    <span class="hljs-keyword">private</span> LogEntry <span class="hljs-title function_">parseSingleLogEntry</span><span class="hljs-params">(String line)</span> {
        <span class="hljs-comment">// ç®€å•çš„æ—¥å¿—è§£æå®ç°</span>
        <span class="hljs-comment">// æ”¯æŒæ ¼å¼: [2025-01-04 10:30:45] ERROR [com.example.Service] Message</span>
        
        String[] parts = line.split(<span class="hljs-string">"\\]"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> parts.length &gt; <span class="hljs-number">0</span> ? parts[<span class="hljs-number">0</span>].substring(<span class="hljs-number">1</span>) : <span class="hljs-string">""</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">levelAndMessage</span> <span class="hljs-operator">=</span> parts.length &gt; <span class="hljs-number">1</span> ? parts[<span class="hljs-number">1</span>].trim() : <span class="hljs-string">""</span>;
        
        <span class="hljs-keyword">return</span> LogEntry.builder()
            .timestamp(timestamp)
            .message(levelAndMessage)
            .build();
    }
    
    <span class="hljs-keyword">private</span> Map&lt;String, Integer&gt; <span class="hljs-title function_">computeStatistics</span><span class="hljs-params">(List&lt;LogEntry&gt; entries)</span> {
        Map&lt;String, Integer&gt; stats = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        stats.put(<span class="hljs-string">"total_entries"</span>, entries.size());
        
        <span class="hljs-comment">// ç»Ÿè®¡å„çº§åˆ«æ—¥å¿—</span>
        entries.stream()
            .filter(e -&gt; e.getMessage().contains(<span class="hljs-string">"ERROR"</span>))
            .count();
        
        <span class="hljs-keyword">return</span> stats;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">generateJsonOutput</span><span class="hljs-params">(List&lt;LogEntry&gt; entries, Map&lt;String, Integer&gt; stats)</span> {
        <span class="hljs-comment">// è¿”å›JSONæ ¼å¼çš„åˆ†æç»“æœ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>().writeValueAsString(Map.of(
            <span class="hljs-string">"entries"</span>, entries,
            <span class="hljs-string">"statistics"</span>, stats
        ));
    }
}

<span class="hljs-comment">/**
 * æŒ‡æ ‡èšåˆå·¥å…·
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetricAggregatorTool</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CustomTool</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MetricAggregatorTool</span><span class="hljs-params">(ToolContext context)</span> {
        <span class="hljs-built_in">super</span>(context);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ToolMetadata <span class="hljs-title function_">getMetadata</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> ToolMetadata.builder()
            .name(<span class="hljs-string">"metric_aggregator"</span>)
            .version(<span class="hljs-string">"1.0.0"</span>)
            .description(<span class="hljs-string">"ç³»ç»ŸæŒ‡æ ‡èšåˆå’Œç»Ÿè®¡å·¥å…·"</span>)
            .parameters(Arrays.asList(
                ParameterSpec.builder()
                    .name(<span class="hljs-string">"metric_file"</span>)
                    .type(<span class="hljs-string">"string"</span>)
                    .description(<span class="hljs-string">"æŒ‡æ ‡æ–‡ä»¶è·¯å¾„"</span>)
                    .required(<span class="hljs-literal">true</span>)
                    .build(),
                ParameterSpec.builder()
                    .name(<span class="hljs-string">"aggregate_type"</span>)
                    .type(<span class="hljs-string">"string"</span>)
                    .description(<span class="hljs-string">"èšåˆç±»å‹ï¼ˆsum/avg/min/max/percentileï¼‰"</span>)
                    .required(<span class="hljs-literal">true</span>)
                    .build()
            ))
            .outputFormat(<span class="hljs-string">"json"</span>)
            .build();
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ToolResult <span class="hljs-title function_">execute</span><span class="hljs-params">(Map&lt;String, String&gt; args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">metricFile</span> <span class="hljs-operator">=</span> args.get(<span class="hljs-string">"metric_file"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">aggregateType</span> <span class="hljs-operator">=</span> args.get(<span class="hljs-string">"aggregate_type"</span>);
        
        logger.info(<span class="hljs-string">"èšåˆæŒ‡æ ‡: file={}, type={}"</span>, metricFile, aggregateType);
        
        <span class="hljs-comment">// è¯»å–æŒ‡æ ‡æ–‡ä»¶</span>
        List&lt;Double&gt; metrics = readMetricFile(metricFile);
        
        <span class="hljs-comment">// æ‰§è¡Œèšåˆ</span>
        Map&lt;String, Double&gt; result = aggregate(metrics, aggregateType);
        
        <span class="hljs-type">String</span> <span class="hljs-variable">output</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>().writeValueAsString(result);
        
        <span class="hljs-keyword">return</span> ToolResult.builder()
            .exitCode(<span class="hljs-number">0</span>)
            .output(output)
            .metrics(Map.of(<span class="hljs-string">"metrics_count"</span>, metrics.size()))
            .build();
    }
    
    <span class="hljs-keyword">private</span> List&lt;Double&gt; <span class="hljs-title function_">readMetricFile</span><span class="hljs-params">(String filePath)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// è¯»å–æŒ‡æ ‡æ–‡ä»¶</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    }
    
    <span class="hljs-keyword">private</span> Map&lt;String, Double&gt; <span class="hljs-title function_">aggregate</span><span class="hljs-params">(List&lt;Double&gt; metrics, String type)</span> {
        Map&lt;String, Double&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"sum"</span>.equals(type)) {
            result.put(<span class="hljs-string">"sum"</span>, metrics.stream().mapToDouble(Double::doubleValue).sum());
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"avg"</span>.equals(type)) {
            result.put(<span class="hljs-string">"average"</span>, metrics.stream().mapToDouble(Double::doubleValue).average().orElse(<span class="hljs-number">0</span>));
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"min"</span>.equals(type)) {
            result.put(<span class="hljs-string">"min"</span>, metrics.stream().mapToDouble(Double::doubleValue).min().orElse(<span class="hljs-number">0</span>));
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"max"</span>.equals(type)) {
            result.put(<span class="hljs-string">"max"</span>, metrics.stream().mapToDouble(Double::doubleValue).max().orElse(<span class="hljs-number">0</span>));
        }
        
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<h3 data-id="heading-13">4.2 å·¥å…·æ³¨å†Œå’Œç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å·¥å…·æ³¨å†Œè¡¨å’Œç®¡ç†å™¨
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolRegistry</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, ToolDefinition&gt; systemTools = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, CustomTool&gt; customTools = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ToolRegistry</span><span class="hljs-params">()</span> {
        initializeSystemTools();
    }
    
    <span class="hljs-comment">/**
     * åˆå§‹åŒ–ç³»ç»Ÿå·¥å…·
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initializeSystemTools</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ³¨å†Œgrep</span>
        registerSystemTool(ToolDefinition.builder()
            .name(<span class="hljs-string">"grep"</span>)
            .path(<span class="hljs-string">"/bin/grep"</span>)
            .type(<span class="hljs-string">"system"</span>)
            .version(<span class="hljs-string">"2.28"</span>)
            .description(<span class="hljs-string">"æ–‡æœ¬æœç´¢å·¥å…·"</span>)
            .build());
        
        <span class="hljs-comment">// æ³¨å†Œcat</span>
        registerSystemTool(ToolDefinition.builder()
            .name(<span class="hljs-string">"cat"</span>)
            .path(<span class="hljs-string">"/bin/cat"</span>)
            .type(<span class="hljs-string">"system"</span>)
            .version(<span class="hljs-string">"8.32"</span>)
            .description(<span class="hljs-string">"æ–‡ä»¶æŸ¥çœ‹å·¥å…·"</span>)
            .build());
        
        <span class="hljs-comment">// æ³¨å†Œawk</span>
        registerSystemTool(ToolDefinition.builder()
            .name(<span class="hljs-string">"awk"</span>)
            .path(<span class="hljs-string">"/usr/bin/awk"</span>)
            .type(<span class="hljs-string">"system"</span>)
            .version(<span class="hljs-string">"5.1.0"</span>)
            .description(<span class="hljs-string">"æ–‡æœ¬å¤„ç†å·¥å…·"</span>)
            .build());
        
        <span class="hljs-comment">// æ³¨å†Œsed</span>
        registerSystemTool(ToolDefinition.builder()
            .name(<span class="hljs-string">"sed"</span>)
            .path(<span class="hljs-string">"/bin/sed"</span>)
            .type(<span class="hljs-string">"system"</span>)
            .version(<span class="hljs-string">"4.7"</span>)
            .description(<span class="hljs-string">"æµç¼–è¾‘å™¨"</span>)
            .build());
        
        <span class="hljs-comment">// æ³¨å†Œtail</span>
        registerSystemTool(ToolDefinition.builder()
            .name(<span class="hljs-string">"tail"</span>)
            .path(<span class="hljs-string">"/usr/bin/tail"</span>)
            .type(<span class="hljs-string">"system"</span>)
            .version(<span class="hljs-string">"8.32"</span>)
            .description(<span class="hljs-string">"æŸ¥çœ‹æ–‡ä»¶æœ«å°¾"</span>)
            .build());
        
        <span class="hljs-comment">// æ³¨å†Œps</span>
        registerSystemTool(ToolDefinition.builder()
            .name(<span class="hljs-string">"ps"</span>)
            .path(<span class="hljs-string">"/bin/ps"</span>)
            .type(<span class="hljs-string">"system"</span>)
            .version(<span class="hljs-string">"3.3.17"</span>)
            .description(<span class="hljs-string">"è¿›ç¨‹ä¿¡æ¯æŸ¥çœ‹"</span>)
            .build());
    }
    
    <span class="hljs-comment">/**
     * æ³¨å†Œç³»ç»Ÿå·¥å…·
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerSystemTool</span><span class="hljs-params">(ToolDefinition toolDef)</span> {
        systemTools.put(toolDef.getName(), toolDef);
        logger.info(<span class="hljs-string">"å·²æ³¨å†Œç³»ç»Ÿå·¥å…·: {} ({})"</span>, toolDef.getName(), toolDef.getPath());
    }
    
    <span class="hljs-comment">/**
     * æ³¨å†Œè‡ªå®šä¹‰å·¥å…·
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerCustomTool</span><span class="hljs-params">(String name, CustomTool tool)</span> {
        customTools.put(name, tool);
        <span class="hljs-type">ToolMetadata</span> <span class="hljs-variable">metadata</span> <span class="hljs-operator">=</span> tool.getMetadata();
        logger.info(<span class="hljs-string">"å·²æ³¨å†Œè‡ªå®šä¹‰å·¥å…·: {} v{}"</span>, metadata.getName(), metadata.getVersion());
    }
    
    <span class="hljs-comment">/**
     * è·å–å·¥å…·
     */</span>
    <span class="hljs-keyword">public</span> ToolDefinition <span class="hljs-title function_">getTool</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">return</span> systemTools.get(name);
    }
    
    <span class="hljs-comment">/**
     * è·å–è‡ªå®šä¹‰å·¥å…·
     */</span>
    <span class="hljs-keyword">public</span> CustomTool <span class="hljs-title function_">getCustomTool</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">return</span> customTools.get(name);
    }
    
    <span class="hljs-comment">/**
     * éªŒè¯å·¥å…·æ˜¯å¦å­˜åœ¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasTool</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">return</span> systemTools.containsKey(name) || customTools.containsKey(name);
    }
    
    <span class="hljs-comment">/**
     * åˆ—å‡ºæ‰€æœ‰å·¥å…·
     */</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">listAllTools</span><span class="hljs-params">()</span> {
        List&lt;String&gt; tools = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        tools.addAll(systemTools.keySet());
        tools.addAll(customTools.keySet());
        <span class="hljs-keyword">return</span> tools;
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolDefinition</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String path;
    <span class="hljs-keyword">private</span> String type;  <span class="hljs-comment">// system / custom</span>
    <span class="hljs-keyword">private</span> String version;
    <span class="hljs-keyword">private</span> String description;
}
</code></pre>
<hr/>
<h2 data-id="heading-14">5. æŠ¥å‘Šç”ŸæˆSkill</h2>
<h3 data-id="heading-15">5.1 æŠ¥å‘Šæ¨¡æ¿ç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æŠ¥å‘Šæ¨¡æ¿ç³»ç»Ÿ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReportTemplateEngine</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SkillFileSystem fileSystem;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TemplateResolver resolver;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ReportTemplateEngine</span><span class="hljs-params">(SkillFileSystem fileSystem)</span> {
        <span class="hljs-built_in">this</span>.fileSystem = fileSystem;
        <span class="hljs-built_in">this</span>.resolver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TemplateResolver</span>();
    }
    
    <span class="hljs-comment">/**
     * ç”ŸæˆæŠ¥å‘Š
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateReport</span><span class="hljs-params">(
            String templateName,
            Map&lt;String, Object&gt; data,
            ReportFormat format)</span> <span class="hljs-keyword">throws</span> Exception {
        
        logger.info(<span class="hljs-string">"ç”ŸæˆæŠ¥å‘Š: template={}, format={}"</span>, templateName, format);
        
        <span class="hljs-comment">// åŠ è½½æ¨¡æ¿</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">templateContent</span> <span class="hljs-operator">=</span> loadTemplate(templateName);
        
        <span class="hljs-comment">// æ¸²æŸ“æ¨¡æ¿</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">renderedContent</span> <span class="hljs-operator">=</span> renderTemplate(templateContent, data);
        
        <span class="hljs-comment">// è½¬æ¢æ ¼å¼</span>
        <span class="hljs-keyword">return</span> convertFormat(renderedContent, format);
    }
    
    <span class="hljs-comment">/**
     * åŠ è½½æ¨¡æ¿
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">loadTemplate</span><span class="hljs-params">(String templateName)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">File</span> <span class="hljs-variable">templateFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(
            fileSystem.getTemplateDir(),
            templateName + <span class="hljs-string">".md"</span>
        );
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(Files.readAllBytes(templateFile.toPath()));
    }
    
    <span class="hljs-comment">/**
     * æ¸²æŸ“æ¨¡æ¿
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">renderTemplate</span><span class="hljs-params">(String template, Map&lt;String, Object&gt; data)</span> {
        <span class="hljs-comment">// ä½¿ç”¨Freemarkeræˆ–Velocityè¿›è¡Œæ¨¡æ¿æ¸²æŸ“</span>
        <span class="hljs-comment">// è¿™é‡Œç®€åŒ–ä¸ºç®€å•çš„å­—ç¬¦ä¸²æ›¿æ¢</span>
        
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> template;
        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : data.entrySet()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">placeholder</span> <span class="hljs-operator">=</span> <span class="hljs-string">"${"</span> + entry.getKey() + <span class="hljs-string">"}"</span>;
            result = result.replace(placeholder, String.valueOf(entry.getValue()));
        }
        
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">/**
     * æ ¼å¼è½¬æ¢
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">convertFormat</span><span class="hljs-params">(String content, ReportFormat format)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">switch</span> (format) {
            <span class="hljs-keyword">case</span> MARKDOWN:
                <span class="hljs-keyword">return</span> content;
            <span class="hljs-keyword">case</span> HTML:
                <span class="hljs-keyword">return</span> convertMarkdownToHtml(content);
            <span class="hljs-keyword">case</span> PDF:
                <span class="hljs-keyword">return</span> convertMarkdownToPdf(content);
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> content;
        }
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">convertMarkdownToHtml</span><span class="hljs-params">(String markdown)</span> {
        <span class="hljs-comment">// ä½¿ç”¨commonmarkåº“è¿›è¡Œè½¬æ¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;html&gt;&lt;body&gt;"</span> + markdown + <span class="hljs-string">"&lt;/body&gt;&lt;/html&gt;"</span>;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">convertMarkdownToPdf</span><span class="hljs-params">(String markdown)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// ä½¿ç”¨iTextæˆ–wkhtmltopdfè¿›è¡Œè½¬æ¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"PDFå†…å®¹"</span>;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ReportFormat</span> {
    MARKDOWN,
    HTML,
    PDF
}
</code></pre>
<h3 data-id="heading-16">5.2 è¯Šæ–­æŠ¥å‘Šç”ŸæˆSkill</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è¯Šæ–­æŠ¥å‘Šç”ŸæˆSkill
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DiagnosticReportGenerationSkill</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AgentSkill</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(DiagnosticReportGenerationSkill.class);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ReportTemplateEngine templateEngine;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MemoryDiagnosticSkill memoryDiagnosticSkill;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SkillFileSystem fileSystem;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DiagnosticReportGenerationSkill</span><span class="hljs-params">(
            ReportTemplateEngine templateEngine,
            MemoryDiagnosticSkill memoryDiagnosticSkill,
            SkillFileSystem fileSystem)</span> {
        <span class="hljs-built_in">super</span>(<span class="hljs-string">"diagnostic_report_generation"</span>);
        <span class="hljs-built_in">this</span>.templateEngine = templateEngine;
        <span class="hljs-built_in">this</span>.memoryDiagnosticSkill = memoryDiagnosticSkill;
        <span class="hljs-built_in">this</span>.fileSystem = fileSystem;
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆå®Œæ•´çš„è¯Šæ–­æŠ¥å‘Š
     */</span>
    <span class="hljs-keyword">public</span> DiagnosticReport <span class="hljs-title function_">generateFullReport</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š..."</span>);
        
        DiagnosticReport.<span class="hljs-type">Builder</span> <span class="hljs-variable">reportBuilder</span> <span class="hljs-operator">=</span> DiagnosticReport.builder()
            .timestamp(LocalDateTime.now())
            .version(<span class="hljs-string">"1.0"</span>);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// Step 1: æ‰§è¡Œè¯Šæ–­</span>
            <span class="hljs-type">MemoryDiagnosticReport</span> <span class="hljs-variable">memoryReport</span> <span class="hljs-operator">=</span> memoryDiagnosticSkill.diagnose();
            reportBuilder.memoryReport(memoryReport);
            
            <span class="hljs-comment">// Step 2: å‡†å¤‡æŠ¥å‘Šæ•°æ®</span>
            Map&lt;String, Object&gt; reportData = prepareReportData(memoryReport);
            
            <span class="hljs-comment">// Step 3: ç”ŸæˆMarkdownæŠ¥å‘Š</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">markdownContent</span> <span class="hljs-operator">=</span> templateEngine.generateReport(
                <span class="hljs-string">"diagnostic_template"</span>,
                reportData,
                ReportFormat.MARKDOWN
            );
            reportBuilder.markdownContent(markdownContent);
            
            <span class="hljs-comment">// Step 4: è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">htmlContent</span> <span class="hljs-operator">=</span> templateEngine.generateReport(
                <span class="hljs-string">"diagnostic_template"</span>,
                reportData,
                ReportFormat.HTML
            );
            reportBuilder.htmlContent(htmlContent);
            
            <span class="hljs-comment">// Step 5: ä¿å­˜æŠ¥å‘Šæ–‡ä»¶</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">reportPath</span> <span class="hljs-operator">=</span> saveReport(markdownContent, htmlContent);
            reportBuilder.reportPath(reportPath);
            
            reportBuilder.status(<span class="hljs-string">"SUCCESS"</span>);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            logger.error(<span class="hljs-string">"æŠ¥å‘Šç”Ÿæˆå¤±è´¥"</span>, e);
            reportBuilder.status(<span class="hljs-string">"FAILED"</span>).error(e.getMessage());
        }
        
        <span class="hljs-keyword">return</span> reportBuilder.build();
    }
    
    <span class="hljs-comment">/**
     * å‡†å¤‡æŠ¥å‘Šæ•°æ®
     */</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; <span class="hljs-title function_">prepareReportData</span><span class="hljs-params">(MemoryDiagnosticReport memoryReport)</span> {
        Map&lt;String, Object&gt; data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-comment">// æ‰§è¡Œæ‘˜è¦</span>
        data.put(<span class="hljs-string">"report_title"</span>, <span class="hljs-string">"AIOpsè¯Šæ–­æŠ¥å‘Š"</span>);
        data.put(<span class="hljs-string">"report_date"</span>, LocalDate.now().format(DateTimeFormatter.ISO_DATE));
        data.put(<span class="hljs-string">"report_time"</span>, LocalTime.now().format(DateTimeFormatter.ofPattern(<span class="hljs-string">"HH:mm:ss"</span>)));
        
        <span class="hljs-comment">// å†…å­˜è¯Šæ–­ç»“æœ</span>
        <span class="hljs-type">MemoryStatistics</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> memoryReport.getStatistics();
        data.put(<span class="hljs-string">"total_memory"</span>, formatBytes(stats.getTotalMemory()));
        data.put(<span class="hljs-string">"used_memory"</span>, formatBytes(stats.getUsedMemory()));
        data.put(<span class="hljs-string">"memory_usage_percent"</span>, String.format(<span class="hljs-string">"%.1f%%"</span>, 
            (<span class="hljs-type">double</span>) stats.getUsedMemory() / stats.getTotalMemory() * <span class="hljs-number">100</span>));
        
        <span class="hljs-comment">// è¯Šæ–­å»ºè®®</span>
        data.put(<span class="hljs-string">"recommendations"</span>, memoryReport.getRecommendations());
        
        <span class="hljs-comment">// è¿›ç¨‹ä¿¡æ¯</span>
        List&lt;Map&lt;String, Object&gt;&gt; processesData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">for</span> (ProcessMemoryInfo proc : memoryReport.getTopProcesses()) {
            Map&lt;String, Object&gt; procData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            procData.put(<span class="hljs-string">"pid"</span>, proc.getPid());
            procData.put(<span class="hljs-string">"user"</span>, proc.getUser());
            procData.put(<span class="hljs-string">"memory"</span>, formatBytes(proc.getMemoryRss()));
            procData.put(<span class="hljs-string">"command"</span>, proc.getCommand());
            processesData.add(procData);
        }
        data.put(<span class="hljs-string">"top_processes"</span>, processesData);
        
        <span class="hljs-keyword">return</span> data;
    }
    
    <span class="hljs-comment">/**
     * ä¿å­˜æŠ¥å‘Šæ–‡ä»¶
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">saveReport</span><span class="hljs-params">(String markdownContent, String htmlContent)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> LocalDateTime.now().format(DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyyMMdd_HHmmss"</span>));
        <span class="hljs-type">String</span> <span class="hljs-variable">filename</span> <span class="hljs-operator">=</span> <span class="hljs-string">"diagnostic_report_"</span> + timestamp;
        
        <span class="hljs-type">File</span> <span class="hljs-variable">reportsDir</span> <span class="hljs-operator">=</span> fileSystem.getOutputDir();
        
        <span class="hljs-comment">// ä¿å­˜Markdown</span>
        Files.write(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(reportsDir, filename + <span class="hljs-string">".md"</span>).toPath(),
            markdownContent.getBytes(StandardCharsets.UTF_8)
        );
        
        <span class="hljs-comment">// ä¿å­˜HTML</span>
        Files.write(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(reportsDir, filename + <span class="hljs-string">".html"</span>).toPath(),
            htmlContent.getBytes(StandardCharsets.UTF_8)
        );
        
        logger.info(<span class="hljs-string">"æŠ¥å‘Šå·²ä¿å­˜: {}"</span>, reportsDir.getAbsolutePath());
        
        <span class="hljs-keyword">return</span> reportsDir.getAbsolutePath() + <span class="hljs-string">"/"</span> + filename;
    }
    
    <span class="hljs-comment">/**
     * æ ¼å¼åŒ–å­—èŠ‚å¤§å°
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">formatBytes</span><span class="hljs-params">(<span class="hljs-type">long</span> bytes)</span> {
        <span class="hljs-keyword">if</span> (bytes &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"0 B"</span>;
        <span class="hljs-keyword">final</span> String[] units = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">"B"</span>, <span class="hljs-string">"KB"</span>, <span class="hljs-string">"MB"</span>, <span class="hljs-string">"GB"</span>, <span class="hljs-string">"TB"</span>};
        <span class="hljs-type">int</span> <span class="hljs-variable">digitGroups</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (Math.log10(bytes) / Math.log10(<span class="hljs-number">1024</span>));
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%.1f %s"</span>, bytes / Math.pow(<span class="hljs-number">1024</span>, digitGroups), units[digitGroups]);
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DiagnosticReport</span> {
    <span class="hljs-keyword">private</span> LocalDateTime timestamp;
    <span class="hljs-keyword">private</span> String version;
    <span class="hljs-keyword">private</span> MemoryDiagnosticReport memoryReport;
    <span class="hljs-keyword">private</span> String markdownContent;
    <span class="hljs-keyword">private</span> String htmlContent;
    <span class="hljs-keyword">private</span> String reportPath;
    <span class="hljs-keyword">private</span> String status;
    <span class="hljs-keyword">private</span> String error;
}
</code></pre>
<hr/>
<h2 data-id="heading-17">6. AIOpsè¯Šæ–­å’ŒæŠ¥å‘Šç”Ÿæˆçš„é›†æˆç¤ºä¾‹</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * AIOpsè¯Šæ–­å’ŒæŠ¥å‘Šç”Ÿæˆçš„é›†æˆ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AIOpsDiagnosticSystem</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(AIOpsDiagnosticSystem.class);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SandboxClient sandboxClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SkillFileSystem fileSystem;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ToolRegistry toolRegistry;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MemoryDiagnosticSkill memoryDiagnosticSkill;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DiagnosticReportGenerationSkill reportGenerationSkill;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AIOpsDiagnosticSystem</span><span class="hljs-params">(String runtimeServerHost, <span class="hljs-type">int</span> runtimeServerPort)</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"åˆå§‹åŒ–AIOpsè¯Šæ–­ç³»ç»Ÿ..."</span>);
        
        <span class="hljs-comment">// åˆå§‹åŒ–Sandboxå®¢æˆ·ç«¯</span>
        <span class="hljs-built_in">this</span>.sandboxClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SandboxClient</span>(runtimeServerHost, runtimeServerPort);
        
        <span class="hljs-comment">// åˆå§‹åŒ–æ–‡ä»¶ç³»ç»Ÿ</span>
        <span class="hljs-built_in">this</span>.fileSystem = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillFileSystem</span>(<span class="hljs-string">"/tmp/skill_workspace"</span>);
        fileSystem.initializeSkillDirs(<span class="hljs-string">"aiops_diagnostics"</span>, <span class="hljs-string">"diagnostic_reporting"</span>);
        
        <span class="hljs-comment">// åˆå§‹åŒ–å·¥å…·æ³¨å†Œè¡¨</span>
        <span class="hljs-built_in">this</span>.toolRegistry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolRegistry</span>();
        registerCustomTools();
        
        <span class="hljs-comment">// åˆå§‹åŒ–è¯Šæ–­Skill</span>
        <span class="hljs-built_in">this</span>.memoryDiagnosticSkill = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MemoryDiagnosticSkill</span>(
            sandboxClient, fileSystem, toolRegistry
        );
        
        <span class="hljs-comment">// åˆå§‹åŒ–æŠ¥å‘Šç”ŸæˆSkill</span>
        <span class="hljs-type">ReportTemplateEngine</span> <span class="hljs-variable">templateEngine</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReportTemplateEngine</span>(fileSystem);
        <span class="hljs-built_in">this</span>.reportGenerationSkill = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiagnosticReportGenerationSkill</span>(
            templateEngine, memoryDiagnosticSkill, fileSystem
        );
        
        logger.info(<span class="hljs-string">"âœ“ AIOpsè¯Šæ–­ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ"</span>);
    }
    
    <span class="hljs-comment">/**
     * æ³¨å†Œè‡ªå®šä¹‰å·¥å…·
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerCustomTools</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">ToolContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolContext</span>();
        context.setWorkspaceRoot(fileSystem.getWorkspaceRoot());
        context.setTimeout(<span class="hljs-number">30000</span>);
        
        <span class="hljs-comment">// æ³¨å†Œæ—¥å¿—è§£æå·¥å…·</span>
        toolRegistry.registerCustomTool(<span class="hljs-string">"log_parser"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">LogParserTool</span>(context));
        
        <span class="hljs-comment">// æ³¨å†ŒæŒ‡æ ‡èšåˆå·¥å…·</span>
        toolRegistry.registerCustomTool(<span class="hljs-string">"metric_aggregator"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MetricAggregatorTool</span>(context));
        
        logger.info(<span class="hljs-string">"âœ“ è‡ªå®šä¹‰å·¥å…·æ³¨å†Œå®Œæˆ"</span>);
    }
    
    <span class="hljs-comment">/**
     * æ‰§è¡Œå®Œæ•´çš„è¯Šæ–­å’ŒæŠ¥å‘Šæµç¨‹
     */</span>
    <span class="hljs-keyword">public</span> DiagnosticReport <span class="hljs-title function_">runFullDiagnostics</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>.repeat(<span class="hljs-number">60</span>));
        logger.info(<span class="hljs-string">"å¼€å§‹AIOpsè¯Šæ–­å’ŒæŠ¥å‘Šç”Ÿæˆ"</span>);
        logger.info(<span class="hljs-string">"="</span>.repeat(<span class="hljs-number">60</span>));
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// Step 1: æ‰§è¡Œè¯Šæ–­</span>
            logger.info(<span class="hljs-string">"\nã€Step 1ã€‘æ‰§è¡Œè¯Šæ–­..."</span>);
            <span class="hljs-type">MemoryDiagnosticReport</span> <span class="hljs-variable">memoryReport</span> <span class="hljs-operator">=</span> memoryDiagnosticSkill.diagnose();
            logger.info(<span class="hljs-string">"âœ“ è¯Šæ–­å®Œæˆï¼ŒçŠ¶æ€: {}"</span>, memoryReport.getStatus());
            
            <span class="hljs-comment">// Step 2: ç”ŸæˆæŠ¥å‘Š</span>
            logger.info(<span class="hljs-string">"\nã€Step 2ã€‘ç”ŸæˆæŠ¥å‘Š..."</span>);
            <span class="hljs-type">DiagnosticReport</span> <span class="hljs-variable">report</span> <span class="hljs-operator">=</span> reportGenerationSkill.generateFullReport();
            logger.info(<span class="hljs-string">"âœ“ æŠ¥å‘Šç”Ÿæˆå®Œæˆï¼Œå·²ä¿å­˜åˆ°: {}"</span>, report.getReportPath());
            
            <span class="hljs-comment">// Step 3: è¾“å‡ºæ€»ç»“</span>
            logger.info(<span class="hljs-string">"\nã€Step 3ã€‘è¯Šæ–­æ€»ç»“"</span>);
            logger.info(<span class="hljs-string">"æ€»å†…å­˜: {}"</span>, formatBytes(memoryReport.getStatistics().getTotalMemory()));
            logger.info(<span class="hljs-string">"å·²ç”¨å†…å­˜: {}"</span>, formatBytes(memoryReport.getStatistics().getUsedMemory()));
            logger.info(<span class="hljs-string">"å†…å­˜ä½¿ç”¨ç‡: {:.1f}%"</span>,
                (<span class="hljs-type">double</span>) memoryReport.getStatistics().getUsedMemory() / 
                memoryReport.getStatistics().getTotalMemory() * <span class="hljs-number">100</span>);
            
            logger.info(<span class="hljs-string">"\nè¯Šæ–­å»ºè®®:"</span>);
            <span class="hljs-keyword">for</span> (String recommendation : memoryReport.getRecommendations()) {
                logger.info(<span class="hljs-string">"  {}"</span>, recommendation);
            }
            
            logger.info(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>.repeat(<span class="hljs-number">60</span>));
            logger.info(<span class="hljs-string">"è¯Šæ–­å’ŒæŠ¥å‘Šç”ŸæˆæˆåŠŸ"</span>);
            logger.info(<span class="hljs-string">"="</span>.repeat(<span class="hljs-number">60</span>));
            
            <span class="hljs-keyword">return</span> report;
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            logger.error(<span class="hljs-string">"è¯Šæ–­å¤±è´¥"</span>, e);
            <span class="hljs-keyword">throw</span> e;
        }
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">formatBytes</span><span class="hljs-params">(<span class="hljs-type">long</span> bytes)</span> {
        <span class="hljs-keyword">if</span> (bytes &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"0 B"</span>;
        <span class="hljs-keyword">final</span> String[] units = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">"B"</span>, <span class="hljs-string">"KB"</span>, <span class="hljs-string">"MB"</span>, <span class="hljs-string">"GB"</span>, <span class="hljs-string">"TB"</span>};
        <span class="hljs-type">int</span> <span class="hljs-variable">digitGroups</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (Math.log10(bytes) / Math.log10(<span class="hljs-number">1024</span>));
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%.1f %s"</span>, bytes / Math.pow(<span class="hljs-number">1024</span>, digitGroups), units[digitGroups]);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// è¿æ¥åˆ°Runtime Server</span>
        <span class="hljs-type">AIOpsDiagnosticSystem</span> <span class="hljs-variable">system</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AIOpsDiagnosticSystem</span>(
            <span class="hljs-string">"localhost"</span>,  <span class="hljs-comment">// Runtime Serverä¸»æœº</span>
            <span class="hljs-number">50051</span>         <span class="hljs-comment">// Runtime Serverç«¯å£</span>
        );
        
        <span class="hljs-comment">// è¿è¡Œè¯Šæ–­</span>
        <span class="hljs-type">DiagnosticReport</span> <span class="hljs-variable">report</span> <span class="hljs-operator">=</span> system.runFullDiagnostics();
        
        <span class="hljs-comment">// å¯ä»¥è¿›ä¸€æ­¥å¤„ç†æŠ¥å‘Š...</span>
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>